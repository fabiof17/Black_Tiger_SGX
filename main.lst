                             #[1]   "main.s"
   27                        	
   28               0010     	CORE_VERSION	=	$10			; Version 1.0
   29                        	
   30                        			; Get the user program's configuration settings, this will
   31                        			; be read from the current directory, if it exists, or the
   32                        			; "../include/" directory if not.
   33                        	
                             #[4]   "..\..\..\include\hucc\core-config.inc"
   34                        			include	"core-config.inc"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; core-config.inc
    5                        	;
    6                        	; Configuration settings for the "CORE(not TM)" PC Engine library code.
    7                        	;
    8                        	; Copyright John Brandwood 2021-2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; The idea is that you, a PCE developer, copy this file from the ../include/
   18                        	; directory and into your project's directory, and then customize the values
   19                        	; to suit your particular project.
   20                        	;
   21                        	; Because PCEAS searches the current (i.e. project) directory for an include
   22                        	; file first, then it will find your customized copy of the file rather than
   23                        	; the original copy in the ../include/ directory.
   24                        	;
   25                        	; That means that all of the different overlay programs in your project will
   26                        	; share the same overall library configuration for your game.
   27                        	;
   28                        	; ***************************************************************************
   29                        	; ***************************************************************************
   30                        	
   31                        	;
   32                        	; Are we going to take over MPR7?
   33                        	;
   34                        	; While this is the default for the "CORE(not TM)" library, it is definitely
   35                        	; possible to use the library to build CD-ROM code that runs with the System
   36                        	; Card in MPR7, and with the 1st bank remaining in MPR2.
   37                        	;
   38                        	; N.B. The CD-ROM Stage1 loader runs the library with USING_MPR7=0 while it
   39                        	;      installs the kernel into PCE RAM in MPR1.
   40                        	;
   41                        	
   42               0000     		.ifndef	USING_MPR7
   44                        		.endif
   45                        	
   46                        	;
   47                        	; Are we building a CD-ROM overlay that uses an already-built CD-ROM Stage1
   48                        	; loader to install the library's kernel code into PCE RAM in MPR1?
   49                        	;
   50                        	; If this is set, the library's kernel code will be excluded from the build,
   51                        	; which will save about 1KB-3KB of code space in every overlay program!
   52                        	;
   53                        	; N.B. The CD-ROM Stage1 loader sets USING_STAGE1=0 so it builds correctly.
   54                        	;
   55                        	
   56               0000     		.ifndef	USING_STAGE1
   58                        		.endif
   59                        	
   60                        	;
   61                        	; Are we currently building the CD-ROM Stage1 loader?
   62                        	;
   63                        	; If this is set, the library's startup code does not call the __sound_init
   64                        	; macro because the sound driver code is not usually a part of the kernel.
   65                        	;
   66                        	; N.B. The CD-ROM Stage1 loader sets BUILDING_STAGE1=1 so it builds correctly.
   67                        	;
   68                        	
   69               0000     		.ifndef	BUILDING_STAGE1
   71                        		.endif
   72                        	
   73                        	;
   74                        	; Is the last track of the CD a duplicate of the main ISO data track?
   75                        	;
   76                        	; Most CD games put two copies of the same ISO track on the CD, so that data
   77                        	; can be read from the secondary track if the drive has a problem reading it
   78                        	; it from the primary location.
   79                        	;
   80                        	; If set, the secondary track will be enabled when the library first starts.
   81                        	;
   82                        	
   83               0000     		.ifndef	SUPPORT_2ISO
   85                        		.endif
   86                        	
   87                        	;
   88                        	; Maximum number of directory entries to use from the ISO.
   89                        	;
   90                        	; The fewer that we choose, the less RAM memory we need. A setting of 64 is
   91                        	; a good compromise to use until you are putting lots of files on the ISO.
   92                        	;
   93                        	
   94               0000     		.ifndef	MAX_DIRSIZE
   96                        		.endif
   97                        	
   98                        	;
   99                        	; Use the System Card's PSG driver code instead of a modern alternative
  100                        	; sound driver like a DefleMask or Furnace player?
  101                        	;
  102                        	
  103               0000     		.ifndef	USING_PSGDRIVER
  105                        		.endif
  106                        	
  107                        	;
  108                        	; Support development for the Turbo EverDrive v2?
  109                        	;
  110                        	; This only applies to HuCard programs, but when chosen, the "CORE(not TM)"
  111                        	; kernel is moved from bank 0 to bank 2, and a minimal set of startup code
  112                        	; is put in bank 0.
  113                        	;
  114                        	; This is because the TED2 hardware occupies the whole of bank 0 when it is
  115                        	; activated, and so we need to run with a different bank in MPR7.
  116                        	;
  117                        	
  118               0000     		.ifndef	SUPPORT_TED2
  120                        		.endif
  121                        	
  122                        	;
  123                        	; Support development for the SuperGRAFX?
  124                        	;
  125                        	; This enables SuperGRAFX support in certain library functions.
  126                        	;
  127                        	
  128               0000     		.ifndef	SUPPORT_SGX
  130                        		.endif
  131                        	
  132                        	;
  133                        	; Choose SuperGRAFX VPC initialization mode.
  134                        	;
  135                        	; SGX_PARALLAX=0 (useful when VDC #1 is a fullscreen HUD)
  136                        	;
  137                        	;  FRONT
  138                        	;   SP1 = VDC #1 (pce) sprite pixels
  139                        	;   BG1 = VDC #1 (pce) background pixels
  140                        	;   SP2 = VDC #2 (sgx) sprite pixels
  141                        	;   BG2 = VDC #2 (sgx) background pixels
  142                        	;  BACK
  143                        	;
  144                        	; SGX_PARALLAX=1
  145                        	;
  146                        	;  FRONT
  147                        	;   SP1 = VDC #1 (pce) sprite pixels
  148                        	;   SP2 = VDC #2 (sgx) sprite pixels
  149                        	;   BG1 = VDC #1 (pce) background pixels
  150                        	;   BG2 = VDC #2 (sgx) background pixels
  151                        	;  BACK
  152                        	;
  153                        	
  154               0000     		.ifndef	SGX_PARALLAX
  156                        		.endif
  157                        	
  158                        	;
  159                        	; Support development for the ArcadeCard?
  160                        	;
  161                        	; This enables ArcadeCard support in certain library functions.
  162                        	;
  163                        	
  164               0000     		.ifndef	SUPPORT_ACD
  166                        		.endif
  167                        	
  168                        	;
  169                        	; Support development for the IFU's ADPCM hardware?
  170                        	;
  171                        	; Developers would normally just use the System Card functions for ADPCM, but
  172                        	; enabling this adds alternative functions, and allows ADPCM use on a HuCARD.
  173                        	;
  174                        	
  175               0000     		.ifndef	SUPPORT_ADPCM
  177                        		.endif
  178                        	
  179                        	;
  180                        	; Select which version of the joystick library code to include, only one of
  181                        	; these can be set to '1' ...
  182                        	;
  183                        	; SUPPORT_2BUTTON : Only returns buttons I and II.
  184                        	; SUPPORT_6BUTTON : Read buttons III-VI, but ignore a mouse.
  185                        	; SUPPORT_MOUSE	  : Read mouse, but ignore buttons III-VI.
  186                        	;
  187                        	; It doesn't make sense to design a game the relies on both the 6-button and
  188                        	; the mouse, so the joystick library is optimized for one or the other.
  189                        	;
  190                        	; Note that both those devices are always detected and no conflicts occur,
  191                        	; this just controls reading either buttons III-VI or the Mouse Y-movement.
  192                        	;
  193                        	
  194               0000     		.ifndef	SUPPORT_6BUTTON
  200                        		.endif
  201                        	
  202                        	;
  203                        	; How many joypad/mouse devices should be supported?
  204                        	;
  205                        	; This is normally 5, but can be set to 3 (or lower) in order to speed up
  206                        	; the processing and free up CPU time for other code, which is especially
  207                        	; useful for mouse games.
  208                        	;
  209                        	
  210               0000     		.ifndef	MAX_PADS
  212                        		.endif
  213                        	
  214                        	;
  215                        	; Implement a HuC-compatible seperate array for accumulating joypad presses?
  216                        	;
  217                        	; This is only really needed if your game is not expected to run at 60Hz and
  218                        	; so you will sometimes miss joypad presses.
  219                        	;
  220                        	; Alternatively you can set ACCUMULATE_JOY so that joypad presses are always
  221                        	; accumulated in the normal joytrg array, which is how asm programmers would
  222                        	; normally deal with this situation.
  223                        	;
  224                        	
  225               0000     		.ifndef HUC_JOY_EVENTS
  227                        		.endif
  228                        	
  229                        	;
  230                        	; Should "joytrg" accumulate presses, and so need to be explicitely cleared
  231                        	; after reading, or should it just be the result of the last read?
  232                        	;
  233                        	; This option has no effect if HUC_JOY_EVENTS is non-zero since that option
  234                        	; takes precedence over this one!
  235                        	;
  236                        	
  237               0000     		.ifndef ACCUMULATE_JOY
  239                        		.endif
  240                        	
  241                        	;
  242                        	; The DATA_BANK location needs to be set as early as possible so that library
  243                        	; code is able to put data in there before the total overall size of the code
  244                        	; is known.
  245                        	;
  246                        	; By default, DATA_BANK is the next bank after the CORE_BANK.
  247                        	;
  248                        	; RESERVE_BANKS allows developers to reserve some banks between the CORE_BANK
  249                        	; and the DATA_BANK that they can use however they wish.
  250                        	;
  251                        	; One use for RESERVE_BANKS is to create empty space that PCEAS can use when
  252                        	; it relocates procedures. This provides a way for a developer to group code
  253                        	; together at the start of memory, and leave the maximum number of banks for
  254                        	; loading dynamic data from CD-ROM.
  255                        	;
  256                        	; The KickC environment sets RESERVE_BANKS=1 (or higher) so that there is a
  257                        	; a bank for the permanent C code and static constants.
  258                        	;
  259                        	
  260               0000     		.ifndef	RESERVE_BANKS
  266                        		.endif	RESERVE_BANKS
                             #[3]   "..\..\..\include\hucc\core.inc"
   35                        	
   36                        	;
   37                        	; This is a simple macro to call System Card functions when using MPR7 for
   38                        	; running the "CORE(not TM)" PC Engine library code.
   39                        	;
   40                        	
   41                        	system		.macro
   42                        			ldy     #<\1
   43                        			jsr	call_bios
   44                        			.endm
   45                        	
   46                        	;
   47                        	; This replaces the System Card's ex_setvec, because "call_bios" uses the
   48                        	; Y register.
   49                        	;
   50                        	
   51                        	setvec		.macro
   52                        			php
   53                        			sei
   54                        			lda.l	#\2
   55                        			sta.l	\1
   56                        			lda.h	#\2
   57                        			sta.h	\1
   58                        			plp
   59                        			.endm
   60                        	
   61                        	;
   62                        	; Repurpose this System Card variable, since nmi_hook is never used.
   63                        	;
   64                        	; We'll use it as a vector to a user-supplied sound driver instead.
   65                        	;
   66                        	
   67               2206     	sound_hook	=	nmi_hook		; Sound Driver to run in VBL.
   68                        	
   69                        	;
   70                        	; CORE Zero-Page variables, relative to the System Card's ZP variables.
   71                        	;
   72                        	
   73               0000     		.if	USING_PSGDRIVER
   75                        		.else
   76               20EC     	core_zpend	=	$F8:20EC
   77                        		.endif	USING_PSGDRIVER
   78                        	
   79               0001     		.if	SUPPORT_SGX
   80                        	
   81                        			; Put some "CORE(not TM)" variables at the start of Zero Page.
   82                        			;
   83                        			; These are at the *start* of ZP so that the SuperGrafx shadow
   84                        			; "sgx_" registers are at a specific offset from their System
   85                        			; Card "vdc_" counterparts, and they MUST NOT be moved!
   86                        			;
   87                        			; This allows us to put SGX_VDC_OFFSET or PCE_VDC_OFFSET into
   88                        			; the X register, and then index into either set of hardware
   89                        			; registers and the "sgx_reg" or "vdc_reg" shadow-variables.
   90                        	
   91               0000     	PCE_VDC_OFFSET	=	$00		; Offset to PCE VDC chip & shadow vars.
   92               0010     	SGX_VDC_OFFSET	=	$10		; Offset to SGX VDC chip & shadow vars.
   93                        	
   94               2000     			.zp
   95               2000     			.org	$2000
   96    F8:2000             	__temp		ds	2		; $F8:2000 Use within any ASM routine.
   97    F8:2002             	_bp_bank	ds	1		; $F8:2002 Use within any ASM/HuCC routine.
   98    F8:2003             	sgx_crl		ds	1		; $F8:2003 SGX shadow (vdc_crl = $20F3).
   99    F8:2004             	sgx_crh		ds	1		; $F8:2004 SGX shadow (vdc_crh = $20F4).
  100    F8:2005             	core_1stbank	ds	1		; $F8:2005 1st bank of library code.
  101    F8:2006             	sgx_sr		ds	1		; $F8:2006 SGX shadow (vdc_sr  = $20F6).
  102    F8:2007             	sgx_reg		ds	1		; $F8:2007 SGX shadow (vdc_reg = $20F7).
  103                        	
  104               2008     	core_zp1st	=	*		; $F8:2008 1st free user address.
  105                        	
  106                        		.else	SUPPORT_SGX
  116                        		.endif	SUPPORT_SGX
  117                        	
  118                        	;
  119                        	; The kernel code in RAM follows the System Card's RAM variables.
  120                        	;
  121                        	
  122               0000     		.if	USING_PSGDRIVER
  124                        		.else
  125               22D0     	core_ram1st     =	$F8:22D0
  126                        		.endif	USING_PSGDRIVER
  127                        	
  128                        	;
  129                        	; Include the "CORE(not TM)" startup code to begin the HuCARD / Overlay.
  130                        	;
  131                        	
                             #[4]   "..\..\..\include\hucc\core-startup.asm"
  132                        			include	"core-startup.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; core-startup.asm
    5                        	;
    6                        	; The "CORE(not TM)" PC Engine library startup code that runs at boot/reset.
    7                        	;
    8                        	; Copyright John Brandwood 2021-2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; This is the initialization code in the 1st bank, and it is responsible for
   18                        	; setting up a consistant runtime environment for the developer's program,
   19                        	; so that the developer can concentrate on writing the program itself.
   20                        	;
   21                        	; The idea is that when a program is loaded, the first 40KB of it is mapped
   22                        	; as $4000..$DFFF, and initialization starts at $4000, with the developer's
   23                        	; program getting control after initialization, with a jump to "core_main".
   24                        	;
   25                        	; The initializtion sets up a small kernel of code that provides interrupt
   26                        	; handling that mimics a subset of the System Card's behavior, designed to
   27                        	; act in the same way on HuCARD and CD-ROM, with either the System Card in
   28                        	; MPR7, or with an overlay in MPR7.
   29                        	;
   30                        	; The kernel handles reading the joypad/mouse, and it offers handler hooks
   31                        	; for running the developer's interrupt code.  On CD-ROM systems, it also
   32                        	; handles the loading and running of subsequent overlay programs.
   33                        	;
   34                        	; On HuCARD, the kernel itself runs in MPR7; while on CD-ROM systems it is
   35                        	; run from RAM in MPR1, so that overlay programs are independant from each
   36                        	; other, and can be written in different programming languages.
   37                        	;
   38                        	;
   39                        	; 1) If we're running on a HuCARD, the initialization is simple!
   40                        	;
   41                        	;    The PC Engine's memory map is set to ...
   42                        	;
   43                        	;      MPR0 = bank $FF : PCE hardware
   44                        	;      MPR1 = bank $F8 : PCE RAM with Stack & ZP
   45                        	;      MPR2 = bank $00 : HuCARD ROM
   46                        	;      MPR3 = bank $01 : HuCARD ROM
   47                        	;      MPR4 = bank $02 : HuCARD ROM
   48                        	;      MPR5 = bank $03 : HuCARD ROM
   49                        	;      MPR6 = bank $04 : HuCARD ROM
   50                        	;      MPR7 = bank $00 : HuCARD ROM
   51                        	;
   52                        	;
   53                        	; 2) If we're running on a HuCARD that supports the Turbo Everdrive, then the
   54                        	;    first 2 banks are reserved for mapping the TED2 hardware and a RAM bank.
   55                        	;
   56                        	;    The PC Engine's memory map is set to ...
   57                        	;
   58                        	;      MPR0 = bank $FF : PCE hardware
   59                        	;      MPR1 = bank $F8 : PCE RAM with Stack & ZP
   60                        	;      MPR2 = bank $02 : HuCARD ROM
   61                        	;      MPR3 = bank $03 : HuCARD ROM
   62                        	;      MPR4 = bank $04 : HuCARD ROM
   63                        	;      MPR5 = bank $05 : HuCARD ROM
   64                        	;      MPR6 = bank $06 : HuCARD ROM
   65                        	;      MPR7 = bank $02 : HuCARD ROM
   66                        	;
   67                        	;
   68                        	; 3) If we're running on an old CD System, the overlay is loaded from the ISO
   69                        	;    into banks $80-$87 (64KB max).
   70                        	;
   71                        	;    The PC Engine's memory map is set to ...
   72                        	;
   73                        	;      MPR0 = bank $FF : PCE hardware
   74                        	;      MPR1 = bank $F8 : PCE RAM with Stack & ZP
   75                        	;      MPR2 = bank $80 : CD RAM
   76                        	;      MPR3 = bank $81 : CD RAM
   77                        	;      MPR4 = bank $82 : CD RAM
   78                        	;      MPR5 = bank $83 : CD RAM
   79                        	;      MPR6 = bank $84 : CD RAM
   80                        	;      MPR7 = bank $80 : CD RAM or System Card's bank $00
   81                        	;
   82                        	;
   83                        	; 4) If we're running on a SuperCD System, the overlay is loaded from the ISO
   84                        	;    into banks $68-$87 (256KB max).
   85                        	;
   86                        	;    The PC Engine's memory map is set to ...
   87                        	;
   88                        	;      MPR0 = bank $FF : PCE hardware
   89                        	;      MPR1 = bank $F8 : PCE RAM with Stack & ZP
   90                        	;      MPR2 = bank $68 : SCD RAM
   91                        	;      MPR3 = bank $69 : SCD RAM
   92                        	;      MPR4 = bank $6A : SCD RAM
   93                        	;      MPR5 = bank $6B : SCD RAM
   94                        	;      MPR6 = bank $6C : SCD RAM
   95                        	;      MPR7 = bank $68 : SCD RAM or System Card's bank $00
   96                        	;
   97                        	; ***************************************************************************
   98                        	; ***************************************************************************
   99                        	
  100                        	
  101                        	
  102               E000     			.code
  103               0000     			.bank	0
  104                        	
  105               0000     		.if	SUPPORT_TED2			; Do we want to use a TED2?
  177                        		.endif	SUPPORT_TED2
  178                        	
  179                        	
  180                        	
  181               0001     		.if	USING_MPR7
  182                        	
  183                        	; ***************************************************************************
  184                        	; ***************************************************************************
  185                        	;
  186                        	; RESET VECTORS (when running in MPR7, either as a HuCARD, or a CD overlay)
  187                        	;
  188                        	
  189                        			; Hardware reset and interrupt vectors.
  190                        	
  191               FFF4     			.org	$FFF4
  192                        	
  193    00:FFF4  10         	core_version:	db	CORE_VERSION		; CORE(not TM) Version.
  194    00:FFF5  80         			db	$80			; System Card compatibility.
  195                        	
  196    00:FFF6  5D E0      			dw	core_irq2		; IRQ2	(from CD/ADPCM)
  197    00:FFF8  64 E0      			dw	core_irq1		; IRQ1	(from VDC)
  198    00:FFFA  58 E1      			dw	core_timer		; TIMER (from CPU)
  199    00:FFFC  5E E1      			dw	core_rti		; NMI	(unused)
  200               0000     		.if	CDROM
  202                        		.else
  203    00:FFFE  21 E0      			dw	core_hw_reset		; RESET (HuCARD)
  204                        		.endif	CDROM
  205                        	
  206               0001     		.if	USING_NEWPROC			; If the ".proc" trampolines
  207               FFF3     	__trampolineptr =	$FFF3			; are in MPR7, tell PCEAS to
  208                        		.endif					; put them below the vectors.
  209                        	
  210                        		.else	USING_MPR7
  222                        		.endif	USING_MPR7
  223                        	
  224                        	
  225                        	
  226                        	; ***************************************************************************
  227                        	; ***************************************************************************
  228                        	;
  229                        	; !!! THE HuCARD/OVERLAY PROGRAM'S FIRST BANK STARTS HERE !!!
  230                        	;
  231                        	
  232                        			; Switch to MPR2 for the "CORE(not TM)" library init.
  233                        			;
  234                        			; This is also executed by a HuCARD once it has run
  235                        			; its initial hardware-reset code.
  236                        			;
  237                        			; When run, MPR2-MPR6 are always mapped to the 1st 5 banks of
  238                        			; the overlay program, and MPR7 contains the System Card.
  239                        	
  240               4000     			.org	$4000
  241                        	
  242               0000     	CORE_BANK	=	bank(*) - _bank_base	; It isn't always zero! ;-)
  243                        	
  244               0000     			.bank	CORE_BANK, "CORE_BANK"	; Give it a label.
  245                        	
  246               0001     		.if	USING_MPR7
  247               0007     	CORE_PAGE	=	7			; User code runs in MPR7.
  248                        		.else
  250                        		.endif	USING_MPR7
  251                        	
  252    00:4000  4C 06 40   	core_boot:	jmp	* + 6			; Allow someone to patch this.
  253                        	
  254                        			; Add an ident string so isoLINK can autodetect configuration.
  255                        			;
  256                        			; This allows isoLINK to decide whether to use the IPL-SCD boot
  257                        			; sector hack, and whether to include a SuperGRAFX signature in
  258                        			; the boot sector, without the user having to manually use some
  259                        			; command line parameters, although they are free to do that if
  260                        			; they wish.
  261                        	
  262               0001     		.if	SUPPORT_SGX
  263               0000     		.if	BUILDING_STAGE1
  265                        		.else
  266    00:4003  53 47 58   			db	"SGX"			; SGX SuperCD or SGX HuCARD.
  267                        		.endif	BUILDING_STAGE1
  268                        		.else
  282                        		.endif	SUPPORT_SGX
  283                        	
  284               0000     		.if	CDROM
  331                        		.else	CDROM
  332                        	
  333                        			; Set up HuCARD RAM in a compatible way to the System Card.
  334                        			;
  335                        			; Note that the entire RAM is cleared by "core_hw_reset".
  336                        	
  337    00:4006  A9 1F      			lda	#%11111			; Enable joypad soft-reset.
  338    00:4008  8D 27 22   			sta	joyena
  339                        	
  340                        		.endif	CDROM
  341                        	
  342                        			; Now that RAM is initialized ...
  343                        	
  344    00:400B  43 04      			tma2				; Remember overlay's 1st bank
  345    00:400D  85 05      			sta	<core_1stbank		; $00, $02, $68 or $80!
  346               0001     		.if	USING_MPR7
  347    00:400F  53 80      			tam7				; "CORE(not TM)" takes MPR7!
  348                        		.endif
  349                        	
  350    00:4011  A2 FF      			ldx	#$FF			; Initialize stack pointer.
  351    00:4013  9A         			txs
  352                        	
  353    00:4014  20 5F E1   			jsr	core_clr_hooks		; Reset default hooks.
  354                        	
  355                        	;		stz	TIMER_CR		; Stop HuC6280 timer.
  356                        	;		stz	IRQ_ACK			; Clr HuC6280 timer interrupt.
  357                        	;		stz	IRQ_MSK			; Clr HuC6280 interrupt mask.
  358                        	
  359    00:4017  AD 00 02   			lda	VDC_SR			; Purge any overdue VBL.
  360    00:401A  9C 41 22   			stz	irq_cnt			; Make it easy to check.
  361    00:401D  58         			cli				; Restore interrupts.
  362                        	
  363    00:401E  4C E5 FF   			jmp	core_main		; Start the game's code.
  364                        	
  365                        	
  366                        	
  367               0001     		.if	!CDROM
  368                        	
  369                        	; ***************************************************************************
  370                        	; ***************************************************************************
  371                        	;
  372                        	; HuCARD Kernel Code
  373                        	;
  374                        	; core_ram1st - Start of code to relocate to MPR1.
  375                        	; core_ramend - End of code to relocate to MPR1.
  376                        	;
  377                        	
  378                        			; In a HuCARD, BSS variables start as low as possible.
  379                        	
  380               2200     			.bss
  381               22D0     			.org	core_ram1st
  382               22D0     	core_ramend	=	*
  383               4021     			.code
  384                        	
  385                        			; Normal HuCARD hardware-reset code, executed in MPR7.
  386                        			;
  387                        			; This does the basic PCE startup that every HuCARD (including
  388                        			; a System Card) needs to do, and then it remaps memory to be
  389                        			; compatible with the "CORE(not TM)" CD overlay program start.
  390                        	
  391               E021     			.page	7			; This will run in MPR7.
  392                        	
  393    00:E021  78         	core_hw_reset:	sei				; Disable interrupts.
  394    00:E022  D4         			csh				; Set high-speed mode.
  395    00:E023  D8         			cld
  396                        	
  397    00:E024  A2 FF      			ldx	#$FF			; Initialize stack pointer.
  398    00:E026  9A         			txs
  399    00:E027  8A         			txa				; MPR0 = $FF : PCE hardware
  400    00:E028  53 01      			tam0				; MPR1 = $F8 : PCE RAM
  401    00:E02A  A9 F8      			lda	#$F8
  402    00:E02C  53 02      			tam1
  403                        	
  404    00:E02E  9C 01 0C   			stz	TIMER_CR		; HW reset already does these,
  405    00:E031  9C 03 14   			stz	IRQ_ACK			; but this may be a reset from
  406    00:E034  9C 02 14   			stz	IRQ_MSK			; software (i.e. joypad).
  407                        	
  408    00:E037  F3 53 E0 00			tai	const_0000, $2000, 8192 ; Clear RAM.
         00:E03B  20 00 20    
  409                        	
  410    00:E03E  43 80      			tma7				; Not always bank 0!
  411                        	
  412    00:E040  53 04      			tam2				; Set CD-ROM overlay memory map,
  413    00:E042  1A         			inc	a			; 1st 5 banks in MPR2-MPR6.
  414    00:E043  53 08      			tam3
  415    00:E045  1A         			inc	a
  416    00:E046  53 10      			tam4
  417    00:E048  1A         			inc	a
  418    00:E049  53 20      			tam5
  419    00:E04B  1A         			inc	a
  420    00:E04C  53 40      			tam6
  421                        	
  422    00:E04E  4C 00 40   			jmp	core_boot		; Continue execution in MPR2.
  423                        	
  424                        			; In a HuCARD, the kernel code is permanently in MPR7.
  425                        	
                             #[5]   "..\..\..\include\hucc\core-kernel.asm"
  426                        			include "core-kernel.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; core-kernel.asm
    5                        	;
    6                        	; The "CORE(not TM)" PC Engine library kernel code that runs after startup.
    7                        	;
    8                        	; Copyright John Brandwood 2021-2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; This code is permanently located in either MPR7 (HuCARD), or MPR1 (CD-ROM),
   18                        	; and it provides a consistant method of interrupt-handling on both systems
   19                        	; that is designed to be compatible with the System Card.
   20                        	;
   21                        	; The library uses the "irq1_hook" for its own VDC interrupt handler, and PCE
   22                        	; developers are expected to use "vsync_hook" and "hsync_hook" for their VDC
   23                        	; interrupt functions.  Plenty of memory is available in the 1st bank for the
   24                        	; developer to put those functions.
   25                        	;
   26                        	; The reason for using "irq1_hook", is so that the library can work properly
   27                        	; if either the current overlay program, or the System Card, are mapped into
   28                        	; MPR7 whenever an interrupt occurs.
   29                        	;
   30                        	; The VDC interupt handler itself is changed from the System Card's handler,
   31                        	; and it is designed to provide faster response to vsync_hook, and to enable
   32                        	; interrupts during the slow(ish) joypad and sound driver code, so that both
   33                        	; raster and timer interrupts are not delayed.
   34                        	;
   35                        	; Developers are free to enable interrupts during their own vsync_hook code,
   36                        	; if they wish to do so.
   37                        	;
   38                        	; On CD-ROM systems, this library kernel also provides a function to load and
   39                        	; run a new overlay program, without relying upon any of the code/data within
   40                        	; the current overlay program's memory (unlike HuC v3).
   41                        	;
   42                        	; ***************************************************************************
   43                        	; ***************************************************************************
   44                        	
   45                        	
   46                        	
   47                        	; ***************************************************************************
   48                        	; ***************************************************************************
   49                        	;
   50                        	; core_kernel - Start of kernel code.
   51                        	;
   52                        	
   53               E051     	core_kernel	=	*
   54                        	
   55                        	
   56                        	
   57                        	; ***************************************************************************
   58                        	; ***************************************************************************
   59                        	;
   60                        	; Useful constants, needed by joypad library code, and used by many others.
   61                        	;
   62                        	; The kernel starts with a non-zero byte so that core-startup.asm can check
   63                        	; whether it has already been loaded into RAM.
   64                        	;
   65                        	
   66    00:E051  FF FF      	const_FFFF:	dw	$FFFF			; Useful constant for TAI.
   67    00:E053  00 00      	const_0000:	dw	$0000			; Useful constant for TAI.
   68                        	
   69    00:E055  01 02 04 08	bit_mask:	db	$01,$02,$04,$08,$10,$20,$40,$80
         00:E059  10 20 40 80 
   70                        	
   71                        	
   72                        	
   73                        	; ***************************************************************************
   74                        	; ***************************************************************************
   75                        	;
   76                        	; core_irq2  - Minimal interrupt handler compatible with System Card.
   77                        	; core_irq1  - Minimal interrupt handler compatible with System Card.
   78                        	; core_timer - Minimal interrupt handler compatible with System Card.
   79                        	; core_rti   - Minimal interrupt handler compatible with System Card.
   80                        	;
   81                        	; Note that it takes 8 cycles to respond to an IRQ.
   82                        	;
   83                        	; These routines are copied to a location in RAM that does not vary when
   84                        	; a different overlay program is loaded.
   85                        	;
   86                        	; All overlay programs are set up to vector interrupts to these routines,
   87                        	; which is designed to avoid interrupt-related crashes when loading a new
   88                        	; overlay on top of an old overlay in memory.
   89                        	;
   90                        	; All of the game's actual interrupt handling itself is done in the "hook"
   91                        	; functions so that everything works the same if the System Card is banked
   92                        	; into MPR7 when an interrupt occurs.
   93                        	;
   94                        	; ***************************************************************************
   95                        	; ***************************************************************************
   96                        	;
   97                        	; Bit settings for irq_vec  ...
   98                        	;
   99                        	;   7 : 1 to skip BIOS hsync processsing
  100                        	;   6 : 1 to call [hsync_hook]
  101                        	;   5 : 1 to skip BIOS vsync processsing
  102                        	;   4 : 1 to call [vsync_hook]
  103                        	;
  104                        	;   3 : 1 to jump [nmi_hook]
  105                        	;   2 : 1 to jump [timer_hook]
  106                        	;   1 : 1 to jump [irq1_hook]
  107                        	;   0 : 1 to jump [irq2_hook]
  108                        	;
  109                        	; ***************************************************************************
  110                        	; ***************************************************************************
  111                        	
  112    00:E05D  8F F5 01   	core_irq2:	bbs0	<irq_vec, .hook		; 8 cycles if using hook.
  113                        	
  114               0000     		.if	CDROM
  138                        		.else
  139                        			; Does this HuCARD support the IFU's ADPCM hardware?
  140                        	
  141               0000     		.if	SUPPORT_ADPCM
  153                        		.endif	SUPPORT_ADPCM
  154                        	
  155    00:E060  40         			rti				; No IRQ2 hardware on HuCARD.
  156                        	
  157    00:E061  6C 00 22   	.hook:		jmp	[irq2_hook]		; 7 cycles.
  158                        		.endif	CDROM
  159                        	
  160                        	
  161                        	
  162                        	; ***************************************************************************
  163                        	; ***************************************************************************
  164                        	;
  165                        	; core_irq1 - Minimal interrupt handler compatible with System Card.
  166                        	;
  167                        	; irq1_handler - Basic "CORE(not TM)" IRQ1 handler to use as the "irq1_hook".
  168                        	;
  169                        	; Doing the IRQ1 handler processing in this hook means that things operate
  170                        	; the same whether the System Card or an Overlay is paged into MPR7.
  171                        	
  172               0000     		.ifndef	HUCC
  181                        		.else
  182                        			; Faster IRQ servicing for HuCC and code that would like to
  183                        			; avoid the 8 cycles used by the "bbs1" instruction that is
  184                        			; taken when the System Card is mapped into MPR7.
  185                        	
  186    00:E064             	core_irq1:	;;;				; 8 (cycles for the INT)
  187               0001     		.if	CDROM || !defined(NO_CORE_IRQ1_HOOK)
  188    00:E064  6C 02 22   			jmp	[irq1_hook]		; 7 cycles.
  189                        	
  190                        		.endif
  191                        		.endif
  192                        	
  193    00:E067  48         	irq1_handler:	pha				; 3 Save all registers.
  194    00:E068  DA         			phx				; 3
  195    00:E069  5A         			phy				; 3
  196                        	
  197               0000     		.ifndef	USING_RCR_MACROS		;   This slows things down
  206                        		.endif	USING_RCR_MACROS
  207                        	
  208    00:E06A  AD 00 02   			lda	VDC_SR			; 6 Acknowledge the VDC's IRQ.
  209    00:E06D  85 F6      			sta	<vdc_sr			; 4 Remember what caused it.
  210                        	
  211               0001     		.if	SUPPORT_SGX
  212    00:E06F  AE 10 02   			ldx	SGX_SR			; 6 Read SGX_SR after VDC_SR in
  213    00:E072  86 06      			stx	<sgx_sr			; 4 case this is not an SGX!
  214                        		.endif
  215                        	
  216                        			; Handle the VDC's RCR interrupt.
  217                        	
  218    00:E074  29 04      	!:		and	#$04			; 2 Is this an HSYNC interrupt?
  219    00:E076  F0 44      			beq	!+			; 2
  220                        	
  221               0001     		.ifdef	USING_RCR_MACROS
  222                        			VDC_RCR_MACRO
                             	
         00:E078  03 06      			st0	#VDC_RCR		; 5
                             	
         00:E07A  AE 1D 27   			ldx	vdc_next_region		; 5 X and Y can be greater than
         00:E07D  BC 1E 27   			ldy	vdc_regionA_nxt, x	; 5 HUCC_PCE_SPLITS if regionB!
         00:E080  18         			clc				; 2
         00:E081  D0 05      			bne	!set_next_rcr+		; 4 Stop RCR if next line is 0.
                             	
         00:E083  2D 53 E0   			and	const_0000		; 5 A=$00 with the same #cycles
         00:E086  80 05      			bra	!clr_next_rcr+		; 4 as if the branch were taken.
                             	
         00:E088  B9 CD 26   	!set_next_rcr:	lda	vdc_regionA_rcr, y	; 5 Set next RCR 1 line before
         00:E08B  69 3F      			adc	#64-1			; 2 the region begins, or 0 to
         00:E08D  8D 02 02   	!clr_next_rcr:	sta	VDC_DL			; 6 disable.
         00:E090  62         			cla				; 2
         00:E091  2A         			rol	a			; 2
         00:E092  8D 03 02   			sta	VDC_DH			; 6
                             	
         00:E095  03 08      			st0	#VDC_BYR		; 5 Do BYR first to mitigate the
         00:E097  BD FD 26   			lda	vdc_regionA_yl, x	; 5 glitch if the IRQ is delayed.
         00:E09A  8D 02 02   			sta	VDC_DL			; 6 = 105 cycles from RCR on SGX
         00:E09D  BD 0D 27   			lda	vdc_regionA_yh, x	; 5
         00:E0A0  8D 03 02   			sta	VDC_DH			; 6
                             	
         00:E0A3  03 05      			st0	#VDC_CR			; 5
         00:E0A5  BD BD 26   			lda	vdc_regionA_crl, x	; 5
                             	;		asl	a
         00:E0A8  8D 02 02   			sta	VDC_DL			; 6
                             	
         00:E0AB  03 07      			st0	#VDC_BXR		; 2
         00:E0AD  BD DD 26   			lda	vdc_regionA_xl, x	; 5
         00:E0B0  8D 02 02   			sta	VDC_DL			; 6
         00:E0B3  BD ED 26   			lda	vdc_regionA_xh, x	; 5
         00:E0B6  8D 03 02   			sta	VDC_DH			; 6 = 156 cycles from RCR if DUO
                             	
                             	;		bcc	!+
                             	;		lda	vdc_regionA_yh, x	; 5
                             	;		sta.l	VCE_CTW			; 6
                             	
         00:E0B9  8C 1D 27   			sty	vdc_next_region		; 5
                             	
  223                        		.else
  225                        		.endif
  226                        	
  227               0001     		.if	SUPPORT_SGX
  228                        	
  229                        			; Handle the SGX's RCR interrupt.
  230                        	
  231    00:E0BC  2F 06 50   	!:		bbr2	<sgx_sr, !+		; 6 Is this an HSYNC interrupt?
  232                        	
  233               0001     		.ifdef	USING_RCR_MACROS
  234                        			SGX_RCR_MACRO
                             	
         00:E0BF  A9 06      			lda	#VDC_RCR		; 2
         00:E0C1  8D 10 02   			sta	SGX_AR			; 6
                             	
         00:E0C4  AE 9E 27   			ldx	sgx_next_region		; 5 X and Y can be greater than
         00:E0C7  BC 9F 27   			ldy	sgx_regionA_nxt, x	; 5 HUCC_SGX_SPLITS if regionB!
         00:E0CA  18         			clc				; 2
         00:E0CB  D0 05      			bne	!set_next_rcr+		; 4 Stop RCR if next line is 0.
                             	
         00:E0CD  2D 53 E0   			and	const_0000		; 5 A=$00 with the same #cycles
         00:E0D0  80 05      			bra	!clr_next_rcr+		; 4 as if the branch were taken.
                             	
         00:E0D2  B9 4E 27   	!set_next_rcr:	lda	sgx_regionA_rcr, y	; 5 Set next RCR 1 line before
         00:E0D5  69 3F      			adc	#64-1			; 2 the region begins, or 0 to
         00:E0D7  8D 12 02   	!clr_next_rcr:	sta	SGX_DL			; 6 disable.
         00:E0DA  62         			cla				; 2
         00:E0DB  2A         			rol	a			; 2
         00:E0DC  8D 13 02   			sta	SGX_DH			; 6
                             	
         00:E0DF  A9 08      			lda	#VDC_BYR		; 2 Do BYR first to mitigate the
         00:E0E1  8D 10 02   			sta	SGX_AR			; 6 glitch if the IRQ is delayed.
         00:E0E4  BD 7E 27   			lda	sgx_regionA_yl, x	; 5
         00:E0E7  8D 12 02   			sta	SGX_DL			; 6
         00:E0EA  BD 8E 27   			lda	sgx_regionA_yh, x	; 5
         00:E0ED  8D 13 02   			sta	SGX_DH			; 6
                             	
         00:E0F0  A9 05      			lda	#VDC_CR			; 2
         00:E0F2  8D 10 02   			sta	SGX_AR			; 6
         00:E0F5  BD 3E 27   			lda	sgx_regionA_crl, x	; 5
         00:E0F8  8D 12 02   			sta	SGX_DL			; 6
                             	
         00:E0FB  A9 07      			lda	#VDC_BXR		; 2
         00:E0FD  8D 10 02   			sta	SGX_AR			; 6
         00:E100  BD 5E 27   			lda	sgx_regionA_xl, x	; 5
         00:E103  8D 12 02   			sta	SGX_DL			; 6
         00:E106  BD 6E 27   			lda	sgx_regionA_xh, x	; 5
         00:E109  8D 13 02   			sta	SGX_DH			; 6 = 293 cycles (282 if no YH)
                             	
         00:E10C  8C 9E 27   			sty	sgx_next_region		; 5
                             	
  235                        		.else
  237                        		.endif
  238                        	
  239                        		.endif	SUPPORT_SGX
  240                        	
  241                        			; Handle the VDC's VBL interrupt.
  242                        	
  243    00:E10F  5F F6 32   	!:		bbr5	<vdc_sr, .exit_irq1	; 6 Is this a VBLANK interrupt?
  244                        	
  245               0001     		.ifdef	USING_RCR_MACROS		;   If we didn't do it earlier
  246               0000     		.if	CDROM				;   then we need to do it now.
  253                        		.endif	CDROM
  254                        		.endif	USING_RCR_MACROS
  255                        	
  256               0001     		.if	SUPPORT_SGX
  257    00:E112  A9 05      			lda	#VDC_CR			; Update the SGX's Control
  258    00:E114  8D 10 02   			sta	SGX_AR			; Register first, just in
  259    00:E117  8D 00 02   			sta	VDC_AR			; case this is not an SGX!
  260    00:E11A  A5 03      			lda	<sgx_crl		
  261    00:E11C  8D 12 02   			sta	SGX_DL
  262    00:E11F  A5 F3      			lda	<vdc_crl
  263    00:E121  8D 02 02   			sta	VDC_DL
  264                        	
  265                        	;		lda	<sgx_crh		; Do not mess with the SGX's
  266                        	;		sta	SGX_DH			; auto-increment!!!
  267                        	;		lda	<vdc_crh		; Do not mess with the VDC's
  268                        	;		sta	VDC_DH			; auto-increment!!!
  269                        		.else
  277                        		.endif	SUPPORT_SGX
  278                        	
  279    00:E124  EE 41 22   			inc	irq_cnt			; Mark that a VBLANK occurred.
  280                        	
  281    00:E127  4F F5 02   			bbr4	<irq_vec, .skip_hookv	; Is a driver registered?
  282                        	
  283    00:E12A  44 26      			bsr	.user_vsync		; Call game's VBLANK code.
  284                        	
  285    00:E12C  DF F5 15   	.skip_hookv:	bbs5	<irq_vec, .exit_vbl	; Should we skip "BIOS" stuff?
  286                        	
  287    00:E12F  58         			cli				; Allow HSYNC and TIMER IRQ.
  288                        	
  289    00:E130  20 DB FF   			call	read_joypads		; Update joypad state.
  290                        	
  291               0000     		.if	USING_PSGDRIVER
  305                        		.else
  306    00:E133  AD 07 22   			lda	sound_hook + 1		; Is a driver registered?
  307    00:E136  F0 0C      			beq	.exit_vbl
  308                        	
  309    00:E138  A9 80      			lda	#$80			; Acquire sound mutex to avoid
  310    00:E13A  0C E7 22   			tsb	sound_mutex		; conflict with a delayed VBL.
  311    00:E13D  30 05      			bmi	.exit_vbl
  312                        	
  313    00:E13F  44 14      			bsr	.user_sound		; Call the driver hook.
  314                        	
  315    00:E141  9C E7 22   			stz	sound_mutex		; Release sound mutex.
  316                        		.endif	USING_PSGDRIVER
  317                        	
  318    00:E144             	.exit_vbl:
  319                        	
  320               0001     		.ifdef	USING_RCR_MACROS		; If USING_RCR_MACROS then 
  321               0000     		.if	CDROM				; restore after the VBLANK.
  326                        		.endif	CDROM
  327                        		.endif	USING_RCR_MACROS
  328                        	
  329    00:E144             	.exit_irq1:
  330                        	
  331               0000     		.ifndef	USING_RCR_MACROS		; If !USING_RCR_MACROS then
  338                        		.endif	USING_RCR_MACROS
  339                        	
  340               0001     		.if	SUPPORT_SGX
  341    00:E144  A5 07      			lda	<sgx_reg		; Restore SGX_AR first, just
  342    00:E146  8D 10 02   			sta	SGX_AR			; in case this is not an SGX!
  343                        		.endif
  344                        	
  345    00:E149  A5 F7      			lda	<vdc_reg		; Restore VDC_AR in case we
  346    00:E14B  8D 00 02   			sta	VDC_AR			; changed it.
  347                        	
  348    00:E14E  7A         			ply				; Restore all registers.
  349    00:E14F  FA         			plx
  350    00:E150  68         			pla
  351                        	
  352    00:E151  40         			rti				; Return from interrupt.
  353                        	
  354    00:E152  6C 08 22   	.user_vsync:	jmp	[vsync_hook]		; 7
  355    00:E155  6C 06 22   	.user_sound:	jmp	[sound_hook]		; 7
  356                        	
  357               0000     		.ifndef	USING_RCR_MACROS
  362                        		.endif	USING_RCR_MACROS
  363                        	
  364                        	
  365                        	
  366                        	; ***************************************************************************
  367                        	; ***************************************************************************
  368                        	;
  369                        	; core_timer - Minimal interrupt handler compatible with System Card.
  370                        	;
  371                        	; tirq_handler - Basic "CORE(not TM)" TIRQ handler to use as the "timer_hook".
  372                        	;
  373                        	; Doing the TIRQ handler processing in this hook means that things operate
  374                        	; the same whether the System Card or an Overlay is paged into MPR7.
  375                        	
  376               0000     		.ifndef	HUCC
  385                        		.else
  386                        			; Faster IRQ servicing for HuCC and code that would like to
  387                        			; avoid the 8 cycles used by the "bbs2" instruction that is
  388                        			; taken when the System Card is mapped into MPR7.
  389                        	
  390    00:E158             	core_timer:	;;;				; 8 (cycles for the INT)
  391               0001     		.if	CDROM || !defined(NO_CORE_TIRQ_HOOK)
  392    00:E158  6C 04 22   			jmp	[timer_hook]		; 7 cycles.
  393                        		.endif
  394                        		.endif
  395                        	
  396    00:E15B             	tirq_handler:
  397               0000     		.ifdef	USING_TIRQ_MACRO
  399                        		.else
  400    00:E15B  9C 03 14   			stz	IRQ_ACK			; 5 Clear timer interrupt.
  401                        		.endif
  402                        	
  403    00:E15E  40         	core_rti:	rti
  404                        	
  405                        	
  406                        	
  407                        	; ***************************************************************************
  408                        	; ***************************************************************************
  409                        	;
  410                        	; core_clr_hooks - Reset default "CORE(not TM)" interrupt-handling hooks.
  411                        	;
  412                        	
  413    00:E15F  08         	core_clr_hooks:	php				; Preserve interrupt state.
  414    00:E160  78         			sei				; Disable interrupts.
  415                        	
  416               0000     		.if	USING_PSGDRIVER
  419                        		.else
  420    00:E161  9C 07 22   			stz.h	sound_hook		; Disable sound driver calls.
  421                        		.endif
  422                        	
  423    00:E164  A9 88      			lda	#<core_sw_reset		; Set up the soft-reset hook.
  424    00:E166  8D 84 22   			sta.l	reset_hook
  425    00:E169  A9 E1      			lda	#>core_sw_reset
  426    00:E16B  8D 85 22   			sta.h	reset_hook
  427                        	
  428    00:E16E  A9 67      			lda	#<irq1_handler		; Set up the IRQ1 hook.
  429    00:E170  8D 02 22   			sta.l	irq1_hook
  430    00:E173  A9 E0      			lda	#>irq1_handler
  431    00:E175  8D 03 22   			sta.h	irq1_hook
  432                        	
  433    00:E178  A9 5B      			lda	#<tirq_handler		; Set up the TIRQ hook.
  434    00:E17A  8D 04 22   			sta.l	timer_hook
  435    00:E17D  A9 E1      			lda	#>tirq_handler
  436    00:E17F  8D 05 22   			sta.h	timer_hook
  437                        	
  438    00:E182  A9 06      			lda	#%00000110		; Replace the System Card's
  439    00:E184  85 F5      			sta	<irq_vec		; IRQ1 and TIRQ processing.
  440                        	
  441    00:E186  28         			plp				; Restore interrupt state.
  442    00:E187  60         			rts
  443                        	
  444                        	
  445                        	
  446                        	; ***************************************************************************
  447                        	; ***************************************************************************
  448                        	;
  449                        	; Include the joypad library, with configuration from "core-config.inc".
  450                        	;
  451                        	
                             #[6]   "..\..\..\include\hucc\joypad.asm"
  452                        			include "joypad.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; joypad.asm
    5                        	;
    6                        	; Read 2-button & 6-button joypads & PCE mouse, with or without a MultiTap.
    7                        	;
    8                        	; Copyright John Brandwood 2019-2025.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; Unlike Lemmings, this code does not interfere with a Memory Base 128! ;-)
   18                        	;
   19                        	; ***************************************************************************
   20                        	; ***************************************************************************
   21                        	;
   22                        	; With SUPPORT_MOUSE ..... 2602 cycles to read 5 ports with 5 mice
   23                        	;
   24                        	; With HuC library code .. 2442 cycles to read 5 ports with 5 pads (2-button)
   25                        	; With HuC library code .. 2442 cycles to read 5 ports with 5 pads (6-button)
   26                        	;
   27                        	; With SUPPORT_MOUSE ....  2016 cycles to read 5 ports with 5 pads (2-button)
   28                        	; With SUPPORT_MOUSE ..... 1976 cycles to read 5 ports with 5 pads (6-button)
   29                        	;
   30                        	; With SUPPORT_MOUSE ....  1618 cycles to read 3 ports with 3 mice
   31                        	; With SUPPORT_MOUSE ..... 1462 cycles to read 3 ports with 2 mice
   32                        	; With SUPPORT_MOUSE ..... 1306 cycles to read 3 ports with 1 mouse
   33                        	;
   34                        	; With SUPPORT_6BUTTON ... 1235 cycles to read 5 ports with 5 pads (2-button)
   35                        	; With SUPPORT_6BUTTON ... 1215 cycles to read 5 ports with 5 pads (6-button)
   36                        	;
   37                        	; With SUPPORT_MOUSE ..... 1126 cycles to read 2 ports with 2 mice
   38                        	; With SUPPORT_MOUSE ...... 970 cycles to read 2 ports with 1 mouse
   39                        	;
   40                        	; Only SUPPORT_2BUTTON .... 971 cycles to read 5 ports with 5 pads (2-button)
   41                        	; Only SUPPORT_2BUTTON .... 861 cycles to read 5 ports with 5 pads (6-button)
   42                        	;
   43                        	; With SUPPORT_MOUSE ...... 634 cycles to read 1 port  with 1 mouse
   44                        	;
   45                        	; ***************************************************************************
   46                        	; ***************************************************************************
   47                        	
  142                        	
  143                        	;
  144                        	; Now choose which version of the code to include.
  145                        	;
  146                        	
  147               0000     		.if	SUPPORT_2BUTTON
  278                        		.endif	SUPPORT_2BUTTON
  279                        	
  280                        	
  281                        	
  282               0000     		.if	SUPPORT_MOUSE
  845                        		.else	SUPPORT_MOUSE
  846                        	
  847                        	
  848                        	
  849               0001     		.if	SUPPORT_6BUTTON			; Without mouse!
  850                        	
  851                        	; ***************************************************************************
  852                        	; ***************************************************************************
  853                        	;
  854                        	; read_joypads - full 6-button pad support, but mouse movement is ignored.
  855                        	;
  856                        	; This code distinguishes between a mouse and a 2-button or 6-button joypad,
  857                        	; so that unsupported devices do not have to be unplugged from the MultiTap.
  858                        	;
  859                        	; The code loops two times to get both sets of buttons on a 6-button joypad.
  860                        	;
  861                        	; N.B. Takes approx 1/3 frame to detect mice the first time it is run.
  862                        	;
  863                        	; bit values for joypad 2-button bytes: (MSB = #7; LSB = #0)
  864                        	; ----------------------------------------------------------
  865                        	; bit 0 (ie $01) = I
  866                        	; bit 1 (ie $02) = II
  867                        	; bit 2 (ie $04) = SELECT
  868                        	; bit 3 (ie $08) = RUN
  869                        	; bit 4 (ie $10) = UP
  870                        	; bit 5 (ie $20) = RIGHT
  871                        	; bit 6 (ie $40) = DOWN
  872                        	; bit 7 (ie $80) = LEFT
  873                        	;
  874                        	; bit values for joypad 6-button bytes: (MSB = #7; LSB = #0)
  875                        	; ----------------------------------------------------------
  876                        	; bit 0 (ie $01) = III
  877                        	; bit 1 (ie $02) = IV
  878                        	; bit 2 (ie $04) = V
  879                        	; bit 3 (ie $08) = VI
  880                        	; bit 4 (ie $10) = zero
  881                        	; bit 5 (ie $20) = zero
  882                        	; bit 6 (ie $40) = zero
  883                        	; bit 7 (ie $80) = zero, but set to one if 6-button pad detected.
  884                        	;
  885                        	
  886               E188     			.code
  887                        	
  888               0001     		.if	(* >= $4000)			; Make this a ".proc" if it
  889    02:DE5F             	read_joypads	.proc                           ; not running in RAM.
  890                        		.else
  892                        		.endif
  893                        	
  894    02:DE5F  A9 80      			lda	#$80			; Acquire port mutex to avoid
  895    02:DE61  0C D0 22   			tsb	port_mutex		; conflict with a delayed VBL
  896    02:DE64  30 75      			bmi	.exit			; or access to an MB128.
  897                        	
  898    02:DE66  73 28 22 32			tii	joynow,joyold,MAX_PADS	; Save the previous values.
         02:DE6A  22 05 00    
  899    02:DE6D  73 D3 22 D8			tii	joy6now,joy6old,MAX_PADS
         02:DE71  22 05 00    
  900                        	
  901                        			; Reset the 6-btn bits, the user might change the joypad mode!
  902                        	
  903    02:DE74  F3 53 E0 D3			tai	const_0000, joy6now, MAX_PADS
         02:DE78  22 05 00    
  904                        	
  905                        			; Detect attached mice the first time this routine is called.
  906                        	
  907    02:DE7B  AD D2 22   			lda	mouse_flg		; Has mouse detection happened?
  908    02:DE7E  30 28      			bmi	.calc_pressed
  909                        	
  910    02:DE80  A9 05      			lda	#MAX_PADS		; Reset number of pads to read.
  911    02:DE82  8D D1 22   			sta	num_ports
  912                        	
  913    02:DE85  A9 1F      			lda	#%00011111		; Try reading everything as a
  914    02:DE87  8D D2 22   			sta	mouse_flg		; mouse.
  915                        	
  916    02:DE8A  A0 17      			ldy	#23			; Initialize repeat count.
  917    02:DE8C  A9 80      			lda	#$80			; Initialize mouse detection.
  918    02:DE8E  5A         	.detect_loop:	phy
  919    02:DE8F  48         			pha
  920    02:DE90  44 53      			bsr	.read_devices		; Read all devices as if mice.
  921    02:DE92  68         			pla
  922    02:DE93  82         			clx
  923    02:DE94  BC E2 22   	.detect_port:	ldy	mouse_x, x		; A movement of zero means
  924    02:DE97  D0 03      			bne	.detect_next		; this port is a mouse.
  925    02:DE99  1D 55 E0   			ora	bit_mask, x
  926    02:DE9C  E8         	.detect_next:	inx				; Get the next pad from the
  927    02:DE9D  E0 05      			cpx	#MAX_PADS		; multitap.
  928    02:DE9F  D0 F3      			bne	.detect_port
  929    02:DEA1  7A         			ply				; Repeat the detection test.
  930    02:DEA2  88         			dey
  931    02:DEA3  D0 E9      			bne	.detect_loop
  932                        	
  933                        	;	.if	DETECT_PHANTOMS
  934                        	;		cmp	#(1 << MAX_PADS) + 127	; If we find a mouse in every
  935                        	;		bne	.detect_done		; port, then assume mirrored!
  936                        	;		lda	#1			; Report a single mouse in a
  937                        	;		sta	num_ports		; single port.
  938                        	;		lda	#$81
  939                        	;	.endif
  940                        	
  941    02:DEA5  8D D2 22   	.detect_done:	sta	mouse_flg		; Report mouse detection.
  942                        	
  943                        			; See what has just been pressed, and check for soft-reset.
  944                        	
  945    02:DEA8  44 3B      	.calc_pressed:	bsr	.read_devices		; Read all devices normally.
  946                        	
  947    02:DEAA  A2 04      			ldx	#MAX_PADS - 1
  948                        	
  949    02:DEAC  BD D3 22   	.pressed_loop:	lda	joy6now, x		; Calc which buttons have just
  950    02:DEAF  5D D8 22   			eor	joy6old, x		; been pressed (6-button).
  951    02:DEB2  3D D3 22   			and	joy6now, x
  952               0000     		.if	HUC_JOY_EVENTS
  956                        		.else
  957               0000     		.if	ACCUMULATE_JOY
  959                        		.endif
  960    02:DEB5  9D DD 22   			sta	joy6trg, x
  961                        		.endif
  962                        	
  963    02:DEB8  BD 28 22   			lda	joynow, x		; Calc which buttons have just
  964    02:DEBB  A8         			tay                             ; been pressed (2-button).
  965    02:DEBC  5D 32 22   			eor	joyold, x
  966    02:DEBF  3D 28 22   			and	joynow, x
  967               0000     		.if	HUC_JOY_EVENTS
  971                        		.else
  972               0000     		.if	ACCUMULATE_JOY
  974                        		.endif
  975    02:DEC2  9D 2D 22   			sta	joytrg, x
  976                        		.endif
  977                        	
  978    02:DEC5  C9 04      			cmp	#$04			; Detect the soft-reset combo,
  979    02:DEC7  D0 0C      			bne	.not_reset		; hold RUN then press SELECT.
  980    02:DEC9  C0 0C      			cpy	#$0C
  981    02:DECB  D0 08      			bne	.not_reset
  982    02:DECD  BD 55 E0   			lda	bit_mask, x
  983    02:DED0  2C 27 22   			bit	joyena
  984    02:DED3  D0 09      			bne	.soft_reset
  985                        	
  986    02:DED5  CA         	.not_reset:	dex				; Check the next pad from the
  987    02:DED6  10 D4      			bpl	.pressed_loop		; multitap.
  988                        	
  989    02:DED8  9C D0 22   			stz	port_mutex		; Release port mutex.
  990                        	
  991               0001     		.if	(* >= $4000)			; This is a ".proc" if it is
  992                        	.exit:		leave                           ; not running in RAM.
         02:DEDB  4C EF FF   			jmp	leave_proc
  993                        		.else
  995                        		.endif
  996                        	
  997    02:DEDE  78         	.soft_reset:	sei				; Disable interrupts.
  998    02:DEDF  9C D0 22   			stz	port_mutex		; Release port mutex.
  999    02:DEE2  6C 84 22   			jmp	[reset_hook]		; Jump to the soft-reset hook.
 1000                        	
 1001                        			; Read all of the devices attached to the MultiTap.
 1002                        	
 1003    02:DEE5  A2 02      	.read_devices:	ldx	#2			; Repeat this loop 2 times.
 1004                        	
 1005    02:DEE7  A9 01      	.read_multitap:	lda	#$01			; CLR lo, SEL hi for d-pad.
 1006    02:DEE9  8D 00 10   			sta	IO_PORT
 1007    02:DEEC  A9 03      			lda	#$03			; CLR hi, SEL hi, reset tap.
 1008    02:DEEE  8D 00 10   			sta	IO_PORT
 1009    02:DEF1  C2         			cly				; Start at port 1.
 1010                        	
 1011    02:DEF2  A9 01      	.read_port:	lda	#$01			; CLR lo, SEL hi for d-pad.
 1012    02:DEF4  8D 00 10   			sta	IO_PORT			; Wait 1.25us (9 cycles).
 1013                        	
 1014    02:DEF7  B9 55 E0   			lda	bit_mask, y		; Is there a mouse attached?
 1015    02:DEFA  2D D2 22   			and	mouse_flg
 1016    02:DEFD  D0 33      			bne	.read_mouse
 1017                        	
 1018    02:DEFF  AD 00 10   	.read_pad:	lda	IO_PORT			; Read direction-pad bits.
 1019    02:DF02  9C 00 10   			stz	IO_PORT			; CLR lo, SEL lo for buttons.
 1020    02:DF05  0A         			asl	a			; Wait 1.25us (9 cycles).
 1021    02:DF06  0A         			asl	a
 1022    02:DF07  0A         			asl	a
 1023    02:DF08  0A         			asl	a
 1024    02:DF09  F0 1B      			beq	.read_6button		; 6-btn pad if UDLR all held.
 1025                        	
 1026    02:DF0B  99 28 22   	.read_2button:	sta	joynow, y		; Get buttons of 2-btn pad.
 1027    02:DF0E  AD 00 10   			lda	IO_PORT
 1028    02:DF11  29 0F      			and	#$0F
 1029    02:DF13  19 28 22   			ora	joynow, y
 1030    02:DF16  49 FF      			eor	#$FF
 1031    02:DF18  99 28 22   			sta	joynow, y
 1032                        	
 1033    02:DF1B  C8         	.next_port:	iny				; Get the next pad from the
 1034    02:DF1C  CC D1 22   			cpy	num_ports		; multitap.
 1035    02:DF1F  90 D1      			bcc	.read_port
 1036                        	
 1037    02:DF21  CA         			dex				; Do the next complete pass.
 1038    02:DF22  CA         			dex
 1039    02:DF23  10 C2      			bpl	.read_multitap		; Have we finished 2 passes?
 1040    02:DF25  60         			rts				; Now that everything is read.
 1041                        	
 1042    02:DF26  AD 00 10   	.read_6button:	lda	IO_PORT			; Get buttons of 6-btn pad.
 1043    02:DF29  29 0F      			and	#$0F
 1044    02:DF2B  49 8F      			eor	#$8F			; Set bit-7 to show that a
 1045    02:DF2D  99 D3 22   			sta	joy6now, y		; 6-button pad is present.
 1046    02:DF30  80 E9      			bra	.next_port
 1047                        	
 1048    02:DF32  7C 63 DF   	.read_mouse:	jmp	[.mouse_vectors, x]	; Which mouse info is next?
 1049                        	
 1050                        			; Mouse processing, normally four passes, here just two.
 1051                        	
 1052    02:DF35  A9 1C      	.mouse_x_hi:	lda	#28			; 189 cycle delay after CLR lo
 1053    02:DF37  3A         	.wait_loop:	dec	a			; on port to allow the mouse
 1054    02:DF38  D0 FD      			bne	.wait_loop		; to buffer and reset counters.
 1055                        	
 1056    02:DF3A  AD 00 10   			lda	IO_PORT			; Read direction-pad bits.
 1057    02:DF3D  9C 00 10   			stz	IO_PORT			; CLR lo, SEL lo for buttons.
 1058    02:DF40  0A         			asl	a			; Wait 1.25us (9 cycles).
 1059    02:DF41  0A         			asl	a
 1060    02:DF42  0A         			asl	a
 1061    02:DF43  0A         			asl	a
 1062    02:DF44  99 E2 22   			sta	mouse_x, y		; Save port's X-hi nibble.
 1063                        	
 1064    02:DF47  AD 00 10   			lda	IO_PORT			; Get mouse buttons.
 1065    02:DF4A  29 0F      			and	#$0F
 1066    02:DF4C  49 0F      			eor	#$0F
 1067    02:DF4E  99 28 22   			sta	joynow, y
 1068    02:DF51  80 C8      			bra	.next_port
 1069                        	
 1070    02:DF53  AD 00 10   	.mouse_x_lo:	lda	IO_PORT			; Read direction-pad bits.
 1071    02:DF56  9C 00 10   			stz	IO_PORT			; CLR lo, SEL lo for buttons.
 1072    02:DF59  29 0F      			and	#$0F			; Wait 1.25us (9 cycles).
 1073    02:DF5B  19 E2 22   			ora	mouse_x, y		; Add port's X-hi nibble.
 1074                        	;		eor	#$FF			; Negate so LEFT is -ve.
 1075                        	;		inc	a
 1076    02:DF5E  99 E2 22   			sta	mouse_x, y
 1077    02:DF61  80 B8      			bra	.next_port
 1078                        	
 1079    02:DF63  53 DF      	.mouse_vectors: dw	.mouse_x_lo		; Pass 2
 1080    02:DF65  35 DF      			dw	.mouse_x_hi		; Pass 1
 1081                        	
 1082               0001     		.if	(* >= $4000)			; This is a ".proc" if it is
 1083                        			.endp                           ; not running in RAM.
 1084               22D0     			.bss				; Put the variables in RAM.
 1085                        		.endif
 1086                        	
 1087    F8:22D0             	port_mutex:	ds	1			; NZ when controller port busy.
 1088    F8:22D1             	num_ports:	ds	1			; Set to 1 if no multitap.
 1089    F8:22D2             	mouse_flg:	ds	1			; Which ports are mice?
 1090               0000     		.if	HUC_JOY_EVENTS
 1093                        		.endif
 1094    F8:22D3             	joy6now:	ds	MAX_PADS
 1095    F8:22D8             	joy6old:	ds	MAX_PADS
 1096    F8:22DD             	joy6trg:	ds	MAX_PADS
 1097    F8:22E2             	mouse_x:	ds	MAX_PADS
 1098                        	
 1099               E188     			.code
 1100                        	
 1101                        		.endif	SUPPORT_6BUTTON			; Without mouse!
 1102                        	
 1103                        		.endif	SUPPORT_MOUSE
                             #[5]   "..\..\..\include\hucc\core-kernel.asm"
  453                        	
  454                        	
  455                        	
  456               0001     		.if	!CDROM
  457                        	
  458                        	; ***************************************************************************
  459                        	; ***************************************************************************
  460                        	;
  461                        	; core_sw_reset - Default HuCARD handler for a joypad "soft-reset".
  462                        	;
  463                        	
  464    00:E188  78         	core_sw_reset:	sei				; Disable interrupts.
  465                        	
  466    00:E189  6C FE FF   			jmp	[$FFFE]			; Jump to the HuCARD reset.
  467                        	
  468                        	
  469                        	
  470                        		.else	!CDROM
  616                        		.endif	!CDROM
  617                        	
  618                        	
  619                        	
  620                        	; ***************************************************************************
  621                        	; ***************************************************************************
  622                        	
  623               0001     		.if	(core_kernel >= $4000)		; If not running in RAM, then
  624               22E7     			.bss				; put these variables in RAM.
  625                        		.endif
  626                        	
  627    F8:22E7             	sound_mutex:	ds	1			; NZ when controller port busy.
  628                        	
  629               0001     		.if	SUPPORT_SGX
  630    F8:22E8             	sgx_detected:	ds	1			; NZ if SuperGrafx detected.
  631    F8:22E9             	hsync_hook_sgx:	ds	2			; SGX version of hsync_hook.
  632                        		.endif
  633                        	
  634               0000     		.if	SUPPORT_ACD
  636                        		.endif
  637                        	
  638               0001     		.if	(core_kernel >= $4000)
  639               E18C     			.code
  640                        		.endif
                             #[4]   "..\..\..\include\hucc\core-startup.asm"
  427                        	
  428                        	
  429                        	
  430                        		.else	!CDROM
  524                        		.endif	!CDROM
  525                        	
  526                        	
  527                        	
  528                        	; ***************************************************************************
  529                        	; ***************************************************************************
  530                        	;
  531                        	; With the availability of so many different configuration options, we've now
  532                        	; built somewhere between a few hundred bytes, and a couple of KB, of code in
  533                        	; the CORE_BANK of the HuCARD / overlay program.
  534                        	;
  535                        	; This is the end of the "CORE(not TM)" library code!
  536                        	;
  537                        	; Remember that the ".proc" trampolines are located at the end of this bank,
  538                        	; so the amount of free space left depends upon the number of ".proc" calls.
  539                        	;
  540                        	
  541                        			; Switch to CORE_PAGE to run the developer's game code.
  542               E18C     			.page	CORE_PAGE
  543                        	
  544                        	
  545                        	
  546                        	; ***************************************************************************
  547                        	; ***************************************************************************
  548                        	;
  549                        	; The DATA_BANK location needs to be set as early as possible so that library
  550                        	; code is able to put data in there before the total overall size of the code
  551                        	; is known.
  552                        	;
  553                        	; By default, DATA_BANK is the next bank after the CORE_BANK.
  554                        	;
  555                        	; RESERVE_BANKS allows developers to reserve some banks between the CORE_BANK
  556                        	; and the DATA_BANK that they can use however they wish.
  557                        	;
  558                        	; One use for RESERVE_BANKS is to create empty space that PCEAS can use when
  559                        	; it relocates procedures. This provides a way for a developer to group code
  560                        	; together at the start of memory, and leave the maximum number of banks for
  561                        	; loading dynamic data from CD-ROM.
  562                        	;
  563                        	; The KickC environment sets RESERVE_BANKS=1 (or higher) so that there is a
  564                        	; a bank for the permanent C code and static constants.
  565                        	;
  566                        	; RESERVE_BANKS is normally defined in each project's "core-config.inc".
  567                        	;
  568                        	
  569                        			.opt	d+			; DATA labels use fixed MPR.
  570                        	
  571               0001     			.rsset	CORE_BANK + 1
  572                        	
  573               0000     		.ifdef	NEED_HOME_BANK
  580                        		.endif
  581                        	
  582               0001     		.ifdef	NEED_SOUND_BANK			; Defined in hucc-sound.inc
  583               0000     		.if	NEED_SOUND_BANK			; if the driver wants a bank.
  585                        		.endif
  586                        		.endif
  587                        	
  588               0001     		.ifdef	RESERVE_BANKS			; For CORE projects.
  589               0001     	RESERVED_BANK	.rs	RESERVE_BANKS
  590                        		.endif
  591                        	
  592               0001     		.ifdef	HUCC
  593               0001     		.ifdef	HUC_RESERVE_BANKS		; For HuCC projects.
  594               0001     	HUC_USER_BANK	.rs	HUC_RESERVE_BANKS
  595                        		.endif
  596                        	
  597               0001     	CONST_BANK	.rs	2
  598               6000     			.rodata
  599               0001     			.bank	CONST_BANK, ".rodata"
  600                        		.endif	HUCC
  601                        	
  602               0003     	DATA_BANK	.rs	0
  603               6000     			.data
  604               0000     		.if	BUILDING_STAGE1
  606                        		.else
  607               0003     			.bank	DATA_BANK, ".data"
  608                        		.endif
  609               6000     			.org	$6000
  610                        	
  611               E18C     			.code
                             #[3]   "..\..\..\include\hucc\core.inc"
                             #[2]   "..\..\..\include\hucc\hucc.asm"
  120                        		.else
  126                        		.endif
  127                        	
  128                        			; Allocate this as early as possible to ensure bank-aligned
  129                        			; so that there is no wasted space for aligning the table.
  130                        	
  131               0000     		.if	FAST_MULTIPLY
  138                        		.endif
  139                        	
  140                        			;
  141                        	
  144                        	
  145                        			; The hardware stack is used for expressions.
  146                        	
  147               00FF     	__tos		=	$F8:2101, 255
  148                        	
  149               2008     			.zp
  150               2008     			.align	2
  151    F8:2008             	__stack:	ds	HUCC_STACK_SZ
  152                        	
  153    F8:2088             	__ptr:		ds	2
  154    F8:208A             	__fptr:		ds	2
  155    F8:208C             	__fbank:	ds	1
  156    F8:208D             	__sp:		ds	1
  157                        	
  158                        			; REGTEMP 6-byte stack for temporaries used by SDCC.
  159                        			; Keep the size in sync with NUM_TEMP_REGS in sdcc/src/mos6502/gen.h!
  160                        	
  161    F8:208E             	REGTEMP:	ds	6
  162                        	
  163                        			; HuCC's non-recursive consecutive varargs for printf().
  164                        	
  165               2008     	__vararg1	=	__stack + 0
  166               200A     	__vararg2	=	__stack + 2
  167               200C     	__vararg3	=	__stack + 4
  168               200E     	__vararg4	=	__stack + 6
  169                        	
  170                        			; Pointer used by poke() because __ptr could be overwritten.
  171                        	
  172               20EE     	__poke		=	__si
  173                        	
  174                        			; Used for indirect calls because __ptr could be overwritten.
  175                        	
  176               20EE     	__func		=	__si
  177                        	
  178                        			; Data pointer used by SDCC for indirect indexed memory access.
  179                        	
  180               2088     	DPTR		=	__ptr
  181                        	
  182                        			; Values returned from SDCC functions that don't fit into XA.
  183                        			; These are also used as workspace for SDCC library functions,
  184                        			; including HuCC's multiplication and division functions.
  185                        	
  186    F8:2094             	___SDCC_m6502_ret0:	ds	1
  187    F8:2095             	___SDCC_m6502_ret1:	ds	1
  188    F8:2096             	___SDCC_m6502_ret2:	ds	1
  189    F8:2097             	___SDCC_m6502_ret3:	ds	1
  190                        	
  191               0000     		.if	0
  196                        		.endif
  197                        	
  198                        			; Permanent pointers for fast table-of-squares multiplication.
  199                        	
  200               0000     		.if	FAST_MULTIPLY
  205                        		.endif
  206                        	
  207                        			; HuCC keeps a realtime clock, updated in hucc_vbl.
  208                        			;
  209                        			; Defining this here means that it will go before any HuCC
  210                        			; variables in "globals.h", and so it won't get cleared in
  211                        			; a CDROM game when loading different overlays.
  212                        	
  213               22EB     			.bss
  214    F8:22EB             	old_cnt:	ds	1			; irq_cnt of previous vsync().
  215    F8:22EC             	clock_hh:	ds	1			; System Clock, hours	(0-11)
  216    F8:22ED             	clock_mm:	ds	1			; System Clock, minutes (0-59)
  217    F8:22EE             	clock_ss:	ds	1			; System Clock, seconds (0-59)
  218    F8:22EF             	clock_tt:	ds	1			; System Clock, ticks	(0-59)
  219               E18C     			.code
  220                        	
  221                        			; Critical HuCC libraries that the compiler depends upon.
  222                        			;
  223                        			; These include various macros that must be defined before
  224                        			; they are encountered in any compiler-generated code.
  225                        	
                             #[3]   "..\..\..\include\hucc\hucc-codegen.asm"
  226                        			include "hucc-codegen.asm"	; HuCC i-code macros and funcs.
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-codegen.asm
    5                        	;
    6                        	; The HuCC compiler translates C code into these macros, it does not directly
    7                        	; generate HuC6280 instructions.
    8                        	;
    9                        	; Based on the original HuC macros created by David Michel and the other HuC
   10                        	; developers, later modified and improved by Ulrich Hecht.
   11                        	;
   12                        	; Modifications copyright John Brandwood 2024.
   13                        	;
   14                        	; Distributed under the Boost Software License, Version 1.0.
   15                        	; (See accompanying file LICENSE_1_0.txt or copy at
   16                        	;  http://www.boost.org/LICENSE_1_0.txt)
   17                        	;
   18                        	; ***************************************************************************
   19                        	; ***************************************************************************
   20                        	;
   21                        	; NAMING SCHEME FOR HuCC MACROS ...
   22                        	;
   23                        	;   __function.parameters
   24                        	;
   25                        	; {parameters} is a list of alphanumeric specifiers, starting with {size} and
   26                        	; followed by {where}, followed by {index} if an array, then optional {value}
   27                        	; and finally ending with optional {suffix}
   28                        	;
   29                        	; {size}
   30                        	;   w : 16-bit signed int (default "int" in HuCC)
   31                        	;   c : 16-bit unsigned int (a "cardinal" in Pascal terms)
   32                        	;   b :  8-bit signed char
   33                        	;   u :  8-bit unsigned char (default "char" in HuCC)
   34                        	;
   35                        	; {where} or {index}
   36                        	;   r : HuCC primary register, made up of the Y:A cpu registers
   37                        	;   t : top of expression stack
   38                        	;   p : indirect pointer, usually [__ptr]
   39                        	;   f : structure field (member) offset value
   40                        	;   i : immediate value, i.e. a decimal number
   41                        	;   m : memory, i.e. C global, static, and "-fno-recursive" variables
   42                        	;   s : stack, i.e. C function parameters and locals (not "-fno-recursive")
   43                        	;   a : array, i.e. C global, static, "-fno-recursive" arrays <= 256 bytes
   44                        	;   x : array index already in the X register
   45                        	;   y : array index already in the Y register
   46                        	;
   47                        	; {value} OPTIONAL
   48                        	;   i : immediate value, i.e. a decimal number
   49                        	;   z : zero value
   50                        	;
   51                        	; {suffix} OPTIONAL
   52                        	;   q : quick, used for optimized math on only 8-bit values, because all math
   53                        	;       is normally promoted to "int" size in C; and when optimized stores do
   54                        	;       not need to preserve the primary register contents
   55                        	;
   56                        	; ***************************************************************************
   57                        	; ***************************************************************************
   58                        	
   59                        	
   60                        	
 8399                        	
 8400                        	; ***************************************************************************
 8401                        	; ***************************************************************************
 8402                        	; subroutines for logical and arithmetic shifts by a constant amount
 8403                        	; ***************************************************************************
 8404                        	; ***************************************************************************
 8405                        	
 8406                        	; **************
 8407                        	; Y:A = Y:A << const
 8408                        	
 8409    00:E1BE  0A         	aslw15:		asl	a
 8410    00:E1BF  0A         	aslw14:		asl	a
 8411    00:E1C0  0A         	aslw13:		asl	a
 8412    00:E1C1  0A         	aslw12:		asl	a
 8413    00:E1C2  0A         	aslw11:		asl	a
 8414    00:E1C3  0A         	aslw10:		asl	a
 8415    00:E1C4  0A         	aslw9:		asl	a
 8416    00:E1C5  A8         	aslw8:		tay
 8417    00:E1C6  62         			cla
 8418    00:E1C7  60         			rts
 8419                        	
 8420               0001     		.if	1
 8421    00:E1C8  66 00      	aslw5:		ror	<__temp
 8422    00:E1CA  6A         			ror	a
 8423    00:E1CB  66 00      	aslw6:		ror	<__temp
 8424    00:E1CD  6A         			ror	a
 8425    00:E1CE  66 00      	aslw7:		ror	<__temp
 8426    00:E1D0  6A         			ror	a
 8427    00:E1D1  A4 00      			ldy	<__temp
 8428    00:E1D3  60         			rts
 8429                        		.else
 8436                        		.endif
 8437    00:E1D4  0A         	aslw4:		asl	a
 8438    00:E1D5  26 00      			rol	<__temp
 8439    00:E1D7  0A         	aslw3:		asl	a
 8440    00:E1D8  26 00      			rol	<__temp
 8441    00:E1DA  0A         	aslw2:		asl	a
 8442    00:E1DB  26 00      			rol	<__temp
 8443    00:E1DD  0A         	aslw1:		asl	a
 8444    00:E1DE  26 00      			rol	<__temp
 8445    00:E1E0  A4 00      	aslw0:		ldy	<__temp
 8446    00:E1E2  60         			rts
 8447                        	
 8448                        	; **************
 8449                        	; Y:A = Y:A >> const
 8450                        	
 8451    00:E1E3  C9 80      	asrw15:		cmp	#$80
 8452    00:E1E5  6A         			ror	a
 8453    00:E1E6  C9 80      	asrw14:		cmp	#$80
 8454    00:E1E8  6A         			ror	a
 8455    00:E1E9  C9 80      	asrw13:		cmp	#$80
 8456    00:E1EB  6A         			ror	a
 8457    00:E1EC  C9 80      	asrw12:		cmp	#$80
 8458    00:E1EE  6A         			ror	a
 8459    00:E1EF  C9 80      	asrw11:		cmp	#$80
 8460    00:E1F1  6A         			ror	a
 8461    00:E1F2  C9 80      	asrw10:		cmp	#$80
 8462    00:E1F4  6A         			ror	a
 8463    00:E1F5  C9 80      	asrw9:		cmp	#$80
 8464    00:E1F7  6A         			ror	a
 8465    00:E1F8  C9 80      	asrw8:		cmp	#$80
 8466    00:E1FA  C2         			cly
 8467    00:E1FB  90 01      			bcc	!+
 8468    00:E1FD  88         			dey
 8469    00:E1FE  60         	!:		rts
 8470                        	
 8471    00:E1FF  C0 80      	asrw7:		cpy	#$80
 8472    00:E201  66 00      			ror	<__temp
 8473    00:E203  6A         			ror	a
 8474    00:E204  C0 80      	asrw6:		cpy	#$80
 8475    00:E206  66 00      			ror	<__temp
 8476    00:E208  6A         			ror	a
 8477    00:E209  C0 80      	asrw5:		cpy	#$80
 8478    00:E20B  66 00      			ror	<__temp
 8479    00:E20D  6A         			ror	a
 8480    00:E20E  C0 80      	asrw4:		cpy	#$80
 8481    00:E210  66 00      			ror	<__temp
 8482    00:E212  6A         			ror	a
 8483    00:E213  C0 80      	asrw3:		cpy	#$80
 8484    00:E215  66 00      			ror	<__temp
 8485    00:E217  6A         			ror	a
 8486    00:E218  C0 80      	asrw2:		cpy	#$80
 8487    00:E21A  66 00      			ror	<__temp
 8488    00:E21C  6A         			ror	a
 8489    00:E21D  C0 80      	asrw1:		cpy	#$80
 8490    00:E21F  66 00      			ror	<__temp
 8491    00:E221  6A         			ror	a
 8492    00:E222  A4 00      	asrw0:		ldy	<__temp
 8493    00:E224  60         			rts
 8494                        	
 8495                        	; **************
 8496                        	; Y:A = Y:A >> const
 8497                        	
 8498    00:E225  4A         	lsrw15:		lsr	a
 8499    00:E226  4A         	lsrw14:		lsr	a
 8500    00:E227  4A         	lsrw13:		lsr	a
 8501    00:E228  4A         	lsrw12:		lsr	a
 8502    00:E229  4A         	lsrw11:		lsr	a
 8503    00:E22A  4A         	lsrw10:		lsr	a
 8504    00:E22B  4A         	lsrw9:		lsr	a
 8505    00:E22C  C2         	lsrw8:		cly
 8506    00:E22D  60         			rts
 8507                        	
 8508    00:E22E  46 00      	lsrw7:		lsr	<__temp
 8509    00:E230  6A         			ror	a
 8510    00:E231  46 00      	lsrw6:		lsr	<__temp
 8511    00:E233  6A         			ror	a
 8512    00:E234  46 00      	lsrw5:		lsr	<__temp
 8513    00:E236  6A         			ror	a
 8514    00:E237  46 00      	lsrw4:		lsr	<__temp
 8515    00:E239  6A         			ror	a
 8516    00:E23A  46 00      	lsrw3:		lsr	<__temp
 8517    00:E23C  6A         			ror	a
 8518    00:E23D  46 00      	lsrw2:		lsr	<__temp
 8519    00:E23F  6A         			ror	a
 8520    00:E240  46 00      	lsrw1:		lsr	<__temp
 8521    00:E242  6A         			ror	a
 8522    00:E243  A4 00      	lsrw0:		ldy	<__temp
 8523    00:E245  60         			rts
 8524                        	
 8525                        	
 8526                        	
 8527                        	; ***************************************************************************
 8528                        	; ***************************************************************************
 8529                        	; subroutines for logical and arithmetic shifts by a variable amount
 8530                        	; ***************************************************************************
 8531                        	; ***************************************************************************
 8532                        	
 8533                        	; **************
 8534                        	; Y:A = Y:A << X
 8535                        	
 8536    00:E246  84 00      	asl.wx:		sty	<__temp
 8537    00:E248  E0 10      			cpx	#16
 8538    00:E24A  B0 37      			bcs	!zero+
 8539    00:E24C  CA         			dex
 8540    00:E24D  30 06      			bmi	.done
 8541    00:E24F  0A         	.loop:		asl	a
 8542    00:E250  26 00      			rol	<__temp
 8543    00:E252  CA         			dex
 8544    00:E253  10 FA      			bpl	.loop
 8545    00:E255  A4 00      	.done:		ldy	<__temp
 8546    00:E257  60         			rts
 8547                        	
 8548                        	; **************
 8549                        	; Y:A = Y:A >> X
 8550                        	
 8551    00:E258  84 00      	asr.wx:		sty	<__temp
 8552    00:E25A  10 17      			bpl	!positive+
 8553    00:E25C  E0 10      	!negative:	cpx	#16
 8554    00:E25E  B0 0D      			bcs	.sign
 8555    00:E260  CA         			dex
 8556    00:E261  30 07      			bmi	.done
 8557    00:E263  38         	.loop:		sec
 8558    00:E264  66 00      			ror	<__temp
 8559    00:E266  6A         			ror	a
 8560    00:E267  CA         			dex
 8561    00:E268  10 F9      			bpl	.loop
 8562    00:E26A  A4 00      	.done:		ldy	<__temp
 8563    00:E26C  60         			rts
 8564                        	
 8565    00:E26D  A9 FF      	.sign:		lda	#$FF
 8566    00:E26F  A8         			tay
 8567    00:E270  60         			rts
 8568                        	
 8569                        	; **************
 8570                        	; Y:A = Y:A >> X
 8571                        	
 8572    00:E271  84 00      	lsr.wx:		sty	<__temp
 8573    00:E273  E0 10      	!positive:	cpx	#16
 8574    00:E275  B0 0C      			bcs	!zero+
 8575    00:E277  CA         			dex
 8576    00:E278  30 06      			bmi	.done
 8577    00:E27A  46 00      	.loop:		lsr	<__temp
 8578    00:E27C  6A         			ror	a
 8579    00:E27D  CA         			dex
 8580    00:E27E  10 FA      			bpl	.loop
 8581    00:E280  A4 00      	.done:		ldy	<__temp
 8582    00:E282  60         			rts
 8583                        	
 8584    00:E283  62         	!zero:		cla
 8585    00:E284  C2         			cly
 8586    00:E285  60         			rts
 8587                        	
 8588                        	
 8589                        	
 8590                        	; ***************************************************************************
 8591                        	; ***************************************************************************
 8592                        	; POTENTIAL OPTIMIZATIONS, NOT YET ADDED
 8593                        	; ***************************************************************************
 8594                        	; ***************************************************************************
                             #[2]   "..\..\..\include\hucc\hucc.asm"
                             #[3]   "..\..\..\include\hucc\hucc-baselib.asm"
  227                        			include	"hucc-baselib.asm"	; HuCC base library macros.
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-baselib.asm
    5                        	;
    6                        	; Basic library functions provided (mostly) as macros.
    7                        	;
    8                        	; Copyright John Brandwood 2024-2025.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	
   17                        	
   18                        	
   19                        	; ***************************************************************************
   20                        	; ***************************************************************************
   21                        	;
   22                        	; Make certain System Card variables accessible to HuCC.
   23                        	
   24    00:E286             	_irq_cnt	.alias	irq_cnt
   25    00:E286             	_joynow		.alias	joynow
   26    00:E286             	_joytrg		.alias	joytrg
   27    00:E286             	_joy6now	.alias	joy6now
   28    00:E286             	_joy6trg	.alias	joy6trg
   29    00:E286             	_bg_x1		.alias	bg_x1
   30    00:E286             	_bg_y1		.alias	bg_y1
   31    00:E286             	_bg_x2		.alias	bg_x2
   32    00:E286             	_bg_y2		.alias	bg_y2
   33                        	
   34                        	
   35                        	
   36                        	; ***************************************************************************
   37                        	; ***************************************************************************
   38                        	;
   39                        	; void __fastcall dump_screen( void );
   40                        	;
   41                        	; THIS IS AN ILLEGAL INSTRUCTION ONLY IMPLEMENTED BY THE TGEMU EMULATOR!
   42                        	
   43    00:E286  33         	_dump_screen:	db	0x33
   44                        	
   45                        	
   46                        	
   47                        	; ***************************************************************************
   48                        	; ***************************************************************************
   49                        	;
   50                        	; void __fastcall abort( void );
   51                        	;
   52                        	; THIS IS AN ILLEGAL INSTRUCTION ONLY IMPLEMENTED BY THE TGEMU EMULATOR!
   53                        	
   54    00:E287  E2         	_abort:		db	0xE2
   55                        	
   56                        	
   57                        	
   58                        	; ***************************************************************************
   59                        	; ***************************************************************************
   60                        	;
   61                        	; void __fastcall exit( int value<acc> );
   62                        	;
   63                        	; THIS IS AN ILLEGAL INSTRUCTION ONLY IMPLEMENTED BY THE TGEMU EMULATOR!
   64                        	
   65    00:E288  AA         	_exit.1:	tax				; Put the return code into X.
   66    00:E289  63         			db	0x63
   67                        	
   68    00:E28A  80 FE      	.hang:		bra	.hang			; Hang if used in normal code.
   69                        	
   70                        	
   71                        	
   72                        	; ***************************************************************************
   73                        	; ***************************************************************************
   74                        	;
   75                        	; unsigned char __fastcall __macro cd_execoverlay( unsigned char ovl_index<acc> );
   76                        	;
   77                        	; Execute program overlay from disc
   78                        	;
   79                        	; N.B. This does not return, even if there's an error.
   80                        	
   81                        			.macro	_cd_execoverlay.1
   82                        			tax
   83                        			jmp	exec_overlay
   84                        			.endm
   85                        	
   86                        	
   87                        	
   88                        	; ***************************************************************************
   89                        	; ***************************************************************************
   90                        	;
   91                        	; void __fastcall __nop set_far_base( unsigned char data_bank<_bp_bank>, unsigned char *data_addr<_bp> );
   92                        	; void __fastcall set_far_offset( unsigned int offset<_bp>, unsigned char data_bank<_bp_bank>, unsigned char *data_addr<acc> );
   93                        	
   94    00:E28C             	_set_far_offset.3:
   95    00:E28C  18         			clc
   96    00:E28D  65 EC      			adc.l	<_bp
   97    00:E28F  85 EC      			sta.l	<_bp
   98    00:E291  98         			tya
   99    00:E292  29 1F      			and	#$1F
  100    00:E294  65 ED      			adc.h	<_bp
  101    00:E296  A8         			tay
  102    00:E297  29 1F      			and	#$1F
  103    00:E299  09 60      			ora	#$60
  104    00:E29B  85 ED      			sta.h	<_bp
  105    00:E29D  98         			tya
  106    00:E29E  6A         			ror	a
  107    00:E29F  4A         			lsr	a
  108    00:E2A0  4A         			lsr	a
  109    00:E2A1  4A         			lsr	a
  110    00:E2A2  4A         			lsr	a
  111    00:E2A3  18         			clc
  112    00:E2A4  65 02      			adc	<_bp_bank
  113    00:E2A6  85 02      			sta	<_bp_bank
  114    00:E2A8  60         			rts
  115                        	
  116                        	
  117                        	; ***************************************************************************
  118                        	; ***************************************************************************
  119                        	;
  120                        	; void __fastcall __macro reset_mpr2( void );
  121                        	; void __fastcall __macro reset_mpr34( void );
  122                        	;
  123                        	; void * __fastcall __macro set_mpr2( void __far *addr<_bp_bank:_bp> );
  124                        	; void * __fastcall __macro set_mpr34( void __far *addr<_bp_bank:_bp> );
  125                        	;
  126                        	; void * __fastcall __macro far_set_mpr2( void );
  127                        	; void * __fastcall __macro far_set_mpr34( void );
  128                        	
  129                        	_reset_mpr2	.macro
  130                        		.if	SUPPORT_SGX
  131                        			lda	#$F9
  132                        		.else
  133                        			lda	#$87
  134                        		.endif
  135                        			tam2
  136                        			.endm
  137                        	
  138                        	_reset_mpr34	.macro
  139                        			lda	#CONST_BANK + _bank_base
  140                        			tam3
  141                        			inc	a
  142                        			tam4
  143                        			.endm
  144                        	
  145                        	_farset_mpr2.1	.macro
  146                        			lda	<_bp_bank
  147                        			tam2
  148                        			lda.l	<_bp
  149                        			ldy.h	<_bp
  150                        			.endm
  151                        	
  152                        	_farset_mpr34.1	.macro
  153                        			lda	<_bp_bank
  154                        			tam3
  155                        			inc	a
  156                        			tam4
  157                        			lda.l	<_bp
  158                        			ldy.h	<_bp
  159                        			.endm
  160                        	
  161                        	_far_set_mpr2	.macro
  162                        			lda	<_bp_bank
  163                        			tam2
  164                        			lda.l	<_bp
  165                        			ldy.h	<_bp
  166                        			.endm
  167                        	
  168                        	_far_set_mpr34	.macro
  169                        			lda	<_bp_bank
  170                        			tam3
  171                        			inc	a
  172                        			tam4
  173                        			lda.l	<_bp
  174                        			ldy.h	<_bp
  175                        			.endm
  176                        	
  177                        	
  178                        	
  179                        	; ***************************************************************************
  180                        	; ***************************************************************************
  181                        	;
  182                        	; unsigned char __fastcall __macro ac_exists( void );
  183                        	
  184                        	_ac_exists	.macro
  185                        			cla
  186                        			ldy	ACD_FLAG
  187                        			cpy	#ACD_ID
  188                        			bne	!+
  189                        			inc	a
  190                        	!:		cly
  191                        			.endm
  192                        	
  193                        	
  194                        	
  195                        	; ***************************************************************************
  196                        	; ***************************************************************************
  197                        	;
  198                        	; unsigned char __fastcall __macro _sgx_detect( void );
  199                        	
  200                        	_sgx_detect	.macro
  201                        			lda	sgx_detected
  202                        			cly
  203                        			.endm
  204                        	
  205                        	
  206                        	
  207                        	; ***************************************************************************
  208                        	; ***************************************************************************
  209                        	;
  210                        	; unsigned int __fastcall __macro peek( unsigned int addr<__ptr> );
  211                        	
  212                        	_peek.1		.macro
  213                        			lda	[__ptr]
  214                        			cly
  215                        			.endm
  216                        	
  217                        	
  218                        	
  219                        	; ***************************************************************************
  220                        	; ***************************************************************************
  221                        	;
  222                        	; unsigned int __fastcall __macro peekw( unsigned int addr<__ptr> );
  223                        	
  224                        	_peekw.1	.macro
  225                        			lda	[__ptr]
  226                        			pha
  227                        			ldy	#1
  228                        			lda	[__ptr], y
  229                        			tay
  230                        			pla
  231                        			.endm
  232                        	
  233                        	
  234                        	
  235                        	; ***************************************************************************
  236                        	; ***************************************************************************
  237                        	;
  238                        	; void __fastcall __macro poke( unsigned int addr<__poke>, unsigned char with<acc> );
  239                        	;
  240                        	; N.B. Because the <acc> value can be a complex C calculation, it isn't safe
  241                        	; to use __ptr as the destination, which can be overwritten in C macros.
  242                        	
  243                        	_poke.2		.macro
  244                        			sta	[__poke]
  245                        			.endm
  246                        	
  247                        	
  248                        	
  249                        	; ***************************************************************************
  250                        	; ***************************************************************************
  251                        	;
  252                        	; void __fastcall __macro pokew( unsigned int addr<__poke>, unsigned int with<acc> );
  253                        	;
  254                        	; N.B. Because the <acc> value can be a complex C calculation, it isn't safe
  255                        	; to use __ptr as the destination, which can be overwritten in C macros.
  256                        	
  257                        	_pokew.2	.macro
  258                        			sta	[__poke]
  259                        			tya
  260                        			ldy	#1
  261                        			sta	[__poke], y
  262                        			.endm
  263                        	
  264                        	
  265                        	
  266                        	; ***************************************************************************
  267                        	; ***************************************************************************
  268                        	;
  269                        	; unsigned char __fastcall __macro clock_hh( void );
  270                        	
  271                        	_clock_hh	.macro
  272                        			lda	clock_hh
  273                        			cly
  274                        			.endm
  275                        	
  276                        	
  277                        	
  278                        	; ***************************************************************************
  279                        	; ***************************************************************************
  280                        	;
  281                        	; unsigned char __fastcall __macro clock_mm( void );
  282                        	
  283                        	_clock_mm	.macro
  284                        			lda	clock_mm
  285                        			cly
  286                        			.endm
  287                        	
  288                        	
  289                        	
  290                        	; ***************************************************************************
  291                        	; ***************************************************************************
  292                        	;
  293                        	; unsigned char __fastcall __macro clock_ss( void );
  294                        	
  295                        	_clock_ss	.macro
  296                        			lda	clock_ss
  297                        			cly
  298                        			.endm
  299                        	
  300                        	
  301                        	
  302                        	; ***************************************************************************
  303                        	; ***************************************************************************
  304                        	;
  305                        	; unsigned char __fastcall __macro clock_tt( void );
  306                        	
  307                        	_clock_tt	.macro
  308                        			lda	clock_tt
  309                        			cly
  310                        			.endm
  311                        	
  312                        	
  313                        	
  314                        	; ***************************************************************************
  315                        	; ***************************************************************************
  316                        	;
  317                        	; void __fastcall __macro clock_reset( void );
  318                        	
  319                        	_clock_reset	.macro
  320                        			stz	clock_hh
  321                        			stz	clock_mm
  322                        			stz	clock_ss
  323                        			stz	clock_tt
  324                        			.endm
  325                        	
  326                        	
  327                        	
  328                        	; ***************************************************************************
  329                        	; ***************************************************************************
  330                        	;
  331                        	; unsigned int __fastcall __macro joy( unsigned char which<acc> );
  332                        	
  333                        	_joy.1		.macro
  334                        			tax
  335                        			lda	joynow, x
  336                        		.if	SUPPORT_6BUTTON
  337                        			ldy	joy6now, x
  338                        		.else
  339                        			cly
  340                        		.endif
  341                        			.endm
  342                        	
  343                        	
  344                        	
  345                        	; ***************************************************************************
  346                        	; ***************************************************************************
  347                        	;
  348                        	; unsigned int __fastcall __macro joytrg( unsigned char which<acc> );
  349                        	
  350                        	_joytrg.1	.macro
  351                        			tax
  352                        			lda	joytrg, x
  353                        		.if	SUPPORT_6BUTTON
  354                        			ldy	joy6trg, x
  355                        		.else
  356                        			cly
  357                        		.endif
  358                        			.endm
  359                        	
  360                        	
  361                        	
  362                        	; ***************************************************************************
  363                        	; ***************************************************************************
  364                        	;
  365                        	; unsigned int __fastcall __macro joybuf( unsigned char which<acc> );
  366                        	
  367                        	_joybuf.1	.macro
  368                        		.if	HUC_JOY_EVENTS
  369                        			tax
  370                        			lda	joybuf, x
  371                        		.if	SUPPORT_6BUTTON
  372                        			ldy	joy6buf, x
  373                        		.else
  374                        			cly
  375                        		.endif
  376                        		.else
  377                        			.fail	You must enable HUC_JOY_EVENTS in your hucc-config.inc!
  378                        		.endif
  379                        			.endm
  380                        	
  381                        	
  382                        	
  383                        	; ***************************************************************************
  384                        	; ***************************************************************************
  385                        	;
  386                        	; unsigned int __fastcall __macro get_joy_events( unsigned char which<acc> );
  387                        	;
  388                        	; N.B. This is just a version of joybuf() that clears the accumulated events.
  389                        	
  390                        			.macro	_get_joy_events.1
  391                        		.if	HUC_JOY_EVENTS
  392                        			tax
  393                        			lda	joybuf, x
  394                        			stz	joybuf, x
  395                        		.if	SUPPORT_6BUTTON
  396                        			ldy	joy6buf, x
  397                        			stz	joy6buf, x
  398                        		.else
  399                        			cly
  400                        		.endif
  401                        		.else
  402                        		.if	ACCUMULATE_JOY
  403                        			tax
  404                        			lda	joytrg, x
  405                        			stz	joytrg, x
  406                        		.if	SUPPORT_6BUTTON
  407                        			ldy	joy6trg, x
  408                        			stz	joy6trg, x
  409                        		.else
  410                        			cly
  411                        		.endif
  412                        		.else
  413                        			.fail	You must enable HUC_JOY_EVENTS or ACCUMULATE_JOY in your hucc-config.inc!
  414                        		.endif
  415                        		.endif
  416                        			.endm
  417                        	
  418                        	
  419                        	
  420                        	; ***************************************************************************
  421                        	; ***************************************************************************
  422                        	;
  423                        	; void __fastcall __macro clear_joy_events( unsigned char mask<acc> );
  424                        	
  425                        			.macro	_clear_joy_events.1
  426                        			php
  427                        			sei
  428                        			and	#(1 << MAX_PADS) - 1
  429                        			ldx	#$FF
  430                        	.loop:		inx
  431                        			lsr	a
  432                        			bcc	.next
  433                        		.if	HUC_JOY_EVENTS
  434                        			stz	joybuf, x
  435                        		.if	SUPPORT_6BUTTON
  436                        			stz	joy6buf, x
  437                        		.endif
  438                        		.else
  439                        		.if	ACCUMULATE_JOY
  440                        			stz	joytrg, x
  441                        		.if	SUPPORT_6BUTTON
  442                        			stz	joy6trg, x
  443                        		.endif
  444                        		.else
  445                        			.fail	You must enable HUC_JOY_EVENTS or ACCUMULATE_JOY in your hucc-config.inc!
  446                        		.endif
  447                        		.endif
  448                        	.next:		bne	.loop
  449                        			plp
  450                        			.endm
  451                        	
  452                        	
  453                        	
  454                        	; ***************************************************************************
  455                        	; ***************************************************************************
  456                        	;
  457                        	; void __fastcall srand( unsigned char seed<acc> );
  458                        	
  459               0001     		.ifndef	HUCC_NO_DEFAULT_RANDOM
  460                        	_srand.1	.macro
  461                        			tay
  462                        			jsr	init_random
  463                        			.endm
  464                        		.endif
  465                        	
  466                        	
  467                        	
  468                        	; ***************************************************************************
  469                        	; ***************************************************************************
  470                        	;
  471                        	; unsigned int __fastcall rand( void );
  472                        	; unsigned char __fastcall rand8( void );
  473                        	
  474               0001     		.ifndef	HUCC_NO_DEFAULT_RANDOM
  475    00:E2A9  20 C3 E5   	_rand:		jsr	get_random		; Random in A, preserve Y.
  476    00:E2AC  A8         			tay
  477    00:E2AD  4C C3 E5   			jmp	get_random		; Random in A, preserve Y.
  478                        		.endif
  479                        	
  480                        	
  481                        	
  482                        	; ***************************************************************************
  483                        	; ***************************************************************************
  484                        	;
  485                        	; unsigned char __fastcall random8( unsigned char limit<acc> );
  486                        	;
  487                        	; IN :	A = range (0..255)
  488                        	; OUT : A = random number interval 0 <= x < A
  489                        	
  490               0001     		.ifndef	HUCC_NO_DEFAULT_RANDOM
  491                        	
  492    00:E2B0  A8         	_random8.1:	tay				; Preserve the limit.
  493    00:E2B1  20 C3 E5   			jsr	get_random		; Random in A, preserve Y.
  494                        	
  495    00:E2B4  20 F0 E4   			jsr	__muluchar
  496    00:E2B7  98         			tya				; Do a 8.0 x 0.8 fixed point
  497    00:E2B8  C2         			cly				; fractional multiply.
  498    00:E2B9  60         			rts
  499                        		.endif
  500                        	
  501                        	
  502                        	
  503                        	; ***************************************************************************
  504                        	; ***************************************************************************
  505                        	;
  506                        	; unsigned char __fastcall random( unsigned char limit<acc> );
  507                        	;
  508                        	; IN :	A = range (0..128), 129..255 is treated as 128
  509                        	; OUT : A = random number interval 0 <= x < A
  510                        	
  511               0001     		.ifndef	HUCC_NO_DEFAULT_RANDOM
  512                        	
  513    00:E2BA  A8         	_random.1:	tay				; Preserve the limit.
  514    00:E2BB  20 C3 E5   			jsr	get_random		; Random in A, preserve Y.
  515                        	
  516    00:E2BE  C0 80      			cpy	#128			; Check the limit.
  517    00:E2C0  90 04      			bcc	!+
  518                        	
  519    00:E2C2  29 7F      			and	#$7F			; Just mask the random if
  520    00:E2C4  C2         			cly				; the limit is >= 128.
  521    00:E2C5  60         			rts
  522                        	
  523    00:E2C6  20 F0 E4   	!:		jsr	__muluchar
  524    00:E2C9  98         			tya				; If the limit is < 128 then
  525    00:E2CA  C2         			cly				; do a 8.0 x 0.8 fixed point
  526    00:E2CB  60         			rts				; fractional multiply.
  527                        		.endif
  528                        	
  529                        	
  530                        	
  531                        	; ***************************************************************************
  532                        	; ***************************************************************************
  533                        	;
  534                        	; unsigned char __fastcall __builtin_ffs( unsigned int value<__temp> );
  535                        	
  536                        			.proc	___builtin_ffs.1
  556                        			.endp
  557                        	
  558                        	
  559                        	
  560                        	; ***************************************************************************
  561                        	; ***************************************************************************
  562                        	;
  563                        	; N.B. Declared in hucc-string.h, but defined here because they're macros!
  564                        	;
  565                        	; int __fastcall __macro memcmp( unsigned char *destination<_di>, unsigned char *source<_bp>, unsigned int count<acc> );
  566                        	
  567                        	_memcmp.3	.macro
  568                        			stz	<_bp_bank		; Map the source string.
  569                        			call	_farmemcmp.3
  570                        			.endm
  571                        	
  572                        	
  573                        	
  574                        	; ***************************************************************************
  575                        	; ***************************************************************************
  576                        	;
  577                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  578                        	;
  579                        	; void __fastcall __macro get_color( unsigned int index<VCE_CTA> );
  580                        	
  581                        	_get_color.1	.macro
  582                        			lda.l	VCE_CTR
  583                        			ldy.h	VCE_CTR
  584                        			.endm
  585                        	
  586                        	
  587                        	
  588                        	; ***************************************************************************
  589                        	; ***************************************************************************
  590                        	;
  591                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  592                        	;
  593                        	; void __fastcall __macro fade_to_black( unsigned int __far *from<_bp_bank:_bp>, unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_sub<_ah> );
  594                        	; void __fastcall __macro fade_to_white( unsigned int __far *from<_bp_bank:_bp>, unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_add<_ah> );
  595                        	; void __fastcall __macro cross_fade_to( unsigned int __far *from<_bp_bank:_bp>, unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char which_component<_ah );
  596                        	;
  597                        	; void __fastcall __macro far_fade_to_black( unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_sub<_ah> );
  598                        	; void __fastcall __macro far_fade_to_white( unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_add<_ah> );
  599                        	; void __fastcall __macro far_cross_fade_to( unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char which_component<_ah );
  600                        	
  601                        			.macro	_fade_to_black.4
  602                        			ldy	<_bp_bank
  603                        			call	fade_to_black
  604                        			.endm
  605                        	
  606                        			.macro	_fade_to_white.4
  607                        			ldy	<_bp_bank
  608                        			call	fade_to_white
  609                        			.endm
  610                        	
  611                        			.macro	_cross_fade_to.4
  612                        			ldy	<_bp_bank
  613                        			call	cross_fade_to
  614                        			.endm
  615                        	
  616                        			.macro	_far_fade_to_black.3
  617                        			ldy	<_bp_bank
  618                        			call	fade_to_black
  619                        			.endm
  620                        	
  621                        			.macro	_far_fade_to_white.3
  622                        			ldy	<_bp_bank
  623                        			call	fade_to_white
  624                        			.endm
  625                        	
  626                        			.macro	_far_cross_fade_to.3
  627                        			ldy	<_bp_bank
  628                        			call	cross_fade_to
  629                        			.endm
  630                        	
  631                        	
  632                        	
  633                        	; ***************************************************************************
  634                        	; ***************************************************************************
  635                        	;
  636                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  637                        	;
  638                        	; void __fastcall __macro set_xres( unsigned int x_pixels<_ax> );
  639                        	; void __fastcall __macro sgx_set_xres( unsigned int x_pixels<_ax> );
  640                        	;
  641                        	; void __fastcall set_xres( unsigned int x_pixels<_ax>, unsigned char blur_flag<_bl> );
  642                        	; void __fastcall sgx_set_xres( unsigned int x_pixels<_ax>, unsigned char blur_flag<_bl> );
  643                        	
  644                        	_set_xres.1	.macro
  645                        			lda	#XRES_SOFT
  646                        			sta	<_bl
  647                        			call	_set_xres.2
  648                        			.endm
  649                        	
  650               0001     		.if	SUPPORT_SGX
  651                        			.macro	_sgx_set_xres.1
  652                        			lda	#XRES_SOFT
  653                        			sta	<_bl
  654                        			call	_sgx_set_xres.2
  655                        			.endm
  656                        		.endif
  657                        	
  658                        	
  659                        	
  660                        	; ***************************************************************************
  661                        	; ***************************************************************************
  662                        	;
  663                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  664                        	;
  665                        	; unsigned int __fastcall __macro vram_addr( unsigned char bat_x<_al>, unsigned char bat_y<_ah> );
  666                        	; unsigned int __fastcall __macro sgx_vram_addr( unsigned char bat_x<_al>, unsigned char bat_y<_ah> );
  667                        	
  668                        			.macro	_vram_addr.2
  669                        			cla
  670                        			bit	vdc_bat_width
  671                        			bmi	!w128+
  672                        			bvs	!w64+
  673                        	!w32:		lsr	<_ah
  674                        			ror	a
  675                        	!w64:		lsr	<_ah
  676                        			ror	a
  677                        	!w128:		lsr	<_ah
  678                        			ror	a
  679                        			ora	<_al
  680                        			ldy	<_ah
  681                        			.endm
  682                        	
  683               0001     		.if	SUPPORT_SGX
  684                        			.macro	_sgx_vram_addr.2
  685                        			cla
  686                        			bit	sgx_bat_width
  687                        			bmi	!w128+
  688                        			bvs	!w64+
  689                        	!w32:		lsr	<_ah
  690                        			ror	a
  691                        	!w64:		lsr	<_ah
  692                        			ror	a
  693                        	!w128:		lsr	<_ah
  694                        			ror	a
  695                        			ora	<_al
  696                        			ldy	<_ah
  697                        			.endm
  698                        		.endif
  699                        	
  700                        	
  701                        	
  702                        	; ***************************************************************************
  703                        	; ***************************************************************************
  704                        	;
  705                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  706                        	;
  707                        	; unsigned int __fastcall __macro get_vram( unsigned int address<_di> );
  708                        	; void __fastcall __macro put_vram( unsigned int address<_di>, unsigned int data<acc> );
  709                        	;
  710                        	; unsigned int __fastcall __macro sgx_get_vram( unsigned int address<_di> );
  711                        	; void __fastcall __macro sgx_put_vram( unsigned int address<_di>, unsigned int data<acc> );
  712                        	
  713                        			.macro	_get_vram.1
  714                        			jsr	vdc_di_to_marr
  715                        			lda	VDC_DL
  716                        			ldy	VDC_DH
  717                        			.endm
  718                        	
  719                        			.macro	_put_vram.2
  720                        			pha
  721                        			jsr	vdc_di_to_mawr
  722                        			pla
  723                        			sta	VDC_DL
  724                        			sty	VDC_DH
  725                        			.endm
  726                        	
  727               0001     		.if	SUPPORT_SGX
  728                        			.macro	_sgx_get_vram.1
  729                        			jsr	sgx_di_to_marr
  730                        			lda	SGX_DL
  731                        			ldy	SGX_DH
  732                        			.endm
  733                        	
  734                        			.macro	_sgx_put_vram.2
  735                        			pha
  736                        			jsr	sgx_di_to_mawr
  737                        			pla
  738                        			sta	SGX_DL
  739                        			sty	SGX_DH
  740                        			.endm
  741                        		.endif
  742                        	
  743                        	
  744                        	
  745                        	; ***************************************************************************
  746                        	; ***************************************************************************
  747                        	;
  748                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  749                        	;
  750                        	; void __fastcall __macro set_bgpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp> );
  751                        	; void __fastcall __macro set_bgpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_palettes<_ah> );
  752                        	; void __fastcall __macro set_sprpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp> );
  753                        	; void __fastcall __macro set_sprpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_palettes<_ah> );
  754                        	
  755                        	_set_bgpal.2	.macro
  756                        			lda	#1
  757                        			sta	<_ah
  758                        			call	_load_palette.3
  759                        			.endm
  760                        	
  761                        	_set_bgpal.3	.macro
  762                        			call	_load_palette.3
  763                        			.endm
  764                        	
  765                        	_set_sprpal.2	.macro
  766                        			lda	#1
  767                        			sta	<_ah
  768                        			smb4	<_al
  769                        			call	_load_palette.3
  770                        			.endm
  771                        	
  772                        	_set_sprpal.3	.macro
  773                        			smb4	<_al
  774                        			call	_load_palette.3
  775                        			.endm
  776                        	
  777                        	
  778                        	
  779                        	; ***************************************************************************
  780                        	; ***************************************************************************
  781                        	;
  782                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  783                        	;
  784                        	; void __fastcall __macro load_vram( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_words<_ax> );
  785                        	; void __fastcall __macro sgx_load_vram( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_words<_ax> );
  786                        	;
  787                        	; void __fastcall __macro far_load_vram( unsigned int vram<_di>, unsigned int num_words<_ax> );
  788                        	; void __fastcall __macro sgx_far_load_vram( unsigned int vram<_di>, unsigned int num_words<_ax> );
  789                        	;
  790                        	
  791               0001     		.if	SUPPORT_SGX
  792                        			.macro	_sgx_load_vram.3
  793                        			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  794                        			call	load_vram_x
  795                        			.endm
  796                        	
  797                        			.macro	_sgx_far_load_vram.2
  798                        			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  799                        			call	load_vram_x
  800                        			.endm
  801                        		.endif
  802                        	
  803                        			.macro	_load_vram.3
  804                        			clx				; Offset to PCE VDC.
  805                        			call	load_vram_x
  806                        			.endm
  807                        	
  808                        			.macro	_far_load_vram.2
  809                        			clx				; Offset to PCE VDC.
  810                        			call	load_vram_x
  811                        			.endm
  812                        	
  813                        	
  814                        	
  815                        	; ***************************************************************************
  816                        	; ***************************************************************************
  817                        	;
  818                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  819                        	;
  820                        	; void __fastcall __macro load_sprites( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_groups<acc> );
  821                        	; void __fastcall __macro sgx_load_sprites( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_groups<acc> );
  822                        	; void __fastcall __macro far_load_sprites( unsigned int vram<_di>, unsigned int num_groups<acc> );
  823                        	; void __fastcall __macro sgx_far_load_sprites( unsigned int vram<_di>, unsigned int num_groups<acc> );
  824                        	
  825               0001     		.if	SUPPORT_SGX
  826                        			.macro	_sgx_load_sprites.3
  827                        			stz.l	<_ax
  828                        			asl	a
  829                        			sta.h	<_ax
  830                        			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  831                        			call	load_vram_x
  832                        			.endm
  833                        	
  834                        			.macro	_sgx_far_load_sprites.2
  835                        			stz.l	<_ax
  836                        			asl	a
  837                        			sta.h	<_ax
  838                        			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  839                        			call	load_vram_x
  840                        			.endm
  841                        		.endif
  842                        	
  843                        			.macro	_load_sprites.3
  844                        			stz.l	<_ax
  845                        			asl	a
  846                        			sta.h	<_ax
  847                        			clx				; Offset to PCE VDC.
  848                        			call	load_vram_x
  849                        			.endm
  850                        	
  851                        			.macro	_far_load_sprites.2
  852                        			stz.l	<_ax
  853                        			asl	a
  854                        			sta.h	<_ax
  855                        			clx				; Offset to PCE VDC.
  856                        			call	load_vram_x
  857                        			.endm
  858                        	
  859                        	
  860                        	
  861                        	; ***************************************************************************
  862                        	; ***************************************************************************
  863                        	;
  864                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  865                        	;
  866                        	; void __fastcall load_default_font( void );
  867                        	; void __fastcall sgx_load_default_font( void );
  868                        	;
  869                        	
  870               0001     		.if	SUPPORT_SGX
  871                        			.macro	_sgx_load_default_font
  872                        			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  873                        			call	huc_monofont_x
  874                        			.endm
  875                        		.endif
  876                        	
  877                        			.macro	_load_default_font
  878                        			clx				; Offset to PCE VDC.
  879                        			call	huc_monofont_x
  880                        			.endm
  881                        	
  882                        	
  883                        	
  884                        	; ***************************************************************************
  885                        	; ***************************************************************************
  886                        	
  887               0000     		.if	0
  905                        		.endif
                             #[2]   "..\..\..\include\hucc\hucc.asm"
  228                        	
  229               0000     		.if	CDROM
  231                        		.endif
  232                        	
  233                        			; Definitions for compatibility with old HuC/MagicKit projects.
  234                        	
  235               0001     		.ifndef	HUCC_NO_DEPRECATED
                             #[3]   "..\..\..\include\hucc\hucc-deprecated.inc"
  236                        			include	"hucc-deprecated.inc"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-deprecated.inc
    5                        	;
    6                        	; Macros and definitions for compatibility with old HuC/MagicKit projects.
    7                        	;
    8                        	; Based on the original HuC and MagicKit definitions by David Michel and the
    9                        	; other original HuC developers.
   10                        	;
   11                        	; ***************************************************************************
   12                        	; ***************************************************************************
   13                        	
   14                        			; For compatibility with HuC projects that use the old name.
   15                        	
   16               0001     	HUC_USER_RESERVED = HUC_USER_BANK
   17                        	
   18                        			; For compatibility with code that expects the HuC naming that
   19                        			; is used in the newer HuC, rather than the original HuC v3.21.
   20                        			;
   21                        			; Code generated by HuCC uses the original single-underscore.
   22                        	
   23               0001     		.if	1				
   24               0002     	__bp		=	$F8:20EC, 2		; base pointer
   25               0002     	__si		=	$F8:20EE, 2		; source address
   26               0002     	__di		=	$F8:20F0, 2		; destination address
   27                        	
   28               0002     	__ax		=	$F8:20F8, 2
   29               0001     	__al		=	$F8:20F8, 1
   30               0001     	__ah		=	$F8:20F9, 1
   31                        	
   32               0002     	__bx		=	$F8:20FA, 2
   33               0001     	__bl		=	$F8:20FA, 1
   34               0001     	__bh		=	$F8:20FB, 1
   35                        	
   36               0002     	__cx		=	$F8:20FC, 2
   37               0001     	__cl		=	$F8:20FC, 1
   38               0001     	__ch		=	$F8:20FD, 1
   39                        	
   40               0002     	__dx		=	$F8:20FE, 2
   41               0001     	__dl		=	$F8:20FE, 1
   42               0001     	__dh		=	$F8:20FF, 1
   43                        		.endif
   44                        	
   45                        			; For compatibility with code that expects the HuC naming that
   46                        			; is used rather than the shorter upper-case #define naming.
   47                        	
   48               0001     		.if	1				
   49               0001     	video_reg	=	$FF:0200, 1		; Address/Status Register
   50               0001     	video_reg_l	=	$FF:0200, 1		; Address/Status Register
   51               0001     	video_reg_h	=	$FF:0201, 1		; Address/Status Register
   52               0002     	video_data	=	$FF:0202, 2		; Data (Read/Write) Low
   53               0001     	video_data_l	=	$FF:0202, 1		; Data (Read/Write) Low
   54               0001     	video_data_h	=	$FF:0203, 1		; Data (Read/Write) High
   55                        	
   56               0002     	color_ctrl	=	$FF:0400, 2		; Control Register
   57               0002     	color_reg	=	$FF:0402, 2		; Color Table Address
   58               0001     	color_reg_l	=	$FF:0402, 1		; Color Table Address
   59               0001     	color_reg_h	=	$FF:0402, 1		; Color Table Address
   60               0002     	color_data	=	$FF:0404, 2		; Color Table Data Read/Write
   61               0001     	color_data_l	=	$FF:0404, 1		; Color Table Data Read/Write
   62               0001     	color_data_h	=	$FF:0405, 1		; Color Table Data Read/Write
   63                        	
   64               0001     	psg_ch		=	$FF:0800, 1		; Channel Select
   65               0001     	psg_mainvol	=	$FF:0801, 1		; Main Amplitude Level
   66               0001     	psg_freqlo	=	$FF:0802, 1		; Frequency Low
   67               0001     	psg_freqhi	=	$FF:0803, 1		; Frequency High
   68               0001     	psg_ctrl	=	$FF:0804, 1		; Control & Channel Amplitude
   69               0001     	psg_pan		=	$FF:0805, 1		; L/R Amplitude Level
   70               0001     	psg_wavebuf	=	$FF:0806, 1		; Waveform
   71               0001     	psg_noise	=	$FF:0807, 1		; Noise
   72               0001     	psg_lfofreq	=	$FF:0808, 1		; LFO Frequency
   73               0001     	psg_lfoctrl	=	$FF:0809, 1		; LFO Control
   74                        	
   75               0001     	irq_m		=	irq_vec, 1		; Old System Card name.
   76               0002     	irq2_jmp	=	irq2_hook, 2		; Old System Card name.
   77               0002     	irq1_jmp	=	irq1_hook, 2		; Old System Card name.
   78               0002     	timer_jmp	=	timer_hook, 2		; Old System Card name.
   79               0002     	nmi_jmp		=	nmi_hook, 2		; Old System Card name.
   80               0002     	sat_adr		=	satb_addr, 2		; Old System Card name.
   81               0005     	joy		=	joynow, 5		; Old System Card name.
   82               0001     	mwr_m		=	vdc_mwr, 1		; Old System Card name.
   83               0001     	dcr_m		=	vdc_dcr, 1		; Old System Card name.
   84                        		.endif
   85                        	
   86                        			; Macros for compatibility with #asm usage in old HuC projects.
   87                        	
   88                        	stw		.macro
   89                        			lda.l	\1
   90                        			sta.l	\2
   91                        			lda.h	\1
   92                        			sta.h	\2
   93                        			.endm
   94                        	
   95                        	stb		.macro
   96                        			lda	\1
   97                        			sta	\2
   98                        			.endm
   99                        	
  100                        	addw		.macro
  101                        		.if	(\# = 3)
  102                        			clc
  103                        			lda.l	\2
  104                        			adc.l	\1
  105                        			sta.l	\3
  106                        			lda.h	\2
  107                        			adc.h	\1
  108                        			sta.h	\3
  109                        		.else
  110                        			clc
  111                        			lda.l	\2
  112                        			adc.l	\1
  113                        			sta.l	\2
  114                        			lda.h	\2
  115                        			adc.h	\1
  116                        			sta.h	\2
  117                        		.endif
  118                        			.endm
  119                        	
  120                        	add		.macro			; add byte-sized value to
  121                        		.if (\# = 2)			; register A (handle carry
  122                        			lda	\2		; flag)
  123                        			clc
  124                        			adc	\1
  125                        			sta	\2
  126                        		.else
  127                        			clc
  128                        			adc	\1
  129                        		.endif
  130                        			.endm
  131                        	
  132                        	subw		.macro
  133                        			sec
  134                        			lda.l	\2
  135                        			sbc.l	\1
  136                        			sta.l	\2
  137                        			lda.h	\2
  138                        			sbc.h	\1
  139                        			sta.h	\2
  140                        			.endm
  141                        	
  142                        	sub		.macro			; subtract byte-sized value
  143                        		.if (\# = 2)			; from register A (handle
  144                        			lda	\2		; carry flag)
  145                        			sec
  146                        			sbc	\1
  147                        			sta	\2
  148                        		.else
  149                        			sec
  150                        			sbc	\1
  151                        		.endif
  152                        			.endm
  153                        	
  154                        	incw		.macro			; increment a word-sized
  155                        			inc.l	\1		; value at stated memory
  156                        			bne	!+		; location
  157                        			inc.h	\1
  158                        	!:
  159                        			.endm
  160                        	
  161                        	decw		.macro			; decrement a word-sized
  162                        			lda	\1		; value at stated memory
  163                        			bne	!+		; location
  164                        			dec.h	\1
  165                        	!:		dec.l	\1
  166                        			.endm
  167                        	
  168                        	lbne		.macro
  169                        			bne	\1
  170                        			.endm
  171                        	
  172                        	lbeq		.macro
  173                        			beq	\1
  174                        			.endm
  175                        	
  176                        	lbpl		.macro
  177                        			bpl	\1
  178                        			.endm
  179                        	
  180                        	lbmi		.macro
  181                        			bmi	\1
  182                        			.endm
  183                        	
  184                        	lbcc		.macro
  185                        			bcc	\1
  186                        			.endm
  187                        	
  188                        	lbcs		.macro
  189                        			bcs	\1
  190                        			.endm
  191                        	
  192                        	lblo		.macro
  193                        			bcc	\1
  194                        			.endm
  195                        	
  196                        	lbhs		.macro
  197                        			bcs	\1
  198                        			.endm
  199                        	
  200                        	__ldwi		.macro
  201                        		__ld.wi		\1
  202                        			.endm
                             #[2]   "..\..\..\include\hucc\hucc.asm"
  237                        		.endif
  238                        	
  239                        			;
  240                        			;
  241                        			;
  242                        	
  243                        	
  244                        	
  245                        	; ***************************************************************************
  246                        	; ***************************************************************************
  247                        	;
  248                        	; core_main - This is executed after "CORE(not TM)" library initialization.
  249                        	;
  250                        	; This is the first code assembled after the library includes, so we're still
  251                        	; in the CORE_BANK, usually ".bank 0"; and because this is assembled with the
  252                        	; default configuration from "include/core-config.inc", which sets the option
  253                        	; "USING_MPR7", then we're running in MPR7 ($E000-$FFFF).
  254                        	
  255    14:C5DA             	core_main	.proc
  256                        	
  257               0001     		.if	SUPPORT_SGX
  258    14:C5DA  A9 F9      			lda	#$F9			; Map the 2nd SGX RAM bank.
  259                        		.else
  261                        		.endif
  262    14:C5DC  53 04      			tam2
  263                        	
  264    14:C5DE  A9 01      			lda	#CONST_BANK + _bank_base; Map HuCC's .RODATA bank.
  265    14:C5E0  53 08      			tam3
  266    14:C5E2  1A         			inc	a
  267    14:C5E3  53 10      			tam4
  268                        	
  269               0000     		.ifdef	HOME_BANK
  271                        		.else
  272    14:C5E5  1A         			inc	a
  273                        		.endif
  274    14:C5E6  53 20      			tam5
  275                        	
  276    14:C5E8  08         			php				; Disable interrupts while
  277    14:C5E9  78         			sei				; clearing overlay's BSS.
  278                        	
  279               0000     		.ifndef	USING_RCR_MACROS
  294                        		.endif	USING_RCR_MACROS
  295                        	
  296    14:C5EA  A9 CC      			lda	#<hucc_vbl		; Setup HuCC's VBL IRQ handler.
  297    14:C5EC  8D 08 22   			sta.l	vsync_hook
  298    14:C5EF  A9 E2      			lda	#>hucc_vbl
  299    14:C5F1  8D 09 22   			sta.h	vsync_hook
  300                        	
  301               0000     		.if	CDROM				; Overlays should clear BSS.
  303                        		.else
  304    14:C5F4  73 41 C6 F0			tii	.rom_tia, ram_tia, 16	; Only needed on HuCARD.
         14:C5F8  22 10 00    
  305                        		.endif	CDROM
  306                        	
  307               0000     		.if	(__heap_start - __bss_init)	; Copy initialized BSS data.
  309                        		.endif
  310                        	
  311    14:C5FB  F3 3F C6 08			tai	.stack_fill, __stack, HUCC_STACK_SZ
         14:C5FF  20 80 00    
  312                        	
  313               0000     		.if	FAST_MULTIPLY
  322                        		.endif
  323                        	
  324    14:C602  A9 10      			lda	#$10			; Enable HuCC's vblank IRQ
  325    14:C604  04 F5      			tsb	<irq_vec		; handler.
  326                        	
  327                        			__sound_init			; Initialize a sound driver.
  328                        	
  329    14:C606  AD 00 02   			lda	VDC_SR			; Purge any overdue VBL.
  330    14:C609  9C 41 22   			stz	irq_cnt			; Make it easy to check.
  331                        	
  332    14:C60C  28         			plp				; Restore interrupts.
  333                        	
  334               0001     		.ifndef	HUCC_NO_DEFAULT_SCREEN
  335    14:C60D  20 D1 FF   			call	_init_256x224		; HuCC initializes the VDC and
  336    14:C610  20 16 E4   			jsr	set_dspon		; turns the display on.
  337                        		.endif
  338                        	
  339               0001     		.ifndef	HUCC_NO_DEFAULT_FONT
  340    14:C613  A9 01      			lda	#1			; HuCC loads a default font.
  341    14:C615  8D AB 26   			sta	monofont_fg
  342    14:C618  9C AC 26   			stz	monofont_bg
  343                        			_load_default_font
         14:C61B  82         			clx				; Offset to PCE VDC.
         14:C61C  20 C7 FF   			call	huc_monofont_x
  344    14:C61F  A9 01      			lda	#$01			; Set the font palette entry to
  345    14:C621  8D 02 04   			sta.l	VCE_CTA			; cyan which is a) visible, but
  346    14:C624  9C 03 04   			stz.h	VCE_CTA			; b) a clear indicator that the
  347    14:C627  A0 96      			ldy	#$96			; user hasn't set a palette yet.
  348    14:C629  8C 04 04   			sty.l	VCE_CTW
  349    14:C62C  8D 05 04   			sta.h	VCE_CTW
  350                        		.endif
  351                        	
  352               0001     		.ifndef	HUCC_NO_DEFAULT_RANDOM
  353    14:C62F  AC 41 22   			ldy	irq_cnt			; Initialize random seed.
  354    14:C632  20 BD FF   			call	init_random
  355                        		.endif
  356                        	
  357    14:C635  A2 80      			ldx	#HUCC_STACK_SZ		; Initialize the HuCC stack.
  358    14:C637  86 8D      			stx	<__sp
  359                        	
  360    14:C639  20 B3 FF   			call	_main			; Execute the HuCC program.
  361                        	
  362    14:C63C  4C 88 E2   			jmp	_exit.1			; Pass the exit code on.
  363                        	
  364    14:C63F  EA EA      	.stack_fill:	db	$EA,$EA			; To make it easier to see.
  365                        	
  366               0001     		.if	!CDROM
  367                        	
  368    14:C641  E3 34 12 02	.rom_tia:	tia	$1234, VDC_DL, 32
         14:C645  02 20 00    
  369    14:C648  60         			rts
  370                        	
  371    14:C649  73 34 12 78	.rom_tii:	tii	$1234, $5678, $9ABC
         14:C64D  56 BC 9A    
  372    14:C650  60         			rts
  373                        	
  374               22F0     			.bss
  375    F8:22F0             	ram_tia:	ds	8
  376    F8:22F8             	ram_tii:	ds	8
  377               C651     			.code
  378                        	
  379                        		.endif	!CDROM
  380                        	
  381                        			.endp
  382                        	
  383                        			;
  384                        			; Self-Modifying TIA and TII instruction subroutines.
  385                        			;
  386                        			; These need to be in permanently-accessible memory so that
  387                        			; HuCC code can modify the values as __fastcall parameters.
  388                        			;
  389                        	
  390               0000     		.if	CDROM
  398                        		.endif	CDROM
  399                        	
  400               22F0     			rsset	ram_tia
  401               22F0     	ram_tia_opc	rs	1
  402               22F1     	ram_tia_src	rs	2
  403               22F3     	ram_tia_dst	rs	2
  404               22F5     	ram_tia_len	rs	2
  405               22F7     	ram_tia_rts	rs	1
  406                        	
  407               22F8     			rsset	ram_tii
  408               22F8     	ram_tii_opc	rs	1
  409               22F9     	ram_tii_src	rs	2
  410               22FB     	ram_tii_dst	rs	2
  411               22FD     	ram_tii_len	rs	2
  412               22FF     	ram_tii_rts	rs	1
  413                        	
  414                        	
  415                        	
  416                        	; ***************************************************************************
  417                        	; ***************************************************************************
  418                        	;
  419                        	; hucc_vbl - vblank IRQ handler, called by the "CORE(not TM)" kernel.
  420                        	;
  421                        	; This uses the kernel's hook to process things during vblank. It returns
  422                        	; with a simple RTS, and it can corrupt any register.
  423                        	;
  424                        	; Any slow routines in here should enable interrupts and protect itself from
  425                        	; re-entrancy problems.
  426                        	;
  427                        	
  428    00:E2CC  20 A9 FF   	hucc_vbl:	call	vbl_init_scroll		; Prepare for the next frame.
  429                        	
  430    00:E2CF  F8         			sed				; Update the HuC system clock
  431    00:E2D0  38         			sec				; which is in BCD here rather
  432    00:E2D1  AD EF 22   			lda	clock_tt		; than the binary one in HuC.
  433    00:E2D4  69 00      			adc	#0			; BCD add ...
  434    00:E2D6  C9 60      			cmp	#$60			; ... but binary comparison.
  435    00:E2D8  90 28      			bcc	.ticks
  436    00:E2DA  AD EE 22   			lda	clock_ss
  437    00:E2DD  69 00      			adc	#0			; BCD add ...
  438    00:E2DF  C9 60      			cmp	#$60			; ... but binary comparison.
  439    00:E2E1  90 1B      			bcc	.seconds
  440    00:E2E3  AD ED 22   			lda	clock_mm
  441    00:E2E6  69 00      			adc	#0			; BCD add ...
  442    00:E2E8  C9 60      			cmp	#$60			; ... but binary comparison.
  443    00:E2EA  90 0E      			bcc	.minutes
  444    00:E2EC  AD EC 22   			lda	clock_hh
  445    00:E2EF  69 00      			adc	#0			; BCD add ...
  446    00:E2F1  C9 12      			cmp	#$12			; ... but binary comparison.
  447    00:E2F3  90 01      			bcc	.hours
  448    00:E2F5  62         			cla
  449    00:E2F6  8D EC 22   	.hours:		sta	clock_hh
  450    00:E2F9  62         			cla
  451    00:E2FA  8D ED 22   	.minutes:	sta	clock_mm
  452    00:E2FD  62         			cla
  453    00:E2FE  8D EE 22   	.seconds:	sta	clock_ss
  454    00:E301  62         			cla
  455    00:E302  8D EF 22   	.ticks:		sta	clock_tt
  456    00:E305  D8         			cld
  457                        	
  458    00:E306  4C 96 E3   			jmp	xfer_palettes		; Upload any palette changes.
                             #[1]   "main.s"
   15               6000     			.data
   16               0003     			.bank	DATA_BANK
   17                        	
   18               E309     		.code
   19                        	
   20                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 1; // **************************************************************************
   21                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 2; // **************************************************************************
   22                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 3; //
   23                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 4; // globals.h
   24                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 5; //
   25                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 6; // **************************************************************************
   26                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 7; // **************************************************************************
   27                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 8; //
   28                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 9; // The idea is that you, a PCE developer, copy this file from the ../include/
   29                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 10; // directory and into your project's directory, and then define the variables
   30                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 11; // that you want to have shared access to in all overlay programs on your CD.
   31                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 12; //
   32                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 13; // Because PCEAS searches the current (i.e. project) directory for an include
   33                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 14; // file first, then it will find your customized copy of the file rather than
   34                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 15; // the original copy in the ../include/ directory.
   35                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 16; //
   36                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 17; // **************************************************************************
   37                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 18; // **************************************************************************
   38                        		.dbg	clear
   39               2300     		.bss
   40    F8:2300             	huc_globals:
   41                        	
   42    F8:2300             	huc_globals_end:
   43               E309     		.code
   44                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
   45                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
   46                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
   47                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
   48                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
   49                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
   50                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
   51                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
   52                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
   53                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
   54                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
   55                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
   56                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
   57                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
   58                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
   59                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
   60                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
   61                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
   62                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
   63                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
   64                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
   65                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
   66                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
   67                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
   68                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
   69                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
   70                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
   71                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
   72                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
   73                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
   74                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
   75                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 1; #ifndef _hucc_systemcard_h
   76                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 2; #define _hucc_systemcard_h
   77                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 4; /****************************************************************************
   78                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 5; ; ***************************************************************************
   79                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 6; ;
   80                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 7; ; hucc-systemcard.h
   81                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 8; ;
   82                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 9; ; Macros and library functions for using the System Card.
   83                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 10; ;
   84                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 11; ; Copyright John Brandwood 2024.
   85                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 12; ;
   86                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 13; ; Distributed under the Boost Software License, Version 1.0.
   87                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
   88                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
   89                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 16; ;
   90                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 17; ; ***************************************************************************
   91                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 18; ; ***************************************************************************
   92                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 19; ;
   93                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 20; ; Because these are mainly macros, and so must be included before being used
   94                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 21; ; in compiled code, the actual functions here are written to avoid using any
   95                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 22; ; BSS memory so that HuCC's overlay global-shared-variables are not effected.
   96                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 23; ;
   97                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 24; ; ***************************************************************************
   98                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 25; ; **************************************************************************/
   99                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 27; // *************
  100                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 28; // Backup RAM defines ...
  101                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 29; // *************
  102                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 31; #define  BM_OK             0
  103                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 32; #define  BM_NOT_FOUND      1
  104                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 33; #define  BM_BAD_CHECKSUM   2
  105                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 34; #define  BM_DIR_CORRUPTED  3
  106                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 35; #define  BM_FILE_EMPTY     4
  107                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 36; #define  BM_FULL           5
  108                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 37; #define  BM_NOT_FORMATED   0xFF			// HuC incorrect spelling.
  109                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 38; #define  BM_NOT_FORMATTED  0xFF			// HuCC can use a dictionary!
  110                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 40; #define  BRAM_STARTPTR     0x8010
  111                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 42; // *************
  112                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 43; // CD defines ...
  113                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 44; // *************
  114                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 46; #define	CDPLAY_MUTE		0
  115                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 47; #define	CDPLAY_REPEAT		1
  116                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 48; #define	CDPLAY_NORMAL		2
  117                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 49; #define	CDPLAY_ENDOFDISC	0
  118                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 51; #define	CDFADE_CANCEL	0
  119                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 52; #define	CDFADE_PCM6	8
  120                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 53; #define	CDFADE_ADPCM6	10
  121                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 54; #define	CDFADE_PCM2	12
  122                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 55; #define	CDFADE_ADPCM2	14
  123                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 57; #define CDTRK_AUDIO	0
  124                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 58; #define CDTRK_DATA	4
  125                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 60; // *************
  126                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 61; // ADPCM defines ...
  127                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 62; // *************
  128                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 64; #define	ADPLAY_AUTOSTOP		0
  129                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 65; #define	ADPLAY_REPEAT		0x80
  130                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 67; #define ADPLAY_FREQ_16KHZ	0xE
  131                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 68; #define ADPLAY_FREQ_10KHZ	0xD
  132                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 69; #define ADPLAY_FREQ_8KHZ	0xC
  133                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 70; #define ADPLAY_FREQ_6KHZ	0xB
  134                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 71; #define ADPLAY_FREQ_5KHZ	0xA
  135                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 73; #define ADREAD_RAM	0
  136                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 74; #define ADREAD_VRAM	0xFF
  137                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 76; #define ADWRITE_RAM	0
  138                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 77; #define ADWRITE_VRAM	0xFF
  139                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 79; // *************
  140                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 80; // Functions in hucc-systemcard.asm ...
  141                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 81; // *************
  142                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 83; #ifdef __HUCC__
  143                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 85; #asmdef	HUCC_USES_SYSTEMCARD 1
  144               0001     	HUCC_USES_SYSTEMCARD = 1
  145                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 87; extern void __fastcall __macro cd_boot( void );
  146                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 88; extern unsigned int __fastcall __macro cd_getver( void );
  147                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 89; extern void __fastcall __macro cd_reset( void );
  148                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 90; extern unsigned char __fastcall __macro cd_pause( void );
  149                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 91; extern unsigned char __fastcall cd_unpause( void );
  150                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 92; extern void __fastcall __macro cd_fade( unsigned char type<acc> );
  151                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 93; extern unsigned char __fastcall cd_playtrk( unsigned char start_track<_bx>, unsigned char end_track<_cx>, unsigned char mode<_dh> );
  152                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 94; extern unsigned char __fastcall cd_playmsf( unsigned char start_minute<_al>,  unsigned char start_second<_ah>,  unsigned char start_frame<_bl>, unsigned char end_minute<_cl>,  unsigned char end_second<_ch>,  unsigned char end_frame<_dl>,  unsigned char mode<_dh> );
  153                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 95; extern unsigned char __fastcall cd_fastvram( unsigned char ovl_index<_cl>, unsigned int sect_offset<_si>, unsigned int vramaddr<_bx>, unsigned int sectors<_al> );
  154                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 96; extern unsigned char __fastcall cd_loadvram( unsigned char ovl_index<_cl>, unsigned int sect_offset<_si>, unsigned int vramaddr<_bx>, unsigned int bytes<_ax> );
  155                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 97; extern unsigned char __fastcall cd_loaddata( unsigned char ovl_index<_cl>, unsigned int sect_offset<_si>, unsigned char __far *buffer<_bp_bank:_bp>, unsigned int bytes<__ptr> );
  156                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 98; extern unsigned char __fastcall cd_loadbank( unsigned char ovl_index<_cl>, unsigned int sect_offset<_si>, unsigned char bank<_bl>, unsigned int sectors<_al> );
  157                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 99; extern unsigned char __fastcall __macro cd_status( unsigned char mode<acc> );
  158                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 101; extern void __fastcall __macro ad_reset( void );
  159                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 102; extern unsigned char __fastcall __macro ad_trans( unsigned char ovl_index<_cl>, unsigned int sect_offset<_si>, unsigned char nb_sectors<_dh>, unsigned int ad_addr<_bx> );
  160                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 103; extern void __fastcall __macro ad_read( unsigned int ad_addr<_cx>, unsigned char mode<_dh>, unsigned int buf<_bx>, unsigned int bytes<_ax> );
  161                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 104; extern void __fastcall __macro ad_write( unsigned int ad_addr<_cx>, unsigned char mode<_dh>, unsigned int buf<_bx>, unsigned int bytes<_ax> );
  162                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 105; extern unsigned char __fastcall __macro ad_play( unsigned int ad_addr<_bx>, unsigned int bytes<_ax>, unsigned char freq<_dh>, unsigned char mode<_dl> );
  163                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 106; extern unsigned char __fastcall __macro ad_cplay( unsigned char ovl_index<_cl>, unsigned int sect_offset<_si>, unsigned int nb_sectors<_bx>, unsigned char freq<_dh> );
  164                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 107; extern void __fastcall __macro ad_stop( void );
  165                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 108; extern unsigned char __fastcall __macro ad_stat( void );
  166                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 110; extern unsigned char __fastcall bm_check( void );
  167                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 111; extern unsigned char __fastcall bm_format( void );
  168                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 112; extern unsigned int __fastcall __macro bm_free( void );
  169                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 113; extern unsigned char __fastcall __macro bm_read( unsigned char *buffer<_bx>, unsigned char *name<_ax>, unsigned int offset<_dx>, unsigned int length<_cx> );
  170                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 114; extern unsigned char __fastcall __macro bm_write( unsigned char *buffer<_bx>, unsigned char *name<_ax>, unsigned int offset<_dx>, unsigned int length<_cx> );
  171                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 115; extern unsigned char __fastcall __macro bm_delete( unsigned char *name<_ax> );
  172                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 117; // Deprecated functions ...
  173                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 119; extern unsigned char __fastcall __macro bm_exist( unsigned char *name<_ax> );
  174                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 120; extern unsigned char __fastcall __macro bm_create( unsigned char *name<_ax>, unsigned int length<_cx> );
  175                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 122; // void __fastcall _xsafe add_sectors( unsigned int sector_offset<acc> );
  176                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 124; #endif // __HUCC__
  177                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 126; #endif // _hucc_systemcard_h
  178                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
  179                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 1; #ifndef _hucc_baselib_h
  180                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 2; #define _hucc_baselib_h
  181                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 4; /****************************************************************************
  182                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 5; ; ***************************************************************************
  183                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 6; ;
  184                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 7; ; hucc-baselib.h
  185                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 8; ;
  186                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 9; ; Basic library functions provided as macros.
  187                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 10; ;
  188                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 11; ; Copyright John Brandwood 2024.
  189                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 12; ;
  190                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 13; ; Distributed under the Boost Software License, Version 1.0.
  191                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
  192                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
  193                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 16; ;
  194                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 17; ; ***************************************************************************
  195                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 18; ; **************************************************************************/
  196                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 20; // *************
  197                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 21; // Joypad defines ...
  198                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 22; // *************
  199                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 24; #define	JOY_A		0x01
  200                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 25; #define	JOY_I		0x01
  201                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 26; #define	JOY_B		0x02
  202                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 27; #define	JOY_II		0x02
  203                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 28; #define	JOY_SLCT	0x04
  204                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 29; #define	JOY_SEL		0x04
  205                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 30; #define	JOY_STRT	0x08
  206                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 31; #define	JOY_RUN		0x08
  207                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 32; #define	JOY_UP		0x10
  208                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 33; #define	JOY_RGHT	0x20
  209                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 34; #define	JOY_RIGHT	0x20
  210                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 35; #define	JOY_DOWN	0x40
  211                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 36; #define	JOY_LEFT	0x80
  212                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 38; #define	JOY_C		0x0100
  213                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 39; #define	JOY_III		0x0100
  214                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 40; #define	JOY_D		0x0200
  215                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 41; #define	JOY_IV		0x0200
  216                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 42; #define	JOY_E		0x0400
  217                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 43; #define	JOY_V		0x0400
  218                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 44; #define	JOY_F		0x0800
  219                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 45; #define	JOY_VI		0x0800
  220                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 47; #define JOY_SIXBUT	0x8000
  221                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 48; #define JOY_TYPE6	0x8000
  222                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 50; // *************
  223                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 51; // SuperGRAFX VPC settings for set_vpc_ctl() ...
  224                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 52; // *************
  225                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 54; #define VPC_SPR1_BKG1_SPR2_BKG2	0x3000 // same as SGX_PARALLAX=0
  226                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 55; #define VPC_SPR1_SPR2_BKG1_BKG2	0x7000 // same as SGX_PARALLAX=1
  227                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 56; #define VPC_BKG1_BKG2_SPR1_SPR2	0xB000
  228                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 58; // *************
  229                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 59; // System Card variables ...
  230                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 60; // *************
  231                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 62; extern unsigned int si;
  232                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 63; extern unsigned int di;
  233                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 64; extern unsigned int bp;
  234                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 66; extern unsigned int ax;
  235                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 67; extern unsigned int bx;
  236                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 68; extern unsigned int cx;
  237                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 69; extern unsigned int dx;
  238                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 71; extern unsigned char al;
  239                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 72; extern unsigned char ah;
  240                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 73; extern unsigned char bl;
  241                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 74; extern unsigned char bh;
  242                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 75; extern unsigned char cl;
  243                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 76; extern unsigned char ch;
  244                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 77; extern unsigned char dl;
  245                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 78; extern unsigned char dh;
  246                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 80; extern unsigned char irq_cnt;
  247                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 81; extern unsigned char joynow[5];
  248                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 82; extern unsigned char joytrg[5];
  249                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 83; extern unsigned char joy6now[5];
  250                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 84; extern unsigned char joy6trg[5];
  251                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 85; extern unsigned int  bg_x1;
  252                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 86; extern unsigned int  bg_y1;
  253                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 87; extern unsigned int  bg_x2;
  254                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 88; extern unsigned int  bg_y2;
  255                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 90; // *************
  256                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 91; // Special macros to get information from PCEAS ...
  257                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 92; // *************
  258                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 94; #define BANK( datasym ) ((unsigned) (&__bank__ ## datasym))
  259                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 95; #define SIZEOF( datasym ) ((unsigned) (&__sizeof__ ## datasym))
  260                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 96; #define COUNTOF( datasym ) ((unsigned) (&__countof__ ## datasym))
  261                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 97; #define OVERLAY( datasym ) ((unsigned) (&__overlay__ ## datasym))
  262                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 100; // *************
  263                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 101; // Functions in hucc-baselib.asm ...
  264                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 102; // *************
  265                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 104; #ifdef __HUCC__
  266                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 106; #asmdef	HUCC_USES_BASELIB 1
  267               0001     	HUCC_USES_BASELIB = 1
  268                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 108; #define	_OPTIMIZE 1
  269                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 111; // *************
  270                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 112; // Hardware Detection
  271                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 113; // *************
  272                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 115; extern unsigned char __fastcall __macro sgx_detect( void );
  273                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 116; extern unsigned char __fastcall __macro ac_exists( void );
  274                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 119; // *************
  275                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 120; // Memory Access
  276                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 121; // *************
  277                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 123; extern unsigned char __fastcall __macro peek( unsigned int addr<__ptr> );
  278                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 124; extern unsigned int  __fastcall __macro peekw( unsigned int addr<__ptr> );
  279                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 126; extern void __fastcall __macro poke( unsigned int addr<__poke>, unsigned char with<acc> );
  280                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 127; extern void __fastcall __macro pokew( unsigned int addr<__poke>, unsigned int with<acc> );
  281                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 129; extern unsigned char __fastcall farpeek( void __far *addr<_bp_bank:_bp> );
  282                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 130; extern unsigned int  __fastcall farpeekw( void __far *addr<_bp_bank:_bp> );
  283                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 132; extern void __fastcall __nop set_far_base( unsigned char data_bank<_bp_bank>, unsigned char *data_addr<_bp> );
  284                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 133; extern void __fastcall set_far_offset( unsigned int offset<_bp>, unsigned char data_bank<_bp_bank>, unsigned char *data_addr<acc> );
  285                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 135; extern unsigned char __fastcall far_peek( void );
  286                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 136; extern unsigned int  __fastcall far_peekw( void );
  287                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 138; extern void __fastcall __macro reset_mpr2( void );
  288                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 139; extern void __fastcall __macro reset_mpr34( void );
  289                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 141; extern void * __fastcall __macro farset_mpr2( void __far *addr<_bp_bank:_bp> );
  290                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 142; extern void * __fastcall __macro farset_mpr34( void __far *addr<_bp_bank:_bp> );
  291                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 144; extern void * __fastcall __macro far_set_mpr2( void );
  292                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 145; extern void * __fastcall __macro far_set_mpr34( void );
  293                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 148; // *************
  294                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 149; // Clock Functions
  295                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 150; // *************
  296                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 152; extern unsigned char __fastcall __macro clock_hh( void );
  297                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 153; extern unsigned char __fastcall __macro clock_mm( void );
  298                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 154; extern unsigned char __fastcall __macro clock_ss( void );
  299                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 155; extern unsigned char __fastcall __macro clock_tt( void );
  300                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 156; extern void __fastcall __macro clock_reset( void );
  301                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 159; // *************
  302                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 160; // Joypad Functions
  303                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 161; // *************
  304                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 163; extern unsigned int __fastcall __macro joy( unsigned char which<acc> );
  305                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 164; extern unsigned int __fastcall __macro joytrg( unsigned char which<acc> );
  306                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 167; // *************
  307                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 168; // Number Functions
  308                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 169; // *************
  309                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 171; extern int __fastcall abs( int value<acc> );
  310                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 173; extern void __fastcall __macro srand( unsigned char seed<acc> );
  311                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 174; extern unsigned int __fastcall rand( void );
  312                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 175; extern unsigned char __fastcall rand8( void );
  313                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 177; // Note: "limit" is 0..255.
  314                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 178; extern unsigned char __fastcall random8( unsigned char limit<acc> );
  315                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 180; // Note: "limit" is 0..128, 129..255 are treated as 128!
  316                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 181; extern unsigned char __fastcall random( unsigned char limit<acc> );
  317                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 184; // *************
  318                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 185; // Overlay Execution
  319                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 186; // *************
  320                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 188; extern unsigned char __fastcall __macro cd_execoverlay( unsigned char ovl_index<acc> );
  321                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 191; // *************
  322                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 192; // Functions that are only optionally available if configured in your hucc-config.inc
  323                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 193; // *************
  324                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 195; extern unsigned int __fastcall __macro joybuf( unsigned char which<acc> );
  325                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 196; extern unsigned int __fastcall __macro get_joy_events( unsigned char which<acc> );
  326                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 197; extern void __fastcall __macro clear_joy_events( unsigned char mask<acc> );
  327                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 200; // *************
  328                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 201; // Functions that are only implemented in the TGEMU emulator for unit-testing
  329                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 202; // the compiler, and which should never be used in normal HuCC projects ...
  330                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 203; // *************
  331                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 205; extern void __fastcall dump_screen( void );
  332                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 206; extern void __fastcall abort( void );
  333                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 207; extern void __fastcall exit( int value<acc> );
  334                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 209; extern unsigned char __fastcall __builtin_ffs( unsigned int value<__temp> );
  335                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 211; #endif // __HUCC__
  336                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 213; #endif // _hucc_baselib_h
  337                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
  338                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 1; #ifndef _hucc_gfx_h
  339                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 2; #define _hucc_gfx_h
  340                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 4; /****************************************************************************
  341                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 5; ; ***************************************************************************
  342                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 6; ;
  343                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 7; ; huc-gfx.h
  344                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 8; ;
  345                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 9; ; Based on the original HuC and MagicKit functions by David Michel and the
  346                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 10; ; other original HuC developers.
  347                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 11; ;
  348                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 12; ; Modifications copyright John Brandwood 2024.
  349                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 13; ;
  350                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 14; ; Distributed under the Boost Software License, Version 1.0.
  351                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 15; ; (See accompanying file LICENSE_1_0.txt or copy at
  352                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 16; ;  http://www.boost.org/LICENSE_1_0.txt)
  353                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 17; ;
  354                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 18; ; ***************************************************************************
  355                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 19; ; **************************************************************************/
  356                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 21; // *************
  357                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 22; // Screen defines ...
  358                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 23; // *************
  359                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 25; #define	SCR_SIZE_32x32	0
  360                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 26; #define	SCR_SIZE_64x32	1
  361                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 27; #define	SCR_SIZE_128x32	2
  362                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 28; #define	SCR_SIZE_32x64	4
  363                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 29; #define	SCR_SIZE_64x64	5
  364                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 30; #define	SCR_SIZE_128x64	6
  365                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 32; #define	XRES_SHARP	0
  366                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 33; #define	XRES_SOFT	4
  367                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 34; #define	XRES_KEEP	128
  368                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 36; #define VPC_WIN_A	0x00
  369                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 37; #define VPC_WIN_B	0x01
  370                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 38; #define	VPC_WIN_AB	0x02
  371                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 39; #define	VPC_WIN_NONE	0x03
  372                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 40; #define	VPC_NORM	0x00
  373                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 41; #define	VPC_SPR		0x04
  374                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 42; #define	VPC_INV_SPR	0x08
  375                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 43; #define VDC1_ON		0x01
  376                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 44; #define	VDC1_OFF	0x00
  377                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 45; #define VDC2_ON		0x02
  378                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 46; #define	VDC2_OFF	0x00
  379                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 47; #define VDC_ON		0x03
  380                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 48; #define	VDC_OFF		0x00
  381                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 50; // *************
  382                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 51; // Functions in hucc-gfx.asm ...
  383                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 52; // *************
  384                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 54; #ifdef __HUCC__
  385                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 56; #asmdef	HUCC_USES_GFX 1
  386               0001     	HUCC_USES_GFX = 1
  387                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 58; // *************
  388                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 59; // Color and Palette Functions
  389                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 60; // *************
  390                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 62; extern void __fastcall clear_palette( void );
  391                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 64; extern void __fastcall __nop set_color( unsigned int index<VCE_CTA>, unsigned int value<VCE_CTW> );
  392                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 65; extern void __fastcall set_color_rgb( unsigned int index<VCE_CTA>, unsigned char r<_al>, unsigned char g<_ah>, unsigned char b<acc> );
  393                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 66; extern unsigned int __fastcall __macro get_color( unsigned int index<VCE_CTA> );
  394                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 68; extern void __fastcall load_palette( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp>, unsigned char num_palettes<_ah> );
  395                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 69; extern void __fastcall far_load_palette( unsigned char palette<_al>, unsigned char num_palettes<_ah> );
  396                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 71; extern void __fastcall read_palette( unsigned char palette<_al>, unsigned char num_palettes<_ah>, unsigned int *destination<_di> );
  397                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 73; extern void __fastcall __macro fade_to_black( unsigned int __far *from<_bp_bank:_bp>, unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_sub<_ah> );
  398                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 74; extern void __fastcall __macro fade_to_white( unsigned int __far *from<_bp_bank:_bp>, unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_add<_ah> );
  399                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 75; extern void __fastcall __macro cross_fade_to( unsigned int __far *from<_bp_bank:_bp>, unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char which_component<_ah> );
  400                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 77; extern void __fastcall __macro far_fade_to_black( unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_sub<_ah> );
  401                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 78; extern void __fastcall __macro far_fade_to_white( unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_add<_ah> );
  402                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 79; extern void __fastcall __macro far_cross_fade_to( unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char which_component<_ah> );
  403                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 83; // *************
  404                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 84; // Video Functions
  405                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 85; // *************
  406                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 87; extern void __fastcall init_240x208( void );
  407                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 88; extern void __fastcall init_256x224( void );
  408                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 90; extern void __fastcall vsync( void );
  409                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 91; extern void __fastcall vsync( unsigned char count<_al> );
  410                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 93; extern void __fastcall disp_on( void );
  411                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 94; extern void __fastcall disp_off( void );
  412                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 96; extern void __fastcall set_screen_size( unsigned char value<_al> );
  413                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 98; extern void __fastcall set_xres( unsigned int x_pixels<_ax>, unsigned char blur_flag<_bl> );
  414                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 100; extern void __fastcall cls( void );
  415                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 101; extern void __fastcall cls( unsigned int tile<acc> );
  416                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 103; extern unsigned int __fastcall __macro vram_addr( unsigned char bat_x<_al>, unsigned char bat_y<_ah> );
  417                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 104; extern unsigned int __fastcall __macro get_vram( unsigned int address<_di> );
  418                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 105; extern void __fastcall __macro put_vram( unsigned int address<_di>, unsigned int data<acc> );
  419                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 107; extern void __fastcall __macro load_vram( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_words<_ax> );
  420                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 108; extern void __fastcall __macro far_load_vram( unsigned int vram<_di>,  unsigned int num_words<_ax> );
  421                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 110; extern void __fastcall load_bat( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  422                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 111; extern void __fastcall far_load_bat( unsigned int vram<_di>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  423                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 113; extern void __fastcall __macro load_sprites( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_groups<acc> );
  424                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 114; extern void __fastcall __macro far_load_sprites( unsigned int vram<_di>, unsigned int num_groups<acc> );
  425                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 116; extern void __fastcall vram2vram( unsigned int vram_dst<_ax>, unsigned int vram_src<_bx>, unsigned int word_len<_cx> );
  426                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 119; // *************
  427                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 120; // SuperGRAFX Video Functions
  428                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 121; // *************
  429                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 123; extern void __fastcall __nop vpc_set_ctl( unsigned int bits<VPC_CR> );
  430                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 124; extern void __fastcall __nop vpc_set_win1( unsigned int width<VPC_WINDOW1> );
  431                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 125; extern void __fastcall __nop vpc_set_win2( unsigned int width<VPC_WINDOW2> );
  432                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 127; extern void __fastcall sgx_set_screen_size( unsigned char value<_al> );
  433                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 129; extern void __fastcall sgx_set_xres( unsigned int x_pixels<_ax>, unsigned char blur_flag<_bl> );
  434                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 131; extern void __fastcall sgx_cls( void );
  435                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 132; extern void __fastcall sgx_cls( unsigned int tile<acc> );
  436                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 134; extern unsigned int __fastcall __macro sgx_vram_addr( unsigned char bat_x<_al>, unsigned char bat_y<_ah> );
  437                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 135; extern unsigned int __fastcall __macro sgx_get_vram( unsigned int address<_di> );
  438                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 136; extern void __fastcall __macro sgx_put_vram( unsigned int address<_di>, unsigned int data<acc> );
  439                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 138; extern void __fastcall __macro sgx_load_vram( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_words<_ax> );
  440                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 139; extern void __fastcall __macro sgx_far_load_vram( unsigned int vram<_di>, unsigned int num_words<_ax> );
  441                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 141; extern void __fastcall sgx_load_bat( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  442                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 142; extern void __fastcall sgx_far_load_bat( unsigned int vram<_di>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  443                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 144; extern void __fastcall __macro sgx_load_sprites( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_groups<acc> );
  444                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 145; extern void __fastcall __macro sgx_far_load_sprites( unsigned int vram<_di>, unsigned int num_groups<acc> );
  445                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 147; extern void __fastcall sgx_vram2vram( unsigned int vram_dst<_ax>, unsigned int vram_src<_bx>, unsigned int word_len<_cx> );
  446                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 150; // *************
  447                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 151; // Font Functions
  448                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 152; // *************
  449                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 154; extern void __fastcall set_font_addr( unsigned int vram<acc> );
  450                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 155; extern void __fastcall set_font_pal( unsigned char palette<acc> );
  451                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 157; extern void __fastcall load_font( unsigned char __far *font<_bp_bank:_bp>, unsigned char count<_al>, unsigned int vram<acc> );
  452                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 158; extern void __fastcall far_load_font( unsigned char count<_al>, unsigned int vram<acc> );
  453                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 160; extern void __fastcall __nop set_font_color( unsigned char foreground<monofont_fg>, unsigned char background<monofont_bg> );
  454                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 161; extern void __fastcall __macro load_default_font( void );
  455                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 164; // *************
  456                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 165; // SuperGRAFX Font Functions
  457                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 166; // *************
  458                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 168; extern void __fastcall sgx_set_font_addr( unsigned int vram<acc> );
  459                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 169; extern void __fastcall sgx_set_font_pal( unsigned char palette<acc> );
  460                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 171; extern void __fastcall sgx_load_font( char __far *font<_bp_bank:_bp>, unsigned char count<_al>, unsigned int vram<acc> );
  461                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 172; extern void __fastcall sgx_far_load_font( unsigned char count<_al>, unsigned int vram<acc> );
  462                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 174; extern void __fastcall __macro sgx_load_default_font( void );
  463                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 177; // *************
  464                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 178; // Deprecated functions ...
  465                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 179; // *************
  466                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 181; extern void __fastcall __macro set_xres( unsigned int x_pixels<_ax> );
  467                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 182; extern void __fastcall __macro sgx_set_xres( unsigned int x_pixels<_ax> );
  468                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 184; extern void __fastcall load_background( unsigned char __far *tiles<_bp_bank:_bp>, unsigned char __far *palettes<__fbank:__fptr>, unsigned char __far *bat<_cl:_bx>, unsigned char w<_dl>, unsigned char h<_dh> );
  469                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 186; extern void __fastcall __macro set_bgpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp> );
  470                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 187; extern void __fastcall __macro set_bgpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_palettes<_ah> );
  471                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 188; extern void __fastcall __macro set_sprpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp> );
  472                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 189; extern void __fastcall __macro set_sprpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_palettes<_ah> );
  473                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 191; extern void __fastcall load_font( char __far *font<_bp_bank:_bp>, unsigned char count<_al> );
  474                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 193; extern void __fastcall put_string( unsigned char *string<_bp>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
  475                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 195; extern void __fastcall put_char( unsigned char digit<_bl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
  476                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 196; extern void __fastcall put_digit( unsigned char digit<_bl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
  477                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 197; extern void __fastcall put_hex( unsigned int number<_bx>, unsigned char length<_cl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
  478                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 198; extern void __fastcall put_number( unsigned int number<_bx>, unsigned char length<_cl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
  479                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 199; extern void __fastcall put_raw( unsigned int data<_bx>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
  480                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 201; #endif // __HUCC__
  481                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 203; #endif // _hucc_gfx_h
  482                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
  483                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 1; #ifndef _hucc_string_h
  484                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 2; #define _hucc_string_h
  485                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 4; /****************************************************************************
  486                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 5; ; ***************************************************************************
  487                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 6; ;
  488                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 7; ; hucc-string.h
  489                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 8; ;
  490                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 9; ; Not-quite-standard, but fast, replacements for <string.h>.
  491                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 10; ;
  492                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 11; ; Copyright John Brandwood 2024.
  493                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 12; ;
  494                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 13; ; Distributed under the Boost Software License, Version 1.0.
  495                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
  496                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
  497                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 16; ;
  498                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 17; ; ***************************************************************************
  499                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 18; ; ***************************************************************************
  500                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 19; ;
  501                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 20; ; !!! WARNING : non-standard return values !!!
  502                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 21; ;
  503                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 22; ; Strings are limited to a maximum of 255 characters (+ the terminator)!
  504                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 23; ;
  505                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 24; ; The memcpy(), strcpy() and strcat() functions do NOT return the destination
  506                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 25; ; address, and they are declared "void" to check that the value is not used.
  507                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 26; ;
  508                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 27; ; mempcpy() is provided which returns the end address instead of the starting
  509                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 28; ; address, because this is typically more useful.
  510                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 29; ;
  511                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 30; ; Please note that both memcpy() and memset() are implemented using a TII for
  512                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 31; ; speed, and so the length should be < 16 bytes if used in time-critical bits
  513                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 32; ; of code (such as when using a split screen) because they delay interrupts.
  514                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 33; ;
  515                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 34; ; strncpy() and strncat() are not provided, because strncpy() was not created
  516                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 35; ; for the purpose of avoiding string overruns, and strncat() is just a poorly
  517                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 36; ; designed function IMHO.
  518                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 37; ;
  519                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 38; ; POSIX strlcpy() and strlcat() are provided instead, but once again they are
  520                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 39; ; slightly non-standard in that the return value when there is an overflow is
  521                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 40; ; the buffer size (so that the overflow can be detected), instead of the full
  522                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 41; ; size of the destination string that was too big to fit in the buffer.
  523                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 42; ;
  524                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 43; ; ***************************************************************************
  525                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 44; ; **************************************************************************/
  526                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 46; // *************
  527                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 47; // Functions in hucc-string.asm ...
  528                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 48; // *************
  529                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 50; #ifdef __HUCC__
  530                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 52; #asmdef	HUCC_USES_STRING 1
  531               0001     	HUCC_USES_STRING = 1
  532                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 54; extern void __fastcall strcpy( char *destination<_di>, char *source<_bp> );
  533                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 55; extern void __fastcall strcat( char *destination<_di>, char *source<_bp> );
  534                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 57; extern unsigned int __fastcall strlen( char *source<_bp> );
  535                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 59; extern unsigned int __fastcall strlcpy( char *destination<_di>, char *source<_bp>, unsigned char size<acc> );
  536                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 60; extern unsigned int __fastcall strlcat( char *destination<_di>, char *source<_bp>, unsigned char size<acc> );
  537                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 62; extern void __fastcall memcpy( unsigned char *destination<ram_tii_dst>, unsigned char *source<ram_tii_src>, unsigned int count<acc> );
  538                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 63; extern void __fastcall farmemcpy( unsigned char *destination<ram_tii_dst>, unsigned char __far *source<_bp_bank:ram_tii_src>, unsigned int count<acc> );
  539                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 64; extern void __fastcall far_memcpy( unsigned char *destination<ram_tii_dst>, unsigned int count<acc> );
  540                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 66; extern unsigned char * __fastcall mempcpy( unsigned char *destination<ram_tii_dst>, unsigned char *source<ram_tii_src>, unsigned int count<acc> );
  541                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 67; extern unsigned char * __fastcall farmempcpy( unsigned char *destination<ram_tii_dst>, unsigned char __far *source<_bp_bank:ram_tii_src>, unsigned int count<acc> );
  542                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 68; extern unsigned char * __fastcall far_mempcpy( unsigned char *destination<ram_tii_dst>, unsigned int count<acc> );
  543                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 70; extern void __fastcall memset( unsigned char *destination<ram_tii_src>, unsigned char value<_al>, unsigned int count<acc> );
  544                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 72; //  0 	if strings are equal
  545                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 73; //  1 	if the first non-matching character in string1 > string2 (in ASCII).
  546                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 74; // -1 	if the first non-matching character in string1 < string2 (in ASCII).
  547                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 76; extern int __fastcall strcmp( char *string1<_di>, char *string2<_bp> );
  548                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 77; extern int __fastcall strncmp( char *string1<_di>, char *string2<_bp>, unsigned int count<_ax> );
  549                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 79; extern int __fastcall __macro memcmp( unsigned char *string1<_di>, unsigned char *string2<_bp>, unsigned int count<acc> );
  550                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 80; extern int __fastcall farmemcmp( unsigned char *string1<_di>, unsigned char __far *string2<_bp_bank:_bp>, unsigned int count<acc> );
  551                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 81; extern int __fastcall far_memcmp( unsigned char *string1<_di>, unsigned int count<acc> );
  552                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 83; #endif // __HUCC__
  553                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 85; #endif // _hucc_string_h
  554                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
  555                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 1; #ifndef _hucc_old_scroll_h
  556                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 2; #define _hucc_old_scroll_h
  557                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 4; /****************************************************************************
  558                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 5; ; ***************************************************************************
  559                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 6; ;
  560                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 7; ; hucc-old-scroll.h
  561                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 8; ;
  562                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 9; ; Based on the original HuC and MagicKit functions by David Michel and the
  563                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 10; ; other original HuC developers.
  564                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 11; ;
  565                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 12; ; Modifications copyright John Brandwood 2024.
  566                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 13; ;
  567                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 14; ; Distributed under the Boost Software License, Version 1.0.
  568                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 15; ; (See accompanying file LICENSE_1_0.txt or copy at
  569                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 16; ;  http://www.boost.org/LICENSE_1_0.txt)
  570                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 17; ;
  571                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 18; ; ***************************************************************************
  572                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 19; ; ***************************************************************************
  573                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 20; ;
  574                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 21; ; HuC's old scrolling library is provided for use with existing HuC projects,
  575                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 22; ; but it should preferably be avoided in new projects because it is slow and
  576                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 23; ; forever limited by its choice to handle gaps between areas, and sorting.
  577                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 24; ;
  578                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 25; ; HuCC's new scrolling library puts the responibility for defining both gaps
  579                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 26; ; and the display order into the project's hands, but in return it runs much
  580                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 27; ; faster, using less than 1/6 of the processing time in VBLANK, and far less
  581                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 28; ; time in the RCR interrputs themselves. It also supports the 2nd SuperGRAFX
  582                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 29; ; screen layer, which HuC's old scrolling library ignores.
  583                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 30; ;
  584                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 31; ; ***************************************************************************
  585                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 32; ; **************************************************************************/
  586                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 34; // *************
  587                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 35; // Functions in hucc-old-scroll.asm ...
  588                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 36; // *************
  589                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 38; #ifdef __HUCC__
  590                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 40; #asmdef	HUCC_USES_OLD_SCROLL 1
  591               0001     	HUCC_USES_OLD_SCROLL = 1
  592                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 42; extern void __fastcall scroll( unsigned char num<_al>, unsigned int x<_cx>, unsigned int y<_dx>, unsigned char top<_ah>, unsigned char bottom<_bl>, unsigned char disp<acc> );
  593                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 43; extern void __fastcall scroll_disable( unsigned char num<acc> );
  594                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 45; #endif // __HUCC__
  595                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 47; #endif // _hucc_old_scroll_h
  596                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
  597                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 1; #ifndef _hucc_old_spr_h
  598                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 2; #define _hucc_old_spr_h
  599                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 4; /****************************************************************************
  600                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 5; ; ***************************************************************************
  601                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 6; ;
  602                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 7; ; hucc-old-spr.h
  603                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 8; ;
  604                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 9; ; Based on the original HuC and MagicKit functions by David Michel and the
  605                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 10; ; other original HuC developers.
  606                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 11; ;
  607                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 12; ; Modifications copyright John Brandwood 2024.
  608                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 13; ;
  609                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 14; ; Distributed under the Boost Software License, Version 1.0.
  610                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 15; ; (See accompanying file LICENSE_1_0.txt or copy at
  611                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 16; ;  http://www.boost.org/LICENSE_1_0.txt)
  612                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 17; ;
  613                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 18; ; ***************************************************************************
  614                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 19; ; **************************************************************************/
  615                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 21; // *************
  616                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 22; // Sprite defines ...
  617                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 23; // *************
  618                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 25; #define FLIP_X_MASK 0x08
  619                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 26; #define FLIP_Y_MASK 0x80
  620                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 27; #define FLIP_MAS    0x88
  621                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 28; #define SIZE_MAS    0x31
  622                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 30; #define NO_FLIP     0x00
  623                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 31; #define NO_FLIP_X   0x00
  624                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 32; #define NO_FLIP_Y   0x00
  625                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 33; #define FLIP_X      0x08
  626                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 34; #define FLIP_Y      0x80
  627                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 35; #define SZ_16x16    0x00
  628                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 36; #define SZ_16x32    0x10
  629                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 37; #define SZ_16x64    0x30
  630                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 38; #define SZ_32x16    0x01
  631                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 39; #define SZ_32x32    0x11
  632                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 40; #define	SZ_32x64    0x31
  633                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 42; // *************
  634                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 43; // Functions in hucc-old-spr.asm ...
  635                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 44; // *************
  636                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 46; #ifdef __HUCC__
  637                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 48; #asmdef	HUCC_USES_OLD_SPR 1
  638               0001     	HUCC_USES_OLD_SPR = 1
  639                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 50; extern void __fastcall init_satb( void );
  640                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 51; extern void __fastcall reset_satb( void );
  641                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 52; extern void __fastcall satb_update( void );
  642                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 53; extern void __fastcall spr_set( unsigned char num<acc> );
  643                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 54; extern void __fastcall spr_hide( void );
  644                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 55; extern void __fastcall spr_show( void );
  645                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 56; extern void __fastcall spr_x( unsigned int value<acc> );
  646                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 57; extern void __fastcall spr_y( unsigned int value<acc> );
  647                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 58; extern void __fastcall spr_pattern( unsigned int vaddr<acc> );
  648                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 59; extern void __fastcall spr_ctrl( unsigned char mask<_al>, unsigned char value<acc> );
  649                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 60; extern void __fastcall spr_pal( unsigned char palette<acc> );
  650                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 61; extern void __fastcall spr_pri( unsigned char priority<acc> );
  651                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 63; extern unsigned int __fastcall spr_get_x( void );
  652                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 64; extern unsigned int __fastcall spr_get_y( void );
  653                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 66; extern void __fastcall sgx_init_satb( void );
  654                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 67; extern void __fastcall sgx_reset_satb( void );
  655                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 68; extern void __fastcall sgx_satb_update( void );
  656                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 69; extern void __fastcall sgx_spr_set( unsigned char num<acc> );
  657                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 70; extern void __fastcall sgx_spr_hide( void );
  658                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 71; extern void __fastcall sgx_spr_show( void );
  659                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 72; extern void __fastcall sgx_spr_x( unsigned int value<acc> );
  660                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 73; extern void __fastcall sgx_spr_y( unsigned int value<acc> );
  661                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 74; extern void __fastcall sgx_spr_pattern( unsigned int vaddr<acc> );
  662                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 75; extern void __fastcall sgx_spr_ctrl( unsigned char mask<_al>, unsigned char value<acc> );
  663                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 76; extern void __fastcall sgx_spr_pal( unsigned char palette<acc> );
  664                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 77; extern void __fastcall sgx_spr_pri( unsigned char priority<acc> );
  665                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 79; extern unsigned int __fastcall sgx_spr_get_x( void );
  666                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 80; extern unsigned int __fastcall sgx_spr_get_y( void );
  667                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 82; #endif // __HUCC__
  668                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 84; #endif // _hucc_old_spr_h
  669                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
  670                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 1; #ifndef _hucc_old_map_h
  671                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 2; #define _hucc_old_map_h
  672                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 4; /****************************************************************************
  673                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 5; ; ***************************************************************************
  674                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 6; ;
  675                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 7; ; hucc-old-map.h
  676                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 8; ;
  677                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 9; ; Based on the original HuC and MagicKit functions by David Michel and the
  678                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 10; ; other original HuC developers.
  679                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 11; ;
  680                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 12; ; Modifications copyright John Brandwood 2024.
  681                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 13; ;
  682                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 14; ; Distributed under the Boost Software License, Version 1.0.
  683                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 15; ; (See accompanying file LICENSE_1_0.txt or copy at
  684                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 16; ;  http://www.boost.org/LICENSE_1_0.txt)
  685                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 17; ;
  686                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 18; ; ***************************************************************************
  687                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 19; ; **************************************************************************/
  688                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 21; // *************
  689                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 22; // Functions in hucc-old-map.asm ...
  690                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 23; // *************
  691                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 25; #ifdef __HUCC__
  692                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 27; #asmdef	HUCC_USES_OLD_MAP 1
  693               0001     	HUCC_USES_OLD_MAP = 1
  694                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 29; extern void __fastcall set_tile_address( unsigned int vram<_di> );
  695                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 30; extern void __fastcall sgx_set_tile_address( unsigned int vram<_di> );
  696                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 32; extern void __fastcall __nop set_tile_data( unsigned char __far *tiles<vdc_tile_bank:vdc_tile_addr>, unsigned char num_tiles<vdc_num_tiles>, unsigned char __far *palette_table<vdc_attr_bank:vdc_attr_addr>, unsigned char tile_type<vdc_tile_type> );
  697                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 33; extern void __fastcall __nop sgx_set_tile_data( unsigned char __far *tiles<sgx_tile_bank:sgx_tile_addr>, unsigned char num_tiles<sgx_num_tiles>, unsigned char __far *palette_table<sgx_attr_bank:sgx_attr_addr>, unsigned char tile_type<sgx_tile_type> );
  698                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 35; extern void __fastcall __nop set_far_tile_data( unsigned char tile_bank<vdc_tile_bank>, unsigned char *tile_addr<vdc_tile_addr>, unsigned char num_tiles<vdc_num_tiles>, unsigned char palette_table_bank<vdc_attr_bank>, unsigned char *palette_table_addr<vdc_attr_addr>, unsigned char tile_type<vdc_tile_type> );
  699                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 36; extern void __fastcall __nop sgx_set_far_tile_data( unsigned char tile_bank<sgx_tile_bank>, unsigned char *tile_addr<sgx_tile_addr>, unsigned char num_tiles<sgx_num_tiles>, unsigned char palette_table_bank<sgx_attr_bank>, unsigned char *palette_table_addr<sgx_attr_addr>, unsigned char tile_type<sgx_tile_type> );
  700                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 38; extern void __fastcall __nop set_map_data( unsigned char __far *map<vdc_map_bank:vdc_map_addr>, unsigned char w<vdc_map_width>, unsigned char h<vdc_map_height> );
  701                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 39; extern void __fastcall __nop sgx_set_map_data( unsigned char __far *map<sgx_map_bank:sgx_map_addr>, unsigned char w<sgx_map_width>, unsigned char h<sgx_map_height> );
  702                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 41; extern void __fastcall __nop set_far_map_data( unsigned char map_bank<vdc_map_bank>, unsigned char *map_addr<vdc_map_addr>, unsigned char w<vdc_map_width>, unsigned char h<vdc_map_height> );
  703                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 42; extern void __fastcall __nop sgx_set_far_map_data( unsigned char map_bank<vdc_map_bank>, unsigned char *map_addr<vdc_map_addr>, unsigned char w<sgx_map_width>, unsigned char h<sgx_map_height> );
  704                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 44; extern void __fastcall load_tile( unsigned int vram<_di> );
  705                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 45; extern void __fastcall sgx_load_tile( unsigned int vram<_di> );
  706                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 47; extern void __fastcall load_map( unsigned char bat_x<_al>, unsigned char bat_y<_ah>, int map_x<_bx>, int map_y<_dx>, unsigned char tiles_w<_cl>, unsigned char tiles_h<_ch> );
  707                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 48; extern void __fastcall sgx_load_map( unsigned char bat_x<_al>, unsigned char bat_y<_ah>, int map_x<_bx>, int map_y<_dx>, unsigned char tiles_w<_cl>, unsigned char tiles_h<_ch> );
  708                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 50; extern unsigned char __fastcall map_get_tile( unsigned char map_x<_bl>, unsigned char map_y<_bh> );
  709                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 51; extern unsigned char __fastcall sgx_map_get_tile( unsigned char map_x<_bl>, unsigned char map_y<_bh> );
  710                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 53; extern void __fastcall map_put_tile( unsigned char map_x<_bl>, unsigned char map_y<_bh>, unsigned char tile<_al> );
  711                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 54; extern void __fastcall sgx_map_put_tile( unsigned char map_x<_bl>, unsigned char map_y<_bh>, unsigned char tile<_al> );
  712                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 56; extern void __fastcall put_tile( unsigned char tile<_bl>, unsigned char bat_x<_al>, unsigned char bat_y<_ah> );
  713                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 57; extern void __fastcall sgx_put_tile( unsigned char tile<_bl>, unsigned char bat_x<_al>, unsigned char bat_y<_ah> );
  714                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 59; // Deprecated functions ...
  715                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 61; extern void __fastcall set_tile_data( unsigned char *tile_ex<_di> );
  716                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 63; extern void __fastcall __nop set_map_pals( unsigned char __far *palette_table<vdc_attr_bank:vdc_attr_addr> );
  717                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 64; extern void __fastcall __nop set_map_tile_type( unsigned char tile_type<vdc_tile_type> );
  718                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 66; extern void __fastcall __nop sgx_set_map_pals( unsigned char __far *palette_table<sgx_attr_bank:sgx_attr_addr> );
  719                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 67; extern void __fastcall __nop sgx_set_map_tile_type( unsigned char tile_type<sgx_tile_type> );
  720                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 69; extern void __fastcall set_map_tile_base( unsigned int vram<_di> );
  721                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 70; extern void __fastcall sgx_set_map_tile_base( unsigned int vram<_di> );
  722                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 72; #endif // __HUCC__
  723                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 74; #endif // _hucc_old_map_h
  724                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
  725                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 1; #ifndef _hucc_old_line_h
  726                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 2; #define _hucc_old_line_h
  727                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 4; /****************************************************************************
  728                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 5; ; ***************************************************************************
  729                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 6; ;
  730                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 7; ; hucc-old-line.h
  731                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 8; ;
  732                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 9; ; Based on the original HuC and MagicKit functions by David Michel and the
  733                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 10; ; other original HuC developers.
  734                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 11; ;
  735                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 12; ; Modifications copyright John Brandwood 2024.
  736                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 13; ;
  737                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 14; ; Distributed under the Boost Software License, Version 1.0.
  738                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 15; ; (See accompanying file LICENSE_1_0.txt or copy at
  739                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 16; ;  http://www.boost.org/LICENSE_1_0.txt)
  740                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 17; ;
  741                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 18; ; ***************************************************************************
  742                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 19; ; **************************************************************************/
  743                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 21; // *************
  744                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 22; // Functions in hucc-old-line.asm ...
  745                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 23; // *************
  746                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 25; #ifdef __HUCC__
  747                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 27; #asmdef	HUCC_USES_OLD_LINE 1
  748               0001     	HUCC_USES_OLD_LINE = 1
  749                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 29; extern void __fastcall gfx_init( unsigned int start_vram_addr<_ax> );
  750                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 30; extern void __fastcall gfx_clear( unsigned int start_vram_addr<_di> );
  751                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 31; extern void __fastcall gfx_plot( unsigned int x<_gfx_x1>, unsigned int y<_gfx_y1>, char color<_gfx_color> );
  752                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 32; extern void __fastcall gfx_line( unsigned int x1<_gfx_x1>, unsigned int y1<_gfx_y1>, unsigned int x2<_gfx_x2>, unsigned int y2<_gfx_y2>, unsigned char color<_gfx_color> );
  753                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 34; #endif // __HUCC__
  754                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 36; #endif // _hucc_old_line_h
  755                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
  756                        		.dbg	line,	"main.c", 1; #include "huc.h"
  757                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
  758                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
  759                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
  760                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
  761                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
  762                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
  763                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
  764                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
  765                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
  766                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
  767                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
  768                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
  769                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
  770                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
  771                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
  772                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
  773                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
  774                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
  775                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
  776                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
  777                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
  778                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
  779                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
  780                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
  781                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
  782                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
  783                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
  784                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
  785                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
  786                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
  787                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
  788                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
  789                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
  790                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
  791                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
  792                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
  793                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
  794                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
  795                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
  796                        		.dbg	line,	"main.c", 2; #include "hucc-scroll.h"
  797                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 1; #ifndef _hucc_scroll_h
  798                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 2; #define _hucc_scroll_h
  799                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 4; /****************************************************************************
  800                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 5; ; ***************************************************************************
  801                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 6; ;
  802                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 7; ; hucc-scroll.h
  803                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 8; ;
  804                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 9; ; Routines for a fast split-screen scrolling system.
  805                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 10; ;
  806                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 11; ; Copyright John Brandwood 2024.
  807                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 12; ;
  808                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 13; ; Distributed under the Boost Software License, Version 1.0.
  809                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
  810                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
  811                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 16; ;
  812                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 17; ; ***************************************************************************
  813                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 18; ; ***************************************************************************
  814                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 19; ;
  815                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 20; ; The maximum number of splits for each screen layer is set in your project's
  816                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 21; ; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
  817                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 22; ;
  818                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 23; ; Your first active split must be defined to start at screen line 0, and then
  819                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 24; ; the rest of the active splits must be in increasing line order to match the
  820                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 25; ; way that the PC Engine displays the output image.
  821                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 26; ;
  822                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 27; ; You can have disabled splits interleaved with your active splits.
  823                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 28; ;
  824                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 29; ; Splits that are normally disabled can be used to create full screen effects
  825                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 30; ; such as bouncing the screen up and down by adding blank areas at the top or
  826                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 31; ; bottom of the screen, and then rapidly changing the height of those areas.
  827                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 32; ;
  828                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 33; ; ***************************************************************************
  829                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 34; ; **************************************************************************/
  830                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 36; // *************
  831                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 37; // VDC bits for display_flags ...
  832                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 38; // *************
  833                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 40; #ifndef BKG_OFF
  834                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 41; #define BKG_OFF 0x00
  835                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 42; #endif
  836                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 44; #ifndef SPR_OFF
  837                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 45; #define SPR_OFF 0x00
  838                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 46; #endif
  839                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 48; #ifndef BKG_ON
  840                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 49; #define BKG_ON 0x80
  841                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 50; #endif
  842                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 52; #ifndef SPR_ON
  843                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 53; #define SPR_ON 0x40
  844                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 54; #endif
  845                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 56; // *************
  846                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 57; // Functions in hucc-scroll.asm ...
  847                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 58; // *************
  848                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 60; #ifdef __HUCC__
  849                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 62; #asmdef	HUCC_USES_NEW_SCROLL 1
  850               0001     	HUCC_USES_NEW_SCROLL = 1
  851                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 64; extern void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
  852                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 65; extern void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
  853                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 67; extern void __fastcall disable_split( unsigned char index<acc> );
  854                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 68; extern void __fastcall sgx_disable_split( unsigned char index<acc> );
  855                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 70; extern void __fastcall __macro disable_all_splits( void );
  856                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 71; extern void __fastcall __macro sgx_disable_all_splits( void );
  857                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 73; #asm
  858                        		.dbg	clear
  859                        			.macro	_disable_all_splits
  860                        			ldy	#HUCC_PCE_SPLITS - 1
  861                        	!loop:		tya
  862                        			call	_disable_split.1
  863                        			dey
  864                        			bpl	!loop-
  865                        			.endm
  866                        			.macro	_sgx_disable_all_splits
  867                        			ldy	#HUCC_SGX_SPLITS - 1
  868                        	!loop:		tya
  869                        			call	_sgx_disable_split.1
  870                        			dey
  871                        			bpl	!loop-
  872                        			.endm
  873                        	
  874                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 89; #endasm
  875                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 91; #endif // __HUCC__
  876                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 93; #endif // _hucc_scroll_h
  877                        		.dbg	line,	"main.c", 3; #include "hucc-chrmap.h"
  878                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 1; #ifndef _hucc_chrmap_h
  879                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 2; #define _hucc_chrmap_h
  880                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 4; /****************************************************************************
  881                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 5; ; ***************************************************************************
  882                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 6; ;
  883                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 7; ; hucc-chrmap.h
  884                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 8; ;
  885                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 9; ; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
  886                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 10; ;
  887                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 11; ; Copyright John Brandwood 2025.
  888                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 12; ;
  889                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
  890                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
  891                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
  892                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 16; ;
  893                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 17; ; ***************************************************************************
  894                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 18; ; ***************************************************************************
  895                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 19; ;
  896                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 20; ; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
  897                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 21; ;
  898                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 22; ; The maximum total size for a chrmap is 16KBytes, which allows for maps up
  899                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 23; ; to 256x32 tiles (2048x256 pixels).
  900                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 24; ;
  901                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 25; ; ***************************************************************************
  902                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 26; ; **************************************************************************/
  903                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 28; // *************
  904                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 29; // This code extends the blkmap library ...
  905                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 30; // *************
  906                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 32; #include "hucc-blkmap.h"
  907                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
  908                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
  909                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
  910                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
  911                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
  912                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
  913                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
  914                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
  915                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
  916                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
  917                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
  918                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
  919                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
  920                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
  921                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
  922                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
  923                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
  924                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
  925                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
  926                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
  927                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
  928                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
  929                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
  930                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
  931                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
  932                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
  933                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
  934                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
  935                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
  936                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
  937                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
  938                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
  939                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
  940                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
  941                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
  942                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
  943                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
  944               0001     	HUCC_USES_BLKMAP = 1
  945                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
  946                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
  947                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
  948                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
  949                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
  950                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
  951                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
  952                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
  953                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
  954                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
  955                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
  956                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
  957                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
  958                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
  959                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
  960                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
  961                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
  962                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
  963                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
  964                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
  965                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
  966                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
  967                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
  968                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
  969                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
  970                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
  971                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
  972                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
  973                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
  974                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
  975                        		.dbg	clear
  976                        			.macro	_set_blkmap.2
  977                        			stz	vdc_scr_bank
  978                        			.endm
  979                        			.macro	_set_multimap.2
  980                        			lda	vdc_bat_width
  981                        			lsr	a
  982                        			sta	vdc_map_line_w
  983                        			.endm
  984                        			.macro	SCREEN
  985                        			db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
  986                        			db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
  987                        			db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
  988                        			dw	(\4)
  989                        			.endm
  990                        	
  991                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
  992                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
  993                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
  994                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
  995                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
  996                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
  997                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
  998                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
  999                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
 1000                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
 1001                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
 1002                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
 1003                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
 1004                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
 1005                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
 1006                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
 1007                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
 1008                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
 1009                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
 1010                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
 1011                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
 1012                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
 1013                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
 1014                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
 1015                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
 1016                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1017                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 1018                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
 1019                        		.dbg	clear
 1020                        			.macro	_sgx_set_blkmap.2
 1021                        			stz	sgx_scr_bank
 1022                        			.endm
 1023                        			.macro	_sgx_set_multimap.2
 1024                        			lda	sgx_bat_width
 1025                        			lsr	a
 1026                        			sta	sgx_map_line_w
 1027                        			.endm
 1028                        	
 1029                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
 1030                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
 1031                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
 1032                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
 1033                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 34; // *************
 1034                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 35; // Functions in chrmap.asm ...
 1035                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 36; // *************
 1036                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 38; #ifdef __HUCC__
 1037                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 40; #asmdef	HUCC_USES_CHRMAP 1
 1038               0001     	HUCC_USES_CHRMAP = 1
 1039                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 42; extern void __fastcall __nop set_chrmap( unsigned char __far *chrmap<vdc_map_bank:vdc_map_addr>, unsigned char tiles_w<vdc_map_line_w> );
 1040                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 44; extern void __fastcall draw_bat( void );
 1041                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 45; extern void __fastcall scroll_bat( void );
 1042                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 47; extern void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1043                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 49; #ifdef _SGX
 1044                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 51; extern void __fastcall __nop sgx_set_chrmap( unsigned char __far *chrmap<sgx_map_bank:sgx_map_addr>, unsigned char tiles_w<sgx_map_line_w> );
 1045                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 53; extern void __fastcall sgx_draw_bat( void );
 1046                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 54; extern void __fastcall sgx_scroll_bat( void );
 1047                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 56; extern void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1048                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 58; #endif
 1049                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 60; #endif // __HUCC__
 1050                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 62; #endif // _hucc_chrmap_h
 1051                        		.dbg	line,	"main.c", 4; #include "hucc-blkmap.h"
 1052                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
 1053                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
 1054                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
 1055                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
 1056                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
 1057                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
 1058                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
 1059                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
 1060                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
 1061                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
 1062                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
 1063                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1064                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1065                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1066                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
 1067                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
 1068                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
 1069                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
 1070                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
 1071                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
 1072                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
 1073                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
 1074                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
 1075                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
 1076                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
 1077                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
 1078                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
 1079                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
 1080                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
 1081                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
 1082                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
 1083                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
 1084                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
 1085                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
 1086                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
 1087                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
 1088                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
 1089                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
 1090                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
 1091                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
 1092                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
 1093                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
 1094                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
 1095                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
 1096                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
 1097                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
 1098                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
 1099                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
 1100                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
 1101                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
 1102                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
 1103                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
 1104                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
 1105                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
 1106                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
 1107                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
 1108                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
 1109                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
 1110                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
 1111                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
 1112                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
 1113                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
 1114                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
 1115                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
 1116                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1117                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 1118                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
 1119                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 86; .macro	_set_blkmap.2
 1120                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 87; stz	vdc_scr_bank
 1121                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 88; .endm
 1122                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 90; .macro	_set_multimap.2
 1123                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 91; lda	vdc_bat_width
 1124                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 92; lsr	a
 1125                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 93; sta	vdc_map_line_w
 1126                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 94; .endm
 1127                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 96; .macro	SCREEN
 1128                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 97; db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
 1129                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 98; db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
 1130                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 99; db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
 1131                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 100; dw	(\4)
 1132                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 101; .endm
 1133                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
 1134                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
 1135                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
 1136                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
 1137                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
 1138                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
 1139                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
 1140                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
 1141                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
 1142                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
 1143                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
 1144                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
 1145                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
 1146                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
 1147                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
 1148                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
 1149                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
 1150                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
 1151                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
 1152                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
 1153                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
 1154                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
 1155                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
 1156                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
 1157                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
 1158                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1159                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 1160                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
 1161                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 144; .macro	_sgx_set_blkmap.2
 1162                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 145; stz	sgx_scr_bank
 1163                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 146; .endm
 1164                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 148; .macro	_sgx_set_multimap.2
 1165                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 149; lda	sgx_bat_width
 1166                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 150; lsr	a
 1167                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 151; sta	sgx_map_line_w
 1168                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 152; .endm
 1169                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
 1170                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
 1171                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
 1172                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
 1173                        		.dbg	line,	"main.c", 7; #include "include/constants.c"
 1174                        		.dbg	line,	"include\constants.c", 1; //*****************************************************************************//
 1175                        		.dbg	line,	"include\constants.c", 2; //                                                                             //
 1176                        		.dbg	line,	"include\constants.c", 3; //                                SYSTEM CONSTANTS                             //
 1177                        		.dbg	line,	"include\constants.c", 4; //                                                                             //
 1178                        		.dbg	line,	"include\constants.c", 5; //*****************************************************************************//
 1179                        		.dbg	line,	"include\constants.c", 7; #define FALSE 0
 1180                        		.dbg	line,	"include\constants.c", 8; #define TRUE  1
 1181                        		.dbg	line,	"include\constants.c", 10; #define YES   1
 1182                        		.dbg	line,	"include\constants.c", 11; #define NO    2
 1183                        		.dbg	line,	"include\constants.c", 13; #define JOYPAD_1 0
 1184                        		.dbg	line,	"include\constants.c", 14; #define JOYPAD_2 1
 1185                        		.dbg	line,	"include\constants.c", 16; #define BAT_SIZE_W 2048 // IN PIXELS
 1186                        		.dbg	line,	"include\constants.c", 17; #define BAT_SIZE_H 256  // IN PIXELS
 1187                        		.dbg	line,	"include\constants.c", 19; #define NUMBERS_FONT_VRAM_ADR   0x0900
 1188                        		.dbg	line,	"include\constants.c", 21; #define JOY_DIR_PRESSED (JOY_DOWN | JOY_UP | JOY_RIGHT | JOY_LEFT)
 1189                        		.dbg	line,	"include\constants.c", 24; #define TILES_1   16
 1190                        		.dbg	line,	"include\constants.c", 25; #define TILES_2   32
 1191                        		.dbg	line,	"include\constants.c", 26; #define TILES_3   48
 1192                        		.dbg	line,	"include\constants.c", 27; #define TILES_4   64
 1193                        		.dbg	line,	"include\constants.c", 28; #define TILES_8   128
 1194                        		.dbg	line,	"include\constants.c", 29; #define TILES_12  192
 1195                        		.dbg	line,	"include\constants.c", 30; #define TILES_16  256
 1196                        		.dbg	line,	"include\constants.c", 31; #define TILES_32  512
 1197                        		.dbg	line,	"include\constants.c", 32; #define TILES_48  768
 1198                        		.dbg	line,	"include\constants.c", 33; #define TILES_64  1024
 1199                        		.dbg	line,	"include\constants.c", 34; #define TILES_80  1280
 1200                        		.dbg	line,	"include\constants.c", 35; #define TILES_96  1536
 1201                        		.dbg	line,	"include\constants.c", 36; #define TILES_352 5632
 1202                        		.dbg	line,	"include\constants.c", 41; #define SEQUENCE_TITLE      0
 1203                        		.dbg	line,	"include\constants.c", 42; #define SEQUENCE_INTRO      1
 1204                        		.dbg	line,	"include\constants.c", 43; #define SEQUENCE_GAME       2
 1205                        		.dbg	line,	"include\constants.c", 44; #define SEQUENCE_NPC        3
 1206                        		.dbg	line,	"include\constants.c", 45; #define SEQUENCE_SHOP       4
 1207                        		.dbg	line,	"include\constants.c", 48; #define CAMERA_RECENTER_VELOCITY    4
 1208                        		.dbg	line,	"include\constants.c", 53; //-----------------------------------------------------------------------------//
 1209                        		.dbg	line,	"include\constants.c", 54; //                                                                             //
 1210                        		.dbg	line,	"include\constants.c", 55; //                                   PLAYER                                    //
 1211                        		.dbg	line,	"include\constants.c", 56; //                                                                             //
 1212                        		.dbg	line,	"include\constants.c", 57; //-----------------------------------------------------------------------------//
 1213                        		.dbg	line,	"include\constants.c", 59; #define AXIS_RIGHT          0
 1214                        		.dbg	line,	"include\constants.c", 60; #define AXIS_LEFT           1
 1215                        		.dbg	line,	"include\constants.c", 61; #define AXIS_UP             2
 1216                        		.dbg	line,	"include\constants.c", 62; #define AXIS_DOWN           3
 1217                        		.dbg	line,	"include\constants.c", 66; #define STATE_IDLE          0
 1218                        		.dbg	line,	"include\constants.c", 67; #define STATE_WALK          1
 1219                        		.dbg	line,	"include\constants.c", 68; #define STATE_ATTACK        2
 1220                        		.dbg	line,	"include\constants.c", 69; #define STATE_JUMP          4
 1221                        		.dbg	line,	"include\constants.c", 70; #define STATE_JUMP_RIGHT    5
 1222                        		.dbg	line,	"include\constants.c", 71; #define STATE_JUMP_LEFT     6
 1223                        		.dbg	line,	"include\constants.c", 72; #define STATE_CROUCH        7
 1224                        		.dbg	line,	"include\constants.c", 73; #define STATE_CROUCH_ATTACK 8
 1225                        		.dbg	line,	"include\constants.c", 74; #define STATE_FALL          9
 1226                        		.dbg	line,	"include\constants.c", 75; #define STATE_HANG          10
 1227                        		.dbg	line,	"include\constants.c", 76; #define STATE_CLIMB_UP      11
 1228                        		.dbg	line,	"include\constants.c", 77; #define STATE_CLIMB_DOWN    12
 1229                        		.dbg	line,	"include\constants.c", 78; #define STATE_JUMP_LADDER   13
 1230                        		.dbg	line,	"include\constants.c", 83; #define PLAYER_BASE_Y_POS   128
 1231                        		.dbg	line,	"include\constants.c", 85; #define RESPAWN_DEAD        1
 1232                        		.dbg	line,	"include\constants.c", 86; #define RESPAWN_SHOP        2
 1233                        		.dbg	line,	"include\constants.c", 88; #define PLAYER_START_INDEX  14
 1234                        		.dbg	line,	"include\constants.c", 92; #define PLAYER_VRAM_ADR                 0x1600
 1235                        		.dbg	line,	"include\constants.c", 93; #define PLAYER_IDLE_VRAM_ADR            PLAYER_VRAM_ADR
 1236                        		.dbg	line,	"include\constants.c", 94; #define PLAYER_WALK_1_VRAM_ADR          PLAYER_VRAM_ADR+TILES_16
 1237                        		.dbg	line,	"include\constants.c", 95; #define PLAYER_WALK_2_VRAM_ADR          PLAYER_WALK_1_VRAM_ADR+TILES_16
 1238                        		.dbg	line,	"include\constants.c", 96; #define PLAYER_WALK_3_VRAM_ADR          PLAYER_WALK_2_VRAM_ADR+TILES_16
 1239                        		.dbg	line,	"include\constants.c", 97; #define PLAYER_WALK_4_VRAM_ADR          PLAYER_WALK_3_VRAM_ADR+TILES_16
 1240                        		.dbg	line,	"include\constants.c", 98; #define PLAYER_WALK_5_VRAM_ADR          PLAYER_WALK_4_VRAM_ADR+TILES_16
 1241                        		.dbg	line,	"include\constants.c", 99; #define PLAYER_WALK_6_VRAM_ADR          PLAYER_WALK_5_VRAM_ADR+TILES_16
 1242                        		.dbg	line,	"include\constants.c", 101; #define PLAYER_JUMP_VRAM_ADR            PLAYER_WALK_6_VRAM_ADR+TILES_16
 1243                        		.dbg	line,	"include\constants.c", 102; #define PLAYER_CROUCH_VRAM_ADR          PLAYER_JUMP_VRAM_ADR+TILES_16
 1244                        		.dbg	line,	"include\constants.c", 103; #define PLAYER_HANG_VRAM_ADR            PLAYER_CROUCH_VRAM_ADR+TILES_16
 1245                        		.dbg	line,	"include\constants.c", 105; #define PLAYER_CLIMB_1_VRAM_ADR         PLAYER_HANG_VRAM_ADR+TILES_16
 1246                        		.dbg	line,	"include\constants.c", 106; #define PLAYER_CLIMB_2_VRAM_ADR         PLAYER_CLIMB_1_VRAM_ADR+TILES_16
 1247                        		.dbg	line,	"include\constants.c", 107; #define PLAYER_CLIMB_3_VRAM_ADR         PLAYER_CLIMB_2_VRAM_ADR+TILES_16
 1248                        		.dbg	line,	"include\constants.c", 108; #define PLAYER_CLIMB_4_VRAM_ADR         PLAYER_CLIMB_3_VRAM_ADR+TILES_16
 1249                        		.dbg	line,	"include\constants.c", 109; #define PLAYER_CLIMB_5_VRAM_ADR         PLAYER_CLIMB_4_VRAM_ADR+TILES_16
 1250                        		.dbg	line,	"include\constants.c", 110; #define PLAYER_CLIMB_6_VRAM_ADR         PLAYER_CLIMB_5_VRAM_ADR+TILES_16
 1251                        		.dbg	line,	"include\constants.c", 112; #define PLAYER_FALL_VRAM_ADR            PLAYER_CLIMB_6_VRAM_ADR+TILES_16
 1252                        		.dbg	line,	"include\constants.c", 114; #define PLAYER_ATTACK_1_VRAM_ADR        PLAYER_FALL_VRAM_ADR+TILES_16
 1253                        		.dbg	line,	"include\constants.c", 115; #define PLAYER_ATTACK_2_VRAM_ADR        PLAYER_ATTACK_1_VRAM_ADR+TILES_16
 1254                        		.dbg	line,	"include\constants.c", 117; #define PLAYER_CROUCH_1_VRAM_ADR        PLAYER_ATTACK_2_VRAM_ADR+TILES_16
 1255                        		.dbg	line,	"include\constants.c", 118; #define PLAYER_CROUCH_2_VRAM_ADR        PLAYER_CROUCH_1_VRAM_ADR+TILES_16
 1256                        		.dbg	line,	"include\constants.c", 120; #define PLAYER_JUMP_1_VRAM_ADR          PLAYER_CROUCH_2_VRAM_ADR+TILES_16
 1257                        		.dbg	line,	"include\constants.c", 121; #define PLAYER_JUMP_2_VRAM_ADR          PLAYER_JUMP_1_VRAM_ADR+TILES_16
 1258                        		.dbg	line,	"include\constants.c", 126; //-----------------------------------------------------------------------------//
 1259                        		.dbg	line,	"include\constants.c", 127; //                                                                             //
 1260                        		.dbg	line,	"include\constants.c", 128; //                                  WEAPONS                                    //
 1261                        		.dbg	line,	"include\constants.c", 129; //                                                                             //
 1262                        		.dbg	line,	"include\constants.c", 130; //-----------------------------------------------------------------------------//
 1263                        		.dbg	line,	"include\constants.c", 132; #define CHAIN_VRAM_ADR                  0x1400
 1264                        		.dbg	line,	"include\constants.c", 133; #define WEAPON_VRAM_ADR                 CHAIN_VRAM_ADR+TILES_4
 1265                        		.dbg	line,	"include\constants.c", 134; #define CHAIN_START_INDEX               PLAYER_START_INDEX-3
 1266                        		.dbg	line,	"include\constants.c", 136; #define WEAPON_IDLE_VRAM_ADRESS         WEAPON_VRAM_ADR
 1267                        		.dbg	line,	"include\constants.c", 137; #define WEAPON_WALK_1_VRAM_ADRESS       WEAPON_IDLE_VRAM_ADRESS+TILES_4
 1268                        		.dbg	line,	"include\constants.c", 138; #define WEAPON_WALK_2_VRAM_ADRESS       WEAPON_WALK_1_VRAM_ADRESS+TILES_4
 1269                        		.dbg	line,	"include\constants.c", 140; #define WEAPON_ATTACK_1_VRAM_ADRESS     WEAPON_WALK_2_VRAM_ADRESS+TILES_4
 1270                        		.dbg	line,	"include\constants.c", 141; #define WEAPON_ATTACK_2_VRAM_ADRESS     WEAPON_ATTACK_1_VRAM_ADRESS+TILES_4
 1271                        		.dbg	line,	"include\constants.c", 146; //-----------------------------------------------------------------------------//
 1272                        		.dbg	line,	"include\constants.c", 147; //                                                                             //
 1273                        		.dbg	line,	"include\constants.c", 148; //                                  COLLISIONS                                 //
 1274                        		.dbg	line,	"include\constants.c", 149; //                                                                             //
 1275                        		.dbg	line,	"include\constants.c", 150; //-----------------------------------------------------------------------------//
 1276                        		.dbg	line,	"include\constants.c", 152; #define TILE_EMPTY          0
 1277                        		.dbg	line,	"include\constants.c", 153; #define TILE_BG             1
 1278                        		.dbg	line,	"include\constants.c", 154; #define TILE_LADDER         2
 1279                        		.dbg	line,	"include\constants.c", 159; //-----------------------------------------------------------------------------//
 1280                        		.dbg	line,	"include\constants.c", 160; //                                                                             //
 1281                        		.dbg	line,	"include\constants.c", 161; //                                     HUD                                     //
 1282                        		.dbg	line,	"include\constants.c", 162; //                                                                             //
 1283                        		.dbg	line,	"include\constants.c", 163; //-----------------------------------------------------------------------------//
 1284                        		.dbg	line,	"include\constants.c", 165; #define LIFEBAR_1_VRAM_ADR      0x1000
 1285                        		.dbg	line,	"include\constants.c", 166; #define LIFEBAR_2_VRAM_ADR      LIFEBAR_1_VRAM_ADR+TILES_2
 1286                        		.dbg	line,	"include\constants.c", 167; #define LIFEBAR_3_VRAM_ADR      LIFEBAR_2_VRAM_ADR+TILES_2
 1287                        		.dbg	line,	"include\constants.c", 168; #define LIFEBAR_4_VRAM_ADR      LIFEBAR_3_VRAM_ADR+TILES_2
 1288                        		.dbg	line,	"include\constants.c", 169; #define LIFEBAR_5_VRAM_ADR      LIFEBAR_4_VRAM_ADR+TILES_2
 1289                        		.dbg	line,	"include\constants.c", 171; #define WEAPON_ICON_VRAM_ADR    LIFEBAR_5_VRAM_ADR+TILES_2
 1290                        		.dbg	line,	"include\constants.c", 172; #define ARMOR_VRAM_ADR          WEAPON_ICON_VRAM_ADR+TILES_4
 1291                        		.dbg	line,	"include\constants.c", 177; //-----------------------------------------------------------------------------//
 1292                        		.dbg	line,	"include\constants.c", 178; //                                                                             //
 1293                        		.dbg	line,	"include\constants.c", 179; //                                    LEVELS                                   //
 1294                        		.dbg	line,	"include\constants.c", 180; //                                                                             //
 1295                        		.dbg	line,	"include\constants.c", 181; //-----------------------------------------------------------------------------//
 1296                        		.dbg	line,	"include\constants.c", 183; #define LV1_WALL_VRAM_ADR       0x1000
 1297                        		.dbg	line,	"include\constants.c", 184; #define LV1_DOOR_VRAM_ADR       LV1_WALL_VRAM_ADR+256
 1298                        		.dbg	line,	"include\constants.c", 189; #define OBJECT_NUMBER_LV1       23
 1299                        		.dbg	line,	"include\constants.c", 190; #define CHEST_NUMBER_LV1        2
 1300                        		.dbg	line,	"include\constants.c", 191; #define NPC_NUMBER_LV1          2
 1301                        		.dbg	line,	"include\constants.c", 193; #define OBJECT_START_INDEX_LV1  0
 1302                        		.dbg	line,	"include\constants.c", 194; #define CHEST_START_INDEX_LV1   OBJECT_START_INDEX_LV1+OBJECT_NUMBER_LV1
 1303                        		.dbg	line,	"include\constants.c", 195; #define NPC_START_INDEX_LV1     CHEST_START_INDEX_LV1+CHEST_NUMBER_LV1
 1304                        		.dbg	line,	"include\constants.c", 200; //-----------------------------------------------------------------------------//
 1305                        		.dbg	line,	"include\constants.c", 201; //                                                                             //
 1306                        		.dbg	line,	"include\constants.c", 202; //                                   OBJECT                                    //
 1307                        		.dbg	line,	"include\constants.c", 203; //                                                                             //
 1308                        		.dbg	line,	"include\constants.c", 204; //-----------------------------------------------------------------------------//
 1309                        		.dbg	line,	"include\constants.c", 206; #define TYPE_HOURGLASS          0
 1310                        		.dbg	line,	"include\constants.c", 207; #define TYPE_POT                1
 1311                        		.dbg	line,	"include\constants.c", 208; #define TYPE_POW                2
 1312                        		.dbg	line,	"include\constants.c", 209; #define TYPE_CHEST              3
 1313                        		.dbg	line,	"include\constants.c", 210; #define TYPE_GRAY_KEY           4
 1314                        		.dbg	line,	"include\constants.c", 211; #define TYPE_GOLD_KEY           5
 1315                        		.dbg	line,	"include\constants.c", 212; #define TYPE_1UP                6
 1316                        		.dbg	line,	"include\constants.c", 213; #define TYPE_COIN_1             7
 1317                        		.dbg	line,	"include\constants.c", 214; #define TYPE_COIN_5             8
 1318                        		.dbg	line,	"include\constants.c", 215; #define TYPE_COIN_10            9
 1319                        		.dbg	line,	"include\constants.c", 216; #define TYPE_COIN_50            10
 1320                        		.dbg	line,	"include\constants.c", 217; #define TYPE_COIN_100           11
 1321                        		.dbg	line,	"include\constants.c", 218; #define TYPE_COIN_500           12
 1322                        		.dbg	line,	"include\constants.c", 219; #define TYPE_COIN_1000          13
 1323                        		.dbg	line,	"include\constants.c", 220; #define TYPE_YASHICHI           14
 1324                        		.dbg	line,	"include\constants.c", 223; #define STATE_ACTIVE            0
 1325                        		.dbg	line,	"include\constants.c", 224; #define STATE_INACTIVE          1
 1326                        		.dbg	line,	"include\constants.c", 226; #define OBJECT_MARGIN           10//9
 1327                        		.dbg	line,	"include\constants.c", 229; #define POT1_VRAM_ADR           0x6800
 1328                        		.dbg	line,	"include\constants.c", 230; #define POT2_VRAM_ADR           POT1_VRAM_ADR+TILES_4
 1329                        		.dbg	line,	"include\constants.c", 231; #define POT3_VRAM_ADR           POT2_VRAM_ADR+TILES_4
 1330                        		.dbg	line,	"include\constants.c", 232; #define POT4_VRAM_ADR           POT3_VRAM_ADR+TILES_4
 1331                        		.dbg	line,	"include\constants.c", 233; #define POT5_VRAM_ADR           POT4_VRAM_ADR+TILES_4
 1332                        		.dbg	line,	"include\constants.c", 234; #define POT6_VRAM_ADR           POT5_VRAM_ADR+TILES_4
 1333                        		.dbg	line,	"include\constants.c", 235; #define POT7_VRAM_ADR           POT6_VRAM_ADR+TILES_4
 1334                        		.dbg	line,	"include\constants.c", 236; #define POT8_VRAM_ADR           POT7_VRAM_ADR+TILES_4
 1335                        		.dbg	line,	"include\constants.c", 238; #define POW_VRAM_ADR            POT8_VRAM_ADR+TILES_4
 1336                        		.dbg	line,	"include\constants.c", 239; #define GRAY_KEY_VRAM_ADR       POW_VRAM_ADR+TILES_4
 1337                        		.dbg	line,	"include\constants.c", 240; #define GOLD_KEY_VRAM_ADR       GRAY_KEY_VRAM_ADR+TILES_4
 1338                        		.dbg	line,	"include\constants.c", 241; #define LIFE_VRAM_ADR           GOLD_KEY_VRAM_ADR+TILES_4
 1339                        		.dbg	line,	"include\constants.c", 243; #define COIN_1_VRAM_ADR         LIFE_VRAM_ADR+TILES_4
 1340                        		.dbg	line,	"include\constants.c", 244; #define COIN_5_VRAM_ADR         COIN_1_VRAM_ADR+TILES_4
 1341                        		.dbg	line,	"include\constants.c", 245; #define COIN_10_VRAM_ADR        COIN_5_VRAM_ADR+TILES_4
 1342                        		.dbg	line,	"include\constants.c", 246; #define COIN_50_VRAM_ADR        COIN_10_VRAM_ADR+TILES_4
 1343                        		.dbg	line,	"include\constants.c", 247; #define COIN_100_VRAM_ADR       COIN_50_VRAM_ADR+TILES_4
 1344                        		.dbg	line,	"include\constants.c", 248; #define COIN_500_VRAM_ADR       COIN_100_VRAM_ADR+TILES_4
 1345                        		.dbg	line,	"include\constants.c", 249; #define COIN_1000_VRAM_ADR      COIN_500_VRAM_ADR+TILES_4
 1346                        		.dbg	line,	"include\constants.c", 251; #define STAR_VRAM_ADR           COIN_1000_VRAM_ADR+TILES_4
 1347                        		.dbg	line,	"include\constants.c", 252; #define OCTOPUS_VRAM_ADR        STAR_VRAM_ADR+TILES_4
 1348                        		.dbg	line,	"include\constants.c", 253; #define FRUIT_VRAM_ADR          OCTOPUS_VRAM_ADR+TILES_4
 1349                        		.dbg	line,	"include\constants.c", 254; #define BARREL_VRAM_ADR         FRUIT_VRAM_ADR+TILES_4
 1350                        		.dbg	line,	"include\constants.c", 255; #define HOURGLASS_VRAM_ADR      BARREL_VRAM_ADR+TILES_4
 1351                        		.dbg	line,	"include\constants.c", 256; #define BAMBOO_VRAM_ADR         HOURGLASS_VRAM_ADR+TILES_4
 1352                        		.dbg	line,	"include\constants.c", 257; #define YASHICHI_VRAM_ADR       BAMBOO_VRAM_ADR+TILES_4
 1353                        		.dbg	line,	"include\constants.c", 258; #define ELEPHANT_VRAM_ADR       YASHICHI_VRAM_ADR+TILES_4
 1354                        		.dbg	line,	"include\constants.c", 259; #define DRAGONFLY_VRAM_ADR      ELEPHANT_VRAM_ADR+TILES_4
 1355                        		.dbg	line,	"include\constants.c", 260; #define COW_VRAM_ADR            DRAGONFLY_VRAM_ADR+TILES_4
 1356                        		.dbg	line,	"include\constants.c", 261; #define MOBICHAN_VRAM_ADR       COW_VRAM_ADR+TILES_4
 1357                        		.dbg	line,	"include\constants.c", 263; #define CHEST_VRAM_ADR          0x7000
 1358                        		.dbg	line,	"include\constants.c", 264; #define NPC_VRAM_ADR            CHEST_VRAM_ADR+TILES_96
 1359                        		.dbg	line,	"include\constants.c", 269; //-----------------------------------------------------------------------------//
 1360                        		.dbg	line,	"include\constants.c", 270; //                                                                             //
 1361                        		.dbg	line,	"include\constants.c", 271; //                                    NPC                                      //
 1362                        		.dbg	line,	"include\constants.c", 272; //                                                                             //
 1363                        		.dbg	line,	"include\constants.c", 273; //-----------------------------------------------------------------------------//
 1364                        		.dbg	line,	"include\constants.c", 275; #define TYPE_NPC_REWARD         0
 1365                        		.dbg	line,	"include\constants.c", 276; #define TYPE_NPC_SHOP           1
 1366                        		.dbg	line,	"include\constants.c", 281; //-----------------------------------------------------------------------------//
 1367                        		.dbg	line,	"include\constants.c", 282; //                                                                             //
 1368                        		.dbg	line,	"include\constants.c", 283; //                                    SHOP                                     //
 1369                        		.dbg	line,	"include\constants.c", 284; //                                                                             //
 1370                        		.dbg	line,	"include\constants.c", 285; //-----------------------------------------------------------------------------//
 1371                        		.dbg	line,	"include\constants.c", 287; #define SHOP_PHASE_ENTER        0
 1372                        		.dbg	line,	"include\constants.c", 288; #define SHOP_PHASE_BUY          1
 1373                        		.dbg	line,	"include\constants.c", 289; #define SHOP_PHASE_EXIT         2
 1374                        		.dbg	line,	"include\constants.c", 291; #define TYPE_ITEM_WEAPON_2      0
 1375                        		.dbg	line,	"include\constants.c", 292; #define TYPE_ITEM_WEAPON_3      1
 1376                        		.dbg	line,	"include\constants.c", 293; #define TYPE_ITEM_WEAPON_4      2
 1377                        		.dbg	line,	"include\constants.c", 294; #define TYPE_ITEM_WEAPON_5      3
 1378                        		.dbg	line,	"include\constants.c", 295; #define TYPE_ITEM_KEY           4
 1379                        		.dbg	line,	"include\constants.c", 297; #define TYPE_ITEM_ARMOR_2       5
 1380                        		.dbg	line,	"include\constants.c", 298; #define TYPE_ITEM_ARMOR_3       6
 1381                        		.dbg	line,	"include\constants.c", 299; #define TYPE_ITEM_ARMOR_4       7
 1382                        		.dbg	line,	"include\constants.c", 300; #define TYPE_ITEM_ARMOR_5       8
 1383                        		.dbg	line,	"include\constants.c", 301; #define TYPE_ITEM_POTION        9
 1384                        		.dbg	line,	"main.c", 8; #include "include/variables.c"
 1385                        		.dbg	line,	"include\variables.c", 1; #include "huc.h"
 1386                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
 1387                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
 1388                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
 1389                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
 1390                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
 1391                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
 1392                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
 1393                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
 1394                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
 1395                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
 1396                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
 1397                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1398                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1399                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1400                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
 1401                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
 1402                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
 1403                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
 1404                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
 1405                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
 1406                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
 1407                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
 1408                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
 1409                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
 1410                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
 1411                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
 1412                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
 1413                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
 1414                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
 1415                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
 1416                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
 1417                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
 1418                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
 1419                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
 1420                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
 1421                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
 1422                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
 1423                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
 1424                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
 1425                        		.dbg	line,	"include\variables.c", 2; #include "hucc-scroll.h"
 1426                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 1; #ifndef _hucc_scroll_h
 1427                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 2; #define _hucc_scroll_h
 1428                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 4; /****************************************************************************
 1429                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 5; ; ***************************************************************************
 1430                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 6; ;
 1431                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 7; ; hucc-scroll.h
 1432                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 8; ;
 1433                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 9; ; Routines for a fast split-screen scrolling system.
 1434                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 10; ;
 1435                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 11; ; Copyright John Brandwood 2024.
 1436                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 12; ;
 1437                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1438                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1439                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1440                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 16; ;
 1441                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 17; ; ***************************************************************************
 1442                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 18; ; ***************************************************************************
 1443                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 19; ;
 1444                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 20; ; The maximum number of splits for each screen layer is set in your project's
 1445                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 21; ; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
 1446                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 22; ;
 1447                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 23; ; Your first active split must be defined to start at screen line 0, and then
 1448                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 24; ; the rest of the active splits must be in increasing line order to match the
 1449                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 25; ; way that the PC Engine displays the output image.
 1450                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 26; ;
 1451                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 27; ; You can have disabled splits interleaved with your active splits.
 1452                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 28; ;
 1453                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 29; ; Splits that are normally disabled can be used to create full screen effects
 1454                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 30; ; such as bouncing the screen up and down by adding blank areas at the top or
 1455                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 31; ; bottom of the screen, and then rapidly changing the height of those areas.
 1456                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 32; ;
 1457                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 33; ; ***************************************************************************
 1458                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 34; ; **************************************************************************/
 1459                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 36; // *************
 1460                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 37; // VDC bits for display_flags ...
 1461                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 38; // *************
 1462                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 40; #ifndef BKG_OFF
 1463                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 41; #define BKG_OFF 0x00
 1464                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 42; #endif
 1465                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 44; #ifndef SPR_OFF
 1466                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 45; #define SPR_OFF 0x00
 1467                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 46; #endif
 1468                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 48; #ifndef BKG_ON
 1469                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 49; #define BKG_ON 0x80
 1470                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 50; #endif
 1471                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 52; #ifndef SPR_ON
 1472                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 53; #define SPR_ON 0x40
 1473                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 54; #endif
 1474                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 56; // *************
 1475                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 57; // Functions in hucc-scroll.asm ...
 1476                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 58; // *************
 1477                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 60; #ifdef __HUCC__
 1478                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 62; #asmdef	HUCC_USES_NEW_SCROLL 1
 1479                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 64; extern void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
 1480                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 65; extern void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
 1481                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 67; extern void __fastcall disable_split( unsigned char index<acc> );
 1482                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 68; extern void __fastcall sgx_disable_split( unsigned char index<acc> );
 1483                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 70; extern void __fastcall __macro disable_all_splits( void );
 1484                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 71; extern void __fastcall __macro sgx_disable_all_splits( void );
 1485                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 73; #asm
 1486                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 74; .macro	_disable_all_splits
 1487                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 75; ldy	#HUCC_PCE_SPLITS - 1
 1488                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 76; !loop:		tya
 1489                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 77; call	_disable_split.1
 1490                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 78; dey
 1491                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 79; bpl	!loop-
 1492                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 80; .endm
 1493                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 82; .macro	_sgx_disable_all_splits
 1494                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 83; ldy	#HUCC_SGX_SPLITS - 1
 1495                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 84; !loop:		tya
 1496                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 85; call	_sgx_disable_split.1
 1497                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 86; dey
 1498                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 87; bpl	!loop-
 1499                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 88; .endm
 1500                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 89; #endasm
 1501                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 91; #endif // __HUCC__
 1502                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 93; #endif // _hucc_scroll_h
 1503                        		.dbg	line,	"include\variables.c", 3; #include "hucc-chrmap.h"
 1504                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 1; #ifndef _hucc_chrmap_h
 1505                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 2; #define _hucc_chrmap_h
 1506                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 4; /****************************************************************************
 1507                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 5; ; ***************************************************************************
 1508                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 6; ;
 1509                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 7; ; hucc-chrmap.h
 1510                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 8; ;
 1511                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 9; ; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
 1512                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 10; ;
 1513                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 11; ; Copyright John Brandwood 2025.
 1514                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 12; ;
 1515                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1516                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1517                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1518                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 16; ;
 1519                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 17; ; ***************************************************************************
 1520                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 18; ; ***************************************************************************
 1521                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 19; ;
 1522                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 20; ; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
 1523                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 21; ;
 1524                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 22; ; The maximum total size for a chrmap is 16KBytes, which allows for maps up
 1525                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 23; ; to 256x32 tiles (2048x256 pixels).
 1526                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 24; ;
 1527                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 25; ; ***************************************************************************
 1528                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 26; ; **************************************************************************/
 1529                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 28; // *************
 1530                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 29; // This code extends the blkmap library ...
 1531                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 30; // *************
 1532                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 32; #include "hucc-blkmap.h"
 1533                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 34; // *************
 1534                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 35; // Functions in chrmap.asm ...
 1535                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 36; // *************
 1536                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 38; #ifdef __HUCC__
 1537                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 40; #asmdef	HUCC_USES_CHRMAP 1
 1538                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 42; extern void __fastcall __nop set_chrmap( unsigned char __far *chrmap<vdc_map_bank:vdc_map_addr>, unsigned char tiles_w<vdc_map_line_w> );
 1539                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 44; extern void __fastcall draw_bat( void );
 1540                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 45; extern void __fastcall scroll_bat( void );
 1541                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 47; extern void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1542                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 49; #ifdef _SGX
 1543                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 51; extern void __fastcall __nop sgx_set_chrmap( unsigned char __far *chrmap<sgx_map_bank:sgx_map_addr>, unsigned char tiles_w<sgx_map_line_w> );
 1544                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 53; extern void __fastcall sgx_draw_bat( void );
 1545                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 54; extern void __fastcall sgx_scroll_bat( void );
 1546                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 56; extern void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1547                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 58; #endif
 1548                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 60; #endif // __HUCC__
 1549                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 62; #endif // _hucc_chrmap_h
 1550                        		.dbg	line,	"include\variables.c", 4; #include "hucc-blkmap.h"
 1551                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
 1552                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
 1553                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
 1554                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
 1555                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
 1556                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
 1557                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
 1558                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
 1559                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
 1560                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
 1561                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
 1562                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1563                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1564                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1565                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
 1566                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
 1567                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
 1568                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
 1569                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
 1570                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
 1571                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
 1572                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
 1573                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
 1574                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
 1575                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
 1576                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
 1577                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
 1578                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
 1579                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
 1580                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
 1581                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
 1582                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
 1583                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
 1584                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
 1585                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
 1586                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
 1587                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
 1588                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
 1589                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
 1590                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
 1591                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
 1592                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
 1593                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
 1594                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
 1595                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
 1596                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
 1597                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
 1598                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
 1599                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
 1600                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
 1601                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
 1602                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
 1603                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
 1604                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
 1605                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
 1606                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
 1607                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
 1608                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
 1609                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
 1610                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
 1611                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
 1612                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
 1613                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
 1614                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
 1615                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1616                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 1617                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
 1618                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 86; .macro	_set_blkmap.2
 1619                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 87; stz	vdc_scr_bank
 1620                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 88; .endm
 1621                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 90; .macro	_set_multimap.2
 1622                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 91; lda	vdc_bat_width
 1623                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 92; lsr	a
 1624                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 93; sta	vdc_map_line_w
 1625                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 94; .endm
 1626                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 96; .macro	SCREEN
 1627                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 97; db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
 1628                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 98; db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
 1629                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 99; db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
 1630                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 100; dw	(\4)
 1631                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 101; .endm
 1632                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
 1633                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
 1634                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
 1635                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
 1636                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
 1637                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
 1638                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
 1639                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
 1640                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
 1641                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
 1642                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
 1643                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
 1644                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
 1645                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
 1646                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
 1647                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
 1648                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
 1649                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
 1650                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
 1651                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
 1652                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
 1653                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
 1654                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
 1655                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
 1656                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
 1657                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1658                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 1659                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
 1660                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 144; .macro	_sgx_set_blkmap.2
 1661                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 145; stz	sgx_scr_bank
 1662                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 146; .endm
 1663                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 148; .macro	_sgx_set_multimap.2
 1664                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 149; lda	sgx_bat_width
 1665                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 150; lsr	a
 1666                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 151; sta	sgx_map_line_w
 1667                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 152; .endm
 1668                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
 1669                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
 1670                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
 1671                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
 1672                        		.dbg	line,	"include\variables.c", 13; unsigned char   sequence_id,
 1673                        		.dbg	line,	"include\variables.c", 14; sequence_loaded,
 1674                        		.dbg	line,	"include\variables.c", 16; level_id,
 1675                        		.dbg	line,	"include\variables.c", 18; // PLAYER //
 1676                        		.dbg	line,	"include\variables.c", 19; respawn,
 1677                        		.dbg	line,	"include\variables.c", 20; player_id,
 1678                        		.dbg	line,	"include\variables.c", 21; player_state,
 1679                        		.dbg	line,	"include\variables.c", 22; player_axis,
 1680                        		.dbg	line,	"include\variables.c", 23; player_previous_axis,
 1681                        		.dbg	line,	"include\variables.c", 24; player_counter_anim,
 1682                        		.dbg	line,	"include\variables.c", 25; player_index_jump,
 1683                        		.dbg	line,	"include\variables.c", 26; player_index_fall,
 1684                        		.dbg	line,	"include\variables.c", 27; player_counter_attack,
 1685                        		.dbg	line,	"include\variables.c", 29; player_naked,
 1686                        		.dbg	line,	"include\variables.c", 30; player_attack,
 1687                        		.dbg	line,	"include\variables.c", 32; jump_ladder,
 1688                        		.dbg	line,	"include\variables.c", 33; jump_max_index,
 1689                        		.dbg	line,	"include\variables.c", 35; // ARMOR + WEAPON //
 1690                        		.dbg	line,	"include\variables.c", 36; chain_id,
 1691                        		.dbg	line,	"include\variables.c", 37; weapon_id,
 1692                        		.dbg	line,	"include\variables.c", 38; armor_level,
 1693                        		.dbg	line,	"include\variables.c", 39; weapon_level,
 1694                        		.dbg	line,	"include\variables.c", 41; // HUD //
 1695                        		.dbg	line,	"include\variables.c", 42; life_amount,
 1696                        		.dbg	line,	"include\variables.c", 43; key_amount,
 1697                        		.dbg	line,	"include\variables.c", 44; potion_amount,
 1698                        		.dbg	line,	"include\variables.c", 46; // TIME //
 1699                        		.dbg	line,	"include\variables.c", 47; minutes,
 1700                        		.dbg	line,	"include\variables.c", 48; seconds,
 1701                        		.dbg	line,	"include\variables.c", 49; time_counter,
 1702                        		.dbg	line,	"include\variables.c", 51; minutes_backup,
 1703                        		.dbg	line,	"include\variables.c", 52; seconds_backup,
 1704                        		.dbg	line,	"include\variables.c", 55; // OBJECTS //
 1705                        		.dbg	line,	"include\variables.c", 56; object_start_index,
 1706                        		.dbg	line,	"include\variables.c", 57; level_object_number,
 1707                        		.dbg	line,	"include\variables.c", 58; onscreen_object_number,
 1708                        		.dbg	line,	"include\variables.c", 59; 
 1709                        		.dbg	line,	"include\variables.c", 60; list_object_type[25],
 1710                        		.dbg	line,	"include\variables.c", 61; list_object_state[25],
 1711                        		.dbg	line,	"include\variables.c", 62; list_object_energy[25],
 1712                        		.dbg	line,	"include\variables.c", 63; list_reward_type[25],
 1713                        		.dbg	line,	"include\variables.c", 64; 
 1714                        		.dbg	line,	"include\variables.c", 65; list_onscreen_object[8],
 1715                        		.dbg	line,	"include\variables.c", 66; 
 1716                        		.dbg	line,	"include\variables.c", 67; // CHESTS //
 1717                        		.dbg	line,	"include\variables.c", 68; chest_start_index,
 1718                        		.dbg	line,	"include\variables.c", 69; level_chest_number,
 1719                        		.dbg	line,	"include\variables.c", 70; onscreen_chest_number,
 1720                        		.dbg	line,	"include\variables.c", 71; 
 1721                        		.dbg	line,	"include\variables.c", 72; list_chest_state[8],
 1722                        		.dbg	line,	"include\variables.c", 73; list_onscreen_chest[8],
 1723                        		.dbg	line,	"include\variables.c", 75; // NPC //
 1724                        		.dbg	line,	"include\variables.c", 76; npc_start_index,
 1725                        		.dbg	line,	"include\variables.c", 77; level_npc_number,
 1726                        		.dbg	line,	"include\variables.c", 78; onscreen_npc_number,
 1727                        		.dbg	line,	"include\variables.c", 80; list_npc_type[9],
 1728                        		.dbg	line,	"include\variables.c", 81; list_npc_state[9],
 1729                        		.dbg	line,	"include\variables.c", 82; list_onscreen_npc[9],
 1730                        		.dbg	line,	"include\variables.c", 84; // SHOPS //
 1731                        		.dbg	line,	"include\variables.c", 85; index_x,
 1732                        		.dbg	line,	"include\variables.c", 86; index_y,
 1733                        		.dbg	line,	"include\variables.c", 87; item_index,
 1734                        		.dbg	line,	"include\variables.c", 89; shop_phase,
 1735                        		.dbg	line,	"include\variables.c", 90; shop_counter,
 1736                        		.dbg	line,	"include\variables.c", 91; 
 1737                        		.dbg	line,	"include\variables.c", 92; tilemap_mask[256];
 1738                        		.dbg	line,	"include\variables.c", 97; signed int      player_pos_x,
 1739                        		.dbg	line,	"include\variables.c", 98; player_pos_y,
 1740                        		.dbg	line,	"include\variables.c", 99; camera_max_y_position,
 1741                        		.dbg	line,	"include\variables.c", 101; camera_pos_x_backup,
 1742                        		.dbg	line,	"include\variables.c", 102; camera_pos_y_backup,
 1743                        		.dbg	line,	"include\variables.c", 105; list_object_x_pos[25],
 1744                        		.dbg	line,	"include\variables.c", 106; list_object_y_pos[25],
 1745                        		.dbg	line,	"include\variables.c", 107; list_object_x_pos_ref[25],
 1746                        		.dbg	line,	"include\variables.c", 108; list_object_y_pos_ref[25],
 1747                        		.dbg	line,	"include\variables.c", 111; list_chest_x_pos[8],
 1748                        		.dbg	line,	"include\variables.c", 112; list_chest_y_pos[8],
 1749                        		.dbg	line,	"include\variables.c", 113; list_chest_x_pos_ref[8],
 1750                        		.dbg	line,	"include\variables.c", 114; list_chest_y_pos_ref[8],
 1751                        		.dbg	line,	"include\variables.c", 117; list_npc_x_pos[9],
 1752                        		.dbg	line,	"include\variables.c", 118; list_npc_y_pos[9],
 1753                        		.dbg	line,	"include\variables.c", 119; list_npc_x_pos_ref[9],
 1754                        		.dbg	line,	"include\variables.c", 120; list_npc_y_pos_ref[9];
 1755                        		.dbg	line,	"include\variables.c", 121; 
 1756                        		.dbg	line,	"include\variables.c", 125; int             zenny_amount,
 1757                        		.dbg	line,	"include\variables.c", 126; score,
 1758                        		.dbg	line,	"include\variables.c", 128; shop_prices[10];
 1759                        		.dbg	line,	"include\variables.c", 133; extern unsigned char tileset_LV1_BG_B[];
 1760                        		.dbg	line,	"include\variables.c", 134; extern unsigned char multimap_LV1_BG_B[];
 1761                        		.dbg	line,	"include\variables.c", 136; extern unsigned char tileset_HUD[];
 1762                        		.dbg	line,	"include\variables.c", 137; extern unsigned char multimap_LV1_BG_A[];
 1763                        		.dbg	line,	"include\variables.c", 139; extern unsigned char tileset_SHOP_BG_B[];
 1764                        		.dbg	line,	"include\variables.c", 142; int *ptr_SHOP_ITEM_PRICES;
 1765                        		.dbg	line,	"main.c", 11; #include "include/gfx_BG.c"
 1766                        		.dbg	line,	"include\gfx_BG.c", 1; #include "huc.h"
 1767                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
 1768                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
 1769                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
 1770                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
 1771                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
 1772                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
 1773                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
 1774                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
 1775                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
 1776                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
 1777                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
 1778                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1779                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1780                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1781                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
 1782                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
 1783                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
 1784                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
 1785                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
 1786                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
 1787                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
 1788                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
 1789                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
 1790                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
 1791                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
 1792                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
 1793                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
 1794                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
 1795                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
 1796                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
 1797                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
 1798                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
 1799                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
 1800                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
 1801                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
 1802                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
 1803                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
 1804                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
 1805                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
 1806                        		.dbg	line,	"include\gfx_BG.c", 2; #include "hucc-scroll.h"
 1807                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 1; #ifndef _hucc_scroll_h
 1808                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 2; #define _hucc_scroll_h
 1809                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 4; /****************************************************************************
 1810                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 5; ; ***************************************************************************
 1811                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 6; ;
 1812                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 7; ; hucc-scroll.h
 1813                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 8; ;
 1814                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 9; ; Routines for a fast split-screen scrolling system.
 1815                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 10; ;
 1816                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 11; ; Copyright John Brandwood 2024.
 1817                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 12; ;
 1818                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1819                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1820                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1821                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 16; ;
 1822                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 17; ; ***************************************************************************
 1823                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 18; ; ***************************************************************************
 1824                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 19; ;
 1825                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 20; ; The maximum number of splits for each screen layer is set in your project's
 1826                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 21; ; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
 1827                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 22; ;
 1828                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 23; ; Your first active split must be defined to start at screen line 0, and then
 1829                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 24; ; the rest of the active splits must be in increasing line order to match the
 1830                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 25; ; way that the PC Engine displays the output image.
 1831                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 26; ;
 1832                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 27; ; You can have disabled splits interleaved with your active splits.
 1833                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 28; ;
 1834                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 29; ; Splits that are normally disabled can be used to create full screen effects
 1835                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 30; ; such as bouncing the screen up and down by adding blank areas at the top or
 1836                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 31; ; bottom of the screen, and then rapidly changing the height of those areas.
 1837                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 32; ;
 1838                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 33; ; ***************************************************************************
 1839                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 34; ; **************************************************************************/
 1840                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 36; // *************
 1841                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 37; // VDC bits for display_flags ...
 1842                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 38; // *************
 1843                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 40; #ifndef BKG_OFF
 1844                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 41; #define BKG_OFF 0x00
 1845                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 42; #endif
 1846                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 44; #ifndef SPR_OFF
 1847                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 45; #define SPR_OFF 0x00
 1848                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 46; #endif
 1849                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 48; #ifndef BKG_ON
 1850                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 49; #define BKG_ON 0x80
 1851                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 50; #endif
 1852                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 52; #ifndef SPR_ON
 1853                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 53; #define SPR_ON 0x40
 1854                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 54; #endif
 1855                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 56; // *************
 1856                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 57; // Functions in hucc-scroll.asm ...
 1857                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 58; // *************
 1858                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 60; #ifdef __HUCC__
 1859                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 62; #asmdef	HUCC_USES_NEW_SCROLL 1
 1860                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 64; extern void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
 1861                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 65; extern void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
 1862                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 67; extern void __fastcall disable_split( unsigned char index<acc> );
 1863                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 68; extern void __fastcall sgx_disable_split( unsigned char index<acc> );
 1864                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 70; extern void __fastcall __macro disable_all_splits( void );
 1865                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 71; extern void __fastcall __macro sgx_disable_all_splits( void );
 1866                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 73; #asm
 1867                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 74; .macro	_disable_all_splits
 1868                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 75; ldy	#HUCC_PCE_SPLITS - 1
 1869                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 76; !loop:		tya
 1870                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 77; call	_disable_split.1
 1871                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 78; dey
 1872                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 79; bpl	!loop-
 1873                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 80; .endm
 1874                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 82; .macro	_sgx_disable_all_splits
 1875                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 83; ldy	#HUCC_SGX_SPLITS - 1
 1876                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 84; !loop:		tya
 1877                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 85; call	_sgx_disable_split.1
 1878                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 86; dey
 1879                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 87; bpl	!loop-
 1880                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 88; .endm
 1881                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 89; #endasm
 1882                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 91; #endif // __HUCC__
 1883                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 93; #endif // _hucc_scroll_h
 1884                        		.dbg	line,	"include\gfx_BG.c", 3; #include "hucc-chrmap.h"
 1885                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 1; #ifndef _hucc_chrmap_h
 1886                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 2; #define _hucc_chrmap_h
 1887                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 4; /****************************************************************************
 1888                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 5; ; ***************************************************************************
 1889                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 6; ;
 1890                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 7; ; hucc-chrmap.h
 1891                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 8; ;
 1892                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 9; ; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
 1893                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 10; ;
 1894                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 11; ; Copyright John Brandwood 2025.
 1895                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 12; ;
 1896                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1897                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1898                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1899                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 16; ;
 1900                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 17; ; ***************************************************************************
 1901                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 18; ; ***************************************************************************
 1902                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 19; ;
 1903                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 20; ; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
 1904                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 21; ;
 1905                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 22; ; The maximum total size for a chrmap is 16KBytes, which allows for maps up
 1906                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 23; ; to 256x32 tiles (2048x256 pixels).
 1907                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 24; ;
 1908                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 25; ; ***************************************************************************
 1909                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 26; ; **************************************************************************/
 1910                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 28; // *************
 1911                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 29; // This code extends the blkmap library ...
 1912                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 30; // *************
 1913                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 32; #include "hucc-blkmap.h"
 1914                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 34; // *************
 1915                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 35; // Functions in chrmap.asm ...
 1916                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 36; // *************
 1917                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 38; #ifdef __HUCC__
 1918                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 40; #asmdef	HUCC_USES_CHRMAP 1
 1919                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 42; extern void __fastcall __nop set_chrmap( unsigned char __far *chrmap<vdc_map_bank:vdc_map_addr>, unsigned char tiles_w<vdc_map_line_w> );
 1920                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 44; extern void __fastcall draw_bat( void );
 1921                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 45; extern void __fastcall scroll_bat( void );
 1922                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 47; extern void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1923                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 49; #ifdef _SGX
 1924                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 51; extern void __fastcall __nop sgx_set_chrmap( unsigned char __far *chrmap<sgx_map_bank:sgx_map_addr>, unsigned char tiles_w<sgx_map_line_w> );
 1925                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 53; extern void __fastcall sgx_draw_bat( void );
 1926                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 54; extern void __fastcall sgx_scroll_bat( void );
 1927                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 56; extern void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1928                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 58; #endif
 1929                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 60; #endif // __HUCC__
 1930                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 62; #endif // _hucc_chrmap_h
 1931                        		.dbg	line,	"include\gfx_BG.c", 4; #include "hucc-blkmap.h"
 1932                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
 1933                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
 1934                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
 1935                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
 1936                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
 1937                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
 1938                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
 1939                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
 1940                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
 1941                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
 1942                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
 1943                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1944                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1945                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1946                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
 1947                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
 1948                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
 1949                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
 1950                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
 1951                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
 1952                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
 1953                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
 1954                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
 1955                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
 1956                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
 1957                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
 1958                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
 1959                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
 1960                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
 1961                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
 1962                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
 1963                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
 1964                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
 1965                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
 1966                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
 1967                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
 1968                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
 1969                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
 1970                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
 1971                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
 1972                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
 1973                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
 1974                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
 1975                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
 1976                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
 1977                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
 1978                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
 1979                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
 1980                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
 1981                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
 1982                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
 1983                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
 1984                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
 1985                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
 1986                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
 1987                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
 1988                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
 1989                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
 1990                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
 1991                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
 1992                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
 1993                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
 1994                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
 1995                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
 1996                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1997                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 1998                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
 1999                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 86; .macro	_set_blkmap.2
 2000                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 87; stz	vdc_scr_bank
 2001                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 88; .endm
 2002                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 90; .macro	_set_multimap.2
 2003                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 91; lda	vdc_bat_width
 2004                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 92; lsr	a
 2005                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 93; sta	vdc_map_line_w
 2006                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 94; .endm
 2007                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 96; .macro	SCREEN
 2008                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 97; db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
 2009                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 98; db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
 2010                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 99; db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
 2011                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 100; dw	(\4)
 2012                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 101; .endm
 2013                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
 2014                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
 2015                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
 2016                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
 2017                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
 2018                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
 2019                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
 2020                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
 2021                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
 2022                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
 2023                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
 2024                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
 2025                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
 2026                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
 2027                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
 2028                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
 2029                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
 2030                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
 2031                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
 2032                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
 2033                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
 2034                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
 2035                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
 2036                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
 2037                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
 2038                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 2039                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 2040                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
 2041                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 144; .macro	_sgx_set_blkmap.2
 2042                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 145; stz	sgx_scr_bank
 2043                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 146; .endm
 2044                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 148; .macro	_sgx_set_multimap.2
 2045                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 149; lda	sgx_bat_width
 2046                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 150; lsr	a
 2047                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 151; sta	sgx_map_line_w
 2048                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 152; .endm
 2049                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
 2050                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
 2051                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
 2052                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
 2053                        		.dbg	line,	"include\gfx_BG.c", 13; #incchr(tileset_FONT,"res/maps/tiles_FONT.png");
 2054               6000     		.data
 2055    03:6000             	_tileset_FONT: 	.incchr		"res/maps/tiles_FONT.png"
 2056               E309     		.code
 2057                        		.dbg	line,	"include\gfx_BG.c", 14; //#incchr(tileset_NUMBERS_FONT,"res/maps/tiles_NUMBERS_FONT.png");
 2058                        		.dbg	line,	"include\gfx_BG.c", 17; //**************************************************************************************//
 2059                        		.dbg	line,	"include\gfx_BG.c", 18; //                                                                                      //
 2060                        		.dbg	line,	"include\gfx_BG.c", 19; //                                       LEVEL 1                                        //
 2061                        		.dbg	line,	"include\gfx_BG.c", 20; //                                                                                      //
 2062                        		.dbg	line,	"include\gfx_BG.c", 21; //**************************************************************************************//
 2063                        		.dbg	line,	"include\gfx_BG.c", 23; #incchr(tileset_LV1_WALL,"res/maps/tiles_LV1_WALL.png", 4 , 4);
 2064               6C00     		.data
 2065    03:6C00             	_tileset_LV1_WALL: 	.incchr		"res/maps/tiles_LV1_WALL.png", 4, 4
 2066               E309     		.code
 2067                        		.dbg	line,	"include\gfx_BG.c", 24; #incchr(tileset_LV1_DOOR_OPEN,"res/maps/tiles_LV1_DOOR_OPEN.png", 4 , 6);
 2068               6E00     		.data
 2069    03:6E00             	_tileset_LV1_DOOR_OPEN: 	.incchr		"res/maps/tiles_LV1_DOOR_OPEN.png", 4, 6
 2070               E309     		.code
 2071                        		.dbg	line,	"include\gfx_BG.c", 25; #incchr(tileset_LV1_DOOR_CLOSED,"res/maps/tiles_LV1_DOOR_CLOSED.png", 4 , 6);
 2072               7100     		.data
 2073    03:7100             	_tileset_LV1_DOOR_CLOSED: 	.incchr		"res/maps/tiles_LV1_DOOR_CLOSED.png", 4, 6
 2074               E309     		.code
 2075                        		.dbg	line,	"include\gfx_BG.c", 27; #incchr(tileset_LIFE_RED,"res/maps/tileset_LIFE_RED.png", 2 , 1);
 2076               7400     		.data
 2077    03:7400             	_tileset_LIFE_RED: 	.incchr		"res/maps/tileset_LIFE_RED.png", 2, 1
 2078               E309     		.code
 2079                        		.dbg	line,	"include\gfx_BG.c", 28; #incchr(tileset_LIFE_ORANGE,"res/maps/tileset_LIFE_ORANGE.png", 2 , 1);
 2080               7440     		.data
 2081    03:7440             	_tileset_LIFE_ORANGE: 	.incchr		"res/maps/tileset_LIFE_ORANGE.png", 2, 1
 2082               E309     		.code
 2083                        		.dbg	line,	"include\gfx_BG.c", 29; #incchr(tileset_LIFE_YELLOW,"res/maps/tileset_LIFE_YELLOW.png", 2 , 1);
 2084               7480     		.data
 2085    03:7480             	_tileset_LIFE_YELLOW: 	.incchr		"res/maps/tileset_LIFE_YELLOW.png", 2, 1
 2086               E309     		.code
 2087                        		.dbg	line,	"include\gfx_BG.c", 30; #incchr(tileset_LIFE_EMPTY,"res/maps/tileset_LIFE_EMPTY.png", 2 , 1);
 2088               74C0     		.data
 2089    03:74C0             	_tileset_LIFE_EMPTY: 	.incchr		"res/maps/tileset_LIFE_EMPTY.png", 2, 1
 2090               E309     		.code
 2091                        		.dbg	line,	"include\gfx_BG.c", 32; #incchr(tileset_ARMOR_1,"res/maps/tileset_ARMOR_1.png", 2 , 2);
 2092               7500     		.data
 2093    03:7500             	_tileset_ARMOR_1: 	.incchr		"res/maps/tileset_ARMOR_1.png", 2, 2
 2094               E309     		.code
 2095                        		.dbg	line,	"include\gfx_BG.c", 33; #incchr(tileset_ARMOR_2,"res/maps/tileset_ARMOR_2.png", 2 , 2);
 2096               7580     		.data
 2097    03:7580             	_tileset_ARMOR_2: 	.incchr		"res/maps/tileset_ARMOR_2.png", 2, 2
 2098               E309     		.code
 2099                        		.dbg	line,	"include\gfx_BG.c", 34; #incchr(tileset_ARMOR_4,"res/maps/tileset_ARMOR_4.png", 2 , 2);
 2100               7600     		.data
 2101    03:7600             	_tileset_ARMOR_4: 	.incchr		"res/maps/tileset_ARMOR_4.png", 2, 2
 2102               E309     		.code
 2103                        		.dbg	line,	"include\gfx_BG.c", 35; #incchr(tileset_ARMOR_8,"res/maps/tileset_ARMOR_8.png", 2 , 2);
 2104               7680     		.data
 2105    03:7680             	_tileset_ARMOR_8: 	.incchr		"res/maps/tileset_ARMOR_8.png", 2, 2
 2106               E309     		.code
 2107                        		.dbg	line,	"include\gfx_BG.c", 37; #incchr(tileset_WEAPON_1,"res/maps/tileset_WEAPON_1.png", 2 , 2);
 2108               7700     		.data
 2109    03:7700             	_tileset_WEAPON_1: 	.incchr		"res/maps/tileset_WEAPON_1.png", 2, 2
 2110               E309     		.code
 2111                        		.dbg	line,	"include\gfx_BG.c", 38; #incchr(tileset_WEAPON_2,"res/maps/tileset_WEAPON_2.png", 2 , 2);
 2112               7780     		.data
 2113    03:7780             	_tileset_WEAPON_2: 	.incchr		"res/maps/tileset_WEAPON_2.png", 2, 2
 2114               E309     		.code
 2115                        		.dbg	line,	"include\gfx_BG.c", 39; #incchr(tileset_WEAPON_4,"res/maps/tileset_WEAPON_4.png", 2 , 2);
 2116               7800     		.data
 2117    03:7800             	_tileset_WEAPON_4: 	.incchr		"res/maps/tileset_WEAPON_4.png", 2, 2
 2118               E309     		.code
 2119                        		.dbg	line,	"include\gfx_BG.c", 40; #incchr(tileset_WEAPON_5,"res/maps/tileset_WEAPON_5.png", 2 , 2);
 2120               7880     		.data
 2121    03:7880             	_tileset_WEAPON_5: 	.incchr		"res/maps/tileset_WEAPON_5.png", 2, 2
 2122               E309     		.code
 2123                        		.dbg	line,	"include\gfx_BG.c", 41; #incchr(tileset_WEAPON_8,"res/maps/tileset_WEAPON_8.png", 2 , 2);
 2124               7900     		.data
 2125    03:7900             	_tileset_WEAPON_8: 	.incchr		"res/maps/tileset_WEAPON_8.png", 2, 2
 2126               E309     		.code
 2127                        		.dbg	line,	"include\gfx_BG.c", 44; //--------------------------------------------------------------------------------------//
 2128                        		.dbg	line,	"include\gfx_BG.c", 45; //                                        VDC 2                                         //
 2129                        		.dbg	line,	"include\gfx_BG.c", 46; //--------------------------------------------------------------------------------------//
 2130                        		.dbg	line,	"include\gfx_BG.c", 48; #asm
 2131                        		.dbg	clear
 2132               0001     	OPTIMIZE	=	1
 2133               7980     			.data
 2134                        	; EXTRACT TILESET
 2135                        	;----------------
 2136    03:7980             	_tileset_LV1_BG_B:  incchr	"res/maps/template_LV1_WALL.png"
 2137    03:7B80             			incchr	"res/maps/template_LV1_DOOR.png"
 2138    03:7E80             			incchr	"res/maps/tilemap_LV1_BG_B.png", OPTIMIZE
 2139                        	; EXTRACT BLOCKS
 2140                        	;--------------
 2141    07:7000             	blocks_LV1_BG_B1:	incblk	"res/maps/tilemap_LV1_BG_B.png" , 0x1000 ,    0 ,   0 ,  64 , 32 , _tileset_LV1_BG_B ; // 96x16 = 1536 | 32x16 =  512
 2142    07:7800             	blocks_LV1_BG_B2:	incblk	"res/maps/tilemap_LV1_BG_B.png" , 0x1000 , 1024 ,   0 ,  96 , 32 , _tileset_LV1_BG_B ; // 64x16 = 1024 | 32x16 =  512
 2143    08:6000             	blocks_LV1_BG_B3:	incblk	"res/maps/tilemap_LV1_BG_B.png" , 0x1000 ,    0 , 512 ,  64 , 32 , _tileset_LV1_BG_B ; // 96x16 = 1536 | 16x16 =  256
 2144    08:6800             	blocks_LV1_BG_B4:	incblk	"res/maps/tilemap_LV1_BG_B.png" , 0x1000 , 1024 , 512 ,  96 , 32 , _tileset_LV1_BG_B ; // 64x16 = 1024 | 16x16 =  256
 2145                        	; EXTRACT MAPS
 2146                        	;------------
 2147               7000     			align	256
 2148    08:7000             	MAP_LV1_BG_B1:		incmap	"res/maps/tilemap_LV1_BG_B.png",    0 ,   0 ,  64 , 32 , blocks_LV1_BG_B1 ; // 96x16 = 1536 | 32x16 =  512
 2149               7800     			align	256
 2150    08:7800             	MAP_LV1_BG_B2:		incmap	"res/maps/tilemap_LV1_BG_B.png", 1024 ,   0 ,  96 , 32 , blocks_LV1_BG_B2 ; // 64x16 = 1024 | 32x16 =  512
 2151               6400     			align	256
 2152    09:6400             	MAP_LV1_BG_B3:		incmap	"res/maps/tilemap_LV1_BG_B.png",    0 , 512 ,  64 , 32 , blocks_LV1_BG_B3 ; // 96x16 = 1536 | 16x16 =  256
 2153               6C00     			align	256
 2154    09:6C00             	MAP_LV1_BG_B4:		incmap	"res/maps/tilemap_LV1_BG_B.png", 1024 , 512 ,  96 , 32 , blocks_LV1_BG_B4 ; // 64x16 = 1024 | 16x16 =  256
 2155                        	; MASK (EMPTY)
 2156                        	;----------------
 2157    09:7800  00 00 00 00	dummy_tbl:	ds	256
         09:7804  00 00 00 00 
         09:7808  00 00 00 00 
         09:780C  00 00 00 00 
         09:7810  00 00 00 00 
         09:7814  00 00 00 00 
         09:7818  00 00 00 00 
         09:781C  00 00 00 00 
         09:7820  00 00 00 00 
         09:7824  00 00 00 00 
         09:7828  00 00 00 00 
         09:782C  00 00 00 00 
         09:7830  00 00 00 00 
         09:7834  00 00 00 00 
         09:7838  00 00 00 00 
         09:783C  00 00 00 00 
         09:7840  00 00 00 00 
         09:7844  00 00 00 00 
         09:7848  00 00 00 00 
         09:784C  00 00 00 00 
         09:7850  00 00 00 00 
         09:7854  00 00 00 00 
         09:7858  00 00 00 00 
         09:785C  00 00 00 00 
         09:7860  00 00 00 00 
         09:7864  00 00 00 00 
         09:7868  00 00 00 00 
         09:786C  00 00 00 00 
         09:7870  00 00 00 00 
         09:7874  00 00 00 00 
         09:7878  00 00 00 00 
         09:787C  00 00 00 00 
         09:7880  00 00 00 00 
         09:7884  00 00 00 00 
         09:7888  00 00 00 00 
         09:788C  00 00 00 00 
         09:7890  00 00 00 00 
         09:7894  00 00 00 00 
         09:7898  00 00 00 00 
         09:789C  00 00 00 00 
         09:78A0  00 00 00 00 
         09:78A4  00 00 00 00 
         09:78A8  00 00 00 00 
         09:78AC  00 00 00 00 
         09:78B0  00 00 00 00 
         09:78B4  00 00 00 00 
         09:78B8  00 00 00 00 
         09:78BC  00 00 00 00 
         09:78C0  00 00 00 00 
         09:78C4  00 00 00 00 
         09:78C8  00 00 00 00 
         09:78CC  00 00 00 00 
         09:78D0  00 00 00 00 
         09:78D4  00 00 00 00 
         09:78D8  00 00 00 00 
         09:78DC  00 00 00 00 
         09:78E0  00 00 00 00 
         09:78E4  00 00 00 00 
         09:78E8  00 00 00 00 
         09:78EC  00 00 00 00 
         09:78F0  00 00 00 00 
         09:78F4  00 00 00 00 
         09:78F8  00 00 00 00 
         09:78FC  00 00 00 00 
 2158                        	; SWIZZLE MAPS
 2159                        	;-------------
 2160    09:7900             	swizzle	MAP_LV1_BG_B1,  32, 16 ;
 2161    09:7900             	swizzle	MAP_LV1_BG_B2,  32, 16 ;
 2162    09:7900             	swizzle	MAP_LV1_BG_B3,  32, 16 ;
 2163    09:7900             	swizzle	MAP_LV1_BG_B4,  32, 16 ;
 2164                        	; BUILD MULTIMAP
 2165                        	;---------------
 2166    09:7900             	_multimap_LV1_BG_B:
 2167                        			; 1st line of 5 screens (512x256)
 2168                        			SCREEN MAP_LV1_BG_B1 + 0x0000, blocks_LV1_BG_B1, dummy_tbl, 0
         09:7900  70 08      			db	(((MAP_LV1_BG_B1 + 0x0000) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B1 + 0x0000)
         09:7902  50 07      			db	(((blocks_LV1_BG_B1) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B1)
         09:7904  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:7906  00 00      			dw	(0)
 2169                        			SCREEN MAP_LV1_BG_B1 + 0x0200, blocks_LV1_BG_B1, dummy_tbl, 0
         09:7908  72 08      			db	(((MAP_LV1_BG_B1 + 0x0200) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B1 + 0x0200)
         09:790A  50 07      			db	(((blocks_LV1_BG_B1) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B1)
         09:790C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:790E  00 00      			dw	(0)
 2170                        			SCREEN MAP_LV1_BG_B2 + 0x0000, blocks_LV1_BG_B2, dummy_tbl, 0
         09:7910  78 08      			db	(((MAP_LV1_BG_B2 + 0x0000) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B2 + 0x0000)
         09:7912  58 07      			db	(((blocks_LV1_BG_B2) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B2)
         09:7914  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:7916  00 00      			dw	(0)
 2171                        			SCREEN MAP_LV1_BG_B2 + 0x0200, blocks_LV1_BG_B2, dummy_tbl, 0
         09:7918  7A 08      			db	(((MAP_LV1_BG_B2 + 0x0200) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B2 + 0x0200)
         09:791A  58 07      			db	(((blocks_LV1_BG_B2) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B2)
         09:791C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:791E  00 00      			dw	(0)
 2172                        			SCREEN MAP_LV1_BG_B2 + 0x0400, blocks_LV1_BG_B2, dummy_tbl, 0
         09:7920  7C 08      			db	(((MAP_LV1_BG_B2 + 0x0400) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B2 + 0x0400)
         09:7922  58 07      			db	(((blocks_LV1_BG_B2) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B2)
         09:7924  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:7926  00 00      			dw	(0)
 2173                        			; 2nd line of 5 screens (512x256)
 2174                        			SCREEN MAP_LV1_BG_B1 + 0x0400, blocks_LV1_BG_B1, dummy_tbl, 0
         09:7928  74 08      			db	(((MAP_LV1_BG_B1 + 0x0400) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B1 + 0x0400)
         09:792A  50 07      			db	(((blocks_LV1_BG_B1) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B1)
         09:792C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:792E  00 00      			dw	(0)
 2175                        			SCREEN MAP_LV1_BG_B1 + 0x0600, blocks_LV1_BG_B1, dummy_tbl, 0
         09:7930  76 08      			db	(((MAP_LV1_BG_B1 + 0x0600) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B1 + 0x0600)
         09:7932  50 07      			db	(((blocks_LV1_BG_B1) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B1)
         09:7934  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:7936  00 00      			dw	(0)
 2176                        			SCREEN MAP_LV1_BG_B2 + 0x0600, blocks_LV1_BG_B2, dummy_tbl, 0
         09:7938  7E 08      			db	(((MAP_LV1_BG_B2 + 0x0600) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B2 + 0x0600)
         09:793A  58 07      			db	(((blocks_LV1_BG_B2) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B2)
         09:793C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:793E  00 00      			dw	(0)
 2177                        			SCREEN MAP_LV1_BG_B2 + 0x0800, blocks_LV1_BG_B2, dummy_tbl, 0
         09:7940  60 09      			db	(((MAP_LV1_BG_B2 + 0x0800) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B2 + 0x0800)
         09:7942  58 07      			db	(((blocks_LV1_BG_B2) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B2)
         09:7944  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:7946  00 00      			dw	(0)
 2178                        			SCREEN MAP_LV1_BG_B2 + 0x0A00, blocks_LV1_BG_B2, dummy_tbl, 0
         09:7948  62 09      			db	(((MAP_LV1_BG_B2 + 0x0A00) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B2 + 0x0A00)
         09:794A  58 07      			db	(((blocks_LV1_BG_B2) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B2)
         09:794C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:794E  00 00      			dw	(0)
 2179                        			; 3rd line of 5 screens (512x256)
 2180                        			SCREEN MAP_LV1_BG_B3 + 0x0000, blocks_LV1_BG_B3, dummy_tbl, 0
         09:7950  64 09      			db	(((MAP_LV1_BG_B3 + 0x0000) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B3 + 0x0000)
         09:7952  40 08      			db	(((blocks_LV1_BG_B3) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B3)
         09:7954  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:7956  00 00      			dw	(0)
 2181                        			SCREEN MAP_LV1_BG_B3 + 0x0200, blocks_LV1_BG_B3, dummy_tbl, 0
         09:7958  66 09      			db	(((MAP_LV1_BG_B3 + 0x0200) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B3 + 0x0200)
         09:795A  40 08      			db	(((blocks_LV1_BG_B3) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B3)
         09:795C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:795E  00 00      			dw	(0)
 2182                        			SCREEN MAP_LV1_BG_B4 + 0x0000, blocks_LV1_BG_B4, dummy_tbl, 0
         09:7960  6C 09      			db	(((MAP_LV1_BG_B4 + 0x0000) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B4 + 0x0000)
         09:7962  48 08      			db	(((blocks_LV1_BG_B4) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B4)
         09:7964  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:7966  00 00      			dw	(0)
 2183                        			SCREEN MAP_LV1_BG_B4 + 0x0200, blocks_LV1_BG_B4, dummy_tbl, 0
         09:7968  6E 09      			db	(((MAP_LV1_BG_B4 + 0x0200) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B4 + 0x0200)
         09:796A  48 08      			db	(((blocks_LV1_BG_B4) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B4)
         09:796C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:796E  00 00      			dw	(0)
 2184                        			SCREEN MAP_LV1_BG_B4 + 0x0400, blocks_LV1_BG_B4, dummy_tbl, 0
         09:7970  70 09      			db	(((MAP_LV1_BG_B4 + 0x0400) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B4 + 0x0400)
         09:7972  48 08      			db	(((blocks_LV1_BG_B4) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B4)
         09:7974  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:7976  00 00      			dw	(0)
 2185                        			; 4th line of 5 screens (512x256)
 2186                        			SCREEN MAP_LV1_BG_B3 + 0x0400, blocks_LV1_BG_B3, dummy_tbl, 0
         09:7978  68 09      			db	(((MAP_LV1_BG_B3 + 0x0400) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B3 + 0x0400)
         09:797A  40 08      			db	(((blocks_LV1_BG_B3) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B3)
         09:797C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:797E  00 00      			dw	(0)
 2187                        			SCREEN MAP_LV1_BG_B3 + 0x0600, blocks_LV1_BG_B3, dummy_tbl, 0
         09:7980  6A 09      			db	(((MAP_LV1_BG_B3 + 0x0600) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B3 + 0x0600)
         09:7982  40 08      			db	(((blocks_LV1_BG_B3) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B3)
         09:7984  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:7986  00 00      			dw	(0)
 2188                        			SCREEN MAP_LV1_BG_B4 + 0x0600, blocks_LV1_BG_B4, dummy_tbl, 0
         09:7988  72 09      			db	(((MAP_LV1_BG_B4 + 0x0600) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B4 + 0x0600)
         09:798A  48 08      			db	(((blocks_LV1_BG_B4) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B4)
         09:798C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:798E  00 00      			dw	(0)
 2189                        			SCREEN MAP_LV1_BG_B4 + 0x0800, blocks_LV1_BG_B4, dummy_tbl, 0
         09:7990  74 09      			db	(((MAP_LV1_BG_B4 + 0x0800) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B4 + 0x0800)
         09:7992  48 08      			db	(((blocks_LV1_BG_B4) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B4)
         09:7994  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:7996  00 00      			dw	(0)
 2190                        			SCREEN MAP_LV1_BG_B4 + 0x0A00, blocks_LV1_BG_B4, dummy_tbl, 0
         09:7998  76 09      			db	(((MAP_LV1_BG_B4 + 0x0A00) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B4 + 0x0A00)
         09:799A  48 08      			db	(((blocks_LV1_BG_B4) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B4)
         09:799C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:799E  00 00      			dw	(0)
 2191                        	;//--------------------------------------------------------------------------------------//
 2192                        	;//                                        VDC 1                                         //
 2193                        	;//--------------------------------------------------------------------------------------//
 2194                        	; EXTRACT TILESET
 2195                        	;----------------
 2196    09:79A0             	_tileset_HUD:	incchr	"res/maps/template_LIFEBAR_1.png"
 2197    09:79E0             			incchr	"res/maps/template_LIFEBAR_2.png"
 2198    09:7A20             			incchr	"res/maps/template_LIFEBAR_3.png"
 2199    09:7A60             			incchr	"res/maps/template_LIFEBAR_4.png"
 2200    09:7AA0             			incchr	"res/maps/template_LIFEBAR_5.png"
 2201    09:7AE0             			incchr	"res/maps/tileset_WEAPON_1.png"
 2202    09:7B60             			incchr	"res/maps/tileset_ARMOR_2.png"
 2203    09:7BE0             			incchr	"res/maps/tilemap_HUD.png", OPTIMIZE
 2204                        	; EXTRACT BLOCKS
 2205                        	;--------------
 2206    0A:6000             	blocks_HUD1:	incblk	"res/maps/tilemap_HUD.png" , 0x1000 ,    0 ,   0 , 128 , 64 , _tileset_HUD ; // 128x16 = 2048 | 64x16 = 1024
 2207    0A:6800             	blocks_HUD2:	incblk	"res/maps/tilemap_HUD.png" , 0x1000 , 2048 ,   0 ,  32 , 64 , _tileset_HUD ; //  32x16 =  512 | 64x16 = 1024
 2208                        	; EXTRACT MAPS
 2209                        	;------------
 2210               7000     			align	256
 2211    0A:7000             	MAP_HUD1:		incmap	"res/maps/tilemap_HUD.png",    0 ,   0 , 128 , 64 , blocks_HUD1 ; // 128x16 = 2048 | 64x16 = 1024
 2212    0B:7000             			flagmap "res/maps/collision_LV1.png",       0 ,   0 , 128 , 64 , MAP_HUD1
 2213               7000     			align	256
 2214    0B:7000             	MAP_HUD2:		incmap	"res/maps/tilemap_HUD.png", 2048 ,   0 ,  32 , 64 , blocks_HUD2 ; //  32x16 =  512 | 64x16 = 1024
 2215    0B:7800             			flagmap "res/maps/collision_LV1.png",    2048 ,   0 ,  32 , 64 , MAP_HUD2
 2216                        	; SWIZZLE MAPS
 2217                        	;-------------
 2218    0B:7800             	swizzle	MAP_HUD1,  32, 16 ;
 2219    0B:7800             	swizzle	MAP_HUD2,  32, 16 ;
 2220                        	; BUILD MULTIMAP
 2221                        	;---------------
 2222    0B:7800             	_multimap_LV1_BG_A:
 2223                        			; 1st line of 5 screens (512x256)
 2224                        			SCREEN MAP_HUD1 + 0x0000, blocks_HUD1, dummy_tbl, 0
         0B:7800  70 0A      			db	(((MAP_HUD1 + 0x0000) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0000)
         0B:7802  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:7804  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:7806  00 00      			dw	(0)
 2225                        			SCREEN MAP_HUD1 + 0x0200, blocks_HUD1, dummy_tbl, 0
         0B:7808  72 0A      			db	(((MAP_HUD1 + 0x0200) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0200)
         0B:780A  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:780C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:780E  00 00      			dw	(0)
 2226                        			SCREEN MAP_HUD1 + 0x0400, blocks_HUD1, dummy_tbl, 0
         0B:7810  74 0A      			db	(((MAP_HUD1 + 0x0400) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0400)
         0B:7812  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:7814  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:7816  00 00      			dw	(0)
 2227                        			SCREEN MAP_HUD1 + 0x0600, blocks_HUD1, dummy_tbl, 0
         0B:7818  76 0A      			db	(((MAP_HUD1 + 0x0600) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0600)
         0B:781A  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:781C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:781E  00 00      			dw	(0)
 2228                        			SCREEN MAP_HUD2 + 0x0000, blocks_HUD2, dummy_tbl, 0
         0B:7820  70 0B      			db	(((MAP_HUD2 + 0x0000) & $1FFF) | $6000) >> 8, bank(MAP_HUD2 + 0x0000)
         0B:7822  48 0A      			db	(((blocks_HUD2) & $1FFF) | $4000) >> 8, bank(blocks_HUD2)
         0B:7824  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:7826  00 00      			dw	(0)
 2229                        			; 2nd line of 5 screens (512x256)
 2230                        			SCREEN MAP_HUD1 + 0x0800, blocks_HUD1, dummy_tbl, 0
         0B:7828  78 0A      			db	(((MAP_HUD1 + 0x0800) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0800)
         0B:782A  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:782C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:782E  00 00      			dw	(0)
 2231                        			SCREEN MAP_HUD1 + 0x0A00, blocks_HUD1, dummy_tbl, 0
         0B:7830  7A 0A      			db	(((MAP_HUD1 + 0x0A00) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0A00)
         0B:7832  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:7834  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:7836  00 00      			dw	(0)
 2232                        			SCREEN MAP_HUD1 + 0x0C00, blocks_HUD1, dummy_tbl, 0
         0B:7838  7C 0A      			db	(((MAP_HUD1 + 0x0C00) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0C00)
         0B:783A  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:783C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:783E  00 00      			dw	(0)
 2233                        			SCREEN MAP_HUD1 + 0x0E00, blocks_HUD1, dummy_tbl, 0
         0B:7840  7E 0A      			db	(((MAP_HUD1 + 0x0E00) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0E00)
         0B:7842  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:7844  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:7846  00 00      			dw	(0)
 2234                        			SCREEN MAP_HUD2 + 0x0200, blocks_HUD2, dummy_tbl, 0
         0B:7848  72 0B      			db	(((MAP_HUD2 + 0x0200) & $1FFF) | $6000) >> 8, bank(MAP_HUD2 + 0x0200)
         0B:784A  48 0A      			db	(((blocks_HUD2) & $1FFF) | $4000) >> 8, bank(blocks_HUD2)
         0B:784C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:784E  00 00      			dw	(0)
 2235                        			; 3rd line of 5 screens (512x256)
 2236                        			SCREEN MAP_HUD1 + 0x1000, blocks_HUD1, dummy_tbl, 0
         0B:7850  60 0B      			db	(((MAP_HUD1 + 0x1000) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1000)
         0B:7852  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:7854  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:7856  00 00      			dw	(0)
 2237                        			SCREEN MAP_HUD1 + 0x1200, blocks_HUD1, dummy_tbl, 0
         0B:7858  62 0B      			db	(((MAP_HUD1 + 0x1200) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1200)
         0B:785A  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:785C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:785E  00 00      			dw	(0)
 2238                        			SCREEN MAP_HUD1 + 0x1400, blocks_HUD1, dummy_tbl, 0
         0B:7860  64 0B      			db	(((MAP_HUD1 + 0x1400) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1400)
         0B:7862  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:7864  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:7866  00 00      			dw	(0)
 2239                        			SCREEN MAP_HUD1 + 0x1600, blocks_HUD1, dummy_tbl, 0
         0B:7868  66 0B      			db	(((MAP_HUD1 + 0x1600) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1600)
         0B:786A  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:786C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:786E  00 00      			dw	(0)
 2240                        			SCREEN MAP_HUD2 + 0x0400, blocks_HUD2, dummy_tbl, 0
         0B:7870  74 0B      			db	(((MAP_HUD2 + 0x0400) & $1FFF) | $6000) >> 8, bank(MAP_HUD2 + 0x0400)
         0B:7872  48 0A      			db	(((blocks_HUD2) & $1FFF) | $4000) >> 8, bank(blocks_HUD2)
         0B:7874  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:7876  00 00      			dw	(0)
 2241                        			; 4th line of 5 screens (512x256)
 2242                        			SCREEN MAP_HUD1 + 0x1800, blocks_HUD1, dummy_tbl, 0
         0B:7878  68 0B      			db	(((MAP_HUD1 + 0x1800) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1800)
         0B:787A  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:787C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:787E  00 00      			dw	(0)
 2243                        			SCREEN MAP_HUD1 + 0x1A00, blocks_HUD1, dummy_tbl, 0
         0B:7880  6A 0B      			db	(((MAP_HUD1 + 0x1A00) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1A00)
         0B:7882  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:7884  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:7886  00 00      			dw	(0)
 2244                        			SCREEN MAP_HUD1 + 0x1C00, blocks_HUD1, dummy_tbl, 0
         0B:7888  6C 0B      			db	(((MAP_HUD1 + 0x1C00) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1C00)
         0B:788A  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:788C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:788E  00 00      			dw	(0)
 2245                        			SCREEN MAP_HUD1 + 0x1E00, blocks_HUD1, dummy_tbl, 0
         0B:7890  6E 0B      			db	(((MAP_HUD1 + 0x1E00) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1E00)
         0B:7892  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:7894  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:7896  00 00      			dw	(0)
 2246                        			SCREEN MAP_HUD2 + 0x0600, blocks_HUD2, dummy_tbl, 0
         0B:7898  76 0B      			db	(((MAP_HUD2 + 0x0600) & $1FFF) | $6000) >> 8, bank(MAP_HUD2 + 0x0600)
         0B:789A  48 0A      			db	(((blocks_HUD2) & $1FFF) | $4000) >> 8, bank(blocks_HUD2)
         0B:789C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:789E  00 00      			dw	(0)
 2247               E309     			.code
 2248                        	
 2249                        		.dbg	line,	"include\gfx_BG.c", 208; #endasm
 2250                        		.dbg	line,	"include\gfx_BG.c", 212; //--------------------------------------------------------------------------------------//
 2251                        		.dbg	line,	"include\gfx_BG.c", 213; //                                   EXTRACT PALETTES                                   //
 2252                        		.dbg	line,	"include\gfx_BG.c", 214; //--------------------------------------------------------------------------------------//
 2253                        		.dbg	line,	"include\gfx_BG.c", 216; #incpal(palette_LV1,"res/maps/tilemap_LV1_BG_B.png");
 2254               78A0     		.data
 2255    0B:78A0             	_palette_LV1:	.incpal		"res/maps/tilemap_LV1_BG_B.png"
 2256               E309     		.code
 2257                        		.dbg	line,	"include\gfx_BG.c", 225; //**************************************************************************************//
 2258                        		.dbg	line,	"include\gfx_BG.c", 226; //                                                                                      //
 2259                        		.dbg	line,	"include\gfx_BG.c", 227; //                                         SHOP                                         //
 2260                        		.dbg	line,	"include\gfx_BG.c", 228; //                                                                                      //
 2261                        		.dbg	line,	"include\gfx_BG.c", 229; //**************************************************************************************//
 2262                        		.dbg	line,	"include\gfx_BG.c", 231; #asm
 2263                        		.dbg	clear
 2264               0001     	OPTIMIZE	=	1
 2265               7AA0     			.data
 2266                        	;//--------------------------------------------------------------------------------------//
 2267                        	;//                                        VDC 1                                         //
 2268                        	;//--------------------------------------------------------------------------------------//
 2269                        	; EXTRACT TILESET
 2270                        	;----------------
 2271    0B:7AA0             	_tileset_SHOP_BG_B:		incchr	"res/maps/template_ITEM_1.png"
 2272    0B:7B20             			incchr	"res/maps/template_ITEM_2.png"
 2273    0B:7BA0             			incchr	"res/maps/template_ITEM_3.png"
 2274    0B:7C20             			incchr	"res/maps/template_ITEM_4.png"
 2275    0B:7CA0             			incchr	"res/maps/template_ITEM_5.png"
 2276    0B:7D20             			incchr	"res/maps/template_ITEM_6.png"
 2277    0B:7DA0             			incchr	"res/maps/template_ITEM_7.png"
 2278    0B:7E20             			incchr	"res/maps/template_ITEM_8.png"
 2279    0B:7EA0             			incchr	"res/maps/template_ITEM_9.png"
 2280    0B:7F20             			incchr	"res/maps/template_ITEM_10.png"
 2281    0B:7FA0             			incchr	"res/maps/tilemap_SHOP_BG_B.png", OPTIMIZE
 2282               E309     			.code
 2283                        	
 2284                        		.dbg	line,	"include\gfx_BG.c", 255; #endasm
 2285                        		.dbg	line,	"include\gfx_BG.c", 258; // EXTRACT BLOCKS //
 2286                        		.dbg	line,	"include\gfx_BG.c", 259; #incblk(blocks_SHOP_BG_B, "res/maps/tilemap_SHOP_BG_B.png", 0x1000, tileset_SHOP_BG_B);
 2287               7400     		.data
 2288    0D:7800             	_blocks_SHOP_BG_B:	.incblk		"res/maps/tilemap_SHOP_BG_B.png", 4096, _tileset_SHOP_BG_B
 2289               E309     		.code
 2290                        		.dbg	line,	"include\gfx_BG.c", 261; // EXTRACT MAP //
 2291                        		.dbg	line,	"include\gfx_BG.c", 262; #incmap(map_SHOP_BG_B, "res/maps/tilemap_SHOP_BG_B.png", blocks_SHOP_BG_B);
 2292               8000     		.data
 2293    0E:6000             	_map_SHOP_BG_B:	.incmap		"res/maps/tilemap_SHOP_BG_B.png", _blocks_SHOP_BG_B
 2294               E309     		.code
 2295                        		.dbg	line,	"include\gfx_BG.c", 265; //--------------------------------------------------------------------------------------//
 2296                        		.dbg	line,	"include\gfx_BG.c", 266; //                                        ITEMS                                         //
 2297                        		.dbg	line,	"include\gfx_BG.c", 267; //--------------------------------------------------------------------------------------//
 2298                        		.dbg	line,	"include\gfx_BG.c", 269; #incchr(tiles_ITEM_WEAPON_2,"res/maps/tiles_ITEM_WEAPON_2.png", 2 , 2);
 2299               60E0     		.data
 2300    0E:60E0             	_tiles_ITEM_WEAPON_2: 	.incchr		"res/maps/tiles_ITEM_WEAPON_2.png", 2, 2
 2301               E309     		.code
 2302                        		.dbg	line,	"include\gfx_BG.c", 270; #incchr(tiles_ITEM_WEAPON_3,"res/maps/tiles_ITEM_WEAPON_3.png", 2 , 2);
 2303               6160     		.data
 2304    0E:6160             	_tiles_ITEM_WEAPON_3: 	.incchr		"res/maps/tiles_ITEM_WEAPON_3.png", 2, 2
 2305               E309     		.code
 2306                        		.dbg	line,	"include\gfx_BG.c", 271; #incchr(tiles_ITEM_WEAPON_4,"res/maps/tiles_ITEM_WEAPON_4.png", 2 , 2);
 2307               61E0     		.data
 2308    0E:61E0             	_tiles_ITEM_WEAPON_4: 	.incchr		"res/maps/tiles_ITEM_WEAPON_4.png", 2, 2
 2309               E309     		.code
 2310                        		.dbg	line,	"include\gfx_BG.c", 272; #incchr(tiles_ITEM_WEAPON_5,"res/maps/tiles_ITEM_WEAPON_5.png", 2 , 2);
 2311               6260     		.data
 2312    0E:6260             	_tiles_ITEM_WEAPON_5: 	.incchr		"res/maps/tiles_ITEM_WEAPON_5.png", 2, 2
 2313               E309     		.code
 2314                        		.dbg	line,	"include\gfx_BG.c", 273; #incchr(tiles_ITEM_KEY,"res/maps/tiles_ITEM_KEY.png", 2 , 2);
 2315               62E0     		.data
 2316    0E:62E0             	_tiles_ITEM_KEY: 	.incchr		"res/maps/tiles_ITEM_KEY.png", 2, 2
 2317               E309     		.code
 2318                        		.dbg	line,	"include\gfx_BG.c", 274; #incchr(tiles_ITEM_ARMOR_2,"res/maps/tiles_ITEM_ARMOR_2.png", 2 , 2);
 2319               6360     		.data
 2320    0E:6360             	_tiles_ITEM_ARMOR_2: 	.incchr		"res/maps/tiles_ITEM_ARMOR_2.png", 2, 2
 2321               E309     		.code
 2322                        		.dbg	line,	"include\gfx_BG.c", 275; #incchr(tiles_ITEM_ARMOR_3,"res/maps/tiles_ITEM_ARMOR_3.png", 2 , 2);
 2323               63E0     		.data
 2324    0E:63E0             	_tiles_ITEM_ARMOR_3: 	.incchr		"res/maps/tiles_ITEM_ARMOR_3.png", 2, 2
 2325               E309     		.code
 2326                        		.dbg	line,	"include\gfx_BG.c", 276; #incchr(tiles_ITEM_ARMOR_4,"res/maps/tiles_ITEM_ARMOR_4.png", 2 , 2);
 2327               6460     		.data
 2328    0E:6460             	_tiles_ITEM_ARMOR_4: 	.incchr		"res/maps/tiles_ITEM_ARMOR_4.png", 2, 2
 2329               E309     		.code
 2330                        		.dbg	line,	"include\gfx_BG.c", 277; #incchr(tiles_ITEM_ARMOR_5,"res/maps/tiles_ITEM_ARMOR_5.png", 2 , 2);
 2331               64E0     		.data
 2332    0E:64E0             	_tiles_ITEM_ARMOR_5: 	.incchr		"res/maps/tiles_ITEM_ARMOR_5.png", 2, 2
 2333               E309     		.code
 2334                        		.dbg	line,	"include\gfx_BG.c", 278; #incchr(tiles_ITEM_POTION,"res/maps/tiles_ITEM_POTION.png", 2 , 2);
 2335               6560     		.data
 2336    0E:6560             	_tiles_ITEM_POTION: 	.incchr		"res/maps/tiles_ITEM_POTION.png", 2, 2
 2337               E309     		.code
 2338                        		.dbg	line,	"include\gfx_BG.c", 280; //#incchr(tileset_NUMBERS_SHOP_FONT,"res/maps/tiles_NUMBERS_SHOP_FONT.png");
 2339                        		.dbg	line,	"include\gfx_BG.c", 283; //--------------------------------------------------------------------------------------//
 2340                        		.dbg	line,	"include\gfx_BG.c", 284; //                                   EXTRACT PALETTES                                   //
 2341                        		.dbg	line,	"include\gfx_BG.c", 285; //--------------------------------------------------------------------------------------//
 2342                        		.dbg	line,	"include\gfx_BG.c", 287; #incpal(palette_SHOP,"res/maps/tilemap_SHOP_BG_B.png");
 2343               65E0     		.data
 2344    0E:65E0             	_palette_SHOP:	.incpal		"res/maps/tilemap_SHOP_BG_B.png"
 2345               E309     		.code
 2346                        		.dbg	line,	"include\gfx_BG.c", 288; #incpal(palette_SHOP_ITEMS,"res/palettes/palette_SHOP_ITEMS.png");
 2347               67E0     		.data
 2348    0E:67E0             	_palette_SHOP_ITEMS:	.incpal		"res/palettes/palette_SHOP_ITEMS.png"
 2349               E309     		.code
 2350                        		.dbg	line,	"main.c", 12; #include "include/gfx_SPRITES.c"
 2351                        		.dbg	line,	"include\gfx_SPRITES.c", 1; #include "huc.h"
 2352                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
 2353                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
 2354                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
 2355                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
 2356                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
 2357                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
 2358                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
 2359                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
 2360                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
 2361                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
 2362                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
 2363                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 2364                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 2365                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 2366                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
 2367                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
 2368                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
 2369                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
 2370                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
 2371                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
 2372                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
 2373                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
 2374                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
 2375                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
 2376                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
 2377                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
 2378                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
 2379                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
 2380                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
 2381                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
 2382                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
 2383                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
 2384                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
 2385                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
 2386                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
 2387                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
 2388                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
 2389                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
 2390                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
 2391                        		.dbg	line,	"include\gfx_SPRITES.c", 10; // EXTRACT PLAYER TILES //
 2392                        		.dbg	line,	"include\gfx_SPRITES.c", 11; #incspr(tiles_SPR_PLAYER_ARMOR,"res/sprites/tiles_SPR_PLAYER_ARMOR.png")
 2393               69E0     		.data
 2394    0E:69E0             	_tiles_SPR_PLAYER_ARMOR:	.incspr		"res/sprites/tiles_SPR_PLAYER_ARMOR.png"
 2395               E309     		.code
 2396                        		.dbg	line,	"include\gfx_SPRITES.c", 12; #incspr(tiles_SPR_PLAYER_NAKED,"res/sprites/tiles_SPR_PLAYER_NAKED.png")
 2397               77E0     		.data
 2398    0F:77E0             	_tiles_SPR_PLAYER_NAKED:	.incspr		"res/sprites/tiles_SPR_PLAYER_NAKED.png"
 2399               E309     		.code
 2400                        		.dbg	line,	"include\gfx_SPRITES.c", 14; // EXTRACT PLAYER PALETTE //
 2401                        		.dbg	line,	"include\gfx_SPRITES.c", 15; #incpal(palette_PLAYER_1,"res/palettes/palette_PLAYER_1.png");
 2402               65E0     		.data
 2403    11:65E0             	_palette_PLAYER_1:	.incpal		"res/palettes/palette_PLAYER_1.png"
 2404               E309     		.code
 2405                        		.dbg	line,	"include\gfx_SPRITES.c", 16; #incpal(palette_PLAYER_4,"res/palettes/palette_PLAYER_4.png");
 2406               67E0     		.data
 2407    11:67E0             	_palette_PLAYER_4:	.incpal		"res/palettes/palette_PLAYER_4.png"
 2408               E309     		.code
 2409                        		.dbg	line,	"include\gfx_SPRITES.c", 17; #incpal(palette_PLAYER_5,"res/palettes/palette_PLAYER_5.png");
 2410               69E0     		.data
 2411    11:69E0             	_palette_PLAYER_5:	.incpal		"res/palettes/palette_PLAYER_5.png"
 2412               E309     		.code
 2413                        		.dbg	line,	"include\gfx_SPRITES.c", 18; #incpal(palette_PLAYER_8,"res/palettes/palette_PLAYER_8.png");
 2414               6BE0     		.data
 2415    11:6BE0             	_palette_PLAYER_8:	.incpal		"res/palettes/palette_PLAYER_8.png"
 2416               E309     		.code
 2417                        		.dbg	line,	"include\gfx_SPRITES.c", 21; // EXTRACT WEAPONS TILES //
 2418                        		.dbg	line,	"include\gfx_SPRITES.c", 22; #incspr(tiles_SPR_CHAIN,"res/sprites/tiles_SPR_CHAIN.png")
 2419               6DE0     		.data
 2420    11:6DE0             	_tiles_SPR_CHAIN:	.incspr		"res/sprites/tiles_SPR_CHAIN.png"
 2421               E309     		.code
 2422                        		.dbg	line,	"include\gfx_SPRITES.c", 23; #incspr(tiles_SPR_WEAPON_0,"res/sprites/tiles_SPR_WEAPON_0.png")
 2423               6E60     		.data
 2424    11:6E60             	_tiles_SPR_WEAPON_0:	.incspr		"res/sprites/tiles_SPR_WEAPON_0.png"
 2425               E309     		.code
 2426                        		.dbg	line,	"include\gfx_SPRITES.c", 24; #incspr(tiles_SPR_WEAPON_1,"res/sprites/tiles_SPR_WEAPON_1.png")
 2427               70E0     		.data
 2428    11:70E0             	_tiles_SPR_WEAPON_1:	.incspr		"res/sprites/tiles_SPR_WEAPON_1.png"
 2429               E309     		.code
 2430                        		.dbg	line,	"include\gfx_SPRITES.c", 25; #incspr(tiles_SPR_WEAPON_2,"res/sprites/tiles_SPR_WEAPON_2.png")
 2431               7360     		.data
 2432    11:7360             	_tiles_SPR_WEAPON_2:	.incspr		"res/sprites/tiles_SPR_WEAPON_2.png"
 2433               E309     		.code
 2434                        		.dbg	line,	"include\gfx_SPRITES.c", 26; #incspr(tiles_SPR_WEAPON_3,"res/sprites/tiles_SPR_WEAPON_3.png")
 2435               75E0     		.data
 2436    11:75E0             	_tiles_SPR_WEAPON_3:	.incspr		"res/sprites/tiles_SPR_WEAPON_3.png"
 2437               E309     		.code
 2438                        		.dbg	line,	"include\gfx_SPRITES.c", 27; #incspr(tiles_SPR_WEAPON_4,"res/sprites/tiles_SPR_WEAPON_4.png")
 2439               7860     		.data
 2440    11:7860             	_tiles_SPR_WEAPON_4:	.incspr		"res/sprites/tiles_SPR_WEAPON_4.png"
 2441               E309     		.code
 2442                        		.dbg	line,	"include\gfx_SPRITES.c", 30; #incspr(tiles_SPR_HIT,"res/sprites/tiles_SPR_HIT.png")
 2443               7AE0     		.data
 2444    11:7AE0             	_tiles_SPR_HIT:	.incspr		"res/sprites/tiles_SPR_HIT.png"
 2445               E309     		.code
 2446                        		.dbg	line,	"include\gfx_SPRITES.c", 33; // EXTRACT OBJECTS TILES //
 2447                        		.dbg	line,	"include\gfx_SPRITES.c", 34; #incspr(tiles_SPR_BARREL,"res/sprites/tiles_SPR_BARREL.png")
 2448               7B60     		.data
 2449    11:7B60             	_tiles_SPR_BARREL:	.incspr		"res/sprites/tiles_SPR_BARREL.png"
 2450               E309     		.code
 2451                        		.dbg	line,	"include\gfx_SPRITES.c", 35; #incspr(tiles_SPR_CHEST,"res/sprites/tiles_SPR_CHEST.png")
 2452               7BE0     		.data
 2453    11:7BE0             	_tiles_SPR_CHEST:	.incspr		"res/sprites/tiles_SPR_CHEST.png"
 2454               E309     		.code
 2455                        		.dbg	line,	"include\gfx_SPRITES.c", 36; #incspr(tiles_SPR_COIN_1,"res/sprites/tiles_SPR_COIN_1.png")
 2456               67E0     		.data
 2457    12:67E0             	_tiles_SPR_COIN_1:	.incspr		"res/sprites/tiles_SPR_COIN_1.png"
 2458               E309     		.code
 2459                        		.dbg	line,	"include\gfx_SPRITES.c", 37; #incspr(tiles_SPR_COIN_5,"res/sprites/tiles_SPR_COIN_5.png")
 2460               6860     		.data
 2461    12:6860             	_tiles_SPR_COIN_5:	.incspr		"res/sprites/tiles_SPR_COIN_5.png"
 2462               E309     		.code
 2463                        		.dbg	line,	"include\gfx_SPRITES.c", 38; #incspr(tiles_SPR_COIN_10,"res/sprites/tiles_SPR_COIN_10.png")
 2464               68E0     		.data
 2465    12:68E0             	_tiles_SPR_COIN_10:	.incspr		"res/sprites/tiles_SPR_COIN_10.png"
 2466               E309     		.code
 2467                        		.dbg	line,	"include\gfx_SPRITES.c", 39; #incspr(tiles_SPR_COIN_50,"res/sprites/tiles_SPR_COIN_50.png")
 2468               6960     		.data
 2469    12:6960             	_tiles_SPR_COIN_50:	.incspr		"res/sprites/tiles_SPR_COIN_50.png"
 2470               E309     		.code
 2471                        		.dbg	line,	"include\gfx_SPRITES.c", 40; #incspr(tiles_SPR_COIN_100,"res/sprites/tiles_SPR_COIN_100.png")
 2472               69E0     		.data
 2473    12:69E0             	_tiles_SPR_COIN_100:	.incspr		"res/sprites/tiles_SPR_COIN_100.png"
 2474               E309     		.code
 2475                        		.dbg	line,	"include\gfx_SPRITES.c", 41; #incspr(tiles_SPR_COIN_500,"res/sprites/tiles_SPR_COIN_500.png")
 2476               6A60     		.data
 2477    12:6A60             	_tiles_SPR_COIN_500:	.incspr		"res/sprites/tiles_SPR_COIN_500.png"
 2478               E309     		.code
 2479                        		.dbg	line,	"include\gfx_SPRITES.c", 42; #incspr(tiles_SPR_COIN_1000,"res/sprites/tiles_SPR_COIN_1000.png")
 2480               6AE0     		.data
 2481    12:6AE0             	_tiles_SPR_COIN_1000:	.incspr		"res/sprites/tiles_SPR_COIN_1000.png"
 2482               E309     		.code
 2483                        		.dbg	line,	"include\gfx_SPRITES.c", 43; #incspr(tiles_SPR_FRUIT,"res/sprites/tiles_SPR_FRUIT.png")
 2484               6B60     		.data
 2485    12:6B60             	_tiles_SPR_FRUIT:	.incspr		"res/sprites/tiles_SPR_FRUIT.png"
 2486               E309     		.code
 2487                        		.dbg	line,	"include\gfx_SPRITES.c", 44; #incspr(tiles_SPR_GRAY_KEY,"res/sprites/tiles_SPR_GRAY_KEY.png")
 2488               6BE0     		.data
 2489    12:6BE0             	_tiles_SPR_GRAY_KEY:	.incspr		"res/sprites/tiles_SPR_GRAY_KEY.png"
 2490               E309     		.code
 2491                        		.dbg	line,	"include\gfx_SPRITES.c", 45; #incspr(tiles_SPR_GOLD_KEY,"res/sprites/tiles_SPR_GOLD_KEY.png")
 2492               6C60     		.data
 2493    12:6C60             	_tiles_SPR_GOLD_KEY:	.incspr		"res/sprites/tiles_SPR_GOLD_KEY.png"
 2494               E309     		.code
 2495                        		.dbg	line,	"include\gfx_SPRITES.c", 46; #incspr(tiles_SPR_HOURGLASS,"res/sprites/tiles_SPR_HOURGLASS.png")
 2496               6CE0     		.data
 2497    12:6CE0             	_tiles_SPR_HOURGLASS:	.incspr		"res/sprites/tiles_SPR_HOURGLASS.png"
 2498               E309     		.code
 2499                        		.dbg	line,	"include\gfx_SPRITES.c", 47; #incspr(tiles_SPR_LIFE,"res/sprites/tiles_SPR_LIFE.png")
 2500               6D60     		.data
 2501    12:6D60             	_tiles_SPR_LIFE:	.incspr		"res/sprites/tiles_SPR_LIFE.png"
 2502               E309     		.code
 2503                        		.dbg	line,	"include\gfx_SPRITES.c", 48; #incspr(tiles_SPR_OCTOPUS,"res/sprites/tiles_SPR_OCTOPUS.png")
 2504               6DE0     		.data
 2505    12:6DE0             	_tiles_SPR_OCTOPUS:	.incspr		"res/sprites/tiles_SPR_OCTOPUS.png"
 2506               E309     		.code
 2507                        		.dbg	line,	"include\gfx_SPRITES.c", 49; #incspr(tiles_SPR_POT,"res/sprites/tiles_SPR_POT.png")
 2508               6E60     		.data
 2509    12:6E60             	_tiles_SPR_POT:	.incspr		"res/sprites/tiles_SPR_POT.png"
 2510               E309     		.code
 2511                        		.dbg	line,	"include\gfx_SPRITES.c", 50; #incspr(tiles_SPR_POW,"res/sprites/tiles_SPR_POW.png")
 2512               7260     		.data
 2513    12:7260             	_tiles_SPR_POW:	.incspr		"res/sprites/tiles_SPR_POW.png"
 2514               E309     		.code
 2515                        		.dbg	line,	"include\gfx_SPRITES.c", 51; #incspr(tiles_SPR_STAR,"res/sprites/tiles_SPR_STAR.png")
 2516               72E0     		.data
 2517    12:72E0             	_tiles_SPR_STAR:	.incspr		"res/sprites/tiles_SPR_STAR.png"
 2518               E309     		.code
 2519                        		.dbg	line,	"include\gfx_SPRITES.c", 52; #incspr(tiles_SPR_BAMBOO,"res/sprites/tiles_SPR_BAMBOO.png")
 2520               7360     		.data
 2521    12:7360             	_tiles_SPR_BAMBOO:	.incspr		"res/sprites/tiles_SPR_BAMBOO.png"
 2522               E309     		.code
 2523                        		.dbg	line,	"include\gfx_SPRITES.c", 53; #incspr(tiles_SPR_YASHICHI,"res/sprites/tiles_SPR_YASHICHI.png")
 2524               73E0     		.data
 2525    12:73E0             	_tiles_SPR_YASHICHI:	.incspr		"res/sprites/tiles_SPR_YASHICHI.png"
 2526               E309     		.code
 2527                        		.dbg	line,	"include\gfx_SPRITES.c", 54; #incspr(tiles_SPR_ELEPHANT,"res/sprites/tiles_SPR_ELEPHANT.png")
 2528               7460     		.data
 2529    12:7460             	_tiles_SPR_ELEPHANT:	.incspr		"res/sprites/tiles_SPR_ELEPHANT.png"
 2530               E309     		.code
 2531                        		.dbg	line,	"include\gfx_SPRITES.c", 55; #incspr(tiles_SPR_DRAGONFLY,"res/sprites/tiles_SPR_DRAGONFLY.png")
 2532               74E0     		.data
 2533    12:74E0             	_tiles_SPR_DRAGONFLY:	.incspr		"res/sprites/tiles_SPR_DRAGONFLY.png"
 2534               E309     		.code
 2535                        		.dbg	line,	"include\gfx_SPRITES.c", 56; #incspr(tiles_SPR_COW,"res/sprites/tiles_SPR_COW.png")
 2536               7560     		.data
 2537    12:7560             	_tiles_SPR_COW:	.incspr		"res/sprites/tiles_SPR_COW.png"
 2538               E309     		.code
 2539                        		.dbg	line,	"include\gfx_SPRITES.c", 57; #incspr(tiles_SPR_MOBICHAN,"res/sprites/tiles_SPR_MOBICHAN.png")
 2540               75E0     		.data
 2541    12:75E0             	_tiles_SPR_MOBICHAN:	.incspr		"res/sprites/tiles_SPR_MOBICHAN.png"
 2542               E309     		.code
 2543                        		.dbg	line,	"include\gfx_SPRITES.c", 59; // EXTRACT OBJECTS PALETTE //
 2544                        		.dbg	line,	"include\gfx_SPRITES.c", 60; #incpal(palette_objects_1,"res/palettes/palette_objects_1.png");
 2545               7660     		.data
 2546    12:7660             	_palette_objects_1:	.incpal		"res/palettes/palette_objects_1.png"
 2547               E309     		.code
 2548                        		.dbg	line,	"include\gfx_SPRITES.c", 61; #incpal(palette_objects_2,"res/palettes/palette_objects_2.png");
 2549               7860     		.data
 2550    12:7860             	_palette_objects_2:	.incpal		"res/palettes/palette_objects_2.png"
 2551               E309     		.code
 2552                        		.dbg	line,	"include\gfx_SPRITES.c", 64; // EXTRACT NPCS TILES //
 2553                        		.dbg	line,	"include\gfx_SPRITES.c", 65; #incspr(tiles_SPR_NPC,"res/sprites/tiles_SPR_NPC.png")
 2554               7A60     		.data
 2555    12:7A60             	_tiles_SPR_NPC:	.incspr		"res/sprites/tiles_SPR_NPC.png"
 2556               E309     		.code
 2557                        		.dbg	line,	"include\gfx_SPRITES.c", 69; // EXTRACT CURSOR TILES //
 2558                        		.dbg	line,	"include\gfx_SPRITES.c", 70; #incspr(tiles_SPR_CURSOR,"res/sprites/tiles_SPR_CURSOR.png")
 2559               6660     		.data
 2560    13:6660             	_tiles_SPR_CURSOR:	.incspr		"res/sprites/tiles_SPR_CURSOR.png"
 2561               E309     		.code
 2562                        		.dbg	line,	"main.c", 15; #include "include/tables_NPC.c"
 2563                        		.dbg	line,	"include\tables_NPC.c", 1; //-----------------------------------------------------------------------------//
 2564                        		.dbg	line,	"include\tables_NPC.c", 2; //                                                                             //
 2565                        		.dbg	line,	"include\tables_NPC.c", 3; //                                   LEVEL 1                                   //
 2566                        		.dbg	line,	"include\tables_NPC.c", 4; //                                                                             //
 2567                        		.dbg	line,	"include\tables_NPC.c", 5; //-----------------------------------------------------------------------------//
 2568                        		.dbg	line,	"include\tables_NPC.c", 7; const char              TABLE_NPC_TYPE_LV1[NPC_NUMBER_LV1]              =   {
 2569                        		.dbg	line,	"include\tables_NPC.c", 8; TYPE_NPC_SHOP,
 2570                        		.dbg	line,	"include\tables_NPC.c", 9; TYPE_NPC_REWARD
 2571                        		.dbg	line,	"include\tables_NPC.c", 10; };
 2572                        		.dbg	line,	"include\tables_NPC.c", 13; const signed int        TABLE_NPC_X_POS_REF_LV1[NPC_NUMBER_LV1]         =   {
 2573                        		.dbg	line,	"include\tables_NPC.c", 14; 912,
 2574                        		.dbg	line,	"include\tables_NPC.c", 15; 1232
 2575                        		.dbg	line,	"include\tables_NPC.c", 16; };
 2576                        		.dbg	line,	"include\tables_NPC.c", 19; const signed int        TABLE_NPC_Y_POS_REF_LV1[NPC_NUMBER_LV1]         =   {
 2577                        		.dbg	line,	"include\tables_NPC.c", 20; 576,
 2578                        		.dbg	line,	"include\tables_NPC.c", 21; 400
 2579                        		.dbg	line,	"include\tables_NPC.c", 22; };
 2580                        		.dbg	line,	"main.c", 16; #include "include/tables_OBJECT.c"
 2581                        		.dbg	line,	"include\tables_OBJECT.c", 1; //-----------------------------------------------------------------------------//
 2582                        		.dbg	line,	"include\tables_OBJECT.c", 2; //                                                                             //
 2583                        		.dbg	line,	"include\tables_OBJECT.c", 3; //                                   LEVEL 1                                   //
 2584                        		.dbg	line,	"include\tables_OBJECT.c", 4; //                                                                             //
 2585                        		.dbg	line,	"include\tables_OBJECT.c", 5; //-----------------------------------------------------------------------------//
 2586                        		.dbg	line,	"include\tables_OBJECT.c", 7; const char              TABLE_OBJECT_TYPE_LV1[OBJECT_NUMBER_LV1]      =   {
 2587                        		.dbg	line,	"include\tables_OBJECT.c", 8; TYPE_HOURGLASS,
 2588                        		.dbg	line,	"include\tables_OBJECT.c", 9; TYPE_POT,
 2589                        		.dbg	line,	"include\tables_OBJECT.c", 10; TYPE_POT,
 2590                        		.dbg	line,	"include\tables_OBJECT.c", 11; TYPE_POT,
 2591                        		.dbg	line,	"include\tables_OBJECT.c", 12; TYPE_POT,
 2592                        		.dbg	line,	"include\tables_OBJECT.c", 13; TYPE_POT,
 2593                        		.dbg	line,	"include\tables_OBJECT.c", 14; TYPE_POT,
 2594                        		.dbg	line,	"include\tables_OBJECT.c", 15; TYPE_POW,
 2595                        		.dbg	line,	"include\tables_OBJECT.c", 16; TYPE_POT,
 2596                        		.dbg	line,	"include\tables_OBJECT.c", 17; TYPE_POT,
 2597                        		.dbg	line,	"include\tables_OBJECT.c", 19; //
 2598                        		.dbg	line,	"include\tables_OBJECT.c", 20; TYPE_POT,
 2599                        		.dbg	line,	"include\tables_OBJECT.c", 21; TYPE_POT,
 2600                        		.dbg	line,	"include\tables_OBJECT.c", 22; TYPE_POT,
 2601                        		.dbg	line,	"include\tables_OBJECT.c", 23; TYPE_POT,
 2602                        		.dbg	line,	"include\tables_OBJECT.c", 24; TYPE_POT,
 2603                        		.dbg	line,	"include\tables_OBJECT.c", 25; TYPE_POT,
 2604                        		.dbg	line,	"include\tables_OBJECT.c", 26; TYPE_POT,
 2605                        		.dbg	line,	"include\tables_OBJECT.c", 27; TYPE_POT,
 2606                        		.dbg	line,	"include\tables_OBJECT.c", 28; TYPE_POT,
 2607                        		.dbg	line,	"include\tables_OBJECT.c", 29; TYPE_POT,
 2608                        		.dbg	line,	"include\tables_OBJECT.c", 31; //
 2609                        		.dbg	line,	"include\tables_OBJECT.c", 32; TYPE_POT,
 2610                        		.dbg	line,	"include\tables_OBJECT.c", 33; TYPE_POT,
 2611                        		.dbg	line,	"include\tables_OBJECT.c", 34; TYPE_POT
 2612                        		.dbg	line,	"include\tables_OBJECT.c", 35; };
 2613                        		.dbg	line,	"include\tables_OBJECT.c", 38; const signed int        TABLE_OBJECT_X_POS_REF_LV1[OBJECT_NUMBER_LV1] =   {
 2614                        		.dbg	line,	"include\tables_OBJECT.c", 39; 1680,
 2615                        		.dbg	line,	"include\tables_OBJECT.c", 40; 1280,
 2616                        		.dbg	line,	"include\tables_OBJECT.c", 41; 1472,
 2617                        		.dbg	line,	"include\tables_OBJECT.c", 42; 1440,
 2618                        		.dbg	line,	"include\tables_OBJECT.c", 43; 1168,
 2619                        		.dbg	line,	"include\tables_OBJECT.c", 44; 1200,
 2620                        		.dbg	line,	"include\tables_OBJECT.c", 45; 960,
 2621                        		.dbg	line,	"include\tables_OBJECT.c", 46; 984,
 2622                        		.dbg	line,	"include\tables_OBJECT.c", 47; 1360,
 2623                        		.dbg	line,	"include\tables_OBJECT.c", 48; 1392,
 2624                        		.dbg	line,	"include\tables_OBJECT.c", 50; //
 2625                        		.dbg	line,	"include\tables_OBJECT.c", 51; 1552,
 2626                        		.dbg	line,	"include\tables_OBJECT.c", 52; 1680,
 2627                        		.dbg	line,	"include\tables_OBJECT.c", 53; 1712,
 2628                        		.dbg	line,	"include\tables_OBJECT.c", 54; 1744,
 2629                        		.dbg	line,	"include\tables_OBJECT.c", 55; 1248,
 2630                        		.dbg	line,	"include\tables_OBJECT.c", 56; 1280,
 2631                        		.dbg	line,	"include\tables_OBJECT.c", 57; 1168,
 2632                        		.dbg	line,	"include\tables_OBJECT.c", 58; 1040,
 2633                        		.dbg	line,	"include\tables_OBJECT.c", 59; 640,
 2634                        		.dbg	line,	"include\tables_OBJECT.c", 60; 672,
 2635                        		.dbg	line,	"include\tables_OBJECT.c", 62; //
 2636                        		.dbg	line,	"include\tables_OBJECT.c", 63; 336,
 2637                        		.dbg	line,	"include\tables_OBJECT.c", 64; 368,
 2638                        		.dbg	line,	"include\tables_OBJECT.c", 65; 416
 2639                        		.dbg	line,	"include\tables_OBJECT.c", 66; };
 2640                        		.dbg	line,	"include\tables_OBJECT.c", 69; const signed int        TABLE_OBJECT_Y_POS_REF_LV1[OBJECT_NUMBER_LV1] =   {
 2641                        		.dbg	line,	"include\tables_OBJECT.c", 70; 384,
 2642                        		.dbg	line,	"include\tables_OBJECT.c", 71; 416,
 2643                        		.dbg	line,	"include\tables_OBJECT.c", 72; 480,
 2644                        		.dbg	line,	"include\tables_OBJECT.c", 73; 496,
 2645                        		.dbg	line,	"include\tables_OBJECT.c", 74; 560,
 2646                        		.dbg	line,	"include\tables_OBJECT.c", 75; 560,
 2647                        		.dbg	line,	"include\tables_OBJECT.c", 76; 592,
 2648                        		.dbg	line,	"include\tables_OBJECT.c", 77; 592,
 2649                        		.dbg	line,	"include\tables_OBJECT.c", 78; 592,
 2650                        		.dbg	line,	"include\tables_OBJECT.c", 79; 592,
 2651                        		.dbg	line,	"include\tables_OBJECT.c", 81; //
 2652                        		.dbg	line,	"include\tables_OBJECT.c", 82; 704,
 2653                        		.dbg	line,	"include\tables_OBJECT.c", 83; 720,
 2654                        		.dbg	line,	"include\tables_OBJECT.c", 84; 720,
 2655                        		.dbg	line,	"include\tables_OBJECT.c", 85; 720,
 2656                        		.dbg	line,	"include\tables_OBJECT.c", 86; 736,
 2657                        		.dbg	line,	"include\tables_OBJECT.c", 87; 736,
 2658                        		.dbg	line,	"include\tables_OBJECT.c", 88; 752,
 2659                        		.dbg	line,	"include\tables_OBJECT.c", 89; 848,
 2660                        		.dbg	line,	"include\tables_OBJECT.c", 90; 880,
 2661                        		.dbg	line,	"include\tables_OBJECT.c", 91; 880,
 2662                        		.dbg	line,	"include\tables_OBJECT.c", 93; //
 2663                        		.dbg	line,	"include\tables_OBJECT.c", 94; 896,
 2664                        		.dbg	line,	"include\tables_OBJECT.c", 95; 896,
 2665                        		.dbg	line,	"include\tables_OBJECT.c", 96; 896
 2666                        		.dbg	line,	"include\tables_OBJECT.c", 97; };
 2667                        		.dbg	line,	"include\tables_OBJECT.c", 100; /*const char              TABLE_REWARD_TYPE_LV1[OBJECT_NUMBER_LV1]       =   {
 2668                        		.dbg	line,	"include\tables_OBJECT.c", 101; TYPE_POT
 2669                        		.dbg	line,	"include\tables_OBJECT.c", 102; TYPE_POT,
 2670                        		.dbg	line,	"include\tables_OBJECT.c", 103; TYPE_POT,
 2671                        		.dbg	line,	"include\tables_OBJECT.c", 104; TYPE_POT,
 2672                        		.dbg	line,	"include\tables_OBJECT.c", 105; TYPE_POT,
 2673                        		.dbg	line,	"include\tables_OBJECT.c", 106; TYPE_POT,
 2674                        		.dbg	line,	"include\tables_OBJECT.c", 107; TYPE_POT,
 2675                        		.dbg	line,	"include\tables_OBJECT.c", 108; TYPE_POW,
 2676                        		.dbg	line,	"include\tables_OBJECT.c", 109; TYPE_POT,
 2677                        		.dbg	line,	"include\tables_OBJECT.c", 110; TYPE_POT,
 2678                        		.dbg	line,	"include\tables_OBJECT.c", 112; //
 2679                        		.dbg	line,	"include\tables_OBJECT.c", 113; TYPE_POT,
 2680                        		.dbg	line,	"include\tables_OBJECT.c", 114; TYPE_POT,
 2681                        		.dbg	line,	"include\tables_OBJECT.c", 115; TYPE_POT,
 2682                        		.dbg	line,	"include\tables_OBJECT.c", 116; TYPE_POT,
 2683                        		.dbg	line,	"include\tables_OBJECT.c", 117; TYPE_POT,
 2684                        		.dbg	line,	"include\tables_OBJECT.c", 118; TYPE_POT,
 2685                        		.dbg	line,	"include\tables_OBJECT.c", 119; TYPE_POT,
 2686                        		.dbg	line,	"include\tables_OBJECT.c", 120; TYPE_POT,
 2687                        		.dbg	line,	"include\tables_OBJECT.c", 122; //
 2688                        		.dbg	line,	"include\tables_OBJECT.c", 123; TYPE_GRAY_KEY,
 2689                        		.dbg	line,	"include\tables_OBJECT.c", 124; TYPE_GRAY_KEY,
 2690                        		.dbg	line,	"include\tables_OBJECT.c", 125; TYPE_GRAY_KEY,
 2691                        		.dbg	line,	"include\tables_OBJECT.c", 126; TYPE_COIN_5,
 2692                        		.dbg	line,	"include\tables_OBJECT.c", 127; TYPE_GRAY_KEY
 2693                        		.dbg	line,	"include\tables_OBJECT.c", 128; };*/
 2694                        		.dbg	line,	"include\tables_OBJECT.c", 133; const signed int        TABLE_CHEST_X_POS_REF_LV1[CHEST_NUMBER_LV1]   =   {
 2695                        		.dbg	line,	"include\tables_OBJECT.c", 134; 1072,
 2696                        		.dbg	line,	"include\tables_OBJECT.c", 135; 816
 2697                        		.dbg	line,	"include\tables_OBJECT.c", 136; };
 2698                        		.dbg	line,	"include\tables_OBJECT.c", 139; const signed int        TABLE_CHEST_Y_POS_REF_LV1[CHEST_NUMBER_LV1]   =   {
 2699                        		.dbg	line,	"include\tables_OBJECT.c", 140; 832,
 2700                        		.dbg	line,	"include\tables_OBJECT.c", 141; 848
 2701                        		.dbg	line,	"main.c", 16; };
 2702                        		.dbg	line,	"main.c", 17; #include "include/tables_PLAYER.c"
 2703                        		.dbg	line,	"include\tables_PLAYER.c", 3; const unsigned char     *TABLE_PLAYER_TILES_ADR[2]     =   {
 2704                        		.dbg	line,	"include\tables_PLAYER.c", 4; &tiles_SPR_PLAYER_ARMOR,
 2705                        		.dbg	line,	"include\tables_PLAYER.c", 5; &tiles_SPR_PLAYER_NAKED
 2706                        		.dbg	line,	"include\tables_PLAYER.c", 6; };
 2707                        		.dbg	line,	"include\tables_PLAYER.c", 9; const unsigned char     TABLE_PLAYER_TILES_BANK[2]     =   {
 2708                        		.dbg	line,	"include\tables_PLAYER.c", 10; ^tiles_SPR_PLAYER_ARMOR,
 2709                        		.dbg	line,	"include\tables_PLAYER.c", 11; ^tiles_SPR_PLAYER_NAKED
 2710                        		.dbg	line,	"include\tables_PLAYER.c", 12; };
 2711                        		.dbg	line,	"include\tables_PLAYER.c", 15; const signed char       TABLE_PLAYER_JUMP_V[35]     =   {
 2712                        		.dbg	line,	"include\tables_PLAYER.c", 16; // UPWARD
 2713                        		.dbg	line,	"include\tables_PLAYER.c", 17; -4,
 2714                        		.dbg	line,	"include\tables_PLAYER.c", 18; -5,
 2715                        		.dbg	line,	"include\tables_PLAYER.c", 19; -10,
 2716                        		.dbg	line,	"include\tables_PLAYER.c", 20; -4,
 2717                        		.dbg	line,	"include\tables_PLAYER.c", 21; -4,
 2718                        		.dbg	line,	"include\tables_PLAYER.c", 22; -7,
 2719                        		.dbg	line,	"include\tables_PLAYER.c", 23; -6,
 2720                        		.dbg	line,	"include\tables_PLAYER.c", 24; -3,
 2721                        		.dbg	line,	"include\tables_PLAYER.c", 25; -5,
 2722                        		.dbg	line,	"include\tables_PLAYER.c", 26; -2,
 2723                        		.dbg	line,	"include\tables_PLAYER.c", 27; -4,
 2724                        		.dbg	line,	"include\tables_PLAYER.c", 28; -1,
 2725                        		.dbg	line,	"include\tables_PLAYER.c", 29; -1,
 2726                        		.dbg	line,	"include\tables_PLAYER.c", 30; -1,
 2727                        		.dbg	line,	"include\tables_PLAYER.c", 31; -1,
 2728                        		.dbg	line,	"include\tables_PLAYER.c", 32; 0,
 2729                        		.dbg	line,	"include\tables_PLAYER.c", 33; 0,
 2730                        		.dbg	line,	"include\tables_PLAYER.c", 34; 0,
 2731                        		.dbg	line,	"include\tables_PLAYER.c", 35; 0,
 2732                        		.dbg	line,	"include\tables_PLAYER.c", 36; // DOWNWARD
 2733                        		.dbg	line,	"include\tables_PLAYER.c", 37; 1,
 2734                        		.dbg	line,	"include\tables_PLAYER.c", 38; 1,
 2735                        		.dbg	line,	"include\tables_PLAYER.c", 39; 1,
 2736                        		.dbg	line,	"include\tables_PLAYER.c", 40; 1,
 2737                        		.dbg	line,	"include\tables_PLAYER.c", 41; 4,
 2738                        		.dbg	line,	"include\tables_PLAYER.c", 42; 2,
 2739                        		.dbg	line,	"include\tables_PLAYER.c", 43; 5,
 2740                        		.dbg	line,	"include\tables_PLAYER.c", 44; 3,
 2741                        		.dbg	line,	"include\tables_PLAYER.c", 45; 6,
 2742                        		.dbg	line,	"include\tables_PLAYER.c", 46; 7,
 2743                        		.dbg	line,	"include\tables_PLAYER.c", 47; 4,
 2744                        		.dbg	line,	"include\tables_PLAYER.c", 48; 4,
 2745                        		.dbg	line,	"include\tables_PLAYER.c", 49; 10,
 2746                        		.dbg	line,	"include\tables_PLAYER.c", 50; 4,
 2747                        		.dbg	line,	"include\tables_PLAYER.c", 51; 4,
 2748                        		.dbg	line,	"include\tables_PLAYER.c", 52; 5
 2749                        		.dbg	line,	"include\tables_PLAYER.c", 53; };
 2750                        		.dbg	line,	"include\tables_PLAYER.c", 56; const signed char       TABLE_PLAYER_FALL[21]       =   {
 2751                        		.dbg	line,	"include\tables_PLAYER.c", 57; 0,
 2752                        		.dbg	line,	"include\tables_PLAYER.c", 58; 0,
 2753                        		.dbg	line,	"include\tables_PLAYER.c", 59; 0,
 2754                        		.dbg	line,	"include\tables_PLAYER.c", 60; 0,
 2755                        		.dbg	line,	"include\tables_PLAYER.c", 61; 1,
 2756                        		.dbg	line,	"include\tables_PLAYER.c", 62; 1,
 2757                        		.dbg	line,	"include\tables_PLAYER.c", 63; 1,
 2758                        		.dbg	line,	"include\tables_PLAYER.c", 64; 1,
 2759                        		.dbg	line,	"include\tables_PLAYER.c", 65; 2,
 2760                        		.dbg	line,	"include\tables_PLAYER.c", 66; 2,
 2761                        		.dbg	line,	"include\tables_PLAYER.c", 67; 2,
 2762                        		.dbg	line,	"include\tables_PLAYER.c", 68; 2,
 2763                        		.dbg	line,	"include\tables_PLAYER.c", 69; 3,
 2764                        		.dbg	line,	"include\tables_PLAYER.c", 70; 3,
 2765                        		.dbg	line,	"include\tables_PLAYER.c", 71; 3,
 2766                        		.dbg	line,	"include\tables_PLAYER.c", 72; 4,
 2767                        		.dbg	line,	"include\tables_PLAYER.c", 73; 4,
 2768                        		.dbg	line,	"include\tables_PLAYER.c", 74; 4,
 2769                        		.dbg	line,	"include\tables_PLAYER.c", 75; 4,
 2770                        		.dbg	line,	"include\tables_PLAYER.c", 76; 4,
 2771                        		.dbg	line,	"include\tables_PLAYER.c", 77; 5
 2772                        		.dbg	line,	"include\tables_PLAYER.c", 78; };
 2773                        		.dbg	line,	"include\tables_PLAYER.c", 81; const signed char       TABLE_PLAYER_JUMP_LADDER[30]    =   {
 2774                        		.dbg	line,	"include\tables_PLAYER.c", 82; // UPWARD
 2775                        		.dbg	line,	"include\tables_PLAYER.c", 83; -4,
 2776                        		.dbg	line,	"include\tables_PLAYER.c", 84; -4,
 2777                        		.dbg	line,	"include\tables_PLAYER.c", 85; -3,
 2778                        		.dbg	line,	"include\tables_PLAYER.c", 86; -3,
 2779                        		.dbg	line,	"include\tables_PLAYER.c", 87; -3,
 2780                        		.dbg	line,	"include\tables_PLAYER.c", 88; -2,
 2781                        		.dbg	line,	"include\tables_PLAYER.c", 89; -2,
 2782                        		.dbg	line,	"include\tables_PLAYER.c", 90; -2,
 2783                        		.dbg	line,	"include\tables_PLAYER.c", 91; -1,
 2784                        		.dbg	line,	"include\tables_PLAYER.c", 92; -1,
 2785                        		.dbg	line,	"include\tables_PLAYER.c", 93; -1,
 2786                        		.dbg	line,	"include\tables_PLAYER.c", 94; -1,
 2787                        		.dbg	line,	"include\tables_PLAYER.c", 95; -1,
 2788                        		.dbg	line,	"include\tables_PLAYER.c", 96; 0,
 2789                        		.dbg	line,	"include\tables_PLAYER.c", 97; 0,
 2790                        		.dbg	line,	"include\tables_PLAYER.c", 98; 0,
 2791                        		.dbg	line,	"include\tables_PLAYER.c", 99; 0,
 2792                        		.dbg	line,	"include\tables_PLAYER.c", 100; // DOWNWARD
 2793                        		.dbg	line,	"include\tables_PLAYER.c", 101; 1,
 2794                        		.dbg	line,	"include\tables_PLAYER.c", 102; 1,
 2795                        		.dbg	line,	"include\tables_PLAYER.c", 103; 1,
 2796                        		.dbg	line,	"include\tables_PLAYER.c", 104; 1,
 2797                        		.dbg	line,	"include\tables_PLAYER.c", 105; 1,
 2798                        		.dbg	line,	"include\tables_PLAYER.c", 106; 2,
 2799                        		.dbg	line,	"include\tables_PLAYER.c", 107; 2,
 2800                        		.dbg	line,	"include\tables_PLAYER.c", 108; 2,
 2801                        		.dbg	line,	"include\tables_PLAYER.c", 109; 3,
 2802                        		.dbg	line,	"include\tables_PLAYER.c", 110; 3,
 2803                        		.dbg	line,	"include\tables_PLAYER.c", 111; 3,
 2804                        		.dbg	line,	"include\tables_PLAYER.c", 112; 4,
 2805                        		.dbg	line,	"include\tables_PLAYER.c", 113; 4
 2806                        		.dbg	line,	"include\tables_PLAYER.c", 114; };
 2807                        		.dbg	line,	"include\tables_PLAYER.c", 123; const unsigned char     *TABLE_WEAPON_TILES_ADR[5]     =   {
 2808                        		.dbg	line,	"include\tables_PLAYER.c", 124; &tiles_SPR_WEAPON_0,
 2809                        		.dbg	line,	"include\tables_PLAYER.c", 125; &tiles_SPR_WEAPON_1,
 2810                        		.dbg	line,	"include\tables_PLAYER.c", 126; &tiles_SPR_WEAPON_2,
 2811                        		.dbg	line,	"include\tables_PLAYER.c", 127; &tiles_SPR_WEAPON_3,
 2812                        		.dbg	line,	"include\tables_PLAYER.c", 128; &tiles_SPR_WEAPON_4
 2813                        		.dbg	line,	"include\tables_PLAYER.c", 129; };
 2814                        		.dbg	line,	"include\tables_PLAYER.c", 132; const unsigned char     TABLE_WEAPON_TILES_BANK[5]     =   {
 2815                        		.dbg	line,	"include\tables_PLAYER.c", 133; ^tiles_SPR_WEAPON_0,
 2816                        		.dbg	line,	"include\tables_PLAYER.c", 134; ^tiles_SPR_WEAPON_1,
 2817                        		.dbg	line,	"include\tables_PLAYER.c", 135; ^tiles_SPR_WEAPON_2,
 2818                        		.dbg	line,	"include\tables_PLAYER.c", 136; ^tiles_SPR_WEAPON_3,
 2819                        		.dbg	line,	"include\tables_PLAYER.c", 137; ^tiles_SPR_WEAPON_4
 2820                        		.dbg	line,	"main.c", 17; };
 2821                        		.dbg	line,	"main.c", 18; #include "include/tables_SHOP.c"
 2822                        		.dbg	line,	"include\tables_SHOP.c", 1; //-----------------------------------------------------------------------------//
 2823                        		.dbg	line,	"include\tables_SHOP.c", 2; //                                                                             //
 2824                        		.dbg	line,	"include\tables_SHOP.c", 3; //                                   LEVEL 1                                   //
 2825                        		.dbg	line,	"include\tables_SHOP.c", 4; //                                                                             //
 2826                        		.dbg	line,	"include\tables_SHOP.c", 5; //-----------------------------------------------------------------------------//
 2827                        		.dbg	line,	"include\tables_SHOP.c", 7; const char              TABLE_SHOP_ITEMS_LV1[10]        =   {
 2828                        		.dbg	line,	"include\tables_SHOP.c", 8; TYPE_ITEM_WEAPON_2,
 2829                        		.dbg	line,	"include\tables_SHOP.c", 9; TYPE_ITEM_WEAPON_3,
 2830                        		.dbg	line,	"include\tables_SHOP.c", 10; TYPE_ITEM_WEAPON_4,
 2831                        		.dbg	line,	"include\tables_SHOP.c", 11; TYPE_ITEM_WEAPON_5,
 2832                        		.dbg	line,	"include\tables_SHOP.c", 12; TYPE_ITEM_KEY,
 2833                        		.dbg	line,	"include\tables_SHOP.c", 14; TYPE_ITEM_ARMOR_2,
 2834                        		.dbg	line,	"include\tables_SHOP.c", 15; TYPE_ITEM_ARMOR_3,
 2835                        		.dbg	line,	"include\tables_SHOP.c", 16; TYPE_ITEM_ARMOR_4,
 2836                        		.dbg	line,	"include\tables_SHOP.c", 17; TYPE_ITEM_ARMOR_5,
 2837                        		.dbg	line,	"include\tables_SHOP.c", 18; TYPE_ITEM_POTION
 2838                        		.dbg	line,	"include\tables_SHOP.c", 19; };
 2839                        		.dbg	line,	"include\tables_SHOP.c", 22; const int               TABLE_SHOP_PRICES_LV1[10]       =   {
 2840                        		.dbg	line,	"include\tables_SHOP.c", 23; 100,
 2841                        		.dbg	line,	"include\tables_SHOP.c", 24; 1000,
 2842                        		.dbg	line,	"include\tables_SHOP.c", 25; 2400,
 2843                        		.dbg	line,	"include\tables_SHOP.c", 26; 9600,
 2844                        		.dbg	line,	"include\tables_SHOP.c", 27; 30,
 2845                        		.dbg	line,	"include\tables_SHOP.c", 28; 80,
 2846                        		.dbg	line,	"include\tables_SHOP.c", 29; 300,
 2847                        		.dbg	line,	"include\tables_SHOP.c", 30; 800,
 2848                        		.dbg	line,	"include\tables_SHOP.c", 31; 1600,
 2849                        		.dbg	line,	"include\tables_SHOP.c", 32; 150
 2850                        		.dbg	line,	"include\tables_SHOP.c", 33; };
 2851                        		.dbg	line,	"include\tables_SHOP.c", 36; const unsigned char     *TABLE_SHOP_ITEMS_TILES_ADR[10]     =   {
 2852                        		.dbg	line,	"include\tables_SHOP.c", 37; &tiles_ITEM_WEAPON_2,
 2853                        		.dbg	line,	"include\tables_SHOP.c", 38; &tiles_ITEM_WEAPON_3,
 2854                        		.dbg	line,	"include\tables_SHOP.c", 39; &tiles_ITEM_WEAPON_4,
 2855                        		.dbg	line,	"include\tables_SHOP.c", 40; &tiles_ITEM_WEAPON_5,
 2856                        		.dbg	line,	"include\tables_SHOP.c", 41; &tiles_ITEM_KEY,
 2857                        		.dbg	line,	"include\tables_SHOP.c", 42; &tiles_ITEM_ARMOR_2,
 2858                        		.dbg	line,	"include\tables_SHOP.c", 43; &tiles_ITEM_ARMOR_3,
 2859                        		.dbg	line,	"include\tables_SHOP.c", 44; &tiles_ITEM_ARMOR_4,
 2860                        		.dbg	line,	"include\tables_SHOP.c", 45; &tiles_ITEM_ARMOR_5,
 2861                        		.dbg	line,	"include\tables_SHOP.c", 46; &tiles_ITEM_POTION
 2862                        		.dbg	line,	"include\tables_SHOP.c", 47; };
 2863                        		.dbg	line,	"include\tables_SHOP.c", 50; const unsigned char     TABLE_SHOP_ITEMS_TILES_BANK[10]     =   {
 2864                        		.dbg	line,	"include\tables_SHOP.c", 51; ^tiles_ITEM_WEAPON_2,
 2865                        		.dbg	line,	"include\tables_SHOP.c", 52; ^tiles_ITEM_WEAPON_3,
 2866                        		.dbg	line,	"include\tables_SHOP.c", 53; ^tiles_ITEM_WEAPON_4,
 2867                        		.dbg	line,	"include\tables_SHOP.c", 54; ^tiles_ITEM_WEAPON_5,
 2868                        		.dbg	line,	"include\tables_SHOP.c", 55; ^tiles_ITEM_KEY,
 2869                        		.dbg	line,	"include\tables_SHOP.c", 56; ^tiles_ITEM_ARMOR_2,
 2870                        		.dbg	line,	"include\tables_SHOP.c", 57; ^tiles_ITEM_ARMOR_3,
 2871                        		.dbg	line,	"include\tables_SHOP.c", 58; ^tiles_ITEM_ARMOR_4,
 2872                        		.dbg	line,	"include\tables_SHOP.c", 59; ^tiles_ITEM_ARMOR_5,
 2873                        		.dbg	line,	"include\tables_SHOP.c", 60; ^tiles_ITEM_POTION
 2874                        		.dbg	line,	"include\tables_SHOP.c", 61; };
 2875                        		.dbg	line,	"include\tables_SHOP.c", 64; const char              TABLE_CURSOR_POS_X[11]              =   {
 2876                        		.dbg	line,	"include\tables_SHOP.c", 65; 24,
 2877                        		.dbg	line,	"include\tables_SHOP.c", 66; 56,
 2878                        		.dbg	line,	"include\tables_SHOP.c", 67; 96,
 2879                        		.dbg	line,	"include\tables_SHOP.c", 68; 136,
 2880                        		.dbg	line,	"include\tables_SHOP.c", 69; 176,
 2881                        		.dbg	line,	"include\tables_SHOP.c", 70; 24,
 2882                        		.dbg	line,	"include\tables_SHOP.c", 71; 56,
 2883                        		.dbg	line,	"include\tables_SHOP.c", 72; 96,
 2884                        		.dbg	line,	"include\tables_SHOP.c", 73; 136,
 2885                        		.dbg	line,	"include\tables_SHOP.c", 74; 176,
 2886                        		.dbg	line,	"include\tables_SHOP.c", 75; 212
 2887                        		.dbg	line,	"include\tables_SHOP.c", 76; };
 2888                        		.dbg	line,	"main.c", 22; #include "include/routines_LEVELS.c"
 2889                        		.dbg	line,	"include\routines_LEVELS.c", 1; #include "huc.h"
 2890                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
 2891                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
 2892                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
 2893                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
 2894                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
 2895                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
 2896                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
 2897                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
 2898                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
 2899                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
 2900                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
 2901                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 2902                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 2903                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 2904                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
 2905                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
 2906                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
 2907                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
 2908                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
 2909                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
 2910                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
 2911                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
 2912                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
 2913                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
 2914                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
 2915                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
 2916                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
 2917                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
 2918                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
 2919                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
 2920                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
 2921                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
 2922                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
 2923                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
 2924                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
 2925                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
 2926                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
 2927                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
 2928                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
 2929                        		.dbg	line,	"include\routines_LEVELS.c", 2; #include "hucc-scroll.h"
 2930                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 1; #ifndef _hucc_scroll_h
 2931                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 2; #define _hucc_scroll_h
 2932                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 4; /****************************************************************************
 2933                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 5; ; ***************************************************************************
 2934                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 6; ;
 2935                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 7; ; hucc-scroll.h
 2936                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 8; ;
 2937                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 9; ; Routines for a fast split-screen scrolling system.
 2938                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 10; ;
 2939                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 11; ; Copyright John Brandwood 2024.
 2940                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 12; ;
 2941                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 2942                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 2943                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 2944                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 16; ;
 2945                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 17; ; ***************************************************************************
 2946                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 18; ; ***************************************************************************
 2947                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 19; ;
 2948                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 20; ; The maximum number of splits for each screen layer is set in your project's
 2949                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 21; ; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
 2950                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 22; ;
 2951                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 23; ; Your first active split must be defined to start at screen line 0, and then
 2952                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 24; ; the rest of the active splits must be in increasing line order to match the
 2953                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 25; ; way that the PC Engine displays the output image.
 2954                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 26; ;
 2955                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 27; ; You can have disabled splits interleaved with your active splits.
 2956                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 28; ;
 2957                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 29; ; Splits that are normally disabled can be used to create full screen effects
 2958                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 30; ; such as bouncing the screen up and down by adding blank areas at the top or
 2959                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 31; ; bottom of the screen, and then rapidly changing the height of those areas.
 2960                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 32; ;
 2961                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 33; ; ***************************************************************************
 2962                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 34; ; **************************************************************************/
 2963                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 36; // *************
 2964                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 37; // VDC bits for display_flags ...
 2965                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 38; // *************
 2966                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 40; #ifndef BKG_OFF
 2967                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 41; #define BKG_OFF 0x00
 2968                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 42; #endif
 2969                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 44; #ifndef SPR_OFF
 2970                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 45; #define SPR_OFF 0x00
 2971                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 46; #endif
 2972                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 48; #ifndef BKG_ON
 2973                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 49; #define BKG_ON 0x80
 2974                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 50; #endif
 2975                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 52; #ifndef SPR_ON
 2976                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 53; #define SPR_ON 0x40
 2977                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 54; #endif
 2978                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 56; // *************
 2979                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 57; // Functions in hucc-scroll.asm ...
 2980                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 58; // *************
 2981                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 60; #ifdef __HUCC__
 2982                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 62; #asmdef	HUCC_USES_NEW_SCROLL 1
 2983                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 64; extern void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
 2984                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 65; extern void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
 2985                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 67; extern void __fastcall disable_split( unsigned char index<acc> );
 2986                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 68; extern void __fastcall sgx_disable_split( unsigned char index<acc> );
 2987                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 70; extern void __fastcall __macro disable_all_splits( void );
 2988                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 71; extern void __fastcall __macro sgx_disable_all_splits( void );
 2989                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 73; #asm
 2990                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 74; .macro	_disable_all_splits
 2991                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 75; ldy	#HUCC_PCE_SPLITS - 1
 2992                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 76; !loop:		tya
 2993                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 77; call	_disable_split.1
 2994                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 78; dey
 2995                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 79; bpl	!loop-
 2996                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 80; .endm
 2997                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 82; .macro	_sgx_disable_all_splits
 2998                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 83; ldy	#HUCC_SGX_SPLITS - 1
 2999                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 84; !loop:		tya
 3000                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 85; call	_sgx_disable_split.1
 3001                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 86; dey
 3002                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 87; bpl	!loop-
 3003                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 88; .endm
 3004                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 89; #endasm
 3005                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 91; #endif // __HUCC__
 3006                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 93; #endif // _hucc_scroll_h
 3007                        		.dbg	line,	"include\routines_LEVELS.c", 3; #include "hucc-chrmap.h"
 3008                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 1; #ifndef _hucc_chrmap_h
 3009                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 2; #define _hucc_chrmap_h
 3010                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 4; /****************************************************************************
 3011                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 5; ; ***************************************************************************
 3012                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 6; ;
 3013                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 7; ; hucc-chrmap.h
 3014                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 8; ;
 3015                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 9; ; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
 3016                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 10; ;
 3017                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 11; ; Copyright John Brandwood 2025.
 3018                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 12; ;
 3019                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 3020                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 3021                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 3022                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 16; ;
 3023                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 17; ; ***************************************************************************
 3024                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 18; ; ***************************************************************************
 3025                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 19; ;
 3026                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 20; ; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
 3027                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 21; ;
 3028                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 22; ; The maximum total size for a chrmap is 16KBytes, which allows for maps up
 3029                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 23; ; to 256x32 tiles (2048x256 pixels).
 3030                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 24; ;
 3031                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 25; ; ***************************************************************************
 3032                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 26; ; **************************************************************************/
 3033                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 28; // *************
 3034                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 29; // This code extends the blkmap library ...
 3035                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 30; // *************
 3036                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 32; #include "hucc-blkmap.h"
 3037                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 34; // *************
 3038                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 35; // Functions in chrmap.asm ...
 3039                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 36; // *************
 3040                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 38; #ifdef __HUCC__
 3041                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 40; #asmdef	HUCC_USES_CHRMAP 1
 3042                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 42; extern void __fastcall __nop set_chrmap( unsigned char __far *chrmap<vdc_map_bank:vdc_map_addr>, unsigned char tiles_w<vdc_map_line_w> );
 3043                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 44; extern void __fastcall draw_bat( void );
 3044                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 45; extern void __fastcall scroll_bat( void );
 3045                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 47; extern void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 3046                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 49; #ifdef _SGX
 3047                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 51; extern void __fastcall __nop sgx_set_chrmap( unsigned char __far *chrmap<sgx_map_bank:sgx_map_addr>, unsigned char tiles_w<sgx_map_line_w> );
 3048                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 53; extern void __fastcall sgx_draw_bat( void );
 3049                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 54; extern void __fastcall sgx_scroll_bat( void );
 3050                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 56; extern void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 3051                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 58; #endif
 3052                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 60; #endif // __HUCC__
 3053                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 62; #endif // _hucc_chrmap_h
 3054                        		.dbg	line,	"include\routines_LEVELS.c", 4; #include "hucc-blkmap.h"
 3055                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
 3056                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
 3057                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
 3058                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
 3059                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
 3060                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
 3061                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
 3062                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
 3063                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
 3064                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
 3065                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
 3066                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 3067                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 3068                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 3069                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
 3070                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
 3071                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
 3072                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
 3073                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
 3074                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
 3075                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
 3076                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
 3077                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
 3078                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
 3079                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
 3080                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
 3081                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
 3082                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
 3083                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
 3084                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
 3085                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
 3086                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
 3087                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
 3088                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
 3089                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
 3090                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
 3091                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
 3092                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
 3093                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
 3094                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
 3095                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
 3096                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
 3097                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
 3098                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
 3099                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
 3100                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
 3101                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
 3102                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
 3103                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
 3104                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
 3105                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
 3106                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
 3107                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
 3108                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
 3109                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
 3110                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
 3111                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
 3112                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
 3113                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
 3114                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
 3115                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
 3116                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
 3117                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
 3118                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
 3119                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 3120                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 3121                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
 3122                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 86; .macro	_set_blkmap.2
 3123                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 87; stz	vdc_scr_bank
 3124                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 88; .endm
 3125                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 90; .macro	_set_multimap.2
 3126                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 91; lda	vdc_bat_width
 3127                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 92; lsr	a
 3128                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 93; sta	vdc_map_line_w
 3129                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 94; .endm
 3130                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 96; .macro	SCREEN
 3131                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 97; db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
 3132                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 98; db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
 3133                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 99; db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
 3134                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 100; dw	(\4)
 3135                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 101; .endm
 3136                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
 3137                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
 3138                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
 3139                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
 3140                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
 3141                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
 3142                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
 3143                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
 3144                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
 3145                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
 3146                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
 3147                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
 3148                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
 3149                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
 3150                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
 3151                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
 3152                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
 3153                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
 3154                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
 3155                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
 3156                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
 3157                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
 3158                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
 3159                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
 3160                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
 3161                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 3162                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 3163                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
 3164                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 144; .macro	_sgx_set_blkmap.2
 3165                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 145; stz	sgx_scr_bank
 3166                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 146; .endm
 3167                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 148; .macro	_sgx_set_multimap.2
 3168                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 149; lda	sgx_bat_width
 3169                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 150; lsr	a
 3170                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 151; sta	sgx_map_line_w
 3171                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 152; .endm
 3172                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
 3173                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
 3174                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
 3175                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
 3176                        		.dbg	line,	"include\routines_LEVELS.c", 13; void hide_LEVEL_SPRITES()
 3177                        		.dbg	line,	"include\routines_LEVELS.c", 14; {
 3178                        	;***********************
 3179                        	;***********************
 3180                        	
 3181                        		.hucc
 3182    14:CA42             		.proc		_hide_LEVEL_SPRITES
 3183                        		__enter		_hide_LEVEL_SPRITES
 3184                        	
 3185                        		.dbg	line,	"include\routines_LEVELS.c", 15; char i;
 3186                        	
 3187                        		.dbg	line,	"include\routines_LEVELS.c", 17; for(i=0 ; i<64 ; i++)
 3188                        		__st.umiq	0, __hide_LEVEL_SPRITES_end - 1  /* i */
         14:CA42  9C 49 26   			stz	__hide_LEVEL_SPRITES_end - 1
 3189    14:CA45             	.LL3:
 3190                        		__ld.umq	__hide_LEVEL_SPRITES_end - 1  /* i */
         14:CA45  AD 49 26   			lda	__hide_LEVEL_SPRITES_end - 1
 3191                        		__ult_b.uiq	64
         14:CA48  C9 40      			cmp	#64		; Subtract integer from A.
         14:CA4A  6A         			ror	a		; CC if A < integer.
         14:CA4B  49 80      			eor	#$80
         14:CA4D  2A         			rol	a
 3192                        		__btrue		.LL5
         14:CA4E  B0 07      			bcs	.LL5
 3193                        		__bra		.LL6
         14:CA50  80 10      			bra	.LL6
 3194    14:CA52             	.LL4:
 3195                        		__inc.umq	__hide_LEVEL_SPRITES_end - 1  /* i */
         14:CA52  EE 49 26   			inc	__hide_LEVEL_SPRITES_end - 1
 3196                        		__bra		.LL3
         14:CA55  80 EE      			bra	.LL3
 3197    14:CA57             	.LL5:
 3198                        	
 3199                        		.dbg	line,	"include\routines_LEVELS.c", 18; {
 3200                        	
 3201                        		.dbg	line,	"include\routines_LEVELS.c", 19; spr_set(i);
 3202                        		__ld.umq	__hide_LEVEL_SPRITES_end - 1  /* i */
         14:CA57  AD 49 26   			lda	__hide_LEVEL_SPRITES_end - 1
 3203                        		__call		_spr_set.1
         14:CA5A  20 DD E7   			call	_spr_set.1
 3204                        	
 3205                        		.dbg	line,	"include\routines_LEVELS.c", 20; spr_hide();
 3206                        		__call		_spr_hide
         14:CA5D  20 F8 E7   			call	_spr_hide
 3207                        	
 3208                        		.dbg	line,	"include\routines_LEVELS.c", 21; }
 3209                        		__bra		.LL4
         14:CA60  80 F0      			bra	.LL4
 3210    14:CA62             	.LL6:
 3211                        	
 3212                        		.dbg	line,	"include\routines_LEVELS.c", 22; }
 3213    14:CA62             	.LL2:
 3214                        		__return	0
         14:CA62  4C EF FF   			jmp	leave_proc
 3215                        		.dbg	clear
 3216                        		.endp
 3217                        		.pceas
 3218                        	
 3219                        		.dbg	line,	"include\routines_LEVELS.c", 27; void display_LIFE()
 3220                        		.dbg	line,	"include\routines_LEVELS.c", 28; {
 3221                        	;***********************
 3222                        	;***********************
 3223                        	
 3224                        		.hucc
 3225                        		.proc		_display_LIFE
 3234                        		.endp
 3235                        		.pceas
 3236                        	
 3237                        		.dbg	line,	"include\routines_LEVELS.c", 33; void display_SCORE()
 3238                        		.dbg	line,	"include\routines_LEVELS.c", 34; {
 3239                        	;***********************
 3240                        	;***********************
 3241                        	
 3242                        		.hucc
 3243    14:CA82             		.proc		_display_SCORE
 3244                        		__enter		_display_SCORE
 3245                        	
 3246                        		.dbg	line,	"include\routines_LEVELS.c", 35; put_number(score,6,14,1);
 3247                        		__ld.wm		_score
         14:CA82  AD 2E 26   			lda.l	_score
         14:CA85  AC 2F 26   			ldy.h	_score
 3248                        		__st.wmq	_bx
         14:CA88  85 FA      			sta.l	_bx
         14:CA8A  84 FB      			sty.h	_bx
 3249                        		__st.umiq	6, _cl
         14:CA8C  A9 06      			lda.l	#6
         14:CA8E  85 FC      			sta	_cl
 3250                        		__st.umiq	14, _dil
         14:CA90  A9 0E      			lda.l	#14
         14:CA92  85 F0      			sta	_dil
 3251                        		__st.umiq	1, _dih
         14:CA94  A9 01      			lda.l	#1
         14:CA96  85 F1      			sta	_dih
 3252                        		__call		_put_number.4
         14:CA98  20 9F FF   			call	_put_number.4
 3253                        	
 3254                        		.dbg	line,	"include\routines_LEVELS.c", 36; }
 3255    14:CA9B             	.LL8:
 3256                        		__return	0
         14:CA9B  4C EF FF   			jmp	leave_proc
 3257                        		.dbg	clear
 3258                        		.endp
 3259                        		.pceas
 3260                        	
 3261                        		.dbg	line,	"include\routines_LEVELS.c", 39; void display_TIME_LEVEL()
 3262                        		.dbg	line,	"include\routines_LEVELS.c", 40; {
 3263                        	;***********************
 3264                        	;***********************
 3265                        	
 3266                        		.hucc
 3267    14:C442             		.proc		_display_TIME_LEVEL
 3268                        		__enter		_display_TIME_LEVEL
 3269                        	
 3270                        		.dbg	line,	"include\routines_LEVELS.c", 41; put_number(minutes,1,1,3);
 3271                        		__ld.um		_minutes
         14:C442  AD 28 23   			lda	_minutes
         14:C445  C2         			cly
 3272                        		__st.wmq	_bx
         14:C446  85 FA      			sta.l	_bx
         14:C448  84 FB      			sty.h	_bx
 3273                        		__st.umiq	1, _cl
         14:C44A  A9 01      			lda.l	#1
         14:C44C  85 FC      			sta	_cl
 3274                        		__st.umiq	1, _dil
         14:C44E  A9 01      			lda.l	#1
         14:C450  85 F0      			sta	_dil
 3275                        		__st.umiq	3, _dih
         14:C452  A9 03      			lda.l	#3
         14:C454  85 F1      			sta	_dih
 3276                        		__call		_put_number.4
         14:C456  20 9F FF   			call	_put_number.4
 3277                        	
 3278                        		.dbg	line,	"include\routines_LEVELS.c", 43; if(seconds < 10)
 3279                        		__ld.umq	_seconds
         14:C459  AD 29 23   			lda	_seconds
 3280                        		__ult_b.uiq	10
         14:C45C  C9 0A      			cmp	#10		; Subtract integer from A.
         14:C45E  6A         			ror	a		; CC if A < integer.
         14:C45F  49 80      			eor	#$80
         14:C461  2A         			rol	a
 3281                        		__bfalse	.LL10
         14:C462  90 2C      			bcc	.LL10
 3282                        	
 3283                        		.dbg	line,	"include\routines_LEVELS.c", 44; {
 3284                        	
 3285                        		.dbg	line,	"include\routines_LEVELS.c", 45; put_number(0,1,3,3);
 3286                        		__st.wmiq	0, _bx
         14:C464  64 FA      			stz.l	_bx
         14:C466  64 FB      			stz.h	_bx
 3287                        		__st.umiq	1, _cl
         14:C468  A9 01      			lda.l	#1
         14:C46A  85 FC      			sta	_cl
 3288                        		__st.umiq	3, _dil
         14:C46C  A9 03      			lda.l	#3
         14:C46E  85 F0      			sta	_dil
 3289                        		__st.umiq	3, _dih
         14:C470  A9 03      			lda.l	#3
         14:C472  85 F1      			sta	_dih
 3290                        		__call		_put_number.4
         14:C474  20 9F FF   			call	_put_number.4
 3291                        	
 3292                        		.dbg	line,	"include\routines_LEVELS.c", 46; put_number(seconds,1,4,3);
 3293                        		__ld.um		_seconds
         14:C477  AD 29 23   			lda	_seconds
         14:C47A  C2         			cly
 3294                        		__st.wmq	_bx
         14:C47B  85 FA      			sta.l	_bx
         14:C47D  84 FB      			sty.h	_bx
 3295                        		__st.umiq	1, _cl
         14:C47F  A9 01      			lda.l	#1
         14:C481  85 FC      			sta	_cl
 3296                        		__st.umiq	4, _dil
         14:C483  A9 04      			lda.l	#4
         14:C485  85 F0      			sta	_dil
 3297                        		__st.umiq	3, _dih
         14:C487  A9 03      			lda.l	#3
         14:C489  85 F1      			sta	_dih
 3298                        		__call		_put_number.4
         14:C48B  20 9F FF   			call	_put_number.4
 3299                        	
 3300                        		.dbg	line,	"include\routines_LEVELS.c", 47; }
 3301                        	
 3302                        		.dbg	line,	"include\routines_LEVELS.c", 49; else
 3303                        		__bra		.LL11
         14:C48E  80 17      			bra	.LL11
 3304    14:C490             	.LL10:
 3305                        	
 3306                        		.dbg	line,	"include\routines_LEVELS.c", 50; {
 3307                        	
 3308                        		.dbg	line,	"include\routines_LEVELS.c", 51; put_number(seconds,2,3,3);
 3309                        		__ld.um		_seconds
         14:C490  AD 29 23   			lda	_seconds
         14:C493  C2         			cly
 3310                        		__st.wmq	_bx
         14:C494  85 FA      			sta.l	_bx
         14:C496  84 FB      			sty.h	_bx
 3311                        		__st.umiq	2, _cl
         14:C498  A9 02      			lda.l	#2
         14:C49A  85 FC      			sta	_cl
 3312                        		__st.umiq	3, _dil
         14:C49C  A9 03      			lda.l	#3
         14:C49E  85 F0      			sta	_dil
 3313                        		__st.umiq	3, _dih
         14:C4A0  A9 03      			lda.l	#3
         14:C4A2  85 F1      			sta	_dih
 3314                        		__call		_put_number.4
         14:C4A4  20 9F FF   			call	_put_number.4
 3315                        	
 3316                        		.dbg	line,	"include\routines_LEVELS.c", 52; }
 3317    14:C4A7             	.LL11:
 3318                        	
 3319                        		.dbg	line,	"include\routines_LEVELS.c", 54; time_counter += 1;
 3320                        		__add_st.umiq	1, _time_counter
         14:C4A7  EE 2A 23   			inc	_time_counter
 3321                        	
 3322                        		.dbg	line,	"include\routines_LEVELS.c", 56; if(time_counter == 60)
 3323                        		__ld.umq	_time_counter
         14:C4AA  AD 2A 23   			lda	_time_counter
 3324                        		__equ_b.uiq	60
         14:C4AD  C9 3C      			cmp	#60
         14:C4AF  F0 01      			beq	!+
         14:C4B1  18         			clc
         14:C4B2             	!:
 3325                        		__bfalse	.LL12
         14:C4B2  90 28      			bcc	.LL12
 3326                        	
 3327                        		.dbg	line,	"include\routines_LEVELS.c", 57; {
 3328                        	
 3329                        		.dbg	line,	"include\routines_LEVELS.c", 58; time_counter = 0;
 3330                        		__st.umiq	0, _time_counter
         14:C4B4  9C 2A 23   			stz	_time_counter
 3331                        	
 3332                        		.dbg	line,	"include\routines_LEVELS.c", 60; if(seconds > 0)
 3333                        		__ld.umq	_seconds
         14:C4B7  AD 29 23   			lda	_seconds
 3334                        		__ugt_b.uiq	0
         14:C4BA  18         			clc			; Subtract integer+1 from A.
         14:C4BB  E9 00      			sbc	#0		; CS if A > integer.
 3335                        		__bfalse	.LL13
         14:C4BD  90 05      			bcc	.LL13
 3336                        	
 3337                        		.dbg	line,	"include\routines_LEVELS.c", 61; {
 3338                        	
 3339                        		.dbg	line,	"include\routines_LEVELS.c", 62; seconds -= 1;
 3340                        		__sub_st.umiq	1, _seconds
         14:C4BF  CE 29 23   			dec	_seconds
 3341                        	
 3342                        		.dbg	line,	"include\routines_LEVELS.c", 63; }
 3343                        	
 3344                        		.dbg	line,	"include\routines_LEVELS.c", 65; else
 3345                        		__bra		.LL14
         14:C4C2  80 18      			bra	.LL14
 3346    14:C4C4             	.LL13:
 3347                        	
 3348                        		.dbg	line,	"include\routines_LEVELS.c", 66; {
 3349                        	
 3350                        		.dbg	line,	"include\routines_LEVELS.c", 67; if(minutes > 0)
 3351                        		__ld.umq	_minutes
         14:C4C4  AD 28 23   			lda	_minutes
 3352                        		__ugt_b.uiq	0
         14:C4C7  18         			clc			; Subtract integer+1 from A.
         14:C4C8  E9 00      			sbc	#0		; CS if A > integer.
 3353                        		__bfalse	.LL15
         14:C4CA  90 0A      			bcc	.LL15
 3354                        	
 3355                        		.dbg	line,	"include\routines_LEVELS.c", 68; {
 3356                        	
 3357                        		.dbg	line,	"include\routines_LEVELS.c", 69; seconds = 59;
 3358                        		__st.umiq	59, _seconds
         14:C4CC  A9 3B      			lda.l	#59
         14:C4CE  8D 29 23   			sta	_seconds
 3359                        	
 3360                        		.dbg	line,	"include\routines_LEVELS.c", 70; minutes -= 1;
 3361                        		__sub_st.umiq	1, _minutes
         14:C4D1  CE 28 23   			dec	_minutes
 3362                        	
 3363                        		.dbg	line,	"include\routines_LEVELS.c", 71; }
 3364                        	
 3365                        		.dbg	line,	"include\routines_LEVELS.c", 73; else
 3366                        		__bra		.LL16
         14:C4D4  80 06      			bra	.LL16
 3367    14:C4D6             	.LL15:
 3368                        	
 3369                        		.dbg	line,	"include\routines_LEVELS.c", 74; {
 3370                        	
 3371                        		.dbg	line,	"include\routines_LEVELS.c", 75; seconds = 0;
 3372                        		__st.umiq	0, _seconds
         14:C4D6  9C 29 23   			stz	_seconds
 3373                        	
 3374                        		.dbg	line,	"include\routines_LEVELS.c", 76; minutes = 0;
 3375                        		__st.umiq	0, _minutes
         14:C4D9  9C 28 23   			stz	_minutes
 3376                        	
 3377                        		.dbg	line,	"include\routines_LEVELS.c", 77; // TIME OUT //
 3378                        	
 3379                        		.dbg	line,	"include\routines_LEVELS.c", 78; }
 3380    14:C4DC             	.LL16:
 3381                        	
 3382                        		.dbg	line,	"include\routines_LEVELS.c", 79; }
 3383    14:C4DC             	.LL14:
 3384                        	
 3385                        		.dbg	line,	"include\routines_LEVELS.c", 80; } 
 3386                        	
 3387                        		.dbg	line,	"include\routines_LEVELS.c", 81; }
 3388    14:C4DC             	.LL12:
 3389    14:C4DC             	.LL9:
 3390                        		__return	0
         14:C4DC  4C EF FF   			jmp	leave_proc
 3391                        		.dbg	clear
 3392                        		.endp
 3393                        		.pceas
 3394                        	
 3395                        		.dbg	line,	"include\routines_LEVELS.c", 84; void display_KEY()
 3396                        		.dbg	line,	"include\routines_LEVELS.c", 85; {
 3397                        	;***********************
 3398                        	;***********************
 3399                        	
 3400                        		.hucc
 3401    14:CAD6             		.proc		_display_KEY
 3402                        		__enter		_display_KEY
 3403                        	
 3404                        		.dbg	line,	"include\routines_LEVELS.c", 86; put_number(key_amount,2,7,27);
 3405                        		__ld.um		_key_amount
         14:CAD6  AD 26 23   			lda	_key_amount
         14:CAD9  C2         			cly
 3406                        		__st.wmq	_bx
         14:CADA  85 FA      			sta.l	_bx
         14:CADC  84 FB      			sty.h	_bx
 3407                        		__st.umiq	2, _cl
         14:CADE  A9 02      			lda.l	#2
         14:CAE0  85 FC      			sta	_cl
 3408                        		__st.umiq	7, _dil
         14:CAE2  A9 07      			lda.l	#7
         14:CAE4  85 F0      			sta	_dil
 3409                        		__st.umiq	27, _dih
         14:CAE6  A9 1B      			lda.l	#27
         14:CAE8  85 F1      			sta	_dih
 3410                        		__call		_put_number.4
         14:CAEA  20 9F FF   			call	_put_number.4
 3411                        	
 3412                        		.dbg	line,	"include\routines_LEVELS.c", 87; }
 3413    14:CAED             	.LL17:
 3414                        		__return	0
         14:CAED  4C EF FF   			jmp	leave_proc
 3415                        		.dbg	clear
 3416                        		.endp
 3417                        		.pceas
 3418                        	
 3419                        		.dbg	line,	"include\routines_LEVELS.c", 90; void display_POTION()
 3420                        		.dbg	line,	"include\routines_LEVELS.c", 91; {
 3421                        	;***********************
 3422                        	;***********************
 3423                        	
 3424                        		.hucc
 3425    14:CAF0             		.proc		_display_POTION
 3426                        		__enter		_display_POTION
 3427                        	
 3428                        		.dbg	line,	"include\routines_LEVELS.c", 92; put_number(potion_amount,2,19,27);
 3429                        		__ld.um		_potion_amount
         14:CAF0  AD 27 23   			lda	_potion_amount
         14:CAF3  C2         			cly
 3430                        		__st.wmq	_bx
         14:CAF4  85 FA      			sta.l	_bx
         14:CAF6  84 FB      			sty.h	_bx
 3431                        		__st.umiq	2, _cl
         14:CAF8  A9 02      			lda.l	#2
         14:CAFA  85 FC      			sta	_cl
 3432                        		__st.umiq	19, _dil
         14:CAFC  A9 13      			lda.l	#19
         14:CAFE  85 F0      			sta	_dil
 3433                        		__st.umiq	27, _dih
         14:CB00  A9 1B      			lda.l	#27
         14:CB02  85 F1      			sta	_dih
 3434                        		__call		_put_number.4
         14:CB04  20 9F FF   			call	_put_number.4
 3435                        	
 3436                        		.dbg	line,	"include\routines_LEVELS.c", 93; }
 3437    14:CB07             	.LL18:
 3438                        		__return	0
         14:CB07  4C EF FF   			jmp	leave_proc
 3439                        		.dbg	clear
 3440                        		.endp
 3441                        		.pceas
 3442                        	
 3443                        		.dbg	line,	"include\routines_LEVELS.c", 96; void display_ZENNY()
 3444                        		.dbg	line,	"include\routines_LEVELS.c", 97; {
 3445                        	;***********************
 3446                        	;***********************
 3447                        	
 3448                        		.hucc
 3449    14:CA9E             		.proc		_display_ZENNY
 3450                        		__enter		_display_ZENNY
 3451                        	
 3452                        		.dbg	line,	"include\routines_LEVELS.c", 98; put_number(zenny_amount,5,26,4);
 3453                        		__ld.wm		_zenny_amount
         14:CA9E  AD 2C 26   			lda.l	_zenny_amount
         14:CAA1  AC 2D 26   			ldy.h	_zenny_amount
 3454                        		__st.wmq	_bx
         14:CAA4  85 FA      			sta.l	_bx
         14:CAA6  84 FB      			sty.h	_bx
 3455                        		__st.umiq	5, _cl
         14:CAA8  A9 05      			lda.l	#5
         14:CAAA  85 FC      			sta	_cl
 3456                        		__st.umiq	26, _dil
         14:CAAC  A9 1A      			lda.l	#26
         14:CAAE  85 F0      			sta	_dil
 3457                        		__st.umiq	4, _dih
         14:CAB0  A9 04      			lda.l	#4
         14:CAB2  85 F1      			sta	_dih
 3458                        		__call		_put_number.4
         14:CAB4  20 9F FF   			call	_put_number.4
 3459                        	
 3460                        		.dbg	line,	"include\routines_LEVELS.c", 99; }
 3461    14:CAB7             	.LL19:
 3462                        		__return	0
         14:CAB7  4C EF FF   			jmp	leave_proc
 3463                        		.dbg	clear
 3464                        		.endp
 3465                        		.pceas
 3466                        	
 3467                        		.dbg	line,	"include\routines_LEVELS.c", 104; void scroll_object()
 3468                        		.dbg	line,	"include\routines_LEVELS.c", 105; {
 3469                        	;***********************
 3470                        	;***********************
 3471                        	
 3472                        		.hucc
 3473    02:D7AE             		.proc		_scroll_object
 3474                        		__enter		_scroll_object
 3475                        	
 3476                        		.dbg	line,	"include\routines_LEVELS.c", 106; char i;
 3477                        	
 3478                        		.dbg	line,	"include\routines_LEVELS.c", 107; onscreen_object_number = 0;
 3479                        		__st.umiq	0, _onscreen_object_number
         02:D7AE  9C 2F 23   			stz	_onscreen_object_number
 3480                        	
 3481                        		.dbg	line,	"include\routines_LEVELS.c", 109; for(i=0 ; i<level_object_number ; i++)
 3482                        		__st.umiq	0, __scroll_object_end - 1  /* i */
         02:D7B1  9C 49 26   			stz	__scroll_object_end - 1
 3483    02:D7B4             	.LL21:
 3484                        		__ld.umq	__scroll_object_end - 1  /* i */
         02:D7B4  AD 49 26   			lda	__scroll_object_end - 1
 3485                        		__ult_b.umq	_level_object_number
         02:D7B7  CD 2E 23   			cmp	_level_object_number		; Subtract memory from A.
         02:D7BA  6A         			ror	a		; CC if A < memory.
         02:D7BB  49 80      			eor	#$80
         02:D7BD  2A         			rol	a
 3486                        		__btrue		.LL23
         02:D7BE  B0 08      			bcs	.LL23
 3487                        		__bra		.LL24
         02:D7C0  4C 12 D9   			bra	.LL24
 3488    02:D7C3             	.LL22:
 3489                        		__inc.umq	__scroll_object_end - 1  /* i */
         02:D7C3  EE 49 26   			inc	__scroll_object_end - 1
 3490                        		__bra		.LL21
         02:D7C6  80 EC      			bra	.LL21
 3491    02:D7C8             	.LL23:
 3492                        	
 3493                        		.dbg	line,	"include\routines_LEVELS.c", 110; {
 3494                        	
 3495                        		.dbg	line,	"include\routines_LEVELS.c", 111; if(list_object_state[i] != STATE_INACTIVE)
 3496                        		__ldx.umq	__scroll_object_end - 1  /* i */
         02:D7C8  AE 49 26   			ldx	__scroll_object_end - 1
 3497                        		__ld.uaxq	_list_object_state
         02:D7CB  BD 49 23   			lda	_list_object_state, x
 3498                        		__neq_b.uiq	1
         02:D7CE  38         			sec
         02:D7CF  49 01      			eor	#1
         02:D7D1  D0 01      			bne	!+
         02:D7D3  18         			clc
         02:D7D4             	!:
 3499                        		__bfalse	.LL25
         02:D7D4  90 ED      			bcc	.LL25
 3500                        	
 3501                        		.dbg	line,	"include\routines_LEVELS.c", 112; {
 3502                        	
 3503                        		.dbg	line,	"include\routines_LEVELS.c", 113; char scroll_allowed = FALSE;
 3504                        		__st.umiq	0, __scroll_object_end - 2  /* scroll_allowed */
         02:D7D6  9C 48 26   			stz	__scroll_object_end - 2
 3505                        	
 3506                        		.dbg	line,	"include\routines_LEVELS.c", 114; 
 3507                        	
 3508                        		.dbg	line,	"include\routines_LEVELS.c", 115; // IF OBJECT X POSITION IS INFERIOR TO SCREEN RIGHT SIDE //
 3509                        	
 3510                        		.dbg	line,	"include\routines_LEVELS.c", 116; if(list_object_x_pos_ref[i] < sgx_map_pxl_x + 256)
 3511                        		__ld.wm		_sgx_map_pxl_x
         02:D7D9  AD 8E 26   			lda.l	_sgx_map_pxl_x
         02:D7DC  AC 8F 26   			ldy.h	_sgx_map_pxl_x
 3512                        		__add.wi	256
         02:D7DF  18         			clc
         02:D7E0  69 00      			adc.l	#256
         02:D7E2  42         			say
         02:D7E3  69 01      			adc.h	#256
         02:D7E5  42         			say
 3513                        		__ld2x.um	__scroll_object_end - 1  /* i */
         02:D7E6  AA         			tax
         02:D7E7  AD 49 26   			lda	__scroll_object_end - 1
         02:D7EA  0A         			asl	a
         02:D7EB  22         			sax
 3514                        		__ugt_w.wax	_list_object_x_pos_ref
         02:D7EC  18         			clc			; Subtract memory+1 from Y:A.
         02:D7ED  FD 40 25   			sbc.l	_list_object_x_pos_ref, x
         02:D7F0  98         			tya
         02:D7F1  FD 41 25   			sbc.h	_list_object_x_pos_ref, x		; CS if Y:A > memory.
 3515                        		__bfalse	.LL26
         02:D7F4  B0 03 4C 79			bcc	.LL26
         02:D7F8  D8          
 3516                        	
 3517                        		.dbg	line,	"include\routines_LEVELS.c", 117; {
 3518                        	
 3519                        		.dbg	line,	"include\routines_LEVELS.c", 118; // IF OBJECT X POSITION IS SUPERIOR TO SCREEN LEFT SIDE PLUS 16 PX //
 3520                        	
 3521                        		.dbg	line,	"include\routines_LEVELS.c", 119; if(list_object_x_pos_ref[i] - sgx_map_pxl_x + 16 > 0)
 3522                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         02:D7F9  AD 49 26   			lda	__scroll_object_end - 1
         02:D7FC  0A         			asl	a
         02:D7FD  AA         			tax
 3523                        		__ld.wax	_list_object_x_pos_ref
         02:D7FE  BD 40 25   			lda.l	_list_object_x_pos_ref, x
         02:D801  BC 41 25   			ldy.h	_list_object_x_pos_ref, x
 3524                        		__sub.wm	_sgx_map_pxl_x
         02:D804  38         			sec
         02:D805  ED 8E 26   			sbc.l	_sgx_map_pxl_x
         02:D808  42         			say
         02:D809  ED 8F 26   			sbc.h	_sgx_map_pxl_x
         02:D80C  42         			say
 3525                        		__add.wi	16
         02:D80D  18         			clc
         02:D80E  69 10      			adc.l	#16
         02:D810  90 01      			bcc	!+
         02:D812  C8         			iny
         02:D813             	!:
 3526                        		__sgt_w.wi	0
         02:D813  18         			clc			; Subtract integer+1 from Y:A.
         02:D814  E9 00      			sbc.l	#0
         02:D816  98         			tya
         02:D817  E9 00      			sbc.h	#0
         02:D819  50 02      			bvc	!+
         02:D81B  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         02:D81D  49 80      	!:		eor	#$80
         02:D81F  0A         			asl	a
 3527                        		__bfalse	.LL27
         02:D820  90 57      			bcc	.LL27
 3528                        	
 3529                        		.dbg	line,	"include\routines_LEVELS.c", 120; {
 3530                        	
 3531                        		.dbg	line,	"include\routines_LEVELS.c", 121; // IF OBJECT Y POSITION IS INFERIOR TO SCREEN BOTTOM //
 3532                        	
 3533                        		.dbg	line,	"include\routines_LEVELS.c", 122; if(list_object_y_pos_ref[i] < sgx_map_pxl_y + 224)
 3534                        		__ld.wm		_sgx_map_pxl_y
         02:D822  AD 90 26   			lda.l	_sgx_map_pxl_y
         02:D825  AC 91 26   			ldy.h	_sgx_map_pxl_y
 3535                        		__add.wi	224
         02:D828  18         			clc
         02:D829  69 E0      			adc.l	#224
         02:D82B  90 01      			bcc	!+
         02:D82D  C8         			iny
         02:D82E             	!:
 3536                        		__ld2x.um	__scroll_object_end - 1  /* i */
         02:D82E  AA         			tax
         02:D82F  AD 49 26   			lda	__scroll_object_end - 1
         02:D832  0A         			asl	a
         02:D833  22         			sax
 3537                        		__ugt_w.wax	_list_object_y_pos_ref
         02:D834  18         			clc			; Subtract memory+1 from Y:A.
         02:D835  FD 72 25   			sbc.l	_list_object_y_pos_ref, x
         02:D838  98         			tya
         02:D839  FD 73 25   			sbc.h	_list_object_y_pos_ref, x		; CS if Y:A > memory.
 3538                        		__bfalse	.LL28
         02:D83C  90 3B      			bcc	.LL28
 3539                        	
 3540                        		.dbg	line,	"include\routines_LEVELS.c", 123; {
 3541                        	
 3542                        		.dbg	line,	"include\routines_LEVELS.c", 124; // IF OBJECT Y POSITION IS SUPERIOR TO SCREEN TOP PLUS 16 PX //
 3543                        	
 3544                        		.dbg	line,	"include\routines_LEVELS.c", 125; if(list_object_y_pos_ref[i] - sgx_map_pxl_y + 16 > 0)
 3545                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         02:D83E  AD 49 26   			lda	__scroll_object_end - 1
         02:D841  0A         			asl	a
         02:D842  AA         			tax
 3546                        		__ld.wax	_list_object_y_pos_ref
         02:D843  BD 72 25   			lda.l	_list_object_y_pos_ref, x
         02:D846  BC 73 25   			ldy.h	_list_object_y_pos_ref, x
 3547                        		__sub.wm	_sgx_map_pxl_y
         02:D849  38         			sec
         02:D84A  ED 90 26   			sbc.l	_sgx_map_pxl_y
         02:D84D  42         			say
         02:D84E  ED 91 26   			sbc.h	_sgx_map_pxl_y
         02:D851  42         			say
 3548                        		__add.wi	16
         02:D852  18         			clc
         02:D853  69 10      			adc.l	#16
         02:D855  90 01      			bcc	!+
         02:D857  C8         			iny
         02:D858             	!:
 3549                        		__sgt_w.wi	0
         02:D858  18         			clc			; Subtract integer+1 from Y:A.
         02:D859  E9 00      			sbc.l	#0
         02:D85B  98         			tya
         02:D85C  E9 00      			sbc.h	#0
         02:D85E  50 02      			bvc	!+
         02:D860  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         02:D862  49 80      	!:		eor	#$80
         02:D864  0A         			asl	a
 3550                        		__bfalse	.LL29
         02:D865  90 12      			bcc	.LL29
 3551                        	
 3552                        		.dbg	line,	"include\routines_LEVELS.c", 126; {
 3553                        	
 3554                        		.dbg	line,	"include\routines_LEVELS.c", 127; // WE STORE THE OBJECT ID //
 3555                        	
 3556                        		.dbg	line,	"include\routines_LEVELS.c", 128; //put_number(i,2,0,2+onscreen_object_number);
 3557                        	
 3558                        		.dbg	line,	"include\routines_LEVELS.c", 129; list_onscreen_object[onscreen_object_number] = i;
 3559                        		__ldx.umq	_onscreen_object_number
         02:D867  AE 2F 23   			ldx	_onscreen_object_number
 3560                        		__ld.um		__scroll_object_end - 1  /* i */
         02:D86A  AD 49 26   			lda	__scroll_object_end - 1
         02:D86D  C2         			cly
 3561                        		__st.uaxq	_list_onscreen_object
         02:D86E  9D 94 23   			sta	_list_onscreen_object, x
 3562                        	
 3563                        		.dbg	line,	"include\routines_LEVELS.c", 130; onscreen_object_number += 1;
 3564                        		__add_st.umiq	1, _onscreen_object_number
         02:D871  EE 2F 23   			inc	_onscreen_object_number
 3565                        	
 3566                        		.dbg	line,	"include\routines_LEVELS.c", 131; 
 3567                        	
 3568                        		.dbg	line,	"include\routines_LEVELS.c", 132; //list_object_visibility[i] = ON_SCREEN;
 3569                        	
 3570                        		.dbg	line,	"include\routines_LEVELS.c", 133; scroll_allowed = TRUE;
 3571                        		__st.umiq	1, __scroll_object_end - 2  /* scroll_allowed */
         02:D874  A9 01      			lda.l	#1
         02:D876  8D 48 26   			sta	__scroll_object_end - 2
 3572                        	
 3573                        		.dbg	line,	"include\routines_LEVELS.c", 134; }
 3574                        	
 3575                        		.dbg	line,	"include\routines_LEVELS.c", 135; }
 3576    02:D879             	.LL29:
 3577                        	
 3578                        		.dbg	line,	"include\routines_LEVELS.c", 136; }
 3579    02:D879             	.LL28:
 3580                        	
 3581                        		.dbg	line,	"include\routines_LEVELS.c", 137; }
 3582    02:D879             	.LL27:
 3583                        	
 3584                        		.dbg	line,	"include\routines_LEVELS.c", 139; // IF OBJECTS IS WITHIN THE SCREEN LIMITS //
 3585                        	
 3586                        		.dbg	line,	"include\routines_LEVELS.c", 140; if(scroll_allowed == TRUE)
 3587    02:D879             	.LL26:
 3588                        		__ld.umq	__scroll_object_end - 2  /* scroll_allowed */
         02:D879  AD 48 26   			lda	__scroll_object_end - 2
 3589                        		__equ_b.uiq	1
         02:D87C  C9 01      			cmp	#1
         02:D87E  F0 01      			beq	!+
         02:D880  18         			clc
         02:D881             	!:
 3590                        		__bfalse	.LL30
         02:D881  90 44      			bcc	.LL30
 3591                        	
 3592                        		.dbg	line,	"include\routines_LEVELS.c", 141; {
 3593                        	
 3594                        		.dbg	line,	"include\routines_LEVELS.c", 142; list_object_x_pos[i] = list_object_x_pos_ref[i] - sgx_map_pxl_x;
 3595                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         02:D883  AD 49 26   			lda	__scroll_object_end - 1
         02:D886  0A         			asl	a
         02:D887  AA         			tax
 3596                        		__ld.wax	_list_object_x_pos_ref
         02:D888  BD 40 25   			lda.l	_list_object_x_pos_ref, x
         02:D88B  BC 41 25   			ldy.h	_list_object_x_pos_ref, x
 3597                        		__sub.wm	_sgx_map_pxl_x
         02:D88E  38         			sec
         02:D88F  ED 8E 26   			sbc.l	_sgx_map_pxl_x
         02:D892  42         			say
         02:D893  ED 8F 26   			sbc.h	_sgx_map_pxl_x
         02:D896  42         			say
 3598                        		__ld2x.um	__scroll_object_end - 1  /* i */
         02:D897  AA         			tax
         02:D898  AD 49 26   			lda	__scroll_object_end - 1
         02:D89B  0A         			asl	a
         02:D89C  22         			sax
 3599                        		__st.waxq	_list_object_x_pos
         02:D89D  9D DC 24   			sta.l	_list_object_x_pos, x
         02:D8A0  98         			tya
         02:D8A1  9D DD 24   			sta.h	_list_object_x_pos, x
 3600                        	
 3601                        		.dbg	line,	"include\routines_LEVELS.c", 143; list_object_y_pos[i] = list_object_y_pos_ref[i] - sgx_map_pxl_y;
 3602                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         02:D8A4  AD 49 26   			lda	__scroll_object_end - 1
         02:D8A7  0A         			asl	a
         02:D8A8  AA         			tax
 3603                        		__ld.wax	_list_object_y_pos_ref
         02:D8A9  BD 72 25   			lda.l	_list_object_y_pos_ref, x
         02:D8AC  BC 73 25   			ldy.h	_list_object_y_pos_ref, x
 3604                        		__sub.wm	_sgx_map_pxl_y
         02:D8AF  38         			sec
         02:D8B0  ED 90 26   			sbc.l	_sgx_map_pxl_y
         02:D8B3  42         			say
         02:D8B4  ED 91 26   			sbc.h	_sgx_map_pxl_y
         02:D8B7  42         			say
 3605                        		__ld2x.um	__scroll_object_end - 1  /* i */
         02:D8B8  AA         			tax
         02:D8B9  AD 49 26   			lda	__scroll_object_end - 1
         02:D8BC  0A         			asl	a
         02:D8BD  22         			sax
 3606                        		__st.waxq	_list_object_y_pos
         02:D8BE  9D 0E 25   			sta.l	_list_object_y_pos, x
         02:D8C1  98         			tya
         02:D8C2  9D 0F 25   			sta.h	_list_object_y_pos, x
 3607                        	
 3608                        		.dbg	line,	"include\routines_LEVELS.c", 144; }
 3609                        	
 3610                        		.dbg	line,	"include\routines_LEVELS.c", 146; else
 3611                        		__bra		.LL31
         02:D8C5  80 1E      			bra	.LL31
 3612    02:D8C7             	.LL30:
 3613                        	
 3614                        		.dbg	line,	"include\routines_LEVELS.c", 147; {
 3615                        	
 3616                        		.dbg	line,	"include\routines_LEVELS.c", 148; list_object_x_pos[i] = -16;
 3617                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         02:D8C7  AD 49 26   			lda	__scroll_object_end - 1
         02:D8CA  0A         			asl	a
         02:D8CB  AA         			tax
 3618                        		__st.waxiq	-16, _list_object_x_pos
         02:D8CC  A9 F0      			lda.l	#-16
         02:D8CE  9D DC 24   			sta.l	_list_object_x_pos, x
         02:D8D1  A9 FF      			lda.h	#-16
         02:D8D3  9D DD 24   			sta.h	_list_object_x_pos, x
 3619                        	
 3620                        		.dbg	line,	"include\routines_LEVELS.c", 149; list_object_y_pos[i] = -16;
 3621                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         02:D8D6  AD 49 26   			lda	__scroll_object_end - 1
         02:D8D9  0A         			asl	a
         02:D8DA  AA         			tax
 3622                        		__st.waxiq	-16, _list_object_y_pos
         02:D8DB  A9 F0      			lda.l	#-16
         02:D8DD  9D 0E 25   			sta.l	_list_object_y_pos, x
         02:D8E0  A9 FF      			lda.h	#-16
         02:D8E2  9D 0F 25   			sta.h	_list_object_y_pos, x
 3623                        	
 3624                        		.dbg	line,	"include\routines_LEVELS.c", 150; //list_object_visibility[i] = OFF_SCREEN;
 3625                        	
 3626                        		.dbg	line,	"include\routines_LEVELS.c", 151; }
 3627    02:D8E5             	.LL31:
 3628                        	
 3629                        		.dbg	line,	"include\routines_LEVELS.c", 153; sgx_spr_set(i + object_start_index);
 3630                        		__ld.um		__scroll_object_end - 1  /* i */
         02:D8E5  AD 49 26   			lda	__scroll_object_end - 1
         02:D8E8  C2         			cly
 3631                        		__add.um	_object_start_index
         02:D8E9  18         			clc
         02:D8EA  6D 2D 23   			adc	_object_start_index
         02:D8ED  90 01      			bcc	!+
         02:D8EF  C8         			iny
         02:D8F0             	!:
 3632                        		__call		_sgx_spr_set.1
         02:D8F0  20 8A E8   			call	_sgx_spr_set.1
 3633                        	
 3634                        		.dbg	line,	"include\routines_LEVELS.c", 155; sgx_spr_x(list_object_x_pos[i]);
 3635                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         02:D8F3  AD 49 26   			lda	__scroll_object_end - 1
         02:D8F6  0A         			asl	a
         02:D8F7  AA         			tax
 3636                        		__ld.wax	_list_object_x_pos
         02:D8F8  BD DC 24   			lda.l	_list_object_x_pos, x
         02:D8FB  BC DD 24   			ldy.h	_list_object_x_pos, x
 3637                        		__call		_sgx_spr_x.1
         02:D8FE  20 B7 E8   			call	_sgx_spr_x.1
 3638                        	
 3639                        		.dbg	line,	"include\routines_LEVELS.c", 156; sgx_spr_y(list_object_y_pos[i]);
 3640                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         02:D901  AD 49 26   			lda	__scroll_object_end - 1
         02:D904  0A         			asl	a
         02:D905  AA         			tax
 3641                        		__ld.wax	_list_object_y_pos
         02:D906  BD 0E 25   			lda.l	_list_object_y_pos, x
         02:D909  BC 0F 25   			ldy.h	_list_object_y_pos, x
 3642                        		__call		_sgx_spr_y.1
         02:D90C  20 C6 E8   			call	_sgx_spr_y.1
 3643                        	
 3644                        		.dbg	line,	"include\routines_LEVELS.c", 157; }
 3645                        	
 3646                        		.dbg	line,	"include\routines_LEVELS.c", 158; }
 3647    02:D90F             	.LL25	.alias		.LL22
 3648                        		__bra		.LL22
         02:D90F  4C C3 D7   			bra	.LL22
 3649    02:D912             	.LL24:
 3650                        	
 3651                        		.dbg	line,	"include\routines_LEVELS.c", 159; }
 3652    02:D912             	.LL20:
 3653                        		__return	0
         02:D912  4C EF FF   			jmp	leave_proc
 3654                        		.dbg	clear
 3655                        		.endp
 3656                        		.pceas
 3657                        	
 3658                        		.dbg	line,	"include\routines_LEVELS.c", 162; void scroll_chest()
 3659                        		.dbg	line,	"include\routines_LEVELS.c", 163; {
 3660                        	;***********************
 3661                        	;***********************
 3662                        	
 3663                        		.hucc
 3664    02:D915             		.proc		_scroll_chest
 3665                        		__enter		_scroll_chest
 3666                        	
 3667                        		.dbg	line,	"include\routines_LEVELS.c", 164; char i;
 3668                        	
 3669                        		.dbg	line,	"include\routines_LEVELS.c", 165; onscreen_chest_number = 0;
 3670                        		__st.umiq	0, _onscreen_chest_number
         02:D915  9C 9E 23   			stz	_onscreen_chest_number
 3671                        	
 3672                        		.dbg	line,	"include\routines_LEVELS.c", 167; for(i=0 ; i<level_chest_number ; i++)
 3673                        		__st.umiq	0, __scroll_chest_end - 1  /* i */
         02:D918  9C 49 26   			stz	__scroll_chest_end - 1
 3674    02:D91B             	.LL33:
 3675                        		__ld.umq	__scroll_chest_end - 1  /* i */
         02:D91B  AD 49 26   			lda	__scroll_chest_end - 1
 3676                        		__ult_b.umq	_level_chest_number
         02:D91E  CD 9D 23   			cmp	_level_chest_number		; Subtract memory from A.
         02:D921  6A         			ror	a		; CC if A < memory.
         02:D922  49 80      			eor	#$80
         02:D924  2A         			rol	a
 3677                        		__btrue		.LL35
         02:D925  B0 08      			bcs	.LL35
 3678                        		__bra		.LL36
         02:D927  4C 79 DA   			bra	.LL36
 3679    02:D92A             	.LL34:
 3680                        		__inc.umq	__scroll_chest_end - 1  /* i */
         02:D92A  EE 49 26   			inc	__scroll_chest_end - 1
 3681                        		__bra		.LL33
         02:D92D  80 EC      			bra	.LL33
 3682    02:D92F             	.LL35:
 3683                        	
 3684                        		.dbg	line,	"include\routines_LEVELS.c", 168; {
 3685                        	
 3686                        		.dbg	line,	"include\routines_LEVELS.c", 169; if(list_chest_state[i] != STATE_INACTIVE)
 3687                        		__ldx.umq	__scroll_chest_end - 1  /* i */
         02:D92F  AE 49 26   			ldx	__scroll_chest_end - 1
 3688                        		__ld.uaxq	_list_chest_state
         02:D932  BD 9F 23   			lda	_list_chest_state, x
 3689                        		__neq_b.uiq	1
         02:D935  38         			sec
         02:D936  49 01      			eor	#1
         02:D938  D0 01      			bne	!+
         02:D93A  18         			clc
         02:D93B             	!:
 3690                        		__bfalse	.LL37
         02:D93B  90 ED      			bcc	.LL37
 3691                        	
 3692                        		.dbg	line,	"include\routines_LEVELS.c", 170; {
 3693                        	
 3694                        		.dbg	line,	"include\routines_LEVELS.c", 171; char scroll_allowed = FALSE;
 3695                        		__st.umiq	0, __scroll_chest_end - 2  /* scroll_allowed */
         02:D93D  9C 48 26   			stz	__scroll_chest_end - 2
 3696                        	
 3697                        		.dbg	line,	"include\routines_LEVELS.c", 172; 
 3698                        	
 3699                        		.dbg	line,	"include\routines_LEVELS.c", 173; // IF CHEST X POSITION IS INFERIOR TO SCREEN RIGHT SIDE //
 3700                        	
 3701                        		.dbg	line,	"include\routines_LEVELS.c", 174; if(list_chest_x_pos_ref[i] < sgx_map_pxl_x + 256)
 3702                        		__ld.wm		_sgx_map_pxl_x
         02:D940  AD 8E 26   			lda.l	_sgx_map_pxl_x
         02:D943  AC 8F 26   			ldy.h	_sgx_map_pxl_x
 3703                        		__add.wi	256
         02:D946  18         			clc
         02:D947  69 00      			adc.l	#256
         02:D949  42         			say
         02:D94A  69 01      			adc.h	#256
         02:D94C  42         			say
 3704                        		__ld2x.um	__scroll_chest_end - 1  /* i */
         02:D94D  AA         			tax
         02:D94E  AD 49 26   			lda	__scroll_chest_end - 1
         02:D951  0A         			asl	a
         02:D952  22         			sax
 3705                        		__ugt_w.wax	_list_chest_x_pos_ref
         02:D953  18         			clc			; Subtract memory+1 from Y:A.
         02:D954  FD C4 25   			sbc.l	_list_chest_x_pos_ref, x
         02:D957  98         			tya
         02:D958  FD C5 25   			sbc.h	_list_chest_x_pos_ref, x		; CS if Y:A > memory.
 3706                        		__bfalse	.LL38
         02:D95B  B0 03 4C E0			bcc	.LL38
         02:D95F  D9          
 3707                        	
 3708                        		.dbg	line,	"include\routines_LEVELS.c", 175; {
 3709                        	
 3710                        		.dbg	line,	"include\routines_LEVELS.c", 176; // IF CHEST X POSITION IS SUPERIOR TO SCREEN LEFT SIDE PLUS 32 PX //
 3711                        	
 3712                        		.dbg	line,	"include\routines_LEVELS.c", 177; if(list_chest_x_pos_ref[i] - sgx_map_pxl_x + 32 > 0)
 3713                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         02:D960  AD 49 26   			lda	__scroll_chest_end - 1
         02:D963  0A         			asl	a
         02:D964  AA         			tax
 3714                        		__ld.wax	_list_chest_x_pos_ref
         02:D965  BD C4 25   			lda.l	_list_chest_x_pos_ref, x
         02:D968  BC C5 25   			ldy.h	_list_chest_x_pos_ref, x
 3715                        		__sub.wm	_sgx_map_pxl_x
         02:D96B  38         			sec
         02:D96C  ED 8E 26   			sbc.l	_sgx_map_pxl_x
         02:D96F  42         			say
         02:D970  ED 8F 26   			sbc.h	_sgx_map_pxl_x
         02:D973  42         			say
 3716                        		__add.wi	32
         02:D974  18         			clc
         02:D975  69 20      			adc.l	#32
         02:D977  90 01      			bcc	!+
         02:D979  C8         			iny
         02:D97A             	!:
 3717                        		__sgt_w.wi	0
         02:D97A  18         			clc			; Subtract integer+1 from Y:A.
         02:D97B  E9 00      			sbc.l	#0
         02:D97D  98         			tya
         02:D97E  E9 00      			sbc.h	#0
         02:D980  50 02      			bvc	!+
         02:D982  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         02:D984  49 80      	!:		eor	#$80
         02:D986  0A         			asl	a
 3718                        		__bfalse	.LL39
         02:D987  90 57      			bcc	.LL39
 3719                        	
 3720                        		.dbg	line,	"include\routines_LEVELS.c", 178; {
 3721                        	
 3722                        		.dbg	line,	"include\routines_LEVELS.c", 179; // IF CHEST Y POSITION IS INFERIOR TO SCREEN BOTTOM //
 3723                        	
 3724                        		.dbg	line,	"include\routines_LEVELS.c", 180; if(list_chest_y_pos_ref[i] < sgx_map_pxl_y + 224)
 3725                        		__ld.wm		_sgx_map_pxl_y
         02:D989  AD 90 26   			lda.l	_sgx_map_pxl_y
         02:D98C  AC 91 26   			ldy.h	_sgx_map_pxl_y
 3726                        		__add.wi	224
         02:D98F  18         			clc
         02:D990  69 E0      			adc.l	#224
         02:D992  90 01      			bcc	!+
         02:D994  C8         			iny
         02:D995             	!:
 3727                        		__ld2x.um	__scroll_chest_end - 1  /* i */
         02:D995  AA         			tax
         02:D996  AD 49 26   			lda	__scroll_chest_end - 1
         02:D999  0A         			asl	a
         02:D99A  22         			sax
 3728                        		__ugt_w.wax	_list_chest_y_pos_ref
         02:D99B  18         			clc			; Subtract memory+1 from Y:A.
         02:D99C  FD D4 25   			sbc.l	_list_chest_y_pos_ref, x
         02:D99F  98         			tya
         02:D9A0  FD D5 25   			sbc.h	_list_chest_y_pos_ref, x		; CS if Y:A > memory.
 3729                        		__bfalse	.LL40
         02:D9A3  90 3B      			bcc	.LL40
 3730                        	
 3731                        		.dbg	line,	"include\routines_LEVELS.c", 181; {
 3732                        	
 3733                        		.dbg	line,	"include\routines_LEVELS.c", 182; // IF CHEST Y POSITION IS SUPERIOR TO SCREEN TOP PLUS 32 PX //
 3734                        	
 3735                        		.dbg	line,	"include\routines_LEVELS.c", 183; if(list_chest_y_pos_ref[i] - sgx_map_pxl_y + 32 > 0)
 3736                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         02:D9A5  AD 49 26   			lda	__scroll_chest_end - 1
         02:D9A8  0A         			asl	a
         02:D9A9  AA         			tax
 3737                        		__ld.wax	_list_chest_y_pos_ref
         02:D9AA  BD D4 25   			lda.l	_list_chest_y_pos_ref, x
         02:D9AD  BC D5 25   			ldy.h	_list_chest_y_pos_ref, x
 3738                        		__sub.wm	_sgx_map_pxl_y
         02:D9B0  38         			sec
         02:D9B1  ED 90 26   			sbc.l	_sgx_map_pxl_y
         02:D9B4  42         			say
         02:D9B5  ED 91 26   			sbc.h	_sgx_map_pxl_y
         02:D9B8  42         			say
 3739                        		__add.wi	32
         02:D9B9  18         			clc
         02:D9BA  69 20      			adc.l	#32
         02:D9BC  90 01      			bcc	!+
         02:D9BE  C8         			iny
         02:D9BF             	!:
 3740                        		__sgt_w.wi	0
         02:D9BF  18         			clc			; Subtract integer+1 from Y:A.
         02:D9C0  E9 00      			sbc.l	#0
         02:D9C2  98         			tya
         02:D9C3  E9 00      			sbc.h	#0
         02:D9C5  50 02      			bvc	!+
         02:D9C7  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         02:D9C9  49 80      	!:		eor	#$80
         02:D9CB  0A         			asl	a
 3741                        		__bfalse	.LL41
         02:D9CC  90 12      			bcc	.LL41
 3742                        	
 3743                        		.dbg	line,	"include\routines_LEVELS.c", 184; {
 3744                        	
 3745                        		.dbg	line,	"include\routines_LEVELS.c", 185; // WE STORE THE CHEST ID //
 3746                        	
 3747                        		.dbg	line,	"include\routines_LEVELS.c", 186; list_onscreen_chest[onscreen_chest_number] = i;
 3748                        		__ldx.umq	_onscreen_chest_number
         02:D9CE  AE 9E 23   			ldx	_onscreen_chest_number
 3749                        		__ld.um		__scroll_chest_end - 1  /* i */
         02:D9D1  AD 49 26   			lda	__scroll_chest_end - 1
         02:D9D4  C2         			cly
 3750                        		__st.uaxq	_list_onscreen_chest
         02:D9D5  9D A7 23   			sta	_list_onscreen_chest, x
 3751                        	
 3752                        		.dbg	line,	"include\routines_LEVELS.c", 187; onscreen_chest_number += 1;
 3753                        		__add_st.umiq	1, _onscreen_chest_number
         02:D9D8  EE 9E 23   			inc	_onscreen_chest_number
 3754                        	
 3755                        		.dbg	line,	"include\routines_LEVELS.c", 188; 
 3756                        	
 3757                        		.dbg	line,	"include\routines_LEVELS.c", 189; scroll_allowed = TRUE;
 3758                        		__st.umiq	1, __scroll_chest_end - 2  /* scroll_allowed */
         02:D9DB  A9 01      			lda.l	#1
         02:D9DD  8D 48 26   			sta	__scroll_chest_end - 2
 3759                        	
 3760                        		.dbg	line,	"include\routines_LEVELS.c", 190; }
 3761                        	
 3762                        		.dbg	line,	"include\routines_LEVELS.c", 191; }
 3763    02:D9E0             	.LL41:
 3764                        	
 3765                        		.dbg	line,	"include\routines_LEVELS.c", 192; }
 3766    02:D9E0             	.LL40:
 3767                        	
 3768                        		.dbg	line,	"include\routines_LEVELS.c", 193; }
 3769    02:D9E0             	.LL39:
 3770                        	
 3771                        		.dbg	line,	"include\routines_LEVELS.c", 195; // IF CHEST IS WITHIN THE SCREEN LIMITS //
 3772                        	
 3773                        		.dbg	line,	"include\routines_LEVELS.c", 196; if(scroll_allowed == TRUE)
 3774    02:D9E0             	.LL38:
 3775                        		__ld.umq	__scroll_chest_end - 2  /* scroll_allowed */
         02:D9E0  AD 48 26   			lda	__scroll_chest_end - 2
 3776                        		__equ_b.uiq	1
         02:D9E3  C9 01      			cmp	#1
         02:D9E5  F0 01      			beq	!+
         02:D9E7  18         			clc
         02:D9E8             	!:
 3777                        		__bfalse	.LL42
         02:D9E8  90 44      			bcc	.LL42
 3778                        	
 3779                        		.dbg	line,	"include\routines_LEVELS.c", 197; {
 3780                        	
 3781                        		.dbg	line,	"include\routines_LEVELS.c", 198; list_chest_x_pos[i] = list_chest_x_pos_ref[i] - sgx_map_pxl_x;
 3782                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         02:D9EA  AD 49 26   			lda	__scroll_chest_end - 1
         02:D9ED  0A         			asl	a
         02:D9EE  AA         			tax
 3783                        		__ld.wax	_list_chest_x_pos_ref
         02:D9EF  BD C4 25   			lda.l	_list_chest_x_pos_ref, x
         02:D9F2  BC C5 25   			ldy.h	_list_chest_x_pos_ref, x
 3784                        		__sub.wm	_sgx_map_pxl_x
         02:D9F5  38         			sec
         02:D9F6  ED 8E 26   			sbc.l	_sgx_map_pxl_x
         02:D9F9  42         			say
         02:D9FA  ED 8F 26   			sbc.h	_sgx_map_pxl_x
         02:D9FD  42         			say
 3785                        		__ld2x.um	__scroll_chest_end - 1  /* i */
         02:D9FE  AA         			tax
         02:D9FF  AD 49 26   			lda	__scroll_chest_end - 1
         02:DA02  0A         			asl	a
         02:DA03  22         			sax
 3786                        		__st.waxq	_list_chest_x_pos
         02:DA04  9D A4 25   			sta.l	_list_chest_x_pos, x
         02:DA07  98         			tya
         02:DA08  9D A5 25   			sta.h	_list_chest_x_pos, x
 3787                        	
 3788                        		.dbg	line,	"include\routines_LEVELS.c", 199; list_chest_y_pos[i] = list_chest_y_pos_ref[i] - sgx_map_pxl_y;
 3789                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         02:DA0B  AD 49 26   			lda	__scroll_chest_end - 1
         02:DA0E  0A         			asl	a
         02:DA0F  AA         			tax
 3790                        		__ld.wax	_list_chest_y_pos_ref
         02:DA10  BD D4 25   			lda.l	_list_chest_y_pos_ref, x
         02:DA13  BC D5 25   			ldy.h	_list_chest_y_pos_ref, x
 3791                        		__sub.wm	_sgx_map_pxl_y
         02:DA16  38         			sec
         02:DA17  ED 90 26   			sbc.l	_sgx_map_pxl_y
         02:DA1A  42         			say
         02:DA1B  ED 91 26   			sbc.h	_sgx_map_pxl_y
         02:DA1E  42         			say
 3792                        		__ld2x.um	__scroll_chest_end - 1  /* i */
         02:DA1F  AA         			tax
         02:DA20  AD 49 26   			lda	__scroll_chest_end - 1
         02:DA23  0A         			asl	a
         02:DA24  22         			sax
 3793                        		__st.waxq	_list_chest_y_pos
         02:DA25  9D B4 25   			sta.l	_list_chest_y_pos, x
         02:DA28  98         			tya
         02:DA29  9D B5 25   			sta.h	_list_chest_y_pos, x
 3794                        	
 3795                        		.dbg	line,	"include\routines_LEVELS.c", 200; }
 3796                        	
 3797                        		.dbg	line,	"include\routines_LEVELS.c", 202; else
 3798                        		__bra		.LL43
         02:DA2C  80 1E      			bra	.LL43
 3799    02:DA2E             	.LL42:
 3800                        	
 3801                        		.dbg	line,	"include\routines_LEVELS.c", 203; {
 3802                        	
 3803                        		.dbg	line,	"include\routines_LEVELS.c", 204; list_chest_x_pos[i] = -32;
 3804                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         02:DA2E  AD 49 26   			lda	__scroll_chest_end - 1
         02:DA31  0A         			asl	a
         02:DA32  AA         			tax
 3805                        		__st.waxiq	-32, _list_chest_x_pos
         02:DA33  A9 E0      			lda.l	#-32
         02:DA35  9D A4 25   			sta.l	_list_chest_x_pos, x
         02:DA38  A9 FF      			lda.h	#-32
         02:DA3A  9D A5 25   			sta.h	_list_chest_x_pos, x
 3806                        	
 3807                        		.dbg	line,	"include\routines_LEVELS.c", 205; list_chest_y_pos[i] = -32;
 3808                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         02:DA3D  AD 49 26   			lda	__scroll_chest_end - 1
         02:DA40  0A         			asl	a
         02:DA41  AA         			tax
 3809                        		__st.waxiq	-32, _list_chest_y_pos
         02:DA42  A9 E0      			lda.l	#-32
         02:DA44  9D B4 25   			sta.l	_list_chest_y_pos, x
         02:DA47  A9 FF      			lda.h	#-32
         02:DA49  9D B5 25   			sta.h	_list_chest_y_pos, x
 3810                        	
 3811                        		.dbg	line,	"include\routines_LEVELS.c", 206; }
 3812    02:DA4C             	.LL43:
 3813                        	
 3814                        		.dbg	line,	"include\routines_LEVELS.c", 208; sgx_spr_set(i + chest_start_index);
 3815                        		__ld.um		__scroll_chest_end - 1  /* i */
         02:DA4C  AD 49 26   			lda	__scroll_chest_end - 1
         02:DA4F  C2         			cly
 3816                        		__add.um	_chest_start_index
         02:DA50  18         			clc
         02:DA51  6D 9C 23   			adc	_chest_start_index
         02:DA54  90 01      			bcc	!+
         02:DA56  C8         			iny
         02:DA57             	!:
 3817                        		__call		_sgx_spr_set.1
         02:DA57  20 8A E8   			call	_sgx_spr_set.1
 3818                        	
 3819                        		.dbg	line,	"include\routines_LEVELS.c", 210; sgx_spr_x(list_chest_x_pos[i]);
 3820                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         02:DA5A  AD 49 26   			lda	__scroll_chest_end - 1
         02:DA5D  0A         			asl	a
         02:DA5E  AA         			tax
 3821                        		__ld.wax	_list_chest_x_pos
         02:DA5F  BD A4 25   			lda.l	_list_chest_x_pos, x
         02:DA62  BC A5 25   			ldy.h	_list_chest_x_pos, x
 3822                        		__call		_sgx_spr_x.1
         02:DA65  20 B7 E8   			call	_sgx_spr_x.1
 3823                        	
 3824                        		.dbg	line,	"include\routines_LEVELS.c", 211; sgx_spr_y(list_chest_y_pos[i]);
 3825                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         02:DA68  AD 49 26   			lda	__scroll_chest_end - 1
         02:DA6B  0A         			asl	a
         02:DA6C  AA         			tax
 3826                        		__ld.wax	_list_chest_y_pos
         02:DA6D  BD B4 25   			lda.l	_list_chest_y_pos, x
         02:DA70  BC B5 25   			ldy.h	_list_chest_y_pos, x
 3827                        		__call		_sgx_spr_y.1
         02:DA73  20 C6 E8   			call	_sgx_spr_y.1
 3828                        	
 3829                        		.dbg	line,	"include\routines_LEVELS.c", 212; }
 3830                        	
 3831                        		.dbg	line,	"include\routines_LEVELS.c", 213; }
 3832    02:DA76             	.LL37	.alias		.LL34
 3833                        		__bra		.LL34
         02:DA76  4C 2A D9   			bra	.LL34
 3834    02:DA79             	.LL36:
 3835                        	
 3836                        		.dbg	line,	"include\routines_LEVELS.c", 214; }
 3837    02:DA79             	.LL32:
 3838                        		__return	0
         02:DA79  4C EF FF   			jmp	leave_proc
 3839                        		.dbg	clear
 3840                        		.endp
 3841                        		.pceas
 3842                        	
 3843                        		.dbg	line,	"include\routines_LEVELS.c", 217; void scroll_npc()
 3844                        		.dbg	line,	"include\routines_LEVELS.c", 218; {
 3845                        	;***********************
 3846                        	;***********************
 3847                        	
 3848                        		.hucc
 3849    02:DA7C             		.proc		_scroll_npc
 3850                        		__enter		_scroll_npc
 3851                        	
 3852                        		.dbg	line,	"include\routines_LEVELS.c", 219; char i;
 3853                        	
 3854                        		.dbg	line,	"include\routines_LEVELS.c", 220; onscreen_npc_number = 0;
 3855                        		__st.umiq	0, _onscreen_npc_number
         02:DA7C  9C B1 23   			stz	_onscreen_npc_number
 3856                        	
 3857                        		.dbg	line,	"include\routines_LEVELS.c", 222; for(i=0 ; i<level_npc_number ; i++)
 3858                        		__st.umiq	0, __scroll_npc_end - 1  /* i */
         02:DA7F  9C 49 26   			stz	__scroll_npc_end - 1
 3859    02:DA82             	.LL45:
 3860                        		__ld.umq	__scroll_npc_end - 1  /* i */
         02:DA82  AD 49 26   			lda	__scroll_npc_end - 1
 3861                        		__ult_b.umq	_level_npc_number
         02:DA85  CD B0 23   			cmp	_level_npc_number		; Subtract memory from A.
         02:DA88  6A         			ror	a		; CC if A < memory.
         02:DA89  49 80      			eor	#$80
         02:DA8B  2A         			rol	a
 3862                        		__btrue		.LL47
         02:DA8C  B0 08      			bcs	.LL47
 3863                        		__bra		.LL48
         02:DA8E  4C E0 DB   			bra	.LL48
 3864    02:DA91             	.LL46:
 3865                        		__inc.umq	__scroll_npc_end - 1  /* i */
         02:DA91  EE 49 26   			inc	__scroll_npc_end - 1
 3866                        		__bra		.LL45
         02:DA94  80 EC      			bra	.LL45
 3867    02:DA96             	.LL47:
 3868                        	
 3869                        		.dbg	line,	"include\routines_LEVELS.c", 223; {
 3870                        	
 3871                        		.dbg	line,	"include\routines_LEVELS.c", 224; if(list_npc_state[i] != STATE_INACTIVE)
 3872                        		__ldx.umq	__scroll_npc_end - 1  /* i */
         02:DA96  AE 49 26   			ldx	__scroll_npc_end - 1
 3873                        		__ld.uaxq	_list_npc_state
         02:DA99  BD BB 23   			lda	_list_npc_state, x
 3874                        		__neq_b.uiq	1
         02:DA9C  38         			sec
         02:DA9D  49 01      			eor	#1
         02:DA9F  D0 01      			bne	!+
         02:DAA1  18         			clc
         02:DAA2             	!:
 3875                        		__bfalse	.LL49
         02:DAA2  90 ED      			bcc	.LL49
 3876                        	
 3877                        		.dbg	line,	"include\routines_LEVELS.c", 225; {
 3878                        	
 3879                        		.dbg	line,	"include\routines_LEVELS.c", 226; char scroll_allowed = FALSE;
 3880                        		__st.umiq	0, __scroll_npc_end - 2  /* scroll_allowed */
         02:DAA4  9C 48 26   			stz	__scroll_npc_end - 2
 3881                        	
 3882                        		.dbg	line,	"include\routines_LEVELS.c", 227; 
 3883                        	
 3884                        		.dbg	line,	"include\routines_LEVELS.c", 228; // IF NPC X POSITION IS INFERIOR TO SCREEN RIGHT SIDE //
 3885                        	
 3886                        		.dbg	line,	"include\routines_LEVELS.c", 229; if(list_npc_x_pos_ref[i] < sgx_map_pxl_x + 256)
 3887                        		__ld.wm		_sgx_map_pxl_x
         02:DAA7  AD 8E 26   			lda.l	_sgx_map_pxl_x
         02:DAAA  AC 8F 26   			ldy.h	_sgx_map_pxl_x
 3888                        		__add.wi	256
         02:DAAD  18         			clc
         02:DAAE  69 00      			adc.l	#256
         02:DAB0  42         			say
         02:DAB1  69 01      			adc.h	#256
         02:DAB3  42         			say
 3889                        		__ld2x.um	__scroll_npc_end - 1  /* i */
         02:DAB4  AA         			tax
         02:DAB5  AD 49 26   			lda	__scroll_npc_end - 1
         02:DAB8  0A         			asl	a
         02:DAB9  22         			sax
 3890                        		__ugt_w.wax	_list_npc_x_pos_ref
         02:DABA  18         			clc			; Subtract memory+1 from Y:A.
         02:DABB  FD 08 26   			sbc.l	_list_npc_x_pos_ref, x
         02:DABE  98         			tya
         02:DABF  FD 09 26   			sbc.h	_list_npc_x_pos_ref, x		; CS if Y:A > memory.
 3891                        		__bfalse	.LL50
         02:DAC2  B0 03 4C 47			bcc	.LL50
         02:DAC6  DB          
 3892                        	
 3893                        		.dbg	line,	"include\routines_LEVELS.c", 230; {
 3894                        	
 3895                        		.dbg	line,	"include\routines_LEVELS.c", 231; // IF NPC X POSITION IS SUPERIOR TO SCREEN LEFT SIDE PLUS 32 PX //
 3896                        	
 3897                        		.dbg	line,	"include\routines_LEVELS.c", 232; if(list_npc_x_pos_ref[i] - sgx_map_pxl_x + 32 > 0)
 3898                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         02:DAC7  AD 49 26   			lda	__scroll_npc_end - 1
         02:DACA  0A         			asl	a
         02:DACB  AA         			tax
 3899                        		__ld.wax	_list_npc_x_pos_ref
         02:DACC  BD 08 26   			lda.l	_list_npc_x_pos_ref, x
         02:DACF  BC 09 26   			ldy.h	_list_npc_x_pos_ref, x
 3900                        		__sub.wm	_sgx_map_pxl_x
         02:DAD2  38         			sec
         02:DAD3  ED 8E 26   			sbc.l	_sgx_map_pxl_x
         02:DAD6  42         			say
         02:DAD7  ED 8F 26   			sbc.h	_sgx_map_pxl_x
         02:DADA  42         			say
 3901                        		__add.wi	32
         02:DADB  18         			clc
         02:DADC  69 20      			adc.l	#32
         02:DADE  90 01      			bcc	!+
         02:DAE0  C8         			iny
         02:DAE1             	!:
 3902                        		__sgt_w.wi	0
         02:DAE1  18         			clc			; Subtract integer+1 from Y:A.
         02:DAE2  E9 00      			sbc.l	#0
         02:DAE4  98         			tya
         02:DAE5  E9 00      			sbc.h	#0
         02:DAE7  50 02      			bvc	!+
         02:DAE9  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         02:DAEB  49 80      	!:		eor	#$80
         02:DAED  0A         			asl	a
 3903                        		__bfalse	.LL51
         02:DAEE  90 57      			bcc	.LL51
 3904                        	
 3905                        		.dbg	line,	"include\routines_LEVELS.c", 233; {
 3906                        	
 3907                        		.dbg	line,	"include\routines_LEVELS.c", 234; // IF NPC Y POSITION IS INFERIOR TO SCREEN BOTTOM //
 3908                        	
 3909                        		.dbg	line,	"include\routines_LEVELS.c", 235; if(list_npc_y_pos_ref[i] < sgx_map_pxl_y + 224)
 3910                        		__ld.wm		_sgx_map_pxl_y
         02:DAF0  AD 90 26   			lda.l	_sgx_map_pxl_y
         02:DAF3  AC 91 26   			ldy.h	_sgx_map_pxl_y
 3911                        		__add.wi	224
         02:DAF6  18         			clc
         02:DAF7  69 E0      			adc.l	#224
         02:DAF9  90 01      			bcc	!+
         02:DAFB  C8         			iny
         02:DAFC             	!:
 3912                        		__ld2x.um	__scroll_npc_end - 1  /* i */
         02:DAFC  AA         			tax
         02:DAFD  AD 49 26   			lda	__scroll_npc_end - 1
         02:DB00  0A         			asl	a
         02:DB01  22         			sax
 3913                        		__ugt_w.wax	_list_npc_y_pos_ref
         02:DB02  18         			clc			; Subtract memory+1 from Y:A.
         02:DB03  FD 1A 26   			sbc.l	_list_npc_y_pos_ref, x
         02:DB06  98         			tya
         02:DB07  FD 1B 26   			sbc.h	_list_npc_y_pos_ref, x		; CS if Y:A > memory.
 3914                        		__bfalse	.LL52
         02:DB0A  90 3B      			bcc	.LL52
 3915                        	
 3916                        		.dbg	line,	"include\routines_LEVELS.c", 236; {
 3917                        	
 3918                        		.dbg	line,	"include\routines_LEVELS.c", 237; // IF NPC Y POSITION IS SUPERIOR TO SCREEN TOP PLUS 32 PX //
 3919                        	
 3920                        		.dbg	line,	"include\routines_LEVELS.c", 238; if(list_npc_y_pos_ref[i] - sgx_map_pxl_y + 32 > 0)
 3921                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         02:DB0C  AD 49 26   			lda	__scroll_npc_end - 1
         02:DB0F  0A         			asl	a
         02:DB10  AA         			tax
 3922                        		__ld.wax	_list_npc_y_pos_ref
         02:DB11  BD 1A 26   			lda.l	_list_npc_y_pos_ref, x
         02:DB14  BC 1B 26   			ldy.h	_list_npc_y_pos_ref, x
 3923                        		__sub.wm	_sgx_map_pxl_y
         02:DB17  38         			sec
         02:DB18  ED 90 26   			sbc.l	_sgx_map_pxl_y
         02:DB1B  42         			say
         02:DB1C  ED 91 26   			sbc.h	_sgx_map_pxl_y
         02:DB1F  42         			say
 3924                        		__add.wi	32
         02:DB20  18         			clc
         02:DB21  69 20      			adc.l	#32
         02:DB23  90 01      			bcc	!+
         02:DB25  C8         			iny
         02:DB26             	!:
 3925                        		__sgt_w.wi	0
         02:DB26  18         			clc			; Subtract integer+1 from Y:A.
         02:DB27  E9 00      			sbc.l	#0
         02:DB29  98         			tya
         02:DB2A  E9 00      			sbc.h	#0
         02:DB2C  50 02      			bvc	!+
         02:DB2E  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         02:DB30  49 80      	!:		eor	#$80
         02:DB32  0A         			asl	a
 3926                        		__bfalse	.LL53
         02:DB33  90 12      			bcc	.LL53
 3927                        	
 3928                        		.dbg	line,	"include\routines_LEVELS.c", 239; {
 3929                        	
 3930                        		.dbg	line,	"include\routines_LEVELS.c", 240; // WE STORE THE NPC ID //
 3931                        	
 3932                        		.dbg	line,	"include\routines_LEVELS.c", 241; list_onscreen_npc[onscreen_npc_number] = i;
 3933                        		__ldx.umq	_onscreen_npc_number
         02:DB35  AE B1 23   			ldx	_onscreen_npc_number
 3934                        		__ld.um		__scroll_npc_end - 1  /* i */
         02:DB38  AD 49 26   			lda	__scroll_npc_end - 1
         02:DB3B  C2         			cly
 3935                        		__st.uaxq	_list_onscreen_npc
         02:DB3C  9D C4 23   			sta	_list_onscreen_npc, x
 3936                        	
 3937                        		.dbg	line,	"include\routines_LEVELS.c", 242; onscreen_npc_number += 1;
 3938                        		__add_st.umiq	1, _onscreen_npc_number
         02:DB3F  EE B1 23   			inc	_onscreen_npc_number
 3939                        	
 3940                        		.dbg	line,	"include\routines_LEVELS.c", 243; 
 3941                        	
 3942                        		.dbg	line,	"include\routines_LEVELS.c", 244; scroll_allowed = TRUE;
 3943                        		__st.umiq	1, __scroll_npc_end - 2  /* scroll_allowed */
         02:DB42  A9 01      			lda.l	#1
         02:DB44  8D 48 26   			sta	__scroll_npc_end - 2
 3944                        	
 3945                        		.dbg	line,	"include\routines_LEVELS.c", 245; }
 3946                        	
 3947                        		.dbg	line,	"include\routines_LEVELS.c", 246; }
 3948    02:DB47             	.LL53:
 3949                        	
 3950                        		.dbg	line,	"include\routines_LEVELS.c", 247; }
 3951    02:DB47             	.LL52:
 3952                        	
 3953                        		.dbg	line,	"include\routines_LEVELS.c", 248; }
 3954    02:DB47             	.LL51:
 3955                        	
 3956                        		.dbg	line,	"include\routines_LEVELS.c", 250; // IF NPC IS WITHIN THE SCREEN LIMITS //
 3957                        	
 3958                        		.dbg	line,	"include\routines_LEVELS.c", 251; if(scroll_allowed == TRUE)
 3959    02:DB47             	.LL50:
 3960                        		__ld.umq	__scroll_npc_end - 2  /* scroll_allowed */
         02:DB47  AD 48 26   			lda	__scroll_npc_end - 2
 3961                        		__equ_b.uiq	1
         02:DB4A  C9 01      			cmp	#1
         02:DB4C  F0 01      			beq	!+
         02:DB4E  18         			clc
         02:DB4F             	!:
 3962                        		__bfalse	.LL54
         02:DB4F  90 44      			bcc	.LL54
 3963                        	
 3964                        		.dbg	line,	"include\routines_LEVELS.c", 252; {
 3965                        	
 3966                        		.dbg	line,	"include\routines_LEVELS.c", 253; list_npc_x_pos[i] = list_npc_x_pos_ref[i] - sgx_map_pxl_x;
 3967                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         02:DB51  AD 49 26   			lda	__scroll_npc_end - 1
         02:DB54  0A         			asl	a
         02:DB55  AA         			tax
 3968                        		__ld.wax	_list_npc_x_pos_ref
         02:DB56  BD 08 26   			lda.l	_list_npc_x_pos_ref, x
         02:DB59  BC 09 26   			ldy.h	_list_npc_x_pos_ref, x
 3969                        		__sub.wm	_sgx_map_pxl_x
         02:DB5C  38         			sec
         02:DB5D  ED 8E 26   			sbc.l	_sgx_map_pxl_x
         02:DB60  42         			say
         02:DB61  ED 8F 26   			sbc.h	_sgx_map_pxl_x
         02:DB64  42         			say
 3970                        		__ld2x.um	__scroll_npc_end - 1  /* i */
         02:DB65  AA         			tax
         02:DB66  AD 49 26   			lda	__scroll_npc_end - 1
         02:DB69  0A         			asl	a
         02:DB6A  22         			sax
 3971                        		__st.waxq	_list_npc_x_pos
         02:DB6B  9D E4 25   			sta.l	_list_npc_x_pos, x
         02:DB6E  98         			tya
         02:DB6F  9D E5 25   			sta.h	_list_npc_x_pos, x
 3972                        	
 3973                        		.dbg	line,	"include\routines_LEVELS.c", 254; list_npc_y_pos[i] = list_npc_y_pos_ref[i] - sgx_map_pxl_y;
 3974                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         02:DB72  AD 49 26   			lda	__scroll_npc_end - 1
         02:DB75  0A         			asl	a
         02:DB76  AA         			tax
 3975                        		__ld.wax	_list_npc_y_pos_ref
         02:DB77  BD 1A 26   			lda.l	_list_npc_y_pos_ref, x
         02:DB7A  BC 1B 26   			ldy.h	_list_npc_y_pos_ref, x
 3976                        		__sub.wm	_sgx_map_pxl_y
         02:DB7D  38         			sec
         02:DB7E  ED 90 26   			sbc.l	_sgx_map_pxl_y
         02:DB81  42         			say
         02:DB82  ED 91 26   			sbc.h	_sgx_map_pxl_y
         02:DB85  42         			say
 3977                        		__ld2x.um	__scroll_npc_end - 1  /* i */
         02:DB86  AA         			tax
         02:DB87  AD 49 26   			lda	__scroll_npc_end - 1
         02:DB8A  0A         			asl	a
         02:DB8B  22         			sax
 3978                        		__st.waxq	_list_npc_y_pos
         02:DB8C  9D F6 25   			sta.l	_list_npc_y_pos, x
         02:DB8F  98         			tya
         02:DB90  9D F7 25   			sta.h	_list_npc_y_pos, x
 3979                        	
 3980                        		.dbg	line,	"include\routines_LEVELS.c", 255; }
 3981                        	
 3982                        		.dbg	line,	"include\routines_LEVELS.c", 257; else
 3983                        		__bra		.LL55
         02:DB93  80 1E      			bra	.LL55
 3984    02:DB95             	.LL54:
 3985                        	
 3986                        		.dbg	line,	"include\routines_LEVELS.c", 258; {
 3987                        	
 3988                        		.dbg	line,	"include\routines_LEVELS.c", 259; list_npc_x_pos[i] = -32;
 3989                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         02:DB95  AD 49 26   			lda	__scroll_npc_end - 1
         02:DB98  0A         			asl	a
         02:DB99  AA         			tax
 3990                        		__st.waxiq	-32, _list_npc_x_pos
         02:DB9A  A9 E0      			lda.l	#-32
         02:DB9C  9D E4 25   			sta.l	_list_npc_x_pos, x
         02:DB9F  A9 FF      			lda.h	#-32
         02:DBA1  9D E5 25   			sta.h	_list_npc_x_pos, x
 3991                        	
 3992                        		.dbg	line,	"include\routines_LEVELS.c", 260; list_npc_y_pos[i] = -32;
 3993                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         02:DBA4  AD 49 26   			lda	__scroll_npc_end - 1
         02:DBA7  0A         			asl	a
         02:DBA8  AA         			tax
 3994                        		__st.waxiq	-32, _list_npc_y_pos
         02:DBA9  A9 E0      			lda.l	#-32
         02:DBAB  9D F6 25   			sta.l	_list_npc_y_pos, x
         02:DBAE  A9 FF      			lda.h	#-32
         02:DBB0  9D F7 25   			sta.h	_list_npc_y_pos, x
 3995                        	
 3996                        		.dbg	line,	"include\routines_LEVELS.c", 261; }
 3997    02:DBB3             	.LL55:
 3998                        	
 3999                        		.dbg	line,	"include\routines_LEVELS.c", 263; sgx_spr_set(i + npc_start_index);
 4000                        		__ld.um		__scroll_npc_end - 1  /* i */
         02:DBB3  AD 49 26   			lda	__scroll_npc_end - 1
         02:DBB6  C2         			cly
 4001                        		__add.um	_npc_start_index
         02:DBB7  18         			clc
         02:DBB8  6D AF 23   			adc	_npc_start_index
         02:DBBB  90 01      			bcc	!+
         02:DBBD  C8         			iny
         02:DBBE             	!:
 4002                        		__call		_sgx_spr_set.1
         02:DBBE  20 8A E8   			call	_sgx_spr_set.1
 4003                        	
 4004                        		.dbg	line,	"include\routines_LEVELS.c", 265; sgx_spr_x(list_npc_x_pos[i]);
 4005                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         02:DBC1  AD 49 26   			lda	__scroll_npc_end - 1
         02:DBC4  0A         			asl	a
         02:DBC5  AA         			tax
 4006                        		__ld.wax	_list_npc_x_pos
         02:DBC6  BD E4 25   			lda.l	_list_npc_x_pos, x
         02:DBC9  BC E5 25   			ldy.h	_list_npc_x_pos, x
 4007                        		__call		_sgx_spr_x.1
         02:DBCC  20 B7 E8   			call	_sgx_spr_x.1
 4008                        	
 4009                        		.dbg	line,	"include\routines_LEVELS.c", 266; sgx_spr_y(list_npc_y_pos[i]);
 4010                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         02:DBCF  AD 49 26   			lda	__scroll_npc_end - 1
         02:DBD2  0A         			asl	a
         02:DBD3  AA         			tax
 4011                        		__ld.wax	_list_npc_y_pos
         02:DBD4  BD F6 25   			lda.l	_list_npc_y_pos, x
         02:DBD7  BC F7 25   			ldy.h	_list_npc_y_pos, x
 4012                        		__call		_sgx_spr_y.1
         02:DBDA  20 C6 E8   			call	_sgx_spr_y.1
 4013                        	
 4014                        		.dbg	line,	"include\routines_LEVELS.c", 267; }
 4015                        	
 4016                        		.dbg	line,	"include\routines_LEVELS.c", 268; }
 4017    02:DBDD             	.LL49	.alias		.LL46
 4018                        		__bra		.LL46
         02:DBDD  4C 91 DA   			bra	.LL46
 4019    02:DBE0             	.LL48:
 4020                        	
 4021                        		.dbg	line,	"include\routines_LEVELS.c", 269; }
 4022    02:DBE0             	.LL44:
 4023                        		__return	0
         02:DBE0  4C EF FF   			jmp	leave_proc
 4024                        		.dbg	clear
 4025                        		.endp
 4026                        		.pceas
 4027                        	
 4028                        		.dbg	line,	"include\routines_LEVELS.c", 274; int check_TILE_DEPTH(signed char x_offset , signed char y_offset)
 4029                        		.dbg	line,	"include\routines_LEVELS.c", 275; {
 4030                        	;***********************
 4031                        	;***********************
 4032                        	
 4033                        		.hucc
 4034    14:C560             		.proc		_check_TILE_DEPTH
 4035                        		__enter		_check_TILE_DEPTH
 4036                        	
 4037                        		.dbg	line,	"include\routines_LEVELS.c", 276; int player_COLL_X;
 4038                        	
 4039                        		.dbg	line,	"include\routines_LEVELS.c", 277; int player_COLL_Y;
 4040                        	
 4041                        		.dbg	line,	"include\routines_LEVELS.c", 280; player_COLL_X = player_pos_x + x_offset;
 4042                        		__ld.bs		2  /* x_offset */
         14:C560  A6 8D      			ldx	<__sp
         14:C562  B5 0A      			lda	<__stack + 2, x
         14:C564  C2         			cly
         14:C565  10 01      			bpl	!+	; signed
         14:C567  88         			dey
         14:C568             	!:
 4043                        		__add.wm	_player_pos_x
         14:C568  18         			clc
         14:C569  6D D2 24   			adc.l	_player_pos_x
         14:C56C  42         			say
         14:C56D  6D D3 24   			adc.h	_player_pos_x
         14:C570  42         			say
 4044                        		__st.wmq	__check_TILE_DEPTH_end - 2  /* player_COLL_X */
         14:C571  8D 48 26   			sta.l	__check_TILE_DEPTH_end - 2
         14:C574  8C 49 26   			sty.h	__check_TILE_DEPTH_end - 2
 4045                        	
 4046                        		.dbg	line,	"include\routines_LEVELS.c", 281; player_COLL_Y = player_pos_y + 32 - y_offset;//32
 4047                        		__ld.wm		_player_pos_y
         14:C577  AD D4 24   			lda.l	_player_pos_y
         14:C57A  AC D5 24   			ldy.h	_player_pos_y
 4048                        		__add.wi	32
         14:C57D  18         			clc
         14:C57E  69 20      			adc.l	#32
         14:C580  90 01      			bcc	!+
         14:C582  C8         			iny
         14:C583             	!:
 4049                        		__push.wr
         14:C583  5A         			phy
         14:C584  48         			pha
 4050                        		__ld.bs		0  /* y_offset */
         14:C585  A6 8D      			ldx	<__sp
         14:C587  B5 08      			lda	<__stack + 0, x
         14:C589  C2         			cly
         14:C58A  10 01      			bpl	!+	; signed
         14:C58C  88         			dey
         14:C58D             	!:
 4051                        		__sub.wt
         14:C58D  BA         			tsx
         14:C58E  38         			sec
         14:C58F  49 FF      			eor	#$FF
         14:C591  7D 01 21   			adc.l	__tos, x
         14:C594  42         			say
         14:C595  49 FF      			eor	#$FF
         14:C597  7D 02 21   			adc.h	__tos, x
         14:C59A  42         			say
         14:C59B  E8         			inx
         14:C59C  E8         			inx
         14:C59D  9A         			txs
 4052                        		__st.wmq	__check_TILE_DEPTH_end - 4  /* player_COLL_Y */
         14:C59E  8D 46 26   			sta.l	__check_TILE_DEPTH_end - 4
         14:C5A1  8C 47 26   			sty.h	__check_TILE_DEPTH_end - 4
 4053                        	
 4054                        		.dbg	line,	"include\routines_LEVELS.c", 283; get_map_block(player_COLL_X + sgx_map_pxl_x, player_COLL_Y + sgx_map_pxl_y);
 4055                        		__ld.wm		__check_TILE_DEPTH_end - 2  /* player_COLL_X */
         14:C5A4  AD 48 26   			lda.l	__check_TILE_DEPTH_end - 2
         14:C5A7  AC 49 26   			ldy.h	__check_TILE_DEPTH_end - 2
 4056                        		__add.wm	_sgx_map_pxl_x
         14:C5AA  18         			clc
         14:C5AB  6D 8E 26   			adc.l	_sgx_map_pxl_x
         14:C5AE  42         			say
         14:C5AF  6D 8F 26   			adc.h	_sgx_map_pxl_x
         14:C5B2  42         			say
 4057                        		__st.wmq	map_pxl_x
         14:C5B3  85 FC      			sta.l	map_pxl_x
         14:C5B5  84 FD      			sty.h	map_pxl_x
 4058                        		__ld.wm		__check_TILE_DEPTH_end - 4  /* player_COLL_Y */
         14:C5B7  AD 46 26   			lda.l	__check_TILE_DEPTH_end - 4
         14:C5BA  AC 47 26   			ldy.h	__check_TILE_DEPTH_end - 4
 4059                        		__add.wm	_sgx_map_pxl_y
         14:C5BD  18         			clc
         14:C5BE  6D 90 26   			adc.l	_sgx_map_pxl_y
         14:C5C1  42         			say
         14:C5C2  6D 91 26   			adc.h	_sgx_map_pxl_y
         14:C5C5  42         			say
 4060                        		__st.wmq	map_pxl_y
         14:C5C6  85 FE      			sta.l	map_pxl_y
         14:C5C8  84 FF      			sty.h	map_pxl_y
 4061                        		__call		_get_map_block.2
         14:C5CA  20 95 FF   			call	_get_map_block.2
 4062                        	
 4063                        		.dbg	line,	"include\routines_LEVELS.c", 284; }
 4064    14:C5CD             	.LL56:
 4065                        		__modsp		4
         14:C5CD  AA         			tax
         14:C5CE  A5 8D      			lda	<__sp
         14:C5D0  18         			clc
         14:C5D1  69 04      			adc	#4
         14:C5D3  85 8D      			sta	<__sp
         14:C5D5  8A         			txa
 4066                        		__return	1
         14:C5D6  AA         			tax
         14:C5D7  4C EF FF   			jmp	leave_proc
 4067                        		.dbg	clear
 4068                        		.endp
 4069                        		.pceas
 4070                        	
 4071                        		.dbg	line,	"include\routines_LEVELS.c", 286; // CHECK COLLISION WITH BG //
 4072                        		.dbg	line,	"include\routines_LEVELS.c", 287; int check_BG(signed char x_offset , signed char y_offset)
 4073                        		.dbg	line,	"include\routines_LEVELS.c", 288; {
 4074                        	;***********************
 4075                        	;***********************
 4076                        	
 4077                        		.hucc
 4078    14:C6BB             		.proc		_check_BG
 4079                        		__enter		_check_BG
 4080                        	
 4081                        		.dbg	line,	"include\routines_LEVELS.c", 289; int player_COLL_X;
 4082                        	
 4083                        		.dbg	line,	"include\routines_LEVELS.c", 290; int player_COLL_Y;
 4084                        	
 4085                        		.dbg	line,	"include\routines_LEVELS.c", 293; player_COLL_X = player_pos_x + x_offset;
 4086                        		__ld.bs		2  /* x_offset */
         14:C6BB  A6 8D      			ldx	<__sp
         14:C6BD  B5 0A      			lda	<__stack + 2, x
         14:C6BF  C2         			cly
         14:C6C0  10 01      			bpl	!+	; signed
         14:C6C2  88         			dey
         14:C6C3             	!:
 4087                        		__add.wm	_player_pos_x
         14:C6C3  18         			clc
         14:C6C4  6D D2 24   			adc.l	_player_pos_x
         14:C6C7  42         			say
         14:C6C8  6D D3 24   			adc.h	_player_pos_x
         14:C6CB  42         			say
 4088                        		__st.wmq	__check_BG_end - 2  /* player_COLL_X */
         14:C6CC  8D 48 26   			sta.l	__check_BG_end - 2
         14:C6CF  8C 49 26   			sty.h	__check_BG_end - 2
 4089                        	
 4090                        		.dbg	line,	"include\routines_LEVELS.c", 294; player_COLL_Y = player_pos_y + y_offset;
 4091                        		__ld.bs		0  /* y_offset */
         14:C6D2  A6 8D      			ldx	<__sp
         14:C6D4  B5 08      			lda	<__stack + 0, x
         14:C6D6  C2         			cly
         14:C6D7  10 01      			bpl	!+	; signed
         14:C6D9  88         			dey
         14:C6DA             	!:
 4092                        		__add.wm	_player_pos_y
         14:C6DA  18         			clc
         14:C6DB  6D D4 24   			adc.l	_player_pos_y
         14:C6DE  42         			say
         14:C6DF  6D D5 24   			adc.h	_player_pos_y
         14:C6E2  42         			say
 4093                        		__st.wmq	__check_BG_end - 4  /* player_COLL_Y */
         14:C6E3  8D 46 26   			sta.l	__check_BG_end - 4
         14:C6E6  8C 47 26   			sty.h	__check_BG_end - 4
 4094                        	
 4095                        		.dbg	line,	"include\routines_LEVELS.c", 296; get_map_block(player_COLL_X + sgx_map_pxl_x, player_COLL_Y + sgx_map_pxl_y);
 4096                        		__ld.wm		__check_BG_end - 2  /* player_COLL_X */
         14:C6E9  AD 48 26   			lda.l	__check_BG_end - 2
         14:C6EC  AC 49 26   			ldy.h	__check_BG_end - 2
 4097                        		__add.wm	_sgx_map_pxl_x
         14:C6EF  18         			clc
         14:C6F0  6D 8E 26   			adc.l	_sgx_map_pxl_x
         14:C6F3  42         			say
         14:C6F4  6D 8F 26   			adc.h	_sgx_map_pxl_x
         14:C6F7  42         			say
 4098                        		__st.wmq	map_pxl_x
         14:C6F8  85 FC      			sta.l	map_pxl_x
         14:C6FA  84 FD      			sty.h	map_pxl_x
 4099                        		__ld.wm		__check_BG_end - 4  /* player_COLL_Y */
         14:C6FC  AD 46 26   			lda.l	__check_BG_end - 4
         14:C6FF  AC 47 26   			ldy.h	__check_BG_end - 4
 4100                        		__add.wm	_sgx_map_pxl_y
         14:C702  18         			clc
         14:C703  6D 90 26   			adc.l	_sgx_map_pxl_y
         14:C706  42         			say
         14:C707  6D 91 26   			adc.h	_sgx_map_pxl_y
         14:C70A  42         			say
 4101                        		__st.wmq	map_pxl_y
         14:C70B  85 FE      			sta.l	map_pxl_y
         14:C70D  84 FF      			sty.h	map_pxl_y
 4102                        		__call		_get_map_block.2
         14:C70F  20 95 FF   			call	_get_map_block.2
 4103                        	
 4104                        		.dbg	line,	"include\routines_LEVELS.c", 297; }
 4105    14:C712             	.LL57:
 4106                        		__modsp		4
         14:C712  AA         			tax
         14:C713  A5 8D      			lda	<__sp
         14:C715  18         			clc
         14:C716  69 04      			adc	#4
         14:C718  85 8D      			sta	<__sp
         14:C71A  8A         			txa
 4107                        		__return	1
         14:C71B  AA         			tax
         14:C71C  4C EF FF   			jmp	leave_proc
 4108                        		.dbg	clear
 4109                        		.endp
 4110                        		.pceas
 4111                        	
 4112                        		.dbg	line,	"include\routines_LEVELS.c", 299; // CHECK COLLISION WITH OBJECTS //
 4113                        		.dbg	line,	"include\routines_LEVELS.c", 300; void check_OBJECT()
 4114                        		.dbg	line,	"include\routines_LEVELS.c", 301; {
 4115                        	;***********************
 4116                        	;***********************
 4117                        	
 4118                        		.hucc
 4119    02:D4AD             		.proc		_check_OBJECT
 4120                        		__enter		_check_OBJECT
 4121                        	
 4122                        		.dbg	line,	"include\routines_LEVELS.c", 302; if(onscreen_object_number != 0)
 4123                        		__tst.um	_onscreen_object_number
         02:D4AD  AD 2F 23   			lda	_onscreen_object_number
         02:D4B0  C9 01      			cmp	#1
 4124                        		__bfalse	.LL59
         02:D4B2  B0 03 4C 2E			bcc	.LL59
         02:D4B6  D6          
 4125                        	
 4126                        		.dbg	line,	"include\routines_LEVELS.c", 303; {
 4127                        	
 4128                        		.dbg	line,	"include\routines_LEVELS.c", 304; char i;
 4129                        	
 4130                        		.dbg	line,	"include\routines_LEVELS.c", 305; char current_object_id;
 4131                        	
 4132                        		.dbg	line,	"include\routines_LEVELS.c", 306; char current_object_type;
 4133                        	
 4134                        		.dbg	line,	"include\routines_LEVELS.c", 308; for(i=0 ; i<onscreen_object_number ; i++)
 4135                        		__st.umiq	0, __check_OBJECT_end - 1  /* i */
         02:D4B7  9C 02 23   			stz	__check_OBJECT_end - 1
 4136    02:D4BA             	.LL60:
 4137                        		__ld.umq	__check_OBJECT_end - 1  /* i */
         02:D4BA  AD 02 23   			lda	__check_OBJECT_end - 1
 4138                        		__ult_b.umq	_onscreen_object_number
         02:D4BD  CD 2F 23   			cmp	_onscreen_object_number		; Subtract memory from A.
         02:D4C0  6A         			ror	a		; CC if A < memory.
         02:D4C1  49 80      			eor	#$80
         02:D4C3  2A         			rol	a
 4139                        		__btrue		.LL62
         02:D4C4  B0 08      			bcs	.LL62
 4140                        		__bra		.LL63
         02:D4C6  4C 2E D6   			bra	.LL63
 4141    02:D4C9             	.LL61:
 4142                        		__inc.umq	__check_OBJECT_end - 1  /* i */
         02:D4C9  EE 02 23   			inc	__check_OBJECT_end - 1
 4143                        		__bra		.LL60
         02:D4CC  80 EC      			bra	.LL60
 4144    02:D4CE             	.LL62:
 4145                        	
 4146                        		.dbg	line,	"include\routines_LEVELS.c", 309; {
 4147                        	
 4148                        		.dbg	line,	"include\routines_LEVELS.c", 310; // RETRIEVE OBJECT INDEX IN THE LIST //
 4149                        	
 4150                        		.dbg	line,	"include\routines_LEVELS.c", 311; current_object_id = list_onscreen_object[i];
 4151                        		__ldx.umq	__check_OBJECT_end - 1  /* i */
         02:D4CE  AE 02 23   			ldx	__check_OBJECT_end - 1
 4152                        		__ld.uax	_list_onscreen_object
         02:D4D1  BD 94 23   			lda	_list_onscreen_object, x
         02:D4D4  C2         			cly
 4153                        		__st.umq	__check_OBJECT_end - 2  /* current_object_id */
         02:D4D5  8D 01 23   			sta	__check_OBJECT_end - 2
 4154                        	
 4155                        		.dbg	line,	"include\routines_LEVELS.c", 312; // RETRIEVE OBJECT TYPE //
 4156                        	
 4157                        		.dbg	line,	"include\routines_LEVELS.c", 313; current_object_type = list_object_type[current_object_id];
 4158                        		__ldx.umq	__check_OBJECT_end - 2  /* current_object_id */
         02:D4D8  AE 01 23   			ldx	__check_OBJECT_end - 2
 4159                        		__ld.uax	_list_object_type
         02:D4DB  BD 30 23   			lda	_list_object_type, x
         02:D4DE  C2         			cly
 4160                        		__st.umq	__check_OBJECT_end - 3  /* current_object_type */
         02:D4DF  8D 00 23   			sta	__check_OBJECT_end - 3
 4161                        	
 4162                        		.dbg	line,	"include\routines_LEVELS.c", 315; if(current_object_type != TYPE_POT)
 4163                        		__ld.umq	__check_OBJECT_end - 3  /* current_object_type */
         02:D4E2  AD 00 23   			lda	__check_OBJECT_end - 3
 4164                        		__neq_b.uiq	1
         02:D4E5  38         			sec
         02:D4E6  49 01      			eor	#1
         02:D4E8  D0 01      			bne	!+
         02:D4EA  18         			clc
         02:D4EB             	!:
 4165                        		__bfalse	.LL64
         02:D4EB  90 DC      			bcc	.LL64
 4166                        	
 4167                        		.dbg	line,	"include\routines_LEVELS.c", 316; {
 4168                        	
 4169                        		.dbg	line,	"include\routines_LEVELS.c", 317; if(abs( (player_pos_x + 16) - (list_object_x_pos[current_object_id] + 8) ) < OBJECT_MARGIN)
 4170                        		__ld.wm		_player_pos_x
         02:D4ED  AD D2 24   			lda.l	_player_pos_x
         02:D4F0  AC D3 24   			ldy.h	_player_pos_x
 4171                        		__add.wi	16
         02:D4F3  18         			clc
         02:D4F4  69 10      			adc.l	#16
         02:D4F6  90 01      			bcc	!+
         02:D4F8  C8         			iny
         02:D4F9             	!:
 4172                        		__push.wr
         02:D4F9  5A         			phy
         02:D4FA  48         			pha
 4173                        		__ld2x.umq	__check_OBJECT_end - 2  /* current_object_id */
         02:D4FB  AD 01 23   			lda	__check_OBJECT_end - 2
         02:D4FE  0A         			asl	a
         02:D4FF  AA         			tax
 4174                        		__ld.wax	_list_object_x_pos
         02:D500  BD DC 24   			lda.l	_list_object_x_pos, x
         02:D503  BC DD 24   			ldy.h	_list_object_x_pos, x
 4175                        		__add.wi	8
         02:D506  18         			clc
         02:D507  69 08      			adc.l	#8
         02:D509  90 01      			bcc	!+
         02:D50B  C8         			iny
         02:D50C             	!:
 4176                        		__sub.wt
         02:D50C  BA         			tsx
         02:D50D  38         			sec
         02:D50E  49 FF      			eor	#$FF
         02:D510  7D 01 21   			adc.l	__tos, x
         02:D513  42         			say
         02:D514  49 FF      			eor	#$FF
         02:D516  7D 02 21   			adc.h	__tos, x
         02:D519  42         			say
         02:D51A  E8         			inx
         02:D51B  E8         			inx
         02:D51C  9A         			txs
 4177                        		__call		_abs.1
         02:D51D  20 09 E5   			call	_abs.1
 4178                        		__slt_w.wi	10
         02:D520  C9 0A      			cmp.l	#10		; Subtract integer from Y:A.
         02:D522  98         			tya
         02:D523  E9 00      			sbc.h	#10
         02:D525  50 02      			bvc	!+
         02:D527  49 80      			eor	#$80		; -ve if Y:A < integer (signed).
         02:D529  0A         	!:		asl	a
 4179                        		__bfalse	.LL65
         02:D52A  90 9D      			bcc	.LL65
 4180                        	
 4181                        		.dbg	line,	"include\routines_LEVELS.c", 318; {
 4182                        	
 4183                        		.dbg	line,	"include\routines_LEVELS.c", 319; if(abs( (player_pos_y + 16) - (list_object_y_pos[current_object_id] + 8) ) < OBJECT_MARGIN)
 4184                        		__ld.wm		_player_pos_y
         02:D52C  AD D4 24   			lda.l	_player_pos_y
         02:D52F  AC D5 24   			ldy.h	_player_pos_y
 4185                        		__add.wi	16
         02:D532  18         			clc
         02:D533  69 10      			adc.l	#16
         02:D535  90 01      			bcc	!+
         02:D537  C8         			iny
         02:D538             	!:
 4186                        		__push.wr
         02:D538  5A         			phy
         02:D539  48         			pha
 4187                        		__ld2x.umq	__check_OBJECT_end - 2  /* current_object_id */
         02:D53A  AD 01 23   			lda	__check_OBJECT_end - 2
         02:D53D  0A         			asl	a
         02:D53E  AA         			tax
 4188                        		__ld.wax	_list_object_y_pos
         02:D53F  BD 0E 25   			lda.l	_list_object_y_pos, x
         02:D542  BC 0F 25   			ldy.h	_list_object_y_pos, x
 4189                        		__add.wi	8
         02:D545  18         			clc
         02:D546  69 08      			adc.l	#8
         02:D548  90 01      			bcc	!+
         02:D54A  C8         			iny
         02:D54B             	!:
 4190                        		__sub.wt
         02:D54B  BA         			tsx
         02:D54C  38         			sec
         02:D54D  49 FF      			eor	#$FF
         02:D54F  7D 01 21   			adc.l	__tos, x
         02:D552  42         			say
         02:D553  49 FF      			eor	#$FF
         02:D555  7D 02 21   			adc.h	__tos, x
         02:D558  42         			say
         02:D559  E8         			inx
         02:D55A  E8         			inx
         02:D55B  9A         			txs
 4191                        		__call		_abs.1
         02:D55C  20 09 E5   			call	_abs.1
 4192                        		__slt_w.wi	10
         02:D55F  C9 0A      			cmp.l	#10		; Subtract integer from Y:A.
         02:D561  98         			tya
         02:D562  E9 00      			sbc.h	#10
         02:D564  50 02      			bvc	!+
         02:D566  49 80      			eor	#$80		; -ve if Y:A < integer (signed).
         02:D568  0A         	!:		asl	a
 4193                        		__bfalse	.LL66
         02:D569  B0 03 4C C9			bcc	.LL66
         02:D56D  D4          
 4194                        	
 4195                        		.dbg	line,	"include\routines_LEVELS.c", 320; {
 4196                        	
 4197                        		.dbg	line,	"include\routines_LEVELS.c", 321; // THE OBJECT DISAPPEARS //
 4198                        	
 4199                        		.dbg	line,	"include\routines_LEVELS.c", 322; list_object_x_pos[current_object_id] = -16;
 4200                        		__ld2x.umq	__check_OBJECT_end - 2  /* current_object_id */
         02:D56E  AD 01 23   			lda	__check_OBJECT_end - 2
         02:D571  0A         			asl	a
         02:D572  AA         			tax
 4201                        		__st.waxiq	-16, _list_object_x_pos
         02:D573  A9 F0      			lda.l	#-16
         02:D575  9D DC 24   			sta.l	_list_object_x_pos, x
         02:D578  A9 FF      			lda.h	#-16
         02:D57A  9D DD 24   			sta.h	_list_object_x_pos, x
 4202                        	
 4203                        		.dbg	line,	"include\routines_LEVELS.c", 323; list_object_y_pos[current_object_id] = -16;
 4204                        		__ld2x.umq	__check_OBJECT_end - 2  /* current_object_id */
         02:D57D  AD 01 23   			lda	__check_OBJECT_end - 2
         02:D580  0A         			asl	a
         02:D581  AA         			tax
 4205                        		__st.waxiq	-16, _list_object_y_pos
         02:D582  A9 F0      			lda.l	#-16
         02:D584  9D 0E 25   			sta.l	_list_object_y_pos, x
         02:D587  A9 FF      			lda.h	#-16
         02:D589  9D 0F 25   			sta.h	_list_object_y_pos, x
 4206                        	
 4207                        		.dbg	line,	"include\routines_LEVELS.c", 324; list_object_state[current_object_id] = STATE_INACTIVE;
 4208                        		__ldx.umq	__check_OBJECT_end - 2  /* current_object_id */
         02:D58C  AE 01 23   			ldx	__check_OBJECT_end - 2
 4209                        		__st.uaxiq	1, _list_object_state
         02:D58F  A9 01      			lda.l	#1
         02:D591  9D 49 23   			sta	_list_object_state, x
 4210                        	
 4211                        		.dbg	line,	"include\routines_LEVELS.c", 326; sgx_spr_set(current_object_id + object_start_index);
 4212                        		__ld.um		__check_OBJECT_end - 2  /* current_object_id */
         02:D594  AD 01 23   			lda	__check_OBJECT_end - 2
         02:D597  C2         			cly
 4213                        		__add.um	_object_start_index
         02:D598  18         			clc
         02:D599  6D 2D 23   			adc	_object_start_index
         02:D59C  90 01      			bcc	!+
         02:D59E  C8         			iny
         02:D59F             	!:
 4214                        		__call		_sgx_spr_set.1
         02:D59F  20 8A E8   			call	_sgx_spr_set.1
 4215                        	
 4216                        		.dbg	line,	"include\routines_LEVELS.c", 327; sgx_spr_x(list_object_x_pos[current_object_id]);
 4217                        		__ld2x.umq	__check_OBJECT_end - 2  /* current_object_id */
         02:D5A2  AD 01 23   			lda	__check_OBJECT_end - 2
         02:D5A5  0A         			asl	a
         02:D5A6  AA         			tax
 4218                        		__ld.wax	_list_object_x_pos
         02:D5A7  BD DC 24   			lda.l	_list_object_x_pos, x
         02:D5AA  BC DD 24   			ldy.h	_list_object_x_pos, x
 4219                        		__call		_sgx_spr_x.1
         02:D5AD  20 B7 E8   			call	_sgx_spr_x.1
 4220                        	
 4221                        		.dbg	line,	"include\routines_LEVELS.c", 328; sgx_spr_y(list_object_y_pos[current_object_id]);
 4222                        		__ld2x.umq	__check_OBJECT_end - 2  /* current_object_id */
         02:D5B0  AD 01 23   			lda	__check_OBJECT_end - 2
         02:D5B3  0A         			asl	a
         02:D5B4  AA         			tax
 4223                        		__ld.wax	_list_object_y_pos
         02:D5B5  BD 0E 25   			lda.l	_list_object_y_pos, x
         02:D5B8  BC 0F 25   			ldy.h	_list_object_y_pos, x
 4224                        		__call		_sgx_spr_y.1
         02:D5BB  20 C6 E8   			call	_sgx_spr_y.1
 4225                        	
 4226                        		.dbg	line,	"include\routines_LEVELS.c", 329; 
 4227                        	
 4228                        		.dbg	line,	"include\routines_LEVELS.c", 331; switch(current_object_type)
 4229                        		__ld.umq	__check_OBJECT_end - 3  /* current_object_type */
         02:D5BE  AD 00 23   			lda	__check_OBJECT_end - 3
 4230                        		__bra		.LL67
         02:D5C1  80 4A      			bra	.LL67
 4231                        	
 4232                        		.dbg	line,	"include\routines_LEVELS.c", 332; {
 4233                        	
 4234                        		.dbg	line,	"include\routines_LEVELS.c", 333; case TYPE_HOURGLASS:
 4235    02:D5C3             	.LL69:
 4236                        		__case		0
 4237                        	
 4238                        		.dbg	line,	"include\routines_LEVELS.c", 334; if(seconds + 30 > 59)
 4239                        		__ld.um		_seconds
         02:D5C3  AD 29 23   			lda	_seconds
         02:D5C6  C2         			cly
 4240                        		__add.wi	30
         02:D5C7  18         			clc
         02:D5C8  69 1E      			adc.l	#30
         02:D5CA  90 01      			bcc	!+
         02:D5CC  C8         			iny
         02:D5CD             	!:
 4241                        		__sgt_w.wi	59
         02:D5CD  18         			clc			; Subtract integer+1 from Y:A.
         02:D5CE  E9 3B      			sbc.l	#59
         02:D5D0  98         			tya
         02:D5D1  E9 00      			sbc.h	#59
         02:D5D3  50 02      			bvc	!+
         02:D5D5  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         02:D5D7  49 80      	!:		eor	#$80
         02:D5D9  0A         			asl	a
 4242                        		__bfalse	.LL70
         02:D5DA  90 13      			bcc	.LL70
 4243                        	
 4244                        		.dbg	line,	"include\routines_LEVELS.c", 335; {
 4245                        	
 4246                        		.dbg	line,	"include\routines_LEVELS.c", 336; seconds = seconds + 30 - 60;
 4247                        		__ld.um		_seconds
         02:D5DC  AD 29 23   			lda	_seconds
         02:D5DF  C2         			cly
 4248                        		__sub.wi	30
         02:D5E0  38         			sec
         02:D5E1  E9 1E      			sbc.l	#30
         02:D5E3  B0 01      			bcs	!+
         02:D5E5  88         			dey
         02:D5E6             	!:
 4249                        		__st.umq	_seconds
         02:D5E6  8D 29 23   			sta	_seconds
 4250                        	
 4251                        		.dbg	line,	"include\routines_LEVELS.c", 337; minutes += 1;
 4252                        		__add_st.umiq	1, _minutes
         02:D5E9  EE 28 23   			inc	_minutes
 4253                        	
 4254                        		.dbg	line,	"include\routines_LEVELS.c", 338; }
 4255                        	
 4256                        		.dbg	line,	"include\routines_LEVELS.c", 340; else
 4257                        		__bra		.LL71
         02:D5EC  4C C9 D4   			bra	.LL71
 4258    02:D5EF             	.LL70:
 4259                        	
 4260                        		.dbg	line,	"include\routines_LEVELS.c", 341; {
 4261                        	
 4262                        		.dbg	line,	"include\routines_LEVELS.c", 342; seconds += 30;
 4263                        		__add_st.umiq	30, _seconds
         02:D5EF  18         			clc
         02:D5F0  AD 29 23   			lda	_seconds
         02:D5F3  69 1E      			adc	#30
         02:D5F5  8D 29 23   			sta	_seconds
 4264                        	
 4265                        		.dbg	line,	"include\routines_LEVELS.c", 343; }
 4266    02:D5F8             	.LL71	.alias		.LL68
 4267                        	
 4268                        		.dbg	line,	"include\routines_LEVELS.c", 345; break;
 4269                        		__bra		.LL68
         02:D5F8  4C C9 D4   			bra	.LL68
 4270                        	
 4271                        		.dbg	line,	"include\routines_LEVELS.c", 347; case TYPE_POW:
 4272    02:D5FB             	.LL72:
 4273                        		__case		2
 4274                        	
 4275                        		.dbg	line,	"include\routines_LEVELS.c", 348; //
 4276                        	
 4277                        		.dbg	line,	"include\routines_LEVELS.c", 349; break;
 4278                        		__bra		.LL68
         02:D5FB  4C C9 D4   			bra	.LL68
 4279                        	
 4280                        		.dbg	line,	"include\routines_LEVELS.c", 351; case TYPE_GRAY_KEY:
 4281    02:D5FE             	.LL73:
 4282                        		__case		4
 4283                        	
 4284                        		.dbg	line,	"include\routines_LEVELS.c", 352; key_amount += 1;
 4285                        		__add_st.umiq	1, _key_amount
         02:D5FE  EE 26 23   			inc	_key_amount
 4286                        	
 4287                        		.dbg	line,	"include\routines_LEVELS.c", 353; display_KEY();
 4288                        		__call		_display_KEY
         02:D601  20 8B FF   			call	_display_KEY
 4289                        	
 4290                        		.dbg	line,	"include\routines_LEVELS.c", 354; break;
 4291                        		__bra		.LL68
         02:D604  4C C9 D4   			bra	.LL68
 4292                        	
 4293                        		.dbg	line,	"include\routines_LEVELS.c", 356; case TYPE_YASHICHI:
 4294    02:D607             	.LL74:
 4295                        		__case		14
 4296                        	
 4297                        		.dbg	line,	"include\routines_LEVELS.c", 357; life_amount += 1;
 4298                        		__add_st.umiq	1, _life_amount
         02:D607  EE 25 23   			inc	_life_amount
 4299                        	
 4300                        		.dbg	line,	"include\routines_LEVELS.c", 358; break;
 4301                        		__bra		.LL68
         02:D60A  4C C9 D4   			bra	.LL68
 4302                        	
 4303                        		.dbg	line,	"include\routines_LEVELS.c", 359; }
 4304    02:D60D             	.LL67:
 4305                        		__switch_c.ur	4
         02:D60D  A2 05      			ldx	#4 + 1
         02:D60F  CA         	!loop:		dex
         02:D610  F0 05      			beq	!found+
         02:D612  DD 1C D6   			cmp	!table+ - 1, x
         02:D615  D0 F8      			bne	!loop-
         02:D617  8A         	!found:		txa
         02:D618  0A         			asl	a
         02:D619  AA         			tax
         02:D61A  7C 21 D6   			jmp	[!table+ + 4, x]
 4306                        	
 4307    02:D61D  0E 04 02 00	!table:		db	14, 4, 2, 0
 4308    02:D621  C9 D4      			dw	.LL68
 4309    02:D623  07 D6      			dw	.LL74, .LL73, .LL72, .LL69
         02:D625  FE D5       
         02:D627  FB D5       
         02:D629  C3 D5       
 4310                        	
 4311    02:D62B             	.LL68	.alias		.LL61
 4312                        	
 4313                        		.dbg	line,	"include\routines_LEVELS.c", 360; }
 4314                        	
 4315                        		.dbg	line,	"include\routines_LEVELS.c", 361; }
 4316    02:D62B             	.LL66	.alias		.LL61
 4317                        	
 4318                        		.dbg	line,	"include\routines_LEVELS.c", 362; }
 4319    02:D62B             	.LL65	.alias		.LL61
 4320                        	
 4321                        		.dbg	line,	"include\routines_LEVELS.c", 363; }
 4322    02:D62B             	.LL64	.alias		.LL61
 4323                        		__bra		.LL61
         02:D62B  4C C9 D4   			bra	.LL61
 4324    02:D62E             	.LL63:
 4325                        	
 4326                        		.dbg	line,	"include\routines_LEVELS.c", 364; }
 4327                        	
 4328                        		.dbg	line,	"include\routines_LEVELS.c", 365; }
 4329    02:D62E             	.LL59:
 4330    02:D62E             	.LL58:
 4331                        		__return	0
         02:D62E  4C EF FF   			jmp	leave_proc
 4332                        		.dbg	clear
 4333                        		.endp
 4334               6860     		.data
 4335               2300     		.bss
 4336    F8:2300             	__check_OBJECT_loc:
 4337    F8:2300             			ds	3
 4338    F8:2303             	__check_OBJECT_end:
 4339               E309     		.code
 4340                        		.pceas
 4341                        	
 4342                        		.dbg	line,	"include\routines_LEVELS.c", 367; // CHECK COLLISION WITH NPCS //
 4343                        		.dbg	line,	"include\routines_LEVELS.c", 368; void check_NPC()
 4344                        		.dbg	line,	"include\routines_LEVELS.c", 369; {
 4345                        	;***********************
 4346                        	;***********************
 4347                        	
 4348                        		.hucc
 4349    02:DBE3             		.proc		_check_NPC
 4350                        		__enter		_check_NPC
 4351                        	
 4352                        		.dbg	line,	"include\routines_LEVELS.c", 370; if(onscreen_npc_number != 0)
 4353                        		__tst.um	_onscreen_npc_number
         02:DBE3  AD B1 23   			lda	_onscreen_npc_number
         02:DBE6  C9 01      			cmp	#1
 4354                        		__bfalse	.LL76
         02:DBE8  B0 03 4C 1E			bcc	.LL76
         02:DBEC  DD          
 4355                        	
 4356                        		.dbg	line,	"include\routines_LEVELS.c", 371; {
 4357                        	
 4358                        		.dbg	line,	"include\routines_LEVELS.c", 372; if(player_state == STATE_IDLE || player_state == STATE_WALK)
 4359                        		__not.um	_player_state
         02:DBED  AD 16 23   			lda	_player_state
         02:DBF0  18         			clc
         02:DBF1  D0 01      			bne	!+
         02:DBF3  38         			sec
         02:DBF4             	!:
 4360                        		__btrue		.LL78
         02:DBF4  B0 08      			bcs	.LL78
 4361                        		__ld.umq	_player_state
         02:DBF6  AD 16 23   			lda	_player_state
 4362                        		__equ_b.uiq	1
         02:DBF9  C9 01      			cmp	#1
         02:DBFB  F0 01      			beq	!+
         02:DBFD  18         			clc
         02:DBFE             	!:
 4363    02:DBFE             	.LL78:
 4364                        		__bfalse	.LL77
         02:DBFE  B0 03 4C 1E			bcc	.LL77
         02:DC02  DD          
 4365                        	
 4366                        		.dbg	line,	"include\routines_LEVELS.c", 373; {
 4367                        	
 4368                        		.dbg	line,	"include\routines_LEVELS.c", 374; char i,j;
 4369                        	
 4370                        		.dbg	line,	"include\routines_LEVELS.c", 375; char current_npc_id;
 4371                        	
 4372                        		.dbg	line,	"include\routines_LEVELS.c", 376; char current_npc_type;
 4373                        	
 4374                        		.dbg	line,	"include\routines_LEVELS.c", 378; for(i=0 ; i<onscreen_npc_number ; i++)
 4375                        		__st.umiq	0, __check_NPC_end - 1  /* i */
         02:DC03  9C 49 26   			stz	__check_NPC_end - 1
 4376    02:DC06             	.LL79:
 4377                        		__ld.umq	__check_NPC_end - 1  /* i */
         02:DC06  AD 49 26   			lda	__check_NPC_end - 1
 4378                        		__ult_b.umq	_onscreen_npc_number
         02:DC09  CD B1 23   			cmp	_onscreen_npc_number		; Subtract memory from A.
         02:DC0C  6A         			ror	a		; CC if A < memory.
         02:DC0D  49 80      			eor	#$80
         02:DC0F  2A         			rol	a
 4379                        		__btrue		.LL81
         02:DC10  B0 08      			bcs	.LL81
 4380                        		__bra		.LL82
         02:DC12  4C 1E DD   			bra	.LL82
 4381    02:DC15             	.LL80:
 4382                        		__inc.umq	__check_NPC_end - 1  /* i */
         02:DC15  EE 49 26   			inc	__check_NPC_end - 1
 4383                        		__bra		.LL79
         02:DC18  80 EC      			bra	.LL79
 4384    02:DC1A             	.LL81:
 4385                        	
 4386                        		.dbg	line,	"include\routines_LEVELS.c", 379; {
 4387                        	
 4388                        		.dbg	line,	"include\routines_LEVELS.c", 380; // RETRIEVE NPC INDEX IN THE LIST //
 4389                        	
 4390                        		.dbg	line,	"include\routines_LEVELS.c", 381; current_npc_id = list_onscreen_npc[i];
 4391                        		__ldx.umq	__check_NPC_end - 1  /* i */
         02:DC1A  AE 49 26   			ldx	__check_NPC_end - 1
 4392                        		__ld.uax	_list_onscreen_npc
         02:DC1D  BD C4 23   			lda	_list_onscreen_npc, x
         02:DC20  C2         			cly
 4393                        		__st.umq	__check_NPC_end - 3  /* current_npc_id */
         02:DC21  8D 47 26   			sta	__check_NPC_end - 3
 4394                        	
 4395                        		.dbg	line,	"include\routines_LEVELS.c", 383; if(list_npc_state[current_npc_id] == STATE_ACTIVE)
 4396                        		__ldx.umq	__check_NPC_end - 3  /* current_npc_id */
         02:DC24  AE 47 26   			ldx	__check_NPC_end - 3
 4397                        		__not.uax	_list_npc_state
         02:DC27  BD BB 23   			lda	_list_npc_state, x
         02:DC2A  18         			clc
         02:DC2B  D0 01      			bne	!+
         02:DC2D  38         			sec
         02:DC2E             	!:
 4398                        		__bfalse	.LL83
         02:DC2E  90 E5      			bcc	.LL83
 4399                        	
 4400                        		.dbg	line,	"include\routines_LEVELS.c", 384; {
 4401                        	
 4402                        		.dbg	line,	"include\routines_LEVELS.c", 385; // RETRIEVE NPC TYPE //
 4403                        	
 4404                        		.dbg	line,	"include\routines_LEVELS.c", 386; current_npc_type = list_npc_type[current_npc_id];
 4405                        		__ldx.umq	__check_NPC_end - 3  /* current_npc_id */
         02:DC30  AE 47 26   			ldx	__check_NPC_end - 3
 4406                        		__ld.uax	_list_npc_type
         02:DC33  BD B2 23   			lda	_list_npc_type, x
         02:DC36  C2         			cly
 4407                        		__st.umq	__check_NPC_end - 4  /* current_npc_type */
         02:DC37  8D 46 26   			sta	__check_NPC_end - 4
 4408                        	
 4409                        		.dbg	line,	"include\routines_LEVELS.c", 388; if(abs( (player_pos_x + 16) - (list_npc_x_pos[current_npc_id] + 16) ) < OBJECT_MARGIN)
 4410                        		__ld.wm		_player_pos_x
         02:DC3A  AD D2 24   			lda.l	_player_pos_x
         02:DC3D  AC D3 24   			ldy.h	_player_pos_x
 4411                        		__add.wi	16
         02:DC40  18         			clc
         02:DC41  69 10      			adc.l	#16
         02:DC43  90 01      			bcc	!+
         02:DC45  C8         			iny
         02:DC46             	!:
 4412                        		__push.wr
         02:DC46  5A         			phy
         02:DC47  48         			pha
 4413                        		__ld2x.umq	__check_NPC_end - 3  /* current_npc_id */
         02:DC48  AD 47 26   			lda	__check_NPC_end - 3
         02:DC4B  0A         			asl	a
         02:DC4C  AA         			tax
 4414                        		__ld.wax	_list_npc_x_pos
         02:DC4D  BD E4 25   			lda.l	_list_npc_x_pos, x
         02:DC50  BC E5 25   			ldy.h	_list_npc_x_pos, x
 4415                        		__add.wi	16
         02:DC53  18         			clc
         02:DC54  69 10      			adc.l	#16
         02:DC56  90 01      			bcc	!+
         02:DC58  C8         			iny
         02:DC59             	!:
 4416                        		__sub.wt
         02:DC59  BA         			tsx
         02:DC5A  38         			sec
         02:DC5B  49 FF      			eor	#$FF
         02:DC5D  7D 01 21   			adc.l	__tos, x
         02:DC60  42         			say
         02:DC61  49 FF      			eor	#$FF
         02:DC63  7D 02 21   			adc.h	__tos, x
         02:DC66  42         			say
         02:DC67  E8         			inx
         02:DC68  E8         			inx
         02:DC69  9A         			txs
 4417                        		__call		_abs.1
         02:DC6A  20 09 E5   			call	_abs.1
 4418                        		__slt_w.wi	10
         02:DC6D  C9 0A      			cmp.l	#10		; Subtract integer from Y:A.
         02:DC6F  98         			tya
         02:DC70  E9 00      			sbc.h	#10
         02:DC72  50 02      			bvc	!+
         02:DC74  49 80      			eor	#$80		; -ve if Y:A < integer (signed).
         02:DC76  0A         	!:		asl	a
 4419                        		__bfalse	.LL84
         02:DC77  90 9C      			bcc	.LL84
 4420                        	
 4421                        		.dbg	line,	"include\routines_LEVELS.c", 389; {
 4422                        	
 4423                        		.dbg	line,	"include\routines_LEVELS.c", 390; if(abs( (player_pos_y + 16) - (list_npc_y_pos[current_npc_id] + 16) ) < OBJECT_MARGIN)
 4424                        		__ld.wm		_player_pos_y
         02:DC79  AD D4 24   			lda.l	_player_pos_y
         02:DC7C  AC D5 24   			ldy.h	_player_pos_y
 4425                        		__add.wi	16
         02:DC7F  18         			clc
         02:DC80  69 10      			adc.l	#16
         02:DC82  90 01      			bcc	!+
         02:DC84  C8         			iny
         02:DC85             	!:
 4426                        		__push.wr
         02:DC85  5A         			phy
         02:DC86  48         			pha
 4427                        		__ld2x.umq	__check_NPC_end - 3  /* current_npc_id */
         02:DC87  AD 47 26   			lda	__check_NPC_end - 3
         02:DC8A  0A         			asl	a
         02:DC8B  AA         			tax
 4428                        		__ld.wax	_list_npc_y_pos
         02:DC8C  BD F6 25   			lda.l	_list_npc_y_pos, x
         02:DC8F  BC F7 25   			ldy.h	_list_npc_y_pos, x
 4429                        		__add.wi	16
         02:DC92  18         			clc
         02:DC93  69 10      			adc.l	#16
         02:DC95  90 01      			bcc	!+
         02:DC97  C8         			iny
         02:DC98             	!:
 4430                        		__sub.wt
         02:DC98  BA         			tsx
         02:DC99  38         			sec
         02:DC9A  49 FF      			eor	#$FF
         02:DC9C  7D 01 21   			adc.l	__tos, x
         02:DC9F  42         			say
         02:DCA0  49 FF      			eor	#$FF
         02:DCA2  7D 02 21   			adc.h	__tos, x
         02:DCA5  42         			say
         02:DCA6  E8         			inx
         02:DCA7  E8         			inx
         02:DCA8  9A         			txs
 4431                        		__call		_abs.1
         02:DCA9  20 09 E5   			call	_abs.1
 4432                        		__slt_w.wi	10
         02:DCAC  C9 0A      			cmp.l	#10		; Subtract integer from Y:A.
         02:DCAE  98         			tya
         02:DCAF  E9 00      			sbc.h	#10
         02:DCB1  50 02      			bvc	!+
         02:DCB3  49 80      			eor	#$80		; -ve if Y:A < integer (signed).
         02:DCB5  0A         	!:		asl	a
 4433                        		__bfalse	.LL85
         02:DCB6  B0 03 4C 15			bcc	.LL85
         02:DCBA  DC          
 4434                        	
 4435                        		.dbg	line,	"include\routines_LEVELS.c", 391; {               
 4436                        	
 4437                        		.dbg	line,	"include\routines_LEVELS.c", 392; switch(current_npc_type)
 4438                        		__ld.umq	__check_NPC_end - 4  /* current_npc_type */
         02:DCBB  AD 46 26   			lda	__check_NPC_end - 4
 4439                        		__bra		.LL86
         02:DCBE  80 4A      			bra	.LL86
 4440                        	
 4441                        		.dbg	line,	"include\routines_LEVELS.c", 393; {
 4442                        	
 4443                        		.dbg	line,	"include\routines_LEVELS.c", 394; case TYPE_NPC_REWARD:
 4444    02:DCC0             	.LL88:
 4445                        		__case		0
 4446                        	
 4447                        		.dbg	line,	"include\routines_LEVELS.c", 395; //
 4448                        	
 4449                        		.dbg	line,	"include\routines_LEVELS.c", 396; break;
 4450                        		__bra		.LL87
         02:DCC0  4C 15 DC   			bra	.LL87
 4451                        	
 4452                        		.dbg	line,	"include\routines_LEVELS.c", 398; case TYPE_NPC_SHOP:
 4453    02:DCC3             	.LL89:
 4454                        		__case		1
 4455                        	
 4456                        		.dbg	line,	"include\routines_LEVELS.c", 399; disp_off();
 4457                        		__call		_disp_off
         02:DCC3  20 29 E4   			call	_disp_off
 4458                        	
 4459                        		.dbg	line,	"include\routines_LEVELS.c", 401; minutes_backup = minutes;
 4460                        		__ld.um		_minutes
         02:DCC6  AD 28 23   			lda	_minutes
         02:DCC9  C2         			cly
 4461                        		__st.umq	_minutes_backup
         02:DCCA  8D 2B 23   			sta	_minutes_backup
 4462                        	
 4463                        		.dbg	line,	"include\routines_LEVELS.c", 402; seconds_backup = seconds;
 4464                        		__ld.um		_seconds
         02:DCCD  AD 29 23   			lda	_seconds
         02:DCD0  C2         			cly
 4465                        		__st.umq	_seconds_backup
         02:DCD1  8D 2C 23   			sta	_seconds_backup
 4466                        	
 4467                        		.dbg	line,	"include\routines_LEVELS.c", 403; list_npc_state[current_npc_id] = STATE_INACTIVE;
 4468                        		__ldx.umq	__check_NPC_end - 3  /* current_npc_id */
         02:DCD4  AE 47 26   			ldx	__check_NPC_end - 3
 4469                        		__st.uaxiq	1, _list_npc_state
         02:DCD7  A9 01      			lda.l	#1
         02:DCD9  9D BB 23   			sta	_list_npc_state, x
 4470                        	
 4471                        		.dbg	line,	"include\routines_LEVELS.c", 404; camera_pos_x_backup = sgx_map_pxl_x;
 4472                        		__ld.wm		_sgx_map_pxl_x
         02:DCDC  AD 8E 26   			lda.l	_sgx_map_pxl_x
         02:DCDF  AC 8F 26   			ldy.h	_sgx_map_pxl_x
 4473                        		__st.wmq	_camera_pos_x_backup
         02:DCE2  8D D8 24   			sta.l	_camera_pos_x_backup
         02:DCE5  8C D9 24   			sty.h	_camera_pos_x_backup
 4474                        	
 4475                        		.dbg	line,	"include\routines_LEVELS.c", 405; camera_pos_y_backup = list_npc_y_pos_ref[current_npc_id] - 128;                                    
 4476                        		__ld2x.umq	__check_NPC_end - 3  /* current_npc_id */
         02:DCE8  AD 47 26   			lda	__check_NPC_end - 3
         02:DCEB  0A         			asl	a
         02:DCEC  AA         			tax
 4477                        		__ld.wax	_list_npc_y_pos_ref
         02:DCED  BD 1A 26   			lda.l	_list_npc_y_pos_ref, x
         02:DCF0  BC 1B 26   			ldy.h	_list_npc_y_pos_ref, x
 4478                        		__sub.wi	128
         02:DCF3  38         			sec
         02:DCF4  E9 80      			sbc.l	#128
         02:DCF6  B0 01      			bcs	!+
         02:DCF8  88         			dey
         02:DCF9             	!:
 4479                        		__st.wmq	_camera_pos_y_backup
         02:DCF9  8D DA 24   			sta.l	_camera_pos_y_backup
         02:DCFC  8C DB 24   			sty.h	_camera_pos_y_backup
 4480                        	
 4481                        		.dbg	line,	"include\routines_LEVELS.c", 406; sequence_loaded = FALSE;
 4482                        		__st.umiq	0, _sequence_loaded
         02:DCFF  9C 12 23   			stz	_sequence_loaded
 4483                        	
 4484                        		.dbg	line,	"include\routines_LEVELS.c", 407; sequence_id = SEQUENCE_SHOP;
 4485                        		__st.umiq	4, _sequence_id
         02:DD02  A9 04      			lda.l	#4
         02:DD04  8D 11 23   			sta	_sequence_id
 4486                        	
 4487                        		.dbg	line,	"include\routines_LEVELS.c", 408; break;
 4488                        		__bra		.LL87
         02:DD07  4C 15 DC   			bra	.LL87
 4489                        	
 4490                        		.dbg	line,	"include\routines_LEVELS.c", 409; }
 4491    02:DD0A             	.LL86:
 4492                        		__switch_r.ur	0, 1
         02:DD0A  C9 02      			cmp	#(1 - 0) + 1
         02:DD0C  90 02      			bcc	!found+
         02:DD0E  A9 02      	!default:	lda	#(1 - 0) + 1
         02:DD10  0A         	!found:		asl	a
         02:DD11  AA         			tax
         02:DD12  7C 15 DD   			jmp	[!table+, x]
 4493                        	
 4494    02:DD15  C0 DC      	!table:		dw	.LL88, .LL89
         02:DD17  C3 DC       
 4495    02:DD19  15 DC      			dw	.LL87
 4496    02:DD1B             	.LL87	.alias		.LL80
 4497                        	
 4498                        		.dbg	line,	"include\routines_LEVELS.c", 410; }
 4499                        	
 4500                        		.dbg	line,	"include\routines_LEVELS.c", 411; }
 4501    02:DD1B             	.LL85	.alias		.LL80
 4502                        	
 4503                        		.dbg	line,	"include\routines_LEVELS.c", 412; }
 4504    02:DD1B             	.LL84	.alias		.LL80
 4505                        	
 4506                        		.dbg	line,	"include\routines_LEVELS.c", 413; }
 4507    02:DD1B             	.LL83	.alias		.LL80
 4508                        		__bra		.LL80
         02:DD1B  4C 15 DC   			bra	.LL80
 4509    02:DD1E             	.LL82:
 4510                        	
 4511                        		.dbg	line,	"include\routines_LEVELS.c", 414; }
 4512                        	
 4513                        		.dbg	line,	"include\routines_LEVELS.c", 415; }
 4514    02:DD1E             	.LL77:
 4515                        	
 4516                        		.dbg	line,	"include\routines_LEVELS.c", 416; }
 4517    02:DD1E             	.LL76:
 4518    02:DD1E             	.LL75:
 4519                        		__return	0
         02:DD1E  4C EF FF   			jmp	leave_proc
 4520                        		.dbg	clear
 4521                        		.endp
 4522                        		.pceas
 4523                        	
 4524                        		.dbg	line,	"include\routines_LEVELS.c", 422; void scroll_BG()
 4525                        		.dbg	line,	"include\routines_LEVELS.c", 423; {
 4526                        	;***********************
 4527                        	;***********************
 4528                        	
 4529                        		.hucc
 4530    01:DFD2             		.proc		_scroll_BG
 4531                        		__enter		_scroll_BG
 4532                        	
 4533                        		.dbg	line,	"include\routines_LEVELS.c", 424; // UPDATE VDC2 BG //
 4534                        	
 4535                        		.dbg	line,	"include\routines_LEVELS.c", 425; sgx_scroll_map();
 4536                        		__call		_sgx_scroll_map
         01:DFD2  20 81 FF   			call	_sgx_scroll_map
 4537                        	
 4538                        		.dbg	line,	"include\routines_LEVELS.c", 427; //--------------------------------------------------------------------------------------//
 4539                        	
 4540                        		.dbg	line,	"include\routines_LEVELS.c", 428; //                                        VDC 2                                         //
 4541                        	
 4542                        		.dbg	line,	"include\routines_LEVELS.c", 429; //--------------------------------------------------------------------------------------//
 4543                        	
 4544                        		.dbg	line,	"include\routines_LEVELS.c", 431; sgx_scroll_split(0,   0, sgx_map_pxl_x & (BAT_SIZE_W - 1), sgx_map_pxl_y & (BAT_SIZE_H - 1), BKG_ON | SPR_ON);
 4545                        		__st.umiq	0, _al
         01:DFD5  64 F8      			stz	_al
 4546                        		__st.umiq	0, _ah
         01:DFD7  64 F9      			stz	_ah
 4547                        		__ld.wm		_sgx_map_pxl_x
         01:DFD9  AD 8E 26   			lda.l	_sgx_map_pxl_x
         01:DFDC  AC 8F 26   			ldy.h	_sgx_map_pxl_x
 4548                        		__and.wi	2047
         01:DFDF  29 FF      			and.l	#2047
         01:DFE1  42         			say
         01:DFE2  29 07      			and.h	#2047
         01:DFE4  42         			say
 4549                        		__st.wmq	_bx
         01:DFE5  85 FA      			sta.l	_bx
         01:DFE7  84 FB      			sty.h	_bx
 4550                        		__ld.wm		_sgx_map_pxl_y
         01:DFE9  AD 90 26   			lda.l	_sgx_map_pxl_y
         01:DFEC  AC 91 26   			ldy.h	_sgx_map_pxl_y
 4551                        		__and.wi	255
         01:DFEF  29 FF      			and	#255
         01:DFF1  C2         			cly
 4552                        		__st.wmq	_cx
         01:DFF2  85 FC      			sta.l	_cx
         01:DFF4  84 FD      			sty.h	_cx
 4553                        		__st.umiq	192, _dl
         01:DFF6  A9 C0      			lda.l	#192
         01:DFF8  85 FE      			sta	_dl
 4554                        		__call		_sgx_scroll_split.5
         01:DFFA  20 77 FF   			call	_sgx_scroll_split.5
 4555                        	
 4556                        		.dbg	line,	"include\routines_LEVELS.c", 432; }
 4557    01:DFFD             	.LL90:
 4558                        		__return	0
         01:DFFD  4C EF FF   			jmp	leave_proc
 4559                        		.dbg	clear
 4560                        		.endp
 4561                        		.pceas
 4562                        	
 4563                        		.dbg	line,	"include\routines_LEVELS.c", 435; void recenter_CAMERA()
 4564                        		.dbg	line,	"include\routines_LEVELS.c", 436; {
 4565                        	;***********************
 4566                        	;***********************
 4567                        	
 4568                        		.hucc
 4569    14:C000             		.proc		_recenter_CAMERA
 4570                        		__enter		_recenter_CAMERA
 4571                        	
 4572                        		.dbg	line,	"include\routines_LEVELS.c", 437; signed char camera_y_move;
 4573                        	
 4574                        		.dbg	line,	"include\routines_LEVELS.c", 439; spr_set(player_id);
 4575                        		__ld.umq	_player_id
         14:C000  AD 15 23   			lda	_player_id
 4576                        		__call		_spr_set.1
         14:C003  20 DD E7   			call	_spr_set.1
 4577                        	
 4578                        		.dbg	line,	"include\routines_LEVELS.c", 442; if(player_pos_y < 128)
 4579                        		__ld.wm		_player_pos_y
         14:C006  AD D4 24   			lda.l	_player_pos_y
         14:C009  AC D5 24   			ldy.h	_player_pos_y
 4580                        		__slt_w.wi	128
         14:C00C  C9 80      			cmp.l	#128		; Subtract integer from Y:A.
         14:C00E  98         			tya
         14:C00F  E9 00      			sbc.h	#128
         14:C011  50 02      			bvc	!+
         14:C013  49 80      			eor	#$80		; -ve if Y:A < integer (signed).
         14:C015  0A         	!:		asl	a
 4581                        		__bfalse	.LL92
         14:C016  90 70      			bcc	.LL92
 4582                        	
 4583                        		.dbg	line,	"include\routines_LEVELS.c", 443; {
 4584                        	
 4585                        		.dbg	line,	"include\routines_LEVELS.c", 444; player_pos_y += CAMERA_RECENTER_VELOCITY;
 4586                        		__add_st.wmiq	4, _player_pos_y
         14:C018  18         			clc
         14:C019  AD D4 24   			lda.l	_player_pos_y
         14:C01C  69 04      			adc.l	#4
         14:C01E  8D D4 24   			sta.l	_player_pos_y
         14:C021  90 03      			bcc	!+
         14:C023  EE D5 24   			inc.h	_player_pos_y
         14:C026             	!:
 4587                        	
 4588                        		.dbg	line,	"include\routines_LEVELS.c", 446; if(player_pos_y > 128)
 4589                        		__ld.wm		_player_pos_y
         14:C026  AD D4 24   			lda.l	_player_pos_y
         14:C029  AC D5 24   			ldy.h	_player_pos_y
 4590                        		__sgt_w.wi	128
         14:C02C  18         			clc			; Subtract integer+1 from Y:A.
         14:C02D  E9 80      			sbc.l	#128
         14:C02F  98         			tya
         14:C030  E9 00      			sbc.h	#128
         14:C032  50 02      			bvc	!+
         14:C034  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         14:C036  49 80      	!:		eor	#$80
         14:C038  0A         			asl	a
 4591                        		__bfalse	.LL93
         14:C039  90 24      			bcc	.LL93
 4592                        	
 4593                        		.dbg	line,	"include\routines_LEVELS.c", 447; {
 4594                        	
 4595                        		.dbg	line,	"include\routines_LEVELS.c", 448; camera_y_move = CAMERA_RECENTER_VELOCITY - (player_pos_y - 128);
 4596                        		__ld.wm		_player_pos_y
         14:C03B  AD D4 24   			lda.l	_player_pos_y
         14:C03E  AC D5 24   			ldy.h	_player_pos_y
 4597                        		__sub.wi	128
         14:C041  38         			sec
         14:C042  E9 80      			sbc.l	#128
         14:C044  B0 01      			bcs	!+
         14:C046  88         			dey
         14:C047             	!:
 4598                        		__isub.wi	4
         14:C047  38         			sec
         14:C048  49 FF      			eor	#$FF
         14:C04A  69 04      			adc.l	#4
         14:C04C  42         			say
         14:C04D  49 FF      			eor	#$FF
         14:C04F  69 00      			adc.h	#4
         14:C051  42         			say
 4599                        		__st.umq	__recenter_CAMERA_end - 1  /* camera_y_move */
         14:C052  8D 49 26   			sta	__recenter_CAMERA_end - 1
 4600                        	
 4601                        		.dbg	line,	"include\routines_LEVELS.c", 450; player_pos_y = 128;
 4602                        		__st.wmiq	128, _player_pos_y
         14:C055  A9 80      			lda.l	#128
         14:C057  8D D4 24   			sta.l	_player_pos_y
         14:C05A  9C D5 24   			stz.h	_player_pos_y
 4603                        	
 4604                        		.dbg	line,	"include\routines_LEVELS.c", 451; }
 4605                        	
 4606                        		.dbg	line,	"include\routines_LEVELS.c", 453; else
 4607                        		__bra		.LL94
         14:C05D  80 05      			bra	.LL94
 4608    14:C05F             	.LL93:
 4609                        	
 4610                        		.dbg	line,	"include\routines_LEVELS.c", 454; {
 4611                        	
 4612                        		.dbg	line,	"include\routines_LEVELS.c", 455; camera_y_move = CAMERA_RECENTER_VELOCITY;
 4613                        		__st.umiq	4, __recenter_CAMERA_end - 1  /* camera_y_move */
         14:C05F  A9 04      			lda.l	#4
         14:C061  8D 49 26   			sta	__recenter_CAMERA_end - 1
 4614                        	
 4615                        		.dbg	line,	"include\routines_LEVELS.c", 456; }
 4616    14:C064             	.LL94:
 4617                        	
 4618                        		.dbg	line,	"include\routines_LEVELS.c", 458; spr_y(player_pos_y);
 4619                        		__ld.wm		_player_pos_y
         14:C064  AD D4 24   			lda.l	_player_pos_y
         14:C067  AC D5 24   			ldy.h	_player_pos_y
 4620                        		__call		_spr_y.1
         14:C06A  20 19 E8   			call	_spr_y.1
 4621                        	
 4622                        		.dbg	line,	"include\routines_LEVELS.c", 460; sgx_map_pxl_y -= camera_y_move;
 4623                        		__ld.bm		__recenter_CAMERA_end - 1  /* camera_y_move */
         14:C06D  AD 49 26   			lda	__recenter_CAMERA_end - 1
         14:C070  C2         			cly
         14:C071  10 01      			bpl	!+
         14:C073  88         			dey
         14:C074             	!:
 4624                        		__isub_st.wmq	_sgx_map_pxl_y
         14:C074  38         			sec
         14:C075  49 FF      			eor	#$FF
         14:C077  6D 90 26   			adc.l	_sgx_map_pxl_y
         14:C07A  8D 90 26   			sta.l	_sgx_map_pxl_y
         14:C07D  98         			tya
         14:C07E  49 FF      			eor	#$FF
         14:C080  6D 91 26   			adc.h	_sgx_map_pxl_y
         14:C083  8D 91 26   			sta.h	_sgx_map_pxl_y
 4625                        	
 4626                        		.dbg	line,	"include\routines_LEVELS.c", 461; }
 4627                        	
 4628                        		.dbg	line,	"include\routines_LEVELS.c", 464; else if(player_pos_y > 128)
 4629                        		__bra		.LL95
         14:C086  80 7C      			bra	.LL95
 4630    14:C088             	.LL92:
 4631                        		__ld.wm		_player_pos_y
         14:C088  AD D4 24   			lda.l	_player_pos_y
         14:C08B  AC D5 24   			ldy.h	_player_pos_y
 4632                        		__sgt_w.wi	128
         14:C08E  18         			clc			; Subtract integer+1 from Y:A.
         14:C08F  E9 80      			sbc.l	#128
         14:C091  98         			tya
         14:C092  E9 00      			sbc.h	#128
         14:C094  50 02      			bvc	!+
         14:C096  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         14:C098  49 80      	!:		eor	#$80
         14:C09A  0A         			asl	a
 4633                        		__bfalse	.LL96
         14:C09B  90 67      			bcc	.LL96
 4634                        	
 4635                        		.dbg	line,	"include\routines_LEVELS.c", 465; {
 4636                        	
 4637                        		.dbg	line,	"include\routines_LEVELS.c", 466; player_pos_y -= CAMERA_RECENTER_VELOCITY;
 4638                        		__sub_st.wmiq	4, _player_pos_y
         14:C09D  38         			sec
         14:C09E  AD D4 24   			lda.l	_player_pos_y
         14:C0A1  E9 04      			sbc.l	#4
         14:C0A3  8D D4 24   			sta.l	_player_pos_y
         14:C0A6  B0 03      			bcs	!+
         14:C0A8  CE D5 24   			dec.h	_player_pos_y
         14:C0AB             	!:
 4639                        	
 4640                        		.dbg	line,	"include\routines_LEVELS.c", 468; if(player_pos_y < 128)
 4641                        		__ld.wm		_player_pos_y
         14:C0AB  AD D4 24   			lda.l	_player_pos_y
         14:C0AE  AC D5 24   			ldy.h	_player_pos_y
 4642                        		__slt_w.wi	128
         14:C0B1  C9 80      			cmp.l	#128		; Subtract integer from Y:A.
         14:C0B3  98         			tya
         14:C0B4  E9 00      			sbc.h	#128
         14:C0B6  50 02      			bvc	!+
         14:C0B8  49 80      			eor	#$80		; -ve if Y:A < integer (signed).
         14:C0BA  0A         	!:		asl	a
 4643                        		__bfalse	.LL97
         14:C0BB  90 24      			bcc	.LL97
 4644                        	
 4645                        		.dbg	line,	"include\routines_LEVELS.c", 469; {
 4646                        	
 4647                        		.dbg	line,	"include\routines_LEVELS.c", 470; camera_y_move = CAMERA_RECENTER_VELOCITY - (128 - player_pos_y);
 4648                        		__ld.wi		128
         14:C0BD  A9 80      			lda.l	#128
         14:C0BF  C2         			cly
 4649                        		__sub.wm	_player_pos_y
         14:C0C0  38         			sec
         14:C0C1  ED D4 24   			sbc.l	_player_pos_y
         14:C0C4  42         			say
         14:C0C5  ED D5 24   			sbc.h	_player_pos_y
         14:C0C8  42         			say
 4650                        		__isub.wi	4
         14:C0C9  38         			sec
         14:C0CA  49 FF      			eor	#$FF
         14:C0CC  69 04      			adc.l	#4
         14:C0CE  42         			say
         14:C0CF  49 FF      			eor	#$FF
         14:C0D1  69 00      			adc.h	#4
         14:C0D3  42         			say
 4651                        		__st.umq	__recenter_CAMERA_end - 1  /* camera_y_move */
         14:C0D4  8D 49 26   			sta	__recenter_CAMERA_end - 1
 4652                        	
 4653                        		.dbg	line,	"include\routines_LEVELS.c", 472; player_pos_y = 128;
 4654                        		__st.wmiq	128, _player_pos_y
         14:C0D7  A9 80      			lda.l	#128
         14:C0D9  8D D4 24   			sta.l	_player_pos_y
         14:C0DC  9C D5 24   			stz.h	_player_pos_y
 4655                        	
 4656                        		.dbg	line,	"include\routines_LEVELS.c", 473; }
 4657                        	
 4658                        		.dbg	line,	"include\routines_LEVELS.c", 475; else
 4659                        		__bra		.LL98
         14:C0DF  80 05      			bra	.LL98
 4660    14:C0E1             	.LL97:
 4661                        	
 4662                        		.dbg	line,	"include\routines_LEVELS.c", 476; {
 4663                        	
 4664                        		.dbg	line,	"include\routines_LEVELS.c", 477; camera_y_move = CAMERA_RECENTER_VELOCITY;
 4665                        		__st.umiq	4, __recenter_CAMERA_end - 1  /* camera_y_move */
         14:C0E1  A9 04      			lda.l	#4
         14:C0E3  8D 49 26   			sta	__recenter_CAMERA_end - 1
 4666                        	
 4667                        		.dbg	line,	"include\routines_LEVELS.c", 478; }
 4668    14:C0E6             	.LL98:
 4669                        	
 4670                        		.dbg	line,	"include\routines_LEVELS.c", 480; spr_y(player_pos_y);
 4671                        		__ld.wm		_player_pos_y
         14:C0E6  AD D4 24   			lda.l	_player_pos_y
         14:C0E9  AC D5 24   			ldy.h	_player_pos_y
 4672                        		__call		_spr_y.1
         14:C0EC  20 19 E8   			call	_spr_y.1
 4673                        	
 4674                        		.dbg	line,	"include\routines_LEVELS.c", 482; sgx_map_pxl_y += camera_y_move;
 4675                        		__ld.bm		__recenter_CAMERA_end - 1  /* camera_y_move */
         14:C0EF  AD 49 26   			lda	__recenter_CAMERA_end - 1
         14:C0F2  C2         			cly
         14:C0F3  10 01      			bpl	!+
         14:C0F5  88         			dey
         14:C0F6             	!:
 4676                        		__add_st.wmq	_sgx_map_pxl_y
         14:C0F6  18         			clc
         14:C0F7  6D 90 26   			adc.l	_sgx_map_pxl_y
         14:C0FA  8D 90 26   			sta.l	_sgx_map_pxl_y
         14:C0FD  98         			tya
         14:C0FE  6D 91 26   			adc.h	_sgx_map_pxl_y
         14:C101  8D 91 26   			sta.h	_sgx_map_pxl_y
 4677                        	
 4678                        		.dbg	line,	"include\routines_LEVELS.c", 483; }
 4679                        	
 4680                        		.dbg	line,	"include\routines_LEVELS.c", 484; }
 4681    14:C104             	.LL96:
 4682    14:C104             	.LL95:
 4683    14:C104             	.LL91:
 4684                        		__return	0
         14:C104  4C EF FF   			jmp	leave_proc
 4685                        		.dbg	clear
 4686                        		.endp
 4687                        		.pceas
 4688                        	
 4689                        		.dbg	line,	"include\routines_LEVELS.c", 493; void joypad_BUTTONS()
 4690                        		.dbg	line,	"include\routines_LEVELS.c", 494; {
 4691                        	;***********************
 4692                        	;***********************
 4693                        	
 4694                        		.hucc
 4695    02:D631             		.proc		_joypad_BUTTONS
 4696                        		__enter		_joypad_BUTTONS
 4697                        	
 4698                        		.dbg	line,	"include\routines_LEVELS.c", 495; // JUMP //
 4699                        	
 4700                        		.dbg	line,	"include\routines_LEVELS.c", 496; if(joytrg(JOYPAD_1) == JOY_I)
 4701                        		__ld.uiq	0
         02:D631  62         			cla
 4702                        		 _joytrg.1
         02:D632  AA         			tax
         02:D633  BD 2D 22   			lda	joytrg, x
         02:D636  BC DD 22   			ldy	joy6trg, x
 4703                        		__equ_w.wi	1
         02:D639  C9 01      			cmp.l	#1
         02:D63B  D0 04      			bne	!false+
         02:D63D  C0 00      			cpy.h	#1
         02:D63F  F0 01      			beq	!+
         02:D641  18         	!false:		clc
         02:D642             	!:
 4704                        		__bfalse	.LL100
         02:D642  B0 03 4C 69			bcc	.LL100
         02:D646  D7          
 4705                        	
 4706                        		.dbg	line,	"include\routines_LEVELS.c", 497; {
 4707                        	
 4708                        		.dbg	line,	"include\routines_LEVELS.c", 498; if(player_state == STATE_IDLE)
 4709                        		__not.um	_player_state
         02:D647  AD 16 23   			lda	_player_state
         02:D64A  18         			clc
         02:D64B  D0 01      			bne	!+
         02:D64D  38         			sec
         02:D64E             	!:
 4710                        		__bfalse	.LL101
         02:D64E  90 3B      			bcc	.LL101
 4711                        	
 4712                        		.dbg	line,	"include\routines_LEVELS.c", 499; {
 4713                        	
 4714                        		.dbg	line,	"include\routines_LEVELS.c", 500; player_counter_anim = 0;
 4715                        		__st.umiq	0, _player_counter_anim
         02:D650  9C 19 23   			stz	_player_counter_anim
 4716                        	
 4717                        		.dbg	line,	"include\routines_LEVELS.c", 502; player_state = STATE_JUMP;
 4718                        		__st.umiq	4, _player_state
         02:D653  A9 04      			lda.l	#4
         02:D655  8D 16 23   			sta	_player_state
 4719                        	
 4720                        		.dbg	line,	"include\routines_LEVELS.c", 504; spr_set(weapon_id);
 4721                        		__ld.umq	_weapon_id
         02:D658  AD 22 23   			lda	_weapon_id
 4722                        		__call		_spr_set.1
         02:D65B  20 DD E7   			call	_spr_set.1
 4723                        	
 4724                        		.dbg	line,	"include\routines_LEVELS.c", 505; 
 4725                        	
 4726                        		.dbg	line,	"include\routines_LEVELS.c", 506; if(player_axis == AXIS_RIGHT)
 4727                        		__not.um	_player_axis
         02:D65E  AD 17 23   			lda	_player_axis
         02:D661  18         			clc
         02:D662  D0 01      			bne	!+
         02:D664  38         			sec
         02:D665             	!:
 4728                        		__bfalse	.LL102
         02:D665  90 12      			bcc	.LL102
 4729                        	
 4730                        		.dbg	line,	"include\routines_LEVELS.c", 507; {
 4731                        	
 4732                        		.dbg	line,	"include\routines_LEVELS.c", 508; spr_x(player_pos_x-5);
 4733                        		__ld.wm		_player_pos_x
         02:D667  AD D2 24   			lda.l	_player_pos_x
         02:D66A  AC D3 24   			ldy.h	_player_pos_x
 4734                        		__sub.wi	5
         02:D66D  38         			sec
         02:D66E  E9 05      			sbc.l	#5
         02:D670  B0 01      			bcs	!+
         02:D672  88         			dey
         02:D673             	!:
 4735                        		__call		_spr_x.1
         02:D673  20 0A E8   			call	_spr_x.1
 4736                        	
 4737                        		.dbg	line,	"include\routines_LEVELS.c", 509; }
 4738                        	
 4739                        		.dbg	line,	"include\routines_LEVELS.c", 511; else
 4740                        		__bra		.LL103
         02:D676  4C AB D7   			bra	.LL103
 4741    02:D679             	.LL102:
 4742                        	
 4743                        		.dbg	line,	"include\routines_LEVELS.c", 512; {
 4744                        	
 4745                        		.dbg	line,	"include\routines_LEVELS.c", 513; spr_x(player_pos_x+21);
 4746                        		__ld.wm		_player_pos_x
         02:D679  AD D2 24   			lda.l	_player_pos_x
         02:D67C  AC D3 24   			ldy.h	_player_pos_x
 4747                        		__add.wi	21
         02:D67F  18         			clc
         02:D680  69 15      			adc.l	#21
         02:D682  90 01      			bcc	!+
         02:D684  C8         			iny
         02:D685             	!:
 4748                        		__call		_spr_x.1
         02:D685  20 0A E8   			call	_spr_x.1
 4749                        	
 4750                        		.dbg	line,	"include\routines_LEVELS.c", 514; }
 4751    02:D688             	.LL103	.alias		.LL104
 4752                        	
 4753                        		.dbg	line,	"include\routines_LEVELS.c", 515; }
 4754                        	
 4755                        		.dbg	line,	"include\routines_LEVELS.c", 518; else if(player_state == STATE_WALK)
 4756                        		__bra		.LL104
         02:D688  4C AB D7   			bra	.LL104
 4757    02:D68B             	.LL101:
 4758                        		__ld.umq	_player_state
         02:D68B  AD 16 23   			lda	_player_state
 4759                        		__equ_b.uiq	1
         02:D68E  C9 01      			cmp	#1
         02:D690  F0 01      			beq	!+
         02:D692  18         			clc
         02:D693             	!:
 4760                        		__bfalse	.LL105
         02:D693  90 43      			bcc	.LL105
 4761                        	
 4762                        		.dbg	line,	"include\routines_LEVELS.c", 519; {
 4763                        	
 4764                        		.dbg	line,	"include\routines_LEVELS.c", 520; player_counter_anim = 0;
 4765                        		__st.umiq	0, _player_counter_anim
         02:D695  9C 19 23   			stz	_player_counter_anim
 4766                        	
 4767                        		.dbg	line,	"include\routines_LEVELS.c", 522; player_state = STATE_JUMP_RIGHT + player_axis;
 4768                        		__ld.wi		5
         02:D698  A9 05      			lda.l	#5
         02:D69A  C2         			cly
 4769                        		__add.um	_player_axis
         02:D69B  18         			clc
         02:D69C  6D 17 23   			adc	_player_axis
         02:D69F  90 01      			bcc	!+
         02:D6A1  C8         			iny
         02:D6A2             	!:
 4770                        		__st.umq	_player_state
         02:D6A2  8D 16 23   			sta	_player_state
 4771                        	
 4772                        		.dbg	line,	"include\routines_LEVELS.c", 524; spr_set(weapon_id);
 4773                        		__ld.umq	_weapon_id
         02:D6A5  AD 22 23   			lda	_weapon_id
 4774                        		__call		_spr_set.1
         02:D6A8  20 DD E7   			call	_spr_set.1
 4775                        	
 4776                        		.dbg	line,	"include\routines_LEVELS.c", 525; 
 4777                        	
 4778                        		.dbg	line,	"include\routines_LEVELS.c", 526; if(player_axis == AXIS_RIGHT)
 4779                        		__not.um	_player_axis
         02:D6AB  AD 17 23   			lda	_player_axis
         02:D6AE  18         			clc
         02:D6AF  D0 01      			bne	!+
         02:D6B1  38         			sec
         02:D6B2             	!:
 4780                        		__bfalse	.LL106
         02:D6B2  90 12      			bcc	.LL106
 4781                        	
 4782                        		.dbg	line,	"include\routines_LEVELS.c", 527; {
 4783                        	
 4784                        		.dbg	line,	"include\routines_LEVELS.c", 528; spr_x(player_pos_x-5);
 4785                        		__ld.wm		_player_pos_x
         02:D6B4  AD D2 24   			lda.l	_player_pos_x
         02:D6B7  AC D3 24   			ldy.h	_player_pos_x
 4786                        		__sub.wi	5
         02:D6BA  38         			sec
         02:D6BB  E9 05      			sbc.l	#5
         02:D6BD  B0 01      			bcs	!+
         02:D6BF  88         			dey
         02:D6C0             	!:
 4787                        		__call		_spr_x.1
         02:D6C0  20 0A E8   			call	_spr_x.1
 4788                        	
 4789                        		.dbg	line,	"include\routines_LEVELS.c", 529; }
 4790                        	
 4791                        		.dbg	line,	"include\routines_LEVELS.c", 531; else
 4792                        		__bra		.LL107
         02:D6C3  4C AB D7   			bra	.LL107
 4793    02:D6C6             	.LL106:
 4794                        	
 4795                        		.dbg	line,	"include\routines_LEVELS.c", 532; {
 4796                        	
 4797                        		.dbg	line,	"include\routines_LEVELS.c", 533; spr_x(player_pos_x+21);
 4798                        		__ld.wm		_player_pos_x
         02:D6C6  AD D2 24   			lda.l	_player_pos_x
         02:D6C9  AC D3 24   			ldy.h	_player_pos_x
 4799                        		__add.wi	21
         02:D6CC  18         			clc
         02:D6CD  69 15      			adc.l	#21
         02:D6CF  90 01      			bcc	!+
         02:D6D1  C8         			iny
         02:D6D2             	!:
 4800                        		__call		_spr_x.1
         02:D6D2  20 0A E8   			call	_spr_x.1
 4801                        	
 4802                        		.dbg	line,	"include\routines_LEVELS.c", 534; }
 4803    02:D6D5             	.LL107	.alias		.LL108
 4804                        	
 4805                        		.dbg	line,	"include\routines_LEVELS.c", 535; }
 4806                        	
 4807                        		.dbg	line,	"include\routines_LEVELS.c", 538; else if(player_state == STATE_HANG || player_state == STATE_CLIMB_UP || player_state == STATE_CLIMB_DOWN)
 4808                        		__bra		.LL108
         02:D6D5  4C AB D7   			bra	.LL108
 4809    02:D6D8             	.LL105:
 4810                        		__ld.umq	_player_state
         02:D6D8  AD 16 23   			lda	_player_state
 4811                        		__equ_b.uiq	10
         02:D6DB  C9 0A      			cmp	#10
         02:D6DD  F0 01      			beq	!+
         02:D6DF  18         			clc
         02:D6E0             	!:
 4812                        		__btrue		.LL110
         02:D6E0  B0 08      			bcs	.LL110
 4813                        		__ld.umq	_player_state
         02:D6E2  AD 16 23   			lda	_player_state
 4814                        		__equ_b.uiq	11
         02:D6E5  C9 0B      			cmp	#11
         02:D6E7  F0 01      			beq	!+
         02:D6E9  18         			clc
         02:D6EA             	!:
 4815    02:D6EA             	.LL110:
 4816                        		__btrue		.LL111
         02:D6EA  B0 08      			bcs	.LL111
 4817                        		__ld.umq	_player_state
         02:D6EC  AD 16 23   			lda	_player_state
 4818                        		__equ_b.uiq	12
         02:D6EF  C9 0C      			cmp	#12
         02:D6F1  F0 01      			beq	!+
         02:D6F3  18         			clc
         02:D6F4             	!:
 4819    02:D6F4             	.LL111:
 4820                        		__bfalse	.LL109
         02:D6F4  B0 03 4C AB			bcc	.LL109
         02:D6F8  D7          
 4821                        	
 4822                        		.dbg	line,	"include\routines_LEVELS.c", 539; {
 4823                        	
 4824                        		.dbg	line,	"include\routines_LEVELS.c", 540; if(joy(JOYPAD_1) & JOY_RIGHT)
 4825                        		__ld.uiq	0
         02:D6F9  62         			cla
 4826                        		 _joy.1
         02:D6FA  AA         			tax
         02:D6FB  BD 28 22   			lda	joynow, x
         02:D6FE  BC D3 22   			ldy	joy6now, x
 4827                        		__tand.wi	32
         02:D701  29 20      			and	#32
         02:D703  C9 01      	!:		cmp	#1
 4828                        		__bfalse	.LL112
         02:D705  90 0B      			bcc	.LL112
 4829                        	
 4830                        		.dbg	line,	"include\routines_LEVELS.c", 541; {
 4831                        	
 4832                        		.dbg	line,	"include\routines_LEVELS.c", 542; player_counter_anim = 0;
 4833                        		__st.umiq	0, _player_counter_anim
         02:D707  9C 19 23   			stz	_player_counter_anim
 4834                        	
 4835                        		.dbg	line,	"include\routines_LEVELS.c", 544; player_state = STATE_JUMP_RIGHT;
 4836                        		__st.umiq	5, _player_state
         02:D70A  A9 05      			lda.l	#5
         02:D70C  8D 16 23   			sta	_player_state
 4837                        	
 4838                        		.dbg	line,	"include\routines_LEVELS.c", 545; }
 4839                        	
 4840                        		.dbg	line,	"include\routines_LEVELS.c", 547; else if(joy(JOYPAD_1) & JOY_LEFT)
 4841                        		__bra		.LL113
         02:D70F  4C AB D7   			bra	.LL113
 4842    02:D712             	.LL112:
 4843                        		__ld.uiq	0
         02:D712  62         			cla
 4844                        		 _joy.1
         02:D713  AA         			tax
         02:D714  BD 28 22   			lda	joynow, x
         02:D717  BC D3 22   			ldy	joy6now, x
 4845                        		__tand.wi	128
         02:D71A  29 80      			and	#128
         02:D71C  C9 01      	!:		cmp	#1
 4846                        		__bfalse	.LL114
         02:D71E  90 0B      			bcc	.LL114
 4847                        	
 4848                        		.dbg	line,	"include\routines_LEVELS.c", 548; {
 4849                        	
 4850                        		.dbg	line,	"include\routines_LEVELS.c", 549; player_counter_anim = 0;
 4851                        		__st.umiq	0, _player_counter_anim
         02:D720  9C 19 23   			stz	_player_counter_anim
 4852                        	
 4853                        		.dbg	line,	"include\routines_LEVELS.c", 551; player_state = STATE_JUMP_LEFT;
 4854                        		__st.umiq	6, _player_state
         02:D723  A9 06      			lda.l	#6
         02:D725  8D 16 23   			sta	_player_state
 4855                        	
 4856                        		.dbg	line,	"include\routines_LEVELS.c", 552; }
 4857                        	
 4858                        		.dbg	line,	"include\routines_LEVELS.c", 554; else if(joy(JOYPAD_1) & JOY_UP)
 4859                        		__bra		.LL115
         02:D728  4C AB D7   			bra	.LL115
 4860    02:D72B             	.LL114:
 4861                        		__ld.uiq	0
         02:D72B  62         			cla
 4862                        		 _joy.1
         02:D72C  AA         			tax
         02:D72D  BD 28 22   			lda	joynow, x
         02:D730  BC D3 22   			ldy	joy6now, x
 4863                        		__tand.wi	16
         02:D733  29 10      			and	#16
         02:D735  C9 01      	!:		cmp	#1
 4864                        		__bfalse	.LL116
         02:D737  90 72      			bcc	.LL116
 4865                        	
 4866                        		.dbg	line,	"include\routines_LEVELS.c", 555; {
 4867                        	
 4868                        		.dbg	line,	"include\routines_LEVELS.c", 556; player_counter_anim = 0;
 4869                        		__st.umiq	0, _player_counter_anim
         02:D739  9C 19 23   			stz	_player_counter_anim
 4870                        	
 4871                        		.dbg	line,	"include\routines_LEVELS.c", 558; check_BG( 15 , 8 );
 4872                        		__ld.wi		15
         02:D73C  A9 0F      			lda.l	#15
         02:D73E  C2         			cly
 4873                        		__pusharg.wr
         02:D73F  A6 8D      			ldx	<__sp
         02:D741  CA         			dex
         02:D742  CA         			dex
         02:D743  95 08      			sta.l	<__stack, x
         02:D745  94 09      			sty.h	<__stack, x
         02:D747  86 8D      			stx	<__sp
 4874                        		__ld.wi		8
         02:D749  A9 08      			lda.l	#8
         02:D74B  C2         			cly
 4875                        		__pusharg.wr
         02:D74C  A6 8D      			ldx	<__sp
         02:D74E  CA         			dex
         02:D74F  CA         			dex
         02:D750  95 08      			sta.l	<__stack, x
         02:D752  94 09      			sty.h	<__stack, x
         02:D754  86 8D      			stx	<__sp
 4876                        		__call		_check_BG
         02:D756  20 6D FF   			call	_check_BG
 4877                        	
 4878                        		.dbg	line,	"include\routines_LEVELS.c", 560; if(map_blk_flag == TILE_EMPTY)
 4879                        		__not.um	_map_blk_flag
         02:D759  AD AF 2B   			lda	_map_blk_flag
         02:D75C  18         			clc
         02:D75D  D0 01      			bne	!+
         02:D75F  38         			sec
         02:D760             	!:
 4880                        		__bfalse	.LL117
         02:D760  90 49      			bcc	.LL117
 4881                        	
 4882                        		.dbg	line,	"include\routines_LEVELS.c", 561; {
 4883                        	
 4884                        		.dbg	line,	"include\routines_LEVELS.c", 562; player_state = STATE_JUMP_LADDER;
 4885                        		__st.umiq	13, _player_state
         02:D762  A9 0D      			lda.l	#13
         02:D764  8D 16 23   			sta	_player_state
 4886                        	
 4887                        		.dbg	line,	"include\routines_LEVELS.c", 563; }
 4888                        	
 4889                        		.dbg	line,	"include\routines_LEVELS.c", 564; }
 4890    02:D767             	.LL117	.alias		.LL118
 4891                        	
 4892                        		.dbg	line,	"include\routines_LEVELS.c", 565; }
 4893    02:D767             	.LL116	.alias		.LL118
 4894    02:D767             	.LL115	.alias		.LL118
 4895    02:D767             	.LL113	.alias		.LL118
 4896                        	
 4897                        		.dbg	line,	"include\routines_LEVELS.c", 566; }
 4898    02:D767             	.LL109	.alias		.LL118
 4899    02:D767             	.LL108	.alias		.LL118
 4900    02:D767             	.LL104	.alias		.LL118
 4901                        	
 4902                        		.dbg	line,	"include\routines_LEVELS.c", 568; // ATTACK //
 4903                        	
 4904                        		.dbg	line,	"include\routines_LEVELS.c", 569; else if(joytrg(JOYPAD_1) == JOY_II)
 4905                        		__bra		.LL118
         02:D767  80 42      			bra	.LL118
 4906    02:D769             	.LL100:
 4907                        		__ld.uiq	0
         02:D769  62         			cla
 4908                        		 _joytrg.1
         02:D76A  AA         			tax
         02:D76B  BD 2D 22   			lda	joytrg, x
         02:D76E  BC DD 22   			ldy	joy6trg, x
 4909                        		__equ_w.wi	2
         02:D771  C9 02      			cmp.l	#2
         02:D773  D0 04      			bne	!false+
         02:D775  C0 00      			cpy.h	#2
         02:D777  F0 01      			beq	!+
         02:D779  18         	!false:		clc
         02:D77A             	!:
 4910                        		__bfalse	.LL119
         02:D77A  90 2F      			bcc	.LL119
 4911                        	
 4912                        		.dbg	line,	"include\routines_LEVELS.c", 570; {
 4913                        	
 4914                        		.dbg	line,	"include\routines_LEVELS.c", 571; if(player_state == STATE_IDLE || player_state == STATE_WALK)
 4915                        		__not.um	_player_state
         02:D77C  AD 16 23   			lda	_player_state
         02:D77F  18         			clc
         02:D780  D0 01      			bne	!+
         02:D782  38         			sec
         02:D783             	!:
 4916                        		__btrue		.LL121
         02:D783  B0 08      			bcs	.LL121
 4917                        		__ld.umq	_player_state
         02:D785  AD 16 23   			lda	_player_state
 4918                        		__equ_b.uiq	1
         02:D788  C9 01      			cmp	#1
         02:D78A  F0 01      			beq	!+
         02:D78C  18         			clc
         02:D78D             	!:
 4919    02:D78D             	.LL121:
 4920                        		__bfalse	.LL120
         02:D78D  90 0A      			bcc	.LL120
 4921                        	
 4922                        		.dbg	line,	"include\routines_LEVELS.c", 572; {
 4923                        	
 4924                        		.dbg	line,	"include\routines_LEVELS.c", 573; player_counter_attack = 0;
 4925                        		__st.umiq	0, _player_counter_attack
         02:D78F  9C 1C 23   			stz	_player_counter_attack
 4926                        	
 4927                        		.dbg	line,	"include\routines_LEVELS.c", 574; player_state = STATE_ATTACK;
 4928                        		__st.umiq	2, _player_state
         02:D792  A9 02      			lda.l	#2
         02:D794  8D 16 23   			sta	_player_state
 4929                        	
 4930                        		.dbg	line,	"include\routines_LEVELS.c", 575; }
 4931                        	
 4932                        		.dbg	line,	"include\routines_LEVELS.c", 577; else if(player_state == STATE_CROUCH)
 4933                        		__bra		.LL122
         02:D797  80 12      			bra	.LL122
 4934    02:D799             	.LL120:
 4935                        		__ld.umq	_player_state
         02:D799  AD 16 23   			lda	_player_state
 4936                        		__equ_b.uiq	7
         02:D79C  C9 07      			cmp	#7
         02:D79E  F0 01      			beq	!+
         02:D7A0  18         			clc
         02:D7A1             	!:
 4937                        		__bfalse	.LL123
         02:D7A1  90 08      			bcc	.LL123
 4938                        	
 4939                        		.dbg	line,	"include\routines_LEVELS.c", 578; {
 4940                        	
 4941                        		.dbg	line,	"include\routines_LEVELS.c", 579; player_counter_attack = 0;
 4942                        		__st.umiq	0, _player_counter_attack
         02:D7A3  9C 1C 23   			stz	_player_counter_attack
 4943                        	
 4944                        		.dbg	line,	"include\routines_LEVELS.c", 580; player_state = STATE_CROUCH_ATTACK;
 4945                        		__st.umiq	8, _player_state
         02:D7A6  A9 08      			lda.l	#8
         02:D7A8  8D 16 23   			sta	_player_state
 4946                        	
 4947                        		.dbg	line,	"include\routines_LEVELS.c", 581; }
 4948                        	
 4949                        		.dbg	line,	"include\routines_LEVELS.c", 582; }
 4950    02:D7AB             	.LL123:
 4951    02:D7AB             	.LL122:
 4952                        	
 4953                        		.dbg	line,	"include\routines_LEVELS.c", 583; }
 4954    02:D7AB             	.LL119:
 4955    02:D7AB             	.LL118:
 4956    02:D7AB             	.LL99:
 4957                        		__return	0
         02:D7AB  4C EF FF   			jmp	leave_proc
 4958                        		.dbg	clear
 4959                        		.endp
 4960                        		.pceas
 4961                        	
 4962                        		.dbg	line,	"include\routines_LEVELS.c", 586; void joypad_DIR()
 4963                        		.dbg	line,	"include\routines_LEVELS.c", 587; {
 4964                        	;***********************
 4965                        	;***********************
 4966                        	
 4967                        		.hucc
 4968    13:C860             		.proc		_joypad_DIR
 4969                        		__enter		_joypad_DIR
 4970                        	
 4971                        		.dbg	line,	"include\routines_LEVELS.c", 588; //--------------------------------------------------------------------------------------//
 4972                        	
 4973                        		.dbg	line,	"include\routines_LEVELS.c", 589; //                                        NO DIR                                        //
 4974                        	
 4975                        		.dbg	line,	"include\routines_LEVELS.c", 590; //--------------------------------------------------------------------------------------//
 4976                        	
 4977                        		.dbg	line,	"include\routines_LEVELS.c", 592; if(! (joy(JOYPAD_1) & JOY_DIR_PRESSED) )
 4978                        		__ld.uiq	0
         13:C860  62         			cla
 4979                        		 _joy.1
         13:C861  AA         			tax
         13:C862  BD 28 22   			lda	joynow, x
         13:C865  BC D3 22   			ldy	joy6now, x
 4980                        		__nand.wi	240
         13:C868  18         			clc
         13:C869  29 F0      			and	#240
         13:C86B  D0 01      			bne	!+
         13:C86D  38         			sec
         13:C86E             	!:
 4981                        		__bfalse	.LL125
         13:C86E  90 58      			bcc	.LL125
 4982                        	
 4983                        		.dbg	line,	"include\routines_LEVELS.c", 593; {
 4984                        	
 4985                        		.dbg	line,	"include\routines_LEVELS.c", 594; if(player_state == STATE_WALK || player_state == STATE_CROUCH)
 4986                        		__ld.umq	_player_state
         13:C870  AD 16 23   			lda	_player_state
 4987                        		__equ_b.uiq	1
         13:C873  C9 01      			cmp	#1
         13:C875  F0 01      			beq	!+
         13:C877  18         			clc
         13:C878             	!:
 4988                        		__btrue		.LL127
         13:C878  B0 08      			bcs	.LL127
 4989                        		__ld.umq	_player_state
         13:C87A  AD 16 23   			lda	_player_state
 4990                        		__equ_b.uiq	7
         13:C87D  C9 07      			cmp	#7
         13:C87F  F0 01      			beq	!+
         13:C881  18         			clc
         13:C882             	!:
 4991    13:C882             	.LL127:
 4992                        		__bfalse	.LL126
         13:C882  90 13      			bcc	.LL126
 4993                        	
 4994                        		.dbg	line,	"include\routines_LEVELS.c", 595; {
 4995                        	
 4996                        		.dbg	line,	"include\routines_LEVELS.c", 596; if(player_attack == FALSE)
 4997                        		__not.um	_player_attack
         13:C884  AD 1E 23   			lda	_player_attack
         13:C887  18         			clc
         13:C888  D0 01      			bne	!+
         13:C88A  38         			sec
         13:C88B             	!:
 4998                        		__bfalse	.LL128
         13:C88B  90 3B      			bcc	.LL128
 4999                        	
 5000                        		.dbg	line,	"include\routines_LEVELS.c", 597; {
 5001                        	
 5002                        		.dbg	line,	"include\routines_LEVELS.c", 598; player_counter_anim = 1;
 5003                        		__st.umiq	1, _player_counter_anim
         13:C88D  A9 01      			lda.l	#1
         13:C88F  8D 19 23   			sta	_player_counter_anim
 5004                        	
 5005                        		.dbg	line,	"include\routines_LEVELS.c", 599; player_state = STATE_IDLE;
 5006                        		__st.umiq	0, _player_state
         13:C892  9C 16 23   			stz	_player_state
 5007                        	
 5008                        		.dbg	line,	"include\routines_LEVELS.c", 600; }
 5009                        	
 5010                        		.dbg	line,	"include\routines_LEVELS.c", 601; }
 5011    13:C895             	.LL128	.alias		.LL129
 5012                        	
 5013                        		.dbg	line,	"include\routines_LEVELS.c", 604; else if(player_state == STATE_CLIMB_UP || player_state == STATE_CLIMB_DOWN)
 5014                        		__bra		.LL129
         13:C895  80 31      			bra	.LL129
 5015    13:C897             	.LL126:
 5016                        		__ld.umq	_player_state
         13:C897  AD 16 23   			lda	_player_state
 5017                        		__equ_b.uiq	11
         13:C89A  C9 0B      			cmp	#11
         13:C89C  F0 01      			beq	!+
         13:C89E  18         			clc
         13:C89F             	!:
 5018                        		__btrue		.LL131
         13:C89F  B0 08      			bcs	.LL131
 5019                        		__ld.umq	_player_state
         13:C8A1  AD 16 23   			lda	_player_state
 5020                        		__equ_b.uiq	12
         13:C8A4  C9 0C      			cmp	#12
         13:C8A6  F0 01      			beq	!+
         13:C8A8  18         			clc
         13:C8A9             	!:
 5021    13:C8A9             	.LL131:
 5022                        		__bfalse	.LL130
         13:C8A9  90 1D      			bcc	.LL130
 5023                        	
 5024                        		.dbg	line,	"include\routines_LEVELS.c", 605; {
 5025                        	
 5026                        		.dbg	line,	"include\routines_LEVELS.c", 606; if(player_attack == FALSE)
 5027                        		__not.um	_player_attack
         13:C8AB  AD 1E 23   			lda	_player_attack
         13:C8AE  18         			clc
         13:C8AF  D0 01      			bne	!+
         13:C8B1  38         			sec
         13:C8B2             	!:
 5028                        		__bfalse	.LL132
         13:C8B2  90 14      			bcc	.LL132
 5029                        	
 5030                        		.dbg	line,	"include\routines_LEVELS.c", 607; {
 5031                        	
 5032                        		.dbg	line,	"include\routines_LEVELS.c", 608; spr_set(player_id);
 5033                        		__ld.umq	_player_id
         13:C8B4  AD 15 23   			lda	_player_id
 5034                        		__call		_spr_set.1
         13:C8B7  20 DD E7   			call	_spr_set.1
 5035                        	
 5036                        		.dbg	line,	"include\routines_LEVELS.c", 609; spr_pattern(PLAYER_HANG_VRAM_ADR);
 5037                        		__ld.wi		7936
         13:C8BA  62         			cla
         13:C8BB  A0 1F      			ldy.h	#7936
 5038                        		__call		_spr_pattern.1
         13:C8BD  20 26 E8   			call	_spr_pattern.1
 5039                        	
 5040                        		.dbg	line,	"include\routines_LEVELS.c", 610; player_counter_anim = 0;
 5041                        		__st.umiq	0, _player_counter_anim
         13:C8C0  9C 19 23   			stz	_player_counter_anim
 5042                        	
 5043                        		.dbg	line,	"include\routines_LEVELS.c", 611; player_state = STATE_HANG;
 5044                        		__st.umiq	10, _player_state
         13:C8C3  A9 0A      			lda.l	#10
         13:C8C5  8D 16 23   			sta	_player_state
 5045                        	
 5046                        		.dbg	line,	"include\routines_LEVELS.c", 612; }
 5047                        	
 5048                        		.dbg	line,	"include\routines_LEVELS.c", 613; }
 5049    13:C8C8             	.LL132:
 5050                        	
 5051                        		.dbg	line,	"include\routines_LEVELS.c", 614; }
 5052    13:C8C8             	.LL130:
 5053    13:C8C8             	.LL129:
 5054                        	
 5055                        		.dbg	line,	"include\routines_LEVELS.c", 617; //--------------------------------------------------------------------------------------//
 5056                        	
 5057                        		.dbg	line,	"include\routines_LEVELS.c", 618; //                                     RIGHT BUTTON                                     //
 5058                        	
 5059                        		.dbg	line,	"include\routines_LEVELS.c", 619; //--------------------------------------------------------------------------------------//
 5060                        	
 5061                        		.dbg	line,	"include\routines_LEVELS.c", 621; if(joy(JOYPAD_1) & JOY_RIGHT)
 5062    13:C8C8             	.LL125:
 5063                        		__ld.uiq	0
         13:C8C8  62         			cla
 5064                        		 _joy.1
         13:C8C9  AA         			tax
         13:C8CA  BD 28 22   			lda	joynow, x
         13:C8CD  BC D3 22   			ldy	joy6now, x
 5065                        		__tand.wi	32
         13:C8D0  29 20      			and	#32
         13:C8D2  C9 01      	!:		cmp	#1
 5066                        		__bfalse	.LL133
         13:C8D4  B0 03 4C 6C			bcc	.LL133
         13:C8D8  CC          
 5067                        	
 5068                        		.dbg	line,	"include\routines_LEVELS.c", 622; {
 5069                        	
 5070                        		.dbg	line,	"include\routines_LEVELS.c", 623; if(player_state == STATE_IDLE || player_state == STATE_WALK)
 5071                        		__not.um	_player_state
         13:C8D9  AD 16 23   			lda	_player_state
         13:C8DC  18         			clc
         13:C8DD  D0 01      			bne	!+
         13:C8DF  38         			sec
         13:C8E0             	!:
 5072                        		__btrue		.LL135
         13:C8E0  B0 08      			bcs	.LL135
 5073                        		__ld.umq	_player_state
         13:C8E2  AD 16 23   			lda	_player_state
 5074                        		__equ_b.uiq	1
         13:C8E5  C9 01      			cmp	#1
         13:C8E7  F0 01      			beq	!+
         13:C8E9  18         			clc
         13:C8EA             	!:
 5075    13:C8EA             	.LL135:
 5076                        		__bfalse	.LL134
         13:C8EA  B0 03 4C 87			bcc	.LL134
         13:C8EE  C9          
 5077                        	
 5078                        		.dbg	line,	"include\routines_LEVELS.c", 624; {
 5079                        	
 5080                        		.dbg	line,	"include\routines_LEVELS.c", 625; player_axis = AXIS_RIGHT;
 5081                        		__st.umiq	0, _player_axis
         13:C8EF  9C 17 23   			stz	_player_axis
 5082                        	
 5083                        		.dbg	line,	"include\routines_LEVELS.c", 627; if(player_previous_axis != player_axis)
 5084                        		__ld.umq	_player_previous_axis
         13:C8F2  AD 18 23   			lda	_player_previous_axis
 5085                        		__neq_b.umq	_player_axis
         13:C8F5  38         			sec
         13:C8F6  4D 17 23   			eor	_player_axis
         13:C8F9  D0 01      			bne	!+
         13:C8FB  18         			clc
         13:C8FC             	!:
 5086                        		__bfalse	.LL136
         13:C8FC  90 66      			bcc	.LL136
 5087                        	
 5088                        		.dbg	line,	"include\routines_LEVELS.c", 628; {
 5089                        	
 5090                        		.dbg	line,	"include\routines_LEVELS.c", 629; player_previous_axis = player_axis;
 5091                        		__ld.um		_player_axis
         13:C8FE  AD 17 23   			lda	_player_axis
         13:C901  C2         			cly
 5092                        		__st.umq	_player_previous_axis
         13:C902  8D 18 23   			sta	_player_previous_axis
 5093                        	
 5094                        		.dbg	line,	"include\routines_LEVELS.c", 631; spr_set(player_id);
 5095                        		__ld.umq	_player_id
         13:C905  AD 15 23   			lda	_player_id
 5096                        		__call		_spr_set.1
         13:C908  20 DD E7   			call	_spr_set.1
 5097                        	
 5098                        		.dbg	line,	"include\routines_LEVELS.c", 632; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5099                        		__st.umiq	136, _al
         13:C90B  A9 88      			lda.l	#136
         13:C90D  85 F8      			sta	_al
 5100                        		__ld.uiq	0
         13:C90F  62         			cla
 5101                        		__call		_spr_ctrl.2
         13:C910  20 3C E8   			call	_spr_ctrl.2
 5102                        	
 5103                        		.dbg	line,	"include\routines_LEVELS.c", 634; spr_set(chain_id);
 5104                        		__ld.umq	_chain_id
         13:C913  AD 21 23   			lda	_chain_id
 5105                        		__call		_spr_set.1
         13:C916  20 DD E7   			call	_spr_set.1
 5106                        	
 5107                        		.dbg	line,	"include\routines_LEVELS.c", 635; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5108                        		__st.umiq	136, _al
         13:C919  A9 88      			lda.l	#136
         13:C91B  85 F8      			sta	_al
 5109                        		__ld.uiq	0
         13:C91D  62         			cla
 5110                        		__call		_spr_ctrl.2
         13:C91E  20 3C E8   			call	_spr_ctrl.2
 5111                        	
 5112                        		.dbg	line,	"include\routines_LEVELS.c", 637; spr_set(chain_id+1);
 5113                        		__ld.um		_chain_id
         13:C921  AD 21 23   			lda	_chain_id
         13:C924  C2         			cly
 5114                        		__add.wi	1
         13:C925  1A         			inc	a
         13:C926  D0 01      			bne	!+
         13:C928  C8         			iny
         13:C929             	!:
 5115                        		__call		_spr_set.1
         13:C929  20 DD E7   			call	_spr_set.1
 5116                        	
 5117                        		.dbg	line,	"include\routines_LEVELS.c", 638; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5118                        		__st.umiq	136, _al
         13:C92C  A9 88      			lda.l	#136
         13:C92E  85 F8      			sta	_al
 5119                        		__ld.uiq	0
         13:C930  62         			cla
 5120                        		__call		_spr_ctrl.2
         13:C931  20 3C E8   			call	_spr_ctrl.2
 5121                        	
 5122                        		.dbg	line,	"include\routines_LEVELS.c", 640; spr_set(chain_id+2);
 5123                        		__ld.um		_chain_id
         13:C934  AD 21 23   			lda	_chain_id
         13:C937  C2         			cly
 5124                        		__add.wi	2
         13:C938  18         			clc
         13:C939  69 02      			adc.l	#2
         13:C93B  90 01      			bcc	!+
         13:C93D  C8         			iny
         13:C93E             	!:
 5125                        		__call		_spr_set.1
         13:C93E  20 DD E7   			call	_spr_set.1
 5126                        	
 5127                        		.dbg	line,	"include\routines_LEVELS.c", 641; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5128                        		__st.umiq	136, _al
         13:C941  A9 88      			lda.l	#136
         13:C943  85 F8      			sta	_al
 5129                        		__ld.uiq	0
         13:C945  62         			cla
 5130                        		__call		_spr_ctrl.2
         13:C946  20 3C E8   			call	_spr_ctrl.2
 5131                        	
 5132                        		.dbg	line,	"include\routines_LEVELS.c", 643; spr_set(weapon_id);
 5133                        		__ld.umq	_weapon_id
         13:C949  AD 22 23   			lda	_weapon_id
 5134                        		__call		_spr_set.1
         13:C94C  20 DD E7   			call	_spr_set.1
 5135                        	
 5136                        		.dbg	line,	"include\routines_LEVELS.c", 644; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5137                        		__st.umiq	136, _al
         13:C94F  A9 88      			lda.l	#136
         13:C951  85 F8      			sta	_al
 5138                        		__ld.uiq	0
         13:C953  62         			cla
 5139                        		__call		_spr_ctrl.2
         13:C954  20 3C E8   			call	_spr_ctrl.2
 5140                        	
 5141                        		.dbg	line,	"include\routines_LEVELS.c", 645; spr_x(player_pos_x+1);
 5142                        		__ld.wm		_player_pos_x
         13:C957  AD D2 24   			lda.l	_player_pos_x
         13:C95A  AC D3 24   			ldy.h	_player_pos_x
 5143                        		__add.wi	1
         13:C95D  1A         			inc	a
         13:C95E  D0 01      			bne	!+
         13:C960  C8         			iny
         13:C961             	!:
 5144                        		__call		_spr_x.1
         13:C961  20 0A E8   			call	_spr_x.1
 5145                        	
 5146                        		.dbg	line,	"include\routines_LEVELS.c", 646; }
 5147                        	
 5148                        		.dbg	line,	"include\routines_LEVELS.c", 648; if(joy(JOYPAD_1) & JOY_DOWN)
 5149    13:C964             	.LL136:
 5150                        		__ld.uiq	0
         13:C964  62         			cla
 5151                        		 _joy.1
         13:C965  AA         			tax
         13:C966  BD 28 22   			lda	joynow, x
         13:C969  BC D3 22   			ldy	joy6now, x
 5152                        		__tand.wi	64
         13:C96C  29 40      			and	#64
         13:C96E  C9 01      	!:		cmp	#1
 5153                        		__bfalse	.LL137
         13:C970  90 0D      			bcc	.LL137
 5154                        	
 5155                        		.dbg	line,	"include\routines_LEVELS.c", 649; {
 5156                        	
 5157                        		.dbg	line,	"include\routines_LEVELS.c", 650; player_counter_anim = 1;
 5158                        		__st.umiq	1, _player_counter_anim
         13:C972  A9 01      			lda.l	#1
         13:C974  8D 19 23   			sta	_player_counter_anim
 5159                        	
 5160                        		.dbg	line,	"include\routines_LEVELS.c", 651; player_state = STATE_CROUCH;
 5161                        		__st.umiq	7, _player_state
         13:C977  A9 07      			lda.l	#7
         13:C979  8D 16 23   			sta	_player_state
 5162                        	
 5163                        		.dbg	line,	"include\routines_LEVELS.c", 652; return;
 5164                        		__bra		.LL124
         13:C97C  4C 7A D2   			bra	.LL124
 5165                        	
 5166                        		.dbg	line,	"include\routines_LEVELS.c", 653; }
 5167                        	
 5168                        		.dbg	line,	"include\routines_LEVELS.c", 655; player_state = STATE_WALK;
 5169    13:C97F             	.LL137:
 5170                        		__st.umiq	1, _player_state
         13:C97F  A9 01      			lda.l	#1
         13:C981  8D 16 23   			sta	_player_state
 5171                        	
 5172                        		.dbg	line,	"include\routines_LEVELS.c", 656; }
 5173                        	
 5174                        		.dbg	line,	"include\routines_LEVELS.c", 659; else if(player_state == STATE_JUMP)
 5175                        		__bra		.LL138
         13:C984  4C 7A D2   			bra	.LL138
 5176    13:C987             	.LL134:
 5177                        		__ld.umq	_player_state
         13:C987  AD 16 23   			lda	_player_state
 5178                        		__equ_b.uiq	4
         13:C98A  C9 04      			cmp	#4
         13:C98C  F0 01      			beq	!+
         13:C98E  18         			clc
         13:C98F             	!:
 5179                        		__bfalse	.LL139
         13:C98F  B0 03 4C 2A			bcc	.LL139
         13:C993  CA          
 5180                        	
 5181                        		.dbg	line,	"include\routines_LEVELS.c", 660; {
 5182                        	
 5183                        		.dbg	line,	"include\routines_LEVELS.c", 661; if(player_axis == AXIS_LEFT)
 5184                        		__ld.umq	_player_axis
         13:C994  AD 17 23   			lda	_player_axis
 5185                        		__equ_b.uiq	1
         13:C997  C9 01      			cmp	#1
         13:C999  F0 01      			beq	!+
         13:C99B  18         			clc
         13:C99C             	!:
 5186                        		__bfalse	.LL140
         13:C99C  B0 03 4C 7A			bcc	.LL140
         13:C9A0  D2          
 5187                        	
 5188                        		.dbg	line,	"include\routines_LEVELS.c", 662; {
 5189                        	
 5190                        		.dbg	line,	"include\routines_LEVELS.c", 663; player_axis = AXIS_RIGHT;
 5191                        		__st.umiq	0, _player_axis
         13:C9A1  9C 17 23   			stz	_player_axis
 5192                        	
 5193                        		.dbg	line,	"include\routines_LEVELS.c", 664; player_previous_axis = player_axis;
 5194                        		__ld.um		_player_axis
         13:C9A4  AD 17 23   			lda	_player_axis
         13:C9A7  C2         			cly
 5195                        		__st.umq	_player_previous_axis
         13:C9A8  8D 18 23   			sta	_player_previous_axis
 5196                        	
 5197                        		.dbg	line,	"include\routines_LEVELS.c", 666; spr_set(player_id);
 5198                        		__ld.umq	_player_id
         13:C9AB  AD 15 23   			lda	_player_id
 5199                        		__call		_spr_set.1
         13:C9AE  20 DD E7   			call	_spr_set.1
 5200                        	
 5201                        		.dbg	line,	"include\routines_LEVELS.c", 667; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5202                        		__st.umiq	136, _al
         13:C9B1  A9 88      			lda.l	#136
         13:C9B3  85 F8      			sta	_al
 5203                        		__ld.uiq	0
         13:C9B5  62         			cla
 5204                        		__call		_spr_ctrl.2
         13:C9B6  20 3C E8   			call	_spr_ctrl.2
 5205                        	
 5206                        		.dbg	line,	"include\routines_LEVELS.c", 669; spr_set(chain_id);
 5207                        		__ld.umq	_chain_id
         13:C9B9  AD 21 23   			lda	_chain_id
 5208                        		__call		_spr_set.1
         13:C9BC  20 DD E7   			call	_spr_set.1
 5209                        	
 5210                        		.dbg	line,	"include\routines_LEVELS.c", 670; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5211                        		__st.umiq	136, _al
         13:C9BF  A9 88      			lda.l	#136
         13:C9C1  85 F8      			sta	_al
 5212                        		__ld.uiq	0
         13:C9C3  62         			cla
 5213                        		__call		_spr_ctrl.2
         13:C9C4  20 3C E8   			call	_spr_ctrl.2
 5214                        	
 5215                        		.dbg	line,	"include\routines_LEVELS.c", 672; spr_set(chain_id+1);
 5216                        		__ld.um		_chain_id
         13:C9C7  AD 21 23   			lda	_chain_id
         13:C9CA  C2         			cly
 5217                        		__add.wi	1
         13:C9CB  1A         			inc	a
         13:C9CC  D0 01      			bne	!+
         13:C9CE  C8         			iny
         13:C9CF             	!:
 5218                        		__call		_spr_set.1
         13:C9CF  20 DD E7   			call	_spr_set.1
 5219                        	
 5220                        		.dbg	line,	"include\routines_LEVELS.c", 673; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5221                        		__st.umiq	136, _al
         13:C9D2  A9 88      			lda.l	#136
         13:C9D4  85 F8      			sta	_al
 5222                        		__ld.uiq	0
         13:C9D6  62         			cla
 5223                        		__call		_spr_ctrl.2
         13:C9D7  20 3C E8   			call	_spr_ctrl.2
 5224                        	
 5225                        		.dbg	line,	"include\routines_LEVELS.c", 675; spr_set(chain_id+2);
 5226                        		__ld.um		_chain_id
         13:C9DA  AD 21 23   			lda	_chain_id
         13:C9DD  C2         			cly
 5227                        		__add.wi	2
         13:C9DE  18         			clc
         13:C9DF  69 02      			adc.l	#2
         13:C9E1  90 01      			bcc	!+
         13:C9E3  C8         			iny
         13:C9E4             	!:
 5228                        		__call		_spr_set.1
         13:C9E4  20 DD E7   			call	_spr_set.1
 5229                        	
 5230                        		.dbg	line,	"include\routines_LEVELS.c", 676; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5231                        		__st.umiq	136, _al
         13:C9E7  A9 88      			lda.l	#136
         13:C9E9  85 F8      			sta	_al
 5232                        		__ld.uiq	0
         13:C9EB  62         			cla
 5233                        		__call		_spr_ctrl.2
         13:C9EC  20 3C E8   			call	_spr_ctrl.2
 5234                        	
 5235                        		.dbg	line,	"include\routines_LEVELS.c", 678; spr_set(weapon_id);
 5236                        		__ld.umq	_weapon_id
         13:C9EF  AD 22 23   			lda	_weapon_id
 5237                        		__call		_spr_set.1
         13:C9F2  20 DD E7   			call	_spr_set.1
 5238                        	
 5239                        		.dbg	line,	"include\routines_LEVELS.c", 679; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5240                        		__st.umiq	136, _al
         13:C9F5  A9 88      			lda.l	#136
         13:C9F7  85 F8      			sta	_al
 5241                        		__ld.uiq	0
         13:C9F9  62         			cla
 5242                        		__call		_spr_ctrl.2
         13:C9FA  20 3C E8   			call	_spr_ctrl.2
 5243                        	
 5244                        		.dbg	line,	"include\routines_LEVELS.c", 680; spr_x(player_pos_x-5);
 5245                        		__ld.wm		_player_pos_x
         13:C9FD  AD D2 24   			lda.l	_player_pos_x
         13:CA00  AC D3 24   			ldy.h	_player_pos_x
 5246                        		__sub.wi	5
         13:CA03  38         			sec
         13:CA04  E9 05      			sbc.l	#5
         13:CA06  B0 01      			bcs	!+
         13:CA08  88         			dey
         13:CA09             	!:
 5247                        		__call		_spr_x.1
         13:CA09  20 0A E8   			call	_spr_x.1
 5248                        	
 5249                        		.dbg	line,	"include\routines_LEVELS.c", 681; 
 5250                        	
 5251                        		.dbg	line,	"include\routines_LEVELS.c", 683; if(player_index_jump > 11 && player_index_jump < 15)
 5252                        		__ld.umq	_player_index_jump
         13:CA0C  AD 1A 23   			lda	_player_index_jump
 5253                        		__ugt_b.uiq	11
         13:CA0F  18         			clc			; Subtract integer+1 from A.
         13:CA10  E9 0B      			sbc	#11		; CS if A > integer.
 5254                        		__bfalse	.LL142
         13:CA12  90 09      			bcc	.LL142
 5255                        		__ld.umq	_player_index_jump
         13:CA14  AD 1A 23   			lda	_player_index_jump
 5256                        		__ult_b.uiq	15
         13:CA17  C9 0F      			cmp	#15		; Subtract integer from A.
         13:CA19  6A         			ror	a		; CC if A < integer.
         13:CA1A  49 80      			eor	#$80
         13:CA1C  2A         			rol	a
 5257    13:CA1D             	.LL142:
 5258                        		__bfalse	.LL141
         13:CA1D  B0 03 4C 7A			bcc	.LL141
         13:CA21  D2          
 5259                        	
 5260                        		.dbg	line,	"include\routines_LEVELS.c", 684; {
 5261                        	
 5262                        		.dbg	line,	"include\routines_LEVELS.c", 685; player_state = STATE_JUMP_RIGHT;                        
 5263                        		__st.umiq	5, _player_state
         13:CA22  A9 05      			lda.l	#5
         13:CA24  8D 16 23   			sta	_player_state
 5264                        	
 5265                        		.dbg	line,	"include\routines_LEVELS.c", 686; }
 5266                        	
 5267                        		.dbg	line,	"include\routines_LEVELS.c", 687; }
 5268    13:CA27             	.LL141	.alias		.LL143
 5269                        	
 5270                        		.dbg	line,	"include\routines_LEVELS.c", 688; }
 5271    13:CA27             	.LL140	.alias		.LL143
 5272                        	
 5273                        		.dbg	line,	"include\routines_LEVELS.c", 691; else if(player_state == STATE_JUMP_LEFT)
 5274                        		__bra		.LL143
         13:CA27  4C 7A D2   			bra	.LL143
 5275    13:CA2A             	.LL139:
 5276                        		__ld.umq	_player_state
         13:CA2A  AD 16 23   			lda	_player_state
 5277                        		__equ_b.uiq	6
         13:CA2D  C9 06      			cmp	#6
         13:CA2F  F0 01      			beq	!+
         13:CA31  18         			clc
         13:CA32             	!:
 5278                        		__bfalse	.LL144
         13:CA32  90 7B      			bcc	.LL144
 5279                        	
 5280                        		.dbg	line,	"include\routines_LEVELS.c", 692; {
 5281                        	
 5282                        		.dbg	line,	"include\routines_LEVELS.c", 693; if(player_axis == AXIS_LEFT)
 5283                        		__ld.umq	_player_axis
         13:CA34  AD 17 23   			lda	_player_axis
 5284                        		__equ_b.uiq	1
         13:CA37  C9 01      			cmp	#1
         13:CA39  F0 01      			beq	!+
         13:CA3B  18         			clc
         13:CA3C             	!:
 5285                        		__bfalse	.LL145
         13:CA3C  B0 03 4C 7A			bcc	.LL145
         13:CA40  D2          
 5286                        	
 5287                        		.dbg	line,	"include\routines_LEVELS.c", 694; {
 5288                        	
 5289                        		.dbg	line,	"include\routines_LEVELS.c", 695; player_axis = AXIS_RIGHT;
 5290                        		__st.umiq	0, _player_axis
         13:CA41  9C 17 23   			stz	_player_axis
 5291                        	
 5292                        		.dbg	line,	"include\routines_LEVELS.c", 696; player_previous_axis = player_axis;
 5293                        		__ld.um		_player_axis
         13:CA44  AD 17 23   			lda	_player_axis
         13:CA47  C2         			cly
 5294                        		__st.umq	_player_previous_axis
         13:CA48  8D 18 23   			sta	_player_previous_axis
 5295                        	
 5296                        		.dbg	line,	"include\routines_LEVELS.c", 698; spr_set(player_id);
 5297                        		__ld.umq	_player_id
         13:CA4B  AD 15 23   			lda	_player_id
 5298                        		__call		_spr_set.1
         13:CA4E  20 DD E7   			call	_spr_set.1
 5299                        	
 5300                        		.dbg	line,	"include\routines_LEVELS.c", 699; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5301                        		__st.umiq	136, _al
         13:CA51  A9 88      			lda.l	#136
         13:CA53  85 F8      			sta	_al
 5302                        		__ld.uiq	0
         13:CA55  62         			cla
 5303                        		__call		_spr_ctrl.2
         13:CA56  20 3C E8   			call	_spr_ctrl.2
 5304                        	
 5305                        		.dbg	line,	"include\routines_LEVELS.c", 701; spr_set(chain_id);
 5306                        		__ld.umq	_chain_id
         13:CA59  AD 21 23   			lda	_chain_id
 5307                        		__call		_spr_set.1
         13:CA5C  20 DD E7   			call	_spr_set.1
 5308                        	
 5309                        		.dbg	line,	"include\routines_LEVELS.c", 702; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5310                        		__st.umiq	136, _al
         13:CA5F  A9 88      			lda.l	#136
         13:CA61  85 F8      			sta	_al
 5311                        		__ld.uiq	0
         13:CA63  62         			cla
 5312                        		__call		_spr_ctrl.2
         13:CA64  20 3C E8   			call	_spr_ctrl.2
 5313                        	
 5314                        		.dbg	line,	"include\routines_LEVELS.c", 704; spr_set(chain_id+1);
 5315                        		__ld.um		_chain_id
         13:CA67  AD 21 23   			lda	_chain_id
         13:CA6A  C2         			cly
 5316                        		__add.wi	1
         13:CA6B  1A         			inc	a
         13:CA6C  D0 01      			bne	!+
         13:CA6E  C8         			iny
         13:CA6F             	!:
 5317                        		__call		_spr_set.1
         13:CA6F  20 DD E7   			call	_spr_set.1
 5318                        	
 5319                        		.dbg	line,	"include\routines_LEVELS.c", 705; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5320                        		__st.umiq	136, _al
         13:CA72  A9 88      			lda.l	#136
         13:CA74  85 F8      			sta	_al
 5321                        		__ld.uiq	0
         13:CA76  62         			cla
 5322                        		__call		_spr_ctrl.2
         13:CA77  20 3C E8   			call	_spr_ctrl.2
 5323                        	
 5324                        		.dbg	line,	"include\routines_LEVELS.c", 707; spr_set(chain_id+2);
 5325                        		__ld.um		_chain_id
         13:CA7A  AD 21 23   			lda	_chain_id
         13:CA7D  C2         			cly
 5326                        		__add.wi	2
         13:CA7E  18         			clc
         13:CA7F  69 02      			adc.l	#2
         13:CA81  90 01      			bcc	!+
         13:CA83  C8         			iny
         13:CA84             	!:
 5327                        		__call		_spr_set.1
         13:CA84  20 DD E7   			call	_spr_set.1
 5328                        	
 5329                        		.dbg	line,	"include\routines_LEVELS.c", 708; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5330                        		__st.umiq	136, _al
         13:CA87  A9 88      			lda.l	#136
         13:CA89  85 F8      			sta	_al
 5331                        		__ld.uiq	0
         13:CA8B  62         			cla
 5332                        		__call		_spr_ctrl.2
         13:CA8C  20 3C E8   			call	_spr_ctrl.2
 5333                        	
 5334                        		.dbg	line,	"include\routines_LEVELS.c", 710; spr_set(weapon_id);
 5335                        		__ld.umq	_weapon_id
         13:CA8F  AD 22 23   			lda	_weapon_id
 5336                        		__call		_spr_set.1
         13:CA92  20 DD E7   			call	_spr_set.1
 5337                        	
 5338                        		.dbg	line,	"include\routines_LEVELS.c", 711; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5339                        		__st.umiq	136, _al
         13:CA95  A9 88      			lda.l	#136
         13:CA97  85 F8      			sta	_al
 5340                        		__ld.uiq	0
         13:CA99  62         			cla
 5341                        		__call		_spr_ctrl.2
         13:CA9A  20 3C E8   			call	_spr_ctrl.2
 5342                        	
 5343                        		.dbg	line,	"include\routines_LEVELS.c", 712; spr_x(player_pos_x-5);
 5344                        		__ld.wm		_player_pos_x
         13:CA9D  AD D2 24   			lda.l	_player_pos_x
         13:CAA0  AC D3 24   			ldy.h	_player_pos_x
 5345                        		__sub.wi	5
         13:CAA3  38         			sec
         13:CAA4  E9 05      			sbc.l	#5
         13:CAA6  B0 01      			bcs	!+
         13:CAA8  88         			dey
         13:CAA9             	!:
 5346                        		__call		_spr_x.1
         13:CAA9  20 0A E8   			call	_spr_x.1
 5347                        	
 5348                        		.dbg	line,	"include\routines_LEVELS.c", 713; }
 5349                        	
 5350                        		.dbg	line,	"include\routines_LEVELS.c", 714; }
 5351    13:CAAC             	.LL145	.alias		.LL146
 5352                        	
 5353                        		.dbg	line,	"include\routines_LEVELS.c", 717; else if(player_state == STATE_CROUCH)
 5354                        		__bra		.LL146
         13:CAAC  4C 7A D2   			bra	.LL146
 5355    13:CAAF             	.LL144:
 5356                        		__ld.umq	_player_state
         13:CAAF  AD 16 23   			lda	_player_state
 5357                        		__equ_b.uiq	7
         13:CAB2  C9 07      			cmp	#7
         13:CAB4  F0 01      			beq	!+
         13:CAB6  18         			clc
         13:CAB7             	!:
 5358                        		__bfalse	.LL147
         13:CAB7  90 7B      			bcc	.LL147
 5359                        	
 5360                        		.dbg	line,	"include\routines_LEVELS.c", 718; {
 5361                        	
 5362                        		.dbg	line,	"include\routines_LEVELS.c", 719; if(player_axis == AXIS_LEFT)
 5363                        		__ld.umq	_player_axis
         13:CAB9  AD 17 23   			lda	_player_axis
 5364                        		__equ_b.uiq	1
         13:CABC  C9 01      			cmp	#1
         13:CABE  F0 01      			beq	!+
         13:CAC0  18         			clc
         13:CAC1             	!:
 5365                        		__bfalse	.LL148
         13:CAC1  B0 03 4C 7A			bcc	.LL148
         13:CAC5  D2          
 5366                        	
 5367                        		.dbg	line,	"include\routines_LEVELS.c", 720; {
 5368                        	
 5369                        		.dbg	line,	"include\routines_LEVELS.c", 721; player_axis = AXIS_RIGHT;
 5370                        		__st.umiq	0, _player_axis
         13:CAC6  9C 17 23   			stz	_player_axis
 5371                        	
 5372                        		.dbg	line,	"include\routines_LEVELS.c", 722; player_previous_axis = player_axis;
 5373                        		__ld.um		_player_axis
         13:CAC9  AD 17 23   			lda	_player_axis
         13:CACC  C2         			cly
 5374                        		__st.umq	_player_previous_axis
         13:CACD  8D 18 23   			sta	_player_previous_axis
 5375                        	
 5376                        		.dbg	line,	"include\routines_LEVELS.c", 724; spr_set(player_id);
 5377                        		__ld.umq	_player_id
         13:CAD0  AD 15 23   			lda	_player_id
 5378                        		__call		_spr_set.1
         13:CAD3  20 DD E7   			call	_spr_set.1
 5379                        	
 5380                        		.dbg	line,	"include\routines_LEVELS.c", 725; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5381                        		__st.umiq	136, _al
         13:CAD6  A9 88      			lda.l	#136
         13:CAD8  85 F8      			sta	_al
 5382                        		__ld.uiq	0
         13:CADA  62         			cla
 5383                        		__call		_spr_ctrl.2
         13:CADB  20 3C E8   			call	_spr_ctrl.2
 5384                        	
 5385                        		.dbg	line,	"include\routines_LEVELS.c", 727; spr_set(chain_id);
 5386                        		__ld.umq	_chain_id
         13:CADE  AD 21 23   			lda	_chain_id
 5387                        		__call		_spr_set.1
         13:CAE1  20 DD E7   			call	_spr_set.1
 5388                        	
 5389                        		.dbg	line,	"include\routines_LEVELS.c", 728; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5390                        		__st.umiq	136, _al
         13:CAE4  A9 88      			lda.l	#136
         13:CAE6  85 F8      			sta	_al
 5391                        		__ld.uiq	0
         13:CAE8  62         			cla
 5392                        		__call		_spr_ctrl.2
         13:CAE9  20 3C E8   			call	_spr_ctrl.2
 5393                        	
 5394                        		.dbg	line,	"include\routines_LEVELS.c", 730; spr_set(chain_id+1);
 5395                        		__ld.um		_chain_id
         13:CAEC  AD 21 23   			lda	_chain_id
         13:CAEF  C2         			cly
 5396                        		__add.wi	1
         13:CAF0  1A         			inc	a
         13:CAF1  D0 01      			bne	!+
         13:CAF3  C8         			iny
         13:CAF4             	!:
 5397                        		__call		_spr_set.1
         13:CAF4  20 DD E7   			call	_spr_set.1
 5398                        	
 5399                        		.dbg	line,	"include\routines_LEVELS.c", 731; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5400                        		__st.umiq	136, _al
         13:CAF7  A9 88      			lda.l	#136
         13:CAF9  85 F8      			sta	_al
 5401                        		__ld.uiq	0
         13:CAFB  62         			cla
 5402                        		__call		_spr_ctrl.2
         13:CAFC  20 3C E8   			call	_spr_ctrl.2
 5403                        	
 5404                        		.dbg	line,	"include\routines_LEVELS.c", 733; spr_set(chain_id+2);
 5405                        		__ld.um		_chain_id
         13:CAFF  AD 21 23   			lda	_chain_id
         13:CB02  C2         			cly
 5406                        		__add.wi	2
         13:CB03  18         			clc
         13:CB04  69 02      			adc.l	#2
         13:CB06  90 01      			bcc	!+
         13:CB08  C8         			iny
         13:CB09             	!:
 5407                        		__call		_spr_set.1
         13:CB09  20 DD E7   			call	_spr_set.1
 5408                        	
 5409                        		.dbg	line,	"include\routines_LEVELS.c", 734; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5410                        		__st.umiq	136, _al
         13:CB0C  A9 88      			lda.l	#136
         13:CB0E  85 F8      			sta	_al
 5411                        		__ld.uiq	0
         13:CB10  62         			cla
 5412                        		__call		_spr_ctrl.2
         13:CB11  20 3C E8   			call	_spr_ctrl.2
 5413                        	
 5414                        		.dbg	line,	"include\routines_LEVELS.c", 736; spr_set(weapon_id);
 5415                        		__ld.umq	_weapon_id
         13:CB14  AD 22 23   			lda	_weapon_id
 5416                        		__call		_spr_set.1
         13:CB17  20 DD E7   			call	_spr_set.1
 5417                        	
 5418                        		.dbg	line,	"include\routines_LEVELS.c", 737; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5419                        		__st.umiq	136, _al
         13:CB1A  A9 88      			lda.l	#136
         13:CB1C  85 F8      			sta	_al
 5420                        		__ld.uiq	0
         13:CB1E  62         			cla
 5421                        		__call		_spr_ctrl.2
         13:CB1F  20 3C E8   			call	_spr_ctrl.2
 5422                        	
 5423                        		.dbg	line,	"include\routines_LEVELS.c", 738; spr_x(player_pos_x-1);
 5424                        		__ld.wm		_player_pos_x
         13:CB22  AD D2 24   			lda.l	_player_pos_x
         13:CB25  AC D3 24   			ldy.h	_player_pos_x
 5425                        		__sub.wi	1
         13:CB28  38         			sec
         13:CB29  E9 01      			sbc.l	#1
         13:CB2B  B0 01      			bcs	!+
         13:CB2D  88         			dey
         13:CB2E             	!:
 5426                        		__call		_spr_x.1
         13:CB2E  20 0A E8   			call	_spr_x.1
 5427                        	
 5428                        		.dbg	line,	"include\routines_LEVELS.c", 739; }
 5429                        	
 5430                        		.dbg	line,	"include\routines_LEVELS.c", 740; }
 5431    13:CB31             	.LL148	.alias		.LL149
 5432                        	
 5433                        		.dbg	line,	"include\routines_LEVELS.c", 743; else if(player_state == STATE_FALL)
 5434                        		__bra		.LL149
         13:CB31  4C 7A D2   			bra	.LL149
 5435    13:CB34             	.LL147:
 5436                        		__ld.umq	_player_state
         13:CB34  AD 16 23   			lda	_player_state
 5437                        		__equ_b.uiq	9
         13:CB37  C9 09      			cmp	#9
         13:CB39  F0 01      			beq	!+
         13:CB3B  18         			clc
         13:CB3C             	!:
 5438                        		__bfalse	.LL150
         13:CB3C  90 7B      			bcc	.LL150
 5439                        	
 5440                        		.dbg	line,	"include\routines_LEVELS.c", 744; {
 5441                        	
 5442                        		.dbg	line,	"include\routines_LEVELS.c", 745; if(player_axis == AXIS_LEFT)
 5443                        		__ld.umq	_player_axis
         13:CB3E  AD 17 23   			lda	_player_axis
 5444                        		__equ_b.uiq	1
         13:CB41  C9 01      			cmp	#1
         13:CB43  F0 01      			beq	!+
         13:CB45  18         			clc
         13:CB46             	!:
 5445                        		__bfalse	.LL151
         13:CB46  B0 03 4C 7A			bcc	.LL151
         13:CB4A  D2          
 5446                        	
 5447                        		.dbg	line,	"include\routines_LEVELS.c", 746; {
 5448                        	
 5449                        		.dbg	line,	"include\routines_LEVELS.c", 747; player_axis = AXIS_RIGHT;
 5450                        		__st.umiq	0, _player_axis
         13:CB4B  9C 17 23   			stz	_player_axis
 5451                        	
 5452                        		.dbg	line,	"include\routines_LEVELS.c", 748; player_previous_axis = player_axis;
 5453                        		__ld.um		_player_axis
         13:CB4E  AD 17 23   			lda	_player_axis
         13:CB51  C2         			cly
 5454                        		__st.umq	_player_previous_axis
         13:CB52  8D 18 23   			sta	_player_previous_axis
 5455                        	
 5456                        		.dbg	line,	"include\routines_LEVELS.c", 750; spr_set(player_id);
 5457                        		__ld.umq	_player_id
         13:CB55  AD 15 23   			lda	_player_id
 5458                        		__call		_spr_set.1
         13:CB58  20 DD E7   			call	_spr_set.1
 5459                        	
 5460                        		.dbg	line,	"include\routines_LEVELS.c", 751; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5461                        		__st.umiq	136, _al
         13:CB5B  A9 88      			lda.l	#136
         13:CB5D  85 F8      			sta	_al
 5462                        		__ld.uiq	0
         13:CB5F  62         			cla
 5463                        		__call		_spr_ctrl.2
         13:CB60  20 3C E8   			call	_spr_ctrl.2
 5464                        	
 5465                        		.dbg	line,	"include\routines_LEVELS.c", 753; spr_set(chain_id);
 5466                        		__ld.umq	_chain_id
         13:CB63  AD 21 23   			lda	_chain_id
 5467                        		__call		_spr_set.1
         13:CB66  20 DD E7   			call	_spr_set.1
 5468                        	
 5469                        		.dbg	line,	"include\routines_LEVELS.c", 754; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5470                        		__st.umiq	136, _al
         13:CB69  A9 88      			lda.l	#136
         13:CB6B  85 F8      			sta	_al
 5471                        		__ld.uiq	0
         13:CB6D  62         			cla
 5472                        		__call		_spr_ctrl.2
         13:CB6E  20 3C E8   			call	_spr_ctrl.2
 5473                        	
 5474                        		.dbg	line,	"include\routines_LEVELS.c", 756; spr_set(chain_id+1);
 5475                        		__ld.um		_chain_id
         13:CB71  AD 21 23   			lda	_chain_id
         13:CB74  C2         			cly
 5476                        		__add.wi	1
         13:CB75  1A         			inc	a
         13:CB76  D0 01      			bne	!+
         13:CB78  C8         			iny
         13:CB79             	!:
 5477                        		__call		_spr_set.1
         13:CB79  20 DD E7   			call	_spr_set.1
 5478                        	
 5479                        		.dbg	line,	"include\routines_LEVELS.c", 757; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5480                        		__st.umiq	136, _al
         13:CB7C  A9 88      			lda.l	#136
         13:CB7E  85 F8      			sta	_al
 5481                        		__ld.uiq	0
         13:CB80  62         			cla
 5482                        		__call		_spr_ctrl.2
         13:CB81  20 3C E8   			call	_spr_ctrl.2
 5483                        	
 5484                        		.dbg	line,	"include\routines_LEVELS.c", 759; spr_set(chain_id+2);
 5485                        		__ld.um		_chain_id
         13:CB84  AD 21 23   			lda	_chain_id
         13:CB87  C2         			cly
 5486                        		__add.wi	2
         13:CB88  18         			clc
         13:CB89  69 02      			adc.l	#2
         13:CB8B  90 01      			bcc	!+
         13:CB8D  C8         			iny
         13:CB8E             	!:
 5487                        		__call		_spr_set.1
         13:CB8E  20 DD E7   			call	_spr_set.1
 5488                        	
 5489                        		.dbg	line,	"include\routines_LEVELS.c", 760; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5490                        		__st.umiq	136, _al
         13:CB91  A9 88      			lda.l	#136
         13:CB93  85 F8      			sta	_al
 5491                        		__ld.uiq	0
         13:CB95  62         			cla
 5492                        		__call		_spr_ctrl.2
         13:CB96  20 3C E8   			call	_spr_ctrl.2
 5493                        	
 5494                        		.dbg	line,	"include\routines_LEVELS.c", 762; spr_set(weapon_id);
 5495                        		__ld.umq	_weapon_id
         13:CB99  AD 22 23   			lda	_weapon_id
 5496                        		__call		_spr_set.1
         13:CB9C  20 DD E7   			call	_spr_set.1
 5497                        	
 5498                        		.dbg	line,	"include\routines_LEVELS.c", 763; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5499                        		__st.umiq	136, _al
         13:CB9F  A9 88      			lda.l	#136
         13:CBA1  85 F8      			sta	_al
 5500                        		__ld.uiq	0
         13:CBA3  62         			cla
 5501                        		__call		_spr_ctrl.2
         13:CBA4  20 3C E8   			call	_spr_ctrl.2
 5502                        	
 5503                        		.dbg	line,	"include\routines_LEVELS.c", 764; spr_x(player_pos_x-4);
 5504                        		__ld.wm		_player_pos_x
         13:CBA7  AD D2 24   			lda.l	_player_pos_x
         13:CBAA  AC D3 24   			ldy.h	_player_pos_x
 5505                        		__sub.wi	4
         13:CBAD  38         			sec
         13:CBAE  E9 04      			sbc.l	#4
         13:CBB0  B0 01      			bcs	!+
         13:CBB2  88         			dey
         13:CBB3             	!:
 5506                        		__call		_spr_x.1
         13:CBB3  20 0A E8   			call	_spr_x.1
 5507                        	
 5508                        		.dbg	line,	"include\routines_LEVELS.c", 765; }
 5509                        	
 5510                        		.dbg	line,	"include\routines_LEVELS.c", 766; }
 5511    13:CBB6             	.LL151	.alias		.LL152
 5512                        	
 5513                        		.dbg	line,	"include\routines_LEVELS.c", 769; else if(player_state == STATE_HANG)
 5514                        		__bra		.LL152
         13:CBB6  4C 7A D2   			bra	.LL152
 5515    13:CBB9             	.LL150:
 5516                        		__ld.umq	_player_state
         13:CBB9  AD 16 23   			lda	_player_state
 5517                        		__equ_b.uiq	10
         13:CBBC  C9 0A      			cmp	#10
         13:CBBE  F0 01      			beq	!+
         13:CBC0  18         			clc
         13:CBC1             	!:
 5518                        		__bfalse	.LL153
         13:CBC1  90 7B      			bcc	.LL153
 5519                        	
 5520                        		.dbg	line,	"include\routines_LEVELS.c", 770; {
 5521                        	
 5522                        		.dbg	line,	"include\routines_LEVELS.c", 771; if(player_axis == AXIS_LEFT)
 5523                        		__ld.umq	_player_axis
         13:CBC3  AD 17 23   			lda	_player_axis
 5524                        		__equ_b.uiq	1
         13:CBC6  C9 01      			cmp	#1
         13:CBC8  F0 01      			beq	!+
         13:CBCA  18         			clc
         13:CBCB             	!:
 5525                        		__bfalse	.LL154
         13:CBCB  B0 03 4C 7A			bcc	.LL154
         13:CBCF  D2          
 5526                        	
 5527                        		.dbg	line,	"include\routines_LEVELS.c", 772; {
 5528                        	
 5529                        		.dbg	line,	"include\routines_LEVELS.c", 773; player_axis = AXIS_RIGHT;
 5530                        		__st.umiq	0, _player_axis
         13:CBD0  9C 17 23   			stz	_player_axis
 5531                        	
 5532                        		.dbg	line,	"include\routines_LEVELS.c", 774; player_previous_axis = player_axis;
 5533                        		__ld.um		_player_axis
         13:CBD3  AD 17 23   			lda	_player_axis
         13:CBD6  C2         			cly
 5534                        		__st.umq	_player_previous_axis
         13:CBD7  8D 18 23   			sta	_player_previous_axis
 5535                        	
 5536                        		.dbg	line,	"include\routines_LEVELS.c", 776; spr_set(player_id);
 5537                        		__ld.umq	_player_id
         13:CBDA  AD 15 23   			lda	_player_id
 5538                        		__call		_spr_set.1
         13:CBDD  20 DD E7   			call	_spr_set.1
 5539                        	
 5540                        		.dbg	line,	"include\routines_LEVELS.c", 777; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5541                        		__st.umiq	136, _al
         13:CBE0  A9 88      			lda.l	#136
         13:CBE2  85 F8      			sta	_al
 5542                        		__ld.uiq	0
         13:CBE4  62         			cla
 5543                        		__call		_spr_ctrl.2
         13:CBE5  20 3C E8   			call	_spr_ctrl.2
 5544                        	
 5545                        		.dbg	line,	"include\routines_LEVELS.c", 779; spr_set(chain_id);
 5546                        		__ld.umq	_chain_id
         13:CBE8  AD 21 23   			lda	_chain_id
 5547                        		__call		_spr_set.1
         13:CBEB  20 DD E7   			call	_spr_set.1
 5548                        	
 5549                        		.dbg	line,	"include\routines_LEVELS.c", 780; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5550                        		__st.umiq	136, _al
         13:CBEE  A9 88      			lda.l	#136
         13:CBF0  85 F8      			sta	_al
 5551                        		__ld.uiq	0
         13:CBF2  62         			cla
 5552                        		__call		_spr_ctrl.2
         13:CBF3  20 3C E8   			call	_spr_ctrl.2
 5553                        	
 5554                        		.dbg	line,	"include\routines_LEVELS.c", 782; spr_set(chain_id+1);
 5555                        		__ld.um		_chain_id
         13:CBF6  AD 21 23   			lda	_chain_id
         13:CBF9  C2         			cly
 5556                        		__add.wi	1
         13:CBFA  1A         			inc	a
         13:CBFB  D0 01      			bne	!+
         13:CBFD  C8         			iny
         13:CBFE             	!:
 5557                        		__call		_spr_set.1
         13:CBFE  20 DD E7   			call	_spr_set.1
 5558                        	
 5559                        		.dbg	line,	"include\routines_LEVELS.c", 783; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5560                        		__st.umiq	136, _al
         13:CC01  A9 88      			lda.l	#136
         13:CC03  85 F8      			sta	_al
 5561                        		__ld.uiq	0
         13:CC05  62         			cla
 5562                        		__call		_spr_ctrl.2
         13:CC06  20 3C E8   			call	_spr_ctrl.2
 5563                        	
 5564                        		.dbg	line,	"include\routines_LEVELS.c", 785; spr_set(chain_id+2);
 5565                        		__ld.um		_chain_id
         13:CC09  AD 21 23   			lda	_chain_id
         13:CC0C  C2         			cly
 5566                        		__add.wi	2
         13:CC0D  18         			clc
         13:CC0E  69 02      			adc.l	#2
         13:CC10  90 01      			bcc	!+
         13:CC12  C8         			iny
         13:CC13             	!:
 5567                        		__call		_spr_set.1
         13:CC13  20 DD E7   			call	_spr_set.1
 5568                        	
 5569                        		.dbg	line,	"include\routines_LEVELS.c", 786; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5570                        		__st.umiq	136, _al
         13:CC16  A9 88      			lda.l	#136
         13:CC18  85 F8      			sta	_al
 5571                        		__ld.uiq	0
         13:CC1A  62         			cla
 5572                        		__call		_spr_ctrl.2
         13:CC1B  20 3C E8   			call	_spr_ctrl.2
 5573                        	
 5574                        		.dbg	line,	"include\routines_LEVELS.c", 788; spr_set(weapon_id);
 5575                        		__ld.umq	_weapon_id
         13:CC1E  AD 22 23   			lda	_weapon_id
 5576                        		__call		_spr_set.1
         13:CC21  20 DD E7   			call	_spr_set.1
 5577                        	
 5578                        		.dbg	line,	"include\routines_LEVELS.c", 789; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5579                        		__st.umiq	136, _al
         13:CC24  A9 88      			lda.l	#136
         13:CC26  85 F8      			sta	_al
 5580                        		__ld.uiq	0
         13:CC28  62         			cla
 5581                        		__call		_spr_ctrl.2
         13:CC29  20 3C E8   			call	_spr_ctrl.2
 5582                        	
 5583                        		.dbg	line,	"include\routines_LEVELS.c", 790; spr_x(player_pos_x+17);
 5584                        		__ld.wm		_player_pos_x
         13:CC2C  AD D2 24   			lda.l	_player_pos_x
         13:CC2F  AC D3 24   			ldy.h	_player_pos_x
 5585                        		__add.wi	17
         13:CC32  18         			clc
         13:CC33  69 11      			adc.l	#17
         13:CC35  90 01      			bcc	!+
         13:CC37  C8         			iny
         13:CC38             	!:
 5586                        		__call		_spr_x.1
         13:CC38  20 0A E8   			call	_spr_x.1
 5587                        	
 5588                        		.dbg	line,	"include\routines_LEVELS.c", 791; }
 5589                        	
 5590                        		.dbg	line,	"include\routines_LEVELS.c", 792; }
 5591    13:CC3B             	.LL154	.alias		.LL155
 5592                        	
 5593                        		.dbg	line,	"include\routines_LEVELS.c", 795; else if(player_state == STATE_CLIMB_UP || player_state == STATE_CLIMB_DOWN)
 5594                        		__bra		.LL155
         13:CC3B  4C 7A D2   			bra	.LL155
 5595    13:CC3E             	.LL153:
 5596                        		__ld.umq	_player_state
         13:CC3E  AD 16 23   			lda	_player_state
 5597                        		__equ_b.uiq	11
         13:CC41  C9 0B      			cmp	#11
         13:CC43  F0 01      			beq	!+
         13:CC45  18         			clc
         13:CC46             	!:
 5598                        		__btrue		.LL157
         13:CC46  B0 08      			bcs	.LL157
 5599                        		__ld.umq	_player_state
         13:CC48  AD 16 23   			lda	_player_state
 5600                        		__equ_b.uiq	12
         13:CC4B  C9 0C      			cmp	#12
         13:CC4D  F0 01      			beq	!+
         13:CC4F  18         			clc
         13:CC50             	!:
 5601    13:CC50             	.LL157:
 5602                        		__bfalse	.LL156
         13:CC50  B0 03 4C 7A			bcc	.LL156
         13:CC54  D2          
 5603                        	
 5604                        		.dbg	line,	"include\routines_LEVELS.c", 796; {
 5605                        	
 5606                        		.dbg	line,	"include\routines_LEVELS.c", 797; spr_set(player_id);
 5607                        		__ld.umq	_player_id
         13:CC55  AD 15 23   			lda	_player_id
 5608                        		__call		_spr_set.1
         13:CC58  20 DD E7   			call	_spr_set.1
 5609                        	
 5610                        		.dbg	line,	"include\routines_LEVELS.c", 798; spr_pattern(PLAYER_HANG_VRAM_ADR);
 5611                        		__ld.wi		7936
         13:CC5B  62         			cla
         13:CC5C  A0 1F      			ldy.h	#7936
 5612                        		__call		_spr_pattern.1
         13:CC5E  20 26 E8   			call	_spr_pattern.1
 5613                        	
 5614                        		.dbg	line,	"include\routines_LEVELS.c", 799; player_counter_anim = 0;
 5615                        		__st.umiq	0, _player_counter_anim
         13:CC61  9C 19 23   			stz	_player_counter_anim
 5616                        	
 5617                        		.dbg	line,	"include\routines_LEVELS.c", 800; player_state = STATE_HANG;
 5618                        		__st.umiq	10, _player_state
         13:CC64  A9 0A      			lda.l	#10
         13:CC66  8D 16 23   			sta	_player_state
 5619                        	
 5620                        		.dbg	line,	"include\routines_LEVELS.c", 801; }
 5621                        	
 5622                        		.dbg	line,	"include\routines_LEVELS.c", 802; }
 5623    13:CC69             	.LL156	.alias		.LL158
 5624    13:CC69             	.LL155	.alias		.LL158
 5625    13:CC69             	.LL152	.alias		.LL158
 5626    13:CC69             	.LL149	.alias		.LL158
 5627    13:CC69             	.LL146	.alias		.LL158
 5628    13:CC69             	.LL143	.alias		.LL158
 5629    13:CC69             	.LL138	.alias		.LL158
 5630                        	
 5631                        		.dbg	line,	"include\routines_LEVELS.c", 805; //--------------------------------------------------------------------------------------//
 5632                        	
 5633                        		.dbg	line,	"include\routines_LEVELS.c", 806; //                                     LEFT BUTTON                                      //
 5634                        	
 5635                        		.dbg	line,	"include\routines_LEVELS.c", 807; //--------------------------------------------------------------------------------------//
 5636                        	
 5637                        		.dbg	line,	"include\routines_LEVELS.c", 809; else if(joy(JOYPAD_1) & JOY_LEFT)
 5638                        		__bra		.LL158
         13:CC69  4C 7A D2   			bra	.LL158
 5639    13:CC6C             	.LL133:
 5640                        		__ld.uiq	0
         13:CC6C  62         			cla
 5641                        		 _joy.1
         13:CC6D  AA         			tax
         13:CC6E  BD 28 22   			lda	joynow, x
         13:CC71  BC D3 22   			ldy	joy6now, x
 5642                        		__tand.wi	128
         13:CC74  29 80      			and	#128
         13:CC76  C9 01      	!:		cmp	#1
 5643                        		__bfalse	.LL159
         13:CC78  B0 03 4C 40			bcc	.LL159
         13:CC7C  D0          
 5644                        	
 5645                        		.dbg	line,	"include\routines_LEVELS.c", 810; {
 5646                        	
 5647                        		.dbg	line,	"include\routines_LEVELS.c", 811; if(player_state == STATE_IDLE || player_state == STATE_WALK)
 5648                        		__not.um	_player_state
         13:CC7D  AD 16 23   			lda	_player_state
         13:CC80  18         			clc
         13:CC81  D0 01      			bne	!+
         13:CC83  38         			sec
         13:CC84             	!:
 5649                        		__btrue		.LL161
         13:CC84  B0 08      			bcs	.LL161
 5650                        		__ld.umq	_player_state
         13:CC86  AD 16 23   			lda	_player_state
 5651                        		__equ_b.uiq	1
         13:CC89  C9 01      			cmp	#1
         13:CC8B  F0 01      			beq	!+
         13:CC8D  18         			clc
         13:CC8E             	!:
 5652    13:CC8E             	.LL161:
 5653                        		__bfalse	.LL160
         13:CC8E  B0 03 4C 34			bcc	.LL160
         13:CC92  CD          
 5654                        	
 5655                        		.dbg	line,	"include\routines_LEVELS.c", 812; {
 5656                        	
 5657                        		.dbg	line,	"include\routines_LEVELS.c", 813; player_axis = AXIS_LEFT;
 5658                        		__st.umiq	1, _player_axis
         13:CC93  A9 01      			lda.l	#1
         13:CC95  8D 17 23   			sta	_player_axis
 5659                        	
 5660                        		.dbg	line,	"include\routines_LEVELS.c", 815; if(player_previous_axis != player_axis)
 5661                        		__ld.umq	_player_previous_axis
         13:CC98  AD 18 23   			lda	_player_previous_axis
 5662                        		__neq_b.umq	_player_axis
         13:CC9B  38         			sec
         13:CC9C  4D 17 23   			eor	_player_axis
         13:CC9F  D0 01      			bne	!+
         13:CCA1  18         			clc
         13:CCA2             	!:
 5663                        		__bfalse	.LL162
         13:CCA2  90 6D      			bcc	.LL162
 5664                        	
 5665                        		.dbg	line,	"include\routines_LEVELS.c", 816; {
 5666                        	
 5667                        		.dbg	line,	"include\routines_LEVELS.c", 817; player_previous_axis = player_axis;
 5668                        		__ld.um		_player_axis
         13:CCA4  AD 17 23   			lda	_player_axis
         13:CCA7  C2         			cly
 5669                        		__st.umq	_player_previous_axis
         13:CCA8  8D 18 23   			sta	_player_previous_axis
 5670                        	
 5671                        		.dbg	line,	"include\routines_LEVELS.c", 819; spr_set(player_id);
 5672                        		__ld.umq	_player_id
         13:CCAB  AD 15 23   			lda	_player_id
 5673                        		__call		_spr_set.1
         13:CCAE  20 DD E7   			call	_spr_set.1
 5674                        	
 5675                        		.dbg	line,	"include\routines_LEVELS.c", 820; spr_ctrl(FLIP_MAS, FLIP_X);
 5676                        		__st.umiq	136, _al
         13:CCB1  A9 88      			lda.l	#136
         13:CCB3  85 F8      			sta	_al
 5677                        		__ld.uiq	8
         13:CCB5  A9 08      			lda	#8
 5678                        		__call		_spr_ctrl.2
         13:CCB7  20 3C E8   			call	_spr_ctrl.2
 5679                        	
 5680                        		.dbg	line,	"include\routines_LEVELS.c", 822; spr_set(chain_id);
 5681                        		__ld.umq	_chain_id
         13:CCBA  AD 21 23   			lda	_chain_id
 5682                        		__call		_spr_set.1
         13:CCBD  20 DD E7   			call	_spr_set.1
 5683                        	
 5684                        		.dbg	line,	"include\routines_LEVELS.c", 823; spr_ctrl(FLIP_MAS, FLIP_X);
 5685                        		__st.umiq	136, _al
         13:CCC0  A9 88      			lda.l	#136
         13:CCC2  85 F8      			sta	_al
 5686                        		__ld.uiq	8
         13:CCC4  A9 08      			lda	#8
 5687                        		__call		_spr_ctrl.2
         13:CCC6  20 3C E8   			call	_spr_ctrl.2
 5688                        	
 5689                        		.dbg	line,	"include\routines_LEVELS.c", 825; spr_set(chain_id+1);
 5690                        		__ld.um		_chain_id
         13:CCC9  AD 21 23   			lda	_chain_id
         13:CCCC  C2         			cly
 5691                        		__add.wi	1
         13:CCCD  1A         			inc	a
         13:CCCE  D0 01      			bne	!+
         13:CCD0  C8         			iny
         13:CCD1             	!:
 5692                        		__call		_spr_set.1
         13:CCD1  20 DD E7   			call	_spr_set.1
 5693                        	
 5694                        		.dbg	line,	"include\routines_LEVELS.c", 826; spr_ctrl(FLIP_MAS, FLIP_X);
 5695                        		__st.umiq	136, _al
         13:CCD4  A9 88      			lda.l	#136
         13:CCD6  85 F8      			sta	_al
 5696                        		__ld.uiq	8
         13:CCD8  A9 08      			lda	#8
 5697                        		__call		_spr_ctrl.2
         13:CCDA  20 3C E8   			call	_spr_ctrl.2
 5698                        	
 5699                        		.dbg	line,	"include\routines_LEVELS.c", 828; spr_set(chain_id+2);
 5700                        		__ld.um		_chain_id
         13:CCDD  AD 21 23   			lda	_chain_id
         13:CCE0  C2         			cly
 5701                        		__add.wi	2
         13:CCE1  18         			clc
         13:CCE2  69 02      			adc.l	#2
         13:CCE4  90 01      			bcc	!+
         13:CCE6  C8         			iny
         13:CCE7             	!:
 5702                        		__call		_spr_set.1
         13:CCE7  20 DD E7   			call	_spr_set.1
 5703                        	
 5704                        		.dbg	line,	"include\routines_LEVELS.c", 829; spr_ctrl(FLIP_MAS, FLIP_X);
 5705                        		__st.umiq	136, _al
         13:CCEA  A9 88      			lda.l	#136
         13:CCEC  85 F8      			sta	_al
 5706                        		__ld.uiq	8
         13:CCEE  A9 08      			lda	#8
 5707                        		__call		_spr_ctrl.2
         13:CCF0  20 3C E8   			call	_spr_ctrl.2
 5708                        	
 5709                        		.dbg	line,	"include\routines_LEVELS.c", 831; spr_set(weapon_id);
 5710                        		__ld.umq	_weapon_id
         13:CCF3  AD 22 23   			lda	_weapon_id
 5711                        		__call		_spr_set.1
         13:CCF6  20 DD E7   			call	_spr_set.1
 5712                        	
 5713                        		.dbg	line,	"include\routines_LEVELS.c", 832; spr_ctrl(FLIP_MAS, FLIP_X);
 5714                        		__st.umiq	136, _al
         13:CCF9  A9 88      			lda.l	#136
         13:CCFB  85 F8      			sta	_al
 5715                        		__ld.uiq	8
         13:CCFD  A9 08      			lda	#8
 5716                        		__call		_spr_ctrl.2
         13:CCFF  20 3C E8   			call	_spr_ctrl.2
 5717                        	
 5718                        		.dbg	line,	"include\routines_LEVELS.c", 833; spr_x(player_pos_x+15);
 5719                        		__ld.wm		_player_pos_x
         13:CD02  AD D2 24   			lda.l	_player_pos_x
         13:CD05  AC D3 24   			ldy.h	_player_pos_x
 5720                        		__add.wi	15
         13:CD08  18         			clc
         13:CD09  69 0F      			adc.l	#15
         13:CD0B  90 01      			bcc	!+
         13:CD0D  C8         			iny
         13:CD0E             	!:
 5721                        		__call		_spr_x.1
         13:CD0E  20 0A E8   			call	_spr_x.1
 5722                        	
 5723                        		.dbg	line,	"include\routines_LEVELS.c", 834; }
 5724                        	
 5725                        		.dbg	line,	"include\routines_LEVELS.c", 836; if(joy(JOYPAD_1) & JOY_DOWN)
 5726    13:CD11             	.LL162:
 5727                        		__ld.uiq	0
         13:CD11  62         			cla
 5728                        		 _joy.1
         13:CD12  AA         			tax
         13:CD13  BD 28 22   			lda	joynow, x
         13:CD16  BC D3 22   			ldy	joy6now, x
 5729                        		__tand.wi	64
         13:CD19  29 40      			and	#64
         13:CD1B  C9 01      	!:		cmp	#1
 5730                        		__bfalse	.LL163
         13:CD1D  90 0D      			bcc	.LL163
 5731                        	
 5732                        		.dbg	line,	"include\routines_LEVELS.c", 837; {
 5733                        	
 5734                        		.dbg	line,	"include\routines_LEVELS.c", 838; player_counter_anim = 1;
 5735                        		__st.umiq	1, _player_counter_anim
         13:CD1F  A9 01      			lda.l	#1
         13:CD21  8D 19 23   			sta	_player_counter_anim
 5736                        	
 5737                        		.dbg	line,	"include\routines_LEVELS.c", 839; player_state = STATE_CROUCH;
 5738                        		__st.umiq	7, _player_state
         13:CD24  A9 07      			lda.l	#7
         13:CD26  8D 16 23   			sta	_player_state
 5739                        	
 5740                        		.dbg	line,	"include\routines_LEVELS.c", 840; return;
 5741                        		__bra		.LL124
         13:CD29  4C 7A D2   			bra	.LL124
 5742                        	
 5743                        		.dbg	line,	"include\routines_LEVELS.c", 841; }
 5744                        	
 5745                        		.dbg	line,	"include\routines_LEVELS.c", 843; player_state = STATE_WALK;
 5746    13:CD2C             	.LL163:
 5747                        		__st.umiq	1, _player_state
         13:CD2C  A9 01      			lda.l	#1
         13:CD2E  8D 16 23   			sta	_player_state
 5748                        	
 5749                        		.dbg	line,	"include\routines_LEVELS.c", 844; }
 5750                        	
 5751                        		.dbg	line,	"include\routines_LEVELS.c", 847; else if(player_state == STATE_JUMP)
 5752                        		__bra		.LL164
         13:CD31  4C 7A D2   			bra	.LL164
 5753    13:CD34             	.LL160:
 5754                        		__ld.umq	_player_state
         13:CD34  AD 16 23   			lda	_player_state
 5755                        		__equ_b.uiq	4
         13:CD37  C9 04      			cmp	#4
         13:CD39  F0 01      			beq	!+
         13:CD3B  18         			clc
         13:CD3C             	!:
 5756                        		__bfalse	.LL165
         13:CD3C  B0 03 4C DA			bcc	.LL165
         13:CD40  CD          
 5757                        	
 5758                        		.dbg	line,	"include\routines_LEVELS.c", 848; {
 5759                        	
 5760                        		.dbg	line,	"include\routines_LEVELS.c", 849; if(player_axis == AXIS_RIGHT)
 5761                        		__not.um	_player_axis
         13:CD41  AD 17 23   			lda	_player_axis
         13:CD44  18         			clc
         13:CD45  D0 01      			bne	!+
         13:CD47  38         			sec
         13:CD48             	!:
 5762                        		__bfalse	.LL166
         13:CD48  90 72      			bcc	.LL166
 5763                        	
 5764                        		.dbg	line,	"include\routines_LEVELS.c", 850; {
 5765                        	
 5766                        		.dbg	line,	"include\routines_LEVELS.c", 851; player_axis = AXIS_LEFT;
 5767                        		__st.umiq	1, _player_axis
         13:CD4A  A9 01      			lda.l	#1
         13:CD4C  8D 17 23   			sta	_player_axis
 5768                        	
 5769                        		.dbg	line,	"include\routines_LEVELS.c", 852; player_previous_axis = player_axis;
 5770                        		__ld.um		_player_axis
         13:CD4F  AD 17 23   			lda	_player_axis
         13:CD52  C2         			cly
 5771                        		__st.umq	_player_previous_axis
         13:CD53  8D 18 23   			sta	_player_previous_axis
 5772                        	
 5773                        		.dbg	line,	"include\routines_LEVELS.c", 854; spr_set(player_id);
 5774                        		__ld.umq	_player_id
         13:CD56  AD 15 23   			lda	_player_id
 5775                        		__call		_spr_set.1
         13:CD59  20 DD E7   			call	_spr_set.1
 5776                        	
 5777                        		.dbg	line,	"include\routines_LEVELS.c", 855; spr_ctrl(FLIP_MAS, FLIP_X);
 5778                        		__st.umiq	136, _al
         13:CD5C  A9 88      			lda.l	#136
         13:CD5E  85 F8      			sta	_al
 5779                        		__ld.uiq	8
         13:CD60  A9 08      			lda	#8
 5780                        		__call		_spr_ctrl.2
         13:CD62  20 3C E8   			call	_spr_ctrl.2
 5781                        	
 5782                        		.dbg	line,	"include\routines_LEVELS.c", 857; spr_set(chain_id);
 5783                        		__ld.umq	_chain_id
         13:CD65  AD 21 23   			lda	_chain_id
 5784                        		__call		_spr_set.1
         13:CD68  20 DD E7   			call	_spr_set.1
 5785                        	
 5786                        		.dbg	line,	"include\routines_LEVELS.c", 858; spr_ctrl(FLIP_MAS, FLIP_X);
 5787                        		__st.umiq	136, _al
         13:CD6B  A9 88      			lda.l	#136
         13:CD6D  85 F8      			sta	_al
 5788                        		__ld.uiq	8
         13:CD6F  A9 08      			lda	#8
 5789                        		__call		_spr_ctrl.2
         13:CD71  20 3C E8   			call	_spr_ctrl.2
 5790                        	
 5791                        		.dbg	line,	"include\routines_LEVELS.c", 860; spr_set(chain_id+1);
 5792                        		__ld.um		_chain_id
         13:CD74  AD 21 23   			lda	_chain_id
         13:CD77  C2         			cly
 5793                        		__add.wi	1
         13:CD78  1A         			inc	a
         13:CD79  D0 01      			bne	!+
         13:CD7B  C8         			iny
         13:CD7C             	!:
 5794                        		__call		_spr_set.1
         13:CD7C  20 DD E7   			call	_spr_set.1
 5795                        	
 5796                        		.dbg	line,	"include\routines_LEVELS.c", 861; spr_ctrl(FLIP_MAS, FLIP_X);
 5797                        		__st.umiq	136, _al
         13:CD7F  A9 88      			lda.l	#136
         13:CD81  85 F8      			sta	_al
 5798                        		__ld.uiq	8
         13:CD83  A9 08      			lda	#8
 5799                        		__call		_spr_ctrl.2
         13:CD85  20 3C E8   			call	_spr_ctrl.2
 5800                        	
 5801                        		.dbg	line,	"include\routines_LEVELS.c", 863; spr_set(chain_id+2);
 5802                        		__ld.um		_chain_id
         13:CD88  AD 21 23   			lda	_chain_id
         13:CD8B  C2         			cly
 5803                        		__add.wi	2
         13:CD8C  18         			clc
         13:CD8D  69 02      			adc.l	#2
         13:CD8F  90 01      			bcc	!+
         13:CD91  C8         			iny
         13:CD92             	!:
 5804                        		__call		_spr_set.1
         13:CD92  20 DD E7   			call	_spr_set.1
 5805                        	
 5806                        		.dbg	line,	"include\routines_LEVELS.c", 864; spr_ctrl(FLIP_MAS, FLIP_X);
 5807                        		__st.umiq	136, _al
         13:CD95  A9 88      			lda.l	#136
         13:CD97  85 F8      			sta	_al
 5808                        		__ld.uiq	8
         13:CD99  A9 08      			lda	#8
 5809                        		__call		_spr_ctrl.2
         13:CD9B  20 3C E8   			call	_spr_ctrl.2
 5810                        	
 5811                        		.dbg	line,	"include\routines_LEVELS.c", 866; spr_set(weapon_id);
 5812                        		__ld.umq	_weapon_id
         13:CD9E  AD 22 23   			lda	_weapon_id
 5813                        		__call		_spr_set.1
         13:CDA1  20 DD E7   			call	_spr_set.1
 5814                        	
 5815                        		.dbg	line,	"include\routines_LEVELS.c", 867; spr_ctrl(FLIP_MAS, FLIP_X);
 5816                        		__st.umiq	136, _al
         13:CDA4  A9 88      			lda.l	#136
         13:CDA6  85 F8      			sta	_al
 5817                        		__ld.uiq	8
         13:CDA8  A9 08      			lda	#8
 5818                        		__call		_spr_ctrl.2
         13:CDAA  20 3C E8   			call	_spr_ctrl.2
 5819                        	
 5820                        		.dbg	line,	"include\routines_LEVELS.c", 868; spr_x(player_pos_x+21);
 5821                        		__ld.wm		_player_pos_x
         13:CDAD  AD D2 24   			lda.l	_player_pos_x
         13:CDB0  AC D3 24   			ldy.h	_player_pos_x
 5822                        		__add.wi	21
         13:CDB3  18         			clc
         13:CDB4  69 15      			adc.l	#21
         13:CDB6  90 01      			bcc	!+
         13:CDB8  C8         			iny
         13:CDB9             	!:
 5823                        		__call		_spr_x.1
         13:CDB9  20 0A E8   			call	_spr_x.1
 5824                        	
 5825                        		.dbg	line,	"include\routines_LEVELS.c", 869; }
 5826                        	
 5827                        		.dbg	line,	"include\routines_LEVELS.c", 871; if(player_index_jump > 11 && player_index_jump < 15)
 5828    13:CDBC             	.LL166:
 5829                        		__ld.umq	_player_index_jump
         13:CDBC  AD 1A 23   			lda	_player_index_jump
 5830                        		__ugt_b.uiq	11
         13:CDBF  18         			clc			; Subtract integer+1 from A.
         13:CDC0  E9 0B      			sbc	#11		; CS if A > integer.
 5831                        		__bfalse	.LL168
         13:CDC2  90 09      			bcc	.LL168
 5832                        		__ld.umq	_player_index_jump
         13:CDC4  AD 1A 23   			lda	_player_index_jump
 5833                        		__ult_b.uiq	15
         13:CDC7  C9 0F      			cmp	#15		; Subtract integer from A.
         13:CDC9  6A         			ror	a		; CC if A < integer.
         13:CDCA  49 80      			eor	#$80
         13:CDCC  2A         			rol	a
 5834    13:CDCD             	.LL168:
 5835                        		__bfalse	.LL167
         13:CDCD  B0 03 4C 7A			bcc	.LL167
         13:CDD1  D2          
 5836                        	
 5837                        		.dbg	line,	"include\routines_LEVELS.c", 872; {
 5838                        	
 5839                        		.dbg	line,	"include\routines_LEVELS.c", 873; player_state = STATE_JUMP_LEFT;                        
 5840                        		__st.umiq	6, _player_state
         13:CDD2  A9 06      			lda.l	#6
         13:CDD4  8D 16 23   			sta	_player_state
 5841                        	
 5842                        		.dbg	line,	"include\routines_LEVELS.c", 874; }
 5843                        	
 5844                        		.dbg	line,	"include\routines_LEVELS.c", 875; }
 5845    13:CDD7             	.LL167	.alias		.LL169
 5846                        	
 5847                        		.dbg	line,	"include\routines_LEVELS.c", 878; else if(player_state == STATE_JUMP_RIGHT)
 5848                        		__bra		.LL169
         13:CDD7  4C 7A D2   			bra	.LL169
 5849    13:CDDA             	.LL165:
 5850                        		__ld.umq	_player_state
         13:CDDA  AD 16 23   			lda	_player_state
 5851                        		__equ_b.uiq	5
         13:CDDD  C9 05      			cmp	#5
         13:CDDF  F0 01      			beq	!+
         13:CDE1  18         			clc
         13:CDE2             	!:
 5852                        		__bfalse	.LL170
         13:CDE2  B0 03 4C 68			bcc	.LL170
         13:CDE6  CE          
 5853                        	
 5854                        		.dbg	line,	"include\routines_LEVELS.c", 879; {
 5855                        	
 5856                        		.dbg	line,	"include\routines_LEVELS.c", 880; if(player_axis == AXIS_RIGHT)
 5857                        		__not.um	_player_axis
         13:CDE7  AD 17 23   			lda	_player_axis
         13:CDEA  18         			clc
         13:CDEB  D0 01      			bne	!+
         13:CDED  38         			sec
         13:CDEE             	!:
 5858                        		__bfalse	.LL171
         13:CDEE  B0 03 4C 7A			bcc	.LL171
         13:CDF2  D2          
 5859                        	
 5860                        		.dbg	line,	"include\routines_LEVELS.c", 881; {
 5861                        	
 5862                        		.dbg	line,	"include\routines_LEVELS.c", 882; player_axis = AXIS_LEFT;
 5863                        		__st.umiq	1, _player_axis
         13:CDF3  A9 01      			lda.l	#1
         13:CDF5  8D 17 23   			sta	_player_axis
 5864                        	
 5865                        		.dbg	line,	"include\routines_LEVELS.c", 883; player_previous_axis = player_axis;
 5866                        		__ld.um		_player_axis
         13:CDF8  AD 17 23   			lda	_player_axis
         13:CDFB  C2         			cly
 5867                        		__st.umq	_player_previous_axis
         13:CDFC  8D 18 23   			sta	_player_previous_axis
 5868                        	
 5869                        		.dbg	line,	"include\routines_LEVELS.c", 885; spr_set(player_id);
 5870                        		__ld.umq	_player_id
         13:CDFF  AD 15 23   			lda	_player_id
 5871                        		__call		_spr_set.1
         13:CE02  20 DD E7   			call	_spr_set.1
 5872                        	
 5873                        		.dbg	line,	"include\routines_LEVELS.c", 886; spr_ctrl(FLIP_MAS, FLIP_X);
 5874                        		__st.umiq	136, _al
         13:CE05  A9 88      			lda.l	#136
         13:CE07  85 F8      			sta	_al
 5875                        		__ld.uiq	8
         13:CE09  A9 08      			lda	#8
 5876                        		__call		_spr_ctrl.2
         13:CE0B  20 3C E8   			call	_spr_ctrl.2
 5877                        	
 5878                        		.dbg	line,	"include\routines_LEVELS.c", 888; spr_set(chain_id);
 5879                        		__ld.umq	_chain_id
         13:CE0E  AD 21 23   			lda	_chain_id
 5880                        		__call		_spr_set.1
         13:CE11  20 DD E7   			call	_spr_set.1
 5881                        	
 5882                        		.dbg	line,	"include\routines_LEVELS.c", 889; spr_ctrl(FLIP_MAS, FLIP_X);
 5883                        		__st.umiq	136, _al
         13:CE14  A9 88      			lda.l	#136
         13:CE16  85 F8      			sta	_al
 5884                        		__ld.uiq	8
         13:CE18  A9 08      			lda	#8
 5885                        		__call		_spr_ctrl.2
         13:CE1A  20 3C E8   			call	_spr_ctrl.2
 5886                        	
 5887                        		.dbg	line,	"include\routines_LEVELS.c", 891; spr_set(chain_id+1);
 5888                        		__ld.um		_chain_id
         13:CE1D  AD 21 23   			lda	_chain_id
         13:CE20  C2         			cly
 5889                        		__add.wi	1
         13:CE21  1A         			inc	a
         13:CE22  D0 01      			bne	!+
         13:CE24  C8         			iny
         13:CE25             	!:
 5890                        		__call		_spr_set.1
         13:CE25  20 DD E7   			call	_spr_set.1
 5891                        	
 5892                        		.dbg	line,	"include\routines_LEVELS.c", 892; spr_ctrl(FLIP_MAS, FLIP_X);
 5893                        		__st.umiq	136, _al
         13:CE28  A9 88      			lda.l	#136
         13:CE2A  85 F8      			sta	_al
 5894                        		__ld.uiq	8
         13:CE2C  A9 08      			lda	#8
 5895                        		__call		_spr_ctrl.2
         13:CE2E  20 3C E8   			call	_spr_ctrl.2
 5896                        	
 5897                        		.dbg	line,	"include\routines_LEVELS.c", 894; spr_set(chain_id+2);
 5898                        		__ld.um		_chain_id
         13:CE31  AD 21 23   			lda	_chain_id
         13:CE34  C2         			cly
 5899                        		__add.wi	2
         13:CE35  18         			clc
         13:CE36  69 02      			adc.l	#2
         13:CE38  90 01      			bcc	!+
         13:CE3A  C8         			iny
         13:CE3B             	!:
 5900                        		__call		_spr_set.1
         13:CE3B  20 DD E7   			call	_spr_set.1
 5901                        	
 5902                        		.dbg	line,	"include\routines_LEVELS.c", 895; spr_ctrl(FLIP_MAS, FLIP_X);
 5903                        		__st.umiq	136, _al
         13:CE3E  A9 88      			lda.l	#136
         13:CE40  85 F8      			sta	_al
 5904                        		__ld.uiq	8
         13:CE42  A9 08      			lda	#8
 5905                        		__call		_spr_ctrl.2
         13:CE44  20 3C E8   			call	_spr_ctrl.2
 5906                        	
 5907                        		.dbg	line,	"include\routines_LEVELS.c", 897; spr_set(weapon_id);
 5908                        		__ld.umq	_weapon_id
         13:CE47  AD 22 23   			lda	_weapon_id
 5909                        		__call		_spr_set.1
         13:CE4A  20 DD E7   			call	_spr_set.1
 5910                        	
 5911                        		.dbg	line,	"include\routines_LEVELS.c", 898; spr_ctrl(FLIP_MAS, FLIP_X);
 5912                        		__st.umiq	136, _al
         13:CE4D  A9 88      			lda.l	#136
         13:CE4F  85 F8      			sta	_al
 5913                        		__ld.uiq	8
         13:CE51  A9 08      			lda	#8
 5914                        		__call		_spr_ctrl.2
         13:CE53  20 3C E8   			call	_spr_ctrl.2
 5915                        	
 5916                        		.dbg	line,	"include\routines_LEVELS.c", 899; spr_x(player_pos_x+21);
 5917                        		__ld.wm		_player_pos_x
         13:CE56  AD D2 24   			lda.l	_player_pos_x
         13:CE59  AC D3 24   			ldy.h	_player_pos_x
 5918                        		__add.wi	21
         13:CE5C  18         			clc
         13:CE5D  69 15      			adc.l	#21
         13:CE5F  90 01      			bcc	!+
         13:CE61  C8         			iny
         13:CE62             	!:
 5919                        		__call		_spr_x.1
         13:CE62  20 0A E8   			call	_spr_x.1
 5920                        	
 5921                        		.dbg	line,	"include\routines_LEVELS.c", 900; }
 5922                        	
 5923                        		.dbg	line,	"include\routines_LEVELS.c", 901; }
 5924    13:CE65             	.LL171	.alias		.LL172
 5925                        	
 5926                        		.dbg	line,	"include\routines_LEVELS.c", 904; else if(player_state == STATE_CROUCH)
 5927                        		__bra		.LL172
         13:CE65  4C 7A D2   			bra	.LL172
 5928    13:CE68             	.LL170:
 5929                        		__ld.umq	_player_state
         13:CE68  AD 16 23   			lda	_player_state
 5930                        		__equ_b.uiq	7
         13:CE6B  C9 07      			cmp	#7
         13:CE6D  F0 01      			beq	!+
         13:CE6F  18         			clc
         13:CE70             	!:
 5931                        		__bfalse	.LL173
         13:CE70  B0 03 4C F6			bcc	.LL173
         13:CE74  CE          
 5932                        	
 5933                        		.dbg	line,	"include\routines_LEVELS.c", 905; {
 5934                        	
 5935                        		.dbg	line,	"include\routines_LEVELS.c", 906; if(player_axis == AXIS_RIGHT)
 5936                        		__not.um	_player_axis
         13:CE75  AD 17 23   			lda	_player_axis
         13:CE78  18         			clc
         13:CE79  D0 01      			bne	!+
         13:CE7B  38         			sec
         13:CE7C             	!:
 5937                        		__bfalse	.LL174
         13:CE7C  B0 03 4C 7A			bcc	.LL174
         13:CE80  D2          
 5938                        	
 5939                        		.dbg	line,	"include\routines_LEVELS.c", 907; {
 5940                        	
 5941                        		.dbg	line,	"include\routines_LEVELS.c", 908; player_axis = AXIS_LEFT;
 5942                        		__st.umiq	1, _player_axis
         13:CE81  A9 01      			lda.l	#1
         13:CE83  8D 17 23   			sta	_player_axis
 5943                        	
 5944                        		.dbg	line,	"include\routines_LEVELS.c", 909; player_previous_axis = player_axis;
 5945                        		__ld.um		_player_axis
         13:CE86  AD 17 23   			lda	_player_axis
         13:CE89  C2         			cly
 5946                        		__st.umq	_player_previous_axis
         13:CE8A  8D 18 23   			sta	_player_previous_axis
 5947                        	
 5948                        		.dbg	line,	"include\routines_LEVELS.c", 911; spr_set(player_id);
 5949                        		__ld.umq	_player_id
         13:CE8D  AD 15 23   			lda	_player_id
 5950                        		__call		_spr_set.1
         13:CE90  20 DD E7   			call	_spr_set.1
 5951                        	
 5952                        		.dbg	line,	"include\routines_LEVELS.c", 912; spr_ctrl(FLIP_MAS, FLIP_X);
 5953                        		__st.umiq	136, _al
         13:CE93  A9 88      			lda.l	#136
         13:CE95  85 F8      			sta	_al
 5954                        		__ld.uiq	8
         13:CE97  A9 08      			lda	#8
 5955                        		__call		_spr_ctrl.2
         13:CE99  20 3C E8   			call	_spr_ctrl.2
 5956                        	
 5957                        		.dbg	line,	"include\routines_LEVELS.c", 914; spr_set(chain_id);
 5958                        		__ld.umq	_chain_id
         13:CE9C  AD 21 23   			lda	_chain_id
 5959                        		__call		_spr_set.1
         13:CE9F  20 DD E7   			call	_spr_set.1
 5960                        	
 5961                        		.dbg	line,	"include\routines_LEVELS.c", 915; spr_ctrl(FLIP_MAS, FLIP_X);
 5962                        		__st.umiq	136, _al
         13:CEA2  A9 88      			lda.l	#136
         13:CEA4  85 F8      			sta	_al
 5963                        		__ld.uiq	8
         13:CEA6  A9 08      			lda	#8
 5964                        		__call		_spr_ctrl.2
         13:CEA8  20 3C E8   			call	_spr_ctrl.2
 5965                        	
 5966                        		.dbg	line,	"include\routines_LEVELS.c", 917; spr_set(chain_id+1);
 5967                        		__ld.um		_chain_id
         13:CEAB  AD 21 23   			lda	_chain_id
         13:CEAE  C2         			cly
 5968                        		__add.wi	1
         13:CEAF  1A         			inc	a
         13:CEB0  D0 01      			bne	!+
         13:CEB2  C8         			iny
         13:CEB3             	!:
 5969                        		__call		_spr_set.1
         13:CEB3  20 DD E7   			call	_spr_set.1
 5970                        	
 5971                        		.dbg	line,	"include\routines_LEVELS.c", 918; spr_ctrl(FLIP_MAS, FLIP_X);
 5972                        		__st.umiq	136, _al
         13:CEB6  A9 88      			lda.l	#136
         13:CEB8  85 F8      			sta	_al
 5973                        		__ld.uiq	8
         13:CEBA  A9 08      			lda	#8
 5974                        		__call		_spr_ctrl.2
         13:CEBC  20 3C E8   			call	_spr_ctrl.2
 5975                        	
 5976                        		.dbg	line,	"include\routines_LEVELS.c", 920; spr_set(chain_id+2);
 5977                        		__ld.um		_chain_id
         13:CEBF  AD 21 23   			lda	_chain_id
         13:CEC2  C2         			cly
 5978                        		__add.wi	2
         13:CEC3  18         			clc
         13:CEC4  69 02      			adc.l	#2
         13:CEC6  90 01      			bcc	!+
         13:CEC8  C8         			iny
         13:CEC9             	!:
 5979                        		__call		_spr_set.1
         13:CEC9  20 DD E7   			call	_spr_set.1
 5980                        	
 5981                        		.dbg	line,	"include\routines_LEVELS.c", 921; spr_ctrl(FLIP_MAS, FLIP_X);
 5982                        		__st.umiq	136, _al
         13:CECC  A9 88      			lda.l	#136
         13:CECE  85 F8      			sta	_al
 5983                        		__ld.uiq	8
         13:CED0  A9 08      			lda	#8
 5984                        		__call		_spr_ctrl.2
         13:CED2  20 3C E8   			call	_spr_ctrl.2
 5985                        	
 5986                        		.dbg	line,	"include\routines_LEVELS.c", 923; spr_set(weapon_id);
 5987                        		__ld.umq	_weapon_id
         13:CED5  AD 22 23   			lda	_weapon_id
 5988                        		__call		_spr_set.1
         13:CED8  20 DD E7   			call	_spr_set.1
 5989                        	
 5990                        		.dbg	line,	"include\routines_LEVELS.c", 924; spr_ctrl(FLIP_MAS, FLIP_X);
 5991                        		__st.umiq	136, _al
         13:CEDB  A9 88      			lda.l	#136
         13:CEDD  85 F8      			sta	_al
 5992                        		__ld.uiq	8
         13:CEDF  A9 08      			lda	#8
 5993                        		__call		_spr_ctrl.2
         13:CEE1  20 3C E8   			call	_spr_ctrl.2
 5994                        	
 5995                        		.dbg	line,	"include\routines_LEVELS.c", 925; spr_x(player_pos_x+17);
 5996                        		__ld.wm		_player_pos_x
         13:CEE4  AD D2 24   			lda.l	_player_pos_x
         13:CEE7  AC D3 24   			ldy.h	_player_pos_x
 5997                        		__add.wi	17
         13:CEEA  18         			clc
         13:CEEB  69 11      			adc.l	#17
         13:CEED  90 01      			bcc	!+
         13:CEEF  C8         			iny
         13:CEF0             	!:
 5998                        		__call		_spr_x.1
         13:CEF0  20 0A E8   			call	_spr_x.1
 5999                        	
 6000                        		.dbg	line,	"include\routines_LEVELS.c", 926; }
 6001                        	
 6002                        		.dbg	line,	"include\routines_LEVELS.c", 927; }
 6003    13:CEF3             	.LL174	.alias		.LL175
 6004                        	
 6005                        		.dbg	line,	"include\routines_LEVELS.c", 930; else if(player_state == STATE_FALL)
 6006                        		__bra		.LL175
         13:CEF3  4C 7A D2   			bra	.LL175
 6007    13:CEF6             	.LL173:
 6008                        		__ld.umq	_player_state
         13:CEF6  AD 16 23   			lda	_player_state
 6009                        		__equ_b.uiq	9
         13:CEF9  C9 09      			cmp	#9
         13:CEFB  F0 01      			beq	!+
         13:CEFD  18         			clc
         13:CEFE             	!:
 6010                        		__bfalse	.LL176
         13:CEFE  B0 03 4C 84			bcc	.LL176
         13:CF02  CF          
 6011                        	
 6012                        		.dbg	line,	"include\routines_LEVELS.c", 931; {
 6013                        	
 6014                        		.dbg	line,	"include\routines_LEVELS.c", 932; if(player_axis == AXIS_RIGHT)
 6015                        		__not.um	_player_axis
         13:CF03  AD 17 23   			lda	_player_axis
         13:CF06  18         			clc
         13:CF07  D0 01      			bne	!+
         13:CF09  38         			sec
         13:CF0A             	!:
 6016                        		__bfalse	.LL177
         13:CF0A  B0 03 4C 7A			bcc	.LL177
         13:CF0E  D2          
 6017                        	
 6018                        		.dbg	line,	"include\routines_LEVELS.c", 933; {
 6019                        	
 6020                        		.dbg	line,	"include\routines_LEVELS.c", 934; player_axis = AXIS_LEFT;
 6021                        		__st.umiq	1, _player_axis
         13:CF0F  A9 01      			lda.l	#1
         13:CF11  8D 17 23   			sta	_player_axis
 6022                        	
 6023                        		.dbg	line,	"include\routines_LEVELS.c", 935; player_previous_axis = player_axis;
 6024                        		__ld.um		_player_axis
         13:CF14  AD 17 23   			lda	_player_axis
         13:CF17  C2         			cly
 6025                        		__st.umq	_player_previous_axis
         13:CF18  8D 18 23   			sta	_player_previous_axis
 6026                        	
 6027                        		.dbg	line,	"include\routines_LEVELS.c", 937; spr_set(player_id);
 6028                        		__ld.umq	_player_id
         13:CF1B  AD 15 23   			lda	_player_id
 6029                        		__call		_spr_set.1
         13:CF1E  20 DD E7   			call	_spr_set.1
 6030                        	
 6031                        		.dbg	line,	"include\routines_LEVELS.c", 938; spr_ctrl(FLIP_MAS, FLIP_X);
 6032                        		__st.umiq	136, _al
         13:CF21  A9 88      			lda.l	#136
         13:CF23  85 F8      			sta	_al
 6033                        		__ld.uiq	8
         13:CF25  A9 08      			lda	#8
 6034                        		__call		_spr_ctrl.2
         13:CF27  20 3C E8   			call	_spr_ctrl.2
 6035                        	
 6036                        		.dbg	line,	"include\routines_LEVELS.c", 940; spr_set(chain_id);
 6037                        		__ld.umq	_chain_id
         13:CF2A  AD 21 23   			lda	_chain_id
 6038                        		__call		_spr_set.1
         13:CF2D  20 DD E7   			call	_spr_set.1
 6039                        	
 6040                        		.dbg	line,	"include\routines_LEVELS.c", 941; spr_ctrl(FLIP_MAS, FLIP_X);
 6041                        		__st.umiq	136, _al
         13:CF30  A9 88      			lda.l	#136
         13:CF32  85 F8      			sta	_al
 6042                        		__ld.uiq	8
         13:CF34  A9 08      			lda	#8
 6043                        		__call		_spr_ctrl.2
         13:CF36  20 3C E8   			call	_spr_ctrl.2
 6044                        	
 6045                        		.dbg	line,	"include\routines_LEVELS.c", 943; spr_set(chain_id+1);
 6046                        		__ld.um		_chain_id
         13:CF39  AD 21 23   			lda	_chain_id
         13:CF3C  C2         			cly
 6047                        		__add.wi	1
         13:CF3D  1A         			inc	a
         13:CF3E  D0 01      			bne	!+
         13:CF40  C8         			iny
         13:CF41             	!:
 6048                        		__call		_spr_set.1
         13:CF41  20 DD E7   			call	_spr_set.1
 6049                        	
 6050                        		.dbg	line,	"include\routines_LEVELS.c", 944; spr_ctrl(FLIP_MAS, FLIP_X);
 6051                        		__st.umiq	136, _al
         13:CF44  A9 88      			lda.l	#136
         13:CF46  85 F8      			sta	_al
 6052                        		__ld.uiq	8
         13:CF48  A9 08      			lda	#8
 6053                        		__call		_spr_ctrl.2
         13:CF4A  20 3C E8   			call	_spr_ctrl.2
 6054                        	
 6055                        		.dbg	line,	"include\routines_LEVELS.c", 946; spr_set(chain_id+2);
 6056                        		__ld.um		_chain_id
         13:CF4D  AD 21 23   			lda	_chain_id
         13:CF50  C2         			cly
 6057                        		__add.wi	2
         13:CF51  18         			clc
         13:CF52  69 02      			adc.l	#2
         13:CF54  90 01      			bcc	!+
         13:CF56  C8         			iny
         13:CF57             	!:
 6058                        		__call		_spr_set.1
         13:CF57  20 DD E7   			call	_spr_set.1
 6059                        	
 6060                        		.dbg	line,	"include\routines_LEVELS.c", 947; spr_ctrl(FLIP_MAS, FLIP_X);
 6061                        		__st.umiq	136, _al
         13:CF5A  A9 88      			lda.l	#136
         13:CF5C  85 F8      			sta	_al
 6062                        		__ld.uiq	8
         13:CF5E  A9 08      			lda	#8
 6063                        		__call		_spr_ctrl.2
         13:CF60  20 3C E8   			call	_spr_ctrl.2
 6064                        	
 6065                        		.dbg	line,	"include\routines_LEVELS.c", 949; spr_set(weapon_id);
 6066                        		__ld.umq	_weapon_id
         13:CF63  AD 22 23   			lda	_weapon_id
 6067                        		__call		_spr_set.1
         13:CF66  20 DD E7   			call	_spr_set.1
 6068                        	
 6069                        		.dbg	line,	"include\routines_LEVELS.c", 950; spr_ctrl(FLIP_MAS, FLIP_X);
 6070                        		__st.umiq	136, _al
         13:CF69  A9 88      			lda.l	#136
         13:CF6B  85 F8      			sta	_al
 6071                        		__ld.uiq	8
         13:CF6D  A9 08      			lda	#8
 6072                        		__call		_spr_ctrl.2
         13:CF6F  20 3C E8   			call	_spr_ctrl.2
 6073                        	
 6074                        		.dbg	line,	"include\routines_LEVELS.c", 951; spr_x(player_pos_x+20);
 6075                        		__ld.wm		_player_pos_x
         13:CF72  AD D2 24   			lda.l	_player_pos_x
         13:CF75  AC D3 24   			ldy.h	_player_pos_x
 6076                        		__add.wi	20
         13:CF78  18         			clc
         13:CF79  69 14      			adc.l	#20
         13:CF7B  90 01      			bcc	!+
         13:CF7D  C8         			iny
         13:CF7E             	!:
 6077                        		__call		_spr_x.1
         13:CF7E  20 0A E8   			call	_spr_x.1
 6078                        	
 6079                        		.dbg	line,	"include\routines_LEVELS.c", 952; }
 6080                        	
 6081                        		.dbg	line,	"include\routines_LEVELS.c", 953; }
 6082    13:CF81             	.LL177	.alias		.LL178
 6083                        	
 6084                        		.dbg	line,	"include\routines_LEVELS.c", 955; 
 6085                        	
 6086                        		.dbg	line,	"include\routines_LEVELS.c", 956; else if(player_state == STATE_HANG)
 6087                        		__bra		.LL178
         13:CF81  4C 7A D2   			bra	.LL178
 6088    13:CF84             	.LL176:
 6089                        		__ld.umq	_player_state
         13:CF84  AD 16 23   			lda	_player_state
 6090                        		__equ_b.uiq	10
         13:CF87  C9 0A      			cmp	#10
         13:CF89  F0 01      			beq	!+
         13:CF8B  18         			clc
         13:CF8C             	!:
 6091                        		__bfalse	.LL179
         13:CF8C  B0 03 4C 12			bcc	.LL179
         13:CF90  D0          
 6092                        	
 6093                        		.dbg	line,	"include\routines_LEVELS.c", 957; {
 6094                        	
 6095                        		.dbg	line,	"include\routines_LEVELS.c", 958; if(player_axis == AXIS_RIGHT)
 6096                        		__not.um	_player_axis
         13:CF91  AD 17 23   			lda	_player_axis
         13:CF94  18         			clc
         13:CF95  D0 01      			bne	!+
         13:CF97  38         			sec
         13:CF98             	!:
 6097                        		__bfalse	.LL180
         13:CF98  B0 03 4C 7A			bcc	.LL180
         13:CF9C  D2          
 6098                        	
 6099                        		.dbg	line,	"include\routines_LEVELS.c", 959; {
 6100                        	
 6101                        		.dbg	line,	"include\routines_LEVELS.c", 960; player_axis = AXIS_LEFT;
 6102                        		__st.umiq	1, _player_axis
         13:CF9D  A9 01      			lda.l	#1
         13:CF9F  8D 17 23   			sta	_player_axis
 6103                        	
 6104                        		.dbg	line,	"include\routines_LEVELS.c", 961; player_previous_axis = player_axis;
 6105                        		__ld.um		_player_axis
         13:CFA2  AD 17 23   			lda	_player_axis
         13:CFA5  C2         			cly
 6106                        		__st.umq	_player_previous_axis
         13:CFA6  8D 18 23   			sta	_player_previous_axis
 6107                        	
 6108                        		.dbg	line,	"include\routines_LEVELS.c", 963; spr_set(player_id);
 6109                        		__ld.umq	_player_id
         13:CFA9  AD 15 23   			lda	_player_id
 6110                        		__call		_spr_set.1
         13:CFAC  20 DD E7   			call	_spr_set.1
 6111                        	
 6112                        		.dbg	line,	"include\routines_LEVELS.c", 964; spr_ctrl(FLIP_MAS, FLIP_X);
 6113                        		__st.umiq	136, _al
         13:CFAF  A9 88      			lda.l	#136
         13:CFB1  85 F8      			sta	_al
 6114                        		__ld.uiq	8
         13:CFB3  A9 08      			lda	#8
 6115                        		__call		_spr_ctrl.2
         13:CFB5  20 3C E8   			call	_spr_ctrl.2
 6116                        	
 6117                        		.dbg	line,	"include\routines_LEVELS.c", 966; spr_set(chain_id);
 6118                        		__ld.umq	_chain_id
         13:CFB8  AD 21 23   			lda	_chain_id
 6119                        		__call		_spr_set.1
         13:CFBB  20 DD E7   			call	_spr_set.1
 6120                        	
 6121                        		.dbg	line,	"include\routines_LEVELS.c", 967; spr_ctrl(FLIP_MAS, FLIP_X);
 6122                        		__st.umiq	136, _al
         13:CFBE  A9 88      			lda.l	#136
         13:CFC0  85 F8      			sta	_al
 6123                        		__ld.uiq	8
         13:CFC2  A9 08      			lda	#8
 6124                        		__call		_spr_ctrl.2
         13:CFC4  20 3C E8   			call	_spr_ctrl.2
 6125                        	
 6126                        		.dbg	line,	"include\routines_LEVELS.c", 969; spr_set(chain_id+1);
 6127                        		__ld.um		_chain_id
         13:CFC7  AD 21 23   			lda	_chain_id
         13:CFCA  C2         			cly
 6128                        		__add.wi	1
         13:CFCB  1A         			inc	a
         13:CFCC  D0 01      			bne	!+
         13:CFCE  C8         			iny
         13:CFCF             	!:
 6129                        		__call		_spr_set.1
         13:CFCF  20 DD E7   			call	_spr_set.1
 6130                        	
 6131                        		.dbg	line,	"include\routines_LEVELS.c", 970; spr_ctrl(FLIP_MAS, FLIP_X);
 6132                        		__st.umiq	136, _al
         13:CFD2  A9 88      			lda.l	#136
         13:CFD4  85 F8      			sta	_al
 6133                        		__ld.uiq	8
         13:CFD6  A9 08      			lda	#8
 6134                        		__call		_spr_ctrl.2
         13:CFD8  20 3C E8   			call	_spr_ctrl.2
 6135                        	
 6136                        		.dbg	line,	"include\routines_LEVELS.c", 972; spr_set(chain_id+2);
 6137                        		__ld.um		_chain_id
         13:CFDB  AD 21 23   			lda	_chain_id
         13:CFDE  C2         			cly
 6138                        		__add.wi	2
         13:CFDF  18         			clc
         13:CFE0  69 02      			adc.l	#2
         13:CFE2  90 01      			bcc	!+
         13:CFE4  C8         			iny
         13:CFE5             	!:
 6139                        		__call		_spr_set.1
         13:CFE5  20 DD E7   			call	_spr_set.1
 6140                        	
 6141                        		.dbg	line,	"include\routines_LEVELS.c", 973; spr_ctrl(FLIP_MAS, FLIP_X);
 6142                        		__st.umiq	136, _al
         13:CFE8  A9 88      			lda.l	#136
         13:CFEA  85 F8      			sta	_al
 6143                        		__ld.uiq	8
         13:CFEC  A9 08      			lda	#8
 6144                        		__call		_spr_ctrl.2
         13:CFEE  20 3C E8   			call	_spr_ctrl.2
 6145                        	
 6146                        		.dbg	line,	"include\routines_LEVELS.c", 975; spr_set(weapon_id);
 6147                        		__ld.umq	_weapon_id
         13:CFF1  AD 22 23   			lda	_weapon_id
 6148                        		__call		_spr_set.1
         13:CFF4  20 DD E7   			call	_spr_set.1
 6149                        	
 6150                        		.dbg	line,	"include\routines_LEVELS.c", 976; spr_ctrl(FLIP_MAS, FLIP_X);
 6151                        		__st.umiq	136, _al
         13:CFF7  A9 88      			lda.l	#136
         13:CFF9  85 F8      			sta	_al
 6152                        		__ld.uiq	8
         13:CFFB  A9 08      			lda	#8
 6153                        		__call		_spr_ctrl.2
         13:CFFD  20 3C E8   			call	_spr_ctrl.2
 6154                        	
 6155                        		.dbg	line,	"include\routines_LEVELS.c", 977; spr_x(player_pos_x-2);
 6156                        		__ld.wm		_player_pos_x
         13:D000  AD D2 24   			lda.l	_player_pos_x
         13:D003  AC D3 24   			ldy.h	_player_pos_x
 6157                        		__sub.wi	2
         13:D006  38         			sec
         13:D007  E9 02      			sbc.l	#2
         13:D009  B0 01      			bcs	!+
         13:D00B  88         			dey
         13:D00C             	!:
 6158                        		__call		_spr_x.1
         13:D00C  20 0A E8   			call	_spr_x.1
 6159                        	
 6160                        		.dbg	line,	"include\routines_LEVELS.c", 978; }
 6161                        	
 6162                        		.dbg	line,	"include\routines_LEVELS.c", 979; }
 6163    13:D00F             	.LL180	.alias		.LL181
 6164                        	
 6165                        		.dbg	line,	"include\routines_LEVELS.c", 982; else if(player_state == STATE_CLIMB_UP || player_state == STATE_CLIMB_DOWN)
 6166                        		__bra		.LL181
         13:D00F  4C 7A D2   			bra	.LL181
 6167    13:D012             	.LL179:
 6168                        		__ld.umq	_player_state
         13:D012  AD 16 23   			lda	_player_state
 6169                        		__equ_b.uiq	11
         13:D015  C9 0B      			cmp	#11
         13:D017  F0 01      			beq	!+
         13:D019  18         			clc
         13:D01A             	!:
 6170                        		__btrue		.LL183
         13:D01A  B0 08      			bcs	.LL183
 6171                        		__ld.umq	_player_state
         13:D01C  AD 16 23   			lda	_player_state
 6172                        		__equ_b.uiq	12
         13:D01F  C9 0C      			cmp	#12
         13:D021  F0 01      			beq	!+
         13:D023  18         			clc
         13:D024             	!:
 6173    13:D024             	.LL183:
 6174                        		__bfalse	.LL182
         13:D024  B0 03 4C 7A			bcc	.LL182
         13:D028  D2          
 6175                        	
 6176                        		.dbg	line,	"include\routines_LEVELS.c", 983; {
 6177                        	
 6178                        		.dbg	line,	"include\routines_LEVELS.c", 984; spr_set(player_id);
 6179                        		__ld.umq	_player_id
         13:D029  AD 15 23   			lda	_player_id
 6180                        		__call		_spr_set.1
         13:D02C  20 DD E7   			call	_spr_set.1
 6181                        	
 6182                        		.dbg	line,	"include\routines_LEVELS.c", 985; spr_pattern(PLAYER_HANG_VRAM_ADR);
 6183                        		__ld.wi		7936
         13:D02F  62         			cla
         13:D030  A0 1F      			ldy.h	#7936
 6184                        		__call		_spr_pattern.1
         13:D032  20 26 E8   			call	_spr_pattern.1
 6185                        	
 6186                        		.dbg	line,	"include\routines_LEVELS.c", 986; player_counter_anim = 0;
 6187                        		__st.umiq	0, _player_counter_anim
         13:D035  9C 19 23   			stz	_player_counter_anim
 6188                        	
 6189                        		.dbg	line,	"include\routines_LEVELS.c", 987; player_state = STATE_HANG;
 6190                        		__st.umiq	10, _player_state
         13:D038  A9 0A      			lda.l	#10
         13:D03A  8D 16 23   			sta	_player_state
 6191                        	
 6192                        		.dbg	line,	"include\routines_LEVELS.c", 988; }
 6193                        	
 6194                        		.dbg	line,	"include\routines_LEVELS.c", 989; }
 6195    13:D03D             	.LL182	.alias		.LL184
 6196    13:D03D             	.LL181	.alias		.LL184
 6197    13:D03D             	.LL178	.alias		.LL184
 6198    13:D03D             	.LL175	.alias		.LL184
 6199    13:D03D             	.LL172	.alias		.LL184
 6200    13:D03D             	.LL169	.alias		.LL184
 6201    13:D03D             	.LL164	.alias		.LL184
 6202                        	
 6203                        		.dbg	line,	"include\routines_LEVELS.c", 992; //--------------------------------------------------------------------------------------//
 6204                        	
 6205                        		.dbg	line,	"include\routines_LEVELS.c", 993; //                                      UP BUTTON                                       //
 6206                        	
 6207                        		.dbg	line,	"include\routines_LEVELS.c", 994; //--------------------------------------------------------------------------------------//
 6208                        	
 6209                        		.dbg	line,	"include\routines_LEVELS.c", 996; else if(joy(JOYPAD_1) & JOY_UP)
 6210                        		__bra		.LL184
         13:D03D  4C 7A D2   			bra	.LL184
 6211    13:D040             	.LL159:
 6212                        		__ld.uiq	0
         13:D040  62         			cla
 6213                        		 _joy.1
         13:D041  AA         			tax
         13:D042  BD 28 22   			lda	joynow, x
         13:D045  BC D3 22   			ldy	joy6now, x
 6214                        		__tand.wi	16
         13:D048  29 10      			and	#16
         13:D04A  C9 01      	!:		cmp	#1
 6215                        		__bfalse	.LL185
         13:D04C  B0 03 4C 1E			bcc	.LL185
         13:D050  D1          
 6216                        	
 6217                        		.dbg	line,	"include\routines_LEVELS.c", 997; {
 6218                        	
 6219                        		.dbg	line,	"include\routines_LEVELS.c", 998; if(player_state == STATE_HANG || player_state == STATE_CLIMB_UP || player_state == STATE_CLIMB_DOWN)
 6220                        		__ld.umq	_player_state
         13:D051  AD 16 23   			lda	_player_state
 6221                        		__equ_b.uiq	10
         13:D054  C9 0A      			cmp	#10
         13:D056  F0 01      			beq	!+
         13:D058  18         			clc
         13:D059             	!:
 6222                        		__btrue		.LL187
         13:D059  B0 08      			bcs	.LL187
 6223                        		__ld.umq	_player_state
         13:D05B  AD 16 23   			lda	_player_state
 6224                        		__equ_b.uiq	11
         13:D05E  C9 0B      			cmp	#11
         13:D060  F0 01      			beq	!+
         13:D062  18         			clc
         13:D063             	!:
 6225    13:D063             	.LL187:
 6226                        		__btrue		.LL188
         13:D063  B0 08      			bcs	.LL188
 6227                        		__ld.umq	_player_state
         13:D065  AD 16 23   			lda	_player_state
 6228                        		__equ_b.uiq	12
         13:D068  C9 0C      			cmp	#12
         13:D06A  F0 01      			beq	!+
         13:D06C  18         			clc
         13:D06D             	!:
 6229    13:D06D             	.LL188:
 6230                        		__bfalse	.LL186
         13:D06D  B0 03 4C 7A			bcc	.LL186
         13:D071  D2          
 6231                        	
 6232                        		.dbg	line,	"include\routines_LEVELS.c", 999; {
 6233                        	
 6234                        		.dbg	line,	"include\routines_LEVELS.c", 1000; unsigned char i;
 6235                        	
 6236                        		.dbg	line,	"include\routines_LEVELS.c", 1002; check_BG( 15 , 8 );
 6237                        		__ld.wi		15
         13:D072  A9 0F      			lda.l	#15
         13:D074  C2         			cly
 6238                        		__pusharg.wr
         13:D075  A6 8D      			ldx	<__sp
         13:D077  CA         			dex
         13:D078  CA         			dex
         13:D079  95 08      			sta.l	<__stack, x
         13:D07B  94 09      			sty.h	<__stack, x
         13:D07D  86 8D      			stx	<__sp
 6239                        		__ld.wi		8
         13:D07F  A9 08      			lda.l	#8
         13:D081  C2         			cly
 6240                        		__pusharg.wr
         13:D082  A6 8D      			ldx	<__sp
         13:D084  CA         			dex
         13:D085  CA         			dex
         13:D086  95 08      			sta.l	<__stack, x
         13:D088  94 09      			sty.h	<__stack, x
         13:D08A  86 8D      			stx	<__sp
 6241                        		__call		_check_BG
         13:D08C  20 6D FF   			call	_check_BG
 6242                        	
 6243                        		.dbg	line,	"include\routines_LEVELS.c", 1004; if(map_blk_flag == TILE_EMPTY)
 6244                        		__not.um	_map_blk_flag
         13:D08F  AD AF 2B   			lda	_map_blk_flag
         13:D092  18         			clc
         13:D093  D0 01      			bne	!+
         13:D095  38         			sec
         13:D096             	!:
 6245                        		__bfalse	.LL189
         13:D096  90 67      			bcc	.LL189
 6246                        	
 6247                        		.dbg	line,	"include\routines_LEVELS.c", 1005; {
 6248                        	
 6249                        		.dbg	line,	"include\routines_LEVELS.c", 1006; for(i=1 ; i<3 ; i++)
 6250                        		__st.umiq	1, __joypad_DIR_end - 1  /* i */
         13:D098  A9 01      			lda.l	#1
         13:D09A  8D 04 23   			sta	__joypad_DIR_end - 1
 6251    13:D09D             	.LL190:
 6252                        		__ld.umq	__joypad_DIR_end - 1  /* i */
         13:D09D  AD 04 23   			lda	__joypad_DIR_end - 1
 6253                        		__ult_b.uiq	3
         13:D0A0  C9 03      			cmp	#3		; Subtract integer from A.
         13:D0A2  6A         			ror	a		; CC if A < integer.
         13:D0A3  49 80      			eor	#$80
         13:D0A5  2A         			rol	a
 6254                        		__btrue		.LL192
         13:D0A6  B0 07      			bcs	.LL192
 6255                        		__bra		.LL193
         13:D0A8  80 63      			bra	.LL193
 6256    13:D0AA             	.LL191:
 6257                        		__inc.umq	__joypad_DIR_end - 1  /* i */
         13:D0AA  EE 04 23   			inc	__joypad_DIR_end - 1
 6258                        		__bra		.LL190
         13:D0AD  80 EE      			bra	.LL190
 6259    13:D0AF             	.LL192:
 6260                        	
 6261                        		.dbg	line,	"include\routines_LEVELS.c", 1007; {
 6262                        	
 6263                        		.dbg	line,	"include\routines_LEVELS.c", 1008; check_BG( 15 , 8 + i );
 6264                        		__ld.wi		15
         13:D0AF  A9 0F      			lda.l	#15
         13:D0B1  C2         			cly
 6265                        		__pusharg.wr
         13:D0B2  A6 8D      			ldx	<__sp
         13:D0B4  CA         			dex
         13:D0B5  CA         			dex
         13:D0B6  95 08      			sta.l	<__stack, x
         13:D0B8  94 09      			sty.h	<__stack, x
         13:D0BA  86 8D      			stx	<__sp
 6266                        		__ld.wi		8
         13:D0BC  A9 08      			lda.l	#8
         13:D0BE  C2         			cly
 6267                        		__add.um	__joypad_DIR_end - 1  /* i */
         13:D0BF  18         			clc
         13:D0C0  6D 04 23   			adc	__joypad_DIR_end - 1
         13:D0C3  90 01      			bcc	!+
         13:D0C5  C8         			iny
         13:D0C6             	!:
 6268                        		__pusharg.wr
         13:D0C6  A6 8D      			ldx	<__sp
         13:D0C8  CA         			dex
         13:D0C9  CA         			dex
         13:D0CA  95 08      			sta.l	<__stack, x
         13:D0CC  94 09      			sty.h	<__stack, x
         13:D0CE  86 8D      			stx	<__sp
 6269                        		__call		_check_BG
         13:D0D0  20 6D FF   			call	_check_BG
 6270                        	
 6271                        		.dbg	line,	"include\routines_LEVELS.c", 1010; if(map_blk_flag == TILE_LADDER)
 6272                        		__ld.umq	_map_blk_flag
         13:D0D3  AD AF 2B   			lda	_map_blk_flag
 6273                        		__equ_b.uiq	2
         13:D0D6  C9 02      			cmp	#2
         13:D0D8  F0 01      			beq	!+
         13:D0DA  18         			clc
         13:D0DB             	!:
 6274                        		__bfalse	.LL194
         13:D0DB  90 CD      			bcc	.LL194
 6275                        	
 6276                        		.dbg	line,	"include\routines_LEVELS.c", 1011; {
 6277                        	
 6278                        		.dbg	line,	"include\routines_LEVELS.c", 1012; sgx_map_pxl_y -= (2 - i);
 6279                        		__ld.wi		2
         13:D0DD  A9 02      			lda.l	#2
         13:D0DF  C2         			cly
 6280                        		__sub.um	__joypad_DIR_end - 1  /* i */
         13:D0E0  38         			sec
         13:D0E1  ED 04 23   			sbc	__joypad_DIR_end - 1
         13:D0E4  B0 01      			bcs	!+
         13:D0E6  88         			dey
         13:D0E7             	!:
 6281                        		__isub_st.wmq	_sgx_map_pxl_y
         13:D0E7  38         			sec
         13:D0E8  49 FF      			eor	#$FF
         13:D0EA  6D 90 26   			adc.l	_sgx_map_pxl_y
         13:D0ED  8D 90 26   			sta.l	_sgx_map_pxl_y
         13:D0F0  98         			tya
         13:D0F1  49 FF      			eor	#$FF
         13:D0F3  6D 91 26   			adc.h	_sgx_map_pxl_y
         13:D0F6  8D 91 26   			sta.h	_sgx_map_pxl_y
 6282                        	
 6283                        		.dbg	line,	"include\routines_LEVELS.c", 1013; break;
 6284                        		__bra		.LL193
         13:D0F9  80 12      			bra	.LL193
 6285                        	
 6286                        		.dbg	line,	"include\routines_LEVELS.c", 1014; }
 6287                        	
 6288                        		.dbg	line,	"include\routines_LEVELS.c", 1015; }
 6289    13:D0FB             	.LL194	.alias		.LL191
 6290                        		__bra		.LL191
         13:D0FB  80 AD      			bra	.LL191
 6291    13:D0FD             	.LL193	.alias		.LL195
 6292                        	
 6293                        		.dbg	line,	"include\routines_LEVELS.c", 1016; }
 6294                        	
 6295                        		.dbg	line,	"include\routines_LEVELS.c", 1018; else
 6296                        		__bra		.LL195
         13:D0FD  80 0E      			bra	.LL195
 6297    13:D0FF             	.LL189:
 6298                        	
 6299                        		.dbg	line,	"include\routines_LEVELS.c", 1019; {
 6300                        	
 6301                        		.dbg	line,	"include\routines_LEVELS.c", 1020; sgx_map_pxl_y -= 2;
 6302                        		__sub_st.wmiq	2, _sgx_map_pxl_y
         13:D0FF  38         			sec
         13:D100  AD 90 26   			lda.l	_sgx_map_pxl_y
         13:D103  E9 02      			sbc.l	#2
         13:D105  8D 90 26   			sta.l	_sgx_map_pxl_y
         13:D108  B0 03      			bcs	!+
         13:D10A  CE 91 26   			dec.h	_sgx_map_pxl_y
         13:D10D             	!:
 6303                        	
 6304                        		.dbg	line,	"include\routines_LEVELS.c", 1021; }
 6305    13:D10D             	.LL195:
 6306                        	
 6307                        		.dbg	line,	"include\routines_LEVELS.c", 1023; spr_set(weapon_id);
 6308                        		__ld.umq	_weapon_id
         13:D10D  AD 22 23   			lda	_weapon_id
 6309                        		__call		_spr_set.1
         13:D110  20 DD E7   			call	_spr_set.1
 6310                        	
 6311                        		.dbg	line,	"include\routines_LEVELS.c", 1024; spr_hide();
 6312                        		__call		_spr_hide
         13:D113  20 F8 E7   			call	_spr_hide
 6313                        	
 6314                        		.dbg	line,	"include\routines_LEVELS.c", 1026; player_state = STATE_CLIMB_UP;
 6315                        		__st.umiq	11, _player_state
         13:D116  A9 0B      			lda.l	#11
         13:D118  8D 16 23   			sta	_player_state
 6316                        	
 6317                        		.dbg	line,	"include\routines_LEVELS.c", 1027; }
 6318                        	
 6319                        		.dbg	line,	"include\routines_LEVELS.c", 1028; }
 6320    13:D11B             	.LL186	.alias		.LL196
 6321                        	
 6322                        		.dbg	line,	"include\routines_LEVELS.c", 1031; //--------------------------------------------------------------------------------------//
 6323                        	
 6324                        		.dbg	line,	"include\routines_LEVELS.c", 1032; //                                     DOWN BUTTON                                      //
 6325                        	
 6326                        		.dbg	line,	"include\routines_LEVELS.c", 1033; //--------------------------------------------------------------------------------------//
 6327                        	
 6328                        		.dbg	line,	"include\routines_LEVELS.c", 1035; else if(joy(JOYPAD_1) & JOY_DOWN)
 6329                        		__bra		.LL196
         13:D11B  4C 7A D2   			bra	.LL196
 6330    13:D11E             	.LL185:
 6331                        		__ld.uiq	0
         13:D11E  62         			cla
 6332                        		 _joy.1
         13:D11F  AA         			tax
         13:D120  BD 28 22   			lda	joynow, x
         13:D123  BC D3 22   			ldy	joy6now, x
 6333                        		__tand.wi	64
         13:D126  29 40      			and	#64
         13:D128  C9 01      	!:		cmp	#1
 6334                        		__bfalse	.LL197
         13:D12A  B0 03 4C 7A			bcc	.LL197
         13:D12E  D2          
 6335                        	
 6336                        		.dbg	line,	"include\routines_LEVELS.c", 1036; {
 6337                        	
 6338                        		.dbg	line,	"include\routines_LEVELS.c", 1037; if(player_state == STATE_IDLE || player_state == STATE_WALK)
 6339                        		__not.um	_player_state
         13:D12F  AD 16 23   			lda	_player_state
         13:D132  18         			clc
         13:D133  D0 01      			bne	!+
         13:D135  38         			sec
         13:D136             	!:
 6340                        		__btrue		.LL199
         13:D136  B0 08      			bcs	.LL199
 6341                        		__ld.umq	_player_state
         13:D138  AD 16 23   			lda	_player_state
 6342                        		__equ_b.uiq	1
         13:D13B  C9 01      			cmp	#1
         13:D13D  F0 01      			beq	!+
         13:D13F  18         			clc
         13:D140             	!:
 6343    13:D140             	.LL199:
 6344                        		__bfalse	.LL198
         13:D140  90 0D      			bcc	.LL198
 6345                        	
 6346                        		.dbg	line,	"include\routines_LEVELS.c", 1038; {
 6347                        	
 6348                        		.dbg	line,	"include\routines_LEVELS.c", 1039; player_counter_anim = 1;
 6349                        		__st.umiq	1, _player_counter_anim
         13:D142  A9 01      			lda.l	#1
         13:D144  8D 19 23   			sta	_player_counter_anim
 6350                        	
 6351                        		.dbg	line,	"include\routines_LEVELS.c", 1040; player_state = STATE_CROUCH;
 6352                        		__st.umiq	7, _player_state
         13:D147  A9 07      			lda.l	#7
         13:D149  8D 16 23   			sta	_player_state
 6353                        	
 6354                        		.dbg	line,	"include\routines_LEVELS.c", 1041; }
 6355                        	
 6356                        		.dbg	line,	"include\routines_LEVELS.c", 1044; else if(player_state == STATE_HANG || player_state == STATE_CLIMB_UP || player_state == STATE_CLIMB_DOWN)
 6357                        		__bra		.LL200
         13:D14C  4C 7A D2   			bra	.LL200
 6358    13:D14F             	.LL198:
 6359                        		__ld.umq	_player_state
         13:D14F  AD 16 23   			lda	_player_state
 6360                        		__equ_b.uiq	10
         13:D152  C9 0A      			cmp	#10
         13:D154  F0 01      			beq	!+
         13:D156  18         			clc
         13:D157             	!:
 6361                        		__btrue		.LL202
         13:D157  B0 08      			bcs	.LL202
 6362                        		__ld.umq	_player_state
         13:D159  AD 16 23   			lda	_player_state
 6363                        		__equ_b.uiq	11
         13:D15C  C9 0B      			cmp	#11
         13:D15E  F0 01      			beq	!+
         13:D160  18         			clc
         13:D161             	!:
 6364    13:D161             	.LL202:
 6365                        		__btrue		.LL203
         13:D161  B0 08      			bcs	.LL203
 6366                        		__ld.umq	_player_state
         13:D163  AD 16 23   			lda	_player_state
 6367                        		__equ_b.uiq	12
         13:D166  C9 0C      			cmp	#12
         13:D168  F0 01      			beq	!+
         13:D16A  18         			clc
         13:D16B             	!:
 6368    13:D16B             	.LL203:
 6369                        		__bfalse	.LL201
         13:D16B  B0 03 4C 7A			bcc	.LL201
         13:D16F  D2          
 6370                        	
 6371                        		.dbg	line,	"include\routines_LEVELS.c", 1045; {
 6372                        	
 6373                        		.dbg	line,	"include\routines_LEVELS.c", 1046; unsigned char i;
 6374                        	
 6375                        		.dbg	line,	"include\routines_LEVELS.c", 1048; check_BG( 15 , 10 );
 6376                        		__ld.wi		15
         13:D170  A9 0F      			lda.l	#15
         13:D172  C2         			cly
 6377                        		__pusharg.wr
         13:D173  A6 8D      			ldx	<__sp
         13:D175  CA         			dex
         13:D176  CA         			dex
         13:D177  95 08      			sta.l	<__stack, x
         13:D179  94 09      			sty.h	<__stack, x
         13:D17B  86 8D      			stx	<__sp
 6378                        		__ld.wi		10
         13:D17D  A9 0A      			lda.l	#10
         13:D17F  C2         			cly
 6379                        		__pusharg.wr
         13:D180  A6 8D      			ldx	<__sp
         13:D182  CA         			dex
         13:D183  CA         			dex
         13:D184  95 08      			sta.l	<__stack, x
         13:D186  94 09      			sty.h	<__stack, x
         13:D188  86 8D      			stx	<__sp
 6380                        		__call		_check_BG
         13:D18A  20 6D FF   			call	_check_BG
 6381                        	
 6382                        		.dbg	line,	"include\routines_LEVELS.c", 1050; if(map_blk_flag == TILE_EMPTY)
 6383                        		__not.um	_map_blk_flag
         13:D18D  AD AF 2B   			lda	_map_blk_flag
         13:D190  18         			clc
         13:D191  D0 01      			bne	!+
         13:D193  38         			sec
         13:D194             	!:
 6384                        		__bfalse	.LL204
         13:D194  B0 03 4C 5E			bcc	.LL204
         13:D198  D2          
 6385                        	
 6386                        		.dbg	line,	"include\routines_LEVELS.c", 1051; {
 6387                        	
 6388                        		.dbg	line,	"include\routines_LEVELS.c", 1052; for(i=1 ; i<3 ; i++)
 6389                        		__st.umiq	1, __joypad_DIR_end - 2  /* i */
         13:D199  A9 01      			lda.l	#1
         13:D19B  8D 03 23   			sta	__joypad_DIR_end - 2
 6390    13:D19E             	.LL205:
 6391                        		__ld.umq	__joypad_DIR_end - 2  /* i */
         13:D19E  AD 03 23   			lda	__joypad_DIR_end - 2
 6392                        		__ult_b.uiq	3
         13:D1A1  C9 03      			cmp	#3		; Subtract integer from A.
         13:D1A3  6A         			ror	a		; CC if A < integer.
         13:D1A4  49 80      			eor	#$80
         13:D1A6  2A         			rol	a
 6393                        		__btrue		.LL207
         13:D1A7  B0 08      			bcs	.LL207
 6394                        		__bra		.LL208
         13:D1A9  4C 7A D2   			bra	.LL208
 6395    13:D1AC             	.LL206:
 6396                        		__inc.umq	__joypad_DIR_end - 2  /* i */
         13:D1AC  EE 03 23   			inc	__joypad_DIR_end - 2
 6397                        		__bra		.LL205
         13:D1AF  80 ED      			bra	.LL205
 6398    13:D1B1             	.LL207:
 6399                        	
 6400                        		.dbg	line,	"include\routines_LEVELS.c", 1053; {
 6401                        	
 6402                        		.dbg	line,	"include\routines_LEVELS.c", 1054; check_BG( 15 , 22 + i );
 6403                        		__ld.wi		15
         13:D1B1  A9 0F      			lda.l	#15
         13:D1B3  C2         			cly
 6404                        		__pusharg.wr
         13:D1B4  A6 8D      			ldx	<__sp
         13:D1B6  CA         			dex
         13:D1B7  CA         			dex
         13:D1B8  95 08      			sta.l	<__stack, x
         13:D1BA  94 09      			sty.h	<__stack, x
         13:D1BC  86 8D      			stx	<__sp
 6405                        		__ld.wi		22
         13:D1BE  A9 16      			lda.l	#22
         13:D1C0  C2         			cly
 6406                        		__add.um	__joypad_DIR_end - 2  /* i */
         13:D1C1  18         			clc
         13:D1C2  6D 03 23   			adc	__joypad_DIR_end - 2
         13:D1C5  90 01      			bcc	!+
         13:D1C7  C8         			iny
         13:D1C8             	!:
 6407                        		__pusharg.wr
         13:D1C8  A6 8D      			ldx	<__sp
         13:D1CA  CA         			dex
         13:D1CB  CA         			dex
         13:D1CC  95 08      			sta.l	<__stack, x
         13:D1CE  94 09      			sty.h	<__stack, x
         13:D1D0  86 8D      			stx	<__sp
 6408                        		__call		_check_BG
         13:D1D2  20 6D FF   			call	_check_BG
 6409                        	
 6410                        		.dbg	line,	"include\routines_LEVELS.c", 1056; if(map_blk_flag == TILE_LADDER)
 6411                        		__ld.umq	_map_blk_flag
         13:D1D5  AD AF 2B   			lda	_map_blk_flag
 6412                        		__equ_b.uiq	2
         13:D1D8  C9 02      			cmp	#2
         13:D1DA  F0 01      			beq	!+
         13:D1DC  18         			clc
         13:D1DD             	!:
 6413                        		__bfalse	.LL209
         13:D1DD  90 1B      			bcc	.LL209
 6414                        	
 6415                        		.dbg	line,	"include\routines_LEVELS.c", 1057; {
 6416                        	
 6417                        		.dbg	line,	"include\routines_LEVELS.c", 1058; sgx_map_pxl_y += (2 - i);
 6418                        		__ld.wi		2
         13:D1DF  A9 02      			lda.l	#2
         13:D1E1  C2         			cly
 6419                        		__sub.um	__joypad_DIR_end - 2  /* i */
         13:D1E2  38         			sec
         13:D1E3  ED 03 23   			sbc	__joypad_DIR_end - 2
         13:D1E6  B0 01      			bcs	!+
         13:D1E8  88         			dey
         13:D1E9             	!:
 6420                        		__add_st.wmq	_sgx_map_pxl_y
         13:D1E9  18         			clc
         13:D1EA  6D 90 26   			adc.l	_sgx_map_pxl_y
         13:D1ED  8D 90 26   			sta.l	_sgx_map_pxl_y
         13:D1F0  98         			tya
         13:D1F1  6D 91 26   			adc.h	_sgx_map_pxl_y
         13:D1F4  8D 91 26   			sta.h	_sgx_map_pxl_y
 6421                        	
 6422                        		.dbg	line,	"include\routines_LEVELS.c", 1059; break;
 6423                        		__bra		.LL208
         13:D1F7  4C 7A D2   			bra	.LL208
 6424                        	
 6425                        		.dbg	line,	"include\routines_LEVELS.c", 1060; }
 6426                        	
 6427                        		.dbg	line,	"include\routines_LEVELS.c", 1062; else
 6428    13:D1FA             	.LL209:
 6429                        	
 6430                        		.dbg	line,	"include\routines_LEVELS.c", 1063; {
 6431                        	
 6432                        		.dbg	line,	"include\routines_LEVELS.c", 1064; spr_set(player_id);
 6433                        		__ld.umq	_player_id
         13:D1FA  AD 15 23   			lda	_player_id
 6434                        		__call		_spr_set.1
         13:D1FD  20 DD E7   			call	_spr_set.1
 6435                        	
 6436                        		.dbg	line,	"include\routines_LEVELS.c", 1065; spr_pattern(PLAYER_FALL_VRAM_ADR);
 6437                        		__ld.wi		9728
         13:D200  62         			cla
         13:D201  A0 26      			ldy.h	#9728
 6438                        		__call		_spr_pattern.1
         13:D203  20 26 E8   			call	_spr_pattern.1
 6439                        	
 6440                        		.dbg	line,	"include\routines_LEVELS.c", 1067; spr_set(weapon_id);
 6441                        		__ld.umq	_weapon_id
         13:D206  AD 22 23   			lda	_weapon_id
 6442                        		__call		_spr_set.1
         13:D209  20 DD E7   			call	_spr_set.1
 6443                        	
 6444                        		.dbg	line,	"include\routines_LEVELS.c", 1068; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
 6445                        		__ld.wi		5184
         13:D20C  A9 40      			lda.l	#5184
         13:D20E  A0 14      			ldy.h	#5184
 6446                        		__call		_spr_pattern.1
         13:D210  20 26 E8   			call	_spr_pattern.1
 6447                        	
 6448                        		.dbg	line,	"include\routines_LEVELS.c", 1069; spr_y(player_pos_y+4);
 6449                        		__ld.wm		_player_pos_y
         13:D213  AD D4 24   			lda.l	_player_pos_y
         13:D216  AC D5 24   			ldy.h	_player_pos_y
 6450                        		__add.wi	4
         13:D219  18         			clc
         13:D21A  69 04      			adc.l	#4
         13:D21C  90 01      			bcc	!+
         13:D21E  C8         			iny
         13:D21F             	!:
 6451                        		__call		_spr_y.1
         13:D21F  20 19 E8   			call	_spr_y.1
 6452                        	
 6453                        		.dbg	line,	"include\routines_LEVELS.c", 1071; if(player_axis == AXIS_RIGHT)
 6454                        		__not.um	_player_axis
         13:D222  AD 17 23   			lda	_player_axis
         13:D225  18         			clc
         13:D226  D0 01      			bne	!+
         13:D228  38         			sec
         13:D229             	!:
 6455                        		__bfalse	.LL211
         13:D229  90 11      			bcc	.LL211
 6456                        	
 6457                        		.dbg	line,	"include\routines_LEVELS.c", 1072; {
 6458                        	
 6459                        		.dbg	line,	"include\routines_LEVELS.c", 1073; spr_x(player_pos_x-4);
 6460                        		__ld.wm		_player_pos_x
         13:D22B  AD D2 24   			lda.l	_player_pos_x
         13:D22E  AC D3 24   			ldy.h	_player_pos_x
 6461                        		__sub.wi	4
         13:D231  38         			sec
         13:D232  E9 04      			sbc.l	#4
         13:D234  B0 01      			bcs	!+
         13:D236  88         			dey
         13:D237             	!:
 6462                        		__call		_spr_x.1
         13:D237  20 0A E8   			call	_spr_x.1
 6463                        	
 6464                        		.dbg	line,	"include\routines_LEVELS.c", 1074; }
 6465                        	
 6466                        		.dbg	line,	"include\routines_LEVELS.c", 1075; 
 6467                        	
 6468                        		.dbg	line,	"include\routines_LEVELS.c", 1076; else
 6469                        		__bra		.LL212
         13:D23A  80 0F      			bra	.LL212
 6470    13:D23C             	.LL211:
 6471                        	
 6472                        		.dbg	line,	"include\routines_LEVELS.c", 1077; {
 6473                        	
 6474                        		.dbg	line,	"include\routines_LEVELS.c", 1078; spr_x(player_pos_x+20);
 6475                        		__ld.wm		_player_pos_x
         13:D23C  AD D2 24   			lda.l	_player_pos_x
         13:D23F  AC D3 24   			ldy.h	_player_pos_x
 6476                        		__add.wi	20
         13:D242  18         			clc
         13:D243  69 14      			adc.l	#20
         13:D245  90 01      			bcc	!+
         13:D247  C8         			iny
         13:D248             	!:
 6477                        		__call		_spr_x.1
         13:D248  20 0A E8   			call	_spr_x.1
 6478                        	
 6479                        		.dbg	line,	"include\routines_LEVELS.c", 1079; }
 6480    13:D24B             	.LL212:
 6481                        	
 6482                        		.dbg	line,	"include\routines_LEVELS.c", 1080; 
 6483                        	
 6484                        		.dbg	line,	"include\routines_LEVELS.c", 1082; jump_ladder = FALSE;
 6485                        		__st.umiq	0, _jump_ladder
         13:D24B  9C 1F 23   			stz	_jump_ladder
 6486                        	
 6487                        		.dbg	line,	"include\routines_LEVELS.c", 1083; player_index_jump = 0;
 6488                        		__st.umiq	0, _player_index_jump
         13:D24E  9C 1A 23   			stz	_player_index_jump
 6489                        	
 6490                        		.dbg	line,	"include\routines_LEVELS.c", 1084; player_index_fall = 0;
 6491                        		__st.umiq	0, _player_index_fall
         13:D251  9C 1B 23   			stz	_player_index_fall
 6492                        	
 6493                        		.dbg	line,	"include\routines_LEVELS.c", 1085; player_state = STATE_FALL;
 6494                        		__st.umiq	9, _player_state
         13:D254  A9 09      			lda.l	#9
         13:D256  8D 16 23   			sta	_player_state
 6495                        	
 6496                        		.dbg	line,	"include\routines_LEVELS.c", 1086; }
 6497    13:D259             	.LL210	.alias		.LL206
 6498                        	
 6499                        		.dbg	line,	"include\routines_LEVELS.c", 1087; }
 6500                        		__bra		.LL206
         13:D259  4C AC D1   			bra	.LL206
 6501    13:D25C             	.LL208	.alias		.LL213
 6502                        	
 6503                        		.dbg	line,	"include\routines_LEVELS.c", 1088; }
 6504                        	
 6505                        		.dbg	line,	"include\routines_LEVELS.c", 1090; else
 6506                        		__bra		.LL213
         13:D25C  80 1C      			bra	.LL213
 6507    13:D25E             	.LL204:
 6508                        	
 6509                        		.dbg	line,	"include\routines_LEVELS.c", 1091; {
 6510                        	
 6511                        		.dbg	line,	"include\routines_LEVELS.c", 1092; spr_set(weapon_id);
 6512                        		__ld.umq	_weapon_id
         13:D25E  AD 22 23   			lda	_weapon_id
 6513                        		__call		_spr_set.1
         13:D261  20 DD E7   			call	_spr_set.1
 6514                        	
 6515                        		.dbg	line,	"include\routines_LEVELS.c", 1093; spr_hide();
 6516                        		__call		_spr_hide
         13:D264  20 F8 E7   			call	_spr_hide
 6517                        	
 6518                        		.dbg	line,	"include\routines_LEVELS.c", 1094; 
 6519                        	
 6520                        		.dbg	line,	"include\routines_LEVELS.c", 1095; sgx_map_pxl_y += 2;
 6521                        		__add_st.wmiq	2, _sgx_map_pxl_y
         13:D267  18         			clc
         13:D268  AD 90 26   			lda.l	_sgx_map_pxl_y
         13:D26B  69 02      			adc.l	#2
         13:D26D  8D 90 26   			sta.l	_sgx_map_pxl_y
         13:D270  90 03      			bcc	!+
         13:D272  EE 91 26   			inc.h	_sgx_map_pxl_y
         13:D275             	!:
 6522                        	
 6523                        		.dbg	line,	"include\routines_LEVELS.c", 1096; player_state = STATE_CLIMB_DOWN;
 6524                        		__st.umiq	12, _player_state
         13:D275  A9 0C      			lda.l	#12
         13:D277  8D 16 23   			sta	_player_state
 6525                        	
 6526                        		.dbg	line,	"include\routines_LEVELS.c", 1097; }
 6527    13:D27A             	.LL213:
 6528                        	
 6529                        		.dbg	line,	"include\routines_LEVELS.c", 1098; }
 6530                        	
 6531                        		.dbg	line,	"include\routines_LEVELS.c", 1099; }
 6532    13:D27A             	.LL201:
 6533    13:D27A             	.LL200:
 6534                        	
 6535                        		.dbg	line,	"include\routines_LEVELS.c", 1100; }
 6536    13:D27A             	.LL197:
 6537    13:D27A             	.LL196:
 6538    13:D27A             	.LL184:
 6539    13:D27A             	.LL158:
 6540    13:D27A             	.LL124:
 6541                        		__return	0
         13:D27A  4C EF FF   			jmp	leave_proc
 6542                        		.dbg	clear
 6543                        		.endp
 6544               6860     		.data
 6545               2303     		.bss
 6546    F8:2303             	__joypad_DIR_loc:
 6547    F8:2303             			ds	2
 6548    F8:2305             	__joypad_DIR_end:
 6549               E309     		.code
 6550                        		.pceas
 6551                        	
 6552                        		.dbg	line,	"include\routines_LEVELS.c", 1109; void update_PLAYER()
 6553                        		.dbg	line,	"include\routines_LEVELS.c", 1110; {
 6554                        	;***********************
 6555                        	;***********************
 6556                        	
 6557                        		.hucc
 6558    01:C1A5             		.proc		_update_PLAYER
 6559                        		__enter		_update_PLAYER
 6560                        	
 6561                        		.dbg	line,	"include\routines_LEVELS.c", 1111; if(player_state == STATE_IDLE)
 6562                        		__not.um	_player_state
         01:C1A5  AD 16 23   			lda	_player_state
         01:C1A8  18         			clc
         01:C1A9  D0 01      			bne	!+
         01:C1AB  38         			sec
         01:C1AC             	!:
 6563                        		__bfalse	.LL215
         01:C1AC  B0 03 4C 5B			bcc	.LL215
         01:C1B0  C2          
 6564                        	
 6565                        		.dbg	line,	"include\routines_LEVELS.c", 1112; {
 6566                        	
 6567                        		.dbg	line,	"include\routines_LEVELS.c", 1113; if(player_counter_anim == 1)
 6568                        		__ld.umq	_player_counter_anim
         01:C1B1  AD 19 23   			lda	_player_counter_anim
 6569                        		__equ_b.uiq	1
         01:C1B4  C9 01      			cmp	#1
         01:C1B6  F0 01      			beq	!+
         01:C1B8  18         			clc
         01:C1B9             	!:
 6570                        		__bfalse	.LL216
         01:C1B9  90 3A      			bcc	.LL216
 6571                        	
 6572                        		.dbg	line,	"include\routines_LEVELS.c", 1114; {
 6573                        	
 6574                        		.dbg	line,	"include\routines_LEVELS.c", 1115; spr_set(player_id);
 6575                        		__ld.umq	_player_id
         01:C1BB  AD 15 23   			lda	_player_id
 6576                        		__call		_spr_set.1
         01:C1BE  20 DD E7   			call	_spr_set.1
 6577                        	
 6578                        		.dbg	line,	"include\routines_LEVELS.c", 1116; spr_pattern(PLAYER_IDLE_VRAM_ADR);
 6579                        		__ld.wi		5632
         01:C1C1  62         			cla
         01:C1C2  A0 16      			ldy.h	#5632
 6580                        		__call		_spr_pattern.1
         01:C1C4  20 26 E8   			call	_spr_pattern.1
 6581                        	
 6582                        		.dbg	line,	"include\routines_LEVELS.c", 1118; spr_set(weapon_id);
 6583                        		__ld.umq	_weapon_id
         01:C1C7  AD 22 23   			lda	_weapon_id
 6584                        		__call		_spr_set.1
         01:C1CA  20 DD E7   			call	_spr_set.1
 6585                        	
 6586                        		.dbg	line,	"include\routines_LEVELS.c", 1119; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
 6587                        		__ld.wi		5184
         01:C1CD  A9 40      			lda.l	#5184
         01:C1CF  A0 14      			ldy.h	#5184
 6588                        		__call		_spr_pattern.1
         01:C1D1  20 26 E8   			call	_spr_pattern.1
 6589                        	
 6590                        		.dbg	line,	"include\routines_LEVELS.c", 1120; spr_x(player_pos_x+8);
 6591                        		__ld.wm		_player_pos_x
         01:C1D4  AD D2 24   			lda.l	_player_pos_x
         01:C1D7  AC D3 24   			ldy.h	_player_pos_x
 6592                        		__add.wi	8
         01:C1DA  18         			clc
         01:C1DB  69 08      			adc.l	#8
         01:C1DD  90 01      			bcc	!+
         01:C1DF  C8         			iny
         01:C1E0             	!:
 6593                        		__call		_spr_x.1
         01:C1E0  20 0A E8   			call	_spr_x.1
 6594                        	
 6595                        		.dbg	line,	"include\routines_LEVELS.c", 1121; spr_y(player_pos_y+16);
 6596                        		__ld.wm		_player_pos_y
         01:C1E3  AD D4 24   			lda.l	_player_pos_y
         01:C1E6  AC D5 24   			ldy.h	_player_pos_y
 6597                        		__add.wi	16
         01:C1E9  18         			clc
         01:C1EA  69 10      			adc.l	#16
         01:C1EC  90 01      			bcc	!+
         01:C1EE  C8         			iny
         01:C1EF             	!:
 6598                        		__call		_spr_y.1
         01:C1EF  20 19 E8   			call	_spr_y.1
 6599                        	
 6600                        		.dbg	line,	"include\routines_LEVELS.c", 1123; player_counter_anim = 0;
 6601                        		__st.umiq	0, _player_counter_anim
         01:C1F2  9C 19 23   			stz	_player_counter_anim
 6602                        	
 6603                        		.dbg	line,	"include\routines_LEVELS.c", 1124; }
 6604                        	
 6605                        		.dbg	line,	"include\routines_LEVELS.c", 1126; recenter_CAMERA();
 6606    01:C1F5             	.LL216:
 6607                        		__call		_recenter_CAMERA
         01:C1F5  20 63 FF   			call	_recenter_CAMERA
 6608                        	
 6609                        		.dbg	line,	"include\routines_LEVELS.c", 1129; // CHECK COLLISION WITH LEFT FLOOR //
 6610                        	
 6611                        		.dbg	line,	"include\routines_LEVELS.c", 1130; check_BG( 10 , 32 );//8
 6612                        		__ld.wi		10
         01:C1F8  A9 0A      			lda.l	#10
         01:C1FA  C2         			cly
 6613                        		__pusharg.wr
         01:C1FB  A6 8D      			ldx	<__sp
         01:C1FD  CA         			dex
         01:C1FE  CA         			dex
         01:C1FF  95 08      			sta.l	<__stack, x
         01:C201  94 09      			sty.h	<__stack, x
         01:C203  86 8D      			stx	<__sp
 6614                        		__ld.wi		32
         01:C205  A9 20      			lda.l	#32
         01:C207  C2         			cly
 6615                        		__pusharg.wr
         01:C208  A6 8D      			ldx	<__sp
         01:C20A  CA         			dex
         01:C20B  CA         			dex
         01:C20C  95 08      			sta.l	<__stack, x
         01:C20E  94 09      			sty.h	<__stack, x
         01:C210  86 8D      			stx	<__sp
 6616                        		__call		_check_BG
         01:C212  20 6D FF   			call	_check_BG
 6617                        	
 6618                        		.dbg	line,	"include\routines_LEVELS.c", 1132; if(map_blk_flag == TILE_EMPTY)
 6619                        		__not.um	_map_blk_flag
         01:C215  AD AF 2B   			lda	_map_blk_flag
         01:C218  18         			clc
         01:C219  D0 01      			bne	!+
         01:C21B  38         			sec
         01:C21C             	!:
 6620                        		__bfalse	.LL217
         01:C21C  B0 03 4C 3D			bcc	.LL217
         01:C220  DD          
 6621                        	
 6622                        		.dbg	line,	"include\routines_LEVELS.c", 1133; {
 6623                        	
 6624                        		.dbg	line,	"include\routines_LEVELS.c", 1134; // CHECK COLLISION WITH RIGHT FLOOR //
 6625                        	
 6626                        		.dbg	line,	"include\routines_LEVELS.c", 1135; check_BG( 22 , 32 );//24
 6627                        		__ld.wi		22
         01:C221  A9 16      			lda.l	#22
         01:C223  C2         			cly
 6628                        		__pusharg.wr
         01:C224  A6 8D      			ldx	<__sp
         01:C226  CA         			dex
         01:C227  CA         			dex
         01:C228  95 08      			sta.l	<__stack, x
         01:C22A  94 09      			sty.h	<__stack, x
         01:C22C  86 8D      			stx	<__sp
 6629                        		__ld.wi		32
         01:C22E  A9 20      			lda.l	#32
         01:C230  C2         			cly
 6630                        		__pusharg.wr
         01:C231  A6 8D      			ldx	<__sp
         01:C233  CA         			dex
         01:C234  CA         			dex
         01:C235  95 08      			sta.l	<__stack, x
         01:C237  94 09      			sty.h	<__stack, x
         01:C239  86 8D      			stx	<__sp
 6631                        		__call		_check_BG
         01:C23B  20 6D FF   			call	_check_BG
 6632                        	
 6633                        		.dbg	line,	"include\routines_LEVELS.c", 1137; if(map_blk_flag == TILE_EMPTY)
 6634                        		__not.um	_map_blk_flag
         01:C23E  AD AF 2B   			lda	_map_blk_flag
         01:C241  18         			clc
         01:C242  D0 01      			bne	!+
         01:C244  38         			sec
         01:C245             	!:
 6635                        		__bfalse	.LL218
         01:C245  B0 03 4C 3D			bcc	.LL218
         01:C249  DD          
 6636                        	
 6637                        		.dbg	line,	"include\routines_LEVELS.c", 1138; {
 6638                        	
 6639                        		.dbg	line,	"include\routines_LEVELS.c", 1139; //set_far_base(TABLE_PLAYER_TILES_BANK[player_naked],TABLE_PLAYER_TILES_ADR[player_naked]);
 6640                        	
 6641                        		.dbg	line,	"include\routines_LEVELS.c", 1140; //far_load_vram(PLAYER_VRAM_ADR,TILES_16);
 6642                        	
 6643                        		.dbg	line,	"include\routines_LEVELS.c", 1142; jump_ladder = FALSE;
 6644                        		__st.umiq	0, _jump_ladder
         01:C24A  9C 1F 23   			stz	_jump_ladder
 6645                        	
 6646                        		.dbg	line,	"include\routines_LEVELS.c", 1143; player_index_jump = 0;
 6647                        		__st.umiq	0, _player_index_jump
         01:C24D  9C 1A 23   			stz	_player_index_jump
 6648                        	
 6649                        		.dbg	line,	"include\routines_LEVELS.c", 1144; player_index_fall = 0;
 6650                        		__st.umiq	0, _player_index_fall
         01:C250  9C 1B 23   			stz	_player_index_fall
 6651                        	
 6652                        		.dbg	line,	"include\routines_LEVELS.c", 1145; player_state = STATE_FALL;
 6653                        		__st.umiq	9, _player_state
         01:C253  A9 09      			lda.l	#9
         01:C255  8D 16 23   			sta	_player_state
 6654                        	
 6655                        		.dbg	line,	"include\routines_LEVELS.c", 1146; }
 6656                        	
 6657                        		.dbg	line,	"include\routines_LEVELS.c", 1147; }
 6658    01:C258             	.LL218	.alias		.LL219
 6659                        	
 6660                        		.dbg	line,	"include\routines_LEVELS.c", 1148; }
 6661    01:C258             	.LL217	.alias		.LL219
 6662                        	
 6663                        		.dbg	line,	"include\routines_LEVELS.c", 1151; else if(player_state == STATE_WALK)
 6664                        		__bra		.LL219
         01:C258  4C 3D DD   			bra	.LL219
 6665    01:C25B             	.LL215:
 6666                        		__ld.umq	_player_state
         01:C25B  AD 16 23   			lda	_player_state
 6667                        		__equ_b.uiq	1
         01:C25E  C9 01      			cmp	#1
         01:C260  F0 01      			beq	!+
         01:C262  18         			clc
         01:C263             	!:
 6668                        		__bfalse	.LL220
         01:C263  B0 03 4C 2E			bcc	.LL220
         01:C267  C6          
 6669                        	
 6670                        		.dbg	line,	"include\routines_LEVELS.c", 1152; {
 6671                        	
 6672                        		.dbg	line,	"include\routines_LEVELS.c", 1153; recenter_CAMERA();
 6673                        		__call		_recenter_CAMERA
         01:C268  20 63 FF   			call	_recenter_CAMERA
 6674                        	
 6675                        		.dbg	line,	"include\routines_LEVELS.c", 1156; //--------------------------------------------------------------------------------------//
 6676                        	
 6677                        		.dbg	line,	"include\routines_LEVELS.c", 1157; //                                   FLOOR COLLISION                                    //
 6678                        	
 6679                        		.dbg	line,	"include\routines_LEVELS.c", 1158; //--------------------------------------------------------------------------------------//
 6680                        	
 6681                        		.dbg	line,	"include\routines_LEVELS.c", 1160; // CHECK COLLISION WITH LEFT FLOOR //
 6682                        	
 6683                        		.dbg	line,	"include\routines_LEVELS.c", 1161; check_BG( 10 , 32 );//8
 6684                        		__ld.wi		10
         01:C26B  A9 0A      			lda.l	#10
         01:C26D  C2         			cly
 6685                        		__pusharg.wr
         01:C26E  A6 8D      			ldx	<__sp
         01:C270  CA         			dex
         01:C271  CA         			dex
         01:C272  95 08      			sta.l	<__stack, x
         01:C274  94 09      			sty.h	<__stack, x
         01:C276  86 8D      			stx	<__sp
 6686                        		__ld.wi		32
         01:C278  A9 20      			lda.l	#32
         01:C27A  C2         			cly
 6687                        		__pusharg.wr
         01:C27B  A6 8D      			ldx	<__sp
         01:C27D  CA         			dex
         01:C27E  CA         			dex
         01:C27F  95 08      			sta.l	<__stack, x
         01:C281  94 09      			sty.h	<__stack, x
         01:C283  86 8D      			stx	<__sp
 6688                        		__call		_check_BG
         01:C285  20 6D FF   			call	_check_BG
 6689                        	
 6690                        		.dbg	line,	"include\routines_LEVELS.c", 1163; if(map_blk_flag == TILE_EMPTY)
 6691                        		__not.um	_map_blk_flag
         01:C288  AD AF 2B   			lda	_map_blk_flag
         01:C28B  18         			clc
         01:C28C  D0 01      			bne	!+
         01:C28E  38         			sec
         01:C28F             	!:
 6692                        		__bfalse	.LL221
         01:C28F  B0 03 4C 47			bcc	.LL221
         01:C293  C3          
 6693                        	
 6694                        		.dbg	line,	"include\routines_LEVELS.c", 1164; {
 6695                        	
 6696                        		.dbg	line,	"include\routines_LEVELS.c", 1165; // CHECK COLLISION WITH RIGHT FLOOR //
 6697                        	
 6698                        		.dbg	line,	"include\routines_LEVELS.c", 1166; check_BG( 22 , 32 );//24
 6699                        		__ld.wi		22
         01:C294  A9 16      			lda.l	#22
         01:C296  C2         			cly
 6700                        		__pusharg.wr
         01:C297  A6 8D      			ldx	<__sp
         01:C299  CA         			dex
         01:C29A  CA         			dex
         01:C29B  95 08      			sta.l	<__stack, x
         01:C29D  94 09      			sty.h	<__stack, x
         01:C29F  86 8D      			stx	<__sp
 6701                        		__ld.wi		32
         01:C2A1  A9 20      			lda.l	#32
         01:C2A3  C2         			cly
 6702                        		__pusharg.wr
         01:C2A4  A6 8D      			ldx	<__sp
         01:C2A6  CA         			dex
         01:C2A7  CA         			dex
         01:C2A8  95 08      			sta.l	<__stack, x
         01:C2AA  94 09      			sty.h	<__stack, x
         01:C2AC  86 8D      			stx	<__sp
 6703                        		__call		_check_BG
         01:C2AE  20 6D FF   			call	_check_BG
 6704                        	
 6705                        		.dbg	line,	"include\routines_LEVELS.c", 1168; if(map_blk_flag == TILE_EMPTY)
 6706                        		__not.um	_map_blk_flag
         01:C2B1  AD AF 2B   			lda	_map_blk_flag
         01:C2B4  18         			clc
         01:C2B5  D0 01      			bne	!+
         01:C2B7  38         			sec
         01:C2B8             	!:
 6707                        		__bfalse	.LL222
         01:C2B8  90 11      			bcc	.LL222
 6708                        	
 6709                        		.dbg	line,	"include\routines_LEVELS.c", 1169; {
 6710                        	
 6711                        		.dbg	line,	"include\routines_LEVELS.c", 1170; /*spr_set(player_id);
 6712                        	
 6713                        		.dbg	line,	"include\routines_LEVELS.c", 1171; spr_pattern(PLAYER_IDLE_VRAM_ADR);
 6714                        	
 6715                        		.dbg	line,	"include\routines_LEVELS.c", 1173; spr_set(weapon_id);
 6716                        	
 6717                        		.dbg	line,	"include\routines_LEVELS.c", 1174; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
 6718                        	
 6719                        		.dbg	line,	"include\routines_LEVELS.c", 1175; spr_x(player_pos_x+8);
 6720                        	
 6721                        		.dbg	line,	"include\routines_LEVELS.c", 1176; spr_y(player_pos_y+16);*/
 6722                        	
 6723                        		.dbg	line,	"include\routines_LEVELS.c", 1178; jump_ladder = FALSE;
 6724                        		__st.umiq	0, _jump_ladder
         01:C2BA  9C 1F 23   			stz	_jump_ladder
 6725                        	
 6726                        		.dbg	line,	"include\routines_LEVELS.c", 1179; player_index_jump = 0;
 6727                        		__st.umiq	0, _player_index_jump
         01:C2BD  9C 1A 23   			stz	_player_index_jump
 6728                        	
 6729                        		.dbg	line,	"include\routines_LEVELS.c", 1180; player_index_fall = 0;
 6730                        		__st.umiq	0, _player_index_fall
         01:C2C0  9C 1B 23   			stz	_player_index_fall
 6731                        	
 6732                        		.dbg	line,	"include\routines_LEVELS.c", 1181; player_state = STATE_FALL;
 6733                        		__st.umiq	9, _player_state
         01:C2C3  A9 09      			lda.l	#9
         01:C2C5  8D 16 23   			sta	_player_state
 6734                        	
 6735                        		.dbg	line,	"include\routines_LEVELS.c", 1182; }
 6736                        	
 6737                        		.dbg	line,	"include\routines_LEVELS.c", 1185; else
 6738                        		__bra		.LL223
         01:C2C8  4C BA C3   			bra	.LL223
 6739    01:C2CB             	.LL222:
 6740                        	
 6741                        		.dbg	line,	"include\routines_LEVELS.c", 1186; {
 6742                        	
 6743                        		.dbg	line,	"include\routines_LEVELS.c", 1187; if(player_axis == AXIS_RIGHT)
 6744                        		__not.um	_player_axis
         01:C2CB  AD 17 23   			lda	_player_axis
         01:C2CE  18         			clc
         01:C2CF  D0 01      			bne	!+
         01:C2D1  38         			sec
         01:C2D2             	!:
 6745                        		__bfalse	.LL224
         01:C2D2  90 3A      			bcc	.LL224
 6746                        	
 6747                        		.dbg	line,	"include\routines_LEVELS.c", 1188; {
 6748                        	
 6749                        		.dbg	line,	"include\routines_LEVELS.c", 1189; // CHECK COLLISION WITH RIGHT WALL //
 6750                        	
 6751                        		.dbg	line,	"include\routines_LEVELS.c", 1190; check_BG( 24 , 31 ); // 24+2
 6752                        		__ld.wi		24
         01:C2D4  A9 18      			lda.l	#24
         01:C2D6  C2         			cly
 6753                        		__pusharg.wr
         01:C2D7  A6 8D      			ldx	<__sp
         01:C2D9  CA         			dex
         01:C2DA  CA         			dex
         01:C2DB  95 08      			sta.l	<__stack, x
         01:C2DD  94 09      			sty.h	<__stack, x
         01:C2DF  86 8D      			stx	<__sp
 6754                        		__ld.wi		31
         01:C2E1  A9 1F      			lda.l	#31
         01:C2E3  C2         			cly
 6755                        		__pusharg.wr
         01:C2E4  A6 8D      			ldx	<__sp
         01:C2E6  CA         			dex
         01:C2E7  CA         			dex
         01:C2E8  95 08      			sta.l	<__stack, x
         01:C2EA  94 09      			sty.h	<__stack, x
         01:C2EC  86 8D      			stx	<__sp
 6756                        		__call		_check_BG
         01:C2EE  20 6D FF   			call	_check_BG
 6757                        	
 6758                        		.dbg	line,	"include\routines_LEVELS.c", 1192; if(map_blk_flag == TILE_EMPTY)
 6759                        		__not.um	_map_blk_flag
         01:C2F1  AD AF 2B   			lda	_map_blk_flag
         01:C2F4  18         			clc
         01:C2F5  D0 01      			bne	!+
         01:C2F7  38         			sec
         01:C2F8             	!:
 6760                        		__bfalse	.LL225
         01:C2F8  B0 03 4C BA			bcc	.LL225
         01:C2FC  C3          
 6761                        	
 6762                        		.dbg	line,	"include\routines_LEVELS.c", 1193; {
 6763                        	
 6764                        		.dbg	line,	"include\routines_LEVELS.c", 1194; sgx_map_pxl_x += 2;
 6765                        		__add_st.wmiq	2, _sgx_map_pxl_x
         01:C2FD  18         			clc
         01:C2FE  AD 8E 26   			lda.l	_sgx_map_pxl_x
         01:C301  69 02      			adc.l	#2
         01:C303  8D 8E 26   			sta.l	_sgx_map_pxl_x
         01:C306  90 03      			bcc	!+
         01:C308  EE 8F 26   			inc.h	_sgx_map_pxl_x
         01:C30B             	!:
 6766                        	
 6767                        		.dbg	line,	"include\routines_LEVELS.c", 1195; }
 6768                        	
 6769                        		.dbg	line,	"include\routines_LEVELS.c", 1196; }
 6770    01:C30B             	.LL225	.alias		.LL226
 6771                        	
 6772                        		.dbg	line,	"include\routines_LEVELS.c", 1198; else
 6773                        		__bra		.LL226
         01:C30B  4C BA C3   			bra	.LL226
 6774    01:C30E             	.LL224:
 6775                        	
 6776                        		.dbg	line,	"include\routines_LEVELS.c", 1199; {
 6777                        	
 6778                        		.dbg	line,	"include\routines_LEVELS.c", 1200; // CHECK COLLISION WITH LEFT WALL //
 6779                        	
 6780                        		.dbg	line,	"include\routines_LEVELS.c", 1201; check_BG( 8 , 31 ); // 8-2
 6781                        		__ld.wi		8
         01:C30E  A9 08      			lda.l	#8
         01:C310  C2         			cly
 6782                        		__pusharg.wr
         01:C311  A6 8D      			ldx	<__sp
         01:C313  CA         			dex
         01:C314  CA         			dex
         01:C315  95 08      			sta.l	<__stack, x
         01:C317  94 09      			sty.h	<__stack, x
         01:C319  86 8D      			stx	<__sp
 6783                        		__ld.wi		31
         01:C31B  A9 1F      			lda.l	#31
         01:C31D  C2         			cly
 6784                        		__pusharg.wr
         01:C31E  A6 8D      			ldx	<__sp
         01:C320  CA         			dex
         01:C321  CA         			dex
         01:C322  95 08      			sta.l	<__stack, x
         01:C324  94 09      			sty.h	<__stack, x
         01:C326  86 8D      			stx	<__sp
 6785                        		__call		_check_BG
         01:C328  20 6D FF   			call	_check_BG
 6786                        	
 6787                        		.dbg	line,	"include\routines_LEVELS.c", 1203; if(map_blk_flag == TILE_EMPTY)
 6788                        		__not.um	_map_blk_flag
         01:C32B  AD AF 2B   			lda	_map_blk_flag
         01:C32E  18         			clc
         01:C32F  D0 01      			bne	!+
         01:C331  38         			sec
         01:C332             	!:
 6789                        		__bfalse	.LL227
         01:C332  B0 03 4C BA			bcc	.LL227
         01:C336  C3          
 6790                        	
 6791                        		.dbg	line,	"include\routines_LEVELS.c", 1204; {
 6792                        	
 6793                        		.dbg	line,	"include\routines_LEVELS.c", 1205; sgx_map_pxl_x -= 2;
 6794                        		__sub_st.wmiq	2, _sgx_map_pxl_x
         01:C337  38         			sec
         01:C338  AD 8E 26   			lda.l	_sgx_map_pxl_x
         01:C33B  E9 02      			sbc.l	#2
         01:C33D  8D 8E 26   			sta.l	_sgx_map_pxl_x
         01:C340  B0 03      			bcs	!+
         01:C342  CE 8F 26   			dec.h	_sgx_map_pxl_x
         01:C345             	!:
 6795                        	
 6796                        		.dbg	line,	"include\routines_LEVELS.c", 1206; }
 6797                        	
 6798                        		.dbg	line,	"include\routines_LEVELS.c", 1207; }
 6799    01:C345             	.LL227	.alias		.LL228
 6800    01:C345             	.LL226	.alias		.LL228
 6801                        	
 6802                        		.dbg	line,	"include\routines_LEVELS.c", 1208; }
 6803    01:C345             	.LL223	.alias		.LL228
 6804                        	
 6805                        		.dbg	line,	"include\routines_LEVELS.c", 1209; }
 6806                        	
 6807                        		.dbg	line,	"include\routines_LEVELS.c", 1212; else
 6808                        		__bra		.LL228
         01:C345  80 73      			bra	.LL228
 6809    01:C347             	.LL221:
 6810                        	
 6811                        		.dbg	line,	"include\routines_LEVELS.c", 1213; {
 6812                        	
 6813                        		.dbg	line,	"include\routines_LEVELS.c", 1214; if(player_axis == AXIS_RIGHT)
 6814                        		__not.um	_player_axis
         01:C347  AD 17 23   			lda	_player_axis
         01:C34A  18         			clc
         01:C34B  D0 01      			bne	!+
         01:C34D  38         			sec
         01:C34E             	!:
 6815                        		__bfalse	.LL229
         01:C34E  90 36      			bcc	.LL229
 6816                        	
 6817                        		.dbg	line,	"include\routines_LEVELS.c", 1215; {
 6818                        	
 6819                        		.dbg	line,	"include\routines_LEVELS.c", 1216; // CHECK COLLISION WITH RIGHT WALL //
 6820                        	
 6821                        		.dbg	line,	"include\routines_LEVELS.c", 1217; check_BG( 24 , 31 ); // 24+2
 6822                        		__ld.wi		24
         01:C350  A9 18      			lda.l	#24
         01:C352  C2         			cly
 6823                        		__pusharg.wr
         01:C353  A6 8D      			ldx	<__sp
         01:C355  CA         			dex
         01:C356  CA         			dex
         01:C357  95 08      			sta.l	<__stack, x
         01:C359  94 09      			sty.h	<__stack, x
         01:C35B  86 8D      			stx	<__sp
 6824                        		__ld.wi		31
         01:C35D  A9 1F      			lda.l	#31
         01:C35F  C2         			cly
 6825                        		__pusharg.wr
         01:C360  A6 8D      			ldx	<__sp
         01:C362  CA         			dex
         01:C363  CA         			dex
         01:C364  95 08      			sta.l	<__stack, x
         01:C366  94 09      			sty.h	<__stack, x
         01:C368  86 8D      			stx	<__sp
 6826                        		__call		_check_BG
         01:C36A  20 6D FF   			call	_check_BG
 6827                        	
 6828                        		.dbg	line,	"include\routines_LEVELS.c", 1219; if(map_blk_flag == TILE_EMPTY)
 6829                        		__not.um	_map_blk_flag
         01:C36D  AD AF 2B   			lda	_map_blk_flag
         01:C370  18         			clc
         01:C371  D0 01      			bne	!+
         01:C373  38         			sec
         01:C374             	!:
 6830                        		__bfalse	.LL230
         01:C374  90 44      			bcc	.LL230
 6831                        	
 6832                        		.dbg	line,	"include\routines_LEVELS.c", 1220; {
 6833                        	
 6834                        		.dbg	line,	"include\routines_LEVELS.c", 1221; sgx_map_pxl_x += 2;
 6835                        		__add_st.wmiq	2, _sgx_map_pxl_x
         01:C376  18         			clc
         01:C377  AD 8E 26   			lda.l	_sgx_map_pxl_x
         01:C37A  69 02      			adc.l	#2
         01:C37C  8D 8E 26   			sta.l	_sgx_map_pxl_x
         01:C37F  90 03      			bcc	!+
         01:C381  EE 8F 26   			inc.h	_sgx_map_pxl_x
         01:C384             	!:
 6836                        	
 6837                        		.dbg	line,	"include\routines_LEVELS.c", 1222; }
 6838                        	
 6839                        		.dbg	line,	"include\routines_LEVELS.c", 1223; }
 6840    01:C384             	.LL230	.alias		.LL231
 6841                        	
 6842                        		.dbg	line,	"include\routines_LEVELS.c", 1225; else
 6843                        		__bra		.LL231
         01:C384  80 34      			bra	.LL231
 6844    01:C386             	.LL229:
 6845                        	
 6846                        		.dbg	line,	"include\routines_LEVELS.c", 1226; {
 6847                        	
 6848                        		.dbg	line,	"include\routines_LEVELS.c", 1227; // CHECK COLLISION WITH LEFT WALL //
 6849                        	
 6850                        		.dbg	line,	"include\routines_LEVELS.c", 1228; check_BG( 8 , 31 ); // 8-2
 6851                        		__ld.wi		8
         01:C386  A9 08      			lda.l	#8
         01:C388  C2         			cly
 6852                        		__pusharg.wr
         01:C389  A6 8D      			ldx	<__sp
         01:C38B  CA         			dex
         01:C38C  CA         			dex
         01:C38D  95 08      			sta.l	<__stack, x
         01:C38F  94 09      			sty.h	<__stack, x
         01:C391  86 8D      			stx	<__sp
 6853                        		__ld.wi		31
         01:C393  A9 1F      			lda.l	#31
         01:C395  C2         			cly
 6854                        		__pusharg.wr
         01:C396  A6 8D      			ldx	<__sp
         01:C398  CA         			dex
         01:C399  CA         			dex
         01:C39A  95 08      			sta.l	<__stack, x
         01:C39C  94 09      			sty.h	<__stack, x
         01:C39E  86 8D      			stx	<__sp
 6855                        		__call		_check_BG
         01:C3A0  20 6D FF   			call	_check_BG
 6856                        	
 6857                        		.dbg	line,	"include\routines_LEVELS.c", 1230; if(map_blk_flag == TILE_EMPTY)
 6858                        		__not.um	_map_blk_flag
         01:C3A3  AD AF 2B   			lda	_map_blk_flag
         01:C3A6  18         			clc
         01:C3A7  D0 01      			bne	!+
         01:C3A9  38         			sec
         01:C3AA             	!:
 6859                        		__bfalse	.LL232
         01:C3AA  90 0E      			bcc	.LL232
 6860                        	
 6861                        		.dbg	line,	"include\routines_LEVELS.c", 1231; {
 6862                        	
 6863                        		.dbg	line,	"include\routines_LEVELS.c", 1232; sgx_map_pxl_x -= 2;
 6864                        		__sub_st.wmiq	2, _sgx_map_pxl_x
         01:C3AC  38         			sec
         01:C3AD  AD 8E 26   			lda.l	_sgx_map_pxl_x
         01:C3B0  E9 02      			sbc.l	#2
         01:C3B2  8D 8E 26   			sta.l	_sgx_map_pxl_x
         01:C3B5  B0 03      			bcs	!+
         01:C3B7  CE 8F 26   			dec.h	_sgx_map_pxl_x
         01:C3BA             	!:
 6865                        	
 6866                        		.dbg	line,	"include\routines_LEVELS.c", 1233; }
 6867                        	
 6868                        		.dbg	line,	"include\routines_LEVELS.c", 1234; }
 6869    01:C3BA             	.LL232:
 6870    01:C3BA             	.LL231:
 6871                        	
 6872                        		.dbg	line,	"include\routines_LEVELS.c", 1235; }
 6873    01:C3BA             	.LL228:
 6874                        	
 6875                        		.dbg	line,	"include\routines_LEVELS.c", 1240; spr_set(player_id);
 6876                        		__ld.umq	_player_id
         01:C3BA  AD 15 23   			lda	_player_id
 6877                        		__call		_spr_set.1
         01:C3BD  20 DD E7   			call	_spr_set.1
 6878                        	
 6879                        		.dbg	line,	"include\routines_LEVELS.c", 1243; // UPDATE PLAYER TILES //
 6880                        	
 6881                        		.dbg	line,	"include\routines_LEVELS.c", 1244; if(player_counter_anim == 0)
 6882                        		__not.um	_player_counter_anim
         01:C3C0  AD 19 23   			lda	_player_counter_anim
         01:C3C3  18         			clc
         01:C3C4  D0 01      			bne	!+
         01:C3C6  38         			sec
         01:C3C7             	!:
 6883                        		__bfalse	.LL233
         01:C3C7  90 34      			bcc	.LL233
 6884                        	
 6885                        		.dbg	line,	"include\routines_LEVELS.c", 1245; {
 6886                        	
 6887                        		.dbg	line,	"include\routines_LEVELS.c", 1246; spr_pattern(PLAYER_IDLE_VRAM_ADR);
 6888                        		__ld.wi		5632
         01:C3C9  62         			cla
         01:C3CA  A0 16      			ldy.h	#5632
 6889                        		__call		_spr_pattern.1
         01:C3CC  20 26 E8   			call	_spr_pattern.1
 6890                        	
 6891                        		.dbg	line,	"include\routines_LEVELS.c", 1248; spr_set(weapon_id);
 6892                        		__ld.umq	_weapon_id
         01:C3CF  AD 22 23   			lda	_weapon_id
 6893                        		__call		_spr_set.1
         01:C3D2  20 DD E7   			call	_spr_set.1
 6894                        	
 6895                        		.dbg	line,	"include\routines_LEVELS.c", 1249; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
 6896                        		__ld.wi		5184
         01:C3D5  A9 40      			lda.l	#5184
         01:C3D7  A0 14      			ldy.h	#5184
 6897                        		__call		_spr_pattern.1
         01:C3D9  20 26 E8   			call	_spr_pattern.1
 6898                        	
 6899                        		.dbg	line,	"include\routines_LEVELS.c", 1250; spr_x(player_pos_x+8);
 6900                        		__ld.wm		_player_pos_x
         01:C3DC  AD D2 24   			lda.l	_player_pos_x
         01:C3DF  AC D3 24   			ldy.h	_player_pos_x
 6901                        		__add.wi	8
         01:C3E2  18         			clc
         01:C3E3  69 08      			adc.l	#8
         01:C3E5  90 01      			bcc	!+
         01:C3E7  C8         			iny
         01:C3E8             	!:
 6902                        		__call		_spr_x.1
         01:C3E8  20 0A E8   			call	_spr_x.1
 6903                        	
 6904                        		.dbg	line,	"include\routines_LEVELS.c", 1251; spr_y(player_pos_y+16);
 6905                        		__ld.wm		_player_pos_y
         01:C3EB  AD D4 24   			lda.l	_player_pos_y
         01:C3EE  AC D5 24   			ldy.h	_player_pos_y
 6906                        		__add.wi	16
         01:C3F1  18         			clc
         01:C3F2  69 10      			adc.l	#16
         01:C3F4  90 01      			bcc	!+
         01:C3F6  C8         			iny
         01:C3F7             	!:
 6907                        		__call		_spr_y.1
         01:C3F7  20 19 E8   			call	_spr_y.1
 6908                        	
 6909                        		.dbg	line,	"include\routines_LEVELS.c", 1252; }
 6910                        	
 6911                        		.dbg	line,	"include\routines_LEVELS.c", 1255; else if(player_counter_anim == 1)
 6912                        		__bra		.LL234
         01:C3FA  4C 28 C6   			bra	.LL234
 6913    01:C3FD             	.LL233:
 6914                        		__ld.umq	_player_counter_anim
         01:C3FD  AD 19 23   			lda	_player_counter_anim
 6915                        		__equ_b.uiq	1
         01:C400  C9 01      			cmp	#1
         01:C402  F0 01      			beq	!+
         01:C404  18         			clc
         01:C405             	!:
 6916                        		__bfalse	.LL235
         01:C405  90 4F      			bcc	.LL235
 6917                        	
 6918                        		.dbg	line,	"include\routines_LEVELS.c", 1256; {
 6919                        	
 6920                        		.dbg	line,	"include\routines_LEVELS.c", 1257; spr_pattern(PLAYER_WALK_1_VRAM_ADR);
 6921                        		__ld.wi		5888
         01:C407  62         			cla
         01:C408  A0 17      			ldy.h	#5888
 6922                        		__call		_spr_pattern.1
         01:C40A  20 26 E8   			call	_spr_pattern.1
 6923                        	
 6924                        		.dbg	line,	"include\routines_LEVELS.c", 1259; spr_set(weapon_id);
 6925                        		__ld.umq	_weapon_id
         01:C40D  AD 22 23   			lda	_weapon_id
 6926                        		__call		_spr_set.1
         01:C410  20 DD E7   			call	_spr_set.1
 6927                        	
 6928                        		.dbg	line,	"include\routines_LEVELS.c", 1260; spr_pattern(WEAPON_WALK_1_VRAM_ADRESS);
 6929                        		__ld.wi		5248
         01:C413  A9 80      			lda.l	#5248
         01:C415  A0 14      			ldy.h	#5248
 6930                        		__call		_spr_pattern.1
         01:C417  20 26 E8   			call	_spr_pattern.1
 6931                        	
 6932                        		.dbg	line,	"include\routines_LEVELS.c", 1261; spr_y(player_pos_y+17);
 6933                        		__ld.wm		_player_pos_y
         01:C41A  AD D4 24   			lda.l	_player_pos_y
         01:C41D  AC D5 24   			ldy.h	_player_pos_y
 6934                        		__add.wi	17
         01:C420  18         			clc
         01:C421  69 11      			adc.l	#17
         01:C423  90 01      			bcc	!+
         01:C425  C8         			iny
         01:C426             	!:
 6935                        		__call		_spr_y.1
         01:C426  20 19 E8   			call	_spr_y.1
 6936                        	
 6937                        		.dbg	line,	"include\routines_LEVELS.c", 1263; if(player_axis == AXIS_RIGHT)
 6938                        		__not.um	_player_axis
         01:C429  AD 17 23   			lda	_player_axis
         01:C42C  18         			clc
         01:C42D  D0 01      			bne	!+
         01:C42F  38         			sec
         01:C430             	!:
 6939                        		__bfalse	.LL236
         01:C430  90 12      			bcc	.LL236
 6940                        	
 6941                        		.dbg	line,	"include\routines_LEVELS.c", 1264; {
 6942                        	
 6943                        		.dbg	line,	"include\routines_LEVELS.c", 1265; spr_x(player_pos_x+5);
 6944                        		__ld.wm		_player_pos_x
         01:C432  AD D2 24   			lda.l	_player_pos_x
         01:C435  AC D3 24   			ldy.h	_player_pos_x
 6945                        		__add.wi	5
         01:C438  18         			clc
         01:C439  69 05      			adc.l	#5
         01:C43B  90 01      			bcc	!+
         01:C43D  C8         			iny
         01:C43E             	!:
 6946                        		__call		_spr_x.1
         01:C43E  20 0A E8   			call	_spr_x.1
 6947                        	
 6948                        		.dbg	line,	"include\routines_LEVELS.c", 1266; }
 6949                        	
 6950                        		.dbg	line,	"include\routines_LEVELS.c", 1268; else
 6951                        		__bra		.LL237
         01:C441  4C 28 C6   			bra	.LL237
 6952    01:C444             	.LL236:
 6953                        	
 6954                        		.dbg	line,	"include\routines_LEVELS.c", 1269; {
 6955                        	
 6956                        		.dbg	line,	"include\routines_LEVELS.c", 1270; spr_x(player_pos_x+11);
 6957                        		__ld.wm		_player_pos_x
         01:C444  AD D2 24   			lda.l	_player_pos_x
         01:C447  AC D3 24   			ldy.h	_player_pos_x
 6958                        		__add.wi	11
         01:C44A  18         			clc
         01:C44B  69 0B      			adc.l	#11
         01:C44D  90 01      			bcc	!+
         01:C44F  C8         			iny
         01:C450             	!:
 6959                        		__call		_spr_x.1
         01:C450  20 0A E8   			call	_spr_x.1
 6960                        	
 6961                        		.dbg	line,	"include\routines_LEVELS.c", 1271; }
 6962    01:C453             	.LL237	.alias		.LL238
 6963                        	
 6964                        		.dbg	line,	"include\routines_LEVELS.c", 1272; }
 6965                        	
 6966                        		.dbg	line,	"include\routines_LEVELS.c", 1275; else if(player_counter_anim == 3)
 6967                        		__bra		.LL238
         01:C453  4C 28 C6   			bra	.LL238
 6968    01:C456             	.LL235:
 6969                        		__ld.umq	_player_counter_anim
         01:C456  AD 19 23   			lda	_player_counter_anim
 6970                        		__equ_b.uiq	3
         01:C459  C9 03      			cmp	#3
         01:C45B  F0 01      			beq	!+
         01:C45D  18         			clc
         01:C45E             	!:
 6971                        		__bfalse	.LL239
         01:C45E  90 40      			bcc	.LL239
 6972                        	
 6973                        		.dbg	line,	"include\routines_LEVELS.c", 1276; {
 6974                        	
 6975                        		.dbg	line,	"include\routines_LEVELS.c", 1277; spr_pattern(PLAYER_WALK_2_VRAM_ADR);
 6976                        		__ld.wi		6144
         01:C460  62         			cla
         01:C461  A0 18      			ldy.h	#6144
 6977                        		__call		_spr_pattern.1
         01:C463  20 26 E8   			call	_spr_pattern.1
 6978                        	
 6979                        		.dbg	line,	"include\routines_LEVELS.c", 1278; 
 6980                        	
 6981                        		.dbg	line,	"include\routines_LEVELS.c", 1279; spr_set(weapon_id);
 6982                        		__ld.umq	_weapon_id
         01:C466  AD 22 23   			lda	_weapon_id
 6983                        		__call		_spr_set.1
         01:C469  20 DD E7   			call	_spr_set.1
 6984                        	
 6985                        		.dbg	line,	"include\routines_LEVELS.c", 1280; spr_pattern(WEAPON_WALK_2_VRAM_ADRESS);
 6986                        		__ld.wi		5312
         01:C46C  A9 C0      			lda.l	#5312
         01:C46E  A0 14      			ldy.h	#5312
 6987                        		__call		_spr_pattern.1
         01:C470  20 26 E8   			call	_spr_pattern.1
 6988                        	
 6989                        		.dbg	line,	"include\routines_LEVELS.c", 1282; if(player_axis == AXIS_RIGHT)
 6990                        		__not.um	_player_axis
         01:C473  AD 17 23   			lda	_player_axis
         01:C476  18         			clc
         01:C477  D0 01      			bne	!+
         01:C479  38         			sec
         01:C47A             	!:
 6991                        		__bfalse	.LL240
         01:C47A  90 12      			bcc	.LL240
 6992                        	
 6993                        		.dbg	line,	"include\routines_LEVELS.c", 1283; {
 6994                        	
 6995                        		.dbg	line,	"include\routines_LEVELS.c", 1284; spr_x(player_pos_x+3);
 6996                        		__ld.wm		_player_pos_x
         01:C47C  AD D2 24   			lda.l	_player_pos_x
         01:C47F  AC D3 24   			ldy.h	_player_pos_x
 6997                        		__add.wi	3
         01:C482  18         			clc
         01:C483  69 03      			adc.l	#3
         01:C485  90 01      			bcc	!+
         01:C487  C8         			iny
         01:C488             	!:
 6998                        		__call		_spr_x.1
         01:C488  20 0A E8   			call	_spr_x.1
 6999                        	
 7000                        		.dbg	line,	"include\routines_LEVELS.c", 1285; }
 7001                        	
 7002                        		.dbg	line,	"include\routines_LEVELS.c", 1287; else
 7003                        		__bra		.LL241
         01:C48B  4C 28 C6   			bra	.LL241
 7004    01:C48E             	.LL240:
 7005                        	
 7006                        		.dbg	line,	"include\routines_LEVELS.c", 1288; {
 7007                        	
 7008                        		.dbg	line,	"include\routines_LEVELS.c", 1289; spr_x(player_pos_x+13);
 7009                        		__ld.wm		_player_pos_x
         01:C48E  AD D2 24   			lda.l	_player_pos_x
         01:C491  AC D3 24   			ldy.h	_player_pos_x
 7010                        		__add.wi	13
         01:C494  18         			clc
         01:C495  69 0D      			adc.l	#13
         01:C497  90 01      			bcc	!+
         01:C499  C8         			iny
         01:C49A             	!:
 7011                        		__call		_spr_x.1
         01:C49A  20 0A E8   			call	_spr_x.1
 7012                        	
 7013                        		.dbg	line,	"include\routines_LEVELS.c", 1290; }
 7014    01:C49D             	.LL241	.alias		.LL242
 7015                        	
 7016                        		.dbg	line,	"include\routines_LEVELS.c", 1291; }
 7017                        	
 7018                        		.dbg	line,	"include\routines_LEVELS.c", 1294; else if(player_counter_anim == 6)
 7019                        		__bra		.LL242
         01:C49D  4C 28 C6   			bra	.LL242
 7020    01:C4A0             	.LL239:
 7021                        		__ld.umq	_player_counter_anim
         01:C4A0  AD 19 23   			lda	_player_counter_anim
 7022                        		__equ_b.uiq	6
         01:C4A3  C9 06      			cmp	#6
         01:C4A5  F0 01      			beq	!+
         01:C4A7  18         			clc
         01:C4A8             	!:
 7023                        		__bfalse	.LL243
         01:C4A8  90 40      			bcc	.LL243
 7024                        	
 7025                        		.dbg	line,	"include\routines_LEVELS.c", 1295; {
 7026                        	
 7027                        		.dbg	line,	"include\routines_LEVELS.c", 1296; //spr_set(player_id);
 7028                        	
 7029                        		.dbg	line,	"include\routines_LEVELS.c", 1297; spr_pattern(PLAYER_WALK_3_VRAM_ADR);
 7030                        		__ld.wi		6400
         01:C4AA  62         			cla
         01:C4AB  A0 19      			ldy.h	#6400
 7031                        		__call		_spr_pattern.1
         01:C4AD  20 26 E8   			call	_spr_pattern.1
 7032                        	
 7033                        		.dbg	line,	"include\routines_LEVELS.c", 1299; spr_set(weapon_id);
 7034                        		__ld.umq	_weapon_id
         01:C4B0  AD 22 23   			lda	_weapon_id
 7035                        		__call		_spr_set.1
         01:C4B3  20 DD E7   			call	_spr_set.1
 7036                        	
 7037                        		.dbg	line,	"include\routines_LEVELS.c", 1300; spr_pattern(WEAPON_WALK_1_VRAM_ADRESS);
 7038                        		__ld.wi		5248
         01:C4B6  A9 80      			lda.l	#5248
         01:C4B8  A0 14      			ldy.h	#5248
 7039                        		__call		_spr_pattern.1
         01:C4BA  20 26 E8   			call	_spr_pattern.1
 7040                        	
 7041                        		.dbg	line,	"include\routines_LEVELS.c", 1302; if(player_axis == AXIS_RIGHT)
 7042                        		__not.um	_player_axis
         01:C4BD  AD 17 23   			lda	_player_axis
         01:C4C0  18         			clc
         01:C4C1  D0 01      			bne	!+
         01:C4C3  38         			sec
         01:C4C4             	!:
 7043                        		__bfalse	.LL244
         01:C4C4  90 12      			bcc	.LL244
 7044                        	
 7045                        		.dbg	line,	"include\routines_LEVELS.c", 1303; {
 7046                        	
 7047                        		.dbg	line,	"include\routines_LEVELS.c", 1304; spr_x(player_pos_x+5);
 7048                        		__ld.wm		_player_pos_x
         01:C4C6  AD D2 24   			lda.l	_player_pos_x
         01:C4C9  AC D3 24   			ldy.h	_player_pos_x
 7049                        		__add.wi	5
         01:C4CC  18         			clc
         01:C4CD  69 05      			adc.l	#5
         01:C4CF  90 01      			bcc	!+
         01:C4D1  C8         			iny
         01:C4D2             	!:
 7050                        		__call		_spr_x.1
         01:C4D2  20 0A E8   			call	_spr_x.1
 7051                        	
 7052                        		.dbg	line,	"include\routines_LEVELS.c", 1305; }
 7053                        	
 7054                        		.dbg	line,	"include\routines_LEVELS.c", 1307; else
 7055                        		__bra		.LL245
         01:C4D5  4C 28 C6   			bra	.LL245
 7056    01:C4D8             	.LL244:
 7057                        	
 7058                        		.dbg	line,	"include\routines_LEVELS.c", 1308; {
 7059                        	
 7060                        		.dbg	line,	"include\routines_LEVELS.c", 1309; spr_x(player_pos_x+11);
 7061                        		__ld.wm		_player_pos_x
         01:C4D8  AD D2 24   			lda.l	_player_pos_x
         01:C4DB  AC D3 24   			ldy.h	_player_pos_x
 7062                        		__add.wi	11
         01:C4DE  18         			clc
         01:C4DF  69 0B      			adc.l	#11
         01:C4E1  90 01      			bcc	!+
         01:C4E3  C8         			iny
         01:C4E4             	!:
 7063                        		__call		_spr_x.1
         01:C4E4  20 0A E8   			call	_spr_x.1
 7064                        	
 7065                        		.dbg	line,	"include\routines_LEVELS.c", 1310; }
 7066    01:C4E7             	.LL245	.alias		.LL246
 7067                        	
 7068                        		.dbg	line,	"include\routines_LEVELS.c", 1311; }
 7069                        	
 7070                        		.dbg	line,	"include\routines_LEVELS.c", 1314; else if(player_counter_anim == 8)
 7071                        		__bra		.LL246
         01:C4E7  4C 28 C6   			bra	.LL246
 7072    01:C4EA             	.LL243:
 7073                        		__ld.umq	_player_counter_anim
         01:C4EA  AD 19 23   			lda	_player_counter_anim
 7074                        		__equ_b.uiq	8
         01:C4ED  C9 08      			cmp	#8
         01:C4EF  F0 01      			beq	!+
         01:C4F1  18         			clc
         01:C4F2             	!:
 7075                        		__bfalse	.LL247
         01:C4F2  90 34      			bcc	.LL247
 7076                        	
 7077                        		.dbg	line,	"include\routines_LEVELS.c", 1315; {
 7078                        	
 7079                        		.dbg	line,	"include\routines_LEVELS.c", 1316; //spr_set(player_id);
 7080                        	
 7081                        		.dbg	line,	"include\routines_LEVELS.c", 1317; spr_pattern(PLAYER_IDLE_VRAM_ADR);
 7082                        		__ld.wi		5632
         01:C4F4  62         			cla
         01:C4F5  A0 16      			ldy.h	#5632
 7083                        		__call		_spr_pattern.1
         01:C4F7  20 26 E8   			call	_spr_pattern.1
 7084                        	
 7085                        		.dbg	line,	"include\routines_LEVELS.c", 1319; spr_set(weapon_id);
 7086                        		__ld.umq	_weapon_id
         01:C4FA  AD 22 23   			lda	_weapon_id
 7087                        		__call		_spr_set.1
         01:C4FD  20 DD E7   			call	_spr_set.1
 7088                        	
 7089                        		.dbg	line,	"include\routines_LEVELS.c", 1320; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
 7090                        		__ld.wi		5184
         01:C500  A9 40      			lda.l	#5184
         01:C502  A0 14      			ldy.h	#5184
 7091                        		__call		_spr_pattern.1
         01:C504  20 26 E8   			call	_spr_pattern.1
 7092                        	
 7093                        		.dbg	line,	"include\routines_LEVELS.c", 1321; spr_x(player_pos_x+8);
 7094                        		__ld.wm		_player_pos_x
         01:C507  AD D2 24   			lda.l	_player_pos_x
         01:C50A  AC D3 24   			ldy.h	_player_pos_x
 7095                        		__add.wi	8
         01:C50D  18         			clc
         01:C50E  69 08      			adc.l	#8
         01:C510  90 01      			bcc	!+
         01:C512  C8         			iny
         01:C513             	!:
 7096                        		__call		_spr_x.1
         01:C513  20 0A E8   			call	_spr_x.1
 7097                        	
 7098                        		.dbg	line,	"include\routines_LEVELS.c", 1322; spr_y(player_pos_y+16);
 7099                        		__ld.wm		_player_pos_y
         01:C516  AD D4 24   			lda.l	_player_pos_y
         01:C519  AC D5 24   			ldy.h	_player_pos_y
 7100                        		__add.wi	16
         01:C51C  18         			clc
         01:C51D  69 10      			adc.l	#16
         01:C51F  90 01      			bcc	!+
         01:C521  C8         			iny
         01:C522             	!:
 7101                        		__call		_spr_y.1
         01:C522  20 19 E8   			call	_spr_y.1
 7102                        	
 7103                        		.dbg	line,	"include\routines_LEVELS.c", 1323; }
 7104                        	
 7105                        		.dbg	line,	"include\routines_LEVELS.c", 1326; else if(player_counter_anim == 11)
 7106                        		__bra		.LL248
         01:C525  4C 28 C6   			bra	.LL248
 7107    01:C528             	.LL247:
 7108                        		__ld.umq	_player_counter_anim
         01:C528  AD 19 23   			lda	_player_counter_anim
 7109                        		__equ_b.uiq	11
         01:C52B  C9 0B      			cmp	#11
         01:C52D  F0 01      			beq	!+
         01:C52F  18         			clc
         01:C530             	!:
 7110                        		__bfalse	.LL249
         01:C530  90 48      			bcc	.LL249
 7111                        	
 7112                        		.dbg	line,	"include\routines_LEVELS.c", 1327; {
 7113                        	
 7114                        		.dbg	line,	"include\routines_LEVELS.c", 1328; spr_pattern(PLAYER_WALK_4_VRAM_ADR);
 7115                        		__ld.wi		6656
         01:C532  62         			cla
         01:C533  A0 1A      			ldy.h	#6656
 7116                        		__call		_spr_pattern.1
         01:C535  20 26 E8   			call	_spr_pattern.1
 7117                        	
 7118                        		.dbg	line,	"include\routines_LEVELS.c", 1330; spr_set(weapon_id);
 7119                        		__ld.umq	_weapon_id
         01:C538  AD 22 23   			lda	_weapon_id
 7120                        		__call		_spr_set.1
         01:C53B  20 DD E7   			call	_spr_set.1
 7121                        	
 7122                        		.dbg	line,	"include\routines_LEVELS.c", 1331; spr_y(player_pos_y+14);
 7123                        		__ld.wm		_player_pos_y
         01:C53E  AD D4 24   			lda.l	_player_pos_y
         01:C541  AC D5 24   			ldy.h	_player_pos_y
 7124                        		__add.wi	14
         01:C544  18         			clc
         01:C545  69 0E      			adc.l	#14
         01:C547  90 01      			bcc	!+
         01:C549  C8         			iny
         01:C54A             	!:
 7125                        		__call		_spr_y.1
         01:C54A  20 19 E8   			call	_spr_y.1
 7126                        	
 7127                        		.dbg	line,	"include\routines_LEVELS.c", 1333; if(player_axis == AXIS_RIGHT)
 7128                        		__not.um	_player_axis
         01:C54D  AD 17 23   			lda	_player_axis
         01:C550  18         			clc
         01:C551  D0 01      			bne	!+
         01:C553  38         			sec
         01:C554             	!:
 7129                        		__bfalse	.LL250
         01:C554  90 12      			bcc	.LL250
 7130                        	
 7131                        		.dbg	line,	"include\routines_LEVELS.c", 1334; {
 7132                        	
 7133                        		.dbg	line,	"include\routines_LEVELS.c", 1335; spr_x(player_pos_x+12);
 7134                        		__ld.wm		_player_pos_x
         01:C556  AD D2 24   			lda.l	_player_pos_x
         01:C559  AC D3 24   			ldy.h	_player_pos_x
 7135                        		__add.wi	12
         01:C55C  18         			clc
         01:C55D  69 0C      			adc.l	#12
         01:C55F  90 01      			bcc	!+
         01:C561  C8         			iny
         01:C562             	!:
 7136                        		__call		_spr_x.1
         01:C562  20 0A E8   			call	_spr_x.1
 7137                        	
 7138                        		.dbg	line,	"include\routines_LEVELS.c", 1336; }
 7139                        	
 7140                        		.dbg	line,	"include\routines_LEVELS.c", 1338; else
 7141                        		__bra		.LL251
         01:C565  4C 28 C6   			bra	.LL251
 7142    01:C568             	.LL250:
 7143                        	
 7144                        		.dbg	line,	"include\routines_LEVELS.c", 1339; {
 7145                        	
 7146                        		.dbg	line,	"include\routines_LEVELS.c", 1340; spr_x(player_pos_x+4);
 7147                        		__ld.wm		_player_pos_x
         01:C568  AD D2 24   			lda.l	_player_pos_x
         01:C56B  AC D3 24   			ldy.h	_player_pos_x
 7148                        		__add.wi	4
         01:C56E  18         			clc
         01:C56F  69 04      			adc.l	#4
         01:C571  90 01      			bcc	!+
         01:C573  C8         			iny
         01:C574             	!:
 7149                        		__call		_spr_x.1
         01:C574  20 0A E8   			call	_spr_x.1
 7150                        	
 7151                        		.dbg	line,	"include\routines_LEVELS.c", 1341; }
 7152    01:C577             	.LL251	.alias		.LL252
 7153                        	
 7154                        		.dbg	line,	"include\routines_LEVELS.c", 1342; }
 7155                        	
 7156                        		.dbg	line,	"include\routines_LEVELS.c", 1345; else if(player_counter_anim == 14)
 7157                        		__bra		.LL252
         01:C577  4C 28 C6   			bra	.LL252
 7158    01:C57A             	.LL249:
 7159                        		__ld.umq	_player_counter_anim
         01:C57A  AD 19 23   			lda	_player_counter_anim
 7160                        		__equ_b.uiq	14
         01:C57D  C9 0E      			cmp	#14
         01:C57F  F0 01      			beq	!+
         01:C581  18         			clc
         01:C582             	!:
 7161                        		__bfalse	.LL253
         01:C582  90 44      			bcc	.LL253
 7162                        	
 7163                        		.dbg	line,	"include\routines_LEVELS.c", 1346; {
 7164                        	
 7165                        		.dbg	line,	"include\routines_LEVELS.c", 1347; spr_pattern(PLAYER_WALK_5_VRAM_ADR);
 7166                        		__ld.wi		6912
         01:C584  62         			cla
         01:C585  A0 1B      			ldy.h	#6912
 7167                        		__call		_spr_pattern.1
         01:C587  20 26 E8   			call	_spr_pattern.1
 7168                        	
 7169                        		.dbg	line,	"include\routines_LEVELS.c", 1349; spr_set(weapon_id);
 7170                        		__ld.umq	_weapon_id
         01:C58A  AD 22 23   			lda	_weapon_id
 7171                        		__call		_spr_set.1
         01:C58D  20 DD E7   			call	_spr_set.1
 7172                        	
 7173                        		.dbg	line,	"include\routines_LEVELS.c", 1350; spr_y(player_pos_y+12);
 7174                        		__ld.wm		_player_pos_y
         01:C590  AD D4 24   			lda.l	_player_pos_y
         01:C593  AC D5 24   			ldy.h	_player_pos_y
 7175                        		__add.wi	12
         01:C596  18         			clc
         01:C597  69 0C      			adc.l	#12
         01:C599  90 01      			bcc	!+
         01:C59B  C8         			iny
         01:C59C             	!:
 7176                        		__call		_spr_y.1
         01:C59C  20 19 E8   			call	_spr_y.1
 7177                        	
 7178                        		.dbg	line,	"include\routines_LEVELS.c", 1352; if(player_axis == AXIS_RIGHT)
 7179                        		__not.um	_player_axis
         01:C59F  AD 17 23   			lda	_player_axis
         01:C5A2  18         			clc
         01:C5A3  D0 01      			bne	!+
         01:C5A5  38         			sec
         01:C5A6             	!:
 7180                        		__bfalse	.LL254
         01:C5A6  90 11      			bcc	.LL254
 7181                        	
 7182                        		.dbg	line,	"include\routines_LEVELS.c", 1353; {
 7183                        	
 7184                        		.dbg	line,	"include\routines_LEVELS.c", 1354; spr_x(player_pos_x+15);
 7185                        		__ld.wm		_player_pos_x
         01:C5A8  AD D2 24   			lda.l	_player_pos_x
         01:C5AB  AC D3 24   			ldy.h	_player_pos_x
 7186                        		__add.wi	15
         01:C5AE  18         			clc
         01:C5AF  69 0F      			adc.l	#15
         01:C5B1  90 01      			bcc	!+
         01:C5B3  C8         			iny
         01:C5B4             	!:
 7187                        		__call		_spr_x.1
         01:C5B4  20 0A E8   			call	_spr_x.1
 7188                        	
 7189                        		.dbg	line,	"include\routines_LEVELS.c", 1355; }
 7190                        	
 7191                        		.dbg	line,	"include\routines_LEVELS.c", 1357; else
 7192                        		__bra		.LL255
         01:C5B7  80 6F      			bra	.LL255
 7193    01:C5B9             	.LL254:
 7194                        	
 7195                        		.dbg	line,	"include\routines_LEVELS.c", 1358; {
 7196                        	
 7197                        		.dbg	line,	"include\routines_LEVELS.c", 1359; spr_x(player_pos_x+1);
 7198                        		__ld.wm		_player_pos_x
         01:C5B9  AD D2 24   			lda.l	_player_pos_x
         01:C5BC  AC D3 24   			ldy.h	_player_pos_x
 7199                        		__add.wi	1
         01:C5BF  1A         			inc	a
         01:C5C0  D0 01      			bne	!+
         01:C5C2  C8         			iny
         01:C5C3             	!:
 7200                        		__call		_spr_x.1
         01:C5C3  20 0A E8   			call	_spr_x.1
 7201                        	
 7202                        		.dbg	line,	"include\routines_LEVELS.c", 1360; }
 7203    01:C5C6             	.LL255	.alias		.LL256
 7204                        	
 7205                        		.dbg	line,	"include\routines_LEVELS.c", 1361; }
 7206                        	
 7207                        		.dbg	line,	"include\routines_LEVELS.c", 1364; else if(player_counter_anim == 17)
 7208                        		__bra		.LL256
         01:C5C6  80 60      			bra	.LL256
 7209    01:C5C8             	.LL253:
 7210                        		__ld.umq	_player_counter_anim
         01:C5C8  AD 19 23   			lda	_player_counter_anim
 7211                        		__equ_b.uiq	17
         01:C5CB  C9 11      			cmp	#17
         01:C5CD  F0 01      			beq	!+
         01:C5CF  18         			clc
         01:C5D0             	!:
 7212                        		__bfalse	.LL257
         01:C5D0  90 46      			bcc	.LL257
 7213                        	
 7214                        		.dbg	line,	"include\routines_LEVELS.c", 1365; {
 7215                        	
 7216                        		.dbg	line,	"include\routines_LEVELS.c", 1366; spr_pattern(PLAYER_WALK_6_VRAM_ADR);
 7217                        		__ld.wi		7168
         01:C5D2  62         			cla
         01:C5D3  A0 1C      			ldy.h	#7168
 7218                        		__call		_spr_pattern.1
         01:C5D5  20 26 E8   			call	_spr_pattern.1
 7219                        	
 7220                        		.dbg	line,	"include\routines_LEVELS.c", 1368; spr_set(weapon_id);
 7221                        		__ld.umq	_weapon_id
         01:C5D8  AD 22 23   			lda	_weapon_id
 7222                        		__call		_spr_set.1
         01:C5DB  20 DD E7   			call	_spr_set.1
 7223                        	
 7224                        		.dbg	line,	"include\routines_LEVELS.c", 1369; spr_y(player_pos_y+14);
 7225                        		__ld.wm		_player_pos_y
         01:C5DE  AD D4 24   			lda.l	_player_pos_y
         01:C5E1  AC D5 24   			ldy.h	_player_pos_y
 7226                        		__add.wi	14
         01:C5E4  18         			clc
         01:C5E5  69 0E      			adc.l	#14
         01:C5E7  90 01      			bcc	!+
         01:C5E9  C8         			iny
         01:C5EA             	!:
 7227                        		__call		_spr_y.1
         01:C5EA  20 19 E8   			call	_spr_y.1
 7228                        	
 7229                        		.dbg	line,	"include\routines_LEVELS.c", 1371; if(player_axis == AXIS_RIGHT)
 7230                        		__not.um	_player_axis
         01:C5ED  AD 17 23   			lda	_player_axis
         01:C5F0  18         			clc
         01:C5F1  D0 01      			bne	!+
         01:C5F3  38         			sec
         01:C5F4             	!:
 7231                        		__bfalse	.LL258
         01:C5F4  90 11      			bcc	.LL258
 7232                        	
 7233                        		.dbg	line,	"include\routines_LEVELS.c", 1372; {
 7234                        	
 7235                        		.dbg	line,	"include\routines_LEVELS.c", 1373; spr_x(player_pos_x+12);
 7236                        		__ld.wm		_player_pos_x
         01:C5F6  AD D2 24   			lda.l	_player_pos_x
         01:C5F9  AC D3 24   			ldy.h	_player_pos_x
 7237                        		__add.wi	12
         01:C5FC  18         			clc
         01:C5FD  69 0C      			adc.l	#12
         01:C5FF  90 01      			bcc	!+
         01:C601  C8         			iny
         01:C602             	!:
 7238                        		__call		_spr_x.1
         01:C602  20 0A E8   			call	_spr_x.1
 7239                        	
 7240                        		.dbg	line,	"include\routines_LEVELS.c", 1374; }
 7241                        	
 7242                        		.dbg	line,	"include\routines_LEVELS.c", 1376; else
 7243                        		__bra		.LL259
         01:C605  80 21      			bra	.LL259
 7244    01:C607             	.LL258:
 7245                        	
 7246                        		.dbg	line,	"include\routines_LEVELS.c", 1377; {
 7247                        	
 7248                        		.dbg	line,	"include\routines_LEVELS.c", 1378; spr_x(player_pos_x+4);
 7249                        		__ld.wm		_player_pos_x
         01:C607  AD D2 24   			lda.l	_player_pos_x
         01:C60A  AC D3 24   			ldy.h	_player_pos_x
 7250                        		__add.wi	4
         01:C60D  18         			clc
         01:C60E  69 04      			adc.l	#4
         01:C610  90 01      			bcc	!+
         01:C612  C8         			iny
         01:C613             	!:
 7251                        		__call		_spr_x.1
         01:C613  20 0A E8   			call	_spr_x.1
 7252                        	
 7253                        		.dbg	line,	"include\routines_LEVELS.c", 1379; } 
 7254    01:C616             	.LL259	.alias		.LL260
 7255                        	
 7256                        		.dbg	line,	"include\routines_LEVELS.c", 1380; }
 7257                        	
 7258                        		.dbg	line,	"include\routines_LEVELS.c", 1383; else if(player_counter_anim == 18)
 7259                        		__bra		.LL260
         01:C616  80 10      			bra	.LL260
 7260    01:C618             	.LL257:
 7261                        		__ld.umq	_player_counter_anim
         01:C618  AD 19 23   			lda	_player_counter_anim
 7262                        		__equ_b.uiq	18
         01:C61B  C9 12      			cmp	#18
         01:C61D  F0 01      			beq	!+
         01:C61F  18         			clc
         01:C620             	!:
 7263                        		__bfalse	.LL261
         01:C620  90 06      			bcc	.LL261
 7264                        	
 7265                        		.dbg	line,	"include\routines_LEVELS.c", 1384; {
 7266                        	
 7267                        		.dbg	line,	"include\routines_LEVELS.c", 1385; player_counter_anim = 0;
 7268                        		__st.umiq	0, _player_counter_anim
         01:C622  9C 19 23   			stz	_player_counter_anim
 7269                        	
 7270                        		.dbg	line,	"include\routines_LEVELS.c", 1387; return;
 7271                        		__bra		.LL214
         01:C625  4C 3D DD   			bra	.LL214
 7272                        	
 7273                        		.dbg	line,	"include\routines_LEVELS.c", 1388; }
 7274                        	
 7275                        		.dbg	line,	"include\routines_LEVELS.c", 1391; player_counter_anim += 1;
 7276    01:C628             	.LL261:
 7277    01:C628             	.LL260:
 7278    01:C628             	.LL256:
 7279    01:C628             	.LL252:
 7280    01:C628             	.LL248:
 7281    01:C628             	.LL246:
 7282    01:C628             	.LL242:
 7283    01:C628             	.LL238:
 7284    01:C628             	.LL234:
 7285                        		__add_st.umiq	1, _player_counter_anim
         01:C628  EE 19 23   			inc	_player_counter_anim
 7286                        	
 7287                        		.dbg	line,	"include\routines_LEVELS.c", 1393; }
 7288                        	
 7289                        		.dbg	line,	"include\routines_LEVELS.c", 1396; else if(player_state == STATE_ATTACK)
 7290                        		__bra		.LL262
         01:C62B  4C 3D DD   			bra	.LL262
 7291    01:C62E             	.LL220:
 7292                        		__ld.umq	_player_state
         01:C62E  AD 16 23   			lda	_player_state
 7293                        		__equ_b.uiq	2
         01:C631  C9 02      			cmp	#2
         01:C633  F0 01      			beq	!+
         01:C635  18         			clc
         01:C636             	!:
 7294                        		__bfalse	.LL263
         01:C636  B0 03 4C CC			bcc	.LL263
         01:C63A  C8          
 7295                        	
 7296                        		.dbg	line,	"include\routines_LEVELS.c", 1397; {
 7297                        	
 7298                        		.dbg	line,	"include\routines_LEVELS.c", 1398; if(player_counter_attack == 0)
 7299                        		__not.um	_player_counter_attack
         01:C63B  AD 1C 23   			lda	_player_counter_attack
         01:C63E  18         			clc
         01:C63F  D0 01      			bne	!+
         01:C641  38         			sec
         01:C642             	!:
 7300                        		__bfalse	.LL264
         01:C642  90 53      			bcc	.LL264
 7301                        	
 7302                        		.dbg	line,	"include\routines_LEVELS.c", 1399; {
 7303                        	
 7304                        		.dbg	line,	"include\routines_LEVELS.c", 1400; spr_set(player_id);
 7305                        		__ld.umq	_player_id
         01:C644  AD 15 23   			lda	_player_id
 7306                        		__call		_spr_set.1
         01:C647  20 DD E7   			call	_spr_set.1
 7307                        	
 7308                        		.dbg	line,	"include\routines_LEVELS.c", 1401; spr_pattern(PLAYER_ATTACK_1_VRAM_ADR);
 7309                        		__ld.wi		9984
         01:C64A  62         			cla
         01:C64B  A0 27      			ldy.h	#9984
 7310                        		__call		_spr_pattern.1
         01:C64D  20 26 E8   			call	_spr_pattern.1
 7311                        	
 7312                        		.dbg	line,	"include\routines_LEVELS.c", 1403; spr_set(weapon_id);
 7313                        		__ld.umq	_weapon_id
         01:C650  AD 22 23   			lda	_weapon_id
 7314                        		__call		_spr_set.1
         01:C653  20 DD E7   			call	_spr_set.1
 7315                        	
 7316                        		.dbg	line,	"include\routines_LEVELS.c", 1404; spr_pattern(WEAPON_ATTACK_1_VRAM_ADRESS);
 7317                        		__ld.wi		5376
         01:C656  62         			cla
         01:C657  A0 15      			ldy.h	#5376
 7318                        		__call		_spr_pattern.1
         01:C659  20 26 E8   			call	_spr_pattern.1
 7319                        	
 7320                        		.dbg	line,	"include\routines_LEVELS.c", 1406; if(player_axis == AXIS_RIGHT)
 7321                        		__not.um	_player_axis
         01:C65C  AD 17 23   			lda	_player_axis
         01:C65F  18         			clc
         01:C660  D0 01      			bne	!+
         01:C662  38         			sec
         01:C663             	!:
 7322                        		__bfalse	.LL265
         01:C663  90 11      			bcc	.LL265
 7323                        	
 7324                        		.dbg	line,	"include\routines_LEVELS.c", 1407; {
 7325                        	
 7326                        		.dbg	line,	"include\routines_LEVELS.c", 1408; spr_x(player_pos_x-13);
 7327                        		__ld.wm		_player_pos_x
         01:C665  AD D2 24   			lda.l	_player_pos_x
         01:C668  AC D3 24   			ldy.h	_player_pos_x
 7328                        		__sub.wi	13
         01:C66B  38         			sec
         01:C66C  E9 0D      			sbc.l	#13
         01:C66E  B0 01      			bcs	!+
         01:C670  88         			dey
         01:C671             	!:
 7329                        		__call		_spr_x.1
         01:C671  20 0A E8   			call	_spr_x.1
 7330                        	
 7331                        		.dbg	line,	"include\routines_LEVELS.c", 1409; }
 7332                        	
 7333                        		.dbg	line,	"include\routines_LEVELS.c", 1411; else
 7334                        		__bra		.LL266
         01:C674  80 0F      			bra	.LL266
 7335    01:C676             	.LL265:
 7336                        	
 7337                        		.dbg	line,	"include\routines_LEVELS.c", 1412; {
 7338                        	
 7339                        		.dbg	line,	"include\routines_LEVELS.c", 1413; spr_x(player_pos_x+29);
 7340                        		__ld.wm		_player_pos_x
         01:C676  AD D2 24   			lda.l	_player_pos_x
         01:C679  AC D3 24   			ldy.h	_player_pos_x
 7341                        		__add.wi	29
         01:C67C  18         			clc
         01:C67D  69 1D      			adc.l	#29
         01:C67F  90 01      			bcc	!+
         01:C681  C8         			iny
         01:C682             	!:
 7342                        		__call		_spr_x.1
         01:C682  20 0A E8   			call	_spr_x.1
 7343                        	
 7344                        		.dbg	line,	"include\routines_LEVELS.c", 1414; }
 7345    01:C685             	.LL266:
 7346                        	
 7347                        		.dbg	line,	"include\routines_LEVELS.c", 1416; spr_y(player_pos_y-8);
 7348                        		__ld.wm		_player_pos_y
         01:C685  AD D4 24   			lda.l	_player_pos_y
         01:C688  AC D5 24   			ldy.h	_player_pos_y
 7349                        		__sub.wi	8
         01:C68B  38         			sec
         01:C68C  E9 08      			sbc.l	#8
         01:C68E  B0 01      			bcs	!+
         01:C690  88         			dey
         01:C691             	!:
 7350                        		__call		_spr_y.1
         01:C691  20 19 E8   			call	_spr_y.1
 7351                        	
 7352                        		.dbg	line,	"include\routines_LEVELS.c", 1417; }
 7353                        	
 7354                        		.dbg	line,	"include\routines_LEVELS.c", 1419; else if(player_counter_attack == 6)
 7355                        		__bra		.LL267
         01:C694  4C C6 C8   			bra	.LL267
 7356    01:C697             	.LL264:
 7357                        		__ld.umq	_player_counter_attack
         01:C697  AD 1C 23   			lda	_player_counter_attack
 7358                        		__equ_b.uiq	6
         01:C69A  C9 06      			cmp	#6
         01:C69C  F0 01      			beq	!+
         01:C69E  18         			clc
         01:C69F             	!:
 7359                        		__bfalse	.LL268
         01:C69F  90 54      			bcc	.LL268
 7360                        	
 7361                        		.dbg	line,	"include\routines_LEVELS.c", 1420; {
 7362                        	
 7363                        		.dbg	line,	"include\routines_LEVELS.c", 1421; spr_set(player_id);
 7364                        		__ld.umq	_player_id
         01:C6A1  AD 15 23   			lda	_player_id
 7365                        		__call		_spr_set.1
         01:C6A4  20 DD E7   			call	_spr_set.1
 7366                        	
 7367                        		.dbg	line,	"include\routines_LEVELS.c", 1422; spr_pattern(PLAYER_ATTACK_2_VRAM_ADR);
 7368                        		__ld.wi		10240
         01:C6A7  62         			cla
         01:C6A8  A0 28      			ldy.h	#10240
 7369                        		__call		_spr_pattern.1
         01:C6AA  20 26 E8   			call	_spr_pattern.1
 7370                        	
 7371                        		.dbg	line,	"include\routines_LEVELS.c", 1424; spr_set(weapon_id);
 7372                        		__ld.umq	_weapon_id
         01:C6AD  AD 22 23   			lda	_weapon_id
 7373                        		__call		_spr_set.1
         01:C6B0  20 DD E7   			call	_spr_set.1
 7374                        	
 7375                        		.dbg	line,	"include\routines_LEVELS.c", 1425; spr_pattern(WEAPON_ATTACK_2_VRAM_ADRESS);
 7376                        		__ld.wi		5440
         01:C6B3  A9 40      			lda.l	#5440
         01:C6B5  A0 15      			ldy.h	#5440
 7377                        		__call		_spr_pattern.1
         01:C6B7  20 26 E8   			call	_spr_pattern.1
 7378                        	
 7379                        		.dbg	line,	"include\routines_LEVELS.c", 1427; if(player_axis == AXIS_RIGHT)
 7380                        		__not.um	_player_axis
         01:C6BA  AD 17 23   			lda	_player_axis
         01:C6BD  18         			clc
         01:C6BE  D0 01      			bne	!+
         01:C6C0  38         			sec
         01:C6C1             	!:
 7381                        		__bfalse	.LL269
         01:C6C1  90 11      			bcc	.LL269
 7382                        	
 7383                        		.dbg	line,	"include\routines_LEVELS.c", 1428; {
 7384                        	
 7385                        		.dbg	line,	"include\routines_LEVELS.c", 1429; spr_x(player_pos_x+32);
 7386                        		__ld.wm		_player_pos_x
         01:C6C3  AD D2 24   			lda.l	_player_pos_x
         01:C6C6  AC D3 24   			ldy.h	_player_pos_x
 7387                        		__add.wi	32
         01:C6C9  18         			clc
         01:C6CA  69 20      			adc.l	#32
         01:C6CC  90 01      			bcc	!+
         01:C6CE  C8         			iny
         01:C6CF             	!:
 7388                        		__call		_spr_x.1
         01:C6CF  20 0A E8   			call	_spr_x.1
 7389                        	
 7390                        		.dbg	line,	"include\routines_LEVELS.c", 1430; 
 7391                        	
 7392                        		.dbg	line,	"include\routines_LEVELS.c", 1431; }
 7393                        	
 7394                        		.dbg	line,	"include\routines_LEVELS.c", 1432; 
 7395                        	
 7396                        		.dbg	line,	"include\routines_LEVELS.c", 1433; else
 7397                        		__bra		.LL270
         01:C6D2  80 0F      			bra	.LL270
 7398    01:C6D4             	.LL269:
 7399                        	
 7400                        		.dbg	line,	"include\routines_LEVELS.c", 1434; {
 7401                        	
 7402                        		.dbg	line,	"include\routines_LEVELS.c", 1435; spr_x(player_pos_x-16);
 7403                        		__ld.wm		_player_pos_x
         01:C6D4  AD D2 24   			lda.l	_player_pos_x
         01:C6D7  AC D3 24   			ldy.h	_player_pos_x
 7404                        		__sub.wi	16
         01:C6DA  38         			sec
         01:C6DB  E9 10      			sbc.l	#16
         01:C6DD  B0 01      			bcs	!+
         01:C6DF  88         			dey
         01:C6E0             	!:
 7405                        		__call		_spr_x.1
         01:C6E0  20 0A E8   			call	_spr_x.1
 7406                        	
 7407                        		.dbg	line,	"include\routines_LEVELS.c", 1436; }
 7408    01:C6E3             	.LL270:
 7409                        	
 7410                        		.dbg	line,	"include\routines_LEVELS.c", 1438; spr_y(player_pos_y+6);
 7411                        		__ld.wm		_player_pos_y
         01:C6E3  AD D4 24   			lda.l	_player_pos_y
         01:C6E6  AC D5 24   			ldy.h	_player_pos_y
 7412                        		__add.wi	6
         01:C6E9  18         			clc
         01:C6EA  69 06      			adc.l	#6
         01:C6EC  90 01      			bcc	!+
         01:C6EE  C8         			iny
         01:C6EF             	!:
 7413                        		__call		_spr_y.1
         01:C6EF  20 19 E8   			call	_spr_y.1
 7414                        	
 7415                        		.dbg	line,	"include\routines_LEVELS.c", 1439; }
 7416                        	
 7417                        		.dbg	line,	"include\routines_LEVELS.c", 1441; else if(player_counter_attack == 7)
 7418                        		__bra		.LL271
         01:C6F2  4C C6 C8   			bra	.LL271
 7419    01:C6F5             	.LL268:
 7420                        		__ld.umq	_player_counter_attack
         01:C6F5  AD 1C 23   			lda	_player_counter_attack
 7421                        		__equ_b.uiq	7
         01:C6F8  C9 07      			cmp	#7
         01:C6FA  F0 01      			beq	!+
         01:C6FC  18         			clc
         01:C6FD             	!:
 7422                        		__bfalse	.LL272
         01:C6FD  90 66      			bcc	.LL272
 7423                        	
 7424                        		.dbg	line,	"include\routines_LEVELS.c", 1442; {
 7425                        	
 7426                        		.dbg	line,	"include\routines_LEVELS.c", 1443; spr_set(chain_id);
 7427                        		__ld.umq	_chain_id
         01:C6FF  AD 21 23   			lda	_chain_id
 7428                        		__call		_spr_set.1
         01:C702  20 DD E7   			call	_spr_set.1
 7429                        	
 7430                        		.dbg	line,	"include\routines_LEVELS.c", 1444; spr_y(player_pos_y);
 7431                        		__ld.wm		_player_pos_y
         01:C705  AD D4 24   			lda.l	_player_pos_y
         01:C708  AC D5 24   			ldy.h	_player_pos_y
 7432                        		__call		_spr_y.1
         01:C70B  20 19 E8   			call	_spr_y.1
 7433                        	
 7434                        		.dbg	line,	"include\routines_LEVELS.c", 1446; if(player_axis == AXIS_RIGHT)
 7435                        		__not.um	_player_axis
         01:C70E  AD 17 23   			lda	_player_axis
         01:C711  18         			clc
         01:C712  D0 01      			bne	!+
         01:C714  38         			sec
         01:C715             	!:
 7436                        		__bfalse	.LL273
         01:C715  90 27      			bcc	.LL273
 7437                        	
 7438                        		.dbg	line,	"include\routines_LEVELS.c", 1447; {
 7439                        	
 7440                        		.dbg	line,	"include\routines_LEVELS.c", 1448; spr_x(player_pos_x+32);
 7441                        		__ld.wm		_player_pos_x
         01:C717  AD D2 24   			lda.l	_player_pos_x
         01:C71A  AC D3 24   			ldy.h	_player_pos_x
 7442                        		__add.wi	32
         01:C71D  18         			clc
         01:C71E  69 20      			adc.l	#32
         01:C720  90 01      			bcc	!+
         01:C722  C8         			iny
         01:C723             	!:
 7443                        		__call		_spr_x.1
         01:C723  20 0A E8   			call	_spr_x.1
 7444                        	
 7445                        		.dbg	line,	"include\routines_LEVELS.c", 1450; spr_set(weapon_id);
 7446                        		__ld.umq	_weapon_id
         01:C726  AD 22 23   			lda	_weapon_id
 7447                        		__call		_spr_set.1
         01:C729  20 DD E7   			call	_spr_set.1
 7448                        	
 7449                        		.dbg	line,	"include\routines_LEVELS.c", 1451; spr_x(player_pos_x+48);
 7450                        		__ld.wm		_player_pos_x
         01:C72C  AD D2 24   			lda.l	_player_pos_x
         01:C72F  AC D3 24   			ldy.h	_player_pos_x
 7451                        		__add.wi	48
         01:C732  18         			clc
         01:C733  69 30      			adc.l	#48
         01:C735  90 01      			bcc	!+
         01:C737  C8         			iny
         01:C738             	!:
 7452                        		__call		_spr_x.1
         01:C738  20 0A E8   			call	_spr_x.1
 7453                        	
 7454                        		.dbg	line,	"include\routines_LEVELS.c", 1452; }
 7455                        	
 7456                        		.dbg	line,	"include\routines_LEVELS.c", 1453; 
 7457                        	
 7458                        		.dbg	line,	"include\routines_LEVELS.c", 1454; else
 7459                        		__bra		.LL274
         01:C73B  4C C6 C8   			bra	.LL274
 7460    01:C73E             	.LL273:
 7461                        	
 7462                        		.dbg	line,	"include\routines_LEVELS.c", 1455; {
 7463                        	
 7464                        		.dbg	line,	"include\routines_LEVELS.c", 1456; spr_x(player_pos_x-16);
 7465                        		__ld.wm		_player_pos_x
         01:C73E  AD D2 24   			lda.l	_player_pos_x
         01:C741  AC D3 24   			ldy.h	_player_pos_x
 7466                        		__sub.wi	16
         01:C744  38         			sec
         01:C745  E9 10      			sbc.l	#16
         01:C747  B0 01      			bcs	!+
         01:C749  88         			dey
         01:C74A             	!:
 7467                        		__call		_spr_x.1
         01:C74A  20 0A E8   			call	_spr_x.1
 7468                        	
 7469                        		.dbg	line,	"include\routines_LEVELS.c", 1458; spr_set(weapon_id);
 7470                        		__ld.umq	_weapon_id
         01:C74D  AD 22 23   			lda	_weapon_id
 7471                        		__call		_spr_set.1
         01:C750  20 DD E7   			call	_spr_set.1
 7472                        	
 7473                        		.dbg	line,	"include\routines_LEVELS.c", 1459; spr_x(player_pos_x-32);
 7474                        		__ld.wm		_player_pos_x
         01:C753  AD D2 24   			lda.l	_player_pos_x
         01:C756  AC D3 24   			ldy.h	_player_pos_x
 7475                        		__sub.wi	32
         01:C759  38         			sec
         01:C75A  E9 20      			sbc.l	#32
         01:C75C  B0 01      			bcs	!+
         01:C75E  88         			dey
         01:C75F             	!:
 7476                        		__call		_spr_x.1
         01:C75F  20 0A E8   			call	_spr_x.1
 7477                        	
 7478                        		.dbg	line,	"include\routines_LEVELS.c", 1460; }
 7479    01:C762             	.LL274	.alias		.LL275
 7480                        	
 7481                        		.dbg	line,	"include\routines_LEVELS.c", 1461; }
 7482                        	
 7483                        		.dbg	line,	"include\routines_LEVELS.c", 1463; else if(player_counter_attack == 8)
 7484                        		__bra		.LL275
         01:C762  4C C6 C8   			bra	.LL275
 7485    01:C765             	.LL272:
 7486                        		__ld.umq	_player_counter_attack
         01:C765  AD 1C 23   			lda	_player_counter_attack
 7487                        		__equ_b.uiq	8
         01:C768  C9 08      			cmp	#8
         01:C76A  F0 01      			beq	!+
         01:C76C  18         			clc
         01:C76D             	!:
 7488                        		__bfalse	.LL276
         01:C76D  90 6B      			bcc	.LL276
 7489                        	
 7490                        		.dbg	line,	"include\routines_LEVELS.c", 1464; {
 7491                        	
 7492                        		.dbg	line,	"include\routines_LEVELS.c", 1465; spr_set(chain_id+1);
 7493                        		__ld.um		_chain_id
         01:C76F  AD 21 23   			lda	_chain_id
         01:C772  C2         			cly
 7494                        		__add.wi	1
         01:C773  1A         			inc	a
         01:C774  D0 01      			bne	!+
         01:C776  C8         			iny
         01:C777             	!:
 7495                        		__call		_spr_set.1
         01:C777  20 DD E7   			call	_spr_set.1
 7496                        	
 7497                        		.dbg	line,	"include\routines_LEVELS.c", 1466; spr_y(player_pos_y);
 7498                        		__ld.wm		_player_pos_y
         01:C77A  AD D4 24   			lda.l	_player_pos_y
         01:C77D  AC D5 24   			ldy.h	_player_pos_y
 7499                        		__call		_spr_y.1
         01:C780  20 19 E8   			call	_spr_y.1
 7500                        	
 7501                        		.dbg	line,	"include\routines_LEVELS.c", 1468; if(player_axis == AXIS_RIGHT)
 7502                        		__not.um	_player_axis
         01:C783  AD 17 23   			lda	_player_axis
         01:C786  18         			clc
         01:C787  D0 01      			bne	!+
         01:C789  38         			sec
         01:C78A             	!:
 7503                        		__bfalse	.LL277
         01:C78A  90 27      			bcc	.LL277
 7504                        	
 7505                        		.dbg	line,	"include\routines_LEVELS.c", 1469; {
 7506                        	
 7507                        		.dbg	line,	"include\routines_LEVELS.c", 1470; spr_x(player_pos_x+48);
 7508                        		__ld.wm		_player_pos_x
         01:C78C  AD D2 24   			lda.l	_player_pos_x
         01:C78F  AC D3 24   			ldy.h	_player_pos_x
 7509                        		__add.wi	48
         01:C792  18         			clc
         01:C793  69 30      			adc.l	#48
         01:C795  90 01      			bcc	!+
         01:C797  C8         			iny
         01:C798             	!:
 7510                        		__call		_spr_x.1
         01:C798  20 0A E8   			call	_spr_x.1
 7511                        	
 7512                        		.dbg	line,	"include\routines_LEVELS.c", 1472; spr_set(weapon_id);
 7513                        		__ld.umq	_weapon_id
         01:C79B  AD 22 23   			lda	_weapon_id
 7514                        		__call		_spr_set.1
         01:C79E  20 DD E7   			call	_spr_set.1
 7515                        	
 7516                        		.dbg	line,	"include\routines_LEVELS.c", 1473; spr_x(player_pos_x+64);
 7517                        		__ld.wm		_player_pos_x
         01:C7A1  AD D2 24   			lda.l	_player_pos_x
         01:C7A4  AC D3 24   			ldy.h	_player_pos_x
 7518                        		__add.wi	64
         01:C7A7  18         			clc
         01:C7A8  69 40      			adc.l	#64
         01:C7AA  90 01      			bcc	!+
         01:C7AC  C8         			iny
         01:C7AD             	!:
 7519                        		__call		_spr_x.1
         01:C7AD  20 0A E8   			call	_spr_x.1
 7520                        	
 7521                        		.dbg	line,	"include\routines_LEVELS.c", 1474; }
 7522                        	
 7523                        		.dbg	line,	"include\routines_LEVELS.c", 1475; 
 7524                        	
 7525                        		.dbg	line,	"include\routines_LEVELS.c", 1476; else
 7526                        		__bra		.LL278
         01:C7B0  4C C6 C8   			bra	.LL278
 7527    01:C7B3             	.LL277:
 7528                        	
 7529                        		.dbg	line,	"include\routines_LEVELS.c", 1477; {
 7530                        	
 7531                        		.dbg	line,	"include\routines_LEVELS.c", 1478; spr_x(player_pos_x-32);
 7532                        		__ld.wm		_player_pos_x
         01:C7B3  AD D2 24   			lda.l	_player_pos_x
         01:C7B6  AC D3 24   			ldy.h	_player_pos_x
 7533                        		__sub.wi	32
         01:C7B9  38         			sec
         01:C7BA  E9 20      			sbc.l	#32
         01:C7BC  B0 01      			bcs	!+
         01:C7BE  88         			dey
         01:C7BF             	!:
 7534                        		__call		_spr_x.1
         01:C7BF  20 0A E8   			call	_spr_x.1
 7535                        	
 7536                        		.dbg	line,	"include\routines_LEVELS.c", 1480; spr_set(weapon_id);
 7537                        		__ld.umq	_weapon_id
         01:C7C2  AD 22 23   			lda	_weapon_id
 7538                        		__call		_spr_set.1
         01:C7C5  20 DD E7   			call	_spr_set.1
 7539                        	
 7540                        		.dbg	line,	"include\routines_LEVELS.c", 1481; spr_x(player_pos_x-48);
 7541                        		__ld.wm		_player_pos_x
         01:C7C8  AD D2 24   			lda.l	_player_pos_x
         01:C7CB  AC D3 24   			ldy.h	_player_pos_x
 7542                        		__sub.wi	48
         01:C7CE  38         			sec
         01:C7CF  E9 30      			sbc.l	#48
         01:C7D1  B0 01      			bcs	!+
         01:C7D3  88         			dey
         01:C7D4             	!:
 7543                        		__call		_spr_x.1
         01:C7D4  20 0A E8   			call	_spr_x.1
 7544                        	
 7545                        		.dbg	line,	"include\routines_LEVELS.c", 1482; }
 7546    01:C7D7             	.LL278	.alias		.LL279
 7547                        	
 7548                        		.dbg	line,	"include\routines_LEVELS.c", 1483; }
 7549                        	
 7550                        		.dbg	line,	"include\routines_LEVELS.c", 1485; else if(player_counter_attack == 9)
 7551                        		__bra		.LL279
         01:C7D7  4C C6 C8   			bra	.LL279
 7552    01:C7DA             	.LL276:
 7553                        		__ld.umq	_player_counter_attack
         01:C7DA  AD 1C 23   			lda	_player_counter_attack
 7554                        		__equ_b.uiq	9
         01:C7DD  C9 09      			cmp	#9
         01:C7DF  F0 01      			beq	!+
         01:C7E1  18         			clc
         01:C7E2             	!:
 7555                        		__bfalse	.LL280
         01:C7E2  90 6C      			bcc	.LL280
 7556                        	
 7557                        		.dbg	line,	"include\routines_LEVELS.c", 1486; {
 7558                        	
 7559                        		.dbg	line,	"include\routines_LEVELS.c", 1487; spr_set(chain_id+2);
 7560                        		__ld.um		_chain_id
         01:C7E4  AD 21 23   			lda	_chain_id
         01:C7E7  C2         			cly
 7561                        		__add.wi	2
         01:C7E8  18         			clc
         01:C7E9  69 02      			adc.l	#2
         01:C7EB  90 01      			bcc	!+
         01:C7ED  C8         			iny
         01:C7EE             	!:
 7562                        		__call		_spr_set.1
         01:C7EE  20 DD E7   			call	_spr_set.1
 7563                        	
 7564                        		.dbg	line,	"include\routines_LEVELS.c", 1488; spr_y(player_pos_y);
 7565                        		__ld.wm		_player_pos_y
         01:C7F1  AD D4 24   			lda.l	_player_pos_y
         01:C7F4  AC D5 24   			ldy.h	_player_pos_y
 7566                        		__call		_spr_y.1
         01:C7F7  20 19 E8   			call	_spr_y.1
 7567                        	
 7568                        		.dbg	line,	"include\routines_LEVELS.c", 1490; if(player_axis == AXIS_RIGHT)
 7569                        		__not.um	_player_axis
         01:C7FA  AD 17 23   			lda	_player_axis
         01:C7FD  18         			clc
         01:C7FE  D0 01      			bne	!+
         01:C800  38         			sec
         01:C801             	!:
 7570                        		__bfalse	.LL281
         01:C801  90 27      			bcc	.LL281
 7571                        	
 7572                        		.dbg	line,	"include\routines_LEVELS.c", 1491; {
 7573                        	
 7574                        		.dbg	line,	"include\routines_LEVELS.c", 1492; spr_x(player_pos_x+64);
 7575                        		__ld.wm		_player_pos_x
         01:C803  AD D2 24   			lda.l	_player_pos_x
         01:C806  AC D3 24   			ldy.h	_player_pos_x
 7576                        		__add.wi	64
         01:C809  18         			clc
         01:C80A  69 40      			adc.l	#64
         01:C80C  90 01      			bcc	!+
         01:C80E  C8         			iny
         01:C80F             	!:
 7577                        		__call		_spr_x.1
         01:C80F  20 0A E8   			call	_spr_x.1
 7578                        	
 7579                        		.dbg	line,	"include\routines_LEVELS.c", 1494; spr_set(weapon_id);
 7580                        		__ld.umq	_weapon_id
         01:C812  AD 22 23   			lda	_weapon_id
 7581                        		__call		_spr_set.1
         01:C815  20 DD E7   			call	_spr_set.1
 7582                        	
 7583                        		.dbg	line,	"include\routines_LEVELS.c", 1495; spr_x(player_pos_x+80);
 7584                        		__ld.wm		_player_pos_x
         01:C818  AD D2 24   			lda.l	_player_pos_x
         01:C81B  AC D3 24   			ldy.h	_player_pos_x
 7585                        		__add.wi	80
         01:C81E  18         			clc
         01:C81F  69 50      			adc.l	#80
         01:C821  90 01      			bcc	!+
         01:C823  C8         			iny
         01:C824             	!:
 7586                        		__call		_spr_x.1
         01:C824  20 0A E8   			call	_spr_x.1
 7587                        	
 7588                        		.dbg	line,	"include\routines_LEVELS.c", 1496; }
 7589                        	
 7590                        		.dbg	line,	"include\routines_LEVELS.c", 1497; 
 7591                        	
 7592                        		.dbg	line,	"include\routines_LEVELS.c", 1498; else
 7593                        		__bra		.LL282
         01:C827  4C C6 C8   			bra	.LL282
 7594    01:C82A             	.LL281:
 7595                        	
 7596                        		.dbg	line,	"include\routines_LEVELS.c", 1499; {
 7597                        	
 7598                        		.dbg	line,	"include\routines_LEVELS.c", 1500; spr_x(player_pos_x-48);
 7599                        		__ld.wm		_player_pos_x
         01:C82A  AD D2 24   			lda.l	_player_pos_x
         01:C82D  AC D3 24   			ldy.h	_player_pos_x
 7600                        		__sub.wi	48
         01:C830  38         			sec
         01:C831  E9 30      			sbc.l	#48
         01:C833  B0 01      			bcs	!+
         01:C835  88         			dey
         01:C836             	!:
 7601                        		__call		_spr_x.1
         01:C836  20 0A E8   			call	_spr_x.1
 7602                        	
 7603                        		.dbg	line,	"include\routines_LEVELS.c", 1502; spr_set(weapon_id);
 7604                        		__ld.umq	_weapon_id
         01:C839  AD 22 23   			lda	_weapon_id
 7605                        		__call		_spr_set.1
         01:C83C  20 DD E7   			call	_spr_set.1
 7606                        	
 7607                        		.dbg	line,	"include\routines_LEVELS.c", 1503; spr_x(player_pos_x-64);
 7608                        		__ld.wm		_player_pos_x
         01:C83F  AD D2 24   			lda.l	_player_pos_x
         01:C842  AC D3 24   			ldy.h	_player_pos_x
 7609                        		__sub.wi	64
         01:C845  38         			sec
         01:C846  E9 40      			sbc.l	#64
         01:C848  B0 01      			bcs	!+
         01:C84A  88         			dey
         01:C84B             	!:
 7610                        		__call		_spr_x.1
         01:C84B  20 0A E8   			call	_spr_x.1
 7611                        	
 7612                        		.dbg	line,	"include\routines_LEVELS.c", 1504; }
 7613    01:C84E             	.LL282	.alias		.LL283
 7614                        	
 7615                        		.dbg	line,	"include\routines_LEVELS.c", 1505; }
 7616                        	
 7617                        		.dbg	line,	"include\routines_LEVELS.c", 1507; else if(player_counter_attack == 23)
 7618                        		__bra		.LL283
         01:C84E  80 76      			bra	.LL283
 7619    01:C850             	.LL280:
 7620                        		__ld.umq	_player_counter_attack
         01:C850  AD 1C 23   			lda	_player_counter_attack
 7621                        		__equ_b.uiq	23
         01:C853  C9 17      			cmp	#23
         01:C855  F0 01      			beq	!+
         01:C857  18         			clc
         01:C858             	!:
 7622                        		__bfalse	.LL284
         01:C858  90 6C      			bcc	.LL284
 7623                        	
 7624                        		.dbg	line,	"include\routines_LEVELS.c", 1508; {
 7625                        	
 7626                        		.dbg	line,	"include\routines_LEVELS.c", 1509; spr_set(chain_id);
 7627                        		__ld.umq	_chain_id
         01:C85A  AD 21 23   			lda	_chain_id
 7628                        		__call		_spr_set.1
         01:C85D  20 DD E7   			call	_spr_set.1
 7629                        	
 7630                        		.dbg	line,	"include\routines_LEVELS.c", 1510; spr_hide();
 7631                        		__call		_spr_hide
         01:C860  20 F8 E7   			call	_spr_hide
 7632                        	
 7633                        		.dbg	line,	"include\routines_LEVELS.c", 1512; spr_set(chain_id+1);
 7634                        		__ld.um		_chain_id
         01:C863  AD 21 23   			lda	_chain_id
         01:C866  C2         			cly
 7635                        		__add.wi	1
         01:C867  1A         			inc	a
         01:C868  D0 01      			bne	!+
         01:C86A  C8         			iny
         01:C86B             	!:
 7636                        		__call		_spr_set.1
         01:C86B  20 DD E7   			call	_spr_set.1
 7637                        	
 7638                        		.dbg	line,	"include\routines_LEVELS.c", 1513; spr_hide();
 7639                        		__call		_spr_hide
         01:C86E  20 F8 E7   			call	_spr_hide
 7640                        	
 7641                        		.dbg	line,	"include\routines_LEVELS.c", 1515; spr_set(chain_id+2);
 7642                        		__ld.um		_chain_id
         01:C871  AD 21 23   			lda	_chain_id
         01:C874  C2         			cly
 7643                        		__add.wi	2
         01:C875  18         			clc
         01:C876  69 02      			adc.l	#2
         01:C878  90 01      			bcc	!+
         01:C87A  C8         			iny
         01:C87B             	!:
 7644                        		__call		_spr_set.1
         01:C87B  20 DD E7   			call	_spr_set.1
 7645                        	
 7646                        		.dbg	line,	"include\routines_LEVELS.c", 1516; spr_hide();
 7647                        		__call		_spr_hide
         01:C87E  20 F8 E7   			call	_spr_hide
 7648                        	
 7649                        		.dbg	line,	"include\routines_LEVELS.c", 1518; spr_set(player_id);
 7650                        		__ld.umq	_player_id
         01:C881  AD 15 23   			lda	_player_id
 7651                        		__call		_spr_set.1
         01:C884  20 DD E7   			call	_spr_set.1
 7652                        	
 7653                        		.dbg	line,	"include\routines_LEVELS.c", 1519; spr_pattern(PLAYER_IDLE_VRAM_ADR);
 7654                        		__ld.wi		5632
         01:C887  62         			cla
         01:C888  A0 16      			ldy.h	#5632
 7655                        		__call		_spr_pattern.1
         01:C88A  20 26 E8   			call	_spr_pattern.1
 7656                        	
 7657                        		.dbg	line,	"include\routines_LEVELS.c", 1521; spr_set(weapon_id);
 7658                        		__ld.umq	_weapon_id
         01:C88D  AD 22 23   			lda	_weapon_id
 7659                        		__call		_spr_set.1
         01:C890  20 DD E7   			call	_spr_set.1
 7660                        	
 7661                        		.dbg	line,	"include\routines_LEVELS.c", 1522; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
 7662                        		__ld.wi		5184
         01:C893  A9 40      			lda.l	#5184
         01:C895  A0 14      			ldy.h	#5184
 7663                        		__call		_spr_pattern.1
         01:C897  20 26 E8   			call	_spr_pattern.1
 7664                        	
 7665                        		.dbg	line,	"include\routines_LEVELS.c", 1523; spr_x(player_pos_x+8);
 7666                        		__ld.wm		_player_pos_x
         01:C89A  AD D2 24   			lda.l	_player_pos_x
         01:C89D  AC D3 24   			ldy.h	_player_pos_x
 7667                        		__add.wi	8
         01:C8A0  18         			clc
         01:C8A1  69 08      			adc.l	#8
         01:C8A3  90 01      			bcc	!+
         01:C8A5  C8         			iny
         01:C8A6             	!:
 7668                        		__call		_spr_x.1
         01:C8A6  20 0A E8   			call	_spr_x.1
 7669                        	
 7670                        		.dbg	line,	"include\routines_LEVELS.c", 1524; spr_y(player_pos_y+16);
 7671                        		__ld.wm		_player_pos_y
         01:C8A9  AD D4 24   			lda.l	_player_pos_y
         01:C8AC  AC D5 24   			ldy.h	_player_pos_y
 7672                        		__add.wi	16
         01:C8AF  18         			clc
         01:C8B0  69 10      			adc.l	#16
         01:C8B2  90 01      			bcc	!+
         01:C8B4  C8         			iny
         01:C8B5             	!:
 7673                        		__call		_spr_y.1
         01:C8B5  20 19 E8   			call	_spr_y.1
 7674                        	
 7675                        		.dbg	line,	"include\routines_LEVELS.c", 1526; player_attack = FALSE;
 7676                        		__st.umiq	0, _player_attack
         01:C8B8  9C 1E 23   			stz	_player_attack
 7677                        	
 7678                        		.dbg	line,	"include\routines_LEVELS.c", 1527; player_counter_attack = 1;
 7679                        		__st.umiq	1, _player_counter_attack
         01:C8BB  A9 01      			lda.l	#1
         01:C8BD  8D 1C 23   			sta	_player_counter_attack
 7680                        	
 7681                        		.dbg	line,	"include\routines_LEVELS.c", 1528; player_state = STATE_IDLE;
 7682                        		__st.umiq	0, _player_state
         01:C8C0  9C 16 23   			stz	_player_state
 7683                        	
 7684                        		.dbg	line,	"include\routines_LEVELS.c", 1529; return;
 7685                        		__bra		.LL214
         01:C8C3  4C 3D DD   			bra	.LL214
 7686                        	
 7687                        		.dbg	line,	"include\routines_LEVELS.c", 1530; }
 7688                        	
 7689                        		.dbg	line,	"include\routines_LEVELS.c", 1533; player_counter_attack += 1;
 7690    01:C8C6             	.LL284:
 7691    01:C8C6             	.LL283:
 7692    01:C8C6             	.LL279:
 7693    01:C8C6             	.LL275:
 7694    01:C8C6             	.LL271:
 7695    01:C8C6             	.LL267:
 7696                        		__add_st.umiq	1, _player_counter_attack
         01:C8C6  EE 1C 23   			inc	_player_counter_attack
 7697                        	
 7698                        		.dbg	line,	"include\routines_LEVELS.c", 1534; }
 7699                        	
 7700                        		.dbg	line,	"include\routines_LEVELS.c", 1537; else if(player_state == STATE_JUMP)
 7701                        		__bra		.LL285
         01:C8C9  4C 3D DD   			bra	.LL285
 7702    01:C8CC             	.LL263:
 7703                        		__ld.umq	_player_state
         01:C8CC  AD 16 23   			lda	_player_state
 7704                        		__equ_b.uiq	4
         01:C8CF  C9 04      			cmp	#4
         01:C8D1  F0 01      			beq	!+
         01:C8D3  18         			clc
         01:C8D4             	!:
 7705                        		__bfalse	.LL286
         01:C8D4  B0 03 4C F1			bcc	.LL286
         01:C8D8  CB          
 7706                        	
 7707                        		.dbg	line,	"include\routines_LEVELS.c", 1538; {
 7708                        	
 7709                        		.dbg	line,	"include\routines_LEVELS.c", 1539; unsigned char i;
 7710                        	
 7711                        		.dbg	line,	"include\routines_LEVELS.c", 1540; i = 1;
 7712                        		__st.umiq	1, __update_PLAYER_end - 1  /* i */
         01:C8D9  A9 01      			lda.l	#1
         01:C8DB  8D 0C 23   			sta	__update_PLAYER_end - 1
 7713                        	
 7714                        		.dbg	line,	"include\routines_LEVELS.c", 1543; if(player_counter_anim == 0)
 7715                        		__not.um	_player_counter_anim
         01:C8DE  AD 19 23   			lda	_player_counter_anim
         01:C8E1  18         			clc
         01:C8E2  D0 01      			bne	!+
         01:C8E4  38         			sec
         01:C8E5             	!:
 7716                        		__bfalse	.LL287
         01:C8E5  90 11      			bcc	.LL287
 7717                        	
 7718                        		.dbg	line,	"include\routines_LEVELS.c", 1544; {
 7719                        	
 7720                        		.dbg	line,	"include\routines_LEVELS.c", 1545; spr_set(player_id);
 7721                        		__ld.umq	_player_id
         01:C8E7  AD 15 23   			lda	_player_id
 7722                        		__call		_spr_set.1
         01:C8EA  20 DD E7   			call	_spr_set.1
 7723                        	
 7724                        		.dbg	line,	"include\routines_LEVELS.c", 1546; spr_pattern(PLAYER_JUMP_VRAM_ADR);
 7725                        		__ld.wi		7424
         01:C8ED  62         			cla
         01:C8EE  A0 1D      			ldy.h	#7424
 7726                        		__call		_spr_pattern.1
         01:C8F0  20 26 E8   			call	_spr_pattern.1
 7727                        	
 7728                        		.dbg	line,	"include\routines_LEVELS.c", 1548; player_counter_anim = 1;
 7729                        		__st.umiq	1, _player_counter_anim
         01:C8F3  A9 01      			lda.l	#1
         01:C8F5  8D 19 23   			sta	_player_counter_anim
 7730                        	
 7731                        		.dbg	line,	"include\routines_LEVELS.c", 1549; }
 7732                        	
 7733                        		.dbg	line,	"include\routines_LEVELS.c", 1552; player_pos_y += TABLE_PLAYER_JUMP_V[player_index_jump];
 7734    01:C8F8             	.LL287:
 7735                        		__ldx.umq	_player_index_jump
         01:C8F8  AE 1A 23   			ldx	_player_index_jump
 7736                        		__ld.bax	_TABLE_PLAYER_JUMP_V
         01:C8FB  BD F9 60   			lda	_TABLE_PLAYER_JUMP_V, x
         01:C8FE  C2         			cly
         01:C8FF  10 01      			bpl	!+
         01:C901  88         			dey
         01:C902             	!:
 7737                        		__add_st.wmq	_player_pos_y
         01:C902  18         			clc
         01:C903  6D D4 24   			adc.l	_player_pos_y
         01:C906  8D D4 24   			sta.l	_player_pos_y
         01:C909  98         			tya
         01:C90A  6D D5 24   			adc.h	_player_pos_y
         01:C90D  8D D5 24   			sta.h	_player_pos_y
 7738                        	
 7739                        		.dbg	line,	"include\routines_LEVELS.c", 1554; // CHECK COLLISION WITH CEILING //
 7740                        	
 7741                        		.dbg	line,	"include\routines_LEVELS.c", 1555; check_BG( 15 , 8 );
 7742                        		__ld.wi		15
         01:C910  A9 0F      			lda.l	#15
         01:C912  C2         			cly
 7743                        		__pusharg.wr
         01:C913  A6 8D      			ldx	<__sp
         01:C915  CA         			dex
         01:C916  CA         			dex
         01:C917  95 08      			sta.l	<__stack, x
         01:C919  94 09      			sty.h	<__stack, x
         01:C91B  86 8D      			stx	<__sp
 7744                        		__ld.wi		8
         01:C91D  A9 08      			lda.l	#8
         01:C91F  C2         			cly
 7745                        		__pusharg.wr
         01:C920  A6 8D      			ldx	<__sp
         01:C922  CA         			dex
         01:C923  CA         			dex
         01:C924  95 08      			sta.l	<__stack, x
         01:C926  94 09      			sty.h	<__stack, x
         01:C928  86 8D      			stx	<__sp
 7746                        		__call		_check_BG
         01:C92A  20 6D FF   			call	_check_BG
 7747                        	
 7748                        		.dbg	line,	"include\routines_LEVELS.c", 1557; if(map_blk_flag == TILE_BG)
 7749                        		__ld.umq	_map_blk_flag
         01:C92D  AD AF 2B   			lda	_map_blk_flag
 7750                        		__equ_b.uiq	1
         01:C930  C9 01      			cmp	#1
         01:C932  F0 01      			beq	!+
         01:C934  18         			clc
         01:C935             	!:
 7751                        		__bfalse	.LL288
         01:C935  90 5A      			bcc	.LL288
 7752                        	
 7753                        		.dbg	line,	"include\routines_LEVELS.c", 1558; {
 7754                        	
 7755                        		.dbg	line,	"include\routines_LEVELS.c", 1559; for(i=1 ; i<8 ; i++)
 7756                        		__st.umiq	1, __update_PLAYER_end - 1  /* i */
         01:C937  A9 01      			lda.l	#1
         01:C939  8D 0C 23   			sta	__update_PLAYER_end - 1
 7757    01:C93C             	.LL289:
 7758                        		__ld.umq	__update_PLAYER_end - 1  /* i */
         01:C93C  AD 0C 23   			lda	__update_PLAYER_end - 1
 7759                        		__ult_b.uiq	8
         01:C93F  C9 08      			cmp	#8		; Subtract integer from A.
         01:C941  6A         			ror	a		; CC if A < integer.
         01:C942  49 80      			eor	#$80
         01:C944  2A         			rol	a
 7760                        		__btrue		.LL291
         01:C945  B0 07      			bcs	.LL291
 7761                        		__bra		.LL292
         01:C947  80 48      			bra	.LL292
 7762    01:C949             	.LL290:
 7763                        		__inc.umq	__update_PLAYER_end - 1  /* i */
         01:C949  EE 0C 23   			inc	__update_PLAYER_end - 1
 7764                        		__bra		.LL289
         01:C94C  80 EE      			bra	.LL289
 7765    01:C94E             	.LL291:
 7766                        	
 7767                        		.dbg	line,	"include\routines_LEVELS.c", 1560; {
 7768                        	
 7769                        		.dbg	line,	"include\routines_LEVELS.c", 1561; check_BG( 15 , 8 + i );
 7770                        		__ld.wi		15
         01:C94E  A9 0F      			lda.l	#15
         01:C950  C2         			cly
 7771                        		__pusharg.wr
         01:C951  A6 8D      			ldx	<__sp
         01:C953  CA         			dex
         01:C954  CA         			dex
         01:C955  95 08      			sta.l	<__stack, x
         01:C957  94 09      			sty.h	<__stack, x
         01:C959  86 8D      			stx	<__sp
 7772                        		__ld.wi		8
         01:C95B  A9 08      			lda.l	#8
         01:C95D  C2         			cly
 7773                        		__add.um	__update_PLAYER_end - 1  /* i */
         01:C95E  18         			clc
         01:C95F  6D 0C 23   			adc	__update_PLAYER_end - 1
         01:C962  90 01      			bcc	!+
         01:C964  C8         			iny
         01:C965             	!:
 7774                        		__pusharg.wr
         01:C965  A6 8D      			ldx	<__sp
         01:C967  CA         			dex
         01:C968  CA         			dex
         01:C969  95 08      			sta.l	<__stack, x
         01:C96B  94 09      			sty.h	<__stack, x
         01:C96D  86 8D      			stx	<__sp
 7775                        		__call		_check_BG
         01:C96F  20 6D FF   			call	_check_BG
 7776                        	
 7777                        		.dbg	line,	"include\routines_LEVELS.c", 1562; {
 7778                        	
 7779                        		.dbg	line,	"include\routines_LEVELS.c", 1563; if(map_blk_flag == TILE_EMPTY)
 7780                        		__not.um	_map_blk_flag
         01:C972  AD AF 2B   			lda	_map_blk_flag
         01:C975  18         			clc
         01:C976  D0 01      			bne	!+
         01:C978  38         			sec
         01:C979             	!:
 7781                        		__bfalse	.LL293
         01:C979  90 CE      			bcc	.LL293
 7782                        	
 7783                        		.dbg	line,	"include\routines_LEVELS.c", 1564; {
 7784                        	
 7785                        		.dbg	line,	"include\routines_LEVELS.c", 1565; player_pos_y += i;
 7786                        		__ld.um		__update_PLAYER_end - 1  /* i */
         01:C97B  AD 0C 23   			lda	__update_PLAYER_end - 1
         01:C97E  C2         			cly
 7787                        		__add_st.wmq	_player_pos_y
         01:C97F  18         			clc
         01:C980  6D D4 24   			adc.l	_player_pos_y
         01:C983  8D D4 24   			sta.l	_player_pos_y
         01:C986  98         			tya
         01:C987  6D D5 24   			adc.h	_player_pos_y
         01:C98A  8D D5 24   			sta.h	_player_pos_y
 7788                        	
 7789                        		.dbg	line,	"include\routines_LEVELS.c", 1566; break;
 7790                        		__bra		.LL292
         01:C98D  80 02      			bra	.LL292
 7791                        	
 7792                        		.dbg	line,	"include\routines_LEVELS.c", 1567; }
 7793                        	
 7794                        		.dbg	line,	"include\routines_LEVELS.c", 1568; }
 7795    01:C98F             	.LL293	.alias		.LL290
 7796                        	
 7797                        		.dbg	line,	"include\routines_LEVELS.c", 1569; }
 7798                        		__bra		.LL290
         01:C98F  80 B8      			bra	.LL290
 7799    01:C991             	.LL292:
 7800                        	
 7801                        		.dbg	line,	"include\routines_LEVELS.c", 1570; }
 7802                        	
 7803                        		.dbg	line,	"include\routines_LEVELS.c", 1572; spr_set(weapon_id);
 7804    01:C991             	.LL288:
 7805                        		__ld.umq	_weapon_id
         01:C991  AD 22 23   			lda	_weapon_id
 7806                        		__call		_spr_set.1
         01:C994  20 DD E7   			call	_spr_set.1
 7807                        	
 7808                        		.dbg	line,	"include\routines_LEVELS.c", 1573; spr_y(player_pos_y+8);
 7809                        		__ld.wm		_player_pos_y
         01:C997  AD D4 24   			lda.l	_player_pos_y
         01:C99A  AC D5 24   			ldy.h	_player_pos_y
 7810                        		__add.wi	8
         01:C99D  18         			clc
         01:C99E  69 08      			adc.l	#8
         01:C9A0  90 01      			bcc	!+
         01:C9A2  C8         			iny
         01:C9A3             	!:
 7811                        		__call		_spr_y.1
         01:C9A3  20 19 E8   			call	_spr_y.1
 7812                        	
 7813                        		.dbg	line,	"include\routines_LEVELS.c", 1575; spr_set(player_id);
 7814                        		__ld.umq	_player_id
         01:C9A6  AD 15 23   			lda	_player_id
 7815                        		__call		_spr_set.1
         01:C9A9  20 DD E7   			call	_spr_set.1
 7816                        	
 7817                        		.dbg	line,	"include\routines_LEVELS.c", 1576; spr_y(player_pos_y);
 7818                        		__ld.wm		_player_pos_y
         01:C9AC  AD D4 24   			lda.l	_player_pos_y
         01:C9AF  AC D5 24   			ldy.h	_player_pos_y
 7819                        		__call		_spr_y.1
         01:C9B2  20 19 E8   			call	_spr_y.1
 7820                        	
 7821                        		.dbg	line,	"include\routines_LEVELS.c", 1580; if(player_index_jump < 34)
 7822                        		__ld.umq	_player_index_jump
         01:C9B5  AD 1A 23   			lda	_player_index_jump
 7823                        		__ult_b.uiq	34
         01:C9B8  C9 22      			cmp	#34		; Subtract integer from A.
         01:C9BA  6A         			ror	a		; CC if A < integer.
         01:C9BB  49 80      			eor	#$80
         01:C9BD  2A         			rol	a
 7824                        		__bfalse	.LL294
         01:C9BE  90 03      			bcc	.LL294
 7825                        	
 7826                        		.dbg	line,	"include\routines_LEVELS.c", 1581; {
 7827                        	
 7828                        		.dbg	line,	"include\routines_LEVELS.c", 1583; player_index_jump += 1;
 7829                        		__add_st.umiq	1, _player_index_jump
         01:C9C0  EE 1A 23   			inc	_player_index_jump
 7830                        	
 7831                        		.dbg	line,	"include\routines_LEVELS.c", 1584; }
 7832                        	
 7833                        		.dbg	line,	"include\routines_LEVELS.c", 1589; //--------------------------------------------------------------------------------------//
 7834                        	
 7835                        		.dbg	line,	"include\routines_LEVELS.c", 1590; //                                   FLOOR COLLISION                                    //
 7836                        	
 7837                        		.dbg	line,	"include\routines_LEVELS.c", 1591; //--------------------------------------------------------------------------------------//
 7838                        	
 7839                        		.dbg	line,	"include\routines_LEVELS.c", 1593; if(player_index_jump > 14)
 7840    01:C9C3             	.LL294:
 7841                        		__ld.umq	_player_index_jump
         01:C9C3  AD 1A 23   			lda	_player_index_jump
 7842                        		__ugt_b.uiq	14
         01:C9C6  18         			clc			; Subtract integer+1 from A.
         01:C9C7  E9 0E      			sbc	#14		; CS if A > integer.
 7843                        		__bfalse	.LL295
         01:C9C9  B0 03 4C 60			bcc	.LL295
         01:C9CD  CB          
 7844                        	
 7845                        		.dbg	line,	"include\routines_LEVELS.c", 1594; {
 7846                        	
 7847                        		.dbg	line,	"include\routines_LEVELS.c", 1595; // CHECK COLLISION WITH LEFT FLOOR //
 7848                        	
 7849                        		.dbg	line,	"include\routines_LEVELS.c", 1596; check_BG( 10 , 32 );
 7850                        		__ld.wi		10
         01:C9CE  A9 0A      			lda.l	#10
         01:C9D0  C2         			cly
 7851                        		__pusharg.wr
         01:C9D1  A6 8D      			ldx	<__sp
         01:C9D3  CA         			dex
         01:C9D4  CA         			dex
         01:C9D5  95 08      			sta.l	<__stack, x
         01:C9D7  94 09      			sty.h	<__stack, x
         01:C9D9  86 8D      			stx	<__sp
 7852                        		__ld.wi		32
         01:C9DB  A9 20      			lda.l	#32
         01:C9DD  C2         			cly
 7853                        		__pusharg.wr
         01:C9DE  A6 8D      			ldx	<__sp
         01:C9E0  CA         			dex
         01:C9E1  CA         			dex
         01:C9E2  95 08      			sta.l	<__stack, x
         01:C9E4  94 09      			sty.h	<__stack, x
         01:C9E6  86 8D      			stx	<__sp
 7854                        		__call		_check_BG
         01:C9E8  20 6D FF   			call	_check_BG
 7855                        	
 7856                        		.dbg	line,	"include\routines_LEVELS.c", 1598; // IF PLAYER TOUCHES THE GROUND TO THE LEFT //
 7857                        	
 7858                        		.dbg	line,	"include\routines_LEVELS.c", 1599; if(map_blk_flag == TILE_BG)
 7859                        		__ld.umq	_map_blk_flag
         01:C9EB  AD AF 2B   			lda	_map_blk_flag
 7860                        		__equ_b.uiq	1
         01:C9EE  C9 01      			cmp	#1
         01:C9F0  F0 01      			beq	!+
         01:C9F2  18         			clc
         01:C9F3             	!:
 7861                        		__bfalse	.LL296
         01:C9F3  B0 03 4C 97			bcc	.LL296
         01:C9F7  CA          
 7862                        	
 7863                        		.dbg	line,	"include\routines_LEVELS.c", 1600; {
 7864                        	
 7865                        		.dbg	line,	"include\routines_LEVELS.c", 1601; // CALCULATE HOW MANY PIXELS THE PLAYER MOVED INTO THE GROUND //
 7866                        	
 7867                        		.dbg	line,	"include\routines_LEVELS.c", 1602; for(i=1; i<11 ; i++ )
 7868                        		__st.umiq	1, __update_PLAYER_end - 1  /* i */
         01:C9F8  A9 01      			lda.l	#1
         01:C9FA  8D 0C 23   			sta	__update_PLAYER_end - 1
 7869    01:C9FD             	.LL297:
 7870                        		__ld.umq	__update_PLAYER_end - 1  /* i */
         01:C9FD  AD 0C 23   			lda	__update_PLAYER_end - 1
 7871                        		__ult_b.uiq	11
         01:CA00  C9 0B      			cmp	#11		; Subtract integer from A.
         01:CA02  6A         			ror	a		; CC if A < integer.
         01:CA03  49 80      			eor	#$80
         01:CA05  2A         			rol	a
 7872                        		__btrue		.LL299
         01:CA06  B0 07      			bcs	.LL299
 7873                        		__bra		.LL300
         01:CA08  80 5B      			bra	.LL300
 7874    01:CA0A             	.LL298:
 7875                        		__inc.umq	__update_PLAYER_end - 1  /* i */
         01:CA0A  EE 0C 23   			inc	__update_PLAYER_end - 1
 7876                        		__bra		.LL297
         01:CA0D  80 EE      			bra	.LL297
 7877    01:CA0F             	.LL299:
 7878                        	
 7879                        		.dbg	line,	"include\routines_LEVELS.c", 1603; {
 7880                        	
 7881                        		.dbg	line,	"include\routines_LEVELS.c", 1604; check_TILE_DEPTH( 10 , i);
 7882                        		__ld.wi		10
         01:CA0F  A9 0A      			lda.l	#10
         01:CA11  C2         			cly
 7883                        		__pusharg.wr
         01:CA12  A6 8D      			ldx	<__sp
         01:CA14  CA         			dex
         01:CA15  CA         			dex
         01:CA16  95 08      			sta.l	<__stack, x
         01:CA18  94 09      			sty.h	<__stack, x
         01:CA1A  86 8D      			stx	<__sp
 7884                        		__ld.um		__update_PLAYER_end - 1  /* i */
         01:CA1C  AD 0C 23   			lda	__update_PLAYER_end - 1
         01:CA1F  C2         			cly
 7885                        		__pusharg.wr
         01:CA20  A6 8D      			ldx	<__sp
         01:CA22  CA         			dex
         01:CA23  CA         			dex
         01:CA24  95 08      			sta.l	<__stack, x
         01:CA26  94 09      			sty.h	<__stack, x
         01:CA28  86 8D      			stx	<__sp
 7886                        		__call		_check_TILE_DEPTH
         01:CA2A  20 59 FF   			call	_check_TILE_DEPTH
 7887                        	
 7888                        		.dbg	line,	"include\routines_LEVELS.c", 1606; if(map_blk_flag == TILE_EMPTY)
 7889                        		__not.um	_map_blk_flag
         01:CA2D  AD AF 2B   			lda	_map_blk_flag
         01:CA30  18         			clc
         01:CA31  D0 01      			bne	!+
         01:CA33  38         			sec
         01:CA34             	!:
 7890                        		__bfalse	.LL301
         01:CA34  90 D4      			bcc	.LL301
 7891                        	
 7892                        		.dbg	line,	"include\routines_LEVELS.c", 1607; {
 7893                        	
 7894                        		.dbg	line,	"include\routines_LEVELS.c", 1608; //spr_set(player_id);
 7895                        	
 7896                        		.dbg	line,	"include\routines_LEVELS.c", 1609; spr_pattern(PLAYER_IDLE_VRAM_ADR);
 7897                        		__ld.wi		5632
         01:CA36  62         			cla
         01:CA37  A0 16      			ldy.h	#5632
 7898                        		__call		_spr_pattern.1
         01:CA39  20 26 E8   			call	_spr_pattern.1
 7899                        	
 7900                        		.dbg	line,	"include\routines_LEVELS.c", 1610; player_pos_y -= (i - 1);
 7901                        		__ld.um		__update_PLAYER_end - 1  /* i */
         01:CA3C  AD 0C 23   			lda	__update_PLAYER_end - 1
         01:CA3F  C2         			cly
 7902                        		__sub.wi	1
         01:CA40  38         			sec
         01:CA41  E9 01      			sbc.l	#1
         01:CA43  B0 01      			bcs	!+
         01:CA45  88         			dey
         01:CA46             	!:
 7903                        		__isub_st.wmq	_player_pos_y
         01:CA46  38         			sec
         01:CA47  49 FF      			eor	#$FF
         01:CA49  6D D4 24   			adc.l	_player_pos_y
         01:CA4C  8D D4 24   			sta.l	_player_pos_y
         01:CA4F  98         			tya
         01:CA50  49 FF      			eor	#$FF
         01:CA52  6D D5 24   			adc.h	_player_pos_y
         01:CA55  8D D5 24   			sta.h	_player_pos_y
 7904                        	
 7905                        		.dbg	line,	"include\routines_LEVELS.c", 1611; spr_y(player_pos_y);
 7906                        		__ld.wm		_player_pos_y
         01:CA58  AD D4 24   			lda.l	_player_pos_y
         01:CA5B  AC D5 24   			ldy.h	_player_pos_y
 7907                        		__call		_spr_y.1
         01:CA5E  20 19 E8   			call	_spr_y.1
 7908                        	
 7909                        		.dbg	line,	"include\routines_LEVELS.c", 1612; break;
 7910                        		__bra		.LL300
         01:CA61  80 02      			bra	.LL300
 7911                        	
 7912                        		.dbg	line,	"include\routines_LEVELS.c", 1613; }
 7913                        	
 7914                        		.dbg	line,	"include\routines_LEVELS.c", 1615; }
 7915    01:CA63             	.LL301	.alias		.LL298
 7916                        		__bra		.LL298
         01:CA63  80 A5      			bra	.LL298
 7917    01:CA65             	.LL300:
 7918                        	
 7919                        		.dbg	line,	"include\routines_LEVELS.c", 1617; spr_set(weapon_id);
 7920                        		__ld.umq	_weapon_id
         01:CA65  AD 22 23   			lda	_weapon_id
 7921                        		__call		_spr_set.1
         01:CA68  20 DD E7   			call	_spr_set.1
 7922                        	
 7923                        		.dbg	line,	"include\routines_LEVELS.c", 1618; spr_x(player_pos_x+8);
 7924                        		__ld.wm		_player_pos_x
         01:CA6B  AD D2 24   			lda.l	_player_pos_x
         01:CA6E  AC D3 24   			ldy.h	_player_pos_x
 7925                        		__add.wi	8
         01:CA71  18         			clc
         01:CA72  69 08      			adc.l	#8
         01:CA74  90 01      			bcc	!+
         01:CA76  C8         			iny
         01:CA77             	!:
 7926                        		__call		_spr_x.1
         01:CA77  20 0A E8   			call	_spr_x.1
 7927                        	
 7928                        		.dbg	line,	"include\routines_LEVELS.c", 1619; spr_y(player_pos_y+16);
 7929                        		__ld.wm		_player_pos_y
         01:CA7A  AD D4 24   			lda.l	_player_pos_y
         01:CA7D  AC D5 24   			ldy.h	_player_pos_y
 7930                        		__add.wi	16
         01:CA80  18         			clc
         01:CA81  69 10      			adc.l	#16
         01:CA83  90 01      			bcc	!+
         01:CA85  C8         			iny
         01:CA86             	!:
 7931                        		__call		_spr_y.1
         01:CA86  20 19 E8   			call	_spr_y.1
 7932                        	
 7933                        		.dbg	line,	"include\routines_LEVELS.c", 1621; player_counter_anim = 1;
 7934                        		__st.umiq	1, _player_counter_anim
         01:CA89  A9 01      			lda.l	#1
         01:CA8B  8D 19 23   			sta	_player_counter_anim
 7935                        	
 7936                        		.dbg	line,	"include\routines_LEVELS.c", 1622; player_index_jump = 0;
 7937                        		__st.umiq	0, _player_index_jump
         01:CA8E  9C 1A 23   			stz	_player_index_jump
 7938                        	
 7939                        		.dbg	line,	"include\routines_LEVELS.c", 1623; player_state = STATE_IDLE;
 7940                        		__st.umiq	0, _player_state
         01:CA91  9C 16 23   			stz	_player_state
 7941                        	
 7942                        		.dbg	line,	"include\routines_LEVELS.c", 1624; return;
 7943                        		__bra		.LL214
         01:CA94  4C 3D DD   			bra	.LL214
 7944                        	
 7945                        		.dbg	line,	"include\routines_LEVELS.c", 1625; }
 7946                        	
 7947                        		.dbg	line,	"include\routines_LEVELS.c", 1627; // IF PLAYER TOUCHES THE GROUND TO THE RIGHT //
 7948                        	
 7949                        		.dbg	line,	"include\routines_LEVELS.c", 1628; else
 7950    01:CA97             	.LL296:
 7951                        	
 7952                        		.dbg	line,	"include\routines_LEVELS.c", 1629; {
 7953                        	
 7954                        		.dbg	line,	"include\routines_LEVELS.c", 1630; // CHECK COLLISION WITH RIGHT FLOOR //
 7955                        	
 7956                        		.dbg	line,	"include\routines_LEVELS.c", 1631; check_BG( 22 , 32 );
 7957                        		__ld.wi		22
         01:CA97  A9 16      			lda.l	#22
         01:CA99  C2         			cly
 7958                        		__pusharg.wr
         01:CA9A  A6 8D      			ldx	<__sp
         01:CA9C  CA         			dex
         01:CA9D  CA         			dex
         01:CA9E  95 08      			sta.l	<__stack, x
         01:CAA0  94 09      			sty.h	<__stack, x
         01:CAA2  86 8D      			stx	<__sp
 7959                        		__ld.wi		32
         01:CAA4  A9 20      			lda.l	#32
         01:CAA6  C2         			cly
 7960                        		__pusharg.wr
         01:CAA7  A6 8D      			ldx	<__sp
         01:CAA9  CA         			dex
         01:CAAA  CA         			dex
         01:CAAB  95 08      			sta.l	<__stack, x
         01:CAAD  94 09      			sty.h	<__stack, x
         01:CAAF  86 8D      			stx	<__sp
 7961                        		__call		_check_BG
         01:CAB1  20 6D FF   			call	_check_BG
 7962                        	
 7963                        		.dbg	line,	"include\routines_LEVELS.c", 1633; if(map_blk_flag == TILE_BG)
 7964                        		__ld.umq	_map_blk_flag
         01:CAB4  AD AF 2B   			lda	_map_blk_flag
 7965                        		__equ_b.uiq	1
         01:CAB7  C9 01      			cmp	#1
         01:CAB9  F0 01      			beq	!+
         01:CABB  18         			clc
         01:CABC             	!:
 7966                        		__bfalse	.LL303
         01:CABC  B0 03 4C 60			bcc	.LL303
         01:CAC0  CB          
 7967                        	
 7968                        		.dbg	line,	"include\routines_LEVELS.c", 1634; {
 7969                        	
 7970                        		.dbg	line,	"include\routines_LEVELS.c", 1635; // CALCULATE HOW MANY PIXELS THE PLAYER MOVED INTO THE GROUND //
 7971                        	
 7972                        		.dbg	line,	"include\routines_LEVELS.c", 1636; for(i=1; i<11 ; i++ )
 7973                        		__st.umiq	1, __update_PLAYER_end - 1  /* i */
         01:CAC1  A9 01      			lda.l	#1
         01:CAC3  8D 0C 23   			sta	__update_PLAYER_end - 1
 7974    01:CAC6             	.LL304:
 7975                        		__ld.umq	__update_PLAYER_end - 1  /* i */
         01:CAC6  AD 0C 23   			lda	__update_PLAYER_end - 1
 7976                        		__ult_b.uiq	11
         01:CAC9  C9 0B      			cmp	#11		; Subtract integer from A.
         01:CACB  6A         			ror	a		; CC if A < integer.
         01:CACC  49 80      			eor	#$80
         01:CACE  2A         			rol	a
 7977                        		__btrue		.LL306
         01:CACF  B0 07      			bcs	.LL306
 7978                        		__bra		.LL307
         01:CAD1  80 5B      			bra	.LL307
 7979    01:CAD3             	.LL305:
 7980                        		__inc.umq	__update_PLAYER_end - 1  /* i */
         01:CAD3  EE 0C 23   			inc	__update_PLAYER_end - 1
 7981                        		__bra		.LL304
         01:CAD6  80 EE      			bra	.LL304
 7982    01:CAD8             	.LL306:
 7983                        	
 7984                        		.dbg	line,	"include\routines_LEVELS.c", 1637; {
 7985                        	
 7986                        		.dbg	line,	"include\routines_LEVELS.c", 1638; check_TILE_DEPTH( 22 , i);
 7987                        		__ld.wi		22
         01:CAD8  A9 16      			lda.l	#22
         01:CADA  C2         			cly
 7988                        		__pusharg.wr
         01:CADB  A6 8D      			ldx	<__sp
         01:CADD  CA         			dex
         01:CADE  CA         			dex
         01:CADF  95 08      			sta.l	<__stack, x
         01:CAE1  94 09      			sty.h	<__stack, x
         01:CAE3  86 8D      			stx	<__sp
 7989                        		__ld.um		__update_PLAYER_end - 1  /* i */
         01:CAE5  AD 0C 23   			lda	__update_PLAYER_end - 1
         01:CAE8  C2         			cly
 7990                        		__pusharg.wr
         01:CAE9  A6 8D      			ldx	<__sp
         01:CAEB  CA         			dex
         01:CAEC  CA         			dex
         01:CAED  95 08      			sta.l	<__stack, x
         01:CAEF  94 09      			sty.h	<__stack, x
         01:CAF1  86 8D      			stx	<__sp
 7991                        		__call		_check_TILE_DEPTH
         01:CAF3  20 59 FF   			call	_check_TILE_DEPTH
 7992                        	
 7993                        		.dbg	line,	"include\routines_LEVELS.c", 1640; if(map_blk_flag == TILE_EMPTY)
 7994                        		__not.um	_map_blk_flag
         01:CAF6  AD AF 2B   			lda	_map_blk_flag
         01:CAF9  18         			clc
         01:CAFA  D0 01      			bne	!+
         01:CAFC  38         			sec
         01:CAFD             	!:
 7995                        		__bfalse	.LL308
         01:CAFD  90 D4      			bcc	.LL308
 7996                        	
 7997                        		.dbg	line,	"include\routines_LEVELS.c", 1641; {
 7998                        	
 7999                        		.dbg	line,	"include\routines_LEVELS.c", 1642; //spr_set(player_id);
 8000                        	
 8001                        		.dbg	line,	"include\routines_LEVELS.c", 1643; spr_pattern(PLAYER_IDLE_VRAM_ADR);
 8002                        		__ld.wi		5632
         01:CAFF  62         			cla
         01:CB00  A0 16      			ldy.h	#5632
 8003                        		__call		_spr_pattern.1
         01:CB02  20 26 E8   			call	_spr_pattern.1
 8004                        	
 8005                        		.dbg	line,	"include\routines_LEVELS.c", 1644; player_pos_y -= (i - 1);
 8006                        		__ld.um		__update_PLAYER_end - 1  /* i */
         01:CB05  AD 0C 23   			lda	__update_PLAYER_end - 1
         01:CB08  C2         			cly
 8007                        		__sub.wi	1
         01:CB09  38         			sec
         01:CB0A  E9 01      			sbc.l	#1
         01:CB0C  B0 01      			bcs	!+
         01:CB0E  88         			dey
         01:CB0F             	!:
 8008                        		__isub_st.wmq	_player_pos_y
         01:CB0F  38         			sec
         01:CB10  49 FF      			eor	#$FF
         01:CB12  6D D4 24   			adc.l	_player_pos_y
         01:CB15  8D D4 24   			sta.l	_player_pos_y
         01:CB18  98         			tya
         01:CB19  49 FF      			eor	#$FF
         01:CB1B  6D D5 24   			adc.h	_player_pos_y
         01:CB1E  8D D5 24   			sta.h	_player_pos_y
 8009                        	
 8010                        		.dbg	line,	"include\routines_LEVELS.c", 1645; spr_y(player_pos_y);
 8011                        		__ld.wm		_player_pos_y
         01:CB21  AD D4 24   			lda.l	_player_pos_y
         01:CB24  AC D5 24   			ldy.h	_player_pos_y
 8012                        		__call		_spr_y.1
         01:CB27  20 19 E8   			call	_spr_y.1
 8013                        	
 8014                        		.dbg	line,	"include\routines_LEVELS.c", 1646; break;
 8015                        		__bra		.LL307
         01:CB2A  80 02      			bra	.LL307
 8016                        	
 8017                        		.dbg	line,	"include\routines_LEVELS.c", 1647; }
 8018                        	
 8019                        		.dbg	line,	"include\routines_LEVELS.c", 1649; }
 8020    01:CB2C             	.LL308	.alias		.LL305
 8021                        		__bra		.LL305
         01:CB2C  80 A5      			bra	.LL305
 8022    01:CB2E             	.LL307:
 8023                        	
 8024                        		.dbg	line,	"include\routines_LEVELS.c", 1652; spr_set(weapon_id);
 8025                        		__ld.umq	_weapon_id
         01:CB2E  AD 22 23   			lda	_weapon_id
 8026                        		__call		_spr_set.1
         01:CB31  20 DD E7   			call	_spr_set.1
 8027                        	
 8028                        		.dbg	line,	"include\routines_LEVELS.c", 1653; spr_x(player_pos_x+8);
 8029                        		__ld.wm		_player_pos_x
         01:CB34  AD D2 24   			lda.l	_player_pos_x
         01:CB37  AC D3 24   			ldy.h	_player_pos_x
 8030                        		__add.wi	8
         01:CB3A  18         			clc
         01:CB3B  69 08      			adc.l	#8
         01:CB3D  90 01      			bcc	!+
         01:CB3F  C8         			iny
         01:CB40             	!:
 8031                        		__call		_spr_x.1
         01:CB40  20 0A E8   			call	_spr_x.1
 8032                        	
 8033                        		.dbg	line,	"include\routines_LEVELS.c", 1654; spr_y(player_pos_y+16);
 8034                        		__ld.wm		_player_pos_y
         01:CB43  AD D4 24   			lda.l	_player_pos_y
         01:CB46  AC D5 24   			ldy.h	_player_pos_y
 8035                        		__add.wi	16
         01:CB49  18         			clc
         01:CB4A  69 10      			adc.l	#16
         01:CB4C  90 01      			bcc	!+
         01:CB4E  C8         			iny
         01:CB4F             	!:
 8036                        		__call		_spr_y.1
         01:CB4F  20 19 E8   			call	_spr_y.1
 8037                        	
 8038                        		.dbg	line,	"include\routines_LEVELS.c", 1656; player_counter_anim = 1;
 8039                        		__st.umiq	1, _player_counter_anim
         01:CB52  A9 01      			lda.l	#1
         01:CB54  8D 19 23   			sta	_player_counter_anim
 8040                        	
 8041                        		.dbg	line,	"include\routines_LEVELS.c", 1657; player_index_jump = 0;
 8042                        		__st.umiq	0, _player_index_jump
         01:CB57  9C 1A 23   			stz	_player_index_jump
 8043                        	
 8044                        		.dbg	line,	"include\routines_LEVELS.c", 1658; player_state = STATE_IDLE;
 8045                        		__st.umiq	0, _player_state
         01:CB5A  9C 16 23   			stz	_player_state
 8046                        	
 8047                        		.dbg	line,	"include\routines_LEVELS.c", 1659; return;
 8048                        		__bra		.LL214
         01:CB5D  4C 3D DD   			bra	.LL214
 8049                        	
 8050                        		.dbg	line,	"include\routines_LEVELS.c", 1660; }
 8051                        	
 8052                        		.dbg	line,	"include\routines_LEVELS.c", 1661; }
 8053    01:CB60             	.LL303:
 8054    01:CB60             	.LL302:
 8055                        	
 8056                        		.dbg	line,	"include\routines_LEVELS.c", 1662; }
 8057                        	
 8058                        		.dbg	line,	"include\routines_LEVELS.c", 1666; // CHECK COLLISION WITH LADDERS //
 8059                        	
 8060                        		.dbg	line,	"include\routines_LEVELS.c", 1667; check_BG( 16 , 16 );
 8061    01:CB60             	.LL295:
 8062                        		__ld.wi		16
         01:CB60  A9 10      			lda.l	#16
         01:CB62  C2         			cly
 8063                        		__pusharg.wr
         01:CB63  A6 8D      			ldx	<__sp
         01:CB65  CA         			dex
         01:CB66  CA         			dex
         01:CB67  95 08      			sta.l	<__stack, x
         01:CB69  94 09      			sty.h	<__stack, x
         01:CB6B  86 8D      			stx	<__sp
 8064                        		__ld.wi		16
         01:CB6D  A9 10      			lda.l	#16
         01:CB6F  C2         			cly
 8065                        		__pusharg.wr
         01:CB70  A6 8D      			ldx	<__sp
         01:CB72  CA         			dex
         01:CB73  CA         			dex
         01:CB74  95 08      			sta.l	<__stack, x
         01:CB76  94 09      			sty.h	<__stack, x
         01:CB78  86 8D      			stx	<__sp
 8066                        		__call		_check_BG
         01:CB7A  20 6D FF   			call	_check_BG
 8067                        	
 8068                        		.dbg	line,	"include\routines_LEVELS.c", 1669; // IF PLAYER HITS THE LADDER //
 8069                        	
 8070                        		.dbg	line,	"include\routines_LEVELS.c", 1670; if(map_blk_flag == TILE_LADDER)
 8071                        		__ld.umq	_map_blk_flag
         01:CB7D  AD AF 2B   			lda	_map_blk_flag
 8072                        		__equ_b.uiq	2
         01:CB80  C9 02      			cmp	#2
         01:CB82  F0 01      			beq	!+
         01:CB84  18         			clc
         01:CB85             	!:
 8073                        		__bfalse	.LL309
         01:CB85  B0 03 4C 3D			bcc	.LL309
         01:CB89  DD          
 8074                        	
 8075                        		.dbg	line,	"include\routines_LEVELS.c", 1671; {
 8076                        	
 8077                        		.dbg	line,	"include\routines_LEVELS.c", 1672; // CAMERA GOES 8 PX BACKWARD //
 8078                        	
 8079                        		.dbg	line,	"include\routines_LEVELS.c", 1673; sgx_map_pxl_x = ( (sgx_map_pxl_x >> 3) << 3 );
 8080                        		__ld.wm		_sgx_map_pxl_x
         01:CB8A  AD 8E 26   			lda.l	_sgx_map_pxl_x
         01:CB8D  AC 8F 26   			ldy.h	_sgx_map_pxl_x
 8081                        		__lsr.wi	3
         01:CB90  84 00      			sty	__temp
         01:CB92  20 3A E2   			jsr	lsrw3
 8082                        		__asl.wi	3
         01:CB95  84 00      			sty	__temp
         01:CB97  20 D7 E1   			jsr	aslw3
 8083                        		__st.wmq	_sgx_map_pxl_x
         01:CB9A  8D 8E 26   			sta.l	_sgx_map_pxl_x
         01:CB9D  8C 8F 26   			sty.h	_sgx_map_pxl_x
 8084                        	
 8085                        		.dbg	line,	"include\routines_LEVELS.c", 1675; // SO WE UPDATE THE MAP //
 8086                        	
 8087                        		.dbg	line,	"include\routines_LEVELS.c", 1676; sgx_scroll_map();
 8088                        		__call		_sgx_scroll_map
         01:CBA0  20 81 FF   			call	_sgx_scroll_map
 8089                        	
 8090                        		.dbg	line,	"include\routines_LEVELS.c", 1678; // CHECK IF THE PLAYER STANDS RIGHT TO THE LADDER //
 8091                        	
 8092                        		.dbg	line,	"include\routines_LEVELS.c", 1679; check_BG( 31 , 16 );
 8093                        		__ld.wi		31
         01:CBA3  A9 1F      			lda.l	#31
         01:CBA5  C2         			cly
 8094                        		__pusharg.wr
         01:CBA6  A6 8D      			ldx	<__sp
         01:CBA8  CA         			dex
         01:CBA9  CA         			dex
         01:CBAA  95 08      			sta.l	<__stack, x
         01:CBAC  94 09      			sty.h	<__stack, x
         01:CBAE  86 8D      			stx	<__sp
 8095                        		__ld.wi		16
         01:CBB0  A9 10      			lda.l	#16
         01:CBB2  C2         			cly
 8096                        		__pusharg.wr
         01:CBB3  A6 8D      			ldx	<__sp
         01:CBB5  CA         			dex
         01:CBB6  CA         			dex
         01:CBB7  95 08      			sta.l	<__stack, x
         01:CBB9  94 09      			sty.h	<__stack, x
         01:CBBB  86 8D      			stx	<__sp
 8097                        		__call		_check_BG
         01:CBBD  20 6D FF   			call	_check_BG
 8098                        	
 8099                        		.dbg	line,	"include\routines_LEVELS.c", 1681; if(map_blk_flag == TILE_LADDER)
 8100                        		__ld.umq	_map_blk_flag
         01:CBC0  AD AF 2B   			lda	_map_blk_flag
 8101                        		__equ_b.uiq	2
         01:CBC3  C9 02      			cmp	#2
         01:CBC5  F0 01      			beq	!+
         01:CBC7  18         			clc
         01:CBC8             	!:
 8102                        		__bfalse	.LL310
         01:CBC8  90 0E      			bcc	.LL310
 8103                        	
 8104                        		.dbg	line,	"include\routines_LEVELS.c", 1682; {
 8105                        	
 8106                        		.dbg	line,	"include\routines_LEVELS.c", 1683; sgx_map_pxl_x += 8;
 8107                        		__add_st.wmiq	8, _sgx_map_pxl_x
         01:CBCA  18         			clc
         01:CBCB  AD 8E 26   			lda.l	_sgx_map_pxl_x
         01:CBCE  69 08      			adc.l	#8
         01:CBD0  8D 8E 26   			sta.l	_sgx_map_pxl_x
         01:CBD3  90 03      			bcc	!+
         01:CBD5  EE 8F 26   			inc.h	_sgx_map_pxl_x
         01:CBD8             	!:
 8108                        	
 8109                        		.dbg	line,	"include\routines_LEVELS.c", 1684; }
 8110                        	
 8111                        		.dbg	line,	"include\routines_LEVELS.c", 1686; spr_pattern(PLAYER_HANG_VRAM_ADR);
 8112    01:CBD8             	.LL310:
 8113                        		__ld.wi		7936
         01:CBD8  62         			cla
         01:CBD9  A0 1F      			ldy.h	#7936
 8114                        		__call		_spr_pattern.1
         01:CBDB  20 26 E8   			call	_spr_pattern.1
 8115                        	
 8116                        		.dbg	line,	"include\routines_LEVELS.c", 1687; player_counter_anim = 0;
 8117                        		__st.umiq	0, _player_counter_anim
         01:CBDE  9C 19 23   			stz	_player_counter_anim
 8118                        	
 8119                        		.dbg	line,	"include\routines_LEVELS.c", 1688; player_index_jump = 0;
 8120                        		__st.umiq	0, _player_index_jump
         01:CBE1  9C 1A 23   			stz	_player_index_jump
 8121                        	
 8122                        		.dbg	line,	"include\routines_LEVELS.c", 1689; jump_ladder = TRUE;
 8123                        		__st.umiq	1, _jump_ladder
         01:CBE4  A9 01      			lda.l	#1
         01:CBE6  8D 1F 23   			sta	_jump_ladder
 8124                        	
 8125                        		.dbg	line,	"include\routines_LEVELS.c", 1690; player_state = STATE_HANG;
 8126                        		__st.umiq	10, _player_state
         01:CBE9  A9 0A      			lda.l	#10
         01:CBEB  8D 16 23   			sta	_player_state
 8127                        	
 8128                        		.dbg	line,	"include\routines_LEVELS.c", 1691; }
 8129                        	
 8130                        		.dbg	line,	"include\routines_LEVELS.c", 1692; }
 8131    01:CBEE             	.LL309	.alias		.LL311
 8132                        	
 8133                        		.dbg	line,	"include\routines_LEVELS.c", 1695; else if(player_state == STATE_JUMP_RIGHT)
 8134                        		__bra		.LL311
         01:CBEE  4C 3D DD   			bra	.LL311
 8135    01:CBF1             	.LL286:
 8136                        		__ld.umq	_player_state
         01:CBF1  AD 16 23   			lda	_player_state
 8137                        		__equ_b.uiq	5
         01:CBF4  C9 05      			cmp	#5
         01:CBF6  F0 01      			beq	!+
         01:CBF8  18         			clc
         01:CBF9             	!:
 8138                        		__bfalse	.LL312
         01:CBF9  B0 03 4C 25			bcc	.LL312
         01:CBFD  D0          
 8139                        	
 8140                        		.dbg	line,	"include\routines_LEVELS.c", 1696; {
 8141                        	
 8142                        		.dbg	line,	"include\routines_LEVELS.c", 1697; unsigned char i, camera_y_move;
 8143                        	
 8144                        		.dbg	line,	"include\routines_LEVELS.c", 1698; i = 1;
 8145                        		__st.umiq	1, __update_PLAYER_end - 2  /* i */
         01:CBFE  A9 01      			lda.l	#1
         01:CC00  8D 0B 23   			sta	__update_PLAYER_end - 2
 8146                        	
 8147                        		.dbg	line,	"include\routines_LEVELS.c", 1701; // UPDATE PLAYER TILES //
 8148                        	
 8149                        		.dbg	line,	"include\routines_LEVELS.c", 1702; if(player_counter_anim == 0)
 8150                        		__not.um	_player_counter_anim
         01:CC03  AD 19 23   			lda	_player_counter_anim
         01:CC06  18         			clc
         01:CC07  D0 01      			bne	!+
         01:CC09  38         			sec
         01:CC0A             	!:
 8151                        		__bfalse	.LL313
         01:CC0A  90 11      			bcc	.LL313
 8152                        	
 8153                        		.dbg	line,	"include\routines_LEVELS.c", 1703; {
 8154                        	
 8155                        		.dbg	line,	"include\routines_LEVELS.c", 1704; spr_set(player_id);
 8156                        		__ld.umq	_player_id
         01:CC0C  AD 15 23   			lda	_player_id
 8157                        		__call		_spr_set.1
         01:CC0F  20 DD E7   			call	_spr_set.1
 8158                        	
 8159                        		.dbg	line,	"include\routines_LEVELS.c", 1705; spr_pattern(PLAYER_JUMP_VRAM_ADR);
 8160                        		__ld.wi		7424
         01:CC12  62         			cla
         01:CC13  A0 1D      			ldy.h	#7424
 8161                        		__call		_spr_pattern.1
         01:CC15  20 26 E8   			call	_spr_pattern.1
 8162                        	
 8163                        		.dbg	line,	"include\routines_LEVELS.c", 1707; player_counter_anim = 1;
 8164                        		__st.umiq	1, _player_counter_anim
         01:CC18  A9 01      			lda.l	#1
         01:CC1A  8D 19 23   			sta	_player_counter_anim
 8165                        	
 8166                        		.dbg	line,	"include\routines_LEVELS.c", 1708; }
 8167                        	
 8168                        		.dbg	line,	"include\routines_LEVELS.c", 1711; // SELECT PLAYER SPRITE //
 8169                        	
 8170                        		.dbg	line,	"include\routines_LEVELS.c", 1712; spr_set(player_id);
 8171    01:CC1D             	.LL313:
 8172                        		__ld.umq	_player_id
         01:CC1D  AD 15 23   			lda	_player_id
 8173                        		__call		_spr_set.1
         01:CC20  20 DD E7   			call	_spr_set.1
 8174                        	
 8175                        		.dbg	line,	"include\routines_LEVELS.c", 1715; //**************************************************************************************//
 8176                        	
 8177                        		.dbg	line,	"include\routines_LEVELS.c", 1716; //                                        H MOVE                                        //
 8178                        	
 8179                        		.dbg	line,	"include\routines_LEVELS.c", 1717; //**************************************************************************************//
 8180                        	
 8181                        		.dbg	line,	"include\routines_LEVELS.c", 1719; //--------------------------------------------------------------------------------------//
 8182                        	
 8183                        		.dbg	line,	"include\routines_LEVELS.c", 1720; //                                    WALL COLLISION                                    //
 8184                        	
 8185                        		.dbg	line,	"include\routines_LEVELS.c", 1721; //--------------------------------------------------------------------------------------//
 8186                        	
 8187                        		.dbg	line,	"include\routines_LEVELS.c", 1723; // CHECK COLLISION WITH BOTTOM RIGHT WALL //
 8188                        	
 8189                        		.dbg	line,	"include\routines_LEVELS.c", 1724; check_BG( 24 , 31 );
 8190                        		__ld.wi		24
         01:CC23  A9 18      			lda.l	#24
         01:CC25  C2         			cly
 8191                        		__pusharg.wr
         01:CC26  A6 8D      			ldx	<__sp
         01:CC28  CA         			dex
         01:CC29  CA         			dex
         01:CC2A  95 08      			sta.l	<__stack, x
         01:CC2C  94 09      			sty.h	<__stack, x
         01:CC2E  86 8D      			stx	<__sp
 8192                        		__ld.wi		31
         01:CC30  A9 1F      			lda.l	#31
         01:CC32  C2         			cly
 8193                        		__pusharg.wr
         01:CC33  A6 8D      			ldx	<__sp
         01:CC35  CA         			dex
         01:CC36  CA         			dex
         01:CC37  95 08      			sta.l	<__stack, x
         01:CC39  94 09      			sty.h	<__stack, x
         01:CC3B  86 8D      			stx	<__sp
 8194                        		__call		_check_BG
         01:CC3D  20 6D FF   			call	_check_BG
 8195                        	
 8196                        		.dbg	line,	"include\routines_LEVELS.c", 1726; if(map_blk_flag != TILE_BG)
 8197                        		__ld.umq	_map_blk_flag
         01:CC40  AD AF 2B   			lda	_map_blk_flag
 8198                        		__neq_b.uiq	1
         01:CC43  38         			sec
         01:CC44  49 01      			eor	#1
         01:CC46  D0 01      			bne	!+
         01:CC48  18         			clc
         01:CC49             	!:
 8199                        		__bfalse	.LL314
         01:CC49  90 78      			bcc	.LL314
 8200                        	
 8201                        		.dbg	line,	"include\routines_LEVELS.c", 1727; {
 8202                        	
 8203                        		.dbg	line,	"include\routines_LEVELS.c", 1728; // CHECK COLLISION WITH TOP RIGHT WALL //
 8204                        	
 8205                        		.dbg	line,	"include\routines_LEVELS.c", 1729; check_BG( 24 , 15 );
 8206                        		__ld.wi		24
         01:CC4B  A9 18      			lda.l	#24
         01:CC4D  C2         			cly
 8207                        		__pusharg.wr
         01:CC4E  A6 8D      			ldx	<__sp
         01:CC50  CA         			dex
         01:CC51  CA         			dex
         01:CC52  95 08      			sta.l	<__stack, x
         01:CC54  94 09      			sty.h	<__stack, x
         01:CC56  86 8D      			stx	<__sp
 8208                        		__ld.wi		15
         01:CC58  A9 0F      			lda.l	#15
         01:CC5A  C2         			cly
 8209                        		__pusharg.wr
         01:CC5B  A6 8D      			ldx	<__sp
         01:CC5D  CA         			dex
         01:CC5E  CA         			dex
         01:CC5F  95 08      			sta.l	<__stack, x
         01:CC61  94 09      			sty.h	<__stack, x
         01:CC63  86 8D      			stx	<__sp
 8210                        		__call		_check_BG
         01:CC65  20 6D FF   			call	_check_BG
 8211                        	
 8212                        		.dbg	line,	"include\routines_LEVELS.c", 1731; if(map_blk_flag == TILE_BG)
 8213                        		__ld.umq	_map_blk_flag
         01:CC68  AD AF 2B   			lda	_map_blk_flag
 8214                        		__equ_b.uiq	1
         01:CC6B  C9 01      			cmp	#1
         01:CC6D  F0 01      			beq	!+
         01:CC6F  18         			clc
         01:CC70             	!:
 8215                        		__bfalse	.LL315
         01:CC70  90 41      			bcc	.LL315
 8216                        	
 8217                        		.dbg	line,	"include\routines_LEVELS.c", 1732; {
 8218                        	
 8219                        		.dbg	line,	"include\routines_LEVELS.c", 1733; check_TILE_DEPTH( 15 , -16 );
 8220                        		__ld.wi		15
         01:CC72  A9 0F      			lda.l	#15
         01:CC74  C2         			cly
 8221                        		__pusharg.wr
         01:CC75  A6 8D      			ldx	<__sp
         01:CC77  CA         			dex
         01:CC78  CA         			dex
         01:CC79  95 08      			sta.l	<__stack, x
         01:CC7B  94 09      			sty.h	<__stack, x
         01:CC7D  86 8D      			stx	<__sp
 8222                        		__ld.wi		-16
         01:CC7F  A9 F0      			lda.l	#-16
         01:CC81  A0 FF      			ldy.h	#-16
 8223                        		__pusharg.wr
         01:CC83  A6 8D      			ldx	<__sp
         01:CC85  CA         			dex
         01:CC86  CA         			dex
         01:CC87  95 08      			sta.l	<__stack, x
         01:CC89  94 09      			sty.h	<__stack, x
         01:CC8B  86 8D      			stx	<__sp
 8224                        		__call		_check_TILE_DEPTH
         01:CC8D  20 59 FF   			call	_check_TILE_DEPTH
 8225                        	
 8226                        		.dbg	line,	"include\routines_LEVELS.c", 1735; if(map_blk_flag == TILE_EMPTY && jump_ladder == TRUE)
 8227                        		__not.um	_map_blk_flag
         01:CC90  AD AF 2B   			lda	_map_blk_flag
         01:CC93  18         			clc
         01:CC94  D0 01      			bne	!+
         01:CC96  38         			sec
         01:CC97             	!:
 8228                        		__bfalse	.LL317
         01:CC97  90 08      			bcc	.LL317
 8229                        		__ld.umq	_jump_ladder
         01:CC99  AD 1F 23   			lda	_jump_ladder
 8230                        		__equ_b.uiq	1
         01:CC9C  C9 01      			cmp	#1
         01:CC9E  F0 01      			beq	!+
         01:CCA0  18         			clc
         01:CCA1             	!:
 8231    01:CCA1             	.LL317:
 8232                        		__bfalse	.LL316
         01:CCA1  90 5F      			bcc	.LL316
 8233                        	
 8234                        		.dbg	line,	"include\routines_LEVELS.c", 1736; {
 8235                        	
 8236                        		.dbg	line,	"include\routines_LEVELS.c", 1737; jump_ladder = FALSE;
 8237                        		__st.umiq	0, _jump_ladder
         01:CCA3  9C 1F 23   			stz	_jump_ladder
 8238                        	
 8239                        		.dbg	line,	"include\routines_LEVELS.c", 1738; player_index_fall = 0;
 8240                        		__st.umiq	0, _player_index_fall
         01:CCA6  9C 1B 23   			stz	_player_index_fall
 8241                        	
 8242                        		.dbg	line,	"include\routines_LEVELS.c", 1739; player_state = STATE_FALL;
 8243                        		__st.umiq	9, _player_state
         01:CCA9  A9 09      			lda.l	#9
         01:CCAB  8D 16 23   			sta	_player_state
 8244                        	
 8245                        		.dbg	line,	"include\routines_LEVELS.c", 1740; return;
 8246                        		__bra		.LL214
         01:CCAE  4C 3D DD   			bra	.LL214
 8247                        	
 8248                        		.dbg	line,	"include\routines_LEVELS.c", 1741; }
 8249                        	
 8250                        		.dbg	line,	"include\routines_LEVELS.c", 1742; }
 8251    01:CCB1             	.LL316	.alias		.LL318
 8252                        	
 8253                        		.dbg	line,	"include\routines_LEVELS.c", 1744; else
 8254                        		__bra		.LL318
         01:CCB1  80 4F      			bra	.LL318
 8255    01:CCB3             	.LL315:
 8256                        	
 8257                        		.dbg	line,	"include\routines_LEVELS.c", 1745; {
 8258                        	
 8259                        		.dbg	line,	"include\routines_LEVELS.c", 1746; sgx_map_pxl_x += 2;
 8260                        		__add_st.wmiq	2, _sgx_map_pxl_x
         01:CCB3  18         			clc
         01:CCB4  AD 8E 26   			lda.l	_sgx_map_pxl_x
         01:CCB7  69 02      			adc.l	#2
         01:CCB9  8D 8E 26   			sta.l	_sgx_map_pxl_x
         01:CCBC  90 03      			bcc	!+
         01:CCBE  EE 8F 26   			inc.h	_sgx_map_pxl_x
         01:CCC1             	!:
 8261                        	
 8262                        		.dbg	line,	"include\routines_LEVELS.c", 1747; }
 8263    01:CCC1             	.LL318	.alias		.LL319
 8264                        	
 8265                        		.dbg	line,	"include\routines_LEVELS.c", 1748; }
 8266                        	
 8267                        		.dbg	line,	"include\routines_LEVELS.c", 1750; else
 8268                        		__bra		.LL319
         01:CCC1  80 3F      			bra	.LL319
 8269    01:CCC3             	.LL314:
 8270                        	
 8271                        		.dbg	line,	"include\routines_LEVELS.c", 1751; {
 8272                        	
 8273                        		.dbg	line,	"include\routines_LEVELS.c", 1752; check_TILE_DEPTH( 15 , -16 );
 8274                        		__ld.wi		15
         01:CCC3  A9 0F      			lda.l	#15
         01:CCC5  C2         			cly
 8275                        		__pusharg.wr
         01:CCC6  A6 8D      			ldx	<__sp
         01:CCC8  CA         			dex
         01:CCC9  CA         			dex
         01:CCCA  95 08      			sta.l	<__stack, x
         01:CCCC  94 09      			sty.h	<__stack, x
         01:CCCE  86 8D      			stx	<__sp
 8276                        		__ld.wi		-16
         01:CCD0  A9 F0      			lda.l	#-16
         01:CCD2  A0 FF      			ldy.h	#-16
 8277                        		__pusharg.wr
         01:CCD4  A6 8D      			ldx	<__sp
         01:CCD6  CA         			dex
         01:CCD7  CA         			dex
         01:CCD8  95 08      			sta.l	<__stack, x
         01:CCDA  94 09      			sty.h	<__stack, x
         01:CCDC  86 8D      			stx	<__sp
 8278                        		__call		_check_TILE_DEPTH
         01:CCDE  20 59 FF   			call	_check_TILE_DEPTH
 8279                        	
 8280                        		.dbg	line,	"include\routines_LEVELS.c", 1754; if(map_blk_flag == TILE_EMPTY && jump_ladder == TRUE)
 8281                        		__not.um	_map_blk_flag
         01:CCE1  AD AF 2B   			lda	_map_blk_flag
         01:CCE4  18         			clc
         01:CCE5  D0 01      			bne	!+
         01:CCE7  38         			sec
         01:CCE8             	!:
 8282                        		__bfalse	.LL321
         01:CCE8  90 08      			bcc	.LL321
 8283                        		__ld.umq	_jump_ladder
         01:CCEA  AD 1F 23   			lda	_jump_ladder
 8284                        		__equ_b.uiq	1
         01:CCED  C9 01      			cmp	#1
         01:CCEF  F0 01      			beq	!+
         01:CCF1  18         			clc
         01:CCF2             	!:
 8285    01:CCF2             	.LL321:
 8286                        		__bfalse	.LL320
         01:CCF2  90 0E      			bcc	.LL320
 8287                        	
 8288                        		.dbg	line,	"include\routines_LEVELS.c", 1755; {
 8289                        	
 8290                        		.dbg	line,	"include\routines_LEVELS.c", 1756; jump_ladder = FALSE;
 8291                        		__st.umiq	0, _jump_ladder
         01:CCF4  9C 1F 23   			stz	_jump_ladder
 8292                        	
 8293                        		.dbg	line,	"include\routines_LEVELS.c", 1757; player_index_fall = 0;
 8294                        		__st.umiq	0, _player_index_fall
         01:CCF7  9C 1B 23   			stz	_player_index_fall
 8295                        	
 8296                        		.dbg	line,	"include\routines_LEVELS.c", 1758; player_state = STATE_FALL;
 8297                        		__st.umiq	9, _player_state
         01:CCFA  A9 09      			lda.l	#9
         01:CCFC  8D 16 23   			sta	_player_state
 8298                        	
 8299                        		.dbg	line,	"include\routines_LEVELS.c", 1759; return;
 8300                        		__bra		.LL214
         01:CCFF  4C 3D DD   			bra	.LL214
 8301                        	
 8302                        		.dbg	line,	"include\routines_LEVELS.c", 1760; }
 8303                        	
 8304                        		.dbg	line,	"include\routines_LEVELS.c", 1761; }
 8305    01:CD02             	.LL320:
 8306    01:CD02             	.LL319:
 8307                        	
 8308                        		.dbg	line,	"include\routines_LEVELS.c", 1766; //**************************************************************************************//
 8309                        	
 8310                        		.dbg	line,	"include\routines_LEVELS.c", 1767; //                                        V MOVE                                        //
 8311                        	
 8312                        		.dbg	line,	"include\routines_LEVELS.c", 1768; //**************************************************************************************//
 8313                        	
 8314                        		.dbg	line,	"include\routines_LEVELS.c", 1770; // UPDATE PLAYER Y POSITION //
 8315                        	
 8316                        		.dbg	line,	"include\routines_LEVELS.c", 1771; if(jump_ladder == FALSE)
 8317                        		__not.um	_jump_ladder
         01:CD02  AD 1F 23   			lda	_jump_ladder
         01:CD05  18         			clc
         01:CD06  D0 01      			bne	!+
         01:CD08  38         			sec
         01:CD09             	!:
 8318                        		__bfalse	.LL322
         01:CD09  90 1A      			bcc	.LL322
 8319                        	
 8320                        		.dbg	line,	"include\routines_LEVELS.c", 1772; {
 8321                        	
 8322                        		.dbg	line,	"include\routines_LEVELS.c", 1773; player_pos_y += TABLE_PLAYER_JUMP_V[player_index_jump];
 8323                        		__ldx.umq	_player_index_jump
         01:CD0B  AE 1A 23   			ldx	_player_index_jump
 8324                        		__ld.bax	_TABLE_PLAYER_JUMP_V
         01:CD0E  BD F9 60   			lda	_TABLE_PLAYER_JUMP_V, x
         01:CD11  C2         			cly
         01:CD12  10 01      			bpl	!+
         01:CD14  88         			dey
         01:CD15             	!:
 8325                        		__add_st.wmq	_player_pos_y
         01:CD15  18         			clc
         01:CD16  6D D4 24   			adc.l	_player_pos_y
         01:CD19  8D D4 24   			sta.l	_player_pos_y
         01:CD1C  98         			tya
         01:CD1D  6D D5 24   			adc.h	_player_pos_y
         01:CD20  8D D5 24   			sta.h	_player_pos_y
 8326                        	
 8327                        		.dbg	line,	"include\routines_LEVELS.c", 1774; }
 8328                        	
 8329                        		.dbg	line,	"include\routines_LEVELS.c", 1776; else
 8330                        		__bra		.LL323
         01:CD23  80 18      			bra	.LL323
 8331    01:CD25             	.LL322:
 8332                        	
 8333                        		.dbg	line,	"include\routines_LEVELS.c", 1777; {
 8334                        	
 8335                        		.dbg	line,	"include\routines_LEVELS.c", 1778; player_pos_y += TABLE_PLAYER_JUMP_LADDER[player_index_jump];
 8336                        		__ldx.umq	_player_index_jump
         01:CD25  AE 1A 23   			ldx	_player_index_jump
 8337                        		__ld.bax	_TABLE_PLAYER_JUMP_LADDER
         01:CD28  BD 31 61   			lda	_TABLE_PLAYER_JUMP_LADDER, x
         01:CD2B  C2         			cly
         01:CD2C  10 01      			bpl	!+
         01:CD2E  88         			dey
         01:CD2F             	!:
 8338                        		__add_st.wmq	_player_pos_y
         01:CD2F  18         			clc
         01:CD30  6D D4 24   			adc.l	_player_pos_y
         01:CD33  8D D4 24   			sta.l	_player_pos_y
         01:CD36  98         			tya
         01:CD37  6D D5 24   			adc.h	_player_pos_y
         01:CD3A  8D D5 24   			sta.h	_player_pos_y
 8339                        	
 8340                        		.dbg	line,	"include\routines_LEVELS.c", 1779; }
 8341    01:CD3D             	.LL323:
 8342                        	
 8343                        		.dbg	line,	"include\routines_LEVELS.c", 1783; // IF PLAYER GOES BELOW ITS BASE Y POSITION //
 8344                        	
 8345                        		.dbg	line,	"include\routines_LEVELS.c", 1784; if(player_pos_y >= PLAYER_BASE_Y_POS)
 8346                        		__ld.wm		_player_pos_y
         01:CD3D  AD D4 24   			lda.l	_player_pos_y
         01:CD40  AC D5 24   			ldy.h	_player_pos_y
 8347                        		__sge_w.wi	128
         01:CD43  C9 80      			cmp.l	#128		; Subtract integer from Y:A.
         01:CD45  98         			tya
         01:CD46  E9 00      			sbc.h	#128
         01:CD48  50 02      			bvc	!+
         01:CD4A  49 80      			eor	#$80		; +ve if Y:A >= integer (signed).
         01:CD4C  49 80      	!:		eor	#$80
         01:CD4E  0A         			asl	a
 8348                        		__bfalse	.LL324
         01:CD4F  90 4E      			bcc	.LL324
 8349                        	
 8350                        		.dbg	line,	"include\routines_LEVELS.c", 1785; {
 8351                        	
 8352                        		.dbg	line,	"include\routines_LEVELS.c", 1786; // THE CAMERA MOVES //
 8353                        	
 8354                        		.dbg	line,	"include\routines_LEVELS.c", 1787; // CALCULATE HOW MANY PIXELS THE CAMERA HAS TO MOVE DOWN //
 8355                        	
 8356                        		.dbg	line,	"include\routines_LEVELS.c", 1788; camera_y_move = player_pos_y - PLAYER_BASE_Y_POS;
 8357                        		__ld.wm		_player_pos_y
         01:CD51  AD D4 24   			lda.l	_player_pos_y
         01:CD54  AC D5 24   			ldy.h	_player_pos_y
 8358                        		__sub.wi	128
         01:CD57  38         			sec
         01:CD58  E9 80      			sbc.l	#128
         01:CD5A  B0 01      			bcs	!+
         01:CD5C  88         			dey
         01:CD5D             	!:
 8359                        		__st.umq	__update_PLAYER_end - 3  /* camera_y_move */
         01:CD5D  8D 0A 23   			sta	__update_PLAYER_end - 3
 8360                        	
 8361                        		.dbg	line,	"include\routines_LEVELS.c", 1789; sgx_map_pxl_y += camera_y_move;
 8362                        		__ld.um		__update_PLAYER_end - 3  /* camera_y_move */
         01:CD60  AD 0A 23   			lda	__update_PLAYER_end - 3
         01:CD63  C2         			cly
 8363                        		__add_st.wmq	_sgx_map_pxl_y
         01:CD64  18         			clc
         01:CD65  6D 90 26   			adc.l	_sgx_map_pxl_y
         01:CD68  8D 90 26   			sta.l	_sgx_map_pxl_y
         01:CD6B  98         			tya
         01:CD6C  6D 91 26   			adc.h	_sgx_map_pxl_y
         01:CD6F  8D 91 26   			sta.h	_sgx_map_pxl_y
 8364                        	
 8365                        		.dbg	line,	"include\routines_LEVELS.c", 1791; // IF THE CAMERA HAS REACHED ITS MAX (LOWEST) POSITION //
 8366                        	
 8367                        		.dbg	line,	"include\routines_LEVELS.c", 1792; if(sgx_map_pxl_y > camera_max_y_position)
 8368                        		__ld.wm		_sgx_map_pxl_y
         01:CD72  AD 90 26   			lda.l	_sgx_map_pxl_y
         01:CD75  AC 91 26   			ldy.h	_sgx_map_pxl_y
 8369                        		__ugt_w.wm	_camera_max_y_position
         01:CD78  18         			clc			; Subtract memory+1 from Y:A.
         01:CD79  ED D6 24   			sbc.l	_camera_max_y_position
         01:CD7C  98         			tya
         01:CD7D  ED D7 24   			sbc.h	_camera_max_y_position		; CS if Y:A > memory.
 8370                        		__bfalse	.LL325
         01:CD80  90 0C      			bcc	.LL325
 8371                        	
 8372                        		.dbg	line,	"include\routines_LEVELS.c", 1793; {
 8373                        	
 8374                        		.dbg	line,	"include\routines_LEVELS.c", 1794; // THE CAMERA CAN NOT MOVE LOWER //
 8375                        	
 8376                        		.dbg	line,	"include\routines_LEVELS.c", 1795; sgx_map_pxl_y = camera_max_y_position;
 8377                        		__ld.wm		_camera_max_y_position
         01:CD82  AD D6 24   			lda.l	_camera_max_y_position
         01:CD85  AC D7 24   			ldy.h	_camera_max_y_position
 8378                        		__st.wmq	_sgx_map_pxl_y
         01:CD88  8D 90 26   			sta.l	_sgx_map_pxl_y
         01:CD8B  8C 91 26   			sty.h	_sgx_map_pxl_y
 8379                        	
 8380                        		.dbg	line,	"include\routines_LEVELS.c", 1796; }
 8381                        	
 8382                        		.dbg	line,	"include\routines_LEVELS.c", 1798; // THE PLAYER STAYS AT ITS BASE Y POSITION //
 8383                        	
 8384                        		.dbg	line,	"include\routines_LEVELS.c", 1799; player_pos_y = PLAYER_BASE_Y_POS;
 8385    01:CD8E             	.LL325:
 8386                        		__st.wmiq	128, _player_pos_y
         01:CD8E  A9 80      			lda.l	#128
         01:CD90  8D D4 24   			sta.l	_player_pos_y
         01:CD93  9C D5 24   			stz.h	_player_pos_y
 8387                        	
 8388                        		.dbg	line,	"include\routines_LEVELS.c", 1801; spr_y(player_pos_y);
 8389                        		__ld.wm		_player_pos_y
         01:CD96  AD D4 24   			lda.l	_player_pos_y
         01:CD99  AC D5 24   			ldy.h	_player_pos_y
 8390                        		__call		_spr_y.1
         01:CD9C  20 19 E8   			call	_spr_y.1
 8391                        	
 8392                        		.dbg	line,	"include\routines_LEVELS.c", 1802; }
 8393                        	
 8394                        		.dbg	line,	"include\routines_LEVELS.c", 1805; // UPDATE JUMP INDEX IN THE ARRAY //
 8395                        	
 8396                        		.dbg	line,	"include\routines_LEVELS.c", 1806; if(player_index_jump < jump_max_index)
 8397    01:CD9F             	.LL324:
 8398                        		__ld.umq	_player_index_jump
         01:CD9F  AD 1A 23   			lda	_player_index_jump
 8399                        		__ult_b.umq	_jump_max_index
         01:CDA2  CD 20 23   			cmp	_jump_max_index		; Subtract memory from A.
         01:CDA5  6A         			ror	a		; CC if A < memory.
         01:CDA6  49 80      			eor	#$80
         01:CDA8  2A         			rol	a
 8400                        		__bfalse	.LL326
         01:CDA9  90 03      			bcc	.LL326
 8401                        	
 8402                        		.dbg	line,	"include\routines_LEVELS.c", 1807; {
 8403                        	
 8404                        		.dbg	line,	"include\routines_LEVELS.c", 1808; player_index_jump += 1;
 8405                        		__add_st.umiq	1, _player_index_jump
         01:CDAB  EE 1A 23   			inc	_player_index_jump
 8406                        	
 8407                        		.dbg	line,	"include\routines_LEVELS.c", 1809; }
 8408                        	
 8409                        		.dbg	line,	"include\routines_LEVELS.c", 1814; //--------------------------------------------------------------------------------------//
 8410                        	
 8411                        		.dbg	line,	"include\routines_LEVELS.c", 1815; //                                   FLOOR COLLISION                                    //
 8412                        	
 8413                        		.dbg	line,	"include\routines_LEVELS.c", 1816; //--------------------------------------------------------------------------------------//
 8414                        	
 8415                        		.dbg	line,	"include\routines_LEVELS.c", 1818; if(player_index_jump > 14)
 8416    01:CDAE             	.LL326:
 8417                        		__ld.umq	_player_index_jump
         01:CDAE  AD 1A 23   			lda	_player_index_jump
 8418                        		__ugt_b.uiq	14
         01:CDB1  18         			clc			; Subtract integer+1 from A.
         01:CDB2  E9 0E      			sbc	#14		; CS if A > integer.
 8419                        		__bfalse	.LL327
         01:CDB4  B0 03 4C 69			bcc	.LL327
         01:CDB8  CF          
 8420                        	
 8421                        		.dbg	line,	"include\routines_LEVELS.c", 1819; {
 8422                        	
 8423                        		.dbg	line,	"include\routines_LEVELS.c", 1820; // CHECK COLLISION WITH LEFT FLOOR //
 8424                        	
 8425                        		.dbg	line,	"include\routines_LEVELS.c", 1821; check_BG( 10 , 32 );
 8426                        		__ld.wi		10
         01:CDB9  A9 0A      			lda.l	#10
         01:CDBB  C2         			cly
 8427                        		__pusharg.wr
         01:CDBC  A6 8D      			ldx	<__sp
         01:CDBE  CA         			dex
         01:CDBF  CA         			dex
         01:CDC0  95 08      			sta.l	<__stack, x
         01:CDC2  94 09      			sty.h	<__stack, x
         01:CDC4  86 8D      			stx	<__sp
 8428                        		__ld.wi		32
         01:CDC6  A9 20      			lda.l	#32
         01:CDC8  C2         			cly
 8429                        		__pusharg.wr
         01:CDC9  A6 8D      			ldx	<__sp
         01:CDCB  CA         			dex
         01:CDCC  CA         			dex
         01:CDCD  95 08      			sta.l	<__stack, x
         01:CDCF  94 09      			sty.h	<__stack, x
         01:CDD1  86 8D      			stx	<__sp
 8430                        		__call		_check_BG
         01:CDD3  20 6D FF   			call	_check_BG
 8431                        	
 8432                        		.dbg	line,	"include\routines_LEVELS.c", 1823; // IF PLAYER TOUCHES THE GROUND TO THE LEFT //
 8433                        	
 8434                        		.dbg	line,	"include\routines_LEVELS.c", 1824; if(map_blk_flag == TILE_BG)
 8435                        		__ld.umq	_map_blk_flag
         01:CDD6  AD AF 2B   			lda	_map_blk_flag
 8436                        		__equ_b.uiq	1
         01:CDD9  C9 01      			cmp	#1
         01:CDDB  F0 01      			beq	!+
         01:CDDD  18         			clc
         01:CDDE             	!:
 8437                        		__bfalse	.LL328
         01:CDDE  B0 03 4C 91			bcc	.LL328
         01:CDE2  CE          
 8438                        	
 8439                        		.dbg	line,	"include\routines_LEVELS.c", 1825; {
 8440                        	
 8441                        		.dbg	line,	"include\routines_LEVELS.c", 1826; // CALCULATE HOW MANY PIXELS THE PLAYER MOVED INTO THE GROUND //
 8442                        	
 8443                        		.dbg	line,	"include\routines_LEVELS.c", 1827; for(i=1; i<11 ; i++)
 8444                        		__st.umiq	1, __update_PLAYER_end - 2  /* i */
         01:CDE3  A9 01      			lda.l	#1
         01:CDE5  8D 0B 23   			sta	__update_PLAYER_end - 2
 8445    01:CDE8             	.LL329:
 8446                        		__ld.umq	__update_PLAYER_end - 2  /* i */
         01:CDE8  AD 0B 23   			lda	__update_PLAYER_end - 2
 8447                        		__ult_b.uiq	11
         01:CDEB  C9 0B      			cmp	#11		; Subtract integer from A.
         01:CDED  6A         			ror	a		; CC if A < integer.
         01:CDEE  49 80      			eor	#$80
         01:CDF0  2A         			rol	a
 8448                        		__btrue		.LL331
         01:CDF1  B0 07      			bcs	.LL331
 8449                        		__bra		.LL332
         01:CDF3  80 7D      			bra	.LL332
 8450    01:CDF5             	.LL330:
 8451                        		__inc.umq	__update_PLAYER_end - 2  /* i */
         01:CDF5  EE 0B 23   			inc	__update_PLAYER_end - 2
 8452                        		__bra		.LL329
         01:CDF8  80 EE      			bra	.LL329
 8453    01:CDFA             	.LL331:
 8454                        	
 8455                        		.dbg	line,	"include\routines_LEVELS.c", 1828; {
 8456                        	
 8457                        		.dbg	line,	"include\routines_LEVELS.c", 1829; check_TILE_DEPTH( 10 , i);
 8458                        		__ld.wi		10
         01:CDFA  A9 0A      			lda.l	#10
         01:CDFC  C2         			cly
 8459                        		__pusharg.wr
         01:CDFD  A6 8D      			ldx	<__sp
         01:CDFF  CA         			dex
         01:CE00  CA         			dex
         01:CE01  95 08      			sta.l	<__stack, x
         01:CE03  94 09      			sty.h	<__stack, x
         01:CE05  86 8D      			stx	<__sp
 8460                        		__ld.um		__update_PLAYER_end - 2  /* i */
         01:CE07  AD 0B 23   			lda	__update_PLAYER_end - 2
         01:CE0A  C2         			cly
 8461                        		__pusharg.wr
         01:CE0B  A6 8D      			ldx	<__sp
         01:CE0D  CA         			dex
         01:CE0E  CA         			dex
         01:CE0F  95 08      			sta.l	<__stack, x
         01:CE11  94 09      			sty.h	<__stack, x
         01:CE13  86 8D      			stx	<__sp
 8462                        		__call		_check_TILE_DEPTH
         01:CE15  20 59 FF   			call	_check_TILE_DEPTH
 8463                        	
 8464                        		.dbg	line,	"include\routines_LEVELS.c", 1831; if(map_blk_flag == TILE_EMPTY)
 8465                        		__not.um	_map_blk_flag
         01:CE18  AD AF 2B   			lda	_map_blk_flag
         01:CE1B  18         			clc
         01:CE1C  D0 01      			bne	!+
         01:CE1E  38         			sec
         01:CE1F             	!:
 8466                        		__bfalse	.LL333
         01:CE1F  90 D4      			bcc	.LL333
 8467                        	
 8468                        		.dbg	line,	"include\routines_LEVELS.c", 1832; {
 8469                        	
 8470                        		.dbg	line,	"include\routines_LEVELS.c", 1833; if(player_pos_y != PLAYER_BASE_Y_POS)
 8471                        		__ld.wm		_player_pos_y
         01:CE21  AD D4 24   			lda.l	_player_pos_y
         01:CE24  AC D5 24   			ldy.h	_player_pos_y
 8472                        		__neq_w.wi	128
         01:CE27  38         			sec
         01:CE28  49 80      			eor.l	#128
         01:CE2A  D0 06      			bne	!+
         01:CE2C  98         			tya
         01:CE2D  49 00      			eor.h	#128
         01:CE2F  D0 01      			bne	!+
         01:CE31  18         			clc
         01:CE32             	!:
 8473                        		__bfalse	.LL334
         01:CE32  90 1E      			bcc	.LL334
 8474                        	
 8475                        		.dbg	line,	"include\routines_LEVELS.c", 1834; {
 8476                        	
 8477                        		.dbg	line,	"include\routines_LEVELS.c", 1835; player_pos_y -= (i - 1);
 8478                        		__ld.um		__update_PLAYER_end - 2  /* i */
         01:CE34  AD 0B 23   			lda	__update_PLAYER_end - 2
         01:CE37  C2         			cly
 8479                        		__sub.wi	1
         01:CE38  38         			sec
         01:CE39  E9 01      			sbc.l	#1
         01:CE3B  B0 01      			bcs	!+
         01:CE3D  88         			dey
         01:CE3E             	!:
 8480                        		__isub_st.wmq	_player_pos_y
         01:CE3E  38         			sec
         01:CE3F  49 FF      			eor	#$FF
         01:CE41  6D D4 24   			adc.l	_player_pos_y
         01:CE44  8D D4 24   			sta.l	_player_pos_y
         01:CE47  98         			tya
         01:CE48  49 FF      			eor	#$FF
         01:CE4A  6D D5 24   			adc.h	_player_pos_y
         01:CE4D  8D D5 24   			sta.h	_player_pos_y
 8481                        	
 8482                        		.dbg	line,	"include\routines_LEVELS.c", 1836; }
 8483                        	
 8484                        		.dbg	line,	"include\routines_LEVELS.c", 1838; else
 8485                        		__bra		.LL335
         01:CE50  80 20      			bra	.LL335
 8486    01:CE52             	.LL334:
 8487                        	
 8488                        		.dbg	line,	"include\routines_LEVELS.c", 1839; {
 8489                        	
 8490                        		.dbg	line,	"include\routines_LEVELS.c", 1840; sgx_map_pxl_y -= (i - 1);
 8491                        		__ld.um		__update_PLAYER_end - 2  /* i */
         01:CE52  AD 0B 23   			lda	__update_PLAYER_end - 2
         01:CE55  C2         			cly
 8492                        		__sub.wi	1
         01:CE56  38         			sec
         01:CE57  E9 01      			sbc.l	#1
         01:CE59  B0 01      			bcs	!+
         01:CE5B  88         			dey
         01:CE5C             	!:
 8493                        		__isub_st.wmq	_sgx_map_pxl_y
         01:CE5C  38         			sec
         01:CE5D  49 FF      			eor	#$FF
         01:CE5F  6D 90 26   			adc.l	_sgx_map_pxl_y
         01:CE62  8D 90 26   			sta.l	_sgx_map_pxl_y
         01:CE65  98         			tya
         01:CE66  49 FF      			eor	#$FF
         01:CE68  6D 91 26   			adc.h	_sgx_map_pxl_y
         01:CE6B  8D 91 26   			sta.h	_sgx_map_pxl_y
 8494                        	
 8495                        		.dbg	line,	"include\routines_LEVELS.c", 1841; }
 8496    01:CE6E             	.LL335	.alias		.LL332
 8497                        	
 8498                        		.dbg	line,	"include\routines_LEVELS.c", 1843; break;
 8499                        		__bra		.LL332
         01:CE6E  80 02      			bra	.LL332
 8500                        	
 8501                        		.dbg	line,	"include\routines_LEVELS.c", 1844; }
 8502                        	
 8503                        		.dbg	line,	"include\routines_LEVELS.c", 1845; }
 8504    01:CE70             	.LL333	.alias		.LL330
 8505                        		__bra		.LL330
         01:CE70  80 83      			bra	.LL330
 8506    01:CE72             	.LL332:
 8507                        	
 8508                        		.dbg	line,	"include\routines_LEVELS.c", 1847; // SET PLAYER SPRITE NEW POSITION //
 8509                        	
 8510                        		.dbg	line,	"include\routines_LEVELS.c", 1848; spr_y(player_pos_y);
 8511                        		__ld.wm		_player_pos_y
         01:CE72  AD D4 24   			lda.l	_player_pos_y
         01:CE75  AC D5 24   			ldy.h	_player_pos_y
 8512                        		__call		_spr_y.1
         01:CE78  20 19 E8   			call	_spr_y.1
 8513                        	
 8514                        		.dbg	line,	"include\routines_LEVELS.c", 1850; player_counter_anim = 1;
 8515                        		__st.umiq	1, _player_counter_anim
         01:CE7B  A9 01      			lda.l	#1
         01:CE7D  8D 19 23   			sta	_player_counter_anim
 8516                        	
 8517                        		.dbg	line,	"include\routines_LEVELS.c", 1851; player_index_jump = 0;
 8518                        		__st.umiq	0, _player_index_jump
         01:CE80  9C 1A 23   			stz	_player_index_jump
 8519                        	
 8520                        		.dbg	line,	"include\routines_LEVELS.c", 1852; jump_ladder = FALSE;
 8521                        		__st.umiq	0, _jump_ladder
         01:CE83  9C 1F 23   			stz	_jump_ladder
 8522                        	
 8523                        		.dbg	line,	"include\routines_LEVELS.c", 1853; jump_max_index = 34;
 8524                        		__st.umiq	34, _jump_max_index
         01:CE86  A9 22      			lda.l	#34
         01:CE88  8D 20 23   			sta	_jump_max_index
 8525                        	
 8526                        		.dbg	line,	"include\routines_LEVELS.c", 1854; player_state = STATE_IDLE;
 8527                        		__st.umiq	0, _player_state
         01:CE8B  9C 16 23   			stz	_player_state
 8528                        	
 8529                        		.dbg	line,	"include\routines_LEVELS.c", 1855; return;
 8530                        		__bra		.LL214
         01:CE8E  4C 3D DD   			bra	.LL214
 8531                        	
 8532                        		.dbg	line,	"include\routines_LEVELS.c", 1856; }
 8533                        	
 8534                        		.dbg	line,	"include\routines_LEVELS.c", 1858; // IF PLAYER TOUCHES THE GROUND TO THE RIGHT //
 8535                        	
 8536                        		.dbg	line,	"include\routines_LEVELS.c", 1859; else
 8537    01:CE91             	.LL328:
 8538                        	
 8539                        		.dbg	line,	"include\routines_LEVELS.c", 1860; {
 8540                        	
 8541                        		.dbg	line,	"include\routines_LEVELS.c", 1861; // CHECK COLLISION WITH RIGHT FLOOR //
 8542                        	
 8543                        		.dbg	line,	"include\routines_LEVELS.c", 1862; check_BG( 22 , 32 );
 8544                        		__ld.wi		22
         01:CE91  A9 16      			lda.l	#22
         01:CE93  C2         			cly
 8545                        		__pusharg.wr
         01:CE94  A6 8D      			ldx	<__sp
         01:CE96  CA         			dex
         01:CE97  CA         			dex
         01:CE98  95 08      			sta.l	<__stack, x
         01:CE9A  94 09      			sty.h	<__stack, x
         01:CE9C  86 8D      			stx	<__sp
 8546                        		__ld.wi		32
         01:CE9E  A9 20      			lda.l	#32
         01:CEA0  C2         			cly
 8547                        		__pusharg.wr
         01:CEA1  A6 8D      			ldx	<__sp
         01:CEA3  CA         			dex
         01:CEA4  CA         			dex
         01:CEA5  95 08      			sta.l	<__stack, x
         01:CEA7  94 09      			sty.h	<__stack, x
         01:CEA9  86 8D      			stx	<__sp
 8548                        		__call		_check_BG
         01:CEAB  20 6D FF   			call	_check_BG
 8549                        	
 8550                        		.dbg	line,	"include\routines_LEVELS.c", 1864; if(map_blk_flag == TILE_BG)
 8551                        		__ld.umq	_map_blk_flag
         01:CEAE  AD AF 2B   			lda	_map_blk_flag
 8552                        		__equ_b.uiq	1
         01:CEB1  C9 01      			cmp	#1
         01:CEB3  F0 01      			beq	!+
         01:CEB5  18         			clc
         01:CEB6             	!:
 8553                        		__bfalse	.LL337
         01:CEB6  B0 03 4C 69			bcc	.LL337
         01:CEBA  CF          
 8554                        	
 8555                        		.dbg	line,	"include\routines_LEVELS.c", 1865; {
 8556                        	
 8557                        		.dbg	line,	"include\routines_LEVELS.c", 1866; // CALCULATE HOW MANY PIXELS THE PLAYER MOVED INTO THE GROUND //
 8558                        	
 8559                        		.dbg	line,	"include\routines_LEVELS.c", 1867; for(i=1; i<11 ; i++)
 8560                        		__st.umiq	1, __update_PLAYER_end - 2  /* i */
         01:CEBB  A9 01      			lda.l	#1
         01:CEBD  8D 0B 23   			sta	__update_PLAYER_end - 2
 8561    01:CEC0             	.LL338:
 8562                        		__ld.umq	__update_PLAYER_end - 2  /* i */
         01:CEC0  AD 0B 23   			lda	__update_PLAYER_end - 2
 8563                        		__ult_b.uiq	11
         01:CEC3  C9 0B      			cmp	#11		; Subtract integer from A.
         01:CEC5  6A         			ror	a		; CC if A < integer.
         01:CEC6  49 80      			eor	#$80
         01:CEC8  2A         			rol	a
 8564                        		__btrue		.LL340
         01:CEC9  B0 07      			bcs	.LL340
 8565                        		__bra		.LL341
         01:CECB  80 7D      			bra	.LL341
 8566    01:CECD             	.LL339:
 8567                        		__inc.umq	__update_PLAYER_end - 2  /* i */
         01:CECD  EE 0B 23   			inc	__update_PLAYER_end - 2
 8568                        		__bra		.LL338
         01:CED0  80 EE      			bra	.LL338
 8569    01:CED2             	.LL340:
 8570                        	
 8571                        		.dbg	line,	"include\routines_LEVELS.c", 1868; {
 8572                        	
 8573                        		.dbg	line,	"include\routines_LEVELS.c", 1869; check_TILE_DEPTH( 22 , i);
 8574                        		__ld.wi		22
         01:CED2  A9 16      			lda.l	#22
         01:CED4  C2         			cly
 8575                        		__pusharg.wr
         01:CED5  A6 8D      			ldx	<__sp
         01:CED7  CA         			dex
         01:CED8  CA         			dex
         01:CED9  95 08      			sta.l	<__stack, x
         01:CEDB  94 09      			sty.h	<__stack, x
         01:CEDD  86 8D      			stx	<__sp
 8576                        		__ld.um		__update_PLAYER_end - 2  /* i */
         01:CEDF  AD 0B 23   			lda	__update_PLAYER_end - 2
         01:CEE2  C2         			cly
 8577                        		__pusharg.wr
         01:CEE3  A6 8D      			ldx	<__sp
         01:CEE5  CA         			dex
         01:CEE6  CA         			dex
         01:CEE7  95 08      			sta.l	<__stack, x
         01:CEE9  94 09      			sty.h	<__stack, x
         01:CEEB  86 8D      			stx	<__sp
 8578                        		__call		_check_TILE_DEPTH
         01:CEED  20 59 FF   			call	_check_TILE_DEPTH
 8579                        	
 8580                        		.dbg	line,	"include\routines_LEVELS.c", 1871; if(map_blk_flag == TILE_EMPTY)
 8581                        		__not.um	_map_blk_flag
         01:CEF0  AD AF 2B   			lda	_map_blk_flag
         01:CEF3  18         			clc
         01:CEF4  D0 01      			bne	!+
         01:CEF6  38         			sec
         01:CEF7             	!:
 8582                        		__bfalse	.LL342
         01:CEF7  90 D4      			bcc	.LL342
 8583                        	
 8584                        		.dbg	line,	"include\routines_LEVELS.c", 1872; {
 8585                        	
 8586                        		.dbg	line,	"include\routines_LEVELS.c", 1873; if(player_pos_y != PLAYER_BASE_Y_POS)
 8587                        		__ld.wm		_player_pos_y
         01:CEF9  AD D4 24   			lda.l	_player_pos_y
         01:CEFC  AC D5 24   			ldy.h	_player_pos_y
 8588                        		__neq_w.wi	128
         01:CEFF  38         			sec
         01:CF00  49 80      			eor.l	#128
         01:CF02  D0 06      			bne	!+
         01:CF04  98         			tya
         01:CF05  49 00      			eor.h	#128
         01:CF07  D0 01      			bne	!+
         01:CF09  18         			clc
         01:CF0A             	!:
 8589                        		__bfalse	.LL343
         01:CF0A  90 1E      			bcc	.LL343
 8590                        	
 8591                        		.dbg	line,	"include\routines_LEVELS.c", 1874; {
 8592                        	
 8593                        		.dbg	line,	"include\routines_LEVELS.c", 1875; player_pos_y -= (i - 1);
 8594                        		__ld.um		__update_PLAYER_end - 2  /* i */
         01:CF0C  AD 0B 23   			lda	__update_PLAYER_end - 2
         01:CF0F  C2         			cly
 8595                        		__sub.wi	1
         01:CF10  38         			sec
         01:CF11  E9 01      			sbc.l	#1
         01:CF13  B0 01      			bcs	!+
         01:CF15  88         			dey
         01:CF16             	!:
 8596                        		__isub_st.wmq	_player_pos_y
         01:CF16  38         			sec
         01:CF17  49 FF      			eor	#$FF
         01:CF19  6D D4 24   			adc.l	_player_pos_y
         01:CF1C  8D D4 24   			sta.l	_player_pos_y
         01:CF1F  98         			tya
         01:CF20  49 FF      			eor	#$FF
         01:CF22  6D D5 24   			adc.h	_player_pos_y
         01:CF25  8D D5 24   			sta.h	_player_pos_y
 8597                        	
 8598                        		.dbg	line,	"include\routines_LEVELS.c", 1876; }
 8599                        	
 8600                        		.dbg	line,	"include\routines_LEVELS.c", 1878; else
 8601                        		__bra		.LL344
         01:CF28  80 20      			bra	.LL344
 8602    01:CF2A             	.LL343:
 8603                        	
 8604                        		.dbg	line,	"include\routines_LEVELS.c", 1879; {
 8605                        	
 8606                        		.dbg	line,	"include\routines_LEVELS.c", 1880; sgx_map_pxl_y -= (i - 1);
 8607                        		__ld.um		__update_PLAYER_end - 2  /* i */
         01:CF2A  AD 0B 23   			lda	__update_PLAYER_end - 2
         01:CF2D  C2         			cly
 8608                        		__sub.wi	1
         01:CF2E  38         			sec
         01:CF2F  E9 01      			sbc.l	#1
         01:CF31  B0 01      			bcs	!+
         01:CF33  88         			dey
         01:CF34             	!:
 8609                        		__isub_st.wmq	_sgx_map_pxl_y
         01:CF34  38         			sec
         01:CF35  49 FF      			eor	#$FF
         01:CF37  6D 90 26   			adc.l	_sgx_map_pxl_y
         01:CF3A  8D 90 26   			sta.l	_sgx_map_pxl_y
         01:CF3D  98         			tya
         01:CF3E  49 FF      			eor	#$FF
         01:CF40  6D 91 26   			adc.h	_sgx_map_pxl_y
         01:CF43  8D 91 26   			sta.h	_sgx_map_pxl_y
 8610                        	
 8611                        		.dbg	line,	"include\routines_LEVELS.c", 1881; }
 8612    01:CF46             	.LL344	.alias		.LL341
 8613                        	
 8614                        		.dbg	line,	"include\routines_LEVELS.c", 1883; break;
 8615                        		__bra		.LL341
         01:CF46  80 02      			bra	.LL341
 8616                        	
 8617                        		.dbg	line,	"include\routines_LEVELS.c", 1884; }
 8618                        	
 8619                        		.dbg	line,	"include\routines_LEVELS.c", 1885; }
 8620    01:CF48             	.LL342	.alias		.LL339
 8621                        		__bra		.LL339
         01:CF48  80 83      			bra	.LL339
 8622    01:CF4A             	.LL341:
 8623                        	
 8624                        		.dbg	line,	"include\routines_LEVELS.c", 1887; // SET PLAYER SPRITE NEW POSITION //
 8625                        	
 8626                        		.dbg	line,	"include\routines_LEVELS.c", 1888; spr_y(player_pos_y);
 8627                        		__ld.wm		_player_pos_y
         01:CF4A  AD D4 24   			lda.l	_player_pos_y
         01:CF4D  AC D5 24   			ldy.h	_player_pos_y
 8628                        		__call		_spr_y.1
         01:CF50  20 19 E8   			call	_spr_y.1
 8629                        	
 8630                        		.dbg	line,	"include\routines_LEVELS.c", 1890; player_counter_anim = 1;
 8631                        		__st.umiq	1, _player_counter_anim
         01:CF53  A9 01      			lda.l	#1
         01:CF55  8D 19 23   			sta	_player_counter_anim
 8632                        	
 8633                        		.dbg	line,	"include\routines_LEVELS.c", 1891; player_index_jump = 0;
 8634                        		__st.umiq	0, _player_index_jump
         01:CF58  9C 1A 23   			stz	_player_index_jump
 8635                        	
 8636                        		.dbg	line,	"include\routines_LEVELS.c", 1892; jump_ladder = FALSE;
 8637                        		__st.umiq	0, _jump_ladder
         01:CF5B  9C 1F 23   			stz	_jump_ladder
 8638                        	
 8639                        		.dbg	line,	"include\routines_LEVELS.c", 1893; jump_max_index = 34;
 8640                        		__st.umiq	34, _jump_max_index
         01:CF5E  A9 22      			lda.l	#34
         01:CF60  8D 20 23   			sta	_jump_max_index
 8641                        	
 8642                        		.dbg	line,	"include\routines_LEVELS.c", 1894; player_state = STATE_IDLE;
 8643                        		__st.umiq	0, _player_state
         01:CF63  9C 16 23   			stz	_player_state
 8644                        	
 8645                        		.dbg	line,	"include\routines_LEVELS.c", 1895; return;
 8646                        		__bra		.LL214
         01:CF66  4C 3D DD   			bra	.LL214
 8647                        	
 8648                        		.dbg	line,	"include\routines_LEVELS.c", 1896; }
 8649                        	
 8650                        		.dbg	line,	"include\routines_LEVELS.c", 1897; }
 8651    01:CF69             	.LL337:
 8652    01:CF69             	.LL336:
 8653                        	
 8654                        		.dbg	line,	"include\routines_LEVELS.c", 1898; }
 8655                        	
 8656                        		.dbg	line,	"include\routines_LEVELS.c", 1903; //--------------------------------------------------------------------------------------//
 8657                        	
 8658                        		.dbg	line,	"include\routines_LEVELS.c", 1904; //                                   LADDER COLLISION                                   //
 8659                        	
 8660                        		.dbg	line,	"include\routines_LEVELS.c", 1905; //--------------------------------------------------------------------------------------//
 8661                        	
 8662                        		.dbg	line,	"include\routines_LEVELS.c", 1907; if(player_index_jump > 4)
 8663    01:CF69             	.LL327:
 8664                        		__ld.umq	_player_index_jump
         01:CF69  AD 1A 23   			lda	_player_index_jump
 8665                        		__ugt_b.uiq	4
         01:CF6C  18         			clc			; Subtract integer+1 from A.
         01:CF6D  E9 04      			sbc	#4		; CS if A > integer.
 8666                        		__bfalse	.LL345
         01:CF6F  B0 03 4C 04			bcc	.LL345
         01:CF73  D0          
 8667                        	
 8668                        		.dbg	line,	"include\routines_LEVELS.c", 1908; {
 8669                        	
 8670                        		.dbg	line,	"include\routines_LEVELS.c", 1909; check_BG( 16 , 16 );
 8671                        		__ld.wi		16
         01:CF74  A9 10      			lda.l	#16
         01:CF76  C2         			cly
 8672                        		__pusharg.wr
         01:CF77  A6 8D      			ldx	<__sp
         01:CF79  CA         			dex
         01:CF7A  CA         			dex
         01:CF7B  95 08      			sta.l	<__stack, x
         01:CF7D  94 09      			sty.h	<__stack, x
         01:CF7F  86 8D      			stx	<__sp
 8673                        		__ld.wi		16
         01:CF81  A9 10      			lda.l	#16
         01:CF83  C2         			cly
 8674                        		__pusharg.wr
         01:CF84  A6 8D      			ldx	<__sp
         01:CF86  CA         			dex
         01:CF87  CA         			dex
         01:CF88  95 08      			sta.l	<__stack, x
         01:CF8A  94 09      			sty.h	<__stack, x
         01:CF8C  86 8D      			stx	<__sp
 8675                        		__call		_check_BG
         01:CF8E  20 6D FF   			call	_check_BG
 8676                        	
 8677                        		.dbg	line,	"include\routines_LEVELS.c", 1911; // IF PLAYER HITS THE LADDER //
 8678                        	
 8679                        		.dbg	line,	"include\routines_LEVELS.c", 1912; if(map_blk_flag == TILE_LADDER)
 8680                        		__ld.umq	_map_blk_flag
         01:CF91  AD AF 2B   			lda	_map_blk_flag
 8681                        		__equ_b.uiq	2
         01:CF94  C9 02      			cmp	#2
         01:CF96  F0 01      			beq	!+
         01:CF98  18         			clc
         01:CF99             	!:
 8682                        		__bfalse	.LL346
         01:CF99  90 69      			bcc	.LL346
 8683                        	
 8684                        		.dbg	line,	"include\routines_LEVELS.c", 1913; {
 8685                        	
 8686                        		.dbg	line,	"include\routines_LEVELS.c", 1914; // CAMERA GOES 8 PX BACKWARD //
 8687                        	
 8688                        		.dbg	line,	"include\routines_LEVELS.c", 1915; sgx_map_pxl_x = ( (sgx_map_pxl_x >> 3) << 3 );
 8689                        		__ld.wm		_sgx_map_pxl_x
         01:CF9B  AD 8E 26   			lda.l	_sgx_map_pxl_x
         01:CF9E  AC 8F 26   			ldy.h	_sgx_map_pxl_x
 8690                        		__lsr.wi	3
         01:CFA1  84 00      			sty	__temp
         01:CFA3  20 3A E2   			jsr	lsrw3
 8691                        		__asl.wi	3
         01:CFA6  84 00      			sty	__temp
         01:CFA8  20 D7 E1   			jsr	aslw3
 8692                        		__st.wmq	_sgx_map_pxl_x
         01:CFAB  8D 8E 26   			sta.l	_sgx_map_pxl_x
         01:CFAE  8C 8F 26   			sty.h	_sgx_map_pxl_x
 8693                        	
 8694                        		.dbg	line,	"include\routines_LEVELS.c", 1917; // SO WE UPDATE THE MAP //
 8695                        	
 8696                        		.dbg	line,	"include\routines_LEVELS.c", 1918; sgx_scroll_map();
 8697                        		__call		_sgx_scroll_map
         01:CFB1  20 81 FF   			call	_sgx_scroll_map
 8698                        	
 8699                        		.dbg	line,	"include\routines_LEVELS.c", 1920; // CHECK IF THE PLAYER STANDS RIGHT TO THE LADDER //
 8700                        	
 8701                        		.dbg	line,	"include\routines_LEVELS.c", 1921; check_BG( 31 , 16 );
 8702                        		__ld.wi		31
         01:CFB4  A9 1F      			lda.l	#31
         01:CFB6  C2         			cly
 8703                        		__pusharg.wr
         01:CFB7  A6 8D      			ldx	<__sp
         01:CFB9  CA         			dex
         01:CFBA  CA         			dex
         01:CFBB  95 08      			sta.l	<__stack, x
         01:CFBD  94 09      			sty.h	<__stack, x
         01:CFBF  86 8D      			stx	<__sp
 8704                        		__ld.wi		16
         01:CFC1  A9 10      			lda.l	#16
         01:CFC3  C2         			cly
 8705                        		__pusharg.wr
         01:CFC4  A6 8D      			ldx	<__sp
         01:CFC6  CA         			dex
         01:CFC7  CA         			dex
         01:CFC8  95 08      			sta.l	<__stack, x
         01:CFCA  94 09      			sty.h	<__stack, x
         01:CFCC  86 8D      			stx	<__sp
 8706                        		__call		_check_BG
         01:CFCE  20 6D FF   			call	_check_BG
 8707                        	
 8708                        		.dbg	line,	"include\routines_LEVELS.c", 1923; if(map_blk_flag == TILE_LADDER)
 8709                        		__ld.umq	_map_blk_flag
         01:CFD1  AD AF 2B   			lda	_map_blk_flag
 8710                        		__equ_b.uiq	2
         01:CFD4  C9 02      			cmp	#2
         01:CFD6  F0 01      			beq	!+
         01:CFD8  18         			clc
         01:CFD9             	!:
 8711                        		__bfalse	.LL347
         01:CFD9  90 0E      			bcc	.LL347
 8712                        	
 8713                        		.dbg	line,	"include\routines_LEVELS.c", 1924; {
 8714                        	
 8715                        		.dbg	line,	"include\routines_LEVELS.c", 1925; sgx_map_pxl_x += 8;
 8716                        		__add_st.wmiq	8, _sgx_map_pxl_x
         01:CFDB  18         			clc
         01:CFDC  AD 8E 26   			lda.l	_sgx_map_pxl_x
         01:CFDF  69 08      			adc.l	#8
         01:CFE1  8D 8E 26   			sta.l	_sgx_map_pxl_x
         01:CFE4  90 03      			bcc	!+
         01:CFE6  EE 8F 26   			inc.h	_sgx_map_pxl_x
         01:CFE9             	!:
 8717                        	
 8718                        		.dbg	line,	"include\routines_LEVELS.c", 1926; }
 8719                        	
 8720                        		.dbg	line,	"include\routines_LEVELS.c", 1928; spr_pattern(PLAYER_HANG_VRAM_ADR);
 8721    01:CFE9             	.LL347:
 8722                        		__ld.wi		7936
         01:CFE9  62         			cla
         01:CFEA  A0 1F      			ldy.h	#7936
 8723                        		__call		_spr_pattern.1
         01:CFEC  20 26 E8   			call	_spr_pattern.1
 8724                        	
 8725                        		.dbg	line,	"include\routines_LEVELS.c", 1929; player_counter_anim = 0;
 8726                        		__st.umiq	0, _player_counter_anim
         01:CFEF  9C 19 23   			stz	_player_counter_anim
 8727                        	
 8728                        		.dbg	line,	"include\routines_LEVELS.c", 1930; player_index_jump = 0;
 8729                        		__st.umiq	0, _player_index_jump
         01:CFF2  9C 1A 23   			stz	_player_index_jump
 8730                        	
 8731                        		.dbg	line,	"include\routines_LEVELS.c", 1931; jump_ladder = TRUE;
 8732                        		__st.umiq	1, _jump_ladder
         01:CFF5  A9 01      			lda.l	#1
         01:CFF7  8D 1F 23   			sta	_jump_ladder
 8733                        	
 8734                        		.dbg	line,	"include\routines_LEVELS.c", 1932; jump_max_index = 29;
 8735                        		__st.umiq	29, _jump_max_index
         01:CFFA  A9 1D      			lda.l	#29
         01:CFFC  8D 20 23   			sta	_jump_max_index
 8736                        	
 8737                        		.dbg	line,	"include\routines_LEVELS.c", 1933; player_state = STATE_HANG;
 8738                        		__st.umiq	10, _player_state
         01:CFFF  A9 0A      			lda.l	#10
         01:D001  8D 16 23   			sta	_player_state
 8739                        	
 8740                        		.dbg	line,	"include\routines_LEVELS.c", 1934; }
 8741                        	
 8742                        		.dbg	line,	"include\routines_LEVELS.c", 1935; }
 8743    01:D004             	.LL346:
 8744                        	
 8745                        		.dbg	line,	"include\routines_LEVELS.c", 1938; // SET PLAYER SPRITE NEW POSITION //
 8746                        	
 8747                        		.dbg	line,	"include\routines_LEVELS.c", 1939; spr_y(player_pos_y);
 8748    01:D004             	.LL345:
 8749                        		__ld.wm		_player_pos_y
         01:D004  AD D4 24   			lda.l	_player_pos_y
         01:D007  AC D5 24   			ldy.h	_player_pos_y
 8750                        		__call		_spr_y.1
         01:D00A  20 19 E8   			call	_spr_y.1
 8751                        	
 8752                        		.dbg	line,	"include\routines_LEVELS.c", 1941; spr_set(weapon_id);
 8753                        		__ld.umq	_weapon_id
         01:D00D  AD 22 23   			lda	_weapon_id
 8754                        		__call		_spr_set.1
         01:D010  20 DD E7   			call	_spr_set.1
 8755                        	
 8756                        		.dbg	line,	"include\routines_LEVELS.c", 1942; spr_y(player_pos_y+8);
 8757                        		__ld.wm		_player_pos_y
         01:D013  AD D4 24   			lda.l	_player_pos_y
         01:D016  AC D5 24   			ldy.h	_player_pos_y
 8758                        		__add.wi	8
         01:D019  18         			clc
         01:D01A  69 08      			adc.l	#8
         01:D01C  90 01      			bcc	!+
         01:D01E  C8         			iny
         01:D01F             	!:
 8759                        		__call		_spr_y.1
         01:D01F  20 19 E8   			call	_spr_y.1
 8760                        	
 8761                        		.dbg	line,	"include\routines_LEVELS.c", 1943; }
 8762                        	
 8763                        		.dbg	line,	"include\routines_LEVELS.c", 1946; else if(player_state == STATE_JUMP_LEFT)
 8764                        		__bra		.LL348
         01:D022  4C 3D DD   			bra	.LL348
 8765    01:D025             	.LL312:
 8766                        		__ld.umq	_player_state
         01:D025  AD 16 23   			lda	_player_state
 8767                        		__equ_b.uiq	6
         01:D028  C9 06      			cmp	#6
         01:D02A  F0 01      			beq	!+
         01:D02C  18         			clc
         01:D02D             	!:
 8768                        		__bfalse	.LL349
         01:D02D  B0 03 4C 59			bcc	.LL349
         01:D031  D4          
 8769                        	
 8770                        		.dbg	line,	"include\routines_LEVELS.c", 1947; {
 8771                        	
 8772                        		.dbg	line,	"include\routines_LEVELS.c", 1948; unsigned char i, camera_y_move;
 8773                        	
 8774                        		.dbg	line,	"include\routines_LEVELS.c", 1949; i = 1;
 8775                        		__st.umiq	1, __update_PLAYER_end - 4  /* i */
         01:D032  A9 01      			lda.l	#1
         01:D034  8D 09 23   			sta	__update_PLAYER_end - 4
 8776                        	
 8777                        		.dbg	line,	"include\routines_LEVELS.c", 1952; // UPDATE PLAYER TILES //
 8778                        	
 8779                        		.dbg	line,	"include\routines_LEVELS.c", 1953; if(player_counter_anim == 0)
 8780                        		__not.um	_player_counter_anim
         01:D037  AD 19 23   			lda	_player_counter_anim
         01:D03A  18         			clc
         01:D03B  D0 01      			bne	!+
         01:D03D  38         			sec
         01:D03E             	!:
 8781                        		__bfalse	.LL350
         01:D03E  90 11      			bcc	.LL350
 8782                        	
 8783                        		.dbg	line,	"include\routines_LEVELS.c", 1954; {
 8784                        	
 8785                        		.dbg	line,	"include\routines_LEVELS.c", 1955; spr_set(player_id);
 8786                        		__ld.umq	_player_id
         01:D040  AD 15 23   			lda	_player_id
 8787                        		__call		_spr_set.1
         01:D043  20 DD E7   			call	_spr_set.1
 8788                        	
 8789                        		.dbg	line,	"include\routines_LEVELS.c", 1956; spr_pattern(PLAYER_JUMP_VRAM_ADR);
 8790                        		__ld.wi		7424
         01:D046  62         			cla
         01:D047  A0 1D      			ldy.h	#7424
 8791                        		__call		_spr_pattern.1
         01:D049  20 26 E8   			call	_spr_pattern.1
 8792                        	
 8793                        		.dbg	line,	"include\routines_LEVELS.c", 1958; player_counter_anim = 1;
 8794                        		__st.umiq	1, _player_counter_anim
         01:D04C  A9 01      			lda.l	#1
         01:D04E  8D 19 23   			sta	_player_counter_anim
 8795                        	
 8796                        		.dbg	line,	"include\routines_LEVELS.c", 1959; }
 8797                        	
 8798                        		.dbg	line,	"include\routines_LEVELS.c", 1962; // SELECT PLAYER SPRITE //
 8799                        	
 8800                        		.dbg	line,	"include\routines_LEVELS.c", 1963; spr_set(player_id);
 8801    01:D051             	.LL350:
 8802                        		__ld.umq	_player_id
         01:D051  AD 15 23   			lda	_player_id
 8803                        		__call		_spr_set.1
         01:D054  20 DD E7   			call	_spr_set.1
 8804                        	
 8805                        		.dbg	line,	"include\routines_LEVELS.c", 1966; //**************************************************************************************//
 8806                        	
 8807                        		.dbg	line,	"include\routines_LEVELS.c", 1967; //                                        H MOVE                                        //
 8808                        	
 8809                        		.dbg	line,	"include\routines_LEVELS.c", 1968; //**************************************************************************************//
 8810                        	
 8811                        		.dbg	line,	"include\routines_LEVELS.c", 1970; //--------------------------------------------------------------------------------------//
 8812                        	
 8813                        		.dbg	line,	"include\routines_LEVELS.c", 1971; //                                    WALL COLLISION                                    //
 8814                        	
 8815                        		.dbg	line,	"include\routines_LEVELS.c", 1972; //--------------------------------------------------------------------------------------//
 8816                        	
 8817                        		.dbg	line,	"include\routines_LEVELS.c", 1974; // CHECK COLLISION WITH BOTTOM LEFT WALL //
 8818                        	
 8819                        		.dbg	line,	"include\routines_LEVELS.c", 1975; check_BG( 8 , 31 );
 8820                        		__ld.wi		8
         01:D057  A9 08      			lda.l	#8
         01:D059  C2         			cly
 8821                        		__pusharg.wr
         01:D05A  A6 8D      			ldx	<__sp
         01:D05C  CA         			dex
         01:D05D  CA         			dex
         01:D05E  95 08      			sta.l	<__stack, x
         01:D060  94 09      			sty.h	<__stack, x
         01:D062  86 8D      			stx	<__sp
 8822                        		__ld.wi		31
         01:D064  A9 1F      			lda.l	#31
         01:D066  C2         			cly
 8823                        		__pusharg.wr
         01:D067  A6 8D      			ldx	<__sp
         01:D069  CA         			dex
         01:D06A  CA         			dex
         01:D06B  95 08      			sta.l	<__stack, x
         01:D06D  94 09      			sty.h	<__stack, x
         01:D06F  86 8D      			stx	<__sp
 8824                        		__call		_check_BG
         01:D071  20 6D FF   			call	_check_BG
 8825                        	
 8826                        		.dbg	line,	"include\routines_LEVELS.c", 1977; if(map_blk_flag != TILE_BG)
 8827                        		__ld.umq	_map_blk_flag
         01:D074  AD AF 2B   			lda	_map_blk_flag
 8828                        		__neq_b.uiq	1
         01:D077  38         			sec
         01:D078  49 01      			eor	#1
         01:D07A  D0 01      			bne	!+
         01:D07C  18         			clc
         01:D07D             	!:
 8829                        		__bfalse	.LL351
         01:D07D  90 78      			bcc	.LL351
 8830                        	
 8831                        		.dbg	line,	"include\routines_LEVELS.c", 1978; {
 8832                        	
 8833                        		.dbg	line,	"include\routines_LEVELS.c", 1979; // CHECK COLLISION WITH TOP RIGHT WALL //
 8834                        	
 8835                        		.dbg	line,	"include\routines_LEVELS.c", 1980; check_BG( 8 , 15 );
 8836                        		__ld.wi		8
         01:D07F  A9 08      			lda.l	#8
         01:D081  C2         			cly
 8837                        		__pusharg.wr
         01:D082  A6 8D      			ldx	<__sp
         01:D084  CA         			dex
         01:D085  CA         			dex
         01:D086  95 08      			sta.l	<__stack, x
         01:D088  94 09      			sty.h	<__stack, x
         01:D08A  86 8D      			stx	<__sp
 8838                        		__ld.wi		15
         01:D08C  A9 0F      			lda.l	#15
         01:D08E  C2         			cly
 8839                        		__pusharg.wr
         01:D08F  A6 8D      			ldx	<__sp
         01:D091  CA         			dex
         01:D092  CA         			dex
         01:D093  95 08      			sta.l	<__stack, x
         01:D095  94 09      			sty.h	<__stack, x
         01:D097  86 8D      			stx	<__sp
 8840                        		__call		_check_BG
         01:D099  20 6D FF   			call	_check_BG
 8841                        	
 8842                        		.dbg	line,	"include\routines_LEVELS.c", 1982; if(map_blk_flag == TILE_BG)
 8843                        		__ld.umq	_map_blk_flag
         01:D09C  AD AF 2B   			lda	_map_blk_flag
 8844                        		__equ_b.uiq	1
         01:D09F  C9 01      			cmp	#1
         01:D0A1  F0 01      			beq	!+
         01:D0A3  18         			clc
         01:D0A4             	!:
 8845                        		__bfalse	.LL352
         01:D0A4  90 41      			bcc	.LL352
 8846                        	
 8847                        		.dbg	line,	"include\routines_LEVELS.c", 1983; {
 8848                        	
 8849                        		.dbg	line,	"include\routines_LEVELS.c", 1984; check_TILE_DEPTH( 15 , -16 );
 8850                        		__ld.wi		15
         01:D0A6  A9 0F      			lda.l	#15
         01:D0A8  C2         			cly
 8851                        		__pusharg.wr
         01:D0A9  A6 8D      			ldx	<__sp
         01:D0AB  CA         			dex
         01:D0AC  CA         			dex
         01:D0AD  95 08      			sta.l	<__stack, x
         01:D0AF  94 09      			sty.h	<__stack, x
         01:D0B1  86 8D      			stx	<__sp
 8852                        		__ld.wi		-16
         01:D0B3  A9 F0      			lda.l	#-16
         01:D0B5  A0 FF      			ldy.h	#-16
 8853                        		__pusharg.wr
         01:D0B7  A6 8D      			ldx	<__sp
         01:D0B9  CA         			dex
         01:D0BA  CA         			dex
         01:D0BB  95 08      			sta.l	<__stack, x
         01:D0BD  94 09      			sty.h	<__stack, x
         01:D0BF  86 8D      			stx	<__sp
 8854                        		__call		_check_TILE_DEPTH
         01:D0C1  20 59 FF   			call	_check_TILE_DEPTH
 8855                        	
 8856                        		.dbg	line,	"include\routines_LEVELS.c", 1986; if(map_blk_flag == TILE_EMPTY && jump_ladder == TRUE)
 8857                        		__not.um	_map_blk_flag
         01:D0C4  AD AF 2B   			lda	_map_blk_flag
         01:D0C7  18         			clc
         01:D0C8  D0 01      			bne	!+
         01:D0CA  38         			sec
         01:D0CB             	!:
 8858                        		__bfalse	.LL354
         01:D0CB  90 08      			bcc	.LL354
 8859                        		__ld.umq	_jump_ladder
         01:D0CD  AD 1F 23   			lda	_jump_ladder
 8860                        		__equ_b.uiq	1
         01:D0D0  C9 01      			cmp	#1
         01:D0D2  F0 01      			beq	!+
         01:D0D4  18         			clc
         01:D0D5             	!:
 8861    01:D0D5             	.LL354:
 8862                        		__bfalse	.LL353
         01:D0D5  90 5F      			bcc	.LL353
 8863                        	
 8864                        		.dbg	line,	"include\routines_LEVELS.c", 1987; {
 8865                        	
 8866                        		.dbg	line,	"include\routines_LEVELS.c", 1988; jump_ladder = FALSE;
 8867                        		__st.umiq	0, _jump_ladder
         01:D0D7  9C 1F 23   			stz	_jump_ladder
 8868                        	
 8869                        		.dbg	line,	"include\routines_LEVELS.c", 1989; player_index_fall = 0;
 8870                        		__st.umiq	0, _player_index_fall
         01:D0DA  9C 1B 23   			stz	_player_index_fall
 8871                        	
 8872                        		.dbg	line,	"include\routines_LEVELS.c", 1990; player_state = STATE_FALL;
 8873                        		__st.umiq	9, _player_state
         01:D0DD  A9 09      			lda.l	#9
         01:D0DF  8D 16 23   			sta	_player_state
 8874                        	
 8875                        		.dbg	line,	"include\routines_LEVELS.c", 1991; return;
 8876                        		__bra		.LL214
         01:D0E2  4C 3D DD   			bra	.LL214
 8877                        	
 8878                        		.dbg	line,	"include\routines_LEVELS.c", 1992; }
 8879                        	
 8880                        		.dbg	line,	"include\routines_LEVELS.c", 1993; }
 8881    01:D0E5             	.LL353	.alias		.LL355
 8882                        	
 8883                        		.dbg	line,	"include\routines_LEVELS.c", 1995; else
 8884                        		__bra		.LL355
         01:D0E5  80 4F      			bra	.LL355
 8885    01:D0E7             	.LL352:
 8886                        	
 8887                        		.dbg	line,	"include\routines_LEVELS.c", 1996; {
 8888                        	
 8889                        		.dbg	line,	"include\routines_LEVELS.c", 1997; sgx_map_pxl_x -= 2;
 8890                        		__sub_st.wmiq	2, _sgx_map_pxl_x
         01:D0E7  38         			sec
         01:D0E8  AD 8E 26   			lda.l	_sgx_map_pxl_x
         01:D0EB  E9 02      			sbc.l	#2
         01:D0ED  8D 8E 26   			sta.l	_sgx_map_pxl_x
         01:D0F0  B0 03      			bcs	!+
         01:D0F2  CE 8F 26   			dec.h	_sgx_map_pxl_x
         01:D0F5             	!:
 8891                        	
 8892                        		.dbg	line,	"include\routines_LEVELS.c", 1998; }
 8893    01:D0F5             	.LL355	.alias		.LL356
 8894                        	
 8895                        		.dbg	line,	"include\routines_LEVELS.c", 1999; }
 8896                        	
 8897                        		.dbg	line,	"include\routines_LEVELS.c", 2001; else
 8898                        		__bra		.LL356
         01:D0F5  80 3F      			bra	.LL356
 8899    01:D0F7             	.LL351:
 8900                        	
 8901                        		.dbg	line,	"include\routines_LEVELS.c", 2002; {
 8902                        	
 8903                        		.dbg	line,	"include\routines_LEVELS.c", 2003; check_TILE_DEPTH( 15 , -16 );
 8904                        		__ld.wi		15
         01:D0F7  A9 0F      			lda.l	#15
         01:D0F9  C2         			cly
 8905                        		__pusharg.wr
         01:D0FA  A6 8D      			ldx	<__sp
         01:D0FC  CA         			dex
         01:D0FD  CA         			dex
         01:D0FE  95 08      			sta.l	<__stack, x
         01:D100  94 09      			sty.h	<__stack, x
         01:D102  86 8D      			stx	<__sp
 8906                        		__ld.wi		-16
         01:D104  A9 F0      			lda.l	#-16
         01:D106  A0 FF      			ldy.h	#-16
 8907                        		__pusharg.wr
         01:D108  A6 8D      			ldx	<__sp
         01:D10A  CA         			dex
         01:D10B  CA         			dex
         01:D10C  95 08      			sta.l	<__stack, x
         01:D10E  94 09      			sty.h	<__stack, x
         01:D110  86 8D      			stx	<__sp
 8908                        		__call		_check_TILE_DEPTH
         01:D112  20 59 FF   			call	_check_TILE_DEPTH
 8909                        	
 8910                        		.dbg	line,	"include\routines_LEVELS.c", 2005; if(map_blk_flag == TILE_EMPTY && jump_ladder == TRUE)
 8911                        		__not.um	_map_blk_flag
         01:D115  AD AF 2B   			lda	_map_blk_flag
         01:D118  18         			clc
         01:D119  D0 01      			bne	!+
         01:D11B  38         			sec
         01:D11C             	!:
 8912                        		__bfalse	.LL358
         01:D11C  90 08      			bcc	.LL358
 8913                        		__ld.umq	_jump_ladder
         01:D11E  AD 1F 23   			lda	_jump_ladder
 8914                        		__equ_b.uiq	1
         01:D121  C9 01      			cmp	#1
         01:D123  F0 01      			beq	!+
         01:D125  18         			clc
         01:D126             	!:
 8915    01:D126             	.LL358:
 8916                        		__bfalse	.LL357
         01:D126  90 0E      			bcc	.LL357
 8917                        	
 8918                        		.dbg	line,	"include\routines_LEVELS.c", 2006; {
 8919                        	
 8920                        		.dbg	line,	"include\routines_LEVELS.c", 2007; jump_ladder = FALSE;
 8921                        		__st.umiq	0, _jump_ladder
         01:D128  9C 1F 23   			stz	_jump_ladder
 8922                        	
 8923                        		.dbg	line,	"include\routines_LEVELS.c", 2008; player_index_fall = 0;
 8924                        		__st.umiq	0, _player_index_fall
         01:D12B  9C 1B 23   			stz	_player_index_fall
 8925                        	
 8926                        		.dbg	line,	"include\routines_LEVELS.c", 2009; player_state = STATE_FALL;
 8927                        		__st.umiq	9, _player_state
         01:D12E  A9 09      			lda.l	#9
         01:D130  8D 16 23   			sta	_player_state
 8928                        	
 8929                        		.dbg	line,	"include\routines_LEVELS.c", 2010; return;
 8930                        		__bra		.LL214
         01:D133  4C 3D DD   			bra	.LL214
 8931                        	
 8932                        		.dbg	line,	"include\routines_LEVELS.c", 2011; }
 8933                        	
 8934                        		.dbg	line,	"include\routines_LEVELS.c", 2012; }
 8935    01:D136             	.LL357:
 8936    01:D136             	.LL356:
 8937                        	
 8938                        		.dbg	line,	"include\routines_LEVELS.c", 2017; //**************************************************************************************//
 8939                        	
 8940                        		.dbg	line,	"include\routines_LEVELS.c", 2018; //                                        V MOVE                                        //
 8941                        	
 8942                        		.dbg	line,	"include\routines_LEVELS.c", 2019; //**************************************************************************************//
 8943                        	
 8944                        		.dbg	line,	"include\routines_LEVELS.c", 2021; // UPDATE PLAYER Y POSITION //
 8945                        	
 8946                        		.dbg	line,	"include\routines_LEVELS.c", 2022; if(jump_ladder == FALSE)
 8947                        		__not.um	_jump_ladder
         01:D136  AD 1F 23   			lda	_jump_ladder
         01:D139  18         			clc
         01:D13A  D0 01      			bne	!+
         01:D13C  38         			sec
         01:D13D             	!:
 8948                        		__bfalse	.LL359
         01:D13D  90 1A      			bcc	.LL359
 8949                        	
 8950                        		.dbg	line,	"include\routines_LEVELS.c", 2023; {
 8951                        	
 8952                        		.dbg	line,	"include\routines_LEVELS.c", 2024; player_pos_y += TABLE_PLAYER_JUMP_V[player_index_jump];
 8953                        		__ldx.umq	_player_index_jump
         01:D13F  AE 1A 23   			ldx	_player_index_jump
 8954                        		__ld.bax	_TABLE_PLAYER_JUMP_V
         01:D142  BD F9 60   			lda	_TABLE_PLAYER_JUMP_V, x
         01:D145  C2         			cly
         01:D146  10 01      			bpl	!+
         01:D148  88         			dey
         01:D149             	!:
 8955                        		__add_st.wmq	_player_pos_y
         01:D149  18         			clc
         01:D14A  6D D4 24   			adc.l	_player_pos_y
         01:D14D  8D D4 24   			sta.l	_player_pos_y
         01:D150  98         			tya
         01:D151  6D D5 24   			adc.h	_player_pos_y
         01:D154  8D D5 24   			sta.h	_player_pos_y
 8956                        	
 8957                        		.dbg	line,	"include\routines_LEVELS.c", 2025; }
 8958                        	
 8959                        		.dbg	line,	"include\routines_LEVELS.c", 2027; else
 8960                        		__bra		.LL360
         01:D157  80 18      			bra	.LL360
 8961    01:D159             	.LL359:
 8962                        	
 8963                        		.dbg	line,	"include\routines_LEVELS.c", 2028; {
 8964                        	
 8965                        		.dbg	line,	"include\routines_LEVELS.c", 2029; player_pos_y += TABLE_PLAYER_JUMP_LADDER[player_index_jump];
 8966                        		__ldx.umq	_player_index_jump
         01:D159  AE 1A 23   			ldx	_player_index_jump
 8967                        		__ld.bax	_TABLE_PLAYER_JUMP_LADDER
         01:D15C  BD 31 61   			lda	_TABLE_PLAYER_JUMP_LADDER, x
         01:D15F  C2         			cly
         01:D160  10 01      			bpl	!+
         01:D162  88         			dey
         01:D163             	!:
 8968                        		__add_st.wmq	_player_pos_y
         01:D163  18         			clc
         01:D164  6D D4 24   			adc.l	_player_pos_y
         01:D167  8D D4 24   			sta.l	_player_pos_y
         01:D16A  98         			tya
         01:D16B  6D D5 24   			adc.h	_player_pos_y
         01:D16E  8D D5 24   			sta.h	_player_pos_y
 8969                        	
 8970                        		.dbg	line,	"include\routines_LEVELS.c", 2030; }
 8971    01:D171             	.LL360:
 8972                        	
 8973                        		.dbg	line,	"include\routines_LEVELS.c", 2033; // IF PLAYER GOES BELOW ITS BASE Y POSITION //
 8974                        	
 8975                        		.dbg	line,	"include\routines_LEVELS.c", 2034; if(player_pos_y >= PLAYER_BASE_Y_POS)
 8976                        		__ld.wm		_player_pos_y
         01:D171  AD D4 24   			lda.l	_player_pos_y
         01:D174  AC D5 24   			ldy.h	_player_pos_y
 8977                        		__sge_w.wi	128
         01:D177  C9 80      			cmp.l	#128		; Subtract integer from Y:A.
         01:D179  98         			tya
         01:D17A  E9 00      			sbc.h	#128
         01:D17C  50 02      			bvc	!+
         01:D17E  49 80      			eor	#$80		; +ve if Y:A >= integer (signed).
         01:D180  49 80      	!:		eor	#$80
         01:D182  0A         			asl	a
 8978                        		__bfalse	.LL361
         01:D183  90 4E      			bcc	.LL361
 8979                        	
 8980                        		.dbg	line,	"include\routines_LEVELS.c", 2035; {
 8981                        	
 8982                        		.dbg	line,	"include\routines_LEVELS.c", 2036; // THE CAMERA MOVES //
 8983                        	
 8984                        		.dbg	line,	"include\routines_LEVELS.c", 2037; // CALCULATE HOW MANY PIXELS THE CAMERA HAS TO MOVE DOWN //
 8985                        	
 8986                        		.dbg	line,	"include\routines_LEVELS.c", 2038; camera_y_move = player_pos_y - PLAYER_BASE_Y_POS;
 8987                        		__ld.wm		_player_pos_y
         01:D185  AD D4 24   			lda.l	_player_pos_y
         01:D188  AC D5 24   			ldy.h	_player_pos_y
 8988                        		__sub.wi	128
         01:D18B  38         			sec
         01:D18C  E9 80      			sbc.l	#128
         01:D18E  B0 01      			bcs	!+
         01:D190  88         			dey
         01:D191             	!:
 8989                        		__st.umq	__update_PLAYER_end - 5  /* camera_y_move */
         01:D191  8D 08 23   			sta	__update_PLAYER_end - 5
 8990                        	
 8991                        		.dbg	line,	"include\routines_LEVELS.c", 2039; sgx_map_pxl_y += camera_y_move;
 8992                        		__ld.um		__update_PLAYER_end - 5  /* camera_y_move */
         01:D194  AD 08 23   			lda	__update_PLAYER_end - 5
         01:D197  C2         			cly
 8993                        		__add_st.wmq	_sgx_map_pxl_y
         01:D198  18         			clc
         01:D199  6D 90 26   			adc.l	_sgx_map_pxl_y
         01:D19C  8D 90 26   			sta.l	_sgx_map_pxl_y
         01:D19F  98         			tya
         01:D1A0  6D 91 26   			adc.h	_sgx_map_pxl_y
         01:D1A3  8D 91 26   			sta.h	_sgx_map_pxl_y
 8994                        	
 8995                        		.dbg	line,	"include\routines_LEVELS.c", 2041; // IF THE CAMERA HAS REACHED ITS MAX (LOWEST) POSITION //
 8996                        	
 8997                        		.dbg	line,	"include\routines_LEVELS.c", 2042; if(sgx_map_pxl_y > camera_max_y_position)
 8998                        		__ld.wm		_sgx_map_pxl_y
         01:D1A6  AD 90 26   			lda.l	_sgx_map_pxl_y
         01:D1A9  AC 91 26   			ldy.h	_sgx_map_pxl_y
 8999                        		__ugt_w.wm	_camera_max_y_position
         01:D1AC  18         			clc			; Subtract memory+1 from Y:A.
         01:D1AD  ED D6 24   			sbc.l	_camera_max_y_position
         01:D1B0  98         			tya
         01:D1B1  ED D7 24   			sbc.h	_camera_max_y_position		; CS if Y:A > memory.
 9000                        		__bfalse	.LL362
         01:D1B4  90 0C      			bcc	.LL362
 9001                        	
 9002                        		.dbg	line,	"include\routines_LEVELS.c", 2043; {
 9003                        	
 9004                        		.dbg	line,	"include\routines_LEVELS.c", 2044; // THE CAMERA CAN NOT MOVE LOWER //
 9005                        	
 9006                        		.dbg	line,	"include\routines_LEVELS.c", 2045; sgx_map_pxl_y = camera_max_y_position;
 9007                        		__ld.wm		_camera_max_y_position
         01:D1B6  AD D6 24   			lda.l	_camera_max_y_position
         01:D1B9  AC D7 24   			ldy.h	_camera_max_y_position
 9008                        		__st.wmq	_sgx_map_pxl_y
         01:D1BC  8D 90 26   			sta.l	_sgx_map_pxl_y
         01:D1BF  8C 91 26   			sty.h	_sgx_map_pxl_y
 9009                        	
 9010                        		.dbg	line,	"include\routines_LEVELS.c", 2046; }
 9011                        	
 9012                        		.dbg	line,	"include\routines_LEVELS.c", 2048; // THE PLAYER STAYS AT ITS BASE Y POSITION //
 9013                        	
 9014                        		.dbg	line,	"include\routines_LEVELS.c", 2049; player_pos_y = PLAYER_BASE_Y_POS;
 9015    01:D1C2             	.LL362:
 9016                        		__st.wmiq	128, _player_pos_y
         01:D1C2  A9 80      			lda.l	#128
         01:D1C4  8D D4 24   			sta.l	_player_pos_y
         01:D1C7  9C D5 24   			stz.h	_player_pos_y
 9017                        	
 9018                        		.dbg	line,	"include\routines_LEVELS.c", 2051; spr_y(player_pos_y);
 9019                        		__ld.wm		_player_pos_y
         01:D1CA  AD D4 24   			lda.l	_player_pos_y
         01:D1CD  AC D5 24   			ldy.h	_player_pos_y
 9020                        		__call		_spr_y.1
         01:D1D0  20 19 E8   			call	_spr_y.1
 9021                        	
 9022                        		.dbg	line,	"include\routines_LEVELS.c", 2052; }
 9023                        	
 9024                        		.dbg	line,	"include\routines_LEVELS.c", 2055; // UPDATE JUMP INDEX IN THE ARRAY //
 9025                        	
 9026                        		.dbg	line,	"include\routines_LEVELS.c", 2056; if(player_index_jump < jump_max_index)
 9027    01:D1D3             	.LL361:
 9028                        		__ld.umq	_player_index_jump
         01:D1D3  AD 1A 23   			lda	_player_index_jump
 9029                        		__ult_b.umq	_jump_max_index
         01:D1D6  CD 20 23   			cmp	_jump_max_index		; Subtract memory from A.
         01:D1D9  6A         			ror	a		; CC if A < memory.
         01:D1DA  49 80      			eor	#$80
         01:D1DC  2A         			rol	a
 9030                        		__bfalse	.LL363
         01:D1DD  90 03      			bcc	.LL363
 9031                        	
 9032                        		.dbg	line,	"include\routines_LEVELS.c", 2057; {
 9033                        	
 9034                        		.dbg	line,	"include\routines_LEVELS.c", 2058; player_index_jump += 1;
 9035                        		__add_st.umiq	1, _player_index_jump
         01:D1DF  EE 1A 23   			inc	_player_index_jump
 9036                        	
 9037                        		.dbg	line,	"include\routines_LEVELS.c", 2059; }
 9038                        	
 9039                        		.dbg	line,	"include\routines_LEVELS.c", 2064; //--------------------------------------------------------------------------------------//
 9040                        	
 9041                        		.dbg	line,	"include\routines_LEVELS.c", 2065; //                                   FLOOR COLLISION                                    //
 9042                        	
 9043                        		.dbg	line,	"include\routines_LEVELS.c", 2066; //--------------------------------------------------------------------------------------//
 9044                        	
 9045                        		.dbg	line,	"include\routines_LEVELS.c", 2068; if(player_index_jump > 14)
 9046    01:D1E2             	.LL363:
 9047                        		__ld.umq	_player_index_jump
         01:D1E2  AD 1A 23   			lda	_player_index_jump
 9048                        		__ugt_b.uiq	14
         01:D1E5  18         			clc			; Subtract integer+1 from A.
         01:D1E6  E9 0E      			sbc	#14		; CS if A > integer.
 9049                        		__bfalse	.LL364
         01:D1E8  B0 03 4C 9D			bcc	.LL364
         01:D1EC  D3          
 9050                        	
 9051                        		.dbg	line,	"include\routines_LEVELS.c", 2069; {
 9052                        	
 9053                        		.dbg	line,	"include\routines_LEVELS.c", 2070; // CHECK COLLISION WITH LEFT FLOOR //
 9054                        	
 9055                        		.dbg	line,	"include\routines_LEVELS.c", 2071; check_BG( 10 , 32 );
 9056                        		__ld.wi		10
         01:D1ED  A9 0A      			lda.l	#10
         01:D1EF  C2         			cly
 9057                        		__pusharg.wr
         01:D1F0  A6 8D      			ldx	<__sp
         01:D1F2  CA         			dex
         01:D1F3  CA         			dex
         01:D1F4  95 08      			sta.l	<__stack, x
         01:D1F6  94 09      			sty.h	<__stack, x
         01:D1F8  86 8D      			stx	<__sp
 9058                        		__ld.wi		32
         01:D1FA  A9 20      			lda.l	#32
         01:D1FC  C2         			cly
 9059                        		__pusharg.wr
         01:D1FD  A6 8D      			ldx	<__sp
         01:D1FF  CA         			dex
         01:D200  CA         			dex
         01:D201  95 08      			sta.l	<__stack, x
         01:D203  94 09      			sty.h	<__stack, x
         01:D205  86 8D      			stx	<__sp
 9060                        		__call		_check_BG
         01:D207  20 6D FF   			call	_check_BG
 9061                        	
 9062                        		.dbg	line,	"include\routines_LEVELS.c", 2073; if(map_blk_flag == TILE_BG)
 9063                        		__ld.umq	_map_blk_flag
         01:D20A  AD AF 2B   			lda	_map_blk_flag
 9064                        		__equ_b.uiq	1
         01:D20D  C9 01      			cmp	#1
         01:D20F  F0 01      			beq	!+
         01:D211  18         			clc
         01:D212             	!:
 9065                        		__bfalse	.LL365
         01:D212  B0 03 4C C5			bcc	.LL365
         01:D216  D2          
 9066                        	
 9067                        		.dbg	line,	"include\routines_LEVELS.c", 2074; {
 9068                        	
 9069                        		.dbg	line,	"include\routines_LEVELS.c", 2075; // CALCULATE HOW MANY PIXELS THE PLAYER MOVED INTO THE GROUND //
 9070                        	
 9071                        		.dbg	line,	"include\routines_LEVELS.c", 2076; for(i=1; i<11 ; i++)
 9072                        		__st.umiq	1, __update_PLAYER_end - 4  /* i */
         01:D217  A9 01      			lda.l	#1
         01:D219  8D 09 23   			sta	__update_PLAYER_end - 4
 9073    01:D21C             	.LL366:
 9074                        		__ld.umq	__update_PLAYER_end - 4  /* i */
         01:D21C  AD 09 23   			lda	__update_PLAYER_end - 4
 9075                        		__ult_b.uiq	11
         01:D21F  C9 0B      			cmp	#11		; Subtract integer from A.
         01:D221  6A         			ror	a		; CC if A < integer.
         01:D222  49 80      			eor	#$80
         01:D224  2A         			rol	a
 9076                        		__btrue		.LL368
         01:D225  B0 07      			bcs	.LL368
 9077                        		__bra		.LL369
         01:D227  80 7D      			bra	.LL369
 9078    01:D229             	.LL367:
 9079                        		__inc.umq	__update_PLAYER_end - 4  /* i */
         01:D229  EE 09 23   			inc	__update_PLAYER_end - 4
 9080                        		__bra		.LL366
         01:D22C  80 EE      			bra	.LL366
 9081    01:D22E             	.LL368:
 9082                        	
 9083                        		.dbg	line,	"include\routines_LEVELS.c", 2077; {
 9084                        	
 9085                        		.dbg	line,	"include\routines_LEVELS.c", 2078; check_TILE_DEPTH( 10 , i);
 9086                        		__ld.wi		10
         01:D22E  A9 0A      			lda.l	#10
         01:D230  C2         			cly
 9087                        		__pusharg.wr
         01:D231  A6 8D      			ldx	<__sp
         01:D233  CA         			dex
         01:D234  CA         			dex
         01:D235  95 08      			sta.l	<__stack, x
         01:D237  94 09      			sty.h	<__stack, x
         01:D239  86 8D      			stx	<__sp
 9088                        		__ld.um		__update_PLAYER_end - 4  /* i */
         01:D23B  AD 09 23   			lda	__update_PLAYER_end - 4
         01:D23E  C2         			cly
 9089                        		__pusharg.wr
         01:D23F  A6 8D      			ldx	<__sp
         01:D241  CA         			dex
         01:D242  CA         			dex
         01:D243  95 08      			sta.l	<__stack, x
         01:D245  94 09      			sty.h	<__stack, x
         01:D247  86 8D      			stx	<__sp
 9090                        		__call		_check_TILE_DEPTH
         01:D249  20 59 FF   			call	_check_TILE_DEPTH
 9091                        	
 9092                        		.dbg	line,	"include\routines_LEVELS.c", 2080; if(map_blk_flag == TILE_EMPTY)
 9093                        		__not.um	_map_blk_flag
         01:D24C  AD AF 2B   			lda	_map_blk_flag
         01:D24F  18         			clc
         01:D250  D0 01      			bne	!+
         01:D252  38         			sec
         01:D253             	!:
 9094                        		__bfalse	.LL370
         01:D253  90 D4      			bcc	.LL370
 9095                        	
 9096                        		.dbg	line,	"include\routines_LEVELS.c", 2081; {
 9097                        	
 9098                        		.dbg	line,	"include\routines_LEVELS.c", 2082; if(player_pos_y != PLAYER_BASE_Y_POS)
 9099                        		__ld.wm		_player_pos_y
         01:D255  AD D4 24   			lda.l	_player_pos_y
         01:D258  AC D5 24   			ldy.h	_player_pos_y
 9100                        		__neq_w.wi	128
         01:D25B  38         			sec
         01:D25C  49 80      			eor.l	#128
         01:D25E  D0 06      			bne	!+
         01:D260  98         			tya
         01:D261  49 00      			eor.h	#128
         01:D263  D0 01      			bne	!+
         01:D265  18         			clc
         01:D266             	!:
 9101                        		__bfalse	.LL371
         01:D266  90 1E      			bcc	.LL371
 9102                        	
 9103                        		.dbg	line,	"include\routines_LEVELS.c", 2083; {
 9104                        	
 9105                        		.dbg	line,	"include\routines_LEVELS.c", 2084; player_pos_y -= (i - 1);
 9106                        		__ld.um		__update_PLAYER_end - 4  /* i */
         01:D268  AD 09 23   			lda	__update_PLAYER_end - 4
         01:D26B  C2         			cly
 9107                        		__sub.wi	1
         01:D26C  38         			sec
         01:D26D  E9 01      			sbc.l	#1
         01:D26F  B0 01      			bcs	!+
         01:D271  88         			dey
         01:D272             	!:
 9108                        		__isub_st.wmq	_player_pos_y
         01:D272  38         			sec
         01:D273  49 FF      			eor	#$FF
         01:D275  6D D4 24   			adc.l	_player_pos_y
         01:D278  8D D4 24   			sta.l	_player_pos_y
         01:D27B  98         			tya
         01:D27C  49 FF      			eor	#$FF
         01:D27E  6D D5 24   			adc.h	_player_pos_y
         01:D281  8D D5 24   			sta.h	_player_pos_y
 9109                        	
 9110                        		.dbg	line,	"include\routines_LEVELS.c", 2085; }
 9111                        	
 9112                        		.dbg	line,	"include\routines_LEVELS.c", 2087; else
 9113                        		__bra		.LL372
         01:D284  80 20      			bra	.LL372
 9114    01:D286             	.LL371:
 9115                        	
 9116                        		.dbg	line,	"include\routines_LEVELS.c", 2088; {
 9117                        	
 9118                        		.dbg	line,	"include\routines_LEVELS.c", 2089; sgx_map_pxl_y -= (i - 1);
 9119                        		__ld.um		__update_PLAYER_end - 4  /* i */
         01:D286  AD 09 23   			lda	__update_PLAYER_end - 4
         01:D289  C2         			cly
 9120                        		__sub.wi	1
         01:D28A  38         			sec
         01:D28B  E9 01      			sbc.l	#1
         01:D28D  B0 01      			bcs	!+
         01:D28F  88         			dey
         01:D290             	!:
 9121                        		__isub_st.wmq	_sgx_map_pxl_y
         01:D290  38         			sec
         01:D291  49 FF      			eor	#$FF
         01:D293  6D 90 26   			adc.l	_sgx_map_pxl_y
         01:D296  8D 90 26   			sta.l	_sgx_map_pxl_y
         01:D299  98         			tya
         01:D29A  49 FF      			eor	#$FF
         01:D29C  6D 91 26   			adc.h	_sgx_map_pxl_y
         01:D29F  8D 91 26   			sta.h	_sgx_map_pxl_y
 9122                        	
 9123                        		.dbg	line,	"include\routines_LEVELS.c", 2090; }
 9124    01:D2A2             	.LL372	.alias		.LL369
 9125                        	
 9126                        		.dbg	line,	"include\routines_LEVELS.c", 2092; break;
 9127                        		__bra		.LL369
         01:D2A2  80 02      			bra	.LL369
 9128                        	
 9129                        		.dbg	line,	"include\routines_LEVELS.c", 2093; }
 9130                        	
 9131                        		.dbg	line,	"include\routines_LEVELS.c", 2094; }
 9132    01:D2A4             	.LL370	.alias		.LL367
 9133                        		__bra		.LL367
         01:D2A4  80 83      			bra	.LL367
 9134    01:D2A6             	.LL369:
 9135                        	
 9136                        		.dbg	line,	"include\routines_LEVELS.c", 2096; // SET PLAYER SPRITE NEW POSITION //
 9137                        	
 9138                        		.dbg	line,	"include\routines_LEVELS.c", 2097; spr_y(player_pos_y);
 9139                        		__ld.wm		_player_pos_y
         01:D2A6  AD D4 24   			lda.l	_player_pos_y
         01:D2A9  AC D5 24   			ldy.h	_player_pos_y
 9140                        		__call		_spr_y.1
         01:D2AC  20 19 E8   			call	_spr_y.1
 9141                        	
 9142                        		.dbg	line,	"include\routines_LEVELS.c", 2099; player_counter_anim = 1;
 9143                        		__st.umiq	1, _player_counter_anim
         01:D2AF  A9 01      			lda.l	#1
         01:D2B1  8D 19 23   			sta	_player_counter_anim
 9144                        	
 9145                        		.dbg	line,	"include\routines_LEVELS.c", 2100; player_index_jump = 0;
 9146                        		__st.umiq	0, _player_index_jump
         01:D2B4  9C 1A 23   			stz	_player_index_jump
 9147                        	
 9148                        		.dbg	line,	"include\routines_LEVELS.c", 2101; jump_ladder = FALSE;
 9149                        		__st.umiq	0, _jump_ladder
         01:D2B7  9C 1F 23   			stz	_jump_ladder
 9150                        	
 9151                        		.dbg	line,	"include\routines_LEVELS.c", 2102; jump_max_index = 34;
 9152                        		__st.umiq	34, _jump_max_index
         01:D2BA  A9 22      			lda.l	#34
         01:D2BC  8D 20 23   			sta	_jump_max_index
 9153                        	
 9154                        		.dbg	line,	"include\routines_LEVELS.c", 2103; player_state = STATE_IDLE;
 9155                        		__st.umiq	0, _player_state
         01:D2BF  9C 16 23   			stz	_player_state
 9156                        	
 9157                        		.dbg	line,	"include\routines_LEVELS.c", 2104; return;
 9158                        		__bra		.LL214
         01:D2C2  4C 3D DD   			bra	.LL214
 9159                        	
 9160                        		.dbg	line,	"include\routines_LEVELS.c", 2105; }
 9161                        	
 9162                        		.dbg	line,	"include\routines_LEVELS.c", 2107; else
 9163    01:D2C5             	.LL365:
 9164                        	
 9165                        		.dbg	line,	"include\routines_LEVELS.c", 2108; {
 9166                        	
 9167                        		.dbg	line,	"include\routines_LEVELS.c", 2109; // CHECK COLLISION WITH RIGHT FLOOR //
 9168                        	
 9169                        		.dbg	line,	"include\routines_LEVELS.c", 2110; check_BG( 22 , 32 );
 9170                        		__ld.wi		22
         01:D2C5  A9 16      			lda.l	#22
         01:D2C7  C2         			cly
 9171                        		__pusharg.wr
         01:D2C8  A6 8D      			ldx	<__sp
         01:D2CA  CA         			dex
         01:D2CB  CA         			dex
         01:D2CC  95 08      			sta.l	<__stack, x
         01:D2CE  94 09      			sty.h	<__stack, x
         01:D2D0  86 8D      			stx	<__sp
 9172                        		__ld.wi		32
         01:D2D2  A9 20      			lda.l	#32
         01:D2D4  C2         			cly
 9173                        		__pusharg.wr
         01:D2D5  A6 8D      			ldx	<__sp
         01:D2D7  CA         			dex
         01:D2D8  CA         			dex
         01:D2D9  95 08      			sta.l	<__stack, x
         01:D2DB  94 09      			sty.h	<__stack, x
         01:D2DD  86 8D      			stx	<__sp
 9174                        		__call		_check_BG
         01:D2DF  20 6D FF   			call	_check_BG
 9175                        	
 9176                        		.dbg	line,	"include\routines_LEVELS.c", 2112; if(map_blk_flag == TILE_BG)
 9177                        		__ld.umq	_map_blk_flag
         01:D2E2  AD AF 2B   			lda	_map_blk_flag
 9178                        		__equ_b.uiq	1
         01:D2E5  C9 01      			cmp	#1
         01:D2E7  F0 01      			beq	!+
         01:D2E9  18         			clc
         01:D2EA             	!:
 9179                        		__bfalse	.LL374
         01:D2EA  B0 03 4C 9D			bcc	.LL374
         01:D2EE  D3          
 9180                        	
 9181                        		.dbg	line,	"include\routines_LEVELS.c", 2113; {
 9182                        	
 9183                        		.dbg	line,	"include\routines_LEVELS.c", 2114; // CALCULATE HOW MANY PIXELS THE PLAYER MOVED INTO THE GROUND //
 9184                        	
 9185                        		.dbg	line,	"include\routines_LEVELS.c", 2115; for(i=1; i<11 ; i++)
 9186                        		__st.umiq	1, __update_PLAYER_end - 4  /* i */
         01:D2EF  A9 01      			lda.l	#1
         01:D2F1  8D 09 23   			sta	__update_PLAYER_end - 4
 9187    01:D2F4             	.LL375:
 9188                        		__ld.umq	__update_PLAYER_end - 4  /* i */
         01:D2F4  AD 09 23   			lda	__update_PLAYER_end - 4
 9189                        		__ult_b.uiq	11
         01:D2F7  C9 0B      			cmp	#11		; Subtract integer from A.
         01:D2F9  6A         			ror	a		; CC if A < integer.
         01:D2FA  49 80      			eor	#$80
         01:D2FC  2A         			rol	a
 9190                        		__btrue		.LL377
         01:D2FD  B0 07      			bcs	.LL377
 9191                        		__bra		.LL378
         01:D2FF  80 7D      			bra	.LL378
 9192    01:D301             	.LL376:
 9193                        		__inc.umq	__update_PLAYER_end - 4  /* i */
         01:D301  EE 09 23   			inc	__update_PLAYER_end - 4
 9194                        		__bra		.LL375
         01:D304  80 EE      			bra	.LL375
 9195    01:D306             	.LL377:
 9196                        	
 9197                        		.dbg	line,	"include\routines_LEVELS.c", 2116; {
 9198                        	
 9199                        		.dbg	line,	"include\routines_LEVELS.c", 2117; check_TILE_DEPTH( 22 , i);
 9200                        		__ld.wi		22
         01:D306  A9 16      			lda.l	#22
         01:D308  C2         			cly
 9201                        		__pusharg.wr
         01:D309  A6 8D      			ldx	<__sp
         01:D30B  CA         			dex
         01:D30C  CA         			dex
         01:D30D  95 08      			sta.l	<__stack, x
         01:D30F  94 09      			sty.h	<__stack, x
         01:D311  86 8D      			stx	<__sp
 9202                        		__ld.um		__update_PLAYER_end - 4  /* i */
         01:D313  AD 09 23   			lda	__update_PLAYER_end - 4
         01:D316  C2         			cly
 9203                        		__pusharg.wr
         01:D317  A6 8D      			ldx	<__sp
         01:D319  CA         			dex
         01:D31A  CA         			dex
         01:D31B  95 08      			sta.l	<__stack, x
         01:D31D  94 09      			sty.h	<__stack, x
         01:D31F  86 8D      			stx	<__sp
 9204                        		__call		_check_TILE_DEPTH
         01:D321  20 59 FF   			call	_check_TILE_DEPTH
 9205                        	
 9206                        		.dbg	line,	"include\routines_LEVELS.c", 2119; if(map_blk_flag == TILE_EMPTY)
 9207                        		__not.um	_map_blk_flag
         01:D324  AD AF 2B   			lda	_map_blk_flag
         01:D327  18         			clc
         01:D328  D0 01      			bne	!+
         01:D32A  38         			sec
         01:D32B             	!:
 9208                        		__bfalse	.LL379
         01:D32B  90 D4      			bcc	.LL379
 9209                        	
 9210                        		.dbg	line,	"include\routines_LEVELS.c", 2120; {
 9211                        	
 9212                        		.dbg	line,	"include\routines_LEVELS.c", 2121; if(player_pos_y != PLAYER_BASE_Y_POS)
 9213                        		__ld.wm		_player_pos_y
         01:D32D  AD D4 24   			lda.l	_player_pos_y
         01:D330  AC D5 24   			ldy.h	_player_pos_y
 9214                        		__neq_w.wi	128
         01:D333  38         			sec
         01:D334  49 80      			eor.l	#128
         01:D336  D0 06      			bne	!+
         01:D338  98         			tya
         01:D339  49 00      			eor.h	#128
         01:D33B  D0 01      			bne	!+
         01:D33D  18         			clc
         01:D33E             	!:
 9215                        		__bfalse	.LL380
         01:D33E  90 1E      			bcc	.LL380
 9216                        	
 9217                        		.dbg	line,	"include\routines_LEVELS.c", 2122; {
 9218                        	
 9219                        		.dbg	line,	"include\routines_LEVELS.c", 2123; player_pos_y -= (i - 1);
 9220                        		__ld.um		__update_PLAYER_end - 4  /* i */
         01:D340  AD 09 23   			lda	__update_PLAYER_end - 4
         01:D343  C2         			cly
 9221                        		__sub.wi	1
         01:D344  38         			sec
         01:D345  E9 01      			sbc.l	#1
         01:D347  B0 01      			bcs	!+
         01:D349  88         			dey
         01:D34A             	!:
 9222                        		__isub_st.wmq	_player_pos_y
         01:D34A  38         			sec
         01:D34B  49 FF      			eor	#$FF
         01:D34D  6D D4 24   			adc.l	_player_pos_y
         01:D350  8D D4 24   			sta.l	_player_pos_y
         01:D353  98         			tya
         01:D354  49 FF      			eor	#$FF
         01:D356  6D D5 24   			adc.h	_player_pos_y
         01:D359  8D D5 24   			sta.h	_player_pos_y
 9223                        	
 9224                        		.dbg	line,	"include\routines_LEVELS.c", 2124; }
 9225                        	
 9226                        		.dbg	line,	"include\routines_LEVELS.c", 2126; else
 9227                        		__bra		.LL381
         01:D35C  80 20      			bra	.LL381
 9228    01:D35E             	.LL380:
 9229                        	
 9230                        		.dbg	line,	"include\routines_LEVELS.c", 2127; {
 9231                        	
 9232                        		.dbg	line,	"include\routines_LEVELS.c", 2128; sgx_map_pxl_y -= (i - 1);
 9233                        		__ld.um		__update_PLAYER_end - 4  /* i */
         01:D35E  AD 09 23   			lda	__update_PLAYER_end - 4
         01:D361  C2         			cly
 9234                        		__sub.wi	1
         01:D362  38         			sec
         01:D363  E9 01      			sbc.l	#1
         01:D365  B0 01      			bcs	!+
         01:D367  88         			dey
         01:D368             	!:
 9235                        		__isub_st.wmq	_sgx_map_pxl_y
         01:D368  38         			sec
         01:D369  49 FF      			eor	#$FF
         01:D36B  6D 90 26   			adc.l	_sgx_map_pxl_y
         01:D36E  8D 90 26   			sta.l	_sgx_map_pxl_y
         01:D371  98         			tya
         01:D372  49 FF      			eor	#$FF
         01:D374  6D 91 26   			adc.h	_sgx_map_pxl_y
         01:D377  8D 91 26   			sta.h	_sgx_map_pxl_y
 9236                        	
 9237                        		.dbg	line,	"include\routines_LEVELS.c", 2129; }
 9238    01:D37A             	.LL381	.alias		.LL378
 9239                        	
 9240                        		.dbg	line,	"include\routines_LEVELS.c", 2131; break;
 9241                        		__bra		.LL378
         01:D37A  80 02      			bra	.LL378
 9242                        	
 9243                        		.dbg	line,	"include\routines_LEVELS.c", 2132; }
 9244                        	
 9245                        		.dbg	line,	"include\routines_LEVELS.c", 2133; }
 9246    01:D37C             	.LL379	.alias		.LL376
 9247                        		__bra		.LL376
         01:D37C  80 83      			bra	.LL376
 9248    01:D37E             	.LL378:
 9249                        	
 9250                        		.dbg	line,	"include\routines_LEVELS.c", 2135; // SET PLAYER SPRITE NEW POSITION //
 9251                        	
 9252                        		.dbg	line,	"include\routines_LEVELS.c", 2136; spr_y(player_pos_y);
 9253                        		__ld.wm		_player_pos_y
         01:D37E  AD D4 24   			lda.l	_player_pos_y
         01:D381  AC D5 24   			ldy.h	_player_pos_y
 9254                        		__call		_spr_y.1
         01:D384  20 19 E8   			call	_spr_y.1
 9255                        	
 9256                        		.dbg	line,	"include\routines_LEVELS.c", 2138; player_counter_anim = 1;
 9257                        		__st.umiq	1, _player_counter_anim
         01:D387  A9 01      			lda.l	#1
         01:D389  8D 19 23   			sta	_player_counter_anim
 9258                        	
 9259                        		.dbg	line,	"include\routines_LEVELS.c", 2139; player_index_jump = 0;
 9260                        		__st.umiq	0, _player_index_jump
         01:D38C  9C 1A 23   			stz	_player_index_jump
 9261                        	
 9262                        		.dbg	line,	"include\routines_LEVELS.c", 2140; jump_ladder = FALSE;
 9263                        		__st.umiq	0, _jump_ladder
         01:D38F  9C 1F 23   			stz	_jump_ladder
 9264                        	
 9265                        		.dbg	line,	"include\routines_LEVELS.c", 2141; jump_max_index = 34;
 9266                        		__st.umiq	34, _jump_max_index
         01:D392  A9 22      			lda.l	#34
         01:D394  8D 20 23   			sta	_jump_max_index
 9267                        	
 9268                        		.dbg	line,	"include\routines_LEVELS.c", 2142; player_state = STATE_IDLE;
 9269                        		__st.umiq	0, _player_state
         01:D397  9C 16 23   			stz	_player_state
 9270                        	
 9271                        		.dbg	line,	"include\routines_LEVELS.c", 2143; return;
 9272                        		__bra		.LL214
         01:D39A  4C 3D DD   			bra	.LL214
 9273                        	
 9274                        		.dbg	line,	"include\routines_LEVELS.c", 2144; }
 9275                        	
 9276                        		.dbg	line,	"include\routines_LEVELS.c", 2145; }
 9277    01:D39D             	.LL374:
 9278    01:D39D             	.LL373:
 9279                        	
 9280                        		.dbg	line,	"include\routines_LEVELS.c", 2146; }
 9281                        	
 9282                        		.dbg	line,	"include\routines_LEVELS.c", 2151; //--------------------------------------------------------------------------------------//
 9283                        	
 9284                        		.dbg	line,	"include\routines_LEVELS.c", 2152; //                                   LADDER COLLISION                                   //
 9285                        	
 9286                        		.dbg	line,	"include\routines_LEVELS.c", 2153; //--------------------------------------------------------------------------------------//
 9287                        	
 9288                        		.dbg	line,	"include\routines_LEVELS.c", 2155; if(player_index_jump > 4)
 9289    01:D39D             	.LL364:
 9290                        		__ld.umq	_player_index_jump
         01:D39D  AD 1A 23   			lda	_player_index_jump
 9291                        		__ugt_b.uiq	4
         01:D3A0  18         			clc			; Subtract integer+1 from A.
         01:D3A1  E9 04      			sbc	#4		; CS if A > integer.
 9292                        		__bfalse	.LL382
         01:D3A3  B0 03 4C 38			bcc	.LL382
         01:D3A7  D4          
 9293                        	
 9294                        		.dbg	line,	"include\routines_LEVELS.c", 2156; {
 9295                        	
 9296                        		.dbg	line,	"include\routines_LEVELS.c", 2157; check_BG( 16 , 16 );
 9297                        		__ld.wi		16
         01:D3A8  A9 10      			lda.l	#16
         01:D3AA  C2         			cly
 9298                        		__pusharg.wr
         01:D3AB  A6 8D      			ldx	<__sp
         01:D3AD  CA         			dex
         01:D3AE  CA         			dex
         01:D3AF  95 08      			sta.l	<__stack, x
         01:D3B1  94 09      			sty.h	<__stack, x
         01:D3B3  86 8D      			stx	<__sp
 9299                        		__ld.wi		16
         01:D3B5  A9 10      			lda.l	#16
         01:D3B7  C2         			cly
 9300                        		__pusharg.wr
         01:D3B8  A6 8D      			ldx	<__sp
         01:D3BA  CA         			dex
         01:D3BB  CA         			dex
         01:D3BC  95 08      			sta.l	<__stack, x
         01:D3BE  94 09      			sty.h	<__stack, x
         01:D3C0  86 8D      			stx	<__sp
 9301                        		__call		_check_BG
         01:D3C2  20 6D FF   			call	_check_BG
 9302                        	
 9303                        		.dbg	line,	"include\routines_LEVELS.c", 2159; if(map_blk_flag == TILE_LADDER)
 9304                        		__ld.umq	_map_blk_flag
         01:D3C5  AD AF 2B   			lda	_map_blk_flag
 9305                        		__equ_b.uiq	2
         01:D3C8  C9 02      			cmp	#2
         01:D3CA  F0 01      			beq	!+
         01:D3CC  18         			clc
         01:D3CD             	!:
 9306                        		__bfalse	.LL383
         01:D3CD  90 69      			bcc	.LL383
 9307                        	
 9308                        		.dbg	line,	"include\routines_LEVELS.c", 2160; {
 9309                        	
 9310                        		.dbg	line,	"include\routines_LEVELS.c", 2161; // CAMERA GOES 8 PX BACKWARD //
 9311                        	
 9312                        		.dbg	line,	"include\routines_LEVELS.c", 2162; sgx_map_pxl_x = ( (sgx_map_pxl_x >> 3) << 3 );
 9313                        		__ld.wm		_sgx_map_pxl_x
         01:D3CF  AD 8E 26   			lda.l	_sgx_map_pxl_x
         01:D3D2  AC 8F 26   			ldy.h	_sgx_map_pxl_x
 9314                        		__lsr.wi	3
         01:D3D5  84 00      			sty	__temp
         01:D3D7  20 3A E2   			jsr	lsrw3
 9315                        		__asl.wi	3
         01:D3DA  84 00      			sty	__temp
         01:D3DC  20 D7 E1   			jsr	aslw3
 9316                        		__st.wmq	_sgx_map_pxl_x
         01:D3DF  8D 8E 26   			sta.l	_sgx_map_pxl_x
         01:D3E2  8C 8F 26   			sty.h	_sgx_map_pxl_x
 9317                        	
 9318                        		.dbg	line,	"include\routines_LEVELS.c", 2164; // SO WE UPDATE THE MAP //
 9319                        	
 9320                        		.dbg	line,	"include\routines_LEVELS.c", 2165; sgx_scroll_map();
 9321                        		__call		_sgx_scroll_map
         01:D3E5  20 81 FF   			call	_sgx_scroll_map
 9322                        	
 9323                        		.dbg	line,	"include\routines_LEVELS.c", 2167; // CHECK IF THE PLAYER STANDS RIGHT TO THE LADDER //
 9324                        	
 9325                        		.dbg	line,	"include\routines_LEVELS.c", 2168; check_BG( 31 , 16 );
 9326                        		__ld.wi		31
         01:D3E8  A9 1F      			lda.l	#31
         01:D3EA  C2         			cly
 9327                        		__pusharg.wr
         01:D3EB  A6 8D      			ldx	<__sp
         01:D3ED  CA         			dex
         01:D3EE  CA         			dex
         01:D3EF  95 08      			sta.l	<__stack, x
         01:D3F1  94 09      			sty.h	<__stack, x
         01:D3F3  86 8D      			stx	<__sp
 9328                        		__ld.wi		16
         01:D3F5  A9 10      			lda.l	#16
         01:D3F7  C2         			cly
 9329                        		__pusharg.wr
         01:D3F8  A6 8D      			ldx	<__sp
         01:D3FA  CA         			dex
         01:D3FB  CA         			dex
         01:D3FC  95 08      			sta.l	<__stack, x
         01:D3FE  94 09      			sty.h	<__stack, x
         01:D400  86 8D      			stx	<__sp
 9330                        		__call		_check_BG
         01:D402  20 6D FF   			call	_check_BG
 9331                        	
 9332                        		.dbg	line,	"include\routines_LEVELS.c", 2170; if(map_blk_flag == TILE_LADDER)
 9333                        		__ld.umq	_map_blk_flag
         01:D405  AD AF 2B   			lda	_map_blk_flag
 9334                        		__equ_b.uiq	2
         01:D408  C9 02      			cmp	#2
         01:D40A  F0 01      			beq	!+
         01:D40C  18         			clc
         01:D40D             	!:
 9335                        		__bfalse	.LL384
         01:D40D  90 0E      			bcc	.LL384
 9336                        	
 9337                        		.dbg	line,	"include\routines_LEVELS.c", 2171; {
 9338                        	
 9339                        		.dbg	line,	"include\routines_LEVELS.c", 2172; sgx_map_pxl_x += 8;
 9340                        		__add_st.wmiq	8, _sgx_map_pxl_x
         01:D40F  18         			clc
         01:D410  AD 8E 26   			lda.l	_sgx_map_pxl_x
         01:D413  69 08      			adc.l	#8
         01:D415  8D 8E 26   			sta.l	_sgx_map_pxl_x
         01:D418  90 03      			bcc	!+
         01:D41A  EE 8F 26   			inc.h	_sgx_map_pxl_x
         01:D41D             	!:
 9341                        	
 9342                        		.dbg	line,	"include\routines_LEVELS.c", 2173; }
 9343                        	
 9344                        		.dbg	line,	"include\routines_LEVELS.c", 2175; spr_pattern(PLAYER_HANG_VRAM_ADR);
 9345    01:D41D             	.LL384:
 9346                        		__ld.wi		7936
         01:D41D  62         			cla
         01:D41E  A0 1F      			ldy.h	#7936
 9347                        		__call		_spr_pattern.1
         01:D420  20 26 E8   			call	_spr_pattern.1
 9348                        	
 9349                        		.dbg	line,	"include\routines_LEVELS.c", 2176; player_counter_anim = 0;
 9350                        		__st.umiq	0, _player_counter_anim
         01:D423  9C 19 23   			stz	_player_counter_anim
 9351                        	
 9352                        		.dbg	line,	"include\routines_LEVELS.c", 2177; player_index_jump = 0;
 9353                        		__st.umiq	0, _player_index_jump
         01:D426  9C 1A 23   			stz	_player_index_jump
 9354                        	
 9355                        		.dbg	line,	"include\routines_LEVELS.c", 2178; jump_ladder = TRUE;
 9356                        		__st.umiq	1, _jump_ladder
         01:D429  A9 01      			lda.l	#1
         01:D42B  8D 1F 23   			sta	_jump_ladder
 9357                        	
 9358                        		.dbg	line,	"include\routines_LEVELS.c", 2179; jump_max_index = 29;
 9359                        		__st.umiq	29, _jump_max_index
         01:D42E  A9 1D      			lda.l	#29
         01:D430  8D 20 23   			sta	_jump_max_index
 9360                        	
 9361                        		.dbg	line,	"include\routines_LEVELS.c", 2180; player_state = STATE_HANG;
 9362                        		__st.umiq	10, _player_state
         01:D433  A9 0A      			lda.l	#10
         01:D435  8D 16 23   			sta	_player_state
 9363                        	
 9364                        		.dbg	line,	"include\routines_LEVELS.c", 2181; }
 9365                        	
 9366                        		.dbg	line,	"include\routines_LEVELS.c", 2182; }
 9367    01:D438             	.LL383:
 9368                        	
 9369                        		.dbg	line,	"include\routines_LEVELS.c", 2185; // SET PLAYER SPRITE NEW POSITION //
 9370                        	
 9371                        		.dbg	line,	"include\routines_LEVELS.c", 2186; spr_y(player_pos_y);
 9372    01:D438             	.LL382:
 9373                        		__ld.wm		_player_pos_y
         01:D438  AD D4 24   			lda.l	_player_pos_y
         01:D43B  AC D5 24   			ldy.h	_player_pos_y
 9374                        		__call		_spr_y.1
         01:D43E  20 19 E8   			call	_spr_y.1
 9375                        	
 9376                        		.dbg	line,	"include\routines_LEVELS.c", 2188; spr_set(weapon_id);
 9377                        		__ld.umq	_weapon_id
         01:D441  AD 22 23   			lda	_weapon_id
 9378                        		__call		_spr_set.1
         01:D444  20 DD E7   			call	_spr_set.1
 9379                        	
 9380                        		.dbg	line,	"include\routines_LEVELS.c", 2189; spr_y(player_pos_y+8);
 9381                        		__ld.wm		_player_pos_y
         01:D447  AD D4 24   			lda.l	_player_pos_y
         01:D44A  AC D5 24   			ldy.h	_player_pos_y
 9382                        		__add.wi	8
         01:D44D  18         			clc
         01:D44E  69 08      			adc.l	#8
         01:D450  90 01      			bcc	!+
         01:D452  C8         			iny
         01:D453             	!:
 9383                        		__call		_spr_y.1
         01:D453  20 19 E8   			call	_spr_y.1
 9384                        	
 9385                        		.dbg	line,	"include\routines_LEVELS.c", 2190; }
 9386                        	
 9387                        		.dbg	line,	"include\routines_LEVELS.c", 2193; else if(player_state == STATE_CROUCH)
 9388                        		__bra		.LL385
         01:D456  4C 3D DD   			bra	.LL385
 9389    01:D459             	.LL349:
 9390                        		__ld.umq	_player_state
         01:D459  AD 16 23   			lda	_player_state
 9391                        		__equ_b.uiq	7
         01:D45C  C9 07      			cmp	#7
         01:D45E  F0 01      			beq	!+
         01:D460  18         			clc
         01:D461             	!:
 9392                        		__bfalse	.LL386
         01:D461  90 64      			bcc	.LL386
 9393                        	
 9394                        		.dbg	line,	"include\routines_LEVELS.c", 2194; {
 9395                        	
 9396                        		.dbg	line,	"include\routines_LEVELS.c", 2195; if(player_counter_anim == 1)
 9397                        		__ld.umq	_player_counter_anim
         01:D463  AD 19 23   			lda	_player_counter_anim
 9398                        		__equ_b.uiq	1
         01:D466  C9 01      			cmp	#1
         01:D468  F0 01      			beq	!+
         01:D46A  18         			clc
         01:D46B             	!:
 9399                        		__bfalse	.LL387
         01:D46B  90 54      			bcc	.LL387
 9400                        	
 9401                        		.dbg	line,	"include\routines_LEVELS.c", 2196; {
 9402                        	
 9403                        		.dbg	line,	"include\routines_LEVELS.c", 2197; spr_set(player_id);
 9404                        		__ld.umq	_player_id
         01:D46D  AD 15 23   			lda	_player_id
 9405                        		__call		_spr_set.1
         01:D470  20 DD E7   			call	_spr_set.1
 9406                        	
 9407                        		.dbg	line,	"include\routines_LEVELS.c", 2198; spr_pattern(PLAYER_CROUCH_VRAM_ADR);
 9408                        		__ld.wi		7680
         01:D473  62         			cla
         01:D474  A0 1E      			ldy.h	#7680
 9409                        		__call		_spr_pattern.1
         01:D476  20 26 E8   			call	_spr_pattern.1
 9410                        	
 9411                        		.dbg	line,	"include\routines_LEVELS.c", 2200; spr_set(weapon_id);
 9412                        		__ld.umq	_weapon_id
         01:D479  AD 22 23   			lda	_weapon_id
 9413                        		__call		_spr_set.1
         01:D47C  20 DD E7   			call	_spr_set.1
 9414                        	
 9415                        		.dbg	line,	"include\routines_LEVELS.c", 2201; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
 9416                        		__ld.wi		5184
         01:D47F  A9 40      			lda.l	#5184
         01:D481  A0 14      			ldy.h	#5184
 9417                        		__call		_spr_pattern.1
         01:D483  20 26 E8   			call	_spr_pattern.1
 9418                        	
 9419                        		.dbg	line,	"include\routines_LEVELS.c", 2202; 
 9420                        	
 9421                        		.dbg	line,	"include\routines_LEVELS.c", 2203; if(player_axis == AXIS_RIGHT)
 9422                        		__not.um	_player_axis
         01:D486  AD 17 23   			lda	_player_axis
         01:D489  18         			clc
         01:D48A  D0 01      			bne	!+
         01:D48C  38         			sec
         01:D48D             	!:
 9423                        		__bfalse	.LL388
         01:D48D  90 11      			bcc	.LL388
 9424                        	
 9425                        		.dbg	line,	"include\routines_LEVELS.c", 2204; {
 9426                        	
 9427                        		.dbg	line,	"include\routines_LEVELS.c", 2205; spr_x(player_pos_x-1);
 9428                        		__ld.wm		_player_pos_x
         01:D48F  AD D2 24   			lda.l	_player_pos_x
         01:D492  AC D3 24   			ldy.h	_player_pos_x
 9429                        		__sub.wi	1
         01:D495  38         			sec
         01:D496  E9 01      			sbc.l	#1
         01:D498  B0 01      			bcs	!+
         01:D49A  88         			dey
         01:D49B             	!:
 9430                        		__call		_spr_x.1
         01:D49B  20 0A E8   			call	_spr_x.1
 9431                        	
 9432                        		.dbg	line,	"include\routines_LEVELS.c", 2206; }
 9433                        	
 9434                        		.dbg	line,	"include\routines_LEVELS.c", 2208; else
 9435                        		__bra		.LL389
         01:D49E  80 0F      			bra	.LL389
 9436    01:D4A0             	.LL388:
 9437                        	
 9438                        		.dbg	line,	"include\routines_LEVELS.c", 2209; {
 9439                        	
 9440                        		.dbg	line,	"include\routines_LEVELS.c", 2210; spr_x(player_pos_x+17);
 9441                        		__ld.wm		_player_pos_x
         01:D4A0  AD D2 24   			lda.l	_player_pos_x
         01:D4A3  AC D3 24   			ldy.h	_player_pos_x
 9442                        		__add.wi	17
         01:D4A6  18         			clc
         01:D4A7  69 11      			adc.l	#17
         01:D4A9  90 01      			bcc	!+
         01:D4AB  C8         			iny
         01:D4AC             	!:
 9443                        		__call		_spr_x.1
         01:D4AC  20 0A E8   			call	_spr_x.1
 9444                        	
 9445                        		.dbg	line,	"include\routines_LEVELS.c", 2211; }
 9446    01:D4AF             	.LL389:
 9447                        	
 9448                        		.dbg	line,	"include\routines_LEVELS.c", 2213; spr_y(player_pos_y+18);
 9449                        		__ld.wm		_player_pos_y
         01:D4AF  AD D4 24   			lda.l	_player_pos_y
         01:D4B2  AC D5 24   			ldy.h	_player_pos_y
 9450                        		__add.wi	18
         01:D4B5  18         			clc
         01:D4B6  69 12      			adc.l	#18
         01:D4B8  90 01      			bcc	!+
         01:D4BA  C8         			iny
         01:D4BB             	!:
 9451                        		__call		_spr_y.1
         01:D4BB  20 19 E8   			call	_spr_y.1
 9452                        	
 9453                        		.dbg	line,	"include\routines_LEVELS.c", 2214; 
 9454                        	
 9455                        		.dbg	line,	"include\routines_LEVELS.c", 2215; player_counter_anim = 0;
 9456                        		__st.umiq	0, _player_counter_anim
         01:D4BE  9C 19 23   			stz	_player_counter_anim
 9457                        	
 9458                        		.dbg	line,	"include\routines_LEVELS.c", 2216; }
 9459                        	
 9460                        		.dbg	line,	"include\routines_LEVELS.c", 2218; recenter_CAMERA();
 9461    01:D4C1             	.LL387:
 9462                        		__call		_recenter_CAMERA
         01:D4C1  20 63 FF   			call	_recenter_CAMERA
 9463                        	
 9464                        		.dbg	line,	"include\routines_LEVELS.c", 2219; }
 9465                        	
 9466                        		.dbg	line,	"include\routines_LEVELS.c", 2222; else if(player_state == STATE_CROUCH_ATTACK)
 9467                        		__bra		.LL390
         01:D4C4  4C 3D DD   			bra	.LL390
 9468    01:D4C7             	.LL386:
 9469                        		__ld.umq	_player_state
         01:D4C7  AD 16 23   			lda	_player_state
 9470                        		__equ_b.uiq	8
         01:D4CA  C9 08      			cmp	#8
         01:D4CC  F0 01      			beq	!+
         01:D4CE  18         			clc
         01:D4CF             	!:
 9471                        		__bfalse	.LL391
         01:D4CF  B0 03 4C 91			bcc	.LL391
         01:D4D3  D7          
 9472                        	
 9473                        		.dbg	line,	"include\routines_LEVELS.c", 2223; {
 9474                        	
 9475                        		.dbg	line,	"include\routines_LEVELS.c", 2224; if(player_counter_attack == 0)
 9476                        		__not.um	_player_counter_attack
         01:D4D4  AD 1C 23   			lda	_player_counter_attack
         01:D4D7  18         			clc
         01:D4D8  D0 01      			bne	!+
         01:D4DA  38         			sec
         01:D4DB             	!:
 9477                        		__bfalse	.LL392
         01:D4DB  90 4D      			bcc	.LL392
 9478                        	
 9479                        		.dbg	line,	"include\routines_LEVELS.c", 2225; {
 9480                        	
 9481                        		.dbg	line,	"include\routines_LEVELS.c", 2226; spr_set(player_id);
 9482                        		__ld.umq	_player_id
         01:D4DD  AD 15 23   			lda	_player_id
 9483                        		__call		_spr_set.1
         01:D4E0  20 DD E7   			call	_spr_set.1
 9484                        	
 9485                        		.dbg	line,	"include\routines_LEVELS.c", 2227; spr_pattern(PLAYER_CROUCH_1_VRAM_ADR);
 9486                        		__ld.wi		10496
         01:D4E3  62         			cla
         01:D4E4  A0 29      			ldy.h	#10496
 9487                        		__call		_spr_pattern.1
         01:D4E6  20 26 E8   			call	_spr_pattern.1
 9488                        	
 9489                        		.dbg	line,	"include\routines_LEVELS.c", 2229; spr_set(weapon_id);
 9490                        		__ld.umq	_weapon_id
         01:D4E9  AD 22 23   			lda	_weapon_id
 9491                        		__call		_spr_set.1
         01:D4EC  20 DD E7   			call	_spr_set.1
 9492                        	
 9493                        		.dbg	line,	"include\routines_LEVELS.c", 2230; spr_pattern(WEAPON_ATTACK_1_VRAM_ADRESS);
 9494                        		__ld.wi		5376
         01:D4EF  62         			cla
         01:D4F0  A0 15      			ldy.h	#5376
 9495                        		__call		_spr_pattern.1
         01:D4F2  20 26 E8   			call	_spr_pattern.1
 9496                        	
 9497                        		.dbg	line,	"include\routines_LEVELS.c", 2232; if(player_axis == AXIS_RIGHT)
 9498                        		__not.um	_player_axis
         01:D4F5  AD 17 23   			lda	_player_axis
         01:D4F8  18         			clc
         01:D4F9  D0 01      			bne	!+
         01:D4FB  38         			sec
         01:D4FC             	!:
 9499                        		__bfalse	.LL393
         01:D4FC  90 11      			bcc	.LL393
 9500                        	
 9501                        		.dbg	line,	"include\routines_LEVELS.c", 2233; {
 9502                        	
 9503                        		.dbg	line,	"include\routines_LEVELS.c", 2234; spr_x(player_pos_x-16);
 9504                        		__ld.wm		_player_pos_x
         01:D4FE  AD D2 24   			lda.l	_player_pos_x
         01:D501  AC D3 24   			ldy.h	_player_pos_x
 9505                        		__sub.wi	16
         01:D504  38         			sec
         01:D505  E9 10      			sbc.l	#16
         01:D507  B0 01      			bcs	!+
         01:D509  88         			dey
         01:D50A             	!:
 9506                        		__call		_spr_x.1
         01:D50A  20 0A E8   			call	_spr_x.1
 9507                        	
 9508                        		.dbg	line,	"include\routines_LEVELS.c", 2235; }
 9509                        	
 9510                        		.dbg	line,	"include\routines_LEVELS.c", 2237; else
 9511                        		__bra		.LL394
         01:D50D  80 0F      			bra	.LL394
 9512    01:D50F             	.LL393:
 9513                        	
 9514                        		.dbg	line,	"include\routines_LEVELS.c", 2238; {
 9515                        	
 9516                        		.dbg	line,	"include\routines_LEVELS.c", 2239; spr_x(player_pos_x+32);
 9517                        		__ld.wm		_player_pos_x
         01:D50F  AD D2 24   			lda.l	_player_pos_x
         01:D512  AC D3 24   			ldy.h	_player_pos_x
 9518                        		__add.wi	32
         01:D515  18         			clc
         01:D516  69 20      			adc.l	#32
         01:D518  90 01      			bcc	!+
         01:D51A  C8         			iny
         01:D51B             	!:
 9519                        		__call		_spr_x.1
         01:D51B  20 0A E8   			call	_spr_x.1
 9520                        	
 9521                        		.dbg	line,	"include\routines_LEVELS.c", 2240; }
 9522    01:D51E             	.LL394:
 9523                        	
 9524                        		.dbg	line,	"include\routines_LEVELS.c", 2242; spr_y(player_pos_y);
 9525                        		__ld.wm		_player_pos_y
         01:D51E  AD D4 24   			lda.l	_player_pos_y
         01:D521  AC D5 24   			ldy.h	_player_pos_y
 9526                        		__call		_spr_y.1
         01:D524  20 19 E8   			call	_spr_y.1
 9527                        	
 9528                        		.dbg	line,	"include\routines_LEVELS.c", 2243; }
 9529                        	
 9530                        		.dbg	line,	"include\routines_LEVELS.c", 2245; else if(player_counter_attack == 6)
 9531                        		__bra		.LL395
         01:D527  4C 8B D7   			bra	.LL395
 9532    01:D52A             	.LL392:
 9533                        		__ld.umq	_player_counter_attack
         01:D52A  AD 1C 23   			lda	_player_counter_attack
 9534                        		__equ_b.uiq	6
         01:D52D  C9 06      			cmp	#6
         01:D52F  F0 01      			beq	!+
         01:D531  18         			clc
         01:D532             	!:
 9535                        		__bfalse	.LL396
         01:D532  90 54      			bcc	.LL396
 9536                        	
 9537                        		.dbg	line,	"include\routines_LEVELS.c", 2246; {
 9538                        	
 9539                        		.dbg	line,	"include\routines_LEVELS.c", 2247; spr_set(player_id);
 9540                        		__ld.umq	_player_id
         01:D534  AD 15 23   			lda	_player_id
 9541                        		__call		_spr_set.1
         01:D537  20 DD E7   			call	_spr_set.1
 9542                        	
 9543                        		.dbg	line,	"include\routines_LEVELS.c", 2248; spr_pattern(PLAYER_CROUCH_2_VRAM_ADR);
 9544                        		__ld.wi		10752
         01:D53A  62         			cla
         01:D53B  A0 2A      			ldy.h	#10752
 9545                        		__call		_spr_pattern.1
         01:D53D  20 26 E8   			call	_spr_pattern.1
 9546                        	
 9547                        		.dbg	line,	"include\routines_LEVELS.c", 2250; spr_set(weapon_id);
 9548                        		__ld.umq	_weapon_id
         01:D540  AD 22 23   			lda	_weapon_id
 9549                        		__call		_spr_set.1
         01:D543  20 DD E7   			call	_spr_set.1
 9550                        	
 9551                        		.dbg	line,	"include\routines_LEVELS.c", 2251; spr_pattern(WEAPON_ATTACK_2_VRAM_ADRESS);
 9552                        		__ld.wi		5440
         01:D546  A9 40      			lda.l	#5440
         01:D548  A0 15      			ldy.h	#5440
 9553                        		__call		_spr_pattern.1
         01:D54A  20 26 E8   			call	_spr_pattern.1
 9554                        	
 9555                        		.dbg	line,	"include\routines_LEVELS.c", 2253; if(player_axis == AXIS_RIGHT)
 9556                        		__not.um	_player_axis
         01:D54D  AD 17 23   			lda	_player_axis
         01:D550  18         			clc
         01:D551  D0 01      			bne	!+
         01:D553  38         			sec
         01:D554             	!:
 9557                        		__bfalse	.LL397
         01:D554  90 11      			bcc	.LL397
 9558                        	
 9559                        		.dbg	line,	"include\routines_LEVELS.c", 2254; {
 9560                        	
 9561                        		.dbg	line,	"include\routines_LEVELS.c", 2255; spr_x(player_pos_x+32);
 9562                        		__ld.wm		_player_pos_x
         01:D556  AD D2 24   			lda.l	_player_pos_x
         01:D559  AC D3 24   			ldy.h	_player_pos_x
 9563                        		__add.wi	32
         01:D55C  18         			clc
         01:D55D  69 20      			adc.l	#32
         01:D55F  90 01      			bcc	!+
         01:D561  C8         			iny
         01:D562             	!:
 9564                        		__call		_spr_x.1
         01:D562  20 0A E8   			call	_spr_x.1
 9565                        	
 9566                        		.dbg	line,	"include\routines_LEVELS.c", 2256; 
 9567                        	
 9568                        		.dbg	line,	"include\routines_LEVELS.c", 2257; }
 9569                        	
 9570                        		.dbg	line,	"include\routines_LEVELS.c", 2258; 
 9571                        	
 9572                        		.dbg	line,	"include\routines_LEVELS.c", 2259; else
 9573                        		__bra		.LL398
         01:D565  80 0F      			bra	.LL398
 9574    01:D567             	.LL397:
 9575                        	
 9576                        		.dbg	line,	"include\routines_LEVELS.c", 2260; {
 9577                        	
 9578                        		.dbg	line,	"include\routines_LEVELS.c", 2261; spr_x(player_pos_x-16);
 9579                        		__ld.wm		_player_pos_x
         01:D567  AD D2 24   			lda.l	_player_pos_x
         01:D56A  AC D3 24   			ldy.h	_player_pos_x
 9580                        		__sub.wi	16
         01:D56D  38         			sec
         01:D56E  E9 10      			sbc.l	#16
         01:D570  B0 01      			bcs	!+
         01:D572  88         			dey
         01:D573             	!:
 9581                        		__call		_spr_x.1
         01:D573  20 0A E8   			call	_spr_x.1
 9582                        	
 9583                        		.dbg	line,	"include\routines_LEVELS.c", 2262; }
 9584    01:D576             	.LL398:
 9585                        	
 9586                        		.dbg	line,	"include\routines_LEVELS.c", 2264; spr_y(player_pos_y+14);
 9587                        		__ld.wm		_player_pos_y
         01:D576  AD D4 24   			lda.l	_player_pos_y
         01:D579  AC D5 24   			ldy.h	_player_pos_y
 9588                        		__add.wi	14
         01:D57C  18         			clc
         01:D57D  69 0E      			adc.l	#14
         01:D57F  90 01      			bcc	!+
         01:D581  C8         			iny
         01:D582             	!:
 9589                        		__call		_spr_y.1
         01:D582  20 19 E8   			call	_spr_y.1
 9590                        	
 9591                        		.dbg	line,	"include\routines_LEVELS.c", 2265; }
 9592                        	
 9593                        		.dbg	line,	"include\routines_LEVELS.c", 2267; else if(player_counter_attack == 7)
 9594                        		__bra		.LL399
         01:D585  4C 8B D7   			bra	.LL399
 9595    01:D588             	.LL396:
 9596                        		__ld.umq	_player_counter_attack
         01:D588  AD 1C 23   			lda	_player_counter_attack
 9597                        		__equ_b.uiq	7
         01:D58B  C9 07      			cmp	#7
         01:D58D  F0 01      			beq	!+
         01:D58F  18         			clc
         01:D590             	!:
 9598                        		__bfalse	.LL400
         01:D590  90 6C      			bcc	.LL400
 9599                        	
 9600                        		.dbg	line,	"include\routines_LEVELS.c", 2268; {
 9601                        	
 9602                        		.dbg	line,	"include\routines_LEVELS.c", 2269; spr_set(chain_id);
 9603                        		__ld.umq	_chain_id
         01:D592  AD 21 23   			lda	_chain_id
 9604                        		__call		_spr_set.1
         01:D595  20 DD E7   			call	_spr_set.1
 9605                        	
 9606                        		.dbg	line,	"include\routines_LEVELS.c", 2270; spr_y(player_pos_y+8);
 9607                        		__ld.wm		_player_pos_y
         01:D598  AD D4 24   			lda.l	_player_pos_y
         01:D59B  AC D5 24   			ldy.h	_player_pos_y
 9608                        		__add.wi	8
         01:D59E  18         			clc
         01:D59F  69 08      			adc.l	#8
         01:D5A1  90 01      			bcc	!+
         01:D5A3  C8         			iny
         01:D5A4             	!:
 9609                        		__call		_spr_y.1
         01:D5A4  20 19 E8   			call	_spr_y.1
 9610                        	
 9611                        		.dbg	line,	"include\routines_LEVELS.c", 2272; if(player_axis == AXIS_RIGHT)
 9612                        		__not.um	_player_axis
         01:D5A7  AD 17 23   			lda	_player_axis
         01:D5AA  18         			clc
         01:D5AB  D0 01      			bne	!+
         01:D5AD  38         			sec
         01:D5AE             	!:
 9613                        		__bfalse	.LL401
         01:D5AE  90 27      			bcc	.LL401
 9614                        	
 9615                        		.dbg	line,	"include\routines_LEVELS.c", 2273; {
 9616                        	
 9617                        		.dbg	line,	"include\routines_LEVELS.c", 2274; spr_x(player_pos_x+32);
 9618                        		__ld.wm		_player_pos_x
         01:D5B0  AD D2 24   			lda.l	_player_pos_x
         01:D5B3  AC D3 24   			ldy.h	_player_pos_x
 9619                        		__add.wi	32
         01:D5B6  18         			clc
         01:D5B7  69 20      			adc.l	#32
         01:D5B9  90 01      			bcc	!+
         01:D5BB  C8         			iny
         01:D5BC             	!:
 9620                        		__call		_spr_x.1
         01:D5BC  20 0A E8   			call	_spr_x.1
 9621                        	
 9622                        		.dbg	line,	"include\routines_LEVELS.c", 2276; spr_set(weapon_id);
 9623                        		__ld.umq	_weapon_id
         01:D5BF  AD 22 23   			lda	_weapon_id
 9624                        		__call		_spr_set.1
         01:D5C2  20 DD E7   			call	_spr_set.1
 9625                        	
 9626                        		.dbg	line,	"include\routines_LEVELS.c", 2277; spr_x(player_pos_x+48);
 9627                        		__ld.wm		_player_pos_x
         01:D5C5  AD D2 24   			lda.l	_player_pos_x
         01:D5C8  AC D3 24   			ldy.h	_player_pos_x
 9628                        		__add.wi	48
         01:D5CB  18         			clc
         01:D5CC  69 30      			adc.l	#48
         01:D5CE  90 01      			bcc	!+
         01:D5D0  C8         			iny
         01:D5D1             	!:
 9629                        		__call		_spr_x.1
         01:D5D1  20 0A E8   			call	_spr_x.1
 9630                        	
 9631                        		.dbg	line,	"include\routines_LEVELS.c", 2278; }
 9632                        	
 9633                        		.dbg	line,	"include\routines_LEVELS.c", 2279; 
 9634                        	
 9635                        		.dbg	line,	"include\routines_LEVELS.c", 2280; else
 9636                        		__bra		.LL402
         01:D5D4  4C 8B D7   			bra	.LL402
 9637    01:D5D7             	.LL401:
 9638                        	
 9639                        		.dbg	line,	"include\routines_LEVELS.c", 2281; {
 9640                        	
 9641                        		.dbg	line,	"include\routines_LEVELS.c", 2282; spr_x(player_pos_x-16);
 9642                        		__ld.wm		_player_pos_x
         01:D5D7  AD D2 24   			lda.l	_player_pos_x
         01:D5DA  AC D3 24   			ldy.h	_player_pos_x
 9643                        		__sub.wi	16
         01:D5DD  38         			sec
         01:D5DE  E9 10      			sbc.l	#16
         01:D5E0  B0 01      			bcs	!+
         01:D5E2  88         			dey
         01:D5E3             	!:
 9644                        		__call		_spr_x.1
         01:D5E3  20 0A E8   			call	_spr_x.1
 9645                        	
 9646                        		.dbg	line,	"include\routines_LEVELS.c", 2284; spr_set(weapon_id);
 9647                        		__ld.umq	_weapon_id
         01:D5E6  AD 22 23   			lda	_weapon_id
 9648                        		__call		_spr_set.1
         01:D5E9  20 DD E7   			call	_spr_set.1
 9649                        	
 9650                        		.dbg	line,	"include\routines_LEVELS.c", 2285; spr_x(player_pos_x-32);
 9651                        		__ld.wm		_player_pos_x
         01:D5EC  AD D2 24   			lda.l	_player_pos_x
         01:D5EF  AC D3 24   			ldy.h	_player_pos_x
 9652                        		__sub.wi	32
         01:D5F2  38         			sec
         01:D5F3  E9 20      			sbc.l	#32
         01:D5F5  B0 01      			bcs	!+
         01:D5F7  88         			dey
         01:D5F8             	!:
 9653                        		__call		_spr_x.1
         01:D5F8  20 0A E8   			call	_spr_x.1
 9654                        	
 9655                        		.dbg	line,	"include\routines_LEVELS.c", 2286; }
 9656    01:D5FB             	.LL402	.alias		.LL403
 9657                        	
 9658                        		.dbg	line,	"include\routines_LEVELS.c", 2287; }
 9659                        	
 9660                        		.dbg	line,	"include\routines_LEVELS.c", 2289; else if(player_counter_attack == 8)
 9661                        		__bra		.LL403
         01:D5FB  4C 8B D7   			bra	.LL403
 9662    01:D5FE             	.LL400:
 9663                        		__ld.umq	_player_counter_attack
         01:D5FE  AD 1C 23   			lda	_player_counter_attack
 9664                        		__equ_b.uiq	8
         01:D601  C9 08      			cmp	#8
         01:D603  F0 01      			beq	!+
         01:D605  18         			clc
         01:D606             	!:
 9665                        		__bfalse	.LL404
         01:D606  90 71      			bcc	.LL404
 9666                        	
 9667                        		.dbg	line,	"include\routines_LEVELS.c", 2290; {
 9668                        	
 9669                        		.dbg	line,	"include\routines_LEVELS.c", 2291; spr_set(chain_id+1);
 9670                        		__ld.um		_chain_id
         01:D608  AD 21 23   			lda	_chain_id
         01:D60B  C2         			cly
 9671                        		__add.wi	1
         01:D60C  1A         			inc	a
         01:D60D  D0 01      			bne	!+
         01:D60F  C8         			iny
         01:D610             	!:
 9672                        		__call		_spr_set.1
         01:D610  20 DD E7   			call	_spr_set.1
 9673                        	
 9674                        		.dbg	line,	"include\routines_LEVELS.c", 2292; spr_y(player_pos_y+8);
 9675                        		__ld.wm		_player_pos_y
         01:D613  AD D4 24   			lda.l	_player_pos_y
         01:D616  AC D5 24   			ldy.h	_player_pos_y
 9676                        		__add.wi	8
         01:D619  18         			clc
         01:D61A  69 08      			adc.l	#8
         01:D61C  90 01      			bcc	!+
         01:D61E  C8         			iny
         01:D61F             	!:
 9677                        		__call		_spr_y.1
         01:D61F  20 19 E8   			call	_spr_y.1
 9678                        	
 9679                        		.dbg	line,	"include\routines_LEVELS.c", 2294; if(player_axis == AXIS_RIGHT)
 9680                        		__not.um	_player_axis
         01:D622  AD 17 23   			lda	_player_axis
         01:D625  18         			clc
         01:D626  D0 01      			bne	!+
         01:D628  38         			sec
         01:D629             	!:
 9681                        		__bfalse	.LL405
         01:D629  90 27      			bcc	.LL405
 9682                        	
 9683                        		.dbg	line,	"include\routines_LEVELS.c", 2295; {
 9684                        	
 9685                        		.dbg	line,	"include\routines_LEVELS.c", 2296; spr_x(player_pos_x+48);
 9686                        		__ld.wm		_player_pos_x
         01:D62B  AD D2 24   			lda.l	_player_pos_x
         01:D62E  AC D3 24   			ldy.h	_player_pos_x
 9687                        		__add.wi	48
         01:D631  18         			clc
         01:D632  69 30      			adc.l	#48
         01:D634  90 01      			bcc	!+
         01:D636  C8         			iny
         01:D637             	!:
 9688                        		__call		_spr_x.1
         01:D637  20 0A E8   			call	_spr_x.1
 9689                        	
 9690                        		.dbg	line,	"include\routines_LEVELS.c", 2298; spr_set(weapon_id);
 9691                        		__ld.umq	_weapon_id
         01:D63A  AD 22 23   			lda	_weapon_id
 9692                        		__call		_spr_set.1
         01:D63D  20 DD E7   			call	_spr_set.1
 9693                        	
 9694                        		.dbg	line,	"include\routines_LEVELS.c", 2299; spr_x(player_pos_x+64);
 9695                        		__ld.wm		_player_pos_x
         01:D640  AD D2 24   			lda.l	_player_pos_x
         01:D643  AC D3 24   			ldy.h	_player_pos_x
 9696                        		__add.wi	64
         01:D646  18         			clc
         01:D647  69 40      			adc.l	#64
         01:D649  90 01      			bcc	!+
         01:D64B  C8         			iny
         01:D64C             	!:
 9697                        		__call		_spr_x.1
         01:D64C  20 0A E8   			call	_spr_x.1
 9698                        	
 9699                        		.dbg	line,	"include\routines_LEVELS.c", 2300; }
 9700                        	
 9701                        		.dbg	line,	"include\routines_LEVELS.c", 2301; 
 9702                        	
 9703                        		.dbg	line,	"include\routines_LEVELS.c", 2302; else
 9704                        		__bra		.LL406
         01:D64F  4C 8B D7   			bra	.LL406
 9705    01:D652             	.LL405:
 9706                        	
 9707                        		.dbg	line,	"include\routines_LEVELS.c", 2303; {
 9708                        	
 9709                        		.dbg	line,	"include\routines_LEVELS.c", 2304; spr_x(player_pos_x-32);
 9710                        		__ld.wm		_player_pos_x
         01:D652  AD D2 24   			lda.l	_player_pos_x
         01:D655  AC D3 24   			ldy.h	_player_pos_x
 9711                        		__sub.wi	32
         01:D658  38         			sec
         01:D659  E9 20      			sbc.l	#32
         01:D65B  B0 01      			bcs	!+
         01:D65D  88         			dey
         01:D65E             	!:
 9712                        		__call		_spr_x.1
         01:D65E  20 0A E8   			call	_spr_x.1
 9713                        	
 9714                        		.dbg	line,	"include\routines_LEVELS.c", 2306; spr_set(weapon_id);
 9715                        		__ld.umq	_weapon_id
         01:D661  AD 22 23   			lda	_weapon_id
 9716                        		__call		_spr_set.1
         01:D664  20 DD E7   			call	_spr_set.1
 9717                        	
 9718                        		.dbg	line,	"include\routines_LEVELS.c", 2307; spr_x(player_pos_x-48);
 9719                        		__ld.wm		_player_pos_x
         01:D667  AD D2 24   			lda.l	_player_pos_x
         01:D66A  AC D3 24   			ldy.h	_player_pos_x
 9720                        		__sub.wi	48
         01:D66D  38         			sec
         01:D66E  E9 30      			sbc.l	#48
         01:D670  B0 01      			bcs	!+
         01:D672  88         			dey
         01:D673             	!:
 9721                        		__call		_spr_x.1
         01:D673  20 0A E8   			call	_spr_x.1
 9722                        	
 9723                        		.dbg	line,	"include\routines_LEVELS.c", 2308; }
 9724    01:D676             	.LL406	.alias		.LL407
 9725                        	
 9726                        		.dbg	line,	"include\routines_LEVELS.c", 2309; }
 9727                        	
 9728                        		.dbg	line,	"include\routines_LEVELS.c", 2311; else if(player_counter_attack == 9)
 9729                        		__bra		.LL407
         01:D676  4C 8B D7   			bra	.LL407
 9730    01:D679             	.LL404:
 9731                        		__ld.umq	_player_counter_attack
         01:D679  AD 1C 23   			lda	_player_counter_attack
 9732                        		__equ_b.uiq	9
         01:D67C  C9 09      			cmp	#9
         01:D67E  F0 01      			beq	!+
         01:D680  18         			clc
         01:D681             	!:
 9733                        		__bfalse	.LL408
         01:D681  90 73      			bcc	.LL408
 9734                        	
 9735                        		.dbg	line,	"include\routines_LEVELS.c", 2312; {
 9736                        	
 9737                        		.dbg	line,	"include\routines_LEVELS.c", 2313; spr_set(chain_id+2);
 9738                        		__ld.um		_chain_id
         01:D683  AD 21 23   			lda	_chain_id
         01:D686  C2         			cly
 9739                        		__add.wi	2
         01:D687  18         			clc
         01:D688  69 02      			adc.l	#2
         01:D68A  90 01      			bcc	!+
         01:D68C  C8         			iny
         01:D68D             	!:
 9740                        		__call		_spr_set.1
         01:D68D  20 DD E7   			call	_spr_set.1
 9741                        	
 9742                        		.dbg	line,	"include\routines_LEVELS.c", 2314; spr_y(player_pos_y+8);
 9743                        		__ld.wm		_player_pos_y
         01:D690  AD D4 24   			lda.l	_player_pos_y
         01:D693  AC D5 24   			ldy.h	_player_pos_y
 9744                        		__add.wi	8
         01:D696  18         			clc
         01:D697  69 08      			adc.l	#8
         01:D699  90 01      			bcc	!+
         01:D69B  C8         			iny
         01:D69C             	!:
 9745                        		__call		_spr_y.1
         01:D69C  20 19 E8   			call	_spr_y.1
 9746                        	
 9747                        		.dbg	line,	"include\routines_LEVELS.c", 2316; if(player_axis == AXIS_RIGHT)
 9748                        		__not.um	_player_axis
         01:D69F  AD 17 23   			lda	_player_axis
         01:D6A2  18         			clc
         01:D6A3  D0 01      			bne	!+
         01:D6A5  38         			sec
         01:D6A6             	!:
 9749                        		__bfalse	.LL409
         01:D6A6  90 27      			bcc	.LL409
 9750                        	
 9751                        		.dbg	line,	"include\routines_LEVELS.c", 2317; {
 9752                        	
 9753                        		.dbg	line,	"include\routines_LEVELS.c", 2318; spr_x(player_pos_x+64);
 9754                        		__ld.wm		_player_pos_x
         01:D6A8  AD D2 24   			lda.l	_player_pos_x
         01:D6AB  AC D3 24   			ldy.h	_player_pos_x
 9755                        		__add.wi	64
         01:D6AE  18         			clc
         01:D6AF  69 40      			adc.l	#64
         01:D6B1  90 01      			bcc	!+
         01:D6B3  C8         			iny
         01:D6B4             	!:
 9756                        		__call		_spr_x.1
         01:D6B4  20 0A E8   			call	_spr_x.1
 9757                        	
 9758                        		.dbg	line,	"include\routines_LEVELS.c", 2320; spr_set(weapon_id);
 9759                        		__ld.umq	_weapon_id
         01:D6B7  AD 22 23   			lda	_weapon_id
 9760                        		__call		_spr_set.1
         01:D6BA  20 DD E7   			call	_spr_set.1
 9761                        	
 9762                        		.dbg	line,	"include\routines_LEVELS.c", 2321; spr_x(player_pos_x+80);
 9763                        		__ld.wm		_player_pos_x
         01:D6BD  AD D2 24   			lda.l	_player_pos_x
         01:D6C0  AC D3 24   			ldy.h	_player_pos_x
 9764                        		__add.wi	80
         01:D6C3  18         			clc
         01:D6C4  69 50      			adc.l	#80
         01:D6C6  90 01      			bcc	!+
         01:D6C8  C8         			iny
         01:D6C9             	!:
 9765                        		__call		_spr_x.1
         01:D6C9  20 0A E8   			call	_spr_x.1
 9766                        	
 9767                        		.dbg	line,	"include\routines_LEVELS.c", 2322; }
 9768                        	
 9769                        		.dbg	line,	"include\routines_LEVELS.c", 2323; 
 9770                        	
 9771                        		.dbg	line,	"include\routines_LEVELS.c", 2324; else
 9772                        		__bra		.LL410
         01:D6CC  4C 8B D7   			bra	.LL410
 9773    01:D6CF             	.LL409:
 9774                        	
 9775                        		.dbg	line,	"include\routines_LEVELS.c", 2325; {
 9776                        	
 9777                        		.dbg	line,	"include\routines_LEVELS.c", 2326; spr_x(player_pos_x-48);
 9778                        		__ld.wm		_player_pos_x
         01:D6CF  AD D2 24   			lda.l	_player_pos_x
         01:D6D2  AC D3 24   			ldy.h	_player_pos_x
 9779                        		__sub.wi	48
         01:D6D5  38         			sec
         01:D6D6  E9 30      			sbc.l	#48
         01:D6D8  B0 01      			bcs	!+
         01:D6DA  88         			dey
         01:D6DB             	!:
 9780                        		__call		_spr_x.1
         01:D6DB  20 0A E8   			call	_spr_x.1
 9781                        	
 9782                        		.dbg	line,	"include\routines_LEVELS.c", 2328; spr_set(weapon_id);
 9783                        		__ld.umq	_weapon_id
         01:D6DE  AD 22 23   			lda	_weapon_id
 9784                        		__call		_spr_set.1
         01:D6E1  20 DD E7   			call	_spr_set.1
 9785                        	
 9786                        		.dbg	line,	"include\routines_LEVELS.c", 2329; spr_x(player_pos_x-64);
 9787                        		__ld.wm		_player_pos_x
         01:D6E4  AD D2 24   			lda.l	_player_pos_x
         01:D6E7  AC D3 24   			ldy.h	_player_pos_x
 9788                        		__sub.wi	64
         01:D6EA  38         			sec
         01:D6EB  E9 40      			sbc.l	#64
         01:D6ED  B0 01      			bcs	!+
         01:D6EF  88         			dey
         01:D6F0             	!:
 9789                        		__call		_spr_x.1
         01:D6F0  20 0A E8   			call	_spr_x.1
 9790                        	
 9791                        		.dbg	line,	"include\routines_LEVELS.c", 2330; }
 9792    01:D6F3             	.LL410	.alias		.LL411
 9793                        	
 9794                        		.dbg	line,	"include\routines_LEVELS.c", 2331; }
 9795                        	
 9796                        		.dbg	line,	"include\routines_LEVELS.c", 2333; else if(player_counter_attack == 23)
 9797                        		__bra		.LL411
         01:D6F3  4C 8B D7   			bra	.LL411
 9798    01:D6F6             	.LL408:
 9799                        		__ld.umq	_player_counter_attack
         01:D6F6  AD 1C 23   			lda	_player_counter_attack
 9800                        		__equ_b.uiq	23
         01:D6F9  C9 17      			cmp	#23
         01:D6FB  F0 01      			beq	!+
         01:D6FD  18         			clc
         01:D6FE             	!:
 9801                        		__bfalse	.LL412
         01:D6FE  B0 03 4C 8B			bcc	.LL412
         01:D702  D7          
 9802                        	
 9803                        		.dbg	line,	"include\routines_LEVELS.c", 2334; {
 9804                        	
 9805                        		.dbg	line,	"include\routines_LEVELS.c", 2335; spr_set(chain_id);
 9806                        		__ld.umq	_chain_id
         01:D703  AD 21 23   			lda	_chain_id
 9807                        		__call		_spr_set.1
         01:D706  20 DD E7   			call	_spr_set.1
 9808                        	
 9809                        		.dbg	line,	"include\routines_LEVELS.c", 2336; spr_hide();
 9810                        		__call		_spr_hide
         01:D709  20 F8 E7   			call	_spr_hide
 9811                        	
 9812                        		.dbg	line,	"include\routines_LEVELS.c", 2338; spr_set(chain_id+1);
 9813                        		__ld.um		_chain_id
         01:D70C  AD 21 23   			lda	_chain_id
         01:D70F  C2         			cly
 9814                        		__add.wi	1
         01:D710  1A         			inc	a
         01:D711  D0 01      			bne	!+
         01:D713  C8         			iny
         01:D714             	!:
 9815                        		__call		_spr_set.1
         01:D714  20 DD E7   			call	_spr_set.1
 9816                        	
 9817                        		.dbg	line,	"include\routines_LEVELS.c", 2339; spr_hide();
 9818                        		__call		_spr_hide
         01:D717  20 F8 E7   			call	_spr_hide
 9819                        	
 9820                        		.dbg	line,	"include\routines_LEVELS.c", 2341; spr_set(chain_id+2);
 9821                        		__ld.um		_chain_id
         01:D71A  AD 21 23   			lda	_chain_id
         01:D71D  C2         			cly
 9822                        		__add.wi	2
         01:D71E  18         			clc
         01:D71F  69 02      			adc.l	#2
         01:D721  90 01      			bcc	!+
         01:D723  C8         			iny
         01:D724             	!:
 9823                        		__call		_spr_set.1
         01:D724  20 DD E7   			call	_spr_set.1
 9824                        	
 9825                        		.dbg	line,	"include\routines_LEVELS.c", 2342; spr_hide();
 9826                        		__call		_spr_hide
         01:D727  20 F8 E7   			call	_spr_hide
 9827                        	
 9828                        		.dbg	line,	"include\routines_LEVELS.c", 2344; spr_set(player_id);
 9829                        		__ld.umq	_player_id
         01:D72A  AD 15 23   			lda	_player_id
 9830                        		__call		_spr_set.1
         01:D72D  20 DD E7   			call	_spr_set.1
 9831                        	
 9832                        		.dbg	line,	"include\routines_LEVELS.c", 2345; spr_pattern(PLAYER_CROUCH_VRAM_ADR);
 9833                        		__ld.wi		7680
         01:D730  62         			cla
         01:D731  A0 1E      			ldy.h	#7680
 9834                        		__call		_spr_pattern.1
         01:D733  20 26 E8   			call	_spr_pattern.1
 9835                        	
 9836                        		.dbg	line,	"include\routines_LEVELS.c", 2347; spr_set(weapon_id);
 9837                        		__ld.umq	_weapon_id
         01:D736  AD 22 23   			lda	_weapon_id
 9838                        		__call		_spr_set.1
         01:D739  20 DD E7   			call	_spr_set.1
 9839                        	
 9840                        		.dbg	line,	"include\routines_LEVELS.c", 2348; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
 9841                        		__ld.wi		5184
         01:D73C  A9 40      			lda.l	#5184
         01:D73E  A0 14      			ldy.h	#5184
 9842                        		__call		_spr_pattern.1
         01:D740  20 26 E8   			call	_spr_pattern.1
 9843                        	
 9844                        		.dbg	line,	"include\routines_LEVELS.c", 2349; 
 9845                        	
 9846                        		.dbg	line,	"include\routines_LEVELS.c", 2350; if(player_axis == AXIS_RIGHT)
 9847                        		__not.um	_player_axis
         01:D743  AD 17 23   			lda	_player_axis
         01:D746  18         			clc
         01:D747  D0 01      			bne	!+
         01:D749  38         			sec
         01:D74A             	!:
 9848                        		__bfalse	.LL413
         01:D74A  90 11      			bcc	.LL413
 9849                        	
 9850                        		.dbg	line,	"include\routines_LEVELS.c", 2351; {
 9851                        	
 9852                        		.dbg	line,	"include\routines_LEVELS.c", 2352; spr_x(player_pos_x-1);
 9853                        		__ld.wm		_player_pos_x
         01:D74C  AD D2 24   			lda.l	_player_pos_x
         01:D74F  AC D3 24   			ldy.h	_player_pos_x
 9854                        		__sub.wi	1
         01:D752  38         			sec
         01:D753  E9 01      			sbc.l	#1
         01:D755  B0 01      			bcs	!+
         01:D757  88         			dey
         01:D758             	!:
 9855                        		__call		_spr_x.1
         01:D758  20 0A E8   			call	_spr_x.1
 9856                        	
 9857                        		.dbg	line,	"include\routines_LEVELS.c", 2353; }
 9858                        	
 9859                        		.dbg	line,	"include\routines_LEVELS.c", 2355; else
 9860                        		__bra		.LL414
         01:D75B  80 0F      			bra	.LL414
 9861    01:D75D             	.LL413:
 9862                        	
 9863                        		.dbg	line,	"include\routines_LEVELS.c", 2356; {
 9864                        	
 9865                        		.dbg	line,	"include\routines_LEVELS.c", 2357; spr_x(player_pos_x+17);
 9866                        		__ld.wm		_player_pos_x
         01:D75D  AD D2 24   			lda.l	_player_pos_x
         01:D760  AC D3 24   			ldy.h	_player_pos_x
 9867                        		__add.wi	17
         01:D763  18         			clc
         01:D764  69 11      			adc.l	#17
         01:D766  90 01      			bcc	!+
         01:D768  C8         			iny
         01:D769             	!:
 9868                        		__call		_spr_x.1
         01:D769  20 0A E8   			call	_spr_x.1
 9869                        	
 9870                        		.dbg	line,	"include\routines_LEVELS.c", 2358; }
 9871    01:D76C             	.LL414:
 9872                        	
 9873                        		.dbg	line,	"include\routines_LEVELS.c", 2360; spr_y(player_pos_y+18);
 9874                        		__ld.wm		_player_pos_y
         01:D76C  AD D4 24   			lda.l	_player_pos_y
         01:D76F  AC D5 24   			ldy.h	_player_pos_y
 9875                        		__add.wi	18
         01:D772  18         			clc
         01:D773  69 12      			adc.l	#18
         01:D775  90 01      			bcc	!+
         01:D777  C8         			iny
         01:D778             	!:
 9876                        		__call		_spr_y.1
         01:D778  20 19 E8   			call	_spr_y.1
 9877                        	
 9878                        		.dbg	line,	"include\routines_LEVELS.c", 2362; player_attack = FALSE;
 9879                        		__st.umiq	0, _player_attack
         01:D77B  9C 1E 23   			stz	_player_attack
 9880                        	
 9881                        		.dbg	line,	"include\routines_LEVELS.c", 2363; player_counter_attack = 1;
 9882                        		__st.umiq	1, _player_counter_attack
         01:D77E  A9 01      			lda.l	#1
         01:D780  8D 1C 23   			sta	_player_counter_attack
 9883                        	
 9884                        		.dbg	line,	"include\routines_LEVELS.c", 2364; player_state = STATE_CROUCH;
 9885                        		__st.umiq	7, _player_state
         01:D783  A9 07      			lda.l	#7
         01:D785  8D 16 23   			sta	_player_state
 9886                        	
 9887                        		.dbg	line,	"include\routines_LEVELS.c", 2365; return;
 9888                        		__bra		.LL214
         01:D788  4C 3D DD   			bra	.LL214
 9889                        	
 9890                        		.dbg	line,	"include\routines_LEVELS.c", 2366; }
 9891                        	
 9892                        		.dbg	line,	"include\routines_LEVELS.c", 2369; player_counter_attack += 1;
 9893    01:D78B             	.LL412:
 9894    01:D78B             	.LL411:
 9895    01:D78B             	.LL407:
 9896    01:D78B             	.LL403:
 9897    01:D78B             	.LL399:
 9898    01:D78B             	.LL395:
 9899                        		__add_st.umiq	1, _player_counter_attack
         01:D78B  EE 1C 23   			inc	_player_counter_attack
 9900                        	
 9901                        		.dbg	line,	"include\routines_LEVELS.c", 2370; }
 9902                        	
 9903                        		.dbg	line,	"include\routines_LEVELS.c", 2373; else if(player_state == STATE_FALL)
 9904                        		__bra		.LL415
         01:D78E  4C 3D DD   			bra	.LL415
 9905    01:D791             	.LL391:
 9906                        		__ld.umq	_player_state
         01:D791  AD 16 23   			lda	_player_state
 9907                        		__equ_b.uiq	9
         01:D794  C9 09      			cmp	#9
         01:D796  F0 01      			beq	!+
         01:D798  18         			clc
         01:D799             	!:
 9908                        		__bfalse	.LL416
         01:D799  B0 03 4C A4			bcc	.LL416
         01:D79D  D9          
 9909                        	
 9910                        		.dbg	line,	"include\routines_LEVELS.c", 2374; {
 9911                        	
 9912                        		.dbg	line,	"include\routines_LEVELS.c", 2375; unsigned char i, camera_y_move;
 9913                        	
 9914                        		.dbg	line,	"include\routines_LEVELS.c", 2376; i = 1;
 9915                        		__st.umiq	1, __update_PLAYER_end - 6  /* i */
         01:D79E  A9 01      			lda.l	#1
         01:D7A0  8D 07 23   			sta	__update_PLAYER_end - 6
 9916                        	
 9917                        		.dbg	line,	"include\routines_LEVELS.c", 2379; spr_set(player_id);
 9918                        		__ld.umq	_player_id
         01:D7A3  AD 15 23   			lda	_player_id
 9919                        		__call		_spr_set.1
         01:D7A6  20 DD E7   			call	_spr_set.1
 9920                        	
 9921                        		.dbg	line,	"include\routines_LEVELS.c", 2382; //--------------------------------------------------------------------------------------//
 9922                        	
 9923                        		.dbg	line,	"include\routines_LEVELS.c", 2383; //                                        V MOVE                                        //
 9924                        	
 9925                        		.dbg	line,	"include\routines_LEVELS.c", 2384; //--------------------------------------------------------------------------------------//
 9926                        	
 9927                        		.dbg	line,	"include\routines_LEVELS.c", 2386; // UPDATE PLAYER Y POSITION //
 9928                        	
 9929                        		.dbg	line,	"include\routines_LEVELS.c", 2387; player_pos_y += TABLE_PLAYER_FALL[player_index_fall];
 9930                        		__ldx.umq	_player_index_fall
         01:D7A9  AE 1B 23   			ldx	_player_index_fall
 9931                        		__ld.bax	_TABLE_PLAYER_FALL
         01:D7AC  BD 1C 61   			lda	_TABLE_PLAYER_FALL, x
         01:D7AF  C2         			cly
         01:D7B0  10 01      			bpl	!+
         01:D7B2  88         			dey
         01:D7B3             	!:
 9932                        		__add_st.wmq	_player_pos_y
         01:D7B3  18         			clc
         01:D7B4  6D D4 24   			adc.l	_player_pos_y
         01:D7B7  8D D4 24   			sta.l	_player_pos_y
         01:D7BA  98         			tya
         01:D7BB  6D D5 24   			adc.h	_player_pos_y
         01:D7BE  8D D5 24   			sta.h	_player_pos_y
 9933                        	
 9934                        		.dbg	line,	"include\routines_LEVELS.c", 2390; // IF PLAYER GOES BELOW ITS BASE Y POSITION //
 9935                        	
 9936                        		.dbg	line,	"include\routines_LEVELS.c", 2391; if(player_pos_y >= PLAYER_BASE_Y_POS)
 9937                        		__ld.wm		_player_pos_y
         01:D7C1  AD D4 24   			lda.l	_player_pos_y
         01:D7C4  AC D5 24   			ldy.h	_player_pos_y
 9938                        		__sge_w.wi	128
         01:D7C7  C9 80      			cmp.l	#128		; Subtract integer from Y:A.
         01:D7C9  98         			tya
         01:D7CA  E9 00      			sbc.h	#128
         01:D7CC  50 02      			bvc	!+
         01:D7CE  49 80      			eor	#$80		; +ve if Y:A >= integer (signed).
         01:D7D0  49 80      	!:		eor	#$80
         01:D7D2  0A         			asl	a
 9939                        		__bfalse	.LL417
         01:D7D3  90 45      			bcc	.LL417
 9940                        	
 9941                        		.dbg	line,	"include\routines_LEVELS.c", 2392; {
 9942                        	
 9943                        		.dbg	line,	"include\routines_LEVELS.c", 2393; // THE CAMERA MOVES //
 9944                        	
 9945                        		.dbg	line,	"include\routines_LEVELS.c", 2394; // CALCULATE HOW MANY PIXELS THE CAMERA HAS TO MOVE DOWN //
 9946                        	
 9947                        		.dbg	line,	"include\routines_LEVELS.c", 2395; camera_y_move = player_pos_y - PLAYER_BASE_Y_POS;
 9948                        		__ld.wm		_player_pos_y
         01:D7D5  AD D4 24   			lda.l	_player_pos_y
         01:D7D8  AC D5 24   			ldy.h	_player_pos_y
 9949                        		__sub.wi	128
         01:D7DB  38         			sec
         01:D7DC  E9 80      			sbc.l	#128
         01:D7DE  B0 01      			bcs	!+
         01:D7E0  88         			dey
         01:D7E1             	!:
 9950                        		__st.umq	__update_PLAYER_end - 7  /* camera_y_move */
         01:D7E1  8D 06 23   			sta	__update_PLAYER_end - 7
 9951                        	
 9952                        		.dbg	line,	"include\routines_LEVELS.c", 2396; sgx_map_pxl_y += camera_y_move;
 9953                        		__ld.um		__update_PLAYER_end - 7  /* camera_y_move */
         01:D7E4  AD 06 23   			lda	__update_PLAYER_end - 7
         01:D7E7  C2         			cly
 9954                        		__add_st.wmq	_sgx_map_pxl_y
         01:D7E8  18         			clc
         01:D7E9  6D 90 26   			adc.l	_sgx_map_pxl_y
         01:D7EC  8D 90 26   			sta.l	_sgx_map_pxl_y
         01:D7EF  98         			tya
         01:D7F0  6D 91 26   			adc.h	_sgx_map_pxl_y
         01:D7F3  8D 91 26   			sta.h	_sgx_map_pxl_y
 9955                        	
 9956                        		.dbg	line,	"include\routines_LEVELS.c", 2398; // IF THE CAMERA HAS REACHED ITS MAX (LOWEST) POSITION //
 9957                        	
 9958                        		.dbg	line,	"include\routines_LEVELS.c", 2399; if(sgx_map_pxl_y > camera_max_y_position)
 9959                        		__ld.wm		_sgx_map_pxl_y
         01:D7F6  AD 90 26   			lda.l	_sgx_map_pxl_y
         01:D7F9  AC 91 26   			ldy.h	_sgx_map_pxl_y
 9960                        		__ugt_w.wm	_camera_max_y_position
         01:D7FC  18         			clc			; Subtract memory+1 from Y:A.
         01:D7FD  ED D6 24   			sbc.l	_camera_max_y_position
         01:D800  98         			tya
         01:D801  ED D7 24   			sbc.h	_camera_max_y_position		; CS if Y:A > memory.
 9961                        		__bfalse	.LL418
         01:D804  90 0C      			bcc	.LL418
 9962                        	
 9963                        		.dbg	line,	"include\routines_LEVELS.c", 2400; {
 9964                        	
 9965                        		.dbg	line,	"include\routines_LEVELS.c", 2401; // THE CAMERA CAN NOT MOVE LOWER //
 9966                        	
 9967                        		.dbg	line,	"include\routines_LEVELS.c", 2402; sgx_map_pxl_y = camera_max_y_position;
 9968                        		__ld.wm		_camera_max_y_position
         01:D806  AD D6 24   			lda.l	_camera_max_y_position
         01:D809  AC D7 24   			ldy.h	_camera_max_y_position
 9969                        		__st.wmq	_sgx_map_pxl_y
         01:D80C  8D 90 26   			sta.l	_sgx_map_pxl_y
         01:D80F  8C 91 26   			sty.h	_sgx_map_pxl_y
 9970                        	
 9971                        		.dbg	line,	"include\routines_LEVELS.c", 2403; }
 9972                        	
 9973                        		.dbg	line,	"include\routines_LEVELS.c", 2405; // THE PLAYER STAYS AT ITS BASE Y POSITION //
 9974                        	
 9975                        		.dbg	line,	"include\routines_LEVELS.c", 2406; player_pos_y = PLAYER_BASE_Y_POS;
 9976    01:D812             	.LL418:
 9977                        		__st.wmiq	128, _player_pos_y
         01:D812  A9 80      			lda.l	#128
         01:D814  8D D4 24   			sta.l	_player_pos_y
         01:D817  9C D5 24   			stz.h	_player_pos_y
 9978                        	
 9979                        		.dbg	line,	"include\routines_LEVELS.c", 2407; }
 9980                        	
 9981                        		.dbg	line,	"include\routines_LEVELS.c", 2410; // UPDATE JUMP INDEX IN THE ARRAY //
 9982                        	
 9983                        		.dbg	line,	"include\routines_LEVELS.c", 2411; // ARRAY MAX ENTRY : 20//
 9984                        	
 9985                        		.dbg	line,	"include\routines_LEVELS.c", 2412; if(player_index_fall < 20)
 9986    01:D81A             	.LL417:
 9987                        		__ld.umq	_player_index_fall
         01:D81A  AD 1B 23   			lda	_player_index_fall
 9988                        		__ult_b.uiq	20
         01:D81D  C9 14      			cmp	#20		; Subtract integer from A.
         01:D81F  6A         			ror	a		; CC if A < integer.
         01:D820  49 80      			eor	#$80
         01:D822  2A         			rol	a
 9989                        		__bfalse	.LL419
         01:D823  90 03      			bcc	.LL419
 9990                        	
 9991                        		.dbg	line,	"include\routines_LEVELS.c", 2413; {
 9992                        	
 9993                        		.dbg	line,	"include\routines_LEVELS.c", 2414; player_index_fall += 1;
 9994                        		__add_st.umiq	1, _player_index_fall
         01:D825  EE 1B 23   			inc	_player_index_fall
 9995                        	
 9996                        		.dbg	line,	"include\routines_LEVELS.c", 2415; }
 9997                        	
 9998                        		.dbg	line,	"include\routines_LEVELS.c", 2418; check_TILE_DEPTH( 15 , 0);
 9999    01:D828             	.LL419:
10000                        		__ld.wi		15
         01:D828  A9 0F      			lda.l	#15
         01:D82A  C2         			cly
10001                        		__pusharg.wr
         01:D82B  A6 8D      			ldx	<__sp
         01:D82D  CA         			dex
         01:D82E  CA         			dex
         01:D82F  95 08      			sta.l	<__stack, x
         01:D831  94 09      			sty.h	<__stack, x
         01:D833  86 8D      			stx	<__sp
10002                        		__ld.wi		0
         01:D835  62         			cla
         01:D836  C2         			cly
10003                        		__pusharg.wr
         01:D837  A6 8D      			ldx	<__sp
         01:D839  CA         			dex
         01:D83A  CA         			dex
         01:D83B  95 08      			sta.l	<__stack, x
         01:D83D  94 09      			sty.h	<__stack, x
         01:D83F  86 8D      			stx	<__sp
10004                        		__call		_check_TILE_DEPTH
         01:D841  20 59 FF   			call	_check_TILE_DEPTH
10005                        	
10006                        		.dbg	line,	"include\routines_LEVELS.c", 2421; if(map_blk_flag == TILE_BG)
10007                        		__ld.umq	_map_blk_flag
         01:D844  AD AF 2B   			lda	_map_blk_flag
10008                        		__equ_b.uiq	1
         01:D847  C9 01      			cmp	#1
         01:D849  F0 01      			beq	!+
         01:D84B  18         			clc
         01:D84C             	!:
10009                        		__bfalse	.LL420
         01:D84C  B0 03 4C 02			bcc	.LL420
         01:D850  D9          
10010                        	
10011                        		.dbg	line,	"include\routines_LEVELS.c", 2422; {
10012                        	
10013                        		.dbg	line,	"include\routines_LEVELS.c", 2423; // CALCULATE HOW MANY PIXELS THE PLAYER MOVED INTO THE GROUND //
10014                        	
10015                        		.dbg	line,	"include\routines_LEVELS.c", 2424; for(i=1; i<11 ; i++ )
10016                        		__st.umiq	1, __update_PLAYER_end - 6  /* i */
         01:D851  A9 01      			lda.l	#1
         01:D853  8D 07 23   			sta	__update_PLAYER_end - 6
10017    01:D856             	.LL421:
10018                        		__ld.umq	__update_PLAYER_end - 6  /* i */
         01:D856  AD 07 23   			lda	__update_PLAYER_end - 6
10019                        		__ult_b.uiq	11
         01:D859  C9 0B      			cmp	#11		; Subtract integer from A.
         01:D85B  6A         			ror	a		; CC if A < integer.
         01:D85C  49 80      			eor	#$80
         01:D85E  2A         			rol	a
10020                        		__btrue		.LL423
         01:D85F  B0 07      			bcs	.LL423
10021                        		__bra		.LL424
         01:D861  80 7D      			bra	.LL424
10022    01:D863             	.LL422:
10023                        		__inc.umq	__update_PLAYER_end - 6  /* i */
         01:D863  EE 07 23   			inc	__update_PLAYER_end - 6
10024                        		__bra		.LL421
         01:D866  80 EE      			bra	.LL421
10025    01:D868             	.LL423:
10026                        	
10027                        		.dbg	line,	"include\routines_LEVELS.c", 2425; {
10028                        	
10029                        		.dbg	line,	"include\routines_LEVELS.c", 2426; check_TILE_DEPTH( 15 , i);//20
10030                        		__ld.wi		15
         01:D868  A9 0F      			lda.l	#15
         01:D86A  C2         			cly
10031                        		__pusharg.wr
         01:D86B  A6 8D      			ldx	<__sp
         01:D86D  CA         			dex
         01:D86E  CA         			dex
         01:D86F  95 08      			sta.l	<__stack, x
         01:D871  94 09      			sty.h	<__stack, x
         01:D873  86 8D      			stx	<__sp
10032                        		__ld.um		__update_PLAYER_end - 6  /* i */
         01:D875  AD 07 23   			lda	__update_PLAYER_end - 6
         01:D878  C2         			cly
10033                        		__pusharg.wr
         01:D879  A6 8D      			ldx	<__sp
         01:D87B  CA         			dex
         01:D87C  CA         			dex
         01:D87D  95 08      			sta.l	<__stack, x
         01:D87F  94 09      			sty.h	<__stack, x
         01:D881  86 8D      			stx	<__sp
10034                        		__call		_check_TILE_DEPTH
         01:D883  20 59 FF   			call	_check_TILE_DEPTH
10035                        	
10036                        		.dbg	line,	"include\routines_LEVELS.c", 2429; if(map_blk_flag == TILE_EMPTY)
10037                        		__not.um	_map_blk_flag
         01:D886  AD AF 2B   			lda	_map_blk_flag
         01:D889  18         			clc
         01:D88A  D0 01      			bne	!+
         01:D88C  38         			sec
         01:D88D             	!:
10038                        		__bfalse	.LL425
         01:D88D  90 D4      			bcc	.LL425
10039                        	
10040                        		.dbg	line,	"include\routines_LEVELS.c", 2430; {
10041                        	
10042                        		.dbg	line,	"include\routines_LEVELS.c", 2431; if(player_pos_y != PLAYER_BASE_Y_POS)
10043                        		__ld.wm		_player_pos_y
         01:D88F  AD D4 24   			lda.l	_player_pos_y
         01:D892  AC D5 24   			ldy.h	_player_pos_y
10044                        		__neq_w.wi	128
         01:D895  38         			sec
         01:D896  49 80      			eor.l	#128
         01:D898  D0 06      			bne	!+
         01:D89A  98         			tya
         01:D89B  49 00      			eor.h	#128
         01:D89D  D0 01      			bne	!+
         01:D89F  18         			clc
         01:D8A0             	!:
10045                        		__bfalse	.LL426
         01:D8A0  90 1E      			bcc	.LL426
10046                        	
10047                        		.dbg	line,	"include\routines_LEVELS.c", 2432; {
10048                        	
10049                        		.dbg	line,	"include\routines_LEVELS.c", 2433; player_pos_y -= (i - 1);
10050                        		__ld.um		__update_PLAYER_end - 6  /* i */
         01:D8A2  AD 07 23   			lda	__update_PLAYER_end - 6
         01:D8A5  C2         			cly
10051                        		__sub.wi	1
         01:D8A6  38         			sec
         01:D8A7  E9 01      			sbc.l	#1
         01:D8A9  B0 01      			bcs	!+
         01:D8AB  88         			dey
         01:D8AC             	!:
10052                        		__isub_st.wmq	_player_pos_y
         01:D8AC  38         			sec
         01:D8AD  49 FF      			eor	#$FF
         01:D8AF  6D D4 24   			adc.l	_player_pos_y
         01:D8B2  8D D4 24   			sta.l	_player_pos_y
         01:D8B5  98         			tya
         01:D8B6  49 FF      			eor	#$FF
         01:D8B8  6D D5 24   			adc.h	_player_pos_y
         01:D8BB  8D D5 24   			sta.h	_player_pos_y
10053                        	
10054                        		.dbg	line,	"include\routines_LEVELS.c", 2434; }
10055                        	
10056                        		.dbg	line,	"include\routines_LEVELS.c", 2436; else
10057                        		__bra		.LL427
         01:D8BE  80 20      			bra	.LL427
10058    01:D8C0             	.LL426:
10059                        	
10060                        		.dbg	line,	"include\routines_LEVELS.c", 2437; {
10061                        	
10062                        		.dbg	line,	"include\routines_LEVELS.c", 2438; sgx_map_pxl_y -= (i - 1);
10063                        		__ld.um		__update_PLAYER_end - 6  /* i */
         01:D8C0  AD 07 23   			lda	__update_PLAYER_end - 6
         01:D8C3  C2         			cly
10064                        		__sub.wi	1
         01:D8C4  38         			sec
         01:D8C5  E9 01      			sbc.l	#1
         01:D8C7  B0 01      			bcs	!+
         01:D8C9  88         			dey
         01:D8CA             	!:
10065                        		__isub_st.wmq	_sgx_map_pxl_y
         01:D8CA  38         			sec
         01:D8CB  49 FF      			eor	#$FF
         01:D8CD  6D 90 26   			adc.l	_sgx_map_pxl_y
         01:D8D0  8D 90 26   			sta.l	_sgx_map_pxl_y
         01:D8D3  98         			tya
         01:D8D4  49 FF      			eor	#$FF
         01:D8D6  6D 91 26   			adc.h	_sgx_map_pxl_y
         01:D8D9  8D 91 26   			sta.h	_sgx_map_pxl_y
10066                        	
10067                        		.dbg	line,	"include\routines_LEVELS.c", 2439; }
10068    01:D8DC             	.LL427	.alias		.LL424
10069                        	
10070                        		.dbg	line,	"include\routines_LEVELS.c", 2442; break;
10071                        		__bra		.LL424
         01:D8DC  80 02      			bra	.LL424
10072                        	
10073                        		.dbg	line,	"include\routines_LEVELS.c", 2443; }
10074                        	
10075                        		.dbg	line,	"include\routines_LEVELS.c", 2445; }
10076    01:D8DE             	.LL425	.alias		.LL422
10077                        		__bra		.LL422
         01:D8DE  80 83      			bra	.LL422
10078    01:D8E0             	.LL424:
10079                        	
10080                        		.dbg	line,	"include\routines_LEVELS.c", 2447; spr_y(player_pos_y);
10081                        		__ld.wm		_player_pos_y
         01:D8E0  AD D4 24   			lda.l	_player_pos_y
         01:D8E3  AC D5 24   			ldy.h	_player_pos_y
10082                        		__call		_spr_y.1
         01:D8E6  20 19 E8   			call	_spr_y.1
10083                        	
10084                        		.dbg	line,	"include\routines_LEVELS.c", 2449; /*spr_set(weapon_id);
10085                        	
10086                        		.dbg	line,	"include\routines_LEVELS.c", 2450; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
10087                        	
10088                        		.dbg	line,	"include\routines_LEVELS.c", 2451; spr_x(player_pos_x+8);
10089                        	
10090                        		.dbg	line,	"include\routines_LEVELS.c", 2452; spr_y(player_pos_y+16);*/
10091                        	
10092                        		.dbg	line,	"include\routines_LEVELS.c", 2454; player_counter_anim = 1;
10093                        		__st.umiq	1, _player_counter_anim
         01:D8E9  A9 01      			lda.l	#1
         01:D8EB  8D 19 23   			sta	_player_counter_anim
10094                        	
10095                        		.dbg	line,	"include\routines_LEVELS.c", 2455; player_index_jump = 0;
10096                        		__st.umiq	0, _player_index_jump
         01:D8EE  9C 1A 23   			stz	_player_index_jump
10097                        	
10098                        		.dbg	line,	"include\routines_LEVELS.c", 2456; player_index_fall = 0;
10099                        		__st.umiq	0, _player_index_fall
         01:D8F1  9C 1B 23   			stz	_player_index_fall
10100                        	
10101                        		.dbg	line,	"include\routines_LEVELS.c", 2457; jump_ladder = FALSE;
10102                        		__st.umiq	0, _jump_ladder
         01:D8F4  9C 1F 23   			stz	_jump_ladder
10103                        	
10104                        		.dbg	line,	"include\routines_LEVELS.c", 2458; jump_max_index = 34;
10105                        		__st.umiq	34, _jump_max_index
         01:D8F7  A9 22      			lda.l	#34
         01:D8F9  8D 20 23   			sta	_jump_max_index
10106                        	
10107                        		.dbg	line,	"include\routines_LEVELS.c", 2459; player_state = STATE_IDLE;
10108                        		__st.umiq	0, _player_state
         01:D8FC  9C 16 23   			stz	_player_state
10109                        	
10110                        		.dbg	line,	"include\routines_LEVELS.c", 2460; return;
10111                        		__bra		.LL214
         01:D8FF  4C 3D DD   			bra	.LL214
10112                        	
10113                        		.dbg	line,	"include\routines_LEVELS.c", 2461; }
10114                        	
10115                        		.dbg	line,	"include\routines_LEVELS.c", 2464; check_BG( 16 , 16 );
10116    01:D902             	.LL420:
10117                        		__ld.wi		16
         01:D902  A9 10      			lda.l	#16
         01:D904  C2         			cly
10118                        		__pusharg.wr
         01:D905  A6 8D      			ldx	<__sp
         01:D907  CA         			dex
         01:D908  CA         			dex
         01:D909  95 08      			sta.l	<__stack, x
         01:D90B  94 09      			sty.h	<__stack, x
         01:D90D  86 8D      			stx	<__sp
10119                        		__ld.wi		16
         01:D90F  A9 10      			lda.l	#16
         01:D911  C2         			cly
10120                        		__pusharg.wr
         01:D912  A6 8D      			ldx	<__sp
         01:D914  CA         			dex
         01:D915  CA         			dex
         01:D916  95 08      			sta.l	<__stack, x
         01:D918  94 09      			sty.h	<__stack, x
         01:D91A  86 8D      			stx	<__sp
10121                        		__call		_check_BG
         01:D91C  20 6D FF   			call	_check_BG
10122                        	
10123                        		.dbg	line,	"include\routines_LEVELS.c", 2466; // IF PLAYER HITS THE LADDER //
10124                        	
10125                        		.dbg	line,	"include\routines_LEVELS.c", 2467; if(map_blk_flag == TILE_LADDER)
10126                        		__ld.umq	_map_blk_flag
         01:D91F  AD AF 2B   			lda	_map_blk_flag
10127                        		__equ_b.uiq	2
         01:D922  C9 02      			cmp	#2
         01:D924  F0 01      			beq	!+
         01:D926  18         			clc
         01:D927             	!:
10128                        		__bfalse	.LL428
         01:D927  90 6F      			bcc	.LL428
10129                        	
10130                        		.dbg	line,	"include\routines_LEVELS.c", 2468; {
10131                        	
10132                        		.dbg	line,	"include\routines_LEVELS.c", 2469; // CAMERA GOES 8 PX BACKWARD //
10133                        	
10134                        		.dbg	line,	"include\routines_LEVELS.c", 2470; sgx_map_pxl_x = ( (sgx_map_pxl_x >> 3) << 3 );
10135                        		__ld.wm		_sgx_map_pxl_x
         01:D929  AD 8E 26   			lda.l	_sgx_map_pxl_x
         01:D92C  AC 8F 26   			ldy.h	_sgx_map_pxl_x
10136                        		__lsr.wi	3
         01:D92F  84 00      			sty	__temp
         01:D931  20 3A E2   			jsr	lsrw3
10137                        		__asl.wi	3
         01:D934  84 00      			sty	__temp
         01:D936  20 D7 E1   			jsr	aslw3
10138                        		__st.wmq	_sgx_map_pxl_x
         01:D939  8D 8E 26   			sta.l	_sgx_map_pxl_x
         01:D93C  8C 8F 26   			sty.h	_sgx_map_pxl_x
10139                        	
10140                        		.dbg	line,	"include\routines_LEVELS.c", 2472; // SO WE UPDATE THE MAP //
10141                        	
10142                        		.dbg	line,	"include\routines_LEVELS.c", 2473; sgx_scroll_map();
10143                        		__call		_sgx_scroll_map
         01:D93F  20 81 FF   			call	_sgx_scroll_map
10144                        	
10145                        		.dbg	line,	"include\routines_LEVELS.c", 2475; // CHECK IF THE PLAYER STANDS RIGHT TO THE LADDER //
10146                        	
10147                        		.dbg	line,	"include\routines_LEVELS.c", 2476; check_BG( 31 , 16 );
10148                        		__ld.wi		31
         01:D942  A9 1F      			lda.l	#31
         01:D944  C2         			cly
10149                        		__pusharg.wr
         01:D945  A6 8D      			ldx	<__sp
         01:D947  CA         			dex
         01:D948  CA         			dex
         01:D949  95 08      			sta.l	<__stack, x
         01:D94B  94 09      			sty.h	<__stack, x
         01:D94D  86 8D      			stx	<__sp
10150                        		__ld.wi		16
         01:D94F  A9 10      			lda.l	#16
         01:D951  C2         			cly
10151                        		__pusharg.wr
         01:D952  A6 8D      			ldx	<__sp
         01:D954  CA         			dex
         01:D955  CA         			dex
         01:D956  95 08      			sta.l	<__stack, x
         01:D958  94 09      			sty.h	<__stack, x
         01:D95A  86 8D      			stx	<__sp
10152                        		__call		_check_BG
         01:D95C  20 6D FF   			call	_check_BG
10153                        	
10154                        		.dbg	line,	"include\routines_LEVELS.c", 2478; if(map_blk_flag == TILE_LADDER)
10155                        		__ld.umq	_map_blk_flag
         01:D95F  AD AF 2B   			lda	_map_blk_flag
10156                        		__equ_b.uiq	2
         01:D962  C9 02      			cmp	#2
         01:D964  F0 01      			beq	!+
         01:D966  18         			clc
         01:D967             	!:
10157                        		__bfalse	.LL429
         01:D967  90 0E      			bcc	.LL429
10158                        	
10159                        		.dbg	line,	"include\routines_LEVELS.c", 2479; {
10160                        	
10161                        		.dbg	line,	"include\routines_LEVELS.c", 2480; sgx_map_pxl_x += 8;
10162                        		__add_st.wmiq	8, _sgx_map_pxl_x
         01:D969  18         			clc
         01:D96A  AD 8E 26   			lda.l	_sgx_map_pxl_x
         01:D96D  69 08      			adc.l	#8
         01:D96F  8D 8E 26   			sta.l	_sgx_map_pxl_x
         01:D972  90 03      			bcc	!+
         01:D974  EE 8F 26   			inc.h	_sgx_map_pxl_x
         01:D977             	!:
10163                        	
10164                        		.dbg	line,	"include\routines_LEVELS.c", 2481; }
10165                        	
10166                        		.dbg	line,	"include\routines_LEVELS.c", 2483; spr_pattern(PLAYER_HANG_VRAM_ADR);
10167    01:D977             	.LL429:
10168                        		__ld.wi		7936
         01:D977  62         			cla
         01:D978  A0 1F      			ldy.h	#7936
10169                        		__call		_spr_pattern.1
         01:D97A  20 26 E8   			call	_spr_pattern.1
10170                        	
10171                        		.dbg	line,	"include\routines_LEVELS.c", 2484; player_counter_anim = 0;//1
10172                        		__st.umiq	0, _player_counter_anim
         01:D97D  9C 19 23   			stz	_player_counter_anim
10173                        	
10174                        		.dbg	line,	"include\routines_LEVELS.c", 2485; player_index_jump = 0;
10175                        		__st.umiq	0, _player_index_jump
         01:D980  9C 1A 23   			stz	_player_index_jump
10176                        	
10177                        		.dbg	line,	"include\routines_LEVELS.c", 2486; player_index_fall = 0;
10178                        		__st.umiq	0, _player_index_fall
         01:D983  9C 1B 23   			stz	_player_index_fall
10179                        	
10180                        		.dbg	line,	"include\routines_LEVELS.c", 2487; jump_ladder = TRUE;
10181                        		__st.umiq	1, _jump_ladder
         01:D986  A9 01      			lda.l	#1
         01:D988  8D 1F 23   			sta	_jump_ladder
10182                        	
10183                        		.dbg	line,	"include\routines_LEVELS.c", 2488; jump_max_index = 29;
10184                        		__st.umiq	29, _jump_max_index
         01:D98B  A9 1D      			lda.l	#29
         01:D98D  8D 20 23   			sta	_jump_max_index
10185                        	
10186                        		.dbg	line,	"include\routines_LEVELS.c", 2489; player_state = STATE_HANG;
10187                        		__st.umiq	10, _player_state
         01:D990  A9 0A      			lda.l	#10
         01:D992  8D 16 23   			sta	_player_state
10188                        	
10189                        		.dbg	line,	"include\routines_LEVELS.c", 2490; return;
10190                        		__bra		.LL214
         01:D995  4C 3D DD   			bra	.LL214
10191                        	
10192                        		.dbg	line,	"include\routines_LEVELS.c", 2491; }
10193                        	
10194                        		.dbg	line,	"include\routines_LEVELS.c", 2494; spr_y(player_pos_y);
10195    01:D998             	.LL428:
10196                        		__ld.wm		_player_pos_y
         01:D998  AD D4 24   			lda.l	_player_pos_y
         01:D99B  AC D5 24   			ldy.h	_player_pos_y
10197                        		__call		_spr_y.1
         01:D99E  20 19 E8   			call	_spr_y.1
10198                        	
10199                        		.dbg	line,	"include\routines_LEVELS.c", 2495; }
10200                        	
10201                        		.dbg	line,	"include\routines_LEVELS.c", 2498; else if(player_state == STATE_HANG)
10202                        		__bra		.LL430
         01:D9A1  4C 3D DD   			bra	.LL430
10203    01:D9A4             	.LL416:
10204                        		__ld.umq	_player_state
         01:D9A4  AD 16 23   			lda	_player_state
10205                        		__equ_b.uiq	10
         01:D9A7  C9 0A      			cmp	#10
         01:D9A9  F0 01      			beq	!+
         01:D9AB  18         			clc
         01:D9AC             	!:
10206                        		__bfalse	.LL431
         01:D9AC  90 4E      			bcc	.LL431
10207                        	
10208                        		.dbg	line,	"include\routines_LEVELS.c", 2499; {
10209                        	
10210                        		.dbg	line,	"include\routines_LEVELS.c", 2500; recenter_CAMERA();
10211                        		__call		_recenter_CAMERA
         01:D9AE  20 63 FF   			call	_recenter_CAMERA
10212                        	
10213                        		.dbg	line,	"include\routines_LEVELS.c", 2502; //if(player_counter_anim == 1)
10214                        	
10215                        		.dbg	line,	"include\routines_LEVELS.c", 2503; //{
10216                        	
10217                        		.dbg	line,	"include\routines_LEVELS.c", 2504; //spr_set(player_id);
10218                        	
10219                        		.dbg	line,	"include\routines_LEVELS.c", 2505; //spr_pattern(PLAYER_HANG_VRAM_ADR);
10220                        	
10221                        		.dbg	line,	"include\routines_LEVELS.c", 2507; spr_set(weapon_id);
10222                        		__ld.umq	_weapon_id
         01:D9B1  AD 22 23   			lda	_weapon_id
10223                        		__call		_spr_set.1
         01:D9B4  20 DD E7   			call	_spr_set.1
10224                        	
10225                        		.dbg	line,	"include\routines_LEVELS.c", 2508; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
10226                        		__ld.wi		5184
         01:D9B7  A9 40      			lda.l	#5184
         01:D9B9  A0 14      			ldy.h	#5184
10227                        		__call		_spr_pattern.1
         01:D9BB  20 26 E8   			call	_spr_pattern.1
10228                        	
10229                        		.dbg	line,	"include\routines_LEVELS.c", 2509; spr_y(player_pos_y+5);
10230                        		__ld.wm		_player_pos_y
         01:D9BE  AD D4 24   			lda.l	_player_pos_y
         01:D9C1  AC D5 24   			ldy.h	_player_pos_y
10231                        		__add.wi	5
         01:D9C4  18         			clc
         01:D9C5  69 05      			adc.l	#5
         01:D9C7  90 01      			bcc	!+
         01:D9C9  C8         			iny
         01:D9CA             	!:
10232                        		__call		_spr_y.1
         01:D9CA  20 19 E8   			call	_spr_y.1
10233                        	
10234                        		.dbg	line,	"include\routines_LEVELS.c", 2511; if(player_axis == AXIS_RIGHT)
10235                        		__not.um	_player_axis
         01:D9CD  AD 17 23   			lda	_player_axis
         01:D9D0  18         			clc
         01:D9D1  D0 01      			bne	!+
         01:D9D3  38         			sec
         01:D9D4             	!:
10236                        		__bfalse	.LL432
         01:D9D4  90 11      			bcc	.LL432
10237                        	
10238                        		.dbg	line,	"include\routines_LEVELS.c", 2512; {
10239                        	
10240                        		.dbg	line,	"include\routines_LEVELS.c", 2513; spr_x(player_pos_x+17);
10241                        		__ld.wm		_player_pos_x
         01:D9D6  AD D2 24   			lda.l	_player_pos_x
         01:D9D9  AC D3 24   			ldy.h	_player_pos_x
10242                        		__add.wi	17
         01:D9DC  18         			clc
         01:D9DD  69 11      			adc.l	#17
         01:D9DF  90 01      			bcc	!+
         01:D9E1  C8         			iny
         01:D9E2             	!:
10243                        		__call		_spr_x.1
         01:D9E2  20 0A E8   			call	_spr_x.1
10244                        	
10245                        		.dbg	line,	"include\routines_LEVELS.c", 2514; }
10246                        	
10247                        		.dbg	line,	"include\routines_LEVELS.c", 2516; else
10248                        		__bra		.LL433
         01:D9E5  80 0F      			bra	.LL433
10249    01:D9E7             	.LL432:
10250                        	
10251                        		.dbg	line,	"include\routines_LEVELS.c", 2517; {
10252                        	
10253                        		.dbg	line,	"include\routines_LEVELS.c", 2518; spr_x(player_pos_x-2);
10254                        		__ld.wm		_player_pos_x
         01:D9E7  AD D2 24   			lda.l	_player_pos_x
         01:D9EA  AC D3 24   			ldy.h	_player_pos_x
10255                        		__sub.wi	2
         01:D9ED  38         			sec
         01:D9EE  E9 02      			sbc.l	#2
         01:D9F0  B0 01      			bcs	!+
         01:D9F2  88         			dey
         01:D9F3             	!:
10256                        		__call		_spr_x.1
         01:D9F3  20 0A E8   			call	_spr_x.1
10257                        	
10258                        		.dbg	line,	"include\routines_LEVELS.c", 2519; }
10259    01:D9F6             	.LL433:
10260                        	
10261                        		.dbg	line,	"include\routines_LEVELS.c", 2520; 
10262                        	
10263                        		.dbg	line,	"include\routines_LEVELS.c", 2521; player_counter_anim = 0;
10264                        		__st.umiq	0, _player_counter_anim
         01:D9F6  9C 19 23   			stz	_player_counter_anim
10265                        	
10266                        		.dbg	line,	"include\routines_LEVELS.c", 2522; //}
10267                        	
10268                        		.dbg	line,	"include\routines_LEVELS.c", 2523; }
10269                        	
10270                        		.dbg	line,	"include\routines_LEVELS.c", 2526; else if(player_state == STATE_CLIMB_UP)
10271                        		__bra		.LL434
         01:D9F9  4C 3D DD   			bra	.LL434
10272    01:D9FC             	.LL431:
10273                        		__ld.umq	_player_state
         01:D9FC  AD 16 23   			lda	_player_state
10274                        		__equ_b.uiq	11
         01:D9FF  C9 0B      			cmp	#11
         01:DA01  F0 01      			beq	!+
         01:DA03  18         			clc
         01:DA04             	!:
10275                        		__bfalse	.LL435
         01:DA04  B0 03 4C DE			bcc	.LL435
         01:DA08  DA          
10276                        	
10277                        		.dbg	line,	"include\routines_LEVELS.c", 2527; {
10278                        	
10279                        		.dbg	line,	"include\routines_LEVELS.c", 2528; if(player_counter_anim == 0)
10280                        		__not.um	_player_counter_anim
         01:DA09  AD 19 23   			lda	_player_counter_anim
         01:DA0C  18         			clc
         01:DA0D  D0 01      			bne	!+
         01:DA0F  38         			sec
         01:DA10             	!:
10281                        		__bfalse	.LL436
         01:DA10  90 0F      			bcc	.LL436
10282                        	
10283                        		.dbg	line,	"include\routines_LEVELS.c", 2529; {
10284                        	
10285                        		.dbg	line,	"include\routines_LEVELS.c", 2530; spr_set(player_id);
10286                        		__ld.umq	_player_id
         01:DA12  AD 15 23   			lda	_player_id
10287                        		__call		_spr_set.1
         01:DA15  20 DD E7   			call	_spr_set.1
10288                        	
10289                        		.dbg	line,	"include\routines_LEVELS.c", 2531; spr_pattern(PLAYER_CLIMB_1_VRAM_ADR); 
10290                        		__ld.wi		8192
         01:DA18  62         			cla
         01:DA19  A0 20      			ldy.h	#8192
10291                        		__call		_spr_pattern.1
         01:DA1B  20 26 E8   			call	_spr_pattern.1
10292                        	
10293                        		.dbg	line,	"include\routines_LEVELS.c", 2532; }
10294                        	
10295                        		.dbg	line,	"include\routines_LEVELS.c", 2534; else if(player_counter_anim == 2)
10296                        		__bra		.LL437
         01:DA1E  4C C8 DA   			bra	.LL437
10297    01:DA21             	.LL436:
10298                        		__ld.umq	_player_counter_anim
         01:DA21  AD 19 23   			lda	_player_counter_anim
10299                        		__equ_b.uiq	2
         01:DA24  C9 02      			cmp	#2
         01:DA26  F0 01      			beq	!+
         01:DA28  18         			clc
         01:DA29             	!:
10300                        		__bfalse	.LL438
         01:DA29  90 0F      			bcc	.LL438
10301                        	
10302                        		.dbg	line,	"include\routines_LEVELS.c", 2535; {
10303                        	
10304                        		.dbg	line,	"include\routines_LEVELS.c", 2536; spr_set(player_id);
10305                        		__ld.umq	_player_id
         01:DA2B  AD 15 23   			lda	_player_id
10306                        		__call		_spr_set.1
         01:DA2E  20 DD E7   			call	_spr_set.1
10307                        	
10308                        		.dbg	line,	"include\routines_LEVELS.c", 2537; spr_pattern(PLAYER_CLIMB_2_VRAM_ADR); 
10309                        		__ld.wi		8448
         01:DA31  62         			cla
         01:DA32  A0 21      			ldy.h	#8448
10310                        		__call		_spr_pattern.1
         01:DA34  20 26 E8   			call	_spr_pattern.1
10311                        	
10312                        		.dbg	line,	"include\routines_LEVELS.c", 2538; }
10313                        	
10314                        		.dbg	line,	"include\routines_LEVELS.c", 2540; else if(player_counter_anim == 5)
10315                        		__bra		.LL439
         01:DA37  4C C8 DA   			bra	.LL439
10316    01:DA3A             	.LL438:
10317                        		__ld.umq	_player_counter_anim
         01:DA3A  AD 19 23   			lda	_player_counter_anim
10318                        		__equ_b.uiq	5
         01:DA3D  C9 05      			cmp	#5
         01:DA3F  F0 01      			beq	!+
         01:DA41  18         			clc
         01:DA42             	!:
10319                        		__bfalse	.LL440
         01:DA42  90 0E      			bcc	.LL440
10320                        	
10321                        		.dbg	line,	"include\routines_LEVELS.c", 2541; {
10322                        	
10323                        		.dbg	line,	"include\routines_LEVELS.c", 2542; spr_set(player_id);
10324                        		__ld.umq	_player_id
         01:DA44  AD 15 23   			lda	_player_id
10325                        		__call		_spr_set.1
         01:DA47  20 DD E7   			call	_spr_set.1
10326                        	
10327                        		.dbg	line,	"include\routines_LEVELS.c", 2543; spr_pattern(PLAYER_CLIMB_3_VRAM_ADR); 
10328                        		__ld.wi		8704
         01:DA4A  62         			cla
         01:DA4B  A0 22      			ldy.h	#8704
10329                        		__call		_spr_pattern.1
         01:DA4D  20 26 E8   			call	_spr_pattern.1
10330                        	
10331                        		.dbg	line,	"include\routines_LEVELS.c", 2544; }
10332                        	
10333                        		.dbg	line,	"include\routines_LEVELS.c", 2546; else if(player_counter_anim == 8)
10334                        		__bra		.LL441
         01:DA50  80 76      			bra	.LL441
10335    01:DA52             	.LL440:
10336                        		__ld.umq	_player_counter_anim
         01:DA52  AD 19 23   			lda	_player_counter_anim
10337                        		__equ_b.uiq	8
         01:DA55  C9 08      			cmp	#8
         01:DA57  F0 01      			beq	!+
         01:DA59  18         			clc
         01:DA5A             	!:
10338                        		__bfalse	.LL442
         01:DA5A  90 0E      			bcc	.LL442
10339                        	
10340                        		.dbg	line,	"include\routines_LEVELS.c", 2547; {
10341                        	
10342                        		.dbg	line,	"include\routines_LEVELS.c", 2548; spr_set(player_id);
10343                        		__ld.umq	_player_id
         01:DA5C  AD 15 23   			lda	_player_id
10344                        		__call		_spr_set.1
         01:DA5F  20 DD E7   			call	_spr_set.1
10345                        	
10346                        		.dbg	line,	"include\routines_LEVELS.c", 2549; spr_pattern(PLAYER_CLIMB_4_VRAM_ADR); 
10347                        		__ld.wi		8960
         01:DA62  62         			cla
         01:DA63  A0 23      			ldy.h	#8960
10348                        		__call		_spr_pattern.1
         01:DA65  20 26 E8   			call	_spr_pattern.1
10349                        	
10350                        		.dbg	line,	"include\routines_LEVELS.c", 2550; }
10351                        	
10352                        		.dbg	line,	"include\routines_LEVELS.c", 2552; else if(player_counter_anim == 11)
10353                        		__bra		.LL443
         01:DA68  80 5E      			bra	.LL443
10354    01:DA6A             	.LL442:
10355                        		__ld.umq	_player_counter_anim
         01:DA6A  AD 19 23   			lda	_player_counter_anim
10356                        		__equ_b.uiq	11
         01:DA6D  C9 0B      			cmp	#11
         01:DA6F  F0 01      			beq	!+
         01:DA71  18         			clc
         01:DA72             	!:
10357                        		__bfalse	.LL444
         01:DA72  90 0E      			bcc	.LL444
10358                        	
10359                        		.dbg	line,	"include\routines_LEVELS.c", 2553; {
10360                        	
10361                        		.dbg	line,	"include\routines_LEVELS.c", 2554; spr_set(player_id);
10362                        		__ld.umq	_player_id
         01:DA74  AD 15 23   			lda	_player_id
10363                        		__call		_spr_set.1
         01:DA77  20 DD E7   			call	_spr_set.1
10364                        	
10365                        		.dbg	line,	"include\routines_LEVELS.c", 2555; spr_pattern(PLAYER_CLIMB_5_VRAM_ADR); 
10366                        		__ld.wi		9216
         01:DA7A  62         			cla
         01:DA7B  A0 24      			ldy.h	#9216
10367                        		__call		_spr_pattern.1
         01:DA7D  20 26 E8   			call	_spr_pattern.1
10368                        	
10369                        		.dbg	line,	"include\routines_LEVELS.c", 2556; }
10370                        	
10371                        		.dbg	line,	"include\routines_LEVELS.c", 2558; else if(player_counter_anim == 14)
10372                        		__bra		.LL445
         01:DA80  80 46      			bra	.LL445
10373    01:DA82             	.LL444:
10374                        		__ld.umq	_player_counter_anim
         01:DA82  AD 19 23   			lda	_player_counter_anim
10375                        		__equ_b.uiq	14
         01:DA85  C9 0E      			cmp	#14
         01:DA87  F0 01      			beq	!+
         01:DA89  18         			clc
         01:DA8A             	!:
10376                        		__bfalse	.LL446
         01:DA8A  90 0E      			bcc	.LL446
10377                        	
10378                        		.dbg	line,	"include\routines_LEVELS.c", 2559; {
10379                        	
10380                        		.dbg	line,	"include\routines_LEVELS.c", 2560; spr_set(player_id);
10381                        		__ld.umq	_player_id
         01:DA8C  AD 15 23   			lda	_player_id
10382                        		__call		_spr_set.1
         01:DA8F  20 DD E7   			call	_spr_set.1
10383                        	
10384                        		.dbg	line,	"include\routines_LEVELS.c", 2561; spr_pattern(PLAYER_CLIMB_6_VRAM_ADR); 
10385                        		__ld.wi		9472
         01:DA92  62         			cla
         01:DA93  A0 25      			ldy.h	#9472
10386                        		__call		_spr_pattern.1
         01:DA95  20 26 E8   			call	_spr_pattern.1
10387                        	
10388                        		.dbg	line,	"include\routines_LEVELS.c", 2562; }
10389                        	
10390                        		.dbg	line,	"include\routines_LEVELS.c", 2564; else if(player_counter_anim == 17)
10391                        		__bra		.LL447
         01:DA98  80 2E      			bra	.LL447
10392    01:DA9A             	.LL446:
10393                        		__ld.umq	_player_counter_anim
         01:DA9A  AD 19 23   			lda	_player_counter_anim
10394                        		__equ_b.uiq	17
         01:DA9D  C9 11      			cmp	#17
         01:DA9F  F0 01      			beq	!+
         01:DAA1  18         			clc
         01:DAA2             	!:
10395                        		__bfalse	.LL448
         01:DAA2  90 0E      			bcc	.LL448
10396                        	
10397                        		.dbg	line,	"include\routines_LEVELS.c", 2565; {
10398                        	
10399                        		.dbg	line,	"include\routines_LEVELS.c", 2566; spr_set(player_id);
10400                        		__ld.umq	_player_id
         01:DAA4  AD 15 23   			lda	_player_id
10401                        		__call		_spr_set.1
         01:DAA7  20 DD E7   			call	_spr_set.1
10402                        	
10403                        		.dbg	line,	"include\routines_LEVELS.c", 2567; spr_pattern(PLAYER_CLIMB_3_VRAM_ADR); 
10404                        		__ld.wi		8704
         01:DAAA  62         			cla
         01:DAAB  A0 22      			ldy.h	#8704
10405                        		__call		_spr_pattern.1
         01:DAAD  20 26 E8   			call	_spr_pattern.1
10406                        	
10407                        		.dbg	line,	"include\routines_LEVELS.c", 2568; }
10408                        	
10409                        		.dbg	line,	"include\routines_LEVELS.c", 2570; else if(player_counter_anim == 20)
10410                        		__bra		.LL449
         01:DAB0  80 16      			bra	.LL449
10411    01:DAB2             	.LL448:
10412                        		__ld.umq	_player_counter_anim
         01:DAB2  AD 19 23   			lda	_player_counter_anim
10413                        		__equ_b.uiq	20
         01:DAB5  C9 14      			cmp	#20
         01:DAB7  F0 01      			beq	!+
         01:DAB9  18         			clc
         01:DABA             	!:
10414                        		__bfalse	.LL450
         01:DABA  90 0C      			bcc	.LL450
10415                        	
10416                        		.dbg	line,	"include\routines_LEVELS.c", 2571; {
10417                        	
10418                        		.dbg	line,	"include\routines_LEVELS.c", 2572; spr_set(player_id);
10419                        		__ld.umq	_player_id
         01:DABC  AD 15 23   			lda	_player_id
10420                        		__call		_spr_set.1
         01:DABF  20 DD E7   			call	_spr_set.1
10421                        	
10422                        		.dbg	line,	"include\routines_LEVELS.c", 2573; spr_pattern(PLAYER_CLIMB_2_VRAM_ADR); 
10423                        		__ld.wi		8448
         01:DAC2  62         			cla
         01:DAC3  A0 21      			ldy.h	#8448
10424                        		__call		_spr_pattern.1
         01:DAC5  20 26 E8   			call	_spr_pattern.1
10425                        	
10426                        		.dbg	line,	"include\routines_LEVELS.c", 2574; }
10427                        	
10428                        		.dbg	line,	"include\routines_LEVELS.c", 2577; player_counter_anim += 1;
10429    01:DAC8             	.LL450:
10430    01:DAC8             	.LL449:
10431    01:DAC8             	.LL447:
10432    01:DAC8             	.LL445:
10433    01:DAC8             	.LL443:
10434    01:DAC8             	.LL441:
10435    01:DAC8             	.LL439:
10436    01:DAC8             	.LL437:
10437                        		__add_st.umiq	1, _player_counter_anim
         01:DAC8  EE 19 23   			inc	_player_counter_anim
10438                        	
10439                        		.dbg	line,	"include\routines_LEVELS.c", 2579; if(player_counter_anim == 22)
10440                        		__ld.umq	_player_counter_anim
         01:DACB  AD 19 23   			lda	_player_counter_anim
10441                        		__equ_b.uiq	22
         01:DACE  C9 16      			cmp	#22
         01:DAD0  F0 01      			beq	!+
         01:DAD2  18         			clc
         01:DAD3             	!:
10442                        		__bfalse	.LL451
         01:DAD3  90 03      			bcc	.LL451
10443                        	
10444                        		.dbg	line,	"include\routines_LEVELS.c", 2580; {
10445                        	
10446                        		.dbg	line,	"include\routines_LEVELS.c", 2581; player_counter_anim = 0;
10447                        		__st.umiq	0, _player_counter_anim
         01:DAD5  9C 19 23   			stz	_player_counter_anim
10448                        	
10449                        		.dbg	line,	"include\routines_LEVELS.c", 2582; }
10450                        	
10451                        		.dbg	line,	"include\routines_LEVELS.c", 2584; recenter_CAMERA();
10452    01:DAD8             	.LL451:
10453                        		__call		_recenter_CAMERA
         01:DAD8  20 63 FF   			call	_recenter_CAMERA
10454                        	
10455                        		.dbg	line,	"include\routines_LEVELS.c", 2585; }
10456                        	
10457                        		.dbg	line,	"include\routines_LEVELS.c", 2588; else if(player_state == STATE_CLIMB_DOWN)
10458                        		__bra		.LL452
         01:DADB  4C 3D DD   			bra	.LL452
10459    01:DADE             	.LL435:
10460                        		__ld.umq	_player_state
         01:DADE  AD 16 23   			lda	_player_state
10461                        		__equ_b.uiq	12
         01:DAE1  C9 0C      			cmp	#12
         01:DAE3  F0 01      			beq	!+
         01:DAE5  18         			clc
         01:DAE6             	!:
10462                        		__bfalse	.LL453
         01:DAE6  B0 03 4C C0			bcc	.LL453
         01:DAEA  DB          
10463                        	
10464                        		.dbg	line,	"include\routines_LEVELS.c", 2589; {
10465                        	
10466                        		.dbg	line,	"include\routines_LEVELS.c", 2590; if(player_counter_anim == 0)
10467                        		__not.um	_player_counter_anim
         01:DAEB  AD 19 23   			lda	_player_counter_anim
         01:DAEE  18         			clc
         01:DAEF  D0 01      			bne	!+
         01:DAF1  38         			sec
         01:DAF2             	!:
10468                        		__bfalse	.LL454
         01:DAF2  90 0F      			bcc	.LL454
10469                        	
10470                        		.dbg	line,	"include\routines_LEVELS.c", 2591; {
10471                        	
10472                        		.dbg	line,	"include\routines_LEVELS.c", 2592; spr_set(player_id);
10473                        		__ld.umq	_player_id
         01:DAF4  AD 15 23   			lda	_player_id
10474                        		__call		_spr_set.1
         01:DAF7  20 DD E7   			call	_spr_set.1
10475                        	
10476                        		.dbg	line,	"include\routines_LEVELS.c", 2593; spr_pattern(PLAYER_CLIMB_1_VRAM_ADR); 
10477                        		__ld.wi		8192
         01:DAFA  62         			cla
         01:DAFB  A0 20      			ldy.h	#8192
10478                        		__call		_spr_pattern.1
         01:DAFD  20 26 E8   			call	_spr_pattern.1
10479                        	
10480                        		.dbg	line,	"include\routines_LEVELS.c", 2594; }
10481                        	
10482                        		.dbg	line,	"include\routines_LEVELS.c", 2596; else if(player_counter_anim == 2)
10483                        		__bra		.LL455
         01:DB00  4C AA DB   			bra	.LL455
10484    01:DB03             	.LL454:
10485                        		__ld.umq	_player_counter_anim
         01:DB03  AD 19 23   			lda	_player_counter_anim
10486                        		__equ_b.uiq	2
         01:DB06  C9 02      			cmp	#2
         01:DB08  F0 01      			beq	!+
         01:DB0A  18         			clc
         01:DB0B             	!:
10487                        		__bfalse	.LL456
         01:DB0B  90 0F      			bcc	.LL456
10488                        	
10489                        		.dbg	line,	"include\routines_LEVELS.c", 2597; {
10490                        	
10491                        		.dbg	line,	"include\routines_LEVELS.c", 2598; spr_set(player_id);
10492                        		__ld.umq	_player_id
         01:DB0D  AD 15 23   			lda	_player_id
10493                        		__call		_spr_set.1
         01:DB10  20 DD E7   			call	_spr_set.1
10494                        	
10495                        		.dbg	line,	"include\routines_LEVELS.c", 2599; spr_pattern(PLAYER_CLIMB_2_VRAM_ADR); 
10496                        		__ld.wi		8448
         01:DB13  62         			cla
         01:DB14  A0 21      			ldy.h	#8448
10497                        		__call		_spr_pattern.1
         01:DB16  20 26 E8   			call	_spr_pattern.1
10498                        	
10499                        		.dbg	line,	"include\routines_LEVELS.c", 2600; }
10500                        	
10501                        		.dbg	line,	"include\routines_LEVELS.c", 2602; else if(player_counter_anim == 5)
10502                        		__bra		.LL457
         01:DB19  4C AA DB   			bra	.LL457
10503    01:DB1C             	.LL456:
10504                        		__ld.umq	_player_counter_anim
         01:DB1C  AD 19 23   			lda	_player_counter_anim
10505                        		__equ_b.uiq	5
         01:DB1F  C9 05      			cmp	#5
         01:DB21  F0 01      			beq	!+
         01:DB23  18         			clc
         01:DB24             	!:
10506                        		__bfalse	.LL458
         01:DB24  90 0E      			bcc	.LL458
10507                        	
10508                        		.dbg	line,	"include\routines_LEVELS.c", 2603; {
10509                        	
10510                        		.dbg	line,	"include\routines_LEVELS.c", 2604; spr_set(player_id);
10511                        		__ld.umq	_player_id
         01:DB26  AD 15 23   			lda	_player_id
10512                        		__call		_spr_set.1
         01:DB29  20 DD E7   			call	_spr_set.1
10513                        	
10514                        		.dbg	line,	"include\routines_LEVELS.c", 2605; spr_pattern(PLAYER_CLIMB_3_VRAM_ADR); 
10515                        		__ld.wi		8704
         01:DB2C  62         			cla
         01:DB2D  A0 22      			ldy.h	#8704
10516                        		__call		_spr_pattern.1
         01:DB2F  20 26 E8   			call	_spr_pattern.1
10517                        	
10518                        		.dbg	line,	"include\routines_LEVELS.c", 2606; }
10519                        	
10520                        		.dbg	line,	"include\routines_LEVELS.c", 2608; else if(player_counter_anim == 8)
10521                        		__bra		.LL459
         01:DB32  80 76      			bra	.LL459
10522    01:DB34             	.LL458:
10523                        		__ld.umq	_player_counter_anim
         01:DB34  AD 19 23   			lda	_player_counter_anim
10524                        		__equ_b.uiq	8
         01:DB37  C9 08      			cmp	#8
         01:DB39  F0 01      			beq	!+
         01:DB3B  18         			clc
         01:DB3C             	!:
10525                        		__bfalse	.LL460
         01:DB3C  90 0E      			bcc	.LL460
10526                        	
10527                        		.dbg	line,	"include\routines_LEVELS.c", 2609; {
10528                        	
10529                        		.dbg	line,	"include\routines_LEVELS.c", 2610; spr_set(player_id);
10530                        		__ld.umq	_player_id
         01:DB3E  AD 15 23   			lda	_player_id
10531                        		__call		_spr_set.1
         01:DB41  20 DD E7   			call	_spr_set.1
10532                        	
10533                        		.dbg	line,	"include\routines_LEVELS.c", 2611; spr_pattern(PLAYER_CLIMB_4_VRAM_ADR); 
10534                        		__ld.wi		8960
         01:DB44  62         			cla
         01:DB45  A0 23      			ldy.h	#8960
10535                        		__call		_spr_pattern.1
         01:DB47  20 26 E8   			call	_spr_pattern.1
10536                        	
10537                        		.dbg	line,	"include\routines_LEVELS.c", 2612; }
10538                        	
10539                        		.dbg	line,	"include\routines_LEVELS.c", 2614; else if(player_counter_anim == 11)
10540                        		__bra		.LL461
         01:DB4A  80 5E      			bra	.LL461
10541    01:DB4C             	.LL460:
10542                        		__ld.umq	_player_counter_anim
         01:DB4C  AD 19 23   			lda	_player_counter_anim
10543                        		__equ_b.uiq	11
         01:DB4F  C9 0B      			cmp	#11
         01:DB51  F0 01      			beq	!+
         01:DB53  18         			clc
         01:DB54             	!:
10544                        		__bfalse	.LL462
         01:DB54  90 0E      			bcc	.LL462
10545                        	
10546                        		.dbg	line,	"include\routines_LEVELS.c", 2615; {
10547                        	
10548                        		.dbg	line,	"include\routines_LEVELS.c", 2616; spr_set(player_id);
10549                        		__ld.umq	_player_id
         01:DB56  AD 15 23   			lda	_player_id
10550                        		__call		_spr_set.1
         01:DB59  20 DD E7   			call	_spr_set.1
10551                        	
10552                        		.dbg	line,	"include\routines_LEVELS.c", 2617; spr_pattern(PLAYER_CLIMB_5_VRAM_ADR); 
10553                        		__ld.wi		9216
         01:DB5C  62         			cla
         01:DB5D  A0 24      			ldy.h	#9216
10554                        		__call		_spr_pattern.1
         01:DB5F  20 26 E8   			call	_spr_pattern.1
10555                        	
10556                        		.dbg	line,	"include\routines_LEVELS.c", 2618; }
10557                        	
10558                        		.dbg	line,	"include\routines_LEVELS.c", 2620; else if(player_counter_anim == 14)
10559                        		__bra		.LL463
         01:DB62  80 46      			bra	.LL463
10560    01:DB64             	.LL462:
10561                        		__ld.umq	_player_counter_anim
         01:DB64  AD 19 23   			lda	_player_counter_anim
10562                        		__equ_b.uiq	14
         01:DB67  C9 0E      			cmp	#14
         01:DB69  F0 01      			beq	!+
         01:DB6B  18         			clc
         01:DB6C             	!:
10563                        		__bfalse	.LL464
         01:DB6C  90 0E      			bcc	.LL464
10564                        	
10565                        		.dbg	line,	"include\routines_LEVELS.c", 2621; {
10566                        	
10567                        		.dbg	line,	"include\routines_LEVELS.c", 2622; spr_set(player_id);
10568                        		__ld.umq	_player_id
         01:DB6E  AD 15 23   			lda	_player_id
10569                        		__call		_spr_set.1
         01:DB71  20 DD E7   			call	_spr_set.1
10570                        	
10571                        		.dbg	line,	"include\routines_LEVELS.c", 2623; spr_pattern(PLAYER_CLIMB_4_VRAM_ADR); 
10572                        		__ld.wi		8960
         01:DB74  62         			cla
         01:DB75  A0 23      			ldy.h	#8960
10573                        		__call		_spr_pattern.1
         01:DB77  20 26 E8   			call	_spr_pattern.1
10574                        	
10575                        		.dbg	line,	"include\routines_LEVELS.c", 2624; }
10576                        	
10577                        		.dbg	line,	"include\routines_LEVELS.c", 2626; else if(player_counter_anim == 17)
10578                        		__bra		.LL465
         01:DB7A  80 2E      			bra	.LL465
10579    01:DB7C             	.LL464:
10580                        		__ld.umq	_player_counter_anim
         01:DB7C  AD 19 23   			lda	_player_counter_anim
10581                        		__equ_b.uiq	17
         01:DB7F  C9 11      			cmp	#17
         01:DB81  F0 01      			beq	!+
         01:DB83  18         			clc
         01:DB84             	!:
10582                        		__bfalse	.LL466
         01:DB84  90 0E      			bcc	.LL466
10583                        	
10584                        		.dbg	line,	"include\routines_LEVELS.c", 2627; {
10585                        	
10586                        		.dbg	line,	"include\routines_LEVELS.c", 2628; spr_set(player_id);
10587                        		__ld.umq	_player_id
         01:DB86  AD 15 23   			lda	_player_id
10588                        		__call		_spr_set.1
         01:DB89  20 DD E7   			call	_spr_set.1
10589                        	
10590                        		.dbg	line,	"include\routines_LEVELS.c", 2629; spr_pattern(PLAYER_CLIMB_3_VRAM_ADR); 
10591                        		__ld.wi		8704
         01:DB8C  62         			cla
         01:DB8D  A0 22      			ldy.h	#8704
10592                        		__call		_spr_pattern.1
         01:DB8F  20 26 E8   			call	_spr_pattern.1
10593                        	
10594                        		.dbg	line,	"include\routines_LEVELS.c", 2630; }
10595                        	
10596                        		.dbg	line,	"include\routines_LEVELS.c", 2632; else if(player_counter_anim == 20)
10597                        		__bra		.LL467
         01:DB92  80 16      			bra	.LL467
10598    01:DB94             	.LL466:
10599                        		__ld.umq	_player_counter_anim
         01:DB94  AD 19 23   			lda	_player_counter_anim
10600                        		__equ_b.uiq	20
         01:DB97  C9 14      			cmp	#20
         01:DB99  F0 01      			beq	!+
         01:DB9B  18         			clc
         01:DB9C             	!:
10601                        		__bfalse	.LL468
         01:DB9C  90 0C      			bcc	.LL468
10602                        	
10603                        		.dbg	line,	"include\routines_LEVELS.c", 2633; {
10604                        	
10605                        		.dbg	line,	"include\routines_LEVELS.c", 2634; spr_set(player_id);
10606                        		__ld.umq	_player_id
         01:DB9E  AD 15 23   			lda	_player_id
10607                        		__call		_spr_set.1
         01:DBA1  20 DD E7   			call	_spr_set.1
10608                        	
10609                        		.dbg	line,	"include\routines_LEVELS.c", 2635; spr_pattern(PLAYER_CLIMB_2_VRAM_ADR); 
10610                        		__ld.wi		8448
         01:DBA4  62         			cla
         01:DBA5  A0 21      			ldy.h	#8448
10611                        		__call		_spr_pattern.1
         01:DBA7  20 26 E8   			call	_spr_pattern.1
10612                        	
10613                        		.dbg	line,	"include\routines_LEVELS.c", 2636; }
10614                        	
10615                        		.dbg	line,	"include\routines_LEVELS.c", 2639; player_counter_anim += 1;
10616    01:DBAA             	.LL468:
10617    01:DBAA             	.LL467:
10618    01:DBAA             	.LL465:
10619    01:DBAA             	.LL463:
10620    01:DBAA             	.LL461:
10621    01:DBAA             	.LL459:
10622    01:DBAA             	.LL457:
10623    01:DBAA             	.LL455:
10624                        		__add_st.umiq	1, _player_counter_anim
         01:DBAA  EE 19 23   			inc	_player_counter_anim
10625                        	
10626                        		.dbg	line,	"include\routines_LEVELS.c", 2641; if(player_counter_anim == 22)
10627                        		__ld.umq	_player_counter_anim
         01:DBAD  AD 19 23   			lda	_player_counter_anim
10628                        		__equ_b.uiq	22
         01:DBB0  C9 16      			cmp	#22
         01:DBB2  F0 01      			beq	!+
         01:DBB4  18         			clc
         01:DBB5             	!:
10629                        		__bfalse	.LL469
         01:DBB5  90 03      			bcc	.LL469
10630                        	
10631                        		.dbg	line,	"include\routines_LEVELS.c", 2642; {
10632                        	
10633                        		.dbg	line,	"include\routines_LEVELS.c", 2643; player_counter_anim = 0;
10634                        		__st.umiq	0, _player_counter_anim
         01:DBB7  9C 19 23   			stz	_player_counter_anim
10635                        	
10636                        		.dbg	line,	"include\routines_LEVELS.c", 2644; }
10637                        	
10638                        		.dbg	line,	"include\routines_LEVELS.c", 2646; recenter_CAMERA();
10639    01:DBBA             	.LL469:
10640                        		__call		_recenter_CAMERA
         01:DBBA  20 63 FF   			call	_recenter_CAMERA
10641                        	
10642                        		.dbg	line,	"include\routines_LEVELS.c", 2647; }
10643                        	
10644                        		.dbg	line,	"include\routines_LEVELS.c", 2650; else if(player_state == STATE_JUMP_LADDER)
10645                        		__bra		.LL470
         01:DBBD  4C 3D DD   			bra	.LL470
10646    01:DBC0             	.LL453:
10647                        		__ld.umq	_player_state
         01:DBC0  AD 16 23   			lda	_player_state
10648                        		__equ_b.uiq	13
         01:DBC3  C9 0D      			cmp	#13
         01:DBC5  F0 01      			beq	!+
         01:DBC7  18         			clc
         01:DBC8             	!:
10649                        		__bfalse	.LL471
         01:DBC8  B0 03 4C 3D			bcc	.LL471
         01:DBCC  DD          
10650                        	
10651                        		.dbg	line,	"include\routines_LEVELS.c", 2651; {
10652                        	
10653                        		.dbg	line,	"include\routines_LEVELS.c", 2652; unsigned char i;
10654                        	
10655                        		.dbg	line,	"include\routines_LEVELS.c", 2653; i = 1;
10656                        		__st.umiq	1, __update_PLAYER_end - 8  /* i */
         01:DBCD  A9 01      			lda.l	#1
         01:DBCF  8D 05 23   			sta	__update_PLAYER_end - 8
10657                        	
10658                        		.dbg	line,	"include\routines_LEVELS.c", 2656; if(player_counter_anim == 0)
10659                        		__not.um	_player_counter_anim
         01:DBD2  AD 19 23   			lda	_player_counter_anim
         01:DBD5  18         			clc
         01:DBD6  D0 01      			bne	!+
         01:DBD8  38         			sec
         01:DBD9             	!:
10660                        		__bfalse	.LL472
         01:DBD9  90 11      			bcc	.LL472
10661                        	
10662                        		.dbg	line,	"include\routines_LEVELS.c", 2657; {
10663                        	
10664                        		.dbg	line,	"include\routines_LEVELS.c", 2658; spr_set(player_id);
10665                        		__ld.umq	_player_id
         01:DBDB  AD 15 23   			lda	_player_id
10666                        		__call		_spr_set.1
         01:DBDE  20 DD E7   			call	_spr_set.1
10667                        	
10668                        		.dbg	line,	"include\routines_LEVELS.c", 2659; spr_pattern(PLAYER_JUMP_VRAM_ADR); 
10669                        		__ld.wi		7424
         01:DBE1  62         			cla
         01:DBE2  A0 1D      			ldy.h	#7424
10670                        		__call		_spr_pattern.1
         01:DBE4  20 26 E8   			call	_spr_pattern.1
10671                        	
10672                        		.dbg	line,	"include\routines_LEVELS.c", 2661; player_counter_anim = 1;
10673                        		__st.umiq	1, _player_counter_anim
         01:DBE7  A9 01      			lda.l	#1
         01:DBE9  8D 19 23   			sta	_player_counter_anim
10674                        	
10675                        		.dbg	line,	"include\routines_LEVELS.c", 2662; }
10676                        	
10677                        		.dbg	line,	"include\routines_LEVELS.c", 2665; player_pos_y += TABLE_PLAYER_JUMP_V[player_index_jump];
10678    01:DBEC             	.LL472:
10679                        		__ldx.umq	_player_index_jump
         01:DBEC  AE 1A 23   			ldx	_player_index_jump
10680                        		__ld.bax	_TABLE_PLAYER_JUMP_V
         01:DBEF  BD F9 60   			lda	_TABLE_PLAYER_JUMP_V, x
         01:DBF2  C2         			cly
         01:DBF3  10 01      			bpl	!+
         01:DBF5  88         			dey
         01:DBF6             	!:
10681                        		__add_st.wmq	_player_pos_y
         01:DBF6  18         			clc
         01:DBF7  6D D4 24   			adc.l	_player_pos_y
         01:DBFA  8D D4 24   			sta.l	_player_pos_y
         01:DBFD  98         			tya
         01:DBFE  6D D5 24   			adc.h	_player_pos_y
         01:DC01  8D D5 24   			sta.h	_player_pos_y
10682                        	
10683                        		.dbg	line,	"include\routines_LEVELS.c", 2667; // CHECK COLLISION WITH CEILING //
10684                        	
10685                        		.dbg	line,	"include\routines_LEVELS.c", 2668; check_BG( 15 , 8 );
10686                        		__ld.wi		15
         01:DC04  A9 0F      			lda.l	#15
         01:DC06  C2         			cly
10687                        		__pusharg.wr
         01:DC07  A6 8D      			ldx	<__sp
         01:DC09  CA         			dex
         01:DC0A  CA         			dex
         01:DC0B  95 08      			sta.l	<__stack, x
         01:DC0D  94 09      			sty.h	<__stack, x
         01:DC0F  86 8D      			stx	<__sp
10688                        		__ld.wi		8
         01:DC11  A9 08      			lda.l	#8
         01:DC13  C2         			cly
10689                        		__pusharg.wr
         01:DC14  A6 8D      			ldx	<__sp
         01:DC16  CA         			dex
         01:DC17  CA         			dex
         01:DC18  95 08      			sta.l	<__stack, x
         01:DC1A  94 09      			sty.h	<__stack, x
         01:DC1C  86 8D      			stx	<__sp
10690                        		__call		_check_BG
         01:DC1E  20 6D FF   			call	_check_BG
10691                        	
10692                        		.dbg	line,	"include\routines_LEVELS.c", 2670; if(map_blk_flag == TILE_BG)
10693                        		__ld.umq	_map_blk_flag
         01:DC21  AD AF 2B   			lda	_map_blk_flag
10694                        		__equ_b.uiq	1
         01:DC24  C9 01      			cmp	#1
         01:DC26  F0 01      			beq	!+
         01:DC28  18         			clc
         01:DC29             	!:
10695                        		__bfalse	.LL473
         01:DC29  90 5A      			bcc	.LL473
10696                        	
10697                        		.dbg	line,	"include\routines_LEVELS.c", 2671; {
10698                        	
10699                        		.dbg	line,	"include\routines_LEVELS.c", 2672; for(i=1 ; i<8 ; i++)
10700                        		__st.umiq	1, __update_PLAYER_end - 8  /* i */
         01:DC2B  A9 01      			lda.l	#1
         01:DC2D  8D 05 23   			sta	__update_PLAYER_end - 8
10701    01:DC30             	.LL474:
10702                        		__ld.umq	__update_PLAYER_end - 8  /* i */
         01:DC30  AD 05 23   			lda	__update_PLAYER_end - 8
10703                        		__ult_b.uiq	8
         01:DC33  C9 08      			cmp	#8		; Subtract integer from A.
         01:DC35  6A         			ror	a		; CC if A < integer.
         01:DC36  49 80      			eor	#$80
         01:DC38  2A         			rol	a
10704                        		__btrue		.LL476
         01:DC39  B0 07      			bcs	.LL476
10705                        		__bra		.LL477
         01:DC3B  80 48      			bra	.LL477
10706    01:DC3D             	.LL475:
10707                        		__inc.umq	__update_PLAYER_end - 8  /* i */
         01:DC3D  EE 05 23   			inc	__update_PLAYER_end - 8
10708                        		__bra		.LL474
         01:DC40  80 EE      			bra	.LL474
10709    01:DC42             	.LL476:
10710                        	
10711                        		.dbg	line,	"include\routines_LEVELS.c", 2673; {
10712                        	
10713                        		.dbg	line,	"include\routines_LEVELS.c", 2674; check_BG( 15 , 8 + i );
10714                        		__ld.wi		15
         01:DC42  A9 0F      			lda.l	#15
         01:DC44  C2         			cly
10715                        		__pusharg.wr
         01:DC45  A6 8D      			ldx	<__sp
         01:DC47  CA         			dex
         01:DC48  CA         			dex
         01:DC49  95 08      			sta.l	<__stack, x
         01:DC4B  94 09      			sty.h	<__stack, x
         01:DC4D  86 8D      			stx	<__sp
10716                        		__ld.wi		8
         01:DC4F  A9 08      			lda.l	#8
         01:DC51  C2         			cly
10717                        		__add.um	__update_PLAYER_end - 8  /* i */
         01:DC52  18         			clc
         01:DC53  6D 05 23   			adc	__update_PLAYER_end - 8
         01:DC56  90 01      			bcc	!+
         01:DC58  C8         			iny
         01:DC59             	!:
10718                        		__pusharg.wr
         01:DC59  A6 8D      			ldx	<__sp
         01:DC5B  CA         			dex
         01:DC5C  CA         			dex
         01:DC5D  95 08      			sta.l	<__stack, x
         01:DC5F  94 09      			sty.h	<__stack, x
         01:DC61  86 8D      			stx	<__sp
10719                        		__call		_check_BG
         01:DC63  20 6D FF   			call	_check_BG
10720                        	
10721                        		.dbg	line,	"include\routines_LEVELS.c", 2675; {
10722                        	
10723                        		.dbg	line,	"include\routines_LEVELS.c", 2676; if(map_blk_flag == TILE_EMPTY)
10724                        		__not.um	_map_blk_flag
         01:DC66  AD AF 2B   			lda	_map_blk_flag
         01:DC69  18         			clc
         01:DC6A  D0 01      			bne	!+
         01:DC6C  38         			sec
         01:DC6D             	!:
10725                        		__bfalse	.LL478
         01:DC6D  90 CE      			bcc	.LL478
10726                        	
10727                        		.dbg	line,	"include\routines_LEVELS.c", 2677; {
10728                        	
10729                        		.dbg	line,	"include\routines_LEVELS.c", 2678; player_pos_y += i;
10730                        		__ld.um		__update_PLAYER_end - 8  /* i */
         01:DC6F  AD 05 23   			lda	__update_PLAYER_end - 8
         01:DC72  C2         			cly
10731                        		__add_st.wmq	_player_pos_y
         01:DC73  18         			clc
         01:DC74  6D D4 24   			adc.l	_player_pos_y
         01:DC77  8D D4 24   			sta.l	_player_pos_y
         01:DC7A  98         			tya
         01:DC7B  6D D5 24   			adc.h	_player_pos_y
         01:DC7E  8D D5 24   			sta.h	_player_pos_y
10732                        	
10733                        		.dbg	line,	"include\routines_LEVELS.c", 2679; break;
10734                        		__bra		.LL477
         01:DC81  80 02      			bra	.LL477
10735                        	
10736                        		.dbg	line,	"include\routines_LEVELS.c", 2680; }
10737                        	
10738                        		.dbg	line,	"include\routines_LEVELS.c", 2681; }
10739    01:DC83             	.LL478	.alias		.LL475
10740                        	
10741                        		.dbg	line,	"include\routines_LEVELS.c", 2682; }
10742                        		__bra		.LL475
         01:DC83  80 B8      			bra	.LL475
10743    01:DC85             	.LL477:
10744                        	
10745                        		.dbg	line,	"include\routines_LEVELS.c", 2683; }
10746                        	
10747                        		.dbg	line,	"include\routines_LEVELS.c", 2685; spr_set(player_id);
10748    01:DC85             	.LL473:
10749                        		__ld.umq	_player_id
         01:DC85  AD 15 23   			lda	_player_id
10750                        		__call		_spr_set.1
         01:DC88  20 DD E7   			call	_spr_set.1
10751                        	
10752                        		.dbg	line,	"include\routines_LEVELS.c", 2686; spr_y(player_pos_y);
10753                        		__ld.wm		_player_pos_y
         01:DC8B  AD D4 24   			lda.l	_player_pos_y
         01:DC8E  AC D5 24   			ldy.h	_player_pos_y
10754                        		__call		_spr_y.1
         01:DC91  20 19 E8   			call	_spr_y.1
10755                        	
10756                        		.dbg	line,	"include\routines_LEVELS.c", 2690; if(player_index_jump < 34)
10757                        		__ld.umq	_player_index_jump
         01:DC94  AD 1A 23   			lda	_player_index_jump
10758                        		__ult_b.uiq	34
         01:DC97  C9 22      			cmp	#34		; Subtract integer from A.
         01:DC99  6A         			ror	a		; CC if A < integer.
         01:DC9A  49 80      			eor	#$80
         01:DC9C  2A         			rol	a
10759                        		__bfalse	.LL479
         01:DC9D  90 03      			bcc	.LL479
10760                        	
10761                        		.dbg	line,	"include\routines_LEVELS.c", 2691; {
10762                        	
10763                        		.dbg	line,	"include\routines_LEVELS.c", 2692; player_index_jump += 1;
10764                        		__add_st.umiq	1, _player_index_jump
         01:DC9F  EE 1A 23   			inc	_player_index_jump
10765                        	
10766                        		.dbg	line,	"include\routines_LEVELS.c", 2693; }
10767                        	
10768                        		.dbg	line,	"include\routines_LEVELS.c", 2698; //--------------------------------------------------------------------------------------//
10769                        	
10770                        		.dbg	line,	"include\routines_LEVELS.c", 2699; //                                   LADDER COLLISION                                   //
10771                        	
10772                        		.dbg	line,	"include\routines_LEVELS.c", 2700; //--------------------------------------------------------------------------------------//
10773                        	
10774                        		.dbg	line,	"include\routines_LEVELS.c", 2702; if(player_index_jump > 18)
10775    01:DCA2             	.LL479:
10776                        		__ld.umq	_player_index_jump
         01:DCA2  AD 1A 23   			lda	_player_index_jump
10777                        		__ugt_b.uiq	18
         01:DCA5  18         			clc			; Subtract integer+1 from A.
         01:DCA6  E9 12      			sbc	#18		; CS if A > integer.
10778                        		__bfalse	.LL480
         01:DCA8  B0 03 4C 3D			bcc	.LL480
         01:DCAC  DD          
10779                        	
10780                        		.dbg	line,	"include\routines_LEVELS.c", 2703; {
10781                        	
10782                        		.dbg	line,	"include\routines_LEVELS.c", 2704; // CHECK COLLISION WITH LADDERS //
10783                        	
10784                        		.dbg	line,	"include\routines_LEVELS.c", 2705; check_BG( 16 , 8 );
10785                        		__ld.wi		16
         01:DCAD  A9 10      			lda.l	#16
         01:DCAF  C2         			cly
10786                        		__pusharg.wr
         01:DCB0  A6 8D      			ldx	<__sp
         01:DCB2  CA         			dex
         01:DCB3  CA         			dex
         01:DCB4  95 08      			sta.l	<__stack, x
         01:DCB6  94 09      			sty.h	<__stack, x
         01:DCB8  86 8D      			stx	<__sp
10787                        		__ld.wi		8
         01:DCBA  A9 08      			lda.l	#8
         01:DCBC  C2         			cly
10788                        		__pusharg.wr
         01:DCBD  A6 8D      			ldx	<__sp
         01:DCBF  CA         			dex
         01:DCC0  CA         			dex
         01:DCC1  95 08      			sta.l	<__stack, x
         01:DCC3  94 09      			sty.h	<__stack, x
         01:DCC5  86 8D      			stx	<__sp
10789                        		__call		_check_BG
         01:DCC7  20 6D FF   			call	_check_BG
10790                        	
10791                        		.dbg	line,	"include\routines_LEVELS.c", 2707; // IF PLAYER HITS THE LADDER //
10792                        	
10793                        		.dbg	line,	"include\routines_LEVELS.c", 2708; if(map_blk_flag == TILE_LADDER)
10794                        		__ld.umq	_map_blk_flag
         01:DCCA  AD AF 2B   			lda	_map_blk_flag
10795                        		__equ_b.uiq	2
         01:DCCD  C9 02      			cmp	#2
         01:DCCF  F0 01      			beq	!+
         01:DCD1  18         			clc
         01:DCD2             	!:
10796                        		__bfalse	.LL481
         01:DCD2  90 69      			bcc	.LL481
10797                        	
10798                        		.dbg	line,	"include\routines_LEVELS.c", 2709; {
10799                        	
10800                        		.dbg	line,	"include\routines_LEVELS.c", 2710; // CAMERA GOES 8 PX BACKWARD //
10801                        	
10802                        		.dbg	line,	"include\routines_LEVELS.c", 2711; sgx_map_pxl_x = ( (sgx_map_pxl_x >> 3) << 3 );
10803                        		__ld.wm		_sgx_map_pxl_x
         01:DCD4  AD 8E 26   			lda.l	_sgx_map_pxl_x
         01:DCD7  AC 8F 26   			ldy.h	_sgx_map_pxl_x
10804                        		__lsr.wi	3
         01:DCDA  84 00      			sty	__temp
         01:DCDC  20 3A E2   			jsr	lsrw3
10805                        		__asl.wi	3
         01:DCDF  84 00      			sty	__temp
         01:DCE1  20 D7 E1   			jsr	aslw3
10806                        		__st.wmq	_sgx_map_pxl_x
         01:DCE4  8D 8E 26   			sta.l	_sgx_map_pxl_x
         01:DCE7  8C 8F 26   			sty.h	_sgx_map_pxl_x
10807                        	
10808                        		.dbg	line,	"include\routines_LEVELS.c", 2713; // SO WE UPDATE THE MAP //
10809                        	
10810                        		.dbg	line,	"include\routines_LEVELS.c", 2714; sgx_scroll_map();
10811                        		__call		_sgx_scroll_map
         01:DCEA  20 81 FF   			call	_sgx_scroll_map
10812                        	
10813                        		.dbg	line,	"include\routines_LEVELS.c", 2716; // CHECK IF THE PLAYER STANDS RIGHT TO THE LADDER //
10814                        	
10815                        		.dbg	line,	"include\routines_LEVELS.c", 2717; check_BG( 31 , 8 );
10816                        		__ld.wi		31
         01:DCED  A9 1F      			lda.l	#31
         01:DCEF  C2         			cly
10817                        		__pusharg.wr
         01:DCF0  A6 8D      			ldx	<__sp
         01:DCF2  CA         			dex
         01:DCF3  CA         			dex
         01:DCF4  95 08      			sta.l	<__stack, x
         01:DCF6  94 09      			sty.h	<__stack, x
         01:DCF8  86 8D      			stx	<__sp
10818                        		__ld.wi		8
         01:DCFA  A9 08      			lda.l	#8
         01:DCFC  C2         			cly
10819                        		__pusharg.wr
         01:DCFD  A6 8D      			ldx	<__sp
         01:DCFF  CA         			dex
         01:DD00  CA         			dex
         01:DD01  95 08      			sta.l	<__stack, x
         01:DD03  94 09      			sty.h	<__stack, x
         01:DD05  86 8D      			stx	<__sp
10820                        		__call		_check_BG
         01:DD07  20 6D FF   			call	_check_BG
10821                        	
10822                        		.dbg	line,	"include\routines_LEVELS.c", 2719; if(map_blk_flag == TILE_LADDER)
10823                        		__ld.umq	_map_blk_flag
         01:DD0A  AD AF 2B   			lda	_map_blk_flag
10824                        		__equ_b.uiq	2
         01:DD0D  C9 02      			cmp	#2
         01:DD0F  F0 01      			beq	!+
         01:DD11  18         			clc
         01:DD12             	!:
10825                        		__bfalse	.LL482
         01:DD12  90 0E      			bcc	.LL482
10826                        	
10827                        		.dbg	line,	"include\routines_LEVELS.c", 2720; {
10828                        	
10829                        		.dbg	line,	"include\routines_LEVELS.c", 2721; sgx_map_pxl_x += 8;
10830                        		__add_st.wmiq	8, _sgx_map_pxl_x
         01:DD14  18         			clc
         01:DD15  AD 8E 26   			lda.l	_sgx_map_pxl_x
         01:DD18  69 08      			adc.l	#8
         01:DD1A  8D 8E 26   			sta.l	_sgx_map_pxl_x
         01:DD1D  90 03      			bcc	!+
         01:DD1F  EE 8F 26   			inc.h	_sgx_map_pxl_x
         01:DD22             	!:
10831                        	
10832                        		.dbg	line,	"include\routines_LEVELS.c", 2722; }
10833                        	
10834                        		.dbg	line,	"include\routines_LEVELS.c", 2724; //spr_set(player_id);
10835                        	
10836                        		.dbg	line,	"include\routines_LEVELS.c", 2725; spr_pattern(PLAYER_HANG_VRAM_ADR);
10837    01:DD22             	.LL482:
10838                        		__ld.wi		7936
         01:DD22  62         			cla
         01:DD23  A0 1F      			ldy.h	#7936
10839                        		__call		_spr_pattern.1
         01:DD25  20 26 E8   			call	_spr_pattern.1
10840                        	
10841                        		.dbg	line,	"include\routines_LEVELS.c", 2727; player_counter_anim = 0;//
10842                        		__st.umiq	0, _player_counter_anim
         01:DD28  9C 19 23   			stz	_player_counter_anim
10843                        	
10844                        		.dbg	line,	"include\routines_LEVELS.c", 2728; player_index_jump = 0;
10845                        		__st.umiq	0, _player_index_jump
         01:DD2B  9C 1A 23   			stz	_player_index_jump
10846                        	
10847                        		.dbg	line,	"include\routines_LEVELS.c", 2729; jump_ladder = TRUE;
10848                        		__st.umiq	1, _jump_ladder
         01:DD2E  A9 01      			lda.l	#1
         01:DD30  8D 1F 23   			sta	_jump_ladder
10849                        	
10850                        		.dbg	line,	"include\routines_LEVELS.c", 2730; jump_max_index = 29;
10851                        		__st.umiq	29, _jump_max_index
         01:DD33  A9 1D      			lda.l	#29
         01:DD35  8D 20 23   			sta	_jump_max_index
10852                        	
10853                        		.dbg	line,	"include\routines_LEVELS.c", 2731; player_state = STATE_HANG;
10854                        		__st.umiq	10, _player_state
         01:DD38  A9 0A      			lda.l	#10
         01:DD3A  8D 16 23   			sta	_player_state
10855                        	
10856                        		.dbg	line,	"include\routines_LEVELS.c", 2732; }
10857                        	
10858                        		.dbg	line,	"include\routines_LEVELS.c", 2733; }
10859    01:DD3D             	.LL481:
10860                        	
10861                        		.dbg	line,	"include\routines_LEVELS.c", 2734; }
10862    01:DD3D             	.LL480:
10863                        	
10864                        		.dbg	line,	"include\routines_LEVELS.c", 2736; }
10865    01:DD3D             	.LL471:
10866    01:DD3D             	.LL470:
10867    01:DD3D             	.LL452:
10868    01:DD3D             	.LL434:
10869    01:DD3D             	.LL430:
10870    01:DD3D             	.LL415:
10871    01:DD3D             	.LL390:
10872    01:DD3D             	.LL385:
10873    01:DD3D             	.LL348:
10874    01:DD3D             	.LL311:
10875    01:DD3D             	.LL285:
10876    01:DD3D             	.LL262:
10877    01:DD3D             	.LL219:
10878    01:DD3D             	.LL214:
10879                        		__return	0
         01:DD3D  4C EF FF   			jmp	leave_proc
10880                        		.dbg	clear
10881                        		.endp
10882               6860     		.data
10883               2305     		.bss
10884    F8:2305             	__update_PLAYER_loc:
10885    F8:2305             			ds	8
10886    F8:230D             	__update_PLAYER_end:
10887               E309     		.code
10888                        		.pceas
10889                        	
10890                        		.dbg	line,	"main.c", 23; #include "include/routines_SHOP.c"
10891                        		.dbg	line,	"include\routines_SHOP.c", 1; #include "huc.h"
10892                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
10893                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
10894                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
10895                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
10896                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
10897                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
10898                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
10899                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
10900                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
10901                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
10902                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
10903                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
10904                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
10905                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
10906                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
10907                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
10908                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
10909                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
10910                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
10911                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
10912                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
10913                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
10914                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
10915                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
10916                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
10917                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
10918                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
10919                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
10920                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
10921                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
10922                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
10923                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
10924                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
10925                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
10926                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
10927                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
10928                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
10929                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
10930                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
10931                        		.dbg	line,	"include\routines_SHOP.c", 2; #include "hucc-scroll.h"
10932                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 1; #ifndef _hucc_scroll_h
10933                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 2; #define _hucc_scroll_h
10934                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 4; /****************************************************************************
10935                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 5; ; ***************************************************************************
10936                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 6; ;
10937                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 7; ; hucc-scroll.h
10938                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 8; ;
10939                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 9; ; Routines for a fast split-screen scrolling system.
10940                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 10; ;
10941                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 11; ; Copyright John Brandwood 2024.
10942                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 12; ;
10943                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 13; ; Distributed under the Boost Software License, Version 1.0.
10944                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
10945                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
10946                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 16; ;
10947                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 17; ; ***************************************************************************
10948                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 18; ; ***************************************************************************
10949                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 19; ;
10950                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 20; ; The maximum number of splits for each screen layer is set in your project's
10951                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 21; ; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
10952                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 22; ;
10953                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 23; ; Your first active split must be defined to start at screen line 0, and then
10954                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 24; ; the rest of the active splits must be in increasing line order to match the
10955                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 25; ; way that the PC Engine displays the output image.
10956                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 26; ;
10957                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 27; ; You can have disabled splits interleaved with your active splits.
10958                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 28; ;
10959                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 29; ; Splits that are normally disabled can be used to create full screen effects
10960                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 30; ; such as bouncing the screen up and down by adding blank areas at the top or
10961                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 31; ; bottom of the screen, and then rapidly changing the height of those areas.
10962                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 32; ;
10963                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 33; ; ***************************************************************************
10964                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 34; ; **************************************************************************/
10965                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 36; // *************
10966                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 37; // VDC bits for display_flags ...
10967                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 38; // *************
10968                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 40; #ifndef BKG_OFF
10969                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 41; #define BKG_OFF 0x00
10970                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 42; #endif
10971                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 44; #ifndef SPR_OFF
10972                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 45; #define SPR_OFF 0x00
10973                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 46; #endif
10974                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 48; #ifndef BKG_ON
10975                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 49; #define BKG_ON 0x80
10976                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 50; #endif
10977                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 52; #ifndef SPR_ON
10978                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 53; #define SPR_ON 0x40
10979                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 54; #endif
10980                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 56; // *************
10981                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 57; // Functions in hucc-scroll.asm ...
10982                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 58; // *************
10983                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 60; #ifdef __HUCC__
10984                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 62; #asmdef	HUCC_USES_NEW_SCROLL 1
10985                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 64; extern void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
10986                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 65; extern void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
10987                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 67; extern void __fastcall disable_split( unsigned char index<acc> );
10988                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 68; extern void __fastcall sgx_disable_split( unsigned char index<acc> );
10989                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 70; extern void __fastcall __macro disable_all_splits( void );
10990                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 71; extern void __fastcall __macro sgx_disable_all_splits( void );
10991                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 73; #asm
10992                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 74; .macro	_disable_all_splits
10993                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 75; ldy	#HUCC_PCE_SPLITS - 1
10994                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 76; !loop:		tya
10995                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 77; call	_disable_split.1
10996                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 78; dey
10997                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 79; bpl	!loop-
10998                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 80; .endm
10999                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 82; .macro	_sgx_disable_all_splits
11000                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 83; ldy	#HUCC_SGX_SPLITS - 1
11001                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 84; !loop:		tya
11002                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 85; call	_sgx_disable_split.1
11003                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 86; dey
11004                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 87; bpl	!loop-
11005                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 88; .endm
11006                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 89; #endasm
11007                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 91; #endif // __HUCC__
11008                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 93; #endif // _hucc_scroll_h
11009                        		.dbg	line,	"include\routines_SHOP.c", 3; #include "hucc-chrmap.h"
11010                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 1; #ifndef _hucc_chrmap_h
11011                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 2; #define _hucc_chrmap_h
11012                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 4; /****************************************************************************
11013                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 5; ; ***************************************************************************
11014                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 6; ;
11015                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 7; ; hucc-chrmap.h
11016                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 8; ;
11017                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 9; ; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
11018                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 10; ;
11019                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 11; ; Copyright John Brandwood 2025.
11020                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 12; ;
11021                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
11022                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
11023                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
11024                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 16; ;
11025                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 17; ; ***************************************************************************
11026                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 18; ; ***************************************************************************
11027                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 19; ;
11028                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 20; ; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
11029                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 21; ;
11030                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 22; ; The maximum total size for a chrmap is 16KBytes, which allows for maps up
11031                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 23; ; to 256x32 tiles (2048x256 pixels).
11032                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 24; ;
11033                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 25; ; ***************************************************************************
11034                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 26; ; **************************************************************************/
11035                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 28; // *************
11036                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 29; // This code extends the blkmap library ...
11037                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 30; // *************
11038                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 32; #include "hucc-blkmap.h"
11039                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 34; // *************
11040                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 35; // Functions in chrmap.asm ...
11041                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 36; // *************
11042                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 38; #ifdef __HUCC__
11043                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 40; #asmdef	HUCC_USES_CHRMAP 1
11044                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 42; extern void __fastcall __nop set_chrmap( unsigned char __far *chrmap<vdc_map_bank:vdc_map_addr>, unsigned char tiles_w<vdc_map_line_w> );
11045                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 44; extern void __fastcall draw_bat( void );
11046                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 45; extern void __fastcall scroll_bat( void );
11047                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 47; extern void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
11048                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 49; #ifdef _SGX
11049                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 51; extern void __fastcall __nop sgx_set_chrmap( unsigned char __far *chrmap<sgx_map_bank:sgx_map_addr>, unsigned char tiles_w<sgx_map_line_w> );
11050                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 53; extern void __fastcall sgx_draw_bat( void );
11051                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 54; extern void __fastcall sgx_scroll_bat( void );
11052                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 56; extern void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
11053                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 58; #endif
11054                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 60; #endif // __HUCC__
11055                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 62; #endif // _hucc_chrmap_h
11056                        		.dbg	line,	"include\routines_SHOP.c", 4; #include "hucc-blkmap.h"
11057                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
11058                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
11059                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
11060                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
11061                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
11062                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
11063                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
11064                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
11065                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
11066                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
11067                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
11068                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
11069                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
11070                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
11071                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
11072                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
11073                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
11074                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
11075                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
11076                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
11077                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
11078                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
11079                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
11080                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
11081                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
11082                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
11083                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
11084                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
11085                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
11086                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
11087                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
11088                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
11089                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
11090                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
11091                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
11092                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
11093                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
11094                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
11095                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
11096                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
11097                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
11098                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
11099                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
11100                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
11101                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
11102                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
11103                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
11104                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
11105                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
11106                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
11107                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
11108                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
11109                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
11110                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
11111                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
11112                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
11113                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
11114                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
11115                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
11116                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
11117                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
11118                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
11119                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
11120                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
11121                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
11122                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
11123                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
11124                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 86; .macro	_set_blkmap.2
11125                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 87; stz	vdc_scr_bank
11126                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 88; .endm
11127                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 90; .macro	_set_multimap.2
11128                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 91; lda	vdc_bat_width
11129                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 92; lsr	a
11130                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 93; sta	vdc_map_line_w
11131                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 94; .endm
11132                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 96; .macro	SCREEN
11133                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 97; db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
11134                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 98; db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
11135                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 99; db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
11136                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 100; dw	(\4)
11137                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 101; .endm
11138                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
11139                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
11140                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
11141                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
11142                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
11143                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
11144                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
11145                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
11146                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
11147                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
11148                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
11149                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
11150                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
11151                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
11152                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
11153                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
11154                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
11155                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
11156                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
11157                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
11158                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
11159                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
11160                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
11161                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
11162                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
11163                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
11164                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
11165                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
11166                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 144; .macro	_sgx_set_blkmap.2
11167                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 145; stz	sgx_scr_bank
11168                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 146; .endm
11169                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 148; .macro	_sgx_set_multimap.2
11170                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 149; lda	sgx_bat_width
11171                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 150; lsr	a
11172                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 151; sta	sgx_map_line_w
11173                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 152; .endm
11174                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
11175                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
11176                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
11177                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
11178                        		.dbg	line,	"include\routines_SHOP.c", 12; void display_TIME_SHOP()
11179                        		.dbg	line,	"include\routines_SHOP.c", 13; {
11180                        	;***********************
11181                        	;***********************
11182                        	
11183                        		.hucc
11184    13:DF53             		.proc		_display_TIME_SHOP
11185                        		__enter		_display_TIME_SHOP
11186                        	
11187                        		.dbg	line,	"include\routines_SHOP.c", 14; put_number(minutes,1,1,3);
11188                        		__ld.um		_minutes
         13:DF53  AD 28 23   			lda	_minutes
         13:DF56  C2         			cly
11189                        		__st.wmq	_bx
         13:DF57  85 FA      			sta.l	_bx
         13:DF59  84 FB      			sty.h	_bx
11190                        		__st.umiq	1, _cl
         13:DF5B  A9 01      			lda.l	#1
         13:DF5D  85 FC      			sta	_cl
11191                        		__st.umiq	1, _dil
         13:DF5F  A9 01      			lda.l	#1
         13:DF61  85 F0      			sta	_dil
11192                        		__st.umiq	3, _dih
         13:DF63  A9 03      			lda.l	#3
         13:DF65  85 F1      			sta	_dih
11193                        		__call		_put_number.4
         13:DF67  20 9F FF   			call	_put_number.4
11194                        	
11195                        		.dbg	line,	"include\routines_SHOP.c", 16; if(seconds < 10)
11196                        		__ld.umq	_seconds
         13:DF6A  AD 29 23   			lda	_seconds
11197                        		__ult_b.uiq	10
         13:DF6D  C9 0A      			cmp	#10		; Subtract integer from A.
         13:DF6F  6A         			ror	a		; CC if A < integer.
         13:DF70  49 80      			eor	#$80
         13:DF72  2A         			rol	a
11198                        		__bfalse	.LL484
         13:DF73  90 2C      			bcc	.LL484
11199                        	
11200                        		.dbg	line,	"include\routines_SHOP.c", 17; {
11201                        	
11202                        		.dbg	line,	"include\routines_SHOP.c", 18; put_number(0,1,3,3);
11203                        		__st.wmiq	0, _bx
         13:DF75  64 FA      			stz.l	_bx
         13:DF77  64 FB      			stz.h	_bx
11204                        		__st.umiq	1, _cl
         13:DF79  A9 01      			lda.l	#1
         13:DF7B  85 FC      			sta	_cl
11205                        		__st.umiq	3, _dil
         13:DF7D  A9 03      			lda.l	#3
         13:DF7F  85 F0      			sta	_dil
11206                        		__st.umiq	3, _dih
         13:DF81  A9 03      			lda.l	#3
         13:DF83  85 F1      			sta	_dih
11207                        		__call		_put_number.4
         13:DF85  20 9F FF   			call	_put_number.4
11208                        	
11209                        		.dbg	line,	"include\routines_SHOP.c", 19; put_number(seconds,1,4,3);
11210                        		__ld.um		_seconds
         13:DF88  AD 29 23   			lda	_seconds
         13:DF8B  C2         			cly
11211                        		__st.wmq	_bx
         13:DF8C  85 FA      			sta.l	_bx
         13:DF8E  84 FB      			sty.h	_bx
11212                        		__st.umiq	1, _cl
         13:DF90  A9 01      			lda.l	#1
         13:DF92  85 FC      			sta	_cl
11213                        		__st.umiq	4, _dil
         13:DF94  A9 04      			lda.l	#4
         13:DF96  85 F0      			sta	_dil
11214                        		__st.umiq	3, _dih
         13:DF98  A9 03      			lda.l	#3
         13:DF9A  85 F1      			sta	_dih
11215                        		__call		_put_number.4
         13:DF9C  20 9F FF   			call	_put_number.4
11216                        	
11217                        		.dbg	line,	"include\routines_SHOP.c", 20; }
11218                        	
11219                        		.dbg	line,	"include\routines_SHOP.c", 22; else
11220                        		__bra		.LL485
         13:DF9F  80 17      			bra	.LL485
11221    13:DFA1             	.LL484:
11222                        	
11223                        		.dbg	line,	"include\routines_SHOP.c", 23; {
11224                        	
11225                        		.dbg	line,	"include\routines_SHOP.c", 24; put_number(seconds,2,3,3);
11226                        		__ld.um		_seconds
         13:DFA1  AD 29 23   			lda	_seconds
         13:DFA4  C2         			cly
11227                        		__st.wmq	_bx
         13:DFA5  85 FA      			sta.l	_bx
         13:DFA7  84 FB      			sty.h	_bx
11228                        		__st.umiq	2, _cl
         13:DFA9  A9 02      			lda.l	#2
         13:DFAB  85 FC      			sta	_cl
11229                        		__st.umiq	3, _dil
         13:DFAD  A9 03      			lda.l	#3
         13:DFAF  85 F0      			sta	_dil
11230                        		__st.umiq	3, _dih
         13:DFB1  A9 03      			lda.l	#3
         13:DFB3  85 F1      			sta	_dih
11231                        		__call		_put_number.4
         13:DFB5  20 9F FF   			call	_put_number.4
11232                        	
11233                        		.dbg	line,	"include\routines_SHOP.c", 25; }
11234    13:DFB8             	.LL485:
11235                        	
11236                        		.dbg	line,	"include\routines_SHOP.c", 27; time_counter += 1;
11237                        		__add_st.umiq	1, _time_counter
         13:DFB8  EE 2A 23   			inc	_time_counter
11238                        	
11239                        		.dbg	line,	"include\routines_SHOP.c", 29; if(time_counter == 60)
11240                        		__ld.umq	_time_counter
         13:DFBB  AD 2A 23   			lda	_time_counter
11241                        		__equ_b.uiq	60
         13:DFBE  C9 3C      			cmp	#60
         13:DFC0  F0 01      			beq	!+
         13:DFC2  18         			clc
         13:DFC3             	!:
11242                        		__bfalse	.LL486
         13:DFC3  90 30      			bcc	.LL486
11243                        	
11244                        		.dbg	line,	"include\routines_SHOP.c", 30; {
11245                        	
11246                        		.dbg	line,	"include\routines_SHOP.c", 31; time_counter = 0;
11247                        		__st.umiq	0, _time_counter
         13:DFC5  9C 2A 23   			stz	_time_counter
11248                        	
11249                        		.dbg	line,	"include\routines_SHOP.c", 33; if(seconds > 0)
11250                        		__ld.umq	_seconds
         13:DFC8  AD 29 23   			lda	_seconds
11251                        		__ugt_b.uiq	0
         13:DFCB  18         			clc			; Subtract integer+1 from A.
         13:DFCC  E9 00      			sbc	#0		; CS if A > integer.
11252                        		__bfalse	.LL487
         13:DFCE  90 05      			bcc	.LL487
11253                        	
11254                        		.dbg	line,	"include\routines_SHOP.c", 34; {
11255                        	
11256                        		.dbg	line,	"include\routines_SHOP.c", 35; seconds -= 1;
11257                        		__sub_st.umiq	1, _seconds
         13:DFD0  CE 29 23   			dec	_seconds
11258                        	
11259                        		.dbg	line,	"include\routines_SHOP.c", 36; }
11260                        	
11261                        		.dbg	line,	"include\routines_SHOP.c", 38; else
11262                        		__bra		.LL488
         13:DFD3  80 20      			bra	.LL488
11263    13:DFD5             	.LL487:
11264                        	
11265                        		.dbg	line,	"include\routines_SHOP.c", 39; {
11266                        	
11267                        		.dbg	line,	"include\routines_SHOP.c", 40; if(minutes > 0)
11268                        		__ld.umq	_minutes
         13:DFD5  AD 28 23   			lda	_minutes
11269                        		__ugt_b.uiq	0
         13:DFD8  18         			clc			; Subtract integer+1 from A.
         13:DFD9  E9 00      			sbc	#0		; CS if A > integer.
11270                        		__bfalse	.LL489
         13:DFDB  90 0A      			bcc	.LL489
11271                        	
11272                        		.dbg	line,	"include\routines_SHOP.c", 41; {
11273                        	
11274                        		.dbg	line,	"include\routines_SHOP.c", 42; seconds = 59;
11275                        		__st.umiq	59, _seconds
         13:DFDD  A9 3B      			lda.l	#59
         13:DFDF  8D 29 23   			sta	_seconds
11276                        	
11277                        		.dbg	line,	"include\routines_SHOP.c", 43; minutes -= 1;
11278                        		__sub_st.umiq	1, _minutes
         13:DFE2  CE 28 23   			dec	_minutes
11279                        	
11280                        		.dbg	line,	"include\routines_SHOP.c", 44; }
11281                        	
11282                        		.dbg	line,	"include\routines_SHOP.c", 46; else
11283                        		__bra		.LL490
         13:DFE5  80 0E      			bra	.LL490
11284    13:DFE7             	.LL489:
11285                        	
11286                        		.dbg	line,	"include\routines_SHOP.c", 47; {
11287                        	
11288                        		.dbg	line,	"include\routines_SHOP.c", 48; seconds = 0;
11289                        		__st.umiq	0, _seconds
         13:DFE7  9C 29 23   			stz	_seconds
11290                        	
11291                        		.dbg	line,	"include\routines_SHOP.c", 49; minutes = 0;
11292                        		__st.umiq	0, _minutes
         13:DFEA  9C 28 23   			stz	_minutes
11293                        	
11294                        		.dbg	line,	"include\routines_SHOP.c", 50; shop_counter = 0;    
11295                        		__st.umiq	0, _shop_counter
         13:DFED  9C D1 23   			stz	_shop_counter
11296                        	
11297                        		.dbg	line,	"include\routines_SHOP.c", 51; shop_phase = SHOP_PHASE_EXIT;
11298                        		__st.umiq	2, _shop_phase
         13:DFF0  A9 02      			lda.l	#2
         13:DFF2  8D D0 23   			sta	_shop_phase
11299                        	
11300                        		.dbg	line,	"include\routines_SHOP.c", 52; }
11301    13:DFF5             	.LL490:
11302                        	
11303                        		.dbg	line,	"include\routines_SHOP.c", 53; }
11304    13:DFF5             	.LL488:
11305                        	
11306                        		.dbg	line,	"include\routines_SHOP.c", 54; } 
11307                        	
11308                        		.dbg	line,	"include\routines_SHOP.c", 55; }
11309    13:DFF5             	.LL486:
11310    13:DFF5             	.LL483:
11311                        		__return	0
         13:DFF5  4C EF FF   			jmp	leave_proc
11312                        		.dbg	clear
11313                        		.endp
11314                        		.pceas
11315                        	
11316                        		.dbg	line,	"include\routines_SHOP.c", 59; void joypad_BUTTONS_SHOP()
11317                        		.dbg	line,	"include\routines_SHOP.c", 60; {
11318                        	;***********************
11319                        	;***********************
11320                        	
11321                        		.hucc
11322    02:C000             		.proc		_joypad_BUTTONS_SHOP
11323                        		__enter		_joypad_BUTTONS_SHOP
11324                        	
11325                        		.dbg	line,	"include\routines_SHOP.c", 61; if(joytrg(JOYPAD_1) & JOY_RIGHT)
11326                        		__ld.uiq	0
         02:C000  62         			cla
11327                        		 _joytrg.1
         02:C001  AA         			tax
         02:C002  BD 2D 22   			lda	joytrg, x
         02:C005  BC DD 22   			ldy	joy6trg, x
11328                        		__tand.wi	32
         02:C008  29 20      			and	#32
         02:C00A  C9 01      	!:		cmp	#1
11329                        		__bfalse	.LL492
         02:C00C  90 59      			bcc	.LL492
11330                        	
11331                        		.dbg	line,	"include\routines_SHOP.c", 62; {   
11332                        	
11333                        		.dbg	line,	"include\routines_SHOP.c", 63; char max_index;
11334                        	
11335                        		.dbg	line,	"include\routines_SHOP.c", 64; 
11336                        	
11337                        		.dbg	line,	"include\routines_SHOP.c", 65; if(index_y == 0)
11338                        		__not.um	_index_y
         02:C00E  AD CE 23   			lda	_index_y
         02:C011  18         			clc
         02:C012  D0 01      			bne	!+
         02:C014  38         			sec
         02:C015             	!:
11339                        		__bfalse	.LL493
         02:C015  90 07      			bcc	.LL493
11340                        	
11341                        		.dbg	line,	"include\routines_SHOP.c", 66; {
11342                        	
11343                        		.dbg	line,	"include\routines_SHOP.c", 67; max_index = 4;
11344                        		__st.umiq	4, __joypad_BUTTONS_SHOP_end - 1  /* max_index */
         02:C017  A9 04      			lda.l	#4
         02:C019  8D 0D 23   			sta	__joypad_BUTTONS_SHOP_end - 1
11345                        	
11346                        		.dbg	line,	"include\routines_SHOP.c", 68; }
11347                        	
11348                        		.dbg	line,	"include\routines_SHOP.c", 70; else
11349                        		__bra		.LL494
         02:C01C  80 05      			bra	.LL494
11350    02:C01E             	.LL493:
11351                        	
11352                        		.dbg	line,	"include\routines_SHOP.c", 71; {
11353                        	
11354                        		.dbg	line,	"include\routines_SHOP.c", 72; max_index = 5;
11355                        		__st.umiq	5, __joypad_BUTTONS_SHOP_end - 1  /* max_index */
         02:C01E  A9 05      			lda.l	#5
         02:C020  8D 0D 23   			sta	__joypad_BUTTONS_SHOP_end - 1
11356                        	
11357                        		.dbg	line,	"include\routines_SHOP.c", 73; }
11358    02:C023             	.LL494:
11359                        	
11360                        		.dbg	line,	"include\routines_SHOP.c", 75; if(index_x < max_index)
11361                        		__ld.umq	_index_x
         02:C023  AD CD 23   			lda	_index_x
11362                        		__ult_b.umq	__joypad_BUTTONS_SHOP_end - 1  /* max_index */
         02:C026  CD 0D 23   			cmp	__joypad_BUTTONS_SHOP_end - 1		; Subtract memory from A.
         02:C029  6A         			ror	a		; CC if A < memory.
         02:C02A  49 80      			eor	#$80
         02:C02C  2A         			rol	a
11363                        		__bfalse	.LL495
         02:C02D  B0 03 4C 7D			bcc	.LL495
         02:C031  C5          
11364                        	
11365                        		.dbg	line,	"include\routines_SHOP.c", 76; {
11366                        	
11367                        		.dbg	line,	"include\routines_SHOP.c", 77; index_x += 1;
11368                        		__add_st.umiq	1, _index_x
         02:C032  EE CD 23   			inc	_index_x
11369                        	
11370                        		.dbg	line,	"include\routines_SHOP.c", 78; item_index = (index_x + (index_y * 5));
11371                        		__ld.um		_index_y
         02:C035  AD CE 23   			lda	_index_y
         02:C038  C2         			cly
11372                        		__mul.wi	5
         02:C039  85 00      			sta.l	__temp
         02:C03B  84 01      			sty.h	__temp
                             		__asl.wr
         02:C03D  0A         			asl	a
         02:C03E  42         			say
         02:C03F  2A         			rol	a
         02:C040  42         			say
                             		__asl.wr
         02:C041  0A         			asl	a
         02:C042  42         			say
         02:C043  2A         			rol	a
         02:C044  42         			say
                             		__add.wm	__temp
         02:C045  18         			clc
         02:C046  65 00      			adc.l	__temp
         02:C048  42         			say
         02:C049  65 01      			adc.h	__temp
         02:C04B  42         			say
11373                        		__add.um	_index_x
         02:C04C  18         			clc
         02:C04D  6D CD 23   			adc	_index_x
         02:C050  90 01      			bcc	!+
         02:C052  C8         			iny
         02:C053             	!:
11374                        		__st.umq	_item_index
         02:C053  8D CF 23   			sta	_item_index
11375                        	
11376                        		.dbg	line,	"include\routines_SHOP.c", 80; spr_set(0);
11377                        		__ld.uiq	0
         02:C056  62         			cla
11378                        		__call		_spr_set.1
         02:C057  20 DD E7   			call	_spr_set.1
11379                        	
11380                        		.dbg	line,	"include\routines_SHOP.c", 81; spr_x(TABLE_CURSOR_POS_X[item_index]);
11381                        		__ldx.umq	_item_index
         02:C05A  AE CF 23   			ldx	_item_index
11382                        		__ld.uax	_TABLE_CURSOR_POS_X
         02:C05D  BD 9A 61   			lda	_TABLE_CURSOR_POS_X, x
         02:C060  C2         			cly
11383                        		__call		_spr_x.1
         02:C061  20 0A E8   			call	_spr_x.1
11384                        	
11385                        		.dbg	line,	"include\routines_SHOP.c", 82; }
11386                        	
11387                        		.dbg	line,	"include\routines_SHOP.c", 83; }
11388    02:C064             	.LL495	.alias		.LL496
11389                        	
11390                        		.dbg	line,	"include\routines_SHOP.c", 85; 
11391                        	
11392                        		.dbg	line,	"include\routines_SHOP.c", 86; else if(joytrg(JOYPAD_1) & JOY_LEFT)
11393                        		__bra		.LL496
         02:C064  4C 7D C5   			bra	.LL496
11394    02:C067             	.LL492:
11395                        		__ld.uiq	0
         02:C067  62         			cla
11396                        		 _joytrg.1
         02:C068  AA         			tax
         02:C069  BD 2D 22   			lda	joytrg, x
         02:C06C  BC DD 22   			ldy	joy6trg, x
11397                        		__tand.wi	128
         02:C06F  29 80      			and	#128
         02:C071  C9 01      	!:		cmp	#1
11398                        		__bfalse	.LL497
         02:C073  90 40      			bcc	.LL497
11399                        	
11400                        		.dbg	line,	"include\routines_SHOP.c", 87; {
11401                        	
11402                        		.dbg	line,	"include\routines_SHOP.c", 88; if(index_x > 0)
11403                        		__ld.umq	_index_x
         02:C075  AD CD 23   			lda	_index_x
11404                        		__ugt_b.uiq	0
         02:C078  18         			clc			; Subtract integer+1 from A.
         02:C079  E9 00      			sbc	#0		; CS if A > integer.
11405                        		__bfalse	.LL498
         02:C07B  B0 03 4C 7D			bcc	.LL498
         02:C07F  C5          
11406                        	
11407                        		.dbg	line,	"include\routines_SHOP.c", 89; {
11408                        	
11409                        		.dbg	line,	"include\routines_SHOP.c", 90; index_x -= 1;
11410                        		__sub_st.umiq	1, _index_x
         02:C080  CE CD 23   			dec	_index_x
11411                        	
11412                        		.dbg	line,	"include\routines_SHOP.c", 91; item_index = (index_x + (index_y * 5));
11413                        		__ld.um		_index_y
         02:C083  AD CE 23   			lda	_index_y
         02:C086  C2         			cly
11414                        		__mul.wi	5
         02:C087  85 00      			sta.l	__temp
         02:C089  84 01      			sty.h	__temp
                             		__asl.wr
         02:C08B  0A         			asl	a
         02:C08C  42         			say
         02:C08D  2A         			rol	a
         02:C08E  42         			say
                             		__asl.wr
         02:C08F  0A         			asl	a
         02:C090  42         			say
         02:C091  2A         			rol	a
         02:C092  42         			say
                             		__add.wm	__temp
         02:C093  18         			clc
         02:C094  65 00      			adc.l	__temp
         02:C096  42         			say
         02:C097  65 01      			adc.h	__temp
         02:C099  42         			say
11415                        		__add.um	_index_x
         02:C09A  18         			clc
         02:C09B  6D CD 23   			adc	_index_x
         02:C09E  90 01      			bcc	!+
         02:C0A0  C8         			iny
         02:C0A1             	!:
11416                        		__st.umq	_item_index
         02:C0A1  8D CF 23   			sta	_item_index
11417                        	
11418                        		.dbg	line,	"include\routines_SHOP.c", 93; spr_set(0);
11419                        		__ld.uiq	0
         02:C0A4  62         			cla
11420                        		__call		_spr_set.1
         02:C0A5  20 DD E7   			call	_spr_set.1
11421                        	
11422                        		.dbg	line,	"include\routines_SHOP.c", 94; spr_x(TABLE_CURSOR_POS_X[item_index]);
11423                        		__ldx.umq	_item_index
         02:C0A8  AE CF 23   			ldx	_item_index
11424                        		__ld.uax	_TABLE_CURSOR_POS_X
         02:C0AB  BD 9A 61   			lda	_TABLE_CURSOR_POS_X, x
         02:C0AE  C2         			cly
11425                        		__call		_spr_x.1
         02:C0AF  20 0A E8   			call	_spr_x.1
11426                        	
11427                        		.dbg	line,	"include\routines_SHOP.c", 95; }
11428                        	
11429                        		.dbg	line,	"include\routines_SHOP.c", 96; }
11430    02:C0B2             	.LL498	.alias		.LL499
11431                        	
11432                        		.dbg	line,	"include\routines_SHOP.c", 99; else if(joytrg(JOYPAD_1) & JOY_UP)
11433                        		__bra		.LL499
         02:C0B2  4C 7D C5   			bra	.LL499
11434    02:C0B5             	.LL497:
11435                        		__ld.uiq	0
         02:C0B5  62         			cla
11436                        		 _joytrg.1
         02:C0B6  AA         			tax
         02:C0B7  BD 2D 22   			lda	joytrg, x
         02:C0BA  BC DD 22   			ldy	joy6trg, x
11437                        		__tand.wi	16
         02:C0BD  29 10      			and	#16
         02:C0BF  C9 01      	!:		cmp	#1
11438                        		__bfalse	.LL500
         02:C0C1  90 4A      			bcc	.LL500
11439                        	
11440                        		.dbg	line,	"include\routines_SHOP.c", 100; {
11441                        	
11442                        		.dbg	line,	"include\routines_SHOP.c", 101; if(index_y > 0)
11443                        		__ld.umq	_index_y
         02:C0C3  AD CE 23   			lda	_index_y
11444                        		__ugt_b.uiq	0
         02:C0C6  18         			clc			; Subtract integer+1 from A.
         02:C0C7  E9 00      			sbc	#0		; CS if A > integer.
11445                        		__bfalse	.LL501
         02:C0C9  B0 03 4C 7D			bcc	.LL501
         02:C0CD  C5          
11446                        	
11447                        		.dbg	line,	"include\routines_SHOP.c", 102; {
11448                        	
11449                        		.dbg	line,	"include\routines_SHOP.c", 103; if(item_index != 10)
11450                        		__ld.umq	_item_index
         02:C0CE  AD CF 23   			lda	_item_index
11451                        		__neq_b.uiq	10
         02:C0D1  38         			sec
         02:C0D2  49 0A      			eor	#10
         02:C0D4  D0 01      			bne	!+
         02:C0D6  18         			clc
         02:C0D7             	!:
11452                        		__bfalse	.LL502
         02:C0D7  B0 03 4C 7D			bcc	.LL502
         02:C0DB  C5          
11453                        	
11454                        		.dbg	line,	"include\routines_SHOP.c", 104; {
11455                        	
11456                        		.dbg	line,	"include\routines_SHOP.c", 105; index_y -= 1;
11457                        		__sub_st.umiq	1, _index_y
         02:C0DC  CE CE 23   			dec	_index_y
11458                        	
11459                        		.dbg	line,	"include\routines_SHOP.c", 106; item_index = (index_x + (index_y * 5));
11460                        		__ld.um		_index_y
         02:C0DF  AD CE 23   			lda	_index_y
         02:C0E2  C2         			cly
11461                        		__mul.wi	5
         02:C0E3  85 00      			sta.l	__temp
         02:C0E5  84 01      			sty.h	__temp
                             		__asl.wr
         02:C0E7  0A         			asl	a
         02:C0E8  42         			say
         02:C0E9  2A         			rol	a
         02:C0EA  42         			say
                             		__asl.wr
         02:C0EB  0A         			asl	a
         02:C0EC  42         			say
         02:C0ED  2A         			rol	a
         02:C0EE  42         			say
                             		__add.wm	__temp
         02:C0EF  18         			clc
         02:C0F0  65 00      			adc.l	__temp
         02:C0F2  42         			say
         02:C0F3  65 01      			adc.h	__temp
         02:C0F5  42         			say
11462                        		__add.um	_index_x
         02:C0F6  18         			clc
         02:C0F7  6D CD 23   			adc	_index_x
         02:C0FA  90 01      			bcc	!+
         02:C0FC  C8         			iny
         02:C0FD             	!:
11463                        		__st.umq	_item_index
         02:C0FD  8D CF 23   			sta	_item_index
11464                        	
11465                        		.dbg	line,	"include\routines_SHOP.c", 108; spr_set(0);
11466                        		__ld.uiq	0
         02:C100  62         			cla
11467                        		__call		_spr_set.1
         02:C101  20 DD E7   			call	_spr_set.1
11468                        	
11469                        		.dbg	line,	"include\routines_SHOP.c", 109; spr_y(144);
11470                        		__ld.wi		144
         02:C104  A9 90      			lda.l	#144
         02:C106  C2         			cly
11471                        		__call		_spr_y.1
         02:C107  20 19 E8   			call	_spr_y.1
11472                        	
11473                        		.dbg	line,	"include\routines_SHOP.c", 110; }
11474                        	
11475                        		.dbg	line,	"include\routines_SHOP.c", 111; }
11476    02:C10A             	.LL502	.alias		.LL503
11477                        	
11478                        		.dbg	line,	"include\routines_SHOP.c", 112; }
11479    02:C10A             	.LL501	.alias		.LL503
11480                        	
11481                        		.dbg	line,	"include\routines_SHOP.c", 115; else if(joytrg(JOYPAD_1) & JOY_DOWN)
11482                        		__bra		.LL503
         02:C10A  4C 7D C5   			bra	.LL503
11483    02:C10D             	.LL500:
11484                        		__ld.uiq	0
         02:C10D  62         			cla
11485                        		 _joytrg.1
         02:C10E  AA         			tax
         02:C10F  BD 2D 22   			lda	joytrg, x
         02:C112  BC DD 22   			ldy	joy6trg, x
11486                        		__tand.wi	64
         02:C115  29 40      			and	#64
         02:C117  C9 01      	!:		cmp	#1
11487                        		__bfalse	.LL504
         02:C119  90 3F      			bcc	.LL504
11488                        	
11489                        		.dbg	line,	"include\routines_SHOP.c", 116; {
11490                        	
11491                        		.dbg	line,	"include\routines_SHOP.c", 117; if(index_y < 1)
11492                        		__ld.umq	_index_y
         02:C11B  AD CE 23   			lda	_index_y
11493                        		__ult_b.uiq	1
         02:C11E  C9 01      			cmp	#1		; Subtract integer from A.
         02:C120  6A         			ror	a		; CC if A < integer.
         02:C121  49 80      			eor	#$80
         02:C123  2A         			rol	a
11494                        		__bfalse	.LL505
         02:C124  B0 03 4C 7D			bcc	.LL505
         02:C128  C5          
11495                        	
11496                        		.dbg	line,	"include\routines_SHOP.c", 118; {
11497                        	
11498                        		.dbg	line,	"include\routines_SHOP.c", 119; index_y += 1;
11499                        		__add_st.umiq	1, _index_y
         02:C129  EE CE 23   			inc	_index_y
11500                        	
11501                        		.dbg	line,	"include\routines_SHOP.c", 120; item_index = (index_x + (index_y * 5));
11502                        		__ld.um		_index_y
         02:C12C  AD CE 23   			lda	_index_y
         02:C12F  C2         			cly
11503                        		__mul.wi	5
         02:C130  85 00      			sta.l	__temp
         02:C132  84 01      			sty.h	__temp
                             		__asl.wr
         02:C134  0A         			asl	a
         02:C135  42         			say
         02:C136  2A         			rol	a
         02:C137  42         			say
                             		__asl.wr
         02:C138  0A         			asl	a
         02:C139  42         			say
         02:C13A  2A         			rol	a
         02:C13B  42         			say
                             		__add.wm	__temp
         02:C13C  18         			clc
         02:C13D  65 00      			adc.l	__temp
         02:C13F  42         			say
         02:C140  65 01      			adc.h	__temp
         02:C142  42         			say
11504                        		__add.um	_index_x
         02:C143  18         			clc
         02:C144  6D CD 23   			adc	_index_x
         02:C147  90 01      			bcc	!+
         02:C149  C8         			iny
         02:C14A             	!:
11505                        		__st.umq	_item_index
         02:C14A  8D CF 23   			sta	_item_index
11506                        	
11507                        		.dbg	line,	"include\routines_SHOP.c", 122; spr_set(0);
11508                        		__ld.uiq	0
         02:C14D  62         			cla
11509                        		__call		_spr_set.1
         02:C14E  20 DD E7   			call	_spr_set.1
11510                        	
11511                        		.dbg	line,	"include\routines_SHOP.c", 123; spr_y(168);
11512                        		__ld.wi		168
         02:C151  A9 A8      			lda.l	#168
         02:C153  C2         			cly
11513                        		__call		_spr_y.1
         02:C154  20 19 E8   			call	_spr_y.1
11514                        	
11515                        		.dbg	line,	"include\routines_SHOP.c", 124; }
11516                        	
11517                        		.dbg	line,	"include\routines_SHOP.c", 125; }
11518    02:C157             	.LL505	.alias		.LL506
11519                        	
11520                        		.dbg	line,	"include\routines_SHOP.c", 128; else if(joytrg(JOYPAD_1) & JOY_I)
11521                        		__bra		.LL506
         02:C157  4C 7D C5   			bra	.LL506
11522    02:C15A             	.LL504:
11523                        		__ld.uiq	0
         02:C15A  62         			cla
11524                        		 _joytrg.1
         02:C15B  AA         			tax
         02:C15C  BD 2D 22   			lda	joytrg, x
         02:C15F  BC DD 22   			ldy	joy6trg, x
11525                        		__tand.wi	1
         02:C162  29 01      			and	#1
         02:C164  C9 01      	!:		cmp	#1
11526                        		__bfalse	.LL507
         02:C166  B0 03 4C 7D			bcc	.LL507
         02:C16A  C5          
11527                        	
11528                        		.dbg	line,	"include\routines_SHOP.c", 129; {
11529                        	
11530                        		.dbg	line,	"include\routines_SHOP.c", 130; switch(item_index)
11531                        		__ld.umq	_item_index
         02:C16B  AD CF 23   			lda	_item_index
11532                        		__bra		.LL508
         02:C16E  4C 5A C5   			bra	.LL508
11533                        	
11534                        		.dbg	line,	"include\routines_SHOP.c", 131; {
11535                        	
11536                        		.dbg	line,	"include\routines_SHOP.c", 132; // WEAPON 2 //
11537                        	
11538                        		.dbg	line,	"include\routines_SHOP.c", 133; case 0:
11539    02:C171             	.LL510:
11540                        		__case		0
11541                        	
11542                        		.dbg	line,	"include\routines_SHOP.c", 134; if(zenny_amount >= shop_prices[0])
11543                        		__ld.wm		_zenny_amount
         02:C171  AD 2C 26   			lda.l	_zenny_amount
         02:C174  AC 2D 26   			ldy.h	_zenny_amount
11544                        		__sge_w.wm	_shop_prices
         02:C177  CD 30 26   			cmp.l	_shop_prices		; Subtract memory from Y:A.
         02:C17A  98         			tya
         02:C17B  ED 31 26   			sbc.h	_shop_prices
         02:C17E  50 02      			bvc	!+
         02:C180  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:C182  49 80      	!:		eor	#$80
         02:C184  0A         			asl	a
11545                        		__bfalse	.LL511
         02:C185  B0 03 4C 7D			bcc	.LL511
         02:C189  C5          
11546                        	
11547                        		.dbg	line,	"include\routines_SHOP.c", 135; {
11548                        	
11549                        		.dbg	line,	"include\routines_SHOP.c", 136; if(weapon_level < 1)
11550                        		__ld.umq	_weapon_level
         02:C18A  AD 24 23   			lda	_weapon_level
11551                        		__ult_b.uiq	1
         02:C18D  C9 01      			cmp	#1		; Subtract integer from A.
         02:C18F  6A         			ror	a		; CC if A < integer.
         02:C190  49 80      			eor	#$80
         02:C192  2A         			rol	a
11552                        		__bfalse	.LL512
         02:C193  B0 03 4C 7D			bcc	.LL512
         02:C197  C5          
11553                        	
11554                        		.dbg	line,	"include\routines_SHOP.c", 137; {
11555                        	
11556                        		.dbg	line,	"include\routines_SHOP.c", 138; weapon_level = 1;
11557                        		__st.umiq	1, _weapon_level
         02:C198  A9 01      			lda.l	#1
         02:C19A  8D 24 23   			sta	_weapon_level
11558                        	
11559                        		.dbg	line,	"include\routines_SHOP.c", 139; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_2, SIZEOF(tileset_WEAPON_2) >> 1 );
11560                        		__st.wmiq	4256, _di
         02:C19D  A9 A0      			lda.l	#4256
         02:C19F  85 F0      			sta.l	_di
         02:C1A1  A9 10      			lda.h	#4256
         02:C1A3  85 F1      			sta.h	_di
11561                        		__farptr	_tileset_WEAPON_2, _bp_bank, _bp
         02:C1A5  A9 80      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_2))
         02:C1A7  85 EC      			sta.l	_bp
         02:C1A9  A9 77      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_2))
         02:C1AB  85 ED      			sta.h	_bp
         02:C1AD  A9 03      			lda	#bank(_tileset_WEAPON_2)
         02:C1AF  85 02      			sta	_bp_bank
11562                        		__ld.wi		___sizeof__tileset_WEAPON_2
         02:C1B1  A9 80      			lda.l	#___sizeof__tileset_WEAPON_2
         02:C1B3  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_2
11563                        		__lsr.wi	1
         02:C1B5  42         			say
         02:C1B6  4A         			lsr	a
         02:C1B7  42         			say
         02:C1B8  6A         			ror	a
11564                        		__st.wmq	_ax
         02:C1B9  85 F8      			sta.l	_ax
         02:C1BB  84 F9      			sty.h	_ax
11565                        		 _load_vram.3
         02:C1BD  82         			clx				; Offset to PCE VDC.
         02:C1BE  20 4F FF   			call	load_vram_x
11566                        	
11567                        		.dbg	line,	"include\routines_SHOP.c", 141; zenny_amount -= shop_prices[0];
11568                        		__ld.wm		_shop_prices
         02:C1C1  AD 30 26   			lda.l	_shop_prices
         02:C1C4  AC 31 26   			ldy.h	_shop_prices
11569                        		__isub_st.wmq	_zenny_amount
         02:C1C7  38         			sec
         02:C1C8  49 FF      			eor	#$FF
         02:C1CA  6D 2C 26   			adc.l	_zenny_amount
         02:C1CD  8D 2C 26   			sta.l	_zenny_amount
         02:C1D0  98         			tya
         02:C1D1  49 FF      			eor	#$FF
         02:C1D3  6D 2D 26   			adc.h	_zenny_amount
         02:C1D6  8D 2D 26   			sta.h	_zenny_amount
11570                        	
11571                        		.dbg	line,	"include\routines_SHOP.c", 142; display_ZENNY();
11572                        		__call		_display_ZENNY
         02:C1D9  20 45 FF   			call	_display_ZENNY
11573                        	
11574                        		.dbg	line,	"include\routines_SHOP.c", 143; }
11575                        	
11576                        		.dbg	line,	"include\routines_SHOP.c", 144; }
11577    02:C1DC             	.LL512	.alias		.LL509
11578                        	
11579                        		.dbg	line,	"include\routines_SHOP.c", 146; break;   
11580    02:C1DC             	.LL511	.alias		.LL509
11581                        		__bra		.LL509
         02:C1DC  4C 7D C5   			bra	.LL509
11582                        	
11583                        		.dbg	line,	"include\routines_SHOP.c", 149; // WEAPON 4 //
11584                        	
11585                        		.dbg	line,	"include\routines_SHOP.c", 150; case 1:
11586    02:C1DF             	.LL513:
11587                        		__case		1
11588                        	
11589                        		.dbg	line,	"include\routines_SHOP.c", 151; if(zenny_amount >= shop_prices[1])
11590                        		__ld.wm		_zenny_amount
         02:C1DF  AD 2C 26   			lda.l	_zenny_amount
         02:C1E2  AC 2D 26   			ldy.h	_zenny_amount
11591                        		__sge_w.wm	_shop_prices + 2
         02:C1E5  CD 32 26   			cmp.l	_shop_prices + 2		; Subtract memory from Y:A.
         02:C1E8  98         			tya
         02:C1E9  ED 33 26   			sbc.h	_shop_prices + 2
         02:C1EC  50 02      			bvc	!+
         02:C1EE  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:C1F0  49 80      	!:		eor	#$80
         02:C1F2  0A         			asl	a
11592                        		__bfalse	.LL514
         02:C1F3  B0 03 4C 7D			bcc	.LL514
         02:C1F7  C5          
11593                        	
11594                        		.dbg	line,	"include\routines_SHOP.c", 152; {
11595                        	
11596                        		.dbg	line,	"include\routines_SHOP.c", 153; if(weapon_level < 2)
11597                        		__ld.umq	_weapon_level
         02:C1F8  AD 24 23   			lda	_weapon_level
11598                        		__ult_b.uiq	2
         02:C1FB  C9 02      			cmp	#2		; Subtract integer from A.
         02:C1FD  6A         			ror	a		; CC if A < integer.
         02:C1FE  49 80      			eor	#$80
         02:C200  2A         			rol	a
11599                        		__bfalse	.LL515
         02:C201  B0 03 4C 7D			bcc	.LL515
         02:C205  C5          
11600                        	
11601                        		.dbg	line,	"include\routines_SHOP.c", 154; {
11602                        	
11603                        		.dbg	line,	"include\routines_SHOP.c", 155; weapon_level = 2;
11604                        		__st.umiq	2, _weapon_level
         02:C206  A9 02      			lda.l	#2
         02:C208  8D 24 23   			sta	_weapon_level
11605                        	
11606                        		.dbg	line,	"include\routines_SHOP.c", 156; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_4, SIZEOF(tileset_WEAPON_4) >> 1 );
11607                        		__st.wmiq	4256, _di
         02:C20B  A9 A0      			lda.l	#4256
         02:C20D  85 F0      			sta.l	_di
         02:C20F  A9 10      			lda.h	#4256
         02:C211  85 F1      			sta.h	_di
11608                        		__farptr	_tileset_WEAPON_4, _bp_bank, _bp
         02:C213  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_4))
         02:C215  85 EC      			sta.l	_bp
         02:C217  A9 78      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_4))
         02:C219  85 ED      			sta.h	_bp
         02:C21B  A9 03      			lda	#bank(_tileset_WEAPON_4)
         02:C21D  85 02      			sta	_bp_bank
11609                        		__ld.wi		___sizeof__tileset_WEAPON_4
         02:C21F  A9 80      			lda.l	#___sizeof__tileset_WEAPON_4
         02:C221  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_4
11610                        		__lsr.wi	1
         02:C223  42         			say
         02:C224  4A         			lsr	a
         02:C225  42         			say
         02:C226  6A         			ror	a
11611                        		__st.wmq	_ax
         02:C227  85 F8      			sta.l	_ax
         02:C229  84 F9      			sty.h	_ax
11612                        		 _load_vram.3
         02:C22B  82         			clx				; Offset to PCE VDC.
         02:C22C  20 4F FF   			call	load_vram_x
11613                        	
11614                        		.dbg	line,	"include\routines_SHOP.c", 158; zenny_amount -= shop_prices[1];
11615                        		__ld.wm		_shop_prices + 2
         02:C22F  AD 32 26   			lda.l	_shop_prices + 2
         02:C232  AC 33 26   			ldy.h	_shop_prices + 2
11616                        		__isub_st.wmq	_zenny_amount
         02:C235  38         			sec
         02:C236  49 FF      			eor	#$FF
         02:C238  6D 2C 26   			adc.l	_zenny_amount
         02:C23B  8D 2C 26   			sta.l	_zenny_amount
         02:C23E  98         			tya
         02:C23F  49 FF      			eor	#$FF
         02:C241  6D 2D 26   			adc.h	_zenny_amount
         02:C244  8D 2D 26   			sta.h	_zenny_amount
11617                        	
11618                        		.dbg	line,	"include\routines_SHOP.c", 159; display_ZENNY();
11619                        		__call		_display_ZENNY
         02:C247  20 45 FF   			call	_display_ZENNY
11620                        	
11621                        		.dbg	line,	"include\routines_SHOP.c", 160; }
11622                        	
11623                        		.dbg	line,	"include\routines_SHOP.c", 161; }
11624    02:C24A             	.LL515	.alias		.LL509
11625                        	
11626                        		.dbg	line,	"include\routines_SHOP.c", 163; break; 
11627    02:C24A             	.LL514	.alias		.LL509
11628                        		__bra		.LL509
         02:C24A  4C 7D C5   			bra	.LL509
11629                        	
11630                        		.dbg	line,	"include\routines_SHOP.c", 166; // WEAPON 5 //
11631                        	
11632                        		.dbg	line,	"include\routines_SHOP.c", 167; case 2:
11633    02:C24D             	.LL516:
11634                        		__case		2
11635                        	
11636                        		.dbg	line,	"include\routines_SHOP.c", 168; if(zenny_amount >= shop_prices[2])
11637                        		__ld.wm		_zenny_amount
         02:C24D  AD 2C 26   			lda.l	_zenny_amount
         02:C250  AC 2D 26   			ldy.h	_zenny_amount
11638                        		__sge_w.wm	_shop_prices + 4
         02:C253  CD 34 26   			cmp.l	_shop_prices + 4		; Subtract memory from Y:A.
         02:C256  98         			tya
         02:C257  ED 35 26   			sbc.h	_shop_prices + 4
         02:C25A  50 02      			bvc	!+
         02:C25C  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:C25E  49 80      	!:		eor	#$80
         02:C260  0A         			asl	a
11639                        		__bfalse	.LL517
         02:C261  B0 03 4C 7D			bcc	.LL517
         02:C265  C5          
11640                        	
11641                        		.dbg	line,	"include\routines_SHOP.c", 169; {
11642                        	
11643                        		.dbg	line,	"include\routines_SHOP.c", 170; if(weapon_level < 3)
11644                        		__ld.umq	_weapon_level
         02:C266  AD 24 23   			lda	_weapon_level
11645                        		__ult_b.uiq	3
         02:C269  C9 03      			cmp	#3		; Subtract integer from A.
         02:C26B  6A         			ror	a		; CC if A < integer.
         02:C26C  49 80      			eor	#$80
         02:C26E  2A         			rol	a
11646                        		__bfalse	.LL518
         02:C26F  B0 03 4C 7D			bcc	.LL518
         02:C273  C5          
11647                        	
11648                        		.dbg	line,	"include\routines_SHOP.c", 171; {
11649                        	
11650                        		.dbg	line,	"include\routines_SHOP.c", 172; weapon_level = 3;
11651                        		__st.umiq	3, _weapon_level
         02:C274  A9 03      			lda.l	#3
         02:C276  8D 24 23   			sta	_weapon_level
11652                        	
11653                        		.dbg	line,	"include\routines_SHOP.c", 173; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_5, SIZEOF(tileset_WEAPON_5) >> 1 );
11654                        		__st.wmiq	4256, _di
         02:C279  A9 A0      			lda.l	#4256
         02:C27B  85 F0      			sta.l	_di
         02:C27D  A9 10      			lda.h	#4256
         02:C27F  85 F1      			sta.h	_di
11655                        		__farptr	_tileset_WEAPON_5, _bp_bank, _bp
         02:C281  A9 80      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_5))
         02:C283  85 EC      			sta.l	_bp
         02:C285  A9 78      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_5))
         02:C287  85 ED      			sta.h	_bp
         02:C289  A9 03      			lda	#bank(_tileset_WEAPON_5)
         02:C28B  85 02      			sta	_bp_bank
11656                        		__ld.wi		___sizeof__tileset_WEAPON_5
         02:C28D  A9 80      			lda.l	#___sizeof__tileset_WEAPON_5
         02:C28F  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_5
11657                        		__lsr.wi	1
         02:C291  42         			say
         02:C292  4A         			lsr	a
         02:C293  42         			say
         02:C294  6A         			ror	a
11658                        		__st.wmq	_ax
         02:C295  85 F8      			sta.l	_ax
         02:C297  84 F9      			sty.h	_ax
11659                        		 _load_vram.3
         02:C299  82         			clx				; Offset to PCE VDC.
         02:C29A  20 4F FF   			call	load_vram_x
11660                        	
11661                        		.dbg	line,	"include\routines_SHOP.c", 175; zenny_amount -= shop_prices[2];
11662                        		__ld.wm		_shop_prices + 4
         02:C29D  AD 34 26   			lda.l	_shop_prices + 4
         02:C2A0  AC 35 26   			ldy.h	_shop_prices + 4
11663                        		__isub_st.wmq	_zenny_amount
         02:C2A3  38         			sec
         02:C2A4  49 FF      			eor	#$FF
         02:C2A6  6D 2C 26   			adc.l	_zenny_amount
         02:C2A9  8D 2C 26   			sta.l	_zenny_amount
         02:C2AC  98         			tya
         02:C2AD  49 FF      			eor	#$FF
         02:C2AF  6D 2D 26   			adc.h	_zenny_amount
         02:C2B2  8D 2D 26   			sta.h	_zenny_amount
11664                        	
11665                        		.dbg	line,	"include\routines_SHOP.c", 176; display_ZENNY();
11666                        		__call		_display_ZENNY
         02:C2B5  20 45 FF   			call	_display_ZENNY
11667                        	
11668                        		.dbg	line,	"include\routines_SHOP.c", 177; }
11669                        	
11670                        		.dbg	line,	"include\routines_SHOP.c", 178; }
11671    02:C2B8             	.LL518	.alias		.LL509
11672                        	
11673                        		.dbg	line,	"include\routines_SHOP.c", 180; break;   
11674    02:C2B8             	.LL517	.alias		.LL509
11675                        		__bra		.LL509
         02:C2B8  4C 7D C5   			bra	.LL509
11676                        	
11677                        		.dbg	line,	"include\routines_SHOP.c", 183; // WEAPON 8 //
11678                        	
11679                        		.dbg	line,	"include\routines_SHOP.c", 184; case 3:
11680    02:C2BB             	.LL519:
11681                        		__case		3
11682                        	
11683                        		.dbg	line,	"include\routines_SHOP.c", 185; if(zenny_amount >= shop_prices[3])
11684                        		__ld.wm		_zenny_amount
         02:C2BB  AD 2C 26   			lda.l	_zenny_amount
         02:C2BE  AC 2D 26   			ldy.h	_zenny_amount
11685                        		__sge_w.wm	_shop_prices + 6
         02:C2C1  CD 36 26   			cmp.l	_shop_prices + 6		; Subtract memory from Y:A.
         02:C2C4  98         			tya
         02:C2C5  ED 37 26   			sbc.h	_shop_prices + 6
         02:C2C8  50 02      			bvc	!+
         02:C2CA  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:C2CC  49 80      	!:		eor	#$80
         02:C2CE  0A         			asl	a
11686                        		__bfalse	.LL520
         02:C2CF  B0 03 4C 7D			bcc	.LL520
         02:C2D3  C5          
11687                        	
11688                        		.dbg	line,	"include\routines_SHOP.c", 186; {
11689                        	
11690                        		.dbg	line,	"include\routines_SHOP.c", 187; if(weapon_level < 4)
11691                        		__ld.umq	_weapon_level
         02:C2D4  AD 24 23   			lda	_weapon_level
11692                        		__ult_b.uiq	4
         02:C2D7  C9 04      			cmp	#4		; Subtract integer from A.
         02:C2D9  6A         			ror	a		; CC if A < integer.
         02:C2DA  49 80      			eor	#$80
         02:C2DC  2A         			rol	a
11693                        		__bfalse	.LL521
         02:C2DD  B0 03 4C 7D			bcc	.LL521
         02:C2E1  C5          
11694                        	
11695                        		.dbg	line,	"include\routines_SHOP.c", 188; {
11696                        	
11697                        		.dbg	line,	"include\routines_SHOP.c", 189; weapon_level = 4;
11698                        		__st.umiq	4, _weapon_level
         02:C2E2  A9 04      			lda.l	#4
         02:C2E4  8D 24 23   			sta	_weapon_level
11699                        	
11700                        		.dbg	line,	"include\routines_SHOP.c", 190; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_8, SIZEOF(tileset_WEAPON_8) >> 1 );
11701                        		__st.wmiq	4256, _di
         02:C2E7  A9 A0      			lda.l	#4256
         02:C2E9  85 F0      			sta.l	_di
         02:C2EB  A9 10      			lda.h	#4256
         02:C2ED  85 F1      			sta.h	_di
11702                        		__farptr	_tileset_WEAPON_8, _bp_bank, _bp
         02:C2EF  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_8))
         02:C2F1  85 EC      			sta.l	_bp
         02:C2F3  A9 79      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_8))
         02:C2F5  85 ED      			sta.h	_bp
         02:C2F7  A9 03      			lda	#bank(_tileset_WEAPON_8)
         02:C2F9  85 02      			sta	_bp_bank
11703                        		__ld.wi		___sizeof__tileset_WEAPON_8
         02:C2FB  A9 80      			lda.l	#___sizeof__tileset_WEAPON_8
         02:C2FD  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_8
11704                        		__lsr.wi	1
         02:C2FF  42         			say
         02:C300  4A         			lsr	a
         02:C301  42         			say
         02:C302  6A         			ror	a
11705                        		__st.wmq	_ax
         02:C303  85 F8      			sta.l	_ax
         02:C305  84 F9      			sty.h	_ax
11706                        		 _load_vram.3
         02:C307  82         			clx				; Offset to PCE VDC.
         02:C308  20 4F FF   			call	load_vram_x
11707                        	
11708                        		.dbg	line,	"include\routines_SHOP.c", 192; zenny_amount -= shop_prices[3];
11709                        		__ld.wm		_shop_prices + 6
         02:C30B  AD 36 26   			lda.l	_shop_prices + 6
         02:C30E  AC 37 26   			ldy.h	_shop_prices + 6
11710                        		__isub_st.wmq	_zenny_amount
         02:C311  38         			sec
         02:C312  49 FF      			eor	#$FF
         02:C314  6D 2C 26   			adc.l	_zenny_amount
         02:C317  8D 2C 26   			sta.l	_zenny_amount
         02:C31A  98         			tya
         02:C31B  49 FF      			eor	#$FF
         02:C31D  6D 2D 26   			adc.h	_zenny_amount
         02:C320  8D 2D 26   			sta.h	_zenny_amount
11711                        	
11712                        		.dbg	line,	"include\routines_SHOP.c", 193; display_ZENNY();
11713                        		__call		_display_ZENNY
         02:C323  20 45 FF   			call	_display_ZENNY
11714                        	
11715                        		.dbg	line,	"include\routines_SHOP.c", 194; }
11716                        	
11717                        		.dbg	line,	"include\routines_SHOP.c", 195; }
11718    02:C326             	.LL521	.alias		.LL509
11719                        	
11720                        		.dbg	line,	"include\routines_SHOP.c", 197; break;  
11721    02:C326             	.LL520	.alias		.LL509
11722                        		__bra		.LL509
         02:C326  4C 7D C5   			bra	.LL509
11723                        	
11724                        		.dbg	line,	"include\routines_SHOP.c", 200; // KEY //
11725                        	
11726                        		.dbg	line,	"include\routines_SHOP.c", 201; case 4:
11727    02:C329             	.LL522:
11728                        		__case		4
11729                        	
11730                        		.dbg	line,	"include\routines_SHOP.c", 202; if(zenny_amount >= shop_prices[4])
11731                        		__ld.wm		_zenny_amount
         02:C329  AD 2C 26   			lda.l	_zenny_amount
         02:C32C  AC 2D 26   			ldy.h	_zenny_amount
11732                        		__sge_w.wm	_shop_prices + 8
         02:C32F  CD 38 26   			cmp.l	_shop_prices + 8		; Subtract memory from Y:A.
         02:C332  98         			tya
         02:C333  ED 39 26   			sbc.h	_shop_prices + 8
         02:C336  50 02      			bvc	!+
         02:C338  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:C33A  49 80      	!:		eor	#$80
         02:C33C  0A         			asl	a
11733                        		__bfalse	.LL523
         02:C33D  B0 03 4C 7D			bcc	.LL523
         02:C341  C5          
11734                        	
11735                        		.dbg	line,	"include\routines_SHOP.c", 203; {
11736                        	
11737                        		.dbg	line,	"include\routines_SHOP.c", 204; key_amount += 1;
11738                        		__add_st.umiq	1, _key_amount
         02:C342  EE 26 23   			inc	_key_amount
11739                        	
11740                        		.dbg	line,	"include\routines_SHOP.c", 206; zenny_amount -= shop_prices[4];
11741                        		__ld.wm		_shop_prices + 8
         02:C345  AD 38 26   			lda.l	_shop_prices + 8
         02:C348  AC 39 26   			ldy.h	_shop_prices + 8
11742                        		__isub_st.wmq	_zenny_amount
         02:C34B  38         			sec
         02:C34C  49 FF      			eor	#$FF
         02:C34E  6D 2C 26   			adc.l	_zenny_amount
         02:C351  8D 2C 26   			sta.l	_zenny_amount
         02:C354  98         			tya
         02:C355  49 FF      			eor	#$FF
         02:C357  6D 2D 26   			adc.h	_zenny_amount
         02:C35A  8D 2D 26   			sta.h	_zenny_amount
11743                        	
11744                        		.dbg	line,	"include\routines_SHOP.c", 207; display_KEY();
11745                        		__call		_display_KEY
         02:C35D  20 8B FF   			call	_display_KEY
11746                        	
11747                        		.dbg	line,	"include\routines_SHOP.c", 208; }
11748                        	
11749                        		.dbg	line,	"include\routines_SHOP.c", 210; break;   
11750    02:C360             	.LL523	.alias		.LL509
11751                        		__bra		.LL509
         02:C360  4C 7D C5   			bra	.LL509
11752                        	
11753                        		.dbg	line,	"include\routines_SHOP.c", 213; // ARMOR 1 //
11754                        	
11755                        		.dbg	line,	"include\routines_SHOP.c", 214; case 5:
11756    02:C363             	.LL524:
11757                        		__case		5
11758                        	
11759                        		.dbg	line,	"include\routines_SHOP.c", 215; if(zenny_amount >= shop_prices[5])
11760                        		__ld.wm		_zenny_amount
         02:C363  AD 2C 26   			lda.l	_zenny_amount
         02:C366  AC 2D 26   			ldy.h	_zenny_amount
11761                        		__sge_w.wm	_shop_prices + 10
         02:C369  CD 3A 26   			cmp.l	_shop_prices + 10		; Subtract memory from Y:A.
         02:C36C  98         			tya
         02:C36D  ED 3B 26   			sbc.h	_shop_prices + 10
         02:C370  50 02      			bvc	!+
         02:C372  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:C374  49 80      	!:		eor	#$80
         02:C376  0A         			asl	a
11762                        		__bfalse	.LL525
         02:C377  B0 03 4C 7D			bcc	.LL525
         02:C37B  C5          
11763                        	
11764                        		.dbg	line,	"include\routines_SHOP.c", 216; {
11765                        	
11766                        		.dbg	line,	"include\routines_SHOP.c", 217; if(armor_level < 1)
11767                        		__ld.umq	_armor_level
         02:C37C  AD 23 23   			lda	_armor_level
11768                        		__ult_b.uiq	1
         02:C37F  C9 01      			cmp	#1		; Subtract integer from A.
         02:C381  6A         			ror	a		; CC if A < integer.
         02:C382  49 80      			eor	#$80
         02:C384  2A         			rol	a
11769                        		__bfalse	.LL526
         02:C385  B0 03 4C 7D			bcc	.LL526
         02:C389  C5          
11770                        	
11771                        		.dbg	line,	"include\routines_SHOP.c", 218; {
11772                        	
11773                        		.dbg	line,	"include\routines_SHOP.c", 219; armor_level = 1;
11774                        		__st.umiq	1, _armor_level
         02:C38A  A9 01      			lda.l	#1
         02:C38C  8D 23 23   			sta	_armor_level
11775                        	
11776                        		.dbg	line,	"include\routines_SHOP.c", 220; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_1, SIZEOF(tileset_ARMOR_1) >> 1 );
11777                        		__st.wmiq	4320, _di
         02:C38F  A9 E0      			lda.l	#4320
         02:C391  85 F0      			sta.l	_di
         02:C393  A9 10      			lda.h	#4320
         02:C395  85 F1      			sta.h	_di
11778                        		__farptr	_tileset_ARMOR_1, _bp_bank, _bp
         02:C397  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_1))
         02:C399  85 EC      			sta.l	_bp
         02:C39B  A9 75      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_1))
         02:C39D  85 ED      			sta.h	_bp
         02:C39F  A9 03      			lda	#bank(_tileset_ARMOR_1)
         02:C3A1  85 02      			sta	_bp_bank
11779                        		__ld.wi		___sizeof__tileset_ARMOR_1
         02:C3A3  A9 80      			lda.l	#___sizeof__tileset_ARMOR_1
         02:C3A5  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_1
11780                        		__lsr.wi	1
         02:C3A7  42         			say
         02:C3A8  4A         			lsr	a
         02:C3A9  42         			say
         02:C3AA  6A         			ror	a
11781                        		__st.wmq	_ax
         02:C3AB  85 F8      			sta.l	_ax
         02:C3AD  84 F9      			sty.h	_ax
11782                        		 _load_vram.3
         02:C3AF  82         			clx				; Offset to PCE VDC.
         02:C3B0  20 4F FF   			call	load_vram_x
11783                        	
11784                        		.dbg	line,	"include\routines_SHOP.c", 222; zenny_amount -= shop_prices[5];
11785                        		__ld.wm		_shop_prices + 10
         02:C3B3  AD 3A 26   			lda.l	_shop_prices + 10
         02:C3B6  AC 3B 26   			ldy.h	_shop_prices + 10
11786                        		__isub_st.wmq	_zenny_amount
         02:C3B9  38         			sec
         02:C3BA  49 FF      			eor	#$FF
         02:C3BC  6D 2C 26   			adc.l	_zenny_amount
         02:C3BF  8D 2C 26   			sta.l	_zenny_amount
         02:C3C2  98         			tya
         02:C3C3  49 FF      			eor	#$FF
         02:C3C5  6D 2D 26   			adc.h	_zenny_amount
         02:C3C8  8D 2D 26   			sta.h	_zenny_amount
11787                        	
11788                        		.dbg	line,	"include\routines_SHOP.c", 223; display_ZENNY();
11789                        		__call		_display_ZENNY
         02:C3CB  20 45 FF   			call	_display_ZENNY
11790                        	
11791                        		.dbg	line,	"include\routines_SHOP.c", 224; }
11792                        	
11793                        		.dbg	line,	"include\routines_SHOP.c", 225; }
11794    02:C3CE             	.LL526	.alias		.LL509
11795                        	
11796                        		.dbg	line,	"include\routines_SHOP.c", 227; break;   
11797    02:C3CE             	.LL525	.alias		.LL509
11798                        		__bra		.LL509
         02:C3CE  4C 7D C5   			bra	.LL509
11799                        	
11800                        		.dbg	line,	"include\routines_SHOP.c", 230; // ARMOR 2 //
11801                        	
11802                        		.dbg	line,	"include\routines_SHOP.c", 231; case 6:
11803    02:C3D1             	.LL527:
11804                        		__case		6
11805                        	
11806                        		.dbg	line,	"include\routines_SHOP.c", 232; if(zenny_amount >= shop_prices[6])
11807                        		__ld.wm		_zenny_amount
         02:C3D1  AD 2C 26   			lda.l	_zenny_amount
         02:C3D4  AC 2D 26   			ldy.h	_zenny_amount
11808                        		__sge_w.wm	_shop_prices + 12
         02:C3D7  CD 3C 26   			cmp.l	_shop_prices + 12		; Subtract memory from Y:A.
         02:C3DA  98         			tya
         02:C3DB  ED 3D 26   			sbc.h	_shop_prices + 12
         02:C3DE  50 02      			bvc	!+
         02:C3E0  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:C3E2  49 80      	!:		eor	#$80
         02:C3E4  0A         			asl	a
11809                        		__bfalse	.LL528
         02:C3E5  B0 03 4C 7D			bcc	.LL528
         02:C3E9  C5          
11810                        	
11811                        		.dbg	line,	"include\routines_SHOP.c", 233; {
11812                        	
11813                        		.dbg	line,	"include\routines_SHOP.c", 234; if(armor_level < 4)
11814                        		__ld.umq	_armor_level
         02:C3EA  AD 23 23   			lda	_armor_level
11815                        		__ult_b.uiq	4
         02:C3ED  C9 04      			cmp	#4		; Subtract integer from A.
         02:C3EF  6A         			ror	a		; CC if A < integer.
         02:C3F0  49 80      			eor	#$80
         02:C3F2  2A         			rol	a
11816                        		__bfalse	.LL529
         02:C3F3  B0 03 4C 7D			bcc	.LL529
         02:C3F7  C5          
11817                        	
11818                        		.dbg	line,	"include\routines_SHOP.c", 235; {
11819                        	
11820                        		.dbg	line,	"include\routines_SHOP.c", 236; armor_level = 4;
11821                        		__st.umiq	4, _armor_level
         02:C3F8  A9 04      			lda.l	#4
         02:C3FA  8D 23 23   			sta	_armor_level
11822                        	
11823                        		.dbg	line,	"include\routines_SHOP.c", 237; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_2, SIZEOF(tileset_ARMOR_2) >> 1 );
11824                        		__st.wmiq	4320, _di
         02:C3FD  A9 E0      			lda.l	#4320
         02:C3FF  85 F0      			sta.l	_di
         02:C401  A9 10      			lda.h	#4320
         02:C403  85 F1      			sta.h	_di
11825                        		__farptr	_tileset_ARMOR_2, _bp_bank, _bp
         02:C405  A9 80      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_2))
         02:C407  85 EC      			sta.l	_bp
         02:C409  A9 75      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_2))
         02:C40B  85 ED      			sta.h	_bp
         02:C40D  A9 03      			lda	#bank(_tileset_ARMOR_2)
         02:C40F  85 02      			sta	_bp_bank
11826                        		__ld.wi		___sizeof__tileset_ARMOR_2
         02:C411  A9 80      			lda.l	#___sizeof__tileset_ARMOR_2
         02:C413  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_2
11827                        		__lsr.wi	1
         02:C415  42         			say
         02:C416  4A         			lsr	a
         02:C417  42         			say
         02:C418  6A         			ror	a
11828                        		__st.wmq	_ax
         02:C419  85 F8      			sta.l	_ax
         02:C41B  84 F9      			sty.h	_ax
11829                        		 _load_vram.3
         02:C41D  82         			clx				; Offset to PCE VDC.
         02:C41E  20 4F FF   			call	load_vram_x
11830                        	
11831                        		.dbg	line,	"include\routines_SHOP.c", 239; zenny_amount -= shop_prices[6];
11832                        		__ld.wm		_shop_prices + 12
         02:C421  AD 3C 26   			lda.l	_shop_prices + 12
         02:C424  AC 3D 26   			ldy.h	_shop_prices + 12
11833                        		__isub_st.wmq	_zenny_amount
         02:C427  38         			sec
         02:C428  49 FF      			eor	#$FF
         02:C42A  6D 2C 26   			adc.l	_zenny_amount
         02:C42D  8D 2C 26   			sta.l	_zenny_amount
         02:C430  98         			tya
         02:C431  49 FF      			eor	#$FF
         02:C433  6D 2D 26   			adc.h	_zenny_amount
         02:C436  8D 2D 26   			sta.h	_zenny_amount
11834                        	
11835                        		.dbg	line,	"include\routines_SHOP.c", 240; display_ZENNY();
11836                        		__call		_display_ZENNY
         02:C439  20 45 FF   			call	_display_ZENNY
11837                        	
11838                        		.dbg	line,	"include\routines_SHOP.c", 241; }
11839                        	
11840                        		.dbg	line,	"include\routines_SHOP.c", 242; }
11841    02:C43C             	.LL529	.alias		.LL509
11842                        	
11843                        		.dbg	line,	"include\routines_SHOP.c", 244; break;    
11844    02:C43C             	.LL528	.alias		.LL509
11845                        		__bra		.LL509
         02:C43C  4C 7D C5   			bra	.LL509
11846                        	
11847                        		.dbg	line,	"include\routines_SHOP.c", 247; // ARMOR 4 //
11848                        	
11849                        		.dbg	line,	"include\routines_SHOP.c", 248; case 7:
11850    02:C43F             	.LL530:
11851                        		__case		7
11852                        	
11853                        		.dbg	line,	"include\routines_SHOP.c", 249; if(zenny_amount >= shop_prices[7])
11854                        		__ld.wm		_zenny_amount
         02:C43F  AD 2C 26   			lda.l	_zenny_amount
         02:C442  AC 2D 26   			ldy.h	_zenny_amount
11855                        		__sge_w.wm	_shop_prices + 14
         02:C445  CD 3E 26   			cmp.l	_shop_prices + 14		; Subtract memory from Y:A.
         02:C448  98         			tya
         02:C449  ED 3F 26   			sbc.h	_shop_prices + 14
         02:C44C  50 02      			bvc	!+
         02:C44E  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:C450  49 80      	!:		eor	#$80
         02:C452  0A         			asl	a
11856                        		__bfalse	.LL531
         02:C453  B0 03 4C 7D			bcc	.LL531
         02:C457  C5          
11857                        	
11858                        		.dbg	line,	"include\routines_SHOP.c", 250; {
11859                        	
11860                        		.dbg	line,	"include\routines_SHOP.c", 251; if(armor_level < 5)
11861                        		__ld.umq	_armor_level
         02:C458  AD 23 23   			lda	_armor_level
11862                        		__ult_b.uiq	5
         02:C45B  C9 05      			cmp	#5		; Subtract integer from A.
         02:C45D  6A         			ror	a		; CC if A < integer.
         02:C45E  49 80      			eor	#$80
         02:C460  2A         			rol	a
11863                        		__bfalse	.LL532
         02:C461  B0 03 4C 7D			bcc	.LL532
         02:C465  C5          
11864                        	
11865                        		.dbg	line,	"include\routines_SHOP.c", 252; {
11866                        	
11867                        		.dbg	line,	"include\routines_SHOP.c", 253; armor_level = 5;
11868                        		__st.umiq	5, _armor_level
         02:C466  A9 05      			lda.l	#5
         02:C468  8D 23 23   			sta	_armor_level
11869                        	
11870                        		.dbg	line,	"include\routines_SHOP.c", 254; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_4, SIZEOF(tileset_ARMOR_4) >> 1 );
11871                        		__st.wmiq	4320, _di
         02:C46B  A9 E0      			lda.l	#4320
         02:C46D  85 F0      			sta.l	_di
         02:C46F  A9 10      			lda.h	#4320
         02:C471  85 F1      			sta.h	_di
11872                        		__farptr	_tileset_ARMOR_4, _bp_bank, _bp
         02:C473  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_4))
         02:C475  85 EC      			sta.l	_bp
         02:C477  A9 76      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_4))
         02:C479  85 ED      			sta.h	_bp
         02:C47B  A9 03      			lda	#bank(_tileset_ARMOR_4)
         02:C47D  85 02      			sta	_bp_bank
11873                        		__ld.wi		___sizeof__tileset_ARMOR_4
         02:C47F  A9 80      			lda.l	#___sizeof__tileset_ARMOR_4
         02:C481  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_4
11874                        		__lsr.wi	1
         02:C483  42         			say
         02:C484  4A         			lsr	a
         02:C485  42         			say
         02:C486  6A         			ror	a
11875                        		__st.wmq	_ax
         02:C487  85 F8      			sta.l	_ax
         02:C489  84 F9      			sty.h	_ax
11876                        		 _load_vram.3
         02:C48B  82         			clx				; Offset to PCE VDC.
         02:C48C  20 4F FF   			call	load_vram_x
11877                        	
11878                        		.dbg	line,	"include\routines_SHOP.c", 256; zenny_amount -= shop_prices[7];
11879                        		__ld.wm		_shop_prices + 14
         02:C48F  AD 3E 26   			lda.l	_shop_prices + 14
         02:C492  AC 3F 26   			ldy.h	_shop_prices + 14
11880                        		__isub_st.wmq	_zenny_amount
         02:C495  38         			sec
         02:C496  49 FF      			eor	#$FF
         02:C498  6D 2C 26   			adc.l	_zenny_amount
         02:C49B  8D 2C 26   			sta.l	_zenny_amount
         02:C49E  98         			tya
         02:C49F  49 FF      			eor	#$FF
         02:C4A1  6D 2D 26   			adc.h	_zenny_amount
         02:C4A4  8D 2D 26   			sta.h	_zenny_amount
11881                        	
11882                        		.dbg	line,	"include\routines_SHOP.c", 257; display_ZENNY();
11883                        		__call		_display_ZENNY
         02:C4A7  20 45 FF   			call	_display_ZENNY
11884                        	
11885                        		.dbg	line,	"include\routines_SHOP.c", 258; }
11886                        	
11887                        		.dbg	line,	"include\routines_SHOP.c", 259; }
11888    02:C4AA             	.LL532	.alias		.LL509
11889                        	
11890                        		.dbg	line,	"include\routines_SHOP.c", 261; break;   
11891    02:C4AA             	.LL531	.alias		.LL509
11892                        		__bra		.LL509
         02:C4AA  4C 7D C5   			bra	.LL509
11893                        	
11894                        		.dbg	line,	"include\routines_SHOP.c", 264; // ARMOR 8 //
11895                        	
11896                        		.dbg	line,	"include\routines_SHOP.c", 265; case 8:
11897    02:C4AD             	.LL533:
11898                        		__case		8
11899                        	
11900                        		.dbg	line,	"include\routines_SHOP.c", 266; if(zenny_amount >= shop_prices[8])
11901                        		__ld.wm		_zenny_amount
         02:C4AD  AD 2C 26   			lda.l	_zenny_amount
         02:C4B0  AC 2D 26   			ldy.h	_zenny_amount
11902                        		__sge_w.wm	_shop_prices + 16
         02:C4B3  CD 40 26   			cmp.l	_shop_prices + 16		; Subtract memory from Y:A.
         02:C4B6  98         			tya
         02:C4B7  ED 41 26   			sbc.h	_shop_prices + 16
         02:C4BA  50 02      			bvc	!+
         02:C4BC  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:C4BE  49 80      	!:		eor	#$80
         02:C4C0  0A         			asl	a
11903                        		__bfalse	.LL534
         02:C4C1  B0 03 4C 7D			bcc	.LL534
         02:C4C5  C5          
11904                        	
11905                        		.dbg	line,	"include\routines_SHOP.c", 267; {
11906                        	
11907                        		.dbg	line,	"include\routines_SHOP.c", 268; if(armor_level < 8)
11908                        		__ld.umq	_armor_level
         02:C4C6  AD 23 23   			lda	_armor_level
11909                        		__ult_b.uiq	8
         02:C4C9  C9 08      			cmp	#8		; Subtract integer from A.
         02:C4CB  6A         			ror	a		; CC if A < integer.
         02:C4CC  49 80      			eor	#$80
         02:C4CE  2A         			rol	a
11910                        		__bfalse	.LL535
         02:C4CF  B0 03 4C 7D			bcc	.LL535
         02:C4D3  C5          
11911                        	
11912                        		.dbg	line,	"include\routines_SHOP.c", 269; {
11913                        	
11914                        		.dbg	line,	"include\routines_SHOP.c", 270; armor_level = 8;
11915                        		__st.umiq	8, _armor_level
         02:C4D4  A9 08      			lda.l	#8
         02:C4D6  8D 23 23   			sta	_armor_level
11916                        	
11917                        		.dbg	line,	"include\routines_SHOP.c", 271; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_8, SIZEOF(tileset_ARMOR_8) >> 1 );
11918                        		__st.wmiq	4320, _di
         02:C4D9  A9 E0      			lda.l	#4320
         02:C4DB  85 F0      			sta.l	_di
         02:C4DD  A9 10      			lda.h	#4320
         02:C4DF  85 F1      			sta.h	_di
11919                        		__farptr	_tileset_ARMOR_8, _bp_bank, _bp
         02:C4E1  A9 80      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_8))
         02:C4E3  85 EC      			sta.l	_bp
         02:C4E5  A9 76      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_8))
         02:C4E7  85 ED      			sta.h	_bp
         02:C4E9  A9 03      			lda	#bank(_tileset_ARMOR_8)
         02:C4EB  85 02      			sta	_bp_bank
11920                        		__ld.wi		___sizeof__tileset_ARMOR_8
         02:C4ED  A9 80      			lda.l	#___sizeof__tileset_ARMOR_8
         02:C4EF  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_8
11921                        		__lsr.wi	1
         02:C4F1  42         			say
         02:C4F2  4A         			lsr	a
         02:C4F3  42         			say
         02:C4F4  6A         			ror	a
11922                        		__st.wmq	_ax
         02:C4F5  85 F8      			sta.l	_ax
         02:C4F7  84 F9      			sty.h	_ax
11923                        		 _load_vram.3
         02:C4F9  82         			clx				; Offset to PCE VDC.
         02:C4FA  20 4F FF   			call	load_vram_x
11924                        	
11925                        		.dbg	line,	"include\routines_SHOP.c", 273; zenny_amount -= shop_prices[8];
11926                        		__ld.wm		_shop_prices + 16
         02:C4FD  AD 40 26   			lda.l	_shop_prices + 16
         02:C500  AC 41 26   			ldy.h	_shop_prices + 16
11927                        		__isub_st.wmq	_zenny_amount
         02:C503  38         			sec
         02:C504  49 FF      			eor	#$FF
         02:C506  6D 2C 26   			adc.l	_zenny_amount
         02:C509  8D 2C 26   			sta.l	_zenny_amount
         02:C50C  98         			tya
         02:C50D  49 FF      			eor	#$FF
         02:C50F  6D 2D 26   			adc.h	_zenny_amount
         02:C512  8D 2D 26   			sta.h	_zenny_amount
11928                        	
11929                        		.dbg	line,	"include\routines_SHOP.c", 274; display_ZENNY();
11930                        		__call		_display_ZENNY
         02:C515  20 45 FF   			call	_display_ZENNY
11931                        	
11932                        		.dbg	line,	"include\routines_SHOP.c", 275; }
11933                        	
11934                        		.dbg	line,	"include\routines_SHOP.c", 276; }
11935    02:C518             	.LL535	.alias		.LL509
11936                        	
11937                        		.dbg	line,	"include\routines_SHOP.c", 278; break;   
11938    02:C518             	.LL534	.alias		.LL509
11939                        		__bra		.LL509
         02:C518  80 63      			bra	.LL509
11940                        	
11941                        		.dbg	line,	"include\routines_SHOP.c", 281; // POTION //
11942                        	
11943                        		.dbg	line,	"include\routines_SHOP.c", 282; case 9:
11944    02:C51A             	.LL536:
11945                        		__case		9
11946                        	
11947                        		.dbg	line,	"include\routines_SHOP.c", 283; if(zenny_amount >= shop_prices[9])
11948                        		__ld.wm		_zenny_amount
         02:C51A  AD 2C 26   			lda.l	_zenny_amount
         02:C51D  AC 2D 26   			ldy.h	_zenny_amount
11949                        		__sge_w.wm	_shop_prices + 18
         02:C520  CD 42 26   			cmp.l	_shop_prices + 18		; Subtract memory from Y:A.
         02:C523  98         			tya
         02:C524  ED 43 26   			sbc.h	_shop_prices + 18
         02:C527  50 02      			bvc	!+
         02:C529  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:C52B  49 80      	!:		eor	#$80
         02:C52D  0A         			asl	a
11950                        		__bfalse	.LL537
         02:C52E  90 4D      			bcc	.LL537
11951                        	
11952                        		.dbg	line,	"include\routines_SHOP.c", 284; {
11953                        	
11954                        		.dbg	line,	"include\routines_SHOP.c", 285; potion_amount += 1;
11955                        		__add_st.umiq	1, _potion_amount
         02:C530  EE 27 23   			inc	_potion_amount
11956                        	
11957                        		.dbg	line,	"include\routines_SHOP.c", 287; zenny_amount -= shop_prices[9];
11958                        		__ld.wm		_shop_prices + 18
         02:C533  AD 42 26   			lda.l	_shop_prices + 18
         02:C536  AC 43 26   			ldy.h	_shop_prices + 18
11959                        		__isub_st.wmq	_zenny_amount
         02:C539  38         			sec
         02:C53A  49 FF      			eor	#$FF
         02:C53C  6D 2C 26   			adc.l	_zenny_amount
         02:C53F  8D 2C 26   			sta.l	_zenny_amount
         02:C542  98         			tya
         02:C543  49 FF      			eor	#$FF
         02:C545  6D 2D 26   			adc.h	_zenny_amount
         02:C548  8D 2D 26   			sta.h	_zenny_amount
11960                        	
11961                        		.dbg	line,	"include\routines_SHOP.c", 288; display_POTION();
11962                        		__call		_display_POTION
         02:C54B  20 3B FF   			call	_display_POTION
11963                        	
11964                        		.dbg	line,	"include\routines_SHOP.c", 289; }
11965                        	
11966                        		.dbg	line,	"include\routines_SHOP.c", 291; break;   
11967    02:C54E             	.LL537	.alias		.LL509
11968                        		__bra		.LL509
         02:C54E  80 2D      			bra	.LL509
11969                        	
11970                        		.dbg	line,	"include\routines_SHOP.c", 294; // EXIT //
11971                        	
11972                        		.dbg	line,	"include\routines_SHOP.c", 295; case 10:
11973    02:C550             	.LL538:
11974                        		__case		10
11975                        	
11976                        		.dbg	line,	"include\routines_SHOP.c", 296; shop_counter = 0;    
11977                        		__st.umiq	0, _shop_counter
         02:C550  9C D1 23   			stz	_shop_counter
11978                        	
11979                        		.dbg	line,	"include\routines_SHOP.c", 297; shop_phase = SHOP_PHASE_EXIT;
11980                        		__st.umiq	2, _shop_phase
         02:C553  A9 02      			lda.l	#2
         02:C555  8D D0 23   			sta	_shop_phase
11981                        	
11982                        		.dbg	line,	"include\routines_SHOP.c", 299; break;                  
11983                        		__bra		.LL509
         02:C558  80 23      			bra	.LL509
11984                        	
11985                        		.dbg	line,	"include\routines_SHOP.c", 300; }
11986    02:C55A             	.LL508:
11987                        		__switch_r.ur	0, 10
         02:C55A  C9 0B      			cmp	#(10 - 0) + 1
         02:C55C  90 02      			bcc	!found+
         02:C55E  A9 0B      	!default:	lda	#(10 - 0) + 1
         02:C560  0A         	!found:		asl	a
         02:C561  AA         			tax
         02:C562  7C 65 C5   			jmp	[!table+, x]
11988                        	
11989    02:C565  71 C1      	!table:		dw	.LL510, .LL513, .LL516, .LL519, .LL522, .LL524, .LL527, .LL530
         02:C567  DF C1       
         02:C569  4D C2       
         02:C56B  BB C2       
         02:C56D  29 C3       
         02:C56F  63 C3       
         02:C571  D1 C3       
         02:C573  3F C4       
11990    02:C575  AD C4      			dw	.LL533, .LL536, .LL538
         02:C577  1A C5       
         02:C579  50 C5       
11991    02:C57B  7D C5      			dw	.LL509
11992    02:C57D             	.LL509:
11993                        	
11994                        		.dbg	line,	"include\routines_SHOP.c", 301; }
11995                        	
11996                        		.dbg	line,	"include\routines_SHOP.c", 302; }
11997    02:C57D             	.LL507:
11998    02:C57D             	.LL506:
11999    02:C57D             	.LL503:
12000    02:C57D             	.LL499:
12001    02:C57D             	.LL496:
12002    02:C57D             	.LL491:
12003                        		__return	0
         02:C57D  4C EF FF   			jmp	leave_proc
12004                        		.dbg	clear
12005                        		.endp
12006               6860     		.data
12007               230D     		.bss
12008    F8:230D             	__joypad_BUTTONS_SHOP_loc:
12009    F8:230D             			ds	1
12010    F8:230E             	__joypad_BUTTONS_SHOP_end:
12011               E309     		.code
12012                        		.pceas
12013                        	
12014                        		.dbg	line,	"main.c", 24; #include "include/init.c"
12015                        		.dbg	line,	"include\init.c", 1; #include "huc.h"
12016                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
12017                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
12018                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
12019                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
12020                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
12021                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
12022                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
12023                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
12024                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
12025                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
12026                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
12027                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
12028                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
12029                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
12030                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
12031                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
12032                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
12033                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
12034                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
12035                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
12036                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
12037                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
12038                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
12039                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
12040                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
12041                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
12042                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
12043                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
12044                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
12045                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
12046                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
12047                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
12048                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
12049                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
12050                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
12051                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
12052                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
12053                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
12054                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
12055                        		.dbg	line,	"include\init.c", 2; #include "hucc-scroll.h"
12056                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 1; #ifndef _hucc_scroll_h
12057                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 2; #define _hucc_scroll_h
12058                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 4; /****************************************************************************
12059                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 5; ; ***************************************************************************
12060                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 6; ;
12061                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 7; ; hucc-scroll.h
12062                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 8; ;
12063                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 9; ; Routines for a fast split-screen scrolling system.
12064                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 10; ;
12065                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 11; ; Copyright John Brandwood 2024.
12066                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 12; ;
12067                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 13; ; Distributed under the Boost Software License, Version 1.0.
12068                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
12069                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
12070                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 16; ;
12071                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 17; ; ***************************************************************************
12072                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 18; ; ***************************************************************************
12073                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 19; ;
12074                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 20; ; The maximum number of splits for each screen layer is set in your project's
12075                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 21; ; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
12076                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 22; ;
12077                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 23; ; Your first active split must be defined to start at screen line 0, and then
12078                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 24; ; the rest of the active splits must be in increasing line order to match the
12079                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 25; ; way that the PC Engine displays the output image.
12080                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 26; ;
12081                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 27; ; You can have disabled splits interleaved with your active splits.
12082                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 28; ;
12083                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 29; ; Splits that are normally disabled can be used to create full screen effects
12084                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 30; ; such as bouncing the screen up and down by adding blank areas at the top or
12085                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 31; ; bottom of the screen, and then rapidly changing the height of those areas.
12086                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 32; ;
12087                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 33; ; ***************************************************************************
12088                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 34; ; **************************************************************************/
12089                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 36; // *************
12090                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 37; // VDC bits for display_flags ...
12091                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 38; // *************
12092                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 40; #ifndef BKG_OFF
12093                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 41; #define BKG_OFF 0x00
12094                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 42; #endif
12095                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 44; #ifndef SPR_OFF
12096                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 45; #define SPR_OFF 0x00
12097                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 46; #endif
12098                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 48; #ifndef BKG_ON
12099                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 49; #define BKG_ON 0x80
12100                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 50; #endif
12101                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 52; #ifndef SPR_ON
12102                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 53; #define SPR_ON 0x40
12103                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 54; #endif
12104                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 56; // *************
12105                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 57; // Functions in hucc-scroll.asm ...
12106                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 58; // *************
12107                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 60; #ifdef __HUCC__
12108                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 62; #asmdef	HUCC_USES_NEW_SCROLL 1
12109                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 64; extern void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
12110                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 65; extern void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
12111                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 67; extern void __fastcall disable_split( unsigned char index<acc> );
12112                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 68; extern void __fastcall sgx_disable_split( unsigned char index<acc> );
12113                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 70; extern void __fastcall __macro disable_all_splits( void );
12114                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 71; extern void __fastcall __macro sgx_disable_all_splits( void );
12115                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 73; #asm
12116                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 74; .macro	_disable_all_splits
12117                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 75; ldy	#HUCC_PCE_SPLITS - 1
12118                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 76; !loop:		tya
12119                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 77; call	_disable_split.1
12120                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 78; dey
12121                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 79; bpl	!loop-
12122                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 80; .endm
12123                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 82; .macro	_sgx_disable_all_splits
12124                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 83; ldy	#HUCC_SGX_SPLITS - 1
12125                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 84; !loop:		tya
12126                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 85; call	_sgx_disable_split.1
12127                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 86; dey
12128                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 87; bpl	!loop-
12129                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 88; .endm
12130                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 89; #endasm
12131                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 91; #endif // __HUCC__
12132                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 93; #endif // _hucc_scroll_h
12133                        		.dbg	line,	"include\init.c", 3; #include "hucc-chrmap.h"
12134                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 1; #ifndef _hucc_chrmap_h
12135                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 2; #define _hucc_chrmap_h
12136                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 4; /****************************************************************************
12137                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 5; ; ***************************************************************************
12138                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 6; ;
12139                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 7; ; hucc-chrmap.h
12140                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 8; ;
12141                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 9; ; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
12142                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 10; ;
12143                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 11; ; Copyright John Brandwood 2025.
12144                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 12; ;
12145                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
12146                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
12147                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
12148                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 16; ;
12149                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 17; ; ***************************************************************************
12150                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 18; ; ***************************************************************************
12151                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 19; ;
12152                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 20; ; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
12153                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 21; ;
12154                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 22; ; The maximum total size for a chrmap is 16KBytes, which allows for maps up
12155                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 23; ; to 256x32 tiles (2048x256 pixels).
12156                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 24; ;
12157                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 25; ; ***************************************************************************
12158                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 26; ; **************************************************************************/
12159                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 28; // *************
12160                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 29; // This code extends the blkmap library ...
12161                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 30; // *************
12162                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 32; #include "hucc-blkmap.h"
12163                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 34; // *************
12164                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 35; // Functions in chrmap.asm ...
12165                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 36; // *************
12166                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 38; #ifdef __HUCC__
12167                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 40; #asmdef	HUCC_USES_CHRMAP 1
12168                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 42; extern void __fastcall __nop set_chrmap( unsigned char __far *chrmap<vdc_map_bank:vdc_map_addr>, unsigned char tiles_w<vdc_map_line_w> );
12169                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 44; extern void __fastcall draw_bat( void );
12170                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 45; extern void __fastcall scroll_bat( void );
12171                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 47; extern void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
12172                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 49; #ifdef _SGX
12173                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 51; extern void __fastcall __nop sgx_set_chrmap( unsigned char __far *chrmap<sgx_map_bank:sgx_map_addr>, unsigned char tiles_w<sgx_map_line_w> );
12174                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 53; extern void __fastcall sgx_draw_bat( void );
12175                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 54; extern void __fastcall sgx_scroll_bat( void );
12176                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 56; extern void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
12177                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 58; #endif
12178                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 60; #endif // __HUCC__
12179                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 62; #endif // _hucc_chrmap_h
12180                        		.dbg	line,	"include\init.c", 4; #include "hucc-blkmap.h"
12181                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
12182                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
12183                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
12184                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
12185                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
12186                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
12187                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
12188                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
12189                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
12190                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
12191                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
12192                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
12193                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
12194                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
12195                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
12196                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
12197                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
12198                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
12199                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
12200                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
12201                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
12202                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
12203                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
12204                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
12205                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
12206                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
12207                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
12208                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
12209                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
12210                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
12211                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
12212                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
12213                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
12214                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
12215                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
12216                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
12217                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
12218                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
12219                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
12220                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
12221                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
12222                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
12223                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
12224                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
12225                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
12226                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
12227                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
12228                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
12229                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
12230                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
12231                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
12232                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
12233                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
12234                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
12235                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
12236                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
12237                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
12238                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
12239                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
12240                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
12241                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
12242                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
12243                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
12244                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
12245                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
12246                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
12247                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
12248                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 86; .macro	_set_blkmap.2
12249                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 87; stz	vdc_scr_bank
12250                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 88; .endm
12251                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 90; .macro	_set_multimap.2
12252                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 91; lda	vdc_bat_width
12253                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 92; lsr	a
12254                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 93; sta	vdc_map_line_w
12255                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 94; .endm
12256                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 96; .macro	SCREEN
12257                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 97; db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
12258                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 98; db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
12259                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 99; db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
12260                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 100; dw	(\4)
12261                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 101; .endm
12262                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
12263                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
12264                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
12265                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
12266                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
12267                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
12268                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
12269                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
12270                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
12271                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
12272                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
12273                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
12274                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
12275                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
12276                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
12277                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
12278                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
12279                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
12280                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
12281                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
12282                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
12283                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
12284                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
12285                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
12286                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
12287                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
12288                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
12289                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
12290                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 144; .macro	_sgx_set_blkmap.2
12291                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 145; stz	sgx_scr_bank
12292                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 146; .endm
12293                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 148; .macro	_sgx_set_multimap.2
12294                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 149; lda	sgx_bat_width
12295                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 150; lsr	a
12296                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 151; sta	sgx_map_line_w
12297                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 152; .endm
12298                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
12299                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
12300                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
12301                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
12302                        		.dbg	line,	"include\init.c", 13; void init_SYSTEM()
12303                        		.dbg	line,	"include\init.c", 14; {
12304                        	;***********************
12305                        	;***********************
12306                        	
12307                        		.hucc
12308    14:CA65             		.proc		_init_SYSTEM
12309                        		__enter		_init_SYSTEM
12310                        	
12311                        		.dbg	line,	"include\init.c", 15; // DISABLE DISPLAY //
12312                        	
12313                        		.dbg	line,	"include\init.c", 16; disp_off();
12314                        		__call		_disp_off
         14:CA65  20 29 E4   			call	_disp_off
12315                        	
12316                        		.dbg	line,	"include\init.c", 18; // VSYNC //
12317                        	
12318                        		.dbg	line,	"include\init.c", 19; vsync();
12319                        		__call		_vsync
         14:CA68  20 09 E3   			call	_vsync
12320                        	
12321                        		.dbg	line,	"include\init.c", 21; // LOAD DEFAULT FONT //
12322                        	
12323                        		.dbg	line,	"include\init.c", 22; load_default_font();
12324                        		 _load_default_font
         14:CA6B  82         			clx				; Offset to PCE VDC.
         14:CA6C  20 C7 FF   			call	huc_monofont_x
12325                        	
12326                        		.dbg	line,	"include\init.c", 25; // SET VDC 1 SCREEN SIZE (IN TILES) - 32x32 = 256 PIXELS
12327                        	
12328                        		.dbg	line,	"include\init.c", 26; set_screen_size(SCR_SIZE_32x32);
12329                        		__st.umiq	0, _al
         14:CA6F  64 F8      			stz	_al
12330                        		__call		_set_screen_size.1
         14:CA71  20 31 FF   			call	_set_screen_size.1
12331                        	
12332                        		.dbg	line,	"include\init.c", 29; // SET VDC 2 SCREEN SIZE (IN TILES) - 32x32 = 256 PIXELS
12333                        	
12334                        		.dbg	line,	"include\init.c", 30; sgx_set_screen_size(SCR_SIZE_32x32);
12335                        		__st.umiq	0, _al
         14:CA74  64 F8      			stz	_al
12336                        		__call		_sgx_set_screen_size.1
         14:CA76  20 27 FF   			call	_sgx_set_screen_size.1
12337                        	
12338                        		.dbg	line,	"include\init.c", 33; // INIT SPRITE ATTRIBUTE TABLE //
12339                        	
12340                        		.dbg	line,	"include\init.c", 34; init_satb();
12341                        		__call		_init_satb
         14:CA79  20 B7 E7   			call	_init_satb
12342                        	
12343                        		.dbg	line,	"include\init.c", 35; sgx_init_satb();
12344                        		__call		_sgx_init_satb
         14:CA7C  20 CA E7   			call	_sgx_init_satb
12345                        	
12346                        		.dbg	line,	"include\init.c", 38; // ENABLE DISPLAY //
12347                        	
12348                        		.dbg	line,	"include\init.c", 39; //disp_on();
12349                        	
12350                        		.dbg	line,	"include\init.c", 40; }
12351    14:CA7F             	.LL539:
12352                        		__return	0
         14:CA7F  4C EF FF   			jmp	leave_proc
12353                        		.dbg	clear
12354                        		.endp
12355                        		.pceas
12356                        	
12357                        		.dbg	line,	"include\init.c", 43; void init_VARIABLES()
12358                        		.dbg	line,	"include\init.c", 44; {
12359                        	;***********************
12360                        	;***********************
12361                        	
12362                        		.hucc
12363    14:C997             		.proc		_init_VARIABLES
12364                        		__enter		_init_VARIABLES
12365                        	
12366                        		.dbg	line,	"include\init.c", 45; sequence_id = SEQUENCE_GAME; //SEQUENCE_GAME | SEQUENCE_SHOP
12367                        		__st.umiq	2, _sequence_id
         14:C997  A9 02      			lda.l	#2
         14:C999  8D 11 23   			sta	_sequence_id
12368                        	
12369                        		.dbg	line,	"include\init.c", 47; level_id = 1;
12370                        		__st.umiq	1, _level_id
         14:C99C  A9 01      			lda.l	#1
         14:C99E  8D 13 23   			sta	_level_id
12371                        	
12372                        		.dbg	line,	"include\init.c", 49; key_amount = 0;
12373                        		__st.umiq	0, _key_amount
         14:C9A1  9C 26 23   			stz	_key_amount
12374                        	
12375                        		.dbg	line,	"include\init.c", 50; potion_amount = 0;
12376                        		__st.umiq	0, _potion_amount
         14:C9A4  9C 27 23   			stz	_potion_amount
12377                        	
12378                        		.dbg	line,	"include\init.c", 51; zenny_amount = 25000;
12379                        		__st.wmiq	25000, _zenny_amount
         14:C9A7  A9 A8      			lda.l	#25000
         14:C9A9  8D 2C 26   			sta.l	_zenny_amount
         14:C9AC  A9 61      			lda.h	#25000
         14:C9AE  8D 2D 26   			sta.h	_zenny_amount
12380                        	
12381                        		.dbg	line,	"include\init.c", 53; weapon_level = 0;
12382                        		__st.umiq	0, _weapon_level
         14:C9B1  9C 24 23   			stz	_weapon_level
12383                        	
12384                        		.dbg	line,	"include\init.c", 54; armor_level = 2;
12385                        		__st.umiq	2, _armor_level
         14:C9B4  A9 02      			lda.l	#2
         14:C9B6  8D 23 23   			sta	_armor_level
12386                        	
12387                        		.dbg	line,	"include\init.c", 55; 
12388                        	
12389                        		.dbg	line,	"include\init.c", 56; player_naked = FALSE;
12390                        		__st.umiq	0, _player_naked
         14:C9B9  9C 1D 23   			stz	_player_naked
12391                        	
12392                        		.dbg	line,	"include\init.c", 58; shop_counter = 0;
12393                        		__st.umiq	0, _shop_counter
         14:C9BC  9C D1 23   			stz	_shop_counter
12394                        	
12395                        		.dbg	line,	"include\init.c", 59; shop_phase = SHOP_PHASE_ENTER;
12396                        		__st.umiq	0, _shop_phase
         14:C9BF  9C D0 23   			stz	_shop_phase
12397                        	
12398                        		.dbg	line,	"include\init.c", 61; respawn = FALSE;
12399                        		__st.umiq	0, _respawn
         14:C9C2  9C 14 23   			stz	_respawn
12400                        	
12401                        		.dbg	line,	"include\init.c", 63; sequence_loaded = FALSE;
12402                        		__st.umiq	0, _sequence_loaded
         14:C9C5  9C 12 23   			stz	_sequence_loaded
12403                        	
12404                        		.dbg	line,	"include\init.c", 64; }
12405    14:C9C8             	.LL540:
12406                        		__return	0
         14:C9C8  4C EF FF   			jmp	leave_proc
12407                        		.dbg	clear
12408                        		.endp
12409                        		.pceas
12410                        	
12411                        		.dbg	line,	"include\init.c", 67; void init_PLAYER()
12412                        		.dbg	line,	"include\init.c", 68; {
12413                        	;***********************
12414                        	;***********************
12415                        	
12416                        		.hucc
12417    14:C8A0             		.proc		_init_PLAYER
12418                        		__enter		_init_PLAYER
12419                        	
12420                        		.dbg	line,	"include\init.c", 69; if(player_naked != RESPAWN_SHOP)
12421                        		__ld.umq	_player_naked
         14:C8A0  AD 1D 23   			lda	_player_naked
12422                        		__neq_b.uiq	2
         14:C8A3  38         			sec
         14:C8A4  49 02      			eor	#2
         14:C8A6  D0 01      			bne	!+
         14:C8A8  18         			clc
         14:C8A9             	!:
12423                        		__bfalse	.LL542
         14:C8A9  90 03      			bcc	.LL542
12424                        	
12425                        		.dbg	line,	"include\init.c", 70; {
12426                        	
12427                        		.dbg	line,	"include\init.c", 71; player_naked = FALSE;
12428                        		__st.umiq	0, _player_naked
         14:C8AB  9C 1D 23   			stz	_player_naked
12429                        	
12430                        		.dbg	line,	"include\init.c", 72; }
12431                        	
12432                        		.dbg	line,	"include\init.c", 73; 
12433                        	
12434                        		.dbg	line,	"include\init.c", 74; player_id = PLAYER_START_INDEX;
12435    14:C8AE             	.LL542:
12436                        		__st.umiq	14, _player_id
         14:C8AE  A9 0E      			lda.l	#14
         14:C8B0  8D 15 23   			sta	_player_id
12437                        	
12438                        		.dbg	line,	"include\init.c", 75; player_axis = AXIS_RIGHT;
12439                        		__st.umiq	0, _player_axis
         14:C8B3  9C 17 23   			stz	_player_axis
12440                        	
12441                        		.dbg	line,	"include\init.c", 76; player_previous_axis = player_axis;
12442                        		__ld.um		_player_axis
         14:C8B6  AD 17 23   			lda	_player_axis
         14:C8B9  C2         			cly
12443                        		__st.umq	_player_previous_axis
         14:C8BA  8D 18 23   			sta	_player_previous_axis
12444                        	
12445                        		.dbg	line,	"include\init.c", 77; player_counter_anim = 0;
12446                        		__st.umiq	0, _player_counter_anim
         14:C8BD  9C 19 23   			stz	_player_counter_anim
12447                        	
12448                        		.dbg	line,	"include\init.c", 78; player_index_jump = 0;
12449                        		__st.umiq	0, _player_index_jump
         14:C8C0  9C 1A 23   			stz	_player_index_jump
12450                        	
12451                        		.dbg	line,	"include\init.c", 79; player_index_fall = 0;
12452                        		__st.umiq	0, _player_index_fall
         14:C8C3  9C 1B 23   			stz	_player_index_fall
12453                        	
12454                        		.dbg	line,	"include\init.c", 80; player_counter_attack = 0;
12455                        		__st.umiq	0, _player_counter_attack
         14:C8C6  9C 1C 23   			stz	_player_counter_attack
12456                        	
12457                        		.dbg	line,	"include\init.c", 81; player_attack = FALSE;
12458                        		__st.umiq	0, _player_attack
         14:C8C9  9C 1E 23   			stz	_player_attack
12459                        	
12460                        		.dbg	line,	"include\init.c", 82; player_state = STATE_IDLE;
12461                        		__st.umiq	0, _player_state
         14:C8CC  9C 16 23   			stz	_player_state
12462                        	
12463                        		.dbg	line,	"include\init.c", 84; chain_id = player_id - 3;
12464                        		__ld.um		_player_id
         14:C8CF  AD 15 23   			lda	_player_id
         14:C8D2  C2         			cly
12465                        		__sub.wi	3
         14:C8D3  38         			sec
         14:C8D4  E9 03      			sbc.l	#3
         14:C8D6  B0 01      			bcs	!+
         14:C8D8  88         			dey
         14:C8D9             	!:
12466                        		__st.umq	_chain_id
         14:C8D9  8D 21 23   			sta	_chain_id
12467                        	
12468                        		.dbg	line,	"include\init.c", 85; }
12469    14:C8DC             	.LL541:
12470                        		__return	0
         14:C8DC  4C EF FF   			jmp	leave_proc
12471                        		.dbg	clear
12472                        		.endp
12473                        		.pceas
12474                        	
12475                        		.dbg	line,	"include\init.c", 92; void load_OBJECT_TILES()
12476                        		.dbg	line,	"include\init.c", 93; {
12477                        	;***********************
12478                        	;***********************
12479                        	
12480                        		.hucc
12481    02:D014             		.proc		_load_OBJECT_TILES
12482                        		__enter		_load_OBJECT_TILES
12483                        	
12484                        		.dbg	line,	"include\init.c", 94; sgx_load_vram(POT1_VRAM_ADR, tiles_SPR_POT , SIZEOF(tiles_SPR_POT) >> 1);
12485                        		__st.wmiq	26624, _di
         02:D014  64 F0      			stz.l	_di
         02:D016  A9 68      			lda.h	#26624
         02:D018  85 F1      			sta.h	_di
12486                        		__farptr	_tiles_SPR_POT, _bp_bank, _bp
         02:D01A  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_POT))
         02:D01C  85 EC      			sta.l	_bp
         02:D01E  A9 6E      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_POT))
         02:D020  85 ED      			sta.h	_bp
         02:D022  A9 12      			lda	#bank(_tiles_SPR_POT)
         02:D024  85 02      			sta	_bp_bank
12487                        		__ld.wi		___sizeof__tiles_SPR_POT
         02:D026  A9 00      			lda.l	#___sizeof__tiles_SPR_POT
         02:D028  A0 04      			ldy.h	#___sizeof__tiles_SPR_POT
12488                        		__lsr.wi	1
         02:D02A  42         			say
         02:D02B  4A         			lsr	a
         02:D02C  42         			say
         02:D02D  6A         			ror	a
12489                        		__st.wmq	_ax
         02:D02E  85 F8      			sta.l	_ax
         02:D030  84 F9      			sty.h	_ax
12490                        		 _sgx_load_vram.3
         02:D032  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D034  20 4F FF   			call	load_vram_x
12491                        	
12492                        		.dbg	line,	"include\init.c", 95; sgx_load_vram(POW_VRAM_ADR, tiles_SPR_POW , TILES_4);
12493                        		__st.wmiq	27136, _di
         02:D037  64 F0      			stz.l	_di
         02:D039  A9 6A      			lda.h	#27136
         02:D03B  85 F1      			sta.h	_di
12494                        		__farptr	_tiles_SPR_POW, _bp_bank, _bp
         02:D03D  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_POW))
         02:D03F  85 EC      			sta.l	_bp
         02:D041  A9 72      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_POW))
         02:D043  85 ED      			sta.h	_bp
         02:D045  A9 12      			lda	#bank(_tiles_SPR_POW)
         02:D047  85 02      			sta	_bp_bank
12495                        		__st.wmiq	64, _ax
         02:D049  A9 40      			lda.l	#64
         02:D04B  85 F8      			sta.l	_ax
         02:D04D  64 F9      			stz.h	_ax
12496                        		 _sgx_load_vram.3
         02:D04F  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D051  20 4F FF   			call	load_vram_x
12497                        	
12498                        		.dbg	line,	"include\init.c", 96; sgx_load_vram(GRAY_KEY_VRAM_ADR, tiles_SPR_GRAY_KEY , TILES_4);
12499                        		__st.wmiq	27200, _di
         02:D054  A9 40      			lda.l	#27200
         02:D056  85 F0      			sta.l	_di
         02:D058  A9 6A      			lda.h	#27200
         02:D05A  85 F1      			sta.h	_di
12500                        		__farptr	_tiles_SPR_GRAY_KEY, _bp_bank, _bp
         02:D05C  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_GRAY_KEY))
         02:D05E  85 EC      			sta.l	_bp
         02:D060  A9 6B      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_GRAY_KEY))
         02:D062  85 ED      			sta.h	_bp
         02:D064  A9 12      			lda	#bank(_tiles_SPR_GRAY_KEY)
         02:D066  85 02      			sta	_bp_bank
12501                        		__st.wmiq	64, _ax
         02:D068  A9 40      			lda.l	#64
         02:D06A  85 F8      			sta.l	_ax
         02:D06C  64 F9      			stz.h	_ax
12502                        		 _sgx_load_vram.3
         02:D06E  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D070  20 4F FF   			call	load_vram_x
12503                        	
12504                        		.dbg	line,	"include\init.c", 97; sgx_load_vram(GOLD_KEY_VRAM_ADR, tiles_SPR_GOLD_KEY , TILES_4);
12505                        		__st.wmiq	27264, _di
         02:D073  A9 80      			lda.l	#27264
         02:D075  85 F0      			sta.l	_di
         02:D077  A9 6A      			lda.h	#27264
         02:D079  85 F1      			sta.h	_di
12506                        		__farptr	_tiles_SPR_GOLD_KEY, _bp_bank, _bp
         02:D07B  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_GOLD_KEY))
         02:D07D  85 EC      			sta.l	_bp
         02:D07F  A9 6C      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_GOLD_KEY))
         02:D081  85 ED      			sta.h	_bp
         02:D083  A9 12      			lda	#bank(_tiles_SPR_GOLD_KEY)
         02:D085  85 02      			sta	_bp_bank
12507                        		__st.wmiq	64, _ax
         02:D087  A9 40      			lda.l	#64
         02:D089  85 F8      			sta.l	_ax
         02:D08B  64 F9      			stz.h	_ax
12508                        		 _sgx_load_vram.3
         02:D08D  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D08F  20 4F FF   			call	load_vram_x
12509                        	
12510                        		.dbg	line,	"include\init.c", 98; sgx_load_vram(LIFE_VRAM_ADR, tiles_SPR_LIFE , TILES_4);
12511                        		__st.wmiq	27328, _di
         02:D092  A9 C0      			lda.l	#27328
         02:D094  85 F0      			sta.l	_di
         02:D096  A9 6A      			lda.h	#27328
         02:D098  85 F1      			sta.h	_di
12512                        		__farptr	_tiles_SPR_LIFE, _bp_bank, _bp
         02:D09A  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_LIFE))
         02:D09C  85 EC      			sta.l	_bp
         02:D09E  A9 6D      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_LIFE))
         02:D0A0  85 ED      			sta.h	_bp
         02:D0A2  A9 12      			lda	#bank(_tiles_SPR_LIFE)
         02:D0A4  85 02      			sta	_bp_bank
12513                        		__st.wmiq	64, _ax
         02:D0A6  A9 40      			lda.l	#64
         02:D0A8  85 F8      			sta.l	_ax
         02:D0AA  64 F9      			stz.h	_ax
12514                        		 _sgx_load_vram.3
         02:D0AC  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D0AE  20 4F FF   			call	load_vram_x
12515                        	
12516                        		.dbg	line,	"include\init.c", 99; sgx_load_vram(COIN_1_VRAM_ADR, tiles_SPR_COIN_1 , TILES_4);
12517                        		__st.wmiq	27392, _di
         02:D0B1  64 F0      			stz.l	_di
         02:D0B3  A9 6B      			lda.h	#27392
         02:D0B5  85 F1      			sta.h	_di
12518                        		__farptr	_tiles_SPR_COIN_1, _bp_bank, _bp
         02:D0B7  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COIN_1))
         02:D0B9  85 EC      			sta.l	_bp
         02:D0BB  A9 67      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COIN_1))
         02:D0BD  85 ED      			sta.h	_bp
         02:D0BF  A9 12      			lda	#bank(_tiles_SPR_COIN_1)
         02:D0C1  85 02      			sta	_bp_bank
12519                        		__st.wmiq	64, _ax
         02:D0C3  A9 40      			lda.l	#64
         02:D0C5  85 F8      			sta.l	_ax
         02:D0C7  64 F9      			stz.h	_ax
12520                        		 _sgx_load_vram.3
         02:D0C9  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D0CB  20 4F FF   			call	load_vram_x
12521                        	
12522                        		.dbg	line,	"include\init.c", 100; sgx_load_vram(COIN_5_VRAM_ADR, tiles_SPR_COIN_5 , TILES_4);
12523                        		__st.wmiq	27456, _di
         02:D0CE  A9 40      			lda.l	#27456
         02:D0D0  85 F0      			sta.l	_di
         02:D0D2  A9 6B      			lda.h	#27456
         02:D0D4  85 F1      			sta.h	_di
12524                        		__farptr	_tiles_SPR_COIN_5, _bp_bank, _bp
         02:D0D6  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COIN_5))
         02:D0D8  85 EC      			sta.l	_bp
         02:D0DA  A9 68      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COIN_5))
         02:D0DC  85 ED      			sta.h	_bp
         02:D0DE  A9 12      			lda	#bank(_tiles_SPR_COIN_5)
         02:D0E0  85 02      			sta	_bp_bank
12525                        		__st.wmiq	64, _ax
         02:D0E2  A9 40      			lda.l	#64
         02:D0E4  85 F8      			sta.l	_ax
         02:D0E6  64 F9      			stz.h	_ax
12526                        		 _sgx_load_vram.3
         02:D0E8  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D0EA  20 4F FF   			call	load_vram_x
12527                        	
12528                        		.dbg	line,	"include\init.c", 101; sgx_load_vram(COIN_10_VRAM_ADR, tiles_SPR_COIN_10 , TILES_4);
12529                        		__st.wmiq	27520, _di
         02:D0ED  A9 80      			lda.l	#27520
         02:D0EF  85 F0      			sta.l	_di
         02:D0F1  A9 6B      			lda.h	#27520
         02:D0F3  85 F1      			sta.h	_di
12530                        		__farptr	_tiles_SPR_COIN_10, _bp_bank, _bp
         02:D0F5  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COIN_10))
         02:D0F7  85 EC      			sta.l	_bp
         02:D0F9  A9 68      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COIN_10))
         02:D0FB  85 ED      			sta.h	_bp
         02:D0FD  A9 12      			lda	#bank(_tiles_SPR_COIN_10)
         02:D0FF  85 02      			sta	_bp_bank
12531                        		__st.wmiq	64, _ax
         02:D101  A9 40      			lda.l	#64
         02:D103  85 F8      			sta.l	_ax
         02:D105  64 F9      			stz.h	_ax
12532                        		 _sgx_load_vram.3
         02:D107  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D109  20 4F FF   			call	load_vram_x
12533                        	
12534                        		.dbg	line,	"include\init.c", 102; sgx_load_vram(COIN_50_VRAM_ADR, tiles_SPR_COIN_50 , TILES_4);
12535                        		__st.wmiq	27584, _di
         02:D10C  A9 C0      			lda.l	#27584
         02:D10E  85 F0      			sta.l	_di
         02:D110  A9 6B      			lda.h	#27584
         02:D112  85 F1      			sta.h	_di
12536                        		__farptr	_tiles_SPR_COIN_50, _bp_bank, _bp
         02:D114  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COIN_50))
         02:D116  85 EC      			sta.l	_bp
         02:D118  A9 69      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COIN_50))
         02:D11A  85 ED      			sta.h	_bp
         02:D11C  A9 12      			lda	#bank(_tiles_SPR_COIN_50)
         02:D11E  85 02      			sta	_bp_bank
12537                        		__st.wmiq	64, _ax
         02:D120  A9 40      			lda.l	#64
         02:D122  85 F8      			sta.l	_ax
         02:D124  64 F9      			stz.h	_ax
12538                        		 _sgx_load_vram.3
         02:D126  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D128  20 4F FF   			call	load_vram_x
12539                        	
12540                        		.dbg	line,	"include\init.c", 103; sgx_load_vram(COIN_100_VRAM_ADR, tiles_SPR_COIN_100 , TILES_4);
12541                        		__st.wmiq	27648, _di
         02:D12B  64 F0      			stz.l	_di
         02:D12D  A9 6C      			lda.h	#27648
         02:D12F  85 F1      			sta.h	_di
12542                        		__farptr	_tiles_SPR_COIN_100, _bp_bank, _bp
         02:D131  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COIN_100))
         02:D133  85 EC      			sta.l	_bp
         02:D135  A9 69      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COIN_100))
         02:D137  85 ED      			sta.h	_bp
         02:D139  A9 12      			lda	#bank(_tiles_SPR_COIN_100)
         02:D13B  85 02      			sta	_bp_bank
12543                        		__st.wmiq	64, _ax
         02:D13D  A9 40      			lda.l	#64
         02:D13F  85 F8      			sta.l	_ax
         02:D141  64 F9      			stz.h	_ax
12544                        		 _sgx_load_vram.3
         02:D143  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D145  20 4F FF   			call	load_vram_x
12545                        	
12546                        		.dbg	line,	"include\init.c", 104; sgx_load_vram(COIN_500_VRAM_ADR, tiles_SPR_COIN_500 , TILES_4);
12547                        		__st.wmiq	27712, _di
         02:D148  A9 40      			lda.l	#27712
         02:D14A  85 F0      			sta.l	_di
         02:D14C  A9 6C      			lda.h	#27712
         02:D14E  85 F1      			sta.h	_di
12548                        		__farptr	_tiles_SPR_COIN_500, _bp_bank, _bp
         02:D150  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COIN_500))
         02:D152  85 EC      			sta.l	_bp
         02:D154  A9 6A      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COIN_500))
         02:D156  85 ED      			sta.h	_bp
         02:D158  A9 12      			lda	#bank(_tiles_SPR_COIN_500)
         02:D15A  85 02      			sta	_bp_bank
12549                        		__st.wmiq	64, _ax
         02:D15C  A9 40      			lda.l	#64
         02:D15E  85 F8      			sta.l	_ax
         02:D160  64 F9      			stz.h	_ax
12550                        		 _sgx_load_vram.3
         02:D162  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D164  20 4F FF   			call	load_vram_x
12551                        	
12552                        		.dbg	line,	"include\init.c", 105; sgx_load_vram(COIN_1000_VRAM_ADR, tiles_SPR_COIN_1000 , TILES_4);
12553                        		__st.wmiq	27776, _di
         02:D167  A9 80      			lda.l	#27776
         02:D169  85 F0      			sta.l	_di
         02:D16B  A9 6C      			lda.h	#27776
         02:D16D  85 F1      			sta.h	_di
12554                        		__farptr	_tiles_SPR_COIN_1000, _bp_bank, _bp
         02:D16F  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COIN_1000))
         02:D171  85 EC      			sta.l	_bp
         02:D173  A9 6A      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COIN_1000))
         02:D175  85 ED      			sta.h	_bp
         02:D177  A9 12      			lda	#bank(_tiles_SPR_COIN_1000)
         02:D179  85 02      			sta	_bp_bank
12555                        		__st.wmiq	64, _ax
         02:D17B  A9 40      			lda.l	#64
         02:D17D  85 F8      			sta.l	_ax
         02:D17F  64 F9      			stz.h	_ax
12556                        		 _sgx_load_vram.3
         02:D181  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D183  20 4F FF   			call	load_vram_x
12557                        	
12558                        		.dbg	line,	"include\init.c", 106; sgx_load_vram(STAR_VRAM_ADR, tiles_SPR_STAR , TILES_4);
12559                        		__st.wmiq	27840, _di
         02:D186  A9 C0      			lda.l	#27840
         02:D188  85 F0      			sta.l	_di
         02:D18A  A9 6C      			lda.h	#27840
         02:D18C  85 F1      			sta.h	_di
12560                        		__farptr	_tiles_SPR_STAR, _bp_bank, _bp
         02:D18E  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_STAR))
         02:D190  85 EC      			sta.l	_bp
         02:D192  A9 72      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_STAR))
         02:D194  85 ED      			sta.h	_bp
         02:D196  A9 12      			lda	#bank(_tiles_SPR_STAR)
         02:D198  85 02      			sta	_bp_bank
12561                        		__st.wmiq	64, _ax
         02:D19A  A9 40      			lda.l	#64
         02:D19C  85 F8      			sta.l	_ax
         02:D19E  64 F9      			stz.h	_ax
12562                        		 _sgx_load_vram.3
         02:D1A0  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D1A2  20 4F FF   			call	load_vram_x
12563                        	
12564                        		.dbg	line,	"include\init.c", 107; sgx_load_vram(OCTOPUS_VRAM_ADR, tiles_SPR_OCTOPUS , TILES_4);
12565                        		__st.wmiq	27904, _di
         02:D1A5  64 F0      			stz.l	_di
         02:D1A7  A9 6D      			lda.h	#27904
         02:D1A9  85 F1      			sta.h	_di
12566                        		__farptr	_tiles_SPR_OCTOPUS, _bp_bank, _bp
         02:D1AB  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_OCTOPUS))
         02:D1AD  85 EC      			sta.l	_bp
         02:D1AF  A9 6D      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_OCTOPUS))
         02:D1B1  85 ED      			sta.h	_bp
         02:D1B3  A9 12      			lda	#bank(_tiles_SPR_OCTOPUS)
         02:D1B5  85 02      			sta	_bp_bank
12567                        		__st.wmiq	64, _ax
         02:D1B7  A9 40      			lda.l	#64
         02:D1B9  85 F8      			sta.l	_ax
         02:D1BB  64 F9      			stz.h	_ax
12568                        		 _sgx_load_vram.3
         02:D1BD  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D1BF  20 4F FF   			call	load_vram_x
12569                        	
12570                        		.dbg	line,	"include\init.c", 108; sgx_load_vram(FRUIT_VRAM_ADR, tiles_SPR_FRUIT , TILES_4);
12571                        		__st.wmiq	27968, _di
         02:D1C2  A9 40      			lda.l	#27968
         02:D1C4  85 F0      			sta.l	_di
         02:D1C6  A9 6D      			lda.h	#27968
         02:D1C8  85 F1      			sta.h	_di
12572                        		__farptr	_tiles_SPR_FRUIT, _bp_bank, _bp
         02:D1CA  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_FRUIT))
         02:D1CC  85 EC      			sta.l	_bp
         02:D1CE  A9 6B      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_FRUIT))
         02:D1D0  85 ED      			sta.h	_bp
         02:D1D2  A9 12      			lda	#bank(_tiles_SPR_FRUIT)
         02:D1D4  85 02      			sta	_bp_bank
12573                        		__st.wmiq	64, _ax
         02:D1D6  A9 40      			lda.l	#64
         02:D1D8  85 F8      			sta.l	_ax
         02:D1DA  64 F9      			stz.h	_ax
12574                        		 _sgx_load_vram.3
         02:D1DC  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D1DE  20 4F FF   			call	load_vram_x
12575                        	
12576                        		.dbg	line,	"include\init.c", 109; sgx_load_vram(BARREL_VRAM_ADR, tiles_SPR_BARREL , TILES_4);
12577                        		__st.wmiq	28032, _di
         02:D1E1  A9 80      			lda.l	#28032
         02:D1E3  85 F0      			sta.l	_di
         02:D1E5  A9 6D      			lda.h	#28032
         02:D1E7  85 F1      			sta.h	_di
12578                        		__farptr	_tiles_SPR_BARREL, _bp_bank, _bp
         02:D1E9  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_BARREL))
         02:D1EB  85 EC      			sta.l	_bp
         02:D1ED  A9 7B      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_BARREL))
         02:D1EF  85 ED      			sta.h	_bp
         02:D1F1  A9 11      			lda	#bank(_tiles_SPR_BARREL)
         02:D1F3  85 02      			sta	_bp_bank
12579                        		__st.wmiq	64, _ax
         02:D1F5  A9 40      			lda.l	#64
         02:D1F7  85 F8      			sta.l	_ax
         02:D1F9  64 F9      			stz.h	_ax
12580                        		 _sgx_load_vram.3
         02:D1FB  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D1FD  20 4F FF   			call	load_vram_x
12581                        	
12582                        		.dbg	line,	"include\init.c", 110; sgx_load_vram(HOURGLASS_VRAM_ADR, tiles_SPR_HOURGLASS , TILES_4);
12583                        		__st.wmiq	28096, _di
         02:D200  A9 C0      			lda.l	#28096
         02:D202  85 F0      			sta.l	_di
         02:D204  A9 6D      			lda.h	#28096
         02:D206  85 F1      			sta.h	_di
12584                        		__farptr	_tiles_SPR_HOURGLASS, _bp_bank, _bp
         02:D208  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_HOURGLASS))
         02:D20A  85 EC      			sta.l	_bp
         02:D20C  A9 6C      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_HOURGLASS))
         02:D20E  85 ED      			sta.h	_bp
         02:D210  A9 12      			lda	#bank(_tiles_SPR_HOURGLASS)
         02:D212  85 02      			sta	_bp_bank
12585                        		__st.wmiq	64, _ax
         02:D214  A9 40      			lda.l	#64
         02:D216  85 F8      			sta.l	_ax
         02:D218  64 F9      			stz.h	_ax
12586                        		 _sgx_load_vram.3
         02:D21A  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D21C  20 4F FF   			call	load_vram_x
12587                        	
12588                        		.dbg	line,	"include\init.c", 111; sgx_load_vram(BAMBOO_VRAM_ADR, tiles_SPR_BAMBOO , TILES_4);
12589                        		__st.wmiq	28160, _di
         02:D21F  64 F0      			stz.l	_di
         02:D221  A9 6E      			lda.h	#28160
         02:D223  85 F1      			sta.h	_di
12590                        		__farptr	_tiles_SPR_BAMBOO, _bp_bank, _bp
         02:D225  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_BAMBOO))
         02:D227  85 EC      			sta.l	_bp
         02:D229  A9 73      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_BAMBOO))
         02:D22B  85 ED      			sta.h	_bp
         02:D22D  A9 12      			lda	#bank(_tiles_SPR_BAMBOO)
         02:D22F  85 02      			sta	_bp_bank
12591                        		__st.wmiq	64, _ax
         02:D231  A9 40      			lda.l	#64
         02:D233  85 F8      			sta.l	_ax
         02:D235  64 F9      			stz.h	_ax
12592                        		 _sgx_load_vram.3
         02:D237  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D239  20 4F FF   			call	load_vram_x
12593                        	
12594                        		.dbg	line,	"include\init.c", 112; sgx_load_vram(YASHICHI_VRAM_ADR, tiles_SPR_YASHICHI , TILES_4);
12595                        		__st.wmiq	28224, _di
         02:D23C  A9 40      			lda.l	#28224
         02:D23E  85 F0      			sta.l	_di
         02:D240  A9 6E      			lda.h	#28224
         02:D242  85 F1      			sta.h	_di
12596                        		__farptr	_tiles_SPR_YASHICHI, _bp_bank, _bp
         02:D244  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_YASHICHI))
         02:D246  85 EC      			sta.l	_bp
         02:D248  A9 73      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_YASHICHI))
         02:D24A  85 ED      			sta.h	_bp
         02:D24C  A9 12      			lda	#bank(_tiles_SPR_YASHICHI)
         02:D24E  85 02      			sta	_bp_bank
12597                        		__st.wmiq	64, _ax
         02:D250  A9 40      			lda.l	#64
         02:D252  85 F8      			sta.l	_ax
         02:D254  64 F9      			stz.h	_ax
12598                        		 _sgx_load_vram.3
         02:D256  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D258  20 4F FF   			call	load_vram_x
12599                        	
12600                        		.dbg	line,	"include\init.c", 113; sgx_load_vram(ELEPHANT_VRAM_ADR, tiles_SPR_ELEPHANT , TILES_4);
12601                        		__st.wmiq	28288, _di
         02:D25B  A9 80      			lda.l	#28288
         02:D25D  85 F0      			sta.l	_di
         02:D25F  A9 6E      			lda.h	#28288
         02:D261  85 F1      			sta.h	_di
12602                        		__farptr	_tiles_SPR_ELEPHANT, _bp_bank, _bp
         02:D263  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_ELEPHANT))
         02:D265  85 EC      			sta.l	_bp
         02:D267  A9 74      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_ELEPHANT))
         02:D269  85 ED      			sta.h	_bp
         02:D26B  A9 12      			lda	#bank(_tiles_SPR_ELEPHANT)
         02:D26D  85 02      			sta	_bp_bank
12603                        		__st.wmiq	64, _ax
         02:D26F  A9 40      			lda.l	#64
         02:D271  85 F8      			sta.l	_ax
         02:D273  64 F9      			stz.h	_ax
12604                        		 _sgx_load_vram.3
         02:D275  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D277  20 4F FF   			call	load_vram_x
12605                        	
12606                        		.dbg	line,	"include\init.c", 114; sgx_load_vram(DRAGONFLY_VRAM_ADR, tiles_SPR_DRAGONFLY , TILES_4);
12607                        		__st.wmiq	28352, _di
         02:D27A  A9 C0      			lda.l	#28352
         02:D27C  85 F0      			sta.l	_di
         02:D27E  A9 6E      			lda.h	#28352
         02:D280  85 F1      			sta.h	_di
12608                        		__farptr	_tiles_SPR_DRAGONFLY, _bp_bank, _bp
         02:D282  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_DRAGONFLY))
         02:D284  85 EC      			sta.l	_bp
         02:D286  A9 74      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_DRAGONFLY))
         02:D288  85 ED      			sta.h	_bp
         02:D28A  A9 12      			lda	#bank(_tiles_SPR_DRAGONFLY)
         02:D28C  85 02      			sta	_bp_bank
12609                        		__st.wmiq	64, _ax
         02:D28E  A9 40      			lda.l	#64
         02:D290  85 F8      			sta.l	_ax
         02:D292  64 F9      			stz.h	_ax
12610                        		 _sgx_load_vram.3
         02:D294  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D296  20 4F FF   			call	load_vram_x
12611                        	
12612                        		.dbg	line,	"include\init.c", 115; sgx_load_vram(COW_VRAM_ADR, tiles_SPR_COW , TILES_4);
12613                        		__st.wmiq	28416, _di
         02:D299  64 F0      			stz.l	_di
         02:D29B  A9 6F      			lda.h	#28416
         02:D29D  85 F1      			sta.h	_di
12614                        		__farptr	_tiles_SPR_COW, _bp_bank, _bp
         02:D29F  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COW))
         02:D2A1  85 EC      			sta.l	_bp
         02:D2A3  A9 75      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COW))
         02:D2A5  85 ED      			sta.h	_bp
         02:D2A7  A9 12      			lda	#bank(_tiles_SPR_COW)
         02:D2A9  85 02      			sta	_bp_bank
12615                        		__st.wmiq	64, _ax
         02:D2AB  A9 40      			lda.l	#64
         02:D2AD  85 F8      			sta.l	_ax
         02:D2AF  64 F9      			stz.h	_ax
12616                        		 _sgx_load_vram.3
         02:D2B1  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D2B3  20 4F FF   			call	load_vram_x
12617                        	
12618                        		.dbg	line,	"include\init.c", 116; sgx_load_vram(MOBICHAN_VRAM_ADR, tiles_SPR_MOBICHAN , TILES_4);
12619                        		__st.wmiq	28480, _di
         02:D2B6  A9 40      			lda.l	#28480
         02:D2B8  85 F0      			sta.l	_di
         02:D2BA  A9 6F      			lda.h	#28480
         02:D2BC  85 F1      			sta.h	_di
12620                        		__farptr	_tiles_SPR_MOBICHAN, _bp_bank, _bp
         02:D2BE  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_MOBICHAN))
         02:D2C0  85 EC      			sta.l	_bp
         02:D2C2  A9 75      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_MOBICHAN))
         02:D2C4  85 ED      			sta.h	_bp
         02:D2C6  A9 12      			lda	#bank(_tiles_SPR_MOBICHAN)
         02:D2C8  85 02      			sta	_bp_bank
12621                        		__st.wmiq	64, _ax
         02:D2CA  A9 40      			lda.l	#64
         02:D2CC  85 F8      			sta.l	_ax
         02:D2CE  64 F9      			stz.h	_ax
12622                        		 _sgx_load_vram.3
         02:D2D0  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D2D2  20 4F FF   			call	load_vram_x
12623                        	
12624                        		.dbg	line,	"include\init.c", 117; }
12625    02:D2D5             	.LL543:
12626                        		__return	0
         02:D2D5  4C EF FF   			jmp	leave_proc
12627                        		.dbg	clear
12628                        		.endp
12629                        		.pceas
12630                        	
12631                        		.dbg	line,	"include\init.c", 120; void load_CHEST_TILES()
12632                        		.dbg	line,	"include\init.c", 121; {
12633                        	;***********************
12634                        	;***********************
12635                        	
12636                        		.hucc
12637    14:C9F6             		.proc		_load_CHEST_TILES
12638                        		__enter		_load_CHEST_TILES
12639                        	
12640                        		.dbg	line,	"include\init.c", 122; sgx_load_vram(CHEST_VRAM_ADR, tiles_SPR_CHEST , SIZEOF(tiles_SPR_CHEST) >> 1);
12641                        		__st.wmiq	28672, _di
         14:C9F6  64 F0      			stz.l	_di
         14:C9F8  A9 70      			lda.h	#28672
         14:C9FA  85 F1      			sta.h	_di
12642                        		__farptr	_tiles_SPR_CHEST, _bp_bank, _bp
         14:C9FC  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_CHEST))
         14:C9FE  85 EC      			sta.l	_bp
         14:CA00  A9 7B      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_CHEST))
         14:CA02  85 ED      			sta.h	_bp
         14:CA04  A9 11      			lda	#bank(_tiles_SPR_CHEST)
         14:CA06  85 02      			sta	_bp_bank
12643                        		__ld.wi		___sizeof__tiles_SPR_CHEST
         14:CA08  A9 00      			lda.l	#___sizeof__tiles_SPR_CHEST
         14:CA0A  A0 0C      			ldy.h	#___sizeof__tiles_SPR_CHEST
12644                        		__lsr.wi	1
         14:CA0C  42         			say
         14:CA0D  4A         			lsr	a
         14:CA0E  42         			say
         14:CA0F  6A         			ror	a
12645                        		__st.wmq	_ax
         14:CA10  85 F8      			sta.l	_ax
         14:CA12  84 F9      			sty.h	_ax
12646                        		 _sgx_load_vram.3
         14:CA14  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         14:CA16  20 4F FF   			call	load_vram_x
12647                        	
12648                        		.dbg	line,	"include\init.c", 123; }
12649    14:CA19             	.LL544:
12650                        		__return	0
         14:CA19  4C EF FF   			jmp	leave_proc
12651                        		.dbg	clear
12652                        		.endp
12653                        		.pceas
12654                        	
12655                        		.dbg	line,	"include\init.c", 126; void load_NPC_TILES()
12656                        		.dbg	line,	"include\init.c", 127; {
12657                        	;***********************
12658                        	;***********************
12659                        	
12660                        		.hucc
12661    14:CA1C             		.proc		_load_NPC_TILES
12662                        		__enter		_load_NPC_TILES
12663                        	
12664                        		.dbg	line,	"include\init.c", 128; sgx_load_vram(NPC_VRAM_ADR, tiles_SPR_NPC , SIZEOF(tiles_SPR_NPC) >> 1);
12665                        		__st.wmiq	30208, _di
         14:CA1C  64 F0      			stz.l	_di
         14:CA1E  A9 76      			lda.h	#30208
         14:CA20  85 F1      			sta.h	_di
12666                        		__farptr	_tiles_SPR_NPC, _bp_bank, _bp
         14:CA22  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_NPC))
         14:CA24  85 EC      			sta.l	_bp
         14:CA26  A9 7A      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_NPC))
         14:CA28  85 ED      			sta.h	_bp
         14:CA2A  A9 12      			lda	#bank(_tiles_SPR_NPC)
         14:CA2C  85 02      			sta	_bp_bank
12667                        		__ld.wi		___sizeof__tiles_SPR_NPC
         14:CA2E  A9 00      			lda.l	#___sizeof__tiles_SPR_NPC
         14:CA30  A0 0C      			ldy.h	#___sizeof__tiles_SPR_NPC
12668                        		__lsr.wi	1
         14:CA32  42         			say
         14:CA33  4A         			lsr	a
         14:CA34  42         			say
         14:CA35  6A         			ror	a
12669                        		__st.wmq	_ax
         14:CA36  85 F8      			sta.l	_ax
         14:CA38  84 F9      			sty.h	_ax
12670                        		 _sgx_load_vram.3
         14:CA3A  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         14:CA3C  20 4F FF   			call	load_vram_x
12671                        	
12672                        		.dbg	line,	"include\init.c", 129; }
12673    14:CA3F             	.LL545:
12674                        		__return	0
         14:CA3F  4C EF FF   			jmp	leave_proc
12675                        		.dbg	clear
12676                        		.endp
12677                        		.pceas
12678                        	
12679                        		.dbg	line,	"include\init.c", 132; void init_OBJECT_LV1()
12680                        		.dbg	line,	"include\init.c", 133; {
12681                        	;***********************
12682                        	;***********************
12683                        	
12684                        		.hucc
12685    02:DD21             		.proc		_init_OBJECT_LV1
12686                        		__enter		_init_OBJECT_LV1
12687                        	
12688                        		.dbg	line,	"include\init.c", 134; signed char i;
12689                        	
12690                        		.dbg	line,	"include\init.c", 136; for(i=0 ; i<level_object_number ; i++)
12691                        		__st.umiq	0, __init_OBJECT_LV1_end - 1  /* i */
         02:DD21  9C 49 26   			stz	__init_OBJECT_LV1_end - 1
12692    02:DD24             	.LL547:
12693                        		__ld.bm		__init_OBJECT_LV1_end - 1  /* i */
         02:DD24  AD 49 26   			lda	__init_OBJECT_LV1_end - 1
         02:DD27  C2         			cly
         02:DD28  10 01      			bpl	!+
         02:DD2A  88         			dey
         02:DD2B             	!:
12694                        		__slt_w.um	_level_object_number
         02:DD2B  CD 2E 23   			cmp	_level_object_number		; Subtract memory from Y:A.
         02:DD2E  98         			tya
         02:DD2F  E9 00      			sbc	#0
         02:DD31  50 02      			bvc	!+
         02:DD33  49 80      			eor	#$80		; -ve if Y:A < memory (signed).
         02:DD35  0A         	!:		asl	a
12695                        		__btrue		.LL549
         02:DD36  B0 08      			bcs	.LL549
12696                        		__bra		.LL550
         02:DD38  4C 5C DE   			bra	.LL550
12697    02:DD3B             	.LL548:
12698                        		__inc.umq	__init_OBJECT_LV1_end - 1  /* i */
         02:DD3B  EE 49 26   			inc	__init_OBJECT_LV1_end - 1
12699                        		__bra		.LL547
         02:DD3E  80 E4      			bra	.LL547
12700    02:DD40             	.LL549:
12701                        	
12702                        		.dbg	line,	"include\init.c", 137; {
12703                        	
12704                        		.dbg	line,	"include\init.c", 138; // SET OBJECT PROPERTIES //
12705                        	
12706                        		.dbg	line,	"include\init.c", 139; list_object_type[i] = TABLE_OBJECT_TYPE_LV1[i];
12707                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         02:DD40  AE 49 26   			ldx	__init_OBJECT_LV1_end - 1
12708                        		__ld.uax	_TABLE_OBJECT_TYPE_LV1
         02:DD43  BD 78 60   			lda	_TABLE_OBJECT_TYPE_LV1, x
         02:DD46  C2         			cly
12709                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         02:DD47  AE 49 26   			ldx	__init_OBJECT_LV1_end - 1
12710                        		__st.uaxq	_list_object_type
         02:DD4A  9D 30 23   			sta	_list_object_type, x
12711                        	
12712                        		.dbg	line,	"include\init.c", 140; list_object_x_pos_ref[i] = TABLE_OBJECT_X_POS_REF_LV1[i];
12713                        		__ld2x.bmq	__init_OBJECT_LV1_end - 1  /* i */
         02:DD4D  AD 49 26   			lda	__init_OBJECT_LV1_end - 1
         02:DD50  0A         			asl	a
         02:DD51  AA         			tax
12714                        		__ld.wax	_TABLE_OBJECT_X_POS_REF_LV1
         02:DD52  BD 8F 60   			lda.l	_TABLE_OBJECT_X_POS_REF_LV1, x
         02:DD55  BC 90 60   			ldy.h	_TABLE_OBJECT_X_POS_REF_LV1, x
12715                        		__ld2x.bm	__init_OBJECT_LV1_end - 1  /* i */
         02:DD58  AA         			tax
         02:DD59  AD 49 26   			lda	__init_OBJECT_LV1_end - 1
         02:DD5C  0A         			asl	a
         02:DD5D  22         			sax
12716                        		__st.waxq	_list_object_x_pos_ref
         02:DD5E  9D 40 25   			sta.l	_list_object_x_pos_ref, x
         02:DD61  98         			tya
         02:DD62  9D 41 25   			sta.h	_list_object_x_pos_ref, x
12717                        	
12718                        		.dbg	line,	"include\init.c", 141; list_object_y_pos_ref[i] = TABLE_OBJECT_Y_POS_REF_LV1[i];
12719                        		__ld2x.bmq	__init_OBJECT_LV1_end - 1  /* i */
         02:DD65  AD 49 26   			lda	__init_OBJECT_LV1_end - 1
         02:DD68  0A         			asl	a
         02:DD69  AA         			tax
12720                        		__ld.wax	_TABLE_OBJECT_Y_POS_REF_LV1
         02:DD6A  BD BD 60   			lda.l	_TABLE_OBJECT_Y_POS_REF_LV1, x
         02:DD6D  BC BE 60   			ldy.h	_TABLE_OBJECT_Y_POS_REF_LV1, x
12721                        		__ld2x.bm	__init_OBJECT_LV1_end - 1  /* i */
         02:DD70  AA         			tax
         02:DD71  AD 49 26   			lda	__init_OBJECT_LV1_end - 1
         02:DD74  0A         			asl	a
         02:DD75  22         			sax
12722                        		__st.waxq	_list_object_y_pos_ref
         02:DD76  9D 72 25   			sta.l	_list_object_y_pos_ref, x
         02:DD79  98         			tya
         02:DD7A  9D 73 25   			sta.h	_list_object_y_pos_ref, x
12723                        	
12724                        		.dbg	line,	"include\init.c", 142; list_object_x_pos[i] = -16;
12725                        		__ld2x.bmq	__init_OBJECT_LV1_end - 1  /* i */
         02:DD7D  AD 49 26   			lda	__init_OBJECT_LV1_end - 1
         02:DD80  0A         			asl	a
         02:DD81  AA         			tax
12726                        		__st.waxiq	-16, _list_object_x_pos
         02:DD82  A9 F0      			lda.l	#-16
         02:DD84  9D DC 24   			sta.l	_list_object_x_pos, x
         02:DD87  A9 FF      			lda.h	#-16
         02:DD89  9D DD 24   			sta.h	_list_object_x_pos, x
12727                        	
12728                        		.dbg	line,	"include\init.c", 143; list_object_y_pos[i] = -16;
12729                        		__ld2x.bmq	__init_OBJECT_LV1_end - 1  /* i */
         02:DD8C  AD 49 26   			lda	__init_OBJECT_LV1_end - 1
         02:DD8F  0A         			asl	a
         02:DD90  AA         			tax
12730                        		__st.waxiq	-16, _list_object_y_pos
         02:DD91  A9 F0      			lda.l	#-16
         02:DD93  9D 0E 25   			sta.l	_list_object_y_pos, x
         02:DD96  A9 FF      			lda.h	#-16
         02:DD98  9D 0F 25   			sta.h	_list_object_y_pos, x
12731                        	
12732                        		.dbg	line,	"include\init.c", 144; 
12733                        	
12734                        		.dbg	line,	"include\init.c", 145; // IF THE PLAYERS ENTERS THE LEVEL FOR THE 1RST TIME //
12735                        	
12736                        		.dbg	line,	"include\init.c", 146; // ALL OBJECTS ARE ACTIVE //
12737                        	
12738                        		.dbg	line,	"include\init.c", 147; if(respawn == FALSE)
12739                        		__not.um	_respawn
         02:DD9B  AD 14 23   			lda	_respawn
         02:DD9E  18         			clc
         02:DD9F  D0 01      			bne	!+
         02:DDA1  38         			sec
         02:DDA2             	!:
12740                        		__bfalse	.LL551
         02:DDA2  90 06      			bcc	.LL551
12741                        	
12742                        		.dbg	line,	"include\init.c", 148; {
12743                        	
12744                        		.dbg	line,	"include\init.c", 149; list_object_state[i] = STATE_ACTIVE;
12745                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         02:DDA4  AE 49 26   			ldx	__init_OBJECT_LV1_end - 1
12746                        		__st.uaxiq	0, _list_object_state
         02:DDA7  9E 49 23   			stz	_list_object_state, x
12747                        	
12748                        		.dbg	line,	"include\init.c", 150; }
12749                        	
12750                        		.dbg	line,	"include\init.c", 153; // SET OBJECT SPRITE //
12751                        	
12752                        		.dbg	line,	"include\init.c", 154; sgx_spr_set(i + object_start_index);
12753    02:DDAA             	.LL551:
12754                        		__ld.bm		__init_OBJECT_LV1_end - 1  /* i */
         02:DDAA  AD 49 26   			lda	__init_OBJECT_LV1_end - 1
         02:DDAD  C2         			cly
         02:DDAE  10 01      			bpl	!+
         02:DDB0  88         			dey
         02:DDB1             	!:
12755                        		__add.um	_object_start_index
         02:DDB1  18         			clc
         02:DDB2  6D 2D 23   			adc	_object_start_index
         02:DDB5  90 01      			bcc	!+
         02:DDB7  C8         			iny
         02:DDB8             	!:
12756                        		__call		_sgx_spr_set.1
         02:DDB8  20 8A E8   			call	_sgx_spr_set.1
12757                        	
12758                        		.dbg	line,	"include\init.c", 155; sgx_spr_x(list_object_x_pos[i]);
12759                        		__ld2x.bmq	__init_OBJECT_LV1_end - 1  /* i */
         02:DDBB  AD 49 26   			lda	__init_OBJECT_LV1_end - 1
         02:DDBE  0A         			asl	a
         02:DDBF  AA         			tax
12760                        		__ld.wax	_list_object_x_pos
         02:DDC0  BD DC 24   			lda.l	_list_object_x_pos, x
         02:DDC3  BC DD 24   			ldy.h	_list_object_x_pos, x
12761                        		__call		_sgx_spr_x.1
         02:DDC6  20 B7 E8   			call	_sgx_spr_x.1
12762                        	
12763                        		.dbg	line,	"include\init.c", 156; sgx_spr_y(list_object_y_pos[i]);
12764                        		__ld2x.bmq	__init_OBJECT_LV1_end - 1  /* i */
         02:DDC9  AD 49 26   			lda	__init_OBJECT_LV1_end - 1
         02:DDCC  0A         			asl	a
         02:DDCD  AA         			tax
12765                        		__ld.wax	_list_object_y_pos
         02:DDCE  BD 0E 25   			lda.l	_list_object_y_pos, x
         02:DDD1  BC 0F 25   			ldy.h	_list_object_y_pos, x
12766                        		__call		_sgx_spr_y.1
         02:DDD4  20 C6 E8   			call	_sgx_spr_y.1
12767                        	
12768                        		.dbg	line,	"include\init.c", 157; sgx_spr_pri(TRUE);
12769                        		__ld.uiq	1
         02:DDD7  A9 01      			lda	#1
12770                        		__call		_sgx_spr_pri.1
         02:DDD9  20 09 E9   			call	_sgx_spr_pri.1
12771                        	
12772                        		.dbg	line,	"include\init.c", 160; if(list_object_type[i] == TYPE_HOURGLASS)
12773                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         02:DDDC  AE 49 26   			ldx	__init_OBJECT_LV1_end - 1
12774                        		__not.uax	_list_object_type
         02:DDDF  BD 30 23   			lda	_list_object_type, x
         02:DDE2  18         			clc
         02:DDE3  D0 01      			bne	!+
         02:DDE5  38         			sec
         02:DDE6             	!:
12775                        		__bfalse	.LL552
         02:DDE6  90 1D      			bcc	.LL552
12776                        	
12777                        		.dbg	line,	"include\init.c", 161; {
12778                        	
12779                        		.dbg	line,	"include\init.c", 162; list_object_energy[i] = 0;
12780                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         02:DDE8  AE 49 26   			ldx	__init_OBJECT_LV1_end - 1
12781                        		__st.uaxiq	0, _list_object_energy
         02:DDEB  9E 62 23   			stz	_list_object_energy, x
12782                        	
12783                        		.dbg	line,	"include\init.c", 163; sgx_spr_pal(18);
12784                        		__ld.uiq	18
         02:DDEE  A9 12      			lda	#18
12785                        		__call		_sgx_spr_pal.1
         02:DDF0  20 FA E8   			call	_sgx_spr_pal.1
12786                        	
12787                        		.dbg	line,	"include\init.c", 164; sgx_spr_pattern(HOURGLASS_VRAM_ADR);
12788                        		__ld.wi		28096
         02:DDF3  A9 C0      			lda.l	#28096
         02:DDF5  A0 6D      			ldy.h	#28096
12789                        		__call		_sgx_spr_pattern.1
         02:DDF7  20 D3 E8   			call	_sgx_spr_pattern.1
12790                        	
12791                        		.dbg	line,	"include\init.c", 165; sgx_spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_16x16);
12792                        		__st.umiq	185, _al
         02:DDFA  A9 B9      			lda.l	#185
         02:DDFC  85 F8      			sta	_al
12793                        		__ld.uiq	0
         02:DDFE  62         			cla
12794                        		__call		_sgx_spr_ctrl.2
         02:DDFF  20 E9 E8   			call	_sgx_spr_ctrl.2
12795                        	
12796                        		.dbg	line,	"include\init.c", 166; }
12797                        	
12798                        		.dbg	line,	"include\init.c", 168; else if(list_object_type[i] == TYPE_POT)
12799                        		__bra		.LL553
         02:DE02  4C 3B DD   			bra	.LL553
12800    02:DE05             	.LL552:
12801                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         02:DE05  AE 49 26   			ldx	__init_OBJECT_LV1_end - 1
12802                        		__ld.uaxq	_list_object_type
         02:DE08  BD 30 23   			lda	_list_object_type, x
12803                        		__equ_b.uiq	1
         02:DE0B  C9 01      			cmp	#1
         02:DE0D  F0 01      			beq	!+
         02:DE0F  18         			clc
         02:DE10             	!:
12804                        		__bfalse	.LL554
         02:DE10  90 1E      			bcc	.LL554
12805                        	
12806                        		.dbg	line,	"include\init.c", 169; {
12807                        	
12808                        		.dbg	line,	"include\init.c", 170; list_object_energy[i] = 2;
12809                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         02:DE12  AE 49 26   			ldx	__init_OBJECT_LV1_end - 1
12810                        		__st.uaxiq	2, _list_object_energy
         02:DE15  A9 02      			lda.l	#2
         02:DE17  9D 62 23   			sta	_list_object_energy, x
12811                        	
12812                        		.dbg	line,	"include\init.c", 171; sgx_spr_pal(17);
12813                        		__ld.uiq	17
         02:DE1A  A9 11      			lda	#17
12814                        		__call		_sgx_spr_pal.1
         02:DE1C  20 FA E8   			call	_sgx_spr_pal.1
12815                        	
12816                        		.dbg	line,	"include\init.c", 172; sgx_spr_pattern(POT1_VRAM_ADR);
12817                        		__ld.wi		26624
         02:DE1F  62         			cla
         02:DE20  A0 68      			ldy.h	#26624
12818                        		__call		_sgx_spr_pattern.1
         02:DE22  20 D3 E8   			call	_sgx_spr_pattern.1
12819                        	
12820                        		.dbg	line,	"include\init.c", 173; sgx_spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_16x16);
12821                        		__st.umiq	185, _al
         02:DE25  A9 B9      			lda.l	#185
         02:DE27  85 F8      			sta	_al
12822                        		__ld.uiq	0
         02:DE29  62         			cla
12823                        		__call		_sgx_spr_ctrl.2
         02:DE2A  20 E9 E8   			call	_sgx_spr_ctrl.2
12824                        	
12825                        		.dbg	line,	"include\init.c", 174; }
12826                        	
12827                        		.dbg	line,	"include\init.c", 176; else if(list_object_type[i] == TYPE_POW)
12828                        		__bra		.LL555
         02:DE2D  4C 3B DD   			bra	.LL555
12829    02:DE30             	.LL554:
12830                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         02:DE30  AE 49 26   			ldx	__init_OBJECT_LV1_end - 1
12831                        		__ld.uaxq	_list_object_type
         02:DE33  BD 30 23   			lda	_list_object_type, x
12832                        		__equ_b.uiq	2
         02:DE36  C9 02      			cmp	#2
         02:DE38  F0 01      			beq	!+
         02:DE3A  18         			clc
         02:DE3B             	!:
12833                        		__bfalse	.LL556
         02:DE3B  B0 03 4C 3B			bcc	.LL556
         02:DE3F  DD          
12834                        	
12835                        		.dbg	line,	"include\init.c", 177; {
12836                        	
12837                        		.dbg	line,	"include\init.c", 178; list_object_energy[i] = 0;
12838                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         02:DE40  AE 49 26   			ldx	__init_OBJECT_LV1_end - 1
12839                        		__st.uaxiq	0, _list_object_energy
         02:DE43  9E 62 23   			stz	_list_object_energy, x
12840                        	
12841                        		.dbg	line,	"include\init.c", 179; sgx_spr_pal(18);
12842                        		__ld.uiq	18
         02:DE46  A9 12      			lda	#18
12843                        		__call		_sgx_spr_pal.1
         02:DE48  20 FA E8   			call	_sgx_spr_pal.1
12844                        	
12845                        		.dbg	line,	"include\init.c", 180; sgx_spr_pattern(POW_VRAM_ADR);
12846                        		__ld.wi		27136
         02:DE4B  62         			cla
         02:DE4C  A0 6A      			ldy.h	#27136
12847                        		__call		_sgx_spr_pattern.1
         02:DE4E  20 D3 E8   			call	_sgx_spr_pattern.1
12848                        	
12849                        		.dbg	line,	"include\init.c", 181; sgx_spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_16x16);
12850                        		__st.umiq	185, _al
         02:DE51  A9 B9      			lda.l	#185
         02:DE53  85 F8      			sta	_al
12851                        		__ld.uiq	0
         02:DE55  62         			cla
12852                        		__call		_sgx_spr_ctrl.2
         02:DE56  20 E9 E8   			call	_sgx_spr_ctrl.2
12853                        	
12854                        		.dbg	line,	"include\init.c", 182; }
12855                        	
12856                        		.dbg	line,	"include\init.c", 183; }
12857    02:DE59             	.LL556	.alias		.LL548
12858    02:DE59             	.LL555	.alias		.LL548
12859    02:DE59             	.LL553	.alias		.LL548
12860                        		__bra		.LL548
         02:DE59  4C 3B DD   			bra	.LL548
12861    02:DE5C             	.LL550:
12862                        	
12863                        		.dbg	line,	"include\init.c", 184; }
12864    02:DE5C             	.LL546:
12865                        		__return	0
         02:DE5C  4C EF FF   			jmp	leave_proc
12866                        		.dbg	clear
12867                        		.endp
12868                        		.pceas
12869                        	
12870                        		.dbg	line,	"include\init.c", 187; void init_CHEST_LV1()
12871                        		.dbg	line,	"include\init.c", 188; {
12872                        	;***********************
12873                        	;***********************
12874                        	
12875                        		.hucc
12876    14:C2BB             		.proc		_init_CHEST_LV1
12877                        		__enter		_init_CHEST_LV1
12878                        	
12879                        		.dbg	line,	"include\init.c", 189; signed char i;
12880                        	
12881                        		.dbg	line,	"include\init.c", 191; for(i=0 ; i<level_chest_number ; i++)
12882                        		__st.umiq	0, __init_CHEST_LV1_end - 1  /* i */
         14:C2BB  9C 49 26   			stz	__init_CHEST_LV1_end - 1
12883    14:C2BE             	.LL558:
12884                        		__ld.bm		__init_CHEST_LV1_end - 1  /* i */
         14:C2BE  AD 49 26   			lda	__init_CHEST_LV1_end - 1
         14:C2C1  C2         			cly
         14:C2C2  10 01      			bpl	!+
         14:C2C4  88         			dey
         14:C2C5             	!:
12885                        		__slt_w.um	_level_chest_number
         14:C2C5  CD 9D 23   			cmp	_level_chest_number		; Subtract memory from Y:A.
         14:C2C8  98         			tya
         14:C2C9  E9 00      			sbc	#0
         14:C2CB  50 02      			bvc	!+
         14:C2CD  49 80      			eor	#$80		; -ve if Y:A < memory (signed).
         14:C2CF  0A         	!:		asl	a
12886                        		__btrue		.LL560
         14:C2D0  B0 08      			bcs	.LL560
12887                        		__bra		.LL561
         14:C2D2  4C 80 C3   			bra	.LL561
12888    14:C2D5             	.LL559:
12889                        		__inc.umq	__init_CHEST_LV1_end - 1  /* i */
         14:C2D5  EE 49 26   			inc	__init_CHEST_LV1_end - 1
12890                        		__bra		.LL558
         14:C2D8  80 E4      			bra	.LL558
12891    14:C2DA             	.LL560:
12892                        	
12893                        		.dbg	line,	"include\init.c", 192; {
12894                        	
12895                        		.dbg	line,	"include\init.c", 193; // SET CHEST PROPERTIES //
12896                        	
12897                        		.dbg	line,	"include\init.c", 194; list_chest_x_pos_ref[i] = TABLE_CHEST_X_POS_REF_LV1[i];
12898                        		__ld2x.bmq	__init_CHEST_LV1_end - 1  /* i */
         14:C2DA  AD 49 26   			lda	__init_CHEST_LV1_end - 1
         14:C2DD  0A         			asl	a
         14:C2DE  AA         			tax
12899                        		__ld.wax	_TABLE_CHEST_X_POS_REF_LV1
         14:C2DF  BD EB 60   			lda.l	_TABLE_CHEST_X_POS_REF_LV1, x
         14:C2E2  BC EC 60   			ldy.h	_TABLE_CHEST_X_POS_REF_LV1, x
12900                        		__ld2x.bm	__init_CHEST_LV1_end - 1  /* i */
         14:C2E5  AA         			tax
         14:C2E6  AD 49 26   			lda	__init_CHEST_LV1_end - 1
         14:C2E9  0A         			asl	a
         14:C2EA  22         			sax
12901                        		__st.waxq	_list_chest_x_pos_ref
         14:C2EB  9D C4 25   			sta.l	_list_chest_x_pos_ref, x
         14:C2EE  98         			tya
         14:C2EF  9D C5 25   			sta.h	_list_chest_x_pos_ref, x
12902                        	
12903                        		.dbg	line,	"include\init.c", 195; list_chest_y_pos_ref[i] = TABLE_CHEST_Y_POS_REF_LV1[i];
12904                        		__ld2x.bmq	__init_CHEST_LV1_end - 1  /* i */
         14:C2F2  AD 49 26   			lda	__init_CHEST_LV1_end - 1
         14:C2F5  0A         			asl	a
         14:C2F6  AA         			tax
12905                        		__ld.wax	_TABLE_CHEST_Y_POS_REF_LV1
         14:C2F7  BD EF 60   			lda.l	_TABLE_CHEST_Y_POS_REF_LV1, x
         14:C2FA  BC F0 60   			ldy.h	_TABLE_CHEST_Y_POS_REF_LV1, x
12906                        		__ld2x.bm	__init_CHEST_LV1_end - 1  /* i */
         14:C2FD  AA         			tax
         14:C2FE  AD 49 26   			lda	__init_CHEST_LV1_end - 1
         14:C301  0A         			asl	a
         14:C302  22         			sax
12907                        		__st.waxq	_list_chest_y_pos_ref
         14:C303  9D D4 25   			sta.l	_list_chest_y_pos_ref, x
         14:C306  98         			tya
         14:C307  9D D5 25   			sta.h	_list_chest_y_pos_ref, x
12908                        	
12909                        		.dbg	line,	"include\init.c", 196; list_chest_x_pos[i] = -32;
12910                        		__ld2x.bmq	__init_CHEST_LV1_end - 1  /* i */
         14:C30A  AD 49 26   			lda	__init_CHEST_LV1_end - 1
         14:C30D  0A         			asl	a
         14:C30E  AA         			tax
12911                        		__st.waxiq	-32, _list_chest_x_pos
         14:C30F  A9 E0      			lda.l	#-32
         14:C311  9D A4 25   			sta.l	_list_chest_x_pos, x
         14:C314  A9 FF      			lda.h	#-32
         14:C316  9D A5 25   			sta.h	_list_chest_x_pos, x
12912                        	
12913                        		.dbg	line,	"include\init.c", 197; list_chest_y_pos[i] = -32;
12914                        		__ld2x.bmq	__init_CHEST_LV1_end - 1  /* i */
         14:C319  AD 49 26   			lda	__init_CHEST_LV1_end - 1
         14:C31C  0A         			asl	a
         14:C31D  AA         			tax
12915                        		__st.waxiq	-32, _list_chest_y_pos
         14:C31E  A9 E0      			lda.l	#-32
         14:C320  9D B4 25   			sta.l	_list_chest_y_pos, x
         14:C323  A9 FF      			lda.h	#-32
         14:C325  9D B5 25   			sta.h	_list_chest_y_pos, x
12916                        	
12917                        		.dbg	line,	"include\init.c", 199; if(respawn == FALSE)
12918                        		__not.um	_respawn
         14:C328  AD 14 23   			lda	_respawn
         14:C32B  18         			clc
         14:C32C  D0 01      			bne	!+
         14:C32E  38         			sec
         14:C32F             	!:
12919                        		__bfalse	.LL562
         14:C32F  90 06      			bcc	.LL562
12920                        	
12921                        		.dbg	line,	"include\init.c", 200; {
12922                        	
12923                        		.dbg	line,	"include\init.c", 201; list_chest_state[i] = STATE_ACTIVE;
12924                        		__ldx.bmq	__init_CHEST_LV1_end - 1  /* i */
         14:C331  AE 49 26   			ldx	__init_CHEST_LV1_end - 1
12925                        		__st.uaxiq	0, _list_chest_state
         14:C334  9E 9F 23   			stz	_list_chest_state, x
12926                        	
12927                        		.dbg	line,	"include\init.c", 202; }
12928                        	
12929                        		.dbg	line,	"include\init.c", 205; // SET CHEST SPRITE //
12930                        	
12931                        		.dbg	line,	"include\init.c", 206; sgx_spr_set(i + chest_start_index);
12932    14:C337             	.LL562:
12933                        		__ld.bm		__init_CHEST_LV1_end - 1  /* i */
         14:C337  AD 49 26   			lda	__init_CHEST_LV1_end - 1
         14:C33A  C2         			cly
         14:C33B  10 01      			bpl	!+
         14:C33D  88         			dey
         14:C33E             	!:
12934                        		__add.um	_chest_start_index
         14:C33E  18         			clc
         14:C33F  6D 9C 23   			adc	_chest_start_index
         14:C342  90 01      			bcc	!+
         14:C344  C8         			iny
         14:C345             	!:
12935                        		__call		_sgx_spr_set.1
         14:C345  20 8A E8   			call	_sgx_spr_set.1
12936                        	
12937                        		.dbg	line,	"include\init.c", 207; sgx_spr_x(list_chest_x_pos[i]);
12938                        		__ld2x.bmq	__init_CHEST_LV1_end - 1  /* i */
         14:C348  AD 49 26   			lda	__init_CHEST_LV1_end - 1
         14:C34B  0A         			asl	a
         14:C34C  AA         			tax
12939                        		__ld.wax	_list_chest_x_pos
         14:C34D  BD A4 25   			lda.l	_list_chest_x_pos, x
         14:C350  BC A5 25   			ldy.h	_list_chest_x_pos, x
12940                        		__call		_sgx_spr_x.1
         14:C353  20 B7 E8   			call	_sgx_spr_x.1
12941                        	
12942                        		.dbg	line,	"include\init.c", 208; sgx_spr_y(list_chest_y_pos[i]);
12943                        		__ld2x.bmq	__init_CHEST_LV1_end - 1  /* i */
         14:C356  AD 49 26   			lda	__init_CHEST_LV1_end - 1
         14:C359  0A         			asl	a
         14:C35A  AA         			tax
12944                        		__ld.wax	_list_chest_y_pos
         14:C35B  BD B4 25   			lda.l	_list_chest_y_pos, x
         14:C35E  BC B5 25   			ldy.h	_list_chest_y_pos, x
12945                        		__call		_sgx_spr_y.1
         14:C361  20 C6 E8   			call	_sgx_spr_y.1
12946                        	
12947                        		.dbg	line,	"include\init.c", 209; sgx_spr_pri(TRUE);
12948                        		__ld.uiq	1
         14:C364  A9 01      			lda	#1
12949                        		__call		_sgx_spr_pri.1
         14:C366  20 09 E9   			call	_sgx_spr_pri.1
12950                        	
12951                        		.dbg	line,	"include\init.c", 212; sgx_spr_pal(18);
12952                        		__ld.uiq	18
         14:C369  A9 12      			lda	#18
12953                        		__call		_sgx_spr_pal.1
         14:C36B  20 FA E8   			call	_sgx_spr_pal.1
12954                        	
12955                        		.dbg	line,	"include\init.c", 213; sgx_spr_pattern(CHEST_VRAM_ADR);
12956                        		__ld.wi		28672
         14:C36E  62         			cla
         14:C36F  A0 70      			ldy.h	#28672
12957                        		__call		_sgx_spr_pattern.1
         14:C371  20 D3 E8   			call	_sgx_spr_pattern.1
12958                        	
12959                        		.dbg	line,	"include\init.c", 214; sgx_spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_32x32);
12960                        		__st.umiq	185, _al
         14:C374  A9 B9      			lda.l	#185
         14:C376  85 F8      			sta	_al
12961                        		__ld.uiq	17
         14:C378  A9 11      			lda	#17
12962                        		__call		_sgx_spr_ctrl.2
         14:C37A  20 E9 E8   			call	_sgx_spr_ctrl.2
12963                        	
12964                        		.dbg	line,	"include\init.c", 215; }
12965                        		__bra		.LL559
         14:C37D  4C D5 C2   			bra	.LL559
12966    14:C380             	.LL561:
12967                        	
12968                        		.dbg	line,	"include\init.c", 216; }
12969    14:C380             	.LL557:
12970                        		__return	0
         14:C380  4C EF FF   			jmp	leave_proc
12971                        		.dbg	clear
12972                        		.endp
12973                        		.pceas
12974                        	
12975                        		.dbg	line,	"include\init.c", 219; void init_NPC_LV1()
12976                        		.dbg	line,	"include\init.c", 220; {
12977                        	;***********************
12978                        	;***********************
12979                        	
12980                        		.hucc
12981    14:C1E6             		.proc		_init_NPC_LV1
12982                        		__enter		_init_NPC_LV1
12983                        	
12984                        		.dbg	line,	"include\init.c", 221; signed char i;
12985                        	
12986                        		.dbg	line,	"include\init.c", 223; for(i=0 ; i<level_npc_number ; i++)
12987                        		__st.umiq	0, __init_NPC_LV1_end - 1  /* i */
         14:C1E6  9C 49 26   			stz	__init_NPC_LV1_end - 1
12988    14:C1E9             	.LL564:
12989                        		__ld.bm		__init_NPC_LV1_end - 1  /* i */
         14:C1E9  AD 49 26   			lda	__init_NPC_LV1_end - 1
         14:C1EC  C2         			cly
         14:C1ED  10 01      			bpl	!+
         14:C1EF  88         			dey
         14:C1F0             	!:
12990                        		__slt_w.um	_level_npc_number
         14:C1F0  CD B0 23   			cmp	_level_npc_number		; Subtract memory from Y:A.
         14:C1F3  98         			tya
         14:C1F4  E9 00      			sbc	#0
         14:C1F6  50 02      			bvc	!+
         14:C1F8  49 80      			eor	#$80		; -ve if Y:A < memory (signed).
         14:C1FA  0A         	!:		asl	a
12991                        		__btrue		.LL566
         14:C1FB  B0 08      			bcs	.LL566
12992                        		__bra		.LL567
         14:C1FD  4C B8 C2   			bra	.LL567
12993    14:C200             	.LL565:
12994                        		__inc.umq	__init_NPC_LV1_end - 1  /* i */
         14:C200  EE 49 26   			inc	__init_NPC_LV1_end - 1
12995                        		__bra		.LL564
         14:C203  80 E4      			bra	.LL564
12996    14:C205             	.LL566:
12997                        	
12998                        		.dbg	line,	"include\init.c", 224; {
12999                        	
13000                        		.dbg	line,	"include\init.c", 225; // SET NPC PROPERTIES //
13001                        	
13002                        		.dbg	line,	"include\init.c", 226; list_npc_type[i] = TABLE_NPC_TYPE_LV1[i];
13003                        		__ldx.bmq	__init_NPC_LV1_end - 1  /* i */
         14:C205  AE 49 26   			ldx	__init_NPC_LV1_end - 1
13004                        		__ld.uax	_TABLE_NPC_TYPE_LV1
         14:C208  BD 6E 60   			lda	_TABLE_NPC_TYPE_LV1, x
         14:C20B  C2         			cly
13005                        		__ldx.bmq	__init_NPC_LV1_end - 1  /* i */
         14:C20C  AE 49 26   			ldx	__init_NPC_LV1_end - 1
13006                        		__st.uaxq	_list_npc_type
         14:C20F  9D B2 23   			sta	_list_npc_type, x
13007                        	
13008                        		.dbg	line,	"include\init.c", 227; list_npc_x_pos_ref[i] = TABLE_NPC_X_POS_REF_LV1[i];
13009                        		__ld2x.bmq	__init_NPC_LV1_end - 1  /* i */
         14:C212  AD 49 26   			lda	__init_NPC_LV1_end - 1
         14:C215  0A         			asl	a
         14:C216  AA         			tax
13010                        		__ld.wax	_TABLE_NPC_X_POS_REF_LV1
         14:C217  BD 70 60   			lda.l	_TABLE_NPC_X_POS_REF_LV1, x
         14:C21A  BC 71 60   			ldy.h	_TABLE_NPC_X_POS_REF_LV1, x
13011                        		__ld2x.bm	__init_NPC_LV1_end - 1  /* i */
         14:C21D  AA         			tax
         14:C21E  AD 49 26   			lda	__init_NPC_LV1_end - 1
         14:C221  0A         			asl	a
         14:C222  22         			sax
13012                        		__st.waxq	_list_npc_x_pos_ref
         14:C223  9D 08 26   			sta.l	_list_npc_x_pos_ref, x
         14:C226  98         			tya
         14:C227  9D 09 26   			sta.h	_list_npc_x_pos_ref, x
13013                        	
13014                        		.dbg	line,	"include\init.c", 228; list_npc_y_pos_ref[i] = TABLE_NPC_Y_POS_REF_LV1[i];
13015                        		__ld2x.bmq	__init_NPC_LV1_end - 1  /* i */
         14:C22A  AD 49 26   			lda	__init_NPC_LV1_end - 1
         14:C22D  0A         			asl	a
         14:C22E  AA         			tax
13016                        		__ld.wax	_TABLE_NPC_Y_POS_REF_LV1
         14:C22F  BD 74 60   			lda.l	_TABLE_NPC_Y_POS_REF_LV1, x
         14:C232  BC 75 60   			ldy.h	_TABLE_NPC_Y_POS_REF_LV1, x
13017                        		__ld2x.bm	__init_NPC_LV1_end - 1  /* i */
         14:C235  AA         			tax
         14:C236  AD 49 26   			lda	__init_NPC_LV1_end - 1
         14:C239  0A         			asl	a
         14:C23A  22         			sax
13018                        		__st.waxq	_list_npc_y_pos_ref
         14:C23B  9D 1A 26   			sta.l	_list_npc_y_pos_ref, x
         14:C23E  98         			tya
         14:C23F  9D 1B 26   			sta.h	_list_npc_y_pos_ref, x
13019                        	
13020                        		.dbg	line,	"include\init.c", 229; list_npc_x_pos[i] = -32;
13021                        		__ld2x.bmq	__init_NPC_LV1_end - 1  /* i */
         14:C242  AD 49 26   			lda	__init_NPC_LV1_end - 1
         14:C245  0A         			asl	a
         14:C246  AA         			tax
13022                        		__st.waxiq	-32, _list_npc_x_pos
         14:C247  A9 E0      			lda.l	#-32
         14:C249  9D E4 25   			sta.l	_list_npc_x_pos, x
         14:C24C  A9 FF      			lda.h	#-32
         14:C24E  9D E5 25   			sta.h	_list_npc_x_pos, x
13023                        	
13024                        		.dbg	line,	"include\init.c", 230; list_npc_y_pos[i] = -32;
13025                        		__ld2x.bmq	__init_NPC_LV1_end - 1  /* i */
         14:C251  AD 49 26   			lda	__init_NPC_LV1_end - 1
         14:C254  0A         			asl	a
         14:C255  AA         			tax
13026                        		__st.waxiq	-32, _list_npc_y_pos
         14:C256  A9 E0      			lda.l	#-32
         14:C258  9D F6 25   			sta.l	_list_npc_y_pos, x
         14:C25B  A9 FF      			lda.h	#-32
         14:C25D  9D F7 25   			sta.h	_list_npc_y_pos, x
13027                        	
13028                        		.dbg	line,	"include\init.c", 232; if(respawn == FALSE)
13029                        		__not.um	_respawn
         14:C260  AD 14 23   			lda	_respawn
         14:C263  18         			clc
         14:C264  D0 01      			bne	!+
         14:C266  38         			sec
         14:C267             	!:
13030                        		__bfalse	.LL568
         14:C267  90 06      			bcc	.LL568
13031                        	
13032                        		.dbg	line,	"include\init.c", 233; {
13033                        	
13034                        		.dbg	line,	"include\init.c", 234; list_npc_state[i] = STATE_ACTIVE;
13035                        		__ldx.bmq	__init_NPC_LV1_end - 1  /* i */
         14:C269  AE 49 26   			ldx	__init_NPC_LV1_end - 1
13036                        		__st.uaxiq	0, _list_npc_state
         14:C26C  9E BB 23   			stz	_list_npc_state, x
13037                        	
13038                        		.dbg	line,	"include\init.c", 235; }
13039                        	
13040                        		.dbg	line,	"include\init.c", 238; // SET NPC SPRITE //
13041                        	
13042                        		.dbg	line,	"include\init.c", 239; sgx_spr_set(i + npc_start_index);
13043    14:C26F             	.LL568:
13044                        		__ld.bm		__init_NPC_LV1_end - 1  /* i */
         14:C26F  AD 49 26   			lda	__init_NPC_LV1_end - 1
         14:C272  C2         			cly
         14:C273  10 01      			bpl	!+
         14:C275  88         			dey
         14:C276             	!:
13045                        		__add.um	_npc_start_index
         14:C276  18         			clc
         14:C277  6D AF 23   			adc	_npc_start_index
         14:C27A  90 01      			bcc	!+
         14:C27C  C8         			iny
         14:C27D             	!:
13046                        		__call		_sgx_spr_set.1
         14:C27D  20 8A E8   			call	_sgx_spr_set.1
13047                        	
13048                        		.dbg	line,	"include\init.c", 240; sgx_spr_x(list_npc_x_pos[i]);
13049                        		__ld2x.bmq	__init_NPC_LV1_end - 1  /* i */
         14:C280  AD 49 26   			lda	__init_NPC_LV1_end - 1
         14:C283  0A         			asl	a
         14:C284  AA         			tax
13050                        		__ld.wax	_list_npc_x_pos
         14:C285  BD E4 25   			lda.l	_list_npc_x_pos, x
         14:C288  BC E5 25   			ldy.h	_list_npc_x_pos, x
13051                        		__call		_sgx_spr_x.1
         14:C28B  20 B7 E8   			call	_sgx_spr_x.1
13052                        	
13053                        		.dbg	line,	"include\init.c", 241; sgx_spr_y(list_npc_y_pos[i]);
13054                        		__ld2x.bmq	__init_NPC_LV1_end - 1  /* i */
         14:C28E  AD 49 26   			lda	__init_NPC_LV1_end - 1
         14:C291  0A         			asl	a
         14:C292  AA         			tax
13055                        		__ld.wax	_list_npc_y_pos
         14:C293  BD F6 25   			lda.l	_list_npc_y_pos, x
         14:C296  BC F7 25   			ldy.h	_list_npc_y_pos, x
13056                        		__call		_sgx_spr_y.1
         14:C299  20 C6 E8   			call	_sgx_spr_y.1
13057                        	
13058                        		.dbg	line,	"include\init.c", 242; sgx_spr_pri(TRUE);
13059                        		__ld.uiq	1
         14:C29C  A9 01      			lda	#1
13060                        		__call		_sgx_spr_pri.1
         14:C29E  20 09 E9   			call	_sgx_spr_pri.1
13061                        	
13062                        		.dbg	line,	"include\init.c", 245; sgx_spr_pal(17);
13063                        		__ld.uiq	17
         14:C2A1  A9 11      			lda	#17
13064                        		__call		_sgx_spr_pal.1
         14:C2A3  20 FA E8   			call	_sgx_spr_pal.1
13065                        	
13066                        		.dbg	line,	"include\init.c", 246; sgx_spr_pattern(NPC_VRAM_ADR);
13067                        		__ld.wi		30208
         14:C2A6  62         			cla
         14:C2A7  A0 76      			ldy.h	#30208
13068                        		__call		_sgx_spr_pattern.1
         14:C2A9  20 D3 E8   			call	_sgx_spr_pattern.1
13069                        	
13070                        		.dbg	line,	"include\init.c", 247; sgx_spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_32x32);
13071                        		__st.umiq	185, _al
         14:C2AC  A9 B9      			lda.l	#185
         14:C2AE  85 F8      			sta	_al
13072                        		__ld.uiq	17
         14:C2B0  A9 11      			lda	#17
13073                        		__call		_sgx_spr_ctrl.2
         14:C2B2  20 E9 E8   			call	_sgx_spr_ctrl.2
13074                        	
13075                        		.dbg	line,	"include\init.c", 248; }
13076                        		__bra		.LL565
         14:C2B5  4C 00 C2   			bra	.LL565
13077    14:C2B8             	.LL567:
13078                        	
13079                        		.dbg	line,	"include\init.c", 249; }
13080    14:C2B8             	.LL563:
13081                        		__return	0
         14:C2B8  4C EF FF   			jmp	leave_proc
13082                        		.dbg	clear
13083                        		.endp
13084                        		.pceas
13085                        	
13086                        		.dbg	line,	"include\init.c", 256; void init_HUD()
13087                        		.dbg	line,	"include\init.c", 257; {
13088                        	;***********************
13089                        	;***********************
13090                        	
13091                        		.hucc
13092    02:CD24             		.proc		_init_HUD
13093                        		__enter		_init_HUD
13094                        	
13095                        		.dbg	line,	"include\init.c", 258; //**************************************************************************************//
13096                        	
13097                        		.dbg	line,	"include\init.c", 259; //                                                                                      //
13098                        	
13099                        		.dbg	line,	"include\init.c", 260; //                                        VDC 1                                         //
13100                        	
13101                        		.dbg	line,	"include\init.c", 261; //                                                                                      //
13102                        	
13103                        		.dbg	line,	"include\init.c", 262; //**************************************************************************************//
13104                        	
13105                        		.dbg	line,	"include\init.c", 264; //--------------------------------------------------------------------------------------//
13106                        	
13107                        		.dbg	line,	"include\init.c", 265; //                                      LOAD FONT                                       //
13108                        	
13109                        		.dbg	line,	"include\init.c", 266; //--------------------------------------------------------------------------------------//
13110                        	
13111                        		.dbg	line,	"include\init.c", 268; load_vram( 0x0800, tileset_FONT, SIZEOF(tileset_FONT) >> 1 );
13112                        		__st.wmiq	2048, _di
         02:CD24  64 F0      			stz.l	_di
         02:CD26  A9 08      			lda.h	#2048
         02:CD28  85 F1      			sta.h	_di
13113                        		__farptr	_tileset_FONT, _bp_bank, _bp
         02:CD2A  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_FONT))
         02:CD2C  85 EC      			sta.l	_bp
         02:CD2E  A9 60      			lda.h	#$6000 + ($1FFF & (_tileset_FONT))
         02:CD30  85 ED      			sta.h	_bp
         02:CD32  A9 03      			lda	#bank(_tileset_FONT)
         02:CD34  85 02      			sta	_bp_bank
13114                        		__ld.wi		___sizeof__tileset_FONT
         02:CD36  A9 00      			lda.l	#___sizeof__tileset_FONT
         02:CD38  A0 0C      			ldy.h	#___sizeof__tileset_FONT
13115                        		__lsr.wi	1
         02:CD3A  42         			say
         02:CD3B  4A         			lsr	a
         02:CD3C  42         			say
         02:CD3D  6A         			ror	a
13116                        		__st.wmq	_ax
         02:CD3E  85 F8      			sta.l	_ax
         02:CD40  84 F9      			sty.h	_ax
13117                        		 _load_vram.3
         02:CD42  82         			clx				; Offset to PCE VDC.
         02:CD43  20 4F FF   			call	load_vram_x
13118                        	
13119                        		.dbg	line,	"include\init.c", 270; set_font_pal(15);
13120                        		__ld.uiq	15
         02:CD46  A9 0F      			lda	#15
13121                        		__call		_set_font_pal.1
         02:CD48  20 09 E6   			call	_set_font_pal.1
13122                        	
13123                        		.dbg	line,	"include\init.c", 273; //--------------------------------------------------------------------------------------//
13124                        	
13125                        		.dbg	line,	"include\init.c", 274; //                                    LOAD TILESET                                      //
13126                        	
13127                        		.dbg	line,	"include\init.c", 275; //--------------------------------------------------------------------------------------//
13128                        	
13129                        		.dbg	line,	"include\init.c", 277; load_vram( 0x1000, tileset_HUD, SIZEOF(tileset_HUD) >> 1 );
13130                        		__st.wmiq	4096, _di
         02:CD4B  64 F0      			stz.l	_di
         02:CD4D  A9 10      			lda.h	#4096
         02:CD4F  85 F1      			sta.h	_di
13131                        		__farptr	_tileset_HUD, _bp_bank, _bp
         02:CD51  A9 A0      			lda.l	#$6000 + ($1FFF & (_tileset_HUD))
         02:CD53  85 EC      			sta.l	_bp
         02:CD55  A9 79      			lda.h	#$6000 + ($1FFF & (_tileset_HUD))
         02:CD57  85 ED      			sta.h	_bp
         02:CD59  A9 09      			lda	#bank(_tileset_HUD)
         02:CD5B  85 02      			sta	_bp_bank
13132                        		__ld.wi		___sizeof__tileset_HUD
         02:CD5D  A9 60      			lda.l	#___sizeof__tileset_HUD
         02:CD5F  A0 06      			ldy.h	#___sizeof__tileset_HUD
13133                        		__lsr.wi	1
         02:CD61  42         			say
         02:CD62  4A         			lsr	a
         02:CD63  42         			say
         02:CD64  6A         			ror	a
13134                        		__st.wmq	_ax
         02:CD65  85 F8      			sta.l	_ax
         02:CD67  84 F9      			sty.h	_ax
13135                        		 _load_vram.3
         02:CD69  82         			clx				; Offset to PCE VDC.
         02:CD6A  20 4F FF   			call	load_vram_x
13136                        	
13137                        		.dbg	line,	"include\init.c", 280; //--------------------------------------------------------------------------------------//
13138                        	
13139                        		.dbg	line,	"include\init.c", 281; //                                 LOAD LIFEBAR TILES                                   //
13140                        	
13141                        		.dbg	line,	"include\init.c", 282; //--------------------------------------------------------------------------------------//
13142                        	
13143                        		.dbg	line,	"include\init.c", 284; load_vram( LIFEBAR_1_VRAM_ADR, tileset_LIFE_RED, SIZEOF(tileset_LIFE_RED) >> 1 );
13144                        		__st.wmiq	4096, _di
         02:CD6D  64 F0      			stz.l	_di
         02:CD6F  A9 10      			lda.h	#4096
         02:CD71  85 F1      			sta.h	_di
13145                        		__farptr	_tileset_LIFE_RED, _bp_bank, _bp
         02:CD73  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_LIFE_RED))
         02:CD75  85 EC      			sta.l	_bp
         02:CD77  A9 74      			lda.h	#$6000 + ($1FFF & (_tileset_LIFE_RED))
         02:CD79  85 ED      			sta.h	_bp
         02:CD7B  A9 03      			lda	#bank(_tileset_LIFE_RED)
         02:CD7D  85 02      			sta	_bp_bank
13146                        		__ld.wi		___sizeof__tileset_LIFE_RED
         02:CD7F  A9 40      			lda.l	#___sizeof__tileset_LIFE_RED
         02:CD81  A0 00      			ldy.h	#___sizeof__tileset_LIFE_RED
13147                        		__lsr.wi	1
         02:CD83  42         			say
         02:CD84  4A         			lsr	a
         02:CD85  42         			say
         02:CD86  6A         			ror	a
13148                        		__st.wmq	_ax
         02:CD87  85 F8      			sta.l	_ax
         02:CD89  84 F9      			sty.h	_ax
13149                        		 _load_vram.3
         02:CD8B  82         			clx				; Offset to PCE VDC.
         02:CD8C  20 4F FF   			call	load_vram_x
13150                        	
13151                        		.dbg	line,	"include\init.c", 285; load_vram( LIFEBAR_2_VRAM_ADR, tileset_LIFE_ORANGE, SIZEOF(tileset_LIFE_ORANGE) >> 1 );
13152                        		__st.wmiq	4128, _di
         02:CD8F  A9 20      			lda.l	#4128
         02:CD91  85 F0      			sta.l	_di
         02:CD93  A9 10      			lda.h	#4128
         02:CD95  85 F1      			sta.h	_di
13153                        		__farptr	_tileset_LIFE_ORANGE, _bp_bank, _bp
         02:CD97  A9 40      			lda.l	#$6000 + ($1FFF & (_tileset_LIFE_ORANGE))
         02:CD99  85 EC      			sta.l	_bp
         02:CD9B  A9 74      			lda.h	#$6000 + ($1FFF & (_tileset_LIFE_ORANGE))
         02:CD9D  85 ED      			sta.h	_bp
         02:CD9F  A9 03      			lda	#bank(_tileset_LIFE_ORANGE)
         02:CDA1  85 02      			sta	_bp_bank
13154                        		__ld.wi		___sizeof__tileset_LIFE_ORANGE
         02:CDA3  A9 40      			lda.l	#___sizeof__tileset_LIFE_ORANGE
         02:CDA5  A0 00      			ldy.h	#___sizeof__tileset_LIFE_ORANGE
13155                        		__lsr.wi	1
         02:CDA7  42         			say
         02:CDA8  4A         			lsr	a
         02:CDA9  42         			say
         02:CDAA  6A         			ror	a
13156                        		__st.wmq	_ax
         02:CDAB  85 F8      			sta.l	_ax
         02:CDAD  84 F9      			sty.h	_ax
13157                        		 _load_vram.3
         02:CDAF  82         			clx				; Offset to PCE VDC.
         02:CDB0  20 4F FF   			call	load_vram_x
13158                        	
13159                        		.dbg	line,	"include\init.c", 286; load_vram( LIFEBAR_3_VRAM_ADR, tileset_LIFE_YELLOW, SIZEOF(tileset_LIFE_YELLOW) >> 1 );
13160                        		__st.wmiq	4160, _di
         02:CDB3  A9 40      			lda.l	#4160
         02:CDB5  85 F0      			sta.l	_di
         02:CDB7  A9 10      			lda.h	#4160
         02:CDB9  85 F1      			sta.h	_di
13161                        		__farptr	_tileset_LIFE_YELLOW, _bp_bank, _bp
         02:CDBB  A9 80      			lda.l	#$6000 + ($1FFF & (_tileset_LIFE_YELLOW))
         02:CDBD  85 EC      			sta.l	_bp
         02:CDBF  A9 74      			lda.h	#$6000 + ($1FFF & (_tileset_LIFE_YELLOW))
         02:CDC1  85 ED      			sta.h	_bp
         02:CDC3  A9 03      			lda	#bank(_tileset_LIFE_YELLOW)
         02:CDC5  85 02      			sta	_bp_bank
13162                        		__ld.wi		___sizeof__tileset_LIFE_YELLOW
         02:CDC7  A9 40      			lda.l	#___sizeof__tileset_LIFE_YELLOW
         02:CDC9  A0 00      			ldy.h	#___sizeof__tileset_LIFE_YELLOW
13163                        		__lsr.wi	1
         02:CDCB  42         			say
         02:CDCC  4A         			lsr	a
         02:CDCD  42         			say
         02:CDCE  6A         			ror	a
13164                        		__st.wmq	_ax
         02:CDCF  85 F8      			sta.l	_ax
         02:CDD1  84 F9      			sty.h	_ax
13165                        		 _load_vram.3
         02:CDD3  82         			clx				; Offset to PCE VDC.
         02:CDD4  20 4F FF   			call	load_vram_x
13166                        	
13167                        		.dbg	line,	"include\init.c", 287; load_vram( LIFEBAR_4_VRAM_ADR, tileset_LIFE_YELLOW, SIZEOF(tileset_LIFE_YELLOW) >> 1 );
13168                        		__st.wmiq	4192, _di
         02:CDD7  A9 60      			lda.l	#4192
         02:CDD9  85 F0      			sta.l	_di
         02:CDDB  A9 10      			lda.h	#4192
         02:CDDD  85 F1      			sta.h	_di
13169                        		__farptr	_tileset_LIFE_YELLOW, _bp_bank, _bp
         02:CDDF  A9 80      			lda.l	#$6000 + ($1FFF & (_tileset_LIFE_YELLOW))
         02:CDE1  85 EC      			sta.l	_bp
         02:CDE3  A9 74      			lda.h	#$6000 + ($1FFF & (_tileset_LIFE_YELLOW))
         02:CDE5  85 ED      			sta.h	_bp
         02:CDE7  A9 03      			lda	#bank(_tileset_LIFE_YELLOW)
         02:CDE9  85 02      			sta	_bp_bank
13170                        		__ld.wi		___sizeof__tileset_LIFE_YELLOW
         02:CDEB  A9 40      			lda.l	#___sizeof__tileset_LIFE_YELLOW
         02:CDED  A0 00      			ldy.h	#___sizeof__tileset_LIFE_YELLOW
13171                        		__lsr.wi	1
         02:CDEF  42         			say
         02:CDF0  4A         			lsr	a
         02:CDF1  42         			say
         02:CDF2  6A         			ror	a
13172                        		__st.wmq	_ax
         02:CDF3  85 F8      			sta.l	_ax
         02:CDF5  84 F9      			sty.h	_ax
13173                        		 _load_vram.3
         02:CDF7  82         			clx				; Offset to PCE VDC.
         02:CDF8  20 4F FF   			call	load_vram_x
13174                        	
13175                        		.dbg	line,	"include\init.c", 288; load_vram( LIFEBAR_5_VRAM_ADR, tileset_LIFE_EMPTY, SIZEOF(tileset_LIFE_EMPTY) >> 1 );
13176                        		__st.wmiq	4224, _di
         02:CDFB  A9 80      			lda.l	#4224
         02:CDFD  85 F0      			sta.l	_di
         02:CDFF  A9 10      			lda.h	#4224
         02:CE01  85 F1      			sta.h	_di
13177                        		__farptr	_tileset_LIFE_EMPTY, _bp_bank, _bp
         02:CE03  A9 C0      			lda.l	#$6000 + ($1FFF & (_tileset_LIFE_EMPTY))
         02:CE05  85 EC      			sta.l	_bp
         02:CE07  A9 74      			lda.h	#$6000 + ($1FFF & (_tileset_LIFE_EMPTY))
         02:CE09  85 ED      			sta.h	_bp
         02:CE0B  A9 03      			lda	#bank(_tileset_LIFE_EMPTY)
         02:CE0D  85 02      			sta	_bp_bank
13178                        		__ld.wi		___sizeof__tileset_LIFE_EMPTY
         02:CE0F  A9 40      			lda.l	#___sizeof__tileset_LIFE_EMPTY
         02:CE11  A0 00      			ldy.h	#___sizeof__tileset_LIFE_EMPTY
13179                        		__lsr.wi	1
         02:CE13  42         			say
         02:CE14  4A         			lsr	a
         02:CE15  42         			say
         02:CE16  6A         			ror	a
13180                        		__st.wmq	_ax
         02:CE17  85 F8      			sta.l	_ax
         02:CE19  84 F9      			sty.h	_ax
13181                        		 _load_vram.3
         02:CE1B  82         			clx				; Offset to PCE VDC.
         02:CE1C  20 4F FF   			call	load_vram_x
13182                        	
13183                        		.dbg	line,	"include\init.c", 291; //--------------------------------------------------------------------------------------//
13184                        	
13185                        		.dbg	line,	"include\init.c", 292; //                               LOAD WEAPON + ARMOR TILES                              //
13186                        	
13187                        		.dbg	line,	"include\init.c", 293; //--------------------------------------------------------------------------------------//
13188                        	
13189                        		.dbg	line,	"include\init.c", 295; if(weapon_level == 1)
13190                        		__ld.umq	_weapon_level
         02:CE1F  AD 24 23   			lda	_weapon_level
13191                        		__equ_b.uiq	1
         02:CE22  C9 01      			cmp	#1
         02:CE24  F0 01      			beq	!+
         02:CE26  18         			clc
         02:CE27             	!:
13192                        		__bfalse	.LL570
         02:CE27  90 27      			bcc	.LL570
13193                        	
13194                        		.dbg	line,	"include\init.c", 296; {
13195                        	
13196                        		.dbg	line,	"include\init.c", 297; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_1, SIZEOF(tileset_WEAPON_1) >> 1 );
13197                        		__st.wmiq	4256, _di
         02:CE29  A9 A0      			lda.l	#4256
         02:CE2B  85 F0      			sta.l	_di
         02:CE2D  A9 10      			lda.h	#4256
         02:CE2F  85 F1      			sta.h	_di
13198                        		__farptr	_tileset_WEAPON_1, _bp_bank, _bp
         02:CE31  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_1))
         02:CE33  85 EC      			sta.l	_bp
         02:CE35  A9 77      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_1))
         02:CE37  85 ED      			sta.h	_bp
         02:CE39  A9 03      			lda	#bank(_tileset_WEAPON_1)
         02:CE3B  85 02      			sta	_bp_bank
13199                        		__ld.wi		___sizeof__tileset_WEAPON_1
         02:CE3D  A9 80      			lda.l	#___sizeof__tileset_WEAPON_1
         02:CE3F  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_1
13200                        		__lsr.wi	1
         02:CE41  42         			say
         02:CE42  4A         			lsr	a
         02:CE43  42         			say
         02:CE44  6A         			ror	a
13201                        		__st.wmq	_ax
         02:CE45  85 F8      			sta.l	_ax
         02:CE47  84 F9      			sty.h	_ax
13202                        		 _load_vram.3
         02:CE49  82         			clx				; Offset to PCE VDC.
         02:CE4A  20 4F FF   			call	load_vram_x
13203                        	
13204                        		.dbg	line,	"include\init.c", 298; }
13205                        	
13206                        		.dbg	line,	"include\init.c", 300; else if(weapon_level == 2)
13207                        		__bra		.LL571
         02:CE4D  4C 0F CF   			bra	.LL571
13208    02:CE50             	.LL570:
13209                        		__ld.umq	_weapon_level
         02:CE50  AD 24 23   			lda	_weapon_level
13210                        		__equ_b.uiq	2
         02:CE53  C9 02      			cmp	#2
         02:CE55  F0 01      			beq	!+
         02:CE57  18         			clc
         02:CE58             	!:
13211                        		__bfalse	.LL572
         02:CE58  90 27      			bcc	.LL572
13212                        	
13213                        		.dbg	line,	"include\init.c", 301; {
13214                        	
13215                        		.dbg	line,	"include\init.c", 302; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_2, SIZEOF(tileset_WEAPON_2) >> 1 );
13216                        		__st.wmiq	4256, _di
         02:CE5A  A9 A0      			lda.l	#4256
         02:CE5C  85 F0      			sta.l	_di
         02:CE5E  A9 10      			lda.h	#4256
         02:CE60  85 F1      			sta.h	_di
13217                        		__farptr	_tileset_WEAPON_2, _bp_bank, _bp
         02:CE62  A9 80      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_2))
         02:CE64  85 EC      			sta.l	_bp
         02:CE66  A9 77      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_2))
         02:CE68  85 ED      			sta.h	_bp
         02:CE6A  A9 03      			lda	#bank(_tileset_WEAPON_2)
         02:CE6C  85 02      			sta	_bp_bank
13218                        		__ld.wi		___sizeof__tileset_WEAPON_2
         02:CE6E  A9 80      			lda.l	#___sizeof__tileset_WEAPON_2
         02:CE70  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_2
13219                        		__lsr.wi	1
         02:CE72  42         			say
         02:CE73  4A         			lsr	a
         02:CE74  42         			say
         02:CE75  6A         			ror	a
13220                        		__st.wmq	_ax
         02:CE76  85 F8      			sta.l	_ax
         02:CE78  84 F9      			sty.h	_ax
13221                        		 _load_vram.3
         02:CE7A  82         			clx				; Offset to PCE VDC.
         02:CE7B  20 4F FF   			call	load_vram_x
13222                        	
13223                        		.dbg	line,	"include\init.c", 303; }
13224                        	
13225                        		.dbg	line,	"include\init.c", 305; else if(weapon_level == 3)
13226                        		__bra		.LL573
         02:CE7E  4C 0F CF   			bra	.LL573
13227    02:CE81             	.LL572:
13228                        		__ld.umq	_weapon_level
         02:CE81  AD 24 23   			lda	_weapon_level
13229                        		__equ_b.uiq	3
         02:CE84  C9 03      			cmp	#3
         02:CE86  F0 01      			beq	!+
         02:CE88  18         			clc
         02:CE89             	!:
13230                        		__bfalse	.LL574
         02:CE89  90 26      			bcc	.LL574
13231                        	
13232                        		.dbg	line,	"include\init.c", 306; {
13233                        	
13234                        		.dbg	line,	"include\init.c", 307; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_4, SIZEOF(tileset_WEAPON_4) >> 1 );
13235                        		__st.wmiq	4256, _di
         02:CE8B  A9 A0      			lda.l	#4256
         02:CE8D  85 F0      			sta.l	_di
         02:CE8F  A9 10      			lda.h	#4256
         02:CE91  85 F1      			sta.h	_di
13236                        		__farptr	_tileset_WEAPON_4, _bp_bank, _bp
         02:CE93  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_4))
         02:CE95  85 EC      			sta.l	_bp
         02:CE97  A9 78      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_4))
         02:CE99  85 ED      			sta.h	_bp
         02:CE9B  A9 03      			lda	#bank(_tileset_WEAPON_4)
         02:CE9D  85 02      			sta	_bp_bank
13237                        		__ld.wi		___sizeof__tileset_WEAPON_4
         02:CE9F  A9 80      			lda.l	#___sizeof__tileset_WEAPON_4
         02:CEA1  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_4
13238                        		__lsr.wi	1
         02:CEA3  42         			say
         02:CEA4  4A         			lsr	a
         02:CEA5  42         			say
         02:CEA6  6A         			ror	a
13239                        		__st.wmq	_ax
         02:CEA7  85 F8      			sta.l	_ax
         02:CEA9  84 F9      			sty.h	_ax
13240                        		 _load_vram.3
         02:CEAB  82         			clx				; Offset to PCE VDC.
         02:CEAC  20 4F FF   			call	load_vram_x
13241                        	
13242                        		.dbg	line,	"include\init.c", 308; }
13243                        	
13244                        		.dbg	line,	"include\init.c", 310; else if(weapon_level == 4)
13245                        		__bra		.LL575
         02:CEAF  80 5E      			bra	.LL575
13246    02:CEB1             	.LL574:
13247                        		__ld.umq	_weapon_level
         02:CEB1  AD 24 23   			lda	_weapon_level
13248                        		__equ_b.uiq	4
         02:CEB4  C9 04      			cmp	#4
         02:CEB6  F0 01      			beq	!+
         02:CEB8  18         			clc
         02:CEB9             	!:
13249                        		__bfalse	.LL576
         02:CEB9  90 26      			bcc	.LL576
13250                        	
13251                        		.dbg	line,	"include\init.c", 311; {
13252                        	
13253                        		.dbg	line,	"include\init.c", 312; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_5, SIZEOF(tileset_WEAPON_5) >> 1 );
13254                        		__st.wmiq	4256, _di
         02:CEBB  A9 A0      			lda.l	#4256
         02:CEBD  85 F0      			sta.l	_di
         02:CEBF  A9 10      			lda.h	#4256
         02:CEC1  85 F1      			sta.h	_di
13255                        		__farptr	_tileset_WEAPON_5, _bp_bank, _bp
         02:CEC3  A9 80      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_5))
         02:CEC5  85 EC      			sta.l	_bp
         02:CEC7  A9 78      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_5))
         02:CEC9  85 ED      			sta.h	_bp
         02:CECB  A9 03      			lda	#bank(_tileset_WEAPON_5)
         02:CECD  85 02      			sta	_bp_bank
13256                        		__ld.wi		___sizeof__tileset_WEAPON_5
         02:CECF  A9 80      			lda.l	#___sizeof__tileset_WEAPON_5
         02:CED1  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_5
13257                        		__lsr.wi	1
         02:CED3  42         			say
         02:CED4  4A         			lsr	a
         02:CED5  42         			say
         02:CED6  6A         			ror	a
13258                        		__st.wmq	_ax
         02:CED7  85 F8      			sta.l	_ax
         02:CED9  84 F9      			sty.h	_ax
13259                        		 _load_vram.3
         02:CEDB  82         			clx				; Offset to PCE VDC.
         02:CEDC  20 4F FF   			call	load_vram_x
13260                        	
13261                        		.dbg	line,	"include\init.c", 313; }
13262                        	
13263                        		.dbg	line,	"include\init.c", 315; else if(weapon_level == 5)
13264                        		__bra		.LL577
         02:CEDF  80 2E      			bra	.LL577
13265    02:CEE1             	.LL576:
13266                        		__ld.umq	_weapon_level
         02:CEE1  AD 24 23   			lda	_weapon_level
13267                        		__equ_b.uiq	5
         02:CEE4  C9 05      			cmp	#5
         02:CEE6  F0 01      			beq	!+
         02:CEE8  18         			clc
         02:CEE9             	!:
13268                        		__bfalse	.LL578
         02:CEE9  90 24      			bcc	.LL578
13269                        	
13270                        		.dbg	line,	"include\init.c", 316; {
13271                        	
13272                        		.dbg	line,	"include\init.c", 317; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_8, SIZEOF(tileset_WEAPON_8) >> 1 );
13273                        		__st.wmiq	4256, _di
         02:CEEB  A9 A0      			lda.l	#4256
         02:CEED  85 F0      			sta.l	_di
         02:CEEF  A9 10      			lda.h	#4256
         02:CEF1  85 F1      			sta.h	_di
13274                        		__farptr	_tileset_WEAPON_8, _bp_bank, _bp
         02:CEF3  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_8))
         02:CEF5  85 EC      			sta.l	_bp
         02:CEF7  A9 79      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_8))
         02:CEF9  85 ED      			sta.h	_bp
         02:CEFB  A9 03      			lda	#bank(_tileset_WEAPON_8)
         02:CEFD  85 02      			sta	_bp_bank
13275                        		__ld.wi		___sizeof__tileset_WEAPON_8
         02:CEFF  A9 80      			lda.l	#___sizeof__tileset_WEAPON_8
         02:CF01  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_8
13276                        		__lsr.wi	1
         02:CF03  42         			say
         02:CF04  4A         			lsr	a
         02:CF05  42         			say
         02:CF06  6A         			ror	a
13277                        		__st.wmq	_ax
         02:CF07  85 F8      			sta.l	_ax
         02:CF09  84 F9      			sty.h	_ax
13278                        		 _load_vram.3
         02:CF0B  82         			clx				; Offset to PCE VDC.
         02:CF0C  20 4F FF   			call	load_vram_x
13279                        	
13280                        		.dbg	line,	"include\init.c", 318; }
13281                        	
13282                        		.dbg	line,	"include\init.c", 323; if(armor_level == 1)
13283    02:CF0F             	.LL578:
13284    02:CF0F             	.LL577:
13285    02:CF0F             	.LL575:
13286    02:CF0F             	.LL573:
13287    02:CF0F             	.LL571:
13288                        		__ld.umq	_armor_level
         02:CF0F  AD 23 23   			lda	_armor_level
13289                        		__equ_b.uiq	1
         02:CF12  C9 01      			cmp	#1
         02:CF14  F0 01      			beq	!+
         02:CF16  18         			clc
         02:CF17             	!:
13290                        		__bfalse	.LL579
         02:CF17  90 27      			bcc	.LL579
13291                        	
13292                        		.dbg	line,	"include\init.c", 324; {
13293                        	
13294                        		.dbg	line,	"include\init.c", 325; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_1, SIZEOF(tileset_ARMOR_1) >> 1 );
13295                        		__st.wmiq	4320, _di
         02:CF19  A9 E0      			lda.l	#4320
         02:CF1B  85 F0      			sta.l	_di
         02:CF1D  A9 10      			lda.h	#4320
         02:CF1F  85 F1      			sta.h	_di
13296                        		__farptr	_tileset_ARMOR_1, _bp_bank, _bp
         02:CF21  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_1))
         02:CF23  85 EC      			sta.l	_bp
         02:CF25  A9 75      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_1))
         02:CF27  85 ED      			sta.h	_bp
         02:CF29  A9 03      			lda	#bank(_tileset_ARMOR_1)
         02:CF2B  85 02      			sta	_bp_bank
13297                        		__ld.wi		___sizeof__tileset_ARMOR_1
         02:CF2D  A9 80      			lda.l	#___sizeof__tileset_ARMOR_1
         02:CF2F  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_1
13298                        		__lsr.wi	1
         02:CF31  42         			say
         02:CF32  4A         			lsr	a
         02:CF33  42         			say
         02:CF34  6A         			ror	a
13299                        		__st.wmq	_ax
         02:CF35  85 F8      			sta.l	_ax
         02:CF37  84 F9      			sty.h	_ax
13300                        		 _load_vram.3
         02:CF39  82         			clx				; Offset to PCE VDC.
         02:CF3A  20 4F FF   			call	load_vram_x
13301                        	
13302                        		.dbg	line,	"include\init.c", 326; }
13303                        	
13304                        		.dbg	line,	"include\init.c", 328; else if(armor_level == 2)
13305                        		__bra		.LL580
         02:CF3D  4C CE CF   			bra	.LL580
13306    02:CF40             	.LL579:
13307                        		__ld.umq	_armor_level
         02:CF40  AD 23 23   			lda	_armor_level
13308                        		__equ_b.uiq	2
         02:CF43  C9 02      			cmp	#2
         02:CF45  F0 01      			beq	!+
         02:CF47  18         			clc
         02:CF48             	!:
13309                        		__bfalse	.LL581
         02:CF48  90 26      			bcc	.LL581
13310                        	
13311                        		.dbg	line,	"include\init.c", 329; {
13312                        	
13313                        		.dbg	line,	"include\init.c", 330; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_2, SIZEOF(tileset_ARMOR_2) >> 1 );
13314                        		__st.wmiq	4320, _di
         02:CF4A  A9 E0      			lda.l	#4320
         02:CF4C  85 F0      			sta.l	_di
         02:CF4E  A9 10      			lda.h	#4320
         02:CF50  85 F1      			sta.h	_di
13315                        		__farptr	_tileset_ARMOR_2, _bp_bank, _bp
         02:CF52  A9 80      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_2))
         02:CF54  85 EC      			sta.l	_bp
         02:CF56  A9 75      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_2))
         02:CF58  85 ED      			sta.h	_bp
         02:CF5A  A9 03      			lda	#bank(_tileset_ARMOR_2)
         02:CF5C  85 02      			sta	_bp_bank
13316                        		__ld.wi		___sizeof__tileset_ARMOR_2
         02:CF5E  A9 80      			lda.l	#___sizeof__tileset_ARMOR_2
         02:CF60  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_2
13317                        		__lsr.wi	1
         02:CF62  42         			say
         02:CF63  4A         			lsr	a
         02:CF64  42         			say
         02:CF65  6A         			ror	a
13318                        		__st.wmq	_ax
         02:CF66  85 F8      			sta.l	_ax
         02:CF68  84 F9      			sty.h	_ax
13319                        		 _load_vram.3
         02:CF6A  82         			clx				; Offset to PCE VDC.
         02:CF6B  20 4F FF   			call	load_vram_x
13320                        	
13321                        		.dbg	line,	"include\init.c", 331; }
13322                        	
13323                        		.dbg	line,	"include\init.c", 333; else if(armor_level == 3)
13324                        		__bra		.LL582
         02:CF6E  80 5E      			bra	.LL582
13325    02:CF70             	.LL581:
13326                        		__ld.umq	_armor_level
         02:CF70  AD 23 23   			lda	_armor_level
13327                        		__equ_b.uiq	3
         02:CF73  C9 03      			cmp	#3
         02:CF75  F0 01      			beq	!+
         02:CF77  18         			clc
         02:CF78             	!:
13328                        		__bfalse	.LL583
         02:CF78  90 26      			bcc	.LL583
13329                        	
13330                        		.dbg	line,	"include\init.c", 334; {
13331                        	
13332                        		.dbg	line,	"include\init.c", 335; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_4, SIZEOF(tileset_ARMOR_4) >> 1 );
13333                        		__st.wmiq	4320, _di
         02:CF7A  A9 E0      			lda.l	#4320
         02:CF7C  85 F0      			sta.l	_di
         02:CF7E  A9 10      			lda.h	#4320
         02:CF80  85 F1      			sta.h	_di
13334                        		__farptr	_tileset_ARMOR_4, _bp_bank, _bp
         02:CF82  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_4))
         02:CF84  85 EC      			sta.l	_bp
         02:CF86  A9 76      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_4))
         02:CF88  85 ED      			sta.h	_bp
         02:CF8A  A9 03      			lda	#bank(_tileset_ARMOR_4)
         02:CF8C  85 02      			sta	_bp_bank
13335                        		__ld.wi		___sizeof__tileset_ARMOR_4
         02:CF8E  A9 80      			lda.l	#___sizeof__tileset_ARMOR_4
         02:CF90  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_4
13336                        		__lsr.wi	1
         02:CF92  42         			say
         02:CF93  4A         			lsr	a
         02:CF94  42         			say
         02:CF95  6A         			ror	a
13337                        		__st.wmq	_ax
         02:CF96  85 F8      			sta.l	_ax
         02:CF98  84 F9      			sty.h	_ax
13338                        		 _load_vram.3
         02:CF9A  82         			clx				; Offset to PCE VDC.
         02:CF9B  20 4F FF   			call	load_vram_x
13339                        	
13340                        		.dbg	line,	"include\init.c", 336; }
13341                        	
13342                        		.dbg	line,	"include\init.c", 338; else if(armor_level == 4)
13343                        		__bra		.LL584
         02:CF9E  80 2E      			bra	.LL584
13344    02:CFA0             	.LL583:
13345                        		__ld.umq	_armor_level
         02:CFA0  AD 23 23   			lda	_armor_level
13346                        		__equ_b.uiq	4
         02:CFA3  C9 04      			cmp	#4
         02:CFA5  F0 01      			beq	!+
         02:CFA7  18         			clc
         02:CFA8             	!:
13347                        		__bfalse	.LL585
         02:CFA8  90 24      			bcc	.LL585
13348                        	
13349                        		.dbg	line,	"include\init.c", 339; {
13350                        	
13351                        		.dbg	line,	"include\init.c", 340; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_8, SIZEOF(tileset_ARMOR_8) >> 1 );
13352                        		__st.wmiq	4320, _di
         02:CFAA  A9 E0      			lda.l	#4320
         02:CFAC  85 F0      			sta.l	_di
         02:CFAE  A9 10      			lda.h	#4320
         02:CFB0  85 F1      			sta.h	_di
13353                        		__farptr	_tileset_ARMOR_8, _bp_bank, _bp
         02:CFB2  A9 80      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_8))
         02:CFB4  85 EC      			sta.l	_bp
         02:CFB6  A9 76      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_8))
         02:CFB8  85 ED      			sta.h	_bp
         02:CFBA  A9 03      			lda	#bank(_tileset_ARMOR_8)
         02:CFBC  85 02      			sta	_bp_bank
13354                        		__ld.wi		___sizeof__tileset_ARMOR_8
         02:CFBE  A9 80      			lda.l	#___sizeof__tileset_ARMOR_8
         02:CFC0  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_8
13355                        		__lsr.wi	1
         02:CFC2  42         			say
         02:CFC3  4A         			lsr	a
         02:CFC4  42         			say
         02:CFC5  6A         			ror	a
13356                        		__st.wmq	_ax
         02:CFC6  85 F8      			sta.l	_ax
         02:CFC8  84 F9      			sty.h	_ax
13357                        		 _load_vram.3
         02:CFCA  82         			clx				; Offset to PCE VDC.
         02:CFCB  20 4F FF   			call	load_vram_x
13358                        	
13359                        		.dbg	line,	"include\init.c", 341; }
13360                        	
13361                        		.dbg	line,	"include\init.c", 346; //--------------------------------------------------------------------------------------//
13362                        	
13363                        		.dbg	line,	"include\init.c", 347; //                                     SET MULTIMAP                                     //
13364                        	
13365                        		.dbg	line,	"include\init.c", 348; //--------------------------------------------------------------------------------------//
13366                        	
13367                        		.dbg	line,	"include\init.c", 350; // multimap is 2 screens wide //
13368                        	
13369                        		.dbg	line,	"include\init.c", 351; set_multimap( multimap_LV1_BG_A , 5 );
13370    02:CFCE             	.LL585:
13371    02:CFCE             	.LL584:
13372    02:CFCE             	.LL582:
13373    02:CFCE             	.LL580:
13374                        		__farptr	_multimap_LV1_BG_A, vdc_scr_bank, vdc_scr_addr
         02:CFCE  A9 00      			lda.l	#$6000 + ($1FFF & (_multimap_LV1_BG_A))
         02:CFD0  8D BC 2B   			sta.l	vdc_scr_addr
         02:CFD3  A9 78      			lda.h	#$6000 + ($1FFF & (_multimap_LV1_BG_A))
         02:CFD5  8D BD 2B   			sta.h	vdc_scr_addr
         02:CFD8  A9 0B      			lda	#bank(_multimap_LV1_BG_A)
         02:CFDA  8D BE 2B   			sta	vdc_scr_bank
13375                        		__st.umiq	5, vdc_map_scrn_w
         02:CFDD  A9 05      			lda.l	#5
         02:CFDF  8D 7D 26   			sta	vdc_map_scrn_w
13376                        		 _set_multimap.2
         02:CFE2  AD 75 26   			lda	vdc_bat_width
         02:CFE5  4A         			lsr	a
         02:CFE6  8D 7C 26   			sta	vdc_map_line_w
13377                        	
13378                        		.dbg	line,	"include\init.c", 354; //--------------------------------------------------------------------------------------//
13379                        	
13380                        		.dbg	line,	"include\init.c", 355; //                                    DRAW TILEMAP                                      //
13381                        	
13382                        		.dbg	line,	"include\init.c", 356; //--------------------------------------------------------------------------------------//
13383                        	
13384                        		.dbg	line,	"include\init.c", 358; // The blkmap is drawn using global variables for the top-left coordinate
13385                        	
13386                        		.dbg	line,	"include\init.c", 359; // in pixels, and the draw width and height in terms of 8x8 characters.
13387                        	
13388                        		.dbg	line,	"include\init.c", 361; vdc_map_pxl_x = 0;
13389                        		__st.wmiq	0, _vdc_map_pxl_x
         02:CFE9  9C 7E 26   			stz.l	_vdc_map_pxl_x
         02:CFEC  9C 7F 26   			stz.h	_vdc_map_pxl_x
13390                        	
13391                        		.dbg	line,	"include\init.c", 362; vdc_map_pxl_y = 0;
13392                        		__st.wmiq	0, _vdc_map_pxl_y
         02:CFEF  9C 80 26   			stz.l	_vdc_map_pxl_y
         02:CFF2  9C 81 26   			stz.h	_vdc_map_pxl_y
13393                        	
13394                        		.dbg	line,	"include\init.c", 364; vdc_map_draw_w = 32;
13395                        		__st.umiq	32, _vdc_map_draw_w
         02:CFF5  A9 20      			lda.l	#32
         02:CFF7  8D 7A 26   			sta	_vdc_map_draw_w
13396                        	
13397                        		.dbg	line,	"include\init.c", 365; vdc_map_draw_h = 28;
13398                        		__st.umiq	28, _vdc_map_draw_h
         02:CFFA  A9 1C      			lda.l	#28
         02:CFFC  8D 7B 26   			sta	_vdc_map_draw_h
13399                        	
13400                        		.dbg	line,	"include\init.c", 367; draw_map();
13401                        		__call		_draw_map
         02:CFFF  20 1D FF   			call	_draw_map
13402                        	
13403                        		.dbg	line,	"include\init.c", 369; display_SCORE();
13404                        		__call		_display_SCORE
         02:D002  20 13 FF   			call	_display_SCORE
13405                        	
13406                        		.dbg	line,	"include\init.c", 370; display_TIME_LEVEL();
13407                        		__call		_display_TIME_LEVEL
         02:D005  20 09 FF   			call	_display_TIME_LEVEL
13408                        	
13409                        		.dbg	line,	"include\init.c", 371; display_KEY();
13410                        		__call		_display_KEY
         02:D008  20 8B FF   			call	_display_KEY
13411                        	
13412                        		.dbg	line,	"include\init.c", 372; display_POTION();
13413                        		__call		_display_POTION
         02:D00B  20 3B FF   			call	_display_POTION
13414                        	
13415                        		.dbg	line,	"include\init.c", 373; display_ZENNY();
13416                        		__call		_display_ZENNY
         02:D00E  20 45 FF   			call	_display_ZENNY
13417                        	
13418                        		.dbg	line,	"include\init.c", 374; }
13419    02:D011             	.LL569:
13420                        		__return	0
         02:D011  4C EF FF   			jmp	leave_proc
13421                        		.dbg	clear
13422                        		.endp
13423                        		.pceas
13424                        	
13425                        		.dbg	line,	"include\init.c", 377; void init_LEVEL()
13426                        		.dbg	line,	"include\init.c", 378; {
13427                        	;***********************
13428                        	;***********************
13429                        	
13430                        		.hucc
13431    13:DAEA             		.proc		_init_LEVEL
13432                        		__enter		_init_LEVEL
13433                        	
13434                        		.dbg	line,	"include\init.c", 379; if(level_id == 1)
13435                        		__ld.umq	_level_id
         13:DAEA  AD 13 23   			lda	_level_id
13436                        		__equ_b.uiq	1
         13:DAED  C9 01      			cmp	#1
         13:DAEF  F0 01      			beq	!+
         13:DAF1  18         			clc
         13:DAF2             	!:
13437                        		__bfalse	.LL587
         13:DAF2  B0 03 4C 50			bcc	.LL587
         13:DAF6  DF          
13438                        	
13439                        		.dbg	line,	"include\init.c", 380; {
13440                        	
13441                        		.dbg	line,	"include\init.c", 381; char i;
13442                        	
13443                        		.dbg	line,	"include\init.c", 382; 
13444                        	
13445                        		.dbg	line,	"include\init.c", 383; // VSYNC //
13446                        	
13447                        		.dbg	line,	"include\init.c", 384; vsync();
13448                        		__call		_vsync
         13:DAF7  20 09 E3   			call	_vsync
13449                        	
13450                        		.dbg	line,	"include\init.c", 387; // DISABLE DISPLAY //
13451                        	
13452                        		.dbg	line,	"include\init.c", 388; disp_off();
13453                        		__call		_disp_off
         13:DAFA  20 29 E4   			call	_disp_off
13454                        	
13455                        		.dbg	line,	"include\init.c", 391; // SET VDC 1 SCREEN SIZE (IN TILES) - 64x32 = 512x256 PIXELS
13456                        	
13457                        		.dbg	line,	"include\init.c", 392; set_screen_size(SCR_SIZE_64x32);
13458                        		__st.umiq	1, _al
         13:DAFD  A9 01      			lda.l	#1
         13:DAFF  85 F8      			sta	_al
13459                        		__call		_set_screen_size.1
         13:DB01  20 31 FF   			call	_set_screen_size.1
13460                        	
13461                        		.dbg	line,	"include\init.c", 395; // SET VDC 2 SCREEN SIZE (IN TILES) - 64x32 = 512x256 PIXELS
13462                        	
13463                        		.dbg	line,	"include\init.c", 396; sgx_set_screen_size(SCR_SIZE_64x32);
13464                        		__st.umiq	1, _al
         13:DB04  A9 01      			lda.l	#1
         13:DB06  85 F8      			sta	_al
13465                        		__call		_sgx_set_screen_size.1
         13:DB08  20 27 FF   			call	_sgx_set_screen_size.1
13466                        	
13467                        		.dbg	line,	"include\init.c", 399; // INIT SPRITE ATTRIBUTE TABLE //
13468                        	
13469                        		.dbg	line,	"include\init.c", 400; //init_satb();
13470                        	
13471                        		.dbg	line,	"include\init.c", 405; //**************************************************************************************//
13472                        	
13473                        		.dbg	line,	"include\init.c", 406; //                                                                                      //
13474                        	
13475                        		.dbg	line,	"include\init.c", 407; //                                      VARIABLES                                       //
13476                        	
13477                        		.dbg	line,	"include\init.c", 408; //                                                                                      //
13478                        	
13479                        		.dbg	line,	"include\init.c", 409; //**************************************************************************************//
13480                        	
13481                        		.dbg	line,	"include\init.c", 411; time_counter = 0;
13482                        		__st.umiq	0, _time_counter
         13:DB0B  9C 2A 23   			stz	_time_counter
13483                        	
13484                        		.dbg	line,	"include\init.c", 412; 
13485                        	
13486                        		.dbg	line,	"include\init.c", 413; if(respawn == RESPAWN_SHOP)
13487                        		__ld.umq	_respawn
         13:DB0E  AD 14 23   			lda	_respawn
13488                        		__equ_b.uiq	2
         13:DB11  C9 02      			cmp	#2
         13:DB13  F0 01      			beq	!+
         13:DB15  18         			clc
         13:DB16             	!:
13489                        		__bfalse	.LL588
         13:DB16  90 10      			bcc	.LL588
13490                        	
13491                        		.dbg	line,	"include\init.c", 414; {
13492                        	
13493                        		.dbg	line,	"include\init.c", 415; minutes = minutes_backup;
13494                        		__ld.um		_minutes_backup
         13:DB18  AD 2B 23   			lda	_minutes_backup
         13:DB1B  C2         			cly
13495                        		__st.umq	_minutes
         13:DB1C  8D 28 23   			sta	_minutes
13496                        	
13497                        		.dbg	line,	"include\init.c", 416; seconds = seconds_backup;
13498                        		__ld.um		_seconds_backup
         13:DB1F  AD 2C 23   			lda	_seconds_backup
         13:DB22  C2         			cly
13499                        		__st.umq	_seconds
         13:DB23  8D 29 23   			sta	_seconds
13500                        	
13501                        		.dbg	line,	"include\init.c", 417; }
13502                        	
13503                        		.dbg	line,	"include\init.c", 419; else
13504                        		__bra		.LL589
         13:DB26  80 0A      			bra	.LL589
13505    13:DB28             	.LL588:
13506                        	
13507                        		.dbg	line,	"include\init.c", 420; {
13508                        	
13509                        		.dbg	line,	"include\init.c", 421; minutes = 1;
13510                        		__st.umiq	1, _minutes
         13:DB28  A9 01      			lda.l	#1
         13:DB2A  8D 28 23   			sta	_minutes
13511                        	
13512                        		.dbg	line,	"include\init.c", 422; seconds = 59;
13513                        		__st.umiq	59, _seconds
         13:DB2D  A9 3B      			lda.l	#59
         13:DB2F  8D 29 23   			sta	_seconds
13514                        	
13515                        		.dbg	line,	"include\init.c", 423; }
13516    13:DB32             	.LL589:
13517                        	
13518                        		.dbg	line,	"include\init.c", 425; camera_max_y_position = 768;
13519                        		__st.wmiq	768, _camera_max_y_position
         13:DB32  9C D6 24   			stz.l	_camera_max_y_position
         13:DB35  A9 03      			lda.h	#768
         13:DB37  8D D7 24   			sta.h	_camera_max_y_position
13520                        	
13521                        		.dbg	line,	"include\init.c", 426; jump_max_index = 34;
13522                        		__st.umiq	34, _jump_max_index
         13:DB3A  A9 22      			lda.l	#34
         13:DB3C  8D 20 23   			sta	_jump_max_index
13523                        	
13524                        		.dbg	line,	"include\init.c", 427; score = 0;
13525                        		__st.wmiq	0, _score
         13:DB3F  9C 2E 26   			stz.l	_score
         13:DB42  9C 2F 26   			stz.h	_score
13526                        	
13527                        		.dbg	line,	"include\init.c", 428; level_object_number = OBJECT_NUMBER_LV1;
13528                        		__st.umiq	23, _level_object_number
         13:DB45  A9 17      			lda.l	#23
         13:DB47  8D 2E 23   			sta	_level_object_number
13529                        	
13530                        		.dbg	line,	"include\init.c", 429; level_chest_number = CHEST_NUMBER_LV1;
13531                        		__st.umiq	2, _level_chest_number
         13:DB4A  A9 02      			lda.l	#2
         13:DB4C  8D 9D 23   			sta	_level_chest_number
13532                        	
13533                        		.dbg	line,	"include\init.c", 430; level_npc_number = NPC_NUMBER_LV1;
13534                        		__st.umiq	2, _level_npc_number
         13:DB4F  A9 02      			lda.l	#2
         13:DB51  8D B0 23   			sta	_level_npc_number
13535                        	
13536                        		.dbg	line,	"include\init.c", 431; object_start_index = OBJECT_START_INDEX_LV1;
13537                        		__st.umiq	0, _object_start_index
         13:DB54  9C 2D 23   			stz	_object_start_index
13538                        	
13539                        		.dbg	line,	"include\init.c", 432; chest_start_index = CHEST_START_INDEX_LV1;
13540                        		__st.umiq	23, _chest_start_index
         13:DB57  A9 17      			lda.l	#23
         13:DB59  8D 9C 23   			sta	_chest_start_index
13541                        	
13542                        		.dbg	line,	"include\init.c", 433; npc_start_index = NPC_START_INDEX_LV1;
13543                        		__st.umiq	25, _npc_start_index
         13:DB5C  A9 19      			lda.l	#25
         13:DB5E  8D AF 23   			sta	_npc_start_index
13544                        	
13545                        		.dbg	line,	"include\init.c", 434; jump_ladder = FALSE;
13546                        		__st.umiq	0, _jump_ladder
         13:DB61  9C 1F 23   			stz	_jump_ladder
13547                        	
13548                        		.dbg	line,	"include\init.c", 438; //**************************************************************************************//
13549                        	
13550                        		.dbg	line,	"include\init.c", 439; //                                                                                      //
13551                        	
13552                        		.dbg	line,	"include\init.c", 440; //                                        VDC 2                                         //
13553                        	
13554                        		.dbg	line,	"include\init.c", 441; //                                                                                      //
13555                        	
13556                        		.dbg	line,	"include\init.c", 442; //**************************************************************************************//
13557                        	
13558                        		.dbg	line,	"include\init.c", 444; //--------------------------------------------------------------------------------------//
13559                        	
13560                        		.dbg	line,	"include\init.c", 445; //                                    LOAD TILESET                                      //
13561                        	
13562                        		.dbg	line,	"include\init.c", 446; //--------------------------------------------------------------------------------------//
13563                        	
13564                        		.dbg	line,	"include\init.c", 448; sgx_load_vram( 0x1000, tileset_LV1_BG_B, SIZEOF(tileset_LV1_BG_B) >> 1 );
13565                        		__st.wmiq	4096, _di
         13:DB64  64 F0      			stz.l	_di
         13:DB66  A9 10      			lda.h	#4096
         13:DB68  85 F1      			sta.h	_di
13566                        		__farptr	_tileset_LV1_BG_B, _bp_bank, _bp
         13:DB6A  A9 80      			lda.l	#$6000 + ($1FFF & (_tileset_LV1_BG_B))
         13:DB6C  85 EC      			sta.l	_bp
         13:DB6E  A9 79      			lda.h	#$6000 + ($1FFF & (_tileset_LV1_BG_B))
         13:DB70  85 ED      			sta.h	_bp
         13:DB72  A9 03      			lda	#bank(_tileset_LV1_BG_B)
         13:DB74  85 02      			sta	_bp_bank
13567                        		__ld.wi		___sizeof__tileset_LV1_BG_B
         13:DB76  A9 E0      			lda.l	#___sizeof__tileset_LV1_BG_B
         13:DB78  A0 72      			ldy.h	#___sizeof__tileset_LV1_BG_B
13568                        		__lsr.wi	1
         13:DB7A  42         			say
         13:DB7B  4A         			lsr	a
         13:DB7C  42         			say
         13:DB7D  6A         			ror	a
13569                        		__st.wmq	_ax
         13:DB7E  85 F8      			sta.l	_ax
         13:DB80  84 F9      			sty.h	_ax
13570                        		 _sgx_load_vram.3
         13:DB82  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         13:DB84  20 4F FF   			call	load_vram_x
13571                        	
13572                        		.dbg	line,	"include\init.c", 451; //--------------------------------------------------------------------------------------//
13573                        	
13574                        		.dbg	line,	"include\init.c", 452; //                               LOAD WALL & DOOR TILES                                 //
13575                        	
13576                        		.dbg	line,	"include\init.c", 453; //--------------------------------------------------------------------------------------//
13577                        	
13578                        		.dbg	line,	"include\init.c", 455; sgx_load_vram( LV1_WALL_VRAM_ADR, tileset_LV1_WALL, SIZEOF(tileset_LV1_WALL) >> 1 );
13579                        		__st.wmiq	4096, _di
         13:DB87  64 F0      			stz.l	_di
         13:DB89  A9 10      			lda.h	#4096
         13:DB8B  85 F1      			sta.h	_di
13580                        		__farptr	_tileset_LV1_WALL, _bp_bank, _bp
         13:DB8D  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_LV1_WALL))
         13:DB8F  85 EC      			sta.l	_bp
         13:DB91  A9 6C      			lda.h	#$6000 + ($1FFF & (_tileset_LV1_WALL))
         13:DB93  85 ED      			sta.h	_bp
         13:DB95  A9 03      			lda	#bank(_tileset_LV1_WALL)
         13:DB97  85 02      			sta	_bp_bank
13581                        		__ld.wi		___sizeof__tileset_LV1_WALL
         13:DB99  A9 00      			lda.l	#___sizeof__tileset_LV1_WALL
         13:DB9B  A0 02      			ldy.h	#___sizeof__tileset_LV1_WALL
13582                        		__lsr.wi	1
         13:DB9D  42         			say
         13:DB9E  4A         			lsr	a
         13:DB9F  42         			say
         13:DBA0  6A         			ror	a
13583                        		__st.wmq	_ax
         13:DBA1  85 F8      			sta.l	_ax
         13:DBA3  84 F9      			sty.h	_ax
13584                        		 _sgx_load_vram.3
         13:DBA5  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         13:DBA7  20 4F FF   			call	load_vram_x
13585                        	
13586                        		.dbg	line,	"include\init.c", 456; sgx_load_vram( LV1_DOOR_VRAM_ADR, tileset_LV1_DOOR_OPEN, SIZEOF(tileset_LV1_DOOR_OPEN) >> 1 );
13587                        		__st.wmiq	4352, _di
         13:DBAA  64 F0      			stz.l	_di
         13:DBAC  A9 11      			lda.h	#4352
         13:DBAE  85 F1      			sta.h	_di
13588                        		__farptr	_tileset_LV1_DOOR_OPEN, _bp_bank, _bp
         13:DBB0  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_LV1_DOOR_OPEN))
         13:DBB2  85 EC      			sta.l	_bp
         13:DBB4  A9 6E      			lda.h	#$6000 + ($1FFF & (_tileset_LV1_DOOR_OPEN))
         13:DBB6  85 ED      			sta.h	_bp
         13:DBB8  A9 03      			lda	#bank(_tileset_LV1_DOOR_OPEN)
         13:DBBA  85 02      			sta	_bp_bank
13589                        		__ld.wi		___sizeof__tileset_LV1_DOOR_OPEN
         13:DBBC  A9 00      			lda.l	#___sizeof__tileset_LV1_DOOR_OPEN
         13:DBBE  A0 03      			ldy.h	#___sizeof__tileset_LV1_DOOR_OPEN
13590                        		__lsr.wi	1
         13:DBC0  42         			say
         13:DBC1  4A         			lsr	a
         13:DBC2  42         			say
         13:DBC3  6A         			ror	a
13591                        		__st.wmq	_ax
         13:DBC4  85 F8      			sta.l	_ax
         13:DBC6  84 F9      			sty.h	_ax
13592                        		 _sgx_load_vram.3
         13:DBC8  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         13:DBCA  20 4F FF   			call	load_vram_x
13593                        	
13594                        		.dbg	line,	"include\init.c", 459; //--------------------------------------------------------------------------------------//
13595                        	
13596                        		.dbg	line,	"include\init.c", 460; //                                     SET MULTIMAP                                     //
13597                        	
13598                        		.dbg	line,	"include\init.c", 461; //--------------------------------------------------------------------------------------//
13599                        	
13600                        		.dbg	line,	"include\init.c", 463; // multimap is 5 screens wide //
13601                        	
13602                        		.dbg	line,	"include\init.c", 464; sgx_set_multimap( multimap_LV1_BG_B , 5 );
13603                        		__farptr	_multimap_LV1_BG_B, sgx_scr_bank, sgx_scr_addr
         13:DBCD  A9 00      			lda.l	#$6000 + ($1FFF & (_multimap_LV1_BG_B))
         13:DBCF  8D CC 2B   			sta.l	sgx_scr_addr
         13:DBD2  A9 79      			lda.h	#$6000 + ($1FFF & (_multimap_LV1_BG_B))
         13:DBD4  8D CD 2B   			sta.h	sgx_scr_addr
         13:DBD7  A9 09      			lda	#bank(_multimap_LV1_BG_B)
         13:DBD9  8D CE 2B   			sta	sgx_scr_bank
13604                        		__st.umiq	5, sgx_map_scrn_w
         13:DBDC  A9 05      			lda.l	#5
         13:DBDE  8D 8D 26   			sta	sgx_map_scrn_w
13605                        		 _sgx_set_multimap.2
         13:DBE1  AD 85 26   			lda	sgx_bat_width
         13:DBE4  4A         			lsr	a
         13:DBE5  8D 8C 26   			sta	sgx_map_line_w
13606                        	
13607                        		.dbg	line,	"include\init.c", 467; //--------------------------------------------------------------------------------------//
13608                        	
13609                        		.dbg	line,	"include\init.c", 468; //                                    DRAW TILEMAP                                      //
13610                        	
13611                        		.dbg	line,	"include\init.c", 469; //--------------------------------------------------------------------------------------//
13612                        	
13613                        		.dbg	line,	"include\init.c", 471; // The blkmap is drawn using global variables for the top-left coordinate
13614                        	
13615                        		.dbg	line,	"include\init.c", 472; // in pixels, and the draw width and height in terms of 8x8 characters.
13616                        	
13617                        		.dbg	line,	"include\init.c", 474; if(respawn == FALSE)
13618                        		__not.um	_respawn
         13:DBE8  AD 14 23   			lda	_respawn
         13:DBEB  18         			clc
         13:DBEC  D0 01      			bne	!+
         13:DBEE  38         			sec
         13:DBEF             	!:
13619                        		__bfalse	.LL590
         13:DBEF  90 12      			bcc	.LL590
13620                        	
13621                        		.dbg	line,	"include\init.c", 475; {
13622                        	
13623                        		.dbg	line,	"include\init.c", 476; sgx_map_pxl_x = 96;
13624                        		__st.wmiq	96, _sgx_map_pxl_x
         13:DBF1  A9 60      			lda.l	#96
         13:DBF3  8D 8E 26   			sta.l	_sgx_map_pxl_x
         13:DBF6  9C 8F 26   			stz.h	_sgx_map_pxl_x
13625                        	
13626                        		.dbg	line,	"include\init.c", 477; sgx_map_pxl_y = 768;
13627                        		__st.wmiq	768, _sgx_map_pxl_y
         13:DBF9  9C 90 26   			stz.l	_sgx_map_pxl_y
         13:DBFC  A9 03      			lda.h	#768
         13:DBFE  8D 91 26   			sta.h	_sgx_map_pxl_y
13628                        	
13629                        		.dbg	line,	"include\init.c", 478; }
13630                        	
13631                        		.dbg	line,	"include\init.c", 480; else if(respawn == RESPAWN_SHOP)
13632                        		__bra		.LL591
         13:DC01  80 22      			bra	.LL591
13633    13:DC03             	.LL590:
13634                        		__ld.umq	_respawn
         13:DC03  AD 14 23   			lda	_respawn
13635                        		__equ_b.uiq	2
         13:DC06  C9 02      			cmp	#2
         13:DC08  F0 01      			beq	!+
         13:DC0A  18         			clc
         13:DC0B             	!:
13636                        		__bfalse	.LL592
         13:DC0B  90 18      			bcc	.LL592
13637                        	
13638                        		.dbg	line,	"include\init.c", 481; {
13639                        	
13640                        		.dbg	line,	"include\init.c", 482; sgx_map_pxl_x = camera_pos_x_backup;
13641                        		__ld.wm		_camera_pos_x_backup
         13:DC0D  AD D8 24   			lda.l	_camera_pos_x_backup
         13:DC10  AC D9 24   			ldy.h	_camera_pos_x_backup
13642                        		__st.wmq	_sgx_map_pxl_x
         13:DC13  8D 8E 26   			sta.l	_sgx_map_pxl_x
         13:DC16  8C 8F 26   			sty.h	_sgx_map_pxl_x
13643                        	
13644                        		.dbg	line,	"include\init.c", 483; sgx_map_pxl_y = camera_pos_y_backup;
13645                        		__ld.wm		_camera_pos_y_backup
         13:DC19  AD DA 24   			lda.l	_camera_pos_y_backup
         13:DC1C  AC DB 24   			ldy.h	_camera_pos_y_backup
13646                        		__st.wmq	_sgx_map_pxl_y
         13:DC1F  8D 90 26   			sta.l	_sgx_map_pxl_y
         13:DC22  8C 91 26   			sty.h	_sgx_map_pxl_y
13647                        	
13648                        		.dbg	line,	"include\init.c", 484; }
13649                        	
13650                        		.dbg	line,	"include\init.c", 487; sgx_map_draw_w = 63;
13651    13:DC25             	.LL592:
13652    13:DC25             	.LL591:
13653                        		__st.umiq	63, _sgx_map_draw_w
         13:DC25  A9 3F      			lda.l	#63
         13:DC27  8D 8A 26   			sta	_sgx_map_draw_w
13654                        	
13655                        		.dbg	line,	"include\init.c", 488; sgx_map_draw_h = 29;
13656                        		__st.umiq	29, _sgx_map_draw_h
         13:DC2A  A9 1D      			lda.l	#29
         13:DC2C  8D 8B 26   			sta	_sgx_map_draw_h
13657                        	
13658                        		.dbg	line,	"include\init.c", 490; sgx_draw_map();
13659                        		__call		_sgx_draw_map
         13:DC2F  20 FF FE   			call	_sgx_draw_map
13660                        	
13661                        		.dbg	line,	"include\init.c", 495; //**************************************************************************************//
13662                        	
13663                        		.dbg	line,	"include\init.c", 496; //                                                                                      //
13664                        	
13665                        		.dbg	line,	"include\init.c", 497; //                                         HUD                                          //
13666                        	
13667                        		.dbg	line,	"include\init.c", 498; //                                                                                      //
13668                        	
13669                        		.dbg	line,	"include\init.c", 499; //**************************************************************************************//
13670                        	
13671                        		.dbg	line,	"include\init.c", 501; init_HUD();
13672                        		__call		_init_HUD
         13:DC32  20 F5 FE   			call	_init_HUD
13673                        	
13674                        		.dbg	line,	"include\init.c", 506; //**************************************************************************************//
13675                        	
13676                        		.dbg	line,	"include\init.c", 507; //                                                                                      //
13677                        	
13678                        		.dbg	line,	"include\init.c", 508; //                                  SETUP SCROLL_SPLIT                                  //
13679                        	
13680                        		.dbg	line,	"include\init.c", 509; //                                                                                      //
13681                        	
13682                        		.dbg	line,	"include\init.c", 510; //**************************************************************************************//
13683                        	
13684                        		.dbg	line,	"include\init.c", 512; //--------------------------------------------------------------------------------------//
13685                        	
13686                        		.dbg	line,	"include\init.c", 513; //                                        VDC 2                                         //
13687                        	
13688                        		.dbg	line,	"include\init.c", 514; //--------------------------------------------------------------------------------------//
13689                        	
13690                        		.dbg	line,	"include\init.c", 516; sgx_scroll_map();
13691                        		__call		_sgx_scroll_map
         13:DC35  20 81 FF   			call	_sgx_scroll_map
13692                        	
13693                        		.dbg	line,	"include\init.c", 518; sgx_scroll_split(0,   0, sgx_map_pxl_x & (BAT_SIZE_W - 1), sgx_map_pxl_y & (BAT_SIZE_H - 1), BKG_ON | SPR_ON);
13694                        		__st.umiq	0, _al
         13:DC38  64 F8      			stz	_al
13695                        		__st.umiq	0, _ah
         13:DC3A  64 F9      			stz	_ah
13696                        		__ld.wm		_sgx_map_pxl_x
         13:DC3C  AD 8E 26   			lda.l	_sgx_map_pxl_x
         13:DC3F  AC 8F 26   			ldy.h	_sgx_map_pxl_x
13697                        		__and.wi	2047
         13:DC42  29 FF      			and.l	#2047
         13:DC44  42         			say
         13:DC45  29 07      			and.h	#2047
         13:DC47  42         			say
13698                        		__st.wmq	_bx
         13:DC48  85 FA      			sta.l	_bx
         13:DC4A  84 FB      			sty.h	_bx
13699                        		__ld.wm		_sgx_map_pxl_y
         13:DC4C  AD 90 26   			lda.l	_sgx_map_pxl_y
         13:DC4F  AC 91 26   			ldy.h	_sgx_map_pxl_y
13700                        		__and.wi	255
         13:DC52  29 FF      			and	#255
         13:DC54  C2         			cly
13701                        		__st.wmq	_cx
         13:DC55  85 FC      			sta.l	_cx
         13:DC57  84 FD      			sty.h	_cx
13702                        		__st.umiq	192, _dl
         13:DC59  A9 C0      			lda.l	#192
         13:DC5B  85 FE      			sta	_dl
13703                        		__call		_sgx_scroll_split.5
         13:DC5D  20 77 FF   			call	_sgx_scroll_split.5
13704                        	
13705                        		.dbg	line,	"include\init.c", 523; //--------------------------------------------------------------------------------------//
13706                        	
13707                        		.dbg	line,	"include\init.c", 524; //                                   LOAD BG PALETTES                                   //
13708                        	
13709                        		.dbg	line,	"include\init.c", 525; //--------------------------------------------------------------------------------------//
13710                        	
13711                        		.dbg	line,	"include\init.c", 527; // LOAD ALL PALETTES AT BG PALETTE 0 //
13712                        	
13713                        		.dbg	line,	"include\init.c", 528; load_palette( 0, palette_LV1, 16 );
13714                        		__st.umiq	0, _al
         13:DC60  64 F8      			stz	_al
13715                        		__farptr	_palette_LV1, _bp_bank, _bp
         13:DC62  A9 A0      			lda.l	#$6000 + ($1FFF & (_palette_LV1))
         13:DC64  85 EC      			sta.l	_bp
         13:DC66  A9 78      			lda.h	#$6000 + ($1FFF & (_palette_LV1))
         13:DC68  85 ED      			sta.h	_bp
         13:DC6A  A9 0B      			lda	#bank(_palette_LV1)
         13:DC6C  85 02      			sta	_bp_bank
13716                        		__st.umiq	16, _ah
         13:DC6E  A9 10      			lda.l	#16
         13:DC70  85 F9      			sta	_ah
13717                        		__call		_load_palette.3
         13:DC72  20 EB FE   			call	_load_palette.3
13718                        	
13719                        		.dbg	line,	"include\init.c", 533; //**************************************************************************************//
13720                        	
13721                        		.dbg	line,	"include\init.c", 534; //                                                                                      //
13722                        	
13723                        		.dbg	line,	"include\init.c", 535; //                                       SPRITES                                        //
13724                        	
13725                        		.dbg	line,	"include\init.c", 536; //                                                                                      //
13726                        	
13727                        		.dbg	line,	"include\init.c", 537; //**************************************************************************************//
13728                        	
13729                        		.dbg	line,	"include\init.c", 539; //--------------------------------------------------------------------------------------//
13730                        	
13731                        		.dbg	line,	"include\init.c", 540; //                                        PLAYER                                        //
13732                        	
13733                        		.dbg	line,	"include\init.c", 541; //--------------------------------------------------------------------------------------//
13734                        	
13735                        		.dbg	line,	"include\init.c", 543; // LOAD ALL PLAYER TILES //
13736                        	
13737                        		.dbg	line,	"include\init.c", 544; set_far_base(TABLE_PLAYER_TILES_BANK[player_naked],TABLE_PLAYER_TILES_ADR[player_naked]);
13738                        		__ldx.umq	_player_naked
         13:DC75  AE 1D 23   			ldx	_player_naked
13739                        		__ld.uax	_TABLE_PLAYER_TILES_BANK
         13:DC78  BD F7 60   			lda	_TABLE_PLAYER_TILES_BANK, x
         13:DC7B  C2         			cly
13740                        		__st.umq	_bp_bank
         13:DC7C  85 02      			sta	_bp_bank
13741                        		__ld2x.umq	_player_naked
         13:DC7E  AD 1D 23   			lda	_player_naked
         13:DC81  0A         			asl	a
         13:DC82  AA         			tax
13742                        		__ld.wax	_TABLE_PLAYER_TILES_ADR
         13:DC83  BD F3 60   			lda.l	_TABLE_PLAYER_TILES_ADR, x
         13:DC86  BC F4 60   			ldy.h	_TABLE_PLAYER_TILES_ADR, x
13743                        		__st.wmq	_bp
         13:DC89  85 EC      			sta.l	_bp
         13:DC8B  84 ED      			sty.h	_bp
13744                        	
13745                        		.dbg	line,	"include\init.c", 545; far_load_vram(PLAYER_VRAM_ADR,TILES_352);
13746                        		__st.wmiq	5632, _di
         13:DC8D  64 F0      			stz.l	_di
         13:DC8F  A9 16      			lda.h	#5632
         13:DC91  85 F1      			sta.h	_di
13747                        		__st.wmiq	5632, _ax
         13:DC93  64 F8      			stz.l	_ax
         13:DC95  A9 16      			lda.h	#5632
         13:DC97  85 F9      			sta.h	_ax
13748                        		 _far_load_vram.2
         13:DC99  82         			clx				; Offset to PCE VDC.
         13:DC9A  20 4F FF   			call	load_vram_x
13749                        	
13750                        		.dbg	line,	"include\init.c", 548; // SELECT PLAYER CORE SPRITE //
13751                        	
13752                        		.dbg	line,	"include\init.c", 549; spr_set(player_id); // PLAYER_START_INDEX
13753                        		__ld.umq	_player_id
         13:DC9D  AD 15 23   			lda	_player_id
13754                        		__call		_spr_set.1
         13:DCA0  20 DD E7   			call	_spr_set.1
13755                        	
13756                        		.dbg	line,	"include\init.c", 552; player_pos_x = 112;
13757                        		__st.wmiq	112, _player_pos_x
         13:DCA3  A9 70      			lda.l	#112
         13:DCA5  8D D2 24   			sta.l	_player_pos_x
         13:DCA8  9C D3 24   			stz.h	_player_pos_x
13758                        	
13759                        		.dbg	line,	"include\init.c", 553; player_pos_y = PLAYER_BASE_Y_POS;
13760                        		__st.wmiq	128, _player_pos_y
         13:DCAB  A9 80      			lda.l	#128
         13:DCAD  8D D4 24   			sta.l	_player_pos_y
         13:DCB0  9C D5 24   			stz.h	_player_pos_y
13761                        	
13762                        		.dbg	line,	"include\init.c", 556; spr_x(player_pos_x);
13763                        		__ld.wm		_player_pos_x
         13:DCB3  AD D2 24   			lda.l	_player_pos_x
         13:DCB6  AC D3 24   			ldy.h	_player_pos_x
13764                        		__call		_spr_x.1
         13:DCB9  20 0A E8   			call	_spr_x.1
13765                        	
13766                        		.dbg	line,	"include\init.c", 557; spr_y(player_pos_y);
13767                        		__ld.wm		_player_pos_y
         13:DCBC  AD D4 24   			lda.l	_player_pos_y
         13:DCBF  AC D5 24   			ldy.h	_player_pos_y
13768                        		__call		_spr_y.1
         13:DCC2  20 19 E8   			call	_spr_y.1
13769                        	
13770                        		.dbg	line,	"include\init.c", 559; // SET TILES DATA FOR THE PLAYER //
13771                        	
13772                        		.dbg	line,	"include\init.c", 560; spr_pattern(PLAYER_VRAM_ADR);
13773                        		__ld.wi		5632
         13:DCC5  62         			cla
         13:DCC6  A0 16      			ldy.h	#5632
13774                        		__call		_spr_pattern.1
         13:DCC8  20 26 E8   			call	_spr_pattern.1
13775                        	
13776                        		.dbg	line,	"include\init.c", 562; // SET SPRITE FLIP //
13777                        	
13778                        		.dbg	line,	"include\init.c", 563; spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_32x32);
13779                        		__st.umiq	185, _al
         13:DCCB  A9 B9      			lda.l	#185
         13:DCCD  85 F8      			sta	_al
13780                        		__ld.uiq	17
         13:DCCF  A9 11      			lda	#17
13781                        		__call		_spr_ctrl.2
         13:DCD1  20 3C E8   			call	_spr_ctrl.2
13782                        	
13783                        		.dbg	line,	"include\init.c", 565; 
13784                        	
13785                        		.dbg	line,	"include\init.c", 568; spr_pal(0);
13786                        		__ld.uiq	0
         13:DCD4  62         			cla
13787                        		__call		_spr_pal.1
         13:DCD5  20 4D E8   			call	_spr_pal.1
13788                        	
13789                        		.dbg	line,	"include\init.c", 569; spr_pri(TRUE);
13790                        		__ld.uiq	1
         13:DCD8  A9 01      			lda	#1
13791                        		__call		_spr_pri.1
         13:DCDA  20 5C E8   			call	_spr_pri.1
13792                        	
13793                        		.dbg	line,	"include\init.c", 572; //--------------------------------------------------------------------------------------//
13794                        	
13795                        		.dbg	line,	"include\init.c", 573; //                                        CHAIN                                         //
13796                        	
13797                        		.dbg	line,	"include\init.c", 574; //--------------------------------------------------------------------------------------//
13798                        	
13799                        		.dbg	line,	"include\init.c", 576; load_vram(CHAIN_VRAM_ADR, tiles_SPR_CHAIN , TILES_4);
13800                        		__st.wmiq	5120, _di
         13:DCDD  64 F0      			stz.l	_di
         13:DCDF  A9 14      			lda.h	#5120
         13:DCE1  85 F1      			sta.h	_di
13801                        		__farptr	_tiles_SPR_CHAIN, _bp_bank, _bp
         13:DCE3  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_CHAIN))
         13:DCE5  85 EC      			sta.l	_bp
         13:DCE7  A9 6D      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_CHAIN))
         13:DCE9  85 ED      			sta.h	_bp
         13:DCEB  A9 11      			lda	#bank(_tiles_SPR_CHAIN)
         13:DCED  85 02      			sta	_bp_bank
13802                        		__st.wmiq	64, _ax
         13:DCEF  A9 40      			lda.l	#64
         13:DCF1  85 F8      			sta.l	_ax
         13:DCF3  64 F9      			stz.h	_ax
13803                        		 _load_vram.3
         13:DCF5  82         			clx				; Offset to PCE VDC.
         13:DCF6  20 4F FF   			call	load_vram_x
13804                        	
13805                        		.dbg	line,	"include\init.c", 578; for(i=0 ; i<3 ; i++)
13806                        		__st.umiq	0, __init_LEVEL_end - 1  /* i */
         13:DCF9  9C 0E 23   			stz	__init_LEVEL_end - 1
13807    13:DCFC             	.LL593:
13808                        		__ld.umq	__init_LEVEL_end - 1  /* i */
         13:DCFC  AD 0E 23   			lda	__init_LEVEL_end - 1
13809                        		__ult_b.uiq	3
         13:DCFF  C9 03      			cmp	#3		; Subtract integer from A.
         13:DD01  6A         			ror	a		; CC if A < integer.
         13:DD02  49 80      			eor	#$80
         13:DD04  2A         			rol	a
13810                        		__btrue		.LL595
         13:DD05  B0 07      			bcs	.LL595
13811                        		__bra		.LL596
         13:DD07  80 2F      			bra	.LL596
13812    13:DD09             	.LL594:
13813                        		__inc.umq	__init_LEVEL_end - 1  /* i */
         13:DD09  EE 0E 23   			inc	__init_LEVEL_end - 1
13814                        		__bra		.LL593
         13:DD0C  80 EE      			bra	.LL593
13815    13:DD0E             	.LL595:
13816                        	
13817                        		.dbg	line,	"include\init.c", 579; {
13818                        	
13819                        		.dbg	line,	"include\init.c", 580; spr_set(chain_id+i);
13820                        		__ld.um		_chain_id
         13:DD0E  AD 21 23   			lda	_chain_id
         13:DD11  C2         			cly
13821                        		__add.um	__init_LEVEL_end - 1  /* i */
         13:DD12  18         			clc
         13:DD13  6D 0E 23   			adc	__init_LEVEL_end - 1
         13:DD16  90 01      			bcc	!+
         13:DD18  C8         			iny
         13:DD19             	!:
13822                        		__call		_spr_set.1
         13:DD19  20 DD E7   			call	_spr_set.1
13823                        	
13824                        		.dbg	line,	"include\init.c", 581; spr_pattern(CHAIN_VRAM_ADR);
13825                        		__ld.wi		5120
         13:DD1C  62         			cla
         13:DD1D  A0 14      			ldy.h	#5120
13826                        		__call		_spr_pattern.1
         13:DD1F  20 26 E8   			call	_spr_pattern.1
13827                        	
13828                        		.dbg	line,	"include\init.c", 582; spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_16x16);
13829                        		__st.umiq	185, _al
         13:DD22  A9 B9      			lda.l	#185
         13:DD24  85 F8      			sta	_al
13830                        		__ld.uiq	0
         13:DD26  62         			cla
13831                        		__call		_spr_ctrl.2
         13:DD27  20 3C E8   			call	_spr_ctrl.2
13832                        	
13833                        		.dbg	line,	"include\init.c", 583; spr_hide();
13834                        		__call		_spr_hide
         13:DD2A  20 F8 E7   			call	_spr_hide
13835                        	
13836                        		.dbg	line,	"include\init.c", 585; spr_pal(0);
13837                        		__ld.uiq	0
         13:DD2D  62         			cla
13838                        		__call		_spr_pal.1
         13:DD2E  20 4D E8   			call	_spr_pal.1
13839                        	
13840                        		.dbg	line,	"include\init.c", 586; spr_pri(TRUE);
13841                        		__ld.uiq	1
         13:DD31  A9 01      			lda	#1
13842                        		__call		_spr_pri.1
         13:DD33  20 5C E8   			call	_spr_pri.1
13843                        	
13844                        		.dbg	line,	"include\init.c", 587; }
13845                        		__bra		.LL594
         13:DD36  80 D1      			bra	.LL594
13846    13:DD38             	.LL596:
13847                        	
13848                        		.dbg	line,	"include\init.c", 588; 
13849                        	
13850                        		.dbg	line,	"include\init.c", 590; //--------------------------------------------------------------------------------------//
13851                        	
13852                        		.dbg	line,	"include\init.c", 591; //                                        WEAPON                                        //
13853                        	
13854                        		.dbg	line,	"include\init.c", 592; //--------------------------------------------------------------------------------------//
13855                        	
13856                        		.dbg	line,	"include\init.c", 594; if(weapon_level == 0)
13857                        		__not.um	_weapon_level
         13:DD38  AD 24 23   			lda	_weapon_level
         13:DD3B  18         			clc
         13:DD3C  D0 01      			bne	!+
         13:DD3E  38         			sec
         13:DD3F             	!:
13858                        		__bfalse	.LL597
         13:DD3F  90 27      			bcc	.LL597
13859                        	
13860                        		.dbg	line,	"include\init.c", 595; {
13861                        	
13862                        		.dbg	line,	"include\init.c", 596; load_vram(WEAPON_VRAM_ADR, tiles_SPR_WEAPON_0 , SIZEOF(tiles_SPR_WEAPON_0) >> 1);
13863                        		__st.wmiq	5184, _di
         13:DD41  A9 40      			lda.l	#5184
         13:DD43  85 F0      			sta.l	_di
         13:DD45  A9 14      			lda.h	#5184
         13:DD47  85 F1      			sta.h	_di
13864                        		__farptr	_tiles_SPR_WEAPON_0, _bp_bank, _bp
         13:DD49  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_0))
         13:DD4B  85 EC      			sta.l	_bp
         13:DD4D  A9 6E      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_0))
         13:DD4F  85 ED      			sta.h	_bp
         13:DD51  A9 11      			lda	#bank(_tiles_SPR_WEAPON_0)
         13:DD53  85 02      			sta	_bp_bank
13865                        		__ld.wi		___sizeof__tiles_SPR_WEAPON_0
         13:DD55  A9 80      			lda.l	#___sizeof__tiles_SPR_WEAPON_0
         13:DD57  A0 02      			ldy.h	#___sizeof__tiles_SPR_WEAPON_0
13866                        		__lsr.wi	1
         13:DD59  42         			say
         13:DD5A  4A         			lsr	a
         13:DD5B  42         			say
         13:DD5C  6A         			ror	a
13867                        		__st.wmq	_ax
         13:DD5D  85 F8      			sta.l	_ax
         13:DD5F  84 F9      			sty.h	_ax
13868                        		 _load_vram.3
         13:DD61  82         			clx				; Offset to PCE VDC.
         13:DD62  20 4F FF   			call	load_vram_x
13869                        	
13870                        		.dbg	line,	"include\init.c", 597; }
13871                        	
13872                        		.dbg	line,	"include\init.c", 599; else if(weapon_level == 1)
13873                        		__bra		.LL598
         13:DD65  4C 27 DE   			bra	.LL598
13874    13:DD68             	.LL597:
13875                        		__ld.umq	_weapon_level
         13:DD68  AD 24 23   			lda	_weapon_level
13876                        		__equ_b.uiq	1
         13:DD6B  C9 01      			cmp	#1
         13:DD6D  F0 01      			beq	!+
         13:DD6F  18         			clc
         13:DD70             	!:
13877                        		__bfalse	.LL599
         13:DD70  90 27      			bcc	.LL599
13878                        	
13879                        		.dbg	line,	"include\init.c", 600; {
13880                        	
13881                        		.dbg	line,	"include\init.c", 601; load_vram(WEAPON_VRAM_ADR, tiles_SPR_WEAPON_1 , SIZEOF(tiles_SPR_WEAPON_1) >> 1);
13882                        		__st.wmiq	5184, _di
         13:DD72  A9 40      			lda.l	#5184
         13:DD74  85 F0      			sta.l	_di
         13:DD76  A9 14      			lda.h	#5184
         13:DD78  85 F1      			sta.h	_di
13883                        		__farptr	_tiles_SPR_WEAPON_1, _bp_bank, _bp
         13:DD7A  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_1))
         13:DD7C  85 EC      			sta.l	_bp
         13:DD7E  A9 70      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_1))
         13:DD80  85 ED      			sta.h	_bp
         13:DD82  A9 11      			lda	#bank(_tiles_SPR_WEAPON_1)
         13:DD84  85 02      			sta	_bp_bank
13884                        		__ld.wi		___sizeof__tiles_SPR_WEAPON_1
         13:DD86  A9 80      			lda.l	#___sizeof__tiles_SPR_WEAPON_1
         13:DD88  A0 02      			ldy.h	#___sizeof__tiles_SPR_WEAPON_1
13885                        		__lsr.wi	1
         13:DD8A  42         			say
         13:DD8B  4A         			lsr	a
         13:DD8C  42         			say
         13:DD8D  6A         			ror	a
13886                        		__st.wmq	_ax
         13:DD8E  85 F8      			sta.l	_ax
         13:DD90  84 F9      			sty.h	_ax
13887                        		 _load_vram.3
         13:DD92  82         			clx				; Offset to PCE VDC.
         13:DD93  20 4F FF   			call	load_vram_x
13888                        	
13889                        		.dbg	line,	"include\init.c", 602; }
13890                        	
13891                        		.dbg	line,	"include\init.c", 604; else if(weapon_level == 2)
13892                        		__bra		.LL600
         13:DD96  4C 27 DE   			bra	.LL600
13893    13:DD99             	.LL599:
13894                        		__ld.umq	_weapon_level
         13:DD99  AD 24 23   			lda	_weapon_level
13895                        		__equ_b.uiq	2
         13:DD9C  C9 02      			cmp	#2
         13:DD9E  F0 01      			beq	!+
         13:DDA0  18         			clc
         13:DDA1             	!:
13896                        		__bfalse	.LL601
         13:DDA1  90 26      			bcc	.LL601
13897                        	
13898                        		.dbg	line,	"include\init.c", 605; {
13899                        	
13900                        		.dbg	line,	"include\init.c", 606; load_vram(WEAPON_VRAM_ADR, tiles_SPR_WEAPON_2 , SIZEOF(tiles_SPR_WEAPON_2) >> 1);
13901                        		__st.wmiq	5184, _di
         13:DDA3  A9 40      			lda.l	#5184
         13:DDA5  85 F0      			sta.l	_di
         13:DDA7  A9 14      			lda.h	#5184
         13:DDA9  85 F1      			sta.h	_di
13902                        		__farptr	_tiles_SPR_WEAPON_2, _bp_bank, _bp
         13:DDAB  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_2))
         13:DDAD  85 EC      			sta.l	_bp
         13:DDAF  A9 73      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_2))
         13:DDB1  85 ED      			sta.h	_bp
         13:DDB3  A9 11      			lda	#bank(_tiles_SPR_WEAPON_2)
         13:DDB5  85 02      			sta	_bp_bank
13903                        		__ld.wi		___sizeof__tiles_SPR_WEAPON_2
         13:DDB7  A9 80      			lda.l	#___sizeof__tiles_SPR_WEAPON_2
         13:DDB9  A0 02      			ldy.h	#___sizeof__tiles_SPR_WEAPON_2
13904                        		__lsr.wi	1
         13:DDBB  42         			say
         13:DDBC  4A         			lsr	a
         13:DDBD  42         			say
         13:DDBE  6A         			ror	a
13905                        		__st.wmq	_ax
         13:DDBF  85 F8      			sta.l	_ax
         13:DDC1  84 F9      			sty.h	_ax
13906                        		 _load_vram.3
         13:DDC3  82         			clx				; Offset to PCE VDC.
         13:DDC4  20 4F FF   			call	load_vram_x
13907                        	
13908                        		.dbg	line,	"include\init.c", 607; }
13909                        	
13910                        		.dbg	line,	"include\init.c", 609; else if(weapon_level == 3)
13911                        		__bra		.LL602
         13:DDC7  80 5E      			bra	.LL602
13912    13:DDC9             	.LL601:
13913                        		__ld.umq	_weapon_level
         13:DDC9  AD 24 23   			lda	_weapon_level
13914                        		__equ_b.uiq	3
         13:DDCC  C9 03      			cmp	#3
         13:DDCE  F0 01      			beq	!+
         13:DDD0  18         			clc
         13:DDD1             	!:
13915                        		__bfalse	.LL603
         13:DDD1  90 26      			bcc	.LL603
13916                        	
13917                        		.dbg	line,	"include\init.c", 610; {
13918                        	
13919                        		.dbg	line,	"include\init.c", 611; load_vram(WEAPON_VRAM_ADR, tiles_SPR_WEAPON_3 , SIZEOF(tiles_SPR_WEAPON_3) >> 1);
13920                        		__st.wmiq	5184, _di
         13:DDD3  A9 40      			lda.l	#5184
         13:DDD5  85 F0      			sta.l	_di
         13:DDD7  A9 14      			lda.h	#5184
         13:DDD9  85 F1      			sta.h	_di
13921                        		__farptr	_tiles_SPR_WEAPON_3, _bp_bank, _bp
         13:DDDB  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_3))
         13:DDDD  85 EC      			sta.l	_bp
         13:DDDF  A9 75      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_3))
         13:DDE1  85 ED      			sta.h	_bp
         13:DDE3  A9 11      			lda	#bank(_tiles_SPR_WEAPON_3)
         13:DDE5  85 02      			sta	_bp_bank
13922                        		__ld.wi		___sizeof__tiles_SPR_WEAPON_3
         13:DDE7  A9 80      			lda.l	#___sizeof__tiles_SPR_WEAPON_3
         13:DDE9  A0 02      			ldy.h	#___sizeof__tiles_SPR_WEAPON_3
13923                        		__lsr.wi	1
         13:DDEB  42         			say
         13:DDEC  4A         			lsr	a
         13:DDED  42         			say
         13:DDEE  6A         			ror	a
13924                        		__st.wmq	_ax
         13:DDEF  85 F8      			sta.l	_ax
         13:DDF1  84 F9      			sty.h	_ax
13925                        		 _load_vram.3
         13:DDF3  82         			clx				; Offset to PCE VDC.
         13:DDF4  20 4F FF   			call	load_vram_x
13926                        	
13927                        		.dbg	line,	"include\init.c", 612; }
13928                        	
13929                        		.dbg	line,	"include\init.c", 614; else if(weapon_level == 4)
13930                        		__bra		.LL604
         13:DDF7  80 2E      			bra	.LL604
13931    13:DDF9             	.LL603:
13932                        		__ld.umq	_weapon_level
         13:DDF9  AD 24 23   			lda	_weapon_level
13933                        		__equ_b.uiq	4
         13:DDFC  C9 04      			cmp	#4
         13:DDFE  F0 01      			beq	!+
         13:DE00  18         			clc
         13:DE01             	!:
13934                        		__bfalse	.LL605
         13:DE01  90 24      			bcc	.LL605
13935                        	
13936                        		.dbg	line,	"include\init.c", 615; {
13937                        	
13938                        		.dbg	line,	"include\init.c", 616; load_vram(WEAPON_VRAM_ADR, tiles_SPR_WEAPON_4 , SIZEOF(tiles_SPR_WEAPON_4) >> 1);
13939                        		__st.wmiq	5184, _di
         13:DE03  A9 40      			lda.l	#5184
         13:DE05  85 F0      			sta.l	_di
         13:DE07  A9 14      			lda.h	#5184
         13:DE09  85 F1      			sta.h	_di
13940                        		__farptr	_tiles_SPR_WEAPON_4, _bp_bank, _bp
         13:DE0B  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_4))
         13:DE0D  85 EC      			sta.l	_bp
         13:DE0F  A9 78      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_4))
         13:DE11  85 ED      			sta.h	_bp
         13:DE13  A9 11      			lda	#bank(_tiles_SPR_WEAPON_4)
         13:DE15  85 02      			sta	_bp_bank
13941                        		__ld.wi		___sizeof__tiles_SPR_WEAPON_4
         13:DE17  A9 80      			lda.l	#___sizeof__tiles_SPR_WEAPON_4
         13:DE19  A0 02      			ldy.h	#___sizeof__tiles_SPR_WEAPON_4
13942                        		__lsr.wi	1
         13:DE1B  42         			say
         13:DE1C  4A         			lsr	a
         13:DE1D  42         			say
         13:DE1E  6A         			ror	a
13943                        		__st.wmq	_ax
         13:DE1F  85 F8      			sta.l	_ax
         13:DE21  84 F9      			sty.h	_ax
13944                        		 _load_vram.3
         13:DE23  82         			clx				; Offset to PCE VDC.
         13:DE24  20 4F FF   			call	load_vram_x
13945                        	
13946                        		.dbg	line,	"include\init.c", 617; }		
13947                        	
13948                        		.dbg	line,	"include\init.c", 619; 
13949                        	
13950                        		.dbg	line,	"include\init.c", 620; weapon_id = chain_id-1;
13951    13:DE27             	.LL605:
13952    13:DE27             	.LL604:
13953    13:DE27             	.LL602:
13954    13:DE27             	.LL600:
13955    13:DE27             	.LL598:
13956                        		__ld.um		_chain_id
         13:DE27  AD 21 23   			lda	_chain_id
         13:DE2A  C2         			cly
13957                        		__sub.wi	1
         13:DE2B  38         			sec
         13:DE2C  E9 01      			sbc.l	#1
         13:DE2E  B0 01      			bcs	!+
         13:DE30  88         			dey
         13:DE31             	!:
13958                        		__st.umq	_weapon_id
         13:DE31  8D 22 23   			sta	_weapon_id
13959                        	
13960                        		.dbg	line,	"include\init.c", 621; spr_set(weapon_id);
13961                        		__ld.umq	_weapon_id
         13:DE34  AD 22 23   			lda	_weapon_id
13962                        		__call		_spr_set.1
         13:DE37  20 DD E7   			call	_spr_set.1
13963                        	
13964                        		.dbg	line,	"include\init.c", 622; spr_pattern(WEAPON_VRAM_ADR);
13965                        		__ld.wi		5184
         13:DE3A  A9 40      			lda.l	#5184
         13:DE3C  A0 14      			ldy.h	#5184
13966                        		__call		_spr_pattern.1
         13:DE3E  20 26 E8   			call	_spr_pattern.1
13967                        	
13968                        		.dbg	line,	"include\init.c", 623; spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_16x16);
13969                        		__st.umiq	185, _al
         13:DE41  A9 B9      			lda.l	#185
         13:DE43  85 F8      			sta	_al
13970                        		__ld.uiq	0
         13:DE45  62         			cla
13971                        		__call		_spr_ctrl.2
         13:DE46  20 3C E8   			call	_spr_ctrl.2
13972                        	
13973                        		.dbg	line,	"include\init.c", 625; spr_x(player_pos_x+8);
13974                        		__ld.wm		_player_pos_x
         13:DE49  AD D2 24   			lda.l	_player_pos_x
         13:DE4C  AC D3 24   			ldy.h	_player_pos_x
13975                        		__add.wi	8
         13:DE4F  18         			clc
         13:DE50  69 08      			adc.l	#8
         13:DE52  90 01      			bcc	!+
         13:DE54  C8         			iny
         13:DE55             	!:
13976                        		__call		_spr_x.1
         13:DE55  20 0A E8   			call	_spr_x.1
13977                        	
13978                        		.dbg	line,	"include\init.c", 626; spr_y(player_pos_y+16);
13979                        		__ld.wm		_player_pos_y
         13:DE58  AD D4 24   			lda.l	_player_pos_y
         13:DE5B  AC D5 24   			ldy.h	_player_pos_y
13980                        		__add.wi	16
         13:DE5E  18         			clc
         13:DE5F  69 10      			adc.l	#16
         13:DE61  90 01      			bcc	!+
         13:DE63  C8         			iny
         13:DE64             	!:
13981                        		__call		_spr_y.1
         13:DE64  20 19 E8   			call	_spr_y.1
13982                        	
13983                        		.dbg	line,	"include\init.c", 627; spr_pri(TRUE);
13984                        		__ld.uiq	1
         13:DE67  A9 01      			lda	#1
13985                        		__call		_spr_pri.1
         13:DE69  20 5C E8   			call	_spr_pri.1
13986                        	
13987                        		.dbg	line,	"include\init.c", 629; // WEAPON 4 USES PAL2
13988                        	
13989                        		.dbg	line,	"include\init.c", 630; if(weapon_level == 4)
13990                        		__ld.umq	_weapon_level
         13:DE6C  AD 24 23   			lda	_weapon_level
13991                        		__equ_b.uiq	4
         13:DE6F  C9 04      			cmp	#4
         13:DE71  F0 01      			beq	!+
         13:DE73  18         			clc
         13:DE74             	!:
13992                        		__bfalse	.LL606
         13:DE74  90 07      			bcc	.LL606
13993                        	
13994                        		.dbg	line,	"include\init.c", 631; {
13995                        	
13996                        		.dbg	line,	"include\init.c", 632; spr_pal(2);
13997                        		__ld.uiq	2
         13:DE76  A9 02      			lda	#2
13998                        		__call		_spr_pal.1
         13:DE78  20 4D E8   			call	_spr_pal.1
13999                        	
14000                        		.dbg	line,	"include\init.c", 633; }
14001                        	
14002                        		.dbg	line,	"include\init.c", 634; // ALL OTHERS USE PAL0
14003                        	
14004                        		.dbg	line,	"include\init.c", 635; else
14005                        		__bra		.LL607
         13:DE7B  80 04      			bra	.LL607
14006    13:DE7D             	.LL606:
14007                        	
14008                        		.dbg	line,	"include\init.c", 636; {
14009                        	
14010                        		.dbg	line,	"include\init.c", 637; spr_pal(0);
14011                        		__ld.uiq	0
         13:DE7D  62         			cla
14012                        		__call		_spr_pal.1
         13:DE7E  20 4D E8   			call	_spr_pal.1
14013                        	
14014                        		.dbg	line,	"include\init.c", 638; }
14015    13:DE81             	.LL607:
14016                        	
14017                        		.dbg	line,	"include\init.c", 639; 
14018                        	
14019                        		.dbg	line,	"include\init.c", 640; 
14020                        	
14021                        		.dbg	line,	"include\init.c", 643; //--------------------------------------------------------------------------------------//
14022                        	
14023                        		.dbg	line,	"include\init.c", 644; //                                       OBJECTS                                        //
14024                        	
14025                        		.dbg	line,	"include\init.c", 645; //--------------------------------------------------------------------------------------//
14026                        	
14027                        		.dbg	line,	"include\init.c", 647; load_OBJECT_TILES();
14028                        		__call		_load_OBJECT_TILES
         13:DE81  20 E1 FE   			call	_load_OBJECT_TILES
14029                        	
14030                        		.dbg	line,	"include\init.c", 648; init_OBJECT_LV1();
14031                        		__call		_init_OBJECT_LV1
         13:DE84  20 D7 FE   			call	_init_OBJECT_LV1
14032                        	
14033                        		.dbg	line,	"include\init.c", 649; scroll_object();
14034                        		__call		_scroll_object
         13:DE87  20 CD FE   			call	_scroll_object
14035                        	
14036                        		.dbg	line,	"include\init.c", 652; //--------------------------------------------------------------------------------------//
14037                        	
14038                        		.dbg	line,	"include\init.c", 653; //                                        CHESTS                                        //
14039                        	
14040                        		.dbg	line,	"include\init.c", 654; //--------------------------------------------------------------------------------------//
14041                        	
14042                        		.dbg	line,	"include\init.c", 656; load_CHEST_TILES();
14043                        		__call		_load_CHEST_TILES
         13:DE8A  20 C3 FE   			call	_load_CHEST_TILES
14044                        	
14045                        		.dbg	line,	"include\init.c", 657; init_CHEST_LV1();
14046                        		__call		_init_CHEST_LV1
         13:DE8D  20 B9 FE   			call	_init_CHEST_LV1
14047                        	
14048                        		.dbg	line,	"include\init.c", 658; scroll_chest();
14049                        		__call		_scroll_chest
         13:DE90  20 AF FE   			call	_scroll_chest
14050                        	
14051                        		.dbg	line,	"include\init.c", 661; //--------------------------------------------------------------------------------------//
14052                        	
14053                        		.dbg	line,	"include\init.c", 662; //                                         NPCS                                         //
14054                        	
14055                        		.dbg	line,	"include\init.c", 663; //--------------------------------------------------------------------------------------//
14056                        	
14057                        		.dbg	line,	"include\init.c", 665; load_NPC_TILES();
14058                        		__call		_load_NPC_TILES
         13:DE93  20 A5 FE   			call	_load_NPC_TILES
14059                        	
14060                        		.dbg	line,	"include\init.c", 666; init_NPC_LV1();
14061                        		__call		_init_NPC_LV1
         13:DE96  20 9B FE   			call	_init_NPC_LV1
14062                        	
14063                        		.dbg	line,	"include\init.c", 671; // UPDATE PCE SAT //
14064                        	
14065                        		.dbg	line,	"include\init.c", 672; satb_update();
14066                        		__call		_satb_update
         13:DE99  20 91 FE   			call	_satb_update
14067                        	
14068                        		.dbg	line,	"include\init.c", 677; //--------------------------------------------------------------------------------------//
14069                        	
14070                        		.dbg	line,	"include\init.c", 678; //                                LOAD SPRITES PALETTES                                 //
14071                        	
14072                        		.dbg	line,	"include\init.c", 679; //--------------------------------------------------------------------------------------//
14073                        	
14074                        		.dbg	line,	"include\init.c", 681; if(armor_level == 8)
14075                        		__ld.umq	_armor_level
         13:DE9C  AD 23 23   			lda	_armor_level
14076                        		__equ_b.uiq	8
         13:DE9F  C9 08      			cmp	#8
         13:DEA1  F0 01      			beq	!+
         13:DEA3  18         			clc
         13:DEA4             	!:
14077                        		__bfalse	.LL608
         13:DEA4  90 19      			bcc	.LL608
14078                        	
14079                        		.dbg	line,	"include\init.c", 682; {
14080                        	
14081                        		.dbg	line,	"include\init.c", 683; load_palette( 16, palette_PLAYER_8, 1 );
14082                        		__st.umiq	16, _al
         13:DEA6  A9 10      			lda.l	#16
         13:DEA8  85 F8      			sta	_al
14083                        		__farptr	_palette_PLAYER_8, _bp_bank, _bp
         13:DEAA  A9 E0      			lda.l	#$6000 + ($1FFF & (_palette_PLAYER_8))
         13:DEAC  85 EC      			sta.l	_bp
         13:DEAE  A9 6B      			lda.h	#$6000 + ($1FFF & (_palette_PLAYER_8))
         13:DEB0  85 ED      			sta.h	_bp
         13:DEB2  A9 11      			lda	#bank(_palette_PLAYER_8)
         13:DEB4  85 02      			sta	_bp_bank
14084                        		__st.umiq	1, _ah
         13:DEB6  A9 01      			lda.l	#1
         13:DEB8  85 F9      			sta	_ah
14085                        		__call		_load_palette.3
         13:DEBA  20 EB FE   			call	_load_palette.3
14086                        	
14087                        		.dbg	line,	"include\init.c", 684; }
14088                        	
14089                        		.dbg	line,	"include\init.c", 686; else if(armor_level == 5)
14090                        		__bra		.LL609
         13:DEBD  80 5D      			bra	.LL609
14091    13:DEBF             	.LL608:
14092                        		__ld.umq	_armor_level
         13:DEBF  AD 23 23   			lda	_armor_level
14093                        		__equ_b.uiq	5
         13:DEC2  C9 05      			cmp	#5
         13:DEC4  F0 01      			beq	!+
         13:DEC6  18         			clc
         13:DEC7             	!:
14094                        		__bfalse	.LL610
         13:DEC7  90 19      			bcc	.LL610
14095                        	
14096                        		.dbg	line,	"include\init.c", 687; {
14097                        	
14098                        		.dbg	line,	"include\init.c", 688; load_palette( 16, palette_PLAYER_5, 1 );
14099                        		__st.umiq	16, _al
         13:DEC9  A9 10      			lda.l	#16
         13:DECB  85 F8      			sta	_al
14100                        		__farptr	_palette_PLAYER_5, _bp_bank, _bp
         13:DECD  A9 E0      			lda.l	#$6000 + ($1FFF & (_palette_PLAYER_5))
         13:DECF  85 EC      			sta.l	_bp
         13:DED1  A9 69      			lda.h	#$6000 + ($1FFF & (_palette_PLAYER_5))
         13:DED3  85 ED      			sta.h	_bp
         13:DED5  A9 11      			lda	#bank(_palette_PLAYER_5)
         13:DED7  85 02      			sta	_bp_bank
14101                        		__st.umiq	1, _ah
         13:DED9  A9 01      			lda.l	#1
         13:DEDB  85 F9      			sta	_ah
14102                        		__call		_load_palette.3
         13:DEDD  20 EB FE   			call	_load_palette.3
14103                        	
14104                        		.dbg	line,	"include\init.c", 689; }
14105                        	
14106                        		.dbg	line,	"include\init.c", 691; else if(armor_level == 4)
14107                        		__bra		.LL611
         13:DEE0  80 3A      			bra	.LL611
14108    13:DEE2             	.LL610:
14109                        		__ld.umq	_armor_level
         13:DEE2  AD 23 23   			lda	_armor_level
14110                        		__equ_b.uiq	4
         13:DEE5  C9 04      			cmp	#4
         13:DEE7  F0 01      			beq	!+
         13:DEE9  18         			clc
         13:DEEA             	!:
14111                        		__bfalse	.LL612
         13:DEEA  90 19      			bcc	.LL612
14112                        	
14113                        		.dbg	line,	"include\init.c", 692; {
14114                        	
14115                        		.dbg	line,	"include\init.c", 693; load_palette( 16, palette_PLAYER_4, 1 );
14116                        		__st.umiq	16, _al
         13:DEEC  A9 10      			lda.l	#16
         13:DEEE  85 F8      			sta	_al
14117                        		__farptr	_palette_PLAYER_4, _bp_bank, _bp
         13:DEF0  A9 E0      			lda.l	#$6000 + ($1FFF & (_palette_PLAYER_4))
         13:DEF2  85 EC      			sta.l	_bp
         13:DEF4  A9 67      			lda.h	#$6000 + ($1FFF & (_palette_PLAYER_4))
         13:DEF6  85 ED      			sta.h	_bp
         13:DEF8  A9 11      			lda	#bank(_palette_PLAYER_4)
         13:DEFA  85 02      			sta	_bp_bank
14118                        		__st.umiq	1, _ah
         13:DEFC  A9 01      			lda.l	#1
         13:DEFE  85 F9      			sta	_ah
14119                        		__call		_load_palette.3
         13:DF00  20 EB FE   			call	_load_palette.3
14120                        	
14121                        		.dbg	line,	"include\init.c", 694; }
14122                        	
14123                        		.dbg	line,	"include\init.c", 696; else
14124                        		__bra		.LL613
         13:DF03  80 17      			bra	.LL613
14125    13:DF05             	.LL612:
14126                        	
14127                        		.dbg	line,	"include\init.c", 697; {
14128                        	
14129                        		.dbg	line,	"include\init.c", 698; load_palette( 16, palette_PLAYER_1, 1 );
14130                        		__st.umiq	16, _al
         13:DF05  A9 10      			lda.l	#16
         13:DF07  85 F8      			sta	_al
14131                        		__farptr	_palette_PLAYER_1, _bp_bank, _bp
         13:DF09  A9 E0      			lda.l	#$6000 + ($1FFF & (_palette_PLAYER_1))
         13:DF0B  85 EC      			sta.l	_bp
         13:DF0D  A9 65      			lda.h	#$6000 + ($1FFF & (_palette_PLAYER_1))
         13:DF0F  85 ED      			sta.h	_bp
         13:DF11  A9 11      			lda	#bank(_palette_PLAYER_1)
         13:DF13  85 02      			sta	_bp_bank
14132                        		__st.umiq	1, _ah
         13:DF15  A9 01      			lda.l	#1
         13:DF17  85 F9      			sta	_ah
14133                        		__call		_load_palette.3
         13:DF19  20 EB FE   			call	_load_palette.3
14134                        	
14135                        		.dbg	line,	"include\init.c", 699; }
14136    13:DF1C             	.LL613:
14137    13:DF1C             	.LL611:
14138    13:DF1C             	.LL609:
14139                        	
14140                        		.dbg	line,	"include\init.c", 702; load_palette( 17, palette_objects_1, 1 );
14141                        		__st.umiq	17, _al
         13:DF1C  A9 11      			lda.l	#17
         13:DF1E  85 F8      			sta	_al
14142                        		__farptr	_palette_objects_1, _bp_bank, _bp
         13:DF20  A9 60      			lda.l	#$6000 + ($1FFF & (_palette_objects_1))
         13:DF22  85 EC      			sta.l	_bp
         13:DF24  A9 76      			lda.h	#$6000 + ($1FFF & (_palette_objects_1))
         13:DF26  85 ED      			sta.h	_bp
         13:DF28  A9 12      			lda	#bank(_palette_objects_1)
         13:DF2A  85 02      			sta	_bp_bank
14143                        		__st.umiq	1, _ah
         13:DF2C  A9 01      			lda.l	#1
         13:DF2E  85 F9      			sta	_ah
14144                        		__call		_load_palette.3
         13:DF30  20 EB FE   			call	_load_palette.3
14145                        	
14146                        		.dbg	line,	"include\init.c", 703; load_palette( 18, palette_objects_2, 1 );
14147                        		__st.umiq	18, _al
         13:DF33  A9 12      			lda.l	#18
         13:DF35  85 F8      			sta	_al
14148                        		__farptr	_palette_objects_2, _bp_bank, _bp
         13:DF37  A9 60      			lda.l	#$6000 + ($1FFF & (_palette_objects_2))
         13:DF39  85 EC      			sta.l	_bp
         13:DF3B  A9 78      			lda.h	#$6000 + ($1FFF & (_palette_objects_2))
         13:DF3D  85 ED      			sta.h	_bp
         13:DF3F  A9 12      			lda	#bank(_palette_objects_2)
         13:DF41  85 02      			sta	_bp_bank
14149                        		__st.umiq	1, _ah
         13:DF43  A9 01      			lda.l	#1
         13:DF45  85 F9      			sta	_ah
14150                        		__call		_load_palette.3
         13:DF47  20 EB FE   			call	_load_palette.3
14151                        	
14152                        		.dbg	line,	"include\init.c", 708; // VSYNC //
14153                        	
14154                        		.dbg	line,	"include\init.c", 709; vsync();
14155                        		__call		_vsync
         13:DF4A  20 09 E3   			call	_vsync
14156                        	
14157                        		.dbg	line,	"include\init.c", 711; // ENABLE DISPLAY //
14158                        	
14159                        		.dbg	line,	"include\init.c", 712; disp_on();
14160                        		__call		_disp_on
         13:DF4D  20 16 E4   			call	_disp_on
14161                        	
14162                        		.dbg	line,	"include\init.c", 713; }
14163                        	
14164                        		.dbg	line,	"include\init.c", 714; }
14165    13:DF50             	.LL587:
14166    13:DF50             	.LL586:
14167                        		__return	0
         13:DF50  4C EF FF   			jmp	leave_proc
14168                        		.dbg	clear
14169                        		.endp
14170               6860     		.data
14171               230E     		.bss
14172    F8:230E             	__init_LEVEL_loc:
14173    F8:230E             			ds	1
14174    F8:230F             	__init_LEVEL_end:
14175               E309     		.code
14176                        		.pceas
14177                        	
14178                        		.dbg	line,	"include\init.c", 717; void init_SHOP()
14179                        		.dbg	line,	"include\init.c", 718; {
14180                        	;***********************
14181                        	;***********************
14182                        	
14183                        		.hucc
14184    02:C580             		.proc		_init_SHOP
14185                        		__enter		_init_SHOP
14186                        	
14187                        		.dbg	line,	"include\init.c", 719; char i;
14188                        	
14189                        		.dbg	line,	"include\init.c", 720; char item_id;
14190                        	
14191                        		.dbg	line,	"include\init.c", 723; // DISABLE DISPLAY //
14192                        	
14193                        		.dbg	line,	"include\init.c", 724; disp_off();
14194                        		__call		_disp_off
         02:C580  20 29 E4   			call	_disp_off
14195                        	
14196                        		.dbg	line,	"include\init.c", 725; 
14197                        	
14198                        		.dbg	line,	"include\init.c", 727; // VSYNC //
14199                        	
14200                        		.dbg	line,	"include\init.c", 728; vsync();
14201                        		__call		_vsync
         02:C583  20 09 E3   			call	_vsync
14202                        	
14203                        		.dbg	line,	"include\init.c", 731; // HIDE ALL LEVEL SPRITES //
14204                        	
14205                        		.dbg	line,	"include\init.c", 732; hide_LEVEL_SPRITES();
14206                        		__call		_hide_LEVEL_SPRITES
         02:C586  20 87 FE   			call	_hide_LEVEL_SPRITES
14207                        	
14208                        		.dbg	line,	"include\init.c", 735; // SET VDC 1 SCREEN SIZE (IN TILES) - 32x32 = 256 PIXELS
14209                        	
14210                        		.dbg	line,	"include\init.c", 736; set_screen_size(SCR_SIZE_64x32);
14211                        		__st.umiq	1, _al
         02:C589  A9 01      			lda.l	#1
         02:C58B  85 F8      			sta	_al
14212                        		__call		_set_screen_size.1
         02:C58D  20 31 FF   			call	_set_screen_size.1
14213                        	
14214                        		.dbg	line,	"include\init.c", 739; // SET VDC 2 SCREEN SIZE (IN TILES) - 32x32 = 256 PIXELS
14215                        	
14216                        		.dbg	line,	"include\init.c", 740; sgx_set_screen_size(SCR_SIZE_32x32);
14217                        		__st.umiq	0, _al
         02:C590  64 F8      			stz	_al
14218                        		__call		_sgx_set_screen_size.1
         02:C592  20 27 FF   			call	_sgx_set_screen_size.1
14219                        	
14220                        		.dbg	line,	"include\init.c", 745; //**************************************************************************************//
14221                        	
14222                        		.dbg	line,	"include\init.c", 746; //                                                                                      //
14223                        	
14224                        		.dbg	line,	"include\init.c", 747; //                                      VARIABLES                                       //
14225                        	
14226                        		.dbg	line,	"include\init.c", 748; //                                                                                      //
14227                        	
14228                        		.dbg	line,	"include\init.c", 749; //**************************************************************************************//
14229                        	
14230                        		.dbg	line,	"include\init.c", 751; index_x = 0;
14231                        		__st.umiq	0, _index_x
         02:C595  9C CD 23   			stz	_index_x
14232                        	
14233                        		.dbg	line,	"include\init.c", 752; index_y = 0;
14234                        		__st.umiq	0, _index_y
         02:C598  9C CE 23   			stz	_index_y
14235                        	
14236                        		.dbg	line,	"include\init.c", 753; item_index = 0;
14237                        		__st.umiq	0, _item_index
         02:C59B  9C CF 23   			stz	_item_index
14238                        	
14239                        		.dbg	line,	"include\init.c", 755; minutes = 0;
14240                        		__st.umiq	0, _minutes
         02:C59E  9C 28 23   			stz	_minutes
14241                        	
14242                        		.dbg	line,	"include\init.c", 756; seconds = 30;
14243                        		__st.umiq	30, _seconds
         02:C5A1  A9 1E      			lda.l	#30
         02:C5A3  8D 29 23   			sta	_seconds
14244                        	
14245                        		.dbg	line,	"include\init.c", 758; shop_counter = 0;
14246                        		__st.umiq	0, _shop_counter
         02:C5A6  9C D1 23   			stz	_shop_counter
14247                        	
14248                        		.dbg	line,	"include\init.c", 759; shop_phase = SHOP_PHASE_ENTER;
14249                        		__st.umiq	0, _shop_phase
         02:C5A9  9C D0 23   			stz	_shop_phase
14250                        	
14251                        		.dbg	line,	"include\init.c", 761; if(level_id == 1)
14252                        		__ld.umq	_level_id
         02:C5AC  AD 13 23   			lda	_level_id
14253                        		__equ_b.uiq	1
         02:C5AF  C9 01      			cmp	#1
         02:C5B1  F0 01      			beq	!+
         02:C5B3  18         			clc
         02:C5B4             	!:
14254                        		__bfalse	.LL615
         02:C5B4  90 0A      			bcc	.LL615
14255                        	
14256                        		.dbg	line,	"include\init.c", 762; {
14257                        	
14258                        		.dbg	line,	"include\init.c", 763; ptr_SHOP_ITEM_PRICES = &TABLE_SHOP_PRICES_LV1[0];
14259                        		__ld.wi		_TABLE_SHOP_PRICES_LV1
         02:C5B6  A9 68      			lda.l	#_TABLE_SHOP_PRICES_LV1
         02:C5B8  A0 61      			ldy.h	#_TABLE_SHOP_PRICES_LV1
14260                        		__st.wmq	_ptr_SHOP_ITEM_PRICES
         02:C5BA  8D 44 26   			sta.l	_ptr_SHOP_ITEM_PRICES
         02:C5BD  8C 45 26   			sty.h	_ptr_SHOP_ITEM_PRICES
14261                        	
14262                        		.dbg	line,	"include\init.c", 764; }
14263                        	
14264                        		.dbg	line,	"include\init.c", 765; 
14265                        	
14266                        		.dbg	line,	"include\init.c", 770; //**************************************************************************************//
14267                        	
14268                        		.dbg	line,	"include\init.c", 771; //                                                                                      //
14269                        	
14270                        		.dbg	line,	"include\init.c", 772; //                                        VDC 2                                         //
14271                        	
14272                        		.dbg	line,	"include\init.c", 773; //                                                                                      //
14273                        	
14274                        		.dbg	line,	"include\init.c", 774; //**************************************************************************************//
14275                        	
14276                        		.dbg	line,	"include\init.c", 776; //--------------------------------------------------------------------------------------//
14277                        	
14278                        		.dbg	line,	"include\init.c", 777; //                                      LOAD FONT                                       //
14279                        	
14280                        		.dbg	line,	"include\init.c", 778; //--------------------------------------------------------------------------------------//
14281                        	
14282                        		.dbg	line,	"include\init.c", 780; load_vram( 0x0800, tileset_FONT, SIZEOF(tileset_FONT) >> 1 );
14283    02:C5C0             	.LL615:
14284                        		__st.wmiq	2048, _di
         02:C5C0  64 F0      			stz.l	_di
         02:C5C2  A9 08      			lda.h	#2048
         02:C5C4  85 F1      			sta.h	_di
14285                        		__farptr	_tileset_FONT, _bp_bank, _bp
         02:C5C6  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_FONT))
         02:C5C8  85 EC      			sta.l	_bp
         02:C5CA  A9 60      			lda.h	#$6000 + ($1FFF & (_tileset_FONT))
         02:C5CC  85 ED      			sta.h	_bp
         02:C5CE  A9 03      			lda	#bank(_tileset_FONT)
         02:C5D0  85 02      			sta	_bp_bank
14286                        		__ld.wi		___sizeof__tileset_FONT
         02:C5D2  A9 00      			lda.l	#___sizeof__tileset_FONT
         02:C5D4  A0 0C      			ldy.h	#___sizeof__tileset_FONT
14287                        		__lsr.wi	1
         02:C5D6  42         			say
         02:C5D7  4A         			lsr	a
         02:C5D8  42         			say
         02:C5D9  6A         			ror	a
14288                        		__st.wmq	_ax
         02:C5DA  85 F8      			sta.l	_ax
         02:C5DC  84 F9      			sty.h	_ax
14289                        		 _load_vram.3
         02:C5DE  82         			clx				; Offset to PCE VDC.
         02:C5DF  20 4F FF   			call	load_vram_x
14290                        	
14291                        		.dbg	line,	"include\init.c", 782; set_font_pal(15);
14292                        		__ld.uiq	15
         02:C5E2  A9 0F      			lda	#15
14293                        		__call		_set_font_pal.1
         02:C5E4  20 09 E6   			call	_set_font_pal.1
14294                        	
14295                        		.dbg	line,	"include\init.c", 785; //--------------------------------------------------------------------------------------//
14296                        	
14297                        		.dbg	line,	"include\init.c", 786; //                                    LOAD TILESET                                      //
14298                        	
14299                        		.dbg	line,	"include\init.c", 787; //--------------------------------------------------------------------------------------//
14300                        	
14301                        		.dbg	line,	"include\init.c", 789; sgx_load_vram( 0x1000, tileset_SHOP_BG_B, SIZEOF(tileset_SHOP_BG_B) >> 1 );
14302                        		__st.wmiq	4096, _di
         02:C5E7  64 F0      			stz.l	_di
         02:C5E9  A9 10      			lda.h	#4096
         02:C5EB  85 F1      			sta.h	_di
14303                        		__farptr	_tileset_SHOP_BG_B, _bp_bank, _bp
         02:C5ED  A9 A0      			lda.l	#$6000 + ($1FFF & (_tileset_SHOP_BG_B))
         02:C5EF  85 EC      			sta.l	_bp
         02:C5F1  A9 7A      			lda.h	#$6000 + ($1FFF & (_tileset_SHOP_BG_B))
         02:C5F3  85 ED      			sta.h	_bp
         02:C5F5  A9 0B      			lda	#bank(_tileset_SHOP_BG_B)
         02:C5F7  85 02      			sta	_bp_bank
14304                        		__ld.wi		___sizeof__tileset_SHOP_BG_B
         02:C5F9  A9 60      			lda.l	#___sizeof__tileset_SHOP_BG_B
         02:C5FB  A0 39      			ldy.h	#___sizeof__tileset_SHOP_BG_B
14305                        		__lsr.wi	1
         02:C5FD  42         			say
         02:C5FE  4A         			lsr	a
         02:C5FF  42         			say
         02:C600  6A         			ror	a
14306                        		__st.wmq	_ax
         02:C601  85 F8      			sta.l	_ax
         02:C603  84 F9      			sty.h	_ax
14307                        		 _sgx_load_vram.3
         02:C605  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:C607  20 4F FF   			call	load_vram_x
14308                        	
14309                        		.dbg	line,	"include\init.c", 792; //--------------------------------------------------------------------------------------//
14310                        	
14311                        		.dbg	line,	"include\init.c", 793; //                                      LOAD ITEMS                                      //
14312                        	
14313                        		.dbg	line,	"include\init.c", 794; //--------------------------------------------------------------------------------------//
14314                        	
14315                        		.dbg	line,	"include\init.c", 796; for(i=0 ; i<10 ; i++)
14316                        		__st.umiq	0, __init_SHOP_end - 1  /* i */
         02:C60A  9C 10 23   			stz	__init_SHOP_end - 1
14317    02:C60D             	.LL616:
14318                        		__ld.umq	__init_SHOP_end - 1  /* i */
         02:C60D  AD 10 23   			lda	__init_SHOP_end - 1
14319                        		__ult_b.uiq	10
         02:C610  C9 0A      			cmp	#10		; Subtract integer from A.
         02:C612  6A         			ror	a		; CC if A < integer.
         02:C613  49 80      			eor	#$80
         02:C615  2A         			rol	a
14320                        		__btrue		.LL618
         02:C616  B0 07      			bcs	.LL618
14321                        		__bra		.LL619
         02:C618  80 42      			bra	.LL619
14322    02:C61A             	.LL617:
14323                        		__inc.umq	__init_SHOP_end - 1  /* i */
         02:C61A  EE 10 23   			inc	__init_SHOP_end - 1
14324                        		__bra		.LL616
         02:C61D  80 EE      			bra	.LL616
14325    02:C61F             	.LL618:
14326                        	
14327                        		.dbg	line,	"include\init.c", 797; {
14328                        	
14329                        		.dbg	line,	"include\init.c", 798; set_far_base(TABLE_SHOP_ITEMS_TILES_BANK[i],TABLE_SHOP_ITEMS_TILES_ADR[i]);
14330                        		__ldx.umq	__init_SHOP_end - 1  /* i */
         02:C61F  AE 10 23   			ldx	__init_SHOP_end - 1
14331                        		__ld.uax	_TABLE_SHOP_ITEMS_TILES_BANK
         02:C622  BD 90 61   			lda	_TABLE_SHOP_ITEMS_TILES_BANK, x
         02:C625  C2         			cly
14332                        		__st.umq	_bp_bank
         02:C626  85 02      			sta	_bp_bank
14333                        		__ld2x.umq	__init_SHOP_end - 1  /* i */
         02:C628  AD 10 23   			lda	__init_SHOP_end - 1
         02:C62B  0A         			asl	a
         02:C62C  AA         			tax
14334                        		__ld.wax	_TABLE_SHOP_ITEMS_TILES_ADR
         02:C62D  BD 7C 61   			lda.l	_TABLE_SHOP_ITEMS_TILES_ADR, x
         02:C630  BC 7D 61   			ldy.h	_TABLE_SHOP_ITEMS_TILES_ADR, x
14335                        		__st.wmq	_bp
         02:C633  85 EC      			sta.l	_bp
         02:C635  84 ED      			sty.h	_bp
14336                        	
14337                        		.dbg	line,	"include\init.c", 799; sgx_far_load_vram( 0x1000 + (i * TILES_4), TILES_4 );
14338                        		__ld.um		__init_SHOP_end - 1  /* i */
         02:C637  AD 10 23   			lda	__init_SHOP_end - 1
         02:C63A  C2         			cly
14339                        		__asl.wi	6
         02:C63B  85 00      			sta	__temp
         02:C63D  98         			tya
         02:C63E  4A         			lsr	a
         02:C63F  20 CB E1   			jsr	aslw6
         02:C642  29 C0      			and.l	#$FF << 6
14340                        		__add.wi	4096
         02:C644  18         			clc
         02:C645  69 00      			adc.l	#4096
         02:C647  42         			say
         02:C648  69 10      			adc.h	#4096
         02:C64A  42         			say
14341                        		__st.wmq	_di
         02:C64B  85 F0      			sta.l	_di
         02:C64D  84 F1      			sty.h	_di
14342                        		__st.wmiq	64, _ax
         02:C64F  A9 40      			lda.l	#64
         02:C651  85 F8      			sta.l	_ax
         02:C653  64 F9      			stz.h	_ax
14343                        		 _sgx_far_load_vram.2
         02:C655  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:C657  20 4F FF   			call	load_vram_x
14344                        	
14345                        		.dbg	line,	"include\init.c", 800; }
14346                        		__bra		.LL617
         02:C65A  80 BE      			bra	.LL617
14347    02:C65C             	.LL619:
14348                        	
14349                        		.dbg	line,	"include\init.c", 803; //--------------------------------------------------------------------------------------//
14350                        	
14351                        		.dbg	line,	"include\init.c", 804; //                                      SET BLOCKS                                      //
14352                        	
14353                        		.dbg	line,	"include\init.c", 805; //--------------------------------------------------------------------------------------//
14354                        	
14355                        		.dbg	line,	"include\init.c", 807; sgx_set_blocks( blocks_SHOP_BG_B , tilemap_mask , 256 );
14356                        		__farptr	_blocks_SHOP_BG_B, sgx_blk_bank, sgx_blk_addr
         02:C65C  A9 00      			lda.l	#$6000 + ($1FFF & (_blocks_SHOP_BG_B))
         02:C65E  8D C6 2B   			sta.l	sgx_blk_addr
         02:C661  A9 78      			lda.h	#$6000 + ($1FFF & (_blocks_SHOP_BG_B))
         02:C663  8D C7 2B   			sta.h	sgx_blk_addr
         02:C666  A9 0D      			lda	#bank(_blocks_SHOP_BG_B)
         02:C668  8D C8 2B   			sta	sgx_blk_bank
14357                        		__farptr	_tilemap_mask, sgx_tbl_bank, sgx_tbl_addr
         02:C66B  A9 D2      			lda.l	#$6000 + ($1FFF & (_tilemap_mask))
         02:C66D  8D C3 2B   			sta.l	sgx_tbl_addr
         02:C670  A9 63      			lda.h	#$6000 + ($1FFF & (_tilemap_mask))
         02:C672  8D C4 2B   			sta.h	sgx_tbl_addr
         02:C675  A9 F8      			lda	#bank(_tilemap_mask)
         02:C677  8D C5 2B   			sta	sgx_tbl_bank
14358                        		__st.umiq	256, _al
         02:C67A  A9 00      			lda.l	#256
         02:C67C  85 F8      			sta	_al
14359                        		__call		_sgx_set_blocks.3
         02:C67E  20 7D FE   			call	_sgx_set_blocks.3
14360                        	
14361                        		.dbg	line,	"include\init.c", 811; //--------------------------------------------------------------------------------------//
14362                        	
14363                        		.dbg	line,	"include\init.c", 812; //                                       SET MAP                                        //
14364                        	
14365                        		.dbg	line,	"include\init.c", 813; //--------------------------------------------------------------------------------------//
14366                        	
14367                        		.dbg	line,	"include\init.c", 815; sgx_set_blkmap( map_SHOP_BG_B, COUNTOF(map_SHOP_BG_B) );
14368                        		__farptr	_map_SHOP_BG_B, sgx_map_bank, sgx_map_addr
         02:C681  A9 00      			lda.l	#$6000 + ($1FFF & (_map_SHOP_BG_B))
         02:C683  8D C9 2B   			sta.l	sgx_map_addr
         02:C686  A9 60      			lda.h	#$6000 + ($1FFF & (_map_SHOP_BG_B))
         02:C688  8D CA 2B   			sta.h	sgx_map_addr
         02:C68B  A9 0E      			lda	#bank(_map_SHOP_BG_B)
         02:C68D  8D CB 2B   			sta	sgx_map_bank
14369                        		__ld.wi		___countof__map_SHOP_BG_B
         02:C690  A9 10      			lda.l	#___countof__map_SHOP_BG_B
         02:C692  A0 00      			ldy.h	#___countof__map_SHOP_BG_B
14370                        		__st.umq	sgx_map_line_w
         02:C694  8D 8C 26   			sta	sgx_map_line_w
14371                        		 _sgx_set_blkmap.2
         02:C697  9C CE 2B   			stz	sgx_scr_bank
14372                        	
14373                        		.dbg	line,	"include\init.c", 818; //--------------------------------------------------------------------------------------//
14374                        	
14375                        		.dbg	line,	"include\init.c", 819; //                                    DRAW TILEMAP                                      //
14376                        	
14377                        		.dbg	line,	"include\init.c", 820; //--------------------------------------------------------------------------------------//
14378                        	
14379                        		.dbg	line,	"include\init.c", 822; // The blkmap is drawn using global variables for the top-left coordinate
14380                        	
14381                        		.dbg	line,	"include\init.c", 823; // in pixels, and the draw width and height in terms of 8x8 characters.
14382                        	
14383                        		.dbg	line,	"include\init.c", 825; sgx_map_pxl_x = 0;
14384                        		__st.wmiq	0, _sgx_map_pxl_x
         02:C69A  9C 8E 26   			stz.l	_sgx_map_pxl_x
         02:C69D  9C 8F 26   			stz.h	_sgx_map_pxl_x
14385                        	
14386                        		.dbg	line,	"include\init.c", 826; sgx_map_pxl_y = 0;
14387                        		__st.wmiq	0, _sgx_map_pxl_y
         02:C6A0  9C 90 26   			stz.l	_sgx_map_pxl_y
         02:C6A3  9C 91 26   			stz.h	_sgx_map_pxl_y
14388                        	
14389                        		.dbg	line,	"include\init.c", 828; sgx_map_draw_w = 32;
14390                        		__st.umiq	32, _sgx_map_draw_w
         02:C6A6  A9 20      			lda.l	#32
         02:C6A8  8D 8A 26   			sta	_sgx_map_draw_w
14391                        	
14392                        		.dbg	line,	"include\init.c", 829; sgx_map_draw_h = 28;
14393                        		__st.umiq	28, _sgx_map_draw_h
         02:C6AB  A9 1C      			lda.l	#28
         02:C6AD  8D 8B 26   			sta	_sgx_map_draw_h
14394                        	
14395                        		.dbg	line,	"include\init.c", 832; //**************************************************************************************//
14396                        	
14397                        		.dbg	line,	"include\init.c", 833; //                                                                                      //
14398                        	
14399                        		.dbg	line,	"include\init.c", 834; //                                  SETUP SCROLL_SPLIT                                  //
14400                        	
14401                        		.dbg	line,	"include\init.c", 835; //                                                                                      //
14402                        	
14403                        		.dbg	line,	"include\init.c", 836; //**************************************************************************************//
14404                        	
14405                        		.dbg	line,	"include\init.c", 838; sgx_draw_map();
14406                        		__call		_sgx_draw_map
         02:C6B0  20 FF FE   			call	_sgx_draw_map
14407                        	
14408                        		.dbg	line,	"include\init.c", 840; sgx_scroll_split(0,   0, sgx_map_pxl_x & (BAT_SIZE_W - 1), sgx_map_pxl_y & (BAT_SIZE_H - 1), BKG_ON | SPR_ON);
14409                        		__st.umiq	0, _al
         02:C6B3  64 F8      			stz	_al
14410                        		__st.umiq	0, _ah
         02:C6B5  64 F9      			stz	_ah
14411                        		__ld.wm		_sgx_map_pxl_x
         02:C6B7  AD 8E 26   			lda.l	_sgx_map_pxl_x
         02:C6BA  AC 8F 26   			ldy.h	_sgx_map_pxl_x
14412                        		__and.wi	2047
         02:C6BD  29 FF      			and.l	#2047
         02:C6BF  42         			say
         02:C6C0  29 07      			and.h	#2047
         02:C6C2  42         			say
14413                        		__st.wmq	_bx
         02:C6C3  85 FA      			sta.l	_bx
         02:C6C5  84 FB      			sty.h	_bx
14414                        		__ld.wm		_sgx_map_pxl_y
         02:C6C7  AD 90 26   			lda.l	_sgx_map_pxl_y
         02:C6CA  AC 91 26   			ldy.h	_sgx_map_pxl_y
14415                        		__and.wi	255
         02:C6CD  29 FF      			and	#255
         02:C6CF  C2         			cly
14416                        		__st.wmq	_cx
         02:C6D0  85 FC      			sta.l	_cx
         02:C6D2  84 FD      			sty.h	_cx
14417                        		__st.umiq	192, _dl
         02:C6D4  A9 C0      			lda.l	#192
         02:C6D6  85 FE      			sta	_dl
14418                        		__call		_sgx_scroll_split.5
         02:C6D8  20 77 FF   			call	_sgx_scroll_split.5
14419                        	
14420                        		.dbg	line,	"include\init.c", 845; //**************************************************************************************//
14421                        	
14422                        		.dbg	line,	"include\init.c", 846; //                                                                                      //
14423                        	
14424                        		.dbg	line,	"include\init.c", 847; //                                         HUD                                          //
14425                        	
14426                        		.dbg	line,	"include\init.c", 848; //                                                                                      //
14427                        	
14428                        		.dbg	line,	"include\init.c", 849; //**************************************************************************************//
14429                        	
14430                        		.dbg	line,	"include\init.c", 851; init_HUD();
14431                        		__call		_init_HUD
         02:C6DB  20 F5 FE   			call	_init_HUD
14432                        	
14433                        		.dbg	line,	"include\init.c", 854; //--------------------------------------------------------------------------------------//
14434                        	
14435                        		.dbg	line,	"include\init.c", 855; //                                     DRAW PRICES                                      //
14436                        	
14437                        		.dbg	line,	"include\init.c", 856; //--------------------------------------------------------------------------------------//
14438                        	
14439                        		.dbg	line,	"include\init.c", 858; shop_prices[0] = *(ptr_SHOP_ITEM_PRICES);
14440                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         02:C6DE  AD 44 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         02:C6E1  AC 45 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
14441                        		__st.wm		__ptr
         02:C6E4  85 88      			sta.l	__ptr
         02:C6E6  84 89      			sty.h	__ptr
14442                        		__ld.wp		__ptr
         02:C6E8  A0 01      			ldy	#1
         02:C6EA  B1 88      			lda	[__ptr], y
         02:C6EC  A8         			tay
         02:C6ED  B2 88      			lda	[__ptr]
14443                        		__st.wmq	_shop_prices
         02:C6EF  8D 30 26   			sta.l	_shop_prices
         02:C6F2  8C 31 26   			sty.h	_shop_prices
14444                        	
14445                        		.dbg	line,	"include\init.c", 859; shop_prices[1] = *(ptr_SHOP_ITEM_PRICES+1);
14446                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         02:C6F5  AD 44 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         02:C6F8  AC 45 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
14447                        		__add.wi	2
         02:C6FB  18         			clc
         02:C6FC  69 02      			adc.l	#2
         02:C6FE  90 01      			bcc	!+
         02:C700  C8         			iny
         02:C701             	!:
14448                        		__st.wm		__ptr
         02:C701  85 88      			sta.l	__ptr
         02:C703  84 89      			sty.h	__ptr
14449                        		__ld.wp		__ptr
         02:C705  A0 01      			ldy	#1
         02:C707  B1 88      			lda	[__ptr], y
         02:C709  A8         			tay
         02:C70A  B2 88      			lda	[__ptr]
14450                        		__st.wmq	_shop_prices + 2
         02:C70C  8D 32 26   			sta.l	_shop_prices + 2
         02:C70F  8C 33 26   			sty.h	_shop_prices + 2
14451                        	
14452                        		.dbg	line,	"include\init.c", 860; shop_prices[2] = *(ptr_SHOP_ITEM_PRICES+2);
14453                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         02:C712  AD 44 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         02:C715  AC 45 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
14454                        		__add.wi	4
         02:C718  18         			clc
         02:C719  69 04      			adc.l	#4
         02:C71B  90 01      			bcc	!+
         02:C71D  C8         			iny
         02:C71E             	!:
14455                        		__st.wm		__ptr
         02:C71E  85 88      			sta.l	__ptr
         02:C720  84 89      			sty.h	__ptr
14456                        		__ld.wp		__ptr
         02:C722  A0 01      			ldy	#1
         02:C724  B1 88      			lda	[__ptr], y
         02:C726  A8         			tay
         02:C727  B2 88      			lda	[__ptr]
14457                        		__st.wmq	_shop_prices + 4
         02:C729  8D 34 26   			sta.l	_shop_prices + 4
         02:C72C  8C 35 26   			sty.h	_shop_prices + 4
14458                        	
14459                        		.dbg	line,	"include\init.c", 861; shop_prices[3] = *(ptr_SHOP_ITEM_PRICES+3);
14460                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         02:C72F  AD 44 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         02:C732  AC 45 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
14461                        		__add.wi	6
         02:C735  18         			clc
         02:C736  69 06      			adc.l	#6
         02:C738  90 01      			bcc	!+
         02:C73A  C8         			iny
         02:C73B             	!:
14462                        		__st.wm		__ptr
         02:C73B  85 88      			sta.l	__ptr
         02:C73D  84 89      			sty.h	__ptr
14463                        		__ld.wp		__ptr
         02:C73F  A0 01      			ldy	#1
         02:C741  B1 88      			lda	[__ptr], y
         02:C743  A8         			tay
         02:C744  B2 88      			lda	[__ptr]
14464                        		__st.wmq	_shop_prices + 6
         02:C746  8D 36 26   			sta.l	_shop_prices + 6
         02:C749  8C 37 26   			sty.h	_shop_prices + 6
14465                        	
14466                        		.dbg	line,	"include\init.c", 862; shop_prices[4] = *(ptr_SHOP_ITEM_PRICES+4);
14467                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         02:C74C  AD 44 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         02:C74F  AC 45 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
14468                        		__add.wi	8
         02:C752  18         			clc
         02:C753  69 08      			adc.l	#8
         02:C755  90 01      			bcc	!+
         02:C757  C8         			iny
         02:C758             	!:
14469                        		__st.wm		__ptr
         02:C758  85 88      			sta.l	__ptr
         02:C75A  84 89      			sty.h	__ptr
14470                        		__ld.wp		__ptr
         02:C75C  A0 01      			ldy	#1
         02:C75E  B1 88      			lda	[__ptr], y
         02:C760  A8         			tay
         02:C761  B2 88      			lda	[__ptr]
14471                        		__st.wmq	_shop_prices + 8
         02:C763  8D 38 26   			sta.l	_shop_prices + 8
         02:C766  8C 39 26   			sty.h	_shop_prices + 8
14472                        	
14473                        		.dbg	line,	"include\init.c", 863; 
14474                        	
14475                        		.dbg	line,	"include\init.c", 864; shop_prices[5] = *(ptr_SHOP_ITEM_PRICES+5);
14476                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         02:C769  AD 44 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         02:C76C  AC 45 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
14477                        		__add.wi	10
         02:C76F  18         			clc
         02:C770  69 0A      			adc.l	#10
         02:C772  90 01      			bcc	!+
         02:C774  C8         			iny
         02:C775             	!:
14478                        		__st.wm		__ptr
         02:C775  85 88      			sta.l	__ptr
         02:C777  84 89      			sty.h	__ptr
14479                        		__ld.wp		__ptr
         02:C779  A0 01      			ldy	#1
         02:C77B  B1 88      			lda	[__ptr], y
         02:C77D  A8         			tay
         02:C77E  B2 88      			lda	[__ptr]
14480                        		__st.wmq	_shop_prices + 10
         02:C780  8D 3A 26   			sta.l	_shop_prices + 10
         02:C783  8C 3B 26   			sty.h	_shop_prices + 10
14481                        	
14482                        		.dbg	line,	"include\init.c", 865; shop_prices[6] = *(ptr_SHOP_ITEM_PRICES+6);
14483                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         02:C786  AD 44 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         02:C789  AC 45 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
14484                        		__add.wi	12
         02:C78C  18         			clc
         02:C78D  69 0C      			adc.l	#12
         02:C78F  90 01      			bcc	!+
         02:C791  C8         			iny
         02:C792             	!:
14485                        		__st.wm		__ptr
         02:C792  85 88      			sta.l	__ptr
         02:C794  84 89      			sty.h	__ptr
14486                        		__ld.wp		__ptr
         02:C796  A0 01      			ldy	#1
         02:C798  B1 88      			lda	[__ptr], y
         02:C79A  A8         			tay
         02:C79B  B2 88      			lda	[__ptr]
14487                        		__st.wmq	_shop_prices + 12
         02:C79D  8D 3C 26   			sta.l	_shop_prices + 12
         02:C7A0  8C 3D 26   			sty.h	_shop_prices + 12
14488                        	
14489                        		.dbg	line,	"include\init.c", 866; shop_prices[7] = *(ptr_SHOP_ITEM_PRICES+7);
14490                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         02:C7A3  AD 44 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         02:C7A6  AC 45 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
14491                        		__add.wi	14
         02:C7A9  18         			clc
         02:C7AA  69 0E      			adc.l	#14
         02:C7AC  90 01      			bcc	!+
         02:C7AE  C8         			iny
         02:C7AF             	!:
14492                        		__st.wm		__ptr
         02:C7AF  85 88      			sta.l	__ptr
         02:C7B1  84 89      			sty.h	__ptr
14493                        		__ld.wp		__ptr
         02:C7B3  A0 01      			ldy	#1
         02:C7B5  B1 88      			lda	[__ptr], y
         02:C7B7  A8         			tay
         02:C7B8  B2 88      			lda	[__ptr]
14494                        		__st.wmq	_shop_prices + 14
         02:C7BA  8D 3E 26   			sta.l	_shop_prices + 14
         02:C7BD  8C 3F 26   			sty.h	_shop_prices + 14
14495                        	
14496                        		.dbg	line,	"include\init.c", 867; shop_prices[8] = *(ptr_SHOP_ITEM_PRICES+8);
14497                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         02:C7C0  AD 44 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         02:C7C3  AC 45 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
14498                        		__add.wi	16
         02:C7C6  18         			clc
         02:C7C7  69 10      			adc.l	#16
         02:C7C9  90 01      			bcc	!+
         02:C7CB  C8         			iny
         02:C7CC             	!:
14499                        		__st.wm		__ptr
         02:C7CC  85 88      			sta.l	__ptr
         02:C7CE  84 89      			sty.h	__ptr
14500                        		__ld.wp		__ptr
         02:C7D0  A0 01      			ldy	#1
         02:C7D2  B1 88      			lda	[__ptr], y
         02:C7D4  A8         			tay
         02:C7D5  B2 88      			lda	[__ptr]
14501                        		__st.wmq	_shop_prices + 16
         02:C7D7  8D 40 26   			sta.l	_shop_prices + 16
         02:C7DA  8C 41 26   			sty.h	_shop_prices + 16
14502                        	
14503                        		.dbg	line,	"include\init.c", 868; shop_prices[9] = *(ptr_SHOP_ITEM_PRICES+9);
14504                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         02:C7DD  AD 44 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         02:C7E0  AC 45 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
14505                        		__add.wi	18
         02:C7E3  18         			clc
         02:C7E4  69 12      			adc.l	#18
         02:C7E6  90 01      			bcc	!+
         02:C7E8  C8         			iny
         02:C7E9             	!:
14506                        		__st.wm		__ptr
         02:C7E9  85 88      			sta.l	__ptr
         02:C7EB  84 89      			sty.h	__ptr
14507                        		__ld.wp		__ptr
         02:C7ED  A0 01      			ldy	#1
         02:C7EF  B1 88      			lda	[__ptr], y
         02:C7F1  A8         			tay
         02:C7F2  B2 88      			lda	[__ptr]
14508                        		__st.wmq	_shop_prices + 18
         02:C7F4  8D 42 26   			sta.l	_shop_prices + 18
         02:C7F7  8C 43 26   			sty.h	_shop_prices + 18
14509                        	
14510                        		.dbg	line,	"include\init.c", 871; put_number(shop_prices[0],4,2,20);
14511                        		__ld.wm		_shop_prices
         02:C7FA  AD 30 26   			lda.l	_shop_prices
         02:C7FD  AC 31 26   			ldy.h	_shop_prices
14512                        		__st.wmq	_bx
         02:C800  85 FA      			sta.l	_bx
         02:C802  84 FB      			sty.h	_bx
14513                        		__st.umiq	4, _cl
         02:C804  A9 04      			lda.l	#4
         02:C806  85 FC      			sta	_cl
14514                        		__st.umiq	2, _dil
         02:C808  A9 02      			lda.l	#2
         02:C80A  85 F0      			sta	_dil
14515                        		__st.umiq	20, _dih
         02:C80C  A9 14      			lda.l	#20
         02:C80E  85 F1      			sta	_dih
14516                        		__call		_put_number.4
         02:C810  20 9F FF   			call	_put_number.4
14517                        	
14518                        		.dbg	line,	"include\init.c", 872; put_number(shop_prices[1],4,7,20);
14519                        		__ld.wm		_shop_prices + 2
         02:C813  AD 32 26   			lda.l	_shop_prices + 2
         02:C816  AC 33 26   			ldy.h	_shop_prices + 2
14520                        		__st.wmq	_bx
         02:C819  85 FA      			sta.l	_bx
         02:C81B  84 FB      			sty.h	_bx
14521                        		__st.umiq	4, _cl
         02:C81D  A9 04      			lda.l	#4
         02:C81F  85 FC      			sta	_cl
14522                        		__st.umiq	7, _dil
         02:C821  A9 07      			lda.l	#7
         02:C823  85 F0      			sta	_dil
14523                        		__st.umiq	20, _dih
         02:C825  A9 14      			lda.l	#20
         02:C827  85 F1      			sta	_dih
14524                        		__call		_put_number.4
         02:C829  20 9F FF   			call	_put_number.4
14525                        	
14526                        		.dbg	line,	"include\init.c", 873; put_number(shop_prices[2],4,12,20);
14527                        		__ld.wm		_shop_prices + 4
         02:C82C  AD 34 26   			lda.l	_shop_prices + 4
         02:C82F  AC 35 26   			ldy.h	_shop_prices + 4
14528                        		__st.wmq	_bx
         02:C832  85 FA      			sta.l	_bx
         02:C834  84 FB      			sty.h	_bx
14529                        		__st.umiq	4, _cl
         02:C836  A9 04      			lda.l	#4
         02:C838  85 FC      			sta	_cl
14530                        		__st.umiq	12, _dil
         02:C83A  A9 0C      			lda.l	#12
         02:C83C  85 F0      			sta	_dil
14531                        		__st.umiq	20, _dih
         02:C83E  A9 14      			lda.l	#20
         02:C840  85 F1      			sta	_dih
14532                        		__call		_put_number.4
         02:C842  20 9F FF   			call	_put_number.4
14533                        	
14534                        		.dbg	line,	"include\init.c", 874; put_number(shop_prices[3],4,17,20);
14535                        		__ld.wm		_shop_prices + 6
         02:C845  AD 36 26   			lda.l	_shop_prices + 6
         02:C848  AC 37 26   			ldy.h	_shop_prices + 6
14536                        		__st.wmq	_bx
         02:C84B  85 FA      			sta.l	_bx
         02:C84D  84 FB      			sty.h	_bx
14537                        		__st.umiq	4, _cl
         02:C84F  A9 04      			lda.l	#4
         02:C851  85 FC      			sta	_cl
14538                        		__st.umiq	17, _dil
         02:C853  A9 11      			lda.l	#17
         02:C855  85 F0      			sta	_dil
14539                        		__st.umiq	20, _dih
         02:C857  A9 14      			lda.l	#20
         02:C859  85 F1      			sta	_dih
14540                        		__call		_put_number.4
         02:C85B  20 9F FF   			call	_put_number.4
14541                        	
14542                        		.dbg	line,	"include\init.c", 875; put_number(shop_prices[4],4,22,20);
14543                        		__ld.wm		_shop_prices + 8
         02:C85E  AD 38 26   			lda.l	_shop_prices + 8
         02:C861  AC 39 26   			ldy.h	_shop_prices + 8
14544                        		__st.wmq	_bx
         02:C864  85 FA      			sta.l	_bx
         02:C866  84 FB      			sty.h	_bx
14545                        		__st.umiq	4, _cl
         02:C868  A9 04      			lda.l	#4
         02:C86A  85 FC      			sta	_cl
14546                        		__st.umiq	22, _dil
         02:C86C  A9 16      			lda.l	#22
         02:C86E  85 F0      			sta	_dil
14547                        		__st.umiq	20, _dih
         02:C870  A9 14      			lda.l	#20
         02:C872  85 F1      			sta	_dih
14548                        		__call		_put_number.4
         02:C874  20 9F FF   			call	_put_number.4
14549                        	
14550                        		.dbg	line,	"include\init.c", 877; put_number(shop_prices[5],4,2,23);
14551                        		__ld.wm		_shop_prices + 10
         02:C877  AD 3A 26   			lda.l	_shop_prices + 10
         02:C87A  AC 3B 26   			ldy.h	_shop_prices + 10
14552                        		__st.wmq	_bx
         02:C87D  85 FA      			sta.l	_bx
         02:C87F  84 FB      			sty.h	_bx
14553                        		__st.umiq	4, _cl
         02:C881  A9 04      			lda.l	#4
         02:C883  85 FC      			sta	_cl
14554                        		__st.umiq	2, _dil
         02:C885  A9 02      			lda.l	#2
         02:C887  85 F0      			sta	_dil
14555                        		__st.umiq	23, _dih
         02:C889  A9 17      			lda.l	#23
         02:C88B  85 F1      			sta	_dih
14556                        		__call		_put_number.4
         02:C88D  20 9F FF   			call	_put_number.4
14557                        	
14558                        		.dbg	line,	"include\init.c", 878; put_number(shop_prices[6],4,7,23);
14559                        		__ld.wm		_shop_prices + 12
         02:C890  AD 3C 26   			lda.l	_shop_prices + 12
         02:C893  AC 3D 26   			ldy.h	_shop_prices + 12
14560                        		__st.wmq	_bx
         02:C896  85 FA      			sta.l	_bx
         02:C898  84 FB      			sty.h	_bx
14561                        		__st.umiq	4, _cl
         02:C89A  A9 04      			lda.l	#4
         02:C89C  85 FC      			sta	_cl
14562                        		__st.umiq	7, _dil
         02:C89E  A9 07      			lda.l	#7
         02:C8A0  85 F0      			sta	_dil
14563                        		__st.umiq	23, _dih
         02:C8A2  A9 17      			lda.l	#23
         02:C8A4  85 F1      			sta	_dih
14564                        		__call		_put_number.4
         02:C8A6  20 9F FF   			call	_put_number.4
14565                        	
14566                        		.dbg	line,	"include\init.c", 879; put_number(shop_prices[7],4,12,23);
14567                        		__ld.wm		_shop_prices + 14
         02:C8A9  AD 3E 26   			lda.l	_shop_prices + 14
         02:C8AC  AC 3F 26   			ldy.h	_shop_prices + 14
14568                        		__st.wmq	_bx
         02:C8AF  85 FA      			sta.l	_bx
         02:C8B1  84 FB      			sty.h	_bx
14569                        		__st.umiq	4, _cl
         02:C8B3  A9 04      			lda.l	#4
         02:C8B5  85 FC      			sta	_cl
14570                        		__st.umiq	12, _dil
         02:C8B7  A9 0C      			lda.l	#12
         02:C8B9  85 F0      			sta	_dil
14571                        		__st.umiq	23, _dih
         02:C8BB  A9 17      			lda.l	#23
         02:C8BD  85 F1      			sta	_dih
14572                        		__call		_put_number.4
         02:C8BF  20 9F FF   			call	_put_number.4
14573                        	
14574                        		.dbg	line,	"include\init.c", 880; put_number(shop_prices[8],4,17,23);
14575                        		__ld.wm		_shop_prices + 16
         02:C8C2  AD 40 26   			lda.l	_shop_prices + 16
         02:C8C5  AC 41 26   			ldy.h	_shop_prices + 16
14576                        		__st.wmq	_bx
         02:C8C8  85 FA      			sta.l	_bx
         02:C8CA  84 FB      			sty.h	_bx
14577                        		__st.umiq	4, _cl
         02:C8CC  A9 04      			lda.l	#4
         02:C8CE  85 FC      			sta	_cl
14578                        		__st.umiq	17, _dil
         02:C8D0  A9 11      			lda.l	#17
         02:C8D2  85 F0      			sta	_dil
14579                        		__st.umiq	23, _dih
         02:C8D4  A9 17      			lda.l	#23
         02:C8D6  85 F1      			sta	_dih
14580                        		__call		_put_number.4
         02:C8D8  20 9F FF   			call	_put_number.4
14581                        	
14582                        		.dbg	line,	"include\init.c", 881; put_number(shop_prices[9],4,22,23);
14583                        		__ld.wm		_shop_prices + 18
         02:C8DB  AD 42 26   			lda.l	_shop_prices + 18
         02:C8DE  AC 43 26   			ldy.h	_shop_prices + 18
14584                        		__st.wmq	_bx
         02:C8E1  85 FA      			sta.l	_bx
         02:C8E3  84 FB      			sty.h	_bx
14585                        		__st.umiq	4, _cl
         02:C8E5  A9 04      			lda.l	#4
         02:C8E7  85 FC      			sta	_cl
14586                        		__st.umiq	22, _dil
         02:C8E9  A9 16      			lda.l	#22
         02:C8EB  85 F0      			sta	_dil
14587                        		__st.umiq	23, _dih
         02:C8ED  A9 17      			lda.l	#23
         02:C8EF  85 F1      			sta	_dih
14588                        		__call		_put_number.4
         02:C8F1  20 9F FF   			call	_put_number.4
14589                        	
14590                        		.dbg	line,	"include\init.c", 886; //--------------------------------------------------------------------------------------//
14591                        	
14592                        		.dbg	line,	"include\init.c", 887; //                                   LOAD BG PALETTES                                   //
14593                        	
14594                        		.dbg	line,	"include\init.c", 888; //--------------------------------------------------------------------------------------//
14595                        	
14596                        		.dbg	line,	"include\init.c", 890; load_palette( 0, palette_SHOP, 16 );
14597                        		__st.umiq	0, _al
         02:C8F4  64 F8      			stz	_al
14598                        		__farptr	_palette_SHOP, _bp_bank, _bp
         02:C8F6  A9 E0      			lda.l	#$6000 + ($1FFF & (_palette_SHOP))
         02:C8F8  85 EC      			sta.l	_bp
         02:C8FA  A9 65      			lda.h	#$6000 + ($1FFF & (_palette_SHOP))
         02:C8FC  85 ED      			sta.h	_bp
         02:C8FE  A9 0E      			lda	#bank(_palette_SHOP)
         02:C900  85 02      			sta	_bp_bank
14599                        		__st.umiq	16, _ah
         02:C902  A9 10      			lda.l	#16
         02:C904  85 F9      			sta	_ah
14600                        		__call		_load_palette.3
         02:C906  20 EB FE   			call	_load_palette.3
14601                        	
14602                        		.dbg	line,	"include\init.c", 895; //**************************************************************************************//
14603                        	
14604                        		.dbg	line,	"include\init.c", 896; //                                                                                      //
14605                        	
14606                        		.dbg	line,	"include\init.c", 897; //                                       SPRITES                                        //
14607                        	
14608                        		.dbg	line,	"include\init.c", 898; //                                                                                      //
14609                        	
14610                        		.dbg	line,	"include\init.c", 899; //**************************************************************************************//
14611                        	
14612                        		.dbg	line,	"include\init.c", 901; //--------------------------------------------------------------------------------------//
14613                        	
14614                        		.dbg	line,	"include\init.c", 902; //                                   HIDE ALL SPRITES                                   //
14615                        	
14616                        		.dbg	line,	"include\init.c", 903; //--------------------------------------------------------------------------------------//
14617                        	
14618                        		.dbg	line,	"include\init.c", 905; for(i=0 ; i<63 ; i++)
14619                        		__st.umiq	0, __init_SHOP_end - 1  /* i */
         02:C909  9C 10 23   			stz	__init_SHOP_end - 1
14620    02:C90C             	.LL620:
14621                        		__ld.umq	__init_SHOP_end - 1  /* i */
         02:C90C  AD 10 23   			lda	__init_SHOP_end - 1
14622                        		__ult_b.uiq	63
         02:C90F  C9 3F      			cmp	#63		; Subtract integer from A.
         02:C911  6A         			ror	a		; CC if A < integer.
         02:C912  49 80      			eor	#$80
         02:C914  2A         			rol	a
14623                        		__btrue		.LL622
         02:C915  B0 07      			bcs	.LL622
14624                        		__bra		.LL623
         02:C917  80 19      			bra	.LL623
14625    02:C919             	.LL621:
14626                        		__inc.umq	__init_SHOP_end - 1  /* i */
         02:C919  EE 10 23   			inc	__init_SHOP_end - 1
14627                        		__bra		.LL620
         02:C91C  80 EE      			bra	.LL620
14628    02:C91E             	.LL622:
14629                        	
14630                        		.dbg	line,	"include\init.c", 906; {
14631                        	
14632                        		.dbg	line,	"include\init.c", 907; spr_set(i);
14633                        		__ld.umq	__init_SHOP_end - 1  /* i */
         02:C91E  AD 10 23   			lda	__init_SHOP_end - 1
14634                        		__call		_spr_set.1
         02:C921  20 DD E7   			call	_spr_set.1
14635                        	
14636                        		.dbg	line,	"include\init.c", 908; spr_hide();
14637                        		__call		_spr_hide
         02:C924  20 F8 E7   			call	_spr_hide
14638                        	
14639                        		.dbg	line,	"include\init.c", 910; sgx_spr_set(i);
14640                        		__ld.umq	__init_SHOP_end - 1  /* i */
         02:C927  AD 10 23   			lda	__init_SHOP_end - 1
14641                        		__call		_sgx_spr_set.1
         02:C92A  20 8A E8   			call	_sgx_spr_set.1
14642                        	
14643                        		.dbg	line,	"include\init.c", 911; sgx_spr_hide();
14644                        		__call		_sgx_spr_hide
         02:C92D  20 A5 E8   			call	_sgx_spr_hide
14645                        	
14646                        		.dbg	line,	"include\init.c", 912; }
14647                        		__bra		.LL621
         02:C930  80 E7      			bra	.LL621
14648    02:C932             	.LL623:
14649                        	
14650                        		.dbg	line,	"include\init.c", 914; //--------------------------------------------------------------------------------------//
14651                        	
14652                        		.dbg	line,	"include\init.c", 915; //                                        CURSOR                                        //
14653                        	
14654                        		.dbg	line,	"include\init.c", 916; //--------------------------------------------------------------------------------------//
14655                        	
14656                        		.dbg	line,	"include\init.c", 918; // LOAD CURSOR TILES //
14657                        	
14658                        		.dbg	line,	"include\init.c", 919; load_vram(0x2000, tiles_SPR_CURSOR , TILES_16);
14659                        		__st.wmiq	8192, _di
         02:C932  64 F0      			stz.l	_di
         02:C934  A9 20      			lda.h	#8192
         02:C936  85 F1      			sta.h	_di
14660                        		__farptr	_tiles_SPR_CURSOR, _bp_bank, _bp
         02:C938  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_CURSOR))
         02:C93A  85 EC      			sta.l	_bp
         02:C93C  A9 66      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_CURSOR))
         02:C93E  85 ED      			sta.h	_bp
         02:C940  A9 13      			lda	#bank(_tiles_SPR_CURSOR)
         02:C942  85 02      			sta	_bp_bank
14661                        		__st.wmiq	256, _ax
         02:C944  64 F8      			stz.l	_ax
         02:C946  A9 01      			lda.h	#256
         02:C948  85 F9      			sta.h	_ax
14662                        		 _load_vram.3
         02:C94A  82         			clx				; Offset to PCE VDC.
         02:C94B  20 4F FF   			call	load_vram_x
14663                        	
14664                        		.dbg	line,	"include\init.c", 922; // SELECT CURSOR SPRITE //
14665                        	
14666                        		.dbg	line,	"include\init.c", 923; spr_set(0);
14667                        		__ld.uiq	0
         02:C94E  62         			cla
14668                        		__call		_spr_set.1
         02:C94F  20 DD E7   			call	_spr_set.1
14669                        	
14670                        		.dbg	line,	"include\init.c", 924; spr_hide();
14671                        		__call		_spr_hide
         02:C952  20 F8 E7   			call	_spr_hide
14672                        	
14673                        		.dbg	line,	"include\init.c", 927; //spr_x(24);
14674                        	
14675                        		.dbg	line,	"include\init.c", 928; //spr_y(144);
14676                        	
14677                        		.dbg	line,	"include\init.c", 930; // SET TILES DATA FOR THE CURSOR //
14678                        	
14679                        		.dbg	line,	"include\init.c", 931; spr_pattern(0x2000);
14680                        		__ld.wi		8192
         02:C955  62         			cla
         02:C956  A0 20      			ldy.h	#8192
14681                        		__call		_spr_pattern.1
         02:C958  20 26 E8   			call	_spr_pattern.1
14682                        	
14683                        		.dbg	line,	"include\init.c", 934; spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_32x32);
14684                        		__st.umiq	185, _al
         02:C95B  A9 B9      			lda.l	#185
         02:C95D  85 F8      			sta	_al
14685                        		__ld.uiq	17
         02:C95F  A9 11      			lda	#17
14686                        		__call		_spr_ctrl.2
         02:C961  20 3C E8   			call	_spr_ctrl.2
14687                        	
14688                        		.dbg	line,	"include\init.c", 937; spr_pal(16);
14689                        		__ld.uiq	16
         02:C964  A9 10      			lda	#16
14690                        		__call		_spr_pal.1
         02:C966  20 4D E8   			call	_spr_pal.1
14691                        	
14692                        		.dbg	line,	"include\init.c", 938; spr_pri(TRUE);
14693                        		__ld.uiq	1
         02:C969  A9 01      			lda	#1
14694                        		__call		_spr_pri.1
         02:C96B  20 5C E8   			call	_spr_pri.1
14695                        	
14696                        		.dbg	line,	"include\init.c", 941; // UPDATE PCE SAT //
14697                        	
14698                        		.dbg	line,	"include\init.c", 942; satb_update();
14699                        		__call		_satb_update
         02:C96E  20 91 FE   			call	_satb_update
14700                        	
14701                        		.dbg	line,	"include\init.c", 943; sgx_satb_update();
14702                        		__call		_sgx_satb_update
         02:C971  20 73 FE   			call	_sgx_satb_update
14703                        	
14704                        		.dbg	line,	"include\init.c", 947; //--------------------------------------------------------------------------------------//
14705                        	
14706                        		.dbg	line,	"include\init.c", 948; //                                LOAD SPRITES PALETTES                                 //
14707                        	
14708                        		.dbg	line,	"include\init.c", 949; //--------------------------------------------------------------------------------------//
14709                        	
14710                        		.dbg	line,	"include\init.c", 951; load_palette( 16, palette_objects_2, 1 );
14711                        		__st.umiq	16, _al
         02:C974  A9 10      			lda.l	#16
         02:C976  85 F8      			sta	_al
14712                        		__farptr	_palette_objects_2, _bp_bank, _bp
         02:C978  A9 60      			lda.l	#$6000 + ($1FFF & (_palette_objects_2))
         02:C97A  85 EC      			sta.l	_bp
         02:C97C  A9 78      			lda.h	#$6000 + ($1FFF & (_palette_objects_2))
         02:C97E  85 ED      			sta.h	_bp
         02:C980  A9 12      			lda	#bank(_palette_objects_2)
         02:C982  85 02      			sta	_bp_bank
14713                        		__st.umiq	1, _ah
         02:C984  A9 01      			lda.l	#1
         02:C986  85 F9      			sta	_ah
14714                        		__call		_load_palette.3
         02:C988  20 EB FE   			call	_load_palette.3
14715                        	
14716                        		.dbg	line,	"include\init.c", 955; // VSYNC //
14717                        	
14718                        		.dbg	line,	"include\init.c", 956; vsync();
14719                        		__call		_vsync
         02:C98B  20 09 E3   			call	_vsync
14720                        	
14721                        		.dbg	line,	"include\init.c", 958; // ENABLE DISPLAY //
14722                        	
14723                        		.dbg	line,	"include\init.c", 959; disp_on();
14724                        		__call		_disp_on
         02:C98E  20 16 E4   			call	_disp_on
14725                        	
14726                        		.dbg	line,	"include\init.c", 960; }
14727    02:C991             	.LL614:
14728                        		__return	0
         02:C991  4C EF FF   			jmp	leave_proc
14729                        		.dbg	clear
14730                        		.endp
14731               6860     		.data
14732               230F     		.bss
14733    F8:230F             	__init_SHOP_loc:
14734    F8:230F             			ds	2
14735    F8:2311             	__init_SHOP_end:
14736               E309     		.code
14737                        		.pceas
14738                        	
14739                        		.dbg	line,	"main.c", 31; main()
14740                        		.dbg	line,	"main.c", 32; {
14741                        	;***********************
14742                        	;***********************
14743                        	
14744                        		.hucc
14745    02:D2D8             		.proc		_main
14746                        		__enter		_main
14747                        	
14748                        		.dbg	line,	"main.c", 33; if(!sgx_detect())
14749                        		 _sgx_detect
         02:D2D8  AD E8 22   			lda	sgx_detected
         02:D2DB  C2         			cly
14750                        		__not.wr
         02:D2DC  84 00      			sty	__temp
         02:D2DE  05 00      			ora	__temp
         02:D2E0  18         			clc
         02:D2E1  D0 01      			bne	!+
         02:D2E3  38         			sec
         02:D2E4             	!:
14751                        		__bfalse	.LL625
         02:D2E4  90 14      			bcc	.LL625
14752                        	
14753                        		.dbg	line,	"main.c", 34; {
14754                        	
14755                        		.dbg	line,	"main.c", 35; put_string("Halt: SGX hardware not found", 2, 13);
14756                        		__ld.wi		__const1+0
         02:D2E6  62         			cla
         02:D2E7  A0 60      			ldy.h	#__const1+0
14757                        		__st.wmq	_bp
         02:D2E9  85 EC      			sta.l	_bp
         02:D2EB  84 ED      			sty.h	_bp
14758                        		__st.umiq	2, _dil
         02:D2ED  A9 02      			lda.l	#2
         02:D2EF  85 F0      			sta	_dil
14759                        		__st.umiq	13, _dih
         02:D2F1  A9 0D      			lda.l	#13
         02:D2F3  85 F1      			sta	_dih
14760                        		__call		_put_string.3
         02:D2F5  20 68 E6   			call	_put_string.3
14761                        	
14762                        		.dbg	line,	"main.c", 37; for(;;)
14763    02:D2F8             	.LL626	.alias		.LL628
14764    02:D2F8             	.LL627	.alias		.LL628
14765    02:D2F8             	.LL628:
14766                        	
14767                        		.dbg	line,	"main.c", 38; {
14768                        	
14769                        		.dbg	line,	"main.c", 39; // INFINITE LOOP //
14770                        	
14771                        		.dbg	line,	"main.c", 40; }
14772                        		__bra		.LL628
         02:D2F8  80 FE      			bra	.LL628
14773    02:D2FA             	.LL629:
14774                        	
14775                        		.dbg	line,	"main.c", 41; }
14776                        	
14777                        		.dbg	line,	"main.c", 46; init_SYSTEM();
14778    02:D2FA             	.LL625:
14779                        		__call		_init_SYSTEM
         02:D2FA  20 69 FE   			call	_init_SYSTEM
14780                        	
14781                        		.dbg	line,	"main.c", 47; 
14782                        	
14783                        		.dbg	line,	"main.c", 48; 
14784                        	
14785                        		.dbg	line,	"main.c", 49; init_VARIABLES();
14786                        		__call		_init_VARIABLES
         02:D2FD  20 5F FE   			call	_init_VARIABLES
14787                        	
14788                        		.dbg	line,	"main.c", 52; init_PLAYER();
14789                        		__call		_init_PLAYER
         02:D300  20 55 FE   			call	_init_PLAYER
14790                        	
14791                        		.dbg	line,	"main.c", 57; //**************************************************************************************//
14792                        	
14793                        		.dbg	line,	"main.c", 58; //                                                                                      //
14794                        	
14795                        		.dbg	line,	"main.c", 59; //                                         MAIN                                         //
14796                        	
14797                        		.dbg	line,	"main.c", 60; //                                                                                      //
14798                        	
14799                        		.dbg	line,	"main.c", 61; //**************************************************************************************//
14800                        	
14801                        		.dbg	line,	"main.c", 62; for(;;)
14802    02:D303             	.LL630:
14803    02:D303             	.LL631:
14804    02:D303             	.LL632:
14805                        	
14806                        		.dbg	line,	"main.c", 63; {
14807                        	
14808                        		.dbg	line,	"main.c", 64; switch(sequence_id)
14809                        		__ld.umq	_sequence_id
         02:D303  AD 11 23   			lda	_sequence_id
14810                        		__bra		.LL634
         02:D306  4C 8F D4   			bra	.LL634
14811                        	
14812                        		.dbg	line,	"main.c", 65; {
14813                        	
14814                        		.dbg	line,	"main.c", 66; //-----------------------------------------------------------------------------//
14815                        	
14816                        		.dbg	line,	"main.c", 67; //                                    TITLE                                    //
14817                        	
14818                        		.dbg	line,	"main.c", 68; //-----------------------------------------------------------------------------//
14819                        	
14820                        		.dbg	line,	"main.c", 69; case SEQUENCE_TITLE:
14821    02:D309             	.LL636:
14822                        		__case		0
14823                        	
14824                        		.dbg	line,	"main.c", 70; break;
14825                        		__bra		.LL635
         02:D309  80 F8      			bra	.LL635
14826                        	
14827                        		.dbg	line,	"main.c", 73; //-----------------------------------------------------------------------------//
14828                        	
14829                        		.dbg	line,	"main.c", 74; //                                    INTRO                                    //
14830                        	
14831                        		.dbg	line,	"main.c", 75; //-----------------------------------------------------------------------------//
14832                        	
14833                        		.dbg	line,	"main.c", 76; case SEQUENCE_INTRO:
14834    02:D30B             	.LL637:
14835                        		__case		1
14836                        	
14837                        		.dbg	line,	"main.c", 77; break;
14838                        		__bra		.LL635
         02:D30B  80 F6      			bra	.LL635
14839                        	
14840                        		.dbg	line,	"main.c", 80; //-----------------------------------------------------------------------------//
14841                        	
14842                        		.dbg	line,	"main.c", 81; //                                    GAME                                     //
14843                        	
14844                        		.dbg	line,	"main.c", 82; //-----------------------------------------------------------------------------//
14845                        	
14846                        		.dbg	line,	"main.c", 83; case SEQUENCE_GAME:
14847    02:D30D             	.LL638:
14848                        		__case		2
14849                        	
14850                        		.dbg	line,	"main.c", 84; if(sequence_loaded == FALSE)
14851                        		__not.um	_sequence_loaded
         02:D30D  AD 12 23   			lda	_sequence_loaded
         02:D310  18         			clc
         02:D311  D0 01      			bne	!+
         02:D313  38         			sec
         02:D314             	!:
14852                        		__bfalse	.LL639
         02:D314  90 0A      			bcc	.LL639
14853                        	
14854                        		.dbg	line,	"main.c", 85; {
14855                        	
14856                        		.dbg	line,	"main.c", 86; init_LEVEL();
14857                        		__call		_init_LEVEL
         02:D316  20 4B FE   			call	_init_LEVEL
14858                        	
14859                        		.dbg	line,	"main.c", 88; sequence_loaded = TRUE;
14860                        		__st.umiq	1, _sequence_loaded
         02:D319  A9 01      			lda.l	#1
         02:D31B  8D 12 23   			sta	_sequence_loaded
14861                        	
14862                        		.dbg	line,	"main.c", 89; }
14863                        	
14864                        		.dbg	line,	"main.c", 92; else
14865                        		__bra		.LL640
         02:D31E  80 E3      			bra	.LL640
14866    02:D320             	.LL639:
14867                        	
14868                        		.dbg	line,	"main.c", 93; {
14869                        	
14870                        		.dbg	line,	"main.c", 94; switch(level_id)
14871                        		__ld.umq	_level_id
         02:D320  AD 13 23   			lda	_level_id
14872                        		__bra		.LL641
         02:D323  80 3D      			bra	.LL641
14873                        	
14874                        		.dbg	line,	"main.c", 95; {
14875                        	
14876                        		.dbg	line,	"main.c", 96; case 1:
14877    02:D325             	.LL643:
14878                        		__case		1
14879                        	
14880                        		.dbg	line,	"main.c", 97; vsync();
14881                        		__call		_vsync
         02:D325  20 09 E3   			call	_vsync
14882                        	
14883                        		.dbg	line,	"main.c", 99; update_PLAYER();
14884                        		__call		_update_PLAYER
         02:D328  20 41 FE   			call	_update_PLAYER
14885                        	
14886                        		.dbg	line,	"main.c", 100; //put_number(player_state,1,0,0);
14887                        	
14888                        		.dbg	line,	"main.c", 103; scroll_object();
14889                        		__call		_scroll_object
         02:D32B  20 CD FE   			call	_scroll_object
14890                        	
14891                        		.dbg	line,	"main.c", 104; scroll_chest();
14892                        		__call		_scroll_chest
         02:D32E  20 AF FE   			call	_scroll_chest
14893                        	
14894                        		.dbg	line,	"main.c", 105; scroll_npc();
14895                        		__call		_scroll_npc
         02:D331  20 37 FE   			call	_scroll_npc
14896                        	
14897                        		.dbg	line,	"main.c", 107; check_OBJECT();
14898                        		__call		_check_OBJECT
         02:D334  20 2D FE   			call	_check_OBJECT
14899                        	
14900                        		.dbg	line,	"main.c", 108; check_NPC();
14901                        		__call		_check_NPC
         02:D337  20 23 FE   			call	_check_NPC
14902                        	
14903                        		.dbg	line,	"main.c", 110; display_TIME_LEVEL();
14904                        		__call		_display_TIME_LEVEL
         02:D33A  20 09 FF   			call	_display_TIME_LEVEL
14905                        	
14906                        		.dbg	line,	"main.c", 112; satb_update();
14907                        		__call		_satb_update
         02:D33D  20 91 FE   			call	_satb_update
14908                        	
14909                        		.dbg	line,	"main.c", 113; sgx_satb_update();
14910                        		__call		_sgx_satb_update
         02:D340  20 73 FE   			call	_sgx_satb_update
14911                        	
14912                        		.dbg	line,	"main.c", 115; scroll_BG();
14913                        		__call		_scroll_BG
         02:D343  20 19 FE   			call	_scroll_BG
14914                        	
14915                        		.dbg	line,	"main.c", 117; joypad_DIR();
14916                        		__call		_joypad_DIR
         02:D346  20 0F FE   			call	_joypad_DIR
14917                        	
14918                        		.dbg	line,	"main.c", 118; joypad_BUTTONS();
14919                        		__call		_joypad_BUTTONS
         02:D349  20 05 FE   			call	_joypad_BUTTONS
14920                        	
14921                        		.dbg	line,	"main.c", 120; break;
14922                        		__bra		.LL642
         02:D34C  80 B5      			bra	.LL642
14923                        	
14924                        		.dbg	line,	"main.c", 123; case 2:
14925    02:D34E             	.LL644:
14926                        		__case		2
14927                        	
14928                        		.dbg	line,	"main.c", 124; vsync();
14929                        		__call		_vsync
         02:D34E  20 09 E3   			call	_vsync
14930                        	
14931                        		.dbg	line,	"main.c", 125; break;
14932                        		__bra		.LL642
         02:D351  80 B0      			bra	.LL642
14933                        	
14934                        		.dbg	line,	"main.c", 128; case 3:
14935    02:D353             	.LL645:
14936                        		__case		3
14937                        	
14938                        		.dbg	line,	"main.c", 129; vsync();
14939                        		__call		_vsync
         02:D353  20 09 E3   			call	_vsync
14940                        	
14941                        		.dbg	line,	"main.c", 130; break;
14942                        		__bra		.LL642
         02:D356  80 AB      			bra	.LL642
14943                        	
14944                        		.dbg	line,	"main.c", 133; case 4:
14945    02:D358             	.LL646:
14946                        		__case		4
14947                        	
14948                        		.dbg	line,	"main.c", 134; vsync();
14949                        		__call		_vsync
         02:D358  20 09 E3   			call	_vsync
14950                        	
14951                        		.dbg	line,	"main.c", 135; break;
14952                        		__bra		.LL642
         02:D35B  80 A6      			bra	.LL642
14953                        	
14954                        		.dbg	line,	"main.c", 138; case 5:
14955    02:D35D             	.LL647:
14956                        		__case		5
14957                        	
14958                        		.dbg	line,	"main.c", 139; vsync();
14959                        		__call		_vsync
         02:D35D  20 09 E3   			call	_vsync
14960                        	
14961                        		.dbg	line,	"main.c", 140; break;
14962                        		__bra		.LL642
         02:D360  80 A1      			bra	.LL642
14963                        	
14964                        		.dbg	line,	"main.c", 142; }
14965    02:D362             	.LL641:
14966                        		__switch_r.ur	0, 5
         02:D362  C9 06      			cmp	#(5 - 0) + 1
         02:D364  90 02      			bcc	!found+
         02:D366  A9 06      	!default:	lda	#(5 - 0) + 1
         02:D368  0A         	!found:		asl	a
         02:D369  AA         			tax
         02:D36A  7C 6D D3   			jmp	[!table+, x]
14967                        	
14968    02:D36D  03 D3      	!table:		dw	.LL642, .LL643, .LL644, .LL645, .LL646, .LL647
         02:D36F  25 D3       
         02:D371  4E D3       
         02:D373  53 D3       
         02:D375  58 D3       
         02:D377  5D D3       
14969    02:D379  03 D3      			dw	.LL642
14970    02:D37B             	.LL642	.alias		.LL635
14971                        	
14972                        		.dbg	line,	"main.c", 143; }
14973    02:D37B             	.LL640	.alias		.LL635
14974                        	
14975                        		.dbg	line,	"main.c", 145; break;
14976                        		__bra		.LL635
         02:D37B  80 86      			bra	.LL635
14977                        	
14978                        		.dbg	line,	"main.c", 148; //-----------------------------------------------------------------------------//
14979                        	
14980                        		.dbg	line,	"main.c", 149; //                                     NPC                                     //
14981                        	
14982                        		.dbg	line,	"main.c", 150; //-----------------------------------------------------------------------------//
14983                        	
14984                        		.dbg	line,	"main.c", 151; case SEQUENCE_NPC:
14985    02:D37D             	.LL648:
14986                        		__case		3
14987                        	
14988                        		.dbg	line,	"main.c", 152; break;
14989                        		__bra		.LL635
         02:D37D  80 84      			bra	.LL635
14990                        	
14991                        		.dbg	line,	"main.c", 155; //-----------------------------------------------------------------------------//
14992                        	
14993                        		.dbg	line,	"main.c", 156; //                                    SHOP                                     //
14994                        	
14995                        		.dbg	line,	"main.c", 157; //-----------------------------------------------------------------------------//
14996                        	
14997                        		.dbg	line,	"main.c", 158; case SEQUENCE_SHOP:
14998    02:D37F             	.LL649:
14999                        		__case		4
15000                        	
15001                        		.dbg	line,	"main.c", 159; if(sequence_loaded == FALSE)
15002                        		__not.um	_sequence_loaded
         02:D37F  AD 12 23   			lda	_sequence_loaded
         02:D382  18         			clc
         02:D383  D0 01      			bne	!+
         02:D385  38         			sec
         02:D386             	!:
15003                        		__bfalse	.LL650
         02:D386  90 0B      			bcc	.LL650
15004                        	
15005                        		.dbg	line,	"main.c", 160; {
15006                        	
15007                        		.dbg	line,	"main.c", 161; init_SHOP();
15008                        		__call		_init_SHOP
         02:D388  20 FB FD   			call	_init_SHOP
15009                        	
15010                        		.dbg	line,	"main.c", 163; sequence_loaded = TRUE;
15011                        		__st.umiq	1, _sequence_loaded
         02:D38B  A9 01      			lda.l	#1
         02:D38D  8D 12 23   			sta	_sequence_loaded
15012                        	
15013                        		.dbg	line,	"main.c", 164; }
15014                        	
15015                        		.dbg	line,	"main.c", 165; 
15016                        	
15017                        		.dbg	line,	"main.c", 166; else
15018                        		__bra		.LL651
         02:D390  4C 03 D3   			bra	.LL651
15019    02:D393             	.LL650:
15020                        	
15021                        		.dbg	line,	"main.c", 167; {
15022                        	
15023                        		.dbg	line,	"main.c", 168; switch(shop_phase)
15024                        		__ld.umq	_shop_phase
         02:D393  AD D0 23   			lda	_shop_phase
15025                        		__bra		.LL652
         02:D396  4C 79 D4   			bra	.LL652
15026                        	
15027                        		.dbg	line,	"main.c", 169; {
15028                        	
15029                        		.dbg	line,	"main.c", 170; case SHOP_PHASE_ENTER:
15030    02:D399             	.LL654:
15031                        		__case		0
15032                        	
15033                        		.dbg	line,	"main.c", 171; vsync();
15034                        		__call		_vsync
         02:D399  20 09 E3   			call	_vsync
15035                        	
15036                        		.dbg	line,	"main.c", 173; if(shop_counter == 0)
15037                        		__not.um	_shop_counter
         02:D39C  AD D1 23   			lda	_shop_counter
         02:D39F  18         			clc
         02:D3A0  D0 01      			bne	!+
         02:D3A2  38         			sec
         02:D3A3             	!:
15038                        		__bfalse	.LL655
         02:D3A3  90 28      			bcc	.LL655
15039                        	
15040                        		.dbg	line,	"main.c", 174; {
15041                        	
15042                        		.dbg	line,	"main.c", 175; put_string("Maybe, i can sell you" ,  2 , 15);
15043                        		__ld.wi		__const1+29
         02:D3A5  A9 1D      			lda.l	#__const1+29
         02:D3A7  A0 60      			ldy.h	#__const1+29
15044                        		__st.wmq	_bp
         02:D3A9  85 EC      			sta.l	_bp
         02:D3AB  84 ED      			sty.h	_bp
15045                        		__st.umiq	2, _dil
         02:D3AD  A9 02      			lda.l	#2
         02:D3AF  85 F0      			sta	_dil
15046                        		__st.umiq	15, _dih
         02:D3B1  A9 0F      			lda.l	#15
         02:D3B3  85 F1      			sta	_dih
15047                        		__call		_put_string.3
         02:D3B5  20 68 E6   			call	_put_string.3
15048                        	
15049                        		.dbg	line,	"main.c", 176; put_string("something..." , 18 , 16);
15050                        		__ld.wi		__const1+51
         02:D3B8  A9 33      			lda.l	#__const1+51
         02:D3BA  A0 60      			ldy.h	#__const1+51
15051                        		__st.wmq	_bp
         02:D3BC  85 EC      			sta.l	_bp
         02:D3BE  84 ED      			sty.h	_bp
15052                        		__st.umiq	18, _dil
         02:D3C0  A9 12      			lda.l	#18
         02:D3C2  85 F0      			sta	_dil
15053                        		__st.umiq	16, _dih
         02:D3C4  A9 10      			lda.l	#16
         02:D3C6  85 F1      			sta	_dih
15054                        		__call		_put_string.3
         02:D3C8  20 68 E6   			call	_put_string.3
15055                        	
15056                        		.dbg	line,	"main.c", 177; }
15057                        	
15058                        		.dbg	line,	"main.c", 179; else if(shop_counter == 120)
15059                        		__bra		.LL656
         02:D3CB  80 44      			bra	.LL656
15060    02:D3CD             	.LL655:
15061                        		__ld.umq	_shop_counter
         02:D3CD  AD D1 23   			lda	_shop_counter
15062                        		__equ_b.uiq	120
         02:D3D0  C9 78      			cmp	#120
         02:D3D2  F0 01      			beq	!+
         02:D3D4  18         			clc
         02:D3D5             	!:
15063                        		__bfalse	.LL657
         02:D3D5  90 3A      			bcc	.LL657
15064                        	
15065                        		.dbg	line,	"main.c", 180; {
15066                        	
15067                        		.dbg	line,	"main.c", 181; put_string("                     " ,  2 , 15);
15068                        		__ld.wi		__const1+64
         02:D3D7  A9 40      			lda.l	#__const1+64
         02:D3D9  A0 60      			ldy.h	#__const1+64
15069                        		__st.wmq	_bp
         02:D3DB  85 EC      			sta.l	_bp
         02:D3DD  84 ED      			sty.h	_bp
15070                        		__st.umiq	2, _dil
         02:D3DF  A9 02      			lda.l	#2
         02:D3E1  85 F0      			sta	_dil
15071                        		__st.umiq	15, _dih
         02:D3E3  A9 0F      			lda.l	#15
         02:D3E5  85 F1      			sta	_dih
15072                        		__call		_put_string.3
         02:D3E7  20 68 E6   			call	_put_string.3
15073                        	
15074                        		.dbg	line,	"main.c", 182; put_string("            " , 18 , 16);
15075                        		__ld.wi		__const1+86
         02:D3EA  A9 56      			lda.l	#__const1+86
         02:D3EC  A0 60      			ldy.h	#__const1+86
15076                        		__st.wmq	_bp
         02:D3EE  85 EC      			sta.l	_bp
         02:D3F0  84 ED      			sty.h	_bp
15077                        		__st.umiq	18, _dil
         02:D3F2  A9 12      			lda.l	#18
         02:D3F4  85 F0      			sta	_dil
15078                        		__st.umiq	16, _dih
         02:D3F6  A9 10      			lda.l	#16
         02:D3F8  85 F1      			sta	_dih
15079                        		__call		_put_string.3
         02:D3FA  20 68 E6   			call	_put_string.3
15080                        	
15081                        		.dbg	line,	"main.c", 184; spr_x(24);
15082                        		__ld.wi		24
         02:D3FD  A9 18      			lda.l	#24
         02:D3FF  C2         			cly
15083                        		__call		_spr_x.1
         02:D400  20 0A E8   			call	_spr_x.1
15084                        	
15085                        		.dbg	line,	"main.c", 185; spr_y(144);
15086                        		__ld.wi		144
         02:D403  A9 90      			lda.l	#144
         02:D405  C2         			cly
15087                        		__call		_spr_y.1
         02:D406  20 19 E8   			call	_spr_y.1
15088                        	
15089                        		.dbg	line,	"main.c", 186; satb_update();
15090                        		__call		_satb_update
         02:D409  20 91 FE   			call	_satb_update
15091                        	
15092                        		.dbg	line,	"main.c", 188; shop_phase = SHOP_PHASE_BUY;
15093                        		__st.umiq	1, _shop_phase
         02:D40C  A9 01      			lda.l	#1
         02:D40E  8D D0 23   			sta	_shop_phase
15094                        	
15095                        		.dbg	line,	"main.c", 189; }
15096                        	
15097                        		.dbg	line,	"main.c", 191; shop_counter++;
15098    02:D411             	.LL657:
15099    02:D411             	.LL656:
15100                        		__inc.umq	_shop_counter
         02:D411  EE D1 23   			inc	_shop_counter
15101                        	
15102                        		.dbg	line,	"main.c", 193; break;
15103                        		__bra		.LL653
         02:D414  4C 03 D3   			bra	.LL653
15104                        	
15105                        		.dbg	line,	"main.c", 194; 
15106                        	
15107                        		.dbg	line,	"main.c", 196; case SHOP_PHASE_BUY:
15108    02:D417             	.LL658:
15109                        		__case		1
15110                        	
15111                        		.dbg	line,	"main.c", 197; vsync();
15112                        		__call		_vsync
         02:D417  20 09 E3   			call	_vsync
15113                        	
15114                        		.dbg	line,	"main.c", 199; joypad_BUTTONS_SHOP();
15115                        		__call		_joypad_BUTTONS_SHOP
         02:D41A  20 F1 FD   			call	_joypad_BUTTONS_SHOP
15116                        	
15117                        		.dbg	line,	"main.c", 200; display_TIME_SHOP();
15118                        		__call		_display_TIME_SHOP
         02:D41D  20 E7 FD   			call	_display_TIME_SHOP
15119                        	
15120                        		.dbg	line,	"main.c", 201; satb_update();
15121                        		__call		_satb_update
         02:D420  20 91 FE   			call	_satb_update
15122                        	
15123                        		.dbg	line,	"main.c", 203; break;
15124                        		__bra		.LL653
         02:D423  4C 03 D3   			bra	.LL653
15125                        	
15126                        		.dbg	line,	"main.c", 206; case SHOP_PHASE_EXIT:
15127    02:D426             	.LL659:
15128                        		__case		2
15129                        	
15130                        		.dbg	line,	"main.c", 207; vsync();
15131                        		__call		_vsync
         02:D426  20 09 E3   			call	_vsync
15132                        	
15133                        		.dbg	line,	"main.c", 209; if(shop_counter == 0)
15134                        		__not.um	_shop_counter
         02:D429  AD D1 23   			lda	_shop_counter
         02:D42C  18         			clc
         02:D42D  D0 01      			bne	!+
         02:D42F  38         			sec
         02:D430             	!:
15135                        		__bfalse	.LL660
         02:D430  90 1F      			bcc	.LL660
15136                        	
15137                        		.dbg	line,	"main.c", 210; {
15138                        	
15139                        		.dbg	line,	"main.c", 211; put_string("GOOD LUCK!" , 11 , 16);
15140                        		__ld.wi		__const1+99
         02:D432  A9 63      			lda.l	#__const1+99
         02:D434  A0 60      			ldy.h	#__const1+99
15141                        		__st.wmq	_bp
         02:D436  85 EC      			sta.l	_bp
         02:D438  84 ED      			sty.h	_bp
15142                        		__st.umiq	11, _dil
         02:D43A  A9 0B      			lda.l	#11
         02:D43C  85 F0      			sta	_dil
15143                        		__st.umiq	16, _dih
         02:D43E  A9 10      			lda.l	#16
         02:D440  85 F1      			sta	_dih
15144                        		__call		_put_string.3
         02:D442  20 68 E6   			call	_put_string.3
15145                        	
15146                        		.dbg	line,	"main.c", 213; // HIDE CURSOR //
15147                        	
15148                        		.dbg	line,	"main.c", 214; spr_set(0);
15149                        		__ld.uiq	0
         02:D445  62         			cla
15150                        		__call		_spr_set.1
         02:D446  20 DD E7   			call	_spr_set.1
15151                        	
15152                        		.dbg	line,	"main.c", 215; spr_hide();
15153                        		__call		_spr_hide
         02:D449  20 F8 E7   			call	_spr_hide
15154                        	
15155                        		.dbg	line,	"main.c", 216; satb_update();
15156                        		__call		_satb_update
         02:D44C  20 91 FE   			call	_satb_update
15157                        	
15158                        		.dbg	line,	"main.c", 217; }
15159                        	
15160                        		.dbg	line,	"main.c", 219; else if(shop_counter == 120)
15161                        		__bra		.LL661
         02:D44F  80 22      			bra	.LL661
15162    02:D451             	.LL660:
15163                        		__ld.umq	_shop_counter
         02:D451  AD D1 23   			lda	_shop_counter
15164                        		__equ_b.uiq	120
         02:D454  C9 78      			cmp	#120
         02:D456  F0 01      			beq	!+
         02:D458  18         			clc
         02:D459             	!:
15165                        		__bfalse	.LL662
         02:D459  90 18      			bcc	.LL662
15166                        	
15167                        		.dbg	line,	"main.c", 220; {
15168                        	
15169                        		.dbg	line,	"main.c", 221; disp_off();
15170                        		__call		_disp_off
         02:D45B  20 29 E4   			call	_disp_off
15171                        	
15172                        		.dbg	line,	"main.c", 223; // REINIT PLAYER //
15173                        	
15174                        		.dbg	line,	"main.c", 224; init_PLAYER();
15175                        		__call		_init_PLAYER
         02:D45E  20 55 FE   			call	_init_PLAYER
15176                        	
15177                        		.dbg	line,	"main.c", 226; shop_phase = SHOP_PHASE_EXIT;
15178                        		__st.umiq	2, _shop_phase
         02:D461  A9 02      			lda.l	#2
         02:D463  8D D0 23   			sta	_shop_phase
15179                        	
15180                        		.dbg	line,	"main.c", 227; respawn = RESPAWN_SHOP;
15181                        		__st.umiq	2, _respawn
         02:D466  A9 02      			lda.l	#2
         02:D468  8D 14 23   			sta	_respawn
15182                        	
15183                        		.dbg	line,	"main.c", 228; sequence_loaded = FALSE;
15184                        		__st.umiq	0, _sequence_loaded
         02:D46B  9C 12 23   			stz	_sequence_loaded
15185                        	
15186                        		.dbg	line,	"main.c", 229; sequence_id = SEQUENCE_GAME;
15187                        		__st.umiq	2, _sequence_id
         02:D46E  A9 02      			lda.l	#2
         02:D470  8D 11 23   			sta	_sequence_id
15188                        	
15189                        		.dbg	line,	"main.c", 230; }
15190                        	
15191                        		.dbg	line,	"main.c", 232; shop_counter++;
15192    02:D473             	.LL662:
15193    02:D473             	.LL661:
15194                        		__inc.umq	_shop_counter
         02:D473  EE D1 23   			inc	_shop_counter
15195                        	
15196                        		.dbg	line,	"main.c", 234; break;
15197                        		__bra		.LL653
         02:D476  4C 03 D3   			bra	.LL653
15198                        	
15199                        		.dbg	line,	"main.c", 235; }
15200    02:D479             	.LL652:
15201                        		__switch_r.ur	0, 2
         02:D479  C9 03      			cmp	#(2 - 0) + 1
         02:D47B  90 02      			bcc	!found+
         02:D47D  A9 03      	!default:	lda	#(2 - 0) + 1
         02:D47F  0A         	!found:		asl	a
         02:D480  AA         			tax
         02:D481  7C 84 D4   			jmp	[!table+, x]
15202                        	
15203    02:D484  99 D3      	!table:		dw	.LL654, .LL658, .LL659
         02:D486  17 D4       
         02:D488  26 D4       
15204    02:D48A  03 D3      			dw	.LL653
15205    02:D48C             	.LL653	.alias		.LL635
15206                        	
15207                        		.dbg	line,	"main.c", 236; }
15208    02:D48C             	.LL651	.alias		.LL635
15209                        	
15210                        		.dbg	line,	"main.c", 238; break;
15211                        		__bra		.LL635
         02:D48C  4C 03 D3   			bra	.LL635
15212                        	
15213                        		.dbg	line,	"main.c", 239; }
15214    02:D48F             	.LL634:
15215                        		__switch_r.ur	0, 4
         02:D48F  C9 05      			cmp	#(4 - 0) + 1
         02:D491  90 02      			bcc	!found+
         02:D493  A9 05      	!default:	lda	#(4 - 0) + 1
         02:D495  0A         	!found:		asl	a
         02:D496  AA         			tax
         02:D497  7C 9A D4   			jmp	[!table+, x]
15216                        	
15217    02:D49A  09 D3      	!table:		dw	.LL636, .LL637, .LL638, .LL648, .LL649
         02:D49C  0B D3       
         02:D49E  0D D3       
         02:D4A0  7D D3       
         02:D4A2  7F D3       
15218    02:D4A4  03 D3      			dw	.LL635
15219    02:D4A6             	.LL635	.alias		.LL632
15220                        	
15221                        		.dbg	line,	"main.c", 240; }
15222                        		__bra		.LL632
         02:D4A6  4C 03 D3   			bra	.LL632
15223    02:D4A9             	.LL633:
15224                        	
15225                        		.dbg	line,	"main.c", 241; }
15226    02:D4A9             	.LL624:
15227                        		__return	1
         02:D4A9  AA         			tax
         02:D4AA  4C EF FF   			jmp	leave_proc
15228                        		.dbg	clear
15229                        		.endp
15230                        		.pceas
15231                        	
15232                        		.dbg	clear
15233               6000     		.rodata
15234    01:6000             	__const1:
15235    01:6000  48 61 6C 74			db	'H','a','l','t',':',' ','S','G'
         01:6004  3A 20 53 47 
15236    01:6008  58 20 68 61			db	'X',' ','h','a','r','d','w','a'
         01:600C  72 64 77 61 
15237    01:6010  72 65 20 6E			db	'r','e',' ','n','o','t',' ','f'
         01:6014  6F 74 20 66 
15238    01:6018  6F 75 6E 64			db	'o','u','n','d',$00,'M','a','y'
         01:601C  00 4D 61 79 
15239    01:6020  62 65 2C 20			db	'b','e',',',' ','i',' ','c','a'
         01:6024  69 20 63 61 
15240    01:6028  6E 20 73 65			db	'n',' ','s','e','l','l',' ','y'
         01:602C  6C 6C 20 79 
15241    01:6030  6F 75 00 73			db	'o','u',$00,'s','o','m','e','t'
         01:6034  6F 6D 65 74 
15242    01:6038  68 69 6E 67			db	'h','i','n','g','.','.','.',$00
         01:603C  2E 2E 2E 00 
15243    01:6040  20 20 20 20			db	' ',' ',' ',' ',' ',' ',' ',' '
         01:6044  20 20 20 20 
15244    01:6048  20 20 20 20			db	' ',' ',' ',' ',' ',' ',' ',' '
         01:604C  20 20 20 20 
15245    01:6050  20 20 20 20			db	' ',' ',' ',' ',' ',$00,' ',' '
         01:6054  20 00 20 20 
15246    01:6058  20 20 20 20			db	' ',' ',' ',' ',' ',' ',' ',' '
         01:605C  20 20 20 20 
15247    01:6060  20 20 00 47			db	' ',' ',$00,'G','O','O','D',' '
         01:6064  4F 4F 44 20 
15248    01:6068  4C 55 43 4B			db	'L','U','C','K','!',$00
         01:606C  21 00       
15249    01:606E             	_TABLE_NPC_TYPE_LV1:
15250    01:606E  01         			db	1
15251    01:606F  00         			db	0
15252    01:6070             	_TABLE_NPC_X_POS_REF_LV1:
15253    01:6070  90 03      			dw	912
15254    01:6072  D0 04      			dw	1232
15255    01:6074             	_TABLE_NPC_Y_POS_REF_LV1:
15256    01:6074  40 02      			dw	576
15257    01:6076  90 01      			dw	400
15258    01:6078             	_TABLE_OBJECT_TYPE_LV1:
15259    01:6078  00         			db	0
15260    01:6079  01         			db	1
15261    01:607A  01         			db	1
15262    01:607B  01         			db	1
15263    01:607C  01         			db	1
15264    01:607D  01         			db	1
15265    01:607E  01         			db	1
15266    01:607F  02         			db	2
15267    01:6080  01         			db	1
15268    01:6081  01         			db	1
15269    01:6082  01         			db	1
15270    01:6083  01         			db	1
15271    01:6084  01         			db	1
15272    01:6085  01         			db	1
15273    01:6086  01         			db	1
15274    01:6087  01         			db	1
15275    01:6088  01         			db	1
15276    01:6089  01         			db	1
15277    01:608A  01         			db	1
15278    01:608B  01         			db	1
15279    01:608C  01         			db	1
15280    01:608D  01         			db	1
15281    01:608E  01         			db	1
15282    01:608F             	_TABLE_OBJECT_X_POS_REF_LV1:
15283    01:608F  90 06      			dw	1680
15284    01:6091  00 05      			dw	1280
15285    01:6093  C0 05      			dw	1472
15286    01:6095  A0 05      			dw	1440
15287    01:6097  90 04      			dw	1168
15288    01:6099  B0 04      			dw	1200
15289    01:609B  C0 03      			dw	960
15290    01:609D  D8 03      			dw	984
15291    01:609F  50 05      			dw	1360
15292    01:60A1  70 05      			dw	1392
15293    01:60A3  10 06      			dw	1552
15294    01:60A5  90 06      			dw	1680
15295    01:60A7  B0 06      			dw	1712
15296    01:60A9  D0 06      			dw	1744
15297    01:60AB  E0 04      			dw	1248
15298    01:60AD  00 05      			dw	1280
15299    01:60AF  90 04      			dw	1168
15300    01:60B1  10 04      			dw	1040
15301    01:60B3  80 02      			dw	640
15302    01:60B5  A0 02      			dw	672
15303    01:60B7  50 01      			dw	336
15304    01:60B9  70 01      			dw	368
15305    01:60BB  A0 01      			dw	416
15306    01:60BD             	_TABLE_OBJECT_Y_POS_REF_LV1:
15307    01:60BD  80 01      			dw	384
15308    01:60BF  A0 01      			dw	416
15309    01:60C1  E0 01      			dw	480
15310    01:60C3  F0 01      			dw	496
15311    01:60C5  30 02      			dw	560
15312    01:60C7  30 02      			dw	560
15313    01:60C9  50 02      			dw	592
15314    01:60CB  50 02      			dw	592
15315    01:60CD  50 02      			dw	592
15316    01:60CF  50 02      			dw	592
15317    01:60D1  C0 02      			dw	704
15318    01:60D3  D0 02      			dw	720
15319    01:60D5  D0 02      			dw	720
15320    01:60D7  D0 02      			dw	720
15321    01:60D9  E0 02      			dw	736
15322    01:60DB  E0 02      			dw	736
15323    01:60DD  F0 02      			dw	752
15324    01:60DF  50 03      			dw	848
15325    01:60E1  70 03      			dw	880
15326    01:60E3  70 03      			dw	880
15327    01:60E5  80 03      			dw	896
15328    01:60E7  80 03      			dw	896
15329    01:60E9  80 03      			dw	896
15330    01:60EB             	_TABLE_CHEST_X_POS_REF_LV1:
15331    01:60EB  30 04      			dw	1072
15332    01:60ED  30 03      			dw	816
15333    01:60EF             	_TABLE_CHEST_Y_POS_REF_LV1:
15334    01:60EF  40 03      			dw	832
15335    01:60F1  50 03      			dw	848
15336    01:60F3             	_TABLE_PLAYER_TILES_ADR:
15337    01:60F3  E0 69      			dw	_tiles_SPR_PLAYER_ARMOR
15338    01:60F5  E0 77      			dw	_tiles_SPR_PLAYER_NAKED
15339    01:60F7             	_TABLE_PLAYER_TILES_BANK:
15340    01:60F7  0E         			db	^_tiles_SPR_PLAYER_ARMOR
15341    01:60F8  0F         			db	^_tiles_SPR_PLAYER_NAKED
15342    01:60F9             	_TABLE_PLAYER_JUMP_V:
15343    01:60F9  FC         			db	-4
15344    01:60FA  FB         			db	-5
15345    01:60FB  F6         			db	-10
15346    01:60FC  FC         			db	-4
15347    01:60FD  FC         			db	-4
15348    01:60FE  F9         			db	-7
15349    01:60FF  FA         			db	-6
15350    01:6100  FD         			db	-3
15351    01:6101  FB         			db	-5
15352    01:6102  FE         			db	-2
15353    01:6103  FC         			db	-4
15354    01:6104  FF         			db	-1
15355    01:6105  FF         			db	-1
15356    01:6106  FF         			db	-1
15357    01:6107  FF         			db	-1
15358    01:6108  00         			db	0
15359    01:6109  00         			db	0
15360    01:610A  00         			db	0
15361    01:610B  00         			db	0
15362    01:610C  01         			db	1
15363    01:610D  01         			db	1
15364    01:610E  01         			db	1
15365    01:610F  01         			db	1
15366    01:6110  04         			db	4
15367    01:6111  02         			db	2
15368    01:6112  05         			db	5
15369    01:6113  03         			db	3
15370    01:6114  06         			db	6
15371    01:6115  07         			db	7
15372    01:6116  04         			db	4
15373    01:6117  04         			db	4
15374    01:6118  0A         			db	10
15375    01:6119  04         			db	4
15376    01:611A  04         			db	4
15377    01:611B  05         			db	5
15378    01:611C             	_TABLE_PLAYER_FALL:
15379    01:611C  00         			db	0
15380    01:611D  00         			db	0
15381    01:611E  00         			db	0
15382    01:611F  00         			db	0
15383    01:6120  01         			db	1
15384    01:6121  01         			db	1
15385    01:6122  01         			db	1
15386    01:6123  01         			db	1
15387    01:6124  02         			db	2
15388    01:6125  02         			db	2
15389    01:6126  02         			db	2
15390    01:6127  02         			db	2
15391    01:6128  03         			db	3
15392    01:6129  03         			db	3
15393    01:612A  03         			db	3
15394    01:612B  04         			db	4
15395    01:612C  04         			db	4
15396    01:612D  04         			db	4
15397    01:612E  04         			db	4
15398    01:612F  04         			db	4
15399    01:6130  05         			db	5
15400    01:6131             	_TABLE_PLAYER_JUMP_LADDER:
15401    01:6131  FC         			db	-4
15402    01:6132  FC         			db	-4
15403    01:6133  FD         			db	-3
15404    01:6134  FD         			db	-3
15405    01:6135  FD         			db	-3
15406    01:6136  FE         			db	-2
15407    01:6137  FE         			db	-2
15408    01:6138  FE         			db	-2
15409    01:6139  FF         			db	-1
15410    01:613A  FF         			db	-1
15411    01:613B  FF         			db	-1
15412    01:613C  FF         			db	-1
15413    01:613D  FF         			db	-1
15414    01:613E  00         			db	0
15415    01:613F  00         			db	0
15416    01:6140  00         			db	0
15417    01:6141  00         			db	0
15418    01:6142  01         			db	1
15419    01:6143  01         			db	1
15420    01:6144  01         			db	1
15421    01:6145  01         			db	1
15422    01:6146  01         			db	1
15423    01:6147  02         			db	2
15424    01:6148  02         			db	2
15425    01:6149  02         			db	2
15426    01:614A  03         			db	3
15427    01:614B  03         			db	3
15428    01:614C  03         			db	3
15429    01:614D  04         			db	4
15430    01:614E  04         			db	4
15431    01:614F             	_TABLE_WEAPON_TILES_ADR:
15432    01:614F  60 6E      			dw	_tiles_SPR_WEAPON_0
15433    01:6151  E0 70      			dw	_tiles_SPR_WEAPON_1
15434    01:6153  60 73      			dw	_tiles_SPR_WEAPON_2
15435    01:6155  E0 75      			dw	_tiles_SPR_WEAPON_3
15436    01:6157  60 78      			dw	_tiles_SPR_WEAPON_4
15437    01:6159             	_TABLE_WEAPON_TILES_BANK:
15438    01:6159  11         			db	^_tiles_SPR_WEAPON_0
15439    01:615A  11         			db	^_tiles_SPR_WEAPON_1
15440    01:615B  11         			db	^_tiles_SPR_WEAPON_2
15441    01:615C  11         			db	^_tiles_SPR_WEAPON_3
15442    01:615D  11         			db	^_tiles_SPR_WEAPON_4
15443    01:615E             	_TABLE_SHOP_ITEMS_LV1:
15444    01:615E  00         			db	0
15445    01:615F  01         			db	1
15446    01:6160  02         			db	2
15447    01:6161  03         			db	3
15448    01:6162  04         			db	4
15449    01:6163  05         			db	5
15450    01:6164  06         			db	6
15451    01:6165  07         			db	7
15452    01:6166  08         			db	8
15453    01:6167  09         			db	9
15454    01:6168             	_TABLE_SHOP_PRICES_LV1:
15455    01:6168  64 00      			dw	100
15456    01:616A  E8 03      			dw	1000
15457    01:616C  60 09      			dw	2400
15458    01:616E  80 25      			dw	9600
15459    01:6170  1E 00      			dw	30
15460    01:6172  50 00      			dw	80
15461    01:6174  2C 01      			dw	300
15462    01:6176  20 03      			dw	800
15463    01:6178  40 06      			dw	1600
15464    01:617A  96 00      			dw	150
15465    01:617C             	_TABLE_SHOP_ITEMS_TILES_ADR:
15466    01:617C  E0 60      			dw	_tiles_ITEM_WEAPON_2
15467    01:617E  60 61      			dw	_tiles_ITEM_WEAPON_3
15468    01:6180  E0 61      			dw	_tiles_ITEM_WEAPON_4
15469    01:6182  60 62      			dw	_tiles_ITEM_WEAPON_5
15470    01:6184  E0 62      			dw	_tiles_ITEM_KEY
15471    01:6186  60 63      			dw	_tiles_ITEM_ARMOR_2
15472    01:6188  E0 63      			dw	_tiles_ITEM_ARMOR_3
15473    01:618A  60 64      			dw	_tiles_ITEM_ARMOR_4
15474    01:618C  E0 64      			dw	_tiles_ITEM_ARMOR_5
15475    01:618E  60 65      			dw	_tiles_ITEM_POTION
15476    01:6190             	_TABLE_SHOP_ITEMS_TILES_BANK:
15477    01:6190  0E         			db	^_tiles_ITEM_WEAPON_2
15478    01:6191  0E         			db	^_tiles_ITEM_WEAPON_3
15479    01:6192  0E         			db	^_tiles_ITEM_WEAPON_4
15480    01:6193  0E         			db	^_tiles_ITEM_WEAPON_5
15481    01:6194  0E         			db	^_tiles_ITEM_KEY
15482    01:6195  0E         			db	^_tiles_ITEM_ARMOR_2
15483    01:6196  0E         			db	^_tiles_ITEM_ARMOR_3
15484    01:6197  0E         			db	^_tiles_ITEM_ARMOR_4
15485    01:6198  0E         			db	^_tiles_ITEM_ARMOR_5
15486    01:6199  0E         			db	^_tiles_ITEM_POTION
15487    01:619A             	_TABLE_CURSOR_POS_X:
15488    01:619A  18         			db	24
15489    01:619B  38         			db	56
15490    01:619C  60         			db	96
15491    01:619D  88         			db	136
15492    01:619E  B0         			db	176
15493    01:619F  18         			db	24
15494    01:61A0  38         			db	56
15495    01:61A1  60         			db	96
15496    01:61A2  88         			db	136
15497    01:61A3  B0         			db	176
15498    01:61A4  D4         			db	212
15499                        	
15500               2311     		.bss
15501    F8:2311             	_sequence_id:
15502    F8:2311             			ds	1
15503    F8:2312             	_sequence_loaded:
15504    F8:2312             			ds	1
15505    F8:2313             	_level_id:
15506    F8:2313             			ds	1
15507    F8:2314             	_respawn:
15508    F8:2314             			ds	1
15509    F8:2315             	_player_id:
15510    F8:2315             			ds	1
15511    F8:2316             	_player_state:
15512    F8:2316             			ds	1
15513    F8:2317             	_player_axis:
15514    F8:2317             			ds	1
15515    F8:2318             	_player_previous_axis:
15516    F8:2318             			ds	1
15517    F8:2319             	_player_counter_anim:
15518    F8:2319             			ds	1
15519    F8:231A             	_player_index_jump:
15520    F8:231A             			ds	1
15521    F8:231B             	_player_index_fall:
15522    F8:231B             			ds	1
15523    F8:231C             	_player_counter_attack:
15524    F8:231C             			ds	1
15525    F8:231D             	_player_naked:
15526    F8:231D             			ds	1
15527    F8:231E             	_player_attack:
15528    F8:231E             			ds	1
15529    F8:231F             	_jump_ladder:
15530    F8:231F             			ds	1
15531    F8:2320             	_jump_max_index:
15532    F8:2320             			ds	1
15533    F8:2321             	_chain_id:
15534    F8:2321             			ds	1
15535    F8:2322             	_weapon_id:
15536    F8:2322             			ds	1
15537    F8:2323             	_armor_level:
15538    F8:2323             			ds	1
15539    F8:2324             	_weapon_level:
15540    F8:2324             			ds	1
15541    F8:2325             	_life_amount:
15542    F8:2325             			ds	1
15543    F8:2326             	_key_amount:
15544    F8:2326             			ds	1
15545    F8:2327             	_potion_amount:
15546    F8:2327             			ds	1
15547    F8:2328             	_minutes:
15548    F8:2328             			ds	1
15549    F8:2329             	_seconds:
15550    F8:2329             			ds	1
15551    F8:232A             	_time_counter:
15552    F8:232A             			ds	1
15553    F8:232B             	_minutes_backup:
15554    F8:232B             			ds	1
15555    F8:232C             	_seconds_backup:
15556    F8:232C             			ds	1
15557    F8:232D             	_object_start_index:
15558    F8:232D             			ds	1
15559    F8:232E             	_level_object_number:
15560    F8:232E             			ds	1
15561    F8:232F             	_onscreen_object_number:
15562    F8:232F             			ds	1
15563    F8:2330             	_list_object_type:
15564    F8:2330             			ds	25
15565    F8:2349             	_list_object_state:
15566    F8:2349             			ds	25
15567    F8:2362             	_list_object_energy:
15568    F8:2362             			ds	25
15569    F8:237B             	_list_reward_type:
15570    F8:237B             			ds	25
15571    F8:2394             	_list_onscreen_object:
15572    F8:2394             			ds	8
15573    F8:239C             	_chest_start_index:
15574    F8:239C             			ds	1
15575    F8:239D             	_level_chest_number:
15576    F8:239D             			ds	1
15577    F8:239E             	_onscreen_chest_number:
15578    F8:239E             			ds	1
15579    F8:239F             	_list_chest_state:
15580    F8:239F             			ds	8
15581    F8:23A7             	_list_onscreen_chest:
15582    F8:23A7             			ds	8
15583    F8:23AF             	_npc_start_index:
15584    F8:23AF             			ds	1
15585    F8:23B0             	_level_npc_number:
15586    F8:23B0             			ds	1
15587    F8:23B1             	_onscreen_npc_number:
15588    F8:23B1             			ds	1
15589    F8:23B2             	_list_npc_type:
15590    F8:23B2             			ds	9
15591    F8:23BB             	_list_npc_state:
15592    F8:23BB             			ds	9
15593    F8:23C4             	_list_onscreen_npc:
15594    F8:23C4             			ds	9
15595    F8:23CD             	_index_x:
15596    F8:23CD             			ds	1
15597    F8:23CE             	_index_y:
15598    F8:23CE             			ds	1
15599    F8:23CF             	_item_index:
15600    F8:23CF             			ds	1
15601    F8:23D0             	_shop_phase:
15602    F8:23D0             			ds	1
15603    F8:23D1             	_shop_counter:
15604    F8:23D1             			ds	1
15605    F8:23D2             	_tilemap_mask:
15606    F8:23D2             			ds	256
15607    F8:24D2             	_player_pos_x:
15608    F8:24D2             			ds	2
15609    F8:24D4             	_player_pos_y:
15610    F8:24D4             			ds	2
15611    F8:24D6             	_camera_max_y_position:
15612    F8:24D6             			ds	2
15613    F8:24D8             	_camera_pos_x_backup:
15614    F8:24D8             			ds	2
15615    F8:24DA             	_camera_pos_y_backup:
15616    F8:24DA             			ds	2
15617    F8:24DC             	_list_object_x_pos:
15618    F8:24DC             			ds	50
15619    F8:250E             	_list_object_y_pos:
15620    F8:250E             			ds	50
15621    F8:2540             	_list_object_x_pos_ref:
15622    F8:2540             			ds	50
15623    F8:2572             	_list_object_y_pos_ref:
15624    F8:2572             			ds	50
15625    F8:25A4             	_list_chest_x_pos:
15626    F8:25A4             			ds	16
15627    F8:25B4             	_list_chest_y_pos:
15628    F8:25B4             			ds	16
15629    F8:25C4             	_list_chest_x_pos_ref:
15630    F8:25C4             			ds	16
15631    F8:25D4             	_list_chest_y_pos_ref:
15632    F8:25D4             			ds	16
15633    F8:25E4             	_list_npc_x_pos:
15634    F8:25E4             			ds	18
15635    F8:25F6             	_list_npc_y_pos:
15636    F8:25F6             			ds	18
15637    F8:2608             	_list_npc_x_pos_ref:
15638    F8:2608             			ds	18
15639    F8:261A             	_list_npc_y_pos_ref:
15640    F8:261A             			ds	18
15641    F8:262C             	_zenny_amount:
15642    F8:262C             			ds	2
15643    F8:262E             	_score:
15644    F8:262E             			ds	2
15645    F8:2630             	_shop_prices:
15646    F8:2630             			ds	20
15647    F8:2644             	_ptr_SHOP_ITEM_PRICES:
15648    F8:2644             			ds	2
15649                        	
15650                        	
15651                        	;0 error(s) in compilation
15652                        	;	literal pool:110
15653                        	;	constant pool:311
15654                        	;	global pool:530
15655                        	;	Macro pool:287
15656    F8:2646             	leaf_loc:
15657    F8:2646             			ds	4
15658    F8:264A             	__hide_LEVEL_SPRITES_end:
15659    F8:264A             	__scroll_object_end:
15660    F8:264A             	__scroll_chest_end:
15661    F8:264A             	__scroll_npc_end:
15662    F8:264A             	__check_TILE_DEPTH_end:
15663    F8:264A             	__check_BG_end:
15664    F8:264A             	__check_NPC_end:
15665    F8:264A             	__recenter_CAMERA_end:
15666    F8:264A             	__init_OBJECT_LV1_end:
15667    F8:264A             	__init_CHEST_LV1_end:
15668    F8:264A             	__init_NPC_LV1_end:
15669                        	
15670    F8:264A             	__bss_init:
15671                        	
15672    F8:264A             	__heap_start:
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-final.asm
    5                        	;
    6                        	; PCEAS auto-includes this file at the end of every pass in HuCC or SDCC.
    7                        	;
    8                        	; Copyright John Brandwood 2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; This is used to select which assembly-language library files to include in
   18                        	; a HuCC project, using labels defined in the compiler's header files.
   19                        	;
   20                        	; ***************************************************************************
   21                        	; ***************************************************************************
   22                        	
   23                        			; Allow projects to customize what is included at the end
   24                        			; of a pass without replacing the entire "hucc-final.asm".
   25                        	
   26               E309     			.code
   27               0000     			.bank	CORE_BANK
   28               E309     			.page	CORE_PAGE
   29                        	
                             #[3]   "..\..\..\include\hucc\hucc-final-extra.asm"
   30                        			include	"hucc-final-extra.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-final-extra.asm
    5                        	;
    6                        	; hucc-final.asm includes this file at the end of every pass in HuCC or SDCC.
    7                        	;
    8                        	; Copyright John Brandwood 2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; This is used to select which assembly-language library files to include in
   18                        	; a HuCC project, using labels defined in the compiler's header files.
   19                        	;
   20                        	; ***************************************************************************
   21                        	; ***************************************************************************
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   31                        	
   32                        			; Libraries required for basic functionality.
   33                        	
   34               E309     			.code
   35               0000     			.bank	CORE_BANK
   36               E309     			.page	CORE_PAGE
   37                        	
                             #[3]   "..\..\..\include\hucc\common.asm"
   38                        			include	"common.asm"		; Common helpers.
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; common.asm
    5                        	;
    6                        	; Small, generic, PCE subroutines that are commonly useful when developing.
    7                        	;
    8                        	; These should be located in permanently-accessible memory!
    9                        	;
   10                        	; Copyright John Brandwood 2021-2024.
   11                        	;
   12                        	; Distributed under the Boost Software License, Version 1.0.
   13                        	; (See accompanying file LICENSE_1_0.txt or copy at
   14                        	;  http://www.boost.org/LICENSE_1_0.txt)
   15                        	;
   16                        	; ***************************************************************************
   17                        	; ***************************************************************************
   18                        	
   19                        	
   20                        	
   21                        	; ***************************************************************************
   22                        	; ***************************************************************************
   23                        	;
   24                        	; Wait for the next VBLANK IRQ.
   25                        	;
   26                        	
   27    00:E309  AD 41 22   	wait_vsync:	lda	irq_cnt			; System Card variable, changed
   28    00:E30C  CD 41 22   	.loop:		cmp	irq_cnt			; every VBLANK interrupt.
   29    00:E30F  F0 FB      			beq	.loop
   30               0001     		.ifdef	HUCC
   31    00:E311  8D EB 22   			sta	old_cnt			; Remember the frame count.
   32                        		.endif
   33    00:E314  60         			rts
   34                        	
   35                        	
   36                        	
   37                        	; ***************************************************************************
   38                        	; ***************************************************************************
   39                        	;
   40                        	; Delay for the next Y VBLANK IRQs.
   41                        	;
   42                        	
   43               0001     		.ifdef	HUCC
   44    00:E315             	_vsync		.alias	wait_vsync
   45                        	
   46    00:E315  AD 41 22   	_vsync.1:	lda	irq_cnt			; HuCC's vsync(n) was defined
   47    00:E318  38         			sec				; as frames from the previous
   48    00:E319  ED EB 22   			sbc	old_cnt			; vsync() call, 1 to 255.
   49    00:E31C  38         			sec
   50    00:E31D  E5 F8      			sbc	<_al
   51    00:E31F  90 02      			bcc	!+
   52    00:E321  A9 FF      			lda	#$FF
   53    00:E323  49 FF      	!:		eor	#$FF
   54    00:E325  1A         			inc	a
   55    00:E326  A8         			tay
   56                        		.endif
   57                        	
   58    00:E327  44 E0      	wait_nvsync:	bsr	wait_vsync		; # of VBLANK IRQs to wait in
   59    00:E329  88         			dey				; the Y register.
   60    00:E32A  D0 FB      			bne	wait_nvsync
   61    00:E32C  60         			rts
   62                        	
   63                        	
   64                        	
   65               0000     		.ifndef	HUCC
  101                        		.endif
  102                        	
  103                        	
  104                        	
  105                        	; ***************************************************************************
  106                        	; ***************************************************************************
  107                        	;
  108                        	; Map the _bp data far-pointer into MPR3 (& MPR4).
  109                        	;
  110                        	; Because the 16KB RAM region at $2000-$5FFF is composed of two separate
  111                        	; banks, with the 2nd bank having no specific relation to the 1st, there
  112                        	; is no way to deal with a bank-increment, so do not map that region.
  113                        	;
  114                        	; N.B. Library code relies on this preserving X and V!
  115                        	;
  116                        	
  117    00:E32D  98         	map_bp_to_mpr3:	tya				; Put bank into MPR3.
  118    00:E32E  F0 0A      			beq	!+
  119    00:E330  53 08      			tam3
  120    00:E332  A5 ED      			lda.h	<_bp			; Do not remap a ptr to RAM,
  121    00:E334  29 1F      			and	#$1F			; Remap ptr to MPR3.
  122    00:E336  09 60      			ora	#$60
  123    00:E338  85 ED      			sta.h	<_bp
  124    00:E33A  60         	!:		rts
  125                        	
  126    00:E33B  98         	map_bp_to_mpr34:tya				; Put bank into MPR3.
  127    00:E33C  F0 0D      			beq	!+
  128    00:E33E  53 08      			tam3
  129    00:E340  1A         			inc	a			; Put next into MPR4.
  130    00:E341  53 10      			tam4
  131    00:E343  A5 ED      			lda.h	<_bp			; Do not remap a ptr to RAM,
  132    00:E345  29 1F      			and	#$1F			; Remap ptr to MPR3.
  133    00:E347  09 60      			ora	#$60
  134    00:E349  85 ED      			sta.h	<_bp
  135    00:E34B  60         	!:		rts
  136                        	
  137                        	
  138                        	
  139                        	; ***************************************************************************
  140                        	; ***************************************************************************
  141                        	;
  142                        	; Increment the hi-byte of _bp and change TMA3 if necessary.
  143                        	;
  144                        	; N.B. Library code relies on this preserving A,X,Y and V!
  145                        	;
  146                        	
  147    00:E34C  E6 ED      	inc.h_bp_mpr3:	inc.h	<_bp			; Increment hi-byte of _bp.
  148    00:E34E  10 0B      			bpl	!+			; OK if within MPR0-MPR3.
  149    00:E350  48         			pha				; Increment the bank in MPR3,
  150    00:E351  43 08      			tma3				; usually when pointer moves
  151    00:E353  1A         			inc	a			; from $7FFF -> $8000.
  152    00:E354  53 08      			tam3
  153    00:E356  A9 60      			lda	#$60
  154    00:E358  85 ED      			sta.h	<_bp
  155    00:E35A  68         			pla
  156    00:E35B  60         	!:		rts
  157                        	
  158                        	
  159                        	
  160                        	; ***************************************************************************
  161                        	; ***************************************************************************
  162                        	;
  163                        	; Increment the hi-byte of _bp and change TMA3 and TMA4 if necessary.
  164                        	;
  165                        	; N.B. Library code relies on this preserving A,X,Y and V!
  166                        	;
  167                        	
  168    00:E35C  E6 ED      	inc.h_bp_mpr34:	inc.h	<_bp			; Increment hi-byte of _bp.
  169    00:E35E  10 0D      			bpl	!+			; OK if within MPR0-MPR3.
  170    00:E360  48         			pha				; Increment the bank in MPR3,
  171    00:E361  43 10      			tma4				; usually when pointer moves
  172    00:E363  53 08      			tam3				; from $7FFF -> $8000.
  173    00:E365  1A         			inc	a
  174    00:E366  53 10      			tam4
  175    00:E368  A9 60      			lda	#$60
  176    00:E36A  85 ED      			sta.h	<_bp
  177    00:E36C  68         			pla
  178    00:E36D  60         	!:		rts
  179                        	
  180                        	
  181                        	
  182                        	; ***************************************************************************
  183                        	; ***************************************************************************
  184                        	;
  185                        	; Put the _di data pointer into the VDC's MARR or MAWR register.
  186                        	;
  187                        	; N.B. Library code relies on this preserving Y!
  188                        	;
  189                        	
  190               0001     		.if	SUPPORT_SGX
  191    00:E36E  A2 10      	sgx_di_to_marr:	ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  192    00:E370  F0         			db	$F0			; Turn "clx" into a "beq".
  193                        		.endif
  194                        	
  195    00:E371  82         	vdc_di_to_marr:	clx				; Offset to PCE VDC.
  196                        	
  197    00:E372  A9 01      	set_di_to_marr	lda	#VDC_MARR		; Set VDC or SGX destination
  198    00:E374  95 F7      			sta	<vdc_reg, x		; address.
  199    00:E376  9D 00 02   			sta	VDC_AR, x
  200    00:E379  80 09      			bra	!+
  201                        	
  202               0001     		.if	SUPPORT_SGX
  203    00:E37B  A2 10      	sgx_di_to_mawr:	ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  204    00:E37D  F0         			db	$F0			; Turn "clx" into a "beq".
  205                        		.endif
  206                        	
  207    00:E37E  82         	vdc_di_to_mawr:	clx				; Offset to PCE VDC.
  208                        	
  209    00:E37F             	set_di_to_mawr;	lda	#VDC_MAWR		; Set VDC or SGX destination
  210    00:E37F  74 F7      			stz	<vdc_reg, x		; address.
  211    00:E381  9E 00 02   			stz	VDC_AR, x
  212                        	
  213    00:E384  A5 F0      	!:		lda	<_di + 0
  214    00:E386  9D 02 02   			sta	VDC_DL, x
  215    00:E389  A5 F1      			lda	<_di + 1
  216    00:E38B  9D 03 02   			sta	VDC_DH, x
  217                        	
  218    00:E38E  A9 02      			lda	#VDC_VWR		; Select the VRR/VWR data
  219    00:E390  95 F7      			sta	<vdc_reg, x		; register.
  220    00:E392  9D 00 02   			sta	VDC_AR, x
  221    00:E395  60         			rts
  222                        	
  223                        	
  224                        	
  225                        	; ***************************************************************************
  226                        	; ***************************************************************************
  227                        	;
  228                        	; Increment the hi-byte of _di and change TMA4 if necessary.
  229                        	;
  230                        	
  231               0000     		.if	0				; Save memory, for now.
  250                        		.endif
  251                        	
  252                        	
  253                        	
  254                        	; ***************************************************************************
  255                        	; ***************************************************************************
  256                        	;
  257                        	; Far-call a function in another bank.
  258                        	;
  259                        	; This is a potential alternative procedure call trampoline that uses only 10
  260                        	; bytes of common memory per bank of procedures, instead of 10 bytes for each
  261                        	; individual procedure call, BUT it uses the X register as a procedure-index,
  262                        	; and it needs a table of addresses at the end of every procedure bank.
  263                        	;
  264                        	; To use this ...
  265                        	;
  266                        	;  ldx #procedure-index
  267                        	;  jsr far_call_nn
  268                        	;
  269                        	; The called .PROC routine must exit with "jmp leave_proc" and not "rts".
  270                        	;
  271                        	; leave_proc:	pla
  272                        	;		tam6
  273                        	;		tya
  274                        	;		rts
  275                        	;
  276                        	; N.B. This costs 21 cycles vs 18 for the .newproc trampoline code (when you
  277                        	;      exclude preserving YA in zero-page).
  278                        	;
  279                        	; N.B. This was written as an excerise, and definitely not for HuC!
  280                        	;
  281                        	
  282               0000     		.if	0
  295                        		.endif					; 21
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
                             #[3]   "..\..\..\include\hucc\vce.asm"
   39                        			include	"vce.asm"		; Useful VCE routines.
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; vce.asm
    5                        	;
    6                        	; Useful routines for operating the HuC6260 Video Color Encoder
    7                        	;
    8                        	; These should be located in permanently-accessible memory!
    9                        	;
   10                        	; Copyright John Brandwood 2021-2025.
   11                        	;
   12                        	; Distributed under the Boost Software License, Version 1.0.
   13                        	; (See accompanying file LICENSE_1_0.txt or copy at
   14                        	;  http://www.boost.org/LICENSE_1_0.txt)
   15                        	;
   16                        	; ***************************************************************************
   17                        	; ***************************************************************************
   18                        	
   19                        	;
   20                        	; Configure Library ...
   21                        	;
   22                        	
   23               0000     		.ifndef VCE_SPLIT_CROSS
   25                        		.endif
   26                        	
   27                        	
   28                        	
   29                        	; ***************************************************************************
   30                        	; ***************************************************************************
   31                        	;
   32                        	; xfer_palettes - Update the VCE with the queued palettes changes.
   33                        	;
   34                        	; This is normally called in a developer's vsync_hook handler, but it can
   35                        	; be called manually as long as it will not also be called in an interrupt.
   36                        	;
   37                        	; The queued transfers are split into 32-byte chunks so that an HSYNC and/or
   38                        	; TIMER IRQ is not delayed for too long during the VBLANK.
   39                        	;
   40                        	
   41    00:E396  A9 80      	xfer_palettes:	lda	#$80			; Acquire color mutex to avoid
   42    00:E398  0C 4A 26   			tsb	color_mutex		; conflict with a delayed VBL.
   43    00:E39B  30 5F      			bmi	.busy
   44                        	
   45    00:E39D  AC 4B 26   			ldy	color_queue_r		; Are there any palette xfers
   46    00:E3A0  CC 4C 26   			cpy	color_queue_w		; queued up?
   47    00:E3A3  F0 54      			beq	.exit
   48                        	
   49    00:E3A5  08         			php				; Enable interrupts so that an
   50    00:E3A6  58         			cli				; HSYNC or TIMER IRQ can occur.
   51                        	
   52    00:E3A7  43 08      			tma3				; Preserve MPR3 & MPR4 because
   53    00:E3A9  48         			pha				; this normally runs in the
   54    00:E3AA  43 10      			tma4				; VBLANK IRQ.
   55    00:E3AC  48         			pha
   56                        	
   57               0001     		.if	!CDROM
   58    00:E3AD  73 02 E4 86			tii	.tia_func, color_tia, 8 ; Copy TIA to RAM.
         00:E3B1  22 08 00    
   59                        		.endif
   60                        	
   61    00:E3B4  B9 4D 26   	.next_item:	lda	color_index, y		; Get the next set of palettes
   62    00:E3B7  0A         			asl	a			; from the queue.
   63    00:E3B8  0A         			asl	a
   64    00:E3B9  0A         			asl	a
   65    00:E3BA  0A         			asl	a
   66    00:E3BB  8D 02 04   			sta	VCE_CTA + 0
   67    00:E3BE  62         			cla
   68    00:E3BF  2A         			rol	a
   69    00:E3C0  8D 03 04   			sta	VCE_CTA + 1
   70                        	
   71    00:E3C3  BE 55 26   			ldx	color_count,y		; How many palettes to xfer?
   72                        	
   73    00:E3C6  B9 6D 26   			lda	color_bank, y		; Map data into MPR3 & MPR4.
   74    00:E3C9  53 08      			tam3
   75    00:E3CB  1A         			inc	a
   76    00:E3CC  53 10      			tam4
   77    00:E3CE  B9 65 26   			lda	color_addr_h, y
   78    00:E3D1  8D 88 22   			sta	.ram_tia + 2
   79    00:E3D4  B9 5D 26   			lda	color_addr_l, y
   80    00:E3D7  8D 87 22   	.palette_loop:	sta	.ram_tia + 1
   81                        	
   82               0000     		.if	CDROM
   84                        		.else
   85    00:E3DA  20 86 22   			jsr	.ram_tia		; Copy 32-bytes to the VCE.
   86                        		.endif
   87                        	
   88    00:E3DD  18         			clc				; Increment the data ptr to
   89    00:E3DE  69 20      			adc	#32			; the next 32-byte palette.
   90    00:E3E0  B0 1B      			bcs	.next_page
   91                        	
   92    00:E3E2  CA         	.next_palette:	dex				; Any palettes left to xfer?
   93    00:E3E3  D0 F2      			bne	.palette_loop
   94                        	
   95    00:E3E5  C8         			iny				; Increment the queue index.
   96    00:E3E6  98         			tya
   97    00:E3E7  29 07      			and	#7
   98    00:E3E9  A8         			tay
   99                        	
  100    00:E3EA  CC 4C 26   			cpy	color_queue_w		; Any more items in the queue?
  101    00:E3ED  D0 C5      			bne	.next_item
  102    00:E3EF  8C 4B 26   			sty	color_queue_r		; Signal the queue is empty.
  103                        	
  104    00:E3F2  68         			pla				; Restore MPR3 & MPR4.
  105    00:E3F3  53 10      			tam4
  106    00:E3F5  68         			pla
  107    00:E3F6  53 08      			tam3
  108                        	
  109    00:E3F8  28         			plp				; Restore interrupt state.
  110                        	
  111    00:E3F9  9C 4A 26   	.exit:		stz	color_mutex		; Release color mutex.
  112                        	
  113    00:E3FC  60         	.busy:		rts
  114                        	
  115    00:E3FD  EE 88 22   	.next_page:	inc	.ram_tia + 2
  116    00:E400  80 E0      			bra	.next_palette
  117                        	
  118               0001     		.if	!CDROM
  119               2286     	.ram_tia	=	color_tia		; Use a TIA in RAM.
  120                        	
  121    00:E402  E3 00 00 04	.tia_func:	tia	0, VCE_CTW, 32
         00:E406  04 20 00    
  122    00:E409  60         			rts
  123                        		.endif	!CDROM
  124                        	
  125               264A     			.bss
  126                        	
  127    F8:264A             	color_mutex:	ds	1			; Mutex for VCE changes.
  128    F8:264B             	color_queue_r:	ds	1			; Ring buffer read index.
  129    F8:264C             	color_queue_w:	ds	1			; Ring buffer write index.
  130    F8:264D             	color_index:	ds	8			; Ring buffer - Palette index.
  131    F8:2655             	color_count:	ds	8			; Ring buffer - Palette count.
  132    F8:265D             	color_addr_l:	ds	8			; Ring buffer - Data Ptr (lo).
  133    F8:2665             	color_addr_h:	ds	8			; Ring buffer - Data Ptr (hi).
  134    F8:266D             	color_bank:	ds	8			; Ring buffer - Data Ptr (bank).
  135                        	
  136               E40A     			.code
  137                        	
  138                        	
  139                        	
  140                        	; ***************************************************************************
  141                        	; ***************************************************************************
  142                        	;
  143                        	; load_palettes - Queue a set of palettes to upload to the VCE next VBLANK.
  144                        	;
  145                        	; Args: _al = Palette index (0..15 for BG, 16..31 for SPR).
  146                        	; Args: _ah = Palette count (1..32).
  147                        	; Args: _bp = Pointer to palette data.
  148                        	; Args:   Y = Bank to map into MPR3 & MPR4, or zero to leave unchanged.
  149                        	;
  150                        	; N.B. Y==0 is only useful if the palette data is permanently mapped!
  151                        	;
  152                        	
  153                        	load_palettes	.proc
  179                        			.endp
  180                        	
  181                        	
  182                        	
  183                        	; ***************************************************************************
  184                        	; ***************************************************************************
  185                        	;
  186                        	; clear_vce - Clear all 512 of the VCE's palette entries.
  187                        	;
  188                        	
  189    14:CABA             	clear_vce	.proc
  190                        	
  191    14:CABA  08         			php				; Disable interrupts to avoid
  192    14:CABB  78         			sei				; VBLANK palette upload.
  193    14:CABC  C2         			cly
  194    14:CABD  9C 02 04   			stz	VCE_CTA+0		; Set VCE write address.
  195    14:CAC0  9C 03 04   			stz	VCE_CTA+1
  196    14:CAC3  9C 04 04   	.loop:		stz	VCE_CTW+0		; Set lo-byte of color.
  197    14:CAC6  9C 05 04   			stz	VCE_CTW+1		; Write 1 color value.
  198    14:CAC9  9C 04 04   			stz	VCE_CTW+0		; Set lo-byte of color.
  199    14:CACC  9C 05 04   			stz	VCE_CTW+1		; Write 1 color value.
  200    14:CACF  88         			dey
  201    14:CAD0  D0 F1      			bne	.loop
  202    14:CAD2  28         			plp
  203                        	
  204                        			leave				; All done, phew!
         14:CAD3  4C EF FF   			jmp	leave_proc
  205                        	
  206                        			.endp
  207                        	
  208               0001     		.ifdef	HUCC
  209    00:E40A             			.alias	_clear_palette		= clear_vce
  210                        		.endif
  211                        	
  212                        	
  213                        	
  214                        	; ***************************************************************************
  215                        	; ***************************************************************************
  216                        	;
  217                        	; read_palettes - Read palettes from the VCE into a buffer in RAM.
  218                        	;
  219                        	; Args: _al = Palette index (0..15 for BG, 16..31 for SPR).
  220                        	; Args: _ah = Palette count (1..32).
  221                        	; Args: _di = Pointer to palette data destination in RAM.
  222                        	;
  223                        	; The transfer is split into 32-byte chunks so that an HSYNC and/or TIMER
  224                        	; IRQ is not delayed for too long while executing.
  225                        	;
  226                        	
  227                        	read_palettes	.proc
  281                        			.endp
  282                        	
  283               0001     		.ifdef	HUCC
  284    00:E40A             			.alias	_read_palette.3		= read_palettes
  285                        		.endif
  286                        	
  287                        	
  288                        	
  289                        	vce_fade_funcs	.procgroup
  516                        			.endprocgroup
  517                        	
  518                        	
  519                        	
  520                        	; ***************************************************************************
  521                        	; ***************************************************************************
  522                        	;
  523                        	; cross_fade_to - Cross fade a palette in RAM towards a reference palette.
  524                        	;
  525                        	; Args: _al = Number of colors (1..256).
  526                        	; Args: _di = Pointer to faded palette destination in RAM.
  527                        	; Args: _bp = Pointer to reference palette data.
  528                        	; Args:   Y = Bank to map into MPR3 & MPR4, or zero to leave unchanged.
  529                        	;
  530                        	; N.B. Y==0 is only useful if the reference palette data is already mapped!
  531                        	;
  532                        	; N.B. This only updates the palette in RAM by 1 RGB step, so it will need
  533                        	;      to be called 7 times to guarantee that you've reached the target.
  534                        	;
  535                        	
  536                        	cross_fade_to	.proc
  658                        			.endp
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
                             #[3]   "..\..\..\include\hucc\vdc.asm"
   40                        			include	"vdc.asm"		; Useful VDC routines.
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; vdc.asm
    5                        	;
    6                        	; Useful routines for operating the HuC6270 Video Display Controller.
    7                        	;
    8                        	; These should be located in permanently-accessible memory!
    9                        	;
   10                        	; Copyright John Brandwood 2021-2025.
   11                        	;
   12                        	; Distributed under the Boost Software License, Version 1.0.
   13                        	; (See accompanying file LICENSE_1_0.txt or copy at
   14                        	;  http://www.boost.org/LICENSE_1_0.txt)
   15                        	;
   16                        	; ***************************************************************************
   17                        	; ***************************************************************************
   18                        	
   19                        	;
   20                        	; Include dependancies ...
   21                        	;
   22                        	
   23                        			include "common.asm"		; Common helpers.
   24                        			include "vce.asm"		; Useful VCE routines.
   25                        	
   26                        	;
   27                        	; Choose how much to transfer to VRAM in a single chunk, normally 16-bytes.
   28                        	;
   29                        	; The cycle timings for a TIA-to-VRAM depend upon how the VDC's MWR CPU slots
   30                        	; line up to the CPU's writes, and how long the VDC has to halt the CPU while
   31                        	; it fetches the next scanline's sprite data.
   32                        	;
   33                        	; These cycle timings are for 0 sprites (best) and 16 sprites (worst) ...
   34                        	;
   35                        	; 32-byte TIA takes 270..364 cycles in 5MHz, 242..312 cycles in 7MHz. (8.44 cycles-per-byte best-case at 5MHz.)
   36                        	; 24-byte TIA takes 210..298 cycles in 5MHz, 186..256 cycles in 7MHz. (8.75 cycles-per-byte best-case at 5MHz.)
   37                        	; 16-byte TIA takes 142..234 cycles in 5MHz, 128..200 cycles in 7MHz. (8.88 cycles-per-byte best-case at 5MHz.)
   38                        	;
   39                        	; If a user wishes to be able to put RCR interrupts one-line-after-another,
   40                        	; then it is only safe to use 32-byte chunks if there are no TIMER or IRQ2
   41                        	; interrupts ... which is almost-impossible to rely on in library code!
   42                        	;
   43                        	
   44               0000     		.ifndef	VRAM_XFER_SIZE
   46                        		.endif
   47                        	
   48                        	;
   49                        	; Enable BG & SPR layers, and RCR interrupt.
   50                        	;
   51                        	
   52    00:E40A  A9 04      	set_rcron:	lda	#$04			; Enable RCR interrupt.
   53    00:E40C  80 0A      			bra	!+
   54                        	
   55    00:E40E  A9 80      	set_bgon:	lda	#$80			; Enable BG layer.
   56    00:E410  80 06      			bra	!+
   57                        	
   58    00:E412  A9 40      	set_spron:	lda	#$40			; Enable SPR layer.
   59    00:E414  80 02      			bra	!+
   60                        	
   61    00:E416  A9 C0      	set_dspon:	lda	#$C0			; Enable BG & SPR layers.
   62                        	
   63    00:E418  04 F3      	!:		tsb	<vdc_crl		; These take effect when
   64               0001     		.if	SUPPORT_SGX			; the next VBLANK occurs.
   65    00:E41A  04 03      			tsb	<sgx_crl
   66                        		.endif
   67    00:E41C  60         			rts
   68                        	
   69                        	;
   70                        	; Disable BG & SPR layers, and RCR interrupt.
   71                        	;
   72                        	
   73    00:E41D  A9 04      	set_rcroff:	lda	#$04			; Disable RCR interrupt.
   74    00:E41F  80 0A      			bra	!+
   75                        	
   76    00:E421  A9 80      	set_bgoff:	lda	#$80			; Disable BG layer.
   77    00:E423  80 06      			bra	!+
   78                        	
   79    00:E425  A9 40      	set_sproff:	lda	#$40			; Disable SPR layer.
   80    00:E427  80 02      			bra	!+
   81                        	
   82    00:E429  A9 C0      	set_dspoff:	lda	#$C0			; Disable BG & SPR layers.
   83                        	
   84    00:E42B  14 F3      	!:		trb	<vdc_crl		; These take effect when
   85               0001     		.if	SUPPORT_SGX			; the next VBLANK occurs.
   86    00:E42D  14 03      			trb	<sgx_crl
   87                        		.endif
   88    00:E42F  60         			rts
   89                        	
   90                        	
   91                        	
   92                        	; ***************************************************************************
   93                        	; ***************************************************************************
   94                        	;
   95                        	; Put the _di data pointer into the VDC's MARR or MAWR register.
   96                        	;
   97                        	; N.B. Library code relies on this preserving Y!
   98                        	;
   99                        	; Args: _di + 0 = BAT X coordinate.
  100                        	; Args: _di + 1 = BAT Y coordinate.
  101                        	;
  102                        	; Here because it relies on the "vdc_bat_width" that is defined in this file.
  103                        	;
  104                        	
  105               0001     		.if	SUPPORT_SGX
  106    00:E430  A2 10      	sgx_di_xy_marr:	ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  107    00:E432  F0         			db	$F0			; Turn "clx" into a "beq".
  108                        		.endif
  109                        	
  110    00:E433  82         	vdc_di_xy_marr:	clx				; Offset to PCE VDC.
  111                        	
  112    00:E434  62         	set_di_xy_mawr:	cla
  113    00:E435  3C 75 26   			bit	vdc_bat_width, x	; Set by set_bat_size().
  114    00:E438  30 08      			bmi	.w128
  115    00:E43A  70 03      			bvs	.w64
  116    00:E43C  46 F1      	.w32:		lsr.h	<_di
  117    00:E43E  6A         			ror	a
  118    00:E43F  46 F1      	.w64:		lsr.h	<_di
  119    00:E441  6A         			ror	a
  120    00:E442  46 F1      	.w128:		lsr.h	<_di
  121    00:E444  6A         			ror	a
  122    00:E445  05 F0      			ora.l	<_di
  123    00:E447  85 F0      			sta.l	<_di
  124    00:E449  4C 7F E3   			jmp	set_di_to_mawr		; In "common.asm".
  125                        	
  126                        	
  127                        	
  128    14:C81A             	vdc_clear_vram	.procgroup			; These routines share code!
  129                        	
  130                        	; ***************************************************************************
  131                        	; ***************************************************************************
  132                        	;
  133                        	; clear_vram_sgx - Clear all of VRAM in the SGX VDC.
  134                        	; clear_vram_vdc - Clear all of VRAM in the PCE VDC.
  135                        	;
  136                        	; Args: _ax = word value to write to the BAT.
  137                        	; Args: _bl = hi-byte of size of BAT (# of words).
  138                        	;
  139                        	
  140               0001     		.if	SUPPORT_SGX
  141    14:C81A             	clear_vram_sgx	.proc
  142                        	
  143    14:C81A  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  144    14:C81C  F0         			db	$F0			; Turn "clx" into a "beq".
  145                        	
  146    14:C81D             			.ref	clear_vram_vdc		; Need clear_vram_vdc
  147                        			.endp
  148                        		.endif
  149                        	
  150    14:C81D             	clear_vram_vdc	.proc
  151                        	
  152    14:C81D  82         			clx				; Offset to PCE VDC.
  153                        	
  154    14:C81E  20 D3 FD   	clear_vram_x:	call	clear_bat_x		; Clear the BAT.
  155                        	
  156    14:C821  A9 80      			lda	#$80			; Xvert hi-byte of # words
  157    14:C823  38         			sec				; in screen to loop count.
  158    14:C824  E5 FA      			sbc	<_bl
  159    14:C826  4A         			lsr	a
  160                        	
  161                        	;		cly				; Clear the rest of VRAM.
  162    14:C827  9E 02 02   			stz	VDC_DL, x
  163    14:C82A  9E 03 02   	.clr_loop:	stz	VDC_DH, x		; Seperate writes to minimize
  164    14:C82D  88         			dey				; VDC MWR penalty.
  165    14:C82E  9E 03 02   			stz	VDC_DH, x
  166    14:C831  D0 F7      			bne	.clr_loop
  167    14:C833  3A         			dec	a
  168    14:C834  D0 F4      			bne	.clr_loop
  169                        	
  170                        			leave				; All done, phew!
         14:C836  4C EF FF   			jmp	leave_proc
  171                        	
  172                        			.endp
  173                        	
  174                        	
  175                        	
  176                        	; ***************************************************************************
  177                        	; ***************************************************************************
  178                        	;
  179                        	; clear_bat_sgx - Clear the BAT in the SGX VDC.
  180                        	; clear_bat_vdc - Clear the BAT in the PCE VDC.
  181                        	;
  182                        	; Args: _ax = word value to write to the BAT.
  183                        	; Args: _bl = hi-byte of size of BAT (# of words).
  184                        	;
  185                        	
  186               0001     		.if	SUPPORT_SGX
  187                        	clear_bat_sgx	.proc
  193                        			.endp
  194                        		.endif
  195                        	
  196    14:C839             	clear_bat_vdc	.proc
  197                        	
  198    14:C839  82         			clx				; Offset to PCE VDC.
  199                        	
  200    14:C83A             			.ref	clear_bat_x		; Need clear_bat_x
  201                        			.endp
  202                        	
  203    14:C83A             	clear_bat_x	.proc				; HuCC uses this entry point.
  204                        	
  205    14:C83A  64 F0      			stz	<_di + 0		; Set VDC or SGX destination
  206    14:C83C  64 F1      			stz	<_di + 1		; address.
  207    14:C83E  20 7F E3   			jsr	set_di_to_mawr
  208                        	
  209    14:C841  A5 FA      			lda	<_bl			; Xvert hi-byte of # words
  210    14:C843  4A         			lsr	a			; in screen to loop count.
  211                        	
  212    14:C844  C2         			cly
  213    14:C845  48         	.bat_loop:	pha
  214    14:C846  A5 F8      			lda	<_ax + 0
  215    14:C848  9D 02 02   			sta	VDC_DL, x
  216    14:C84B  A5 F9      			lda	<_ax + 1
  217    14:C84D  9D 03 02   	.bat_pair:	sta	VDC_DH, x		; Seperate writes to minimize
  218    14:C850  88         			dey				; VDC MWR penalty.
  219    14:C851  9D 03 02   			sta	VDC_DH, x
  220    14:C854  D0 F7      			bne	.bat_pair
  221                        	
  222    14:C856  68         			pla
  223    14:C857  3A         			dec	a
  224    14:C858  D0 EB      			bne	.bat_loop
  225                        	
  226                        			leave
         14:C85A  4C EF FF   			jmp	leave_proc
  227                        	
  228                        			.endp
  229                        	
  230                        			.endprocgroup
  231                        	
  232                        	;
  233                        	;
  234                        	;
  235                        	
  236    14:C107             	vdc_set_mode	.procgroup			; These routines share code!
  237                        	
  238                        	; ***************************************************************************
  239                        	; ***************************************************************************
  240                        	;
  241                        	; set_mode_sgx - Set video hardware registers from a data table.
  242                        	; set_mode_vdc - Set video hardware registers from a data table.
  243                        	;
  244                        	; Args: _bp, Y = _farptr to data table mapped into MPR3 & MPR4.
  245                        	;
  246                        	
  247               0001     		.if	SUPPORT_SGX
  248    14:C107             	set_mode_sgx	.proc
  249                        	
  250    14:C107  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  251    14:C109  F0         			db	$F0			; Turn "clx" into a "beq".
  252                        	
  253                        			.endp
  254                        		.endif
  255                        	
  256    14:C10A             	set_mode_vdc	.proc
  257                        	
  258    14:C10A  82         			clx				; Offset to PCE VDC.
  259                        	
  260    14:C10B  F7 F8      			smb7	<_al			; Signal no set_bat_size() yet.
  261                        	
  262    14:C10D  43 08      			tma3				; Preserve MPR3.
  263    14:C10F  48         			pha
  264    14:C110  43 10      			tma4				; Preserve MPR4.
  265    14:C112  48         			pha
  266                        	
  267    14:C113  20 3B E3   			jsr	map_bp_to_mpr34		; Map data to MPR3 & MPR4.
  268                        	
  269    14:C116  08         			php				; Disable interrupts.
  270    14:C117  78         			sei
  271                        	
  272    14:C118  C2         			cly				; Table size is < 256 bytes.
  273                        	
  274    14:C119  B1 EC      	.loop:		lda	[_bp], y		; Get the register #, +ve for
  275    14:C11B  F0 46      			beq	.done			; VDC, -128 for VCE_CR.
  276    14:C11D  10 0C      			bpl	.set_vdc_reg
  277                        	
  278                        			; Set the VCE_CR register.
  279                        	
  280    14:C11F  C8         	.set_vce_cr:	iny
  281                        	
  282    14:C120  B1 EC      			lda	[_bp], y		; Get lo-byte of register.
  283    14:C122  C8         			iny
  284    14:C123  8D 44 22   			sta	vce_cr			; No SGX shadow for this!
  285    14:C126  8D 00 04   			sta	VCE_CR			; Set the VCE clock speed.
  286    14:C129  80 EE      			bra	.loop			; Do not set VDC_MWR reg bits!
  287                        	
  288                        			; Set a VDC register.
  289                        	
  290    14:C12B  C8         	.set_vdc_reg:	iny
  291    14:C12C  9D 00 02   			sta	VDC_AR, x		; Set which VDC register.
  292                        	
  293    14:C12F  C9 05      			cmp	#VDC_CR			; CS if VDC_CR or higher.
  294    14:C131  F0 14      			beq	.skip_cc
  295    14:C133  18         			clc				; CC if not VDC_CR.
  296                        	
  297    14:C134  49 09      			eor	#VDC_MWR		; Check if this the VDC_MWR
  298    14:C136  D0 0F      			bne	.skip_cc		; without changing CC.
  299                        	
  300    14:C138  B1 EC      			lda	[_bp], y		; Remember the BAT size so that
  301    14:C13A  8D 42 22   			sta	vdc_mwr			; set_bat_size() can be called.
  302    14:C13D  4A         			lsr	a
  303    14:C13E  4A         			lsr	a
  304    14:C13F  4A         			lsr	a
  305    14:C140  4A         			lsr	a
  306    14:C141  85 F8      			sta	<_al
  307    14:C143  C8         			iny
  308    14:C144  C8         			iny
  309    14:C145  80 D2      			bra	.loop
  310                        	
  311    14:C147  B1 EC      	.skip_cc:	lda	[_bp], y		; Get lo-byte of register.
  312    14:C149  C8         			iny
  313    14:C14A  90 08      			bcc	.not_vdc_cr
  314                        	
  315               0001     		.if	SUPPORT_SGX
  316    14:C14C  E0 00      			cpx	#0			; Writing to the VDC or SGX?
  317    14:C14E  F0 02      			beq	.save_crl
  318    14:C150  29 F7      			and	#$F7			; We only need 1 vblank IRQ!
  319                        		.endif
  320                        	
  321    14:C152  95 F3      	.save_crl:	sta	<vdc_crl, x		; Save VDC_CR shadow register.
  322                        	
  323    14:C154  9D 02 02   	.not_vdc_cr:	sta	VDC_DL, x		; Write to VDC.
  324                        	
  325    14:C157  B1 EC      			lda	[_bp], y		; Get hi-byte of register.
  326    14:C159  C8         			iny
  327    14:C15A  9D 03 02   			sta	VDC_DH, x
  328    14:C15D  90 BA      			bcc	.loop			; Next register, please!
  329                        	
  330    14:C15F  95 F4      			sta	<vdc_crh, x		; Save VDC_CR shadow register.
  331                        	
  332    14:C161  80 B6      			bra	.loop			; Next register, please!
  333                        	
  334                        			; All registers set!
  335                        	
  336    14:C163  A9 02      	.done:		lda	#VDC_VWR		; Leave with VDC_VWR set.
  337    14:C165  95 F7      			sta	<vdc_reg, x
  338                        	;		lda	<vdc_reg, x		; Restore previous VDC_AR from
  339    14:C167  9D 00 02   			sta	VDC_AR, x		; the shadow variable.
  340                        	
  341    14:C16A  28         			plp				; Restore interrupts.
  342                        	
  343    14:C16B  68         			pla				; Restore MPR4.
  344    14:C16C  53 10      			tam4
  345    14:C16E  68         			pla				; Restore MPR3.
  346    14:C16F  53 08      			tam3
  347                        	
  348    14:C171  7F F8 07   			bbr7	<_al, set_bat_size	; Update if BAT size changed.
  349                        	
  350                        			leave				; All done, phew!
         14:C174  4C EF FF   			jmp	leave_proc
  351                        	
  352    14:C177             			.ref	set_bat_vdc
  353                        			.endp
  354                        	
  355                        	
  356                        	
  357                        	; ***************************************************************************
  358                        	; ***************************************************************************
  359                        	;
  360                        	; set_bat_sgx - Change the SGX BAT size and initialize variables based on it.
  361                        	; set_bat_vdc - Change the PCE BAT size and initialize variables based on it.
  362                        	;
  363                        	; Args: _al = new size (0-7).
  364                        	;
  365                        	; (VDC_MWR_32x32  >> 4) or in HuCC, SCR_SIZE_32x32.
  366                        	; (VDC_MWR_32x64  >> 4) or in HuCC, SCR_SIZE_32x64.
  367                        	; (VDC_MWR_64x32  >> 4) or in HuCC, SCR_SIZE_64x32.
  368                        	; (VDC_MWR_64x64  >> 4) or in HuCC, SCR_SIZE_64x64.
  369                        	; (VDC_MWR_128x32 >> 4) or in HuCC, SCR_SIZE_128x32.
  370                        	; (VDC_MWR_128x64 >> 4) or in HuCC, SCR_SIZE_128x64.
  371                        	;
  372                        	
  373               0001     		.if	SUPPORT_SGX
  374    14:C177             	set_bat_sgx	.proc
  375                        	
  376    14:C177  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  377    14:C179  F0         			db	$F0			; Turn "clx" into a "beq".
  378                        	
  379    14:C17A             			.ref	set_bat_vdc
  380                        			.endp
  381                        		.endif
  382                        	
  383    14:C17A             	set_bat_vdc	.proc
  384                        	
  385    14:C17A  82         			clx				; Offset to PCE VDC.
  386                        	
  387    14:C17B  A5 F8      	set_bat_size:	lda	<_al			; Get BAT size value.
  388    14:C17D  29 07      			and	#7			; Sanitize screen size value.
  389    14:C17F  A8         			tay
  390    14:C180  0A         			asl	a			; Put it in bits 4..6.
  391    14:C181  0A         			asl	a
  392    14:C182  0A         			asl	a
  393    14:C183  0A         			asl	a
  394    14:C184  85 00      			sta	<__temp
  395                        	
  396    14:C186  B9 C6 C1   			lda	.width, y
  397    14:C189  9D 75 26   			sta	vdc_bat_width, x
  398    14:C18C  3A         			dec	a
  399    14:C18D  9D 77 26   			sta	vdc_bat_x_mask, x
  400                        	
  401    14:C190  B9 CE C1   			lda	.height, y
  402    14:C193  9D 76 26   			sta	vdc_bat_height, x
  403    14:C196  3A         			dec	a
  404    14:C197  9D 78 26   			sta	vdc_bat_y_mask, x
  405                        	
  406    14:C19A  B9 D6 C1   			lda	.limit, y
  407    14:C19D  9D 79 26   			sta	vdc_bat_limit, x
  408                        	
  409    14:C1A0  B9 DE C1   			lda	.increment, y		; Put the VRAM increment for a
  410    14:C1A3  95 F4      			sta	<vdc_crh, x		; line into vdc_crh for later.
  411                        	
  412    14:C1A5  08         			php
  413    14:C1A6  78         			sei
  414                        	
  415    14:C1A7  A9 09      			lda	#VDC_MWR
  416    14:C1A9  9D 00 02   			sta	VDC_AR, x
  417                        	
  418    14:C1AC  AD 42 22   			lda	vdc_mwr			; Get the MWR access width bits.
  419    14:C1AF  29 8F      			and	#%10001111
  420    14:C1B1  05 00      			ora	<__temp
  421               0001     		.if	SUPPORT_SGX
  422    14:C1B3  E0 00      			cpx	#PCE_VDC_OFFSET		; This has no SGX shadow!
  423    14:C1B5  D0 03      			bne	!+
  424                        		.endif
  425    14:C1B7  8D 42 22   			sta	vdc_mwr
  426    14:C1BA  9D 02 02   	!:		sta	VDC_DL, x
  427                        	
  428    14:C1BD  B5 F7      			lda	<vdc_reg, x		; Restore previous VDC_AR from
  429    14:C1BF  9D 00 02   			sta	VDC_AR, x		; the shadow variable.
  430                        	
  431    14:C1C2  28         			plp
  432                        	
  433                        			leave
         14:C1C3  4C EF FF   			jmp	leave_proc
  434                        	
  435    14:C1C6  20 40 80 80	.width:		db	$20,$40,$80,$80,$20,$40,$80,$80
         14:C1CA  20 40 80 80 
  436    14:C1CE  20 20 20 20	.height:	db	$20,$20,$20,$20,$40,$40,$40,$40
         14:C1D2  40 40 40 40 
  437    14:C1D6  03 07 0F 0F	.limit:		db	$03,$07,$0F,$0F,$07,$0F,$1F,$1F
         14:C1DA  07 0F 1F 1F 
  438    14:C1DE  08 10 18 18	.increment	db	$08,$10,$18,$18,$08,$10,$18,$18
         14:C1E2  08 10 18 18 
  439                        	
  440               2675     			.bss
  441                        	
  442                        	; **************
  443                        	; 16-bytes of VDC BAT information.
  444                        	;
  445                        	; N.B. MUST be 16-bytes before the SGX versions to use PCE_VDC_OFFSET.
  446                        	;
  447                        	; N.B. Declared inside this .proc so that they can be stripped if unused.
  448                        	
  449                        	; Initialized by set_bat_vdc.
  450    F8:2675             	vdc_bat_width:	ds	1	; $20, $40, $80
  451    F8:2676             	vdc_bat_height:	ds	1	; $20, $40
  452    F8:2677             	vdc_bat_x_mask:	ds	1	; $1F, $3F, $7F
  453    F8:2678             	vdc_bat_y_mask:	ds	1	; $1F, $3F
  454    F8:2679             	vdc_bat_limit:	ds	1	; (>$03FF), (>$07FF), (>$0FFF), (>$1FFF)
  455                        	
  456                        	; From blkmap.asm just to avoid wasting .bss space with padding.
  457    F8:267A             	vdc_map_draw_w:	ds	1	; (SCR_WIDTH / 8) + 1
  458    F8:267B             	vdc_map_draw_h:	ds	1	; (SCR_HEIGHT / 8) + 1
  459    F8:267C             	vdc_map_line_w:	ds	1	; Line width of map data in tiles.
  460    F8:267D             	vdc_map_scrn_w:	ds	1	; Line width of map data in screens.
  461    F8:267E             	vdc_map_pxl_x:	ds	2	; Current top-left X in pixels.
  462    F8:2680             	vdc_map_pxl_y:	ds	2	; Current top-left Y in pixels.
  463    F8:2682             	vdc_map_option:	ds	1	; Flags to disable BAT alignment.
  464                        	
  465                        	; From hucc-old-spr.asm just to avoid wasting .bss space with padding.
  466    F8:2683             	spr_max:	ds	1
  467    F8:2684             	spr_clr:	ds	1
  468                        	
  469               0001     		.if	SUPPORT_SGX
  470                        	
  471                        	; **************
  472                        	; 16-bytes of SGX BAT information.
  473                        	;
  474                        	; N.B. MUST be 16-bytes after the VDC versions to use SGX_VDC_OFFSET.
  475                        	;
  476                        	; N.B. Declared inside this .proc so that they can be stripped if unused.
  477                        	
  478                        	; Initialized by set_bat_sgx.
  479    F8:2685             	sgx_bat_width:	ds	1	; $20, $40, $80
  480    F8:2686             	sgx_bat_height:	ds	1	; $20, $40
  481    F8:2687             	sgx_bat_x_mask:	ds	1	; $1F, $3F, $7F
  482    F8:2688             	sgx_bat_y_mask:	ds	1	; $1F, $3F
  483    F8:2689             	sgx_bat_limit:	ds	1	; (>$03FF), (>$07FF), (>$0FFF), (>$1FFF)
  484                        	
  485                        	; From blkmap.asm just to avoid wasting .bss space with padding.
  486    F8:268A             	sgx_map_draw_w:	ds	1	; (SCR_WIDTH / 8) + 1
  487    F8:268B             	sgx_map_draw_h:	ds	1	; (SCR_HEIGHT / 8) + 1
  488    F8:268C             	sgx_map_line_w:	ds	1	; Line width of map data in tiles.
  489    F8:268D             	sgx_map_scrn_w:	ds	1	; Line width of map data in screens.
  490    F8:268E             	sgx_map_pxl_x:	ds	2	; Current top-left X in pixels.
  491    F8:2690             	sgx_map_pxl_y:	ds	2	; Current top-left Y in pixels.
  492    F8:2692             	sgx_map_option:	ds	1	; Flags to disable BAT alignment.
  493                        	
  494                        	; From hucc-old-spr.asm just to avoid wasting .bss space with padding.
  495    F8:2693             	sgx_spr_max:	ds	1
  496    F8:2694             	sgx_spr_clr:	ds	1
  497                        	
  498                        		.endif
  499                        	
  500               C1E6     			.code
  501                        	
  502                        			.endp
  503                        	
  504                        			.endprocgroup
  505                        	
  506                        	
  507                        	
  508                        	; ***************************************************************************
  509                        	; ***************************************************************************
  510                        	;
  511                        	; sgx_detect - Detect whether we're running on a SuperGrafx (and init VPC).
  512                        	;
  513                        	; Returns: X,C-flag, and "sgx_detected" = NZ, CS if detected.
  514                        	;
  515                        	; ***************************************************************************
  516                        	;
  517                        	; https://web.archive.org/web/20161129055659/http://cgfm2.emuviews.com/txt/sgxtech.txt
  518                        	;
  519                        	; ***************************************************************************
  520                        	;
  521                        	; HuC6202 VIDEO PRIORITY CONTROLLER (huge thanks to Charles MacDonald!)
  522                        	;
  523                        	; The VPC has no access to sprite priority data, it can only sort pixels
  524                        	; based upon which VDC and whether they are "sprite" or "background".
  525                        	;
  526                        	; This can sometimes lead to unexpected results with low-priority sprites.
  527                        	;
  528                        	; VPC registers $0008 and $0009 make up four 4-bit values that define the
  529                        	; enabled layers and priority setting for the four possible window areas.
  530                        	;
  531                        	; Bits 3-0 of $0008 are for the region where Window 1 and 2 overlap
  532                        	; Bits 7-4 of $0008 are for the region occupied by only Window 2
  533                        	; Bits 3-0 of $0009 are for the region occupied by only Window 1
  534                        	; Bits 7-4 of $0009 are for the region where no Window is present
  535                        	;
  536                        	;  Each 4-bit value has the same format:
  537                        	;
  538                        	;  Bit 0: VDC #1 graphics are 0=disabled, 1=enabled
  539                        	;  Bit 1: VDC #2 graphics are 0=disabled, 1=enabled
  540                        	;  Bit 2: Bit 0 of priority setting
  541                        	;  Bit 3: Bit 1 of priority setting
  542                        	;
  543                        	;   Priority Setting 0b00xx: (useful when VDC #1 is a fullscreen HUD)
  544                        	;
  545                        	;    FRONT
  546                        	;     SP1 = VDC #1 (pce) sprite pixels
  547                        	;     BG1 = VDC #1 (pce) background pixels
  548                        	;     SP2 = VDC #2 (sgx) sprite pixels
  549                        	;     BG2 = VDC #2 (sgx) background pixels
  550                        	;    BACK
  551                        	;
  552                        	;   Priority Setting 0b01xx: (useful for parallax backgrounds)
  553                        	;
  554                        	;    FRONT
  555                        	;     SP1 = VDC #1 (pce) sprite pixels
  556                        	;     SP2 = VDC #2 (sgx) sprite pixels
  557                        	;     BG1 = VDC #1 (pce) background pixels
  558                        	;     BG2 = VDC #2 (sgx) background pixels
  559                        	;    BACK
  560                        	;
  561                        	;   Priority Setting 0b10xx: (only useful for special effects)
  562                        	;
  563                        	;    FRONT
  564                        	;     BG1 = VDC #1 (pce) background pixels (transparent where sprites)
  565                        	;     BG2 = VDC #2 (sgx) background pixels
  566                        	;     SP1 = VDC #1 (pce) sprite pixels
  567                        	;     SP2 = VDC #2 (sgx) sprite pixels
  568                        	;    BACK
  569                        	
  570               0001     		.if	SUPPORT_SGX
  571               0001     		.if	1
  572    14:C85D             	sgx_detect	.proc
  573                        	
  574    14:C85D  A0 7F      			ldy	#$7F			; Use VRAM address $7F7F
  575    14:C85F  84 F0      			sty.l	<_di			; because it won't cause
  576    14:C861  84 F1      			sty.h	<_di			; a screen glitch.
  577                        	
  578    14:C863  20 7B E3   			jsr	sgx_di_to_mawr		; Write $0001 to SGX VRAM.
  579    14:C866  A0 01      			ldy	#$01
  580    14:C868  8C 12 02   			sty	SGX_DL
  581    14:C86B  9C 13 02   			stz	SGX_DH
  582                        	
  583    14:C86E  20 7E E3   			jsr	vdc_di_to_mawr		; Write $0000 to VDC VRAM.
  584    14:C871  9C 02 02   			stz	VDC_DL
  585    14:C874  9C 03 02   			stz	VDC_DH
  586                        	
  587    14:C877  20 6E E3   			jsr	sgx_di_to_marr		; Check value in SGX VRAM.
  588    14:C87A  AC 12 02   			ldy	SGX_DL			; $01 if found, $00 if not.
  589    14:C87D  8C E8 22   			sty	sgx_detected
  590    14:C880  F0 10      			beq	!+			; Skip the rest if not SGX.
  591                        	
  592    14:C882  20 7B E3   			jsr	sgx_di_to_mawr		; Write $0000 to SGX VRAM
  593    14:C885  9C 12 02   			stz	SGX_DL			; to clean VRAM contents.
  594    14:C888  9C 13 02   			stz	SGX_DH
  595                        	
  596    14:C88B  73 98 C8 08			tii	.vpc_mode, VPC_CR, 8	; Initialize the HuC6202 VPC.
         14:C88F  02 08 00    
  597                        	
  598    14:C892  98         	!:		tya
  599    14:C893  AA         			tax				; "leave" copies X back to A.
  600    14:C894  4A         			lsr	a			; Also CC if PCE, CS if SGX.
  601                        	
  602                        			leave				; All done, phew!
         14:C895  4C EF FF   			jmp	leave_proc
  603                        		.else
  618                        		.endif
  619                        	
  620               0000     		.ifndef	SGX_PARALLAX
  622                        		.endif
  623                        	
  624               0001     		.if	SGX_PARALLAX
  625    14:C898  00 70      	.vpc_mode:	dw	$7000			; Use SGX as a parallax layer
  626    14:C89A  00 00      			dw	$0000			; behind a VDC background.
  627    14:C89C  00 00      			dw	$0000
  628    14:C89E  00 00      			dw	$0000
  629                        		.else
  634                        		.endif	SGX_PARALLAX
  635                        	
  636                        			.endp
  637                        	
  638               0000     		.ifndef	CORE_VERSION			; CORE has this in the kernel.
  642                        		.endif	CORE_VERSION
  643                        	
  644                        		.endif	SUPPORT_SGX
  645                        	
  646                        	
  647                        	
  648                        	
  649                        	vdc_copy_to	.procgroup			; These routines share code!
  799                        			.endprocgroup
  800                        	
  801                        	
  802                        	
  803                        	; ***************************************************************************
  804                        	; ***************************************************************************
  805                        	;
  806                        	; init_240x208 - An example of initializing screen and VRAM.
  807                        	;
  808                        	; This can be used as-is, or copied to your own program and modified.
  809                        	;
  810                        	
  811                        	init_240x208	.proc
  892                        			.endp
  893                        	
  894                        	
  895                        	
  896                        	; ***************************************************************************
  897                        	; ***************************************************************************
  898                        	;
  899                        	; init_256x224 - An example of initializing screen and VRAM.
  900                        	;
  901                        	; This can be used as-is, or copied to your own program and modified.
  902                        	;
  903                        	
  904                        	init_256x224	.proc
  985                        			.endp
  986                        	
  987                        	
  988                        	
  989                        	; ***************************************************************************
  990                        	; ***************************************************************************
  991                        	;
  992                        	; init_352x224 - An example of initializing screen and VRAM.
  993                        	;
  994                        	; This can be used as-is, or copied to your own program and modified.
  995                        	;
  996                        	
  997                        	init_352x224	.proc
 1078                        			.endp
 1079                        	
 1080                        	
 1081                        	
 1082                        	; ***************************************************************************
 1083                        	; ***************************************************************************
 1084                        	;
 1085                        	; init_512x224 - An example of initializing screen and VRAM.
 1086                        	;
 1087                        	; This can be used as-is, or copied to your own program and modified.
 1088                        	;
 1089                        	
 1090                        	init_512x224	.proc
 1171                        			.endp
 1172                        	
 1173                        	
 1174                        	
 1175                        	; ***************************************************************************
 1176                        	; ***************************************************************************
 1177                        	;
 1178                        	; init_320x208 - An example of initializing screen and VRAM.
 1179                        	;
 1180                        	; This can be used as-is, or copied to your own program and modified.
 1181                        	;
 1182                        	; This resolution is rarely-seen, but it has no overscan, so it has a use.
 1183                        	;
 1184                        	
 1185                        	init_320x208	.proc
 1266                        			.endp
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   41                        	
                             #[3]   "..\..\..\include\hucc\hucc-math.asm"
   42                        			include	"hucc-math.asm"		; HuCC multiply and divide.
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-math.asm
    5                        	;
    6                        	; Basic (i.e. very slow) 8-bit and 16-bit multiply and divide routines.
    7                        	;
    8                        	; Copyright John Brandwood 2021-2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; This is basically a set of SDCC-compatible routines, but using Y:A for the
   18                        	; primary register instead of X:A.
   19                        	;
   20                        	; Using Y:A makes the routines instantly usable with HuCC, and it also makes
   21                        	; them usable with SDCC with just an "sxy" before and after the call.
   22                        	;
   23                        	; ***************************************************************************
   24                        	; ***************************************************************************
   25                        	
   26               E44C     			.code
   27                        	
   28               2000     	multiplier	=	__temp
   29               2094     	multiplicand	=	___SDCC_m6502_ret0
   30               2094     	product		=	multiplicand
   31                        	
   32               2000     	__mulint_PARM_2	=	multiplier
   33                        	
   34               2000     	divisor		=	__temp
   35               2094     	dividend	=	___SDCC_m6502_ret0
   36               2094     	quotient	=	dividend
   37               2096     	remainder	=	___SDCC_m6502_ret2
   38                        	
   39               2000     	__moduint_PARM_2 =	divisor
   40               2000     	__modsint_PARM_2 =	divisor
   41               2000     	__divuint_PARM_2 =	divisor
   42               2000     	__divsint_PARM_2 =	divisor
   43                        	
   44                        	
   45                        	
   46                        	; ***************************************************************************
   47                        	; int
   48                        	; _mulint (int a, int b)
   49                        	;
   50                        	; 1st parameter in Y:A (multiplicand)
   51                        	; 2nd parameter in __mulint_PARM_2 (multiplier)
   52                        	; result in Y:A
   53                        	;
   54                        	; N.B. signed and unsigned multiply only differ in the top 16 of the 32bits!
   55                        	
   56    00:E44C  85 94      	__mulint:	sta	<multiplicand + 0
   57    00:E44E  84 95      			sty	<multiplicand + 1
   58                        	
   59    00:E450  A2 10      			ldx	#16			; Loop 16 times.
   60                        	
   61    00:E452  46 95      			lsr	<multiplicand + 1	; Divide multiplicand by 2
   62    00:E454  66 94      			ror	<multiplicand + 0	; and clear the 16th bit.
   63                        	
   64    00:E456  62         			cla				; Clear top word of product.
   65    00:E457  85 96      			sta.l	<multiplicand + 2
   66    00:E459  90 0B      			bcc	.rotate
   67                        	
   68    00:E45B  A8         	.add:		tay				; Add the 16-bit multiplier to
   69    00:E45C  18         			clc				; top 16-bits of the product.
   70    00:E45D  A5 96      			lda	<multiplicand + 2
   71    00:E45F  65 00      			adc.l	<multiplier
   72    00:E461  85 96      			sta	<multiplicand + 2
   73    00:E463  98         			tya
   74    00:E464  65 01      			adc.h	<multiplier
   75                        	
   76    00:E466  6A         	.rotate:	ror	a			; Rotate product into the top
   77    00:E467  66 96      			ror	<multiplicand + 2	; bits of the multiplicand ...
   78    00:E469  66 95      			ror	<multiplicand + 1	; and divide multiplicand by 2.
   79    00:E46B  66 94      			ror	<multiplicand + 0
   80                        	
   81    00:E46D  CA         			dex
   82    00:E46E  B0 EB      			bcs	.add			; Add multiplier to top word?
   83    00:E470  D0 F4      			bne	.rotate			; Completed 16 bits?
   84                        	
   85    00:E472  85 97      			sta	<multiplicand + 3	; Save top byte of product.
   86                        	
   87    00:E474  A5 94      			lda.l	<multiplicand		; Return the bottom 16-bits of
   88    00:E476  A4 95      			ldy.h	<multiplicand		; the 32-bit product.
   89                        	
   90    00:E478  60         			rts
   91                        	
   92                        	
   93                        	
   94                        	; ***************************************************************************
   95                        	; unsigned int
   96                        	; _divuint (unsigned int x, unsigned int y)
   97                        	;
   98                        	; 1st parameter in Y:A (unsigned dividend)
   99                        	; 2nd parameter in __divuint_PARM_2 (unsigned divisor)
  100                        	; result in Y:A
  101                        	
  102    00:E479  20 81 E4   	__divuint:	jsr	__moduint		; Call the basic uint division.
  103                        	
  104    00:E47C  A5 94      			lda.l	<quotient		; Then get the result from where
  105    00:E47E  A4 95      			ldy.h	<quotient		; it was calculated.
  106    00:E480  60         			rts
  107                        	
  108                        	
  109                        	
  110                        	; ***************************************************************************
  111                        	; unsigned int
  112                        	; _moduint (unsigned int x, unsigned int y)
  113                        	;
  114                        	; 1st parameter in Y:A (unsigned dividend)
  115                        	; 2nd parameter in __moduint_PARM_2 (unsigned divisor)
  116                        	; result in Y:A
  117                        	;
  118                        	; If the dividend has more bits than the divisor, then we need to check the
  119                        	; 17th bit of the remainder!
  120                        	
  121               0000     		.if	0
  176                        		.else
  177                        	
  178    00:E481  85 94      	__moduint:	sta.l	<dividend		; 1st SDCC parameter in Y:A.
  179    00:E483  84 95      			sty.h	<dividend
  180                        	
  181    00:E485  A5 00      	divmoduint:	lda.l	<divisor		; Check for a divide-by-zero.
  182    00:E487  05 01      			ora.h	<divisor
  183    00:E489  F0 FE      	.zero:		beq	.zero
  184                        	
  185    00:E48B  A2 11      			ldx	#16 + 1
  186                        	
  187    00:E48D  C2         			cly				; Clear remainder.
  188    00:E48E  84 97      			sty.h	<remainder
  189                        	
  190    00:E490  98         	.skip:		tya				; Restore remainder lo-byte.
  191                        	
  192    00:E491  26 94      	.loop:		rol.l	<dividend		; Quotient bit -> dividend LSB.
  193    00:E493  26 95      			rol.h	<dividend		; Rotate dividend, MSB -> C.
  194                        	
  195    00:E495  CA         			dex
  196    00:E496  F0 14      			beq	.finished
  197                        	
  198    00:E498  2A         			rol	a			; Rotate C into remainder.
  199    00:E499  26 97      			rol.h	<remainder
  200                        	;		php				; Preserve remainder 17th bit.
  201                        	
  202    00:E49B  A8         			tay				; Preserve remainder lo-byte.
  203                        	
  204    00:E49C  C5 00      			cmp.l	<divisor		; Test divisor.
  205    00:E49E  A5 97      			lda.h	<remainder
  206    00:E4A0  E5 01      			sbc.h	<divisor
  207    00:E4A2  90 EC      			bcc	.skip			; CC if divisor > remainder.
  208                        	
  209                        	;		cmp.l	<divisor		; If the dividend has more bits
  210                        	;		lda.h	<remainder		; than the divisor then we need
  211                        	;		sbc.h	<divisor		; to check the remainder hi-bit.
  212                        	;		bcs	.subtract		; CS if divisor <= remainder.
  213                        	;		plp				; Restore remainder 17th bit.
  214                        	;		bcc	.skip			; CC if divisor > remainder.
  215                        	;		db	$90			; Turn "plp" into "bcc" to skip.
  216                        	;.subtract:	plp				; Discard remainder 17th bit.
  217                        	;		sec
  218                        	
  219    00:E4A4  85 97      			sta.h	<remainder		; Subtract divisor.
  220    00:E4A6  98         			tya
  221    00:E4A7  E5 00      			sbc.l	<divisor
  222    00:E4A9  38         			sec				
  223    00:E4AA  80 E5      			bra	.loop
  224                        	
  225    00:E4AC  A4 97      	.finished:	ldy.h	<remainder		; Get the remainder hi-byte.
  226                        	
  227    00:E4AE  60         			rts
  228                        	
  229                        		.endif
  230                        	
  231                        	
  232                        	
  233                        	; ***************************************************************************
  234                        	; int
  235                        	; _divsint (int x, int y)
  236                        	;
  237                        	; 1st parameter in Y:A (signed dividend)
  238                        	; 2nd parameter in __divsint_PARM_2 (signed divisor)
  239                        	; result in Y:A
  240                        	
  241    00:E4AF  20 B7 E4   	__divsint:	jsr	__modsint		; Call the basic sint division.
  242                        	
  243    00:E4B2  A5 94      			lda.l	<quotient		; Then get the result from where
  244    00:E4B4  A4 95      			ldy.h	<quotient		; it was calculated.
  245    00:E4B6  60         			rts
  246                        	
  247                        	
  248                        	
  249                        	; ***************************************************************************
  250                        	; int
  251                        	; _modsint (int x, int y)
  252                        	;
  253                        	; 1st parameter in Y:A (signed dividend)
  254                        	; 2nd parameter in __modsint_PARM_2 (signed divisor)
  255                        	; result in Y:A
  256                        	
  257    00:E4B7  84 95      	__modsint:	sty.h	<dividend
  258                        	
  259    00:E4B9  C0 80      			cpy	#$80			; Remainder -ve if dividend
  260    00:E4BB  08         			php				; was -ve.
  261    00:E4BC  90 03      			bcc	!+
  262    00:E4BE  20 0E E5   			jsr	neg_yacs		; Negate the dividend.
  263                        	
  264    00:E4C1  85 94      	!:		sta.l	<dividend		; Store the dividend.
  265    00:E4C3  A5 95      			lda.h	<dividend
  266    00:E4C5  84 95      			sty.h	<dividend
  267                        	
  268    00:E4C7  45 01      			eor.h	<divisor		; Quotient is -ve if divisor
  269    00:E4C9  08         			php				; and dividend signs differ.
  270                        	
  271    00:E4CA  A5 01      			lda.h	<divisor		; Is the divisor -ve?
  272    00:E4CC  10 0B      			bpl	!+
  273                        	
  274    00:E4CE  38         			sec				; Negate the divisor.
  275    00:E4CF  62         			cla
  276    00:E4D0  E5 00      			sbc.l	<divisor
  277    00:E4D2  85 00      			sta.l	<divisor
  278    00:E4D4  62         			cla
  279    00:E4D5  E5 01      			sbc.h	<divisor
  280    00:E4D7  85 01      			sta.h	<divisor
  281                        	
  282    00:E4D9  20 85 E4   	!:		jsr	divmoduint		; Do the unsigned division.
  283                        	
  284    00:E4DC  28         	.result:	plp				; Should the quotient be -ve?
  285    00:E4DD  10 0D      			bpl	.remainder
  286                        	
  287    00:E4DF  AA         			tax				; Preserve remainder lo-byte.
  288                        	
  289    00:E4E0  38         			sec				; Then negate the quotient.
  290    00:E4E1  62         			cla
  291    00:E4E2  E5 94      			sbc.l	<dividend
  292    00:E4E4  85 94      			sta.l	<dividend
  293    00:E4E6  62         			cla
  294    00:E4E7  E5 95      			sbc.h	<dividend
  295    00:E4E9  85 95      			sta.h	<dividend
  296                        	
  297    00:E4EB  8A         			txa				; Restore remainder lo-byte.
  298                        	
  299    00:E4EC  28         	.remainder:	plp				; Was the dividend -ve?
  300    00:E4ED  B0 1F      			bcs	neg_yacs		; Then negate the remainder.
  301    00:E4EF  60         			rts
  302                        	
  303                        	
  304                        	
  305                        	; ***************************************************************************
  306                        	; unsigned int
  307                        	; _muluchar (unsigned char x, unsigned char y)
  308                        	;
  309                        	; 1st parameter in A (unsigned multiplicand)
  310                        	; 2nd parameter in Y (unsigned multiplier)
  311                        	; result in Y:A
  312                        	
  313    00:E4F0  84 00      	__muluchar:	sty	<multiplier
  314                        	
  315    00:E4F2  A0 08      	muluchar_a:	ldy	#8			; Loop 8 times.
  316                        	
  317    00:E4F4  4A         			lsr	a			; Divide multiplicand by 2
  318    00:E4F5  85 94      			sta	<multiplicand		; and clear the 8th bit.
  319                        	
  320    00:E4F7  62         			cla				; Clear top byte of product.
  321    00:E4F8  90 03      			bcc	.rotate
  322                        	
  323    00:E4FA  18         	.add:		clc				; Add the 8-bit multiplier to
  324    00:E4FB  65 00      			adc	<multiplier		; top 8-bits of the product.
  325                        	
  326    00:E4FD  6A         	.rotate:	ror	a			; Rotate product into the top
  327    00:E4FE  66 94      			ror	<multiplicand		; bits of the multiplicand.
  328                        	
  329    00:E500  88         			dey
  330    00:E501  B0 F7      			bcs	.add			; Add multiplier to top byte?
  331    00:E503  D0 F8      			bne	.rotate			; Completed 8 bits?
  332                        	
  333    00:E505  A8         			tay				; Return the 16-bit product.
  334    00:E506  A5 94      			lda	<multiplicand
  335                        	
  336    00:E508  60         			rts
  337                        	
  338                        	
  339                        	
  340                        	; ***************************************************************************
  341                        	; signed int
  342                        	; abs (signed int x)
  343                        	;
  344                        	; 1st parameter in Y:A (signed)
  345                        	; result in Y:A
  346                        	
  347    00:E509  C0 80      	_abs:		cpy	#$80			; Is the hi-byte -ve?
  348    00:E50B  90 0B      			bcc	!+
  349                        	
  350    00:E50D  38         	neg_ya:		sec
  351    00:E50E  49 FF      	neg_yacs:	eor	#$FF
  352    00:E510  69 00      			adc	#0
  353    00:E512  42         			say
  354    00:E513  49 FF      			eor	#$FF
  355    00:E515  69 00      			adc	#0
  356    00:E517  42         			say
  357    00:E518  60         	!:		rts
  358                        	
  359    00:E519             	_abs.1		.alias	_abs
  360                        	
  361                        	
  362                        	
  363                        	; ***************************************************************************
  364                        	; signed int
  365                        	; _mulschar (signed char x, signed char y)
  366                        	;
  367                        	; 1st parameter in A (signed multiplicand)
  368                        	; 2nd parameter in Y (signed multiplier)
  369                        	; result in Y:A
  370                        	;
  371                        	; N.B. Y and A get swapped to make the code shorter.
  372                        	
  373    00:E519  85 94      	__mulschar:	sta	<multiplicand		; Remember multiplicand sign.
  374                        	
  375    00:E51B  C9 80      			cmp	#$80			; Is the multiplicand -ve?
  376    00:E51D  90 03      			bcc	!+
  377    00:E51F  49 FF      			eor	#$FF			; Negate the multiplicand.
  378    00:E521  1A         			inc	a
  379    00:E522  85 00      	!:		sta	<multiplier		; Then save it as multiplier.
  380                        	
  381    00:E524  98         			tya				; Product -ve if multiplicand
  382    00:E525  45 94      			eor	<multiplicand		; and multiplier signs differ.
  383    00:E527  08         			php				; Remember product sign.
  384                        	
  385    00:E528  98         			tya				; Is the multiplicand -ve?
  386    00:E529  10 03      			bpl	!+
  387    00:E52B  49 FF      			eor	#$FF			; Negate the multiplicand.
  388    00:E52D  1A         			inc	a
  389                        	
  390    00:E52E  20 F2 E4   	!:		jsr	muluchar_a		; Multiplier already saved.
  391                        	
  392    00:E531  28         			plp				; Is the product -ve?
  393    00:E532  30 D9      			bmi	neg_ya
  394    00:E534  60         			rts
  395                        	
  396                        	
  397                        	
  398                        	; ***************************************************************************
  399                        	; unsigned int
  400                        	; _mulsuchar (signed char x, signed char y)
  401                        	;
  402                        	; 1st parameter in A (unsigned multiplicand)
  403                        	; 2nd parameter in Y (signed multiplier)
  404                        	; result in Y:A
  405                        	;
  406                        	; N.B. Y and A get swapped to make the code shorter.
  407                        	
  408    00:E535  42         	__mulsuchar:	say				; Put the signed param in A.
  409                        			; drop through to __muluschar
  410                        	
  411                        	
  412                        	
  413                        	; ***************************************************************************
  414                        	; signed int
  415                        	; _muluschar (unsigned char x, unsigned char y)
  416                        	;
  417                        	; 1st parameter in A (signed multiplicand)
  418                        	; 2nd parameter in Y (unsigned multiplier)
  419                        	; result in Y:A
  420                        	
  421    00:E536  C9 80      	__muluschar:	cmp	#$80			; Is multiplicand -ve?
  422    00:E538  08         			php				; Remember the sign.
  423    00:E539  90 03      			bcc	!+
  424    00:E53B  49 FF      			eor	#$FF			; Negate multiplicand.
  425    00:E53D  1A         			inc	a
  426                        	
  427    00:E53E  20 F0 E4   	!:		jsr	__muluchar		; Do the unsigned multiply.
  428                        	
  429    00:E541  28         			plp				; Was multiplicand -ve?
  430    00:E542  B0 CA      			bcs	neg_yacs		; Then negate the product.
  431    00:E544  60         			rts
  432                        	
  433                        	
  434                        	
  435                        	; ***************************************************************************
  436                        	; unsigned int
  437                        	; _moduchar (unsigned char x, unsigned char y)
  438                        	;
  439                        	; 1st parameter in A (unsigned dividend)
  440                        	; 2nd parameter in Y (unsigned divisor)
  441                        	; result in Y:A
  442                        	
  443    00:E545  84 00      	__moduchar:	sty.l	<divisor
  444                        	
  445    00:E547  0A         	divmodu8_a:	asl	a			; Rotate dividend, MSB -> C.
  446    00:E548  85 94      			sta.l	<dividend
  447    00:E54A  64 95      			stz.h	<dividend		; Clear quotient hi-byte.
  448                        	
  449    00:E54C  A0 08      			ldy	#8
  450    00:E54E  62         			cla				; Clear remainder.
  451    00:E54F  2A         	.loop:		rol	a			; Rotate C into remainder.
  452    00:E550  C5 00      			cmp	<divisor		; Test divisor.
  453    00:E552  90 02      			bcc	.skip			; CC if divisor > remainder.
  454    00:E554  E5 00      			sbc	<divisor		; Subtract divisor.
  455    00:E556  26 94      	.skip:		rol	<dividend		; Quotient bit -> dividend LSB.
  456    00:E558  88         			dey
  457    00:E559  D0 F4      			bne	.loop
  458                        	
  459    00:E55B  C2         			cly				; Clear hi-byte of return.
  460    00:E55C  60         			rts				; Return the 16-bit remainder.
  461                        	
  462                        	
  463                        	
  464                        	; ***************************************************************************
  465                        	; unsigned int
  466                        	; _divuchar (unsigned char x, unsigned char y)
  467                        	;
  468                        	; 1st parameter in A (unsigned dividend)
  469                        	; 2nd parameter in Y (unsigned divisor)
  470                        	; result in Y:A
  471                        	
  472    00:E55D  20 45 E5   	__divuchar:	jsr	__moduchar
  473                        	
  474    00:E560  A5 94      			lda	<dividend		; Get the dividend lo-byte.
  475    00:E562  60         			rts				; Return the 16-bit dividend.
  476                        	
  477                        	
  478                        	
  479                        	; ***************************************************************************
  480                        	; signed int
  481                        	; _modschar (signed char x, signed char y)
  482                        	;
  483                        	; 1st parameter in A (signed dividend)
  484                        	; 2nd parameter in Y (signed divisor)
  485                        	; result in Y:A
  486                        	
  487    00:E563  AA         	__modschar:	tax				; Preserve the dividend.
  488    00:E564  08         			php				; Remember remainder sign.
  489                        	
  490    00:E565  84 00      			sty	<divisor		; Quotient negative if divisor
  491    00:E567  45 00      			eor	<divisor		; and dividend signs differ.
  492    00:E569  08         			php				; Remember the quotient sign.
  493                        	
  494    00:E56A  98         			tya				; Is the divisor -ve?
  495    00:E56B  10 05      			bpl	!+
  496    00:E56D  49 FF      			eor	#$FF			; Negate the divisor.
  497    00:E56F  1A         			inc	a
  498    00:E570  85 00      			sta	<divisor
  499                        	
  500    00:E572  8A         	!:		txa				; Is the dividend -ve?
  501    00:E573  10 03      			bpl	divmods8_a
  502                        	
  503    00:E575  49 FF      	divmods8_neg:	eor	#$FF			; Negate the dividend.
  504    00:E577  1A         			inc	a
  505                        	
  506    00:E578  20 47 E5   	divmods8_a:	jsr	divmodu8_a		; Do the unsigned division.
  507                        	
  508    00:E57B  28         			plp				; Should the quotient be -ve?
  509    00:E57C  10 0C      			bpl	!+
  510                        	
  511    00:E57E  AA         			tax				; Preserve remainder lo-byte.
  512                        	
  513    00:E57F  38         			sec				; Negate the quotient.
  514    00:E580  62         			cla
  515    00:E581  E5 94      			sbc.l	<dividend
  516    00:E583  85 94      			sta.l	<dividend
  517    00:E585  A9 FF      			lda	#$FF
  518    00:E587  85 95      			sta.h	<dividend
  519                        	
  520    00:E589  8A         			txa				; Restore remainder lo-byte.
  521                        	
  522    00:E58A  28         	!:		plp				; Was the dividend -ve?
  523    00:E58B  10 05      			bpl	!+
  524                        	
  525    00:E58D  49 FF      			eor	#$FF			; Then negate the remainder.
  526    00:E58F  1A         			inc	a
  527    00:E590  A0 FF      			ldy	#$FF
  528                        	
  529    00:E592  60         	!:		rts
  530                        	
  531                        	
  532                        	
  533                        	; ***************************************************************************
  534                        	; signed int
  535                        	; _moduschar (unsigned char x, unsigned char y)
  536                        	;
  537                        	; 1st parameter in A (signed dividend)
  538                        	; 2nd parameter in Y (unsigned divisor)
  539                        	; result in Y:A
  540                        	
  541    00:E593  84 00      	__moduschar:	sty.l	<divisor
  542                        	
  543    00:E595  A8         			tay				; Is the dividend -ve?
  544    00:E596  08         			php				; Remember remainder sign.
  545    00:E597  08         			php				; Remember quotient sign.
  546    00:E598  30 DB      			bmi	divmods8_neg
  547    00:E59A  80 DC      			bra	divmods8_a
  548                        	
  549                        	
  550                        	
  551                        	; ***************************************************************************
  552                        	; unsigned int
  553                        	; _modsuchar (signed char x, signed char y)
  554                        	;
  555                        	; 1st parameter in A (unsigned dividend)
  556                        	; 2nd parameter in Y (signed divisor)
  557                        	; result in Y:A
  558                        	
  559    00:E59C  AA         	__modsuchar:	tax				; Preserve the dividend.
  560    00:E59D  08         			php				; Remember remainder sign.
  561                        	
  562    00:E59E  98         			tya				; Check the divisor sign.
  563    00:E59F  08         			php				; Remember quotient sign.
  564    00:E5A0  10 03      			bpl	!+
  565    00:E5A2  49 FF      			eor	#$FF			; Negate the divisor.
  566    00:E5A4  1A         			inc	a
  567    00:E5A5  85 00      	!:		sta.l	<divisor
  568                        	
  569    00:E5A7  8A         			txa				; Restore the dividend.
  570    00:E5A8  80 CE      			bra	divmods8_a
  571                        	
  572                        	
  573                        	
  574                        	; ***************************************************************************
  575                        	; signed int
  576                        	; _divschar (signed char x, signed char y)
  577                        	;
  578                        	; 1st parameter in A (signed dividend)
  579                        	; 2nd parameter in Y (signed divisor)
  580                        	; result in Y:A
  581                        	
  582    00:E5AA  20 63 E5   	__divschar:	jsr	__modschar
  583                        	
  584    00:E5AD  A5 94      			lda.l	<dividend
  585    00:E5AF  A4 95      			ldy.h	<dividend
  586    00:E5B1  60         			rts
  587                        	
  588                        	
  589                        	
  590                        	; ***************************************************************************
  591                        	; signed int
  592                        	; _divuschar (unsigned char x, unsigned char y)
  593                        	;
  594                        	; 1st parameter in A (signed dividend)
  595                        	; 2nd parameter in Y (unsigned divisor)
  596                        	; result in Y:A
  597                        	
  598    00:E5B2  20 93 E5   	__divuschar:	jsr	__moduschar
  599                        	
  600    00:E5B5  A5 94      			lda.l	<dividend
  601    00:E5B7  A4 95      			ldy.h	<dividend
  602    00:E5B9  60         			rts
  603                        	
  604                        	
  605                        	
  606                        	; ***************************************************************************
  607                        	; unsigned int
  608                        	; _divsuchar (signed char x, signed char y)
  609                        	;
  610                        	; 1st parameter in A (unsigned dividend)
  611                        	; 2nd parameter in Y (signed divisor)
  612                        	; result in Y:A
  613                        	
  614    00:E5BA  20 9C E5   	__divsuchar:	jsr	__modsuchar
  615                        	
  616    00:E5BD  A5 94      			lda.l	<dividend
  617    00:E5BF  A4 95      			ldy.h	<dividend
  618    00:E5C1  60         			rts
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   43                        	
   44                        			; Define in hucc-config.inc to remove this.
   45                        	
   46               0001     		.ifndef	HUCC_NO_DEFAULT_RANDOM
                             #[3]   "..\..\..\include\hucc\random.asm"
   47                        			include	"random.asm"		; Random number generator.
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; random.asm
    5                        	;
    6                        	; Pseudo-random number generator (https://github.com/bbbradsmith/prng_6502)
    7                        	;
    8                        	; Copyright Brad Smith 2019.
    9                        	;
   10                        	; License:
   11                        	;
   12                        	; This code and may be used, reused, and modified for any purpose, commercial
   13                        	; or non-commercial.
   14                        	;
   15                        	; Attribution in released binaries or documentation is appreciated but not
   16                        	; required.
   17                        	;
   18                        	; ***************************************************************************
   19                        	; ***************************************************************************
   20                        	;
   21                        	; This is a linear feedback shift register (LFSR) in Galois form, which is
   22                        	; iterated 8 times to produce an 8-bit pseudo-random number.
   23                        	;
   24                        	; Two widths of LFSR are provided:
   25                        	;
   26                        	;  24-bit requires 3 bytes, and repeats after 16777215 calls.
   27                        	;  32-bit requires 4 bytes, and repeats after 4294967295 calls.
   28                        	;
   29                        	; Usage:
   30                        	;
   31                        	;  Initialize the zero-page "random" variable to any value other than 0.
   32                        	;  The size of "random" is 3 or 4 bytes, depending on the width of LFSR
   33                        	;  chosen.
   34                        	;
   35                        	;  Call one of the RNG functions and an 8-bit result will be returned in the
   36                        	;  A-register (with flags), and the Y-register will be clobbered.
   37                        	;
   38                        	;  Do not mix RNGs of different width in the same program, unless you can
   39                        	;  give them each separate "random" state storage.
   40                        	;
   41                        	; ***************************************************************************
   42                        	; ***************************************************************************
   43                        	
   44                        	
   45               0001     		.ifndef	_KICKC				; Variables defined in C?
   46               2098     			.zp
   47    F8:2098             	random:		.ds	4			; Seed is 3 or 4 bytes.
   48               E5C2     			.code
   49                        		.endif	_KICKC
   50                        	
   51                        	
   52                        	
   53                        	; ***************************************************************************
   54                        	; ***************************************************************************
   55                        	;
   56                        	; init_random - Initialize a 32-bit LFSR using an 8-bit seed value in Y.
   57                        	;
   58                        	; The LFSR is initialized to n'th entry of a standard CRC-32 lookup-table,
   59                        	; which gives it a decent distribution of bits.
   60                        	;
   61                        	; Since seed is an 8-bit value, there are 255 (256-1) possible starting
   62                        	; states for the LFSR, because 0 would generate a 0 state.
   63                        	;
   64                        	; CRC-32 code by Paul Guertin. See http://6502.org/source/integers/crc.htm
   65                        	;
   66                        	
   67    14:C95C             	init_random	.proc
   68                        	
   69    14:C95C  A9 01      			lda	#1			; Init CRC-32 table value.
   70    14:C95E  85 98      			sta	<random + 0
   71    14:C960  98         			tya				; Get and check the seed value.
   72    14:C961  D0 01      			bne	.reverse_seed
   73    14:C963  3A         			dec	a			; Which must be non-zero!
   74    14:C964  4A         	.reverse_seed:	lsr	a			; Reverse the bits so that small changes
   75    14:C965  26 98      			rol	<random + 0		; in the seed make larger differences in
   76    14:C967  90 FB      			bcc	.reverse_seed		; the initial state.
   77                        	
   78    14:C969  64 99      			stz	<random + 1		; A contains the high byte of the CRC-32.
   79    14:C96B  64 9A      			stz	<random + 2		; The other three bytes are in memory.
   80    14:C96D  62         			cla
   81                        	
   82    14:C96E  A0 08      			ldy	#8			; Y counts bits in a byte.
   83    14:C970  4A         	.bit_loop:	lsr	a			; The CRC-32 algorithm is similar to CRC-16
   84    14:C971  66 9A      			ror	<random + 2		; except that it is reversed (originally for
   85    14:C973  66 99      			ror	<random + 1		; hardware reasons). This is why we shift
   86    14:C975  66 98      			ror	<random + 0		; right instead of left here.
   87    14:C977  90 16      			bcc	.no_add			; Do nothing if no overflow,
   88    14:C979  49 ED      			eor	#$ED			; else add CRC-32 polynomial $EDB88320.
   89                        	
   90    14:C97B  48         			pha				; Save high byte while we do others.
   91    14:C97C  A5 9A      			lda	<random + 2
   92    14:C97E  49 B8      			eor	#$B8			; Most reference books give the CRC-32 poly
   93    14:C980  85 9A      			sta	<random + 2		; as $04C11DB7. This is actually the same if
   94    14:C982  A5 99      			lda	<random + 1		; you write it in binary and read it right-
   95    14:C984  49 83      			eor	#$83			; to-left instead of left-to-right. Doing it
   96    14:C986  85 99      			sta	<random + 1		; this way means we won't have to explicitly
   97    14:C988  A5 98      			lda	<random + 0		; reverse things afterwards.
   98    14:C98A  49 20      			eor	#$20
   99    14:C98C  85 98      			sta	<random + 0
  100    14:C98E  68         			pla				; Restore high byte.
  101                        	
  102    14:C98F  88         	.no_add:	dey				; Do next bit.
  103    14:C990  D0 DE      			bne	.bit_loop
  104                        	
  105    14:C992  85 9B      			sta	<random + 3		; Save CRC-32 high-byte.
  106                        	
  107                        			leave				; All done!
         14:C994  4C EF FF   			jmp	leave_proc
  108                        	
  109                        			.endp
  110                        	
  111                        	
  112                        	
  113                        	; ***************************************************************************
  114                        	; ***************************************************************************
  115                        	;
  116                        	; get_random - 8-bit LFSR pseudo-random number with a 24-bit cycle.
  117                        	;
  118                        	; The pseudo-random sequence repeats after (2^24)-1 calls.
  119                        	;
  120                        	; Written by Wim Couwenberg, see ...
  121                        	;
  122                        	; "https://wimcouwenberg.wordpress.com/2020/11/15/ ...
  123                        	;  a-fast-24-bit-prng-algorithm-for-the-6502-processor/"
  124                        	;
  125                        	; Takes 68 cycles on the HuC6280, incl JSR & RTS.
  126                        	;
  127                        	; N.B. HuCC library code relies on this preserving X and Y!
  128                        	;
  129                        	
  130    00:E5C2  C2         	_rand8:		cly				; Entry point for HuCC.
  131                        	
  132    00:E5C3  A5 98      	get_random:	lda	<random + 0		; Operation 7 (with carry clear).
  133    00:E5C5  0A         			asl	a
  134    00:E5C6  45 99      			eor	<random + 1
  135    00:E5C8  85 99      			sta	<random + 1
  136    00:E5CA  2A         			rol	a             		; Operation 9.
  137    00:E5CB  45 9A      			eor	<random + 2
  138    00:E5CD  85 9A      			sta	<random + 2
  139    00:E5CF  45 98      			eor	<random + 0		; Operation 5.
  140    00:E5D1  85 98      			sta	<random + 0
  141    00:E5D3  A5 99      			lda	<random + 1		; Operation 15.
  142    00:E5D5  6A         			ror	a
  143    00:E5D6  45 9A      			eor	<random + 2
  144    00:E5D8  85 9A      			sta	<random + 2
  145    00:E5DA  45 99      			eor	<random + 1		; Operation 6.
  146    00:E5DC  85 99      			sta	<random + 1
  147    00:E5DE  60         			rts
  148                        	
  149                        	
  150                        	
  151               0000     		.if	0
  316                        		.endif
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   48                        		.endif
   49                        	
   50                        			; Optional libraries that get used when their header files
   51                        			; are included in a HuCC project.
   52                        			;
   53                        			; When the HuCC compiler is invoked with the "--legacy"
   54                        			; option to compile old projects, then the "huc.h" file
   55                        			; is automatically included, which then includes a list
   56                        			; of specific headers corresponding to HuC's library.
   57                        	
   58               0001     		.ifdef	HUCC_USES_GFX
                             #[3]   "..\..\..\include\hucc\hucc-gfx.asm"
   59                        			include	"hucc-gfx.asm"		; Set in hucc_gfx.h
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; huc-gfx.asm
    5                        	;
    6                        	; Based on the original HuC and MagicKit functions by David Michel and the
    7                        	; other original HuC developers.
    8                        	;
    9                        	; Modifications copyright John Brandwood 2024-2025.
   10                        	;
   11                        	; Distributed under the Boost Software License, Version 1.0.
   12                        	; (See accompanying file LICENSE_1_0.txt or copy at
   13                        	;  http://www.boost.org/LICENSE_1_0.txt)
   14                        	;
   15                        	; ***************************************************************************
   16                        	; ***************************************************************************
   17                        	
   18                        	;
   19                        	; Include dependancies ...
   20                        	;
   21                        	
   22                        			include "common.asm"		; Common helpers.
   23                        			include "vce.asm"		; Useful VCE routines.
   24                        			include "vdc.asm"		; Useful VCE routines.
   25                        	
   26                        	
   27                        	
   28                        	; ***************************************************************************
   29                        	; ***************************************************************************
   30                        	;
   31                        	; void __fastcall disp_on( void );
   32                        	; void __fastcall disp_off( void );
   33                        	
   34    00:E5DF             			.alias	_disp_on		= set_dspon
   35    00:E5DF             			.alias	_disp_off		= set_dspoff
   36                        	
   37                        	
   38                        	
   39                        	; ***************************************************************************
   40                        	; ***************************************************************************
   41                        	;
   42                        	; void __fastcall set_screen_size( unsigned char value<_al> );
   43                        	; void __fastcall sgx_set_screen_size( unsigned char value<_al> );
   44                        	;
   45                        	
   46    00:E5DF             			.alias	_set_screen_size.1	= set_bat_vdc
   47    00:E5DF             			.alias	_sgx_set_screen_size.1	= set_bat_sgx
   48                        	
   49                        	
   50                        	
   51                        	; ***************************************************************************
   52                        	; ***************************************************************************
   53                        	;
   54                        	; void __fastcall init_256x224( void );
   55                        	
   56    14:C71F             	_init_256x224	.proc
   57                        	
   58               0800     	.BAT_SIZE	=	64 * 32
   59               0080     	.CHR_0x20	=	.BAT_SIZE / 16		; 1st tile # after the BAT.
   60               7F00     	.SAT_ADDR	=	$7F00			; SAT takes 16 tiles of VRAM.
   61                        	
   62    14:C71F  08         			php				; Disable interrupts.
   63    14:C720  78         			sei
   64                        	
   65    14:C721  20 C9 FD   			call	clear_vce		; Clear all palettes.
   66                        	
   67    14:C724  A9 80      			lda.l	#.CHR_0x20		; CHR # of ASCII ' '.
   68    14:C726  85 F8      			sta.l	<_ax
   69    14:C728  A9 00      			lda.h	#.CHR_0x20
   70    14:C72A  85 F9      			sta.h	<_ax
   71                        	
   72    14:C72C  A9 08      			lda	#>.BAT_SIZE		; Size of BAT in words.
   73    14:C72E  85 FA      			sta	<_bl
   74                        	
   75    14:C730  20 DD FD   			call	clear_vram_vdc		; Clear VRAM.
   76               0001     		.if	SUPPORT_SGX
   77    14:C733  20 BF FD   			call	clear_vram_sgx
   78                        		.endif
   79                        	
   80    14:C736  A9 5A      			lda	#<.mode_256x224		; Disable BKG & SPR layers but
   81    14:C738  85 EC      			sta.l	<_bp			; enable RCR & VBLANK IRQ.
   82    14:C73A  A9 C7      			lda	#>.mode_256x224
   83    14:C73C  85 ED      			sta.h	<_bp
   84                        	
   85               0001     		.if	SUPPORT_SGX
   86    14:C73E  20 B5 FD   			call	sgx_detect		; Are we really on an SGX?
   87    14:C741  90 05      			bcc	!+
   88    14:C743  A0 14      			ldy	#^.mode_256x224		; Set SGX 1st, with no VBL.
   89    14:C745  20 AB FD   			call	set_mode_sgx
   90                        		.endif
   91    14:C748  A0 14      	!:		ldy	#^.mode_256x224		; Set VDC 2nd, VBL allowed.
   92    14:C74A  20 A1 FD   			call	set_mode_vdc
   93                        	
   94               0001     		.if	SUPPORT_SGX
   95    14:C74D  2C 10 02   			bit	SGX_SR			; Purge any overdue RCR.
   96                        		.endif
   97    14:C750  2C 00 02   			bit	VDC_SR			; Purge any overdue VBL.
   98    14:C753  28         			plp				; Restore interrupts.
   99                        	
  100    14:C754  20 09 E3   			call	wait_vsync		; Wait for the next VBLANK.
  101                        	
  102                        			leave				; All done, phew!
         14:C757  4C EF FF   			jmp	leave_proc
  103                        	
  104                        			; A standard 256x224 screen with overscan.
  105                        	
  106    14:C75A  80         	.mode_256x224:	db	$80			; VCE Control Register.
  107    14:C75B  04         			db	VCE_CR_5MHz + XRES_SOFT	;   Video Clock + Artifact Reduction
  108                        	
  109    14:C75C  09         			db	VDC_MWR			; Memory-access Width Register
  110    14:C75D  10 00      			dw	VDC_MWR_64x32 + VDC_MWR_1CYCLE
  111    14:C75F  0A         			db	VDC_HSR			; Horizontal Sync Register
  112    14:C760  02 02      			dw	VDC_HSR_256
  113    14:C762  0B         			db	VDC_HDR			; Horizontal Display Register
  114    14:C763  1F 04      			dw	VDC_HDR_256
  115    14:C765  0C         			db	VDC_VPR			; Vertical Sync Register
  116    14:C766  02 17      			dw	VDC_VPR_224
  117    14:C768  0D         			db	VDC_VDW			; Vertical Display Register
  118    14:C769  DF 00      			dw	VDC_VDW_224
  119    14:C76B  0E         			db	VDC_VCR			; Vertical Display END position Register
  120    14:C76C  FF 00      			dw	VDC_VCR_224
  121    14:C76E  0F         			db	VDC_DCR			; DMA Control Register
  122    14:C76F  10 00      			dw	$0010			;   Enable automatic VRAM->SATB
  123    14:C771  13         			db	VDC_DVSSR		; VRAM->SATB address $7F00
  124    14:C772  00 7F      			dw	.SAT_ADDR
  125    14:C774  07         			db	VDC_BXR			; Background X-Scroll Register
  126    14:C775  00 00      			dw	$0000
  127    14:C777  08         			db	VDC_BYR			; Background Y-Scroll Register
  128    14:C778  00 00      			dw	$0000
  129    14:C77A  06         			db	VDC_RCR			; Raster Counter Register
  130    14:C77B  00 00      			dw	$0000			;   Never occurs!
  131    14:C77D  05         			db	VDC_CR			; Control Register
  132    14:C77E  0C 00      			dw	$000C			;   Enable VSYNC & RCR IRQ
  133    14:C780  00         			db	0
  134                        	
  135                        			.endp
  136                        	
  137                        	
  138                        	
  139                        	; ***************************************************************************
  140                        	; ***************************************************************************
  141                        	;
  142                        	; void __fastcall init_240x208( void );
  143                        	
  144                        	_init_240x208	.proc
  223                        			.endp
  224                        	
  225                        	
  226                        	
  227                        	; ***************************************************************************
  228                        	; ***************************************************************************
  229                        	;
  230                        	; void __fastcall _macro set_xres( unsigned int x_pixels<_ax> );
  231                        	; void __fastcall _macro sgx_set_xres( unsigned int x_pixels<_ax> );
  232                        	;
  233                        	; void __fastcall set_xres( unsigned int x_pixels<_ax>, unsigned char blur_flag<_bl> );
  234                        	; void __fastcall sgx_set_xres( unsigned int x_pixels<_ax>, unsigned char blur_flag<_bl> );
  235                        	;
  236                        	; blur_flag = XRES_SOFT (default if not specified), XRES_SHARP or XRES_KEEP
  237                        	
  238                        	set_xres_group	.procgroup			; These routines share code!
  337                        			.endprocgroup	; set_xres_group
  338                        	
  339                        	
  340                        	
  341                        	; ***************************************************************************
  342                        	; ***************************************************************************
  343                        	;
  344                        	; HuC VRAM Functions
  345                        	;
  346                        	; ***************************************************************************
  347                        	; ***************************************************************************
  348                        	
  349                        	
  350    14:C651             	load_vram_group	.procgroup			; These routines share code!
  351                        	
  352                        	; ***************************************************************************
  353                        	; ***************************************************************************
  354                        	;
  355                        	; void __fastcall load_vram( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_words<_ax> );
  356                        	; void __fastcall sgx_load_vram( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_words<_ax> );
  357                        	;
  358                        	; void __fastcall far_load_vram( unsigned int vram<_di>, unsigned int num_words<_ax> );
  359                        	; void __fastcall sgx_far_load_vram( unsigned int vram<_di>, unsigned int num_words<_ax> );
  360                        	;
  361                        	; load_vram_sgx -  copy a block of memory to VRAM
  362                        	; load_vram_vdc -  copy a block of memory to VRAM
  363                        	;
  364                        	; _bp		= BAT memory location
  365                        	; _bp_bank	= BAT bank
  366                        	; _di		= VRAM base address
  367                        	; _ax		= nb of words to copy
  368                        	; ----
  369                        	; N.B. BAT data *must* be word-aligned!
  370                        	
  371               0000     		.ifndef	VRAM_XFER_SIZE
  373                        		.endif
  374                        	
  375    14:C651             	load_vram_x	.proc
  376                        	
  377    14:C651  43 08      			tma3
  378    14:C653  48         			pha
  379    14:C654  43 10      			tma4
  380    14:C656  48         			pha
  381                        	
  382    14:C657  A4 02      			ldy	<_bp_bank
  383    14:C659  20 3B E3   			jsr	map_bp_to_mpr34		; Map data to MPR3 & MPR4.
  384                        	
  385    14:C65C  20 7F E3   			jsr	set_di_to_mawr
  386                        	
  387                        	;		tii	.vdc_tai, ram_tia, 8
  388                        	
  389               0001     		.if	SUPPORT_SGX
  390    14:C65F  8A         			txa				; Select which VDC to write
  391    14:C660  1A         			inc	a			; to.
  392    14:C661  1A         			inc	a
  393    14:C662  8D F3 22   			sta.l	ram_tia_dst
  394                        		.endif
  395                        	
  396    14:C665  A9 10      			lda	#VRAM_XFER_SIZE		; Split into 16-byte chunks
  397    14:C667  8D F5 22   			sta.l	ram_tia_len		; for stable IRQ response.
  398                        	
  399    14:C66A  A6 EC      			ldx.l	<_bp
  400    14:C66C  8E F1 22   			stx.l	ram_tia_src
  401    14:C66F  A4 ED      			ldy.h	<_bp
  402    14:C671  8C F2 22   			sty.h	ram_tia_src
  403                        	
  404    14:C674  A5 F8      			lda.l	<_ax			; Length in words.
  405    14:C676  48         			pha				; Preserve length.l
  406                        	
  407    14:C677  46 F9      			lsr.h	<_ax
  408    14:C679  6A         			ror	a
  409    14:C67A  46 F9      			lsr.h	<_ax
  410    14:C67C  6A         			ror	a
  411    14:C67D  46 F9      			lsr.h	<_ax
  412    14:C67F  6A         			ror	a
  413               0000     		.if	VRAM_XFER_SIZE == 32
  416                        		.endif
  417                        	
  418    14:C680  22         			sax				; x=chunks-lo
  419    14:C681  F0 1F      			beq	.next_block		; a=source-lo, y=source-hi
  420                        	
  421    14:C683  20 F0 22   	.chunk_loop:	jsr	ram_tia			; transfer 16-bytes
  422                        	
  423    14:C686  18         			clc				; increment source
  424    14:C687  69 10      			adc	#VRAM_XFER_SIZE
  425    14:C689  8D F1 22   			sta.l	ram_tia_src
  426    14:C68C  90 11      			bcc	.same_page
  427    14:C68E  C8         			iny
  428    14:C68F  10 0B      			bpl	.same_bank		; remap_data
  429                        	
  430    14:C691  42         			say
  431    14:C692  43 10      			tma4
  432    14:C694  53 08      			tam3
  433    14:C696  1A         			inc	a
  434    14:C697  53 10      			tam4
  435    14:C699  A9 60      			lda	#$60
  436    14:C69B  42         			say
  437                        	
  438    14:C69C  8C F2 22   	.same_bank:	sty.h	ram_tia_src
  439                        	
  440    14:C69F  CA         	.same_page:	dex
  441    14:C6A0  D0 E1      			bne	.chunk_loop
  442                        	
  443    14:C6A2  C6 F9      	.next_block:	dec.h	<_ax
  444    14:C6A4  10 DD      			bpl	.chunk_loop
  445                        	
  446    14:C6A6  68         			pla				; Restore length.l
  447    14:C6A7  29 07      			and	#VRAM_XFER_SIZE / 2 - 1
  448    14:C6A9  F0 07      			beq	.done
  449                        	
  450    14:C6AB  0A         			asl	a			; Convert words to bytes.
  451    14:C6AC  8D F5 22   			sta.l	ram_tia_len
  452                        	
  453    14:C6AF  20 F0 22   			jsr	ram_tia			; transfer remainder
  454                        	
  455    14:C6B2  68         	.done:		pla
  456    14:C6B3  53 10      			tam4
  457    14:C6B5  68         			pla
  458    14:C6B6  53 08      			tam3
  459                        	
  460                        			leave
         14:C6B8  4C EF FF   			jmp	leave_proc
  461                        	
  462                        			.endp
  463                        	
  464                        			.endprocgroup	; load_vram_group
  465                        	
  466                        	
  467                        	
  468                        	; ***************************************************************************
  469                        	; ***************************************************************************
  470                        	;
  471                        	; void __fastcall load_bat( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  472                        	; void __fastcall sgx_load_bat( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  473                        	;
  474                        	; void __fastcall far_load_bat( unsigned int vram<_di>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  475                        	; void __fastcall sgx_far_load_bat( unsigned int vram<_di>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  476                        	;
  477                        	; load_bat_sgx - transfer a BAT to VRAM
  478                        	; load_bat_vdc - transfer a BAT to VRAM
  479                        	;
  480                        	; transfer a BAT to VRAM
  481                        	; ----
  482                        	; _bp		= BAT memory location
  483                        	; _bp_bank	= BAT bank
  484                        	; _di		= VRAM base address
  485                        	; _al		= nb of column to copy
  486                        	; _ah		= nb of row
  487                        	; ----
  488                        	; N.B. BAT data *must* be word-aligned!
  489                        	
  490               20EC     	_gfx_load_bat_PARM_2	=	_bp
  491               20F0     	_gfx_load_bat_PARM_3	=	_di
  492               20F8     	_gfx_load_bat_PARM_4	=	_al
  493               20F9     	_gfx_load_bat_PARM_5	=	_ah
  494                        	
  495    14:C8DF             	load_bat_group	.procgroup			; These routines share code!
  496                        	
  497               0001     		.if	SUPPORT_SGX
  498                        			.proc	_sgx_load_bat.4
  505                        			.endp
  506                        		.endif
  507                        	
  508    14:C8DF             			.proc	_load_bat.4
  509    14:C8DF             			.alias	_far_load_bat.3		= _load_bat.4
  510                        	
  511    14:C8DF  82         			clx				; Offset to PCE VDC.
  512                        	
  513    14:C8E0  43 08      			tma3
  514    14:C8E2  48         			pha
  515                        	
  516    14:C8E3  A4 02      			ldy	<_bp_bank
  517    14:C8E5  20 2D E3   			jsr	map_bp_to_mpr3		; Map data to MPR3.
  518                        	
  519    14:C8E8  A4 EC      			ldy.l	<_bp
  520    14:C8EA  64 EC      			stz.l	<_bp
  521                        	
  522    14:C8EC  20 7F E3   	.line_loop:	jsr	set_di_to_mawr
  523                        	
  524    14:C8EF  A5 F8      			lda	<_al
  525    14:C8F1  85 00      			sta	<__temp
  526    14:C8F3  B1 EC      	.tile_loop:	lda	[_bp], y
  527    14:C8F5  9D 02 02   			sta	VDC_DL, x
  528    14:C8F8  C8         			iny
  529    14:C8F9  B1 EC      			lda	[_bp], y
  530    14:C8FB  9D 03 02   			sta	VDC_DH, x
  531    14:C8FE  C8         			iny
  532    14:C8FF  D0 03      			bne	!+
  533    14:C901  20 4C E3   			jsr	inc.h_bp_mpr3
  534    14:C904  C6 00      	!:		dec	<__temp
  535    14:C906  D0 EB      			bne	.tile_loop
  536                        	
  537    14:C908  BD 75 26   			lda	vdc_bat_width, x
  538    14:C90B  18         			clc
  539    14:C90C  65 F0      			adc.l	<_di
  540    14:C90E  85 F0      			sta.l	<_di
  541    14:C910  90 02      			bcc	!+
  542    14:C912  E6 F1      			inc.h	<_di
  543                        	
  544    14:C914  C6 F9      	!:		dec	<_ah
  545    14:C916  D0 D4      			bne	.line_loop
  546                        	
  547    14:C918  68         			pla
  548    14:C919  53 08      			tam3
  549                        	
  550                        			leave
         14:C91B  4C EF FF   			jmp	leave_proc
  551                        	
  552                        			.endp
  553                        	
  554                        			.endprocgroup	; load_bat_group
  555                        	
  556                        	
  557                        	
  558                        	; ***************************************************************************
  559                        	; ***************************************************************************
  560                        	;
  561                        	; void __fastcall load_palette( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp>, unsigned char num_palettes<_ah> );
  562                        	;
  563                        	; void __fastcall far_load_palette( unsigned char palette<_al>, unsigned char num_palettes<_ah> );
  564                        	
  565    14:C9CB             			.proc	_load_palette.3
  566    14:C9CB             			.alias	_far_load_palette.2	= _load_palette.3
  567                        	
  568    14:C9CB  AC 4C 26   			ldy	color_queue_w		; Get the queue's write index.
  569                        	
  570    14:C9CE  A5 EC      			lda.l	<_bp			; Add this set of palettes to
  571    14:C9D0  99 5D 26   			sta	color_addr_l, y		; the queue.
  572    14:C9D3  A5 ED      			lda.h	<_bp
  573    14:C9D5  99 65 26   			sta	color_addr_h, y
  574    14:C9D8  A5 02      			lda	<_bp_bank
  575    14:C9DA  99 6D 26   			sta	color_bank, y
  576    14:C9DD  A5 F8      			lda	<_al
  577    14:C9DF  99 4D 26   			sta	color_index, y
  578    14:C9E2  A5 F9      			lda	<_ah
  579    14:C9E4  99 55 26   			sta	color_count, y
  580                        	
  581    14:C9E7  C8         			iny				; Increment the queue index.
  582    14:C9E8  98         			tya
  583    14:C9E9  29 07      			and	#7
  584                        	
  585    14:C9EB  CD 4B 26   	.wait:		cmp	color_queue_r		; If the queue is full, wait
  586    14:C9EE  F0 FB      			beq	.wait			; for the next VBLANK.
  587                        	
  588    14:C9F0  8D 4C 26   			sta	color_queue_w		; Signal item is in the queue.
  589                        	
  590                        			leave				; All done, phew!
         14:C9F3  4C EF FF   			jmp	leave_proc
  591                        	
  592                        			.endp
  593                        	
  594                        	
  595                        	
  596               0000     		.if	0
  620                        		.endif
  621                        	
  622                        	
  623                        	
  624                        	; ***************************************************************************
  625                        	; ***************************************************************************
  626                        	;
  627                        	; void __fastcall load_background( unsigned char __far *tiles<_bp_bank:_bp>, unsigned char __far *palettes<__fbank:__fptr>, unsigned char __far *bat<_cl:_bx>, unsigned char w<_dl>, unsigned char w<_dh> );
  628                        	
  629                        			.proc	_load_background.5
  667                        			.endp
  668                        	
  669                        	
  670                        	
  671                        	; ***************************************************************************
  672                        	; ***************************************************************************
  673                        	;
  674                        	; void __fastcall vram2vram( unsigned int vram_dst<_ax>, unsigned int vram_src<_bx>, unsigned int word_len<_cx> );
  675                        	; void __fastcall sgx_vram2vram( unsigned int vram_dst<_ax>, unsigned int vram_src<_bx>, unsigned int word_len<_cx> );
  676                        	;
  677                        	
  678               0001     		.if	SUPPORT_SGX
  679                        			.proc	_sgx_vram2vram.3
  685                        			.endp
  686                        		.endif
  687                        	
  688    14:C91E             			.proc	_vram2vram.3
  689                        	
  690    14:C91E  82         			clx				; Offset to PCE VDC.
  691                        	
  692    14:C91F  08         			php
  693    14:C920  78         			sei
  694    14:C921  A9 11      			lda	#VDC_DESR
  695    14:C923  9D 00 02   			sta	VDC_AR, x
  696    14:C926  A5 F8      			lda.l	<_ax
  697    14:C928  9D 02 02   			sta	VDC_DL, x
  698    14:C92B  A5 F9      			lda.h	<_ax
  699    14:C92D  9D 03 02   			sta	VDC_DH, x
  700                        	
  701    14:C930  A9 10      			lda	#VDC_SOUR
  702    14:C932  9D 00 02   			sta	VDC_AR, x
  703    14:C935  A5 FA      			lda.l	<_bx
  704    14:C937  9D 02 02   			sta	VDC_DL, x
  705    14:C93A  A5 FB      			lda.h	<_bx
  706    14:C93C  9D 03 02   			sta	VDC_DH, x
  707                        	
  708    14:C93F  A9 12      			lda	#VDC_LENR
  709    14:C941  9D 00 02   			sta	VDC_AR, x
  710    14:C944  18         			clc
  711    14:C945  A5 FC      			lda.l	<_cx
  712    14:C947  69 FF      			adc	#$FF
  713    14:C949  9D 02 02   			sta	VDC_DL, x
  714    14:C94C  A5 FD      			lda.h	<_cx
  715    14:C94E  69 FF      			adc	#$FF
  716    14:C950  9D 03 02   			sta	VDC_DH, x
  717                        	
  718    14:C953  B5 F7      			lda	<vdc_reg, x
  719    14:C955  8D 00 02   			sta	VDC_AR
  720    14:C958  28         			plp
  721                        	
  722                        			leave
         14:C959  4C EF FF   			jmp	leave_proc
  723                        	
  724                        			.endp
  725                        	
  726                        	
  727                        	
  728                        	; ***************************************************************************
  729                        	; ***************************************************************************
  730                        	;
  731                        	; HuC Font Functions
  732                        	;
  733                        	; ***************************************************************************
  734                        	; ***************************************************************************
  735                        	
  736                        	
  737                        	
  738               2695     			.bss
  739                        	
  740                        	; **************
  741                        	; 16-bytes of VDC BAT information.
  742                        	;
  743                        	; N.B. MUST be 16-bytes before the SGX versions to use PCE_VDC_OFFSET.
  744                        	
  745    F8:2695             	_vdc_font_base:	ds	2	; Tile number of ASCII '\0'.
  746                        	
  747                        	; From hucc-printf.asm just to avoid wasting .bss space with padding.
  748    F8:2697             	_vdc_tty_x_lhs:	ds	1	; TTY minimum X position.
  749    F8:2698             	_vdc_tty_y_top:	ds	1	; TTY minimum Y position.
  750    F8:2699             	_vdc_tty_x:	ds	1	; TTY current X position.
  751    F8:269A             	_vdc_tty_y:	ds	1	; TTY current Y position.
  752                        	
  753               0001     		.if	SUPPORT_SGX
  754                        	
  755                        	; **************
  756                        	; 16-bytes of SGX BAT information.
  757                        	;
  758                        	; N.B. MUST be 16-bytes after the VDC versions to use SGX_VDC_OFFSET.
  759                        	
  760    F8:269B             			ds	10	; Padding to ensure the 16-byte delta.
  761                        	
  762    F8:26A5             	_sgx_font_base:	ds	2	; Tile number of ASCII '\0'.
  763                        	
  764                        	; From hucc-printf.asm just to avoid wasting .bss space with padding.
  765    F8:26A7             	_sgx_tty_x_lhs:	ds	1	; TTY minimum X position.
  766    F8:26A8             	_sgx_tty_y_top:	ds	1	; TTY minimum Y position.
  767    F8:26A9             	_sgx_tty_x:	ds	1	; TTY current X position.
  768    F8:26AA             	_sgx_tty_y:	ds	1	; TTY current Y position.
  769                        	
  770                        		.endif
  771                        	
  772                        	;_font_base	.alias	vdc_font_base
  773                        	
  774               E5DF     			.code
  775                        	
  776                        	
  777                        	
  778                        	; ***************************************************************************
  779                        	; ***************************************************************************
  780                        	;
  781                        	; void __fastcall set_font_addr( unsigned int vram<acc> );
  782                        	; void __fastcall sgx_set_font_addr( unsigned int vram<acc> );
  783                        	
  784               0001     		.if	SUPPORT_SGX
  785    00:E5DF             	_sgx_set_font_addr.1:
  786    00:E5DF  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  787    00:E5E1  F0         			db	$F0			; Turn "clx" into a "beq".
  788                        		.endif
  789                        	
  790    00:E5E2             	_set_font_addr.1:
  791    00:E5E2  82         			clx				; Offset to PCE VDC.
  792                        	
  793    00:E5E3  84 00      	set_font_addr:	sty	<__temp
  794    00:E5E5  46 00      			lsr	<__temp
  795    00:E5E7  6A         			ror	a
  796    00:E5E8  46 00      			lsr	<__temp
  797    00:E5EA  6A         			ror	a
  798    00:E5EB  46 00      			lsr	<__temp
  799    00:E5ED  6A         			ror	a
  800    00:E5EE  46 00      			lsr	<__temp
  801    00:E5F0  6A         			ror	a
  802    00:E5F1  38         			sec
  803    00:E5F2  E9 20      			sbc	#$20
  804    00:E5F4  9D 95 26   			sta.l	_vdc_font_base,x
  805    00:E5F7  B0 02      			bcs	!+
  806    00:E5F9  C6 00      			dec	<__temp
  807                        	
  808    00:E5FB  BD 96 26   	!:		lda.h	_vdc_font_base, x
  809    00:E5FE  29 F0      			and	#$F0
  810    00:E600  05 00      			ora	<__temp
  811    00:E602  9D 96 26   			sta.h	_vdc_font_base, x
  812    00:E605  60         			rts
  813                        	
  814                        	
  815                        	
  816                        	; ***************************************************************************
  817                        	; ***************************************************************************
  818                        	;
  819                        	; void __fastcall set_font_pal( unsigned char palette<acc> );
  820                        	; void __fastcall sgx_set_font_pal( unsigned char palette<acc> );
  821                        	
  822               0001     		.if	SUPPORT_SGX
  823    00:E606             	_sgx_set_font_pal.1:
  824    00:E606  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  825    00:E608  F0         			db	$F0			; Turn "clx" into a "beq".
  826                        		.endif
  827                        	
  828    00:E609             	_set_font_pal:					; For compatibility with HuC.
  829    00:E609             	_set_font_pal.1:
  830    00:E609  82         			clx				; Offset to PCE VDC.
  831    00:E60A  0A         			asl	a
  832    00:E60B  0A         			asl	a
  833    00:E60C  0A         			asl	a
  834    00:E60D  0A         			asl	a
  835    00:E60E  85 00      			sta	<__temp
  836                        	
  837    00:E610  BD 96 26   			lda.h	_vdc_font_base, x
  838    00:E613  29 0F      			and	#$0F
  839    00:E615  05 00      			ora	<__temp
  840    00:E617  9D 96 26   			sta.h	_vdc_font_base, x
  841    00:E61A  60         			rts
  842                        	
  843                        	
  844                        	
  845                        	; ***************************************************************************
  846                        	; ***************************************************************************
  847                        	;
  848                        	; void __fastcall load_font( char far *font<_bp_bank:_bp>, unsigned char count<_al> );
  849                        	;
  850                        	; void __fastcall load_font( char far *font<_bp_bank:_bp>, unsigned char count<_al>, unsigned int vram<acc> );
  851                        	; void __fastcall sgx_load_font( char far *font<_bp_bank:_bp>, unsigned char count<_al>, unsigned int vram<acc> );
  852                        	;
  853                        	; void __fastcall far_load_font( unsigned char count<_al>, unsigned int vram<acc> );
  854                        	; void __fastcall sgx_far_load_font( unsigned char count<_al>, unsigned int vram<acc> );
  855                        	
  856    00:E61B  AC 79 26   	_load_font.2:	ldy	vdc_bat_limit		; Load the font directly
  857    00:E61E  C8         			iny				; after the BAT (stupid!).
  858    00:E61F  62         			cla
  859    00:E620  80 03      			bra	_load_font.3
  860                        	
  861               0001     		.if	SUPPORT_SGX
  862    00:E622             	_sgx_load_font.3:
  863    00:E622  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  864    00:E624  F0         			db	$F0			; Turn "clx" into a "beq".
  865                        		.endif
  866                        	
  867    00:E625  82         	_load_font.3:	clx				; Offset to PCE VDC.
  868                        	
  869    00:E626  85 F0      			sta.l	<_di			; Load the font directly
  870    00:E628  84 F1      			sty.h	<_di			; after the BAT (stupid!).
  871                        	
  872    00:E62A  20 E3 E5   			jsr	set_font_addr		; Set xxx_font_base from addr.
  873                        	
  874    00:E62D  A5 F8      			lda	<__al			; Convert #tiles into #words.
  875    00:E62F  64 F9      			stz	<__ah
  876    00:E631  0A         			asl	a
  877    00:E632  26 F9      			rol	<__ah
  878    00:E634  0A         			asl	a
  879    00:E635  26 F9      			rol	<__ah
  880    00:E637  0A         			asl	a
  881    00:E638  26 F9      			rol	<__ah
  882    00:E63A  0A         			asl	a
  883    00:E63B  26 F9      			rol	<__ah
  884    00:E63D  85 F8      			sta	<__al
  885    00:E63F  4C 4F FF   			jmp	load_vram_x
  886                        	
  887    00:E642             			.alias	_far_load_font.2	= _load_font.3
  888    00:E642             			.alias	_sgx_far_load_font.2	= _sgx_load_font.3
  889                        	
  890                        	
  891                        	
  892                        	; ***************************************************************************
  893                        	; ***************************************************************************
  894                        	;
  895                        	; void __fastcall cls();
  896                        	; void __fastcall sgx_cls();
  897                        	;
  898                        	; void __fastcall cls( int tile<acc> );
  899                        	; void __fastcall sgx_cls( int tile<acc> );
  900                        	
  901               0001     		.if	SUPPORT_SGX
  902    00:E642  A2 10      	_sgx_cls:	ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  903    00:E644  F0         			db	$F0			; Turn "clx" into a "beq".
  904                        		.endif
  905                        	
  906    00:E645  82         	_cls:		clx				; Offset to PCE VDC.
  907                        	
  908    00:E646  BD 95 26   	clear_tty_x:	lda.l	_vdc_font_base, x
  909    00:E649  BC 96 26   			ldy.h	_vdc_font_base, x
  910    00:E64C  18         			clc
  911    00:E64D  69 20      			adc	#' '
  912    00:E64F  90 07      			bcc	!+
  913    00:E651  C8         			iny
  914    00:E652  80 04      			bra	!+
  915                        	
  916               0001     		.if	SUPPORT_SGX
  917    00:E654  A2 10      	_sgx_cls.1:	ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  918    00:E656  F0         			db	$F0			; Turn "clx" into a "beq".
  919                        		.endif
  920                        	
  921    00:E657  82         	_cls.1:		clx
  922                        	
  923    00:E658  85 F8      	!:		sta.l	<_ax			; VRAM word to write.
  924    00:E65A  84 F9      			sty.h	<_ax
  925    00:E65C  BD 79 26   			lda	vdc_bat_limit, x	; BAT size hi-byte.
  926    00:E65F  1A         			inc	a
  927    00:E660  85 FA      			sta	<_bl
  928    00:E662  4C D3 FD   			jmp	clear_bat_x
  929                        	
  930                        	
  931                        	
  932                        	; ***************************************************************************
  933                        	; ***************************************************************************
  934                        	;
  935                        	; void __fastcall __macro load_default_font( void );
  936                        	; void __fastcall __macro sgx_load_default_font( void );
  937                        	;
  938                        	; Args: _bp, _bp_bank = _farptr to font data mapped into MPR3 & MPR4.
  939                        	; Args: _di = VRAM destination address.
  940                        	; Args: monofont_fg = font color (0..15)
  941                        	; Args: monofont_bg = background color (0..15)
  942                        	; Args: _al = number of tiles (aka characters) 0==256
  943                        	
  944    02:C994             	huc_monofont_x	.proc
  945                        	
  946               26AB     			.bss
  947    F8:26AB             	monofont_fg:	.ds	1
  948    F8:26AC             	monofont_bg:	.ds	1
  949               C994     			.code
  950                        	
  951    02:C994  BC 79 26   			ldy	vdc_bat_limit, x	; BAT limit mask hi-byte.
  952    02:C997  C8         			iny
  953    02:C998  62         			cla
  954    02:C999  85 F0      			sta.l	<_di			; Load the font directly
  955    02:C99B  84 F1      			sty.h	<_di			; after the BAT (stupid!).
  956                        	
  957    02:C99D  20 E3 E5   			jsr	set_font_addr		; Set xxx_font_base from addr.
  958                        	
  959    02:C9A0  A9 24      			lda.l	#.font
  960    02:C9A2  85 EC      			sta.l	<_bp
  961    02:C9A4  A9 CA      			lda.h	#.font
  962    02:C9A6  85 ED      			sta.h	<_bp
  963                        	
  964    02:C9A8  A9 60      			lda	#$60			; #characters.
  965    02:C9AA  85 F8      			sta	<_al
  966                        	
  967    02:C9AC  20 7F E3   			jsr	set_di_to_mawr
  968                        	
  969    02:C9AF  AD AB 26   			lda	monofont_fg		; Foreground pixel color.
  970    02:C9B2  85 00      			sta	<__temp
  971    02:C9B4  AD AC 26   			lda	monofont_bg		; Background pixel color.
  972    02:C9B7  DA         			phx
  973    02:C9B8  A2 FC      			ldx.l	#_cx			; Create a bit mask for each
  974    02:C9BA  9E 00 20   	.bg_loop:	stz	$2000, x		; plane of the background.
  975    02:C9BD  4A         			lsr	a
  976    02:C9BE  90 03      			bcc	.bg_plane
  977    02:C9C0  DE 00 20   			dec	$2000, x
  978    02:C9C3  E8         	.bg_plane:	inx
  979    02:C9C4  D0 F4      			bne	.bg_loop
  980    02:C9C6  FA         			plx
  981                        	
  982    02:C9C7  C2         	.tile_loop:	cly
  983                        	
  984    02:C9C8  B1 EC      	.plane01:	lda	[_bp], y		; Get font byte.
  985    02:C9CA  8F 00 06   			bbs0	<__temp, .set_plane0
  986    02:C9CD  49 FF      	.clr_plane0:	eor	#$FF			; Clr font bits in background.
  987    02:C9CF  25 FC      			and	<_cx + 0
  988    02:C9D1  80 02      			bra	.put_plane0
  989    02:C9D3  05 FC      	.set_plane0:	ora	<_cx + 0		; Set font bits in background.
  990    02:C9D5  9D 02 02   	.put_plane0:	sta	VDC_DL, x
  991                        	
  992    02:C9D8  B1 EC      			lda	[_bp], y		; Get font byte.
  993    02:C9DA  9F 00 06   			bbs1	<__temp, .set_plane1
  994    02:C9DD  49 FF      	.clr_plane1:	eor	#$FF			; Clr font bits in background.
  995    02:C9DF  25 FD      			and	<_cx + 1
  996    02:C9E1  80 02      			bra	.put_plane1
  997    02:C9E3  05 FD      	.set_plane1:	ora	<_cx + 1		; Set font bits in background.
  998    02:C9E5  9D 03 02   	.put_plane1:	sta	VDC_DH, x
  999                        	
 1000    02:C9E8  C8         			iny
 1001    02:C9E9  C0 08      			cpy	#8
 1002    02:C9EB  90 DB      			bcc	.plane01
 1003                        	
 1004    02:C9ED  C2         			cly
 1005                        	
 1006    02:C9EE  B1 EC      	.plane23:	lda	[_bp], y		; Get font byte.
 1007    02:C9F0  AF 00 06   			bbs2	<__temp, .set_plane2
 1008    02:C9F3  49 FF      	.clr_plane2:	eor	#$FF			; Clr font bits in background.
 1009    02:C9F5  25 FE      			and	<_cx + 2
 1010    02:C9F7  80 02      			bra	.put_plane2
 1011    02:C9F9  05 FE      	.set_plane2:	ora	<_cx + 2		; Set font bits in background.
 1012    02:C9FB  9D 02 02   	.put_plane2:	sta	VDC_DL, x
 1013                        	
 1014    02:C9FE  B1 EC      			lda	[_bp], y		; Get font byte.
 1015    02:CA00  BF 00 06   			bbs3	<__temp, .set_plane3
 1016    02:CA03  49 FF      	.clr_plane3:	eor	#$FF			; Clr font bits in background.
 1017    02:CA05  25 FF      			and	<_cx + 3
 1018    02:CA07  80 02      			bra	.put_plane3
 1019    02:CA09  05 FF      	.set_plane3:	ora	<_cx + 3		; Set font bits in background.
 1020    02:CA0B  9D 03 02   	.put_plane3:	sta	VDC_DH, x
 1021                        	
 1022    02:CA0E  C8         			iny
 1023    02:CA0F  C0 08      			cpy	#8
 1024    02:CA11  90 DB      			bcc	.plane23
 1025                        	
 1026    02:CA13  A5 EC      			lda.l	<_bp
 1027    02:CA15  69 07      			adc	#8-1
 1028    02:CA17  85 EC      			sta.l	<_bp
 1029    02:CA19  90 02      			bcc	!+
 1030    02:CA1B  E6 ED      			inc.h	<_bp
 1031                        	
 1032    02:CA1D  C6 F8      	!:		dec	<_al
 1033    02:CA1F  D0 A6      			bne	.tile_loop
 1034                        	
 1035                        			leave				; All done, phew!
         02:CA21  4C EF FF   			jmp	leave_proc
 1036                        	
 1037    02:CA24             	.font:		incbin	"data/font8x8-bold-short-iso646-fr.dat", 128
 1038                        	
 1039                        			.endp
 1040                        	
 1041                        	
 1042                        	
 1043                        	; ***************************************************************************
 1044                        	; ***************************************************************************
 1045                        	;
 1046                        	; HuC Text Output
 1047                        	;
 1048                        	; ***************************************************************************
 1049                        	; ***************************************************************************
 1050                        	
 1051                        	
 1052                        	
 1053    14:C383             	vdc_tty_out	.procgroup			; These routines share code!
 1054                        	
 1055                        	; ***************************************************************************
 1056                        	; ***************************************************************************
 1057                        	;
 1058                        	; void __fastcall put_char( unsigned char digit<_bl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
 1059                        	
 1060               0001     		.if	SUPPORT_SGX
 1061                        	put_char_sgx	.proc
 1067                        			.endp
 1068                        		.endif
 1069                        	
 1070    14:C383             	put_char_vdc	.proc
 1071                        	
 1072    14:C383  82         			clx				; Offset to PCE VDC.
 1073                        	
 1074    14:C384  20 34 E4   			jsr	set_di_xy_mawr
 1075                        	
 1076    14:C387  62         			cla				; Push EOL marker.
 1077    14:C388  48         			pha
 1078                        	
 1079    14:C389  A5 FA      			lda	<_bl
 1080    14:C38B  48         			pha				; Push character to output.
 1081    14:C38C  80 58      			bra	!output+
 1082                        	
 1083    14:C38E             			.ref	put_hex_vdc		; Need put_number_vdc
 1084                        			.endp
 1085                        	
 1086    14:C38E             			.alias	_put_char.3		= put_char_vdc
 1087                        	
 1088                        	
 1089                        	
 1090                        	; ***************************************************************************
 1091                        	; ***************************************************************************
 1092                        	;
 1093                        	; void __fastcall put_digit( unsigned char digit<_bl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
 1094                        	
 1095               0001     		.if	SUPPORT_SGX
 1096                        	put_digit_sgx	.proc
 1102                        			.endp
 1103                        		.endif
 1104                        	
 1105    14:C38E             	put_digit_vdc	.proc
 1106                        	
 1107    14:C38E  82         			clx				; Offset to PCE VDC.
 1108                        	
 1109    14:C38F  20 34 E4   			jsr	set_di_xy_mawr
 1110                        	
 1111    14:C392  62         			cla				; Push EOL marker.
 1112    14:C393  48         			pha
 1113                        	
 1114    14:C394  A5 FA      			lda	<_bl			; Convert hex digit to ASCII.
 1115    14:C396  29 0F      			and	#$0F
 1116    14:C398  C9 0A      			cmp	#10
 1117    14:C39A  90 02      			bcc	!+
 1118    14:C39C  69 06      			adc	#6
 1119    14:C39E  69 30      	!:		adc	#'0'
 1120    14:C3A0  48         			pha				; Push character to output.
 1121    14:C3A1  80 43      			bra	!output+
 1122                        	
 1123    14:C3A3             			.ref	put_hex_vdc		; Need put_number_vdc
 1124                        			.endp
 1125                        	
 1126    14:C3A3             			.alias	_put_digit.3		= put_digit_vdc
 1127                        	
 1128                        	
 1129                        	
 1130                        	; ***************************************************************************
 1131                        	; ***************************************************************************
 1132                        	;
 1133                        	; void __fastcall put_hex( unsigned int number<_bx>, unsigned char length<_cl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
 1134                        	
 1135               0001     		.if	SUPPORT_SGX
 1136                        	put_hex_sgx	.proc
 1141                        			.endp
 1142                        		.endif
 1143                        	
 1144    14:C3A3             	put_hex_vdc	.proc
 1145                        	
 1146    14:C3A3  82         			clx				; Offset to PCE VDC.
 1147                        	
 1148    14:C3A4  20 34 E4   			jsr	set_di_xy_mawr
 1149                        	
 1150    14:C3A7  A4 FC      			ldy	<_cl			; Total #characters to print,
 1151    14:C3A9  F0 3E      			beq	!exit+			; NOT minimum #characters!
 1152                        	
 1153    14:C3AB  86 00      			stx	<__temp			; Preserve which VDC.
 1154                        	
 1155    14:C3AD  82         			clx				; Push EOL marker.
 1156    14:C3AE  DA         			phx
 1157                        	
 1158    14:C3AF  B5 FA      	.hex_byte:	lda.l	<_bx, x			; Convert hex digit to ASCII.
 1159    14:C3B1  29 0F      			and	#$0F
 1160    14:C3B3  C9 0A      			cmp	#10
 1161    14:C3B5  90 02      			bcc	!+
 1162    14:C3B7  69 06      			adc	#6
 1163    14:C3B9  69 30      	!:		adc	#'0'
 1164    14:C3BB  48         			pha				; Push character to output.
 1165    14:C3BC  88         			dey
 1166    14:C3BD  F0 15      			beq	.hex_done
 1167                        	
 1168    14:C3BF  B5 FA      			lda.l	<_bx, x			; Convert hex digit to ASCII.
 1169    14:C3C1  4A         			lsr	a
 1170    14:C3C2  4A         			lsr	a
 1171    14:C3C3  4A         			lsr	a
 1172    14:C3C4  4A         			lsr	a
 1173    14:C3C5  C9 0A      			cmp	#10
 1174    14:C3C7  90 02      			bcc	!+
 1175    14:C3C9  69 06      			adc	#6
 1176    14:C3CB  69 30      	!:		adc	#'0'
 1177    14:C3CD  48         			pha				; Push character to output.
 1178    14:C3CE  88         			dey
 1179    14:C3CF  F0 03      			beq	.hex_done
 1180                        	
 1181    14:C3D1  E8         			inx
 1182    14:C3D2  80 DB      			bra	.hex_byte
 1183                        	
 1184    14:C3D4  A6 00      	.hex_done:	ldx	<__temp			; Restore which VDC.
 1185    14:C3D6  80 0E      			bra	!output+
 1186                        	
 1187    14:C3D8  18         	.write:		clc
 1188    14:C3D9  7D 95 26   			adc.l	_vdc_font_base, x
 1189    14:C3DC  9D 02 02   			sta	VDC_DL, x
 1190    14:C3DF  62         			cla
 1191    14:C3E0  7D 96 26   			adc.h	_vdc_font_base, x
 1192    14:C3E3  9D 03 02   			sta	VDC_DH, x
 1193                        	
 1194    14:C3E6  68         	!output:	pla				; Pop the digits and output.
 1195    14:C3E7  D0 EF      			bne	.write
 1196                        	
 1197                        	!exit:		leave				; All done!
         14:C3E9  4C EF FF   			jmp	leave_proc
 1198                        	
 1199                        			.endp
 1200                        	
 1201    14:C3EC             			.alias	_put_hex.4 = put_hex_vdc
 1202                        	
 1203                        	
 1204                        	
 1205                        	; ***************************************************************************
 1206                        	; ***************************************************************************
 1207                        	;
 1208                        	; void __fastcall put_number( unsigned int number<_bx>, unsigned char length<_cl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
 1209                        	
 1210               0001     		.if	SUPPORT_SGX
 1211                        	put_number_sgx	.proc
 1216                        			.endp
 1217                        		.endif
 1218                        	
 1219    14:C3EC             	put_number_vdc	.proc
 1220                        	
 1221    14:C3EC  82         			clx				; Offset to PCE VDC.
 1222                        	
 1223    14:C3ED  20 34 E4   			jsr	set_di_xy_mawr
 1224                        	
 1225    14:C3F0  A4 FC      			ldy	<_cl			; Total #characters to print,
 1226    14:C3F2  F0 F5      			beq	!exit-			; NOT minimum #characters!
 1227                        	
 1228    14:C3F4  86 00      			stx	<__temp			; Preserve which VDC.
 1229                        	
 1230    14:C3F6  82         			clx				; Push EOL marker.
 1231    14:C3F7  DA         			phx
 1232                        	
 1233    14:C3F8  A6 FB      			ldx.h	<_bx			; Is the number -ve?
 1234    14:C3FA  86 FC      			stx	<_cl			; Remember this.
 1235    14:C3FC  10 10      			bpl	.divide_by_ten
 1236                        	
 1237    14:C3FE  38         			sec				; Make the number +ve.
 1238    14:C3FF  A5 FA      			lda.l	<_bx
 1239    14:C401  49 FF      			eor	#$FF
 1240    14:C403  69 00      			adc	#0
 1241    14:C405  85 FA      			sta.l	<_bx
 1242    14:C407  8A         			txa
 1243    14:C408  49 FF      			eor	#$FF
 1244    14:C40A  69 00      			adc	#0
 1245    14:C40C  85 FB      			sta.h	<_bx
 1246                        	
 1247    14:C40E  A2 10      	.divide_by_ten:	ldx	#16
 1248    14:C410  62         			cla				; Clear Remainder.
 1249    14:C411  06 FA      			asl.l	<_bx			; Rotate Dividend, MSB -> C.
 1250    14:C413  26 FB      			rol.h	<_bx
 1251    14:C415  2A         	.divide_loop:	rol	a			; Rotate C into Remainder.
 1252    14:C416  C9 0A      			cmp	#10			; Test Divisor.
 1253    14:C418  90 02      			bcc	.divide_less		; CC if Divisor > Remainder.
 1254    14:C41A  E9 0A      			sbc	#10			; Subtract Divisor.
 1255    14:C41C  26 FA      	.divide_less:	rol.l	<_bx			; Quotient bit -> Dividend LSB.
 1256    14:C41E  26 FB      			rol.h	<_bx			; Rotate Dividend, MSB -> C.
 1257    14:C420  CA         			dex
 1258    14:C421  D0 F2      			bne	.divide_loop
 1259                        	
 1260    14:C423  18         			clc
 1261    14:C424  69 30      			adc	#'0'			; Always leaves C clr.
 1262    14:C426  48         			pha				; Push character to output.
 1263    14:C427  88         			dey
 1264    14:C428  F0 10      			beq	!pad+
 1265    14:C42A  A5 FA      			lda.l	<_bx			; Repeat while non-zero.
 1266    14:C42C  05 FB      			ora.h	<_bx
 1267    14:C42E  D0 DE      			bne	.divide_by_ten
 1268                        	
 1269    14:C430  A6 00      			ldx	<__temp			; Restore which VDC.
 1270                        	
 1271    14:C432  A5 FC      			lda	<_cl			; Was the number -ve?
 1272    14:C434  10 04      			bpl	!pad+
 1273    14:C436  A9 2D      			lda	#'-'			; Output a leading '-'.
 1274    14:C438  48         			pha
 1275    14:C439  88         			dey
 1276                        	
 1277    14:C43A  A9 20      	!pad:		lda	#' '			; Add padding characters.
 1278    14:C43C  88         	.loop:		dey
 1279    14:C43D  30 A7      			bmi	!output-
 1280    14:C43F  48         			pha
 1281    14:C440  80 FA      			bra	.loop
 1282                        	
 1283    14:C442             			.ref	put_hex_vdc		; Need put_number_vdc
 1284                        	
 1285                        			.endp
 1286                        	
 1287    14:C442             			.alias	_put_number.4 = put_number_vdc
 1288                        	
 1289                        	
 1290                        	
 1291                        	; ***************************************************************************
 1292                        	; ***************************************************************************
 1293                        	;
 1294                        	; void __fastcall put_raw( unsigned int data<_bx>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
 1295                        	
 1296               0001     		.if	SUPPORT_SGX
 1297                        	put_raw_sgx	.proc
 1302                        			.endp
 1303                        		.endif
 1304                        	
 1305                        	put_raw_vdc	.proc
 1318                        			.endp
 1319                        	
 1320    14:C442             			.alias	_put_raw.3		= put_raw_vdc
 1321                        	
 1322                        			.endprocgroup			; vdc_tty_out
 1323                        	
 1324                        	
 1325                        	
 1326                        	; ***************************************************************************
 1327                        	; ***************************************************************************
 1328                        	;
 1329                        	; void __fastcall put_string( unsigned char *string<_bp>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
 1330                        	;
 1331                        	; N.B. This is not a .proc right now because it is called from procedures
 1332                        	; that contain embedded strings, and the string aren't banked in before
 1333                        	; printing (yet).
 1334                        	
 1335               0001     		.if	SUPPORT_SGX
 1336    00:E665             	_sgx_put_string.3:
 1337    00:E665  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
 1338    00:E667  F0         			db	$F0			; Turn "clx" into a "beq".
 1339                        		.endif
 1340                        	
 1341    00:E668  82         	_put_string.3:	clx				; Offset to PCE VDC.
 1342                        	
 1343    00:E669  20 34 E4   			jsr	set_di_xy_mawr
 1344                        	
 1345    00:E66C  C2         			cly
 1346    00:E66D  B1 EC      	.chr_loop:	lda	[_bp], y
 1347    00:E66F  F0 15      			beq	.done
 1348                        	
 1349    00:E671  18         			clc
 1350    00:E672  7D 95 26   			adc.l	_vdc_font_base, x
 1351    00:E675  9D 02 02   			sta	VDC_DL, x
 1352    00:E678  62         			cla
 1353    00:E679  7D 96 26   			adc.h	_vdc_font_base, x
 1354    00:E67C  9D 03 02   			sta	VDC_DH, x
 1355                        	
 1356    00:E67F  C8         			iny
 1357    00:E680  D0 EB      			bne	.chr_loop
 1358    00:E682  E6 ED      			inc.h	<_bp
 1359    00:E684  80 E7      			bra	.chr_loop
 1360                        	
 1361    00:E686  60         	.done:		rts
 1362                        	
 1363                        	
 1364                        	
 1365                        	; ***************************************************************************
 1366                        	; ***************************************************************************
 1367                        	;
 1368                        	; void __fastcall set_color_rgb( unsigned int index<VCE_CTA>, unsigned char r<_al>, unsigned char g<_ah>, unsigned char b<acc> );
 1369                        	;
 1370                        	; r:	red	RED:	bit 3-5
 1371                        	; g:	green	GREEN:	bit 6-8
 1372                        	; b:	blue	BLUE:	bit 0-2
 1373                        	
 1374    00:E687             	_set_color_rgb.4:
 1375                        	;		and	#7
 1376    00:E687  85 00      			sta	<__temp
 1377    00:E689  A5 F8      			lda	<_al
 1378                        	;		and	#7
 1379    00:E68B  0A         			asl	a
 1380    00:E68C  0A         			asl	a
 1381    00:E68D  0A         			asl	a
 1382    00:E68E  05 00      			ora	<__temp
 1383    00:E690  0A         			asl	a
 1384    00:E691  0A         			asl	a
 1385    00:E692  85 00      			sta	<__temp
 1386    00:E694  A5 F9      			lda	<_ah
 1387                        	;		and	#7
 1388    00:E696  4A         			lsr	a
 1389    00:E697  66 00      			ror	<__temp
 1390    00:E699  4A         			lsr	a
 1391    00:E69A  66 00      			ror	<__temp
 1392    00:E69C  A8         			tay
 1393    00:E69D  A5 00      			lda	<__temp
 1394    00:E69F  8D 04 04   			sta.l	VCE_CTW
 1395    00:E6A2  8C 05 04   			sty.h	VCE_CTW
 1396    00:E6A5  60         			rts
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   60                        		.endif
   61                        	
   62               0001     		.ifdef	HUCC_USES_STRING		; Set in hucc_string.h
                             #[3]   "..\..\..\include\hucc\hucc-string.asm"
   63                        			include	"hucc-string.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-string.asm
    5                        	;
    6                        	; Not-quite-standard, but fast, replacements for <string.h>.
    7                        	;
    8                        	; Copyright John Brandwood 2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; !!! WARNING : non-standard return values !!!
   18                        	;
   19                        	; Strings are limited to a maximum of 255 characters (+ the terminator)!
   20                        	;
   21                        	; The memcpy(), strcpy() and strcat() functions do NOT return the destination
   22                        	; address, and they are declared "void" to check that the value is not used.
   23                        	;
   24                        	; mempcpy() is provided which returns the end address instead of the starting
   25                        	; address, because this is typically more useful.
   26                        	;
   27                        	; Please note that both memcpy() and memset() are implemented using a TII for
   28                        	; speed, and so the length should be < 16 bytes if used in time-critical bits
   29                        	; of code (such as when using a split screen) because they delay interrupts.
   30                        	;
   31                        	; strncpy() and strncat() are not provided, because strncpy() was not created
   32                        	; for the purpose of avoiding string overruns, and strncat() is just a poorly
   33                        	; designed function.
   34                        	;
   35                        	; POSIX strlcpy() and strlcat() are provided instead, but once again they are
   36                        	; slightly non-standard in that the return value when there is an overflow is
   37                        	; the buffer size (so that the overflow can be detected), instead of the full
   38                        	; size of the destination string that was too big to fit in the buffer.
   39                        	;
   40                        	; ***************************************************************************
   41                        	; ***************************************************************************
   42                        	
   43                        	
   44                        	
   45                        	; ***************************************************************************
   46                        	; ***************************************************************************
   47                        	;
   48                        	; void __fastcall strcpy( char *destination<_di>, char *source<_bp> );
   49                        	; void __fastcall strcat( char *destination<_di>, char *source<_bp> );
   50                        	;
   51                        	; unsigned int __fastcall strlcpy( char *destination<_di>, char *source<_bp>, unsigned char size<acc> );
   52                        	; unsigned int __fastcall strlcat( char *destination<_di>, char *source<_bp>, unsigned char size<acc> );
   53                        	; unsigned int __fastcall strlen( char *source<_bp> );
   54                        	;
   55                        	; NOT WORKING YET (needs compiler changes) ...
   56                        	;
   57                        	; void __fastcall strcpy( char *destination<_di>, char __far *source<_bp_bank:_bp> );
   58                        	; void __fastcall strcat( char *destination<_di>, char __far *source<_bp_bank:_bp> );
   59                        	;
   60                        	; unsigned int __fastcall strlcpy( char *destination<_di>, char __far *source<_bp_bank:_bp>, unsigned char size<acc> );
   61                        	; unsigned int __fastcall strlcat( char *destination<_di>, char __far *source<_bp_bank:_bp>, unsigned char size<acc> );
   62                        	; unsigned int __fastcall strlen( char __far *source<_bp_bank:_bp> );
   63                        	
   64    00:E6A6  62         	_strcat:	cla				; Max string length == 256!
   65    00:E6A7  A0 01      			ldy.h	#256
   66                        	
   67    00:E6A9  AA         	_strlcat:	tax				; X = buffer length (1..256).
   68                        	
   69               0000     		.ifdef	_DEBUG
   74                        		.endif
   75                        	
   76    00:E6AA  43 08      			tma3				; Preserve MPR3 and MPR4.
   77    00:E6AC  48         			pha
   78    00:E6AD  43 10      			tma4
   79    00:E6AF  48         			pha
   80                        	
   81                        	;		ldy	<_bp_bank		; Map the source string.
   82                        	;		beq	.no_bank
   83                        	;		jsr	map_bp_to_mpr34
   84                        	
   85    00:E6B0  C2         	.no_bank:	cly
   86                        	
   87    00:E6B1  B1 F0      	.find:		lda	[_di], y		; Find the end of the string.
   88    00:E6B3  F0 08      			beq	.adjust
   89    00:E6B5  C8         			iny
   90    00:E6B6  CA         			dex
   91    00:E6B7  D0 F8      			bne	.find
   92    00:E6B9  98         			tya				; A:Y = buffer length.
   93    00:E6BA  62         			cla
   94    00:E6BB  80 28      			bra	str_overflow
   95                        	
   96    00:E6BD  98         	.adjust:	tya				; Subtract Y from _bp so that
   97    00:E6BE  49 FF      			eor	#$FF			; _bp and _di use the same Y.
   98    00:E6C0  38         			sec
   99    00:E6C1  65 EC      			adc.l	<_bp
  100    00:E6C3  85 EC      			sta.l	<_bp
  101    00:E6C5  B0 0F      			bcs	str_copy
  102    00:E6C7  C6 ED      			dec.h	<_bp
  103    00:E6C9  80 0B      			bra	str_copy
  104                        	
  105                        			;
  106                        	
  107    00:E6CB  62         	_strcpy:	cla				; Max string length == 256!
  108    00:E6CC  A0 01      			ldy.h	#256
  109                        	
  110    00:E6CE  AA         	_strlcpy:	tax				; X = buffer length (1..256).
  111                        	
  112               0000     		.ifdef	_DEBUG
  117                        		.endif
  118                        	
  119    00:E6CF  43 08      			tma3				; Preserve MPR3 and MPR4.
  120    00:E6D1  48         			pha
  121    00:E6D2  43 10      			tma4
  122    00:E6D4  48         			pha
  123                        	
  124                        	;		ldy	<_bp_bank		; Map the source string.
  125                        	;		beq	.no_bank
  126                        	;		jsr	map_bp_to_mpr34
  127                        	
  128    00:E6D5  C2         	.no_bank:	cly
  129                        	
  130    00:E6D6  B1 EC      	str_copy:	lda	[_bp], y
  131    00:E6D8  91 F0      			sta	[_di], y
  132    00:E6DA  F0 1E      			beq	str_exit		; A:Y = string length.
  133    00:E6DC  C8         			iny
  134    00:E6DD  CA         			dex
  135    00:E6DE  D0 F6      			bne	str_copy
  136                        	
  137    00:E6E0  88         			dey
  138    00:E6E1  62         			cla
  139    00:E6E2  91 F0      			sta	[_di], y
  140    00:E6E4  C8         			iny				; A:Y = buffer length.
  141    00:E6E5  D0 13      	str_overflow:	bne	str_exit
  142    00:E6E7  1A         			inc	a			; A:Y = buffer length = 256.
  143    00:E6E8  80 10      			bra	str_exit
  144                        	
  145                        			;
  146                        	
  147    00:E6EA  43 08      	_strlen:	tma3
  148    00:E6EC  48         			pha
  149    00:E6ED  43 10      			tma4
  150    00:E6EF  48         			pha
  151                        	
  152                        	;		ldy	<_bp_bank
  153                        	;		beq	.no_bank
  154                        	;		jsr	map_bp_to_mpr34
  155                        	
  156    00:E6F0  C2         	.no_bank:	cly
  157                        	
  158    00:E6F1  B1 EC      	.find:		lda	[_bp], y
  159    00:E6F3  F0 05      			beq	str_exit
  160    00:E6F5  C8         			iny
  161    00:E6F6  D0 F9      			bne	.find
  162    00:E6F8  A9 01      			lda.h	#256			; A:Y = overflow length = 256.
  163                        	
  164    00:E6FA  AA         	str_exit:	tax				; X:Y = string or buffer length.
  165                        	
  166    00:E6FB  68         			pla				; Restore MPR3 and MPR4.
  167    00:E6FC  53 10      			tam4
  168    00:E6FE  68         			pla
  169    00:E6FF  53 08      			tam3
  170                        	
  171    00:E701  8A         			txa				; A:Y = string or buffer length.
  172    00:E702  42         			say				; Y:A = string or buffer length.
  173                        	
  174    00:E703  60         			rts
  175                        	
  176    00:E704             			.alias	_strlen.1		= _strlen
  177    00:E704             			.alias	_strcpy.2		= _strcpy
  178    00:E704             			.alias	_strcat.2		= _strcat
  179    00:E704             			.alias	_strlcpy.3		= _strlcpy
  180    00:E704             			.alias	_strlcat.3		= _strlcat
  181                        	
  182                        	
  183                        	
  184                        	; ***************************************************************************
  185                        	; ***************************************************************************
  186                        	;
  187                        	; void __fastcall memcpy( unsigned char *destination<ram_tii_dst>, unsigned char  *source<ram_tii_src>, unsigned int count<acc> );
  188                        	; unsigned char * __fastcall mempcpy( unsigned char *destination<ram_tii_dst>, unsigned char  *source<ram_tii_src>, unsigned int count<acc> );
  189                        	;
  190                        	; void __fastcall farmemcpy( unsigned char *destination<ram_tii_dst>, unsigned char __far *source<_bp_bank:ram_tii_src>, unsigned int count<acc> );
  191                        	; unsigned char * __fastcall farmempcpy( unsigned char *destination<ram_tii_dst>, unsigned char __far *source<_bp_bank:ram_tii_src>, unsigned int count<acc> );
  192                        	;
  193                        	; void __fastcall far_memcpy( unsigned char *destination<ram_tii_dst>, unsigned int count<acc> );
  194                        	; unsigned char * __fastcall far_mempcpy( unsigned char *destination<ram_tii_dst>, unsigned int count<acc> );
  195                        	;
  196                        	
  197    00:E704             	_memcpy.3:
  198    00:E704  64 02      	_mempcpy.3:	stz	<_bp_bank		; Map the source memory.
  199                        	
  200    00:E706             	_farmemcpy.3:
  201    00:E706  8C FE 22   	_farmempcpy.3:	sty.h	ram_tii_len		; Check for zero length.
  202    00:E709  8D FD 22   			sta.l	ram_tii_len
  203    00:E70C  0D FE 22   			ora.h	ram_tii_len
  204    00:E70F  F0 18      			beq	.zero_length
  205                        	
  206    00:E711  43 08      			tma3				; Preserve MPR3 and MPR4.
  207    00:E713  48         			pha
  208    00:E714  43 10      			tma4
  209    00:E716  48         			pha
  210                        	
  211    00:E717  A5 02      			lda	<_bp_bank		; Map the source memory.
  212    00:E719  F0 05      			beq	.no_bank
  213                        	
  214    00:E71B  53 08      			tam3				; Put bank into MPR3.
  215    00:E71D  1A         			inc	a
  216    00:E71E  53 10      			tam4				; Put next into MPR4.
  217                        	
  218                        	;		lda.h	ram_tii_src		; Remap ptr to MPR3.
  219                        	;		and	#$1F
  220                        	;		ora	#$60
  221                        	;		sta.h	ram_tii_src
  222                        	
  223    00:E720  20 F8 22   	.no_bank:	jsr	ram_tii			; Copy the memory.
  224                        	
  225    00:E723  68         			pla				; Restore MPR3 and MPR4.
  226    00:E724  53 10      			tam4
  227    00:E726  68         			pla
  228    00:E727  53 08      			tam3
  229                        	
  230    00:E729  18         	.zero_length:	clc				; Return the end address
  231    00:E72A  AD FB 22   			lda.l	ram_tii_dst		; like mempcpy().
  232    00:E72D  6D FD 22   			adc.l	ram_tii_len
  233    00:E730  A8         			tay
  234    00:E731  AD FC 22   			lda.h	ram_tii_dst
  235    00:E734  6D FE 22   			adc.h	ram_tii_len
  236    00:E737  42         			say
  237                        	
  238    00:E738  60         			rts
  239                        	
  240    00:E739             			.alias	_far_memcpy.2		= _farmemcpy.3
  241    00:E739             			.alias	_far_mempcpy.2		= _farmempcpy.3
  242                        	
  243                        	
  244                        	
  245                        	; ***************************************************************************
  246                        	; ***************************************************************************
  247                        	;
  248                        	; void __fastcall memset( unsigned char *destination<ram_tii_src>, unsigned char value<_al>, unsigned int count<acc> );
  249                        	
  250    00:E739  C9 00      	_memset:	cmp	#0			; Decrement the length, check
  251    00:E73B  D0 05      			bne	!+			; for zero and set C. 
  252    00:E73D  C0 00      			cpy	#0
  253    00:E73F  F0 23      			beq	.zero_length
  254    00:E741  88         			dey
  255    00:E742  3A         	!:		dec	a
  256    00:E743  8D FD 22   			sta.l	ram_tii_len
  257    00:E746  8C FE 22   			sty.h	ram_tii_len
  258                        	
  259    00:E749  AD F9 22   			lda.l	ram_tii_src		; ram_tii_dst = ram_tii_src + 1
  260    00:E74C  85 88      			sta.l	<__ptr
  261    00:E74E  69 00      			adc	#0
  262    00:E750  8D FB 22   			sta.l	ram_tii_dst
  263    00:E753  AD FA 22   			lda.h	ram_tii_src
  264    00:E756  85 89      			sta.h	<__ptr
  265    00:E758  69 00      			adc	#0
  266    00:E75A  8D FC 22   			sta.h	ram_tii_dst
  267                        	
  268    00:E75D  A5 F8      			lda	<_al			; Set the fill value.
  269    00:E75F  92 88      			sta	[__ptr]
  270                        	
  271    00:E761  4C F8 22   			jmp	ram_tii			; Copy the memory.
  272                        	
  273    00:E764  60         	.zero_length:	rts
  274                        	
  275    00:E765             			.alias	_memset.3		= _memset
  276                        	
  277                        	
  278                        	
  279                        	; ***************************************************************************
  280                        	; ***************************************************************************
  281                        	;
  282                        	; int __fastcall strcmp( char *string1<_di>, char *string2<_bp> );
  283                        	; int __fastcall strncmp( char *string1<_di>, char *string2<_bp>, unsigned int count<_ax> );
  284                        	;
  285                        	; int __fastcall __macro memcmp( unsigned char *string1<_di>, unsigned char *string2<_bp>, unsigned int count<_ax> );
  286                        	; int __fastcall farmemcmp( unsigned char *string1<_di>, unsigned char __far *string2<_bp_bank:_bp>, unsigned int count<_ax> );
  287                        	; int __fastcall far_memcmp( unsigned char *string1<_di>, unsigned int count<_ax> );
  288                        	;
  289                        	;  0 	if strings are equal
  290                        	;  1 	if the first non-matching character in string1 > string2 (in ASCII).
  291                        	; -1 	if the first non-matching character in string1 < string2 (in ASCII).
  292                        	
  293    14:C7CF             	hucc_memcmp	.procgroup
  294                        	
  295                        	_strcmp.2	.proc
  300                        			.endp				; Fall through.
  301                        	
  302    14:C7CF             	_strncmp.3	.proc
  303    14:C7CF  64 02      			stz	<_bp_bank		; Assume strings are mapped.
  304    14:C7D1  89 40      			bit	#$40			; Set the V bit for strcmp.
  305    14:C7D3  50         			db	$50			; Turn "clv" into "bvc".
  306    14:C7D4             			.ref	_farmemcmp.3		; Don't strip _farmemcmp.3!
  307                        			.endp				; Fall through.
  308                        	
  309    14:C7D4             	_farmemcmp.3	.proc
  310    14:C7D4  B8         			clv				; Clr the V bit for memcmp.
  311                        	
  312    14:C7D5  43 08      			tma3				; Preserve MPR3 and MPR4.
  313    14:C7D7  48         			pha
  314    14:C7D8  43 10      			tma4
  315    14:C7DA  48         			pha
  316                        	
  317    14:C7DB  A4 02      			ldy	<_bp_bank		; Map string2.
  318    14:C7DD  F0 03      			beq	.no_bank
  319                        	
  320    14:C7DF  20 3B E3   			jsr	map_bp_to_mpr34
  321                        	
  322    14:C7E2  C2         	.no_bank:	cly
  323                        	
  324    14:C7E3  A6 F8      			ldx.l	<_ax			; Increment length.l
  325    14:C7E5  E8         			inx
  326    14:C7E6  CA         	.loop:		dex				; Decrement length.l
  327    14:C7E7  F0 17      			beq	.page
  328    14:C7E9  B1 F0      	.test:		lda	[_di], y		; string1 - string2
  329    14:C7EB  D1 EC      			cmp	[_bp], y
  330    14:C7ED  90 1E      			bcc	.return_neg		; string1 < string2 
  331    14:C7EF  D0 17      			bne	.return_pos		; string1 > string2
  332    14:C7F1  50 04      			bvc	!+			; Only check for end-of-string
  333    14:C7F3  C9 00      			cmp	#0			; if the V flag is set.
  334    14:C7F5  F0 0D      			beq	.return_same
  335    14:C7F7  C8         	!:		iny
  336    14:C7F8  D0 EC      			bne	.loop
  337    14:C7FA  E6 F1      			inc.h	<_di
  338    14:C7FC  E6 ED      			inc.h	<_bp			; Limited to 8KB maximum!
  339                        	;		jsr	inc.h_bp_mpr34
  340    14:C7FE  80 E6      			bra	.loop
  341                        	
  342    14:C800  C6 F9      	.page:		dec.h	<_ax			; Decrement length.h 
  343    14:C802  10 E5      			bpl	.test			; Limit comparison to 32KB.
  344                        	;		bra	cmp_same
  345                        	
  346    14:C804  82         	.return_same:	clx				; Return code in Y:X, X -> A.
  347    14:C805  C2         			cly
  348    14:C806  80 09      			bra	!+
  349                        	
  350    14:C808  A2 01      	.return_pos:	ldx	#$01			; Return code in Y:X, X -> A.
  351    14:C80A  C2         			cly
  352    14:C80B  80 04      			bra	!+
  353                        	
  354    14:C80D  A2 FF      	.return_neg:	ldx	#$FF			; Return code in Y:X, X -> A.
  355    14:C80F  A0 FF      			ldy	#$FF
  356                        	
  357    14:C811  68         	!:		pla				; Restore MPR3 and MPR4.
  358    14:C812  53 10      			tam4
  359    14:C814  68         			pla
  360    14:C815  53 08      			tam3
  361                        	
  362                        			leave				; Return and copy X -> A.
         14:C817  4C EF FF   			jmp	leave_proc
  363                        	
  364                        			.endp
  365                        	
  366                        			.endprocgroup			; hucc_memcmp
  367                        	
  368    00:E765             			.alias	_far_memcmp.2		= _farmemcmp.3
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   64                        		.endif
   65                        	
   66               0001     		.ifdef	HUCC_USES_NEW_SCROLL		; Set in hucc_scroll.h
                             #[3]   "..\..\..\include\hucc\hucc-scroll.asm"
   67                        			include	"hucc-scroll.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-scroll.asm
    5                        	;
    6                        	; Routines for a fast split-screen scrolling system.
    7                        	;
    8                        	; Copyright John Brandwood 2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; The maximum number of splits for each screen layer is set in your project's
   18                        	; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
   19                        	;
   20                        	; Your first active split must be defined to start at screen line 0, and then
   21                        	; the rest of the active splits must be in increasing line order to match the
   22                        	; way that the PC Engine displays the output image.
   23                        	;
   24                        	; You can have disabled splits interleaved with your active splits.
   25                        	;
   26                        	; Splits that are normally disabled can be used to create full screen effects
   27                        	; such as bouncing the screen up and down by adding blank areas at the top or
   28                        	; bottom of the screen, and then rapidly changing the height of those areas.
   29                        	;
   30                        	; ***************************************************************************
   31                        	; ***************************************************************************
   32                        	
   33                        	
   34                        	
   35               0000     		.ifndef	HUCC_PCE_SPLITS
   37                        		.endif
   38                        	
   39               0000     		.ifndef	HUCC_SGX_SPLITS
   41                        		.endif
   42                        	
   43               0000     		.if	(HUCC_PCE_SPLITS < 2) || (HUCC_PCE_SPLITS > 128)
   45                        		.endif
   46                        	
   47               0000     		.if	(HUCC_SGX_SPLITS < 2) || (HUCC_SGX_SPLITS > 128)
   49                        		.endif
   50                        	
   51               0144     	HUCC_1ST_RCR	=	$144
   52               00E0     	HUCC_SCR_HEIGHT	=	224
   53                        	
   54               E765     			.code
   55                        	
   56                        	
   57                        	
   58                        	; ***************************************************************************
   59                        	; ***************************************************************************
   60                        	;
   61                        	; void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
   62                        	; void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
   63                        	;
   64                        	; set screen scrolling
   65                        	
   66                        			.proc	_scroll_split.5
  143                        			.endp
  144                        	
  145               0001     		.if	SUPPORT_SGX
  146                        	
  147    02:DF67             			.proc	_sgx_scroll_split.5
  148                        	
  149    02:DF67  08         			php				; Disable interrupts while
  150    02:DF68  78         			sei				; updating this structure.
  151                        	
  152    02:DF69  A6 F8      			ldx	<_al			; Region number.
  153    02:DF6B  E0 08      			cpx	#HUCC_SGX_SPLITS
  154    02:DF6D  B0 FE      	.hang:		bcs	.hang			; Better a hang than a crash!
  155                        	
  156    02:DF6F  BD 2E 27   			lda	sgx_region_sel, x	; Update the parameter copy
  157    02:DF72  5D 36 27   			eor	sgx_region_new, x	; that is not displayed now.
  158    02:DF75  D0 3B      			bne	.regionA
  159                        	
  160    02:DF77  A5 F9      	.regionB:	lda	<_ah			; Scanline (i.e. top).
  161    02:DF79  C9 E0      			cmp	#HUCC_SCR_HEIGHT	; Skip if offscreen.
  162    02:DF7B  B0 31      			bcs	!done+
  163    02:DF7D  9D 56 27   			sta	sgx_regionB_rcr, x
  164                        	
  165    02:DF80  C9 00      			cmp	#0			; Either Y at top of the frame
  166    02:DF82  F0 01      			beq	!+			; or Y-1 because the RCR code
  167    02:DF84  18         			clc				; sets it on the line before.
  168    02:DF85  A5 FC      	!:		lda.l	<_cx
  169    02:DF87  E9 00      			sbc	#0
  170    02:DF89  9D 86 27   			sta	sgx_regionB_yl, x
  171    02:DF8C  A5 FD      			lda.h	<_cx
  172    02:DF8E  E9 00      			sbc	#0
  173    02:DF90  9D 96 27   			sta	sgx_regionB_yh, x
  174                        	
  175    02:DF93  A5 FA      			lda.l	<_bx
  176    02:DF95  9D 66 27   			sta	sgx_regionB_xl, x
  177    02:DF98  A5 FB      			lda.h	<_bx
  178    02:DF9A  9D 76 27   			sta	sgx_regionB_xh, x
  179                        	
  180    02:DF9D  A5 FE      			lda	<_dl
  181    02:DF9F  29 C0      			and	#$C0			; Flags (mark it as enabled).
  182    02:DFA1  09 0C      			ora	#$0C
  183    02:DFA3  9D 46 27   			sta	sgx_regionB_crl, x
  184                        	
  185    02:DFA6  A9 01      			lda	#1			; Mark that we've changed the
  186    02:DFA8  9D 36 27   			sta	sgx_region_new, x	; selected region.
  187    02:DFAB  9D 2E 27   			sta	sgx_region_sel, x
  188                        	
  189    02:DFAE  28         	!done:		plp				; Restore interrupts.
  190                        			leave				; All done!
         02:DFAF  4C EF FF   			jmp	leave_proc
  191                        	
  192    02:DFB2  A5 F9      	.regionA:	lda	<_ah			; Scanline (i.e. top).
  193    02:DFB4  C9 E0      			cmp	#HUCC_SCR_HEIGHT	; Skip if offscreen.
  194    02:DFB6  B0 31      			bcs	!done+
  195    02:DFB8  9D 4E 27   			sta	sgx_regionA_rcr, x
  196                        	
  197    02:DFBB  C9 00      			cmp	#0			; Either Y at top of the frame
  198    02:DFBD  F0 01      			beq	!+			; or Y-1 because the RCR code
  199    02:DFBF  18         			clc				; sets it on the line before.
  200    02:DFC0  A5 FC      	!:		lda.l	<_cx
  201    02:DFC2  E9 00      			sbc	#0
  202    02:DFC4  9D 7E 27   			sta	sgx_regionA_yl, x
  203    02:DFC7  A5 FD      			lda.h	<_cx
  204    02:DFC9  E9 00      			sbc	#0
  205    02:DFCB  9D 8E 27   			sta	sgx_regionA_yh, x
  206                        	
  207    02:DFCE  A5 FA      			lda.l	<_bx
  208    02:DFD0  9D 5E 27   			sta	sgx_regionA_xl, x
  209    02:DFD3  A5 FB      			lda.h	<_bx
  210    02:DFD5  9D 6E 27   			sta	sgx_regionA_xh, x
  211                        	
  212    02:DFD8  A5 FE      			lda	<_dl
  213    02:DFDA  29 C0      			and	#$C0			; Flags (mark it as enabled).
  214    02:DFDC  09 0C      			ora	#$0C
  215    02:DFDE  9D 3E 27   			sta	sgx_regionA_crl, x
  216                        	
  217    02:DFE1  A9 01      			lda	#1			; Mark that we've changed the
  218    02:DFE3  9D 36 27   			sta	sgx_region_new, x	; selected region.
  219    02:DFE6  9E 2E 27   			stz	sgx_region_sel, x
  220                        	
  221    02:DFE9  28         	!done:		plp				; Restore interrupts.
  222                        			leave				; All done!
         02:DFEA  4C EF FF   			jmp	leave_proc
  223                        	
  224                        			.endp
  225                        	
  226                        		.endif	SUPPORT_SGX
  227                        	
  228                        	
  229                        	
  230                        	; ***************************************************************************
  231                        	; ***************************************************************************
  232                        	;
  233                        	; void __fastcall disable_split( unsigned char index<acc> );
  234                        	; void __fastcall sgx_disable_split( unsigned char index<acc> );
  235                        	;
  236                        	; disable screen scrolling for a scroll region
  237                        	
  238    00:E765             	_disable_split.1:
  239    00:E765  08         			php				; Disable interrupts while
  240    00:E766  78         			sei				; updating this structure.
  241                        	
  242    00:E767  C9 08      			cmp	#HUCC_PCE_SPLITS	; Better a hang than a crash!
  243    00:E769  B0 FE      	.hang:		bcs	.hang
  244    00:E76B  AA         			tax
  245                        	
  246    00:E76C  BD AD 26   			lda	vdc_region_sel, x	; Update the parameter copy
  247    00:E76F  5D B5 26   			eor	vdc_region_new, x	; that is not displayed now.
  248    00:E772  D0 0D      			bne	.regionA
  249                        	
  250    00:E774  9E C5 26   	.regionB:	stz	vdc_regionB_crl, x	; Region disabled if $00.
  251                        	
  252    00:E777  A9 01      			lda	#1			; Mark that we've changed the
  253    00:E779  9D B5 26   			sta	vdc_region_new, x	; selected region.
  254    00:E77C  9D AD 26   			sta	vdc_region_sel, x
  255                        	
  256    00:E77F  28         			plp				; Restore interrupts.
  257    00:E780  60         			rts
  258                        	
  259    00:E781  9E BD 26   	.regionA:	stz	vdc_regionA_crl, x	; Region disabled if $00.
  260                        	
  261    00:E784  A9 01      			lda	#1			; Mark that we've changed the
  262    00:E786  9D B5 26   			sta	vdc_region_new, x	; selected region.
  263    00:E789  9E AD 26   			stz	vdc_region_sel, x
  264                        	
  265    00:E78C  28         			plp				; Restore interrupts.
  266    00:E78D  60         			rts
  267                        	
  268               0001     		.if	SUPPORT_SGX
  269                        	
  270    00:E78E             	_sgx_disable_split.1:
  271    00:E78E  08         			php				; Disable interrupts while
  272    00:E78F  78         			sei				; updating this structure.
  273                        	
  274    00:E790  C9 08      			cmp	#HUCC_SGX_SPLITS	; Better a hang than a crash!
  275    00:E792  B0 FE      	.hang:		bcs	.hang
  276    00:E794  AA         			tax
  277                        	
  278    00:E795  BD 2E 27   			lda	sgx_region_sel, x	; Update the parameter copy
  279    00:E798  5D 36 27   			eor	sgx_region_new, x	; that is not displayed now.
  280    00:E79B  D0 0D      			bne	.regionA
  281                        	
  282    00:E79D  9E 46 27   	.regionB:	stz	sgx_regionB_crl, x	; Region disabled if $00.
  283                        	
  284    00:E7A0  A9 01      			lda	#1			; Mark that we've changed the
  285    00:E7A2  9D 36 27   			sta	sgx_region_new, x	; selected region.
  286    00:E7A5  9D 2E 27   			sta	sgx_region_sel, x
  287                        	
  288    00:E7A8  28         			plp				; Restore interrupts.
  289    00:E7A9  60         			rts
  290                        	
  291    00:E7AA  9E 3E 27   	.regionA:	stz	sgx_regionA_crl, x	; Region disabled if $00.
  292                        	
  293    00:E7AD  A9 01      			lda	#1			; Mark that we've changed the
  294    00:E7AF  9D 36 27   			sta	sgx_region_new, x	; selected region.
  295    00:E7B2  9E 2E 27   			stz	sgx_region_sel, x
  296                        	
  297    00:E7B5  28         			plp				; Restore interrupts.
  298    00:E7B6  60         			rts
  299                        	
  300                        		.endif	SUPPORT_SGX
  301                        	
  302                        	
  303                        	
  304                        	; ***************************************************************************
  305                        	; ***************************************************************************
  306                        	;
  307                        	; vbl_init_scroll
  308                        	;
  309                        	; From Charles MacDonald's pcetech.txt ...
  310                        	;
  311                        	;  Raster Compare Register (RCR):
  312                        	;
  313                        	;  The range of the RCR is 263 lines, relative to the start of the active
  314                        	;  display period. (defined by VSW, VDS, and VCR) The VDC treats the first
  315                        	;  scanline of the active display period as $0040, so the valid ranges for
  316                        	;  the RCR register are $0040 to $0146.
  317                        	;
  318                        	;  For example, assume VSW=$02, VDS=$17. This positions the first line of
  319                        	;  the active display period at line 25 of the frame. An RCR value of $0040
  320                        	;  (zero) causes an interrupt at line 25, and a value of $0146 (262) causes an
  321                        	;  interrupt at line 24 of the next frame.
  322                        	;
  323                        	;  Any other RCR values that are out of range ($00-$3F, $147-$3FF) will never
  324                        	;  result in a successful line compare.
  325                        	;
  326                        	; Processing time:
  327                        	;
  328                        	; Old HuC rcr_init: 2148 cycles if all 8 regions pre-sorted
  329                        	; Old HuC rcr_init: 4346 cycles if all 8 regions need sorting
  330                        	;
  331                        	; New HuCC vbl_init_scroll:   8 disabled splits:  290 cycles
  332                        	; New HuCC vbl_init_scroll:   8  enabled splits:  384 cycles
  333                        	;
  334                        	; New HuCC vbl_init_scroll:  16 disabled splits:  506 cycles
  335                        	; New HuCC vbl_init_scroll:  16  enabled splits:  672 cycles
  336                        	;
  337                        	; New HuCC vbl_init_scroll:  32 disabled splits:  953 cycles
  338                        	; New HuCC vbl_init_scroll:  32  enabled splits: 1263 cycles
  339                        	;
  340                        	; New HuCC vbl_init_scroll:  64 disabled splits: 1802 cycles
  341                        	; New HuCC vbl_init_scroll:  64  enabled splits: 2400 cycles
  342                        	;
  343                        	; New HuCC vbl_init_scroll: 128 disabled splits: 3530 cycles
  344                        	; New HuCC vbl_init_scroll: 128  enabled splits: 4704 cycles
  345                        	;
  346                        	; Memory used is 16 bytes per scroll per VDC!
  347                        	
  348               26AD     			.bss
  349                        	
  350    F8:26AD             	vdc_region_sel:	.ds	HUCC_PCE_SPLITS		; Use A or B region next frame?
  351    F8:26B5             	vdc_region_new:	.ds	HUCC_PCE_SPLITS		; 1 if vdc_region_sel modified.
  352                        	
  353    F8:26BD             	vdc_regionA_crl:.ds	HUCC_PCE_SPLITS		; Two copies of each setting
  354    F8:26C5             	vdc_regionB_crl:.ds	HUCC_PCE_SPLITS		; HUCC_PCE_SPLITS bytes apart,
  355    F8:26CD             	vdc_regionA_rcr:.ds	HUCC_PCE_SPLITS		; one setting for the current
  356    F8:26D5             	vdc_regionB_rcr:.ds	HUCC_PCE_SPLITS		; frame, and one setting that
  357    F8:26DD             	vdc_regionA_xl:	.ds	HUCC_PCE_SPLITS		; gets modified and then used
  358    F8:26E5             	vdc_regionB_xl:	.ds	HUCC_PCE_SPLITS		; on the next frame after the
  359    F8:26ED             	vdc_regionA_xh:	.ds	HUCC_PCE_SPLITS		; change is made.
  360    F8:26F5             	vdc_regionB_xh:	.ds	HUCC_PCE_SPLITS		; Regions will have different
  361    F8:26FD             	vdc_regionA_yl:	.ds	HUCC_PCE_SPLITS		; A or B currently active!
  362    F8:2705             	vdc_regionB_yl:	.ds	HUCC_PCE_SPLITS
  363    F8:270D             	vdc_regionA_yh:	.ds	HUCC_PCE_SPLITS
  364    F8:2715             	vdc_regionB_yh:	.ds	HUCC_PCE_SPLITS
  365                        	
  366    F8:271D             	vdc_next_region:.ds	1			; Linked list of region indexes
  367    F8:271E             	vdc_regionA_nxt:.ds	HUCC_PCE_SPLITS		; for the current frame.
  368    F8:2726             	vdc_regionB_nxt:.ds	HUCC_PCE_SPLITS
  369                        	
  370               0001     		.if	SUPPORT_SGX
  371                        	
  372    F8:272E             	sgx_region_sel:	.ds	HUCC_SGX_SPLITS		; Use A or B region next frame?
  373    F8:2736             	sgx_region_new:	.ds	HUCC_SGX_SPLITS		; 1 if sgx_region_sel modified.
  374                        	
  375    F8:273E             	sgx_regionA_crl:.ds	HUCC_SGX_SPLITS		; Two copies of each setting
  376    F8:2746             	sgx_regionB_crl:.ds	HUCC_SGX_SPLITS		; HUCC_SGX_SPLITS bytes apart,
  377    F8:274E             	sgx_regionA_rcr:.ds	HUCC_SGX_SPLITS		; one setting for the current
  378    F8:2756             	sgx_regionB_rcr:.ds	HUCC_SGX_SPLITS		; frame, and one setting that
  379    F8:275E             	sgx_regionA_xl:	.ds	HUCC_SGX_SPLITS		; gets modified and then used
  380    F8:2766             	sgx_regionB_xl:	.ds	HUCC_SGX_SPLITS		; on the next frame after the
  381    F8:276E             	sgx_regionA_xh:	.ds	HUCC_SGX_SPLITS		; change is made.
  382    F8:2776             	sgx_regionB_xh:	.ds	HUCC_SGX_SPLITS		; Regions will have different
  383    F8:277E             	sgx_regionA_yl:	.ds	HUCC_SGX_SPLITS		; A or B currently active!
  384    F8:2786             	sgx_regionB_yl:	.ds	HUCC_SGX_SPLITS
  385    F8:278E             	sgx_regionA_yh:	.ds	HUCC_SGX_SPLITS
  386    F8:2796             	sgx_regionB_yh:	.ds	HUCC_SGX_SPLITS
  387                        	
  388    F8:279E             	sgx_next_region:.ds	1			; Linked list of region indexes
  389    F8:279F             	sgx_regionA_nxt:.ds	HUCC_SGX_SPLITS		; for the current frame.
  390    F8:27A7             	sgx_regionB_nxt:.ds	HUCC_SGX_SPLITS
  391                        	
  392                        		.endif
  393                        	
  394               E7B7     			.code
  395                        	
  396    14:C4DF             	vbl_init_scroll	.proc
  397                        	
  398    14:C4DF  62         			cla				; A = previous active index
  399    14:C4E0  A2 08      			ldx	#HUCC_PCE_SPLITS	; so $00 for end-of-screen.
  400                        	
  401    14:C4E2  18         			clc				; For regionB indexes.
  402                        	
  403    14:C4E3  CA         	!next_region:	dex				; All regions updated?
  404    14:C4E4  30 20      			bmi	!save_first+
  405                        	
  406    14:C4E6  9E B5 26   			stz	vdc_region_new, x	; Clear region modified flag.
  407                        	
  408    14:C4E9  BC AD 26   			ldy	vdc_region_sel, x	; 0=regionA or 1=regionB.
  409    14:C4EC  F0 0D      			beq	!use_regionA+
  410                        	
  411    14:C4EE  BC C5 26   	!use_regionB:	ldy	vdc_regionB_crl, x	; Region disabled if $00.
  412    14:C4F1  F0 F0      			beq	!next_region-
  413    14:C4F3  9D 26 27   			sta	vdc_regionB_nxt, x	; Save index of next region.
  414    14:C4F6  8A         			txa				; A = current region index.
  415    14:C4F7  69 08      			adc	#HUCC_PCE_SPLITS	; Always leaves CC!
  416    14:C4F9  80 E8      			bra	!next_region-
  417                        	
  418    14:C4FB  BC BD 26   	!use_regionA:	ldy	vdc_regionA_crl, x	; Region disabled if $00.
  419    14:C4FE  F0 E3      			beq	!next_region-
  420    14:C500  9D 1E 27   			sta	vdc_regionA_nxt, x	; Save index of next region.
  421    14:C503  8A         			txa				; A = current region index.
  422    14:C504  80 DD      			bra	!next_region-
  423                        	
  424    14:C506  8D 1D 27   	!save_first:	sta	vdc_next_region		; Save index of 1st region.
  425                        	
  426    14:C509  AA         			tax				; NZ if first active region
  427    14:C50A  D0 03      			bne	!init_first+		; is not region 0.
  428    14:C50C  98         			tya				; NZ if region 0 is active.
  429    14:C50D  F0 0F      			beq	!+			; If no active leave RCR=0.
  430                        	
  431    14:C50F  A9 06      	!init_first:	lda	#VDC_RCR		; 1st RCR always happens just
  432    14:C511  8D 00 02   			sta	VDC_AR			; before the display starts.
  433    14:C514  A9 44      			lda.l	#HUCC_1ST_RCR
  434    14:C516  8D 02 02   			sta	VDC_DL
  435    14:C519  A9 01      			lda.h	#HUCC_1ST_RCR
  436    14:C51B  8D 03 02   			sta	VDC_DH
  437                        	
  438               0001     		.if	SUPPORT_SGX
  439                        	
  440    14:C51E  62         	!:		cla				; A = previous active index
  441    14:C51F  A2 08      			ldx	#HUCC_SGX_SPLITS	; so $00 for end-of-screen.
  442                        	
  443    14:C521  18         			clc				; For regionB indexes.
  444                        	
  445    14:C522  CA         	!next_region:	dex				; All regions updated?
  446    14:C523  30 20      			bmi	!save_first+
  447                        	
  448    14:C525  9E 36 27   			stz	sgx_region_new, x	; Clear region modified flag.
  449                        	
  450    14:C528  BC 2E 27   			ldy	sgx_region_sel, x	; 0=regionA or 1=regionB.
  451    14:C52B  F0 0D      			beq	!use_regionA+
  452                        	
  453    14:C52D  BC 46 27   	!use_regionB:	ldy	sgx_regionB_crl, x	; Region disabled if $00.
  454    14:C530  F0 F0      			beq	!next_region-
  455    14:C532  9D A7 27   			sta	sgx_regionB_nxt, x	; Save index of next region.
  456    14:C535  8A         			txa				; A = current region index.
  457    14:C536  69 08      			adc	#HUCC_SGX_SPLITS	; Always leaves CC!
  458    14:C538  80 E8      			bra	!next_region-
  459                        	
  460    14:C53A  BC 3E 27   	!use_regionA:	ldy	sgx_regionA_crl, x	; Region disabled if $00.
  461    14:C53D  F0 E3      			beq	!next_region-
  462    14:C53F  9D 9F 27   			sta	sgx_regionA_nxt, x	; Save index of next region.
  463    14:C542  8A         			txa				; A = current region index.
  464    14:C543  80 DD      			bra	!next_region-
  465                        	
  466    14:C545  8D 9E 27   	!save_first:	sta	sgx_next_region		; Save index of 1st region.
  467                        	
  468    14:C548  AA         			tax				; NZ if first active region
  469    14:C549  D0 03      			bne	!init_first+		; is not region 0.
  470    14:C54B  98         			tya				; NZ if region 0 is active.
  471    14:C54C  F0 0F      			beq	!+			; If no active leave RCR=0.
  472                        	
  473    14:C54E  A9 06      	!init_first:	lda	#VDC_RCR		; 1st RCR always happens just
  474    14:C550  8D 10 02   			sta	SGX_AR			; before the display starts.
  475    14:C553  A9 44      			lda.l	#HUCC_1ST_RCR
  476    14:C555  8D 12 02   			sta	SGX_DL
  477    14:C558  A9 01      			lda.h	#HUCC_1ST_RCR
  478    14:C55A  8D 13 02   			sta	SGX_DH
  479                        	
  480                        		.endif	SUPPORT_SGX
  481                        	
  482                        	!:		leave				; All done!
         14:C55D  4C EF FF   			jmp	leave_proc
  483                        	
  484                        			.endp
  485                        	
  486                        	
  487                        	
  488               0001     		.if	SUPPORT_SGX
  489                        	
  490                        	; ***************************************************************************
  491                        	; ***************************************************************************
  492                        	;
  493                        	; VDC_RCR_MACRO and SGX_RCR_MACRO
  494                        	;
  495                        	; A 16-byte TIA takes 142..234 cycles in 5MHz, 128..200 cycles in 7MHz.
  496                        	; A 32-byte TIA takes 270..364 cycles in 5MHz, 242..312 cycles in 7MHz. (527 DUO)
  497                        	;
  498                        	; You need to write the last RCR setting within 540 cycles in order to catch
  499                        	; the next line (at 256/336/512 resolution).
  500                        	;
  501                        	; That gives 305 cycles from the RCR to write the last setting, or there
  502                        	; will be a visible glitch on the screen.
  503                        	
  504               0000     		.ifndef	USING_RCR_MACROS
  506                        		.endif
  507                        	
  508                        	;		;;;				; 8 (cycles for the INT)
  509                        	;		bbs1	<irq_vec, .hook		; 8
  510                        	;		jmp	[irq1_hook]		; 7
  511                        	
  512                        	;		;;;				; 8 (cycles for the INT)
  513                        	;		jmp	irq1_handler		; 4
  514                        	
  515                        	;irq1_handler:	pha				; 3 Save all registers.
  516                        	;		phx				; 3
  517                        	;		phy				; 3
  518                        	;
  519                        	;		lda	VDC_SR			; 6 Acknowledge the VDC's IRQ.
  520                        	;		sta	<vdc_sr			; 4 Remember what caused it.
  521                        	;
  522                        	;		ldx	SGX_SR			; 6 Read SGX_SR after VDC_SR in
  523                        	;		stx	<sgx_sr			; 4 case this is not an SGX!
  524                        	;
  525                        	;!:		and	#$04			; 2 Is this an HSYNC interrupt?
  526                        	;		beq	!+			; 2
  527                        	
  528                        			.macro	VDC_RCR_MACRO
  529                        	
  530                        			st0	#VDC_RCR		; 5
  531                        	
  532                        			ldx	vdc_next_region		; 5 X and Y can be greater than
  533                        			ldy	vdc_regionA_nxt, x	; 5 HUCC_PCE_SPLITS if regionB!
  534                        			clc				; 2
  535                        			bne	!set_next_rcr+		; 4 Stop RCR if next line is 0.
  536                        	
  537                        			and	const_0000		; 5 A=$00 with the same #cycles
  538                        			bra	!clr_next_rcr+		; 4 as if the branch were taken.
  539                        	
  540                        	!set_next_rcr:	lda	vdc_regionA_rcr, y	; 5 Set next RCR 1 line before
  541                        			adc	#64-1			; 2 the region begins, or 0 to
  542                        	!clr_next_rcr:	sta	VDC_DL			; 6 disable.
  543                        			cla				; 2
  544                        			rol	a			; 2
  545                        			sta	VDC_DH			; 6
  546                        	
  547                        			st0	#VDC_BYR		; 5 Do BYR first to mitigate the
  548                        			lda	vdc_regionA_yl, x	; 5 glitch if the IRQ is delayed.
  549                        			sta	VDC_DL			; 6 = 105 cycles from RCR on SGX
  550                        			lda	vdc_regionA_yh, x	; 5
  551                        			sta	VDC_DH			; 6
  552                        	
  553                        			st0	#VDC_CR			; 5
  554                        			lda	vdc_regionA_crl, x	; 5
  555                        	;		asl	a
  556                        			sta	VDC_DL			; 6
  557                        	
  558                        			st0	#VDC_BXR		; 2
  559                        			lda	vdc_regionA_xl, x	; 5
  560                        			sta	VDC_DL			; 6
  561                        			lda	vdc_regionA_xh, x	; 5
  562                        			sta	VDC_DH			; 6 = 156 cycles from RCR if DUO
  563                        	
  564                        	;		bcc	!+
  565                        	;		lda	vdc_regionA_yh, x	; 5
  566                        	;		sta.l	VCE_CTW			; 6
  567                        	
  568                        			sty	vdc_next_region		; 5
  569                        	
  570                        			.endm
  571                        	
  572                        	;!:		bbr2	<sgx_sr, !+		; 6 Is this an HSYNC interrupt?
  573                        	
  574                        			.macro	SGX_RCR_MACRO
  575                        	
  576                        			lda	#VDC_RCR		; 2
  577                        			sta	SGX_AR			; 6
  578                        	
  579                        			ldx	sgx_next_region		; 5 X and Y can be greater than
  580                        			ldy	sgx_regionA_nxt, x	; 5 HUCC_SGX_SPLITS if regionB!
  581                        			clc				; 2
  582                        			bne	!set_next_rcr+		; 4 Stop RCR if next line is 0.
  583                        	
  584                        			and	const_0000		; 5 A=$00 with the same #cycles
  585                        			bra	!clr_next_rcr+		; 4 as if the branch were taken.
  586                        	
  587                        	!set_next_rcr:	lda	sgx_regionA_rcr, y	; 5 Set next RCR 1 line before
  588                        			adc	#64-1			; 2 the region begins, or 0 to
  589                        	!clr_next_rcr:	sta	SGX_DL			; 6 disable.
  590                        			cla				; 2
  591                        			rol	a			; 2
  592                        			sta	SGX_DH			; 6
  593                        	
  594                        			lda	#VDC_BYR		; 2 Do BYR first to mitigate the
  595                        			sta	SGX_AR			; 6 glitch if the IRQ is delayed.
  596                        			lda	sgx_regionA_yl, x	; 5
  597                        			sta	SGX_DL			; 6
  598                        			lda	sgx_regionA_yh, x	; 5
  599                        			sta	SGX_DH			; 6
  600                        	
  601                        			lda	#VDC_CR			; 2
  602                        			sta	SGX_AR			; 6
  603                        			lda	sgx_regionA_crl, x	; 5
  604                        			sta	SGX_DL			; 6
  605                        	
  606                        			lda	#VDC_BXR		; 2
  607                        			sta	SGX_AR			; 6
  608                        			lda	sgx_regionA_xl, x	; 5
  609                        			sta	SGX_DL			; 6
  610                        			lda	sgx_regionA_xh, x	; 5
  611                        			sta	SGX_DH			; 6 = 293 cycles (282 if no YH)
  612                        	
  613                        			sty	sgx_next_region		; 5
  614                        	
  615                        			.endm
  616                        	
  617                        		.else	SUPPORT_SGX
  697                        		.endif	SUPPORT_SGX
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   68                        		.else
   72                        		.endif	HUCC_USES_NEW_SCROLL
   73                        	
   74               0001     		.ifdef	HUCC_USES_OLD_SPR		; Set in hucc_old_spr.h
                             #[3]   "..\..\..\include\hucc\hucc-old-spr.asm"
   75                        			include	"hucc-old-spr.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-old-spr.asm
    5                        	;
    6                        	; Based on the original HuC and MagicKit functions by David Michel and the
    7                        	; other original HuC developers.
    8                        	;
    9                        	; Modifications copyright John Brandwood 2024.
   10                        	;
   11                        	; Distributed under the Boost Software License, Version 1.0.
   12                        	; (See accompanying file LICENSE_1_0.txt or copy at
   13                        	;  http://www.boost.org/LICENSE_1_0.txt)
   14                        	;
   15                        	; ***************************************************************************
   16                        	; ***************************************************************************
   17                        	
   18                        	;
   19                        	; Include dependancies ...
   20                        	;
   21                        	
   22                        			include "common.asm"		; Common helpers.
   23                        			include "vce.asm"		; Useful VCE routines.
   24                        			include "vdc.asm"		; Useful VCE routines.
   25                        	
   26                        	
   27                        	
   28                        	; ***************************************************************************
   29                        	; ***************************************************************************
   30                        	;
   31                        	; HuC Sprite Functions
   32                        	;
   33                        	; ***************************************************************************
   34                        	; ***************************************************************************
   35                        	
   36               209C     			.zp
   37    F8:209C             	spr_ptr:	ds	2
   38               27AF     			.bss
   39    F8:27AF             	spr_sat:	ds	512
   40               E7B7     			.code
   41                        	
   42               0001     		.if	SUPPORT_SGX
   43               209E     			.zp
   44    F8:209E             	sgx_spr_ptr:	ds	2
   45               29AF     			.bss
   46    F8:29AF             	sgx_spr_sat:	ds	512	; N.B. Directly after spr_sat!
   47               E7B7     			.code
   48                        		.endif
   49                        	
   50                        	; Moved to hucc-old-map.asm just to save space. This NEEDS to be changed!
   51                        	;
   52                        	;		.bss
   53                        	;spr_max:	ds	1
   54                        	;spr_clr:	ds	1
   55                        	;	.if	SUPPORT_SGX
   56                        	;sgx_spr_max:	ds	1
   57                        	;sgx_spr_clr:	ds	1
   58                        	;	.endif
   59                        	;		.code
   60                        	
   61                        	
   62                        	
   63                        	; ***************************************************************************
   64                        	; ***************************************************************************
   65                        	;
   66                        	; void __fastcall init_satb( void );
   67                        	; void __fastcall reset_satb( void );
   68                        	;
   69                        	; void __fastcall sgx_init_satb( void );
   70                        	; void __fastcall sgx_reset_satb( void );
   71                        	
   72    00:E7B7             	_reset_satb:
   73    00:E7B7  C2         	_init_satb:	cly
   74    00:E7B8  62         			cla
   75    00:E7B9  99 AF 27   	!:		sta	spr_sat + $0000, y
   76    00:E7BC  99 AF 28   			sta	spr_sat + $0100, y
   77    00:E7BF  C8         			iny
   78    00:E7C0  D0 F7      			bne	!-
   79    00:E7C2  8C 83 26   			sty	spr_max
   80    00:E7C5  C8         			iny
   81    00:E7C6  8C 84 26   			sty	spr_clr
   82    00:E7C9  60         			rts
   83                        	
   84               0001     		.if	SUPPORT_SGX
   85    00:E7CA             	_sgx_reset_satb:
   86    00:E7CA  C2         	_sgx_init_satb:	cly
   87    00:E7CB  62         			cla
   88    00:E7CC  99 AF 29   	!:		sta	sgx_spr_sat + $0000, y
   89    00:E7CF  99 AF 2A   			sta	sgx_spr_sat + $0100, y
   90    00:E7D2  C8         			iny
   91    00:E7D3  D0 F7      			bne	!-
   92    00:E7D5  8C 93 26   			sty	sgx_spr_max
   93    00:E7D8  C8         			iny
   94    00:E7D9  8C 94 26   			sty	sgx_spr_clr
   95    00:E7DC  60         			rts
   96                        		.endif
   97                        	
   98                        	
   99                        	
  100                        	; ***************************************************************************
  101                        	; ***************************************************************************
  102                        	;
  103                        	; void __fastcall satb_update( void );
  104                        	; void __fastcall sgx_satb_update( void );
  105                        	
  106    14:C781             	old_satb_group	.procgroup
  107                        	
  108               0001     		.if	SUPPORT_SGX
  109    14:C781             			.proc	_sgx_satb_update
  110                        	
  111    14:C781  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  112    14:C783  F0         			db	$F0			; Turn "clx" into a "beq".
  113                        	
  114    14:C784             			.ref	_satb_update
  115                        			.endp
  116                        		.endif
  117                        	
  118    14:C784             			.proc	_satb_update
  119                        	
  120    14:C784  82         			clx				; Offset to PCE VDC.
  121                        	
  122    14:C785  A9 7F      			lda.h	#$7F00			; HuC puts the SAT here in VRAM
  123                        	;		lda.h	#$0800			; but we put it here instead
  124    14:C787  64 F0      			stz.l	<_di
  125    14:C789  85 F1      			sta.h	<_di
  126    14:C78B  20 7F E3   			jsr	set_di_to_mawr
  127                        	
  128               0001     		.if	SUPPORT_SGX
  129    14:C78E  8A         			txa				; Select which VDC to write
  130    14:C78F  1A         			inc	a			; to.
  131    14:C790  1A         			inc	a
  132    14:C791  8D F3 22   			sta.l	ram_tia_dst
  133                        		.endif
  134                        	
  135    14:C794  A9 10      			lda	#VRAM_XFER_SIZE		; Split into 16-byte chunks
  136    14:C796  8D F5 22   			sta.l	ram_tia_len		; for stable IRQ response.
  137                        	
  138    14:C799  BC 83 26   			ldy	spr_max, x		; Highest sprite that was set.
  139    14:C79C  C8         			iny
  140                        	
  141    14:C79D  BD 84 26   			lda	spr_clr, x
  142    14:C7A0  F0 05      			beq	!+
  143    14:C7A2  9E 84 26   			stz	spr_clr, x
  144    14:C7A5  A0 40      			ldy	#64
  145                        	
  146    14:C7A7  98         	!:		tya
  147    14:C7A8  F0 22      			beq	.exit
  148                        	
  149    14:C7AA  3A         			dec	a			; round up to the next group of 2 sprites
  150    14:C7AB  4A         			lsr	a
  151               0000     		.if	VRAM_XFER_SIZE == 32
  153                        		.endif
  154    14:C7AC  1A         			inc	a
  155    14:C7AD  A8         			tay
  156                        	
  157    14:C7AE  A9 27      			lda.h	#spr_sat
  158                        	
  159               0001     		.if	SUPPORT_SGX
  160    14:C7B0  E0 00      			cpx	#0
  161    14:C7B2  F0 02      			beq	!+
  162                        	
  163    14:C7B4  A9 29      			lda.h	#sgx_spr_sat
  164                        		.endif
  165                        	
  166    14:C7B6  8D F2 22   	!:		sta.h	ram_tia_src
  167                        	
  168    14:C7B9  A9 AF      			lda.l	#spr_sat		; Same for SGX and PCE!
  169    14:C7BB  8D F1 22   	.chunk_loop:	sta.l	ram_tia_src
  170                        	
  171    14:C7BE  20 F0 22   			jsr	ram_tia			; transfer 16-bytes
  172                        	
  173    14:C7C1  18         			clc				; increment source
  174    14:C7C2  69 10      			adc	#VRAM_XFER_SIZE
  175    14:C7C4  90 03      			bcc	.same_page
  176    14:C7C6  EE F2 22   			inc.h	ram_tia_src
  177                        	
  178    14:C7C9  88         	.same_page:	dey
  179    14:C7CA  D0 EF      			bne	.chunk_loop
  180                        	
  181                        	.exit:		leave
         14:C7CC  4C EF FF   			jmp	leave_proc
  182                        	
  183                        			.endp
  184                        	
  185                        			.endprocgroup	; old_satb_group
  186                        	
  187                        	
  188                        	
  189                        	; ***************************************************************************
  190                        	; ***************************************************************************
  191                        	;
  192                        	; void __fastcall spr_set( unsigned char num<acc> );
  193                        	
  194    00:E7DD  CD 83 26   	_spr_set.1:	cmp	spr_max
  195    00:E7E0  90 03      			bcc	!+
  196    00:E7E2  8D 83 26   			sta	spr_max
  197    00:E7E5  A0 27      	!:		ldy.h	#spr_sat
  198    00:E7E7  0A         			asl	a
  199    00:E7E8  0A         			asl	a
  200    00:E7E9  0A         			asl	a
  201    00:E7EA  90 02      			bcc	!+
  202    00:E7EC  C8         			iny
  203    00:E7ED  18         			clc
  204    00:E7EE  69 AF      	!:		adc.l	#spr_sat
  205    00:E7F0  85 9C      			sta.l	<spr_ptr
  206    00:E7F2  90 01      			bcc	!+
  207    00:E7F4  C8         			iny
  208    00:E7F5  84 9D      	!:		sty.h	<spr_ptr
  209    00:E7F7  60         			rts
  210                        	
  211                        	
  212                        	
  213                        	; ***************************************************************************
  214                        	; ***************************************************************************
  215                        	;
  216                        	; void __fastcall spr_hide( void );
  217                        	
  218    00:E7F8  A0 01      	_spr_hide:	ldy	#1
  219    00:E7FA  B1 9C      			lda	[spr_ptr], y
  220    00:E7FC  09 02      			ora	#2
  221    00:E7FE  91 9C      			sta	[spr_ptr], y
  222    00:E800  60         			rts
  223                        	
  224                        	
  225                        	
  226                        	; ***************************************************************************
  227                        	; ***************************************************************************
  228                        	;
  229                        	; void __fastcall spr_show( void );
  230                        	
  231    00:E801  A0 01      	_spr_show:	ldy	#1
  232    00:E803  B1 9C      			lda	[spr_ptr], y
  233    00:E805  29 01      			and	#1
  234    00:E807  91 9C      			sta	[spr_ptr], y
  235    00:E809  60         			rts
  236                        	
  237                        	
  238                        	
  239                        	; ***************************************************************************
  240                        	; ***************************************************************************
  241                        	;
  242                        	; void __fastcall spr_x( unsigned int value<acc> );
  243                        	
  244    00:E80A  02         	_spr_x.1:	sxy
  245    00:E80B  18         			clc
  246    00:E80C  69 20      			adc	#32
  247    00:E80E  A0 02      			ldy	#2
  248    00:E810  91 9C      			sta	[spr_ptr], y
  249    00:E812  8A         			txa
  250    00:E813  69 00      			adc	#0
  251    00:E815  C8         			iny
  252    00:E816  91 9C      			sta	[spr_ptr], y
  253    00:E818  60         			rts
  254                        	
  255                        	
  256                        	
  257                        	; ***************************************************************************
  258                        	; ***************************************************************************
  259                        	;
  260                        	; void __fastcall spr_y( unsigned int value<acc> );
  261                        	
  262    00:E819  18         	_spr_y.1:	clc
  263    00:E81A  69 40      			adc	#64
  264    00:E81C  92 9C      			sta	[spr_ptr]
  265    00:E81E  98         			tya
  266    00:E81F  69 00      			adc	#0
  267    00:E821  A0 01      			ldy	#1
  268    00:E823  91 9C      			sta	[spr_ptr], y
  269    00:E825  60         			rts
  270                        			
  271                        	
  272                        	
  273                        	; ***************************************************************************
  274                        	; ***************************************************************************
  275                        	;
  276                        	; void __fastcall spr_pattern( unsigned int vaddr<acc> );
  277                        	
  278    00:E826  84 00      	_spr_pattern.1:	sty	<__temp		;     zp=fedcba98 a=76543210
  279    00:E828  0A         			asl	a		; c=f zp=edcba987 a=6543210_
  280    00:E829  26 00      			rol	<__temp
  281    00:E82B  2A         			rol	a		; c=e zp=dcba9876 a=543210_f
  282    00:E82C  26 00      			rol	<__temp
  283    00:E82E  2A         			rol	a		; c=d zp=cba98765 a=43210_fe
  284    00:E82F  26 00      			rol	<__temp
  285    00:E831  2A         			rol	a		; c=4 zp=cba98765 a=3210_fed
  286    00:E832  A0 05      			ldy	#5
  287    00:E834  91 9C      			sta	[spr_ptr], y
  288    00:E836  A5 00      			lda	<__temp
  289    00:E838  88         			dey
  290    00:E839  91 9C      			sta	[spr_ptr], y
  291    00:E83B  60         			rts
  292                        	
  293                        	
  294                        	
  295                        	; ***************************************************************************
  296                        	; ***************************************************************************
  297                        	;
  298                        	; void __fastcall spr_ctrl( unsigned char mask<_al>, unsigned char value<acc> );
  299                        	
  300    00:E83C  25 F8      	_spr_ctrl.2:	and	<_al
  301    00:E83E  85 00      			sta	<__temp
  302    00:E840  A5 F8      			lda	<_al
  303    00:E842  49 FF      			eor	#$FF
  304    00:E844  A0 07      			ldy	#7
  305    00:E846  31 9C      			and	[spr_ptr], y
  306    00:E848  05 00      			ora	<__temp
  307    00:E84A  91 9C      			sta	[spr_ptr], y
  308    00:E84C  60         			rts
  309                        	
  310                        	
  311                        	
  312                        	; ***************************************************************************
  313                        	; ***************************************************************************
  314                        	;
  315                        	; void __fastcall spr_pal( unsigned char palette<acc> )
  316                        	
  317    00:E84D  29 0F      	_spr_pal.1:	and	#$0F
  318    00:E84F  85 00      			sta	<__temp
  319    00:E851  A0 06      			ldy	#6
  320    00:E853  B1 9C      			lda	[spr_ptr], y
  321    00:E855  29 F0      			and	#$F0
  322    00:E857  05 00      			ora	<__temp
  323    00:E859  91 9C      			sta	[spr_ptr], y
  324    00:E85B  60         			rts
  325                        	
  326                        	
  327                        	
  328                        	; ***************************************************************************
  329                        	; ***************************************************************************
  330                        	;
  331                        	; void __fastcall spr_pri( unsigned char priority<acc> )
  332                        	
  333    00:E85C  C9 01      	_spr_pri.1:	cmp	#1
  334    00:E85E  A0 06      			ldy	#6
  335    00:E860  B1 9C      			lda	[spr_ptr], y
  336    00:E862  29 7F      			and	#$7F
  337    00:E864  90 02      			bcc	!+
  338    00:E866  09 80      			ora	#$80
  339    00:E868  91 9C      	!:		sta	[spr_ptr], y
  340    00:E86A  60         			rts
  341                        	
  342                        	
  343                        	
  344                        	; ***************************************************************************
  345                        	; ***************************************************************************
  346                        	;
  347                        	; unsigned int __fastcall spr_get_x( void );
  348                        	
  349    00:E86B  38         	_spr_get_x:	sec
  350    00:E86C  A0 02      			ldy	#2
  351    00:E86E  B1 9C      			lda	[spr_ptr], y
  352    00:E870  E9 20      			sbc	#32
  353    00:E872  AA         			tax
  354    00:E873  C8         			iny
  355    00:E874  B1 9C      			lda	[spr_ptr], y
  356    00:E876  E9 00      			sbc	#0
  357    00:E878  A8         			tay
  358    00:E879  8A         			txa
  359    00:E87A  60         			rts
  360                        	
  361                        	
  362                        	
  363                        	; ***************************************************************************
  364                        	; ***************************************************************************
  365                        	;
  366                        	; unsigned int __fastcall spr_get_y( void );
  367                        	
  368    00:E87B  38         	_spr_get_y:	sec
  369    00:E87C  B2 9C      			lda	[spr_ptr]
  370    00:E87E  E9 40      			sbc	#64
  371    00:E880  AA         			tax
  372    00:E881  A0 01      			ldy	#1
  373    00:E883  B1 9C      			lda	[spr_ptr], y
  374    00:E885  E9 00      			sbc	#0
  375    00:E887  A8         			tay
  376    00:E888  8A         			txa
  377    00:E889  60         			rts
  378                        	
  379                        	
  380                        	
  381               0001     		.if	SUPPORT_SGX
  382                        	
  383                        	; ***************************************************************************
  384                        	; ***************************************************************************
  385                        	;
  386                        	; void __fastcall sgx_spr_set( unsigned char num<acc> );
  387                        	
  388    00:E88A  CD 93 26   	_sgx_spr_set.1:	cmp	sgx_spr_max
  389    00:E88D  90 03      			bcc	!+
  390    00:E88F  8D 93 26   			sta	sgx_spr_max
  391    00:E892  A0 29      	!:		ldy.h	#sgx_spr_sat
  392    00:E894  0A         			asl	a
  393    00:E895  0A         			asl	a
  394    00:E896  0A         			asl	a
  395    00:E897  90 02      			bcc	!+
  396    00:E899  C8         			iny
  397    00:E89A  18         			clc
  398    00:E89B  69 AF      	!:		adc.l	#sgx_spr_sat
  399    00:E89D  85 9E      			sta.l	<sgx_spr_ptr
  400    00:E89F  90 01      			bcc	!+
  401    00:E8A1  C8         			iny
  402    00:E8A2  84 9F      	!:		sty.h	<sgx_spr_ptr
  403    00:E8A4  60         			rts
  404                        	
  405                        	
  406                        	
  407                        	; ***************************************************************************
  408                        	; ***************************************************************************
  409                        	;
  410                        	; void __fastcall sgx_spr_hide( void );
  411                        	
  412    00:E8A5  A0 01      	_sgx_spr_hide:	ldy	#1
  413    00:E8A7  B1 9E      			lda	[sgx_spr_ptr], y
  414    00:E8A9  09 02      			ora	#2
  415    00:E8AB  91 9E      			sta	[sgx_spr_ptr], y
  416    00:E8AD  60         			rts
  417                        	
  418                        	
  419                        	
  420                        	; ***************************************************************************
  421                        	; ***************************************************************************
  422                        	;
  423                        	; void __fastcall sgx_spr_show( void );
  424                        	
  425    00:E8AE  A0 01      	_sgx_spr_show:	ldy	#1
  426    00:E8B0  B1 9E      			lda	[sgx_spr_ptr], y
  427    00:E8B2  29 01      			and	#1
  428    00:E8B4  91 9E      			sta	[sgx_spr_ptr], y
  429    00:E8B6  60         			rts
  430                        	
  431                        	
  432                        	
  433                        	; ***************************************************************************
  434                        	; ***************************************************************************
  435                        	;
  436                        	; void __fastcall sgx_spr_x( unsigned int value<acc> );
  437                        	
  438    00:E8B7  02         	_sgx_spr_x.1:	sxy
  439    00:E8B8  18         			clc
  440    00:E8B9  69 20      			adc	#32
  441    00:E8BB  A0 02      			ldy	#2
  442    00:E8BD  91 9E      			sta	[sgx_spr_ptr], y
  443    00:E8BF  8A         			txa
  444    00:E8C0  69 00      			adc	#0
  445    00:E8C2  C8         			iny
  446    00:E8C3  91 9E      			sta	[sgx_spr_ptr], y
  447    00:E8C5  60         			rts
  448                        	
  449                        	
  450                        	
  451                        	; ***************************************************************************
  452                        	; ***************************************************************************
  453                        	;
  454                        	; void __fastcall sgx_spr_y( unsigned int value<acc> );
  455                        	
  456    00:E8C6  18         	_sgx_spr_y.1:	clc
  457    00:E8C7  69 40      			adc	#64
  458    00:E8C9  92 9E      			sta	[sgx_spr_ptr]
  459    00:E8CB  98         			tya
  460    00:E8CC  69 00      			adc	#0
  461    00:E8CE  A0 01      			ldy	#1
  462    00:E8D0  91 9E      			sta	[sgx_spr_ptr], y
  463    00:E8D2  60         			rts
  464                        			
  465                        	
  466                        	
  467                        	; ***************************************************************************
  468                        	; ***************************************************************************
  469                        	;
  470                        	; void __fastcall sgx_spr_pattern( unsigned int vaddr<acc> );
  471                        	
  472    00:E8D3             	_sgx_spr_pattern.1:
  473    00:E8D3  84 00      			sty	<__temp		;     zp=fedcba98 a=76543210
  474    00:E8D5  0A         			asl	a		; c=f zp=edcba987 a=6543210_
  475    00:E8D6  26 00      			rol	<__temp
  476    00:E8D8  2A         			rol	a		; c=e zp=dcba9876 a=543210_f
  477    00:E8D9  26 00      			rol	<__temp
  478    00:E8DB  2A         			rol	a		; c=d zp=cba98765 a=43210_fe
  479    00:E8DC  26 00      			rol	<__temp
  480    00:E8DE  2A         			rol	a		; c=4 zp=cba98765 a=3210_fed
  481    00:E8DF  A0 05      			ldy	#5
  482    00:E8E1  91 9E      			sta	[sgx_spr_ptr], y
  483    00:E8E3  A5 00      			lda	<__temp
  484    00:E8E5  88         			dey
  485    00:E8E6  91 9E      			sta	[sgx_spr_ptr], y
  486    00:E8E8  60         			rts
  487                        	
  488                        	
  489                        	
  490                        	; ***************************************************************************
  491                        	; ***************************************************************************
  492                        	;
  493                        	; void __fastcall sgx_spr_ctrl( unsigned char mask<_al>, unsigned char value<acc> );
  494                        	
  495    00:E8E9  25 F8      	_sgx_spr_ctrl.2:and	<_al
  496    00:E8EB  85 00      			sta	<__temp
  497    00:E8ED  A5 F8      			lda	<_al
  498    00:E8EF  49 FF      			eor	#$FF
  499    00:E8F1  A0 07      			ldy	#7
  500    00:E8F3  31 9E      			and	[sgx_spr_ptr], y
  501    00:E8F5  05 00      			ora	<__temp
  502    00:E8F7  91 9E      			sta	[sgx_spr_ptr], y
  503    00:E8F9  60         			rts
  504                        	
  505                        	
  506                        	
  507                        	; ***************************************************************************
  508                        	; ***************************************************************************
  509                        	;
  510                        	; void __fastcall sgx_spr_pal( unsigned char palette<acc> )
  511                        	
  512    00:E8FA  29 0F      	_sgx_spr_pal.1:	and	#$0F
  513    00:E8FC  85 00      			sta	<__temp
  514    00:E8FE  A0 06      			ldy	#6
  515    00:E900  B1 9E      			lda	[sgx_spr_ptr], y
  516    00:E902  29 F0      			and	#$F0
  517    00:E904  05 00      			ora	<__temp
  518    00:E906  91 9E      			sta	[sgx_spr_ptr], y
  519    00:E908  60         			rts
  520                        	
  521                        	
  522                        	
  523                        	; ***************************************************************************
  524                        	; ***************************************************************************
  525                        	;
  526                        	; void __fastcall sgx_spr_pri( unsigned char priority<acc> )
  527                        	
  528    00:E909  C9 01      	_sgx_spr_pri.1:	cmp	#1
  529    00:E90B  A0 06      			ldy	#6
  530    00:E90D  B1 9E      			lda	[sgx_spr_ptr], y
  531    00:E90F  29 7F      			and	#$7F
  532    00:E911  90 02      			bcc	!+
  533    00:E913  09 80      			ora	#$80
  534    00:E915  91 9E      	!:		sta	[sgx_spr_ptr], y
  535    00:E917  60         			rts
  536                        	
  537                        	
  538                        	
  539                        	; ***************************************************************************
  540                        	; ***************************************************************************
  541                        	;
  542                        	; unsigned int __fastcall sgx_spr_get_x( void );
  543                        	
  544    00:E918  38         	_sgx_spr_get_x:	sec
  545    00:E919  A0 02      			ldy	#2
  546    00:E91B  B1 9E      			lda	[sgx_spr_ptr], y
  547    00:E91D  E9 20      			sbc	#32
  548    00:E91F  AA         			tax
  549    00:E920  C8         			iny
  550    00:E921  B1 9E      			lda	[sgx_spr_ptr], y
  551    00:E923  E9 00      			sbc	#0
  552    00:E925  A8         			tay
  553    00:E926  8A         			txa
  554    00:E927  60         			rts
  555                        	
  556                        	
  557                        	
  558                        	; ***************************************************************************
  559                        	; ***************************************************************************
  560                        	;
  561                        	; unsigned int __fastcall sgx_spr_get_y( void );
  562                        	
  563    00:E928  38         	_sgx_spr_get_y:	sec
  564    00:E929  B2 9E      			lda	[sgx_spr_ptr]
  565    00:E92B  E9 40      			sbc	#64
  566    00:E92D  AA         			tax
  567    00:E92E  A0 01      			ldy	#1
  568    00:E930  B1 9E      			lda	[sgx_spr_ptr], y
  569    00:E932  E9 00      			sbc	#0
  570    00:E934  A8         			tay
  571    00:E935  8A         			txa
  572    00:E936  60         			rts
  573                        	
  574                        		.endif	SUPPORT_SGX
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   76                        		.endif
   77                        	
   78               0001     		.ifdef	HUCC_USES_BLKMAP		; Set in hucc_blkmap.h
                             #[3]   "..\..\..\include\hucc\blkmap.asm"
   79                        			include	"blkmap.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; blkmap.asm
    5                        	;
    6                        	; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
    7                        	;
    8                        	; Copyright John Brandwood 2025.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
   18                        	;
   19                        	; The maximum total size for a blkmap is 16KBytes, which allows for maps up
   20                        	; to 128x128 blocks (2048x2048 pixels).
   21                        	;
   22                        	; Huge multi-screen blkmaps are also supported (optionally).
   23                        	;
   24                        	; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
   25                        	;
   26                        	; The maximum total size for a multi-screen map is 8KBytes, which allows for
   27                        	; a total of 1024 screens.
   28                        	;
   29                        	; ***************************************************************************
   30                        	; ***************************************************************************
   31                        	
   32                        	;
   33                        	; Include dependancies ...
   34                        	;
   35                        	
   36                        			include "common.asm"		; Common helpers.
   37                        			include "vce.asm"		; Useful VCE routines.
   38                        			include "vdc.asm"		; Useful VCE routines.
   39                        	
   40                        	;
   41                        	; Support large blkmaps up to 16KBytes instead of the regular 8KBytes?
   42                        	;
   43                        	; The maximum X and Y size for regular blkmaps is 128 tiles (2048 pixels).
   44                        	;
   45                        	; This allows for individual maps up to 128x128 tiles (2048x2048 pixels) vs
   46                        	; default limit of 128x64 or 64x128.
   47                        	;
   48                        	
   49               0000     		.ifndef	BLKMAP_LARGEMAP
   51                        		.endif
   52                        	
   53                        	;
   54                        	; Support huge multi-screen maps, up to 32768 pixels wide/high?
   55                        	;
   56                        	; These are sectorized maps split into individual BAT-sized "screens", with
   57                        	; a maximum of 1024 screens per map.
   58                        	;
   59                        	; The BAT size that is used when drawing *must* be the same as the BAT size
   60                        	; that was chosen when creating the multi-screen map.
   61                        	;
   62                        	; Each screen can use a unique set of block definitions, or it might choose
   63                        	; to share the same block definitions that are used on another screen.
   64                        	;
   65                        	; Each screen may choose which 8KByte banks of character data to select for
   66                        	; the 4 banks (32KBytes) of VRAM that its block definitions use, with a max
   67                        	; of 16 banks of characters per multi-screen map.
   68                        	;
   69                        	; Loading those character banks dynamically is an exercise for the user!
   70                        	;
   71                        	; Enabling support adds extra library code, and slightly slows down the use
   72                        	; of regular blkmaps.
   73                        	;
   74                        	
   75               0000     		.ifndef	BLKMAP_MULTISCR
   77                        		.endif
   78                        	
   79                        	;
   80                        	; Block definitions can either use character data from VRAM $1000..$7FFF or
   81                        	; they can be limited to use the 32KByte of characters in VRAM $1000..$4FFF
   82                        	; which then frees up 2-bits for flag information for each character in the
   83                        	; block.
   84                        	;
   85                        	; These 2-bits are perfect for using as collision information in game maps,
   86                        	; allowing storage of states like transparent, solid, up-slope, down-slope.
   87                        	;
   88                        	; Typically this flag information is set by the map conversion tools from a
   89                        	; seperate "collision" map layer.
   90                        	;
   91                        	
   92               0000     		.ifndef	BLKDEF_CHR_FLAG
   94                        		.endif
   95                        	
   96                        	;
   97                        	; Block definitions are accessed in MPR2 ($4000..$5FFF), and must not cross
   98                        	; the bank boundary.
   99                        	;
  100                        	; When working this way, 8 pointers in ZP are used to access the individual
  101                        	; bytes in the block definition. This is fine when using a regular map on a
  102                        	; PC Engine, but it is awfully slow when using multi-screen maps or drawing
  103                        	; maps on both VDC chips in a SuperGRAFX because the pointer values must be
  104                        	; constantly changed.
  105                        	;
  106                        	; When using multi-screen maps, or when developing a SuperGRAFX game, or if
  107                        	; developing a CDROM game, then it is usually preferable to store the block
  108                        	; definitions with 2KByte alignment, especially if they are normally stored
  109                        	; compressed and then decompressed into a 2KByte buffer in RAM when needed.
  110                        	;
  111                        	; This option controls whether the definitions are stored 2KByte aligned or
  112                        	; if pointers should be used instead.
  113                        	;
  114                        	
  115               0000     		.ifndef	BLKDEF_POINTERS
  117                        		.endif
  118                        	
  119                        	;
  120                        	; Add a timing bar to the scroll_map() to see how long the drawing takes?
  121                        	;
  122                        	
  123               0000     		.ifndef	BLKMAP_TIMETEST
  125                        		.endif
  126                        	
  127                        	;
  128                        	;
  129                        	;
  130                        	
  131               0000     		.if	BLKDEF_POINTERS
  144                        		.else
  145                        	
  146                        		; If the block definititions are 2KByte aligned.
  147                        	
  148               4000     	BLK_4000_TL_L	=	$4000
  149               4100     	BLK_4000_TR_L	=	$4100
  150               4200     	BLK_4000_BL_L	=	$4200
  151               4300     	BLK_4000_BR_L	=	$4300
  152               4400     	BLK_4000_TL_H	=	$4400
  153               4500     	BLK_4000_TR_H	=	$4500
  154               4600     	BLK_4000_BL_H	=	$4600
  155               4700     	BLK_4000_BR_H	=	$4700
  156                        	
  157               4800     	BLK_4800_TL_L	=	$4800
  158               4900     	BLK_4800_TR_L	=	$4900
  159               4A00     	BLK_4800_BL_L	=	$4A00
  160               4B00     	BLK_4800_BR_L	=	$4B00
  161               4C00     	BLK_4800_TL_H	=	$4C00
  162               4D00     	BLK_4800_TR_H	=	$4D00
  163               4E00     	BLK_4800_BL_H	=	$4E00
  164               4F00     	BLK_4800_BR_H	=	$4F00
  165                        	
  166               5000     	BLK_5000_TL_L	=	$5000
  167               5100     	BLK_5000_TR_L	=	$5100
  168               5200     	BLK_5000_BL_L	=	$5200
  169               5300     	BLK_5000_BR_L	=	$5300
  170               5400     	BLK_5000_TL_H	=	$5400
  171               5500     	BLK_5000_TR_H	=	$5500
  172               5600     	BLK_5000_BL_H	=	$5600
  173               5700     	BLK_5000_BR_H	=	$5700
  174                        	
  175               5800     	BLK_5800_TL_L	=	$5800
  176               5900     	BLK_5800_TR_L	=	$5900
  177               5A00     	BLK_5800_BL_L	=	$5A00
  178               5B00     	BLK_5800_BR_L	=	$5B00
  179               5C00     	BLK_5800_TL_H	=	$5C00
  180               5D00     	BLK_5800_TR_H	=	$5D00
  181               5E00     	BLK_5800_BL_H	=	$5E00
  182               5F00     	BLK_5800_BR_H	=	$5F00
  183                        	
  184                        		.endif
  185                        	
  186               0080     	MAP_UNALIGNED_X	=	$80
  187               0040     	MAP_UNALIGNED_Y	=	$40
  188                        	
  189                        	;
  190                        	;
  191                        	;
  192                        	
  193               2BAF     			.bss
  194                        	
  195                        	; **************
  196                        	; 8-byte (or 2-byte) entry for each SCREEN in the MULTI_MAP.
  197                        	
  198               0000     			.rsset	0
  199               0000     		.if	BLKDEF_POINTERS
  202                        		.else
  203               0000     	SCR_MAP_PAGE	.rs	1	; 256-byte aligned.
  204               0001     	SCR_MAP_BANK	.rs	1
  205               0002     	SCR_BLK_PAGE	.rs	1	; >$4000, >$4800, >$5000, or >$5800.
  206               0003     	SCR_BLK_BANK	.rs	1
  207               0004     	SCR_TBL_PAGE	.rs	1	; 256-byte aligned.
  208               0005     	SCR_TBL_BANK	.rs	1
  209               0006     	SCR_CHR_12	.rs	1	; Which CHR banks are used by the BLK, with
  210               0007     	SCR_CHR_34	.rs	1	; a max of 16 CHR banks per MULTI_MAP.
  211                        		.endif
  212                        	
  213                        			; A simple macro to help build a multi-screen map.
  214                        	
  215               0000     		.ifndef	SCREEN
  224                        		.endif
  225                        	
  226    F8:2BAF             	map_blk_flag:	ds	1	; Returned from _get_map_block().
  227    F8:2BB0             	map_blk_mask:	ds	1	; Returned from _get_map_block().
  228                        	
  229                        	; **************
  230                        	; 16-bytes of VDC blkmap info.
  231                        	;
  232                        	; N.B. MUST be 16-bytes before the SGX versions to use PCE_VDC_OFFSET.
  233                        	
  234    F8:2BB1             	vdc_old_chr_x:	ds	1	; Previous top-left X in CHR (lo-byte only).
  235    F8:2BB2             	vdc_old_chr_y:	ds	1	; Previous top-left Y in CHR (lo-byte only).
  236                        	
  237    F8:2BB3             	vdc_tbl_addr:	ds	2	; 256-byte aligned.
  238    F8:2BB5             	vdc_tbl_bank:	ds	1
  239                        	
  240    F8:2BB6             	vdc_blk_addr:	ds	2	; 2KBytes of data, 256-byte aligned.
  241    F8:2BB8             	vdc_blk_bank:	ds	1
  242                        	
  243    F8:2BB9             	vdc_map_addr:	ds	2	; Mapped into MPR3..MPR5, max 16KBytes.
  244    F8:2BBB             	vdc_map_bank:	ds	1
  245                        	
  246    F8:2BBC             	vdc_scr_addr:	ds	2	; 8KByte maximum size.
  247    F8:2BBE             	vdc_scr_bank:	ds	1
  248    F8:2BBF             	vdc_scr_chr12:	ds	1	; Which CHR banks are used by the BLK, with
  249    F8:2BC0             	vdc_scr_chr34:	ds	1	; a max of 16 banks per multi-screen map.
  250                        	
  251               0001     		.if	SUPPORT_SGX
  252                        	
  253                        	; **************
  254                        	; 16-bytes of SGX blkmap info.
  255                        	;
  256                        	; N.B. MUST be 16-bytes after the VDC versions to use SGX_VDC_OFFSET.
  257                        	
  258    F8:2BC1             	sgx_old_chr_x:	ds	1	; Previous top-left X in CHR (lo-byte only).
  259    F8:2BC2             	sgx_old_chr_y:	ds	1	; Previous top-left Y in CHR (lo-byte only).
  260                        	
  261    F8:2BC3             	sgx_tbl_addr:	ds	2	; 256-byte aligned.
  262    F8:2BC5             	sgx_tbl_bank:	ds	1
  263                        	
  264    F8:2BC6             	sgx_blk_addr:	ds	2	; 2KBytes of data, 256-byte aligned.
  265    F8:2BC8             	sgx_blk_bank:	ds	1
  266                        	
  267    F8:2BC9             	sgx_map_addr:	ds	2	; Mapped into MPR3..MPR4, max 8KBytes.
  268    F8:2BCB             	sgx_map_bank:	ds	1
  269                        	
  270    F8:2BCC             	sgx_scr_addr:	ds	2	; 8KByte maximum size.
  271    F8:2BCE             	sgx_scr_bank:	ds	1
  272    F8:2BCF             	sgx_scr_chr12:	ds	1	; Which CHR banks are used by the BLK, with
  273    F8:2BD0             	sgx_scr_chr34:	ds	1	; a max of 16 banks per multi-screen map.
  274                        	
  275                        		.endif	SUPPORT_SGX
  276                        	
  277               0000     		.if	0
  310                        		.endif	0
  311                        	
  312                        	; **************
  313                        	; Aliases for the asm variable names in HuCC.
  314                        	;
  315                        	
  316               0001     		.ifdef	HUCC
  317                        	
  318    F8:2BD1             	_map_blk_flag	.alias	map_blk_flag
  319    F8:2BD1             	_map_blk_mask	.alias	map_blk_mask
  320                        	
  321    F8:2BD1             	_vdc_map_draw_w	.alias	vdc_map_draw_w
  322    F8:2BD1             	_vdc_map_draw_h	.alias	vdc_map_draw_h
  323    F8:2BD1             	_vdc_map_pxl_x	.alias	vdc_map_pxl_x
  324    F8:2BD1             	_vdc_map_pxl_y	.alias	vdc_map_pxl_y
  325    F8:2BD1             	_vdc_old_chr_x	.alias	vdc_old_chr_x
  326    F8:2BD1             	_vdc_old_chr_y	.alias	vdc_old_chr_y
  327    F8:2BD1             	_vdc_tbl_addr	.alias	vdc_tbl_addr
  328    F8:2BD1             	_vdc_tbl_bank	.alias	vdc_tbl_bank
  329    F8:2BD1             	_vdc_blk_addr	.alias	vdc_blk_addr
  330    F8:2BD1             	_vdc_blk_bank	.alias	vdc_blk_bank
  331    F8:2BD1             	_vdc_map_line_w	.alias	vdc_map_line_w
  332    F8:2BD1             	_vdc_map_scrn_w	.alias	vdc_map_scrn_w
  333    F8:2BD1             	_vdc_map_addr	.alias	vdc_map_addr
  334    F8:2BD1             	_vdc_map_bank	.alias	vdc_map_bank
  335    F8:2BD1             	_vdc_scr_addr	.alias	vdc_scr_addr
  336    F8:2BD1             	_vdc_scr_bank	.alias	vdc_scr_bank
  337    F8:2BD1             	_vdc_scr_chr12	.alias	vdc_scr_chr12
  338    F8:2BD1             	_vdc_scr_chr34	.alias	vdc_scr_chr34
  339                        	
  340               0001     		.if	SUPPORT_SGX
  341    F8:2BD1             	_sgx_map_draw_w	.alias	sgx_map_draw_w
  342    F8:2BD1             	_sgx_map_draw_h	.alias	sgx_map_draw_h
  343    F8:2BD1             	_sgx_map_pxl_x	.alias	sgx_map_pxl_x
  344    F8:2BD1             	_sgx_map_pxl_y	.alias	sgx_map_pxl_y
  345    F8:2BD1             	_sgx_old_chr_x	.alias	sgx_old_chr_x
  346    F8:2BD1             	_sgx_old_chr_y	.alias	sgx_old_chr_y
  347    F8:2BD1             	_sgx_tbl_addr	.alias	sgx_tbl_addr
  348    F8:2BD1             	_sgx_tbl_bank	.alias	sgx_tbl_bank
  349    F8:2BD1             	_sgx_blk_addr	.alias	sgx_blk_addr
  350    F8:2BD1             	_sgx_blk_bank	.alias	sgx_blk_bank
  351    F8:2BD1             	_sgx_map_line_w	.alias	sgx_map_line_w
  352    F8:2BD1             	_sgx_map_scrn_w	.alias	sgx_map_scrn_w
  353    F8:2BD1             	_sgx_map_addr	.alias	sgx_map_addr
  354    F8:2BD1             	_sgx_map_bank	.alias	sgx_map_bank
  355    F8:2BD1             	_sgx_scr_addr	.alias	sgx_scr_addr
  356    F8:2BD1             	_sgx_scr_bank	.alias	sgx_scr_bank
  357    F8:2BD1             	_sgx_scr_chr12	.alias	sgx_scr_chr12
  358    F8:2BD1             	_sgx_scr_chr34	.alias	sgx_scr_chr34
  359                        		.endif	SUPPORT_SGX
  360                        	
  361                        		.endif	HUCC
  362                        	
  363                        	; **************
  364                        	; Temporary variables for drawing, using common zero-page locations.
  365                        	;
  366                        	
  367               20F8     	map_bat_x	=	_al	; Set by draw_map(), scroll_map() if drawing
  368               20F9     	map_bat_y	=	_ah	; aligned, or as parameters to blit_map().
  369                        	
  370               20FA     	map_draw_w	=	_bl	; Set by draw_map(), scroll_map(), but given
  371               20FB     	map_draw_h	=	_bh	; as parameters to blit_map().
  372                        	
  373               20FC     	map_pxl_x	=	_cx	; Set by draw_map(), scroll_map() and also by
  374               20FC     	map_chr_x	=	_cl	; blit__map(), from current vdc_map_pxl_x.
  375               20FD     	map_scrn_x	=	_ch
  376                        	
  377               20FE     	map_pxl_y	=	_dx	; Set by draw_map(), scroll_map() and also by
  378               20FE     	map_chr_y	=	_dl	; blit__map(), from current vdc_map_pxl_y.
  379               20FF     	map_scrn_y	=	_dh
  380                        	
  381               20EE     	map_line	=	_si	; Start of map data line being drawn.
  382                        	
  383               2000     	map_count	=	__temp + 0
  384               2001     	map_drawn	=	__temp + 1
  385                        	
  386               E937     			.code
  387                        	
  388                        	
  389                        	
  390    13:D27D             	blkmap_group	.procgroup
  391                        	
  392                        	; ***************************************************************************
  393                        	; ***************************************************************************
  394                        	;
  395                        	; _set_blocks - Initialize the block definition pointers.
  396                        	; _sgx_set_blocks - Initialize the block definition pointers.
  397                        	;
  398                        	; void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blk<_al> );
  399                        	; void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blk<_al> );
  400                        	;
  401                        	
  402               0001     		.if	SUPPORT_SGX
  403                        	
  404    13:D27D             			.proc	_sgx_set_blocks.3
  405                        	
  406    13:D27D  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  407    13:D27F  F0         			db	$F0			; Turn "clx" into a "beq".
  408                        	
  409    13:D280             			.ref	_set_blocks.3
  410                        			.endp
  411                        		.endif
  412                        	
  413    13:D280             			.proc	_set_blocks.3
  414                        	
  415    13:D280  82         			clx				; Offset to PCE VDC.
  416                        	
  417    13:D281  BD B4 2B   			lda.h	vdc_tbl_addr, x		; Remap the address to MPR2.
  418    13:D284  29 1F      			and	#$1F
  419    13:D286  09 40      			ora	#$40
  420    13:D288  9D B4 2B   			sta.h	vdc_tbl_addr, x
  421                        	
  422    13:D28B  BD B7 2B   			lda.h	vdc_blk_addr, x		; Remap the address to MPR2.
  423    13:D28E  29 1F      			and	#$1F
  424    13:D290  09 40      			ora	#$40
  425    13:D292  9D B7 2B   			sta.h	vdc_blk_addr, x
  426                        	
  427               0000     		.if	BLKDEF_POINTERS
  479                        		.endif	BLKDEF_POINTERS
  480                        	
  481                        			leave
         13:D295  4C EF FF   			jmp	leave_proc
  482                        	
  483                        			.endp
  484                        	
  485                        	
  486                        	
  487                        	; ***************************************************************************
  488                        	; ***************************************************************************
  489                        	;
  490                        	; _draw_map - Draw the entire screen at the current coordinates.
  491                        	; _sgx_draw_map - Draw the entire screen at the current coordinates.
  492                        	;
  493                        	; void __fastcall draw_map( void );
  494                        	; void __fastcall sgx_draw_map( void );
  495                        	;
  496                        	
  497               0001     		.if	SUPPORT_SGX
  498                        	
  499    13:D298             	_sgx_draw_map	.proc
  500                        	
  501    13:D298  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  502    13:D29A  F0         			db	$F0			; Turn "clx" into a "beq".
  503                        	
  504    13:D29B             			.ref	_draw_map
  505                        			.endp
  506                        		.endif
  507                        	
  508    13:D29B             	_draw_map	.proc
  509                        	
  510    13:D29B  82         			clx				; Offset to PCE VDC.
  511                        	
  512    13:D29C  43 04      			tma2				; Preserve MPR2..MPR4.
  513    13:D29E  48         			pha
  514    13:D29F  43 08      			tma3
  515    13:D2A1  48         			pha
  516    13:D2A2  43 10      			tma4
  517    13:D2A4  48         			pha
  518               0000     		.if	BLKMAP_LARGEMAP
  521                        		.endif
  522                        	
  523    13:D2A5  20 A7 D3   			jsr	map_pxl_2_chr		; Set up the draw coordinates.
  524                        	
  525    13:D2A8  A5 FC      			lda	<map_chr_x		; Reset previous X position.
  526    13:D2AA  9D B1 2B   			sta	vdc_old_chr_x, x
  527                        	
  528    13:D2AD  A5 FE      			lda	<map_chr_y		; Reset previous Y position,
  529    13:D2AF  1A         			inc	a			; ready to draw multiple rows.
  530    13:D2B0  9D B2 2B   			sta	vdc_old_chr_y, x
  531                        	
  532    13:D2B3  BD 7A 26   			lda	vdc_map_draw_w, x	; Draw the whole screen.
  533    13:D2B6  85 FA      			sta	<map_draw_w
  534    13:D2B8  BD 7B 26   			lda	vdc_map_draw_h, x
  535    13:D2BB  85 FB      			sta	<map_draw_h
  536                        	
  537    13:D2BD  20 FD D5   			jsr	map_scroll_y		; Draw N row of CHR to the BAT.
  538                        	
  539               0000     		.if	BLKMAP_LARGEMAP
  542                        		.endif
  543    13:D2C0  68         			pla				; Restore MPR2..MPR4.
  544    13:D2C1  53 10      			tam4
  545    13:D2C3  68         			pla
  546    13:D2C4  53 08      			tam3
  547    13:D2C6  68         			pla
  548    13:D2C7  53 04      			tam2
  549                        	
  550                        			leave
         13:D2C9  4C EF FF   			jmp	leave_proc
  551                        	
  552                        			.endp
  553                        	
  554                        	
  555                        	
  556                        	; ***************************************************************************
  557                        	; ***************************************************************************
  558                        	;
  559                        	; _scroll_map - Draw a single row of CHR into the BAT to update the edge.
  560                        	; _sgx_scroll_map - Draw a single row of CHR into the BAT to update the edge.
  561                        	;
  562                        	; void __fastcall scroll_map( void );
  563                        	; void __fastcall sgx_scroll_map( void );
  564                        	;
  565                        	
  566               0001     		.if	SUPPORT_SGX
  567                        	
  568    13:D2CC             	_sgx_scroll_map	.proc
  569                        	
  570    13:D2CC  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  571    13:D2CE  F0         			db	$F0			; Turn "clx" into a "beq".
  572                        	
  573    13:D2CF             			.ref	_scroll_map
  574                        			.endp
  575                        		.endif
  576                        	
  577    13:D2CF             	_scroll_map	.proc
  578                        	
  579    13:D2CF  82         			clx				; Offset to PCE VDC.
  580                        	
  581               0000     		.if	BLKMAP_TIMETEST
  587                        		.endif
  588                        	
  589    13:D2D0  43 04      			tma2				; Preserve MPR2..MPR4.
  590    13:D2D2  48         			pha
  591    13:D2D3  43 08      			tma3
  592    13:D2D5  48         			pha
  593    13:D2D6  43 10      			tma4
  594    13:D2D8  48         			pha
  595               0000     		.if	BLKMAP_LARGEMAP
  598                        		.endif
  599                        	
  600    13:D2D9  20 A7 D3   			jsr	map_pxl_2_chr		; Set up the draw coordinates.
  601                        	
  602               0001     		.if	BLKMAP_MULTISCR
  603    13:D2DC  A5 FD      			lda	<map_scrn_x		; map_scroll_x can change this!
  604    13:D2DE  48         			pha
  605                        		.endif
  606                        	
  607    13:D2DF  BD 7B 26   			lda	vdc_map_draw_h, x	; Draw new LHS or RHS if needed.
  608    13:D2E2  85 FB      			sta	<map_draw_h
  609                        	;		lda	#1			; map_scroll_x only ever draws a
  610                        	;		sta	<map_draw_w		; single column.
  611    13:D2E4  20 DE D4   			jsr	map_scroll_x
  612                        	
  613    13:D2E7  BD B1 2B   			lda	vdc_old_chr_x, x	; Restore map_chr_x which could
  614    13:D2EA  85 FC      			sta	<map_chr_x		; be changed by map_scroll_x.
  615                        	
  616               0001     		.if	BLKMAP_MULTISCR
  617    13:D2EC  68         			pla				; Restore before map_scroll_y.
  618    13:D2ED  85 FD      			sta	<map_scrn_x
  619                        		.endif
  620                        	
  621    13:D2EF  BD 7A 26   			lda	vdc_map_draw_w, x	; Draw new TOP or BTM if needed.
  622    13:D2F2  85 FA      			sta	<map_draw_w
  623    13:D2F4  A9 01      			lda	#1
  624    13:D2F6  85 FB      			sta	<map_draw_h
  625    13:D2F8  20 FD D5   			jsr	map_scroll_y
  626                        	
  627               0000     		.if	BLKMAP_LARGEMAP
  630                        		.endif
  631    13:D2FB  68         			pla				; Restore MPR2..MPR4.
  632    13:D2FC  53 10      			tam4
  633    13:D2FE  68         			pla
  634    13:D2FF  53 08      			tam3
  635    13:D301  68         			pla
  636    13:D302  53 04      			tam2
  637                        	
  638               0000     		.if	BLKMAP_TIMETEST
  640                        		.endif
  641                        	
  642                        			leave
         13:D304  4C EF FF   			jmp	leave_proc
  643                        	
  644                        			.endp
  645                        	
  646                        	
  647                        	
  648                        	; ***************************************************************************
  649                        	; ***************************************************************************
  650                        	;
  651                        	; _blit_map - Draw a map rectangle to specific BAT coordinates.
  652                        	; _sgx_blit_map - Draw a map rectangle to specific BAT coordinates.
  653                        	;
  654                        	; void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
  655                        	; void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
  656                        	;
  657                        	; Normally you'd just use _draw_map() and _scroll_map(), but for those folks
  658                        	; who really wish to take manual control, you can use this.
  659                        	;
  660                        	
  661               0001     		.if	SUPPORT_SGX
  662                        	
  663                        	_sgx_blit_map	.proc
  669                        			.endp
  670                        		.endif
  671                        	
  672    13:D307             	_blit_map	.proc
  673                        	
  674    13:D307  82         			clx				; Offset to PCE VDC.
  675                        	
  676    13:D308  BD BE 2B   			lda	vdc_scr_bank, x		; Skip this if a multi-screen
  677    13:D30B  D0 36      			bne	.exit			; blkmap.
  678                        	
  679    13:D30D  43 04      			tma2				; Preserve MPR2..MPR4.
  680    13:D30F  48         			pha
  681    13:D310  43 08      			tma3
  682    13:D312  48         			pha
  683    13:D313  43 10      			tma4
  684    13:D315  48         			pha
  685               0000     		.if	BLKMAP_LARGEMAP
  688                        		.endif
  689                        	
  690    13:D316  BD 82 26   			lda	vdc_map_option, x	; Preserve current map options.
  691    13:D319  48         			pha
  692    13:D31A  09 C0      			ora	#MAP_UNALIGNED_X | MAP_UNALIGNED_Y
  693    13:D31C  9D 82 26   			sta	vdc_map_option, x
  694                        	
  695    13:D31F  20 A7 D3   			jsr	map_pxl_2_chr		; Set up the draw coordinates.
  696                        	
  697    13:D322  A5 FA      			lda	<map_draw_w		; Are we drawing just 1 column?
  698    13:D324  C9 01      			cmp	#1
  699    13:D326  F0 1E      			beq	.draw_column
  700                        	
  701                        			; Draw N rows.
  702                        	
  703    13:D328  A5 FC      	.draw_rows:	lda	<map_chr_x		; Reset previous X position.
  704    13:D32A  9D B1 2B   			sta	vdc_old_chr_x, x
  705                        	
  706    13:D32D  A5 FE      			lda	<map_chr_y		; Reset previous Y position,
  707    13:D32F  1A         			inc	a			; ready to draw rows upwards.
  708    13:D330  9D B2 2B   			sta	vdc_old_chr_y, x
  709                        	
  710    13:D333  20 FD D5   			jsr	map_scroll_y		; Draw a row of CHR to the BAT.
  711                        	
  712                        			; Drawing completed.
  713                        	
  714    13:D336  68         	.finished:	pla				; Restore previous map options.
  715    13:D337  9D 82 26   			sta	vdc_map_option, x
  716                        	
  717               0000     		.if	BLKMAP_LARGEMAP
  720                        		.endif
  721    13:D33A  68         			pla				; Restore MPR2..MPR4.
  722    13:D33B  53 10      			tam4
  723    13:D33D  68         			pla
  724    13:D33E  53 08      			tam3
  725    13:D340  68         			pla
  726    13:D341  53 04      			tam2
  727                        	
  728                        	.exit:		leave
         13:D343  4C EF FF   			jmp	leave_proc
  729                        	
  730                        			; Draw 1 column.
  731                        	
  732    13:D346  A5 FC      	.draw_column:	lda	<map_chr_x		; Reset previous X position.
  733    13:D348  1A         			inc	a			; ready to draw 1 column.
  734    13:D349  9D B1 2B   			sta	vdc_old_chr_x, x
  735                        	
  736    13:D34C  A5 FE      			lda	<map_chr_y		; Reset previous Y position.
  737    13:D34E  9D B2 2B   			sta	vdc_old_chr_y, x
  738                        	
  739    13:D351  20 DE D4   			jsr	map_scroll_x		; Draw a single column of CHR.
  740                        	
  741    13:D354  80 E0      			bra	.finished
  742                        	
  743                        			.endp
  744                        	
  745                        	
  746                        	
  747                        	; ***************************************************************************
  748                        	; ***************************************************************************
  749                        	;
  750                        	; _get_map_block - Get the block number used at a map pixel coordinate.
  751                        	; _sgx_get_map_block - Get the block number used at a map pixel coordinate.
  752                        	;
  753                        	; unsigned char __fastcall _get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
  754                        	; unsigned char __fastcall _sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
  755                        	;
  756                        	
  757               0001     		.if	SUPPORT_SGX
  758                        	
  759                        			.proc	_sgx_get_map_block.2
  765                        			.endp
  766                        		.endif
  767                        	
  768    13:D356             			.proc	_get_map_block.2
  769                        	
  770    13:D356  82         			clx				; Offset to PCE VDC.
  771                        	
  772    13:D357  43 04      			tma2				; Preserve MPR2..MPR4.
  773    13:D359  48         			pha
  774    13:D35A  43 08      			tma3
  775    13:D35C  48         			pha
  776    13:D35D  43 10      			tma4
  777    13:D35F  48         			pha
  778               0000     		.if	BLKMAP_LARGEMAP
  781                        		.endif
  782                        	
  783    13:D360  20 BB D3   			jsr	xvt_pxl_2_chr		; Set up the query coordinates.
  784                        	
  785    13:D363  20 E9 D3   			jsr	map_chr_2_data		; Page in the map address.
  786                        	
  787    13:D366  B2 EC      			lda	[_bp]			; Read the BLK from the map.
  788    13:D368  A8         			tay
  789                        	
  790    13:D369  A5 FC      			lda	<map_chr_x		; Calc the BLK address offset
  791    13:D36B  4A         			lsr	a			; use depending upon even/odd
  792    13:D36C  A5 FE      			lda	<map_chr_y		; CHR coordinates (not BAT to
  793    13:D36E  29 01      			and	#1			; support unaligned drawing).
  794    13:D370  2A         			rol	a
  795    13:D371  09 04      			ora	#4			; Offset to BLK table top byte.
  796    13:D373  7D B7 2B   			adc.h	vdc_blk_addr, x		; What is the BLK data address?
  797    13:D376  85 ED      			sta.h	<_bp			; $4000, $4800, $5000 or $5800.
  798    13:D378  64 EC      			stz.l	<_bp
  799    13:D37A  B1 EC      			lda	[_bp], y		; Read the collision flags from
  800    13:D37C  29 0C      			and	#%00001100		; the top byte of the CHR.
  801    13:D37E  4A         			lsr	a
  802    13:D37F  4A         			lsr	a
  803    13:D380  4A         			lsr	a			; Swizzle the bottom bit to get
  804    13:D381  90 02      			bcc	!+			; the same bit order as used in
  805    13:D383  09 02      			ora	#2			; .HALTMAP layer.
  806    13:D385  8D AF 2B   	!:		sta	map_blk_flag
  807                        	
  808    13:D388  BD B5 2B   			lda	vdc_tbl_bank, x		; Is there a table of flags?
  809    13:D38B  F0 09      			beq	!+
  810    13:D38D  53 08      			tam3
  811                        	;		inc	a
  812                        	;		tam4
  813                        	;		lda.l	vdc_tbl_addr, x
  814                        	;		sta.l	<_bp
  815    13:D38F  BD B4 2B   			lda.h	vdc_tbl_addr, x		; If so, it must be aligned!
  816    13:D392  85 ED      			sta.h	<_bp
  817    13:D394  B1 EC      			lda	[_bp], y		; Read the .MASKMAP/.OVERMAP
  818    13:D396  8D B0 2B   	!:		sta	map_blk_mask		; flag value for this BLK.
  819                        	
  820               0000     		.if	BLKMAP_LARGEMAP
  823                        		.endif
  824    13:D399  68         			pla				; Restore MPR2..MPR4.
  825    13:D39A  53 10      			tam4
  826    13:D39C  68         			pla
  827    13:D39D  53 08      			tam3
  828    13:D39F  68         			pla
  829    13:D3A0  53 04      			tam2
  830                        	
  831    13:D3A2  02         			sxy				; Put the BLK number in X.
  832    13:D3A3  C2         			cly
  833                        	
  834                        			leave				; All done!
         13:D3A4  4C EF FF   			jmp	leave_proc
  835                        	
  836                        			.endp
  837                        	
  838                        	
  839                        	
  840                        	; ***************************************************************************
  841                        	; ***************************************************************************
  842                        	;
  843                        	; map_pxl_2_chr - Convert PXL to CHR, BLK and SCR coordinates.
  844                        	;
  845                        	
  846    13:D3A7  BD 80 26   	map_pxl_2_chr:	lda.l	vdc_map_pxl_y, x	; Get current map Y coordinate.
  847    13:D3AA  85 FE      			sta.l	<map_pxl_y
  848    13:D3AC  BD 81 26   			lda.h	vdc_map_pxl_y, x
  849    13:D3AF  85 FF      			sta.h	<map_pxl_y
  850                        	
  851    13:D3B1  BD 7E 26   			lda.l	vdc_map_pxl_x, x	; Get current map X coordinate.
  852    13:D3B4  85 FC      			sta.l	<map_pxl_x
  853    13:D3B6  BD 7F 26   			lda.h	vdc_map_pxl_x, x
  854    13:D3B9  85 FD      			sta.h	<map_pxl_x
  855                        	
  856    13:D3BB  A5 FD      	xvt_pxl_2_chr:	lda.h	<map_pxl_x		; Xvert map_pxl_x to map_chr_x.
  857               0001     		.if	BLKMAP_MULTISCR
  858    13:D3BD  A8         			tay				; Xvert map_pxl_x to map_scrn_x.
  859    13:D3BE  3C 75 26   			bit	vdc_bat_width, x
  860    13:D3C1  70 03      			bvs	.w64
  861    13:D3C3  10 02      			bpl	.w32
  862    13:D3C5  4A         	.w128:		lsr	a
  863    13:D3C6  4A         	.w64:		lsr	a
  864    13:D3C7  85 FD      	.w32:		sta	<map_scrn_x
  865    13:D3C9  98         			tya
  866                        		.endif
  867    13:D3CA  4A         			lsr	a
  868    13:D3CB  66 FC      			ror.l	<map_pxl_x
  869    13:D3CD  4A         			lsr	a
  870    13:D3CE  66 FC      			ror.l	<map_pxl_x
  871    13:D3D0  4A         			lsr	a
  872    13:D3D1  66 FC      			ror.l	<map_pxl_x		; Max map width is 256 CHR.
  873                        	
  874    13:D3D3  A5 FF      			lda.h	<map_pxl_y		; Xvert map_pxl_y to map_chr_y.
  875               0001     		.if	BLKMAP_MULTISCR
  876    13:D3D5  A8         			tay				; Xvert map_pxl_y to map_scrn_y.
  877    13:D3D6  3C 76 26   			bit	vdc_bat_height, x
  878    13:D3D9  50 01      			bvc	.h32
  879    13:D3DB  4A         	.h64:		lsr	a
  880    13:D3DC  85 FF      	.h32:		sta	<map_scrn_y
  881    13:D3DE  98         			tya
  882                        		.endif
  883    13:D3DF  4A         			lsr	a
  884    13:D3E0  66 FE      			ror.l	<map_pxl_y
  885    13:D3E2  4A         			lsr	a
  886    13:D3E3  66 FE      			ror.l	<map_pxl_y
  887    13:D3E5  4A         			lsr	a
  888    13:D3E6  66 FE      			ror.l	<map_pxl_y		; Max map width is 256 CHR.
  889                        	
  890    13:D3E8  60         			rts
  891                        	
  892                        	
  893                        	
  894                        	; ***************************************************************************
  895                        	; ***************************************************************************
  896                        	;
  897                        	; map_chr_2_data - Page in the MAP address for the CHR coordinates.
  898                        	;
  899                        	
  900    13:D3E9             	map_chr_2_data:
  901                        	
  902               0001     		.if	BLKMAP_MULTISCR
  903                        	
  904                        			; Initialization for a multi-screen map.
  905                        	
  906    13:D3E9  BD BE 2B   			lda	vdc_scr_bank, x		; Skip this if regular blkmap.
  907    13:D3EC  F0 3A      			beq	.regular
  908                        	
  909    13:D3EE  A5 FC      	.multiscreen:	lda	<map_chr_x		; Compare old_x with cur_x.
  910    13:D3F0  3D 77 26   			and	vdc_bat_x_mask, x
  911    13:D3F3  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
  912                        	
  913    13:D3F5  A5 FE      			lda	<map_chr_y		; Save BAT Y chr coordinate.
  914    13:D3F7  3D 78 26   			and	vdc_bat_y_mask, x
  915    13:D3FA  85 F9      			sta	<map_bat_y
  916    13:D3FC  4A         			lsr	a			; Map BLK Y coordinate.
  917    13:D3FD  85 EF      			sta.h	<map_line
  918    13:D3FF  62         			cla
  919    13:D400  3C 75 26   			bit	vdc_bat_width, x
  920    13:D403  30 08      			bmi	.w128
  921    13:D405  70 03      			bvs	.w64
  922    13:D407  46 EF      	.w32:		lsr.h	<map_line
  923    13:D409  6A         			ror	a
  924    13:D40A  46 EF      	.w64:		lsr.h	<map_line
  925    13:D40C  6A         			ror	a
  926    13:D40D  46 EF      	.w128:		lsr.h	<map_line
  927    13:D40F  6A         			ror	a
  928    13:D410  46 EF      			lsr.h	<map_line		; Hi-byte of (BLK Y * width).
  929    13:D412  6A         			ror	a
  930    13:D413  85 EE      			sta.l	<map_line		; Lo-byte of (BLK Y * width).
  931                        	
  932    13:D415  20 69 D4   			jsr	map_set_screen		; Put BLK & MAP in MPR2-MPR5.
  933                        	
  934    13:D418  A5 F8      			lda	<map_bat_x		; Calc map data pointer.
  935    13:D41A  4A         			lsr	a			; Map BLK X coordinate.
  936    13:D41B  05 EE      			ora.l	<map_line
  937    13:D41D  85 EC      			sta.l	<_bp
  938    13:D41F  A5 EF      			lda.h	<map_line
  939    13:D421  18         			clc
  940    13:D422  7D BA 2B   			adc.h	vdc_map_addr, x		; N.B. 256-byte aligned!
  941    13:D425  85 ED      			sta.h	<_bp
  942                        	
  943    13:D427  60         			rts
  944                        	
  945                        		.endif	BLKMAP_MULTISCR
  946                        	
  947                        			; Initialization for a regular map.
  948                        	
  949    13:D428  A5 FC      	.regular:	lda	<map_chr_x		; Compare old_x with cur_x.
  950                        	;		bit	vdc_map_option, x	; Set bit7 to disable aligning
  951                        	;		bmi	!+			; BAT X with the map X.
  952    13:D42A  3D 77 26   			and	vdc_bat_x_mask, x
  953    13:D42D  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
  954                        	
  955    13:D42F  A5 FE      	!:		lda	<map_chr_y		; A = map CHR Y coordinate.
  956    13:D431  A8         			tay
  957    13:D432  4A         			lsr	a
  958    13:D433  42         			say				; Y = map BLK Y coordinate.
  959                        	
  960                        	;		bit	vdc_map_option, x	; Set bit6 to disable aligning
  961                        	;		bvs	!+			; BAT Y with the map Y.
  962    13:D434  3D 78 26   			and	vdc_bat_y_mask, x
  963    13:D437  85 F9      			sta	<map_bat_y		; Save BAT Y chr coordinate.
  964                        	
  965               0000     		.if	BLKMAP_LARGEMAP
  970                        		.endif
  971                        	
  972    13:D439  BD 7C 26   	!:		lda	vdc_map_line_w, x	; Map width in BLK.
  973               0000     		.if	FAST_MULTIPLY
  986                        		.else
  987    13:D43C  84 EF      			sty.h	<map_line		; Takes 144..176 cycles.
  988    13:D43E  A0 08      			ldy	#8
  989    13:D440  4A         			lsr	a
  990    13:D441  85 EE      			sta.l	<map_line
  991    13:D443  62         			cla
  992    13:D444  90 03      			bcc	.rotate
  993    13:D446  18         	.add:		clc
  994    13:D447  65 EF      			adc.h	<map_line
  995    13:D449  6A         	.rotate:	ror	a
  996    13:D44A  66 EE      			ror.l	<map_line		; Lo-byte of (BLK Y * width).
  997    13:D44C  88         			dey
  998    13:D44D  B0 F7      			bcs	.add
  999    13:D44F  D0 F8      			bne	.rotate
 1000    13:D451  A8         			tay				; Hi-byte of (BLK Y * width).
 1001                        		.endif
 1002                        	
 1003    13:D452  A5 FC      	!:		lda	<map_chr_x		; Map CHR X coordinate.
 1004    13:D454  4A         			lsr	a			; Map BLK X coordinate.
 1005    13:D455  18         			clc
 1006    13:D456  65 EE      			adc.l	<map_line		; Lo-byte of (BLK Y * width).
 1007    13:D458  90 01      			bcc	!+
 1008    13:D45A  C8         			iny				; Hi-byte of (BLK Y * width).
 1009                        	
 1010    13:D45B  18         	!:		clc				; Calc map data pointer.
 1011    13:D45C  7D B9 2B   			adc.l	vdc_map_addr, x
 1012    13:D45F  85 EC      			sta.l	<_bp			; Maximum map size is 16KBytes
 1013    13:D461  98         			tya				; so we don't need to consider
 1014    13:D462  7D BA 2B   			adc.h	vdc_map_addr, x		; bank overflow.
 1015    13:D465  85 ED      			sta.h	<_bp
 1016                        	
 1017    13:D467  80 66      			bra	map_set_banks		; Put BLK & MAP in MPR2-MPR5.
 1018                        	
 1019                        	
 1020                        	
 1021               0001     		.if	BLKMAP_MULTISCR
 1022                        	
 1023                        	; ***************************************************************************
 1024                        	; ***************************************************************************
 1025                        	;
 1026                        	; map_set_screen -
 1027                        	;
 1028                        	; Maximum X and Y dimension of 128 screens (32768 pixels).
 1029                        	; Maximum 8KByte total size of screen data (1024 screens).
 1030                        	;
 1031                        	
 1032    13:D469  A4 FF      	map_set_screen:	ldy	<map_scrn_y		; Map SCR Y coordinate.
 1033    13:D46B  BD 7D 26   			lda	vdc_map_scrn_w, x	; Map width in SCREENS.
 1034                        	
 1035               0000     		.if	FAST_MULTIPLY
 1048                        		.else
 1049    13:D46E  84 ED      			sty.h	<_bp			; Takes 144..176 cycles.
 1050    13:D470  A0 08      			ldy	#8
 1051    13:D472  4A         			lsr	a
 1052    13:D473  85 EC      			sta.l	<_bp
 1053    13:D475  62         			cla
 1054    13:D476  90 03      			bcc	.rotate
 1055    13:D478  18         	.add:		clc
 1056    13:D479  65 ED      			adc.h	<_bp
 1057    13:D47B  6A         	.rotate:	ror	a
 1058    13:D47C  66 EC      			ror.l	<_bp			; Lo-byte of (SCR Y * width).
 1059    13:D47E  88         			dey
 1060    13:D47F  B0 F7      			bcs	.add
 1061    13:D481  D0 F8      			bne	.rotate
 1062    13:D483  A8         			tay				; Hi-byte of (SCR Y * width).
 1063                        		.endif
 1064                        	
 1065    13:D484  A5 FD      			lda	<map_scrn_x		; Map SCR X coordinate.
 1066    13:D486  18         			clc
 1067    13:D487  65 EC      			adc.l	<_bp
 1068    13:D489  90 01      			bcc	!+
 1069    13:D48B  C8         			iny
 1070                        	
 1071    13:D48C  84 ED      	!:		sty.h	<_bp			; 2 bytes per screen entry, max
 1072    13:D48E  0A         			asl	a			; 8KByte screen table.
 1073    13:D48F  26 ED      			rol.h	<_bp
 1074               0001     		.if	BLKDEF_POINTERS == 0
 1075    13:D491  0A         			asl	a			; 8 bytes per screen entry when
 1076    13:D492  26 ED      			rol.h	<_bp			; not using BLK pointers.
 1077    13:D494  0A         			asl	a
 1078    13:D495  26 ED      			rol.h	<_bp
 1079                        		.endif
 1080                        	
 1081    13:D497  7D BC 2B   			adc.l	vdc_scr_addr, x		; Calc screen data pointer.
 1082    13:D49A  85 EC      			sta.l	<_bp			; Maximum data size is 8KBytes
 1083    13:D49C  A5 ED      			lda.h	<_bp			; so we don't need to consider
 1084    13:D49E  7D BD 2B   			adc.h	vdc_scr_addr, x		; bank overflow.
 1085    13:D4A1  85 ED      			sta.h	<_bp
 1086                        	
 1087    13:D4A3  BD BE 2B   			lda	vdc_scr_bank, x		; Map the SCR data in MPR3..MPR4.
 1088    13:D4A6  53 08      			tam3
 1089    13:D4A8  1A         			inc	a
 1090    13:D4A9  53 10      			tam4
 1091                        	
 1092    13:D4AB  C2         			cly
 1093    13:D4AC  B1 EC      			lda	[_bp], y		; Get SCR_MAP_PAGE.
 1094    13:D4AE  9D BA 2B   			sta.h	vdc_map_addr, x
 1095    13:D4B1  C8         			iny
 1096    13:D4B2  B1 EC      			lda	[_bp], y		; Get SCR_MAP_BANK.
 1097    13:D4B4  9D BB 2B   			sta	vdc_map_bank, x
 1098                        	
 1099               0001     		.if	BLKDEF_POINTERS == 0
 1100    13:D4B7  C8         			iny
 1101    13:D4B8  B1 EC      			lda	[_bp], y		; Get SCR_BLK_PAGE.
 1102    13:D4BA  9D B7 2B   			sta.h	vdc_blk_addr, x
 1103    13:D4BD  C8         			iny
 1104    13:D4BE  B1 EC      			lda	[_bp], y		; Get SCR_BLK_BANK.
 1105    13:D4C0  9D B8 2B   			sta	vdc_blk_bank, x
 1106    13:D4C3  C8         			iny
 1107    13:D4C4  B1 EC      			lda	[_bp], y		; Get SCR_TBL_PAGE.
 1108    13:D4C6  9D B4 2B   			sta.h	vdc_tbl_addr, x
 1109    13:D4C9  C8         			iny
 1110    13:D4CA  B1 EC      			lda	[_bp], y		; Get SCR_TBL_BANK.
 1111    13:D4CC  9D B5 2B   			sta	vdc_tbl_bank, x
 1112               0000     		.if	0				; These are not currently used.
 1119                        		.endif
 1120                        		.endif
 1121                        	
 1122                        	;		lda	vdc_bat_width, x	; Set up the map width.
 1123                        	;		lsr	a			; This should have been set
 1124                        	;		sta	vdc_map_line_w, x	; with the multi-screen map.
 1125                        	
 1126                        	;		jmp	map_set_banks		; Put BLK & MAP in MPR2-MPR5.
 1127                        	
 1128                        			; Fall through to map_set_banks.
 1129                        	
 1130                        		.endif	BLKMAP_MULTISCR
 1131                        	
 1132                        	
 1133                        	
 1134                        	; ***************************************************************************
 1135                        	; ***************************************************************************
 1136                        	;
 1137                        	; map_set_banks - Put BLK & MAP in MPR2-MPR5.
 1138                        	;
 1139                        	
 1140    13:D4CF  BD B8 2B   	map_set_banks:	lda	vdc_blk_bank, x		; Put the BLK into MPR2.
 1141    13:D4D2  53 04      			tam2
 1142                        	
 1143    13:D4D4  BD BB 2B   			lda	vdc_map_bank, x		; Put the MAP into MPR3-MPR5.
 1144    13:D4D7  53 08      			tam3
 1145    13:D4D9  1A         			inc	a
 1146    13:D4DA  53 10      			tam4
 1147               0000     		.if	BLKMAP_LARGEMAP
 1156                        		.endif
 1157                        	
 1158    13:D4DC  60         	!:		rts
 1159                        	
 1160                        	
 1161                        	
 1162                        	; ***************************************************************************
 1163                        	; ***************************************************************************
 1164                        	;
 1165                        	; map_scroll_x - Update the BAT when X coordinate changes.
 1166                        	;
 1167                        	; N.B. This will alter map_chr_x and map_scrn_x if moved in +ve direction!
 1168                        	;
 1169                        	; N.B. This only ever draws a single column!
 1170                        	;
 1171                        	
 1172    13:D4DD  60         	!no_change:	rts
 1173                        	
 1174    13:D4DE             	map_scroll_x:
 1175                        	
 1176               0001     		.if	BLKMAP_MULTISCR
 1177                        	
 1178                        			; Initialization for a multi-screen map.
 1179                        	
 1180    13:D4DE  BD BE 2B   			lda	vdc_scr_bank, x		; Skip this if regular blkmap.
 1181    13:D4E1  F0 56      			beq	.regular
 1182                        	
 1183    13:D4E3  A5 FC      	.multiscreen:	lda	<map_chr_x		; Compare old_x with cur_x.
 1184    13:D4E5  DD B1 2B   			cmp	vdc_old_chr_x, x
 1185               0001     		.if	BLKMAP_TIMETEST == 0
 1186    13:D4E8  F0 F3      			beq	!no_change-		; Do nothing if no change.
 1187                        		.endif
 1188    13:D4EA  9D B1 2B   			sta	vdc_old_chr_x, x
 1189    13:D4ED  30 11      			bmi	!+			; Test the sign of the change.
 1190                        	
 1191    13:D4EF  18         			clc				; Draw RHS if chr_x >= old_x.
 1192    13:D4F0  3D 77 26   			and	vdc_bat_x_mask, x
 1193    13:D4F3  7D 7A 26   			adc	vdc_map_draw_w, x	; Usually (SCR_WIDTH / 8) + 1.
 1194    13:D4F6  3A         			dec	a
 1195    13:D4F7  85 FC      			sta	<map_chr_x		; Update CHR X chr coordinate.
 1196    13:D4F9  3C 75 26   			bit	vdc_bat_width, x
 1197    13:D4FC  F0 02      			beq	!+
 1198    13:D4FE  E6 FD      			inc	<map_scrn_x		; Wrapped to the next screen.
 1199                        	
 1200    13:D500  3D 77 26   	!:		and	vdc_bat_x_mask, x
 1201    13:D503  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
 1202                        	
 1203    13:D505  A5 FE      			lda	<map_chr_y		; Save BAT Y chr coordinate.
 1204    13:D507  3D 78 26   			and	vdc_bat_y_mask, x
 1205    13:D50A  85 F9      			sta	<map_bat_y
 1206    13:D50C  4A         			lsr	a			; Map BLK Y coordinate.
 1207    13:D50D  85 EF      			sta.h	<map_line
 1208    13:D50F  62         			cla
 1209    13:D510  3C 75 26   			bit	vdc_bat_width, x
 1210    13:D513  30 08      			bmi	.w128
 1211    13:D515  70 03      			bvs	.w64
 1212    13:D517  46 EF      	.w32:		lsr.h	<map_line
 1213    13:D519  6A         			ror	a
 1214    13:D51A  46 EF      	.w64:		lsr.h	<map_line
 1215    13:D51C  6A         			ror	a
 1216    13:D51D  46 EF      	.w128:		lsr.h	<map_line
 1217    13:D51F  6A         			ror	a
 1218    13:D520  46 EF      			lsr.h	<map_line		; Hi-byte of (BLK Y * width).
 1219    13:D522  6A         			ror	a
 1220    13:D523  85 EE      			sta.l	<map_line		; Lo-byte of (BLK Y * width).
 1221                        	
 1222    13:D525  20 69 D4   			jsr	map_set_screen		; Put BLK & MAP in MPR2-MPR5.
 1223                        	
 1224    13:D528  A5 F8      			lda	<map_bat_x		; Calc map data pointer.
 1225    13:D52A  4A         			lsr	a			; Map BLK X coordinate.
 1226    13:D52B  05 EE      			ora.l	<map_line
 1227    13:D52D  85 EC      			sta.l	<_bp
 1228    13:D52F  A5 EF      			lda.h	<map_line
 1229    13:D531  18         			clc
 1230    13:D532  7D BA 2B   			adc.h	vdc_map_addr, x		; N.B. 256-byte aligned!
 1231    13:D535  85 ED      			sta.h	<_bp
 1232                        	
 1233    13:D537  80 5D      			bra	.draw_col		; Now draw it.
 1234                        	
 1235                        		.endif	BLKMAP_MULTISCR
 1236                        	
 1237                        			; Initialization for a regular map.
 1238                        	
 1239    13:D539  A5 FC      	.regular:	lda	<map_chr_x		; Compare old_x with cur_x.
 1240    13:D53B  DD B1 2B   			cmp	vdc_old_chr_x, x
 1241               0001     		.if	BLKMAP_TIMETEST == 0
 1242    13:D53E  F0 9D      			beq	!no_change-		; Do nothing if no change.
 1243                        		.endif
 1244    13:D540  9D B1 2B   			sta	vdc_old_chr_x, x
 1245    13:D543  30 07      			bmi	!+			; Test the sign of the change.
 1246                        	
 1247    13:D545  18         			clc				; Draw RHS if chr_x >= old_x.
 1248    13:D546  7D 7A 26   			adc	vdc_map_draw_w, x	; Usually (SCR_WIDTH / 8) + 1.
 1249    13:D549  3A         			dec	a
 1250    13:D54A  85 FC      			sta	<map_chr_x		; Update CHR X chr coordinate.
 1251                        	
 1252    13:D54C  3C 82 26   	!:		bit	vdc_map_option, x	; Set bit7 to disable aligning
 1253    13:D54F  30 05      			bmi	!+			; BAT X with the map X.
 1254    13:D551  3D 77 26   			and	vdc_bat_x_mask, x
 1255    13:D554  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
 1256                        	
 1257    13:D556  A5 FE      	!:		lda	<map_chr_y		; A = map CHR Y coordinate.
 1258    13:D558  A8         			tay
 1259    13:D559  4A         			lsr	a
 1260    13:D55A  42         			say				; Y = map BLK Y coordinate.
 1261                        	
 1262    13:D55B  3C 82 26   			bit	vdc_map_option, x	; Set bit6 to disable aligning
 1263    13:D55E  70 05      			bvs	!+			; BAT Y with the map Y.
 1264    13:D560  3D 78 26   			and	vdc_bat_y_mask, x
 1265    13:D563  85 F9      			sta	<map_bat_y		; Save BAT Y chr coordinate.
 1266                        	
 1267               0000     		.if	BLKMAP_LARGEMAP
 1272                        		.endif
 1273                        	
 1274    13:D565  BD 7C 26   	!:		lda	vdc_map_line_w, x	; Map width in BLK.
 1275               0000     		.if	FAST_MULTIPLY
 1288                        		.else
 1289    13:D568  84 EF      			sty.h	<map_line		; Takes 144..176 cycles.
 1290    13:D56A  A0 08      			ldy	#8
 1291    13:D56C  4A         			lsr	a
 1292    13:D56D  85 EE      			sta.l	<map_line
 1293    13:D56F  62         			cla
 1294    13:D570  90 03      			bcc	.rotate
 1295    13:D572  18         	.add:		clc
 1296    13:D573  65 EF      			adc.h	<map_line
 1297    13:D575  6A         	.rotate:	ror	a
 1298    13:D576  66 EE      			ror.l	<map_line		; Lo-byte of (BLK Y * width).
 1299    13:D578  88         			dey
 1300    13:D579  B0 F7      			bcs	.add
 1301    13:D57B  D0 F8      			bne	.rotate
 1302    13:D57D  A8         			tay				; Hi-byte of (BLK Y * width).
 1303                        		.endif
 1304                        	
 1305    13:D57E  A5 FC      	!:		lda	<map_chr_x		; Map CHR X coordinate.
 1306    13:D580  4A         			lsr	a			; Map BLK X coordinate.
 1307    13:D581  18         			clc
 1308    13:D582  65 EE      			adc.l	<map_line		; Lo-byte of (BLK Y * width).
 1309    13:D584  90 01      			bcc	!+
 1310    13:D586  C8         			iny				; Hi-byte of (BLK Y * width).
 1311                        	
 1312    13:D587  18         	!:		clc				; Calc map data pointer.
 1313    13:D588  7D B9 2B   			adc.l	vdc_map_addr, x
 1314    13:D58B  85 EC      			sta.l	<_bp			; Maximum map size is 16KBytes
 1315    13:D58D  98         			tya				; so we don't need to consider
 1316    13:D58E  7D BA 2B   			adc.h	vdc_map_addr, x		; bank overflow.
 1317    13:D591  85 ED      			sta.h	<_bp
 1318                        	
 1319    13:D593  20 CF D4   			jsr	map_set_banks		; Put BLK & MAP in MPR2-MPR5.
 1320                        	
 1321                        			; Draw the first part of the column.
 1322                        	
 1323    13:D596  A5 F8      	.draw_col:	lda	<map_bat_x		; Set the BAT VRAM destination
 1324    13:D598  85 F0      			sta.l	<_di			; coordinates.
 1325    13:D59A  A5 F9      			lda	<map_bat_y
 1326    13:D59C  85 F1      			sta.h	<_di
 1327                        	
 1328    13:D59E  5D 78 26   			eor	vdc_bat_y_mask, x	; Calc CHR before wrap.
 1329    13:D5A1  1A         			inc	a
 1330    13:D5A2  DD 7B 26   			cmp	vdc_map_draw_h, x	; Usually (SCR_HEIGHT / 8) + 1.
 1331    13:D5A5  90 03      			bcc	!+
 1332    13:D5A7  BD 7B 26   			lda	vdc_map_draw_h, x	; Maximum CHR to draw.
 1333    13:D5AA  85 00      	!:		sta	<map_count		; Set number of CHR to draw.
 1334    13:D5AC  85 01      			sta	<map_drawn		; Preserve number of CHR drawn.
 1335                        	
 1336    13:D5AE  A9 05      			lda	#VDC_CR			; Set VDC auto-increment from
 1337    13:D5B0  95 F7      			sta	<vdc_reg, x		; the BAT width, which is set
 1338    13:D5B2  9D 00 02   			sta	VDC_AR, x		; up by set_screen_size().
 1339    13:D5B5  B5 F4      			lda	<vdc_crh, x
 1340    13:D5B7  9D 03 02   			sta	VDC_DH, x
 1341                        	
 1342    13:D5BA  20 FC D8   			jsr	blk_col_strip		; Draw top of vertical strip.
 1343                        	
 1344                        			; Wrap around and draw the rest of the column (if needed).
 1345                        	
 1346    13:D5BD  38         			sec				; Are there any more CHR that
 1347    13:D5BE  BD 7B 26   			lda	vdc_map_draw_h, x	; need to be drawn?
 1348    13:D5C1  E5 01      			sbc	<map_drawn
 1349    13:D5C3  F0 2C      			beq	.done
 1350                        	
 1351    13:D5C5  85 00      			sta	<map_count		; Set number of CHR to draw.
 1352                        	
 1353    13:D5C7  A5 FE      			lda	<map_chr_y		; Update CHR Y coordinate for
 1354    13:D5C9  48         			pha				; drawing unaligned tiles.
 1355    13:D5CA  18         			clc
 1356    13:D5CB  65 01      			adc	<map_drawn
 1357    13:D5CD  85 FE      			sta	<map_chr_y
 1358                        	
 1359               0001     		.if	BLKMAP_MULTISCR
 1360    13:D5CF  BD BE 2B   			lda	vdc_scr_bank, x		; Skip this if regular blkmap.
 1361    13:D5D2  F0 0F      			beq	!+
 1362                        	
 1363    13:D5D4  E6 FF      			inc	<map_scrn_y		; Wrapped to the next screen.
 1364                        	
 1365    13:D5D6  20 69 D4   			jsr	map_set_screen		; Put BLK & MAP in MPR2-MPR5.
 1366                        	
 1367    13:D5D9  A5 F8      			lda	<map_bat_x		; Calc map data pointer.
 1368    13:D5DB  4A         			lsr	a			; Map BLK X coordinate.
 1369    13:D5DC  85 EC      			sta.l	<_bp
 1370    13:D5DE  BD BA 2B   			lda.h	vdc_map_addr, x		; N.B. 256-byte aligned!
 1371    13:D5E1  85 ED      			sta.h	<_bp
 1372                        		.endif
 1373                        	
 1374    13:D5E3  A5 F8      	!:		lda	<map_bat_x		; Set the BAT VRAM destination
 1375    13:D5E5  85 F0      			sta.l	<_di			; coordinates.
 1376    13:D5E7  64 F1      			stz.h	<_di			; Reset 1st row to draw.
 1377                        	
 1378    13:D5E9  20 FC D8   			jsr	blk_col_strip		; Draw btm of vertical strip.
 1379                        	
 1380               0001     		.if	BLKMAP_MULTISCR
 1381    13:D5EC  C6 FF      			dec	<map_scrn_y		; Restore, no check if should.
 1382                        		.endif
 1383                        	
 1384    13:D5EE  68         			pla				; Restore CHR Y coordinate, we
 1385    13:D5EF  85 FE      			sta	<map_chr_y		; might draw another column!
 1386                        	
 1387    13:D5F1  A9 05      	.done:		lda	#VDC_CR			; Set VDC auto-increment to 1.
 1388    13:D5F3  95 F7      			sta	<vdc_reg, x
 1389    13:D5F5  9D 00 02   			sta	VDC_AR, x
 1390    13:D5F8  9E 03 02   			stz	VDC_DH, x
 1391                        	
 1392    13:D5FB  60         			rts
 1393                        	
 1394                        	
 1395                        	
 1396                        	; ***************************************************************************
 1397                        	; ***************************************************************************
 1398                        	;
 1399                        	; map_scroll_y - Update the BAT when Y coordinate changes.
 1400                        	;
 1401                        	; N.B. This will alter map_chr_y and map_scrn_y if moved in +ve direction!
 1402                        	;
 1403                        	; N.B. This draws multiple rows when called from _draw_map or _blit_map.
 1404                        	;
 1405                        	
 1406    13:D5FC  60         	!no_change:	rts
 1407                        	
 1408    13:D5FD             	map_scroll_y:
 1409                        	
 1410               0001     		.if	BLKMAP_MULTISCR
 1411                        	
 1412                        			; Initialization for a multi-screen map.
 1413                        	
 1414    13:D5FD  BD BE 2B   			lda	vdc_scr_bank, x		; Skip this if regular blkmap.
 1415    13:D600  F0 56      			beq	.regular
 1416                        	
 1417    13:D602  A5 FE      	.multiscr:	lda	<map_chr_y		; Compare old_y with cur_y.
 1418    13:D604  DD B2 2B   			cmp	vdc_old_chr_y, x
 1419               0001     		.if	BLKMAP_TIMETEST == 0
 1420    13:D607  F0 F3      			beq	!no_change-		; Do nothing if no change.
 1421                        		.endif
 1422    13:D609  9D B2 2B   			sta	vdc_old_chr_y, x
 1423    13:D60C  30 11      			bmi	!+			; Test the sign of the change.
 1424                        	
 1425    13:D60E  18         			clc				; Draw bottom if chr_y >= old_y.
 1426    13:D60F  3D 78 26   			and	vdc_bat_y_mask, x
 1427    13:D612  7D 7B 26   			adc	vdc_map_draw_h, x	; Usually (SCR_HEIGHT / 8) + 1.
 1428    13:D615  3A         			dec	a
 1429    13:D616  85 FE      			sta	<map_chr_y		; Update CHR Y chr coordinate.
 1430    13:D618  3C 76 26   			bit	vdc_bat_height, x
 1431    13:D61B  F0 02      			beq	!+
 1432    13:D61D  E6 FF      			inc	<map_scrn_y		; Wrapped to the next screen.
 1433                        	
 1434    13:D61F  3D 78 26   	!:		and	vdc_bat_y_mask, x
 1435    13:D622  85 F9      			sta	<map_bat_y		; Save BAT Y chr coordinate.
 1436                        	
 1437    13:D624  4A         			lsr	a			; Map BLK Y coordinate.
 1438    13:D625  85 EF      			sta.h	<map_line
 1439    13:D627  62         			cla
 1440    13:D628  3C 75 26   			bit	vdc_bat_width, x
 1441    13:D62B  30 08      			bmi	.w128
 1442    13:D62D  70 03      			bvs	.w64
 1443    13:D62F  46 EF      	.w32:		lsr.h	<map_line
 1444    13:D631  6A         			ror	a
 1445    13:D632  46 EF      	.w64:		lsr.h	<map_line
 1446    13:D634  6A         			ror	a
 1447    13:D635  46 EF      	.w128:		lsr.h	<map_line
 1448    13:D637  6A         			ror	a
 1449    13:D638  46 EF      			lsr.h	<map_line		; Hi-byte of (BLK Y * width).
 1450    13:D63A  6A         			ror	a
 1451    13:D63B  85 EE      			sta.l	<map_line		; Lo-byte of (BLK Y * width).
 1452                        	
 1453    13:D63D  A5 FC      			lda	<map_chr_x
 1454    13:D63F  3D 77 26   			and	vdc_bat_x_mask, x
 1455    13:D642  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
 1456                        	
 1457                        			; Loop to here if drawing multiple multi-screen rows.
 1458                        	
 1459    13:D644  20 69 D4   	.multiscr_row:	jsr	map_set_screen		; Put BLK & MAP in MPR2-MPR5.
 1460                        	
 1461    13:D647  A5 F8      			lda	<map_bat_x		; Calc map data pointer.
 1462    13:D649  4A         			lsr	a			; Map BLK X coordinate.
 1463    13:D64A  05 EE      			ora.l	<map_line
 1464    13:D64C  85 EC      			sta.l	<_bp
 1465    13:D64E  A5 EF      			lda.h	<map_line
 1466    13:D650  18         			clc
 1467    13:D651  7D BA 2B   			adc.h	vdc_map_addr, x		; N.B. 256-byte aligned!
 1468    13:D654  85 ED      			sta.h	<_bp
 1469                        	
 1470    13:D656  80 60      			bra	.draw_row		; Now draw it.
 1471                        	
 1472                        		.endif	BLKMAP_MULTISCR
 1473                        	
 1474                        			; Initialization for a regular blkmap.
 1475                        	
 1476    13:D658  A5 FE      	.regular:	lda	<map_chr_y		; Compare old_y with cur_y.
 1477    13:D65A  DD B2 2B   			cmp	vdc_old_chr_y, x
 1478               0001     		.if	BLKMAP_TIMETEST == 0
 1479    13:D65D  F0 9D      			beq	!no_change-		; Do nothing if no change.
 1480                        		.endif
 1481    13:D65F  9D B2 2B   			sta	vdc_old_chr_y, x
 1482    13:D662  30 07      			bmi	!+			; Test the sign of the change.
 1483                        	
 1484    13:D664  18         			clc				; Draw bottom if chr_y >= old_y.
 1485    13:D665  7D 7B 26   			adc	vdc_map_draw_h, x	; Usually (SCR_HEIGHT / 8) + 1.
 1486    13:D668  3A         			dec	a
 1487    13:D669  85 FE      			sta	<map_chr_y		; Update CHR Y chr coordinate.
 1488                        	
 1489    13:D66B  A8         	!:		tay				; A = map CHR Y coordinate.
 1490    13:D66C  4A         			lsr	a
 1491    13:D66D  42         			say				; Y = map BLK Y coordinate.
 1492                        	
 1493    13:D66E  3C 82 26   			bit	vdc_map_option, x	; Set bit6 to disable aligning
 1494    13:D671  70 05      			bvs	!+			; BAT Y with the map Y.
 1495    13:D673  3D 78 26   			and	vdc_bat_y_mask, x
 1496    13:D676  85 F9      			sta	<map_bat_y		; Save BAT Y chr coordinate.
 1497                        	
 1498    13:D678  3C 82 26   	!:		bit	vdc_map_option, x	; Set bit7 to disable aligning
 1499    13:D67B  30 07      			bmi	!+			; BAT X with the map X.
 1500    13:D67D  A5 FC      			lda	<map_chr_x
 1501    13:D67F  3D 77 26   			and	vdc_bat_x_mask, x
 1502    13:D682  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
 1503    13:D684             	!:
 1504                        	
 1505               0000     		.if	BLKMAP_LARGEMAP
 1510                        		.endif
 1511                        	
 1512    13:D684  BD 7C 26   			lda	vdc_map_line_w, x	; Map width in BLK.
 1513               0000     		.if	FAST_MULTIPLY
 1526                        		.else
 1527    13:D687  84 EF      			sty.h	<map_line		; Takes 144..176 cycles.
 1528    13:D689  A0 08      			ldy	#8
 1529    13:D68B  4A         			lsr	a
 1530    13:D68C  85 EE      			sta.l	<map_line
 1531    13:D68E  62         			cla
 1532    13:D68F  90 03      			bcc	.rotate
 1533    13:D691  18         	.add:		clc
 1534    13:D692  65 EF      			adc.h	<map_line
 1535    13:D694  6A         	.rotate:	ror	a
 1536    13:D695  66 EE      			ror.l	<map_line		; Lo-byte of (BLK Y * width).
 1537    13:D697  88         			dey
 1538    13:D698  B0 F7      			bcs	.add
 1539    13:D69A  D0 F8      			bne	.rotate
 1540    13:D69C  85 EF      			sta.h	<map_line		; Hi-byte of (BLK Y * width).
 1541                        		.endif
 1542                        	
 1543    13:D69E  20 CF D4   			jsr	map_set_banks		; Put BLK & MAP in MPR2-MPR5.
 1544                        	
 1545                        			; Loop to here if drawing multiple regular blkmap rows.
 1546                        	
 1547    13:D6A1  A4 EF      	.regular_row:	ldy.h	<map_line		; Hi-byte of (BLK Y * width).
 1548    13:D6A3  A5 FC      			lda	<map_chr_x		; Map CHR X coordinate.
 1549    13:D6A5  4A         			lsr	a			; Map BLK X coordinate.
 1550    13:D6A6  18         			clc
 1551    13:D6A7  65 EE      			adc.l	<map_line		; Lo-byte of (BLK Y * width).
 1552    13:D6A9  90 01      			bcc	!+
 1553    13:D6AB  C8         			iny
 1554    13:D6AC  18         	!:		clc				; Calc map data pointer.
 1555    13:D6AD  7D B9 2B   			adc.l	vdc_map_addr, x
 1556    13:D6B0  85 EC      			sta.l	<_bp			; Maximum map size is 16KBytes
 1557    13:D6B2  98         			tya				; so we don't need to consider
 1558    13:D6B3  7D BA 2B   			adc.h	vdc_map_addr, x		; bank overflow.
 1559    13:D6B6  85 ED      			sta.h	<_bp
 1560                        	
 1561                        			; Draw the first part of the row.
 1562                        	
 1563    13:D6B8  A5 F9      	.draw_row:	lda	<map_bat_y		; Set the BAT VRAM destination
 1564    13:D6BA  85 F1      			sta.h	<_di			; coordinates.
 1565    13:D6BC  A5 F8      			lda	<map_bat_x
 1566    13:D6BE  85 F0      			sta.l	<_di
 1567                        	
 1568    13:D6C0  5D 77 26   			eor	vdc_bat_x_mask, x	; Calc CHR before wrap.
 1569    13:D6C3  1A         			inc	a
 1570    13:D6C4  C5 FA      			cmp	<map_draw_w		; Usually (SCR_WIDTH / 8) + 1.
 1571    13:D6C6  90 02      			bcc	!+
 1572    13:D6C8  A5 FA      			lda	<map_draw_w		; Maximum CHR to draw.
 1573    13:D6CA  85 00      	!:		sta	<map_count		; Set number of CHR to draw.
 1574    13:D6CC  85 01      			sta	<map_drawn		; Preserve number of CHR drawn.
 1575                        	
 1576    13:D6CE  20 3E D7   			jsr	blk_row_strip		; Draw lhs of horizontal strip.
 1577                        	
 1578                        			; Wrap around and draw the rest of the row (if needed).
 1579                        	
 1580    13:D6D1  38         			sec				; Are there any more CHR that
 1581    13:D6D2  A5 FA      			lda	<map_draw_w		; need to be drawn?
 1582    13:D6D4  E5 01      			sbc	<map_drawn
 1583    13:D6D6  F0 2E      			beq	.done_row
 1584                        	
 1585    13:D6D8  85 00      			sta	<map_count		; Set number of CHR to draw.
 1586                        	
 1587    13:D6DA  A5 FC      			lda	<map_chr_x		; Update CHR X coordinate for
 1588    13:D6DC  48         			pha				; drawing unaligned tiles.
 1589    13:D6DD  18         			clc
 1590    13:D6DE  65 01      			adc	<map_drawn
 1591    13:D6E0  85 FC      			sta	<map_chr_x
 1592                        	
 1593               0001     		.if	BLKMAP_MULTISCR
 1594    13:D6E2  BD BE 2B   			lda	vdc_scr_bank, x		; Skip this if regular blkmap.
 1595    13:D6E5  F0 11      			beq	!+
 1596                        	
 1597    13:D6E7  E6 FD      			inc	<map_scrn_x		; Wrapped to the next screen.
 1598                        	
 1599    13:D6E9  20 69 D4   			jsr	map_set_screen		; Locate screen's BLK and MAP.
 1600                        	
 1601    13:D6EC  18         			clc				; Calc map data pointer.
 1602    13:D6ED  A5 EE      			lda.l	<map_line
 1603    13:D6EF  85 EC      			sta.l	<_bp
 1604    13:D6F1  A5 EF      			lda.h	<map_line
 1605    13:D6F3  7D BA 2B   			adc.h	vdc_map_addr, x		; N.B. 256-byte aligned!
 1606    13:D6F6  85 ED      			sta.h	<_bp
 1607                        		.endif
 1608                        	
 1609    13:D6F8  A5 F9      	!:		lda	<map_bat_y		; Set the BAT VRAM destination
 1610    13:D6FA  85 F1      			sta.h	<_di			; coordinates.
 1611    13:D6FC  64 F0      			stz.l	<_di			; Reset 1st column to draw.
 1612                        	
 1613    13:D6FE  20 3E D7   			jsr	blk_row_strip		; Draw rhs of horizontal strip.
 1614                        	
 1615               0001     		.if	BLKMAP_MULTISCR
 1616    13:D701  C6 FD      			dec	<map_scrn_x		; Restore, no check if should.
 1617                        		.endif	BLKMAP_MULTISCR
 1618                        	
 1619    13:D703  68         			pla				; Restore CHR X coordinate, we
 1620    13:D704  85 FC      			sta	<map_chr_x		; might draw another row!
 1621                        	
 1622    13:D706  C6 FB      	.done_row:	dec	<map_draw_h		; Are all desired rows drawn?
 1623    13:D708  F0 33      			beq	.finished
 1624                        	
 1625    13:D70A  E6 FE      			inc	<map_chr_y		; Move CHR Y down by 1.
 1626                        	
 1627    13:D70C  A5 FE      			lda	<map_chr_y		; If new BLK then ...
 1628    13:D70E  4A         			lsr	a
 1629    13:D70F  B0 0B      			bcs	!+
 1630    13:D711  BD 7C 26   			lda	vdc_map_line_w, x	; Move the map line pointer to
 1631    13:D714  65 EE      			adc.l	<map_line		; the next line.
 1632    13:D716  85 EE      			sta.l	<map_line
 1633    13:D718  90 02      			bcc	!+
 1634    13:D71A  E6 EF      			inc.h	<map_line
 1635                        	
 1636    13:D71C  A5 F9      	!:		lda	<map_bat_y		; Move BAT Y down by 1.
 1637    13:D71E  1A         			inc	a
 1638    13:D71F  3D 78 26   			and	vdc_bat_y_mask, x
 1639    13:D722  85 F9      			sta	<map_bat_y
 1640                        	
 1641               0001     		.if	BLKMAP_MULTISCR
 1642    13:D724  BC BE 2B   			ldy	vdc_scr_bank, x		; Skip this if regular blkmap.
 1643    13:D727  D0 03 4C A1			beq	.regular_row
         13:D72B  D6          
 1644                        	
 1645    13:D72C  A8         			tay				; If wrapped to the top line of
 1646    13:D72D  D0 0B      			bne	!+			; of the BAT then increment the
 1647    13:D72F  E6 FF      			inc	<map_scrn_y		; screen.
 1648                        	
 1649    13:D731  BD 79 26   			lda	vdc_bat_limit, x	; The map line must wrap around
 1650    13:D734  4A         			lsr	a			; too. This is simple since its
 1651    13:D735  4A         			lsr	a			; size (in bytes) is 1/4 of the
 1652    13:D736  25 EF      			and.h	<map_line		; BAT size (in words) and it is
 1653    13:D738  85 EF      			sta.h	<map_line		; a power-of-2.
 1654                        	
 1655    13:D73A  4C 44 D6   	!:		jmp	.multiscr_row		; Draw next row.
 1656                        		.else
 1658                        		.endif	BLKMAP_MULTISCR
 1659                        	
 1660    13:D73D  60         	.finished:	rts
 1661                        	
 1662                        	
 1663                        	
 1664               0000     		.if	BLKDEF_POINTERS
 1858                        		.else	BLKDEF_POINTERS
 1859                        	
 1860                        	
 1861                        	
 1862                        	; ***************************************************************************
 1863                        	; ***************************************************************************
 1864                        	;
 1865                        	; blk_row_strip - Draw a single row of CHR into the BAT.
 1866                        	;
 1867                        	
 1868    13:D73E  20 34 E4   	blk_row_strip:	jsr	set_di_xy_mawr		; Set the BAT VRAM destination.
 1869                        	
 1870    13:D741  A5 FC      			lda	<map_chr_x		; Select what drawing code to
 1871    13:D743  4A         			lsr	a			; use depending upon even/odd
 1872    13:D744  A5 FE      			lda	<map_chr_y		; CHR coordinates (not BAT to
 1873    13:D746  29 01      			and	#1			; support unaligned drawing).
 1874    13:D748  2A         			rol	a
 1875    13:D749  0A         			asl	a
 1876    13:D74A  1D B7 2B   			ora.h	vdc_blk_addr, x		; What is the BLK data address?
 1877    13:D74D  29 1E      			and	#%00011110		; $4000, $4800, $5000 or $5800.
 1878    13:D74F  A8         			tay
 1879    13:D750  B9 5D D7   			lda.h	.jump_table, y		; Push the address of the code.
 1880    13:D753  48         			pha
 1881    13:D754  B9 5C D7   			lda.l	.jump_table, y
 1882    13:D757  48         			pha
 1883                        	
 1884    13:D758  B2 EC      			lda	[_bp]			; Get the first BLK number.
 1885    13:D75A  A8         			tay
 1886                        	
 1887    13:D75B  60         			rts				; Jump to the drawing code.
 1888                        	
 1889    13:D75C  7E D7      	.jump_table:	dw	b4000_top_even - 1
 1890    13:D75E  91 D7      			dw	b4000_top_odd - 1
 1891    13:D760  AE D7      			dw	b4000_btm_even - 1
 1892    13:D762  C1 D7      			dw	b4000_btm_odd - 1
 1893                        	
 1894    13:D764  DE D7      			dw	b4800_top_even - 1
 1895    13:D766  F1 D7      			dw	b4800_top_odd - 1
 1896    13:D768  0E D8      			dw	b4800_btm_even - 1
 1897    13:D76A  21 D8      			dw	b4800_btm_odd - 1
 1898                        	
 1899    13:D76C  3E D8      			dw	b5000_top_even - 1
 1900    13:D76E  51 D8      			dw	b5000_top_odd - 1
 1901    13:D770  6E D8      			dw	b5000_btm_even - 1
 1902    13:D772  81 D8      			dw	b5000_btm_odd - 1
 1903                        	
 1904    13:D774  9E D8      			dw	b5800_top_even - 1
 1905    13:D776  B1 D8      			dw	b5800_top_odd - 1
 1906    13:D778  CE D8      			dw	b5800_btm_even - 1
 1907    13:D77A  E1 D8      			dw	b5800_btm_odd - 1
 1908                        	
 1909                        			; top horizontal (32+2 rept)
 1910                        			;
 1911                        			; 89 cycles per block * 17 -> 1513 cycles
 1912                        	
 1913    13:D77C  B2 EC      	!repeat:	lda	[_bp]			; 7
 1914    13:D77E  A8         			tay				; 2
 1915                        	
 1916    13:D77F  B9 00 40   	b4000_top_even:	lda	BLK_4000_TL_L, y	; 5
 1917    13:D782  9D 02 02   			sta	VDC_DL, x		; 6
 1918    13:D785  B9 00 44   			lda	BLK_4000_TL_H, y	; 5
 1919               0001     		.if	BLKDEF_CHR_FLAG
 1920    13:D788  29 F3      			and	#%11110011		; 2
 1921                        		.endif
 1922    13:D78A  1A         			inc	a			; 2
 1923    13:D78B  9D 03 02   			sta	VDC_DH, x		; 6
 1924                        	
 1925    13:D78E  C6 00      			dec	<map_count		; 6
 1926    13:D790  F0 19      			beq	!end+			; 2
 1927                        	
 1928    13:D792  B9 00 41   	b4000_top_odd:	lda	BLK_4000_TR_L, y	; 5
 1929    13:D795  9D 02 02   			sta	VDC_DL, x		; 6
 1930    13:D798  B9 00 45   			lda	BLK_4000_TR_H, y	; 5
 1931               0001     		.if	BLKDEF_CHR_FLAG
 1932    13:D79B  29 F3      			and	#%11110011		; 2
 1933                        		.endif
 1934    13:D79D  1A         			inc	a			; 2
 1935    13:D79E  9D 03 02   			sta	VDC_DH, x		; 6
 1936                        	
 1937    13:D7A1  E6 EC      			inc.l	<_bp			; 6
 1938    13:D7A3  D0 02      			bne	!+			; 2/4
 1939    13:D7A5  E6 ED      			inc.h	<_bp			; 6
 1940                        	
 1941    13:D7A7  C6 00      	!:		dec	<map_count		; 6
 1942    13:D7A9  D0 D1      			bne	!repeat-		; 4
 1943                        	
 1944    13:D7AB  60         	!end:		rts
 1945                        	
 1946                        			; btm horizontal (32+2 rept)
 1947                        			;
 1948                        			; 89 cycles per block * 17 -> 1513 cycles
 1949                        	
 1950    13:D7AC  B2 EC      	!repeat:	lda	[_bp]			; 7
 1951    13:D7AE  A8         			tay				; 2
 1952                        	
 1953    13:D7AF  B9 00 42   	b4000_btm_even:	lda	BLK_4000_BL_L, y	; 5
 1954    13:D7B2  9D 02 02   			sta	VDC_DL, x		; 6
 1955    13:D7B5  B9 00 46   			lda	BLK_4000_BL_H, y	; 5
 1956               0001     		.if	BLKDEF_CHR_FLAG
 1957    13:D7B8  29 F3      			and	#%11110011		; 2
 1958                        		.endif
 1959    13:D7BA  1A         			inc	a			; 2
 1960    13:D7BB  9D 03 02   			sta	VDC_DH, x		; 6
 1961                        	
 1962    13:D7BE  C6 00      			dec	<map_count		; 6
 1963    13:D7C0  F0 19      			beq	!end+			; 2
 1964                        	
 1965    13:D7C2  B9 00 43   	b4000_btm_odd:	lda	BLK_4000_BR_L, y	; 5
 1966    13:D7C5  9D 02 02   			sta	VDC_DL, x		; 6
 1967    13:D7C8  B9 00 47   			lda	BLK_4000_BR_H, y	; 5
 1968               0001     		.if	BLKDEF_CHR_FLAG
 1969    13:D7CB  29 F3      			and	#%11110011		; 2
 1970                        		.endif
 1971    13:D7CD  1A         			inc	a			; 2
 1972    13:D7CE  9D 03 02   			sta	VDC_DH, x		; 6
 1973                        	
 1974    13:D7D1  E6 EC      			inc.l	<_bp			; 6
 1975    13:D7D3  D0 02      			bne	!+			; 2/4
 1976    13:D7D5  E6 ED      			inc.h	<_bp			; 6
 1977                        	
 1978    13:D7D7  C6 00      	!:		dec	<map_count		; 6
 1979    13:D7D9  D0 D1      			bne	!repeat-		; 4
 1980                        	
 1981    13:D7DB  60         	!end:		rts
 1982                        	
 1983                        			; top horizontal (32+2 rept)
 1984                        			;
 1985                        			; 89 cycles per block * 17 -> 1513 cycles
 1986                        	
 1987    13:D7DC  B2 EC      	!repeat:	lda	[_bp]			; 7
 1988    13:D7DE  A8         			tay				; 2
 1989                        	
 1990    13:D7DF  B9 00 48   	b4800_top_even:	lda	BLK_4800_TL_L, y	; 5
 1991    13:D7E2  9D 02 02   			sta	VDC_DL, x		; 6
 1992    13:D7E5  B9 00 4C   			lda	BLK_4800_TL_H, y	; 5
 1993               0001     		.if	BLKDEF_CHR_FLAG
 1994    13:D7E8  29 F3      			and	#%11110011		; 2
 1995                        		.endif
 1996    13:D7EA  1A         			inc	a			; 2
 1997    13:D7EB  9D 03 02   			sta	VDC_DH, x		; 6
 1998                        	
 1999    13:D7EE  C6 00      			dec	<map_count		; 6
 2000    13:D7F0  F0 19      			beq	!end+			; 2
 2001                        	
 2002    13:D7F2  B9 00 49   	b4800_top_odd:	lda	BLK_4800_TR_L, y	; 5
 2003    13:D7F5  9D 02 02   			sta	VDC_DL, x		; 6
 2004    13:D7F8  B9 00 4D   			lda	BLK_4800_TR_H, y	; 5
 2005               0001     		.if	BLKDEF_CHR_FLAG
 2006    13:D7FB  29 F3      			and	#%11110011		; 2
 2007                        		.endif
 2008    13:D7FD  1A         			inc	a			; 2
 2009    13:D7FE  9D 03 02   			sta	VDC_DH, x		; 6
 2010                        	
 2011    13:D801  E6 EC      			inc.l	<_bp			; 6
 2012    13:D803  D0 02      			bne	!+			; 2/4
 2013    13:D805  E6 ED      			inc.h	<_bp			; 6
 2014                        	
 2015    13:D807  C6 00      	!:		dec	<map_count		; 6
 2016    13:D809  D0 D1      			bne	!repeat-		; 4
 2017                        	
 2018    13:D80B  60         	!end:		rts
 2019                        	
 2020                        			; btm horizontal (32+2 rept)
 2021                        			;
 2022                        			; 89 cycles per block * 17 -> 1513 cycles
 2023                        	
 2024    13:D80C  B2 EC      	!repeat:	lda	[_bp]			; 7
 2025    13:D80E  A8         			tay				; 2
 2026                        	
 2027    13:D80F  B9 00 4A   	b4800_btm_even:	lda	BLK_4800_BL_L, y	; 5
 2028    13:D812  9D 02 02   			sta	VDC_DL, x		; 6
 2029    13:D815  B9 00 4E   			lda	BLK_4800_BL_H, y	; 5
 2030               0001     		.if	BLKDEF_CHR_FLAG
 2031    13:D818  29 F3      			and	#%11110011		; 2
 2032                        		.endif
 2033    13:D81A  1A         			inc	a			; 2
 2034    13:D81B  9D 03 02   			sta	VDC_DH, x		; 6
 2035                        	
 2036    13:D81E  C6 00      			dec	<map_count		; 6
 2037    13:D820  F0 19      			beq	!end+			; 2
 2038                        	
 2039    13:D822  B9 00 4B   	b4800_btm_odd:	lda	BLK_4800_BR_L, y	; 5
 2040    13:D825  9D 02 02   			sta	VDC_DL, x		; 6
 2041    13:D828  B9 00 4F   			lda	BLK_4800_BR_H, y	; 5
 2042               0001     		.if	BLKDEF_CHR_FLAG
 2043    13:D82B  29 F3      			and	#%11110011		; 2
 2044                        		.endif
 2045    13:D82D  1A         			inc	a			; 2
 2046    13:D82E  9D 03 02   			sta	VDC_DH, x		; 6
 2047                        	
 2048    13:D831  E6 EC      			inc.l	<_bp			; 6
 2049    13:D833  D0 02      			bne	!+			; 2/4
 2050    13:D835  E6 ED      			inc.h	<_bp			; 6
 2051                        	
 2052    13:D837  C6 00      	!:		dec	<map_count		; 6
 2053    13:D839  D0 D1      			bne	!repeat-		; 4
 2054                        	
 2055    13:D83B  60         	!end:		rts
 2056                        	
 2057                        			; top horizontal (32+2 rept)
 2058                        			;
 2059                        			; 89 cycles per block * 17 -> 1513 cycles
 2060                        	
 2061    13:D83C  B2 EC      	!repeat:	lda	[_bp]			; 7
 2062    13:D83E  A8         			tay				; 2
 2063                        	
 2064    13:D83F  B9 00 50   	b5000_top_even:	lda	BLK_5000_TL_L, y	; 5
 2065    13:D842  9D 02 02   			sta	VDC_DL, x		; 6
 2066    13:D845  B9 00 54   			lda	BLK_5000_TL_H, y	; 5
 2067               0001     		.if	BLKDEF_CHR_FLAG
 2068    13:D848  29 F3      			and	#%11110011		; 2
 2069                        		.endif
 2070    13:D84A  1A         			inc	a			; 2
 2071    13:D84B  9D 03 02   			sta	VDC_DH, x		; 6
 2072                        	
 2073    13:D84E  C6 00      			dec	<map_count		; 6
 2074    13:D850  F0 19      			beq	!end+			; 2
 2075                        	
 2076    13:D852  B9 00 51   	b5000_top_odd:	lda	BLK_5000_TR_L, y	; 5
 2077    13:D855  9D 02 02   			sta	VDC_DL, x		; 6
 2078    13:D858  B9 00 55   			lda	BLK_5000_TR_H, y	; 5
 2079               0001     		.if	BLKDEF_CHR_FLAG
 2080    13:D85B  29 F3      			and	#%11110011		; 2
 2081                        		.endif
 2082    13:D85D  1A         			inc	a			; 2
 2083    13:D85E  9D 03 02   			sta	VDC_DH, x		; 6
 2084                        	
 2085    13:D861  E6 EC      			inc.l	<_bp			; 6
 2086    13:D863  D0 02      			bne	!+			; 2/4
 2087    13:D865  E6 ED      			inc.h	<_bp			; 6
 2088                        	
 2089    13:D867  C6 00      	!:		dec	<map_count		; 6
 2090    13:D869  D0 D1      			bne	!repeat-		; 4
 2091                        	
 2092    13:D86B  60         	!end:		rts
 2093                        	
 2094                        			; btm horizontal (32+2 rept)
 2095                        			;
 2096                        			; 89 cycles per block * 17 -> 1513 cycles
 2097                        	
 2098    13:D86C  B2 EC      	!repeat:	lda	[_bp]			; 7
 2099    13:D86E  A8         			tay				; 2
 2100                        	
 2101    13:D86F  B9 00 52   	b5000_btm_even:	lda	BLK_5000_BL_L, y	; 5
 2102    13:D872  9D 02 02   			sta	VDC_DL, x		; 6
 2103    13:D875  B9 00 56   			lda	BLK_5000_BL_H, y	; 5
 2104               0001     		.if	BLKDEF_CHR_FLAG
 2105    13:D878  29 F3      			and	#%11110011		; 2
 2106                        		.endif
 2107    13:D87A  1A         			inc	a			; 2
 2108    13:D87B  9D 03 02   			sta	VDC_DH, x		; 6
 2109                        	
 2110    13:D87E  C6 00      			dec	<map_count		; 6
 2111    13:D880  F0 19      			beq	!end+			; 2
 2112                        	
 2113    13:D882  B9 00 53   	b5000_btm_odd:	lda	BLK_5000_BR_L, y	; 5
 2114    13:D885  9D 02 02   			sta	VDC_DL, x		; 6
 2115    13:D888  B9 00 57   			lda	BLK_5000_BR_H, y	; 5
 2116               0001     		.if	BLKDEF_CHR_FLAG
 2117    13:D88B  29 F3      			and	#%11110011		; 2
 2118                        		.endif
 2119    13:D88D  1A         			inc	a			; 2
 2120    13:D88E  9D 03 02   			sta	VDC_DH, x		; 6
 2121                        	
 2122    13:D891  E6 EC      			inc.l	<_bp			; 6
 2123    13:D893  D0 02      			bne	!+			; 2/4
 2124    13:D895  E6 ED      			inc.h	<_bp			; 6
 2125                        	
 2126    13:D897  C6 00      	!:		dec	<map_count		; 6
 2127    13:D899  D0 D1      			bne	!repeat-		; 4
 2128                        	
 2129    13:D89B  60         	!end:		rts
 2130                        	
 2131                        			; top horizontal (32+2 rept)
 2132                        			;
 2133                        			; 89 cycles per block * 17 -> 1513 cycles
 2134                        	
 2135    13:D89C  B2 EC      	!repeat:	lda	[_bp]			; 7
 2136    13:D89E  A8         			tay				; 2
 2137                        	
 2138    13:D89F  B9 00 58   	b5800_top_even:	lda	BLK_5800_TL_L, y	; 5
 2139    13:D8A2  9D 02 02   			sta	VDC_DL, x		; 6
 2140    13:D8A5  B9 00 5C   			lda	BLK_5800_TL_H, y	; 5
 2141               0001     		.if	BLKDEF_CHR_FLAG
 2142    13:D8A8  29 F3      			and	#%11110011		; 2
 2143                        		.endif
 2144    13:D8AA  1A         			inc	a			; 2
 2145    13:D8AB  9D 03 02   			sta	VDC_DH, x		; 6
 2146                        	
 2147    13:D8AE  C6 00      			dec	<map_count		; 6
 2148    13:D8B0  F0 19      			beq	!end+			; 2
 2149                        	
 2150    13:D8B2  B9 00 59   	b5800_top_odd:	lda	BLK_5800_TR_L, y	; 5
 2151    13:D8B5  9D 02 02   			sta	VDC_DL, x		; 6
 2152    13:D8B8  B9 00 5D   			lda	BLK_5800_TR_H, y	; 5
 2153               0001     		.if	BLKDEF_CHR_FLAG
 2154    13:D8BB  29 F3      			and	#%11110011		; 2
 2155                        		.endif
 2156    13:D8BD  1A         			inc	a			; 2
 2157    13:D8BE  9D 03 02   			sta	VDC_DH, x		; 6
 2158                        	
 2159    13:D8C1  E6 EC      			inc.l	<_bp			; 6
 2160    13:D8C3  D0 02      			bne	!+			; 2/4
 2161    13:D8C5  E6 ED      			inc.h	<_bp			; 6
 2162                        	
 2163    13:D8C7  C6 00      	!:		dec	<map_count		; 6
 2164    13:D8C9  D0 D1      			bne	!repeat-		; 4
 2165                        	
 2166    13:D8CB  60         	!end:		rts
 2167                        	
 2168                        			; btm horizontal (32+2 rept)
 2169                        			;
 2170                        			; 89 cycles per block * 17 -> 1513 cycles
 2171                        	
 2172    13:D8CC  B2 EC      	!repeat:	lda	[_bp]		; 7
 2173    13:D8CE  A8         			tay				; 2
 2174                        	
 2175    13:D8CF  B9 00 5A   	b5800_btm_even:	lda	BLK_5800_BL_L, y	; 5
 2176    13:D8D2  9D 02 02   			sta	VDC_DL, x		; 6
 2177    13:D8D5  B9 00 5E   			lda	BLK_5800_BL_H, y	; 5
 2178               0001     		.if	BLKDEF_CHR_FLAG
 2179    13:D8D8  29 F3      			and	#%11110011		; 2
 2180                        		.endif
 2181    13:D8DA  1A         			inc	a			; 2
 2182    13:D8DB  9D 03 02   			sta	VDC_DH, x		; 6
 2183                        	
 2184    13:D8DE  C6 00      			dec	<map_count		; 6
 2185    13:D8E0  F0 19      			beq	!end+			; 2
 2186                        	
 2187    13:D8E2  B9 00 5B   	b5800_btm_odd:	lda	BLK_5800_BR_L, y	; 5
 2188    13:D8E5  9D 02 02   			sta	VDC_DL, x		; 6
 2189    13:D8E8  B9 00 5F   			lda	BLK_5800_BR_H, y	; 5
 2190               0001     		.if	BLKDEF_CHR_FLAG
 2191    13:D8EB  29 F3      			and	#%11110011		; 2
 2192                        		.endif
 2193    13:D8ED  1A         			inc	a			; 2
 2194    13:D8EE  9D 03 02   			sta	VDC_DH, x		; 6
 2195                        	
 2196    13:D8F1  E6 EC      			inc.l	<_bp			; 6
 2197    13:D8F3  D0 02      			bne	!+			; 2/4
 2198    13:D8F5  E6 ED      			inc.h	<_bp			; 6
 2199                        	
 2200    13:D8F7  C6 00      	!:		dec	<map_count		; 6
 2201    13:D8F9  D0 D1      			bne	!repeat-		; 4
 2202                        	
 2203    13:D8FB  60         	!end:		rts
 2204                        	
 2205                        	
 2206                        	
 2207                        	; ***************************************************************************
 2208                        	; ***************************************************************************
 2209                        	;
 2210                        	; blk_col_strip - Draw a single column of CHR into the BAT.
 2211                        	;
 2212                        	
 2213    13:D8FC  20 34 E4   	blk_col_strip:	jsr	set_di_xy_mawr		; Set the BAT VRAM destination.
 2214                        	
 2215    13:D8FF  A5 FC      			lda	<map_chr_x		; Select what drawing code to
 2216    13:D901  4A         			lsr	a			; use depending upon even/odd
 2217    13:D902  A5 FE      			lda	<map_chr_y		; CHR coordinates (not BAT to
 2218    13:D904  29 01      			and	#1			; support unaligned drawing).
 2219    13:D906  2A         			rol	a
 2220    13:D907  0A         			asl	a			; N.B. Always leaves C clear.
 2221    13:D908  1D B7 2B   			ora.h	vdc_blk_addr, x		; What is the BLK data address?
 2222    13:D90B  29 1E      			and	#%00011110		; $4000, $4800, $5000 or $5800.
 2223    13:D90D  A8         			tay
 2224    13:D90E  B9 1B D9   			lda.h	.jump_table, y		; Push the address of the code.
 2225    13:D911  48         			pha
 2226    13:D912  B9 1A D9   			lda.l	.jump_table, y
 2227    13:D915  48         			pha
 2228                        	
 2229    13:D916  B2 EC      			lda	[_bp]			; Get the first BLK number.
 2230    13:D918  A8         			tay
 2231                        	
 2232    13:D919  60         			rts				; Jump to the drawing code.
 2233                        	
 2234    13:D91A  3C D9      	.jump_table:	dw	b4000_lhs_even - 1
 2235    13:D91C  72 D9      			dw	b4000_rhs_even - 1
 2236    13:D91E  4F D9      			dw	b4000_lhs_odd - 1
 2237    13:D920  85 D9      			dw	b4000_rhs_odd - 1
 2238                        	
 2239    13:D922  A8 D9      			dw	b4800_lhs_even - 1
 2240    13:D924  DE D9      			dw	b4800_rhs_even - 1
 2241    13:D926  BB D9      			dw	b4800_lhs_odd - 1
 2242    13:D928  F1 D9      			dw	b4800_rhs_odd - 1
 2243                        	
 2244    13:D92A  14 DA      			dw	b5000_lhs_even - 1
 2245    13:D92C  4A DA      			dw	b5000_rhs_even - 1
 2246    13:D92E  27 DA      			dw	b5000_lhs_odd - 1
 2247    13:D930  5D DA      			dw	b5000_rhs_odd - 1
 2248                        	
 2249    13:D932  80 DA      			dw	b5800_lhs_even - 1
 2250    13:D934  B6 DA      			dw	b5800_rhs_even - 1
 2251    13:D936  93 DA      			dw	b5800_lhs_odd - 1
 2252    13:D938  C9 DA      			dw	b5800_rhs_odd - 1
 2253                        	
 2254                        			; lhs vertical (28+2 rept)
 2255                        			;
 2256                        			; N.B. C is always clear on entry.
 2257                        			;
 2258                        			; 100 cycles per block * 15 -> 1500 cycles
 2259                        	
 2260    13:D93A  B2 EC      	!repeat:	lda	[_bp]			; 7
 2261    13:D93C  A8         			tay				; 2
 2262                        	
 2263    13:D93D  B9 00 40   	b4000_lhs_even:	lda	BLK_4000_TL_L, y	; 5
 2264    13:D940  9D 02 02   			sta	VDC_DL, x		; 6
 2265    13:D943  B9 00 44   			lda	BLK_4000_TL_H, y	; 5
 2266               0001     		.if	BLKDEF_CHR_FLAG
 2267    13:D946  29 F3      			and	#%11110011		; 2
 2268                        		.endif
 2269    13:D948  1A         			inc	a			; 2
 2270    13:D949  9D 03 02   			sta	VDC_DH, x		; 6
 2271                        	
 2272    13:D94C  C6 00      			dec	<map_count		; 6
 2273    13:D94E  F0 1F      			beq	!end+			; 2
 2274                        	
 2275    13:D950  B9 00 42   	b4000_lhs_odd:	lda	BLK_4000_BL_L, y	; 5
 2276    13:D953  9D 02 02   			sta	VDC_DL, x		; 6
 2277    13:D956  B9 00 46   			lda	BLK_4000_BL_H, y	; 5
 2278               0001     		.if	BLKDEF_CHR_FLAG
 2279    13:D959  29 F3      			and	#%11110011		; 2
 2280                        		.endif
 2281    13:D95B  1A         			inc	a			; 2
 2282    13:D95C  9D 03 02   			sta	VDC_DH, x		; 6
 2283                        	
 2284    13:D95F  BD 7C 26   			lda	vdc_map_line_w, x	; 5
 2285    13:D962  65 EC      			adc.l	<_bp			; 4
 2286    13:D964  85 EC      			sta.l	<_bp			; 4
 2287    13:D966  90 03      			bcc	!+			; 2/4
 2288    13:D968  E6 ED      			inc.h	<_bp			; 6
 2289    13:D96A  18         			clc				; 2
 2290                        	
 2291    13:D96B  C6 00      	!:		dec	<map_count		; 6
 2292    13:D96D  D0 CB      			bne	!repeat-		; 4
 2293                        	
 2294    13:D96F  60         	!end:		rts
 2295                        	
 2296                        			; rhs vertical (28+2 rept)
 2297                        			;
 2298                        			; N.B. C is always clear on entry.
 2299                        			;
 2300                        			; 100 cycles per block * 15 -> 1500 cycles
 2301                        	
 2302    13:D970  B2 EC      	!repeat:	lda	[_bp]			; 7
 2303    13:D972  A8         			tay				; 2
 2304                        	
 2305    13:D973  B9 00 41   	b4000_rhs_even:	lda	BLK_4000_TR_L, y	; 5
 2306    13:D976  9D 02 02   			sta	VDC_DL, x		; 6
 2307    13:D979  B9 00 45   			lda	BLK_4000_TR_H, y	; 5
 2308               0001     		.if	BLKDEF_CHR_FLAG
 2309    13:D97C  29 F3      			and	#%11110011		; 2
 2310                        		.endif
 2311    13:D97E  1A         			inc	a			; 2
 2312    13:D97F  9D 03 02   			sta	VDC_DH, x		; 6
 2313                        	
 2314    13:D982  C6 00      			dec	<map_count		; 6
 2315    13:D984  F0 1F      			beq	!end+			; 2
 2316                        	
 2317    13:D986  B9 00 43   	b4000_rhs_odd:	lda	BLK_4000_BR_L, y	; 5
 2318    13:D989  9D 02 02   			sta	VDC_DL, x		; 6
 2319    13:D98C  B9 00 47   			lda	BLK_4000_BR_H, y	; 5
 2320               0001     		.if	BLKDEF_CHR_FLAG
 2321    13:D98F  29 F3      			and	#%11110011		; 2
 2322                        		.endif
 2323    13:D991  1A         			inc	a			; 2
 2324    13:D992  9D 03 02   			sta	VDC_DH, x		; 6
 2325                        	
 2326    13:D995  BD 7C 26   			lda	vdc_map_line_w, x	; 5
 2327    13:D998  65 EC      			adc.l	<_bp			; 4
 2328    13:D99A  85 EC      			sta.l	<_bp			; 4
 2329    13:D99C  90 03      			bcc	!+			; 2/4
 2330    13:D99E  E6 ED      			inc.h	<_bp			; 6
 2331    13:D9A0  18         			clc				; 2
 2332                        	
 2333    13:D9A1  C6 00      	!:		dec	<map_count		; 6
 2334    13:D9A3  D0 CB      			bne	!repeat-		; 4
 2335                        	
 2336    13:D9A5  60         	!end:		rts
 2337                        	
 2338                        			; lhs vertical (28+2 rept)
 2339                        			;
 2340                        			; N.B. C is always clear on entry.
 2341                        			;
 2342                        			; 100 cycles per block * 15 -> 1500 cycles
 2343                        	
 2344    13:D9A6  B2 EC      	!repeat:	lda	[_bp]			; 7
 2345    13:D9A8  A8         			tay				; 2
 2346                        	
 2347    13:D9A9  B9 00 48   	b4800_lhs_even:	lda	BLK_4800_TL_L, y	; 5
 2348    13:D9AC  9D 02 02   			sta	VDC_DL, x		; 6
 2349    13:D9AF  B9 00 4C   			lda	BLK_4800_TL_H, y	; 5
 2350               0001     		.if	BLKDEF_CHR_FLAG
 2351    13:D9B2  29 F3      			and	#%11110011		; 2
 2352                        		.endif
 2353    13:D9B4  1A         			inc	a			; 2
 2354    13:D9B5  9D 03 02   			sta	VDC_DH, x		; 6
 2355                        	
 2356    13:D9B8  C6 00      			dec	<map_count		; 6
 2357    13:D9BA  F0 1F      			beq	!end+			; 2
 2358                        	
 2359    13:D9BC  B9 00 4A   	b4800_lhs_odd:	lda	BLK_4800_BL_L, y	; 5
 2360    13:D9BF  9D 02 02   			sta	VDC_DL, x		; 6
 2361    13:D9C2  B9 00 4E   			lda	BLK_4800_BL_H, y	; 5
 2362               0001     		.if	BLKDEF_CHR_FLAG
 2363    13:D9C5  29 F3      			and	#%11110011		; 2
 2364                        		.endif
 2365    13:D9C7  1A         			inc	a			; 2
 2366    13:D9C8  9D 03 02   			sta	VDC_DH, x		; 6
 2367                        	
 2368    13:D9CB  BD 7C 26   			lda	vdc_map_line_w, x	; 5
 2369    13:D9CE  65 EC      			adc.l	<_bp			; 4
 2370    13:D9D0  85 EC      			sta.l	<_bp			; 4
 2371    13:D9D2  90 03      			bcc	!+			; 2/4
 2372    13:D9D4  E6 ED      			inc.h	<_bp			; 6
 2373    13:D9D6  18         			clc				; 2
 2374                        	
 2375    13:D9D7  C6 00      	!:		dec	<map_count		; 6
 2376    13:D9D9  D0 CB      			bne	!repeat-		; 4
 2377                        	
 2378    13:D9DB  60         	!end:		rts
 2379                        	
 2380                        			; rhs vertical (28+2 rept)
 2381                        			;
 2382                        			; N.B. C is always clear on entry.
 2383                        			;
 2384                        			; 100 cycles per block * 15 -> 1500 cycles
 2385                        	
 2386    13:D9DC  B2 EC      	!repeat:	lda	[_bp]			; 7
 2387    13:D9DE  A8         			tay				; 2
 2388                        	
 2389    13:D9DF  B9 00 49   	b4800_rhs_even:	lda	BLK_4800_TR_L, y	; 5
 2390    13:D9E2  9D 02 02   			sta	VDC_DL, x		; 6
 2391    13:D9E5  B9 00 4D   			lda	BLK_4800_TR_H, y	; 5
 2392               0001     		.if	BLKDEF_CHR_FLAG
 2393    13:D9E8  29 F3      			and	#%11110011		; 2
 2394                        		.endif
 2395    13:D9EA  1A         			inc	a			; 2
 2396    13:D9EB  9D 03 02   			sta	VDC_DH, x		; 6
 2397                        	
 2398    13:D9EE  C6 00      			dec	<map_count		; 6
 2399    13:D9F0  F0 1F      			beq	!end+			; 2
 2400                        	
 2401    13:D9F2  B9 00 4B   	b4800_rhs_odd:	lda	BLK_4800_BR_L, y	; 5
 2402    13:D9F5  9D 02 02   			sta	VDC_DL, x		; 6
 2403    13:D9F8  B9 00 4F   			lda	BLK_4800_BR_H, y	; 5
 2404               0001     		.if	BLKDEF_CHR_FLAG
 2405    13:D9FB  29 F3      			and	#%11110011		; 2
 2406                        		.endif
 2407    13:D9FD  1A         			inc	a			; 2
 2408    13:D9FE  9D 03 02   			sta	VDC_DH, x		; 6
 2409                        	
 2410    13:DA01  BD 7C 26   			lda	vdc_map_line_w, x	; 5
 2411    13:DA04  65 EC      			adc.l	<_bp			; 4
 2412    13:DA06  85 EC      			sta.l	<_bp			; 4
 2413    13:DA08  90 03      			bcc	!+			; 2/4
 2414    13:DA0A  E6 ED      			inc.h	<_bp			; 6
 2415    13:DA0C  18         			clc				; 2
 2416                        	
 2417    13:DA0D  C6 00      	!:		dec	<map_count		; 6
 2418    13:DA0F  D0 CB      			bne	!repeat-		; 4
 2419                        	
 2420    13:DA11  60         	!end:		rts
 2421                        	
 2422                        			; lhs vertical (28+2 rept)
 2423                        			;
 2424                        			; N.B. C is always clear on entry.
 2425                        			;
 2426                        			; 100 cycles per block * 15 -> 1500 cycles
 2427                        	
 2428    13:DA12  B2 EC      	!repeat:	lda	[_bp]			; 7
 2429    13:DA14  A8         			tay				; 2
 2430                        	
 2431    13:DA15  B9 00 50   	b5000_lhs_even:	lda	BLK_5000_TL_L, y	; 5
 2432    13:DA18  9D 02 02   			sta	VDC_DL, x		; 6
 2433    13:DA1B  B9 00 54   			lda	BLK_5000_TL_H, y	; 5
 2434               0001     		.if	BLKDEF_CHR_FLAG
 2435    13:DA1E  29 F3      			and	#%11110011		; 2
 2436                        		.endif
 2437    13:DA20  1A         			inc	a			; 2
 2438    13:DA21  9D 03 02   			sta	VDC_DH, x		; 6
 2439                        	
 2440    13:DA24  C6 00      			dec	<map_count		; 6
 2441    13:DA26  F0 1F      			beq	!end+			; 2
 2442                        	
 2443    13:DA28  B9 00 52   	b5000_lhs_odd:	lda	BLK_5000_BL_L, y	; 5
 2444    13:DA2B  9D 02 02   			sta	VDC_DL, x		; 6
 2445    13:DA2E  B9 00 56   			lda	BLK_5000_BL_H, y	; 5
 2446               0001     		.if	BLKDEF_CHR_FLAG
 2447    13:DA31  29 F3      			and	#%11110011		; 2
 2448                        		.endif
 2449    13:DA33  1A         			inc	a			; 2
 2450    13:DA34  9D 03 02   			sta	VDC_DH, x		; 6
 2451                        	
 2452    13:DA37  BD 7C 26   			lda	vdc_map_line_w, x	; 5
 2453    13:DA3A  65 EC      			adc.l	<_bp			; 4
 2454    13:DA3C  85 EC      			sta.l	<_bp			; 4
 2455    13:DA3E  90 03      			bcc	!+			; 2/4
 2456    13:DA40  E6 ED      			inc.h	<_bp			; 6
 2457    13:DA42  18         			clc				; 2
 2458                        	
 2459    13:DA43  C6 00      	!:		dec	<map_count		; 6
 2460    13:DA45  D0 CB      			bne	!repeat-		; 4
 2461                        	
 2462    13:DA47  60         	!end:		rts
 2463                        	
 2464                        			; rhs vertical (28+2 rept)
 2465                        			;
 2466                        			; N.B. C is always clear on entry.
 2467                        			;
 2468                        			; 100 cycles per block * 15 -> 1500 cycles
 2469                        	
 2470    13:DA48  B2 EC      	!repeat:	lda	[_bp]			; 7
 2471    13:DA4A  A8         			tay				; 2
 2472                        	
 2473    13:DA4B  B9 00 51   	b5000_rhs_even:	lda	BLK_5000_TR_L, y	; 5
 2474    13:DA4E  9D 02 02   			sta	VDC_DL, x		; 6
 2475    13:DA51  B9 00 55   			lda	BLK_5000_TR_H, y	; 5
 2476               0001     		.if	BLKDEF_CHR_FLAG
 2477    13:DA54  29 F3      			and	#%11110011		; 2
 2478                        		.endif
 2479    13:DA56  1A         			inc	a			; 2
 2480    13:DA57  9D 03 02   			sta	VDC_DH, x		; 6
 2481                        	
 2482    13:DA5A  C6 00      			dec	<map_count		; 6
 2483    13:DA5C  F0 1F      			beq	!end+			; 2
 2484                        	
 2485    13:DA5E  B9 00 53   	b5000_rhs_odd:	lda	BLK_5000_BR_L, y	; 5
 2486    13:DA61  9D 02 02   			sta	VDC_DL, x		; 6
 2487    13:DA64  B9 00 57   			lda	BLK_5000_BR_H, y	; 5
 2488               0001     		.if	BLKDEF_CHR_FLAG
 2489    13:DA67  29 F3      			and	#%11110011		; 2
 2490                        		.endif
 2491    13:DA69  1A         			inc	a			; 2
 2492    13:DA6A  9D 03 02   			sta	VDC_DH, x		; 6
 2493                        	
 2494    13:DA6D  BD 7C 26   			lda	vdc_map_line_w, x	; 5
 2495    13:DA70  65 EC      			adc.l	<_bp			; 4
 2496    13:DA72  85 EC      			sta.l	<_bp			; 4
 2497    13:DA74  90 03      			bcc	!+			; 2/4
 2498    13:DA76  E6 ED      			inc.h	<_bp			; 6
 2499    13:DA78  18         			clc				; 2
 2500                        	
 2501    13:DA79  C6 00      	!:		dec	<map_count		; 6
 2502    13:DA7B  D0 CB      			bne	!repeat-		; 4
 2503                        	
 2504    13:DA7D  60         	!end:		rts
 2505                        	
 2506                        			; lhs vertical (28+2 rept)
 2507                        			;
 2508                        			; N.B. C is always clear on entry.
 2509                        			;
 2510                        			; 100 cycles per block * 15 -> 1500 cycles
 2511                        	
 2512    13:DA7E  B2 EC      	!repeat:	lda	[_bp]			; 7
 2513    13:DA80  A8         			tay				; 2
 2514                        	
 2515    13:DA81  B9 00 58   	b5800_lhs_even:	lda	BLK_5800_TL_L, y	; 5
 2516    13:DA84  9D 02 02   			sta	VDC_DL, x		; 6
 2517    13:DA87  B9 00 5C   			lda	BLK_5800_TL_H, y	; 5
 2518               0001     		.if	BLKDEF_CHR_FLAG
 2519    13:DA8A  29 F3      			and	#%11110011		; 2
 2520                        		.endif
 2521    13:DA8C  1A         			inc	a			; 2
 2522    13:DA8D  9D 03 02   			sta	VDC_DH, x		; 6
 2523                        	
 2524    13:DA90  C6 00      			dec	<map_count		; 6
 2525    13:DA92  F0 1F      			beq	!end+			; 2
 2526                        	
 2527    13:DA94  B9 00 5A   	b5800_lhs_odd:	lda	BLK_5800_BL_L, y	; 5
 2528    13:DA97  9D 02 02   			sta	VDC_DL, x		; 6
 2529    13:DA9A  B9 00 5E   			lda	BLK_5800_BL_H, y	; 5
 2530               0001     		.if	BLKDEF_CHR_FLAG
 2531    13:DA9D  29 F3      			and	#%11110011		; 2
 2532                        		.endif
 2533    13:DA9F  1A         			inc	a			; 2
 2534    13:DAA0  9D 03 02   			sta	VDC_DH, x		; 6
 2535                        	
 2536    13:DAA3  BD 7C 26   			lda	vdc_map_line_w, x	; 5
 2537    13:DAA6  65 EC      			adc.l	<_bp			; 4
 2538    13:DAA8  85 EC      			sta.l	<_bp			; 4
 2539    13:DAAA  90 03      			bcc	!+			; 2/4
 2540    13:DAAC  E6 ED      			inc.h	<_bp			; 6
 2541    13:DAAE  18         			clc				; 2
 2542                        	
 2543    13:DAAF  C6 00      	!:		dec	<map_count		; 6
 2544    13:DAB1  D0 CB      			bne	!repeat-		; 4
 2545                        	
 2546    13:DAB3  60         	!end:		rts
 2547                        	
 2548                        			; rhs vertical (28+2 rept)
 2549                        			;
 2550                        			; N.B. C is always clear on entry.
 2551                        			;
 2552                        			; 100 cycles per block * 15 -> 1500 cycles
 2553                        	
 2554    13:DAB4  B2 EC      	!repeat:	lda	[_bp]			; 7
 2555    13:DAB6  A8         			tay				; 2
 2556                        	
 2557    13:DAB7  B9 00 59   	b5800_rhs_even:	lda	BLK_5800_TR_L, y	; 5
 2558    13:DABA  9D 02 02   			sta	VDC_DL, x		; 6
 2559    13:DABD  B9 00 5D   			lda	BLK_5800_TR_H, y	; 5
 2560               0001     		.if	BLKDEF_CHR_FLAG
 2561    13:DAC0  29 F3      			and	#%11110011		; 2
 2562                        		.endif
 2563    13:DAC2  1A         			inc	a			; 2
 2564    13:DAC3  9D 03 02   			sta	VDC_DH, x		; 6
 2565                        	
 2566    13:DAC6  C6 00      			dec	<map_count		; 6
 2567    13:DAC8  F0 1F      			beq	!end+			; 2
 2568                        	
 2569    13:DACA  B9 00 5B   	b5800_rhs_odd:	lda	BLK_5800_BR_L, y	; 5
 2570    13:DACD  9D 02 02   			sta	VDC_DL, x		; 6
 2571    13:DAD0  B9 00 5F   			lda	BLK_5800_BR_H, y	; 5
 2572               0001     		.if	BLKDEF_CHR_FLAG
 2573    13:DAD3  29 F3      			and	#%11110011		; 2
 2574                        		.endif
 2575    13:DAD5  1A         			inc	a			; 2
 2576    13:DAD6  9D 03 02   			sta	VDC_DH, x		; 6
 2577                        	
 2578    13:DAD9  BD 7C 26   			lda	vdc_map_line_w, x	; 5
 2579    13:DADC  65 EC      			adc.l	<_bp			; 4
 2580    13:DADE  85 EC      			sta.l	<_bp			; 4
 2581    13:DAE0  90 03      			bcc	!+			; 2/4
 2582    13:DAE2  E6 ED      			inc.h	<_bp			; 6
 2583    13:DAE4  18         			clc				; 2
 2584                        	
 2585    13:DAE5  C6 00      	!:		dec	<map_count		; 6
 2586    13:DAE7  D0 CB      			bne	!repeat-		; 4
 2587                        	
 2588    13:DAE9  60         	!end:		rts
 2589                        	
 2590                        		.endif	BLKDEF_POINTERS
 2591                        	
 2592                        		.endprocgroup	; blkmap_group
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   80                        		.else
   84                        		.endif	HUCC_USES_BLKMAP
   85                        	
   86               0001     		.ifdef	HUCC_USES_CHRMAP		; Set in hucc_chrmap.h
                             #[3]   "..\..\..\include\hucc\chrmap.asm"
   87                        			include	"chrmap.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; chrmap.asm
    5                        	;
    6                        	; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
    7                        	;
    8                        	; Copyright John Brandwood 2025.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
   18                        	;
   19                        	; The maximum total size for a chrmap is 16KBytes, which allows for maps up
   20                        	; to 256x32 tiles (2048x256 pixels).
   21                        	;
   22                        	; ***************************************************************************
   23                        	; ***************************************************************************
   24                        	
   25                        	;
   26                        	; Include dependancies ...
   27                        	;
   28                        	
   29                        			include "blkmap.asm"		; This defines the variables.
   30                        	
   31                        	;
   32                        	; Chrmaps in BAT format normally address all of VRAM from $0400..$7FFF, but
   33                        	; they can be limited to use the 32KByte of characters in VRAM $1000..$4FFF
   34                        	; which then frees up 2-bits for flag information for each character in the
   35                        	; BAT entry.
   36                        	;
   37                        	; These 2-bits are perfect for using as collision information in game maps,
   38                        	; allowing storage of states like transparent, solid, up-slope, down-slope.
   39                        	;
   40                        	; Typically this flag information is set by the map conversion tools from a
   41                        	; seperate "collision" map layer.
   42                        	;
   43                        	
   44               0000     		.ifndef	CHRMAP_BAT_FLAG
   46                        		.endif
   47                        	
   48                        	;
   49                        	;
   50                        	;
   51                        	
   52                        	
   53                        	
   54    01:DD40             	chrmap_group	.procgroup
   55                        	
   56                        	; ***************************************************************************
   57                        	; ***************************************************************************
   58                        	;
   59                        	; _draw_bat - Draw the entire screen at the current coordinates.
   60                        	; _sgx_draw_bat - Draw the entire screen at the current coordinates.
   61                        	;
   62                        	; void __fastcall draw_bat( void );
   63                        	; void __fastcall sgx_draw_bat( void );
   64                        	;
   65                        	
   66               0001     		.if	SUPPORT_SGX
   67                        	
   68                        	_sgx_draw_bat	.proc
   74                        			.endp
   75                        		.endif
   76                        	
   77    01:DD40             	_draw_bat	.proc
   78                        	
   79    01:DD40  82         			clx				; Offset to PCE VDC.
   80                        	
   81    01:DD41  43 08      			tma3				; Preserve MPR3..MPR5.
   82    01:DD43  48         			pha
   83    01:DD44  43 10      			tma4
   84    01:DD46  48         			pha
   85    01:DD47  43 20      			tma5
   86    01:DD49  48         			pha
   87                        	
   88    01:DD4A  20 ED DD   			jsr	bat_pxl_2_chr		; Set up the draw coordinates.
   89                        	
   90    01:DD4D  A5 FC      			lda	<map_chr_x		; Reset previous X position.
   91    01:DD4F  9D B1 2B   			sta	vdc_old_chr_x, x
   92                        	
   93    01:DD52  A5 FE      			lda	<map_chr_y		; Reset previous Y position,
   94    01:DD54  1A         			inc	a			; ready to draw rows upwards.
   95    01:DD55  9D B2 2B   			sta	vdc_old_chr_y, x
   96                        	
   97    01:DD58  BD 7A 26   			lda	vdc_map_draw_w, x	; Draw the whole screen.
   98    01:DD5B  85 FA      			sta	<map_draw_w
   99    01:DD5D  BD 7B 26   			lda	vdc_map_draw_h, x
  100    01:DD60  85 FB      			sta	<map_draw_h
  101                        	
  102    01:DD62  20 D0 DE   			jsr	bat_scroll_y		; Draw N row of CHR to the BAT.
  103                        	
  104    01:DD65  68         			pla				; Restore MPR3..MPR5.
  105    01:DD66  53 20      			tam5
  106    01:DD68  68         			pla
  107    01:DD69  53 10      			tam4
  108    01:DD6B  68         			pla
  109    01:DD6C  53 08      			tam3
  110                        	
  111                        			leave
         01:DD6E  4C EF FF   			jmp	leave_proc
  112                        	
  113                        			.endp
  114                        	
  115                        	
  116                        	
  117                        	; ***************************************************************************
  118                        	; ***************************************************************************
  119                        	;
  120                        	; _scroll_bat - Draw a single row of CHR into the BAT to update the edge.
  121                        	; _sgx_scroll_bat - Draw a single row of CHR into the BAT to update the edge.
  122                        	;
  123                        	; void __fastcall scroll_bat( void );
  124                        	; void __fastcall sgx_scroll_bat( void );
  125                        	;
  126                        	
  127               0001     		.if	SUPPORT_SGX
  128                        	
  129                        	_sgx_scroll_bat	.proc
  135                        			.endp
  136                        		.endif
  137                        	
  138    01:DD71             	_scroll_bat	.proc
  139                        	
  140    01:DD71  82         			clx				; Offset to PCE VDC.
  141                        	
  142    01:DD72  43 08      			tma3				; Preserve MPR3..MPR5.
  143    01:DD74  48         			pha
  144    01:DD75  43 10      			tma4
  145    01:DD77  48         			pha
  146    01:DD78  43 20      			tma5
  147    01:DD7A  48         			pha
  148                        	
  149    01:DD7B  20 ED DD   			jsr	bat_pxl_2_chr		; Set up the draw coordinates.
  150                        	
  151    01:DD7E  BD 7B 26   			lda	vdc_map_draw_h, x	; Draw new LHS or RHS if needed.
  152    01:DD81  85 FB      			sta	<map_draw_h
  153                        	;		lda	#1			; bat_scroll_x only ever draws a
  154                        	;		sta	<map_draw_w		; single column.
  155    01:DD83  20 11 DE   			jsr	bat_scroll_x
  156                        	
  157    01:DD86  BD B1 2B   			lda	vdc_old_chr_x, x	; Restore map_chr_x which could
  158    01:DD89  85 FC      			sta	<map_chr_x		; be changed by bat_scroll_x.
  159                        	
  160    01:DD8B  BD 7A 26   			lda	vdc_map_draw_w, x	; Draw new TOP or BTM if needed.
  161    01:DD8E  85 FA      			sta	<map_draw_w
  162    01:DD90  A9 01      			lda	#1
  163    01:DD92  85 FB      			sta	<map_draw_h
  164    01:DD94  20 D0 DE   			jsr	bat_scroll_y
  165                        	
  166    01:DD97  68         			pla				; Restore MPR3..MPR5.
  167    01:DD98  53 20      			tam5
  168    01:DD9A  68         			pla
  169    01:DD9B  53 10      			tam4
  170    01:DD9D  68         			pla
  171    01:DD9E  53 08      			tam3
  172                        	
  173                        			leave
         01:DDA0  4C EF FF   			jmp	leave_proc
  174                        	
  175                        			.endp
  176                        	
  177                        	
  178                        	
  179                        	; ***************************************************************************
  180                        	; ***************************************************************************
  181                        	;
  182                        	; _blit_bat - Draw a map rectangle to specific BAT coordinates.
  183                        	; _sgx_blit_bat - Draw a map rectangle to specific BAT coordinates.
  184                        	;
  185                        	; void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
  186                        	; void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
  187                        	;
  188                        	; Normally you'd just use _draw_bat() and _scroll_bat(), but for those folks
  189                        	; who really wish to take manual control, you can use this.
  190                        	;
  191                        	
  192               0001     		.if	SUPPORT_SGX
  193                        	
  194                        	_sgx_blit_bat	.proc
  200                        			.endp
  201                        		.endif
  202                        	
  203    01:DDA3             	_blit_bat	.proc
  204                        	
  205    01:DDA3  82         			clx				; Offset to PCE VDC.
  206                        	
  207    01:DDA4  43 08      			tma3				; Preserve MPR3..MPR5.
  208    01:DDA6  48         			pha
  209    01:DDA7  43 10      			tma4
  210    01:DDA9  48         			pha
  211    01:DDAA  43 20      			tma5
  212    01:DDAC  48         			pha
  213                        	
  214    01:DDAD  BD 82 26   			lda	vdc_map_option, x	; Preserve current map options.
  215    01:DDB0  48         			pha
  216    01:DDB1  09 C0      			ora	#MAP_UNALIGNED_X | MAP_UNALIGNED_Y
  217    01:DDB3  9D 82 26   			sta	vdc_map_option, x
  218                        	
  219    01:DDB6  20 ED DD   			jsr	bat_pxl_2_chr		; Set up the draw coordinates.
  220                        	
  221    01:DDB9  A5 FA      			lda	<map_draw_w		; Are we drawing just 1 column?
  222    01:DDBB  C9 01      			cmp	#1
  223    01:DDBD  F0 1E      			beq	.draw_column
  224                        	
  225                        			; Draw N rows.
  226                        	
  227    01:DDBF  A5 FC      	.draw_rows:	lda	<map_chr_x		; Reset previous X position.
  228    01:DDC1  9D B1 2B   			sta	vdc_old_chr_x, x
  229                        	
  230    01:DDC4  A5 FE      			lda	<map_chr_y		; Reset previous Y position,
  231    01:DDC6  1A         			inc	a			; ready to draw rows upwards.
  232    01:DDC7  9D B2 2B   			sta	vdc_old_chr_y, x
  233                        	
  234    01:DDCA  20 D0 DE   			jsr	bat_scroll_y		; Draw a row of CHR to the BAT.
  235                        	
  236                        			; Drawing completed.
  237                        	
  238    01:DDCD  68         	.finished:	pla				; Restore previous map options.
  239    01:DDCE  9D 82 26   			sta	vdc_map_option, x
  240                        	
  241    01:DDD1  68         			pla				; Restore MPR3..MPR5.
  242    01:DDD2  53 20      			tam5
  243    01:DDD4  68         			pla
  244    01:DDD5  53 10      			tam4
  245    01:DDD7  68         			pla
  246    01:DDD8  53 08      			tam3
  247                        	
  248                        	.exit:		leave
         01:DDDA  4C EF FF   			jmp	leave_proc
  249                        	
  250                        			; Draw 1 column.
  251                        	
  252    01:DDDD  A5 FC      	.draw_column:	lda	<map_chr_x		; Reset previous X position.
  253    01:DDDF  1A         			inc	a			; ready to draw 1 column.
  254    01:DDE0  9D B1 2B   			sta	vdc_old_chr_x, x
  255                        	
  256    01:DDE3  A5 FE      			lda	<map_chr_y		; Reset previous Y position.
  257    01:DDE5  9D B2 2B   			sta	vdc_old_chr_y, x
  258                        	
  259    01:DDE8  20 11 DE   			jsr	bat_scroll_x		; Draw a single column of CHR.
  260                        	
  261    01:DDEB  80 E0      			bra	.finished
  262                        	
  263                        			.endp
  264                        	
  265                        	
  266                        	
  267                        	; ***************************************************************************
  268                        	; ***************************************************************************
  269                        	;
  270                        	
  271    01:DDED  BD 7E 26   	bat_pxl_2_chr:	lda.l	vdc_map_pxl_x, x	; Get current map X coordinate.
  272    01:DDF0  85 FC      			sta.l	<map_pxl_x
  273    01:DDF2  BD 7F 26   			lda.h	vdc_map_pxl_x, x	; Xvert map_pxl_x to map_chr_x.
  274    01:DDF5  4A         			lsr	a
  275    01:DDF6  66 FC      			ror.l	<map_pxl_x
  276    01:DDF8  4A         			lsr	a
  277    01:DDF9  66 FC      			ror.l	<map_pxl_x
  278    01:DDFB  4A         			lsr	a
  279    01:DDFC  66 FC      			ror.l	<map_pxl_x		; Max map width is 256 CHR.
  280                        	
  281    01:DDFE  BD 80 26   			lda.l	vdc_map_pxl_y, x	; Get current map Y coordinate.
  282    01:DE01  85 FE      			sta.l	<map_pxl_y
  283    01:DE03  BD 81 26   			lda.h	vdc_map_pxl_y, x	; Xvert map_pxl_y to map_chr_y.
  284    01:DE06  4A         			lsr	a
  285    01:DE07  66 FE      			ror.l	<map_pxl_y
  286    01:DE09  4A         			lsr	a
  287    01:DE0A  66 FE      			ror.l	<map_pxl_y
  288    01:DE0C  4A         			lsr	a
  289    01:DE0D  66 FE      			ror.l	<map_pxl_y		; Max map width is 256 CHR.
  290                        	
  291    01:DE0F  60         			rts
  292                        	
  293                        	
  294                        	
  295                        	; ***************************************************************************
  296                        	; ***************************************************************************
  297                        	;
  298                        	; bat_scroll_x - Update the BAT when X coordinate changes.
  299                        	;
  300                        	; N.B. This only ever draws a single column!
  301                        	;
  302                        	
  303    01:DE10  60         	!no_change:	rts
  304                        	
  305    01:DE11  A5 FC      	bat_scroll_x:	lda	<map_chr_x		; Compare old_x with cur_x.
  306    01:DE13  DD B1 2B   			cmp	vdc_old_chr_x, x
  307    01:DE16  F0 F8      			beq	!no_change-		; Do nothing if no change.
  308    01:DE18  9D B1 2B   			sta	vdc_old_chr_x, x
  309    01:DE1B  30 05      			bmi	.moved			; Test the sign of the change.
  310                        	
  311    01:DE1D  18         			clc				; Draw RHS if chr_x >= old_x.
  312    01:DE1E  7D 7A 26   			adc	vdc_map_draw_w, x	; Usually (SCR_WIDTH / 8) + 1.
  313    01:DE21  3A         			dec	a
  314                        	
  315    01:DE22  48         	.moved:		pha				; Push chr_x in map section.
  316                        	
  317    01:DE23  3C 82 26   			bit	vdc_map_option, x	; Set bit7 to disable aligning
  318    01:DE26  30 05      			bmi	!+			; BAT X with the map X.
  319    01:DE28  3D 77 26   			and	vdc_bat_x_mask, x
  320    01:DE2B  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
  321                        	
  322    01:DE2D  A5 FE      	!:		lda	<map_chr_y		; Y = chr_y in map section.
  323    01:DE2F  A8         			tay
  324                        	
  325    01:DE30  3C 82 26   			bit	vdc_map_option, x	; Set bit6 to disable aligning
  326    01:DE33  70 05      			bvs	!+			; BAT Y with the map Y.
  327    01:DE35  3D 78 26   			and	vdc_bat_y_mask, x
  328    01:DE38  85 F9      			sta	<map_bat_y		; Save BAT Y chr coordinate.
  329                        	
  330               0000     		.if	FAST_MULTIPLY
  333                        		.endif
  334                        	
  335    01:DE3A  BD 7C 26   	!:		lda	vdc_map_line_w, x	; Map width in CHR (0 == 256).
  336    01:DE3D  D0 05      			bne	!+
  337                        	
  338    01:DE3F  64 EE      			stz.l	<map_line		; Multiply by 256 is easy!
  339    01:DE41  98         			tya
  340    01:DE42  80 15      			bra	.double
  341                        	
  342               0000     		.if	FAST_MULTIPLY
  354                        		.else
  355    01:DE44  84 EF      	!:		sty.h	<map_line		; Takes 144..176 cycles.
  356    01:DE46  A0 08      			ldy	#8
  357    01:DE48  4A         			lsr	a
  358    01:DE49  85 EE      			sta.l	<map_line
  359    01:DE4B  62         			cla
  360    01:DE4C  90 03      			bcc	.rotate
  361    01:DE4E  18         	.add:		clc
  362    01:DE4F  65 EF      			adc.h	<map_line
  363    01:DE51  6A         	.rotate:	ror	a
  364    01:DE52  66 EE      			ror.l	<map_line		; Lo-byte of (CHR Y * width).
  365    01:DE54  88         			dey
  366    01:DE55  B0 F7      			bcs	.add
  367    01:DE57  D0 F8      			bne	.rotate
  368                        		.endif
  369                        	
  370    01:DE59  06 EE      	.double:	asl.l	<map_line		; Lo-byte of (CHR Y * width * 2).
  371    01:DE5B  2A         			rol	a
  372    01:DE5C  A8         			tay				; Hi-byte of (CHR Y * width * 2).
  373                        	
  374    01:DE5D  BD BB 2B   			lda	vdc_map_bank, x		; Put the MAP into MPR3-MPR5.
  375    01:DE60  53 08      			tam3				; Allow for 16KByte chrmap.
  376    01:DE62  1A         			inc	a
  377    01:DE63  53 10      			tam4
  378    01:DE65  1A         			inc	a
  379    01:DE66  53 20      			tam5
  380                        	
  381    01:DE68  68         			pla				; Pop chr_x in map section.
  382    01:DE69  0A         			asl	a			; 2-bytes for a BAT value.
  383    01:DE6A  90 02      			bcc	!+
  384    01:DE6C  C8         			iny				; Hi-byte of (CHR Y * width * 2).
  385    01:DE6D  18         			clc
  386    01:DE6E  65 EE      	!:		adc.l	<map_line		; Lo-byte of (CHR Y * width * 2).
  387    01:DE70  90 01      			bcc	!+
  388    01:DE72  C8         			iny
  389                        	
  390    01:DE73  18         	!:		clc				; Calc map data pointer.
  391    01:DE74  7D B9 2B   			adc.l	vdc_map_addr, x
  392    01:DE77  85 EC      			sta.l	<_bp			; Maximum map size is 16KBytes
  393    01:DE79  98         			tya				; so we don't need to consider
  394    01:DE7A  7D BA 2B   			adc.h	vdc_map_addr, x		; bank overflow.
  395    01:DE7D  85 ED      			sta.h	<_bp
  396                        	
  397    01:DE7F  C2         			cly				; Calculate the map line delta
  398    01:DE80  BD 7C 26   			lda	vdc_map_line_w, x	; in bytes.
  399    01:DE83  D0 01      			bne	!+
  400    01:DE85  C8         			iny
  401    01:DE86  0A         	!:		asl	a
  402    01:DE87  85 EE      			sta.l	<map_line
  403    01:DE89  98         			tya
  404    01:DE8A  2A         			rol	a
  405    01:DE8B  85 EF      			sta.h	<map_line
  406                        	
  407                        			; Draw the first part of the column.
  408                        	
  409    01:DE8D  A5 F8      	.draw_col:	lda	<map_bat_x		; Set the BAT VRAM destination
  410    01:DE8F  85 F0      			sta.l	<_di			; coordinates.
  411    01:DE91  A5 F9      			lda	<map_bat_y
  412    01:DE93  85 F1      			sta.h	<_di
  413                        	
  414    01:DE95  5D 78 26   			eor	vdc_bat_y_mask, x	; Calc CHR before wrap.
  415    01:DE98  1A         			inc	a
  416    01:DE99  C5 FB      			cmp	<map_draw_h		; Usually (SCR_HEIGHT / 8) + 1.
  417    01:DE9B  90 02      			bcc	!+
  418    01:DE9D  A5 FB      			lda	<map_draw_h		; Maximum CHR to draw.
  419    01:DE9F  85 00      	!:		sta	<map_count		; Set number of CHR to draw.
  420    01:DEA1  85 01      			sta	<map_drawn		; Preserve number of CHR drawn.
  421                        	
  422    01:DEA3  A9 05      			lda	#VDC_CR			; Set VDC auto-increment from
  423    01:DEA5  95 F7      			sta	<vdc_reg, x		; the BAT width, which is set
  424    01:DEA7  9D 00 02   			sta	VDC_AR, x		; up by set_screen_size().
  425    01:DEAA  B5 F4      			lda	<vdc_crh, x
  426    01:DEAC  9D 03 02   			sta	VDC_DH, x
  427                        	
  428    01:DEAF  20 B1 DF   			jsr	bat_col_strip		; Draw top of vertical strip.
  429                        	
  430                        			; Wrap around and draw the rest of the column (if needed).
  431                        	
  432    01:DEB2  38         			sec				; Are there any more CHR that
  433    01:DEB3  A5 FB      			lda	<map_draw_h		; need to be drawn?
  434    01:DEB5  E5 01      			sbc	<map_drawn
  435    01:DEB7  F0 0B      			beq	.done
  436                        	
  437    01:DEB9  85 00      			sta	<map_count		; Set number of CHR to draw.
  438                        	
  439    01:DEBB  A5 F8      			lda	<map_bat_x		; Set the BAT VRAM destination
  440    01:DEBD  85 F0      			sta.l	<_di			; coordinates.
  441    01:DEBF  64 F1      			stz.h	<_di			; Reset 1st row to draw.
  442                        	
  443    01:DEC1  20 B1 DF   			jsr	bat_col_strip		; Draw btm of vertical strip.
  444                        	
  445    01:DEC4  A9 05      	.done:		lda	#VDC_CR			; Set VDC auto-increment to 1.
  446    01:DEC6  95 F7      			sta	<vdc_reg, x
  447    01:DEC8  9D 00 02   			sta	VDC_AR, x
  448    01:DECB  9E 03 02   			stz	VDC_DH, x
  449                        	
  450    01:DECE  60         			rts
  451                        	
  452                        	
  453                        	
  454                        	; ***************************************************************************
  455                        	; ***************************************************************************
  456                        	;
  457                        	; bat_scroll_y - Update the BAT when Y coordinate changes.
  458                        	;
  459                        	; N.B. This draws multiple rows when called from _draw_bat or _blit_bat.
  460                        	;
  461                        	
  462    01:DECF  60         	!no_change:	rts
  463                        	
  464    01:DED0  A5 FE      	bat_scroll_y:	lda	<map_chr_y		; Compare old_y with cur_y.
  465    01:DED2  DD B2 2B   			cmp	vdc_old_chr_y, x
  466    01:DED5  F0 F8      			beq	!no_change-		; Do nothing if no change.
  467    01:DED7  9D B2 2B   			sta	vdc_old_chr_y, x
  468    01:DEDA  30 05      			bmi	.moved			; Test the sign of the change.
  469                        	
  470    01:DEDC  18         			clc				; Draw bottom if chr_y >= old_y.
  471    01:DEDD  7D 7B 26   			adc	vdc_map_draw_h, x	; Usually (SCR_HEIGHT / 8) + 1.
  472    01:DEE0  3A         			dec	a
  473                        	
  474    01:DEE1  A8         	.moved:		tay				; Y = chr_y in map section.
  475                        	
  476    01:DEE2  3C 82 26   			bit	vdc_map_option, x	; Set bit6 to disable aligning
  477    01:DEE5  70 05      			bvs	!+			; BAT Y with the map Y.
  478    01:DEE7  3D 78 26   			and	vdc_bat_y_mask, x
  479    01:DEEA  85 F9      			sta	<map_bat_y		; Save BAT Y chr coordinate.
  480                        	
  481    01:DEEC  3C 82 26   	!:		bit	vdc_map_option, x	; Set bit7 to disable aligning
  482    01:DEEF  30 07      			bmi	!+			; BAT X with the map X.
  483    01:DEF1  A5 FC      			lda	<map_chr_x
  484    01:DEF3  3D 77 26   			and	vdc_bat_x_mask, x
  485    01:DEF6  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
  486                        	
  487               0000     		.if	FAST_MULTIPLY
  490                        		.endif
  491                        	
  492    01:DEF8  BD 7C 26   	!:		lda	vdc_map_line_w, x	; Map width in CHR (0 == 256).
  493    01:DEFB  D0 05      			bne	!+
  494                        	
  495    01:DEFD  64 EE      			stz.l	<map_line		; Multiply by 256 is easy!
  496    01:DEFF  98         			tya
  497    01:DF00  80 15      			bra	.double
  498                        	
  499               0000     		.if	FAST_MULTIPLY
  511                        		.else
  512    01:DF02  84 EF      	!:		sty.h	<map_line		; Takes 144..176 cycles.
  513    01:DF04  A0 08      			ldy	#8
  514    01:DF06  4A         			lsr	a
  515    01:DF07  85 EE      			sta.l	<map_line
  516    01:DF09  62         			cla
  517    01:DF0A  90 03      			bcc	.rotate
  518    01:DF0C  18         	.add:		clc
  519    01:DF0D  65 EF      			adc.h	<map_line
  520    01:DF0F  6A         	.rotate:	ror	a
  521    01:DF10  66 EE      			ror.l	<map_line		; Lo-byte of (CHR Y * width).
  522    01:DF12  88         			dey
  523    01:DF13  B0 F7      			bcs	.add
  524    01:DF15  D0 F8      			bne	.rotate
  525                        		.endif
  526                        	
  527    01:DF17  06 EE      	.double:	asl.l	<map_line		; Lo-byte of (CHR Y * width * 2).
  528    01:DF19  2A         			rol	a
  529    01:DF1A  85 EF      			sta.h	<map_line		; Hi-byte of (CHR Y * width * 2).
  530    01:DF1C  A8         			tay
  531                        	
  532    01:DF1D  BD BB 2B   			lda	vdc_map_bank, x		; Put the MAP into MPR3-MPR5.
  533    01:DF20  53 08      			tam3				; Allow for 16KByte chrmap.
  534    01:DF22  1A         			inc	a
  535    01:DF23  53 10      			tam4
  536    01:DF25  1A         			inc	a
  537    01:DF26  53 20      			tam5
  538                        	
  539                        			; Loop to here if drawing multiple rows.
  540                        	
  541    01:DF28  A5 FC      	.next_row:	lda	<map_chr_x		; Map CHR X coordinate.
  542    01:DF2A  0A         			asl	a			; 2-bytes for a BAT value!
  543    01:DF2B  90 02      			bcc	!+
  544    01:DF2D  C8         			iny				; Hi-byte of (CHR Y * width * 2).
  545    01:DF2E  18         			clc
  546    01:DF2F  65 EE      	!:		adc.l	<map_line		; Lo-byte of (CHR Y * width * 2).
  547    01:DF31  90 01      			bcc	!+
  548    01:DF33  C8         			iny
  549    01:DF34  18         	!:		clc				; Calc map data pointer.
  550    01:DF35  7D B9 2B   			adc.l	vdc_map_addr, x
  551    01:DF38  85 EC      			sta.l	<_bp			; Maximum map size is 16KBytes
  552    01:DF3A  98         			tya				; so we don't need to consider
  553    01:DF3B  7D BA 2B   			adc.h	vdc_map_addr, x		; bank overflow.
  554    01:DF3E  85 ED      			sta.h	<_bp
  555                        	
  556                        			; Draw the first part of the row.
  557                        	
  558    01:DF40  A5 F9      	.draw_row:	lda	<map_bat_y		; Set the BAT VRAM destination
  559    01:DF42  85 F1      			sta.h	<_di			; coordinates.
  560    01:DF44  A5 F8      			lda	<map_bat_x
  561    01:DF46  85 F0      			sta.l	<_di
  562                        	
  563    01:DF48  5D 77 26   			eor	vdc_bat_x_mask, x	; Calc CHR before wrap.
  564    01:DF4B  1A         			inc	a
  565    01:DF4C  C5 FA      			cmp	<map_draw_w		; Usually (SCR_WIDTH / 8) + 1.
  566    01:DF4E  90 02      			bcc	!+
  567    01:DF50  A5 FA      			lda	<map_draw_w		; Maximum CHR to draw.
  568    01:DF52  85 00      	!:		sta	<map_count		; Set number of CHR to draw.
  569    01:DF54  85 01      			sta	<map_drawn		; Preserve number of CHR drawn.
  570                        	
  571    01:DF56  20 90 DF   			jsr	bat_row_strip		; Draw lhs of horizontal strip.
  572                        	
  573                        			; Wrap around and draw the rest of the row (if needed).
  574                        	
  575    01:DF59  38         			sec				; Are there any more CHR that
  576    01:DF5A  A5 FA      			lda	<map_draw_w		; need to be drawn?
  577    01:DF5C  E5 01      			sbc	<map_drawn
  578    01:DF5E  F0 0B      			beq	.done_row
  579                        	
  580    01:DF60  85 00      			sta	<map_count		; Set number of CHR to draw.
  581                        	
  582    01:DF62  A5 F9      			lda	<map_bat_y		; Set the BAT VRAM destination
  583    01:DF64  85 F1      			sta.h	<_di			; coordinates.
  584    01:DF66  64 F0      			stz.l	<_di			; Reset 1st column to draw.
  585                        	
  586    01:DF68  20 90 DF   			jsr	bat_row_strip		; Draw rhs of horizontal strip.
  587                        	
  588    01:DF6B  C6 FB      	.done_row:	dec	<map_draw_h		; Are all desired rows drawn?
  589    01:DF6D  F0 20      			beq	.finished
  590                        	
  591    01:DF6F  A5 F9      			lda	<map_bat_y		; Move BAT Y down by 1.
  592    01:DF71  1A         			inc	a
  593    01:DF72  3D 78 26   			and	vdc_bat_y_mask, x
  594    01:DF75  85 F9      			sta	<map_bat_y
  595                        	
  596    01:DF77  A4 EF      			ldy.h	<map_line		; Move the map line pointer to
  597    01:DF79  C8         			iny				; the next line.
  598    01:DF7A  BD 7C 26   			lda	vdc_map_line_w, x
  599    01:DF7D  F0 0B      			beq	!++			; vdc_map_line_w == 0 == 256.
  600    01:DF7F  0A         			asl	a			; 2-bytes for a BAT value!
  601    01:DF80  B0 01      			bcs	!+
  602    01:DF82  88         			dey				; Fix if vdc_map_line_w <= 127.
  603    01:DF83  18         	!:		clc
  604    01:DF84  65 EE      			adc.l	<map_line
  605    01:DF86  85 EE      			sta.l	<map_line
  606    01:DF88  90 01      			bcc	!++
  607    01:DF8A  C8         	!:		iny
  608    01:DF8B  84 EF      	!:		sty.h	<map_line		; Needed for .next_row!
  609                        	
  610    01:DF8D  80 99      			bra	.next_row		; Draw next row.
  611                        	
  612    01:DF8F  60         	.finished:	rts
  613                        	
  614                        	
  615                        	
  616                        	; ***************************************************************************
  617                        	; ***************************************************************************
  618                        	;
  619                        	; bat_row_strip - Draw a single row of CHR into the BAT.
  620                        	;
  621                        	
  622    01:DF90  20 34 E4   	bat_row_strip:	jsr	set_di_xy_mawr		; Set the BAT VRAM destination.
  623                        	
  624    01:DF93  C2         			cly				; 2
  625    01:DF94  B1 EC      	.repeat:	lda	[_bp], y		; 7
  626    01:DF96  9D 02 02   			sta	VDC_DL, x		; 6
  627    01:DF99  C8         			iny				; 2
  628    01:DF9A  B1 EC      			lda	[_bp], y		; 7
  629               0000     		.if	CHRMAP_BAT_FLAG
  634                        		.endif
  635    01:DF9C  9D 03 02   			sta	VDC_DH, x		; 6
  636    01:DF9F  C8         			iny				; 2
  637                        	
  638    01:DFA0  C6 00      	!:		dec	<map_count		; 6
  639    01:DFA2  D0 F0      			bne	.repeat			; 4
  640                        	
  641    01:DFA4  98         			tya				; 2
  642    01:DFA5  F0 07      			beq	!+			; 2/4
  643    01:DFA7  18         			clc				; 2
  644    01:DFA8  65 EC      			adc.l	<_bp			; 4
  645    01:DFAA  85 EC      			sta.l	<_bp			; 4
  646    01:DFAC  90 02      			bcc	.done			; 2/4
  647    01:DFAE  E6 ED      	!:		inc.h	<_bp			; 6
  648                        	
  649    01:DFB0  60         	.done:		rts
  650                        	
  651                        	
  652                        	
  653                        	; ***************************************************************************
  654                        	; ***************************************************************************
  655                        	;
  656                        	; bat_col_strip - Draw a single column of CHR into the BAT.
  657                        	;
  658                        	
  659    01:DFB1  20 34 E4   	bat_col_strip:	jsr	set_di_xy_mawr		; Set the BAT VRAM destination.
  660                        	
  661    01:DFB4  A0 01      			ldy	#1			; 2
  662    01:DFB6  B2 EC      	.repeat:	lda	[_bp]			; 7
  663    01:DFB8  9D 02 02   			sta	VDC_DL, x		; 6
  664    01:DFBB  B1 EC      			lda	[_bp], y		; 7
  665               0000     		.if	CHRMAP_BAT_FLAG
  670                        		.endif
  671    01:DFBD  9D 03 02   			sta	VDC_DH, x		; 6
  672                        	
  673    01:DFC0  18         			clc				; 2
  674    01:DFC1  A5 EE      			lda.l	<map_line		; 4
  675    01:DFC3  65 EC      			adc.l	<_bp			; 4
  676    01:DFC5  85 EC      			sta.l	<_bp			; 4
  677    01:DFC7  A5 EF      			lda.h	<map_line		; 4
  678    01:DFC9  65 ED      			adc.h	<_bp			; 4
  679    01:DFCB  85 ED      			sta.h	<_bp			; 4
  680                        	
  681    01:DFCD  C6 00      			dec	<map_count		; 6
  682    01:DFCF  D0 E5      			bne	.repeat			; 4
  683                        	
  684    01:DFD1  60         			rts
  685                        	
  686                        		.endprocgroup	; chrmap_group
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   88                        		.endif	HUCC_USES_CHRMAP
   89                        	
   90               0001     		.ifdef	HUCC_USES_OLD_LINE		; Set in hucc_old_line.h
                             #[3]   "..\..\..\include\hucc\hucc-old-line.asm"
   91                        			include	"hucc-old-line.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-old-line.asm
    5                        	;
    6                        	; Based on the original HuC and MagicKit functions by David Michel and the
    7                        	; other original HuC developers.
    8                        	;
    9                        	; Modifications copyright John Brandwood 2024-2025.
   10                        	;
   11                        	; Distributed under the Boost Software License, Version 1.0.
   12                        	; (See accompanying file LICENSE_1_0.txt or copy at
   13                        	;  http://www.boost.org/LICENSE_1_0.txt)
   14                        	;
   15                        	; ***************************************************************************
   16                        	; ***************************************************************************
   17                        	
   18                        	
   19                        	
   20                        	; ***************************************************************************
   21                        	; ***************************************************************************
   22                        	;
   23                        	; void __fastcall gfx_init( unsigned int start_vram_addr<_ax> );
   24                        	;
   25                        	; initialize graphics mode
   26                        	; - points graphics map to tiles at start_vram_addr
   27                        	
   28                        	_gfx_init.1	.proc
   73                        			.endp
   74                        	
   75                        	
   76                        	
   77                        	; ***************************************************************************
   78                        	; ***************************************************************************
   79                        	;
   80                        	; void __fastcall gfx_clear( unsigned int start_vram_addr<_di> );
   81                        	;
   82                        	; Clear the values in the graphics tiles
   83                        	; - places zeroes in graphics tiles at start_vram_addr
   84                        	
   85                        	_gfx_clear.1	.proc
  105                        			.endp
  106                        	
  107                        	
  108                        	
  109                        	; ***************************************************************************
  110                        	; ***************************************************************************
  111                        	;
  112                        	; void __fastcall gfx_line( unsigned int x1<_gfx_x1>, unsigned int y1<_gfx_y1>, unsigned int x2<_gfx_x2>, unsigned int y2<_gfx_y2>, unsigned char color<_gfx_color> );
  113                        	
  114                        	huc_gfx_line	.procgroup
  459                        			.endprocgroup	; huc_gfx_line
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   92                        		.endif
   93                        	
   94               0000     		.ifdef	HUCC_USES_ZX0			; Set in hucc_zx0.h
   96                        		.endif
   97                        	
   98                        	
   99                        	
  100                        	; ***************************************************************************
  101                        	; ***************************************************************************
  102                        	;
  103                        	; Check that C "__zp" declarations aren't overwriting System Card variables.
  104                        	;
  105                        	
  106               20A0     			.zp
  107               0000     		.if	(* > zpg_sys_top) || (USING_PSGDRIVER && (* > zpg_psg_top))
  109                        		.endif
  110                        	
  111                        	
  112                        	
  113                        	; ***************************************************************************
  114                        	; ***************************************************************************
  115                        	;
  116                        	; Check that there isn't too much C "const" data in the ".RODATA" section.
  117                        	;
  118                        	
  119               61A5     			.rodata
  120               0000     		.if	(bank(*) - _bank_base) >= (CONST_BANK + 2)
  122                        		.endif
  123               E937     			.code
                             #[1]   "main.s"

PROCEDURE LIST (in order of size):

Size: $1B9B, Addr: $01:C1A5,      .proc _update_PLAYER
Size: $0A1D, Addr: $13:C860,      .proc _joypad_DIR
Size: $086D, Addr: $13:D27D, .procgroup blkmap_group
Size: $0580, Addr: $02:C000,      .proc _joypad_BUTTONS_SHOP
Size: $0469, Addr: $13:DAEA,      .proc _init_LEVEL
Size: $0414, Addr: $02:C580,      .proc _init_SHOP
Size: $0390, Addr: $02:C994,      .proc huc_monofont_x
Size: $02F0, Addr: $02:CD24,      .proc _init_HUD
Size: $02C4, Addr: $02:D014,      .proc _load_OBJECT_TILES
Size: $0292, Addr: $01:DD40, .procgroup chrmap_group
Size: $01D5, Addr: $02:D2D8,      .proc _main
Size: $0184, Addr: $02:D4AD,      .proc _check_OBJECT
Size: $017D, Addr: $02:D631,      .proc _joypad_BUTTONS
Size: $0167, Addr: $02:D7AE,      .proc _scroll_object
Size: $0167, Addr: $02:D915,      .proc _scroll_chest
Size: $0167, Addr: $02:DA7C,      .proc _scroll_npc
Size: $013E, Addr: $02:DBE3,      .proc _check_NPC
Size: $013E, Addr: $02:DD21,      .proc _init_OBJECT_LV1
Size: $0108, Addr: $02:DE5F,      .proc read_joypads
Size: $0107, Addr: $14:C000,      .proc _recenter_CAMERA
Size: $00DF, Addr: $14:C107, .procgroup vdc_set_mode
Size: $00D5, Addr: $14:C1E6,      .proc _init_NPC_LV1
Size: $00C8, Addr: $14:C2BB,      .proc _init_CHEST_LV1
Size: $00BF, Addr: $14:C383, .procgroup vdc_tty_out
Size: $00A5, Addr: $13:DF53,      .proc _display_TIME_SHOP
Size: $009D, Addr: $14:C442,      .proc _display_TIME_LEVEL
Size: $0086, Addr: $02:DF67,      .proc _sgx_scroll_split.5
Size: $0081, Addr: $14:C4DF,      .proc vbl_init_scroll
Size: $007A, Addr: $14:C560,      .proc _check_TILE_DEPTH
Size: $0077, Addr: $14:C5DA,      .proc core_main
Size: $006A, Addr: $14:C651, .procgroup load_vram_group
Size: $0064, Addr: $14:C6BB,      .proc _check_BG
Size: $0062, Addr: $14:C71F,      .proc _init_256x224
Size: $004E, Addr: $14:C781, .procgroup old_satb_group
Size: $004B, Addr: $14:C7CF, .procgroup hucc_memcmp
Size: $0043, Addr: $14:C81A, .procgroup vdc_clear_vram
Size: $0043, Addr: $14:C85D,      .proc sgx_detect
Size: $003F, Addr: $14:C8A0,      .proc _init_PLAYER
Size: $003F, Addr: $14:C8DF, .procgroup load_bat_group
Size: $003E, Addr: $14:C91E,      .proc _vram2vram.3
Size: $003B, Addr: $14:C95C,      .proc init_random
Size: $0034, Addr: $14:C997,      .proc _init_VARIABLES
Size: $002E, Addr: $01:DFD2,      .proc _scroll_BG
Size: $002B, Addr: $14:C9CB,      .proc _load_palette.3
Size: $0026, Addr: $14:C9F6,      .proc _load_CHEST_TILES
Size: $0026, Addr: $14:CA1C,      .proc _load_NPC_TILES
Size: $0023, Addr: $14:CA42,      .proc _hide_LEVEL_SPRITES
Size: $001D, Addr: $14:CA65,      .proc _init_SYSTEM
Size: $001C, Addr: $14:CA82,      .proc _display_SCORE
Size: $001C, Addr: $14:CA9E,      .proc _display_ZENNY
Size: $001C, Addr: $14:CABA,      .proc clear_vce
Size: $001A, Addr: $14:CAD6,      .proc _display_KEY
Size: $001A, Addr: $14:CAF0,      .proc _display_POTION
