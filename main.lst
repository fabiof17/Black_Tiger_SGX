                             #[1]   "main.s"
   27                        	
   28               0010     	CORE_VERSION	=	$10			; Version 1.0
   29                        	
   30                        			; Get the user program's configuration settings, this will
   31                        			; be read from the current directory, if it exists, or the
   32                        			; "../include/" directory if not.
   33                        	
                             #[4]   "..\..\..\include\hucc\core-config.inc"
   34                        			include	"core-config.inc"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; core-config.inc
    5                        	;
    6                        	; Configuration settings for the "CORE(not TM)" PC Engine library code.
    7                        	;
    8                        	; Copyright John Brandwood 2021-2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; The idea is that you, a PCE developer, copy this file from the ../include/
   18                        	; directory and into your project's directory, and then customize the values
   19                        	; to suit your particular project.
   20                        	;
   21                        	; Because PCEAS searches the current (i.e. project) directory for an include
   22                        	; file first, then it will find your customized copy of the file rather than
   23                        	; the original copy in the ../include/ directory.
   24                        	;
   25                        	; That means that all of the different overlay programs in your project will
   26                        	; share the same overall library configuration for your game.
   27                        	;
   28                        	; ***************************************************************************
   29                        	; ***************************************************************************
   30                        	
   31                        	;
   32                        	; Are we going to take over MPR7?
   33                        	;
   34                        	; While this is the default for the "CORE(not TM)" library, it is definitely
   35                        	; possible to use the library to build CD-ROM code that runs with the System
   36                        	; Card in MPR7, and with the 1st bank remaining in MPR2.
   37                        	;
   38                        	; N.B. The CD-ROM Stage1 loader runs the library with USING_MPR7=0 while it
   39                        	;      installs the kernel into PCE RAM in MPR1.
   40                        	;
   41                        	
   42               0000     		.ifndef	USING_MPR7
   44                        		.endif
   45                        	
   46                        	;
   47                        	; Are we building a CD-ROM overlay that uses an already-built CD-ROM Stage1
   48                        	; loader to install the library's kernel code into PCE RAM in MPR1?
   49                        	;
   50                        	; If this is set, the library's kernel code will be excluded from the build,
   51                        	; which will save about 1KB-3KB of code space in every overlay program!
   52                        	;
   53                        	; N.B. The CD-ROM Stage1 loader sets USING_STAGE1=0 so it builds correctly.
   54                        	;
   55                        	
   56               0000     		.ifndef	USING_STAGE1
   58                        		.endif
   59                        	
   60                        	;
   61                        	; Are we currently building the CD-ROM Stage1 loader?
   62                        	;
   63                        	; If this is set, the library's startup code does not call the __sound_init
   64                        	; macro because the sound driver code is not usually a part of the kernel.
   65                        	;
   66                        	; N.B. The CD-ROM Stage1 loader sets BUILDING_STAGE1=1 so it builds correctly.
   67                        	;
   68                        	
   69               0000     		.ifndef	BUILDING_STAGE1
   71                        		.endif
   72                        	
   73                        	;
   74                        	; Is the last track of the CD a duplicate of the main ISO data track?
   75                        	;
   76                        	; Most CD games put two copies of the same ISO track on the CD, so that data
   77                        	; can be read from the secondary track if the drive has a problem reading it
   78                        	; it from the primary location.
   79                        	;
   80                        	; If set, the secondary track will be enabled when the library first starts.
   81                        	;
   82                        	
   83               0000     		.ifndef	SUPPORT_2ISO
   85                        		.endif
   86                        	
   87                        	;
   88                        	; Maximum number of directory entries to use from the ISO.
   89                        	;
   90                        	; The fewer that we choose, the less RAM memory we need. A setting of 64 is
   91                        	; a good compromise to use until you are putting lots of files on the ISO.
   92                        	;
   93                        	
   94               0000     		.ifndef	MAX_DIRSIZE
   96                        		.endif
   97                        	
   98                        	;
   99                        	; Use the System Card's PSG driver code instead of a modern alternative
  100                        	; sound driver like a DefleMask or Furnace player?
  101                        	;
  102                        	
  103               0000     		.ifndef	USING_PSGDRIVER
  105                        		.endif
  106                        	
  107                        	;
  108                        	; Support development for the Turbo EverDrive v2?
  109                        	;
  110                        	; This only applies to HuCard programs, but when chosen, the "CORE(not TM)"
  111                        	; kernel is moved from bank 0 to bank 2, and a minimal set of startup code
  112                        	; is put in bank 0.
  113                        	;
  114                        	; This is because the TED2 hardware occupies the whole of bank 0 when it is
  115                        	; activated, and so we need to run with a different bank in MPR7.
  116                        	;
  117                        	
  118               0000     		.ifndef	SUPPORT_TED2
  120                        		.endif
  121                        	
  122                        	;
  123                        	; Support development for the SuperGRAFX?
  124                        	;
  125                        	; This enables SuperGRAFX support in certain library functions.
  126                        	;
  127                        	
  128               0000     		.ifndef	SUPPORT_SGX
  130                        		.endif
  131                        	
  132                        	;
  133                        	; Choose SuperGRAFX VPC initialization mode.
  134                        	;
  135                        	; SGX_PARALLAX=0 (useful when VDC #1 is a fullscreen HUD)
  136                        	;
  137                        	;  FRONT
  138                        	;   SP1 = VDC #1 (pce) sprite pixels
  139                        	;   BG1 = VDC #1 (pce) background pixels
  140                        	;   SP2 = VDC #2 (sgx) sprite pixels
  141                        	;   BG2 = VDC #2 (sgx) background pixels
  142                        	;  BACK
  143                        	;
  144                        	; SGX_PARALLAX=1
  145                        	;
  146                        	;  FRONT
  147                        	;   SP1 = VDC #1 (pce) sprite pixels
  148                        	;   SP2 = VDC #2 (sgx) sprite pixels
  149                        	;   BG1 = VDC #1 (pce) background pixels
  150                        	;   BG2 = VDC #2 (sgx) background pixels
  151                        	;  BACK
  152                        	;
  153                        	
  154               0000     		.ifndef	SGX_PARALLAX
  156                        		.endif
  157                        	
  158                        	;
  159                        	; Support development for the ArcadeCard?
  160                        	;
  161                        	; This enables ArcadeCard support in certain library functions.
  162                        	;
  163                        	
  164               0000     		.ifndef	SUPPORT_ACD
  166                        		.endif
  167                        	
  168                        	;
  169                        	; Support development for the IFU's ADPCM hardware?
  170                        	;
  171                        	; Developers would normally just use the System Card functions for ADPCM, but
  172                        	; enabling this adds alternative functions, and allows ADPCM use on a HuCARD.
  173                        	;
  174                        	
  175               0000     		.ifndef	SUPPORT_ADPCM
  177                        		.endif
  178                        	
  179                        	;
  180                        	; Select which version of the joystick library code to include, only one of
  181                        	; these can be set to '1' ...
  182                        	;
  183                        	; SUPPORT_2BUTTON : Only returns buttons I and II.
  184                        	; SUPPORT_6BUTTON : Read buttons III-VI, but ignore a mouse.
  185                        	; SUPPORT_MOUSE	  : Read mouse, but ignore buttons III-VI.
  186                        	;
  187                        	; It doesn't make sense to design a game the relies on both the 6-button and
  188                        	; the mouse, so the joystick library is optimized for one or the other.
  189                        	;
  190                        	; Note that both those devices are always detected and no conflicts occur,
  191                        	; this just controls reading either buttons III-VI or the Mouse Y-movement.
  192                        	;
  193                        	
  194               0000     		.ifndef	SUPPORT_6BUTTON
  200                        		.endif
  201                        	
  202                        	;
  203                        	; How many joypad/mouse devices should be supported?
  204                        	;
  205                        	; This is normally 5, but can be set to 3 (or lower) in order to speed up
  206                        	; the processing and free up CPU time for other code, which is especially
  207                        	; useful for mouse games.
  208                        	;
  209                        	
  210               0000     		.ifndef	MAX_PADS
  212                        		.endif
  213                        	
  214                        	;
  215                        	; Implement a HuC-compatible seperate array for accumulating joypad presses?
  216                        	;
  217                        	; This is only really needed if your game is not expected to run at 60Hz and
  218                        	; so you will sometimes miss joypad presses.
  219                        	;
  220                        	; Alternatively you can set ACCUMULATE_JOY so that joypad presses are always
  221                        	; accumulated in the normal joytrg array, which is how asm programmers would
  222                        	; normally deal with this situation.
  223                        	;
  224                        	
  225               0000     		.ifndef HUC_JOY_EVENTS
  227                        		.endif
  228                        	
  229                        	;
  230                        	; Should "joytrg" accumulate presses, and so need to be explicitely cleared
  231                        	; after reading, or should it just be the result of the last read?
  232                        	;
  233                        	; This option has no effect if HUC_JOY_EVENTS is non-zero since that option
  234                        	; takes precedence over this one!
  235                        	;
  236                        	
  237               0000     		.ifndef ACCUMULATE_JOY
  239                        		.endif
  240                        	
  241                        	;
  242                        	; The DATA_BANK location needs to be set as early as possible so that library
  243                        	; code is able to put data in there before the total overall size of the code
  244                        	; is known.
  245                        	;
  246                        	; By default, DATA_BANK is the next bank after the CORE_BANK.
  247                        	;
  248                        	; RESERVE_BANKS allows developers to reserve some banks between the CORE_BANK
  249                        	; and the DATA_BANK that they can use however they wish.
  250                        	;
  251                        	; One use for RESERVE_BANKS is to create empty space that PCEAS can use when
  252                        	; it relocates procedures. This provides a way for a developer to group code
  253                        	; together at the start of memory, and leave the maximum number of banks for
  254                        	; loading dynamic data from CD-ROM.
  255                        	;
  256                        	; The KickC environment sets RESERVE_BANKS=1 (or higher) so that there is a
  257                        	; a bank for the permanent C code and static constants.
  258                        	;
  259                        	
  260               0000     		.ifndef	RESERVE_BANKS
  266                        		.endif	RESERVE_BANKS
                             #[3]   "..\..\..\include\hucc\core.inc"
   35                        	
   36                        	;
   37                        	; This is a simple macro to call System Card functions when using MPR7 for
   38                        	; running the "CORE(not TM)" PC Engine library code.
   39                        	;
   40                        	
   41                        	system		.macro
   42                        			ldy     #<\1
   43                        			jsr	call_bios
   44                        			.endm
   45                        	
   46                        	;
   47                        	; This replaces the System Card's ex_setvec, because "call_bios" uses the
   48                        	; Y register.
   49                        	;
   50                        	
   51                        	setvec		.macro
   52                        			php
   53                        			sei
   54                        			lda.l	#\2
   55                        			sta.l	\1
   56                        			lda.h	#\2
   57                        			sta.h	\1
   58                        			plp
   59                        			.endm
   60                        	
   61                        	;
   62                        	; Repurpose this System Card variable, since nmi_hook is never used.
   63                        	;
   64                        	; We'll use it as a vector to a user-supplied sound driver instead.
   65                        	;
   66                        	
   67               2206     	sound_hook	=	nmi_hook		; Sound Driver to run in VBL.
   68                        	
   69                        	;
   70                        	; CORE Zero-Page variables, relative to the System Card's ZP variables.
   71                        	;
   72                        	
   73               0000     		.if	USING_PSGDRIVER
   75                        		.else
   76               20EC     	core_zpend	=	$F8:20EC
   77                        		.endif	USING_PSGDRIVER
   78                        	
   79               0001     		.if	SUPPORT_SGX
   80                        	
   81                        			; Put some "CORE(not TM)" variables at the start of Zero Page.
   82                        			;
   83                        			; These are at the *start* of ZP so that the SuperGrafx shadow
   84                        			; "sgx_" registers are at a specific offset from their System
   85                        			; Card "vdc_" counterparts, and they MUST NOT be moved!
   86                        			;
   87                        			; This allows us to put SGX_VDC_OFFSET or PCE_VDC_OFFSET into
   88                        			; the X register, and then index into either set of hardware
   89                        			; registers and the "sgx_reg" or "vdc_reg" shadow-variables.
   90                        	
   91               0000     	PCE_VDC_OFFSET	=	$00		; Offset to PCE VDC chip & shadow vars.
   92               0010     	SGX_VDC_OFFSET	=	$10		; Offset to SGX VDC chip & shadow vars.
   93                        	
   94               2000     			.zp
   95               2000     			.org	$2000
   96    F8:2000             	__temp		ds	2		; $F8:2000 Use within any ASM routine.
   97    F8:2002             	_bp_bank	ds	1		; $F8:2002 Use within any ASM/HuCC routine.
   98    F8:2003             	sgx_crl		ds	1		; $F8:2003 SGX shadow (vdc_crl = $20F3).
   99    F8:2004             	sgx_crh		ds	1		; $F8:2004 SGX shadow (vdc_crh = $20F4).
  100    F8:2005             	core_1stbank	ds	1		; $F8:2005 1st bank of library code.
  101    F8:2006             	sgx_sr		ds	1		; $F8:2006 SGX shadow (vdc_sr  = $20F6).
  102    F8:2007             	sgx_reg		ds	1		; $F8:2007 SGX shadow (vdc_reg = $20F7).
  103                        	
  104               2008     	core_zp1st	=	*		; $F8:2008 1st free user address.
  105                        	
  106                        		.else	SUPPORT_SGX
  116                        		.endif	SUPPORT_SGX
  117                        	
  118                        	;
  119                        	; The kernel code in RAM follows the System Card's RAM variables.
  120                        	;
  121                        	
  122               0000     		.if	USING_PSGDRIVER
  124                        		.else
  125               22D0     	core_ram1st     =	$F8:22D0
  126                        		.endif	USING_PSGDRIVER
  127                        	
  128                        	;
  129                        	; Include the "CORE(not TM)" startup code to begin the HuCARD / Overlay.
  130                        	;
  131                        	
                             #[4]   "..\..\..\include\hucc\core-startup.asm"
  132                        			include	"core-startup.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; core-startup.asm
    5                        	;
    6                        	; The "CORE(not TM)" PC Engine library startup code that runs at boot/reset.
    7                        	;
    8                        	; Copyright John Brandwood 2021-2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; This is the initialization code in the 1st bank, and it is responsible for
   18                        	; setting up a consistant runtime environment for the developer's program,
   19                        	; so that the developer can concentrate on writing the program itself.
   20                        	;
   21                        	; The idea is that when a program is loaded, the first 40KB of it is mapped
   22                        	; as $4000..$DFFF, and initialization starts at $4000, with the developer's
   23                        	; program getting control after initialization, with a jump to "core_main".
   24                        	;
   25                        	; The initializtion sets up a small kernel of code that provides interrupt
   26                        	; handling that mimics a subset of the System Card's behavior, designed to
   27                        	; act in the same way on HuCARD and CD-ROM, with either the System Card in
   28                        	; MPR7, or with an overlay in MPR7.
   29                        	;
   30                        	; The kernel handles reading the joypad/mouse, and it offers handler hooks
   31                        	; for running the developer's interrupt code.  On CD-ROM systems, it also
   32                        	; handles the loading and running of subsequent overlay programs.
   33                        	;
   34                        	; On HuCARD, the kernel itself runs in MPR7; while on CD-ROM systems it is
   35                        	; run from RAM in MPR1, so that overlay programs are independant from each
   36                        	; other, and can be written in different programming languages.
   37                        	;
   38                        	;
   39                        	; 1) If we're running on a HuCARD, the initialization is simple!
   40                        	;
   41                        	;    The PC Engine's memory map is set to ...
   42                        	;
   43                        	;      MPR0 = bank $FF : PCE hardware
   44                        	;      MPR1 = bank $F8 : PCE RAM with Stack & ZP
   45                        	;      MPR2 = bank $00 : HuCARD ROM
   46                        	;      MPR3 = bank $01 : HuCARD ROM
   47                        	;      MPR4 = bank $02 : HuCARD ROM
   48                        	;      MPR5 = bank $03 : HuCARD ROM
   49                        	;      MPR6 = bank $04 : HuCARD ROM
   50                        	;      MPR7 = bank $00 : HuCARD ROM
   51                        	;
   52                        	;
   53                        	; 2) If we're running on a HuCARD that supports the Turbo Everdrive, then the
   54                        	;    first 2 banks are reserved for mapping the TED2 hardware and a RAM bank.
   55                        	;
   56                        	;    The PC Engine's memory map is set to ...
   57                        	;
   58                        	;      MPR0 = bank $FF : PCE hardware
   59                        	;      MPR1 = bank $F8 : PCE RAM with Stack & ZP
   60                        	;      MPR2 = bank $02 : HuCARD ROM
   61                        	;      MPR3 = bank $03 : HuCARD ROM
   62                        	;      MPR4 = bank $04 : HuCARD ROM
   63                        	;      MPR5 = bank $05 : HuCARD ROM
   64                        	;      MPR6 = bank $06 : HuCARD ROM
   65                        	;      MPR7 = bank $02 : HuCARD ROM
   66                        	;
   67                        	;
   68                        	; 3) If we're running on an old CD System, the overlay is loaded from the ISO
   69                        	;    into banks $80-$87 (64KB max).
   70                        	;
   71                        	;    The PC Engine's memory map is set to ...
   72                        	;
   73                        	;      MPR0 = bank $FF : PCE hardware
   74                        	;      MPR1 = bank $F8 : PCE RAM with Stack & ZP
   75                        	;      MPR2 = bank $80 : CD RAM
   76                        	;      MPR3 = bank $81 : CD RAM
   77                        	;      MPR4 = bank $82 : CD RAM
   78                        	;      MPR5 = bank $83 : CD RAM
   79                        	;      MPR6 = bank $84 : CD RAM
   80                        	;      MPR7 = bank $80 : CD RAM or System Card's bank $00
   81                        	;
   82                        	;
   83                        	; 4) If we're running on a SuperCD System, the overlay is loaded from the ISO
   84                        	;    into banks $68-$87 (256KB max).
   85                        	;
   86                        	;    The PC Engine's memory map is set to ...
   87                        	;
   88                        	;      MPR0 = bank $FF : PCE hardware
   89                        	;      MPR1 = bank $F8 : PCE RAM with Stack & ZP
   90                        	;      MPR2 = bank $68 : SCD RAM
   91                        	;      MPR3 = bank $69 : SCD RAM
   92                        	;      MPR4 = bank $6A : SCD RAM
   93                        	;      MPR5 = bank $6B : SCD RAM
   94                        	;      MPR6 = bank $6C : SCD RAM
   95                        	;      MPR7 = bank $68 : SCD RAM or System Card's bank $00
   96                        	;
   97                        	; ***************************************************************************
   98                        	; ***************************************************************************
   99                        	
  100                        	
  101                        	
  102               E000     			.code
  103               0000     			.bank	0
  104                        	
  105               0000     		.if	SUPPORT_TED2			; Do we want to use a TED2?
  177                        		.endif	SUPPORT_TED2
  178                        	
  179                        	
  180                        	
  181               0001     		.if	USING_MPR7
  182                        	
  183                        	; ***************************************************************************
  184                        	; ***************************************************************************
  185                        	;
  186                        	; RESET VECTORS (when running in MPR7, either as a HuCARD, or a CD overlay)
  187                        	;
  188                        	
  189                        			; Hardware reset and interrupt vectors.
  190                        	
  191               FFF4     			.org	$FFF4
  192                        	
  193    00:FFF4  10         	core_version:	db	CORE_VERSION		; CORE(not TM) Version.
  194    00:FFF5  80         			db	$80			; System Card compatibility.
  195                        	
  196    00:FFF6  5D E0      			dw	core_irq2		; IRQ2	(from CD/ADPCM)
  197    00:FFF8  64 E0      			dw	core_irq1		; IRQ1	(from VDC)
  198    00:FFFA  58 E1      			dw	core_timer		; TIMER (from CPU)
  199    00:FFFC  5E E1      			dw	core_rti		; NMI	(unused)
  200               0000     		.if	CDROM
  202                        		.else
  203    00:FFFE  21 E0      			dw	core_hw_reset		; RESET (HuCARD)
  204                        		.endif	CDROM
  205                        	
  206               0001     		.if	USING_NEWPROC			; If the ".proc" trampolines
  207               FFF3     	__trampolineptr =	$FFF3			; are in MPR7, tell PCEAS to
  208                        		.endif					; put them below the vectors.
  209                        	
  210                        		.else	USING_MPR7
  222                        		.endif	USING_MPR7
  223                        	
  224                        	
  225                        	
  226                        	; ***************************************************************************
  227                        	; ***************************************************************************
  228                        	;
  229                        	; !!! THE HuCARD/OVERLAY PROGRAM'S FIRST BANK STARTS HERE !!!
  230                        	;
  231                        	
  232                        			; Switch to MPR2 for the "CORE(not TM)" library init.
  233                        			;
  234                        			; This is also executed by a HuCARD once it has run
  235                        			; its initial hardware-reset code.
  236                        			;
  237                        			; When run, MPR2-MPR6 are always mapped to the 1st 5 banks of
  238                        			; the overlay program, and MPR7 contains the System Card.
  239                        	
  240               4000     			.org	$4000
  241                        	
  242               0000     	CORE_BANK	=	bank(*) - _bank_base	; It isn't always zero! ;-)
  243                        	
  244               0000     			.bank	CORE_BANK, "CORE_BANK"	; Give it a label.
  245                        	
  246               0001     		.if	USING_MPR7
  247               0007     	CORE_PAGE	=	7			; User code runs in MPR7.
  248                        		.else
  250                        		.endif	USING_MPR7
  251                        	
  252    00:4000  4C 06 40   	core_boot:	jmp	* + 6			; Allow someone to patch this.
  253                        	
  254                        			; Add an ident string so isoLINK can autodetect configuration.
  255                        			;
  256                        			; This allows isoLINK to decide whether to use the IPL-SCD boot
  257                        			; sector hack, and whether to include a SuperGRAFX signature in
  258                        			; the boot sector, without the user having to manually use some
  259                        			; command line parameters, although they are free to do that if
  260                        			; they wish.
  261                        	
  262               0001     		.if	SUPPORT_SGX
  263               0000     		.if	BUILDING_STAGE1
  265                        		.else
  266    00:4003  53 47 58   			db	"SGX"			; SGX SuperCD or SGX HuCARD.
  267                        		.endif	BUILDING_STAGE1
  268                        		.else
  282                        		.endif	SUPPORT_SGX
  283                        	
  284               0000     		.if	CDROM
  331                        		.else	CDROM
  332                        	
  333                        			; Set up HuCARD RAM in a compatible way to the System Card.
  334                        			;
  335                        			; Note that the entire RAM is cleared by "core_hw_reset".
  336                        	
  337    00:4006  A9 1F      			lda	#%11111			; Enable joypad soft-reset.
  338    00:4008  8D 27 22   			sta	joyena
  339                        	
  340                        		.endif	CDROM
  341                        	
  342                        			; Now that RAM is initialized ...
  343                        	
  344    00:400B  43 04      			tma2				; Remember overlay's 1st bank
  345    00:400D  85 05      			sta	<core_1stbank		; $00, $02, $68 or $80!
  346               0001     		.if	USING_MPR7
  347    00:400F  53 80      			tam7				; "CORE(not TM)" takes MPR7!
  348                        		.endif
  349                        	
  350    00:4011  A2 FF      			ldx	#$FF			; Initialize stack pointer.
  351    00:4013  9A         			txs
  352                        	
  353    00:4014  20 5F E1   			jsr	core_clr_hooks		; Reset default hooks.
  354                        	
  355                        	;		stz	TIMER_CR		; Stop HuC6280 timer.
  356                        	;		stz	IRQ_ACK			; Clr HuC6280 timer interrupt.
  357                        	;		stz	IRQ_MSK			; Clr HuC6280 interrupt mask.
  358                        	
  359    00:4017  AD 00 02   			lda	VDC_SR			; Purge any overdue VBL.
  360    00:401A  9C 41 22   			stz	irq_cnt			; Make it easy to check.
  361    00:401D  58         			cli				; Restore interrupts.
  362                        	
  363    00:401E  4C E5 FF   			jmp	core_main		; Start the game's code.
  364                        	
  365                        	
  366                        	
  367               0001     		.if	!CDROM
  368                        	
  369                        	; ***************************************************************************
  370                        	; ***************************************************************************
  371                        	;
  372                        	; HuCARD Kernel Code
  373                        	;
  374                        	; core_ram1st - Start of code to relocate to MPR1.
  375                        	; core_ramend - End of code to relocate to MPR1.
  376                        	;
  377                        	
  378                        			; In a HuCARD, BSS variables start as low as possible.
  379                        	
  380               2200     			.bss
  381               22D0     			.org	core_ram1st
  382               22D0     	core_ramend	=	*
  383               4021     			.code
  384                        	
  385                        			; Normal HuCARD hardware-reset code, executed in MPR7.
  386                        			;
  387                        			; This does the basic PCE startup that every HuCARD (including
  388                        			; a System Card) needs to do, and then it remaps memory to be
  389                        			; compatible with the "CORE(not TM)" CD overlay program start.
  390                        	
  391               E021     			.page	7			; This will run in MPR7.
  392                        	
  393    00:E021  78         	core_hw_reset:	sei				; Disable interrupts.
  394    00:E022  D4         			csh				; Set high-speed mode.
  395    00:E023  D8         			cld
  396                        	
  397    00:E024  A2 FF      			ldx	#$FF			; Initialize stack pointer.
  398    00:E026  9A         			txs
  399    00:E027  8A         			txa				; MPR0 = $FF : PCE hardware
  400    00:E028  53 01      			tam0				; MPR1 = $F8 : PCE RAM
  401    00:E02A  A9 F8      			lda	#$F8
  402    00:E02C  53 02      			tam1
  403                        	
  404    00:E02E  9C 01 0C   			stz	TIMER_CR		; HW reset already does these,
  405    00:E031  9C 03 14   			stz	IRQ_ACK			; but this may be a reset from
  406    00:E034  9C 02 14   			stz	IRQ_MSK			; software (i.e. joypad).
  407                        	
  408    00:E037  F3 53 E0 00			tai	const_0000, $2000, 8192 ; Clear RAM.
         00:E03B  20 00 20    
  409                        	
  410    00:E03E  43 80      			tma7				; Not always bank 0!
  411                        	
  412    00:E040  53 04      			tam2				; Set CD-ROM overlay memory map,
  413    00:E042  1A         			inc	a			; 1st 5 banks in MPR2-MPR6.
  414    00:E043  53 08      			tam3
  415    00:E045  1A         			inc	a
  416    00:E046  53 10      			tam4
  417    00:E048  1A         			inc	a
  418    00:E049  53 20      			tam5
  419    00:E04B  1A         			inc	a
  420    00:E04C  53 40      			tam6
  421                        	
  422    00:E04E  4C 00 40   			jmp	core_boot		; Continue execution in MPR2.
  423                        	
  424                        			; In a HuCARD, the kernel code is permanently in MPR7.
  425                        	
                             #[5]   "..\..\..\include\hucc\core-kernel.asm"
  426                        			include "core-kernel.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; core-kernel.asm
    5                        	;
    6                        	; The "CORE(not TM)" PC Engine library kernel code that runs after startup.
    7                        	;
    8                        	; Copyright John Brandwood 2021-2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; This code is permanently located in either MPR7 (HuCARD), or MPR1 (CD-ROM),
   18                        	; and it provides a consistant method of interrupt-handling on both systems
   19                        	; that is designed to be compatible with the System Card.
   20                        	;
   21                        	; The library uses the "irq1_hook" for its own VDC interrupt handler, and PCE
   22                        	; developers are expected to use "vsync_hook" and "hsync_hook" for their VDC
   23                        	; interrupt functions.  Plenty of memory is available in the 1st bank for the
   24                        	; developer to put those functions.
   25                        	;
   26                        	; The reason for using "irq1_hook", is so that the library can work properly
   27                        	; if either the current overlay program, or the System Card, are mapped into
   28                        	; MPR7 whenever an interrupt occurs.
   29                        	;
   30                        	; The VDC interupt handler itself is changed from the System Card's handler,
   31                        	; and it is designed to provide faster response to vsync_hook, and to enable
   32                        	; interrupts during the slow(ish) joypad and sound driver code, so that both
   33                        	; raster and timer interrupts are not delayed.
   34                        	;
   35                        	; Developers are free to enable interrupts during their own vsync_hook code,
   36                        	; if they wish to do so.
   37                        	;
   38                        	; On CD-ROM systems, this library kernel also provides a function to load and
   39                        	; run a new overlay program, without relying upon any of the code/data within
   40                        	; the current overlay program's memory (unlike HuC v3).
   41                        	;
   42                        	; ***************************************************************************
   43                        	; ***************************************************************************
   44                        	
   45                        	
   46                        	
   47                        	; ***************************************************************************
   48                        	; ***************************************************************************
   49                        	;
   50                        	; core_kernel - Start of kernel code.
   51                        	;
   52                        	
   53               E051     	core_kernel	=	*
   54                        	
   55                        	
   56                        	
   57                        	; ***************************************************************************
   58                        	; ***************************************************************************
   59                        	;
   60                        	; Useful constants, needed by joypad library code, and used by many others.
   61                        	;
   62                        	; The kernel starts with a non-zero byte so that core-startup.asm can check
   63                        	; whether it has already been loaded into RAM.
   64                        	;
   65                        	
   66    00:E051  FF FF      	const_FFFF:	dw	$FFFF			; Useful constant for TAI.
   67    00:E053  00 00      	const_0000:	dw	$0000			; Useful constant for TAI.
   68                        	
   69    00:E055  01 02 04 08	bit_mask:	db	$01,$02,$04,$08,$10,$20,$40,$80
         00:E059  10 20 40 80 
   70                        	
   71                        	
   72                        	
   73                        	; ***************************************************************************
   74                        	; ***************************************************************************
   75                        	;
   76                        	; core_irq2  - Minimal interrupt handler compatible with System Card.
   77                        	; core_irq1  - Minimal interrupt handler compatible with System Card.
   78                        	; core_timer - Minimal interrupt handler compatible with System Card.
   79                        	; core_rti   - Minimal interrupt handler compatible with System Card.
   80                        	;
   81                        	; Note that it takes 8 cycles to respond to an IRQ.
   82                        	;
   83                        	; These routines are copied to a location in RAM that does not vary when
   84                        	; a different overlay program is loaded.
   85                        	;
   86                        	; All overlay programs are set up to vector interrupts to these routines,
   87                        	; which is designed to avoid interrupt-related crashes when loading a new
   88                        	; overlay on top of an old overlay in memory.
   89                        	;
   90                        	; All of the game's actual interrupt handling itself is done in the "hook"
   91                        	; functions so that everything works the same if the System Card is banked
   92                        	; into MPR7 when an interrupt occurs.
   93                        	;
   94                        	; ***************************************************************************
   95                        	; ***************************************************************************
   96                        	;
   97                        	; Bit settings for irq_vec  ...
   98                        	;
   99                        	;   7 : 1 to skip BIOS hsync processsing
  100                        	;   6 : 1 to call [hsync_hook]
  101                        	;   5 : 1 to skip BIOS vsync processsing
  102                        	;   4 : 1 to call [vsync_hook]
  103                        	;
  104                        	;   3 : 1 to jump [nmi_hook]
  105                        	;   2 : 1 to jump [timer_hook]
  106                        	;   1 : 1 to jump [irq1_hook]
  107                        	;   0 : 1 to jump [irq2_hook]
  108                        	;
  109                        	; ***************************************************************************
  110                        	; ***************************************************************************
  111                        	
  112    00:E05D  8F F5 01   	core_irq2:	bbs0	<irq_vec, .hook		; 8 cycles if using hook.
  113                        	
  114               0000     		.if	CDROM
  138                        		.else
  139                        			; Does this HuCARD support the IFU's ADPCM hardware?
  140                        	
  141               0000     		.if	SUPPORT_ADPCM
  153                        		.endif	SUPPORT_ADPCM
  154                        	
  155    00:E060  40         			rti				; No IRQ2 hardware on HuCARD.
  156                        	
  157    00:E061  6C 00 22   	.hook:		jmp	[irq2_hook]		; 7 cycles.
  158                        		.endif	CDROM
  159                        	
  160                        	
  161                        	
  162                        	; ***************************************************************************
  163                        	; ***************************************************************************
  164                        	;
  165                        	; core_irq1 - Minimal interrupt handler compatible with System Card.
  166                        	;
  167                        	; irq1_handler - Basic "CORE(not TM)" IRQ1 handler to use as the "irq1_hook".
  168                        	;
  169                        	; Doing the IRQ1 handler processing in this hook means that things operate
  170                        	; the same whether the System Card or an Overlay is paged into MPR7.
  171                        	
  172               0000     		.ifndef	HUCC
  181                        		.else
  182                        			; Faster IRQ servicing for HuCC and code that would like to
  183                        			; avoid the 8 cycles used by the "bbs1" instruction that is
  184                        			; taken when the System Card is mapped into MPR7.
  185                        	
  186    00:E064             	core_irq1:	;;;				; 8 (cycles for the INT)
  187               0001     		.if	CDROM || !defined(NO_CORE_IRQ1_HOOK)
  188    00:E064  6C 02 22   			jmp	[irq1_hook]		; 7 cycles.
  189                        	
  190                        		.endif
  191                        		.endif
  192                        	
  193    00:E067  48         	irq1_handler:	pha				; 3 Save all registers.
  194    00:E068  DA         			phx				; 3
  195    00:E069  5A         			phy				; 3
  196                        	
  197               0000     		.ifndef	USING_RCR_MACROS		;   This slows things down
  206                        		.endif	USING_RCR_MACROS
  207                        	
  208    00:E06A  AD 00 02   			lda	VDC_SR			; 6 Acknowledge the VDC's IRQ.
  209    00:E06D  85 F6      			sta	<vdc_sr			; 4 Remember what caused it.
  210                        	
  211               0001     		.if	SUPPORT_SGX
  212    00:E06F  AE 10 02   			ldx	SGX_SR			; 6 Read SGX_SR after VDC_SR in
  213    00:E072  86 06      			stx	<sgx_sr			; 4 case this is not an SGX!
  214                        		.endif
  215                        	
  216                        			; Handle the VDC's RCR interrupt.
  217                        	
  218    00:E074  29 04      	!:		and	#$04			; 2 Is this an HSYNC interrupt?
  219    00:E076  F0 44      			beq	!+			; 2
  220                        	
  221               0001     		.ifdef	USING_RCR_MACROS
  222                        			VDC_RCR_MACRO
                             	
         00:E078  03 06      			st0	#VDC_RCR		; 5
                             	
         00:E07A  AE 1E 27   			ldx	vdc_next_region		; 5 X and Y can be greater than
         00:E07D  BC 1F 27   			ldy	vdc_regionA_nxt, x	; 5 HUCC_PCE_SPLITS if regionB!
         00:E080  18         			clc				; 2
         00:E081  D0 05      			bne	!set_next_rcr+		; 4 Stop RCR if next line is 0.
                             	
         00:E083  2D 53 E0   			and	const_0000		; 5 A=$00 with the same #cycles
         00:E086  80 05      			bra	!clr_next_rcr+		; 4 as if the branch were taken.
                             	
         00:E088  B9 CE 26   	!set_next_rcr:	lda	vdc_regionA_rcr, y	; 5 Set next RCR 1 line before
         00:E08B  69 3F      			adc	#64-1			; 2 the region begins, or 0 to
         00:E08D  8D 02 02   	!clr_next_rcr:	sta	VDC_DL			; 6 disable.
         00:E090  62         			cla				; 2
         00:E091  2A         			rol	a			; 2
         00:E092  8D 03 02   			sta	VDC_DH			; 6
                             	
         00:E095  03 08      			st0	#VDC_BYR		; 5 Do BYR first to mitigate the
         00:E097  BD FE 26   			lda	vdc_regionA_yl, x	; 5 glitch if the IRQ is delayed.
         00:E09A  8D 02 02   			sta	VDC_DL			; 6 = 105 cycles from RCR on SGX
         00:E09D  BD 0E 27   			lda	vdc_regionA_yh, x	; 5
         00:E0A0  8D 03 02   			sta	VDC_DH			; 6
                             	
         00:E0A3  03 05      			st0	#VDC_CR			; 5
         00:E0A5  BD BE 26   			lda	vdc_regionA_crl, x	; 5
                             	;		asl	a
         00:E0A8  8D 02 02   			sta	VDC_DL			; 6
                             	
         00:E0AB  03 07      			st0	#VDC_BXR		; 2
         00:E0AD  BD DE 26   			lda	vdc_regionA_xl, x	; 5
         00:E0B0  8D 02 02   			sta	VDC_DL			; 6
         00:E0B3  BD EE 26   			lda	vdc_regionA_xh, x	; 5
         00:E0B6  8D 03 02   			sta	VDC_DH			; 6 = 156 cycles from RCR if DUO
                             	
                             	;		bcc	!+
                             	;		lda	vdc_regionA_yh, x	; 5
                             	;		sta.l	VCE_CTW			; 6
                             	
         00:E0B9  8C 1E 27   			sty	vdc_next_region		; 5
                             	
  223                        		.else
  225                        		.endif
  226                        	
  227               0001     		.if	SUPPORT_SGX
  228                        	
  229                        			; Handle the SGX's RCR interrupt.
  230                        	
  231    00:E0BC  2F 06 50   	!:		bbr2	<sgx_sr, !+		; 6 Is this an HSYNC interrupt?
  232                        	
  233               0001     		.ifdef	USING_RCR_MACROS
  234                        			SGX_RCR_MACRO
                             	
         00:E0BF  A9 06      			lda	#VDC_RCR		; 2
         00:E0C1  8D 10 02   			sta	SGX_AR			; 6
                             	
         00:E0C4  AE 9F 27   			ldx	sgx_next_region		; 5 X and Y can be greater than
         00:E0C7  BC A0 27   			ldy	sgx_regionA_nxt, x	; 5 HUCC_SGX_SPLITS if regionB!
         00:E0CA  18         			clc				; 2
         00:E0CB  D0 05      			bne	!set_next_rcr+		; 4 Stop RCR if next line is 0.
                             	
         00:E0CD  2D 53 E0   			and	const_0000		; 5 A=$00 with the same #cycles
         00:E0D0  80 05      			bra	!clr_next_rcr+		; 4 as if the branch were taken.
                             	
         00:E0D2  B9 4F 27   	!set_next_rcr:	lda	sgx_regionA_rcr, y	; 5 Set next RCR 1 line before
         00:E0D5  69 3F      			adc	#64-1			; 2 the region begins, or 0 to
         00:E0D7  8D 12 02   	!clr_next_rcr:	sta	SGX_DL			; 6 disable.
         00:E0DA  62         			cla				; 2
         00:E0DB  2A         			rol	a			; 2
         00:E0DC  8D 13 02   			sta	SGX_DH			; 6
                             	
         00:E0DF  A9 08      			lda	#VDC_BYR		; 2 Do BYR first to mitigate the
         00:E0E1  8D 10 02   			sta	SGX_AR			; 6 glitch if the IRQ is delayed.
         00:E0E4  BD 7F 27   			lda	sgx_regionA_yl, x	; 5
         00:E0E7  8D 12 02   			sta	SGX_DL			; 6
         00:E0EA  BD 8F 27   			lda	sgx_regionA_yh, x	; 5
         00:E0ED  8D 13 02   			sta	SGX_DH			; 6
                             	
         00:E0F0  A9 05      			lda	#VDC_CR			; 2
         00:E0F2  8D 10 02   			sta	SGX_AR			; 6
         00:E0F5  BD 3F 27   			lda	sgx_regionA_crl, x	; 5
         00:E0F8  8D 12 02   			sta	SGX_DL			; 6
                             	
         00:E0FB  A9 07      			lda	#VDC_BXR		; 2
         00:E0FD  8D 10 02   			sta	SGX_AR			; 6
         00:E100  BD 5F 27   			lda	sgx_regionA_xl, x	; 5
         00:E103  8D 12 02   			sta	SGX_DL			; 6
         00:E106  BD 6F 27   			lda	sgx_regionA_xh, x	; 5
         00:E109  8D 13 02   			sta	SGX_DH			; 6 = 293 cycles (282 if no YH)
                             	
         00:E10C  8C 9F 27   			sty	sgx_next_region		; 5
                             	
  235                        		.else
  237                        		.endif
  238                        	
  239                        		.endif	SUPPORT_SGX
  240                        	
  241                        			; Handle the VDC's VBL interrupt.
  242                        	
  243    00:E10F  5F F6 32   	!:		bbr5	<vdc_sr, .exit_irq1	; 6 Is this a VBLANK interrupt?
  244                        	
  245               0001     		.ifdef	USING_RCR_MACROS		;   If we didn't do it earlier
  246               0000     		.if	CDROM				;   then we need to do it now.
  253                        		.endif	CDROM
  254                        		.endif	USING_RCR_MACROS
  255                        	
  256               0001     		.if	SUPPORT_SGX
  257    00:E112  A9 05      			lda	#VDC_CR			; Update the SGX's Control
  258    00:E114  8D 10 02   			sta	SGX_AR			; Register first, just in
  259    00:E117  8D 00 02   			sta	VDC_AR			; case this is not an SGX!
  260    00:E11A  A5 03      			lda	<sgx_crl		
  261    00:E11C  8D 12 02   			sta	SGX_DL
  262    00:E11F  A5 F3      			lda	<vdc_crl
  263    00:E121  8D 02 02   			sta	VDC_DL
  264                        	
  265                        	;		lda	<sgx_crh		; Do not mess with the SGX's
  266                        	;		sta	SGX_DH			; auto-increment!!!
  267                        	;		lda	<vdc_crh		; Do not mess with the VDC's
  268                        	;		sta	VDC_DH			; auto-increment!!!
  269                        		.else
  277                        		.endif	SUPPORT_SGX
  278                        	
  279    00:E124  EE 41 22   			inc	irq_cnt			; Mark that a VBLANK occurred.
  280                        	
  281    00:E127  4F F5 02   			bbr4	<irq_vec, .skip_hookv	; Is a driver registered?
  282                        	
  283    00:E12A  44 26      			bsr	.user_vsync		; Call game's VBLANK code.
  284                        	
  285    00:E12C  DF F5 15   	.skip_hookv:	bbs5	<irq_vec, .exit_vbl	; Should we skip "BIOS" stuff?
  286                        	
  287    00:E12F  58         			cli				; Allow HSYNC and TIMER IRQ.
  288                        	
  289    00:E130  20 DB FF   			call	read_joypads		; Update joypad state.
  290                        	
  291               0000     		.if	USING_PSGDRIVER
  305                        		.else
  306    00:E133  AD 07 22   			lda	sound_hook + 1		; Is a driver registered?
  307    00:E136  F0 0C      			beq	.exit_vbl
  308                        	
  309    00:E138  A9 80      			lda	#$80			; Acquire sound mutex to avoid
  310    00:E13A  0C E7 22   			tsb	sound_mutex		; conflict with a delayed VBL.
  311    00:E13D  30 05      			bmi	.exit_vbl
  312                        	
  313    00:E13F  44 14      			bsr	.user_sound		; Call the driver hook.
  314                        	
  315    00:E141  9C E7 22   			stz	sound_mutex		; Release sound mutex.
  316                        		.endif	USING_PSGDRIVER
  317                        	
  318    00:E144             	.exit_vbl:
  319                        	
  320               0001     		.ifdef	USING_RCR_MACROS		; If USING_RCR_MACROS then 
  321               0000     		.if	CDROM				; restore after the VBLANK.
  326                        		.endif	CDROM
  327                        		.endif	USING_RCR_MACROS
  328                        	
  329    00:E144             	.exit_irq1:
  330                        	
  331               0000     		.ifndef	USING_RCR_MACROS		; If !USING_RCR_MACROS then
  338                        		.endif	USING_RCR_MACROS
  339                        	
  340               0001     		.if	SUPPORT_SGX
  341    00:E144  A5 07      			lda	<sgx_reg		; Restore SGX_AR first, just
  342    00:E146  8D 10 02   			sta	SGX_AR			; in case this is not an SGX!
  343                        		.endif
  344                        	
  345    00:E149  A5 F7      			lda	<vdc_reg		; Restore VDC_AR in case we
  346    00:E14B  8D 00 02   			sta	VDC_AR			; changed it.
  347                        	
  348    00:E14E  7A         			ply				; Restore all registers.
  349    00:E14F  FA         			plx
  350    00:E150  68         			pla
  351                        	
  352    00:E151  40         			rti				; Return from interrupt.
  353                        	
  354    00:E152  6C 08 22   	.user_vsync:	jmp	[vsync_hook]		; 7
  355    00:E155  6C 06 22   	.user_sound:	jmp	[sound_hook]		; 7
  356                        	
  357               0000     		.ifndef	USING_RCR_MACROS
  362                        		.endif	USING_RCR_MACROS
  363                        	
  364                        	
  365                        	
  366                        	; ***************************************************************************
  367                        	; ***************************************************************************
  368                        	;
  369                        	; core_timer - Minimal interrupt handler compatible with System Card.
  370                        	;
  371                        	; tirq_handler - Basic "CORE(not TM)" TIRQ handler to use as the "timer_hook".
  372                        	;
  373                        	; Doing the TIRQ handler processing in this hook means that things operate
  374                        	; the same whether the System Card or an Overlay is paged into MPR7.
  375                        	
  376               0000     		.ifndef	HUCC
  385                        		.else
  386                        			; Faster IRQ servicing for HuCC and code that would like to
  387                        			; avoid the 8 cycles used by the "bbs2" instruction that is
  388                        			; taken when the System Card is mapped into MPR7.
  389                        	
  390    00:E158             	core_timer:	;;;				; 8 (cycles for the INT)
  391               0001     		.if	CDROM || !defined(NO_CORE_TIRQ_HOOK)
  392    00:E158  6C 04 22   			jmp	[timer_hook]		; 7 cycles.
  393                        		.endif
  394                        		.endif
  395                        	
  396    00:E15B             	tirq_handler:
  397               0000     		.ifdef	USING_TIRQ_MACRO
  399                        		.else
  400    00:E15B  9C 03 14   			stz	IRQ_ACK			; 5 Clear timer interrupt.
  401                        		.endif
  402                        	
  403    00:E15E  40         	core_rti:	rti
  404                        	
  405                        	
  406                        	
  407                        	; ***************************************************************************
  408                        	; ***************************************************************************
  409                        	;
  410                        	; core_clr_hooks - Reset default "CORE(not TM)" interrupt-handling hooks.
  411                        	;
  412                        	
  413    00:E15F  08         	core_clr_hooks:	php				; Preserve interrupt state.
  414    00:E160  78         			sei				; Disable interrupts.
  415                        	
  416               0000     		.if	USING_PSGDRIVER
  419                        		.else
  420    00:E161  9C 07 22   			stz.h	sound_hook		; Disable sound driver calls.
  421                        		.endif
  422                        	
  423    00:E164  A9 88      			lda	#<core_sw_reset		; Set up the soft-reset hook.
  424    00:E166  8D 84 22   			sta.l	reset_hook
  425    00:E169  A9 E1      			lda	#>core_sw_reset
  426    00:E16B  8D 85 22   			sta.h	reset_hook
  427                        	
  428    00:E16E  A9 67      			lda	#<irq1_handler		; Set up the IRQ1 hook.
  429    00:E170  8D 02 22   			sta.l	irq1_hook
  430    00:E173  A9 E0      			lda	#>irq1_handler
  431    00:E175  8D 03 22   			sta.h	irq1_hook
  432                        	
  433    00:E178  A9 5B      			lda	#<tirq_handler		; Set up the TIRQ hook.
  434    00:E17A  8D 04 22   			sta.l	timer_hook
  435    00:E17D  A9 E1      			lda	#>tirq_handler
  436    00:E17F  8D 05 22   			sta.h	timer_hook
  437                        	
  438    00:E182  A9 06      			lda	#%00000110		; Replace the System Card's
  439    00:E184  85 F5      			sta	<irq_vec		; IRQ1 and TIRQ processing.
  440                        	
  441    00:E186  28         			plp				; Restore interrupt state.
  442    00:E187  60         			rts
  443                        	
  444                        	
  445                        	
  446                        	; ***************************************************************************
  447                        	; ***************************************************************************
  448                        	;
  449                        	; Include the joypad library, with configuration from "core-config.inc".
  450                        	;
  451                        	
                             #[6]   "..\..\..\include\hucc\joypad.asm"
  452                        			include "joypad.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; joypad.asm
    5                        	;
    6                        	; Read 2-button & 6-button joypads & PCE mouse, with or without a MultiTap.
    7                        	;
    8                        	; Copyright John Brandwood 2019-2025.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; Unlike Lemmings, this code does not interfere with a Memory Base 128! ;-)
   18                        	;
   19                        	; ***************************************************************************
   20                        	; ***************************************************************************
   21                        	;
   22                        	; With SUPPORT_MOUSE ..... 2602 cycles to read 5 ports with 5 mice
   23                        	;
   24                        	; With HuC library code .. 2442 cycles to read 5 ports with 5 pads (2-button)
   25                        	; With HuC library code .. 2442 cycles to read 5 ports with 5 pads (6-button)
   26                        	;
   27                        	; With SUPPORT_MOUSE ....  2016 cycles to read 5 ports with 5 pads (2-button)
   28                        	; With SUPPORT_MOUSE ..... 1976 cycles to read 5 ports with 5 pads (6-button)
   29                        	;
   30                        	; With SUPPORT_MOUSE ....  1618 cycles to read 3 ports with 3 mice
   31                        	; With SUPPORT_MOUSE ..... 1462 cycles to read 3 ports with 2 mice
   32                        	; With SUPPORT_MOUSE ..... 1306 cycles to read 3 ports with 1 mouse
   33                        	;
   34                        	; With SUPPORT_6BUTTON ... 1235 cycles to read 5 ports with 5 pads (2-button)
   35                        	; With SUPPORT_6BUTTON ... 1215 cycles to read 5 ports with 5 pads (6-button)
   36                        	;
   37                        	; With SUPPORT_MOUSE ..... 1126 cycles to read 2 ports with 2 mice
   38                        	; With SUPPORT_MOUSE ...... 970 cycles to read 2 ports with 1 mouse
   39                        	;
   40                        	; Only SUPPORT_2BUTTON .... 971 cycles to read 5 ports with 5 pads (2-button)
   41                        	; Only SUPPORT_2BUTTON .... 861 cycles to read 5 ports with 5 pads (6-button)
   42                        	;
   43                        	; With SUPPORT_MOUSE ...... 634 cycles to read 1 port  with 1 mouse
   44                        	;
   45                        	; ***************************************************************************
   46                        	; ***************************************************************************
   47                        	
  142                        	
  143                        	;
  144                        	; Now choose which version of the code to include.
  145                        	;
  146                        	
  147               0000     		.if	SUPPORT_2BUTTON
  278                        		.endif	SUPPORT_2BUTTON
  279                        	
  280                        	
  281                        	
  282               0000     		.if	SUPPORT_MOUSE
  845                        		.else	SUPPORT_MOUSE
  846                        	
  847                        	
  848                        	
  849               0001     		.if	SUPPORT_6BUTTON			; Without mouse!
  850                        	
  851                        	; ***************************************************************************
  852                        	; ***************************************************************************
  853                        	;
  854                        	; read_joypads - full 6-button pad support, but mouse movement is ignored.
  855                        	;
  856                        	; This code distinguishes between a mouse and a 2-button or 6-button joypad,
  857                        	; so that unsupported devices do not have to be unplugged from the MultiTap.
  858                        	;
  859                        	; The code loops two times to get both sets of buttons on a 6-button joypad.
  860                        	;
  861                        	; N.B. Takes approx 1/3 frame to detect mice the first time it is run.
  862                        	;
  863                        	; bit values for joypad 2-button bytes: (MSB = #7; LSB = #0)
  864                        	; ----------------------------------------------------------
  865                        	; bit 0 (ie $01) = I
  866                        	; bit 1 (ie $02) = II
  867                        	; bit 2 (ie $04) = SELECT
  868                        	; bit 3 (ie $08) = RUN
  869                        	; bit 4 (ie $10) = UP
  870                        	; bit 5 (ie $20) = RIGHT
  871                        	; bit 6 (ie $40) = DOWN
  872                        	; bit 7 (ie $80) = LEFT
  873                        	;
  874                        	; bit values for joypad 6-button bytes: (MSB = #7; LSB = #0)
  875                        	; ----------------------------------------------------------
  876                        	; bit 0 (ie $01) = III
  877                        	; bit 1 (ie $02) = IV
  878                        	; bit 2 (ie $04) = V
  879                        	; bit 3 (ie $08) = VI
  880                        	; bit 4 (ie $10) = zero
  881                        	; bit 5 (ie $20) = zero
  882                        	; bit 6 (ie $40) = zero
  883                        	; bit 7 (ie $80) = zero, but set to one if 6-button pad detected.
  884                        	;
  885                        	
  886               E188     			.code
  887                        	
  888               0001     		.if	(* >= $4000)			; Make this a ".proc" if it
  889    13:DEEB             	read_joypads	.proc                           ; not running in RAM.
  890                        		.else
  892                        		.endif
  893                        	
  894    13:DEEB  A9 80      			lda	#$80			; Acquire port mutex to avoid
  895    13:DEED  0C D0 22   			tsb	port_mutex		; conflict with a delayed VBL
  896    13:DEF0  30 75      			bmi	.exit			; or access to an MB128.
  897                        	
  898    13:DEF2  73 28 22 32			tii	joynow,joyold,MAX_PADS	; Save the previous values.
         13:DEF6  22 05 00    
  899    13:DEF9  73 D3 22 D8			tii	joy6now,joy6old,MAX_PADS
         13:DEFD  22 05 00    
  900                        	
  901                        			; Reset the 6-btn bits, the user might change the joypad mode!
  902                        	
  903    13:DF00  F3 53 E0 D3			tai	const_0000, joy6now, MAX_PADS
         13:DF04  22 05 00    
  904                        	
  905                        			; Detect attached mice the first time this routine is called.
  906                        	
  907    13:DF07  AD D2 22   			lda	mouse_flg		; Has mouse detection happened?
  908    13:DF0A  30 28      			bmi	.calc_pressed
  909                        	
  910    13:DF0C  A9 05      			lda	#MAX_PADS		; Reset number of pads to read.
  911    13:DF0E  8D D1 22   			sta	num_ports
  912                        	
  913    13:DF11  A9 1F      			lda	#%00011111		; Try reading everything as a
  914    13:DF13  8D D2 22   			sta	mouse_flg		; mouse.
  915                        	
  916    13:DF16  A0 17      			ldy	#23			; Initialize repeat count.
  917    13:DF18  A9 80      			lda	#$80			; Initialize mouse detection.
  918    13:DF1A  5A         	.detect_loop:	phy
  919    13:DF1B  48         			pha
  920    13:DF1C  44 53      			bsr	.read_devices		; Read all devices as if mice.
  921    13:DF1E  68         			pla
  922    13:DF1F  82         			clx
  923    13:DF20  BC E2 22   	.detect_port:	ldy	mouse_x, x		; A movement of zero means
  924    13:DF23  D0 03      			bne	.detect_next		; this port is a mouse.
  925    13:DF25  1D 55 E0   			ora	bit_mask, x
  926    13:DF28  E8         	.detect_next:	inx				; Get the next pad from the
  927    13:DF29  E0 05      			cpx	#MAX_PADS		; multitap.
  928    13:DF2B  D0 F3      			bne	.detect_port
  929    13:DF2D  7A         			ply				; Repeat the detection test.
  930    13:DF2E  88         			dey
  931    13:DF2F  D0 E9      			bne	.detect_loop
  932                        	
  933                        	;	.if	DETECT_PHANTOMS
  934                        	;		cmp	#(1 << MAX_PADS) + 127	; If we find a mouse in every
  935                        	;		bne	.detect_done		; port, then assume mirrored!
  936                        	;		lda	#1			; Report a single mouse in a
  937                        	;		sta	num_ports		; single port.
  938                        	;		lda	#$81
  939                        	;	.endif
  940                        	
  941    13:DF31  8D D2 22   	.detect_done:	sta	mouse_flg		; Report mouse detection.
  942                        	
  943                        			; See what has just been pressed, and check for soft-reset.
  944                        	
  945    13:DF34  44 3B      	.calc_pressed:	bsr	.read_devices		; Read all devices normally.
  946                        	
  947    13:DF36  A2 04      			ldx	#MAX_PADS - 1
  948                        	
  949    13:DF38  BD D3 22   	.pressed_loop:	lda	joy6now, x		; Calc which buttons have just
  950    13:DF3B  5D D8 22   			eor	joy6old, x		; been pressed (6-button).
  951    13:DF3E  3D D3 22   			and	joy6now, x
  952               0000     		.if	HUC_JOY_EVENTS
  956                        		.else
  957               0000     		.if	ACCUMULATE_JOY
  959                        		.endif
  960    13:DF41  9D DD 22   			sta	joy6trg, x
  961                        		.endif
  962                        	
  963    13:DF44  BD 28 22   			lda	joynow, x		; Calc which buttons have just
  964    13:DF47  A8         			tay                             ; been pressed (2-button).
  965    13:DF48  5D 32 22   			eor	joyold, x
  966    13:DF4B  3D 28 22   			and	joynow, x
  967               0000     		.if	HUC_JOY_EVENTS
  971                        		.else
  972               0000     		.if	ACCUMULATE_JOY
  974                        		.endif
  975    13:DF4E  9D 2D 22   			sta	joytrg, x
  976                        		.endif
  977                        	
  978    13:DF51  C9 04      			cmp	#$04			; Detect the soft-reset combo,
  979    13:DF53  D0 0C      			bne	.not_reset		; hold RUN then press SELECT.
  980    13:DF55  C0 0C      			cpy	#$0C
  981    13:DF57  D0 08      			bne	.not_reset
  982    13:DF59  BD 55 E0   			lda	bit_mask, x
  983    13:DF5C  2C 27 22   			bit	joyena
  984    13:DF5F  D0 09      			bne	.soft_reset
  985                        	
  986    13:DF61  CA         	.not_reset:	dex				; Check the next pad from the
  987    13:DF62  10 D4      			bpl	.pressed_loop		; multitap.
  988                        	
  989    13:DF64  9C D0 22   			stz	port_mutex		; Release port mutex.
  990                        	
  991               0001     		.if	(* >= $4000)			; This is a ".proc" if it is
  992                        	.exit:		leave                           ; not running in RAM.
         13:DF67  4C EF FF   			jmp	leave_proc
  993                        		.else
  995                        		.endif
  996                        	
  997    13:DF6A  78         	.soft_reset:	sei				; Disable interrupts.
  998    13:DF6B  9C D0 22   			stz	port_mutex		; Release port mutex.
  999    13:DF6E  6C 84 22   			jmp	[reset_hook]		; Jump to the soft-reset hook.
 1000                        	
 1001                        			; Read all of the devices attached to the MultiTap.
 1002                        	
 1003    13:DF71  A2 02      	.read_devices:	ldx	#2			; Repeat this loop 2 times.
 1004                        	
 1005    13:DF73  A9 01      	.read_multitap:	lda	#$01			; CLR lo, SEL hi for d-pad.
 1006    13:DF75  8D 00 10   			sta	IO_PORT
 1007    13:DF78  A9 03      			lda	#$03			; CLR hi, SEL hi, reset tap.
 1008    13:DF7A  8D 00 10   			sta	IO_PORT
 1009    13:DF7D  C2         			cly				; Start at port 1.
 1010                        	
 1011    13:DF7E  A9 01      	.read_port:	lda	#$01			; CLR lo, SEL hi for d-pad.
 1012    13:DF80  8D 00 10   			sta	IO_PORT			; Wait 1.25us (9 cycles).
 1013                        	
 1014    13:DF83  B9 55 E0   			lda	bit_mask, y		; Is there a mouse attached?
 1015    13:DF86  2D D2 22   			and	mouse_flg
 1016    13:DF89  D0 33      			bne	.read_mouse
 1017                        	
 1018    13:DF8B  AD 00 10   	.read_pad:	lda	IO_PORT			; Read direction-pad bits.
 1019    13:DF8E  9C 00 10   			stz	IO_PORT			; CLR lo, SEL lo for buttons.
 1020    13:DF91  0A         			asl	a			; Wait 1.25us (9 cycles).
 1021    13:DF92  0A         			asl	a
 1022    13:DF93  0A         			asl	a
 1023    13:DF94  0A         			asl	a
 1024    13:DF95  F0 1B      			beq	.read_6button		; 6-btn pad if UDLR all held.
 1025                        	
 1026    13:DF97  99 28 22   	.read_2button:	sta	joynow, y		; Get buttons of 2-btn pad.
 1027    13:DF9A  AD 00 10   			lda	IO_PORT
 1028    13:DF9D  29 0F      			and	#$0F
 1029    13:DF9F  19 28 22   			ora	joynow, y
 1030    13:DFA2  49 FF      			eor	#$FF
 1031    13:DFA4  99 28 22   			sta	joynow, y
 1032                        	
 1033    13:DFA7  C8         	.next_port:	iny				; Get the next pad from the
 1034    13:DFA8  CC D1 22   			cpy	num_ports		; multitap.
 1035    13:DFAB  90 D1      			bcc	.read_port
 1036                        	
 1037    13:DFAD  CA         			dex				; Do the next complete pass.
 1038    13:DFAE  CA         			dex
 1039    13:DFAF  10 C2      			bpl	.read_multitap		; Have we finished 2 passes?
 1040    13:DFB1  60         			rts				; Now that everything is read.
 1041                        	
 1042    13:DFB2  AD 00 10   	.read_6button:	lda	IO_PORT			; Get buttons of 6-btn pad.
 1043    13:DFB5  29 0F      			and	#$0F
 1044    13:DFB7  49 8F      			eor	#$8F			; Set bit-7 to show that a
 1045    13:DFB9  99 D3 22   			sta	joy6now, y		; 6-button pad is present.
 1046    13:DFBC  80 E9      			bra	.next_port
 1047                        	
 1048    13:DFBE  7C EF DF   	.read_mouse:	jmp	[.mouse_vectors, x]	; Which mouse info is next?
 1049                        	
 1050                        			; Mouse processing, normally four passes, here just two.
 1051                        	
 1052    13:DFC1  A9 1C      	.mouse_x_hi:	lda	#28			; 189 cycle delay after CLR lo
 1053    13:DFC3  3A         	.wait_loop:	dec	a			; on port to allow the mouse
 1054    13:DFC4  D0 FD      			bne	.wait_loop		; to buffer and reset counters.
 1055                        	
 1056    13:DFC6  AD 00 10   			lda	IO_PORT			; Read direction-pad bits.
 1057    13:DFC9  9C 00 10   			stz	IO_PORT			; CLR lo, SEL lo for buttons.
 1058    13:DFCC  0A         			asl	a			; Wait 1.25us (9 cycles).
 1059    13:DFCD  0A         			asl	a
 1060    13:DFCE  0A         			asl	a
 1061    13:DFCF  0A         			asl	a
 1062    13:DFD0  99 E2 22   			sta	mouse_x, y		; Save port's X-hi nibble.
 1063                        	
 1064    13:DFD3  AD 00 10   			lda	IO_PORT			; Get mouse buttons.
 1065    13:DFD6  29 0F      			and	#$0F
 1066    13:DFD8  49 0F      			eor	#$0F
 1067    13:DFDA  99 28 22   			sta	joynow, y
 1068    13:DFDD  80 C8      			bra	.next_port
 1069                        	
 1070    13:DFDF  AD 00 10   	.mouse_x_lo:	lda	IO_PORT			; Read direction-pad bits.
 1071    13:DFE2  9C 00 10   			stz	IO_PORT			; CLR lo, SEL lo for buttons.
 1072    13:DFE5  29 0F      			and	#$0F			; Wait 1.25us (9 cycles).
 1073    13:DFE7  19 E2 22   			ora	mouse_x, y		; Add port's X-hi nibble.
 1074                        	;		eor	#$FF			; Negate so LEFT is -ve.
 1075                        	;		inc	a
 1076    13:DFEA  99 E2 22   			sta	mouse_x, y
 1077    13:DFED  80 B8      			bra	.next_port
 1078                        	
 1079    13:DFEF  DF DF      	.mouse_vectors: dw	.mouse_x_lo		; Pass 2
 1080    13:DFF1  C1 DF      			dw	.mouse_x_hi		; Pass 1
 1081                        	
 1082               0001     		.if	(* >= $4000)			; This is a ".proc" if it is
 1083                        			.endp                           ; not running in RAM.
 1084               22D0     			.bss				; Put the variables in RAM.
 1085                        		.endif
 1086                        	
 1087    F8:22D0             	port_mutex:	ds	1			; NZ when controller port busy.
 1088    F8:22D1             	num_ports:	ds	1			; Set to 1 if no multitap.
 1089    F8:22D2             	mouse_flg:	ds	1			; Which ports are mice?
 1090               0000     		.if	HUC_JOY_EVENTS
 1093                        		.endif
 1094    F8:22D3             	joy6now:	ds	MAX_PADS
 1095    F8:22D8             	joy6old:	ds	MAX_PADS
 1096    F8:22DD             	joy6trg:	ds	MAX_PADS
 1097    F8:22E2             	mouse_x:	ds	MAX_PADS
 1098                        	
 1099               E188     			.code
 1100                        	
 1101                        		.endif	SUPPORT_6BUTTON			; Without mouse!
 1102                        	
 1103                        		.endif	SUPPORT_MOUSE
                             #[5]   "..\..\..\include\hucc\core-kernel.asm"
  453                        	
  454                        	
  455                        	
  456               0001     		.if	!CDROM
  457                        	
  458                        	; ***************************************************************************
  459                        	; ***************************************************************************
  460                        	;
  461                        	; core_sw_reset - Default HuCARD handler for a joypad "soft-reset".
  462                        	;
  463                        	
  464    00:E188  78         	core_sw_reset:	sei				; Disable interrupts.
  465                        	
  466    00:E189  6C FE FF   			jmp	[$FFFE]			; Jump to the HuCARD reset.
  467                        	
  468                        	
  469                        	
  470                        		.else	!CDROM
  616                        		.endif	!CDROM
  617                        	
  618                        	
  619                        	
  620                        	; ***************************************************************************
  621                        	; ***************************************************************************
  622                        	
  623               0001     		.if	(core_kernel >= $4000)		; If not running in RAM, then
  624               22E7     			.bss				; put these variables in RAM.
  625                        		.endif
  626                        	
  627    F8:22E7             	sound_mutex:	ds	1			; NZ when controller port busy.
  628                        	
  629               0001     		.if	SUPPORT_SGX
  630    F8:22E8             	sgx_detected:	ds	1			; NZ if SuperGrafx detected.
  631    F8:22E9             	hsync_hook_sgx:	ds	2			; SGX version of hsync_hook.
  632                        		.endif
  633                        	
  634               0000     		.if	SUPPORT_ACD
  636                        		.endif
  637                        	
  638               0001     		.if	(core_kernel >= $4000)
  639               E18C     			.code
  640                        		.endif
                             #[4]   "..\..\..\include\hucc\core-startup.asm"
  427                        	
  428                        	
  429                        	
  430                        		.else	!CDROM
  524                        		.endif	!CDROM
  525                        	
  526                        	
  527                        	
  528                        	; ***************************************************************************
  529                        	; ***************************************************************************
  530                        	;
  531                        	; With the availability of so many different configuration options, we've now
  532                        	; built somewhere between a few hundred bytes, and a couple of KB, of code in
  533                        	; the CORE_BANK of the HuCARD / overlay program.
  534                        	;
  535                        	; This is the end of the "CORE(not TM)" library code!
  536                        	;
  537                        	; Remember that the ".proc" trampolines are located at the end of this bank,
  538                        	; so the amount of free space left depends upon the number of ".proc" calls.
  539                        	;
  540                        	
  541                        			; Switch to CORE_PAGE to run the developer's game code.
  542               E18C     			.page	CORE_PAGE
  543                        	
  544                        	
  545                        	
  546                        	; ***************************************************************************
  547                        	; ***************************************************************************
  548                        	;
  549                        	; The DATA_BANK location needs to be set as early as possible so that library
  550                        	; code is able to put data in there before the total overall size of the code
  551                        	; is known.
  552                        	;
  553                        	; By default, DATA_BANK is the next bank after the CORE_BANK.
  554                        	;
  555                        	; RESERVE_BANKS allows developers to reserve some banks between the CORE_BANK
  556                        	; and the DATA_BANK that they can use however they wish.
  557                        	;
  558                        	; One use for RESERVE_BANKS is to create empty space that PCEAS can use when
  559                        	; it relocates procedures. This provides a way for a developer to group code
  560                        	; together at the start of memory, and leave the maximum number of banks for
  561                        	; loading dynamic data from CD-ROM.
  562                        	;
  563                        	; The KickC environment sets RESERVE_BANKS=1 (or higher) so that there is a
  564                        	; a bank for the permanent C code and static constants.
  565                        	;
  566                        	; RESERVE_BANKS is normally defined in each project's "core-config.inc".
  567                        	;
  568                        	
  569                        			.opt	d+			; DATA labels use fixed MPR.
  570                        	
  571               0001     			.rsset	CORE_BANK + 1
  572                        	
  573               0000     		.ifdef	NEED_HOME_BANK
  580                        		.endif
  581                        	
  582               0001     		.ifdef	NEED_SOUND_BANK			; Defined in hucc-sound.inc
  583               0000     		.if	NEED_SOUND_BANK			; if the driver wants a bank.
  585                        		.endif
  586                        		.endif
  587                        	
  588               0001     		.ifdef	RESERVE_BANKS			; For CORE projects.
  589               0001     	RESERVED_BANK	.rs	RESERVE_BANKS
  590                        		.endif
  591                        	
  592               0001     		.ifdef	HUCC
  593               0001     		.ifdef	HUC_RESERVE_BANKS		; For HuCC projects.
  594               0001     	HUC_USER_BANK	.rs	HUC_RESERVE_BANKS
  595                        		.endif
  596                        	
  597               0001     	CONST_BANK	.rs	2
  598               6000     			.rodata
  599               0001     			.bank	CONST_BANK, ".rodata"
  600                        		.endif	HUCC
  601                        	
  602               0003     	DATA_BANK	.rs	0
  603               6000     			.data
  604               0000     		.if	BUILDING_STAGE1
  606                        		.else
  607               0003     			.bank	DATA_BANK, ".data"
  608                        		.endif
  609               6000     			.org	$6000
  610                        	
  611               E18C     			.code
                             #[3]   "..\..\..\include\hucc\core.inc"
                             #[2]   "..\..\..\include\hucc\hucc.asm"
  120                        		.else
  126                        		.endif
  127                        	
  128                        			; Allocate this as early as possible to ensure bank-aligned
  129                        			; so that there is no wasted space for aligning the table.
  130                        	
  131               0000     		.if	FAST_MULTIPLY
  138                        		.endif
  139                        	
  140                        			;
  141                        	
  144                        	
  145                        			; The hardware stack is used for expressions.
  146                        	
  147               00FF     	__tos		=	$F8:2101, 255
  148                        	
  149               2008     			.zp
  150               2008     			.align	2
  151    F8:2008             	__stack:	ds	HUCC_STACK_SZ
  152                        	
  153    F8:2088             	__ptr:		ds	2
  154    F8:208A             	__fptr:		ds	2
  155    F8:208C             	__fbank:	ds	1
  156    F8:208D             	__sp:		ds	1
  157                        	
  158                        			; REGTEMP 6-byte stack for temporaries used by SDCC.
  159                        			; Keep the size in sync with NUM_TEMP_REGS in sdcc/src/mos6502/gen.h!
  160                        	
  161    F8:208E             	REGTEMP:	ds	6
  162                        	
  163                        			; HuCC's non-recursive consecutive varargs for printf().
  164                        	
  165               2008     	__vararg1	=	__stack + 0
  166               200A     	__vararg2	=	__stack + 2
  167               200C     	__vararg3	=	__stack + 4
  168               200E     	__vararg4	=	__stack + 6
  169                        	
  170                        			; Pointer used by poke() because __ptr could be overwritten.
  171                        	
  172               20EE     	__poke		=	__si
  173                        	
  174                        			; Used for indirect calls because __ptr could be overwritten.
  175                        	
  176               20EE     	__func		=	__si
  177                        	
  178                        			; Data pointer used by SDCC for indirect indexed memory access.
  179                        	
  180               2088     	DPTR		=	__ptr
  181                        	
  182                        			; Values returned from SDCC functions that don't fit into XA.
  183                        			; These are also used as workspace for SDCC library functions,
  184                        			; including HuCC's multiplication and division functions.
  185                        	
  186    F8:2094             	___SDCC_m6502_ret0:	ds	1
  187    F8:2095             	___SDCC_m6502_ret1:	ds	1
  188    F8:2096             	___SDCC_m6502_ret2:	ds	1
  189    F8:2097             	___SDCC_m6502_ret3:	ds	1
  190                        	
  191               0000     		.if	0
  196                        		.endif
  197                        	
  198                        			; Permanent pointers for fast table-of-squares multiplication.
  199                        	
  200               0000     		.if	FAST_MULTIPLY
  205                        		.endif
  206                        	
  207                        			; HuCC keeps a realtime clock, updated in hucc_vbl.
  208                        			;
  209                        			; Defining this here means that it will go before any HuCC
  210                        			; variables in "globals.h", and so it won't get cleared in
  211                        			; a CDROM game when loading different overlays.
  212                        	
  213               22EB     			.bss
  214    F8:22EB             	old_cnt:	ds	1			; irq_cnt of previous vsync().
  215    F8:22EC             	clock_hh:	ds	1			; System Clock, hours	(0-11)
  216    F8:22ED             	clock_mm:	ds	1			; System Clock, minutes (0-59)
  217    F8:22EE             	clock_ss:	ds	1			; System Clock, seconds (0-59)
  218    F8:22EF             	clock_tt:	ds	1			; System Clock, ticks	(0-59)
  219               E18C     			.code
  220                        	
  221                        			; Critical HuCC libraries that the compiler depends upon.
  222                        			;
  223                        			; These include various macros that must be defined before
  224                        			; they are encountered in any compiler-generated code.
  225                        	
                             #[3]   "..\..\..\include\hucc\hucc-codegen.asm"
  226                        			include "hucc-codegen.asm"	; HuCC i-code macros and funcs.
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-codegen.asm
    5                        	;
    6                        	; The HuCC compiler translates C code into these macros, it does not directly
    7                        	; generate HuC6280 instructions.
    8                        	;
    9                        	; Based on the original HuC macros created by David Michel and the other HuC
   10                        	; developers, later modified and improved by Ulrich Hecht.
   11                        	;
   12                        	; Modifications copyright John Brandwood 2024.
   13                        	;
   14                        	; Distributed under the Boost Software License, Version 1.0.
   15                        	; (See accompanying file LICENSE_1_0.txt or copy at
   16                        	;  http://www.boost.org/LICENSE_1_0.txt)
   17                        	;
   18                        	; ***************************************************************************
   19                        	; ***************************************************************************
   20                        	;
   21                        	; NAMING SCHEME FOR HuCC MACROS ...
   22                        	;
   23                        	;   __function.parameters
   24                        	;
   25                        	; {parameters} is a list of alphanumeric specifiers, starting with {size} and
   26                        	; followed by {where}, followed by {index} if an array, then optional {value}
   27                        	; and finally ending with optional {suffix}
   28                        	;
   29                        	; {size}
   30                        	;   w : 16-bit signed int (default "int" in HuCC)
   31                        	;   c : 16-bit unsigned int (a "cardinal" in Pascal terms)
   32                        	;   b :  8-bit signed char
   33                        	;   u :  8-bit unsigned char (default "char" in HuCC)
   34                        	;
   35                        	; {where} or {index}
   36                        	;   r : HuCC primary register, made up of the Y:A cpu registers
   37                        	;   t : top of expression stack
   38                        	;   p : indirect pointer, usually [__ptr]
   39                        	;   f : structure field (member) offset value
   40                        	;   i : immediate value, i.e. a decimal number
   41                        	;   m : memory, i.e. C global, static, and "-fno-recursive" variables
   42                        	;   s : stack, i.e. C function parameters and locals (not "-fno-recursive")
   43                        	;   a : array, i.e. C global, static, "-fno-recursive" arrays <= 256 bytes
   44                        	;   x : array index already in the X register
   45                        	;   y : array index already in the Y register
   46                        	;
   47                        	; {value} OPTIONAL
   48                        	;   i : immediate value, i.e. a decimal number
   49                        	;   z : zero value
   50                        	;
   51                        	; {suffix} OPTIONAL
   52                        	;   q : quick, used for optimized math on only 8-bit values, because all math
   53                        	;       is normally promoted to "int" size in C; and when optimized stores do
   54                        	;       not need to preserve the primary register contents
   55                        	;
   56                        	; ***************************************************************************
   57                        	; ***************************************************************************
   58                        	
   59                        	
   60                        	
 8399                        	
 8400                        	; ***************************************************************************
 8401                        	; ***************************************************************************
 8402                        	; subroutines for logical and arithmetic shifts by a constant amount
 8403                        	; ***************************************************************************
 8404                        	; ***************************************************************************
 8405                        	
 8406                        	; **************
 8407                        	; Y:A = Y:A << const
 8408                        	
 8409    00:E1BE  0A         	aslw15:		asl	a
 8410    00:E1BF  0A         	aslw14:		asl	a
 8411    00:E1C0  0A         	aslw13:		asl	a
 8412    00:E1C1  0A         	aslw12:		asl	a
 8413    00:E1C2  0A         	aslw11:		asl	a
 8414    00:E1C3  0A         	aslw10:		asl	a
 8415    00:E1C4  0A         	aslw9:		asl	a
 8416    00:E1C5  A8         	aslw8:		tay
 8417    00:E1C6  62         			cla
 8418    00:E1C7  60         			rts
 8419                        	
 8420               0001     		.if	1
 8421    00:E1C8  66 00      	aslw5:		ror	<__temp
 8422    00:E1CA  6A         			ror	a
 8423    00:E1CB  66 00      	aslw6:		ror	<__temp
 8424    00:E1CD  6A         			ror	a
 8425    00:E1CE  66 00      	aslw7:		ror	<__temp
 8426    00:E1D0  6A         			ror	a
 8427    00:E1D1  A4 00      			ldy	<__temp
 8428    00:E1D3  60         			rts
 8429                        		.else
 8436                        		.endif
 8437    00:E1D4  0A         	aslw4:		asl	a
 8438    00:E1D5  26 00      			rol	<__temp
 8439    00:E1D7  0A         	aslw3:		asl	a
 8440    00:E1D8  26 00      			rol	<__temp
 8441    00:E1DA  0A         	aslw2:		asl	a
 8442    00:E1DB  26 00      			rol	<__temp
 8443    00:E1DD  0A         	aslw1:		asl	a
 8444    00:E1DE  26 00      			rol	<__temp
 8445    00:E1E0  A4 00      	aslw0:		ldy	<__temp
 8446    00:E1E2  60         			rts
 8447                        	
 8448                        	; **************
 8449                        	; Y:A = Y:A >> const
 8450                        	
 8451    00:E1E3  C9 80      	asrw15:		cmp	#$80
 8452    00:E1E5  6A         			ror	a
 8453    00:E1E6  C9 80      	asrw14:		cmp	#$80
 8454    00:E1E8  6A         			ror	a
 8455    00:E1E9  C9 80      	asrw13:		cmp	#$80
 8456    00:E1EB  6A         			ror	a
 8457    00:E1EC  C9 80      	asrw12:		cmp	#$80
 8458    00:E1EE  6A         			ror	a
 8459    00:E1EF  C9 80      	asrw11:		cmp	#$80
 8460    00:E1F1  6A         			ror	a
 8461    00:E1F2  C9 80      	asrw10:		cmp	#$80
 8462    00:E1F4  6A         			ror	a
 8463    00:E1F5  C9 80      	asrw9:		cmp	#$80
 8464    00:E1F7  6A         			ror	a
 8465    00:E1F8  C9 80      	asrw8:		cmp	#$80
 8466    00:E1FA  C2         			cly
 8467    00:E1FB  90 01      			bcc	!+
 8468    00:E1FD  88         			dey
 8469    00:E1FE  60         	!:		rts
 8470                        	
 8471    00:E1FF  C0 80      	asrw7:		cpy	#$80
 8472    00:E201  66 00      			ror	<__temp
 8473    00:E203  6A         			ror	a
 8474    00:E204  C0 80      	asrw6:		cpy	#$80
 8475    00:E206  66 00      			ror	<__temp
 8476    00:E208  6A         			ror	a
 8477    00:E209  C0 80      	asrw5:		cpy	#$80
 8478    00:E20B  66 00      			ror	<__temp
 8479    00:E20D  6A         			ror	a
 8480    00:E20E  C0 80      	asrw4:		cpy	#$80
 8481    00:E210  66 00      			ror	<__temp
 8482    00:E212  6A         			ror	a
 8483    00:E213  C0 80      	asrw3:		cpy	#$80
 8484    00:E215  66 00      			ror	<__temp
 8485    00:E217  6A         			ror	a
 8486    00:E218  C0 80      	asrw2:		cpy	#$80
 8487    00:E21A  66 00      			ror	<__temp
 8488    00:E21C  6A         			ror	a
 8489    00:E21D  C0 80      	asrw1:		cpy	#$80
 8490    00:E21F  66 00      			ror	<__temp
 8491    00:E221  6A         			ror	a
 8492    00:E222  A4 00      	asrw0:		ldy	<__temp
 8493    00:E224  60         			rts
 8494                        	
 8495                        	; **************
 8496                        	; Y:A = Y:A >> const
 8497                        	
 8498    00:E225  4A         	lsrw15:		lsr	a
 8499    00:E226  4A         	lsrw14:		lsr	a
 8500    00:E227  4A         	lsrw13:		lsr	a
 8501    00:E228  4A         	lsrw12:		lsr	a
 8502    00:E229  4A         	lsrw11:		lsr	a
 8503    00:E22A  4A         	lsrw10:		lsr	a
 8504    00:E22B  4A         	lsrw9:		lsr	a
 8505    00:E22C  C2         	lsrw8:		cly
 8506    00:E22D  60         			rts
 8507                        	
 8508    00:E22E  46 00      	lsrw7:		lsr	<__temp
 8509    00:E230  6A         			ror	a
 8510    00:E231  46 00      	lsrw6:		lsr	<__temp
 8511    00:E233  6A         			ror	a
 8512    00:E234  46 00      	lsrw5:		lsr	<__temp
 8513    00:E236  6A         			ror	a
 8514    00:E237  46 00      	lsrw4:		lsr	<__temp
 8515    00:E239  6A         			ror	a
 8516    00:E23A  46 00      	lsrw3:		lsr	<__temp
 8517    00:E23C  6A         			ror	a
 8518    00:E23D  46 00      	lsrw2:		lsr	<__temp
 8519    00:E23F  6A         			ror	a
 8520    00:E240  46 00      	lsrw1:		lsr	<__temp
 8521    00:E242  6A         			ror	a
 8522    00:E243  A4 00      	lsrw0:		ldy	<__temp
 8523    00:E245  60         			rts
 8524                        	
 8525                        	
 8526                        	
 8527                        	; ***************************************************************************
 8528                        	; ***************************************************************************
 8529                        	; subroutines for logical and arithmetic shifts by a variable amount
 8530                        	; ***************************************************************************
 8531                        	; ***************************************************************************
 8532                        	
 8533                        	; **************
 8534                        	; Y:A = Y:A << X
 8535                        	
 8536    00:E246  84 00      	asl.wx:		sty	<__temp
 8537    00:E248  E0 10      			cpx	#16
 8538    00:E24A  B0 37      			bcs	!zero+
 8539    00:E24C  CA         			dex
 8540    00:E24D  30 06      			bmi	.done
 8541    00:E24F  0A         	.loop:		asl	a
 8542    00:E250  26 00      			rol	<__temp
 8543    00:E252  CA         			dex
 8544    00:E253  10 FA      			bpl	.loop
 8545    00:E255  A4 00      	.done:		ldy	<__temp
 8546    00:E257  60         			rts
 8547                        	
 8548                        	; **************
 8549                        	; Y:A = Y:A >> X
 8550                        	
 8551    00:E258  84 00      	asr.wx:		sty	<__temp
 8552    00:E25A  10 17      			bpl	!positive+
 8553    00:E25C  E0 10      	!negative:	cpx	#16
 8554    00:E25E  B0 0D      			bcs	.sign
 8555    00:E260  CA         			dex
 8556    00:E261  30 07      			bmi	.done
 8557    00:E263  38         	.loop:		sec
 8558    00:E264  66 00      			ror	<__temp
 8559    00:E266  6A         			ror	a
 8560    00:E267  CA         			dex
 8561    00:E268  10 F9      			bpl	.loop
 8562    00:E26A  A4 00      	.done:		ldy	<__temp
 8563    00:E26C  60         			rts
 8564                        	
 8565    00:E26D  A9 FF      	.sign:		lda	#$FF
 8566    00:E26F  A8         			tay
 8567    00:E270  60         			rts
 8568                        	
 8569                        	; **************
 8570                        	; Y:A = Y:A >> X
 8571                        	
 8572    00:E271  84 00      	lsr.wx:		sty	<__temp
 8573    00:E273  E0 10      	!positive:	cpx	#16
 8574    00:E275  B0 0C      			bcs	!zero+
 8575    00:E277  CA         			dex
 8576    00:E278  30 06      			bmi	.done
 8577    00:E27A  46 00      	.loop:		lsr	<__temp
 8578    00:E27C  6A         			ror	a
 8579    00:E27D  CA         			dex
 8580    00:E27E  10 FA      			bpl	.loop
 8581    00:E280  A4 00      	.done:		ldy	<__temp
 8582    00:E282  60         			rts
 8583                        	
 8584    00:E283  62         	!zero:		cla
 8585    00:E284  C2         			cly
 8586    00:E285  60         			rts
 8587                        	
 8588                        	
 8589                        	
 8590                        	; ***************************************************************************
 8591                        	; ***************************************************************************
 8592                        	; POTENTIAL OPTIMIZATIONS, NOT YET ADDED
 8593                        	; ***************************************************************************
 8594                        	; ***************************************************************************
                             #[2]   "..\..\..\include\hucc\hucc.asm"
                             #[3]   "..\..\..\include\hucc\hucc-baselib.asm"
  227                        			include	"hucc-baselib.asm"	; HuCC base library macros.
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-baselib.asm
    5                        	;
    6                        	; Basic library functions provided (mostly) as macros.
    7                        	;
    8                        	; Copyright John Brandwood 2024-2025.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	
   17                        	
   18                        	
   19                        	; ***************************************************************************
   20                        	; ***************************************************************************
   21                        	;
   22                        	; Make certain System Card variables accessible to HuCC.
   23                        	
   24    00:E286             	_irq_cnt	.alias	irq_cnt
   25    00:E286             	_joynow		.alias	joynow
   26    00:E286             	_joytrg		.alias	joytrg
   27    00:E286             	_joy6now	.alias	joy6now
   28    00:E286             	_joy6trg	.alias	joy6trg
   29    00:E286             	_bg_x1		.alias	bg_x1
   30    00:E286             	_bg_y1		.alias	bg_y1
   31    00:E286             	_bg_x2		.alias	bg_x2
   32    00:E286             	_bg_y2		.alias	bg_y2
   33                        	
   34                        	
   35                        	
   36                        	; ***************************************************************************
   37                        	; ***************************************************************************
   38                        	;
   39                        	; void __fastcall dump_screen( void );
   40                        	;
   41                        	; THIS IS AN ILLEGAL INSTRUCTION ONLY IMPLEMENTED BY THE TGEMU EMULATOR!
   42                        	
   43    00:E286  33         	_dump_screen:	db	0x33
   44                        	
   45                        	
   46                        	
   47                        	; ***************************************************************************
   48                        	; ***************************************************************************
   49                        	;
   50                        	; void __fastcall abort( void );
   51                        	;
   52                        	; THIS IS AN ILLEGAL INSTRUCTION ONLY IMPLEMENTED BY THE TGEMU EMULATOR!
   53                        	
   54    00:E287  E2         	_abort:		db	0xE2
   55                        	
   56                        	
   57                        	
   58                        	; ***************************************************************************
   59                        	; ***************************************************************************
   60                        	;
   61                        	; void __fastcall exit( int value<acc> );
   62                        	;
   63                        	; THIS IS AN ILLEGAL INSTRUCTION ONLY IMPLEMENTED BY THE TGEMU EMULATOR!
   64                        	
   65    00:E288  AA         	_exit.1:	tax				; Put the return code into X.
   66    00:E289  63         			db	0x63
   67                        	
   68    00:E28A  80 FE      	.hang:		bra	.hang			; Hang if used in normal code.
   69                        	
   70                        	
   71                        	
   72                        	; ***************************************************************************
   73                        	; ***************************************************************************
   74                        	;
   75                        	; unsigned char __fastcall __macro cd_execoverlay( unsigned char ovl_index<acc> );
   76                        	;
   77                        	; Execute program overlay from disc
   78                        	;
   79                        	; N.B. This does not return, even if there's an error.
   80                        	
   81                        			.macro	_cd_execoverlay.1
   82                        			tax
   83                        			jmp	exec_overlay
   84                        			.endm
   85                        	
   86                        	
   87                        	
   88                        	; ***************************************************************************
   89                        	; ***************************************************************************
   90                        	;
   91                        	; void __fastcall __nop set_far_base( unsigned char data_bank<_bp_bank>, unsigned char *data_addr<_bp> );
   92                        	; void __fastcall set_far_offset( unsigned int offset<_bp>, unsigned char data_bank<_bp_bank>, unsigned char *data_addr<acc> );
   93                        	
   94    00:E28C             	_set_far_offset.3:
   95    00:E28C  18         			clc
   96    00:E28D  65 EC      			adc.l	<_bp
   97    00:E28F  85 EC      			sta.l	<_bp
   98    00:E291  98         			tya
   99    00:E292  29 1F      			and	#$1F
  100    00:E294  65 ED      			adc.h	<_bp
  101    00:E296  A8         			tay
  102    00:E297  29 1F      			and	#$1F
  103    00:E299  09 60      			ora	#$60
  104    00:E29B  85 ED      			sta.h	<_bp
  105    00:E29D  98         			tya
  106    00:E29E  6A         			ror	a
  107    00:E29F  4A         			lsr	a
  108    00:E2A0  4A         			lsr	a
  109    00:E2A1  4A         			lsr	a
  110    00:E2A2  4A         			lsr	a
  111    00:E2A3  18         			clc
  112    00:E2A4  65 02      			adc	<_bp_bank
  113    00:E2A6  85 02      			sta	<_bp_bank
  114    00:E2A8  60         			rts
  115                        	
  116                        	
  117                        	; ***************************************************************************
  118                        	; ***************************************************************************
  119                        	;
  120                        	; void __fastcall __macro reset_mpr2( void );
  121                        	; void __fastcall __macro reset_mpr34( void );
  122                        	;
  123                        	; void * __fastcall __macro set_mpr2( void __far *addr<_bp_bank:_bp> );
  124                        	; void * __fastcall __macro set_mpr34( void __far *addr<_bp_bank:_bp> );
  125                        	;
  126                        	; void * __fastcall __macro far_set_mpr2( void );
  127                        	; void * __fastcall __macro far_set_mpr34( void );
  128                        	
  129                        	_reset_mpr2	.macro
  130                        		.if	SUPPORT_SGX
  131                        			lda	#$F9
  132                        		.else
  133                        			lda	#$87
  134                        		.endif
  135                        			tam2
  136                        			.endm
  137                        	
  138                        	_reset_mpr34	.macro
  139                        			lda	#CONST_BANK + _bank_base
  140                        			tam3
  141                        			inc	a
  142                        			tam4
  143                        			.endm
  144                        	
  145                        	_farset_mpr2.1	.macro
  146                        			lda	<_bp_bank
  147                        			tam2
  148                        			lda.l	<_bp
  149                        			ldy.h	<_bp
  150                        			.endm
  151                        	
  152                        	_farset_mpr34.1	.macro
  153                        			lda	<_bp_bank
  154                        			tam3
  155                        			inc	a
  156                        			tam4
  157                        			lda.l	<_bp
  158                        			ldy.h	<_bp
  159                        			.endm
  160                        	
  161                        	_far_set_mpr2	.macro
  162                        			lda	<_bp_bank
  163                        			tam2
  164                        			lda.l	<_bp
  165                        			ldy.h	<_bp
  166                        			.endm
  167                        	
  168                        	_far_set_mpr34	.macro
  169                        			lda	<_bp_bank
  170                        			tam3
  171                        			inc	a
  172                        			tam4
  173                        			lda.l	<_bp
  174                        			ldy.h	<_bp
  175                        			.endm
  176                        	
  177                        	
  178                        	
  179                        	; ***************************************************************************
  180                        	; ***************************************************************************
  181                        	;
  182                        	; unsigned char __fastcall __macro ac_exists( void );
  183                        	
  184                        	_ac_exists	.macro
  185                        			cla
  186                        			ldy	ACD_FLAG
  187                        			cpy	#ACD_ID
  188                        			bne	!+
  189                        			inc	a
  190                        	!:		cly
  191                        			.endm
  192                        	
  193                        	
  194                        	
  195                        	; ***************************************************************************
  196                        	; ***************************************************************************
  197                        	;
  198                        	; unsigned char __fastcall __macro _sgx_detect( void );
  199                        	
  200                        	_sgx_detect	.macro
  201                        			lda	sgx_detected
  202                        			cly
  203                        			.endm
  204                        	
  205                        	
  206                        	
  207                        	; ***************************************************************************
  208                        	; ***************************************************************************
  209                        	;
  210                        	; unsigned int __fastcall __macro peek( unsigned int addr<__ptr> );
  211                        	
  212                        	_peek.1		.macro
  213                        			lda	[__ptr]
  214                        			cly
  215                        			.endm
  216                        	
  217                        	
  218                        	
  219                        	; ***************************************************************************
  220                        	; ***************************************************************************
  221                        	;
  222                        	; unsigned int __fastcall __macro peekw( unsigned int addr<__ptr> );
  223                        	
  224                        	_peekw.1	.macro
  225                        			lda	[__ptr]
  226                        			pha
  227                        			ldy	#1
  228                        			lda	[__ptr], y
  229                        			tay
  230                        			pla
  231                        			.endm
  232                        	
  233                        	
  234                        	
  235                        	; ***************************************************************************
  236                        	; ***************************************************************************
  237                        	;
  238                        	; void __fastcall __macro poke( unsigned int addr<__poke>, unsigned char with<acc> );
  239                        	;
  240                        	; N.B. Because the <acc> value can be a complex C calculation, it isn't safe
  241                        	; to use __ptr as the destination, which can be overwritten in C macros.
  242                        	
  243                        	_poke.2		.macro
  244                        			sta	[__poke]
  245                        			.endm
  246                        	
  247                        	
  248                        	
  249                        	; ***************************************************************************
  250                        	; ***************************************************************************
  251                        	;
  252                        	; void __fastcall __macro pokew( unsigned int addr<__poke>, unsigned int with<acc> );
  253                        	;
  254                        	; N.B. Because the <acc> value can be a complex C calculation, it isn't safe
  255                        	; to use __ptr as the destination, which can be overwritten in C macros.
  256                        	
  257                        	_pokew.2	.macro
  258                        			sta	[__poke]
  259                        			tya
  260                        			ldy	#1
  261                        			sta	[__poke], y
  262                        			.endm
  263                        	
  264                        	
  265                        	
  266                        	; ***************************************************************************
  267                        	; ***************************************************************************
  268                        	;
  269                        	; unsigned char __fastcall __macro clock_hh( void );
  270                        	
  271                        	_clock_hh	.macro
  272                        			lda	clock_hh
  273                        			cly
  274                        			.endm
  275                        	
  276                        	
  277                        	
  278                        	; ***************************************************************************
  279                        	; ***************************************************************************
  280                        	;
  281                        	; unsigned char __fastcall __macro clock_mm( void );
  282                        	
  283                        	_clock_mm	.macro
  284                        			lda	clock_mm
  285                        			cly
  286                        			.endm
  287                        	
  288                        	
  289                        	
  290                        	; ***************************************************************************
  291                        	; ***************************************************************************
  292                        	;
  293                        	; unsigned char __fastcall __macro clock_ss( void );
  294                        	
  295                        	_clock_ss	.macro
  296                        			lda	clock_ss
  297                        			cly
  298                        			.endm
  299                        	
  300                        	
  301                        	
  302                        	; ***************************************************************************
  303                        	; ***************************************************************************
  304                        	;
  305                        	; unsigned char __fastcall __macro clock_tt( void );
  306                        	
  307                        	_clock_tt	.macro
  308                        			lda	clock_tt
  309                        			cly
  310                        			.endm
  311                        	
  312                        	
  313                        	
  314                        	; ***************************************************************************
  315                        	; ***************************************************************************
  316                        	;
  317                        	; void __fastcall __macro clock_reset( void );
  318                        	
  319                        	_clock_reset	.macro
  320                        			stz	clock_hh
  321                        			stz	clock_mm
  322                        			stz	clock_ss
  323                        			stz	clock_tt
  324                        			.endm
  325                        	
  326                        	
  327                        	
  328                        	; ***************************************************************************
  329                        	; ***************************************************************************
  330                        	;
  331                        	; unsigned int __fastcall __macro joy( unsigned char which<acc> );
  332                        	
  333                        	_joy.1		.macro
  334                        			tax
  335                        			lda	joynow, x
  336                        		.if	SUPPORT_6BUTTON
  337                        			ldy	joy6now, x
  338                        		.else
  339                        			cly
  340                        		.endif
  341                        			.endm
  342                        	
  343                        	
  344                        	
  345                        	; ***************************************************************************
  346                        	; ***************************************************************************
  347                        	;
  348                        	; unsigned int __fastcall __macro joytrg( unsigned char which<acc> );
  349                        	
  350                        	_joytrg.1	.macro
  351                        			tax
  352                        			lda	joytrg, x
  353                        		.if	SUPPORT_6BUTTON
  354                        			ldy	joy6trg, x
  355                        		.else
  356                        			cly
  357                        		.endif
  358                        			.endm
  359                        	
  360                        	
  361                        	
  362                        	; ***************************************************************************
  363                        	; ***************************************************************************
  364                        	;
  365                        	; unsigned int __fastcall __macro joybuf( unsigned char which<acc> );
  366                        	
  367                        	_joybuf.1	.macro
  368                        		.if	HUC_JOY_EVENTS
  369                        			tax
  370                        			lda	joybuf, x
  371                        		.if	SUPPORT_6BUTTON
  372                        			ldy	joy6buf, x
  373                        		.else
  374                        			cly
  375                        		.endif
  376                        		.else
  377                        			.fail	You must enable HUC_JOY_EVENTS in your hucc-config.inc!
  378                        		.endif
  379                        			.endm
  380                        	
  381                        	
  382                        	
  383                        	; ***************************************************************************
  384                        	; ***************************************************************************
  385                        	;
  386                        	; unsigned int __fastcall __macro get_joy_events( unsigned char which<acc> );
  387                        	;
  388                        	; N.B. This is just a version of joybuf() that clears the accumulated events.
  389                        	
  390                        			.macro	_get_joy_events.1
  391                        		.if	HUC_JOY_EVENTS
  392                        			tax
  393                        			lda	joybuf, x
  394                        			stz	joybuf, x
  395                        		.if	SUPPORT_6BUTTON
  396                        			ldy	joy6buf, x
  397                        			stz	joy6buf, x
  398                        		.else
  399                        			cly
  400                        		.endif
  401                        		.else
  402                        		.if	ACCUMULATE_JOY
  403                        			tax
  404                        			lda	joytrg, x
  405                        			stz	joytrg, x
  406                        		.if	SUPPORT_6BUTTON
  407                        			ldy	joy6trg, x
  408                        			stz	joy6trg, x
  409                        		.else
  410                        			cly
  411                        		.endif
  412                        		.else
  413                        			.fail	You must enable HUC_JOY_EVENTS or ACCUMULATE_JOY in your hucc-config.inc!
  414                        		.endif
  415                        		.endif
  416                        			.endm
  417                        	
  418                        	
  419                        	
  420                        	; ***************************************************************************
  421                        	; ***************************************************************************
  422                        	;
  423                        	; void __fastcall __macro clear_joy_events( unsigned char mask<acc> );
  424                        	
  425                        			.macro	_clear_joy_events.1
  426                        			php
  427                        			sei
  428                        			and	#(1 << MAX_PADS) - 1
  429                        			ldx	#$FF
  430                        	.loop:		inx
  431                        			lsr	a
  432                        			bcc	.next
  433                        		.if	HUC_JOY_EVENTS
  434                        			stz	joybuf, x
  435                        		.if	SUPPORT_6BUTTON
  436                        			stz	joy6buf, x
  437                        		.endif
  438                        		.else
  439                        		.if	ACCUMULATE_JOY
  440                        			stz	joytrg, x
  441                        		.if	SUPPORT_6BUTTON
  442                        			stz	joy6trg, x
  443                        		.endif
  444                        		.else
  445                        			.fail	You must enable HUC_JOY_EVENTS or ACCUMULATE_JOY in your hucc-config.inc!
  446                        		.endif
  447                        		.endif
  448                        	.next:		bne	.loop
  449                        			plp
  450                        			.endm
  451                        	
  452                        	
  453                        	
  454                        	; ***************************************************************************
  455                        	; ***************************************************************************
  456                        	;
  457                        	; void __fastcall srand( unsigned char seed<acc> );
  458                        	
  459               0001     		.ifndef	HUCC_NO_DEFAULT_RANDOM
  460                        	_srand.1	.macro
  461                        			tay
  462                        			jsr	init_random
  463                        			.endm
  464                        		.endif
  465                        	
  466                        	
  467                        	
  468                        	; ***************************************************************************
  469                        	; ***************************************************************************
  470                        	;
  471                        	; unsigned int __fastcall rand( void );
  472                        	; unsigned char __fastcall rand8( void );
  473                        	
  474               0001     		.ifndef	HUCC_NO_DEFAULT_RANDOM
  475    00:E2A9  20 C3 E5   	_rand:		jsr	get_random		; Random in A, preserve Y.
  476    00:E2AC  A8         			tay
  477    00:E2AD  4C C3 E5   			jmp	get_random		; Random in A, preserve Y.
  478                        		.endif
  479                        	
  480                        	
  481                        	
  482                        	; ***************************************************************************
  483                        	; ***************************************************************************
  484                        	;
  485                        	; unsigned char __fastcall random8( unsigned char limit<acc> );
  486                        	;
  487                        	; IN :	A = range (0..255)
  488                        	; OUT : A = random number interval 0 <= x < A
  489                        	
  490               0001     		.ifndef	HUCC_NO_DEFAULT_RANDOM
  491                        	
  492    00:E2B0  A8         	_random8.1:	tay				; Preserve the limit.
  493    00:E2B1  20 C3 E5   			jsr	get_random		; Random in A, preserve Y.
  494                        	
  495    00:E2B4  20 F0 E4   			jsr	__muluchar
  496    00:E2B7  98         			tya				; Do a 8.0 x 0.8 fixed point
  497    00:E2B8  C2         			cly				; fractional multiply.
  498    00:E2B9  60         			rts
  499                        		.endif
  500                        	
  501                        	
  502                        	
  503                        	; ***************************************************************************
  504                        	; ***************************************************************************
  505                        	;
  506                        	; unsigned char __fastcall random( unsigned char limit<acc> );
  507                        	;
  508                        	; IN :	A = range (0..128), 129..255 is treated as 128
  509                        	; OUT : A = random number interval 0 <= x < A
  510                        	
  511               0001     		.ifndef	HUCC_NO_DEFAULT_RANDOM
  512                        	
  513    00:E2BA  A8         	_random.1:	tay				; Preserve the limit.
  514    00:E2BB  20 C3 E5   			jsr	get_random		; Random in A, preserve Y.
  515                        	
  516    00:E2BE  C0 80      			cpy	#128			; Check the limit.
  517    00:E2C0  90 04      			bcc	!+
  518                        	
  519    00:E2C2  29 7F      			and	#$7F			; Just mask the random if
  520    00:E2C4  C2         			cly				; the limit is >= 128.
  521    00:E2C5  60         			rts
  522                        	
  523    00:E2C6  20 F0 E4   	!:		jsr	__muluchar
  524    00:E2C9  98         			tya				; If the limit is < 128 then
  525    00:E2CA  C2         			cly				; do a 8.0 x 0.8 fixed point
  526    00:E2CB  60         			rts				; fractional multiply.
  527                        		.endif
  528                        	
  529                        	
  530                        	
  531                        	; ***************************************************************************
  532                        	; ***************************************************************************
  533                        	;
  534                        	; unsigned char __fastcall __builtin_ffs( unsigned int value<__temp> );
  535                        	
  536                        			.proc	___builtin_ffs.1
  556                        			.endp
  557                        	
  558                        	
  559                        	
  560                        	; ***************************************************************************
  561                        	; ***************************************************************************
  562                        	;
  563                        	; N.B. Declared in hucc-string.h, but defined here because they're macros!
  564                        	;
  565                        	; int __fastcall __macro memcmp( unsigned char *destination<_di>, unsigned char *source<_bp>, unsigned int count<acc> );
  566                        	
  567                        	_memcmp.3	.macro
  568                        			stz	<_bp_bank		; Map the source string.
  569                        			call	_farmemcmp.3
  570                        			.endm
  571                        	
  572                        	
  573                        	
  574                        	; ***************************************************************************
  575                        	; ***************************************************************************
  576                        	;
  577                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  578                        	;
  579                        	; void __fastcall __macro get_color( unsigned int index<VCE_CTA> );
  580                        	
  581                        	_get_color.1	.macro
  582                        			lda.l	VCE_CTR
  583                        			ldy.h	VCE_CTR
  584                        			.endm
  585                        	
  586                        	
  587                        	
  588                        	; ***************************************************************************
  589                        	; ***************************************************************************
  590                        	;
  591                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  592                        	;
  593                        	; void __fastcall __macro fade_to_black( unsigned int __far *from<_bp_bank:_bp>, unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_sub<_ah> );
  594                        	; void __fastcall __macro fade_to_white( unsigned int __far *from<_bp_bank:_bp>, unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_add<_ah> );
  595                        	; void __fastcall __macro cross_fade_to( unsigned int __far *from<_bp_bank:_bp>, unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char which_component<_ah );
  596                        	;
  597                        	; void __fastcall __macro far_fade_to_black( unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_sub<_ah> );
  598                        	; void __fastcall __macro far_fade_to_white( unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_add<_ah> );
  599                        	; void __fastcall __macro far_cross_fade_to( unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char which_component<_ah );
  600                        	
  601                        			.macro	_fade_to_black.4
  602                        			ldy	<_bp_bank
  603                        			call	fade_to_black
  604                        			.endm
  605                        	
  606                        			.macro	_fade_to_white.4
  607                        			ldy	<_bp_bank
  608                        			call	fade_to_white
  609                        			.endm
  610                        	
  611                        			.macro	_cross_fade_to.4
  612                        			ldy	<_bp_bank
  613                        			call	cross_fade_to
  614                        			.endm
  615                        	
  616                        			.macro	_far_fade_to_black.3
  617                        			ldy	<_bp_bank
  618                        			call	fade_to_black
  619                        			.endm
  620                        	
  621                        			.macro	_far_fade_to_white.3
  622                        			ldy	<_bp_bank
  623                        			call	fade_to_white
  624                        			.endm
  625                        	
  626                        			.macro	_far_cross_fade_to.3
  627                        			ldy	<_bp_bank
  628                        			call	cross_fade_to
  629                        			.endm
  630                        	
  631                        	
  632                        	
  633                        	; ***************************************************************************
  634                        	; ***************************************************************************
  635                        	;
  636                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  637                        	;
  638                        	; void __fastcall __macro set_xres( unsigned int x_pixels<_ax> );
  639                        	; void __fastcall __macro sgx_set_xres( unsigned int x_pixels<_ax> );
  640                        	;
  641                        	; void __fastcall set_xres( unsigned int x_pixels<_ax>, unsigned char blur_flag<_bl> );
  642                        	; void __fastcall sgx_set_xres( unsigned int x_pixels<_ax>, unsigned char blur_flag<_bl> );
  643                        	
  644                        	_set_xres.1	.macro
  645                        			lda	#XRES_SOFT
  646                        			sta	<_bl
  647                        			call	_set_xres.2
  648                        			.endm
  649                        	
  650               0001     		.if	SUPPORT_SGX
  651                        			.macro	_sgx_set_xres.1
  652                        			lda	#XRES_SOFT
  653                        			sta	<_bl
  654                        			call	_sgx_set_xres.2
  655                        			.endm
  656                        		.endif
  657                        	
  658                        	
  659                        	
  660                        	; ***************************************************************************
  661                        	; ***************************************************************************
  662                        	;
  663                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  664                        	;
  665                        	; unsigned int __fastcall __macro vram_addr( unsigned char bat_x<_al>, unsigned char bat_y<_ah> );
  666                        	; unsigned int __fastcall __macro sgx_vram_addr( unsigned char bat_x<_al>, unsigned char bat_y<_ah> );
  667                        	
  668                        			.macro	_vram_addr.2
  669                        			cla
  670                        			bit	vdc_bat_width
  671                        			bmi	!w128+
  672                        			bvs	!w64+
  673                        	!w32:		lsr	<_ah
  674                        			ror	a
  675                        	!w64:		lsr	<_ah
  676                        			ror	a
  677                        	!w128:		lsr	<_ah
  678                        			ror	a
  679                        			ora	<_al
  680                        			ldy	<_ah
  681                        			.endm
  682                        	
  683               0001     		.if	SUPPORT_SGX
  684                        			.macro	_sgx_vram_addr.2
  685                        			cla
  686                        			bit	sgx_bat_width
  687                        			bmi	!w128+
  688                        			bvs	!w64+
  689                        	!w32:		lsr	<_ah
  690                        			ror	a
  691                        	!w64:		lsr	<_ah
  692                        			ror	a
  693                        	!w128:		lsr	<_ah
  694                        			ror	a
  695                        			ora	<_al
  696                        			ldy	<_ah
  697                        			.endm
  698                        		.endif
  699                        	
  700                        	
  701                        	
  702                        	; ***************************************************************************
  703                        	; ***************************************************************************
  704                        	;
  705                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  706                        	;
  707                        	; unsigned int __fastcall __macro get_vram( unsigned int address<_di> );
  708                        	; void __fastcall __macro put_vram( unsigned int address<_di>, unsigned int data<acc> );
  709                        	;
  710                        	; unsigned int __fastcall __macro sgx_get_vram( unsigned int address<_di> );
  711                        	; void __fastcall __macro sgx_put_vram( unsigned int address<_di>, unsigned int data<acc> );
  712                        	
  713                        			.macro	_get_vram.1
  714                        			jsr	vdc_di_to_marr
  715                        			lda	VDC_DL
  716                        			ldy	VDC_DH
  717                        			.endm
  718                        	
  719                        			.macro	_put_vram.2
  720                        			pha
  721                        			jsr	vdc_di_to_mawr
  722                        			pla
  723                        			sta	VDC_DL
  724                        			sty	VDC_DH
  725                        			.endm
  726                        	
  727               0001     		.if	SUPPORT_SGX
  728                        			.macro	_sgx_get_vram.1
  729                        			jsr	sgx_di_to_marr
  730                        			lda	SGX_DL
  731                        			ldy	SGX_DH
  732                        			.endm
  733                        	
  734                        			.macro	_sgx_put_vram.2
  735                        			pha
  736                        			jsr	sgx_di_to_mawr
  737                        			pla
  738                        			sta	SGX_DL
  739                        			sty	SGX_DH
  740                        			.endm
  741                        		.endif
  742                        	
  743                        	
  744                        	
  745                        	; ***************************************************************************
  746                        	; ***************************************************************************
  747                        	;
  748                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  749                        	;
  750                        	; void __fastcall __macro set_bgpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp> );
  751                        	; void __fastcall __macro set_bgpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_palettes<_ah> );
  752                        	; void __fastcall __macro set_sprpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp> );
  753                        	; void __fastcall __macro set_sprpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_palettes<_ah> );
  754                        	
  755                        	_set_bgpal.2	.macro
  756                        			lda	#1
  757                        			sta	<_ah
  758                        			call	_load_palette.3
  759                        			.endm
  760                        	
  761                        	_set_bgpal.3	.macro
  762                        			call	_load_palette.3
  763                        			.endm
  764                        	
  765                        	_set_sprpal.2	.macro
  766                        			lda	#1
  767                        			sta	<_ah
  768                        			smb4	<_al
  769                        			call	_load_palette.3
  770                        			.endm
  771                        	
  772                        	_set_sprpal.3	.macro
  773                        			smb4	<_al
  774                        			call	_load_palette.3
  775                        			.endm
  776                        	
  777                        	
  778                        	
  779                        	; ***************************************************************************
  780                        	; ***************************************************************************
  781                        	;
  782                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  783                        	;
  784                        	; void __fastcall __macro load_vram( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_words<_ax> );
  785                        	; void __fastcall __macro sgx_load_vram( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_words<_ax> );
  786                        	;
  787                        	; void __fastcall __macro far_load_vram( unsigned int vram<_di>, unsigned int num_words<_ax> );
  788                        	; void __fastcall __macro sgx_far_load_vram( unsigned int vram<_di>, unsigned int num_words<_ax> );
  789                        	;
  790                        	
  791               0001     		.if	SUPPORT_SGX
  792                        			.macro	_sgx_load_vram.3
  793                        			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  794                        			call	load_vram_x
  795                        			.endm
  796                        	
  797                        			.macro	_sgx_far_load_vram.2
  798                        			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  799                        			call	load_vram_x
  800                        			.endm
  801                        		.endif
  802                        	
  803                        			.macro	_load_vram.3
  804                        			clx				; Offset to PCE VDC.
  805                        			call	load_vram_x
  806                        			.endm
  807                        	
  808                        			.macro	_far_load_vram.2
  809                        			clx				; Offset to PCE VDC.
  810                        			call	load_vram_x
  811                        			.endm
  812                        	
  813                        	
  814                        	
  815                        	; ***************************************************************************
  816                        	; ***************************************************************************
  817                        	;
  818                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  819                        	;
  820                        	; void __fastcall __macro load_sprites( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_groups<acc> );
  821                        	; void __fastcall __macro sgx_load_sprites( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_groups<acc> );
  822                        	; void __fastcall __macro far_load_sprites( unsigned int vram<_di>, unsigned int num_groups<acc> );
  823                        	; void __fastcall __macro sgx_far_load_sprites( unsigned int vram<_di>, unsigned int num_groups<acc> );
  824                        	
  825               0001     		.if	SUPPORT_SGX
  826                        			.macro	_sgx_load_sprites.3
  827                        			stz.l	<_ax
  828                        			asl	a
  829                        			sta.h	<_ax
  830                        			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  831                        			call	load_vram_x
  832                        			.endm
  833                        	
  834                        			.macro	_sgx_far_load_sprites.2
  835                        			stz.l	<_ax
  836                        			asl	a
  837                        			sta.h	<_ax
  838                        			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  839                        			call	load_vram_x
  840                        			.endm
  841                        		.endif
  842                        	
  843                        			.macro	_load_sprites.3
  844                        			stz.l	<_ax
  845                        			asl	a
  846                        			sta.h	<_ax
  847                        			clx				; Offset to PCE VDC.
  848                        			call	load_vram_x
  849                        			.endm
  850                        	
  851                        			.macro	_far_load_sprites.2
  852                        			stz.l	<_ax
  853                        			asl	a
  854                        			sta.h	<_ax
  855                        			clx				; Offset to PCE VDC.
  856                        			call	load_vram_x
  857                        			.endm
  858                        	
  859                        	
  860                        	
  861                        	; ***************************************************************************
  862                        	; ***************************************************************************
  863                        	;
  864                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  865                        	;
  866                        	; void __fastcall load_default_font( void );
  867                        	; void __fastcall sgx_load_default_font( void );
  868                        	;
  869                        	
  870               0001     		.if	SUPPORT_SGX
  871                        			.macro	_sgx_load_default_font
  872                        			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  873                        			call	huc_monofont_x
  874                        			.endm
  875                        		.endif
  876                        	
  877                        			.macro	_load_default_font
  878                        			clx				; Offset to PCE VDC.
  879                        			call	huc_monofont_x
  880                        			.endm
  881                        	
  882                        	
  883                        	
  884                        	; ***************************************************************************
  885                        	; ***************************************************************************
  886                        	
  887               0000     		.if	0
  905                        		.endif
                             #[2]   "..\..\..\include\hucc\hucc.asm"
  228                        	
  229               0000     		.if	CDROM
  231                        		.endif
  232                        	
  233                        			; Definitions for compatibility with old HuC/MagicKit projects.
  234                        	
  235               0001     		.ifndef	HUCC_NO_DEPRECATED
                             #[3]   "..\..\..\include\hucc\hucc-deprecated.inc"
  236                        			include	"hucc-deprecated.inc"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-deprecated.inc
    5                        	;
    6                        	; Macros and definitions for compatibility with old HuC/MagicKit projects.
    7                        	;
    8                        	; Based on the original HuC and MagicKit definitions by David Michel and the
    9                        	; other original HuC developers.
   10                        	;
   11                        	; ***************************************************************************
   12                        	; ***************************************************************************
   13                        	
   14                        			; For compatibility with HuC projects that use the old name.
   15                        	
   16               0001     	HUC_USER_RESERVED = HUC_USER_BANK
   17                        	
   18                        			; For compatibility with code that expects the HuC naming that
   19                        			; is used in the newer HuC, rather than the original HuC v3.21.
   20                        			;
   21                        			; Code generated by HuCC uses the original single-underscore.
   22                        	
   23               0001     		.if	1				
   24               0002     	__bp		=	$F8:20EC, 2		; base pointer
   25               0002     	__si		=	$F8:20EE, 2		; source address
   26               0002     	__di		=	$F8:20F0, 2		; destination address
   27                        	
   28               0002     	__ax		=	$F8:20F8, 2
   29               0001     	__al		=	$F8:20F8, 1
   30               0001     	__ah		=	$F8:20F9, 1
   31                        	
   32               0002     	__bx		=	$F8:20FA, 2
   33               0001     	__bl		=	$F8:20FA, 1
   34               0001     	__bh		=	$F8:20FB, 1
   35                        	
   36               0002     	__cx		=	$F8:20FC, 2
   37               0001     	__cl		=	$F8:20FC, 1
   38               0001     	__ch		=	$F8:20FD, 1
   39                        	
   40               0002     	__dx		=	$F8:20FE, 2
   41               0001     	__dl		=	$F8:20FE, 1
   42               0001     	__dh		=	$F8:20FF, 1
   43                        		.endif
   44                        	
   45                        			; For compatibility with code that expects the HuC naming that
   46                        			; is used rather than the shorter upper-case #define naming.
   47                        	
   48               0001     		.if	1				
   49               0001     	video_reg	=	$FF:0200, 1		; Address/Status Register
   50               0001     	video_reg_l	=	$FF:0200, 1		; Address/Status Register
   51               0001     	video_reg_h	=	$FF:0201, 1		; Address/Status Register
   52               0002     	video_data	=	$FF:0202, 2		; Data (Read/Write) Low
   53               0001     	video_data_l	=	$FF:0202, 1		; Data (Read/Write) Low
   54               0001     	video_data_h	=	$FF:0203, 1		; Data (Read/Write) High
   55                        	
   56               0002     	color_ctrl	=	$FF:0400, 2		; Control Register
   57               0002     	color_reg	=	$FF:0402, 2		; Color Table Address
   58               0001     	color_reg_l	=	$FF:0402, 1		; Color Table Address
   59               0001     	color_reg_h	=	$FF:0402, 1		; Color Table Address
   60               0002     	color_data	=	$FF:0404, 2		; Color Table Data Read/Write
   61               0001     	color_data_l	=	$FF:0404, 1		; Color Table Data Read/Write
   62               0001     	color_data_h	=	$FF:0405, 1		; Color Table Data Read/Write
   63                        	
   64               0001     	psg_ch		=	$FF:0800, 1		; Channel Select
   65               0001     	psg_mainvol	=	$FF:0801, 1		; Main Amplitude Level
   66               0001     	psg_freqlo	=	$FF:0802, 1		; Frequency Low
   67               0001     	psg_freqhi	=	$FF:0803, 1		; Frequency High
   68               0001     	psg_ctrl	=	$FF:0804, 1		; Control & Channel Amplitude
   69               0001     	psg_pan		=	$FF:0805, 1		; L/R Amplitude Level
   70               0001     	psg_wavebuf	=	$FF:0806, 1		; Waveform
   71               0001     	psg_noise	=	$FF:0807, 1		; Noise
   72               0001     	psg_lfofreq	=	$FF:0808, 1		; LFO Frequency
   73               0001     	psg_lfoctrl	=	$FF:0809, 1		; LFO Control
   74                        	
   75               0001     	irq_m		=	irq_vec, 1		; Old System Card name.
   76               0002     	irq2_jmp	=	irq2_hook, 2		; Old System Card name.
   77               0002     	irq1_jmp	=	irq1_hook, 2		; Old System Card name.
   78               0002     	timer_jmp	=	timer_hook, 2		; Old System Card name.
   79               0002     	nmi_jmp		=	nmi_hook, 2		; Old System Card name.
   80               0002     	sat_adr		=	satb_addr, 2		; Old System Card name.
   81               0005     	joy		=	joynow, 5		; Old System Card name.
   82               0001     	mwr_m		=	vdc_mwr, 1		; Old System Card name.
   83               0001     	dcr_m		=	vdc_dcr, 1		; Old System Card name.
   84                        		.endif
   85                        	
   86                        			; Macros for compatibility with #asm usage in old HuC projects.
   87                        	
   88                        	stw		.macro
   89                        			lda.l	\1
   90                        			sta.l	\2
   91                        			lda.h	\1
   92                        			sta.h	\2
   93                        			.endm
   94                        	
   95                        	stb		.macro
   96                        			lda	\1
   97                        			sta	\2
   98                        			.endm
   99                        	
  100                        	addw		.macro
  101                        		.if	(\# = 3)
  102                        			clc
  103                        			lda.l	\2
  104                        			adc.l	\1
  105                        			sta.l	\3
  106                        			lda.h	\2
  107                        			adc.h	\1
  108                        			sta.h	\3
  109                        		.else
  110                        			clc
  111                        			lda.l	\2
  112                        			adc.l	\1
  113                        			sta.l	\2
  114                        			lda.h	\2
  115                        			adc.h	\1
  116                        			sta.h	\2
  117                        		.endif
  118                        			.endm
  119                        	
  120                        	add		.macro			; add byte-sized value to
  121                        		.if (\# = 2)			; register A (handle carry
  122                        			lda	\2		; flag)
  123                        			clc
  124                        			adc	\1
  125                        			sta	\2
  126                        		.else
  127                        			clc
  128                        			adc	\1
  129                        		.endif
  130                        			.endm
  131                        	
  132                        	subw		.macro
  133                        			sec
  134                        			lda.l	\2
  135                        			sbc.l	\1
  136                        			sta.l	\2
  137                        			lda.h	\2
  138                        			sbc.h	\1
  139                        			sta.h	\2
  140                        			.endm
  141                        	
  142                        	sub		.macro			; subtract byte-sized value
  143                        		.if (\# = 2)			; from register A (handle
  144                        			lda	\2		; carry flag)
  145                        			sec
  146                        			sbc	\1
  147                        			sta	\2
  148                        		.else
  149                        			sec
  150                        			sbc	\1
  151                        		.endif
  152                        			.endm
  153                        	
  154                        	incw		.macro			; increment a word-sized
  155                        			inc.l	\1		; value at stated memory
  156                        			bne	!+		; location
  157                        			inc.h	\1
  158                        	!:
  159                        			.endm
  160                        	
  161                        	decw		.macro			; decrement a word-sized
  162                        			lda	\1		; value at stated memory
  163                        			bne	!+		; location
  164                        			dec.h	\1
  165                        	!:		dec.l	\1
  166                        			.endm
  167                        	
  168                        	lbne		.macro
  169                        			bne	\1
  170                        			.endm
  171                        	
  172                        	lbeq		.macro
  173                        			beq	\1
  174                        			.endm
  175                        	
  176                        	lbpl		.macro
  177                        			bpl	\1
  178                        			.endm
  179                        	
  180                        	lbmi		.macro
  181                        			bmi	\1
  182                        			.endm
  183                        	
  184                        	lbcc		.macro
  185                        			bcc	\1
  186                        			.endm
  187                        	
  188                        	lbcs		.macro
  189                        			bcs	\1
  190                        			.endm
  191                        	
  192                        	lblo		.macro
  193                        			bcc	\1
  194                        			.endm
  195                        	
  196                        	lbhs		.macro
  197                        			bcs	\1
  198                        			.endm
  199                        	
  200                        	__ldwi		.macro
  201                        		__ld.wi		\1
  202                        			.endm
                             #[2]   "..\..\..\include\hucc\hucc.asm"
  237                        		.endif
  238                        	
  239                        			;
  240                        			;
  241                        			;
  242                        	
  243                        	
  244                        	
  245                        	; ***************************************************************************
  246                        	; ***************************************************************************
  247                        	;
  248                        	; core_main - This is executed after "CORE(not TM)" library initialization.
  249                        	;
  250                        	; This is the first code assembled after the library includes, so we're still
  251                        	; in the CORE_BANK, usually ".bank 0"; and because this is assembled with the
  252                        	; default configuration from "include/core-config.inc", which sets the option
  253                        	; "USING_MPR7", then we're running in MPR7 ($E000-$FFFF).
  254                        	
  255    14:CE95             	core_main	.proc
  256                        	
  257               0001     		.if	SUPPORT_SGX
  258    14:CE95  A9 F9      			lda	#$F9			; Map the 2nd SGX RAM bank.
  259                        		.else
  261                        		.endif
  262    14:CE97  53 04      			tam2
  263                        	
  264    14:CE99  A9 01      			lda	#CONST_BANK + _bank_base; Map HuCC's .RODATA bank.
  265    14:CE9B  53 08      			tam3
  266    14:CE9D  1A         			inc	a
  267    14:CE9E  53 10      			tam4
  268                        	
  269               0000     		.ifdef	HOME_BANK
  271                        		.else
  272    14:CEA0  1A         			inc	a
  273                        		.endif
  274    14:CEA1  53 20      			tam5
  275                        	
  276    14:CEA3  08         			php				; Disable interrupts while
  277    14:CEA4  78         			sei				; clearing overlay's BSS.
  278                        	
  279               0000     		.ifndef	USING_RCR_MACROS
  294                        		.endif	USING_RCR_MACROS
  295                        	
  296    14:CEA5  A9 CC      			lda	#<hucc_vbl		; Setup HuCC's VBL IRQ handler.
  297    14:CEA7  8D 08 22   			sta.l	vsync_hook
  298    14:CEAA  A9 E2      			lda	#>hucc_vbl
  299    14:CEAC  8D 09 22   			sta.h	vsync_hook
  300                        	
  301               0000     		.if	CDROM				; Overlays should clear BSS.
  303                        		.else
  304    14:CEAF  73 FC CE F0			tii	.rom_tia, ram_tia, 16	; Only needed on HuCARD.
         14:CEB3  22 10 00    
  305                        		.endif	CDROM
  306                        	
  307               0000     		.if	(__heap_start - __bss_init)	; Copy initialized BSS data.
  309                        		.endif
  310                        	
  311    14:CEB6  F3 FA CE 08			tai	.stack_fill, __stack, HUCC_STACK_SZ
         14:CEBA  20 80 00    
  312                        	
  313               0000     		.if	FAST_MULTIPLY
  322                        		.endif
  323                        	
  324    14:CEBD  A9 10      			lda	#$10			; Enable HuCC's vblank IRQ
  325    14:CEBF  04 F5      			tsb	<irq_vec		; handler.
  326                        	
  327                        			__sound_init			; Initialize a sound driver.
  328                        	
  329    14:CEC1  AD 00 02   			lda	VDC_SR			; Purge any overdue VBL.
  330    14:CEC4  9C 41 22   			stz	irq_cnt			; Make it easy to check.
  331                        	
  332    14:CEC7  28         			plp				; Restore interrupts.
  333                        	
  334               0001     		.ifndef	HUCC_NO_DEFAULT_SCREEN
  335    14:CEC8  20 D1 FF   			call	_init_256x224		; HuCC initializes the VDC and
  336    14:CECB  20 16 E4   			jsr	set_dspon		; turns the display on.
  337                        		.endif
  338                        	
  339               0001     		.ifndef	HUCC_NO_DEFAULT_FONT
  340    14:CECE  A9 01      			lda	#1			; HuCC loads a default font.
  341    14:CED0  8D AC 26   			sta	monofont_fg
  342    14:CED3  9C AD 26   			stz	monofont_bg
  343                        			_load_default_font
         14:CED6  82         			clx				; Offset to PCE VDC.
         14:CED7  20 C7 FF   			call	huc_monofont_x
  344    14:CEDA  A9 01      			lda	#$01			; Set the font palette entry to
  345    14:CEDC  8D 02 04   			sta.l	VCE_CTA			; cyan which is a) visible, but
  346    14:CEDF  9C 03 04   			stz.h	VCE_CTA			; b) a clear indicator that the
  347    14:CEE2  A0 96      			ldy	#$96			; user hasn't set a palette yet.
  348    14:CEE4  8C 04 04   			sty.l	VCE_CTW
  349    14:CEE7  8D 05 04   			sta.h	VCE_CTW
  350                        		.endif
  351                        	
  352               0001     		.ifndef	HUCC_NO_DEFAULT_RANDOM
  353    14:CEEA  AC 41 22   			ldy	irq_cnt			; Initialize random seed.
  354    14:CEED  20 BD FF   			call	init_random
  355                        		.endif
  356                        	
  357    14:CEF0  A2 80      			ldx	#HUCC_STACK_SZ		; Initialize the HuCC stack.
  358    14:CEF2  86 8D      			stx	<__sp
  359                        	
  360    14:CEF4  20 B3 FF   			call	_main			; Execute the HuCC program.
  361                        	
  362    14:CEF7  4C 88 E2   			jmp	_exit.1			; Pass the exit code on.
  363                        	
  364    14:CEFA  EA EA      	.stack_fill:	db	$EA,$EA			; To make it easier to see.
  365                        	
  366               0001     		.if	!CDROM
  367                        	
  368    14:CEFC  E3 34 12 02	.rom_tia:	tia	$1234, VDC_DL, 32
         14:CF00  02 20 00    
  369    14:CF03  60         			rts
  370                        	
  371    14:CF04  73 34 12 78	.rom_tii:	tii	$1234, $5678, $9ABC
         14:CF08  56 BC 9A    
  372    14:CF0B  60         			rts
  373                        	
  374               22F0     			.bss
  375    F8:22F0             	ram_tia:	ds	8
  376    F8:22F8             	ram_tii:	ds	8
  377               CF0C     			.code
  378                        	
  379                        		.endif	!CDROM
  380                        	
  381                        			.endp
  382                        	
  383                        			;
  384                        			; Self-Modifying TIA and TII instruction subroutines.
  385                        			;
  386                        			; These need to be in permanently-accessible memory so that
  387                        			; HuCC code can modify the values as __fastcall parameters.
  388                        			;
  389                        	
  390               0000     		.if	CDROM
  398                        		.endif	CDROM
  399                        	
  400               22F0     			rsset	ram_tia
  401               22F0     	ram_tia_opc	rs	1
  402               22F1     	ram_tia_src	rs	2
  403               22F3     	ram_tia_dst	rs	2
  404               22F5     	ram_tia_len	rs	2
  405               22F7     	ram_tia_rts	rs	1
  406                        	
  407               22F8     			rsset	ram_tii
  408               22F8     	ram_tii_opc	rs	1
  409               22F9     	ram_tii_src	rs	2
  410               22FB     	ram_tii_dst	rs	2
  411               22FD     	ram_tii_len	rs	2
  412               22FF     	ram_tii_rts	rs	1
  413                        	
  414                        	
  415                        	
  416                        	; ***************************************************************************
  417                        	; ***************************************************************************
  418                        	;
  419                        	; hucc_vbl - vblank IRQ handler, called by the "CORE(not TM)" kernel.
  420                        	;
  421                        	; This uses the kernel's hook to process things during vblank. It returns
  422                        	; with a simple RTS, and it can corrupt any register.
  423                        	;
  424                        	; Any slow routines in here should enable interrupts and protect itself from
  425                        	; re-entrancy problems.
  426                        	;
  427                        	
  428    00:E2CC  20 A9 FF   	hucc_vbl:	call	vbl_init_scroll		; Prepare for the next frame.
  429                        	
  430    00:E2CF  F8         			sed				; Update the HuC system clock
  431    00:E2D0  38         			sec				; which is in BCD here rather
  432    00:E2D1  AD EF 22   			lda	clock_tt		; than the binary one in HuC.
  433    00:E2D4  69 00      			adc	#0			; BCD add ...
  434    00:E2D6  C9 60      			cmp	#$60			; ... but binary comparison.
  435    00:E2D8  90 28      			bcc	.ticks
  436    00:E2DA  AD EE 22   			lda	clock_ss
  437    00:E2DD  69 00      			adc	#0			; BCD add ...
  438    00:E2DF  C9 60      			cmp	#$60			; ... but binary comparison.
  439    00:E2E1  90 1B      			bcc	.seconds
  440    00:E2E3  AD ED 22   			lda	clock_mm
  441    00:E2E6  69 00      			adc	#0			; BCD add ...
  442    00:E2E8  C9 60      			cmp	#$60			; ... but binary comparison.
  443    00:E2EA  90 0E      			bcc	.minutes
  444    00:E2EC  AD EC 22   			lda	clock_hh
  445    00:E2EF  69 00      			adc	#0			; BCD add ...
  446    00:E2F1  C9 12      			cmp	#$12			; ... but binary comparison.
  447    00:E2F3  90 01      			bcc	.hours
  448    00:E2F5  62         			cla
  449    00:E2F6  8D EC 22   	.hours:		sta	clock_hh
  450    00:E2F9  62         			cla
  451    00:E2FA  8D ED 22   	.minutes:	sta	clock_mm
  452    00:E2FD  62         			cla
  453    00:E2FE  8D EE 22   	.seconds:	sta	clock_ss
  454    00:E301  62         			cla
  455    00:E302  8D EF 22   	.ticks:		sta	clock_tt
  456    00:E305  D8         			cld
  457                        	
  458    00:E306  4C 96 E3   			jmp	xfer_palettes		; Upload any palette changes.
                             #[1]   "main.s"
   15               6000     			.data
   16               0003     			.bank	DATA_BANK
   17                        	
   18               E309     		.code
   19                        	
   20                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 1; // **************************************************************************
   21                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 2; // **************************************************************************
   22                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 3; //
   23                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 4; // globals.h
   24                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 5; //
   25                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 6; // **************************************************************************
   26                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 7; // **************************************************************************
   27                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 8; //
   28                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 9; // The idea is that you, a PCE developer, copy this file from the ../include/
   29                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 10; // directory and into your project's directory, and then define the variables
   30                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 11; // that you want to have shared access to in all overlay programs on your CD.
   31                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 12; //
   32                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 13; // Because PCEAS searches the current (i.e. project) directory for an include
   33                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 14; // file first, then it will find your customized copy of the file rather than
   34                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 15; // the original copy in the ../include/ directory.
   35                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 16; //
   36                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 17; // **************************************************************************
   37                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 18; // **************************************************************************
   38                        		.dbg	clear
   39               2300     		.bss
   40    F8:2300             	huc_globals:
   41                        	
   42    F8:2300             	huc_globals_end:
   43               E309     		.code
   44                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
   45                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
   46                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
   47                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
   48                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
   49                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
   50                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
   51                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
   52                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
   53                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
   54                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
   55                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
   56                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
   57                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
   58                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
   59                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
   60                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
   61                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
   62                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
   63                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
   64                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
   65                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
   66                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
   67                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
   68                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
   69                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
   70                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
   71                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
   72                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
   73                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
   74                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
   75                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 1; #ifndef _hucc_systemcard_h
   76                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 2; #define _hucc_systemcard_h
   77                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 4; /****************************************************************************
   78                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 5; ; ***************************************************************************
   79                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 6; ;
   80                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 7; ; hucc-systemcard.h
   81                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 8; ;
   82                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 9; ; Macros and library functions for using the System Card.
   83                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 10; ;
   84                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 11; ; Copyright John Brandwood 2024.
   85                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 12; ;
   86                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 13; ; Distributed under the Boost Software License, Version 1.0.
   87                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
   88                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
   89                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 16; ;
   90                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 17; ; ***************************************************************************
   91                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 18; ; ***************************************************************************
   92                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 19; ;
   93                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 20; ; Because these are mainly macros, and so must be included before being used
   94                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 21; ; in compiled code, the actual functions here are written to avoid using any
   95                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 22; ; BSS memory so that HuCC's overlay global-shared-variables are not effected.
   96                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 23; ;
   97                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 24; ; ***************************************************************************
   98                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 25; ; **************************************************************************/
   99                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 27; // *************
  100                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 28; // Backup RAM defines ...
  101                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 29; // *************
  102                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 31; #define  BM_OK             0
  103                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 32; #define  BM_NOT_FOUND      1
  104                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 33; #define  BM_BAD_CHECKSUM   2
  105                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 34; #define  BM_DIR_CORRUPTED  3
  106                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 35; #define  BM_FILE_EMPTY     4
  107                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 36; #define  BM_FULL           5
  108                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 37; #define  BM_NOT_FORMATED   0xFF			// HuC incorrect spelling.
  109                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 38; #define  BM_NOT_FORMATTED  0xFF			// HuCC can use a dictionary!
  110                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 40; #define  BRAM_STARTPTR     0x8010
  111                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 42; // *************
  112                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 43; // CD defines ...
  113                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 44; // *************
  114                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 46; #define	CDPLAY_MUTE		0
  115                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 47; #define	CDPLAY_REPEAT		1
  116                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 48; #define	CDPLAY_NORMAL		2
  117                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 49; #define	CDPLAY_ENDOFDISC	0
  118                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 51; #define	CDFADE_CANCEL	0
  119                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 52; #define	CDFADE_PCM6	8
  120                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 53; #define	CDFADE_ADPCM6	10
  121                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 54; #define	CDFADE_PCM2	12
  122                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 55; #define	CDFADE_ADPCM2	14
  123                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 57; #define CDTRK_AUDIO	0
  124                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 58; #define CDTRK_DATA	4
  125                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 60; // *************
  126                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 61; // ADPCM defines ...
  127                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 62; // *************
  128                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 64; #define	ADPLAY_AUTOSTOP		0
  129                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 65; #define	ADPLAY_REPEAT		0x80
  130                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 67; #define ADPLAY_FREQ_16KHZ	0xE
  131                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 68; #define ADPLAY_FREQ_10KHZ	0xD
  132                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 69; #define ADPLAY_FREQ_8KHZ	0xC
  133                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 70; #define ADPLAY_FREQ_6KHZ	0xB
  134                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 71; #define ADPLAY_FREQ_5KHZ	0xA
  135                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 73; #define ADREAD_RAM	0
  136                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 74; #define ADREAD_VRAM	0xFF
  137                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 76; #define ADWRITE_RAM	0
  138                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 77; #define ADWRITE_VRAM	0xFF
  139                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 79; // *************
  140                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 80; // Functions in hucc-systemcard.asm ...
  141                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 81; // *************
  142                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 83; #ifdef __HUCC__
  143                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 85; #asmdef	HUCC_USES_SYSTEMCARD 1
  144               0001     	HUCC_USES_SYSTEMCARD = 1
  145                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 87; extern void __fastcall __macro cd_boot( void );
  146                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 88; extern unsigned int __fastcall __macro cd_getver( void );
  147                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 89; extern void __fastcall __macro cd_reset( void );
  148                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 90; extern unsigned char __fastcall __macro cd_pause( void );
  149                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 91; extern unsigned char __fastcall cd_unpause( void );
  150                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 92; extern void __fastcall __macro cd_fade( unsigned char type<acc> );
  151                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 93; extern unsigned char __fastcall cd_playtrk( unsigned char start_track<_bx>, unsigned char end_track<_cx>, unsigned char mode<_dh> );
  152                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 94; extern unsigned char __fastcall cd_playmsf( unsigned char start_minute<_al>,  unsigned char start_second<_ah>,  unsigned char start_frame<_bl>, unsigned char end_minute<_cl>,  unsigned char end_second<_ch>,  unsigned char end_frame<_dl>,  unsigned char mode<_dh> );
  153                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 95; extern unsigned char __fastcall cd_fastvram( unsigned char ovl_index<_cl>, unsigned int sect_offset<_si>, unsigned int vramaddr<_bx>, unsigned int sectors<_al> );
  154                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 96; extern unsigned char __fastcall cd_loadvram( unsigned char ovl_index<_cl>, unsigned int sect_offset<_si>, unsigned int vramaddr<_bx>, unsigned int bytes<_ax> );
  155                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 97; extern unsigned char __fastcall cd_loaddata( unsigned char ovl_index<_cl>, unsigned int sect_offset<_si>, unsigned char __far *buffer<_bp_bank:_bp>, unsigned int bytes<__ptr> );
  156                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 98; extern unsigned char __fastcall cd_loadbank( unsigned char ovl_index<_cl>, unsigned int sect_offset<_si>, unsigned char bank<_bl>, unsigned int sectors<_al> );
  157                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 99; extern unsigned char __fastcall __macro cd_status( unsigned char mode<acc> );
  158                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 101; extern void __fastcall __macro ad_reset( void );
  159                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 102; extern unsigned char __fastcall __macro ad_trans( unsigned char ovl_index<_cl>, unsigned int sect_offset<_si>, unsigned char nb_sectors<_dh>, unsigned int ad_addr<_bx> );
  160                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 103; extern void __fastcall __macro ad_read( unsigned int ad_addr<_cx>, unsigned char mode<_dh>, unsigned int buf<_bx>, unsigned int bytes<_ax> );
  161                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 104; extern void __fastcall __macro ad_write( unsigned int ad_addr<_cx>, unsigned char mode<_dh>, unsigned int buf<_bx>, unsigned int bytes<_ax> );
  162                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 105; extern unsigned char __fastcall __macro ad_play( unsigned int ad_addr<_bx>, unsigned int bytes<_ax>, unsigned char freq<_dh>, unsigned char mode<_dl> );
  163                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 106; extern unsigned char __fastcall __macro ad_cplay( unsigned char ovl_index<_cl>, unsigned int sect_offset<_si>, unsigned int nb_sectors<_bx>, unsigned char freq<_dh> );
  164                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 107; extern void __fastcall __macro ad_stop( void );
  165                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 108; extern unsigned char __fastcall __macro ad_stat( void );
  166                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 110; extern unsigned char __fastcall bm_check( void );
  167                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 111; extern unsigned char __fastcall bm_format( void );
  168                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 112; extern unsigned int __fastcall __macro bm_free( void );
  169                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 113; extern unsigned char __fastcall __macro bm_read( unsigned char *buffer<_bx>, unsigned char *name<_ax>, unsigned int offset<_dx>, unsigned int length<_cx> );
  170                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 114; extern unsigned char __fastcall __macro bm_write( unsigned char *buffer<_bx>, unsigned char *name<_ax>, unsigned int offset<_dx>, unsigned int length<_cx> );
  171                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 115; extern unsigned char __fastcall __macro bm_delete( unsigned char *name<_ax> );
  172                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 117; // Deprecated functions ...
  173                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 119; extern unsigned char __fastcall __macro bm_exist( unsigned char *name<_ax> );
  174                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 120; extern unsigned char __fastcall __macro bm_create( unsigned char *name<_ax>, unsigned int length<_cx> );
  175                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 122; // void __fastcall _xsafe add_sectors( unsigned int sector_offset<acc> );
  176                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 124; #endif // __HUCC__
  177                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 126; #endif // _hucc_systemcard_h
  178                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
  179                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 1; #ifndef _hucc_baselib_h
  180                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 2; #define _hucc_baselib_h
  181                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 4; /****************************************************************************
  182                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 5; ; ***************************************************************************
  183                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 6; ;
  184                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 7; ; hucc-baselib.h
  185                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 8; ;
  186                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 9; ; Basic library functions provided as macros.
  187                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 10; ;
  188                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 11; ; Copyright John Brandwood 2024.
  189                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 12; ;
  190                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 13; ; Distributed under the Boost Software License, Version 1.0.
  191                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
  192                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
  193                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 16; ;
  194                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 17; ; ***************************************************************************
  195                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 18; ; **************************************************************************/
  196                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 20; // *************
  197                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 21; // Joypad defines ...
  198                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 22; // *************
  199                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 24; #define	JOY_A		0x01
  200                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 25; #define	JOY_I		0x01
  201                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 26; #define	JOY_B		0x02
  202                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 27; #define	JOY_II		0x02
  203                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 28; #define	JOY_SLCT	0x04
  204                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 29; #define	JOY_SEL		0x04
  205                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 30; #define	JOY_STRT	0x08
  206                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 31; #define	JOY_RUN		0x08
  207                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 32; #define	JOY_UP		0x10
  208                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 33; #define	JOY_RGHT	0x20
  209                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 34; #define	JOY_RIGHT	0x20
  210                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 35; #define	JOY_DOWN	0x40
  211                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 36; #define	JOY_LEFT	0x80
  212                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 38; #define	JOY_C		0x0100
  213                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 39; #define	JOY_III		0x0100
  214                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 40; #define	JOY_D		0x0200
  215                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 41; #define	JOY_IV		0x0200
  216                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 42; #define	JOY_E		0x0400
  217                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 43; #define	JOY_V		0x0400
  218                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 44; #define	JOY_F		0x0800
  219                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 45; #define	JOY_VI		0x0800
  220                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 47; #define JOY_SIXBUT	0x8000
  221                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 48; #define JOY_TYPE6	0x8000
  222                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 50; // *************
  223                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 51; // SuperGRAFX VPC settings for set_vpc_ctl() ...
  224                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 52; // *************
  225                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 54; #define VPC_SPR1_BKG1_SPR2_BKG2	0x3000 // same as SGX_PARALLAX=0
  226                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 55; #define VPC_SPR1_SPR2_BKG1_BKG2	0x7000 // same as SGX_PARALLAX=1
  227                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 56; #define VPC_BKG1_BKG2_SPR1_SPR2	0xB000
  228                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 58; // *************
  229                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 59; // System Card variables ...
  230                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 60; // *************
  231                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 62; extern unsigned int si;
  232                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 63; extern unsigned int di;
  233                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 64; extern unsigned int bp;
  234                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 66; extern unsigned int ax;
  235                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 67; extern unsigned int bx;
  236                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 68; extern unsigned int cx;
  237                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 69; extern unsigned int dx;
  238                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 71; extern unsigned char al;
  239                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 72; extern unsigned char ah;
  240                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 73; extern unsigned char bl;
  241                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 74; extern unsigned char bh;
  242                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 75; extern unsigned char cl;
  243                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 76; extern unsigned char ch;
  244                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 77; extern unsigned char dl;
  245                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 78; extern unsigned char dh;
  246                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 80; extern unsigned char irq_cnt;
  247                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 81; extern unsigned char joynow[5];
  248                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 82; extern unsigned char joytrg[5];
  249                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 83; extern unsigned char joy6now[5];
  250                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 84; extern unsigned char joy6trg[5];
  251                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 85; extern unsigned int  bg_x1;
  252                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 86; extern unsigned int  bg_y1;
  253                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 87; extern unsigned int  bg_x2;
  254                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 88; extern unsigned int  bg_y2;
  255                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 90; // *************
  256                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 91; // Special macros to get information from PCEAS ...
  257                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 92; // *************
  258                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 94; #define BANK( datasym ) ((unsigned) (&__bank__ ## datasym))
  259                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 95; #define SIZEOF( datasym ) ((unsigned) (&__sizeof__ ## datasym))
  260                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 96; #define COUNTOF( datasym ) ((unsigned) (&__countof__ ## datasym))
  261                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 97; #define OVERLAY( datasym ) ((unsigned) (&__overlay__ ## datasym))
  262                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 100; // *************
  263                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 101; // Functions in hucc-baselib.asm ...
  264                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 102; // *************
  265                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 104; #ifdef __HUCC__
  266                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 106; #asmdef	HUCC_USES_BASELIB 1
  267               0001     	HUCC_USES_BASELIB = 1
  268                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 108; #define	_OPTIMIZE 1
  269                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 111; // *************
  270                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 112; // Hardware Detection
  271                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 113; // *************
  272                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 115; extern unsigned char __fastcall __macro sgx_detect( void );
  273                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 116; extern unsigned char __fastcall __macro ac_exists( void );
  274                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 119; // *************
  275                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 120; // Memory Access
  276                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 121; // *************
  277                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 123; extern unsigned char __fastcall __macro peek( unsigned int addr<__ptr> );
  278                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 124; extern unsigned int  __fastcall __macro peekw( unsigned int addr<__ptr> );
  279                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 126; extern void __fastcall __macro poke( unsigned int addr<__poke>, unsigned char with<acc> );
  280                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 127; extern void __fastcall __macro pokew( unsigned int addr<__poke>, unsigned int with<acc> );
  281                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 129; extern unsigned char __fastcall farpeek( void __far *addr<_bp_bank:_bp> );
  282                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 130; extern unsigned int  __fastcall farpeekw( void __far *addr<_bp_bank:_bp> );
  283                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 132; extern void __fastcall __nop set_far_base( unsigned char data_bank<_bp_bank>, unsigned char *data_addr<_bp> );
  284                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 133; extern void __fastcall set_far_offset( unsigned int offset<_bp>, unsigned char data_bank<_bp_bank>, unsigned char *data_addr<acc> );
  285                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 135; extern unsigned char __fastcall far_peek( void );
  286                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 136; extern unsigned int  __fastcall far_peekw( void );
  287                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 138; extern void __fastcall __macro reset_mpr2( void );
  288                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 139; extern void __fastcall __macro reset_mpr34( void );
  289                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 141; extern void * __fastcall __macro farset_mpr2( void __far *addr<_bp_bank:_bp> );
  290                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 142; extern void * __fastcall __macro farset_mpr34( void __far *addr<_bp_bank:_bp> );
  291                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 144; extern void * __fastcall __macro far_set_mpr2( void );
  292                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 145; extern void * __fastcall __macro far_set_mpr34( void );
  293                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 148; // *************
  294                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 149; // Clock Functions
  295                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 150; // *************
  296                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 152; extern unsigned char __fastcall __macro clock_hh( void );
  297                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 153; extern unsigned char __fastcall __macro clock_mm( void );
  298                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 154; extern unsigned char __fastcall __macro clock_ss( void );
  299                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 155; extern unsigned char __fastcall __macro clock_tt( void );
  300                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 156; extern void __fastcall __macro clock_reset( void );
  301                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 159; // *************
  302                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 160; // Joypad Functions
  303                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 161; // *************
  304                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 163; extern unsigned int __fastcall __macro joy( unsigned char which<acc> );
  305                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 164; extern unsigned int __fastcall __macro joytrg( unsigned char which<acc> );
  306                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 167; // *************
  307                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 168; // Number Functions
  308                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 169; // *************
  309                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 171; extern int __fastcall abs( int value<acc> );
  310                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 173; extern void __fastcall __macro srand( unsigned char seed<acc> );
  311                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 174; extern unsigned int __fastcall rand( void );
  312                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 175; extern unsigned char __fastcall rand8( void );
  313                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 177; // Note: "limit" is 0..255.
  314                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 178; extern unsigned char __fastcall random8( unsigned char limit<acc> );
  315                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 180; // Note: "limit" is 0..128, 129..255 are treated as 128!
  316                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 181; extern unsigned char __fastcall random( unsigned char limit<acc> );
  317                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 184; // *************
  318                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 185; // Overlay Execution
  319                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 186; // *************
  320                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 188; extern unsigned char __fastcall __macro cd_execoverlay( unsigned char ovl_index<acc> );
  321                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 191; // *************
  322                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 192; // Functions that are only optionally available if configured in your hucc-config.inc
  323                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 193; // *************
  324                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 195; extern unsigned int __fastcall __macro joybuf( unsigned char which<acc> );
  325                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 196; extern unsigned int __fastcall __macro get_joy_events( unsigned char which<acc> );
  326                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 197; extern void __fastcall __macro clear_joy_events( unsigned char mask<acc> );
  327                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 200; // *************
  328                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 201; // Functions that are only implemented in the TGEMU emulator for unit-testing
  329                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 202; // the compiler, and which should never be used in normal HuCC projects ...
  330                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 203; // *************
  331                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 205; extern void __fastcall dump_screen( void );
  332                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 206; extern void __fastcall abort( void );
  333                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 207; extern void __fastcall exit( int value<acc> );
  334                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 209; extern unsigned char __fastcall __builtin_ffs( unsigned int value<__temp> );
  335                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 211; #endif // __HUCC__
  336                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 213; #endif // _hucc_baselib_h
  337                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
  338                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 1; #ifndef _hucc_gfx_h
  339                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 2; #define _hucc_gfx_h
  340                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 4; /****************************************************************************
  341                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 5; ; ***************************************************************************
  342                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 6; ;
  343                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 7; ; huc-gfx.h
  344                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 8; ;
  345                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 9; ; Based on the original HuC and MagicKit functions by David Michel and the
  346                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 10; ; other original HuC developers.
  347                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 11; ;
  348                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 12; ; Modifications copyright John Brandwood 2024.
  349                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 13; ;
  350                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 14; ; Distributed under the Boost Software License, Version 1.0.
  351                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 15; ; (See accompanying file LICENSE_1_0.txt or copy at
  352                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 16; ;  http://www.boost.org/LICENSE_1_0.txt)
  353                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 17; ;
  354                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 18; ; ***************************************************************************
  355                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 19; ; **************************************************************************/
  356                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 21; // *************
  357                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 22; // Screen defines ...
  358                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 23; // *************
  359                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 25; #define	SCR_SIZE_32x32	0
  360                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 26; #define	SCR_SIZE_64x32	1
  361                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 27; #define	SCR_SIZE_128x32	2
  362                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 28; #define	SCR_SIZE_32x64	4
  363                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 29; #define	SCR_SIZE_64x64	5
  364                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 30; #define	SCR_SIZE_128x64	6
  365                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 32; #define	XRES_SHARP	0
  366                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 33; #define	XRES_SOFT	4
  367                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 34; #define	XRES_KEEP	128
  368                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 36; #define VPC_WIN_A	0x00
  369                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 37; #define VPC_WIN_B	0x01
  370                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 38; #define	VPC_WIN_AB	0x02
  371                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 39; #define	VPC_WIN_NONE	0x03
  372                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 40; #define	VPC_NORM	0x00
  373                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 41; #define	VPC_SPR		0x04
  374                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 42; #define	VPC_INV_SPR	0x08
  375                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 43; #define VDC1_ON		0x01
  376                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 44; #define	VDC1_OFF	0x00
  377                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 45; #define VDC2_ON		0x02
  378                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 46; #define	VDC2_OFF	0x00
  379                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 47; #define VDC_ON		0x03
  380                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 48; #define	VDC_OFF		0x00
  381                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 50; // *************
  382                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 51; // Functions in hucc-gfx.asm ...
  383                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 52; // *************
  384                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 54; #ifdef __HUCC__
  385                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 56; #asmdef	HUCC_USES_GFX 1
  386               0001     	HUCC_USES_GFX = 1
  387                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 58; // *************
  388                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 59; // Color and Palette Functions
  389                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 60; // *************
  390                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 62; extern void __fastcall clear_palette( void );
  391                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 64; extern void __fastcall __nop set_color( unsigned int index<VCE_CTA>, unsigned int value<VCE_CTW> );
  392                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 65; extern void __fastcall set_color_rgb( unsigned int index<VCE_CTA>, unsigned char r<_al>, unsigned char g<_ah>, unsigned char b<acc> );
  393                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 66; extern unsigned int __fastcall __macro get_color( unsigned int index<VCE_CTA> );
  394                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 68; extern void __fastcall load_palette( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp>, unsigned char num_palettes<_ah> );
  395                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 69; extern void __fastcall far_load_palette( unsigned char palette<_al>, unsigned char num_palettes<_ah> );
  396                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 71; extern void __fastcall read_palette( unsigned char palette<_al>, unsigned char num_palettes<_ah>, unsigned int *destination<_di> );
  397                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 73; extern void __fastcall __macro fade_to_black( unsigned int __far *from<_bp_bank:_bp>, unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_sub<_ah> );
  398                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 74; extern void __fastcall __macro fade_to_white( unsigned int __far *from<_bp_bank:_bp>, unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_add<_ah> );
  399                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 75; extern void __fastcall __macro cross_fade_to( unsigned int __far *from<_bp_bank:_bp>, unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char which_component<_ah> );
  400                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 77; extern void __fastcall __macro far_fade_to_black( unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_sub<_ah> );
  401                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 78; extern void __fastcall __macro far_fade_to_white( unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_add<_ah> );
  402                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 79; extern void __fastcall __macro far_cross_fade_to( unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char which_component<_ah> );
  403                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 83; // *************
  404                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 84; // Video Functions
  405                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 85; // *************
  406                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 87; extern void __fastcall init_240x208( void );
  407                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 88; extern void __fastcall init_256x224( void );
  408                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 90; extern void __fastcall vsync( void );
  409                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 91; extern void __fastcall vsync( unsigned char count<_al> );
  410                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 93; extern void __fastcall disp_on( void );
  411                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 94; extern void __fastcall disp_off( void );
  412                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 96; extern void __fastcall set_screen_size( unsigned char value<_al> );
  413                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 98; extern void __fastcall set_xres( unsigned int x_pixels<_ax>, unsigned char blur_flag<_bl> );
  414                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 100; extern void __fastcall cls( void );
  415                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 101; extern void __fastcall cls( unsigned int tile<acc> );
  416                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 103; extern unsigned int __fastcall __macro vram_addr( unsigned char bat_x<_al>, unsigned char bat_y<_ah> );
  417                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 104; extern unsigned int __fastcall __macro get_vram( unsigned int address<_di> );
  418                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 105; extern void __fastcall __macro put_vram( unsigned int address<_di>, unsigned int data<acc> );
  419                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 107; extern void __fastcall __macro load_vram( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_words<_ax> );
  420                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 108; extern void __fastcall __macro far_load_vram( unsigned int vram<_di>,  unsigned int num_words<_ax> );
  421                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 110; extern void __fastcall load_bat( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  422                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 111; extern void __fastcall far_load_bat( unsigned int vram<_di>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  423                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 113; extern void __fastcall __macro load_sprites( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_groups<acc> );
  424                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 114; extern void __fastcall __macro far_load_sprites( unsigned int vram<_di>, unsigned int num_groups<acc> );
  425                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 116; extern void __fastcall vram2vram( unsigned int vram_dst<_ax>, unsigned int vram_src<_bx>, unsigned int word_len<_cx> );
  426                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 119; // *************
  427                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 120; // SuperGRAFX Video Functions
  428                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 121; // *************
  429                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 123; extern void __fastcall __nop vpc_set_ctl( unsigned int bits<VPC_CR> );
  430                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 124; extern void __fastcall __nop vpc_set_win1( unsigned int width<VPC_WINDOW1> );
  431                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 125; extern void __fastcall __nop vpc_set_win2( unsigned int width<VPC_WINDOW2> );
  432                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 127; extern void __fastcall sgx_set_screen_size( unsigned char value<_al> );
  433                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 129; extern void __fastcall sgx_set_xres( unsigned int x_pixels<_ax>, unsigned char blur_flag<_bl> );
  434                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 131; extern void __fastcall sgx_cls( void );
  435                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 132; extern void __fastcall sgx_cls( unsigned int tile<acc> );
  436                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 134; extern unsigned int __fastcall __macro sgx_vram_addr( unsigned char bat_x<_al>, unsigned char bat_y<_ah> );
  437                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 135; extern unsigned int __fastcall __macro sgx_get_vram( unsigned int address<_di> );
  438                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 136; extern void __fastcall __macro sgx_put_vram( unsigned int address<_di>, unsigned int data<acc> );
  439                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 138; extern void __fastcall __macro sgx_load_vram( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_words<_ax> );
  440                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 139; extern void __fastcall __macro sgx_far_load_vram( unsigned int vram<_di>, unsigned int num_words<_ax> );
  441                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 141; extern void __fastcall sgx_load_bat( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  442                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 142; extern void __fastcall sgx_far_load_bat( unsigned int vram<_di>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  443                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 144; extern void __fastcall __macro sgx_load_sprites( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_groups<acc> );
  444                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 145; extern void __fastcall __macro sgx_far_load_sprites( unsigned int vram<_di>, unsigned int num_groups<acc> );
  445                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 147; extern void __fastcall sgx_vram2vram( unsigned int vram_dst<_ax>, unsigned int vram_src<_bx>, unsigned int word_len<_cx> );
  446                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 150; // *************
  447                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 151; // Font Functions
  448                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 152; // *************
  449                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 154; extern void __fastcall set_font_addr( unsigned int vram<acc> );
  450                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 155; extern void __fastcall set_font_pal( unsigned char palette<acc> );
  451                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 157; extern void __fastcall load_font( unsigned char __far *font<_bp_bank:_bp>, unsigned char count<_al>, unsigned int vram<acc> );
  452                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 158; extern void __fastcall far_load_font( unsigned char count<_al>, unsigned int vram<acc> );
  453                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 160; extern void __fastcall __nop set_font_color( unsigned char foreground<monofont_fg>, unsigned char background<monofont_bg> );
  454                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 161; extern void __fastcall __macro load_default_font( void );
  455                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 164; // *************
  456                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 165; // SuperGRAFX Font Functions
  457                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 166; // *************
  458                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 168; extern void __fastcall sgx_set_font_addr( unsigned int vram<acc> );
  459                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 169; extern void __fastcall sgx_set_font_pal( unsigned char palette<acc> );
  460                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 171; extern void __fastcall sgx_load_font( char __far *font<_bp_bank:_bp>, unsigned char count<_al>, unsigned int vram<acc> );
  461                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 172; extern void __fastcall sgx_far_load_font( unsigned char count<_al>, unsigned int vram<acc> );
  462                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 174; extern void __fastcall __macro sgx_load_default_font( void );
  463                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 177; // *************
  464                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 178; // Deprecated functions ...
  465                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 179; // *************
  466                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 181; extern void __fastcall __macro set_xres( unsigned int x_pixels<_ax> );
  467                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 182; extern void __fastcall __macro sgx_set_xres( unsigned int x_pixels<_ax> );
  468                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 184; extern void __fastcall load_background( unsigned char __far *tiles<_bp_bank:_bp>, unsigned char __far *palettes<__fbank:__fptr>, unsigned char __far *bat<_cl:_bx>, unsigned char w<_dl>, unsigned char h<_dh> );
  469                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 186; extern void __fastcall __macro set_bgpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp> );
  470                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 187; extern void __fastcall __macro set_bgpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_palettes<_ah> );
  471                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 188; extern void __fastcall __macro set_sprpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp> );
  472                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 189; extern void __fastcall __macro set_sprpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_palettes<_ah> );
  473                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 191; extern void __fastcall load_font( char __far *font<_bp_bank:_bp>, unsigned char count<_al> );
  474                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 193; extern void __fastcall put_string( unsigned char *string<_bp>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
  475                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 195; extern void __fastcall put_char( unsigned char digit<_bl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
  476                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 196; extern void __fastcall put_digit( unsigned char digit<_bl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
  477                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 197; extern void __fastcall put_hex( unsigned int number<_bx>, unsigned char length<_cl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
  478                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 198; extern void __fastcall put_number( unsigned int number<_bx>, unsigned char length<_cl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
  479                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 199; extern void __fastcall put_raw( unsigned int data<_bx>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
  480                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 201; #endif // __HUCC__
  481                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 203; #endif // _hucc_gfx_h
  482                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
  483                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 1; #ifndef _hucc_string_h
  484                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 2; #define _hucc_string_h
  485                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 4; /****************************************************************************
  486                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 5; ; ***************************************************************************
  487                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 6; ;
  488                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 7; ; hucc-string.h
  489                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 8; ;
  490                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 9; ; Not-quite-standard, but fast, replacements for <string.h>.
  491                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 10; ;
  492                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 11; ; Copyright John Brandwood 2024.
  493                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 12; ;
  494                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 13; ; Distributed under the Boost Software License, Version 1.0.
  495                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
  496                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
  497                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 16; ;
  498                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 17; ; ***************************************************************************
  499                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 18; ; ***************************************************************************
  500                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 19; ;
  501                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 20; ; !!! WARNING : non-standard return values !!!
  502                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 21; ;
  503                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 22; ; Strings are limited to a maximum of 255 characters (+ the terminator)!
  504                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 23; ;
  505                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 24; ; The memcpy(), strcpy() and strcat() functions do NOT return the destination
  506                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 25; ; address, and they are declared "void" to check that the value is not used.
  507                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 26; ;
  508                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 27; ; mempcpy() is provided which returns the end address instead of the starting
  509                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 28; ; address, because this is typically more useful.
  510                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 29; ;
  511                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 30; ; Please note that both memcpy() and memset() are implemented using a TII for
  512                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 31; ; speed, and so the length should be < 16 bytes if used in time-critical bits
  513                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 32; ; of code (such as when using a split screen) because they delay interrupts.
  514                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 33; ;
  515                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 34; ; strncpy() and strncat() are not provided, because strncpy() was not created
  516                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 35; ; for the purpose of avoiding string overruns, and strncat() is just a poorly
  517                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 36; ; designed function IMHO.
  518                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 37; ;
  519                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 38; ; POSIX strlcpy() and strlcat() are provided instead, but once again they are
  520                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 39; ; slightly non-standard in that the return value when there is an overflow is
  521                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 40; ; the buffer size (so that the overflow can be detected), instead of the full
  522                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 41; ; size of the destination string that was too big to fit in the buffer.
  523                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 42; ;
  524                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 43; ; ***************************************************************************
  525                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 44; ; **************************************************************************/
  526                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 46; // *************
  527                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 47; // Functions in hucc-string.asm ...
  528                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 48; // *************
  529                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 50; #ifdef __HUCC__
  530                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 52; #asmdef	HUCC_USES_STRING 1
  531               0001     	HUCC_USES_STRING = 1
  532                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 54; extern void __fastcall strcpy( char *destination<_di>, char *source<_bp> );
  533                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 55; extern void __fastcall strcat( char *destination<_di>, char *source<_bp> );
  534                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 57; extern unsigned int __fastcall strlen( char *source<_bp> );
  535                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 59; extern unsigned int __fastcall strlcpy( char *destination<_di>, char *source<_bp>, unsigned char size<acc> );
  536                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 60; extern unsigned int __fastcall strlcat( char *destination<_di>, char *source<_bp>, unsigned char size<acc> );
  537                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 62; extern void __fastcall memcpy( unsigned char *destination<ram_tii_dst>, unsigned char *source<ram_tii_src>, unsigned int count<acc> );
  538                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 63; extern void __fastcall farmemcpy( unsigned char *destination<ram_tii_dst>, unsigned char __far *source<_bp_bank:ram_tii_src>, unsigned int count<acc> );
  539                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 64; extern void __fastcall far_memcpy( unsigned char *destination<ram_tii_dst>, unsigned int count<acc> );
  540                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 66; extern unsigned char * __fastcall mempcpy( unsigned char *destination<ram_tii_dst>, unsigned char *source<ram_tii_src>, unsigned int count<acc> );
  541                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 67; extern unsigned char * __fastcall farmempcpy( unsigned char *destination<ram_tii_dst>, unsigned char __far *source<_bp_bank:ram_tii_src>, unsigned int count<acc> );
  542                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 68; extern unsigned char * __fastcall far_mempcpy( unsigned char *destination<ram_tii_dst>, unsigned int count<acc> );
  543                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 70; extern void __fastcall memset( unsigned char *destination<ram_tii_src>, unsigned char value<_al>, unsigned int count<acc> );
  544                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 72; //  0 	if strings are equal
  545                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 73; //  1 	if the first non-matching character in string1 > string2 (in ASCII).
  546                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 74; // -1 	if the first non-matching character in string1 < string2 (in ASCII).
  547                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 76; extern int __fastcall strcmp( char *string1<_di>, char *string2<_bp> );
  548                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 77; extern int __fastcall strncmp( char *string1<_di>, char *string2<_bp>, unsigned int count<_ax> );
  549                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 79; extern int __fastcall __macro memcmp( unsigned char *string1<_di>, unsigned char *string2<_bp>, unsigned int count<acc> );
  550                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 80; extern int __fastcall farmemcmp( unsigned char *string1<_di>, unsigned char __far *string2<_bp_bank:_bp>, unsigned int count<acc> );
  551                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 81; extern int __fastcall far_memcmp( unsigned char *string1<_di>, unsigned int count<acc> );
  552                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 83; #endif // __HUCC__
  553                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 85; #endif // _hucc_string_h
  554                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
  555                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 1; #ifndef _hucc_old_scroll_h
  556                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 2; #define _hucc_old_scroll_h
  557                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 4; /****************************************************************************
  558                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 5; ; ***************************************************************************
  559                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 6; ;
  560                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 7; ; hucc-old-scroll.h
  561                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 8; ;
  562                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 9; ; Based on the original HuC and MagicKit functions by David Michel and the
  563                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 10; ; other original HuC developers.
  564                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 11; ;
  565                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 12; ; Modifications copyright John Brandwood 2024.
  566                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 13; ;
  567                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 14; ; Distributed under the Boost Software License, Version 1.0.
  568                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 15; ; (See accompanying file LICENSE_1_0.txt or copy at
  569                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 16; ;  http://www.boost.org/LICENSE_1_0.txt)
  570                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 17; ;
  571                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 18; ; ***************************************************************************
  572                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 19; ; ***************************************************************************
  573                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 20; ;
  574                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 21; ; HuC's old scrolling library is provided for use with existing HuC projects,
  575                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 22; ; but it should preferably be avoided in new projects because it is slow and
  576                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 23; ; forever limited by its choice to handle gaps between areas, and sorting.
  577                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 24; ;
  578                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 25; ; HuCC's new scrolling library puts the responibility for defining both gaps
  579                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 26; ; and the display order into the project's hands, but in return it runs much
  580                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 27; ; faster, using less than 1/6 of the processing time in VBLANK, and far less
  581                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 28; ; time in the RCR interrputs themselves. It also supports the 2nd SuperGRAFX
  582                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 29; ; screen layer, which HuC's old scrolling library ignores.
  583                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 30; ;
  584                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 31; ; ***************************************************************************
  585                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 32; ; **************************************************************************/
  586                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 34; // *************
  587                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 35; // Functions in hucc-old-scroll.asm ...
  588                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 36; // *************
  589                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 38; #ifdef __HUCC__
  590                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 40; #asmdef	HUCC_USES_OLD_SCROLL 1
  591               0001     	HUCC_USES_OLD_SCROLL = 1
  592                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 42; extern void __fastcall scroll( unsigned char num<_al>, unsigned int x<_cx>, unsigned int y<_dx>, unsigned char top<_ah>, unsigned char bottom<_bl>, unsigned char disp<acc> );
  593                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 43; extern void __fastcall scroll_disable( unsigned char num<acc> );
  594                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 45; #endif // __HUCC__
  595                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 47; #endif // _hucc_old_scroll_h
  596                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
  597                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 1; #ifndef _hucc_old_spr_h
  598                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 2; #define _hucc_old_spr_h
  599                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 4; /****************************************************************************
  600                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 5; ; ***************************************************************************
  601                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 6; ;
  602                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 7; ; hucc-old-spr.h
  603                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 8; ;
  604                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 9; ; Based on the original HuC and MagicKit functions by David Michel and the
  605                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 10; ; other original HuC developers.
  606                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 11; ;
  607                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 12; ; Modifications copyright John Brandwood 2024.
  608                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 13; ;
  609                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 14; ; Distributed under the Boost Software License, Version 1.0.
  610                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 15; ; (See accompanying file LICENSE_1_0.txt or copy at
  611                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 16; ;  http://www.boost.org/LICENSE_1_0.txt)
  612                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 17; ;
  613                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 18; ; ***************************************************************************
  614                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 19; ; **************************************************************************/
  615                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 21; // *************
  616                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 22; // Sprite defines ...
  617                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 23; // *************
  618                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 25; #define FLIP_X_MASK 0x08
  619                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 26; #define FLIP_Y_MASK 0x80
  620                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 27; #define FLIP_MAS    0x88
  621                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 28; #define SIZE_MAS    0x31
  622                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 30; #define NO_FLIP     0x00
  623                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 31; #define NO_FLIP_X   0x00
  624                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 32; #define NO_FLIP_Y   0x00
  625                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 33; #define FLIP_X      0x08
  626                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 34; #define FLIP_Y      0x80
  627                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 35; #define SZ_16x16    0x00
  628                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 36; #define SZ_16x32    0x10
  629                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 37; #define SZ_16x64    0x30
  630                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 38; #define SZ_32x16    0x01
  631                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 39; #define SZ_32x32    0x11
  632                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 40; #define	SZ_32x64    0x31
  633                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 42; // *************
  634                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 43; // Functions in hucc-old-spr.asm ...
  635                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 44; // *************
  636                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 46; #ifdef __HUCC__
  637                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 48; #asmdef	HUCC_USES_OLD_SPR 1
  638               0001     	HUCC_USES_OLD_SPR = 1
  639                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 50; extern void __fastcall init_satb( void );
  640                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 51; extern void __fastcall reset_satb( void );
  641                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 52; extern void __fastcall satb_update( void );
  642                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 53; extern void __fastcall spr_set( unsigned char num<acc> );
  643                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 54; extern void __fastcall spr_hide( void );
  644                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 55; extern void __fastcall spr_show( void );
  645                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 56; extern void __fastcall spr_x( unsigned int value<acc> );
  646                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 57; extern void __fastcall spr_y( unsigned int value<acc> );
  647                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 58; extern void __fastcall spr_pattern( unsigned int vaddr<acc> );
  648                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 59; extern void __fastcall spr_ctrl( unsigned char mask<_al>, unsigned char value<acc> );
  649                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 60; extern void __fastcall spr_pal( unsigned char palette<acc> );
  650                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 61; extern void __fastcall spr_pri( unsigned char priority<acc> );
  651                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 63; extern unsigned int __fastcall spr_get_x( void );
  652                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 64; extern unsigned int __fastcall spr_get_y( void );
  653                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 66; extern void __fastcall sgx_init_satb( void );
  654                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 67; extern void __fastcall sgx_reset_satb( void );
  655                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 68; extern void __fastcall sgx_satb_update( void );
  656                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 69; extern void __fastcall sgx_spr_set( unsigned char num<acc> );
  657                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 70; extern void __fastcall sgx_spr_hide( void );
  658                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 71; extern void __fastcall sgx_spr_show( void );
  659                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 72; extern void __fastcall sgx_spr_x( unsigned int value<acc> );
  660                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 73; extern void __fastcall sgx_spr_y( unsigned int value<acc> );
  661                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 74; extern void __fastcall sgx_spr_pattern( unsigned int vaddr<acc> );
  662                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 75; extern void __fastcall sgx_spr_ctrl( unsigned char mask<_al>, unsigned char value<acc> );
  663                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 76; extern void __fastcall sgx_spr_pal( unsigned char palette<acc> );
  664                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 77; extern void __fastcall sgx_spr_pri( unsigned char priority<acc> );
  665                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 79; extern unsigned int __fastcall sgx_spr_get_x( void );
  666                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 80; extern unsigned int __fastcall sgx_spr_get_y( void );
  667                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 82; #endif // __HUCC__
  668                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 84; #endif // _hucc_old_spr_h
  669                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
  670                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 1; #ifndef _hucc_old_map_h
  671                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 2; #define _hucc_old_map_h
  672                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 4; /****************************************************************************
  673                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 5; ; ***************************************************************************
  674                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 6; ;
  675                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 7; ; hucc-old-map.h
  676                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 8; ;
  677                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 9; ; Based on the original HuC and MagicKit functions by David Michel and the
  678                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 10; ; other original HuC developers.
  679                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 11; ;
  680                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 12; ; Modifications copyright John Brandwood 2024.
  681                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 13; ;
  682                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 14; ; Distributed under the Boost Software License, Version 1.0.
  683                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 15; ; (See accompanying file LICENSE_1_0.txt or copy at
  684                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 16; ;  http://www.boost.org/LICENSE_1_0.txt)
  685                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 17; ;
  686                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 18; ; ***************************************************************************
  687                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 19; ; **************************************************************************/
  688                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 21; // *************
  689                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 22; // Functions in hucc-old-map.asm ...
  690                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 23; // *************
  691                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 25; #ifdef __HUCC__
  692                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 27; #asmdef	HUCC_USES_OLD_MAP 1
  693               0001     	HUCC_USES_OLD_MAP = 1
  694                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 29; extern void __fastcall set_tile_address( unsigned int vram<_di> );
  695                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 30; extern void __fastcall sgx_set_tile_address( unsigned int vram<_di> );
  696                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 32; extern void __fastcall __nop set_tile_data( unsigned char __far *tiles<vdc_tile_bank:vdc_tile_addr>, unsigned char num_tiles<vdc_num_tiles>, unsigned char __far *palette_table<vdc_attr_bank:vdc_attr_addr>, unsigned char tile_type<vdc_tile_type> );
  697                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 33; extern void __fastcall __nop sgx_set_tile_data( unsigned char __far *tiles<sgx_tile_bank:sgx_tile_addr>, unsigned char num_tiles<sgx_num_tiles>, unsigned char __far *palette_table<sgx_attr_bank:sgx_attr_addr>, unsigned char tile_type<sgx_tile_type> );
  698                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 35; extern void __fastcall __nop set_far_tile_data( unsigned char tile_bank<vdc_tile_bank>, unsigned char *tile_addr<vdc_tile_addr>, unsigned char num_tiles<vdc_num_tiles>, unsigned char palette_table_bank<vdc_attr_bank>, unsigned char *palette_table_addr<vdc_attr_addr>, unsigned char tile_type<vdc_tile_type> );
  699                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 36; extern void __fastcall __nop sgx_set_far_tile_data( unsigned char tile_bank<sgx_tile_bank>, unsigned char *tile_addr<sgx_tile_addr>, unsigned char num_tiles<sgx_num_tiles>, unsigned char palette_table_bank<sgx_attr_bank>, unsigned char *palette_table_addr<sgx_attr_addr>, unsigned char tile_type<sgx_tile_type> );
  700                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 38; extern void __fastcall __nop set_map_data( unsigned char __far *map<vdc_map_bank:vdc_map_addr>, unsigned char w<vdc_map_width>, unsigned char h<vdc_map_height> );
  701                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 39; extern void __fastcall __nop sgx_set_map_data( unsigned char __far *map<sgx_map_bank:sgx_map_addr>, unsigned char w<sgx_map_width>, unsigned char h<sgx_map_height> );
  702                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 41; extern void __fastcall __nop set_far_map_data( unsigned char map_bank<vdc_map_bank>, unsigned char *map_addr<vdc_map_addr>, unsigned char w<vdc_map_width>, unsigned char h<vdc_map_height> );
  703                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 42; extern void __fastcall __nop sgx_set_far_map_data( unsigned char map_bank<vdc_map_bank>, unsigned char *map_addr<vdc_map_addr>, unsigned char w<sgx_map_width>, unsigned char h<sgx_map_height> );
  704                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 44; extern void __fastcall load_tile( unsigned int vram<_di> );
  705                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 45; extern void __fastcall sgx_load_tile( unsigned int vram<_di> );
  706                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 47; extern void __fastcall load_map( unsigned char bat_x<_al>, unsigned char bat_y<_ah>, int map_x<_bx>, int map_y<_dx>, unsigned char tiles_w<_cl>, unsigned char tiles_h<_ch> );
  707                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 48; extern void __fastcall sgx_load_map( unsigned char bat_x<_al>, unsigned char bat_y<_ah>, int map_x<_bx>, int map_y<_dx>, unsigned char tiles_w<_cl>, unsigned char tiles_h<_ch> );
  708                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 50; extern unsigned char __fastcall map_get_tile( unsigned char map_x<_bl>, unsigned char map_y<_bh> );
  709                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 51; extern unsigned char __fastcall sgx_map_get_tile( unsigned char map_x<_bl>, unsigned char map_y<_bh> );
  710                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 53; extern void __fastcall map_put_tile( unsigned char map_x<_bl>, unsigned char map_y<_bh>, unsigned char tile<_al> );
  711                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 54; extern void __fastcall sgx_map_put_tile( unsigned char map_x<_bl>, unsigned char map_y<_bh>, unsigned char tile<_al> );
  712                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 56; extern void __fastcall put_tile( unsigned char tile<_bl>, unsigned char bat_x<_al>, unsigned char bat_y<_ah> );
  713                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 57; extern void __fastcall sgx_put_tile( unsigned char tile<_bl>, unsigned char bat_x<_al>, unsigned char bat_y<_ah> );
  714                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 59; // Deprecated functions ...
  715                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 61; extern void __fastcall set_tile_data( unsigned char *tile_ex<_di> );
  716                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 63; extern void __fastcall __nop set_map_pals( unsigned char __far *palette_table<vdc_attr_bank:vdc_attr_addr> );
  717                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 64; extern void __fastcall __nop set_map_tile_type( unsigned char tile_type<vdc_tile_type> );
  718                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 66; extern void __fastcall __nop sgx_set_map_pals( unsigned char __far *palette_table<sgx_attr_bank:sgx_attr_addr> );
  719                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 67; extern void __fastcall __nop sgx_set_map_tile_type( unsigned char tile_type<sgx_tile_type> );
  720                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 69; extern void __fastcall set_map_tile_base( unsigned int vram<_di> );
  721                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 70; extern void __fastcall sgx_set_map_tile_base( unsigned int vram<_di> );
  722                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 72; #endif // __HUCC__
  723                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 74; #endif // _hucc_old_map_h
  724                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
  725                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 1; #ifndef _hucc_old_line_h
  726                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 2; #define _hucc_old_line_h
  727                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 4; /****************************************************************************
  728                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 5; ; ***************************************************************************
  729                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 6; ;
  730                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 7; ; hucc-old-line.h
  731                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 8; ;
  732                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 9; ; Based on the original HuC and MagicKit functions by David Michel and the
  733                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 10; ; other original HuC developers.
  734                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 11; ;
  735                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 12; ; Modifications copyright John Brandwood 2024.
  736                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 13; ;
  737                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 14; ; Distributed under the Boost Software License, Version 1.0.
  738                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 15; ; (See accompanying file LICENSE_1_0.txt or copy at
  739                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 16; ;  http://www.boost.org/LICENSE_1_0.txt)
  740                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 17; ;
  741                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 18; ; ***************************************************************************
  742                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 19; ; **************************************************************************/
  743                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 21; // *************
  744                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 22; // Functions in hucc-old-line.asm ...
  745                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 23; // *************
  746                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 25; #ifdef __HUCC__
  747                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 27; #asmdef	HUCC_USES_OLD_LINE 1
  748               0001     	HUCC_USES_OLD_LINE = 1
  749                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 29; extern void __fastcall gfx_init( unsigned int start_vram_addr<_ax> );
  750                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 30; extern void __fastcall gfx_clear( unsigned int start_vram_addr<_di> );
  751                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 31; extern void __fastcall gfx_plot( unsigned int x<_gfx_x1>, unsigned int y<_gfx_y1>, char color<_gfx_color> );
  752                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 32; extern void __fastcall gfx_line( unsigned int x1<_gfx_x1>, unsigned int y1<_gfx_y1>, unsigned int x2<_gfx_x2>, unsigned int y2<_gfx_y2>, unsigned char color<_gfx_color> );
  753                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 34; #endif // __HUCC__
  754                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 36; #endif // _hucc_old_line_h
  755                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
  756                        		.dbg	line,	"main.c", 1; #include "huc.h"
  757                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
  758                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
  759                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
  760                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
  761                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
  762                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
  763                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
  764                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
  765                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
  766                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
  767                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
  768                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
  769                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
  770                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
  771                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
  772                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
  773                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
  774                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
  775                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
  776                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
  777                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
  778                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
  779                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
  780                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
  781                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
  782                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
  783                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
  784                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
  785                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
  786                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
  787                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
  788                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
  789                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
  790                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
  791                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
  792                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
  793                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
  794                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
  795                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
  796                        		.dbg	line,	"main.c", 2; #include "hucc-scroll.h"
  797                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 1; #ifndef _hucc_scroll_h
  798                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 2; #define _hucc_scroll_h
  799                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 4; /****************************************************************************
  800                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 5; ; ***************************************************************************
  801                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 6; ;
  802                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 7; ; hucc-scroll.h
  803                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 8; ;
  804                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 9; ; Routines for a fast split-screen scrolling system.
  805                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 10; ;
  806                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 11; ; Copyright John Brandwood 2024.
  807                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 12; ;
  808                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 13; ; Distributed under the Boost Software License, Version 1.0.
  809                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
  810                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
  811                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 16; ;
  812                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 17; ; ***************************************************************************
  813                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 18; ; ***************************************************************************
  814                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 19; ;
  815                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 20; ; The maximum number of splits for each screen layer is set in your project's
  816                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 21; ; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
  817                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 22; ;
  818                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 23; ; Your first active split must be defined to start at screen line 0, and then
  819                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 24; ; the rest of the active splits must be in increasing line order to match the
  820                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 25; ; way that the PC Engine displays the output image.
  821                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 26; ;
  822                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 27; ; You can have disabled splits interleaved with your active splits.
  823                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 28; ;
  824                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 29; ; Splits that are normally disabled can be used to create full screen effects
  825                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 30; ; such as bouncing the screen up and down by adding blank areas at the top or
  826                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 31; ; bottom of the screen, and then rapidly changing the height of those areas.
  827                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 32; ;
  828                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 33; ; ***************************************************************************
  829                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 34; ; **************************************************************************/
  830                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 36; // *************
  831                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 37; // VDC bits for display_flags ...
  832                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 38; // *************
  833                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 40; #ifndef BKG_OFF
  834                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 41; #define BKG_OFF 0x00
  835                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 42; #endif
  836                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 44; #ifndef SPR_OFF
  837                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 45; #define SPR_OFF 0x00
  838                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 46; #endif
  839                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 48; #ifndef BKG_ON
  840                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 49; #define BKG_ON 0x80
  841                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 50; #endif
  842                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 52; #ifndef SPR_ON
  843                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 53; #define SPR_ON 0x40
  844                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 54; #endif
  845                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 56; // *************
  846                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 57; // Functions in hucc-scroll.asm ...
  847                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 58; // *************
  848                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 60; #ifdef __HUCC__
  849                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 62; #asmdef	HUCC_USES_NEW_SCROLL 1
  850               0001     	HUCC_USES_NEW_SCROLL = 1
  851                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 64; extern void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
  852                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 65; extern void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
  853                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 67; extern void __fastcall disable_split( unsigned char index<acc> );
  854                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 68; extern void __fastcall sgx_disable_split( unsigned char index<acc> );
  855                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 70; extern void __fastcall __macro disable_all_splits( void );
  856                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 71; extern void __fastcall __macro sgx_disable_all_splits( void );
  857                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 73; #asm
  858                        		.dbg	clear
  859                        			.macro	_disable_all_splits
  860                        			ldy	#HUCC_PCE_SPLITS - 1
  861                        	!loop:		tya
  862                        			call	_disable_split.1
  863                        			dey
  864                        			bpl	!loop-
  865                        			.endm
  866                        			.macro	_sgx_disable_all_splits
  867                        			ldy	#HUCC_SGX_SPLITS - 1
  868                        	!loop:		tya
  869                        			call	_sgx_disable_split.1
  870                        			dey
  871                        			bpl	!loop-
  872                        			.endm
  873                        	
  874                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 89; #endasm
  875                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 91; #endif // __HUCC__
  876                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 93; #endif // _hucc_scroll_h
  877                        		.dbg	line,	"main.c", 3; #include "hucc-chrmap.h"
  878                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 1; #ifndef _hucc_chrmap_h
  879                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 2; #define _hucc_chrmap_h
  880                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 4; /****************************************************************************
  881                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 5; ; ***************************************************************************
  882                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 6; ;
  883                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 7; ; hucc-chrmap.h
  884                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 8; ;
  885                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 9; ; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
  886                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 10; ;
  887                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 11; ; Copyright John Brandwood 2025.
  888                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 12; ;
  889                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
  890                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
  891                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
  892                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 16; ;
  893                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 17; ; ***************************************************************************
  894                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 18; ; ***************************************************************************
  895                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 19; ;
  896                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 20; ; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
  897                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 21; ;
  898                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 22; ; The maximum total size for a chrmap is 16KBytes, which allows for maps up
  899                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 23; ; to 256x32 tiles (2048x256 pixels).
  900                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 24; ;
  901                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 25; ; ***************************************************************************
  902                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 26; ; **************************************************************************/
  903                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 28; // *************
  904                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 29; // This code extends the blkmap library ...
  905                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 30; // *************
  906                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 32; #include "hucc-blkmap.h"
  907                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
  908                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
  909                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
  910                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
  911                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
  912                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
  913                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
  914                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
  915                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
  916                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
  917                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
  918                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
  919                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
  920                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
  921                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
  922                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
  923                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
  924                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
  925                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
  926                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
  927                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
  928                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
  929                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
  930                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
  931                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
  932                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
  933                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
  934                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
  935                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
  936                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
  937                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
  938                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
  939                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
  940                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
  941                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
  942                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
  943                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
  944               0001     	HUCC_USES_BLKMAP = 1
  945                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
  946                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
  947                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
  948                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
  949                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
  950                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
  951                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
  952                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
  953                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
  954                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
  955                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
  956                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
  957                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
  958                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
  959                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
  960                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
  961                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
  962                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
  963                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
  964                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
  965                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
  966                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
  967                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
  968                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
  969                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
  970                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
  971                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
  972                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
  973                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
  974                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
  975                        		.dbg	clear
  976                        			.macro	_set_blkmap.2
  977                        			stz	vdc_scr_bank
  978                        			.endm
  979                        			.macro	_set_multimap.2
  980                        			lda	vdc_bat_width
  981                        			lsr	a
  982                        			sta	vdc_map_line_w
  983                        			.endm
  984                        			.macro	SCREEN
  985                        			db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
  986                        			db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
  987                        			db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
  988                        			dw	(\4)
  989                        			.endm
  990                        	
  991                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
  992                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
  993                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
  994                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
  995                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
  996                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
  997                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
  998                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
  999                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
 1000                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
 1001                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
 1002                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
 1003                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
 1004                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
 1005                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
 1006                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
 1007                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
 1008                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
 1009                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
 1010                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
 1011                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
 1012                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
 1013                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
 1014                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
 1015                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
 1016                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1017                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 1018                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
 1019                        		.dbg	clear
 1020                        			.macro	_sgx_set_blkmap.2
 1021                        			stz	sgx_scr_bank
 1022                        			.endm
 1023                        			.macro	_sgx_set_multimap.2
 1024                        			lda	sgx_bat_width
 1025                        			lsr	a
 1026                        			sta	sgx_map_line_w
 1027                        			.endm
 1028                        	
 1029                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
 1030                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
 1031                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
 1032                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
 1033                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 34; // *************
 1034                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 35; // Functions in chrmap.asm ...
 1035                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 36; // *************
 1036                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 38; #ifdef __HUCC__
 1037                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 40; #asmdef	HUCC_USES_CHRMAP 1
 1038               0001     	HUCC_USES_CHRMAP = 1
 1039                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 42; extern void __fastcall __nop set_chrmap( unsigned char __far *chrmap<vdc_map_bank:vdc_map_addr>, unsigned char tiles_w<vdc_map_line_w> );
 1040                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 44; extern void __fastcall draw_bat( void );
 1041                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 45; extern void __fastcall scroll_bat( void );
 1042                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 47; extern void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1043                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 49; #ifdef _SGX
 1044                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 51; extern void __fastcall __nop sgx_set_chrmap( unsigned char __far *chrmap<sgx_map_bank:sgx_map_addr>, unsigned char tiles_w<sgx_map_line_w> );
 1045                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 53; extern void __fastcall sgx_draw_bat( void );
 1046                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 54; extern void __fastcall sgx_scroll_bat( void );
 1047                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 56; extern void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1048                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 58; #endif
 1049                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 60; #endif // __HUCC__
 1050                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 62; #endif // _hucc_chrmap_h
 1051                        		.dbg	line,	"main.c", 4; #include "hucc-blkmap.h"
 1052                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
 1053                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
 1054                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
 1055                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
 1056                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
 1057                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
 1058                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
 1059                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
 1060                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
 1061                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
 1062                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
 1063                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1064                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1065                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1066                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
 1067                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
 1068                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
 1069                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
 1070                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
 1071                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
 1072                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
 1073                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
 1074                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
 1075                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
 1076                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
 1077                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
 1078                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
 1079                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
 1080                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
 1081                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
 1082                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
 1083                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
 1084                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
 1085                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
 1086                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
 1087                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
 1088                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
 1089                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
 1090                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
 1091                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
 1092                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
 1093                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
 1094                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
 1095                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
 1096                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
 1097                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
 1098                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
 1099                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
 1100                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
 1101                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
 1102                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
 1103                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
 1104                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
 1105                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
 1106                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
 1107                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
 1108                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
 1109                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
 1110                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
 1111                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
 1112                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
 1113                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
 1114                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
 1115                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
 1116                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1117                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 1118                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
 1119                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 86; .macro	_set_blkmap.2
 1120                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 87; stz	vdc_scr_bank
 1121                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 88; .endm
 1122                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 90; .macro	_set_multimap.2
 1123                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 91; lda	vdc_bat_width
 1124                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 92; lsr	a
 1125                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 93; sta	vdc_map_line_w
 1126                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 94; .endm
 1127                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 96; .macro	SCREEN
 1128                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 97; db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
 1129                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 98; db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
 1130                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 99; db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
 1131                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 100; dw	(\4)
 1132                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 101; .endm
 1133                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
 1134                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
 1135                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
 1136                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
 1137                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
 1138                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
 1139                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
 1140                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
 1141                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
 1142                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
 1143                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
 1144                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
 1145                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
 1146                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
 1147                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
 1148                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
 1149                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
 1150                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
 1151                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
 1152                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
 1153                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
 1154                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
 1155                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
 1156                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
 1157                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
 1158                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1159                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 1160                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
 1161                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 144; .macro	_sgx_set_blkmap.2
 1162                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 145; stz	sgx_scr_bank
 1163                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 146; .endm
 1164                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 148; .macro	_sgx_set_multimap.2
 1165                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 149; lda	sgx_bat_width
 1166                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 150; lsr	a
 1167                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 151; sta	sgx_map_line_w
 1168                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 152; .endm
 1169                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
 1170                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
 1171                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
 1172                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
 1173                        		.dbg	line,	"main.c", 7; #include "include/constants.c"
 1174                        		.dbg	line,	"include\constants.c", 1; //*****************************************************************************//
 1175                        		.dbg	line,	"include\constants.c", 2; //                                                                             //
 1176                        		.dbg	line,	"include\constants.c", 3; //                                SYSTEM CONSTANTS                             //
 1177                        		.dbg	line,	"include\constants.c", 4; //                                                                             //
 1178                        		.dbg	line,	"include\constants.c", 5; //*****************************************************************************//
 1179                        		.dbg	line,	"include\constants.c", 7; #define FALSE 0
 1180                        		.dbg	line,	"include\constants.c", 8; #define TRUE  1
 1181                        		.dbg	line,	"include\constants.c", 10; #define YES   1
 1182                        		.dbg	line,	"include\constants.c", 11; #define NO    2
 1183                        		.dbg	line,	"include\constants.c", 13; #define JOYPAD_1 0
 1184                        		.dbg	line,	"include\constants.c", 14; #define JOYPAD_2 1
 1185                        		.dbg	line,	"include\constants.c", 16; #define BAT_SIZE_W 2048 // IN PIXELS
 1186                        		.dbg	line,	"include\constants.c", 17; #define BAT_SIZE_H 256  // IN PIXELS
 1187                        		.dbg	line,	"include\constants.c", 19; #define NUMBERS_FONT_VRAM_ADR   0x0900
 1188                        		.dbg	line,	"include\constants.c", 21; #define JOY_DIR_PRESSED (JOY_DOWN | JOY_UP | JOY_RIGHT | JOY_LEFT)
 1189                        		.dbg	line,	"include\constants.c", 24; #define TILES_1   16
 1190                        		.dbg	line,	"include\constants.c", 25; #define TILES_2   32
 1191                        		.dbg	line,	"include\constants.c", 26; #define TILES_3   48
 1192                        		.dbg	line,	"include\constants.c", 27; #define TILES_4   64
 1193                        		.dbg	line,	"include\constants.c", 28; #define TILES_8   128
 1194                        		.dbg	line,	"include\constants.c", 29; #define TILES_12  192
 1195                        		.dbg	line,	"include\constants.c", 30; #define TILES_16  256
 1196                        		.dbg	line,	"include\constants.c", 31; #define TILES_32  512
 1197                        		.dbg	line,	"include\constants.c", 32; #define TILES_48  768
 1198                        		.dbg	line,	"include\constants.c", 33; #define TILES_64  1024
 1199                        		.dbg	line,	"include\constants.c", 34; #define TILES_80  1280
 1200                        		.dbg	line,	"include\constants.c", 35; #define TILES_96  1536
 1201                        		.dbg	line,	"include\constants.c", 36; #define TILES_352 5632
 1202                        		.dbg	line,	"include\constants.c", 41; #define SEQUENCE_TITLE      0
 1203                        		.dbg	line,	"include\constants.c", 42; #define SEQUENCE_INTRO      1
 1204                        		.dbg	line,	"include\constants.c", 43; #define SEQUENCE_GAME       2
 1205                        		.dbg	line,	"include\constants.c", 44; #define SEQUENCE_NPC        3
 1206                        		.dbg	line,	"include\constants.c", 45; #define SEQUENCE_SHOP       4
 1207                        		.dbg	line,	"include\constants.c", 48; #define CAMERA_RECENTER_VELOCITY    4
 1208                        		.dbg	line,	"include\constants.c", 53; //-----------------------------------------------------------------------------//
 1209                        		.dbg	line,	"include\constants.c", 54; //                                                                             //
 1210                        		.dbg	line,	"include\constants.c", 55; //                                   PLAYER                                    //
 1211                        		.dbg	line,	"include\constants.c", 56; //                                                                             //
 1212                        		.dbg	line,	"include\constants.c", 57; //-----------------------------------------------------------------------------//
 1213                        		.dbg	line,	"include\constants.c", 59; #define AXIS_RIGHT          0
 1214                        		.dbg	line,	"include\constants.c", 60; #define AXIS_LEFT           1
 1215                        		.dbg	line,	"include\constants.c", 61; #define AXIS_UP             2
 1216                        		.dbg	line,	"include\constants.c", 62; #define AXIS_DOWN           3
 1217                        		.dbg	line,	"include\constants.c", 66; #define STATE_IDLE          0
 1218                        		.dbg	line,	"include\constants.c", 67; #define STATE_WALK          1
 1219                        		.dbg	line,	"include\constants.c", 68; #define STATE_ATTACK        2
 1220                        		.dbg	line,	"include\constants.c", 69; #define STATE_JUMP          4
 1221                        		.dbg	line,	"include\constants.c", 70; #define STATE_JUMP_RIGHT    5
 1222                        		.dbg	line,	"include\constants.c", 71; #define STATE_JUMP_LEFT     6
 1223                        		.dbg	line,	"include\constants.c", 72; #define STATE_CROUCH        7
 1224                        		.dbg	line,	"include\constants.c", 73; #define STATE_CROUCH_ATTACK 8
 1225                        		.dbg	line,	"include\constants.c", 74; #define STATE_FALL          9
 1226                        		.dbg	line,	"include\constants.c", 75; #define STATE_HANG          10
 1227                        		.dbg	line,	"include\constants.c", 76; #define STATE_CLIMB_UP      11
 1228                        		.dbg	line,	"include\constants.c", 77; #define STATE_CLIMB_DOWN    12
 1229                        		.dbg	line,	"include\constants.c", 78; #define STATE_JUMP_LADDER   13
 1230                        		.dbg	line,	"include\constants.c", 79; #define STATE_HANG_ATTACK   14
 1231                        		.dbg	line,	"include\constants.c", 84; #define PLAYER_BASE_Y_POS   128
 1232                        		.dbg	line,	"include\constants.c", 86; #define RESPAWN_DEAD        1
 1233                        		.dbg	line,	"include\constants.c", 87; #define RESPAWN_SHOP        2
 1234                        		.dbg	line,	"include\constants.c", 89; #define PLAYER_START_INDEX  14
 1235                        		.dbg	line,	"include\constants.c", 93; #define PLAYER_VRAM_ADR                     0x1600
 1236                        		.dbg	line,	"include\constants.c", 94; #define PLAYER_IDLE_VRAM_ADR                PLAYER_VRAM_ADR
 1237                        		.dbg	line,	"include\constants.c", 95; #define PLAYER_WALK_1_VRAM_ADR              PLAYER_VRAM_ADR+TILES_16
 1238                        		.dbg	line,	"include\constants.c", 96; #define PLAYER_WALK_2_VRAM_ADR              PLAYER_WALK_1_VRAM_ADR+TILES_16
 1239                        		.dbg	line,	"include\constants.c", 97; #define PLAYER_WALK_3_VRAM_ADR              PLAYER_WALK_2_VRAM_ADR+TILES_16
 1240                        		.dbg	line,	"include\constants.c", 98; #define PLAYER_WALK_4_VRAM_ADR              PLAYER_WALK_3_VRAM_ADR+TILES_16
 1241                        		.dbg	line,	"include\constants.c", 99; #define PLAYER_WALK_5_VRAM_ADR              PLAYER_WALK_4_VRAM_ADR+TILES_16
 1242                        		.dbg	line,	"include\constants.c", 100; #define PLAYER_WALK_6_VRAM_ADR              PLAYER_WALK_5_VRAM_ADR+TILES_16
 1243                        		.dbg	line,	"include\constants.c", 102; #define PLAYER_JUMP_VRAM_ADR                PLAYER_WALK_6_VRAM_ADR+TILES_16
 1244                        		.dbg	line,	"include\constants.c", 103; #define PLAYER_CROUCH_VRAM_ADR              PLAYER_JUMP_VRAM_ADR+TILES_16
 1245                        		.dbg	line,	"include\constants.c", 104; #define PLAYER_HANG_VRAM_ADR                PLAYER_CROUCH_VRAM_ADR+TILES_16
 1246                        		.dbg	line,	"include\constants.c", 106; #define PLAYER_CLIMB_1_VRAM_ADR             PLAYER_HANG_VRAM_ADR+TILES_16
 1247                        		.dbg	line,	"include\constants.c", 107; #define PLAYER_CLIMB_2_VRAM_ADR             PLAYER_CLIMB_1_VRAM_ADR+TILES_16
 1248                        		.dbg	line,	"include\constants.c", 108; #define PLAYER_CLIMB_3_VRAM_ADR             PLAYER_CLIMB_2_VRAM_ADR+TILES_16
 1249                        		.dbg	line,	"include\constants.c", 109; #define PLAYER_CLIMB_4_VRAM_ADR             PLAYER_CLIMB_3_VRAM_ADR+TILES_16
 1250                        		.dbg	line,	"include\constants.c", 110; #define PLAYER_CLIMB_5_VRAM_ADR             PLAYER_CLIMB_4_VRAM_ADR+TILES_16
 1251                        		.dbg	line,	"include\constants.c", 111; #define PLAYER_CLIMB_6_VRAM_ADR             PLAYER_CLIMB_5_VRAM_ADR+TILES_16
 1252                        		.dbg	line,	"include\constants.c", 113; #define PLAYER_FALL_VRAM_ADR                PLAYER_CLIMB_6_VRAM_ADR+TILES_16
 1253                        		.dbg	line,	"include\constants.c", 115; #define PLAYER_ATTACK_1_VRAM_ADR            PLAYER_FALL_VRAM_ADR+TILES_16
 1254                        		.dbg	line,	"include\constants.c", 116; #define PLAYER_ATTACK_2_VRAM_ADR            PLAYER_ATTACK_1_VRAM_ADR+TILES_16
 1255                        		.dbg	line,	"include\constants.c", 118; #define PLAYER_CROUCH_ATTACK_1_VRAM_ADR     PLAYER_ATTACK_2_VRAM_ADR+TILES_16
 1256                        		.dbg	line,	"include\constants.c", 119; #define PLAYER_CROUCH_ATTACK_2_VRAM_ADR     PLAYER_CROUCH_ATTACK_1_VRAM_ADR+TILES_16
 1257                        		.dbg	line,	"include\constants.c", 121; #define PLAYER_JUMP_ATTACK_1_VRAM_ADR       PLAYER_CROUCH_ATTACK_2_VRAM_ADR+TILES_16
 1258                        		.dbg	line,	"include\constants.c", 122; #define PLAYER_JUMP_ATTACK_2_VRAM_ADR       PLAYER_JUMP_ATTACK_1_VRAM_ADR+TILES_16
 1259                        		.dbg	line,	"include\constants.c", 124; #define PLAYER_HANG_ATTACK_1_VRAM_ADR       PLAYER_JUMP_ATTACK_2_VRAM_ADR+TILES_16
 1260                        		.dbg	line,	"include\constants.c", 125; #define PLAYER_HANG_ATTACK_2_VRAM_ADR       PLAYER_HANG_ATTACK_1_VRAM_ADR+TILES_16
 1261                        		.dbg	line,	"include\constants.c", 130; //-----------------------------------------------------------------------------//
 1262                        		.dbg	line,	"include\constants.c", 131; //                                                                             //
 1263                        		.dbg	line,	"include\constants.c", 132; //                                  WEAPONS                                    //
 1264                        		.dbg	line,	"include\constants.c", 133; //                                                                             //
 1265                        		.dbg	line,	"include\constants.c", 134; //-----------------------------------------------------------------------------//
 1266                        		.dbg	line,	"include\constants.c", 136; #define CHAIN_VRAM_ADR                  0x1400
 1267                        		.dbg	line,	"include\constants.c", 137; #define WEAPON_VRAM_ADR                 CHAIN_VRAM_ADR+TILES_4
 1268                        		.dbg	line,	"include\constants.c", 138; #define CHAIN_START_INDEX               PLAYER_START_INDEX-3
 1269                        		.dbg	line,	"include\constants.c", 140; #define WEAPON_IDLE_VRAM_ADRESS         WEAPON_VRAM_ADR
 1270                        		.dbg	line,	"include\constants.c", 141; #define WEAPON_WALK_1_VRAM_ADRESS       WEAPON_IDLE_VRAM_ADRESS+TILES_4
 1271                        		.dbg	line,	"include\constants.c", 142; #define WEAPON_WALK_2_VRAM_ADRESS       WEAPON_WALK_1_VRAM_ADRESS+TILES_4
 1272                        		.dbg	line,	"include\constants.c", 144; #define WEAPON_ATTACK_1_VRAM_ADRESS     WEAPON_WALK_2_VRAM_ADRESS+TILES_4
 1273                        		.dbg	line,	"include\constants.c", 145; #define WEAPON_ATTACK_2_VRAM_ADRESS     WEAPON_ATTACK_1_VRAM_ADRESS+TILES_4
 1274                        		.dbg	line,	"include\constants.c", 150; //-----------------------------------------------------------------------------//
 1275                        		.dbg	line,	"include\constants.c", 151; //                                                                             //
 1276                        		.dbg	line,	"include\constants.c", 152; //                                  COLLISIONS                                 //
 1277                        		.dbg	line,	"include\constants.c", 153; //                                                                             //
 1278                        		.dbg	line,	"include\constants.c", 154; //-----------------------------------------------------------------------------//
 1279                        		.dbg	line,	"include\constants.c", 156; #define TILE_EMPTY          0
 1280                        		.dbg	line,	"include\constants.c", 157; #define TILE_BG             1
 1281                        		.dbg	line,	"include\constants.c", 158; #define TILE_LADDER         2
 1282                        		.dbg	line,	"include\constants.c", 163; //-----------------------------------------------------------------------------//
 1283                        		.dbg	line,	"include\constants.c", 164; //                                                                             //
 1284                        		.dbg	line,	"include\constants.c", 165; //                                     HUD                                     //
 1285                        		.dbg	line,	"include\constants.c", 166; //                                                                             //
 1286                        		.dbg	line,	"include\constants.c", 167; //-----------------------------------------------------------------------------//
 1287                        		.dbg	line,	"include\constants.c", 169; #define LIFEBAR_1_VRAM_ADR      0x1000
 1288                        		.dbg	line,	"include\constants.c", 170; #define LIFEBAR_2_VRAM_ADR      LIFEBAR_1_VRAM_ADR+TILES_2
 1289                        		.dbg	line,	"include\constants.c", 171; #define LIFEBAR_3_VRAM_ADR      LIFEBAR_2_VRAM_ADR+TILES_2
 1290                        		.dbg	line,	"include\constants.c", 172; #define LIFEBAR_4_VRAM_ADR      LIFEBAR_3_VRAM_ADR+TILES_2
 1291                        		.dbg	line,	"include\constants.c", 173; #define LIFEBAR_5_VRAM_ADR      LIFEBAR_4_VRAM_ADR+TILES_2
 1292                        		.dbg	line,	"include\constants.c", 175; #define WEAPON_ICON_VRAM_ADR    LIFEBAR_5_VRAM_ADR+TILES_2
 1293                        		.dbg	line,	"include\constants.c", 176; #define ARMOR_VRAM_ADR          WEAPON_ICON_VRAM_ADR+TILES_4
 1294                        		.dbg	line,	"include\constants.c", 181; //-----------------------------------------------------------------------------//
 1295                        		.dbg	line,	"include\constants.c", 182; //                                                                             //
 1296                        		.dbg	line,	"include\constants.c", 183; //                                    LEVELS                                   //
 1297                        		.dbg	line,	"include\constants.c", 184; //                                                                             //
 1298                        		.dbg	line,	"include\constants.c", 185; //-----------------------------------------------------------------------------//
 1299                        		.dbg	line,	"include\constants.c", 187; #define LV1_WALL_VRAM_ADR       0x1000
 1300                        		.dbg	line,	"include\constants.c", 188; #define LV1_DOOR_VRAM_ADR       LV1_WALL_VRAM_ADR+256
 1301                        		.dbg	line,	"include\constants.c", 193; #define OBJECT_NUMBER_LV1       23
 1302                        		.dbg	line,	"include\constants.c", 194; #define CHEST_NUMBER_LV1        2
 1303                        		.dbg	line,	"include\constants.c", 195; #define NPC_NUMBER_LV1          2
 1304                        		.dbg	line,	"include\constants.c", 197; #define OBJECT_START_INDEX_LV1  0
 1305                        		.dbg	line,	"include\constants.c", 198; #define CHEST_START_INDEX_LV1   OBJECT_START_INDEX_LV1+OBJECT_NUMBER_LV1
 1306                        		.dbg	line,	"include\constants.c", 199; #define NPC_START_INDEX_LV1     CHEST_START_INDEX_LV1+CHEST_NUMBER_LV1
 1307                        		.dbg	line,	"include\constants.c", 204; //-----------------------------------------------------------------------------//
 1308                        		.dbg	line,	"include\constants.c", 205; //                                                                             //
 1309                        		.dbg	line,	"include\constants.c", 206; //                                   OBJECT                                    //
 1310                        		.dbg	line,	"include\constants.c", 207; //                                                                             //
 1311                        		.dbg	line,	"include\constants.c", 208; //-----------------------------------------------------------------------------//
 1312                        		.dbg	line,	"include\constants.c", 210; #define TYPE_HOURGLASS          0
 1313                        		.dbg	line,	"include\constants.c", 211; #define TYPE_POT                1
 1314                        		.dbg	line,	"include\constants.c", 212; #define TYPE_POW                2
 1315                        		.dbg	line,	"include\constants.c", 213; #define TYPE_CHEST              3
 1316                        		.dbg	line,	"include\constants.c", 214; #define TYPE_GRAY_KEY           4
 1317                        		.dbg	line,	"include\constants.c", 215; #define TYPE_GOLD_KEY           5
 1318                        		.dbg	line,	"include\constants.c", 216; #define TYPE_1UP                6
 1319                        		.dbg	line,	"include\constants.c", 217; #define TYPE_COIN_1             7
 1320                        		.dbg	line,	"include\constants.c", 218; #define TYPE_COIN_5             8
 1321                        		.dbg	line,	"include\constants.c", 219; #define TYPE_COIN_10            9
 1322                        		.dbg	line,	"include\constants.c", 220; #define TYPE_COIN_50            10
 1323                        		.dbg	line,	"include\constants.c", 221; #define TYPE_COIN_100           11
 1324                        		.dbg	line,	"include\constants.c", 222; #define TYPE_COIN_500           12
 1325                        		.dbg	line,	"include\constants.c", 223; #define TYPE_COIN_1000          13
 1326                        		.dbg	line,	"include\constants.c", 224; #define TYPE_YASHICHI           14
 1327                        		.dbg	line,	"include\constants.c", 227; #define STATE_ACTIVE            0
 1328                        		.dbg	line,	"include\constants.c", 228; #define STATE_INACTIVE          1
 1329                        		.dbg	line,	"include\constants.c", 230; #define OBJECT_MARGIN           10//9
 1330                        		.dbg	line,	"include\constants.c", 233; #define POT1_VRAM_ADR           0x6800
 1331                        		.dbg	line,	"include\constants.c", 234; #define POT2_VRAM_ADR           POT1_VRAM_ADR+TILES_4
 1332                        		.dbg	line,	"include\constants.c", 235; #define POT3_VRAM_ADR           POT2_VRAM_ADR+TILES_4
 1333                        		.dbg	line,	"include\constants.c", 236; #define POT4_VRAM_ADR           POT3_VRAM_ADR+TILES_4
 1334                        		.dbg	line,	"include\constants.c", 237; #define POT5_VRAM_ADR           POT4_VRAM_ADR+TILES_4
 1335                        		.dbg	line,	"include\constants.c", 238; #define POT6_VRAM_ADR           POT5_VRAM_ADR+TILES_4
 1336                        		.dbg	line,	"include\constants.c", 239; #define POT7_VRAM_ADR           POT6_VRAM_ADR+TILES_4
 1337                        		.dbg	line,	"include\constants.c", 240; #define POT8_VRAM_ADR           POT7_VRAM_ADR+TILES_4
 1338                        		.dbg	line,	"include\constants.c", 242; #define POW_VRAM_ADR            POT8_VRAM_ADR+TILES_4
 1339                        		.dbg	line,	"include\constants.c", 243; #define GRAY_KEY_VRAM_ADR       POW_VRAM_ADR+TILES_4
 1340                        		.dbg	line,	"include\constants.c", 244; #define GOLD_KEY_VRAM_ADR       GRAY_KEY_VRAM_ADR+TILES_4
 1341                        		.dbg	line,	"include\constants.c", 245; #define LIFE_VRAM_ADR           GOLD_KEY_VRAM_ADR+TILES_4
 1342                        		.dbg	line,	"include\constants.c", 247; #define COIN_1_VRAM_ADR         LIFE_VRAM_ADR+TILES_4
 1343                        		.dbg	line,	"include\constants.c", 248; #define COIN_5_VRAM_ADR         COIN_1_VRAM_ADR+TILES_4
 1344                        		.dbg	line,	"include\constants.c", 249; #define COIN_10_VRAM_ADR        COIN_5_VRAM_ADR+TILES_4
 1345                        		.dbg	line,	"include\constants.c", 250; #define COIN_50_VRAM_ADR        COIN_10_VRAM_ADR+TILES_4
 1346                        		.dbg	line,	"include\constants.c", 251; #define COIN_100_VRAM_ADR       COIN_50_VRAM_ADR+TILES_4
 1347                        		.dbg	line,	"include\constants.c", 252; #define COIN_500_VRAM_ADR       COIN_100_VRAM_ADR+TILES_4
 1348                        		.dbg	line,	"include\constants.c", 253; #define COIN_1000_VRAM_ADR      COIN_500_VRAM_ADR+TILES_4
 1349                        		.dbg	line,	"include\constants.c", 255; #define STAR_VRAM_ADR           COIN_1000_VRAM_ADR+TILES_4
 1350                        		.dbg	line,	"include\constants.c", 256; #define OCTOPUS_VRAM_ADR        STAR_VRAM_ADR+TILES_4
 1351                        		.dbg	line,	"include\constants.c", 257; #define FRUIT_VRAM_ADR          OCTOPUS_VRAM_ADR+TILES_4
 1352                        		.dbg	line,	"include\constants.c", 258; #define BARREL_VRAM_ADR         FRUIT_VRAM_ADR+TILES_4
 1353                        		.dbg	line,	"include\constants.c", 259; #define HOURGLASS_VRAM_ADR      BARREL_VRAM_ADR+TILES_4
 1354                        		.dbg	line,	"include\constants.c", 260; #define BAMBOO_VRAM_ADR         HOURGLASS_VRAM_ADR+TILES_4
 1355                        		.dbg	line,	"include\constants.c", 261; #define YASHICHI_VRAM_ADR       BAMBOO_VRAM_ADR+TILES_4
 1356                        		.dbg	line,	"include\constants.c", 262; #define ELEPHANT_VRAM_ADR       YASHICHI_VRAM_ADR+TILES_4
 1357                        		.dbg	line,	"include\constants.c", 263; #define DRAGONFLY_VRAM_ADR      ELEPHANT_VRAM_ADR+TILES_4
 1358                        		.dbg	line,	"include\constants.c", 264; #define COW_VRAM_ADR            DRAGONFLY_VRAM_ADR+TILES_4
 1359                        		.dbg	line,	"include\constants.c", 265; #define MOBICHAN_VRAM_ADR       COW_VRAM_ADR+TILES_4
 1360                        		.dbg	line,	"include\constants.c", 267; #define CHEST_VRAM_ADR          0x7000
 1361                        		.dbg	line,	"include\constants.c", 268; #define NPC_VRAM_ADR            CHEST_VRAM_ADR+TILES_96
 1362                        		.dbg	line,	"include\constants.c", 273; //-----------------------------------------------------------------------------//
 1363                        		.dbg	line,	"include\constants.c", 274; //                                                                             //
 1364                        		.dbg	line,	"include\constants.c", 275; //                                    NPC                                      //
 1365                        		.dbg	line,	"include\constants.c", 276; //                                                                             //
 1366                        		.dbg	line,	"include\constants.c", 277; //-----------------------------------------------------------------------------//
 1367                        		.dbg	line,	"include\constants.c", 279; #define TYPE_NPC_REWARD         0
 1368                        		.dbg	line,	"include\constants.c", 280; #define TYPE_NPC_SHOP           1
 1369                        		.dbg	line,	"include\constants.c", 285; //-----------------------------------------------------------------------------//
 1370                        		.dbg	line,	"include\constants.c", 286; //                                                                             //
 1371                        		.dbg	line,	"include\constants.c", 287; //                                    SHOP                                     //
 1372                        		.dbg	line,	"include\constants.c", 288; //                                                                             //
 1373                        		.dbg	line,	"include\constants.c", 289; //-----------------------------------------------------------------------------//
 1374                        		.dbg	line,	"include\constants.c", 291; #define SHOP_PHASE_ENTER        0
 1375                        		.dbg	line,	"include\constants.c", 292; #define SHOP_PHASE_BUY          1
 1376                        		.dbg	line,	"include\constants.c", 293; #define SHOP_PHASE_EXIT         2
 1377                        		.dbg	line,	"include\constants.c", 295; #define TYPE_ITEM_WEAPON_2      0
 1378                        		.dbg	line,	"include\constants.c", 296; #define TYPE_ITEM_WEAPON_3      1
 1379                        		.dbg	line,	"include\constants.c", 297; #define TYPE_ITEM_WEAPON_4      2
 1380                        		.dbg	line,	"include\constants.c", 298; #define TYPE_ITEM_WEAPON_5      3
 1381                        		.dbg	line,	"include\constants.c", 299; #define TYPE_ITEM_KEY           4
 1382                        		.dbg	line,	"include\constants.c", 301; #define TYPE_ITEM_ARMOR_2       5
 1383                        		.dbg	line,	"include\constants.c", 302; #define TYPE_ITEM_ARMOR_3       6
 1384                        		.dbg	line,	"include\constants.c", 303; #define TYPE_ITEM_ARMOR_4       7
 1385                        		.dbg	line,	"include\constants.c", 304; #define TYPE_ITEM_ARMOR_5       8
 1386                        		.dbg	line,	"include\constants.c", 305; #define TYPE_ITEM_POTION        9
 1387                        		.dbg	line,	"main.c", 8; #include "include/variables.c"
 1388                        		.dbg	line,	"include\variables.c", 1; #include "huc.h"
 1389                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
 1390                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
 1391                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
 1392                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
 1393                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
 1394                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
 1395                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
 1396                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
 1397                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
 1398                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
 1399                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
 1400                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1401                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1402                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1403                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
 1404                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
 1405                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
 1406                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
 1407                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
 1408                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
 1409                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
 1410                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
 1411                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
 1412                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
 1413                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
 1414                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
 1415                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
 1416                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
 1417                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
 1418                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
 1419                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
 1420                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
 1421                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
 1422                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
 1423                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
 1424                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
 1425                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
 1426                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
 1427                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
 1428                        		.dbg	line,	"include\variables.c", 2; #include "hucc-scroll.h"
 1429                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 1; #ifndef _hucc_scroll_h
 1430                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 2; #define _hucc_scroll_h
 1431                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 4; /****************************************************************************
 1432                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 5; ; ***************************************************************************
 1433                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 6; ;
 1434                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 7; ; hucc-scroll.h
 1435                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 8; ;
 1436                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 9; ; Routines for a fast split-screen scrolling system.
 1437                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 10; ;
 1438                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 11; ; Copyright John Brandwood 2024.
 1439                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 12; ;
 1440                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1441                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1442                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1443                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 16; ;
 1444                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 17; ; ***************************************************************************
 1445                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 18; ; ***************************************************************************
 1446                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 19; ;
 1447                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 20; ; The maximum number of splits for each screen layer is set in your project's
 1448                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 21; ; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
 1449                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 22; ;
 1450                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 23; ; Your first active split must be defined to start at screen line 0, and then
 1451                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 24; ; the rest of the active splits must be in increasing line order to match the
 1452                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 25; ; way that the PC Engine displays the output image.
 1453                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 26; ;
 1454                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 27; ; You can have disabled splits interleaved with your active splits.
 1455                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 28; ;
 1456                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 29; ; Splits that are normally disabled can be used to create full screen effects
 1457                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 30; ; such as bouncing the screen up and down by adding blank areas at the top or
 1458                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 31; ; bottom of the screen, and then rapidly changing the height of those areas.
 1459                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 32; ;
 1460                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 33; ; ***************************************************************************
 1461                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 34; ; **************************************************************************/
 1462                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 36; // *************
 1463                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 37; // VDC bits for display_flags ...
 1464                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 38; // *************
 1465                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 40; #ifndef BKG_OFF
 1466                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 41; #define BKG_OFF 0x00
 1467                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 42; #endif
 1468                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 44; #ifndef SPR_OFF
 1469                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 45; #define SPR_OFF 0x00
 1470                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 46; #endif
 1471                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 48; #ifndef BKG_ON
 1472                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 49; #define BKG_ON 0x80
 1473                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 50; #endif
 1474                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 52; #ifndef SPR_ON
 1475                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 53; #define SPR_ON 0x40
 1476                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 54; #endif
 1477                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 56; // *************
 1478                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 57; // Functions in hucc-scroll.asm ...
 1479                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 58; // *************
 1480                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 60; #ifdef __HUCC__
 1481                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 62; #asmdef	HUCC_USES_NEW_SCROLL 1
 1482                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 64; extern void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
 1483                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 65; extern void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
 1484                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 67; extern void __fastcall disable_split( unsigned char index<acc> );
 1485                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 68; extern void __fastcall sgx_disable_split( unsigned char index<acc> );
 1486                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 70; extern void __fastcall __macro disable_all_splits( void );
 1487                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 71; extern void __fastcall __macro sgx_disable_all_splits( void );
 1488                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 73; #asm
 1489                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 74; .macro	_disable_all_splits
 1490                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 75; ldy	#HUCC_PCE_SPLITS - 1
 1491                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 76; !loop:		tya
 1492                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 77; call	_disable_split.1
 1493                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 78; dey
 1494                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 79; bpl	!loop-
 1495                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 80; .endm
 1496                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 82; .macro	_sgx_disable_all_splits
 1497                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 83; ldy	#HUCC_SGX_SPLITS - 1
 1498                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 84; !loop:		tya
 1499                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 85; call	_sgx_disable_split.1
 1500                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 86; dey
 1501                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 87; bpl	!loop-
 1502                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 88; .endm
 1503                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 89; #endasm
 1504                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 91; #endif // __HUCC__
 1505                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 93; #endif // _hucc_scroll_h
 1506                        		.dbg	line,	"include\variables.c", 3; #include "hucc-chrmap.h"
 1507                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 1; #ifndef _hucc_chrmap_h
 1508                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 2; #define _hucc_chrmap_h
 1509                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 4; /****************************************************************************
 1510                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 5; ; ***************************************************************************
 1511                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 6; ;
 1512                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 7; ; hucc-chrmap.h
 1513                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 8; ;
 1514                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 9; ; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
 1515                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 10; ;
 1516                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 11; ; Copyright John Brandwood 2025.
 1517                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 12; ;
 1518                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1519                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1520                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1521                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 16; ;
 1522                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 17; ; ***************************************************************************
 1523                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 18; ; ***************************************************************************
 1524                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 19; ;
 1525                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 20; ; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
 1526                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 21; ;
 1527                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 22; ; The maximum total size for a chrmap is 16KBytes, which allows for maps up
 1528                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 23; ; to 256x32 tiles (2048x256 pixels).
 1529                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 24; ;
 1530                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 25; ; ***************************************************************************
 1531                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 26; ; **************************************************************************/
 1532                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 28; // *************
 1533                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 29; // This code extends the blkmap library ...
 1534                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 30; // *************
 1535                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 32; #include "hucc-blkmap.h"
 1536                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 34; // *************
 1537                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 35; // Functions in chrmap.asm ...
 1538                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 36; // *************
 1539                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 38; #ifdef __HUCC__
 1540                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 40; #asmdef	HUCC_USES_CHRMAP 1
 1541                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 42; extern void __fastcall __nop set_chrmap( unsigned char __far *chrmap<vdc_map_bank:vdc_map_addr>, unsigned char tiles_w<vdc_map_line_w> );
 1542                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 44; extern void __fastcall draw_bat( void );
 1543                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 45; extern void __fastcall scroll_bat( void );
 1544                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 47; extern void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1545                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 49; #ifdef _SGX
 1546                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 51; extern void __fastcall __nop sgx_set_chrmap( unsigned char __far *chrmap<sgx_map_bank:sgx_map_addr>, unsigned char tiles_w<sgx_map_line_w> );
 1547                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 53; extern void __fastcall sgx_draw_bat( void );
 1548                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 54; extern void __fastcall sgx_scroll_bat( void );
 1549                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 56; extern void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1550                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 58; #endif
 1551                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 60; #endif // __HUCC__
 1552                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 62; #endif // _hucc_chrmap_h
 1553                        		.dbg	line,	"include\variables.c", 4; #include "hucc-blkmap.h"
 1554                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
 1555                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
 1556                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
 1557                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
 1558                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
 1559                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
 1560                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
 1561                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
 1562                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
 1563                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
 1564                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
 1565                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1566                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1567                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1568                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
 1569                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
 1570                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
 1571                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
 1572                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
 1573                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
 1574                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
 1575                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
 1576                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
 1577                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
 1578                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
 1579                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
 1580                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
 1581                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
 1582                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
 1583                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
 1584                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
 1585                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
 1586                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
 1587                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
 1588                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
 1589                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
 1590                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
 1591                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
 1592                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
 1593                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
 1594                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
 1595                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
 1596                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
 1597                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
 1598                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
 1599                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
 1600                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
 1601                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
 1602                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
 1603                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
 1604                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
 1605                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
 1606                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
 1607                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
 1608                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
 1609                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
 1610                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
 1611                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
 1612                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
 1613                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
 1614                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
 1615                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
 1616                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
 1617                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
 1618                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1619                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 1620                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
 1621                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 86; .macro	_set_blkmap.2
 1622                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 87; stz	vdc_scr_bank
 1623                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 88; .endm
 1624                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 90; .macro	_set_multimap.2
 1625                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 91; lda	vdc_bat_width
 1626                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 92; lsr	a
 1627                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 93; sta	vdc_map_line_w
 1628                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 94; .endm
 1629                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 96; .macro	SCREEN
 1630                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 97; db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
 1631                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 98; db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
 1632                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 99; db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
 1633                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 100; dw	(\4)
 1634                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 101; .endm
 1635                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
 1636                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
 1637                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
 1638                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
 1639                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
 1640                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
 1641                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
 1642                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
 1643                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
 1644                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
 1645                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
 1646                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
 1647                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
 1648                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
 1649                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
 1650                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
 1651                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
 1652                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
 1653                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
 1654                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
 1655                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
 1656                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
 1657                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
 1658                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
 1659                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
 1660                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1661                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 1662                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
 1663                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 144; .macro	_sgx_set_blkmap.2
 1664                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 145; stz	sgx_scr_bank
 1665                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 146; .endm
 1666                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 148; .macro	_sgx_set_multimap.2
 1667                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 149; lda	sgx_bat_width
 1668                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 150; lsr	a
 1669                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 151; sta	sgx_map_line_w
 1670                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 152; .endm
 1671                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
 1672                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
 1673                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
 1674                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
 1675                        		.dbg	line,	"include\variables.c", 13; unsigned char   sequence_id,
 1676                        		.dbg	line,	"include\variables.c", 14; sequence_loaded,
 1677                        		.dbg	line,	"include\variables.c", 16; level_id,
 1678                        		.dbg	line,	"include\variables.c", 18; // PLAYER //
 1679                        		.dbg	line,	"include\variables.c", 19; respawn,
 1680                        		.dbg	line,	"include\variables.c", 20; player_id,
 1681                        		.dbg	line,	"include\variables.c", 21; player_state,
 1682                        		.dbg	line,	"include\variables.c", 22; player_axis,
 1683                        		.dbg	line,	"include\variables.c", 23; player_previous_axis,
 1684                        		.dbg	line,	"include\variables.c", 24; player_counter_anim,
 1685                        		.dbg	line,	"include\variables.c", 25; player_index_jump,
 1686                        		.dbg	line,	"include\variables.c", 26; player_index_fall,
 1687                        		.dbg	line,	"include\variables.c", 27; player_counter_attack,
 1688                        		.dbg	line,	"include\variables.c", 29; player_naked,
 1689                        		.dbg	line,	"include\variables.c", 30; player_attack,
 1690                        		.dbg	line,	"include\variables.c", 32; jump_ladder,
 1691                        		.dbg	line,	"include\variables.c", 33; jump_max_index,
 1692                        		.dbg	line,	"include\variables.c", 34; fall_ladder,
 1693                        		.dbg	line,	"include\variables.c", 36; // ARMOR + WEAPON //
 1694                        		.dbg	line,	"include\variables.c", 37; chain_id,
 1695                        		.dbg	line,	"include\variables.c", 38; weapon_id,
 1696                        		.dbg	line,	"include\variables.c", 39; armor_level,
 1697                        		.dbg	line,	"include\variables.c", 40; weapon_level,
 1698                        		.dbg	line,	"include\variables.c", 42; // HUD //
 1699                        		.dbg	line,	"include\variables.c", 43; life_amount,
 1700                        		.dbg	line,	"include\variables.c", 44; key_amount,
 1701                        		.dbg	line,	"include\variables.c", 45; potion_amount,
 1702                        		.dbg	line,	"include\variables.c", 47; // TIME //
 1703                        		.dbg	line,	"include\variables.c", 48; minutes,
 1704                        		.dbg	line,	"include\variables.c", 49; seconds,
 1705                        		.dbg	line,	"include\variables.c", 50; time_counter,
 1706                        		.dbg	line,	"include\variables.c", 52; minutes_backup,
 1707                        		.dbg	line,	"include\variables.c", 53; seconds_backup,
 1708                        		.dbg	line,	"include\variables.c", 56; // OBJECTS //
 1709                        		.dbg	line,	"include\variables.c", 57; object_start_index,
 1710                        		.dbg	line,	"include\variables.c", 58; level_object_number,
 1711                        		.dbg	line,	"include\variables.c", 59; onscreen_object_number,
 1712                        		.dbg	line,	"include\variables.c", 60; 
 1713                        		.dbg	line,	"include\variables.c", 61; list_object_type[25],
 1714                        		.dbg	line,	"include\variables.c", 62; list_object_state[25],
 1715                        		.dbg	line,	"include\variables.c", 63; list_object_energy[25],
 1716                        		.dbg	line,	"include\variables.c", 64; list_reward_type[25],
 1717                        		.dbg	line,	"include\variables.c", 65; 
 1718                        		.dbg	line,	"include\variables.c", 66; list_onscreen_object[8],
 1719                        		.dbg	line,	"include\variables.c", 67; 
 1720                        		.dbg	line,	"include\variables.c", 68; // CHESTS //
 1721                        		.dbg	line,	"include\variables.c", 69; chest_start_index,
 1722                        		.dbg	line,	"include\variables.c", 70; level_chest_number,
 1723                        		.dbg	line,	"include\variables.c", 71; onscreen_chest_number,
 1724                        		.dbg	line,	"include\variables.c", 72; 
 1725                        		.dbg	line,	"include\variables.c", 73; list_chest_state[8],
 1726                        		.dbg	line,	"include\variables.c", 74; list_onscreen_chest[8],
 1727                        		.dbg	line,	"include\variables.c", 76; // NPC //
 1728                        		.dbg	line,	"include\variables.c", 77; npc_start_index,
 1729                        		.dbg	line,	"include\variables.c", 78; level_npc_number,
 1730                        		.dbg	line,	"include\variables.c", 79; onscreen_npc_number,
 1731                        		.dbg	line,	"include\variables.c", 81; list_npc_type[9],
 1732                        		.dbg	line,	"include\variables.c", 82; list_npc_state[9],
 1733                        		.dbg	line,	"include\variables.c", 83; list_onscreen_npc[9],
 1734                        		.dbg	line,	"include\variables.c", 85; // SHOPS //
 1735                        		.dbg	line,	"include\variables.c", 86; index_x,
 1736                        		.dbg	line,	"include\variables.c", 87; index_y,
 1737                        		.dbg	line,	"include\variables.c", 88; item_index,
 1738                        		.dbg	line,	"include\variables.c", 90; shop_phase,
 1739                        		.dbg	line,	"include\variables.c", 91; shop_counter,
 1740                        		.dbg	line,	"include\variables.c", 92; 
 1741                        		.dbg	line,	"include\variables.c", 93; tilemap_mask[256];
 1742                        		.dbg	line,	"include\variables.c", 98; signed int      player_pos_x,
 1743                        		.dbg	line,	"include\variables.c", 99; player_pos_y,
 1744                        		.dbg	line,	"include\variables.c", 100; camera_max_y_position,
 1745                        		.dbg	line,	"include\variables.c", 102; camera_pos_x_backup,
 1746                        		.dbg	line,	"include\variables.c", 103; camera_pos_y_backup,
 1747                        		.dbg	line,	"include\variables.c", 106; list_object_x_pos[25],
 1748                        		.dbg	line,	"include\variables.c", 107; list_object_y_pos[25],
 1749                        		.dbg	line,	"include\variables.c", 108; list_object_x_pos_ref[25],
 1750                        		.dbg	line,	"include\variables.c", 109; list_object_y_pos_ref[25],
 1751                        		.dbg	line,	"include\variables.c", 112; list_chest_x_pos[8],
 1752                        		.dbg	line,	"include\variables.c", 113; list_chest_y_pos[8],
 1753                        		.dbg	line,	"include\variables.c", 114; list_chest_x_pos_ref[8],
 1754                        		.dbg	line,	"include\variables.c", 115; list_chest_y_pos_ref[8],
 1755                        		.dbg	line,	"include\variables.c", 118; list_npc_x_pos[9],
 1756                        		.dbg	line,	"include\variables.c", 119; list_npc_y_pos[9],
 1757                        		.dbg	line,	"include\variables.c", 120; list_npc_x_pos_ref[9],
 1758                        		.dbg	line,	"include\variables.c", 121; list_npc_y_pos_ref[9];
 1759                        		.dbg	line,	"include\variables.c", 122; 
 1760                        		.dbg	line,	"include\variables.c", 126; int             zenny_amount,
 1761                        		.dbg	line,	"include\variables.c", 127; score,
 1762                        		.dbg	line,	"include\variables.c", 129; shop_prices[10];
 1763                        		.dbg	line,	"include\variables.c", 134; extern unsigned char tileset_LV1_BG_B[];
 1764                        		.dbg	line,	"include\variables.c", 135; extern unsigned char multimap_LV1_BG_B[];
 1765                        		.dbg	line,	"include\variables.c", 137; extern unsigned char tileset_HUD[];
 1766                        		.dbg	line,	"include\variables.c", 138; extern unsigned char multimap_LV1_BG_A[];
 1767                        		.dbg	line,	"include\variables.c", 140; extern unsigned char tileset_SHOP_BG_B[];
 1768                        		.dbg	line,	"include\variables.c", 143; int *ptr_SHOP_ITEM_PRICES;
 1769                        		.dbg	line,	"main.c", 11; #include "include/gfx_BG.c"
 1770                        		.dbg	line,	"include\gfx_BG.c", 1; #include "huc.h"
 1771                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
 1772                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
 1773                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
 1774                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
 1775                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
 1776                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
 1777                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
 1778                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
 1779                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
 1780                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
 1781                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
 1782                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1783                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1784                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1785                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
 1786                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
 1787                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
 1788                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
 1789                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
 1790                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
 1791                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
 1792                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
 1793                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
 1794                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
 1795                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
 1796                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
 1797                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
 1798                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
 1799                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
 1800                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
 1801                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
 1802                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
 1803                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
 1804                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
 1805                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
 1806                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
 1807                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
 1808                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
 1809                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
 1810                        		.dbg	line,	"include\gfx_BG.c", 2; #include "hucc-scroll.h"
 1811                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 1; #ifndef _hucc_scroll_h
 1812                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 2; #define _hucc_scroll_h
 1813                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 4; /****************************************************************************
 1814                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 5; ; ***************************************************************************
 1815                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 6; ;
 1816                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 7; ; hucc-scroll.h
 1817                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 8; ;
 1818                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 9; ; Routines for a fast split-screen scrolling system.
 1819                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 10; ;
 1820                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 11; ; Copyright John Brandwood 2024.
 1821                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 12; ;
 1822                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1823                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1824                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1825                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 16; ;
 1826                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 17; ; ***************************************************************************
 1827                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 18; ; ***************************************************************************
 1828                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 19; ;
 1829                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 20; ; The maximum number of splits for each screen layer is set in your project's
 1830                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 21; ; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
 1831                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 22; ;
 1832                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 23; ; Your first active split must be defined to start at screen line 0, and then
 1833                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 24; ; the rest of the active splits must be in increasing line order to match the
 1834                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 25; ; way that the PC Engine displays the output image.
 1835                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 26; ;
 1836                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 27; ; You can have disabled splits interleaved with your active splits.
 1837                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 28; ;
 1838                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 29; ; Splits that are normally disabled can be used to create full screen effects
 1839                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 30; ; such as bouncing the screen up and down by adding blank areas at the top or
 1840                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 31; ; bottom of the screen, and then rapidly changing the height of those areas.
 1841                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 32; ;
 1842                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 33; ; ***************************************************************************
 1843                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 34; ; **************************************************************************/
 1844                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 36; // *************
 1845                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 37; // VDC bits for display_flags ...
 1846                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 38; // *************
 1847                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 40; #ifndef BKG_OFF
 1848                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 41; #define BKG_OFF 0x00
 1849                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 42; #endif
 1850                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 44; #ifndef SPR_OFF
 1851                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 45; #define SPR_OFF 0x00
 1852                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 46; #endif
 1853                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 48; #ifndef BKG_ON
 1854                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 49; #define BKG_ON 0x80
 1855                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 50; #endif
 1856                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 52; #ifndef SPR_ON
 1857                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 53; #define SPR_ON 0x40
 1858                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 54; #endif
 1859                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 56; // *************
 1860                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 57; // Functions in hucc-scroll.asm ...
 1861                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 58; // *************
 1862                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 60; #ifdef __HUCC__
 1863                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 62; #asmdef	HUCC_USES_NEW_SCROLL 1
 1864                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 64; extern void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
 1865                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 65; extern void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
 1866                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 67; extern void __fastcall disable_split( unsigned char index<acc> );
 1867                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 68; extern void __fastcall sgx_disable_split( unsigned char index<acc> );
 1868                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 70; extern void __fastcall __macro disable_all_splits( void );
 1869                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 71; extern void __fastcall __macro sgx_disable_all_splits( void );
 1870                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 73; #asm
 1871                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 74; .macro	_disable_all_splits
 1872                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 75; ldy	#HUCC_PCE_SPLITS - 1
 1873                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 76; !loop:		tya
 1874                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 77; call	_disable_split.1
 1875                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 78; dey
 1876                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 79; bpl	!loop-
 1877                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 80; .endm
 1878                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 82; .macro	_sgx_disable_all_splits
 1879                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 83; ldy	#HUCC_SGX_SPLITS - 1
 1880                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 84; !loop:		tya
 1881                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 85; call	_sgx_disable_split.1
 1882                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 86; dey
 1883                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 87; bpl	!loop-
 1884                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 88; .endm
 1885                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 89; #endasm
 1886                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 91; #endif // __HUCC__
 1887                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 93; #endif // _hucc_scroll_h
 1888                        		.dbg	line,	"include\gfx_BG.c", 3; #include "hucc-chrmap.h"
 1889                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 1; #ifndef _hucc_chrmap_h
 1890                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 2; #define _hucc_chrmap_h
 1891                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 4; /****************************************************************************
 1892                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 5; ; ***************************************************************************
 1893                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 6; ;
 1894                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 7; ; hucc-chrmap.h
 1895                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 8; ;
 1896                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 9; ; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
 1897                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 10; ;
 1898                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 11; ; Copyright John Brandwood 2025.
 1899                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 12; ;
 1900                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1901                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1902                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1903                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 16; ;
 1904                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 17; ; ***************************************************************************
 1905                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 18; ; ***************************************************************************
 1906                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 19; ;
 1907                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 20; ; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
 1908                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 21; ;
 1909                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 22; ; The maximum total size for a chrmap is 16KBytes, which allows for maps up
 1910                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 23; ; to 256x32 tiles (2048x256 pixels).
 1911                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 24; ;
 1912                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 25; ; ***************************************************************************
 1913                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 26; ; **************************************************************************/
 1914                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 28; // *************
 1915                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 29; // This code extends the blkmap library ...
 1916                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 30; // *************
 1917                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 32; #include "hucc-blkmap.h"
 1918                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 34; // *************
 1919                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 35; // Functions in chrmap.asm ...
 1920                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 36; // *************
 1921                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 38; #ifdef __HUCC__
 1922                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 40; #asmdef	HUCC_USES_CHRMAP 1
 1923                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 42; extern void __fastcall __nop set_chrmap( unsigned char __far *chrmap<vdc_map_bank:vdc_map_addr>, unsigned char tiles_w<vdc_map_line_w> );
 1924                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 44; extern void __fastcall draw_bat( void );
 1925                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 45; extern void __fastcall scroll_bat( void );
 1926                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 47; extern void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1927                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 49; #ifdef _SGX
 1928                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 51; extern void __fastcall __nop sgx_set_chrmap( unsigned char __far *chrmap<sgx_map_bank:sgx_map_addr>, unsigned char tiles_w<sgx_map_line_w> );
 1929                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 53; extern void __fastcall sgx_draw_bat( void );
 1930                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 54; extern void __fastcall sgx_scroll_bat( void );
 1931                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 56; extern void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1932                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 58; #endif
 1933                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 60; #endif // __HUCC__
 1934                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 62; #endif // _hucc_chrmap_h
 1935                        		.dbg	line,	"include\gfx_BG.c", 4; #include "hucc-blkmap.h"
 1936                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
 1937                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
 1938                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
 1939                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
 1940                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
 1941                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
 1942                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
 1943                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
 1944                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
 1945                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
 1946                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
 1947                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1948                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1949                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1950                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
 1951                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
 1952                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
 1953                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
 1954                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
 1955                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
 1956                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
 1957                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
 1958                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
 1959                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
 1960                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
 1961                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
 1962                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
 1963                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
 1964                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
 1965                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
 1966                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
 1967                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
 1968                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
 1969                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
 1970                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
 1971                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
 1972                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
 1973                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
 1974                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
 1975                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
 1976                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
 1977                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
 1978                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
 1979                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
 1980                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
 1981                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
 1982                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
 1983                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
 1984                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
 1985                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
 1986                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
 1987                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
 1988                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
 1989                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
 1990                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
 1991                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
 1992                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
 1993                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
 1994                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
 1995                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
 1996                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
 1997                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
 1998                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
 1999                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
 2000                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 2001                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 2002                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
 2003                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 86; .macro	_set_blkmap.2
 2004                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 87; stz	vdc_scr_bank
 2005                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 88; .endm
 2006                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 90; .macro	_set_multimap.2
 2007                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 91; lda	vdc_bat_width
 2008                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 92; lsr	a
 2009                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 93; sta	vdc_map_line_w
 2010                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 94; .endm
 2011                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 96; .macro	SCREEN
 2012                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 97; db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
 2013                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 98; db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
 2014                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 99; db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
 2015                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 100; dw	(\4)
 2016                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 101; .endm
 2017                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
 2018                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
 2019                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
 2020                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
 2021                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
 2022                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
 2023                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
 2024                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
 2025                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
 2026                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
 2027                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
 2028                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
 2029                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
 2030                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
 2031                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
 2032                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
 2033                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
 2034                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
 2035                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
 2036                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
 2037                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
 2038                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
 2039                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
 2040                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
 2041                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
 2042                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 2043                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 2044                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
 2045                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 144; .macro	_sgx_set_blkmap.2
 2046                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 145; stz	sgx_scr_bank
 2047                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 146; .endm
 2048                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 148; .macro	_sgx_set_multimap.2
 2049                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 149; lda	sgx_bat_width
 2050                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 150; lsr	a
 2051                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 151; sta	sgx_map_line_w
 2052                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 152; .endm
 2053                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
 2054                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
 2055                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
 2056                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
 2057                        		.dbg	line,	"include\gfx_BG.c", 13; #incchr(tileset_FONT,"res/maps/tiles_FONT.png");
 2058               6000     		.data
 2059    03:6000             	_tileset_FONT: 	.incchr		"res/maps/tiles_FONT.png"
 2060               E309     		.code
 2061                        		.dbg	line,	"include\gfx_BG.c", 14; //#incchr(tileset_NUMBERS_FONT,"res/maps/tiles_NUMBERS_FONT.png");
 2062                        		.dbg	line,	"include\gfx_BG.c", 17; //**************************************************************************************//
 2063                        		.dbg	line,	"include\gfx_BG.c", 18; //                                                                                      //
 2064                        		.dbg	line,	"include\gfx_BG.c", 19; //                                       LEVEL 1                                        //
 2065                        		.dbg	line,	"include\gfx_BG.c", 20; //                                                                                      //
 2066                        		.dbg	line,	"include\gfx_BG.c", 21; //**************************************************************************************//
 2067                        		.dbg	line,	"include\gfx_BG.c", 23; #incchr(tileset_LV1_WALL,"res/maps/tiles_LV1_WALL.png", 4 , 4);
 2068               6C00     		.data
 2069    03:6C00             	_tileset_LV1_WALL: 	.incchr		"res/maps/tiles_LV1_WALL.png", 4, 4
 2070               E309     		.code
 2071                        		.dbg	line,	"include\gfx_BG.c", 24; #incchr(tileset_LV1_DOOR_OPEN,"res/maps/tiles_LV1_DOOR_OPEN.png", 4 , 6);
 2072               6E00     		.data
 2073    03:6E00             	_tileset_LV1_DOOR_OPEN: 	.incchr		"res/maps/tiles_LV1_DOOR_OPEN.png", 4, 6
 2074               E309     		.code
 2075                        		.dbg	line,	"include\gfx_BG.c", 25; #incchr(tileset_LV1_DOOR_CLOSED,"res/maps/tiles_LV1_DOOR_CLOSED.png", 4 , 6);
 2076               7100     		.data
 2077    03:7100             	_tileset_LV1_DOOR_CLOSED: 	.incchr		"res/maps/tiles_LV1_DOOR_CLOSED.png", 4, 6
 2078               E309     		.code
 2079                        		.dbg	line,	"include\gfx_BG.c", 27; #incchr(tileset_LIFE_RED,"res/maps/tileset_LIFE_RED.png", 2 , 1);
 2080               7400     		.data
 2081    03:7400             	_tileset_LIFE_RED: 	.incchr		"res/maps/tileset_LIFE_RED.png", 2, 1
 2082               E309     		.code
 2083                        		.dbg	line,	"include\gfx_BG.c", 28; #incchr(tileset_LIFE_ORANGE,"res/maps/tileset_LIFE_ORANGE.png", 2 , 1);
 2084               7440     		.data
 2085    03:7440             	_tileset_LIFE_ORANGE: 	.incchr		"res/maps/tileset_LIFE_ORANGE.png", 2, 1
 2086               E309     		.code
 2087                        		.dbg	line,	"include\gfx_BG.c", 29; #incchr(tileset_LIFE_YELLOW,"res/maps/tileset_LIFE_YELLOW.png", 2 , 1);
 2088               7480     		.data
 2089    03:7480             	_tileset_LIFE_YELLOW: 	.incchr		"res/maps/tileset_LIFE_YELLOW.png", 2, 1
 2090               E309     		.code
 2091                        		.dbg	line,	"include\gfx_BG.c", 30; #incchr(tileset_LIFE_EMPTY,"res/maps/tileset_LIFE_EMPTY.png", 2 , 1);
 2092               74C0     		.data
 2093    03:74C0             	_tileset_LIFE_EMPTY: 	.incchr		"res/maps/tileset_LIFE_EMPTY.png", 2, 1
 2094               E309     		.code
 2095                        		.dbg	line,	"include\gfx_BG.c", 32; #incchr(tileset_ARMOR_1,"res/maps/tileset_ARMOR_1.png", 2 , 2);
 2096               7500     		.data
 2097    03:7500             	_tileset_ARMOR_1: 	.incchr		"res/maps/tileset_ARMOR_1.png", 2, 2
 2098               E309     		.code
 2099                        		.dbg	line,	"include\gfx_BG.c", 33; #incchr(tileset_ARMOR_2,"res/maps/tileset_ARMOR_2.png", 2 , 2);
 2100               7580     		.data
 2101    03:7580             	_tileset_ARMOR_2: 	.incchr		"res/maps/tileset_ARMOR_2.png", 2, 2
 2102               E309     		.code
 2103                        		.dbg	line,	"include\gfx_BG.c", 34; #incchr(tileset_ARMOR_4,"res/maps/tileset_ARMOR_4.png", 2 , 2);
 2104               7600     		.data
 2105    03:7600             	_tileset_ARMOR_4: 	.incchr		"res/maps/tileset_ARMOR_4.png", 2, 2
 2106               E309     		.code
 2107                        		.dbg	line,	"include\gfx_BG.c", 35; #incchr(tileset_ARMOR_8,"res/maps/tileset_ARMOR_8.png", 2 , 2);
 2108               7680     		.data
 2109    03:7680             	_tileset_ARMOR_8: 	.incchr		"res/maps/tileset_ARMOR_8.png", 2, 2
 2110               E309     		.code
 2111                        		.dbg	line,	"include\gfx_BG.c", 37; #incchr(tileset_WEAPON_1,"res/maps/tileset_WEAPON_1.png", 2 , 2);
 2112               7700     		.data
 2113    03:7700             	_tileset_WEAPON_1: 	.incchr		"res/maps/tileset_WEAPON_1.png", 2, 2
 2114               E309     		.code
 2115                        		.dbg	line,	"include\gfx_BG.c", 38; #incchr(tileset_WEAPON_2,"res/maps/tileset_WEAPON_2.png", 2 , 2);
 2116               7780     		.data
 2117    03:7780             	_tileset_WEAPON_2: 	.incchr		"res/maps/tileset_WEAPON_2.png", 2, 2
 2118               E309     		.code
 2119                        		.dbg	line,	"include\gfx_BG.c", 39; #incchr(tileset_WEAPON_4,"res/maps/tileset_WEAPON_4.png", 2 , 2);
 2120               7800     		.data
 2121    03:7800             	_tileset_WEAPON_4: 	.incchr		"res/maps/tileset_WEAPON_4.png", 2, 2
 2122               E309     		.code
 2123                        		.dbg	line,	"include\gfx_BG.c", 40; #incchr(tileset_WEAPON_5,"res/maps/tileset_WEAPON_5.png", 2 , 2);
 2124               7880     		.data
 2125    03:7880             	_tileset_WEAPON_5: 	.incchr		"res/maps/tileset_WEAPON_5.png", 2, 2
 2126               E309     		.code
 2127                        		.dbg	line,	"include\gfx_BG.c", 41; #incchr(tileset_WEAPON_8,"res/maps/tileset_WEAPON_8.png", 2 , 2);
 2128               7900     		.data
 2129    03:7900             	_tileset_WEAPON_8: 	.incchr		"res/maps/tileset_WEAPON_8.png", 2, 2
 2130               E309     		.code
 2131                        		.dbg	line,	"include\gfx_BG.c", 44; //--------------------------------------------------------------------------------------//
 2132                        		.dbg	line,	"include\gfx_BG.c", 45; //                                        VDC 2                                         //
 2133                        		.dbg	line,	"include\gfx_BG.c", 46; //--------------------------------------------------------------------------------------//
 2134                        		.dbg	line,	"include\gfx_BG.c", 48; #asm
 2135                        		.dbg	clear
 2136               0001     	OPTIMIZE	=	1
 2137               7980     			.data
 2138                        	; EXTRACT TILESET
 2139                        	;----------------
 2140    03:7980             	_tileset_LV1_BG_B:  incchr	"res/maps/template_LV1_WALL.png"
 2141    03:7B80             			incchr	"res/maps/template_LV1_DOOR.png"
 2142    03:7E80             			incchr	"res/maps/tilemap_LV1_BG_B.png", OPTIMIZE
 2143                        	; EXTRACT BLOCKS
 2144                        	;--------------
 2145    07:7000             	blocks_LV1_BG_B1:	incblk	"res/maps/tilemap_LV1_BG_B.png" , 0x1000 ,    0 ,   0 ,  64 , 32 , _tileset_LV1_BG_B ; // 96x16 = 1536 | 32x16 =  512
 2146    07:7800             	blocks_LV1_BG_B2:	incblk	"res/maps/tilemap_LV1_BG_B.png" , 0x1000 , 1024 ,   0 ,  96 , 32 , _tileset_LV1_BG_B ; // 64x16 = 1024 | 32x16 =  512
 2147    08:6000             	blocks_LV1_BG_B3:	incblk	"res/maps/tilemap_LV1_BG_B.png" , 0x1000 ,    0 , 512 ,  64 , 32 , _tileset_LV1_BG_B ; // 96x16 = 1536 | 16x16 =  256
 2148    08:6800             	blocks_LV1_BG_B4:	incblk	"res/maps/tilemap_LV1_BG_B.png" , 0x1000 , 1024 , 512 ,  96 , 32 , _tileset_LV1_BG_B ; // 64x16 = 1024 | 16x16 =  256
 2149                        	; EXTRACT MAPS
 2150                        	;------------
 2151               7000     			align	256
 2152    08:7000             	MAP_LV1_BG_B1:		incmap	"res/maps/tilemap_LV1_BG_B.png",    0 ,   0 ,  64 , 32 , blocks_LV1_BG_B1 ; // 96x16 = 1536 | 32x16 =  512
 2153               7800     			align	256
 2154    08:7800             	MAP_LV1_BG_B2:		incmap	"res/maps/tilemap_LV1_BG_B.png", 1024 ,   0 ,  96 , 32 , blocks_LV1_BG_B2 ; // 64x16 = 1024 | 32x16 =  512
 2155               6400     			align	256
 2156    09:6400             	MAP_LV1_BG_B3:		incmap	"res/maps/tilemap_LV1_BG_B.png",    0 , 512 ,  64 , 32 , blocks_LV1_BG_B3 ; // 96x16 = 1536 | 16x16 =  256
 2157               6C00     			align	256
 2158    09:6C00             	MAP_LV1_BG_B4:		incmap	"res/maps/tilemap_LV1_BG_B.png", 1024 , 512 ,  96 , 32 , blocks_LV1_BG_B4 ; // 64x16 = 1024 | 16x16 =  256
 2159                        	; MASK (EMPTY)
 2160                        	;----------------
 2161    09:7800  00 00 00 00	dummy_tbl:	ds	256
         09:7804  00 00 00 00 
         09:7808  00 00 00 00 
         09:780C  00 00 00 00 
         09:7810  00 00 00 00 
         09:7814  00 00 00 00 
         09:7818  00 00 00 00 
         09:781C  00 00 00 00 
         09:7820  00 00 00 00 
         09:7824  00 00 00 00 
         09:7828  00 00 00 00 
         09:782C  00 00 00 00 
         09:7830  00 00 00 00 
         09:7834  00 00 00 00 
         09:7838  00 00 00 00 
         09:783C  00 00 00 00 
         09:7840  00 00 00 00 
         09:7844  00 00 00 00 
         09:7848  00 00 00 00 
         09:784C  00 00 00 00 
         09:7850  00 00 00 00 
         09:7854  00 00 00 00 
         09:7858  00 00 00 00 
         09:785C  00 00 00 00 
         09:7860  00 00 00 00 
         09:7864  00 00 00 00 
         09:7868  00 00 00 00 
         09:786C  00 00 00 00 
         09:7870  00 00 00 00 
         09:7874  00 00 00 00 
         09:7878  00 00 00 00 
         09:787C  00 00 00 00 
         09:7880  00 00 00 00 
         09:7884  00 00 00 00 
         09:7888  00 00 00 00 
         09:788C  00 00 00 00 
         09:7890  00 00 00 00 
         09:7894  00 00 00 00 
         09:7898  00 00 00 00 
         09:789C  00 00 00 00 
         09:78A0  00 00 00 00 
         09:78A4  00 00 00 00 
         09:78A8  00 00 00 00 
         09:78AC  00 00 00 00 
         09:78B0  00 00 00 00 
         09:78B4  00 00 00 00 
         09:78B8  00 00 00 00 
         09:78BC  00 00 00 00 
         09:78C0  00 00 00 00 
         09:78C4  00 00 00 00 
         09:78C8  00 00 00 00 
         09:78CC  00 00 00 00 
         09:78D0  00 00 00 00 
         09:78D4  00 00 00 00 
         09:78D8  00 00 00 00 
         09:78DC  00 00 00 00 
         09:78E0  00 00 00 00 
         09:78E4  00 00 00 00 
         09:78E8  00 00 00 00 
         09:78EC  00 00 00 00 
         09:78F0  00 00 00 00 
         09:78F4  00 00 00 00 
         09:78F8  00 00 00 00 
         09:78FC  00 00 00 00 
 2162                        	; SWIZZLE MAPS
 2163                        	;-------------
 2164    09:7900             	swizzle	MAP_LV1_BG_B1,  32, 16 ;
 2165    09:7900             	swizzle	MAP_LV1_BG_B2,  32, 16 ;
 2166    09:7900             	swizzle	MAP_LV1_BG_B3,  32, 16 ;
 2167    09:7900             	swizzle	MAP_LV1_BG_B4,  32, 16 ;
 2168                        	; BUILD MULTIMAP
 2169                        	;---------------
 2170    09:7900             	_multimap_LV1_BG_B:
 2171                        			; 1st line of 5 screens (512x256)
 2172                        			SCREEN MAP_LV1_BG_B1 + 0x0000, blocks_LV1_BG_B1, dummy_tbl, 0
         09:7900  70 08      			db	(((MAP_LV1_BG_B1 + 0x0000) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B1 + 0x0000)
         09:7902  50 07      			db	(((blocks_LV1_BG_B1) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B1)
         09:7904  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:7906  00 00      			dw	(0)
 2173                        			SCREEN MAP_LV1_BG_B1 + 0x0200, blocks_LV1_BG_B1, dummy_tbl, 0
         09:7908  72 08      			db	(((MAP_LV1_BG_B1 + 0x0200) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B1 + 0x0200)
         09:790A  50 07      			db	(((blocks_LV1_BG_B1) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B1)
         09:790C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:790E  00 00      			dw	(0)
 2174                        			SCREEN MAP_LV1_BG_B2 + 0x0000, blocks_LV1_BG_B2, dummy_tbl, 0
         09:7910  78 08      			db	(((MAP_LV1_BG_B2 + 0x0000) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B2 + 0x0000)
         09:7912  58 07      			db	(((blocks_LV1_BG_B2) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B2)
         09:7914  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:7916  00 00      			dw	(0)
 2175                        			SCREEN MAP_LV1_BG_B2 + 0x0200, blocks_LV1_BG_B2, dummy_tbl, 0
         09:7918  7A 08      			db	(((MAP_LV1_BG_B2 + 0x0200) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B2 + 0x0200)
         09:791A  58 07      			db	(((blocks_LV1_BG_B2) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B2)
         09:791C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:791E  00 00      			dw	(0)
 2176                        			SCREEN MAP_LV1_BG_B2 + 0x0400, blocks_LV1_BG_B2, dummy_tbl, 0
         09:7920  7C 08      			db	(((MAP_LV1_BG_B2 + 0x0400) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B2 + 0x0400)
         09:7922  58 07      			db	(((blocks_LV1_BG_B2) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B2)
         09:7924  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:7926  00 00      			dw	(0)
 2177                        			; 2nd line of 5 screens (512x256)
 2178                        			SCREEN MAP_LV1_BG_B1 + 0x0400, blocks_LV1_BG_B1, dummy_tbl, 0
         09:7928  74 08      			db	(((MAP_LV1_BG_B1 + 0x0400) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B1 + 0x0400)
         09:792A  50 07      			db	(((blocks_LV1_BG_B1) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B1)
         09:792C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:792E  00 00      			dw	(0)
 2179                        			SCREEN MAP_LV1_BG_B1 + 0x0600, blocks_LV1_BG_B1, dummy_tbl, 0
         09:7930  76 08      			db	(((MAP_LV1_BG_B1 + 0x0600) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B1 + 0x0600)
         09:7932  50 07      			db	(((blocks_LV1_BG_B1) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B1)
         09:7934  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:7936  00 00      			dw	(0)
 2180                        			SCREEN MAP_LV1_BG_B2 + 0x0600, blocks_LV1_BG_B2, dummy_tbl, 0
         09:7938  7E 08      			db	(((MAP_LV1_BG_B2 + 0x0600) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B2 + 0x0600)
         09:793A  58 07      			db	(((blocks_LV1_BG_B2) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B2)
         09:793C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:793E  00 00      			dw	(0)
 2181                        			SCREEN MAP_LV1_BG_B2 + 0x0800, blocks_LV1_BG_B2, dummy_tbl, 0
         09:7940  60 09      			db	(((MAP_LV1_BG_B2 + 0x0800) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B2 + 0x0800)
         09:7942  58 07      			db	(((blocks_LV1_BG_B2) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B2)
         09:7944  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:7946  00 00      			dw	(0)
 2182                        			SCREEN MAP_LV1_BG_B2 + 0x0A00, blocks_LV1_BG_B2, dummy_tbl, 0
         09:7948  62 09      			db	(((MAP_LV1_BG_B2 + 0x0A00) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B2 + 0x0A00)
         09:794A  58 07      			db	(((blocks_LV1_BG_B2) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B2)
         09:794C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:794E  00 00      			dw	(0)
 2183                        			; 3rd line of 5 screens (512x256)
 2184                        			SCREEN MAP_LV1_BG_B3 + 0x0000, blocks_LV1_BG_B3, dummy_tbl, 0
         09:7950  64 09      			db	(((MAP_LV1_BG_B3 + 0x0000) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B3 + 0x0000)
         09:7952  40 08      			db	(((blocks_LV1_BG_B3) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B3)
         09:7954  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:7956  00 00      			dw	(0)
 2185                        			SCREEN MAP_LV1_BG_B3 + 0x0200, blocks_LV1_BG_B3, dummy_tbl, 0
         09:7958  66 09      			db	(((MAP_LV1_BG_B3 + 0x0200) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B3 + 0x0200)
         09:795A  40 08      			db	(((blocks_LV1_BG_B3) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B3)
         09:795C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:795E  00 00      			dw	(0)
 2186                        			SCREEN MAP_LV1_BG_B4 + 0x0000, blocks_LV1_BG_B4, dummy_tbl, 0
         09:7960  6C 09      			db	(((MAP_LV1_BG_B4 + 0x0000) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B4 + 0x0000)
         09:7962  48 08      			db	(((blocks_LV1_BG_B4) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B4)
         09:7964  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:7966  00 00      			dw	(0)
 2187                        			SCREEN MAP_LV1_BG_B4 + 0x0200, blocks_LV1_BG_B4, dummy_tbl, 0
         09:7968  6E 09      			db	(((MAP_LV1_BG_B4 + 0x0200) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B4 + 0x0200)
         09:796A  48 08      			db	(((blocks_LV1_BG_B4) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B4)
         09:796C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:796E  00 00      			dw	(0)
 2188                        			SCREEN MAP_LV1_BG_B4 + 0x0400, blocks_LV1_BG_B4, dummy_tbl, 0
         09:7970  70 09      			db	(((MAP_LV1_BG_B4 + 0x0400) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B4 + 0x0400)
         09:7972  48 08      			db	(((blocks_LV1_BG_B4) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B4)
         09:7974  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:7976  00 00      			dw	(0)
 2189                        			; 4th line of 5 screens (512x256)
 2190                        			SCREEN MAP_LV1_BG_B3 + 0x0400, blocks_LV1_BG_B3, dummy_tbl, 0
         09:7978  68 09      			db	(((MAP_LV1_BG_B3 + 0x0400) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B3 + 0x0400)
         09:797A  40 08      			db	(((blocks_LV1_BG_B3) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B3)
         09:797C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:797E  00 00      			dw	(0)
 2191                        			SCREEN MAP_LV1_BG_B3 + 0x0600, blocks_LV1_BG_B3, dummy_tbl, 0
         09:7980  6A 09      			db	(((MAP_LV1_BG_B3 + 0x0600) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B3 + 0x0600)
         09:7982  40 08      			db	(((blocks_LV1_BG_B3) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B3)
         09:7984  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:7986  00 00      			dw	(0)
 2192                        			SCREEN MAP_LV1_BG_B4 + 0x0600, blocks_LV1_BG_B4, dummy_tbl, 0
         09:7988  72 09      			db	(((MAP_LV1_BG_B4 + 0x0600) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B4 + 0x0600)
         09:798A  48 08      			db	(((blocks_LV1_BG_B4) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B4)
         09:798C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:798E  00 00      			dw	(0)
 2193                        			SCREEN MAP_LV1_BG_B4 + 0x0800, blocks_LV1_BG_B4, dummy_tbl, 0
         09:7990  74 09      			db	(((MAP_LV1_BG_B4 + 0x0800) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B4 + 0x0800)
         09:7992  48 08      			db	(((blocks_LV1_BG_B4) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B4)
         09:7994  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:7996  00 00      			dw	(0)
 2194                        			SCREEN MAP_LV1_BG_B4 + 0x0A00, blocks_LV1_BG_B4, dummy_tbl, 0
         09:7998  76 09      			db	(((MAP_LV1_BG_B4 + 0x0A00) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B4 + 0x0A00)
         09:799A  48 08      			db	(((blocks_LV1_BG_B4) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B4)
         09:799C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         09:799E  00 00      			dw	(0)
 2195                        	;//--------------------------------------------------------------------------------------//
 2196                        	;//                                        VDC 1                                         //
 2197                        	;//--------------------------------------------------------------------------------------//
 2198                        	; EXTRACT TILESET
 2199                        	;----------------
 2200    09:79A0             	_tileset_HUD:	incchr	"res/maps/template_LIFEBAR_1.png"
 2201    09:79E0             			incchr	"res/maps/template_LIFEBAR_2.png"
 2202    09:7A20             			incchr	"res/maps/template_LIFEBAR_3.png"
 2203    09:7A60             			incchr	"res/maps/template_LIFEBAR_4.png"
 2204    09:7AA0             			incchr	"res/maps/template_LIFEBAR_5.png"
 2205    09:7AE0             			incchr	"res/maps/tileset_WEAPON_1.png"
 2206    09:7B60             			incchr	"res/maps/tileset_ARMOR_2.png"
 2207    09:7BE0             			incchr	"res/maps/tilemap_HUD.png", OPTIMIZE
 2208                        	; EXTRACT BLOCKS
 2209                        	;--------------
 2210    0A:6000             	blocks_HUD1:	incblk	"res/maps/tilemap_HUD.png" , 0x1000 ,    0 ,   0 , 128 , 64 , _tileset_HUD ; // 128x16 = 2048 | 64x16 = 1024
 2211    0A:6800             	blocks_HUD2:	incblk	"res/maps/tilemap_HUD.png" , 0x1000 , 2048 ,   0 ,  32 , 64 , _tileset_HUD ; //  32x16 =  512 | 64x16 = 1024
 2212                        	; EXTRACT MAPS
 2213                        	;------------
 2214               7000     			align	256
 2215    0A:7000             	MAP_HUD1:		incmap	"res/maps/tilemap_HUD.png",    0 ,   0 , 128 , 64 , blocks_HUD1 ; // 128x16 = 2048 | 64x16 = 1024
 2216    0B:7000             			flagmap "res/maps/collision_LV1.png",       0 ,   0 , 128 , 64 , MAP_HUD1
 2217               7000     			align	256
 2218    0B:7000             	MAP_HUD2:		incmap	"res/maps/tilemap_HUD.png", 2048 ,   0 ,  32 , 64 , blocks_HUD2 ; //  32x16 =  512 | 64x16 = 1024
 2219    0B:7800             			flagmap "res/maps/collision_LV1.png",    2048 ,   0 ,  32 , 64 , MAP_HUD2
 2220                        	; SWIZZLE MAPS
 2221                        	;-------------
 2222    0B:7800             	swizzle	MAP_HUD1,  32, 16 ;
 2223    0B:7800             	swizzle	MAP_HUD2,  32, 16 ;
 2224                        	; BUILD MULTIMAP
 2225                        	;---------------
 2226    0B:7800             	_multimap_LV1_BG_A:
 2227                        			; 1st line of 5 screens (512x256)
 2228                        			SCREEN MAP_HUD1 + 0x0000, blocks_HUD1, dummy_tbl, 0
         0B:7800  70 0A      			db	(((MAP_HUD1 + 0x0000) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0000)
         0B:7802  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:7804  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:7806  00 00      			dw	(0)
 2229                        			SCREEN MAP_HUD1 + 0x0200, blocks_HUD1, dummy_tbl, 0
         0B:7808  72 0A      			db	(((MAP_HUD1 + 0x0200) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0200)
         0B:780A  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:780C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:780E  00 00      			dw	(0)
 2230                        			SCREEN MAP_HUD1 + 0x0400, blocks_HUD1, dummy_tbl, 0
         0B:7810  74 0A      			db	(((MAP_HUD1 + 0x0400) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0400)
         0B:7812  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:7814  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:7816  00 00      			dw	(0)
 2231                        			SCREEN MAP_HUD1 + 0x0600, blocks_HUD1, dummy_tbl, 0
         0B:7818  76 0A      			db	(((MAP_HUD1 + 0x0600) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0600)
         0B:781A  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:781C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:781E  00 00      			dw	(0)
 2232                        			SCREEN MAP_HUD2 + 0x0000, blocks_HUD2, dummy_tbl, 0
         0B:7820  70 0B      			db	(((MAP_HUD2 + 0x0000) & $1FFF) | $6000) >> 8, bank(MAP_HUD2 + 0x0000)
         0B:7822  48 0A      			db	(((blocks_HUD2) & $1FFF) | $4000) >> 8, bank(blocks_HUD2)
         0B:7824  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:7826  00 00      			dw	(0)
 2233                        			; 2nd line of 5 screens (512x256)
 2234                        			SCREEN MAP_HUD1 + 0x0800, blocks_HUD1, dummy_tbl, 0
         0B:7828  78 0A      			db	(((MAP_HUD1 + 0x0800) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0800)
         0B:782A  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:782C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:782E  00 00      			dw	(0)
 2235                        			SCREEN MAP_HUD1 + 0x0A00, blocks_HUD1, dummy_tbl, 0
         0B:7830  7A 0A      			db	(((MAP_HUD1 + 0x0A00) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0A00)
         0B:7832  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:7834  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:7836  00 00      			dw	(0)
 2236                        			SCREEN MAP_HUD1 + 0x0C00, blocks_HUD1, dummy_tbl, 0
         0B:7838  7C 0A      			db	(((MAP_HUD1 + 0x0C00) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0C00)
         0B:783A  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:783C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:783E  00 00      			dw	(0)
 2237                        			SCREEN MAP_HUD1 + 0x0E00, blocks_HUD1, dummy_tbl, 0
         0B:7840  7E 0A      			db	(((MAP_HUD1 + 0x0E00) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0E00)
         0B:7842  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:7844  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:7846  00 00      			dw	(0)
 2238                        			SCREEN MAP_HUD2 + 0x0200, blocks_HUD2, dummy_tbl, 0
         0B:7848  72 0B      			db	(((MAP_HUD2 + 0x0200) & $1FFF) | $6000) >> 8, bank(MAP_HUD2 + 0x0200)
         0B:784A  48 0A      			db	(((blocks_HUD2) & $1FFF) | $4000) >> 8, bank(blocks_HUD2)
         0B:784C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:784E  00 00      			dw	(0)
 2239                        			; 3rd line of 5 screens (512x256)
 2240                        			SCREEN MAP_HUD1 + 0x1000, blocks_HUD1, dummy_tbl, 0
         0B:7850  60 0B      			db	(((MAP_HUD1 + 0x1000) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1000)
         0B:7852  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:7854  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:7856  00 00      			dw	(0)
 2241                        			SCREEN MAP_HUD1 + 0x1200, blocks_HUD1, dummy_tbl, 0
         0B:7858  62 0B      			db	(((MAP_HUD1 + 0x1200) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1200)
         0B:785A  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:785C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:785E  00 00      			dw	(0)
 2242                        			SCREEN MAP_HUD1 + 0x1400, blocks_HUD1, dummy_tbl, 0
         0B:7860  64 0B      			db	(((MAP_HUD1 + 0x1400) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1400)
         0B:7862  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:7864  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:7866  00 00      			dw	(0)
 2243                        			SCREEN MAP_HUD1 + 0x1600, blocks_HUD1, dummy_tbl, 0
         0B:7868  66 0B      			db	(((MAP_HUD1 + 0x1600) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1600)
         0B:786A  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:786C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:786E  00 00      			dw	(0)
 2244                        			SCREEN MAP_HUD2 + 0x0400, blocks_HUD2, dummy_tbl, 0
         0B:7870  74 0B      			db	(((MAP_HUD2 + 0x0400) & $1FFF) | $6000) >> 8, bank(MAP_HUD2 + 0x0400)
         0B:7872  48 0A      			db	(((blocks_HUD2) & $1FFF) | $4000) >> 8, bank(blocks_HUD2)
         0B:7874  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:7876  00 00      			dw	(0)
 2245                        			; 4th line of 5 screens (512x256)
 2246                        			SCREEN MAP_HUD1 + 0x1800, blocks_HUD1, dummy_tbl, 0
         0B:7878  68 0B      			db	(((MAP_HUD1 + 0x1800) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1800)
         0B:787A  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:787C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:787E  00 00      			dw	(0)
 2247                        			SCREEN MAP_HUD1 + 0x1A00, blocks_HUD1, dummy_tbl, 0
         0B:7880  6A 0B      			db	(((MAP_HUD1 + 0x1A00) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1A00)
         0B:7882  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:7884  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:7886  00 00      			dw	(0)
 2248                        			SCREEN MAP_HUD1 + 0x1C00, blocks_HUD1, dummy_tbl, 0
         0B:7888  6C 0B      			db	(((MAP_HUD1 + 0x1C00) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1C00)
         0B:788A  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:788C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:788E  00 00      			dw	(0)
 2249                        			SCREEN MAP_HUD1 + 0x1E00, blocks_HUD1, dummy_tbl, 0
         0B:7890  6E 0B      			db	(((MAP_HUD1 + 0x1E00) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1E00)
         0B:7892  40 0A      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0B:7894  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:7896  00 00      			dw	(0)
 2250                        			SCREEN MAP_HUD2 + 0x0600, blocks_HUD2, dummy_tbl, 0
         0B:7898  76 0B      			db	(((MAP_HUD2 + 0x0600) & $1FFF) | $6000) >> 8, bank(MAP_HUD2 + 0x0600)
         0B:789A  48 0A      			db	(((blocks_HUD2) & $1FFF) | $4000) >> 8, bank(blocks_HUD2)
         0B:789C  78 09      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:789E  00 00      			dw	(0)
 2251               E309     			.code
 2252                        	
 2253                        		.dbg	line,	"include\gfx_BG.c", 208; #endasm
 2254                        		.dbg	line,	"include\gfx_BG.c", 212; //--------------------------------------------------------------------------------------//
 2255                        		.dbg	line,	"include\gfx_BG.c", 213; //                                   EXTRACT PALETTES                                   //
 2256                        		.dbg	line,	"include\gfx_BG.c", 214; //--------------------------------------------------------------------------------------//
 2257                        		.dbg	line,	"include\gfx_BG.c", 216; #incpal(palette_LV1,"res/maps/tilemap_LV1_BG_B.png");
 2258               78A0     		.data
 2259    0B:78A0             	_palette_LV1:	.incpal		"res/maps/tilemap_LV1_BG_B.png"
 2260               E309     		.code
 2261                        		.dbg	line,	"include\gfx_BG.c", 225; //**************************************************************************************//
 2262                        		.dbg	line,	"include\gfx_BG.c", 226; //                                                                                      //
 2263                        		.dbg	line,	"include\gfx_BG.c", 227; //                                         SHOP                                         //
 2264                        		.dbg	line,	"include\gfx_BG.c", 228; //                                                                                      //
 2265                        		.dbg	line,	"include\gfx_BG.c", 229; //**************************************************************************************//
 2266                        		.dbg	line,	"include\gfx_BG.c", 231; #asm
 2267                        		.dbg	clear
 2268               0001     	OPTIMIZE	=	1
 2269               7AA0     			.data
 2270                        	;//--------------------------------------------------------------------------------------//
 2271                        	;//                                        VDC 1                                         //
 2272                        	;//--------------------------------------------------------------------------------------//
 2273                        	; EXTRACT TILESET
 2274                        	;----------------
 2275    0B:7AA0             	_tileset_SHOP_BG_B:		incchr	"res/maps/template_ITEM_1.png"
 2276    0B:7B20             			incchr	"res/maps/template_ITEM_2.png"
 2277    0B:7BA0             			incchr	"res/maps/template_ITEM_3.png"
 2278    0B:7C20             			incchr	"res/maps/template_ITEM_4.png"
 2279    0B:7CA0             			incchr	"res/maps/template_ITEM_5.png"
 2280    0B:7D20             			incchr	"res/maps/template_ITEM_6.png"
 2281    0B:7DA0             			incchr	"res/maps/template_ITEM_7.png"
 2282    0B:7E20             			incchr	"res/maps/template_ITEM_8.png"
 2283    0B:7EA0             			incchr	"res/maps/template_ITEM_9.png"
 2284    0B:7F20             			incchr	"res/maps/template_ITEM_10.png"
 2285    0B:7FA0             			incchr	"res/maps/tilemap_SHOP_BG_B.png", OPTIMIZE
 2286               E309     			.code
 2287                        	
 2288                        		.dbg	line,	"include\gfx_BG.c", 255; #endasm
 2289                        		.dbg	line,	"include\gfx_BG.c", 258; // EXTRACT BLOCKS //
 2290                        		.dbg	line,	"include\gfx_BG.c", 259; #incblk(blocks_SHOP_BG_B, "res/maps/tilemap_SHOP_BG_B.png", 0x1000, tileset_SHOP_BG_B);
 2291               7400     		.data
 2292    0D:7800             	_blocks_SHOP_BG_B:	.incblk		"res/maps/tilemap_SHOP_BG_B.png", 4096, _tileset_SHOP_BG_B
 2293               E309     		.code
 2294                        		.dbg	line,	"include\gfx_BG.c", 261; // EXTRACT MAP //
 2295                        		.dbg	line,	"include\gfx_BG.c", 262; #incmap(map_SHOP_BG_B, "res/maps/tilemap_SHOP_BG_B.png", blocks_SHOP_BG_B);
 2296               8000     		.data
 2297    0E:6000             	_map_SHOP_BG_B:	.incmap		"res/maps/tilemap_SHOP_BG_B.png", _blocks_SHOP_BG_B
 2298               E309     		.code
 2299                        		.dbg	line,	"include\gfx_BG.c", 265; //--------------------------------------------------------------------------------------//
 2300                        		.dbg	line,	"include\gfx_BG.c", 266; //                                        ITEMS                                         //
 2301                        		.dbg	line,	"include\gfx_BG.c", 267; //--------------------------------------------------------------------------------------//
 2302                        		.dbg	line,	"include\gfx_BG.c", 269; #incchr(tiles_ITEM_WEAPON_2,"res/maps/tiles_ITEM_WEAPON_2.png", 2 , 2);
 2303               60E0     		.data
 2304    0E:60E0             	_tiles_ITEM_WEAPON_2: 	.incchr		"res/maps/tiles_ITEM_WEAPON_2.png", 2, 2
 2305               E309     		.code
 2306                        		.dbg	line,	"include\gfx_BG.c", 270; #incchr(tiles_ITEM_WEAPON_3,"res/maps/tiles_ITEM_WEAPON_3.png", 2 , 2);
 2307               6160     		.data
 2308    0E:6160             	_tiles_ITEM_WEAPON_3: 	.incchr		"res/maps/tiles_ITEM_WEAPON_3.png", 2, 2
 2309               E309     		.code
 2310                        		.dbg	line,	"include\gfx_BG.c", 271; #incchr(tiles_ITEM_WEAPON_4,"res/maps/tiles_ITEM_WEAPON_4.png", 2 , 2);
 2311               61E0     		.data
 2312    0E:61E0             	_tiles_ITEM_WEAPON_4: 	.incchr		"res/maps/tiles_ITEM_WEAPON_4.png", 2, 2
 2313               E309     		.code
 2314                        		.dbg	line,	"include\gfx_BG.c", 272; #incchr(tiles_ITEM_WEAPON_5,"res/maps/tiles_ITEM_WEAPON_5.png", 2 , 2);
 2315               6260     		.data
 2316    0E:6260             	_tiles_ITEM_WEAPON_5: 	.incchr		"res/maps/tiles_ITEM_WEAPON_5.png", 2, 2
 2317               E309     		.code
 2318                        		.dbg	line,	"include\gfx_BG.c", 273; #incchr(tiles_ITEM_KEY,"res/maps/tiles_ITEM_KEY.png", 2 , 2);
 2319               62E0     		.data
 2320    0E:62E0             	_tiles_ITEM_KEY: 	.incchr		"res/maps/tiles_ITEM_KEY.png", 2, 2
 2321               E309     		.code
 2322                        		.dbg	line,	"include\gfx_BG.c", 274; #incchr(tiles_ITEM_ARMOR_2,"res/maps/tiles_ITEM_ARMOR_2.png", 2 , 2);
 2323               6360     		.data
 2324    0E:6360             	_tiles_ITEM_ARMOR_2: 	.incchr		"res/maps/tiles_ITEM_ARMOR_2.png", 2, 2
 2325               E309     		.code
 2326                        		.dbg	line,	"include\gfx_BG.c", 275; #incchr(tiles_ITEM_ARMOR_3,"res/maps/tiles_ITEM_ARMOR_3.png", 2 , 2);
 2327               63E0     		.data
 2328    0E:63E0             	_tiles_ITEM_ARMOR_3: 	.incchr		"res/maps/tiles_ITEM_ARMOR_3.png", 2, 2
 2329               E309     		.code
 2330                        		.dbg	line,	"include\gfx_BG.c", 276; #incchr(tiles_ITEM_ARMOR_4,"res/maps/tiles_ITEM_ARMOR_4.png", 2 , 2);
 2331               6460     		.data
 2332    0E:6460             	_tiles_ITEM_ARMOR_4: 	.incchr		"res/maps/tiles_ITEM_ARMOR_4.png", 2, 2
 2333               E309     		.code
 2334                        		.dbg	line,	"include\gfx_BG.c", 277; #incchr(tiles_ITEM_ARMOR_5,"res/maps/tiles_ITEM_ARMOR_5.png", 2 , 2);
 2335               64E0     		.data
 2336    0E:64E0             	_tiles_ITEM_ARMOR_5: 	.incchr		"res/maps/tiles_ITEM_ARMOR_5.png", 2, 2
 2337               E309     		.code
 2338                        		.dbg	line,	"include\gfx_BG.c", 278; #incchr(tiles_ITEM_POTION,"res/maps/tiles_ITEM_POTION.png", 2 , 2);
 2339               6560     		.data
 2340    0E:6560             	_tiles_ITEM_POTION: 	.incchr		"res/maps/tiles_ITEM_POTION.png", 2, 2
 2341               E309     		.code
 2342                        		.dbg	line,	"include\gfx_BG.c", 280; //#incchr(tileset_NUMBERS_SHOP_FONT,"res/maps/tiles_NUMBERS_SHOP_FONT.png");
 2343                        		.dbg	line,	"include\gfx_BG.c", 283; //--------------------------------------------------------------------------------------//
 2344                        		.dbg	line,	"include\gfx_BG.c", 284; //                                   EXTRACT PALETTES                                   //
 2345                        		.dbg	line,	"include\gfx_BG.c", 285; //--------------------------------------------------------------------------------------//
 2346                        		.dbg	line,	"include\gfx_BG.c", 287; #incpal(palette_SHOP,"res/maps/tilemap_SHOP_BG_B.png");
 2347               65E0     		.data
 2348    0E:65E0             	_palette_SHOP:	.incpal		"res/maps/tilemap_SHOP_BG_B.png"
 2349               E309     		.code
 2350                        		.dbg	line,	"include\gfx_BG.c", 288; #incpal(palette_SHOP_ITEMS,"res/palettes/palette_SHOP_ITEMS.png");
 2351               67E0     		.data
 2352    0E:67E0             	_palette_SHOP_ITEMS:	.incpal		"res/palettes/palette_SHOP_ITEMS.png"
 2353               E309     		.code
 2354                        		.dbg	line,	"main.c", 12; #include "include/gfx_SPRITES.c"
 2355                        		.dbg	line,	"include\gfx_SPRITES.c", 1; #include "huc.h"
 2356                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
 2357                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
 2358                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
 2359                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
 2360                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
 2361                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
 2362                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
 2363                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
 2364                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
 2365                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
 2366                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
 2367                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 2368                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 2369                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 2370                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
 2371                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
 2372                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
 2373                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
 2374                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
 2375                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
 2376                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
 2377                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
 2378                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
 2379                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
 2380                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
 2381                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
 2382                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
 2383                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
 2384                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
 2385                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
 2386                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
 2387                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
 2388                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
 2389                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
 2390                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
 2391                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
 2392                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
 2393                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
 2394                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
 2395                        		.dbg	line,	"include\gfx_SPRITES.c", 10; // EXTRACT PLAYER TILES //
 2396                        		.dbg	line,	"include\gfx_SPRITES.c", 11; #incspr(tiles_SPR_PLAYER_ARMOR,"res/sprites/tiles_SPR_PLAYER_ARMOR.png")
 2397               69E0     		.data
 2398    0E:69E0             	_tiles_SPR_PLAYER_ARMOR:	.incspr		"res/sprites/tiles_SPR_PLAYER_ARMOR.png"
 2399               E309     		.code
 2400                        		.dbg	line,	"include\gfx_SPRITES.c", 12; #incspr(tiles_SPR_PLAYER_NAKED,"res/sprites/tiles_SPR_PLAYER_NAKED.png")
 2401               7BE0     		.data
 2402    0F:7BE0             	_tiles_SPR_PLAYER_NAKED:	.incspr		"res/sprites/tiles_SPR_PLAYER_NAKED.png"
 2403               E309     		.code
 2404                        		.dbg	line,	"include\gfx_SPRITES.c", 14; // EXTRACT PLAYER PALETTE //
 2405                        		.dbg	line,	"include\gfx_SPRITES.c", 15; #incpal(palette_PLAYER_1,"res/palettes/palette_PLAYER_1.png");
 2406               6DE0     		.data
 2407    11:6DE0             	_palette_PLAYER_1:	.incpal		"res/palettes/palette_PLAYER_1.png"
 2408               E309     		.code
 2409                        		.dbg	line,	"include\gfx_SPRITES.c", 16; #incpal(palette_PLAYER_4,"res/palettes/palette_PLAYER_4.png");
 2410               6FE0     		.data
 2411    11:6FE0             	_palette_PLAYER_4:	.incpal		"res/palettes/palette_PLAYER_4.png"
 2412               E309     		.code
 2413                        		.dbg	line,	"include\gfx_SPRITES.c", 17; #incpal(palette_PLAYER_5,"res/palettes/palette_PLAYER_5.png");
 2414               71E0     		.data
 2415    11:71E0             	_palette_PLAYER_5:	.incpal		"res/palettes/palette_PLAYER_5.png"
 2416               E309     		.code
 2417                        		.dbg	line,	"include\gfx_SPRITES.c", 18; #incpal(palette_PLAYER_8,"res/palettes/palette_PLAYER_8.png");
 2418               73E0     		.data
 2419    11:73E0             	_palette_PLAYER_8:	.incpal		"res/palettes/palette_PLAYER_8.png"
 2420               E309     		.code
 2421                        		.dbg	line,	"include\gfx_SPRITES.c", 21; // EXTRACT WEAPONS TILES //
 2422                        		.dbg	line,	"include\gfx_SPRITES.c", 22; #incspr(tiles_SPR_CHAIN,"res/sprites/tiles_SPR_CHAIN.png")
 2423               75E0     		.data
 2424    11:75E0             	_tiles_SPR_CHAIN:	.incspr		"res/sprites/tiles_SPR_CHAIN.png"
 2425               E309     		.code
 2426                        		.dbg	line,	"include\gfx_SPRITES.c", 23; #incspr(tiles_SPR_WEAPON_0,"res/sprites/tiles_SPR_WEAPON_0.png")
 2427               7660     		.data
 2428    11:7660             	_tiles_SPR_WEAPON_0:	.incspr		"res/sprites/tiles_SPR_WEAPON_0.png"
 2429               E309     		.code
 2430                        		.dbg	line,	"include\gfx_SPRITES.c", 24; #incspr(tiles_SPR_WEAPON_1,"res/sprites/tiles_SPR_WEAPON_1.png")
 2431               78E0     		.data
 2432    11:78E0             	_tiles_SPR_WEAPON_1:	.incspr		"res/sprites/tiles_SPR_WEAPON_1.png"
 2433               E309     		.code
 2434                        		.dbg	line,	"include\gfx_SPRITES.c", 25; #incspr(tiles_SPR_WEAPON_2,"res/sprites/tiles_SPR_WEAPON_2.png")
 2435               7B60     		.data
 2436    11:7B60             	_tiles_SPR_WEAPON_2:	.incspr		"res/sprites/tiles_SPR_WEAPON_2.png"
 2437               E309     		.code
 2438                        		.dbg	line,	"include\gfx_SPRITES.c", 26; #incspr(tiles_SPR_WEAPON_3,"res/sprites/tiles_SPR_WEAPON_3.png")
 2439               7DE0     		.data
 2440    11:7DE0             	_tiles_SPR_WEAPON_3:	.incspr		"res/sprites/tiles_SPR_WEAPON_3.png"
 2441               E309     		.code
 2442                        		.dbg	line,	"include\gfx_SPRITES.c", 27; #incspr(tiles_SPR_WEAPON_4,"res/sprites/tiles_SPR_WEAPON_4.png")
 2443               6060     		.data
 2444    12:6060             	_tiles_SPR_WEAPON_4:	.incspr		"res/sprites/tiles_SPR_WEAPON_4.png"
 2445               E309     		.code
 2446                        		.dbg	line,	"include\gfx_SPRITES.c", 30; #incspr(tiles_SPR_HIT,"res/sprites/tiles_SPR_HIT.png")
 2447               62E0     		.data
 2448    12:62E0             	_tiles_SPR_HIT:	.incspr		"res/sprites/tiles_SPR_HIT.png"
 2449               E309     		.code
 2450                        		.dbg	line,	"include\gfx_SPRITES.c", 33; // EXTRACT OBJECTS TILES //
 2451                        		.dbg	line,	"include\gfx_SPRITES.c", 34; #incspr(tiles_SPR_BARREL,"res/sprites/tiles_SPR_BARREL.png")
 2452               6360     		.data
 2453    12:6360             	_tiles_SPR_BARREL:	.incspr		"res/sprites/tiles_SPR_BARREL.png"
 2454               E309     		.code
 2455                        		.dbg	line,	"include\gfx_SPRITES.c", 35; #incspr(tiles_SPR_CHEST,"res/sprites/tiles_SPR_CHEST.png")
 2456               63E0     		.data
 2457    12:63E0             	_tiles_SPR_CHEST:	.incspr		"res/sprites/tiles_SPR_CHEST.png"
 2458               E309     		.code
 2459                        		.dbg	line,	"include\gfx_SPRITES.c", 36; #incspr(tiles_SPR_COIN_1,"res/sprites/tiles_SPR_COIN_1.png")
 2460               6FE0     		.data
 2461    12:6FE0             	_tiles_SPR_COIN_1:	.incspr		"res/sprites/tiles_SPR_COIN_1.png"
 2462               E309     		.code
 2463                        		.dbg	line,	"include\gfx_SPRITES.c", 37; #incspr(tiles_SPR_COIN_5,"res/sprites/tiles_SPR_COIN_5.png")
 2464               7060     		.data
 2465    12:7060             	_tiles_SPR_COIN_5:	.incspr		"res/sprites/tiles_SPR_COIN_5.png"
 2466               E309     		.code
 2467                        		.dbg	line,	"include\gfx_SPRITES.c", 38; #incspr(tiles_SPR_COIN_10,"res/sprites/tiles_SPR_COIN_10.png")
 2468               70E0     		.data
 2469    12:70E0             	_tiles_SPR_COIN_10:	.incspr		"res/sprites/tiles_SPR_COIN_10.png"
 2470               E309     		.code
 2471                        		.dbg	line,	"include\gfx_SPRITES.c", 39; #incspr(tiles_SPR_COIN_50,"res/sprites/tiles_SPR_COIN_50.png")
 2472               7160     		.data
 2473    12:7160             	_tiles_SPR_COIN_50:	.incspr		"res/sprites/tiles_SPR_COIN_50.png"
 2474               E309     		.code
 2475                        		.dbg	line,	"include\gfx_SPRITES.c", 40; #incspr(tiles_SPR_COIN_100,"res/sprites/tiles_SPR_COIN_100.png")
 2476               71E0     		.data
 2477    12:71E0             	_tiles_SPR_COIN_100:	.incspr		"res/sprites/tiles_SPR_COIN_100.png"
 2478               E309     		.code
 2479                        		.dbg	line,	"include\gfx_SPRITES.c", 41; #incspr(tiles_SPR_COIN_500,"res/sprites/tiles_SPR_COIN_500.png")
 2480               7260     		.data
 2481    12:7260             	_tiles_SPR_COIN_500:	.incspr		"res/sprites/tiles_SPR_COIN_500.png"
 2482               E309     		.code
 2483                        		.dbg	line,	"include\gfx_SPRITES.c", 42; #incspr(tiles_SPR_COIN_1000,"res/sprites/tiles_SPR_COIN_1000.png")
 2484               72E0     		.data
 2485    12:72E0             	_tiles_SPR_COIN_1000:	.incspr		"res/sprites/tiles_SPR_COIN_1000.png"
 2486               E309     		.code
 2487                        		.dbg	line,	"include\gfx_SPRITES.c", 43; #incspr(tiles_SPR_FRUIT,"res/sprites/tiles_SPR_FRUIT.png")
 2488               7360     		.data
 2489    12:7360             	_tiles_SPR_FRUIT:	.incspr		"res/sprites/tiles_SPR_FRUIT.png"
 2490               E309     		.code
 2491                        		.dbg	line,	"include\gfx_SPRITES.c", 44; #incspr(tiles_SPR_GRAY_KEY,"res/sprites/tiles_SPR_GRAY_KEY.png")
 2492               73E0     		.data
 2493    12:73E0             	_tiles_SPR_GRAY_KEY:	.incspr		"res/sprites/tiles_SPR_GRAY_KEY.png"
 2494               E309     		.code
 2495                        		.dbg	line,	"include\gfx_SPRITES.c", 45; #incspr(tiles_SPR_GOLD_KEY,"res/sprites/tiles_SPR_GOLD_KEY.png")
 2496               7460     		.data
 2497    12:7460             	_tiles_SPR_GOLD_KEY:	.incspr		"res/sprites/tiles_SPR_GOLD_KEY.png"
 2498               E309     		.code
 2499                        		.dbg	line,	"include\gfx_SPRITES.c", 46; #incspr(tiles_SPR_HOURGLASS,"res/sprites/tiles_SPR_HOURGLASS.png")
 2500               74E0     		.data
 2501    12:74E0             	_tiles_SPR_HOURGLASS:	.incspr		"res/sprites/tiles_SPR_HOURGLASS.png"
 2502               E309     		.code
 2503                        		.dbg	line,	"include\gfx_SPRITES.c", 47; #incspr(tiles_SPR_LIFE,"res/sprites/tiles_SPR_LIFE.png")
 2504               7560     		.data
 2505    12:7560             	_tiles_SPR_LIFE:	.incspr		"res/sprites/tiles_SPR_LIFE.png"
 2506               E309     		.code
 2507                        		.dbg	line,	"include\gfx_SPRITES.c", 48; #incspr(tiles_SPR_OCTOPUS,"res/sprites/tiles_SPR_OCTOPUS.png")
 2508               75E0     		.data
 2509    12:75E0             	_tiles_SPR_OCTOPUS:	.incspr		"res/sprites/tiles_SPR_OCTOPUS.png"
 2510               E309     		.code
 2511                        		.dbg	line,	"include\gfx_SPRITES.c", 49; #incspr(tiles_SPR_POT,"res/sprites/tiles_SPR_POT.png")
 2512               7660     		.data
 2513    12:7660             	_tiles_SPR_POT:	.incspr		"res/sprites/tiles_SPR_POT.png"
 2514               E309     		.code
 2515                        		.dbg	line,	"include\gfx_SPRITES.c", 50; #incspr(tiles_SPR_POW,"res/sprites/tiles_SPR_POW.png")
 2516               7A60     		.data
 2517    12:7A60             	_tiles_SPR_POW:	.incspr		"res/sprites/tiles_SPR_POW.png"
 2518               E309     		.code
 2519                        		.dbg	line,	"include\gfx_SPRITES.c", 51; #incspr(tiles_SPR_STAR,"res/sprites/tiles_SPR_STAR.png")
 2520               7AE0     		.data
 2521    12:7AE0             	_tiles_SPR_STAR:	.incspr		"res/sprites/tiles_SPR_STAR.png"
 2522               E309     		.code
 2523                        		.dbg	line,	"include\gfx_SPRITES.c", 52; #incspr(tiles_SPR_BAMBOO,"res/sprites/tiles_SPR_BAMBOO.png")
 2524               7B60     		.data
 2525    12:7B60             	_tiles_SPR_BAMBOO:	.incspr		"res/sprites/tiles_SPR_BAMBOO.png"
 2526               E309     		.code
 2527                        		.dbg	line,	"include\gfx_SPRITES.c", 53; #incspr(tiles_SPR_YASHICHI,"res/sprites/tiles_SPR_YASHICHI.png")
 2528               7BE0     		.data
 2529    12:7BE0             	_tiles_SPR_YASHICHI:	.incspr		"res/sprites/tiles_SPR_YASHICHI.png"
 2530               E309     		.code
 2531                        		.dbg	line,	"include\gfx_SPRITES.c", 54; #incspr(tiles_SPR_ELEPHANT,"res/sprites/tiles_SPR_ELEPHANT.png")
 2532               7C60     		.data
 2533    12:7C60             	_tiles_SPR_ELEPHANT:	.incspr		"res/sprites/tiles_SPR_ELEPHANT.png"
 2534               E309     		.code
 2535                        		.dbg	line,	"include\gfx_SPRITES.c", 55; #incspr(tiles_SPR_DRAGONFLY,"res/sprites/tiles_SPR_DRAGONFLY.png")
 2536               7CE0     		.data
 2537    12:7CE0             	_tiles_SPR_DRAGONFLY:	.incspr		"res/sprites/tiles_SPR_DRAGONFLY.png"
 2538               E309     		.code
 2539                        		.dbg	line,	"include\gfx_SPRITES.c", 56; #incspr(tiles_SPR_COW,"res/sprites/tiles_SPR_COW.png")
 2540               7D60     		.data
 2541    12:7D60             	_tiles_SPR_COW:	.incspr		"res/sprites/tiles_SPR_COW.png"
 2542               E309     		.code
 2543                        		.dbg	line,	"include\gfx_SPRITES.c", 57; #incspr(tiles_SPR_MOBICHAN,"res/sprites/tiles_SPR_MOBICHAN.png")
 2544               7DE0     		.data
 2545    12:7DE0             	_tiles_SPR_MOBICHAN:	.incspr		"res/sprites/tiles_SPR_MOBICHAN.png"
 2546               E309     		.code
 2547                        		.dbg	line,	"include\gfx_SPRITES.c", 59; // EXTRACT OBJECTS PALETTE //
 2548                        		.dbg	line,	"include\gfx_SPRITES.c", 60; #incpal(palette_objects_1,"res/palettes/palette_objects_1.png");
 2549               7E60     		.data
 2550    12:7E60             	_palette_objects_1:	.incpal		"res/palettes/palette_objects_1.png"
 2551               E309     		.code
 2552                        		.dbg	line,	"include\gfx_SPRITES.c", 61; #incpal(palette_objects_2,"res/palettes/palette_objects_2.png");
 2553               6060     		.data
 2554    13:6060             	_palette_objects_2:	.incpal		"res/palettes/palette_objects_2.png"
 2555               E309     		.code
 2556                        		.dbg	line,	"include\gfx_SPRITES.c", 64; // EXTRACT NPCS TILES //
 2557                        		.dbg	line,	"include\gfx_SPRITES.c", 65; #incspr(tiles_SPR_NPC,"res/sprites/tiles_SPR_NPC.png")
 2558               6260     		.data
 2559    13:6260             	_tiles_SPR_NPC:	.incspr		"res/sprites/tiles_SPR_NPC.png"
 2560               E309     		.code
 2561                        		.dbg	line,	"include\gfx_SPRITES.c", 69; // EXTRACT CURSOR TILES //
 2562                        		.dbg	line,	"include\gfx_SPRITES.c", 70; #incspr(tiles_SPR_CURSOR,"res/sprites/tiles_SPR_CURSOR.png")
 2563               6E60     		.data
 2564    13:6E60             	_tiles_SPR_CURSOR:	.incspr		"res/sprites/tiles_SPR_CURSOR.png"
 2565               E309     		.code
 2566                        		.dbg	line,	"main.c", 15; #include "include/tables_NPC.c"
 2567                        		.dbg	line,	"include\tables_NPC.c", 1; //-----------------------------------------------------------------------------//
 2568                        		.dbg	line,	"include\tables_NPC.c", 2; //                                                                             //
 2569                        		.dbg	line,	"include\tables_NPC.c", 3; //                                   LEVEL 1                                   //
 2570                        		.dbg	line,	"include\tables_NPC.c", 4; //                                                                             //
 2571                        		.dbg	line,	"include\tables_NPC.c", 5; //-----------------------------------------------------------------------------//
 2572                        		.dbg	line,	"include\tables_NPC.c", 7; const char              TABLE_NPC_TYPE_LV1[NPC_NUMBER_LV1]              =   {
 2573                        		.dbg	line,	"include\tables_NPC.c", 8; TYPE_NPC_SHOP,
 2574                        		.dbg	line,	"include\tables_NPC.c", 9; TYPE_NPC_REWARD
 2575                        		.dbg	line,	"include\tables_NPC.c", 10; };
 2576                        		.dbg	line,	"include\tables_NPC.c", 13; const signed int        TABLE_NPC_X_POS_REF_LV1[NPC_NUMBER_LV1]         =   {
 2577                        		.dbg	line,	"include\tables_NPC.c", 14; 912,
 2578                        		.dbg	line,	"include\tables_NPC.c", 15; 1232
 2579                        		.dbg	line,	"include\tables_NPC.c", 16; };
 2580                        		.dbg	line,	"include\tables_NPC.c", 19; const signed int        TABLE_NPC_Y_POS_REF_LV1[NPC_NUMBER_LV1]         =   {
 2581                        		.dbg	line,	"include\tables_NPC.c", 20; 576,
 2582                        		.dbg	line,	"include\tables_NPC.c", 21; 400
 2583                        		.dbg	line,	"include\tables_NPC.c", 22; };
 2584                        		.dbg	line,	"main.c", 16; #include "include/tables_OBJECT.c"
 2585                        		.dbg	line,	"include\tables_OBJECT.c", 1; //-----------------------------------------------------------------------------//
 2586                        		.dbg	line,	"include\tables_OBJECT.c", 2; //                                                                             //
 2587                        		.dbg	line,	"include\tables_OBJECT.c", 3; //                                   LEVEL 1                                   //
 2588                        		.dbg	line,	"include\tables_OBJECT.c", 4; //                                                                             //
 2589                        		.dbg	line,	"include\tables_OBJECT.c", 5; //-----------------------------------------------------------------------------//
 2590                        		.dbg	line,	"include\tables_OBJECT.c", 7; const char              TABLE_OBJECT_TYPE_LV1[OBJECT_NUMBER_LV1]      =   {
 2591                        		.dbg	line,	"include\tables_OBJECT.c", 8; TYPE_HOURGLASS,
 2592                        		.dbg	line,	"include\tables_OBJECT.c", 9; TYPE_POT,
 2593                        		.dbg	line,	"include\tables_OBJECT.c", 10; TYPE_POT,
 2594                        		.dbg	line,	"include\tables_OBJECT.c", 11; TYPE_POT,
 2595                        		.dbg	line,	"include\tables_OBJECT.c", 12; TYPE_POT,
 2596                        		.dbg	line,	"include\tables_OBJECT.c", 13; TYPE_POT,
 2597                        		.dbg	line,	"include\tables_OBJECT.c", 14; TYPE_POT,
 2598                        		.dbg	line,	"include\tables_OBJECT.c", 15; TYPE_POW,
 2599                        		.dbg	line,	"include\tables_OBJECT.c", 16; TYPE_POT,
 2600                        		.dbg	line,	"include\tables_OBJECT.c", 17; TYPE_POT,
 2601                        		.dbg	line,	"include\tables_OBJECT.c", 19; //
 2602                        		.dbg	line,	"include\tables_OBJECT.c", 20; TYPE_POT,
 2603                        		.dbg	line,	"include\tables_OBJECT.c", 21; TYPE_POT,
 2604                        		.dbg	line,	"include\tables_OBJECT.c", 22; TYPE_POT,
 2605                        		.dbg	line,	"include\tables_OBJECT.c", 23; TYPE_POT,
 2606                        		.dbg	line,	"include\tables_OBJECT.c", 24; TYPE_POT,
 2607                        		.dbg	line,	"include\tables_OBJECT.c", 25; TYPE_POT,
 2608                        		.dbg	line,	"include\tables_OBJECT.c", 26; TYPE_POT,
 2609                        		.dbg	line,	"include\tables_OBJECT.c", 27; TYPE_POT,
 2610                        		.dbg	line,	"include\tables_OBJECT.c", 28; TYPE_POT,
 2611                        		.dbg	line,	"include\tables_OBJECT.c", 29; TYPE_POT,
 2612                        		.dbg	line,	"include\tables_OBJECT.c", 31; //
 2613                        		.dbg	line,	"include\tables_OBJECT.c", 32; TYPE_POT,
 2614                        		.dbg	line,	"include\tables_OBJECT.c", 33; TYPE_POT,
 2615                        		.dbg	line,	"include\tables_OBJECT.c", 34; TYPE_POT
 2616                        		.dbg	line,	"include\tables_OBJECT.c", 35; };
 2617                        		.dbg	line,	"include\tables_OBJECT.c", 38; const signed int        TABLE_OBJECT_X_POS_REF_LV1[OBJECT_NUMBER_LV1] =   {
 2618                        		.dbg	line,	"include\tables_OBJECT.c", 39; 1680,
 2619                        		.dbg	line,	"include\tables_OBJECT.c", 40; 1280,
 2620                        		.dbg	line,	"include\tables_OBJECT.c", 41; 1472,
 2621                        		.dbg	line,	"include\tables_OBJECT.c", 42; 1440,
 2622                        		.dbg	line,	"include\tables_OBJECT.c", 43; 1168,
 2623                        		.dbg	line,	"include\tables_OBJECT.c", 44; 1200,
 2624                        		.dbg	line,	"include\tables_OBJECT.c", 45; 960,
 2625                        		.dbg	line,	"include\tables_OBJECT.c", 46; 984,
 2626                        		.dbg	line,	"include\tables_OBJECT.c", 47; 1360,
 2627                        		.dbg	line,	"include\tables_OBJECT.c", 48; 1392,
 2628                        		.dbg	line,	"include\tables_OBJECT.c", 50; //
 2629                        		.dbg	line,	"include\tables_OBJECT.c", 51; 1552,
 2630                        		.dbg	line,	"include\tables_OBJECT.c", 52; 1680,
 2631                        		.dbg	line,	"include\tables_OBJECT.c", 53; 1712,
 2632                        		.dbg	line,	"include\tables_OBJECT.c", 54; 1744,
 2633                        		.dbg	line,	"include\tables_OBJECT.c", 55; 1248,
 2634                        		.dbg	line,	"include\tables_OBJECT.c", 56; 1280,
 2635                        		.dbg	line,	"include\tables_OBJECT.c", 57; 1168,
 2636                        		.dbg	line,	"include\tables_OBJECT.c", 58; 1040,
 2637                        		.dbg	line,	"include\tables_OBJECT.c", 59; 640,
 2638                        		.dbg	line,	"include\tables_OBJECT.c", 60; 672,
 2639                        		.dbg	line,	"include\tables_OBJECT.c", 62; //
 2640                        		.dbg	line,	"include\tables_OBJECT.c", 63; 336,
 2641                        		.dbg	line,	"include\tables_OBJECT.c", 64; 368,
 2642                        		.dbg	line,	"include\tables_OBJECT.c", 65; 416
 2643                        		.dbg	line,	"include\tables_OBJECT.c", 66; };
 2644                        		.dbg	line,	"include\tables_OBJECT.c", 69; const signed int        TABLE_OBJECT_Y_POS_REF_LV1[OBJECT_NUMBER_LV1] =   {
 2645                        		.dbg	line,	"include\tables_OBJECT.c", 70; 384,
 2646                        		.dbg	line,	"include\tables_OBJECT.c", 71; 416,
 2647                        		.dbg	line,	"include\tables_OBJECT.c", 72; 480,
 2648                        		.dbg	line,	"include\tables_OBJECT.c", 73; 496,
 2649                        		.dbg	line,	"include\tables_OBJECT.c", 74; 560,
 2650                        		.dbg	line,	"include\tables_OBJECT.c", 75; 560,
 2651                        		.dbg	line,	"include\tables_OBJECT.c", 76; 592,
 2652                        		.dbg	line,	"include\tables_OBJECT.c", 77; 592,
 2653                        		.dbg	line,	"include\tables_OBJECT.c", 78; 592,
 2654                        		.dbg	line,	"include\tables_OBJECT.c", 79; 592,
 2655                        		.dbg	line,	"include\tables_OBJECT.c", 81; //
 2656                        		.dbg	line,	"include\tables_OBJECT.c", 82; 704,
 2657                        		.dbg	line,	"include\tables_OBJECT.c", 83; 720,
 2658                        		.dbg	line,	"include\tables_OBJECT.c", 84; 720,
 2659                        		.dbg	line,	"include\tables_OBJECT.c", 85; 720,
 2660                        		.dbg	line,	"include\tables_OBJECT.c", 86; 736,
 2661                        		.dbg	line,	"include\tables_OBJECT.c", 87; 736,
 2662                        		.dbg	line,	"include\tables_OBJECT.c", 88; 752,
 2663                        		.dbg	line,	"include\tables_OBJECT.c", 89; 848,
 2664                        		.dbg	line,	"include\tables_OBJECT.c", 90; 880,
 2665                        		.dbg	line,	"include\tables_OBJECT.c", 91; 880,
 2666                        		.dbg	line,	"include\tables_OBJECT.c", 93; //
 2667                        		.dbg	line,	"include\tables_OBJECT.c", 94; 896,
 2668                        		.dbg	line,	"include\tables_OBJECT.c", 95; 896,
 2669                        		.dbg	line,	"include\tables_OBJECT.c", 96; 896
 2670                        		.dbg	line,	"include\tables_OBJECT.c", 97; };
 2671                        		.dbg	line,	"include\tables_OBJECT.c", 100; /*const char              TABLE_REWARD_TYPE_LV1[OBJECT_NUMBER_LV1]       =   {
 2672                        		.dbg	line,	"include\tables_OBJECT.c", 101; TYPE_POT
 2673                        		.dbg	line,	"include\tables_OBJECT.c", 102; TYPE_POT,
 2674                        		.dbg	line,	"include\tables_OBJECT.c", 103; TYPE_POT,
 2675                        		.dbg	line,	"include\tables_OBJECT.c", 104; TYPE_POT,
 2676                        		.dbg	line,	"include\tables_OBJECT.c", 105; TYPE_POT,
 2677                        		.dbg	line,	"include\tables_OBJECT.c", 106; TYPE_POT,
 2678                        		.dbg	line,	"include\tables_OBJECT.c", 107; TYPE_POT,
 2679                        		.dbg	line,	"include\tables_OBJECT.c", 108; TYPE_POW,
 2680                        		.dbg	line,	"include\tables_OBJECT.c", 109; TYPE_POT,
 2681                        		.dbg	line,	"include\tables_OBJECT.c", 110; TYPE_POT,
 2682                        		.dbg	line,	"include\tables_OBJECT.c", 112; //
 2683                        		.dbg	line,	"include\tables_OBJECT.c", 113; TYPE_POT,
 2684                        		.dbg	line,	"include\tables_OBJECT.c", 114; TYPE_POT,
 2685                        		.dbg	line,	"include\tables_OBJECT.c", 115; TYPE_POT,
 2686                        		.dbg	line,	"include\tables_OBJECT.c", 116; TYPE_POT,
 2687                        		.dbg	line,	"include\tables_OBJECT.c", 117; TYPE_POT,
 2688                        		.dbg	line,	"include\tables_OBJECT.c", 118; TYPE_POT,
 2689                        		.dbg	line,	"include\tables_OBJECT.c", 119; TYPE_POT,
 2690                        		.dbg	line,	"include\tables_OBJECT.c", 120; TYPE_POT,
 2691                        		.dbg	line,	"include\tables_OBJECT.c", 122; //
 2692                        		.dbg	line,	"include\tables_OBJECT.c", 123; TYPE_GRAY_KEY,
 2693                        		.dbg	line,	"include\tables_OBJECT.c", 124; TYPE_GRAY_KEY,
 2694                        		.dbg	line,	"include\tables_OBJECT.c", 125; TYPE_GRAY_KEY,
 2695                        		.dbg	line,	"include\tables_OBJECT.c", 126; TYPE_COIN_5,
 2696                        		.dbg	line,	"include\tables_OBJECT.c", 127; TYPE_GRAY_KEY
 2697                        		.dbg	line,	"include\tables_OBJECT.c", 128; };*/
 2698                        		.dbg	line,	"include\tables_OBJECT.c", 133; const signed int        TABLE_CHEST_X_POS_REF_LV1[CHEST_NUMBER_LV1]   =   {
 2699                        		.dbg	line,	"include\tables_OBJECT.c", 134; 1072,
 2700                        		.dbg	line,	"include\tables_OBJECT.c", 135; 816
 2701                        		.dbg	line,	"include\tables_OBJECT.c", 136; };
 2702                        		.dbg	line,	"include\tables_OBJECT.c", 139; const signed int        TABLE_CHEST_Y_POS_REF_LV1[CHEST_NUMBER_LV1]   =   {
 2703                        		.dbg	line,	"include\tables_OBJECT.c", 140; 832,
 2704                        		.dbg	line,	"include\tables_OBJECT.c", 141; 848
 2705                        		.dbg	line,	"main.c", 16; };
 2706                        		.dbg	line,	"main.c", 17; #include "include/tables_PLAYER.c"
 2707                        		.dbg	line,	"include\tables_PLAYER.c", 3; const unsigned char     *TABLE_PLAYER_TILES_ADR[2]     =   {
 2708                        		.dbg	line,	"include\tables_PLAYER.c", 4; &tiles_SPR_PLAYER_ARMOR,
 2709                        		.dbg	line,	"include\tables_PLAYER.c", 5; &tiles_SPR_PLAYER_NAKED
 2710                        		.dbg	line,	"include\tables_PLAYER.c", 6; };
 2711                        		.dbg	line,	"include\tables_PLAYER.c", 9; const unsigned char     TABLE_PLAYER_TILES_BANK[2]     =   {
 2712                        		.dbg	line,	"include\tables_PLAYER.c", 10; ^tiles_SPR_PLAYER_ARMOR,
 2713                        		.dbg	line,	"include\tables_PLAYER.c", 11; ^tiles_SPR_PLAYER_NAKED
 2714                        		.dbg	line,	"include\tables_PLAYER.c", 12; };
 2715                        		.dbg	line,	"include\tables_PLAYER.c", 15; const signed char       TABLE_PLAYER_JUMP_V[35]     =   {
 2716                        		.dbg	line,	"include\tables_PLAYER.c", 16; // UPWARD
 2717                        		.dbg	line,	"include\tables_PLAYER.c", 17; -4,
 2718                        		.dbg	line,	"include\tables_PLAYER.c", 18; -5,
 2719                        		.dbg	line,	"include\tables_PLAYER.c", 19; -10,
 2720                        		.dbg	line,	"include\tables_PLAYER.c", 20; -4,
 2721                        		.dbg	line,	"include\tables_PLAYER.c", 21; -4,
 2722                        		.dbg	line,	"include\tables_PLAYER.c", 22; -7,
 2723                        		.dbg	line,	"include\tables_PLAYER.c", 23; -6,
 2724                        		.dbg	line,	"include\tables_PLAYER.c", 24; -3,
 2725                        		.dbg	line,	"include\tables_PLAYER.c", 25; -5,
 2726                        		.dbg	line,	"include\tables_PLAYER.c", 26; -2,
 2727                        		.dbg	line,	"include\tables_PLAYER.c", 27; -4,
 2728                        		.dbg	line,	"include\tables_PLAYER.c", 28; -1,
 2729                        		.dbg	line,	"include\tables_PLAYER.c", 29; -1,
 2730                        		.dbg	line,	"include\tables_PLAYER.c", 30; -1,
 2731                        		.dbg	line,	"include\tables_PLAYER.c", 31; -1,
 2732                        		.dbg	line,	"include\tables_PLAYER.c", 32; 0,
 2733                        		.dbg	line,	"include\tables_PLAYER.c", 33; 0,
 2734                        		.dbg	line,	"include\tables_PLAYER.c", 34; 0,
 2735                        		.dbg	line,	"include\tables_PLAYER.c", 35; 0,
 2736                        		.dbg	line,	"include\tables_PLAYER.c", 36; // DOWNWARD
 2737                        		.dbg	line,	"include\tables_PLAYER.c", 37; 1,
 2738                        		.dbg	line,	"include\tables_PLAYER.c", 38; 1,
 2739                        		.dbg	line,	"include\tables_PLAYER.c", 39; 1,
 2740                        		.dbg	line,	"include\tables_PLAYER.c", 40; 1,
 2741                        		.dbg	line,	"include\tables_PLAYER.c", 41; 4,
 2742                        		.dbg	line,	"include\tables_PLAYER.c", 42; 2,
 2743                        		.dbg	line,	"include\tables_PLAYER.c", 43; 5,
 2744                        		.dbg	line,	"include\tables_PLAYER.c", 44; 3,
 2745                        		.dbg	line,	"include\tables_PLAYER.c", 45; 6,
 2746                        		.dbg	line,	"include\tables_PLAYER.c", 46; 7,
 2747                        		.dbg	line,	"include\tables_PLAYER.c", 47; 4,
 2748                        		.dbg	line,	"include\tables_PLAYER.c", 48; 4,
 2749                        		.dbg	line,	"include\tables_PLAYER.c", 49; 10,
 2750                        		.dbg	line,	"include\tables_PLAYER.c", 50; 4,
 2751                        		.dbg	line,	"include\tables_PLAYER.c", 51; 4,
 2752                        		.dbg	line,	"include\tables_PLAYER.c", 52; 5
 2753                        		.dbg	line,	"include\tables_PLAYER.c", 53; };
 2754                        		.dbg	line,	"include\tables_PLAYER.c", 56; const signed char       TABLE_PLAYER_FALL[21]       =   {
 2755                        		.dbg	line,	"include\tables_PLAYER.c", 57; 0,
 2756                        		.dbg	line,	"include\tables_PLAYER.c", 58; 0,
 2757                        		.dbg	line,	"include\tables_PLAYER.c", 59; 0,
 2758                        		.dbg	line,	"include\tables_PLAYER.c", 60; 0,
 2759                        		.dbg	line,	"include\tables_PLAYER.c", 61; 1,
 2760                        		.dbg	line,	"include\tables_PLAYER.c", 62; 1,
 2761                        		.dbg	line,	"include\tables_PLAYER.c", 63; 1,
 2762                        		.dbg	line,	"include\tables_PLAYER.c", 64; 1,
 2763                        		.dbg	line,	"include\tables_PLAYER.c", 65; 2,
 2764                        		.dbg	line,	"include\tables_PLAYER.c", 66; 2,
 2765                        		.dbg	line,	"include\tables_PLAYER.c", 67; 2,
 2766                        		.dbg	line,	"include\tables_PLAYER.c", 68; 2,
 2767                        		.dbg	line,	"include\tables_PLAYER.c", 69; 3,
 2768                        		.dbg	line,	"include\tables_PLAYER.c", 70; 3,
 2769                        		.dbg	line,	"include\tables_PLAYER.c", 71; 3,
 2770                        		.dbg	line,	"include\tables_PLAYER.c", 72; 4,
 2771                        		.dbg	line,	"include\tables_PLAYER.c", 73; 4,
 2772                        		.dbg	line,	"include\tables_PLAYER.c", 74; 4,
 2773                        		.dbg	line,	"include\tables_PLAYER.c", 75; 4,
 2774                        		.dbg	line,	"include\tables_PLAYER.c", 76; 4,
 2775                        		.dbg	line,	"include\tables_PLAYER.c", 77; 5
 2776                        		.dbg	line,	"include\tables_PLAYER.c", 78; };
 2777                        		.dbg	line,	"include\tables_PLAYER.c", 81; const signed char       TABLE_PLAYER_JUMP_LADDER[30]    =   {
 2778                        		.dbg	line,	"include\tables_PLAYER.c", 82; // UPWARD
 2779                        		.dbg	line,	"include\tables_PLAYER.c", 83; -4,
 2780                        		.dbg	line,	"include\tables_PLAYER.c", 84; -4,
 2781                        		.dbg	line,	"include\tables_PLAYER.c", 85; -3,
 2782                        		.dbg	line,	"include\tables_PLAYER.c", 86; -3,
 2783                        		.dbg	line,	"include\tables_PLAYER.c", 87; -3,
 2784                        		.dbg	line,	"include\tables_PLAYER.c", 88; -2,
 2785                        		.dbg	line,	"include\tables_PLAYER.c", 89; -2,
 2786                        		.dbg	line,	"include\tables_PLAYER.c", 90; -2,
 2787                        		.dbg	line,	"include\tables_PLAYER.c", 91; -1,
 2788                        		.dbg	line,	"include\tables_PLAYER.c", 92; -1,
 2789                        		.dbg	line,	"include\tables_PLAYER.c", 93; -1,
 2790                        		.dbg	line,	"include\tables_PLAYER.c", 94; -1,
 2791                        		.dbg	line,	"include\tables_PLAYER.c", 95; -1,
 2792                        		.dbg	line,	"include\tables_PLAYER.c", 96; 0,
 2793                        		.dbg	line,	"include\tables_PLAYER.c", 97; 0,
 2794                        		.dbg	line,	"include\tables_PLAYER.c", 98; 0,
 2795                        		.dbg	line,	"include\tables_PLAYER.c", 99; 0,
 2796                        		.dbg	line,	"include\tables_PLAYER.c", 100; // DOWNWARD
 2797                        		.dbg	line,	"include\tables_PLAYER.c", 101; 1,
 2798                        		.dbg	line,	"include\tables_PLAYER.c", 102; 1,
 2799                        		.dbg	line,	"include\tables_PLAYER.c", 103; 1,
 2800                        		.dbg	line,	"include\tables_PLAYER.c", 104; 1,
 2801                        		.dbg	line,	"include\tables_PLAYER.c", 105; 1,
 2802                        		.dbg	line,	"include\tables_PLAYER.c", 106; 2,
 2803                        		.dbg	line,	"include\tables_PLAYER.c", 107; 2,
 2804                        		.dbg	line,	"include\tables_PLAYER.c", 108; 2,
 2805                        		.dbg	line,	"include\tables_PLAYER.c", 109; 3,
 2806                        		.dbg	line,	"include\tables_PLAYER.c", 110; 3,
 2807                        		.dbg	line,	"include\tables_PLAYER.c", 111; 3,
 2808                        		.dbg	line,	"include\tables_PLAYER.c", 112; 4,
 2809                        		.dbg	line,	"include\tables_PLAYER.c", 113; 4
 2810                        		.dbg	line,	"include\tables_PLAYER.c", 114; };
 2811                        		.dbg	line,	"include\tables_PLAYER.c", 123; const unsigned char     *TABLE_WEAPON_TILES_ADR[5]     =   {
 2812                        		.dbg	line,	"include\tables_PLAYER.c", 124; &tiles_SPR_WEAPON_0,
 2813                        		.dbg	line,	"include\tables_PLAYER.c", 125; &tiles_SPR_WEAPON_1,
 2814                        		.dbg	line,	"include\tables_PLAYER.c", 126; &tiles_SPR_WEAPON_2,
 2815                        		.dbg	line,	"include\tables_PLAYER.c", 127; &tiles_SPR_WEAPON_3,
 2816                        		.dbg	line,	"include\tables_PLAYER.c", 128; &tiles_SPR_WEAPON_4
 2817                        		.dbg	line,	"include\tables_PLAYER.c", 129; };
 2818                        		.dbg	line,	"include\tables_PLAYER.c", 132; const unsigned char     TABLE_WEAPON_TILES_BANK[5]     =   {
 2819                        		.dbg	line,	"include\tables_PLAYER.c", 133; ^tiles_SPR_WEAPON_0,
 2820                        		.dbg	line,	"include\tables_PLAYER.c", 134; ^tiles_SPR_WEAPON_1,
 2821                        		.dbg	line,	"include\tables_PLAYER.c", 135; ^tiles_SPR_WEAPON_2,
 2822                        		.dbg	line,	"include\tables_PLAYER.c", 136; ^tiles_SPR_WEAPON_3,
 2823                        		.dbg	line,	"include\tables_PLAYER.c", 137; ^tiles_SPR_WEAPON_4
 2824                        		.dbg	line,	"main.c", 17; };
 2825                        		.dbg	line,	"main.c", 18; #include "include/tables_SHOP.c"
 2826                        		.dbg	line,	"include\tables_SHOP.c", 1; //-----------------------------------------------------------------------------//
 2827                        		.dbg	line,	"include\tables_SHOP.c", 2; //                                                                             //
 2828                        		.dbg	line,	"include\tables_SHOP.c", 3; //                                   LEVEL 1                                   //
 2829                        		.dbg	line,	"include\tables_SHOP.c", 4; //                                                                             //
 2830                        		.dbg	line,	"include\tables_SHOP.c", 5; //-----------------------------------------------------------------------------//
 2831                        		.dbg	line,	"include\tables_SHOP.c", 7; const char              TABLE_SHOP_ITEMS_LV1[10]        =   {
 2832                        		.dbg	line,	"include\tables_SHOP.c", 8; TYPE_ITEM_WEAPON_2,
 2833                        		.dbg	line,	"include\tables_SHOP.c", 9; TYPE_ITEM_WEAPON_3,
 2834                        		.dbg	line,	"include\tables_SHOP.c", 10; TYPE_ITEM_WEAPON_4,
 2835                        		.dbg	line,	"include\tables_SHOP.c", 11; TYPE_ITEM_WEAPON_5,
 2836                        		.dbg	line,	"include\tables_SHOP.c", 12; TYPE_ITEM_KEY,
 2837                        		.dbg	line,	"include\tables_SHOP.c", 14; TYPE_ITEM_ARMOR_2,
 2838                        		.dbg	line,	"include\tables_SHOP.c", 15; TYPE_ITEM_ARMOR_3,
 2839                        		.dbg	line,	"include\tables_SHOP.c", 16; TYPE_ITEM_ARMOR_4,
 2840                        		.dbg	line,	"include\tables_SHOP.c", 17; TYPE_ITEM_ARMOR_5,
 2841                        		.dbg	line,	"include\tables_SHOP.c", 18; TYPE_ITEM_POTION
 2842                        		.dbg	line,	"include\tables_SHOP.c", 19; };
 2843                        		.dbg	line,	"include\tables_SHOP.c", 22; const int               TABLE_SHOP_PRICES_LV1[10]       =   {
 2844                        		.dbg	line,	"include\tables_SHOP.c", 23; 100,
 2845                        		.dbg	line,	"include\tables_SHOP.c", 24; 1000,
 2846                        		.dbg	line,	"include\tables_SHOP.c", 25; 2400,
 2847                        		.dbg	line,	"include\tables_SHOP.c", 26; 9600,
 2848                        		.dbg	line,	"include\tables_SHOP.c", 27; 30,
 2849                        		.dbg	line,	"include\tables_SHOP.c", 28; 80,
 2850                        		.dbg	line,	"include\tables_SHOP.c", 29; 300,
 2851                        		.dbg	line,	"include\tables_SHOP.c", 30; 800,
 2852                        		.dbg	line,	"include\tables_SHOP.c", 31; 1600,
 2853                        		.dbg	line,	"include\tables_SHOP.c", 32; 150
 2854                        		.dbg	line,	"include\tables_SHOP.c", 33; };
 2855                        		.dbg	line,	"include\tables_SHOP.c", 36; const unsigned char     *TABLE_SHOP_ITEMS_TILES_ADR[10]     =   {
 2856                        		.dbg	line,	"include\tables_SHOP.c", 37; &tiles_ITEM_WEAPON_2,
 2857                        		.dbg	line,	"include\tables_SHOP.c", 38; &tiles_ITEM_WEAPON_3,
 2858                        		.dbg	line,	"include\tables_SHOP.c", 39; &tiles_ITEM_WEAPON_4,
 2859                        		.dbg	line,	"include\tables_SHOP.c", 40; &tiles_ITEM_WEAPON_5,
 2860                        		.dbg	line,	"include\tables_SHOP.c", 41; &tiles_ITEM_KEY,
 2861                        		.dbg	line,	"include\tables_SHOP.c", 42; &tiles_ITEM_ARMOR_2,
 2862                        		.dbg	line,	"include\tables_SHOP.c", 43; &tiles_ITEM_ARMOR_3,
 2863                        		.dbg	line,	"include\tables_SHOP.c", 44; &tiles_ITEM_ARMOR_4,
 2864                        		.dbg	line,	"include\tables_SHOP.c", 45; &tiles_ITEM_ARMOR_5,
 2865                        		.dbg	line,	"include\tables_SHOP.c", 46; &tiles_ITEM_POTION
 2866                        		.dbg	line,	"include\tables_SHOP.c", 47; };
 2867                        		.dbg	line,	"include\tables_SHOP.c", 50; const unsigned char     TABLE_SHOP_ITEMS_TILES_BANK[10]     =   {
 2868                        		.dbg	line,	"include\tables_SHOP.c", 51; ^tiles_ITEM_WEAPON_2,
 2869                        		.dbg	line,	"include\tables_SHOP.c", 52; ^tiles_ITEM_WEAPON_3,
 2870                        		.dbg	line,	"include\tables_SHOP.c", 53; ^tiles_ITEM_WEAPON_4,
 2871                        		.dbg	line,	"include\tables_SHOP.c", 54; ^tiles_ITEM_WEAPON_5,
 2872                        		.dbg	line,	"include\tables_SHOP.c", 55; ^tiles_ITEM_KEY,
 2873                        		.dbg	line,	"include\tables_SHOP.c", 56; ^tiles_ITEM_ARMOR_2,
 2874                        		.dbg	line,	"include\tables_SHOP.c", 57; ^tiles_ITEM_ARMOR_3,
 2875                        		.dbg	line,	"include\tables_SHOP.c", 58; ^tiles_ITEM_ARMOR_4,
 2876                        		.dbg	line,	"include\tables_SHOP.c", 59; ^tiles_ITEM_ARMOR_5,
 2877                        		.dbg	line,	"include\tables_SHOP.c", 60; ^tiles_ITEM_POTION
 2878                        		.dbg	line,	"include\tables_SHOP.c", 61; };
 2879                        		.dbg	line,	"include\tables_SHOP.c", 64; const char              TABLE_CURSOR_POS_X[11]              =   {
 2880                        		.dbg	line,	"include\tables_SHOP.c", 65; 24,
 2881                        		.dbg	line,	"include\tables_SHOP.c", 66; 56,
 2882                        		.dbg	line,	"include\tables_SHOP.c", 67; 96,
 2883                        		.dbg	line,	"include\tables_SHOP.c", 68; 136,
 2884                        		.dbg	line,	"include\tables_SHOP.c", 69; 176,
 2885                        		.dbg	line,	"include\tables_SHOP.c", 70; 24,
 2886                        		.dbg	line,	"include\tables_SHOP.c", 71; 56,
 2887                        		.dbg	line,	"include\tables_SHOP.c", 72; 96,
 2888                        		.dbg	line,	"include\tables_SHOP.c", 73; 136,
 2889                        		.dbg	line,	"include\tables_SHOP.c", 74; 176,
 2890                        		.dbg	line,	"include\tables_SHOP.c", 75; 212
 2891                        		.dbg	line,	"include\tables_SHOP.c", 76; };
 2892                        		.dbg	line,	"main.c", 22; #include "include/routines_LEVELS.c"
 2893                        		.dbg	line,	"include\routines_LEVELS.c", 1; #include "huc.h"
 2894                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
 2895                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
 2896                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
 2897                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
 2898                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
 2899                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
 2900                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
 2901                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
 2902                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
 2903                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
 2904                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
 2905                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 2906                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 2907                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 2908                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
 2909                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
 2910                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
 2911                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
 2912                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
 2913                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
 2914                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
 2915                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
 2916                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
 2917                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
 2918                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
 2919                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
 2920                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
 2921                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
 2922                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
 2923                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
 2924                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
 2925                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
 2926                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
 2927                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
 2928                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
 2929                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
 2930                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
 2931                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
 2932                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
 2933                        		.dbg	line,	"include\routines_LEVELS.c", 2; #include "hucc-scroll.h"
 2934                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 1; #ifndef _hucc_scroll_h
 2935                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 2; #define _hucc_scroll_h
 2936                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 4; /****************************************************************************
 2937                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 5; ; ***************************************************************************
 2938                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 6; ;
 2939                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 7; ; hucc-scroll.h
 2940                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 8; ;
 2941                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 9; ; Routines for a fast split-screen scrolling system.
 2942                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 10; ;
 2943                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 11; ; Copyright John Brandwood 2024.
 2944                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 12; ;
 2945                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 2946                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 2947                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 2948                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 16; ;
 2949                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 17; ; ***************************************************************************
 2950                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 18; ; ***************************************************************************
 2951                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 19; ;
 2952                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 20; ; The maximum number of splits for each screen layer is set in your project's
 2953                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 21; ; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
 2954                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 22; ;
 2955                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 23; ; Your first active split must be defined to start at screen line 0, and then
 2956                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 24; ; the rest of the active splits must be in increasing line order to match the
 2957                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 25; ; way that the PC Engine displays the output image.
 2958                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 26; ;
 2959                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 27; ; You can have disabled splits interleaved with your active splits.
 2960                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 28; ;
 2961                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 29; ; Splits that are normally disabled can be used to create full screen effects
 2962                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 30; ; such as bouncing the screen up and down by adding blank areas at the top or
 2963                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 31; ; bottom of the screen, and then rapidly changing the height of those areas.
 2964                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 32; ;
 2965                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 33; ; ***************************************************************************
 2966                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 34; ; **************************************************************************/
 2967                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 36; // *************
 2968                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 37; // VDC bits for display_flags ...
 2969                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 38; // *************
 2970                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 40; #ifndef BKG_OFF
 2971                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 41; #define BKG_OFF 0x00
 2972                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 42; #endif
 2973                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 44; #ifndef SPR_OFF
 2974                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 45; #define SPR_OFF 0x00
 2975                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 46; #endif
 2976                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 48; #ifndef BKG_ON
 2977                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 49; #define BKG_ON 0x80
 2978                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 50; #endif
 2979                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 52; #ifndef SPR_ON
 2980                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 53; #define SPR_ON 0x40
 2981                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 54; #endif
 2982                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 56; // *************
 2983                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 57; // Functions in hucc-scroll.asm ...
 2984                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 58; // *************
 2985                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 60; #ifdef __HUCC__
 2986                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 62; #asmdef	HUCC_USES_NEW_SCROLL 1
 2987                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 64; extern void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
 2988                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 65; extern void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
 2989                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 67; extern void __fastcall disable_split( unsigned char index<acc> );
 2990                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 68; extern void __fastcall sgx_disable_split( unsigned char index<acc> );
 2991                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 70; extern void __fastcall __macro disable_all_splits( void );
 2992                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 71; extern void __fastcall __macro sgx_disable_all_splits( void );
 2993                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 73; #asm
 2994                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 74; .macro	_disable_all_splits
 2995                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 75; ldy	#HUCC_PCE_SPLITS - 1
 2996                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 76; !loop:		tya
 2997                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 77; call	_disable_split.1
 2998                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 78; dey
 2999                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 79; bpl	!loop-
 3000                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 80; .endm
 3001                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 82; .macro	_sgx_disable_all_splits
 3002                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 83; ldy	#HUCC_SGX_SPLITS - 1
 3003                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 84; !loop:		tya
 3004                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 85; call	_sgx_disable_split.1
 3005                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 86; dey
 3006                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 87; bpl	!loop-
 3007                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 88; .endm
 3008                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 89; #endasm
 3009                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 91; #endif // __HUCC__
 3010                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 93; #endif // _hucc_scroll_h
 3011                        		.dbg	line,	"include\routines_LEVELS.c", 3; #include "hucc-chrmap.h"
 3012                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 1; #ifndef _hucc_chrmap_h
 3013                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 2; #define _hucc_chrmap_h
 3014                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 4; /****************************************************************************
 3015                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 5; ; ***************************************************************************
 3016                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 6; ;
 3017                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 7; ; hucc-chrmap.h
 3018                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 8; ;
 3019                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 9; ; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
 3020                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 10; ;
 3021                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 11; ; Copyright John Brandwood 2025.
 3022                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 12; ;
 3023                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 3024                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 3025                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 3026                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 16; ;
 3027                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 17; ; ***************************************************************************
 3028                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 18; ; ***************************************************************************
 3029                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 19; ;
 3030                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 20; ; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
 3031                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 21; ;
 3032                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 22; ; The maximum total size for a chrmap is 16KBytes, which allows for maps up
 3033                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 23; ; to 256x32 tiles (2048x256 pixels).
 3034                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 24; ;
 3035                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 25; ; ***************************************************************************
 3036                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 26; ; **************************************************************************/
 3037                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 28; // *************
 3038                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 29; // This code extends the blkmap library ...
 3039                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 30; // *************
 3040                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 32; #include "hucc-blkmap.h"
 3041                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 34; // *************
 3042                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 35; // Functions in chrmap.asm ...
 3043                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 36; // *************
 3044                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 38; #ifdef __HUCC__
 3045                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 40; #asmdef	HUCC_USES_CHRMAP 1
 3046                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 42; extern void __fastcall __nop set_chrmap( unsigned char __far *chrmap<vdc_map_bank:vdc_map_addr>, unsigned char tiles_w<vdc_map_line_w> );
 3047                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 44; extern void __fastcall draw_bat( void );
 3048                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 45; extern void __fastcall scroll_bat( void );
 3049                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 47; extern void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 3050                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 49; #ifdef _SGX
 3051                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 51; extern void __fastcall __nop sgx_set_chrmap( unsigned char __far *chrmap<sgx_map_bank:sgx_map_addr>, unsigned char tiles_w<sgx_map_line_w> );
 3052                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 53; extern void __fastcall sgx_draw_bat( void );
 3053                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 54; extern void __fastcall sgx_scroll_bat( void );
 3054                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 56; extern void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 3055                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 58; #endif
 3056                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 60; #endif // __HUCC__
 3057                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 62; #endif // _hucc_chrmap_h
 3058                        		.dbg	line,	"include\routines_LEVELS.c", 4; #include "hucc-blkmap.h"
 3059                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
 3060                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
 3061                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
 3062                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
 3063                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
 3064                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
 3065                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
 3066                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
 3067                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
 3068                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
 3069                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
 3070                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 3071                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 3072                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 3073                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
 3074                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
 3075                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
 3076                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
 3077                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
 3078                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
 3079                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
 3080                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
 3081                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
 3082                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
 3083                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
 3084                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
 3085                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
 3086                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
 3087                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
 3088                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
 3089                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
 3090                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
 3091                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
 3092                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
 3093                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
 3094                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
 3095                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
 3096                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
 3097                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
 3098                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
 3099                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
 3100                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
 3101                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
 3102                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
 3103                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
 3104                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
 3105                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
 3106                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
 3107                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
 3108                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
 3109                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
 3110                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
 3111                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
 3112                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
 3113                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
 3114                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
 3115                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
 3116                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
 3117                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
 3118                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
 3119                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
 3120                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
 3121                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
 3122                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
 3123                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 3124                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 3125                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
 3126                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 86; .macro	_set_blkmap.2
 3127                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 87; stz	vdc_scr_bank
 3128                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 88; .endm
 3129                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 90; .macro	_set_multimap.2
 3130                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 91; lda	vdc_bat_width
 3131                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 92; lsr	a
 3132                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 93; sta	vdc_map_line_w
 3133                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 94; .endm
 3134                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 96; .macro	SCREEN
 3135                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 97; db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
 3136                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 98; db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
 3137                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 99; db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
 3138                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 100; dw	(\4)
 3139                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 101; .endm
 3140                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
 3141                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
 3142                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
 3143                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
 3144                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
 3145                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
 3146                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
 3147                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
 3148                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
 3149                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
 3150                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
 3151                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
 3152                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
 3153                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
 3154                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
 3155                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
 3156                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
 3157                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
 3158                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
 3159                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
 3160                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
 3161                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
 3162                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
 3163                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
 3164                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
 3165                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 3166                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 3167                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
 3168                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 144; .macro	_sgx_set_blkmap.2
 3169                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 145; stz	sgx_scr_bank
 3170                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 146; .endm
 3171                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 148; .macro	_sgx_set_multimap.2
 3172                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 149; lda	sgx_bat_width
 3173                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 150; lsr	a
 3174                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 151; sta	sgx_map_line_w
 3175                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 152; .endm
 3176                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
 3177                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
 3178                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
 3179                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
 3180                        		.dbg	line,	"include\routines_LEVELS.c", 13; void hide_LEVEL_SPRITES()
 3181                        		.dbg	line,	"include\routines_LEVELS.c", 14; {
 3182                        	;***********************
 3183                        	;***********************
 3184                        	
 3185                        		.hucc
 3186    14:D2F0             		.proc		_hide_LEVEL_SPRITES
 3187                        		__enter		_hide_LEVEL_SPRITES
 3188                        	
 3189                        		.dbg	line,	"include\routines_LEVELS.c", 15; char i;
 3190                        	
 3191                        		.dbg	line,	"include\routines_LEVELS.c", 17; for(i=0 ; i<64 ; i++)
 3192                        		__st.umiq	0, __hide_LEVEL_SPRITES_end - 1  /* i */
         14:D2F0  9C 4A 26   			stz	__hide_LEVEL_SPRITES_end - 1
 3193    14:D2F3             	.LL3:
 3194                        		__ld.umq	__hide_LEVEL_SPRITES_end - 1  /* i */
         14:D2F3  AD 4A 26   			lda	__hide_LEVEL_SPRITES_end - 1
 3195                        		__ult_b.uiq	64
         14:D2F6  C9 40      			cmp	#64		; Subtract integer from A.
         14:D2F8  6A         			ror	a		; CC if A < integer.
         14:D2F9  49 80      			eor	#$80
         14:D2FB  2A         			rol	a
 3196                        		__btrue		.LL5
         14:D2FC  B0 07      			bcs	.LL5
 3197                        		__bra		.LL6
         14:D2FE  80 10      			bra	.LL6
 3198    14:D300             	.LL4:
 3199                        		__inc.umq	__hide_LEVEL_SPRITES_end - 1  /* i */
         14:D300  EE 4A 26   			inc	__hide_LEVEL_SPRITES_end - 1
 3200                        		__bra		.LL3
         14:D303  80 EE      			bra	.LL3
 3201    14:D305             	.LL5:
 3202                        	
 3203                        		.dbg	line,	"include\routines_LEVELS.c", 18; {
 3204                        	
 3205                        		.dbg	line,	"include\routines_LEVELS.c", 19; spr_set(i);
 3206                        		__ld.umq	__hide_LEVEL_SPRITES_end - 1  /* i */
         14:D305  AD 4A 26   			lda	__hide_LEVEL_SPRITES_end - 1
 3207                        		__call		_spr_set.1
         14:D308  20 DD E7   			call	_spr_set.1
 3208                        	
 3209                        		.dbg	line,	"include\routines_LEVELS.c", 20; spr_hide();
 3210                        		__call		_spr_hide
         14:D30B  20 F8 E7   			call	_spr_hide
 3211                        	
 3212                        		.dbg	line,	"include\routines_LEVELS.c", 21; }
 3213                        		__bra		.LL4
         14:D30E  80 F0      			bra	.LL4
 3214    14:D310             	.LL6:
 3215                        	
 3216                        		.dbg	line,	"include\routines_LEVELS.c", 22; }
 3217    14:D310             	.LL2:
 3218                        		__return	0
         14:D310  4C EF FF   			jmp	leave_proc
 3219                        		.dbg	clear
 3220                        		.endp
 3221                        		.pceas
 3222                        	
 3223                        		.dbg	line,	"include\routines_LEVELS.c", 27; void display_LIFE()
 3224                        		.dbg	line,	"include\routines_LEVELS.c", 28; {
 3225                        	;***********************
 3226                        	;***********************
 3227                        	
 3228                        		.hucc
 3229                        		.proc		_display_LIFE
 3238                        		.endp
 3239                        		.pceas
 3240                        	
 3241                        		.dbg	line,	"include\routines_LEVELS.c", 33; void display_SCORE()
 3242                        		.dbg	line,	"include\routines_LEVELS.c", 34; {
 3243                        	;***********************
 3244                        	;***********************
 3245                        	
 3246                        		.hucc
 3247    14:D330             		.proc		_display_SCORE
 3248                        		__enter		_display_SCORE
 3249                        	
 3250                        		.dbg	line,	"include\routines_LEVELS.c", 35; put_number(score,6,14,1);
 3251                        		__ld.wm		_score
         14:D330  AD 2F 26   			lda.l	_score
         14:D333  AC 30 26   			ldy.h	_score
 3252                        		__st.wmq	_bx
         14:D336  85 FA      			sta.l	_bx
         14:D338  84 FB      			sty.h	_bx
 3253                        		__st.umiq	6, _cl
         14:D33A  A9 06      			lda.l	#6
         14:D33C  85 FC      			sta	_cl
 3254                        		__st.umiq	14, _dil
         14:D33E  A9 0E      			lda.l	#14
         14:D340  85 F0      			sta	_dil
 3255                        		__st.umiq	1, _dih
         14:D342  A9 01      			lda.l	#1
         14:D344  85 F1      			sta	_dih
 3256                        		__call		_put_number.4
         14:D346  20 9F FF   			call	_put_number.4
 3257                        	
 3258                        		.dbg	line,	"include\routines_LEVELS.c", 36; }
 3259    14:D349             	.LL8:
 3260                        		__return	0
         14:D349  4C EF FF   			jmp	leave_proc
 3261                        		.dbg	clear
 3262                        		.endp
 3263                        		.pceas
 3264                        	
 3265                        		.dbg	line,	"include\routines_LEVELS.c", 39; void display_TIME_LEVEL()
 3266                        		.dbg	line,	"include\routines_LEVELS.c", 40; {
 3267                        	;***********************
 3268                        	;***********************
 3269                        	
 3270                        		.hucc
 3271    14:CC77             		.proc		_display_TIME_LEVEL
 3272                        		__enter		_display_TIME_LEVEL
 3273                        	
 3274                        		.dbg	line,	"include\routines_LEVELS.c", 41; put_number(minutes,1,1,3);
 3275                        		__ld.um		_minutes
         14:CC77  AD 29 23   			lda	_minutes
         14:CC7A  C2         			cly
 3276                        		__st.wmq	_bx
         14:CC7B  85 FA      			sta.l	_bx
         14:CC7D  84 FB      			sty.h	_bx
 3277                        		__st.umiq	1, _cl
         14:CC7F  A9 01      			lda.l	#1
         14:CC81  85 FC      			sta	_cl
 3278                        		__st.umiq	1, _dil
         14:CC83  A9 01      			lda.l	#1
         14:CC85  85 F0      			sta	_dil
 3279                        		__st.umiq	3, _dih
         14:CC87  A9 03      			lda.l	#3
         14:CC89  85 F1      			sta	_dih
 3280                        		__call		_put_number.4
         14:CC8B  20 9F FF   			call	_put_number.4
 3281                        	
 3282                        		.dbg	line,	"include\routines_LEVELS.c", 43; if(seconds < 10)
 3283                        		__ld.umq	_seconds
         14:CC8E  AD 2A 23   			lda	_seconds
 3284                        		__ult_b.uiq	10
         14:CC91  C9 0A      			cmp	#10		; Subtract integer from A.
         14:CC93  6A         			ror	a		; CC if A < integer.
         14:CC94  49 80      			eor	#$80
         14:CC96  2A         			rol	a
 3285                        		__bfalse	.LL10
         14:CC97  90 2C      			bcc	.LL10
 3286                        	
 3287                        		.dbg	line,	"include\routines_LEVELS.c", 44; {
 3288                        	
 3289                        		.dbg	line,	"include\routines_LEVELS.c", 45; put_number(0,1,3,3);
 3290                        		__st.wmiq	0, _bx
         14:CC99  64 FA      			stz.l	_bx
         14:CC9B  64 FB      			stz.h	_bx
 3291                        		__st.umiq	1, _cl
         14:CC9D  A9 01      			lda.l	#1
         14:CC9F  85 FC      			sta	_cl
 3292                        		__st.umiq	3, _dil
         14:CCA1  A9 03      			lda.l	#3
         14:CCA3  85 F0      			sta	_dil
 3293                        		__st.umiq	3, _dih
         14:CCA5  A9 03      			lda.l	#3
         14:CCA7  85 F1      			sta	_dih
 3294                        		__call		_put_number.4
         14:CCA9  20 9F FF   			call	_put_number.4
 3295                        	
 3296                        		.dbg	line,	"include\routines_LEVELS.c", 46; put_number(seconds,1,4,3);
 3297                        		__ld.um		_seconds
         14:CCAC  AD 2A 23   			lda	_seconds
         14:CCAF  C2         			cly
 3298                        		__st.wmq	_bx
         14:CCB0  85 FA      			sta.l	_bx
         14:CCB2  84 FB      			sty.h	_bx
 3299                        		__st.umiq	1, _cl
         14:CCB4  A9 01      			lda.l	#1
         14:CCB6  85 FC      			sta	_cl
 3300                        		__st.umiq	4, _dil
         14:CCB8  A9 04      			lda.l	#4
         14:CCBA  85 F0      			sta	_dil
 3301                        		__st.umiq	3, _dih
         14:CCBC  A9 03      			lda.l	#3
         14:CCBE  85 F1      			sta	_dih
 3302                        		__call		_put_number.4
         14:CCC0  20 9F FF   			call	_put_number.4
 3303                        	
 3304                        		.dbg	line,	"include\routines_LEVELS.c", 47; }
 3305                        	
 3306                        		.dbg	line,	"include\routines_LEVELS.c", 49; else
 3307                        		__bra		.LL11
         14:CCC3  80 17      			bra	.LL11
 3308    14:CCC5             	.LL10:
 3309                        	
 3310                        		.dbg	line,	"include\routines_LEVELS.c", 50; {
 3311                        	
 3312                        		.dbg	line,	"include\routines_LEVELS.c", 51; put_number(seconds,2,3,3);
 3313                        		__ld.um		_seconds
         14:CCC5  AD 2A 23   			lda	_seconds
         14:CCC8  C2         			cly
 3314                        		__st.wmq	_bx
         14:CCC9  85 FA      			sta.l	_bx
         14:CCCB  84 FB      			sty.h	_bx
 3315                        		__st.umiq	2, _cl
         14:CCCD  A9 02      			lda.l	#2
         14:CCCF  85 FC      			sta	_cl
 3316                        		__st.umiq	3, _dil
         14:CCD1  A9 03      			lda.l	#3
         14:CCD3  85 F0      			sta	_dil
 3317                        		__st.umiq	3, _dih
         14:CCD5  A9 03      			lda.l	#3
         14:CCD7  85 F1      			sta	_dih
 3318                        		__call		_put_number.4
         14:CCD9  20 9F FF   			call	_put_number.4
 3319                        	
 3320                        		.dbg	line,	"include\routines_LEVELS.c", 52; }
 3321    14:CCDC             	.LL11:
 3322                        	
 3323                        		.dbg	line,	"include\routines_LEVELS.c", 54; time_counter += 1;
 3324                        		__add_st.umiq	1, _time_counter
         14:CCDC  EE 2B 23   			inc	_time_counter
 3325                        	
 3326                        		.dbg	line,	"include\routines_LEVELS.c", 56; if(time_counter == 60)
 3327                        		__ld.umq	_time_counter
         14:CCDF  AD 2B 23   			lda	_time_counter
 3328                        		__equ_b.uiq	60
         14:CCE2  C9 3C      			cmp	#60
         14:CCE4  F0 01      			beq	!+
         14:CCE6  18         			clc
         14:CCE7             	!:
 3329                        		__bfalse	.LL12
         14:CCE7  90 28      			bcc	.LL12
 3330                        	
 3331                        		.dbg	line,	"include\routines_LEVELS.c", 57; {
 3332                        	
 3333                        		.dbg	line,	"include\routines_LEVELS.c", 58; time_counter = 0;
 3334                        		__st.umiq	0, _time_counter
         14:CCE9  9C 2B 23   			stz	_time_counter
 3335                        	
 3336                        		.dbg	line,	"include\routines_LEVELS.c", 60; if(seconds > 0)
 3337                        		__ld.umq	_seconds
         14:CCEC  AD 2A 23   			lda	_seconds
 3338                        		__ugt_b.uiq	0
         14:CCEF  18         			clc			; Subtract integer+1 from A.
         14:CCF0  E9 00      			sbc	#0		; CS if A > integer.
 3339                        		__bfalse	.LL13
         14:CCF2  90 05      			bcc	.LL13
 3340                        	
 3341                        		.dbg	line,	"include\routines_LEVELS.c", 61; {
 3342                        	
 3343                        		.dbg	line,	"include\routines_LEVELS.c", 62; seconds -= 1;
 3344                        		__sub_st.umiq	1, _seconds
         14:CCF4  CE 2A 23   			dec	_seconds
 3345                        	
 3346                        		.dbg	line,	"include\routines_LEVELS.c", 63; }
 3347                        	
 3348                        		.dbg	line,	"include\routines_LEVELS.c", 65; else
 3349                        		__bra		.LL14
         14:CCF7  80 18      			bra	.LL14
 3350    14:CCF9             	.LL13:
 3351                        	
 3352                        		.dbg	line,	"include\routines_LEVELS.c", 66; {
 3353                        	
 3354                        		.dbg	line,	"include\routines_LEVELS.c", 67; if(minutes > 0)
 3355                        		__ld.umq	_minutes
         14:CCF9  AD 29 23   			lda	_minutes
 3356                        		__ugt_b.uiq	0
         14:CCFC  18         			clc			; Subtract integer+1 from A.
         14:CCFD  E9 00      			sbc	#0		; CS if A > integer.
 3357                        		__bfalse	.LL15
         14:CCFF  90 0A      			bcc	.LL15
 3358                        	
 3359                        		.dbg	line,	"include\routines_LEVELS.c", 68; {
 3360                        	
 3361                        		.dbg	line,	"include\routines_LEVELS.c", 69; seconds = 59;
 3362                        		__st.umiq	59, _seconds
         14:CD01  A9 3B      			lda.l	#59
         14:CD03  8D 2A 23   			sta	_seconds
 3363                        	
 3364                        		.dbg	line,	"include\routines_LEVELS.c", 70; minutes -= 1;
 3365                        		__sub_st.umiq	1, _minutes
         14:CD06  CE 29 23   			dec	_minutes
 3366                        	
 3367                        		.dbg	line,	"include\routines_LEVELS.c", 71; }
 3368                        	
 3369                        		.dbg	line,	"include\routines_LEVELS.c", 73; else
 3370                        		__bra		.LL16
         14:CD09  80 06      			bra	.LL16
 3371    14:CD0B             	.LL15:
 3372                        	
 3373                        		.dbg	line,	"include\routines_LEVELS.c", 74; {
 3374                        	
 3375                        		.dbg	line,	"include\routines_LEVELS.c", 75; seconds = 0;
 3376                        		__st.umiq	0, _seconds
         14:CD0B  9C 2A 23   			stz	_seconds
 3377                        	
 3378                        		.dbg	line,	"include\routines_LEVELS.c", 76; minutes = 0;
 3379                        		__st.umiq	0, _minutes
         14:CD0E  9C 29 23   			stz	_minutes
 3380                        	
 3381                        		.dbg	line,	"include\routines_LEVELS.c", 77; // TIME OUT //
 3382                        	
 3383                        		.dbg	line,	"include\routines_LEVELS.c", 78; }
 3384    14:CD11             	.LL16:
 3385                        	
 3386                        		.dbg	line,	"include\routines_LEVELS.c", 79; }
 3387    14:CD11             	.LL14:
 3388                        	
 3389                        		.dbg	line,	"include\routines_LEVELS.c", 80; } 
 3390                        	
 3391                        		.dbg	line,	"include\routines_LEVELS.c", 81; }
 3392    14:CD11             	.LL12:
 3393    14:CD11             	.LL9:
 3394                        		__return	0
         14:CD11  4C EF FF   			jmp	leave_proc
 3395                        		.dbg	clear
 3396                        		.endp
 3397                        		.pceas
 3398                        	
 3399                        		.dbg	line,	"include\routines_LEVELS.c", 84; void display_KEY()
 3400                        		.dbg	line,	"include\routines_LEVELS.c", 85; {
 3401                        	;***********************
 3402                        	;***********************
 3403                        	
 3404                        		.hucc
 3405    14:D384             		.proc		_display_KEY
 3406                        		__enter		_display_KEY
 3407                        	
 3408                        		.dbg	line,	"include\routines_LEVELS.c", 86; put_number(key_amount,2,7,27);
 3409                        		__ld.um		_key_amount
         14:D384  AD 27 23   			lda	_key_amount
         14:D387  C2         			cly
 3410                        		__st.wmq	_bx
         14:D388  85 FA      			sta.l	_bx
         14:D38A  84 FB      			sty.h	_bx
 3411                        		__st.umiq	2, _cl
         14:D38C  A9 02      			lda.l	#2
         14:D38E  85 FC      			sta	_cl
 3412                        		__st.umiq	7, _dil
         14:D390  A9 07      			lda.l	#7
         14:D392  85 F0      			sta	_dil
 3413                        		__st.umiq	27, _dih
         14:D394  A9 1B      			lda.l	#27
         14:D396  85 F1      			sta	_dih
 3414                        		__call		_put_number.4
         14:D398  20 9F FF   			call	_put_number.4
 3415                        	
 3416                        		.dbg	line,	"include\routines_LEVELS.c", 87; }
 3417    14:D39B             	.LL17:
 3418                        		__return	0
         14:D39B  4C EF FF   			jmp	leave_proc
 3419                        		.dbg	clear
 3420                        		.endp
 3421                        		.pceas
 3422                        	
 3423                        		.dbg	line,	"include\routines_LEVELS.c", 90; void display_POTION()
 3424                        		.dbg	line,	"include\routines_LEVELS.c", 91; {
 3425                        	;***********************
 3426                        	;***********************
 3427                        	
 3428                        		.hucc
 3429    14:D39E             		.proc		_display_POTION
 3430                        		__enter		_display_POTION
 3431                        	
 3432                        		.dbg	line,	"include\routines_LEVELS.c", 92; put_number(potion_amount,2,19,27);
 3433                        		__ld.um		_potion_amount
         14:D39E  AD 28 23   			lda	_potion_amount
         14:D3A1  C2         			cly
 3434                        		__st.wmq	_bx
         14:D3A2  85 FA      			sta.l	_bx
         14:D3A4  84 FB      			sty.h	_bx
 3435                        		__st.umiq	2, _cl
         14:D3A6  A9 02      			lda.l	#2
         14:D3A8  85 FC      			sta	_cl
 3436                        		__st.umiq	19, _dil
         14:D3AA  A9 13      			lda.l	#19
         14:D3AC  85 F0      			sta	_dil
 3437                        		__st.umiq	27, _dih
         14:D3AE  A9 1B      			lda.l	#27
         14:D3B0  85 F1      			sta	_dih
 3438                        		__call		_put_number.4
         14:D3B2  20 9F FF   			call	_put_number.4
 3439                        	
 3440                        		.dbg	line,	"include\routines_LEVELS.c", 93; }
 3441    14:D3B5             	.LL18:
 3442                        		__return	0
         14:D3B5  4C EF FF   			jmp	leave_proc
 3443                        		.dbg	clear
 3444                        		.endp
 3445                        		.pceas
 3446                        	
 3447                        		.dbg	line,	"include\routines_LEVELS.c", 96; void display_ZENNY()
 3448                        		.dbg	line,	"include\routines_LEVELS.c", 97; {
 3449                        	;***********************
 3450                        	;***********************
 3451                        	
 3452                        		.hucc
 3453    14:D34C             		.proc		_display_ZENNY
 3454                        		__enter		_display_ZENNY
 3455                        	
 3456                        		.dbg	line,	"include\routines_LEVELS.c", 98; put_number(zenny_amount,5,26,4);
 3457                        		__ld.wm		_zenny_amount
         14:D34C  AD 2D 26   			lda.l	_zenny_amount
         14:D34F  AC 2E 26   			ldy.h	_zenny_amount
 3458                        		__st.wmq	_bx
         14:D352  85 FA      			sta.l	_bx
         14:D354  84 FB      			sty.h	_bx
 3459                        		__st.umiq	5, _cl
         14:D356  A9 05      			lda.l	#5
         14:D358  85 FC      			sta	_cl
 3460                        		__st.umiq	26, _dil
         14:D35A  A9 1A      			lda.l	#26
         14:D35C  85 F0      			sta	_dil
 3461                        		__st.umiq	4, _dih
         14:D35E  A9 04      			lda.l	#4
         14:D360  85 F1      			sta	_dih
 3462                        		__call		_put_number.4
         14:D362  20 9F FF   			call	_put_number.4
 3463                        	
 3464                        		.dbg	line,	"include\routines_LEVELS.c", 99; }
 3465    14:D365             	.LL19:
 3466                        		__return	0
         14:D365  4C EF FF   			jmp	leave_proc
 3467                        		.dbg	clear
 3468                        		.endp
 3469                        		.pceas
 3470                        	
 3471                        		.dbg	line,	"include\routines_LEVELS.c", 104; void scroll_object()
 3472                        		.dbg	line,	"include\routines_LEVELS.c", 105; {
 3473                        	;***********************
 3474                        	;***********************
 3475                        	
 3476                        		.hucc
 3477    14:C184             		.proc		_scroll_object
 3478                        		__enter		_scroll_object
 3479                        	
 3480                        		.dbg	line,	"include\routines_LEVELS.c", 106; char i;
 3481                        	
 3482                        		.dbg	line,	"include\routines_LEVELS.c", 107; onscreen_object_number = 0;
 3483                        		__st.umiq	0, _onscreen_object_number
         14:C184  9C 30 23   			stz	_onscreen_object_number
 3484                        	
 3485                        		.dbg	line,	"include\routines_LEVELS.c", 109; for(i=0 ; i<level_object_number ; i++)
 3486                        		__st.umiq	0, __scroll_object_end - 1  /* i */
         14:C187  9C 4A 26   			stz	__scroll_object_end - 1
 3487    14:C18A             	.LL21:
 3488                        		__ld.umq	__scroll_object_end - 1  /* i */
         14:C18A  AD 4A 26   			lda	__scroll_object_end - 1
 3489                        		__ult_b.umq	_level_object_number
         14:C18D  CD 2F 23   			cmp	_level_object_number		; Subtract memory from A.
         14:C190  6A         			ror	a		; CC if A < memory.
         14:C191  49 80      			eor	#$80
         14:C193  2A         			rol	a
 3490                        		__btrue		.LL23
         14:C194  B0 08      			bcs	.LL23
 3491                        		__bra		.LL24
         14:C196  4C E8 C2   			bra	.LL24
 3492    14:C199             	.LL22:
 3493                        		__inc.umq	__scroll_object_end - 1  /* i */
         14:C199  EE 4A 26   			inc	__scroll_object_end - 1
 3494                        		__bra		.LL21
         14:C19C  80 EC      			bra	.LL21
 3495    14:C19E             	.LL23:
 3496                        	
 3497                        		.dbg	line,	"include\routines_LEVELS.c", 110; {
 3498                        	
 3499                        		.dbg	line,	"include\routines_LEVELS.c", 111; if(list_object_state[i] != STATE_INACTIVE)
 3500                        		__ldx.umq	__scroll_object_end - 1  /* i */
         14:C19E  AE 4A 26   			ldx	__scroll_object_end - 1
 3501                        		__ld.uaxq	_list_object_state
         14:C1A1  BD 4A 23   			lda	_list_object_state, x
 3502                        		__neq_b.uiq	1
         14:C1A4  38         			sec
         14:C1A5  49 01      			eor	#1
         14:C1A7  D0 01      			bne	!+
         14:C1A9  18         			clc
         14:C1AA             	!:
 3503                        		__bfalse	.LL25
         14:C1AA  90 ED      			bcc	.LL25
 3504                        	
 3505                        		.dbg	line,	"include\routines_LEVELS.c", 112; {
 3506                        	
 3507                        		.dbg	line,	"include\routines_LEVELS.c", 113; char scroll_allowed = FALSE;
 3508                        		__st.umiq	0, __scroll_object_end - 2  /* scroll_allowed */
         14:C1AC  9C 49 26   			stz	__scroll_object_end - 2
 3509                        	
 3510                        		.dbg	line,	"include\routines_LEVELS.c", 114; 
 3511                        	
 3512                        		.dbg	line,	"include\routines_LEVELS.c", 115; // IF OBJECT X POSITION IS INFERIOR TO SCREEN RIGHT SIDE //
 3513                        	
 3514                        		.dbg	line,	"include\routines_LEVELS.c", 116; if(list_object_x_pos_ref[i] < sgx_map_pxl_x + 256)
 3515                        		__ld.wm		_sgx_map_pxl_x
         14:C1AF  AD 8F 26   			lda.l	_sgx_map_pxl_x
         14:C1B2  AC 90 26   			ldy.h	_sgx_map_pxl_x
 3516                        		__add.wi	256
         14:C1B5  18         			clc
         14:C1B6  69 00      			adc.l	#256
         14:C1B8  42         			say
         14:C1B9  69 01      			adc.h	#256
         14:C1BB  42         			say
 3517                        		__ld2x.um	__scroll_object_end - 1  /* i */
         14:C1BC  AA         			tax
         14:C1BD  AD 4A 26   			lda	__scroll_object_end - 1
         14:C1C0  0A         			asl	a
         14:C1C1  22         			sax
 3518                        		__ugt_w.wax	_list_object_x_pos_ref
         14:C1C2  18         			clc			; Subtract memory+1 from Y:A.
         14:C1C3  FD 41 25   			sbc.l	_list_object_x_pos_ref, x
         14:C1C6  98         			tya
         14:C1C7  FD 42 25   			sbc.h	_list_object_x_pos_ref, x		; CS if Y:A > memory.
 3519                        		__bfalse	.LL26
         14:C1CA  B0 03 4C 4F			bcc	.LL26
         14:C1CE  C2          
 3520                        	
 3521                        		.dbg	line,	"include\routines_LEVELS.c", 117; {
 3522                        	
 3523                        		.dbg	line,	"include\routines_LEVELS.c", 118; // IF OBJECT X POSITION IS SUPERIOR TO SCREEN LEFT SIDE PLUS 16 PX //
 3524                        	
 3525                        		.dbg	line,	"include\routines_LEVELS.c", 119; if(list_object_x_pos_ref[i] - sgx_map_pxl_x + 16 > 0)
 3526                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         14:C1CF  AD 4A 26   			lda	__scroll_object_end - 1
         14:C1D2  0A         			asl	a
         14:C1D3  AA         			tax
 3527                        		__ld.wax	_list_object_x_pos_ref
         14:C1D4  BD 41 25   			lda.l	_list_object_x_pos_ref, x
         14:C1D7  BC 42 25   			ldy.h	_list_object_x_pos_ref, x
 3528                        		__sub.wm	_sgx_map_pxl_x
         14:C1DA  38         			sec
         14:C1DB  ED 8F 26   			sbc.l	_sgx_map_pxl_x
         14:C1DE  42         			say
         14:C1DF  ED 90 26   			sbc.h	_sgx_map_pxl_x
         14:C1E2  42         			say
 3529                        		__add.wi	16
         14:C1E3  18         			clc
         14:C1E4  69 10      			adc.l	#16
         14:C1E6  90 01      			bcc	!+
         14:C1E8  C8         			iny
         14:C1E9             	!:
 3530                        		__sgt_w.wi	0
         14:C1E9  18         			clc			; Subtract integer+1 from Y:A.
         14:C1EA  E9 00      			sbc.l	#0
         14:C1EC  98         			tya
         14:C1ED  E9 00      			sbc.h	#0
         14:C1EF  50 02      			bvc	!+
         14:C1F1  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         14:C1F3  49 80      	!:		eor	#$80
         14:C1F5  0A         			asl	a
 3531                        		__bfalse	.LL27
         14:C1F6  90 57      			bcc	.LL27
 3532                        	
 3533                        		.dbg	line,	"include\routines_LEVELS.c", 120; {
 3534                        	
 3535                        		.dbg	line,	"include\routines_LEVELS.c", 121; // IF OBJECT Y POSITION IS INFERIOR TO SCREEN BOTTOM //
 3536                        	
 3537                        		.dbg	line,	"include\routines_LEVELS.c", 122; if(list_object_y_pos_ref[i] < sgx_map_pxl_y + 224)
 3538                        		__ld.wm		_sgx_map_pxl_y
         14:C1F8  AD 91 26   			lda.l	_sgx_map_pxl_y
         14:C1FB  AC 92 26   			ldy.h	_sgx_map_pxl_y
 3539                        		__add.wi	224
         14:C1FE  18         			clc
         14:C1FF  69 E0      			adc.l	#224
         14:C201  90 01      			bcc	!+
         14:C203  C8         			iny
         14:C204             	!:
 3540                        		__ld2x.um	__scroll_object_end - 1  /* i */
         14:C204  AA         			tax
         14:C205  AD 4A 26   			lda	__scroll_object_end - 1
         14:C208  0A         			asl	a
         14:C209  22         			sax
 3541                        		__ugt_w.wax	_list_object_y_pos_ref
         14:C20A  18         			clc			; Subtract memory+1 from Y:A.
         14:C20B  FD 73 25   			sbc.l	_list_object_y_pos_ref, x
         14:C20E  98         			tya
         14:C20F  FD 74 25   			sbc.h	_list_object_y_pos_ref, x		; CS if Y:A > memory.
 3542                        		__bfalse	.LL28
         14:C212  90 3B      			bcc	.LL28
 3543                        	
 3544                        		.dbg	line,	"include\routines_LEVELS.c", 123; {
 3545                        	
 3546                        		.dbg	line,	"include\routines_LEVELS.c", 124; // IF OBJECT Y POSITION IS SUPERIOR TO SCREEN TOP PLUS 16 PX //
 3547                        	
 3548                        		.dbg	line,	"include\routines_LEVELS.c", 125; if(list_object_y_pos_ref[i] - sgx_map_pxl_y + 16 > 0)
 3549                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         14:C214  AD 4A 26   			lda	__scroll_object_end - 1
         14:C217  0A         			asl	a
         14:C218  AA         			tax
 3550                        		__ld.wax	_list_object_y_pos_ref
         14:C219  BD 73 25   			lda.l	_list_object_y_pos_ref, x
         14:C21C  BC 74 25   			ldy.h	_list_object_y_pos_ref, x
 3551                        		__sub.wm	_sgx_map_pxl_y
         14:C21F  38         			sec
         14:C220  ED 91 26   			sbc.l	_sgx_map_pxl_y
         14:C223  42         			say
         14:C224  ED 92 26   			sbc.h	_sgx_map_pxl_y
         14:C227  42         			say
 3552                        		__add.wi	16
         14:C228  18         			clc
         14:C229  69 10      			adc.l	#16
         14:C22B  90 01      			bcc	!+
         14:C22D  C8         			iny
         14:C22E             	!:
 3553                        		__sgt_w.wi	0
         14:C22E  18         			clc			; Subtract integer+1 from Y:A.
         14:C22F  E9 00      			sbc.l	#0
         14:C231  98         			tya
         14:C232  E9 00      			sbc.h	#0
         14:C234  50 02      			bvc	!+
         14:C236  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         14:C238  49 80      	!:		eor	#$80
         14:C23A  0A         			asl	a
 3554                        		__bfalse	.LL29
         14:C23B  90 12      			bcc	.LL29
 3555                        	
 3556                        		.dbg	line,	"include\routines_LEVELS.c", 126; {
 3557                        	
 3558                        		.dbg	line,	"include\routines_LEVELS.c", 127; // WE STORE THE OBJECT ID //
 3559                        	
 3560                        		.dbg	line,	"include\routines_LEVELS.c", 128; //put_number(i,2,0,2+onscreen_object_number);
 3561                        	
 3562                        		.dbg	line,	"include\routines_LEVELS.c", 129; list_onscreen_object[onscreen_object_number] = i;
 3563                        		__ldx.umq	_onscreen_object_number
         14:C23D  AE 30 23   			ldx	_onscreen_object_number
 3564                        		__ld.um		__scroll_object_end - 1  /* i */
         14:C240  AD 4A 26   			lda	__scroll_object_end - 1
         14:C243  C2         			cly
 3565                        		__st.uaxq	_list_onscreen_object
         14:C244  9D 95 23   			sta	_list_onscreen_object, x
 3566                        	
 3567                        		.dbg	line,	"include\routines_LEVELS.c", 130; onscreen_object_number += 1;
 3568                        		__add_st.umiq	1, _onscreen_object_number
         14:C247  EE 30 23   			inc	_onscreen_object_number
 3569                        	
 3570                        		.dbg	line,	"include\routines_LEVELS.c", 131; 
 3571                        	
 3572                        		.dbg	line,	"include\routines_LEVELS.c", 132; //list_object_visibility[i] = ON_SCREEN;
 3573                        	
 3574                        		.dbg	line,	"include\routines_LEVELS.c", 133; scroll_allowed = TRUE;
 3575                        		__st.umiq	1, __scroll_object_end - 2  /* scroll_allowed */
         14:C24A  A9 01      			lda.l	#1
         14:C24C  8D 49 26   			sta	__scroll_object_end - 2
 3576                        	
 3577                        		.dbg	line,	"include\routines_LEVELS.c", 134; }
 3578                        	
 3579                        		.dbg	line,	"include\routines_LEVELS.c", 135; }
 3580    14:C24F             	.LL29:
 3581                        	
 3582                        		.dbg	line,	"include\routines_LEVELS.c", 136; }
 3583    14:C24F             	.LL28:
 3584                        	
 3585                        		.dbg	line,	"include\routines_LEVELS.c", 137; }
 3586    14:C24F             	.LL27:
 3587                        	
 3588                        		.dbg	line,	"include\routines_LEVELS.c", 139; // IF OBJECTS IS WITHIN THE SCREEN LIMITS //
 3589                        	
 3590                        		.dbg	line,	"include\routines_LEVELS.c", 140; if(scroll_allowed == TRUE)
 3591    14:C24F             	.LL26:
 3592                        		__ld.umq	__scroll_object_end - 2  /* scroll_allowed */
         14:C24F  AD 49 26   			lda	__scroll_object_end - 2
 3593                        		__equ_b.uiq	1
         14:C252  C9 01      			cmp	#1
         14:C254  F0 01      			beq	!+
         14:C256  18         			clc
         14:C257             	!:
 3594                        		__bfalse	.LL30
         14:C257  90 44      			bcc	.LL30
 3595                        	
 3596                        		.dbg	line,	"include\routines_LEVELS.c", 141; {
 3597                        	
 3598                        		.dbg	line,	"include\routines_LEVELS.c", 142; list_object_x_pos[i] = list_object_x_pos_ref[i] - sgx_map_pxl_x;
 3599                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         14:C259  AD 4A 26   			lda	__scroll_object_end - 1
         14:C25C  0A         			asl	a
         14:C25D  AA         			tax
 3600                        		__ld.wax	_list_object_x_pos_ref
         14:C25E  BD 41 25   			lda.l	_list_object_x_pos_ref, x
         14:C261  BC 42 25   			ldy.h	_list_object_x_pos_ref, x
 3601                        		__sub.wm	_sgx_map_pxl_x
         14:C264  38         			sec
         14:C265  ED 8F 26   			sbc.l	_sgx_map_pxl_x
         14:C268  42         			say
         14:C269  ED 90 26   			sbc.h	_sgx_map_pxl_x
         14:C26C  42         			say
 3602                        		__ld2x.um	__scroll_object_end - 1  /* i */
         14:C26D  AA         			tax
         14:C26E  AD 4A 26   			lda	__scroll_object_end - 1
         14:C271  0A         			asl	a
         14:C272  22         			sax
 3603                        		__st.waxq	_list_object_x_pos
         14:C273  9D DD 24   			sta.l	_list_object_x_pos, x
         14:C276  98         			tya
         14:C277  9D DE 24   			sta.h	_list_object_x_pos, x
 3604                        	
 3605                        		.dbg	line,	"include\routines_LEVELS.c", 143; list_object_y_pos[i] = list_object_y_pos_ref[i] - sgx_map_pxl_y;
 3606                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         14:C27A  AD 4A 26   			lda	__scroll_object_end - 1
         14:C27D  0A         			asl	a
         14:C27E  AA         			tax
 3607                        		__ld.wax	_list_object_y_pos_ref
         14:C27F  BD 73 25   			lda.l	_list_object_y_pos_ref, x
         14:C282  BC 74 25   			ldy.h	_list_object_y_pos_ref, x
 3608                        		__sub.wm	_sgx_map_pxl_y
         14:C285  38         			sec
         14:C286  ED 91 26   			sbc.l	_sgx_map_pxl_y
         14:C289  42         			say
         14:C28A  ED 92 26   			sbc.h	_sgx_map_pxl_y
         14:C28D  42         			say
 3609                        		__ld2x.um	__scroll_object_end - 1  /* i */
         14:C28E  AA         			tax
         14:C28F  AD 4A 26   			lda	__scroll_object_end - 1
         14:C292  0A         			asl	a
         14:C293  22         			sax
 3610                        		__st.waxq	_list_object_y_pos
         14:C294  9D 0F 25   			sta.l	_list_object_y_pos, x
         14:C297  98         			tya
         14:C298  9D 10 25   			sta.h	_list_object_y_pos, x
 3611                        	
 3612                        		.dbg	line,	"include\routines_LEVELS.c", 144; }
 3613                        	
 3614                        		.dbg	line,	"include\routines_LEVELS.c", 146; else
 3615                        		__bra		.LL31
         14:C29B  80 1E      			bra	.LL31
 3616    14:C29D             	.LL30:
 3617                        	
 3618                        		.dbg	line,	"include\routines_LEVELS.c", 147; {
 3619                        	
 3620                        		.dbg	line,	"include\routines_LEVELS.c", 148; list_object_x_pos[i] = -16;
 3621                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         14:C29D  AD 4A 26   			lda	__scroll_object_end - 1
         14:C2A0  0A         			asl	a
         14:C2A1  AA         			tax
 3622                        		__st.waxiq	-16, _list_object_x_pos
         14:C2A2  A9 F0      			lda.l	#-16
         14:C2A4  9D DD 24   			sta.l	_list_object_x_pos, x
         14:C2A7  A9 FF      			lda.h	#-16
         14:C2A9  9D DE 24   			sta.h	_list_object_x_pos, x
 3623                        	
 3624                        		.dbg	line,	"include\routines_LEVELS.c", 149; list_object_y_pos[i] = -16;
 3625                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         14:C2AC  AD 4A 26   			lda	__scroll_object_end - 1
         14:C2AF  0A         			asl	a
         14:C2B0  AA         			tax
 3626                        		__st.waxiq	-16, _list_object_y_pos
         14:C2B1  A9 F0      			lda.l	#-16
         14:C2B3  9D 0F 25   			sta.l	_list_object_y_pos, x
         14:C2B6  A9 FF      			lda.h	#-16
         14:C2B8  9D 10 25   			sta.h	_list_object_y_pos, x
 3627                        	
 3628                        		.dbg	line,	"include\routines_LEVELS.c", 150; //list_object_visibility[i] = OFF_SCREEN;
 3629                        	
 3630                        		.dbg	line,	"include\routines_LEVELS.c", 151; }
 3631    14:C2BB             	.LL31:
 3632                        	
 3633                        		.dbg	line,	"include\routines_LEVELS.c", 153; sgx_spr_set(i + object_start_index);
 3634                        		__ld.um		__scroll_object_end - 1  /* i */
         14:C2BB  AD 4A 26   			lda	__scroll_object_end - 1
         14:C2BE  C2         			cly
 3635                        		__add.um	_object_start_index
         14:C2BF  18         			clc
         14:C2C0  6D 2E 23   			adc	_object_start_index
         14:C2C3  90 01      			bcc	!+
         14:C2C5  C8         			iny
         14:C2C6             	!:
 3636                        		__call		_sgx_spr_set.1
         14:C2C6  20 8A E8   			call	_sgx_spr_set.1
 3637                        	
 3638                        		.dbg	line,	"include\routines_LEVELS.c", 155; sgx_spr_x(list_object_x_pos[i]);
 3639                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         14:C2C9  AD 4A 26   			lda	__scroll_object_end - 1
         14:C2CC  0A         			asl	a
         14:C2CD  AA         			tax
 3640                        		__ld.wax	_list_object_x_pos
         14:C2CE  BD DD 24   			lda.l	_list_object_x_pos, x
         14:C2D1  BC DE 24   			ldy.h	_list_object_x_pos, x
 3641                        		__call		_sgx_spr_x.1
         14:C2D4  20 B7 E8   			call	_sgx_spr_x.1
 3642                        	
 3643                        		.dbg	line,	"include\routines_LEVELS.c", 156; sgx_spr_y(list_object_y_pos[i]);
 3644                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         14:C2D7  AD 4A 26   			lda	__scroll_object_end - 1
         14:C2DA  0A         			asl	a
         14:C2DB  AA         			tax
 3645                        		__ld.wax	_list_object_y_pos
         14:C2DC  BD 0F 25   			lda.l	_list_object_y_pos, x
         14:C2DF  BC 10 25   			ldy.h	_list_object_y_pos, x
 3646                        		__call		_sgx_spr_y.1
         14:C2E2  20 C6 E8   			call	_sgx_spr_y.1
 3647                        	
 3648                        		.dbg	line,	"include\routines_LEVELS.c", 157; }
 3649                        	
 3650                        		.dbg	line,	"include\routines_LEVELS.c", 158; }
 3651    14:C2E5             	.LL25	.alias		.LL22
 3652                        		__bra		.LL22
         14:C2E5  4C 99 C1   			bra	.LL22
 3653    14:C2E8             	.LL24:
 3654                        	
 3655                        		.dbg	line,	"include\routines_LEVELS.c", 159; }
 3656    14:C2E8             	.LL20:
 3657                        		__return	0
         14:C2E8  4C EF FF   			jmp	leave_proc
 3658                        		.dbg	clear
 3659                        		.endp
 3660                        		.pceas
 3661                        	
 3662                        		.dbg	line,	"include\routines_LEVELS.c", 162; void scroll_chest()
 3663                        		.dbg	line,	"include\routines_LEVELS.c", 163; {
 3664                        	;***********************
 3665                        	;***********************
 3666                        	
 3667                        		.hucc
 3668    14:C2EB             		.proc		_scroll_chest
 3669                        		__enter		_scroll_chest
 3670                        	
 3671                        		.dbg	line,	"include\routines_LEVELS.c", 164; char i;
 3672                        	
 3673                        		.dbg	line,	"include\routines_LEVELS.c", 165; onscreen_chest_number = 0;
 3674                        		__st.umiq	0, _onscreen_chest_number
         14:C2EB  9C 9F 23   			stz	_onscreen_chest_number
 3675                        	
 3676                        		.dbg	line,	"include\routines_LEVELS.c", 167; for(i=0 ; i<level_chest_number ; i++)
 3677                        		__st.umiq	0, __scroll_chest_end - 1  /* i */
         14:C2EE  9C 4A 26   			stz	__scroll_chest_end - 1
 3678    14:C2F1             	.LL33:
 3679                        		__ld.umq	__scroll_chest_end - 1  /* i */
         14:C2F1  AD 4A 26   			lda	__scroll_chest_end - 1
 3680                        		__ult_b.umq	_level_chest_number
         14:C2F4  CD 9E 23   			cmp	_level_chest_number		; Subtract memory from A.
         14:C2F7  6A         			ror	a		; CC if A < memory.
         14:C2F8  49 80      			eor	#$80
         14:C2FA  2A         			rol	a
 3681                        		__btrue		.LL35
         14:C2FB  B0 08      			bcs	.LL35
 3682                        		__bra		.LL36
         14:C2FD  4C 4F C4   			bra	.LL36
 3683    14:C300             	.LL34:
 3684                        		__inc.umq	__scroll_chest_end - 1  /* i */
         14:C300  EE 4A 26   			inc	__scroll_chest_end - 1
 3685                        		__bra		.LL33
         14:C303  80 EC      			bra	.LL33
 3686    14:C305             	.LL35:
 3687                        	
 3688                        		.dbg	line,	"include\routines_LEVELS.c", 168; {
 3689                        	
 3690                        		.dbg	line,	"include\routines_LEVELS.c", 169; if(list_chest_state[i] != STATE_INACTIVE)
 3691                        		__ldx.umq	__scroll_chest_end - 1  /* i */
         14:C305  AE 4A 26   			ldx	__scroll_chest_end - 1
 3692                        		__ld.uaxq	_list_chest_state
         14:C308  BD A0 23   			lda	_list_chest_state, x
 3693                        		__neq_b.uiq	1
         14:C30B  38         			sec
         14:C30C  49 01      			eor	#1
         14:C30E  D0 01      			bne	!+
         14:C310  18         			clc
         14:C311             	!:
 3694                        		__bfalse	.LL37
         14:C311  90 ED      			bcc	.LL37
 3695                        	
 3696                        		.dbg	line,	"include\routines_LEVELS.c", 170; {
 3697                        	
 3698                        		.dbg	line,	"include\routines_LEVELS.c", 171; char scroll_allowed = FALSE;
 3699                        		__st.umiq	0, __scroll_chest_end - 2  /* scroll_allowed */
         14:C313  9C 49 26   			stz	__scroll_chest_end - 2
 3700                        	
 3701                        		.dbg	line,	"include\routines_LEVELS.c", 172; 
 3702                        	
 3703                        		.dbg	line,	"include\routines_LEVELS.c", 173; // IF CHEST X POSITION IS INFERIOR TO SCREEN RIGHT SIDE //
 3704                        	
 3705                        		.dbg	line,	"include\routines_LEVELS.c", 174; if(list_chest_x_pos_ref[i] < sgx_map_pxl_x + 256)
 3706                        		__ld.wm		_sgx_map_pxl_x
         14:C316  AD 8F 26   			lda.l	_sgx_map_pxl_x
         14:C319  AC 90 26   			ldy.h	_sgx_map_pxl_x
 3707                        		__add.wi	256
         14:C31C  18         			clc
         14:C31D  69 00      			adc.l	#256
         14:C31F  42         			say
         14:C320  69 01      			adc.h	#256
         14:C322  42         			say
 3708                        		__ld2x.um	__scroll_chest_end - 1  /* i */
         14:C323  AA         			tax
         14:C324  AD 4A 26   			lda	__scroll_chest_end - 1
         14:C327  0A         			asl	a
         14:C328  22         			sax
 3709                        		__ugt_w.wax	_list_chest_x_pos_ref
         14:C329  18         			clc			; Subtract memory+1 from Y:A.
         14:C32A  FD C5 25   			sbc.l	_list_chest_x_pos_ref, x
         14:C32D  98         			tya
         14:C32E  FD C6 25   			sbc.h	_list_chest_x_pos_ref, x		; CS if Y:A > memory.
 3710                        		__bfalse	.LL38
         14:C331  B0 03 4C B6			bcc	.LL38
         14:C335  C3          
 3711                        	
 3712                        		.dbg	line,	"include\routines_LEVELS.c", 175; {
 3713                        	
 3714                        		.dbg	line,	"include\routines_LEVELS.c", 176; // IF CHEST X POSITION IS SUPERIOR TO SCREEN LEFT SIDE PLUS 32 PX //
 3715                        	
 3716                        		.dbg	line,	"include\routines_LEVELS.c", 177; if(list_chest_x_pos_ref[i] - sgx_map_pxl_x + 32 > 0)
 3717                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         14:C336  AD 4A 26   			lda	__scroll_chest_end - 1
         14:C339  0A         			asl	a
         14:C33A  AA         			tax
 3718                        		__ld.wax	_list_chest_x_pos_ref
         14:C33B  BD C5 25   			lda.l	_list_chest_x_pos_ref, x
         14:C33E  BC C6 25   			ldy.h	_list_chest_x_pos_ref, x
 3719                        		__sub.wm	_sgx_map_pxl_x
         14:C341  38         			sec
         14:C342  ED 8F 26   			sbc.l	_sgx_map_pxl_x
         14:C345  42         			say
         14:C346  ED 90 26   			sbc.h	_sgx_map_pxl_x
         14:C349  42         			say
 3720                        		__add.wi	32
         14:C34A  18         			clc
         14:C34B  69 20      			adc.l	#32
         14:C34D  90 01      			bcc	!+
         14:C34F  C8         			iny
         14:C350             	!:
 3721                        		__sgt_w.wi	0
         14:C350  18         			clc			; Subtract integer+1 from Y:A.
         14:C351  E9 00      			sbc.l	#0
         14:C353  98         			tya
         14:C354  E9 00      			sbc.h	#0
         14:C356  50 02      			bvc	!+
         14:C358  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         14:C35A  49 80      	!:		eor	#$80
         14:C35C  0A         			asl	a
 3722                        		__bfalse	.LL39
         14:C35D  90 57      			bcc	.LL39
 3723                        	
 3724                        		.dbg	line,	"include\routines_LEVELS.c", 178; {
 3725                        	
 3726                        		.dbg	line,	"include\routines_LEVELS.c", 179; // IF CHEST Y POSITION IS INFERIOR TO SCREEN BOTTOM //
 3727                        	
 3728                        		.dbg	line,	"include\routines_LEVELS.c", 180; if(list_chest_y_pos_ref[i] < sgx_map_pxl_y + 224)
 3729                        		__ld.wm		_sgx_map_pxl_y
         14:C35F  AD 91 26   			lda.l	_sgx_map_pxl_y
         14:C362  AC 92 26   			ldy.h	_sgx_map_pxl_y
 3730                        		__add.wi	224
         14:C365  18         			clc
         14:C366  69 E0      			adc.l	#224
         14:C368  90 01      			bcc	!+
         14:C36A  C8         			iny
         14:C36B             	!:
 3731                        		__ld2x.um	__scroll_chest_end - 1  /* i */
         14:C36B  AA         			tax
         14:C36C  AD 4A 26   			lda	__scroll_chest_end - 1
         14:C36F  0A         			asl	a
         14:C370  22         			sax
 3732                        		__ugt_w.wax	_list_chest_y_pos_ref
         14:C371  18         			clc			; Subtract memory+1 from Y:A.
         14:C372  FD D5 25   			sbc.l	_list_chest_y_pos_ref, x
         14:C375  98         			tya
         14:C376  FD D6 25   			sbc.h	_list_chest_y_pos_ref, x		; CS if Y:A > memory.
 3733                        		__bfalse	.LL40
         14:C379  90 3B      			bcc	.LL40
 3734                        	
 3735                        		.dbg	line,	"include\routines_LEVELS.c", 181; {
 3736                        	
 3737                        		.dbg	line,	"include\routines_LEVELS.c", 182; // IF CHEST Y POSITION IS SUPERIOR TO SCREEN TOP PLUS 32 PX //
 3738                        	
 3739                        		.dbg	line,	"include\routines_LEVELS.c", 183; if(list_chest_y_pos_ref[i] - sgx_map_pxl_y + 32 > 0)
 3740                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         14:C37B  AD 4A 26   			lda	__scroll_chest_end - 1
         14:C37E  0A         			asl	a
         14:C37F  AA         			tax
 3741                        		__ld.wax	_list_chest_y_pos_ref
         14:C380  BD D5 25   			lda.l	_list_chest_y_pos_ref, x
         14:C383  BC D6 25   			ldy.h	_list_chest_y_pos_ref, x
 3742                        		__sub.wm	_sgx_map_pxl_y
         14:C386  38         			sec
         14:C387  ED 91 26   			sbc.l	_sgx_map_pxl_y
         14:C38A  42         			say
         14:C38B  ED 92 26   			sbc.h	_sgx_map_pxl_y
         14:C38E  42         			say
 3743                        		__add.wi	32
         14:C38F  18         			clc
         14:C390  69 20      			adc.l	#32
         14:C392  90 01      			bcc	!+
         14:C394  C8         			iny
         14:C395             	!:
 3744                        		__sgt_w.wi	0
         14:C395  18         			clc			; Subtract integer+1 from Y:A.
         14:C396  E9 00      			sbc.l	#0
         14:C398  98         			tya
         14:C399  E9 00      			sbc.h	#0
         14:C39B  50 02      			bvc	!+
         14:C39D  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         14:C39F  49 80      	!:		eor	#$80
         14:C3A1  0A         			asl	a
 3745                        		__bfalse	.LL41
         14:C3A2  90 12      			bcc	.LL41
 3746                        	
 3747                        		.dbg	line,	"include\routines_LEVELS.c", 184; {
 3748                        	
 3749                        		.dbg	line,	"include\routines_LEVELS.c", 185; // WE STORE THE CHEST ID //
 3750                        	
 3751                        		.dbg	line,	"include\routines_LEVELS.c", 186; list_onscreen_chest[onscreen_chest_number] = i;
 3752                        		__ldx.umq	_onscreen_chest_number
         14:C3A4  AE 9F 23   			ldx	_onscreen_chest_number
 3753                        		__ld.um		__scroll_chest_end - 1  /* i */
         14:C3A7  AD 4A 26   			lda	__scroll_chest_end - 1
         14:C3AA  C2         			cly
 3754                        		__st.uaxq	_list_onscreen_chest
         14:C3AB  9D A8 23   			sta	_list_onscreen_chest, x
 3755                        	
 3756                        		.dbg	line,	"include\routines_LEVELS.c", 187; onscreen_chest_number += 1;
 3757                        		__add_st.umiq	1, _onscreen_chest_number
         14:C3AE  EE 9F 23   			inc	_onscreen_chest_number
 3758                        	
 3759                        		.dbg	line,	"include\routines_LEVELS.c", 188; 
 3760                        	
 3761                        		.dbg	line,	"include\routines_LEVELS.c", 189; scroll_allowed = TRUE;
 3762                        		__st.umiq	1, __scroll_chest_end - 2  /* scroll_allowed */
         14:C3B1  A9 01      			lda.l	#1
         14:C3B3  8D 49 26   			sta	__scroll_chest_end - 2
 3763                        	
 3764                        		.dbg	line,	"include\routines_LEVELS.c", 190; }
 3765                        	
 3766                        		.dbg	line,	"include\routines_LEVELS.c", 191; }
 3767    14:C3B6             	.LL41:
 3768                        	
 3769                        		.dbg	line,	"include\routines_LEVELS.c", 192; }
 3770    14:C3B6             	.LL40:
 3771                        	
 3772                        		.dbg	line,	"include\routines_LEVELS.c", 193; }
 3773    14:C3B6             	.LL39:
 3774                        	
 3775                        		.dbg	line,	"include\routines_LEVELS.c", 195; // IF CHEST IS WITHIN THE SCREEN LIMITS //
 3776                        	
 3777                        		.dbg	line,	"include\routines_LEVELS.c", 196; if(scroll_allowed == TRUE)
 3778    14:C3B6             	.LL38:
 3779                        		__ld.umq	__scroll_chest_end - 2  /* scroll_allowed */
         14:C3B6  AD 49 26   			lda	__scroll_chest_end - 2
 3780                        		__equ_b.uiq	1
         14:C3B9  C9 01      			cmp	#1
         14:C3BB  F0 01      			beq	!+
         14:C3BD  18         			clc
         14:C3BE             	!:
 3781                        		__bfalse	.LL42
         14:C3BE  90 44      			bcc	.LL42
 3782                        	
 3783                        		.dbg	line,	"include\routines_LEVELS.c", 197; {
 3784                        	
 3785                        		.dbg	line,	"include\routines_LEVELS.c", 198; list_chest_x_pos[i] = list_chest_x_pos_ref[i] - sgx_map_pxl_x;
 3786                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         14:C3C0  AD 4A 26   			lda	__scroll_chest_end - 1
         14:C3C3  0A         			asl	a
         14:C3C4  AA         			tax
 3787                        		__ld.wax	_list_chest_x_pos_ref
         14:C3C5  BD C5 25   			lda.l	_list_chest_x_pos_ref, x
         14:C3C8  BC C6 25   			ldy.h	_list_chest_x_pos_ref, x
 3788                        		__sub.wm	_sgx_map_pxl_x
         14:C3CB  38         			sec
         14:C3CC  ED 8F 26   			sbc.l	_sgx_map_pxl_x
         14:C3CF  42         			say
         14:C3D0  ED 90 26   			sbc.h	_sgx_map_pxl_x
         14:C3D3  42         			say
 3789                        		__ld2x.um	__scroll_chest_end - 1  /* i */
         14:C3D4  AA         			tax
         14:C3D5  AD 4A 26   			lda	__scroll_chest_end - 1
         14:C3D8  0A         			asl	a
         14:C3D9  22         			sax
 3790                        		__st.waxq	_list_chest_x_pos
         14:C3DA  9D A5 25   			sta.l	_list_chest_x_pos, x
         14:C3DD  98         			tya
         14:C3DE  9D A6 25   			sta.h	_list_chest_x_pos, x
 3791                        	
 3792                        		.dbg	line,	"include\routines_LEVELS.c", 199; list_chest_y_pos[i] = list_chest_y_pos_ref[i] - sgx_map_pxl_y;
 3793                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         14:C3E1  AD 4A 26   			lda	__scroll_chest_end - 1
         14:C3E4  0A         			asl	a
         14:C3E5  AA         			tax
 3794                        		__ld.wax	_list_chest_y_pos_ref
         14:C3E6  BD D5 25   			lda.l	_list_chest_y_pos_ref, x
         14:C3E9  BC D6 25   			ldy.h	_list_chest_y_pos_ref, x
 3795                        		__sub.wm	_sgx_map_pxl_y
         14:C3EC  38         			sec
         14:C3ED  ED 91 26   			sbc.l	_sgx_map_pxl_y
         14:C3F0  42         			say
         14:C3F1  ED 92 26   			sbc.h	_sgx_map_pxl_y
         14:C3F4  42         			say
 3796                        		__ld2x.um	__scroll_chest_end - 1  /* i */
         14:C3F5  AA         			tax
         14:C3F6  AD 4A 26   			lda	__scroll_chest_end - 1
         14:C3F9  0A         			asl	a
         14:C3FA  22         			sax
 3797                        		__st.waxq	_list_chest_y_pos
         14:C3FB  9D B5 25   			sta.l	_list_chest_y_pos, x
         14:C3FE  98         			tya
         14:C3FF  9D B6 25   			sta.h	_list_chest_y_pos, x
 3798                        	
 3799                        		.dbg	line,	"include\routines_LEVELS.c", 200; }
 3800                        	
 3801                        		.dbg	line,	"include\routines_LEVELS.c", 202; else
 3802                        		__bra		.LL43
         14:C402  80 1E      			bra	.LL43
 3803    14:C404             	.LL42:
 3804                        	
 3805                        		.dbg	line,	"include\routines_LEVELS.c", 203; {
 3806                        	
 3807                        		.dbg	line,	"include\routines_LEVELS.c", 204; list_chest_x_pos[i] = -32;
 3808                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         14:C404  AD 4A 26   			lda	__scroll_chest_end - 1
         14:C407  0A         			asl	a
         14:C408  AA         			tax
 3809                        		__st.waxiq	-32, _list_chest_x_pos
         14:C409  A9 E0      			lda.l	#-32
         14:C40B  9D A5 25   			sta.l	_list_chest_x_pos, x
         14:C40E  A9 FF      			lda.h	#-32
         14:C410  9D A6 25   			sta.h	_list_chest_x_pos, x
 3810                        	
 3811                        		.dbg	line,	"include\routines_LEVELS.c", 205; list_chest_y_pos[i] = -32;
 3812                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         14:C413  AD 4A 26   			lda	__scroll_chest_end - 1
         14:C416  0A         			asl	a
         14:C417  AA         			tax
 3813                        		__st.waxiq	-32, _list_chest_y_pos
         14:C418  A9 E0      			lda.l	#-32
         14:C41A  9D B5 25   			sta.l	_list_chest_y_pos, x
         14:C41D  A9 FF      			lda.h	#-32
         14:C41F  9D B6 25   			sta.h	_list_chest_y_pos, x
 3814                        	
 3815                        		.dbg	line,	"include\routines_LEVELS.c", 206; }
 3816    14:C422             	.LL43:
 3817                        	
 3818                        		.dbg	line,	"include\routines_LEVELS.c", 208; sgx_spr_set(i + chest_start_index);
 3819                        		__ld.um		__scroll_chest_end - 1  /* i */
         14:C422  AD 4A 26   			lda	__scroll_chest_end - 1
         14:C425  C2         			cly
 3820                        		__add.um	_chest_start_index
         14:C426  18         			clc
         14:C427  6D 9D 23   			adc	_chest_start_index
         14:C42A  90 01      			bcc	!+
         14:C42C  C8         			iny
         14:C42D             	!:
 3821                        		__call		_sgx_spr_set.1
         14:C42D  20 8A E8   			call	_sgx_spr_set.1
 3822                        	
 3823                        		.dbg	line,	"include\routines_LEVELS.c", 210; sgx_spr_x(list_chest_x_pos[i]);
 3824                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         14:C430  AD 4A 26   			lda	__scroll_chest_end - 1
         14:C433  0A         			asl	a
         14:C434  AA         			tax
 3825                        		__ld.wax	_list_chest_x_pos
         14:C435  BD A5 25   			lda.l	_list_chest_x_pos, x
         14:C438  BC A6 25   			ldy.h	_list_chest_x_pos, x
 3826                        		__call		_sgx_spr_x.1
         14:C43B  20 B7 E8   			call	_sgx_spr_x.1
 3827                        	
 3828                        		.dbg	line,	"include\routines_LEVELS.c", 211; sgx_spr_y(list_chest_y_pos[i]);
 3829                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         14:C43E  AD 4A 26   			lda	__scroll_chest_end - 1
         14:C441  0A         			asl	a
         14:C442  AA         			tax
 3830                        		__ld.wax	_list_chest_y_pos
         14:C443  BD B5 25   			lda.l	_list_chest_y_pos, x
         14:C446  BC B6 25   			ldy.h	_list_chest_y_pos, x
 3831                        		__call		_sgx_spr_y.1
         14:C449  20 C6 E8   			call	_sgx_spr_y.1
 3832                        	
 3833                        		.dbg	line,	"include\routines_LEVELS.c", 212; }
 3834                        	
 3835                        		.dbg	line,	"include\routines_LEVELS.c", 213; }
 3836    14:C44C             	.LL37	.alias		.LL34
 3837                        		__bra		.LL34
         14:C44C  4C 00 C3   			bra	.LL34
 3838    14:C44F             	.LL36:
 3839                        	
 3840                        		.dbg	line,	"include\routines_LEVELS.c", 214; }
 3841    14:C44F             	.LL32:
 3842                        		__return	0
         14:C44F  4C EF FF   			jmp	leave_proc
 3843                        		.dbg	clear
 3844                        		.endp
 3845                        		.pceas
 3846                        	
 3847                        		.dbg	line,	"include\routines_LEVELS.c", 217; void scroll_npc()
 3848                        		.dbg	line,	"include\routines_LEVELS.c", 218; {
 3849                        	;***********************
 3850                        	;***********************
 3851                        	
 3852                        		.hucc
 3853    14:C452             		.proc		_scroll_npc
 3854                        		__enter		_scroll_npc
 3855                        	
 3856                        		.dbg	line,	"include\routines_LEVELS.c", 219; char i;
 3857                        	
 3858                        		.dbg	line,	"include\routines_LEVELS.c", 220; onscreen_npc_number = 0;
 3859                        		__st.umiq	0, _onscreen_npc_number
         14:C452  9C B2 23   			stz	_onscreen_npc_number
 3860                        	
 3861                        		.dbg	line,	"include\routines_LEVELS.c", 222; for(i=0 ; i<level_npc_number ; i++)
 3862                        		__st.umiq	0, __scroll_npc_end - 1  /* i */
         14:C455  9C 4A 26   			stz	__scroll_npc_end - 1
 3863    14:C458             	.LL45:
 3864                        		__ld.umq	__scroll_npc_end - 1  /* i */
         14:C458  AD 4A 26   			lda	__scroll_npc_end - 1
 3865                        		__ult_b.umq	_level_npc_number
         14:C45B  CD B1 23   			cmp	_level_npc_number		; Subtract memory from A.
         14:C45E  6A         			ror	a		; CC if A < memory.
         14:C45F  49 80      			eor	#$80
         14:C461  2A         			rol	a
 3866                        		__btrue		.LL47
         14:C462  B0 08      			bcs	.LL47
 3867                        		__bra		.LL48
         14:C464  4C B6 C5   			bra	.LL48
 3868    14:C467             	.LL46:
 3869                        		__inc.umq	__scroll_npc_end - 1  /* i */
         14:C467  EE 4A 26   			inc	__scroll_npc_end - 1
 3870                        		__bra		.LL45
         14:C46A  80 EC      			bra	.LL45
 3871    14:C46C             	.LL47:
 3872                        	
 3873                        		.dbg	line,	"include\routines_LEVELS.c", 223; {
 3874                        	
 3875                        		.dbg	line,	"include\routines_LEVELS.c", 224; if(list_npc_state[i] != STATE_INACTIVE)
 3876                        		__ldx.umq	__scroll_npc_end - 1  /* i */
         14:C46C  AE 4A 26   			ldx	__scroll_npc_end - 1
 3877                        		__ld.uaxq	_list_npc_state
         14:C46F  BD BC 23   			lda	_list_npc_state, x
 3878                        		__neq_b.uiq	1
         14:C472  38         			sec
         14:C473  49 01      			eor	#1
         14:C475  D0 01      			bne	!+
         14:C477  18         			clc
         14:C478             	!:
 3879                        		__bfalse	.LL49
         14:C478  90 ED      			bcc	.LL49
 3880                        	
 3881                        		.dbg	line,	"include\routines_LEVELS.c", 225; {
 3882                        	
 3883                        		.dbg	line,	"include\routines_LEVELS.c", 226; char scroll_allowed = FALSE;
 3884                        		__st.umiq	0, __scroll_npc_end - 2  /* scroll_allowed */
         14:C47A  9C 49 26   			stz	__scroll_npc_end - 2
 3885                        	
 3886                        		.dbg	line,	"include\routines_LEVELS.c", 227; 
 3887                        	
 3888                        		.dbg	line,	"include\routines_LEVELS.c", 228; // IF NPC X POSITION IS INFERIOR TO SCREEN RIGHT SIDE //
 3889                        	
 3890                        		.dbg	line,	"include\routines_LEVELS.c", 229; if(list_npc_x_pos_ref[i] < sgx_map_pxl_x + 256)
 3891                        		__ld.wm		_sgx_map_pxl_x
         14:C47D  AD 8F 26   			lda.l	_sgx_map_pxl_x
         14:C480  AC 90 26   			ldy.h	_sgx_map_pxl_x
 3892                        		__add.wi	256
         14:C483  18         			clc
         14:C484  69 00      			adc.l	#256
         14:C486  42         			say
         14:C487  69 01      			adc.h	#256
         14:C489  42         			say
 3893                        		__ld2x.um	__scroll_npc_end - 1  /* i */
         14:C48A  AA         			tax
         14:C48B  AD 4A 26   			lda	__scroll_npc_end - 1
         14:C48E  0A         			asl	a
         14:C48F  22         			sax
 3894                        		__ugt_w.wax	_list_npc_x_pos_ref
         14:C490  18         			clc			; Subtract memory+1 from Y:A.
         14:C491  FD 09 26   			sbc.l	_list_npc_x_pos_ref, x
         14:C494  98         			tya
         14:C495  FD 0A 26   			sbc.h	_list_npc_x_pos_ref, x		; CS if Y:A > memory.
 3895                        		__bfalse	.LL50
         14:C498  B0 03 4C 1D			bcc	.LL50
         14:C49C  C5          
 3896                        	
 3897                        		.dbg	line,	"include\routines_LEVELS.c", 230; {
 3898                        	
 3899                        		.dbg	line,	"include\routines_LEVELS.c", 231; // IF NPC X POSITION IS SUPERIOR TO SCREEN LEFT SIDE PLUS 32 PX //
 3900                        	
 3901                        		.dbg	line,	"include\routines_LEVELS.c", 232; if(list_npc_x_pos_ref[i] - sgx_map_pxl_x + 32 > 0)
 3902                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         14:C49D  AD 4A 26   			lda	__scroll_npc_end - 1
         14:C4A0  0A         			asl	a
         14:C4A1  AA         			tax
 3903                        		__ld.wax	_list_npc_x_pos_ref
         14:C4A2  BD 09 26   			lda.l	_list_npc_x_pos_ref, x
         14:C4A5  BC 0A 26   			ldy.h	_list_npc_x_pos_ref, x
 3904                        		__sub.wm	_sgx_map_pxl_x
         14:C4A8  38         			sec
         14:C4A9  ED 8F 26   			sbc.l	_sgx_map_pxl_x
         14:C4AC  42         			say
         14:C4AD  ED 90 26   			sbc.h	_sgx_map_pxl_x
         14:C4B0  42         			say
 3905                        		__add.wi	32
         14:C4B1  18         			clc
         14:C4B2  69 20      			adc.l	#32
         14:C4B4  90 01      			bcc	!+
         14:C4B6  C8         			iny
         14:C4B7             	!:
 3906                        		__sgt_w.wi	0
         14:C4B7  18         			clc			; Subtract integer+1 from Y:A.
         14:C4B8  E9 00      			sbc.l	#0
         14:C4BA  98         			tya
         14:C4BB  E9 00      			sbc.h	#0
         14:C4BD  50 02      			bvc	!+
         14:C4BF  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         14:C4C1  49 80      	!:		eor	#$80
         14:C4C3  0A         			asl	a
 3907                        		__bfalse	.LL51
         14:C4C4  90 57      			bcc	.LL51
 3908                        	
 3909                        		.dbg	line,	"include\routines_LEVELS.c", 233; {
 3910                        	
 3911                        		.dbg	line,	"include\routines_LEVELS.c", 234; // IF NPC Y POSITION IS INFERIOR TO SCREEN BOTTOM //
 3912                        	
 3913                        		.dbg	line,	"include\routines_LEVELS.c", 235; if(list_npc_y_pos_ref[i] < sgx_map_pxl_y + 224)
 3914                        		__ld.wm		_sgx_map_pxl_y
         14:C4C6  AD 91 26   			lda.l	_sgx_map_pxl_y
         14:C4C9  AC 92 26   			ldy.h	_sgx_map_pxl_y
 3915                        		__add.wi	224
         14:C4CC  18         			clc
         14:C4CD  69 E0      			adc.l	#224
         14:C4CF  90 01      			bcc	!+
         14:C4D1  C8         			iny
         14:C4D2             	!:
 3916                        		__ld2x.um	__scroll_npc_end - 1  /* i */
         14:C4D2  AA         			tax
         14:C4D3  AD 4A 26   			lda	__scroll_npc_end - 1
         14:C4D6  0A         			asl	a
         14:C4D7  22         			sax
 3917                        		__ugt_w.wax	_list_npc_y_pos_ref
         14:C4D8  18         			clc			; Subtract memory+1 from Y:A.
         14:C4D9  FD 1B 26   			sbc.l	_list_npc_y_pos_ref, x
         14:C4DC  98         			tya
         14:C4DD  FD 1C 26   			sbc.h	_list_npc_y_pos_ref, x		; CS if Y:A > memory.
 3918                        		__bfalse	.LL52
         14:C4E0  90 3B      			bcc	.LL52
 3919                        	
 3920                        		.dbg	line,	"include\routines_LEVELS.c", 236; {
 3921                        	
 3922                        		.dbg	line,	"include\routines_LEVELS.c", 237; // IF NPC Y POSITION IS SUPERIOR TO SCREEN TOP PLUS 32 PX //
 3923                        	
 3924                        		.dbg	line,	"include\routines_LEVELS.c", 238; if(list_npc_y_pos_ref[i] - sgx_map_pxl_y + 32 > 0)
 3925                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         14:C4E2  AD 4A 26   			lda	__scroll_npc_end - 1
         14:C4E5  0A         			asl	a
         14:C4E6  AA         			tax
 3926                        		__ld.wax	_list_npc_y_pos_ref
         14:C4E7  BD 1B 26   			lda.l	_list_npc_y_pos_ref, x
         14:C4EA  BC 1C 26   			ldy.h	_list_npc_y_pos_ref, x
 3927                        		__sub.wm	_sgx_map_pxl_y
         14:C4ED  38         			sec
         14:C4EE  ED 91 26   			sbc.l	_sgx_map_pxl_y
         14:C4F1  42         			say
         14:C4F2  ED 92 26   			sbc.h	_sgx_map_pxl_y
         14:C4F5  42         			say
 3928                        		__add.wi	32
         14:C4F6  18         			clc
         14:C4F7  69 20      			adc.l	#32
         14:C4F9  90 01      			bcc	!+
         14:C4FB  C8         			iny
         14:C4FC             	!:
 3929                        		__sgt_w.wi	0
         14:C4FC  18         			clc			; Subtract integer+1 from Y:A.
         14:C4FD  E9 00      			sbc.l	#0
         14:C4FF  98         			tya
         14:C500  E9 00      			sbc.h	#0
         14:C502  50 02      			bvc	!+
         14:C504  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         14:C506  49 80      	!:		eor	#$80
         14:C508  0A         			asl	a
 3930                        		__bfalse	.LL53
         14:C509  90 12      			bcc	.LL53
 3931                        	
 3932                        		.dbg	line,	"include\routines_LEVELS.c", 239; {
 3933                        	
 3934                        		.dbg	line,	"include\routines_LEVELS.c", 240; // WE STORE THE NPC ID //
 3935                        	
 3936                        		.dbg	line,	"include\routines_LEVELS.c", 241; list_onscreen_npc[onscreen_npc_number] = i;
 3937                        		__ldx.umq	_onscreen_npc_number
         14:C50B  AE B2 23   			ldx	_onscreen_npc_number
 3938                        		__ld.um		__scroll_npc_end - 1  /* i */
         14:C50E  AD 4A 26   			lda	__scroll_npc_end - 1
         14:C511  C2         			cly
 3939                        		__st.uaxq	_list_onscreen_npc
         14:C512  9D C5 23   			sta	_list_onscreen_npc, x
 3940                        	
 3941                        		.dbg	line,	"include\routines_LEVELS.c", 242; onscreen_npc_number += 1;
 3942                        		__add_st.umiq	1, _onscreen_npc_number
         14:C515  EE B2 23   			inc	_onscreen_npc_number
 3943                        	
 3944                        		.dbg	line,	"include\routines_LEVELS.c", 243; 
 3945                        	
 3946                        		.dbg	line,	"include\routines_LEVELS.c", 244; scroll_allowed = TRUE;
 3947                        		__st.umiq	1, __scroll_npc_end - 2  /* scroll_allowed */
         14:C518  A9 01      			lda.l	#1
         14:C51A  8D 49 26   			sta	__scroll_npc_end - 2
 3948                        	
 3949                        		.dbg	line,	"include\routines_LEVELS.c", 245; }
 3950                        	
 3951                        		.dbg	line,	"include\routines_LEVELS.c", 246; }
 3952    14:C51D             	.LL53:
 3953                        	
 3954                        		.dbg	line,	"include\routines_LEVELS.c", 247; }
 3955    14:C51D             	.LL52:
 3956                        	
 3957                        		.dbg	line,	"include\routines_LEVELS.c", 248; }
 3958    14:C51D             	.LL51:
 3959                        	
 3960                        		.dbg	line,	"include\routines_LEVELS.c", 250; // IF NPC IS WITHIN THE SCREEN LIMITS //
 3961                        	
 3962                        		.dbg	line,	"include\routines_LEVELS.c", 251; if(scroll_allowed == TRUE)
 3963    14:C51D             	.LL50:
 3964                        		__ld.umq	__scroll_npc_end - 2  /* scroll_allowed */
         14:C51D  AD 49 26   			lda	__scroll_npc_end - 2
 3965                        		__equ_b.uiq	1
         14:C520  C9 01      			cmp	#1
         14:C522  F0 01      			beq	!+
         14:C524  18         			clc
         14:C525             	!:
 3966                        		__bfalse	.LL54
         14:C525  90 44      			bcc	.LL54
 3967                        	
 3968                        		.dbg	line,	"include\routines_LEVELS.c", 252; {
 3969                        	
 3970                        		.dbg	line,	"include\routines_LEVELS.c", 253; list_npc_x_pos[i] = list_npc_x_pos_ref[i] - sgx_map_pxl_x;
 3971                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         14:C527  AD 4A 26   			lda	__scroll_npc_end - 1
         14:C52A  0A         			asl	a
         14:C52B  AA         			tax
 3972                        		__ld.wax	_list_npc_x_pos_ref
         14:C52C  BD 09 26   			lda.l	_list_npc_x_pos_ref, x
         14:C52F  BC 0A 26   			ldy.h	_list_npc_x_pos_ref, x
 3973                        		__sub.wm	_sgx_map_pxl_x
         14:C532  38         			sec
         14:C533  ED 8F 26   			sbc.l	_sgx_map_pxl_x
         14:C536  42         			say
         14:C537  ED 90 26   			sbc.h	_sgx_map_pxl_x
         14:C53A  42         			say
 3974                        		__ld2x.um	__scroll_npc_end - 1  /* i */
         14:C53B  AA         			tax
         14:C53C  AD 4A 26   			lda	__scroll_npc_end - 1
         14:C53F  0A         			asl	a
         14:C540  22         			sax
 3975                        		__st.waxq	_list_npc_x_pos
         14:C541  9D E5 25   			sta.l	_list_npc_x_pos, x
         14:C544  98         			tya
         14:C545  9D E6 25   			sta.h	_list_npc_x_pos, x
 3976                        	
 3977                        		.dbg	line,	"include\routines_LEVELS.c", 254; list_npc_y_pos[i] = list_npc_y_pos_ref[i] - sgx_map_pxl_y;
 3978                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         14:C548  AD 4A 26   			lda	__scroll_npc_end - 1
         14:C54B  0A         			asl	a
         14:C54C  AA         			tax
 3979                        		__ld.wax	_list_npc_y_pos_ref
         14:C54D  BD 1B 26   			lda.l	_list_npc_y_pos_ref, x
         14:C550  BC 1C 26   			ldy.h	_list_npc_y_pos_ref, x
 3980                        		__sub.wm	_sgx_map_pxl_y
         14:C553  38         			sec
         14:C554  ED 91 26   			sbc.l	_sgx_map_pxl_y
         14:C557  42         			say
         14:C558  ED 92 26   			sbc.h	_sgx_map_pxl_y
         14:C55B  42         			say
 3981                        		__ld2x.um	__scroll_npc_end - 1  /* i */
         14:C55C  AA         			tax
         14:C55D  AD 4A 26   			lda	__scroll_npc_end - 1
         14:C560  0A         			asl	a
         14:C561  22         			sax
 3982                        		__st.waxq	_list_npc_y_pos
         14:C562  9D F7 25   			sta.l	_list_npc_y_pos, x
         14:C565  98         			tya
         14:C566  9D F8 25   			sta.h	_list_npc_y_pos, x
 3983                        	
 3984                        		.dbg	line,	"include\routines_LEVELS.c", 255; }
 3985                        	
 3986                        		.dbg	line,	"include\routines_LEVELS.c", 257; else
 3987                        		__bra		.LL55
         14:C569  80 1E      			bra	.LL55
 3988    14:C56B             	.LL54:
 3989                        	
 3990                        		.dbg	line,	"include\routines_LEVELS.c", 258; {
 3991                        	
 3992                        		.dbg	line,	"include\routines_LEVELS.c", 259; list_npc_x_pos[i] = -32;
 3993                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         14:C56B  AD 4A 26   			lda	__scroll_npc_end - 1
         14:C56E  0A         			asl	a
         14:C56F  AA         			tax
 3994                        		__st.waxiq	-32, _list_npc_x_pos
         14:C570  A9 E0      			lda.l	#-32
         14:C572  9D E5 25   			sta.l	_list_npc_x_pos, x
         14:C575  A9 FF      			lda.h	#-32
         14:C577  9D E6 25   			sta.h	_list_npc_x_pos, x
 3995                        	
 3996                        		.dbg	line,	"include\routines_LEVELS.c", 260; list_npc_y_pos[i] = -32;
 3997                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         14:C57A  AD 4A 26   			lda	__scroll_npc_end - 1
         14:C57D  0A         			asl	a
         14:C57E  AA         			tax
 3998                        		__st.waxiq	-32, _list_npc_y_pos
         14:C57F  A9 E0      			lda.l	#-32
         14:C581  9D F7 25   			sta.l	_list_npc_y_pos, x
         14:C584  A9 FF      			lda.h	#-32
         14:C586  9D F8 25   			sta.h	_list_npc_y_pos, x
 3999                        	
 4000                        		.dbg	line,	"include\routines_LEVELS.c", 261; }
 4001    14:C589             	.LL55:
 4002                        	
 4003                        		.dbg	line,	"include\routines_LEVELS.c", 263; sgx_spr_set(i + npc_start_index);
 4004                        		__ld.um		__scroll_npc_end - 1  /* i */
         14:C589  AD 4A 26   			lda	__scroll_npc_end - 1
         14:C58C  C2         			cly
 4005                        		__add.um	_npc_start_index
         14:C58D  18         			clc
         14:C58E  6D B0 23   			adc	_npc_start_index
         14:C591  90 01      			bcc	!+
         14:C593  C8         			iny
         14:C594             	!:
 4006                        		__call		_sgx_spr_set.1
         14:C594  20 8A E8   			call	_sgx_spr_set.1
 4007                        	
 4008                        		.dbg	line,	"include\routines_LEVELS.c", 265; sgx_spr_x(list_npc_x_pos[i]);
 4009                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         14:C597  AD 4A 26   			lda	__scroll_npc_end - 1
         14:C59A  0A         			asl	a
         14:C59B  AA         			tax
 4010                        		__ld.wax	_list_npc_x_pos
         14:C59C  BD E5 25   			lda.l	_list_npc_x_pos, x
         14:C59F  BC E6 25   			ldy.h	_list_npc_x_pos, x
 4011                        		__call		_sgx_spr_x.1
         14:C5A2  20 B7 E8   			call	_sgx_spr_x.1
 4012                        	
 4013                        		.dbg	line,	"include\routines_LEVELS.c", 266; sgx_spr_y(list_npc_y_pos[i]);
 4014                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         14:C5A5  AD 4A 26   			lda	__scroll_npc_end - 1
         14:C5A8  0A         			asl	a
         14:C5A9  AA         			tax
 4015                        		__ld.wax	_list_npc_y_pos
         14:C5AA  BD F7 25   			lda.l	_list_npc_y_pos, x
         14:C5AD  BC F8 25   			ldy.h	_list_npc_y_pos, x
 4016                        		__call		_sgx_spr_y.1
         14:C5B0  20 C6 E8   			call	_sgx_spr_y.1
 4017                        	
 4018                        		.dbg	line,	"include\routines_LEVELS.c", 267; }
 4019                        	
 4020                        		.dbg	line,	"include\routines_LEVELS.c", 268; }
 4021    14:C5B3             	.LL49	.alias		.LL46
 4022                        		__bra		.LL46
         14:C5B3  4C 67 C4   			bra	.LL46
 4023    14:C5B6             	.LL48:
 4024                        	
 4025                        		.dbg	line,	"include\routines_LEVELS.c", 269; }
 4026    14:C5B6             	.LL44:
 4027                        		__return	0
         14:C5B6  4C EF FF   			jmp	leave_proc
 4028                        		.dbg	clear
 4029                        		.endp
 4030                        		.pceas
 4031                        	
 4032                        		.dbg	line,	"include\routines_LEVELS.c", 274; int check_TILE_DEPTH(signed char x_offset , signed char y_offset)
 4033                        		.dbg	line,	"include\routines_LEVELS.c", 275; {
 4034                        	;***********************
 4035                        	;***********************
 4036                        	
 4037                        		.hucc
 4038    14:CE1B             		.proc		_check_TILE_DEPTH
 4039                        		__enter		_check_TILE_DEPTH
 4040                        	
 4041                        		.dbg	line,	"include\routines_LEVELS.c", 276; int player_COLL_X;
 4042                        	
 4043                        		.dbg	line,	"include\routines_LEVELS.c", 277; int player_COLL_Y;
 4044                        	
 4045                        		.dbg	line,	"include\routines_LEVELS.c", 280; player_COLL_X = player_pos_x + x_offset;
 4046                        		__ld.bs		2  /* x_offset */
         14:CE1B  A6 8D      			ldx	<__sp
         14:CE1D  B5 0A      			lda	<__stack + 2, x
         14:CE1F  C2         			cly
         14:CE20  10 01      			bpl	!+	; signed
         14:CE22  88         			dey
         14:CE23             	!:
 4047                        		__add.wm	_player_pos_x
         14:CE23  18         			clc
         14:CE24  6D D3 24   			adc.l	_player_pos_x
         14:CE27  42         			say
         14:CE28  6D D4 24   			adc.h	_player_pos_x
         14:CE2B  42         			say
 4048                        		__st.wmq	__check_TILE_DEPTH_end - 2  /* player_COLL_X */
         14:CE2C  8D 49 26   			sta.l	__check_TILE_DEPTH_end - 2
         14:CE2F  8C 4A 26   			sty.h	__check_TILE_DEPTH_end - 2
 4049                        	
 4050                        		.dbg	line,	"include\routines_LEVELS.c", 281; player_COLL_Y = player_pos_y + 32 - y_offset;//32
 4051                        		__ld.wm		_player_pos_y
         14:CE32  AD D5 24   			lda.l	_player_pos_y
         14:CE35  AC D6 24   			ldy.h	_player_pos_y
 4052                        		__add.wi	32
         14:CE38  18         			clc
         14:CE39  69 20      			adc.l	#32
         14:CE3B  90 01      			bcc	!+
         14:CE3D  C8         			iny
         14:CE3E             	!:
 4053                        		__push.wr
         14:CE3E  5A         			phy
         14:CE3F  48         			pha
 4054                        		__ld.bs		0  /* y_offset */
         14:CE40  A6 8D      			ldx	<__sp
         14:CE42  B5 08      			lda	<__stack + 0, x
         14:CE44  C2         			cly
         14:CE45  10 01      			bpl	!+	; signed
         14:CE47  88         			dey
         14:CE48             	!:
 4055                        		__sub.wt
         14:CE48  BA         			tsx
         14:CE49  38         			sec
         14:CE4A  49 FF      			eor	#$FF
         14:CE4C  7D 01 21   			adc.l	__tos, x
         14:CE4F  42         			say
         14:CE50  49 FF      			eor	#$FF
         14:CE52  7D 02 21   			adc.h	__tos, x
         14:CE55  42         			say
         14:CE56  E8         			inx
         14:CE57  E8         			inx
         14:CE58  9A         			txs
 4056                        		__st.wmq	__check_TILE_DEPTH_end - 4  /* player_COLL_Y */
         14:CE59  8D 47 26   			sta.l	__check_TILE_DEPTH_end - 4
         14:CE5C  8C 48 26   			sty.h	__check_TILE_DEPTH_end - 4
 4057                        	
 4058                        		.dbg	line,	"include\routines_LEVELS.c", 283; get_map_block(player_COLL_X + sgx_map_pxl_x, player_COLL_Y + sgx_map_pxl_y);
 4059                        		__ld.wm		__check_TILE_DEPTH_end - 2  /* player_COLL_X */
         14:CE5F  AD 49 26   			lda.l	__check_TILE_DEPTH_end - 2
         14:CE62  AC 4A 26   			ldy.h	__check_TILE_DEPTH_end - 2
 4060                        		__add.wm	_sgx_map_pxl_x
         14:CE65  18         			clc
         14:CE66  6D 8F 26   			adc.l	_sgx_map_pxl_x
         14:CE69  42         			say
         14:CE6A  6D 90 26   			adc.h	_sgx_map_pxl_x
         14:CE6D  42         			say
 4061                        		__st.wmq	map_pxl_x
         14:CE6E  85 FC      			sta.l	map_pxl_x
         14:CE70  84 FD      			sty.h	map_pxl_x
 4062                        		__ld.wm		__check_TILE_DEPTH_end - 4  /* player_COLL_Y */
         14:CE72  AD 47 26   			lda.l	__check_TILE_DEPTH_end - 4
         14:CE75  AC 48 26   			ldy.h	__check_TILE_DEPTH_end - 4
 4063                        		__add.wm	_sgx_map_pxl_y
         14:CE78  18         			clc
         14:CE79  6D 91 26   			adc.l	_sgx_map_pxl_y
         14:CE7C  42         			say
         14:CE7D  6D 92 26   			adc.h	_sgx_map_pxl_y
         14:CE80  42         			say
 4064                        		__st.wmq	map_pxl_y
         14:CE81  85 FE      			sta.l	map_pxl_y
         14:CE83  84 FF      			sty.h	map_pxl_y
 4065                        		__call		_get_map_block.2
         14:CE85  20 95 FF   			call	_get_map_block.2
 4066                        	
 4067                        		.dbg	line,	"include\routines_LEVELS.c", 284; }
 4068    14:CE88             	.LL56:
 4069                        		__modsp		4
         14:CE88  AA         			tax
         14:CE89  A5 8D      			lda	<__sp
         14:CE8B  18         			clc
         14:CE8C  69 04      			adc	#4
         14:CE8E  85 8D      			sta	<__sp
         14:CE90  8A         			txa
 4070                        		__return	1
         14:CE91  AA         			tax
         14:CE92  4C EF FF   			jmp	leave_proc
 4071                        		.dbg	clear
 4072                        		.endp
 4073                        		.pceas
 4074                        	
 4075                        		.dbg	line,	"include\routines_LEVELS.c", 286; // CHECK COLLISION WITH BG //
 4076                        		.dbg	line,	"include\routines_LEVELS.c", 287; int check_BG(signed char x_offset , signed char y_offset)
 4077                        		.dbg	line,	"include\routines_LEVELS.c", 288; {
 4078                        	;***********************
 4079                        	;***********************
 4080                        	
 4081                        		.hucc
 4082    14:CF76             		.proc		_check_BG
 4083                        		__enter		_check_BG
 4084                        	
 4085                        		.dbg	line,	"include\routines_LEVELS.c", 289; int player_COLL_X;
 4086                        	
 4087                        		.dbg	line,	"include\routines_LEVELS.c", 290; int player_COLL_Y;
 4088                        	
 4089                        		.dbg	line,	"include\routines_LEVELS.c", 293; player_COLL_X = player_pos_x + x_offset;
 4090                        		__ld.bs		2  /* x_offset */
         14:CF76  A6 8D      			ldx	<__sp
         14:CF78  B5 0A      			lda	<__stack + 2, x
         14:CF7A  C2         			cly
         14:CF7B  10 01      			bpl	!+	; signed
         14:CF7D  88         			dey
         14:CF7E             	!:
 4091                        		__add.wm	_player_pos_x
         14:CF7E  18         			clc
         14:CF7F  6D D3 24   			adc.l	_player_pos_x
         14:CF82  42         			say
         14:CF83  6D D4 24   			adc.h	_player_pos_x
         14:CF86  42         			say
 4092                        		__st.wmq	__check_BG_end - 2  /* player_COLL_X */
         14:CF87  8D 49 26   			sta.l	__check_BG_end - 2
         14:CF8A  8C 4A 26   			sty.h	__check_BG_end - 2
 4093                        	
 4094                        		.dbg	line,	"include\routines_LEVELS.c", 294; player_COLL_Y = player_pos_y + y_offset;
 4095                        		__ld.bs		0  /* y_offset */
         14:CF8D  A6 8D      			ldx	<__sp
         14:CF8F  B5 08      			lda	<__stack + 0, x
         14:CF91  C2         			cly
         14:CF92  10 01      			bpl	!+	; signed
         14:CF94  88         			dey
         14:CF95             	!:
 4096                        		__add.wm	_player_pos_y
         14:CF95  18         			clc
         14:CF96  6D D5 24   			adc.l	_player_pos_y
         14:CF99  42         			say
         14:CF9A  6D D6 24   			adc.h	_player_pos_y
         14:CF9D  42         			say
 4097                        		__st.wmq	__check_BG_end - 4  /* player_COLL_Y */
         14:CF9E  8D 47 26   			sta.l	__check_BG_end - 4
         14:CFA1  8C 48 26   			sty.h	__check_BG_end - 4
 4098                        	
 4099                        		.dbg	line,	"include\routines_LEVELS.c", 296; get_map_block(player_COLL_X + sgx_map_pxl_x, player_COLL_Y + sgx_map_pxl_y);
 4100                        		__ld.wm		__check_BG_end - 2  /* player_COLL_X */
         14:CFA4  AD 49 26   			lda.l	__check_BG_end - 2
         14:CFA7  AC 4A 26   			ldy.h	__check_BG_end - 2
 4101                        		__add.wm	_sgx_map_pxl_x
         14:CFAA  18         			clc
         14:CFAB  6D 8F 26   			adc.l	_sgx_map_pxl_x
         14:CFAE  42         			say
         14:CFAF  6D 90 26   			adc.h	_sgx_map_pxl_x
         14:CFB2  42         			say
 4102                        		__st.wmq	map_pxl_x
         14:CFB3  85 FC      			sta.l	map_pxl_x
         14:CFB5  84 FD      			sty.h	map_pxl_x
 4103                        		__ld.wm		__check_BG_end - 4  /* player_COLL_Y */
         14:CFB7  AD 47 26   			lda.l	__check_BG_end - 4
         14:CFBA  AC 48 26   			ldy.h	__check_BG_end - 4
 4104                        		__add.wm	_sgx_map_pxl_y
         14:CFBD  18         			clc
         14:CFBE  6D 91 26   			adc.l	_sgx_map_pxl_y
         14:CFC1  42         			say
         14:CFC2  6D 92 26   			adc.h	_sgx_map_pxl_y
         14:CFC5  42         			say
 4105                        		__st.wmq	map_pxl_y
         14:CFC6  85 FE      			sta.l	map_pxl_y
         14:CFC8  84 FF      			sty.h	map_pxl_y
 4106                        		__call		_get_map_block.2
         14:CFCA  20 95 FF   			call	_get_map_block.2
 4107                        	
 4108                        		.dbg	line,	"include\routines_LEVELS.c", 297; }
 4109    14:CFCD             	.LL57:
 4110                        		__modsp		4
         14:CFCD  AA         			tax
         14:CFCE  A5 8D      			lda	<__sp
         14:CFD0  18         			clc
         14:CFD1  69 04      			adc	#4
         14:CFD3  85 8D      			sta	<__sp
         14:CFD5  8A         			txa
 4111                        		__return	1
         14:CFD6  AA         			tax
         14:CFD7  4C EF FF   			jmp	leave_proc
 4112                        		.dbg	clear
 4113                        		.endp
 4114                        		.pceas
 4115                        	
 4116                        		.dbg	line,	"include\routines_LEVELS.c", 299; // CHECK COLLISION WITH OBJECTS //
 4117                        		.dbg	line,	"include\routines_LEVELS.c", 300; void check_OBJECT()
 4118                        		.dbg	line,	"include\routines_LEVELS.c", 301; {
 4119                        	;***********************
 4120                        	;***********************
 4121                        	
 4122                        		.hucc
 4123    14:C000             		.proc		_check_OBJECT
 4124                        		__enter		_check_OBJECT
 4125                        	
 4126                        		.dbg	line,	"include\routines_LEVELS.c", 302; if(onscreen_object_number != 0)
 4127                        		__tst.um	_onscreen_object_number
         14:C000  AD 30 23   			lda	_onscreen_object_number
         14:C003  C9 01      			cmp	#1
 4128                        		__bfalse	.LL59
         14:C005  B0 03 4C 81			bcc	.LL59
         14:C009  C1          
 4129                        	
 4130                        		.dbg	line,	"include\routines_LEVELS.c", 303; {
 4131                        	
 4132                        		.dbg	line,	"include\routines_LEVELS.c", 304; char i;
 4133                        	
 4134                        		.dbg	line,	"include\routines_LEVELS.c", 305; char current_object_id;
 4135                        	
 4136                        		.dbg	line,	"include\routines_LEVELS.c", 306; char current_object_type;
 4137                        	
 4138                        		.dbg	line,	"include\routines_LEVELS.c", 308; for(i=0 ; i<onscreen_object_number ; i++)
 4139                        		__st.umiq	0, __check_OBJECT_end - 1  /* i */
         14:C00A  9C 02 23   			stz	__check_OBJECT_end - 1
 4140    14:C00D             	.LL60:
 4141                        		__ld.umq	__check_OBJECT_end - 1  /* i */
         14:C00D  AD 02 23   			lda	__check_OBJECT_end - 1
 4142                        		__ult_b.umq	_onscreen_object_number
         14:C010  CD 30 23   			cmp	_onscreen_object_number		; Subtract memory from A.
         14:C013  6A         			ror	a		; CC if A < memory.
         14:C014  49 80      			eor	#$80
         14:C016  2A         			rol	a
 4143                        		__btrue		.LL62
         14:C017  B0 08      			bcs	.LL62
 4144                        		__bra		.LL63
         14:C019  4C 81 C1   			bra	.LL63
 4145    14:C01C             	.LL61:
 4146                        		__inc.umq	__check_OBJECT_end - 1  /* i */
         14:C01C  EE 02 23   			inc	__check_OBJECT_end - 1
 4147                        		__bra		.LL60
         14:C01F  80 EC      			bra	.LL60
 4148    14:C021             	.LL62:
 4149                        	
 4150                        		.dbg	line,	"include\routines_LEVELS.c", 309; {
 4151                        	
 4152                        		.dbg	line,	"include\routines_LEVELS.c", 310; // RETRIEVE OBJECT INDEX IN THE LIST //
 4153                        	
 4154                        		.dbg	line,	"include\routines_LEVELS.c", 311; current_object_id = list_onscreen_object[i];
 4155                        		__ldx.umq	__check_OBJECT_end - 1  /* i */
         14:C021  AE 02 23   			ldx	__check_OBJECT_end - 1
 4156                        		__ld.uax	_list_onscreen_object
         14:C024  BD 95 23   			lda	_list_onscreen_object, x
         14:C027  C2         			cly
 4157                        		__st.umq	__check_OBJECT_end - 2  /* current_object_id */
         14:C028  8D 01 23   			sta	__check_OBJECT_end - 2
 4158                        	
 4159                        		.dbg	line,	"include\routines_LEVELS.c", 312; // RETRIEVE OBJECT TYPE //
 4160                        	
 4161                        		.dbg	line,	"include\routines_LEVELS.c", 313; current_object_type = list_object_type[current_object_id];
 4162                        		__ldx.umq	__check_OBJECT_end - 2  /* current_object_id */
         14:C02B  AE 01 23   			ldx	__check_OBJECT_end - 2
 4163                        		__ld.uax	_list_object_type
         14:C02E  BD 31 23   			lda	_list_object_type, x
         14:C031  C2         			cly
 4164                        		__st.umq	__check_OBJECT_end - 3  /* current_object_type */
         14:C032  8D 00 23   			sta	__check_OBJECT_end - 3
 4165                        	
 4166                        		.dbg	line,	"include\routines_LEVELS.c", 315; if(current_object_type != TYPE_POT)
 4167                        		__ld.umq	__check_OBJECT_end - 3  /* current_object_type */
         14:C035  AD 00 23   			lda	__check_OBJECT_end - 3
 4168                        		__neq_b.uiq	1
         14:C038  38         			sec
         14:C039  49 01      			eor	#1
         14:C03B  D0 01      			bne	!+
         14:C03D  18         			clc
         14:C03E             	!:
 4169                        		__bfalse	.LL64
         14:C03E  90 DC      			bcc	.LL64
 4170                        	
 4171                        		.dbg	line,	"include\routines_LEVELS.c", 316; {
 4172                        	
 4173                        		.dbg	line,	"include\routines_LEVELS.c", 317; if(abs( (player_pos_x + 16) - (list_object_x_pos[current_object_id] + 8) ) < OBJECT_MARGIN)
 4174                        		__ld.wm		_player_pos_x
         14:C040  AD D3 24   			lda.l	_player_pos_x
         14:C043  AC D4 24   			ldy.h	_player_pos_x
 4175                        		__add.wi	16
         14:C046  18         			clc
         14:C047  69 10      			adc.l	#16
         14:C049  90 01      			bcc	!+
         14:C04B  C8         			iny
         14:C04C             	!:
 4176                        		__push.wr
         14:C04C  5A         			phy
         14:C04D  48         			pha
 4177                        		__ld2x.umq	__check_OBJECT_end - 2  /* current_object_id */
         14:C04E  AD 01 23   			lda	__check_OBJECT_end - 2
         14:C051  0A         			asl	a
         14:C052  AA         			tax
 4178                        		__ld.wax	_list_object_x_pos
         14:C053  BD DD 24   			lda.l	_list_object_x_pos, x
         14:C056  BC DE 24   			ldy.h	_list_object_x_pos, x
 4179                        		__add.wi	8
         14:C059  18         			clc
         14:C05A  69 08      			adc.l	#8
         14:C05C  90 01      			bcc	!+
         14:C05E  C8         			iny
         14:C05F             	!:
 4180                        		__sub.wt
         14:C05F  BA         			tsx
         14:C060  38         			sec
         14:C061  49 FF      			eor	#$FF
         14:C063  7D 01 21   			adc.l	__tos, x
         14:C066  42         			say
         14:C067  49 FF      			eor	#$FF
         14:C069  7D 02 21   			adc.h	__tos, x
         14:C06C  42         			say
         14:C06D  E8         			inx
         14:C06E  E8         			inx
         14:C06F  9A         			txs
 4181                        		__call		_abs.1
         14:C070  20 09 E5   			call	_abs.1
 4182                        		__slt_w.wi	10
         14:C073  C9 0A      			cmp.l	#10		; Subtract integer from Y:A.
         14:C075  98         			tya
         14:C076  E9 00      			sbc.h	#10
         14:C078  50 02      			bvc	!+
         14:C07A  49 80      			eor	#$80		; -ve if Y:A < integer (signed).
         14:C07C  0A         	!:		asl	a
 4183                        		__bfalse	.LL65
         14:C07D  90 9D      			bcc	.LL65
 4184                        	
 4185                        		.dbg	line,	"include\routines_LEVELS.c", 318; {
 4186                        	
 4187                        		.dbg	line,	"include\routines_LEVELS.c", 319; if(abs( (player_pos_y + 16) - (list_object_y_pos[current_object_id] + 8) ) < OBJECT_MARGIN)
 4188                        		__ld.wm		_player_pos_y
         14:C07F  AD D5 24   			lda.l	_player_pos_y
         14:C082  AC D6 24   			ldy.h	_player_pos_y
 4189                        		__add.wi	16
         14:C085  18         			clc
         14:C086  69 10      			adc.l	#16
         14:C088  90 01      			bcc	!+
         14:C08A  C8         			iny
         14:C08B             	!:
 4190                        		__push.wr
         14:C08B  5A         			phy
         14:C08C  48         			pha
 4191                        		__ld2x.umq	__check_OBJECT_end - 2  /* current_object_id */
         14:C08D  AD 01 23   			lda	__check_OBJECT_end - 2
         14:C090  0A         			asl	a
         14:C091  AA         			tax
 4192                        		__ld.wax	_list_object_y_pos
         14:C092  BD 0F 25   			lda.l	_list_object_y_pos, x
         14:C095  BC 10 25   			ldy.h	_list_object_y_pos, x
 4193                        		__add.wi	8
         14:C098  18         			clc
         14:C099  69 08      			adc.l	#8
         14:C09B  90 01      			bcc	!+
         14:C09D  C8         			iny
         14:C09E             	!:
 4194                        		__sub.wt
         14:C09E  BA         			tsx
         14:C09F  38         			sec
         14:C0A0  49 FF      			eor	#$FF
         14:C0A2  7D 01 21   			adc.l	__tos, x
         14:C0A5  42         			say
         14:C0A6  49 FF      			eor	#$FF
         14:C0A8  7D 02 21   			adc.h	__tos, x
         14:C0AB  42         			say
         14:C0AC  E8         			inx
         14:C0AD  E8         			inx
         14:C0AE  9A         			txs
 4195                        		__call		_abs.1
         14:C0AF  20 09 E5   			call	_abs.1
 4196                        		__slt_w.wi	10
         14:C0B2  C9 0A      			cmp.l	#10		; Subtract integer from Y:A.
         14:C0B4  98         			tya
         14:C0B5  E9 00      			sbc.h	#10
         14:C0B7  50 02      			bvc	!+
         14:C0B9  49 80      			eor	#$80		; -ve if Y:A < integer (signed).
         14:C0BB  0A         	!:		asl	a
 4197                        		__bfalse	.LL66
         14:C0BC  B0 03 4C 1C			bcc	.LL66
         14:C0C0  C0          
 4198                        	
 4199                        		.dbg	line,	"include\routines_LEVELS.c", 320; {
 4200                        	
 4201                        		.dbg	line,	"include\routines_LEVELS.c", 321; // THE OBJECT DISAPPEARS //
 4202                        	
 4203                        		.dbg	line,	"include\routines_LEVELS.c", 322; list_object_x_pos[current_object_id] = -16;
 4204                        		__ld2x.umq	__check_OBJECT_end - 2  /* current_object_id */
         14:C0C1  AD 01 23   			lda	__check_OBJECT_end - 2
         14:C0C4  0A         			asl	a
         14:C0C5  AA         			tax
 4205                        		__st.waxiq	-16, _list_object_x_pos
         14:C0C6  A9 F0      			lda.l	#-16
         14:C0C8  9D DD 24   			sta.l	_list_object_x_pos, x
         14:C0CB  A9 FF      			lda.h	#-16
         14:C0CD  9D DE 24   			sta.h	_list_object_x_pos, x
 4206                        	
 4207                        		.dbg	line,	"include\routines_LEVELS.c", 323; list_object_y_pos[current_object_id] = -16;
 4208                        		__ld2x.umq	__check_OBJECT_end - 2  /* current_object_id */
         14:C0D0  AD 01 23   			lda	__check_OBJECT_end - 2
         14:C0D3  0A         			asl	a
         14:C0D4  AA         			tax
 4209                        		__st.waxiq	-16, _list_object_y_pos
         14:C0D5  A9 F0      			lda.l	#-16
         14:C0D7  9D 0F 25   			sta.l	_list_object_y_pos, x
         14:C0DA  A9 FF      			lda.h	#-16
         14:C0DC  9D 10 25   			sta.h	_list_object_y_pos, x
 4210                        	
 4211                        		.dbg	line,	"include\routines_LEVELS.c", 324; list_object_state[current_object_id] = STATE_INACTIVE;
 4212                        		__ldx.umq	__check_OBJECT_end - 2  /* current_object_id */
         14:C0DF  AE 01 23   			ldx	__check_OBJECT_end - 2
 4213                        		__st.uaxiq	1, _list_object_state
         14:C0E2  A9 01      			lda.l	#1
         14:C0E4  9D 4A 23   			sta	_list_object_state, x
 4214                        	
 4215                        		.dbg	line,	"include\routines_LEVELS.c", 326; sgx_spr_set(current_object_id + object_start_index);
 4216                        		__ld.um		__check_OBJECT_end - 2  /* current_object_id */
         14:C0E7  AD 01 23   			lda	__check_OBJECT_end - 2
         14:C0EA  C2         			cly
 4217                        		__add.um	_object_start_index
         14:C0EB  18         			clc
         14:C0EC  6D 2E 23   			adc	_object_start_index
         14:C0EF  90 01      			bcc	!+
         14:C0F1  C8         			iny
         14:C0F2             	!:
 4218                        		__call		_sgx_spr_set.1
         14:C0F2  20 8A E8   			call	_sgx_spr_set.1
 4219                        	
 4220                        		.dbg	line,	"include\routines_LEVELS.c", 327; sgx_spr_x(list_object_x_pos[current_object_id]);
 4221                        		__ld2x.umq	__check_OBJECT_end - 2  /* current_object_id */
         14:C0F5  AD 01 23   			lda	__check_OBJECT_end - 2
         14:C0F8  0A         			asl	a
         14:C0F9  AA         			tax
 4222                        		__ld.wax	_list_object_x_pos
         14:C0FA  BD DD 24   			lda.l	_list_object_x_pos, x
         14:C0FD  BC DE 24   			ldy.h	_list_object_x_pos, x
 4223                        		__call		_sgx_spr_x.1
         14:C100  20 B7 E8   			call	_sgx_spr_x.1
 4224                        	
 4225                        		.dbg	line,	"include\routines_LEVELS.c", 328; sgx_spr_y(list_object_y_pos[current_object_id]);
 4226                        		__ld2x.umq	__check_OBJECT_end - 2  /* current_object_id */
         14:C103  AD 01 23   			lda	__check_OBJECT_end - 2
         14:C106  0A         			asl	a
         14:C107  AA         			tax
 4227                        		__ld.wax	_list_object_y_pos
         14:C108  BD 0F 25   			lda.l	_list_object_y_pos, x
         14:C10B  BC 10 25   			ldy.h	_list_object_y_pos, x
 4228                        		__call		_sgx_spr_y.1
         14:C10E  20 C6 E8   			call	_sgx_spr_y.1
 4229                        	
 4230                        		.dbg	line,	"include\routines_LEVELS.c", 329; 
 4231                        	
 4232                        		.dbg	line,	"include\routines_LEVELS.c", 331; switch(current_object_type)
 4233                        		__ld.umq	__check_OBJECT_end - 3  /* current_object_type */
         14:C111  AD 00 23   			lda	__check_OBJECT_end - 3
 4234                        		__bra		.LL67
         14:C114  80 4A      			bra	.LL67
 4235                        	
 4236                        		.dbg	line,	"include\routines_LEVELS.c", 332; {
 4237                        	
 4238                        		.dbg	line,	"include\routines_LEVELS.c", 333; case TYPE_HOURGLASS:
 4239    14:C116             	.LL69:
 4240                        		__case		0
 4241                        	
 4242                        		.dbg	line,	"include\routines_LEVELS.c", 334; if(seconds + 30 > 59)
 4243                        		__ld.um		_seconds
         14:C116  AD 2A 23   			lda	_seconds
         14:C119  C2         			cly
 4244                        		__add.wi	30
         14:C11A  18         			clc
         14:C11B  69 1E      			adc.l	#30
         14:C11D  90 01      			bcc	!+
         14:C11F  C8         			iny
         14:C120             	!:
 4245                        		__sgt_w.wi	59
         14:C120  18         			clc			; Subtract integer+1 from Y:A.
         14:C121  E9 3B      			sbc.l	#59
         14:C123  98         			tya
         14:C124  E9 00      			sbc.h	#59
         14:C126  50 02      			bvc	!+
         14:C128  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         14:C12A  49 80      	!:		eor	#$80
         14:C12C  0A         			asl	a
 4246                        		__bfalse	.LL70
         14:C12D  90 13      			bcc	.LL70
 4247                        	
 4248                        		.dbg	line,	"include\routines_LEVELS.c", 335; {
 4249                        	
 4250                        		.dbg	line,	"include\routines_LEVELS.c", 336; seconds = seconds + 30 - 60;
 4251                        		__ld.um		_seconds
         14:C12F  AD 2A 23   			lda	_seconds
         14:C132  C2         			cly
 4252                        		__sub.wi	30
         14:C133  38         			sec
         14:C134  E9 1E      			sbc.l	#30
         14:C136  B0 01      			bcs	!+
         14:C138  88         			dey
         14:C139             	!:
 4253                        		__st.umq	_seconds
         14:C139  8D 2A 23   			sta	_seconds
 4254                        	
 4255                        		.dbg	line,	"include\routines_LEVELS.c", 337; minutes += 1;
 4256                        		__add_st.umiq	1, _minutes
         14:C13C  EE 29 23   			inc	_minutes
 4257                        	
 4258                        		.dbg	line,	"include\routines_LEVELS.c", 338; }
 4259                        	
 4260                        		.dbg	line,	"include\routines_LEVELS.c", 340; else
 4261                        		__bra		.LL71
         14:C13F  4C 1C C0   			bra	.LL71
 4262    14:C142             	.LL70:
 4263                        	
 4264                        		.dbg	line,	"include\routines_LEVELS.c", 341; {
 4265                        	
 4266                        		.dbg	line,	"include\routines_LEVELS.c", 342; seconds += 30;
 4267                        		__add_st.umiq	30, _seconds
         14:C142  18         			clc
         14:C143  AD 2A 23   			lda	_seconds
         14:C146  69 1E      			adc	#30
         14:C148  8D 2A 23   			sta	_seconds
 4268                        	
 4269                        		.dbg	line,	"include\routines_LEVELS.c", 343; }
 4270    14:C14B             	.LL71	.alias		.LL68
 4271                        	
 4272                        		.dbg	line,	"include\routines_LEVELS.c", 345; break;
 4273                        		__bra		.LL68
         14:C14B  4C 1C C0   			bra	.LL68
 4274                        	
 4275                        		.dbg	line,	"include\routines_LEVELS.c", 347; case TYPE_POW:
 4276    14:C14E             	.LL72:
 4277                        		__case		2
 4278                        	
 4279                        		.dbg	line,	"include\routines_LEVELS.c", 348; //
 4280                        	
 4281                        		.dbg	line,	"include\routines_LEVELS.c", 349; break;
 4282                        		__bra		.LL68
         14:C14E  4C 1C C0   			bra	.LL68
 4283                        	
 4284                        		.dbg	line,	"include\routines_LEVELS.c", 351; case TYPE_GRAY_KEY:
 4285    14:C151             	.LL73:
 4286                        		__case		4
 4287                        	
 4288                        		.dbg	line,	"include\routines_LEVELS.c", 352; key_amount += 1;
 4289                        		__add_st.umiq	1, _key_amount
         14:C151  EE 27 23   			inc	_key_amount
 4290                        	
 4291                        		.dbg	line,	"include\routines_LEVELS.c", 353; display_KEY();
 4292                        		__call		_display_KEY
         14:C154  20 8B FF   			call	_display_KEY
 4293                        	
 4294                        		.dbg	line,	"include\routines_LEVELS.c", 354; break;
 4295                        		__bra		.LL68
         14:C157  4C 1C C0   			bra	.LL68
 4296                        	
 4297                        		.dbg	line,	"include\routines_LEVELS.c", 356; case TYPE_YASHICHI:
 4298    14:C15A             	.LL74:
 4299                        		__case		14
 4300                        	
 4301                        		.dbg	line,	"include\routines_LEVELS.c", 357; life_amount += 1;
 4302                        		__add_st.umiq	1, _life_amount
         14:C15A  EE 26 23   			inc	_life_amount
 4303                        	
 4304                        		.dbg	line,	"include\routines_LEVELS.c", 358; break;
 4305                        		__bra		.LL68
         14:C15D  4C 1C C0   			bra	.LL68
 4306                        	
 4307                        		.dbg	line,	"include\routines_LEVELS.c", 359; }
 4308    14:C160             	.LL67:
 4309                        		__switch_c.ur	4
         14:C160  A2 05      			ldx	#4 + 1
         14:C162  CA         	!loop:		dex
         14:C163  F0 05      			beq	!found+
         14:C165  DD 6F C1   			cmp	!table+ - 1, x
         14:C168  D0 F8      			bne	!loop-
         14:C16A  8A         	!found:		txa
         14:C16B  0A         			asl	a
         14:C16C  AA         			tax
         14:C16D  7C 74 C1   			jmp	[!table+ + 4, x]
 4310                        	
 4311    14:C170  0E 04 02 00	!table:		db	14, 4, 2, 0
 4312    14:C174  1C C0      			dw	.LL68
 4313    14:C176  5A C1      			dw	.LL74, .LL73, .LL72, .LL69
         14:C178  51 C1       
         14:C17A  4E C1       
         14:C17C  16 C1       
 4314                        	
 4315    14:C17E             	.LL68	.alias		.LL61
 4316                        	
 4317                        		.dbg	line,	"include\routines_LEVELS.c", 360; }
 4318                        	
 4319                        		.dbg	line,	"include\routines_LEVELS.c", 361; }
 4320    14:C17E             	.LL66	.alias		.LL61
 4321                        	
 4322                        		.dbg	line,	"include\routines_LEVELS.c", 362; }
 4323    14:C17E             	.LL65	.alias		.LL61
 4324                        	
 4325                        		.dbg	line,	"include\routines_LEVELS.c", 363; }
 4326    14:C17E             	.LL64	.alias		.LL61
 4327                        		__bra		.LL61
         14:C17E  4C 1C C0   			bra	.LL61
 4328    14:C181             	.LL63:
 4329                        	
 4330                        		.dbg	line,	"include\routines_LEVELS.c", 364; }
 4331                        	
 4332                        		.dbg	line,	"include\routines_LEVELS.c", 365; }
 4333    14:C181             	.LL59:
 4334    14:C181             	.LL58:
 4335                        		__return	0
         14:C181  4C EF FF   			jmp	leave_proc
 4336                        		.dbg	clear
 4337                        		.endp
 4338               7060     		.data
 4339               2300     		.bss
 4340    F8:2300             	__check_OBJECT_loc:
 4341    F8:2300             			ds	3
 4342    F8:2303             	__check_OBJECT_end:
 4343               E309     		.code
 4344                        		.pceas
 4345                        	
 4346                        		.dbg	line,	"include\routines_LEVELS.c", 367; // CHECK COLLISION WITH NPCS //
 4347                        		.dbg	line,	"include\routines_LEVELS.c", 368; void check_NPC()
 4348                        		.dbg	line,	"include\routines_LEVELS.c", 369; {
 4349                        	;***********************
 4350                        	;***********************
 4351                        	
 4352                        		.hucc
 4353    14:C5B9             		.proc		_check_NPC
 4354                        		__enter		_check_NPC
 4355                        	
 4356                        		.dbg	line,	"include\routines_LEVELS.c", 370; if(onscreen_npc_number != 0)
 4357                        		__tst.um	_onscreen_npc_number
         14:C5B9  AD B2 23   			lda	_onscreen_npc_number
         14:C5BC  C9 01      			cmp	#1
 4358                        		__bfalse	.LL76
         14:C5BE  B0 03 4C F4			bcc	.LL76
         14:C5C2  C6          
 4359                        	
 4360                        		.dbg	line,	"include\routines_LEVELS.c", 371; {
 4361                        	
 4362                        		.dbg	line,	"include\routines_LEVELS.c", 372; if(player_state == STATE_IDLE || player_state == STATE_WALK)
 4363                        		__not.um	_player_state
         14:C5C3  AD 16 23   			lda	_player_state
         14:C5C6  18         			clc
         14:C5C7  D0 01      			bne	!+
         14:C5C9  38         			sec
         14:C5CA             	!:
 4364                        		__btrue		.LL78
         14:C5CA  B0 08      			bcs	.LL78
 4365                        		__ld.umq	_player_state
         14:C5CC  AD 16 23   			lda	_player_state
 4366                        		__equ_b.uiq	1
         14:C5CF  C9 01      			cmp	#1
         14:C5D1  F0 01      			beq	!+
         14:C5D3  18         			clc
         14:C5D4             	!:
 4367    14:C5D4             	.LL78:
 4368                        		__bfalse	.LL77
         14:C5D4  B0 03 4C F4			bcc	.LL77
         14:C5D8  C6          
 4369                        	
 4370                        		.dbg	line,	"include\routines_LEVELS.c", 373; {
 4371                        	
 4372                        		.dbg	line,	"include\routines_LEVELS.c", 374; char i,j;
 4373                        	
 4374                        		.dbg	line,	"include\routines_LEVELS.c", 375; char current_npc_id;
 4375                        	
 4376                        		.dbg	line,	"include\routines_LEVELS.c", 376; char current_npc_type;
 4377                        	
 4378                        		.dbg	line,	"include\routines_LEVELS.c", 378; for(i=0 ; i<onscreen_npc_number ; i++)
 4379                        		__st.umiq	0, __check_NPC_end - 1  /* i */
         14:C5D9  9C 4A 26   			stz	__check_NPC_end - 1
 4380    14:C5DC             	.LL79:
 4381                        		__ld.umq	__check_NPC_end - 1  /* i */
         14:C5DC  AD 4A 26   			lda	__check_NPC_end - 1
 4382                        		__ult_b.umq	_onscreen_npc_number
         14:C5DF  CD B2 23   			cmp	_onscreen_npc_number		; Subtract memory from A.
         14:C5E2  6A         			ror	a		; CC if A < memory.
         14:C5E3  49 80      			eor	#$80
         14:C5E5  2A         			rol	a
 4383                        		__btrue		.LL81
         14:C5E6  B0 08      			bcs	.LL81
 4384                        		__bra		.LL82
         14:C5E8  4C F4 C6   			bra	.LL82
 4385    14:C5EB             	.LL80:
 4386                        		__inc.umq	__check_NPC_end - 1  /* i */
         14:C5EB  EE 4A 26   			inc	__check_NPC_end - 1
 4387                        		__bra		.LL79
         14:C5EE  80 EC      			bra	.LL79
 4388    14:C5F0             	.LL81:
 4389                        	
 4390                        		.dbg	line,	"include\routines_LEVELS.c", 379; {
 4391                        	
 4392                        		.dbg	line,	"include\routines_LEVELS.c", 380; // RETRIEVE NPC INDEX IN THE LIST //
 4393                        	
 4394                        		.dbg	line,	"include\routines_LEVELS.c", 381; current_npc_id = list_onscreen_npc[i];
 4395                        		__ldx.umq	__check_NPC_end - 1  /* i */
         14:C5F0  AE 4A 26   			ldx	__check_NPC_end - 1
 4396                        		__ld.uax	_list_onscreen_npc
         14:C5F3  BD C5 23   			lda	_list_onscreen_npc, x
         14:C5F6  C2         			cly
 4397                        		__st.umq	__check_NPC_end - 3  /* current_npc_id */
         14:C5F7  8D 48 26   			sta	__check_NPC_end - 3
 4398                        	
 4399                        		.dbg	line,	"include\routines_LEVELS.c", 383; if(list_npc_state[current_npc_id] == STATE_ACTIVE)
 4400                        		__ldx.umq	__check_NPC_end - 3  /* current_npc_id */
         14:C5FA  AE 48 26   			ldx	__check_NPC_end - 3
 4401                        		__not.uax	_list_npc_state
         14:C5FD  BD BC 23   			lda	_list_npc_state, x
         14:C600  18         			clc
         14:C601  D0 01      			bne	!+
         14:C603  38         			sec
         14:C604             	!:
 4402                        		__bfalse	.LL83
         14:C604  90 E5      			bcc	.LL83
 4403                        	
 4404                        		.dbg	line,	"include\routines_LEVELS.c", 384; {
 4405                        	
 4406                        		.dbg	line,	"include\routines_LEVELS.c", 385; // RETRIEVE NPC TYPE //
 4407                        	
 4408                        		.dbg	line,	"include\routines_LEVELS.c", 386; current_npc_type = list_npc_type[current_npc_id];
 4409                        		__ldx.umq	__check_NPC_end - 3  /* current_npc_id */
         14:C606  AE 48 26   			ldx	__check_NPC_end - 3
 4410                        		__ld.uax	_list_npc_type
         14:C609  BD B3 23   			lda	_list_npc_type, x
         14:C60C  C2         			cly
 4411                        		__st.umq	__check_NPC_end - 4  /* current_npc_type */
         14:C60D  8D 47 26   			sta	__check_NPC_end - 4
 4412                        	
 4413                        		.dbg	line,	"include\routines_LEVELS.c", 388; if(abs( (player_pos_x + 16) - (list_npc_x_pos[current_npc_id] + 16) ) < OBJECT_MARGIN)
 4414                        		__ld.wm		_player_pos_x
         14:C610  AD D3 24   			lda.l	_player_pos_x
         14:C613  AC D4 24   			ldy.h	_player_pos_x
 4415                        		__add.wi	16
         14:C616  18         			clc
         14:C617  69 10      			adc.l	#16
         14:C619  90 01      			bcc	!+
         14:C61B  C8         			iny
         14:C61C             	!:
 4416                        		__push.wr
         14:C61C  5A         			phy
         14:C61D  48         			pha
 4417                        		__ld2x.umq	__check_NPC_end - 3  /* current_npc_id */
         14:C61E  AD 48 26   			lda	__check_NPC_end - 3
         14:C621  0A         			asl	a
         14:C622  AA         			tax
 4418                        		__ld.wax	_list_npc_x_pos
         14:C623  BD E5 25   			lda.l	_list_npc_x_pos, x
         14:C626  BC E6 25   			ldy.h	_list_npc_x_pos, x
 4419                        		__add.wi	16
         14:C629  18         			clc
         14:C62A  69 10      			adc.l	#16
         14:C62C  90 01      			bcc	!+
         14:C62E  C8         			iny
         14:C62F             	!:
 4420                        		__sub.wt
         14:C62F  BA         			tsx
         14:C630  38         			sec
         14:C631  49 FF      			eor	#$FF
         14:C633  7D 01 21   			adc.l	__tos, x
         14:C636  42         			say
         14:C637  49 FF      			eor	#$FF
         14:C639  7D 02 21   			adc.h	__tos, x
         14:C63C  42         			say
         14:C63D  E8         			inx
         14:C63E  E8         			inx
         14:C63F  9A         			txs
 4421                        		__call		_abs.1
         14:C640  20 09 E5   			call	_abs.1
 4422                        		__slt_w.wi	10
         14:C643  C9 0A      			cmp.l	#10		; Subtract integer from Y:A.
         14:C645  98         			tya
         14:C646  E9 00      			sbc.h	#10
         14:C648  50 02      			bvc	!+
         14:C64A  49 80      			eor	#$80		; -ve if Y:A < integer (signed).
         14:C64C  0A         	!:		asl	a
 4423                        		__bfalse	.LL84
         14:C64D  90 9C      			bcc	.LL84
 4424                        	
 4425                        		.dbg	line,	"include\routines_LEVELS.c", 389; {
 4426                        	
 4427                        		.dbg	line,	"include\routines_LEVELS.c", 390; if(abs( (player_pos_y + 16) - (list_npc_y_pos[current_npc_id] + 16) ) < OBJECT_MARGIN)
 4428                        		__ld.wm		_player_pos_y
         14:C64F  AD D5 24   			lda.l	_player_pos_y
         14:C652  AC D6 24   			ldy.h	_player_pos_y
 4429                        		__add.wi	16
         14:C655  18         			clc
         14:C656  69 10      			adc.l	#16
         14:C658  90 01      			bcc	!+
         14:C65A  C8         			iny
         14:C65B             	!:
 4430                        		__push.wr
         14:C65B  5A         			phy
         14:C65C  48         			pha
 4431                        		__ld2x.umq	__check_NPC_end - 3  /* current_npc_id */
         14:C65D  AD 48 26   			lda	__check_NPC_end - 3
         14:C660  0A         			asl	a
         14:C661  AA         			tax
 4432                        		__ld.wax	_list_npc_y_pos
         14:C662  BD F7 25   			lda.l	_list_npc_y_pos, x
         14:C665  BC F8 25   			ldy.h	_list_npc_y_pos, x
 4433                        		__add.wi	16
         14:C668  18         			clc
         14:C669  69 10      			adc.l	#16
         14:C66B  90 01      			bcc	!+
         14:C66D  C8         			iny
         14:C66E             	!:
 4434                        		__sub.wt
         14:C66E  BA         			tsx
         14:C66F  38         			sec
         14:C670  49 FF      			eor	#$FF
         14:C672  7D 01 21   			adc.l	__tos, x
         14:C675  42         			say
         14:C676  49 FF      			eor	#$FF
         14:C678  7D 02 21   			adc.h	__tos, x
         14:C67B  42         			say
         14:C67C  E8         			inx
         14:C67D  E8         			inx
         14:C67E  9A         			txs
 4435                        		__call		_abs.1
         14:C67F  20 09 E5   			call	_abs.1
 4436                        		__slt_w.wi	10
         14:C682  C9 0A      			cmp.l	#10		; Subtract integer from Y:A.
         14:C684  98         			tya
         14:C685  E9 00      			sbc.h	#10
         14:C687  50 02      			bvc	!+
         14:C689  49 80      			eor	#$80		; -ve if Y:A < integer (signed).
         14:C68B  0A         	!:		asl	a
 4437                        		__bfalse	.LL85
         14:C68C  B0 03 4C EB			bcc	.LL85
         14:C690  C5          
 4438                        	
 4439                        		.dbg	line,	"include\routines_LEVELS.c", 391; {               
 4440                        	
 4441                        		.dbg	line,	"include\routines_LEVELS.c", 392; switch(current_npc_type)
 4442                        		__ld.umq	__check_NPC_end - 4  /* current_npc_type */
         14:C691  AD 47 26   			lda	__check_NPC_end - 4
 4443                        		__bra		.LL86
         14:C694  80 4A      			bra	.LL86
 4444                        	
 4445                        		.dbg	line,	"include\routines_LEVELS.c", 393; {
 4446                        	
 4447                        		.dbg	line,	"include\routines_LEVELS.c", 394; case TYPE_NPC_REWARD:
 4448    14:C696             	.LL88:
 4449                        		__case		0
 4450                        	
 4451                        		.dbg	line,	"include\routines_LEVELS.c", 395; //
 4452                        	
 4453                        		.dbg	line,	"include\routines_LEVELS.c", 396; break;
 4454                        		__bra		.LL87
         14:C696  4C EB C5   			bra	.LL87
 4455                        	
 4456                        		.dbg	line,	"include\routines_LEVELS.c", 398; case TYPE_NPC_SHOP:
 4457    14:C699             	.LL89:
 4458                        		__case		1
 4459                        	
 4460                        		.dbg	line,	"include\routines_LEVELS.c", 399; disp_off();
 4461                        		__call		_disp_off
         14:C699  20 29 E4   			call	_disp_off
 4462                        	
 4463                        		.dbg	line,	"include\routines_LEVELS.c", 401; minutes_backup = minutes;
 4464                        		__ld.um		_minutes
         14:C69C  AD 29 23   			lda	_minutes
         14:C69F  C2         			cly
 4465                        		__st.umq	_minutes_backup
         14:C6A0  8D 2C 23   			sta	_minutes_backup
 4466                        	
 4467                        		.dbg	line,	"include\routines_LEVELS.c", 402; seconds_backup = seconds;
 4468                        		__ld.um		_seconds
         14:C6A3  AD 2A 23   			lda	_seconds
         14:C6A6  C2         			cly
 4469                        		__st.umq	_seconds_backup
         14:C6A7  8D 2D 23   			sta	_seconds_backup
 4470                        	
 4471                        		.dbg	line,	"include\routines_LEVELS.c", 403; list_npc_state[current_npc_id] = STATE_INACTIVE;
 4472                        		__ldx.umq	__check_NPC_end - 3  /* current_npc_id */
         14:C6AA  AE 48 26   			ldx	__check_NPC_end - 3
 4473                        		__st.uaxiq	1, _list_npc_state
         14:C6AD  A9 01      			lda.l	#1
         14:C6AF  9D BC 23   			sta	_list_npc_state, x
 4474                        	
 4475                        		.dbg	line,	"include\routines_LEVELS.c", 404; camera_pos_x_backup = sgx_map_pxl_x;
 4476                        		__ld.wm		_sgx_map_pxl_x
         14:C6B2  AD 8F 26   			lda.l	_sgx_map_pxl_x
         14:C6B5  AC 90 26   			ldy.h	_sgx_map_pxl_x
 4477                        		__st.wmq	_camera_pos_x_backup
         14:C6B8  8D D9 24   			sta.l	_camera_pos_x_backup
         14:C6BB  8C DA 24   			sty.h	_camera_pos_x_backup
 4478                        	
 4479                        		.dbg	line,	"include\routines_LEVELS.c", 405; camera_pos_y_backup = list_npc_y_pos_ref[current_npc_id] - 128;                                    
 4480                        		__ld2x.umq	__check_NPC_end - 3  /* current_npc_id */
         14:C6BE  AD 48 26   			lda	__check_NPC_end - 3
         14:C6C1  0A         			asl	a
         14:C6C2  AA         			tax
 4481                        		__ld.wax	_list_npc_y_pos_ref
         14:C6C3  BD 1B 26   			lda.l	_list_npc_y_pos_ref, x
         14:C6C6  BC 1C 26   			ldy.h	_list_npc_y_pos_ref, x
 4482                        		__sub.wi	128
         14:C6C9  38         			sec
         14:C6CA  E9 80      			sbc.l	#128
         14:C6CC  B0 01      			bcs	!+
         14:C6CE  88         			dey
         14:C6CF             	!:
 4483                        		__st.wmq	_camera_pos_y_backup
         14:C6CF  8D DB 24   			sta.l	_camera_pos_y_backup
         14:C6D2  8C DC 24   			sty.h	_camera_pos_y_backup
 4484                        	
 4485                        		.dbg	line,	"include\routines_LEVELS.c", 406; sequence_loaded = FALSE;
 4486                        		__st.umiq	0, _sequence_loaded
         14:C6D5  9C 12 23   			stz	_sequence_loaded
 4487                        	
 4488                        		.dbg	line,	"include\routines_LEVELS.c", 407; sequence_id = SEQUENCE_SHOP;
 4489                        		__st.umiq	4, _sequence_id
         14:C6D8  A9 04      			lda.l	#4
         14:C6DA  8D 11 23   			sta	_sequence_id
 4490                        	
 4491                        		.dbg	line,	"include\routines_LEVELS.c", 408; break;
 4492                        		__bra		.LL87
         14:C6DD  4C EB C5   			bra	.LL87
 4493                        	
 4494                        		.dbg	line,	"include\routines_LEVELS.c", 409; }
 4495    14:C6E0             	.LL86:
 4496                        		__switch_r.ur	0, 1
         14:C6E0  C9 02      			cmp	#(1 - 0) + 1
         14:C6E2  90 02      			bcc	!found+
         14:C6E4  A9 02      	!default:	lda	#(1 - 0) + 1
         14:C6E6  0A         	!found:		asl	a
         14:C6E7  AA         			tax
         14:C6E8  7C EB C6   			jmp	[!table+, x]
 4497                        	
 4498    14:C6EB  96 C6      	!table:		dw	.LL88, .LL89
         14:C6ED  99 C6       
 4499    14:C6EF  EB C5      			dw	.LL87
 4500    14:C6F1             	.LL87	.alias		.LL80
 4501                        	
 4502                        		.dbg	line,	"include\routines_LEVELS.c", 410; }
 4503                        	
 4504                        		.dbg	line,	"include\routines_LEVELS.c", 411; }
 4505    14:C6F1             	.LL85	.alias		.LL80
 4506                        	
 4507                        		.dbg	line,	"include\routines_LEVELS.c", 412; }
 4508    14:C6F1             	.LL84	.alias		.LL80
 4509                        	
 4510                        		.dbg	line,	"include\routines_LEVELS.c", 413; }
 4511    14:C6F1             	.LL83	.alias		.LL80
 4512                        		__bra		.LL80
         14:C6F1  4C EB C5   			bra	.LL80
 4513    14:C6F4             	.LL82:
 4514                        	
 4515                        		.dbg	line,	"include\routines_LEVELS.c", 414; }
 4516                        	
 4517                        		.dbg	line,	"include\routines_LEVELS.c", 415; }
 4518    14:C6F4             	.LL77:
 4519                        	
 4520                        		.dbg	line,	"include\routines_LEVELS.c", 416; }
 4521    14:C6F4             	.LL76:
 4522    14:C6F4             	.LL75:
 4523                        		__return	0
         14:C6F4  4C EF FF   			jmp	leave_proc
 4524                        		.dbg	clear
 4525                        		.endp
 4526                        		.pceas
 4527                        	
 4528                        		.dbg	line,	"include\routines_LEVELS.c", 422; void scroll_BG()
 4529                        		.dbg	line,	"include\routines_LEVELS.c", 423; {
 4530                        	;***********************
 4531                        	;***********************
 4532                        	
 4533                        		.hucc
 4534    14:D24B             		.proc		_scroll_BG
 4535                        		__enter		_scroll_BG
 4536                        	
 4537                        		.dbg	line,	"include\routines_LEVELS.c", 424; // UPDATE VDC2 BG //
 4538                        	
 4539                        		.dbg	line,	"include\routines_LEVELS.c", 425; sgx_scroll_map();
 4540                        		__call		_sgx_scroll_map
         14:D24B  20 81 FF   			call	_sgx_scroll_map
 4541                        	
 4542                        		.dbg	line,	"include\routines_LEVELS.c", 427; //--------------------------------------------------------------------------------------//
 4543                        	
 4544                        		.dbg	line,	"include\routines_LEVELS.c", 428; //                                        VDC 2                                         //
 4545                        	
 4546                        		.dbg	line,	"include\routines_LEVELS.c", 429; //--------------------------------------------------------------------------------------//
 4547                        	
 4548                        		.dbg	line,	"include\routines_LEVELS.c", 431; sgx_scroll_split(0,   0, sgx_map_pxl_x & (BAT_SIZE_W - 1), sgx_map_pxl_y & (BAT_SIZE_H - 1), BKG_ON | SPR_ON);
 4549                        		__st.umiq	0, _al
         14:D24E  64 F8      			stz	_al
 4550                        		__st.umiq	0, _ah
         14:D250  64 F9      			stz	_ah
 4551                        		__ld.wm		_sgx_map_pxl_x
         14:D252  AD 8F 26   			lda.l	_sgx_map_pxl_x
         14:D255  AC 90 26   			ldy.h	_sgx_map_pxl_x
 4552                        		__and.wi	2047
         14:D258  29 FF      			and.l	#2047
         14:D25A  42         			say
         14:D25B  29 07      			and.h	#2047
         14:D25D  42         			say
 4553                        		__st.wmq	_bx
         14:D25E  85 FA      			sta.l	_bx
         14:D260  84 FB      			sty.h	_bx
 4554                        		__ld.wm		_sgx_map_pxl_y
         14:D262  AD 91 26   			lda.l	_sgx_map_pxl_y
         14:D265  AC 92 26   			ldy.h	_sgx_map_pxl_y
 4555                        		__and.wi	255
         14:D268  29 FF      			and	#255
         14:D26A  C2         			cly
 4556                        		__st.wmq	_cx
         14:D26B  85 FC      			sta.l	_cx
         14:D26D  84 FD      			sty.h	_cx
 4557                        		__st.umiq	192, _dl
         14:D26F  A9 C0      			lda.l	#192
         14:D271  85 FE      			sta	_dl
 4558                        		__call		_sgx_scroll_split.5
         14:D273  20 77 FF   			call	_sgx_scroll_split.5
 4559                        	
 4560                        		.dbg	line,	"include\routines_LEVELS.c", 432; }
 4561    14:D276             	.LL90:
 4562                        		__return	0
         14:D276  4C EF FF   			jmp	leave_proc
 4563                        		.dbg	clear
 4564                        		.endp
 4565                        		.pceas
 4566                        	
 4567                        		.dbg	line,	"include\routines_LEVELS.c", 435; void recenter_CAMERA()
 4568                        		.dbg	line,	"include\routines_LEVELS.c", 436; {
 4569                        	;***********************
 4570                        	;***********************
 4571                        	
 4572                        		.hucc
 4573    14:C835             		.proc		_recenter_CAMERA
 4574                        		__enter		_recenter_CAMERA
 4575                        	
 4576                        		.dbg	line,	"include\routines_LEVELS.c", 437; signed char camera_y_move;
 4577                        	
 4578                        		.dbg	line,	"include\routines_LEVELS.c", 439; spr_set(player_id);
 4579                        		__ld.umq	_player_id
         14:C835  AD 15 23   			lda	_player_id
 4580                        		__call		_spr_set.1
         14:C838  20 DD E7   			call	_spr_set.1
 4581                        	
 4582                        		.dbg	line,	"include\routines_LEVELS.c", 442; if(player_pos_y < 128)
 4583                        		__ld.wm		_player_pos_y
         14:C83B  AD D5 24   			lda.l	_player_pos_y
         14:C83E  AC D6 24   			ldy.h	_player_pos_y
 4584                        		__slt_w.wi	128
         14:C841  C9 80      			cmp.l	#128		; Subtract integer from Y:A.
         14:C843  98         			tya
         14:C844  E9 00      			sbc.h	#128
         14:C846  50 02      			bvc	!+
         14:C848  49 80      			eor	#$80		; -ve if Y:A < integer (signed).
         14:C84A  0A         	!:		asl	a
 4585                        		__bfalse	.LL92
         14:C84B  90 70      			bcc	.LL92
 4586                        	
 4587                        		.dbg	line,	"include\routines_LEVELS.c", 443; {
 4588                        	
 4589                        		.dbg	line,	"include\routines_LEVELS.c", 444; player_pos_y += CAMERA_RECENTER_VELOCITY;
 4590                        		__add_st.wmiq	4, _player_pos_y
         14:C84D  18         			clc
         14:C84E  AD D5 24   			lda.l	_player_pos_y
         14:C851  69 04      			adc.l	#4
         14:C853  8D D5 24   			sta.l	_player_pos_y
         14:C856  90 03      			bcc	!+
         14:C858  EE D6 24   			inc.h	_player_pos_y
         14:C85B             	!:
 4591                        	
 4592                        		.dbg	line,	"include\routines_LEVELS.c", 446; if(player_pos_y > 128)
 4593                        		__ld.wm		_player_pos_y
         14:C85B  AD D5 24   			lda.l	_player_pos_y
         14:C85E  AC D6 24   			ldy.h	_player_pos_y
 4594                        		__sgt_w.wi	128
         14:C861  18         			clc			; Subtract integer+1 from Y:A.
         14:C862  E9 80      			sbc.l	#128
         14:C864  98         			tya
         14:C865  E9 00      			sbc.h	#128
         14:C867  50 02      			bvc	!+
         14:C869  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         14:C86B  49 80      	!:		eor	#$80
         14:C86D  0A         			asl	a
 4595                        		__bfalse	.LL93
         14:C86E  90 24      			bcc	.LL93
 4596                        	
 4597                        		.dbg	line,	"include\routines_LEVELS.c", 447; {
 4598                        	
 4599                        		.dbg	line,	"include\routines_LEVELS.c", 448; camera_y_move = CAMERA_RECENTER_VELOCITY - (player_pos_y - 128);
 4600                        		__ld.wm		_player_pos_y
         14:C870  AD D5 24   			lda.l	_player_pos_y
         14:C873  AC D6 24   			ldy.h	_player_pos_y
 4601                        		__sub.wi	128
         14:C876  38         			sec
         14:C877  E9 80      			sbc.l	#128
         14:C879  B0 01      			bcs	!+
         14:C87B  88         			dey
         14:C87C             	!:
 4602                        		__isub.wi	4
         14:C87C  38         			sec
         14:C87D  49 FF      			eor	#$FF
         14:C87F  69 04      			adc.l	#4
         14:C881  42         			say
         14:C882  49 FF      			eor	#$FF
         14:C884  69 00      			adc.h	#4
         14:C886  42         			say
 4603                        		__st.umq	__recenter_CAMERA_end - 1  /* camera_y_move */
         14:C887  8D 4A 26   			sta	__recenter_CAMERA_end - 1
 4604                        	
 4605                        		.dbg	line,	"include\routines_LEVELS.c", 450; player_pos_y = 128;
 4606                        		__st.wmiq	128, _player_pos_y
         14:C88A  A9 80      			lda.l	#128
         14:C88C  8D D5 24   			sta.l	_player_pos_y
         14:C88F  9C D6 24   			stz.h	_player_pos_y
 4607                        	
 4608                        		.dbg	line,	"include\routines_LEVELS.c", 451; }
 4609                        	
 4610                        		.dbg	line,	"include\routines_LEVELS.c", 453; else
 4611                        		__bra		.LL94
         14:C892  80 05      			bra	.LL94
 4612    14:C894             	.LL93:
 4613                        	
 4614                        		.dbg	line,	"include\routines_LEVELS.c", 454; {
 4615                        	
 4616                        		.dbg	line,	"include\routines_LEVELS.c", 455; camera_y_move = CAMERA_RECENTER_VELOCITY;
 4617                        		__st.umiq	4, __recenter_CAMERA_end - 1  /* camera_y_move */
         14:C894  A9 04      			lda.l	#4
         14:C896  8D 4A 26   			sta	__recenter_CAMERA_end - 1
 4618                        	
 4619                        		.dbg	line,	"include\routines_LEVELS.c", 456; }
 4620    14:C899             	.LL94:
 4621                        	
 4622                        		.dbg	line,	"include\routines_LEVELS.c", 458; spr_y(player_pos_y);
 4623                        		__ld.wm		_player_pos_y
         14:C899  AD D5 24   			lda.l	_player_pos_y
         14:C89C  AC D6 24   			ldy.h	_player_pos_y
 4624                        		__call		_spr_y.1
         14:C89F  20 19 E8   			call	_spr_y.1
 4625                        	
 4626                        		.dbg	line,	"include\routines_LEVELS.c", 460; sgx_map_pxl_y -= camera_y_move;
 4627                        		__ld.bm		__recenter_CAMERA_end - 1  /* camera_y_move */
         14:C8A2  AD 4A 26   			lda	__recenter_CAMERA_end - 1
         14:C8A5  C2         			cly
         14:C8A6  10 01      			bpl	!+
         14:C8A8  88         			dey
         14:C8A9             	!:
 4628                        		__isub_st.wmq	_sgx_map_pxl_y
         14:C8A9  38         			sec
         14:C8AA  49 FF      			eor	#$FF
         14:C8AC  6D 91 26   			adc.l	_sgx_map_pxl_y
         14:C8AF  8D 91 26   			sta.l	_sgx_map_pxl_y
         14:C8B2  98         			tya
         14:C8B3  49 FF      			eor	#$FF
         14:C8B5  6D 92 26   			adc.h	_sgx_map_pxl_y
         14:C8B8  8D 92 26   			sta.h	_sgx_map_pxl_y
 4629                        	
 4630                        		.dbg	line,	"include\routines_LEVELS.c", 461; }
 4631                        	
 4632                        		.dbg	line,	"include\routines_LEVELS.c", 464; else if(player_pos_y > 128)
 4633                        		__bra		.LL95
         14:C8BB  80 7C      			bra	.LL95
 4634    14:C8BD             	.LL92:
 4635                        		__ld.wm		_player_pos_y
         14:C8BD  AD D5 24   			lda.l	_player_pos_y
         14:C8C0  AC D6 24   			ldy.h	_player_pos_y
 4636                        		__sgt_w.wi	128
         14:C8C3  18         			clc			; Subtract integer+1 from Y:A.
         14:C8C4  E9 80      			sbc.l	#128
         14:C8C6  98         			tya
         14:C8C7  E9 00      			sbc.h	#128
         14:C8C9  50 02      			bvc	!+
         14:C8CB  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         14:C8CD  49 80      	!:		eor	#$80
         14:C8CF  0A         			asl	a
 4637                        		__bfalse	.LL96
         14:C8D0  90 67      			bcc	.LL96
 4638                        	
 4639                        		.dbg	line,	"include\routines_LEVELS.c", 465; {
 4640                        	
 4641                        		.dbg	line,	"include\routines_LEVELS.c", 466; player_pos_y -= CAMERA_RECENTER_VELOCITY;
 4642                        		__sub_st.wmiq	4, _player_pos_y
         14:C8D2  38         			sec
         14:C8D3  AD D5 24   			lda.l	_player_pos_y
         14:C8D6  E9 04      			sbc.l	#4
         14:C8D8  8D D5 24   			sta.l	_player_pos_y
         14:C8DB  B0 03      			bcs	!+
         14:C8DD  CE D6 24   			dec.h	_player_pos_y
         14:C8E0             	!:
 4643                        	
 4644                        		.dbg	line,	"include\routines_LEVELS.c", 468; if(player_pos_y < 128)
 4645                        		__ld.wm		_player_pos_y
         14:C8E0  AD D5 24   			lda.l	_player_pos_y
         14:C8E3  AC D6 24   			ldy.h	_player_pos_y
 4646                        		__slt_w.wi	128
         14:C8E6  C9 80      			cmp.l	#128		; Subtract integer from Y:A.
         14:C8E8  98         			tya
         14:C8E9  E9 00      			sbc.h	#128
         14:C8EB  50 02      			bvc	!+
         14:C8ED  49 80      			eor	#$80		; -ve if Y:A < integer (signed).
         14:C8EF  0A         	!:		asl	a
 4647                        		__bfalse	.LL97
         14:C8F0  90 24      			bcc	.LL97
 4648                        	
 4649                        		.dbg	line,	"include\routines_LEVELS.c", 469; {
 4650                        	
 4651                        		.dbg	line,	"include\routines_LEVELS.c", 470; camera_y_move = CAMERA_RECENTER_VELOCITY - (128 - player_pos_y);
 4652                        		__ld.wi		128
         14:C8F2  A9 80      			lda.l	#128
         14:C8F4  C2         			cly
 4653                        		__sub.wm	_player_pos_y
         14:C8F5  38         			sec
         14:C8F6  ED D5 24   			sbc.l	_player_pos_y
         14:C8F9  42         			say
         14:C8FA  ED D6 24   			sbc.h	_player_pos_y
         14:C8FD  42         			say
 4654                        		__isub.wi	4
         14:C8FE  38         			sec
         14:C8FF  49 FF      			eor	#$FF
         14:C901  69 04      			adc.l	#4
         14:C903  42         			say
         14:C904  49 FF      			eor	#$FF
         14:C906  69 00      			adc.h	#4
         14:C908  42         			say
 4655                        		__st.umq	__recenter_CAMERA_end - 1  /* camera_y_move */
         14:C909  8D 4A 26   			sta	__recenter_CAMERA_end - 1
 4656                        	
 4657                        		.dbg	line,	"include\routines_LEVELS.c", 472; player_pos_y = 128;
 4658                        		__st.wmiq	128, _player_pos_y
         14:C90C  A9 80      			lda.l	#128
         14:C90E  8D D5 24   			sta.l	_player_pos_y
         14:C911  9C D6 24   			stz.h	_player_pos_y
 4659                        	
 4660                        		.dbg	line,	"include\routines_LEVELS.c", 473; }
 4661                        	
 4662                        		.dbg	line,	"include\routines_LEVELS.c", 475; else
 4663                        		__bra		.LL98
         14:C914  80 05      			bra	.LL98
 4664    14:C916             	.LL97:
 4665                        	
 4666                        		.dbg	line,	"include\routines_LEVELS.c", 476; {
 4667                        	
 4668                        		.dbg	line,	"include\routines_LEVELS.c", 477; camera_y_move = CAMERA_RECENTER_VELOCITY;
 4669                        		__st.umiq	4, __recenter_CAMERA_end - 1  /* camera_y_move */
         14:C916  A9 04      			lda.l	#4
         14:C918  8D 4A 26   			sta	__recenter_CAMERA_end - 1
 4670                        	
 4671                        		.dbg	line,	"include\routines_LEVELS.c", 478; }
 4672    14:C91B             	.LL98:
 4673                        	
 4674                        		.dbg	line,	"include\routines_LEVELS.c", 480; spr_y(player_pos_y);
 4675                        		__ld.wm		_player_pos_y
         14:C91B  AD D5 24   			lda.l	_player_pos_y
         14:C91E  AC D6 24   			ldy.h	_player_pos_y
 4676                        		__call		_spr_y.1
         14:C921  20 19 E8   			call	_spr_y.1
 4677                        	
 4678                        		.dbg	line,	"include\routines_LEVELS.c", 482; sgx_map_pxl_y += camera_y_move;
 4679                        		__ld.bm		__recenter_CAMERA_end - 1  /* camera_y_move */
         14:C924  AD 4A 26   			lda	__recenter_CAMERA_end - 1
         14:C927  C2         			cly
         14:C928  10 01      			bpl	!+
         14:C92A  88         			dey
         14:C92B             	!:
 4680                        		__add_st.wmq	_sgx_map_pxl_y
         14:C92B  18         			clc
         14:C92C  6D 91 26   			adc.l	_sgx_map_pxl_y
         14:C92F  8D 91 26   			sta.l	_sgx_map_pxl_y
         14:C932  98         			tya
         14:C933  6D 92 26   			adc.h	_sgx_map_pxl_y
         14:C936  8D 92 26   			sta.h	_sgx_map_pxl_y
 4681                        	
 4682                        		.dbg	line,	"include\routines_LEVELS.c", 483; }
 4683                        	
 4684                        		.dbg	line,	"include\routines_LEVELS.c", 484; }
 4685    14:C939             	.LL96:
 4686    14:C939             	.LL95:
 4687    14:C939             	.LL91:
 4688                        		__return	0
         14:C939  4C EF FF   			jmp	leave_proc
 4689                        		.dbg	clear
 4690                        		.endp
 4691                        		.pceas
 4692                        	
 4693                        		.dbg	line,	"include\routines_LEVELS.c", 493; void joypad_BUTTONS()
 4694                        		.dbg	line,	"include\routines_LEVELS.c", 494; {
 4695                        	;***********************
 4696                        	;***********************
 4697                        	
 4698                        		.hucc
 4699    02:DDD7             		.proc		_joypad_BUTTONS
 4700                        		__enter		_joypad_BUTTONS
 4701                        	
 4702                        		.dbg	line,	"include\routines_LEVELS.c", 495; // JUMP //
 4703                        	
 4704                        		.dbg	line,	"include\routines_LEVELS.c", 496; if(joytrg(JOYPAD_1) == JOY_I)
 4705                        		__ld.uiq	0
         02:DDD7  62         			cla
 4706                        		 _joytrg.1
         02:DDD8  AA         			tax
         02:DDD9  BD 2D 22   			lda	joytrg, x
         02:DDDC  BC DD 22   			ldy	joy6trg, x
 4707                        		__equ_w.wi	1
         02:DDDF  C9 01      			cmp.l	#1
         02:DDE1  D0 04      			bne	!false+
         02:DDE3  C0 00      			cpy.h	#1
         02:DDE5  F0 01      			beq	!+
         02:DDE7  18         	!false:		clc
         02:DDE8             	!:
 4708                        		__bfalse	.LL100
         02:DDE8  B0 03 4C 7D			bcc	.LL100
         02:DDEC  DF          
 4709                        	
 4710                        		.dbg	line,	"include\routines_LEVELS.c", 497; {
 4711                        	
 4712                        		.dbg	line,	"include\routines_LEVELS.c", 498; if(player_state == STATE_IDLE)
 4713                        		__not.um	_player_state
         02:DDED  AD 16 23   			lda	_player_state
         02:DDF0  18         			clc
         02:DDF1  D0 01      			bne	!+
         02:DDF3  38         			sec
         02:DDF4             	!:
 4714                        		__bfalse	.LL101
         02:DDF4  90 3B      			bcc	.LL101
 4715                        	
 4716                        		.dbg	line,	"include\routines_LEVELS.c", 499; {
 4717                        	
 4718                        		.dbg	line,	"include\routines_LEVELS.c", 500; player_counter_anim = 0;
 4719                        		__st.umiq	0, _player_counter_anim
         02:DDF6  9C 19 23   			stz	_player_counter_anim
 4720                        	
 4721                        		.dbg	line,	"include\routines_LEVELS.c", 502; player_state = STATE_JUMP;
 4722                        		__st.umiq	4, _player_state
         02:DDF9  A9 04      			lda.l	#4
         02:DDFB  8D 16 23   			sta	_player_state
 4723                        	
 4724                        		.dbg	line,	"include\routines_LEVELS.c", 504; spr_set(weapon_id);
 4725                        		__ld.umq	_weapon_id
         02:DDFE  AD 23 23   			lda	_weapon_id
 4726                        		__call		_spr_set.1
         02:DE01  20 DD E7   			call	_spr_set.1
 4727                        	
 4728                        		.dbg	line,	"include\routines_LEVELS.c", 505; 
 4729                        	
 4730                        		.dbg	line,	"include\routines_LEVELS.c", 506; if(player_axis == AXIS_RIGHT)
 4731                        		__not.um	_player_axis
         02:DE04  AD 17 23   			lda	_player_axis
         02:DE07  18         			clc
         02:DE08  D0 01      			bne	!+
         02:DE0A  38         			sec
         02:DE0B             	!:
 4732                        		__bfalse	.LL102
         02:DE0B  90 12      			bcc	.LL102
 4733                        	
 4734                        		.dbg	line,	"include\routines_LEVELS.c", 507; {
 4735                        	
 4736                        		.dbg	line,	"include\routines_LEVELS.c", 508; spr_x(player_pos_x-5);
 4737                        		__ld.wm		_player_pos_x
         02:DE0D  AD D3 24   			lda.l	_player_pos_x
         02:DE10  AC D4 24   			ldy.h	_player_pos_x
 4738                        		__sub.wi	5
         02:DE13  38         			sec
         02:DE14  E9 05      			sbc.l	#5
         02:DE16  B0 01      			bcs	!+
         02:DE18  88         			dey
         02:DE19             	!:
 4739                        		__call		_spr_x.1
         02:DE19  20 0A E8   			call	_spr_x.1
 4740                        	
 4741                        		.dbg	line,	"include\routines_LEVELS.c", 509; }
 4742                        	
 4743                        		.dbg	line,	"include\routines_LEVELS.c", 511; else
 4744                        		__bra		.LL103
         02:DE1C  4C BF DF   			bra	.LL103
 4745    02:DE1F             	.LL102:
 4746                        	
 4747                        		.dbg	line,	"include\routines_LEVELS.c", 512; {
 4748                        	
 4749                        		.dbg	line,	"include\routines_LEVELS.c", 513; spr_x(player_pos_x+21);
 4750                        		__ld.wm		_player_pos_x
         02:DE1F  AD D3 24   			lda.l	_player_pos_x
         02:DE22  AC D4 24   			ldy.h	_player_pos_x
 4751                        		__add.wi	21
         02:DE25  18         			clc
         02:DE26  69 15      			adc.l	#21
         02:DE28  90 01      			bcc	!+
         02:DE2A  C8         			iny
         02:DE2B             	!:
 4752                        		__call		_spr_x.1
         02:DE2B  20 0A E8   			call	_spr_x.1
 4753                        	
 4754                        		.dbg	line,	"include\routines_LEVELS.c", 514; }
 4755    02:DE2E             	.LL103	.alias		.LL104
 4756                        	
 4757                        		.dbg	line,	"include\routines_LEVELS.c", 515; }
 4758                        	
 4759                        		.dbg	line,	"include\routines_LEVELS.c", 518; else if(player_state == STATE_WALK)
 4760                        		__bra		.LL104
         02:DE2E  4C BF DF   			bra	.LL104
 4761    02:DE31             	.LL101:
 4762                        		__ld.umq	_player_state
         02:DE31  AD 16 23   			lda	_player_state
 4763                        		__equ_b.uiq	1
         02:DE34  C9 01      			cmp	#1
         02:DE36  F0 01      			beq	!+
         02:DE38  18         			clc
         02:DE39             	!:
 4764                        		__bfalse	.LL105
         02:DE39  90 43      			bcc	.LL105
 4765                        	
 4766                        		.dbg	line,	"include\routines_LEVELS.c", 519; {
 4767                        	
 4768                        		.dbg	line,	"include\routines_LEVELS.c", 520; player_counter_anim = 0;
 4769                        		__st.umiq	0, _player_counter_anim
         02:DE3B  9C 19 23   			stz	_player_counter_anim
 4770                        	
 4771                        		.dbg	line,	"include\routines_LEVELS.c", 522; player_state = STATE_JUMP_RIGHT + player_axis;
 4772                        		__ld.wi		5
         02:DE3E  A9 05      			lda.l	#5
         02:DE40  C2         			cly
 4773                        		__add.um	_player_axis
         02:DE41  18         			clc
         02:DE42  6D 17 23   			adc	_player_axis
         02:DE45  90 01      			bcc	!+
         02:DE47  C8         			iny
         02:DE48             	!:
 4774                        		__st.umq	_player_state
         02:DE48  8D 16 23   			sta	_player_state
 4775                        	
 4776                        		.dbg	line,	"include\routines_LEVELS.c", 524; spr_set(weapon_id);
 4777                        		__ld.umq	_weapon_id
         02:DE4B  AD 23 23   			lda	_weapon_id
 4778                        		__call		_spr_set.1
         02:DE4E  20 DD E7   			call	_spr_set.1
 4779                        	
 4780                        		.dbg	line,	"include\routines_LEVELS.c", 525; 
 4781                        	
 4782                        		.dbg	line,	"include\routines_LEVELS.c", 526; if(player_axis == AXIS_RIGHT)
 4783                        		__not.um	_player_axis
         02:DE51  AD 17 23   			lda	_player_axis
         02:DE54  18         			clc
         02:DE55  D0 01      			bne	!+
         02:DE57  38         			sec
         02:DE58             	!:
 4784                        		__bfalse	.LL106
         02:DE58  90 12      			bcc	.LL106
 4785                        	
 4786                        		.dbg	line,	"include\routines_LEVELS.c", 527; {
 4787                        	
 4788                        		.dbg	line,	"include\routines_LEVELS.c", 528; spr_x(player_pos_x-5);
 4789                        		__ld.wm		_player_pos_x
         02:DE5A  AD D3 24   			lda.l	_player_pos_x
         02:DE5D  AC D4 24   			ldy.h	_player_pos_x
 4790                        		__sub.wi	5
         02:DE60  38         			sec
         02:DE61  E9 05      			sbc.l	#5
         02:DE63  B0 01      			bcs	!+
         02:DE65  88         			dey
         02:DE66             	!:
 4791                        		__call		_spr_x.1
         02:DE66  20 0A E8   			call	_spr_x.1
 4792                        	
 4793                        		.dbg	line,	"include\routines_LEVELS.c", 529; }
 4794                        	
 4795                        		.dbg	line,	"include\routines_LEVELS.c", 531; else
 4796                        		__bra		.LL107
         02:DE69  4C BF DF   			bra	.LL107
 4797    02:DE6C             	.LL106:
 4798                        	
 4799                        		.dbg	line,	"include\routines_LEVELS.c", 532; {
 4800                        	
 4801                        		.dbg	line,	"include\routines_LEVELS.c", 533; spr_x(player_pos_x+21);
 4802                        		__ld.wm		_player_pos_x
         02:DE6C  AD D3 24   			lda.l	_player_pos_x
         02:DE6F  AC D4 24   			ldy.h	_player_pos_x
 4803                        		__add.wi	21
         02:DE72  18         			clc
         02:DE73  69 15      			adc.l	#21
         02:DE75  90 01      			bcc	!+
         02:DE77  C8         			iny
         02:DE78             	!:
 4804                        		__call		_spr_x.1
         02:DE78  20 0A E8   			call	_spr_x.1
 4805                        	
 4806                        		.dbg	line,	"include\routines_LEVELS.c", 534; }
 4807    02:DE7B             	.LL107	.alias		.LL108
 4808                        	
 4809                        		.dbg	line,	"include\routines_LEVELS.c", 535; }
 4810                        	
 4811                        		.dbg	line,	"include\routines_LEVELS.c", 538; else if(player_state == STATE_HANG || player_state == STATE_CLIMB_UP || player_state == STATE_CLIMB_DOWN)
 4812                        		__bra		.LL108
         02:DE7B  4C BF DF   			bra	.LL108
 4813    02:DE7E             	.LL105:
 4814                        		__ld.umq	_player_state
         02:DE7E  AD 16 23   			lda	_player_state
 4815                        		__equ_b.uiq	10
         02:DE81  C9 0A      			cmp	#10
         02:DE83  F0 01      			beq	!+
         02:DE85  18         			clc
         02:DE86             	!:
 4816                        		__btrue		.LL110
         02:DE86  B0 08      			bcs	.LL110
 4817                        		__ld.umq	_player_state
         02:DE88  AD 16 23   			lda	_player_state
 4818                        		__equ_b.uiq	11
         02:DE8B  C9 0B      			cmp	#11
         02:DE8D  F0 01      			beq	!+
         02:DE8F  18         			clc
         02:DE90             	!:
 4819    02:DE90             	.LL110:
 4820                        		__btrue		.LL111
         02:DE90  B0 08      			bcs	.LL111
 4821                        		__ld.umq	_player_state
         02:DE92  AD 16 23   			lda	_player_state
 4822                        		__equ_b.uiq	12
         02:DE95  C9 0C      			cmp	#12
         02:DE97  F0 01      			beq	!+
         02:DE99  18         			clc
         02:DE9A             	!:
 4823    02:DE9A             	.LL111:
 4824                        		__bfalse	.LL109
         02:DE9A  B0 03 4C BF			bcc	.LL109
         02:DE9E  DF          
 4825                        	
 4826                        		.dbg	line,	"include\routines_LEVELS.c", 539; {
 4827                        	
 4828                        		.dbg	line,	"include\routines_LEVELS.c", 540; if(joy(JOYPAD_1) & JOY_RIGHT)
 4829                        		__ld.uiq	0
         02:DE9F  62         			cla
 4830                        		 _joy.1
         02:DEA0  AA         			tax
         02:DEA1  BD 28 22   			lda	joynow, x
         02:DEA4  BC D3 22   			ldy	joy6now, x
 4831                        		__tand.wi	32
         02:DEA7  29 20      			and	#32
         02:DEA9  C9 01      	!:		cmp	#1
 4832                        		__bfalse	.LL112
         02:DEAB  90 20      			bcc	.LL112
 4833                        	
 4834                        		.dbg	line,	"include\routines_LEVELS.c", 541; {
 4835                        	
 4836                        		.dbg	line,	"include\routines_LEVELS.c", 542; player_counter_anim = 0;
 4837                        		__st.umiq	0, _player_counter_anim
         02:DEAD  9C 19 23   			stz	_player_counter_anim
 4838                        	
 4839                        		.dbg	line,	"include\routines_LEVELS.c", 544; player_state = STATE_JUMP_RIGHT;
 4840                        		__st.umiq	5, _player_state
         02:DEB0  A9 05      			lda.l	#5
         02:DEB2  8D 16 23   			sta	_player_state
 4841                        	
 4842                        		.dbg	line,	"include\routines_LEVELS.c", 546; spr_set(weapon_id);
 4843                        		__ld.umq	_weapon_id
         02:DEB5  AD 23 23   			lda	_weapon_id
 4844                        		__call		_spr_set.1
         02:DEB8  20 DD E7   			call	_spr_set.1
 4845                        	
 4846                        		.dbg	line,	"include\routines_LEVELS.c", 547; spr_x(player_pos_x-5);
 4847                        		__ld.wm		_player_pos_x
         02:DEBB  AD D3 24   			lda.l	_player_pos_x
         02:DEBE  AC D4 24   			ldy.h	_player_pos_x
 4848                        		__sub.wi	5
         02:DEC1  38         			sec
         02:DEC2  E9 05      			sbc.l	#5
         02:DEC4  B0 01      			bcs	!+
         02:DEC6  88         			dey
         02:DEC7             	!:
 4849                        		__call		_spr_x.1
         02:DEC7  20 0A E8   			call	_spr_x.1
 4850                        	
 4851                        		.dbg	line,	"include\routines_LEVELS.c", 548; }
 4852                        	
 4853                        		.dbg	line,	"include\routines_LEVELS.c", 550; else if(joy(JOYPAD_1) & JOY_LEFT)
 4854                        		__bra		.LL113
         02:DECA  4C BF DF   			bra	.LL113
 4855    02:DECD             	.LL112:
 4856                        		__ld.uiq	0
         02:DECD  62         			cla
 4857                        		 _joy.1
         02:DECE  AA         			tax
         02:DECF  BD 28 22   			lda	joynow, x
         02:DED2  BC D3 22   			ldy	joy6now, x
 4858                        		__tand.wi	128
         02:DED5  29 80      			and	#128
         02:DED7  C9 01      	!:		cmp	#1
 4859                        		__bfalse	.LL114
         02:DED9  90 20      			bcc	.LL114
 4860                        	
 4861                        		.dbg	line,	"include\routines_LEVELS.c", 551; {
 4862                        	
 4863                        		.dbg	line,	"include\routines_LEVELS.c", 552; player_counter_anim = 0;
 4864                        		__st.umiq	0, _player_counter_anim
         02:DEDB  9C 19 23   			stz	_player_counter_anim
 4865                        	
 4866                        		.dbg	line,	"include\routines_LEVELS.c", 554; player_state = STATE_JUMP_LEFT;
 4867                        		__st.umiq	6, _player_state
         02:DEDE  A9 06      			lda.l	#6
         02:DEE0  8D 16 23   			sta	_player_state
 4868                        	
 4869                        		.dbg	line,	"include\routines_LEVELS.c", 556; spr_set(weapon_id);
 4870                        		__ld.umq	_weapon_id
         02:DEE3  AD 23 23   			lda	_weapon_id
 4871                        		__call		_spr_set.1
         02:DEE6  20 DD E7   			call	_spr_set.1
 4872                        	
 4873                        		.dbg	line,	"include\routines_LEVELS.c", 557; spr_x(player_pos_x+21);
 4874                        		__ld.wm		_player_pos_x
         02:DEE9  AD D3 24   			lda.l	_player_pos_x
         02:DEEC  AC D4 24   			ldy.h	_player_pos_x
 4875                        		__add.wi	21
         02:DEEF  18         			clc
         02:DEF0  69 15      			adc.l	#21
         02:DEF2  90 01      			bcc	!+
         02:DEF4  C8         			iny
         02:DEF5             	!:
 4876                        		__call		_spr_x.1
         02:DEF5  20 0A E8   			call	_spr_x.1
 4877                        	
 4878                        		.dbg	line,	"include\routines_LEVELS.c", 558; }
 4879                        	
 4880                        		.dbg	line,	"include\routines_LEVELS.c", 560; else if(joy(JOYPAD_1) & JOY_UP)
 4881                        		__bra		.LL115
         02:DEF8  4C BF DF   			bra	.LL115
 4882    02:DEFB             	.LL114:
 4883                        		__ld.uiq	0
         02:DEFB  62         			cla
 4884                        		 _joy.1
         02:DEFC  AA         			tax
         02:DEFD  BD 28 22   			lda	joynow, x
         02:DF00  BC D3 22   			ldy	joy6now, x
 4885                        		__tand.wi	16
         02:DF03  29 10      			and	#16
         02:DF05  C9 01      	!:		cmp	#1
 4886                        		__bfalse	.LL116
         02:DF07  B0 03 4C BF			bcc	.LL116
         02:DF0B  DF          
 4887                        	
 4888                        		.dbg	line,	"include\routines_LEVELS.c", 561; {
 4889                        	
 4890                        		.dbg	line,	"include\routines_LEVELS.c", 562; player_counter_anim = 0;
 4891                        		__st.umiq	0, _player_counter_anim
         02:DF0C  9C 19 23   			stz	_player_counter_anim
 4892                        	
 4893                        		.dbg	line,	"include\routines_LEVELS.c", 564; check_BG( 15 , 8 );
 4894                        		__ld.wi		15
         02:DF0F  A9 0F      			lda.l	#15
         02:DF11  C2         			cly
 4895                        		__pusharg.wr
         02:DF12  A6 8D      			ldx	<__sp
         02:DF14  CA         			dex
         02:DF15  CA         			dex
         02:DF16  95 08      			sta.l	<__stack, x
         02:DF18  94 09      			sty.h	<__stack, x
         02:DF1A  86 8D      			stx	<__sp
 4896                        		__ld.wi		8
         02:DF1C  A9 08      			lda.l	#8
         02:DF1E  C2         			cly
 4897                        		__pusharg.wr
         02:DF1F  A6 8D      			ldx	<__sp
         02:DF21  CA         			dex
         02:DF22  CA         			dex
         02:DF23  95 08      			sta.l	<__stack, x
         02:DF25  94 09      			sty.h	<__stack, x
         02:DF27  86 8D      			stx	<__sp
 4898                        		__call		_check_BG
         02:DF29  20 6D FF   			call	_check_BG
 4899                        	
 4900                        		.dbg	line,	"include\routines_LEVELS.c", 566; if(map_blk_flag == TILE_EMPTY)
 4901                        		__not.um	_map_blk_flag
         02:DF2C  AD B0 2B   			lda	_map_blk_flag
         02:DF2F  18         			clc
         02:DF30  D0 01      			bne	!+
         02:DF32  38         			sec
         02:DF33             	!:
 4902                        		__bfalse	.LL117
         02:DF33  B0 03 4C BF			bcc	.LL117
         02:DF37  DF          
 4903                        	
 4904                        		.dbg	line,	"include\routines_LEVELS.c", 567; {
 4905                        	
 4906                        		.dbg	line,	"include\routines_LEVELS.c", 568; player_state = STATE_JUMP_LADDER;
 4907                        		__st.umiq	13, _player_state
         02:DF38  A9 0D      			lda.l	#13
         02:DF3A  8D 16 23   			sta	_player_state
 4908                        	
 4909                        		.dbg	line,	"include\routines_LEVELS.c", 570; spr_set(weapon_id);
 4910                        		__ld.umq	_weapon_id
         02:DF3D  AD 23 23   			lda	_weapon_id
 4911                        		__call		_spr_set.1
         02:DF40  20 DD E7   			call	_spr_set.1
 4912                        	
 4913                        		.dbg	line,	"include\routines_LEVELS.c", 571; spr_y(player_pos_y+8);
 4914                        		__ld.wm		_player_pos_y
         02:DF43  AD D5 24   			lda.l	_player_pos_y
         02:DF46  AC D6 24   			ldy.h	_player_pos_y
 4915                        		__add.wi	8
         02:DF49  18         			clc
         02:DF4A  69 08      			adc.l	#8
         02:DF4C  90 01      			bcc	!+
         02:DF4E  C8         			iny
         02:DF4F             	!:
 4916                        		__call		_spr_y.1
         02:DF4F  20 19 E8   			call	_spr_y.1
 4917                        	
 4918                        		.dbg	line,	"include\routines_LEVELS.c", 572; 
 4919                        	
 4920                        		.dbg	line,	"include\routines_LEVELS.c", 573; if(player_axis == AXIS_RIGHT)
 4921                        		__not.um	_player_axis
         02:DF52  AD 17 23   			lda	_player_axis
         02:DF55  18         			clc
         02:DF56  D0 01      			bne	!+
         02:DF58  38         			sec
         02:DF59             	!:
 4922                        		__bfalse	.LL118
         02:DF59  90 11      			bcc	.LL118
 4923                        	
 4924                        		.dbg	line,	"include\routines_LEVELS.c", 574; {
 4925                        	
 4926                        		.dbg	line,	"include\routines_LEVELS.c", 575; spr_x(player_pos_x-5);
 4927                        		__ld.wm		_player_pos_x
         02:DF5B  AD D3 24   			lda.l	_player_pos_x
         02:DF5E  AC D4 24   			ldy.h	_player_pos_x
 4928                        		__sub.wi	5
         02:DF61  38         			sec
         02:DF62  E9 05      			sbc.l	#5
         02:DF64  B0 01      			bcs	!+
         02:DF66  88         			dey
         02:DF67             	!:
 4929                        		__call		_spr_x.1
         02:DF67  20 0A E8   			call	_spr_x.1
 4930                        	
 4931                        		.dbg	line,	"include\routines_LEVELS.c", 576; }
 4932                        	
 4933                        		.dbg	line,	"include\routines_LEVELS.c", 578; else
 4934                        		__bra		.LL119
         02:DF6A  80 53      			bra	.LL119
 4935    02:DF6C             	.LL118:
 4936                        	
 4937                        		.dbg	line,	"include\routines_LEVELS.c", 579; {
 4938                        	
 4939                        		.dbg	line,	"include\routines_LEVELS.c", 580; spr_x(player_pos_x+21);
 4940                        		__ld.wm		_player_pos_x
         02:DF6C  AD D3 24   			lda.l	_player_pos_x
         02:DF6F  AC D4 24   			ldy.h	_player_pos_x
 4941                        		__add.wi	21
         02:DF72  18         			clc
         02:DF73  69 15      			adc.l	#21
         02:DF75  90 01      			bcc	!+
         02:DF77  C8         			iny
         02:DF78             	!:
 4942                        		__call		_spr_x.1
         02:DF78  20 0A E8   			call	_spr_x.1
 4943                        	
 4944                        		.dbg	line,	"include\routines_LEVELS.c", 581; }
 4945    02:DF7B             	.LL119	.alias		.LL120
 4946                        	
 4947                        		.dbg	line,	"include\routines_LEVELS.c", 582; }
 4948                        	
 4949                        		.dbg	line,	"include\routines_LEVELS.c", 583; }
 4950    02:DF7B             	.LL117	.alias		.LL120
 4951                        	
 4952                        		.dbg	line,	"include\routines_LEVELS.c", 584; }
 4953    02:DF7B             	.LL116	.alias		.LL120
 4954    02:DF7B             	.LL115	.alias		.LL120
 4955    02:DF7B             	.LL113	.alias		.LL120
 4956                        	
 4957                        		.dbg	line,	"include\routines_LEVELS.c", 585; }
 4958    02:DF7B             	.LL109	.alias		.LL120
 4959    02:DF7B             	.LL108	.alias		.LL120
 4960    02:DF7B             	.LL104	.alias		.LL120
 4961                        	
 4962                        		.dbg	line,	"include\routines_LEVELS.c", 587; // ATTACK //
 4963                        	
 4964                        		.dbg	line,	"include\routines_LEVELS.c", 588; else if(joytrg(JOYPAD_1) == JOY_II)
 4965                        		__bra		.LL120
         02:DF7B  80 42      			bra	.LL120
 4966    02:DF7D             	.LL100:
 4967                        		__ld.uiq	0
         02:DF7D  62         			cla
 4968                        		 _joytrg.1
         02:DF7E  AA         			tax
         02:DF7F  BD 2D 22   			lda	joytrg, x
         02:DF82  BC DD 22   			ldy	joy6trg, x
 4969                        		__equ_w.wi	2
         02:DF85  C9 02      			cmp.l	#2
         02:DF87  D0 04      			bne	!false+
         02:DF89  C0 00      			cpy.h	#2
         02:DF8B  F0 01      			beq	!+
         02:DF8D  18         	!false:		clc
         02:DF8E             	!:
 4970                        		__bfalse	.LL121
         02:DF8E  90 2F      			bcc	.LL121
 4971                        	
 4972                        		.dbg	line,	"include\routines_LEVELS.c", 589; {
 4973                        	
 4974                        		.dbg	line,	"include\routines_LEVELS.c", 590; if(player_state == STATE_IDLE || player_state == STATE_WALK)
 4975                        		__not.um	_player_state
         02:DF90  AD 16 23   			lda	_player_state
         02:DF93  18         			clc
         02:DF94  D0 01      			bne	!+
         02:DF96  38         			sec
         02:DF97             	!:
 4976                        		__btrue		.LL123
         02:DF97  B0 08      			bcs	.LL123
 4977                        		__ld.umq	_player_state
         02:DF99  AD 16 23   			lda	_player_state
 4978                        		__equ_b.uiq	1
         02:DF9C  C9 01      			cmp	#1
         02:DF9E  F0 01      			beq	!+
         02:DFA0  18         			clc
         02:DFA1             	!:
 4979    02:DFA1             	.LL123:
 4980                        		__bfalse	.LL122
         02:DFA1  90 0A      			bcc	.LL122
 4981                        	
 4982                        		.dbg	line,	"include\routines_LEVELS.c", 591; {
 4983                        	
 4984                        		.dbg	line,	"include\routines_LEVELS.c", 592; player_counter_attack = 0;
 4985                        		__st.umiq	0, _player_counter_attack
         02:DFA3  9C 1C 23   			stz	_player_counter_attack
 4986                        	
 4987                        		.dbg	line,	"include\routines_LEVELS.c", 593; player_state = STATE_ATTACK;
 4988                        		__st.umiq	2, _player_state
         02:DFA6  A9 02      			lda.l	#2
         02:DFA8  8D 16 23   			sta	_player_state
 4989                        	
 4990                        		.dbg	line,	"include\routines_LEVELS.c", 594; }
 4991                        	
 4992                        		.dbg	line,	"include\routines_LEVELS.c", 596; else if(player_state == STATE_CROUCH)
 4993                        		__bra		.LL124
         02:DFAB  80 12      			bra	.LL124
 4994    02:DFAD             	.LL122:
 4995                        		__ld.umq	_player_state
         02:DFAD  AD 16 23   			lda	_player_state
 4996                        		__equ_b.uiq	7
         02:DFB0  C9 07      			cmp	#7
         02:DFB2  F0 01      			beq	!+
         02:DFB4  18         			clc
         02:DFB5             	!:
 4997                        		__bfalse	.LL125
         02:DFB5  90 08      			bcc	.LL125
 4998                        	
 4999                        		.dbg	line,	"include\routines_LEVELS.c", 597; {
 5000                        	
 5001                        		.dbg	line,	"include\routines_LEVELS.c", 598; player_counter_attack = 0;
 5002                        		__st.umiq	0, _player_counter_attack
         02:DFB7  9C 1C 23   			stz	_player_counter_attack
 5003                        	
 5004                        		.dbg	line,	"include\routines_LEVELS.c", 599; player_state = STATE_CROUCH_ATTACK;
 5005                        		__st.umiq	8, _player_state
         02:DFBA  A9 08      			lda.l	#8
         02:DFBC  8D 16 23   			sta	_player_state
 5006                        	
 5007                        		.dbg	line,	"include\routines_LEVELS.c", 600; }
 5008                        	
 5009                        		.dbg	line,	"include\routines_LEVELS.c", 601; }
 5010    02:DFBF             	.LL125:
 5011    02:DFBF             	.LL124:
 5012                        	
 5013                        		.dbg	line,	"include\routines_LEVELS.c", 602; }
 5014    02:DFBF             	.LL121:
 5015    02:DFBF             	.LL120:
 5016    02:DFBF             	.LL99:
 5017                        		__return	0
         02:DFBF  4C EF FF   			jmp	leave_proc
 5018                        		.dbg	clear
 5019                        		.endp
 5020                        		.pceas
 5021                        	
 5022                        		.dbg	line,	"include\routines_LEVELS.c", 605; void joypad_DIR()
 5023                        		.dbg	line,	"include\routines_LEVELS.c", 606; {
 5024                        	;***********************
 5025                        	;***********************
 5026                        	
 5027                        		.hucc
 5028    13:D060             		.proc		_joypad_DIR
 5029                        		__enter		_joypad_DIR
 5030                        	
 5031                        		.dbg	line,	"include\routines_LEVELS.c", 607; //--------------------------------------------------------------------------------------//
 5032                        	
 5033                        		.dbg	line,	"include\routines_LEVELS.c", 608; //                                        NO DIR                                        //
 5034                        	
 5035                        		.dbg	line,	"include\routines_LEVELS.c", 609; //--------------------------------------------------------------------------------------//
 5036                        	
 5037                        		.dbg	line,	"include\routines_LEVELS.c", 611; if(! (joy(JOYPAD_1) & JOY_DIR_PRESSED) )
 5038                        		__ld.uiq	0
         13:D060  62         			cla
 5039                        		 _joy.1
         13:D061  AA         			tax
         13:D062  BD 28 22   			lda	joynow, x
         13:D065  BC D3 22   			ldy	joy6now, x
 5040                        		__nand.wi	240
         13:D068  18         			clc
         13:D069  29 F0      			and	#240
         13:D06B  D0 01      			bne	!+
         13:D06D  38         			sec
         13:D06E             	!:
 5041                        		__bfalse	.LL127
         13:D06E  90 58      			bcc	.LL127
 5042                        	
 5043                        		.dbg	line,	"include\routines_LEVELS.c", 612; {
 5044                        	
 5045                        		.dbg	line,	"include\routines_LEVELS.c", 613; if(player_state == STATE_WALK || player_state == STATE_CROUCH)
 5046                        		__ld.umq	_player_state
         13:D070  AD 16 23   			lda	_player_state
 5047                        		__equ_b.uiq	1
         13:D073  C9 01      			cmp	#1
         13:D075  F0 01      			beq	!+
         13:D077  18         			clc
         13:D078             	!:
 5048                        		__btrue		.LL129
         13:D078  B0 08      			bcs	.LL129
 5049                        		__ld.umq	_player_state
         13:D07A  AD 16 23   			lda	_player_state
 5050                        		__equ_b.uiq	7
         13:D07D  C9 07      			cmp	#7
         13:D07F  F0 01      			beq	!+
         13:D081  18         			clc
         13:D082             	!:
 5051    13:D082             	.LL129:
 5052                        		__bfalse	.LL128
         13:D082  90 13      			bcc	.LL128
 5053                        	
 5054                        		.dbg	line,	"include\routines_LEVELS.c", 614; {
 5055                        	
 5056                        		.dbg	line,	"include\routines_LEVELS.c", 615; if(player_attack == FALSE)
 5057                        		__not.um	_player_attack
         13:D084  AD 1E 23   			lda	_player_attack
         13:D087  18         			clc
         13:D088  D0 01      			bne	!+
         13:D08A  38         			sec
         13:D08B             	!:
 5058                        		__bfalse	.LL130
         13:D08B  90 3B      			bcc	.LL130
 5059                        	
 5060                        		.dbg	line,	"include\routines_LEVELS.c", 616; {
 5061                        	
 5062                        		.dbg	line,	"include\routines_LEVELS.c", 617; player_counter_anim = 1;
 5063                        		__st.umiq	1, _player_counter_anim
         13:D08D  A9 01      			lda.l	#1
         13:D08F  8D 19 23   			sta	_player_counter_anim
 5064                        	
 5065                        		.dbg	line,	"include\routines_LEVELS.c", 618; player_state = STATE_IDLE;
 5066                        		__st.umiq	0, _player_state
         13:D092  9C 16 23   			stz	_player_state
 5067                        	
 5068                        		.dbg	line,	"include\routines_LEVELS.c", 619; }
 5069                        	
 5070                        		.dbg	line,	"include\routines_LEVELS.c", 620; }
 5071    13:D095             	.LL130	.alias		.LL131
 5072                        	
 5073                        		.dbg	line,	"include\routines_LEVELS.c", 623; else if(player_state == STATE_CLIMB_UP || player_state == STATE_CLIMB_DOWN)
 5074                        		__bra		.LL131
         13:D095  80 31      			bra	.LL131
 5075    13:D097             	.LL128:
 5076                        		__ld.umq	_player_state
         13:D097  AD 16 23   			lda	_player_state
 5077                        		__equ_b.uiq	11
         13:D09A  C9 0B      			cmp	#11
         13:D09C  F0 01      			beq	!+
         13:D09E  18         			clc
         13:D09F             	!:
 5078                        		__btrue		.LL133
         13:D09F  B0 08      			bcs	.LL133
 5079                        		__ld.umq	_player_state
         13:D0A1  AD 16 23   			lda	_player_state
 5080                        		__equ_b.uiq	12
         13:D0A4  C9 0C      			cmp	#12
         13:D0A6  F0 01      			beq	!+
         13:D0A8  18         			clc
         13:D0A9             	!:
 5081    13:D0A9             	.LL133:
 5082                        		__bfalse	.LL132
         13:D0A9  90 1D      			bcc	.LL132
 5083                        	
 5084                        		.dbg	line,	"include\routines_LEVELS.c", 624; {
 5085                        	
 5086                        		.dbg	line,	"include\routines_LEVELS.c", 625; if(player_attack == FALSE)
 5087                        		__not.um	_player_attack
         13:D0AB  AD 1E 23   			lda	_player_attack
         13:D0AE  18         			clc
         13:D0AF  D0 01      			bne	!+
         13:D0B1  38         			sec
         13:D0B2             	!:
 5088                        		__bfalse	.LL134
         13:D0B2  90 14      			bcc	.LL134
 5089                        	
 5090                        		.dbg	line,	"include\routines_LEVELS.c", 626; {
 5091                        	
 5092                        		.dbg	line,	"include\routines_LEVELS.c", 627; spr_set(player_id);
 5093                        		__ld.umq	_player_id
         13:D0B4  AD 15 23   			lda	_player_id
 5094                        		__call		_spr_set.1
         13:D0B7  20 DD E7   			call	_spr_set.1
 5095                        	
 5096                        		.dbg	line,	"include\routines_LEVELS.c", 628; spr_pattern(PLAYER_HANG_VRAM_ADR);
 5097                        		__ld.wi		7936
         13:D0BA  62         			cla
         13:D0BB  A0 1F      			ldy.h	#7936
 5098                        		__call		_spr_pattern.1
         13:D0BD  20 26 E8   			call	_spr_pattern.1
 5099                        	
 5100                        		.dbg	line,	"include\routines_LEVELS.c", 629; player_counter_anim = 0;
 5101                        		__st.umiq	0, _player_counter_anim
         13:D0C0  9C 19 23   			stz	_player_counter_anim
 5102                        	
 5103                        		.dbg	line,	"include\routines_LEVELS.c", 630; player_state = STATE_HANG;
 5104                        		__st.umiq	10, _player_state
         13:D0C3  A9 0A      			lda.l	#10
         13:D0C5  8D 16 23   			sta	_player_state
 5105                        	
 5106                        		.dbg	line,	"include\routines_LEVELS.c", 631; }
 5107                        	
 5108                        		.dbg	line,	"include\routines_LEVELS.c", 632; }
 5109    13:D0C8             	.LL134:
 5110                        	
 5111                        		.dbg	line,	"include\routines_LEVELS.c", 633; }
 5112    13:D0C8             	.LL132:
 5113    13:D0C8             	.LL131:
 5114                        	
 5115                        		.dbg	line,	"include\routines_LEVELS.c", 636; //--------------------------------------------------------------------------------------//
 5116                        	
 5117                        		.dbg	line,	"include\routines_LEVELS.c", 637; //                                     RIGHT BUTTON                                     //
 5118                        	
 5119                        		.dbg	line,	"include\routines_LEVELS.c", 638; //--------------------------------------------------------------------------------------//
 5120                        	
 5121                        		.dbg	line,	"include\routines_LEVELS.c", 640; if(joy(JOYPAD_1) & JOY_RIGHT)
 5122    13:D0C8             	.LL127:
 5123                        		__ld.uiq	0
         13:D0C8  62         			cla
 5124                        		 _joy.1
         13:D0C9  AA         			tax
         13:D0CA  BD 28 22   			lda	joynow, x
         13:D0CD  BC D3 22   			ldy	joy6now, x
 5125                        		__tand.wi	32
         13:D0D0  29 20      			and	#32
         13:D0D2  C9 01      	!:		cmp	#1
 5126                        		__bfalse	.LL135
         13:D0D4  B0 03 4C 6C			bcc	.LL135
         13:D0D8  D4          
 5127                        	
 5128                        		.dbg	line,	"include\routines_LEVELS.c", 641; {
 5129                        	
 5130                        		.dbg	line,	"include\routines_LEVELS.c", 642; if(player_state == STATE_IDLE || player_state == STATE_WALK)
 5131                        		__not.um	_player_state
         13:D0D9  AD 16 23   			lda	_player_state
         13:D0DC  18         			clc
         13:D0DD  D0 01      			bne	!+
         13:D0DF  38         			sec
         13:D0E0             	!:
 5132                        		__btrue		.LL137
         13:D0E0  B0 08      			bcs	.LL137
 5133                        		__ld.umq	_player_state
         13:D0E2  AD 16 23   			lda	_player_state
 5134                        		__equ_b.uiq	1
         13:D0E5  C9 01      			cmp	#1
         13:D0E7  F0 01      			beq	!+
         13:D0E9  18         			clc
         13:D0EA             	!:
 5135    13:D0EA             	.LL137:
 5136                        		__bfalse	.LL136
         13:D0EA  B0 03 4C 87			bcc	.LL136
         13:D0EE  D1          
 5137                        	
 5138                        		.dbg	line,	"include\routines_LEVELS.c", 643; {
 5139                        	
 5140                        		.dbg	line,	"include\routines_LEVELS.c", 644; player_axis = AXIS_RIGHT;
 5141                        		__st.umiq	0, _player_axis
         13:D0EF  9C 17 23   			stz	_player_axis
 5142                        	
 5143                        		.dbg	line,	"include\routines_LEVELS.c", 646; if(player_previous_axis != player_axis)
 5144                        		__ld.umq	_player_previous_axis
         13:D0F2  AD 18 23   			lda	_player_previous_axis
 5145                        		__neq_b.umq	_player_axis
         13:D0F5  38         			sec
         13:D0F6  4D 17 23   			eor	_player_axis
         13:D0F9  D0 01      			bne	!+
         13:D0FB  18         			clc
         13:D0FC             	!:
 5146                        		__bfalse	.LL138
         13:D0FC  90 66      			bcc	.LL138
 5147                        	
 5148                        		.dbg	line,	"include\routines_LEVELS.c", 647; {
 5149                        	
 5150                        		.dbg	line,	"include\routines_LEVELS.c", 648; player_previous_axis = player_axis;
 5151                        		__ld.um		_player_axis
         13:D0FE  AD 17 23   			lda	_player_axis
         13:D101  C2         			cly
 5152                        		__st.umq	_player_previous_axis
         13:D102  8D 18 23   			sta	_player_previous_axis
 5153                        	
 5154                        		.dbg	line,	"include\routines_LEVELS.c", 650; spr_set(player_id);
 5155                        		__ld.umq	_player_id
         13:D105  AD 15 23   			lda	_player_id
 5156                        		__call		_spr_set.1
         13:D108  20 DD E7   			call	_spr_set.1
 5157                        	
 5158                        		.dbg	line,	"include\routines_LEVELS.c", 651; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5159                        		__st.umiq	136, _al
         13:D10B  A9 88      			lda.l	#136
         13:D10D  85 F8      			sta	_al
 5160                        		__ld.uiq	0
         13:D10F  62         			cla
 5161                        		__call		_spr_ctrl.2
         13:D110  20 3C E8   			call	_spr_ctrl.2
 5162                        	
 5163                        		.dbg	line,	"include\routines_LEVELS.c", 653; spr_set(chain_id);
 5164                        		__ld.umq	_chain_id
         13:D113  AD 22 23   			lda	_chain_id
 5165                        		__call		_spr_set.1
         13:D116  20 DD E7   			call	_spr_set.1
 5166                        	
 5167                        		.dbg	line,	"include\routines_LEVELS.c", 654; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5168                        		__st.umiq	136, _al
         13:D119  A9 88      			lda.l	#136
         13:D11B  85 F8      			sta	_al
 5169                        		__ld.uiq	0
         13:D11D  62         			cla
 5170                        		__call		_spr_ctrl.2
         13:D11E  20 3C E8   			call	_spr_ctrl.2
 5171                        	
 5172                        		.dbg	line,	"include\routines_LEVELS.c", 656; spr_set(chain_id+1);
 5173                        		__ld.um		_chain_id
         13:D121  AD 22 23   			lda	_chain_id
         13:D124  C2         			cly
 5174                        		__add.wi	1
         13:D125  1A         			inc	a
         13:D126  D0 01      			bne	!+
         13:D128  C8         			iny
         13:D129             	!:
 5175                        		__call		_spr_set.1
         13:D129  20 DD E7   			call	_spr_set.1
 5176                        	
 5177                        		.dbg	line,	"include\routines_LEVELS.c", 657; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5178                        		__st.umiq	136, _al
         13:D12C  A9 88      			lda.l	#136
         13:D12E  85 F8      			sta	_al
 5179                        		__ld.uiq	0
         13:D130  62         			cla
 5180                        		__call		_spr_ctrl.2
         13:D131  20 3C E8   			call	_spr_ctrl.2
 5181                        	
 5182                        		.dbg	line,	"include\routines_LEVELS.c", 659; spr_set(chain_id+2);
 5183                        		__ld.um		_chain_id
         13:D134  AD 22 23   			lda	_chain_id
         13:D137  C2         			cly
 5184                        		__add.wi	2
         13:D138  18         			clc
         13:D139  69 02      			adc.l	#2
         13:D13B  90 01      			bcc	!+
         13:D13D  C8         			iny
         13:D13E             	!:
 5185                        		__call		_spr_set.1
         13:D13E  20 DD E7   			call	_spr_set.1
 5186                        	
 5187                        		.dbg	line,	"include\routines_LEVELS.c", 660; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5188                        		__st.umiq	136, _al
         13:D141  A9 88      			lda.l	#136
         13:D143  85 F8      			sta	_al
 5189                        		__ld.uiq	0
         13:D145  62         			cla
 5190                        		__call		_spr_ctrl.2
         13:D146  20 3C E8   			call	_spr_ctrl.2
 5191                        	
 5192                        		.dbg	line,	"include\routines_LEVELS.c", 662; spr_set(weapon_id);
 5193                        		__ld.umq	_weapon_id
         13:D149  AD 23 23   			lda	_weapon_id
 5194                        		__call		_spr_set.1
         13:D14C  20 DD E7   			call	_spr_set.1
 5195                        	
 5196                        		.dbg	line,	"include\routines_LEVELS.c", 663; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5197                        		__st.umiq	136, _al
         13:D14F  A9 88      			lda.l	#136
         13:D151  85 F8      			sta	_al
 5198                        		__ld.uiq	0
         13:D153  62         			cla
 5199                        		__call		_spr_ctrl.2
         13:D154  20 3C E8   			call	_spr_ctrl.2
 5200                        	
 5201                        		.dbg	line,	"include\routines_LEVELS.c", 664; spr_x(player_pos_x+1);
 5202                        		__ld.wm		_player_pos_x
         13:D157  AD D3 24   			lda.l	_player_pos_x
         13:D15A  AC D4 24   			ldy.h	_player_pos_x
 5203                        		__add.wi	1
         13:D15D  1A         			inc	a
         13:D15E  D0 01      			bne	!+
         13:D160  C8         			iny
         13:D161             	!:
 5204                        		__call		_spr_x.1
         13:D161  20 0A E8   			call	_spr_x.1
 5205                        	
 5206                        		.dbg	line,	"include\routines_LEVELS.c", 665; }
 5207                        	
 5208                        		.dbg	line,	"include\routines_LEVELS.c", 667; if(joy(JOYPAD_1) & JOY_DOWN)
 5209    13:D164             	.LL138:
 5210                        		__ld.uiq	0
         13:D164  62         			cla
 5211                        		 _joy.1
         13:D165  AA         			tax
         13:D166  BD 28 22   			lda	joynow, x
         13:D169  BC D3 22   			ldy	joy6now, x
 5212                        		__tand.wi	64
         13:D16C  29 40      			and	#64
         13:D16E  C9 01      	!:		cmp	#1
 5213                        		__bfalse	.LL139
         13:D170  90 0D      			bcc	.LL139
 5214                        	
 5215                        		.dbg	line,	"include\routines_LEVELS.c", 668; {
 5216                        	
 5217                        		.dbg	line,	"include\routines_LEVELS.c", 669; player_counter_anim = 1;
 5218                        		__st.umiq	1, _player_counter_anim
         13:D172  A9 01      			lda.l	#1
         13:D174  8D 19 23   			sta	_player_counter_anim
 5219                        	
 5220                        		.dbg	line,	"include\routines_LEVELS.c", 670; player_state = STATE_CROUCH;
 5221                        		__st.umiq	7, _player_state
         13:D177  A9 07      			lda.l	#7
         13:D179  8D 16 23   			sta	_player_state
 5222                        	
 5223                        		.dbg	line,	"include\routines_LEVELS.c", 671; return;
 5224                        		__bra		.LL126
         13:D17C  4C 7F DA   			bra	.LL126
 5225                        	
 5226                        		.dbg	line,	"include\routines_LEVELS.c", 672; }
 5227                        	
 5228                        		.dbg	line,	"include\routines_LEVELS.c", 674; player_state = STATE_WALK;
 5229    13:D17F             	.LL139:
 5230                        		__st.umiq	1, _player_state
         13:D17F  A9 01      			lda.l	#1
         13:D181  8D 16 23   			sta	_player_state
 5231                        	
 5232                        		.dbg	line,	"include\routines_LEVELS.c", 675; }
 5233                        	
 5234                        		.dbg	line,	"include\routines_LEVELS.c", 678; else if(player_state == STATE_JUMP)
 5235                        		__bra		.LL140
         13:D184  4C 7F DA   			bra	.LL140
 5236    13:D187             	.LL136:
 5237                        		__ld.umq	_player_state
         13:D187  AD 16 23   			lda	_player_state
 5238                        		__equ_b.uiq	4
         13:D18A  C9 04      			cmp	#4
         13:D18C  F0 01      			beq	!+
         13:D18E  18         			clc
         13:D18F             	!:
 5239                        		__bfalse	.LL141
         13:D18F  B0 03 4C 2A			bcc	.LL141
         13:D193  D2          
 5240                        	
 5241                        		.dbg	line,	"include\routines_LEVELS.c", 679; {
 5242                        	
 5243                        		.dbg	line,	"include\routines_LEVELS.c", 680; if(player_axis == AXIS_LEFT)
 5244                        		__ld.umq	_player_axis
         13:D194  AD 17 23   			lda	_player_axis
 5245                        		__equ_b.uiq	1
         13:D197  C9 01      			cmp	#1
         13:D199  F0 01      			beq	!+
         13:D19B  18         			clc
         13:D19C             	!:
 5246                        		__bfalse	.LL142
         13:D19C  B0 03 4C 7F			bcc	.LL142
         13:D1A0  DA          
 5247                        	
 5248                        		.dbg	line,	"include\routines_LEVELS.c", 681; {
 5249                        	
 5250                        		.dbg	line,	"include\routines_LEVELS.c", 682; player_axis = AXIS_RIGHT;
 5251                        		__st.umiq	0, _player_axis
         13:D1A1  9C 17 23   			stz	_player_axis
 5252                        	
 5253                        		.dbg	line,	"include\routines_LEVELS.c", 683; player_previous_axis = player_axis;
 5254                        		__ld.um		_player_axis
         13:D1A4  AD 17 23   			lda	_player_axis
         13:D1A7  C2         			cly
 5255                        		__st.umq	_player_previous_axis
         13:D1A8  8D 18 23   			sta	_player_previous_axis
 5256                        	
 5257                        		.dbg	line,	"include\routines_LEVELS.c", 685; spr_set(player_id);
 5258                        		__ld.umq	_player_id
         13:D1AB  AD 15 23   			lda	_player_id
 5259                        		__call		_spr_set.1
         13:D1AE  20 DD E7   			call	_spr_set.1
 5260                        	
 5261                        		.dbg	line,	"include\routines_LEVELS.c", 686; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5262                        		__st.umiq	136, _al
         13:D1B1  A9 88      			lda.l	#136
         13:D1B3  85 F8      			sta	_al
 5263                        		__ld.uiq	0
         13:D1B5  62         			cla
 5264                        		__call		_spr_ctrl.2
         13:D1B6  20 3C E8   			call	_spr_ctrl.2
 5265                        	
 5266                        		.dbg	line,	"include\routines_LEVELS.c", 688; spr_set(chain_id);
 5267                        		__ld.umq	_chain_id
         13:D1B9  AD 22 23   			lda	_chain_id
 5268                        		__call		_spr_set.1
         13:D1BC  20 DD E7   			call	_spr_set.1
 5269                        	
 5270                        		.dbg	line,	"include\routines_LEVELS.c", 689; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5271                        		__st.umiq	136, _al
         13:D1BF  A9 88      			lda.l	#136
         13:D1C1  85 F8      			sta	_al
 5272                        		__ld.uiq	0
         13:D1C3  62         			cla
 5273                        		__call		_spr_ctrl.2
         13:D1C4  20 3C E8   			call	_spr_ctrl.2
 5274                        	
 5275                        		.dbg	line,	"include\routines_LEVELS.c", 691; spr_set(chain_id+1);
 5276                        		__ld.um		_chain_id
         13:D1C7  AD 22 23   			lda	_chain_id
         13:D1CA  C2         			cly
 5277                        		__add.wi	1
         13:D1CB  1A         			inc	a
         13:D1CC  D0 01      			bne	!+
         13:D1CE  C8         			iny
         13:D1CF             	!:
 5278                        		__call		_spr_set.1
         13:D1CF  20 DD E7   			call	_spr_set.1
 5279                        	
 5280                        		.dbg	line,	"include\routines_LEVELS.c", 692; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5281                        		__st.umiq	136, _al
         13:D1D2  A9 88      			lda.l	#136
         13:D1D4  85 F8      			sta	_al
 5282                        		__ld.uiq	0
         13:D1D6  62         			cla
 5283                        		__call		_spr_ctrl.2
         13:D1D7  20 3C E8   			call	_spr_ctrl.2
 5284                        	
 5285                        		.dbg	line,	"include\routines_LEVELS.c", 694; spr_set(chain_id+2);
 5286                        		__ld.um		_chain_id
         13:D1DA  AD 22 23   			lda	_chain_id
         13:D1DD  C2         			cly
 5287                        		__add.wi	2
         13:D1DE  18         			clc
         13:D1DF  69 02      			adc.l	#2
         13:D1E1  90 01      			bcc	!+
         13:D1E3  C8         			iny
         13:D1E4             	!:
 5288                        		__call		_spr_set.1
         13:D1E4  20 DD E7   			call	_spr_set.1
 5289                        	
 5290                        		.dbg	line,	"include\routines_LEVELS.c", 695; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5291                        		__st.umiq	136, _al
         13:D1E7  A9 88      			lda.l	#136
         13:D1E9  85 F8      			sta	_al
 5292                        		__ld.uiq	0
         13:D1EB  62         			cla
 5293                        		__call		_spr_ctrl.2
         13:D1EC  20 3C E8   			call	_spr_ctrl.2
 5294                        	
 5295                        		.dbg	line,	"include\routines_LEVELS.c", 697; spr_set(weapon_id);
 5296                        		__ld.umq	_weapon_id
         13:D1EF  AD 23 23   			lda	_weapon_id
 5297                        		__call		_spr_set.1
         13:D1F2  20 DD E7   			call	_spr_set.1
 5298                        	
 5299                        		.dbg	line,	"include\routines_LEVELS.c", 698; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5300                        		__st.umiq	136, _al
         13:D1F5  A9 88      			lda.l	#136
         13:D1F7  85 F8      			sta	_al
 5301                        		__ld.uiq	0
         13:D1F9  62         			cla
 5302                        		__call		_spr_ctrl.2
         13:D1FA  20 3C E8   			call	_spr_ctrl.2
 5303                        	
 5304                        		.dbg	line,	"include\routines_LEVELS.c", 699; spr_x(player_pos_x-5);
 5305                        		__ld.wm		_player_pos_x
         13:D1FD  AD D3 24   			lda.l	_player_pos_x
         13:D200  AC D4 24   			ldy.h	_player_pos_x
 5306                        		__sub.wi	5
         13:D203  38         			sec
         13:D204  E9 05      			sbc.l	#5
         13:D206  B0 01      			bcs	!+
         13:D208  88         			dey
         13:D209             	!:
 5307                        		__call		_spr_x.1
         13:D209  20 0A E8   			call	_spr_x.1
 5308                        	
 5309                        		.dbg	line,	"include\routines_LEVELS.c", 700; 
 5310                        	
 5311                        		.dbg	line,	"include\routines_LEVELS.c", 702; if(player_index_jump > 11 && player_index_jump < 15)
 5312                        		__ld.umq	_player_index_jump
         13:D20C  AD 1A 23   			lda	_player_index_jump
 5313                        		__ugt_b.uiq	11
         13:D20F  18         			clc			; Subtract integer+1 from A.
         13:D210  E9 0B      			sbc	#11		; CS if A > integer.
 5314                        		__bfalse	.LL144
         13:D212  90 09      			bcc	.LL144
 5315                        		__ld.umq	_player_index_jump
         13:D214  AD 1A 23   			lda	_player_index_jump
 5316                        		__ult_b.uiq	15
         13:D217  C9 0F      			cmp	#15		; Subtract integer from A.
         13:D219  6A         			ror	a		; CC if A < integer.
         13:D21A  49 80      			eor	#$80
         13:D21C  2A         			rol	a
 5317    13:D21D             	.LL144:
 5318                        		__bfalse	.LL143
         13:D21D  B0 03 4C 7F			bcc	.LL143
         13:D221  DA          
 5319                        	
 5320                        		.dbg	line,	"include\routines_LEVELS.c", 703; {
 5321                        	
 5322                        		.dbg	line,	"include\routines_LEVELS.c", 704; player_state = STATE_JUMP_RIGHT;                        
 5323                        		__st.umiq	5, _player_state
         13:D222  A9 05      			lda.l	#5
         13:D224  8D 16 23   			sta	_player_state
 5324                        	
 5325                        		.dbg	line,	"include\routines_LEVELS.c", 705; }
 5326                        	
 5327                        		.dbg	line,	"include\routines_LEVELS.c", 706; }
 5328    13:D227             	.LL143	.alias		.LL145
 5329                        	
 5330                        		.dbg	line,	"include\routines_LEVELS.c", 707; }
 5331    13:D227             	.LL142	.alias		.LL145
 5332                        	
 5333                        		.dbg	line,	"include\routines_LEVELS.c", 710; else if(player_state == STATE_JUMP_LEFT)
 5334                        		__bra		.LL145
         13:D227  4C 7F DA   			bra	.LL145
 5335    13:D22A             	.LL141:
 5336                        		__ld.umq	_player_state
         13:D22A  AD 16 23   			lda	_player_state
 5337                        		__equ_b.uiq	6
         13:D22D  C9 06      			cmp	#6
         13:D22F  F0 01      			beq	!+
         13:D231  18         			clc
         13:D232             	!:
 5338                        		__bfalse	.LL146
         13:D232  90 7B      			bcc	.LL146
 5339                        	
 5340                        		.dbg	line,	"include\routines_LEVELS.c", 711; {
 5341                        	
 5342                        		.dbg	line,	"include\routines_LEVELS.c", 712; if(player_axis == AXIS_LEFT)
 5343                        		__ld.umq	_player_axis
         13:D234  AD 17 23   			lda	_player_axis
 5344                        		__equ_b.uiq	1
         13:D237  C9 01      			cmp	#1
         13:D239  F0 01      			beq	!+
         13:D23B  18         			clc
         13:D23C             	!:
 5345                        		__bfalse	.LL147
         13:D23C  B0 03 4C 7F			bcc	.LL147
         13:D240  DA          
 5346                        	
 5347                        		.dbg	line,	"include\routines_LEVELS.c", 713; {
 5348                        	
 5349                        		.dbg	line,	"include\routines_LEVELS.c", 714; player_axis = AXIS_RIGHT;
 5350                        		__st.umiq	0, _player_axis
         13:D241  9C 17 23   			stz	_player_axis
 5351                        	
 5352                        		.dbg	line,	"include\routines_LEVELS.c", 715; player_previous_axis = player_axis;
 5353                        		__ld.um		_player_axis
         13:D244  AD 17 23   			lda	_player_axis
         13:D247  C2         			cly
 5354                        		__st.umq	_player_previous_axis
         13:D248  8D 18 23   			sta	_player_previous_axis
 5355                        	
 5356                        		.dbg	line,	"include\routines_LEVELS.c", 717; spr_set(player_id);
 5357                        		__ld.umq	_player_id
         13:D24B  AD 15 23   			lda	_player_id
 5358                        		__call		_spr_set.1
         13:D24E  20 DD E7   			call	_spr_set.1
 5359                        	
 5360                        		.dbg	line,	"include\routines_LEVELS.c", 718; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5361                        		__st.umiq	136, _al
         13:D251  A9 88      			lda.l	#136
         13:D253  85 F8      			sta	_al
 5362                        		__ld.uiq	0
         13:D255  62         			cla
 5363                        		__call		_spr_ctrl.2
         13:D256  20 3C E8   			call	_spr_ctrl.2
 5364                        	
 5365                        		.dbg	line,	"include\routines_LEVELS.c", 720; spr_set(chain_id);
 5366                        		__ld.umq	_chain_id
         13:D259  AD 22 23   			lda	_chain_id
 5367                        		__call		_spr_set.1
         13:D25C  20 DD E7   			call	_spr_set.1
 5368                        	
 5369                        		.dbg	line,	"include\routines_LEVELS.c", 721; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5370                        		__st.umiq	136, _al
         13:D25F  A9 88      			lda.l	#136
         13:D261  85 F8      			sta	_al
 5371                        		__ld.uiq	0
         13:D263  62         			cla
 5372                        		__call		_spr_ctrl.2
         13:D264  20 3C E8   			call	_spr_ctrl.2
 5373                        	
 5374                        		.dbg	line,	"include\routines_LEVELS.c", 723; spr_set(chain_id+1);
 5375                        		__ld.um		_chain_id
         13:D267  AD 22 23   			lda	_chain_id
         13:D26A  C2         			cly
 5376                        		__add.wi	1
         13:D26B  1A         			inc	a
         13:D26C  D0 01      			bne	!+
         13:D26E  C8         			iny
         13:D26F             	!:
 5377                        		__call		_spr_set.1
         13:D26F  20 DD E7   			call	_spr_set.1
 5378                        	
 5379                        		.dbg	line,	"include\routines_LEVELS.c", 724; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5380                        		__st.umiq	136, _al
         13:D272  A9 88      			lda.l	#136
         13:D274  85 F8      			sta	_al
 5381                        		__ld.uiq	0
         13:D276  62         			cla
 5382                        		__call		_spr_ctrl.2
         13:D277  20 3C E8   			call	_spr_ctrl.2
 5383                        	
 5384                        		.dbg	line,	"include\routines_LEVELS.c", 726; spr_set(chain_id+2);
 5385                        		__ld.um		_chain_id
         13:D27A  AD 22 23   			lda	_chain_id
         13:D27D  C2         			cly
 5386                        		__add.wi	2
         13:D27E  18         			clc
         13:D27F  69 02      			adc.l	#2
         13:D281  90 01      			bcc	!+
         13:D283  C8         			iny
         13:D284             	!:
 5387                        		__call		_spr_set.1
         13:D284  20 DD E7   			call	_spr_set.1
 5388                        	
 5389                        		.dbg	line,	"include\routines_LEVELS.c", 727; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5390                        		__st.umiq	136, _al
         13:D287  A9 88      			lda.l	#136
         13:D289  85 F8      			sta	_al
 5391                        		__ld.uiq	0
         13:D28B  62         			cla
 5392                        		__call		_spr_ctrl.2
         13:D28C  20 3C E8   			call	_spr_ctrl.2
 5393                        	
 5394                        		.dbg	line,	"include\routines_LEVELS.c", 729; spr_set(weapon_id);
 5395                        		__ld.umq	_weapon_id
         13:D28F  AD 23 23   			lda	_weapon_id
 5396                        		__call		_spr_set.1
         13:D292  20 DD E7   			call	_spr_set.1
 5397                        	
 5398                        		.dbg	line,	"include\routines_LEVELS.c", 730; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5399                        		__st.umiq	136, _al
         13:D295  A9 88      			lda.l	#136
         13:D297  85 F8      			sta	_al
 5400                        		__ld.uiq	0
         13:D299  62         			cla
 5401                        		__call		_spr_ctrl.2
         13:D29A  20 3C E8   			call	_spr_ctrl.2
 5402                        	
 5403                        		.dbg	line,	"include\routines_LEVELS.c", 731; spr_x(player_pos_x-5);
 5404                        		__ld.wm		_player_pos_x
         13:D29D  AD D3 24   			lda.l	_player_pos_x
         13:D2A0  AC D4 24   			ldy.h	_player_pos_x
 5405                        		__sub.wi	5
         13:D2A3  38         			sec
         13:D2A4  E9 05      			sbc.l	#5
         13:D2A6  B0 01      			bcs	!+
         13:D2A8  88         			dey
         13:D2A9             	!:
 5406                        		__call		_spr_x.1
         13:D2A9  20 0A E8   			call	_spr_x.1
 5407                        	
 5408                        		.dbg	line,	"include\routines_LEVELS.c", 732; }
 5409                        	
 5410                        		.dbg	line,	"include\routines_LEVELS.c", 733; }
 5411    13:D2AC             	.LL147	.alias		.LL148
 5412                        	
 5413                        		.dbg	line,	"include\routines_LEVELS.c", 736; else if(player_state == STATE_CROUCH)
 5414                        		__bra		.LL148
         13:D2AC  4C 7F DA   			bra	.LL148
 5415    13:D2AF             	.LL146:
 5416                        		__ld.umq	_player_state
         13:D2AF  AD 16 23   			lda	_player_state
 5417                        		__equ_b.uiq	7
         13:D2B2  C9 07      			cmp	#7
         13:D2B4  F0 01      			beq	!+
         13:D2B6  18         			clc
         13:D2B7             	!:
 5418                        		__bfalse	.LL149
         13:D2B7  90 7B      			bcc	.LL149
 5419                        	
 5420                        		.dbg	line,	"include\routines_LEVELS.c", 737; {
 5421                        	
 5422                        		.dbg	line,	"include\routines_LEVELS.c", 738; if(player_axis == AXIS_LEFT)
 5423                        		__ld.umq	_player_axis
         13:D2B9  AD 17 23   			lda	_player_axis
 5424                        		__equ_b.uiq	1
         13:D2BC  C9 01      			cmp	#1
         13:D2BE  F0 01      			beq	!+
         13:D2C0  18         			clc
         13:D2C1             	!:
 5425                        		__bfalse	.LL150
         13:D2C1  B0 03 4C 7F			bcc	.LL150
         13:D2C5  DA          
 5426                        	
 5427                        		.dbg	line,	"include\routines_LEVELS.c", 739; {
 5428                        	
 5429                        		.dbg	line,	"include\routines_LEVELS.c", 740; player_axis = AXIS_RIGHT;
 5430                        		__st.umiq	0, _player_axis
         13:D2C6  9C 17 23   			stz	_player_axis
 5431                        	
 5432                        		.dbg	line,	"include\routines_LEVELS.c", 741; player_previous_axis = player_axis;
 5433                        		__ld.um		_player_axis
         13:D2C9  AD 17 23   			lda	_player_axis
         13:D2CC  C2         			cly
 5434                        		__st.umq	_player_previous_axis
         13:D2CD  8D 18 23   			sta	_player_previous_axis
 5435                        	
 5436                        		.dbg	line,	"include\routines_LEVELS.c", 743; spr_set(player_id);
 5437                        		__ld.umq	_player_id
         13:D2D0  AD 15 23   			lda	_player_id
 5438                        		__call		_spr_set.1
         13:D2D3  20 DD E7   			call	_spr_set.1
 5439                        	
 5440                        		.dbg	line,	"include\routines_LEVELS.c", 744; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5441                        		__st.umiq	136, _al
         13:D2D6  A9 88      			lda.l	#136
         13:D2D8  85 F8      			sta	_al
 5442                        		__ld.uiq	0
         13:D2DA  62         			cla
 5443                        		__call		_spr_ctrl.2
         13:D2DB  20 3C E8   			call	_spr_ctrl.2
 5444                        	
 5445                        		.dbg	line,	"include\routines_LEVELS.c", 746; spr_set(chain_id);
 5446                        		__ld.umq	_chain_id
         13:D2DE  AD 22 23   			lda	_chain_id
 5447                        		__call		_spr_set.1
         13:D2E1  20 DD E7   			call	_spr_set.1
 5448                        	
 5449                        		.dbg	line,	"include\routines_LEVELS.c", 747; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5450                        		__st.umiq	136, _al
         13:D2E4  A9 88      			lda.l	#136
         13:D2E6  85 F8      			sta	_al
 5451                        		__ld.uiq	0
         13:D2E8  62         			cla
 5452                        		__call		_spr_ctrl.2
         13:D2E9  20 3C E8   			call	_spr_ctrl.2
 5453                        	
 5454                        		.dbg	line,	"include\routines_LEVELS.c", 749; spr_set(chain_id+1);
 5455                        		__ld.um		_chain_id
         13:D2EC  AD 22 23   			lda	_chain_id
         13:D2EF  C2         			cly
 5456                        		__add.wi	1
         13:D2F0  1A         			inc	a
         13:D2F1  D0 01      			bne	!+
         13:D2F3  C8         			iny
         13:D2F4             	!:
 5457                        		__call		_spr_set.1
         13:D2F4  20 DD E7   			call	_spr_set.1
 5458                        	
 5459                        		.dbg	line,	"include\routines_LEVELS.c", 750; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5460                        		__st.umiq	136, _al
         13:D2F7  A9 88      			lda.l	#136
         13:D2F9  85 F8      			sta	_al
 5461                        		__ld.uiq	0
         13:D2FB  62         			cla
 5462                        		__call		_spr_ctrl.2
         13:D2FC  20 3C E8   			call	_spr_ctrl.2
 5463                        	
 5464                        		.dbg	line,	"include\routines_LEVELS.c", 752; spr_set(chain_id+2);
 5465                        		__ld.um		_chain_id
         13:D2FF  AD 22 23   			lda	_chain_id
         13:D302  C2         			cly
 5466                        		__add.wi	2
         13:D303  18         			clc
         13:D304  69 02      			adc.l	#2
         13:D306  90 01      			bcc	!+
         13:D308  C8         			iny
         13:D309             	!:
 5467                        		__call		_spr_set.1
         13:D309  20 DD E7   			call	_spr_set.1
 5468                        	
 5469                        		.dbg	line,	"include\routines_LEVELS.c", 753; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5470                        		__st.umiq	136, _al
         13:D30C  A9 88      			lda.l	#136
         13:D30E  85 F8      			sta	_al
 5471                        		__ld.uiq	0
         13:D310  62         			cla
 5472                        		__call		_spr_ctrl.2
         13:D311  20 3C E8   			call	_spr_ctrl.2
 5473                        	
 5474                        		.dbg	line,	"include\routines_LEVELS.c", 755; spr_set(weapon_id);
 5475                        		__ld.umq	_weapon_id
         13:D314  AD 23 23   			lda	_weapon_id
 5476                        		__call		_spr_set.1
         13:D317  20 DD E7   			call	_spr_set.1
 5477                        	
 5478                        		.dbg	line,	"include\routines_LEVELS.c", 756; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5479                        		__st.umiq	136, _al
         13:D31A  A9 88      			lda.l	#136
         13:D31C  85 F8      			sta	_al
 5480                        		__ld.uiq	0
         13:D31E  62         			cla
 5481                        		__call		_spr_ctrl.2
         13:D31F  20 3C E8   			call	_spr_ctrl.2
 5482                        	
 5483                        		.dbg	line,	"include\routines_LEVELS.c", 757; spr_x(player_pos_x-1);
 5484                        		__ld.wm		_player_pos_x
         13:D322  AD D3 24   			lda.l	_player_pos_x
         13:D325  AC D4 24   			ldy.h	_player_pos_x
 5485                        		__sub.wi	1
         13:D328  38         			sec
         13:D329  E9 01      			sbc.l	#1
         13:D32B  B0 01      			bcs	!+
         13:D32D  88         			dey
         13:D32E             	!:
 5486                        		__call		_spr_x.1
         13:D32E  20 0A E8   			call	_spr_x.1
 5487                        	
 5488                        		.dbg	line,	"include\routines_LEVELS.c", 758; }
 5489                        	
 5490                        		.dbg	line,	"include\routines_LEVELS.c", 759; }
 5491    13:D331             	.LL150	.alias		.LL151
 5492                        	
 5493                        		.dbg	line,	"include\routines_LEVELS.c", 762; else if(player_state == STATE_FALL)
 5494                        		__bra		.LL151
         13:D331  4C 7F DA   			bra	.LL151
 5495    13:D334             	.LL149:
 5496                        		__ld.umq	_player_state
         13:D334  AD 16 23   			lda	_player_state
 5497                        		__equ_b.uiq	9
         13:D337  C9 09      			cmp	#9
         13:D339  F0 01      			beq	!+
         13:D33B  18         			clc
         13:D33C             	!:
 5498                        		__bfalse	.LL152
         13:D33C  90 7B      			bcc	.LL152
 5499                        	
 5500                        		.dbg	line,	"include\routines_LEVELS.c", 763; {
 5501                        	
 5502                        		.dbg	line,	"include\routines_LEVELS.c", 764; if(player_axis == AXIS_LEFT)
 5503                        		__ld.umq	_player_axis
         13:D33E  AD 17 23   			lda	_player_axis
 5504                        		__equ_b.uiq	1
         13:D341  C9 01      			cmp	#1
         13:D343  F0 01      			beq	!+
         13:D345  18         			clc
         13:D346             	!:
 5505                        		__bfalse	.LL153
         13:D346  B0 03 4C 7F			bcc	.LL153
         13:D34A  DA          
 5506                        	
 5507                        		.dbg	line,	"include\routines_LEVELS.c", 765; {
 5508                        	
 5509                        		.dbg	line,	"include\routines_LEVELS.c", 766; player_axis = AXIS_RIGHT;
 5510                        		__st.umiq	0, _player_axis
         13:D34B  9C 17 23   			stz	_player_axis
 5511                        	
 5512                        		.dbg	line,	"include\routines_LEVELS.c", 767; player_previous_axis = player_axis;
 5513                        		__ld.um		_player_axis
         13:D34E  AD 17 23   			lda	_player_axis
         13:D351  C2         			cly
 5514                        		__st.umq	_player_previous_axis
         13:D352  8D 18 23   			sta	_player_previous_axis
 5515                        	
 5516                        		.dbg	line,	"include\routines_LEVELS.c", 769; spr_set(player_id);
 5517                        		__ld.umq	_player_id
         13:D355  AD 15 23   			lda	_player_id
 5518                        		__call		_spr_set.1
         13:D358  20 DD E7   			call	_spr_set.1
 5519                        	
 5520                        		.dbg	line,	"include\routines_LEVELS.c", 770; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5521                        		__st.umiq	136, _al
         13:D35B  A9 88      			lda.l	#136
         13:D35D  85 F8      			sta	_al
 5522                        		__ld.uiq	0
         13:D35F  62         			cla
 5523                        		__call		_spr_ctrl.2
         13:D360  20 3C E8   			call	_spr_ctrl.2
 5524                        	
 5525                        		.dbg	line,	"include\routines_LEVELS.c", 772; spr_set(chain_id);
 5526                        		__ld.umq	_chain_id
         13:D363  AD 22 23   			lda	_chain_id
 5527                        		__call		_spr_set.1
         13:D366  20 DD E7   			call	_spr_set.1
 5528                        	
 5529                        		.dbg	line,	"include\routines_LEVELS.c", 773; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5530                        		__st.umiq	136, _al
         13:D369  A9 88      			lda.l	#136
         13:D36B  85 F8      			sta	_al
 5531                        		__ld.uiq	0
         13:D36D  62         			cla
 5532                        		__call		_spr_ctrl.2
         13:D36E  20 3C E8   			call	_spr_ctrl.2
 5533                        	
 5534                        		.dbg	line,	"include\routines_LEVELS.c", 775; spr_set(chain_id+1);
 5535                        		__ld.um		_chain_id
         13:D371  AD 22 23   			lda	_chain_id
         13:D374  C2         			cly
 5536                        		__add.wi	1
         13:D375  1A         			inc	a
         13:D376  D0 01      			bne	!+
         13:D378  C8         			iny
         13:D379             	!:
 5537                        		__call		_spr_set.1
         13:D379  20 DD E7   			call	_spr_set.1
 5538                        	
 5539                        		.dbg	line,	"include\routines_LEVELS.c", 776; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5540                        		__st.umiq	136, _al
         13:D37C  A9 88      			lda.l	#136
         13:D37E  85 F8      			sta	_al
 5541                        		__ld.uiq	0
         13:D380  62         			cla
 5542                        		__call		_spr_ctrl.2
         13:D381  20 3C E8   			call	_spr_ctrl.2
 5543                        	
 5544                        		.dbg	line,	"include\routines_LEVELS.c", 778; spr_set(chain_id+2);
 5545                        		__ld.um		_chain_id
         13:D384  AD 22 23   			lda	_chain_id
         13:D387  C2         			cly
 5546                        		__add.wi	2
         13:D388  18         			clc
         13:D389  69 02      			adc.l	#2
         13:D38B  90 01      			bcc	!+
         13:D38D  C8         			iny
         13:D38E             	!:
 5547                        		__call		_spr_set.1
         13:D38E  20 DD E7   			call	_spr_set.1
 5548                        	
 5549                        		.dbg	line,	"include\routines_LEVELS.c", 779; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5550                        		__st.umiq	136, _al
         13:D391  A9 88      			lda.l	#136
         13:D393  85 F8      			sta	_al
 5551                        		__ld.uiq	0
         13:D395  62         			cla
 5552                        		__call		_spr_ctrl.2
         13:D396  20 3C E8   			call	_spr_ctrl.2
 5553                        	
 5554                        		.dbg	line,	"include\routines_LEVELS.c", 781; spr_set(weapon_id);
 5555                        		__ld.umq	_weapon_id
         13:D399  AD 23 23   			lda	_weapon_id
 5556                        		__call		_spr_set.1
         13:D39C  20 DD E7   			call	_spr_set.1
 5557                        	
 5558                        		.dbg	line,	"include\routines_LEVELS.c", 782; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5559                        		__st.umiq	136, _al
         13:D39F  A9 88      			lda.l	#136
         13:D3A1  85 F8      			sta	_al
 5560                        		__ld.uiq	0
         13:D3A3  62         			cla
 5561                        		__call		_spr_ctrl.2
         13:D3A4  20 3C E8   			call	_spr_ctrl.2
 5562                        	
 5563                        		.dbg	line,	"include\routines_LEVELS.c", 783; spr_x(player_pos_x-4);
 5564                        		__ld.wm		_player_pos_x
         13:D3A7  AD D3 24   			lda.l	_player_pos_x
         13:D3AA  AC D4 24   			ldy.h	_player_pos_x
 5565                        		__sub.wi	4
         13:D3AD  38         			sec
         13:D3AE  E9 04      			sbc.l	#4
         13:D3B0  B0 01      			bcs	!+
         13:D3B2  88         			dey
         13:D3B3             	!:
 5566                        		__call		_spr_x.1
         13:D3B3  20 0A E8   			call	_spr_x.1
 5567                        	
 5568                        		.dbg	line,	"include\routines_LEVELS.c", 784; }
 5569                        	
 5570                        		.dbg	line,	"include\routines_LEVELS.c", 785; }
 5571    13:D3B6             	.LL153	.alias		.LL154
 5572                        	
 5573                        		.dbg	line,	"include\routines_LEVELS.c", 788; else if(player_state == STATE_HANG)
 5574                        		__bra		.LL154
         13:D3B6  4C 7F DA   			bra	.LL154
 5575    13:D3B9             	.LL152:
 5576                        		__ld.umq	_player_state
         13:D3B9  AD 16 23   			lda	_player_state
 5577                        		__equ_b.uiq	10
         13:D3BC  C9 0A      			cmp	#10
         13:D3BE  F0 01      			beq	!+
         13:D3C0  18         			clc
         13:D3C1             	!:
 5578                        		__bfalse	.LL155
         13:D3C1  90 7B      			bcc	.LL155
 5579                        	
 5580                        		.dbg	line,	"include\routines_LEVELS.c", 789; {
 5581                        	
 5582                        		.dbg	line,	"include\routines_LEVELS.c", 790; if(player_axis == AXIS_LEFT)
 5583                        		__ld.umq	_player_axis
         13:D3C3  AD 17 23   			lda	_player_axis
 5584                        		__equ_b.uiq	1
         13:D3C6  C9 01      			cmp	#1
         13:D3C8  F0 01      			beq	!+
         13:D3CA  18         			clc
         13:D3CB             	!:
 5585                        		__bfalse	.LL156
         13:D3CB  B0 03 4C 7F			bcc	.LL156
         13:D3CF  DA          
 5586                        	
 5587                        		.dbg	line,	"include\routines_LEVELS.c", 791; {
 5588                        	
 5589                        		.dbg	line,	"include\routines_LEVELS.c", 792; player_axis = AXIS_RIGHT;
 5590                        		__st.umiq	0, _player_axis
         13:D3D0  9C 17 23   			stz	_player_axis
 5591                        	
 5592                        		.dbg	line,	"include\routines_LEVELS.c", 793; player_previous_axis = player_axis;
 5593                        		__ld.um		_player_axis
         13:D3D3  AD 17 23   			lda	_player_axis
         13:D3D6  C2         			cly
 5594                        		__st.umq	_player_previous_axis
         13:D3D7  8D 18 23   			sta	_player_previous_axis
 5595                        	
 5596                        		.dbg	line,	"include\routines_LEVELS.c", 795; spr_set(player_id);
 5597                        		__ld.umq	_player_id
         13:D3DA  AD 15 23   			lda	_player_id
 5598                        		__call		_spr_set.1
         13:D3DD  20 DD E7   			call	_spr_set.1
 5599                        	
 5600                        		.dbg	line,	"include\routines_LEVELS.c", 796; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5601                        		__st.umiq	136, _al
         13:D3E0  A9 88      			lda.l	#136
         13:D3E2  85 F8      			sta	_al
 5602                        		__ld.uiq	0
         13:D3E4  62         			cla
 5603                        		__call		_spr_ctrl.2
         13:D3E5  20 3C E8   			call	_spr_ctrl.2
 5604                        	
 5605                        		.dbg	line,	"include\routines_LEVELS.c", 798; spr_set(chain_id);
 5606                        		__ld.umq	_chain_id
         13:D3E8  AD 22 23   			lda	_chain_id
 5607                        		__call		_spr_set.1
         13:D3EB  20 DD E7   			call	_spr_set.1
 5608                        	
 5609                        		.dbg	line,	"include\routines_LEVELS.c", 799; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5610                        		__st.umiq	136, _al
         13:D3EE  A9 88      			lda.l	#136
         13:D3F0  85 F8      			sta	_al
 5611                        		__ld.uiq	0
         13:D3F2  62         			cla
 5612                        		__call		_spr_ctrl.2
         13:D3F3  20 3C E8   			call	_spr_ctrl.2
 5613                        	
 5614                        		.dbg	line,	"include\routines_LEVELS.c", 801; spr_set(chain_id+1);
 5615                        		__ld.um		_chain_id
         13:D3F6  AD 22 23   			lda	_chain_id
         13:D3F9  C2         			cly
 5616                        		__add.wi	1
         13:D3FA  1A         			inc	a
         13:D3FB  D0 01      			bne	!+
         13:D3FD  C8         			iny
         13:D3FE             	!:
 5617                        		__call		_spr_set.1
         13:D3FE  20 DD E7   			call	_spr_set.1
 5618                        	
 5619                        		.dbg	line,	"include\routines_LEVELS.c", 802; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5620                        		__st.umiq	136, _al
         13:D401  A9 88      			lda.l	#136
         13:D403  85 F8      			sta	_al
 5621                        		__ld.uiq	0
         13:D405  62         			cla
 5622                        		__call		_spr_ctrl.2
         13:D406  20 3C E8   			call	_spr_ctrl.2
 5623                        	
 5624                        		.dbg	line,	"include\routines_LEVELS.c", 804; spr_set(chain_id+2);
 5625                        		__ld.um		_chain_id
         13:D409  AD 22 23   			lda	_chain_id
         13:D40C  C2         			cly
 5626                        		__add.wi	2
         13:D40D  18         			clc
         13:D40E  69 02      			adc.l	#2
         13:D410  90 01      			bcc	!+
         13:D412  C8         			iny
         13:D413             	!:
 5627                        		__call		_spr_set.1
         13:D413  20 DD E7   			call	_spr_set.1
 5628                        	
 5629                        		.dbg	line,	"include\routines_LEVELS.c", 805; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5630                        		__st.umiq	136, _al
         13:D416  A9 88      			lda.l	#136
         13:D418  85 F8      			sta	_al
 5631                        		__ld.uiq	0
         13:D41A  62         			cla
 5632                        		__call		_spr_ctrl.2
         13:D41B  20 3C E8   			call	_spr_ctrl.2
 5633                        	
 5634                        		.dbg	line,	"include\routines_LEVELS.c", 807; spr_set(weapon_id);
 5635                        		__ld.umq	_weapon_id
         13:D41E  AD 23 23   			lda	_weapon_id
 5636                        		__call		_spr_set.1
         13:D421  20 DD E7   			call	_spr_set.1
 5637                        	
 5638                        		.dbg	line,	"include\routines_LEVELS.c", 808; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5639                        		__st.umiq	136, _al
         13:D424  A9 88      			lda.l	#136
         13:D426  85 F8      			sta	_al
 5640                        		__ld.uiq	0
         13:D428  62         			cla
 5641                        		__call		_spr_ctrl.2
         13:D429  20 3C E8   			call	_spr_ctrl.2
 5642                        	
 5643                        		.dbg	line,	"include\routines_LEVELS.c", 809; spr_x(player_pos_x+17);
 5644                        		__ld.wm		_player_pos_x
         13:D42C  AD D3 24   			lda.l	_player_pos_x
         13:D42F  AC D4 24   			ldy.h	_player_pos_x
 5645                        		__add.wi	17
         13:D432  18         			clc
         13:D433  69 11      			adc.l	#17
         13:D435  90 01      			bcc	!+
         13:D437  C8         			iny
         13:D438             	!:
 5646                        		__call		_spr_x.1
         13:D438  20 0A E8   			call	_spr_x.1
 5647                        	
 5648                        		.dbg	line,	"include\routines_LEVELS.c", 810; }
 5649                        	
 5650                        		.dbg	line,	"include\routines_LEVELS.c", 811; }
 5651    13:D43B             	.LL156	.alias		.LL157
 5652                        	
 5653                        		.dbg	line,	"include\routines_LEVELS.c", 814; else if(player_state == STATE_CLIMB_UP || player_state == STATE_CLIMB_DOWN)
 5654                        		__bra		.LL157
         13:D43B  4C 7F DA   			bra	.LL157
 5655    13:D43E             	.LL155:
 5656                        		__ld.umq	_player_state
         13:D43E  AD 16 23   			lda	_player_state
 5657                        		__equ_b.uiq	11
         13:D441  C9 0B      			cmp	#11
         13:D443  F0 01      			beq	!+
         13:D445  18         			clc
         13:D446             	!:
 5658                        		__btrue		.LL159
         13:D446  B0 08      			bcs	.LL159
 5659                        		__ld.umq	_player_state
         13:D448  AD 16 23   			lda	_player_state
 5660                        		__equ_b.uiq	12
         13:D44B  C9 0C      			cmp	#12
         13:D44D  F0 01      			beq	!+
         13:D44F  18         			clc
         13:D450             	!:
 5661    13:D450             	.LL159:
 5662                        		__bfalse	.LL158
         13:D450  B0 03 4C 7F			bcc	.LL158
         13:D454  DA          
 5663                        	
 5664                        		.dbg	line,	"include\routines_LEVELS.c", 815; {
 5665                        	
 5666                        		.dbg	line,	"include\routines_LEVELS.c", 816; spr_set(player_id);
 5667                        		__ld.umq	_player_id
         13:D455  AD 15 23   			lda	_player_id
 5668                        		__call		_spr_set.1
         13:D458  20 DD E7   			call	_spr_set.1
 5669                        	
 5670                        		.dbg	line,	"include\routines_LEVELS.c", 817; spr_pattern(PLAYER_HANG_VRAM_ADR);
 5671                        		__ld.wi		7936
         13:D45B  62         			cla
         13:D45C  A0 1F      			ldy.h	#7936
 5672                        		__call		_spr_pattern.1
         13:D45E  20 26 E8   			call	_spr_pattern.1
 5673                        	
 5674                        		.dbg	line,	"include\routines_LEVELS.c", 818; player_counter_anim = 0;
 5675                        		__st.umiq	0, _player_counter_anim
         13:D461  9C 19 23   			stz	_player_counter_anim
 5676                        	
 5677                        		.dbg	line,	"include\routines_LEVELS.c", 819; player_state = STATE_HANG;
 5678                        		__st.umiq	10, _player_state
         13:D464  A9 0A      			lda.l	#10
         13:D466  8D 16 23   			sta	_player_state
 5679                        	
 5680                        		.dbg	line,	"include\routines_LEVELS.c", 820; }
 5681                        	
 5682                        		.dbg	line,	"include\routines_LEVELS.c", 821; }
 5683    13:D469             	.LL158	.alias		.LL160
 5684    13:D469             	.LL157	.alias		.LL160
 5685    13:D469             	.LL154	.alias		.LL160
 5686    13:D469             	.LL151	.alias		.LL160
 5687    13:D469             	.LL148	.alias		.LL160
 5688    13:D469             	.LL145	.alias		.LL160
 5689    13:D469             	.LL140	.alias		.LL160
 5690                        	
 5691                        		.dbg	line,	"include\routines_LEVELS.c", 824; //--------------------------------------------------------------------------------------//
 5692                        	
 5693                        		.dbg	line,	"include\routines_LEVELS.c", 825; //                                     LEFT BUTTON                                      //
 5694                        	
 5695                        		.dbg	line,	"include\routines_LEVELS.c", 826; //--------------------------------------------------------------------------------------//
 5696                        	
 5697                        		.dbg	line,	"include\routines_LEVELS.c", 828; else if(joy(JOYPAD_1) & JOY_LEFT)
 5698                        		__bra		.LL160
         13:D469  4C 7F DA   			bra	.LL160
 5699    13:D46C             	.LL135:
 5700                        		__ld.uiq	0
         13:D46C  62         			cla
 5701                        		 _joy.1
         13:D46D  AA         			tax
         13:D46E  BD 28 22   			lda	joynow, x
         13:D471  BC D3 22   			ldy	joy6now, x
 5702                        		__tand.wi	128
         13:D474  29 80      			and	#128
         13:D476  C9 01      	!:		cmp	#1
 5703                        		__bfalse	.LL161
         13:D478  B0 03 4C 40			bcc	.LL161
         13:D47C  D8          
 5704                        	
 5705                        		.dbg	line,	"include\routines_LEVELS.c", 829; {
 5706                        	
 5707                        		.dbg	line,	"include\routines_LEVELS.c", 830; if(player_state == STATE_IDLE || player_state == STATE_WALK)
 5708                        		__not.um	_player_state
         13:D47D  AD 16 23   			lda	_player_state
         13:D480  18         			clc
         13:D481  D0 01      			bne	!+
         13:D483  38         			sec
         13:D484             	!:
 5709                        		__btrue		.LL163
         13:D484  B0 08      			bcs	.LL163
 5710                        		__ld.umq	_player_state
         13:D486  AD 16 23   			lda	_player_state
 5711                        		__equ_b.uiq	1
         13:D489  C9 01      			cmp	#1
         13:D48B  F0 01      			beq	!+
         13:D48D  18         			clc
         13:D48E             	!:
 5712    13:D48E             	.LL163:
 5713                        		__bfalse	.LL162
         13:D48E  B0 03 4C 34			bcc	.LL162
         13:D492  D5          
 5714                        	
 5715                        		.dbg	line,	"include\routines_LEVELS.c", 831; {
 5716                        	
 5717                        		.dbg	line,	"include\routines_LEVELS.c", 832; player_axis = AXIS_LEFT;
 5718                        		__st.umiq	1, _player_axis
         13:D493  A9 01      			lda.l	#1
         13:D495  8D 17 23   			sta	_player_axis
 5719                        	
 5720                        		.dbg	line,	"include\routines_LEVELS.c", 834; if(player_previous_axis != player_axis)
 5721                        		__ld.umq	_player_previous_axis
         13:D498  AD 18 23   			lda	_player_previous_axis
 5722                        		__neq_b.umq	_player_axis
         13:D49B  38         			sec
         13:D49C  4D 17 23   			eor	_player_axis
         13:D49F  D0 01      			bne	!+
         13:D4A1  18         			clc
         13:D4A2             	!:
 5723                        		__bfalse	.LL164
         13:D4A2  90 6D      			bcc	.LL164
 5724                        	
 5725                        		.dbg	line,	"include\routines_LEVELS.c", 835; {
 5726                        	
 5727                        		.dbg	line,	"include\routines_LEVELS.c", 836; player_previous_axis = player_axis;
 5728                        		__ld.um		_player_axis
         13:D4A4  AD 17 23   			lda	_player_axis
         13:D4A7  C2         			cly
 5729                        		__st.umq	_player_previous_axis
         13:D4A8  8D 18 23   			sta	_player_previous_axis
 5730                        	
 5731                        		.dbg	line,	"include\routines_LEVELS.c", 838; spr_set(player_id);
 5732                        		__ld.umq	_player_id
         13:D4AB  AD 15 23   			lda	_player_id
 5733                        		__call		_spr_set.1
         13:D4AE  20 DD E7   			call	_spr_set.1
 5734                        	
 5735                        		.dbg	line,	"include\routines_LEVELS.c", 839; spr_ctrl(FLIP_MAS, FLIP_X);
 5736                        		__st.umiq	136, _al
         13:D4B1  A9 88      			lda.l	#136
         13:D4B3  85 F8      			sta	_al
 5737                        		__ld.uiq	8
         13:D4B5  A9 08      			lda	#8
 5738                        		__call		_spr_ctrl.2
         13:D4B7  20 3C E8   			call	_spr_ctrl.2
 5739                        	
 5740                        		.dbg	line,	"include\routines_LEVELS.c", 841; spr_set(chain_id);
 5741                        		__ld.umq	_chain_id
         13:D4BA  AD 22 23   			lda	_chain_id
 5742                        		__call		_spr_set.1
         13:D4BD  20 DD E7   			call	_spr_set.1
 5743                        	
 5744                        		.dbg	line,	"include\routines_LEVELS.c", 842; spr_ctrl(FLIP_MAS, FLIP_X);
 5745                        		__st.umiq	136, _al
         13:D4C0  A9 88      			lda.l	#136
         13:D4C2  85 F8      			sta	_al
 5746                        		__ld.uiq	8
         13:D4C4  A9 08      			lda	#8
 5747                        		__call		_spr_ctrl.2
         13:D4C6  20 3C E8   			call	_spr_ctrl.2
 5748                        	
 5749                        		.dbg	line,	"include\routines_LEVELS.c", 844; spr_set(chain_id+1);
 5750                        		__ld.um		_chain_id
         13:D4C9  AD 22 23   			lda	_chain_id
         13:D4CC  C2         			cly
 5751                        		__add.wi	1
         13:D4CD  1A         			inc	a
         13:D4CE  D0 01      			bne	!+
         13:D4D0  C8         			iny
         13:D4D1             	!:
 5752                        		__call		_spr_set.1
         13:D4D1  20 DD E7   			call	_spr_set.1
 5753                        	
 5754                        		.dbg	line,	"include\routines_LEVELS.c", 845; spr_ctrl(FLIP_MAS, FLIP_X);
 5755                        		__st.umiq	136, _al
         13:D4D4  A9 88      			lda.l	#136
         13:D4D6  85 F8      			sta	_al
 5756                        		__ld.uiq	8
         13:D4D8  A9 08      			lda	#8
 5757                        		__call		_spr_ctrl.2
         13:D4DA  20 3C E8   			call	_spr_ctrl.2
 5758                        	
 5759                        		.dbg	line,	"include\routines_LEVELS.c", 847; spr_set(chain_id+2);
 5760                        		__ld.um		_chain_id
         13:D4DD  AD 22 23   			lda	_chain_id
         13:D4E0  C2         			cly
 5761                        		__add.wi	2
         13:D4E1  18         			clc
         13:D4E2  69 02      			adc.l	#2
         13:D4E4  90 01      			bcc	!+
         13:D4E6  C8         			iny
         13:D4E7             	!:
 5762                        		__call		_spr_set.1
         13:D4E7  20 DD E7   			call	_spr_set.1
 5763                        	
 5764                        		.dbg	line,	"include\routines_LEVELS.c", 848; spr_ctrl(FLIP_MAS, FLIP_X);
 5765                        		__st.umiq	136, _al
         13:D4EA  A9 88      			lda.l	#136
         13:D4EC  85 F8      			sta	_al
 5766                        		__ld.uiq	8
         13:D4EE  A9 08      			lda	#8
 5767                        		__call		_spr_ctrl.2
         13:D4F0  20 3C E8   			call	_spr_ctrl.2
 5768                        	
 5769                        		.dbg	line,	"include\routines_LEVELS.c", 850; spr_set(weapon_id);
 5770                        		__ld.umq	_weapon_id
         13:D4F3  AD 23 23   			lda	_weapon_id
 5771                        		__call		_spr_set.1
         13:D4F6  20 DD E7   			call	_spr_set.1
 5772                        	
 5773                        		.dbg	line,	"include\routines_LEVELS.c", 851; spr_ctrl(FLIP_MAS, FLIP_X);
 5774                        		__st.umiq	136, _al
         13:D4F9  A9 88      			lda.l	#136
         13:D4FB  85 F8      			sta	_al
 5775                        		__ld.uiq	8
         13:D4FD  A9 08      			lda	#8
 5776                        		__call		_spr_ctrl.2
         13:D4FF  20 3C E8   			call	_spr_ctrl.2
 5777                        	
 5778                        		.dbg	line,	"include\routines_LEVELS.c", 852; spr_x(player_pos_x+15);
 5779                        		__ld.wm		_player_pos_x
         13:D502  AD D3 24   			lda.l	_player_pos_x
         13:D505  AC D4 24   			ldy.h	_player_pos_x
 5780                        		__add.wi	15
         13:D508  18         			clc
         13:D509  69 0F      			adc.l	#15
         13:D50B  90 01      			bcc	!+
         13:D50D  C8         			iny
         13:D50E             	!:
 5781                        		__call		_spr_x.1
         13:D50E  20 0A E8   			call	_spr_x.1
 5782                        	
 5783                        		.dbg	line,	"include\routines_LEVELS.c", 853; }
 5784                        	
 5785                        		.dbg	line,	"include\routines_LEVELS.c", 855; if(joy(JOYPAD_1) & JOY_DOWN)
 5786    13:D511             	.LL164:
 5787                        		__ld.uiq	0
         13:D511  62         			cla
 5788                        		 _joy.1
         13:D512  AA         			tax
         13:D513  BD 28 22   			lda	joynow, x
         13:D516  BC D3 22   			ldy	joy6now, x
 5789                        		__tand.wi	64
         13:D519  29 40      			and	#64
         13:D51B  C9 01      	!:		cmp	#1
 5790                        		__bfalse	.LL165
         13:D51D  90 0D      			bcc	.LL165
 5791                        	
 5792                        		.dbg	line,	"include\routines_LEVELS.c", 856; {
 5793                        	
 5794                        		.dbg	line,	"include\routines_LEVELS.c", 857; player_counter_anim = 1;
 5795                        		__st.umiq	1, _player_counter_anim
         13:D51F  A9 01      			lda.l	#1
         13:D521  8D 19 23   			sta	_player_counter_anim
 5796                        	
 5797                        		.dbg	line,	"include\routines_LEVELS.c", 858; player_state = STATE_CROUCH;
 5798                        		__st.umiq	7, _player_state
         13:D524  A9 07      			lda.l	#7
         13:D526  8D 16 23   			sta	_player_state
 5799                        	
 5800                        		.dbg	line,	"include\routines_LEVELS.c", 859; return;
 5801                        		__bra		.LL126
         13:D529  4C 7F DA   			bra	.LL126
 5802                        	
 5803                        		.dbg	line,	"include\routines_LEVELS.c", 860; }
 5804                        	
 5805                        		.dbg	line,	"include\routines_LEVELS.c", 862; player_state = STATE_WALK;
 5806    13:D52C             	.LL165:
 5807                        		__st.umiq	1, _player_state
         13:D52C  A9 01      			lda.l	#1
         13:D52E  8D 16 23   			sta	_player_state
 5808                        	
 5809                        		.dbg	line,	"include\routines_LEVELS.c", 863; }
 5810                        	
 5811                        		.dbg	line,	"include\routines_LEVELS.c", 866; else if(player_state == STATE_JUMP)
 5812                        		__bra		.LL166
         13:D531  4C 7F DA   			bra	.LL166
 5813    13:D534             	.LL162:
 5814                        		__ld.umq	_player_state
         13:D534  AD 16 23   			lda	_player_state
 5815                        		__equ_b.uiq	4
         13:D537  C9 04      			cmp	#4
         13:D539  F0 01      			beq	!+
         13:D53B  18         			clc
         13:D53C             	!:
 5816                        		__bfalse	.LL167
         13:D53C  B0 03 4C DA			bcc	.LL167
         13:D540  D5          
 5817                        	
 5818                        		.dbg	line,	"include\routines_LEVELS.c", 867; {
 5819                        	
 5820                        		.dbg	line,	"include\routines_LEVELS.c", 868; if(player_axis == AXIS_RIGHT)
 5821                        		__not.um	_player_axis
         13:D541  AD 17 23   			lda	_player_axis
         13:D544  18         			clc
         13:D545  D0 01      			bne	!+
         13:D547  38         			sec
         13:D548             	!:
 5822                        		__bfalse	.LL168
         13:D548  90 72      			bcc	.LL168
 5823                        	
 5824                        		.dbg	line,	"include\routines_LEVELS.c", 869; {
 5825                        	
 5826                        		.dbg	line,	"include\routines_LEVELS.c", 870; player_axis = AXIS_LEFT;
 5827                        		__st.umiq	1, _player_axis
         13:D54A  A9 01      			lda.l	#1
         13:D54C  8D 17 23   			sta	_player_axis
 5828                        	
 5829                        		.dbg	line,	"include\routines_LEVELS.c", 871; player_previous_axis = player_axis;
 5830                        		__ld.um		_player_axis
         13:D54F  AD 17 23   			lda	_player_axis
         13:D552  C2         			cly
 5831                        		__st.umq	_player_previous_axis
         13:D553  8D 18 23   			sta	_player_previous_axis
 5832                        	
 5833                        		.dbg	line,	"include\routines_LEVELS.c", 873; spr_set(player_id);
 5834                        		__ld.umq	_player_id
         13:D556  AD 15 23   			lda	_player_id
 5835                        		__call		_spr_set.1
         13:D559  20 DD E7   			call	_spr_set.1
 5836                        	
 5837                        		.dbg	line,	"include\routines_LEVELS.c", 874; spr_ctrl(FLIP_MAS, FLIP_X);
 5838                        		__st.umiq	136, _al
         13:D55C  A9 88      			lda.l	#136
         13:D55E  85 F8      			sta	_al
 5839                        		__ld.uiq	8
         13:D560  A9 08      			lda	#8
 5840                        		__call		_spr_ctrl.2
         13:D562  20 3C E8   			call	_spr_ctrl.2
 5841                        	
 5842                        		.dbg	line,	"include\routines_LEVELS.c", 876; spr_set(chain_id);
 5843                        		__ld.umq	_chain_id
         13:D565  AD 22 23   			lda	_chain_id
 5844                        		__call		_spr_set.1
         13:D568  20 DD E7   			call	_spr_set.1
 5845                        	
 5846                        		.dbg	line,	"include\routines_LEVELS.c", 877; spr_ctrl(FLIP_MAS, FLIP_X);
 5847                        		__st.umiq	136, _al
         13:D56B  A9 88      			lda.l	#136
         13:D56D  85 F8      			sta	_al
 5848                        		__ld.uiq	8
         13:D56F  A9 08      			lda	#8
 5849                        		__call		_spr_ctrl.2
         13:D571  20 3C E8   			call	_spr_ctrl.2
 5850                        	
 5851                        		.dbg	line,	"include\routines_LEVELS.c", 879; spr_set(chain_id+1);
 5852                        		__ld.um		_chain_id
         13:D574  AD 22 23   			lda	_chain_id
         13:D577  C2         			cly
 5853                        		__add.wi	1
         13:D578  1A         			inc	a
         13:D579  D0 01      			bne	!+
         13:D57B  C8         			iny
         13:D57C             	!:
 5854                        		__call		_spr_set.1
         13:D57C  20 DD E7   			call	_spr_set.1
 5855                        	
 5856                        		.dbg	line,	"include\routines_LEVELS.c", 880; spr_ctrl(FLIP_MAS, FLIP_X);
 5857                        		__st.umiq	136, _al
         13:D57F  A9 88      			lda.l	#136
         13:D581  85 F8      			sta	_al
 5858                        		__ld.uiq	8
         13:D583  A9 08      			lda	#8
 5859                        		__call		_spr_ctrl.2
         13:D585  20 3C E8   			call	_spr_ctrl.2
 5860                        	
 5861                        		.dbg	line,	"include\routines_LEVELS.c", 882; spr_set(chain_id+2);
 5862                        		__ld.um		_chain_id
         13:D588  AD 22 23   			lda	_chain_id
         13:D58B  C2         			cly
 5863                        		__add.wi	2
         13:D58C  18         			clc
         13:D58D  69 02      			adc.l	#2
         13:D58F  90 01      			bcc	!+
         13:D591  C8         			iny
         13:D592             	!:
 5864                        		__call		_spr_set.1
         13:D592  20 DD E7   			call	_spr_set.1
 5865                        	
 5866                        		.dbg	line,	"include\routines_LEVELS.c", 883; spr_ctrl(FLIP_MAS, FLIP_X);
 5867                        		__st.umiq	136, _al
         13:D595  A9 88      			lda.l	#136
         13:D597  85 F8      			sta	_al
 5868                        		__ld.uiq	8
         13:D599  A9 08      			lda	#8
 5869                        		__call		_spr_ctrl.2
         13:D59B  20 3C E8   			call	_spr_ctrl.2
 5870                        	
 5871                        		.dbg	line,	"include\routines_LEVELS.c", 885; spr_set(weapon_id);
 5872                        		__ld.umq	_weapon_id
         13:D59E  AD 23 23   			lda	_weapon_id
 5873                        		__call		_spr_set.1
         13:D5A1  20 DD E7   			call	_spr_set.1
 5874                        	
 5875                        		.dbg	line,	"include\routines_LEVELS.c", 886; spr_ctrl(FLIP_MAS, FLIP_X);
 5876                        		__st.umiq	136, _al
         13:D5A4  A9 88      			lda.l	#136
         13:D5A6  85 F8      			sta	_al
 5877                        		__ld.uiq	8
         13:D5A8  A9 08      			lda	#8
 5878                        		__call		_spr_ctrl.2
         13:D5AA  20 3C E8   			call	_spr_ctrl.2
 5879                        	
 5880                        		.dbg	line,	"include\routines_LEVELS.c", 887; spr_x(player_pos_x+21);
 5881                        		__ld.wm		_player_pos_x
         13:D5AD  AD D3 24   			lda.l	_player_pos_x
         13:D5B0  AC D4 24   			ldy.h	_player_pos_x
 5882                        		__add.wi	21
         13:D5B3  18         			clc
         13:D5B4  69 15      			adc.l	#21
         13:D5B6  90 01      			bcc	!+
         13:D5B8  C8         			iny
         13:D5B9             	!:
 5883                        		__call		_spr_x.1
         13:D5B9  20 0A E8   			call	_spr_x.1
 5884                        	
 5885                        		.dbg	line,	"include\routines_LEVELS.c", 888; }
 5886                        	
 5887                        		.dbg	line,	"include\routines_LEVELS.c", 890; if(player_index_jump > 11 && player_index_jump < 15)
 5888    13:D5BC             	.LL168:
 5889                        		__ld.umq	_player_index_jump
         13:D5BC  AD 1A 23   			lda	_player_index_jump
 5890                        		__ugt_b.uiq	11
         13:D5BF  18         			clc			; Subtract integer+1 from A.
         13:D5C0  E9 0B      			sbc	#11		; CS if A > integer.
 5891                        		__bfalse	.LL170
         13:D5C2  90 09      			bcc	.LL170
 5892                        		__ld.umq	_player_index_jump
         13:D5C4  AD 1A 23   			lda	_player_index_jump
 5893                        		__ult_b.uiq	15
         13:D5C7  C9 0F      			cmp	#15		; Subtract integer from A.
         13:D5C9  6A         			ror	a		; CC if A < integer.
         13:D5CA  49 80      			eor	#$80
         13:D5CC  2A         			rol	a
 5894    13:D5CD             	.LL170:
 5895                        		__bfalse	.LL169
         13:D5CD  B0 03 4C 7F			bcc	.LL169
         13:D5D1  DA          
 5896                        	
 5897                        		.dbg	line,	"include\routines_LEVELS.c", 891; {
 5898                        	
 5899                        		.dbg	line,	"include\routines_LEVELS.c", 892; player_state = STATE_JUMP_LEFT;                        
 5900                        		__st.umiq	6, _player_state
         13:D5D2  A9 06      			lda.l	#6
         13:D5D4  8D 16 23   			sta	_player_state
 5901                        	
 5902                        		.dbg	line,	"include\routines_LEVELS.c", 893; }
 5903                        	
 5904                        		.dbg	line,	"include\routines_LEVELS.c", 894; }
 5905    13:D5D7             	.LL169	.alias		.LL171
 5906                        	
 5907                        		.dbg	line,	"include\routines_LEVELS.c", 897; else if(player_state == STATE_JUMP_RIGHT)
 5908                        		__bra		.LL171
         13:D5D7  4C 7F DA   			bra	.LL171
 5909    13:D5DA             	.LL167:
 5910                        		__ld.umq	_player_state
         13:D5DA  AD 16 23   			lda	_player_state
 5911                        		__equ_b.uiq	5
         13:D5DD  C9 05      			cmp	#5
         13:D5DF  F0 01      			beq	!+
         13:D5E1  18         			clc
         13:D5E2             	!:
 5912                        		__bfalse	.LL172
         13:D5E2  B0 03 4C 68			bcc	.LL172
         13:D5E6  D6          
 5913                        	
 5914                        		.dbg	line,	"include\routines_LEVELS.c", 898; {
 5915                        	
 5916                        		.dbg	line,	"include\routines_LEVELS.c", 899; if(player_axis == AXIS_RIGHT)
 5917                        		__not.um	_player_axis
         13:D5E7  AD 17 23   			lda	_player_axis
         13:D5EA  18         			clc
         13:D5EB  D0 01      			bne	!+
         13:D5ED  38         			sec
         13:D5EE             	!:
 5918                        		__bfalse	.LL173
         13:D5EE  B0 03 4C 7F			bcc	.LL173
         13:D5F2  DA          
 5919                        	
 5920                        		.dbg	line,	"include\routines_LEVELS.c", 900; {
 5921                        	
 5922                        		.dbg	line,	"include\routines_LEVELS.c", 901; player_axis = AXIS_LEFT;
 5923                        		__st.umiq	1, _player_axis
         13:D5F3  A9 01      			lda.l	#1
         13:D5F5  8D 17 23   			sta	_player_axis
 5924                        	
 5925                        		.dbg	line,	"include\routines_LEVELS.c", 902; player_previous_axis = player_axis;
 5926                        		__ld.um		_player_axis
         13:D5F8  AD 17 23   			lda	_player_axis
         13:D5FB  C2         			cly
 5927                        		__st.umq	_player_previous_axis
         13:D5FC  8D 18 23   			sta	_player_previous_axis
 5928                        	
 5929                        		.dbg	line,	"include\routines_LEVELS.c", 904; spr_set(player_id);
 5930                        		__ld.umq	_player_id
         13:D5FF  AD 15 23   			lda	_player_id
 5931                        		__call		_spr_set.1
         13:D602  20 DD E7   			call	_spr_set.1
 5932                        	
 5933                        		.dbg	line,	"include\routines_LEVELS.c", 905; spr_ctrl(FLIP_MAS, FLIP_X);
 5934                        		__st.umiq	136, _al
         13:D605  A9 88      			lda.l	#136
         13:D607  85 F8      			sta	_al
 5935                        		__ld.uiq	8
         13:D609  A9 08      			lda	#8
 5936                        		__call		_spr_ctrl.2
         13:D60B  20 3C E8   			call	_spr_ctrl.2
 5937                        	
 5938                        		.dbg	line,	"include\routines_LEVELS.c", 907; spr_set(chain_id);
 5939                        		__ld.umq	_chain_id
         13:D60E  AD 22 23   			lda	_chain_id
 5940                        		__call		_spr_set.1
         13:D611  20 DD E7   			call	_spr_set.1
 5941                        	
 5942                        		.dbg	line,	"include\routines_LEVELS.c", 908; spr_ctrl(FLIP_MAS, FLIP_X);
 5943                        		__st.umiq	136, _al
         13:D614  A9 88      			lda.l	#136
         13:D616  85 F8      			sta	_al
 5944                        		__ld.uiq	8
         13:D618  A9 08      			lda	#8
 5945                        		__call		_spr_ctrl.2
         13:D61A  20 3C E8   			call	_spr_ctrl.2
 5946                        	
 5947                        		.dbg	line,	"include\routines_LEVELS.c", 910; spr_set(chain_id+1);
 5948                        		__ld.um		_chain_id
         13:D61D  AD 22 23   			lda	_chain_id
         13:D620  C2         			cly
 5949                        		__add.wi	1
         13:D621  1A         			inc	a
         13:D622  D0 01      			bne	!+
         13:D624  C8         			iny
         13:D625             	!:
 5950                        		__call		_spr_set.1
         13:D625  20 DD E7   			call	_spr_set.1
 5951                        	
 5952                        		.dbg	line,	"include\routines_LEVELS.c", 911; spr_ctrl(FLIP_MAS, FLIP_X);
 5953                        		__st.umiq	136, _al
         13:D628  A9 88      			lda.l	#136
         13:D62A  85 F8      			sta	_al
 5954                        		__ld.uiq	8
         13:D62C  A9 08      			lda	#8
 5955                        		__call		_spr_ctrl.2
         13:D62E  20 3C E8   			call	_spr_ctrl.2
 5956                        	
 5957                        		.dbg	line,	"include\routines_LEVELS.c", 913; spr_set(chain_id+2);
 5958                        		__ld.um		_chain_id
         13:D631  AD 22 23   			lda	_chain_id
         13:D634  C2         			cly
 5959                        		__add.wi	2
         13:D635  18         			clc
         13:D636  69 02      			adc.l	#2
         13:D638  90 01      			bcc	!+
         13:D63A  C8         			iny
         13:D63B             	!:
 5960                        		__call		_spr_set.1
         13:D63B  20 DD E7   			call	_spr_set.1
 5961                        	
 5962                        		.dbg	line,	"include\routines_LEVELS.c", 914; spr_ctrl(FLIP_MAS, FLIP_X);
 5963                        		__st.umiq	136, _al
         13:D63E  A9 88      			lda.l	#136
         13:D640  85 F8      			sta	_al
 5964                        		__ld.uiq	8
         13:D642  A9 08      			lda	#8
 5965                        		__call		_spr_ctrl.2
         13:D644  20 3C E8   			call	_spr_ctrl.2
 5966                        	
 5967                        		.dbg	line,	"include\routines_LEVELS.c", 916; spr_set(weapon_id);
 5968                        		__ld.umq	_weapon_id
         13:D647  AD 23 23   			lda	_weapon_id
 5969                        		__call		_spr_set.1
         13:D64A  20 DD E7   			call	_spr_set.1
 5970                        	
 5971                        		.dbg	line,	"include\routines_LEVELS.c", 917; spr_ctrl(FLIP_MAS, FLIP_X);
 5972                        		__st.umiq	136, _al
         13:D64D  A9 88      			lda.l	#136
         13:D64F  85 F8      			sta	_al
 5973                        		__ld.uiq	8
         13:D651  A9 08      			lda	#8
 5974                        		__call		_spr_ctrl.2
         13:D653  20 3C E8   			call	_spr_ctrl.2
 5975                        	
 5976                        		.dbg	line,	"include\routines_LEVELS.c", 918; spr_x(player_pos_x+21);
 5977                        		__ld.wm		_player_pos_x
         13:D656  AD D3 24   			lda.l	_player_pos_x
         13:D659  AC D4 24   			ldy.h	_player_pos_x
 5978                        		__add.wi	21
         13:D65C  18         			clc
         13:D65D  69 15      			adc.l	#21
         13:D65F  90 01      			bcc	!+
         13:D661  C8         			iny
         13:D662             	!:
 5979                        		__call		_spr_x.1
         13:D662  20 0A E8   			call	_spr_x.1
 5980                        	
 5981                        		.dbg	line,	"include\routines_LEVELS.c", 919; }
 5982                        	
 5983                        		.dbg	line,	"include\routines_LEVELS.c", 920; }
 5984    13:D665             	.LL173	.alias		.LL174
 5985                        	
 5986                        		.dbg	line,	"include\routines_LEVELS.c", 923; else if(player_state == STATE_CROUCH)
 5987                        		__bra		.LL174
         13:D665  4C 7F DA   			bra	.LL174
 5988    13:D668             	.LL172:
 5989                        		__ld.umq	_player_state
         13:D668  AD 16 23   			lda	_player_state
 5990                        		__equ_b.uiq	7
         13:D66B  C9 07      			cmp	#7
         13:D66D  F0 01      			beq	!+
         13:D66F  18         			clc
         13:D670             	!:
 5991                        		__bfalse	.LL175
         13:D670  B0 03 4C F6			bcc	.LL175
         13:D674  D6          
 5992                        	
 5993                        		.dbg	line,	"include\routines_LEVELS.c", 924; {
 5994                        	
 5995                        		.dbg	line,	"include\routines_LEVELS.c", 925; if(player_axis == AXIS_RIGHT)
 5996                        		__not.um	_player_axis
         13:D675  AD 17 23   			lda	_player_axis
         13:D678  18         			clc
         13:D679  D0 01      			bne	!+
         13:D67B  38         			sec
         13:D67C             	!:
 5997                        		__bfalse	.LL176
         13:D67C  B0 03 4C 7F			bcc	.LL176
         13:D680  DA          
 5998                        	
 5999                        		.dbg	line,	"include\routines_LEVELS.c", 926; {
 6000                        	
 6001                        		.dbg	line,	"include\routines_LEVELS.c", 927; player_axis = AXIS_LEFT;
 6002                        		__st.umiq	1, _player_axis
         13:D681  A9 01      			lda.l	#1
         13:D683  8D 17 23   			sta	_player_axis
 6003                        	
 6004                        		.dbg	line,	"include\routines_LEVELS.c", 928; player_previous_axis = player_axis;
 6005                        		__ld.um		_player_axis
         13:D686  AD 17 23   			lda	_player_axis
         13:D689  C2         			cly
 6006                        		__st.umq	_player_previous_axis
         13:D68A  8D 18 23   			sta	_player_previous_axis
 6007                        	
 6008                        		.dbg	line,	"include\routines_LEVELS.c", 930; spr_set(player_id);
 6009                        		__ld.umq	_player_id
         13:D68D  AD 15 23   			lda	_player_id
 6010                        		__call		_spr_set.1
         13:D690  20 DD E7   			call	_spr_set.1
 6011                        	
 6012                        		.dbg	line,	"include\routines_LEVELS.c", 931; spr_ctrl(FLIP_MAS, FLIP_X);
 6013                        		__st.umiq	136, _al
         13:D693  A9 88      			lda.l	#136
         13:D695  85 F8      			sta	_al
 6014                        		__ld.uiq	8
         13:D697  A9 08      			lda	#8
 6015                        		__call		_spr_ctrl.2
         13:D699  20 3C E8   			call	_spr_ctrl.2
 6016                        	
 6017                        		.dbg	line,	"include\routines_LEVELS.c", 933; spr_set(chain_id);
 6018                        		__ld.umq	_chain_id
         13:D69C  AD 22 23   			lda	_chain_id
 6019                        		__call		_spr_set.1
         13:D69F  20 DD E7   			call	_spr_set.1
 6020                        	
 6021                        		.dbg	line,	"include\routines_LEVELS.c", 934; spr_ctrl(FLIP_MAS, FLIP_X);
 6022                        		__st.umiq	136, _al
         13:D6A2  A9 88      			lda.l	#136
         13:D6A4  85 F8      			sta	_al
 6023                        		__ld.uiq	8
         13:D6A6  A9 08      			lda	#8
 6024                        		__call		_spr_ctrl.2
         13:D6A8  20 3C E8   			call	_spr_ctrl.2
 6025                        	
 6026                        		.dbg	line,	"include\routines_LEVELS.c", 936; spr_set(chain_id+1);
 6027                        		__ld.um		_chain_id
         13:D6AB  AD 22 23   			lda	_chain_id
         13:D6AE  C2         			cly
 6028                        		__add.wi	1
         13:D6AF  1A         			inc	a
         13:D6B0  D0 01      			bne	!+
         13:D6B2  C8         			iny
         13:D6B3             	!:
 6029                        		__call		_spr_set.1
         13:D6B3  20 DD E7   			call	_spr_set.1
 6030                        	
 6031                        		.dbg	line,	"include\routines_LEVELS.c", 937; spr_ctrl(FLIP_MAS, FLIP_X);
 6032                        		__st.umiq	136, _al
         13:D6B6  A9 88      			lda.l	#136
         13:D6B8  85 F8      			sta	_al
 6033                        		__ld.uiq	8
         13:D6BA  A9 08      			lda	#8
 6034                        		__call		_spr_ctrl.2
         13:D6BC  20 3C E8   			call	_spr_ctrl.2
 6035                        	
 6036                        		.dbg	line,	"include\routines_LEVELS.c", 939; spr_set(chain_id+2);
 6037                        		__ld.um		_chain_id
         13:D6BF  AD 22 23   			lda	_chain_id
         13:D6C2  C2         			cly
 6038                        		__add.wi	2
         13:D6C3  18         			clc
         13:D6C4  69 02      			adc.l	#2
         13:D6C6  90 01      			bcc	!+
         13:D6C8  C8         			iny
         13:D6C9             	!:
 6039                        		__call		_spr_set.1
         13:D6C9  20 DD E7   			call	_spr_set.1
 6040                        	
 6041                        		.dbg	line,	"include\routines_LEVELS.c", 940; spr_ctrl(FLIP_MAS, FLIP_X);
 6042                        		__st.umiq	136, _al
         13:D6CC  A9 88      			lda.l	#136
         13:D6CE  85 F8      			sta	_al
 6043                        		__ld.uiq	8
         13:D6D0  A9 08      			lda	#8
 6044                        		__call		_spr_ctrl.2
         13:D6D2  20 3C E8   			call	_spr_ctrl.2
 6045                        	
 6046                        		.dbg	line,	"include\routines_LEVELS.c", 942; spr_set(weapon_id);
 6047                        		__ld.umq	_weapon_id
         13:D6D5  AD 23 23   			lda	_weapon_id
 6048                        		__call		_spr_set.1
         13:D6D8  20 DD E7   			call	_spr_set.1
 6049                        	
 6050                        		.dbg	line,	"include\routines_LEVELS.c", 943; spr_ctrl(FLIP_MAS, FLIP_X);
 6051                        		__st.umiq	136, _al
         13:D6DB  A9 88      			lda.l	#136
         13:D6DD  85 F8      			sta	_al
 6052                        		__ld.uiq	8
         13:D6DF  A9 08      			lda	#8
 6053                        		__call		_spr_ctrl.2
         13:D6E1  20 3C E8   			call	_spr_ctrl.2
 6054                        	
 6055                        		.dbg	line,	"include\routines_LEVELS.c", 944; spr_x(player_pos_x+17);
 6056                        		__ld.wm		_player_pos_x
         13:D6E4  AD D3 24   			lda.l	_player_pos_x
         13:D6E7  AC D4 24   			ldy.h	_player_pos_x
 6057                        		__add.wi	17
         13:D6EA  18         			clc
         13:D6EB  69 11      			adc.l	#17
         13:D6ED  90 01      			bcc	!+
         13:D6EF  C8         			iny
         13:D6F0             	!:
 6058                        		__call		_spr_x.1
         13:D6F0  20 0A E8   			call	_spr_x.1
 6059                        	
 6060                        		.dbg	line,	"include\routines_LEVELS.c", 945; }
 6061                        	
 6062                        		.dbg	line,	"include\routines_LEVELS.c", 946; }
 6063    13:D6F3             	.LL176	.alias		.LL177
 6064                        	
 6065                        		.dbg	line,	"include\routines_LEVELS.c", 949; else if(player_state == STATE_FALL)
 6066                        		__bra		.LL177
         13:D6F3  4C 7F DA   			bra	.LL177
 6067    13:D6F6             	.LL175:
 6068                        		__ld.umq	_player_state
         13:D6F6  AD 16 23   			lda	_player_state
 6069                        		__equ_b.uiq	9
         13:D6F9  C9 09      			cmp	#9
         13:D6FB  F0 01      			beq	!+
         13:D6FD  18         			clc
         13:D6FE             	!:
 6070                        		__bfalse	.LL178
         13:D6FE  B0 03 4C 84			bcc	.LL178
         13:D702  D7          
 6071                        	
 6072                        		.dbg	line,	"include\routines_LEVELS.c", 950; {
 6073                        	
 6074                        		.dbg	line,	"include\routines_LEVELS.c", 951; if(player_axis == AXIS_RIGHT)
 6075                        		__not.um	_player_axis
         13:D703  AD 17 23   			lda	_player_axis
         13:D706  18         			clc
         13:D707  D0 01      			bne	!+
         13:D709  38         			sec
         13:D70A             	!:
 6076                        		__bfalse	.LL179
         13:D70A  B0 03 4C 7F			bcc	.LL179
         13:D70E  DA          
 6077                        	
 6078                        		.dbg	line,	"include\routines_LEVELS.c", 952; {
 6079                        	
 6080                        		.dbg	line,	"include\routines_LEVELS.c", 953; player_axis = AXIS_LEFT;
 6081                        		__st.umiq	1, _player_axis
         13:D70F  A9 01      			lda.l	#1
         13:D711  8D 17 23   			sta	_player_axis
 6082                        	
 6083                        		.dbg	line,	"include\routines_LEVELS.c", 954; player_previous_axis = player_axis;
 6084                        		__ld.um		_player_axis
         13:D714  AD 17 23   			lda	_player_axis
         13:D717  C2         			cly
 6085                        		__st.umq	_player_previous_axis
         13:D718  8D 18 23   			sta	_player_previous_axis
 6086                        	
 6087                        		.dbg	line,	"include\routines_LEVELS.c", 956; spr_set(player_id);
 6088                        		__ld.umq	_player_id
         13:D71B  AD 15 23   			lda	_player_id
 6089                        		__call		_spr_set.1
         13:D71E  20 DD E7   			call	_spr_set.1
 6090                        	
 6091                        		.dbg	line,	"include\routines_LEVELS.c", 957; spr_ctrl(FLIP_MAS, FLIP_X);
 6092                        		__st.umiq	136, _al
         13:D721  A9 88      			lda.l	#136
         13:D723  85 F8      			sta	_al
 6093                        		__ld.uiq	8
         13:D725  A9 08      			lda	#8
 6094                        		__call		_spr_ctrl.2
         13:D727  20 3C E8   			call	_spr_ctrl.2
 6095                        	
 6096                        		.dbg	line,	"include\routines_LEVELS.c", 959; spr_set(chain_id);
 6097                        		__ld.umq	_chain_id
         13:D72A  AD 22 23   			lda	_chain_id
 6098                        		__call		_spr_set.1
         13:D72D  20 DD E7   			call	_spr_set.1
 6099                        	
 6100                        		.dbg	line,	"include\routines_LEVELS.c", 960; spr_ctrl(FLIP_MAS, FLIP_X);
 6101                        		__st.umiq	136, _al
         13:D730  A9 88      			lda.l	#136
         13:D732  85 F8      			sta	_al
 6102                        		__ld.uiq	8
         13:D734  A9 08      			lda	#8
 6103                        		__call		_spr_ctrl.2
         13:D736  20 3C E8   			call	_spr_ctrl.2
 6104                        	
 6105                        		.dbg	line,	"include\routines_LEVELS.c", 962; spr_set(chain_id+1);
 6106                        		__ld.um		_chain_id
         13:D739  AD 22 23   			lda	_chain_id
         13:D73C  C2         			cly
 6107                        		__add.wi	1
         13:D73D  1A         			inc	a
         13:D73E  D0 01      			bne	!+
         13:D740  C8         			iny
         13:D741             	!:
 6108                        		__call		_spr_set.1
         13:D741  20 DD E7   			call	_spr_set.1
 6109                        	
 6110                        		.dbg	line,	"include\routines_LEVELS.c", 963; spr_ctrl(FLIP_MAS, FLIP_X);
 6111                        		__st.umiq	136, _al
         13:D744  A9 88      			lda.l	#136
         13:D746  85 F8      			sta	_al
 6112                        		__ld.uiq	8
         13:D748  A9 08      			lda	#8
 6113                        		__call		_spr_ctrl.2
         13:D74A  20 3C E8   			call	_spr_ctrl.2
 6114                        	
 6115                        		.dbg	line,	"include\routines_LEVELS.c", 965; spr_set(chain_id+2);
 6116                        		__ld.um		_chain_id
         13:D74D  AD 22 23   			lda	_chain_id
         13:D750  C2         			cly
 6117                        		__add.wi	2
         13:D751  18         			clc
         13:D752  69 02      			adc.l	#2
         13:D754  90 01      			bcc	!+
         13:D756  C8         			iny
         13:D757             	!:
 6118                        		__call		_spr_set.1
         13:D757  20 DD E7   			call	_spr_set.1
 6119                        	
 6120                        		.dbg	line,	"include\routines_LEVELS.c", 966; spr_ctrl(FLIP_MAS, FLIP_X);
 6121                        		__st.umiq	136, _al
         13:D75A  A9 88      			lda.l	#136
         13:D75C  85 F8      			sta	_al
 6122                        		__ld.uiq	8
         13:D75E  A9 08      			lda	#8
 6123                        		__call		_spr_ctrl.2
         13:D760  20 3C E8   			call	_spr_ctrl.2
 6124                        	
 6125                        		.dbg	line,	"include\routines_LEVELS.c", 968; spr_set(weapon_id);
 6126                        		__ld.umq	_weapon_id
         13:D763  AD 23 23   			lda	_weapon_id
 6127                        		__call		_spr_set.1
         13:D766  20 DD E7   			call	_spr_set.1
 6128                        	
 6129                        		.dbg	line,	"include\routines_LEVELS.c", 969; spr_ctrl(FLIP_MAS, FLIP_X);
 6130                        		__st.umiq	136, _al
         13:D769  A9 88      			lda.l	#136
         13:D76B  85 F8      			sta	_al
 6131                        		__ld.uiq	8
         13:D76D  A9 08      			lda	#8
 6132                        		__call		_spr_ctrl.2
         13:D76F  20 3C E8   			call	_spr_ctrl.2
 6133                        	
 6134                        		.dbg	line,	"include\routines_LEVELS.c", 970; spr_x(player_pos_x+20);
 6135                        		__ld.wm		_player_pos_x
         13:D772  AD D3 24   			lda.l	_player_pos_x
         13:D775  AC D4 24   			ldy.h	_player_pos_x
 6136                        		__add.wi	20
         13:D778  18         			clc
         13:D779  69 14      			adc.l	#20
         13:D77B  90 01      			bcc	!+
         13:D77D  C8         			iny
         13:D77E             	!:
 6137                        		__call		_spr_x.1
         13:D77E  20 0A E8   			call	_spr_x.1
 6138                        	
 6139                        		.dbg	line,	"include\routines_LEVELS.c", 971; }
 6140                        	
 6141                        		.dbg	line,	"include\routines_LEVELS.c", 972; }
 6142    13:D781             	.LL179	.alias		.LL180
 6143                        	
 6144                        		.dbg	line,	"include\routines_LEVELS.c", 974; 
 6145                        	
 6146                        		.dbg	line,	"include\routines_LEVELS.c", 975; else if(player_state == STATE_HANG)
 6147                        		__bra		.LL180
         13:D781  4C 7F DA   			bra	.LL180
 6148    13:D784             	.LL178:
 6149                        		__ld.umq	_player_state
         13:D784  AD 16 23   			lda	_player_state
 6150                        		__equ_b.uiq	10
         13:D787  C9 0A      			cmp	#10
         13:D789  F0 01      			beq	!+
         13:D78B  18         			clc
         13:D78C             	!:
 6151                        		__bfalse	.LL181
         13:D78C  B0 03 4C 12			bcc	.LL181
         13:D790  D8          
 6152                        	
 6153                        		.dbg	line,	"include\routines_LEVELS.c", 976; {
 6154                        	
 6155                        		.dbg	line,	"include\routines_LEVELS.c", 977; if(player_axis == AXIS_RIGHT)
 6156                        		__not.um	_player_axis
         13:D791  AD 17 23   			lda	_player_axis
         13:D794  18         			clc
         13:D795  D0 01      			bne	!+
         13:D797  38         			sec
         13:D798             	!:
 6157                        		__bfalse	.LL182
         13:D798  B0 03 4C 7F			bcc	.LL182
         13:D79C  DA          
 6158                        	
 6159                        		.dbg	line,	"include\routines_LEVELS.c", 978; {
 6160                        	
 6161                        		.dbg	line,	"include\routines_LEVELS.c", 979; player_axis = AXIS_LEFT;
 6162                        		__st.umiq	1, _player_axis
         13:D79D  A9 01      			lda.l	#1
         13:D79F  8D 17 23   			sta	_player_axis
 6163                        	
 6164                        		.dbg	line,	"include\routines_LEVELS.c", 980; player_previous_axis = player_axis;
 6165                        		__ld.um		_player_axis
         13:D7A2  AD 17 23   			lda	_player_axis
         13:D7A5  C2         			cly
 6166                        		__st.umq	_player_previous_axis
         13:D7A6  8D 18 23   			sta	_player_previous_axis
 6167                        	
 6168                        		.dbg	line,	"include\routines_LEVELS.c", 982; spr_set(player_id);
 6169                        		__ld.umq	_player_id
         13:D7A9  AD 15 23   			lda	_player_id
 6170                        		__call		_spr_set.1
         13:D7AC  20 DD E7   			call	_spr_set.1
 6171                        	
 6172                        		.dbg	line,	"include\routines_LEVELS.c", 983; spr_ctrl(FLIP_MAS, FLIP_X);
 6173                        		__st.umiq	136, _al
         13:D7AF  A9 88      			lda.l	#136
         13:D7B1  85 F8      			sta	_al
 6174                        		__ld.uiq	8
         13:D7B3  A9 08      			lda	#8
 6175                        		__call		_spr_ctrl.2
         13:D7B5  20 3C E8   			call	_spr_ctrl.2
 6176                        	
 6177                        		.dbg	line,	"include\routines_LEVELS.c", 985; spr_set(chain_id);
 6178                        		__ld.umq	_chain_id
         13:D7B8  AD 22 23   			lda	_chain_id
 6179                        		__call		_spr_set.1
         13:D7BB  20 DD E7   			call	_spr_set.1
 6180                        	
 6181                        		.dbg	line,	"include\routines_LEVELS.c", 986; spr_ctrl(FLIP_MAS, FLIP_X);
 6182                        		__st.umiq	136, _al
         13:D7BE  A9 88      			lda.l	#136
         13:D7C0  85 F8      			sta	_al
 6183                        		__ld.uiq	8
         13:D7C2  A9 08      			lda	#8
 6184                        		__call		_spr_ctrl.2
         13:D7C4  20 3C E8   			call	_spr_ctrl.2
 6185                        	
 6186                        		.dbg	line,	"include\routines_LEVELS.c", 988; spr_set(chain_id+1);
 6187                        		__ld.um		_chain_id
         13:D7C7  AD 22 23   			lda	_chain_id
         13:D7CA  C2         			cly
 6188                        		__add.wi	1
         13:D7CB  1A         			inc	a
         13:D7CC  D0 01      			bne	!+
         13:D7CE  C8         			iny
         13:D7CF             	!:
 6189                        		__call		_spr_set.1
         13:D7CF  20 DD E7   			call	_spr_set.1
 6190                        	
 6191                        		.dbg	line,	"include\routines_LEVELS.c", 989; spr_ctrl(FLIP_MAS, FLIP_X);
 6192                        		__st.umiq	136, _al
         13:D7D2  A9 88      			lda.l	#136
         13:D7D4  85 F8      			sta	_al
 6193                        		__ld.uiq	8
         13:D7D6  A9 08      			lda	#8
 6194                        		__call		_spr_ctrl.2
         13:D7D8  20 3C E8   			call	_spr_ctrl.2
 6195                        	
 6196                        		.dbg	line,	"include\routines_LEVELS.c", 991; spr_set(chain_id+2);
 6197                        		__ld.um		_chain_id
         13:D7DB  AD 22 23   			lda	_chain_id
         13:D7DE  C2         			cly
 6198                        		__add.wi	2
         13:D7DF  18         			clc
         13:D7E0  69 02      			adc.l	#2
         13:D7E2  90 01      			bcc	!+
         13:D7E4  C8         			iny
         13:D7E5             	!:
 6199                        		__call		_spr_set.1
         13:D7E5  20 DD E7   			call	_spr_set.1
 6200                        	
 6201                        		.dbg	line,	"include\routines_LEVELS.c", 992; spr_ctrl(FLIP_MAS, FLIP_X);
 6202                        		__st.umiq	136, _al
         13:D7E8  A9 88      			lda.l	#136
         13:D7EA  85 F8      			sta	_al
 6203                        		__ld.uiq	8
         13:D7EC  A9 08      			lda	#8
 6204                        		__call		_spr_ctrl.2
         13:D7EE  20 3C E8   			call	_spr_ctrl.2
 6205                        	
 6206                        		.dbg	line,	"include\routines_LEVELS.c", 994; spr_set(weapon_id);
 6207                        		__ld.umq	_weapon_id
         13:D7F1  AD 23 23   			lda	_weapon_id
 6208                        		__call		_spr_set.1
         13:D7F4  20 DD E7   			call	_spr_set.1
 6209                        	
 6210                        		.dbg	line,	"include\routines_LEVELS.c", 995; spr_ctrl(FLIP_MAS, FLIP_X);
 6211                        		__st.umiq	136, _al
         13:D7F7  A9 88      			lda.l	#136
         13:D7F9  85 F8      			sta	_al
 6212                        		__ld.uiq	8
         13:D7FB  A9 08      			lda	#8
 6213                        		__call		_spr_ctrl.2
         13:D7FD  20 3C E8   			call	_spr_ctrl.2
 6214                        	
 6215                        		.dbg	line,	"include\routines_LEVELS.c", 996; spr_x(player_pos_x-2);
 6216                        		__ld.wm		_player_pos_x
         13:D800  AD D3 24   			lda.l	_player_pos_x
         13:D803  AC D4 24   			ldy.h	_player_pos_x
 6217                        		__sub.wi	2
         13:D806  38         			sec
         13:D807  E9 02      			sbc.l	#2
         13:D809  B0 01      			bcs	!+
         13:D80B  88         			dey
         13:D80C             	!:
 6218                        		__call		_spr_x.1
         13:D80C  20 0A E8   			call	_spr_x.1
 6219                        	
 6220                        		.dbg	line,	"include\routines_LEVELS.c", 997; }
 6221                        	
 6222                        		.dbg	line,	"include\routines_LEVELS.c", 998; }
 6223    13:D80F             	.LL182	.alias		.LL183
 6224                        	
 6225                        		.dbg	line,	"include\routines_LEVELS.c", 1001; else if(player_state == STATE_CLIMB_UP || player_state == STATE_CLIMB_DOWN)
 6226                        		__bra		.LL183
         13:D80F  4C 7F DA   			bra	.LL183
 6227    13:D812             	.LL181:
 6228                        		__ld.umq	_player_state
         13:D812  AD 16 23   			lda	_player_state
 6229                        		__equ_b.uiq	11
         13:D815  C9 0B      			cmp	#11
         13:D817  F0 01      			beq	!+
         13:D819  18         			clc
         13:D81A             	!:
 6230                        		__btrue		.LL185
         13:D81A  B0 08      			bcs	.LL185
 6231                        		__ld.umq	_player_state
         13:D81C  AD 16 23   			lda	_player_state
 6232                        		__equ_b.uiq	12
         13:D81F  C9 0C      			cmp	#12
         13:D821  F0 01      			beq	!+
         13:D823  18         			clc
         13:D824             	!:
 6233    13:D824             	.LL185:
 6234                        		__bfalse	.LL184
         13:D824  B0 03 4C 7F			bcc	.LL184
         13:D828  DA          
 6235                        	
 6236                        		.dbg	line,	"include\routines_LEVELS.c", 1002; {
 6237                        	
 6238                        		.dbg	line,	"include\routines_LEVELS.c", 1003; spr_set(player_id);
 6239                        		__ld.umq	_player_id
         13:D829  AD 15 23   			lda	_player_id
 6240                        		__call		_spr_set.1
         13:D82C  20 DD E7   			call	_spr_set.1
 6241                        	
 6242                        		.dbg	line,	"include\routines_LEVELS.c", 1004; spr_pattern(PLAYER_HANG_VRAM_ADR);
 6243                        		__ld.wi		7936
         13:D82F  62         			cla
         13:D830  A0 1F      			ldy.h	#7936
 6244                        		__call		_spr_pattern.1
         13:D832  20 26 E8   			call	_spr_pattern.1
 6245                        	
 6246                        		.dbg	line,	"include\routines_LEVELS.c", 1005; player_counter_anim = 0;
 6247                        		__st.umiq	0, _player_counter_anim
         13:D835  9C 19 23   			stz	_player_counter_anim
 6248                        	
 6249                        		.dbg	line,	"include\routines_LEVELS.c", 1006; player_state = STATE_HANG;
 6250                        		__st.umiq	10, _player_state
         13:D838  A9 0A      			lda.l	#10
         13:D83A  8D 16 23   			sta	_player_state
 6251                        	
 6252                        		.dbg	line,	"include\routines_LEVELS.c", 1007; }
 6253                        	
 6254                        		.dbg	line,	"include\routines_LEVELS.c", 1008; }
 6255    13:D83D             	.LL184	.alias		.LL186
 6256    13:D83D             	.LL183	.alias		.LL186
 6257    13:D83D             	.LL180	.alias		.LL186
 6258    13:D83D             	.LL177	.alias		.LL186
 6259    13:D83D             	.LL174	.alias		.LL186
 6260    13:D83D             	.LL171	.alias		.LL186
 6261    13:D83D             	.LL166	.alias		.LL186
 6262                        	
 6263                        		.dbg	line,	"include\routines_LEVELS.c", 1011; //--------------------------------------------------------------------------------------//
 6264                        	
 6265                        		.dbg	line,	"include\routines_LEVELS.c", 1012; //                                      UP BUTTON                                       //
 6266                        	
 6267                        		.dbg	line,	"include\routines_LEVELS.c", 1013; //--------------------------------------------------------------------------------------//
 6268                        	
 6269                        		.dbg	line,	"include\routines_LEVELS.c", 1015; else if(joy(JOYPAD_1) & JOY_UP)
 6270                        		__bra		.LL186
         13:D83D  4C 7F DA   			bra	.LL186
 6271    13:D840             	.LL161:
 6272                        		__ld.uiq	0
         13:D840  62         			cla
 6273                        		 _joy.1
         13:D841  AA         			tax
         13:D842  BD 28 22   			lda	joynow, x
         13:D845  BC D3 22   			ldy	joy6now, x
 6274                        		__tand.wi	16
         13:D848  29 10      			and	#16
         13:D84A  C9 01      	!:		cmp	#1
 6275                        		__bfalse	.LL187
         13:D84C  B0 03 4C 1E			bcc	.LL187
         13:D850  D9          
 6276                        	
 6277                        		.dbg	line,	"include\routines_LEVELS.c", 1016; {
 6278                        	
 6279                        		.dbg	line,	"include\routines_LEVELS.c", 1017; if(player_state == STATE_HANG || player_state == STATE_CLIMB_UP || player_state == STATE_CLIMB_DOWN)
 6280                        		__ld.umq	_player_state
         13:D851  AD 16 23   			lda	_player_state
 6281                        		__equ_b.uiq	10
         13:D854  C9 0A      			cmp	#10
         13:D856  F0 01      			beq	!+
         13:D858  18         			clc
         13:D859             	!:
 6282                        		__btrue		.LL189
         13:D859  B0 08      			bcs	.LL189
 6283                        		__ld.umq	_player_state
         13:D85B  AD 16 23   			lda	_player_state
 6284                        		__equ_b.uiq	11
         13:D85E  C9 0B      			cmp	#11
         13:D860  F0 01      			beq	!+
         13:D862  18         			clc
         13:D863             	!:
 6285    13:D863             	.LL189:
 6286                        		__btrue		.LL190
         13:D863  B0 08      			bcs	.LL190
 6287                        		__ld.umq	_player_state
         13:D865  AD 16 23   			lda	_player_state
 6288                        		__equ_b.uiq	12
         13:D868  C9 0C      			cmp	#12
         13:D86A  F0 01      			beq	!+
         13:D86C  18         			clc
         13:D86D             	!:
 6289    13:D86D             	.LL190:
 6290                        		__bfalse	.LL188
         13:D86D  B0 03 4C 7F			bcc	.LL188
         13:D871  DA          
 6291                        	
 6292                        		.dbg	line,	"include\routines_LEVELS.c", 1018; {
 6293                        	
 6294                        		.dbg	line,	"include\routines_LEVELS.c", 1019; unsigned char i;
 6295                        	
 6296                        		.dbg	line,	"include\routines_LEVELS.c", 1021; check_BG( 15 , 8 );
 6297                        		__ld.wi		15
         13:D872  A9 0F      			lda.l	#15
         13:D874  C2         			cly
 6298                        		__pusharg.wr
         13:D875  A6 8D      			ldx	<__sp
         13:D877  CA         			dex
         13:D878  CA         			dex
         13:D879  95 08      			sta.l	<__stack, x
         13:D87B  94 09      			sty.h	<__stack, x
         13:D87D  86 8D      			stx	<__sp
 6299                        		__ld.wi		8
         13:D87F  A9 08      			lda.l	#8
         13:D881  C2         			cly
 6300                        		__pusharg.wr
         13:D882  A6 8D      			ldx	<__sp
         13:D884  CA         			dex
         13:D885  CA         			dex
         13:D886  95 08      			sta.l	<__stack, x
         13:D888  94 09      			sty.h	<__stack, x
         13:D88A  86 8D      			stx	<__sp
 6301                        		__call		_check_BG
         13:D88C  20 6D FF   			call	_check_BG
 6302                        	
 6303                        		.dbg	line,	"include\routines_LEVELS.c", 1023; if(map_blk_flag == TILE_EMPTY)
 6304                        		__not.um	_map_blk_flag
         13:D88F  AD B0 2B   			lda	_map_blk_flag
         13:D892  18         			clc
         13:D893  D0 01      			bne	!+
         13:D895  38         			sec
         13:D896             	!:
 6305                        		__bfalse	.LL191
         13:D896  90 67      			bcc	.LL191
 6306                        	
 6307                        		.dbg	line,	"include\routines_LEVELS.c", 1024; {
 6308                        	
 6309                        		.dbg	line,	"include\routines_LEVELS.c", 1025; for(i=1 ; i<3 ; i++)
 6310                        		__st.umiq	1, __joypad_DIR_end - 1  /* i */
         13:D898  A9 01      			lda.l	#1
         13:D89A  8D 04 23   			sta	__joypad_DIR_end - 1
 6311    13:D89D             	.LL192:
 6312                        		__ld.umq	__joypad_DIR_end - 1  /* i */
         13:D89D  AD 04 23   			lda	__joypad_DIR_end - 1
 6313                        		__ult_b.uiq	3
         13:D8A0  C9 03      			cmp	#3		; Subtract integer from A.
         13:D8A2  6A         			ror	a		; CC if A < integer.
         13:D8A3  49 80      			eor	#$80
         13:D8A5  2A         			rol	a
 6314                        		__btrue		.LL194
         13:D8A6  B0 07      			bcs	.LL194
 6315                        		__bra		.LL195
         13:D8A8  80 63      			bra	.LL195
 6316    13:D8AA             	.LL193:
 6317                        		__inc.umq	__joypad_DIR_end - 1  /* i */
         13:D8AA  EE 04 23   			inc	__joypad_DIR_end - 1
 6318                        		__bra		.LL192
         13:D8AD  80 EE      			bra	.LL192
 6319    13:D8AF             	.LL194:
 6320                        	
 6321                        		.dbg	line,	"include\routines_LEVELS.c", 1026; {
 6322                        	
 6323                        		.dbg	line,	"include\routines_LEVELS.c", 1027; check_BG( 15 , 8 + i );
 6324                        		__ld.wi		15
         13:D8AF  A9 0F      			lda.l	#15
         13:D8B1  C2         			cly
 6325                        		__pusharg.wr
         13:D8B2  A6 8D      			ldx	<__sp
         13:D8B4  CA         			dex
         13:D8B5  CA         			dex
         13:D8B6  95 08      			sta.l	<__stack, x
         13:D8B8  94 09      			sty.h	<__stack, x
         13:D8BA  86 8D      			stx	<__sp
 6326                        		__ld.wi		8
         13:D8BC  A9 08      			lda.l	#8
         13:D8BE  C2         			cly
 6327                        		__add.um	__joypad_DIR_end - 1  /* i */
         13:D8BF  18         			clc
         13:D8C0  6D 04 23   			adc	__joypad_DIR_end - 1
         13:D8C3  90 01      			bcc	!+
         13:D8C5  C8         			iny
         13:D8C6             	!:
 6328                        		__pusharg.wr
         13:D8C6  A6 8D      			ldx	<__sp
         13:D8C8  CA         			dex
         13:D8C9  CA         			dex
         13:D8CA  95 08      			sta.l	<__stack, x
         13:D8CC  94 09      			sty.h	<__stack, x
         13:D8CE  86 8D      			stx	<__sp
 6329                        		__call		_check_BG
         13:D8D0  20 6D FF   			call	_check_BG
 6330                        	
 6331                        		.dbg	line,	"include\routines_LEVELS.c", 1029; if(map_blk_flag == TILE_LADDER)
 6332                        		__ld.umq	_map_blk_flag
         13:D8D3  AD B0 2B   			lda	_map_blk_flag
 6333                        		__equ_b.uiq	2
         13:D8D6  C9 02      			cmp	#2
         13:D8D8  F0 01      			beq	!+
         13:D8DA  18         			clc
         13:D8DB             	!:
 6334                        		__bfalse	.LL196
         13:D8DB  90 CD      			bcc	.LL196
 6335                        	
 6336                        		.dbg	line,	"include\routines_LEVELS.c", 1030; {
 6337                        	
 6338                        		.dbg	line,	"include\routines_LEVELS.c", 1031; sgx_map_pxl_y -= (2 - i);
 6339                        		__ld.wi		2
         13:D8DD  A9 02      			lda.l	#2
         13:D8DF  C2         			cly
 6340                        		__sub.um	__joypad_DIR_end - 1  /* i */
         13:D8E0  38         			sec
         13:D8E1  ED 04 23   			sbc	__joypad_DIR_end - 1
         13:D8E4  B0 01      			bcs	!+
         13:D8E6  88         			dey
         13:D8E7             	!:
 6341                        		__isub_st.wmq	_sgx_map_pxl_y
         13:D8E7  38         			sec
         13:D8E8  49 FF      			eor	#$FF
         13:D8EA  6D 91 26   			adc.l	_sgx_map_pxl_y
         13:D8ED  8D 91 26   			sta.l	_sgx_map_pxl_y
         13:D8F0  98         			tya
         13:D8F1  49 FF      			eor	#$FF
         13:D8F3  6D 92 26   			adc.h	_sgx_map_pxl_y
         13:D8F6  8D 92 26   			sta.h	_sgx_map_pxl_y
 6342                        	
 6343                        		.dbg	line,	"include\routines_LEVELS.c", 1032; break;
 6344                        		__bra		.LL195
         13:D8F9  80 12      			bra	.LL195
 6345                        	
 6346                        		.dbg	line,	"include\routines_LEVELS.c", 1033; }
 6347                        	
 6348                        		.dbg	line,	"include\routines_LEVELS.c", 1034; }
 6349    13:D8FB             	.LL196	.alias		.LL193
 6350                        		__bra		.LL193
         13:D8FB  80 AD      			bra	.LL193
 6351    13:D8FD             	.LL195	.alias		.LL197
 6352                        	
 6353                        		.dbg	line,	"include\routines_LEVELS.c", 1035; }
 6354                        	
 6355                        		.dbg	line,	"include\routines_LEVELS.c", 1037; else
 6356                        		__bra		.LL197
         13:D8FD  80 0E      			bra	.LL197
 6357    13:D8FF             	.LL191:
 6358                        	
 6359                        		.dbg	line,	"include\routines_LEVELS.c", 1038; {
 6360                        	
 6361                        		.dbg	line,	"include\routines_LEVELS.c", 1039; sgx_map_pxl_y -= 2;
 6362                        		__sub_st.wmiq	2, _sgx_map_pxl_y
         13:D8FF  38         			sec
         13:D900  AD 91 26   			lda.l	_sgx_map_pxl_y
         13:D903  E9 02      			sbc.l	#2
         13:D905  8D 91 26   			sta.l	_sgx_map_pxl_y
         13:D908  B0 03      			bcs	!+
         13:D90A  CE 92 26   			dec.h	_sgx_map_pxl_y
         13:D90D             	!:
 6363                        	
 6364                        		.dbg	line,	"include\routines_LEVELS.c", 1040; }
 6365    13:D90D             	.LL197:
 6366                        	
 6367                        		.dbg	line,	"include\routines_LEVELS.c", 1042; spr_set(weapon_id);
 6368                        		__ld.umq	_weapon_id
         13:D90D  AD 23 23   			lda	_weapon_id
 6369                        		__call		_spr_set.1
         13:D910  20 DD E7   			call	_spr_set.1
 6370                        	
 6371                        		.dbg	line,	"include\routines_LEVELS.c", 1043; spr_hide();
 6372                        		__call		_spr_hide
         13:D913  20 F8 E7   			call	_spr_hide
 6373                        	
 6374                        		.dbg	line,	"include\routines_LEVELS.c", 1045; player_state = STATE_CLIMB_UP;
 6375                        		__st.umiq	11, _player_state
         13:D916  A9 0B      			lda.l	#11
         13:D918  8D 16 23   			sta	_player_state
 6376                        	
 6377                        		.dbg	line,	"include\routines_LEVELS.c", 1046; }
 6378                        	
 6379                        		.dbg	line,	"include\routines_LEVELS.c", 1047; }
 6380    13:D91B             	.LL188	.alias		.LL198
 6381                        	
 6382                        		.dbg	line,	"include\routines_LEVELS.c", 1050; //--------------------------------------------------------------------------------------//
 6383                        	
 6384                        		.dbg	line,	"include\routines_LEVELS.c", 1051; //                                     DOWN BUTTON                                      //
 6385                        	
 6386                        		.dbg	line,	"include\routines_LEVELS.c", 1052; //--------------------------------------------------------------------------------------//
 6387                        	
 6388                        		.dbg	line,	"include\routines_LEVELS.c", 1054; else if(joy(JOYPAD_1) & JOY_DOWN)
 6389                        		__bra		.LL198
         13:D91B  4C 7F DA   			bra	.LL198
 6390    13:D91E             	.LL187:
 6391                        		__ld.uiq	0
         13:D91E  62         			cla
 6392                        		 _joy.1
         13:D91F  AA         			tax
         13:D920  BD 28 22   			lda	joynow, x
         13:D923  BC D3 22   			ldy	joy6now, x
 6393                        		__tand.wi	64
         13:D926  29 40      			and	#64
         13:D928  C9 01      	!:		cmp	#1
 6394                        		__bfalse	.LL199
         13:D92A  B0 03 4C 7F			bcc	.LL199
         13:D92E  DA          
 6395                        	
 6396                        		.dbg	line,	"include\routines_LEVELS.c", 1055; {
 6397                        	
 6398                        		.dbg	line,	"include\routines_LEVELS.c", 1056; if(player_state == STATE_IDLE || player_state == STATE_WALK)
 6399                        		__not.um	_player_state
         13:D92F  AD 16 23   			lda	_player_state
         13:D932  18         			clc
         13:D933  D0 01      			bne	!+
         13:D935  38         			sec
         13:D936             	!:
 6400                        		__btrue		.LL201
         13:D936  B0 08      			bcs	.LL201
 6401                        		__ld.umq	_player_state
         13:D938  AD 16 23   			lda	_player_state
 6402                        		__equ_b.uiq	1
         13:D93B  C9 01      			cmp	#1
         13:D93D  F0 01      			beq	!+
         13:D93F  18         			clc
         13:D940             	!:
 6403    13:D940             	.LL201:
 6404                        		__bfalse	.LL200
         13:D940  90 0D      			bcc	.LL200
 6405                        	
 6406                        		.dbg	line,	"include\routines_LEVELS.c", 1057; {
 6407                        	
 6408                        		.dbg	line,	"include\routines_LEVELS.c", 1058; player_counter_anim = 1;
 6409                        		__st.umiq	1, _player_counter_anim
         13:D942  A9 01      			lda.l	#1
         13:D944  8D 19 23   			sta	_player_counter_anim
 6410                        	
 6411                        		.dbg	line,	"include\routines_LEVELS.c", 1059; player_state = STATE_CROUCH;
 6412                        		__st.umiq	7, _player_state
         13:D947  A9 07      			lda.l	#7
         13:D949  8D 16 23   			sta	_player_state
 6413                        	
 6414                        		.dbg	line,	"include\routines_LEVELS.c", 1060; }
 6415                        	
 6416                        		.dbg	line,	"include\routines_LEVELS.c", 1063; else if(player_state == STATE_HANG || player_state == STATE_CLIMB_UP || player_state == STATE_CLIMB_DOWN)
 6417                        		__bra		.LL202
         13:D94C  4C 7F DA   			bra	.LL202
 6418    13:D94F             	.LL200:
 6419                        		__ld.umq	_player_state
         13:D94F  AD 16 23   			lda	_player_state
 6420                        		__equ_b.uiq	10
         13:D952  C9 0A      			cmp	#10
         13:D954  F0 01      			beq	!+
         13:D956  18         			clc
         13:D957             	!:
 6421                        		__btrue		.LL204
         13:D957  B0 08      			bcs	.LL204
 6422                        		__ld.umq	_player_state
         13:D959  AD 16 23   			lda	_player_state
 6423                        		__equ_b.uiq	11
         13:D95C  C9 0B      			cmp	#11
         13:D95E  F0 01      			beq	!+
         13:D960  18         			clc
         13:D961             	!:
 6424    13:D961             	.LL204:
 6425                        		__btrue		.LL205
         13:D961  B0 08      			bcs	.LL205
 6426                        		__ld.umq	_player_state
         13:D963  AD 16 23   			lda	_player_state
 6427                        		__equ_b.uiq	12
         13:D966  C9 0C      			cmp	#12
         13:D968  F0 01      			beq	!+
         13:D96A  18         			clc
         13:D96B             	!:
 6428    13:D96B             	.LL205:
 6429                        		__bfalse	.LL203
         13:D96B  B0 03 4C 7F			bcc	.LL203
         13:D96F  DA          
 6430                        	
 6431                        		.dbg	line,	"include\routines_LEVELS.c", 1064; {
 6432                        	
 6433                        		.dbg	line,	"include\routines_LEVELS.c", 1065; unsigned char i;
 6434                        	
 6435                        		.dbg	line,	"include\routines_LEVELS.c", 1067; check_BG( 15 , 10 );
 6436                        		__ld.wi		15
         13:D970  A9 0F      			lda.l	#15
         13:D972  C2         			cly
 6437                        		__pusharg.wr
         13:D973  A6 8D      			ldx	<__sp
         13:D975  CA         			dex
         13:D976  CA         			dex
         13:D977  95 08      			sta.l	<__stack, x
         13:D979  94 09      			sty.h	<__stack, x
         13:D97B  86 8D      			stx	<__sp
 6438                        		__ld.wi		10
         13:D97D  A9 0A      			lda.l	#10
         13:D97F  C2         			cly
 6439                        		__pusharg.wr
         13:D980  A6 8D      			ldx	<__sp
         13:D982  CA         			dex
         13:D983  CA         			dex
         13:D984  95 08      			sta.l	<__stack, x
         13:D986  94 09      			sty.h	<__stack, x
         13:D988  86 8D      			stx	<__sp
 6440                        		__call		_check_BG
         13:D98A  20 6D FF   			call	_check_BG
 6441                        	
 6442                        		.dbg	line,	"include\routines_LEVELS.c", 1069; if(map_blk_flag == TILE_EMPTY)
 6443                        		__not.um	_map_blk_flag
         13:D98D  AD B0 2B   			lda	_map_blk_flag
         13:D990  18         			clc
         13:D991  D0 01      			bne	!+
         13:D993  38         			sec
         13:D994             	!:
 6444                        		__bfalse	.LL206
         13:D994  B0 03 4C 63			bcc	.LL206
         13:D998  DA          
 6445                        	
 6446                        		.dbg	line,	"include\routines_LEVELS.c", 1070; {
 6447                        	
 6448                        		.dbg	line,	"include\routines_LEVELS.c", 1071; for(i=1 ; i<3 ; i++)
 6449                        		__st.umiq	1, __joypad_DIR_end - 2  /* i */
         13:D999  A9 01      			lda.l	#1
         13:D99B  8D 03 23   			sta	__joypad_DIR_end - 2
 6450    13:D99E             	.LL207:
 6451                        		__ld.umq	__joypad_DIR_end - 2  /* i */
         13:D99E  AD 03 23   			lda	__joypad_DIR_end - 2
 6452                        		__ult_b.uiq	3
         13:D9A1  C9 03      			cmp	#3		; Subtract integer from A.
         13:D9A3  6A         			ror	a		; CC if A < integer.
         13:D9A4  49 80      			eor	#$80
         13:D9A6  2A         			rol	a
 6453                        		__btrue		.LL209
         13:D9A7  B0 08      			bcs	.LL209
 6454                        		__bra		.LL210
         13:D9A9  4C 7F DA   			bra	.LL210
 6455    13:D9AC             	.LL208:
 6456                        		__inc.umq	__joypad_DIR_end - 2  /* i */
         13:D9AC  EE 03 23   			inc	__joypad_DIR_end - 2
 6457                        		__bra		.LL207
         13:D9AF  80 ED      			bra	.LL207
 6458    13:D9B1             	.LL209:
 6459                        	
 6460                        		.dbg	line,	"include\routines_LEVELS.c", 1072; {
 6461                        	
 6462                        		.dbg	line,	"include\routines_LEVELS.c", 1073; check_BG( 15 , 22 + i );
 6463                        		__ld.wi		15
         13:D9B1  A9 0F      			lda.l	#15
         13:D9B3  C2         			cly
 6464                        		__pusharg.wr
         13:D9B4  A6 8D      			ldx	<__sp
         13:D9B6  CA         			dex
         13:D9B7  CA         			dex
         13:D9B8  95 08      			sta.l	<__stack, x
         13:D9BA  94 09      			sty.h	<__stack, x
         13:D9BC  86 8D      			stx	<__sp
 6465                        		__ld.wi		22
         13:D9BE  A9 16      			lda.l	#22
         13:D9C0  C2         			cly
 6466                        		__add.um	__joypad_DIR_end - 2  /* i */
         13:D9C1  18         			clc
         13:D9C2  6D 03 23   			adc	__joypad_DIR_end - 2
         13:D9C5  90 01      			bcc	!+
         13:D9C7  C8         			iny
         13:D9C8             	!:
 6467                        		__pusharg.wr
         13:D9C8  A6 8D      			ldx	<__sp
         13:D9CA  CA         			dex
         13:D9CB  CA         			dex
         13:D9CC  95 08      			sta.l	<__stack, x
         13:D9CE  94 09      			sty.h	<__stack, x
         13:D9D0  86 8D      			stx	<__sp
 6468                        		__call		_check_BG
         13:D9D2  20 6D FF   			call	_check_BG
 6469                        	
 6470                        		.dbg	line,	"include\routines_LEVELS.c", 1075; if(map_blk_flag == TILE_LADDER)
 6471                        		__ld.umq	_map_blk_flag
         13:D9D5  AD B0 2B   			lda	_map_blk_flag
 6472                        		__equ_b.uiq	2
         13:D9D8  C9 02      			cmp	#2
         13:D9DA  F0 01      			beq	!+
         13:D9DC  18         			clc
         13:D9DD             	!:
 6473                        		__bfalse	.LL211
         13:D9DD  90 1B      			bcc	.LL211
 6474                        	
 6475                        		.dbg	line,	"include\routines_LEVELS.c", 1076; {
 6476                        	
 6477                        		.dbg	line,	"include\routines_LEVELS.c", 1077; sgx_map_pxl_y += (2 - i);
 6478                        		__ld.wi		2
         13:D9DF  A9 02      			lda.l	#2
         13:D9E1  C2         			cly
 6479                        		__sub.um	__joypad_DIR_end - 2  /* i */
         13:D9E2  38         			sec
         13:D9E3  ED 03 23   			sbc	__joypad_DIR_end - 2
         13:D9E6  B0 01      			bcs	!+
         13:D9E8  88         			dey
         13:D9E9             	!:
 6480                        		__add_st.wmq	_sgx_map_pxl_y
         13:D9E9  18         			clc
         13:D9EA  6D 91 26   			adc.l	_sgx_map_pxl_y
         13:D9ED  8D 91 26   			sta.l	_sgx_map_pxl_y
         13:D9F0  98         			tya
         13:D9F1  6D 92 26   			adc.h	_sgx_map_pxl_y
         13:D9F4  8D 92 26   			sta.h	_sgx_map_pxl_y
 6481                        	
 6482                        		.dbg	line,	"include\routines_LEVELS.c", 1078; break;
 6483                        		__bra		.LL210
         13:D9F7  4C 7F DA   			bra	.LL210
 6484                        	
 6485                        		.dbg	line,	"include\routines_LEVELS.c", 1079; }
 6486                        	
 6487                        		.dbg	line,	"include\routines_LEVELS.c", 1081; else
 6488    13:D9FA             	.LL211:
 6489                        	
 6490                        		.dbg	line,	"include\routines_LEVELS.c", 1082; {
 6491                        	
 6492                        		.dbg	line,	"include\routines_LEVELS.c", 1083; spr_set(player_id);
 6493                        		__ld.umq	_player_id
         13:D9FA  AD 15 23   			lda	_player_id
 6494                        		__call		_spr_set.1
         13:D9FD  20 DD E7   			call	_spr_set.1
 6495                        	
 6496                        		.dbg	line,	"include\routines_LEVELS.c", 1084; spr_pattern(PLAYER_FALL_VRAM_ADR);
 6497                        		__ld.wi		9728
         13:DA00  62         			cla
         13:DA01  A0 26      			ldy.h	#9728
 6498                        		__call		_spr_pattern.1
         13:DA03  20 26 E8   			call	_spr_pattern.1
 6499                        	
 6500                        		.dbg	line,	"include\routines_LEVELS.c", 1086; spr_set(weapon_id);
 6501                        		__ld.umq	_weapon_id
         13:DA06  AD 23 23   			lda	_weapon_id
 6502                        		__call		_spr_set.1
         13:DA09  20 DD E7   			call	_spr_set.1
 6503                        	
 6504                        		.dbg	line,	"include\routines_LEVELS.c", 1087; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
 6505                        		__ld.wi		5184
         13:DA0C  A9 40      			lda.l	#5184
         13:DA0E  A0 14      			ldy.h	#5184
 6506                        		__call		_spr_pattern.1
         13:DA10  20 26 E8   			call	_spr_pattern.1
 6507                        	
 6508                        		.dbg	line,	"include\routines_LEVELS.c", 1088; spr_y(player_pos_y+4);
 6509                        		__ld.wm		_player_pos_y
         13:DA13  AD D5 24   			lda.l	_player_pos_y
         13:DA16  AC D6 24   			ldy.h	_player_pos_y
 6510                        		__add.wi	4
         13:DA19  18         			clc
         13:DA1A  69 04      			adc.l	#4
         13:DA1C  90 01      			bcc	!+
         13:DA1E  C8         			iny
         13:DA1F             	!:
 6511                        		__call		_spr_y.1
         13:DA1F  20 19 E8   			call	_spr_y.1
 6512                        	
 6513                        		.dbg	line,	"include\routines_LEVELS.c", 1090; if(player_axis == AXIS_RIGHT)
 6514                        		__not.um	_player_axis
         13:DA22  AD 17 23   			lda	_player_axis
         13:DA25  18         			clc
         13:DA26  D0 01      			bne	!+
         13:DA28  38         			sec
         13:DA29             	!:
 6515                        		__bfalse	.LL213
         13:DA29  90 11      			bcc	.LL213
 6516                        	
 6517                        		.dbg	line,	"include\routines_LEVELS.c", 1091; {
 6518                        	
 6519                        		.dbg	line,	"include\routines_LEVELS.c", 1092; spr_x(player_pos_x-4);
 6520                        		__ld.wm		_player_pos_x
         13:DA2B  AD D3 24   			lda.l	_player_pos_x
         13:DA2E  AC D4 24   			ldy.h	_player_pos_x
 6521                        		__sub.wi	4
         13:DA31  38         			sec
         13:DA32  E9 04      			sbc.l	#4
         13:DA34  B0 01      			bcs	!+
         13:DA36  88         			dey
         13:DA37             	!:
 6522                        		__call		_spr_x.1
         13:DA37  20 0A E8   			call	_spr_x.1
 6523                        	
 6524                        		.dbg	line,	"include\routines_LEVELS.c", 1093; }
 6525                        	
 6526                        		.dbg	line,	"include\routines_LEVELS.c", 1094; 
 6527                        	
 6528                        		.dbg	line,	"include\routines_LEVELS.c", 1095; else
 6529                        		__bra		.LL214
         13:DA3A  80 0F      			bra	.LL214
 6530    13:DA3C             	.LL213:
 6531                        	
 6532                        		.dbg	line,	"include\routines_LEVELS.c", 1096; {
 6533                        	
 6534                        		.dbg	line,	"include\routines_LEVELS.c", 1097; spr_x(player_pos_x+20);
 6535                        		__ld.wm		_player_pos_x
         13:DA3C  AD D3 24   			lda.l	_player_pos_x
         13:DA3F  AC D4 24   			ldy.h	_player_pos_x
 6536                        		__add.wi	20
         13:DA42  18         			clc
         13:DA43  69 14      			adc.l	#20
         13:DA45  90 01      			bcc	!+
         13:DA47  C8         			iny
         13:DA48             	!:
 6537                        		__call		_spr_x.1
         13:DA48  20 0A E8   			call	_spr_x.1
 6538                        	
 6539                        		.dbg	line,	"include\routines_LEVELS.c", 1098; }
 6540    13:DA4B             	.LL214:
 6541                        	
 6542                        		.dbg	line,	"include\routines_LEVELS.c", 1099; 
 6543                        	
 6544                        		.dbg	line,	"include\routines_LEVELS.c", 1101; jump_ladder = FALSE;
 6545                        		__st.umiq	0, _jump_ladder
         13:DA4B  9C 1F 23   			stz	_jump_ladder
 6546                        	
 6547                        		.dbg	line,	"include\routines_LEVELS.c", 1102; player_index_jump = 0;
 6548                        		__st.umiq	0, _player_index_jump
         13:DA4E  9C 1A 23   			stz	_player_index_jump
 6549                        	
 6550                        		.dbg	line,	"include\routines_LEVELS.c", 1103; player_index_fall = 0;
 6551                        		__st.umiq	0, _player_index_fall
         13:DA51  9C 1B 23   			stz	_player_index_fall
 6552                        	
 6553                        		.dbg	line,	"include\routines_LEVELS.c", 1104; fall_ladder = TRUE;
 6554                        		__st.umiq	1, _fall_ladder
         13:DA54  A9 01      			lda.l	#1
         13:DA56  8D 21 23   			sta	_fall_ladder
 6555                        	
 6556                        		.dbg	line,	"include\routines_LEVELS.c", 1105; player_state = STATE_FALL;
 6557                        		__st.umiq	9, _player_state
         13:DA59  A9 09      			lda.l	#9
         13:DA5B  8D 16 23   			sta	_player_state
 6558                        	
 6559                        		.dbg	line,	"include\routines_LEVELS.c", 1106; }
 6560    13:DA5E             	.LL212	.alias		.LL208
 6561                        	
 6562                        		.dbg	line,	"include\routines_LEVELS.c", 1107; }
 6563                        		__bra		.LL208
         13:DA5E  4C AC D9   			bra	.LL208
 6564    13:DA61             	.LL210	.alias		.LL215
 6565                        	
 6566                        		.dbg	line,	"include\routines_LEVELS.c", 1108; }
 6567                        	
 6568                        		.dbg	line,	"include\routines_LEVELS.c", 1110; else
 6569                        		__bra		.LL215
         13:DA61  80 1C      			bra	.LL215
 6570    13:DA63             	.LL206:
 6571                        	
 6572                        		.dbg	line,	"include\routines_LEVELS.c", 1111; {
 6573                        	
 6574                        		.dbg	line,	"include\routines_LEVELS.c", 1112; spr_set(weapon_id);
 6575                        		__ld.umq	_weapon_id
         13:DA63  AD 23 23   			lda	_weapon_id
 6576                        		__call		_spr_set.1
         13:DA66  20 DD E7   			call	_spr_set.1
 6577                        	
 6578                        		.dbg	line,	"include\routines_LEVELS.c", 1113; spr_hide();
 6579                        		__call		_spr_hide
         13:DA69  20 F8 E7   			call	_spr_hide
 6580                        	
 6581                        		.dbg	line,	"include\routines_LEVELS.c", 1114; 
 6582                        	
 6583                        		.dbg	line,	"include\routines_LEVELS.c", 1115; sgx_map_pxl_y += 2;
 6584                        		__add_st.wmiq	2, _sgx_map_pxl_y
         13:DA6C  18         			clc
         13:DA6D  AD 91 26   			lda.l	_sgx_map_pxl_y
         13:DA70  69 02      			adc.l	#2
         13:DA72  8D 91 26   			sta.l	_sgx_map_pxl_y
         13:DA75  90 03      			bcc	!+
         13:DA77  EE 92 26   			inc.h	_sgx_map_pxl_y
         13:DA7A             	!:
 6585                        	
 6586                        		.dbg	line,	"include\routines_LEVELS.c", 1116; player_state = STATE_CLIMB_DOWN;
 6587                        		__st.umiq	12, _player_state
         13:DA7A  A9 0C      			lda.l	#12
         13:DA7C  8D 16 23   			sta	_player_state
 6588                        	
 6589                        		.dbg	line,	"include\routines_LEVELS.c", 1117; }
 6590    13:DA7F             	.LL215:
 6591                        	
 6592                        		.dbg	line,	"include\routines_LEVELS.c", 1118; }
 6593                        	
 6594                        		.dbg	line,	"include\routines_LEVELS.c", 1119; }
 6595    13:DA7F             	.LL203:
 6596    13:DA7F             	.LL202:
 6597                        	
 6598                        		.dbg	line,	"include\routines_LEVELS.c", 1120; }
 6599    13:DA7F             	.LL199:
 6600    13:DA7F             	.LL198:
 6601    13:DA7F             	.LL186:
 6602    13:DA7F             	.LL160:
 6603    13:DA7F             	.LL126:
 6604                        		__return	0
         13:DA7F  4C EF FF   			jmp	leave_proc
 6605                        		.dbg	clear
 6606                        		.endp
 6607               7060     		.data
 6608               2303     		.bss
 6609    F8:2303             	__joypad_DIR_loc:
 6610    F8:2303             			ds	2
 6611    F8:2305             	__joypad_DIR_end:
 6612               E309     		.code
 6613                        		.pceas
 6614                        	
 6615                        		.dbg	line,	"include\routines_LEVELS.c", 1129; void update_PLAYER()
 6616                        		.dbg	line,	"include\routines_LEVELS.c", 1130; {
 6617                        	;***********************
 6618                        	;***********************
 6619                        	
 6620                        		.hucc
 6621    01:C1A5             		.proc		_update_PLAYER
 6622                        		__enter		_update_PLAYER
 6623                        	
 6624                        		.dbg	line,	"include\routines_LEVELS.c", 1131; if(player_state == STATE_IDLE)
 6625                        		__not.um	_player_state
         01:C1A5  AD 16 23   			lda	_player_state
         01:C1A8  18         			clc
         01:C1A9  D0 01      			bne	!+
         01:C1AB  38         			sec
         01:C1AC             	!:
 6626                        		__bfalse	.LL217
         01:C1AC  B0 03 4C 55			bcc	.LL217
         01:C1B0  C2          
 6627                        	
 6628                        		.dbg	line,	"include\routines_LEVELS.c", 1132; {
 6629                        	
 6630                        		.dbg	line,	"include\routines_LEVELS.c", 1133; if(player_counter_anim == 1)
 6631                        		__ld.umq	_player_counter_anim
         01:C1B1  AD 19 23   			lda	_player_counter_anim
 6632                        		__equ_b.uiq	1
         01:C1B4  C9 01      			cmp	#1
         01:C1B6  F0 01      			beq	!+
         01:C1B8  18         			clc
         01:C1B9             	!:
 6633                        		__bfalse	.LL218
         01:C1B9  90 0F      			bcc	.LL218
 6634                        	
 6635                        		.dbg	line,	"include\routines_LEVELS.c", 1134; {
 6636                        	
 6637                        		.dbg	line,	"include\routines_LEVELS.c", 1135; spr_set(player_id);
 6638                        		__ld.umq	_player_id
         01:C1BB  AD 15 23   			lda	_player_id
 6639                        		__call		_spr_set.1
         01:C1BE  20 DD E7   			call	_spr_set.1
 6640                        	
 6641                        		.dbg	line,	"include\routines_LEVELS.c", 1136; spr_pattern(PLAYER_IDLE_VRAM_ADR);
 6642                        		__ld.wi		5632
         01:C1C1  62         			cla
         01:C1C2  A0 16      			ldy.h	#5632
 6643                        		__call		_spr_pattern.1
         01:C1C4  20 26 E8   			call	_spr_pattern.1
 6644                        	
 6645                        		.dbg	line,	"include\routines_LEVELS.c", 1138; /*spr_set(weapon_id);
 6646                        	
 6647                        		.dbg	line,	"include\routines_LEVELS.c", 1139; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
 6648                        	
 6649                        		.dbg	line,	"include\routines_LEVELS.c", 1140; spr_x(player_pos_x+8);
 6650                        	
 6651                        		.dbg	line,	"include\routines_LEVELS.c", 1141; spr_y(player_pos_y+16);*/
 6652                        	
 6653                        		.dbg	line,	"include\routines_LEVELS.c", 1143; player_counter_anim = 0;
 6654                        		__st.umiq	0, _player_counter_anim
         01:C1C7  9C 19 23   			stz	_player_counter_anim
 6655                        	
 6656                        		.dbg	line,	"include\routines_LEVELS.c", 1144; }
 6657                        	
 6658                        		.dbg	line,	"include\routines_LEVELS.c", 1146; recenter_CAMERA();
 6659    01:C1CA             	.LL218:
 6660                        		__call		_recenter_CAMERA
         01:C1CA  20 63 FF   			call	_recenter_CAMERA
 6661                        	
 6662                        		.dbg	line,	"include\routines_LEVELS.c", 1149; // CHECK COLLISION WITH LEFT FLOOR //
 6663                        	
 6664                        		.dbg	line,	"include\routines_LEVELS.c", 1150; check_BG( 10 , 32 );//8
 6665                        		__ld.wi		10
         01:C1CD  A9 0A      			lda.l	#10
         01:C1CF  C2         			cly
 6666                        		__pusharg.wr
         01:C1D0  A6 8D      			ldx	<__sp
         01:C1D2  CA         			dex
         01:C1D3  CA         			dex
         01:C1D4  95 08      			sta.l	<__stack, x
         01:C1D6  94 09      			sty.h	<__stack, x
         01:C1D8  86 8D      			stx	<__sp
 6667                        		__ld.wi		32
         01:C1DA  A9 20      			lda.l	#32
         01:C1DC  C2         			cly
 6668                        		__pusharg.wr
         01:C1DD  A6 8D      			ldx	<__sp
         01:C1DF  CA         			dex
         01:C1E0  CA         			dex
         01:C1E1  95 08      			sta.l	<__stack, x
         01:C1E3  94 09      			sty.h	<__stack, x
         01:C1E5  86 8D      			stx	<__sp
 6669                        		__call		_check_BG
         01:C1E7  20 6D FF   			call	_check_BG
 6670                        	
 6671                        		.dbg	line,	"include\routines_LEVELS.c", 1152; if(map_blk_flag == TILE_EMPTY)
 6672                        		__not.um	_map_blk_flag
         01:C1EA  AD B0 2B   			lda	_map_blk_flag
         01:C1ED  18         			clc
         01:C1EE  D0 01      			bne	!+
         01:C1F0  38         			sec
         01:C1F1             	!:
 6673                        		__bfalse	.LL219
         01:C1F1  90 34      			bcc	.LL219
 6674                        	
 6675                        		.dbg	line,	"include\routines_LEVELS.c", 1153; {
 6676                        	
 6677                        		.dbg	line,	"include\routines_LEVELS.c", 1154; // CHECK COLLISION WITH RIGHT FLOOR //
 6678                        	
 6679                        		.dbg	line,	"include\routines_LEVELS.c", 1155; check_BG( 22 , 32 );//24
 6680                        		__ld.wi		22
         01:C1F3  A9 16      			lda.l	#22
         01:C1F5  C2         			cly
 6681                        		__pusharg.wr
         01:C1F6  A6 8D      			ldx	<__sp
         01:C1F8  CA         			dex
         01:C1F9  CA         			dex
         01:C1FA  95 08      			sta.l	<__stack, x
         01:C1FC  94 09      			sty.h	<__stack, x
         01:C1FE  86 8D      			stx	<__sp
 6682                        		__ld.wi		32
         01:C200  A9 20      			lda.l	#32
         01:C202  C2         			cly
 6683                        		__pusharg.wr
         01:C203  A6 8D      			ldx	<__sp
         01:C205  CA         			dex
         01:C206  CA         			dex
         01:C207  95 08      			sta.l	<__stack, x
         01:C209  94 09      			sty.h	<__stack, x
         01:C20B  86 8D      			stx	<__sp
 6684                        		__call		_check_BG
         01:C20D  20 6D FF   			call	_check_BG
 6685                        	
 6686                        		.dbg	line,	"include\routines_LEVELS.c", 1157; if(map_blk_flag == TILE_EMPTY)
 6687                        		__not.um	_map_blk_flag
         01:C210  AD B0 2B   			lda	_map_blk_flag
         01:C213  18         			clc
         01:C214  D0 01      			bne	!+
         01:C216  38         			sec
         01:C217             	!:
 6688                        		__bfalse	.LL220
         01:C217  90 0E      			bcc	.LL220
 6689                        	
 6690                        		.dbg	line,	"include\routines_LEVELS.c", 1158; {
 6691                        	
 6692                        		.dbg	line,	"include\routines_LEVELS.c", 1159; //set_far_base(TABLE_PLAYER_TILES_BANK[player_naked],TABLE_PLAYER_TILES_ADR[player_naked]);
 6693                        	
 6694                        		.dbg	line,	"include\routines_LEVELS.c", 1160; //far_load_vram(PLAYER_VRAM_ADR,TILES_16);
 6695                        	
 6696                        		.dbg	line,	"include\routines_LEVELS.c", 1162; jump_ladder = FALSE;
 6697                        		__st.umiq	0, _jump_ladder
         01:C219  9C 1F 23   			stz	_jump_ladder
 6698                        	
 6699                        		.dbg	line,	"include\routines_LEVELS.c", 1163; player_index_jump = 0;
 6700                        		__st.umiq	0, _player_index_jump
         01:C21C  9C 1A 23   			stz	_player_index_jump
 6701                        	
 6702                        		.dbg	line,	"include\routines_LEVELS.c", 1164; player_index_fall = 0;
 6703                        		__st.umiq	0, _player_index_fall
         01:C21F  9C 1B 23   			stz	_player_index_fall
 6704                        	
 6705                        		.dbg	line,	"include\routines_LEVELS.c", 1165; player_state = STATE_FALL;
 6706                        		__st.umiq	9, _player_state
         01:C222  A9 09      			lda.l	#9
         01:C224  8D 16 23   			sta	_player_state
 6707                        	
 6708                        		.dbg	line,	"include\routines_LEVELS.c", 1166; }
 6709                        	
 6710                        		.dbg	line,	"include\routines_LEVELS.c", 1167; }
 6711    01:C227             	.LL220:
 6712                        	
 6713                        		.dbg	line,	"include\routines_LEVELS.c", 1169; spr_set(weapon_id);
 6714    01:C227             	.LL219:
 6715                        		__ld.umq	_weapon_id
         01:C227  AD 23 23   			lda	_weapon_id
 6716                        		__call		_spr_set.1
         01:C22A  20 DD E7   			call	_spr_set.1
 6717                        	
 6718                        		.dbg	line,	"include\routines_LEVELS.c", 1170; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
 6719                        		__ld.wi		5184
         01:C22D  A9 40      			lda.l	#5184
         01:C22F  A0 14      			ldy.h	#5184
 6720                        		__call		_spr_pattern.1
         01:C231  20 26 E8   			call	_spr_pattern.1
 6721                        	
 6722                        		.dbg	line,	"include\routines_LEVELS.c", 1171; spr_x(player_pos_x+8);
 6723                        		__ld.wm		_player_pos_x
         01:C234  AD D3 24   			lda.l	_player_pos_x
         01:C237  AC D4 24   			ldy.h	_player_pos_x
 6724                        		__add.wi	8
         01:C23A  18         			clc
         01:C23B  69 08      			adc.l	#8
         01:C23D  90 01      			bcc	!+
         01:C23F  C8         			iny
         01:C240             	!:
 6725                        		__call		_spr_x.1
         01:C240  20 0A E8   			call	_spr_x.1
 6726                        	
 6727                        		.dbg	line,	"include\routines_LEVELS.c", 1172; spr_y(player_pos_y+16);
 6728                        		__ld.wm		_player_pos_y
         01:C243  AD D5 24   			lda.l	_player_pos_y
         01:C246  AC D6 24   			ldy.h	_player_pos_y
 6729                        		__add.wi	16
         01:C249  18         			clc
         01:C24A  69 10      			adc.l	#16
         01:C24C  90 01      			bcc	!+
         01:C24E  C8         			iny
         01:C24F             	!:
 6730                        		__call		_spr_y.1
         01:C24F  20 19 E8   			call	_spr_y.1
 6731                        	
 6732                        		.dbg	line,	"include\routines_LEVELS.c", 1173; }
 6733                        	
 6734                        		.dbg	line,	"include\routines_LEVELS.c", 1176; else if(player_state == STATE_WALK)
 6735                        		__bra		.LL221
         01:C252  4C 71 DD   			bra	.LL221
 6736    01:C255             	.LL217:
 6737                        		__ld.umq	_player_state
         01:C255  AD 16 23   			lda	_player_state
 6738                        		__equ_b.uiq	1
         01:C258  C9 01      			cmp	#1
         01:C25A  F0 01      			beq	!+
         01:C25C  18         			clc
         01:C25D             	!:
 6739                        		__bfalse	.LL222
         01:C25D  B0 03 4C 28			bcc	.LL222
         01:C261  C6          
 6740                        	
 6741                        		.dbg	line,	"include\routines_LEVELS.c", 1177; {
 6742                        	
 6743                        		.dbg	line,	"include\routines_LEVELS.c", 1178; recenter_CAMERA();
 6744                        		__call		_recenter_CAMERA
         01:C262  20 63 FF   			call	_recenter_CAMERA
 6745                        	
 6746                        		.dbg	line,	"include\routines_LEVELS.c", 1181; //--------------------------------------------------------------------------------------//
 6747                        	
 6748                        		.dbg	line,	"include\routines_LEVELS.c", 1182; //                                   FLOOR COLLISION                                    //
 6749                        	
 6750                        		.dbg	line,	"include\routines_LEVELS.c", 1183; //--------------------------------------------------------------------------------------//
 6751                        	
 6752                        		.dbg	line,	"include\routines_LEVELS.c", 1185; // CHECK COLLISION WITH LEFT FLOOR //
 6753                        	
 6754                        		.dbg	line,	"include\routines_LEVELS.c", 1186; check_BG( 10 , 32 );//8
 6755                        		__ld.wi		10
         01:C265  A9 0A      			lda.l	#10
         01:C267  C2         			cly
 6756                        		__pusharg.wr
         01:C268  A6 8D      			ldx	<__sp
         01:C26A  CA         			dex
         01:C26B  CA         			dex
         01:C26C  95 08      			sta.l	<__stack, x
         01:C26E  94 09      			sty.h	<__stack, x
         01:C270  86 8D      			stx	<__sp
 6757                        		__ld.wi		32
         01:C272  A9 20      			lda.l	#32
         01:C274  C2         			cly
 6758                        		__pusharg.wr
         01:C275  A6 8D      			ldx	<__sp
         01:C277  CA         			dex
         01:C278  CA         			dex
         01:C279  95 08      			sta.l	<__stack, x
         01:C27B  94 09      			sty.h	<__stack, x
         01:C27D  86 8D      			stx	<__sp
 6759                        		__call		_check_BG
         01:C27F  20 6D FF   			call	_check_BG
 6760                        	
 6761                        		.dbg	line,	"include\routines_LEVELS.c", 1188; if(map_blk_flag == TILE_EMPTY)
 6762                        		__not.um	_map_blk_flag
         01:C282  AD B0 2B   			lda	_map_blk_flag
         01:C285  18         			clc
         01:C286  D0 01      			bne	!+
         01:C288  38         			sec
         01:C289             	!:
 6763                        		__bfalse	.LL223
         01:C289  B0 03 4C 41			bcc	.LL223
         01:C28D  C3          
 6764                        	
 6765                        		.dbg	line,	"include\routines_LEVELS.c", 1189; {
 6766                        	
 6767                        		.dbg	line,	"include\routines_LEVELS.c", 1190; // CHECK COLLISION WITH RIGHT FLOOR //
 6768                        	
 6769                        		.dbg	line,	"include\routines_LEVELS.c", 1191; check_BG( 22 , 32 );//24
 6770                        		__ld.wi		22
         01:C28E  A9 16      			lda.l	#22
         01:C290  C2         			cly
 6771                        		__pusharg.wr
         01:C291  A6 8D      			ldx	<__sp
         01:C293  CA         			dex
         01:C294  CA         			dex
         01:C295  95 08      			sta.l	<__stack, x
         01:C297  94 09      			sty.h	<__stack, x
         01:C299  86 8D      			stx	<__sp
 6772                        		__ld.wi		32
         01:C29B  A9 20      			lda.l	#32
         01:C29D  C2         			cly
 6773                        		__pusharg.wr
         01:C29E  A6 8D      			ldx	<__sp
         01:C2A0  CA         			dex
         01:C2A1  CA         			dex
         01:C2A2  95 08      			sta.l	<__stack, x
         01:C2A4  94 09      			sty.h	<__stack, x
         01:C2A6  86 8D      			stx	<__sp
 6774                        		__call		_check_BG
         01:C2A8  20 6D FF   			call	_check_BG
 6775                        	
 6776                        		.dbg	line,	"include\routines_LEVELS.c", 1193; if(map_blk_flag == TILE_EMPTY)
 6777                        		__not.um	_map_blk_flag
         01:C2AB  AD B0 2B   			lda	_map_blk_flag
         01:C2AE  18         			clc
         01:C2AF  D0 01      			bne	!+
         01:C2B1  38         			sec
         01:C2B2             	!:
 6778                        		__bfalse	.LL224
         01:C2B2  90 11      			bcc	.LL224
 6779                        	
 6780                        		.dbg	line,	"include\routines_LEVELS.c", 1194; {
 6781                        	
 6782                        		.dbg	line,	"include\routines_LEVELS.c", 1195; /*spr_set(player_id);
 6783                        	
 6784                        		.dbg	line,	"include\routines_LEVELS.c", 1196; spr_pattern(PLAYER_IDLE_VRAM_ADR);
 6785                        	
 6786                        		.dbg	line,	"include\routines_LEVELS.c", 1198; spr_set(weapon_id);
 6787                        	
 6788                        		.dbg	line,	"include\routines_LEVELS.c", 1199; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
 6789                        	
 6790                        		.dbg	line,	"include\routines_LEVELS.c", 1200; spr_x(player_pos_x+8);
 6791                        	
 6792                        		.dbg	line,	"include\routines_LEVELS.c", 1201; spr_y(player_pos_y+16);*/
 6793                        	
 6794                        		.dbg	line,	"include\routines_LEVELS.c", 1203; jump_ladder = FALSE;
 6795                        		__st.umiq	0, _jump_ladder
         01:C2B4  9C 1F 23   			stz	_jump_ladder
 6796                        	
 6797                        		.dbg	line,	"include\routines_LEVELS.c", 1204; player_index_jump = 0;
 6798                        		__st.umiq	0, _player_index_jump
         01:C2B7  9C 1A 23   			stz	_player_index_jump
 6799                        	
 6800                        		.dbg	line,	"include\routines_LEVELS.c", 1205; player_index_fall = 0;
 6801                        		__st.umiq	0, _player_index_fall
         01:C2BA  9C 1B 23   			stz	_player_index_fall
 6802                        	
 6803                        		.dbg	line,	"include\routines_LEVELS.c", 1206; player_state = STATE_FALL;
 6804                        		__st.umiq	9, _player_state
         01:C2BD  A9 09      			lda.l	#9
         01:C2BF  8D 16 23   			sta	_player_state
 6805                        	
 6806                        		.dbg	line,	"include\routines_LEVELS.c", 1207; }
 6807                        	
 6808                        		.dbg	line,	"include\routines_LEVELS.c", 1210; else
 6809                        		__bra		.LL225
         01:C2C2  4C B4 C3   			bra	.LL225
 6810    01:C2C5             	.LL224:
 6811                        	
 6812                        		.dbg	line,	"include\routines_LEVELS.c", 1211; {
 6813                        	
 6814                        		.dbg	line,	"include\routines_LEVELS.c", 1212; if(player_axis == AXIS_RIGHT)
 6815                        		__not.um	_player_axis
         01:C2C5  AD 17 23   			lda	_player_axis
         01:C2C8  18         			clc
         01:C2C9  D0 01      			bne	!+
         01:C2CB  38         			sec
         01:C2CC             	!:
 6816                        		__bfalse	.LL226
         01:C2CC  90 3A      			bcc	.LL226
 6817                        	
 6818                        		.dbg	line,	"include\routines_LEVELS.c", 1213; {
 6819                        	
 6820                        		.dbg	line,	"include\routines_LEVELS.c", 1214; // CHECK COLLISION WITH RIGHT WALL //
 6821                        	
 6822                        		.dbg	line,	"include\routines_LEVELS.c", 1215; check_BG( 24 , 31 ); // 24+2
 6823                        		__ld.wi		24
         01:C2CE  A9 18      			lda.l	#24
         01:C2D0  C2         			cly
 6824                        		__pusharg.wr
         01:C2D1  A6 8D      			ldx	<__sp
         01:C2D3  CA         			dex
         01:C2D4  CA         			dex
         01:C2D5  95 08      			sta.l	<__stack, x
         01:C2D7  94 09      			sty.h	<__stack, x
         01:C2D9  86 8D      			stx	<__sp
 6825                        		__ld.wi		31
         01:C2DB  A9 1F      			lda.l	#31
         01:C2DD  C2         			cly
 6826                        		__pusharg.wr
         01:C2DE  A6 8D      			ldx	<__sp
         01:C2E0  CA         			dex
         01:C2E1  CA         			dex
         01:C2E2  95 08      			sta.l	<__stack, x
         01:C2E4  94 09      			sty.h	<__stack, x
         01:C2E6  86 8D      			stx	<__sp
 6827                        		__call		_check_BG
         01:C2E8  20 6D FF   			call	_check_BG
 6828                        	
 6829                        		.dbg	line,	"include\routines_LEVELS.c", 1217; if(map_blk_flag == TILE_EMPTY)
 6830                        		__not.um	_map_blk_flag
         01:C2EB  AD B0 2B   			lda	_map_blk_flag
         01:C2EE  18         			clc
         01:C2EF  D0 01      			bne	!+
         01:C2F1  38         			sec
         01:C2F2             	!:
 6831                        		__bfalse	.LL227
         01:C2F2  B0 03 4C B4			bcc	.LL227
         01:C2F6  C3          
 6832                        	
 6833                        		.dbg	line,	"include\routines_LEVELS.c", 1218; {
 6834                        	
 6835                        		.dbg	line,	"include\routines_LEVELS.c", 1219; sgx_map_pxl_x += 2;
 6836                        		__add_st.wmiq	2, _sgx_map_pxl_x
         01:C2F7  18         			clc
         01:C2F8  AD 8F 26   			lda.l	_sgx_map_pxl_x
         01:C2FB  69 02      			adc.l	#2
         01:C2FD  8D 8F 26   			sta.l	_sgx_map_pxl_x
         01:C300  90 03      			bcc	!+
         01:C302  EE 90 26   			inc.h	_sgx_map_pxl_x
         01:C305             	!:
 6837                        	
 6838                        		.dbg	line,	"include\routines_LEVELS.c", 1220; }
 6839                        	
 6840                        		.dbg	line,	"include\routines_LEVELS.c", 1221; }
 6841    01:C305             	.LL227	.alias		.LL228
 6842                        	
 6843                        		.dbg	line,	"include\routines_LEVELS.c", 1223; else
 6844                        		__bra		.LL228
         01:C305  4C B4 C3   			bra	.LL228
 6845    01:C308             	.LL226:
 6846                        	
 6847                        		.dbg	line,	"include\routines_LEVELS.c", 1224; {
 6848                        	
 6849                        		.dbg	line,	"include\routines_LEVELS.c", 1225; // CHECK COLLISION WITH LEFT WALL //
 6850                        	
 6851                        		.dbg	line,	"include\routines_LEVELS.c", 1226; check_BG( 8 , 31 ); // 8-2
 6852                        		__ld.wi		8
         01:C308  A9 08      			lda.l	#8
         01:C30A  C2         			cly
 6853                        		__pusharg.wr
         01:C30B  A6 8D      			ldx	<__sp
         01:C30D  CA         			dex
         01:C30E  CA         			dex
         01:C30F  95 08      			sta.l	<__stack, x
         01:C311  94 09      			sty.h	<__stack, x
         01:C313  86 8D      			stx	<__sp
 6854                        		__ld.wi		31
         01:C315  A9 1F      			lda.l	#31
         01:C317  C2         			cly
 6855                        		__pusharg.wr
         01:C318  A6 8D      			ldx	<__sp
         01:C31A  CA         			dex
         01:C31B  CA         			dex
         01:C31C  95 08      			sta.l	<__stack, x
         01:C31E  94 09      			sty.h	<__stack, x
         01:C320  86 8D      			stx	<__sp
 6856                        		__call		_check_BG
         01:C322  20 6D FF   			call	_check_BG
 6857                        	
 6858                        		.dbg	line,	"include\routines_LEVELS.c", 1228; if(map_blk_flag == TILE_EMPTY)
 6859                        		__not.um	_map_blk_flag
         01:C325  AD B0 2B   			lda	_map_blk_flag
         01:C328  18         			clc
         01:C329  D0 01      			bne	!+
         01:C32B  38         			sec
         01:C32C             	!:
 6860                        		__bfalse	.LL229
         01:C32C  B0 03 4C B4			bcc	.LL229
         01:C330  C3          
 6861                        	
 6862                        		.dbg	line,	"include\routines_LEVELS.c", 1229; {
 6863                        	
 6864                        		.dbg	line,	"include\routines_LEVELS.c", 1230; sgx_map_pxl_x -= 2;
 6865                        		__sub_st.wmiq	2, _sgx_map_pxl_x
         01:C331  38         			sec
         01:C332  AD 8F 26   			lda.l	_sgx_map_pxl_x
         01:C335  E9 02      			sbc.l	#2
         01:C337  8D 8F 26   			sta.l	_sgx_map_pxl_x
         01:C33A  B0 03      			bcs	!+
         01:C33C  CE 90 26   			dec.h	_sgx_map_pxl_x
         01:C33F             	!:
 6866                        	
 6867                        		.dbg	line,	"include\routines_LEVELS.c", 1231; }
 6868                        	
 6869                        		.dbg	line,	"include\routines_LEVELS.c", 1232; }
 6870    01:C33F             	.LL229	.alias		.LL230
 6871    01:C33F             	.LL228	.alias		.LL230
 6872                        	
 6873                        		.dbg	line,	"include\routines_LEVELS.c", 1233; }
 6874    01:C33F             	.LL225	.alias		.LL230
 6875                        	
 6876                        		.dbg	line,	"include\routines_LEVELS.c", 1234; }
 6877                        	
 6878                        		.dbg	line,	"include\routines_LEVELS.c", 1237; else
 6879                        		__bra		.LL230
         01:C33F  80 73      			bra	.LL230
 6880    01:C341             	.LL223:
 6881                        	
 6882                        		.dbg	line,	"include\routines_LEVELS.c", 1238; {
 6883                        	
 6884                        		.dbg	line,	"include\routines_LEVELS.c", 1239; if(player_axis == AXIS_RIGHT)
 6885                        		__not.um	_player_axis
         01:C341  AD 17 23   			lda	_player_axis
         01:C344  18         			clc
         01:C345  D0 01      			bne	!+
         01:C347  38         			sec
         01:C348             	!:
 6886                        		__bfalse	.LL231
         01:C348  90 36      			bcc	.LL231
 6887                        	
 6888                        		.dbg	line,	"include\routines_LEVELS.c", 1240; {
 6889                        	
 6890                        		.dbg	line,	"include\routines_LEVELS.c", 1241; // CHECK COLLISION WITH RIGHT WALL //
 6891                        	
 6892                        		.dbg	line,	"include\routines_LEVELS.c", 1242; check_BG( 24 , 31 ); // 24+2
 6893                        		__ld.wi		24
         01:C34A  A9 18      			lda.l	#24
         01:C34C  C2         			cly
 6894                        		__pusharg.wr
         01:C34D  A6 8D      			ldx	<__sp
         01:C34F  CA         			dex
         01:C350  CA         			dex
         01:C351  95 08      			sta.l	<__stack, x
         01:C353  94 09      			sty.h	<__stack, x
         01:C355  86 8D      			stx	<__sp
 6895                        		__ld.wi		31
         01:C357  A9 1F      			lda.l	#31
         01:C359  C2         			cly
 6896                        		__pusharg.wr
         01:C35A  A6 8D      			ldx	<__sp
         01:C35C  CA         			dex
         01:C35D  CA         			dex
         01:C35E  95 08      			sta.l	<__stack, x
         01:C360  94 09      			sty.h	<__stack, x
         01:C362  86 8D      			stx	<__sp
 6897                        		__call		_check_BG
         01:C364  20 6D FF   			call	_check_BG
 6898                        	
 6899                        		.dbg	line,	"include\routines_LEVELS.c", 1244; if(map_blk_flag == TILE_EMPTY)
 6900                        		__not.um	_map_blk_flag
         01:C367  AD B0 2B   			lda	_map_blk_flag
         01:C36A  18         			clc
         01:C36B  D0 01      			bne	!+
         01:C36D  38         			sec
         01:C36E             	!:
 6901                        		__bfalse	.LL232
         01:C36E  90 44      			bcc	.LL232
 6902                        	
 6903                        		.dbg	line,	"include\routines_LEVELS.c", 1245; {
 6904                        	
 6905                        		.dbg	line,	"include\routines_LEVELS.c", 1246; sgx_map_pxl_x += 2;
 6906                        		__add_st.wmiq	2, _sgx_map_pxl_x
         01:C370  18         			clc
         01:C371  AD 8F 26   			lda.l	_sgx_map_pxl_x
         01:C374  69 02      			adc.l	#2
         01:C376  8D 8F 26   			sta.l	_sgx_map_pxl_x
         01:C379  90 03      			bcc	!+
         01:C37B  EE 90 26   			inc.h	_sgx_map_pxl_x
         01:C37E             	!:
 6907                        	
 6908                        		.dbg	line,	"include\routines_LEVELS.c", 1247; }
 6909                        	
 6910                        		.dbg	line,	"include\routines_LEVELS.c", 1248; }
 6911    01:C37E             	.LL232	.alias		.LL233
 6912                        	
 6913                        		.dbg	line,	"include\routines_LEVELS.c", 1250; else
 6914                        		__bra		.LL233
         01:C37E  80 34      			bra	.LL233
 6915    01:C380             	.LL231:
 6916                        	
 6917                        		.dbg	line,	"include\routines_LEVELS.c", 1251; {
 6918                        	
 6919                        		.dbg	line,	"include\routines_LEVELS.c", 1252; // CHECK COLLISION WITH LEFT WALL //
 6920                        	
 6921                        		.dbg	line,	"include\routines_LEVELS.c", 1253; check_BG( 8 , 31 ); // 8-2
 6922                        		__ld.wi		8
         01:C380  A9 08      			lda.l	#8
         01:C382  C2         			cly
 6923                        		__pusharg.wr
         01:C383  A6 8D      			ldx	<__sp
         01:C385  CA         			dex
         01:C386  CA         			dex
         01:C387  95 08      			sta.l	<__stack, x
         01:C389  94 09      			sty.h	<__stack, x
         01:C38B  86 8D      			stx	<__sp
 6924                        		__ld.wi		31
         01:C38D  A9 1F      			lda.l	#31
         01:C38F  C2         			cly
 6925                        		__pusharg.wr
         01:C390  A6 8D      			ldx	<__sp
         01:C392  CA         			dex
         01:C393  CA         			dex
         01:C394  95 08      			sta.l	<__stack, x
         01:C396  94 09      			sty.h	<__stack, x
         01:C398  86 8D      			stx	<__sp
 6926                        		__call		_check_BG
         01:C39A  20 6D FF   			call	_check_BG
 6927                        	
 6928                        		.dbg	line,	"include\routines_LEVELS.c", 1255; if(map_blk_flag == TILE_EMPTY)
 6929                        		__not.um	_map_blk_flag
         01:C39D  AD B0 2B   			lda	_map_blk_flag
         01:C3A0  18         			clc
         01:C3A1  D0 01      			bne	!+
         01:C3A3  38         			sec
         01:C3A4             	!:
 6930                        		__bfalse	.LL234
         01:C3A4  90 0E      			bcc	.LL234
 6931                        	
 6932                        		.dbg	line,	"include\routines_LEVELS.c", 1256; {
 6933                        	
 6934                        		.dbg	line,	"include\routines_LEVELS.c", 1257; sgx_map_pxl_x -= 2;
 6935                        		__sub_st.wmiq	2, _sgx_map_pxl_x
         01:C3A6  38         			sec
         01:C3A7  AD 8F 26   			lda.l	_sgx_map_pxl_x
         01:C3AA  E9 02      			sbc.l	#2
         01:C3AC  8D 8F 26   			sta.l	_sgx_map_pxl_x
         01:C3AF  B0 03      			bcs	!+
         01:C3B1  CE 90 26   			dec.h	_sgx_map_pxl_x
         01:C3B4             	!:
 6936                        	
 6937                        		.dbg	line,	"include\routines_LEVELS.c", 1258; }
 6938                        	
 6939                        		.dbg	line,	"include\routines_LEVELS.c", 1259; }
 6940    01:C3B4             	.LL234:
 6941    01:C3B4             	.LL233:
 6942                        	
 6943                        		.dbg	line,	"include\routines_LEVELS.c", 1260; }
 6944    01:C3B4             	.LL230:
 6945                        	
 6946                        		.dbg	line,	"include\routines_LEVELS.c", 1265; spr_set(player_id);
 6947                        		__ld.umq	_player_id
         01:C3B4  AD 15 23   			lda	_player_id
 6948                        		__call		_spr_set.1
         01:C3B7  20 DD E7   			call	_spr_set.1
 6949                        	
 6950                        		.dbg	line,	"include\routines_LEVELS.c", 1268; // UPDATE PLAYER TILES //
 6951                        	
 6952                        		.dbg	line,	"include\routines_LEVELS.c", 1269; if(player_counter_anim == 0)
 6953                        		__not.um	_player_counter_anim
         01:C3BA  AD 19 23   			lda	_player_counter_anim
         01:C3BD  18         			clc
         01:C3BE  D0 01      			bne	!+
         01:C3C0  38         			sec
         01:C3C1             	!:
 6954                        		__bfalse	.LL235
         01:C3C1  90 34      			bcc	.LL235
 6955                        	
 6956                        		.dbg	line,	"include\routines_LEVELS.c", 1270; {
 6957                        	
 6958                        		.dbg	line,	"include\routines_LEVELS.c", 1271; spr_pattern(PLAYER_IDLE_VRAM_ADR);
 6959                        		__ld.wi		5632
         01:C3C3  62         			cla
         01:C3C4  A0 16      			ldy.h	#5632
 6960                        		__call		_spr_pattern.1
         01:C3C6  20 26 E8   			call	_spr_pattern.1
 6961                        	
 6962                        		.dbg	line,	"include\routines_LEVELS.c", 1273; spr_set(weapon_id);
 6963                        		__ld.umq	_weapon_id
         01:C3C9  AD 23 23   			lda	_weapon_id
 6964                        		__call		_spr_set.1
         01:C3CC  20 DD E7   			call	_spr_set.1
 6965                        	
 6966                        		.dbg	line,	"include\routines_LEVELS.c", 1274; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
 6967                        		__ld.wi		5184
         01:C3CF  A9 40      			lda.l	#5184
         01:C3D1  A0 14      			ldy.h	#5184
 6968                        		__call		_spr_pattern.1
         01:C3D3  20 26 E8   			call	_spr_pattern.1
 6969                        	
 6970                        		.dbg	line,	"include\routines_LEVELS.c", 1275; spr_x(player_pos_x+8);
 6971                        		__ld.wm		_player_pos_x
         01:C3D6  AD D3 24   			lda.l	_player_pos_x
         01:C3D9  AC D4 24   			ldy.h	_player_pos_x
 6972                        		__add.wi	8
         01:C3DC  18         			clc
         01:C3DD  69 08      			adc.l	#8
         01:C3DF  90 01      			bcc	!+
         01:C3E1  C8         			iny
         01:C3E2             	!:
 6973                        		__call		_spr_x.1
         01:C3E2  20 0A E8   			call	_spr_x.1
 6974                        	
 6975                        		.dbg	line,	"include\routines_LEVELS.c", 1276; spr_y(player_pos_y+16);
 6976                        		__ld.wm		_player_pos_y
         01:C3E5  AD D5 24   			lda.l	_player_pos_y
         01:C3E8  AC D6 24   			ldy.h	_player_pos_y
 6977                        		__add.wi	16
         01:C3EB  18         			clc
         01:C3EC  69 10      			adc.l	#16
         01:C3EE  90 01      			bcc	!+
         01:C3F0  C8         			iny
         01:C3F1             	!:
 6978                        		__call		_spr_y.1
         01:C3F1  20 19 E8   			call	_spr_y.1
 6979                        	
 6980                        		.dbg	line,	"include\routines_LEVELS.c", 1277; }
 6981                        	
 6982                        		.dbg	line,	"include\routines_LEVELS.c", 1280; else if(player_counter_anim == 1)
 6983                        		__bra		.LL236
         01:C3F4  4C 22 C6   			bra	.LL236
 6984    01:C3F7             	.LL235:
 6985                        		__ld.umq	_player_counter_anim
         01:C3F7  AD 19 23   			lda	_player_counter_anim
 6986                        		__equ_b.uiq	1
         01:C3FA  C9 01      			cmp	#1
         01:C3FC  F0 01      			beq	!+
         01:C3FE  18         			clc
         01:C3FF             	!:
 6987                        		__bfalse	.LL237
         01:C3FF  90 4F      			bcc	.LL237
 6988                        	
 6989                        		.dbg	line,	"include\routines_LEVELS.c", 1281; {
 6990                        	
 6991                        		.dbg	line,	"include\routines_LEVELS.c", 1282; spr_pattern(PLAYER_WALK_1_VRAM_ADR);
 6992                        		__ld.wi		5888
         01:C401  62         			cla
         01:C402  A0 17      			ldy.h	#5888
 6993                        		__call		_spr_pattern.1
         01:C404  20 26 E8   			call	_spr_pattern.1
 6994                        	
 6995                        		.dbg	line,	"include\routines_LEVELS.c", 1284; spr_set(weapon_id);
 6996                        		__ld.umq	_weapon_id
         01:C407  AD 23 23   			lda	_weapon_id
 6997                        		__call		_spr_set.1
         01:C40A  20 DD E7   			call	_spr_set.1
 6998                        	
 6999                        		.dbg	line,	"include\routines_LEVELS.c", 1285; spr_pattern(WEAPON_WALK_1_VRAM_ADRESS);
 7000                        		__ld.wi		5248
         01:C40D  A9 80      			lda.l	#5248
         01:C40F  A0 14      			ldy.h	#5248
 7001                        		__call		_spr_pattern.1
         01:C411  20 26 E8   			call	_spr_pattern.1
 7002                        	
 7003                        		.dbg	line,	"include\routines_LEVELS.c", 1286; spr_y(player_pos_y+17);
 7004                        		__ld.wm		_player_pos_y
         01:C414  AD D5 24   			lda.l	_player_pos_y
         01:C417  AC D6 24   			ldy.h	_player_pos_y
 7005                        		__add.wi	17
         01:C41A  18         			clc
         01:C41B  69 11      			adc.l	#17
         01:C41D  90 01      			bcc	!+
         01:C41F  C8         			iny
         01:C420             	!:
 7006                        		__call		_spr_y.1
         01:C420  20 19 E8   			call	_spr_y.1
 7007                        	
 7008                        		.dbg	line,	"include\routines_LEVELS.c", 1288; if(player_axis == AXIS_RIGHT)
 7009                        		__not.um	_player_axis
         01:C423  AD 17 23   			lda	_player_axis
         01:C426  18         			clc
         01:C427  D0 01      			bne	!+
         01:C429  38         			sec
         01:C42A             	!:
 7010                        		__bfalse	.LL238
         01:C42A  90 12      			bcc	.LL238
 7011                        	
 7012                        		.dbg	line,	"include\routines_LEVELS.c", 1289; {
 7013                        	
 7014                        		.dbg	line,	"include\routines_LEVELS.c", 1290; spr_x(player_pos_x+5);
 7015                        		__ld.wm		_player_pos_x
         01:C42C  AD D3 24   			lda.l	_player_pos_x
         01:C42F  AC D4 24   			ldy.h	_player_pos_x
 7016                        		__add.wi	5
         01:C432  18         			clc
         01:C433  69 05      			adc.l	#5
         01:C435  90 01      			bcc	!+
         01:C437  C8         			iny
         01:C438             	!:
 7017                        		__call		_spr_x.1
         01:C438  20 0A E8   			call	_spr_x.1
 7018                        	
 7019                        		.dbg	line,	"include\routines_LEVELS.c", 1291; }
 7020                        	
 7021                        		.dbg	line,	"include\routines_LEVELS.c", 1293; else
 7022                        		__bra		.LL239
         01:C43B  4C 22 C6   			bra	.LL239
 7023    01:C43E             	.LL238:
 7024                        	
 7025                        		.dbg	line,	"include\routines_LEVELS.c", 1294; {
 7026                        	
 7027                        		.dbg	line,	"include\routines_LEVELS.c", 1295; spr_x(player_pos_x+11);
 7028                        		__ld.wm		_player_pos_x
         01:C43E  AD D3 24   			lda.l	_player_pos_x
         01:C441  AC D4 24   			ldy.h	_player_pos_x
 7029                        		__add.wi	11
         01:C444  18         			clc
         01:C445  69 0B      			adc.l	#11
         01:C447  90 01      			bcc	!+
         01:C449  C8         			iny
         01:C44A             	!:
 7030                        		__call		_spr_x.1
         01:C44A  20 0A E8   			call	_spr_x.1
 7031                        	
 7032                        		.dbg	line,	"include\routines_LEVELS.c", 1296; }
 7033    01:C44D             	.LL239	.alias		.LL240
 7034                        	
 7035                        		.dbg	line,	"include\routines_LEVELS.c", 1297; }
 7036                        	
 7037                        		.dbg	line,	"include\routines_LEVELS.c", 1300; else if(player_counter_anim == 3)
 7038                        		__bra		.LL240
         01:C44D  4C 22 C6   			bra	.LL240
 7039    01:C450             	.LL237:
 7040                        		__ld.umq	_player_counter_anim
         01:C450  AD 19 23   			lda	_player_counter_anim
 7041                        		__equ_b.uiq	3
         01:C453  C9 03      			cmp	#3
         01:C455  F0 01      			beq	!+
         01:C457  18         			clc
         01:C458             	!:
 7042                        		__bfalse	.LL241
         01:C458  90 40      			bcc	.LL241
 7043                        	
 7044                        		.dbg	line,	"include\routines_LEVELS.c", 1301; {
 7045                        	
 7046                        		.dbg	line,	"include\routines_LEVELS.c", 1302; spr_pattern(PLAYER_WALK_2_VRAM_ADR);
 7047                        		__ld.wi		6144
         01:C45A  62         			cla
         01:C45B  A0 18      			ldy.h	#6144
 7048                        		__call		_spr_pattern.1
         01:C45D  20 26 E8   			call	_spr_pattern.1
 7049                        	
 7050                        		.dbg	line,	"include\routines_LEVELS.c", 1303; 
 7051                        	
 7052                        		.dbg	line,	"include\routines_LEVELS.c", 1304; spr_set(weapon_id);
 7053                        		__ld.umq	_weapon_id
         01:C460  AD 23 23   			lda	_weapon_id
 7054                        		__call		_spr_set.1
         01:C463  20 DD E7   			call	_spr_set.1
 7055                        	
 7056                        		.dbg	line,	"include\routines_LEVELS.c", 1305; spr_pattern(WEAPON_WALK_2_VRAM_ADRESS);
 7057                        		__ld.wi		5312
         01:C466  A9 C0      			lda.l	#5312
         01:C468  A0 14      			ldy.h	#5312
 7058                        		__call		_spr_pattern.1
         01:C46A  20 26 E8   			call	_spr_pattern.1
 7059                        	
 7060                        		.dbg	line,	"include\routines_LEVELS.c", 1307; if(player_axis == AXIS_RIGHT)
 7061                        		__not.um	_player_axis
         01:C46D  AD 17 23   			lda	_player_axis
         01:C470  18         			clc
         01:C471  D0 01      			bne	!+
         01:C473  38         			sec
         01:C474             	!:
 7062                        		__bfalse	.LL242
         01:C474  90 12      			bcc	.LL242
 7063                        	
 7064                        		.dbg	line,	"include\routines_LEVELS.c", 1308; {
 7065                        	
 7066                        		.dbg	line,	"include\routines_LEVELS.c", 1309; spr_x(player_pos_x+3);
 7067                        		__ld.wm		_player_pos_x
         01:C476  AD D3 24   			lda.l	_player_pos_x
         01:C479  AC D4 24   			ldy.h	_player_pos_x
 7068                        		__add.wi	3
         01:C47C  18         			clc
         01:C47D  69 03      			adc.l	#3
         01:C47F  90 01      			bcc	!+
         01:C481  C8         			iny
         01:C482             	!:
 7069                        		__call		_spr_x.1
         01:C482  20 0A E8   			call	_spr_x.1
 7070                        	
 7071                        		.dbg	line,	"include\routines_LEVELS.c", 1310; }
 7072                        	
 7073                        		.dbg	line,	"include\routines_LEVELS.c", 1312; else
 7074                        		__bra		.LL243
         01:C485  4C 22 C6   			bra	.LL243
 7075    01:C488             	.LL242:
 7076                        	
 7077                        		.dbg	line,	"include\routines_LEVELS.c", 1313; {
 7078                        	
 7079                        		.dbg	line,	"include\routines_LEVELS.c", 1314; spr_x(player_pos_x+13);
 7080                        		__ld.wm		_player_pos_x
         01:C488  AD D3 24   			lda.l	_player_pos_x
         01:C48B  AC D4 24   			ldy.h	_player_pos_x
 7081                        		__add.wi	13
         01:C48E  18         			clc
         01:C48F  69 0D      			adc.l	#13
         01:C491  90 01      			bcc	!+
         01:C493  C8         			iny
         01:C494             	!:
 7082                        		__call		_spr_x.1
         01:C494  20 0A E8   			call	_spr_x.1
 7083                        	
 7084                        		.dbg	line,	"include\routines_LEVELS.c", 1315; }
 7085    01:C497             	.LL243	.alias		.LL244
 7086                        	
 7087                        		.dbg	line,	"include\routines_LEVELS.c", 1316; }
 7088                        	
 7089                        		.dbg	line,	"include\routines_LEVELS.c", 1319; else if(player_counter_anim == 6)
 7090                        		__bra		.LL244
         01:C497  4C 22 C6   			bra	.LL244
 7091    01:C49A             	.LL241:
 7092                        		__ld.umq	_player_counter_anim
         01:C49A  AD 19 23   			lda	_player_counter_anim
 7093                        		__equ_b.uiq	6
         01:C49D  C9 06      			cmp	#6
         01:C49F  F0 01      			beq	!+
         01:C4A1  18         			clc
         01:C4A2             	!:
 7094                        		__bfalse	.LL245
         01:C4A2  90 40      			bcc	.LL245
 7095                        	
 7096                        		.dbg	line,	"include\routines_LEVELS.c", 1320; {
 7097                        	
 7098                        		.dbg	line,	"include\routines_LEVELS.c", 1321; //spr_set(player_id);
 7099                        	
 7100                        		.dbg	line,	"include\routines_LEVELS.c", 1322; spr_pattern(PLAYER_WALK_3_VRAM_ADR);
 7101                        		__ld.wi		6400
         01:C4A4  62         			cla
         01:C4A5  A0 19      			ldy.h	#6400
 7102                        		__call		_spr_pattern.1
         01:C4A7  20 26 E8   			call	_spr_pattern.1
 7103                        	
 7104                        		.dbg	line,	"include\routines_LEVELS.c", 1324; spr_set(weapon_id);
 7105                        		__ld.umq	_weapon_id
         01:C4AA  AD 23 23   			lda	_weapon_id
 7106                        		__call		_spr_set.1
         01:C4AD  20 DD E7   			call	_spr_set.1
 7107                        	
 7108                        		.dbg	line,	"include\routines_LEVELS.c", 1325; spr_pattern(WEAPON_WALK_1_VRAM_ADRESS);
 7109                        		__ld.wi		5248
         01:C4B0  A9 80      			lda.l	#5248
         01:C4B2  A0 14      			ldy.h	#5248
 7110                        		__call		_spr_pattern.1
         01:C4B4  20 26 E8   			call	_spr_pattern.1
 7111                        	
 7112                        		.dbg	line,	"include\routines_LEVELS.c", 1327; if(player_axis == AXIS_RIGHT)
 7113                        		__not.um	_player_axis
         01:C4B7  AD 17 23   			lda	_player_axis
         01:C4BA  18         			clc
         01:C4BB  D0 01      			bne	!+
         01:C4BD  38         			sec
         01:C4BE             	!:
 7114                        		__bfalse	.LL246
         01:C4BE  90 12      			bcc	.LL246
 7115                        	
 7116                        		.dbg	line,	"include\routines_LEVELS.c", 1328; {
 7117                        	
 7118                        		.dbg	line,	"include\routines_LEVELS.c", 1329; spr_x(player_pos_x+5);
 7119                        		__ld.wm		_player_pos_x
         01:C4C0  AD D3 24   			lda.l	_player_pos_x
         01:C4C3  AC D4 24   			ldy.h	_player_pos_x
 7120                        		__add.wi	5
         01:C4C6  18         			clc
         01:C4C7  69 05      			adc.l	#5
         01:C4C9  90 01      			bcc	!+
         01:C4CB  C8         			iny
         01:C4CC             	!:
 7121                        		__call		_spr_x.1
         01:C4CC  20 0A E8   			call	_spr_x.1
 7122                        	
 7123                        		.dbg	line,	"include\routines_LEVELS.c", 1330; }
 7124                        	
 7125                        		.dbg	line,	"include\routines_LEVELS.c", 1332; else
 7126                        		__bra		.LL247
         01:C4CF  4C 22 C6   			bra	.LL247
 7127    01:C4D2             	.LL246:
 7128                        	
 7129                        		.dbg	line,	"include\routines_LEVELS.c", 1333; {
 7130                        	
 7131                        		.dbg	line,	"include\routines_LEVELS.c", 1334; spr_x(player_pos_x+11);
 7132                        		__ld.wm		_player_pos_x
         01:C4D2  AD D3 24   			lda.l	_player_pos_x
         01:C4D5  AC D4 24   			ldy.h	_player_pos_x
 7133                        		__add.wi	11
         01:C4D8  18         			clc
         01:C4D9  69 0B      			adc.l	#11
         01:C4DB  90 01      			bcc	!+
         01:C4DD  C8         			iny
         01:C4DE             	!:
 7134                        		__call		_spr_x.1
         01:C4DE  20 0A E8   			call	_spr_x.1
 7135                        	
 7136                        		.dbg	line,	"include\routines_LEVELS.c", 1335; }
 7137    01:C4E1             	.LL247	.alias		.LL248
 7138                        	
 7139                        		.dbg	line,	"include\routines_LEVELS.c", 1336; }
 7140                        	
 7141                        		.dbg	line,	"include\routines_LEVELS.c", 1339; else if(player_counter_anim == 8)
 7142                        		__bra		.LL248
         01:C4E1  4C 22 C6   			bra	.LL248
 7143    01:C4E4             	.LL245:
 7144                        		__ld.umq	_player_counter_anim
         01:C4E4  AD 19 23   			lda	_player_counter_anim
 7145                        		__equ_b.uiq	8
         01:C4E7  C9 08      			cmp	#8
         01:C4E9  F0 01      			beq	!+
         01:C4EB  18         			clc
         01:C4EC             	!:
 7146                        		__bfalse	.LL249
         01:C4EC  90 34      			bcc	.LL249
 7147                        	
 7148                        		.dbg	line,	"include\routines_LEVELS.c", 1340; {
 7149                        	
 7150                        		.dbg	line,	"include\routines_LEVELS.c", 1341; //spr_set(player_id);
 7151                        	
 7152                        		.dbg	line,	"include\routines_LEVELS.c", 1342; spr_pattern(PLAYER_IDLE_VRAM_ADR);
 7153                        		__ld.wi		5632
         01:C4EE  62         			cla
         01:C4EF  A0 16      			ldy.h	#5632
 7154                        		__call		_spr_pattern.1
         01:C4F1  20 26 E8   			call	_spr_pattern.1
 7155                        	
 7156                        		.dbg	line,	"include\routines_LEVELS.c", 1344; spr_set(weapon_id);
 7157                        		__ld.umq	_weapon_id
         01:C4F4  AD 23 23   			lda	_weapon_id
 7158                        		__call		_spr_set.1
         01:C4F7  20 DD E7   			call	_spr_set.1
 7159                        	
 7160                        		.dbg	line,	"include\routines_LEVELS.c", 1345; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
 7161                        		__ld.wi		5184
         01:C4FA  A9 40      			lda.l	#5184
         01:C4FC  A0 14      			ldy.h	#5184
 7162                        		__call		_spr_pattern.1
         01:C4FE  20 26 E8   			call	_spr_pattern.1
 7163                        	
 7164                        		.dbg	line,	"include\routines_LEVELS.c", 1346; spr_x(player_pos_x+8);
 7165                        		__ld.wm		_player_pos_x
         01:C501  AD D3 24   			lda.l	_player_pos_x
         01:C504  AC D4 24   			ldy.h	_player_pos_x
 7166                        		__add.wi	8
         01:C507  18         			clc
         01:C508  69 08      			adc.l	#8
         01:C50A  90 01      			bcc	!+
         01:C50C  C8         			iny
         01:C50D             	!:
 7167                        		__call		_spr_x.1
         01:C50D  20 0A E8   			call	_spr_x.1
 7168                        	
 7169                        		.dbg	line,	"include\routines_LEVELS.c", 1347; spr_y(player_pos_y+16);
 7170                        		__ld.wm		_player_pos_y
         01:C510  AD D5 24   			lda.l	_player_pos_y
         01:C513  AC D6 24   			ldy.h	_player_pos_y
 7171                        		__add.wi	16
         01:C516  18         			clc
         01:C517  69 10      			adc.l	#16
         01:C519  90 01      			bcc	!+
         01:C51B  C8         			iny
         01:C51C             	!:
 7172                        		__call		_spr_y.1
         01:C51C  20 19 E8   			call	_spr_y.1
 7173                        	
 7174                        		.dbg	line,	"include\routines_LEVELS.c", 1348; }
 7175                        	
 7176                        		.dbg	line,	"include\routines_LEVELS.c", 1351; else if(player_counter_anim == 11)
 7177                        		__bra		.LL250
         01:C51F  4C 22 C6   			bra	.LL250
 7178    01:C522             	.LL249:
 7179                        		__ld.umq	_player_counter_anim
         01:C522  AD 19 23   			lda	_player_counter_anim
 7180                        		__equ_b.uiq	11
         01:C525  C9 0B      			cmp	#11
         01:C527  F0 01      			beq	!+
         01:C529  18         			clc
         01:C52A             	!:
 7181                        		__bfalse	.LL251
         01:C52A  90 48      			bcc	.LL251
 7182                        	
 7183                        		.dbg	line,	"include\routines_LEVELS.c", 1352; {
 7184                        	
 7185                        		.dbg	line,	"include\routines_LEVELS.c", 1353; spr_pattern(PLAYER_WALK_4_VRAM_ADR);
 7186                        		__ld.wi		6656
         01:C52C  62         			cla
         01:C52D  A0 1A      			ldy.h	#6656
 7187                        		__call		_spr_pattern.1
         01:C52F  20 26 E8   			call	_spr_pattern.1
 7188                        	
 7189                        		.dbg	line,	"include\routines_LEVELS.c", 1355; spr_set(weapon_id);
 7190                        		__ld.umq	_weapon_id
         01:C532  AD 23 23   			lda	_weapon_id
 7191                        		__call		_spr_set.1
         01:C535  20 DD E7   			call	_spr_set.1
 7192                        	
 7193                        		.dbg	line,	"include\routines_LEVELS.c", 1356; spr_y(player_pos_y+14);
 7194                        		__ld.wm		_player_pos_y
         01:C538  AD D5 24   			lda.l	_player_pos_y
         01:C53B  AC D6 24   			ldy.h	_player_pos_y
 7195                        		__add.wi	14
         01:C53E  18         			clc
         01:C53F  69 0E      			adc.l	#14
         01:C541  90 01      			bcc	!+
         01:C543  C8         			iny
         01:C544             	!:
 7196                        		__call		_spr_y.1
         01:C544  20 19 E8   			call	_spr_y.1
 7197                        	
 7198                        		.dbg	line,	"include\routines_LEVELS.c", 1358; if(player_axis == AXIS_RIGHT)
 7199                        		__not.um	_player_axis
         01:C547  AD 17 23   			lda	_player_axis
         01:C54A  18         			clc
         01:C54B  D0 01      			bne	!+
         01:C54D  38         			sec
         01:C54E             	!:
 7200                        		__bfalse	.LL252
         01:C54E  90 12      			bcc	.LL252
 7201                        	
 7202                        		.dbg	line,	"include\routines_LEVELS.c", 1359; {
 7203                        	
 7204                        		.dbg	line,	"include\routines_LEVELS.c", 1360; spr_x(player_pos_x+12);
 7205                        		__ld.wm		_player_pos_x
         01:C550  AD D3 24   			lda.l	_player_pos_x
         01:C553  AC D4 24   			ldy.h	_player_pos_x
 7206                        		__add.wi	12
         01:C556  18         			clc
         01:C557  69 0C      			adc.l	#12
         01:C559  90 01      			bcc	!+
         01:C55B  C8         			iny
         01:C55C             	!:
 7207                        		__call		_spr_x.1
         01:C55C  20 0A E8   			call	_spr_x.1
 7208                        	
 7209                        		.dbg	line,	"include\routines_LEVELS.c", 1361; }
 7210                        	
 7211                        		.dbg	line,	"include\routines_LEVELS.c", 1363; else
 7212                        		__bra		.LL253
         01:C55F  4C 22 C6   			bra	.LL253
 7213    01:C562             	.LL252:
 7214                        	
 7215                        		.dbg	line,	"include\routines_LEVELS.c", 1364; {
 7216                        	
 7217                        		.dbg	line,	"include\routines_LEVELS.c", 1365; spr_x(player_pos_x+4);
 7218                        		__ld.wm		_player_pos_x
         01:C562  AD D3 24   			lda.l	_player_pos_x
         01:C565  AC D4 24   			ldy.h	_player_pos_x
 7219                        		__add.wi	4
         01:C568  18         			clc
         01:C569  69 04      			adc.l	#4
         01:C56B  90 01      			bcc	!+
         01:C56D  C8         			iny
         01:C56E             	!:
 7220                        		__call		_spr_x.1
         01:C56E  20 0A E8   			call	_spr_x.1
 7221                        	
 7222                        		.dbg	line,	"include\routines_LEVELS.c", 1366; }
 7223    01:C571             	.LL253	.alias		.LL254
 7224                        	
 7225                        		.dbg	line,	"include\routines_LEVELS.c", 1367; }
 7226                        	
 7227                        		.dbg	line,	"include\routines_LEVELS.c", 1370; else if(player_counter_anim == 14)
 7228                        		__bra		.LL254
         01:C571  4C 22 C6   			bra	.LL254
 7229    01:C574             	.LL251:
 7230                        		__ld.umq	_player_counter_anim
         01:C574  AD 19 23   			lda	_player_counter_anim
 7231                        		__equ_b.uiq	14
         01:C577  C9 0E      			cmp	#14
         01:C579  F0 01      			beq	!+
         01:C57B  18         			clc
         01:C57C             	!:
 7232                        		__bfalse	.LL255
         01:C57C  90 44      			bcc	.LL255
 7233                        	
 7234                        		.dbg	line,	"include\routines_LEVELS.c", 1371; {
 7235                        	
 7236                        		.dbg	line,	"include\routines_LEVELS.c", 1372; spr_pattern(PLAYER_WALK_5_VRAM_ADR);
 7237                        		__ld.wi		6912
         01:C57E  62         			cla
         01:C57F  A0 1B      			ldy.h	#6912
 7238                        		__call		_spr_pattern.1
         01:C581  20 26 E8   			call	_spr_pattern.1
 7239                        	
 7240                        		.dbg	line,	"include\routines_LEVELS.c", 1374; spr_set(weapon_id);
 7241                        		__ld.umq	_weapon_id
         01:C584  AD 23 23   			lda	_weapon_id
 7242                        		__call		_spr_set.1
         01:C587  20 DD E7   			call	_spr_set.1
 7243                        	
 7244                        		.dbg	line,	"include\routines_LEVELS.c", 1375; spr_y(player_pos_y+12);
 7245                        		__ld.wm		_player_pos_y
         01:C58A  AD D5 24   			lda.l	_player_pos_y
         01:C58D  AC D6 24   			ldy.h	_player_pos_y
 7246                        		__add.wi	12
         01:C590  18         			clc
         01:C591  69 0C      			adc.l	#12
         01:C593  90 01      			bcc	!+
         01:C595  C8         			iny
         01:C596             	!:
 7247                        		__call		_spr_y.1
         01:C596  20 19 E8   			call	_spr_y.1
 7248                        	
 7249                        		.dbg	line,	"include\routines_LEVELS.c", 1377; if(player_axis == AXIS_RIGHT)
 7250                        		__not.um	_player_axis
         01:C599  AD 17 23   			lda	_player_axis
         01:C59C  18         			clc
         01:C59D  D0 01      			bne	!+
         01:C59F  38         			sec
         01:C5A0             	!:
 7251                        		__bfalse	.LL256
         01:C5A0  90 11      			bcc	.LL256
 7252                        	
 7253                        		.dbg	line,	"include\routines_LEVELS.c", 1378; {
 7254                        	
 7255                        		.dbg	line,	"include\routines_LEVELS.c", 1379; spr_x(player_pos_x+15);
 7256                        		__ld.wm		_player_pos_x
         01:C5A2  AD D3 24   			lda.l	_player_pos_x
         01:C5A5  AC D4 24   			ldy.h	_player_pos_x
 7257                        		__add.wi	15
         01:C5A8  18         			clc
         01:C5A9  69 0F      			adc.l	#15
         01:C5AB  90 01      			bcc	!+
         01:C5AD  C8         			iny
         01:C5AE             	!:
 7258                        		__call		_spr_x.1
         01:C5AE  20 0A E8   			call	_spr_x.1
 7259                        	
 7260                        		.dbg	line,	"include\routines_LEVELS.c", 1380; }
 7261                        	
 7262                        		.dbg	line,	"include\routines_LEVELS.c", 1382; else
 7263                        		__bra		.LL257
         01:C5B1  80 6F      			bra	.LL257
 7264    01:C5B3             	.LL256:
 7265                        	
 7266                        		.dbg	line,	"include\routines_LEVELS.c", 1383; {
 7267                        	
 7268                        		.dbg	line,	"include\routines_LEVELS.c", 1384; spr_x(player_pos_x+1);
 7269                        		__ld.wm		_player_pos_x
         01:C5B3  AD D3 24   			lda.l	_player_pos_x
         01:C5B6  AC D4 24   			ldy.h	_player_pos_x
 7270                        		__add.wi	1
         01:C5B9  1A         			inc	a
         01:C5BA  D0 01      			bne	!+
         01:C5BC  C8         			iny
         01:C5BD             	!:
 7271                        		__call		_spr_x.1
         01:C5BD  20 0A E8   			call	_spr_x.1
 7272                        	
 7273                        		.dbg	line,	"include\routines_LEVELS.c", 1385; }
 7274    01:C5C0             	.LL257	.alias		.LL258
 7275                        	
 7276                        		.dbg	line,	"include\routines_LEVELS.c", 1386; }
 7277                        	
 7278                        		.dbg	line,	"include\routines_LEVELS.c", 1389; else if(player_counter_anim == 17)
 7279                        		__bra		.LL258
         01:C5C0  80 60      			bra	.LL258
 7280    01:C5C2             	.LL255:
 7281                        		__ld.umq	_player_counter_anim
         01:C5C2  AD 19 23   			lda	_player_counter_anim
 7282                        		__equ_b.uiq	17
         01:C5C5  C9 11      			cmp	#17
         01:C5C7  F0 01      			beq	!+
         01:C5C9  18         			clc
         01:C5CA             	!:
 7283                        		__bfalse	.LL259
         01:C5CA  90 46      			bcc	.LL259
 7284                        	
 7285                        		.dbg	line,	"include\routines_LEVELS.c", 1390; {
 7286                        	
 7287                        		.dbg	line,	"include\routines_LEVELS.c", 1391; spr_pattern(PLAYER_WALK_6_VRAM_ADR);
 7288                        		__ld.wi		7168
         01:C5CC  62         			cla
         01:C5CD  A0 1C      			ldy.h	#7168
 7289                        		__call		_spr_pattern.1
         01:C5CF  20 26 E8   			call	_spr_pattern.1
 7290                        	
 7291                        		.dbg	line,	"include\routines_LEVELS.c", 1393; spr_set(weapon_id);
 7292                        		__ld.umq	_weapon_id
         01:C5D2  AD 23 23   			lda	_weapon_id
 7293                        		__call		_spr_set.1
         01:C5D5  20 DD E7   			call	_spr_set.1
 7294                        	
 7295                        		.dbg	line,	"include\routines_LEVELS.c", 1394; spr_y(player_pos_y+14);
 7296                        		__ld.wm		_player_pos_y
         01:C5D8  AD D5 24   			lda.l	_player_pos_y
         01:C5DB  AC D6 24   			ldy.h	_player_pos_y
 7297                        		__add.wi	14
         01:C5DE  18         			clc
         01:C5DF  69 0E      			adc.l	#14
         01:C5E1  90 01      			bcc	!+
         01:C5E3  C8         			iny
         01:C5E4             	!:
 7298                        		__call		_spr_y.1
         01:C5E4  20 19 E8   			call	_spr_y.1
 7299                        	
 7300                        		.dbg	line,	"include\routines_LEVELS.c", 1396; if(player_axis == AXIS_RIGHT)
 7301                        		__not.um	_player_axis
         01:C5E7  AD 17 23   			lda	_player_axis
         01:C5EA  18         			clc
         01:C5EB  D0 01      			bne	!+
         01:C5ED  38         			sec
         01:C5EE             	!:
 7302                        		__bfalse	.LL260
         01:C5EE  90 11      			bcc	.LL260
 7303                        	
 7304                        		.dbg	line,	"include\routines_LEVELS.c", 1397; {
 7305                        	
 7306                        		.dbg	line,	"include\routines_LEVELS.c", 1398; spr_x(player_pos_x+12);
 7307                        		__ld.wm		_player_pos_x
         01:C5F0  AD D3 24   			lda.l	_player_pos_x
         01:C5F3  AC D4 24   			ldy.h	_player_pos_x
 7308                        		__add.wi	12
         01:C5F6  18         			clc
         01:C5F7  69 0C      			adc.l	#12
         01:C5F9  90 01      			bcc	!+
         01:C5FB  C8         			iny
         01:C5FC             	!:
 7309                        		__call		_spr_x.1
         01:C5FC  20 0A E8   			call	_spr_x.1
 7310                        	
 7311                        		.dbg	line,	"include\routines_LEVELS.c", 1399; }
 7312                        	
 7313                        		.dbg	line,	"include\routines_LEVELS.c", 1401; else
 7314                        		__bra		.LL261
         01:C5FF  80 21      			bra	.LL261
 7315    01:C601             	.LL260:
 7316                        	
 7317                        		.dbg	line,	"include\routines_LEVELS.c", 1402; {
 7318                        	
 7319                        		.dbg	line,	"include\routines_LEVELS.c", 1403; spr_x(player_pos_x+4);
 7320                        		__ld.wm		_player_pos_x
         01:C601  AD D3 24   			lda.l	_player_pos_x
         01:C604  AC D4 24   			ldy.h	_player_pos_x
 7321                        		__add.wi	4
         01:C607  18         			clc
         01:C608  69 04      			adc.l	#4
         01:C60A  90 01      			bcc	!+
         01:C60C  C8         			iny
         01:C60D             	!:
 7322                        		__call		_spr_x.1
         01:C60D  20 0A E8   			call	_spr_x.1
 7323                        	
 7324                        		.dbg	line,	"include\routines_LEVELS.c", 1404; } 
 7325    01:C610             	.LL261	.alias		.LL262
 7326                        	
 7327                        		.dbg	line,	"include\routines_LEVELS.c", 1405; }
 7328                        	
 7329                        		.dbg	line,	"include\routines_LEVELS.c", 1408; else if(player_counter_anim == 18)
 7330                        		__bra		.LL262
         01:C610  80 10      			bra	.LL262
 7331    01:C612             	.LL259:
 7332                        		__ld.umq	_player_counter_anim
         01:C612  AD 19 23   			lda	_player_counter_anim
 7333                        		__equ_b.uiq	18
         01:C615  C9 12      			cmp	#18
         01:C617  F0 01      			beq	!+
         01:C619  18         			clc
         01:C61A             	!:
 7334                        		__bfalse	.LL263
         01:C61A  90 06      			bcc	.LL263
 7335                        	
 7336                        		.dbg	line,	"include\routines_LEVELS.c", 1409; {
 7337                        	
 7338                        		.dbg	line,	"include\routines_LEVELS.c", 1410; player_counter_anim = 0;
 7339                        		__st.umiq	0, _player_counter_anim
         01:C61C  9C 19 23   			stz	_player_counter_anim
 7340                        	
 7341                        		.dbg	line,	"include\routines_LEVELS.c", 1412; return;
 7342                        		__bra		.LL216
         01:C61F  4C 71 DD   			bra	.LL216
 7343                        	
 7344                        		.dbg	line,	"include\routines_LEVELS.c", 1413; }
 7345                        	
 7346                        		.dbg	line,	"include\routines_LEVELS.c", 1416; player_counter_anim += 1;
 7347    01:C622             	.LL263:
 7348    01:C622             	.LL262:
 7349    01:C622             	.LL258:
 7350    01:C622             	.LL254:
 7351    01:C622             	.LL250:
 7352    01:C622             	.LL248:
 7353    01:C622             	.LL244:
 7354    01:C622             	.LL240:
 7355    01:C622             	.LL236:
 7356                        		__add_st.umiq	1, _player_counter_anim
         01:C622  EE 19 23   			inc	_player_counter_anim
 7357                        	
 7358                        		.dbg	line,	"include\routines_LEVELS.c", 1418; }
 7359                        	
 7360                        		.dbg	line,	"include\routines_LEVELS.c", 1421; else if(player_state == STATE_ATTACK)
 7361                        		__bra		.LL264
         01:C625  4C 71 DD   			bra	.LL264
 7362    01:C628             	.LL222:
 7363                        		__ld.umq	_player_state
         01:C628  AD 16 23   			lda	_player_state
 7364                        		__equ_b.uiq	2
         01:C62B  C9 02      			cmp	#2
         01:C62D  F0 01      			beq	!+
         01:C62F  18         			clc
         01:C630             	!:
 7365                        		__bfalse	.LL265
         01:C630  B0 03 4C C6			bcc	.LL265
         01:C634  C8          
 7366                        	
 7367                        		.dbg	line,	"include\routines_LEVELS.c", 1422; {
 7368                        	
 7369                        		.dbg	line,	"include\routines_LEVELS.c", 1423; if(player_counter_attack == 0)
 7370                        		__not.um	_player_counter_attack
         01:C635  AD 1C 23   			lda	_player_counter_attack
         01:C638  18         			clc
         01:C639  D0 01      			bne	!+
         01:C63B  38         			sec
         01:C63C             	!:
 7371                        		__bfalse	.LL266
         01:C63C  90 53      			bcc	.LL266
 7372                        	
 7373                        		.dbg	line,	"include\routines_LEVELS.c", 1424; {
 7374                        	
 7375                        		.dbg	line,	"include\routines_LEVELS.c", 1425; spr_set(player_id);
 7376                        		__ld.umq	_player_id
         01:C63E  AD 15 23   			lda	_player_id
 7377                        		__call		_spr_set.1
         01:C641  20 DD E7   			call	_spr_set.1
 7378                        	
 7379                        		.dbg	line,	"include\routines_LEVELS.c", 1426; spr_pattern(PLAYER_ATTACK_1_VRAM_ADR);
 7380                        		__ld.wi		9984
         01:C644  62         			cla
         01:C645  A0 27      			ldy.h	#9984
 7381                        		__call		_spr_pattern.1
         01:C647  20 26 E8   			call	_spr_pattern.1
 7382                        	
 7383                        		.dbg	line,	"include\routines_LEVELS.c", 1428; spr_set(weapon_id);
 7384                        		__ld.umq	_weapon_id
         01:C64A  AD 23 23   			lda	_weapon_id
 7385                        		__call		_spr_set.1
         01:C64D  20 DD E7   			call	_spr_set.1
 7386                        	
 7387                        		.dbg	line,	"include\routines_LEVELS.c", 1429; spr_pattern(WEAPON_ATTACK_1_VRAM_ADRESS);
 7388                        		__ld.wi		5376
         01:C650  62         			cla
         01:C651  A0 15      			ldy.h	#5376
 7389                        		__call		_spr_pattern.1
         01:C653  20 26 E8   			call	_spr_pattern.1
 7390                        	
 7391                        		.dbg	line,	"include\routines_LEVELS.c", 1431; if(player_axis == AXIS_RIGHT)
 7392                        		__not.um	_player_axis
         01:C656  AD 17 23   			lda	_player_axis
         01:C659  18         			clc
         01:C65A  D0 01      			bne	!+
         01:C65C  38         			sec
         01:C65D             	!:
 7393                        		__bfalse	.LL267
         01:C65D  90 11      			bcc	.LL267
 7394                        	
 7395                        		.dbg	line,	"include\routines_LEVELS.c", 1432; {
 7396                        	
 7397                        		.dbg	line,	"include\routines_LEVELS.c", 1433; spr_x(player_pos_x-13);
 7398                        		__ld.wm		_player_pos_x
         01:C65F  AD D3 24   			lda.l	_player_pos_x
         01:C662  AC D4 24   			ldy.h	_player_pos_x
 7399                        		__sub.wi	13
         01:C665  38         			sec
         01:C666  E9 0D      			sbc.l	#13
         01:C668  B0 01      			bcs	!+
         01:C66A  88         			dey
         01:C66B             	!:
 7400                        		__call		_spr_x.1
         01:C66B  20 0A E8   			call	_spr_x.1
 7401                        	
 7402                        		.dbg	line,	"include\routines_LEVELS.c", 1434; }
 7403                        	
 7404                        		.dbg	line,	"include\routines_LEVELS.c", 1436; else
 7405                        		__bra		.LL268
         01:C66E  80 0F      			bra	.LL268
 7406    01:C670             	.LL267:
 7407                        	
 7408                        		.dbg	line,	"include\routines_LEVELS.c", 1437; {
 7409                        	
 7410                        		.dbg	line,	"include\routines_LEVELS.c", 1438; spr_x(player_pos_x+29);
 7411                        		__ld.wm		_player_pos_x
         01:C670  AD D3 24   			lda.l	_player_pos_x
         01:C673  AC D4 24   			ldy.h	_player_pos_x
 7412                        		__add.wi	29
         01:C676  18         			clc
         01:C677  69 1D      			adc.l	#29
         01:C679  90 01      			bcc	!+
         01:C67B  C8         			iny
         01:C67C             	!:
 7413                        		__call		_spr_x.1
         01:C67C  20 0A E8   			call	_spr_x.1
 7414                        	
 7415                        		.dbg	line,	"include\routines_LEVELS.c", 1439; }
 7416    01:C67F             	.LL268:
 7417                        	
 7418                        		.dbg	line,	"include\routines_LEVELS.c", 1441; spr_y(player_pos_y-8);
 7419                        		__ld.wm		_player_pos_y
         01:C67F  AD D5 24   			lda.l	_player_pos_y
         01:C682  AC D6 24   			ldy.h	_player_pos_y
 7420                        		__sub.wi	8
         01:C685  38         			sec
         01:C686  E9 08      			sbc.l	#8
         01:C688  B0 01      			bcs	!+
         01:C68A  88         			dey
         01:C68B             	!:
 7421                        		__call		_spr_y.1
         01:C68B  20 19 E8   			call	_spr_y.1
 7422                        	
 7423                        		.dbg	line,	"include\routines_LEVELS.c", 1442; }
 7424                        	
 7425                        		.dbg	line,	"include\routines_LEVELS.c", 1444; else if(player_counter_attack == 6)
 7426                        		__bra		.LL269
         01:C68E  4C C0 C8   			bra	.LL269
 7427    01:C691             	.LL266:
 7428                        		__ld.umq	_player_counter_attack
         01:C691  AD 1C 23   			lda	_player_counter_attack
 7429                        		__equ_b.uiq	6
         01:C694  C9 06      			cmp	#6
         01:C696  F0 01      			beq	!+
         01:C698  18         			clc
         01:C699             	!:
 7430                        		__bfalse	.LL270
         01:C699  90 54      			bcc	.LL270
 7431                        	
 7432                        		.dbg	line,	"include\routines_LEVELS.c", 1445; {
 7433                        	
 7434                        		.dbg	line,	"include\routines_LEVELS.c", 1446; spr_set(player_id);
 7435                        		__ld.umq	_player_id
         01:C69B  AD 15 23   			lda	_player_id
 7436                        		__call		_spr_set.1
         01:C69E  20 DD E7   			call	_spr_set.1
 7437                        	
 7438                        		.dbg	line,	"include\routines_LEVELS.c", 1447; spr_pattern(PLAYER_ATTACK_2_VRAM_ADR);
 7439                        		__ld.wi		10240
         01:C6A1  62         			cla
         01:C6A2  A0 28      			ldy.h	#10240
 7440                        		__call		_spr_pattern.1
         01:C6A4  20 26 E8   			call	_spr_pattern.1
 7441                        	
 7442                        		.dbg	line,	"include\routines_LEVELS.c", 1449; spr_set(weapon_id);
 7443                        		__ld.umq	_weapon_id
         01:C6A7  AD 23 23   			lda	_weapon_id
 7444                        		__call		_spr_set.1
         01:C6AA  20 DD E7   			call	_spr_set.1
 7445                        	
 7446                        		.dbg	line,	"include\routines_LEVELS.c", 1450; spr_pattern(WEAPON_ATTACK_2_VRAM_ADRESS);
 7447                        		__ld.wi		5440
         01:C6AD  A9 40      			lda.l	#5440
         01:C6AF  A0 15      			ldy.h	#5440
 7448                        		__call		_spr_pattern.1
         01:C6B1  20 26 E8   			call	_spr_pattern.1
 7449                        	
 7450                        		.dbg	line,	"include\routines_LEVELS.c", 1452; if(player_axis == AXIS_RIGHT)
 7451                        		__not.um	_player_axis
         01:C6B4  AD 17 23   			lda	_player_axis
         01:C6B7  18         			clc
         01:C6B8  D0 01      			bne	!+
         01:C6BA  38         			sec
         01:C6BB             	!:
 7452                        		__bfalse	.LL271
         01:C6BB  90 11      			bcc	.LL271
 7453                        	
 7454                        		.dbg	line,	"include\routines_LEVELS.c", 1453; {
 7455                        	
 7456                        		.dbg	line,	"include\routines_LEVELS.c", 1454; spr_x(player_pos_x+32);
 7457                        		__ld.wm		_player_pos_x
         01:C6BD  AD D3 24   			lda.l	_player_pos_x
         01:C6C0  AC D4 24   			ldy.h	_player_pos_x
 7458                        		__add.wi	32
         01:C6C3  18         			clc
         01:C6C4  69 20      			adc.l	#32
         01:C6C6  90 01      			bcc	!+
         01:C6C8  C8         			iny
         01:C6C9             	!:
 7459                        		__call		_spr_x.1
         01:C6C9  20 0A E8   			call	_spr_x.1
 7460                        	
 7461                        		.dbg	line,	"include\routines_LEVELS.c", 1455; 
 7462                        	
 7463                        		.dbg	line,	"include\routines_LEVELS.c", 1456; }
 7464                        	
 7465                        		.dbg	line,	"include\routines_LEVELS.c", 1457; 
 7466                        	
 7467                        		.dbg	line,	"include\routines_LEVELS.c", 1458; else
 7468                        		__bra		.LL272
         01:C6CC  80 0F      			bra	.LL272
 7469    01:C6CE             	.LL271:
 7470                        	
 7471                        		.dbg	line,	"include\routines_LEVELS.c", 1459; {
 7472                        	
 7473                        		.dbg	line,	"include\routines_LEVELS.c", 1460; spr_x(player_pos_x-16);
 7474                        		__ld.wm		_player_pos_x
         01:C6CE  AD D3 24   			lda.l	_player_pos_x
         01:C6D1  AC D4 24   			ldy.h	_player_pos_x
 7475                        		__sub.wi	16
         01:C6D4  38         			sec
         01:C6D5  E9 10      			sbc.l	#16
         01:C6D7  B0 01      			bcs	!+
         01:C6D9  88         			dey
         01:C6DA             	!:
 7476                        		__call		_spr_x.1
         01:C6DA  20 0A E8   			call	_spr_x.1
 7477                        	
 7478                        		.dbg	line,	"include\routines_LEVELS.c", 1461; }
 7479    01:C6DD             	.LL272:
 7480                        	
 7481                        		.dbg	line,	"include\routines_LEVELS.c", 1463; spr_y(player_pos_y+6);
 7482                        		__ld.wm		_player_pos_y
         01:C6DD  AD D5 24   			lda.l	_player_pos_y
         01:C6E0  AC D6 24   			ldy.h	_player_pos_y
 7483                        		__add.wi	6
         01:C6E3  18         			clc
         01:C6E4  69 06      			adc.l	#6
         01:C6E6  90 01      			bcc	!+
         01:C6E8  C8         			iny
         01:C6E9             	!:
 7484                        		__call		_spr_y.1
         01:C6E9  20 19 E8   			call	_spr_y.1
 7485                        	
 7486                        		.dbg	line,	"include\routines_LEVELS.c", 1464; }
 7487                        	
 7488                        		.dbg	line,	"include\routines_LEVELS.c", 1466; else if(player_counter_attack == 7)
 7489                        		__bra		.LL273
         01:C6EC  4C C0 C8   			bra	.LL273
 7490    01:C6EF             	.LL270:
 7491                        		__ld.umq	_player_counter_attack
         01:C6EF  AD 1C 23   			lda	_player_counter_attack
 7492                        		__equ_b.uiq	7
         01:C6F2  C9 07      			cmp	#7
         01:C6F4  F0 01      			beq	!+
         01:C6F6  18         			clc
         01:C6F7             	!:
 7493                        		__bfalse	.LL274
         01:C6F7  90 66      			bcc	.LL274
 7494                        	
 7495                        		.dbg	line,	"include\routines_LEVELS.c", 1467; {
 7496                        	
 7497                        		.dbg	line,	"include\routines_LEVELS.c", 1468; spr_set(chain_id);
 7498                        		__ld.umq	_chain_id
         01:C6F9  AD 22 23   			lda	_chain_id
 7499                        		__call		_spr_set.1
         01:C6FC  20 DD E7   			call	_spr_set.1
 7500                        	
 7501                        		.dbg	line,	"include\routines_LEVELS.c", 1469; spr_y(player_pos_y);
 7502                        		__ld.wm		_player_pos_y
         01:C6FF  AD D5 24   			lda.l	_player_pos_y
         01:C702  AC D6 24   			ldy.h	_player_pos_y
 7503                        		__call		_spr_y.1
         01:C705  20 19 E8   			call	_spr_y.1
 7504                        	
 7505                        		.dbg	line,	"include\routines_LEVELS.c", 1471; if(player_axis == AXIS_RIGHT)
 7506                        		__not.um	_player_axis
         01:C708  AD 17 23   			lda	_player_axis
         01:C70B  18         			clc
         01:C70C  D0 01      			bne	!+
         01:C70E  38         			sec
         01:C70F             	!:
 7507                        		__bfalse	.LL275
         01:C70F  90 27      			bcc	.LL275
 7508                        	
 7509                        		.dbg	line,	"include\routines_LEVELS.c", 1472; {
 7510                        	
 7511                        		.dbg	line,	"include\routines_LEVELS.c", 1473; spr_x(player_pos_x+32);
 7512                        		__ld.wm		_player_pos_x
         01:C711  AD D3 24   			lda.l	_player_pos_x
         01:C714  AC D4 24   			ldy.h	_player_pos_x
 7513                        		__add.wi	32
         01:C717  18         			clc
         01:C718  69 20      			adc.l	#32
         01:C71A  90 01      			bcc	!+
         01:C71C  C8         			iny
         01:C71D             	!:
 7514                        		__call		_spr_x.1
         01:C71D  20 0A E8   			call	_spr_x.1
 7515                        	
 7516                        		.dbg	line,	"include\routines_LEVELS.c", 1475; spr_set(weapon_id);
 7517                        		__ld.umq	_weapon_id
         01:C720  AD 23 23   			lda	_weapon_id
 7518                        		__call		_spr_set.1
         01:C723  20 DD E7   			call	_spr_set.1
 7519                        	
 7520                        		.dbg	line,	"include\routines_LEVELS.c", 1476; spr_x(player_pos_x+48);
 7521                        		__ld.wm		_player_pos_x
         01:C726  AD D3 24   			lda.l	_player_pos_x
         01:C729  AC D4 24   			ldy.h	_player_pos_x
 7522                        		__add.wi	48
         01:C72C  18         			clc
         01:C72D  69 30      			adc.l	#48
         01:C72F  90 01      			bcc	!+
         01:C731  C8         			iny
         01:C732             	!:
 7523                        		__call		_spr_x.1
         01:C732  20 0A E8   			call	_spr_x.1
 7524                        	
 7525                        		.dbg	line,	"include\routines_LEVELS.c", 1477; }
 7526                        	
 7527                        		.dbg	line,	"include\routines_LEVELS.c", 1478; 
 7528                        	
 7529                        		.dbg	line,	"include\routines_LEVELS.c", 1479; else
 7530                        		__bra		.LL276
         01:C735  4C C0 C8   			bra	.LL276
 7531    01:C738             	.LL275:
 7532                        	
 7533                        		.dbg	line,	"include\routines_LEVELS.c", 1480; {
 7534                        	
 7535                        		.dbg	line,	"include\routines_LEVELS.c", 1481; spr_x(player_pos_x-16);
 7536                        		__ld.wm		_player_pos_x
         01:C738  AD D3 24   			lda.l	_player_pos_x
         01:C73B  AC D4 24   			ldy.h	_player_pos_x
 7537                        		__sub.wi	16
         01:C73E  38         			sec
         01:C73F  E9 10      			sbc.l	#16
         01:C741  B0 01      			bcs	!+
         01:C743  88         			dey
         01:C744             	!:
 7538                        		__call		_spr_x.1
         01:C744  20 0A E8   			call	_spr_x.1
 7539                        	
 7540                        		.dbg	line,	"include\routines_LEVELS.c", 1483; spr_set(weapon_id);
 7541                        		__ld.umq	_weapon_id
         01:C747  AD 23 23   			lda	_weapon_id
 7542                        		__call		_spr_set.1
         01:C74A  20 DD E7   			call	_spr_set.1
 7543                        	
 7544                        		.dbg	line,	"include\routines_LEVELS.c", 1484; spr_x(player_pos_x-32);
 7545                        		__ld.wm		_player_pos_x
         01:C74D  AD D3 24   			lda.l	_player_pos_x
         01:C750  AC D4 24   			ldy.h	_player_pos_x
 7546                        		__sub.wi	32
         01:C753  38         			sec
         01:C754  E9 20      			sbc.l	#32
         01:C756  B0 01      			bcs	!+
         01:C758  88         			dey
         01:C759             	!:
 7547                        		__call		_spr_x.1
         01:C759  20 0A E8   			call	_spr_x.1
 7548                        	
 7549                        		.dbg	line,	"include\routines_LEVELS.c", 1485; }
 7550    01:C75C             	.LL276	.alias		.LL277
 7551                        	
 7552                        		.dbg	line,	"include\routines_LEVELS.c", 1486; }
 7553                        	
 7554                        		.dbg	line,	"include\routines_LEVELS.c", 1488; else if(player_counter_attack == 8)
 7555                        		__bra		.LL277
         01:C75C  4C C0 C8   			bra	.LL277
 7556    01:C75F             	.LL274:
 7557                        		__ld.umq	_player_counter_attack
         01:C75F  AD 1C 23   			lda	_player_counter_attack
 7558                        		__equ_b.uiq	8
         01:C762  C9 08      			cmp	#8
         01:C764  F0 01      			beq	!+
         01:C766  18         			clc
         01:C767             	!:
 7559                        		__bfalse	.LL278
         01:C767  90 6B      			bcc	.LL278
 7560                        	
 7561                        		.dbg	line,	"include\routines_LEVELS.c", 1489; {
 7562                        	
 7563                        		.dbg	line,	"include\routines_LEVELS.c", 1490; spr_set(chain_id+1);
 7564                        		__ld.um		_chain_id
         01:C769  AD 22 23   			lda	_chain_id
         01:C76C  C2         			cly
 7565                        		__add.wi	1
         01:C76D  1A         			inc	a
         01:C76E  D0 01      			bne	!+
         01:C770  C8         			iny
         01:C771             	!:
 7566                        		__call		_spr_set.1
         01:C771  20 DD E7   			call	_spr_set.1
 7567                        	
 7568                        		.dbg	line,	"include\routines_LEVELS.c", 1491; spr_y(player_pos_y);
 7569                        		__ld.wm		_player_pos_y
         01:C774  AD D5 24   			lda.l	_player_pos_y
         01:C777  AC D6 24   			ldy.h	_player_pos_y
 7570                        		__call		_spr_y.1
         01:C77A  20 19 E8   			call	_spr_y.1
 7571                        	
 7572                        		.dbg	line,	"include\routines_LEVELS.c", 1493; if(player_axis == AXIS_RIGHT)
 7573                        		__not.um	_player_axis
         01:C77D  AD 17 23   			lda	_player_axis
         01:C780  18         			clc
         01:C781  D0 01      			bne	!+
         01:C783  38         			sec
         01:C784             	!:
 7574                        		__bfalse	.LL279
         01:C784  90 27      			bcc	.LL279
 7575                        	
 7576                        		.dbg	line,	"include\routines_LEVELS.c", 1494; {
 7577                        	
 7578                        		.dbg	line,	"include\routines_LEVELS.c", 1495; spr_x(player_pos_x+48);
 7579                        		__ld.wm		_player_pos_x
         01:C786  AD D3 24   			lda.l	_player_pos_x
         01:C789  AC D4 24   			ldy.h	_player_pos_x
 7580                        		__add.wi	48
         01:C78C  18         			clc
         01:C78D  69 30      			adc.l	#48
         01:C78F  90 01      			bcc	!+
         01:C791  C8         			iny
         01:C792             	!:
 7581                        		__call		_spr_x.1
         01:C792  20 0A E8   			call	_spr_x.1
 7582                        	
 7583                        		.dbg	line,	"include\routines_LEVELS.c", 1497; spr_set(weapon_id);
 7584                        		__ld.umq	_weapon_id
         01:C795  AD 23 23   			lda	_weapon_id
 7585                        		__call		_spr_set.1
         01:C798  20 DD E7   			call	_spr_set.1
 7586                        	
 7587                        		.dbg	line,	"include\routines_LEVELS.c", 1498; spr_x(player_pos_x+64);
 7588                        		__ld.wm		_player_pos_x
         01:C79B  AD D3 24   			lda.l	_player_pos_x
         01:C79E  AC D4 24   			ldy.h	_player_pos_x
 7589                        		__add.wi	64
         01:C7A1  18         			clc
         01:C7A2  69 40      			adc.l	#64
         01:C7A4  90 01      			bcc	!+
         01:C7A6  C8         			iny
         01:C7A7             	!:
 7590                        		__call		_spr_x.1
         01:C7A7  20 0A E8   			call	_spr_x.1
 7591                        	
 7592                        		.dbg	line,	"include\routines_LEVELS.c", 1499; }
 7593                        	
 7594                        		.dbg	line,	"include\routines_LEVELS.c", 1500; 
 7595                        	
 7596                        		.dbg	line,	"include\routines_LEVELS.c", 1501; else
 7597                        		__bra		.LL280
         01:C7AA  4C C0 C8   			bra	.LL280
 7598    01:C7AD             	.LL279:
 7599                        	
 7600                        		.dbg	line,	"include\routines_LEVELS.c", 1502; {
 7601                        	
 7602                        		.dbg	line,	"include\routines_LEVELS.c", 1503; spr_x(player_pos_x-32);
 7603                        		__ld.wm		_player_pos_x
         01:C7AD  AD D3 24   			lda.l	_player_pos_x
         01:C7B0  AC D4 24   			ldy.h	_player_pos_x
 7604                        		__sub.wi	32
         01:C7B3  38         			sec
         01:C7B4  E9 20      			sbc.l	#32
         01:C7B6  B0 01      			bcs	!+
         01:C7B8  88         			dey
         01:C7B9             	!:
 7605                        		__call		_spr_x.1
         01:C7B9  20 0A E8   			call	_spr_x.1
 7606                        	
 7607                        		.dbg	line,	"include\routines_LEVELS.c", 1505; spr_set(weapon_id);
 7608                        		__ld.umq	_weapon_id
         01:C7BC  AD 23 23   			lda	_weapon_id
 7609                        		__call		_spr_set.1
         01:C7BF  20 DD E7   			call	_spr_set.1
 7610                        	
 7611                        		.dbg	line,	"include\routines_LEVELS.c", 1506; spr_x(player_pos_x-48);
 7612                        		__ld.wm		_player_pos_x
         01:C7C2  AD D3 24   			lda.l	_player_pos_x
         01:C7C5  AC D4 24   			ldy.h	_player_pos_x
 7613                        		__sub.wi	48
         01:C7C8  38         			sec
         01:C7C9  E9 30      			sbc.l	#48
         01:C7CB  B0 01      			bcs	!+
         01:C7CD  88         			dey
         01:C7CE             	!:
 7614                        		__call		_spr_x.1
         01:C7CE  20 0A E8   			call	_spr_x.1
 7615                        	
 7616                        		.dbg	line,	"include\routines_LEVELS.c", 1507; }
 7617    01:C7D1             	.LL280	.alias		.LL281
 7618                        	
 7619                        		.dbg	line,	"include\routines_LEVELS.c", 1508; }
 7620                        	
 7621                        		.dbg	line,	"include\routines_LEVELS.c", 1510; else if(player_counter_attack == 9)
 7622                        		__bra		.LL281
         01:C7D1  4C C0 C8   			bra	.LL281
 7623    01:C7D4             	.LL278:
 7624                        		__ld.umq	_player_counter_attack
         01:C7D4  AD 1C 23   			lda	_player_counter_attack
 7625                        		__equ_b.uiq	9
         01:C7D7  C9 09      			cmp	#9
         01:C7D9  F0 01      			beq	!+
         01:C7DB  18         			clc
         01:C7DC             	!:
 7626                        		__bfalse	.LL282
         01:C7DC  90 6C      			bcc	.LL282
 7627                        	
 7628                        		.dbg	line,	"include\routines_LEVELS.c", 1511; {
 7629                        	
 7630                        		.dbg	line,	"include\routines_LEVELS.c", 1512; spr_set(chain_id+2);
 7631                        		__ld.um		_chain_id
         01:C7DE  AD 22 23   			lda	_chain_id
         01:C7E1  C2         			cly
 7632                        		__add.wi	2
         01:C7E2  18         			clc
         01:C7E3  69 02      			adc.l	#2
         01:C7E5  90 01      			bcc	!+
         01:C7E7  C8         			iny
         01:C7E8             	!:
 7633                        		__call		_spr_set.1
         01:C7E8  20 DD E7   			call	_spr_set.1
 7634                        	
 7635                        		.dbg	line,	"include\routines_LEVELS.c", 1513; spr_y(player_pos_y);
 7636                        		__ld.wm		_player_pos_y
         01:C7EB  AD D5 24   			lda.l	_player_pos_y
         01:C7EE  AC D6 24   			ldy.h	_player_pos_y
 7637                        		__call		_spr_y.1
         01:C7F1  20 19 E8   			call	_spr_y.1
 7638                        	
 7639                        		.dbg	line,	"include\routines_LEVELS.c", 1515; if(player_axis == AXIS_RIGHT)
 7640                        		__not.um	_player_axis
         01:C7F4  AD 17 23   			lda	_player_axis
         01:C7F7  18         			clc
         01:C7F8  D0 01      			bne	!+
         01:C7FA  38         			sec
         01:C7FB             	!:
 7641                        		__bfalse	.LL283
         01:C7FB  90 27      			bcc	.LL283
 7642                        	
 7643                        		.dbg	line,	"include\routines_LEVELS.c", 1516; {
 7644                        	
 7645                        		.dbg	line,	"include\routines_LEVELS.c", 1517; spr_x(player_pos_x+64);
 7646                        		__ld.wm		_player_pos_x
         01:C7FD  AD D3 24   			lda.l	_player_pos_x
         01:C800  AC D4 24   			ldy.h	_player_pos_x
 7647                        		__add.wi	64
         01:C803  18         			clc
         01:C804  69 40      			adc.l	#64
         01:C806  90 01      			bcc	!+
         01:C808  C8         			iny
         01:C809             	!:
 7648                        		__call		_spr_x.1
         01:C809  20 0A E8   			call	_spr_x.1
 7649                        	
 7650                        		.dbg	line,	"include\routines_LEVELS.c", 1519; spr_set(weapon_id);
 7651                        		__ld.umq	_weapon_id
         01:C80C  AD 23 23   			lda	_weapon_id
 7652                        		__call		_spr_set.1
         01:C80F  20 DD E7   			call	_spr_set.1
 7653                        	
 7654                        		.dbg	line,	"include\routines_LEVELS.c", 1520; spr_x(player_pos_x+80);
 7655                        		__ld.wm		_player_pos_x
         01:C812  AD D3 24   			lda.l	_player_pos_x
         01:C815  AC D4 24   			ldy.h	_player_pos_x
 7656                        		__add.wi	80
         01:C818  18         			clc
         01:C819  69 50      			adc.l	#80
         01:C81B  90 01      			bcc	!+
         01:C81D  C8         			iny
         01:C81E             	!:
 7657                        		__call		_spr_x.1
         01:C81E  20 0A E8   			call	_spr_x.1
 7658                        	
 7659                        		.dbg	line,	"include\routines_LEVELS.c", 1521; }
 7660                        	
 7661                        		.dbg	line,	"include\routines_LEVELS.c", 1522; 
 7662                        	
 7663                        		.dbg	line,	"include\routines_LEVELS.c", 1523; else
 7664                        		__bra		.LL284
         01:C821  4C C0 C8   			bra	.LL284
 7665    01:C824             	.LL283:
 7666                        	
 7667                        		.dbg	line,	"include\routines_LEVELS.c", 1524; {
 7668                        	
 7669                        		.dbg	line,	"include\routines_LEVELS.c", 1525; spr_x(player_pos_x-48);
 7670                        		__ld.wm		_player_pos_x
         01:C824  AD D3 24   			lda.l	_player_pos_x
         01:C827  AC D4 24   			ldy.h	_player_pos_x
 7671                        		__sub.wi	48
         01:C82A  38         			sec
         01:C82B  E9 30      			sbc.l	#48
         01:C82D  B0 01      			bcs	!+
         01:C82F  88         			dey
         01:C830             	!:
 7672                        		__call		_spr_x.1
         01:C830  20 0A E8   			call	_spr_x.1
 7673                        	
 7674                        		.dbg	line,	"include\routines_LEVELS.c", 1527; spr_set(weapon_id);
 7675                        		__ld.umq	_weapon_id
         01:C833  AD 23 23   			lda	_weapon_id
 7676                        		__call		_spr_set.1
         01:C836  20 DD E7   			call	_spr_set.1
 7677                        	
 7678                        		.dbg	line,	"include\routines_LEVELS.c", 1528; spr_x(player_pos_x-64);
 7679                        		__ld.wm		_player_pos_x
         01:C839  AD D3 24   			lda.l	_player_pos_x
         01:C83C  AC D4 24   			ldy.h	_player_pos_x
 7680                        		__sub.wi	64
         01:C83F  38         			sec
         01:C840  E9 40      			sbc.l	#64
         01:C842  B0 01      			bcs	!+
         01:C844  88         			dey
         01:C845             	!:
 7681                        		__call		_spr_x.1
         01:C845  20 0A E8   			call	_spr_x.1
 7682                        	
 7683                        		.dbg	line,	"include\routines_LEVELS.c", 1529; }
 7684    01:C848             	.LL284	.alias		.LL285
 7685                        	
 7686                        		.dbg	line,	"include\routines_LEVELS.c", 1530; }
 7687                        	
 7688                        		.dbg	line,	"include\routines_LEVELS.c", 1532; else if(player_counter_attack == 23)
 7689                        		__bra		.LL285
         01:C848  80 76      			bra	.LL285
 7690    01:C84A             	.LL282:
 7691                        		__ld.umq	_player_counter_attack
         01:C84A  AD 1C 23   			lda	_player_counter_attack
 7692                        		__equ_b.uiq	23
         01:C84D  C9 17      			cmp	#23
         01:C84F  F0 01      			beq	!+
         01:C851  18         			clc
         01:C852             	!:
 7693                        		__bfalse	.LL286
         01:C852  90 6C      			bcc	.LL286
 7694                        	
 7695                        		.dbg	line,	"include\routines_LEVELS.c", 1533; {
 7696                        	
 7697                        		.dbg	line,	"include\routines_LEVELS.c", 1534; spr_set(chain_id);
 7698                        		__ld.umq	_chain_id
         01:C854  AD 22 23   			lda	_chain_id
 7699                        		__call		_spr_set.1
         01:C857  20 DD E7   			call	_spr_set.1
 7700                        	
 7701                        		.dbg	line,	"include\routines_LEVELS.c", 1535; spr_hide();
 7702                        		__call		_spr_hide
         01:C85A  20 F8 E7   			call	_spr_hide
 7703                        	
 7704                        		.dbg	line,	"include\routines_LEVELS.c", 1537; spr_set(chain_id+1);
 7705                        		__ld.um		_chain_id
         01:C85D  AD 22 23   			lda	_chain_id
         01:C860  C2         			cly
 7706                        		__add.wi	1
         01:C861  1A         			inc	a
         01:C862  D0 01      			bne	!+
         01:C864  C8         			iny
         01:C865             	!:
 7707                        		__call		_spr_set.1
         01:C865  20 DD E7   			call	_spr_set.1
 7708                        	
 7709                        		.dbg	line,	"include\routines_LEVELS.c", 1538; spr_hide();
 7710                        		__call		_spr_hide
         01:C868  20 F8 E7   			call	_spr_hide
 7711                        	
 7712                        		.dbg	line,	"include\routines_LEVELS.c", 1540; spr_set(chain_id+2);
 7713                        		__ld.um		_chain_id
         01:C86B  AD 22 23   			lda	_chain_id
         01:C86E  C2         			cly
 7714                        		__add.wi	2
         01:C86F  18         			clc
         01:C870  69 02      			adc.l	#2
         01:C872  90 01      			bcc	!+
         01:C874  C8         			iny
         01:C875             	!:
 7715                        		__call		_spr_set.1
         01:C875  20 DD E7   			call	_spr_set.1
 7716                        	
 7717                        		.dbg	line,	"include\routines_LEVELS.c", 1541; spr_hide();
 7718                        		__call		_spr_hide
         01:C878  20 F8 E7   			call	_spr_hide
 7719                        	
 7720                        		.dbg	line,	"include\routines_LEVELS.c", 1543; spr_set(player_id);
 7721                        		__ld.umq	_player_id
         01:C87B  AD 15 23   			lda	_player_id
 7722                        		__call		_spr_set.1
         01:C87E  20 DD E7   			call	_spr_set.1
 7723                        	
 7724                        		.dbg	line,	"include\routines_LEVELS.c", 1544; spr_pattern(PLAYER_IDLE_VRAM_ADR);
 7725                        		__ld.wi		5632
         01:C881  62         			cla
         01:C882  A0 16      			ldy.h	#5632
 7726                        		__call		_spr_pattern.1
         01:C884  20 26 E8   			call	_spr_pattern.1
 7727                        	
 7728                        		.dbg	line,	"include\routines_LEVELS.c", 1546; spr_set(weapon_id);
 7729                        		__ld.umq	_weapon_id
         01:C887  AD 23 23   			lda	_weapon_id
 7730                        		__call		_spr_set.1
         01:C88A  20 DD E7   			call	_spr_set.1
 7731                        	
 7732                        		.dbg	line,	"include\routines_LEVELS.c", 1547; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
 7733                        		__ld.wi		5184
         01:C88D  A9 40      			lda.l	#5184
         01:C88F  A0 14      			ldy.h	#5184
 7734                        		__call		_spr_pattern.1
         01:C891  20 26 E8   			call	_spr_pattern.1
 7735                        	
 7736                        		.dbg	line,	"include\routines_LEVELS.c", 1548; spr_x(player_pos_x+8);
 7737                        		__ld.wm		_player_pos_x
         01:C894  AD D3 24   			lda.l	_player_pos_x
         01:C897  AC D4 24   			ldy.h	_player_pos_x
 7738                        		__add.wi	8
         01:C89A  18         			clc
         01:C89B  69 08      			adc.l	#8
         01:C89D  90 01      			bcc	!+
         01:C89F  C8         			iny
         01:C8A0             	!:
 7739                        		__call		_spr_x.1
         01:C8A0  20 0A E8   			call	_spr_x.1
 7740                        	
 7741                        		.dbg	line,	"include\routines_LEVELS.c", 1549; spr_y(player_pos_y+16);
 7742                        		__ld.wm		_player_pos_y
         01:C8A3  AD D5 24   			lda.l	_player_pos_y
         01:C8A6  AC D6 24   			ldy.h	_player_pos_y
 7743                        		__add.wi	16
         01:C8A9  18         			clc
         01:C8AA  69 10      			adc.l	#16
         01:C8AC  90 01      			bcc	!+
         01:C8AE  C8         			iny
         01:C8AF             	!:
 7744                        		__call		_spr_y.1
         01:C8AF  20 19 E8   			call	_spr_y.1
 7745                        	
 7746                        		.dbg	line,	"include\routines_LEVELS.c", 1551; player_attack = FALSE;
 7747                        		__st.umiq	0, _player_attack
         01:C8B2  9C 1E 23   			stz	_player_attack
 7748                        	
 7749                        		.dbg	line,	"include\routines_LEVELS.c", 1552; player_counter_attack = 1;
 7750                        		__st.umiq	1, _player_counter_attack
         01:C8B5  A9 01      			lda.l	#1
         01:C8B7  8D 1C 23   			sta	_player_counter_attack
 7751                        	
 7752                        		.dbg	line,	"include\routines_LEVELS.c", 1553; player_state = STATE_IDLE;
 7753                        		__st.umiq	0, _player_state
         01:C8BA  9C 16 23   			stz	_player_state
 7754                        	
 7755                        		.dbg	line,	"include\routines_LEVELS.c", 1554; return;
 7756                        		__bra		.LL216
         01:C8BD  4C 71 DD   			bra	.LL216
 7757                        	
 7758                        		.dbg	line,	"include\routines_LEVELS.c", 1555; }
 7759                        	
 7760                        		.dbg	line,	"include\routines_LEVELS.c", 1558; player_counter_attack += 1;
 7761    01:C8C0             	.LL286:
 7762    01:C8C0             	.LL285:
 7763    01:C8C0             	.LL281:
 7764    01:C8C0             	.LL277:
 7765    01:C8C0             	.LL273:
 7766    01:C8C0             	.LL269:
 7767                        		__add_st.umiq	1, _player_counter_attack
         01:C8C0  EE 1C 23   			inc	_player_counter_attack
 7768                        	
 7769                        		.dbg	line,	"include\routines_LEVELS.c", 1559; }
 7770                        	
 7771                        		.dbg	line,	"include\routines_LEVELS.c", 1562; else if(player_state == STATE_JUMP)
 7772                        		__bra		.LL287
         01:C8C3  4C 71 DD   			bra	.LL287
 7773    01:C8C6             	.LL265:
 7774                        		__ld.umq	_player_state
         01:C8C6  AD 16 23   			lda	_player_state
 7775                        		__equ_b.uiq	4
         01:C8C9  C9 04      			cmp	#4
         01:C8CB  F0 01      			beq	!+
         01:C8CD  18         			clc
         01:C8CE             	!:
 7776                        		__bfalse	.LL288
         01:C8CE  B0 03 4C EB			bcc	.LL288
         01:C8D2  CB          
 7777                        	
 7778                        		.dbg	line,	"include\routines_LEVELS.c", 1563; {
 7779                        	
 7780                        		.dbg	line,	"include\routines_LEVELS.c", 1564; unsigned char i;
 7781                        	
 7782                        		.dbg	line,	"include\routines_LEVELS.c", 1565; i = 1;
 7783                        		__st.umiq	1, __update_PLAYER_end - 1  /* i */
         01:C8D3  A9 01      			lda.l	#1
         01:C8D5  8D 0C 23   			sta	__update_PLAYER_end - 1
 7784                        	
 7785                        		.dbg	line,	"include\routines_LEVELS.c", 1568; if(player_counter_anim == 0)
 7786                        		__not.um	_player_counter_anim
         01:C8D8  AD 19 23   			lda	_player_counter_anim
         01:C8DB  18         			clc
         01:C8DC  D0 01      			bne	!+
         01:C8DE  38         			sec
         01:C8DF             	!:
 7787                        		__bfalse	.LL289
         01:C8DF  90 11      			bcc	.LL289
 7788                        	
 7789                        		.dbg	line,	"include\routines_LEVELS.c", 1569; {
 7790                        	
 7791                        		.dbg	line,	"include\routines_LEVELS.c", 1570; spr_set(player_id);
 7792                        		__ld.umq	_player_id
         01:C8E1  AD 15 23   			lda	_player_id
 7793                        		__call		_spr_set.1
         01:C8E4  20 DD E7   			call	_spr_set.1
 7794                        	
 7795                        		.dbg	line,	"include\routines_LEVELS.c", 1571; spr_pattern(PLAYER_JUMP_VRAM_ADR);
 7796                        		__ld.wi		7424
         01:C8E7  62         			cla
         01:C8E8  A0 1D      			ldy.h	#7424
 7797                        		__call		_spr_pattern.1
         01:C8EA  20 26 E8   			call	_spr_pattern.1
 7798                        	
 7799                        		.dbg	line,	"include\routines_LEVELS.c", 1573; player_counter_anim = 1;
 7800                        		__st.umiq	1, _player_counter_anim
         01:C8ED  A9 01      			lda.l	#1
         01:C8EF  8D 19 23   			sta	_player_counter_anim
 7801                        	
 7802                        		.dbg	line,	"include\routines_LEVELS.c", 1574; }
 7803                        	
 7804                        		.dbg	line,	"include\routines_LEVELS.c", 1577; player_pos_y += TABLE_PLAYER_JUMP_V[player_index_jump];
 7805    01:C8F2             	.LL289:
 7806                        		__ldx.umq	_player_index_jump
         01:C8F2  AE 1A 23   			ldx	_player_index_jump
 7807                        		__ld.bax	_TABLE_PLAYER_JUMP_V
         01:C8F5  BD F9 60   			lda	_TABLE_PLAYER_JUMP_V, x
         01:C8F8  C2         			cly
         01:C8F9  10 01      			bpl	!+
         01:C8FB  88         			dey
         01:C8FC             	!:
 7808                        		__add_st.wmq	_player_pos_y
         01:C8FC  18         			clc
         01:C8FD  6D D5 24   			adc.l	_player_pos_y
         01:C900  8D D5 24   			sta.l	_player_pos_y
         01:C903  98         			tya
         01:C904  6D D6 24   			adc.h	_player_pos_y
         01:C907  8D D6 24   			sta.h	_player_pos_y
 7809                        	
 7810                        		.dbg	line,	"include\routines_LEVELS.c", 1579; // CHECK COLLISION WITH CEILING //
 7811                        	
 7812                        		.dbg	line,	"include\routines_LEVELS.c", 1580; check_BG( 15 , 8 );
 7813                        		__ld.wi		15
         01:C90A  A9 0F      			lda.l	#15
         01:C90C  C2         			cly
 7814                        		__pusharg.wr
         01:C90D  A6 8D      			ldx	<__sp
         01:C90F  CA         			dex
         01:C910  CA         			dex
         01:C911  95 08      			sta.l	<__stack, x
         01:C913  94 09      			sty.h	<__stack, x
         01:C915  86 8D      			stx	<__sp
 7815                        		__ld.wi		8
         01:C917  A9 08      			lda.l	#8
         01:C919  C2         			cly
 7816                        		__pusharg.wr
         01:C91A  A6 8D      			ldx	<__sp
         01:C91C  CA         			dex
         01:C91D  CA         			dex
         01:C91E  95 08      			sta.l	<__stack, x
         01:C920  94 09      			sty.h	<__stack, x
         01:C922  86 8D      			stx	<__sp
 7817                        		__call		_check_BG
         01:C924  20 6D FF   			call	_check_BG
 7818                        	
 7819                        		.dbg	line,	"include\routines_LEVELS.c", 1582; if(map_blk_flag == TILE_BG)
 7820                        		__ld.umq	_map_blk_flag
         01:C927  AD B0 2B   			lda	_map_blk_flag
 7821                        		__equ_b.uiq	1
         01:C92A  C9 01      			cmp	#1
         01:C92C  F0 01      			beq	!+
         01:C92E  18         			clc
         01:C92F             	!:
 7822                        		__bfalse	.LL290
         01:C92F  90 5A      			bcc	.LL290
 7823                        	
 7824                        		.dbg	line,	"include\routines_LEVELS.c", 1583; {
 7825                        	
 7826                        		.dbg	line,	"include\routines_LEVELS.c", 1584; for(i=1 ; i<8 ; i++)
 7827                        		__st.umiq	1, __update_PLAYER_end - 1  /* i */
         01:C931  A9 01      			lda.l	#1
         01:C933  8D 0C 23   			sta	__update_PLAYER_end - 1
 7828    01:C936             	.LL291:
 7829                        		__ld.umq	__update_PLAYER_end - 1  /* i */
         01:C936  AD 0C 23   			lda	__update_PLAYER_end - 1
 7830                        		__ult_b.uiq	8
         01:C939  C9 08      			cmp	#8		; Subtract integer from A.
         01:C93B  6A         			ror	a		; CC if A < integer.
         01:C93C  49 80      			eor	#$80
         01:C93E  2A         			rol	a
 7831                        		__btrue		.LL293
         01:C93F  B0 07      			bcs	.LL293
 7832                        		__bra		.LL294
         01:C941  80 48      			bra	.LL294
 7833    01:C943             	.LL292:
 7834                        		__inc.umq	__update_PLAYER_end - 1  /* i */
         01:C943  EE 0C 23   			inc	__update_PLAYER_end - 1
 7835                        		__bra		.LL291
         01:C946  80 EE      			bra	.LL291
 7836    01:C948             	.LL293:
 7837                        	
 7838                        		.dbg	line,	"include\routines_LEVELS.c", 1585; {
 7839                        	
 7840                        		.dbg	line,	"include\routines_LEVELS.c", 1586; check_BG( 15 , 8 + i );
 7841                        		__ld.wi		15
         01:C948  A9 0F      			lda.l	#15
         01:C94A  C2         			cly
 7842                        		__pusharg.wr
         01:C94B  A6 8D      			ldx	<__sp
         01:C94D  CA         			dex
         01:C94E  CA         			dex
         01:C94F  95 08      			sta.l	<__stack, x
         01:C951  94 09      			sty.h	<__stack, x
         01:C953  86 8D      			stx	<__sp
 7843                        		__ld.wi		8
         01:C955  A9 08      			lda.l	#8
         01:C957  C2         			cly
 7844                        		__add.um	__update_PLAYER_end - 1  /* i */
         01:C958  18         			clc
         01:C959  6D 0C 23   			adc	__update_PLAYER_end - 1
         01:C95C  90 01      			bcc	!+
         01:C95E  C8         			iny
         01:C95F             	!:
 7845                        		__pusharg.wr
         01:C95F  A6 8D      			ldx	<__sp
         01:C961  CA         			dex
         01:C962  CA         			dex
         01:C963  95 08      			sta.l	<__stack, x
         01:C965  94 09      			sty.h	<__stack, x
         01:C967  86 8D      			stx	<__sp
 7846                        		__call		_check_BG
         01:C969  20 6D FF   			call	_check_BG
 7847                        	
 7848                        		.dbg	line,	"include\routines_LEVELS.c", 1587; {
 7849                        	
 7850                        		.dbg	line,	"include\routines_LEVELS.c", 1588; if(map_blk_flag == TILE_EMPTY)
 7851                        		__not.um	_map_blk_flag
         01:C96C  AD B0 2B   			lda	_map_blk_flag
         01:C96F  18         			clc
         01:C970  D0 01      			bne	!+
         01:C972  38         			sec
         01:C973             	!:
 7852                        		__bfalse	.LL295
         01:C973  90 CE      			bcc	.LL295
 7853                        	
 7854                        		.dbg	line,	"include\routines_LEVELS.c", 1589; {
 7855                        	
 7856                        		.dbg	line,	"include\routines_LEVELS.c", 1590; player_pos_y += i;
 7857                        		__ld.um		__update_PLAYER_end - 1  /* i */
         01:C975  AD 0C 23   			lda	__update_PLAYER_end - 1
         01:C978  C2         			cly
 7858                        		__add_st.wmq	_player_pos_y
         01:C979  18         			clc
         01:C97A  6D D5 24   			adc.l	_player_pos_y
         01:C97D  8D D5 24   			sta.l	_player_pos_y
         01:C980  98         			tya
         01:C981  6D D6 24   			adc.h	_player_pos_y
         01:C984  8D D6 24   			sta.h	_player_pos_y
 7859                        	
 7860                        		.dbg	line,	"include\routines_LEVELS.c", 1591; break;
 7861                        		__bra		.LL294
         01:C987  80 02      			bra	.LL294
 7862                        	
 7863                        		.dbg	line,	"include\routines_LEVELS.c", 1592; }
 7864                        	
 7865                        		.dbg	line,	"include\routines_LEVELS.c", 1593; }
 7866    01:C989             	.LL295	.alias		.LL292
 7867                        	
 7868                        		.dbg	line,	"include\routines_LEVELS.c", 1594; }
 7869                        		__bra		.LL292
         01:C989  80 B8      			bra	.LL292
 7870    01:C98B             	.LL294:
 7871                        	
 7872                        		.dbg	line,	"include\routines_LEVELS.c", 1595; }
 7873                        	
 7874                        		.dbg	line,	"include\routines_LEVELS.c", 1597; spr_set(weapon_id);
 7875    01:C98B             	.LL290:
 7876                        		__ld.umq	_weapon_id
         01:C98B  AD 23 23   			lda	_weapon_id
 7877                        		__call		_spr_set.1
         01:C98E  20 DD E7   			call	_spr_set.1
 7878                        	
 7879                        		.dbg	line,	"include\routines_LEVELS.c", 1598; spr_y(player_pos_y+8);
 7880                        		__ld.wm		_player_pos_y
         01:C991  AD D5 24   			lda.l	_player_pos_y
         01:C994  AC D6 24   			ldy.h	_player_pos_y
 7881                        		__add.wi	8
         01:C997  18         			clc
         01:C998  69 08      			adc.l	#8
         01:C99A  90 01      			bcc	!+
         01:C99C  C8         			iny
         01:C99D             	!:
 7882                        		__call		_spr_y.1
         01:C99D  20 19 E8   			call	_spr_y.1
 7883                        	
 7884                        		.dbg	line,	"include\routines_LEVELS.c", 1600; spr_set(player_id);
 7885                        		__ld.umq	_player_id
         01:C9A0  AD 15 23   			lda	_player_id
 7886                        		__call		_spr_set.1
         01:C9A3  20 DD E7   			call	_spr_set.1
 7887                        	
 7888                        		.dbg	line,	"include\routines_LEVELS.c", 1601; spr_y(player_pos_y);
 7889                        		__ld.wm		_player_pos_y
         01:C9A6  AD D5 24   			lda.l	_player_pos_y
         01:C9A9  AC D6 24   			ldy.h	_player_pos_y
 7890                        		__call		_spr_y.1
         01:C9AC  20 19 E8   			call	_spr_y.1
 7891                        	
 7892                        		.dbg	line,	"include\routines_LEVELS.c", 1605; if(player_index_jump < 34)
 7893                        		__ld.umq	_player_index_jump
         01:C9AF  AD 1A 23   			lda	_player_index_jump
 7894                        		__ult_b.uiq	34
         01:C9B2  C9 22      			cmp	#34		; Subtract integer from A.
         01:C9B4  6A         			ror	a		; CC if A < integer.
         01:C9B5  49 80      			eor	#$80
         01:C9B7  2A         			rol	a
 7895                        		__bfalse	.LL296
         01:C9B8  90 03      			bcc	.LL296
 7896                        	
 7897                        		.dbg	line,	"include\routines_LEVELS.c", 1606; {
 7898                        	
 7899                        		.dbg	line,	"include\routines_LEVELS.c", 1608; player_index_jump += 1;
 7900                        		__add_st.umiq	1, _player_index_jump
         01:C9BA  EE 1A 23   			inc	_player_index_jump
 7901                        	
 7902                        		.dbg	line,	"include\routines_LEVELS.c", 1609; }
 7903                        	
 7904                        		.dbg	line,	"include\routines_LEVELS.c", 1614; //--------------------------------------------------------------------------------------//
 7905                        	
 7906                        		.dbg	line,	"include\routines_LEVELS.c", 1615; //                                   FLOOR COLLISION                                    //
 7907                        	
 7908                        		.dbg	line,	"include\routines_LEVELS.c", 1616; //--------------------------------------------------------------------------------------//
 7909                        	
 7910                        		.dbg	line,	"include\routines_LEVELS.c", 1618; if(player_index_jump > 14)
 7911    01:C9BD             	.LL296:
 7912                        		__ld.umq	_player_index_jump
         01:C9BD  AD 1A 23   			lda	_player_index_jump
 7913                        		__ugt_b.uiq	14
         01:C9C0  18         			clc			; Subtract integer+1 from A.
         01:C9C1  E9 0E      			sbc	#14		; CS if A > integer.
 7914                        		__bfalse	.LL297
         01:C9C3  B0 03 4C 5A			bcc	.LL297
         01:C9C7  CB          
 7915                        	
 7916                        		.dbg	line,	"include\routines_LEVELS.c", 1619; {
 7917                        	
 7918                        		.dbg	line,	"include\routines_LEVELS.c", 1620; // CHECK COLLISION WITH LEFT FLOOR //
 7919                        	
 7920                        		.dbg	line,	"include\routines_LEVELS.c", 1621; check_BG( 10 , 32 );
 7921                        		__ld.wi		10
         01:C9C8  A9 0A      			lda.l	#10
         01:C9CA  C2         			cly
 7922                        		__pusharg.wr
         01:C9CB  A6 8D      			ldx	<__sp
         01:C9CD  CA         			dex
         01:C9CE  CA         			dex
         01:C9CF  95 08      			sta.l	<__stack, x
         01:C9D1  94 09      			sty.h	<__stack, x
         01:C9D3  86 8D      			stx	<__sp
 7923                        		__ld.wi		32
         01:C9D5  A9 20      			lda.l	#32
         01:C9D7  C2         			cly
 7924                        		__pusharg.wr
         01:C9D8  A6 8D      			ldx	<__sp
         01:C9DA  CA         			dex
         01:C9DB  CA         			dex
         01:C9DC  95 08      			sta.l	<__stack, x
         01:C9DE  94 09      			sty.h	<__stack, x
         01:C9E0  86 8D      			stx	<__sp
 7925                        		__call		_check_BG
         01:C9E2  20 6D FF   			call	_check_BG
 7926                        	
 7927                        		.dbg	line,	"include\routines_LEVELS.c", 1623; // IF PLAYER TOUCHES THE GROUND TO THE LEFT //
 7928                        	
 7929                        		.dbg	line,	"include\routines_LEVELS.c", 1624; if(map_blk_flag == TILE_BG)
 7930                        		__ld.umq	_map_blk_flag
         01:C9E5  AD B0 2B   			lda	_map_blk_flag
 7931                        		__equ_b.uiq	1
         01:C9E8  C9 01      			cmp	#1
         01:C9EA  F0 01      			beq	!+
         01:C9EC  18         			clc
         01:C9ED             	!:
 7932                        		__bfalse	.LL298
         01:C9ED  B0 03 4C 91			bcc	.LL298
         01:C9F1  CA          
 7933                        	
 7934                        		.dbg	line,	"include\routines_LEVELS.c", 1625; {
 7935                        	
 7936                        		.dbg	line,	"include\routines_LEVELS.c", 1626; // CALCULATE HOW MANY PIXELS THE PLAYER MOVED INTO THE GROUND //
 7937                        	
 7938                        		.dbg	line,	"include\routines_LEVELS.c", 1627; for(i=1; i<11 ; i++ )
 7939                        		__st.umiq	1, __update_PLAYER_end - 1  /* i */
         01:C9F2  A9 01      			lda.l	#1
         01:C9F4  8D 0C 23   			sta	__update_PLAYER_end - 1
 7940    01:C9F7             	.LL299:
 7941                        		__ld.umq	__update_PLAYER_end - 1  /* i */
         01:C9F7  AD 0C 23   			lda	__update_PLAYER_end - 1
 7942                        		__ult_b.uiq	11
         01:C9FA  C9 0B      			cmp	#11		; Subtract integer from A.
         01:C9FC  6A         			ror	a		; CC if A < integer.
         01:C9FD  49 80      			eor	#$80
         01:C9FF  2A         			rol	a
 7943                        		__btrue		.LL301
         01:CA00  B0 07      			bcs	.LL301
 7944                        		__bra		.LL302
         01:CA02  80 5B      			bra	.LL302
 7945    01:CA04             	.LL300:
 7946                        		__inc.umq	__update_PLAYER_end - 1  /* i */
         01:CA04  EE 0C 23   			inc	__update_PLAYER_end - 1
 7947                        		__bra		.LL299
         01:CA07  80 EE      			bra	.LL299
 7948    01:CA09             	.LL301:
 7949                        	
 7950                        		.dbg	line,	"include\routines_LEVELS.c", 1628; {
 7951                        	
 7952                        		.dbg	line,	"include\routines_LEVELS.c", 1629; check_TILE_DEPTH( 10 , i);
 7953                        		__ld.wi		10
         01:CA09  A9 0A      			lda.l	#10
         01:CA0B  C2         			cly
 7954                        		__pusharg.wr
         01:CA0C  A6 8D      			ldx	<__sp
         01:CA0E  CA         			dex
         01:CA0F  CA         			dex
         01:CA10  95 08      			sta.l	<__stack, x
         01:CA12  94 09      			sty.h	<__stack, x
         01:CA14  86 8D      			stx	<__sp
 7955                        		__ld.um		__update_PLAYER_end - 1  /* i */
         01:CA16  AD 0C 23   			lda	__update_PLAYER_end - 1
         01:CA19  C2         			cly
 7956                        		__pusharg.wr
         01:CA1A  A6 8D      			ldx	<__sp
         01:CA1C  CA         			dex
         01:CA1D  CA         			dex
         01:CA1E  95 08      			sta.l	<__stack, x
         01:CA20  94 09      			sty.h	<__stack, x
         01:CA22  86 8D      			stx	<__sp
 7957                        		__call		_check_TILE_DEPTH
         01:CA24  20 59 FF   			call	_check_TILE_DEPTH
 7958                        	
 7959                        		.dbg	line,	"include\routines_LEVELS.c", 1631; if(map_blk_flag == TILE_EMPTY)
 7960                        		__not.um	_map_blk_flag
         01:CA27  AD B0 2B   			lda	_map_blk_flag
         01:CA2A  18         			clc
         01:CA2B  D0 01      			bne	!+
         01:CA2D  38         			sec
         01:CA2E             	!:
 7961                        		__bfalse	.LL303
         01:CA2E  90 D4      			bcc	.LL303
 7962                        	
 7963                        		.dbg	line,	"include\routines_LEVELS.c", 1632; {
 7964                        	
 7965                        		.dbg	line,	"include\routines_LEVELS.c", 1633; //spr_set(player_id);
 7966                        	
 7967                        		.dbg	line,	"include\routines_LEVELS.c", 1634; spr_pattern(PLAYER_IDLE_VRAM_ADR);
 7968                        		__ld.wi		5632
         01:CA30  62         			cla
         01:CA31  A0 16      			ldy.h	#5632
 7969                        		__call		_spr_pattern.1
         01:CA33  20 26 E8   			call	_spr_pattern.1
 7970                        	
 7971                        		.dbg	line,	"include\routines_LEVELS.c", 1635; player_pos_y -= (i - 1);
 7972                        		__ld.um		__update_PLAYER_end - 1  /* i */
         01:CA36  AD 0C 23   			lda	__update_PLAYER_end - 1
         01:CA39  C2         			cly
 7973                        		__sub.wi	1
         01:CA3A  38         			sec
         01:CA3B  E9 01      			sbc.l	#1
         01:CA3D  B0 01      			bcs	!+
         01:CA3F  88         			dey
         01:CA40             	!:
 7974                        		__isub_st.wmq	_player_pos_y
         01:CA40  38         			sec
         01:CA41  49 FF      			eor	#$FF
         01:CA43  6D D5 24   			adc.l	_player_pos_y
         01:CA46  8D D5 24   			sta.l	_player_pos_y
         01:CA49  98         			tya
         01:CA4A  49 FF      			eor	#$FF
         01:CA4C  6D D6 24   			adc.h	_player_pos_y
         01:CA4F  8D D6 24   			sta.h	_player_pos_y
 7975                        	
 7976                        		.dbg	line,	"include\routines_LEVELS.c", 1636; spr_y(player_pos_y);
 7977                        		__ld.wm		_player_pos_y
         01:CA52  AD D5 24   			lda.l	_player_pos_y
         01:CA55  AC D6 24   			ldy.h	_player_pos_y
 7978                        		__call		_spr_y.1
         01:CA58  20 19 E8   			call	_spr_y.1
 7979                        	
 7980                        		.dbg	line,	"include\routines_LEVELS.c", 1637; break;
 7981                        		__bra		.LL302
         01:CA5B  80 02      			bra	.LL302
 7982                        	
 7983                        		.dbg	line,	"include\routines_LEVELS.c", 1638; }
 7984                        	
 7985                        		.dbg	line,	"include\routines_LEVELS.c", 1640; }
 7986    01:CA5D             	.LL303	.alias		.LL300
 7987                        		__bra		.LL300
         01:CA5D  80 A5      			bra	.LL300
 7988    01:CA5F             	.LL302:
 7989                        	
 7990                        		.dbg	line,	"include\routines_LEVELS.c", 1642; spr_set(weapon_id);
 7991                        		__ld.umq	_weapon_id
         01:CA5F  AD 23 23   			lda	_weapon_id
 7992                        		__call		_spr_set.1
         01:CA62  20 DD E7   			call	_spr_set.1
 7993                        	
 7994                        		.dbg	line,	"include\routines_LEVELS.c", 1643; spr_x(player_pos_x+8);
 7995                        		__ld.wm		_player_pos_x
         01:CA65  AD D3 24   			lda.l	_player_pos_x
         01:CA68  AC D4 24   			ldy.h	_player_pos_x
 7996                        		__add.wi	8
         01:CA6B  18         			clc
         01:CA6C  69 08      			adc.l	#8
         01:CA6E  90 01      			bcc	!+
         01:CA70  C8         			iny
         01:CA71             	!:
 7997                        		__call		_spr_x.1
         01:CA71  20 0A E8   			call	_spr_x.1
 7998                        	
 7999                        		.dbg	line,	"include\routines_LEVELS.c", 1644; spr_y(player_pos_y+16);
 8000                        		__ld.wm		_player_pos_y
         01:CA74  AD D5 24   			lda.l	_player_pos_y
         01:CA77  AC D6 24   			ldy.h	_player_pos_y
 8001                        		__add.wi	16
         01:CA7A  18         			clc
         01:CA7B  69 10      			adc.l	#16
         01:CA7D  90 01      			bcc	!+
         01:CA7F  C8         			iny
         01:CA80             	!:
 8002                        		__call		_spr_y.1
         01:CA80  20 19 E8   			call	_spr_y.1
 8003                        	
 8004                        		.dbg	line,	"include\routines_LEVELS.c", 1646; player_counter_anim = 1;
 8005                        		__st.umiq	1, _player_counter_anim
         01:CA83  A9 01      			lda.l	#1
         01:CA85  8D 19 23   			sta	_player_counter_anim
 8006                        	
 8007                        		.dbg	line,	"include\routines_LEVELS.c", 1647; player_index_jump = 0;
 8008                        		__st.umiq	0, _player_index_jump
         01:CA88  9C 1A 23   			stz	_player_index_jump
 8009                        	
 8010                        		.dbg	line,	"include\routines_LEVELS.c", 1648; player_state = STATE_IDLE;
 8011                        		__st.umiq	0, _player_state
         01:CA8B  9C 16 23   			stz	_player_state
 8012                        	
 8013                        		.dbg	line,	"include\routines_LEVELS.c", 1649; return;
 8014                        		__bra		.LL216
         01:CA8E  4C 71 DD   			bra	.LL216
 8015                        	
 8016                        		.dbg	line,	"include\routines_LEVELS.c", 1650; }
 8017                        	
 8018                        		.dbg	line,	"include\routines_LEVELS.c", 1652; // IF PLAYER TOUCHES THE GROUND TO THE RIGHT //
 8019                        	
 8020                        		.dbg	line,	"include\routines_LEVELS.c", 1653; else
 8021    01:CA91             	.LL298:
 8022                        	
 8023                        		.dbg	line,	"include\routines_LEVELS.c", 1654; {
 8024                        	
 8025                        		.dbg	line,	"include\routines_LEVELS.c", 1655; // CHECK COLLISION WITH RIGHT FLOOR //
 8026                        	
 8027                        		.dbg	line,	"include\routines_LEVELS.c", 1656; check_BG( 22 , 32 );
 8028                        		__ld.wi		22
         01:CA91  A9 16      			lda.l	#22
         01:CA93  C2         			cly
 8029                        		__pusharg.wr
         01:CA94  A6 8D      			ldx	<__sp
         01:CA96  CA         			dex
         01:CA97  CA         			dex
         01:CA98  95 08      			sta.l	<__stack, x
         01:CA9A  94 09      			sty.h	<__stack, x
         01:CA9C  86 8D      			stx	<__sp
 8030                        		__ld.wi		32
         01:CA9E  A9 20      			lda.l	#32
         01:CAA0  C2         			cly
 8031                        		__pusharg.wr
         01:CAA1  A6 8D      			ldx	<__sp
         01:CAA3  CA         			dex
         01:CAA4  CA         			dex
         01:CAA5  95 08      			sta.l	<__stack, x
         01:CAA7  94 09      			sty.h	<__stack, x
         01:CAA9  86 8D      			stx	<__sp
 8032                        		__call		_check_BG
         01:CAAB  20 6D FF   			call	_check_BG
 8033                        	
 8034                        		.dbg	line,	"include\routines_LEVELS.c", 1658; if(map_blk_flag == TILE_BG)
 8035                        		__ld.umq	_map_blk_flag
         01:CAAE  AD B0 2B   			lda	_map_blk_flag
 8036                        		__equ_b.uiq	1
         01:CAB1  C9 01      			cmp	#1
         01:CAB3  F0 01      			beq	!+
         01:CAB5  18         			clc
         01:CAB6             	!:
 8037                        		__bfalse	.LL305
         01:CAB6  B0 03 4C 5A			bcc	.LL305
         01:CABA  CB          
 8038                        	
 8039                        		.dbg	line,	"include\routines_LEVELS.c", 1659; {
 8040                        	
 8041                        		.dbg	line,	"include\routines_LEVELS.c", 1660; // CALCULATE HOW MANY PIXELS THE PLAYER MOVED INTO THE GROUND //
 8042                        	
 8043                        		.dbg	line,	"include\routines_LEVELS.c", 1661; for(i=1; i<11 ; i++ )
 8044                        		__st.umiq	1, __update_PLAYER_end - 1  /* i */
         01:CABB  A9 01      			lda.l	#1
         01:CABD  8D 0C 23   			sta	__update_PLAYER_end - 1
 8045    01:CAC0             	.LL306:
 8046                        		__ld.umq	__update_PLAYER_end - 1  /* i */
         01:CAC0  AD 0C 23   			lda	__update_PLAYER_end - 1
 8047                        		__ult_b.uiq	11
         01:CAC3  C9 0B      			cmp	#11		; Subtract integer from A.
         01:CAC5  6A         			ror	a		; CC if A < integer.
         01:CAC6  49 80      			eor	#$80
         01:CAC8  2A         			rol	a
 8048                        		__btrue		.LL308
         01:CAC9  B0 07      			bcs	.LL308
 8049                        		__bra		.LL309
         01:CACB  80 5B      			bra	.LL309
 8050    01:CACD             	.LL307:
 8051                        		__inc.umq	__update_PLAYER_end - 1  /* i */
         01:CACD  EE 0C 23   			inc	__update_PLAYER_end - 1
 8052                        		__bra		.LL306
         01:CAD0  80 EE      			bra	.LL306
 8053    01:CAD2             	.LL308:
 8054                        	
 8055                        		.dbg	line,	"include\routines_LEVELS.c", 1662; {
 8056                        	
 8057                        		.dbg	line,	"include\routines_LEVELS.c", 1663; check_TILE_DEPTH( 22 , i);
 8058                        		__ld.wi		22
         01:CAD2  A9 16      			lda.l	#22
         01:CAD4  C2         			cly
 8059                        		__pusharg.wr
         01:CAD5  A6 8D      			ldx	<__sp
         01:CAD7  CA         			dex
         01:CAD8  CA         			dex
         01:CAD9  95 08      			sta.l	<__stack, x
         01:CADB  94 09      			sty.h	<__stack, x
         01:CADD  86 8D      			stx	<__sp
 8060                        		__ld.um		__update_PLAYER_end - 1  /* i */
         01:CADF  AD 0C 23   			lda	__update_PLAYER_end - 1
         01:CAE2  C2         			cly
 8061                        		__pusharg.wr
         01:CAE3  A6 8D      			ldx	<__sp
         01:CAE5  CA         			dex
         01:CAE6  CA         			dex
         01:CAE7  95 08      			sta.l	<__stack, x
         01:CAE9  94 09      			sty.h	<__stack, x
         01:CAEB  86 8D      			stx	<__sp
 8062                        		__call		_check_TILE_DEPTH
         01:CAED  20 59 FF   			call	_check_TILE_DEPTH
 8063                        	
 8064                        		.dbg	line,	"include\routines_LEVELS.c", 1665; if(map_blk_flag == TILE_EMPTY)
 8065                        		__not.um	_map_blk_flag
         01:CAF0  AD B0 2B   			lda	_map_blk_flag
         01:CAF3  18         			clc
         01:CAF4  D0 01      			bne	!+
         01:CAF6  38         			sec
         01:CAF7             	!:
 8066                        		__bfalse	.LL310
         01:CAF7  90 D4      			bcc	.LL310
 8067                        	
 8068                        		.dbg	line,	"include\routines_LEVELS.c", 1666; {
 8069                        	
 8070                        		.dbg	line,	"include\routines_LEVELS.c", 1667; //spr_set(player_id);
 8071                        	
 8072                        		.dbg	line,	"include\routines_LEVELS.c", 1668; spr_pattern(PLAYER_IDLE_VRAM_ADR);
 8073                        		__ld.wi		5632
         01:CAF9  62         			cla
         01:CAFA  A0 16      			ldy.h	#5632
 8074                        		__call		_spr_pattern.1
         01:CAFC  20 26 E8   			call	_spr_pattern.1
 8075                        	
 8076                        		.dbg	line,	"include\routines_LEVELS.c", 1669; player_pos_y -= (i - 1);
 8077                        		__ld.um		__update_PLAYER_end - 1  /* i */
         01:CAFF  AD 0C 23   			lda	__update_PLAYER_end - 1
         01:CB02  C2         			cly
 8078                        		__sub.wi	1
         01:CB03  38         			sec
         01:CB04  E9 01      			sbc.l	#1
         01:CB06  B0 01      			bcs	!+
         01:CB08  88         			dey
         01:CB09             	!:
 8079                        		__isub_st.wmq	_player_pos_y
         01:CB09  38         			sec
         01:CB0A  49 FF      			eor	#$FF
         01:CB0C  6D D5 24   			adc.l	_player_pos_y
         01:CB0F  8D D5 24   			sta.l	_player_pos_y
         01:CB12  98         			tya
         01:CB13  49 FF      			eor	#$FF
         01:CB15  6D D6 24   			adc.h	_player_pos_y
         01:CB18  8D D6 24   			sta.h	_player_pos_y
 8080                        	
 8081                        		.dbg	line,	"include\routines_LEVELS.c", 1670; spr_y(player_pos_y);
 8082                        		__ld.wm		_player_pos_y
         01:CB1B  AD D5 24   			lda.l	_player_pos_y
         01:CB1E  AC D6 24   			ldy.h	_player_pos_y
 8083                        		__call		_spr_y.1
         01:CB21  20 19 E8   			call	_spr_y.1
 8084                        	
 8085                        		.dbg	line,	"include\routines_LEVELS.c", 1671; break;
 8086                        		__bra		.LL309
         01:CB24  80 02      			bra	.LL309
 8087                        	
 8088                        		.dbg	line,	"include\routines_LEVELS.c", 1672; }
 8089                        	
 8090                        		.dbg	line,	"include\routines_LEVELS.c", 1674; }
 8091    01:CB26             	.LL310	.alias		.LL307
 8092                        		__bra		.LL307
         01:CB26  80 A5      			bra	.LL307
 8093    01:CB28             	.LL309:
 8094                        	
 8095                        		.dbg	line,	"include\routines_LEVELS.c", 1677; spr_set(weapon_id);
 8096                        		__ld.umq	_weapon_id
         01:CB28  AD 23 23   			lda	_weapon_id
 8097                        		__call		_spr_set.1
         01:CB2B  20 DD E7   			call	_spr_set.1
 8098                        	
 8099                        		.dbg	line,	"include\routines_LEVELS.c", 1678; spr_x(player_pos_x+8);
 8100                        		__ld.wm		_player_pos_x
         01:CB2E  AD D3 24   			lda.l	_player_pos_x
         01:CB31  AC D4 24   			ldy.h	_player_pos_x
 8101                        		__add.wi	8
         01:CB34  18         			clc
         01:CB35  69 08      			adc.l	#8
         01:CB37  90 01      			bcc	!+
         01:CB39  C8         			iny
         01:CB3A             	!:
 8102                        		__call		_spr_x.1
         01:CB3A  20 0A E8   			call	_spr_x.1
 8103                        	
 8104                        		.dbg	line,	"include\routines_LEVELS.c", 1679; spr_y(player_pos_y+16);
 8105                        		__ld.wm		_player_pos_y
         01:CB3D  AD D5 24   			lda.l	_player_pos_y
         01:CB40  AC D6 24   			ldy.h	_player_pos_y
 8106                        		__add.wi	16
         01:CB43  18         			clc
         01:CB44  69 10      			adc.l	#16
         01:CB46  90 01      			bcc	!+
         01:CB48  C8         			iny
         01:CB49             	!:
 8107                        		__call		_spr_y.1
         01:CB49  20 19 E8   			call	_spr_y.1
 8108                        	
 8109                        		.dbg	line,	"include\routines_LEVELS.c", 1681; player_counter_anim = 1;
 8110                        		__st.umiq	1, _player_counter_anim
         01:CB4C  A9 01      			lda.l	#1
         01:CB4E  8D 19 23   			sta	_player_counter_anim
 8111                        	
 8112                        		.dbg	line,	"include\routines_LEVELS.c", 1682; player_index_jump = 0;
 8113                        		__st.umiq	0, _player_index_jump
         01:CB51  9C 1A 23   			stz	_player_index_jump
 8114                        	
 8115                        		.dbg	line,	"include\routines_LEVELS.c", 1683; player_state = STATE_IDLE;
 8116                        		__st.umiq	0, _player_state
         01:CB54  9C 16 23   			stz	_player_state
 8117                        	
 8118                        		.dbg	line,	"include\routines_LEVELS.c", 1684; return;
 8119                        		__bra		.LL216
         01:CB57  4C 71 DD   			bra	.LL216
 8120                        	
 8121                        		.dbg	line,	"include\routines_LEVELS.c", 1685; }
 8122                        	
 8123                        		.dbg	line,	"include\routines_LEVELS.c", 1686; }
 8124    01:CB5A             	.LL305:
 8125    01:CB5A             	.LL304:
 8126                        	
 8127                        		.dbg	line,	"include\routines_LEVELS.c", 1687; }
 8128                        	
 8129                        		.dbg	line,	"include\routines_LEVELS.c", 1691; // CHECK COLLISION WITH LADDERS //
 8130                        	
 8131                        		.dbg	line,	"include\routines_LEVELS.c", 1692; check_BG( 16 , 16 );
 8132    01:CB5A             	.LL297:
 8133                        		__ld.wi		16
         01:CB5A  A9 10      			lda.l	#16
         01:CB5C  C2         			cly
 8134                        		__pusharg.wr
         01:CB5D  A6 8D      			ldx	<__sp
         01:CB5F  CA         			dex
         01:CB60  CA         			dex
         01:CB61  95 08      			sta.l	<__stack, x
         01:CB63  94 09      			sty.h	<__stack, x
         01:CB65  86 8D      			stx	<__sp
 8135                        		__ld.wi		16
         01:CB67  A9 10      			lda.l	#16
         01:CB69  C2         			cly
 8136                        		__pusharg.wr
         01:CB6A  A6 8D      			ldx	<__sp
         01:CB6C  CA         			dex
         01:CB6D  CA         			dex
         01:CB6E  95 08      			sta.l	<__stack, x
         01:CB70  94 09      			sty.h	<__stack, x
         01:CB72  86 8D      			stx	<__sp
 8137                        		__call		_check_BG
         01:CB74  20 6D FF   			call	_check_BG
 8138                        	
 8139                        		.dbg	line,	"include\routines_LEVELS.c", 1694; // IF PLAYER HITS THE LADDER //
 8140                        	
 8141                        		.dbg	line,	"include\routines_LEVELS.c", 1695; if(map_blk_flag == TILE_LADDER)
 8142                        		__ld.umq	_map_blk_flag
         01:CB77  AD B0 2B   			lda	_map_blk_flag
 8143                        		__equ_b.uiq	2
         01:CB7A  C9 02      			cmp	#2
         01:CB7C  F0 01      			beq	!+
         01:CB7E  18         			clc
         01:CB7F             	!:
 8144                        		__bfalse	.LL311
         01:CB7F  B0 03 4C 71			bcc	.LL311
         01:CB83  DD          
 8145                        	
 8146                        		.dbg	line,	"include\routines_LEVELS.c", 1696; {
 8147                        	
 8148                        		.dbg	line,	"include\routines_LEVELS.c", 1697; // CAMERA GOES 8 PX BACKWARD //
 8149                        	
 8150                        		.dbg	line,	"include\routines_LEVELS.c", 1698; sgx_map_pxl_x = ( (sgx_map_pxl_x >> 3) << 3 );
 8151                        		__ld.wm		_sgx_map_pxl_x
         01:CB84  AD 8F 26   			lda.l	_sgx_map_pxl_x
         01:CB87  AC 90 26   			ldy.h	_sgx_map_pxl_x
 8152                        		__lsr.wi	3
         01:CB8A  84 00      			sty	__temp
         01:CB8C  20 3A E2   			jsr	lsrw3
 8153                        		__asl.wi	3
         01:CB8F  84 00      			sty	__temp
         01:CB91  20 D7 E1   			jsr	aslw3
 8154                        		__st.wmq	_sgx_map_pxl_x
         01:CB94  8D 8F 26   			sta.l	_sgx_map_pxl_x
         01:CB97  8C 90 26   			sty.h	_sgx_map_pxl_x
 8155                        	
 8156                        		.dbg	line,	"include\routines_LEVELS.c", 1700; // SO WE UPDATE THE MAP //
 8157                        	
 8158                        		.dbg	line,	"include\routines_LEVELS.c", 1701; sgx_scroll_map();
 8159                        		__call		_sgx_scroll_map
         01:CB9A  20 81 FF   			call	_sgx_scroll_map
 8160                        	
 8161                        		.dbg	line,	"include\routines_LEVELS.c", 1703; // CHECK IF THE PLAYER STANDS RIGHT TO THE LADDER //
 8162                        	
 8163                        		.dbg	line,	"include\routines_LEVELS.c", 1704; check_BG( 31 , 16 );
 8164                        		__ld.wi		31
         01:CB9D  A9 1F      			lda.l	#31
         01:CB9F  C2         			cly
 8165                        		__pusharg.wr
         01:CBA0  A6 8D      			ldx	<__sp
         01:CBA2  CA         			dex
         01:CBA3  CA         			dex
         01:CBA4  95 08      			sta.l	<__stack, x
         01:CBA6  94 09      			sty.h	<__stack, x
         01:CBA8  86 8D      			stx	<__sp
 8166                        		__ld.wi		16
         01:CBAA  A9 10      			lda.l	#16
         01:CBAC  C2         			cly
 8167                        		__pusharg.wr
         01:CBAD  A6 8D      			ldx	<__sp
         01:CBAF  CA         			dex
         01:CBB0  CA         			dex
         01:CBB1  95 08      			sta.l	<__stack, x
         01:CBB3  94 09      			sty.h	<__stack, x
         01:CBB5  86 8D      			stx	<__sp
 8168                        		__call		_check_BG
         01:CBB7  20 6D FF   			call	_check_BG
 8169                        	
 8170                        		.dbg	line,	"include\routines_LEVELS.c", 1706; if(map_blk_flag == TILE_LADDER)
 8171                        		__ld.umq	_map_blk_flag
         01:CBBA  AD B0 2B   			lda	_map_blk_flag
 8172                        		__equ_b.uiq	2
         01:CBBD  C9 02      			cmp	#2
         01:CBBF  F0 01      			beq	!+
         01:CBC1  18         			clc
         01:CBC2             	!:
 8173                        		__bfalse	.LL312
         01:CBC2  90 0E      			bcc	.LL312
 8174                        	
 8175                        		.dbg	line,	"include\routines_LEVELS.c", 1707; {
 8176                        	
 8177                        		.dbg	line,	"include\routines_LEVELS.c", 1708; sgx_map_pxl_x += 8;
 8178                        		__add_st.wmiq	8, _sgx_map_pxl_x
         01:CBC4  18         			clc
         01:CBC5  AD 8F 26   			lda.l	_sgx_map_pxl_x
         01:CBC8  69 08      			adc.l	#8
         01:CBCA  8D 8F 26   			sta.l	_sgx_map_pxl_x
         01:CBCD  90 03      			bcc	!+
         01:CBCF  EE 90 26   			inc.h	_sgx_map_pxl_x
         01:CBD2             	!:
 8179                        	
 8180                        		.dbg	line,	"include\routines_LEVELS.c", 1709; }
 8181                        	
 8182                        		.dbg	line,	"include\routines_LEVELS.c", 1711; spr_pattern(PLAYER_HANG_VRAM_ADR);
 8183    01:CBD2             	.LL312:
 8184                        		__ld.wi		7936
         01:CBD2  62         			cla
         01:CBD3  A0 1F      			ldy.h	#7936
 8185                        		__call		_spr_pattern.1
         01:CBD5  20 26 E8   			call	_spr_pattern.1
 8186                        	
 8187                        		.dbg	line,	"include\routines_LEVELS.c", 1712; player_counter_anim = 0;
 8188                        		__st.umiq	0, _player_counter_anim
         01:CBD8  9C 19 23   			stz	_player_counter_anim
 8189                        	
 8190                        		.dbg	line,	"include\routines_LEVELS.c", 1713; player_index_jump = 0;
 8191                        		__st.umiq	0, _player_index_jump
         01:CBDB  9C 1A 23   			stz	_player_index_jump
 8192                        	
 8193                        		.dbg	line,	"include\routines_LEVELS.c", 1714; jump_ladder = TRUE;
 8194                        		__st.umiq	1, _jump_ladder
         01:CBDE  A9 01      			lda.l	#1
         01:CBE0  8D 1F 23   			sta	_jump_ladder
 8195                        	
 8196                        		.dbg	line,	"include\routines_LEVELS.c", 1715; player_state = STATE_HANG;
 8197                        		__st.umiq	10, _player_state
         01:CBE3  A9 0A      			lda.l	#10
         01:CBE5  8D 16 23   			sta	_player_state
 8198                        	
 8199                        		.dbg	line,	"include\routines_LEVELS.c", 1716; }
 8200                        	
 8201                        		.dbg	line,	"include\routines_LEVELS.c", 1717; }
 8202    01:CBE8             	.LL311	.alias		.LL313
 8203                        	
 8204                        		.dbg	line,	"include\routines_LEVELS.c", 1720; else if(player_state == STATE_JUMP_RIGHT)
 8205                        		__bra		.LL313
         01:CBE8  4C 71 DD   			bra	.LL313
 8206    01:CBEB             	.LL288:
 8207                        		__ld.umq	_player_state
         01:CBEB  AD 16 23   			lda	_player_state
 8208                        		__equ_b.uiq	5
         01:CBEE  C9 05      			cmp	#5
         01:CBF0  F0 01      			beq	!+
         01:CBF2  18         			clc
         01:CBF3             	!:
 8209                        		__bfalse	.LL314
         01:CBF3  B0 03 4C 1F			bcc	.LL314
         01:CBF7  D0          
 8210                        	
 8211                        		.dbg	line,	"include\routines_LEVELS.c", 1721; {
 8212                        	
 8213                        		.dbg	line,	"include\routines_LEVELS.c", 1722; unsigned char i, camera_y_move;
 8214                        	
 8215                        		.dbg	line,	"include\routines_LEVELS.c", 1723; i = 1;
 8216                        		__st.umiq	1, __update_PLAYER_end - 2  /* i */
         01:CBF8  A9 01      			lda.l	#1
         01:CBFA  8D 0B 23   			sta	__update_PLAYER_end - 2
 8217                        	
 8218                        		.dbg	line,	"include\routines_LEVELS.c", 1725; // UPDATE PLAYER TILES //
 8219                        	
 8220                        		.dbg	line,	"include\routines_LEVELS.c", 1726; if(player_counter_anim == 0)
 8221                        		__not.um	_player_counter_anim
         01:CBFD  AD 19 23   			lda	_player_counter_anim
         01:CC00  18         			clc
         01:CC01  D0 01      			bne	!+
         01:CC03  38         			sec
         01:CC04             	!:
 8222                        		__bfalse	.LL315
         01:CC04  90 11      			bcc	.LL315
 8223                        	
 8224                        		.dbg	line,	"include\routines_LEVELS.c", 1727; {
 8225                        	
 8226                        		.dbg	line,	"include\routines_LEVELS.c", 1728; spr_set(player_id);
 8227                        		__ld.umq	_player_id
         01:CC06  AD 15 23   			lda	_player_id
 8228                        		__call		_spr_set.1
         01:CC09  20 DD E7   			call	_spr_set.1
 8229                        	
 8230                        		.dbg	line,	"include\routines_LEVELS.c", 1729; spr_pattern(PLAYER_JUMP_VRAM_ADR);
 8231                        		__ld.wi		7424
         01:CC0C  62         			cla
         01:CC0D  A0 1D      			ldy.h	#7424
 8232                        		__call		_spr_pattern.1
         01:CC0F  20 26 E8   			call	_spr_pattern.1
 8233                        	
 8234                        		.dbg	line,	"include\routines_LEVELS.c", 1731; player_counter_anim = 1;
 8235                        		__st.umiq	1, _player_counter_anim
         01:CC12  A9 01      			lda.l	#1
         01:CC14  8D 19 23   			sta	_player_counter_anim
 8236                        	
 8237                        		.dbg	line,	"include\routines_LEVELS.c", 1732; }
 8238                        	
 8239                        		.dbg	line,	"include\routines_LEVELS.c", 1735; // SELECT PLAYER SPRITE //
 8240                        	
 8241                        		.dbg	line,	"include\routines_LEVELS.c", 1736; spr_set(player_id);
 8242    01:CC17             	.LL315:
 8243                        		__ld.umq	_player_id
         01:CC17  AD 15 23   			lda	_player_id
 8244                        		__call		_spr_set.1
         01:CC1A  20 DD E7   			call	_spr_set.1
 8245                        	
 8246                        		.dbg	line,	"include\routines_LEVELS.c", 1739; //**************************************************************************************//
 8247                        	
 8248                        		.dbg	line,	"include\routines_LEVELS.c", 1740; //                                        H MOVE                                        //
 8249                        	
 8250                        		.dbg	line,	"include\routines_LEVELS.c", 1741; //**************************************************************************************//
 8251                        	
 8252                        		.dbg	line,	"include\routines_LEVELS.c", 1743; //--------------------------------------------------------------------------------------//
 8253                        	
 8254                        		.dbg	line,	"include\routines_LEVELS.c", 1744; //                                    WALL COLLISION                                    //
 8255                        	
 8256                        		.dbg	line,	"include\routines_LEVELS.c", 1745; //--------------------------------------------------------------------------------------//
 8257                        	
 8258                        		.dbg	line,	"include\routines_LEVELS.c", 1747; // CHECK COLLISION WITH BOTTOM RIGHT WALL //
 8259                        	
 8260                        		.dbg	line,	"include\routines_LEVELS.c", 1748; check_BG( 24 , 31 );
 8261                        		__ld.wi		24
         01:CC1D  A9 18      			lda.l	#24
         01:CC1F  C2         			cly
 8262                        		__pusharg.wr
         01:CC20  A6 8D      			ldx	<__sp
         01:CC22  CA         			dex
         01:CC23  CA         			dex
         01:CC24  95 08      			sta.l	<__stack, x
         01:CC26  94 09      			sty.h	<__stack, x
         01:CC28  86 8D      			stx	<__sp
 8263                        		__ld.wi		31
         01:CC2A  A9 1F      			lda.l	#31
         01:CC2C  C2         			cly
 8264                        		__pusharg.wr
         01:CC2D  A6 8D      			ldx	<__sp
         01:CC2F  CA         			dex
         01:CC30  CA         			dex
         01:CC31  95 08      			sta.l	<__stack, x
         01:CC33  94 09      			sty.h	<__stack, x
         01:CC35  86 8D      			stx	<__sp
 8265                        		__call		_check_BG
         01:CC37  20 6D FF   			call	_check_BG
 8266                        	
 8267                        		.dbg	line,	"include\routines_LEVELS.c", 1750; if(map_blk_flag != TILE_BG)
 8268                        		__ld.umq	_map_blk_flag
         01:CC3A  AD B0 2B   			lda	_map_blk_flag
 8269                        		__neq_b.uiq	1
         01:CC3D  38         			sec
         01:CC3E  49 01      			eor	#1
         01:CC40  D0 01      			bne	!+
         01:CC42  18         			clc
         01:CC43             	!:
 8270                        		__bfalse	.LL316
         01:CC43  90 78      			bcc	.LL316
 8271                        	
 8272                        		.dbg	line,	"include\routines_LEVELS.c", 1751; {
 8273                        	
 8274                        		.dbg	line,	"include\routines_LEVELS.c", 1752; // CHECK COLLISION WITH TOP RIGHT WALL //
 8275                        	
 8276                        		.dbg	line,	"include\routines_LEVELS.c", 1753; check_BG( 24 , 15 );
 8277                        		__ld.wi		24
         01:CC45  A9 18      			lda.l	#24
         01:CC47  C2         			cly
 8278                        		__pusharg.wr
         01:CC48  A6 8D      			ldx	<__sp
         01:CC4A  CA         			dex
         01:CC4B  CA         			dex
         01:CC4C  95 08      			sta.l	<__stack, x
         01:CC4E  94 09      			sty.h	<__stack, x
         01:CC50  86 8D      			stx	<__sp
 8279                        		__ld.wi		15
         01:CC52  A9 0F      			lda.l	#15
         01:CC54  C2         			cly
 8280                        		__pusharg.wr
         01:CC55  A6 8D      			ldx	<__sp
         01:CC57  CA         			dex
         01:CC58  CA         			dex
         01:CC59  95 08      			sta.l	<__stack, x
         01:CC5B  94 09      			sty.h	<__stack, x
         01:CC5D  86 8D      			stx	<__sp
 8281                        		__call		_check_BG
         01:CC5F  20 6D FF   			call	_check_BG
 8282                        	
 8283                        		.dbg	line,	"include\routines_LEVELS.c", 1755; if(map_blk_flag == TILE_BG)
 8284                        		__ld.umq	_map_blk_flag
         01:CC62  AD B0 2B   			lda	_map_blk_flag
 8285                        		__equ_b.uiq	1
         01:CC65  C9 01      			cmp	#1
         01:CC67  F0 01      			beq	!+
         01:CC69  18         			clc
         01:CC6A             	!:
 8286                        		__bfalse	.LL317
         01:CC6A  90 41      			bcc	.LL317
 8287                        	
 8288                        		.dbg	line,	"include\routines_LEVELS.c", 1756; {
 8289                        	
 8290                        		.dbg	line,	"include\routines_LEVELS.c", 1757; check_TILE_DEPTH( 15 , -16 );
 8291                        		__ld.wi		15
         01:CC6C  A9 0F      			lda.l	#15
         01:CC6E  C2         			cly
 8292                        		__pusharg.wr
         01:CC6F  A6 8D      			ldx	<__sp
         01:CC71  CA         			dex
         01:CC72  CA         			dex
         01:CC73  95 08      			sta.l	<__stack, x
         01:CC75  94 09      			sty.h	<__stack, x
         01:CC77  86 8D      			stx	<__sp
 8293                        		__ld.wi		-16
         01:CC79  A9 F0      			lda.l	#-16
         01:CC7B  A0 FF      			ldy.h	#-16
 8294                        		__pusharg.wr
         01:CC7D  A6 8D      			ldx	<__sp
         01:CC7F  CA         			dex
         01:CC80  CA         			dex
         01:CC81  95 08      			sta.l	<__stack, x
         01:CC83  94 09      			sty.h	<__stack, x
         01:CC85  86 8D      			stx	<__sp
 8295                        		__call		_check_TILE_DEPTH
         01:CC87  20 59 FF   			call	_check_TILE_DEPTH
 8296                        	
 8297                        		.dbg	line,	"include\routines_LEVELS.c", 1759; if(map_blk_flag == TILE_EMPTY && jump_ladder == TRUE)
 8298                        		__not.um	_map_blk_flag
         01:CC8A  AD B0 2B   			lda	_map_blk_flag
         01:CC8D  18         			clc
         01:CC8E  D0 01      			bne	!+
         01:CC90  38         			sec
         01:CC91             	!:
 8299                        		__bfalse	.LL319
         01:CC91  90 08      			bcc	.LL319
 8300                        		__ld.umq	_jump_ladder
         01:CC93  AD 1F 23   			lda	_jump_ladder
 8301                        		__equ_b.uiq	1
         01:CC96  C9 01      			cmp	#1
         01:CC98  F0 01      			beq	!+
         01:CC9A  18         			clc
         01:CC9B             	!:
 8302    01:CC9B             	.LL319:
 8303                        		__bfalse	.LL318
         01:CC9B  90 5F      			bcc	.LL318
 8304                        	
 8305                        		.dbg	line,	"include\routines_LEVELS.c", 1760; {
 8306                        	
 8307                        		.dbg	line,	"include\routines_LEVELS.c", 1761; jump_ladder = FALSE;
 8308                        		__st.umiq	0, _jump_ladder
         01:CC9D  9C 1F 23   			stz	_jump_ladder
 8309                        	
 8310                        		.dbg	line,	"include\routines_LEVELS.c", 1762; player_index_fall = 0;
 8311                        		__st.umiq	0, _player_index_fall
         01:CCA0  9C 1B 23   			stz	_player_index_fall
 8312                        	
 8313                        		.dbg	line,	"include\routines_LEVELS.c", 1763; player_state = STATE_FALL;
 8314                        		__st.umiq	9, _player_state
         01:CCA3  A9 09      			lda.l	#9
         01:CCA5  8D 16 23   			sta	_player_state
 8315                        	
 8316                        		.dbg	line,	"include\routines_LEVELS.c", 1764; return;
 8317                        		__bra		.LL216
         01:CCA8  4C 71 DD   			bra	.LL216
 8318                        	
 8319                        		.dbg	line,	"include\routines_LEVELS.c", 1765; }
 8320                        	
 8321                        		.dbg	line,	"include\routines_LEVELS.c", 1766; }
 8322    01:CCAB             	.LL318	.alias		.LL320
 8323                        	
 8324                        		.dbg	line,	"include\routines_LEVELS.c", 1768; else
 8325                        		__bra		.LL320
         01:CCAB  80 4F      			bra	.LL320
 8326    01:CCAD             	.LL317:
 8327                        	
 8328                        		.dbg	line,	"include\routines_LEVELS.c", 1769; {
 8329                        	
 8330                        		.dbg	line,	"include\routines_LEVELS.c", 1770; sgx_map_pxl_x += 2;
 8331                        		__add_st.wmiq	2, _sgx_map_pxl_x
         01:CCAD  18         			clc
         01:CCAE  AD 8F 26   			lda.l	_sgx_map_pxl_x
         01:CCB1  69 02      			adc.l	#2
         01:CCB3  8D 8F 26   			sta.l	_sgx_map_pxl_x
         01:CCB6  90 03      			bcc	!+
         01:CCB8  EE 90 26   			inc.h	_sgx_map_pxl_x
         01:CCBB             	!:
 8332                        	
 8333                        		.dbg	line,	"include\routines_LEVELS.c", 1771; }
 8334    01:CCBB             	.LL320	.alias		.LL321
 8335                        	
 8336                        		.dbg	line,	"include\routines_LEVELS.c", 1772; }
 8337                        	
 8338                        		.dbg	line,	"include\routines_LEVELS.c", 1774; else
 8339                        		__bra		.LL321
         01:CCBB  80 3F      			bra	.LL321
 8340    01:CCBD             	.LL316:
 8341                        	
 8342                        		.dbg	line,	"include\routines_LEVELS.c", 1775; {
 8343                        	
 8344                        		.dbg	line,	"include\routines_LEVELS.c", 1776; check_TILE_DEPTH( 15 , -16 );
 8345                        		__ld.wi		15
         01:CCBD  A9 0F      			lda.l	#15
         01:CCBF  C2         			cly
 8346                        		__pusharg.wr
         01:CCC0  A6 8D      			ldx	<__sp
         01:CCC2  CA         			dex
         01:CCC3  CA         			dex
         01:CCC4  95 08      			sta.l	<__stack, x
         01:CCC6  94 09      			sty.h	<__stack, x
         01:CCC8  86 8D      			stx	<__sp
 8347                        		__ld.wi		-16
         01:CCCA  A9 F0      			lda.l	#-16
         01:CCCC  A0 FF      			ldy.h	#-16
 8348                        		__pusharg.wr
         01:CCCE  A6 8D      			ldx	<__sp
         01:CCD0  CA         			dex
         01:CCD1  CA         			dex
         01:CCD2  95 08      			sta.l	<__stack, x
         01:CCD4  94 09      			sty.h	<__stack, x
         01:CCD6  86 8D      			stx	<__sp
 8349                        		__call		_check_TILE_DEPTH
         01:CCD8  20 59 FF   			call	_check_TILE_DEPTH
 8350                        	
 8351                        		.dbg	line,	"include\routines_LEVELS.c", 1778; if(map_blk_flag == TILE_EMPTY && jump_ladder == TRUE)
 8352                        		__not.um	_map_blk_flag
         01:CCDB  AD B0 2B   			lda	_map_blk_flag
         01:CCDE  18         			clc
         01:CCDF  D0 01      			bne	!+
         01:CCE1  38         			sec
         01:CCE2             	!:
 8353                        		__bfalse	.LL323
         01:CCE2  90 08      			bcc	.LL323
 8354                        		__ld.umq	_jump_ladder
         01:CCE4  AD 1F 23   			lda	_jump_ladder
 8355                        		__equ_b.uiq	1
         01:CCE7  C9 01      			cmp	#1
         01:CCE9  F0 01      			beq	!+
         01:CCEB  18         			clc
         01:CCEC             	!:
 8356    01:CCEC             	.LL323:
 8357                        		__bfalse	.LL322
         01:CCEC  90 0E      			bcc	.LL322
 8358                        	
 8359                        		.dbg	line,	"include\routines_LEVELS.c", 1779; {
 8360                        	
 8361                        		.dbg	line,	"include\routines_LEVELS.c", 1780; jump_ladder = FALSE;
 8362                        		__st.umiq	0, _jump_ladder
         01:CCEE  9C 1F 23   			stz	_jump_ladder
 8363                        	
 8364                        		.dbg	line,	"include\routines_LEVELS.c", 1781; player_index_fall = 0;
 8365                        		__st.umiq	0, _player_index_fall
         01:CCF1  9C 1B 23   			stz	_player_index_fall
 8366                        	
 8367                        		.dbg	line,	"include\routines_LEVELS.c", 1782; player_state = STATE_FALL;
 8368                        		__st.umiq	9, _player_state
         01:CCF4  A9 09      			lda.l	#9
         01:CCF6  8D 16 23   			sta	_player_state
 8369                        	
 8370                        		.dbg	line,	"include\routines_LEVELS.c", 1783; return;
 8371                        		__bra		.LL216
         01:CCF9  4C 71 DD   			bra	.LL216
 8372                        	
 8373                        		.dbg	line,	"include\routines_LEVELS.c", 1784; }
 8374                        	
 8375                        		.dbg	line,	"include\routines_LEVELS.c", 1785; }
 8376    01:CCFC             	.LL322:
 8377    01:CCFC             	.LL321:
 8378                        	
 8379                        		.dbg	line,	"include\routines_LEVELS.c", 1790; //**************************************************************************************//
 8380                        	
 8381                        		.dbg	line,	"include\routines_LEVELS.c", 1791; //                                        V MOVE                                        //
 8382                        	
 8383                        		.dbg	line,	"include\routines_LEVELS.c", 1792; //**************************************************************************************//
 8384                        	
 8385                        		.dbg	line,	"include\routines_LEVELS.c", 1794; // UPDATE PLAYER Y POSITION //
 8386                        	
 8387                        		.dbg	line,	"include\routines_LEVELS.c", 1795; if(jump_ladder == FALSE)
 8388                        		__not.um	_jump_ladder
         01:CCFC  AD 1F 23   			lda	_jump_ladder
         01:CCFF  18         			clc
         01:CD00  D0 01      			bne	!+
         01:CD02  38         			sec
         01:CD03             	!:
 8389                        		__bfalse	.LL324
         01:CD03  90 1A      			bcc	.LL324
 8390                        	
 8391                        		.dbg	line,	"include\routines_LEVELS.c", 1796; {
 8392                        	
 8393                        		.dbg	line,	"include\routines_LEVELS.c", 1797; player_pos_y += TABLE_PLAYER_JUMP_V[player_index_jump];
 8394                        		__ldx.umq	_player_index_jump
         01:CD05  AE 1A 23   			ldx	_player_index_jump
 8395                        		__ld.bax	_TABLE_PLAYER_JUMP_V
         01:CD08  BD F9 60   			lda	_TABLE_PLAYER_JUMP_V, x
         01:CD0B  C2         			cly
         01:CD0C  10 01      			bpl	!+
         01:CD0E  88         			dey
         01:CD0F             	!:
 8396                        		__add_st.wmq	_player_pos_y
         01:CD0F  18         			clc
         01:CD10  6D D5 24   			adc.l	_player_pos_y
         01:CD13  8D D5 24   			sta.l	_player_pos_y
         01:CD16  98         			tya
         01:CD17  6D D6 24   			adc.h	_player_pos_y
         01:CD1A  8D D6 24   			sta.h	_player_pos_y
 8397                        	
 8398                        		.dbg	line,	"include\routines_LEVELS.c", 1798; }
 8399                        	
 8400                        		.dbg	line,	"include\routines_LEVELS.c", 1800; else
 8401                        		__bra		.LL325
         01:CD1D  80 18      			bra	.LL325
 8402    01:CD1F             	.LL324:
 8403                        	
 8404                        		.dbg	line,	"include\routines_LEVELS.c", 1801; {
 8405                        	
 8406                        		.dbg	line,	"include\routines_LEVELS.c", 1802; player_pos_y += TABLE_PLAYER_JUMP_LADDER[player_index_jump];
 8407                        		__ldx.umq	_player_index_jump
         01:CD1F  AE 1A 23   			ldx	_player_index_jump
 8408                        		__ld.bax	_TABLE_PLAYER_JUMP_LADDER
         01:CD22  BD 31 61   			lda	_TABLE_PLAYER_JUMP_LADDER, x
         01:CD25  C2         			cly
         01:CD26  10 01      			bpl	!+
         01:CD28  88         			dey
         01:CD29             	!:
 8409                        		__add_st.wmq	_player_pos_y
         01:CD29  18         			clc
         01:CD2A  6D D5 24   			adc.l	_player_pos_y
         01:CD2D  8D D5 24   			sta.l	_player_pos_y
         01:CD30  98         			tya
         01:CD31  6D D6 24   			adc.h	_player_pos_y
         01:CD34  8D D6 24   			sta.h	_player_pos_y
 8410                        	
 8411                        		.dbg	line,	"include\routines_LEVELS.c", 1803; }
 8412    01:CD37             	.LL325:
 8413                        	
 8414                        		.dbg	line,	"include\routines_LEVELS.c", 1807; // IF PLAYER GOES BELOW ITS BASE Y POSITION //
 8415                        	
 8416                        		.dbg	line,	"include\routines_LEVELS.c", 1808; if(player_pos_y >= PLAYER_BASE_Y_POS)
 8417                        		__ld.wm		_player_pos_y
         01:CD37  AD D5 24   			lda.l	_player_pos_y
         01:CD3A  AC D6 24   			ldy.h	_player_pos_y
 8418                        		__sge_w.wi	128
         01:CD3D  C9 80      			cmp.l	#128		; Subtract integer from Y:A.
         01:CD3F  98         			tya
         01:CD40  E9 00      			sbc.h	#128
         01:CD42  50 02      			bvc	!+
         01:CD44  49 80      			eor	#$80		; +ve if Y:A >= integer (signed).
         01:CD46  49 80      	!:		eor	#$80
         01:CD48  0A         			asl	a
 8419                        		__bfalse	.LL326
         01:CD49  90 4E      			bcc	.LL326
 8420                        	
 8421                        		.dbg	line,	"include\routines_LEVELS.c", 1809; {
 8422                        	
 8423                        		.dbg	line,	"include\routines_LEVELS.c", 1810; // THE CAMERA MOVES //
 8424                        	
 8425                        		.dbg	line,	"include\routines_LEVELS.c", 1811; // CALCULATE HOW MANY PIXELS THE CAMERA HAS TO MOVE DOWN //
 8426                        	
 8427                        		.dbg	line,	"include\routines_LEVELS.c", 1812; camera_y_move = player_pos_y - PLAYER_BASE_Y_POS;
 8428                        		__ld.wm		_player_pos_y
         01:CD4B  AD D5 24   			lda.l	_player_pos_y
         01:CD4E  AC D6 24   			ldy.h	_player_pos_y
 8429                        		__sub.wi	128
         01:CD51  38         			sec
         01:CD52  E9 80      			sbc.l	#128
         01:CD54  B0 01      			bcs	!+
         01:CD56  88         			dey
         01:CD57             	!:
 8430                        		__st.umq	__update_PLAYER_end - 3  /* camera_y_move */
         01:CD57  8D 0A 23   			sta	__update_PLAYER_end - 3
 8431                        	
 8432                        		.dbg	line,	"include\routines_LEVELS.c", 1813; sgx_map_pxl_y += camera_y_move;
 8433                        		__ld.um		__update_PLAYER_end - 3  /* camera_y_move */
         01:CD5A  AD 0A 23   			lda	__update_PLAYER_end - 3
         01:CD5D  C2         			cly
 8434                        		__add_st.wmq	_sgx_map_pxl_y
         01:CD5E  18         			clc
         01:CD5F  6D 91 26   			adc.l	_sgx_map_pxl_y
         01:CD62  8D 91 26   			sta.l	_sgx_map_pxl_y
         01:CD65  98         			tya
         01:CD66  6D 92 26   			adc.h	_sgx_map_pxl_y
         01:CD69  8D 92 26   			sta.h	_sgx_map_pxl_y
 8435                        	
 8436                        		.dbg	line,	"include\routines_LEVELS.c", 1815; // IF THE CAMERA HAS REACHED ITS MAX (LOWEST) POSITION //
 8437                        	
 8438                        		.dbg	line,	"include\routines_LEVELS.c", 1816; if(sgx_map_pxl_y > camera_max_y_position)
 8439                        		__ld.wm		_sgx_map_pxl_y
         01:CD6C  AD 91 26   			lda.l	_sgx_map_pxl_y
         01:CD6F  AC 92 26   			ldy.h	_sgx_map_pxl_y
 8440                        		__ugt_w.wm	_camera_max_y_position
         01:CD72  18         			clc			; Subtract memory+1 from Y:A.
         01:CD73  ED D7 24   			sbc.l	_camera_max_y_position
         01:CD76  98         			tya
         01:CD77  ED D8 24   			sbc.h	_camera_max_y_position		; CS if Y:A > memory.
 8441                        		__bfalse	.LL327
         01:CD7A  90 0C      			bcc	.LL327
 8442                        	
 8443                        		.dbg	line,	"include\routines_LEVELS.c", 1817; {
 8444                        	
 8445                        		.dbg	line,	"include\routines_LEVELS.c", 1818; // THE CAMERA CAN NOT MOVE LOWER //
 8446                        	
 8447                        		.dbg	line,	"include\routines_LEVELS.c", 1819; sgx_map_pxl_y = camera_max_y_position;
 8448                        		__ld.wm		_camera_max_y_position
         01:CD7C  AD D7 24   			lda.l	_camera_max_y_position
         01:CD7F  AC D8 24   			ldy.h	_camera_max_y_position
 8449                        		__st.wmq	_sgx_map_pxl_y
         01:CD82  8D 91 26   			sta.l	_sgx_map_pxl_y
         01:CD85  8C 92 26   			sty.h	_sgx_map_pxl_y
 8450                        	
 8451                        		.dbg	line,	"include\routines_LEVELS.c", 1820; }
 8452                        	
 8453                        		.dbg	line,	"include\routines_LEVELS.c", 1822; // THE PLAYER STAYS AT ITS BASE Y POSITION //
 8454                        	
 8455                        		.dbg	line,	"include\routines_LEVELS.c", 1823; player_pos_y = PLAYER_BASE_Y_POS;
 8456    01:CD88             	.LL327:
 8457                        		__st.wmiq	128, _player_pos_y
         01:CD88  A9 80      			lda.l	#128
         01:CD8A  8D D5 24   			sta.l	_player_pos_y
         01:CD8D  9C D6 24   			stz.h	_player_pos_y
 8458                        	
 8459                        		.dbg	line,	"include\routines_LEVELS.c", 1825; spr_y(player_pos_y);
 8460                        		__ld.wm		_player_pos_y
         01:CD90  AD D5 24   			lda.l	_player_pos_y
         01:CD93  AC D6 24   			ldy.h	_player_pos_y
 8461                        		__call		_spr_y.1
         01:CD96  20 19 E8   			call	_spr_y.1
 8462                        	
 8463                        		.dbg	line,	"include\routines_LEVELS.c", 1826; }
 8464                        	
 8465                        		.dbg	line,	"include\routines_LEVELS.c", 1829; // UPDATE JUMP INDEX IN THE ARRAY //
 8466                        	
 8467                        		.dbg	line,	"include\routines_LEVELS.c", 1830; if(player_index_jump < jump_max_index)
 8468    01:CD99             	.LL326:
 8469                        		__ld.umq	_player_index_jump
         01:CD99  AD 1A 23   			lda	_player_index_jump
 8470                        		__ult_b.umq	_jump_max_index
         01:CD9C  CD 20 23   			cmp	_jump_max_index		; Subtract memory from A.
         01:CD9F  6A         			ror	a		; CC if A < memory.
         01:CDA0  49 80      			eor	#$80
         01:CDA2  2A         			rol	a
 8471                        		__bfalse	.LL328
         01:CDA3  90 03      			bcc	.LL328
 8472                        	
 8473                        		.dbg	line,	"include\routines_LEVELS.c", 1831; {
 8474                        	
 8475                        		.dbg	line,	"include\routines_LEVELS.c", 1832; player_index_jump += 1;
 8476                        		__add_st.umiq	1, _player_index_jump
         01:CDA5  EE 1A 23   			inc	_player_index_jump
 8477                        	
 8478                        		.dbg	line,	"include\routines_LEVELS.c", 1833; }
 8479                        	
 8480                        		.dbg	line,	"include\routines_LEVELS.c", 1838; //--------------------------------------------------------------------------------------//
 8481                        	
 8482                        		.dbg	line,	"include\routines_LEVELS.c", 1839; //                                   FLOOR COLLISION                                    //
 8483                        	
 8484                        		.dbg	line,	"include\routines_LEVELS.c", 1840; //--------------------------------------------------------------------------------------//
 8485                        	
 8486                        		.dbg	line,	"include\routines_LEVELS.c", 1842; if(player_index_jump > 14)
 8487    01:CDA8             	.LL328:
 8488                        		__ld.umq	_player_index_jump
         01:CDA8  AD 1A 23   			lda	_player_index_jump
 8489                        		__ugt_b.uiq	14
         01:CDAB  18         			clc			; Subtract integer+1 from A.
         01:CDAC  E9 0E      			sbc	#14		; CS if A > integer.
 8490                        		__bfalse	.LL329
         01:CDAE  B0 03 4C 63			bcc	.LL329
         01:CDB2  CF          
 8491                        	
 8492                        		.dbg	line,	"include\routines_LEVELS.c", 1843; {
 8493                        	
 8494                        		.dbg	line,	"include\routines_LEVELS.c", 1844; // CHECK COLLISION WITH LEFT FLOOR //
 8495                        	
 8496                        		.dbg	line,	"include\routines_LEVELS.c", 1845; check_BG( 10 , 32 );
 8497                        		__ld.wi		10
         01:CDB3  A9 0A      			lda.l	#10
         01:CDB5  C2         			cly
 8498                        		__pusharg.wr
         01:CDB6  A6 8D      			ldx	<__sp
         01:CDB8  CA         			dex
         01:CDB9  CA         			dex
         01:CDBA  95 08      			sta.l	<__stack, x
         01:CDBC  94 09      			sty.h	<__stack, x
         01:CDBE  86 8D      			stx	<__sp
 8499                        		__ld.wi		32
         01:CDC0  A9 20      			lda.l	#32
         01:CDC2  C2         			cly
 8500                        		__pusharg.wr
         01:CDC3  A6 8D      			ldx	<__sp
         01:CDC5  CA         			dex
         01:CDC6  CA         			dex
         01:CDC7  95 08      			sta.l	<__stack, x
         01:CDC9  94 09      			sty.h	<__stack, x
         01:CDCB  86 8D      			stx	<__sp
 8501                        		__call		_check_BG
         01:CDCD  20 6D FF   			call	_check_BG
 8502                        	
 8503                        		.dbg	line,	"include\routines_LEVELS.c", 1847; // IF PLAYER TOUCHES THE GROUND TO THE LEFT //
 8504                        	
 8505                        		.dbg	line,	"include\routines_LEVELS.c", 1848; if(map_blk_flag == TILE_BG)
 8506                        		__ld.umq	_map_blk_flag
         01:CDD0  AD B0 2B   			lda	_map_blk_flag
 8507                        		__equ_b.uiq	1
         01:CDD3  C9 01      			cmp	#1
         01:CDD5  F0 01      			beq	!+
         01:CDD7  18         			clc
         01:CDD8             	!:
 8508                        		__bfalse	.LL330
         01:CDD8  B0 03 4C 8B			bcc	.LL330
         01:CDDC  CE          
 8509                        	
 8510                        		.dbg	line,	"include\routines_LEVELS.c", 1849; {
 8511                        	
 8512                        		.dbg	line,	"include\routines_LEVELS.c", 1850; // CALCULATE HOW MANY PIXELS THE PLAYER MOVED INTO THE GROUND //
 8513                        	
 8514                        		.dbg	line,	"include\routines_LEVELS.c", 1851; for(i=1; i<11 ; i++)
 8515                        		__st.umiq	1, __update_PLAYER_end - 2  /* i */
         01:CDDD  A9 01      			lda.l	#1
         01:CDDF  8D 0B 23   			sta	__update_PLAYER_end - 2
 8516    01:CDE2             	.LL331:
 8517                        		__ld.umq	__update_PLAYER_end - 2  /* i */
         01:CDE2  AD 0B 23   			lda	__update_PLAYER_end - 2
 8518                        		__ult_b.uiq	11
         01:CDE5  C9 0B      			cmp	#11		; Subtract integer from A.
         01:CDE7  6A         			ror	a		; CC if A < integer.
         01:CDE8  49 80      			eor	#$80
         01:CDEA  2A         			rol	a
 8519                        		__btrue		.LL333
         01:CDEB  B0 07      			bcs	.LL333
 8520                        		__bra		.LL334
         01:CDED  80 7D      			bra	.LL334
 8521    01:CDEF             	.LL332:
 8522                        		__inc.umq	__update_PLAYER_end - 2  /* i */
         01:CDEF  EE 0B 23   			inc	__update_PLAYER_end - 2
 8523                        		__bra		.LL331
         01:CDF2  80 EE      			bra	.LL331
 8524    01:CDF4             	.LL333:
 8525                        	
 8526                        		.dbg	line,	"include\routines_LEVELS.c", 1852; {
 8527                        	
 8528                        		.dbg	line,	"include\routines_LEVELS.c", 1853; check_TILE_DEPTH( 10 , i);
 8529                        		__ld.wi		10
         01:CDF4  A9 0A      			lda.l	#10
         01:CDF6  C2         			cly
 8530                        		__pusharg.wr
         01:CDF7  A6 8D      			ldx	<__sp
         01:CDF9  CA         			dex
         01:CDFA  CA         			dex
         01:CDFB  95 08      			sta.l	<__stack, x
         01:CDFD  94 09      			sty.h	<__stack, x
         01:CDFF  86 8D      			stx	<__sp
 8531                        		__ld.um		__update_PLAYER_end - 2  /* i */
         01:CE01  AD 0B 23   			lda	__update_PLAYER_end - 2
         01:CE04  C2         			cly
 8532                        		__pusharg.wr
         01:CE05  A6 8D      			ldx	<__sp
         01:CE07  CA         			dex
         01:CE08  CA         			dex
         01:CE09  95 08      			sta.l	<__stack, x
         01:CE0B  94 09      			sty.h	<__stack, x
         01:CE0D  86 8D      			stx	<__sp
 8533                        		__call		_check_TILE_DEPTH
         01:CE0F  20 59 FF   			call	_check_TILE_DEPTH
 8534                        	
 8535                        		.dbg	line,	"include\routines_LEVELS.c", 1855; if(map_blk_flag == TILE_EMPTY)
 8536                        		__not.um	_map_blk_flag
         01:CE12  AD B0 2B   			lda	_map_blk_flag
         01:CE15  18         			clc
         01:CE16  D0 01      			bne	!+
         01:CE18  38         			sec
         01:CE19             	!:
 8537                        		__bfalse	.LL335
         01:CE19  90 D4      			bcc	.LL335
 8538                        	
 8539                        		.dbg	line,	"include\routines_LEVELS.c", 1856; {
 8540                        	
 8541                        		.dbg	line,	"include\routines_LEVELS.c", 1857; if(player_pos_y != PLAYER_BASE_Y_POS)
 8542                        		__ld.wm		_player_pos_y
         01:CE1B  AD D5 24   			lda.l	_player_pos_y
         01:CE1E  AC D6 24   			ldy.h	_player_pos_y
 8543                        		__neq_w.wi	128
         01:CE21  38         			sec
         01:CE22  49 80      			eor.l	#128
         01:CE24  D0 06      			bne	!+
         01:CE26  98         			tya
         01:CE27  49 00      			eor.h	#128
         01:CE29  D0 01      			bne	!+
         01:CE2B  18         			clc
         01:CE2C             	!:
 8544                        		__bfalse	.LL336
         01:CE2C  90 1E      			bcc	.LL336
 8545                        	
 8546                        		.dbg	line,	"include\routines_LEVELS.c", 1858; {
 8547                        	
 8548                        		.dbg	line,	"include\routines_LEVELS.c", 1859; player_pos_y -= (i - 1);
 8549                        		__ld.um		__update_PLAYER_end - 2  /* i */
         01:CE2E  AD 0B 23   			lda	__update_PLAYER_end - 2
         01:CE31  C2         			cly
 8550                        		__sub.wi	1
         01:CE32  38         			sec
         01:CE33  E9 01      			sbc.l	#1
         01:CE35  B0 01      			bcs	!+
         01:CE37  88         			dey
         01:CE38             	!:
 8551                        		__isub_st.wmq	_player_pos_y
         01:CE38  38         			sec
         01:CE39  49 FF      			eor	#$FF
         01:CE3B  6D D5 24   			adc.l	_player_pos_y
         01:CE3E  8D D5 24   			sta.l	_player_pos_y
         01:CE41  98         			tya
         01:CE42  49 FF      			eor	#$FF
         01:CE44  6D D6 24   			adc.h	_player_pos_y
         01:CE47  8D D6 24   			sta.h	_player_pos_y
 8552                        	
 8553                        		.dbg	line,	"include\routines_LEVELS.c", 1860; }
 8554                        	
 8555                        		.dbg	line,	"include\routines_LEVELS.c", 1862; else
 8556                        		__bra		.LL337
         01:CE4A  80 20      			bra	.LL337
 8557    01:CE4C             	.LL336:
 8558                        	
 8559                        		.dbg	line,	"include\routines_LEVELS.c", 1863; {
 8560                        	
 8561                        		.dbg	line,	"include\routines_LEVELS.c", 1864; sgx_map_pxl_y -= (i - 1);
 8562                        		__ld.um		__update_PLAYER_end - 2  /* i */
         01:CE4C  AD 0B 23   			lda	__update_PLAYER_end - 2
         01:CE4F  C2         			cly
 8563                        		__sub.wi	1
         01:CE50  38         			sec
         01:CE51  E9 01      			sbc.l	#1
         01:CE53  B0 01      			bcs	!+
         01:CE55  88         			dey
         01:CE56             	!:
 8564                        		__isub_st.wmq	_sgx_map_pxl_y
         01:CE56  38         			sec
         01:CE57  49 FF      			eor	#$FF
         01:CE59  6D 91 26   			adc.l	_sgx_map_pxl_y
         01:CE5C  8D 91 26   			sta.l	_sgx_map_pxl_y
         01:CE5F  98         			tya
         01:CE60  49 FF      			eor	#$FF
         01:CE62  6D 92 26   			adc.h	_sgx_map_pxl_y
         01:CE65  8D 92 26   			sta.h	_sgx_map_pxl_y
 8565                        	
 8566                        		.dbg	line,	"include\routines_LEVELS.c", 1865; }
 8567    01:CE68             	.LL337	.alias		.LL334
 8568                        	
 8569                        		.dbg	line,	"include\routines_LEVELS.c", 1867; break;
 8570                        		__bra		.LL334
         01:CE68  80 02      			bra	.LL334
 8571                        	
 8572                        		.dbg	line,	"include\routines_LEVELS.c", 1868; }
 8573                        	
 8574                        		.dbg	line,	"include\routines_LEVELS.c", 1869; }
 8575    01:CE6A             	.LL335	.alias		.LL332
 8576                        		__bra		.LL332
         01:CE6A  80 83      			bra	.LL332
 8577    01:CE6C             	.LL334:
 8578                        	
 8579                        		.dbg	line,	"include\routines_LEVELS.c", 1871; // SET PLAYER SPRITE NEW POSITION //
 8580                        	
 8581                        		.dbg	line,	"include\routines_LEVELS.c", 1872; spr_y(player_pos_y);
 8582                        		__ld.wm		_player_pos_y
         01:CE6C  AD D5 24   			lda.l	_player_pos_y
         01:CE6F  AC D6 24   			ldy.h	_player_pos_y
 8583                        		__call		_spr_y.1
         01:CE72  20 19 E8   			call	_spr_y.1
 8584                        	
 8585                        		.dbg	line,	"include\routines_LEVELS.c", 1874; player_counter_anim = 1;
 8586                        		__st.umiq	1, _player_counter_anim
         01:CE75  A9 01      			lda.l	#1
         01:CE77  8D 19 23   			sta	_player_counter_anim
 8587                        	
 8588                        		.dbg	line,	"include\routines_LEVELS.c", 1875; player_index_jump = 0;
 8589                        		__st.umiq	0, _player_index_jump
         01:CE7A  9C 1A 23   			stz	_player_index_jump
 8590                        	
 8591                        		.dbg	line,	"include\routines_LEVELS.c", 1876; jump_ladder = FALSE;
 8592                        		__st.umiq	0, _jump_ladder
         01:CE7D  9C 1F 23   			stz	_jump_ladder
 8593                        	
 8594                        		.dbg	line,	"include\routines_LEVELS.c", 1877; jump_max_index = 34;
 8595                        		__st.umiq	34, _jump_max_index
         01:CE80  A9 22      			lda.l	#34
         01:CE82  8D 20 23   			sta	_jump_max_index
 8596                        	
 8597                        		.dbg	line,	"include\routines_LEVELS.c", 1878; player_state = STATE_IDLE;
 8598                        		__st.umiq	0, _player_state
         01:CE85  9C 16 23   			stz	_player_state
 8599                        	
 8600                        		.dbg	line,	"include\routines_LEVELS.c", 1879; return;
 8601                        		__bra		.LL216
         01:CE88  4C 71 DD   			bra	.LL216
 8602                        	
 8603                        		.dbg	line,	"include\routines_LEVELS.c", 1880; }
 8604                        	
 8605                        		.dbg	line,	"include\routines_LEVELS.c", 1882; // IF PLAYER TOUCHES THE GROUND TO THE RIGHT //
 8606                        	
 8607                        		.dbg	line,	"include\routines_LEVELS.c", 1883; else
 8608    01:CE8B             	.LL330:
 8609                        	
 8610                        		.dbg	line,	"include\routines_LEVELS.c", 1884; {
 8611                        	
 8612                        		.dbg	line,	"include\routines_LEVELS.c", 1885; // CHECK COLLISION WITH RIGHT FLOOR //
 8613                        	
 8614                        		.dbg	line,	"include\routines_LEVELS.c", 1886; check_BG( 22 , 32 );
 8615                        		__ld.wi		22
         01:CE8B  A9 16      			lda.l	#22
         01:CE8D  C2         			cly
 8616                        		__pusharg.wr
         01:CE8E  A6 8D      			ldx	<__sp
         01:CE90  CA         			dex
         01:CE91  CA         			dex
         01:CE92  95 08      			sta.l	<__stack, x
         01:CE94  94 09      			sty.h	<__stack, x
         01:CE96  86 8D      			stx	<__sp
 8617                        		__ld.wi		32
         01:CE98  A9 20      			lda.l	#32
         01:CE9A  C2         			cly
 8618                        		__pusharg.wr
         01:CE9B  A6 8D      			ldx	<__sp
         01:CE9D  CA         			dex
         01:CE9E  CA         			dex
         01:CE9F  95 08      			sta.l	<__stack, x
         01:CEA1  94 09      			sty.h	<__stack, x
         01:CEA3  86 8D      			stx	<__sp
 8619                        		__call		_check_BG
         01:CEA5  20 6D FF   			call	_check_BG
 8620                        	
 8621                        		.dbg	line,	"include\routines_LEVELS.c", 1888; if(map_blk_flag == TILE_BG)
 8622                        		__ld.umq	_map_blk_flag
         01:CEA8  AD B0 2B   			lda	_map_blk_flag
 8623                        		__equ_b.uiq	1
         01:CEAB  C9 01      			cmp	#1
         01:CEAD  F0 01      			beq	!+
         01:CEAF  18         			clc
         01:CEB0             	!:
 8624                        		__bfalse	.LL339
         01:CEB0  B0 03 4C 63			bcc	.LL339
         01:CEB4  CF          
 8625                        	
 8626                        		.dbg	line,	"include\routines_LEVELS.c", 1889; {
 8627                        	
 8628                        		.dbg	line,	"include\routines_LEVELS.c", 1890; // CALCULATE HOW MANY PIXELS THE PLAYER MOVED INTO THE GROUND //
 8629                        	
 8630                        		.dbg	line,	"include\routines_LEVELS.c", 1891; for(i=1; i<11 ; i++)
 8631                        		__st.umiq	1, __update_PLAYER_end - 2  /* i */
         01:CEB5  A9 01      			lda.l	#1
         01:CEB7  8D 0B 23   			sta	__update_PLAYER_end - 2
 8632    01:CEBA             	.LL340:
 8633                        		__ld.umq	__update_PLAYER_end - 2  /* i */
         01:CEBA  AD 0B 23   			lda	__update_PLAYER_end - 2
 8634                        		__ult_b.uiq	11
         01:CEBD  C9 0B      			cmp	#11		; Subtract integer from A.
         01:CEBF  6A         			ror	a		; CC if A < integer.
         01:CEC0  49 80      			eor	#$80
         01:CEC2  2A         			rol	a
 8635                        		__btrue		.LL342
         01:CEC3  B0 07      			bcs	.LL342
 8636                        		__bra		.LL343
         01:CEC5  80 7D      			bra	.LL343
 8637    01:CEC7             	.LL341:
 8638                        		__inc.umq	__update_PLAYER_end - 2  /* i */
         01:CEC7  EE 0B 23   			inc	__update_PLAYER_end - 2
 8639                        		__bra		.LL340
         01:CECA  80 EE      			bra	.LL340
 8640    01:CECC             	.LL342:
 8641                        	
 8642                        		.dbg	line,	"include\routines_LEVELS.c", 1892; {
 8643                        	
 8644                        		.dbg	line,	"include\routines_LEVELS.c", 1893; check_TILE_DEPTH( 22 , i);
 8645                        		__ld.wi		22
         01:CECC  A9 16      			lda.l	#22
         01:CECE  C2         			cly
 8646                        		__pusharg.wr
         01:CECF  A6 8D      			ldx	<__sp
         01:CED1  CA         			dex
         01:CED2  CA         			dex
         01:CED3  95 08      			sta.l	<__stack, x
         01:CED5  94 09      			sty.h	<__stack, x
         01:CED7  86 8D      			stx	<__sp
 8647                        		__ld.um		__update_PLAYER_end - 2  /* i */
         01:CED9  AD 0B 23   			lda	__update_PLAYER_end - 2
         01:CEDC  C2         			cly
 8648                        		__pusharg.wr
         01:CEDD  A6 8D      			ldx	<__sp
         01:CEDF  CA         			dex
         01:CEE0  CA         			dex
         01:CEE1  95 08      			sta.l	<__stack, x
         01:CEE3  94 09      			sty.h	<__stack, x
         01:CEE5  86 8D      			stx	<__sp
 8649                        		__call		_check_TILE_DEPTH
         01:CEE7  20 59 FF   			call	_check_TILE_DEPTH
 8650                        	
 8651                        		.dbg	line,	"include\routines_LEVELS.c", 1895; if(map_blk_flag == TILE_EMPTY)
 8652                        		__not.um	_map_blk_flag
         01:CEEA  AD B0 2B   			lda	_map_blk_flag
         01:CEED  18         			clc
         01:CEEE  D0 01      			bne	!+
         01:CEF0  38         			sec
         01:CEF1             	!:
 8653                        		__bfalse	.LL344
         01:CEF1  90 D4      			bcc	.LL344
 8654                        	
 8655                        		.dbg	line,	"include\routines_LEVELS.c", 1896; {
 8656                        	
 8657                        		.dbg	line,	"include\routines_LEVELS.c", 1897; if(player_pos_y != PLAYER_BASE_Y_POS)
 8658                        		__ld.wm		_player_pos_y
         01:CEF3  AD D5 24   			lda.l	_player_pos_y
         01:CEF6  AC D6 24   			ldy.h	_player_pos_y
 8659                        		__neq_w.wi	128
         01:CEF9  38         			sec
         01:CEFA  49 80      			eor.l	#128
         01:CEFC  D0 06      			bne	!+
         01:CEFE  98         			tya
         01:CEFF  49 00      			eor.h	#128
         01:CF01  D0 01      			bne	!+
         01:CF03  18         			clc
         01:CF04             	!:
 8660                        		__bfalse	.LL345
         01:CF04  90 1E      			bcc	.LL345
 8661                        	
 8662                        		.dbg	line,	"include\routines_LEVELS.c", 1898; {
 8663                        	
 8664                        		.dbg	line,	"include\routines_LEVELS.c", 1899; player_pos_y -= (i - 1);
 8665                        		__ld.um		__update_PLAYER_end - 2  /* i */
         01:CF06  AD 0B 23   			lda	__update_PLAYER_end - 2
         01:CF09  C2         			cly
 8666                        		__sub.wi	1
         01:CF0A  38         			sec
         01:CF0B  E9 01      			sbc.l	#1
         01:CF0D  B0 01      			bcs	!+
         01:CF0F  88         			dey
         01:CF10             	!:
 8667                        		__isub_st.wmq	_player_pos_y
         01:CF10  38         			sec
         01:CF11  49 FF      			eor	#$FF
         01:CF13  6D D5 24   			adc.l	_player_pos_y
         01:CF16  8D D5 24   			sta.l	_player_pos_y
         01:CF19  98         			tya
         01:CF1A  49 FF      			eor	#$FF
         01:CF1C  6D D6 24   			adc.h	_player_pos_y
         01:CF1F  8D D6 24   			sta.h	_player_pos_y
 8668                        	
 8669                        		.dbg	line,	"include\routines_LEVELS.c", 1900; }
 8670                        	
 8671                        		.dbg	line,	"include\routines_LEVELS.c", 1902; else
 8672                        		__bra		.LL346
         01:CF22  80 20      			bra	.LL346
 8673    01:CF24             	.LL345:
 8674                        	
 8675                        		.dbg	line,	"include\routines_LEVELS.c", 1903; {
 8676                        	
 8677                        		.dbg	line,	"include\routines_LEVELS.c", 1904; sgx_map_pxl_y -= (i - 1);
 8678                        		__ld.um		__update_PLAYER_end - 2  /* i */
         01:CF24  AD 0B 23   			lda	__update_PLAYER_end - 2
         01:CF27  C2         			cly
 8679                        		__sub.wi	1
         01:CF28  38         			sec
         01:CF29  E9 01      			sbc.l	#1
         01:CF2B  B0 01      			bcs	!+
         01:CF2D  88         			dey
         01:CF2E             	!:
 8680                        		__isub_st.wmq	_sgx_map_pxl_y
         01:CF2E  38         			sec
         01:CF2F  49 FF      			eor	#$FF
         01:CF31  6D 91 26   			adc.l	_sgx_map_pxl_y
         01:CF34  8D 91 26   			sta.l	_sgx_map_pxl_y
         01:CF37  98         			tya
         01:CF38  49 FF      			eor	#$FF
         01:CF3A  6D 92 26   			adc.h	_sgx_map_pxl_y
         01:CF3D  8D 92 26   			sta.h	_sgx_map_pxl_y
 8681                        	
 8682                        		.dbg	line,	"include\routines_LEVELS.c", 1905; }
 8683    01:CF40             	.LL346	.alias		.LL343
 8684                        	
 8685                        		.dbg	line,	"include\routines_LEVELS.c", 1907; break;
 8686                        		__bra		.LL343
         01:CF40  80 02      			bra	.LL343
 8687                        	
 8688                        		.dbg	line,	"include\routines_LEVELS.c", 1908; }
 8689                        	
 8690                        		.dbg	line,	"include\routines_LEVELS.c", 1909; }
 8691    01:CF42             	.LL344	.alias		.LL341
 8692                        		__bra		.LL341
         01:CF42  80 83      			bra	.LL341
 8693    01:CF44             	.LL343:
 8694                        	
 8695                        		.dbg	line,	"include\routines_LEVELS.c", 1911; // SET PLAYER SPRITE NEW POSITION //
 8696                        	
 8697                        		.dbg	line,	"include\routines_LEVELS.c", 1912; spr_y(player_pos_y);
 8698                        		__ld.wm		_player_pos_y
         01:CF44  AD D5 24   			lda.l	_player_pos_y
         01:CF47  AC D6 24   			ldy.h	_player_pos_y
 8699                        		__call		_spr_y.1
         01:CF4A  20 19 E8   			call	_spr_y.1
 8700                        	
 8701                        		.dbg	line,	"include\routines_LEVELS.c", 1914; player_counter_anim = 1;
 8702                        		__st.umiq	1, _player_counter_anim
         01:CF4D  A9 01      			lda.l	#1
         01:CF4F  8D 19 23   			sta	_player_counter_anim
 8703                        	
 8704                        		.dbg	line,	"include\routines_LEVELS.c", 1915; player_index_jump = 0;
 8705                        		__st.umiq	0, _player_index_jump
         01:CF52  9C 1A 23   			stz	_player_index_jump
 8706                        	
 8707                        		.dbg	line,	"include\routines_LEVELS.c", 1916; jump_ladder = FALSE;
 8708                        		__st.umiq	0, _jump_ladder
         01:CF55  9C 1F 23   			stz	_jump_ladder
 8709                        	
 8710                        		.dbg	line,	"include\routines_LEVELS.c", 1917; jump_max_index = 34;
 8711                        		__st.umiq	34, _jump_max_index
         01:CF58  A9 22      			lda.l	#34
         01:CF5A  8D 20 23   			sta	_jump_max_index
 8712                        	
 8713                        		.dbg	line,	"include\routines_LEVELS.c", 1918; player_state = STATE_IDLE;
 8714                        		__st.umiq	0, _player_state
         01:CF5D  9C 16 23   			stz	_player_state
 8715                        	
 8716                        		.dbg	line,	"include\routines_LEVELS.c", 1919; return;
 8717                        		__bra		.LL216
         01:CF60  4C 71 DD   			bra	.LL216
 8718                        	
 8719                        		.dbg	line,	"include\routines_LEVELS.c", 1920; }
 8720                        	
 8721                        		.dbg	line,	"include\routines_LEVELS.c", 1921; }
 8722    01:CF63             	.LL339:
 8723    01:CF63             	.LL338:
 8724                        	
 8725                        		.dbg	line,	"include\routines_LEVELS.c", 1922; }
 8726                        	
 8727                        		.dbg	line,	"include\routines_LEVELS.c", 1927; //--------------------------------------------------------------------------------------//
 8728                        	
 8729                        		.dbg	line,	"include\routines_LEVELS.c", 1928; //                                   LADDER COLLISION                                   //
 8730                        	
 8731                        		.dbg	line,	"include\routines_LEVELS.c", 1929; //--------------------------------------------------------------------------------------//
 8732                        	
 8733                        		.dbg	line,	"include\routines_LEVELS.c", 1931; if(player_index_jump > 4)
 8734    01:CF63             	.LL329:
 8735                        		__ld.umq	_player_index_jump
         01:CF63  AD 1A 23   			lda	_player_index_jump
 8736                        		__ugt_b.uiq	4
         01:CF66  18         			clc			; Subtract integer+1 from A.
         01:CF67  E9 04      			sbc	#4		; CS if A > integer.
 8737                        		__bfalse	.LL347
         01:CF69  B0 03 4C FE			bcc	.LL347
         01:CF6D  CF          
 8738                        	
 8739                        		.dbg	line,	"include\routines_LEVELS.c", 1932; {
 8740                        	
 8741                        		.dbg	line,	"include\routines_LEVELS.c", 1933; check_BG( 16 , 16 );
 8742                        		__ld.wi		16
         01:CF6E  A9 10      			lda.l	#16
         01:CF70  C2         			cly
 8743                        		__pusharg.wr
         01:CF71  A6 8D      			ldx	<__sp
         01:CF73  CA         			dex
         01:CF74  CA         			dex
         01:CF75  95 08      			sta.l	<__stack, x
         01:CF77  94 09      			sty.h	<__stack, x
         01:CF79  86 8D      			stx	<__sp
 8744                        		__ld.wi		16
         01:CF7B  A9 10      			lda.l	#16
         01:CF7D  C2         			cly
 8745                        		__pusharg.wr
         01:CF7E  A6 8D      			ldx	<__sp
         01:CF80  CA         			dex
         01:CF81  CA         			dex
         01:CF82  95 08      			sta.l	<__stack, x
         01:CF84  94 09      			sty.h	<__stack, x
         01:CF86  86 8D      			stx	<__sp
 8746                        		__call		_check_BG
         01:CF88  20 6D FF   			call	_check_BG
 8747                        	
 8748                        		.dbg	line,	"include\routines_LEVELS.c", 1935; // IF PLAYER HITS THE LADDER //
 8749                        	
 8750                        		.dbg	line,	"include\routines_LEVELS.c", 1936; if(map_blk_flag == TILE_LADDER)
 8751                        		__ld.umq	_map_blk_flag
         01:CF8B  AD B0 2B   			lda	_map_blk_flag
 8752                        		__equ_b.uiq	2
         01:CF8E  C9 02      			cmp	#2
         01:CF90  F0 01      			beq	!+
         01:CF92  18         			clc
         01:CF93             	!:
 8753                        		__bfalse	.LL348
         01:CF93  90 69      			bcc	.LL348
 8754                        	
 8755                        		.dbg	line,	"include\routines_LEVELS.c", 1937; {
 8756                        	
 8757                        		.dbg	line,	"include\routines_LEVELS.c", 1938; // CAMERA GOES 8 PX BACKWARD //
 8758                        	
 8759                        		.dbg	line,	"include\routines_LEVELS.c", 1939; sgx_map_pxl_x = ( (sgx_map_pxl_x >> 3) << 3 );
 8760                        		__ld.wm		_sgx_map_pxl_x
         01:CF95  AD 8F 26   			lda.l	_sgx_map_pxl_x
         01:CF98  AC 90 26   			ldy.h	_sgx_map_pxl_x
 8761                        		__lsr.wi	3
         01:CF9B  84 00      			sty	__temp
         01:CF9D  20 3A E2   			jsr	lsrw3
 8762                        		__asl.wi	3
         01:CFA0  84 00      			sty	__temp
         01:CFA2  20 D7 E1   			jsr	aslw3
 8763                        		__st.wmq	_sgx_map_pxl_x
         01:CFA5  8D 8F 26   			sta.l	_sgx_map_pxl_x
         01:CFA8  8C 90 26   			sty.h	_sgx_map_pxl_x
 8764                        	
 8765                        		.dbg	line,	"include\routines_LEVELS.c", 1941; // SO WE UPDATE THE MAP //
 8766                        	
 8767                        		.dbg	line,	"include\routines_LEVELS.c", 1942; sgx_scroll_map();
 8768                        		__call		_sgx_scroll_map
         01:CFAB  20 81 FF   			call	_sgx_scroll_map
 8769                        	
 8770                        		.dbg	line,	"include\routines_LEVELS.c", 1944; // CHECK IF THE PLAYER STANDS RIGHT TO THE LADDER //
 8771                        	
 8772                        		.dbg	line,	"include\routines_LEVELS.c", 1945; check_BG( 31 , 16 );
 8773                        		__ld.wi		31
         01:CFAE  A9 1F      			lda.l	#31
         01:CFB0  C2         			cly
 8774                        		__pusharg.wr
         01:CFB1  A6 8D      			ldx	<__sp
         01:CFB3  CA         			dex
         01:CFB4  CA         			dex
         01:CFB5  95 08      			sta.l	<__stack, x
         01:CFB7  94 09      			sty.h	<__stack, x
         01:CFB9  86 8D      			stx	<__sp
 8775                        		__ld.wi		16
         01:CFBB  A9 10      			lda.l	#16
         01:CFBD  C2         			cly
 8776                        		__pusharg.wr
         01:CFBE  A6 8D      			ldx	<__sp
         01:CFC0  CA         			dex
         01:CFC1  CA         			dex
         01:CFC2  95 08      			sta.l	<__stack, x
         01:CFC4  94 09      			sty.h	<__stack, x
         01:CFC6  86 8D      			stx	<__sp
 8777                        		__call		_check_BG
         01:CFC8  20 6D FF   			call	_check_BG
 8778                        	
 8779                        		.dbg	line,	"include\routines_LEVELS.c", 1947; if(map_blk_flag == TILE_LADDER)
 8780                        		__ld.umq	_map_blk_flag
         01:CFCB  AD B0 2B   			lda	_map_blk_flag
 8781                        		__equ_b.uiq	2
         01:CFCE  C9 02      			cmp	#2
         01:CFD0  F0 01      			beq	!+
         01:CFD2  18         			clc
         01:CFD3             	!:
 8782                        		__bfalse	.LL349
         01:CFD3  90 0E      			bcc	.LL349
 8783                        	
 8784                        		.dbg	line,	"include\routines_LEVELS.c", 1948; {
 8785                        	
 8786                        		.dbg	line,	"include\routines_LEVELS.c", 1949; sgx_map_pxl_x += 8;
 8787                        		__add_st.wmiq	8, _sgx_map_pxl_x
         01:CFD5  18         			clc
         01:CFD6  AD 8F 26   			lda.l	_sgx_map_pxl_x
         01:CFD9  69 08      			adc.l	#8
         01:CFDB  8D 8F 26   			sta.l	_sgx_map_pxl_x
         01:CFDE  90 03      			bcc	!+
         01:CFE0  EE 90 26   			inc.h	_sgx_map_pxl_x
         01:CFE3             	!:
 8788                        	
 8789                        		.dbg	line,	"include\routines_LEVELS.c", 1950; }
 8790                        	
 8791                        		.dbg	line,	"include\routines_LEVELS.c", 1952; spr_pattern(PLAYER_HANG_VRAM_ADR);
 8792    01:CFE3             	.LL349:
 8793                        		__ld.wi		7936
         01:CFE3  62         			cla
         01:CFE4  A0 1F      			ldy.h	#7936
 8794                        		__call		_spr_pattern.1
         01:CFE6  20 26 E8   			call	_spr_pattern.1
 8795                        	
 8796                        		.dbg	line,	"include\routines_LEVELS.c", 1953; player_counter_anim = 0;
 8797                        		__st.umiq	0, _player_counter_anim
         01:CFE9  9C 19 23   			stz	_player_counter_anim
 8798                        	
 8799                        		.dbg	line,	"include\routines_LEVELS.c", 1954; player_index_jump = 0;
 8800                        		__st.umiq	0, _player_index_jump
         01:CFEC  9C 1A 23   			stz	_player_index_jump
 8801                        	
 8802                        		.dbg	line,	"include\routines_LEVELS.c", 1955; jump_ladder = TRUE;
 8803                        		__st.umiq	1, _jump_ladder
         01:CFEF  A9 01      			lda.l	#1
         01:CFF1  8D 1F 23   			sta	_jump_ladder
 8804                        	
 8805                        		.dbg	line,	"include\routines_LEVELS.c", 1956; jump_max_index = 29;
 8806                        		__st.umiq	29, _jump_max_index
         01:CFF4  A9 1D      			lda.l	#29
         01:CFF6  8D 20 23   			sta	_jump_max_index
 8807                        	
 8808                        		.dbg	line,	"include\routines_LEVELS.c", 1957; player_state = STATE_HANG;
 8809                        		__st.umiq	10, _player_state
         01:CFF9  A9 0A      			lda.l	#10
         01:CFFB  8D 16 23   			sta	_player_state
 8810                        	
 8811                        		.dbg	line,	"include\routines_LEVELS.c", 1958; }
 8812                        	
 8813                        		.dbg	line,	"include\routines_LEVELS.c", 1959; }
 8814    01:CFFE             	.LL348:
 8815                        	
 8816                        		.dbg	line,	"include\routines_LEVELS.c", 1962; // SET PLAYER SPRITE NEW POSITION //
 8817                        	
 8818                        		.dbg	line,	"include\routines_LEVELS.c", 1963; spr_y(player_pos_y);
 8819    01:CFFE             	.LL347:
 8820                        		__ld.wm		_player_pos_y
         01:CFFE  AD D5 24   			lda.l	_player_pos_y
         01:D001  AC D6 24   			ldy.h	_player_pos_y
 8821                        		__call		_spr_y.1
         01:D004  20 19 E8   			call	_spr_y.1
 8822                        	
 8823                        		.dbg	line,	"include\routines_LEVELS.c", 1964; spr_set(weapon_id);
 8824                        		__ld.umq	_weapon_id
         01:D007  AD 23 23   			lda	_weapon_id
 8825                        		__call		_spr_set.1
         01:D00A  20 DD E7   			call	_spr_set.1
 8826                        	
 8827                        		.dbg	line,	"include\routines_LEVELS.c", 1965; spr_y(player_pos_y+8);
 8828                        		__ld.wm		_player_pos_y
         01:D00D  AD D5 24   			lda.l	_player_pos_y
         01:D010  AC D6 24   			ldy.h	_player_pos_y
 8829                        		__add.wi	8
         01:D013  18         			clc
         01:D014  69 08      			adc.l	#8
         01:D016  90 01      			bcc	!+
         01:D018  C8         			iny
         01:D019             	!:
 8830                        		__call		_spr_y.1
         01:D019  20 19 E8   			call	_spr_y.1
 8831                        	
 8832                        		.dbg	line,	"include\routines_LEVELS.c", 1966; }
 8833                        	
 8834                        		.dbg	line,	"include\routines_LEVELS.c", 1969; else if(player_state == STATE_JUMP_LEFT)
 8835                        		__bra		.LL350
         01:D01C  4C 71 DD   			bra	.LL350
 8836    01:D01F             	.LL314:
 8837                        		__ld.umq	_player_state
         01:D01F  AD 16 23   			lda	_player_state
 8838                        		__equ_b.uiq	6
         01:D022  C9 06      			cmp	#6
         01:D024  F0 01      			beq	!+
         01:D026  18         			clc
         01:D027             	!:
 8839                        		__bfalse	.LL351
         01:D027  B0 03 4C 53			bcc	.LL351
         01:D02B  D4          
 8840                        	
 8841                        		.dbg	line,	"include\routines_LEVELS.c", 1970; {
 8842                        	
 8843                        		.dbg	line,	"include\routines_LEVELS.c", 1971; unsigned char i, camera_y_move;
 8844                        	
 8845                        		.dbg	line,	"include\routines_LEVELS.c", 1972; i = 1;
 8846                        		__st.umiq	1, __update_PLAYER_end - 4  /* i */
         01:D02C  A9 01      			lda.l	#1
         01:D02E  8D 09 23   			sta	__update_PLAYER_end - 4
 8847                        	
 8848                        		.dbg	line,	"include\routines_LEVELS.c", 1975; // UPDATE PLAYER TILES //
 8849                        	
 8850                        		.dbg	line,	"include\routines_LEVELS.c", 1976; if(player_counter_anim == 0)
 8851                        		__not.um	_player_counter_anim
         01:D031  AD 19 23   			lda	_player_counter_anim
         01:D034  18         			clc
         01:D035  D0 01      			bne	!+
         01:D037  38         			sec
         01:D038             	!:
 8852                        		__bfalse	.LL352
         01:D038  90 11      			bcc	.LL352
 8853                        	
 8854                        		.dbg	line,	"include\routines_LEVELS.c", 1977; {
 8855                        	
 8856                        		.dbg	line,	"include\routines_LEVELS.c", 1978; spr_set(player_id);
 8857                        		__ld.umq	_player_id
         01:D03A  AD 15 23   			lda	_player_id
 8858                        		__call		_spr_set.1
         01:D03D  20 DD E7   			call	_spr_set.1
 8859                        	
 8860                        		.dbg	line,	"include\routines_LEVELS.c", 1979; spr_pattern(PLAYER_JUMP_VRAM_ADR);
 8861                        		__ld.wi		7424
         01:D040  62         			cla
         01:D041  A0 1D      			ldy.h	#7424
 8862                        		__call		_spr_pattern.1
         01:D043  20 26 E8   			call	_spr_pattern.1
 8863                        	
 8864                        		.dbg	line,	"include\routines_LEVELS.c", 1981; player_counter_anim = 1;
 8865                        		__st.umiq	1, _player_counter_anim
         01:D046  A9 01      			lda.l	#1
         01:D048  8D 19 23   			sta	_player_counter_anim
 8866                        	
 8867                        		.dbg	line,	"include\routines_LEVELS.c", 1982; }
 8868                        	
 8869                        		.dbg	line,	"include\routines_LEVELS.c", 1985; // SELECT PLAYER SPRITE //
 8870                        	
 8871                        		.dbg	line,	"include\routines_LEVELS.c", 1986; spr_set(player_id);
 8872    01:D04B             	.LL352:
 8873                        		__ld.umq	_player_id
         01:D04B  AD 15 23   			lda	_player_id
 8874                        		__call		_spr_set.1
         01:D04E  20 DD E7   			call	_spr_set.1
 8875                        	
 8876                        		.dbg	line,	"include\routines_LEVELS.c", 1989; //**************************************************************************************//
 8877                        	
 8878                        		.dbg	line,	"include\routines_LEVELS.c", 1990; //                                        H MOVE                                        //
 8879                        	
 8880                        		.dbg	line,	"include\routines_LEVELS.c", 1991; //**************************************************************************************//
 8881                        	
 8882                        		.dbg	line,	"include\routines_LEVELS.c", 1993; //--------------------------------------------------------------------------------------//
 8883                        	
 8884                        		.dbg	line,	"include\routines_LEVELS.c", 1994; //                                    WALL COLLISION                                    //
 8885                        	
 8886                        		.dbg	line,	"include\routines_LEVELS.c", 1995; //--------------------------------------------------------------------------------------//
 8887                        	
 8888                        		.dbg	line,	"include\routines_LEVELS.c", 1997; // CHECK COLLISION WITH BOTTOM LEFT WALL //
 8889                        	
 8890                        		.dbg	line,	"include\routines_LEVELS.c", 1998; check_BG( 8 , 31 );
 8891                        		__ld.wi		8
         01:D051  A9 08      			lda.l	#8
         01:D053  C2         			cly
 8892                        		__pusharg.wr
         01:D054  A6 8D      			ldx	<__sp
         01:D056  CA         			dex
         01:D057  CA         			dex
         01:D058  95 08      			sta.l	<__stack, x
         01:D05A  94 09      			sty.h	<__stack, x
         01:D05C  86 8D      			stx	<__sp
 8893                        		__ld.wi		31
         01:D05E  A9 1F      			lda.l	#31
         01:D060  C2         			cly
 8894                        		__pusharg.wr
         01:D061  A6 8D      			ldx	<__sp
         01:D063  CA         			dex
         01:D064  CA         			dex
         01:D065  95 08      			sta.l	<__stack, x
         01:D067  94 09      			sty.h	<__stack, x
         01:D069  86 8D      			stx	<__sp
 8895                        		__call		_check_BG
         01:D06B  20 6D FF   			call	_check_BG
 8896                        	
 8897                        		.dbg	line,	"include\routines_LEVELS.c", 2000; if(map_blk_flag != TILE_BG)
 8898                        		__ld.umq	_map_blk_flag
         01:D06E  AD B0 2B   			lda	_map_blk_flag
 8899                        		__neq_b.uiq	1
         01:D071  38         			sec
         01:D072  49 01      			eor	#1
         01:D074  D0 01      			bne	!+
         01:D076  18         			clc
         01:D077             	!:
 8900                        		__bfalse	.LL353
         01:D077  90 78      			bcc	.LL353
 8901                        	
 8902                        		.dbg	line,	"include\routines_LEVELS.c", 2001; {
 8903                        	
 8904                        		.dbg	line,	"include\routines_LEVELS.c", 2002; // CHECK COLLISION WITH TOP RIGHT WALL //
 8905                        	
 8906                        		.dbg	line,	"include\routines_LEVELS.c", 2003; check_BG( 8 , 15 );
 8907                        		__ld.wi		8
         01:D079  A9 08      			lda.l	#8
         01:D07B  C2         			cly
 8908                        		__pusharg.wr
         01:D07C  A6 8D      			ldx	<__sp
         01:D07E  CA         			dex
         01:D07F  CA         			dex
         01:D080  95 08      			sta.l	<__stack, x
         01:D082  94 09      			sty.h	<__stack, x
         01:D084  86 8D      			stx	<__sp
 8909                        		__ld.wi		15
         01:D086  A9 0F      			lda.l	#15
         01:D088  C2         			cly
 8910                        		__pusharg.wr
         01:D089  A6 8D      			ldx	<__sp
         01:D08B  CA         			dex
         01:D08C  CA         			dex
         01:D08D  95 08      			sta.l	<__stack, x
         01:D08F  94 09      			sty.h	<__stack, x
         01:D091  86 8D      			stx	<__sp
 8911                        		__call		_check_BG
         01:D093  20 6D FF   			call	_check_BG
 8912                        	
 8913                        		.dbg	line,	"include\routines_LEVELS.c", 2005; if(map_blk_flag == TILE_BG)
 8914                        		__ld.umq	_map_blk_flag
         01:D096  AD B0 2B   			lda	_map_blk_flag
 8915                        		__equ_b.uiq	1
         01:D099  C9 01      			cmp	#1
         01:D09B  F0 01      			beq	!+
         01:D09D  18         			clc
         01:D09E             	!:
 8916                        		__bfalse	.LL354
         01:D09E  90 41      			bcc	.LL354
 8917                        	
 8918                        		.dbg	line,	"include\routines_LEVELS.c", 2006; {
 8919                        	
 8920                        		.dbg	line,	"include\routines_LEVELS.c", 2007; check_TILE_DEPTH( 15 , -16 );
 8921                        		__ld.wi		15
         01:D0A0  A9 0F      			lda.l	#15
         01:D0A2  C2         			cly
 8922                        		__pusharg.wr
         01:D0A3  A6 8D      			ldx	<__sp
         01:D0A5  CA         			dex
         01:D0A6  CA         			dex
         01:D0A7  95 08      			sta.l	<__stack, x
         01:D0A9  94 09      			sty.h	<__stack, x
         01:D0AB  86 8D      			stx	<__sp
 8923                        		__ld.wi		-16
         01:D0AD  A9 F0      			lda.l	#-16
         01:D0AF  A0 FF      			ldy.h	#-16
 8924                        		__pusharg.wr
         01:D0B1  A6 8D      			ldx	<__sp
         01:D0B3  CA         			dex
         01:D0B4  CA         			dex
         01:D0B5  95 08      			sta.l	<__stack, x
         01:D0B7  94 09      			sty.h	<__stack, x
         01:D0B9  86 8D      			stx	<__sp
 8925                        		__call		_check_TILE_DEPTH
         01:D0BB  20 59 FF   			call	_check_TILE_DEPTH
 8926                        	
 8927                        		.dbg	line,	"include\routines_LEVELS.c", 2009; if(map_blk_flag == TILE_EMPTY && jump_ladder == TRUE)
 8928                        		__not.um	_map_blk_flag
         01:D0BE  AD B0 2B   			lda	_map_blk_flag
         01:D0C1  18         			clc
         01:D0C2  D0 01      			bne	!+
         01:D0C4  38         			sec
         01:D0C5             	!:
 8929                        		__bfalse	.LL356
         01:D0C5  90 08      			bcc	.LL356
 8930                        		__ld.umq	_jump_ladder
         01:D0C7  AD 1F 23   			lda	_jump_ladder
 8931                        		__equ_b.uiq	1
         01:D0CA  C9 01      			cmp	#1
         01:D0CC  F0 01      			beq	!+
         01:D0CE  18         			clc
         01:D0CF             	!:
 8932    01:D0CF             	.LL356:
 8933                        		__bfalse	.LL355
         01:D0CF  90 5F      			bcc	.LL355
 8934                        	
 8935                        		.dbg	line,	"include\routines_LEVELS.c", 2010; {
 8936                        	
 8937                        		.dbg	line,	"include\routines_LEVELS.c", 2011; jump_ladder = FALSE;
 8938                        		__st.umiq	0, _jump_ladder
         01:D0D1  9C 1F 23   			stz	_jump_ladder
 8939                        	
 8940                        		.dbg	line,	"include\routines_LEVELS.c", 2012; player_index_fall = 0;
 8941                        		__st.umiq	0, _player_index_fall
         01:D0D4  9C 1B 23   			stz	_player_index_fall
 8942                        	
 8943                        		.dbg	line,	"include\routines_LEVELS.c", 2013; player_state = STATE_FALL;
 8944                        		__st.umiq	9, _player_state
         01:D0D7  A9 09      			lda.l	#9
         01:D0D9  8D 16 23   			sta	_player_state
 8945                        	
 8946                        		.dbg	line,	"include\routines_LEVELS.c", 2014; return;
 8947                        		__bra		.LL216
         01:D0DC  4C 71 DD   			bra	.LL216
 8948                        	
 8949                        		.dbg	line,	"include\routines_LEVELS.c", 2015; }
 8950                        	
 8951                        		.dbg	line,	"include\routines_LEVELS.c", 2016; }
 8952    01:D0DF             	.LL355	.alias		.LL357
 8953                        	
 8954                        		.dbg	line,	"include\routines_LEVELS.c", 2018; else
 8955                        		__bra		.LL357
         01:D0DF  80 4F      			bra	.LL357
 8956    01:D0E1             	.LL354:
 8957                        	
 8958                        		.dbg	line,	"include\routines_LEVELS.c", 2019; {
 8959                        	
 8960                        		.dbg	line,	"include\routines_LEVELS.c", 2020; sgx_map_pxl_x -= 2;
 8961                        		__sub_st.wmiq	2, _sgx_map_pxl_x
         01:D0E1  38         			sec
         01:D0E2  AD 8F 26   			lda.l	_sgx_map_pxl_x
         01:D0E5  E9 02      			sbc.l	#2
         01:D0E7  8D 8F 26   			sta.l	_sgx_map_pxl_x
         01:D0EA  B0 03      			bcs	!+
         01:D0EC  CE 90 26   			dec.h	_sgx_map_pxl_x
         01:D0EF             	!:
 8962                        	
 8963                        		.dbg	line,	"include\routines_LEVELS.c", 2021; }
 8964    01:D0EF             	.LL357	.alias		.LL358
 8965                        	
 8966                        		.dbg	line,	"include\routines_LEVELS.c", 2022; }
 8967                        	
 8968                        		.dbg	line,	"include\routines_LEVELS.c", 2024; else
 8969                        		__bra		.LL358
         01:D0EF  80 3F      			bra	.LL358
 8970    01:D0F1             	.LL353:
 8971                        	
 8972                        		.dbg	line,	"include\routines_LEVELS.c", 2025; {
 8973                        	
 8974                        		.dbg	line,	"include\routines_LEVELS.c", 2026; check_TILE_DEPTH( 15 , -16 );
 8975                        		__ld.wi		15
         01:D0F1  A9 0F      			lda.l	#15
         01:D0F3  C2         			cly
 8976                        		__pusharg.wr
         01:D0F4  A6 8D      			ldx	<__sp
         01:D0F6  CA         			dex
         01:D0F7  CA         			dex
         01:D0F8  95 08      			sta.l	<__stack, x
         01:D0FA  94 09      			sty.h	<__stack, x
         01:D0FC  86 8D      			stx	<__sp
 8977                        		__ld.wi		-16
         01:D0FE  A9 F0      			lda.l	#-16
         01:D100  A0 FF      			ldy.h	#-16
 8978                        		__pusharg.wr
         01:D102  A6 8D      			ldx	<__sp
         01:D104  CA         			dex
         01:D105  CA         			dex
         01:D106  95 08      			sta.l	<__stack, x
         01:D108  94 09      			sty.h	<__stack, x
         01:D10A  86 8D      			stx	<__sp
 8979                        		__call		_check_TILE_DEPTH
         01:D10C  20 59 FF   			call	_check_TILE_DEPTH
 8980                        	
 8981                        		.dbg	line,	"include\routines_LEVELS.c", 2028; if(map_blk_flag == TILE_EMPTY && jump_ladder == TRUE)
 8982                        		__not.um	_map_blk_flag
         01:D10F  AD B0 2B   			lda	_map_blk_flag
         01:D112  18         			clc
         01:D113  D0 01      			bne	!+
         01:D115  38         			sec
         01:D116             	!:
 8983                        		__bfalse	.LL360
         01:D116  90 08      			bcc	.LL360
 8984                        		__ld.umq	_jump_ladder
         01:D118  AD 1F 23   			lda	_jump_ladder
 8985                        		__equ_b.uiq	1
         01:D11B  C9 01      			cmp	#1
         01:D11D  F0 01      			beq	!+
         01:D11F  18         			clc
         01:D120             	!:
 8986    01:D120             	.LL360:
 8987                        		__bfalse	.LL359
         01:D120  90 0E      			bcc	.LL359
 8988                        	
 8989                        		.dbg	line,	"include\routines_LEVELS.c", 2029; {
 8990                        	
 8991                        		.dbg	line,	"include\routines_LEVELS.c", 2030; jump_ladder = FALSE;
 8992                        		__st.umiq	0, _jump_ladder
         01:D122  9C 1F 23   			stz	_jump_ladder
 8993                        	
 8994                        		.dbg	line,	"include\routines_LEVELS.c", 2031; player_index_fall = 0;
 8995                        		__st.umiq	0, _player_index_fall
         01:D125  9C 1B 23   			stz	_player_index_fall
 8996                        	
 8997                        		.dbg	line,	"include\routines_LEVELS.c", 2032; player_state = STATE_FALL;
 8998                        		__st.umiq	9, _player_state
         01:D128  A9 09      			lda.l	#9
         01:D12A  8D 16 23   			sta	_player_state
 8999                        	
 9000                        		.dbg	line,	"include\routines_LEVELS.c", 2033; return;
 9001                        		__bra		.LL216
         01:D12D  4C 71 DD   			bra	.LL216
 9002                        	
 9003                        		.dbg	line,	"include\routines_LEVELS.c", 2034; }
 9004                        	
 9005                        		.dbg	line,	"include\routines_LEVELS.c", 2035; }
 9006    01:D130             	.LL359:
 9007    01:D130             	.LL358:
 9008                        	
 9009                        		.dbg	line,	"include\routines_LEVELS.c", 2040; //**************************************************************************************//
 9010                        	
 9011                        		.dbg	line,	"include\routines_LEVELS.c", 2041; //                                        V MOVE                                        //
 9012                        	
 9013                        		.dbg	line,	"include\routines_LEVELS.c", 2042; //**************************************************************************************//
 9014                        	
 9015                        		.dbg	line,	"include\routines_LEVELS.c", 2044; // UPDATE PLAYER Y POSITION //
 9016                        	
 9017                        		.dbg	line,	"include\routines_LEVELS.c", 2045; if(jump_ladder == FALSE)
 9018                        		__not.um	_jump_ladder
         01:D130  AD 1F 23   			lda	_jump_ladder
         01:D133  18         			clc
         01:D134  D0 01      			bne	!+
         01:D136  38         			sec
         01:D137             	!:
 9019                        		__bfalse	.LL361
         01:D137  90 1A      			bcc	.LL361
 9020                        	
 9021                        		.dbg	line,	"include\routines_LEVELS.c", 2046; {
 9022                        	
 9023                        		.dbg	line,	"include\routines_LEVELS.c", 2047; player_pos_y += TABLE_PLAYER_JUMP_V[player_index_jump];
 9024                        		__ldx.umq	_player_index_jump
         01:D139  AE 1A 23   			ldx	_player_index_jump
 9025                        		__ld.bax	_TABLE_PLAYER_JUMP_V
         01:D13C  BD F9 60   			lda	_TABLE_PLAYER_JUMP_V, x
         01:D13F  C2         			cly
         01:D140  10 01      			bpl	!+
         01:D142  88         			dey
         01:D143             	!:
 9026                        		__add_st.wmq	_player_pos_y
         01:D143  18         			clc
         01:D144  6D D5 24   			adc.l	_player_pos_y
         01:D147  8D D5 24   			sta.l	_player_pos_y
         01:D14A  98         			tya
         01:D14B  6D D6 24   			adc.h	_player_pos_y
         01:D14E  8D D6 24   			sta.h	_player_pos_y
 9027                        	
 9028                        		.dbg	line,	"include\routines_LEVELS.c", 2048; }
 9029                        	
 9030                        		.dbg	line,	"include\routines_LEVELS.c", 2050; else
 9031                        		__bra		.LL362
         01:D151  80 18      			bra	.LL362
 9032    01:D153             	.LL361:
 9033                        	
 9034                        		.dbg	line,	"include\routines_LEVELS.c", 2051; {
 9035                        	
 9036                        		.dbg	line,	"include\routines_LEVELS.c", 2052; player_pos_y += TABLE_PLAYER_JUMP_LADDER[player_index_jump];
 9037                        		__ldx.umq	_player_index_jump
         01:D153  AE 1A 23   			ldx	_player_index_jump
 9038                        		__ld.bax	_TABLE_PLAYER_JUMP_LADDER
         01:D156  BD 31 61   			lda	_TABLE_PLAYER_JUMP_LADDER, x
         01:D159  C2         			cly
         01:D15A  10 01      			bpl	!+
         01:D15C  88         			dey
         01:D15D             	!:
 9039                        		__add_st.wmq	_player_pos_y
         01:D15D  18         			clc
         01:D15E  6D D5 24   			adc.l	_player_pos_y
         01:D161  8D D5 24   			sta.l	_player_pos_y
         01:D164  98         			tya
         01:D165  6D D6 24   			adc.h	_player_pos_y
         01:D168  8D D6 24   			sta.h	_player_pos_y
 9040                        	
 9041                        		.dbg	line,	"include\routines_LEVELS.c", 2053; }
 9042    01:D16B             	.LL362:
 9043                        	
 9044                        		.dbg	line,	"include\routines_LEVELS.c", 2056; // IF PLAYER GOES BELOW ITS BASE Y POSITION //
 9045                        	
 9046                        		.dbg	line,	"include\routines_LEVELS.c", 2057; if(player_pos_y >= PLAYER_BASE_Y_POS)
 9047                        		__ld.wm		_player_pos_y
         01:D16B  AD D5 24   			lda.l	_player_pos_y
         01:D16E  AC D6 24   			ldy.h	_player_pos_y
 9048                        		__sge_w.wi	128
         01:D171  C9 80      			cmp.l	#128		; Subtract integer from Y:A.
         01:D173  98         			tya
         01:D174  E9 00      			sbc.h	#128
         01:D176  50 02      			bvc	!+
         01:D178  49 80      			eor	#$80		; +ve if Y:A >= integer (signed).
         01:D17A  49 80      	!:		eor	#$80
         01:D17C  0A         			asl	a
 9049                        		__bfalse	.LL363
         01:D17D  90 4E      			bcc	.LL363
 9050                        	
 9051                        		.dbg	line,	"include\routines_LEVELS.c", 2058; {
 9052                        	
 9053                        		.dbg	line,	"include\routines_LEVELS.c", 2059; // THE CAMERA MOVES //
 9054                        	
 9055                        		.dbg	line,	"include\routines_LEVELS.c", 2060; // CALCULATE HOW MANY PIXELS THE CAMERA HAS TO MOVE DOWN //
 9056                        	
 9057                        		.dbg	line,	"include\routines_LEVELS.c", 2061; camera_y_move = player_pos_y - PLAYER_BASE_Y_POS;
 9058                        		__ld.wm		_player_pos_y
         01:D17F  AD D5 24   			lda.l	_player_pos_y
         01:D182  AC D6 24   			ldy.h	_player_pos_y
 9059                        		__sub.wi	128
         01:D185  38         			sec
         01:D186  E9 80      			sbc.l	#128
         01:D188  B0 01      			bcs	!+
         01:D18A  88         			dey
         01:D18B             	!:
 9060                        		__st.umq	__update_PLAYER_end - 5  /* camera_y_move */
         01:D18B  8D 08 23   			sta	__update_PLAYER_end - 5
 9061                        	
 9062                        		.dbg	line,	"include\routines_LEVELS.c", 2062; sgx_map_pxl_y += camera_y_move;
 9063                        		__ld.um		__update_PLAYER_end - 5  /* camera_y_move */
         01:D18E  AD 08 23   			lda	__update_PLAYER_end - 5
         01:D191  C2         			cly
 9064                        		__add_st.wmq	_sgx_map_pxl_y
         01:D192  18         			clc
         01:D193  6D 91 26   			adc.l	_sgx_map_pxl_y
         01:D196  8D 91 26   			sta.l	_sgx_map_pxl_y
         01:D199  98         			tya
         01:D19A  6D 92 26   			adc.h	_sgx_map_pxl_y
         01:D19D  8D 92 26   			sta.h	_sgx_map_pxl_y
 9065                        	
 9066                        		.dbg	line,	"include\routines_LEVELS.c", 2064; // IF THE CAMERA HAS REACHED ITS MAX (LOWEST) POSITION //
 9067                        	
 9068                        		.dbg	line,	"include\routines_LEVELS.c", 2065; if(sgx_map_pxl_y > camera_max_y_position)
 9069                        		__ld.wm		_sgx_map_pxl_y
         01:D1A0  AD 91 26   			lda.l	_sgx_map_pxl_y
         01:D1A3  AC 92 26   			ldy.h	_sgx_map_pxl_y
 9070                        		__ugt_w.wm	_camera_max_y_position
         01:D1A6  18         			clc			; Subtract memory+1 from Y:A.
         01:D1A7  ED D7 24   			sbc.l	_camera_max_y_position
         01:D1AA  98         			tya
         01:D1AB  ED D8 24   			sbc.h	_camera_max_y_position		; CS if Y:A > memory.
 9071                        		__bfalse	.LL364
         01:D1AE  90 0C      			bcc	.LL364
 9072                        	
 9073                        		.dbg	line,	"include\routines_LEVELS.c", 2066; {
 9074                        	
 9075                        		.dbg	line,	"include\routines_LEVELS.c", 2067; // THE CAMERA CAN NOT MOVE LOWER //
 9076                        	
 9077                        		.dbg	line,	"include\routines_LEVELS.c", 2068; sgx_map_pxl_y = camera_max_y_position;
 9078                        		__ld.wm		_camera_max_y_position
         01:D1B0  AD D7 24   			lda.l	_camera_max_y_position
         01:D1B3  AC D8 24   			ldy.h	_camera_max_y_position
 9079                        		__st.wmq	_sgx_map_pxl_y
         01:D1B6  8D 91 26   			sta.l	_sgx_map_pxl_y
         01:D1B9  8C 92 26   			sty.h	_sgx_map_pxl_y
 9080                        	
 9081                        		.dbg	line,	"include\routines_LEVELS.c", 2069; }
 9082                        	
 9083                        		.dbg	line,	"include\routines_LEVELS.c", 2071; // THE PLAYER STAYS AT ITS BASE Y POSITION //
 9084                        	
 9085                        		.dbg	line,	"include\routines_LEVELS.c", 2072; player_pos_y = PLAYER_BASE_Y_POS;
 9086    01:D1BC             	.LL364:
 9087                        		__st.wmiq	128, _player_pos_y
         01:D1BC  A9 80      			lda.l	#128
         01:D1BE  8D D5 24   			sta.l	_player_pos_y
         01:D1C1  9C D6 24   			stz.h	_player_pos_y
 9088                        	
 9089                        		.dbg	line,	"include\routines_LEVELS.c", 2074; spr_y(player_pos_y);
 9090                        		__ld.wm		_player_pos_y
         01:D1C4  AD D5 24   			lda.l	_player_pos_y
         01:D1C7  AC D6 24   			ldy.h	_player_pos_y
 9091                        		__call		_spr_y.1
         01:D1CA  20 19 E8   			call	_spr_y.1
 9092                        	
 9093                        		.dbg	line,	"include\routines_LEVELS.c", 2075; }
 9094                        	
 9095                        		.dbg	line,	"include\routines_LEVELS.c", 2078; // UPDATE JUMP INDEX IN THE ARRAY //
 9096                        	
 9097                        		.dbg	line,	"include\routines_LEVELS.c", 2079; if(player_index_jump < jump_max_index)
 9098    01:D1CD             	.LL363:
 9099                        		__ld.umq	_player_index_jump
         01:D1CD  AD 1A 23   			lda	_player_index_jump
 9100                        		__ult_b.umq	_jump_max_index
         01:D1D0  CD 20 23   			cmp	_jump_max_index		; Subtract memory from A.
         01:D1D3  6A         			ror	a		; CC if A < memory.
         01:D1D4  49 80      			eor	#$80
         01:D1D6  2A         			rol	a
 9101                        		__bfalse	.LL365
         01:D1D7  90 03      			bcc	.LL365
 9102                        	
 9103                        		.dbg	line,	"include\routines_LEVELS.c", 2080; {
 9104                        	
 9105                        		.dbg	line,	"include\routines_LEVELS.c", 2081; player_index_jump += 1;
 9106                        		__add_st.umiq	1, _player_index_jump
         01:D1D9  EE 1A 23   			inc	_player_index_jump
 9107                        	
 9108                        		.dbg	line,	"include\routines_LEVELS.c", 2082; }
 9109                        	
 9110                        		.dbg	line,	"include\routines_LEVELS.c", 2087; //--------------------------------------------------------------------------------------//
 9111                        	
 9112                        		.dbg	line,	"include\routines_LEVELS.c", 2088; //                                   FLOOR COLLISION                                    //
 9113                        	
 9114                        		.dbg	line,	"include\routines_LEVELS.c", 2089; //--------------------------------------------------------------------------------------//
 9115                        	
 9116                        		.dbg	line,	"include\routines_LEVELS.c", 2091; if(player_index_jump > 14)
 9117    01:D1DC             	.LL365:
 9118                        		__ld.umq	_player_index_jump
         01:D1DC  AD 1A 23   			lda	_player_index_jump
 9119                        		__ugt_b.uiq	14
         01:D1DF  18         			clc			; Subtract integer+1 from A.
         01:D1E0  E9 0E      			sbc	#14		; CS if A > integer.
 9120                        		__bfalse	.LL366
         01:D1E2  B0 03 4C 97			bcc	.LL366
         01:D1E6  D3          
 9121                        	
 9122                        		.dbg	line,	"include\routines_LEVELS.c", 2092; {
 9123                        	
 9124                        		.dbg	line,	"include\routines_LEVELS.c", 2093; // CHECK COLLISION WITH LEFT FLOOR //
 9125                        	
 9126                        		.dbg	line,	"include\routines_LEVELS.c", 2094; check_BG( 10 , 32 );
 9127                        		__ld.wi		10
         01:D1E7  A9 0A      			lda.l	#10
         01:D1E9  C2         			cly
 9128                        		__pusharg.wr
         01:D1EA  A6 8D      			ldx	<__sp
         01:D1EC  CA         			dex
         01:D1ED  CA         			dex
         01:D1EE  95 08      			sta.l	<__stack, x
         01:D1F0  94 09      			sty.h	<__stack, x
         01:D1F2  86 8D      			stx	<__sp
 9129                        		__ld.wi		32
         01:D1F4  A9 20      			lda.l	#32
         01:D1F6  C2         			cly
 9130                        		__pusharg.wr
         01:D1F7  A6 8D      			ldx	<__sp
         01:D1F9  CA         			dex
         01:D1FA  CA         			dex
         01:D1FB  95 08      			sta.l	<__stack, x
         01:D1FD  94 09      			sty.h	<__stack, x
         01:D1FF  86 8D      			stx	<__sp
 9131                        		__call		_check_BG
         01:D201  20 6D FF   			call	_check_BG
 9132                        	
 9133                        		.dbg	line,	"include\routines_LEVELS.c", 2096; if(map_blk_flag == TILE_BG)
 9134                        		__ld.umq	_map_blk_flag
         01:D204  AD B0 2B   			lda	_map_blk_flag
 9135                        		__equ_b.uiq	1
         01:D207  C9 01      			cmp	#1
         01:D209  F0 01      			beq	!+
         01:D20B  18         			clc
         01:D20C             	!:
 9136                        		__bfalse	.LL367
         01:D20C  B0 03 4C BF			bcc	.LL367
         01:D210  D2          
 9137                        	
 9138                        		.dbg	line,	"include\routines_LEVELS.c", 2097; {
 9139                        	
 9140                        		.dbg	line,	"include\routines_LEVELS.c", 2098; // CALCULATE HOW MANY PIXELS THE PLAYER MOVED INTO THE GROUND //
 9141                        	
 9142                        		.dbg	line,	"include\routines_LEVELS.c", 2099; for(i=1; i<11 ; i++)
 9143                        		__st.umiq	1, __update_PLAYER_end - 4  /* i */
         01:D211  A9 01      			lda.l	#1
         01:D213  8D 09 23   			sta	__update_PLAYER_end - 4
 9144    01:D216             	.LL368:
 9145                        		__ld.umq	__update_PLAYER_end - 4  /* i */
         01:D216  AD 09 23   			lda	__update_PLAYER_end - 4
 9146                        		__ult_b.uiq	11
         01:D219  C9 0B      			cmp	#11		; Subtract integer from A.
         01:D21B  6A         			ror	a		; CC if A < integer.
         01:D21C  49 80      			eor	#$80
         01:D21E  2A         			rol	a
 9147                        		__btrue		.LL370
         01:D21F  B0 07      			bcs	.LL370
 9148                        		__bra		.LL371
         01:D221  80 7D      			bra	.LL371
 9149    01:D223             	.LL369:
 9150                        		__inc.umq	__update_PLAYER_end - 4  /* i */
         01:D223  EE 09 23   			inc	__update_PLAYER_end - 4
 9151                        		__bra		.LL368
         01:D226  80 EE      			bra	.LL368
 9152    01:D228             	.LL370:
 9153                        	
 9154                        		.dbg	line,	"include\routines_LEVELS.c", 2100; {
 9155                        	
 9156                        		.dbg	line,	"include\routines_LEVELS.c", 2101; check_TILE_DEPTH( 10 , i);
 9157                        		__ld.wi		10
         01:D228  A9 0A      			lda.l	#10
         01:D22A  C2         			cly
 9158                        		__pusharg.wr
         01:D22B  A6 8D      			ldx	<__sp
         01:D22D  CA         			dex
         01:D22E  CA         			dex
         01:D22F  95 08      			sta.l	<__stack, x
         01:D231  94 09      			sty.h	<__stack, x
         01:D233  86 8D      			stx	<__sp
 9159                        		__ld.um		__update_PLAYER_end - 4  /* i */
         01:D235  AD 09 23   			lda	__update_PLAYER_end - 4
         01:D238  C2         			cly
 9160                        		__pusharg.wr
         01:D239  A6 8D      			ldx	<__sp
         01:D23B  CA         			dex
         01:D23C  CA         			dex
         01:D23D  95 08      			sta.l	<__stack, x
         01:D23F  94 09      			sty.h	<__stack, x
         01:D241  86 8D      			stx	<__sp
 9161                        		__call		_check_TILE_DEPTH
         01:D243  20 59 FF   			call	_check_TILE_DEPTH
 9162                        	
 9163                        		.dbg	line,	"include\routines_LEVELS.c", 2103; if(map_blk_flag == TILE_EMPTY)
 9164                        		__not.um	_map_blk_flag
         01:D246  AD B0 2B   			lda	_map_blk_flag
         01:D249  18         			clc
         01:D24A  D0 01      			bne	!+
         01:D24C  38         			sec
         01:D24D             	!:
 9165                        		__bfalse	.LL372
         01:D24D  90 D4      			bcc	.LL372
 9166                        	
 9167                        		.dbg	line,	"include\routines_LEVELS.c", 2104; {
 9168                        	
 9169                        		.dbg	line,	"include\routines_LEVELS.c", 2105; if(player_pos_y != PLAYER_BASE_Y_POS)
 9170                        		__ld.wm		_player_pos_y
         01:D24F  AD D5 24   			lda.l	_player_pos_y
         01:D252  AC D6 24   			ldy.h	_player_pos_y
 9171                        		__neq_w.wi	128
         01:D255  38         			sec
         01:D256  49 80      			eor.l	#128
         01:D258  D0 06      			bne	!+
         01:D25A  98         			tya
         01:D25B  49 00      			eor.h	#128
         01:D25D  D0 01      			bne	!+
         01:D25F  18         			clc
         01:D260             	!:
 9172                        		__bfalse	.LL373
         01:D260  90 1E      			bcc	.LL373
 9173                        	
 9174                        		.dbg	line,	"include\routines_LEVELS.c", 2106; {
 9175                        	
 9176                        		.dbg	line,	"include\routines_LEVELS.c", 2107; player_pos_y -= (i - 1);
 9177                        		__ld.um		__update_PLAYER_end - 4  /* i */
         01:D262  AD 09 23   			lda	__update_PLAYER_end - 4
         01:D265  C2         			cly
 9178                        		__sub.wi	1
         01:D266  38         			sec
         01:D267  E9 01      			sbc.l	#1
         01:D269  B0 01      			bcs	!+
         01:D26B  88         			dey
         01:D26C             	!:
 9179                        		__isub_st.wmq	_player_pos_y
         01:D26C  38         			sec
         01:D26D  49 FF      			eor	#$FF
         01:D26F  6D D5 24   			adc.l	_player_pos_y
         01:D272  8D D5 24   			sta.l	_player_pos_y
         01:D275  98         			tya
         01:D276  49 FF      			eor	#$FF
         01:D278  6D D6 24   			adc.h	_player_pos_y
         01:D27B  8D D6 24   			sta.h	_player_pos_y
 9180                        	
 9181                        		.dbg	line,	"include\routines_LEVELS.c", 2108; }
 9182                        	
 9183                        		.dbg	line,	"include\routines_LEVELS.c", 2110; else
 9184                        		__bra		.LL374
         01:D27E  80 20      			bra	.LL374
 9185    01:D280             	.LL373:
 9186                        	
 9187                        		.dbg	line,	"include\routines_LEVELS.c", 2111; {
 9188                        	
 9189                        		.dbg	line,	"include\routines_LEVELS.c", 2112; sgx_map_pxl_y -= (i - 1);
 9190                        		__ld.um		__update_PLAYER_end - 4  /* i */
         01:D280  AD 09 23   			lda	__update_PLAYER_end - 4
         01:D283  C2         			cly
 9191                        		__sub.wi	1
         01:D284  38         			sec
         01:D285  E9 01      			sbc.l	#1
         01:D287  B0 01      			bcs	!+
         01:D289  88         			dey
         01:D28A             	!:
 9192                        		__isub_st.wmq	_sgx_map_pxl_y
         01:D28A  38         			sec
         01:D28B  49 FF      			eor	#$FF
         01:D28D  6D 91 26   			adc.l	_sgx_map_pxl_y
         01:D290  8D 91 26   			sta.l	_sgx_map_pxl_y
         01:D293  98         			tya
         01:D294  49 FF      			eor	#$FF
         01:D296  6D 92 26   			adc.h	_sgx_map_pxl_y
         01:D299  8D 92 26   			sta.h	_sgx_map_pxl_y
 9193                        	
 9194                        		.dbg	line,	"include\routines_LEVELS.c", 2113; }
 9195    01:D29C             	.LL374	.alias		.LL371
 9196                        	
 9197                        		.dbg	line,	"include\routines_LEVELS.c", 2115; break;
 9198                        		__bra		.LL371
         01:D29C  80 02      			bra	.LL371
 9199                        	
 9200                        		.dbg	line,	"include\routines_LEVELS.c", 2116; }
 9201                        	
 9202                        		.dbg	line,	"include\routines_LEVELS.c", 2117; }
 9203    01:D29E             	.LL372	.alias		.LL369
 9204                        		__bra		.LL369
         01:D29E  80 83      			bra	.LL369
 9205    01:D2A0             	.LL371:
 9206                        	
 9207                        		.dbg	line,	"include\routines_LEVELS.c", 2119; // SET PLAYER SPRITE NEW POSITION //
 9208                        	
 9209                        		.dbg	line,	"include\routines_LEVELS.c", 2120; spr_y(player_pos_y);
 9210                        		__ld.wm		_player_pos_y
         01:D2A0  AD D5 24   			lda.l	_player_pos_y
         01:D2A3  AC D6 24   			ldy.h	_player_pos_y
 9211                        		__call		_spr_y.1
         01:D2A6  20 19 E8   			call	_spr_y.1
 9212                        	
 9213                        		.dbg	line,	"include\routines_LEVELS.c", 2122; player_counter_anim = 1;
 9214                        		__st.umiq	1, _player_counter_anim
         01:D2A9  A9 01      			lda.l	#1
         01:D2AB  8D 19 23   			sta	_player_counter_anim
 9215                        	
 9216                        		.dbg	line,	"include\routines_LEVELS.c", 2123; player_index_jump = 0;
 9217                        		__st.umiq	0, _player_index_jump
         01:D2AE  9C 1A 23   			stz	_player_index_jump
 9218                        	
 9219                        		.dbg	line,	"include\routines_LEVELS.c", 2124; jump_ladder = FALSE;
 9220                        		__st.umiq	0, _jump_ladder
         01:D2B1  9C 1F 23   			stz	_jump_ladder
 9221                        	
 9222                        		.dbg	line,	"include\routines_LEVELS.c", 2125; jump_max_index = 34;
 9223                        		__st.umiq	34, _jump_max_index
         01:D2B4  A9 22      			lda.l	#34
         01:D2B6  8D 20 23   			sta	_jump_max_index
 9224                        	
 9225                        		.dbg	line,	"include\routines_LEVELS.c", 2126; player_state = STATE_IDLE;
 9226                        		__st.umiq	0, _player_state
         01:D2B9  9C 16 23   			stz	_player_state
 9227                        	
 9228                        		.dbg	line,	"include\routines_LEVELS.c", 2127; return;
 9229                        		__bra		.LL216
         01:D2BC  4C 71 DD   			bra	.LL216
 9230                        	
 9231                        		.dbg	line,	"include\routines_LEVELS.c", 2128; }
 9232                        	
 9233                        		.dbg	line,	"include\routines_LEVELS.c", 2130; else
 9234    01:D2BF             	.LL367:
 9235                        	
 9236                        		.dbg	line,	"include\routines_LEVELS.c", 2131; {
 9237                        	
 9238                        		.dbg	line,	"include\routines_LEVELS.c", 2132; // CHECK COLLISION WITH RIGHT FLOOR //
 9239                        	
 9240                        		.dbg	line,	"include\routines_LEVELS.c", 2133; check_BG( 22 , 32 );
 9241                        		__ld.wi		22
         01:D2BF  A9 16      			lda.l	#22
         01:D2C1  C2         			cly
 9242                        		__pusharg.wr
         01:D2C2  A6 8D      			ldx	<__sp
         01:D2C4  CA         			dex
         01:D2C5  CA         			dex
         01:D2C6  95 08      			sta.l	<__stack, x
         01:D2C8  94 09      			sty.h	<__stack, x
         01:D2CA  86 8D      			stx	<__sp
 9243                        		__ld.wi		32
         01:D2CC  A9 20      			lda.l	#32
         01:D2CE  C2         			cly
 9244                        		__pusharg.wr
         01:D2CF  A6 8D      			ldx	<__sp
         01:D2D1  CA         			dex
         01:D2D2  CA         			dex
         01:D2D3  95 08      			sta.l	<__stack, x
         01:D2D5  94 09      			sty.h	<__stack, x
         01:D2D7  86 8D      			stx	<__sp
 9245                        		__call		_check_BG
         01:D2D9  20 6D FF   			call	_check_BG
 9246                        	
 9247                        		.dbg	line,	"include\routines_LEVELS.c", 2135; if(map_blk_flag == TILE_BG)
 9248                        		__ld.umq	_map_blk_flag
         01:D2DC  AD B0 2B   			lda	_map_blk_flag
 9249                        		__equ_b.uiq	1
         01:D2DF  C9 01      			cmp	#1
         01:D2E1  F0 01      			beq	!+
         01:D2E3  18         			clc
         01:D2E4             	!:
 9250                        		__bfalse	.LL376
         01:D2E4  B0 03 4C 97			bcc	.LL376
         01:D2E8  D3          
 9251                        	
 9252                        		.dbg	line,	"include\routines_LEVELS.c", 2136; {
 9253                        	
 9254                        		.dbg	line,	"include\routines_LEVELS.c", 2137; // CALCULATE HOW MANY PIXELS THE PLAYER MOVED INTO THE GROUND //
 9255                        	
 9256                        		.dbg	line,	"include\routines_LEVELS.c", 2138; for(i=1; i<11 ; i++)
 9257                        		__st.umiq	1, __update_PLAYER_end - 4  /* i */
         01:D2E9  A9 01      			lda.l	#1
         01:D2EB  8D 09 23   			sta	__update_PLAYER_end - 4
 9258    01:D2EE             	.LL377:
 9259                        		__ld.umq	__update_PLAYER_end - 4  /* i */
         01:D2EE  AD 09 23   			lda	__update_PLAYER_end - 4
 9260                        		__ult_b.uiq	11
         01:D2F1  C9 0B      			cmp	#11		; Subtract integer from A.
         01:D2F3  6A         			ror	a		; CC if A < integer.
         01:D2F4  49 80      			eor	#$80
         01:D2F6  2A         			rol	a
 9261                        		__btrue		.LL379
         01:D2F7  B0 07      			bcs	.LL379
 9262                        		__bra		.LL380
         01:D2F9  80 7D      			bra	.LL380
 9263    01:D2FB             	.LL378:
 9264                        		__inc.umq	__update_PLAYER_end - 4  /* i */
         01:D2FB  EE 09 23   			inc	__update_PLAYER_end - 4
 9265                        		__bra		.LL377
         01:D2FE  80 EE      			bra	.LL377
 9266    01:D300             	.LL379:
 9267                        	
 9268                        		.dbg	line,	"include\routines_LEVELS.c", 2139; {
 9269                        	
 9270                        		.dbg	line,	"include\routines_LEVELS.c", 2140; check_TILE_DEPTH( 22 , i);
 9271                        		__ld.wi		22
         01:D300  A9 16      			lda.l	#22
         01:D302  C2         			cly
 9272                        		__pusharg.wr
         01:D303  A6 8D      			ldx	<__sp
         01:D305  CA         			dex
         01:D306  CA         			dex
         01:D307  95 08      			sta.l	<__stack, x
         01:D309  94 09      			sty.h	<__stack, x
         01:D30B  86 8D      			stx	<__sp
 9273                        		__ld.um		__update_PLAYER_end - 4  /* i */
         01:D30D  AD 09 23   			lda	__update_PLAYER_end - 4
         01:D310  C2         			cly
 9274                        		__pusharg.wr
         01:D311  A6 8D      			ldx	<__sp
         01:D313  CA         			dex
         01:D314  CA         			dex
         01:D315  95 08      			sta.l	<__stack, x
         01:D317  94 09      			sty.h	<__stack, x
         01:D319  86 8D      			stx	<__sp
 9275                        		__call		_check_TILE_DEPTH
         01:D31B  20 59 FF   			call	_check_TILE_DEPTH
 9276                        	
 9277                        		.dbg	line,	"include\routines_LEVELS.c", 2142; if(map_blk_flag == TILE_EMPTY)
 9278                        		__not.um	_map_blk_flag
         01:D31E  AD B0 2B   			lda	_map_blk_flag
         01:D321  18         			clc
         01:D322  D0 01      			bne	!+
         01:D324  38         			sec
         01:D325             	!:
 9279                        		__bfalse	.LL381
         01:D325  90 D4      			bcc	.LL381
 9280                        	
 9281                        		.dbg	line,	"include\routines_LEVELS.c", 2143; {
 9282                        	
 9283                        		.dbg	line,	"include\routines_LEVELS.c", 2144; if(player_pos_y != PLAYER_BASE_Y_POS)
 9284                        		__ld.wm		_player_pos_y
         01:D327  AD D5 24   			lda.l	_player_pos_y
         01:D32A  AC D6 24   			ldy.h	_player_pos_y
 9285                        		__neq_w.wi	128
         01:D32D  38         			sec
         01:D32E  49 80      			eor.l	#128
         01:D330  D0 06      			bne	!+
         01:D332  98         			tya
         01:D333  49 00      			eor.h	#128
         01:D335  D0 01      			bne	!+
         01:D337  18         			clc
         01:D338             	!:
 9286                        		__bfalse	.LL382
         01:D338  90 1E      			bcc	.LL382
 9287                        	
 9288                        		.dbg	line,	"include\routines_LEVELS.c", 2145; {
 9289                        	
 9290                        		.dbg	line,	"include\routines_LEVELS.c", 2146; player_pos_y -= (i - 1);
 9291                        		__ld.um		__update_PLAYER_end - 4  /* i */
         01:D33A  AD 09 23   			lda	__update_PLAYER_end - 4
         01:D33D  C2         			cly
 9292                        		__sub.wi	1
         01:D33E  38         			sec
         01:D33F  E9 01      			sbc.l	#1
         01:D341  B0 01      			bcs	!+
         01:D343  88         			dey
         01:D344             	!:
 9293                        		__isub_st.wmq	_player_pos_y
         01:D344  38         			sec
         01:D345  49 FF      			eor	#$FF
         01:D347  6D D5 24   			adc.l	_player_pos_y
         01:D34A  8D D5 24   			sta.l	_player_pos_y
         01:D34D  98         			tya
         01:D34E  49 FF      			eor	#$FF
         01:D350  6D D6 24   			adc.h	_player_pos_y
         01:D353  8D D6 24   			sta.h	_player_pos_y
 9294                        	
 9295                        		.dbg	line,	"include\routines_LEVELS.c", 2147; }
 9296                        	
 9297                        		.dbg	line,	"include\routines_LEVELS.c", 2149; else
 9298                        		__bra		.LL383
         01:D356  80 20      			bra	.LL383
 9299    01:D358             	.LL382:
 9300                        	
 9301                        		.dbg	line,	"include\routines_LEVELS.c", 2150; {
 9302                        	
 9303                        		.dbg	line,	"include\routines_LEVELS.c", 2151; sgx_map_pxl_y -= (i - 1);
 9304                        		__ld.um		__update_PLAYER_end - 4  /* i */
         01:D358  AD 09 23   			lda	__update_PLAYER_end - 4
         01:D35B  C2         			cly
 9305                        		__sub.wi	1
         01:D35C  38         			sec
         01:D35D  E9 01      			sbc.l	#1
         01:D35F  B0 01      			bcs	!+
         01:D361  88         			dey
         01:D362             	!:
 9306                        		__isub_st.wmq	_sgx_map_pxl_y
         01:D362  38         			sec
         01:D363  49 FF      			eor	#$FF
         01:D365  6D 91 26   			adc.l	_sgx_map_pxl_y
         01:D368  8D 91 26   			sta.l	_sgx_map_pxl_y
         01:D36B  98         			tya
         01:D36C  49 FF      			eor	#$FF
         01:D36E  6D 92 26   			adc.h	_sgx_map_pxl_y
         01:D371  8D 92 26   			sta.h	_sgx_map_pxl_y
 9307                        	
 9308                        		.dbg	line,	"include\routines_LEVELS.c", 2152; }
 9309    01:D374             	.LL383	.alias		.LL380
 9310                        	
 9311                        		.dbg	line,	"include\routines_LEVELS.c", 2154; break;
 9312                        		__bra		.LL380
         01:D374  80 02      			bra	.LL380
 9313                        	
 9314                        		.dbg	line,	"include\routines_LEVELS.c", 2155; }
 9315                        	
 9316                        		.dbg	line,	"include\routines_LEVELS.c", 2156; }
 9317    01:D376             	.LL381	.alias		.LL378
 9318                        		__bra		.LL378
         01:D376  80 83      			bra	.LL378
 9319    01:D378             	.LL380:
 9320                        	
 9321                        		.dbg	line,	"include\routines_LEVELS.c", 2158; // SET PLAYER SPRITE NEW POSITION //
 9322                        	
 9323                        		.dbg	line,	"include\routines_LEVELS.c", 2159; spr_y(player_pos_y);
 9324                        		__ld.wm		_player_pos_y
         01:D378  AD D5 24   			lda.l	_player_pos_y
         01:D37B  AC D6 24   			ldy.h	_player_pos_y
 9325                        		__call		_spr_y.1
         01:D37E  20 19 E8   			call	_spr_y.1
 9326                        	
 9327                        		.dbg	line,	"include\routines_LEVELS.c", 2161; player_counter_anim = 1;
 9328                        		__st.umiq	1, _player_counter_anim
         01:D381  A9 01      			lda.l	#1
         01:D383  8D 19 23   			sta	_player_counter_anim
 9329                        	
 9330                        		.dbg	line,	"include\routines_LEVELS.c", 2162; player_index_jump = 0;
 9331                        		__st.umiq	0, _player_index_jump
         01:D386  9C 1A 23   			stz	_player_index_jump
 9332                        	
 9333                        		.dbg	line,	"include\routines_LEVELS.c", 2163; jump_ladder = FALSE;
 9334                        		__st.umiq	0, _jump_ladder
         01:D389  9C 1F 23   			stz	_jump_ladder
 9335                        	
 9336                        		.dbg	line,	"include\routines_LEVELS.c", 2164; jump_max_index = 34;
 9337                        		__st.umiq	34, _jump_max_index
         01:D38C  A9 22      			lda.l	#34
         01:D38E  8D 20 23   			sta	_jump_max_index
 9338                        	
 9339                        		.dbg	line,	"include\routines_LEVELS.c", 2165; player_state = STATE_IDLE;
 9340                        		__st.umiq	0, _player_state
         01:D391  9C 16 23   			stz	_player_state
 9341                        	
 9342                        		.dbg	line,	"include\routines_LEVELS.c", 2166; return;
 9343                        		__bra		.LL216
         01:D394  4C 71 DD   			bra	.LL216
 9344                        	
 9345                        		.dbg	line,	"include\routines_LEVELS.c", 2167; }
 9346                        	
 9347                        		.dbg	line,	"include\routines_LEVELS.c", 2168; }
 9348    01:D397             	.LL376:
 9349    01:D397             	.LL375:
 9350                        	
 9351                        		.dbg	line,	"include\routines_LEVELS.c", 2169; }
 9352                        	
 9353                        		.dbg	line,	"include\routines_LEVELS.c", 2174; //--------------------------------------------------------------------------------------//
 9354                        	
 9355                        		.dbg	line,	"include\routines_LEVELS.c", 2175; //                                   LADDER COLLISION                                   //
 9356                        	
 9357                        		.dbg	line,	"include\routines_LEVELS.c", 2176; //--------------------------------------------------------------------------------------//
 9358                        	
 9359                        		.dbg	line,	"include\routines_LEVELS.c", 2178; if(player_index_jump > 4)
 9360    01:D397             	.LL366:
 9361                        		__ld.umq	_player_index_jump
         01:D397  AD 1A 23   			lda	_player_index_jump
 9362                        		__ugt_b.uiq	4
         01:D39A  18         			clc			; Subtract integer+1 from A.
         01:D39B  E9 04      			sbc	#4		; CS if A > integer.
 9363                        		__bfalse	.LL384
         01:D39D  B0 03 4C 32			bcc	.LL384
         01:D3A1  D4          
 9364                        	
 9365                        		.dbg	line,	"include\routines_LEVELS.c", 2179; {
 9366                        	
 9367                        		.dbg	line,	"include\routines_LEVELS.c", 2180; check_BG( 16 , 16 );
 9368                        		__ld.wi		16
         01:D3A2  A9 10      			lda.l	#16
         01:D3A4  C2         			cly
 9369                        		__pusharg.wr
         01:D3A5  A6 8D      			ldx	<__sp
         01:D3A7  CA         			dex
         01:D3A8  CA         			dex
         01:D3A9  95 08      			sta.l	<__stack, x
         01:D3AB  94 09      			sty.h	<__stack, x
         01:D3AD  86 8D      			stx	<__sp
 9370                        		__ld.wi		16
         01:D3AF  A9 10      			lda.l	#16
         01:D3B1  C2         			cly
 9371                        		__pusharg.wr
         01:D3B2  A6 8D      			ldx	<__sp
         01:D3B4  CA         			dex
         01:D3B5  CA         			dex
         01:D3B6  95 08      			sta.l	<__stack, x
         01:D3B8  94 09      			sty.h	<__stack, x
         01:D3BA  86 8D      			stx	<__sp
 9372                        		__call		_check_BG
         01:D3BC  20 6D FF   			call	_check_BG
 9373                        	
 9374                        		.dbg	line,	"include\routines_LEVELS.c", 2182; if(map_blk_flag == TILE_LADDER)
 9375                        		__ld.umq	_map_blk_flag
         01:D3BF  AD B0 2B   			lda	_map_blk_flag
 9376                        		__equ_b.uiq	2
         01:D3C2  C9 02      			cmp	#2
         01:D3C4  F0 01      			beq	!+
         01:D3C6  18         			clc
         01:D3C7             	!:
 9377                        		__bfalse	.LL385
         01:D3C7  90 69      			bcc	.LL385
 9378                        	
 9379                        		.dbg	line,	"include\routines_LEVELS.c", 2183; {
 9380                        	
 9381                        		.dbg	line,	"include\routines_LEVELS.c", 2184; // CAMERA GOES 8 PX BACKWARD //
 9382                        	
 9383                        		.dbg	line,	"include\routines_LEVELS.c", 2185; sgx_map_pxl_x = ( (sgx_map_pxl_x >> 3) << 3 );
 9384                        		__ld.wm		_sgx_map_pxl_x
         01:D3C9  AD 8F 26   			lda.l	_sgx_map_pxl_x
         01:D3CC  AC 90 26   			ldy.h	_sgx_map_pxl_x
 9385                        		__lsr.wi	3
         01:D3CF  84 00      			sty	__temp
         01:D3D1  20 3A E2   			jsr	lsrw3
 9386                        		__asl.wi	3
         01:D3D4  84 00      			sty	__temp
         01:D3D6  20 D7 E1   			jsr	aslw3
 9387                        		__st.wmq	_sgx_map_pxl_x
         01:D3D9  8D 8F 26   			sta.l	_sgx_map_pxl_x
         01:D3DC  8C 90 26   			sty.h	_sgx_map_pxl_x
 9388                        	
 9389                        		.dbg	line,	"include\routines_LEVELS.c", 2187; // SO WE UPDATE THE MAP //
 9390                        	
 9391                        		.dbg	line,	"include\routines_LEVELS.c", 2188; sgx_scroll_map();
 9392                        		__call		_sgx_scroll_map
         01:D3DF  20 81 FF   			call	_sgx_scroll_map
 9393                        	
 9394                        		.dbg	line,	"include\routines_LEVELS.c", 2190; // CHECK IF THE PLAYER STANDS RIGHT TO THE LADDER //
 9395                        	
 9396                        		.dbg	line,	"include\routines_LEVELS.c", 2191; check_BG( 31 , 16 );
 9397                        		__ld.wi		31
         01:D3E2  A9 1F      			lda.l	#31
         01:D3E4  C2         			cly
 9398                        		__pusharg.wr
         01:D3E5  A6 8D      			ldx	<__sp
         01:D3E7  CA         			dex
         01:D3E8  CA         			dex
         01:D3E9  95 08      			sta.l	<__stack, x
         01:D3EB  94 09      			sty.h	<__stack, x
         01:D3ED  86 8D      			stx	<__sp
 9399                        		__ld.wi		16
         01:D3EF  A9 10      			lda.l	#16
         01:D3F1  C2         			cly
 9400                        		__pusharg.wr
         01:D3F2  A6 8D      			ldx	<__sp
         01:D3F4  CA         			dex
         01:D3F5  CA         			dex
         01:D3F6  95 08      			sta.l	<__stack, x
         01:D3F8  94 09      			sty.h	<__stack, x
         01:D3FA  86 8D      			stx	<__sp
 9401                        		__call		_check_BG
         01:D3FC  20 6D FF   			call	_check_BG
 9402                        	
 9403                        		.dbg	line,	"include\routines_LEVELS.c", 2193; if(map_blk_flag == TILE_LADDER)
 9404                        		__ld.umq	_map_blk_flag
         01:D3FF  AD B0 2B   			lda	_map_blk_flag
 9405                        		__equ_b.uiq	2
         01:D402  C9 02      			cmp	#2
         01:D404  F0 01      			beq	!+
         01:D406  18         			clc
         01:D407             	!:
 9406                        		__bfalse	.LL386
         01:D407  90 0E      			bcc	.LL386
 9407                        	
 9408                        		.dbg	line,	"include\routines_LEVELS.c", 2194; {
 9409                        	
 9410                        		.dbg	line,	"include\routines_LEVELS.c", 2195; sgx_map_pxl_x += 8;
 9411                        		__add_st.wmiq	8, _sgx_map_pxl_x
         01:D409  18         			clc
         01:D40A  AD 8F 26   			lda.l	_sgx_map_pxl_x
         01:D40D  69 08      			adc.l	#8
         01:D40F  8D 8F 26   			sta.l	_sgx_map_pxl_x
         01:D412  90 03      			bcc	!+
         01:D414  EE 90 26   			inc.h	_sgx_map_pxl_x
         01:D417             	!:
 9412                        	
 9413                        		.dbg	line,	"include\routines_LEVELS.c", 2196; }
 9414                        	
 9415                        		.dbg	line,	"include\routines_LEVELS.c", 2198; spr_pattern(PLAYER_HANG_VRAM_ADR);
 9416    01:D417             	.LL386:
 9417                        		__ld.wi		7936
         01:D417  62         			cla
         01:D418  A0 1F      			ldy.h	#7936
 9418                        		__call		_spr_pattern.1
         01:D41A  20 26 E8   			call	_spr_pattern.1
 9419                        	
 9420                        		.dbg	line,	"include\routines_LEVELS.c", 2199; player_counter_anim = 0;
 9421                        		__st.umiq	0, _player_counter_anim
         01:D41D  9C 19 23   			stz	_player_counter_anim
 9422                        	
 9423                        		.dbg	line,	"include\routines_LEVELS.c", 2200; player_index_jump = 0;
 9424                        		__st.umiq	0, _player_index_jump
         01:D420  9C 1A 23   			stz	_player_index_jump
 9425                        	
 9426                        		.dbg	line,	"include\routines_LEVELS.c", 2201; jump_ladder = TRUE;
 9427                        		__st.umiq	1, _jump_ladder
         01:D423  A9 01      			lda.l	#1
         01:D425  8D 1F 23   			sta	_jump_ladder
 9428                        	
 9429                        		.dbg	line,	"include\routines_LEVELS.c", 2202; jump_max_index = 29;
 9430                        		__st.umiq	29, _jump_max_index
         01:D428  A9 1D      			lda.l	#29
         01:D42A  8D 20 23   			sta	_jump_max_index
 9431                        	
 9432                        		.dbg	line,	"include\routines_LEVELS.c", 2203; player_state = STATE_HANG;
 9433                        		__st.umiq	10, _player_state
         01:D42D  A9 0A      			lda.l	#10
         01:D42F  8D 16 23   			sta	_player_state
 9434                        	
 9435                        		.dbg	line,	"include\routines_LEVELS.c", 2204; }
 9436                        	
 9437                        		.dbg	line,	"include\routines_LEVELS.c", 2205; }
 9438    01:D432             	.LL385:
 9439                        	
 9440                        		.dbg	line,	"include\routines_LEVELS.c", 2208; // SET PLAYER SPRITE NEW POSITION //
 9441                        	
 9442                        		.dbg	line,	"include\routines_LEVELS.c", 2209; spr_y(player_pos_y);
 9443    01:D432             	.LL384:
 9444                        		__ld.wm		_player_pos_y
         01:D432  AD D5 24   			lda.l	_player_pos_y
         01:D435  AC D6 24   			ldy.h	_player_pos_y
 9445                        		__call		_spr_y.1
         01:D438  20 19 E8   			call	_spr_y.1
 9446                        	
 9447                        		.dbg	line,	"include\routines_LEVELS.c", 2211; spr_set(weapon_id);
 9448                        		__ld.umq	_weapon_id
         01:D43B  AD 23 23   			lda	_weapon_id
 9449                        		__call		_spr_set.1
         01:D43E  20 DD E7   			call	_spr_set.1
 9450                        	
 9451                        		.dbg	line,	"include\routines_LEVELS.c", 2212; spr_y(player_pos_y+8);
 9452                        		__ld.wm		_player_pos_y
         01:D441  AD D5 24   			lda.l	_player_pos_y
         01:D444  AC D6 24   			ldy.h	_player_pos_y
 9453                        		__add.wi	8
         01:D447  18         			clc
         01:D448  69 08      			adc.l	#8
         01:D44A  90 01      			bcc	!+
         01:D44C  C8         			iny
         01:D44D             	!:
 9454                        		__call		_spr_y.1
         01:D44D  20 19 E8   			call	_spr_y.1
 9455                        	
 9456                        		.dbg	line,	"include\routines_LEVELS.c", 2213; }
 9457                        	
 9458                        		.dbg	line,	"include\routines_LEVELS.c", 2216; else if(player_state == STATE_CROUCH)
 9459                        		__bra		.LL387
         01:D450  4C 71 DD   			bra	.LL387
 9460    01:D453             	.LL351:
 9461                        		__ld.umq	_player_state
         01:D453  AD 16 23   			lda	_player_state
 9462                        		__equ_b.uiq	7
         01:D456  C9 07      			cmp	#7
         01:D458  F0 01      			beq	!+
         01:D45A  18         			clc
         01:D45B             	!:
 9463                        		__bfalse	.LL388
         01:D45B  90 64      			bcc	.LL388
 9464                        	
 9465                        		.dbg	line,	"include\routines_LEVELS.c", 2217; {
 9466                        	
 9467                        		.dbg	line,	"include\routines_LEVELS.c", 2218; if(player_counter_anim == 1)
 9468                        		__ld.umq	_player_counter_anim
         01:D45D  AD 19 23   			lda	_player_counter_anim
 9469                        		__equ_b.uiq	1
         01:D460  C9 01      			cmp	#1
         01:D462  F0 01      			beq	!+
         01:D464  18         			clc
         01:D465             	!:
 9470                        		__bfalse	.LL389
         01:D465  90 54      			bcc	.LL389
 9471                        	
 9472                        		.dbg	line,	"include\routines_LEVELS.c", 2219; {
 9473                        	
 9474                        		.dbg	line,	"include\routines_LEVELS.c", 2220; spr_set(player_id);
 9475                        		__ld.umq	_player_id
         01:D467  AD 15 23   			lda	_player_id
 9476                        		__call		_spr_set.1
         01:D46A  20 DD E7   			call	_spr_set.1
 9477                        	
 9478                        		.dbg	line,	"include\routines_LEVELS.c", 2221; spr_pattern(PLAYER_CROUCH_VRAM_ADR);
 9479                        		__ld.wi		7680
         01:D46D  62         			cla
         01:D46E  A0 1E      			ldy.h	#7680
 9480                        		__call		_spr_pattern.1
         01:D470  20 26 E8   			call	_spr_pattern.1
 9481                        	
 9482                        		.dbg	line,	"include\routines_LEVELS.c", 2223; spr_set(weapon_id);
 9483                        		__ld.umq	_weapon_id
         01:D473  AD 23 23   			lda	_weapon_id
 9484                        		__call		_spr_set.1
         01:D476  20 DD E7   			call	_spr_set.1
 9485                        	
 9486                        		.dbg	line,	"include\routines_LEVELS.c", 2224; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
 9487                        		__ld.wi		5184
         01:D479  A9 40      			lda.l	#5184
         01:D47B  A0 14      			ldy.h	#5184
 9488                        		__call		_spr_pattern.1
         01:D47D  20 26 E8   			call	_spr_pattern.1
 9489                        	
 9490                        		.dbg	line,	"include\routines_LEVELS.c", 2225; 
 9491                        	
 9492                        		.dbg	line,	"include\routines_LEVELS.c", 2226; if(player_axis == AXIS_RIGHT)
 9493                        		__not.um	_player_axis
         01:D480  AD 17 23   			lda	_player_axis
         01:D483  18         			clc
         01:D484  D0 01      			bne	!+
         01:D486  38         			sec
         01:D487             	!:
 9494                        		__bfalse	.LL390
         01:D487  90 11      			bcc	.LL390
 9495                        	
 9496                        		.dbg	line,	"include\routines_LEVELS.c", 2227; {
 9497                        	
 9498                        		.dbg	line,	"include\routines_LEVELS.c", 2228; spr_x(player_pos_x-1);
 9499                        		__ld.wm		_player_pos_x
         01:D489  AD D3 24   			lda.l	_player_pos_x
         01:D48C  AC D4 24   			ldy.h	_player_pos_x
 9500                        		__sub.wi	1
         01:D48F  38         			sec
         01:D490  E9 01      			sbc.l	#1
         01:D492  B0 01      			bcs	!+
         01:D494  88         			dey
         01:D495             	!:
 9501                        		__call		_spr_x.1
         01:D495  20 0A E8   			call	_spr_x.1
 9502                        	
 9503                        		.dbg	line,	"include\routines_LEVELS.c", 2229; }
 9504                        	
 9505                        		.dbg	line,	"include\routines_LEVELS.c", 2231; else
 9506                        		__bra		.LL391
         01:D498  80 0F      			bra	.LL391
 9507    01:D49A             	.LL390:
 9508                        	
 9509                        		.dbg	line,	"include\routines_LEVELS.c", 2232; {
 9510                        	
 9511                        		.dbg	line,	"include\routines_LEVELS.c", 2233; spr_x(player_pos_x+17);
 9512                        		__ld.wm		_player_pos_x
         01:D49A  AD D3 24   			lda.l	_player_pos_x
         01:D49D  AC D4 24   			ldy.h	_player_pos_x
 9513                        		__add.wi	17
         01:D4A0  18         			clc
         01:D4A1  69 11      			adc.l	#17
         01:D4A3  90 01      			bcc	!+
         01:D4A5  C8         			iny
         01:D4A6             	!:
 9514                        		__call		_spr_x.1
         01:D4A6  20 0A E8   			call	_spr_x.1
 9515                        	
 9516                        		.dbg	line,	"include\routines_LEVELS.c", 2234; }
 9517    01:D4A9             	.LL391:
 9518                        	
 9519                        		.dbg	line,	"include\routines_LEVELS.c", 2236; spr_y(player_pos_y+18);
 9520                        		__ld.wm		_player_pos_y
         01:D4A9  AD D5 24   			lda.l	_player_pos_y
         01:D4AC  AC D6 24   			ldy.h	_player_pos_y
 9521                        		__add.wi	18
         01:D4AF  18         			clc
         01:D4B0  69 12      			adc.l	#18
         01:D4B2  90 01      			bcc	!+
         01:D4B4  C8         			iny
         01:D4B5             	!:
 9522                        		__call		_spr_y.1
         01:D4B5  20 19 E8   			call	_spr_y.1
 9523                        	
 9524                        		.dbg	line,	"include\routines_LEVELS.c", 2237; 
 9525                        	
 9526                        		.dbg	line,	"include\routines_LEVELS.c", 2238; player_counter_anim = 0;
 9527                        		__st.umiq	0, _player_counter_anim
         01:D4B8  9C 19 23   			stz	_player_counter_anim
 9528                        	
 9529                        		.dbg	line,	"include\routines_LEVELS.c", 2239; }
 9530                        	
 9531                        		.dbg	line,	"include\routines_LEVELS.c", 2241; recenter_CAMERA();
 9532    01:D4BB             	.LL389:
 9533                        		__call		_recenter_CAMERA
         01:D4BB  20 63 FF   			call	_recenter_CAMERA
 9534                        	
 9535                        		.dbg	line,	"include\routines_LEVELS.c", 2242; }
 9536                        	
 9537                        		.dbg	line,	"include\routines_LEVELS.c", 2245; else if(player_state == STATE_CROUCH_ATTACK)
 9538                        		__bra		.LL392
         01:D4BE  4C 71 DD   			bra	.LL392
 9539    01:D4C1             	.LL388:
 9540                        		__ld.umq	_player_state
         01:D4C1  AD 16 23   			lda	_player_state
 9541                        		__equ_b.uiq	8
         01:D4C4  C9 08      			cmp	#8
         01:D4C6  F0 01      			beq	!+
         01:D4C8  18         			clc
         01:D4C9             	!:
 9542                        		__bfalse	.LL393
         01:D4C9  B0 03 4C 8B			bcc	.LL393
         01:D4CD  D7          
 9543                        	
 9544                        		.dbg	line,	"include\routines_LEVELS.c", 2246; {
 9545                        	
 9546                        		.dbg	line,	"include\routines_LEVELS.c", 2247; if(player_counter_attack == 0)
 9547                        		__not.um	_player_counter_attack
         01:D4CE  AD 1C 23   			lda	_player_counter_attack
         01:D4D1  18         			clc
         01:D4D2  D0 01      			bne	!+
         01:D4D4  38         			sec
         01:D4D5             	!:
 9548                        		__bfalse	.LL394
         01:D4D5  90 4D      			bcc	.LL394
 9549                        	
 9550                        		.dbg	line,	"include\routines_LEVELS.c", 2248; {
 9551                        	
 9552                        		.dbg	line,	"include\routines_LEVELS.c", 2249; spr_set(player_id);
 9553                        		__ld.umq	_player_id
         01:D4D7  AD 15 23   			lda	_player_id
 9554                        		__call		_spr_set.1
         01:D4DA  20 DD E7   			call	_spr_set.1
 9555                        	
 9556                        		.dbg	line,	"include\routines_LEVELS.c", 2250; spr_pattern(PLAYER_CROUCH_ATTACK_1_VRAM_ADR);
 9557                        		__ld.wi		10496
         01:D4DD  62         			cla
         01:D4DE  A0 29      			ldy.h	#10496
 9558                        		__call		_spr_pattern.1
         01:D4E0  20 26 E8   			call	_spr_pattern.1
 9559                        	
 9560                        		.dbg	line,	"include\routines_LEVELS.c", 2252; spr_set(weapon_id);
 9561                        		__ld.umq	_weapon_id
         01:D4E3  AD 23 23   			lda	_weapon_id
 9562                        		__call		_spr_set.1
         01:D4E6  20 DD E7   			call	_spr_set.1
 9563                        	
 9564                        		.dbg	line,	"include\routines_LEVELS.c", 2253; spr_pattern(WEAPON_ATTACK_1_VRAM_ADRESS);
 9565                        		__ld.wi		5376
         01:D4E9  62         			cla
         01:D4EA  A0 15      			ldy.h	#5376
 9566                        		__call		_spr_pattern.1
         01:D4EC  20 26 E8   			call	_spr_pattern.1
 9567                        	
 9568                        		.dbg	line,	"include\routines_LEVELS.c", 2255; if(player_axis == AXIS_RIGHT)
 9569                        		__not.um	_player_axis
         01:D4EF  AD 17 23   			lda	_player_axis
         01:D4F2  18         			clc
         01:D4F3  D0 01      			bne	!+
         01:D4F5  38         			sec
         01:D4F6             	!:
 9570                        		__bfalse	.LL395
         01:D4F6  90 11      			bcc	.LL395
 9571                        	
 9572                        		.dbg	line,	"include\routines_LEVELS.c", 2256; {
 9573                        	
 9574                        		.dbg	line,	"include\routines_LEVELS.c", 2257; spr_x(player_pos_x-16);
 9575                        		__ld.wm		_player_pos_x
         01:D4F8  AD D3 24   			lda.l	_player_pos_x
         01:D4FB  AC D4 24   			ldy.h	_player_pos_x
 9576                        		__sub.wi	16
         01:D4FE  38         			sec
         01:D4FF  E9 10      			sbc.l	#16
         01:D501  B0 01      			bcs	!+
         01:D503  88         			dey
         01:D504             	!:
 9577                        		__call		_spr_x.1
         01:D504  20 0A E8   			call	_spr_x.1
 9578                        	
 9579                        		.dbg	line,	"include\routines_LEVELS.c", 2258; }
 9580                        	
 9581                        		.dbg	line,	"include\routines_LEVELS.c", 2260; else
 9582                        		__bra		.LL396
         01:D507  80 0F      			bra	.LL396
 9583    01:D509             	.LL395:
 9584                        	
 9585                        		.dbg	line,	"include\routines_LEVELS.c", 2261; {
 9586                        	
 9587                        		.dbg	line,	"include\routines_LEVELS.c", 2262; spr_x(player_pos_x+32);
 9588                        		__ld.wm		_player_pos_x
         01:D509  AD D3 24   			lda.l	_player_pos_x
         01:D50C  AC D4 24   			ldy.h	_player_pos_x
 9589                        		__add.wi	32
         01:D50F  18         			clc
         01:D510  69 20      			adc.l	#32
         01:D512  90 01      			bcc	!+
         01:D514  C8         			iny
         01:D515             	!:
 9590                        		__call		_spr_x.1
         01:D515  20 0A E8   			call	_spr_x.1
 9591                        	
 9592                        		.dbg	line,	"include\routines_LEVELS.c", 2263; }
 9593    01:D518             	.LL396:
 9594                        	
 9595                        		.dbg	line,	"include\routines_LEVELS.c", 2265; spr_y(player_pos_y);
 9596                        		__ld.wm		_player_pos_y
         01:D518  AD D5 24   			lda.l	_player_pos_y
         01:D51B  AC D6 24   			ldy.h	_player_pos_y
 9597                        		__call		_spr_y.1
         01:D51E  20 19 E8   			call	_spr_y.1
 9598                        	
 9599                        		.dbg	line,	"include\routines_LEVELS.c", 2266; }
 9600                        	
 9601                        		.dbg	line,	"include\routines_LEVELS.c", 2268; else if(player_counter_attack == 6)
 9602                        		__bra		.LL397
         01:D521  4C 85 D7   			bra	.LL397
 9603    01:D524             	.LL394:
 9604                        		__ld.umq	_player_counter_attack
         01:D524  AD 1C 23   			lda	_player_counter_attack
 9605                        		__equ_b.uiq	6
         01:D527  C9 06      			cmp	#6
         01:D529  F0 01      			beq	!+
         01:D52B  18         			clc
         01:D52C             	!:
 9606                        		__bfalse	.LL398
         01:D52C  90 54      			bcc	.LL398
 9607                        	
 9608                        		.dbg	line,	"include\routines_LEVELS.c", 2269; {
 9609                        	
 9610                        		.dbg	line,	"include\routines_LEVELS.c", 2270; spr_set(player_id);
 9611                        		__ld.umq	_player_id
         01:D52E  AD 15 23   			lda	_player_id
 9612                        		__call		_spr_set.1
         01:D531  20 DD E7   			call	_spr_set.1
 9613                        	
 9614                        		.dbg	line,	"include\routines_LEVELS.c", 2271; spr_pattern(PLAYER_CROUCH_ATTACK_2_VRAM_ADR);
 9615                        		__ld.wi		10752
         01:D534  62         			cla
         01:D535  A0 2A      			ldy.h	#10752
 9616                        		__call		_spr_pattern.1
         01:D537  20 26 E8   			call	_spr_pattern.1
 9617                        	
 9618                        		.dbg	line,	"include\routines_LEVELS.c", 2273; spr_set(weapon_id);
 9619                        		__ld.umq	_weapon_id
         01:D53A  AD 23 23   			lda	_weapon_id
 9620                        		__call		_spr_set.1
         01:D53D  20 DD E7   			call	_spr_set.1
 9621                        	
 9622                        		.dbg	line,	"include\routines_LEVELS.c", 2274; spr_pattern(WEAPON_ATTACK_2_VRAM_ADRESS);
 9623                        		__ld.wi		5440
         01:D540  A9 40      			lda.l	#5440
         01:D542  A0 15      			ldy.h	#5440
 9624                        		__call		_spr_pattern.1
         01:D544  20 26 E8   			call	_spr_pattern.1
 9625                        	
 9626                        		.dbg	line,	"include\routines_LEVELS.c", 2276; if(player_axis == AXIS_RIGHT)
 9627                        		__not.um	_player_axis
         01:D547  AD 17 23   			lda	_player_axis
         01:D54A  18         			clc
         01:D54B  D0 01      			bne	!+
         01:D54D  38         			sec
         01:D54E             	!:
 9628                        		__bfalse	.LL399
         01:D54E  90 11      			bcc	.LL399
 9629                        	
 9630                        		.dbg	line,	"include\routines_LEVELS.c", 2277; {
 9631                        	
 9632                        		.dbg	line,	"include\routines_LEVELS.c", 2278; spr_x(player_pos_x+32);
 9633                        		__ld.wm		_player_pos_x
         01:D550  AD D3 24   			lda.l	_player_pos_x
         01:D553  AC D4 24   			ldy.h	_player_pos_x
 9634                        		__add.wi	32
         01:D556  18         			clc
         01:D557  69 20      			adc.l	#32
         01:D559  90 01      			bcc	!+
         01:D55B  C8         			iny
         01:D55C             	!:
 9635                        		__call		_spr_x.1
         01:D55C  20 0A E8   			call	_spr_x.1
 9636                        	
 9637                        		.dbg	line,	"include\routines_LEVELS.c", 2279; 
 9638                        	
 9639                        		.dbg	line,	"include\routines_LEVELS.c", 2280; }
 9640                        	
 9641                        		.dbg	line,	"include\routines_LEVELS.c", 2281; 
 9642                        	
 9643                        		.dbg	line,	"include\routines_LEVELS.c", 2282; else
 9644                        		__bra		.LL400
         01:D55F  80 0F      			bra	.LL400
 9645    01:D561             	.LL399:
 9646                        	
 9647                        		.dbg	line,	"include\routines_LEVELS.c", 2283; {
 9648                        	
 9649                        		.dbg	line,	"include\routines_LEVELS.c", 2284; spr_x(player_pos_x-16);
 9650                        		__ld.wm		_player_pos_x
         01:D561  AD D3 24   			lda.l	_player_pos_x
         01:D564  AC D4 24   			ldy.h	_player_pos_x
 9651                        		__sub.wi	16
         01:D567  38         			sec
         01:D568  E9 10      			sbc.l	#16
         01:D56A  B0 01      			bcs	!+
         01:D56C  88         			dey
         01:D56D             	!:
 9652                        		__call		_spr_x.1
         01:D56D  20 0A E8   			call	_spr_x.1
 9653                        	
 9654                        		.dbg	line,	"include\routines_LEVELS.c", 2285; }
 9655    01:D570             	.LL400:
 9656                        	
 9657                        		.dbg	line,	"include\routines_LEVELS.c", 2287; spr_y(player_pos_y+14);
 9658                        		__ld.wm		_player_pos_y
         01:D570  AD D5 24   			lda.l	_player_pos_y
         01:D573  AC D6 24   			ldy.h	_player_pos_y
 9659                        		__add.wi	14
         01:D576  18         			clc
         01:D577  69 0E      			adc.l	#14
         01:D579  90 01      			bcc	!+
         01:D57B  C8         			iny
         01:D57C             	!:
 9660                        		__call		_spr_y.1
         01:D57C  20 19 E8   			call	_spr_y.1
 9661                        	
 9662                        		.dbg	line,	"include\routines_LEVELS.c", 2288; }
 9663                        	
 9664                        		.dbg	line,	"include\routines_LEVELS.c", 2290; else if(player_counter_attack == 7)
 9665                        		__bra		.LL401
         01:D57F  4C 85 D7   			bra	.LL401
 9666    01:D582             	.LL398:
 9667                        		__ld.umq	_player_counter_attack
         01:D582  AD 1C 23   			lda	_player_counter_attack
 9668                        		__equ_b.uiq	7
         01:D585  C9 07      			cmp	#7
         01:D587  F0 01      			beq	!+
         01:D589  18         			clc
         01:D58A             	!:
 9669                        		__bfalse	.LL402
         01:D58A  90 6C      			bcc	.LL402
 9670                        	
 9671                        		.dbg	line,	"include\routines_LEVELS.c", 2291; {
 9672                        	
 9673                        		.dbg	line,	"include\routines_LEVELS.c", 2292; spr_set(chain_id);
 9674                        		__ld.umq	_chain_id
         01:D58C  AD 22 23   			lda	_chain_id
 9675                        		__call		_spr_set.1
         01:D58F  20 DD E7   			call	_spr_set.1
 9676                        	
 9677                        		.dbg	line,	"include\routines_LEVELS.c", 2293; spr_y(player_pos_y+8);
 9678                        		__ld.wm		_player_pos_y
         01:D592  AD D5 24   			lda.l	_player_pos_y
         01:D595  AC D6 24   			ldy.h	_player_pos_y
 9679                        		__add.wi	8
         01:D598  18         			clc
         01:D599  69 08      			adc.l	#8
         01:D59B  90 01      			bcc	!+
         01:D59D  C8         			iny
         01:D59E             	!:
 9680                        		__call		_spr_y.1
         01:D59E  20 19 E8   			call	_spr_y.1
 9681                        	
 9682                        		.dbg	line,	"include\routines_LEVELS.c", 2295; if(player_axis == AXIS_RIGHT)
 9683                        		__not.um	_player_axis
         01:D5A1  AD 17 23   			lda	_player_axis
         01:D5A4  18         			clc
         01:D5A5  D0 01      			bne	!+
         01:D5A7  38         			sec
         01:D5A8             	!:
 9684                        		__bfalse	.LL403
         01:D5A8  90 27      			bcc	.LL403
 9685                        	
 9686                        		.dbg	line,	"include\routines_LEVELS.c", 2296; {
 9687                        	
 9688                        		.dbg	line,	"include\routines_LEVELS.c", 2297; spr_x(player_pos_x+32);
 9689                        		__ld.wm		_player_pos_x
         01:D5AA  AD D3 24   			lda.l	_player_pos_x
         01:D5AD  AC D4 24   			ldy.h	_player_pos_x
 9690                        		__add.wi	32
         01:D5B0  18         			clc
         01:D5B1  69 20      			adc.l	#32
         01:D5B3  90 01      			bcc	!+
         01:D5B5  C8         			iny
         01:D5B6             	!:
 9691                        		__call		_spr_x.1
         01:D5B6  20 0A E8   			call	_spr_x.1
 9692                        	
 9693                        		.dbg	line,	"include\routines_LEVELS.c", 2299; spr_set(weapon_id);
 9694                        		__ld.umq	_weapon_id
         01:D5B9  AD 23 23   			lda	_weapon_id
 9695                        		__call		_spr_set.1
         01:D5BC  20 DD E7   			call	_spr_set.1
 9696                        	
 9697                        		.dbg	line,	"include\routines_LEVELS.c", 2300; spr_x(player_pos_x+48);
 9698                        		__ld.wm		_player_pos_x
         01:D5BF  AD D3 24   			lda.l	_player_pos_x
         01:D5C2  AC D4 24   			ldy.h	_player_pos_x
 9699                        		__add.wi	48
         01:D5C5  18         			clc
         01:D5C6  69 30      			adc.l	#48
         01:D5C8  90 01      			bcc	!+
         01:D5CA  C8         			iny
         01:D5CB             	!:
 9700                        		__call		_spr_x.1
         01:D5CB  20 0A E8   			call	_spr_x.1
 9701                        	
 9702                        		.dbg	line,	"include\routines_LEVELS.c", 2301; }
 9703                        	
 9704                        		.dbg	line,	"include\routines_LEVELS.c", 2302; 
 9705                        	
 9706                        		.dbg	line,	"include\routines_LEVELS.c", 2303; else
 9707                        		__bra		.LL404
         01:D5CE  4C 85 D7   			bra	.LL404
 9708    01:D5D1             	.LL403:
 9709                        	
 9710                        		.dbg	line,	"include\routines_LEVELS.c", 2304; {
 9711                        	
 9712                        		.dbg	line,	"include\routines_LEVELS.c", 2305; spr_x(player_pos_x-16);
 9713                        		__ld.wm		_player_pos_x
         01:D5D1  AD D3 24   			lda.l	_player_pos_x
         01:D5D4  AC D4 24   			ldy.h	_player_pos_x
 9714                        		__sub.wi	16
         01:D5D7  38         			sec
         01:D5D8  E9 10      			sbc.l	#16
         01:D5DA  B0 01      			bcs	!+
         01:D5DC  88         			dey
         01:D5DD             	!:
 9715                        		__call		_spr_x.1
         01:D5DD  20 0A E8   			call	_spr_x.1
 9716                        	
 9717                        		.dbg	line,	"include\routines_LEVELS.c", 2307; spr_set(weapon_id);
 9718                        		__ld.umq	_weapon_id
         01:D5E0  AD 23 23   			lda	_weapon_id
 9719                        		__call		_spr_set.1
         01:D5E3  20 DD E7   			call	_spr_set.1
 9720                        	
 9721                        		.dbg	line,	"include\routines_LEVELS.c", 2308; spr_x(player_pos_x-32);
 9722                        		__ld.wm		_player_pos_x
         01:D5E6  AD D3 24   			lda.l	_player_pos_x
         01:D5E9  AC D4 24   			ldy.h	_player_pos_x
 9723                        		__sub.wi	32
         01:D5EC  38         			sec
         01:D5ED  E9 20      			sbc.l	#32
         01:D5EF  B0 01      			bcs	!+
         01:D5F1  88         			dey
         01:D5F2             	!:
 9724                        		__call		_spr_x.1
         01:D5F2  20 0A E8   			call	_spr_x.1
 9725                        	
 9726                        		.dbg	line,	"include\routines_LEVELS.c", 2309; }
 9727    01:D5F5             	.LL404	.alias		.LL405
 9728                        	
 9729                        		.dbg	line,	"include\routines_LEVELS.c", 2310; }
 9730                        	
 9731                        		.dbg	line,	"include\routines_LEVELS.c", 2312; else if(player_counter_attack == 8)
 9732                        		__bra		.LL405
         01:D5F5  4C 85 D7   			bra	.LL405
 9733    01:D5F8             	.LL402:
 9734                        		__ld.umq	_player_counter_attack
         01:D5F8  AD 1C 23   			lda	_player_counter_attack
 9735                        		__equ_b.uiq	8
         01:D5FB  C9 08      			cmp	#8
         01:D5FD  F0 01      			beq	!+
         01:D5FF  18         			clc
         01:D600             	!:
 9736                        		__bfalse	.LL406
         01:D600  90 71      			bcc	.LL406
 9737                        	
 9738                        		.dbg	line,	"include\routines_LEVELS.c", 2313; {
 9739                        	
 9740                        		.dbg	line,	"include\routines_LEVELS.c", 2314; spr_set(chain_id+1);
 9741                        		__ld.um		_chain_id
         01:D602  AD 22 23   			lda	_chain_id
         01:D605  C2         			cly
 9742                        		__add.wi	1
         01:D606  1A         			inc	a
         01:D607  D0 01      			bne	!+
         01:D609  C8         			iny
         01:D60A             	!:
 9743                        		__call		_spr_set.1
         01:D60A  20 DD E7   			call	_spr_set.1
 9744                        	
 9745                        		.dbg	line,	"include\routines_LEVELS.c", 2315; spr_y(player_pos_y+8);
 9746                        		__ld.wm		_player_pos_y
         01:D60D  AD D5 24   			lda.l	_player_pos_y
         01:D610  AC D6 24   			ldy.h	_player_pos_y
 9747                        		__add.wi	8
         01:D613  18         			clc
         01:D614  69 08      			adc.l	#8
         01:D616  90 01      			bcc	!+
         01:D618  C8         			iny
         01:D619             	!:
 9748                        		__call		_spr_y.1
         01:D619  20 19 E8   			call	_spr_y.1
 9749                        	
 9750                        		.dbg	line,	"include\routines_LEVELS.c", 2317; if(player_axis == AXIS_RIGHT)
 9751                        		__not.um	_player_axis
         01:D61C  AD 17 23   			lda	_player_axis
         01:D61F  18         			clc
         01:D620  D0 01      			bne	!+
         01:D622  38         			sec
         01:D623             	!:
 9752                        		__bfalse	.LL407
         01:D623  90 27      			bcc	.LL407
 9753                        	
 9754                        		.dbg	line,	"include\routines_LEVELS.c", 2318; {
 9755                        	
 9756                        		.dbg	line,	"include\routines_LEVELS.c", 2319; spr_x(player_pos_x+48);
 9757                        		__ld.wm		_player_pos_x
         01:D625  AD D3 24   			lda.l	_player_pos_x
         01:D628  AC D4 24   			ldy.h	_player_pos_x
 9758                        		__add.wi	48
         01:D62B  18         			clc
         01:D62C  69 30      			adc.l	#48
         01:D62E  90 01      			bcc	!+
         01:D630  C8         			iny
         01:D631             	!:
 9759                        		__call		_spr_x.1
         01:D631  20 0A E8   			call	_spr_x.1
 9760                        	
 9761                        		.dbg	line,	"include\routines_LEVELS.c", 2321; spr_set(weapon_id);
 9762                        		__ld.umq	_weapon_id
         01:D634  AD 23 23   			lda	_weapon_id
 9763                        		__call		_spr_set.1
         01:D637  20 DD E7   			call	_spr_set.1
 9764                        	
 9765                        		.dbg	line,	"include\routines_LEVELS.c", 2322; spr_x(player_pos_x+64);
 9766                        		__ld.wm		_player_pos_x
         01:D63A  AD D3 24   			lda.l	_player_pos_x
         01:D63D  AC D4 24   			ldy.h	_player_pos_x
 9767                        		__add.wi	64
         01:D640  18         			clc
         01:D641  69 40      			adc.l	#64
         01:D643  90 01      			bcc	!+
         01:D645  C8         			iny
         01:D646             	!:
 9768                        		__call		_spr_x.1
         01:D646  20 0A E8   			call	_spr_x.1
 9769                        	
 9770                        		.dbg	line,	"include\routines_LEVELS.c", 2323; }
 9771                        	
 9772                        		.dbg	line,	"include\routines_LEVELS.c", 2324; 
 9773                        	
 9774                        		.dbg	line,	"include\routines_LEVELS.c", 2325; else
 9775                        		__bra		.LL408
         01:D649  4C 85 D7   			bra	.LL408
 9776    01:D64C             	.LL407:
 9777                        	
 9778                        		.dbg	line,	"include\routines_LEVELS.c", 2326; {
 9779                        	
 9780                        		.dbg	line,	"include\routines_LEVELS.c", 2327; spr_x(player_pos_x-32);
 9781                        		__ld.wm		_player_pos_x
         01:D64C  AD D3 24   			lda.l	_player_pos_x
         01:D64F  AC D4 24   			ldy.h	_player_pos_x
 9782                        		__sub.wi	32
         01:D652  38         			sec
         01:D653  E9 20      			sbc.l	#32
         01:D655  B0 01      			bcs	!+
         01:D657  88         			dey
         01:D658             	!:
 9783                        		__call		_spr_x.1
         01:D658  20 0A E8   			call	_spr_x.1
 9784                        	
 9785                        		.dbg	line,	"include\routines_LEVELS.c", 2329; spr_set(weapon_id);
 9786                        		__ld.umq	_weapon_id
         01:D65B  AD 23 23   			lda	_weapon_id
 9787                        		__call		_spr_set.1
         01:D65E  20 DD E7   			call	_spr_set.1
 9788                        	
 9789                        		.dbg	line,	"include\routines_LEVELS.c", 2330; spr_x(player_pos_x-48);
 9790                        		__ld.wm		_player_pos_x
         01:D661  AD D3 24   			lda.l	_player_pos_x
         01:D664  AC D4 24   			ldy.h	_player_pos_x
 9791                        		__sub.wi	48
         01:D667  38         			sec
         01:D668  E9 30      			sbc.l	#48
         01:D66A  B0 01      			bcs	!+
         01:D66C  88         			dey
         01:D66D             	!:
 9792                        		__call		_spr_x.1
         01:D66D  20 0A E8   			call	_spr_x.1
 9793                        	
 9794                        		.dbg	line,	"include\routines_LEVELS.c", 2331; }
 9795    01:D670             	.LL408	.alias		.LL409
 9796                        	
 9797                        		.dbg	line,	"include\routines_LEVELS.c", 2332; }
 9798                        	
 9799                        		.dbg	line,	"include\routines_LEVELS.c", 2334; else if(player_counter_attack == 9)
 9800                        		__bra		.LL409
         01:D670  4C 85 D7   			bra	.LL409
 9801    01:D673             	.LL406:
 9802                        		__ld.umq	_player_counter_attack
         01:D673  AD 1C 23   			lda	_player_counter_attack
 9803                        		__equ_b.uiq	9
         01:D676  C9 09      			cmp	#9
         01:D678  F0 01      			beq	!+
         01:D67A  18         			clc
         01:D67B             	!:
 9804                        		__bfalse	.LL410
         01:D67B  90 73      			bcc	.LL410
 9805                        	
 9806                        		.dbg	line,	"include\routines_LEVELS.c", 2335; {
 9807                        	
 9808                        		.dbg	line,	"include\routines_LEVELS.c", 2336; spr_set(chain_id+2);
 9809                        		__ld.um		_chain_id
         01:D67D  AD 22 23   			lda	_chain_id
         01:D680  C2         			cly
 9810                        		__add.wi	2
         01:D681  18         			clc
         01:D682  69 02      			adc.l	#2
         01:D684  90 01      			bcc	!+
         01:D686  C8         			iny
         01:D687             	!:
 9811                        		__call		_spr_set.1
         01:D687  20 DD E7   			call	_spr_set.1
 9812                        	
 9813                        		.dbg	line,	"include\routines_LEVELS.c", 2337; spr_y(player_pos_y+8);
 9814                        		__ld.wm		_player_pos_y
         01:D68A  AD D5 24   			lda.l	_player_pos_y
         01:D68D  AC D6 24   			ldy.h	_player_pos_y
 9815                        		__add.wi	8
         01:D690  18         			clc
         01:D691  69 08      			adc.l	#8
         01:D693  90 01      			bcc	!+
         01:D695  C8         			iny
         01:D696             	!:
 9816                        		__call		_spr_y.1
         01:D696  20 19 E8   			call	_spr_y.1
 9817                        	
 9818                        		.dbg	line,	"include\routines_LEVELS.c", 2339; if(player_axis == AXIS_RIGHT)
 9819                        		__not.um	_player_axis
         01:D699  AD 17 23   			lda	_player_axis
         01:D69C  18         			clc
         01:D69D  D0 01      			bne	!+
         01:D69F  38         			sec
         01:D6A0             	!:
 9820                        		__bfalse	.LL411
         01:D6A0  90 27      			bcc	.LL411
 9821                        	
 9822                        		.dbg	line,	"include\routines_LEVELS.c", 2340; {
 9823                        	
 9824                        		.dbg	line,	"include\routines_LEVELS.c", 2341; spr_x(player_pos_x+64);
 9825                        		__ld.wm		_player_pos_x
         01:D6A2  AD D3 24   			lda.l	_player_pos_x
         01:D6A5  AC D4 24   			ldy.h	_player_pos_x
 9826                        		__add.wi	64
         01:D6A8  18         			clc
         01:D6A9  69 40      			adc.l	#64
         01:D6AB  90 01      			bcc	!+
         01:D6AD  C8         			iny
         01:D6AE             	!:
 9827                        		__call		_spr_x.1
         01:D6AE  20 0A E8   			call	_spr_x.1
 9828                        	
 9829                        		.dbg	line,	"include\routines_LEVELS.c", 2343; spr_set(weapon_id);
 9830                        		__ld.umq	_weapon_id
         01:D6B1  AD 23 23   			lda	_weapon_id
 9831                        		__call		_spr_set.1
         01:D6B4  20 DD E7   			call	_spr_set.1
 9832                        	
 9833                        		.dbg	line,	"include\routines_LEVELS.c", 2344; spr_x(player_pos_x+80);
 9834                        		__ld.wm		_player_pos_x
         01:D6B7  AD D3 24   			lda.l	_player_pos_x
         01:D6BA  AC D4 24   			ldy.h	_player_pos_x
 9835                        		__add.wi	80
         01:D6BD  18         			clc
         01:D6BE  69 50      			adc.l	#80
         01:D6C0  90 01      			bcc	!+
         01:D6C2  C8         			iny
         01:D6C3             	!:
 9836                        		__call		_spr_x.1
         01:D6C3  20 0A E8   			call	_spr_x.1
 9837                        	
 9838                        		.dbg	line,	"include\routines_LEVELS.c", 2345; }
 9839                        	
 9840                        		.dbg	line,	"include\routines_LEVELS.c", 2346; 
 9841                        	
 9842                        		.dbg	line,	"include\routines_LEVELS.c", 2347; else
 9843                        		__bra		.LL412
         01:D6C6  4C 85 D7   			bra	.LL412
 9844    01:D6C9             	.LL411:
 9845                        	
 9846                        		.dbg	line,	"include\routines_LEVELS.c", 2348; {
 9847                        	
 9848                        		.dbg	line,	"include\routines_LEVELS.c", 2349; spr_x(player_pos_x-48);
 9849                        		__ld.wm		_player_pos_x
         01:D6C9  AD D3 24   			lda.l	_player_pos_x
         01:D6CC  AC D4 24   			ldy.h	_player_pos_x
 9850                        		__sub.wi	48
         01:D6CF  38         			sec
         01:D6D0  E9 30      			sbc.l	#48
         01:D6D2  B0 01      			bcs	!+
         01:D6D4  88         			dey
         01:D6D5             	!:
 9851                        		__call		_spr_x.1
         01:D6D5  20 0A E8   			call	_spr_x.1
 9852                        	
 9853                        		.dbg	line,	"include\routines_LEVELS.c", 2351; spr_set(weapon_id);
 9854                        		__ld.umq	_weapon_id
         01:D6D8  AD 23 23   			lda	_weapon_id
 9855                        		__call		_spr_set.1
         01:D6DB  20 DD E7   			call	_spr_set.1
 9856                        	
 9857                        		.dbg	line,	"include\routines_LEVELS.c", 2352; spr_x(player_pos_x-64);
 9858                        		__ld.wm		_player_pos_x
         01:D6DE  AD D3 24   			lda.l	_player_pos_x
         01:D6E1  AC D4 24   			ldy.h	_player_pos_x
 9859                        		__sub.wi	64
         01:D6E4  38         			sec
         01:D6E5  E9 40      			sbc.l	#64
         01:D6E7  B0 01      			bcs	!+
         01:D6E9  88         			dey
         01:D6EA             	!:
 9860                        		__call		_spr_x.1
         01:D6EA  20 0A E8   			call	_spr_x.1
 9861                        	
 9862                        		.dbg	line,	"include\routines_LEVELS.c", 2353; }
 9863    01:D6ED             	.LL412	.alias		.LL413
 9864                        	
 9865                        		.dbg	line,	"include\routines_LEVELS.c", 2354; }
 9866                        	
 9867                        		.dbg	line,	"include\routines_LEVELS.c", 2356; else if(player_counter_attack == 23)
 9868                        		__bra		.LL413
         01:D6ED  4C 85 D7   			bra	.LL413
 9869    01:D6F0             	.LL410:
 9870                        		__ld.umq	_player_counter_attack
         01:D6F0  AD 1C 23   			lda	_player_counter_attack
 9871                        		__equ_b.uiq	23
         01:D6F3  C9 17      			cmp	#23
         01:D6F5  F0 01      			beq	!+
         01:D6F7  18         			clc
         01:D6F8             	!:
 9872                        		__bfalse	.LL414
         01:D6F8  B0 03 4C 85			bcc	.LL414
         01:D6FC  D7          
 9873                        	
 9874                        		.dbg	line,	"include\routines_LEVELS.c", 2357; {
 9875                        	
 9876                        		.dbg	line,	"include\routines_LEVELS.c", 2358; spr_set(chain_id);
 9877                        		__ld.umq	_chain_id
         01:D6FD  AD 22 23   			lda	_chain_id
 9878                        		__call		_spr_set.1
         01:D700  20 DD E7   			call	_spr_set.1
 9879                        	
 9880                        		.dbg	line,	"include\routines_LEVELS.c", 2359; spr_hide();
 9881                        		__call		_spr_hide
         01:D703  20 F8 E7   			call	_spr_hide
 9882                        	
 9883                        		.dbg	line,	"include\routines_LEVELS.c", 2361; spr_set(chain_id+1);
 9884                        		__ld.um		_chain_id
         01:D706  AD 22 23   			lda	_chain_id
         01:D709  C2         			cly
 9885                        		__add.wi	1
         01:D70A  1A         			inc	a
         01:D70B  D0 01      			bne	!+
         01:D70D  C8         			iny
         01:D70E             	!:
 9886                        		__call		_spr_set.1
         01:D70E  20 DD E7   			call	_spr_set.1
 9887                        	
 9888                        		.dbg	line,	"include\routines_LEVELS.c", 2362; spr_hide();
 9889                        		__call		_spr_hide
         01:D711  20 F8 E7   			call	_spr_hide
 9890                        	
 9891                        		.dbg	line,	"include\routines_LEVELS.c", 2364; spr_set(chain_id+2);
 9892                        		__ld.um		_chain_id
         01:D714  AD 22 23   			lda	_chain_id
         01:D717  C2         			cly
 9893                        		__add.wi	2
         01:D718  18         			clc
         01:D719  69 02      			adc.l	#2
         01:D71B  90 01      			bcc	!+
         01:D71D  C8         			iny
         01:D71E             	!:
 9894                        		__call		_spr_set.1
         01:D71E  20 DD E7   			call	_spr_set.1
 9895                        	
 9896                        		.dbg	line,	"include\routines_LEVELS.c", 2365; spr_hide();
 9897                        		__call		_spr_hide
         01:D721  20 F8 E7   			call	_spr_hide
 9898                        	
 9899                        		.dbg	line,	"include\routines_LEVELS.c", 2367; spr_set(player_id);
 9900                        		__ld.umq	_player_id
         01:D724  AD 15 23   			lda	_player_id
 9901                        		__call		_spr_set.1
         01:D727  20 DD E7   			call	_spr_set.1
 9902                        	
 9903                        		.dbg	line,	"include\routines_LEVELS.c", 2368; spr_pattern(PLAYER_CROUCH_VRAM_ADR);
 9904                        		__ld.wi		7680
         01:D72A  62         			cla
         01:D72B  A0 1E      			ldy.h	#7680
 9905                        		__call		_spr_pattern.1
         01:D72D  20 26 E8   			call	_spr_pattern.1
 9906                        	
 9907                        		.dbg	line,	"include\routines_LEVELS.c", 2370; spr_set(weapon_id);
 9908                        		__ld.umq	_weapon_id
         01:D730  AD 23 23   			lda	_weapon_id
 9909                        		__call		_spr_set.1
         01:D733  20 DD E7   			call	_spr_set.1
 9910                        	
 9911                        		.dbg	line,	"include\routines_LEVELS.c", 2371; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
 9912                        		__ld.wi		5184
         01:D736  A9 40      			lda.l	#5184
         01:D738  A0 14      			ldy.h	#5184
 9913                        		__call		_spr_pattern.1
         01:D73A  20 26 E8   			call	_spr_pattern.1
 9914                        	
 9915                        		.dbg	line,	"include\routines_LEVELS.c", 2372; 
 9916                        	
 9917                        		.dbg	line,	"include\routines_LEVELS.c", 2373; if(player_axis == AXIS_RIGHT)
 9918                        		__not.um	_player_axis
         01:D73D  AD 17 23   			lda	_player_axis
         01:D740  18         			clc
         01:D741  D0 01      			bne	!+
         01:D743  38         			sec
         01:D744             	!:
 9919                        		__bfalse	.LL415
         01:D744  90 11      			bcc	.LL415
 9920                        	
 9921                        		.dbg	line,	"include\routines_LEVELS.c", 2374; {
 9922                        	
 9923                        		.dbg	line,	"include\routines_LEVELS.c", 2375; spr_x(player_pos_x-1);
 9924                        		__ld.wm		_player_pos_x
         01:D746  AD D3 24   			lda.l	_player_pos_x
         01:D749  AC D4 24   			ldy.h	_player_pos_x
 9925                        		__sub.wi	1
         01:D74C  38         			sec
         01:D74D  E9 01      			sbc.l	#1
         01:D74F  B0 01      			bcs	!+
         01:D751  88         			dey
         01:D752             	!:
 9926                        		__call		_spr_x.1
         01:D752  20 0A E8   			call	_spr_x.1
 9927                        	
 9928                        		.dbg	line,	"include\routines_LEVELS.c", 2376; }
 9929                        	
 9930                        		.dbg	line,	"include\routines_LEVELS.c", 2378; else
 9931                        		__bra		.LL416
         01:D755  80 0F      			bra	.LL416
 9932    01:D757             	.LL415:
 9933                        	
 9934                        		.dbg	line,	"include\routines_LEVELS.c", 2379; {
 9935                        	
 9936                        		.dbg	line,	"include\routines_LEVELS.c", 2380; spr_x(player_pos_x+17);
 9937                        		__ld.wm		_player_pos_x
         01:D757  AD D3 24   			lda.l	_player_pos_x
         01:D75A  AC D4 24   			ldy.h	_player_pos_x
 9938                        		__add.wi	17
         01:D75D  18         			clc
         01:D75E  69 11      			adc.l	#17
         01:D760  90 01      			bcc	!+
         01:D762  C8         			iny
         01:D763             	!:
 9939                        		__call		_spr_x.1
         01:D763  20 0A E8   			call	_spr_x.1
 9940                        	
 9941                        		.dbg	line,	"include\routines_LEVELS.c", 2381; }
 9942    01:D766             	.LL416:
 9943                        	
 9944                        		.dbg	line,	"include\routines_LEVELS.c", 2383; spr_y(player_pos_y+18);
 9945                        		__ld.wm		_player_pos_y
         01:D766  AD D5 24   			lda.l	_player_pos_y
         01:D769  AC D6 24   			ldy.h	_player_pos_y
 9946                        		__add.wi	18
         01:D76C  18         			clc
         01:D76D  69 12      			adc.l	#18
         01:D76F  90 01      			bcc	!+
         01:D771  C8         			iny
         01:D772             	!:
 9947                        		__call		_spr_y.1
         01:D772  20 19 E8   			call	_spr_y.1
 9948                        	
 9949                        		.dbg	line,	"include\routines_LEVELS.c", 2385; player_attack = FALSE;
 9950                        		__st.umiq	0, _player_attack
         01:D775  9C 1E 23   			stz	_player_attack
 9951                        	
 9952                        		.dbg	line,	"include\routines_LEVELS.c", 2386; player_counter_attack = 1;
 9953                        		__st.umiq	1, _player_counter_attack
         01:D778  A9 01      			lda.l	#1
         01:D77A  8D 1C 23   			sta	_player_counter_attack
 9954                        	
 9955                        		.dbg	line,	"include\routines_LEVELS.c", 2387; player_state = STATE_CROUCH;
 9956                        		__st.umiq	7, _player_state
         01:D77D  A9 07      			lda.l	#7
         01:D77F  8D 16 23   			sta	_player_state
 9957                        	
 9958                        		.dbg	line,	"include\routines_LEVELS.c", 2388; return;
 9959                        		__bra		.LL216
         01:D782  4C 71 DD   			bra	.LL216
 9960                        	
 9961                        		.dbg	line,	"include\routines_LEVELS.c", 2389; }
 9962                        	
 9963                        		.dbg	line,	"include\routines_LEVELS.c", 2392; player_counter_attack += 1;
 9964    01:D785             	.LL414:
 9965    01:D785             	.LL413:
 9966    01:D785             	.LL409:
 9967    01:D785             	.LL405:
 9968    01:D785             	.LL401:
 9969    01:D785             	.LL397:
 9970                        		__add_st.umiq	1, _player_counter_attack
         01:D785  EE 1C 23   			inc	_player_counter_attack
 9971                        	
 9972                        		.dbg	line,	"include\routines_LEVELS.c", 2393; }
 9973                        	
 9974                        		.dbg	line,	"include\routines_LEVELS.c", 2396; else if(player_state == STATE_FALL)
 9975                        		__bra		.LL417
         01:D788  4C 71 DD   			bra	.LL417
 9976    01:D78B             	.LL393:
 9977                        		__ld.umq	_player_state
         01:D78B  AD 16 23   			lda	_player_state
 9978                        		__equ_b.uiq	9
         01:D78E  C9 09      			cmp	#9
         01:D790  F0 01      			beq	!+
         01:D792  18         			clc
         01:D793             	!:
 9979                        		__bfalse	.LL418
         01:D793  B0 03 4C C3			bcc	.LL418
         01:D797  D9          
 9980                        	
 9981                        		.dbg	line,	"include\routines_LEVELS.c", 2397; {
 9982                        	
 9983                        		.dbg	line,	"include\routines_LEVELS.c", 2398; unsigned char i, camera_y_move;
 9984                        	
 9985                        		.dbg	line,	"include\routines_LEVELS.c", 2399; i = 1;
 9986                        		__st.umiq	1, __update_PLAYER_end - 6  /* i */
         01:D798  A9 01      			lda.l	#1
         01:D79A  8D 07 23   			sta	__update_PLAYER_end - 6
 9987                        	
 9988                        		.dbg	line,	"include\routines_LEVELS.c", 2402; spr_set(player_id);
 9989                        		__ld.umq	_player_id
         01:D79D  AD 15 23   			lda	_player_id
 9990                        		__call		_spr_set.1
         01:D7A0  20 DD E7   			call	_spr_set.1
 9991                        	
 9992                        		.dbg	line,	"include\routines_LEVELS.c", 2405; //--------------------------------------------------------------------------------------//
 9993                        	
 9994                        		.dbg	line,	"include\routines_LEVELS.c", 2406; //                                        V MOVE                                        //
 9995                        	
 9996                        		.dbg	line,	"include\routines_LEVELS.c", 2407; //--------------------------------------------------------------------------------------//
 9997                        	
 9998                        		.dbg	line,	"include\routines_LEVELS.c", 2409; // UPDATE PLAYER Y POSITION //
 9999                        	
10000                        		.dbg	line,	"include\routines_LEVELS.c", 2410; player_pos_y += TABLE_PLAYER_FALL[player_index_fall];
10001                        		__ldx.umq	_player_index_fall
         01:D7A3  AE 1B 23   			ldx	_player_index_fall
10002                        		__ld.bax	_TABLE_PLAYER_FALL
         01:D7A6  BD 1C 61   			lda	_TABLE_PLAYER_FALL, x
         01:D7A9  C2         			cly
         01:D7AA  10 01      			bpl	!+
         01:D7AC  88         			dey
         01:D7AD             	!:
10003                        		__add_st.wmq	_player_pos_y
         01:D7AD  18         			clc
         01:D7AE  6D D5 24   			adc.l	_player_pos_y
         01:D7B1  8D D5 24   			sta.l	_player_pos_y
         01:D7B4  98         			tya
         01:D7B5  6D D6 24   			adc.h	_player_pos_y
         01:D7B8  8D D6 24   			sta.h	_player_pos_y
10004                        	
10005                        		.dbg	line,	"include\routines_LEVELS.c", 2413; // IF PLAYER GOES BELOW ITS BASE Y POSITION //
10006                        	
10007                        		.dbg	line,	"include\routines_LEVELS.c", 2414; if(player_pos_y >= PLAYER_BASE_Y_POS)
10008                        		__ld.wm		_player_pos_y
         01:D7BB  AD D5 24   			lda.l	_player_pos_y
         01:D7BE  AC D6 24   			ldy.h	_player_pos_y
10009                        		__sge_w.wi	128
         01:D7C1  C9 80      			cmp.l	#128		; Subtract integer from Y:A.
         01:D7C3  98         			tya
         01:D7C4  E9 00      			sbc.h	#128
         01:D7C6  50 02      			bvc	!+
         01:D7C8  49 80      			eor	#$80		; +ve if Y:A >= integer (signed).
         01:D7CA  49 80      	!:		eor	#$80
         01:D7CC  0A         			asl	a
10010                        		__bfalse	.LL419
         01:D7CD  90 45      			bcc	.LL419
10011                        	
10012                        		.dbg	line,	"include\routines_LEVELS.c", 2415; {
10013                        	
10014                        		.dbg	line,	"include\routines_LEVELS.c", 2416; // THE CAMERA MOVES //
10015                        	
10016                        		.dbg	line,	"include\routines_LEVELS.c", 2417; // CALCULATE HOW MANY PIXELS THE CAMERA HAS TO MOVE DOWN //
10017                        	
10018                        		.dbg	line,	"include\routines_LEVELS.c", 2418; camera_y_move = player_pos_y - PLAYER_BASE_Y_POS;
10019                        		__ld.wm		_player_pos_y
         01:D7CF  AD D5 24   			lda.l	_player_pos_y
         01:D7D2  AC D6 24   			ldy.h	_player_pos_y
10020                        		__sub.wi	128
         01:D7D5  38         			sec
         01:D7D6  E9 80      			sbc.l	#128
         01:D7D8  B0 01      			bcs	!+
         01:D7DA  88         			dey
         01:D7DB             	!:
10021                        		__st.umq	__update_PLAYER_end - 7  /* camera_y_move */
         01:D7DB  8D 06 23   			sta	__update_PLAYER_end - 7
10022                        	
10023                        		.dbg	line,	"include\routines_LEVELS.c", 2419; sgx_map_pxl_y += camera_y_move;
10024                        		__ld.um		__update_PLAYER_end - 7  /* camera_y_move */
         01:D7DE  AD 06 23   			lda	__update_PLAYER_end - 7
         01:D7E1  C2         			cly
10025                        		__add_st.wmq	_sgx_map_pxl_y
         01:D7E2  18         			clc
         01:D7E3  6D 91 26   			adc.l	_sgx_map_pxl_y
         01:D7E6  8D 91 26   			sta.l	_sgx_map_pxl_y
         01:D7E9  98         			tya
         01:D7EA  6D 92 26   			adc.h	_sgx_map_pxl_y
         01:D7ED  8D 92 26   			sta.h	_sgx_map_pxl_y
10026                        	
10027                        		.dbg	line,	"include\routines_LEVELS.c", 2421; // IF THE CAMERA HAS REACHED ITS MAX (LOWEST) POSITION //
10028                        	
10029                        		.dbg	line,	"include\routines_LEVELS.c", 2422; if(sgx_map_pxl_y > camera_max_y_position)
10030                        		__ld.wm		_sgx_map_pxl_y
         01:D7F0  AD 91 26   			lda.l	_sgx_map_pxl_y
         01:D7F3  AC 92 26   			ldy.h	_sgx_map_pxl_y
10031                        		__ugt_w.wm	_camera_max_y_position
         01:D7F6  18         			clc			; Subtract memory+1 from Y:A.
         01:D7F7  ED D7 24   			sbc.l	_camera_max_y_position
         01:D7FA  98         			tya
         01:D7FB  ED D8 24   			sbc.h	_camera_max_y_position		; CS if Y:A > memory.
10032                        		__bfalse	.LL420
         01:D7FE  90 0C      			bcc	.LL420
10033                        	
10034                        		.dbg	line,	"include\routines_LEVELS.c", 2423; {
10035                        	
10036                        		.dbg	line,	"include\routines_LEVELS.c", 2424; // THE CAMERA CAN NOT MOVE LOWER //
10037                        	
10038                        		.dbg	line,	"include\routines_LEVELS.c", 2425; sgx_map_pxl_y = camera_max_y_position;
10039                        		__ld.wm		_camera_max_y_position
         01:D800  AD D7 24   			lda.l	_camera_max_y_position
         01:D803  AC D8 24   			ldy.h	_camera_max_y_position
10040                        		__st.wmq	_sgx_map_pxl_y
         01:D806  8D 91 26   			sta.l	_sgx_map_pxl_y
         01:D809  8C 92 26   			sty.h	_sgx_map_pxl_y
10041                        	
10042                        		.dbg	line,	"include\routines_LEVELS.c", 2426; }
10043                        	
10044                        		.dbg	line,	"include\routines_LEVELS.c", 2428; // THE PLAYER STAYS AT ITS BASE Y POSITION //
10045                        	
10046                        		.dbg	line,	"include\routines_LEVELS.c", 2429; player_pos_y = PLAYER_BASE_Y_POS;
10047    01:D80C             	.LL420:
10048                        		__st.wmiq	128, _player_pos_y
         01:D80C  A9 80      			lda.l	#128
         01:D80E  8D D5 24   			sta.l	_player_pos_y
         01:D811  9C D6 24   			stz.h	_player_pos_y
10049                        	
10050                        		.dbg	line,	"include\routines_LEVELS.c", 2430; }
10051                        	
10052                        		.dbg	line,	"include\routines_LEVELS.c", 2433; // UPDATE JUMP INDEX IN THE ARRAY //
10053                        	
10054                        		.dbg	line,	"include\routines_LEVELS.c", 2434; // ARRAY MAX ENTRY : 20//
10055                        	
10056                        		.dbg	line,	"include\routines_LEVELS.c", 2435; if(player_index_fall < 20)
10057    01:D814             	.LL419:
10058                        		__ld.umq	_player_index_fall
         01:D814  AD 1B 23   			lda	_player_index_fall
10059                        		__ult_b.uiq	20
         01:D817  C9 14      			cmp	#20		; Subtract integer from A.
         01:D819  6A         			ror	a		; CC if A < integer.
         01:D81A  49 80      			eor	#$80
         01:D81C  2A         			rol	a
10060                        		__bfalse	.LL421
         01:D81D  90 03      			bcc	.LL421
10061                        	
10062                        		.dbg	line,	"include\routines_LEVELS.c", 2436; {
10063                        	
10064                        		.dbg	line,	"include\routines_LEVELS.c", 2437; player_index_fall += 1;
10065                        		__add_st.umiq	1, _player_index_fall
         01:D81F  EE 1B 23   			inc	_player_index_fall
10066                        	
10067                        		.dbg	line,	"include\routines_LEVELS.c", 2438; }
10068                        	
10069                        		.dbg	line,	"include\routines_LEVELS.c", 2441; check_TILE_DEPTH( 15 , 0);
10070    01:D822             	.LL421:
10071                        		__ld.wi		15
         01:D822  A9 0F      			lda.l	#15
         01:D824  C2         			cly
10072                        		__pusharg.wr
         01:D825  A6 8D      			ldx	<__sp
         01:D827  CA         			dex
         01:D828  CA         			dex
         01:D829  95 08      			sta.l	<__stack, x
         01:D82B  94 09      			sty.h	<__stack, x
         01:D82D  86 8D      			stx	<__sp
10073                        		__ld.wi		0
         01:D82F  62         			cla
         01:D830  C2         			cly
10074                        		__pusharg.wr
         01:D831  A6 8D      			ldx	<__sp
         01:D833  CA         			dex
         01:D834  CA         			dex
         01:D835  95 08      			sta.l	<__stack, x
         01:D837  94 09      			sty.h	<__stack, x
         01:D839  86 8D      			stx	<__sp
10075                        		__call		_check_TILE_DEPTH
         01:D83B  20 59 FF   			call	_check_TILE_DEPTH
10076                        	
10077                        		.dbg	line,	"include\routines_LEVELS.c", 2444; if(map_blk_flag == TILE_BG)
10078                        		__ld.umq	_map_blk_flag
         01:D83E  AD B0 2B   			lda	_map_blk_flag
10079                        		__equ_b.uiq	1
         01:D841  C9 01      			cmp	#1
         01:D843  F0 01      			beq	!+
         01:D845  18         			clc
         01:D846             	!:
10080                        		__bfalse	.LL422
         01:D846  B0 03 4C FF			bcc	.LL422
         01:D84A  D8          
10081                        	
10082                        		.dbg	line,	"include\routines_LEVELS.c", 2445; {
10083                        	
10084                        		.dbg	line,	"include\routines_LEVELS.c", 2446; // CALCULATE HOW MANY PIXELS THE PLAYER MOVED INTO THE GROUND //
10085                        	
10086                        		.dbg	line,	"include\routines_LEVELS.c", 2447; for(i=1; i<11 ; i++ )
10087                        		__st.umiq	1, __update_PLAYER_end - 6  /* i */
         01:D84B  A9 01      			lda.l	#1
         01:D84D  8D 07 23   			sta	__update_PLAYER_end - 6
10088    01:D850             	.LL423:
10089                        		__ld.umq	__update_PLAYER_end - 6  /* i */
         01:D850  AD 07 23   			lda	__update_PLAYER_end - 6
10090                        		__ult_b.uiq	11
         01:D853  C9 0B      			cmp	#11		; Subtract integer from A.
         01:D855  6A         			ror	a		; CC if A < integer.
         01:D856  49 80      			eor	#$80
         01:D858  2A         			rol	a
10091                        		__btrue		.LL425
         01:D859  B0 07      			bcs	.LL425
10092                        		__bra		.LL426
         01:D85B  80 7D      			bra	.LL426
10093    01:D85D             	.LL424:
10094                        		__inc.umq	__update_PLAYER_end - 6  /* i */
         01:D85D  EE 07 23   			inc	__update_PLAYER_end - 6
10095                        		__bra		.LL423
         01:D860  80 EE      			bra	.LL423
10096    01:D862             	.LL425:
10097                        	
10098                        		.dbg	line,	"include\routines_LEVELS.c", 2448; {
10099                        	
10100                        		.dbg	line,	"include\routines_LEVELS.c", 2449; check_TILE_DEPTH( 15 , i);//20
10101                        		__ld.wi		15
         01:D862  A9 0F      			lda.l	#15
         01:D864  C2         			cly
10102                        		__pusharg.wr
         01:D865  A6 8D      			ldx	<__sp
         01:D867  CA         			dex
         01:D868  CA         			dex
         01:D869  95 08      			sta.l	<__stack, x
         01:D86B  94 09      			sty.h	<__stack, x
         01:D86D  86 8D      			stx	<__sp
10103                        		__ld.um		__update_PLAYER_end - 6  /* i */
         01:D86F  AD 07 23   			lda	__update_PLAYER_end - 6
         01:D872  C2         			cly
10104                        		__pusharg.wr
         01:D873  A6 8D      			ldx	<__sp
         01:D875  CA         			dex
         01:D876  CA         			dex
         01:D877  95 08      			sta.l	<__stack, x
         01:D879  94 09      			sty.h	<__stack, x
         01:D87B  86 8D      			stx	<__sp
10105                        		__call		_check_TILE_DEPTH
         01:D87D  20 59 FF   			call	_check_TILE_DEPTH
10106                        	
10107                        		.dbg	line,	"include\routines_LEVELS.c", 2452; if(map_blk_flag == TILE_EMPTY)
10108                        		__not.um	_map_blk_flag
         01:D880  AD B0 2B   			lda	_map_blk_flag
         01:D883  18         			clc
         01:D884  D0 01      			bne	!+
         01:D886  38         			sec
         01:D887             	!:
10109                        		__bfalse	.LL427
         01:D887  90 D4      			bcc	.LL427
10110                        	
10111                        		.dbg	line,	"include\routines_LEVELS.c", 2453; {
10112                        	
10113                        		.dbg	line,	"include\routines_LEVELS.c", 2454; if(player_pos_y != PLAYER_BASE_Y_POS)
10114                        		__ld.wm		_player_pos_y
         01:D889  AD D5 24   			lda.l	_player_pos_y
         01:D88C  AC D6 24   			ldy.h	_player_pos_y
10115                        		__neq_w.wi	128
         01:D88F  38         			sec
         01:D890  49 80      			eor.l	#128
         01:D892  D0 06      			bne	!+
         01:D894  98         			tya
         01:D895  49 00      			eor.h	#128
         01:D897  D0 01      			bne	!+
         01:D899  18         			clc
         01:D89A             	!:
10116                        		__bfalse	.LL428
         01:D89A  90 1E      			bcc	.LL428
10117                        	
10118                        		.dbg	line,	"include\routines_LEVELS.c", 2455; {
10119                        	
10120                        		.dbg	line,	"include\routines_LEVELS.c", 2456; player_pos_y -= (i - 1);
10121                        		__ld.um		__update_PLAYER_end - 6  /* i */
         01:D89C  AD 07 23   			lda	__update_PLAYER_end - 6
         01:D89F  C2         			cly
10122                        		__sub.wi	1
         01:D8A0  38         			sec
         01:D8A1  E9 01      			sbc.l	#1
         01:D8A3  B0 01      			bcs	!+
         01:D8A5  88         			dey
         01:D8A6             	!:
10123                        		__isub_st.wmq	_player_pos_y
         01:D8A6  38         			sec
         01:D8A7  49 FF      			eor	#$FF
         01:D8A9  6D D5 24   			adc.l	_player_pos_y
         01:D8AC  8D D5 24   			sta.l	_player_pos_y
         01:D8AF  98         			tya
         01:D8B0  49 FF      			eor	#$FF
         01:D8B2  6D D6 24   			adc.h	_player_pos_y
         01:D8B5  8D D6 24   			sta.h	_player_pos_y
10124                        	
10125                        		.dbg	line,	"include\routines_LEVELS.c", 2457; }
10126                        	
10127                        		.dbg	line,	"include\routines_LEVELS.c", 2459; else
10128                        		__bra		.LL429
         01:D8B8  80 20      			bra	.LL429
10129    01:D8BA             	.LL428:
10130                        	
10131                        		.dbg	line,	"include\routines_LEVELS.c", 2460; {
10132                        	
10133                        		.dbg	line,	"include\routines_LEVELS.c", 2461; sgx_map_pxl_y -= (i - 1);
10134                        		__ld.um		__update_PLAYER_end - 6  /* i */
         01:D8BA  AD 07 23   			lda	__update_PLAYER_end - 6
         01:D8BD  C2         			cly
10135                        		__sub.wi	1
         01:D8BE  38         			sec
         01:D8BF  E9 01      			sbc.l	#1
         01:D8C1  B0 01      			bcs	!+
         01:D8C3  88         			dey
         01:D8C4             	!:
10136                        		__isub_st.wmq	_sgx_map_pxl_y
         01:D8C4  38         			sec
         01:D8C5  49 FF      			eor	#$FF
         01:D8C7  6D 91 26   			adc.l	_sgx_map_pxl_y
         01:D8CA  8D 91 26   			sta.l	_sgx_map_pxl_y
         01:D8CD  98         			tya
         01:D8CE  49 FF      			eor	#$FF
         01:D8D0  6D 92 26   			adc.h	_sgx_map_pxl_y
         01:D8D3  8D 92 26   			sta.h	_sgx_map_pxl_y
10137                        	
10138                        		.dbg	line,	"include\routines_LEVELS.c", 2462; }
10139    01:D8D6             	.LL429	.alias		.LL426
10140                        	
10141                        		.dbg	line,	"include\routines_LEVELS.c", 2465; break;
10142                        		__bra		.LL426
         01:D8D6  80 02      			bra	.LL426
10143                        	
10144                        		.dbg	line,	"include\routines_LEVELS.c", 2466; }
10145                        	
10146                        		.dbg	line,	"include\routines_LEVELS.c", 2468; }
10147    01:D8D8             	.LL427	.alias		.LL424
10148                        		__bra		.LL424
         01:D8D8  80 83      			bra	.LL424
10149    01:D8DA             	.LL426:
10150                        	
10151                        		.dbg	line,	"include\routines_LEVELS.c", 2470; spr_y(player_pos_y);
10152                        		__ld.wm		_player_pos_y
         01:D8DA  AD D5 24   			lda.l	_player_pos_y
         01:D8DD  AC D6 24   			ldy.h	_player_pos_y
10153                        		__call		_spr_y.1
         01:D8E0  20 19 E8   			call	_spr_y.1
10154                        	
10155                        		.dbg	line,	"include\routines_LEVELS.c", 2472; /*spr_set(weapon_id);
10156                        	
10157                        		.dbg	line,	"include\routines_LEVELS.c", 2473; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
10158                        	
10159                        		.dbg	line,	"include\routines_LEVELS.c", 2474; spr_x(player_pos_x+8);
10160                        	
10161                        		.dbg	line,	"include\routines_LEVELS.c", 2475; spr_y(player_pos_y+16);*/
10162                        	
10163                        		.dbg	line,	"include\routines_LEVELS.c", 2477; player_counter_anim = 1;
10164                        		__st.umiq	1, _player_counter_anim
         01:D8E3  A9 01      			lda.l	#1
         01:D8E5  8D 19 23   			sta	_player_counter_anim
10165                        	
10166                        		.dbg	line,	"include\routines_LEVELS.c", 2478; player_index_jump = 0;
10167                        		__st.umiq	0, _player_index_jump
         01:D8E8  9C 1A 23   			stz	_player_index_jump
10168                        	
10169                        		.dbg	line,	"include\routines_LEVELS.c", 2479; player_index_fall = 0;
10170                        		__st.umiq	0, _player_index_fall
         01:D8EB  9C 1B 23   			stz	_player_index_fall
10171                        	
10172                        		.dbg	line,	"include\routines_LEVELS.c", 2480; jump_ladder = FALSE;
10173                        		__st.umiq	0, _jump_ladder
         01:D8EE  9C 1F 23   			stz	_jump_ladder
10174                        	
10175                        		.dbg	line,	"include\routines_LEVELS.c", 2481; fall_ladder = FALSE;
10176                        		__st.umiq	0, _fall_ladder
         01:D8F1  9C 21 23   			stz	_fall_ladder
10177                        	
10178                        		.dbg	line,	"include\routines_LEVELS.c", 2482; jump_max_index = 34;
10179                        		__st.umiq	34, _jump_max_index
         01:D8F4  A9 22      			lda.l	#34
         01:D8F6  8D 20 23   			sta	_jump_max_index
10180                        	
10181                        		.dbg	line,	"include\routines_LEVELS.c", 2483; player_state = STATE_IDLE;
10182                        		__st.umiq	0, _player_state
         01:D8F9  9C 16 23   			stz	_player_state
10183                        	
10184                        		.dbg	line,	"include\routines_LEVELS.c", 2484; return;
10185                        		__bra		.LL216
         01:D8FC  4C 71 DD   			bra	.LL216
10186                        	
10187                        		.dbg	line,	"include\routines_LEVELS.c", 2485; }
10188                        	
10189                        		.dbg	line,	"include\routines_LEVELS.c", 2488; check_BG( 16 , 16 );
10190    01:D8FF             	.LL422:
10191                        		__ld.wi		16
         01:D8FF  A9 10      			lda.l	#16
         01:D901  C2         			cly
10192                        		__pusharg.wr
         01:D902  A6 8D      			ldx	<__sp
         01:D904  CA         			dex
         01:D905  CA         			dex
         01:D906  95 08      			sta.l	<__stack, x
         01:D908  94 09      			sty.h	<__stack, x
         01:D90A  86 8D      			stx	<__sp
10193                        		__ld.wi		16
         01:D90C  A9 10      			lda.l	#16
         01:D90E  C2         			cly
10194                        		__pusharg.wr
         01:D90F  A6 8D      			ldx	<__sp
         01:D911  CA         			dex
         01:D912  CA         			dex
         01:D913  95 08      			sta.l	<__stack, x
         01:D915  94 09      			sty.h	<__stack, x
         01:D917  86 8D      			stx	<__sp
10195                        		__call		_check_BG
         01:D919  20 6D FF   			call	_check_BG
10196                        	
10197                        		.dbg	line,	"include\routines_LEVELS.c", 2490; // IF PLAYER HITS THE LADDER //
10198                        	
10199                        		.dbg	line,	"include\routines_LEVELS.c", 2491; if(map_blk_flag == TILE_LADDER)
10200                        		__ld.umq	_map_blk_flag
         01:D91C  AD B0 2B   			lda	_map_blk_flag
10201                        		__equ_b.uiq	2
         01:D91F  C9 02      			cmp	#2
         01:D921  F0 01      			beq	!+
         01:D923  18         			clc
         01:D924             	!:
10202                        		__bfalse	.LL430
         01:D924  90 6F      			bcc	.LL430
10203                        	
10204                        		.dbg	line,	"include\routines_LEVELS.c", 2492; {
10205                        	
10206                        		.dbg	line,	"include\routines_LEVELS.c", 2493; // CAMERA GOES 8 PX BACKWARD //
10207                        	
10208                        		.dbg	line,	"include\routines_LEVELS.c", 2494; sgx_map_pxl_x = ( (sgx_map_pxl_x >> 3) << 3 );
10209                        		__ld.wm		_sgx_map_pxl_x
         01:D926  AD 8F 26   			lda.l	_sgx_map_pxl_x
         01:D929  AC 90 26   			ldy.h	_sgx_map_pxl_x
10210                        		__lsr.wi	3
         01:D92C  84 00      			sty	__temp
         01:D92E  20 3A E2   			jsr	lsrw3
10211                        		__asl.wi	3
         01:D931  84 00      			sty	__temp
         01:D933  20 D7 E1   			jsr	aslw3
10212                        		__st.wmq	_sgx_map_pxl_x
         01:D936  8D 8F 26   			sta.l	_sgx_map_pxl_x
         01:D939  8C 90 26   			sty.h	_sgx_map_pxl_x
10213                        	
10214                        		.dbg	line,	"include\routines_LEVELS.c", 2496; // SO WE UPDATE THE MAP //
10215                        	
10216                        		.dbg	line,	"include\routines_LEVELS.c", 2497; sgx_scroll_map();
10217                        		__call		_sgx_scroll_map
         01:D93C  20 81 FF   			call	_sgx_scroll_map
10218                        	
10219                        		.dbg	line,	"include\routines_LEVELS.c", 2499; // CHECK IF THE PLAYER STANDS RIGHT TO THE LADDER //
10220                        	
10221                        		.dbg	line,	"include\routines_LEVELS.c", 2500; check_BG( 31 , 16 );
10222                        		__ld.wi		31
         01:D93F  A9 1F      			lda.l	#31
         01:D941  C2         			cly
10223                        		__pusharg.wr
         01:D942  A6 8D      			ldx	<__sp
         01:D944  CA         			dex
         01:D945  CA         			dex
         01:D946  95 08      			sta.l	<__stack, x
         01:D948  94 09      			sty.h	<__stack, x
         01:D94A  86 8D      			stx	<__sp
10224                        		__ld.wi		16
         01:D94C  A9 10      			lda.l	#16
         01:D94E  C2         			cly
10225                        		__pusharg.wr
         01:D94F  A6 8D      			ldx	<__sp
         01:D951  CA         			dex
         01:D952  CA         			dex
         01:D953  95 08      			sta.l	<__stack, x
         01:D955  94 09      			sty.h	<__stack, x
         01:D957  86 8D      			stx	<__sp
10226                        		__call		_check_BG
         01:D959  20 6D FF   			call	_check_BG
10227                        	
10228                        		.dbg	line,	"include\routines_LEVELS.c", 2502; if(map_blk_flag == TILE_LADDER)
10229                        		__ld.umq	_map_blk_flag
         01:D95C  AD B0 2B   			lda	_map_blk_flag
10230                        		__equ_b.uiq	2
         01:D95F  C9 02      			cmp	#2
         01:D961  F0 01      			beq	!+
         01:D963  18         			clc
         01:D964             	!:
10231                        		__bfalse	.LL431
         01:D964  90 0E      			bcc	.LL431
10232                        	
10233                        		.dbg	line,	"include\routines_LEVELS.c", 2503; {
10234                        	
10235                        		.dbg	line,	"include\routines_LEVELS.c", 2504; sgx_map_pxl_x += 8;
10236                        		__add_st.wmiq	8, _sgx_map_pxl_x
         01:D966  18         			clc
         01:D967  AD 8F 26   			lda.l	_sgx_map_pxl_x
         01:D96A  69 08      			adc.l	#8
         01:D96C  8D 8F 26   			sta.l	_sgx_map_pxl_x
         01:D96F  90 03      			bcc	!+
         01:D971  EE 90 26   			inc.h	_sgx_map_pxl_x
         01:D974             	!:
10237                        	
10238                        		.dbg	line,	"include\routines_LEVELS.c", 2505; }
10239                        	
10240                        		.dbg	line,	"include\routines_LEVELS.c", 2507; spr_pattern(PLAYER_HANG_VRAM_ADR);
10241    01:D974             	.LL431:
10242                        		__ld.wi		7936
         01:D974  62         			cla
         01:D975  A0 1F      			ldy.h	#7936
10243                        		__call		_spr_pattern.1
         01:D977  20 26 E8   			call	_spr_pattern.1
10244                        	
10245                        		.dbg	line,	"include\routines_LEVELS.c", 2508; player_counter_anim = 0;//1
10246                        		__st.umiq	0, _player_counter_anim
         01:D97A  9C 19 23   			stz	_player_counter_anim
10247                        	
10248                        		.dbg	line,	"include\routines_LEVELS.c", 2509; player_index_jump = 0;
10249                        		__st.umiq	0, _player_index_jump
         01:D97D  9C 1A 23   			stz	_player_index_jump
10250                        	
10251                        		.dbg	line,	"include\routines_LEVELS.c", 2510; player_index_fall = 0;
10252                        		__st.umiq	0, _player_index_fall
         01:D980  9C 1B 23   			stz	_player_index_fall
10253                        	
10254                        		.dbg	line,	"include\routines_LEVELS.c", 2511; jump_ladder = TRUE;
10255                        		__st.umiq	1, _jump_ladder
         01:D983  A9 01      			lda.l	#1
         01:D985  8D 1F 23   			sta	_jump_ladder
10256                        	
10257                        		.dbg	line,	"include\routines_LEVELS.c", 2512; jump_max_index = 29;
10258                        		__st.umiq	29, _jump_max_index
         01:D988  A9 1D      			lda.l	#29
         01:D98A  8D 20 23   			sta	_jump_max_index
10259                        	
10260                        		.dbg	line,	"include\routines_LEVELS.c", 2513; player_state = STATE_HANG;
10261                        		__st.umiq	10, _player_state
         01:D98D  A9 0A      			lda.l	#10
         01:D98F  8D 16 23   			sta	_player_state
10262                        	
10263                        		.dbg	line,	"include\routines_LEVELS.c", 2514; return;
10264                        		__bra		.LL216
         01:D992  4C 71 DD   			bra	.LL216
10265                        	
10266                        		.dbg	line,	"include\routines_LEVELS.c", 2515; }
10267                        	
10268                        		.dbg	line,	"include\routines_LEVELS.c", 2517; spr_y(player_pos_y);
10269    01:D995             	.LL430:
10270                        		__ld.wm		_player_pos_y
         01:D995  AD D5 24   			lda.l	_player_pos_y
         01:D998  AC D6 24   			ldy.h	_player_pos_y
10271                        		__call		_spr_y.1
         01:D99B  20 19 E8   			call	_spr_y.1
10272                        	
10273                        		.dbg	line,	"include\routines_LEVELS.c", 2519; // IF PLAYER FALLS FROM A LADDER //
10274                        	
10275                        		.dbg	line,	"include\routines_LEVELS.c", 2520; if(fall_ladder == TRUE)
10276                        		__ld.umq	_fall_ladder
         01:D99E  AD 21 23   			lda	_fall_ladder
10277                        		__equ_b.uiq	1
         01:D9A1  C9 01      			cmp	#1
         01:D9A3  F0 01      			beq	!+
         01:D9A5  18         			clc
         01:D9A6             	!:
10278                        		__bfalse	.LL432
         01:D9A6  B0 03 4C 71			bcc	.LL432
         01:D9AA  DD          
10279                        	
10280                        		.dbg	line,	"include\routines_LEVELS.c", 2521; {
10281                        	
10282                        		.dbg	line,	"include\routines_LEVELS.c", 2522; spr_set(weapon_id);
10283                        		__ld.umq	_weapon_id
         01:D9AB  AD 23 23   			lda	_weapon_id
10284                        		__call		_spr_set.1
         01:D9AE  20 DD E7   			call	_spr_set.1
10285                        	
10286                        		.dbg	line,	"include\routines_LEVELS.c", 2523; spr_y(player_pos_y+8);
10287                        		__ld.wm		_player_pos_y
         01:D9B1  AD D5 24   			lda.l	_player_pos_y
         01:D9B4  AC D6 24   			ldy.h	_player_pos_y
10288                        		__add.wi	8
         01:D9B7  18         			clc
         01:D9B8  69 08      			adc.l	#8
         01:D9BA  90 01      			bcc	!+
         01:D9BC  C8         			iny
         01:D9BD             	!:
10289                        		__call		_spr_y.1
         01:D9BD  20 19 E8   			call	_spr_y.1
10290                        	
10291                        		.dbg	line,	"include\routines_LEVELS.c", 2524; }
10292                        	
10293                        		.dbg	line,	"include\routines_LEVELS.c", 2525; }
10294    01:D9C0             	.LL432	.alias		.LL433
10295                        	
10296                        		.dbg	line,	"include\routines_LEVELS.c", 2528; else if(player_state == STATE_HANG)
10297                        		__bra		.LL433
         01:D9C0  4C 71 DD   			bra	.LL433
10298    01:D9C3             	.LL418:
10299                        		__ld.umq	_player_state
         01:D9C3  AD 16 23   			lda	_player_state
10300                        		__equ_b.uiq	10
         01:D9C6  C9 0A      			cmp	#10
         01:D9C8  F0 01      			beq	!+
         01:D9CA  18         			clc
         01:D9CB             	!:
10301                        		__bfalse	.LL434
         01:D9CB  90 4E      			bcc	.LL434
10302                        	
10303                        		.dbg	line,	"include\routines_LEVELS.c", 2529; {
10304                        	
10305                        		.dbg	line,	"include\routines_LEVELS.c", 2530; recenter_CAMERA();
10306                        		__call		_recenter_CAMERA
         01:D9CD  20 63 FF   			call	_recenter_CAMERA
10307                        	
10308                        		.dbg	line,	"include\routines_LEVELS.c", 2532; //if(player_counter_anim == 1)
10309                        	
10310                        		.dbg	line,	"include\routines_LEVELS.c", 2533; //{
10311                        	
10312                        		.dbg	line,	"include\routines_LEVELS.c", 2534; //spr_set(player_id);
10313                        	
10314                        		.dbg	line,	"include\routines_LEVELS.c", 2535; //spr_pattern(PLAYER_HANG_VRAM_ADR);
10315                        	
10316                        		.dbg	line,	"include\routines_LEVELS.c", 2537; spr_set(weapon_id);
10317                        		__ld.umq	_weapon_id
         01:D9D0  AD 23 23   			lda	_weapon_id
10318                        		__call		_spr_set.1
         01:D9D3  20 DD E7   			call	_spr_set.1
10319                        	
10320                        		.dbg	line,	"include\routines_LEVELS.c", 2538; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
10321                        		__ld.wi		5184
         01:D9D6  A9 40      			lda.l	#5184
         01:D9D8  A0 14      			ldy.h	#5184
10322                        		__call		_spr_pattern.1
         01:D9DA  20 26 E8   			call	_spr_pattern.1
10323                        	
10324                        		.dbg	line,	"include\routines_LEVELS.c", 2539; spr_y(player_pos_y+5);
10325                        		__ld.wm		_player_pos_y
         01:D9DD  AD D5 24   			lda.l	_player_pos_y
         01:D9E0  AC D6 24   			ldy.h	_player_pos_y
10326                        		__add.wi	5
         01:D9E3  18         			clc
         01:D9E4  69 05      			adc.l	#5
         01:D9E6  90 01      			bcc	!+
         01:D9E8  C8         			iny
         01:D9E9             	!:
10327                        		__call		_spr_y.1
         01:D9E9  20 19 E8   			call	_spr_y.1
10328                        	
10329                        		.dbg	line,	"include\routines_LEVELS.c", 2541; if(player_axis == AXIS_RIGHT)
10330                        		__not.um	_player_axis
         01:D9EC  AD 17 23   			lda	_player_axis
         01:D9EF  18         			clc
         01:D9F0  D0 01      			bne	!+
         01:D9F2  38         			sec
         01:D9F3             	!:
10331                        		__bfalse	.LL435
         01:D9F3  90 11      			bcc	.LL435
10332                        	
10333                        		.dbg	line,	"include\routines_LEVELS.c", 2542; {
10334                        	
10335                        		.dbg	line,	"include\routines_LEVELS.c", 2543; spr_x(player_pos_x+17);
10336                        		__ld.wm		_player_pos_x
         01:D9F5  AD D3 24   			lda.l	_player_pos_x
         01:D9F8  AC D4 24   			ldy.h	_player_pos_x
10337                        		__add.wi	17
         01:D9FB  18         			clc
         01:D9FC  69 11      			adc.l	#17
         01:D9FE  90 01      			bcc	!+
         01:DA00  C8         			iny
         01:DA01             	!:
10338                        		__call		_spr_x.1
         01:DA01  20 0A E8   			call	_spr_x.1
10339                        	
10340                        		.dbg	line,	"include\routines_LEVELS.c", 2544; }
10341                        	
10342                        		.dbg	line,	"include\routines_LEVELS.c", 2546; else
10343                        		__bra		.LL436
         01:DA04  80 0F      			bra	.LL436
10344    01:DA06             	.LL435:
10345                        	
10346                        		.dbg	line,	"include\routines_LEVELS.c", 2547; {
10347                        	
10348                        		.dbg	line,	"include\routines_LEVELS.c", 2548; spr_x(player_pos_x-2);
10349                        		__ld.wm		_player_pos_x
         01:DA06  AD D3 24   			lda.l	_player_pos_x
         01:DA09  AC D4 24   			ldy.h	_player_pos_x
10350                        		__sub.wi	2
         01:DA0C  38         			sec
         01:DA0D  E9 02      			sbc.l	#2
         01:DA0F  B0 01      			bcs	!+
         01:DA11  88         			dey
         01:DA12             	!:
10351                        		__call		_spr_x.1
         01:DA12  20 0A E8   			call	_spr_x.1
10352                        	
10353                        		.dbg	line,	"include\routines_LEVELS.c", 2549; }
10354    01:DA15             	.LL436:
10355                        	
10356                        		.dbg	line,	"include\routines_LEVELS.c", 2550; 
10357                        	
10358                        		.dbg	line,	"include\routines_LEVELS.c", 2551; player_counter_anim = 0;
10359                        		__st.umiq	0, _player_counter_anim
         01:DA15  9C 19 23   			stz	_player_counter_anim
10360                        	
10361                        		.dbg	line,	"include\routines_LEVELS.c", 2552; //}
10362                        	
10363                        		.dbg	line,	"include\routines_LEVELS.c", 2553; }
10364                        	
10365                        		.dbg	line,	"include\routines_LEVELS.c", 2556; else if(player_state == STATE_CLIMB_UP)
10366                        		__bra		.LL437
         01:DA18  4C 71 DD   			bra	.LL437
10367    01:DA1B             	.LL434:
10368                        		__ld.umq	_player_state
         01:DA1B  AD 16 23   			lda	_player_state
10369                        		__equ_b.uiq	11
         01:DA1E  C9 0B      			cmp	#11
         01:DA20  F0 01      			beq	!+
         01:DA22  18         			clc
         01:DA23             	!:
10370                        		__bfalse	.LL438
         01:DA23  B0 03 4C FD			bcc	.LL438
         01:DA27  DA          
10371                        	
10372                        		.dbg	line,	"include\routines_LEVELS.c", 2557; {
10373                        	
10374                        		.dbg	line,	"include\routines_LEVELS.c", 2558; if(player_counter_anim == 0)
10375                        		__not.um	_player_counter_anim
         01:DA28  AD 19 23   			lda	_player_counter_anim
         01:DA2B  18         			clc
         01:DA2C  D0 01      			bne	!+
         01:DA2E  38         			sec
         01:DA2F             	!:
10376                        		__bfalse	.LL439
         01:DA2F  90 0F      			bcc	.LL439
10377                        	
10378                        		.dbg	line,	"include\routines_LEVELS.c", 2559; {
10379                        	
10380                        		.dbg	line,	"include\routines_LEVELS.c", 2560; spr_set(player_id);
10381                        		__ld.umq	_player_id
         01:DA31  AD 15 23   			lda	_player_id
10382                        		__call		_spr_set.1
         01:DA34  20 DD E7   			call	_spr_set.1
10383                        	
10384                        		.dbg	line,	"include\routines_LEVELS.c", 2561; spr_pattern(PLAYER_CLIMB_1_VRAM_ADR); 
10385                        		__ld.wi		8192
         01:DA37  62         			cla
         01:DA38  A0 20      			ldy.h	#8192
10386                        		__call		_spr_pattern.1
         01:DA3A  20 26 E8   			call	_spr_pattern.1
10387                        	
10388                        		.dbg	line,	"include\routines_LEVELS.c", 2562; }
10389                        	
10390                        		.dbg	line,	"include\routines_LEVELS.c", 2564; else if(player_counter_anim == 2)
10391                        		__bra		.LL440
         01:DA3D  4C E7 DA   			bra	.LL440
10392    01:DA40             	.LL439:
10393                        		__ld.umq	_player_counter_anim
         01:DA40  AD 19 23   			lda	_player_counter_anim
10394                        		__equ_b.uiq	2
         01:DA43  C9 02      			cmp	#2
         01:DA45  F0 01      			beq	!+
         01:DA47  18         			clc
         01:DA48             	!:
10395                        		__bfalse	.LL441
         01:DA48  90 0F      			bcc	.LL441
10396                        	
10397                        		.dbg	line,	"include\routines_LEVELS.c", 2565; {
10398                        	
10399                        		.dbg	line,	"include\routines_LEVELS.c", 2566; spr_set(player_id);
10400                        		__ld.umq	_player_id
         01:DA4A  AD 15 23   			lda	_player_id
10401                        		__call		_spr_set.1
         01:DA4D  20 DD E7   			call	_spr_set.1
10402                        	
10403                        		.dbg	line,	"include\routines_LEVELS.c", 2567; spr_pattern(PLAYER_CLIMB_2_VRAM_ADR); 
10404                        		__ld.wi		8448
         01:DA50  62         			cla
         01:DA51  A0 21      			ldy.h	#8448
10405                        		__call		_spr_pattern.1
         01:DA53  20 26 E8   			call	_spr_pattern.1
10406                        	
10407                        		.dbg	line,	"include\routines_LEVELS.c", 2568; }
10408                        	
10409                        		.dbg	line,	"include\routines_LEVELS.c", 2570; else if(player_counter_anim == 5)
10410                        		__bra		.LL442
         01:DA56  4C E7 DA   			bra	.LL442
10411    01:DA59             	.LL441:
10412                        		__ld.umq	_player_counter_anim
         01:DA59  AD 19 23   			lda	_player_counter_anim
10413                        		__equ_b.uiq	5
         01:DA5C  C9 05      			cmp	#5
         01:DA5E  F0 01      			beq	!+
         01:DA60  18         			clc
         01:DA61             	!:
10414                        		__bfalse	.LL443
         01:DA61  90 0E      			bcc	.LL443
10415                        	
10416                        		.dbg	line,	"include\routines_LEVELS.c", 2571; {
10417                        	
10418                        		.dbg	line,	"include\routines_LEVELS.c", 2572; spr_set(player_id);
10419                        		__ld.umq	_player_id
         01:DA63  AD 15 23   			lda	_player_id
10420                        		__call		_spr_set.1
         01:DA66  20 DD E7   			call	_spr_set.1
10421                        	
10422                        		.dbg	line,	"include\routines_LEVELS.c", 2573; spr_pattern(PLAYER_CLIMB_3_VRAM_ADR); 
10423                        		__ld.wi		8704
         01:DA69  62         			cla
         01:DA6A  A0 22      			ldy.h	#8704
10424                        		__call		_spr_pattern.1
         01:DA6C  20 26 E8   			call	_spr_pattern.1
10425                        	
10426                        		.dbg	line,	"include\routines_LEVELS.c", 2574; }
10427                        	
10428                        		.dbg	line,	"include\routines_LEVELS.c", 2576; else if(player_counter_anim == 8)
10429                        		__bra		.LL444
         01:DA6F  80 76      			bra	.LL444
10430    01:DA71             	.LL443:
10431                        		__ld.umq	_player_counter_anim
         01:DA71  AD 19 23   			lda	_player_counter_anim
10432                        		__equ_b.uiq	8
         01:DA74  C9 08      			cmp	#8
         01:DA76  F0 01      			beq	!+
         01:DA78  18         			clc
         01:DA79             	!:
10433                        		__bfalse	.LL445
         01:DA79  90 0E      			bcc	.LL445
10434                        	
10435                        		.dbg	line,	"include\routines_LEVELS.c", 2577; {
10436                        	
10437                        		.dbg	line,	"include\routines_LEVELS.c", 2578; spr_set(player_id);
10438                        		__ld.umq	_player_id
         01:DA7B  AD 15 23   			lda	_player_id
10439                        		__call		_spr_set.1
         01:DA7E  20 DD E7   			call	_spr_set.1
10440                        	
10441                        		.dbg	line,	"include\routines_LEVELS.c", 2579; spr_pattern(PLAYER_CLIMB_4_VRAM_ADR); 
10442                        		__ld.wi		8960
         01:DA81  62         			cla
         01:DA82  A0 23      			ldy.h	#8960
10443                        		__call		_spr_pattern.1
         01:DA84  20 26 E8   			call	_spr_pattern.1
10444                        	
10445                        		.dbg	line,	"include\routines_LEVELS.c", 2580; }
10446                        	
10447                        		.dbg	line,	"include\routines_LEVELS.c", 2582; else if(player_counter_anim == 11)
10448                        		__bra		.LL446
         01:DA87  80 5E      			bra	.LL446
10449    01:DA89             	.LL445:
10450                        		__ld.umq	_player_counter_anim
         01:DA89  AD 19 23   			lda	_player_counter_anim
10451                        		__equ_b.uiq	11
         01:DA8C  C9 0B      			cmp	#11
         01:DA8E  F0 01      			beq	!+
         01:DA90  18         			clc
         01:DA91             	!:
10452                        		__bfalse	.LL447
         01:DA91  90 0E      			bcc	.LL447
10453                        	
10454                        		.dbg	line,	"include\routines_LEVELS.c", 2583; {
10455                        	
10456                        		.dbg	line,	"include\routines_LEVELS.c", 2584; spr_set(player_id);
10457                        		__ld.umq	_player_id
         01:DA93  AD 15 23   			lda	_player_id
10458                        		__call		_spr_set.1
         01:DA96  20 DD E7   			call	_spr_set.1
10459                        	
10460                        		.dbg	line,	"include\routines_LEVELS.c", 2585; spr_pattern(PLAYER_CLIMB_5_VRAM_ADR); 
10461                        		__ld.wi		9216
         01:DA99  62         			cla
         01:DA9A  A0 24      			ldy.h	#9216
10462                        		__call		_spr_pattern.1
         01:DA9C  20 26 E8   			call	_spr_pattern.1
10463                        	
10464                        		.dbg	line,	"include\routines_LEVELS.c", 2586; }
10465                        	
10466                        		.dbg	line,	"include\routines_LEVELS.c", 2588; else if(player_counter_anim == 14)
10467                        		__bra		.LL448
         01:DA9F  80 46      			bra	.LL448
10468    01:DAA1             	.LL447:
10469                        		__ld.umq	_player_counter_anim
         01:DAA1  AD 19 23   			lda	_player_counter_anim
10470                        		__equ_b.uiq	14
         01:DAA4  C9 0E      			cmp	#14
         01:DAA6  F0 01      			beq	!+
         01:DAA8  18         			clc
         01:DAA9             	!:
10471                        		__bfalse	.LL449
         01:DAA9  90 0E      			bcc	.LL449
10472                        	
10473                        		.dbg	line,	"include\routines_LEVELS.c", 2589; {
10474                        	
10475                        		.dbg	line,	"include\routines_LEVELS.c", 2590; spr_set(player_id);
10476                        		__ld.umq	_player_id
         01:DAAB  AD 15 23   			lda	_player_id
10477                        		__call		_spr_set.1
         01:DAAE  20 DD E7   			call	_spr_set.1
10478                        	
10479                        		.dbg	line,	"include\routines_LEVELS.c", 2591; spr_pattern(PLAYER_CLIMB_6_VRAM_ADR); 
10480                        		__ld.wi		9472
         01:DAB1  62         			cla
         01:DAB2  A0 25      			ldy.h	#9472
10481                        		__call		_spr_pattern.1
         01:DAB4  20 26 E8   			call	_spr_pattern.1
10482                        	
10483                        		.dbg	line,	"include\routines_LEVELS.c", 2592; }
10484                        	
10485                        		.dbg	line,	"include\routines_LEVELS.c", 2594; else if(player_counter_anim == 17)
10486                        		__bra		.LL450
         01:DAB7  80 2E      			bra	.LL450
10487    01:DAB9             	.LL449:
10488                        		__ld.umq	_player_counter_anim
         01:DAB9  AD 19 23   			lda	_player_counter_anim
10489                        		__equ_b.uiq	17
         01:DABC  C9 11      			cmp	#17
         01:DABE  F0 01      			beq	!+
         01:DAC0  18         			clc
         01:DAC1             	!:
10490                        		__bfalse	.LL451
         01:DAC1  90 0E      			bcc	.LL451
10491                        	
10492                        		.dbg	line,	"include\routines_LEVELS.c", 2595; {
10493                        	
10494                        		.dbg	line,	"include\routines_LEVELS.c", 2596; spr_set(player_id);
10495                        		__ld.umq	_player_id
         01:DAC3  AD 15 23   			lda	_player_id
10496                        		__call		_spr_set.1
         01:DAC6  20 DD E7   			call	_spr_set.1
10497                        	
10498                        		.dbg	line,	"include\routines_LEVELS.c", 2597; spr_pattern(PLAYER_CLIMB_3_VRAM_ADR); 
10499                        		__ld.wi		8704
         01:DAC9  62         			cla
         01:DACA  A0 22      			ldy.h	#8704
10500                        		__call		_spr_pattern.1
         01:DACC  20 26 E8   			call	_spr_pattern.1
10501                        	
10502                        		.dbg	line,	"include\routines_LEVELS.c", 2598; }
10503                        	
10504                        		.dbg	line,	"include\routines_LEVELS.c", 2600; else if(player_counter_anim == 20)
10505                        		__bra		.LL452
         01:DACF  80 16      			bra	.LL452
10506    01:DAD1             	.LL451:
10507                        		__ld.umq	_player_counter_anim
         01:DAD1  AD 19 23   			lda	_player_counter_anim
10508                        		__equ_b.uiq	20
         01:DAD4  C9 14      			cmp	#20
         01:DAD6  F0 01      			beq	!+
         01:DAD8  18         			clc
         01:DAD9             	!:
10509                        		__bfalse	.LL453
         01:DAD9  90 0C      			bcc	.LL453
10510                        	
10511                        		.dbg	line,	"include\routines_LEVELS.c", 2601; {
10512                        	
10513                        		.dbg	line,	"include\routines_LEVELS.c", 2602; spr_set(player_id);
10514                        		__ld.umq	_player_id
         01:DADB  AD 15 23   			lda	_player_id
10515                        		__call		_spr_set.1
         01:DADE  20 DD E7   			call	_spr_set.1
10516                        	
10517                        		.dbg	line,	"include\routines_LEVELS.c", 2603; spr_pattern(PLAYER_CLIMB_2_VRAM_ADR); 
10518                        		__ld.wi		8448
         01:DAE1  62         			cla
         01:DAE2  A0 21      			ldy.h	#8448
10519                        		__call		_spr_pattern.1
         01:DAE4  20 26 E8   			call	_spr_pattern.1
10520                        	
10521                        		.dbg	line,	"include\routines_LEVELS.c", 2604; }
10522                        	
10523                        		.dbg	line,	"include\routines_LEVELS.c", 2607; player_counter_anim += 1;
10524    01:DAE7             	.LL453:
10525    01:DAE7             	.LL452:
10526    01:DAE7             	.LL450:
10527    01:DAE7             	.LL448:
10528    01:DAE7             	.LL446:
10529    01:DAE7             	.LL444:
10530    01:DAE7             	.LL442:
10531    01:DAE7             	.LL440:
10532                        		__add_st.umiq	1, _player_counter_anim
         01:DAE7  EE 19 23   			inc	_player_counter_anim
10533                        	
10534                        		.dbg	line,	"include\routines_LEVELS.c", 2609; if(player_counter_anim == 22)
10535                        		__ld.umq	_player_counter_anim
         01:DAEA  AD 19 23   			lda	_player_counter_anim
10536                        		__equ_b.uiq	22
         01:DAED  C9 16      			cmp	#22
         01:DAEF  F0 01      			beq	!+
         01:DAF1  18         			clc
         01:DAF2             	!:
10537                        		__bfalse	.LL454
         01:DAF2  90 03      			bcc	.LL454
10538                        	
10539                        		.dbg	line,	"include\routines_LEVELS.c", 2610; {
10540                        	
10541                        		.dbg	line,	"include\routines_LEVELS.c", 2611; player_counter_anim = 0;
10542                        		__st.umiq	0, _player_counter_anim
         01:DAF4  9C 19 23   			stz	_player_counter_anim
10543                        	
10544                        		.dbg	line,	"include\routines_LEVELS.c", 2612; }
10545                        	
10546                        		.dbg	line,	"include\routines_LEVELS.c", 2614; recenter_CAMERA();
10547    01:DAF7             	.LL454:
10548                        		__call		_recenter_CAMERA
         01:DAF7  20 63 FF   			call	_recenter_CAMERA
10549                        	
10550                        		.dbg	line,	"include\routines_LEVELS.c", 2615; }
10551                        	
10552                        		.dbg	line,	"include\routines_LEVELS.c", 2618; else if(player_state == STATE_CLIMB_DOWN)
10553                        		__bra		.LL455
         01:DAFA  4C 71 DD   			bra	.LL455
10554    01:DAFD             	.LL438:
10555                        		__ld.umq	_player_state
         01:DAFD  AD 16 23   			lda	_player_state
10556                        		__equ_b.uiq	12
         01:DB00  C9 0C      			cmp	#12
         01:DB02  F0 01      			beq	!+
         01:DB04  18         			clc
         01:DB05             	!:
10557                        		__bfalse	.LL456
         01:DB05  B0 03 4C DF			bcc	.LL456
         01:DB09  DB          
10558                        	
10559                        		.dbg	line,	"include\routines_LEVELS.c", 2619; {
10560                        	
10561                        		.dbg	line,	"include\routines_LEVELS.c", 2620; if(player_counter_anim == 0)
10562                        		__not.um	_player_counter_anim
         01:DB0A  AD 19 23   			lda	_player_counter_anim
         01:DB0D  18         			clc
         01:DB0E  D0 01      			bne	!+
         01:DB10  38         			sec
         01:DB11             	!:
10563                        		__bfalse	.LL457
         01:DB11  90 0F      			bcc	.LL457
10564                        	
10565                        		.dbg	line,	"include\routines_LEVELS.c", 2621; {
10566                        	
10567                        		.dbg	line,	"include\routines_LEVELS.c", 2622; spr_set(player_id);
10568                        		__ld.umq	_player_id
         01:DB13  AD 15 23   			lda	_player_id
10569                        		__call		_spr_set.1
         01:DB16  20 DD E7   			call	_spr_set.1
10570                        	
10571                        		.dbg	line,	"include\routines_LEVELS.c", 2623; spr_pattern(PLAYER_CLIMB_1_VRAM_ADR); 
10572                        		__ld.wi		8192
         01:DB19  62         			cla
         01:DB1A  A0 20      			ldy.h	#8192
10573                        		__call		_spr_pattern.1
         01:DB1C  20 26 E8   			call	_spr_pattern.1
10574                        	
10575                        		.dbg	line,	"include\routines_LEVELS.c", 2624; }
10576                        	
10577                        		.dbg	line,	"include\routines_LEVELS.c", 2626; else if(player_counter_anim == 2)
10578                        		__bra		.LL458
         01:DB1F  4C C9 DB   			bra	.LL458
10579    01:DB22             	.LL457:
10580                        		__ld.umq	_player_counter_anim
         01:DB22  AD 19 23   			lda	_player_counter_anim
10581                        		__equ_b.uiq	2
         01:DB25  C9 02      			cmp	#2
         01:DB27  F0 01      			beq	!+
         01:DB29  18         			clc
         01:DB2A             	!:
10582                        		__bfalse	.LL459
         01:DB2A  90 0F      			bcc	.LL459
10583                        	
10584                        		.dbg	line,	"include\routines_LEVELS.c", 2627; {
10585                        	
10586                        		.dbg	line,	"include\routines_LEVELS.c", 2628; spr_set(player_id);
10587                        		__ld.umq	_player_id
         01:DB2C  AD 15 23   			lda	_player_id
10588                        		__call		_spr_set.1
         01:DB2F  20 DD E7   			call	_spr_set.1
10589                        	
10590                        		.dbg	line,	"include\routines_LEVELS.c", 2629; spr_pattern(PLAYER_CLIMB_2_VRAM_ADR); 
10591                        		__ld.wi		8448
         01:DB32  62         			cla
         01:DB33  A0 21      			ldy.h	#8448
10592                        		__call		_spr_pattern.1
         01:DB35  20 26 E8   			call	_spr_pattern.1
10593                        	
10594                        		.dbg	line,	"include\routines_LEVELS.c", 2630; }
10595                        	
10596                        		.dbg	line,	"include\routines_LEVELS.c", 2632; else if(player_counter_anim == 5)
10597                        		__bra		.LL460
         01:DB38  4C C9 DB   			bra	.LL460
10598    01:DB3B             	.LL459:
10599                        		__ld.umq	_player_counter_anim
         01:DB3B  AD 19 23   			lda	_player_counter_anim
10600                        		__equ_b.uiq	5
         01:DB3E  C9 05      			cmp	#5
         01:DB40  F0 01      			beq	!+
         01:DB42  18         			clc
         01:DB43             	!:
10601                        		__bfalse	.LL461
         01:DB43  90 0E      			bcc	.LL461
10602                        	
10603                        		.dbg	line,	"include\routines_LEVELS.c", 2633; {
10604                        	
10605                        		.dbg	line,	"include\routines_LEVELS.c", 2634; spr_set(player_id);
10606                        		__ld.umq	_player_id
         01:DB45  AD 15 23   			lda	_player_id
10607                        		__call		_spr_set.1
         01:DB48  20 DD E7   			call	_spr_set.1
10608                        	
10609                        		.dbg	line,	"include\routines_LEVELS.c", 2635; spr_pattern(PLAYER_CLIMB_3_VRAM_ADR); 
10610                        		__ld.wi		8704
         01:DB4B  62         			cla
         01:DB4C  A0 22      			ldy.h	#8704
10611                        		__call		_spr_pattern.1
         01:DB4E  20 26 E8   			call	_spr_pattern.1
10612                        	
10613                        		.dbg	line,	"include\routines_LEVELS.c", 2636; }
10614                        	
10615                        		.dbg	line,	"include\routines_LEVELS.c", 2638; else if(player_counter_anim == 8)
10616                        		__bra		.LL462
         01:DB51  80 76      			bra	.LL462
10617    01:DB53             	.LL461:
10618                        		__ld.umq	_player_counter_anim
         01:DB53  AD 19 23   			lda	_player_counter_anim
10619                        		__equ_b.uiq	8
         01:DB56  C9 08      			cmp	#8
         01:DB58  F0 01      			beq	!+
         01:DB5A  18         			clc
         01:DB5B             	!:
10620                        		__bfalse	.LL463
         01:DB5B  90 0E      			bcc	.LL463
10621                        	
10622                        		.dbg	line,	"include\routines_LEVELS.c", 2639; {
10623                        	
10624                        		.dbg	line,	"include\routines_LEVELS.c", 2640; spr_set(player_id);
10625                        		__ld.umq	_player_id
         01:DB5D  AD 15 23   			lda	_player_id
10626                        		__call		_spr_set.1
         01:DB60  20 DD E7   			call	_spr_set.1
10627                        	
10628                        		.dbg	line,	"include\routines_LEVELS.c", 2641; spr_pattern(PLAYER_CLIMB_4_VRAM_ADR); 
10629                        		__ld.wi		8960
         01:DB63  62         			cla
         01:DB64  A0 23      			ldy.h	#8960
10630                        		__call		_spr_pattern.1
         01:DB66  20 26 E8   			call	_spr_pattern.1
10631                        	
10632                        		.dbg	line,	"include\routines_LEVELS.c", 2642; }
10633                        	
10634                        		.dbg	line,	"include\routines_LEVELS.c", 2644; else if(player_counter_anim == 11)
10635                        		__bra		.LL464
         01:DB69  80 5E      			bra	.LL464
10636    01:DB6B             	.LL463:
10637                        		__ld.umq	_player_counter_anim
         01:DB6B  AD 19 23   			lda	_player_counter_anim
10638                        		__equ_b.uiq	11
         01:DB6E  C9 0B      			cmp	#11
         01:DB70  F0 01      			beq	!+
         01:DB72  18         			clc
         01:DB73             	!:
10639                        		__bfalse	.LL465
         01:DB73  90 0E      			bcc	.LL465
10640                        	
10641                        		.dbg	line,	"include\routines_LEVELS.c", 2645; {
10642                        	
10643                        		.dbg	line,	"include\routines_LEVELS.c", 2646; spr_set(player_id);
10644                        		__ld.umq	_player_id
         01:DB75  AD 15 23   			lda	_player_id
10645                        		__call		_spr_set.1
         01:DB78  20 DD E7   			call	_spr_set.1
10646                        	
10647                        		.dbg	line,	"include\routines_LEVELS.c", 2647; spr_pattern(PLAYER_CLIMB_5_VRAM_ADR); 
10648                        		__ld.wi		9216
         01:DB7B  62         			cla
         01:DB7C  A0 24      			ldy.h	#9216
10649                        		__call		_spr_pattern.1
         01:DB7E  20 26 E8   			call	_spr_pattern.1
10650                        	
10651                        		.dbg	line,	"include\routines_LEVELS.c", 2648; }
10652                        	
10653                        		.dbg	line,	"include\routines_LEVELS.c", 2650; else if(player_counter_anim == 14)
10654                        		__bra		.LL466
         01:DB81  80 46      			bra	.LL466
10655    01:DB83             	.LL465:
10656                        		__ld.umq	_player_counter_anim
         01:DB83  AD 19 23   			lda	_player_counter_anim
10657                        		__equ_b.uiq	14
         01:DB86  C9 0E      			cmp	#14
         01:DB88  F0 01      			beq	!+
         01:DB8A  18         			clc
         01:DB8B             	!:
10658                        		__bfalse	.LL467
         01:DB8B  90 0E      			bcc	.LL467
10659                        	
10660                        		.dbg	line,	"include\routines_LEVELS.c", 2651; {
10661                        	
10662                        		.dbg	line,	"include\routines_LEVELS.c", 2652; spr_set(player_id);
10663                        		__ld.umq	_player_id
         01:DB8D  AD 15 23   			lda	_player_id
10664                        		__call		_spr_set.1
         01:DB90  20 DD E7   			call	_spr_set.1
10665                        	
10666                        		.dbg	line,	"include\routines_LEVELS.c", 2653; spr_pattern(PLAYER_CLIMB_4_VRAM_ADR); 
10667                        		__ld.wi		8960
         01:DB93  62         			cla
         01:DB94  A0 23      			ldy.h	#8960
10668                        		__call		_spr_pattern.1
         01:DB96  20 26 E8   			call	_spr_pattern.1
10669                        	
10670                        		.dbg	line,	"include\routines_LEVELS.c", 2654; }
10671                        	
10672                        		.dbg	line,	"include\routines_LEVELS.c", 2656; else if(player_counter_anim == 17)
10673                        		__bra		.LL468
         01:DB99  80 2E      			bra	.LL468
10674    01:DB9B             	.LL467:
10675                        		__ld.umq	_player_counter_anim
         01:DB9B  AD 19 23   			lda	_player_counter_anim
10676                        		__equ_b.uiq	17
         01:DB9E  C9 11      			cmp	#17
         01:DBA0  F0 01      			beq	!+
         01:DBA2  18         			clc
         01:DBA3             	!:
10677                        		__bfalse	.LL469
         01:DBA3  90 0E      			bcc	.LL469
10678                        	
10679                        		.dbg	line,	"include\routines_LEVELS.c", 2657; {
10680                        	
10681                        		.dbg	line,	"include\routines_LEVELS.c", 2658; spr_set(player_id);
10682                        		__ld.umq	_player_id
         01:DBA5  AD 15 23   			lda	_player_id
10683                        		__call		_spr_set.1
         01:DBA8  20 DD E7   			call	_spr_set.1
10684                        	
10685                        		.dbg	line,	"include\routines_LEVELS.c", 2659; spr_pattern(PLAYER_CLIMB_3_VRAM_ADR); 
10686                        		__ld.wi		8704
         01:DBAB  62         			cla
         01:DBAC  A0 22      			ldy.h	#8704
10687                        		__call		_spr_pattern.1
         01:DBAE  20 26 E8   			call	_spr_pattern.1
10688                        	
10689                        		.dbg	line,	"include\routines_LEVELS.c", 2660; }
10690                        	
10691                        		.dbg	line,	"include\routines_LEVELS.c", 2662; else if(player_counter_anim == 20)
10692                        		__bra		.LL470
         01:DBB1  80 16      			bra	.LL470
10693    01:DBB3             	.LL469:
10694                        		__ld.umq	_player_counter_anim
         01:DBB3  AD 19 23   			lda	_player_counter_anim
10695                        		__equ_b.uiq	20
         01:DBB6  C9 14      			cmp	#20
         01:DBB8  F0 01      			beq	!+
         01:DBBA  18         			clc
         01:DBBB             	!:
10696                        		__bfalse	.LL471
         01:DBBB  90 0C      			bcc	.LL471
10697                        	
10698                        		.dbg	line,	"include\routines_LEVELS.c", 2663; {
10699                        	
10700                        		.dbg	line,	"include\routines_LEVELS.c", 2664; spr_set(player_id);
10701                        		__ld.umq	_player_id
         01:DBBD  AD 15 23   			lda	_player_id
10702                        		__call		_spr_set.1
         01:DBC0  20 DD E7   			call	_spr_set.1
10703                        	
10704                        		.dbg	line,	"include\routines_LEVELS.c", 2665; spr_pattern(PLAYER_CLIMB_2_VRAM_ADR); 
10705                        		__ld.wi		8448
         01:DBC3  62         			cla
         01:DBC4  A0 21      			ldy.h	#8448
10706                        		__call		_spr_pattern.1
         01:DBC6  20 26 E8   			call	_spr_pattern.1
10707                        	
10708                        		.dbg	line,	"include\routines_LEVELS.c", 2666; }
10709                        	
10710                        		.dbg	line,	"include\routines_LEVELS.c", 2669; player_counter_anim += 1;
10711    01:DBC9             	.LL471:
10712    01:DBC9             	.LL470:
10713    01:DBC9             	.LL468:
10714    01:DBC9             	.LL466:
10715    01:DBC9             	.LL464:
10716    01:DBC9             	.LL462:
10717    01:DBC9             	.LL460:
10718    01:DBC9             	.LL458:
10719                        		__add_st.umiq	1, _player_counter_anim
         01:DBC9  EE 19 23   			inc	_player_counter_anim
10720                        	
10721                        		.dbg	line,	"include\routines_LEVELS.c", 2671; if(player_counter_anim == 22)
10722                        		__ld.umq	_player_counter_anim
         01:DBCC  AD 19 23   			lda	_player_counter_anim
10723                        		__equ_b.uiq	22
         01:DBCF  C9 16      			cmp	#22
         01:DBD1  F0 01      			beq	!+
         01:DBD3  18         			clc
         01:DBD4             	!:
10724                        		__bfalse	.LL472
         01:DBD4  90 03      			bcc	.LL472
10725                        	
10726                        		.dbg	line,	"include\routines_LEVELS.c", 2672; {
10727                        	
10728                        		.dbg	line,	"include\routines_LEVELS.c", 2673; player_counter_anim = 0;
10729                        		__st.umiq	0, _player_counter_anim
         01:DBD6  9C 19 23   			stz	_player_counter_anim
10730                        	
10731                        		.dbg	line,	"include\routines_LEVELS.c", 2674; }
10732                        	
10733                        		.dbg	line,	"include\routines_LEVELS.c", 2676; recenter_CAMERA();
10734    01:DBD9             	.LL472:
10735                        		__call		_recenter_CAMERA
         01:DBD9  20 63 FF   			call	_recenter_CAMERA
10736                        	
10737                        		.dbg	line,	"include\routines_LEVELS.c", 2677; }
10738                        	
10739                        		.dbg	line,	"include\routines_LEVELS.c", 2680; else if(player_state == STATE_JUMP_LADDER)
10740                        		__bra		.LL473
         01:DBDC  4C 71 DD   			bra	.LL473
10741    01:DBDF             	.LL456:
10742                        		__ld.umq	_player_state
         01:DBDF  AD 16 23   			lda	_player_state
10743                        		__equ_b.uiq	13
         01:DBE2  C9 0D      			cmp	#13
         01:DBE4  F0 01      			beq	!+
         01:DBE6  18         			clc
         01:DBE7             	!:
10744                        		__bfalse	.LL474
         01:DBE7  B0 03 4C 71			bcc	.LL474
         01:DBEB  DD          
10745                        	
10746                        		.dbg	line,	"include\routines_LEVELS.c", 2681; {
10747                        	
10748                        		.dbg	line,	"include\routines_LEVELS.c", 2682; unsigned char i;
10749                        	
10750                        		.dbg	line,	"include\routines_LEVELS.c", 2683; i = 1;
10751                        		__st.umiq	1, __update_PLAYER_end - 8  /* i */
         01:DBEC  A9 01      			lda.l	#1
         01:DBEE  8D 05 23   			sta	__update_PLAYER_end - 8
10752                        	
10753                        		.dbg	line,	"include\routines_LEVELS.c", 2686; if(player_counter_anim == 0)
10754                        		__not.um	_player_counter_anim
         01:DBF1  AD 19 23   			lda	_player_counter_anim
         01:DBF4  18         			clc
         01:DBF5  D0 01      			bne	!+
         01:DBF7  38         			sec
         01:DBF8             	!:
10755                        		__bfalse	.LL475
         01:DBF8  90 11      			bcc	.LL475
10756                        	
10757                        		.dbg	line,	"include\routines_LEVELS.c", 2687; {
10758                        	
10759                        		.dbg	line,	"include\routines_LEVELS.c", 2688; spr_set(player_id);
10760                        		__ld.umq	_player_id
         01:DBFA  AD 15 23   			lda	_player_id
10761                        		__call		_spr_set.1
         01:DBFD  20 DD E7   			call	_spr_set.1
10762                        	
10763                        		.dbg	line,	"include\routines_LEVELS.c", 2689; spr_pattern(PLAYER_JUMP_VRAM_ADR); 
10764                        		__ld.wi		7424
         01:DC00  62         			cla
         01:DC01  A0 1D      			ldy.h	#7424
10765                        		__call		_spr_pattern.1
         01:DC03  20 26 E8   			call	_spr_pattern.1
10766                        	
10767                        		.dbg	line,	"include\routines_LEVELS.c", 2691; player_counter_anim = 1;
10768                        		__st.umiq	1, _player_counter_anim
         01:DC06  A9 01      			lda.l	#1
         01:DC08  8D 19 23   			sta	_player_counter_anim
10769                        	
10770                        		.dbg	line,	"include\routines_LEVELS.c", 2692; }
10771                        	
10772                        		.dbg	line,	"include\routines_LEVELS.c", 2695; player_pos_y += TABLE_PLAYER_JUMP_V[player_index_jump];
10773    01:DC0B             	.LL475:
10774                        		__ldx.umq	_player_index_jump
         01:DC0B  AE 1A 23   			ldx	_player_index_jump
10775                        		__ld.bax	_TABLE_PLAYER_JUMP_V
         01:DC0E  BD F9 60   			lda	_TABLE_PLAYER_JUMP_V, x
         01:DC11  C2         			cly
         01:DC12  10 01      			bpl	!+
         01:DC14  88         			dey
         01:DC15             	!:
10776                        		__add_st.wmq	_player_pos_y
         01:DC15  18         			clc
         01:DC16  6D D5 24   			adc.l	_player_pos_y
         01:DC19  8D D5 24   			sta.l	_player_pos_y
         01:DC1C  98         			tya
         01:DC1D  6D D6 24   			adc.h	_player_pos_y
         01:DC20  8D D6 24   			sta.h	_player_pos_y
10777                        	
10778                        		.dbg	line,	"include\routines_LEVELS.c", 2697; // CHECK COLLISION WITH CEILING //
10779                        	
10780                        		.dbg	line,	"include\routines_LEVELS.c", 2698; check_BG( 15 , 8 );
10781                        		__ld.wi		15
         01:DC23  A9 0F      			lda.l	#15
         01:DC25  C2         			cly
10782                        		__pusharg.wr
         01:DC26  A6 8D      			ldx	<__sp
         01:DC28  CA         			dex
         01:DC29  CA         			dex
         01:DC2A  95 08      			sta.l	<__stack, x
         01:DC2C  94 09      			sty.h	<__stack, x
         01:DC2E  86 8D      			stx	<__sp
10783                        		__ld.wi		8
         01:DC30  A9 08      			lda.l	#8
         01:DC32  C2         			cly
10784                        		__pusharg.wr
         01:DC33  A6 8D      			ldx	<__sp
         01:DC35  CA         			dex
         01:DC36  CA         			dex
         01:DC37  95 08      			sta.l	<__stack, x
         01:DC39  94 09      			sty.h	<__stack, x
         01:DC3B  86 8D      			stx	<__sp
10785                        		__call		_check_BG
         01:DC3D  20 6D FF   			call	_check_BG
10786                        	
10787                        		.dbg	line,	"include\routines_LEVELS.c", 2700; if(map_blk_flag == TILE_BG)
10788                        		__ld.umq	_map_blk_flag
         01:DC40  AD B0 2B   			lda	_map_blk_flag
10789                        		__equ_b.uiq	1
         01:DC43  C9 01      			cmp	#1
         01:DC45  F0 01      			beq	!+
         01:DC47  18         			clc
         01:DC48             	!:
10790                        		__bfalse	.LL476
         01:DC48  90 5A      			bcc	.LL476
10791                        	
10792                        		.dbg	line,	"include\routines_LEVELS.c", 2701; {
10793                        	
10794                        		.dbg	line,	"include\routines_LEVELS.c", 2702; for(i=1 ; i<8 ; i++)
10795                        		__st.umiq	1, __update_PLAYER_end - 8  /* i */
         01:DC4A  A9 01      			lda.l	#1
         01:DC4C  8D 05 23   			sta	__update_PLAYER_end - 8
10796    01:DC4F             	.LL477:
10797                        		__ld.umq	__update_PLAYER_end - 8  /* i */
         01:DC4F  AD 05 23   			lda	__update_PLAYER_end - 8
10798                        		__ult_b.uiq	8
         01:DC52  C9 08      			cmp	#8		; Subtract integer from A.
         01:DC54  6A         			ror	a		; CC if A < integer.
         01:DC55  49 80      			eor	#$80
         01:DC57  2A         			rol	a
10799                        		__btrue		.LL479
         01:DC58  B0 07      			bcs	.LL479
10800                        		__bra		.LL480
         01:DC5A  80 48      			bra	.LL480
10801    01:DC5C             	.LL478:
10802                        		__inc.umq	__update_PLAYER_end - 8  /* i */
         01:DC5C  EE 05 23   			inc	__update_PLAYER_end - 8
10803                        		__bra		.LL477
         01:DC5F  80 EE      			bra	.LL477
10804    01:DC61             	.LL479:
10805                        	
10806                        		.dbg	line,	"include\routines_LEVELS.c", 2703; {
10807                        	
10808                        		.dbg	line,	"include\routines_LEVELS.c", 2704; check_BG( 15 , 8 + i );
10809                        		__ld.wi		15
         01:DC61  A9 0F      			lda.l	#15
         01:DC63  C2         			cly
10810                        		__pusharg.wr
         01:DC64  A6 8D      			ldx	<__sp
         01:DC66  CA         			dex
         01:DC67  CA         			dex
         01:DC68  95 08      			sta.l	<__stack, x
         01:DC6A  94 09      			sty.h	<__stack, x
         01:DC6C  86 8D      			stx	<__sp
10811                        		__ld.wi		8
         01:DC6E  A9 08      			lda.l	#8
         01:DC70  C2         			cly
10812                        		__add.um	__update_PLAYER_end - 8  /* i */
         01:DC71  18         			clc
         01:DC72  6D 05 23   			adc	__update_PLAYER_end - 8
         01:DC75  90 01      			bcc	!+
         01:DC77  C8         			iny
         01:DC78             	!:
10813                        		__pusharg.wr
         01:DC78  A6 8D      			ldx	<__sp
         01:DC7A  CA         			dex
         01:DC7B  CA         			dex
         01:DC7C  95 08      			sta.l	<__stack, x
         01:DC7E  94 09      			sty.h	<__stack, x
         01:DC80  86 8D      			stx	<__sp
10814                        		__call		_check_BG
         01:DC82  20 6D FF   			call	_check_BG
10815                        	
10816                        		.dbg	line,	"include\routines_LEVELS.c", 2705; {
10817                        	
10818                        		.dbg	line,	"include\routines_LEVELS.c", 2706; if(map_blk_flag == TILE_EMPTY)
10819                        		__not.um	_map_blk_flag
         01:DC85  AD B0 2B   			lda	_map_blk_flag
         01:DC88  18         			clc
         01:DC89  D0 01      			bne	!+
         01:DC8B  38         			sec
         01:DC8C             	!:
10820                        		__bfalse	.LL481
         01:DC8C  90 CE      			bcc	.LL481
10821                        	
10822                        		.dbg	line,	"include\routines_LEVELS.c", 2707; {
10823                        	
10824                        		.dbg	line,	"include\routines_LEVELS.c", 2708; player_pos_y += i;
10825                        		__ld.um		__update_PLAYER_end - 8  /* i */
         01:DC8E  AD 05 23   			lda	__update_PLAYER_end - 8
         01:DC91  C2         			cly
10826                        		__add_st.wmq	_player_pos_y
         01:DC92  18         			clc
         01:DC93  6D D5 24   			adc.l	_player_pos_y
         01:DC96  8D D5 24   			sta.l	_player_pos_y
         01:DC99  98         			tya
         01:DC9A  6D D6 24   			adc.h	_player_pos_y
         01:DC9D  8D D6 24   			sta.h	_player_pos_y
10827                        	
10828                        		.dbg	line,	"include\routines_LEVELS.c", 2709; break;
10829                        		__bra		.LL480
         01:DCA0  80 02      			bra	.LL480
10830                        	
10831                        		.dbg	line,	"include\routines_LEVELS.c", 2710; }
10832                        	
10833                        		.dbg	line,	"include\routines_LEVELS.c", 2711; }
10834    01:DCA2             	.LL481	.alias		.LL478
10835                        	
10836                        		.dbg	line,	"include\routines_LEVELS.c", 2712; }
10837                        		__bra		.LL478
         01:DCA2  80 B8      			bra	.LL478
10838    01:DCA4             	.LL480:
10839                        	
10840                        		.dbg	line,	"include\routines_LEVELS.c", 2713; }
10841                        	
10842                        		.dbg	line,	"include\routines_LEVELS.c", 2715; spr_set(player_id);
10843    01:DCA4             	.LL476:
10844                        		__ld.umq	_player_id
         01:DCA4  AD 15 23   			lda	_player_id
10845                        		__call		_spr_set.1
         01:DCA7  20 DD E7   			call	_spr_set.1
10846                        	
10847                        		.dbg	line,	"include\routines_LEVELS.c", 2716; spr_y(player_pos_y);
10848                        		__ld.wm		_player_pos_y
         01:DCAA  AD D5 24   			lda.l	_player_pos_y
         01:DCAD  AC D6 24   			ldy.h	_player_pos_y
10849                        		__call		_spr_y.1
         01:DCB0  20 19 E8   			call	_spr_y.1
10850                        	
10851                        		.dbg	line,	"include\routines_LEVELS.c", 2720; if(player_index_jump < 34)
10852                        		__ld.umq	_player_index_jump
         01:DCB3  AD 1A 23   			lda	_player_index_jump
10853                        		__ult_b.uiq	34
         01:DCB6  C9 22      			cmp	#34		; Subtract integer from A.
         01:DCB8  6A         			ror	a		; CC if A < integer.
         01:DCB9  49 80      			eor	#$80
         01:DCBB  2A         			rol	a
10854                        		__bfalse	.LL482
         01:DCBC  90 03      			bcc	.LL482
10855                        	
10856                        		.dbg	line,	"include\routines_LEVELS.c", 2721; {
10857                        	
10858                        		.dbg	line,	"include\routines_LEVELS.c", 2722; player_index_jump += 1;
10859                        		__add_st.umiq	1, _player_index_jump
         01:DCBE  EE 1A 23   			inc	_player_index_jump
10860                        	
10861                        		.dbg	line,	"include\routines_LEVELS.c", 2723; }
10862                        	
10863                        		.dbg	line,	"include\routines_LEVELS.c", 2728; //--------------------------------------------------------------------------------------//
10864                        	
10865                        		.dbg	line,	"include\routines_LEVELS.c", 2729; //                                   LADDER COLLISION                                   //
10866                        	
10867                        		.dbg	line,	"include\routines_LEVELS.c", 2730; //--------------------------------------------------------------------------------------//
10868                        	
10869                        		.dbg	line,	"include\routines_LEVELS.c", 2732; if(player_index_jump > 18)
10870    01:DCC1             	.LL482:
10871                        		__ld.umq	_player_index_jump
         01:DCC1  AD 1A 23   			lda	_player_index_jump
10872                        		__ugt_b.uiq	18
         01:DCC4  18         			clc			; Subtract integer+1 from A.
         01:DCC5  E9 12      			sbc	#18		; CS if A > integer.
10873                        		__bfalse	.LL483
         01:DCC7  B0 03 4C 5C			bcc	.LL483
         01:DCCB  DD          
10874                        	
10875                        		.dbg	line,	"include\routines_LEVELS.c", 2733; {
10876                        	
10877                        		.dbg	line,	"include\routines_LEVELS.c", 2734; // CHECK COLLISION WITH LADDERS //
10878                        	
10879                        		.dbg	line,	"include\routines_LEVELS.c", 2735; check_BG( 16 , 8 );
10880                        		__ld.wi		16
         01:DCCC  A9 10      			lda.l	#16
         01:DCCE  C2         			cly
10881                        		__pusharg.wr
         01:DCCF  A6 8D      			ldx	<__sp
         01:DCD1  CA         			dex
         01:DCD2  CA         			dex
         01:DCD3  95 08      			sta.l	<__stack, x
         01:DCD5  94 09      			sty.h	<__stack, x
         01:DCD7  86 8D      			stx	<__sp
10882                        		__ld.wi		8
         01:DCD9  A9 08      			lda.l	#8
         01:DCDB  C2         			cly
10883                        		__pusharg.wr
         01:DCDC  A6 8D      			ldx	<__sp
         01:DCDE  CA         			dex
         01:DCDF  CA         			dex
         01:DCE0  95 08      			sta.l	<__stack, x
         01:DCE2  94 09      			sty.h	<__stack, x
         01:DCE4  86 8D      			stx	<__sp
10884                        		__call		_check_BG
         01:DCE6  20 6D FF   			call	_check_BG
10885                        	
10886                        		.dbg	line,	"include\routines_LEVELS.c", 2737; // IF PLAYER HITS THE LADDER //
10887                        	
10888                        		.dbg	line,	"include\routines_LEVELS.c", 2738; if(map_blk_flag == TILE_LADDER)
10889                        		__ld.umq	_map_blk_flag
         01:DCE9  AD B0 2B   			lda	_map_blk_flag
10890                        		__equ_b.uiq	2
         01:DCEC  C9 02      			cmp	#2
         01:DCEE  F0 01      			beq	!+
         01:DCF0  18         			clc
         01:DCF1             	!:
10891                        		__bfalse	.LL484
         01:DCF1  90 69      			bcc	.LL484
10892                        	
10893                        		.dbg	line,	"include\routines_LEVELS.c", 2739; {
10894                        	
10895                        		.dbg	line,	"include\routines_LEVELS.c", 2740; // CAMERA GOES 8 PX BACKWARD //
10896                        	
10897                        		.dbg	line,	"include\routines_LEVELS.c", 2741; sgx_map_pxl_x = ( (sgx_map_pxl_x >> 3) << 3 );
10898                        		__ld.wm		_sgx_map_pxl_x
         01:DCF3  AD 8F 26   			lda.l	_sgx_map_pxl_x
         01:DCF6  AC 90 26   			ldy.h	_sgx_map_pxl_x
10899                        		__lsr.wi	3
         01:DCF9  84 00      			sty	__temp
         01:DCFB  20 3A E2   			jsr	lsrw3
10900                        		__asl.wi	3
         01:DCFE  84 00      			sty	__temp
         01:DD00  20 D7 E1   			jsr	aslw3
10901                        		__st.wmq	_sgx_map_pxl_x
         01:DD03  8D 8F 26   			sta.l	_sgx_map_pxl_x
         01:DD06  8C 90 26   			sty.h	_sgx_map_pxl_x
10902                        	
10903                        		.dbg	line,	"include\routines_LEVELS.c", 2743; // SO WE UPDATE THE MAP //
10904                        	
10905                        		.dbg	line,	"include\routines_LEVELS.c", 2744; sgx_scroll_map();
10906                        		__call		_sgx_scroll_map
         01:DD09  20 81 FF   			call	_sgx_scroll_map
10907                        	
10908                        		.dbg	line,	"include\routines_LEVELS.c", 2746; // CHECK IF THE PLAYER STANDS RIGHT TO THE LADDER //
10909                        	
10910                        		.dbg	line,	"include\routines_LEVELS.c", 2747; check_BG( 31 , 8 );
10911                        		__ld.wi		31
         01:DD0C  A9 1F      			lda.l	#31
         01:DD0E  C2         			cly
10912                        		__pusharg.wr
         01:DD0F  A6 8D      			ldx	<__sp
         01:DD11  CA         			dex
         01:DD12  CA         			dex
         01:DD13  95 08      			sta.l	<__stack, x
         01:DD15  94 09      			sty.h	<__stack, x
         01:DD17  86 8D      			stx	<__sp
10913                        		__ld.wi		8
         01:DD19  A9 08      			lda.l	#8
         01:DD1B  C2         			cly
10914                        		__pusharg.wr
         01:DD1C  A6 8D      			ldx	<__sp
         01:DD1E  CA         			dex
         01:DD1F  CA         			dex
         01:DD20  95 08      			sta.l	<__stack, x
         01:DD22  94 09      			sty.h	<__stack, x
         01:DD24  86 8D      			stx	<__sp
10915                        		__call		_check_BG
         01:DD26  20 6D FF   			call	_check_BG
10916                        	
10917                        		.dbg	line,	"include\routines_LEVELS.c", 2749; if(map_blk_flag == TILE_LADDER)
10918                        		__ld.umq	_map_blk_flag
         01:DD29  AD B0 2B   			lda	_map_blk_flag
10919                        		__equ_b.uiq	2
         01:DD2C  C9 02      			cmp	#2
         01:DD2E  F0 01      			beq	!+
         01:DD30  18         			clc
         01:DD31             	!:
10920                        		__bfalse	.LL485
         01:DD31  90 0E      			bcc	.LL485
10921                        	
10922                        		.dbg	line,	"include\routines_LEVELS.c", 2750; {
10923                        	
10924                        		.dbg	line,	"include\routines_LEVELS.c", 2751; sgx_map_pxl_x += 8;
10925                        		__add_st.wmiq	8, _sgx_map_pxl_x
         01:DD33  18         			clc
         01:DD34  AD 8F 26   			lda.l	_sgx_map_pxl_x
         01:DD37  69 08      			adc.l	#8
         01:DD39  8D 8F 26   			sta.l	_sgx_map_pxl_x
         01:DD3C  90 03      			bcc	!+
         01:DD3E  EE 90 26   			inc.h	_sgx_map_pxl_x
         01:DD41             	!:
10926                        	
10927                        		.dbg	line,	"include\routines_LEVELS.c", 2752; }
10928                        	
10929                        		.dbg	line,	"include\routines_LEVELS.c", 2754; //spr_set(player_id);
10930                        	
10931                        		.dbg	line,	"include\routines_LEVELS.c", 2755; spr_pattern(PLAYER_HANG_VRAM_ADR);
10932    01:DD41             	.LL485:
10933                        		__ld.wi		7936
         01:DD41  62         			cla
         01:DD42  A0 1F      			ldy.h	#7936
10934                        		__call		_spr_pattern.1
         01:DD44  20 26 E8   			call	_spr_pattern.1
10935                        	
10936                        		.dbg	line,	"include\routines_LEVELS.c", 2757; player_counter_anim = 0;//
10937                        		__st.umiq	0, _player_counter_anim
         01:DD47  9C 19 23   			stz	_player_counter_anim
10938                        	
10939                        		.dbg	line,	"include\routines_LEVELS.c", 2758; player_index_jump = 0;
10940                        		__st.umiq	0, _player_index_jump
         01:DD4A  9C 1A 23   			stz	_player_index_jump
10941                        	
10942                        		.dbg	line,	"include\routines_LEVELS.c", 2759; jump_ladder = TRUE;
10943                        		__st.umiq	1, _jump_ladder
         01:DD4D  A9 01      			lda.l	#1
         01:DD4F  8D 1F 23   			sta	_jump_ladder
10944                        	
10945                        		.dbg	line,	"include\routines_LEVELS.c", 2760; jump_max_index = 29;
10946                        		__st.umiq	29, _jump_max_index
         01:DD52  A9 1D      			lda.l	#29
         01:DD54  8D 20 23   			sta	_jump_max_index
10947                        	
10948                        		.dbg	line,	"include\routines_LEVELS.c", 2761; player_state = STATE_HANG;
10949                        		__st.umiq	10, _player_state
         01:DD57  A9 0A      			lda.l	#10
         01:DD59  8D 16 23   			sta	_player_state
10950                        	
10951                        		.dbg	line,	"include\routines_LEVELS.c", 2762; }
10952                        	
10953                        		.dbg	line,	"include\routines_LEVELS.c", 2763; }
10954    01:DD5C             	.LL484:
10955                        	
10956                        		.dbg	line,	"include\routines_LEVELS.c", 2765; spr_set(weapon_id);
10957    01:DD5C             	.LL483:
10958                        		__ld.umq	_weapon_id
         01:DD5C  AD 23 23   			lda	_weapon_id
10959                        		__call		_spr_set.1
         01:DD5F  20 DD E7   			call	_spr_set.1
10960                        	
10961                        		.dbg	line,	"include\routines_LEVELS.c", 2766; spr_y(player_pos_y+8);
10962                        		__ld.wm		_player_pos_y
         01:DD62  AD D5 24   			lda.l	_player_pos_y
         01:DD65  AC D6 24   			ldy.h	_player_pos_y
10963                        		__add.wi	8
         01:DD68  18         			clc
         01:DD69  69 08      			adc.l	#8
         01:DD6B  90 01      			bcc	!+
         01:DD6D  C8         			iny
         01:DD6E             	!:
10964                        		__call		_spr_y.1
         01:DD6E  20 19 E8   			call	_spr_y.1
10965                        	
10966                        		.dbg	line,	"include\routines_LEVELS.c", 2767; }
10967                        	
10968                        		.dbg	line,	"include\routines_LEVELS.c", 2769; }
10969    01:DD71             	.LL474:
10970    01:DD71             	.LL473:
10971    01:DD71             	.LL455:
10972    01:DD71             	.LL437:
10973    01:DD71             	.LL433:
10974    01:DD71             	.LL417:
10975    01:DD71             	.LL392:
10976    01:DD71             	.LL387:
10977    01:DD71             	.LL350:
10978    01:DD71             	.LL313:
10979    01:DD71             	.LL287:
10980    01:DD71             	.LL264:
10981    01:DD71             	.LL221:
10982    01:DD71             	.LL216:
10983                        		__return	0
         01:DD71  4C EF FF   			jmp	leave_proc
10984                        		.dbg	clear
10985                        		.endp
10986               7060     		.data
10987               2305     		.bss
10988    F8:2305             	__update_PLAYER_loc:
10989    F8:2305             			ds	8
10990    F8:230D             	__update_PLAYER_end:
10991               E309     		.code
10992                        		.pceas
10993                        	
10994                        		.dbg	line,	"main.c", 23; #include "include/routines_SHOP.c"
10995                        		.dbg	line,	"include\routines_SHOP.c", 1; #include "huc.h"
10996                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
10997                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
10998                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
10999                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
11000                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
11001                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
11002                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
11003                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
11004                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
11005                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
11006                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
11007                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
11008                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
11009                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
11010                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
11011                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
11012                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
11013                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
11014                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
11015                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
11016                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
11017                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
11018                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
11019                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
11020                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
11021                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
11022                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
11023                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
11024                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
11025                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
11026                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
11027                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
11028                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
11029                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
11030                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
11031                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
11032                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
11033                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
11034                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
11035                        		.dbg	line,	"include\routines_SHOP.c", 2; #include "hucc-scroll.h"
11036                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 1; #ifndef _hucc_scroll_h
11037                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 2; #define _hucc_scroll_h
11038                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 4; /****************************************************************************
11039                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 5; ; ***************************************************************************
11040                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 6; ;
11041                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 7; ; hucc-scroll.h
11042                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 8; ;
11043                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 9; ; Routines for a fast split-screen scrolling system.
11044                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 10; ;
11045                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 11; ; Copyright John Brandwood 2024.
11046                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 12; ;
11047                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 13; ; Distributed under the Boost Software License, Version 1.0.
11048                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
11049                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
11050                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 16; ;
11051                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 17; ; ***************************************************************************
11052                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 18; ; ***************************************************************************
11053                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 19; ;
11054                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 20; ; The maximum number of splits for each screen layer is set in your project's
11055                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 21; ; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
11056                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 22; ;
11057                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 23; ; Your first active split must be defined to start at screen line 0, and then
11058                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 24; ; the rest of the active splits must be in increasing line order to match the
11059                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 25; ; way that the PC Engine displays the output image.
11060                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 26; ;
11061                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 27; ; You can have disabled splits interleaved with your active splits.
11062                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 28; ;
11063                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 29; ; Splits that are normally disabled can be used to create full screen effects
11064                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 30; ; such as bouncing the screen up and down by adding blank areas at the top or
11065                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 31; ; bottom of the screen, and then rapidly changing the height of those areas.
11066                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 32; ;
11067                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 33; ; ***************************************************************************
11068                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 34; ; **************************************************************************/
11069                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 36; // *************
11070                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 37; // VDC bits for display_flags ...
11071                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 38; // *************
11072                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 40; #ifndef BKG_OFF
11073                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 41; #define BKG_OFF 0x00
11074                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 42; #endif
11075                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 44; #ifndef SPR_OFF
11076                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 45; #define SPR_OFF 0x00
11077                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 46; #endif
11078                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 48; #ifndef BKG_ON
11079                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 49; #define BKG_ON 0x80
11080                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 50; #endif
11081                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 52; #ifndef SPR_ON
11082                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 53; #define SPR_ON 0x40
11083                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 54; #endif
11084                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 56; // *************
11085                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 57; // Functions in hucc-scroll.asm ...
11086                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 58; // *************
11087                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 60; #ifdef __HUCC__
11088                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 62; #asmdef	HUCC_USES_NEW_SCROLL 1
11089                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 64; extern void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
11090                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 65; extern void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
11091                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 67; extern void __fastcall disable_split( unsigned char index<acc> );
11092                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 68; extern void __fastcall sgx_disable_split( unsigned char index<acc> );
11093                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 70; extern void __fastcall __macro disable_all_splits( void );
11094                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 71; extern void __fastcall __macro sgx_disable_all_splits( void );
11095                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 73; #asm
11096                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 74; .macro	_disable_all_splits
11097                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 75; ldy	#HUCC_PCE_SPLITS - 1
11098                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 76; !loop:		tya
11099                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 77; call	_disable_split.1
11100                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 78; dey
11101                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 79; bpl	!loop-
11102                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 80; .endm
11103                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 82; .macro	_sgx_disable_all_splits
11104                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 83; ldy	#HUCC_SGX_SPLITS - 1
11105                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 84; !loop:		tya
11106                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 85; call	_sgx_disable_split.1
11107                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 86; dey
11108                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 87; bpl	!loop-
11109                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 88; .endm
11110                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 89; #endasm
11111                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 91; #endif // __HUCC__
11112                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 93; #endif // _hucc_scroll_h
11113                        		.dbg	line,	"include\routines_SHOP.c", 3; #include "hucc-chrmap.h"
11114                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 1; #ifndef _hucc_chrmap_h
11115                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 2; #define _hucc_chrmap_h
11116                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 4; /****************************************************************************
11117                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 5; ; ***************************************************************************
11118                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 6; ;
11119                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 7; ; hucc-chrmap.h
11120                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 8; ;
11121                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 9; ; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
11122                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 10; ;
11123                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 11; ; Copyright John Brandwood 2025.
11124                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 12; ;
11125                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
11126                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
11127                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
11128                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 16; ;
11129                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 17; ; ***************************************************************************
11130                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 18; ; ***************************************************************************
11131                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 19; ;
11132                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 20; ; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
11133                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 21; ;
11134                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 22; ; The maximum total size for a chrmap is 16KBytes, which allows for maps up
11135                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 23; ; to 256x32 tiles (2048x256 pixels).
11136                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 24; ;
11137                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 25; ; ***************************************************************************
11138                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 26; ; **************************************************************************/
11139                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 28; // *************
11140                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 29; // This code extends the blkmap library ...
11141                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 30; // *************
11142                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 32; #include "hucc-blkmap.h"
11143                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 34; // *************
11144                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 35; // Functions in chrmap.asm ...
11145                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 36; // *************
11146                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 38; #ifdef __HUCC__
11147                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 40; #asmdef	HUCC_USES_CHRMAP 1
11148                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 42; extern void __fastcall __nop set_chrmap( unsigned char __far *chrmap<vdc_map_bank:vdc_map_addr>, unsigned char tiles_w<vdc_map_line_w> );
11149                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 44; extern void __fastcall draw_bat( void );
11150                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 45; extern void __fastcall scroll_bat( void );
11151                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 47; extern void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
11152                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 49; #ifdef _SGX
11153                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 51; extern void __fastcall __nop sgx_set_chrmap( unsigned char __far *chrmap<sgx_map_bank:sgx_map_addr>, unsigned char tiles_w<sgx_map_line_w> );
11154                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 53; extern void __fastcall sgx_draw_bat( void );
11155                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 54; extern void __fastcall sgx_scroll_bat( void );
11156                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 56; extern void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
11157                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 58; #endif
11158                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 60; #endif // __HUCC__
11159                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 62; #endif // _hucc_chrmap_h
11160                        		.dbg	line,	"include\routines_SHOP.c", 4; #include "hucc-blkmap.h"
11161                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
11162                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
11163                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
11164                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
11165                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
11166                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
11167                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
11168                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
11169                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
11170                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
11171                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
11172                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
11173                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
11174                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
11175                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
11176                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
11177                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
11178                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
11179                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
11180                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
11181                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
11182                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
11183                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
11184                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
11185                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
11186                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
11187                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
11188                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
11189                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
11190                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
11191                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
11192                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
11193                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
11194                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
11195                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
11196                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
11197                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
11198                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
11199                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
11200                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
11201                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
11202                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
11203                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
11204                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
11205                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
11206                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
11207                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
11208                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
11209                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
11210                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
11211                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
11212                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
11213                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
11214                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
11215                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
11216                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
11217                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
11218                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
11219                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
11220                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
11221                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
11222                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
11223                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
11224                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
11225                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
11226                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
11227                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
11228                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 86; .macro	_set_blkmap.2
11229                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 87; stz	vdc_scr_bank
11230                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 88; .endm
11231                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 90; .macro	_set_multimap.2
11232                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 91; lda	vdc_bat_width
11233                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 92; lsr	a
11234                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 93; sta	vdc_map_line_w
11235                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 94; .endm
11236                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 96; .macro	SCREEN
11237                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 97; db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
11238                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 98; db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
11239                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 99; db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
11240                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 100; dw	(\4)
11241                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 101; .endm
11242                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
11243                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
11244                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
11245                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
11246                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
11247                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
11248                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
11249                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
11250                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
11251                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
11252                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
11253                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
11254                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
11255                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
11256                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
11257                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
11258                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
11259                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
11260                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
11261                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
11262                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
11263                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
11264                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
11265                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
11266                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
11267                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
11268                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
11269                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
11270                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 144; .macro	_sgx_set_blkmap.2
11271                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 145; stz	sgx_scr_bank
11272                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 146; .endm
11273                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 148; .macro	_sgx_set_multimap.2
11274                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 149; lda	sgx_bat_width
11275                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 150; lsr	a
11276                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 151; sta	sgx_map_line_w
11277                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 152; .endm
11278                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
11279                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
11280                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
11281                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
11282                        		.dbg	line,	"include\routines_SHOP.c", 12; void display_TIME_SHOP()
11283                        		.dbg	line,	"include\routines_SHOP.c", 13; {
11284                        	;***********************
11285                        	;***********************
11286                        	
11287                        		.hucc
11288    01:DF49             		.proc		_display_TIME_SHOP
11289                        		__enter		_display_TIME_SHOP
11290                        	
11291                        		.dbg	line,	"include\routines_SHOP.c", 14; put_number(minutes,1,1,3);
11292                        		__ld.um		_minutes
         01:DF49  AD 29 23   			lda	_minutes
         01:DF4C  C2         			cly
11293                        		__st.wmq	_bx
         01:DF4D  85 FA      			sta.l	_bx
         01:DF4F  84 FB      			sty.h	_bx
11294                        		__st.umiq	1, _cl
         01:DF51  A9 01      			lda.l	#1
         01:DF53  85 FC      			sta	_cl
11295                        		__st.umiq	1, _dil
         01:DF55  A9 01      			lda.l	#1
         01:DF57  85 F0      			sta	_dil
11296                        		__st.umiq	3, _dih
         01:DF59  A9 03      			lda.l	#3
         01:DF5B  85 F1      			sta	_dih
11297                        		__call		_put_number.4
         01:DF5D  20 9F FF   			call	_put_number.4
11298                        	
11299                        		.dbg	line,	"include\routines_SHOP.c", 16; if(seconds < 10)
11300                        		__ld.umq	_seconds
         01:DF60  AD 2A 23   			lda	_seconds
11301                        		__ult_b.uiq	10
         01:DF63  C9 0A      			cmp	#10		; Subtract integer from A.
         01:DF65  6A         			ror	a		; CC if A < integer.
         01:DF66  49 80      			eor	#$80
         01:DF68  2A         			rol	a
11302                        		__bfalse	.LL487
         01:DF69  90 2C      			bcc	.LL487
11303                        	
11304                        		.dbg	line,	"include\routines_SHOP.c", 17; {
11305                        	
11306                        		.dbg	line,	"include\routines_SHOP.c", 18; put_number(0,1,3,3);
11307                        		__st.wmiq	0, _bx
         01:DF6B  64 FA      			stz.l	_bx
         01:DF6D  64 FB      			stz.h	_bx
11308                        		__st.umiq	1, _cl
         01:DF6F  A9 01      			lda.l	#1
         01:DF71  85 FC      			sta	_cl
11309                        		__st.umiq	3, _dil
         01:DF73  A9 03      			lda.l	#3
         01:DF75  85 F0      			sta	_dil
11310                        		__st.umiq	3, _dih
         01:DF77  A9 03      			lda.l	#3
         01:DF79  85 F1      			sta	_dih
11311                        		__call		_put_number.4
         01:DF7B  20 9F FF   			call	_put_number.4
11312                        	
11313                        		.dbg	line,	"include\routines_SHOP.c", 19; put_number(seconds,1,4,3);
11314                        		__ld.um		_seconds
         01:DF7E  AD 2A 23   			lda	_seconds
         01:DF81  C2         			cly
11315                        		__st.wmq	_bx
         01:DF82  85 FA      			sta.l	_bx
         01:DF84  84 FB      			sty.h	_bx
11316                        		__st.umiq	1, _cl
         01:DF86  A9 01      			lda.l	#1
         01:DF88  85 FC      			sta	_cl
11317                        		__st.umiq	4, _dil
         01:DF8A  A9 04      			lda.l	#4
         01:DF8C  85 F0      			sta	_dil
11318                        		__st.umiq	3, _dih
         01:DF8E  A9 03      			lda.l	#3
         01:DF90  85 F1      			sta	_dih
11319                        		__call		_put_number.4
         01:DF92  20 9F FF   			call	_put_number.4
11320                        	
11321                        		.dbg	line,	"include\routines_SHOP.c", 20; }
11322                        	
11323                        		.dbg	line,	"include\routines_SHOP.c", 22; else
11324                        		__bra		.LL488
         01:DF95  80 17      			bra	.LL488
11325    01:DF97             	.LL487:
11326                        	
11327                        		.dbg	line,	"include\routines_SHOP.c", 23; {
11328                        	
11329                        		.dbg	line,	"include\routines_SHOP.c", 24; put_number(seconds,2,3,3);
11330                        		__ld.um		_seconds
         01:DF97  AD 2A 23   			lda	_seconds
         01:DF9A  C2         			cly
11331                        		__st.wmq	_bx
         01:DF9B  85 FA      			sta.l	_bx
         01:DF9D  84 FB      			sty.h	_bx
11332                        		__st.umiq	2, _cl
         01:DF9F  A9 02      			lda.l	#2
         01:DFA1  85 FC      			sta	_cl
11333                        		__st.umiq	3, _dil
         01:DFA3  A9 03      			lda.l	#3
         01:DFA5  85 F0      			sta	_dil
11334                        		__st.umiq	3, _dih
         01:DFA7  A9 03      			lda.l	#3
         01:DFA9  85 F1      			sta	_dih
11335                        		__call		_put_number.4
         01:DFAB  20 9F FF   			call	_put_number.4
11336                        	
11337                        		.dbg	line,	"include\routines_SHOP.c", 25; }
11338    01:DFAE             	.LL488:
11339                        	
11340                        		.dbg	line,	"include\routines_SHOP.c", 27; time_counter += 1;
11341                        		__add_st.umiq	1, _time_counter
         01:DFAE  EE 2B 23   			inc	_time_counter
11342                        	
11343                        		.dbg	line,	"include\routines_SHOP.c", 29; if(time_counter == 60)
11344                        		__ld.umq	_time_counter
         01:DFB1  AD 2B 23   			lda	_time_counter
11345                        		__equ_b.uiq	60
         01:DFB4  C9 3C      			cmp	#60
         01:DFB6  F0 01      			beq	!+
         01:DFB8  18         			clc
         01:DFB9             	!:
11346                        		__bfalse	.LL489
         01:DFB9  90 30      			bcc	.LL489
11347                        	
11348                        		.dbg	line,	"include\routines_SHOP.c", 30; {
11349                        	
11350                        		.dbg	line,	"include\routines_SHOP.c", 31; time_counter = 0;
11351                        		__st.umiq	0, _time_counter
         01:DFBB  9C 2B 23   			stz	_time_counter
11352                        	
11353                        		.dbg	line,	"include\routines_SHOP.c", 33; if(seconds > 0)
11354                        		__ld.umq	_seconds
         01:DFBE  AD 2A 23   			lda	_seconds
11355                        		__ugt_b.uiq	0
         01:DFC1  18         			clc			; Subtract integer+1 from A.
         01:DFC2  E9 00      			sbc	#0		; CS if A > integer.
11356                        		__bfalse	.LL490
         01:DFC4  90 05      			bcc	.LL490
11357                        	
11358                        		.dbg	line,	"include\routines_SHOP.c", 34; {
11359                        	
11360                        		.dbg	line,	"include\routines_SHOP.c", 35; seconds -= 1;
11361                        		__sub_st.umiq	1, _seconds
         01:DFC6  CE 2A 23   			dec	_seconds
11362                        	
11363                        		.dbg	line,	"include\routines_SHOP.c", 36; }
11364                        	
11365                        		.dbg	line,	"include\routines_SHOP.c", 38; else
11366                        		__bra		.LL491
         01:DFC9  80 20      			bra	.LL491
11367    01:DFCB             	.LL490:
11368                        	
11369                        		.dbg	line,	"include\routines_SHOP.c", 39; {
11370                        	
11371                        		.dbg	line,	"include\routines_SHOP.c", 40; if(minutes > 0)
11372                        		__ld.umq	_minutes
         01:DFCB  AD 29 23   			lda	_minutes
11373                        		__ugt_b.uiq	0
         01:DFCE  18         			clc			; Subtract integer+1 from A.
         01:DFCF  E9 00      			sbc	#0		; CS if A > integer.
11374                        		__bfalse	.LL492
         01:DFD1  90 0A      			bcc	.LL492
11375                        	
11376                        		.dbg	line,	"include\routines_SHOP.c", 41; {
11377                        	
11378                        		.dbg	line,	"include\routines_SHOP.c", 42; seconds = 59;
11379                        		__st.umiq	59, _seconds
         01:DFD3  A9 3B      			lda.l	#59
         01:DFD5  8D 2A 23   			sta	_seconds
11380                        	
11381                        		.dbg	line,	"include\routines_SHOP.c", 43; minutes -= 1;
11382                        		__sub_st.umiq	1, _minutes
         01:DFD8  CE 29 23   			dec	_minutes
11383                        	
11384                        		.dbg	line,	"include\routines_SHOP.c", 44; }
11385                        	
11386                        		.dbg	line,	"include\routines_SHOP.c", 46; else
11387                        		__bra		.LL493
         01:DFDB  80 0E      			bra	.LL493
11388    01:DFDD             	.LL492:
11389                        	
11390                        		.dbg	line,	"include\routines_SHOP.c", 47; {
11391                        	
11392                        		.dbg	line,	"include\routines_SHOP.c", 48; seconds = 0;
11393                        		__st.umiq	0, _seconds
         01:DFDD  9C 2A 23   			stz	_seconds
11394                        	
11395                        		.dbg	line,	"include\routines_SHOP.c", 49; minutes = 0;
11396                        		__st.umiq	0, _minutes
         01:DFE0  9C 29 23   			stz	_minutes
11397                        	
11398                        		.dbg	line,	"include\routines_SHOP.c", 50; shop_counter = 0;    
11399                        		__st.umiq	0, _shop_counter
         01:DFE3  9C D2 23   			stz	_shop_counter
11400                        	
11401                        		.dbg	line,	"include\routines_SHOP.c", 51; shop_phase = SHOP_PHASE_EXIT;
11402                        		__st.umiq	2, _shop_phase
         01:DFE6  A9 02      			lda.l	#2
         01:DFE8  8D D1 23   			sta	_shop_phase
11403                        	
11404                        		.dbg	line,	"include\routines_SHOP.c", 52; }
11405    01:DFEB             	.LL493:
11406                        	
11407                        		.dbg	line,	"include\routines_SHOP.c", 53; }
11408    01:DFEB             	.LL491:
11409                        	
11410                        		.dbg	line,	"include\routines_SHOP.c", 54; } 
11411                        	
11412                        		.dbg	line,	"include\routines_SHOP.c", 55; }
11413    01:DFEB             	.LL489:
11414    01:DFEB             	.LL486:
11415                        		__return	0
         01:DFEB  4C EF FF   			jmp	leave_proc
11416                        		.dbg	clear
11417                        		.endp
11418                        		.pceas
11419                        	
11420                        		.dbg	line,	"include\routines_SHOP.c", 59; void joypad_BUTTONS_SHOP()
11421                        		.dbg	line,	"include\routines_SHOP.c", 60; {
11422                        	;***********************
11423                        	;***********************
11424                        	
11425                        		.hucc
11426    02:C86D             		.proc		_joypad_BUTTONS_SHOP
11427                        		__enter		_joypad_BUTTONS_SHOP
11428                        	
11429                        		.dbg	line,	"include\routines_SHOP.c", 61; if(joytrg(JOYPAD_1) & JOY_RIGHT)
11430                        		__ld.uiq	0
         02:C86D  62         			cla
11431                        		 _joytrg.1
         02:C86E  AA         			tax
         02:C86F  BD 2D 22   			lda	joytrg, x
         02:C872  BC DD 22   			ldy	joy6trg, x
11432                        		__tand.wi	32
         02:C875  29 20      			and	#32
         02:C877  C9 01      	!:		cmp	#1
11433                        		__bfalse	.LL495
         02:C879  90 59      			bcc	.LL495
11434                        	
11435                        		.dbg	line,	"include\routines_SHOP.c", 62; {   
11436                        	
11437                        		.dbg	line,	"include\routines_SHOP.c", 63; char max_index;
11438                        	
11439                        		.dbg	line,	"include\routines_SHOP.c", 64; 
11440                        	
11441                        		.dbg	line,	"include\routines_SHOP.c", 65; if(index_y == 0)
11442                        		__not.um	_index_y
         02:C87B  AD CF 23   			lda	_index_y
         02:C87E  18         			clc
         02:C87F  D0 01      			bne	!+
         02:C881  38         			sec
         02:C882             	!:
11443                        		__bfalse	.LL496
         02:C882  90 07      			bcc	.LL496
11444                        	
11445                        		.dbg	line,	"include\routines_SHOP.c", 66; {
11446                        	
11447                        		.dbg	line,	"include\routines_SHOP.c", 67; max_index = 4;
11448                        		__st.umiq	4, __joypad_BUTTONS_SHOP_end - 1  /* max_index */
         02:C884  A9 04      			lda.l	#4
         02:C886  8D 0D 23   			sta	__joypad_BUTTONS_SHOP_end - 1
11449                        	
11450                        		.dbg	line,	"include\routines_SHOP.c", 68; }
11451                        	
11452                        		.dbg	line,	"include\routines_SHOP.c", 70; else
11453                        		__bra		.LL497
         02:C889  80 05      			bra	.LL497
11454    02:C88B             	.LL496:
11455                        	
11456                        		.dbg	line,	"include\routines_SHOP.c", 71; {
11457                        	
11458                        		.dbg	line,	"include\routines_SHOP.c", 72; max_index = 5;
11459                        		__st.umiq	5, __joypad_BUTTONS_SHOP_end - 1  /* max_index */
         02:C88B  A9 05      			lda.l	#5
         02:C88D  8D 0D 23   			sta	__joypad_BUTTONS_SHOP_end - 1
11460                        	
11461                        		.dbg	line,	"include\routines_SHOP.c", 73; }
11462    02:C890             	.LL497:
11463                        	
11464                        		.dbg	line,	"include\routines_SHOP.c", 75; if(index_x < max_index)
11465                        		__ld.umq	_index_x
         02:C890  AD CE 23   			lda	_index_x
11466                        		__ult_b.umq	__joypad_BUTTONS_SHOP_end - 1  /* max_index */
         02:C893  CD 0D 23   			cmp	__joypad_BUTTONS_SHOP_end - 1		; Subtract memory from A.
         02:C896  6A         			ror	a		; CC if A < memory.
         02:C897  49 80      			eor	#$80
         02:C899  2A         			rol	a
11467                        		__bfalse	.LL498
         02:C89A  B0 03 4C EA			bcc	.LL498
         02:C89E  CD          
11468                        	
11469                        		.dbg	line,	"include\routines_SHOP.c", 76; {
11470                        	
11471                        		.dbg	line,	"include\routines_SHOP.c", 77; index_x += 1;
11472                        		__add_st.umiq	1, _index_x
         02:C89F  EE CE 23   			inc	_index_x
11473                        	
11474                        		.dbg	line,	"include\routines_SHOP.c", 78; item_index = (index_x + (index_y * 5));
11475                        		__ld.um		_index_y
         02:C8A2  AD CF 23   			lda	_index_y
         02:C8A5  C2         			cly
11476                        		__mul.wi	5
         02:C8A6  85 00      			sta.l	__temp
         02:C8A8  84 01      			sty.h	__temp
                             		__asl.wr
         02:C8AA  0A         			asl	a
         02:C8AB  42         			say
         02:C8AC  2A         			rol	a
         02:C8AD  42         			say
                             		__asl.wr
         02:C8AE  0A         			asl	a
         02:C8AF  42         			say
         02:C8B0  2A         			rol	a
         02:C8B1  42         			say
                             		__add.wm	__temp
         02:C8B2  18         			clc
         02:C8B3  65 00      			adc.l	__temp
         02:C8B5  42         			say
         02:C8B6  65 01      			adc.h	__temp
         02:C8B8  42         			say
11477                        		__add.um	_index_x
         02:C8B9  18         			clc
         02:C8BA  6D CE 23   			adc	_index_x
         02:C8BD  90 01      			bcc	!+
         02:C8BF  C8         			iny
         02:C8C0             	!:
11478                        		__st.umq	_item_index
         02:C8C0  8D D0 23   			sta	_item_index
11479                        	
11480                        		.dbg	line,	"include\routines_SHOP.c", 80; spr_set(0);
11481                        		__ld.uiq	0
         02:C8C3  62         			cla
11482                        		__call		_spr_set.1
         02:C8C4  20 DD E7   			call	_spr_set.1
11483                        	
11484                        		.dbg	line,	"include\routines_SHOP.c", 81; spr_x(TABLE_CURSOR_POS_X[item_index]);
11485                        		__ldx.umq	_item_index
         02:C8C7  AE D0 23   			ldx	_item_index
11486                        		__ld.uax	_TABLE_CURSOR_POS_X
         02:C8CA  BD 9A 61   			lda	_TABLE_CURSOR_POS_X, x
         02:C8CD  C2         			cly
11487                        		__call		_spr_x.1
         02:C8CE  20 0A E8   			call	_spr_x.1
11488                        	
11489                        		.dbg	line,	"include\routines_SHOP.c", 82; }
11490                        	
11491                        		.dbg	line,	"include\routines_SHOP.c", 83; }
11492    02:C8D1             	.LL498	.alias		.LL499
11493                        	
11494                        		.dbg	line,	"include\routines_SHOP.c", 85; 
11495                        	
11496                        		.dbg	line,	"include\routines_SHOP.c", 86; else if(joytrg(JOYPAD_1) & JOY_LEFT)
11497                        		__bra		.LL499
         02:C8D1  4C EA CD   			bra	.LL499
11498    02:C8D4             	.LL495:
11499                        		__ld.uiq	0
         02:C8D4  62         			cla
11500                        		 _joytrg.1
         02:C8D5  AA         			tax
         02:C8D6  BD 2D 22   			lda	joytrg, x
         02:C8D9  BC DD 22   			ldy	joy6trg, x
11501                        		__tand.wi	128
         02:C8DC  29 80      			and	#128
         02:C8DE  C9 01      	!:		cmp	#1
11502                        		__bfalse	.LL500
         02:C8E0  90 40      			bcc	.LL500
11503                        	
11504                        		.dbg	line,	"include\routines_SHOP.c", 87; {
11505                        	
11506                        		.dbg	line,	"include\routines_SHOP.c", 88; if(index_x > 0)
11507                        		__ld.umq	_index_x
         02:C8E2  AD CE 23   			lda	_index_x
11508                        		__ugt_b.uiq	0
         02:C8E5  18         			clc			; Subtract integer+1 from A.
         02:C8E6  E9 00      			sbc	#0		; CS if A > integer.
11509                        		__bfalse	.LL501
         02:C8E8  B0 03 4C EA			bcc	.LL501
         02:C8EC  CD          
11510                        	
11511                        		.dbg	line,	"include\routines_SHOP.c", 89; {
11512                        	
11513                        		.dbg	line,	"include\routines_SHOP.c", 90; index_x -= 1;
11514                        		__sub_st.umiq	1, _index_x
         02:C8ED  CE CE 23   			dec	_index_x
11515                        	
11516                        		.dbg	line,	"include\routines_SHOP.c", 91; item_index = (index_x + (index_y * 5));
11517                        		__ld.um		_index_y
         02:C8F0  AD CF 23   			lda	_index_y
         02:C8F3  C2         			cly
11518                        		__mul.wi	5
         02:C8F4  85 00      			sta.l	__temp
         02:C8F6  84 01      			sty.h	__temp
                             		__asl.wr
         02:C8F8  0A         			asl	a
         02:C8F9  42         			say
         02:C8FA  2A         			rol	a
         02:C8FB  42         			say
                             		__asl.wr
         02:C8FC  0A         			asl	a
         02:C8FD  42         			say
         02:C8FE  2A         			rol	a
         02:C8FF  42         			say
                             		__add.wm	__temp
         02:C900  18         			clc
         02:C901  65 00      			adc.l	__temp
         02:C903  42         			say
         02:C904  65 01      			adc.h	__temp
         02:C906  42         			say
11519                        		__add.um	_index_x
         02:C907  18         			clc
         02:C908  6D CE 23   			adc	_index_x
         02:C90B  90 01      			bcc	!+
         02:C90D  C8         			iny
         02:C90E             	!:
11520                        		__st.umq	_item_index
         02:C90E  8D D0 23   			sta	_item_index
11521                        	
11522                        		.dbg	line,	"include\routines_SHOP.c", 93; spr_set(0);
11523                        		__ld.uiq	0
         02:C911  62         			cla
11524                        		__call		_spr_set.1
         02:C912  20 DD E7   			call	_spr_set.1
11525                        	
11526                        		.dbg	line,	"include\routines_SHOP.c", 94; spr_x(TABLE_CURSOR_POS_X[item_index]);
11527                        		__ldx.umq	_item_index
         02:C915  AE D0 23   			ldx	_item_index
11528                        		__ld.uax	_TABLE_CURSOR_POS_X
         02:C918  BD 9A 61   			lda	_TABLE_CURSOR_POS_X, x
         02:C91B  C2         			cly
11529                        		__call		_spr_x.1
         02:C91C  20 0A E8   			call	_spr_x.1
11530                        	
11531                        		.dbg	line,	"include\routines_SHOP.c", 95; }
11532                        	
11533                        		.dbg	line,	"include\routines_SHOP.c", 96; }
11534    02:C91F             	.LL501	.alias		.LL502
11535                        	
11536                        		.dbg	line,	"include\routines_SHOP.c", 99; else if(joytrg(JOYPAD_1) & JOY_UP)
11537                        		__bra		.LL502
         02:C91F  4C EA CD   			bra	.LL502
11538    02:C922             	.LL500:
11539                        		__ld.uiq	0
         02:C922  62         			cla
11540                        		 _joytrg.1
         02:C923  AA         			tax
         02:C924  BD 2D 22   			lda	joytrg, x
         02:C927  BC DD 22   			ldy	joy6trg, x
11541                        		__tand.wi	16
         02:C92A  29 10      			and	#16
         02:C92C  C9 01      	!:		cmp	#1
11542                        		__bfalse	.LL503
         02:C92E  90 4A      			bcc	.LL503
11543                        	
11544                        		.dbg	line,	"include\routines_SHOP.c", 100; {
11545                        	
11546                        		.dbg	line,	"include\routines_SHOP.c", 101; if(index_y > 0)
11547                        		__ld.umq	_index_y
         02:C930  AD CF 23   			lda	_index_y
11548                        		__ugt_b.uiq	0
         02:C933  18         			clc			; Subtract integer+1 from A.
         02:C934  E9 00      			sbc	#0		; CS if A > integer.
11549                        		__bfalse	.LL504
         02:C936  B0 03 4C EA			bcc	.LL504
         02:C93A  CD          
11550                        	
11551                        		.dbg	line,	"include\routines_SHOP.c", 102; {
11552                        	
11553                        		.dbg	line,	"include\routines_SHOP.c", 103; if(item_index != 10)
11554                        		__ld.umq	_item_index
         02:C93B  AD D0 23   			lda	_item_index
11555                        		__neq_b.uiq	10
         02:C93E  38         			sec
         02:C93F  49 0A      			eor	#10
         02:C941  D0 01      			bne	!+
         02:C943  18         			clc
         02:C944             	!:
11556                        		__bfalse	.LL505
         02:C944  B0 03 4C EA			bcc	.LL505
         02:C948  CD          
11557                        	
11558                        		.dbg	line,	"include\routines_SHOP.c", 104; {
11559                        	
11560                        		.dbg	line,	"include\routines_SHOP.c", 105; index_y -= 1;
11561                        		__sub_st.umiq	1, _index_y
         02:C949  CE CF 23   			dec	_index_y
11562                        	
11563                        		.dbg	line,	"include\routines_SHOP.c", 106; item_index = (index_x + (index_y * 5));
11564                        		__ld.um		_index_y
         02:C94C  AD CF 23   			lda	_index_y
         02:C94F  C2         			cly
11565                        		__mul.wi	5
         02:C950  85 00      			sta.l	__temp
         02:C952  84 01      			sty.h	__temp
                             		__asl.wr
         02:C954  0A         			asl	a
         02:C955  42         			say
         02:C956  2A         			rol	a
         02:C957  42         			say
                             		__asl.wr
         02:C958  0A         			asl	a
         02:C959  42         			say
         02:C95A  2A         			rol	a
         02:C95B  42         			say
                             		__add.wm	__temp
         02:C95C  18         			clc
         02:C95D  65 00      			adc.l	__temp
         02:C95F  42         			say
         02:C960  65 01      			adc.h	__temp
         02:C962  42         			say
11566                        		__add.um	_index_x
         02:C963  18         			clc
         02:C964  6D CE 23   			adc	_index_x
         02:C967  90 01      			bcc	!+
         02:C969  C8         			iny
         02:C96A             	!:
11567                        		__st.umq	_item_index
         02:C96A  8D D0 23   			sta	_item_index
11568                        	
11569                        		.dbg	line,	"include\routines_SHOP.c", 108; spr_set(0);
11570                        		__ld.uiq	0
         02:C96D  62         			cla
11571                        		__call		_spr_set.1
         02:C96E  20 DD E7   			call	_spr_set.1
11572                        	
11573                        		.dbg	line,	"include\routines_SHOP.c", 109; spr_y(144);
11574                        		__ld.wi		144
         02:C971  A9 90      			lda.l	#144
         02:C973  C2         			cly
11575                        		__call		_spr_y.1
         02:C974  20 19 E8   			call	_spr_y.1
11576                        	
11577                        		.dbg	line,	"include\routines_SHOP.c", 110; }
11578                        	
11579                        		.dbg	line,	"include\routines_SHOP.c", 111; }
11580    02:C977             	.LL505	.alias		.LL506
11581                        	
11582                        		.dbg	line,	"include\routines_SHOP.c", 112; }
11583    02:C977             	.LL504	.alias		.LL506
11584                        	
11585                        		.dbg	line,	"include\routines_SHOP.c", 115; else if(joytrg(JOYPAD_1) & JOY_DOWN)
11586                        		__bra		.LL506
         02:C977  4C EA CD   			bra	.LL506
11587    02:C97A             	.LL503:
11588                        		__ld.uiq	0
         02:C97A  62         			cla
11589                        		 _joytrg.1
         02:C97B  AA         			tax
         02:C97C  BD 2D 22   			lda	joytrg, x
         02:C97F  BC DD 22   			ldy	joy6trg, x
11590                        		__tand.wi	64
         02:C982  29 40      			and	#64
         02:C984  C9 01      	!:		cmp	#1
11591                        		__bfalse	.LL507
         02:C986  90 3F      			bcc	.LL507
11592                        	
11593                        		.dbg	line,	"include\routines_SHOP.c", 116; {
11594                        	
11595                        		.dbg	line,	"include\routines_SHOP.c", 117; if(index_y < 1)
11596                        		__ld.umq	_index_y
         02:C988  AD CF 23   			lda	_index_y
11597                        		__ult_b.uiq	1
         02:C98B  C9 01      			cmp	#1		; Subtract integer from A.
         02:C98D  6A         			ror	a		; CC if A < integer.
         02:C98E  49 80      			eor	#$80
         02:C990  2A         			rol	a
11598                        		__bfalse	.LL508
         02:C991  B0 03 4C EA			bcc	.LL508
         02:C995  CD          
11599                        	
11600                        		.dbg	line,	"include\routines_SHOP.c", 118; {
11601                        	
11602                        		.dbg	line,	"include\routines_SHOP.c", 119; index_y += 1;
11603                        		__add_st.umiq	1, _index_y
         02:C996  EE CF 23   			inc	_index_y
11604                        	
11605                        		.dbg	line,	"include\routines_SHOP.c", 120; item_index = (index_x + (index_y * 5));
11606                        		__ld.um		_index_y
         02:C999  AD CF 23   			lda	_index_y
         02:C99C  C2         			cly
11607                        		__mul.wi	5
         02:C99D  85 00      			sta.l	__temp
         02:C99F  84 01      			sty.h	__temp
                             		__asl.wr
         02:C9A1  0A         			asl	a
         02:C9A2  42         			say
         02:C9A3  2A         			rol	a
         02:C9A4  42         			say
                             		__asl.wr
         02:C9A5  0A         			asl	a
         02:C9A6  42         			say
         02:C9A7  2A         			rol	a
         02:C9A8  42         			say
                             		__add.wm	__temp
         02:C9A9  18         			clc
         02:C9AA  65 00      			adc.l	__temp
         02:C9AC  42         			say
         02:C9AD  65 01      			adc.h	__temp
         02:C9AF  42         			say
11608                        		__add.um	_index_x
         02:C9B0  18         			clc
         02:C9B1  6D CE 23   			adc	_index_x
         02:C9B4  90 01      			bcc	!+
         02:C9B6  C8         			iny
         02:C9B7             	!:
11609                        		__st.umq	_item_index
         02:C9B7  8D D0 23   			sta	_item_index
11610                        	
11611                        		.dbg	line,	"include\routines_SHOP.c", 122; spr_set(0);
11612                        		__ld.uiq	0
         02:C9BA  62         			cla
11613                        		__call		_spr_set.1
         02:C9BB  20 DD E7   			call	_spr_set.1
11614                        	
11615                        		.dbg	line,	"include\routines_SHOP.c", 123; spr_y(168);
11616                        		__ld.wi		168
         02:C9BE  A9 A8      			lda.l	#168
         02:C9C0  C2         			cly
11617                        		__call		_spr_y.1
         02:C9C1  20 19 E8   			call	_spr_y.1
11618                        	
11619                        		.dbg	line,	"include\routines_SHOP.c", 124; }
11620                        	
11621                        		.dbg	line,	"include\routines_SHOP.c", 125; }
11622    02:C9C4             	.LL508	.alias		.LL509
11623                        	
11624                        		.dbg	line,	"include\routines_SHOP.c", 128; else if(joytrg(JOYPAD_1) & JOY_I)
11625                        		__bra		.LL509
         02:C9C4  4C EA CD   			bra	.LL509
11626    02:C9C7             	.LL507:
11627                        		__ld.uiq	0
         02:C9C7  62         			cla
11628                        		 _joytrg.1
         02:C9C8  AA         			tax
         02:C9C9  BD 2D 22   			lda	joytrg, x
         02:C9CC  BC DD 22   			ldy	joy6trg, x
11629                        		__tand.wi	1
         02:C9CF  29 01      			and	#1
         02:C9D1  C9 01      	!:		cmp	#1
11630                        		__bfalse	.LL510
         02:C9D3  B0 03 4C EA			bcc	.LL510
         02:C9D7  CD          
11631                        	
11632                        		.dbg	line,	"include\routines_SHOP.c", 129; {
11633                        	
11634                        		.dbg	line,	"include\routines_SHOP.c", 130; switch(item_index)
11635                        		__ld.umq	_item_index
         02:C9D8  AD D0 23   			lda	_item_index
11636                        		__bra		.LL511
         02:C9DB  4C C7 CD   			bra	.LL511
11637                        	
11638                        		.dbg	line,	"include\routines_SHOP.c", 131; {
11639                        	
11640                        		.dbg	line,	"include\routines_SHOP.c", 132; // WEAPON 2 //
11641                        	
11642                        		.dbg	line,	"include\routines_SHOP.c", 133; case 0:
11643    02:C9DE             	.LL513:
11644                        		__case		0
11645                        	
11646                        		.dbg	line,	"include\routines_SHOP.c", 134; if(zenny_amount >= shop_prices[0])
11647                        		__ld.wm		_zenny_amount
         02:C9DE  AD 2D 26   			lda.l	_zenny_amount
         02:C9E1  AC 2E 26   			ldy.h	_zenny_amount
11648                        		__sge_w.wm	_shop_prices
         02:C9E4  CD 31 26   			cmp.l	_shop_prices		; Subtract memory from Y:A.
         02:C9E7  98         			tya
         02:C9E8  ED 32 26   			sbc.h	_shop_prices
         02:C9EB  50 02      			bvc	!+
         02:C9ED  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:C9EF  49 80      	!:		eor	#$80
         02:C9F1  0A         			asl	a
11649                        		__bfalse	.LL514
         02:C9F2  B0 03 4C EA			bcc	.LL514
         02:C9F6  CD          
11650                        	
11651                        		.dbg	line,	"include\routines_SHOP.c", 135; {
11652                        	
11653                        		.dbg	line,	"include\routines_SHOP.c", 136; if(weapon_level < 1)
11654                        		__ld.umq	_weapon_level
         02:C9F7  AD 25 23   			lda	_weapon_level
11655                        		__ult_b.uiq	1
         02:C9FA  C9 01      			cmp	#1		; Subtract integer from A.
         02:C9FC  6A         			ror	a		; CC if A < integer.
         02:C9FD  49 80      			eor	#$80
         02:C9FF  2A         			rol	a
11656                        		__bfalse	.LL515
         02:CA00  B0 03 4C EA			bcc	.LL515
         02:CA04  CD          
11657                        	
11658                        		.dbg	line,	"include\routines_SHOP.c", 137; {
11659                        	
11660                        		.dbg	line,	"include\routines_SHOP.c", 138; weapon_level = 1;
11661                        		__st.umiq	1, _weapon_level
         02:CA05  A9 01      			lda.l	#1
         02:CA07  8D 25 23   			sta	_weapon_level
11662                        	
11663                        		.dbg	line,	"include\routines_SHOP.c", 139; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_2, SIZEOF(tileset_WEAPON_2) >> 1 );
11664                        		__st.wmiq	4256, _di
         02:CA0A  A9 A0      			lda.l	#4256
         02:CA0C  85 F0      			sta.l	_di
         02:CA0E  A9 10      			lda.h	#4256
         02:CA10  85 F1      			sta.h	_di
11665                        		__farptr	_tileset_WEAPON_2, _bp_bank, _bp
         02:CA12  A9 80      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_2))
         02:CA14  85 EC      			sta.l	_bp
         02:CA16  A9 77      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_2))
         02:CA18  85 ED      			sta.h	_bp
         02:CA1A  A9 03      			lda	#bank(_tileset_WEAPON_2)
         02:CA1C  85 02      			sta	_bp_bank
11666                        		__ld.wi		___sizeof__tileset_WEAPON_2
         02:CA1E  A9 80      			lda.l	#___sizeof__tileset_WEAPON_2
         02:CA20  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_2
11667                        		__lsr.wi	1
         02:CA22  42         			say
         02:CA23  4A         			lsr	a
         02:CA24  42         			say
         02:CA25  6A         			ror	a
11668                        		__st.wmq	_ax
         02:CA26  85 F8      			sta.l	_ax
         02:CA28  84 F9      			sty.h	_ax
11669                        		 _load_vram.3
         02:CA2A  82         			clx				; Offset to PCE VDC.
         02:CA2B  20 4F FF   			call	load_vram_x
11670                        	
11671                        		.dbg	line,	"include\routines_SHOP.c", 141; zenny_amount -= shop_prices[0];
11672                        		__ld.wm		_shop_prices
         02:CA2E  AD 31 26   			lda.l	_shop_prices
         02:CA31  AC 32 26   			ldy.h	_shop_prices
11673                        		__isub_st.wmq	_zenny_amount
         02:CA34  38         			sec
         02:CA35  49 FF      			eor	#$FF
         02:CA37  6D 2D 26   			adc.l	_zenny_amount
         02:CA3A  8D 2D 26   			sta.l	_zenny_amount
         02:CA3D  98         			tya
         02:CA3E  49 FF      			eor	#$FF
         02:CA40  6D 2E 26   			adc.h	_zenny_amount
         02:CA43  8D 2E 26   			sta.h	_zenny_amount
11674                        	
11675                        		.dbg	line,	"include\routines_SHOP.c", 142; display_ZENNY();
11676                        		__call		_display_ZENNY
         02:CA46  20 45 FF   			call	_display_ZENNY
11677                        	
11678                        		.dbg	line,	"include\routines_SHOP.c", 143; }
11679                        	
11680                        		.dbg	line,	"include\routines_SHOP.c", 144; }
11681    02:CA49             	.LL515	.alias		.LL512
11682                        	
11683                        		.dbg	line,	"include\routines_SHOP.c", 146; break;   
11684    02:CA49             	.LL514	.alias		.LL512
11685                        		__bra		.LL512
         02:CA49  4C EA CD   			bra	.LL512
11686                        	
11687                        		.dbg	line,	"include\routines_SHOP.c", 149; // WEAPON 4 //
11688                        	
11689                        		.dbg	line,	"include\routines_SHOP.c", 150; case 1:
11690    02:CA4C             	.LL516:
11691                        		__case		1
11692                        	
11693                        		.dbg	line,	"include\routines_SHOP.c", 151; if(zenny_amount >= shop_prices[1])
11694                        		__ld.wm		_zenny_amount
         02:CA4C  AD 2D 26   			lda.l	_zenny_amount
         02:CA4F  AC 2E 26   			ldy.h	_zenny_amount
11695                        		__sge_w.wm	_shop_prices + 2
         02:CA52  CD 33 26   			cmp.l	_shop_prices + 2		; Subtract memory from Y:A.
         02:CA55  98         			tya
         02:CA56  ED 34 26   			sbc.h	_shop_prices + 2
         02:CA59  50 02      			bvc	!+
         02:CA5B  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:CA5D  49 80      	!:		eor	#$80
         02:CA5F  0A         			asl	a
11696                        		__bfalse	.LL517
         02:CA60  B0 03 4C EA			bcc	.LL517
         02:CA64  CD          
11697                        	
11698                        		.dbg	line,	"include\routines_SHOP.c", 152; {
11699                        	
11700                        		.dbg	line,	"include\routines_SHOP.c", 153; if(weapon_level < 2)
11701                        		__ld.umq	_weapon_level
         02:CA65  AD 25 23   			lda	_weapon_level
11702                        		__ult_b.uiq	2
         02:CA68  C9 02      			cmp	#2		; Subtract integer from A.
         02:CA6A  6A         			ror	a		; CC if A < integer.
         02:CA6B  49 80      			eor	#$80
         02:CA6D  2A         			rol	a
11703                        		__bfalse	.LL518
         02:CA6E  B0 03 4C EA			bcc	.LL518
         02:CA72  CD          
11704                        	
11705                        		.dbg	line,	"include\routines_SHOP.c", 154; {
11706                        	
11707                        		.dbg	line,	"include\routines_SHOP.c", 155; weapon_level = 2;
11708                        		__st.umiq	2, _weapon_level
         02:CA73  A9 02      			lda.l	#2
         02:CA75  8D 25 23   			sta	_weapon_level
11709                        	
11710                        		.dbg	line,	"include\routines_SHOP.c", 156; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_4, SIZEOF(tileset_WEAPON_4) >> 1 );
11711                        		__st.wmiq	4256, _di
         02:CA78  A9 A0      			lda.l	#4256
         02:CA7A  85 F0      			sta.l	_di
         02:CA7C  A9 10      			lda.h	#4256
         02:CA7E  85 F1      			sta.h	_di
11712                        		__farptr	_tileset_WEAPON_4, _bp_bank, _bp
         02:CA80  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_4))
         02:CA82  85 EC      			sta.l	_bp
         02:CA84  A9 78      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_4))
         02:CA86  85 ED      			sta.h	_bp
         02:CA88  A9 03      			lda	#bank(_tileset_WEAPON_4)
         02:CA8A  85 02      			sta	_bp_bank
11713                        		__ld.wi		___sizeof__tileset_WEAPON_4
         02:CA8C  A9 80      			lda.l	#___sizeof__tileset_WEAPON_4
         02:CA8E  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_4
11714                        		__lsr.wi	1
         02:CA90  42         			say
         02:CA91  4A         			lsr	a
         02:CA92  42         			say
         02:CA93  6A         			ror	a
11715                        		__st.wmq	_ax
         02:CA94  85 F8      			sta.l	_ax
         02:CA96  84 F9      			sty.h	_ax
11716                        		 _load_vram.3
         02:CA98  82         			clx				; Offset to PCE VDC.
         02:CA99  20 4F FF   			call	load_vram_x
11717                        	
11718                        		.dbg	line,	"include\routines_SHOP.c", 158; zenny_amount -= shop_prices[1];
11719                        		__ld.wm		_shop_prices + 2
         02:CA9C  AD 33 26   			lda.l	_shop_prices + 2
         02:CA9F  AC 34 26   			ldy.h	_shop_prices + 2
11720                        		__isub_st.wmq	_zenny_amount
         02:CAA2  38         			sec
         02:CAA3  49 FF      			eor	#$FF
         02:CAA5  6D 2D 26   			adc.l	_zenny_amount
         02:CAA8  8D 2D 26   			sta.l	_zenny_amount
         02:CAAB  98         			tya
         02:CAAC  49 FF      			eor	#$FF
         02:CAAE  6D 2E 26   			adc.h	_zenny_amount
         02:CAB1  8D 2E 26   			sta.h	_zenny_amount
11721                        	
11722                        		.dbg	line,	"include\routines_SHOP.c", 159; display_ZENNY();
11723                        		__call		_display_ZENNY
         02:CAB4  20 45 FF   			call	_display_ZENNY
11724                        	
11725                        		.dbg	line,	"include\routines_SHOP.c", 160; }
11726                        	
11727                        		.dbg	line,	"include\routines_SHOP.c", 161; }
11728    02:CAB7             	.LL518	.alias		.LL512
11729                        	
11730                        		.dbg	line,	"include\routines_SHOP.c", 163; break; 
11731    02:CAB7             	.LL517	.alias		.LL512
11732                        		__bra		.LL512
         02:CAB7  4C EA CD   			bra	.LL512
11733                        	
11734                        		.dbg	line,	"include\routines_SHOP.c", 166; // WEAPON 5 //
11735                        	
11736                        		.dbg	line,	"include\routines_SHOP.c", 167; case 2:
11737    02:CABA             	.LL519:
11738                        		__case		2
11739                        	
11740                        		.dbg	line,	"include\routines_SHOP.c", 168; if(zenny_amount >= shop_prices[2])
11741                        		__ld.wm		_zenny_amount
         02:CABA  AD 2D 26   			lda.l	_zenny_amount
         02:CABD  AC 2E 26   			ldy.h	_zenny_amount
11742                        		__sge_w.wm	_shop_prices + 4
         02:CAC0  CD 35 26   			cmp.l	_shop_prices + 4		; Subtract memory from Y:A.
         02:CAC3  98         			tya
         02:CAC4  ED 36 26   			sbc.h	_shop_prices + 4
         02:CAC7  50 02      			bvc	!+
         02:CAC9  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:CACB  49 80      	!:		eor	#$80
         02:CACD  0A         			asl	a
11743                        		__bfalse	.LL520
         02:CACE  B0 03 4C EA			bcc	.LL520
         02:CAD2  CD          
11744                        	
11745                        		.dbg	line,	"include\routines_SHOP.c", 169; {
11746                        	
11747                        		.dbg	line,	"include\routines_SHOP.c", 170; if(weapon_level < 3)
11748                        		__ld.umq	_weapon_level
         02:CAD3  AD 25 23   			lda	_weapon_level
11749                        		__ult_b.uiq	3
         02:CAD6  C9 03      			cmp	#3		; Subtract integer from A.
         02:CAD8  6A         			ror	a		; CC if A < integer.
         02:CAD9  49 80      			eor	#$80
         02:CADB  2A         			rol	a
11750                        		__bfalse	.LL521
         02:CADC  B0 03 4C EA			bcc	.LL521
         02:CAE0  CD          
11751                        	
11752                        		.dbg	line,	"include\routines_SHOP.c", 171; {
11753                        	
11754                        		.dbg	line,	"include\routines_SHOP.c", 172; weapon_level = 3;
11755                        		__st.umiq	3, _weapon_level
         02:CAE1  A9 03      			lda.l	#3
         02:CAE3  8D 25 23   			sta	_weapon_level
11756                        	
11757                        		.dbg	line,	"include\routines_SHOP.c", 173; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_5, SIZEOF(tileset_WEAPON_5) >> 1 );
11758                        		__st.wmiq	4256, _di
         02:CAE6  A9 A0      			lda.l	#4256
         02:CAE8  85 F0      			sta.l	_di
         02:CAEA  A9 10      			lda.h	#4256
         02:CAEC  85 F1      			sta.h	_di
11759                        		__farptr	_tileset_WEAPON_5, _bp_bank, _bp
         02:CAEE  A9 80      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_5))
         02:CAF0  85 EC      			sta.l	_bp
         02:CAF2  A9 78      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_5))
         02:CAF4  85 ED      			sta.h	_bp
         02:CAF6  A9 03      			lda	#bank(_tileset_WEAPON_5)
         02:CAF8  85 02      			sta	_bp_bank
11760                        		__ld.wi		___sizeof__tileset_WEAPON_5
         02:CAFA  A9 80      			lda.l	#___sizeof__tileset_WEAPON_5
         02:CAFC  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_5
11761                        		__lsr.wi	1
         02:CAFE  42         			say
         02:CAFF  4A         			lsr	a
         02:CB00  42         			say
         02:CB01  6A         			ror	a
11762                        		__st.wmq	_ax
         02:CB02  85 F8      			sta.l	_ax
         02:CB04  84 F9      			sty.h	_ax
11763                        		 _load_vram.3
         02:CB06  82         			clx				; Offset to PCE VDC.
         02:CB07  20 4F FF   			call	load_vram_x
11764                        	
11765                        		.dbg	line,	"include\routines_SHOP.c", 175; zenny_amount -= shop_prices[2];
11766                        		__ld.wm		_shop_prices + 4
         02:CB0A  AD 35 26   			lda.l	_shop_prices + 4
         02:CB0D  AC 36 26   			ldy.h	_shop_prices + 4
11767                        		__isub_st.wmq	_zenny_amount
         02:CB10  38         			sec
         02:CB11  49 FF      			eor	#$FF
         02:CB13  6D 2D 26   			adc.l	_zenny_amount
         02:CB16  8D 2D 26   			sta.l	_zenny_amount
         02:CB19  98         			tya
         02:CB1A  49 FF      			eor	#$FF
         02:CB1C  6D 2E 26   			adc.h	_zenny_amount
         02:CB1F  8D 2E 26   			sta.h	_zenny_amount
11768                        	
11769                        		.dbg	line,	"include\routines_SHOP.c", 176; display_ZENNY();
11770                        		__call		_display_ZENNY
         02:CB22  20 45 FF   			call	_display_ZENNY
11771                        	
11772                        		.dbg	line,	"include\routines_SHOP.c", 177; }
11773                        	
11774                        		.dbg	line,	"include\routines_SHOP.c", 178; }
11775    02:CB25             	.LL521	.alias		.LL512
11776                        	
11777                        		.dbg	line,	"include\routines_SHOP.c", 180; break;   
11778    02:CB25             	.LL520	.alias		.LL512
11779                        		__bra		.LL512
         02:CB25  4C EA CD   			bra	.LL512
11780                        	
11781                        		.dbg	line,	"include\routines_SHOP.c", 183; // WEAPON 8 //
11782                        	
11783                        		.dbg	line,	"include\routines_SHOP.c", 184; case 3:
11784    02:CB28             	.LL522:
11785                        		__case		3
11786                        	
11787                        		.dbg	line,	"include\routines_SHOP.c", 185; if(zenny_amount >= shop_prices[3])
11788                        		__ld.wm		_zenny_amount
         02:CB28  AD 2D 26   			lda.l	_zenny_amount
         02:CB2B  AC 2E 26   			ldy.h	_zenny_amount
11789                        		__sge_w.wm	_shop_prices + 6
         02:CB2E  CD 37 26   			cmp.l	_shop_prices + 6		; Subtract memory from Y:A.
         02:CB31  98         			tya
         02:CB32  ED 38 26   			sbc.h	_shop_prices + 6
         02:CB35  50 02      			bvc	!+
         02:CB37  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:CB39  49 80      	!:		eor	#$80
         02:CB3B  0A         			asl	a
11790                        		__bfalse	.LL523
         02:CB3C  B0 03 4C EA			bcc	.LL523
         02:CB40  CD          
11791                        	
11792                        		.dbg	line,	"include\routines_SHOP.c", 186; {
11793                        	
11794                        		.dbg	line,	"include\routines_SHOP.c", 187; if(weapon_level < 4)
11795                        		__ld.umq	_weapon_level
         02:CB41  AD 25 23   			lda	_weapon_level
11796                        		__ult_b.uiq	4
         02:CB44  C9 04      			cmp	#4		; Subtract integer from A.
         02:CB46  6A         			ror	a		; CC if A < integer.
         02:CB47  49 80      			eor	#$80
         02:CB49  2A         			rol	a
11797                        		__bfalse	.LL524
         02:CB4A  B0 03 4C EA			bcc	.LL524
         02:CB4E  CD          
11798                        	
11799                        		.dbg	line,	"include\routines_SHOP.c", 188; {
11800                        	
11801                        		.dbg	line,	"include\routines_SHOP.c", 189; weapon_level = 4;
11802                        		__st.umiq	4, _weapon_level
         02:CB4F  A9 04      			lda.l	#4
         02:CB51  8D 25 23   			sta	_weapon_level
11803                        	
11804                        		.dbg	line,	"include\routines_SHOP.c", 190; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_8, SIZEOF(tileset_WEAPON_8) >> 1 );
11805                        		__st.wmiq	4256, _di
         02:CB54  A9 A0      			lda.l	#4256
         02:CB56  85 F0      			sta.l	_di
         02:CB58  A9 10      			lda.h	#4256
         02:CB5A  85 F1      			sta.h	_di
11806                        		__farptr	_tileset_WEAPON_8, _bp_bank, _bp
         02:CB5C  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_8))
         02:CB5E  85 EC      			sta.l	_bp
         02:CB60  A9 79      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_8))
         02:CB62  85 ED      			sta.h	_bp
         02:CB64  A9 03      			lda	#bank(_tileset_WEAPON_8)
         02:CB66  85 02      			sta	_bp_bank
11807                        		__ld.wi		___sizeof__tileset_WEAPON_8
         02:CB68  A9 80      			lda.l	#___sizeof__tileset_WEAPON_8
         02:CB6A  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_8
11808                        		__lsr.wi	1
         02:CB6C  42         			say
         02:CB6D  4A         			lsr	a
         02:CB6E  42         			say
         02:CB6F  6A         			ror	a
11809                        		__st.wmq	_ax
         02:CB70  85 F8      			sta.l	_ax
         02:CB72  84 F9      			sty.h	_ax
11810                        		 _load_vram.3
         02:CB74  82         			clx				; Offset to PCE VDC.
         02:CB75  20 4F FF   			call	load_vram_x
11811                        	
11812                        		.dbg	line,	"include\routines_SHOP.c", 192; zenny_amount -= shop_prices[3];
11813                        		__ld.wm		_shop_prices + 6
         02:CB78  AD 37 26   			lda.l	_shop_prices + 6
         02:CB7B  AC 38 26   			ldy.h	_shop_prices + 6
11814                        		__isub_st.wmq	_zenny_amount
         02:CB7E  38         			sec
         02:CB7F  49 FF      			eor	#$FF
         02:CB81  6D 2D 26   			adc.l	_zenny_amount
         02:CB84  8D 2D 26   			sta.l	_zenny_amount
         02:CB87  98         			tya
         02:CB88  49 FF      			eor	#$FF
         02:CB8A  6D 2E 26   			adc.h	_zenny_amount
         02:CB8D  8D 2E 26   			sta.h	_zenny_amount
11815                        	
11816                        		.dbg	line,	"include\routines_SHOP.c", 193; display_ZENNY();
11817                        		__call		_display_ZENNY
         02:CB90  20 45 FF   			call	_display_ZENNY
11818                        	
11819                        		.dbg	line,	"include\routines_SHOP.c", 194; }
11820                        	
11821                        		.dbg	line,	"include\routines_SHOP.c", 195; }
11822    02:CB93             	.LL524	.alias		.LL512
11823                        	
11824                        		.dbg	line,	"include\routines_SHOP.c", 197; break;  
11825    02:CB93             	.LL523	.alias		.LL512
11826                        		__bra		.LL512
         02:CB93  4C EA CD   			bra	.LL512
11827                        	
11828                        		.dbg	line,	"include\routines_SHOP.c", 200; // KEY //
11829                        	
11830                        		.dbg	line,	"include\routines_SHOP.c", 201; case 4:
11831    02:CB96             	.LL525:
11832                        		__case		4
11833                        	
11834                        		.dbg	line,	"include\routines_SHOP.c", 202; if(zenny_amount >= shop_prices[4])
11835                        		__ld.wm		_zenny_amount
         02:CB96  AD 2D 26   			lda.l	_zenny_amount
         02:CB99  AC 2E 26   			ldy.h	_zenny_amount
11836                        		__sge_w.wm	_shop_prices + 8
         02:CB9C  CD 39 26   			cmp.l	_shop_prices + 8		; Subtract memory from Y:A.
         02:CB9F  98         			tya
         02:CBA0  ED 3A 26   			sbc.h	_shop_prices + 8
         02:CBA3  50 02      			bvc	!+
         02:CBA5  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:CBA7  49 80      	!:		eor	#$80
         02:CBA9  0A         			asl	a
11837                        		__bfalse	.LL526
         02:CBAA  B0 03 4C EA			bcc	.LL526
         02:CBAE  CD          
11838                        	
11839                        		.dbg	line,	"include\routines_SHOP.c", 203; {
11840                        	
11841                        		.dbg	line,	"include\routines_SHOP.c", 204; key_amount += 1;
11842                        		__add_st.umiq	1, _key_amount
         02:CBAF  EE 27 23   			inc	_key_amount
11843                        	
11844                        		.dbg	line,	"include\routines_SHOP.c", 206; zenny_amount -= shop_prices[4];
11845                        		__ld.wm		_shop_prices + 8
         02:CBB2  AD 39 26   			lda.l	_shop_prices + 8
         02:CBB5  AC 3A 26   			ldy.h	_shop_prices + 8
11846                        		__isub_st.wmq	_zenny_amount
         02:CBB8  38         			sec
         02:CBB9  49 FF      			eor	#$FF
         02:CBBB  6D 2D 26   			adc.l	_zenny_amount
         02:CBBE  8D 2D 26   			sta.l	_zenny_amount
         02:CBC1  98         			tya
         02:CBC2  49 FF      			eor	#$FF
         02:CBC4  6D 2E 26   			adc.h	_zenny_amount
         02:CBC7  8D 2E 26   			sta.h	_zenny_amount
11847                        	
11848                        		.dbg	line,	"include\routines_SHOP.c", 207; display_KEY();
11849                        		__call		_display_KEY
         02:CBCA  20 8B FF   			call	_display_KEY
11850                        	
11851                        		.dbg	line,	"include\routines_SHOP.c", 208; }
11852                        	
11853                        		.dbg	line,	"include\routines_SHOP.c", 210; break;   
11854    02:CBCD             	.LL526	.alias		.LL512
11855                        		__bra		.LL512
         02:CBCD  4C EA CD   			bra	.LL512
11856                        	
11857                        		.dbg	line,	"include\routines_SHOP.c", 213; // ARMOR 1 //
11858                        	
11859                        		.dbg	line,	"include\routines_SHOP.c", 214; case 5:
11860    02:CBD0             	.LL527:
11861                        		__case		5
11862                        	
11863                        		.dbg	line,	"include\routines_SHOP.c", 215; if(zenny_amount >= shop_prices[5])
11864                        		__ld.wm		_zenny_amount
         02:CBD0  AD 2D 26   			lda.l	_zenny_amount
         02:CBD3  AC 2E 26   			ldy.h	_zenny_amount
11865                        		__sge_w.wm	_shop_prices + 10
         02:CBD6  CD 3B 26   			cmp.l	_shop_prices + 10		; Subtract memory from Y:A.
         02:CBD9  98         			tya
         02:CBDA  ED 3C 26   			sbc.h	_shop_prices + 10
         02:CBDD  50 02      			bvc	!+
         02:CBDF  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:CBE1  49 80      	!:		eor	#$80
         02:CBE3  0A         			asl	a
11866                        		__bfalse	.LL528
         02:CBE4  B0 03 4C EA			bcc	.LL528
         02:CBE8  CD          
11867                        	
11868                        		.dbg	line,	"include\routines_SHOP.c", 216; {
11869                        	
11870                        		.dbg	line,	"include\routines_SHOP.c", 217; if(armor_level < 1)
11871                        		__ld.umq	_armor_level
         02:CBE9  AD 24 23   			lda	_armor_level
11872                        		__ult_b.uiq	1
         02:CBEC  C9 01      			cmp	#1		; Subtract integer from A.
         02:CBEE  6A         			ror	a		; CC if A < integer.
         02:CBEF  49 80      			eor	#$80
         02:CBF1  2A         			rol	a
11873                        		__bfalse	.LL529
         02:CBF2  B0 03 4C EA			bcc	.LL529
         02:CBF6  CD          
11874                        	
11875                        		.dbg	line,	"include\routines_SHOP.c", 218; {
11876                        	
11877                        		.dbg	line,	"include\routines_SHOP.c", 219; armor_level = 1;
11878                        		__st.umiq	1, _armor_level
         02:CBF7  A9 01      			lda.l	#1
         02:CBF9  8D 24 23   			sta	_armor_level
11879                        	
11880                        		.dbg	line,	"include\routines_SHOP.c", 220; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_1, SIZEOF(tileset_ARMOR_1) >> 1 );
11881                        		__st.wmiq	4320, _di
         02:CBFC  A9 E0      			lda.l	#4320
         02:CBFE  85 F0      			sta.l	_di
         02:CC00  A9 10      			lda.h	#4320
         02:CC02  85 F1      			sta.h	_di
11882                        		__farptr	_tileset_ARMOR_1, _bp_bank, _bp
         02:CC04  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_1))
         02:CC06  85 EC      			sta.l	_bp
         02:CC08  A9 75      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_1))
         02:CC0A  85 ED      			sta.h	_bp
         02:CC0C  A9 03      			lda	#bank(_tileset_ARMOR_1)
         02:CC0E  85 02      			sta	_bp_bank
11883                        		__ld.wi		___sizeof__tileset_ARMOR_1
         02:CC10  A9 80      			lda.l	#___sizeof__tileset_ARMOR_1
         02:CC12  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_1
11884                        		__lsr.wi	1
         02:CC14  42         			say
         02:CC15  4A         			lsr	a
         02:CC16  42         			say
         02:CC17  6A         			ror	a
11885                        		__st.wmq	_ax
         02:CC18  85 F8      			sta.l	_ax
         02:CC1A  84 F9      			sty.h	_ax
11886                        		 _load_vram.3
         02:CC1C  82         			clx				; Offset to PCE VDC.
         02:CC1D  20 4F FF   			call	load_vram_x
11887                        	
11888                        		.dbg	line,	"include\routines_SHOP.c", 222; zenny_amount -= shop_prices[5];
11889                        		__ld.wm		_shop_prices + 10
         02:CC20  AD 3B 26   			lda.l	_shop_prices + 10
         02:CC23  AC 3C 26   			ldy.h	_shop_prices + 10
11890                        		__isub_st.wmq	_zenny_amount
         02:CC26  38         			sec
         02:CC27  49 FF      			eor	#$FF
         02:CC29  6D 2D 26   			adc.l	_zenny_amount
         02:CC2C  8D 2D 26   			sta.l	_zenny_amount
         02:CC2F  98         			tya
         02:CC30  49 FF      			eor	#$FF
         02:CC32  6D 2E 26   			adc.h	_zenny_amount
         02:CC35  8D 2E 26   			sta.h	_zenny_amount
11891                        	
11892                        		.dbg	line,	"include\routines_SHOP.c", 223; display_ZENNY();
11893                        		__call		_display_ZENNY
         02:CC38  20 45 FF   			call	_display_ZENNY
11894                        	
11895                        		.dbg	line,	"include\routines_SHOP.c", 224; }
11896                        	
11897                        		.dbg	line,	"include\routines_SHOP.c", 225; }
11898    02:CC3B             	.LL529	.alias		.LL512
11899                        	
11900                        		.dbg	line,	"include\routines_SHOP.c", 227; break;   
11901    02:CC3B             	.LL528	.alias		.LL512
11902                        		__bra		.LL512
         02:CC3B  4C EA CD   			bra	.LL512
11903                        	
11904                        		.dbg	line,	"include\routines_SHOP.c", 230; // ARMOR 2 //
11905                        	
11906                        		.dbg	line,	"include\routines_SHOP.c", 231; case 6:
11907    02:CC3E             	.LL530:
11908                        		__case		6
11909                        	
11910                        		.dbg	line,	"include\routines_SHOP.c", 232; if(zenny_amount >= shop_prices[6])
11911                        		__ld.wm		_zenny_amount
         02:CC3E  AD 2D 26   			lda.l	_zenny_amount
         02:CC41  AC 2E 26   			ldy.h	_zenny_amount
11912                        		__sge_w.wm	_shop_prices + 12
         02:CC44  CD 3D 26   			cmp.l	_shop_prices + 12		; Subtract memory from Y:A.
         02:CC47  98         			tya
         02:CC48  ED 3E 26   			sbc.h	_shop_prices + 12
         02:CC4B  50 02      			bvc	!+
         02:CC4D  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:CC4F  49 80      	!:		eor	#$80
         02:CC51  0A         			asl	a
11913                        		__bfalse	.LL531
         02:CC52  B0 03 4C EA			bcc	.LL531
         02:CC56  CD          
11914                        	
11915                        		.dbg	line,	"include\routines_SHOP.c", 233; {
11916                        	
11917                        		.dbg	line,	"include\routines_SHOP.c", 234; if(armor_level < 4)
11918                        		__ld.umq	_armor_level
         02:CC57  AD 24 23   			lda	_armor_level
11919                        		__ult_b.uiq	4
         02:CC5A  C9 04      			cmp	#4		; Subtract integer from A.
         02:CC5C  6A         			ror	a		; CC if A < integer.
         02:CC5D  49 80      			eor	#$80
         02:CC5F  2A         			rol	a
11920                        		__bfalse	.LL532
         02:CC60  B0 03 4C EA			bcc	.LL532
         02:CC64  CD          
11921                        	
11922                        		.dbg	line,	"include\routines_SHOP.c", 235; {
11923                        	
11924                        		.dbg	line,	"include\routines_SHOP.c", 236; armor_level = 4;
11925                        		__st.umiq	4, _armor_level
         02:CC65  A9 04      			lda.l	#4
         02:CC67  8D 24 23   			sta	_armor_level
11926                        	
11927                        		.dbg	line,	"include\routines_SHOP.c", 237; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_2, SIZEOF(tileset_ARMOR_2) >> 1 );
11928                        		__st.wmiq	4320, _di
         02:CC6A  A9 E0      			lda.l	#4320
         02:CC6C  85 F0      			sta.l	_di
         02:CC6E  A9 10      			lda.h	#4320
         02:CC70  85 F1      			sta.h	_di
11929                        		__farptr	_tileset_ARMOR_2, _bp_bank, _bp
         02:CC72  A9 80      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_2))
         02:CC74  85 EC      			sta.l	_bp
         02:CC76  A9 75      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_2))
         02:CC78  85 ED      			sta.h	_bp
         02:CC7A  A9 03      			lda	#bank(_tileset_ARMOR_2)
         02:CC7C  85 02      			sta	_bp_bank
11930                        		__ld.wi		___sizeof__tileset_ARMOR_2
         02:CC7E  A9 80      			lda.l	#___sizeof__tileset_ARMOR_2
         02:CC80  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_2
11931                        		__lsr.wi	1
         02:CC82  42         			say
         02:CC83  4A         			lsr	a
         02:CC84  42         			say
         02:CC85  6A         			ror	a
11932                        		__st.wmq	_ax
         02:CC86  85 F8      			sta.l	_ax
         02:CC88  84 F9      			sty.h	_ax
11933                        		 _load_vram.3
         02:CC8A  82         			clx				; Offset to PCE VDC.
         02:CC8B  20 4F FF   			call	load_vram_x
11934                        	
11935                        		.dbg	line,	"include\routines_SHOP.c", 239; zenny_amount -= shop_prices[6];
11936                        		__ld.wm		_shop_prices + 12
         02:CC8E  AD 3D 26   			lda.l	_shop_prices + 12
         02:CC91  AC 3E 26   			ldy.h	_shop_prices + 12
11937                        		__isub_st.wmq	_zenny_amount
         02:CC94  38         			sec
         02:CC95  49 FF      			eor	#$FF
         02:CC97  6D 2D 26   			adc.l	_zenny_amount
         02:CC9A  8D 2D 26   			sta.l	_zenny_amount
         02:CC9D  98         			tya
         02:CC9E  49 FF      			eor	#$FF
         02:CCA0  6D 2E 26   			adc.h	_zenny_amount
         02:CCA3  8D 2E 26   			sta.h	_zenny_amount
11938                        	
11939                        		.dbg	line,	"include\routines_SHOP.c", 240; display_ZENNY();
11940                        		__call		_display_ZENNY
         02:CCA6  20 45 FF   			call	_display_ZENNY
11941                        	
11942                        		.dbg	line,	"include\routines_SHOP.c", 241; }
11943                        	
11944                        		.dbg	line,	"include\routines_SHOP.c", 242; }
11945    02:CCA9             	.LL532	.alias		.LL512
11946                        	
11947                        		.dbg	line,	"include\routines_SHOP.c", 244; break;    
11948    02:CCA9             	.LL531	.alias		.LL512
11949                        		__bra		.LL512
         02:CCA9  4C EA CD   			bra	.LL512
11950                        	
11951                        		.dbg	line,	"include\routines_SHOP.c", 247; // ARMOR 4 //
11952                        	
11953                        		.dbg	line,	"include\routines_SHOP.c", 248; case 7:
11954    02:CCAC             	.LL533:
11955                        		__case		7
11956                        	
11957                        		.dbg	line,	"include\routines_SHOP.c", 249; if(zenny_amount >= shop_prices[7])
11958                        		__ld.wm		_zenny_amount
         02:CCAC  AD 2D 26   			lda.l	_zenny_amount
         02:CCAF  AC 2E 26   			ldy.h	_zenny_amount
11959                        		__sge_w.wm	_shop_prices + 14
         02:CCB2  CD 3F 26   			cmp.l	_shop_prices + 14		; Subtract memory from Y:A.
         02:CCB5  98         			tya
         02:CCB6  ED 40 26   			sbc.h	_shop_prices + 14
         02:CCB9  50 02      			bvc	!+
         02:CCBB  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:CCBD  49 80      	!:		eor	#$80
         02:CCBF  0A         			asl	a
11960                        		__bfalse	.LL534
         02:CCC0  B0 03 4C EA			bcc	.LL534
         02:CCC4  CD          
11961                        	
11962                        		.dbg	line,	"include\routines_SHOP.c", 250; {
11963                        	
11964                        		.dbg	line,	"include\routines_SHOP.c", 251; if(armor_level < 5)
11965                        		__ld.umq	_armor_level
         02:CCC5  AD 24 23   			lda	_armor_level
11966                        		__ult_b.uiq	5
         02:CCC8  C9 05      			cmp	#5		; Subtract integer from A.
         02:CCCA  6A         			ror	a		; CC if A < integer.
         02:CCCB  49 80      			eor	#$80
         02:CCCD  2A         			rol	a
11967                        		__bfalse	.LL535
         02:CCCE  B0 03 4C EA			bcc	.LL535
         02:CCD2  CD          
11968                        	
11969                        		.dbg	line,	"include\routines_SHOP.c", 252; {
11970                        	
11971                        		.dbg	line,	"include\routines_SHOP.c", 253; armor_level = 5;
11972                        		__st.umiq	5, _armor_level
         02:CCD3  A9 05      			lda.l	#5
         02:CCD5  8D 24 23   			sta	_armor_level
11973                        	
11974                        		.dbg	line,	"include\routines_SHOP.c", 254; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_4, SIZEOF(tileset_ARMOR_4) >> 1 );
11975                        		__st.wmiq	4320, _di
         02:CCD8  A9 E0      			lda.l	#4320
         02:CCDA  85 F0      			sta.l	_di
         02:CCDC  A9 10      			lda.h	#4320
         02:CCDE  85 F1      			sta.h	_di
11976                        		__farptr	_tileset_ARMOR_4, _bp_bank, _bp
         02:CCE0  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_4))
         02:CCE2  85 EC      			sta.l	_bp
         02:CCE4  A9 76      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_4))
         02:CCE6  85 ED      			sta.h	_bp
         02:CCE8  A9 03      			lda	#bank(_tileset_ARMOR_4)
         02:CCEA  85 02      			sta	_bp_bank
11977                        		__ld.wi		___sizeof__tileset_ARMOR_4
         02:CCEC  A9 80      			lda.l	#___sizeof__tileset_ARMOR_4
         02:CCEE  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_4
11978                        		__lsr.wi	1
         02:CCF0  42         			say
         02:CCF1  4A         			lsr	a
         02:CCF2  42         			say
         02:CCF3  6A         			ror	a
11979                        		__st.wmq	_ax
         02:CCF4  85 F8      			sta.l	_ax
         02:CCF6  84 F9      			sty.h	_ax
11980                        		 _load_vram.3
         02:CCF8  82         			clx				; Offset to PCE VDC.
         02:CCF9  20 4F FF   			call	load_vram_x
11981                        	
11982                        		.dbg	line,	"include\routines_SHOP.c", 256; zenny_amount -= shop_prices[7];
11983                        		__ld.wm		_shop_prices + 14
         02:CCFC  AD 3F 26   			lda.l	_shop_prices + 14
         02:CCFF  AC 40 26   			ldy.h	_shop_prices + 14
11984                        		__isub_st.wmq	_zenny_amount
         02:CD02  38         			sec
         02:CD03  49 FF      			eor	#$FF
         02:CD05  6D 2D 26   			adc.l	_zenny_amount
         02:CD08  8D 2D 26   			sta.l	_zenny_amount
         02:CD0B  98         			tya
         02:CD0C  49 FF      			eor	#$FF
         02:CD0E  6D 2E 26   			adc.h	_zenny_amount
         02:CD11  8D 2E 26   			sta.h	_zenny_amount
11985                        	
11986                        		.dbg	line,	"include\routines_SHOP.c", 257; display_ZENNY();
11987                        		__call		_display_ZENNY
         02:CD14  20 45 FF   			call	_display_ZENNY
11988                        	
11989                        		.dbg	line,	"include\routines_SHOP.c", 258; }
11990                        	
11991                        		.dbg	line,	"include\routines_SHOP.c", 259; }
11992    02:CD17             	.LL535	.alias		.LL512
11993                        	
11994                        		.dbg	line,	"include\routines_SHOP.c", 261; break;   
11995    02:CD17             	.LL534	.alias		.LL512
11996                        		__bra		.LL512
         02:CD17  4C EA CD   			bra	.LL512
11997                        	
11998                        		.dbg	line,	"include\routines_SHOP.c", 264; // ARMOR 8 //
11999                        	
12000                        		.dbg	line,	"include\routines_SHOP.c", 265; case 8:
12001    02:CD1A             	.LL536:
12002                        		__case		8
12003                        	
12004                        		.dbg	line,	"include\routines_SHOP.c", 266; if(zenny_amount >= shop_prices[8])
12005                        		__ld.wm		_zenny_amount
         02:CD1A  AD 2D 26   			lda.l	_zenny_amount
         02:CD1D  AC 2E 26   			ldy.h	_zenny_amount
12006                        		__sge_w.wm	_shop_prices + 16
         02:CD20  CD 41 26   			cmp.l	_shop_prices + 16		; Subtract memory from Y:A.
         02:CD23  98         			tya
         02:CD24  ED 42 26   			sbc.h	_shop_prices + 16
         02:CD27  50 02      			bvc	!+
         02:CD29  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:CD2B  49 80      	!:		eor	#$80
         02:CD2D  0A         			asl	a
12007                        		__bfalse	.LL537
         02:CD2E  B0 03 4C EA			bcc	.LL537
         02:CD32  CD          
12008                        	
12009                        		.dbg	line,	"include\routines_SHOP.c", 267; {
12010                        	
12011                        		.dbg	line,	"include\routines_SHOP.c", 268; if(armor_level < 8)
12012                        		__ld.umq	_armor_level
         02:CD33  AD 24 23   			lda	_armor_level
12013                        		__ult_b.uiq	8
         02:CD36  C9 08      			cmp	#8		; Subtract integer from A.
         02:CD38  6A         			ror	a		; CC if A < integer.
         02:CD39  49 80      			eor	#$80
         02:CD3B  2A         			rol	a
12014                        		__bfalse	.LL538
         02:CD3C  B0 03 4C EA			bcc	.LL538
         02:CD40  CD          
12015                        	
12016                        		.dbg	line,	"include\routines_SHOP.c", 269; {
12017                        	
12018                        		.dbg	line,	"include\routines_SHOP.c", 270; armor_level = 8;
12019                        		__st.umiq	8, _armor_level
         02:CD41  A9 08      			lda.l	#8
         02:CD43  8D 24 23   			sta	_armor_level
12020                        	
12021                        		.dbg	line,	"include\routines_SHOP.c", 271; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_8, SIZEOF(tileset_ARMOR_8) >> 1 );
12022                        		__st.wmiq	4320, _di
         02:CD46  A9 E0      			lda.l	#4320
         02:CD48  85 F0      			sta.l	_di
         02:CD4A  A9 10      			lda.h	#4320
         02:CD4C  85 F1      			sta.h	_di
12023                        		__farptr	_tileset_ARMOR_8, _bp_bank, _bp
         02:CD4E  A9 80      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_8))
         02:CD50  85 EC      			sta.l	_bp
         02:CD52  A9 76      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_8))
         02:CD54  85 ED      			sta.h	_bp
         02:CD56  A9 03      			lda	#bank(_tileset_ARMOR_8)
         02:CD58  85 02      			sta	_bp_bank
12024                        		__ld.wi		___sizeof__tileset_ARMOR_8
         02:CD5A  A9 80      			lda.l	#___sizeof__tileset_ARMOR_8
         02:CD5C  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_8
12025                        		__lsr.wi	1
         02:CD5E  42         			say
         02:CD5F  4A         			lsr	a
         02:CD60  42         			say
         02:CD61  6A         			ror	a
12026                        		__st.wmq	_ax
         02:CD62  85 F8      			sta.l	_ax
         02:CD64  84 F9      			sty.h	_ax
12027                        		 _load_vram.3
         02:CD66  82         			clx				; Offset to PCE VDC.
         02:CD67  20 4F FF   			call	load_vram_x
12028                        	
12029                        		.dbg	line,	"include\routines_SHOP.c", 273; zenny_amount -= shop_prices[8];
12030                        		__ld.wm		_shop_prices + 16
         02:CD6A  AD 41 26   			lda.l	_shop_prices + 16
         02:CD6D  AC 42 26   			ldy.h	_shop_prices + 16
12031                        		__isub_st.wmq	_zenny_amount
         02:CD70  38         			sec
         02:CD71  49 FF      			eor	#$FF
         02:CD73  6D 2D 26   			adc.l	_zenny_amount
         02:CD76  8D 2D 26   			sta.l	_zenny_amount
         02:CD79  98         			tya
         02:CD7A  49 FF      			eor	#$FF
         02:CD7C  6D 2E 26   			adc.h	_zenny_amount
         02:CD7F  8D 2E 26   			sta.h	_zenny_amount
12032                        	
12033                        		.dbg	line,	"include\routines_SHOP.c", 274; display_ZENNY();
12034                        		__call		_display_ZENNY
         02:CD82  20 45 FF   			call	_display_ZENNY
12035                        	
12036                        		.dbg	line,	"include\routines_SHOP.c", 275; }
12037                        	
12038                        		.dbg	line,	"include\routines_SHOP.c", 276; }
12039    02:CD85             	.LL538	.alias		.LL512
12040                        	
12041                        		.dbg	line,	"include\routines_SHOP.c", 278; break;   
12042    02:CD85             	.LL537	.alias		.LL512
12043                        		__bra		.LL512
         02:CD85  80 63      			bra	.LL512
12044                        	
12045                        		.dbg	line,	"include\routines_SHOP.c", 281; // POTION //
12046                        	
12047                        		.dbg	line,	"include\routines_SHOP.c", 282; case 9:
12048    02:CD87             	.LL539:
12049                        		__case		9
12050                        	
12051                        		.dbg	line,	"include\routines_SHOP.c", 283; if(zenny_amount >= shop_prices[9])
12052                        		__ld.wm		_zenny_amount
         02:CD87  AD 2D 26   			lda.l	_zenny_amount
         02:CD8A  AC 2E 26   			ldy.h	_zenny_amount
12053                        		__sge_w.wm	_shop_prices + 18
         02:CD8D  CD 43 26   			cmp.l	_shop_prices + 18		; Subtract memory from Y:A.
         02:CD90  98         			tya
         02:CD91  ED 44 26   			sbc.h	_shop_prices + 18
         02:CD94  50 02      			bvc	!+
         02:CD96  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:CD98  49 80      	!:		eor	#$80
         02:CD9A  0A         			asl	a
12054                        		__bfalse	.LL540
         02:CD9B  90 4D      			bcc	.LL540
12055                        	
12056                        		.dbg	line,	"include\routines_SHOP.c", 284; {
12057                        	
12058                        		.dbg	line,	"include\routines_SHOP.c", 285; potion_amount += 1;
12059                        		__add_st.umiq	1, _potion_amount
         02:CD9D  EE 28 23   			inc	_potion_amount
12060                        	
12061                        		.dbg	line,	"include\routines_SHOP.c", 287; zenny_amount -= shop_prices[9];
12062                        		__ld.wm		_shop_prices + 18
         02:CDA0  AD 43 26   			lda.l	_shop_prices + 18
         02:CDA3  AC 44 26   			ldy.h	_shop_prices + 18
12063                        		__isub_st.wmq	_zenny_amount
         02:CDA6  38         			sec
         02:CDA7  49 FF      			eor	#$FF
         02:CDA9  6D 2D 26   			adc.l	_zenny_amount
         02:CDAC  8D 2D 26   			sta.l	_zenny_amount
         02:CDAF  98         			tya
         02:CDB0  49 FF      			eor	#$FF
         02:CDB2  6D 2E 26   			adc.h	_zenny_amount
         02:CDB5  8D 2E 26   			sta.h	_zenny_amount
12064                        	
12065                        		.dbg	line,	"include\routines_SHOP.c", 288; display_POTION();
12066                        		__call		_display_POTION
         02:CDB8  20 3B FF   			call	_display_POTION
12067                        	
12068                        		.dbg	line,	"include\routines_SHOP.c", 289; }
12069                        	
12070                        		.dbg	line,	"include\routines_SHOP.c", 291; break;   
12071    02:CDBB             	.LL540	.alias		.LL512
12072                        		__bra		.LL512
         02:CDBB  80 2D      			bra	.LL512
12073                        	
12074                        		.dbg	line,	"include\routines_SHOP.c", 294; // EXIT //
12075                        	
12076                        		.dbg	line,	"include\routines_SHOP.c", 295; case 10:
12077    02:CDBD             	.LL541:
12078                        		__case		10
12079                        	
12080                        		.dbg	line,	"include\routines_SHOP.c", 296; shop_counter = 0;    
12081                        		__st.umiq	0, _shop_counter
         02:CDBD  9C D2 23   			stz	_shop_counter
12082                        	
12083                        		.dbg	line,	"include\routines_SHOP.c", 297; shop_phase = SHOP_PHASE_EXIT;
12084                        		__st.umiq	2, _shop_phase
         02:CDC0  A9 02      			lda.l	#2
         02:CDC2  8D D1 23   			sta	_shop_phase
12085                        	
12086                        		.dbg	line,	"include\routines_SHOP.c", 299; break;                  
12087                        		__bra		.LL512
         02:CDC5  80 23      			bra	.LL512
12088                        	
12089                        		.dbg	line,	"include\routines_SHOP.c", 300; }
12090    02:CDC7             	.LL511:
12091                        		__switch_r.ur	0, 10
         02:CDC7  C9 0B      			cmp	#(10 - 0) + 1
         02:CDC9  90 02      			bcc	!found+
         02:CDCB  A9 0B      	!default:	lda	#(10 - 0) + 1
         02:CDCD  0A         	!found:		asl	a
         02:CDCE  AA         			tax
         02:CDCF  7C D2 CD   			jmp	[!table+, x]
12092                        	
12093    02:CDD2  DE C9      	!table:		dw	.LL513, .LL516, .LL519, .LL522, .LL525, .LL527, .LL530, .LL533
         02:CDD4  4C CA       
         02:CDD6  BA CA       
         02:CDD8  28 CB       
         02:CDDA  96 CB       
         02:CDDC  D0 CB       
         02:CDDE  3E CC       
         02:CDE0  AC CC       
12094    02:CDE2  1A CD      			dw	.LL536, .LL539, .LL541
         02:CDE4  87 CD       
         02:CDE6  BD CD       
12095    02:CDE8  EA CD      			dw	.LL512
12096    02:CDEA             	.LL512:
12097                        	
12098                        		.dbg	line,	"include\routines_SHOP.c", 301; }
12099                        	
12100                        		.dbg	line,	"include\routines_SHOP.c", 302; }
12101    02:CDEA             	.LL510:
12102    02:CDEA             	.LL509:
12103    02:CDEA             	.LL506:
12104    02:CDEA             	.LL502:
12105    02:CDEA             	.LL499:
12106    02:CDEA             	.LL494:
12107                        		__return	0
         02:CDEA  4C EF FF   			jmp	leave_proc
12108                        		.dbg	clear
12109                        		.endp
12110               7060     		.data
12111               230D     		.bss
12112    F8:230D             	__joypad_BUTTONS_SHOP_loc:
12113    F8:230D             			ds	1
12114    F8:230E             	__joypad_BUTTONS_SHOP_end:
12115               E309     		.code
12116                        		.pceas
12117                        	
12118                        		.dbg	line,	"main.c", 24; #include "include/init.c"
12119                        		.dbg	line,	"include\init.c", 1; #include "huc.h"
12120                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
12121                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
12122                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
12123                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
12124                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
12125                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
12126                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
12127                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
12128                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
12129                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
12130                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
12131                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
12132                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
12133                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
12134                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
12135                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
12136                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
12137                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
12138                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
12139                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
12140                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
12141                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
12142                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
12143                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
12144                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
12145                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
12146                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
12147                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
12148                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
12149                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
12150                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
12151                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
12152                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
12153                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
12154                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
12155                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
12156                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
12157                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
12158                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
12159                        		.dbg	line,	"include\init.c", 2; #include "hucc-scroll.h"
12160                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 1; #ifndef _hucc_scroll_h
12161                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 2; #define _hucc_scroll_h
12162                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 4; /****************************************************************************
12163                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 5; ; ***************************************************************************
12164                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 6; ;
12165                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 7; ; hucc-scroll.h
12166                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 8; ;
12167                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 9; ; Routines for a fast split-screen scrolling system.
12168                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 10; ;
12169                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 11; ; Copyright John Brandwood 2024.
12170                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 12; ;
12171                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 13; ; Distributed under the Boost Software License, Version 1.0.
12172                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
12173                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
12174                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 16; ;
12175                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 17; ; ***************************************************************************
12176                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 18; ; ***************************************************************************
12177                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 19; ;
12178                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 20; ; The maximum number of splits for each screen layer is set in your project's
12179                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 21; ; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
12180                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 22; ;
12181                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 23; ; Your first active split must be defined to start at screen line 0, and then
12182                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 24; ; the rest of the active splits must be in increasing line order to match the
12183                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 25; ; way that the PC Engine displays the output image.
12184                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 26; ;
12185                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 27; ; You can have disabled splits interleaved with your active splits.
12186                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 28; ;
12187                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 29; ; Splits that are normally disabled can be used to create full screen effects
12188                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 30; ; such as bouncing the screen up and down by adding blank areas at the top or
12189                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 31; ; bottom of the screen, and then rapidly changing the height of those areas.
12190                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 32; ;
12191                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 33; ; ***************************************************************************
12192                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 34; ; **************************************************************************/
12193                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 36; // *************
12194                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 37; // VDC bits for display_flags ...
12195                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 38; // *************
12196                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 40; #ifndef BKG_OFF
12197                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 41; #define BKG_OFF 0x00
12198                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 42; #endif
12199                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 44; #ifndef SPR_OFF
12200                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 45; #define SPR_OFF 0x00
12201                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 46; #endif
12202                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 48; #ifndef BKG_ON
12203                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 49; #define BKG_ON 0x80
12204                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 50; #endif
12205                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 52; #ifndef SPR_ON
12206                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 53; #define SPR_ON 0x40
12207                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 54; #endif
12208                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 56; // *************
12209                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 57; // Functions in hucc-scroll.asm ...
12210                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 58; // *************
12211                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 60; #ifdef __HUCC__
12212                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 62; #asmdef	HUCC_USES_NEW_SCROLL 1
12213                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 64; extern void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
12214                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 65; extern void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
12215                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 67; extern void __fastcall disable_split( unsigned char index<acc> );
12216                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 68; extern void __fastcall sgx_disable_split( unsigned char index<acc> );
12217                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 70; extern void __fastcall __macro disable_all_splits( void );
12218                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 71; extern void __fastcall __macro sgx_disable_all_splits( void );
12219                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 73; #asm
12220                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 74; .macro	_disable_all_splits
12221                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 75; ldy	#HUCC_PCE_SPLITS - 1
12222                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 76; !loop:		tya
12223                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 77; call	_disable_split.1
12224                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 78; dey
12225                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 79; bpl	!loop-
12226                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 80; .endm
12227                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 82; .macro	_sgx_disable_all_splits
12228                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 83; ldy	#HUCC_SGX_SPLITS - 1
12229                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 84; !loop:		tya
12230                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 85; call	_sgx_disable_split.1
12231                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 86; dey
12232                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 87; bpl	!loop-
12233                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 88; .endm
12234                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 89; #endasm
12235                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 91; #endif // __HUCC__
12236                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 93; #endif // _hucc_scroll_h
12237                        		.dbg	line,	"include\init.c", 3; #include "hucc-chrmap.h"
12238                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 1; #ifndef _hucc_chrmap_h
12239                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 2; #define _hucc_chrmap_h
12240                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 4; /****************************************************************************
12241                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 5; ; ***************************************************************************
12242                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 6; ;
12243                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 7; ; hucc-chrmap.h
12244                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 8; ;
12245                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 9; ; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
12246                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 10; ;
12247                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 11; ; Copyright John Brandwood 2025.
12248                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 12; ;
12249                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
12250                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
12251                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
12252                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 16; ;
12253                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 17; ; ***************************************************************************
12254                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 18; ; ***************************************************************************
12255                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 19; ;
12256                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 20; ; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
12257                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 21; ;
12258                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 22; ; The maximum total size for a chrmap is 16KBytes, which allows for maps up
12259                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 23; ; to 256x32 tiles (2048x256 pixels).
12260                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 24; ;
12261                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 25; ; ***************************************************************************
12262                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 26; ; **************************************************************************/
12263                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 28; // *************
12264                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 29; // This code extends the blkmap library ...
12265                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 30; // *************
12266                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 32; #include "hucc-blkmap.h"
12267                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 34; // *************
12268                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 35; // Functions in chrmap.asm ...
12269                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 36; // *************
12270                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 38; #ifdef __HUCC__
12271                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 40; #asmdef	HUCC_USES_CHRMAP 1
12272                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 42; extern void __fastcall __nop set_chrmap( unsigned char __far *chrmap<vdc_map_bank:vdc_map_addr>, unsigned char tiles_w<vdc_map_line_w> );
12273                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 44; extern void __fastcall draw_bat( void );
12274                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 45; extern void __fastcall scroll_bat( void );
12275                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 47; extern void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
12276                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 49; #ifdef _SGX
12277                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 51; extern void __fastcall __nop sgx_set_chrmap( unsigned char __far *chrmap<sgx_map_bank:sgx_map_addr>, unsigned char tiles_w<sgx_map_line_w> );
12278                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 53; extern void __fastcall sgx_draw_bat( void );
12279                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 54; extern void __fastcall sgx_scroll_bat( void );
12280                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 56; extern void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
12281                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 58; #endif
12282                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 60; #endif // __HUCC__
12283                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 62; #endif // _hucc_chrmap_h
12284                        		.dbg	line,	"include\init.c", 4; #include "hucc-blkmap.h"
12285                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
12286                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
12287                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
12288                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
12289                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
12290                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
12291                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
12292                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
12293                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
12294                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
12295                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
12296                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
12297                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
12298                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
12299                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
12300                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
12301                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
12302                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
12303                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
12304                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
12305                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
12306                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
12307                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
12308                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
12309                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
12310                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
12311                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
12312                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
12313                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
12314                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
12315                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
12316                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
12317                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
12318                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
12319                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
12320                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
12321                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
12322                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
12323                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
12324                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
12325                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
12326                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
12327                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
12328                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
12329                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
12330                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
12331                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
12332                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
12333                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
12334                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
12335                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
12336                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
12337                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
12338                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
12339                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
12340                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
12341                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
12342                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
12343                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
12344                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
12345                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
12346                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
12347                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
12348                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
12349                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
12350                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
12351                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
12352                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 86; .macro	_set_blkmap.2
12353                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 87; stz	vdc_scr_bank
12354                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 88; .endm
12355                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 90; .macro	_set_multimap.2
12356                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 91; lda	vdc_bat_width
12357                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 92; lsr	a
12358                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 93; sta	vdc_map_line_w
12359                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 94; .endm
12360                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 96; .macro	SCREEN
12361                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 97; db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
12362                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 98; db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
12363                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 99; db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
12364                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 100; dw	(\4)
12365                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 101; .endm
12366                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
12367                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
12368                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
12369                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
12370                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
12371                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
12372                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
12373                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
12374                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
12375                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
12376                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
12377                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
12378                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
12379                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
12380                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
12381                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
12382                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
12383                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
12384                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
12385                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
12386                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
12387                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
12388                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
12389                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
12390                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
12391                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
12392                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
12393                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
12394                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 144; .macro	_sgx_set_blkmap.2
12395                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 145; stz	sgx_scr_bank
12396                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 146; .endm
12397                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 148; .macro	_sgx_set_multimap.2
12398                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 149; lda	sgx_bat_width
12399                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 150; lsr	a
12400                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 151; sta	sgx_map_line_w
12401                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 152; .endm
12402                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
12403                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
12404                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
12405                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
12406                        		.dbg	line,	"include\init.c", 13; void init_SYSTEM()
12407                        		.dbg	line,	"include\init.c", 14; {
12408                        	;***********************
12409                        	;***********************
12410                        	
12411                        		.hucc
12412    14:D313             		.proc		_init_SYSTEM
12413                        		__enter		_init_SYSTEM
12414                        	
12415                        		.dbg	line,	"include\init.c", 15; // DISABLE DISPLAY //
12416                        	
12417                        		.dbg	line,	"include\init.c", 16; disp_off();
12418                        		__call		_disp_off
         14:D313  20 29 E4   			call	_disp_off
12419                        	
12420                        		.dbg	line,	"include\init.c", 18; // VSYNC //
12421                        	
12422                        		.dbg	line,	"include\init.c", 19; vsync();
12423                        		__call		_vsync
         14:D316  20 09 E3   			call	_vsync
12424                        	
12425                        		.dbg	line,	"include\init.c", 21; // LOAD DEFAULT FONT //
12426                        	
12427                        		.dbg	line,	"include\init.c", 22; load_default_font();
12428                        		 _load_default_font
         14:D319  82         			clx				; Offset to PCE VDC.
         14:D31A  20 C7 FF   			call	huc_monofont_x
12429                        	
12430                        		.dbg	line,	"include\init.c", 25; // SET VDC 1 SCREEN SIZE (IN TILES) - 32x32 = 256 PIXELS
12431                        	
12432                        		.dbg	line,	"include\init.c", 26; set_screen_size(SCR_SIZE_32x32);
12433                        		__st.umiq	0, _al
         14:D31D  64 F8      			stz	_al
12434                        		__call		_set_screen_size.1
         14:D31F  20 31 FF   			call	_set_screen_size.1
12435                        	
12436                        		.dbg	line,	"include\init.c", 29; // SET VDC 2 SCREEN SIZE (IN TILES) - 32x32 = 256 PIXELS
12437                        	
12438                        		.dbg	line,	"include\init.c", 30; sgx_set_screen_size(SCR_SIZE_32x32);
12439                        		__st.umiq	0, _al
         14:D322  64 F8      			stz	_al
12440                        		__call		_sgx_set_screen_size.1
         14:D324  20 27 FF   			call	_sgx_set_screen_size.1
12441                        	
12442                        		.dbg	line,	"include\init.c", 33; // INIT SPRITE ATTRIBUTE TABLE //
12443                        	
12444                        		.dbg	line,	"include\init.c", 34; init_satb();
12445                        		__call		_init_satb
         14:D327  20 B7 E7   			call	_init_satb
12446                        	
12447                        		.dbg	line,	"include\init.c", 35; sgx_init_satb();
12448                        		__call		_sgx_init_satb
         14:D32A  20 CA E7   			call	_sgx_init_satb
12449                        	
12450                        		.dbg	line,	"include\init.c", 38; // ENABLE DISPLAY //
12451                        	
12452                        		.dbg	line,	"include\init.c", 39; //disp_on();
12453                        	
12454                        		.dbg	line,	"include\init.c", 40; }
12455    14:D32D             	.LL542:
12456                        		__return	0
         14:D32D  4C EF FF   			jmp	leave_proc
12457                        		.dbg	clear
12458                        		.endp
12459                        		.pceas
12460                        	
12461                        		.dbg	line,	"include\init.c", 43; void init_VARIABLES()
12462                        		.dbg	line,	"include\init.c", 44; {
12463                        	;***********************
12464                        	;***********************
12465                        	
12466                        		.hucc
12467    14:D217             		.proc		_init_VARIABLES
12468                        		__enter		_init_VARIABLES
12469                        	
12470                        		.dbg	line,	"include\init.c", 45; sequence_id = SEQUENCE_GAME; //SEQUENCE_GAME | SEQUENCE_SHOP
12471                        		__st.umiq	2, _sequence_id
         14:D217  A9 02      			lda.l	#2
         14:D219  8D 11 23   			sta	_sequence_id
12472                        	
12473                        		.dbg	line,	"include\init.c", 47; level_id = 1;
12474                        		__st.umiq	1, _level_id
         14:D21C  A9 01      			lda.l	#1
         14:D21E  8D 13 23   			sta	_level_id
12475                        	
12476                        		.dbg	line,	"include\init.c", 49; key_amount = 0;
12477                        		__st.umiq	0, _key_amount
         14:D221  9C 27 23   			stz	_key_amount
12478                        	
12479                        		.dbg	line,	"include\init.c", 50; potion_amount = 0;
12480                        		__st.umiq	0, _potion_amount
         14:D224  9C 28 23   			stz	_potion_amount
12481                        	
12482                        		.dbg	line,	"include\init.c", 51; zenny_amount = 25000;
12483                        		__st.wmiq	25000, _zenny_amount
         14:D227  A9 A8      			lda.l	#25000
         14:D229  8D 2D 26   			sta.l	_zenny_amount
         14:D22C  A9 61      			lda.h	#25000
         14:D22E  8D 2E 26   			sta.h	_zenny_amount
12484                        	
12485                        		.dbg	line,	"include\init.c", 53; weapon_level = 0;
12486                        		__st.umiq	0, _weapon_level
         14:D231  9C 25 23   			stz	_weapon_level
12487                        	
12488                        		.dbg	line,	"include\init.c", 54; armor_level = 2;
12489                        		__st.umiq	2, _armor_level
         14:D234  A9 02      			lda.l	#2
         14:D236  8D 24 23   			sta	_armor_level
12490                        	
12491                        		.dbg	line,	"include\init.c", 55; 
12492                        	
12493                        		.dbg	line,	"include\init.c", 56; player_naked = FALSE;
12494                        		__st.umiq	0, _player_naked
         14:D239  9C 1D 23   			stz	_player_naked
12495                        	
12496                        		.dbg	line,	"include\init.c", 58; shop_counter = 0;
12497                        		__st.umiq	0, _shop_counter
         14:D23C  9C D2 23   			stz	_shop_counter
12498                        	
12499                        		.dbg	line,	"include\init.c", 59; shop_phase = SHOP_PHASE_ENTER;
12500                        		__st.umiq	0, _shop_phase
         14:D23F  9C D1 23   			stz	_shop_phase
12501                        	
12502                        		.dbg	line,	"include\init.c", 61; respawn = FALSE;
12503                        		__st.umiq	0, _respawn
         14:D242  9C 14 23   			stz	_respawn
12504                        	
12505                        		.dbg	line,	"include\init.c", 63; sequence_loaded = FALSE;
12506                        		__st.umiq	0, _sequence_loaded
         14:D245  9C 12 23   			stz	_sequence_loaded
12507                        	
12508                        		.dbg	line,	"include\init.c", 64; }
12509    14:D248             	.LL543:
12510                        		__return	0
         14:D248  4C EF FF   			jmp	leave_proc
12511                        		.dbg	clear
12512                        		.endp
12513                        		.pceas
12514                        	
12515                        		.dbg	line,	"include\init.c", 67; void init_PLAYER()
12516                        		.dbg	line,	"include\init.c", 68; {
12517                        	;***********************
12518                        	;***********************
12519                        	
12520                        		.hucc
12521    14:D15B             		.proc		_init_PLAYER
12522                        		__enter		_init_PLAYER
12523                        	
12524                        		.dbg	line,	"include\init.c", 69; if(player_naked != RESPAWN_SHOP)
12525                        		__ld.umq	_player_naked
         14:D15B  AD 1D 23   			lda	_player_naked
12526                        		__neq_b.uiq	2
         14:D15E  38         			sec
         14:D15F  49 02      			eor	#2
         14:D161  D0 01      			bne	!+
         14:D163  18         			clc
         14:D164             	!:
12527                        		__bfalse	.LL545
         14:D164  90 03      			bcc	.LL545
12528                        	
12529                        		.dbg	line,	"include\init.c", 70; {
12530                        	
12531                        		.dbg	line,	"include\init.c", 71; player_naked = FALSE;
12532                        		__st.umiq	0, _player_naked
         14:D166  9C 1D 23   			stz	_player_naked
12533                        	
12534                        		.dbg	line,	"include\init.c", 72; }
12535                        	
12536                        		.dbg	line,	"include\init.c", 73; 
12537                        	
12538                        		.dbg	line,	"include\init.c", 74; player_id = PLAYER_START_INDEX;
12539    14:D169             	.LL545:
12540                        		__st.umiq	14, _player_id
         14:D169  A9 0E      			lda.l	#14
         14:D16B  8D 15 23   			sta	_player_id
12541                        	
12542                        		.dbg	line,	"include\init.c", 75; player_axis = AXIS_RIGHT;
12543                        		__st.umiq	0, _player_axis
         14:D16E  9C 17 23   			stz	_player_axis
12544                        	
12545                        		.dbg	line,	"include\init.c", 76; player_previous_axis = player_axis;
12546                        		__ld.um		_player_axis
         14:D171  AD 17 23   			lda	_player_axis
         14:D174  C2         			cly
12547                        		__st.umq	_player_previous_axis
         14:D175  8D 18 23   			sta	_player_previous_axis
12548                        	
12549                        		.dbg	line,	"include\init.c", 77; player_counter_anim = 0;
12550                        		__st.umiq	0, _player_counter_anim
         14:D178  9C 19 23   			stz	_player_counter_anim
12551                        	
12552                        		.dbg	line,	"include\init.c", 78; player_index_jump = 0;
12553                        		__st.umiq	0, _player_index_jump
         14:D17B  9C 1A 23   			stz	_player_index_jump
12554                        	
12555                        		.dbg	line,	"include\init.c", 79; player_index_fall = 0;
12556                        		__st.umiq	0, _player_index_fall
         14:D17E  9C 1B 23   			stz	_player_index_fall
12557                        	
12558                        		.dbg	line,	"include\init.c", 80; fall_ladder = FALSE;
12559                        		__st.umiq	0, _fall_ladder
         14:D181  9C 21 23   			stz	_fall_ladder
12560                        	
12561                        		.dbg	line,	"include\init.c", 81; player_counter_attack = 0;
12562                        		__st.umiq	0, _player_counter_attack
         14:D184  9C 1C 23   			stz	_player_counter_attack
12563                        	
12564                        		.dbg	line,	"include\init.c", 82; player_attack = FALSE;
12565                        		__st.umiq	0, _player_attack
         14:D187  9C 1E 23   			stz	_player_attack
12566                        	
12567                        		.dbg	line,	"include\init.c", 83; player_state = STATE_IDLE;
12568                        		__st.umiq	0, _player_state
         14:D18A  9C 16 23   			stz	_player_state
12569                        	
12570                        		.dbg	line,	"include\init.c", 85; chain_id = player_id - 3;
12571                        		__ld.um		_player_id
         14:D18D  AD 15 23   			lda	_player_id
         14:D190  C2         			cly
12572                        		__sub.wi	3
         14:D191  38         			sec
         14:D192  E9 03      			sbc.l	#3
         14:D194  B0 01      			bcs	!+
         14:D196  88         			dey
         14:D197             	!:
12573                        		__st.umq	_chain_id
         14:D197  8D 22 23   			sta	_chain_id
12574                        	
12575                        		.dbg	line,	"include\init.c", 86; }
12576    14:D19A             	.LL544:
12577                        		__return	0
         14:D19A  4C EF FF   			jmp	leave_proc
12578                        		.dbg	clear
12579                        		.endp
12580                        		.pceas
12581                        	
12582                        		.dbg	line,	"include\init.c", 93; void load_OBJECT_TILES()
12583                        		.dbg	line,	"include\init.c", 94; {
12584                        	;***********************
12585                        	;***********************
12586                        	
12587                        		.hucc
12588    02:D881             		.proc		_load_OBJECT_TILES
12589                        		__enter		_load_OBJECT_TILES
12590                        	
12591                        		.dbg	line,	"include\init.c", 95; sgx_load_vram(POT1_VRAM_ADR, tiles_SPR_POT , SIZEOF(tiles_SPR_POT) >> 1);
12592                        		__st.wmiq	26624, _di
         02:D881  64 F0      			stz.l	_di
         02:D883  A9 68      			lda.h	#26624
         02:D885  85 F1      			sta.h	_di
12593                        		__farptr	_tiles_SPR_POT, _bp_bank, _bp
         02:D887  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_POT))
         02:D889  85 EC      			sta.l	_bp
         02:D88B  A9 76      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_POT))
         02:D88D  85 ED      			sta.h	_bp
         02:D88F  A9 12      			lda	#bank(_tiles_SPR_POT)
         02:D891  85 02      			sta	_bp_bank
12594                        		__ld.wi		___sizeof__tiles_SPR_POT
         02:D893  A9 00      			lda.l	#___sizeof__tiles_SPR_POT
         02:D895  A0 04      			ldy.h	#___sizeof__tiles_SPR_POT
12595                        		__lsr.wi	1
         02:D897  42         			say
         02:D898  4A         			lsr	a
         02:D899  42         			say
         02:D89A  6A         			ror	a
12596                        		__st.wmq	_ax
         02:D89B  85 F8      			sta.l	_ax
         02:D89D  84 F9      			sty.h	_ax
12597                        		 _sgx_load_vram.3
         02:D89F  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D8A1  20 4F FF   			call	load_vram_x
12598                        	
12599                        		.dbg	line,	"include\init.c", 96; sgx_load_vram(POW_VRAM_ADR, tiles_SPR_POW , TILES_4);
12600                        		__st.wmiq	27136, _di
         02:D8A4  64 F0      			stz.l	_di
         02:D8A6  A9 6A      			lda.h	#27136
         02:D8A8  85 F1      			sta.h	_di
12601                        		__farptr	_tiles_SPR_POW, _bp_bank, _bp
         02:D8AA  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_POW))
         02:D8AC  85 EC      			sta.l	_bp
         02:D8AE  A9 7A      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_POW))
         02:D8B0  85 ED      			sta.h	_bp
         02:D8B2  A9 12      			lda	#bank(_tiles_SPR_POW)
         02:D8B4  85 02      			sta	_bp_bank
12602                        		__st.wmiq	64, _ax
         02:D8B6  A9 40      			lda.l	#64
         02:D8B8  85 F8      			sta.l	_ax
         02:D8BA  64 F9      			stz.h	_ax
12603                        		 _sgx_load_vram.3
         02:D8BC  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D8BE  20 4F FF   			call	load_vram_x
12604                        	
12605                        		.dbg	line,	"include\init.c", 97; sgx_load_vram(GRAY_KEY_VRAM_ADR, tiles_SPR_GRAY_KEY , TILES_4);
12606                        		__st.wmiq	27200, _di
         02:D8C1  A9 40      			lda.l	#27200
         02:D8C3  85 F0      			sta.l	_di
         02:D8C5  A9 6A      			lda.h	#27200
         02:D8C7  85 F1      			sta.h	_di
12607                        		__farptr	_tiles_SPR_GRAY_KEY, _bp_bank, _bp
         02:D8C9  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_GRAY_KEY))
         02:D8CB  85 EC      			sta.l	_bp
         02:D8CD  A9 73      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_GRAY_KEY))
         02:D8CF  85 ED      			sta.h	_bp
         02:D8D1  A9 12      			lda	#bank(_tiles_SPR_GRAY_KEY)
         02:D8D3  85 02      			sta	_bp_bank
12608                        		__st.wmiq	64, _ax
         02:D8D5  A9 40      			lda.l	#64
         02:D8D7  85 F8      			sta.l	_ax
         02:D8D9  64 F9      			stz.h	_ax
12609                        		 _sgx_load_vram.3
         02:D8DB  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D8DD  20 4F FF   			call	load_vram_x
12610                        	
12611                        		.dbg	line,	"include\init.c", 98; sgx_load_vram(GOLD_KEY_VRAM_ADR, tiles_SPR_GOLD_KEY , TILES_4);
12612                        		__st.wmiq	27264, _di
         02:D8E0  A9 80      			lda.l	#27264
         02:D8E2  85 F0      			sta.l	_di
         02:D8E4  A9 6A      			lda.h	#27264
         02:D8E6  85 F1      			sta.h	_di
12613                        		__farptr	_tiles_SPR_GOLD_KEY, _bp_bank, _bp
         02:D8E8  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_GOLD_KEY))
         02:D8EA  85 EC      			sta.l	_bp
         02:D8EC  A9 74      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_GOLD_KEY))
         02:D8EE  85 ED      			sta.h	_bp
         02:D8F0  A9 12      			lda	#bank(_tiles_SPR_GOLD_KEY)
         02:D8F2  85 02      			sta	_bp_bank
12614                        		__st.wmiq	64, _ax
         02:D8F4  A9 40      			lda.l	#64
         02:D8F6  85 F8      			sta.l	_ax
         02:D8F8  64 F9      			stz.h	_ax
12615                        		 _sgx_load_vram.3
         02:D8FA  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D8FC  20 4F FF   			call	load_vram_x
12616                        	
12617                        		.dbg	line,	"include\init.c", 99; sgx_load_vram(LIFE_VRAM_ADR, tiles_SPR_LIFE , TILES_4);
12618                        		__st.wmiq	27328, _di
         02:D8FF  A9 C0      			lda.l	#27328
         02:D901  85 F0      			sta.l	_di
         02:D903  A9 6A      			lda.h	#27328
         02:D905  85 F1      			sta.h	_di
12619                        		__farptr	_tiles_SPR_LIFE, _bp_bank, _bp
         02:D907  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_LIFE))
         02:D909  85 EC      			sta.l	_bp
         02:D90B  A9 75      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_LIFE))
         02:D90D  85 ED      			sta.h	_bp
         02:D90F  A9 12      			lda	#bank(_tiles_SPR_LIFE)
         02:D911  85 02      			sta	_bp_bank
12620                        		__st.wmiq	64, _ax
         02:D913  A9 40      			lda.l	#64
         02:D915  85 F8      			sta.l	_ax
         02:D917  64 F9      			stz.h	_ax
12621                        		 _sgx_load_vram.3
         02:D919  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D91B  20 4F FF   			call	load_vram_x
12622                        	
12623                        		.dbg	line,	"include\init.c", 100; sgx_load_vram(COIN_1_VRAM_ADR, tiles_SPR_COIN_1 , TILES_4);
12624                        		__st.wmiq	27392, _di
         02:D91E  64 F0      			stz.l	_di
         02:D920  A9 6B      			lda.h	#27392
         02:D922  85 F1      			sta.h	_di
12625                        		__farptr	_tiles_SPR_COIN_1, _bp_bank, _bp
         02:D924  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COIN_1))
         02:D926  85 EC      			sta.l	_bp
         02:D928  A9 6F      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COIN_1))
         02:D92A  85 ED      			sta.h	_bp
         02:D92C  A9 12      			lda	#bank(_tiles_SPR_COIN_1)
         02:D92E  85 02      			sta	_bp_bank
12626                        		__st.wmiq	64, _ax
         02:D930  A9 40      			lda.l	#64
         02:D932  85 F8      			sta.l	_ax
         02:D934  64 F9      			stz.h	_ax
12627                        		 _sgx_load_vram.3
         02:D936  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D938  20 4F FF   			call	load_vram_x
12628                        	
12629                        		.dbg	line,	"include\init.c", 101; sgx_load_vram(COIN_5_VRAM_ADR, tiles_SPR_COIN_5 , TILES_4);
12630                        		__st.wmiq	27456, _di
         02:D93B  A9 40      			lda.l	#27456
         02:D93D  85 F0      			sta.l	_di
         02:D93F  A9 6B      			lda.h	#27456
         02:D941  85 F1      			sta.h	_di
12631                        		__farptr	_tiles_SPR_COIN_5, _bp_bank, _bp
         02:D943  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COIN_5))
         02:D945  85 EC      			sta.l	_bp
         02:D947  A9 70      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COIN_5))
         02:D949  85 ED      			sta.h	_bp
         02:D94B  A9 12      			lda	#bank(_tiles_SPR_COIN_5)
         02:D94D  85 02      			sta	_bp_bank
12632                        		__st.wmiq	64, _ax
         02:D94F  A9 40      			lda.l	#64
         02:D951  85 F8      			sta.l	_ax
         02:D953  64 F9      			stz.h	_ax
12633                        		 _sgx_load_vram.3
         02:D955  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D957  20 4F FF   			call	load_vram_x
12634                        	
12635                        		.dbg	line,	"include\init.c", 102; sgx_load_vram(COIN_10_VRAM_ADR, tiles_SPR_COIN_10 , TILES_4);
12636                        		__st.wmiq	27520, _di
         02:D95A  A9 80      			lda.l	#27520
         02:D95C  85 F0      			sta.l	_di
         02:D95E  A9 6B      			lda.h	#27520
         02:D960  85 F1      			sta.h	_di
12637                        		__farptr	_tiles_SPR_COIN_10, _bp_bank, _bp
         02:D962  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COIN_10))
         02:D964  85 EC      			sta.l	_bp
         02:D966  A9 70      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COIN_10))
         02:D968  85 ED      			sta.h	_bp
         02:D96A  A9 12      			lda	#bank(_tiles_SPR_COIN_10)
         02:D96C  85 02      			sta	_bp_bank
12638                        		__st.wmiq	64, _ax
         02:D96E  A9 40      			lda.l	#64
         02:D970  85 F8      			sta.l	_ax
         02:D972  64 F9      			stz.h	_ax
12639                        		 _sgx_load_vram.3
         02:D974  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D976  20 4F FF   			call	load_vram_x
12640                        	
12641                        		.dbg	line,	"include\init.c", 103; sgx_load_vram(COIN_50_VRAM_ADR, tiles_SPR_COIN_50 , TILES_4);
12642                        		__st.wmiq	27584, _di
         02:D979  A9 C0      			lda.l	#27584
         02:D97B  85 F0      			sta.l	_di
         02:D97D  A9 6B      			lda.h	#27584
         02:D97F  85 F1      			sta.h	_di
12643                        		__farptr	_tiles_SPR_COIN_50, _bp_bank, _bp
         02:D981  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COIN_50))
         02:D983  85 EC      			sta.l	_bp
         02:D985  A9 71      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COIN_50))
         02:D987  85 ED      			sta.h	_bp
         02:D989  A9 12      			lda	#bank(_tiles_SPR_COIN_50)
         02:D98B  85 02      			sta	_bp_bank
12644                        		__st.wmiq	64, _ax
         02:D98D  A9 40      			lda.l	#64
         02:D98F  85 F8      			sta.l	_ax
         02:D991  64 F9      			stz.h	_ax
12645                        		 _sgx_load_vram.3
         02:D993  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D995  20 4F FF   			call	load_vram_x
12646                        	
12647                        		.dbg	line,	"include\init.c", 104; sgx_load_vram(COIN_100_VRAM_ADR, tiles_SPR_COIN_100 , TILES_4);
12648                        		__st.wmiq	27648, _di
         02:D998  64 F0      			stz.l	_di
         02:D99A  A9 6C      			lda.h	#27648
         02:D99C  85 F1      			sta.h	_di
12649                        		__farptr	_tiles_SPR_COIN_100, _bp_bank, _bp
         02:D99E  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COIN_100))
         02:D9A0  85 EC      			sta.l	_bp
         02:D9A2  A9 71      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COIN_100))
         02:D9A4  85 ED      			sta.h	_bp
         02:D9A6  A9 12      			lda	#bank(_tiles_SPR_COIN_100)
         02:D9A8  85 02      			sta	_bp_bank
12650                        		__st.wmiq	64, _ax
         02:D9AA  A9 40      			lda.l	#64
         02:D9AC  85 F8      			sta.l	_ax
         02:D9AE  64 F9      			stz.h	_ax
12651                        		 _sgx_load_vram.3
         02:D9B0  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D9B2  20 4F FF   			call	load_vram_x
12652                        	
12653                        		.dbg	line,	"include\init.c", 105; sgx_load_vram(COIN_500_VRAM_ADR, tiles_SPR_COIN_500 , TILES_4);
12654                        		__st.wmiq	27712, _di
         02:D9B5  A9 40      			lda.l	#27712
         02:D9B7  85 F0      			sta.l	_di
         02:D9B9  A9 6C      			lda.h	#27712
         02:D9BB  85 F1      			sta.h	_di
12655                        		__farptr	_tiles_SPR_COIN_500, _bp_bank, _bp
         02:D9BD  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COIN_500))
         02:D9BF  85 EC      			sta.l	_bp
         02:D9C1  A9 72      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COIN_500))
         02:D9C3  85 ED      			sta.h	_bp
         02:D9C5  A9 12      			lda	#bank(_tiles_SPR_COIN_500)
         02:D9C7  85 02      			sta	_bp_bank
12656                        		__st.wmiq	64, _ax
         02:D9C9  A9 40      			lda.l	#64
         02:D9CB  85 F8      			sta.l	_ax
         02:D9CD  64 F9      			stz.h	_ax
12657                        		 _sgx_load_vram.3
         02:D9CF  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D9D1  20 4F FF   			call	load_vram_x
12658                        	
12659                        		.dbg	line,	"include\init.c", 106; sgx_load_vram(COIN_1000_VRAM_ADR, tiles_SPR_COIN_1000 , TILES_4);
12660                        		__st.wmiq	27776, _di
         02:D9D4  A9 80      			lda.l	#27776
         02:D9D6  85 F0      			sta.l	_di
         02:D9D8  A9 6C      			lda.h	#27776
         02:D9DA  85 F1      			sta.h	_di
12661                        		__farptr	_tiles_SPR_COIN_1000, _bp_bank, _bp
         02:D9DC  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COIN_1000))
         02:D9DE  85 EC      			sta.l	_bp
         02:D9E0  A9 72      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COIN_1000))
         02:D9E2  85 ED      			sta.h	_bp
         02:D9E4  A9 12      			lda	#bank(_tiles_SPR_COIN_1000)
         02:D9E6  85 02      			sta	_bp_bank
12662                        		__st.wmiq	64, _ax
         02:D9E8  A9 40      			lda.l	#64
         02:D9EA  85 F8      			sta.l	_ax
         02:D9EC  64 F9      			stz.h	_ax
12663                        		 _sgx_load_vram.3
         02:D9EE  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D9F0  20 4F FF   			call	load_vram_x
12664                        	
12665                        		.dbg	line,	"include\init.c", 107; sgx_load_vram(STAR_VRAM_ADR, tiles_SPR_STAR , TILES_4);
12666                        		__st.wmiq	27840, _di
         02:D9F3  A9 C0      			lda.l	#27840
         02:D9F5  85 F0      			sta.l	_di
         02:D9F7  A9 6C      			lda.h	#27840
         02:D9F9  85 F1      			sta.h	_di
12667                        		__farptr	_tiles_SPR_STAR, _bp_bank, _bp
         02:D9FB  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_STAR))
         02:D9FD  85 EC      			sta.l	_bp
         02:D9FF  A9 7A      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_STAR))
         02:DA01  85 ED      			sta.h	_bp
         02:DA03  A9 12      			lda	#bank(_tiles_SPR_STAR)
         02:DA05  85 02      			sta	_bp_bank
12668                        		__st.wmiq	64, _ax
         02:DA07  A9 40      			lda.l	#64
         02:DA09  85 F8      			sta.l	_ax
         02:DA0B  64 F9      			stz.h	_ax
12669                        		 _sgx_load_vram.3
         02:DA0D  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:DA0F  20 4F FF   			call	load_vram_x
12670                        	
12671                        		.dbg	line,	"include\init.c", 108; sgx_load_vram(OCTOPUS_VRAM_ADR, tiles_SPR_OCTOPUS , TILES_4);
12672                        		__st.wmiq	27904, _di
         02:DA12  64 F0      			stz.l	_di
         02:DA14  A9 6D      			lda.h	#27904
         02:DA16  85 F1      			sta.h	_di
12673                        		__farptr	_tiles_SPR_OCTOPUS, _bp_bank, _bp
         02:DA18  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_OCTOPUS))
         02:DA1A  85 EC      			sta.l	_bp
         02:DA1C  A9 75      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_OCTOPUS))
         02:DA1E  85 ED      			sta.h	_bp
         02:DA20  A9 12      			lda	#bank(_tiles_SPR_OCTOPUS)
         02:DA22  85 02      			sta	_bp_bank
12674                        		__st.wmiq	64, _ax
         02:DA24  A9 40      			lda.l	#64
         02:DA26  85 F8      			sta.l	_ax
         02:DA28  64 F9      			stz.h	_ax
12675                        		 _sgx_load_vram.3
         02:DA2A  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:DA2C  20 4F FF   			call	load_vram_x
12676                        	
12677                        		.dbg	line,	"include\init.c", 109; sgx_load_vram(FRUIT_VRAM_ADR, tiles_SPR_FRUIT , TILES_4);
12678                        		__st.wmiq	27968, _di
         02:DA2F  A9 40      			lda.l	#27968
         02:DA31  85 F0      			sta.l	_di
         02:DA33  A9 6D      			lda.h	#27968
         02:DA35  85 F1      			sta.h	_di
12679                        		__farptr	_tiles_SPR_FRUIT, _bp_bank, _bp
         02:DA37  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_FRUIT))
         02:DA39  85 EC      			sta.l	_bp
         02:DA3B  A9 73      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_FRUIT))
         02:DA3D  85 ED      			sta.h	_bp
         02:DA3F  A9 12      			lda	#bank(_tiles_SPR_FRUIT)
         02:DA41  85 02      			sta	_bp_bank
12680                        		__st.wmiq	64, _ax
         02:DA43  A9 40      			lda.l	#64
         02:DA45  85 F8      			sta.l	_ax
         02:DA47  64 F9      			stz.h	_ax
12681                        		 _sgx_load_vram.3
         02:DA49  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:DA4B  20 4F FF   			call	load_vram_x
12682                        	
12683                        		.dbg	line,	"include\init.c", 110; sgx_load_vram(BARREL_VRAM_ADR, tiles_SPR_BARREL , TILES_4);
12684                        		__st.wmiq	28032, _di
         02:DA4E  A9 80      			lda.l	#28032
         02:DA50  85 F0      			sta.l	_di
         02:DA52  A9 6D      			lda.h	#28032
         02:DA54  85 F1      			sta.h	_di
12685                        		__farptr	_tiles_SPR_BARREL, _bp_bank, _bp
         02:DA56  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_BARREL))
         02:DA58  85 EC      			sta.l	_bp
         02:DA5A  A9 63      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_BARREL))
         02:DA5C  85 ED      			sta.h	_bp
         02:DA5E  A9 12      			lda	#bank(_tiles_SPR_BARREL)
         02:DA60  85 02      			sta	_bp_bank
12686                        		__st.wmiq	64, _ax
         02:DA62  A9 40      			lda.l	#64
         02:DA64  85 F8      			sta.l	_ax
         02:DA66  64 F9      			stz.h	_ax
12687                        		 _sgx_load_vram.3
         02:DA68  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:DA6A  20 4F FF   			call	load_vram_x
12688                        	
12689                        		.dbg	line,	"include\init.c", 111; sgx_load_vram(HOURGLASS_VRAM_ADR, tiles_SPR_HOURGLASS , TILES_4);
12690                        		__st.wmiq	28096, _di
         02:DA6D  A9 C0      			lda.l	#28096
         02:DA6F  85 F0      			sta.l	_di
         02:DA71  A9 6D      			lda.h	#28096
         02:DA73  85 F1      			sta.h	_di
12691                        		__farptr	_tiles_SPR_HOURGLASS, _bp_bank, _bp
         02:DA75  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_HOURGLASS))
         02:DA77  85 EC      			sta.l	_bp
         02:DA79  A9 74      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_HOURGLASS))
         02:DA7B  85 ED      			sta.h	_bp
         02:DA7D  A9 12      			lda	#bank(_tiles_SPR_HOURGLASS)
         02:DA7F  85 02      			sta	_bp_bank
12692                        		__st.wmiq	64, _ax
         02:DA81  A9 40      			lda.l	#64
         02:DA83  85 F8      			sta.l	_ax
         02:DA85  64 F9      			stz.h	_ax
12693                        		 _sgx_load_vram.3
         02:DA87  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:DA89  20 4F FF   			call	load_vram_x
12694                        	
12695                        		.dbg	line,	"include\init.c", 112; sgx_load_vram(BAMBOO_VRAM_ADR, tiles_SPR_BAMBOO , TILES_4);
12696                        		__st.wmiq	28160, _di
         02:DA8C  64 F0      			stz.l	_di
         02:DA8E  A9 6E      			lda.h	#28160
         02:DA90  85 F1      			sta.h	_di
12697                        		__farptr	_tiles_SPR_BAMBOO, _bp_bank, _bp
         02:DA92  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_BAMBOO))
         02:DA94  85 EC      			sta.l	_bp
         02:DA96  A9 7B      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_BAMBOO))
         02:DA98  85 ED      			sta.h	_bp
         02:DA9A  A9 12      			lda	#bank(_tiles_SPR_BAMBOO)
         02:DA9C  85 02      			sta	_bp_bank
12698                        		__st.wmiq	64, _ax
         02:DA9E  A9 40      			lda.l	#64
         02:DAA0  85 F8      			sta.l	_ax
         02:DAA2  64 F9      			stz.h	_ax
12699                        		 _sgx_load_vram.3
         02:DAA4  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:DAA6  20 4F FF   			call	load_vram_x
12700                        	
12701                        		.dbg	line,	"include\init.c", 113; sgx_load_vram(YASHICHI_VRAM_ADR, tiles_SPR_YASHICHI , TILES_4);
12702                        		__st.wmiq	28224, _di
         02:DAA9  A9 40      			lda.l	#28224
         02:DAAB  85 F0      			sta.l	_di
         02:DAAD  A9 6E      			lda.h	#28224
         02:DAAF  85 F1      			sta.h	_di
12703                        		__farptr	_tiles_SPR_YASHICHI, _bp_bank, _bp
         02:DAB1  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_YASHICHI))
         02:DAB3  85 EC      			sta.l	_bp
         02:DAB5  A9 7B      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_YASHICHI))
         02:DAB7  85 ED      			sta.h	_bp
         02:DAB9  A9 12      			lda	#bank(_tiles_SPR_YASHICHI)
         02:DABB  85 02      			sta	_bp_bank
12704                        		__st.wmiq	64, _ax
         02:DABD  A9 40      			lda.l	#64
         02:DABF  85 F8      			sta.l	_ax
         02:DAC1  64 F9      			stz.h	_ax
12705                        		 _sgx_load_vram.3
         02:DAC3  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:DAC5  20 4F FF   			call	load_vram_x
12706                        	
12707                        		.dbg	line,	"include\init.c", 114; sgx_load_vram(ELEPHANT_VRAM_ADR, tiles_SPR_ELEPHANT , TILES_4);
12708                        		__st.wmiq	28288, _di
         02:DAC8  A9 80      			lda.l	#28288
         02:DACA  85 F0      			sta.l	_di
         02:DACC  A9 6E      			lda.h	#28288
         02:DACE  85 F1      			sta.h	_di
12709                        		__farptr	_tiles_SPR_ELEPHANT, _bp_bank, _bp
         02:DAD0  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_ELEPHANT))
         02:DAD2  85 EC      			sta.l	_bp
         02:DAD4  A9 7C      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_ELEPHANT))
         02:DAD6  85 ED      			sta.h	_bp
         02:DAD8  A9 12      			lda	#bank(_tiles_SPR_ELEPHANT)
         02:DADA  85 02      			sta	_bp_bank
12710                        		__st.wmiq	64, _ax
         02:DADC  A9 40      			lda.l	#64
         02:DADE  85 F8      			sta.l	_ax
         02:DAE0  64 F9      			stz.h	_ax
12711                        		 _sgx_load_vram.3
         02:DAE2  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:DAE4  20 4F FF   			call	load_vram_x
12712                        	
12713                        		.dbg	line,	"include\init.c", 115; sgx_load_vram(DRAGONFLY_VRAM_ADR, tiles_SPR_DRAGONFLY , TILES_4);
12714                        		__st.wmiq	28352, _di
         02:DAE7  A9 C0      			lda.l	#28352
         02:DAE9  85 F0      			sta.l	_di
         02:DAEB  A9 6E      			lda.h	#28352
         02:DAED  85 F1      			sta.h	_di
12715                        		__farptr	_tiles_SPR_DRAGONFLY, _bp_bank, _bp
         02:DAEF  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_DRAGONFLY))
         02:DAF1  85 EC      			sta.l	_bp
         02:DAF3  A9 7C      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_DRAGONFLY))
         02:DAF5  85 ED      			sta.h	_bp
         02:DAF7  A9 12      			lda	#bank(_tiles_SPR_DRAGONFLY)
         02:DAF9  85 02      			sta	_bp_bank
12716                        		__st.wmiq	64, _ax
         02:DAFB  A9 40      			lda.l	#64
         02:DAFD  85 F8      			sta.l	_ax
         02:DAFF  64 F9      			stz.h	_ax
12717                        		 _sgx_load_vram.3
         02:DB01  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:DB03  20 4F FF   			call	load_vram_x
12718                        	
12719                        		.dbg	line,	"include\init.c", 116; sgx_load_vram(COW_VRAM_ADR, tiles_SPR_COW , TILES_4);
12720                        		__st.wmiq	28416, _di
         02:DB06  64 F0      			stz.l	_di
         02:DB08  A9 6F      			lda.h	#28416
         02:DB0A  85 F1      			sta.h	_di
12721                        		__farptr	_tiles_SPR_COW, _bp_bank, _bp
         02:DB0C  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COW))
         02:DB0E  85 EC      			sta.l	_bp
         02:DB10  A9 7D      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COW))
         02:DB12  85 ED      			sta.h	_bp
         02:DB14  A9 12      			lda	#bank(_tiles_SPR_COW)
         02:DB16  85 02      			sta	_bp_bank
12722                        		__st.wmiq	64, _ax
         02:DB18  A9 40      			lda.l	#64
         02:DB1A  85 F8      			sta.l	_ax
         02:DB1C  64 F9      			stz.h	_ax
12723                        		 _sgx_load_vram.3
         02:DB1E  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:DB20  20 4F FF   			call	load_vram_x
12724                        	
12725                        		.dbg	line,	"include\init.c", 117; sgx_load_vram(MOBICHAN_VRAM_ADR, tiles_SPR_MOBICHAN , TILES_4);
12726                        		__st.wmiq	28480, _di
         02:DB23  A9 40      			lda.l	#28480
         02:DB25  85 F0      			sta.l	_di
         02:DB27  A9 6F      			lda.h	#28480
         02:DB29  85 F1      			sta.h	_di
12727                        		__farptr	_tiles_SPR_MOBICHAN, _bp_bank, _bp
         02:DB2B  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_MOBICHAN))
         02:DB2D  85 EC      			sta.l	_bp
         02:DB2F  A9 7D      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_MOBICHAN))
         02:DB31  85 ED      			sta.h	_bp
         02:DB33  A9 12      			lda	#bank(_tiles_SPR_MOBICHAN)
         02:DB35  85 02      			sta	_bp_bank
12728                        		__st.wmiq	64, _ax
         02:DB37  A9 40      			lda.l	#64
         02:DB39  85 F8      			sta.l	_ax
         02:DB3B  64 F9      			stz.h	_ax
12729                        		 _sgx_load_vram.3
         02:DB3D  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:DB3F  20 4F FF   			call	load_vram_x
12730                        	
12731                        		.dbg	line,	"include\init.c", 118; }
12732    02:DB42             	.LL546:
12733                        		__return	0
         02:DB42  4C EF FF   			jmp	leave_proc
12734                        		.dbg	clear
12735                        		.endp
12736                        		.pceas
12737                        	
12738                        		.dbg	line,	"include\init.c", 121; void load_CHEST_TILES()
12739                        		.dbg	line,	"include\init.c", 122; {
12740                        	;***********************
12741                        	;***********************
12742                        	
12743                        		.hucc
12744    14:D2A4             		.proc		_load_CHEST_TILES
12745                        		__enter		_load_CHEST_TILES
12746                        	
12747                        		.dbg	line,	"include\init.c", 123; sgx_load_vram(CHEST_VRAM_ADR, tiles_SPR_CHEST , SIZEOF(tiles_SPR_CHEST) >> 1);
12748                        		__st.wmiq	28672, _di
         14:D2A4  64 F0      			stz.l	_di
         14:D2A6  A9 70      			lda.h	#28672
         14:D2A8  85 F1      			sta.h	_di
12749                        		__farptr	_tiles_SPR_CHEST, _bp_bank, _bp
         14:D2AA  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_CHEST))
         14:D2AC  85 EC      			sta.l	_bp
         14:D2AE  A9 63      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_CHEST))
         14:D2B0  85 ED      			sta.h	_bp
         14:D2B2  A9 12      			lda	#bank(_tiles_SPR_CHEST)
         14:D2B4  85 02      			sta	_bp_bank
12750                        		__ld.wi		___sizeof__tiles_SPR_CHEST
         14:D2B6  A9 00      			lda.l	#___sizeof__tiles_SPR_CHEST
         14:D2B8  A0 0C      			ldy.h	#___sizeof__tiles_SPR_CHEST
12751                        		__lsr.wi	1
         14:D2BA  42         			say
         14:D2BB  4A         			lsr	a
         14:D2BC  42         			say
         14:D2BD  6A         			ror	a
12752                        		__st.wmq	_ax
         14:D2BE  85 F8      			sta.l	_ax
         14:D2C0  84 F9      			sty.h	_ax
12753                        		 _sgx_load_vram.3
         14:D2C2  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         14:D2C4  20 4F FF   			call	load_vram_x
12754                        	
12755                        		.dbg	line,	"include\init.c", 124; }
12756    14:D2C7             	.LL547:
12757                        		__return	0
         14:D2C7  4C EF FF   			jmp	leave_proc
12758                        		.dbg	clear
12759                        		.endp
12760                        		.pceas
12761                        	
12762                        		.dbg	line,	"include\init.c", 127; void load_NPC_TILES()
12763                        		.dbg	line,	"include\init.c", 128; {
12764                        	;***********************
12765                        	;***********************
12766                        	
12767                        		.hucc
12768    14:D2CA             		.proc		_load_NPC_TILES
12769                        		__enter		_load_NPC_TILES
12770                        	
12771                        		.dbg	line,	"include\init.c", 129; sgx_load_vram(NPC_VRAM_ADR, tiles_SPR_NPC , SIZEOF(tiles_SPR_NPC) >> 1);
12772                        		__st.wmiq	30208, _di
         14:D2CA  64 F0      			stz.l	_di
         14:D2CC  A9 76      			lda.h	#30208
         14:D2CE  85 F1      			sta.h	_di
12773                        		__farptr	_tiles_SPR_NPC, _bp_bank, _bp
         14:D2D0  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_NPC))
         14:D2D2  85 EC      			sta.l	_bp
         14:D2D4  A9 62      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_NPC))
         14:D2D6  85 ED      			sta.h	_bp
         14:D2D8  A9 13      			lda	#bank(_tiles_SPR_NPC)
         14:D2DA  85 02      			sta	_bp_bank
12774                        		__ld.wi		___sizeof__tiles_SPR_NPC
         14:D2DC  A9 00      			lda.l	#___sizeof__tiles_SPR_NPC
         14:D2DE  A0 0C      			ldy.h	#___sizeof__tiles_SPR_NPC
12775                        		__lsr.wi	1
         14:D2E0  42         			say
         14:D2E1  4A         			lsr	a
         14:D2E2  42         			say
         14:D2E3  6A         			ror	a
12776                        		__st.wmq	_ax
         14:D2E4  85 F8      			sta.l	_ax
         14:D2E6  84 F9      			sty.h	_ax
12777                        		 _sgx_load_vram.3
         14:D2E8  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         14:D2EA  20 4F FF   			call	load_vram_x
12778                        	
12779                        		.dbg	line,	"include\init.c", 130; }
12780    14:D2ED             	.LL548:
12781                        		__return	0
         14:D2ED  4C EF FF   			jmp	leave_proc
12782                        		.dbg	clear
12783                        		.endp
12784                        		.pceas
12785                        	
12786                        		.dbg	line,	"include\init.c", 133; void init_OBJECT_LV1()
12787                        		.dbg	line,	"include\init.c", 134; {
12788                        	;***********************
12789                        	;***********************
12790                        	
12791                        		.hucc
12792    14:C6F7             		.proc		_init_OBJECT_LV1
12793                        		__enter		_init_OBJECT_LV1
12794                        	
12795                        		.dbg	line,	"include\init.c", 135; signed char i;
12796                        	
12797                        		.dbg	line,	"include\init.c", 137; for(i=0 ; i<level_object_number ; i++)
12798                        		__st.umiq	0, __init_OBJECT_LV1_end - 1  /* i */
         14:C6F7  9C 4A 26   			stz	__init_OBJECT_LV1_end - 1
12799    14:C6FA             	.LL550:
12800                        		__ld.bm		__init_OBJECT_LV1_end - 1  /* i */
         14:C6FA  AD 4A 26   			lda	__init_OBJECT_LV1_end - 1
         14:C6FD  C2         			cly
         14:C6FE  10 01      			bpl	!+
         14:C700  88         			dey
         14:C701             	!:
12801                        		__slt_w.um	_level_object_number
         14:C701  CD 2F 23   			cmp	_level_object_number		; Subtract memory from Y:A.
         14:C704  98         			tya
         14:C705  E9 00      			sbc	#0
         14:C707  50 02      			bvc	!+
         14:C709  49 80      			eor	#$80		; -ve if Y:A < memory (signed).
         14:C70B  0A         	!:		asl	a
12802                        		__btrue		.LL552
         14:C70C  B0 08      			bcs	.LL552
12803                        		__bra		.LL553
         14:C70E  4C 32 C8   			bra	.LL553
12804    14:C711             	.LL551:
12805                        		__inc.umq	__init_OBJECT_LV1_end - 1  /* i */
         14:C711  EE 4A 26   			inc	__init_OBJECT_LV1_end - 1
12806                        		__bra		.LL550
         14:C714  80 E4      			bra	.LL550
12807    14:C716             	.LL552:
12808                        	
12809                        		.dbg	line,	"include\init.c", 138; {
12810                        	
12811                        		.dbg	line,	"include\init.c", 139; // SET OBJECT PROPERTIES //
12812                        	
12813                        		.dbg	line,	"include\init.c", 140; list_object_type[i] = TABLE_OBJECT_TYPE_LV1[i];
12814                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         14:C716  AE 4A 26   			ldx	__init_OBJECT_LV1_end - 1
12815                        		__ld.uax	_TABLE_OBJECT_TYPE_LV1
         14:C719  BD 78 60   			lda	_TABLE_OBJECT_TYPE_LV1, x
         14:C71C  C2         			cly
12816                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         14:C71D  AE 4A 26   			ldx	__init_OBJECT_LV1_end - 1
12817                        		__st.uaxq	_list_object_type
         14:C720  9D 31 23   			sta	_list_object_type, x
12818                        	
12819                        		.dbg	line,	"include\init.c", 141; list_object_x_pos_ref[i] = TABLE_OBJECT_X_POS_REF_LV1[i];
12820                        		__ld2x.bmq	__init_OBJECT_LV1_end - 1  /* i */
         14:C723  AD 4A 26   			lda	__init_OBJECT_LV1_end - 1
         14:C726  0A         			asl	a
         14:C727  AA         			tax
12821                        		__ld.wax	_TABLE_OBJECT_X_POS_REF_LV1
         14:C728  BD 8F 60   			lda.l	_TABLE_OBJECT_X_POS_REF_LV1, x
         14:C72B  BC 90 60   			ldy.h	_TABLE_OBJECT_X_POS_REF_LV1, x
12822                        		__ld2x.bm	__init_OBJECT_LV1_end - 1  /* i */
         14:C72E  AA         			tax
         14:C72F  AD 4A 26   			lda	__init_OBJECT_LV1_end - 1
         14:C732  0A         			asl	a
         14:C733  22         			sax
12823                        		__st.waxq	_list_object_x_pos_ref
         14:C734  9D 41 25   			sta.l	_list_object_x_pos_ref, x
         14:C737  98         			tya
         14:C738  9D 42 25   			sta.h	_list_object_x_pos_ref, x
12824                        	
12825                        		.dbg	line,	"include\init.c", 142; list_object_y_pos_ref[i] = TABLE_OBJECT_Y_POS_REF_LV1[i];
12826                        		__ld2x.bmq	__init_OBJECT_LV1_end - 1  /* i */
         14:C73B  AD 4A 26   			lda	__init_OBJECT_LV1_end - 1
         14:C73E  0A         			asl	a
         14:C73F  AA         			tax
12827                        		__ld.wax	_TABLE_OBJECT_Y_POS_REF_LV1
         14:C740  BD BD 60   			lda.l	_TABLE_OBJECT_Y_POS_REF_LV1, x
         14:C743  BC BE 60   			ldy.h	_TABLE_OBJECT_Y_POS_REF_LV1, x
12828                        		__ld2x.bm	__init_OBJECT_LV1_end - 1  /* i */
         14:C746  AA         			tax
         14:C747  AD 4A 26   			lda	__init_OBJECT_LV1_end - 1
         14:C74A  0A         			asl	a
         14:C74B  22         			sax
12829                        		__st.waxq	_list_object_y_pos_ref
         14:C74C  9D 73 25   			sta.l	_list_object_y_pos_ref, x
         14:C74F  98         			tya
         14:C750  9D 74 25   			sta.h	_list_object_y_pos_ref, x
12830                        	
12831                        		.dbg	line,	"include\init.c", 143; list_object_x_pos[i] = -16;
12832                        		__ld2x.bmq	__init_OBJECT_LV1_end - 1  /* i */
         14:C753  AD 4A 26   			lda	__init_OBJECT_LV1_end - 1
         14:C756  0A         			asl	a
         14:C757  AA         			tax
12833                        		__st.waxiq	-16, _list_object_x_pos
         14:C758  A9 F0      			lda.l	#-16
         14:C75A  9D DD 24   			sta.l	_list_object_x_pos, x
         14:C75D  A9 FF      			lda.h	#-16
         14:C75F  9D DE 24   			sta.h	_list_object_x_pos, x
12834                        	
12835                        		.dbg	line,	"include\init.c", 144; list_object_y_pos[i] = -16;
12836                        		__ld2x.bmq	__init_OBJECT_LV1_end - 1  /* i */
         14:C762  AD 4A 26   			lda	__init_OBJECT_LV1_end - 1
         14:C765  0A         			asl	a
         14:C766  AA         			tax
12837                        		__st.waxiq	-16, _list_object_y_pos
         14:C767  A9 F0      			lda.l	#-16
         14:C769  9D 0F 25   			sta.l	_list_object_y_pos, x
         14:C76C  A9 FF      			lda.h	#-16
         14:C76E  9D 10 25   			sta.h	_list_object_y_pos, x
12838                        	
12839                        		.dbg	line,	"include\init.c", 145; 
12840                        	
12841                        		.dbg	line,	"include\init.c", 146; // IF THE PLAYERS ENTERS THE LEVEL FOR THE 1RST TIME //
12842                        	
12843                        		.dbg	line,	"include\init.c", 147; // ALL OBJECTS ARE ACTIVE //
12844                        	
12845                        		.dbg	line,	"include\init.c", 148; if(respawn == FALSE)
12846                        		__not.um	_respawn
         14:C771  AD 14 23   			lda	_respawn
         14:C774  18         			clc
         14:C775  D0 01      			bne	!+
         14:C777  38         			sec
         14:C778             	!:
12847                        		__bfalse	.LL554
         14:C778  90 06      			bcc	.LL554
12848                        	
12849                        		.dbg	line,	"include\init.c", 149; {
12850                        	
12851                        		.dbg	line,	"include\init.c", 150; list_object_state[i] = STATE_ACTIVE;
12852                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         14:C77A  AE 4A 26   			ldx	__init_OBJECT_LV1_end - 1
12853                        		__st.uaxiq	0, _list_object_state
         14:C77D  9E 4A 23   			stz	_list_object_state, x
12854                        	
12855                        		.dbg	line,	"include\init.c", 151; }
12856                        	
12857                        		.dbg	line,	"include\init.c", 154; // SET OBJECT SPRITE //
12858                        	
12859                        		.dbg	line,	"include\init.c", 155; sgx_spr_set(i + object_start_index);
12860    14:C780             	.LL554:
12861                        		__ld.bm		__init_OBJECT_LV1_end - 1  /* i */
         14:C780  AD 4A 26   			lda	__init_OBJECT_LV1_end - 1
         14:C783  C2         			cly
         14:C784  10 01      			bpl	!+
         14:C786  88         			dey
         14:C787             	!:
12862                        		__add.um	_object_start_index
         14:C787  18         			clc
         14:C788  6D 2E 23   			adc	_object_start_index
         14:C78B  90 01      			bcc	!+
         14:C78D  C8         			iny
         14:C78E             	!:
12863                        		__call		_sgx_spr_set.1
         14:C78E  20 8A E8   			call	_sgx_spr_set.1
12864                        	
12865                        		.dbg	line,	"include\init.c", 156; sgx_spr_x(list_object_x_pos[i]);
12866                        		__ld2x.bmq	__init_OBJECT_LV1_end - 1  /* i */
         14:C791  AD 4A 26   			lda	__init_OBJECT_LV1_end - 1
         14:C794  0A         			asl	a
         14:C795  AA         			tax
12867                        		__ld.wax	_list_object_x_pos
         14:C796  BD DD 24   			lda.l	_list_object_x_pos, x
         14:C799  BC DE 24   			ldy.h	_list_object_x_pos, x
12868                        		__call		_sgx_spr_x.1
         14:C79C  20 B7 E8   			call	_sgx_spr_x.1
12869                        	
12870                        		.dbg	line,	"include\init.c", 157; sgx_spr_y(list_object_y_pos[i]);
12871                        		__ld2x.bmq	__init_OBJECT_LV1_end - 1  /* i */
         14:C79F  AD 4A 26   			lda	__init_OBJECT_LV1_end - 1
         14:C7A2  0A         			asl	a
         14:C7A3  AA         			tax
12872                        		__ld.wax	_list_object_y_pos
         14:C7A4  BD 0F 25   			lda.l	_list_object_y_pos, x
         14:C7A7  BC 10 25   			ldy.h	_list_object_y_pos, x
12873                        		__call		_sgx_spr_y.1
         14:C7AA  20 C6 E8   			call	_sgx_spr_y.1
12874                        	
12875                        		.dbg	line,	"include\init.c", 158; sgx_spr_pri(TRUE);
12876                        		__ld.uiq	1
         14:C7AD  A9 01      			lda	#1
12877                        		__call		_sgx_spr_pri.1
         14:C7AF  20 09 E9   			call	_sgx_spr_pri.1
12878                        	
12879                        		.dbg	line,	"include\init.c", 161; if(list_object_type[i] == TYPE_HOURGLASS)
12880                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         14:C7B2  AE 4A 26   			ldx	__init_OBJECT_LV1_end - 1
12881                        		__not.uax	_list_object_type
         14:C7B5  BD 31 23   			lda	_list_object_type, x
         14:C7B8  18         			clc
         14:C7B9  D0 01      			bne	!+
         14:C7BB  38         			sec
         14:C7BC             	!:
12882                        		__bfalse	.LL555
         14:C7BC  90 1D      			bcc	.LL555
12883                        	
12884                        		.dbg	line,	"include\init.c", 162; {
12885                        	
12886                        		.dbg	line,	"include\init.c", 163; list_object_energy[i] = 0;
12887                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         14:C7BE  AE 4A 26   			ldx	__init_OBJECT_LV1_end - 1
12888                        		__st.uaxiq	0, _list_object_energy
         14:C7C1  9E 63 23   			stz	_list_object_energy, x
12889                        	
12890                        		.dbg	line,	"include\init.c", 164; sgx_spr_pal(18);
12891                        		__ld.uiq	18
         14:C7C4  A9 12      			lda	#18
12892                        		__call		_sgx_spr_pal.1
         14:C7C6  20 FA E8   			call	_sgx_spr_pal.1
12893                        	
12894                        		.dbg	line,	"include\init.c", 165; sgx_spr_pattern(HOURGLASS_VRAM_ADR);
12895                        		__ld.wi		28096
         14:C7C9  A9 C0      			lda.l	#28096
         14:C7CB  A0 6D      			ldy.h	#28096
12896                        		__call		_sgx_spr_pattern.1
         14:C7CD  20 D3 E8   			call	_sgx_spr_pattern.1
12897                        	
12898                        		.dbg	line,	"include\init.c", 166; sgx_spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_16x16);
12899                        		__st.umiq	185, _al
         14:C7D0  A9 B9      			lda.l	#185
         14:C7D2  85 F8      			sta	_al
12900                        		__ld.uiq	0
         14:C7D4  62         			cla
12901                        		__call		_sgx_spr_ctrl.2
         14:C7D5  20 E9 E8   			call	_sgx_spr_ctrl.2
12902                        	
12903                        		.dbg	line,	"include\init.c", 167; }
12904                        	
12905                        		.dbg	line,	"include\init.c", 169; else if(list_object_type[i] == TYPE_POT)
12906                        		__bra		.LL556
         14:C7D8  4C 11 C7   			bra	.LL556
12907    14:C7DB             	.LL555:
12908                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         14:C7DB  AE 4A 26   			ldx	__init_OBJECT_LV1_end - 1
12909                        		__ld.uaxq	_list_object_type
         14:C7DE  BD 31 23   			lda	_list_object_type, x
12910                        		__equ_b.uiq	1
         14:C7E1  C9 01      			cmp	#1
         14:C7E3  F0 01      			beq	!+
         14:C7E5  18         			clc
         14:C7E6             	!:
12911                        		__bfalse	.LL557
         14:C7E6  90 1E      			bcc	.LL557
12912                        	
12913                        		.dbg	line,	"include\init.c", 170; {
12914                        	
12915                        		.dbg	line,	"include\init.c", 171; list_object_energy[i] = 2;
12916                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         14:C7E8  AE 4A 26   			ldx	__init_OBJECT_LV1_end - 1
12917                        		__st.uaxiq	2, _list_object_energy
         14:C7EB  A9 02      			lda.l	#2
         14:C7ED  9D 63 23   			sta	_list_object_energy, x
12918                        	
12919                        		.dbg	line,	"include\init.c", 172; sgx_spr_pal(17);
12920                        		__ld.uiq	17
         14:C7F0  A9 11      			lda	#17
12921                        		__call		_sgx_spr_pal.1
         14:C7F2  20 FA E8   			call	_sgx_spr_pal.1
12922                        	
12923                        		.dbg	line,	"include\init.c", 173; sgx_spr_pattern(POT1_VRAM_ADR);
12924                        		__ld.wi		26624
         14:C7F5  62         			cla
         14:C7F6  A0 68      			ldy.h	#26624
12925                        		__call		_sgx_spr_pattern.1
         14:C7F8  20 D3 E8   			call	_sgx_spr_pattern.1
12926                        	
12927                        		.dbg	line,	"include\init.c", 174; sgx_spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_16x16);
12928                        		__st.umiq	185, _al
         14:C7FB  A9 B9      			lda.l	#185
         14:C7FD  85 F8      			sta	_al
12929                        		__ld.uiq	0
         14:C7FF  62         			cla
12930                        		__call		_sgx_spr_ctrl.2
         14:C800  20 E9 E8   			call	_sgx_spr_ctrl.2
12931                        	
12932                        		.dbg	line,	"include\init.c", 175; }
12933                        	
12934                        		.dbg	line,	"include\init.c", 177; else if(list_object_type[i] == TYPE_POW)
12935                        		__bra		.LL558
         14:C803  4C 11 C7   			bra	.LL558
12936    14:C806             	.LL557:
12937                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         14:C806  AE 4A 26   			ldx	__init_OBJECT_LV1_end - 1
12938                        		__ld.uaxq	_list_object_type
         14:C809  BD 31 23   			lda	_list_object_type, x
12939                        		__equ_b.uiq	2
         14:C80C  C9 02      			cmp	#2
         14:C80E  F0 01      			beq	!+
         14:C810  18         			clc
         14:C811             	!:
12940                        		__bfalse	.LL559
         14:C811  B0 03 4C 11			bcc	.LL559
         14:C815  C7          
12941                        	
12942                        		.dbg	line,	"include\init.c", 178; {
12943                        	
12944                        		.dbg	line,	"include\init.c", 179; list_object_energy[i] = 0;
12945                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         14:C816  AE 4A 26   			ldx	__init_OBJECT_LV1_end - 1
12946                        		__st.uaxiq	0, _list_object_energy
         14:C819  9E 63 23   			stz	_list_object_energy, x
12947                        	
12948                        		.dbg	line,	"include\init.c", 180; sgx_spr_pal(18);
12949                        		__ld.uiq	18
         14:C81C  A9 12      			lda	#18
12950                        		__call		_sgx_spr_pal.1
         14:C81E  20 FA E8   			call	_sgx_spr_pal.1
12951                        	
12952                        		.dbg	line,	"include\init.c", 181; sgx_spr_pattern(POW_VRAM_ADR);
12953                        		__ld.wi		27136
         14:C821  62         			cla
         14:C822  A0 6A      			ldy.h	#27136
12954                        		__call		_sgx_spr_pattern.1
         14:C824  20 D3 E8   			call	_sgx_spr_pattern.1
12955                        	
12956                        		.dbg	line,	"include\init.c", 182; sgx_spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_16x16);
12957                        		__st.umiq	185, _al
         14:C827  A9 B9      			lda.l	#185
         14:C829  85 F8      			sta	_al
12958                        		__ld.uiq	0
         14:C82B  62         			cla
12959                        		__call		_sgx_spr_ctrl.2
         14:C82C  20 E9 E8   			call	_sgx_spr_ctrl.2
12960                        	
12961                        		.dbg	line,	"include\init.c", 183; }
12962                        	
12963                        		.dbg	line,	"include\init.c", 184; }
12964    14:C82F             	.LL559	.alias		.LL551
12965    14:C82F             	.LL558	.alias		.LL551
12966    14:C82F             	.LL556	.alias		.LL551
12967                        		__bra		.LL551
         14:C82F  4C 11 C7   			bra	.LL551
12968    14:C832             	.LL553:
12969                        	
12970                        		.dbg	line,	"include\init.c", 185; }
12971    14:C832             	.LL549:
12972                        		__return	0
         14:C832  4C EF FF   			jmp	leave_proc
12973                        		.dbg	clear
12974                        		.endp
12975                        		.pceas
12976                        	
12977                        		.dbg	line,	"include\init.c", 188; void init_CHEST_LV1()
12978                        		.dbg	line,	"include\init.c", 189; {
12979                        	;***********************
12980                        	;***********************
12981                        	
12982                        		.hucc
12983    14:CAF0             		.proc		_init_CHEST_LV1
12984                        		__enter		_init_CHEST_LV1
12985                        	
12986                        		.dbg	line,	"include\init.c", 190; signed char i;
12987                        	
12988                        		.dbg	line,	"include\init.c", 192; for(i=0 ; i<level_chest_number ; i++)
12989                        		__st.umiq	0, __init_CHEST_LV1_end - 1  /* i */
         14:CAF0  9C 4A 26   			stz	__init_CHEST_LV1_end - 1
12990    14:CAF3             	.LL561:
12991                        		__ld.bm		__init_CHEST_LV1_end - 1  /* i */
         14:CAF3  AD 4A 26   			lda	__init_CHEST_LV1_end - 1
         14:CAF6  C2         			cly
         14:CAF7  10 01      			bpl	!+
         14:CAF9  88         			dey
         14:CAFA             	!:
12992                        		__slt_w.um	_level_chest_number
         14:CAFA  CD 9E 23   			cmp	_level_chest_number		; Subtract memory from Y:A.
         14:CAFD  98         			tya
         14:CAFE  E9 00      			sbc	#0
         14:CB00  50 02      			bvc	!+
         14:CB02  49 80      			eor	#$80		; -ve if Y:A < memory (signed).
         14:CB04  0A         	!:		asl	a
12993                        		__btrue		.LL563
         14:CB05  B0 08      			bcs	.LL563
12994                        		__bra		.LL564
         14:CB07  4C B5 CB   			bra	.LL564
12995    14:CB0A             	.LL562:
12996                        		__inc.umq	__init_CHEST_LV1_end - 1  /* i */
         14:CB0A  EE 4A 26   			inc	__init_CHEST_LV1_end - 1
12997                        		__bra		.LL561
         14:CB0D  80 E4      			bra	.LL561
12998    14:CB0F             	.LL563:
12999                        	
13000                        		.dbg	line,	"include\init.c", 193; {
13001                        	
13002                        		.dbg	line,	"include\init.c", 194; // SET CHEST PROPERTIES //
13003                        	
13004                        		.dbg	line,	"include\init.c", 195; list_chest_x_pos_ref[i] = TABLE_CHEST_X_POS_REF_LV1[i];
13005                        		__ld2x.bmq	__init_CHEST_LV1_end - 1  /* i */
         14:CB0F  AD 4A 26   			lda	__init_CHEST_LV1_end - 1
         14:CB12  0A         			asl	a
         14:CB13  AA         			tax
13006                        		__ld.wax	_TABLE_CHEST_X_POS_REF_LV1
         14:CB14  BD EB 60   			lda.l	_TABLE_CHEST_X_POS_REF_LV1, x
         14:CB17  BC EC 60   			ldy.h	_TABLE_CHEST_X_POS_REF_LV1, x
13007                        		__ld2x.bm	__init_CHEST_LV1_end - 1  /* i */
         14:CB1A  AA         			tax
         14:CB1B  AD 4A 26   			lda	__init_CHEST_LV1_end - 1
         14:CB1E  0A         			asl	a
         14:CB1F  22         			sax
13008                        		__st.waxq	_list_chest_x_pos_ref
         14:CB20  9D C5 25   			sta.l	_list_chest_x_pos_ref, x
         14:CB23  98         			tya
         14:CB24  9D C6 25   			sta.h	_list_chest_x_pos_ref, x
13009                        	
13010                        		.dbg	line,	"include\init.c", 196; list_chest_y_pos_ref[i] = TABLE_CHEST_Y_POS_REF_LV1[i];
13011                        		__ld2x.bmq	__init_CHEST_LV1_end - 1  /* i */
         14:CB27  AD 4A 26   			lda	__init_CHEST_LV1_end - 1
         14:CB2A  0A         			asl	a
         14:CB2B  AA         			tax
13012                        		__ld.wax	_TABLE_CHEST_Y_POS_REF_LV1
         14:CB2C  BD EF 60   			lda.l	_TABLE_CHEST_Y_POS_REF_LV1, x
         14:CB2F  BC F0 60   			ldy.h	_TABLE_CHEST_Y_POS_REF_LV1, x
13013                        		__ld2x.bm	__init_CHEST_LV1_end - 1  /* i */
         14:CB32  AA         			tax
         14:CB33  AD 4A 26   			lda	__init_CHEST_LV1_end - 1
         14:CB36  0A         			asl	a
         14:CB37  22         			sax
13014                        		__st.waxq	_list_chest_y_pos_ref
         14:CB38  9D D5 25   			sta.l	_list_chest_y_pos_ref, x
         14:CB3B  98         			tya
         14:CB3C  9D D6 25   			sta.h	_list_chest_y_pos_ref, x
13015                        	
13016                        		.dbg	line,	"include\init.c", 197; list_chest_x_pos[i] = -32;
13017                        		__ld2x.bmq	__init_CHEST_LV1_end - 1  /* i */
         14:CB3F  AD 4A 26   			lda	__init_CHEST_LV1_end - 1
         14:CB42  0A         			asl	a
         14:CB43  AA         			tax
13018                        		__st.waxiq	-32, _list_chest_x_pos
         14:CB44  A9 E0      			lda.l	#-32
         14:CB46  9D A5 25   			sta.l	_list_chest_x_pos, x
         14:CB49  A9 FF      			lda.h	#-32
         14:CB4B  9D A6 25   			sta.h	_list_chest_x_pos, x
13019                        	
13020                        		.dbg	line,	"include\init.c", 198; list_chest_y_pos[i] = -32;
13021                        		__ld2x.bmq	__init_CHEST_LV1_end - 1  /* i */
         14:CB4E  AD 4A 26   			lda	__init_CHEST_LV1_end - 1
         14:CB51  0A         			asl	a
         14:CB52  AA         			tax
13022                        		__st.waxiq	-32, _list_chest_y_pos
         14:CB53  A9 E0      			lda.l	#-32
         14:CB55  9D B5 25   			sta.l	_list_chest_y_pos, x
         14:CB58  A9 FF      			lda.h	#-32
         14:CB5A  9D B6 25   			sta.h	_list_chest_y_pos, x
13023                        	
13024                        		.dbg	line,	"include\init.c", 200; if(respawn == FALSE)
13025                        		__not.um	_respawn
         14:CB5D  AD 14 23   			lda	_respawn
         14:CB60  18         			clc
         14:CB61  D0 01      			bne	!+
         14:CB63  38         			sec
         14:CB64             	!:
13026                        		__bfalse	.LL565
         14:CB64  90 06      			bcc	.LL565
13027                        	
13028                        		.dbg	line,	"include\init.c", 201; {
13029                        	
13030                        		.dbg	line,	"include\init.c", 202; list_chest_state[i] = STATE_ACTIVE;
13031                        		__ldx.bmq	__init_CHEST_LV1_end - 1  /* i */
         14:CB66  AE 4A 26   			ldx	__init_CHEST_LV1_end - 1
13032                        		__st.uaxiq	0, _list_chest_state
         14:CB69  9E A0 23   			stz	_list_chest_state, x
13033                        	
13034                        		.dbg	line,	"include\init.c", 203; }
13035                        	
13036                        		.dbg	line,	"include\init.c", 206; // SET CHEST SPRITE //
13037                        	
13038                        		.dbg	line,	"include\init.c", 207; sgx_spr_set(i + chest_start_index);
13039    14:CB6C             	.LL565:
13040                        		__ld.bm		__init_CHEST_LV1_end - 1  /* i */
         14:CB6C  AD 4A 26   			lda	__init_CHEST_LV1_end - 1
         14:CB6F  C2         			cly
         14:CB70  10 01      			bpl	!+
         14:CB72  88         			dey
         14:CB73             	!:
13041                        		__add.um	_chest_start_index
         14:CB73  18         			clc
         14:CB74  6D 9D 23   			adc	_chest_start_index
         14:CB77  90 01      			bcc	!+
         14:CB79  C8         			iny
         14:CB7A             	!:
13042                        		__call		_sgx_spr_set.1
         14:CB7A  20 8A E8   			call	_sgx_spr_set.1
13043                        	
13044                        		.dbg	line,	"include\init.c", 208; sgx_spr_x(list_chest_x_pos[i]);
13045                        		__ld2x.bmq	__init_CHEST_LV1_end - 1  /* i */
         14:CB7D  AD 4A 26   			lda	__init_CHEST_LV1_end - 1
         14:CB80  0A         			asl	a
         14:CB81  AA         			tax
13046                        		__ld.wax	_list_chest_x_pos
         14:CB82  BD A5 25   			lda.l	_list_chest_x_pos, x
         14:CB85  BC A6 25   			ldy.h	_list_chest_x_pos, x
13047                        		__call		_sgx_spr_x.1
         14:CB88  20 B7 E8   			call	_sgx_spr_x.1
13048                        	
13049                        		.dbg	line,	"include\init.c", 209; sgx_spr_y(list_chest_y_pos[i]);
13050                        		__ld2x.bmq	__init_CHEST_LV1_end - 1  /* i */
         14:CB8B  AD 4A 26   			lda	__init_CHEST_LV1_end - 1
         14:CB8E  0A         			asl	a
         14:CB8F  AA         			tax
13051                        		__ld.wax	_list_chest_y_pos
         14:CB90  BD B5 25   			lda.l	_list_chest_y_pos, x
         14:CB93  BC B6 25   			ldy.h	_list_chest_y_pos, x
13052                        		__call		_sgx_spr_y.1
         14:CB96  20 C6 E8   			call	_sgx_spr_y.1
13053                        	
13054                        		.dbg	line,	"include\init.c", 210; sgx_spr_pri(TRUE);
13055                        		__ld.uiq	1
         14:CB99  A9 01      			lda	#1
13056                        		__call		_sgx_spr_pri.1
         14:CB9B  20 09 E9   			call	_sgx_spr_pri.1
13057                        	
13058                        		.dbg	line,	"include\init.c", 213; sgx_spr_pal(18);
13059                        		__ld.uiq	18
         14:CB9E  A9 12      			lda	#18
13060                        		__call		_sgx_spr_pal.1
         14:CBA0  20 FA E8   			call	_sgx_spr_pal.1
13061                        	
13062                        		.dbg	line,	"include\init.c", 214; sgx_spr_pattern(CHEST_VRAM_ADR);
13063                        		__ld.wi		28672
         14:CBA3  62         			cla
         14:CBA4  A0 70      			ldy.h	#28672
13064                        		__call		_sgx_spr_pattern.1
         14:CBA6  20 D3 E8   			call	_sgx_spr_pattern.1
13065                        	
13066                        		.dbg	line,	"include\init.c", 215; sgx_spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_32x32);
13067                        		__st.umiq	185, _al
         14:CBA9  A9 B9      			lda.l	#185
         14:CBAB  85 F8      			sta	_al
13068                        		__ld.uiq	17
         14:CBAD  A9 11      			lda	#17
13069                        		__call		_sgx_spr_ctrl.2
         14:CBAF  20 E9 E8   			call	_sgx_spr_ctrl.2
13070                        	
13071                        		.dbg	line,	"include\init.c", 216; }
13072                        		__bra		.LL562
         14:CBB2  4C 0A CB   			bra	.LL562
13073    14:CBB5             	.LL564:
13074                        	
13075                        		.dbg	line,	"include\init.c", 217; }
13076    14:CBB5             	.LL560:
13077                        		__return	0
         14:CBB5  4C EF FF   			jmp	leave_proc
13078                        		.dbg	clear
13079                        		.endp
13080                        		.pceas
13081                        	
13082                        		.dbg	line,	"include\init.c", 220; void init_NPC_LV1()
13083                        		.dbg	line,	"include\init.c", 221; {
13084                        	;***********************
13085                        	;***********************
13086                        	
13087                        		.hucc
13088    14:CA1B             		.proc		_init_NPC_LV1
13089                        		__enter		_init_NPC_LV1
13090                        	
13091                        		.dbg	line,	"include\init.c", 222; signed char i;
13092                        	
13093                        		.dbg	line,	"include\init.c", 224; for(i=0 ; i<level_npc_number ; i++)
13094                        		__st.umiq	0, __init_NPC_LV1_end - 1  /* i */
         14:CA1B  9C 4A 26   			stz	__init_NPC_LV1_end - 1
13095    14:CA1E             	.LL567:
13096                        		__ld.bm		__init_NPC_LV1_end - 1  /* i */
         14:CA1E  AD 4A 26   			lda	__init_NPC_LV1_end - 1
         14:CA21  C2         			cly
         14:CA22  10 01      			bpl	!+
         14:CA24  88         			dey
         14:CA25             	!:
13097                        		__slt_w.um	_level_npc_number
         14:CA25  CD B1 23   			cmp	_level_npc_number		; Subtract memory from Y:A.
         14:CA28  98         			tya
         14:CA29  E9 00      			sbc	#0
         14:CA2B  50 02      			bvc	!+
         14:CA2D  49 80      			eor	#$80		; -ve if Y:A < memory (signed).
         14:CA2F  0A         	!:		asl	a
13098                        		__btrue		.LL569
         14:CA30  B0 08      			bcs	.LL569
13099                        		__bra		.LL570
         14:CA32  4C ED CA   			bra	.LL570
13100    14:CA35             	.LL568:
13101                        		__inc.umq	__init_NPC_LV1_end - 1  /* i */
         14:CA35  EE 4A 26   			inc	__init_NPC_LV1_end - 1
13102                        		__bra		.LL567
         14:CA38  80 E4      			bra	.LL567
13103    14:CA3A             	.LL569:
13104                        	
13105                        		.dbg	line,	"include\init.c", 225; {
13106                        	
13107                        		.dbg	line,	"include\init.c", 226; // SET NPC PROPERTIES //
13108                        	
13109                        		.dbg	line,	"include\init.c", 227; list_npc_type[i] = TABLE_NPC_TYPE_LV1[i];
13110                        		__ldx.bmq	__init_NPC_LV1_end - 1  /* i */
         14:CA3A  AE 4A 26   			ldx	__init_NPC_LV1_end - 1
13111                        		__ld.uax	_TABLE_NPC_TYPE_LV1
         14:CA3D  BD 6E 60   			lda	_TABLE_NPC_TYPE_LV1, x
         14:CA40  C2         			cly
13112                        		__ldx.bmq	__init_NPC_LV1_end - 1  /* i */
         14:CA41  AE 4A 26   			ldx	__init_NPC_LV1_end - 1
13113                        		__st.uaxq	_list_npc_type
         14:CA44  9D B3 23   			sta	_list_npc_type, x
13114                        	
13115                        		.dbg	line,	"include\init.c", 228; list_npc_x_pos_ref[i] = TABLE_NPC_X_POS_REF_LV1[i];
13116                        		__ld2x.bmq	__init_NPC_LV1_end - 1  /* i */
         14:CA47  AD 4A 26   			lda	__init_NPC_LV1_end - 1
         14:CA4A  0A         			asl	a
         14:CA4B  AA         			tax
13117                        		__ld.wax	_TABLE_NPC_X_POS_REF_LV1
         14:CA4C  BD 70 60   			lda.l	_TABLE_NPC_X_POS_REF_LV1, x
         14:CA4F  BC 71 60   			ldy.h	_TABLE_NPC_X_POS_REF_LV1, x
13118                        		__ld2x.bm	__init_NPC_LV1_end - 1  /* i */
         14:CA52  AA         			tax
         14:CA53  AD 4A 26   			lda	__init_NPC_LV1_end - 1
         14:CA56  0A         			asl	a
         14:CA57  22         			sax
13119                        		__st.waxq	_list_npc_x_pos_ref
         14:CA58  9D 09 26   			sta.l	_list_npc_x_pos_ref, x
         14:CA5B  98         			tya
         14:CA5C  9D 0A 26   			sta.h	_list_npc_x_pos_ref, x
13120                        	
13121                        		.dbg	line,	"include\init.c", 229; list_npc_y_pos_ref[i] = TABLE_NPC_Y_POS_REF_LV1[i];
13122                        		__ld2x.bmq	__init_NPC_LV1_end - 1  /* i */
         14:CA5F  AD 4A 26   			lda	__init_NPC_LV1_end - 1
         14:CA62  0A         			asl	a
         14:CA63  AA         			tax
13123                        		__ld.wax	_TABLE_NPC_Y_POS_REF_LV1
         14:CA64  BD 74 60   			lda.l	_TABLE_NPC_Y_POS_REF_LV1, x
         14:CA67  BC 75 60   			ldy.h	_TABLE_NPC_Y_POS_REF_LV1, x
13124                        		__ld2x.bm	__init_NPC_LV1_end - 1  /* i */
         14:CA6A  AA         			tax
         14:CA6B  AD 4A 26   			lda	__init_NPC_LV1_end - 1
         14:CA6E  0A         			asl	a
         14:CA6F  22         			sax
13125                        		__st.waxq	_list_npc_y_pos_ref
         14:CA70  9D 1B 26   			sta.l	_list_npc_y_pos_ref, x
         14:CA73  98         			tya
         14:CA74  9D 1C 26   			sta.h	_list_npc_y_pos_ref, x
13126                        	
13127                        		.dbg	line,	"include\init.c", 230; list_npc_x_pos[i] = -32;
13128                        		__ld2x.bmq	__init_NPC_LV1_end - 1  /* i */
         14:CA77  AD 4A 26   			lda	__init_NPC_LV1_end - 1
         14:CA7A  0A         			asl	a
         14:CA7B  AA         			tax
13129                        		__st.waxiq	-32, _list_npc_x_pos
         14:CA7C  A9 E0      			lda.l	#-32
         14:CA7E  9D E5 25   			sta.l	_list_npc_x_pos, x
         14:CA81  A9 FF      			lda.h	#-32
         14:CA83  9D E6 25   			sta.h	_list_npc_x_pos, x
13130                        	
13131                        		.dbg	line,	"include\init.c", 231; list_npc_y_pos[i] = -32;
13132                        		__ld2x.bmq	__init_NPC_LV1_end - 1  /* i */
         14:CA86  AD 4A 26   			lda	__init_NPC_LV1_end - 1
         14:CA89  0A         			asl	a
         14:CA8A  AA         			tax
13133                        		__st.waxiq	-32, _list_npc_y_pos
         14:CA8B  A9 E0      			lda.l	#-32
         14:CA8D  9D F7 25   			sta.l	_list_npc_y_pos, x
         14:CA90  A9 FF      			lda.h	#-32
         14:CA92  9D F8 25   			sta.h	_list_npc_y_pos, x
13134                        	
13135                        		.dbg	line,	"include\init.c", 233; if(respawn == FALSE)
13136                        		__not.um	_respawn
         14:CA95  AD 14 23   			lda	_respawn
         14:CA98  18         			clc
         14:CA99  D0 01      			bne	!+
         14:CA9B  38         			sec
         14:CA9C             	!:
13137                        		__bfalse	.LL571
         14:CA9C  90 06      			bcc	.LL571
13138                        	
13139                        		.dbg	line,	"include\init.c", 234; {
13140                        	
13141                        		.dbg	line,	"include\init.c", 235; list_npc_state[i] = STATE_ACTIVE;
13142                        		__ldx.bmq	__init_NPC_LV1_end - 1  /* i */
         14:CA9E  AE 4A 26   			ldx	__init_NPC_LV1_end - 1
13143                        		__st.uaxiq	0, _list_npc_state
         14:CAA1  9E BC 23   			stz	_list_npc_state, x
13144                        	
13145                        		.dbg	line,	"include\init.c", 236; }
13146                        	
13147                        		.dbg	line,	"include\init.c", 239; // SET NPC SPRITE //
13148                        	
13149                        		.dbg	line,	"include\init.c", 240; sgx_spr_set(i + npc_start_index);
13150    14:CAA4             	.LL571:
13151                        		__ld.bm		__init_NPC_LV1_end - 1  /* i */
         14:CAA4  AD 4A 26   			lda	__init_NPC_LV1_end - 1
         14:CAA7  C2         			cly
         14:CAA8  10 01      			bpl	!+
         14:CAAA  88         			dey
         14:CAAB             	!:
13152                        		__add.um	_npc_start_index
         14:CAAB  18         			clc
         14:CAAC  6D B0 23   			adc	_npc_start_index
         14:CAAF  90 01      			bcc	!+
         14:CAB1  C8         			iny
         14:CAB2             	!:
13153                        		__call		_sgx_spr_set.1
         14:CAB2  20 8A E8   			call	_sgx_spr_set.1
13154                        	
13155                        		.dbg	line,	"include\init.c", 241; sgx_spr_x(list_npc_x_pos[i]);
13156                        		__ld2x.bmq	__init_NPC_LV1_end - 1  /* i */
         14:CAB5  AD 4A 26   			lda	__init_NPC_LV1_end - 1
         14:CAB8  0A         			asl	a
         14:CAB9  AA         			tax
13157                        		__ld.wax	_list_npc_x_pos
         14:CABA  BD E5 25   			lda.l	_list_npc_x_pos, x
         14:CABD  BC E6 25   			ldy.h	_list_npc_x_pos, x
13158                        		__call		_sgx_spr_x.1
         14:CAC0  20 B7 E8   			call	_sgx_spr_x.1
13159                        	
13160                        		.dbg	line,	"include\init.c", 242; sgx_spr_y(list_npc_y_pos[i]);
13161                        		__ld2x.bmq	__init_NPC_LV1_end - 1  /* i */
         14:CAC3  AD 4A 26   			lda	__init_NPC_LV1_end - 1
         14:CAC6  0A         			asl	a
         14:CAC7  AA         			tax
13162                        		__ld.wax	_list_npc_y_pos
         14:CAC8  BD F7 25   			lda.l	_list_npc_y_pos, x
         14:CACB  BC F8 25   			ldy.h	_list_npc_y_pos, x
13163                        		__call		_sgx_spr_y.1
         14:CACE  20 C6 E8   			call	_sgx_spr_y.1
13164                        	
13165                        		.dbg	line,	"include\init.c", 243; sgx_spr_pri(TRUE);
13166                        		__ld.uiq	1
         14:CAD1  A9 01      			lda	#1
13167                        		__call		_sgx_spr_pri.1
         14:CAD3  20 09 E9   			call	_sgx_spr_pri.1
13168                        	
13169                        		.dbg	line,	"include\init.c", 246; sgx_spr_pal(17);
13170                        		__ld.uiq	17
         14:CAD6  A9 11      			lda	#17
13171                        		__call		_sgx_spr_pal.1
         14:CAD8  20 FA E8   			call	_sgx_spr_pal.1
13172                        	
13173                        		.dbg	line,	"include\init.c", 247; sgx_spr_pattern(NPC_VRAM_ADR);
13174                        		__ld.wi		30208
         14:CADB  62         			cla
         14:CADC  A0 76      			ldy.h	#30208
13175                        		__call		_sgx_spr_pattern.1
         14:CADE  20 D3 E8   			call	_sgx_spr_pattern.1
13176                        	
13177                        		.dbg	line,	"include\init.c", 248; sgx_spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_32x32);
13178                        		__st.umiq	185, _al
         14:CAE1  A9 B9      			lda.l	#185
         14:CAE3  85 F8      			sta	_al
13179                        		__ld.uiq	17
         14:CAE5  A9 11      			lda	#17
13180                        		__call		_sgx_spr_ctrl.2
         14:CAE7  20 E9 E8   			call	_sgx_spr_ctrl.2
13181                        	
13182                        		.dbg	line,	"include\init.c", 249; }
13183                        		__bra		.LL568
         14:CAEA  4C 35 CA   			bra	.LL568
13184    14:CAED             	.LL570:
13185                        	
13186                        		.dbg	line,	"include\init.c", 250; }
13187    14:CAED             	.LL566:
13188                        		__return	0
         14:CAED  4C EF FF   			jmp	leave_proc
13189                        		.dbg	clear
13190                        		.endp
13191                        		.pceas
13192                        	
13193                        		.dbg	line,	"include\init.c", 257; void init_HUD()
13194                        		.dbg	line,	"include\init.c", 258; {
13195                        	;***********************
13196                        	;***********************
13197                        	
13198                        		.hucc
13199    02:D591             		.proc		_init_HUD
13200                        		__enter		_init_HUD
13201                        	
13202                        		.dbg	line,	"include\init.c", 259; //**************************************************************************************//
13203                        	
13204                        		.dbg	line,	"include\init.c", 260; //                                                                                      //
13205                        	
13206                        		.dbg	line,	"include\init.c", 261; //                                        VDC 1                                         //
13207                        	
13208                        		.dbg	line,	"include\init.c", 262; //                                                                                      //
13209                        	
13210                        		.dbg	line,	"include\init.c", 263; //**************************************************************************************//
13211                        	
13212                        		.dbg	line,	"include\init.c", 265; //--------------------------------------------------------------------------------------//
13213                        	
13214                        		.dbg	line,	"include\init.c", 266; //                                      LOAD FONT                                       //
13215                        	
13216                        		.dbg	line,	"include\init.c", 267; //--------------------------------------------------------------------------------------//
13217                        	
13218                        		.dbg	line,	"include\init.c", 269; load_vram( 0x0800, tileset_FONT, SIZEOF(tileset_FONT) >> 1 );
13219                        		__st.wmiq	2048, _di
         02:D591  64 F0      			stz.l	_di
         02:D593  A9 08      			lda.h	#2048
         02:D595  85 F1      			sta.h	_di
13220                        		__farptr	_tileset_FONT, _bp_bank, _bp
         02:D597  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_FONT))
         02:D599  85 EC      			sta.l	_bp
         02:D59B  A9 60      			lda.h	#$6000 + ($1FFF & (_tileset_FONT))
         02:D59D  85 ED      			sta.h	_bp
         02:D59F  A9 03      			lda	#bank(_tileset_FONT)
         02:D5A1  85 02      			sta	_bp_bank
13221                        		__ld.wi		___sizeof__tileset_FONT
         02:D5A3  A9 00      			lda.l	#___sizeof__tileset_FONT
         02:D5A5  A0 0C      			ldy.h	#___sizeof__tileset_FONT
13222                        		__lsr.wi	1
         02:D5A7  42         			say
         02:D5A8  4A         			lsr	a
         02:D5A9  42         			say
         02:D5AA  6A         			ror	a
13223                        		__st.wmq	_ax
         02:D5AB  85 F8      			sta.l	_ax
         02:D5AD  84 F9      			sty.h	_ax
13224                        		 _load_vram.3
         02:D5AF  82         			clx				; Offset to PCE VDC.
         02:D5B0  20 4F FF   			call	load_vram_x
13225                        	
13226                        		.dbg	line,	"include\init.c", 271; set_font_pal(15);
13227                        		__ld.uiq	15
         02:D5B3  A9 0F      			lda	#15
13228                        		__call		_set_font_pal.1
         02:D5B5  20 09 E6   			call	_set_font_pal.1
13229                        	
13230                        		.dbg	line,	"include\init.c", 274; //--------------------------------------------------------------------------------------//
13231                        	
13232                        		.dbg	line,	"include\init.c", 275; //                                    LOAD TILESET                                      //
13233                        	
13234                        		.dbg	line,	"include\init.c", 276; //--------------------------------------------------------------------------------------//
13235                        	
13236                        		.dbg	line,	"include\init.c", 278; load_vram( 0x1000, tileset_HUD, SIZEOF(tileset_HUD) >> 1 );
13237                        		__st.wmiq	4096, _di
         02:D5B8  64 F0      			stz.l	_di
         02:D5BA  A9 10      			lda.h	#4096
         02:D5BC  85 F1      			sta.h	_di
13238                        		__farptr	_tileset_HUD, _bp_bank, _bp
         02:D5BE  A9 A0      			lda.l	#$6000 + ($1FFF & (_tileset_HUD))
         02:D5C0  85 EC      			sta.l	_bp
         02:D5C2  A9 79      			lda.h	#$6000 + ($1FFF & (_tileset_HUD))
         02:D5C4  85 ED      			sta.h	_bp
         02:D5C6  A9 09      			lda	#bank(_tileset_HUD)
         02:D5C8  85 02      			sta	_bp_bank
13239                        		__ld.wi		___sizeof__tileset_HUD
         02:D5CA  A9 60      			lda.l	#___sizeof__tileset_HUD
         02:D5CC  A0 06      			ldy.h	#___sizeof__tileset_HUD
13240                        		__lsr.wi	1
         02:D5CE  42         			say
         02:D5CF  4A         			lsr	a
         02:D5D0  42         			say
         02:D5D1  6A         			ror	a
13241                        		__st.wmq	_ax
         02:D5D2  85 F8      			sta.l	_ax
         02:D5D4  84 F9      			sty.h	_ax
13242                        		 _load_vram.3
         02:D5D6  82         			clx				; Offset to PCE VDC.
         02:D5D7  20 4F FF   			call	load_vram_x
13243                        	
13244                        		.dbg	line,	"include\init.c", 281; //--------------------------------------------------------------------------------------//
13245                        	
13246                        		.dbg	line,	"include\init.c", 282; //                                 LOAD LIFEBAR TILES                                   //
13247                        	
13248                        		.dbg	line,	"include\init.c", 283; //--------------------------------------------------------------------------------------//
13249                        	
13250                        		.dbg	line,	"include\init.c", 285; load_vram( LIFEBAR_1_VRAM_ADR, tileset_LIFE_RED, SIZEOF(tileset_LIFE_RED) >> 1 );
13251                        		__st.wmiq	4096, _di
         02:D5DA  64 F0      			stz.l	_di
         02:D5DC  A9 10      			lda.h	#4096
         02:D5DE  85 F1      			sta.h	_di
13252                        		__farptr	_tileset_LIFE_RED, _bp_bank, _bp
         02:D5E0  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_LIFE_RED))
         02:D5E2  85 EC      			sta.l	_bp
         02:D5E4  A9 74      			lda.h	#$6000 + ($1FFF & (_tileset_LIFE_RED))
         02:D5E6  85 ED      			sta.h	_bp
         02:D5E8  A9 03      			lda	#bank(_tileset_LIFE_RED)
         02:D5EA  85 02      			sta	_bp_bank
13253                        		__ld.wi		___sizeof__tileset_LIFE_RED
         02:D5EC  A9 40      			lda.l	#___sizeof__tileset_LIFE_RED
         02:D5EE  A0 00      			ldy.h	#___sizeof__tileset_LIFE_RED
13254                        		__lsr.wi	1
         02:D5F0  42         			say
         02:D5F1  4A         			lsr	a
         02:D5F2  42         			say
         02:D5F3  6A         			ror	a
13255                        		__st.wmq	_ax
         02:D5F4  85 F8      			sta.l	_ax
         02:D5F6  84 F9      			sty.h	_ax
13256                        		 _load_vram.3
         02:D5F8  82         			clx				; Offset to PCE VDC.
         02:D5F9  20 4F FF   			call	load_vram_x
13257                        	
13258                        		.dbg	line,	"include\init.c", 286; load_vram( LIFEBAR_2_VRAM_ADR, tileset_LIFE_ORANGE, SIZEOF(tileset_LIFE_ORANGE) >> 1 );
13259                        		__st.wmiq	4128, _di
         02:D5FC  A9 20      			lda.l	#4128
         02:D5FE  85 F0      			sta.l	_di
         02:D600  A9 10      			lda.h	#4128
         02:D602  85 F1      			sta.h	_di
13260                        		__farptr	_tileset_LIFE_ORANGE, _bp_bank, _bp
         02:D604  A9 40      			lda.l	#$6000 + ($1FFF & (_tileset_LIFE_ORANGE))
         02:D606  85 EC      			sta.l	_bp
         02:D608  A9 74      			lda.h	#$6000 + ($1FFF & (_tileset_LIFE_ORANGE))
         02:D60A  85 ED      			sta.h	_bp
         02:D60C  A9 03      			lda	#bank(_tileset_LIFE_ORANGE)
         02:D60E  85 02      			sta	_bp_bank
13261                        		__ld.wi		___sizeof__tileset_LIFE_ORANGE
         02:D610  A9 40      			lda.l	#___sizeof__tileset_LIFE_ORANGE
         02:D612  A0 00      			ldy.h	#___sizeof__tileset_LIFE_ORANGE
13262                        		__lsr.wi	1
         02:D614  42         			say
         02:D615  4A         			lsr	a
         02:D616  42         			say
         02:D617  6A         			ror	a
13263                        		__st.wmq	_ax
         02:D618  85 F8      			sta.l	_ax
         02:D61A  84 F9      			sty.h	_ax
13264                        		 _load_vram.3
         02:D61C  82         			clx				; Offset to PCE VDC.
         02:D61D  20 4F FF   			call	load_vram_x
13265                        	
13266                        		.dbg	line,	"include\init.c", 287; load_vram( LIFEBAR_3_VRAM_ADR, tileset_LIFE_YELLOW, SIZEOF(tileset_LIFE_YELLOW) >> 1 );
13267                        		__st.wmiq	4160, _di
         02:D620  A9 40      			lda.l	#4160
         02:D622  85 F0      			sta.l	_di
         02:D624  A9 10      			lda.h	#4160
         02:D626  85 F1      			sta.h	_di
13268                        		__farptr	_tileset_LIFE_YELLOW, _bp_bank, _bp
         02:D628  A9 80      			lda.l	#$6000 + ($1FFF & (_tileset_LIFE_YELLOW))
         02:D62A  85 EC      			sta.l	_bp
         02:D62C  A9 74      			lda.h	#$6000 + ($1FFF & (_tileset_LIFE_YELLOW))
         02:D62E  85 ED      			sta.h	_bp
         02:D630  A9 03      			lda	#bank(_tileset_LIFE_YELLOW)
         02:D632  85 02      			sta	_bp_bank
13269                        		__ld.wi		___sizeof__tileset_LIFE_YELLOW
         02:D634  A9 40      			lda.l	#___sizeof__tileset_LIFE_YELLOW
         02:D636  A0 00      			ldy.h	#___sizeof__tileset_LIFE_YELLOW
13270                        		__lsr.wi	1
         02:D638  42         			say
         02:D639  4A         			lsr	a
         02:D63A  42         			say
         02:D63B  6A         			ror	a
13271                        		__st.wmq	_ax
         02:D63C  85 F8      			sta.l	_ax
         02:D63E  84 F9      			sty.h	_ax
13272                        		 _load_vram.3
         02:D640  82         			clx				; Offset to PCE VDC.
         02:D641  20 4F FF   			call	load_vram_x
13273                        	
13274                        		.dbg	line,	"include\init.c", 288; load_vram( LIFEBAR_4_VRAM_ADR, tileset_LIFE_YELLOW, SIZEOF(tileset_LIFE_YELLOW) >> 1 );
13275                        		__st.wmiq	4192, _di
         02:D644  A9 60      			lda.l	#4192
         02:D646  85 F0      			sta.l	_di
         02:D648  A9 10      			lda.h	#4192
         02:D64A  85 F1      			sta.h	_di
13276                        		__farptr	_tileset_LIFE_YELLOW, _bp_bank, _bp
         02:D64C  A9 80      			lda.l	#$6000 + ($1FFF & (_tileset_LIFE_YELLOW))
         02:D64E  85 EC      			sta.l	_bp
         02:D650  A9 74      			lda.h	#$6000 + ($1FFF & (_tileset_LIFE_YELLOW))
         02:D652  85 ED      			sta.h	_bp
         02:D654  A9 03      			lda	#bank(_tileset_LIFE_YELLOW)
         02:D656  85 02      			sta	_bp_bank
13277                        		__ld.wi		___sizeof__tileset_LIFE_YELLOW
         02:D658  A9 40      			lda.l	#___sizeof__tileset_LIFE_YELLOW
         02:D65A  A0 00      			ldy.h	#___sizeof__tileset_LIFE_YELLOW
13278                        		__lsr.wi	1
         02:D65C  42         			say
         02:D65D  4A         			lsr	a
         02:D65E  42         			say
         02:D65F  6A         			ror	a
13279                        		__st.wmq	_ax
         02:D660  85 F8      			sta.l	_ax
         02:D662  84 F9      			sty.h	_ax
13280                        		 _load_vram.3
         02:D664  82         			clx				; Offset to PCE VDC.
         02:D665  20 4F FF   			call	load_vram_x
13281                        	
13282                        		.dbg	line,	"include\init.c", 289; load_vram( LIFEBAR_5_VRAM_ADR, tileset_LIFE_EMPTY, SIZEOF(tileset_LIFE_EMPTY) >> 1 );
13283                        		__st.wmiq	4224, _di
         02:D668  A9 80      			lda.l	#4224
         02:D66A  85 F0      			sta.l	_di
         02:D66C  A9 10      			lda.h	#4224
         02:D66E  85 F1      			sta.h	_di
13284                        		__farptr	_tileset_LIFE_EMPTY, _bp_bank, _bp
         02:D670  A9 C0      			lda.l	#$6000 + ($1FFF & (_tileset_LIFE_EMPTY))
         02:D672  85 EC      			sta.l	_bp
         02:D674  A9 74      			lda.h	#$6000 + ($1FFF & (_tileset_LIFE_EMPTY))
         02:D676  85 ED      			sta.h	_bp
         02:D678  A9 03      			lda	#bank(_tileset_LIFE_EMPTY)
         02:D67A  85 02      			sta	_bp_bank
13285                        		__ld.wi		___sizeof__tileset_LIFE_EMPTY
         02:D67C  A9 40      			lda.l	#___sizeof__tileset_LIFE_EMPTY
         02:D67E  A0 00      			ldy.h	#___sizeof__tileset_LIFE_EMPTY
13286                        		__lsr.wi	1
         02:D680  42         			say
         02:D681  4A         			lsr	a
         02:D682  42         			say
         02:D683  6A         			ror	a
13287                        		__st.wmq	_ax
         02:D684  85 F8      			sta.l	_ax
         02:D686  84 F9      			sty.h	_ax
13288                        		 _load_vram.3
         02:D688  82         			clx				; Offset to PCE VDC.
         02:D689  20 4F FF   			call	load_vram_x
13289                        	
13290                        		.dbg	line,	"include\init.c", 292; //--------------------------------------------------------------------------------------//
13291                        	
13292                        		.dbg	line,	"include\init.c", 293; //                               LOAD WEAPON + ARMOR TILES                              //
13293                        	
13294                        		.dbg	line,	"include\init.c", 294; //--------------------------------------------------------------------------------------//
13295                        	
13296                        		.dbg	line,	"include\init.c", 296; if(weapon_level == 1)
13297                        		__ld.umq	_weapon_level
         02:D68C  AD 25 23   			lda	_weapon_level
13298                        		__equ_b.uiq	1
         02:D68F  C9 01      			cmp	#1
         02:D691  F0 01      			beq	!+
         02:D693  18         			clc
         02:D694             	!:
13299                        		__bfalse	.LL573
         02:D694  90 27      			bcc	.LL573
13300                        	
13301                        		.dbg	line,	"include\init.c", 297; {
13302                        	
13303                        		.dbg	line,	"include\init.c", 298; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_1, SIZEOF(tileset_WEAPON_1) >> 1 );
13304                        		__st.wmiq	4256, _di
         02:D696  A9 A0      			lda.l	#4256
         02:D698  85 F0      			sta.l	_di
         02:D69A  A9 10      			lda.h	#4256
         02:D69C  85 F1      			sta.h	_di
13305                        		__farptr	_tileset_WEAPON_1, _bp_bank, _bp
         02:D69E  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_1))
         02:D6A0  85 EC      			sta.l	_bp
         02:D6A2  A9 77      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_1))
         02:D6A4  85 ED      			sta.h	_bp
         02:D6A6  A9 03      			lda	#bank(_tileset_WEAPON_1)
         02:D6A8  85 02      			sta	_bp_bank
13306                        		__ld.wi		___sizeof__tileset_WEAPON_1
         02:D6AA  A9 80      			lda.l	#___sizeof__tileset_WEAPON_1
         02:D6AC  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_1
13307                        		__lsr.wi	1
         02:D6AE  42         			say
         02:D6AF  4A         			lsr	a
         02:D6B0  42         			say
         02:D6B1  6A         			ror	a
13308                        		__st.wmq	_ax
         02:D6B2  85 F8      			sta.l	_ax
         02:D6B4  84 F9      			sty.h	_ax
13309                        		 _load_vram.3
         02:D6B6  82         			clx				; Offset to PCE VDC.
         02:D6B7  20 4F FF   			call	load_vram_x
13310                        	
13311                        		.dbg	line,	"include\init.c", 299; }
13312                        	
13313                        		.dbg	line,	"include\init.c", 301; else if(weapon_level == 2)
13314                        		__bra		.LL574
         02:D6BA  4C 7C D7   			bra	.LL574
13315    02:D6BD             	.LL573:
13316                        		__ld.umq	_weapon_level
         02:D6BD  AD 25 23   			lda	_weapon_level
13317                        		__equ_b.uiq	2
         02:D6C0  C9 02      			cmp	#2
         02:D6C2  F0 01      			beq	!+
         02:D6C4  18         			clc
         02:D6C5             	!:
13318                        		__bfalse	.LL575
         02:D6C5  90 27      			bcc	.LL575
13319                        	
13320                        		.dbg	line,	"include\init.c", 302; {
13321                        	
13322                        		.dbg	line,	"include\init.c", 303; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_2, SIZEOF(tileset_WEAPON_2) >> 1 );
13323                        		__st.wmiq	4256, _di
         02:D6C7  A9 A0      			lda.l	#4256
         02:D6C9  85 F0      			sta.l	_di
         02:D6CB  A9 10      			lda.h	#4256
         02:D6CD  85 F1      			sta.h	_di
13324                        		__farptr	_tileset_WEAPON_2, _bp_bank, _bp
         02:D6CF  A9 80      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_2))
         02:D6D1  85 EC      			sta.l	_bp
         02:D6D3  A9 77      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_2))
         02:D6D5  85 ED      			sta.h	_bp
         02:D6D7  A9 03      			lda	#bank(_tileset_WEAPON_2)
         02:D6D9  85 02      			sta	_bp_bank
13325                        		__ld.wi		___sizeof__tileset_WEAPON_2
         02:D6DB  A9 80      			lda.l	#___sizeof__tileset_WEAPON_2
         02:D6DD  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_2
13326                        		__lsr.wi	1
         02:D6DF  42         			say
         02:D6E0  4A         			lsr	a
         02:D6E1  42         			say
         02:D6E2  6A         			ror	a
13327                        		__st.wmq	_ax
         02:D6E3  85 F8      			sta.l	_ax
         02:D6E5  84 F9      			sty.h	_ax
13328                        		 _load_vram.3
         02:D6E7  82         			clx				; Offset to PCE VDC.
         02:D6E8  20 4F FF   			call	load_vram_x
13329                        	
13330                        		.dbg	line,	"include\init.c", 304; }
13331                        	
13332                        		.dbg	line,	"include\init.c", 306; else if(weapon_level == 3)
13333                        		__bra		.LL576
         02:D6EB  4C 7C D7   			bra	.LL576
13334    02:D6EE             	.LL575:
13335                        		__ld.umq	_weapon_level
         02:D6EE  AD 25 23   			lda	_weapon_level
13336                        		__equ_b.uiq	3
         02:D6F1  C9 03      			cmp	#3
         02:D6F3  F0 01      			beq	!+
         02:D6F5  18         			clc
         02:D6F6             	!:
13337                        		__bfalse	.LL577
         02:D6F6  90 26      			bcc	.LL577
13338                        	
13339                        		.dbg	line,	"include\init.c", 307; {
13340                        	
13341                        		.dbg	line,	"include\init.c", 308; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_4, SIZEOF(tileset_WEAPON_4) >> 1 );
13342                        		__st.wmiq	4256, _di
         02:D6F8  A9 A0      			lda.l	#4256
         02:D6FA  85 F0      			sta.l	_di
         02:D6FC  A9 10      			lda.h	#4256
         02:D6FE  85 F1      			sta.h	_di
13343                        		__farptr	_tileset_WEAPON_4, _bp_bank, _bp
         02:D700  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_4))
         02:D702  85 EC      			sta.l	_bp
         02:D704  A9 78      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_4))
         02:D706  85 ED      			sta.h	_bp
         02:D708  A9 03      			lda	#bank(_tileset_WEAPON_4)
         02:D70A  85 02      			sta	_bp_bank
13344                        		__ld.wi		___sizeof__tileset_WEAPON_4
         02:D70C  A9 80      			lda.l	#___sizeof__tileset_WEAPON_4
         02:D70E  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_4
13345                        		__lsr.wi	1
         02:D710  42         			say
         02:D711  4A         			lsr	a
         02:D712  42         			say
         02:D713  6A         			ror	a
13346                        		__st.wmq	_ax
         02:D714  85 F8      			sta.l	_ax
         02:D716  84 F9      			sty.h	_ax
13347                        		 _load_vram.3
         02:D718  82         			clx				; Offset to PCE VDC.
         02:D719  20 4F FF   			call	load_vram_x
13348                        	
13349                        		.dbg	line,	"include\init.c", 309; }
13350                        	
13351                        		.dbg	line,	"include\init.c", 311; else if(weapon_level == 4)
13352                        		__bra		.LL578
         02:D71C  80 5E      			bra	.LL578
13353    02:D71E             	.LL577:
13354                        		__ld.umq	_weapon_level
         02:D71E  AD 25 23   			lda	_weapon_level
13355                        		__equ_b.uiq	4
         02:D721  C9 04      			cmp	#4
         02:D723  F0 01      			beq	!+
         02:D725  18         			clc
         02:D726             	!:
13356                        		__bfalse	.LL579
         02:D726  90 26      			bcc	.LL579
13357                        	
13358                        		.dbg	line,	"include\init.c", 312; {
13359                        	
13360                        		.dbg	line,	"include\init.c", 313; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_5, SIZEOF(tileset_WEAPON_5) >> 1 );
13361                        		__st.wmiq	4256, _di
         02:D728  A9 A0      			lda.l	#4256
         02:D72A  85 F0      			sta.l	_di
         02:D72C  A9 10      			lda.h	#4256
         02:D72E  85 F1      			sta.h	_di
13362                        		__farptr	_tileset_WEAPON_5, _bp_bank, _bp
         02:D730  A9 80      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_5))
         02:D732  85 EC      			sta.l	_bp
         02:D734  A9 78      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_5))
         02:D736  85 ED      			sta.h	_bp
         02:D738  A9 03      			lda	#bank(_tileset_WEAPON_5)
         02:D73A  85 02      			sta	_bp_bank
13363                        		__ld.wi		___sizeof__tileset_WEAPON_5
         02:D73C  A9 80      			lda.l	#___sizeof__tileset_WEAPON_5
         02:D73E  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_5
13364                        		__lsr.wi	1
         02:D740  42         			say
         02:D741  4A         			lsr	a
         02:D742  42         			say
         02:D743  6A         			ror	a
13365                        		__st.wmq	_ax
         02:D744  85 F8      			sta.l	_ax
         02:D746  84 F9      			sty.h	_ax
13366                        		 _load_vram.3
         02:D748  82         			clx				; Offset to PCE VDC.
         02:D749  20 4F FF   			call	load_vram_x
13367                        	
13368                        		.dbg	line,	"include\init.c", 314; }
13369                        	
13370                        		.dbg	line,	"include\init.c", 316; else if(weapon_level == 5)
13371                        		__bra		.LL580
         02:D74C  80 2E      			bra	.LL580
13372    02:D74E             	.LL579:
13373                        		__ld.umq	_weapon_level
         02:D74E  AD 25 23   			lda	_weapon_level
13374                        		__equ_b.uiq	5
         02:D751  C9 05      			cmp	#5
         02:D753  F0 01      			beq	!+
         02:D755  18         			clc
         02:D756             	!:
13375                        		__bfalse	.LL581
         02:D756  90 24      			bcc	.LL581
13376                        	
13377                        		.dbg	line,	"include\init.c", 317; {
13378                        	
13379                        		.dbg	line,	"include\init.c", 318; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_8, SIZEOF(tileset_WEAPON_8) >> 1 );
13380                        		__st.wmiq	4256, _di
         02:D758  A9 A0      			lda.l	#4256
         02:D75A  85 F0      			sta.l	_di
         02:D75C  A9 10      			lda.h	#4256
         02:D75E  85 F1      			sta.h	_di
13381                        		__farptr	_tileset_WEAPON_8, _bp_bank, _bp
         02:D760  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_8))
         02:D762  85 EC      			sta.l	_bp
         02:D764  A9 79      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_8))
         02:D766  85 ED      			sta.h	_bp
         02:D768  A9 03      			lda	#bank(_tileset_WEAPON_8)
         02:D76A  85 02      			sta	_bp_bank
13382                        		__ld.wi		___sizeof__tileset_WEAPON_8
         02:D76C  A9 80      			lda.l	#___sizeof__tileset_WEAPON_8
         02:D76E  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_8
13383                        		__lsr.wi	1
         02:D770  42         			say
         02:D771  4A         			lsr	a
         02:D772  42         			say
         02:D773  6A         			ror	a
13384                        		__st.wmq	_ax
         02:D774  85 F8      			sta.l	_ax
         02:D776  84 F9      			sty.h	_ax
13385                        		 _load_vram.3
         02:D778  82         			clx				; Offset to PCE VDC.
         02:D779  20 4F FF   			call	load_vram_x
13386                        	
13387                        		.dbg	line,	"include\init.c", 319; }
13388                        	
13389                        		.dbg	line,	"include\init.c", 324; if(armor_level == 1)
13390    02:D77C             	.LL581:
13391    02:D77C             	.LL580:
13392    02:D77C             	.LL578:
13393    02:D77C             	.LL576:
13394    02:D77C             	.LL574:
13395                        		__ld.umq	_armor_level
         02:D77C  AD 24 23   			lda	_armor_level
13396                        		__equ_b.uiq	1
         02:D77F  C9 01      			cmp	#1
         02:D781  F0 01      			beq	!+
         02:D783  18         			clc
         02:D784             	!:
13397                        		__bfalse	.LL582
         02:D784  90 27      			bcc	.LL582
13398                        	
13399                        		.dbg	line,	"include\init.c", 325; {
13400                        	
13401                        		.dbg	line,	"include\init.c", 326; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_1, SIZEOF(tileset_ARMOR_1) >> 1 );
13402                        		__st.wmiq	4320, _di
         02:D786  A9 E0      			lda.l	#4320
         02:D788  85 F0      			sta.l	_di
         02:D78A  A9 10      			lda.h	#4320
         02:D78C  85 F1      			sta.h	_di
13403                        		__farptr	_tileset_ARMOR_1, _bp_bank, _bp
         02:D78E  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_1))
         02:D790  85 EC      			sta.l	_bp
         02:D792  A9 75      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_1))
         02:D794  85 ED      			sta.h	_bp
         02:D796  A9 03      			lda	#bank(_tileset_ARMOR_1)
         02:D798  85 02      			sta	_bp_bank
13404                        		__ld.wi		___sizeof__tileset_ARMOR_1
         02:D79A  A9 80      			lda.l	#___sizeof__tileset_ARMOR_1
         02:D79C  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_1
13405                        		__lsr.wi	1
         02:D79E  42         			say
         02:D79F  4A         			lsr	a
         02:D7A0  42         			say
         02:D7A1  6A         			ror	a
13406                        		__st.wmq	_ax
         02:D7A2  85 F8      			sta.l	_ax
         02:D7A4  84 F9      			sty.h	_ax
13407                        		 _load_vram.3
         02:D7A6  82         			clx				; Offset to PCE VDC.
         02:D7A7  20 4F FF   			call	load_vram_x
13408                        	
13409                        		.dbg	line,	"include\init.c", 327; }
13410                        	
13411                        		.dbg	line,	"include\init.c", 329; else if(armor_level == 2)
13412                        		__bra		.LL583
         02:D7AA  4C 3B D8   			bra	.LL583
13413    02:D7AD             	.LL582:
13414                        		__ld.umq	_armor_level
         02:D7AD  AD 24 23   			lda	_armor_level
13415                        		__equ_b.uiq	2
         02:D7B0  C9 02      			cmp	#2
         02:D7B2  F0 01      			beq	!+
         02:D7B4  18         			clc
         02:D7B5             	!:
13416                        		__bfalse	.LL584
         02:D7B5  90 26      			bcc	.LL584
13417                        	
13418                        		.dbg	line,	"include\init.c", 330; {
13419                        	
13420                        		.dbg	line,	"include\init.c", 331; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_2, SIZEOF(tileset_ARMOR_2) >> 1 );
13421                        		__st.wmiq	4320, _di
         02:D7B7  A9 E0      			lda.l	#4320
         02:D7B9  85 F0      			sta.l	_di
         02:D7BB  A9 10      			lda.h	#4320
         02:D7BD  85 F1      			sta.h	_di
13422                        		__farptr	_tileset_ARMOR_2, _bp_bank, _bp
         02:D7BF  A9 80      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_2))
         02:D7C1  85 EC      			sta.l	_bp
         02:D7C3  A9 75      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_2))
         02:D7C5  85 ED      			sta.h	_bp
         02:D7C7  A9 03      			lda	#bank(_tileset_ARMOR_2)
         02:D7C9  85 02      			sta	_bp_bank
13423                        		__ld.wi		___sizeof__tileset_ARMOR_2
         02:D7CB  A9 80      			lda.l	#___sizeof__tileset_ARMOR_2
         02:D7CD  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_2
13424                        		__lsr.wi	1
         02:D7CF  42         			say
         02:D7D0  4A         			lsr	a
         02:D7D1  42         			say
         02:D7D2  6A         			ror	a
13425                        		__st.wmq	_ax
         02:D7D3  85 F8      			sta.l	_ax
         02:D7D5  84 F9      			sty.h	_ax
13426                        		 _load_vram.3
         02:D7D7  82         			clx				; Offset to PCE VDC.
         02:D7D8  20 4F FF   			call	load_vram_x
13427                        	
13428                        		.dbg	line,	"include\init.c", 332; }
13429                        	
13430                        		.dbg	line,	"include\init.c", 334; else if(armor_level == 3)
13431                        		__bra		.LL585
         02:D7DB  80 5E      			bra	.LL585
13432    02:D7DD             	.LL584:
13433                        		__ld.umq	_armor_level
         02:D7DD  AD 24 23   			lda	_armor_level
13434                        		__equ_b.uiq	3
         02:D7E0  C9 03      			cmp	#3
         02:D7E2  F0 01      			beq	!+
         02:D7E4  18         			clc
         02:D7E5             	!:
13435                        		__bfalse	.LL586
         02:D7E5  90 26      			bcc	.LL586
13436                        	
13437                        		.dbg	line,	"include\init.c", 335; {
13438                        	
13439                        		.dbg	line,	"include\init.c", 336; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_4, SIZEOF(tileset_ARMOR_4) >> 1 );
13440                        		__st.wmiq	4320, _di
         02:D7E7  A9 E0      			lda.l	#4320
         02:D7E9  85 F0      			sta.l	_di
         02:D7EB  A9 10      			lda.h	#4320
         02:D7ED  85 F1      			sta.h	_di
13441                        		__farptr	_tileset_ARMOR_4, _bp_bank, _bp
         02:D7EF  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_4))
         02:D7F1  85 EC      			sta.l	_bp
         02:D7F3  A9 76      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_4))
         02:D7F5  85 ED      			sta.h	_bp
         02:D7F7  A9 03      			lda	#bank(_tileset_ARMOR_4)
         02:D7F9  85 02      			sta	_bp_bank
13442                        		__ld.wi		___sizeof__tileset_ARMOR_4
         02:D7FB  A9 80      			lda.l	#___sizeof__tileset_ARMOR_4
         02:D7FD  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_4
13443                        		__lsr.wi	1
         02:D7FF  42         			say
         02:D800  4A         			lsr	a
         02:D801  42         			say
         02:D802  6A         			ror	a
13444                        		__st.wmq	_ax
         02:D803  85 F8      			sta.l	_ax
         02:D805  84 F9      			sty.h	_ax
13445                        		 _load_vram.3
         02:D807  82         			clx				; Offset to PCE VDC.
         02:D808  20 4F FF   			call	load_vram_x
13446                        	
13447                        		.dbg	line,	"include\init.c", 337; }
13448                        	
13449                        		.dbg	line,	"include\init.c", 339; else if(armor_level == 4)
13450                        		__bra		.LL587
         02:D80B  80 2E      			bra	.LL587
13451    02:D80D             	.LL586:
13452                        		__ld.umq	_armor_level
         02:D80D  AD 24 23   			lda	_armor_level
13453                        		__equ_b.uiq	4
         02:D810  C9 04      			cmp	#4
         02:D812  F0 01      			beq	!+
         02:D814  18         			clc
         02:D815             	!:
13454                        		__bfalse	.LL588
         02:D815  90 24      			bcc	.LL588
13455                        	
13456                        		.dbg	line,	"include\init.c", 340; {
13457                        	
13458                        		.dbg	line,	"include\init.c", 341; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_8, SIZEOF(tileset_ARMOR_8) >> 1 );
13459                        		__st.wmiq	4320, _di
         02:D817  A9 E0      			lda.l	#4320
         02:D819  85 F0      			sta.l	_di
         02:D81B  A9 10      			lda.h	#4320
         02:D81D  85 F1      			sta.h	_di
13460                        		__farptr	_tileset_ARMOR_8, _bp_bank, _bp
         02:D81F  A9 80      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_8))
         02:D821  85 EC      			sta.l	_bp
         02:D823  A9 76      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_8))
         02:D825  85 ED      			sta.h	_bp
         02:D827  A9 03      			lda	#bank(_tileset_ARMOR_8)
         02:D829  85 02      			sta	_bp_bank
13461                        		__ld.wi		___sizeof__tileset_ARMOR_8
         02:D82B  A9 80      			lda.l	#___sizeof__tileset_ARMOR_8
         02:D82D  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_8
13462                        		__lsr.wi	1
         02:D82F  42         			say
         02:D830  4A         			lsr	a
         02:D831  42         			say
         02:D832  6A         			ror	a
13463                        		__st.wmq	_ax
         02:D833  85 F8      			sta.l	_ax
         02:D835  84 F9      			sty.h	_ax
13464                        		 _load_vram.3
         02:D837  82         			clx				; Offset to PCE VDC.
         02:D838  20 4F FF   			call	load_vram_x
13465                        	
13466                        		.dbg	line,	"include\init.c", 342; }
13467                        	
13468                        		.dbg	line,	"include\init.c", 347; //--------------------------------------------------------------------------------------//
13469                        	
13470                        		.dbg	line,	"include\init.c", 348; //                                     SET MULTIMAP                                     //
13471                        	
13472                        		.dbg	line,	"include\init.c", 349; //--------------------------------------------------------------------------------------//
13473                        	
13474                        		.dbg	line,	"include\init.c", 351; // multimap is 2 screens wide //
13475                        	
13476                        		.dbg	line,	"include\init.c", 352; set_multimap( multimap_LV1_BG_A , 5 );
13477    02:D83B             	.LL588:
13478    02:D83B             	.LL587:
13479    02:D83B             	.LL585:
13480    02:D83B             	.LL583:
13481                        		__farptr	_multimap_LV1_BG_A, vdc_scr_bank, vdc_scr_addr
         02:D83B  A9 00      			lda.l	#$6000 + ($1FFF & (_multimap_LV1_BG_A))
         02:D83D  8D BD 2B   			sta.l	vdc_scr_addr
         02:D840  A9 78      			lda.h	#$6000 + ($1FFF & (_multimap_LV1_BG_A))
         02:D842  8D BE 2B   			sta.h	vdc_scr_addr
         02:D845  A9 0B      			lda	#bank(_multimap_LV1_BG_A)
         02:D847  8D BF 2B   			sta	vdc_scr_bank
13482                        		__st.umiq	5, vdc_map_scrn_w
         02:D84A  A9 05      			lda.l	#5
         02:D84C  8D 7E 26   			sta	vdc_map_scrn_w
13483                        		 _set_multimap.2
         02:D84F  AD 76 26   			lda	vdc_bat_width
         02:D852  4A         			lsr	a
         02:D853  8D 7D 26   			sta	vdc_map_line_w
13484                        	
13485                        		.dbg	line,	"include\init.c", 355; //--------------------------------------------------------------------------------------//
13486                        	
13487                        		.dbg	line,	"include\init.c", 356; //                                    DRAW TILEMAP                                      //
13488                        	
13489                        		.dbg	line,	"include\init.c", 357; //--------------------------------------------------------------------------------------//
13490                        	
13491                        		.dbg	line,	"include\init.c", 359; // The blkmap is drawn using global variables for the top-left coordinate
13492                        	
13493                        		.dbg	line,	"include\init.c", 360; // in pixels, and the draw width and height in terms of 8x8 characters.
13494                        	
13495                        		.dbg	line,	"include\init.c", 362; vdc_map_pxl_x = 0;
13496                        		__st.wmiq	0, _vdc_map_pxl_x
         02:D856  9C 7F 26   			stz.l	_vdc_map_pxl_x
         02:D859  9C 80 26   			stz.h	_vdc_map_pxl_x
13497                        	
13498                        		.dbg	line,	"include\init.c", 363; vdc_map_pxl_y = 0;
13499                        		__st.wmiq	0, _vdc_map_pxl_y
         02:D85C  9C 81 26   			stz.l	_vdc_map_pxl_y
         02:D85F  9C 82 26   			stz.h	_vdc_map_pxl_y
13500                        	
13501                        		.dbg	line,	"include\init.c", 365; vdc_map_draw_w = 32;
13502                        		__st.umiq	32, _vdc_map_draw_w
         02:D862  A9 20      			lda.l	#32
         02:D864  8D 7B 26   			sta	_vdc_map_draw_w
13503                        	
13504                        		.dbg	line,	"include\init.c", 366; vdc_map_draw_h = 28;
13505                        		__st.umiq	28, _vdc_map_draw_h
         02:D867  A9 1C      			lda.l	#28
         02:D869  8D 7C 26   			sta	_vdc_map_draw_h
13506                        	
13507                        		.dbg	line,	"include\init.c", 368; draw_map();
13508                        		__call		_draw_map
         02:D86C  20 1D FF   			call	_draw_map
13509                        	
13510                        		.dbg	line,	"include\init.c", 370; display_SCORE();
13511                        		__call		_display_SCORE
         02:D86F  20 13 FF   			call	_display_SCORE
13512                        	
13513                        		.dbg	line,	"include\init.c", 371; display_TIME_LEVEL();
13514                        		__call		_display_TIME_LEVEL
         02:D872  20 09 FF   			call	_display_TIME_LEVEL
13515                        	
13516                        		.dbg	line,	"include\init.c", 372; display_KEY();
13517                        		__call		_display_KEY
         02:D875  20 8B FF   			call	_display_KEY
13518                        	
13519                        		.dbg	line,	"include\init.c", 373; display_POTION();
13520                        		__call		_display_POTION
         02:D878  20 3B FF   			call	_display_POTION
13521                        	
13522                        		.dbg	line,	"include\init.c", 374; display_ZENNY();
13523                        		__call		_display_ZENNY
         02:D87B  20 45 FF   			call	_display_ZENNY
13524                        	
13525                        		.dbg	line,	"include\init.c", 375; }
13526    02:D87E             	.LL572:
13527                        		__return	0
         02:D87E  4C EF FF   			jmp	leave_proc
13528                        		.dbg	clear
13529                        		.endp
13530                        		.pceas
13531                        	
13532                        		.dbg	line,	"include\init.c", 378; void init_LEVEL()
13533                        		.dbg	line,	"include\init.c", 379; {
13534                        	;***********************
13535                        	;***********************
13536                        	
13537                        		.hucc
13538    13:DA82             		.proc		_init_LEVEL
13539                        		__enter		_init_LEVEL
13540                        	
13541                        		.dbg	line,	"include\init.c", 380; if(level_id == 1)
13542                        		__ld.umq	_level_id
         13:DA82  AD 13 23   			lda	_level_id
13543                        		__equ_b.uiq	1
         13:DA85  C9 01      			cmp	#1
         13:DA87  F0 01      			beq	!+
         13:DA89  18         			clc
         13:DA8A             	!:
13544                        		__bfalse	.LL590
         13:DA8A  B0 03 4C E8			bcc	.LL590
         13:DA8E  DE          
13545                        	
13546                        		.dbg	line,	"include\init.c", 381; {
13547                        	
13548                        		.dbg	line,	"include\init.c", 382; char i;
13549                        	
13550                        		.dbg	line,	"include\init.c", 383; 
13551                        	
13552                        		.dbg	line,	"include\init.c", 384; // VSYNC //
13553                        	
13554                        		.dbg	line,	"include\init.c", 385; vsync();
13555                        		__call		_vsync
         13:DA8F  20 09 E3   			call	_vsync
13556                        	
13557                        		.dbg	line,	"include\init.c", 388; // DISABLE DISPLAY //
13558                        	
13559                        		.dbg	line,	"include\init.c", 389; disp_off();
13560                        		__call		_disp_off
         13:DA92  20 29 E4   			call	_disp_off
13561                        	
13562                        		.dbg	line,	"include\init.c", 392; // SET VDC 1 SCREEN SIZE (IN TILES) - 64x32 = 512x256 PIXELS
13563                        	
13564                        		.dbg	line,	"include\init.c", 393; set_screen_size(SCR_SIZE_64x32);
13565                        		__st.umiq	1, _al
         13:DA95  A9 01      			lda.l	#1
         13:DA97  85 F8      			sta	_al
13566                        		__call		_set_screen_size.1
         13:DA99  20 31 FF   			call	_set_screen_size.1
13567                        	
13568                        		.dbg	line,	"include\init.c", 396; // SET VDC 2 SCREEN SIZE (IN TILES) - 64x32 = 512x256 PIXELS
13569                        	
13570                        		.dbg	line,	"include\init.c", 397; sgx_set_screen_size(SCR_SIZE_64x32);
13571                        		__st.umiq	1, _al
         13:DA9C  A9 01      			lda.l	#1
         13:DA9E  85 F8      			sta	_al
13572                        		__call		_sgx_set_screen_size.1
         13:DAA0  20 27 FF   			call	_sgx_set_screen_size.1
13573                        	
13574                        		.dbg	line,	"include\init.c", 400; // INIT SPRITE ATTRIBUTE TABLE //
13575                        	
13576                        		.dbg	line,	"include\init.c", 401; //init_satb();
13577                        	
13578                        		.dbg	line,	"include\init.c", 406; //**************************************************************************************//
13579                        	
13580                        		.dbg	line,	"include\init.c", 407; //                                                                                      //
13581                        	
13582                        		.dbg	line,	"include\init.c", 408; //                                      VARIABLES                                       //
13583                        	
13584                        		.dbg	line,	"include\init.c", 409; //                                                                                      //
13585                        	
13586                        		.dbg	line,	"include\init.c", 410; //**************************************************************************************//
13587                        	
13588                        		.dbg	line,	"include\init.c", 412; time_counter = 0;
13589                        		__st.umiq	0, _time_counter
         13:DAA3  9C 2B 23   			stz	_time_counter
13590                        	
13591                        		.dbg	line,	"include\init.c", 413; 
13592                        	
13593                        		.dbg	line,	"include\init.c", 414; if(respawn == RESPAWN_SHOP)
13594                        		__ld.umq	_respawn
         13:DAA6  AD 14 23   			lda	_respawn
13595                        		__equ_b.uiq	2
         13:DAA9  C9 02      			cmp	#2
         13:DAAB  F0 01      			beq	!+
         13:DAAD  18         			clc
         13:DAAE             	!:
13596                        		__bfalse	.LL591
         13:DAAE  90 10      			bcc	.LL591
13597                        	
13598                        		.dbg	line,	"include\init.c", 415; {
13599                        	
13600                        		.dbg	line,	"include\init.c", 416; minutes = minutes_backup;
13601                        		__ld.um		_minutes_backup
         13:DAB0  AD 2C 23   			lda	_minutes_backup
         13:DAB3  C2         			cly
13602                        		__st.umq	_minutes
         13:DAB4  8D 29 23   			sta	_minutes
13603                        	
13604                        		.dbg	line,	"include\init.c", 417; seconds = seconds_backup;
13605                        		__ld.um		_seconds_backup
         13:DAB7  AD 2D 23   			lda	_seconds_backup
         13:DABA  C2         			cly
13606                        		__st.umq	_seconds
         13:DABB  8D 2A 23   			sta	_seconds
13607                        	
13608                        		.dbg	line,	"include\init.c", 418; }
13609                        	
13610                        		.dbg	line,	"include\init.c", 420; else
13611                        		__bra		.LL592
         13:DABE  80 0A      			bra	.LL592
13612    13:DAC0             	.LL591:
13613                        	
13614                        		.dbg	line,	"include\init.c", 421; {
13615                        	
13616                        		.dbg	line,	"include\init.c", 422; minutes = 1;
13617                        		__st.umiq	1, _minutes
         13:DAC0  A9 01      			lda.l	#1
         13:DAC2  8D 29 23   			sta	_minutes
13618                        	
13619                        		.dbg	line,	"include\init.c", 423; seconds = 59;
13620                        		__st.umiq	59, _seconds
         13:DAC5  A9 3B      			lda.l	#59
         13:DAC7  8D 2A 23   			sta	_seconds
13621                        	
13622                        		.dbg	line,	"include\init.c", 424; }
13623    13:DACA             	.LL592:
13624                        	
13625                        		.dbg	line,	"include\init.c", 426; camera_max_y_position = 768;
13626                        		__st.wmiq	768, _camera_max_y_position
         13:DACA  9C D7 24   			stz.l	_camera_max_y_position
         13:DACD  A9 03      			lda.h	#768
         13:DACF  8D D8 24   			sta.h	_camera_max_y_position
13627                        	
13628                        		.dbg	line,	"include\init.c", 427; jump_max_index = 34;
13629                        		__st.umiq	34, _jump_max_index
         13:DAD2  A9 22      			lda.l	#34
         13:DAD4  8D 20 23   			sta	_jump_max_index
13630                        	
13631                        		.dbg	line,	"include\init.c", 428; score = 0;
13632                        		__st.wmiq	0, _score
         13:DAD7  9C 2F 26   			stz.l	_score
         13:DADA  9C 30 26   			stz.h	_score
13633                        	
13634                        		.dbg	line,	"include\init.c", 429; level_object_number = OBJECT_NUMBER_LV1;
13635                        		__st.umiq	23, _level_object_number
         13:DADD  A9 17      			lda.l	#23
         13:DADF  8D 2F 23   			sta	_level_object_number
13636                        	
13637                        		.dbg	line,	"include\init.c", 430; level_chest_number = CHEST_NUMBER_LV1;
13638                        		__st.umiq	2, _level_chest_number
         13:DAE2  A9 02      			lda.l	#2
         13:DAE4  8D 9E 23   			sta	_level_chest_number
13639                        	
13640                        		.dbg	line,	"include\init.c", 431; level_npc_number = NPC_NUMBER_LV1;
13641                        		__st.umiq	2, _level_npc_number
         13:DAE7  A9 02      			lda.l	#2
         13:DAE9  8D B1 23   			sta	_level_npc_number
13642                        	
13643                        		.dbg	line,	"include\init.c", 432; object_start_index = OBJECT_START_INDEX_LV1;
13644                        		__st.umiq	0, _object_start_index
         13:DAEC  9C 2E 23   			stz	_object_start_index
13645                        	
13646                        		.dbg	line,	"include\init.c", 433; chest_start_index = CHEST_START_INDEX_LV1;
13647                        		__st.umiq	23, _chest_start_index
         13:DAEF  A9 17      			lda.l	#23
         13:DAF1  8D 9D 23   			sta	_chest_start_index
13648                        	
13649                        		.dbg	line,	"include\init.c", 434; npc_start_index = NPC_START_INDEX_LV1;
13650                        		__st.umiq	25, _npc_start_index
         13:DAF4  A9 19      			lda.l	#25
         13:DAF6  8D B0 23   			sta	_npc_start_index
13651                        	
13652                        		.dbg	line,	"include\init.c", 435; jump_ladder = FALSE;
13653                        		__st.umiq	0, _jump_ladder
         13:DAF9  9C 1F 23   			stz	_jump_ladder
13654                        	
13655                        		.dbg	line,	"include\init.c", 439; //**************************************************************************************//
13656                        	
13657                        		.dbg	line,	"include\init.c", 440; //                                                                                      //
13658                        	
13659                        		.dbg	line,	"include\init.c", 441; //                                        VDC 2                                         //
13660                        	
13661                        		.dbg	line,	"include\init.c", 442; //                                                                                      //
13662                        	
13663                        		.dbg	line,	"include\init.c", 443; //**************************************************************************************//
13664                        	
13665                        		.dbg	line,	"include\init.c", 445; //--------------------------------------------------------------------------------------//
13666                        	
13667                        		.dbg	line,	"include\init.c", 446; //                                    LOAD TILESET                                      //
13668                        	
13669                        		.dbg	line,	"include\init.c", 447; //--------------------------------------------------------------------------------------//
13670                        	
13671                        		.dbg	line,	"include\init.c", 449; sgx_load_vram( 0x1000, tileset_LV1_BG_B, SIZEOF(tileset_LV1_BG_B) >> 1 );
13672                        		__st.wmiq	4096, _di
         13:DAFC  64 F0      			stz.l	_di
         13:DAFE  A9 10      			lda.h	#4096
         13:DB00  85 F1      			sta.h	_di
13673                        		__farptr	_tileset_LV1_BG_B, _bp_bank, _bp
         13:DB02  A9 80      			lda.l	#$6000 + ($1FFF & (_tileset_LV1_BG_B))
         13:DB04  85 EC      			sta.l	_bp
         13:DB06  A9 79      			lda.h	#$6000 + ($1FFF & (_tileset_LV1_BG_B))
         13:DB08  85 ED      			sta.h	_bp
         13:DB0A  A9 03      			lda	#bank(_tileset_LV1_BG_B)
         13:DB0C  85 02      			sta	_bp_bank
13674                        		__ld.wi		___sizeof__tileset_LV1_BG_B
         13:DB0E  A9 E0      			lda.l	#___sizeof__tileset_LV1_BG_B
         13:DB10  A0 72      			ldy.h	#___sizeof__tileset_LV1_BG_B
13675                        		__lsr.wi	1
         13:DB12  42         			say
         13:DB13  4A         			lsr	a
         13:DB14  42         			say
         13:DB15  6A         			ror	a
13676                        		__st.wmq	_ax
         13:DB16  85 F8      			sta.l	_ax
         13:DB18  84 F9      			sty.h	_ax
13677                        		 _sgx_load_vram.3
         13:DB1A  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         13:DB1C  20 4F FF   			call	load_vram_x
13678                        	
13679                        		.dbg	line,	"include\init.c", 452; //--------------------------------------------------------------------------------------//
13680                        	
13681                        		.dbg	line,	"include\init.c", 453; //                               LOAD WALL & DOOR TILES                                 //
13682                        	
13683                        		.dbg	line,	"include\init.c", 454; //--------------------------------------------------------------------------------------//
13684                        	
13685                        		.dbg	line,	"include\init.c", 456; sgx_load_vram( LV1_WALL_VRAM_ADR, tileset_LV1_WALL, SIZEOF(tileset_LV1_WALL) >> 1 );
13686                        		__st.wmiq	4096, _di
         13:DB1F  64 F0      			stz.l	_di
         13:DB21  A9 10      			lda.h	#4096
         13:DB23  85 F1      			sta.h	_di
13687                        		__farptr	_tileset_LV1_WALL, _bp_bank, _bp
         13:DB25  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_LV1_WALL))
         13:DB27  85 EC      			sta.l	_bp
         13:DB29  A9 6C      			lda.h	#$6000 + ($1FFF & (_tileset_LV1_WALL))
         13:DB2B  85 ED      			sta.h	_bp
         13:DB2D  A9 03      			lda	#bank(_tileset_LV1_WALL)
         13:DB2F  85 02      			sta	_bp_bank
13688                        		__ld.wi		___sizeof__tileset_LV1_WALL
         13:DB31  A9 00      			lda.l	#___sizeof__tileset_LV1_WALL
         13:DB33  A0 02      			ldy.h	#___sizeof__tileset_LV1_WALL
13689                        		__lsr.wi	1
         13:DB35  42         			say
         13:DB36  4A         			lsr	a
         13:DB37  42         			say
         13:DB38  6A         			ror	a
13690                        		__st.wmq	_ax
         13:DB39  85 F8      			sta.l	_ax
         13:DB3B  84 F9      			sty.h	_ax
13691                        		 _sgx_load_vram.3
         13:DB3D  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         13:DB3F  20 4F FF   			call	load_vram_x
13692                        	
13693                        		.dbg	line,	"include\init.c", 457; sgx_load_vram( LV1_DOOR_VRAM_ADR, tileset_LV1_DOOR_OPEN, SIZEOF(tileset_LV1_DOOR_OPEN) >> 1 );
13694                        		__st.wmiq	4352, _di
         13:DB42  64 F0      			stz.l	_di
         13:DB44  A9 11      			lda.h	#4352
         13:DB46  85 F1      			sta.h	_di
13695                        		__farptr	_tileset_LV1_DOOR_OPEN, _bp_bank, _bp
         13:DB48  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_LV1_DOOR_OPEN))
         13:DB4A  85 EC      			sta.l	_bp
         13:DB4C  A9 6E      			lda.h	#$6000 + ($1FFF & (_tileset_LV1_DOOR_OPEN))
         13:DB4E  85 ED      			sta.h	_bp
         13:DB50  A9 03      			lda	#bank(_tileset_LV1_DOOR_OPEN)
         13:DB52  85 02      			sta	_bp_bank
13696                        		__ld.wi		___sizeof__tileset_LV1_DOOR_OPEN
         13:DB54  A9 00      			lda.l	#___sizeof__tileset_LV1_DOOR_OPEN
         13:DB56  A0 03      			ldy.h	#___sizeof__tileset_LV1_DOOR_OPEN
13697                        		__lsr.wi	1
         13:DB58  42         			say
         13:DB59  4A         			lsr	a
         13:DB5A  42         			say
         13:DB5B  6A         			ror	a
13698                        		__st.wmq	_ax
         13:DB5C  85 F8      			sta.l	_ax
         13:DB5E  84 F9      			sty.h	_ax
13699                        		 _sgx_load_vram.3
         13:DB60  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         13:DB62  20 4F FF   			call	load_vram_x
13700                        	
13701                        		.dbg	line,	"include\init.c", 460; //--------------------------------------------------------------------------------------//
13702                        	
13703                        		.dbg	line,	"include\init.c", 461; //                                     SET MULTIMAP                                     //
13704                        	
13705                        		.dbg	line,	"include\init.c", 462; //--------------------------------------------------------------------------------------//
13706                        	
13707                        		.dbg	line,	"include\init.c", 464; // multimap is 5 screens wide //
13708                        	
13709                        		.dbg	line,	"include\init.c", 465; sgx_set_multimap( multimap_LV1_BG_B , 5 );
13710                        		__farptr	_multimap_LV1_BG_B, sgx_scr_bank, sgx_scr_addr
         13:DB65  A9 00      			lda.l	#$6000 + ($1FFF & (_multimap_LV1_BG_B))
         13:DB67  8D CD 2B   			sta.l	sgx_scr_addr
         13:DB6A  A9 79      			lda.h	#$6000 + ($1FFF & (_multimap_LV1_BG_B))
         13:DB6C  8D CE 2B   			sta.h	sgx_scr_addr
         13:DB6F  A9 09      			lda	#bank(_multimap_LV1_BG_B)
         13:DB71  8D CF 2B   			sta	sgx_scr_bank
13711                        		__st.umiq	5, sgx_map_scrn_w
         13:DB74  A9 05      			lda.l	#5
         13:DB76  8D 8E 26   			sta	sgx_map_scrn_w
13712                        		 _sgx_set_multimap.2
         13:DB79  AD 86 26   			lda	sgx_bat_width
         13:DB7C  4A         			lsr	a
         13:DB7D  8D 8D 26   			sta	sgx_map_line_w
13713                        	
13714                        		.dbg	line,	"include\init.c", 468; //--------------------------------------------------------------------------------------//
13715                        	
13716                        		.dbg	line,	"include\init.c", 469; //                                    DRAW TILEMAP                                      //
13717                        	
13718                        		.dbg	line,	"include\init.c", 470; //--------------------------------------------------------------------------------------//
13719                        	
13720                        		.dbg	line,	"include\init.c", 472; // The blkmap is drawn using global variables for the top-left coordinate
13721                        	
13722                        		.dbg	line,	"include\init.c", 473; // in pixels, and the draw width and height in terms of 8x8 characters.
13723                        	
13724                        		.dbg	line,	"include\init.c", 475; if(respawn == FALSE)
13725                        		__not.um	_respawn
         13:DB80  AD 14 23   			lda	_respawn
         13:DB83  18         			clc
         13:DB84  D0 01      			bne	!+
         13:DB86  38         			sec
         13:DB87             	!:
13726                        		__bfalse	.LL593
         13:DB87  90 12      			bcc	.LL593
13727                        	
13728                        		.dbg	line,	"include\init.c", 476; {
13729                        	
13730                        		.dbg	line,	"include\init.c", 477; sgx_map_pxl_x = 96;
13731                        		__st.wmiq	96, _sgx_map_pxl_x
         13:DB89  A9 60      			lda.l	#96
         13:DB8B  8D 8F 26   			sta.l	_sgx_map_pxl_x
         13:DB8E  9C 90 26   			stz.h	_sgx_map_pxl_x
13732                        	
13733                        		.dbg	line,	"include\init.c", 478; sgx_map_pxl_y = 768;
13734                        		__st.wmiq	768, _sgx_map_pxl_y
         13:DB91  9C 91 26   			stz.l	_sgx_map_pxl_y
         13:DB94  A9 03      			lda.h	#768
         13:DB96  8D 92 26   			sta.h	_sgx_map_pxl_y
13735                        	
13736                        		.dbg	line,	"include\init.c", 479; }
13737                        	
13738                        		.dbg	line,	"include\init.c", 481; else if(respawn == RESPAWN_SHOP)
13739                        		__bra		.LL594
         13:DB99  80 22      			bra	.LL594
13740    13:DB9B             	.LL593:
13741                        		__ld.umq	_respawn
         13:DB9B  AD 14 23   			lda	_respawn
13742                        		__equ_b.uiq	2
         13:DB9E  C9 02      			cmp	#2
         13:DBA0  F0 01      			beq	!+
         13:DBA2  18         			clc
         13:DBA3             	!:
13743                        		__bfalse	.LL595
         13:DBA3  90 18      			bcc	.LL595
13744                        	
13745                        		.dbg	line,	"include\init.c", 482; {
13746                        	
13747                        		.dbg	line,	"include\init.c", 483; sgx_map_pxl_x = camera_pos_x_backup;
13748                        		__ld.wm		_camera_pos_x_backup
         13:DBA5  AD D9 24   			lda.l	_camera_pos_x_backup
         13:DBA8  AC DA 24   			ldy.h	_camera_pos_x_backup
13749                        		__st.wmq	_sgx_map_pxl_x
         13:DBAB  8D 8F 26   			sta.l	_sgx_map_pxl_x
         13:DBAE  8C 90 26   			sty.h	_sgx_map_pxl_x
13750                        	
13751                        		.dbg	line,	"include\init.c", 484; sgx_map_pxl_y = camera_pos_y_backup;
13752                        		__ld.wm		_camera_pos_y_backup
         13:DBB1  AD DB 24   			lda.l	_camera_pos_y_backup
         13:DBB4  AC DC 24   			ldy.h	_camera_pos_y_backup
13753                        		__st.wmq	_sgx_map_pxl_y
         13:DBB7  8D 91 26   			sta.l	_sgx_map_pxl_y
         13:DBBA  8C 92 26   			sty.h	_sgx_map_pxl_y
13754                        	
13755                        		.dbg	line,	"include\init.c", 485; }
13756                        	
13757                        		.dbg	line,	"include\init.c", 488; sgx_map_draw_w = 63;
13758    13:DBBD             	.LL595:
13759    13:DBBD             	.LL594:
13760                        		__st.umiq	63, _sgx_map_draw_w
         13:DBBD  A9 3F      			lda.l	#63
         13:DBBF  8D 8B 26   			sta	_sgx_map_draw_w
13761                        	
13762                        		.dbg	line,	"include\init.c", 489; sgx_map_draw_h = 29;
13763                        		__st.umiq	29, _sgx_map_draw_h
         13:DBC2  A9 1D      			lda.l	#29
         13:DBC4  8D 8C 26   			sta	_sgx_map_draw_h
13764                        	
13765                        		.dbg	line,	"include\init.c", 491; sgx_draw_map();
13766                        		__call		_sgx_draw_map
         13:DBC7  20 FF FE   			call	_sgx_draw_map
13767                        	
13768                        		.dbg	line,	"include\init.c", 496; //**************************************************************************************//
13769                        	
13770                        		.dbg	line,	"include\init.c", 497; //                                                                                      //
13771                        	
13772                        		.dbg	line,	"include\init.c", 498; //                                         HUD                                          //
13773                        	
13774                        		.dbg	line,	"include\init.c", 499; //                                                                                      //
13775                        	
13776                        		.dbg	line,	"include\init.c", 500; //**************************************************************************************//
13777                        	
13778                        		.dbg	line,	"include\init.c", 502; init_HUD();
13779                        		__call		_init_HUD
         13:DBCA  20 F5 FE   			call	_init_HUD
13780                        	
13781                        		.dbg	line,	"include\init.c", 507; //**************************************************************************************//
13782                        	
13783                        		.dbg	line,	"include\init.c", 508; //                                                                                      //
13784                        	
13785                        		.dbg	line,	"include\init.c", 509; //                                  SETUP SCROLL_SPLIT                                  //
13786                        	
13787                        		.dbg	line,	"include\init.c", 510; //                                                                                      //
13788                        	
13789                        		.dbg	line,	"include\init.c", 511; //**************************************************************************************//
13790                        	
13791                        		.dbg	line,	"include\init.c", 513; //--------------------------------------------------------------------------------------//
13792                        	
13793                        		.dbg	line,	"include\init.c", 514; //                                        VDC 2                                         //
13794                        	
13795                        		.dbg	line,	"include\init.c", 515; //--------------------------------------------------------------------------------------//
13796                        	
13797                        		.dbg	line,	"include\init.c", 517; sgx_scroll_map();
13798                        		__call		_sgx_scroll_map
         13:DBCD  20 81 FF   			call	_sgx_scroll_map
13799                        	
13800                        		.dbg	line,	"include\init.c", 519; sgx_scroll_split(0,   0, sgx_map_pxl_x & (BAT_SIZE_W - 1), sgx_map_pxl_y & (BAT_SIZE_H - 1), BKG_ON | SPR_ON);
13801                        		__st.umiq	0, _al
         13:DBD0  64 F8      			stz	_al
13802                        		__st.umiq	0, _ah
         13:DBD2  64 F9      			stz	_ah
13803                        		__ld.wm		_sgx_map_pxl_x
         13:DBD4  AD 8F 26   			lda.l	_sgx_map_pxl_x
         13:DBD7  AC 90 26   			ldy.h	_sgx_map_pxl_x
13804                        		__and.wi	2047
         13:DBDA  29 FF      			and.l	#2047
         13:DBDC  42         			say
         13:DBDD  29 07      			and.h	#2047
         13:DBDF  42         			say
13805                        		__st.wmq	_bx
         13:DBE0  85 FA      			sta.l	_bx
         13:DBE2  84 FB      			sty.h	_bx
13806                        		__ld.wm		_sgx_map_pxl_y
         13:DBE4  AD 91 26   			lda.l	_sgx_map_pxl_y
         13:DBE7  AC 92 26   			ldy.h	_sgx_map_pxl_y
13807                        		__and.wi	255
         13:DBEA  29 FF      			and	#255
         13:DBEC  C2         			cly
13808                        		__st.wmq	_cx
         13:DBED  85 FC      			sta.l	_cx
         13:DBEF  84 FD      			sty.h	_cx
13809                        		__st.umiq	192, _dl
         13:DBF1  A9 C0      			lda.l	#192
         13:DBF3  85 FE      			sta	_dl
13810                        		__call		_sgx_scroll_split.5
         13:DBF5  20 77 FF   			call	_sgx_scroll_split.5
13811                        	
13812                        		.dbg	line,	"include\init.c", 524; //--------------------------------------------------------------------------------------//
13813                        	
13814                        		.dbg	line,	"include\init.c", 525; //                                   LOAD BG PALETTES                                   //
13815                        	
13816                        		.dbg	line,	"include\init.c", 526; //--------------------------------------------------------------------------------------//
13817                        	
13818                        		.dbg	line,	"include\init.c", 528; // LOAD ALL PALETTES AT BG PALETTE 0 //
13819                        	
13820                        		.dbg	line,	"include\init.c", 529; load_palette( 0, palette_LV1, 16 );
13821                        		__st.umiq	0, _al
         13:DBF8  64 F8      			stz	_al
13822                        		__farptr	_palette_LV1, _bp_bank, _bp
         13:DBFA  A9 A0      			lda.l	#$6000 + ($1FFF & (_palette_LV1))
         13:DBFC  85 EC      			sta.l	_bp
         13:DBFE  A9 78      			lda.h	#$6000 + ($1FFF & (_palette_LV1))
         13:DC00  85 ED      			sta.h	_bp
         13:DC02  A9 0B      			lda	#bank(_palette_LV1)
         13:DC04  85 02      			sta	_bp_bank
13823                        		__st.umiq	16, _ah
         13:DC06  A9 10      			lda.l	#16
         13:DC08  85 F9      			sta	_ah
13824                        		__call		_load_palette.3
         13:DC0A  20 EB FE   			call	_load_palette.3
13825                        	
13826                        		.dbg	line,	"include\init.c", 534; //**************************************************************************************//
13827                        	
13828                        		.dbg	line,	"include\init.c", 535; //                                                                                      //
13829                        	
13830                        		.dbg	line,	"include\init.c", 536; //                                       SPRITES                                        //
13831                        	
13832                        		.dbg	line,	"include\init.c", 537; //                                                                                      //
13833                        	
13834                        		.dbg	line,	"include\init.c", 538; //**************************************************************************************//
13835                        	
13836                        		.dbg	line,	"include\init.c", 540; //--------------------------------------------------------------------------------------//
13837                        	
13838                        		.dbg	line,	"include\init.c", 541; //                                        PLAYER                                        //
13839                        	
13840                        		.dbg	line,	"include\init.c", 542; //--------------------------------------------------------------------------------------//
13841                        	
13842                        		.dbg	line,	"include\init.c", 544; // LOAD ALL PLAYER TILES //
13843                        	
13844                        		.dbg	line,	"include\init.c", 545; set_far_base(TABLE_PLAYER_TILES_BANK[player_naked],TABLE_PLAYER_TILES_ADR[player_naked]);
13845                        		__ldx.umq	_player_naked
         13:DC0D  AE 1D 23   			ldx	_player_naked
13846                        		__ld.uax	_TABLE_PLAYER_TILES_BANK
         13:DC10  BD F7 60   			lda	_TABLE_PLAYER_TILES_BANK, x
         13:DC13  C2         			cly
13847                        		__st.umq	_bp_bank
         13:DC14  85 02      			sta	_bp_bank
13848                        		__ld2x.umq	_player_naked
         13:DC16  AD 1D 23   			lda	_player_naked
         13:DC19  0A         			asl	a
         13:DC1A  AA         			tax
13849                        		__ld.wax	_TABLE_PLAYER_TILES_ADR
         13:DC1B  BD F3 60   			lda.l	_TABLE_PLAYER_TILES_ADR, x
         13:DC1E  BC F4 60   			ldy.h	_TABLE_PLAYER_TILES_ADR, x
13850                        		__st.wmq	_bp
         13:DC21  85 EC      			sta.l	_bp
         13:DC23  84 ED      			sty.h	_bp
13851                        	
13852                        		.dbg	line,	"include\init.c", 546; far_load_vram(PLAYER_VRAM_ADR,TILES_352);
13853                        		__st.wmiq	5632, _di
         13:DC25  64 F0      			stz.l	_di
         13:DC27  A9 16      			lda.h	#5632
         13:DC29  85 F1      			sta.h	_di
13854                        		__st.wmiq	5632, _ax
         13:DC2B  64 F8      			stz.l	_ax
         13:DC2D  A9 16      			lda.h	#5632
         13:DC2F  85 F9      			sta.h	_ax
13855                        		 _far_load_vram.2
         13:DC31  82         			clx				; Offset to PCE VDC.
         13:DC32  20 4F FF   			call	load_vram_x
13856                        	
13857                        		.dbg	line,	"include\init.c", 549; // SELECT PLAYER CORE SPRITE //
13858                        	
13859                        		.dbg	line,	"include\init.c", 550; spr_set(player_id); // PLAYER_START_INDEX
13860                        		__ld.umq	_player_id
         13:DC35  AD 15 23   			lda	_player_id
13861                        		__call		_spr_set.1
         13:DC38  20 DD E7   			call	_spr_set.1
13862                        	
13863                        		.dbg	line,	"include\init.c", 553; player_pos_x = 112;
13864                        		__st.wmiq	112, _player_pos_x
         13:DC3B  A9 70      			lda.l	#112
         13:DC3D  8D D3 24   			sta.l	_player_pos_x
         13:DC40  9C D4 24   			stz.h	_player_pos_x
13865                        	
13866                        		.dbg	line,	"include\init.c", 554; player_pos_y = PLAYER_BASE_Y_POS;
13867                        		__st.wmiq	128, _player_pos_y
         13:DC43  A9 80      			lda.l	#128
         13:DC45  8D D5 24   			sta.l	_player_pos_y
         13:DC48  9C D6 24   			stz.h	_player_pos_y
13868                        	
13869                        		.dbg	line,	"include\init.c", 557; spr_x(player_pos_x);
13870                        		__ld.wm		_player_pos_x
         13:DC4B  AD D3 24   			lda.l	_player_pos_x
         13:DC4E  AC D4 24   			ldy.h	_player_pos_x
13871                        		__call		_spr_x.1
         13:DC51  20 0A E8   			call	_spr_x.1
13872                        	
13873                        		.dbg	line,	"include\init.c", 558; spr_y(player_pos_y);
13874                        		__ld.wm		_player_pos_y
         13:DC54  AD D5 24   			lda.l	_player_pos_y
         13:DC57  AC D6 24   			ldy.h	_player_pos_y
13875                        		__call		_spr_y.1
         13:DC5A  20 19 E8   			call	_spr_y.1
13876                        	
13877                        		.dbg	line,	"include\init.c", 560; // SET TILES DATA FOR THE PLAYER //
13878                        	
13879                        		.dbg	line,	"include\init.c", 561; spr_pattern(PLAYER_VRAM_ADR);
13880                        		__ld.wi		5632
         13:DC5D  62         			cla
         13:DC5E  A0 16      			ldy.h	#5632
13881                        		__call		_spr_pattern.1
         13:DC60  20 26 E8   			call	_spr_pattern.1
13882                        	
13883                        		.dbg	line,	"include\init.c", 563; // SET SPRITE FLIP //
13884                        	
13885                        		.dbg	line,	"include\init.c", 564; spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_32x32);
13886                        		__st.umiq	185, _al
         13:DC63  A9 B9      			lda.l	#185
         13:DC65  85 F8      			sta	_al
13887                        		__ld.uiq	17
         13:DC67  A9 11      			lda	#17
13888                        		__call		_spr_ctrl.2
         13:DC69  20 3C E8   			call	_spr_ctrl.2
13889                        	
13890                        		.dbg	line,	"include\init.c", 566; 
13891                        	
13892                        		.dbg	line,	"include\init.c", 569; spr_pal(0);
13893                        		__ld.uiq	0
         13:DC6C  62         			cla
13894                        		__call		_spr_pal.1
         13:DC6D  20 4D E8   			call	_spr_pal.1
13895                        	
13896                        		.dbg	line,	"include\init.c", 570; spr_pri(TRUE);
13897                        		__ld.uiq	1
         13:DC70  A9 01      			lda	#1
13898                        		__call		_spr_pri.1
         13:DC72  20 5C E8   			call	_spr_pri.1
13899                        	
13900                        		.dbg	line,	"include\init.c", 573; //--------------------------------------------------------------------------------------//
13901                        	
13902                        		.dbg	line,	"include\init.c", 574; //                                        CHAIN                                         //
13903                        	
13904                        		.dbg	line,	"include\init.c", 575; //--------------------------------------------------------------------------------------//
13905                        	
13906                        		.dbg	line,	"include\init.c", 577; load_vram(CHAIN_VRAM_ADR, tiles_SPR_CHAIN , TILES_4);
13907                        		__st.wmiq	5120, _di
         13:DC75  64 F0      			stz.l	_di
         13:DC77  A9 14      			lda.h	#5120
         13:DC79  85 F1      			sta.h	_di
13908                        		__farptr	_tiles_SPR_CHAIN, _bp_bank, _bp
         13:DC7B  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_CHAIN))
         13:DC7D  85 EC      			sta.l	_bp
         13:DC7F  A9 75      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_CHAIN))
         13:DC81  85 ED      			sta.h	_bp
         13:DC83  A9 11      			lda	#bank(_tiles_SPR_CHAIN)
         13:DC85  85 02      			sta	_bp_bank
13909                        		__st.wmiq	64, _ax
         13:DC87  A9 40      			lda.l	#64
         13:DC89  85 F8      			sta.l	_ax
         13:DC8B  64 F9      			stz.h	_ax
13910                        		 _load_vram.3
         13:DC8D  82         			clx				; Offset to PCE VDC.
         13:DC8E  20 4F FF   			call	load_vram_x
13911                        	
13912                        		.dbg	line,	"include\init.c", 579; for(i=0 ; i<3 ; i++)
13913                        		__st.umiq	0, __init_LEVEL_end - 1  /* i */
         13:DC91  9C 0E 23   			stz	__init_LEVEL_end - 1
13914    13:DC94             	.LL596:
13915                        		__ld.umq	__init_LEVEL_end - 1  /* i */
         13:DC94  AD 0E 23   			lda	__init_LEVEL_end - 1
13916                        		__ult_b.uiq	3
         13:DC97  C9 03      			cmp	#3		; Subtract integer from A.
         13:DC99  6A         			ror	a		; CC if A < integer.
         13:DC9A  49 80      			eor	#$80
         13:DC9C  2A         			rol	a
13917                        		__btrue		.LL598
         13:DC9D  B0 07      			bcs	.LL598
13918                        		__bra		.LL599
         13:DC9F  80 2F      			bra	.LL599
13919    13:DCA1             	.LL597:
13920                        		__inc.umq	__init_LEVEL_end - 1  /* i */
         13:DCA1  EE 0E 23   			inc	__init_LEVEL_end - 1
13921                        		__bra		.LL596
         13:DCA4  80 EE      			bra	.LL596
13922    13:DCA6             	.LL598:
13923                        	
13924                        		.dbg	line,	"include\init.c", 580; {
13925                        	
13926                        		.dbg	line,	"include\init.c", 581; spr_set(chain_id+i);
13927                        		__ld.um		_chain_id
         13:DCA6  AD 22 23   			lda	_chain_id
         13:DCA9  C2         			cly
13928                        		__add.um	__init_LEVEL_end - 1  /* i */
         13:DCAA  18         			clc
         13:DCAB  6D 0E 23   			adc	__init_LEVEL_end - 1
         13:DCAE  90 01      			bcc	!+
         13:DCB0  C8         			iny
         13:DCB1             	!:
13929                        		__call		_spr_set.1
         13:DCB1  20 DD E7   			call	_spr_set.1
13930                        	
13931                        		.dbg	line,	"include\init.c", 582; spr_pattern(CHAIN_VRAM_ADR);
13932                        		__ld.wi		5120
         13:DCB4  62         			cla
         13:DCB5  A0 14      			ldy.h	#5120
13933                        		__call		_spr_pattern.1
         13:DCB7  20 26 E8   			call	_spr_pattern.1
13934                        	
13935                        		.dbg	line,	"include\init.c", 583; spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_16x16);
13936                        		__st.umiq	185, _al
         13:DCBA  A9 B9      			lda.l	#185
         13:DCBC  85 F8      			sta	_al
13937                        		__ld.uiq	0
         13:DCBE  62         			cla
13938                        		__call		_spr_ctrl.2
         13:DCBF  20 3C E8   			call	_spr_ctrl.2
13939                        	
13940                        		.dbg	line,	"include\init.c", 584; spr_hide();
13941                        		__call		_spr_hide
         13:DCC2  20 F8 E7   			call	_spr_hide
13942                        	
13943                        		.dbg	line,	"include\init.c", 586; spr_pal(0);
13944                        		__ld.uiq	0
         13:DCC5  62         			cla
13945                        		__call		_spr_pal.1
         13:DCC6  20 4D E8   			call	_spr_pal.1
13946                        	
13947                        		.dbg	line,	"include\init.c", 587; spr_pri(TRUE);
13948                        		__ld.uiq	1
         13:DCC9  A9 01      			lda	#1
13949                        		__call		_spr_pri.1
         13:DCCB  20 5C E8   			call	_spr_pri.1
13950                        	
13951                        		.dbg	line,	"include\init.c", 588; }
13952                        		__bra		.LL597
         13:DCCE  80 D1      			bra	.LL597
13953    13:DCD0             	.LL599:
13954                        	
13955                        		.dbg	line,	"include\init.c", 589; 
13956                        	
13957                        		.dbg	line,	"include\init.c", 591; //--------------------------------------------------------------------------------------//
13958                        	
13959                        		.dbg	line,	"include\init.c", 592; //                                        WEAPON                                        //
13960                        	
13961                        		.dbg	line,	"include\init.c", 593; //--------------------------------------------------------------------------------------//
13962                        	
13963                        		.dbg	line,	"include\init.c", 595; if(weapon_level == 0)
13964                        		__not.um	_weapon_level
         13:DCD0  AD 25 23   			lda	_weapon_level
         13:DCD3  18         			clc
         13:DCD4  D0 01      			bne	!+
         13:DCD6  38         			sec
         13:DCD7             	!:
13965                        		__bfalse	.LL600
         13:DCD7  90 27      			bcc	.LL600
13966                        	
13967                        		.dbg	line,	"include\init.c", 596; {
13968                        	
13969                        		.dbg	line,	"include\init.c", 597; load_vram(WEAPON_VRAM_ADR, tiles_SPR_WEAPON_0 , SIZEOF(tiles_SPR_WEAPON_0) >> 1);
13970                        		__st.wmiq	5184, _di
         13:DCD9  A9 40      			lda.l	#5184
         13:DCDB  85 F0      			sta.l	_di
         13:DCDD  A9 14      			lda.h	#5184
         13:DCDF  85 F1      			sta.h	_di
13971                        		__farptr	_tiles_SPR_WEAPON_0, _bp_bank, _bp
         13:DCE1  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_0))
         13:DCE3  85 EC      			sta.l	_bp
         13:DCE5  A9 76      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_0))
         13:DCE7  85 ED      			sta.h	_bp
         13:DCE9  A9 11      			lda	#bank(_tiles_SPR_WEAPON_0)
         13:DCEB  85 02      			sta	_bp_bank
13972                        		__ld.wi		___sizeof__tiles_SPR_WEAPON_0
         13:DCED  A9 80      			lda.l	#___sizeof__tiles_SPR_WEAPON_0
         13:DCEF  A0 02      			ldy.h	#___sizeof__tiles_SPR_WEAPON_0
13973                        		__lsr.wi	1
         13:DCF1  42         			say
         13:DCF2  4A         			lsr	a
         13:DCF3  42         			say
         13:DCF4  6A         			ror	a
13974                        		__st.wmq	_ax
         13:DCF5  85 F8      			sta.l	_ax
         13:DCF7  84 F9      			sty.h	_ax
13975                        		 _load_vram.3
         13:DCF9  82         			clx				; Offset to PCE VDC.
         13:DCFA  20 4F FF   			call	load_vram_x
13976                        	
13977                        		.dbg	line,	"include\init.c", 598; }
13978                        	
13979                        		.dbg	line,	"include\init.c", 600; else if(weapon_level == 1)
13980                        		__bra		.LL601
         13:DCFD  4C BF DD   			bra	.LL601
13981    13:DD00             	.LL600:
13982                        		__ld.umq	_weapon_level
         13:DD00  AD 25 23   			lda	_weapon_level
13983                        		__equ_b.uiq	1
         13:DD03  C9 01      			cmp	#1
         13:DD05  F0 01      			beq	!+
         13:DD07  18         			clc
         13:DD08             	!:
13984                        		__bfalse	.LL602
         13:DD08  90 27      			bcc	.LL602
13985                        	
13986                        		.dbg	line,	"include\init.c", 601; {
13987                        	
13988                        		.dbg	line,	"include\init.c", 602; load_vram(WEAPON_VRAM_ADR, tiles_SPR_WEAPON_1 , SIZEOF(tiles_SPR_WEAPON_1) >> 1);
13989                        		__st.wmiq	5184, _di
         13:DD0A  A9 40      			lda.l	#5184
         13:DD0C  85 F0      			sta.l	_di
         13:DD0E  A9 14      			lda.h	#5184
         13:DD10  85 F1      			sta.h	_di
13990                        		__farptr	_tiles_SPR_WEAPON_1, _bp_bank, _bp
         13:DD12  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_1))
         13:DD14  85 EC      			sta.l	_bp
         13:DD16  A9 78      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_1))
         13:DD18  85 ED      			sta.h	_bp
         13:DD1A  A9 11      			lda	#bank(_tiles_SPR_WEAPON_1)
         13:DD1C  85 02      			sta	_bp_bank
13991                        		__ld.wi		___sizeof__tiles_SPR_WEAPON_1
         13:DD1E  A9 80      			lda.l	#___sizeof__tiles_SPR_WEAPON_1
         13:DD20  A0 02      			ldy.h	#___sizeof__tiles_SPR_WEAPON_1
13992                        		__lsr.wi	1
         13:DD22  42         			say
         13:DD23  4A         			lsr	a
         13:DD24  42         			say
         13:DD25  6A         			ror	a
13993                        		__st.wmq	_ax
         13:DD26  85 F8      			sta.l	_ax
         13:DD28  84 F9      			sty.h	_ax
13994                        		 _load_vram.3
         13:DD2A  82         			clx				; Offset to PCE VDC.
         13:DD2B  20 4F FF   			call	load_vram_x
13995                        	
13996                        		.dbg	line,	"include\init.c", 603; }
13997                        	
13998                        		.dbg	line,	"include\init.c", 605; else if(weapon_level == 2)
13999                        		__bra		.LL603
         13:DD2E  4C BF DD   			bra	.LL603
14000    13:DD31             	.LL602:
14001                        		__ld.umq	_weapon_level
         13:DD31  AD 25 23   			lda	_weapon_level
14002                        		__equ_b.uiq	2
         13:DD34  C9 02      			cmp	#2
         13:DD36  F0 01      			beq	!+
         13:DD38  18         			clc
         13:DD39             	!:
14003                        		__bfalse	.LL604
         13:DD39  90 26      			bcc	.LL604
14004                        	
14005                        		.dbg	line,	"include\init.c", 606; {
14006                        	
14007                        		.dbg	line,	"include\init.c", 607; load_vram(WEAPON_VRAM_ADR, tiles_SPR_WEAPON_2 , SIZEOF(tiles_SPR_WEAPON_2) >> 1);
14008                        		__st.wmiq	5184, _di
         13:DD3B  A9 40      			lda.l	#5184
         13:DD3D  85 F0      			sta.l	_di
         13:DD3F  A9 14      			lda.h	#5184
         13:DD41  85 F1      			sta.h	_di
14009                        		__farptr	_tiles_SPR_WEAPON_2, _bp_bank, _bp
         13:DD43  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_2))
         13:DD45  85 EC      			sta.l	_bp
         13:DD47  A9 7B      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_2))
         13:DD49  85 ED      			sta.h	_bp
         13:DD4B  A9 11      			lda	#bank(_tiles_SPR_WEAPON_2)
         13:DD4D  85 02      			sta	_bp_bank
14010                        		__ld.wi		___sizeof__tiles_SPR_WEAPON_2
         13:DD4F  A9 80      			lda.l	#___sizeof__tiles_SPR_WEAPON_2
         13:DD51  A0 02      			ldy.h	#___sizeof__tiles_SPR_WEAPON_2
14011                        		__lsr.wi	1
         13:DD53  42         			say
         13:DD54  4A         			lsr	a
         13:DD55  42         			say
         13:DD56  6A         			ror	a
14012                        		__st.wmq	_ax
         13:DD57  85 F8      			sta.l	_ax
         13:DD59  84 F9      			sty.h	_ax
14013                        		 _load_vram.3
         13:DD5B  82         			clx				; Offset to PCE VDC.
         13:DD5C  20 4F FF   			call	load_vram_x
14014                        	
14015                        		.dbg	line,	"include\init.c", 608; }
14016                        	
14017                        		.dbg	line,	"include\init.c", 610; else if(weapon_level == 3)
14018                        		__bra		.LL605
         13:DD5F  80 5E      			bra	.LL605
14019    13:DD61             	.LL604:
14020                        		__ld.umq	_weapon_level
         13:DD61  AD 25 23   			lda	_weapon_level
14021                        		__equ_b.uiq	3
         13:DD64  C9 03      			cmp	#3
         13:DD66  F0 01      			beq	!+
         13:DD68  18         			clc
         13:DD69             	!:
14022                        		__bfalse	.LL606
         13:DD69  90 26      			bcc	.LL606
14023                        	
14024                        		.dbg	line,	"include\init.c", 611; {
14025                        	
14026                        		.dbg	line,	"include\init.c", 612; load_vram(WEAPON_VRAM_ADR, tiles_SPR_WEAPON_3 , SIZEOF(tiles_SPR_WEAPON_3) >> 1);
14027                        		__st.wmiq	5184, _di
         13:DD6B  A9 40      			lda.l	#5184
         13:DD6D  85 F0      			sta.l	_di
         13:DD6F  A9 14      			lda.h	#5184
         13:DD71  85 F1      			sta.h	_di
14028                        		__farptr	_tiles_SPR_WEAPON_3, _bp_bank, _bp
         13:DD73  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_3))
         13:DD75  85 EC      			sta.l	_bp
         13:DD77  A9 7D      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_3))
         13:DD79  85 ED      			sta.h	_bp
         13:DD7B  A9 11      			lda	#bank(_tiles_SPR_WEAPON_3)
         13:DD7D  85 02      			sta	_bp_bank
14029                        		__ld.wi		___sizeof__tiles_SPR_WEAPON_3
         13:DD7F  A9 80      			lda.l	#___sizeof__tiles_SPR_WEAPON_3
         13:DD81  A0 02      			ldy.h	#___sizeof__tiles_SPR_WEAPON_3
14030                        		__lsr.wi	1
         13:DD83  42         			say
         13:DD84  4A         			lsr	a
         13:DD85  42         			say
         13:DD86  6A         			ror	a
14031                        		__st.wmq	_ax
         13:DD87  85 F8      			sta.l	_ax
         13:DD89  84 F9      			sty.h	_ax
14032                        		 _load_vram.3
         13:DD8B  82         			clx				; Offset to PCE VDC.
         13:DD8C  20 4F FF   			call	load_vram_x
14033                        	
14034                        		.dbg	line,	"include\init.c", 613; }
14035                        	
14036                        		.dbg	line,	"include\init.c", 615; else if(weapon_level == 4)
14037                        		__bra		.LL607
         13:DD8F  80 2E      			bra	.LL607
14038    13:DD91             	.LL606:
14039                        		__ld.umq	_weapon_level
         13:DD91  AD 25 23   			lda	_weapon_level
14040                        		__equ_b.uiq	4
         13:DD94  C9 04      			cmp	#4
         13:DD96  F0 01      			beq	!+
         13:DD98  18         			clc
         13:DD99             	!:
14041                        		__bfalse	.LL608
         13:DD99  90 24      			bcc	.LL608
14042                        	
14043                        		.dbg	line,	"include\init.c", 616; {
14044                        	
14045                        		.dbg	line,	"include\init.c", 617; load_vram(WEAPON_VRAM_ADR, tiles_SPR_WEAPON_4 , SIZEOF(tiles_SPR_WEAPON_4) >> 1);
14046                        		__st.wmiq	5184, _di
         13:DD9B  A9 40      			lda.l	#5184
         13:DD9D  85 F0      			sta.l	_di
         13:DD9F  A9 14      			lda.h	#5184
         13:DDA1  85 F1      			sta.h	_di
14047                        		__farptr	_tiles_SPR_WEAPON_4, _bp_bank, _bp
         13:DDA3  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_4))
         13:DDA5  85 EC      			sta.l	_bp
         13:DDA7  A9 60      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_4))
         13:DDA9  85 ED      			sta.h	_bp
         13:DDAB  A9 12      			lda	#bank(_tiles_SPR_WEAPON_4)
         13:DDAD  85 02      			sta	_bp_bank
14048                        		__ld.wi		___sizeof__tiles_SPR_WEAPON_4
         13:DDAF  A9 80      			lda.l	#___sizeof__tiles_SPR_WEAPON_4
         13:DDB1  A0 02      			ldy.h	#___sizeof__tiles_SPR_WEAPON_4
14049                        		__lsr.wi	1
         13:DDB3  42         			say
         13:DDB4  4A         			lsr	a
         13:DDB5  42         			say
         13:DDB6  6A         			ror	a
14050                        		__st.wmq	_ax
         13:DDB7  85 F8      			sta.l	_ax
         13:DDB9  84 F9      			sty.h	_ax
14051                        		 _load_vram.3
         13:DDBB  82         			clx				; Offset to PCE VDC.
         13:DDBC  20 4F FF   			call	load_vram_x
14052                        	
14053                        		.dbg	line,	"include\init.c", 618; }		
14054                        	
14055                        		.dbg	line,	"include\init.c", 620; 
14056                        	
14057                        		.dbg	line,	"include\init.c", 621; weapon_id = chain_id-1;
14058    13:DDBF             	.LL608:
14059    13:DDBF             	.LL607:
14060    13:DDBF             	.LL605:
14061    13:DDBF             	.LL603:
14062    13:DDBF             	.LL601:
14063                        		__ld.um		_chain_id
         13:DDBF  AD 22 23   			lda	_chain_id
         13:DDC2  C2         			cly
14064                        		__sub.wi	1
         13:DDC3  38         			sec
         13:DDC4  E9 01      			sbc.l	#1
         13:DDC6  B0 01      			bcs	!+
         13:DDC8  88         			dey
         13:DDC9             	!:
14065                        		__st.umq	_weapon_id
         13:DDC9  8D 23 23   			sta	_weapon_id
14066                        	
14067                        		.dbg	line,	"include\init.c", 622; spr_set(weapon_id);
14068                        		__ld.umq	_weapon_id
         13:DDCC  AD 23 23   			lda	_weapon_id
14069                        		__call		_spr_set.1
         13:DDCF  20 DD E7   			call	_spr_set.1
14070                        	
14071                        		.dbg	line,	"include\init.c", 623; spr_pattern(WEAPON_VRAM_ADR);
14072                        		__ld.wi		5184
         13:DDD2  A9 40      			lda.l	#5184
         13:DDD4  A0 14      			ldy.h	#5184
14073                        		__call		_spr_pattern.1
         13:DDD6  20 26 E8   			call	_spr_pattern.1
14074                        	
14075                        		.dbg	line,	"include\init.c", 624; spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_16x16);
14076                        		__st.umiq	185, _al
         13:DDD9  A9 B9      			lda.l	#185
         13:DDDB  85 F8      			sta	_al
14077                        		__ld.uiq	0
         13:DDDD  62         			cla
14078                        		__call		_spr_ctrl.2
         13:DDDE  20 3C E8   			call	_spr_ctrl.2
14079                        	
14080                        		.dbg	line,	"include\init.c", 626; spr_x(player_pos_x+8);
14081                        		__ld.wm		_player_pos_x
         13:DDE1  AD D3 24   			lda.l	_player_pos_x
         13:DDE4  AC D4 24   			ldy.h	_player_pos_x
14082                        		__add.wi	8
         13:DDE7  18         			clc
         13:DDE8  69 08      			adc.l	#8
         13:DDEA  90 01      			bcc	!+
         13:DDEC  C8         			iny
         13:DDED             	!:
14083                        		__call		_spr_x.1
         13:DDED  20 0A E8   			call	_spr_x.1
14084                        	
14085                        		.dbg	line,	"include\init.c", 627; spr_y(player_pos_y+16);
14086                        		__ld.wm		_player_pos_y
         13:DDF0  AD D5 24   			lda.l	_player_pos_y
         13:DDF3  AC D6 24   			ldy.h	_player_pos_y
14087                        		__add.wi	16
         13:DDF6  18         			clc
         13:DDF7  69 10      			adc.l	#16
         13:DDF9  90 01      			bcc	!+
         13:DDFB  C8         			iny
         13:DDFC             	!:
14088                        		__call		_spr_y.1
         13:DDFC  20 19 E8   			call	_spr_y.1
14089                        	
14090                        		.dbg	line,	"include\init.c", 628; spr_pri(TRUE);
14091                        		__ld.uiq	1
         13:DDFF  A9 01      			lda	#1
14092                        		__call		_spr_pri.1
         13:DE01  20 5C E8   			call	_spr_pri.1
14093                        	
14094                        		.dbg	line,	"include\init.c", 630; // WEAPON 4 USES PAL2
14095                        	
14096                        		.dbg	line,	"include\init.c", 631; if(weapon_level == 4)
14097                        		__ld.umq	_weapon_level
         13:DE04  AD 25 23   			lda	_weapon_level
14098                        		__equ_b.uiq	4
         13:DE07  C9 04      			cmp	#4
         13:DE09  F0 01      			beq	!+
         13:DE0B  18         			clc
         13:DE0C             	!:
14099                        		__bfalse	.LL609
         13:DE0C  90 07      			bcc	.LL609
14100                        	
14101                        		.dbg	line,	"include\init.c", 632; {
14102                        	
14103                        		.dbg	line,	"include\init.c", 633; spr_pal(2);
14104                        		__ld.uiq	2
         13:DE0E  A9 02      			lda	#2
14105                        		__call		_spr_pal.1
         13:DE10  20 4D E8   			call	_spr_pal.1
14106                        	
14107                        		.dbg	line,	"include\init.c", 634; }
14108                        	
14109                        		.dbg	line,	"include\init.c", 635; // ALL OTHERS USE PAL0
14110                        	
14111                        		.dbg	line,	"include\init.c", 636; else
14112                        		__bra		.LL610
         13:DE13  80 04      			bra	.LL610
14113    13:DE15             	.LL609:
14114                        	
14115                        		.dbg	line,	"include\init.c", 637; {
14116                        	
14117                        		.dbg	line,	"include\init.c", 638; spr_pal(0);
14118                        		__ld.uiq	0
         13:DE15  62         			cla
14119                        		__call		_spr_pal.1
         13:DE16  20 4D E8   			call	_spr_pal.1
14120                        	
14121                        		.dbg	line,	"include\init.c", 639; }
14122    13:DE19             	.LL610:
14123                        	
14124                        		.dbg	line,	"include\init.c", 640; 
14125                        	
14126                        		.dbg	line,	"include\init.c", 641; 
14127                        	
14128                        		.dbg	line,	"include\init.c", 644; //--------------------------------------------------------------------------------------//
14129                        	
14130                        		.dbg	line,	"include\init.c", 645; //                                       OBJECTS                                        //
14131                        	
14132                        		.dbg	line,	"include\init.c", 646; //--------------------------------------------------------------------------------------//
14133                        	
14134                        		.dbg	line,	"include\init.c", 648; load_OBJECT_TILES();
14135                        		__call		_load_OBJECT_TILES
         13:DE19  20 E1 FE   			call	_load_OBJECT_TILES
14136                        	
14137                        		.dbg	line,	"include\init.c", 649; init_OBJECT_LV1();
14138                        		__call		_init_OBJECT_LV1
         13:DE1C  20 D7 FE   			call	_init_OBJECT_LV1
14139                        	
14140                        		.dbg	line,	"include\init.c", 650; scroll_object();
14141                        		__call		_scroll_object
         13:DE1F  20 CD FE   			call	_scroll_object
14142                        	
14143                        		.dbg	line,	"include\init.c", 653; //--------------------------------------------------------------------------------------//
14144                        	
14145                        		.dbg	line,	"include\init.c", 654; //                                        CHESTS                                        //
14146                        	
14147                        		.dbg	line,	"include\init.c", 655; //--------------------------------------------------------------------------------------//
14148                        	
14149                        		.dbg	line,	"include\init.c", 657; load_CHEST_TILES();
14150                        		__call		_load_CHEST_TILES
         13:DE22  20 C3 FE   			call	_load_CHEST_TILES
14151                        	
14152                        		.dbg	line,	"include\init.c", 658; init_CHEST_LV1();
14153                        		__call		_init_CHEST_LV1
         13:DE25  20 B9 FE   			call	_init_CHEST_LV1
14154                        	
14155                        		.dbg	line,	"include\init.c", 659; scroll_chest();
14156                        		__call		_scroll_chest
         13:DE28  20 AF FE   			call	_scroll_chest
14157                        	
14158                        		.dbg	line,	"include\init.c", 662; //--------------------------------------------------------------------------------------//
14159                        	
14160                        		.dbg	line,	"include\init.c", 663; //                                         NPCS                                         //
14161                        	
14162                        		.dbg	line,	"include\init.c", 664; //--------------------------------------------------------------------------------------//
14163                        	
14164                        		.dbg	line,	"include\init.c", 666; load_NPC_TILES();
14165                        		__call		_load_NPC_TILES
         13:DE2B  20 A5 FE   			call	_load_NPC_TILES
14166                        	
14167                        		.dbg	line,	"include\init.c", 667; init_NPC_LV1();
14168                        		__call		_init_NPC_LV1
         13:DE2E  20 9B FE   			call	_init_NPC_LV1
14169                        	
14170                        		.dbg	line,	"include\init.c", 672; // UPDATE PCE SAT //
14171                        	
14172                        		.dbg	line,	"include\init.c", 673; satb_update();
14173                        		__call		_satb_update
         13:DE31  20 91 FE   			call	_satb_update
14174                        	
14175                        		.dbg	line,	"include\init.c", 678; //--------------------------------------------------------------------------------------//
14176                        	
14177                        		.dbg	line,	"include\init.c", 679; //                                LOAD SPRITES PALETTES                                 //
14178                        	
14179                        		.dbg	line,	"include\init.c", 680; //--------------------------------------------------------------------------------------//
14180                        	
14181                        		.dbg	line,	"include\init.c", 682; if(armor_level == 8)
14182                        		__ld.umq	_armor_level
         13:DE34  AD 24 23   			lda	_armor_level
14183                        		__equ_b.uiq	8
         13:DE37  C9 08      			cmp	#8
         13:DE39  F0 01      			beq	!+
         13:DE3B  18         			clc
         13:DE3C             	!:
14184                        		__bfalse	.LL611
         13:DE3C  90 19      			bcc	.LL611
14185                        	
14186                        		.dbg	line,	"include\init.c", 683; {
14187                        	
14188                        		.dbg	line,	"include\init.c", 684; load_palette( 16, palette_PLAYER_8, 1 );
14189                        		__st.umiq	16, _al
         13:DE3E  A9 10      			lda.l	#16
         13:DE40  85 F8      			sta	_al
14190                        		__farptr	_palette_PLAYER_8, _bp_bank, _bp
         13:DE42  A9 E0      			lda.l	#$6000 + ($1FFF & (_palette_PLAYER_8))
         13:DE44  85 EC      			sta.l	_bp
         13:DE46  A9 73      			lda.h	#$6000 + ($1FFF & (_palette_PLAYER_8))
         13:DE48  85 ED      			sta.h	_bp
         13:DE4A  A9 11      			lda	#bank(_palette_PLAYER_8)
         13:DE4C  85 02      			sta	_bp_bank
14191                        		__st.umiq	1, _ah
         13:DE4E  A9 01      			lda.l	#1
         13:DE50  85 F9      			sta	_ah
14192                        		__call		_load_palette.3
         13:DE52  20 EB FE   			call	_load_palette.3
14193                        	
14194                        		.dbg	line,	"include\init.c", 685; }
14195                        	
14196                        		.dbg	line,	"include\init.c", 687; else if(armor_level == 5)
14197                        		__bra		.LL612
         13:DE55  80 5D      			bra	.LL612
14198    13:DE57             	.LL611:
14199                        		__ld.umq	_armor_level
         13:DE57  AD 24 23   			lda	_armor_level
14200                        		__equ_b.uiq	5
         13:DE5A  C9 05      			cmp	#5
         13:DE5C  F0 01      			beq	!+
         13:DE5E  18         			clc
         13:DE5F             	!:
14201                        		__bfalse	.LL613
         13:DE5F  90 19      			bcc	.LL613
14202                        	
14203                        		.dbg	line,	"include\init.c", 688; {
14204                        	
14205                        		.dbg	line,	"include\init.c", 689; load_palette( 16, palette_PLAYER_5, 1 );
14206                        		__st.umiq	16, _al
         13:DE61  A9 10      			lda.l	#16
         13:DE63  85 F8      			sta	_al
14207                        		__farptr	_palette_PLAYER_5, _bp_bank, _bp
         13:DE65  A9 E0      			lda.l	#$6000 + ($1FFF & (_palette_PLAYER_5))
         13:DE67  85 EC      			sta.l	_bp
         13:DE69  A9 71      			lda.h	#$6000 + ($1FFF & (_palette_PLAYER_5))
         13:DE6B  85 ED      			sta.h	_bp
         13:DE6D  A9 11      			lda	#bank(_palette_PLAYER_5)
         13:DE6F  85 02      			sta	_bp_bank
14208                        		__st.umiq	1, _ah
         13:DE71  A9 01      			lda.l	#1
         13:DE73  85 F9      			sta	_ah
14209                        		__call		_load_palette.3
         13:DE75  20 EB FE   			call	_load_palette.3
14210                        	
14211                        		.dbg	line,	"include\init.c", 690; }
14212                        	
14213                        		.dbg	line,	"include\init.c", 692; else if(armor_level == 4)
14214                        		__bra		.LL614
         13:DE78  80 3A      			bra	.LL614
14215    13:DE7A             	.LL613:
14216                        		__ld.umq	_armor_level
         13:DE7A  AD 24 23   			lda	_armor_level
14217                        		__equ_b.uiq	4
         13:DE7D  C9 04      			cmp	#4
         13:DE7F  F0 01      			beq	!+
         13:DE81  18         			clc
         13:DE82             	!:
14218                        		__bfalse	.LL615
         13:DE82  90 19      			bcc	.LL615
14219                        	
14220                        		.dbg	line,	"include\init.c", 693; {
14221                        	
14222                        		.dbg	line,	"include\init.c", 694; load_palette( 16, palette_PLAYER_4, 1 );
14223                        		__st.umiq	16, _al
         13:DE84  A9 10      			lda.l	#16
         13:DE86  85 F8      			sta	_al
14224                        		__farptr	_palette_PLAYER_4, _bp_bank, _bp
         13:DE88  A9 E0      			lda.l	#$6000 + ($1FFF & (_palette_PLAYER_4))
         13:DE8A  85 EC      			sta.l	_bp
         13:DE8C  A9 6F      			lda.h	#$6000 + ($1FFF & (_palette_PLAYER_4))
         13:DE8E  85 ED      			sta.h	_bp
         13:DE90  A9 11      			lda	#bank(_palette_PLAYER_4)
         13:DE92  85 02      			sta	_bp_bank
14225                        		__st.umiq	1, _ah
         13:DE94  A9 01      			lda.l	#1
         13:DE96  85 F9      			sta	_ah
14226                        		__call		_load_palette.3
         13:DE98  20 EB FE   			call	_load_palette.3
14227                        	
14228                        		.dbg	line,	"include\init.c", 695; }
14229                        	
14230                        		.dbg	line,	"include\init.c", 697; else
14231                        		__bra		.LL616
         13:DE9B  80 17      			bra	.LL616
14232    13:DE9D             	.LL615:
14233                        	
14234                        		.dbg	line,	"include\init.c", 698; {
14235                        	
14236                        		.dbg	line,	"include\init.c", 699; load_palette( 16, palette_PLAYER_1, 1 );
14237                        		__st.umiq	16, _al
         13:DE9D  A9 10      			lda.l	#16
         13:DE9F  85 F8      			sta	_al
14238                        		__farptr	_palette_PLAYER_1, _bp_bank, _bp
         13:DEA1  A9 E0      			lda.l	#$6000 + ($1FFF & (_palette_PLAYER_1))
         13:DEA3  85 EC      			sta.l	_bp
         13:DEA5  A9 6D      			lda.h	#$6000 + ($1FFF & (_palette_PLAYER_1))
         13:DEA7  85 ED      			sta.h	_bp
         13:DEA9  A9 11      			lda	#bank(_palette_PLAYER_1)
         13:DEAB  85 02      			sta	_bp_bank
14239                        		__st.umiq	1, _ah
         13:DEAD  A9 01      			lda.l	#1
         13:DEAF  85 F9      			sta	_ah
14240                        		__call		_load_palette.3
         13:DEB1  20 EB FE   			call	_load_palette.3
14241                        	
14242                        		.dbg	line,	"include\init.c", 700; }
14243    13:DEB4             	.LL616:
14244    13:DEB4             	.LL614:
14245    13:DEB4             	.LL612:
14246                        	
14247                        		.dbg	line,	"include\init.c", 703; load_palette( 17, palette_objects_1, 1 );
14248                        		__st.umiq	17, _al
         13:DEB4  A9 11      			lda.l	#17
         13:DEB6  85 F8      			sta	_al
14249                        		__farptr	_palette_objects_1, _bp_bank, _bp
         13:DEB8  A9 60      			lda.l	#$6000 + ($1FFF & (_palette_objects_1))
         13:DEBA  85 EC      			sta.l	_bp
         13:DEBC  A9 7E      			lda.h	#$6000 + ($1FFF & (_palette_objects_1))
         13:DEBE  85 ED      			sta.h	_bp
         13:DEC0  A9 12      			lda	#bank(_palette_objects_1)
         13:DEC2  85 02      			sta	_bp_bank
14250                        		__st.umiq	1, _ah
         13:DEC4  A9 01      			lda.l	#1
         13:DEC6  85 F9      			sta	_ah
14251                        		__call		_load_palette.3
         13:DEC8  20 EB FE   			call	_load_palette.3
14252                        	
14253                        		.dbg	line,	"include\init.c", 704; load_palette( 18, palette_objects_2, 1 );
14254                        		__st.umiq	18, _al
         13:DECB  A9 12      			lda.l	#18
         13:DECD  85 F8      			sta	_al
14255                        		__farptr	_palette_objects_2, _bp_bank, _bp
         13:DECF  A9 60      			lda.l	#$6000 + ($1FFF & (_palette_objects_2))
         13:DED1  85 EC      			sta.l	_bp
         13:DED3  A9 60      			lda.h	#$6000 + ($1FFF & (_palette_objects_2))
         13:DED5  85 ED      			sta.h	_bp
         13:DED7  A9 13      			lda	#bank(_palette_objects_2)
         13:DED9  85 02      			sta	_bp_bank
14256                        		__st.umiq	1, _ah
         13:DEDB  A9 01      			lda.l	#1
         13:DEDD  85 F9      			sta	_ah
14257                        		__call		_load_palette.3
         13:DEDF  20 EB FE   			call	_load_palette.3
14258                        	
14259                        		.dbg	line,	"include\init.c", 709; // VSYNC //
14260                        	
14261                        		.dbg	line,	"include\init.c", 710; vsync();
14262                        		__call		_vsync
         13:DEE2  20 09 E3   			call	_vsync
14263                        	
14264                        		.dbg	line,	"include\init.c", 712; // ENABLE DISPLAY //
14265                        	
14266                        		.dbg	line,	"include\init.c", 713; disp_on();
14267                        		__call		_disp_on
         13:DEE5  20 16 E4   			call	_disp_on
14268                        	
14269                        		.dbg	line,	"include\init.c", 714; }
14270                        	
14271                        		.dbg	line,	"include\init.c", 715; }
14272    13:DEE8             	.LL590:
14273    13:DEE8             	.LL589:
14274                        		__return	0
         13:DEE8  4C EF FF   			jmp	leave_proc
14275                        		.dbg	clear
14276                        		.endp
14277               7060     		.data
14278               230E     		.bss
14279    F8:230E             	__init_LEVEL_loc:
14280    F8:230E             			ds	1
14281    F8:230F             	__init_LEVEL_end:
14282               E309     		.code
14283                        		.pceas
14284                        	
14285                        		.dbg	line,	"include\init.c", 718; void init_SHOP()
14286                        		.dbg	line,	"include\init.c", 719; {
14287                        	;***********************
14288                        	;***********************
14289                        	
14290                        		.hucc
14291    02:CDED             		.proc		_init_SHOP
14292                        		__enter		_init_SHOP
14293                        	
14294                        		.dbg	line,	"include\init.c", 720; char i;
14295                        	
14296                        		.dbg	line,	"include\init.c", 721; char item_id;
14297                        	
14298                        		.dbg	line,	"include\init.c", 724; // DISABLE DISPLAY //
14299                        	
14300                        		.dbg	line,	"include\init.c", 725; disp_off();
14301                        		__call		_disp_off
         02:CDED  20 29 E4   			call	_disp_off
14302                        	
14303                        		.dbg	line,	"include\init.c", 726; 
14304                        	
14305                        		.dbg	line,	"include\init.c", 728; // VSYNC //
14306                        	
14307                        		.dbg	line,	"include\init.c", 729; vsync();
14308                        		__call		_vsync
         02:CDF0  20 09 E3   			call	_vsync
14309                        	
14310                        		.dbg	line,	"include\init.c", 732; // HIDE ALL LEVEL SPRITES //
14311                        	
14312                        		.dbg	line,	"include\init.c", 733; hide_LEVEL_SPRITES();
14313                        		__call		_hide_LEVEL_SPRITES
         02:CDF3  20 87 FE   			call	_hide_LEVEL_SPRITES
14314                        	
14315                        		.dbg	line,	"include\init.c", 736; // SET VDC 1 SCREEN SIZE (IN TILES) - 32x32 = 256 PIXELS
14316                        	
14317                        		.dbg	line,	"include\init.c", 737; set_screen_size(SCR_SIZE_64x32);
14318                        		__st.umiq	1, _al
         02:CDF6  A9 01      			lda.l	#1
         02:CDF8  85 F8      			sta	_al
14319                        		__call		_set_screen_size.1
         02:CDFA  20 31 FF   			call	_set_screen_size.1
14320                        	
14321                        		.dbg	line,	"include\init.c", 740; // SET VDC 2 SCREEN SIZE (IN TILES) - 32x32 = 256 PIXELS
14322                        	
14323                        		.dbg	line,	"include\init.c", 741; sgx_set_screen_size(SCR_SIZE_32x32);
14324                        		__st.umiq	0, _al
         02:CDFD  64 F8      			stz	_al
14325                        		__call		_sgx_set_screen_size.1
         02:CDFF  20 27 FF   			call	_sgx_set_screen_size.1
14326                        	
14327                        		.dbg	line,	"include\init.c", 746; //**************************************************************************************//
14328                        	
14329                        		.dbg	line,	"include\init.c", 747; //                                                                                      //
14330                        	
14331                        		.dbg	line,	"include\init.c", 748; //                                      VARIABLES                                       //
14332                        	
14333                        		.dbg	line,	"include\init.c", 749; //                                                                                      //
14334                        	
14335                        		.dbg	line,	"include\init.c", 750; //**************************************************************************************//
14336                        	
14337                        		.dbg	line,	"include\init.c", 752; index_x = 0;
14338                        		__st.umiq	0, _index_x
         02:CE02  9C CE 23   			stz	_index_x
14339                        	
14340                        		.dbg	line,	"include\init.c", 753; index_y = 0;
14341                        		__st.umiq	0, _index_y
         02:CE05  9C CF 23   			stz	_index_y
14342                        	
14343                        		.dbg	line,	"include\init.c", 754; item_index = 0;
14344                        		__st.umiq	0, _item_index
         02:CE08  9C D0 23   			stz	_item_index
14345                        	
14346                        		.dbg	line,	"include\init.c", 756; minutes = 0;
14347                        		__st.umiq	0, _minutes
         02:CE0B  9C 29 23   			stz	_minutes
14348                        	
14349                        		.dbg	line,	"include\init.c", 757; seconds = 30;
14350                        		__st.umiq	30, _seconds
         02:CE0E  A9 1E      			lda.l	#30
         02:CE10  8D 2A 23   			sta	_seconds
14351                        	
14352                        		.dbg	line,	"include\init.c", 759; shop_counter = 0;
14353                        		__st.umiq	0, _shop_counter
         02:CE13  9C D2 23   			stz	_shop_counter
14354                        	
14355                        		.dbg	line,	"include\init.c", 760; shop_phase = SHOP_PHASE_ENTER;
14356                        		__st.umiq	0, _shop_phase
         02:CE16  9C D1 23   			stz	_shop_phase
14357                        	
14358                        		.dbg	line,	"include\init.c", 762; if(level_id == 1)
14359                        		__ld.umq	_level_id
         02:CE19  AD 13 23   			lda	_level_id
14360                        		__equ_b.uiq	1
         02:CE1C  C9 01      			cmp	#1
         02:CE1E  F0 01      			beq	!+
         02:CE20  18         			clc
         02:CE21             	!:
14361                        		__bfalse	.LL618
         02:CE21  90 0A      			bcc	.LL618
14362                        	
14363                        		.dbg	line,	"include\init.c", 763; {
14364                        	
14365                        		.dbg	line,	"include\init.c", 764; ptr_SHOP_ITEM_PRICES = &TABLE_SHOP_PRICES_LV1[0];
14366                        		__ld.wi		_TABLE_SHOP_PRICES_LV1
         02:CE23  A9 68      			lda.l	#_TABLE_SHOP_PRICES_LV1
         02:CE25  A0 61      			ldy.h	#_TABLE_SHOP_PRICES_LV1
14367                        		__st.wmq	_ptr_SHOP_ITEM_PRICES
         02:CE27  8D 45 26   			sta.l	_ptr_SHOP_ITEM_PRICES
         02:CE2A  8C 46 26   			sty.h	_ptr_SHOP_ITEM_PRICES
14368                        	
14369                        		.dbg	line,	"include\init.c", 765; }
14370                        	
14371                        		.dbg	line,	"include\init.c", 766; 
14372                        	
14373                        		.dbg	line,	"include\init.c", 771; //**************************************************************************************//
14374                        	
14375                        		.dbg	line,	"include\init.c", 772; //                                                                                      //
14376                        	
14377                        		.dbg	line,	"include\init.c", 773; //                                        VDC 2                                         //
14378                        	
14379                        		.dbg	line,	"include\init.c", 774; //                                                                                      //
14380                        	
14381                        		.dbg	line,	"include\init.c", 775; //**************************************************************************************//
14382                        	
14383                        		.dbg	line,	"include\init.c", 777; //--------------------------------------------------------------------------------------//
14384                        	
14385                        		.dbg	line,	"include\init.c", 778; //                                      LOAD FONT                                       //
14386                        	
14387                        		.dbg	line,	"include\init.c", 779; //--------------------------------------------------------------------------------------//
14388                        	
14389                        		.dbg	line,	"include\init.c", 781; load_vram( 0x0800, tileset_FONT, SIZEOF(tileset_FONT) >> 1 );
14390    02:CE2D             	.LL618:
14391                        		__st.wmiq	2048, _di
         02:CE2D  64 F0      			stz.l	_di
         02:CE2F  A9 08      			lda.h	#2048
         02:CE31  85 F1      			sta.h	_di
14392                        		__farptr	_tileset_FONT, _bp_bank, _bp
         02:CE33  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_FONT))
         02:CE35  85 EC      			sta.l	_bp
         02:CE37  A9 60      			lda.h	#$6000 + ($1FFF & (_tileset_FONT))
         02:CE39  85 ED      			sta.h	_bp
         02:CE3B  A9 03      			lda	#bank(_tileset_FONT)
         02:CE3D  85 02      			sta	_bp_bank
14393                        		__ld.wi		___sizeof__tileset_FONT
         02:CE3F  A9 00      			lda.l	#___sizeof__tileset_FONT
         02:CE41  A0 0C      			ldy.h	#___sizeof__tileset_FONT
14394                        		__lsr.wi	1
         02:CE43  42         			say
         02:CE44  4A         			lsr	a
         02:CE45  42         			say
         02:CE46  6A         			ror	a
14395                        		__st.wmq	_ax
         02:CE47  85 F8      			sta.l	_ax
         02:CE49  84 F9      			sty.h	_ax
14396                        		 _load_vram.3
         02:CE4B  82         			clx				; Offset to PCE VDC.
         02:CE4C  20 4F FF   			call	load_vram_x
14397                        	
14398                        		.dbg	line,	"include\init.c", 783; set_font_pal(15);
14399                        		__ld.uiq	15
         02:CE4F  A9 0F      			lda	#15
14400                        		__call		_set_font_pal.1
         02:CE51  20 09 E6   			call	_set_font_pal.1
14401                        	
14402                        		.dbg	line,	"include\init.c", 786; //--------------------------------------------------------------------------------------//
14403                        	
14404                        		.dbg	line,	"include\init.c", 787; //                                    LOAD TILESET                                      //
14405                        	
14406                        		.dbg	line,	"include\init.c", 788; //--------------------------------------------------------------------------------------//
14407                        	
14408                        		.dbg	line,	"include\init.c", 790; sgx_load_vram( 0x1000, tileset_SHOP_BG_B, SIZEOF(tileset_SHOP_BG_B) >> 1 );
14409                        		__st.wmiq	4096, _di
         02:CE54  64 F0      			stz.l	_di
         02:CE56  A9 10      			lda.h	#4096
         02:CE58  85 F1      			sta.h	_di
14410                        		__farptr	_tileset_SHOP_BG_B, _bp_bank, _bp
         02:CE5A  A9 A0      			lda.l	#$6000 + ($1FFF & (_tileset_SHOP_BG_B))
         02:CE5C  85 EC      			sta.l	_bp
         02:CE5E  A9 7A      			lda.h	#$6000 + ($1FFF & (_tileset_SHOP_BG_B))
         02:CE60  85 ED      			sta.h	_bp
         02:CE62  A9 0B      			lda	#bank(_tileset_SHOP_BG_B)
         02:CE64  85 02      			sta	_bp_bank
14411                        		__ld.wi		___sizeof__tileset_SHOP_BG_B
         02:CE66  A9 60      			lda.l	#___sizeof__tileset_SHOP_BG_B
         02:CE68  A0 39      			ldy.h	#___sizeof__tileset_SHOP_BG_B
14412                        		__lsr.wi	1
         02:CE6A  42         			say
         02:CE6B  4A         			lsr	a
         02:CE6C  42         			say
         02:CE6D  6A         			ror	a
14413                        		__st.wmq	_ax
         02:CE6E  85 F8      			sta.l	_ax
         02:CE70  84 F9      			sty.h	_ax
14414                        		 _sgx_load_vram.3
         02:CE72  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:CE74  20 4F FF   			call	load_vram_x
14415                        	
14416                        		.dbg	line,	"include\init.c", 793; //--------------------------------------------------------------------------------------//
14417                        	
14418                        		.dbg	line,	"include\init.c", 794; //                                      LOAD ITEMS                                      //
14419                        	
14420                        		.dbg	line,	"include\init.c", 795; //--------------------------------------------------------------------------------------//
14421                        	
14422                        		.dbg	line,	"include\init.c", 797; for(i=0 ; i<10 ; i++)
14423                        		__st.umiq	0, __init_SHOP_end - 1  /* i */
         02:CE77  9C 10 23   			stz	__init_SHOP_end - 1
14424    02:CE7A             	.LL619:
14425                        		__ld.umq	__init_SHOP_end - 1  /* i */
         02:CE7A  AD 10 23   			lda	__init_SHOP_end - 1
14426                        		__ult_b.uiq	10
         02:CE7D  C9 0A      			cmp	#10		; Subtract integer from A.
         02:CE7F  6A         			ror	a		; CC if A < integer.
         02:CE80  49 80      			eor	#$80
         02:CE82  2A         			rol	a
14427                        		__btrue		.LL621
         02:CE83  B0 07      			bcs	.LL621
14428                        		__bra		.LL622
         02:CE85  80 42      			bra	.LL622
14429    02:CE87             	.LL620:
14430                        		__inc.umq	__init_SHOP_end - 1  /* i */
         02:CE87  EE 10 23   			inc	__init_SHOP_end - 1
14431                        		__bra		.LL619
         02:CE8A  80 EE      			bra	.LL619
14432    02:CE8C             	.LL621:
14433                        	
14434                        		.dbg	line,	"include\init.c", 798; {
14435                        	
14436                        		.dbg	line,	"include\init.c", 799; set_far_base(TABLE_SHOP_ITEMS_TILES_BANK[i],TABLE_SHOP_ITEMS_TILES_ADR[i]);
14437                        		__ldx.umq	__init_SHOP_end - 1  /* i */
         02:CE8C  AE 10 23   			ldx	__init_SHOP_end - 1
14438                        		__ld.uax	_TABLE_SHOP_ITEMS_TILES_BANK
         02:CE8F  BD 90 61   			lda	_TABLE_SHOP_ITEMS_TILES_BANK, x
         02:CE92  C2         			cly
14439                        		__st.umq	_bp_bank
         02:CE93  85 02      			sta	_bp_bank
14440                        		__ld2x.umq	__init_SHOP_end - 1  /* i */
         02:CE95  AD 10 23   			lda	__init_SHOP_end - 1
         02:CE98  0A         			asl	a
         02:CE99  AA         			tax
14441                        		__ld.wax	_TABLE_SHOP_ITEMS_TILES_ADR
         02:CE9A  BD 7C 61   			lda.l	_TABLE_SHOP_ITEMS_TILES_ADR, x
         02:CE9D  BC 7D 61   			ldy.h	_TABLE_SHOP_ITEMS_TILES_ADR, x
14442                        		__st.wmq	_bp
         02:CEA0  85 EC      			sta.l	_bp
         02:CEA2  84 ED      			sty.h	_bp
14443                        	
14444                        		.dbg	line,	"include\init.c", 800; sgx_far_load_vram( 0x1000 + (i * TILES_4), TILES_4 );
14445                        		__ld.um		__init_SHOP_end - 1  /* i */
         02:CEA4  AD 10 23   			lda	__init_SHOP_end - 1
         02:CEA7  C2         			cly
14446                        		__asl.wi	6
         02:CEA8  85 00      			sta	__temp
         02:CEAA  98         			tya
         02:CEAB  4A         			lsr	a
         02:CEAC  20 CB E1   			jsr	aslw6
         02:CEAF  29 C0      			and.l	#$FF << 6
14447                        		__add.wi	4096
         02:CEB1  18         			clc
         02:CEB2  69 00      			adc.l	#4096
         02:CEB4  42         			say
         02:CEB5  69 10      			adc.h	#4096
         02:CEB7  42         			say
14448                        		__st.wmq	_di
         02:CEB8  85 F0      			sta.l	_di
         02:CEBA  84 F1      			sty.h	_di
14449                        		__st.wmiq	64, _ax
         02:CEBC  A9 40      			lda.l	#64
         02:CEBE  85 F8      			sta.l	_ax
         02:CEC0  64 F9      			stz.h	_ax
14450                        		 _sgx_far_load_vram.2
         02:CEC2  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:CEC4  20 4F FF   			call	load_vram_x
14451                        	
14452                        		.dbg	line,	"include\init.c", 801; }
14453                        		__bra		.LL620
         02:CEC7  80 BE      			bra	.LL620
14454    02:CEC9             	.LL622:
14455                        	
14456                        		.dbg	line,	"include\init.c", 804; //--------------------------------------------------------------------------------------//
14457                        	
14458                        		.dbg	line,	"include\init.c", 805; //                                      SET BLOCKS                                      //
14459                        	
14460                        		.dbg	line,	"include\init.c", 806; //--------------------------------------------------------------------------------------//
14461                        	
14462                        		.dbg	line,	"include\init.c", 808; sgx_set_blocks( blocks_SHOP_BG_B , tilemap_mask , 256 );
14463                        		__farptr	_blocks_SHOP_BG_B, sgx_blk_bank, sgx_blk_addr
         02:CEC9  A9 00      			lda.l	#$6000 + ($1FFF & (_blocks_SHOP_BG_B))
         02:CECB  8D C7 2B   			sta.l	sgx_blk_addr
         02:CECE  A9 78      			lda.h	#$6000 + ($1FFF & (_blocks_SHOP_BG_B))
         02:CED0  8D C8 2B   			sta.h	sgx_blk_addr
         02:CED3  A9 0D      			lda	#bank(_blocks_SHOP_BG_B)
         02:CED5  8D C9 2B   			sta	sgx_blk_bank
14464                        		__farptr	_tilemap_mask, sgx_tbl_bank, sgx_tbl_addr
         02:CED8  A9 D3      			lda.l	#$6000 + ($1FFF & (_tilemap_mask))
         02:CEDA  8D C4 2B   			sta.l	sgx_tbl_addr
         02:CEDD  A9 63      			lda.h	#$6000 + ($1FFF & (_tilemap_mask))
         02:CEDF  8D C5 2B   			sta.h	sgx_tbl_addr
         02:CEE2  A9 F8      			lda	#bank(_tilemap_mask)
         02:CEE4  8D C6 2B   			sta	sgx_tbl_bank
14465                        		__st.umiq	256, _al
         02:CEE7  A9 00      			lda.l	#256
         02:CEE9  85 F8      			sta	_al
14466                        		__call		_sgx_set_blocks.3
         02:CEEB  20 7D FE   			call	_sgx_set_blocks.3
14467                        	
14468                        		.dbg	line,	"include\init.c", 812; //--------------------------------------------------------------------------------------//
14469                        	
14470                        		.dbg	line,	"include\init.c", 813; //                                       SET MAP                                        //
14471                        	
14472                        		.dbg	line,	"include\init.c", 814; //--------------------------------------------------------------------------------------//
14473                        	
14474                        		.dbg	line,	"include\init.c", 816; sgx_set_blkmap( map_SHOP_BG_B, COUNTOF(map_SHOP_BG_B) );
14475                        		__farptr	_map_SHOP_BG_B, sgx_map_bank, sgx_map_addr
         02:CEEE  A9 00      			lda.l	#$6000 + ($1FFF & (_map_SHOP_BG_B))
         02:CEF0  8D CA 2B   			sta.l	sgx_map_addr
         02:CEF3  A9 60      			lda.h	#$6000 + ($1FFF & (_map_SHOP_BG_B))
         02:CEF5  8D CB 2B   			sta.h	sgx_map_addr
         02:CEF8  A9 0E      			lda	#bank(_map_SHOP_BG_B)
         02:CEFA  8D CC 2B   			sta	sgx_map_bank
14476                        		__ld.wi		___countof__map_SHOP_BG_B
         02:CEFD  A9 10      			lda.l	#___countof__map_SHOP_BG_B
         02:CEFF  A0 00      			ldy.h	#___countof__map_SHOP_BG_B
14477                        		__st.umq	sgx_map_line_w
         02:CF01  8D 8D 26   			sta	sgx_map_line_w
14478                        		 _sgx_set_blkmap.2
         02:CF04  9C CF 2B   			stz	sgx_scr_bank
14479                        	
14480                        		.dbg	line,	"include\init.c", 819; //--------------------------------------------------------------------------------------//
14481                        	
14482                        		.dbg	line,	"include\init.c", 820; //                                    DRAW TILEMAP                                      //
14483                        	
14484                        		.dbg	line,	"include\init.c", 821; //--------------------------------------------------------------------------------------//
14485                        	
14486                        		.dbg	line,	"include\init.c", 823; // The blkmap is drawn using global variables for the top-left coordinate
14487                        	
14488                        		.dbg	line,	"include\init.c", 824; // in pixels, and the draw width and height in terms of 8x8 characters.
14489                        	
14490                        		.dbg	line,	"include\init.c", 826; sgx_map_pxl_x = 0;
14491                        		__st.wmiq	0, _sgx_map_pxl_x
         02:CF07  9C 8F 26   			stz.l	_sgx_map_pxl_x
         02:CF0A  9C 90 26   			stz.h	_sgx_map_pxl_x
14492                        	
14493                        		.dbg	line,	"include\init.c", 827; sgx_map_pxl_y = 0;
14494                        		__st.wmiq	0, _sgx_map_pxl_y
         02:CF0D  9C 91 26   			stz.l	_sgx_map_pxl_y
         02:CF10  9C 92 26   			stz.h	_sgx_map_pxl_y
14495                        	
14496                        		.dbg	line,	"include\init.c", 829; sgx_map_draw_w = 32;
14497                        		__st.umiq	32, _sgx_map_draw_w
         02:CF13  A9 20      			lda.l	#32
         02:CF15  8D 8B 26   			sta	_sgx_map_draw_w
14498                        	
14499                        		.dbg	line,	"include\init.c", 830; sgx_map_draw_h = 28;
14500                        		__st.umiq	28, _sgx_map_draw_h
         02:CF18  A9 1C      			lda.l	#28
         02:CF1A  8D 8C 26   			sta	_sgx_map_draw_h
14501                        	
14502                        		.dbg	line,	"include\init.c", 833; //**************************************************************************************//
14503                        	
14504                        		.dbg	line,	"include\init.c", 834; //                                                                                      //
14505                        	
14506                        		.dbg	line,	"include\init.c", 835; //                                  SETUP SCROLL_SPLIT                                  //
14507                        	
14508                        		.dbg	line,	"include\init.c", 836; //                                                                                      //
14509                        	
14510                        		.dbg	line,	"include\init.c", 837; //**************************************************************************************//
14511                        	
14512                        		.dbg	line,	"include\init.c", 839; sgx_draw_map();
14513                        		__call		_sgx_draw_map
         02:CF1D  20 FF FE   			call	_sgx_draw_map
14514                        	
14515                        		.dbg	line,	"include\init.c", 841; sgx_scroll_split(0,   0, sgx_map_pxl_x & (BAT_SIZE_W - 1), sgx_map_pxl_y & (BAT_SIZE_H - 1), BKG_ON | SPR_ON);
14516                        		__st.umiq	0, _al
         02:CF20  64 F8      			stz	_al
14517                        		__st.umiq	0, _ah
         02:CF22  64 F9      			stz	_ah
14518                        		__ld.wm		_sgx_map_pxl_x
         02:CF24  AD 8F 26   			lda.l	_sgx_map_pxl_x
         02:CF27  AC 90 26   			ldy.h	_sgx_map_pxl_x
14519                        		__and.wi	2047
         02:CF2A  29 FF      			and.l	#2047
         02:CF2C  42         			say
         02:CF2D  29 07      			and.h	#2047
         02:CF2F  42         			say
14520                        		__st.wmq	_bx
         02:CF30  85 FA      			sta.l	_bx
         02:CF32  84 FB      			sty.h	_bx
14521                        		__ld.wm		_sgx_map_pxl_y
         02:CF34  AD 91 26   			lda.l	_sgx_map_pxl_y
         02:CF37  AC 92 26   			ldy.h	_sgx_map_pxl_y
14522                        		__and.wi	255
         02:CF3A  29 FF      			and	#255
         02:CF3C  C2         			cly
14523                        		__st.wmq	_cx
         02:CF3D  85 FC      			sta.l	_cx
         02:CF3F  84 FD      			sty.h	_cx
14524                        		__st.umiq	192, _dl
         02:CF41  A9 C0      			lda.l	#192
         02:CF43  85 FE      			sta	_dl
14525                        		__call		_sgx_scroll_split.5
         02:CF45  20 77 FF   			call	_sgx_scroll_split.5
14526                        	
14527                        		.dbg	line,	"include\init.c", 846; //**************************************************************************************//
14528                        	
14529                        		.dbg	line,	"include\init.c", 847; //                                                                                      //
14530                        	
14531                        		.dbg	line,	"include\init.c", 848; //                                         HUD                                          //
14532                        	
14533                        		.dbg	line,	"include\init.c", 849; //                                                                                      //
14534                        	
14535                        		.dbg	line,	"include\init.c", 850; //**************************************************************************************//
14536                        	
14537                        		.dbg	line,	"include\init.c", 852; init_HUD();
14538                        		__call		_init_HUD
         02:CF48  20 F5 FE   			call	_init_HUD
14539                        	
14540                        		.dbg	line,	"include\init.c", 855; //--------------------------------------------------------------------------------------//
14541                        	
14542                        		.dbg	line,	"include\init.c", 856; //                                     DRAW PRICES                                      //
14543                        	
14544                        		.dbg	line,	"include\init.c", 857; //--------------------------------------------------------------------------------------//
14545                        	
14546                        		.dbg	line,	"include\init.c", 859; shop_prices[0] = *(ptr_SHOP_ITEM_PRICES);
14547                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         02:CF4B  AD 45 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         02:CF4E  AC 46 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
14548                        		__st.wm		__ptr
         02:CF51  85 88      			sta.l	__ptr
         02:CF53  84 89      			sty.h	__ptr
14549                        		__ld.wp		__ptr
         02:CF55  A0 01      			ldy	#1
         02:CF57  B1 88      			lda	[__ptr], y
         02:CF59  A8         			tay
         02:CF5A  B2 88      			lda	[__ptr]
14550                        		__st.wmq	_shop_prices
         02:CF5C  8D 31 26   			sta.l	_shop_prices
         02:CF5F  8C 32 26   			sty.h	_shop_prices
14551                        	
14552                        		.dbg	line,	"include\init.c", 860; shop_prices[1] = *(ptr_SHOP_ITEM_PRICES+1);
14553                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         02:CF62  AD 45 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         02:CF65  AC 46 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
14554                        		__add.wi	2
         02:CF68  18         			clc
         02:CF69  69 02      			adc.l	#2
         02:CF6B  90 01      			bcc	!+
         02:CF6D  C8         			iny
         02:CF6E             	!:
14555                        		__st.wm		__ptr
         02:CF6E  85 88      			sta.l	__ptr
         02:CF70  84 89      			sty.h	__ptr
14556                        		__ld.wp		__ptr
         02:CF72  A0 01      			ldy	#1
         02:CF74  B1 88      			lda	[__ptr], y
         02:CF76  A8         			tay
         02:CF77  B2 88      			lda	[__ptr]
14557                        		__st.wmq	_shop_prices + 2
         02:CF79  8D 33 26   			sta.l	_shop_prices + 2
         02:CF7C  8C 34 26   			sty.h	_shop_prices + 2
14558                        	
14559                        		.dbg	line,	"include\init.c", 861; shop_prices[2] = *(ptr_SHOP_ITEM_PRICES+2);
14560                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         02:CF7F  AD 45 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         02:CF82  AC 46 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
14561                        		__add.wi	4
         02:CF85  18         			clc
         02:CF86  69 04      			adc.l	#4
         02:CF88  90 01      			bcc	!+
         02:CF8A  C8         			iny
         02:CF8B             	!:
14562                        		__st.wm		__ptr
         02:CF8B  85 88      			sta.l	__ptr
         02:CF8D  84 89      			sty.h	__ptr
14563                        		__ld.wp		__ptr
         02:CF8F  A0 01      			ldy	#1
         02:CF91  B1 88      			lda	[__ptr], y
         02:CF93  A8         			tay
         02:CF94  B2 88      			lda	[__ptr]
14564                        		__st.wmq	_shop_prices + 4
         02:CF96  8D 35 26   			sta.l	_shop_prices + 4
         02:CF99  8C 36 26   			sty.h	_shop_prices + 4
14565                        	
14566                        		.dbg	line,	"include\init.c", 862; shop_prices[3] = *(ptr_SHOP_ITEM_PRICES+3);
14567                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         02:CF9C  AD 45 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         02:CF9F  AC 46 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
14568                        		__add.wi	6
         02:CFA2  18         			clc
         02:CFA3  69 06      			adc.l	#6
         02:CFA5  90 01      			bcc	!+
         02:CFA7  C8         			iny
         02:CFA8             	!:
14569                        		__st.wm		__ptr
         02:CFA8  85 88      			sta.l	__ptr
         02:CFAA  84 89      			sty.h	__ptr
14570                        		__ld.wp		__ptr
         02:CFAC  A0 01      			ldy	#1
         02:CFAE  B1 88      			lda	[__ptr], y
         02:CFB0  A8         			tay
         02:CFB1  B2 88      			lda	[__ptr]
14571                        		__st.wmq	_shop_prices + 6
         02:CFB3  8D 37 26   			sta.l	_shop_prices + 6
         02:CFB6  8C 38 26   			sty.h	_shop_prices + 6
14572                        	
14573                        		.dbg	line,	"include\init.c", 863; shop_prices[4] = *(ptr_SHOP_ITEM_PRICES+4);
14574                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         02:CFB9  AD 45 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         02:CFBC  AC 46 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
14575                        		__add.wi	8
         02:CFBF  18         			clc
         02:CFC0  69 08      			adc.l	#8
         02:CFC2  90 01      			bcc	!+
         02:CFC4  C8         			iny
         02:CFC5             	!:
14576                        		__st.wm		__ptr
         02:CFC5  85 88      			sta.l	__ptr
         02:CFC7  84 89      			sty.h	__ptr
14577                        		__ld.wp		__ptr
         02:CFC9  A0 01      			ldy	#1
         02:CFCB  B1 88      			lda	[__ptr], y
         02:CFCD  A8         			tay
         02:CFCE  B2 88      			lda	[__ptr]
14578                        		__st.wmq	_shop_prices + 8
         02:CFD0  8D 39 26   			sta.l	_shop_prices + 8
         02:CFD3  8C 3A 26   			sty.h	_shop_prices + 8
14579                        	
14580                        		.dbg	line,	"include\init.c", 864; 
14581                        	
14582                        		.dbg	line,	"include\init.c", 865; shop_prices[5] = *(ptr_SHOP_ITEM_PRICES+5);
14583                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         02:CFD6  AD 45 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         02:CFD9  AC 46 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
14584                        		__add.wi	10
         02:CFDC  18         			clc
         02:CFDD  69 0A      			adc.l	#10
         02:CFDF  90 01      			bcc	!+
         02:CFE1  C8         			iny
         02:CFE2             	!:
14585                        		__st.wm		__ptr
         02:CFE2  85 88      			sta.l	__ptr
         02:CFE4  84 89      			sty.h	__ptr
14586                        		__ld.wp		__ptr
         02:CFE6  A0 01      			ldy	#1
         02:CFE8  B1 88      			lda	[__ptr], y
         02:CFEA  A8         			tay
         02:CFEB  B2 88      			lda	[__ptr]
14587                        		__st.wmq	_shop_prices + 10
         02:CFED  8D 3B 26   			sta.l	_shop_prices + 10
         02:CFF0  8C 3C 26   			sty.h	_shop_prices + 10
14588                        	
14589                        		.dbg	line,	"include\init.c", 866; shop_prices[6] = *(ptr_SHOP_ITEM_PRICES+6);
14590                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         02:CFF3  AD 45 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         02:CFF6  AC 46 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
14591                        		__add.wi	12
         02:CFF9  18         			clc
         02:CFFA  69 0C      			adc.l	#12
         02:CFFC  90 01      			bcc	!+
         02:CFFE  C8         			iny
         02:CFFF             	!:
14592                        		__st.wm		__ptr
         02:CFFF  85 88      			sta.l	__ptr
         02:D001  84 89      			sty.h	__ptr
14593                        		__ld.wp		__ptr
         02:D003  A0 01      			ldy	#1
         02:D005  B1 88      			lda	[__ptr], y
         02:D007  A8         			tay
         02:D008  B2 88      			lda	[__ptr]
14594                        		__st.wmq	_shop_prices + 12
         02:D00A  8D 3D 26   			sta.l	_shop_prices + 12
         02:D00D  8C 3E 26   			sty.h	_shop_prices + 12
14595                        	
14596                        		.dbg	line,	"include\init.c", 867; shop_prices[7] = *(ptr_SHOP_ITEM_PRICES+7);
14597                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         02:D010  AD 45 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         02:D013  AC 46 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
14598                        		__add.wi	14
         02:D016  18         			clc
         02:D017  69 0E      			adc.l	#14
         02:D019  90 01      			bcc	!+
         02:D01B  C8         			iny
         02:D01C             	!:
14599                        		__st.wm		__ptr
         02:D01C  85 88      			sta.l	__ptr
         02:D01E  84 89      			sty.h	__ptr
14600                        		__ld.wp		__ptr
         02:D020  A0 01      			ldy	#1
         02:D022  B1 88      			lda	[__ptr], y
         02:D024  A8         			tay
         02:D025  B2 88      			lda	[__ptr]
14601                        		__st.wmq	_shop_prices + 14
         02:D027  8D 3F 26   			sta.l	_shop_prices + 14
         02:D02A  8C 40 26   			sty.h	_shop_prices + 14
14602                        	
14603                        		.dbg	line,	"include\init.c", 868; shop_prices[8] = *(ptr_SHOP_ITEM_PRICES+8);
14604                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         02:D02D  AD 45 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         02:D030  AC 46 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
14605                        		__add.wi	16
         02:D033  18         			clc
         02:D034  69 10      			adc.l	#16
         02:D036  90 01      			bcc	!+
         02:D038  C8         			iny
         02:D039             	!:
14606                        		__st.wm		__ptr
         02:D039  85 88      			sta.l	__ptr
         02:D03B  84 89      			sty.h	__ptr
14607                        		__ld.wp		__ptr
         02:D03D  A0 01      			ldy	#1
         02:D03F  B1 88      			lda	[__ptr], y
         02:D041  A8         			tay
         02:D042  B2 88      			lda	[__ptr]
14608                        		__st.wmq	_shop_prices + 16
         02:D044  8D 41 26   			sta.l	_shop_prices + 16
         02:D047  8C 42 26   			sty.h	_shop_prices + 16
14609                        	
14610                        		.dbg	line,	"include\init.c", 869; shop_prices[9] = *(ptr_SHOP_ITEM_PRICES+9);
14611                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         02:D04A  AD 45 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         02:D04D  AC 46 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
14612                        		__add.wi	18
         02:D050  18         			clc
         02:D051  69 12      			adc.l	#18
         02:D053  90 01      			bcc	!+
         02:D055  C8         			iny
         02:D056             	!:
14613                        		__st.wm		__ptr
         02:D056  85 88      			sta.l	__ptr
         02:D058  84 89      			sty.h	__ptr
14614                        		__ld.wp		__ptr
         02:D05A  A0 01      			ldy	#1
         02:D05C  B1 88      			lda	[__ptr], y
         02:D05E  A8         			tay
         02:D05F  B2 88      			lda	[__ptr]
14615                        		__st.wmq	_shop_prices + 18
         02:D061  8D 43 26   			sta.l	_shop_prices + 18
         02:D064  8C 44 26   			sty.h	_shop_prices + 18
14616                        	
14617                        		.dbg	line,	"include\init.c", 872; put_number(shop_prices[0],4,2,20);
14618                        		__ld.wm		_shop_prices
         02:D067  AD 31 26   			lda.l	_shop_prices
         02:D06A  AC 32 26   			ldy.h	_shop_prices
14619                        		__st.wmq	_bx
         02:D06D  85 FA      			sta.l	_bx
         02:D06F  84 FB      			sty.h	_bx
14620                        		__st.umiq	4, _cl
         02:D071  A9 04      			lda.l	#4
         02:D073  85 FC      			sta	_cl
14621                        		__st.umiq	2, _dil
         02:D075  A9 02      			lda.l	#2
         02:D077  85 F0      			sta	_dil
14622                        		__st.umiq	20, _dih
         02:D079  A9 14      			lda.l	#20
         02:D07B  85 F1      			sta	_dih
14623                        		__call		_put_number.4
         02:D07D  20 9F FF   			call	_put_number.4
14624                        	
14625                        		.dbg	line,	"include\init.c", 873; put_number(shop_prices[1],4,7,20);
14626                        		__ld.wm		_shop_prices + 2
         02:D080  AD 33 26   			lda.l	_shop_prices + 2
         02:D083  AC 34 26   			ldy.h	_shop_prices + 2
14627                        		__st.wmq	_bx
         02:D086  85 FA      			sta.l	_bx
         02:D088  84 FB      			sty.h	_bx
14628                        		__st.umiq	4, _cl
         02:D08A  A9 04      			lda.l	#4
         02:D08C  85 FC      			sta	_cl
14629                        		__st.umiq	7, _dil
         02:D08E  A9 07      			lda.l	#7
         02:D090  85 F0      			sta	_dil
14630                        		__st.umiq	20, _dih
         02:D092  A9 14      			lda.l	#20
         02:D094  85 F1      			sta	_dih
14631                        		__call		_put_number.4
         02:D096  20 9F FF   			call	_put_number.4
14632                        	
14633                        		.dbg	line,	"include\init.c", 874; put_number(shop_prices[2],4,12,20);
14634                        		__ld.wm		_shop_prices + 4
         02:D099  AD 35 26   			lda.l	_shop_prices + 4
         02:D09C  AC 36 26   			ldy.h	_shop_prices + 4
14635                        		__st.wmq	_bx
         02:D09F  85 FA      			sta.l	_bx
         02:D0A1  84 FB      			sty.h	_bx
14636                        		__st.umiq	4, _cl
         02:D0A3  A9 04      			lda.l	#4
         02:D0A5  85 FC      			sta	_cl
14637                        		__st.umiq	12, _dil
         02:D0A7  A9 0C      			lda.l	#12
         02:D0A9  85 F0      			sta	_dil
14638                        		__st.umiq	20, _dih
         02:D0AB  A9 14      			lda.l	#20
         02:D0AD  85 F1      			sta	_dih
14639                        		__call		_put_number.4
         02:D0AF  20 9F FF   			call	_put_number.4
14640                        	
14641                        		.dbg	line,	"include\init.c", 875; put_number(shop_prices[3],4,17,20);
14642                        		__ld.wm		_shop_prices + 6
         02:D0B2  AD 37 26   			lda.l	_shop_prices + 6
         02:D0B5  AC 38 26   			ldy.h	_shop_prices + 6
14643                        		__st.wmq	_bx
         02:D0B8  85 FA      			sta.l	_bx
         02:D0BA  84 FB      			sty.h	_bx
14644                        		__st.umiq	4, _cl
         02:D0BC  A9 04      			lda.l	#4
         02:D0BE  85 FC      			sta	_cl
14645                        		__st.umiq	17, _dil
         02:D0C0  A9 11      			lda.l	#17
         02:D0C2  85 F0      			sta	_dil
14646                        		__st.umiq	20, _dih
         02:D0C4  A9 14      			lda.l	#20
         02:D0C6  85 F1      			sta	_dih
14647                        		__call		_put_number.4
         02:D0C8  20 9F FF   			call	_put_number.4
14648                        	
14649                        		.dbg	line,	"include\init.c", 876; put_number(shop_prices[4],4,22,20);
14650                        		__ld.wm		_shop_prices + 8
         02:D0CB  AD 39 26   			lda.l	_shop_prices + 8
         02:D0CE  AC 3A 26   			ldy.h	_shop_prices + 8
14651                        		__st.wmq	_bx
         02:D0D1  85 FA      			sta.l	_bx
         02:D0D3  84 FB      			sty.h	_bx
14652                        		__st.umiq	4, _cl
         02:D0D5  A9 04      			lda.l	#4
         02:D0D7  85 FC      			sta	_cl
14653                        		__st.umiq	22, _dil
         02:D0D9  A9 16      			lda.l	#22
         02:D0DB  85 F0      			sta	_dil
14654                        		__st.umiq	20, _dih
         02:D0DD  A9 14      			lda.l	#20
         02:D0DF  85 F1      			sta	_dih
14655                        		__call		_put_number.4
         02:D0E1  20 9F FF   			call	_put_number.4
14656                        	
14657                        		.dbg	line,	"include\init.c", 878; put_number(shop_prices[5],4,2,23);
14658                        		__ld.wm		_shop_prices + 10
         02:D0E4  AD 3B 26   			lda.l	_shop_prices + 10
         02:D0E7  AC 3C 26   			ldy.h	_shop_prices + 10
14659                        		__st.wmq	_bx
         02:D0EA  85 FA      			sta.l	_bx
         02:D0EC  84 FB      			sty.h	_bx
14660                        		__st.umiq	4, _cl
         02:D0EE  A9 04      			lda.l	#4
         02:D0F0  85 FC      			sta	_cl
14661                        		__st.umiq	2, _dil
         02:D0F2  A9 02      			lda.l	#2
         02:D0F4  85 F0      			sta	_dil
14662                        		__st.umiq	23, _dih
         02:D0F6  A9 17      			lda.l	#23
         02:D0F8  85 F1      			sta	_dih
14663                        		__call		_put_number.4
         02:D0FA  20 9F FF   			call	_put_number.4
14664                        	
14665                        		.dbg	line,	"include\init.c", 879; put_number(shop_prices[6],4,7,23);
14666                        		__ld.wm		_shop_prices + 12
         02:D0FD  AD 3D 26   			lda.l	_shop_prices + 12
         02:D100  AC 3E 26   			ldy.h	_shop_prices + 12
14667                        		__st.wmq	_bx
         02:D103  85 FA      			sta.l	_bx
         02:D105  84 FB      			sty.h	_bx
14668                        		__st.umiq	4, _cl
         02:D107  A9 04      			lda.l	#4
         02:D109  85 FC      			sta	_cl
14669                        		__st.umiq	7, _dil
         02:D10B  A9 07      			lda.l	#7
         02:D10D  85 F0      			sta	_dil
14670                        		__st.umiq	23, _dih
         02:D10F  A9 17      			lda.l	#23
         02:D111  85 F1      			sta	_dih
14671                        		__call		_put_number.4
         02:D113  20 9F FF   			call	_put_number.4
14672                        	
14673                        		.dbg	line,	"include\init.c", 880; put_number(shop_prices[7],4,12,23);
14674                        		__ld.wm		_shop_prices + 14
         02:D116  AD 3F 26   			lda.l	_shop_prices + 14
         02:D119  AC 40 26   			ldy.h	_shop_prices + 14
14675                        		__st.wmq	_bx
         02:D11C  85 FA      			sta.l	_bx
         02:D11E  84 FB      			sty.h	_bx
14676                        		__st.umiq	4, _cl
         02:D120  A9 04      			lda.l	#4
         02:D122  85 FC      			sta	_cl
14677                        		__st.umiq	12, _dil
         02:D124  A9 0C      			lda.l	#12
         02:D126  85 F0      			sta	_dil
14678                        		__st.umiq	23, _dih
         02:D128  A9 17      			lda.l	#23
         02:D12A  85 F1      			sta	_dih
14679                        		__call		_put_number.4
         02:D12C  20 9F FF   			call	_put_number.4
14680                        	
14681                        		.dbg	line,	"include\init.c", 881; put_number(shop_prices[8],4,17,23);
14682                        		__ld.wm		_shop_prices + 16
         02:D12F  AD 41 26   			lda.l	_shop_prices + 16
         02:D132  AC 42 26   			ldy.h	_shop_prices + 16
14683                        		__st.wmq	_bx
         02:D135  85 FA      			sta.l	_bx
         02:D137  84 FB      			sty.h	_bx
14684                        		__st.umiq	4, _cl
         02:D139  A9 04      			lda.l	#4
         02:D13B  85 FC      			sta	_cl
14685                        		__st.umiq	17, _dil
         02:D13D  A9 11      			lda.l	#17
         02:D13F  85 F0      			sta	_dil
14686                        		__st.umiq	23, _dih
         02:D141  A9 17      			lda.l	#23
         02:D143  85 F1      			sta	_dih
14687                        		__call		_put_number.4
         02:D145  20 9F FF   			call	_put_number.4
14688                        	
14689                        		.dbg	line,	"include\init.c", 882; put_number(shop_prices[9],4,22,23);
14690                        		__ld.wm		_shop_prices + 18
         02:D148  AD 43 26   			lda.l	_shop_prices + 18
         02:D14B  AC 44 26   			ldy.h	_shop_prices + 18
14691                        		__st.wmq	_bx
         02:D14E  85 FA      			sta.l	_bx
         02:D150  84 FB      			sty.h	_bx
14692                        		__st.umiq	4, _cl
         02:D152  A9 04      			lda.l	#4
         02:D154  85 FC      			sta	_cl
14693                        		__st.umiq	22, _dil
         02:D156  A9 16      			lda.l	#22
         02:D158  85 F0      			sta	_dil
14694                        		__st.umiq	23, _dih
         02:D15A  A9 17      			lda.l	#23
         02:D15C  85 F1      			sta	_dih
14695                        		__call		_put_number.4
         02:D15E  20 9F FF   			call	_put_number.4
14696                        	
14697                        		.dbg	line,	"include\init.c", 887; //--------------------------------------------------------------------------------------//
14698                        	
14699                        		.dbg	line,	"include\init.c", 888; //                                   LOAD BG PALETTES                                   //
14700                        	
14701                        		.dbg	line,	"include\init.c", 889; //--------------------------------------------------------------------------------------//
14702                        	
14703                        		.dbg	line,	"include\init.c", 891; load_palette( 0, palette_SHOP, 16 );
14704                        		__st.umiq	0, _al
         02:D161  64 F8      			stz	_al
14705                        		__farptr	_palette_SHOP, _bp_bank, _bp
         02:D163  A9 E0      			lda.l	#$6000 + ($1FFF & (_palette_SHOP))
         02:D165  85 EC      			sta.l	_bp
         02:D167  A9 65      			lda.h	#$6000 + ($1FFF & (_palette_SHOP))
         02:D169  85 ED      			sta.h	_bp
         02:D16B  A9 0E      			lda	#bank(_palette_SHOP)
         02:D16D  85 02      			sta	_bp_bank
14706                        		__st.umiq	16, _ah
         02:D16F  A9 10      			lda.l	#16
         02:D171  85 F9      			sta	_ah
14707                        		__call		_load_palette.3
         02:D173  20 EB FE   			call	_load_palette.3
14708                        	
14709                        		.dbg	line,	"include\init.c", 896; //**************************************************************************************//
14710                        	
14711                        		.dbg	line,	"include\init.c", 897; //                                                                                      //
14712                        	
14713                        		.dbg	line,	"include\init.c", 898; //                                       SPRITES                                        //
14714                        	
14715                        		.dbg	line,	"include\init.c", 899; //                                                                                      //
14716                        	
14717                        		.dbg	line,	"include\init.c", 900; //**************************************************************************************//
14718                        	
14719                        		.dbg	line,	"include\init.c", 902; //--------------------------------------------------------------------------------------//
14720                        	
14721                        		.dbg	line,	"include\init.c", 903; //                                   HIDE ALL SPRITES                                   //
14722                        	
14723                        		.dbg	line,	"include\init.c", 904; //--------------------------------------------------------------------------------------//
14724                        	
14725                        		.dbg	line,	"include\init.c", 906; for(i=0 ; i<63 ; i++)
14726                        		__st.umiq	0, __init_SHOP_end - 1  /* i */
         02:D176  9C 10 23   			stz	__init_SHOP_end - 1
14727    02:D179             	.LL623:
14728                        		__ld.umq	__init_SHOP_end - 1  /* i */
         02:D179  AD 10 23   			lda	__init_SHOP_end - 1
14729                        		__ult_b.uiq	63
         02:D17C  C9 3F      			cmp	#63		; Subtract integer from A.
         02:D17E  6A         			ror	a		; CC if A < integer.
         02:D17F  49 80      			eor	#$80
         02:D181  2A         			rol	a
14730                        		__btrue		.LL625
         02:D182  B0 07      			bcs	.LL625
14731                        		__bra		.LL626
         02:D184  80 19      			bra	.LL626
14732    02:D186             	.LL624:
14733                        		__inc.umq	__init_SHOP_end - 1  /* i */
         02:D186  EE 10 23   			inc	__init_SHOP_end - 1
14734                        		__bra		.LL623
         02:D189  80 EE      			bra	.LL623
14735    02:D18B             	.LL625:
14736                        	
14737                        		.dbg	line,	"include\init.c", 907; {
14738                        	
14739                        		.dbg	line,	"include\init.c", 908; spr_set(i);
14740                        		__ld.umq	__init_SHOP_end - 1  /* i */
         02:D18B  AD 10 23   			lda	__init_SHOP_end - 1
14741                        		__call		_spr_set.1
         02:D18E  20 DD E7   			call	_spr_set.1
14742                        	
14743                        		.dbg	line,	"include\init.c", 909; spr_hide();
14744                        		__call		_spr_hide
         02:D191  20 F8 E7   			call	_spr_hide
14745                        	
14746                        		.dbg	line,	"include\init.c", 911; sgx_spr_set(i);
14747                        		__ld.umq	__init_SHOP_end - 1  /* i */
         02:D194  AD 10 23   			lda	__init_SHOP_end - 1
14748                        		__call		_sgx_spr_set.1
         02:D197  20 8A E8   			call	_sgx_spr_set.1
14749                        	
14750                        		.dbg	line,	"include\init.c", 912; sgx_spr_hide();
14751                        		__call		_sgx_spr_hide
         02:D19A  20 A5 E8   			call	_sgx_spr_hide
14752                        	
14753                        		.dbg	line,	"include\init.c", 913; }
14754                        		__bra		.LL624
         02:D19D  80 E7      			bra	.LL624
14755    02:D19F             	.LL626:
14756                        	
14757                        		.dbg	line,	"include\init.c", 915; //--------------------------------------------------------------------------------------//
14758                        	
14759                        		.dbg	line,	"include\init.c", 916; //                                        CURSOR                                        //
14760                        	
14761                        		.dbg	line,	"include\init.c", 917; //--------------------------------------------------------------------------------------//
14762                        	
14763                        		.dbg	line,	"include\init.c", 919; // LOAD CURSOR TILES //
14764                        	
14765                        		.dbg	line,	"include\init.c", 920; load_vram(0x2000, tiles_SPR_CURSOR , TILES_16);
14766                        		__st.wmiq	8192, _di
         02:D19F  64 F0      			stz.l	_di
         02:D1A1  A9 20      			lda.h	#8192
         02:D1A3  85 F1      			sta.h	_di
14767                        		__farptr	_tiles_SPR_CURSOR, _bp_bank, _bp
         02:D1A5  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_CURSOR))
         02:D1A7  85 EC      			sta.l	_bp
         02:D1A9  A9 6E      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_CURSOR))
         02:D1AB  85 ED      			sta.h	_bp
         02:D1AD  A9 13      			lda	#bank(_tiles_SPR_CURSOR)
         02:D1AF  85 02      			sta	_bp_bank
14768                        		__st.wmiq	256, _ax
         02:D1B1  64 F8      			stz.l	_ax
         02:D1B3  A9 01      			lda.h	#256
         02:D1B5  85 F9      			sta.h	_ax
14769                        		 _load_vram.3
         02:D1B7  82         			clx				; Offset to PCE VDC.
         02:D1B8  20 4F FF   			call	load_vram_x
14770                        	
14771                        		.dbg	line,	"include\init.c", 923; // SELECT CURSOR SPRITE //
14772                        	
14773                        		.dbg	line,	"include\init.c", 924; spr_set(0);
14774                        		__ld.uiq	0
         02:D1BB  62         			cla
14775                        		__call		_spr_set.1
         02:D1BC  20 DD E7   			call	_spr_set.1
14776                        	
14777                        		.dbg	line,	"include\init.c", 925; spr_hide();
14778                        		__call		_spr_hide
         02:D1BF  20 F8 E7   			call	_spr_hide
14779                        	
14780                        		.dbg	line,	"include\init.c", 928; //spr_x(24);
14781                        	
14782                        		.dbg	line,	"include\init.c", 929; //spr_y(144);
14783                        	
14784                        		.dbg	line,	"include\init.c", 931; // SET TILES DATA FOR THE CURSOR //
14785                        	
14786                        		.dbg	line,	"include\init.c", 932; spr_pattern(0x2000);
14787                        		__ld.wi		8192
         02:D1C2  62         			cla
         02:D1C3  A0 20      			ldy.h	#8192
14788                        		__call		_spr_pattern.1
         02:D1C5  20 26 E8   			call	_spr_pattern.1
14789                        	
14790                        		.dbg	line,	"include\init.c", 935; spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_32x32);
14791                        		__st.umiq	185, _al
         02:D1C8  A9 B9      			lda.l	#185
         02:D1CA  85 F8      			sta	_al
14792                        		__ld.uiq	17
         02:D1CC  A9 11      			lda	#17
14793                        		__call		_spr_ctrl.2
         02:D1CE  20 3C E8   			call	_spr_ctrl.2
14794                        	
14795                        		.dbg	line,	"include\init.c", 938; spr_pal(16);
14796                        		__ld.uiq	16
         02:D1D1  A9 10      			lda	#16
14797                        		__call		_spr_pal.1
         02:D1D3  20 4D E8   			call	_spr_pal.1
14798                        	
14799                        		.dbg	line,	"include\init.c", 939; spr_pri(TRUE);
14800                        		__ld.uiq	1
         02:D1D6  A9 01      			lda	#1
14801                        		__call		_spr_pri.1
         02:D1D8  20 5C E8   			call	_spr_pri.1
14802                        	
14803                        		.dbg	line,	"include\init.c", 942; // UPDATE PCE SAT //
14804                        	
14805                        		.dbg	line,	"include\init.c", 943; satb_update();
14806                        		__call		_satb_update
         02:D1DB  20 91 FE   			call	_satb_update
14807                        	
14808                        		.dbg	line,	"include\init.c", 944; sgx_satb_update();
14809                        		__call		_sgx_satb_update
         02:D1DE  20 73 FE   			call	_sgx_satb_update
14810                        	
14811                        		.dbg	line,	"include\init.c", 948; //--------------------------------------------------------------------------------------//
14812                        	
14813                        		.dbg	line,	"include\init.c", 949; //                                LOAD SPRITES PALETTES                                 //
14814                        	
14815                        		.dbg	line,	"include\init.c", 950; //--------------------------------------------------------------------------------------//
14816                        	
14817                        		.dbg	line,	"include\init.c", 952; load_palette( 16, palette_objects_2, 1 );
14818                        		__st.umiq	16, _al
         02:D1E1  A9 10      			lda.l	#16
         02:D1E3  85 F8      			sta	_al
14819                        		__farptr	_palette_objects_2, _bp_bank, _bp
         02:D1E5  A9 60      			lda.l	#$6000 + ($1FFF & (_palette_objects_2))
         02:D1E7  85 EC      			sta.l	_bp
         02:D1E9  A9 60      			lda.h	#$6000 + ($1FFF & (_palette_objects_2))
         02:D1EB  85 ED      			sta.h	_bp
         02:D1ED  A9 13      			lda	#bank(_palette_objects_2)
         02:D1EF  85 02      			sta	_bp_bank
14820                        		__st.umiq	1, _ah
         02:D1F1  A9 01      			lda.l	#1
         02:D1F3  85 F9      			sta	_ah
14821                        		__call		_load_palette.3
         02:D1F5  20 EB FE   			call	_load_palette.3
14822                        	
14823                        		.dbg	line,	"include\init.c", 956; // VSYNC //
14824                        	
14825                        		.dbg	line,	"include\init.c", 957; vsync();
14826                        		__call		_vsync
         02:D1F8  20 09 E3   			call	_vsync
14827                        	
14828                        		.dbg	line,	"include\init.c", 959; // ENABLE DISPLAY //
14829                        	
14830                        		.dbg	line,	"include\init.c", 960; disp_on();
14831                        		__call		_disp_on
         02:D1FB  20 16 E4   			call	_disp_on
14832                        	
14833                        		.dbg	line,	"include\init.c", 961; }
14834    02:D1FE             	.LL617:
14835                        		__return	0
         02:D1FE  4C EF FF   			jmp	leave_proc
14836                        		.dbg	clear
14837                        		.endp
14838               7060     		.data
14839               230F     		.bss
14840    F8:230F             	__init_SHOP_loc:
14841    F8:230F             			ds	2
14842    F8:2311             	__init_SHOP_end:
14843               E309     		.code
14844                        		.pceas
14845                        	
14846                        		.dbg	line,	"main.c", 31; main()
14847                        		.dbg	line,	"main.c", 32; {
14848                        	;***********************
14849                        	;***********************
14850                        	
14851                        		.hucc
14852    01:DD74             		.proc		_main
14853                        		__enter		_main
14854                        	
14855                        		.dbg	line,	"main.c", 33; if(!sgx_detect())
14856                        		 _sgx_detect
         01:DD74  AD E8 22   			lda	sgx_detected
         01:DD77  C2         			cly
14857                        		__not.wr
         01:DD78  84 00      			sty	__temp
         01:DD7A  05 00      			ora	__temp
         01:DD7C  18         			clc
         01:DD7D  D0 01      			bne	!+
         01:DD7F  38         			sec
         01:DD80             	!:
14858                        		__bfalse	.LL628
         01:DD80  90 14      			bcc	.LL628
14859                        	
14860                        		.dbg	line,	"main.c", 34; {
14861                        	
14862                        		.dbg	line,	"main.c", 35; put_string("Halt: SGX hardware not found", 2, 13);
14863                        		__ld.wi		__const1+0
         01:DD82  62         			cla
         01:DD83  A0 60      			ldy.h	#__const1+0
14864                        		__st.wmq	_bp
         01:DD85  85 EC      			sta.l	_bp
         01:DD87  84 ED      			sty.h	_bp
14865                        		__st.umiq	2, _dil
         01:DD89  A9 02      			lda.l	#2
         01:DD8B  85 F0      			sta	_dil
14866                        		__st.umiq	13, _dih
         01:DD8D  A9 0D      			lda.l	#13
         01:DD8F  85 F1      			sta	_dih
14867                        		__call		_put_string.3
         01:DD91  20 68 E6   			call	_put_string.3
14868                        	
14869                        		.dbg	line,	"main.c", 37; for(;;)
14870    01:DD94             	.LL629	.alias		.LL631
14871    01:DD94             	.LL630	.alias		.LL631
14872    01:DD94             	.LL631:
14873                        	
14874                        		.dbg	line,	"main.c", 38; {
14875                        	
14876                        		.dbg	line,	"main.c", 39; // INFINITE LOOP //
14877                        	
14878                        		.dbg	line,	"main.c", 40; }
14879                        		__bra		.LL631
         01:DD94  80 FE      			bra	.LL631
14880    01:DD96             	.LL632:
14881                        	
14882                        		.dbg	line,	"main.c", 41; }
14883                        	
14884                        		.dbg	line,	"main.c", 46; init_SYSTEM();
14885    01:DD96             	.LL628:
14886                        		__call		_init_SYSTEM
         01:DD96  20 69 FE   			call	_init_SYSTEM
14887                        	
14888                        		.dbg	line,	"main.c", 47; 
14889                        	
14890                        		.dbg	line,	"main.c", 48; 
14891                        	
14892                        		.dbg	line,	"main.c", 49; init_VARIABLES();
14893                        		__call		_init_VARIABLES
         01:DD99  20 5F FE   			call	_init_VARIABLES
14894                        	
14895                        		.dbg	line,	"main.c", 52; init_PLAYER();
14896                        		__call		_init_PLAYER
         01:DD9C  20 55 FE   			call	_init_PLAYER
14897                        	
14898                        		.dbg	line,	"main.c", 57; //**************************************************************************************//
14899                        	
14900                        		.dbg	line,	"main.c", 58; //                                                                                      //
14901                        	
14902                        		.dbg	line,	"main.c", 59; //                                         MAIN                                         //
14903                        	
14904                        		.dbg	line,	"main.c", 60; //                                                                                      //
14905                        	
14906                        		.dbg	line,	"main.c", 61; //**************************************************************************************//
14907                        	
14908                        		.dbg	line,	"main.c", 62; for(;;)
14909    01:DD9F             	.LL633:
14910    01:DD9F             	.LL634:
14911    01:DD9F             	.LL635:
14912                        	
14913                        		.dbg	line,	"main.c", 63; {
14914                        	
14915                        		.dbg	line,	"main.c", 64; switch(sequence_id)
14916                        		__ld.umq	_sequence_id
         01:DD9F  AD 11 23   			lda	_sequence_id
14917                        		__bra		.LL637
         01:DDA2  4C 2B DF   			bra	.LL637
14918                        	
14919                        		.dbg	line,	"main.c", 65; {
14920                        	
14921                        		.dbg	line,	"main.c", 66; //-----------------------------------------------------------------------------//
14922                        	
14923                        		.dbg	line,	"main.c", 67; //                                    TITLE                                    //
14924                        	
14925                        		.dbg	line,	"main.c", 68; //-----------------------------------------------------------------------------//
14926                        	
14927                        		.dbg	line,	"main.c", 69; case SEQUENCE_TITLE:
14928    01:DDA5             	.LL639:
14929                        		__case		0
14930                        	
14931                        		.dbg	line,	"main.c", 70; break;
14932                        		__bra		.LL638
         01:DDA5  80 F8      			bra	.LL638
14933                        	
14934                        		.dbg	line,	"main.c", 73; //-----------------------------------------------------------------------------//
14935                        	
14936                        		.dbg	line,	"main.c", 74; //                                    INTRO                                    //
14937                        	
14938                        		.dbg	line,	"main.c", 75; //-----------------------------------------------------------------------------//
14939                        	
14940                        		.dbg	line,	"main.c", 76; case SEQUENCE_INTRO:
14941    01:DDA7             	.LL640:
14942                        		__case		1
14943                        	
14944                        		.dbg	line,	"main.c", 77; break;
14945                        		__bra		.LL638
         01:DDA7  80 F6      			bra	.LL638
14946                        	
14947                        		.dbg	line,	"main.c", 80; //-----------------------------------------------------------------------------//
14948                        	
14949                        		.dbg	line,	"main.c", 81; //                                    GAME                                     //
14950                        	
14951                        		.dbg	line,	"main.c", 82; //-----------------------------------------------------------------------------//
14952                        	
14953                        		.dbg	line,	"main.c", 83; case SEQUENCE_GAME:
14954    01:DDA9             	.LL641:
14955                        		__case		2
14956                        	
14957                        		.dbg	line,	"main.c", 84; if(sequence_loaded == FALSE)
14958                        		__not.um	_sequence_loaded
         01:DDA9  AD 12 23   			lda	_sequence_loaded
         01:DDAC  18         			clc
         01:DDAD  D0 01      			bne	!+
         01:DDAF  38         			sec
         01:DDB0             	!:
14959                        		__bfalse	.LL642
         01:DDB0  90 0A      			bcc	.LL642
14960                        	
14961                        		.dbg	line,	"main.c", 85; {
14962                        	
14963                        		.dbg	line,	"main.c", 86; init_LEVEL();
14964                        		__call		_init_LEVEL
         01:DDB2  20 4B FE   			call	_init_LEVEL
14965                        	
14966                        		.dbg	line,	"main.c", 88; sequence_loaded = TRUE;
14967                        		__st.umiq	1, _sequence_loaded
         01:DDB5  A9 01      			lda.l	#1
         01:DDB7  8D 12 23   			sta	_sequence_loaded
14968                        	
14969                        		.dbg	line,	"main.c", 89; }
14970                        	
14971                        		.dbg	line,	"main.c", 92; else
14972                        		__bra		.LL643
         01:DDBA  80 E3      			bra	.LL643
14973    01:DDBC             	.LL642:
14974                        	
14975                        		.dbg	line,	"main.c", 93; {
14976                        	
14977                        		.dbg	line,	"main.c", 94; switch(level_id)
14978                        		__ld.umq	_level_id
         01:DDBC  AD 13 23   			lda	_level_id
14979                        		__bra		.LL644
         01:DDBF  80 3D      			bra	.LL644
14980                        	
14981                        		.dbg	line,	"main.c", 95; {
14982                        	
14983                        		.dbg	line,	"main.c", 96; case 1:
14984    01:DDC1             	.LL646:
14985                        		__case		1
14986                        	
14987                        		.dbg	line,	"main.c", 97; vsync();
14988                        		__call		_vsync
         01:DDC1  20 09 E3   			call	_vsync
14989                        	
14990                        		.dbg	line,	"main.c", 99; update_PLAYER();
14991                        		__call		_update_PLAYER
         01:DDC4  20 41 FE   			call	_update_PLAYER
14992                        	
14993                        		.dbg	line,	"main.c", 100; //put_number(player_state,1,0,0);
14994                        	
14995                        		.dbg	line,	"main.c", 103; scroll_object();
14996                        		__call		_scroll_object
         01:DDC7  20 CD FE   			call	_scroll_object
14997                        	
14998                        		.dbg	line,	"main.c", 104; scroll_chest();
14999                        		__call		_scroll_chest
         01:DDCA  20 AF FE   			call	_scroll_chest
15000                        	
15001                        		.dbg	line,	"main.c", 105; scroll_npc();
15002                        		__call		_scroll_npc
         01:DDCD  20 37 FE   			call	_scroll_npc
15003                        	
15004                        		.dbg	line,	"main.c", 107; check_OBJECT();
15005                        		__call		_check_OBJECT
         01:DDD0  20 2D FE   			call	_check_OBJECT
15006                        	
15007                        		.dbg	line,	"main.c", 108; check_NPC();
15008                        		__call		_check_NPC
         01:DDD3  20 23 FE   			call	_check_NPC
15009                        	
15010                        		.dbg	line,	"main.c", 110; display_TIME_LEVEL();
15011                        		__call		_display_TIME_LEVEL
         01:DDD6  20 09 FF   			call	_display_TIME_LEVEL
15012                        	
15013                        		.dbg	line,	"main.c", 112; satb_update();
15014                        		__call		_satb_update
         01:DDD9  20 91 FE   			call	_satb_update
15015                        	
15016                        		.dbg	line,	"main.c", 113; sgx_satb_update();
15017                        		__call		_sgx_satb_update
         01:DDDC  20 73 FE   			call	_sgx_satb_update
15018                        	
15019                        		.dbg	line,	"main.c", 115; scroll_BG();
15020                        		__call		_scroll_BG
         01:DDDF  20 19 FE   			call	_scroll_BG
15021                        	
15022                        		.dbg	line,	"main.c", 117; joypad_DIR();
15023                        		__call		_joypad_DIR
         01:DDE2  20 0F FE   			call	_joypad_DIR
15024                        	
15025                        		.dbg	line,	"main.c", 118; joypad_BUTTONS();
15026                        		__call		_joypad_BUTTONS
         01:DDE5  20 05 FE   			call	_joypad_BUTTONS
15027                        	
15028                        		.dbg	line,	"main.c", 120; break;
15029                        		__bra		.LL645
         01:DDE8  80 B5      			bra	.LL645
15030                        	
15031                        		.dbg	line,	"main.c", 123; case 2:
15032    01:DDEA             	.LL647:
15033                        		__case		2
15034                        	
15035                        		.dbg	line,	"main.c", 124; vsync();
15036                        		__call		_vsync
         01:DDEA  20 09 E3   			call	_vsync
15037                        	
15038                        		.dbg	line,	"main.c", 125; break;
15039                        		__bra		.LL645
         01:DDED  80 B0      			bra	.LL645
15040                        	
15041                        		.dbg	line,	"main.c", 128; case 3:
15042    01:DDEF             	.LL648:
15043                        		__case		3
15044                        	
15045                        		.dbg	line,	"main.c", 129; vsync();
15046                        		__call		_vsync
         01:DDEF  20 09 E3   			call	_vsync
15047                        	
15048                        		.dbg	line,	"main.c", 130; break;
15049                        		__bra		.LL645
         01:DDF2  80 AB      			bra	.LL645
15050                        	
15051                        		.dbg	line,	"main.c", 133; case 4:
15052    01:DDF4             	.LL649:
15053                        		__case		4
15054                        	
15055                        		.dbg	line,	"main.c", 134; vsync();
15056                        		__call		_vsync
         01:DDF4  20 09 E3   			call	_vsync
15057                        	
15058                        		.dbg	line,	"main.c", 135; break;
15059                        		__bra		.LL645
         01:DDF7  80 A6      			bra	.LL645
15060                        	
15061                        		.dbg	line,	"main.c", 138; case 5:
15062    01:DDF9             	.LL650:
15063                        		__case		5
15064                        	
15065                        		.dbg	line,	"main.c", 139; vsync();
15066                        		__call		_vsync
         01:DDF9  20 09 E3   			call	_vsync
15067                        	
15068                        		.dbg	line,	"main.c", 140; break;
15069                        		__bra		.LL645
         01:DDFC  80 A1      			bra	.LL645
15070                        	
15071                        		.dbg	line,	"main.c", 142; }
15072    01:DDFE             	.LL644:
15073                        		__switch_r.ur	0, 5
         01:DDFE  C9 06      			cmp	#(5 - 0) + 1
         01:DE00  90 02      			bcc	!found+
         01:DE02  A9 06      	!default:	lda	#(5 - 0) + 1
         01:DE04  0A         	!found:		asl	a
         01:DE05  AA         			tax
         01:DE06  7C 09 DE   			jmp	[!table+, x]
15074                        	
15075    01:DE09  9F DD      	!table:		dw	.LL645, .LL646, .LL647, .LL648, .LL649, .LL650
         01:DE0B  C1 DD       
         01:DE0D  EA DD       
         01:DE0F  EF DD       
         01:DE11  F4 DD       
         01:DE13  F9 DD       
15076    01:DE15  9F DD      			dw	.LL645
15077    01:DE17             	.LL645	.alias		.LL638
15078                        	
15079                        		.dbg	line,	"main.c", 143; }
15080    01:DE17             	.LL643	.alias		.LL638
15081                        	
15082                        		.dbg	line,	"main.c", 145; break;
15083                        		__bra		.LL638
         01:DE17  80 86      			bra	.LL638
15084                        	
15085                        		.dbg	line,	"main.c", 148; //-----------------------------------------------------------------------------//
15086                        	
15087                        		.dbg	line,	"main.c", 149; //                                     NPC                                     //
15088                        	
15089                        		.dbg	line,	"main.c", 150; //-----------------------------------------------------------------------------//
15090                        	
15091                        		.dbg	line,	"main.c", 151; case SEQUENCE_NPC:
15092    01:DE19             	.LL651:
15093                        		__case		3
15094                        	
15095                        		.dbg	line,	"main.c", 152; break;
15096                        		__bra		.LL638
         01:DE19  80 84      			bra	.LL638
15097                        	
15098                        		.dbg	line,	"main.c", 155; //-----------------------------------------------------------------------------//
15099                        	
15100                        		.dbg	line,	"main.c", 156; //                                    SHOP                                     //
15101                        	
15102                        		.dbg	line,	"main.c", 157; //-----------------------------------------------------------------------------//
15103                        	
15104                        		.dbg	line,	"main.c", 158; case SEQUENCE_SHOP:
15105    01:DE1B             	.LL652:
15106                        		__case		4
15107                        	
15108                        		.dbg	line,	"main.c", 159; if(sequence_loaded == FALSE)
15109                        		__not.um	_sequence_loaded
         01:DE1B  AD 12 23   			lda	_sequence_loaded
         01:DE1E  18         			clc
         01:DE1F  D0 01      			bne	!+
         01:DE21  38         			sec
         01:DE22             	!:
15110                        		__bfalse	.LL653
         01:DE22  90 0B      			bcc	.LL653
15111                        	
15112                        		.dbg	line,	"main.c", 160; {
15113                        	
15114                        		.dbg	line,	"main.c", 161; init_SHOP();
15115                        		__call		_init_SHOP
         01:DE24  20 FB FD   			call	_init_SHOP
15116                        	
15117                        		.dbg	line,	"main.c", 163; sequence_loaded = TRUE;
15118                        		__st.umiq	1, _sequence_loaded
         01:DE27  A9 01      			lda.l	#1
         01:DE29  8D 12 23   			sta	_sequence_loaded
15119                        	
15120                        		.dbg	line,	"main.c", 164; }
15121                        	
15122                        		.dbg	line,	"main.c", 165; 
15123                        	
15124                        		.dbg	line,	"main.c", 166; else
15125                        		__bra		.LL654
         01:DE2C  4C 9F DD   			bra	.LL654
15126    01:DE2F             	.LL653:
15127                        	
15128                        		.dbg	line,	"main.c", 167; {
15129                        	
15130                        		.dbg	line,	"main.c", 168; switch(shop_phase)
15131                        		__ld.umq	_shop_phase
         01:DE2F  AD D1 23   			lda	_shop_phase
15132                        		__bra		.LL655
         01:DE32  4C 15 DF   			bra	.LL655
15133                        	
15134                        		.dbg	line,	"main.c", 169; {
15135                        	
15136                        		.dbg	line,	"main.c", 170; case SHOP_PHASE_ENTER:
15137    01:DE35             	.LL657:
15138                        		__case		0
15139                        	
15140                        		.dbg	line,	"main.c", 171; vsync();
15141                        		__call		_vsync
         01:DE35  20 09 E3   			call	_vsync
15142                        	
15143                        		.dbg	line,	"main.c", 173; if(shop_counter == 0)
15144                        		__not.um	_shop_counter
         01:DE38  AD D2 23   			lda	_shop_counter
         01:DE3B  18         			clc
         01:DE3C  D0 01      			bne	!+
         01:DE3E  38         			sec
         01:DE3F             	!:
15145                        		__bfalse	.LL658
         01:DE3F  90 28      			bcc	.LL658
15146                        	
15147                        		.dbg	line,	"main.c", 174; {
15148                        	
15149                        		.dbg	line,	"main.c", 175; put_string("Maybe, i can sell you" ,  2 , 15);
15150                        		__ld.wi		__const1+29
         01:DE41  A9 1D      			lda.l	#__const1+29
         01:DE43  A0 60      			ldy.h	#__const1+29
15151                        		__st.wmq	_bp
         01:DE45  85 EC      			sta.l	_bp
         01:DE47  84 ED      			sty.h	_bp
15152                        		__st.umiq	2, _dil
         01:DE49  A9 02      			lda.l	#2
         01:DE4B  85 F0      			sta	_dil
15153                        		__st.umiq	15, _dih
         01:DE4D  A9 0F      			lda.l	#15
         01:DE4F  85 F1      			sta	_dih
15154                        		__call		_put_string.3
         01:DE51  20 68 E6   			call	_put_string.3
15155                        	
15156                        		.dbg	line,	"main.c", 176; put_string("something..." , 18 , 16);
15157                        		__ld.wi		__const1+51
         01:DE54  A9 33      			lda.l	#__const1+51
         01:DE56  A0 60      			ldy.h	#__const1+51
15158                        		__st.wmq	_bp
         01:DE58  85 EC      			sta.l	_bp
         01:DE5A  84 ED      			sty.h	_bp
15159                        		__st.umiq	18, _dil
         01:DE5C  A9 12      			lda.l	#18
         01:DE5E  85 F0      			sta	_dil
15160                        		__st.umiq	16, _dih
         01:DE60  A9 10      			lda.l	#16
         01:DE62  85 F1      			sta	_dih
15161                        		__call		_put_string.3
         01:DE64  20 68 E6   			call	_put_string.3
15162                        	
15163                        		.dbg	line,	"main.c", 177; }
15164                        	
15165                        		.dbg	line,	"main.c", 179; else if(shop_counter == 120)
15166                        		__bra		.LL659
         01:DE67  80 44      			bra	.LL659
15167    01:DE69             	.LL658:
15168                        		__ld.umq	_shop_counter
         01:DE69  AD D2 23   			lda	_shop_counter
15169                        		__equ_b.uiq	120
         01:DE6C  C9 78      			cmp	#120
         01:DE6E  F0 01      			beq	!+
         01:DE70  18         			clc
         01:DE71             	!:
15170                        		__bfalse	.LL660
         01:DE71  90 3A      			bcc	.LL660
15171                        	
15172                        		.dbg	line,	"main.c", 180; {
15173                        	
15174                        		.dbg	line,	"main.c", 181; put_string("                     " ,  2 , 15);
15175                        		__ld.wi		__const1+64
         01:DE73  A9 40      			lda.l	#__const1+64
         01:DE75  A0 60      			ldy.h	#__const1+64
15176                        		__st.wmq	_bp
         01:DE77  85 EC      			sta.l	_bp
         01:DE79  84 ED      			sty.h	_bp
15177                        		__st.umiq	2, _dil
         01:DE7B  A9 02      			lda.l	#2
         01:DE7D  85 F0      			sta	_dil
15178                        		__st.umiq	15, _dih
         01:DE7F  A9 0F      			lda.l	#15
         01:DE81  85 F1      			sta	_dih
15179                        		__call		_put_string.3
         01:DE83  20 68 E6   			call	_put_string.3
15180                        	
15181                        		.dbg	line,	"main.c", 182; put_string("            " , 18 , 16);
15182                        		__ld.wi		__const1+86
         01:DE86  A9 56      			lda.l	#__const1+86
         01:DE88  A0 60      			ldy.h	#__const1+86
15183                        		__st.wmq	_bp
         01:DE8A  85 EC      			sta.l	_bp
         01:DE8C  84 ED      			sty.h	_bp
15184                        		__st.umiq	18, _dil
         01:DE8E  A9 12      			lda.l	#18
         01:DE90  85 F0      			sta	_dil
15185                        		__st.umiq	16, _dih
         01:DE92  A9 10      			lda.l	#16
         01:DE94  85 F1      			sta	_dih
15186                        		__call		_put_string.3
         01:DE96  20 68 E6   			call	_put_string.3
15187                        	
15188                        		.dbg	line,	"main.c", 184; spr_x(24);
15189                        		__ld.wi		24
         01:DE99  A9 18      			lda.l	#24
         01:DE9B  C2         			cly
15190                        		__call		_spr_x.1
         01:DE9C  20 0A E8   			call	_spr_x.1
15191                        	
15192                        		.dbg	line,	"main.c", 185; spr_y(144);
15193                        		__ld.wi		144
         01:DE9F  A9 90      			lda.l	#144
         01:DEA1  C2         			cly
15194                        		__call		_spr_y.1
         01:DEA2  20 19 E8   			call	_spr_y.1
15195                        	
15196                        		.dbg	line,	"main.c", 186; satb_update();
15197                        		__call		_satb_update
         01:DEA5  20 91 FE   			call	_satb_update
15198                        	
15199                        		.dbg	line,	"main.c", 188; shop_phase = SHOP_PHASE_BUY;
15200                        		__st.umiq	1, _shop_phase
         01:DEA8  A9 01      			lda.l	#1
         01:DEAA  8D D1 23   			sta	_shop_phase
15201                        	
15202                        		.dbg	line,	"main.c", 189; }
15203                        	
15204                        		.dbg	line,	"main.c", 191; shop_counter++;
15205    01:DEAD             	.LL660:
15206    01:DEAD             	.LL659:
15207                        		__inc.umq	_shop_counter
         01:DEAD  EE D2 23   			inc	_shop_counter
15208                        	
15209                        		.dbg	line,	"main.c", 193; break;
15210                        		__bra		.LL656
         01:DEB0  4C 9F DD   			bra	.LL656
15211                        	
15212                        		.dbg	line,	"main.c", 194; 
15213                        	
15214                        		.dbg	line,	"main.c", 196; case SHOP_PHASE_BUY:
15215    01:DEB3             	.LL661:
15216                        		__case		1
15217                        	
15218                        		.dbg	line,	"main.c", 197; vsync();
15219                        		__call		_vsync
         01:DEB3  20 09 E3   			call	_vsync
15220                        	
15221                        		.dbg	line,	"main.c", 199; joypad_BUTTONS_SHOP();
15222                        		__call		_joypad_BUTTONS_SHOP
         01:DEB6  20 F1 FD   			call	_joypad_BUTTONS_SHOP
15223                        	
15224                        		.dbg	line,	"main.c", 200; display_TIME_SHOP();
15225                        		__call		_display_TIME_SHOP
         01:DEB9  20 E7 FD   			call	_display_TIME_SHOP
15226                        	
15227                        		.dbg	line,	"main.c", 201; satb_update();
15228                        		__call		_satb_update
         01:DEBC  20 91 FE   			call	_satb_update
15229                        	
15230                        		.dbg	line,	"main.c", 203; break;
15231                        		__bra		.LL656
         01:DEBF  4C 9F DD   			bra	.LL656
15232                        	
15233                        		.dbg	line,	"main.c", 206; case SHOP_PHASE_EXIT:
15234    01:DEC2             	.LL662:
15235                        		__case		2
15236                        	
15237                        		.dbg	line,	"main.c", 207; vsync();
15238                        		__call		_vsync
         01:DEC2  20 09 E3   			call	_vsync
15239                        	
15240                        		.dbg	line,	"main.c", 209; if(shop_counter == 0)
15241                        		__not.um	_shop_counter
         01:DEC5  AD D2 23   			lda	_shop_counter
         01:DEC8  18         			clc
         01:DEC9  D0 01      			bne	!+
         01:DECB  38         			sec
         01:DECC             	!:
15242                        		__bfalse	.LL663
         01:DECC  90 1F      			bcc	.LL663
15243                        	
15244                        		.dbg	line,	"main.c", 210; {
15245                        	
15246                        		.dbg	line,	"main.c", 211; put_string("GOOD LUCK!" , 11 , 16);
15247                        		__ld.wi		__const1+99
         01:DECE  A9 63      			lda.l	#__const1+99
         01:DED0  A0 60      			ldy.h	#__const1+99
15248                        		__st.wmq	_bp
         01:DED2  85 EC      			sta.l	_bp
         01:DED4  84 ED      			sty.h	_bp
15249                        		__st.umiq	11, _dil
         01:DED6  A9 0B      			lda.l	#11
         01:DED8  85 F0      			sta	_dil
15250                        		__st.umiq	16, _dih
         01:DEDA  A9 10      			lda.l	#16
         01:DEDC  85 F1      			sta	_dih
15251                        		__call		_put_string.3
         01:DEDE  20 68 E6   			call	_put_string.3
15252                        	
15253                        		.dbg	line,	"main.c", 213; // HIDE CURSOR //
15254                        	
15255                        		.dbg	line,	"main.c", 214; spr_set(0);
15256                        		__ld.uiq	0
         01:DEE1  62         			cla
15257                        		__call		_spr_set.1
         01:DEE2  20 DD E7   			call	_spr_set.1
15258                        	
15259                        		.dbg	line,	"main.c", 215; spr_hide();
15260                        		__call		_spr_hide
         01:DEE5  20 F8 E7   			call	_spr_hide
15261                        	
15262                        		.dbg	line,	"main.c", 216; satb_update();
15263                        		__call		_satb_update
         01:DEE8  20 91 FE   			call	_satb_update
15264                        	
15265                        		.dbg	line,	"main.c", 217; }
15266                        	
15267                        		.dbg	line,	"main.c", 219; else if(shop_counter == 120)
15268                        		__bra		.LL664
         01:DEEB  80 22      			bra	.LL664
15269    01:DEED             	.LL663:
15270                        		__ld.umq	_shop_counter
         01:DEED  AD D2 23   			lda	_shop_counter
15271                        		__equ_b.uiq	120
         01:DEF0  C9 78      			cmp	#120
         01:DEF2  F0 01      			beq	!+
         01:DEF4  18         			clc
         01:DEF5             	!:
15272                        		__bfalse	.LL665
         01:DEF5  90 18      			bcc	.LL665
15273                        	
15274                        		.dbg	line,	"main.c", 220; {
15275                        	
15276                        		.dbg	line,	"main.c", 221; disp_off();
15277                        		__call		_disp_off
         01:DEF7  20 29 E4   			call	_disp_off
15278                        	
15279                        		.dbg	line,	"main.c", 223; // REINIT PLAYER //
15280                        	
15281                        		.dbg	line,	"main.c", 224; init_PLAYER();
15282                        		__call		_init_PLAYER
         01:DEFA  20 55 FE   			call	_init_PLAYER
15283                        	
15284                        		.dbg	line,	"main.c", 226; shop_phase = SHOP_PHASE_EXIT;
15285                        		__st.umiq	2, _shop_phase
         01:DEFD  A9 02      			lda.l	#2
         01:DEFF  8D D1 23   			sta	_shop_phase
15286                        	
15287                        		.dbg	line,	"main.c", 227; respawn = RESPAWN_SHOP;
15288                        		__st.umiq	2, _respawn
         01:DF02  A9 02      			lda.l	#2
         01:DF04  8D 14 23   			sta	_respawn
15289                        	
15290                        		.dbg	line,	"main.c", 228; sequence_loaded = FALSE;
15291                        		__st.umiq	0, _sequence_loaded
         01:DF07  9C 12 23   			stz	_sequence_loaded
15292                        	
15293                        		.dbg	line,	"main.c", 229; sequence_id = SEQUENCE_GAME;
15294                        		__st.umiq	2, _sequence_id
         01:DF0A  A9 02      			lda.l	#2
         01:DF0C  8D 11 23   			sta	_sequence_id
15295                        	
15296                        		.dbg	line,	"main.c", 230; }
15297                        	
15298                        		.dbg	line,	"main.c", 232; shop_counter++;
15299    01:DF0F             	.LL665:
15300    01:DF0F             	.LL664:
15301                        		__inc.umq	_shop_counter
         01:DF0F  EE D2 23   			inc	_shop_counter
15302                        	
15303                        		.dbg	line,	"main.c", 234; break;
15304                        		__bra		.LL656
         01:DF12  4C 9F DD   			bra	.LL656
15305                        	
15306                        		.dbg	line,	"main.c", 235; }
15307    01:DF15             	.LL655:
15308                        		__switch_r.ur	0, 2
         01:DF15  C9 03      			cmp	#(2 - 0) + 1
         01:DF17  90 02      			bcc	!found+
         01:DF19  A9 03      	!default:	lda	#(2 - 0) + 1
         01:DF1B  0A         	!found:		asl	a
         01:DF1C  AA         			tax
         01:DF1D  7C 20 DF   			jmp	[!table+, x]
15309                        	
15310    01:DF20  35 DE      	!table:		dw	.LL657, .LL661, .LL662
         01:DF22  B3 DE       
         01:DF24  C2 DE       
15311    01:DF26  9F DD      			dw	.LL656
15312    01:DF28             	.LL656	.alias		.LL638
15313                        	
15314                        		.dbg	line,	"main.c", 236; }
15315    01:DF28             	.LL654	.alias		.LL638
15316                        	
15317                        		.dbg	line,	"main.c", 238; break;
15318                        		__bra		.LL638
         01:DF28  4C 9F DD   			bra	.LL638
15319                        	
15320                        		.dbg	line,	"main.c", 239; }
15321    01:DF2B             	.LL637:
15322                        		__switch_r.ur	0, 4
         01:DF2B  C9 05      			cmp	#(4 - 0) + 1
         01:DF2D  90 02      			bcc	!found+
         01:DF2F  A9 05      	!default:	lda	#(4 - 0) + 1
         01:DF31  0A         	!found:		asl	a
         01:DF32  AA         			tax
         01:DF33  7C 36 DF   			jmp	[!table+, x]
15323                        	
15324    01:DF36  A5 DD      	!table:		dw	.LL639, .LL640, .LL641, .LL651, .LL652
         01:DF38  A7 DD       
         01:DF3A  A9 DD       
         01:DF3C  19 DE       
         01:DF3E  1B DE       
15325    01:DF40  9F DD      			dw	.LL638
15326    01:DF42             	.LL638	.alias		.LL635
15327                        	
15328                        		.dbg	line,	"main.c", 240; }
15329                        		__bra		.LL635
         01:DF42  4C 9F DD   			bra	.LL635
15330    01:DF45             	.LL636:
15331                        	
15332                        		.dbg	line,	"main.c", 241; }
15333    01:DF45             	.LL627:
15334                        		__return	1
         01:DF45  AA         			tax
         01:DF46  4C EF FF   			jmp	leave_proc
15335                        		.dbg	clear
15336                        		.endp
15337                        		.pceas
15338                        	
15339                        		.dbg	clear
15340               6000     		.rodata
15341    01:6000             	__const1:
15342    01:6000  48 61 6C 74			db	'H','a','l','t',':',' ','S','G'
         01:6004  3A 20 53 47 
15343    01:6008  58 20 68 61			db	'X',' ','h','a','r','d','w','a'
         01:600C  72 64 77 61 
15344    01:6010  72 65 20 6E			db	'r','e',' ','n','o','t',' ','f'
         01:6014  6F 74 20 66 
15345    01:6018  6F 75 6E 64			db	'o','u','n','d',$00,'M','a','y'
         01:601C  00 4D 61 79 
15346    01:6020  62 65 2C 20			db	'b','e',',',' ','i',' ','c','a'
         01:6024  69 20 63 61 
15347    01:6028  6E 20 73 65			db	'n',' ','s','e','l','l',' ','y'
         01:602C  6C 6C 20 79 
15348    01:6030  6F 75 00 73			db	'o','u',$00,'s','o','m','e','t'
         01:6034  6F 6D 65 74 
15349    01:6038  68 69 6E 67			db	'h','i','n','g','.','.','.',$00
         01:603C  2E 2E 2E 00 
15350    01:6040  20 20 20 20			db	' ',' ',' ',' ',' ',' ',' ',' '
         01:6044  20 20 20 20 
15351    01:6048  20 20 20 20			db	' ',' ',' ',' ',' ',' ',' ',' '
         01:604C  20 20 20 20 
15352    01:6050  20 20 20 20			db	' ',' ',' ',' ',' ',$00,' ',' '
         01:6054  20 00 20 20 
15353    01:6058  20 20 20 20			db	' ',' ',' ',' ',' ',' ',' ',' '
         01:605C  20 20 20 20 
15354    01:6060  20 20 00 47			db	' ',' ',$00,'G','O','O','D',' '
         01:6064  4F 4F 44 20 
15355    01:6068  4C 55 43 4B			db	'L','U','C','K','!',$00
         01:606C  21 00       
15356    01:606E             	_TABLE_NPC_TYPE_LV1:
15357    01:606E  01         			db	1
15358    01:606F  00         			db	0
15359    01:6070             	_TABLE_NPC_X_POS_REF_LV1:
15360    01:6070  90 03      			dw	912
15361    01:6072  D0 04      			dw	1232
15362    01:6074             	_TABLE_NPC_Y_POS_REF_LV1:
15363    01:6074  40 02      			dw	576
15364    01:6076  90 01      			dw	400
15365    01:6078             	_TABLE_OBJECT_TYPE_LV1:
15366    01:6078  00         			db	0
15367    01:6079  01         			db	1
15368    01:607A  01         			db	1
15369    01:607B  01         			db	1
15370    01:607C  01         			db	1
15371    01:607D  01         			db	1
15372    01:607E  01         			db	1
15373    01:607F  02         			db	2
15374    01:6080  01         			db	1
15375    01:6081  01         			db	1
15376    01:6082  01         			db	1
15377    01:6083  01         			db	1
15378    01:6084  01         			db	1
15379    01:6085  01         			db	1
15380    01:6086  01         			db	1
15381    01:6087  01         			db	1
15382    01:6088  01         			db	1
15383    01:6089  01         			db	1
15384    01:608A  01         			db	1
15385    01:608B  01         			db	1
15386    01:608C  01         			db	1
15387    01:608D  01         			db	1
15388    01:608E  01         			db	1
15389    01:608F             	_TABLE_OBJECT_X_POS_REF_LV1:
15390    01:608F  90 06      			dw	1680
15391    01:6091  00 05      			dw	1280
15392    01:6093  C0 05      			dw	1472
15393    01:6095  A0 05      			dw	1440
15394    01:6097  90 04      			dw	1168
15395    01:6099  B0 04      			dw	1200
15396    01:609B  C0 03      			dw	960
15397    01:609D  D8 03      			dw	984
15398    01:609F  50 05      			dw	1360
15399    01:60A1  70 05      			dw	1392
15400    01:60A3  10 06      			dw	1552
15401    01:60A5  90 06      			dw	1680
15402    01:60A7  B0 06      			dw	1712
15403    01:60A9  D0 06      			dw	1744
15404    01:60AB  E0 04      			dw	1248
15405    01:60AD  00 05      			dw	1280
15406    01:60AF  90 04      			dw	1168
15407    01:60B1  10 04      			dw	1040
15408    01:60B3  80 02      			dw	640
15409    01:60B5  A0 02      			dw	672
15410    01:60B7  50 01      			dw	336
15411    01:60B9  70 01      			dw	368
15412    01:60BB  A0 01      			dw	416
15413    01:60BD             	_TABLE_OBJECT_Y_POS_REF_LV1:
15414    01:60BD  80 01      			dw	384
15415    01:60BF  A0 01      			dw	416
15416    01:60C1  E0 01      			dw	480
15417    01:60C3  F0 01      			dw	496
15418    01:60C5  30 02      			dw	560
15419    01:60C7  30 02      			dw	560
15420    01:60C9  50 02      			dw	592
15421    01:60CB  50 02      			dw	592
15422    01:60CD  50 02      			dw	592
15423    01:60CF  50 02      			dw	592
15424    01:60D1  C0 02      			dw	704
15425    01:60D3  D0 02      			dw	720
15426    01:60D5  D0 02      			dw	720
15427    01:60D7  D0 02      			dw	720
15428    01:60D9  E0 02      			dw	736
15429    01:60DB  E0 02      			dw	736
15430    01:60DD  F0 02      			dw	752
15431    01:60DF  50 03      			dw	848
15432    01:60E1  70 03      			dw	880
15433    01:60E3  70 03      			dw	880
15434    01:60E5  80 03      			dw	896
15435    01:60E7  80 03      			dw	896
15436    01:60E9  80 03      			dw	896
15437    01:60EB             	_TABLE_CHEST_X_POS_REF_LV1:
15438    01:60EB  30 04      			dw	1072
15439    01:60ED  30 03      			dw	816
15440    01:60EF             	_TABLE_CHEST_Y_POS_REF_LV1:
15441    01:60EF  40 03      			dw	832
15442    01:60F1  50 03      			dw	848
15443    01:60F3             	_TABLE_PLAYER_TILES_ADR:
15444    01:60F3  E0 69      			dw	_tiles_SPR_PLAYER_ARMOR
15445    01:60F5  E0 7B      			dw	_tiles_SPR_PLAYER_NAKED
15446    01:60F7             	_TABLE_PLAYER_TILES_BANK:
15447    01:60F7  0E         			db	^_tiles_SPR_PLAYER_ARMOR
15448    01:60F8  0F         			db	^_tiles_SPR_PLAYER_NAKED
15449    01:60F9             	_TABLE_PLAYER_JUMP_V:
15450    01:60F9  FC         			db	-4
15451    01:60FA  FB         			db	-5
15452    01:60FB  F6         			db	-10
15453    01:60FC  FC         			db	-4
15454    01:60FD  FC         			db	-4
15455    01:60FE  F9         			db	-7
15456    01:60FF  FA         			db	-6
15457    01:6100  FD         			db	-3
15458    01:6101  FB         			db	-5
15459    01:6102  FE         			db	-2
15460    01:6103  FC         			db	-4
15461    01:6104  FF         			db	-1
15462    01:6105  FF         			db	-1
15463    01:6106  FF         			db	-1
15464    01:6107  FF         			db	-1
15465    01:6108  00         			db	0
15466    01:6109  00         			db	0
15467    01:610A  00         			db	0
15468    01:610B  00         			db	0
15469    01:610C  01         			db	1
15470    01:610D  01         			db	1
15471    01:610E  01         			db	1
15472    01:610F  01         			db	1
15473    01:6110  04         			db	4
15474    01:6111  02         			db	2
15475    01:6112  05         			db	5
15476    01:6113  03         			db	3
15477    01:6114  06         			db	6
15478    01:6115  07         			db	7
15479    01:6116  04         			db	4
15480    01:6117  04         			db	4
15481    01:6118  0A         			db	10
15482    01:6119  04         			db	4
15483    01:611A  04         			db	4
15484    01:611B  05         			db	5
15485    01:611C             	_TABLE_PLAYER_FALL:
15486    01:611C  00         			db	0
15487    01:611D  00         			db	0
15488    01:611E  00         			db	0
15489    01:611F  00         			db	0
15490    01:6120  01         			db	1
15491    01:6121  01         			db	1
15492    01:6122  01         			db	1
15493    01:6123  01         			db	1
15494    01:6124  02         			db	2
15495    01:6125  02         			db	2
15496    01:6126  02         			db	2
15497    01:6127  02         			db	2
15498    01:6128  03         			db	3
15499    01:6129  03         			db	3
15500    01:612A  03         			db	3
15501    01:612B  04         			db	4
15502    01:612C  04         			db	4
15503    01:612D  04         			db	4
15504    01:612E  04         			db	4
15505    01:612F  04         			db	4
15506    01:6130  05         			db	5
15507    01:6131             	_TABLE_PLAYER_JUMP_LADDER:
15508    01:6131  FC         			db	-4
15509    01:6132  FC         			db	-4
15510    01:6133  FD         			db	-3
15511    01:6134  FD         			db	-3
15512    01:6135  FD         			db	-3
15513    01:6136  FE         			db	-2
15514    01:6137  FE         			db	-2
15515    01:6138  FE         			db	-2
15516    01:6139  FF         			db	-1
15517    01:613A  FF         			db	-1
15518    01:613B  FF         			db	-1
15519    01:613C  FF         			db	-1
15520    01:613D  FF         			db	-1
15521    01:613E  00         			db	0
15522    01:613F  00         			db	0
15523    01:6140  00         			db	0
15524    01:6141  00         			db	0
15525    01:6142  01         			db	1
15526    01:6143  01         			db	1
15527    01:6144  01         			db	1
15528    01:6145  01         			db	1
15529    01:6146  01         			db	1
15530    01:6147  02         			db	2
15531    01:6148  02         			db	2
15532    01:6149  02         			db	2
15533    01:614A  03         			db	3
15534    01:614B  03         			db	3
15535    01:614C  03         			db	3
15536    01:614D  04         			db	4
15537    01:614E  04         			db	4
15538    01:614F             	_TABLE_WEAPON_TILES_ADR:
15539    01:614F  60 76      			dw	_tiles_SPR_WEAPON_0
15540    01:6151  E0 78      			dw	_tiles_SPR_WEAPON_1
15541    01:6153  60 7B      			dw	_tiles_SPR_WEAPON_2
15542    01:6155  E0 7D      			dw	_tiles_SPR_WEAPON_3
15543    01:6157  60 60      			dw	_tiles_SPR_WEAPON_4
15544    01:6159             	_TABLE_WEAPON_TILES_BANK:
15545    01:6159  11         			db	^_tiles_SPR_WEAPON_0
15546    01:615A  11         			db	^_tiles_SPR_WEAPON_1
15547    01:615B  11         			db	^_tiles_SPR_WEAPON_2
15548    01:615C  11         			db	^_tiles_SPR_WEAPON_3
15549    01:615D  12         			db	^_tiles_SPR_WEAPON_4
15550    01:615E             	_TABLE_SHOP_ITEMS_LV1:
15551    01:615E  00         			db	0
15552    01:615F  01         			db	1
15553    01:6160  02         			db	2
15554    01:6161  03         			db	3
15555    01:6162  04         			db	4
15556    01:6163  05         			db	5
15557    01:6164  06         			db	6
15558    01:6165  07         			db	7
15559    01:6166  08         			db	8
15560    01:6167  09         			db	9
15561    01:6168             	_TABLE_SHOP_PRICES_LV1:
15562    01:6168  64 00      			dw	100
15563    01:616A  E8 03      			dw	1000
15564    01:616C  60 09      			dw	2400
15565    01:616E  80 25      			dw	9600
15566    01:6170  1E 00      			dw	30
15567    01:6172  50 00      			dw	80
15568    01:6174  2C 01      			dw	300
15569    01:6176  20 03      			dw	800
15570    01:6178  40 06      			dw	1600
15571    01:617A  96 00      			dw	150
15572    01:617C             	_TABLE_SHOP_ITEMS_TILES_ADR:
15573    01:617C  E0 60      			dw	_tiles_ITEM_WEAPON_2
15574    01:617E  60 61      			dw	_tiles_ITEM_WEAPON_3
15575    01:6180  E0 61      			dw	_tiles_ITEM_WEAPON_4
15576    01:6182  60 62      			dw	_tiles_ITEM_WEAPON_5
15577    01:6184  E0 62      			dw	_tiles_ITEM_KEY
15578    01:6186  60 63      			dw	_tiles_ITEM_ARMOR_2
15579    01:6188  E0 63      			dw	_tiles_ITEM_ARMOR_3
15580    01:618A  60 64      			dw	_tiles_ITEM_ARMOR_4
15581    01:618C  E0 64      			dw	_tiles_ITEM_ARMOR_5
15582    01:618E  60 65      			dw	_tiles_ITEM_POTION
15583    01:6190             	_TABLE_SHOP_ITEMS_TILES_BANK:
15584    01:6190  0E         			db	^_tiles_ITEM_WEAPON_2
15585    01:6191  0E         			db	^_tiles_ITEM_WEAPON_3
15586    01:6192  0E         			db	^_tiles_ITEM_WEAPON_4
15587    01:6193  0E         			db	^_tiles_ITEM_WEAPON_5
15588    01:6194  0E         			db	^_tiles_ITEM_KEY
15589    01:6195  0E         			db	^_tiles_ITEM_ARMOR_2
15590    01:6196  0E         			db	^_tiles_ITEM_ARMOR_3
15591    01:6197  0E         			db	^_tiles_ITEM_ARMOR_4
15592    01:6198  0E         			db	^_tiles_ITEM_ARMOR_5
15593    01:6199  0E         			db	^_tiles_ITEM_POTION
15594    01:619A             	_TABLE_CURSOR_POS_X:
15595    01:619A  18         			db	24
15596    01:619B  38         			db	56
15597    01:619C  60         			db	96
15598    01:619D  88         			db	136
15599    01:619E  B0         			db	176
15600    01:619F  18         			db	24
15601    01:61A0  38         			db	56
15602    01:61A1  60         			db	96
15603    01:61A2  88         			db	136
15604    01:61A3  B0         			db	176
15605    01:61A4  D4         			db	212
15606                        	
15607               2311     		.bss
15608    F8:2311             	_sequence_id:
15609    F8:2311             			ds	1
15610    F8:2312             	_sequence_loaded:
15611    F8:2312             			ds	1
15612    F8:2313             	_level_id:
15613    F8:2313             			ds	1
15614    F8:2314             	_respawn:
15615    F8:2314             			ds	1
15616    F8:2315             	_player_id:
15617    F8:2315             			ds	1
15618    F8:2316             	_player_state:
15619    F8:2316             			ds	1
15620    F8:2317             	_player_axis:
15621    F8:2317             			ds	1
15622    F8:2318             	_player_previous_axis:
15623    F8:2318             			ds	1
15624    F8:2319             	_player_counter_anim:
15625    F8:2319             			ds	1
15626    F8:231A             	_player_index_jump:
15627    F8:231A             			ds	1
15628    F8:231B             	_player_index_fall:
15629    F8:231B             			ds	1
15630    F8:231C             	_player_counter_attack:
15631    F8:231C             			ds	1
15632    F8:231D             	_player_naked:
15633    F8:231D             			ds	1
15634    F8:231E             	_player_attack:
15635    F8:231E             			ds	1
15636    F8:231F             	_jump_ladder:
15637    F8:231F             			ds	1
15638    F8:2320             	_jump_max_index:
15639    F8:2320             			ds	1
15640    F8:2321             	_fall_ladder:
15641    F8:2321             			ds	1
15642    F8:2322             	_chain_id:
15643    F8:2322             			ds	1
15644    F8:2323             	_weapon_id:
15645    F8:2323             			ds	1
15646    F8:2324             	_armor_level:
15647    F8:2324             			ds	1
15648    F8:2325             	_weapon_level:
15649    F8:2325             			ds	1
15650    F8:2326             	_life_amount:
15651    F8:2326             			ds	1
15652    F8:2327             	_key_amount:
15653    F8:2327             			ds	1
15654    F8:2328             	_potion_amount:
15655    F8:2328             			ds	1
15656    F8:2329             	_minutes:
15657    F8:2329             			ds	1
15658    F8:232A             	_seconds:
15659    F8:232A             			ds	1
15660    F8:232B             	_time_counter:
15661    F8:232B             			ds	1
15662    F8:232C             	_minutes_backup:
15663    F8:232C             			ds	1
15664    F8:232D             	_seconds_backup:
15665    F8:232D             			ds	1
15666    F8:232E             	_object_start_index:
15667    F8:232E             			ds	1
15668    F8:232F             	_level_object_number:
15669    F8:232F             			ds	1
15670    F8:2330             	_onscreen_object_number:
15671    F8:2330             			ds	1
15672    F8:2331             	_list_object_type:
15673    F8:2331             			ds	25
15674    F8:234A             	_list_object_state:
15675    F8:234A             			ds	25
15676    F8:2363             	_list_object_energy:
15677    F8:2363             			ds	25
15678    F8:237C             	_list_reward_type:
15679    F8:237C             			ds	25
15680    F8:2395             	_list_onscreen_object:
15681    F8:2395             			ds	8
15682    F8:239D             	_chest_start_index:
15683    F8:239D             			ds	1
15684    F8:239E             	_level_chest_number:
15685    F8:239E             			ds	1
15686    F8:239F             	_onscreen_chest_number:
15687    F8:239F             			ds	1
15688    F8:23A0             	_list_chest_state:
15689    F8:23A0             			ds	8
15690    F8:23A8             	_list_onscreen_chest:
15691    F8:23A8             			ds	8
15692    F8:23B0             	_npc_start_index:
15693    F8:23B0             			ds	1
15694    F8:23B1             	_level_npc_number:
15695    F8:23B1             			ds	1
15696    F8:23B2             	_onscreen_npc_number:
15697    F8:23B2             			ds	1
15698    F8:23B3             	_list_npc_type:
15699    F8:23B3             			ds	9
15700    F8:23BC             	_list_npc_state:
15701    F8:23BC             			ds	9
15702    F8:23C5             	_list_onscreen_npc:
15703    F8:23C5             			ds	9
15704    F8:23CE             	_index_x:
15705    F8:23CE             			ds	1
15706    F8:23CF             	_index_y:
15707    F8:23CF             			ds	1
15708    F8:23D0             	_item_index:
15709    F8:23D0             			ds	1
15710    F8:23D1             	_shop_phase:
15711    F8:23D1             			ds	1
15712    F8:23D2             	_shop_counter:
15713    F8:23D2             			ds	1
15714    F8:23D3             	_tilemap_mask:
15715    F8:23D3             			ds	256
15716    F8:24D3             	_player_pos_x:
15717    F8:24D3             			ds	2
15718    F8:24D5             	_player_pos_y:
15719    F8:24D5             			ds	2
15720    F8:24D7             	_camera_max_y_position:
15721    F8:24D7             			ds	2
15722    F8:24D9             	_camera_pos_x_backup:
15723    F8:24D9             			ds	2
15724    F8:24DB             	_camera_pos_y_backup:
15725    F8:24DB             			ds	2
15726    F8:24DD             	_list_object_x_pos:
15727    F8:24DD             			ds	50
15728    F8:250F             	_list_object_y_pos:
15729    F8:250F             			ds	50
15730    F8:2541             	_list_object_x_pos_ref:
15731    F8:2541             			ds	50
15732    F8:2573             	_list_object_y_pos_ref:
15733    F8:2573             			ds	50
15734    F8:25A5             	_list_chest_x_pos:
15735    F8:25A5             			ds	16
15736    F8:25B5             	_list_chest_y_pos:
15737    F8:25B5             			ds	16
15738    F8:25C5             	_list_chest_x_pos_ref:
15739    F8:25C5             			ds	16
15740    F8:25D5             	_list_chest_y_pos_ref:
15741    F8:25D5             			ds	16
15742    F8:25E5             	_list_npc_x_pos:
15743    F8:25E5             			ds	18
15744    F8:25F7             	_list_npc_y_pos:
15745    F8:25F7             			ds	18
15746    F8:2609             	_list_npc_x_pos_ref:
15747    F8:2609             			ds	18
15748    F8:261B             	_list_npc_y_pos_ref:
15749    F8:261B             			ds	18
15750    F8:262D             	_zenny_amount:
15751    F8:262D             			ds	2
15752    F8:262F             	_score:
15753    F8:262F             			ds	2
15754    F8:2631             	_shop_prices:
15755    F8:2631             			ds	20
15756    F8:2645             	_ptr_SHOP_ITEM_PRICES:
15757    F8:2645             			ds	2
15758                        	
15759                        	
15760                        	;0 error(s) in compilation
15761                        	;	literal pool:110
15762                        	;	constant pool:311
15763                        	;	global pool:531
15764                        	;	Macro pool:290
15765    F8:2647             	leaf_loc:
15766    F8:2647             			ds	4
15767    F8:264B             	__hide_LEVEL_SPRITES_end:
15768    F8:264B             	__scroll_object_end:
15769    F8:264B             	__scroll_chest_end:
15770    F8:264B             	__scroll_npc_end:
15771    F8:264B             	__check_TILE_DEPTH_end:
15772    F8:264B             	__check_BG_end:
15773    F8:264B             	__check_NPC_end:
15774    F8:264B             	__recenter_CAMERA_end:
15775    F8:264B             	__init_OBJECT_LV1_end:
15776    F8:264B             	__init_CHEST_LV1_end:
15777    F8:264B             	__init_NPC_LV1_end:
15778                        	
15779    F8:264B             	__bss_init:
15780                        	
15781    F8:264B             	__heap_start:
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-final.asm
    5                        	;
    6                        	; PCEAS auto-includes this file at the end of every pass in HuCC or SDCC.
    7                        	;
    8                        	; Copyright John Brandwood 2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; This is used to select which assembly-language library files to include in
   18                        	; a HuCC project, using labels defined in the compiler's header files.
   19                        	;
   20                        	; ***************************************************************************
   21                        	; ***************************************************************************
   22                        	
   23                        			; Allow projects to customize what is included at the end
   24                        			; of a pass without replacing the entire "hucc-final.asm".
   25                        	
   26               E309     			.code
   27               0000     			.bank	CORE_BANK
   28               E309     			.page	CORE_PAGE
   29                        	
                             #[3]   "..\..\..\include\hucc\hucc-final-extra.asm"
   30                        			include	"hucc-final-extra.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-final-extra.asm
    5                        	;
    6                        	; hucc-final.asm includes this file at the end of every pass in HuCC or SDCC.
    7                        	;
    8                        	; Copyright John Brandwood 2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; This is used to select which assembly-language library files to include in
   18                        	; a HuCC project, using labels defined in the compiler's header files.
   19                        	;
   20                        	; ***************************************************************************
   21                        	; ***************************************************************************
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   31                        	
   32                        			; Libraries required for basic functionality.
   33                        	
   34               E309     			.code
   35               0000     			.bank	CORE_BANK
   36               E309     			.page	CORE_PAGE
   37                        	
                             #[3]   "..\..\..\include\hucc\common.asm"
   38                        			include	"common.asm"		; Common helpers.
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; common.asm
    5                        	;
    6                        	; Small, generic, PCE subroutines that are commonly useful when developing.
    7                        	;
    8                        	; These should be located in permanently-accessible memory!
    9                        	;
   10                        	; Copyright John Brandwood 2021-2024.
   11                        	;
   12                        	; Distributed under the Boost Software License, Version 1.0.
   13                        	; (See accompanying file LICENSE_1_0.txt or copy at
   14                        	;  http://www.boost.org/LICENSE_1_0.txt)
   15                        	;
   16                        	; ***************************************************************************
   17                        	; ***************************************************************************
   18                        	
   19                        	
   20                        	
   21                        	; ***************************************************************************
   22                        	; ***************************************************************************
   23                        	;
   24                        	; Wait for the next VBLANK IRQ.
   25                        	;
   26                        	
   27    00:E309  AD 41 22   	wait_vsync:	lda	irq_cnt			; System Card variable, changed
   28    00:E30C  CD 41 22   	.loop:		cmp	irq_cnt			; every VBLANK interrupt.
   29    00:E30F  F0 FB      			beq	.loop
   30               0001     		.ifdef	HUCC
   31    00:E311  8D EB 22   			sta	old_cnt			; Remember the frame count.
   32                        		.endif
   33    00:E314  60         			rts
   34                        	
   35                        	
   36                        	
   37                        	; ***************************************************************************
   38                        	; ***************************************************************************
   39                        	;
   40                        	; Delay for the next Y VBLANK IRQs.
   41                        	;
   42                        	
   43               0001     		.ifdef	HUCC
   44    00:E315             	_vsync		.alias	wait_vsync
   45                        	
   46    00:E315  AD 41 22   	_vsync.1:	lda	irq_cnt			; HuCC's vsync(n) was defined
   47    00:E318  38         			sec				; as frames from the previous
   48    00:E319  ED EB 22   			sbc	old_cnt			; vsync() call, 1 to 255.
   49    00:E31C  38         			sec
   50    00:E31D  E5 F8      			sbc	<_al
   51    00:E31F  90 02      			bcc	!+
   52    00:E321  A9 FF      			lda	#$FF
   53    00:E323  49 FF      	!:		eor	#$FF
   54    00:E325  1A         			inc	a
   55    00:E326  A8         			tay
   56                        		.endif
   57                        	
   58    00:E327  44 E0      	wait_nvsync:	bsr	wait_vsync		; # of VBLANK IRQs to wait in
   59    00:E329  88         			dey				; the Y register.
   60    00:E32A  D0 FB      			bne	wait_nvsync
   61    00:E32C  60         			rts
   62                        	
   63                        	
   64                        	
   65               0000     		.ifndef	HUCC
  101                        		.endif
  102                        	
  103                        	
  104                        	
  105                        	; ***************************************************************************
  106                        	; ***************************************************************************
  107                        	;
  108                        	; Map the _bp data far-pointer into MPR3 (& MPR4).
  109                        	;
  110                        	; Because the 16KB RAM region at $2000-$5FFF is composed of two separate
  111                        	; banks, with the 2nd bank having no specific relation to the 1st, there
  112                        	; is no way to deal with a bank-increment, so do not map that region.
  113                        	;
  114                        	; N.B. Library code relies on this preserving X and V!
  115                        	;
  116                        	
  117    00:E32D  98         	map_bp_to_mpr3:	tya				; Put bank into MPR3.
  118    00:E32E  F0 0A      			beq	!+
  119    00:E330  53 08      			tam3
  120    00:E332  A5 ED      			lda.h	<_bp			; Do not remap a ptr to RAM,
  121    00:E334  29 1F      			and	#$1F			; Remap ptr to MPR3.
  122    00:E336  09 60      			ora	#$60
  123    00:E338  85 ED      			sta.h	<_bp
  124    00:E33A  60         	!:		rts
  125                        	
  126    00:E33B  98         	map_bp_to_mpr34:tya				; Put bank into MPR3.
  127    00:E33C  F0 0D      			beq	!+
  128    00:E33E  53 08      			tam3
  129    00:E340  1A         			inc	a			; Put next into MPR4.
  130    00:E341  53 10      			tam4
  131    00:E343  A5 ED      			lda.h	<_bp			; Do not remap a ptr to RAM,
  132    00:E345  29 1F      			and	#$1F			; Remap ptr to MPR3.
  133    00:E347  09 60      			ora	#$60
  134    00:E349  85 ED      			sta.h	<_bp
  135    00:E34B  60         	!:		rts
  136                        	
  137                        	
  138                        	
  139                        	; ***************************************************************************
  140                        	; ***************************************************************************
  141                        	;
  142                        	; Increment the hi-byte of _bp and change TMA3 if necessary.
  143                        	;
  144                        	; N.B. Library code relies on this preserving A,X,Y and V!
  145                        	;
  146                        	
  147    00:E34C  E6 ED      	inc.h_bp_mpr3:	inc.h	<_bp			; Increment hi-byte of _bp.
  148    00:E34E  10 0B      			bpl	!+			; OK if within MPR0-MPR3.
  149    00:E350  48         			pha				; Increment the bank in MPR3,
  150    00:E351  43 08      			tma3				; usually when pointer moves
  151    00:E353  1A         			inc	a			; from $7FFF -> $8000.
  152    00:E354  53 08      			tam3
  153    00:E356  A9 60      			lda	#$60
  154    00:E358  85 ED      			sta.h	<_bp
  155    00:E35A  68         			pla
  156    00:E35B  60         	!:		rts
  157                        	
  158                        	
  159                        	
  160                        	; ***************************************************************************
  161                        	; ***************************************************************************
  162                        	;
  163                        	; Increment the hi-byte of _bp and change TMA3 and TMA4 if necessary.
  164                        	;
  165                        	; N.B. Library code relies on this preserving A,X,Y and V!
  166                        	;
  167                        	
  168    00:E35C  E6 ED      	inc.h_bp_mpr34:	inc.h	<_bp			; Increment hi-byte of _bp.
  169    00:E35E  10 0D      			bpl	!+			; OK if within MPR0-MPR3.
  170    00:E360  48         			pha				; Increment the bank in MPR3,
  171    00:E361  43 10      			tma4				; usually when pointer moves
  172    00:E363  53 08      			tam3				; from $7FFF -> $8000.
  173    00:E365  1A         			inc	a
  174    00:E366  53 10      			tam4
  175    00:E368  A9 60      			lda	#$60
  176    00:E36A  85 ED      			sta.h	<_bp
  177    00:E36C  68         			pla
  178    00:E36D  60         	!:		rts
  179                        	
  180                        	
  181                        	
  182                        	; ***************************************************************************
  183                        	; ***************************************************************************
  184                        	;
  185                        	; Put the _di data pointer into the VDC's MARR or MAWR register.
  186                        	;
  187                        	; N.B. Library code relies on this preserving Y!
  188                        	;
  189                        	
  190               0001     		.if	SUPPORT_SGX
  191    00:E36E  A2 10      	sgx_di_to_marr:	ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  192    00:E370  F0         			db	$F0			; Turn "clx" into a "beq".
  193                        		.endif
  194                        	
  195    00:E371  82         	vdc_di_to_marr:	clx				; Offset to PCE VDC.
  196                        	
  197    00:E372  A9 01      	set_di_to_marr	lda	#VDC_MARR		; Set VDC or SGX destination
  198    00:E374  95 F7      			sta	<vdc_reg, x		; address.
  199    00:E376  9D 00 02   			sta	VDC_AR, x
  200    00:E379  80 09      			bra	!+
  201                        	
  202               0001     		.if	SUPPORT_SGX
  203    00:E37B  A2 10      	sgx_di_to_mawr:	ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  204    00:E37D  F0         			db	$F0			; Turn "clx" into a "beq".
  205                        		.endif
  206                        	
  207    00:E37E  82         	vdc_di_to_mawr:	clx				; Offset to PCE VDC.
  208                        	
  209    00:E37F             	set_di_to_mawr;	lda	#VDC_MAWR		; Set VDC or SGX destination
  210    00:E37F  74 F7      			stz	<vdc_reg, x		; address.
  211    00:E381  9E 00 02   			stz	VDC_AR, x
  212                        	
  213    00:E384  A5 F0      	!:		lda	<_di + 0
  214    00:E386  9D 02 02   			sta	VDC_DL, x
  215    00:E389  A5 F1      			lda	<_di + 1
  216    00:E38B  9D 03 02   			sta	VDC_DH, x
  217                        	
  218    00:E38E  A9 02      			lda	#VDC_VWR		; Select the VRR/VWR data
  219    00:E390  95 F7      			sta	<vdc_reg, x		; register.
  220    00:E392  9D 00 02   			sta	VDC_AR, x
  221    00:E395  60         			rts
  222                        	
  223                        	
  224                        	
  225                        	; ***************************************************************************
  226                        	; ***************************************************************************
  227                        	;
  228                        	; Increment the hi-byte of _di and change TMA4 if necessary.
  229                        	;
  230                        	
  231               0000     		.if	0				; Save memory, for now.
  250                        		.endif
  251                        	
  252                        	
  253                        	
  254                        	; ***************************************************************************
  255                        	; ***************************************************************************
  256                        	;
  257                        	; Far-call a function in another bank.
  258                        	;
  259                        	; This is a potential alternative procedure call trampoline that uses only 10
  260                        	; bytes of common memory per bank of procedures, instead of 10 bytes for each
  261                        	; individual procedure call, BUT it uses the X register as a procedure-index,
  262                        	; and it needs a table of addresses at the end of every procedure bank.
  263                        	;
  264                        	; To use this ...
  265                        	;
  266                        	;  ldx #procedure-index
  267                        	;  jsr far_call_nn
  268                        	;
  269                        	; The called .PROC routine must exit with "jmp leave_proc" and not "rts".
  270                        	;
  271                        	; leave_proc:	pla
  272                        	;		tam6
  273                        	;		tya
  274                        	;		rts
  275                        	;
  276                        	; N.B. This costs 21 cycles vs 18 for the .newproc trampoline code (when you
  277                        	;      exclude preserving YA in zero-page).
  278                        	;
  279                        	; N.B. This was written as an excerise, and definitely not for HuC!
  280                        	;
  281                        	
  282               0000     		.if	0
  295                        		.endif					; 21
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
                             #[3]   "..\..\..\include\hucc\vce.asm"
   39                        			include	"vce.asm"		; Useful VCE routines.
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; vce.asm
    5                        	;
    6                        	; Useful routines for operating the HuC6260 Video Color Encoder
    7                        	;
    8                        	; These should be located in permanently-accessible memory!
    9                        	;
   10                        	; Copyright John Brandwood 2021-2025.
   11                        	;
   12                        	; Distributed under the Boost Software License, Version 1.0.
   13                        	; (See accompanying file LICENSE_1_0.txt or copy at
   14                        	;  http://www.boost.org/LICENSE_1_0.txt)
   15                        	;
   16                        	; ***************************************************************************
   17                        	; ***************************************************************************
   18                        	
   19                        	;
   20                        	; Configure Library ...
   21                        	;
   22                        	
   23               0000     		.ifndef VCE_SPLIT_CROSS
   25                        		.endif
   26                        	
   27                        	
   28                        	
   29                        	; ***************************************************************************
   30                        	; ***************************************************************************
   31                        	;
   32                        	; xfer_palettes - Update the VCE with the queued palettes changes.
   33                        	;
   34                        	; This is normally called in a developer's vsync_hook handler, but it can
   35                        	; be called manually as long as it will not also be called in an interrupt.
   36                        	;
   37                        	; The queued transfers are split into 32-byte chunks so that an HSYNC and/or
   38                        	; TIMER IRQ is not delayed for too long during the VBLANK.
   39                        	;
   40                        	
   41    00:E396  A9 80      	xfer_palettes:	lda	#$80			; Acquire color mutex to avoid
   42    00:E398  0C 4B 26   			tsb	color_mutex		; conflict with a delayed VBL.
   43    00:E39B  30 5F      			bmi	.busy
   44                        	
   45    00:E39D  AC 4C 26   			ldy	color_queue_r		; Are there any palette xfers
   46    00:E3A0  CC 4D 26   			cpy	color_queue_w		; queued up?
   47    00:E3A3  F0 54      			beq	.exit
   48                        	
   49    00:E3A5  08         			php				; Enable interrupts so that an
   50    00:E3A6  58         			cli				; HSYNC or TIMER IRQ can occur.
   51                        	
   52    00:E3A7  43 08      			tma3				; Preserve MPR3 & MPR4 because
   53    00:E3A9  48         			pha				; this normally runs in the
   54    00:E3AA  43 10      			tma4				; VBLANK IRQ.
   55    00:E3AC  48         			pha
   56                        	
   57               0001     		.if	!CDROM
   58    00:E3AD  73 02 E4 86			tii	.tia_func, color_tia, 8 ; Copy TIA to RAM.
         00:E3B1  22 08 00    
   59                        		.endif
   60                        	
   61    00:E3B4  B9 4E 26   	.next_item:	lda	color_index, y		; Get the next set of palettes
   62    00:E3B7  0A         			asl	a			; from the queue.
   63    00:E3B8  0A         			asl	a
   64    00:E3B9  0A         			asl	a
   65    00:E3BA  0A         			asl	a
   66    00:E3BB  8D 02 04   			sta	VCE_CTA + 0
   67    00:E3BE  62         			cla
   68    00:E3BF  2A         			rol	a
   69    00:E3C0  8D 03 04   			sta	VCE_CTA + 1
   70                        	
   71    00:E3C3  BE 56 26   			ldx	color_count,y		; How many palettes to xfer?
   72                        	
   73    00:E3C6  B9 6E 26   			lda	color_bank, y		; Map data into MPR3 & MPR4.
   74    00:E3C9  53 08      			tam3
   75    00:E3CB  1A         			inc	a
   76    00:E3CC  53 10      			tam4
   77    00:E3CE  B9 66 26   			lda	color_addr_h, y
   78    00:E3D1  8D 88 22   			sta	.ram_tia + 2
   79    00:E3D4  B9 5E 26   			lda	color_addr_l, y
   80    00:E3D7  8D 87 22   	.palette_loop:	sta	.ram_tia + 1
   81                        	
   82               0000     		.if	CDROM
   84                        		.else
   85    00:E3DA  20 86 22   			jsr	.ram_tia		; Copy 32-bytes to the VCE.
   86                        		.endif
   87                        	
   88    00:E3DD  18         			clc				; Increment the data ptr to
   89    00:E3DE  69 20      			adc	#32			; the next 32-byte palette.
   90    00:E3E0  B0 1B      			bcs	.next_page
   91                        	
   92    00:E3E2  CA         	.next_palette:	dex				; Any palettes left to xfer?
   93    00:E3E3  D0 F2      			bne	.palette_loop
   94                        	
   95    00:E3E5  C8         			iny				; Increment the queue index.
   96    00:E3E6  98         			tya
   97    00:E3E7  29 07      			and	#7
   98    00:E3E9  A8         			tay
   99                        	
  100    00:E3EA  CC 4D 26   			cpy	color_queue_w		; Any more items in the queue?
  101    00:E3ED  D0 C5      			bne	.next_item
  102    00:E3EF  8C 4C 26   			sty	color_queue_r		; Signal the queue is empty.
  103                        	
  104    00:E3F2  68         			pla				; Restore MPR3 & MPR4.
  105    00:E3F3  53 10      			tam4
  106    00:E3F5  68         			pla
  107    00:E3F6  53 08      			tam3
  108                        	
  109    00:E3F8  28         			plp				; Restore interrupt state.
  110                        	
  111    00:E3F9  9C 4B 26   	.exit:		stz	color_mutex		; Release color mutex.
  112                        	
  113    00:E3FC  60         	.busy:		rts
  114                        	
  115    00:E3FD  EE 88 22   	.next_page:	inc	.ram_tia + 2
  116    00:E400  80 E0      			bra	.next_palette
  117                        	
  118               0001     		.if	!CDROM
  119               2286     	.ram_tia	=	color_tia		; Use a TIA in RAM.
  120                        	
  121    00:E402  E3 00 00 04	.tia_func:	tia	0, VCE_CTW, 32
         00:E406  04 20 00    
  122    00:E409  60         			rts
  123                        		.endif	!CDROM
  124                        	
  125               264B     			.bss
  126                        	
  127    F8:264B             	color_mutex:	ds	1			; Mutex for VCE changes.
  128    F8:264C             	color_queue_r:	ds	1			; Ring buffer read index.
  129    F8:264D             	color_queue_w:	ds	1			; Ring buffer write index.
  130    F8:264E             	color_index:	ds	8			; Ring buffer - Palette index.
  131    F8:2656             	color_count:	ds	8			; Ring buffer - Palette count.
  132    F8:265E             	color_addr_l:	ds	8			; Ring buffer - Data Ptr (lo).
  133    F8:2666             	color_addr_h:	ds	8			; Ring buffer - Data Ptr (hi).
  134    F8:266E             	color_bank:	ds	8			; Ring buffer - Data Ptr (bank).
  135                        	
  136               E40A     			.code
  137                        	
  138                        	
  139                        	
  140                        	; ***************************************************************************
  141                        	; ***************************************************************************
  142                        	;
  143                        	; load_palettes - Queue a set of palettes to upload to the VCE next VBLANK.
  144                        	;
  145                        	; Args: _al = Palette index (0..15 for BG, 16..31 for SPR).
  146                        	; Args: _ah = Palette count (1..32).
  147                        	; Args: _bp = Pointer to palette data.
  148                        	; Args:   Y = Bank to map into MPR3 & MPR4, or zero to leave unchanged.
  149                        	;
  150                        	; N.B. Y==0 is only useful if the palette data is permanently mapped!
  151                        	;
  152                        	
  153                        	load_palettes	.proc
  179                        			.endp
  180                        	
  181                        	
  182                        	
  183                        	; ***************************************************************************
  184                        	; ***************************************************************************
  185                        	;
  186                        	; clear_vce - Clear all 512 of the VCE's palette entries.
  187                        	;
  188                        	
  189    14:D368             	clear_vce	.proc
  190                        	
  191    14:D368  08         			php				; Disable interrupts to avoid
  192    14:D369  78         			sei				; VBLANK palette upload.
  193    14:D36A  C2         			cly
  194    14:D36B  9C 02 04   			stz	VCE_CTA+0		; Set VCE write address.
  195    14:D36E  9C 03 04   			stz	VCE_CTA+1
  196    14:D371  9C 04 04   	.loop:		stz	VCE_CTW+0		; Set lo-byte of color.
  197    14:D374  9C 05 04   			stz	VCE_CTW+1		; Write 1 color value.
  198    14:D377  9C 04 04   			stz	VCE_CTW+0		; Set lo-byte of color.
  199    14:D37A  9C 05 04   			stz	VCE_CTW+1		; Write 1 color value.
  200    14:D37D  88         			dey
  201    14:D37E  D0 F1      			bne	.loop
  202    14:D380  28         			plp
  203                        	
  204                        			leave				; All done, phew!
         14:D381  4C EF FF   			jmp	leave_proc
  205                        	
  206                        			.endp
  207                        	
  208               0001     		.ifdef	HUCC
  209    00:E40A             			.alias	_clear_palette		= clear_vce
  210                        		.endif
  211                        	
  212                        	
  213                        	
  214                        	; ***************************************************************************
  215                        	; ***************************************************************************
  216                        	;
  217                        	; read_palettes - Read palettes from the VCE into a buffer in RAM.
  218                        	;
  219                        	; Args: _al = Palette index (0..15 for BG, 16..31 for SPR).
  220                        	; Args: _ah = Palette count (1..32).
  221                        	; Args: _di = Pointer to palette data destination in RAM.
  222                        	;
  223                        	; The transfer is split into 32-byte chunks so that an HSYNC and/or TIMER
  224                        	; IRQ is not delayed for too long while executing.
  225                        	;
  226                        	
  227                        	read_palettes	.proc
  281                        			.endp
  282                        	
  283               0001     		.ifdef	HUCC
  284    00:E40A             			.alias	_read_palette.3		= read_palettes
  285                        		.endif
  286                        	
  287                        	
  288                        	
  289                        	vce_fade_funcs	.procgroup
  516                        			.endprocgroup
  517                        	
  518                        	
  519                        	
  520                        	; ***************************************************************************
  521                        	; ***************************************************************************
  522                        	;
  523                        	; cross_fade_to - Cross fade a palette in RAM towards a reference palette.
  524                        	;
  525                        	; Args: _al = Number of colors (1..256).
  526                        	; Args: _di = Pointer to faded palette destination in RAM.
  527                        	; Args: _bp = Pointer to reference palette data.
  528                        	; Args:   Y = Bank to map into MPR3 & MPR4, or zero to leave unchanged.
  529                        	;
  530                        	; N.B. Y==0 is only useful if the reference palette data is already mapped!
  531                        	;
  532                        	; N.B. This only updates the palette in RAM by 1 RGB step, so it will need
  533                        	;      to be called 7 times to guarantee that you've reached the target.
  534                        	;
  535                        	
  536                        	cross_fade_to	.proc
  658                        			.endp
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
                             #[3]   "..\..\..\include\hucc\vdc.asm"
   40                        			include	"vdc.asm"		; Useful VDC routines.
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; vdc.asm
    5                        	;
    6                        	; Useful routines for operating the HuC6270 Video Display Controller.
    7                        	;
    8                        	; These should be located in permanently-accessible memory!
    9                        	;
   10                        	; Copyright John Brandwood 2021-2025.
   11                        	;
   12                        	; Distributed under the Boost Software License, Version 1.0.
   13                        	; (See accompanying file LICENSE_1_0.txt or copy at
   14                        	;  http://www.boost.org/LICENSE_1_0.txt)
   15                        	;
   16                        	; ***************************************************************************
   17                        	; ***************************************************************************
   18                        	
   19                        	;
   20                        	; Include dependancies ...
   21                        	;
   22                        	
   23                        			include "common.asm"		; Common helpers.
   24                        			include "vce.asm"		; Useful VCE routines.
   25                        	
   26                        	;
   27                        	; Choose how much to transfer to VRAM in a single chunk, normally 16-bytes.
   28                        	;
   29                        	; The cycle timings for a TIA-to-VRAM depend upon how the VDC's MWR CPU slots
   30                        	; line up to the CPU's writes, and how long the VDC has to halt the CPU while
   31                        	; it fetches the next scanline's sprite data.
   32                        	;
   33                        	; These cycle timings are for 0 sprites (best) and 16 sprites (worst) ...
   34                        	;
   35                        	; 32-byte TIA takes 270..364 cycles in 5MHz, 242..312 cycles in 7MHz. (8.44 cycles-per-byte best-case at 5MHz.)
   36                        	; 24-byte TIA takes 210..298 cycles in 5MHz, 186..256 cycles in 7MHz. (8.75 cycles-per-byte best-case at 5MHz.)
   37                        	; 16-byte TIA takes 142..234 cycles in 5MHz, 128..200 cycles in 7MHz. (8.88 cycles-per-byte best-case at 5MHz.)
   38                        	;
   39                        	; If a user wishes to be able to put RCR interrupts one-line-after-another,
   40                        	; then it is only safe to use 32-byte chunks if there are no TIMER or IRQ2
   41                        	; interrupts ... which is almost-impossible to rely on in library code!
   42                        	;
   43                        	
   44               0000     		.ifndef	VRAM_XFER_SIZE
   46                        		.endif
   47                        	
   48                        	;
   49                        	; Enable BG & SPR layers, and RCR interrupt.
   50                        	;
   51                        	
   52    00:E40A  A9 04      	set_rcron:	lda	#$04			; Enable RCR interrupt.
   53    00:E40C  80 0A      			bra	!+
   54                        	
   55    00:E40E  A9 80      	set_bgon:	lda	#$80			; Enable BG layer.
   56    00:E410  80 06      			bra	!+
   57                        	
   58    00:E412  A9 40      	set_spron:	lda	#$40			; Enable SPR layer.
   59    00:E414  80 02      			bra	!+
   60                        	
   61    00:E416  A9 C0      	set_dspon:	lda	#$C0			; Enable BG & SPR layers.
   62                        	
   63    00:E418  04 F3      	!:		tsb	<vdc_crl		; These take effect when
   64               0001     		.if	SUPPORT_SGX			; the next VBLANK occurs.
   65    00:E41A  04 03      			tsb	<sgx_crl
   66                        		.endif
   67    00:E41C  60         			rts
   68                        	
   69                        	;
   70                        	; Disable BG & SPR layers, and RCR interrupt.
   71                        	;
   72                        	
   73    00:E41D  A9 04      	set_rcroff:	lda	#$04			; Disable RCR interrupt.
   74    00:E41F  80 0A      			bra	!+
   75                        	
   76    00:E421  A9 80      	set_bgoff:	lda	#$80			; Disable BG layer.
   77    00:E423  80 06      			bra	!+
   78                        	
   79    00:E425  A9 40      	set_sproff:	lda	#$40			; Disable SPR layer.
   80    00:E427  80 02      			bra	!+
   81                        	
   82    00:E429  A9 C0      	set_dspoff:	lda	#$C0			; Disable BG & SPR layers.
   83                        	
   84    00:E42B  14 F3      	!:		trb	<vdc_crl		; These take effect when
   85               0001     		.if	SUPPORT_SGX			; the next VBLANK occurs.
   86    00:E42D  14 03      			trb	<sgx_crl
   87                        		.endif
   88    00:E42F  60         			rts
   89                        	
   90                        	
   91                        	
   92                        	; ***************************************************************************
   93                        	; ***************************************************************************
   94                        	;
   95                        	; Put the _di data pointer into the VDC's MARR or MAWR register.
   96                        	;
   97                        	; N.B. Library code relies on this preserving Y!
   98                        	;
   99                        	; Args: _di + 0 = BAT X coordinate.
  100                        	; Args: _di + 1 = BAT Y coordinate.
  101                        	;
  102                        	; Here because it relies on the "vdc_bat_width" that is defined in this file.
  103                        	;
  104                        	
  105               0001     		.if	SUPPORT_SGX
  106    00:E430  A2 10      	sgx_di_xy_marr:	ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  107    00:E432  F0         			db	$F0			; Turn "clx" into a "beq".
  108                        		.endif
  109                        	
  110    00:E433  82         	vdc_di_xy_marr:	clx				; Offset to PCE VDC.
  111                        	
  112    00:E434  62         	set_di_xy_mawr:	cla
  113    00:E435  3C 76 26   			bit	vdc_bat_width, x	; Set by set_bat_size().
  114    00:E438  30 08      			bmi	.w128
  115    00:E43A  70 03      			bvs	.w64
  116    00:E43C  46 F1      	.w32:		lsr.h	<_di
  117    00:E43E  6A         			ror	a
  118    00:E43F  46 F1      	.w64:		lsr.h	<_di
  119    00:E441  6A         			ror	a
  120    00:E442  46 F1      	.w128:		lsr.h	<_di
  121    00:E444  6A         			ror	a
  122    00:E445  05 F0      			ora.l	<_di
  123    00:E447  85 F0      			sta.l	<_di
  124    00:E449  4C 7F E3   			jmp	set_di_to_mawr		; In "common.asm".
  125                        	
  126                        	
  127                        	
  128    14:D0D5             	vdc_clear_vram	.procgroup			; These routines share code!
  129                        	
  130                        	; ***************************************************************************
  131                        	; ***************************************************************************
  132                        	;
  133                        	; clear_vram_sgx - Clear all of VRAM in the SGX VDC.
  134                        	; clear_vram_vdc - Clear all of VRAM in the PCE VDC.
  135                        	;
  136                        	; Args: _ax = word value to write to the BAT.
  137                        	; Args: _bl = hi-byte of size of BAT (# of words).
  138                        	;
  139                        	
  140               0001     		.if	SUPPORT_SGX
  141    14:D0D5             	clear_vram_sgx	.proc
  142                        	
  143    14:D0D5  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  144    14:D0D7  F0         			db	$F0			; Turn "clx" into a "beq".
  145                        	
  146    14:D0D8             			.ref	clear_vram_vdc		; Need clear_vram_vdc
  147                        			.endp
  148                        		.endif
  149                        	
  150    14:D0D8             	clear_vram_vdc	.proc
  151                        	
  152    14:D0D8  82         			clx				; Offset to PCE VDC.
  153                        	
  154    14:D0D9  20 D3 FD   	clear_vram_x:	call	clear_bat_x		; Clear the BAT.
  155                        	
  156    14:D0DC  A9 80      			lda	#$80			; Xvert hi-byte of # words
  157    14:D0DE  38         			sec				; in screen to loop count.
  158    14:D0DF  E5 FA      			sbc	<_bl
  159    14:D0E1  4A         			lsr	a
  160                        	
  161                        	;		cly				; Clear the rest of VRAM.
  162    14:D0E2  9E 02 02   			stz	VDC_DL, x
  163    14:D0E5  9E 03 02   	.clr_loop:	stz	VDC_DH, x		; Seperate writes to minimize
  164    14:D0E8  88         			dey				; VDC MWR penalty.
  165    14:D0E9  9E 03 02   			stz	VDC_DH, x
  166    14:D0EC  D0 F7      			bne	.clr_loop
  167    14:D0EE  3A         			dec	a
  168    14:D0EF  D0 F4      			bne	.clr_loop
  169                        	
  170                        			leave				; All done, phew!
         14:D0F1  4C EF FF   			jmp	leave_proc
  171                        	
  172                        			.endp
  173                        	
  174                        	
  175                        	
  176                        	; ***************************************************************************
  177                        	; ***************************************************************************
  178                        	;
  179                        	; clear_bat_sgx - Clear the BAT in the SGX VDC.
  180                        	; clear_bat_vdc - Clear the BAT in the PCE VDC.
  181                        	;
  182                        	; Args: _ax = word value to write to the BAT.
  183                        	; Args: _bl = hi-byte of size of BAT (# of words).
  184                        	;
  185                        	
  186               0001     		.if	SUPPORT_SGX
  187                        	clear_bat_sgx	.proc
  193                        			.endp
  194                        		.endif
  195                        	
  196    14:D0F4             	clear_bat_vdc	.proc
  197                        	
  198    14:D0F4  82         			clx				; Offset to PCE VDC.
  199                        	
  200    14:D0F5             			.ref	clear_bat_x		; Need clear_bat_x
  201                        			.endp
  202                        	
  203    14:D0F5             	clear_bat_x	.proc				; HuCC uses this entry point.
  204                        	
  205    14:D0F5  64 F0      			stz	<_di + 0		; Set VDC or SGX destination
  206    14:D0F7  64 F1      			stz	<_di + 1		; address.
  207    14:D0F9  20 7F E3   			jsr	set_di_to_mawr
  208                        	
  209    14:D0FC  A5 FA      			lda	<_bl			; Xvert hi-byte of # words
  210    14:D0FE  4A         			lsr	a			; in screen to loop count.
  211                        	
  212    14:D0FF  C2         			cly
  213    14:D100  48         	.bat_loop:	pha
  214    14:D101  A5 F8      			lda	<_ax + 0
  215    14:D103  9D 02 02   			sta	VDC_DL, x
  216    14:D106  A5 F9      			lda	<_ax + 1
  217    14:D108  9D 03 02   	.bat_pair:	sta	VDC_DH, x		; Seperate writes to minimize
  218    14:D10B  88         			dey				; VDC MWR penalty.
  219    14:D10C  9D 03 02   			sta	VDC_DH, x
  220    14:D10F  D0 F7      			bne	.bat_pair
  221                        	
  222    14:D111  68         			pla
  223    14:D112  3A         			dec	a
  224    14:D113  D0 EB      			bne	.bat_loop
  225                        	
  226                        			leave
         14:D115  4C EF FF   			jmp	leave_proc
  227                        	
  228                        			.endp
  229                        	
  230                        			.endprocgroup
  231                        	
  232                        	;
  233                        	;
  234                        	;
  235                        	
  236    14:C93C             	vdc_set_mode	.procgroup			; These routines share code!
  237                        	
  238                        	; ***************************************************************************
  239                        	; ***************************************************************************
  240                        	;
  241                        	; set_mode_sgx - Set video hardware registers from a data table.
  242                        	; set_mode_vdc - Set video hardware registers from a data table.
  243                        	;
  244                        	; Args: _bp, Y = _farptr to data table mapped into MPR3 & MPR4.
  245                        	;
  246                        	
  247               0001     		.if	SUPPORT_SGX
  248    14:C93C             	set_mode_sgx	.proc
  249                        	
  250    14:C93C  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  251    14:C93E  F0         			db	$F0			; Turn "clx" into a "beq".
  252                        	
  253                        			.endp
  254                        		.endif
  255                        	
  256    14:C93F             	set_mode_vdc	.proc
  257                        	
  258    14:C93F  82         			clx				; Offset to PCE VDC.
  259                        	
  260    14:C940  F7 F8      			smb7	<_al			; Signal no set_bat_size() yet.
  261                        	
  262    14:C942  43 08      			tma3				; Preserve MPR3.
  263    14:C944  48         			pha
  264    14:C945  43 10      			tma4				; Preserve MPR4.
  265    14:C947  48         			pha
  266                        	
  267    14:C948  20 3B E3   			jsr	map_bp_to_mpr34		; Map data to MPR3 & MPR4.
  268                        	
  269    14:C94B  08         			php				; Disable interrupts.
  270    14:C94C  78         			sei
  271                        	
  272    14:C94D  C2         			cly				; Table size is < 256 bytes.
  273                        	
  274    14:C94E  B1 EC      	.loop:		lda	[_bp], y		; Get the register #, +ve for
  275    14:C950  F0 46      			beq	.done			; VDC, -128 for VCE_CR.
  276    14:C952  10 0C      			bpl	.set_vdc_reg
  277                        	
  278                        			; Set the VCE_CR register.
  279                        	
  280    14:C954  C8         	.set_vce_cr:	iny
  281                        	
  282    14:C955  B1 EC      			lda	[_bp], y		; Get lo-byte of register.
  283    14:C957  C8         			iny
  284    14:C958  8D 44 22   			sta	vce_cr			; No SGX shadow for this!
  285    14:C95B  8D 00 04   			sta	VCE_CR			; Set the VCE clock speed.
  286    14:C95E  80 EE      			bra	.loop			; Do not set VDC_MWR reg bits!
  287                        	
  288                        			; Set a VDC register.
  289                        	
  290    14:C960  C8         	.set_vdc_reg:	iny
  291    14:C961  9D 00 02   			sta	VDC_AR, x		; Set which VDC register.
  292                        	
  293    14:C964  C9 05      			cmp	#VDC_CR			; CS if VDC_CR or higher.
  294    14:C966  F0 14      			beq	.skip_cc
  295    14:C968  18         			clc				; CC if not VDC_CR.
  296                        	
  297    14:C969  49 09      			eor	#VDC_MWR		; Check if this the VDC_MWR
  298    14:C96B  D0 0F      			bne	.skip_cc		; without changing CC.
  299                        	
  300    14:C96D  B1 EC      			lda	[_bp], y		; Remember the BAT size so that
  301    14:C96F  8D 42 22   			sta	vdc_mwr			; set_bat_size() can be called.
  302    14:C972  4A         			lsr	a
  303    14:C973  4A         			lsr	a
  304    14:C974  4A         			lsr	a
  305    14:C975  4A         			lsr	a
  306    14:C976  85 F8      			sta	<_al
  307    14:C978  C8         			iny
  308    14:C979  C8         			iny
  309    14:C97A  80 D2      			bra	.loop
  310                        	
  311    14:C97C  B1 EC      	.skip_cc:	lda	[_bp], y		; Get lo-byte of register.
  312    14:C97E  C8         			iny
  313    14:C97F  90 08      			bcc	.not_vdc_cr
  314                        	
  315               0001     		.if	SUPPORT_SGX
  316    14:C981  E0 00      			cpx	#0			; Writing to the VDC or SGX?
  317    14:C983  F0 02      			beq	.save_crl
  318    14:C985  29 F7      			and	#$F7			; We only need 1 vblank IRQ!
  319                        		.endif
  320                        	
  321    14:C987  95 F3      	.save_crl:	sta	<vdc_crl, x		; Save VDC_CR shadow register.
  322                        	
  323    14:C989  9D 02 02   	.not_vdc_cr:	sta	VDC_DL, x		; Write to VDC.
  324                        	
  325    14:C98C  B1 EC      			lda	[_bp], y		; Get hi-byte of register.
  326    14:C98E  C8         			iny
  327    14:C98F  9D 03 02   			sta	VDC_DH, x
  328    14:C992  90 BA      			bcc	.loop			; Next register, please!
  329                        	
  330    14:C994  95 F4      			sta	<vdc_crh, x		; Save VDC_CR shadow register.
  331                        	
  332    14:C996  80 B6      			bra	.loop			; Next register, please!
  333                        	
  334                        			; All registers set!
  335                        	
  336    14:C998  A9 02      	.done:		lda	#VDC_VWR		; Leave with VDC_VWR set.
  337    14:C99A  95 F7      			sta	<vdc_reg, x
  338                        	;		lda	<vdc_reg, x		; Restore previous VDC_AR from
  339    14:C99C  9D 00 02   			sta	VDC_AR, x		; the shadow variable.
  340                        	
  341    14:C99F  28         			plp				; Restore interrupts.
  342                        	
  343    14:C9A0  68         			pla				; Restore MPR4.
  344    14:C9A1  53 10      			tam4
  345    14:C9A3  68         			pla				; Restore MPR3.
  346    14:C9A4  53 08      			tam3
  347                        	
  348    14:C9A6  7F F8 07   			bbr7	<_al, set_bat_size	; Update if BAT size changed.
  349                        	
  350                        			leave				; All done, phew!
         14:C9A9  4C EF FF   			jmp	leave_proc
  351                        	
  352    14:C9AC             			.ref	set_bat_vdc
  353                        			.endp
  354                        	
  355                        	
  356                        	
  357                        	; ***************************************************************************
  358                        	; ***************************************************************************
  359                        	;
  360                        	; set_bat_sgx - Change the SGX BAT size and initialize variables based on it.
  361                        	; set_bat_vdc - Change the PCE BAT size and initialize variables based on it.
  362                        	;
  363                        	; Args: _al = new size (0-7).
  364                        	;
  365                        	; (VDC_MWR_32x32  >> 4) or in HuCC, SCR_SIZE_32x32.
  366                        	; (VDC_MWR_32x64  >> 4) or in HuCC, SCR_SIZE_32x64.
  367                        	; (VDC_MWR_64x32  >> 4) or in HuCC, SCR_SIZE_64x32.
  368                        	; (VDC_MWR_64x64  >> 4) or in HuCC, SCR_SIZE_64x64.
  369                        	; (VDC_MWR_128x32 >> 4) or in HuCC, SCR_SIZE_128x32.
  370                        	; (VDC_MWR_128x64 >> 4) or in HuCC, SCR_SIZE_128x64.
  371                        	;
  372                        	
  373               0001     		.if	SUPPORT_SGX
  374    14:C9AC             	set_bat_sgx	.proc
  375                        	
  376    14:C9AC  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  377    14:C9AE  F0         			db	$F0			; Turn "clx" into a "beq".
  378                        	
  379    14:C9AF             			.ref	set_bat_vdc
  380                        			.endp
  381                        		.endif
  382                        	
  383    14:C9AF             	set_bat_vdc	.proc
  384                        	
  385    14:C9AF  82         			clx				; Offset to PCE VDC.
  386                        	
  387    14:C9B0  A5 F8      	set_bat_size:	lda	<_al			; Get BAT size value.
  388    14:C9B2  29 07      			and	#7			; Sanitize screen size value.
  389    14:C9B4  A8         			tay
  390    14:C9B5  0A         			asl	a			; Put it in bits 4..6.
  391    14:C9B6  0A         			asl	a
  392    14:C9B7  0A         			asl	a
  393    14:C9B8  0A         			asl	a
  394    14:C9B9  85 00      			sta	<__temp
  395                        	
  396    14:C9BB  B9 FB C9   			lda	.width, y
  397    14:C9BE  9D 76 26   			sta	vdc_bat_width, x
  398    14:C9C1  3A         			dec	a
  399    14:C9C2  9D 78 26   			sta	vdc_bat_x_mask, x
  400                        	
  401    14:C9C5  B9 03 CA   			lda	.height, y
  402    14:C9C8  9D 77 26   			sta	vdc_bat_height, x
  403    14:C9CB  3A         			dec	a
  404    14:C9CC  9D 79 26   			sta	vdc_bat_y_mask, x
  405                        	
  406    14:C9CF  B9 0B CA   			lda	.limit, y
  407    14:C9D2  9D 7A 26   			sta	vdc_bat_limit, x
  408                        	
  409    14:C9D5  B9 13 CA   			lda	.increment, y		; Put the VRAM increment for a
  410    14:C9D8  95 F4      			sta	<vdc_crh, x		; line into vdc_crh for later.
  411                        	
  412    14:C9DA  08         			php
  413    14:C9DB  78         			sei
  414                        	
  415    14:C9DC  A9 09      			lda	#VDC_MWR
  416    14:C9DE  9D 00 02   			sta	VDC_AR, x
  417                        	
  418    14:C9E1  AD 42 22   			lda	vdc_mwr			; Get the MWR access width bits.
  419    14:C9E4  29 8F      			and	#%10001111
  420    14:C9E6  05 00      			ora	<__temp
  421               0001     		.if	SUPPORT_SGX
  422    14:C9E8  E0 00      			cpx	#PCE_VDC_OFFSET		; This has no SGX shadow!
  423    14:C9EA  D0 03      			bne	!+
  424                        		.endif
  425    14:C9EC  8D 42 22   			sta	vdc_mwr
  426    14:C9EF  9D 02 02   	!:		sta	VDC_DL, x
  427                        	
  428    14:C9F2  B5 F7      			lda	<vdc_reg, x		; Restore previous VDC_AR from
  429    14:C9F4  9D 00 02   			sta	VDC_AR, x		; the shadow variable.
  430                        	
  431    14:C9F7  28         			plp
  432                        	
  433                        			leave
         14:C9F8  4C EF FF   			jmp	leave_proc
  434                        	
  435    14:C9FB  20 40 80 80	.width:		db	$20,$40,$80,$80,$20,$40,$80,$80
         14:C9FF  20 40 80 80 
  436    14:CA03  20 20 20 20	.height:	db	$20,$20,$20,$20,$40,$40,$40,$40
         14:CA07  40 40 40 40 
  437    14:CA0B  03 07 0F 0F	.limit:		db	$03,$07,$0F,$0F,$07,$0F,$1F,$1F
         14:CA0F  07 0F 1F 1F 
  438    14:CA13  08 10 18 18	.increment	db	$08,$10,$18,$18,$08,$10,$18,$18
         14:CA17  08 10 18 18 
  439                        	
  440               2676     			.bss
  441                        	
  442                        	; **************
  443                        	; 16-bytes of VDC BAT information.
  444                        	;
  445                        	; N.B. MUST be 16-bytes before the SGX versions to use PCE_VDC_OFFSET.
  446                        	;
  447                        	; N.B. Declared inside this .proc so that they can be stripped if unused.
  448                        	
  449                        	; Initialized by set_bat_vdc.
  450    F8:2676             	vdc_bat_width:	ds	1	; $20, $40, $80
  451    F8:2677             	vdc_bat_height:	ds	1	; $20, $40
  452    F8:2678             	vdc_bat_x_mask:	ds	1	; $1F, $3F, $7F
  453    F8:2679             	vdc_bat_y_mask:	ds	1	; $1F, $3F
  454    F8:267A             	vdc_bat_limit:	ds	1	; (>$03FF), (>$07FF), (>$0FFF), (>$1FFF)
  455                        	
  456                        	; From blkmap.asm just to avoid wasting .bss space with padding.
  457    F8:267B             	vdc_map_draw_w:	ds	1	; (SCR_WIDTH / 8) + 1
  458    F8:267C             	vdc_map_draw_h:	ds	1	; (SCR_HEIGHT / 8) + 1
  459    F8:267D             	vdc_map_line_w:	ds	1	; Line width of map data in tiles.
  460    F8:267E             	vdc_map_scrn_w:	ds	1	; Line width of map data in screens.
  461    F8:267F             	vdc_map_pxl_x:	ds	2	; Current top-left X in pixels.
  462    F8:2681             	vdc_map_pxl_y:	ds	2	; Current top-left Y in pixels.
  463    F8:2683             	vdc_map_option:	ds	1	; Flags to disable BAT alignment.
  464                        	
  465                        	; From hucc-old-spr.asm just to avoid wasting .bss space with padding.
  466    F8:2684             	spr_max:	ds	1
  467    F8:2685             	spr_clr:	ds	1
  468                        	
  469               0001     		.if	SUPPORT_SGX
  470                        	
  471                        	; **************
  472                        	; 16-bytes of SGX BAT information.
  473                        	;
  474                        	; N.B. MUST be 16-bytes after the VDC versions to use SGX_VDC_OFFSET.
  475                        	;
  476                        	; N.B. Declared inside this .proc so that they can be stripped if unused.
  477                        	
  478                        	; Initialized by set_bat_sgx.
  479    F8:2686             	sgx_bat_width:	ds	1	; $20, $40, $80
  480    F8:2687             	sgx_bat_height:	ds	1	; $20, $40
  481    F8:2688             	sgx_bat_x_mask:	ds	1	; $1F, $3F, $7F
  482    F8:2689             	sgx_bat_y_mask:	ds	1	; $1F, $3F
  483    F8:268A             	sgx_bat_limit:	ds	1	; (>$03FF), (>$07FF), (>$0FFF), (>$1FFF)
  484                        	
  485                        	; From blkmap.asm just to avoid wasting .bss space with padding.
  486    F8:268B             	sgx_map_draw_w:	ds	1	; (SCR_WIDTH / 8) + 1
  487    F8:268C             	sgx_map_draw_h:	ds	1	; (SCR_HEIGHT / 8) + 1
  488    F8:268D             	sgx_map_line_w:	ds	1	; Line width of map data in tiles.
  489    F8:268E             	sgx_map_scrn_w:	ds	1	; Line width of map data in screens.
  490    F8:268F             	sgx_map_pxl_x:	ds	2	; Current top-left X in pixels.
  491    F8:2691             	sgx_map_pxl_y:	ds	2	; Current top-left Y in pixels.
  492    F8:2693             	sgx_map_option:	ds	1	; Flags to disable BAT alignment.
  493                        	
  494                        	; From hucc-old-spr.asm just to avoid wasting .bss space with padding.
  495    F8:2694             	sgx_spr_max:	ds	1
  496    F8:2695             	sgx_spr_clr:	ds	1
  497                        	
  498                        		.endif
  499                        	
  500               CA1B     			.code
  501                        	
  502                        			.endp
  503                        	
  504                        			.endprocgroup
  505                        	
  506                        	
  507                        	
  508                        	; ***************************************************************************
  509                        	; ***************************************************************************
  510                        	;
  511                        	; sgx_detect - Detect whether we're running on a SuperGrafx (and init VPC).
  512                        	;
  513                        	; Returns: X,C-flag, and "sgx_detected" = NZ, CS if detected.
  514                        	;
  515                        	; ***************************************************************************
  516                        	;
  517                        	; https://web.archive.org/web/20161129055659/http://cgfm2.emuviews.com/txt/sgxtech.txt
  518                        	;
  519                        	; ***************************************************************************
  520                        	;
  521                        	; HuC6202 VIDEO PRIORITY CONTROLLER (huge thanks to Charles MacDonald!)
  522                        	;
  523                        	; The VPC has no access to sprite priority data, it can only sort pixels
  524                        	; based upon which VDC and whether they are "sprite" or "background".
  525                        	;
  526                        	; This can sometimes lead to unexpected results with low-priority sprites.
  527                        	;
  528                        	; VPC registers $0008 and $0009 make up four 4-bit values that define the
  529                        	; enabled layers and priority setting for the four possible window areas.
  530                        	;
  531                        	; Bits 3-0 of $0008 are for the region where Window 1 and 2 overlap
  532                        	; Bits 7-4 of $0008 are for the region occupied by only Window 2
  533                        	; Bits 3-0 of $0009 are for the region occupied by only Window 1
  534                        	; Bits 7-4 of $0009 are for the region where no Window is present
  535                        	;
  536                        	;  Each 4-bit value has the same format:
  537                        	;
  538                        	;  Bit 0: VDC #1 graphics are 0=disabled, 1=enabled
  539                        	;  Bit 1: VDC #2 graphics are 0=disabled, 1=enabled
  540                        	;  Bit 2: Bit 0 of priority setting
  541                        	;  Bit 3: Bit 1 of priority setting
  542                        	;
  543                        	;   Priority Setting 0b00xx: (useful when VDC #1 is a fullscreen HUD)
  544                        	;
  545                        	;    FRONT
  546                        	;     SP1 = VDC #1 (pce) sprite pixels
  547                        	;     BG1 = VDC #1 (pce) background pixels
  548                        	;     SP2 = VDC #2 (sgx) sprite pixels
  549                        	;     BG2 = VDC #2 (sgx) background pixels
  550                        	;    BACK
  551                        	;
  552                        	;   Priority Setting 0b01xx: (useful for parallax backgrounds)
  553                        	;
  554                        	;    FRONT
  555                        	;     SP1 = VDC #1 (pce) sprite pixels
  556                        	;     SP2 = VDC #2 (sgx) sprite pixels
  557                        	;     BG1 = VDC #1 (pce) background pixels
  558                        	;     BG2 = VDC #2 (sgx) background pixels
  559                        	;    BACK
  560                        	;
  561                        	;   Priority Setting 0b10xx: (only useful for special effects)
  562                        	;
  563                        	;    FRONT
  564                        	;     BG1 = VDC #1 (pce) background pixels (transparent where sprites)
  565                        	;     BG2 = VDC #2 (sgx) background pixels
  566                        	;     SP1 = VDC #1 (pce) sprite pixels
  567                        	;     SP2 = VDC #2 (sgx) sprite pixels
  568                        	;    BACK
  569                        	
  570               0001     		.if	SUPPORT_SGX
  571               0001     		.if	1
  572    14:D118             	sgx_detect	.proc
  573                        	
  574    14:D118  A0 7F      			ldy	#$7F			; Use VRAM address $7F7F
  575    14:D11A  84 F0      			sty.l	<_di			; because it won't cause
  576    14:D11C  84 F1      			sty.h	<_di			; a screen glitch.
  577                        	
  578    14:D11E  20 7B E3   			jsr	sgx_di_to_mawr		; Write $0001 to SGX VRAM.
  579    14:D121  A0 01      			ldy	#$01
  580    14:D123  8C 12 02   			sty	SGX_DL
  581    14:D126  9C 13 02   			stz	SGX_DH
  582                        	
  583    14:D129  20 7E E3   			jsr	vdc_di_to_mawr		; Write $0000 to VDC VRAM.
  584    14:D12C  9C 02 02   			stz	VDC_DL
  585    14:D12F  9C 03 02   			stz	VDC_DH
  586                        	
  587    14:D132  20 6E E3   			jsr	sgx_di_to_marr		; Check value in SGX VRAM.
  588    14:D135  AC 12 02   			ldy	SGX_DL			; $01 if found, $00 if not.
  589    14:D138  8C E8 22   			sty	sgx_detected
  590    14:D13B  F0 10      			beq	!+			; Skip the rest if not SGX.
  591                        	
  592    14:D13D  20 7B E3   			jsr	sgx_di_to_mawr		; Write $0000 to SGX VRAM
  593    14:D140  9C 12 02   			stz	SGX_DL			; to clean VRAM contents.
  594    14:D143  9C 13 02   			stz	SGX_DH
  595                        	
  596    14:D146  73 53 D1 08			tii	.vpc_mode, VPC_CR, 8	; Initialize the HuC6202 VPC.
         14:D14A  02 08 00    
  597                        	
  598    14:D14D  98         	!:		tya
  599    14:D14E  AA         			tax				; "leave" copies X back to A.
  600    14:D14F  4A         			lsr	a			; Also CC if PCE, CS if SGX.
  601                        	
  602                        			leave				; All done, phew!
         14:D150  4C EF FF   			jmp	leave_proc
  603                        		.else
  618                        		.endif
  619                        	
  620               0000     		.ifndef	SGX_PARALLAX
  622                        		.endif
  623                        	
  624               0001     		.if	SGX_PARALLAX
  625    14:D153  00 70      	.vpc_mode:	dw	$7000			; Use SGX as a parallax layer
  626    14:D155  00 00      			dw	$0000			; behind a VDC background.
  627    14:D157  00 00      			dw	$0000
  628    14:D159  00 00      			dw	$0000
  629                        		.else
  634                        		.endif	SGX_PARALLAX
  635                        	
  636                        			.endp
  637                        	
  638               0000     		.ifndef	CORE_VERSION			; CORE has this in the kernel.
  642                        		.endif	CORE_VERSION
  643                        	
  644                        		.endif	SUPPORT_SGX
  645                        	
  646                        	
  647                        	
  648                        	
  649                        	vdc_copy_to	.procgroup			; These routines share code!
  799                        			.endprocgroup
  800                        	
  801                        	
  802                        	
  803                        	; ***************************************************************************
  804                        	; ***************************************************************************
  805                        	;
  806                        	; init_240x208 - An example of initializing screen and VRAM.
  807                        	;
  808                        	; This can be used as-is, or copied to your own program and modified.
  809                        	;
  810                        	
  811                        	init_240x208	.proc
  892                        			.endp
  893                        	
  894                        	
  895                        	
  896                        	; ***************************************************************************
  897                        	; ***************************************************************************
  898                        	;
  899                        	; init_256x224 - An example of initializing screen and VRAM.
  900                        	;
  901                        	; This can be used as-is, or copied to your own program and modified.
  902                        	;
  903                        	
  904                        	init_256x224	.proc
  985                        			.endp
  986                        	
  987                        	
  988                        	
  989                        	; ***************************************************************************
  990                        	; ***************************************************************************
  991                        	;
  992                        	; init_352x224 - An example of initializing screen and VRAM.
  993                        	;
  994                        	; This can be used as-is, or copied to your own program and modified.
  995                        	;
  996                        	
  997                        	init_352x224	.proc
 1078                        			.endp
 1079                        	
 1080                        	
 1081                        	
 1082                        	; ***************************************************************************
 1083                        	; ***************************************************************************
 1084                        	;
 1085                        	; init_512x224 - An example of initializing screen and VRAM.
 1086                        	;
 1087                        	; This can be used as-is, or copied to your own program and modified.
 1088                        	;
 1089                        	
 1090                        	init_512x224	.proc
 1171                        			.endp
 1172                        	
 1173                        	
 1174                        	
 1175                        	; ***************************************************************************
 1176                        	; ***************************************************************************
 1177                        	;
 1178                        	; init_320x208 - An example of initializing screen and VRAM.
 1179                        	;
 1180                        	; This can be used as-is, or copied to your own program and modified.
 1181                        	;
 1182                        	; This resolution is rarely-seen, but it has no overscan, so it has a use.
 1183                        	;
 1184                        	
 1185                        	init_320x208	.proc
 1266                        			.endp
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   41                        	
                             #[3]   "..\..\..\include\hucc\hucc-math.asm"
   42                        			include	"hucc-math.asm"		; HuCC multiply and divide.
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-math.asm
    5                        	;
    6                        	; Basic (i.e. very slow) 8-bit and 16-bit multiply and divide routines.
    7                        	;
    8                        	; Copyright John Brandwood 2021-2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; This is basically a set of SDCC-compatible routines, but using Y:A for the
   18                        	; primary register instead of X:A.
   19                        	;
   20                        	; Using Y:A makes the routines instantly usable with HuCC, and it also makes
   21                        	; them usable with SDCC with just an "sxy" before and after the call.
   22                        	;
   23                        	; ***************************************************************************
   24                        	; ***************************************************************************
   25                        	
   26               E44C     			.code
   27                        	
   28               2000     	multiplier	=	__temp
   29               2094     	multiplicand	=	___SDCC_m6502_ret0
   30               2094     	product		=	multiplicand
   31                        	
   32               2000     	__mulint_PARM_2	=	multiplier
   33                        	
   34               2000     	divisor		=	__temp
   35               2094     	dividend	=	___SDCC_m6502_ret0
   36               2094     	quotient	=	dividend
   37               2096     	remainder	=	___SDCC_m6502_ret2
   38                        	
   39               2000     	__moduint_PARM_2 =	divisor
   40               2000     	__modsint_PARM_2 =	divisor
   41               2000     	__divuint_PARM_2 =	divisor
   42               2000     	__divsint_PARM_2 =	divisor
   43                        	
   44                        	
   45                        	
   46                        	; ***************************************************************************
   47                        	; int
   48                        	; _mulint (int a, int b)
   49                        	;
   50                        	; 1st parameter in Y:A (multiplicand)
   51                        	; 2nd parameter in __mulint_PARM_2 (multiplier)
   52                        	; result in Y:A
   53                        	;
   54                        	; N.B. signed and unsigned multiply only differ in the top 16 of the 32bits!
   55                        	
   56    00:E44C  85 94      	__mulint:	sta	<multiplicand + 0
   57    00:E44E  84 95      			sty	<multiplicand + 1
   58                        	
   59    00:E450  A2 10      			ldx	#16			; Loop 16 times.
   60                        	
   61    00:E452  46 95      			lsr	<multiplicand + 1	; Divide multiplicand by 2
   62    00:E454  66 94      			ror	<multiplicand + 0	; and clear the 16th bit.
   63                        	
   64    00:E456  62         			cla				; Clear top word of product.
   65    00:E457  85 96      			sta.l	<multiplicand + 2
   66    00:E459  90 0B      			bcc	.rotate
   67                        	
   68    00:E45B  A8         	.add:		tay				; Add the 16-bit multiplier to
   69    00:E45C  18         			clc				; top 16-bits of the product.
   70    00:E45D  A5 96      			lda	<multiplicand + 2
   71    00:E45F  65 00      			adc.l	<multiplier
   72    00:E461  85 96      			sta	<multiplicand + 2
   73    00:E463  98         			tya
   74    00:E464  65 01      			adc.h	<multiplier
   75                        	
   76    00:E466  6A         	.rotate:	ror	a			; Rotate product into the top
   77    00:E467  66 96      			ror	<multiplicand + 2	; bits of the multiplicand ...
   78    00:E469  66 95      			ror	<multiplicand + 1	; and divide multiplicand by 2.
   79    00:E46B  66 94      			ror	<multiplicand + 0
   80                        	
   81    00:E46D  CA         			dex
   82    00:E46E  B0 EB      			bcs	.add			; Add multiplier to top word?
   83    00:E470  D0 F4      			bne	.rotate			; Completed 16 bits?
   84                        	
   85    00:E472  85 97      			sta	<multiplicand + 3	; Save top byte of product.
   86                        	
   87    00:E474  A5 94      			lda.l	<multiplicand		; Return the bottom 16-bits of
   88    00:E476  A4 95      			ldy.h	<multiplicand		; the 32-bit product.
   89                        	
   90    00:E478  60         			rts
   91                        	
   92                        	
   93                        	
   94                        	; ***************************************************************************
   95                        	; unsigned int
   96                        	; _divuint (unsigned int x, unsigned int y)
   97                        	;
   98                        	; 1st parameter in Y:A (unsigned dividend)
   99                        	; 2nd parameter in __divuint_PARM_2 (unsigned divisor)
  100                        	; result in Y:A
  101                        	
  102    00:E479  20 81 E4   	__divuint:	jsr	__moduint		; Call the basic uint division.
  103                        	
  104    00:E47C  A5 94      			lda.l	<quotient		; Then get the result from where
  105    00:E47E  A4 95      			ldy.h	<quotient		; it was calculated.
  106    00:E480  60         			rts
  107                        	
  108                        	
  109                        	
  110                        	; ***************************************************************************
  111                        	; unsigned int
  112                        	; _moduint (unsigned int x, unsigned int y)
  113                        	;
  114                        	; 1st parameter in Y:A (unsigned dividend)
  115                        	; 2nd parameter in __moduint_PARM_2 (unsigned divisor)
  116                        	; result in Y:A
  117                        	;
  118                        	; If the dividend has more bits than the divisor, then we need to check the
  119                        	; 17th bit of the remainder!
  120                        	
  121               0000     		.if	0
  176                        		.else
  177                        	
  178    00:E481  85 94      	__moduint:	sta.l	<dividend		; 1st SDCC parameter in Y:A.
  179    00:E483  84 95      			sty.h	<dividend
  180                        	
  181    00:E485  A5 00      	divmoduint:	lda.l	<divisor		; Check for a divide-by-zero.
  182    00:E487  05 01      			ora.h	<divisor
  183    00:E489  F0 FE      	.zero:		beq	.zero
  184                        	
  185    00:E48B  A2 11      			ldx	#16 + 1
  186                        	
  187    00:E48D  C2         			cly				; Clear remainder.
  188    00:E48E  84 97      			sty.h	<remainder
  189                        	
  190    00:E490  98         	.skip:		tya				; Restore remainder lo-byte.
  191                        	
  192    00:E491  26 94      	.loop:		rol.l	<dividend		; Quotient bit -> dividend LSB.
  193    00:E493  26 95      			rol.h	<dividend		; Rotate dividend, MSB -> C.
  194                        	
  195    00:E495  CA         			dex
  196    00:E496  F0 14      			beq	.finished
  197                        	
  198    00:E498  2A         			rol	a			; Rotate C into remainder.
  199    00:E499  26 97      			rol.h	<remainder
  200                        	;		php				; Preserve remainder 17th bit.
  201                        	
  202    00:E49B  A8         			tay				; Preserve remainder lo-byte.
  203                        	
  204    00:E49C  C5 00      			cmp.l	<divisor		; Test divisor.
  205    00:E49E  A5 97      			lda.h	<remainder
  206    00:E4A0  E5 01      			sbc.h	<divisor
  207    00:E4A2  90 EC      			bcc	.skip			; CC if divisor > remainder.
  208                        	
  209                        	;		cmp.l	<divisor		; If the dividend has more bits
  210                        	;		lda.h	<remainder		; than the divisor then we need
  211                        	;		sbc.h	<divisor		; to check the remainder hi-bit.
  212                        	;		bcs	.subtract		; CS if divisor <= remainder.
  213                        	;		plp				; Restore remainder 17th bit.
  214                        	;		bcc	.skip			; CC if divisor > remainder.
  215                        	;		db	$90			; Turn "plp" into "bcc" to skip.
  216                        	;.subtract:	plp				; Discard remainder 17th bit.
  217                        	;		sec
  218                        	
  219    00:E4A4  85 97      			sta.h	<remainder		; Subtract divisor.
  220    00:E4A6  98         			tya
  221    00:E4A7  E5 00      			sbc.l	<divisor
  222    00:E4A9  38         			sec				
  223    00:E4AA  80 E5      			bra	.loop
  224                        	
  225    00:E4AC  A4 97      	.finished:	ldy.h	<remainder		; Get the remainder hi-byte.
  226                        	
  227    00:E4AE  60         			rts
  228                        	
  229                        		.endif
  230                        	
  231                        	
  232                        	
  233                        	; ***************************************************************************
  234                        	; int
  235                        	; _divsint (int x, int y)
  236                        	;
  237                        	; 1st parameter in Y:A (signed dividend)
  238                        	; 2nd parameter in __divsint_PARM_2 (signed divisor)
  239                        	; result in Y:A
  240                        	
  241    00:E4AF  20 B7 E4   	__divsint:	jsr	__modsint		; Call the basic sint division.
  242                        	
  243    00:E4B2  A5 94      			lda.l	<quotient		; Then get the result from where
  244    00:E4B4  A4 95      			ldy.h	<quotient		; it was calculated.
  245    00:E4B6  60         			rts
  246                        	
  247                        	
  248                        	
  249                        	; ***************************************************************************
  250                        	; int
  251                        	; _modsint (int x, int y)
  252                        	;
  253                        	; 1st parameter in Y:A (signed dividend)
  254                        	; 2nd parameter in __modsint_PARM_2 (signed divisor)
  255                        	; result in Y:A
  256                        	
  257    00:E4B7  84 95      	__modsint:	sty.h	<dividend
  258                        	
  259    00:E4B9  C0 80      			cpy	#$80			; Remainder -ve if dividend
  260    00:E4BB  08         			php				; was -ve.
  261    00:E4BC  90 03      			bcc	!+
  262    00:E4BE  20 0E E5   			jsr	neg_yacs		; Negate the dividend.
  263                        	
  264    00:E4C1  85 94      	!:		sta.l	<dividend		; Store the dividend.
  265    00:E4C3  A5 95      			lda.h	<dividend
  266    00:E4C5  84 95      			sty.h	<dividend
  267                        	
  268    00:E4C7  45 01      			eor.h	<divisor		; Quotient is -ve if divisor
  269    00:E4C9  08         			php				; and dividend signs differ.
  270                        	
  271    00:E4CA  A5 01      			lda.h	<divisor		; Is the divisor -ve?
  272    00:E4CC  10 0B      			bpl	!+
  273                        	
  274    00:E4CE  38         			sec				; Negate the divisor.
  275    00:E4CF  62         			cla
  276    00:E4D0  E5 00      			sbc.l	<divisor
  277    00:E4D2  85 00      			sta.l	<divisor
  278    00:E4D4  62         			cla
  279    00:E4D5  E5 01      			sbc.h	<divisor
  280    00:E4D7  85 01      			sta.h	<divisor
  281                        	
  282    00:E4D9  20 85 E4   	!:		jsr	divmoduint		; Do the unsigned division.
  283                        	
  284    00:E4DC  28         	.result:	plp				; Should the quotient be -ve?
  285    00:E4DD  10 0D      			bpl	.remainder
  286                        	
  287    00:E4DF  AA         			tax				; Preserve remainder lo-byte.
  288                        	
  289    00:E4E0  38         			sec				; Then negate the quotient.
  290    00:E4E1  62         			cla
  291    00:E4E2  E5 94      			sbc.l	<dividend
  292    00:E4E4  85 94      			sta.l	<dividend
  293    00:E4E6  62         			cla
  294    00:E4E7  E5 95      			sbc.h	<dividend
  295    00:E4E9  85 95      			sta.h	<dividend
  296                        	
  297    00:E4EB  8A         			txa				; Restore remainder lo-byte.
  298                        	
  299    00:E4EC  28         	.remainder:	plp				; Was the dividend -ve?
  300    00:E4ED  B0 1F      			bcs	neg_yacs		; Then negate the remainder.
  301    00:E4EF  60         			rts
  302                        	
  303                        	
  304                        	
  305                        	; ***************************************************************************
  306                        	; unsigned int
  307                        	; _muluchar (unsigned char x, unsigned char y)
  308                        	;
  309                        	; 1st parameter in A (unsigned multiplicand)
  310                        	; 2nd parameter in Y (unsigned multiplier)
  311                        	; result in Y:A
  312                        	
  313    00:E4F0  84 00      	__muluchar:	sty	<multiplier
  314                        	
  315    00:E4F2  A0 08      	muluchar_a:	ldy	#8			; Loop 8 times.
  316                        	
  317    00:E4F4  4A         			lsr	a			; Divide multiplicand by 2
  318    00:E4F5  85 94      			sta	<multiplicand		; and clear the 8th bit.
  319                        	
  320    00:E4F7  62         			cla				; Clear top byte of product.
  321    00:E4F8  90 03      			bcc	.rotate
  322                        	
  323    00:E4FA  18         	.add:		clc				; Add the 8-bit multiplier to
  324    00:E4FB  65 00      			adc	<multiplier		; top 8-bits of the product.
  325                        	
  326    00:E4FD  6A         	.rotate:	ror	a			; Rotate product into the top
  327    00:E4FE  66 94      			ror	<multiplicand		; bits of the multiplicand.
  328                        	
  329    00:E500  88         			dey
  330    00:E501  B0 F7      			bcs	.add			; Add multiplier to top byte?
  331    00:E503  D0 F8      			bne	.rotate			; Completed 8 bits?
  332                        	
  333    00:E505  A8         			tay				; Return the 16-bit product.
  334    00:E506  A5 94      			lda	<multiplicand
  335                        	
  336    00:E508  60         			rts
  337                        	
  338                        	
  339                        	
  340                        	; ***************************************************************************
  341                        	; signed int
  342                        	; abs (signed int x)
  343                        	;
  344                        	; 1st parameter in Y:A (signed)
  345                        	; result in Y:A
  346                        	
  347    00:E509  C0 80      	_abs:		cpy	#$80			; Is the hi-byte -ve?
  348    00:E50B  90 0B      			bcc	!+
  349                        	
  350    00:E50D  38         	neg_ya:		sec
  351    00:E50E  49 FF      	neg_yacs:	eor	#$FF
  352    00:E510  69 00      			adc	#0
  353    00:E512  42         			say
  354    00:E513  49 FF      			eor	#$FF
  355    00:E515  69 00      			adc	#0
  356    00:E517  42         			say
  357    00:E518  60         	!:		rts
  358                        	
  359    00:E519             	_abs.1		.alias	_abs
  360                        	
  361                        	
  362                        	
  363                        	; ***************************************************************************
  364                        	; signed int
  365                        	; _mulschar (signed char x, signed char y)
  366                        	;
  367                        	; 1st parameter in A (signed multiplicand)
  368                        	; 2nd parameter in Y (signed multiplier)
  369                        	; result in Y:A
  370                        	;
  371                        	; N.B. Y and A get swapped to make the code shorter.
  372                        	
  373    00:E519  85 94      	__mulschar:	sta	<multiplicand		; Remember multiplicand sign.
  374                        	
  375    00:E51B  C9 80      			cmp	#$80			; Is the multiplicand -ve?
  376    00:E51D  90 03      			bcc	!+
  377    00:E51F  49 FF      			eor	#$FF			; Negate the multiplicand.
  378    00:E521  1A         			inc	a
  379    00:E522  85 00      	!:		sta	<multiplier		; Then save it as multiplier.
  380                        	
  381    00:E524  98         			tya				; Product -ve if multiplicand
  382    00:E525  45 94      			eor	<multiplicand		; and multiplier signs differ.
  383    00:E527  08         			php				; Remember product sign.
  384                        	
  385    00:E528  98         			tya				; Is the multiplicand -ve?
  386    00:E529  10 03      			bpl	!+
  387    00:E52B  49 FF      			eor	#$FF			; Negate the multiplicand.
  388    00:E52D  1A         			inc	a
  389                        	
  390    00:E52E  20 F2 E4   	!:		jsr	muluchar_a		; Multiplier already saved.
  391                        	
  392    00:E531  28         			plp				; Is the product -ve?
  393    00:E532  30 D9      			bmi	neg_ya
  394    00:E534  60         			rts
  395                        	
  396                        	
  397                        	
  398                        	; ***************************************************************************
  399                        	; unsigned int
  400                        	; _mulsuchar (signed char x, signed char y)
  401                        	;
  402                        	; 1st parameter in A (unsigned multiplicand)
  403                        	; 2nd parameter in Y (signed multiplier)
  404                        	; result in Y:A
  405                        	;
  406                        	; N.B. Y and A get swapped to make the code shorter.
  407                        	
  408    00:E535  42         	__mulsuchar:	say				; Put the signed param in A.
  409                        			; drop through to __muluschar
  410                        	
  411                        	
  412                        	
  413                        	; ***************************************************************************
  414                        	; signed int
  415                        	; _muluschar (unsigned char x, unsigned char y)
  416                        	;
  417                        	; 1st parameter in A (signed multiplicand)
  418                        	; 2nd parameter in Y (unsigned multiplier)
  419                        	; result in Y:A
  420                        	
  421    00:E536  C9 80      	__muluschar:	cmp	#$80			; Is multiplicand -ve?
  422    00:E538  08         			php				; Remember the sign.
  423    00:E539  90 03      			bcc	!+
  424    00:E53B  49 FF      			eor	#$FF			; Negate multiplicand.
  425    00:E53D  1A         			inc	a
  426                        	
  427    00:E53E  20 F0 E4   	!:		jsr	__muluchar		; Do the unsigned multiply.
  428                        	
  429    00:E541  28         			plp				; Was multiplicand -ve?
  430    00:E542  B0 CA      			bcs	neg_yacs		; Then negate the product.
  431    00:E544  60         			rts
  432                        	
  433                        	
  434                        	
  435                        	; ***************************************************************************
  436                        	; unsigned int
  437                        	; _moduchar (unsigned char x, unsigned char y)
  438                        	;
  439                        	; 1st parameter in A (unsigned dividend)
  440                        	; 2nd parameter in Y (unsigned divisor)
  441                        	; result in Y:A
  442                        	
  443    00:E545  84 00      	__moduchar:	sty.l	<divisor
  444                        	
  445    00:E547  0A         	divmodu8_a:	asl	a			; Rotate dividend, MSB -> C.
  446    00:E548  85 94      			sta.l	<dividend
  447    00:E54A  64 95      			stz.h	<dividend		; Clear quotient hi-byte.
  448                        	
  449    00:E54C  A0 08      			ldy	#8
  450    00:E54E  62         			cla				; Clear remainder.
  451    00:E54F  2A         	.loop:		rol	a			; Rotate C into remainder.
  452    00:E550  C5 00      			cmp	<divisor		; Test divisor.
  453    00:E552  90 02      			bcc	.skip			; CC if divisor > remainder.
  454    00:E554  E5 00      			sbc	<divisor		; Subtract divisor.
  455    00:E556  26 94      	.skip:		rol	<dividend		; Quotient bit -> dividend LSB.
  456    00:E558  88         			dey
  457    00:E559  D0 F4      			bne	.loop
  458                        	
  459    00:E55B  C2         			cly				; Clear hi-byte of return.
  460    00:E55C  60         			rts				; Return the 16-bit remainder.
  461                        	
  462                        	
  463                        	
  464                        	; ***************************************************************************
  465                        	; unsigned int
  466                        	; _divuchar (unsigned char x, unsigned char y)
  467                        	;
  468                        	; 1st parameter in A (unsigned dividend)
  469                        	; 2nd parameter in Y (unsigned divisor)
  470                        	; result in Y:A
  471                        	
  472    00:E55D  20 45 E5   	__divuchar:	jsr	__moduchar
  473                        	
  474    00:E560  A5 94      			lda	<dividend		; Get the dividend lo-byte.
  475    00:E562  60         			rts				; Return the 16-bit dividend.
  476                        	
  477                        	
  478                        	
  479                        	; ***************************************************************************
  480                        	; signed int
  481                        	; _modschar (signed char x, signed char y)
  482                        	;
  483                        	; 1st parameter in A (signed dividend)
  484                        	; 2nd parameter in Y (signed divisor)
  485                        	; result in Y:A
  486                        	
  487    00:E563  AA         	__modschar:	tax				; Preserve the dividend.
  488    00:E564  08         			php				; Remember remainder sign.
  489                        	
  490    00:E565  84 00      			sty	<divisor		; Quotient negative if divisor
  491    00:E567  45 00      			eor	<divisor		; and dividend signs differ.
  492    00:E569  08         			php				; Remember the quotient sign.
  493                        	
  494    00:E56A  98         			tya				; Is the divisor -ve?
  495    00:E56B  10 05      			bpl	!+
  496    00:E56D  49 FF      			eor	#$FF			; Negate the divisor.
  497    00:E56F  1A         			inc	a
  498    00:E570  85 00      			sta	<divisor
  499                        	
  500    00:E572  8A         	!:		txa				; Is the dividend -ve?
  501    00:E573  10 03      			bpl	divmods8_a
  502                        	
  503    00:E575  49 FF      	divmods8_neg:	eor	#$FF			; Negate the dividend.
  504    00:E577  1A         			inc	a
  505                        	
  506    00:E578  20 47 E5   	divmods8_a:	jsr	divmodu8_a		; Do the unsigned division.
  507                        	
  508    00:E57B  28         			plp				; Should the quotient be -ve?
  509    00:E57C  10 0C      			bpl	!+
  510                        	
  511    00:E57E  AA         			tax				; Preserve remainder lo-byte.
  512                        	
  513    00:E57F  38         			sec				; Negate the quotient.
  514    00:E580  62         			cla
  515    00:E581  E5 94      			sbc.l	<dividend
  516    00:E583  85 94      			sta.l	<dividend
  517    00:E585  A9 FF      			lda	#$FF
  518    00:E587  85 95      			sta.h	<dividend
  519                        	
  520    00:E589  8A         			txa				; Restore remainder lo-byte.
  521                        	
  522    00:E58A  28         	!:		plp				; Was the dividend -ve?
  523    00:E58B  10 05      			bpl	!+
  524                        	
  525    00:E58D  49 FF      			eor	#$FF			; Then negate the remainder.
  526    00:E58F  1A         			inc	a
  527    00:E590  A0 FF      			ldy	#$FF
  528                        	
  529    00:E592  60         	!:		rts
  530                        	
  531                        	
  532                        	
  533                        	; ***************************************************************************
  534                        	; signed int
  535                        	; _moduschar (unsigned char x, unsigned char y)
  536                        	;
  537                        	; 1st parameter in A (signed dividend)
  538                        	; 2nd parameter in Y (unsigned divisor)
  539                        	; result in Y:A
  540                        	
  541    00:E593  84 00      	__moduschar:	sty.l	<divisor
  542                        	
  543    00:E595  A8         			tay				; Is the dividend -ve?
  544    00:E596  08         			php				; Remember remainder sign.
  545    00:E597  08         			php				; Remember quotient sign.
  546    00:E598  30 DB      			bmi	divmods8_neg
  547    00:E59A  80 DC      			bra	divmods8_a
  548                        	
  549                        	
  550                        	
  551                        	; ***************************************************************************
  552                        	; unsigned int
  553                        	; _modsuchar (signed char x, signed char y)
  554                        	;
  555                        	; 1st parameter in A (unsigned dividend)
  556                        	; 2nd parameter in Y (signed divisor)
  557                        	; result in Y:A
  558                        	
  559    00:E59C  AA         	__modsuchar:	tax				; Preserve the dividend.
  560    00:E59D  08         			php				; Remember remainder sign.
  561                        	
  562    00:E59E  98         			tya				; Check the divisor sign.
  563    00:E59F  08         			php				; Remember quotient sign.
  564    00:E5A0  10 03      			bpl	!+
  565    00:E5A2  49 FF      			eor	#$FF			; Negate the divisor.
  566    00:E5A4  1A         			inc	a
  567    00:E5A5  85 00      	!:		sta.l	<divisor
  568                        	
  569    00:E5A7  8A         			txa				; Restore the dividend.
  570    00:E5A8  80 CE      			bra	divmods8_a
  571                        	
  572                        	
  573                        	
  574                        	; ***************************************************************************
  575                        	; signed int
  576                        	; _divschar (signed char x, signed char y)
  577                        	;
  578                        	; 1st parameter in A (signed dividend)
  579                        	; 2nd parameter in Y (signed divisor)
  580                        	; result in Y:A
  581                        	
  582    00:E5AA  20 63 E5   	__divschar:	jsr	__modschar
  583                        	
  584    00:E5AD  A5 94      			lda.l	<dividend
  585    00:E5AF  A4 95      			ldy.h	<dividend
  586    00:E5B1  60         			rts
  587                        	
  588                        	
  589                        	
  590                        	; ***************************************************************************
  591                        	; signed int
  592                        	; _divuschar (unsigned char x, unsigned char y)
  593                        	;
  594                        	; 1st parameter in A (signed dividend)
  595                        	; 2nd parameter in Y (unsigned divisor)
  596                        	; result in Y:A
  597                        	
  598    00:E5B2  20 93 E5   	__divuschar:	jsr	__moduschar
  599                        	
  600    00:E5B5  A5 94      			lda.l	<dividend
  601    00:E5B7  A4 95      			ldy.h	<dividend
  602    00:E5B9  60         			rts
  603                        	
  604                        	
  605                        	
  606                        	; ***************************************************************************
  607                        	; unsigned int
  608                        	; _divsuchar (signed char x, signed char y)
  609                        	;
  610                        	; 1st parameter in A (unsigned dividend)
  611                        	; 2nd parameter in Y (signed divisor)
  612                        	; result in Y:A
  613                        	
  614    00:E5BA  20 9C E5   	__divsuchar:	jsr	__modsuchar
  615                        	
  616    00:E5BD  A5 94      			lda.l	<dividend
  617    00:E5BF  A4 95      			ldy.h	<dividend
  618    00:E5C1  60         			rts
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   43                        	
   44                        			; Define in hucc-config.inc to remove this.
   45                        	
   46               0001     		.ifndef	HUCC_NO_DEFAULT_RANDOM
                             #[3]   "..\..\..\include\hucc\random.asm"
   47                        			include	"random.asm"		; Random number generator.
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; random.asm
    5                        	;
    6                        	; Pseudo-random number generator (https://github.com/bbbradsmith/prng_6502)
    7                        	;
    8                        	; Copyright Brad Smith 2019.
    9                        	;
   10                        	; License:
   11                        	;
   12                        	; This code and may be used, reused, and modified for any purpose, commercial
   13                        	; or non-commercial.
   14                        	;
   15                        	; Attribution in released binaries or documentation is appreciated but not
   16                        	; required.
   17                        	;
   18                        	; ***************************************************************************
   19                        	; ***************************************************************************
   20                        	;
   21                        	; This is a linear feedback shift register (LFSR) in Galois form, which is
   22                        	; iterated 8 times to produce an 8-bit pseudo-random number.
   23                        	;
   24                        	; Two widths of LFSR are provided:
   25                        	;
   26                        	;  24-bit requires 3 bytes, and repeats after 16777215 calls.
   27                        	;  32-bit requires 4 bytes, and repeats after 4294967295 calls.
   28                        	;
   29                        	; Usage:
   30                        	;
   31                        	;  Initialize the zero-page "random" variable to any value other than 0.
   32                        	;  The size of "random" is 3 or 4 bytes, depending on the width of LFSR
   33                        	;  chosen.
   34                        	;
   35                        	;  Call one of the RNG functions and an 8-bit result will be returned in the
   36                        	;  A-register (with flags), and the Y-register will be clobbered.
   37                        	;
   38                        	;  Do not mix RNGs of different width in the same program, unless you can
   39                        	;  give them each separate "random" state storage.
   40                        	;
   41                        	; ***************************************************************************
   42                        	; ***************************************************************************
   43                        	
   44                        	
   45               0001     		.ifndef	_KICKC				; Variables defined in C?
   46               2098     			.zp
   47    F8:2098             	random:		.ds	4			; Seed is 3 or 4 bytes.
   48               E5C2     			.code
   49                        		.endif	_KICKC
   50                        	
   51                        	
   52                        	
   53                        	; ***************************************************************************
   54                        	; ***************************************************************************
   55                        	;
   56                        	; init_random - Initialize a 32-bit LFSR using an 8-bit seed value in Y.
   57                        	;
   58                        	; The LFSR is initialized to n'th entry of a standard CRC-32 lookup-table,
   59                        	; which gives it a decent distribution of bits.
   60                        	;
   61                        	; Since seed is an 8-bit value, there are 255 (256-1) possible starting
   62                        	; states for the LFSR, because 0 would generate a 0 state.
   63                        	;
   64                        	; CRC-32 code by Paul Guertin. See http://6502.org/source/integers/crc.htm
   65                        	;
   66                        	
   67    14:D1DC             	init_random	.proc
   68                        	
   69    14:D1DC  A9 01      			lda	#1			; Init CRC-32 table value.
   70    14:D1DE  85 98      			sta	<random + 0
   71    14:D1E0  98         			tya				; Get and check the seed value.
   72    14:D1E1  D0 01      			bne	.reverse_seed
   73    14:D1E3  3A         			dec	a			; Which must be non-zero!
   74    14:D1E4  4A         	.reverse_seed:	lsr	a			; Reverse the bits so that small changes
   75    14:D1E5  26 98      			rol	<random + 0		; in the seed make larger differences in
   76    14:D1E7  90 FB      			bcc	.reverse_seed		; the initial state.
   77                        	
   78    14:D1E9  64 99      			stz	<random + 1		; A contains the high byte of the CRC-32.
   79    14:D1EB  64 9A      			stz	<random + 2		; The other three bytes are in memory.
   80    14:D1ED  62         			cla
   81                        	
   82    14:D1EE  A0 08      			ldy	#8			; Y counts bits in a byte.
   83    14:D1F0  4A         	.bit_loop:	lsr	a			; The CRC-32 algorithm is similar to CRC-16
   84    14:D1F1  66 9A      			ror	<random + 2		; except that it is reversed (originally for
   85    14:D1F3  66 99      			ror	<random + 1		; hardware reasons). This is why we shift
   86    14:D1F5  66 98      			ror	<random + 0		; right instead of left here.
   87    14:D1F7  90 16      			bcc	.no_add			; Do nothing if no overflow,
   88    14:D1F9  49 ED      			eor	#$ED			; else add CRC-32 polynomial $EDB88320.
   89                        	
   90    14:D1FB  48         			pha				; Save high byte while we do others.
   91    14:D1FC  A5 9A      			lda	<random + 2
   92    14:D1FE  49 B8      			eor	#$B8			; Most reference books give the CRC-32 poly
   93    14:D200  85 9A      			sta	<random + 2		; as $04C11DB7. This is actually the same if
   94    14:D202  A5 99      			lda	<random + 1		; you write it in binary and read it right-
   95    14:D204  49 83      			eor	#$83			; to-left instead of left-to-right. Doing it
   96    14:D206  85 99      			sta	<random + 1		; this way means we won't have to explicitly
   97    14:D208  A5 98      			lda	<random + 0		; reverse things afterwards.
   98    14:D20A  49 20      			eor	#$20
   99    14:D20C  85 98      			sta	<random + 0
  100    14:D20E  68         			pla				; Restore high byte.
  101                        	
  102    14:D20F  88         	.no_add:	dey				; Do next bit.
  103    14:D210  D0 DE      			bne	.bit_loop
  104                        	
  105    14:D212  85 9B      			sta	<random + 3		; Save CRC-32 high-byte.
  106                        	
  107                        			leave				; All done!
         14:D214  4C EF FF   			jmp	leave_proc
  108                        	
  109                        			.endp
  110                        	
  111                        	
  112                        	
  113                        	; ***************************************************************************
  114                        	; ***************************************************************************
  115                        	;
  116                        	; get_random - 8-bit LFSR pseudo-random number with a 24-bit cycle.
  117                        	;
  118                        	; The pseudo-random sequence repeats after (2^24)-1 calls.
  119                        	;
  120                        	; Written by Wim Couwenberg, see ...
  121                        	;
  122                        	; "https://wimcouwenberg.wordpress.com/2020/11/15/ ...
  123                        	;  a-fast-24-bit-prng-algorithm-for-the-6502-processor/"
  124                        	;
  125                        	; Takes 68 cycles on the HuC6280, incl JSR & RTS.
  126                        	;
  127                        	; N.B. HuCC library code relies on this preserving X and Y!
  128                        	;
  129                        	
  130    00:E5C2  C2         	_rand8:		cly				; Entry point for HuCC.
  131                        	
  132    00:E5C3  A5 98      	get_random:	lda	<random + 0		; Operation 7 (with carry clear).
  133    00:E5C5  0A         			asl	a
  134    00:E5C6  45 99      			eor	<random + 1
  135    00:E5C8  85 99      			sta	<random + 1
  136    00:E5CA  2A         			rol	a             		; Operation 9.
  137    00:E5CB  45 9A      			eor	<random + 2
  138    00:E5CD  85 9A      			sta	<random + 2
  139    00:E5CF  45 98      			eor	<random + 0		; Operation 5.
  140    00:E5D1  85 98      			sta	<random + 0
  141    00:E5D3  A5 99      			lda	<random + 1		; Operation 15.
  142    00:E5D5  6A         			ror	a
  143    00:E5D6  45 9A      			eor	<random + 2
  144    00:E5D8  85 9A      			sta	<random + 2
  145    00:E5DA  45 99      			eor	<random + 1		; Operation 6.
  146    00:E5DC  85 99      			sta	<random + 1
  147    00:E5DE  60         			rts
  148                        	
  149                        	
  150                        	
  151               0000     		.if	0
  316                        		.endif
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   48                        		.endif
   49                        	
   50                        			; Optional libraries that get used when their header files
   51                        			; are included in a HuCC project.
   52                        			;
   53                        			; When the HuCC compiler is invoked with the "--legacy"
   54                        			; option to compile old projects, then the "huc.h" file
   55                        			; is automatically included, which then includes a list
   56                        			; of specific headers corresponding to HuC's library.
   57                        	
   58               0001     		.ifdef	HUCC_USES_GFX
                             #[3]   "..\..\..\include\hucc\hucc-gfx.asm"
   59                        			include	"hucc-gfx.asm"		; Set in hucc_gfx.h
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; huc-gfx.asm
    5                        	;
    6                        	; Based on the original HuC and MagicKit functions by David Michel and the
    7                        	; other original HuC developers.
    8                        	;
    9                        	; Modifications copyright John Brandwood 2024-2025.
   10                        	;
   11                        	; Distributed under the Boost Software License, Version 1.0.
   12                        	; (See accompanying file LICENSE_1_0.txt or copy at
   13                        	;  http://www.boost.org/LICENSE_1_0.txt)
   14                        	;
   15                        	; ***************************************************************************
   16                        	; ***************************************************************************
   17                        	
   18                        	;
   19                        	; Include dependancies ...
   20                        	;
   21                        	
   22                        			include "common.asm"		; Common helpers.
   23                        			include "vce.asm"		; Useful VCE routines.
   24                        			include "vdc.asm"		; Useful VCE routines.
   25                        	
   26                        	
   27                        	
   28                        	; ***************************************************************************
   29                        	; ***************************************************************************
   30                        	;
   31                        	; void __fastcall disp_on( void );
   32                        	; void __fastcall disp_off( void );
   33                        	
   34    00:E5DF             			.alias	_disp_on		= set_dspon
   35    00:E5DF             			.alias	_disp_off		= set_dspoff
   36                        	
   37                        	
   38                        	
   39                        	; ***************************************************************************
   40                        	; ***************************************************************************
   41                        	;
   42                        	; void __fastcall set_screen_size( unsigned char value<_al> );
   43                        	; void __fastcall sgx_set_screen_size( unsigned char value<_al> );
   44                        	;
   45                        	
   46    00:E5DF             			.alias	_set_screen_size.1	= set_bat_vdc
   47    00:E5DF             			.alias	_sgx_set_screen_size.1	= set_bat_sgx
   48                        	
   49                        	
   50                        	
   51                        	; ***************************************************************************
   52                        	; ***************************************************************************
   53                        	;
   54                        	; void __fastcall init_256x224( void );
   55                        	
   56    14:CFDA             	_init_256x224	.proc
   57                        	
   58               0800     	.BAT_SIZE	=	64 * 32
   59               0080     	.CHR_0x20	=	.BAT_SIZE / 16		; 1st tile # after the BAT.
   60               7F00     	.SAT_ADDR	=	$7F00			; SAT takes 16 tiles of VRAM.
   61                        	
   62    14:CFDA  08         			php				; Disable interrupts.
   63    14:CFDB  78         			sei
   64                        	
   65    14:CFDC  20 C9 FD   			call	clear_vce		; Clear all palettes.
   66                        	
   67    14:CFDF  A9 80      			lda.l	#.CHR_0x20		; CHR # of ASCII ' '.
   68    14:CFE1  85 F8      			sta.l	<_ax
   69    14:CFE3  A9 00      			lda.h	#.CHR_0x20
   70    14:CFE5  85 F9      			sta.h	<_ax
   71                        	
   72    14:CFE7  A9 08      			lda	#>.BAT_SIZE		; Size of BAT in words.
   73    14:CFE9  85 FA      			sta	<_bl
   74                        	
   75    14:CFEB  20 DD FD   			call	clear_vram_vdc		; Clear VRAM.
   76               0001     		.if	SUPPORT_SGX
   77    14:CFEE  20 BF FD   			call	clear_vram_sgx
   78                        		.endif
   79                        	
   80    14:CFF1  A9 15      			lda	#<.mode_256x224		; Disable BKG & SPR layers but
   81    14:CFF3  85 EC      			sta.l	<_bp			; enable RCR & VBLANK IRQ.
   82    14:CFF5  A9 D0      			lda	#>.mode_256x224
   83    14:CFF7  85 ED      			sta.h	<_bp
   84                        	
   85               0001     		.if	SUPPORT_SGX
   86    14:CFF9  20 B5 FD   			call	sgx_detect		; Are we really on an SGX?
   87    14:CFFC  90 05      			bcc	!+
   88    14:CFFE  A0 14      			ldy	#^.mode_256x224		; Set SGX 1st, with no VBL.
   89    14:D000  20 AB FD   			call	set_mode_sgx
   90                        		.endif
   91    14:D003  A0 14      	!:		ldy	#^.mode_256x224		; Set VDC 2nd, VBL allowed.
   92    14:D005  20 A1 FD   			call	set_mode_vdc
   93                        	
   94               0001     		.if	SUPPORT_SGX
   95    14:D008  2C 10 02   			bit	SGX_SR			; Purge any overdue RCR.
   96                        		.endif
   97    14:D00B  2C 00 02   			bit	VDC_SR			; Purge any overdue VBL.
   98    14:D00E  28         			plp				; Restore interrupts.
   99                        	
  100    14:D00F  20 09 E3   			call	wait_vsync		; Wait for the next VBLANK.
  101                        	
  102                        			leave				; All done, phew!
         14:D012  4C EF FF   			jmp	leave_proc
  103                        	
  104                        			; A standard 256x224 screen with overscan.
  105                        	
  106    14:D015  80         	.mode_256x224:	db	$80			; VCE Control Register.
  107    14:D016  04         			db	VCE_CR_5MHz + XRES_SOFT	;   Video Clock + Artifact Reduction
  108                        	
  109    14:D017  09         			db	VDC_MWR			; Memory-access Width Register
  110    14:D018  10 00      			dw	VDC_MWR_64x32 + VDC_MWR_1CYCLE
  111    14:D01A  0A         			db	VDC_HSR			; Horizontal Sync Register
  112    14:D01B  02 02      			dw	VDC_HSR_256
  113    14:D01D  0B         			db	VDC_HDR			; Horizontal Display Register
  114    14:D01E  1F 04      			dw	VDC_HDR_256
  115    14:D020  0C         			db	VDC_VPR			; Vertical Sync Register
  116    14:D021  02 17      			dw	VDC_VPR_224
  117    14:D023  0D         			db	VDC_VDW			; Vertical Display Register
  118    14:D024  DF 00      			dw	VDC_VDW_224
  119    14:D026  0E         			db	VDC_VCR			; Vertical Display END position Register
  120    14:D027  FF 00      			dw	VDC_VCR_224
  121    14:D029  0F         			db	VDC_DCR			; DMA Control Register
  122    14:D02A  10 00      			dw	$0010			;   Enable automatic VRAM->SATB
  123    14:D02C  13         			db	VDC_DVSSR		; VRAM->SATB address $7F00
  124    14:D02D  00 7F      			dw	.SAT_ADDR
  125    14:D02F  07         			db	VDC_BXR			; Background X-Scroll Register
  126    14:D030  00 00      			dw	$0000
  127    14:D032  08         			db	VDC_BYR			; Background Y-Scroll Register
  128    14:D033  00 00      			dw	$0000
  129    14:D035  06         			db	VDC_RCR			; Raster Counter Register
  130    14:D036  00 00      			dw	$0000			;   Never occurs!
  131    14:D038  05         			db	VDC_CR			; Control Register
  132    14:D039  0C 00      			dw	$000C			;   Enable VSYNC & RCR IRQ
  133    14:D03B  00         			db	0
  134                        	
  135                        			.endp
  136                        	
  137                        	
  138                        	
  139                        	; ***************************************************************************
  140                        	; ***************************************************************************
  141                        	;
  142                        	; void __fastcall init_240x208( void );
  143                        	
  144                        	_init_240x208	.proc
  223                        			.endp
  224                        	
  225                        	
  226                        	
  227                        	; ***************************************************************************
  228                        	; ***************************************************************************
  229                        	;
  230                        	; void __fastcall _macro set_xres( unsigned int x_pixels<_ax> );
  231                        	; void __fastcall _macro sgx_set_xres( unsigned int x_pixels<_ax> );
  232                        	;
  233                        	; void __fastcall set_xres( unsigned int x_pixels<_ax>, unsigned char blur_flag<_bl> );
  234                        	; void __fastcall sgx_set_xres( unsigned int x_pixels<_ax>, unsigned char blur_flag<_bl> );
  235                        	;
  236                        	; blur_flag = XRES_SOFT (default if not specified), XRES_SHARP or XRES_KEEP
  237                        	
  238                        	set_xres_group	.procgroup			; These routines share code!
  337                        			.endprocgroup	; set_xres_group
  338                        	
  339                        	
  340                        	
  341                        	; ***************************************************************************
  342                        	; ***************************************************************************
  343                        	;
  344                        	; HuC VRAM Functions
  345                        	;
  346                        	; ***************************************************************************
  347                        	; ***************************************************************************
  348                        	
  349                        	
  350    14:CF0C             	load_vram_group	.procgroup			; These routines share code!
  351                        	
  352                        	; ***************************************************************************
  353                        	; ***************************************************************************
  354                        	;
  355                        	; void __fastcall load_vram( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_words<_ax> );
  356                        	; void __fastcall sgx_load_vram( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_words<_ax> );
  357                        	;
  358                        	; void __fastcall far_load_vram( unsigned int vram<_di>, unsigned int num_words<_ax> );
  359                        	; void __fastcall sgx_far_load_vram( unsigned int vram<_di>, unsigned int num_words<_ax> );
  360                        	;
  361                        	; load_vram_sgx -  copy a block of memory to VRAM
  362                        	; load_vram_vdc -  copy a block of memory to VRAM
  363                        	;
  364                        	; _bp		= BAT memory location
  365                        	; _bp_bank	= BAT bank
  366                        	; _di		= VRAM base address
  367                        	; _ax		= nb of words to copy
  368                        	; ----
  369                        	; N.B. BAT data *must* be word-aligned!
  370                        	
  371               0000     		.ifndef	VRAM_XFER_SIZE
  373                        		.endif
  374                        	
  375    14:CF0C             	load_vram_x	.proc
  376                        	
  377    14:CF0C  43 08      			tma3
  378    14:CF0E  48         			pha
  379    14:CF0F  43 10      			tma4
  380    14:CF11  48         			pha
  381                        	
  382    14:CF12  A4 02      			ldy	<_bp_bank
  383    14:CF14  20 3B E3   			jsr	map_bp_to_mpr34		; Map data to MPR3 & MPR4.
  384                        	
  385    14:CF17  20 7F E3   			jsr	set_di_to_mawr
  386                        	
  387                        	;		tii	.vdc_tai, ram_tia, 8
  388                        	
  389               0001     		.if	SUPPORT_SGX
  390    14:CF1A  8A         			txa				; Select which VDC to write
  391    14:CF1B  1A         			inc	a			; to.
  392    14:CF1C  1A         			inc	a
  393    14:CF1D  8D F3 22   			sta.l	ram_tia_dst
  394                        		.endif
  395                        	
  396    14:CF20  A9 10      			lda	#VRAM_XFER_SIZE		; Split into 16-byte chunks
  397    14:CF22  8D F5 22   			sta.l	ram_tia_len		; for stable IRQ response.
  398                        	
  399    14:CF25  A6 EC      			ldx.l	<_bp
  400    14:CF27  8E F1 22   			stx.l	ram_tia_src
  401    14:CF2A  A4 ED      			ldy.h	<_bp
  402    14:CF2C  8C F2 22   			sty.h	ram_tia_src
  403                        	
  404    14:CF2F  A5 F8      			lda.l	<_ax			; Length in words.
  405    14:CF31  48         			pha				; Preserve length.l
  406                        	
  407    14:CF32  46 F9      			lsr.h	<_ax
  408    14:CF34  6A         			ror	a
  409    14:CF35  46 F9      			lsr.h	<_ax
  410    14:CF37  6A         			ror	a
  411    14:CF38  46 F9      			lsr.h	<_ax
  412    14:CF3A  6A         			ror	a
  413               0000     		.if	VRAM_XFER_SIZE == 32
  416                        		.endif
  417                        	
  418    14:CF3B  22         			sax				; x=chunks-lo
  419    14:CF3C  F0 1F      			beq	.next_block		; a=source-lo, y=source-hi
  420                        	
  421    14:CF3E  20 F0 22   	.chunk_loop:	jsr	ram_tia			; transfer 16-bytes
  422                        	
  423    14:CF41  18         			clc				; increment source
  424    14:CF42  69 10      			adc	#VRAM_XFER_SIZE
  425    14:CF44  8D F1 22   			sta.l	ram_tia_src
  426    14:CF47  90 11      			bcc	.same_page
  427    14:CF49  C8         			iny
  428    14:CF4A  10 0B      			bpl	.same_bank		; remap_data
  429                        	
  430    14:CF4C  42         			say
  431    14:CF4D  43 10      			tma4
  432    14:CF4F  53 08      			tam3
  433    14:CF51  1A         			inc	a
  434    14:CF52  53 10      			tam4
  435    14:CF54  A9 60      			lda	#$60
  436    14:CF56  42         			say
  437                        	
  438    14:CF57  8C F2 22   	.same_bank:	sty.h	ram_tia_src
  439                        	
  440    14:CF5A  CA         	.same_page:	dex
  441    14:CF5B  D0 E1      			bne	.chunk_loop
  442                        	
  443    14:CF5D  C6 F9      	.next_block:	dec.h	<_ax
  444    14:CF5F  10 DD      			bpl	.chunk_loop
  445                        	
  446    14:CF61  68         			pla				; Restore length.l
  447    14:CF62  29 07      			and	#VRAM_XFER_SIZE / 2 - 1
  448    14:CF64  F0 07      			beq	.done
  449                        	
  450    14:CF66  0A         			asl	a			; Convert words to bytes.
  451    14:CF67  8D F5 22   			sta.l	ram_tia_len
  452                        	
  453    14:CF6A  20 F0 22   			jsr	ram_tia			; transfer remainder
  454                        	
  455    14:CF6D  68         	.done:		pla
  456    14:CF6E  53 10      			tam4
  457    14:CF70  68         			pla
  458    14:CF71  53 08      			tam3
  459                        	
  460                        			leave
         14:CF73  4C EF FF   			jmp	leave_proc
  461                        	
  462                        			.endp
  463                        	
  464                        			.endprocgroup	; load_vram_group
  465                        	
  466                        	
  467                        	
  468                        	; ***************************************************************************
  469                        	; ***************************************************************************
  470                        	;
  471                        	; void __fastcall load_bat( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  472                        	; void __fastcall sgx_load_bat( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  473                        	;
  474                        	; void __fastcall far_load_bat( unsigned int vram<_di>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  475                        	; void __fastcall sgx_far_load_bat( unsigned int vram<_di>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  476                        	;
  477                        	; load_bat_sgx - transfer a BAT to VRAM
  478                        	; load_bat_vdc - transfer a BAT to VRAM
  479                        	;
  480                        	; transfer a BAT to VRAM
  481                        	; ----
  482                        	; _bp		= BAT memory location
  483                        	; _bp_bank	= BAT bank
  484                        	; _di		= VRAM base address
  485                        	; _al		= nb of column to copy
  486                        	; _ah		= nb of row
  487                        	; ----
  488                        	; N.B. BAT data *must* be word-aligned!
  489                        	
  490               20EC     	_gfx_load_bat_PARM_2	=	_bp
  491               20F0     	_gfx_load_bat_PARM_3	=	_di
  492               20F8     	_gfx_load_bat_PARM_4	=	_al
  493               20F9     	_gfx_load_bat_PARM_5	=	_ah
  494                        	
  495    14:D19D             	load_bat_group	.procgroup			; These routines share code!
  496                        	
  497               0001     		.if	SUPPORT_SGX
  498                        			.proc	_sgx_load_bat.4
  505                        			.endp
  506                        		.endif
  507                        	
  508    14:D19D             			.proc	_load_bat.4
  509    14:D19D             			.alias	_far_load_bat.3		= _load_bat.4
  510                        	
  511    14:D19D  82         			clx				; Offset to PCE VDC.
  512                        	
  513    14:D19E  43 08      			tma3
  514    14:D1A0  48         			pha
  515                        	
  516    14:D1A1  A4 02      			ldy	<_bp_bank
  517    14:D1A3  20 2D E3   			jsr	map_bp_to_mpr3		; Map data to MPR3.
  518                        	
  519    14:D1A6  A4 EC      			ldy.l	<_bp
  520    14:D1A8  64 EC      			stz.l	<_bp
  521                        	
  522    14:D1AA  20 7F E3   	.line_loop:	jsr	set_di_to_mawr
  523                        	
  524    14:D1AD  A5 F8      			lda	<_al
  525    14:D1AF  85 00      			sta	<__temp
  526    14:D1B1  B1 EC      	.tile_loop:	lda	[_bp], y
  527    14:D1B3  9D 02 02   			sta	VDC_DL, x
  528    14:D1B6  C8         			iny
  529    14:D1B7  B1 EC      			lda	[_bp], y
  530    14:D1B9  9D 03 02   			sta	VDC_DH, x
  531    14:D1BC  C8         			iny
  532    14:D1BD  D0 03      			bne	!+
  533    14:D1BF  20 4C E3   			jsr	inc.h_bp_mpr3
  534    14:D1C2  C6 00      	!:		dec	<__temp
  535    14:D1C4  D0 EB      			bne	.tile_loop
  536                        	
  537    14:D1C6  BD 76 26   			lda	vdc_bat_width, x
  538    14:D1C9  18         			clc
  539    14:D1CA  65 F0      			adc.l	<_di
  540    14:D1CC  85 F0      			sta.l	<_di
  541    14:D1CE  90 02      			bcc	!+
  542    14:D1D0  E6 F1      			inc.h	<_di
  543                        	
  544    14:D1D2  C6 F9      	!:		dec	<_ah
  545    14:D1D4  D0 D4      			bne	.line_loop
  546                        	
  547    14:D1D6  68         			pla
  548    14:D1D7  53 08      			tam3
  549                        	
  550                        			leave
         14:D1D9  4C EF FF   			jmp	leave_proc
  551                        	
  552                        			.endp
  553                        	
  554                        			.endprocgroup	; load_bat_group
  555                        	
  556                        	
  557                        	
  558                        	; ***************************************************************************
  559                        	; ***************************************************************************
  560                        	;
  561                        	; void __fastcall load_palette( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp>, unsigned char num_palettes<_ah> );
  562                        	;
  563                        	; void __fastcall far_load_palette( unsigned char palette<_al>, unsigned char num_palettes<_ah> );
  564                        	
  565    14:D279             			.proc	_load_palette.3
  566    14:D279             			.alias	_far_load_palette.2	= _load_palette.3
  567                        	
  568    14:D279  AC 4D 26   			ldy	color_queue_w		; Get the queue's write index.
  569                        	
  570    14:D27C  A5 EC      			lda.l	<_bp			; Add this set of palettes to
  571    14:D27E  99 5E 26   			sta	color_addr_l, y		; the queue.
  572    14:D281  A5 ED      			lda.h	<_bp
  573    14:D283  99 66 26   			sta	color_addr_h, y
  574    14:D286  A5 02      			lda	<_bp_bank
  575    14:D288  99 6E 26   			sta	color_bank, y
  576    14:D28B  A5 F8      			lda	<_al
  577    14:D28D  99 4E 26   			sta	color_index, y
  578    14:D290  A5 F9      			lda	<_ah
  579    14:D292  99 56 26   			sta	color_count, y
  580                        	
  581    14:D295  C8         			iny				; Increment the queue index.
  582    14:D296  98         			tya
  583    14:D297  29 07      			and	#7
  584                        	
  585    14:D299  CD 4C 26   	.wait:		cmp	color_queue_r		; If the queue is full, wait
  586    14:D29C  F0 FB      			beq	.wait			; for the next VBLANK.
  587                        	
  588    14:D29E  8D 4D 26   			sta	color_queue_w		; Signal item is in the queue.
  589                        	
  590                        			leave				; All done, phew!
         14:D2A1  4C EF FF   			jmp	leave_proc
  591                        	
  592                        			.endp
  593                        	
  594                        	
  595                        	
  596               0000     		.if	0
  620                        		.endif
  621                        	
  622                        	
  623                        	
  624                        	; ***************************************************************************
  625                        	; ***************************************************************************
  626                        	;
  627                        	; void __fastcall load_background( unsigned char __far *tiles<_bp_bank:_bp>, unsigned char __far *palettes<__fbank:__fptr>, unsigned char __far *bat<_cl:_bx>, unsigned char w<_dl>, unsigned char w<_dh> );
  628                        	
  629                        			.proc	_load_background.5
  667                        			.endp
  668                        	
  669                        	
  670                        	
  671                        	; ***************************************************************************
  672                        	; ***************************************************************************
  673                        	;
  674                        	; void __fastcall vram2vram( unsigned int vram_dst<_ax>, unsigned int vram_src<_bx>, unsigned int word_len<_cx> );
  675                        	; void __fastcall sgx_vram2vram( unsigned int vram_dst<_ax>, unsigned int vram_src<_bx>, unsigned int word_len<_cx> );
  676                        	;
  677                        	
  678               0001     		.if	SUPPORT_SGX
  679                        			.proc	_sgx_vram2vram.3
  685                        			.endp
  686                        		.endif
  687                        	
  688    02:DFC2             			.proc	_vram2vram.3
  689                        	
  690    02:DFC2  82         			clx				; Offset to PCE VDC.
  691                        	
  692    02:DFC3  08         			php
  693    02:DFC4  78         			sei
  694    02:DFC5  A9 11      			lda	#VDC_DESR
  695    02:DFC7  9D 00 02   			sta	VDC_AR, x
  696    02:DFCA  A5 F8      			lda.l	<_ax
  697    02:DFCC  9D 02 02   			sta	VDC_DL, x
  698    02:DFCF  A5 F9      			lda.h	<_ax
  699    02:DFD1  9D 03 02   			sta	VDC_DH, x
  700                        	
  701    02:DFD4  A9 10      			lda	#VDC_SOUR
  702    02:DFD6  9D 00 02   			sta	VDC_AR, x
  703    02:DFD9  A5 FA      			lda.l	<_bx
  704    02:DFDB  9D 02 02   			sta	VDC_DL, x
  705    02:DFDE  A5 FB      			lda.h	<_bx
  706    02:DFE0  9D 03 02   			sta	VDC_DH, x
  707                        	
  708    02:DFE3  A9 12      			lda	#VDC_LENR
  709    02:DFE5  9D 00 02   			sta	VDC_AR, x
  710    02:DFE8  18         			clc
  711    02:DFE9  A5 FC      			lda.l	<_cx
  712    02:DFEB  69 FF      			adc	#$FF
  713    02:DFED  9D 02 02   			sta	VDC_DL, x
  714    02:DFF0  A5 FD      			lda.h	<_cx
  715    02:DFF2  69 FF      			adc	#$FF
  716    02:DFF4  9D 03 02   			sta	VDC_DH, x
  717                        	
  718    02:DFF7  B5 F7      			lda	<vdc_reg, x
  719    02:DFF9  8D 00 02   			sta	VDC_AR
  720    02:DFFC  28         			plp
  721                        	
  722                        			leave
         02:DFFD  4C EF FF   			jmp	leave_proc
  723                        	
  724                        			.endp
  725                        	
  726                        	
  727                        	
  728                        	; ***************************************************************************
  729                        	; ***************************************************************************
  730                        	;
  731                        	; HuC Font Functions
  732                        	;
  733                        	; ***************************************************************************
  734                        	; ***************************************************************************
  735                        	
  736                        	
  737                        	
  738               2696     			.bss
  739                        	
  740                        	; **************
  741                        	; 16-bytes of VDC BAT information.
  742                        	;
  743                        	; N.B. MUST be 16-bytes before the SGX versions to use PCE_VDC_OFFSET.
  744                        	
  745    F8:2696             	_vdc_font_base:	ds	2	; Tile number of ASCII '\0'.
  746                        	
  747                        	; From hucc-printf.asm just to avoid wasting .bss space with padding.
  748    F8:2698             	_vdc_tty_x_lhs:	ds	1	; TTY minimum X position.
  749    F8:2699             	_vdc_tty_y_top:	ds	1	; TTY minimum Y position.
  750    F8:269A             	_vdc_tty_x:	ds	1	; TTY current X position.
  751    F8:269B             	_vdc_tty_y:	ds	1	; TTY current Y position.
  752                        	
  753               0001     		.if	SUPPORT_SGX
  754                        	
  755                        	; **************
  756                        	; 16-bytes of SGX BAT information.
  757                        	;
  758                        	; N.B. MUST be 16-bytes after the VDC versions to use SGX_VDC_OFFSET.
  759                        	
  760    F8:269C             			ds	10	; Padding to ensure the 16-byte delta.
  761                        	
  762    F8:26A6             	_sgx_font_base:	ds	2	; Tile number of ASCII '\0'.
  763                        	
  764                        	; From hucc-printf.asm just to avoid wasting .bss space with padding.
  765    F8:26A8             	_sgx_tty_x_lhs:	ds	1	; TTY minimum X position.
  766    F8:26A9             	_sgx_tty_y_top:	ds	1	; TTY minimum Y position.
  767    F8:26AA             	_sgx_tty_x:	ds	1	; TTY current X position.
  768    F8:26AB             	_sgx_tty_y:	ds	1	; TTY current Y position.
  769                        	
  770                        		.endif
  771                        	
  772                        	;_font_base	.alias	vdc_font_base
  773                        	
  774               E5DF     			.code
  775                        	
  776                        	
  777                        	
  778                        	; ***************************************************************************
  779                        	; ***************************************************************************
  780                        	;
  781                        	; void __fastcall set_font_addr( unsigned int vram<acc> );
  782                        	; void __fastcall sgx_set_font_addr( unsigned int vram<acc> );
  783                        	
  784               0001     		.if	SUPPORT_SGX
  785    00:E5DF             	_sgx_set_font_addr.1:
  786    00:E5DF  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  787    00:E5E1  F0         			db	$F0			; Turn "clx" into a "beq".
  788                        		.endif
  789                        	
  790    00:E5E2             	_set_font_addr.1:
  791    00:E5E2  82         			clx				; Offset to PCE VDC.
  792                        	
  793    00:E5E3  84 00      	set_font_addr:	sty	<__temp
  794    00:E5E5  46 00      			lsr	<__temp
  795    00:E5E7  6A         			ror	a
  796    00:E5E8  46 00      			lsr	<__temp
  797    00:E5EA  6A         			ror	a
  798    00:E5EB  46 00      			lsr	<__temp
  799    00:E5ED  6A         			ror	a
  800    00:E5EE  46 00      			lsr	<__temp
  801    00:E5F0  6A         			ror	a
  802    00:E5F1  38         			sec
  803    00:E5F2  E9 20      			sbc	#$20
  804    00:E5F4  9D 96 26   			sta.l	_vdc_font_base,x
  805    00:E5F7  B0 02      			bcs	!+
  806    00:E5F9  C6 00      			dec	<__temp
  807                        	
  808    00:E5FB  BD 97 26   	!:		lda.h	_vdc_font_base, x
  809    00:E5FE  29 F0      			and	#$F0
  810    00:E600  05 00      			ora	<__temp
  811    00:E602  9D 97 26   			sta.h	_vdc_font_base, x
  812    00:E605  60         			rts
  813                        	
  814                        	
  815                        	
  816                        	; ***************************************************************************
  817                        	; ***************************************************************************
  818                        	;
  819                        	; void __fastcall set_font_pal( unsigned char palette<acc> );
  820                        	; void __fastcall sgx_set_font_pal( unsigned char palette<acc> );
  821                        	
  822               0001     		.if	SUPPORT_SGX
  823    00:E606             	_sgx_set_font_pal.1:
  824    00:E606  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  825    00:E608  F0         			db	$F0			; Turn "clx" into a "beq".
  826                        		.endif
  827                        	
  828    00:E609             	_set_font_pal:					; For compatibility with HuC.
  829    00:E609             	_set_font_pal.1:
  830    00:E609  82         			clx				; Offset to PCE VDC.
  831    00:E60A  0A         			asl	a
  832    00:E60B  0A         			asl	a
  833    00:E60C  0A         			asl	a
  834    00:E60D  0A         			asl	a
  835    00:E60E  85 00      			sta	<__temp
  836                        	
  837    00:E610  BD 97 26   			lda.h	_vdc_font_base, x
  838    00:E613  29 0F      			and	#$0F
  839    00:E615  05 00      			ora	<__temp
  840    00:E617  9D 97 26   			sta.h	_vdc_font_base, x
  841    00:E61A  60         			rts
  842                        	
  843                        	
  844                        	
  845                        	; ***************************************************************************
  846                        	; ***************************************************************************
  847                        	;
  848                        	; void __fastcall load_font( char far *font<_bp_bank:_bp>, unsigned char count<_al> );
  849                        	;
  850                        	; void __fastcall load_font( char far *font<_bp_bank:_bp>, unsigned char count<_al>, unsigned int vram<acc> );
  851                        	; void __fastcall sgx_load_font( char far *font<_bp_bank:_bp>, unsigned char count<_al>, unsigned int vram<acc> );
  852                        	;
  853                        	; void __fastcall far_load_font( unsigned char count<_al>, unsigned int vram<acc> );
  854                        	; void __fastcall sgx_far_load_font( unsigned char count<_al>, unsigned int vram<acc> );
  855                        	
  856    00:E61B  AC 7A 26   	_load_font.2:	ldy	vdc_bat_limit		; Load the font directly
  857    00:E61E  C8         			iny				; after the BAT (stupid!).
  858    00:E61F  62         			cla
  859    00:E620  80 03      			bra	_load_font.3
  860                        	
  861               0001     		.if	SUPPORT_SGX
  862    00:E622             	_sgx_load_font.3:
  863    00:E622  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  864    00:E624  F0         			db	$F0			; Turn "clx" into a "beq".
  865                        		.endif
  866                        	
  867    00:E625  82         	_load_font.3:	clx				; Offset to PCE VDC.
  868                        	
  869    00:E626  85 F0      			sta.l	<_di			; Load the font directly
  870    00:E628  84 F1      			sty.h	<_di			; after the BAT (stupid!).
  871                        	
  872    00:E62A  20 E3 E5   			jsr	set_font_addr		; Set xxx_font_base from addr.
  873                        	
  874    00:E62D  A5 F8      			lda	<__al			; Convert #tiles into #words.
  875    00:E62F  64 F9      			stz	<__ah
  876    00:E631  0A         			asl	a
  877    00:E632  26 F9      			rol	<__ah
  878    00:E634  0A         			asl	a
  879    00:E635  26 F9      			rol	<__ah
  880    00:E637  0A         			asl	a
  881    00:E638  26 F9      			rol	<__ah
  882    00:E63A  0A         			asl	a
  883    00:E63B  26 F9      			rol	<__ah
  884    00:E63D  85 F8      			sta	<__al
  885    00:E63F  4C 4F FF   			jmp	load_vram_x
  886                        	
  887    00:E642             			.alias	_far_load_font.2	= _load_font.3
  888    00:E642             			.alias	_sgx_far_load_font.2	= _sgx_load_font.3
  889                        	
  890                        	
  891                        	
  892                        	; ***************************************************************************
  893                        	; ***************************************************************************
  894                        	;
  895                        	; void __fastcall cls();
  896                        	; void __fastcall sgx_cls();
  897                        	;
  898                        	; void __fastcall cls( int tile<acc> );
  899                        	; void __fastcall sgx_cls( int tile<acc> );
  900                        	
  901               0001     		.if	SUPPORT_SGX
  902    00:E642  A2 10      	_sgx_cls:	ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  903    00:E644  F0         			db	$F0			; Turn "clx" into a "beq".
  904                        		.endif
  905                        	
  906    00:E645  82         	_cls:		clx				; Offset to PCE VDC.
  907                        	
  908    00:E646  BD 96 26   	clear_tty_x:	lda.l	_vdc_font_base, x
  909    00:E649  BC 97 26   			ldy.h	_vdc_font_base, x
  910    00:E64C  18         			clc
  911    00:E64D  69 20      			adc	#' '
  912    00:E64F  90 07      			bcc	!+
  913    00:E651  C8         			iny
  914    00:E652  80 04      			bra	!+
  915                        	
  916               0001     		.if	SUPPORT_SGX
  917    00:E654  A2 10      	_sgx_cls.1:	ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  918    00:E656  F0         			db	$F0			; Turn "clx" into a "beq".
  919                        		.endif
  920                        	
  921    00:E657  82         	_cls.1:		clx
  922                        	
  923    00:E658  85 F8      	!:		sta.l	<_ax			; VRAM word to write.
  924    00:E65A  84 F9      			sty.h	<_ax
  925    00:E65C  BD 7A 26   			lda	vdc_bat_limit, x	; BAT size hi-byte.
  926    00:E65F  1A         			inc	a
  927    00:E660  85 FA      			sta	<_bl
  928    00:E662  4C D3 FD   			jmp	clear_bat_x
  929                        	
  930                        	
  931                        	
  932                        	; ***************************************************************************
  933                        	; ***************************************************************************
  934                        	;
  935                        	; void __fastcall __macro load_default_font( void );
  936                        	; void __fastcall __macro sgx_load_default_font( void );
  937                        	;
  938                        	; Args: _bp, _bp_bank = _farptr to font data mapped into MPR3 & MPR4.
  939                        	; Args: _di = VRAM destination address.
  940                        	; Args: monofont_fg = font color (0..15)
  941                        	; Args: monofont_bg = background color (0..15)
  942                        	; Args: _al = number of tiles (aka characters) 0==256
  943                        	
  944    02:D201             	huc_monofont_x	.proc
  945                        	
  946               26AC     			.bss
  947    F8:26AC             	monofont_fg:	.ds	1
  948    F8:26AD             	monofont_bg:	.ds	1
  949               D201     			.code
  950                        	
  951    02:D201  BC 7A 26   			ldy	vdc_bat_limit, x	; BAT limit mask hi-byte.
  952    02:D204  C8         			iny
  953    02:D205  62         			cla
  954    02:D206  85 F0      			sta.l	<_di			; Load the font directly
  955    02:D208  84 F1      			sty.h	<_di			; after the BAT (stupid!).
  956                        	
  957    02:D20A  20 E3 E5   			jsr	set_font_addr		; Set xxx_font_base from addr.
  958                        	
  959    02:D20D  A9 91      			lda.l	#.font
  960    02:D20F  85 EC      			sta.l	<_bp
  961    02:D211  A9 D2      			lda.h	#.font
  962    02:D213  85 ED      			sta.h	<_bp
  963                        	
  964    02:D215  A9 60      			lda	#$60			; #characters.
  965    02:D217  85 F8      			sta	<_al
  966                        	
  967    02:D219  20 7F E3   			jsr	set_di_to_mawr
  968                        	
  969    02:D21C  AD AC 26   			lda	monofont_fg		; Foreground pixel color.
  970    02:D21F  85 00      			sta	<__temp
  971    02:D221  AD AD 26   			lda	monofont_bg		; Background pixel color.
  972    02:D224  DA         			phx
  973    02:D225  A2 FC      			ldx.l	#_cx			; Create a bit mask for each
  974    02:D227  9E 00 20   	.bg_loop:	stz	$2000, x		; plane of the background.
  975    02:D22A  4A         			lsr	a
  976    02:D22B  90 03      			bcc	.bg_plane
  977    02:D22D  DE 00 20   			dec	$2000, x
  978    02:D230  E8         	.bg_plane:	inx
  979    02:D231  D0 F4      			bne	.bg_loop
  980    02:D233  FA         			plx
  981                        	
  982    02:D234  C2         	.tile_loop:	cly
  983                        	
  984    02:D235  B1 EC      	.plane01:	lda	[_bp], y		; Get font byte.
  985    02:D237  8F 00 06   			bbs0	<__temp, .set_plane0
  986    02:D23A  49 FF      	.clr_plane0:	eor	#$FF			; Clr font bits in background.
  987    02:D23C  25 FC      			and	<_cx + 0
  988    02:D23E  80 02      			bra	.put_plane0
  989    02:D240  05 FC      	.set_plane0:	ora	<_cx + 0		; Set font bits in background.
  990    02:D242  9D 02 02   	.put_plane0:	sta	VDC_DL, x
  991                        	
  992    02:D245  B1 EC      			lda	[_bp], y		; Get font byte.
  993    02:D247  9F 00 06   			bbs1	<__temp, .set_plane1
  994    02:D24A  49 FF      	.clr_plane1:	eor	#$FF			; Clr font bits in background.
  995    02:D24C  25 FD      			and	<_cx + 1
  996    02:D24E  80 02      			bra	.put_plane1
  997    02:D250  05 FD      	.set_plane1:	ora	<_cx + 1		; Set font bits in background.
  998    02:D252  9D 03 02   	.put_plane1:	sta	VDC_DH, x
  999                        	
 1000    02:D255  C8         			iny
 1001    02:D256  C0 08      			cpy	#8
 1002    02:D258  90 DB      			bcc	.plane01
 1003                        	
 1004    02:D25A  C2         			cly
 1005                        	
 1006    02:D25B  B1 EC      	.plane23:	lda	[_bp], y		; Get font byte.
 1007    02:D25D  AF 00 06   			bbs2	<__temp, .set_plane2
 1008    02:D260  49 FF      	.clr_plane2:	eor	#$FF			; Clr font bits in background.
 1009    02:D262  25 FE      			and	<_cx + 2
 1010    02:D264  80 02      			bra	.put_plane2
 1011    02:D266  05 FE      	.set_plane2:	ora	<_cx + 2		; Set font bits in background.
 1012    02:D268  9D 02 02   	.put_plane2:	sta	VDC_DL, x
 1013                        	
 1014    02:D26B  B1 EC      			lda	[_bp], y		; Get font byte.
 1015    02:D26D  BF 00 06   			bbs3	<__temp, .set_plane3
 1016    02:D270  49 FF      	.clr_plane3:	eor	#$FF			; Clr font bits in background.
 1017    02:D272  25 FF      			and	<_cx + 3
 1018    02:D274  80 02      			bra	.put_plane3
 1019    02:D276  05 FF      	.set_plane3:	ora	<_cx + 3		; Set font bits in background.
 1020    02:D278  9D 03 02   	.put_plane3:	sta	VDC_DH, x
 1021                        	
 1022    02:D27B  C8         			iny
 1023    02:D27C  C0 08      			cpy	#8
 1024    02:D27E  90 DB      			bcc	.plane23
 1025                        	
 1026    02:D280  A5 EC      			lda.l	<_bp
 1027    02:D282  69 07      			adc	#8-1
 1028    02:D284  85 EC      			sta.l	<_bp
 1029    02:D286  90 02      			bcc	!+
 1030    02:D288  E6 ED      			inc.h	<_bp
 1031                        	
 1032    02:D28A  C6 F8      	!:		dec	<_al
 1033    02:D28C  D0 A6      			bne	.tile_loop
 1034                        	
 1035                        			leave				; All done, phew!
         02:D28E  4C EF FF   			jmp	leave_proc
 1036                        	
 1037    02:D291             	.font:		incbin	"data/font8x8-bold-short-iso646-fr.dat", 128
 1038                        	
 1039                        			.endp
 1040                        	
 1041                        	
 1042                        	
 1043                        	; ***************************************************************************
 1044                        	; ***************************************************************************
 1045                        	;
 1046                        	; HuC Text Output
 1047                        	;
 1048                        	; ***************************************************************************
 1049                        	; ***************************************************************************
 1050                        	
 1051                        	
 1052                        	
 1053    14:CBB8             	vdc_tty_out	.procgroup			; These routines share code!
 1054                        	
 1055                        	; ***************************************************************************
 1056                        	; ***************************************************************************
 1057                        	;
 1058                        	; void __fastcall put_char( unsigned char digit<_bl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
 1059                        	
 1060               0001     		.if	SUPPORT_SGX
 1061                        	put_char_sgx	.proc
 1067                        			.endp
 1068                        		.endif
 1069                        	
 1070    14:CBB8             	put_char_vdc	.proc
 1071                        	
 1072    14:CBB8  82         			clx				; Offset to PCE VDC.
 1073                        	
 1074    14:CBB9  20 34 E4   			jsr	set_di_xy_mawr
 1075                        	
 1076    14:CBBC  62         			cla				; Push EOL marker.
 1077    14:CBBD  48         			pha
 1078                        	
 1079    14:CBBE  A5 FA      			lda	<_bl
 1080    14:CBC0  48         			pha				; Push character to output.
 1081    14:CBC1  80 58      			bra	!output+
 1082                        	
 1083    14:CBC3             			.ref	put_hex_vdc		; Need put_number_vdc
 1084                        			.endp
 1085                        	
 1086    14:CBC3             			.alias	_put_char.3		= put_char_vdc
 1087                        	
 1088                        	
 1089                        	
 1090                        	; ***************************************************************************
 1091                        	; ***************************************************************************
 1092                        	;
 1093                        	; void __fastcall put_digit( unsigned char digit<_bl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
 1094                        	
 1095               0001     		.if	SUPPORT_SGX
 1096                        	put_digit_sgx	.proc
 1102                        			.endp
 1103                        		.endif
 1104                        	
 1105    14:CBC3             	put_digit_vdc	.proc
 1106                        	
 1107    14:CBC3  82         			clx				; Offset to PCE VDC.
 1108                        	
 1109    14:CBC4  20 34 E4   			jsr	set_di_xy_mawr
 1110                        	
 1111    14:CBC7  62         			cla				; Push EOL marker.
 1112    14:CBC8  48         			pha
 1113                        	
 1114    14:CBC9  A5 FA      			lda	<_bl			; Convert hex digit to ASCII.
 1115    14:CBCB  29 0F      			and	#$0F
 1116    14:CBCD  C9 0A      			cmp	#10
 1117    14:CBCF  90 02      			bcc	!+
 1118    14:CBD1  69 06      			adc	#6
 1119    14:CBD3  69 30      	!:		adc	#'0'
 1120    14:CBD5  48         			pha				; Push character to output.
 1121    14:CBD6  80 43      			bra	!output+
 1122                        	
 1123    14:CBD8             			.ref	put_hex_vdc		; Need put_number_vdc
 1124                        			.endp
 1125                        	
 1126    14:CBD8             			.alias	_put_digit.3		= put_digit_vdc
 1127                        	
 1128                        	
 1129                        	
 1130                        	; ***************************************************************************
 1131                        	; ***************************************************************************
 1132                        	;
 1133                        	; void __fastcall put_hex( unsigned int number<_bx>, unsigned char length<_cl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
 1134                        	
 1135               0001     		.if	SUPPORT_SGX
 1136                        	put_hex_sgx	.proc
 1141                        			.endp
 1142                        		.endif
 1143                        	
 1144    14:CBD8             	put_hex_vdc	.proc
 1145                        	
 1146    14:CBD8  82         			clx				; Offset to PCE VDC.
 1147                        	
 1148    14:CBD9  20 34 E4   			jsr	set_di_xy_mawr
 1149                        	
 1150    14:CBDC  A4 FC      			ldy	<_cl			; Total #characters to print,
 1151    14:CBDE  F0 3E      			beq	!exit+			; NOT minimum #characters!
 1152                        	
 1153    14:CBE0  86 00      			stx	<__temp			; Preserve which VDC.
 1154                        	
 1155    14:CBE2  82         			clx				; Push EOL marker.
 1156    14:CBE3  DA         			phx
 1157                        	
 1158    14:CBE4  B5 FA      	.hex_byte:	lda.l	<_bx, x			; Convert hex digit to ASCII.
 1159    14:CBE6  29 0F      			and	#$0F
 1160    14:CBE8  C9 0A      			cmp	#10
 1161    14:CBEA  90 02      			bcc	!+
 1162    14:CBEC  69 06      			adc	#6
 1163    14:CBEE  69 30      	!:		adc	#'0'
 1164    14:CBF0  48         			pha				; Push character to output.
 1165    14:CBF1  88         			dey
 1166    14:CBF2  F0 15      			beq	.hex_done
 1167                        	
 1168    14:CBF4  B5 FA      			lda.l	<_bx, x			; Convert hex digit to ASCII.
 1169    14:CBF6  4A         			lsr	a
 1170    14:CBF7  4A         			lsr	a
 1171    14:CBF8  4A         			lsr	a
 1172    14:CBF9  4A         			lsr	a
 1173    14:CBFA  C9 0A      			cmp	#10
 1174    14:CBFC  90 02      			bcc	!+
 1175    14:CBFE  69 06      			adc	#6
 1176    14:CC00  69 30      	!:		adc	#'0'
 1177    14:CC02  48         			pha				; Push character to output.
 1178    14:CC03  88         			dey
 1179    14:CC04  F0 03      			beq	.hex_done
 1180                        	
 1181    14:CC06  E8         			inx
 1182    14:CC07  80 DB      			bra	.hex_byte
 1183                        	
 1184    14:CC09  A6 00      	.hex_done:	ldx	<__temp			; Restore which VDC.
 1185    14:CC0B  80 0E      			bra	!output+
 1186                        	
 1187    14:CC0D  18         	.write:		clc
 1188    14:CC0E  7D 96 26   			adc.l	_vdc_font_base, x
 1189    14:CC11  9D 02 02   			sta	VDC_DL, x
 1190    14:CC14  62         			cla
 1191    14:CC15  7D 97 26   			adc.h	_vdc_font_base, x
 1192    14:CC18  9D 03 02   			sta	VDC_DH, x
 1193                        	
 1194    14:CC1B  68         	!output:	pla				; Pop the digits and output.
 1195    14:CC1C  D0 EF      			bne	.write
 1196                        	
 1197                        	!exit:		leave				; All done!
         14:CC1E  4C EF FF   			jmp	leave_proc
 1198                        	
 1199                        			.endp
 1200                        	
 1201    14:CC21             			.alias	_put_hex.4 = put_hex_vdc
 1202                        	
 1203                        	
 1204                        	
 1205                        	; ***************************************************************************
 1206                        	; ***************************************************************************
 1207                        	;
 1208                        	; void __fastcall put_number( unsigned int number<_bx>, unsigned char length<_cl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
 1209                        	
 1210               0001     		.if	SUPPORT_SGX
 1211                        	put_number_sgx	.proc
 1216                        			.endp
 1217                        		.endif
 1218                        	
 1219    14:CC21             	put_number_vdc	.proc
 1220                        	
 1221    14:CC21  82         			clx				; Offset to PCE VDC.
 1222                        	
 1223    14:CC22  20 34 E4   			jsr	set_di_xy_mawr
 1224                        	
 1225    14:CC25  A4 FC      			ldy	<_cl			; Total #characters to print,
 1226    14:CC27  F0 F5      			beq	!exit-			; NOT minimum #characters!
 1227                        	
 1228    14:CC29  86 00      			stx	<__temp			; Preserve which VDC.
 1229                        	
 1230    14:CC2B  82         			clx				; Push EOL marker.
 1231    14:CC2C  DA         			phx
 1232                        	
 1233    14:CC2D  A6 FB      			ldx.h	<_bx			; Is the number -ve?
 1234    14:CC2F  86 FC      			stx	<_cl			; Remember this.
 1235    14:CC31  10 10      			bpl	.divide_by_ten
 1236                        	
 1237    14:CC33  38         			sec				; Make the number +ve.
 1238    14:CC34  A5 FA      			lda.l	<_bx
 1239    14:CC36  49 FF      			eor	#$FF
 1240    14:CC38  69 00      			adc	#0
 1241    14:CC3A  85 FA      			sta.l	<_bx
 1242    14:CC3C  8A         			txa
 1243    14:CC3D  49 FF      			eor	#$FF
 1244    14:CC3F  69 00      			adc	#0
 1245    14:CC41  85 FB      			sta.h	<_bx
 1246                        	
 1247    14:CC43  A2 10      	.divide_by_ten:	ldx	#16
 1248    14:CC45  62         			cla				; Clear Remainder.
 1249    14:CC46  06 FA      			asl.l	<_bx			; Rotate Dividend, MSB -> C.
 1250    14:CC48  26 FB      			rol.h	<_bx
 1251    14:CC4A  2A         	.divide_loop:	rol	a			; Rotate C into Remainder.
 1252    14:CC4B  C9 0A      			cmp	#10			; Test Divisor.
 1253    14:CC4D  90 02      			bcc	.divide_less		; CC if Divisor > Remainder.
 1254    14:CC4F  E9 0A      			sbc	#10			; Subtract Divisor.
 1255    14:CC51  26 FA      	.divide_less:	rol.l	<_bx			; Quotient bit -> Dividend LSB.
 1256    14:CC53  26 FB      			rol.h	<_bx			; Rotate Dividend, MSB -> C.
 1257    14:CC55  CA         			dex
 1258    14:CC56  D0 F2      			bne	.divide_loop
 1259                        	
 1260    14:CC58  18         			clc
 1261    14:CC59  69 30      			adc	#'0'			; Always leaves C clr.
 1262    14:CC5B  48         			pha				; Push character to output.
 1263    14:CC5C  88         			dey
 1264    14:CC5D  F0 10      			beq	!pad+
 1265    14:CC5F  A5 FA      			lda.l	<_bx			; Repeat while non-zero.
 1266    14:CC61  05 FB      			ora.h	<_bx
 1267    14:CC63  D0 DE      			bne	.divide_by_ten
 1268                        	
 1269    14:CC65  A6 00      			ldx	<__temp			; Restore which VDC.
 1270                        	
 1271    14:CC67  A5 FC      			lda	<_cl			; Was the number -ve?
 1272    14:CC69  10 04      			bpl	!pad+
 1273    14:CC6B  A9 2D      			lda	#'-'			; Output a leading '-'.
 1274    14:CC6D  48         			pha
 1275    14:CC6E  88         			dey
 1276                        	
 1277    14:CC6F  A9 20      	!pad:		lda	#' '			; Add padding characters.
 1278    14:CC71  88         	.loop:		dey
 1279    14:CC72  30 A7      			bmi	!output-
 1280    14:CC74  48         			pha
 1281    14:CC75  80 FA      			bra	.loop
 1282                        	
 1283    14:CC77             			.ref	put_hex_vdc		; Need put_number_vdc
 1284                        	
 1285                        			.endp
 1286                        	
 1287    14:CC77             			.alias	_put_number.4 = put_number_vdc
 1288                        	
 1289                        	
 1290                        	
 1291                        	; ***************************************************************************
 1292                        	; ***************************************************************************
 1293                        	;
 1294                        	; void __fastcall put_raw( unsigned int data<_bx>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
 1295                        	
 1296               0001     		.if	SUPPORT_SGX
 1297                        	put_raw_sgx	.proc
 1302                        			.endp
 1303                        		.endif
 1304                        	
 1305                        	put_raw_vdc	.proc
 1318                        			.endp
 1319                        	
 1320    14:CC77             			.alias	_put_raw.3		= put_raw_vdc
 1321                        	
 1322                        			.endprocgroup			; vdc_tty_out
 1323                        	
 1324                        	
 1325                        	
 1326                        	; ***************************************************************************
 1327                        	; ***************************************************************************
 1328                        	;
 1329                        	; void __fastcall put_string( unsigned char *string<_bp>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
 1330                        	;
 1331                        	; N.B. This is not a .proc right now because it is called from procedures
 1332                        	; that contain embedded strings, and the string aren't banked in before
 1333                        	; printing (yet).
 1334                        	
 1335               0001     		.if	SUPPORT_SGX
 1336    00:E665             	_sgx_put_string.3:
 1337    00:E665  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
 1338    00:E667  F0         			db	$F0			; Turn "clx" into a "beq".
 1339                        		.endif
 1340                        	
 1341    00:E668  82         	_put_string.3:	clx				; Offset to PCE VDC.
 1342                        	
 1343    00:E669  20 34 E4   			jsr	set_di_xy_mawr
 1344                        	
 1345    00:E66C  C2         			cly
 1346    00:E66D  B1 EC      	.chr_loop:	lda	[_bp], y
 1347    00:E66F  F0 15      			beq	.done
 1348                        	
 1349    00:E671  18         			clc
 1350    00:E672  7D 96 26   			adc.l	_vdc_font_base, x
 1351    00:E675  9D 02 02   			sta	VDC_DL, x
 1352    00:E678  62         			cla
 1353    00:E679  7D 97 26   			adc.h	_vdc_font_base, x
 1354    00:E67C  9D 03 02   			sta	VDC_DH, x
 1355                        	
 1356    00:E67F  C8         			iny
 1357    00:E680  D0 EB      			bne	.chr_loop
 1358    00:E682  E6 ED      			inc.h	<_bp
 1359    00:E684  80 E7      			bra	.chr_loop
 1360                        	
 1361    00:E686  60         	.done:		rts
 1362                        	
 1363                        	
 1364                        	
 1365                        	; ***************************************************************************
 1366                        	; ***************************************************************************
 1367                        	;
 1368                        	; void __fastcall set_color_rgb( unsigned int index<VCE_CTA>, unsigned char r<_al>, unsigned char g<_ah>, unsigned char b<acc> );
 1369                        	;
 1370                        	; r:	red	RED:	bit 3-5
 1371                        	; g:	green	GREEN:	bit 6-8
 1372                        	; b:	blue	BLUE:	bit 0-2
 1373                        	
 1374    00:E687             	_set_color_rgb.4:
 1375                        	;		and	#7
 1376    00:E687  85 00      			sta	<__temp
 1377    00:E689  A5 F8      			lda	<_al
 1378                        	;		and	#7
 1379    00:E68B  0A         			asl	a
 1380    00:E68C  0A         			asl	a
 1381    00:E68D  0A         			asl	a
 1382    00:E68E  05 00      			ora	<__temp
 1383    00:E690  0A         			asl	a
 1384    00:E691  0A         			asl	a
 1385    00:E692  85 00      			sta	<__temp
 1386    00:E694  A5 F9      			lda	<_ah
 1387                        	;		and	#7
 1388    00:E696  4A         			lsr	a
 1389    00:E697  66 00      			ror	<__temp
 1390    00:E699  4A         			lsr	a
 1391    00:E69A  66 00      			ror	<__temp
 1392    00:E69C  A8         			tay
 1393    00:E69D  A5 00      			lda	<__temp
 1394    00:E69F  8D 04 04   			sta.l	VCE_CTW
 1395    00:E6A2  8C 05 04   			sty.h	VCE_CTW
 1396    00:E6A5  60         			rts
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   60                        		.endif
   61                        	
   62               0001     		.ifdef	HUCC_USES_STRING		; Set in hucc_string.h
                             #[3]   "..\..\..\include\hucc\hucc-string.asm"
   63                        			include	"hucc-string.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-string.asm
    5                        	;
    6                        	; Not-quite-standard, but fast, replacements for <string.h>.
    7                        	;
    8                        	; Copyright John Brandwood 2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; !!! WARNING : non-standard return values !!!
   18                        	;
   19                        	; Strings are limited to a maximum of 255 characters (+ the terminator)!
   20                        	;
   21                        	; The memcpy(), strcpy() and strcat() functions do NOT return the destination
   22                        	; address, and they are declared "void" to check that the value is not used.
   23                        	;
   24                        	; mempcpy() is provided which returns the end address instead of the starting
   25                        	; address, because this is typically more useful.
   26                        	;
   27                        	; Please note that both memcpy() and memset() are implemented using a TII for
   28                        	; speed, and so the length should be < 16 bytes if used in time-critical bits
   29                        	; of code (such as when using a split screen) because they delay interrupts.
   30                        	;
   31                        	; strncpy() and strncat() are not provided, because strncpy() was not created
   32                        	; for the purpose of avoiding string overruns, and strncat() is just a poorly
   33                        	; designed function.
   34                        	;
   35                        	; POSIX strlcpy() and strlcat() are provided instead, but once again they are
   36                        	; slightly non-standard in that the return value when there is an overflow is
   37                        	; the buffer size (so that the overflow can be detected), instead of the full
   38                        	; size of the destination string that was too big to fit in the buffer.
   39                        	;
   40                        	; ***************************************************************************
   41                        	; ***************************************************************************
   42                        	
   43                        	
   44                        	
   45                        	; ***************************************************************************
   46                        	; ***************************************************************************
   47                        	;
   48                        	; void __fastcall strcpy( char *destination<_di>, char *source<_bp> );
   49                        	; void __fastcall strcat( char *destination<_di>, char *source<_bp> );
   50                        	;
   51                        	; unsigned int __fastcall strlcpy( char *destination<_di>, char *source<_bp>, unsigned char size<acc> );
   52                        	; unsigned int __fastcall strlcat( char *destination<_di>, char *source<_bp>, unsigned char size<acc> );
   53                        	; unsigned int __fastcall strlen( char *source<_bp> );
   54                        	;
   55                        	; NOT WORKING YET (needs compiler changes) ...
   56                        	;
   57                        	; void __fastcall strcpy( char *destination<_di>, char __far *source<_bp_bank:_bp> );
   58                        	; void __fastcall strcat( char *destination<_di>, char __far *source<_bp_bank:_bp> );
   59                        	;
   60                        	; unsigned int __fastcall strlcpy( char *destination<_di>, char __far *source<_bp_bank:_bp>, unsigned char size<acc> );
   61                        	; unsigned int __fastcall strlcat( char *destination<_di>, char __far *source<_bp_bank:_bp>, unsigned char size<acc> );
   62                        	; unsigned int __fastcall strlen( char __far *source<_bp_bank:_bp> );
   63                        	
   64    00:E6A6  62         	_strcat:	cla				; Max string length == 256!
   65    00:E6A7  A0 01      			ldy.h	#256
   66                        	
   67    00:E6A9  AA         	_strlcat:	tax				; X = buffer length (1..256).
   68                        	
   69               0000     		.ifdef	_DEBUG
   74                        		.endif
   75                        	
   76    00:E6AA  43 08      			tma3				; Preserve MPR3 and MPR4.
   77    00:E6AC  48         			pha
   78    00:E6AD  43 10      			tma4
   79    00:E6AF  48         			pha
   80                        	
   81                        	;		ldy	<_bp_bank		; Map the source string.
   82                        	;		beq	.no_bank
   83                        	;		jsr	map_bp_to_mpr34
   84                        	
   85    00:E6B0  C2         	.no_bank:	cly
   86                        	
   87    00:E6B1  B1 F0      	.find:		lda	[_di], y		; Find the end of the string.
   88    00:E6B3  F0 08      			beq	.adjust
   89    00:E6B5  C8         			iny
   90    00:E6B6  CA         			dex
   91    00:E6B7  D0 F8      			bne	.find
   92    00:E6B9  98         			tya				; A:Y = buffer length.
   93    00:E6BA  62         			cla
   94    00:E6BB  80 28      			bra	str_overflow
   95                        	
   96    00:E6BD  98         	.adjust:	tya				; Subtract Y from _bp so that
   97    00:E6BE  49 FF      			eor	#$FF			; _bp and _di use the same Y.
   98    00:E6C0  38         			sec
   99    00:E6C1  65 EC      			adc.l	<_bp
  100    00:E6C3  85 EC      			sta.l	<_bp
  101    00:E6C5  B0 0F      			bcs	str_copy
  102    00:E6C7  C6 ED      			dec.h	<_bp
  103    00:E6C9  80 0B      			bra	str_copy
  104                        	
  105                        			;
  106                        	
  107    00:E6CB  62         	_strcpy:	cla				; Max string length == 256!
  108    00:E6CC  A0 01      			ldy.h	#256
  109                        	
  110    00:E6CE  AA         	_strlcpy:	tax				; X = buffer length (1..256).
  111                        	
  112               0000     		.ifdef	_DEBUG
  117                        		.endif
  118                        	
  119    00:E6CF  43 08      			tma3				; Preserve MPR3 and MPR4.
  120    00:E6D1  48         			pha
  121    00:E6D2  43 10      			tma4
  122    00:E6D4  48         			pha
  123                        	
  124                        	;		ldy	<_bp_bank		; Map the source string.
  125                        	;		beq	.no_bank
  126                        	;		jsr	map_bp_to_mpr34
  127                        	
  128    00:E6D5  C2         	.no_bank:	cly
  129                        	
  130    00:E6D6  B1 EC      	str_copy:	lda	[_bp], y
  131    00:E6D8  91 F0      			sta	[_di], y
  132    00:E6DA  F0 1E      			beq	str_exit		; A:Y = string length.
  133    00:E6DC  C8         			iny
  134    00:E6DD  CA         			dex
  135    00:E6DE  D0 F6      			bne	str_copy
  136                        	
  137    00:E6E0  88         			dey
  138    00:E6E1  62         			cla
  139    00:E6E2  91 F0      			sta	[_di], y
  140    00:E6E4  C8         			iny				; A:Y = buffer length.
  141    00:E6E5  D0 13      	str_overflow:	bne	str_exit
  142    00:E6E7  1A         			inc	a			; A:Y = buffer length = 256.
  143    00:E6E8  80 10      			bra	str_exit
  144                        	
  145                        			;
  146                        	
  147    00:E6EA  43 08      	_strlen:	tma3
  148    00:E6EC  48         			pha
  149    00:E6ED  43 10      			tma4
  150    00:E6EF  48         			pha
  151                        	
  152                        	;		ldy	<_bp_bank
  153                        	;		beq	.no_bank
  154                        	;		jsr	map_bp_to_mpr34
  155                        	
  156    00:E6F0  C2         	.no_bank:	cly
  157                        	
  158    00:E6F1  B1 EC      	.find:		lda	[_bp], y
  159    00:E6F3  F0 05      			beq	str_exit
  160    00:E6F5  C8         			iny
  161    00:E6F6  D0 F9      			bne	.find
  162    00:E6F8  A9 01      			lda.h	#256			; A:Y = overflow length = 256.
  163                        	
  164    00:E6FA  AA         	str_exit:	tax				; X:Y = string or buffer length.
  165                        	
  166    00:E6FB  68         			pla				; Restore MPR3 and MPR4.
  167    00:E6FC  53 10      			tam4
  168    00:E6FE  68         			pla
  169    00:E6FF  53 08      			tam3
  170                        	
  171    00:E701  8A         			txa				; A:Y = string or buffer length.
  172    00:E702  42         			say				; Y:A = string or buffer length.
  173                        	
  174    00:E703  60         			rts
  175                        	
  176    00:E704             			.alias	_strlen.1		= _strlen
  177    00:E704             			.alias	_strcpy.2		= _strcpy
  178    00:E704             			.alias	_strcat.2		= _strcat
  179    00:E704             			.alias	_strlcpy.3		= _strlcpy
  180    00:E704             			.alias	_strlcat.3		= _strlcat
  181                        	
  182                        	
  183                        	
  184                        	; ***************************************************************************
  185                        	; ***************************************************************************
  186                        	;
  187                        	; void __fastcall memcpy( unsigned char *destination<ram_tii_dst>, unsigned char  *source<ram_tii_src>, unsigned int count<acc> );
  188                        	; unsigned char * __fastcall mempcpy( unsigned char *destination<ram_tii_dst>, unsigned char  *source<ram_tii_src>, unsigned int count<acc> );
  189                        	;
  190                        	; void __fastcall farmemcpy( unsigned char *destination<ram_tii_dst>, unsigned char __far *source<_bp_bank:ram_tii_src>, unsigned int count<acc> );
  191                        	; unsigned char * __fastcall farmempcpy( unsigned char *destination<ram_tii_dst>, unsigned char __far *source<_bp_bank:ram_tii_src>, unsigned int count<acc> );
  192                        	;
  193                        	; void __fastcall far_memcpy( unsigned char *destination<ram_tii_dst>, unsigned int count<acc> );
  194                        	; unsigned char * __fastcall far_mempcpy( unsigned char *destination<ram_tii_dst>, unsigned int count<acc> );
  195                        	;
  196                        	
  197    00:E704             	_memcpy.3:
  198    00:E704  64 02      	_mempcpy.3:	stz	<_bp_bank		; Map the source memory.
  199                        	
  200    00:E706             	_farmemcpy.3:
  201    00:E706  8C FE 22   	_farmempcpy.3:	sty.h	ram_tii_len		; Check for zero length.
  202    00:E709  8D FD 22   			sta.l	ram_tii_len
  203    00:E70C  0D FE 22   			ora.h	ram_tii_len
  204    00:E70F  F0 18      			beq	.zero_length
  205                        	
  206    00:E711  43 08      			tma3				; Preserve MPR3 and MPR4.
  207    00:E713  48         			pha
  208    00:E714  43 10      			tma4
  209    00:E716  48         			pha
  210                        	
  211    00:E717  A5 02      			lda	<_bp_bank		; Map the source memory.
  212    00:E719  F0 05      			beq	.no_bank
  213                        	
  214    00:E71B  53 08      			tam3				; Put bank into MPR3.
  215    00:E71D  1A         			inc	a
  216    00:E71E  53 10      			tam4				; Put next into MPR4.
  217                        	
  218                        	;		lda.h	ram_tii_src		; Remap ptr to MPR3.
  219                        	;		and	#$1F
  220                        	;		ora	#$60
  221                        	;		sta.h	ram_tii_src
  222                        	
  223    00:E720  20 F8 22   	.no_bank:	jsr	ram_tii			; Copy the memory.
  224                        	
  225    00:E723  68         			pla				; Restore MPR3 and MPR4.
  226    00:E724  53 10      			tam4
  227    00:E726  68         			pla
  228    00:E727  53 08      			tam3
  229                        	
  230    00:E729  18         	.zero_length:	clc				; Return the end address
  231    00:E72A  AD FB 22   			lda.l	ram_tii_dst		; like mempcpy().
  232    00:E72D  6D FD 22   			adc.l	ram_tii_len
  233    00:E730  A8         			tay
  234    00:E731  AD FC 22   			lda.h	ram_tii_dst
  235    00:E734  6D FE 22   			adc.h	ram_tii_len
  236    00:E737  42         			say
  237                        	
  238    00:E738  60         			rts
  239                        	
  240    00:E739             			.alias	_far_memcpy.2		= _farmemcpy.3
  241    00:E739             			.alias	_far_mempcpy.2		= _farmempcpy.3
  242                        	
  243                        	
  244                        	
  245                        	; ***************************************************************************
  246                        	; ***************************************************************************
  247                        	;
  248                        	; void __fastcall memset( unsigned char *destination<ram_tii_src>, unsigned char value<_al>, unsigned int count<acc> );
  249                        	
  250    00:E739  C9 00      	_memset:	cmp	#0			; Decrement the length, check
  251    00:E73B  D0 05      			bne	!+			; for zero and set C. 
  252    00:E73D  C0 00      			cpy	#0
  253    00:E73F  F0 23      			beq	.zero_length
  254    00:E741  88         			dey
  255    00:E742  3A         	!:		dec	a
  256    00:E743  8D FD 22   			sta.l	ram_tii_len
  257    00:E746  8C FE 22   			sty.h	ram_tii_len
  258                        	
  259    00:E749  AD F9 22   			lda.l	ram_tii_src		; ram_tii_dst = ram_tii_src + 1
  260    00:E74C  85 88      			sta.l	<__ptr
  261    00:E74E  69 00      			adc	#0
  262    00:E750  8D FB 22   			sta.l	ram_tii_dst
  263    00:E753  AD FA 22   			lda.h	ram_tii_src
  264    00:E756  85 89      			sta.h	<__ptr
  265    00:E758  69 00      			adc	#0
  266    00:E75A  8D FC 22   			sta.h	ram_tii_dst
  267                        	
  268    00:E75D  A5 F8      			lda	<_al			; Set the fill value.
  269    00:E75F  92 88      			sta	[__ptr]
  270                        	
  271    00:E761  4C F8 22   			jmp	ram_tii			; Copy the memory.
  272                        	
  273    00:E764  60         	.zero_length:	rts
  274                        	
  275    00:E765             			.alias	_memset.3		= _memset
  276                        	
  277                        	
  278                        	
  279                        	; ***************************************************************************
  280                        	; ***************************************************************************
  281                        	;
  282                        	; int __fastcall strcmp( char *string1<_di>, char *string2<_bp> );
  283                        	; int __fastcall strncmp( char *string1<_di>, char *string2<_bp>, unsigned int count<_ax> );
  284                        	;
  285                        	; int __fastcall __macro memcmp( unsigned char *string1<_di>, unsigned char *string2<_bp>, unsigned int count<_ax> );
  286                        	; int __fastcall farmemcmp( unsigned char *string1<_di>, unsigned char __far *string2<_bp_bank:_bp>, unsigned int count<_ax> );
  287                        	; int __fastcall far_memcmp( unsigned char *string1<_di>, unsigned int count<_ax> );
  288                        	;
  289                        	;  0 	if strings are equal
  290                        	;  1 	if the first non-matching character in string1 > string2 (in ASCII).
  291                        	; -1 	if the first non-matching character in string1 < string2 (in ASCII).
  292                        	
  293    14:D08A             	hucc_memcmp	.procgroup
  294                        	
  295                        	_strcmp.2	.proc
  300                        			.endp				; Fall through.
  301                        	
  302    14:D08A             	_strncmp.3	.proc
  303    14:D08A  64 02      			stz	<_bp_bank		; Assume strings are mapped.
  304    14:D08C  89 40      			bit	#$40			; Set the V bit for strcmp.
  305    14:D08E  50         			db	$50			; Turn "clv" into "bvc".
  306    14:D08F             			.ref	_farmemcmp.3		; Don't strip _farmemcmp.3!
  307                        			.endp				; Fall through.
  308                        	
  309    14:D08F             	_farmemcmp.3	.proc
  310    14:D08F  B8         			clv				; Clr the V bit for memcmp.
  311                        	
  312    14:D090  43 08      			tma3				; Preserve MPR3 and MPR4.
  313    14:D092  48         			pha
  314    14:D093  43 10      			tma4
  315    14:D095  48         			pha
  316                        	
  317    14:D096  A4 02      			ldy	<_bp_bank		; Map string2.
  318    14:D098  F0 03      			beq	.no_bank
  319                        	
  320    14:D09A  20 3B E3   			jsr	map_bp_to_mpr34
  321                        	
  322    14:D09D  C2         	.no_bank:	cly
  323                        	
  324    14:D09E  A6 F8      			ldx.l	<_ax			; Increment length.l
  325    14:D0A0  E8         			inx
  326    14:D0A1  CA         	.loop:		dex				; Decrement length.l
  327    14:D0A2  F0 17      			beq	.page
  328    14:D0A4  B1 F0      	.test:		lda	[_di], y		; string1 - string2
  329    14:D0A6  D1 EC      			cmp	[_bp], y
  330    14:D0A8  90 1E      			bcc	.return_neg		; string1 < string2 
  331    14:D0AA  D0 17      			bne	.return_pos		; string1 > string2
  332    14:D0AC  50 04      			bvc	!+			; Only check for end-of-string
  333    14:D0AE  C9 00      			cmp	#0			; if the V flag is set.
  334    14:D0B0  F0 0D      			beq	.return_same
  335    14:D0B2  C8         	!:		iny
  336    14:D0B3  D0 EC      			bne	.loop
  337    14:D0B5  E6 F1      			inc.h	<_di
  338    14:D0B7  E6 ED      			inc.h	<_bp			; Limited to 8KB maximum!
  339                        	;		jsr	inc.h_bp_mpr34
  340    14:D0B9  80 E6      			bra	.loop
  341                        	
  342    14:D0BB  C6 F9      	.page:		dec.h	<_ax			; Decrement length.h 
  343    14:D0BD  10 E5      			bpl	.test			; Limit comparison to 32KB.
  344                        	;		bra	cmp_same
  345                        	
  346    14:D0BF  82         	.return_same:	clx				; Return code in Y:X, X -> A.
  347    14:D0C0  C2         			cly
  348    14:D0C1  80 09      			bra	!+
  349                        	
  350    14:D0C3  A2 01      	.return_pos:	ldx	#$01			; Return code in Y:X, X -> A.
  351    14:D0C5  C2         			cly
  352    14:D0C6  80 04      			bra	!+
  353                        	
  354    14:D0C8  A2 FF      	.return_neg:	ldx	#$FF			; Return code in Y:X, X -> A.
  355    14:D0CA  A0 FF      			ldy	#$FF
  356                        	
  357    14:D0CC  68         	!:		pla				; Restore MPR3 and MPR4.
  358    14:D0CD  53 10      			tam4
  359    14:D0CF  68         			pla
  360    14:D0D0  53 08      			tam3
  361                        	
  362                        			leave				; Return and copy X -> A.
         14:D0D2  4C EF FF   			jmp	leave_proc
  363                        	
  364                        			.endp
  365                        	
  366                        			.endprocgroup			; hucc_memcmp
  367                        	
  368    00:E765             			.alias	_far_memcmp.2		= _farmemcmp.3
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   64                        		.endif
   65                        	
   66               0001     		.ifdef	HUCC_USES_NEW_SCROLL		; Set in hucc_scroll.h
                             #[3]   "..\..\..\include\hucc\hucc-scroll.asm"
   67                        			include	"hucc-scroll.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-scroll.asm
    5                        	;
    6                        	; Routines for a fast split-screen scrolling system.
    7                        	;
    8                        	; Copyright John Brandwood 2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; The maximum number of splits for each screen layer is set in your project's
   18                        	; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
   19                        	;
   20                        	; Your first active split must be defined to start at screen line 0, and then
   21                        	; the rest of the active splits must be in increasing line order to match the
   22                        	; way that the PC Engine displays the output image.
   23                        	;
   24                        	; You can have disabled splits interleaved with your active splits.
   25                        	;
   26                        	; Splits that are normally disabled can be used to create full screen effects
   27                        	; such as bouncing the screen up and down by adding blank areas at the top or
   28                        	; bottom of the screen, and then rapidly changing the height of those areas.
   29                        	;
   30                        	; ***************************************************************************
   31                        	; ***************************************************************************
   32                        	
   33                        	
   34                        	
   35               0000     		.ifndef	HUCC_PCE_SPLITS
   37                        		.endif
   38                        	
   39               0000     		.ifndef	HUCC_SGX_SPLITS
   41                        		.endif
   42                        	
   43               0000     		.if	(HUCC_PCE_SPLITS < 2) || (HUCC_PCE_SPLITS > 128)
   45                        		.endif
   46                        	
   47               0000     		.if	(HUCC_SGX_SPLITS < 2) || (HUCC_SGX_SPLITS > 128)
   49                        		.endif
   50                        	
   51               0144     	HUCC_1ST_RCR	=	$144
   52               00E0     	HUCC_SCR_HEIGHT	=	224
   53                        	
   54               E765     			.code
   55                        	
   56                        	
   57                        	
   58                        	; ***************************************************************************
   59                        	; ***************************************************************************
   60                        	;
   61                        	; void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
   62                        	; void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
   63                        	;
   64                        	; set screen scrolling
   65                        	
   66                        			.proc	_scroll_split.5
  143                        			.endp
  144                        	
  145               0001     		.if	SUPPORT_SGX
  146                        	
  147    14:CD14             			.proc	_sgx_scroll_split.5
  148                        	
  149    14:CD14  08         			php				; Disable interrupts while
  150    14:CD15  78         			sei				; updating this structure.
  151                        	
  152    14:CD16  A6 F8      			ldx	<_al			; Region number.
  153    14:CD18  E0 08      			cpx	#HUCC_SGX_SPLITS
  154    14:CD1A  B0 FE      	.hang:		bcs	.hang			; Better a hang than a crash!
  155                        	
  156    14:CD1C  BD 2F 27   			lda	sgx_region_sel, x	; Update the parameter copy
  157    14:CD1F  5D 37 27   			eor	sgx_region_new, x	; that is not displayed now.
  158    14:CD22  D0 3B      			bne	.regionA
  159                        	
  160    14:CD24  A5 F9      	.regionB:	lda	<_ah			; Scanline (i.e. top).
  161    14:CD26  C9 E0      			cmp	#HUCC_SCR_HEIGHT	; Skip if offscreen.
  162    14:CD28  B0 31      			bcs	!done+
  163    14:CD2A  9D 57 27   			sta	sgx_regionB_rcr, x
  164                        	
  165    14:CD2D  C9 00      			cmp	#0			; Either Y at top of the frame
  166    14:CD2F  F0 01      			beq	!+			; or Y-1 because the RCR code
  167    14:CD31  18         			clc				; sets it on the line before.
  168    14:CD32  A5 FC      	!:		lda.l	<_cx
  169    14:CD34  E9 00      			sbc	#0
  170    14:CD36  9D 87 27   			sta	sgx_regionB_yl, x
  171    14:CD39  A5 FD      			lda.h	<_cx
  172    14:CD3B  E9 00      			sbc	#0
  173    14:CD3D  9D 97 27   			sta	sgx_regionB_yh, x
  174                        	
  175    14:CD40  A5 FA      			lda.l	<_bx
  176    14:CD42  9D 67 27   			sta	sgx_regionB_xl, x
  177    14:CD45  A5 FB      			lda.h	<_bx
  178    14:CD47  9D 77 27   			sta	sgx_regionB_xh, x
  179                        	
  180    14:CD4A  A5 FE      			lda	<_dl
  181    14:CD4C  29 C0      			and	#$C0			; Flags (mark it as enabled).
  182    14:CD4E  09 0C      			ora	#$0C
  183    14:CD50  9D 47 27   			sta	sgx_regionB_crl, x
  184                        	
  185    14:CD53  A9 01      			lda	#1			; Mark that we've changed the
  186    14:CD55  9D 37 27   			sta	sgx_region_new, x	; selected region.
  187    14:CD58  9D 2F 27   			sta	sgx_region_sel, x
  188                        	
  189    14:CD5B  28         	!done:		plp				; Restore interrupts.
  190                        			leave				; All done!
         14:CD5C  4C EF FF   			jmp	leave_proc
  191                        	
  192    14:CD5F  A5 F9      	.regionA:	lda	<_ah			; Scanline (i.e. top).
  193    14:CD61  C9 E0      			cmp	#HUCC_SCR_HEIGHT	; Skip if offscreen.
  194    14:CD63  B0 31      			bcs	!done+
  195    14:CD65  9D 4F 27   			sta	sgx_regionA_rcr, x
  196                        	
  197    14:CD68  C9 00      			cmp	#0			; Either Y at top of the frame
  198    14:CD6A  F0 01      			beq	!+			; or Y-1 because the RCR code
  199    14:CD6C  18         			clc				; sets it on the line before.
  200    14:CD6D  A5 FC      	!:		lda.l	<_cx
  201    14:CD6F  E9 00      			sbc	#0
  202    14:CD71  9D 7F 27   			sta	sgx_regionA_yl, x
  203    14:CD74  A5 FD      			lda.h	<_cx
  204    14:CD76  E9 00      			sbc	#0
  205    14:CD78  9D 8F 27   			sta	sgx_regionA_yh, x
  206                        	
  207    14:CD7B  A5 FA      			lda.l	<_bx
  208    14:CD7D  9D 5F 27   			sta	sgx_regionA_xl, x
  209    14:CD80  A5 FB      			lda.h	<_bx
  210    14:CD82  9D 6F 27   			sta	sgx_regionA_xh, x
  211                        	
  212    14:CD85  A5 FE      			lda	<_dl
  213    14:CD87  29 C0      			and	#$C0			; Flags (mark it as enabled).
  214    14:CD89  09 0C      			ora	#$0C
  215    14:CD8B  9D 3F 27   			sta	sgx_regionA_crl, x
  216                        	
  217    14:CD8E  A9 01      			lda	#1			; Mark that we've changed the
  218    14:CD90  9D 37 27   			sta	sgx_region_new, x	; selected region.
  219    14:CD93  9E 2F 27   			stz	sgx_region_sel, x
  220                        	
  221    14:CD96  28         	!done:		plp				; Restore interrupts.
  222                        			leave				; All done!
         14:CD97  4C EF FF   			jmp	leave_proc
  223                        	
  224                        			.endp
  225                        	
  226                        		.endif	SUPPORT_SGX
  227                        	
  228                        	
  229                        	
  230                        	; ***************************************************************************
  231                        	; ***************************************************************************
  232                        	;
  233                        	; void __fastcall disable_split( unsigned char index<acc> );
  234                        	; void __fastcall sgx_disable_split( unsigned char index<acc> );
  235                        	;
  236                        	; disable screen scrolling for a scroll region
  237                        	
  238    00:E765             	_disable_split.1:
  239    00:E765  08         			php				; Disable interrupts while
  240    00:E766  78         			sei				; updating this structure.
  241                        	
  242    00:E767  C9 08      			cmp	#HUCC_PCE_SPLITS	; Better a hang than a crash!
  243    00:E769  B0 FE      	.hang:		bcs	.hang
  244    00:E76B  AA         			tax
  245                        	
  246    00:E76C  BD AE 26   			lda	vdc_region_sel, x	; Update the parameter copy
  247    00:E76F  5D B6 26   			eor	vdc_region_new, x	; that is not displayed now.
  248    00:E772  D0 0D      			bne	.regionA
  249                        	
  250    00:E774  9E C6 26   	.regionB:	stz	vdc_regionB_crl, x	; Region disabled if $00.
  251                        	
  252    00:E777  A9 01      			lda	#1			; Mark that we've changed the
  253    00:E779  9D B6 26   			sta	vdc_region_new, x	; selected region.
  254    00:E77C  9D AE 26   			sta	vdc_region_sel, x
  255                        	
  256    00:E77F  28         			plp				; Restore interrupts.
  257    00:E780  60         			rts
  258                        	
  259    00:E781  9E BE 26   	.regionA:	stz	vdc_regionA_crl, x	; Region disabled if $00.
  260                        	
  261    00:E784  A9 01      			lda	#1			; Mark that we've changed the
  262    00:E786  9D B6 26   			sta	vdc_region_new, x	; selected region.
  263    00:E789  9E AE 26   			stz	vdc_region_sel, x
  264                        	
  265    00:E78C  28         			plp				; Restore interrupts.
  266    00:E78D  60         			rts
  267                        	
  268               0001     		.if	SUPPORT_SGX
  269                        	
  270    00:E78E             	_sgx_disable_split.1:
  271    00:E78E  08         			php				; Disable interrupts while
  272    00:E78F  78         			sei				; updating this structure.
  273                        	
  274    00:E790  C9 08      			cmp	#HUCC_SGX_SPLITS	; Better a hang than a crash!
  275    00:E792  B0 FE      	.hang:		bcs	.hang
  276    00:E794  AA         			tax
  277                        	
  278    00:E795  BD 2F 27   			lda	sgx_region_sel, x	; Update the parameter copy
  279    00:E798  5D 37 27   			eor	sgx_region_new, x	; that is not displayed now.
  280    00:E79B  D0 0D      			bne	.regionA
  281                        	
  282    00:E79D  9E 47 27   	.regionB:	stz	sgx_regionB_crl, x	; Region disabled if $00.
  283                        	
  284    00:E7A0  A9 01      			lda	#1			; Mark that we've changed the
  285    00:E7A2  9D 37 27   			sta	sgx_region_new, x	; selected region.
  286    00:E7A5  9D 2F 27   			sta	sgx_region_sel, x
  287                        	
  288    00:E7A8  28         			plp				; Restore interrupts.
  289    00:E7A9  60         			rts
  290                        	
  291    00:E7AA  9E 3F 27   	.regionA:	stz	sgx_regionA_crl, x	; Region disabled if $00.
  292                        	
  293    00:E7AD  A9 01      			lda	#1			; Mark that we've changed the
  294    00:E7AF  9D 37 27   			sta	sgx_region_new, x	; selected region.
  295    00:E7B2  9E 2F 27   			stz	sgx_region_sel, x
  296                        	
  297    00:E7B5  28         			plp				; Restore interrupts.
  298    00:E7B6  60         			rts
  299                        	
  300                        		.endif	SUPPORT_SGX
  301                        	
  302                        	
  303                        	
  304                        	; ***************************************************************************
  305                        	; ***************************************************************************
  306                        	;
  307                        	; vbl_init_scroll
  308                        	;
  309                        	; From Charles MacDonald's pcetech.txt ...
  310                        	;
  311                        	;  Raster Compare Register (RCR):
  312                        	;
  313                        	;  The range of the RCR is 263 lines, relative to the start of the active
  314                        	;  display period. (defined by VSW, VDS, and VCR) The VDC treats the first
  315                        	;  scanline of the active display period as $0040, so the valid ranges for
  316                        	;  the RCR register are $0040 to $0146.
  317                        	;
  318                        	;  For example, assume VSW=$02, VDS=$17. This positions the first line of
  319                        	;  the active display period at line 25 of the frame. An RCR value of $0040
  320                        	;  (zero) causes an interrupt at line 25, and a value of $0146 (262) causes an
  321                        	;  interrupt at line 24 of the next frame.
  322                        	;
  323                        	;  Any other RCR values that are out of range ($00-$3F, $147-$3FF) will never
  324                        	;  result in a successful line compare.
  325                        	;
  326                        	; Processing time:
  327                        	;
  328                        	; Old HuC rcr_init: 2148 cycles if all 8 regions pre-sorted
  329                        	; Old HuC rcr_init: 4346 cycles if all 8 regions need sorting
  330                        	;
  331                        	; New HuCC vbl_init_scroll:   8 disabled splits:  290 cycles
  332                        	; New HuCC vbl_init_scroll:   8  enabled splits:  384 cycles
  333                        	;
  334                        	; New HuCC vbl_init_scroll:  16 disabled splits:  506 cycles
  335                        	; New HuCC vbl_init_scroll:  16  enabled splits:  672 cycles
  336                        	;
  337                        	; New HuCC vbl_init_scroll:  32 disabled splits:  953 cycles
  338                        	; New HuCC vbl_init_scroll:  32  enabled splits: 1263 cycles
  339                        	;
  340                        	; New HuCC vbl_init_scroll:  64 disabled splits: 1802 cycles
  341                        	; New HuCC vbl_init_scroll:  64  enabled splits: 2400 cycles
  342                        	;
  343                        	; New HuCC vbl_init_scroll: 128 disabled splits: 3530 cycles
  344                        	; New HuCC vbl_init_scroll: 128  enabled splits: 4704 cycles
  345                        	;
  346                        	; Memory used is 16 bytes per scroll per VDC!
  347                        	
  348               26AE     			.bss
  349                        	
  350    F8:26AE             	vdc_region_sel:	.ds	HUCC_PCE_SPLITS		; Use A or B region next frame?
  351    F8:26B6             	vdc_region_new:	.ds	HUCC_PCE_SPLITS		; 1 if vdc_region_sel modified.
  352                        	
  353    F8:26BE             	vdc_regionA_crl:.ds	HUCC_PCE_SPLITS		; Two copies of each setting
  354    F8:26C6             	vdc_regionB_crl:.ds	HUCC_PCE_SPLITS		; HUCC_PCE_SPLITS bytes apart,
  355    F8:26CE             	vdc_regionA_rcr:.ds	HUCC_PCE_SPLITS		; one setting for the current
  356    F8:26D6             	vdc_regionB_rcr:.ds	HUCC_PCE_SPLITS		; frame, and one setting that
  357    F8:26DE             	vdc_regionA_xl:	.ds	HUCC_PCE_SPLITS		; gets modified and then used
  358    F8:26E6             	vdc_regionB_xl:	.ds	HUCC_PCE_SPLITS		; on the next frame after the
  359    F8:26EE             	vdc_regionA_xh:	.ds	HUCC_PCE_SPLITS		; change is made.
  360    F8:26F6             	vdc_regionB_xh:	.ds	HUCC_PCE_SPLITS		; Regions will have different
  361    F8:26FE             	vdc_regionA_yl:	.ds	HUCC_PCE_SPLITS		; A or B currently active!
  362    F8:2706             	vdc_regionB_yl:	.ds	HUCC_PCE_SPLITS
  363    F8:270E             	vdc_regionA_yh:	.ds	HUCC_PCE_SPLITS
  364    F8:2716             	vdc_regionB_yh:	.ds	HUCC_PCE_SPLITS
  365                        	
  366    F8:271E             	vdc_next_region:.ds	1			; Linked list of region indexes
  367    F8:271F             	vdc_regionA_nxt:.ds	HUCC_PCE_SPLITS		; for the current frame.
  368    F8:2727             	vdc_regionB_nxt:.ds	HUCC_PCE_SPLITS
  369                        	
  370               0001     		.if	SUPPORT_SGX
  371                        	
  372    F8:272F             	sgx_region_sel:	.ds	HUCC_SGX_SPLITS		; Use A or B region next frame?
  373    F8:2737             	sgx_region_new:	.ds	HUCC_SGX_SPLITS		; 1 if sgx_region_sel modified.
  374                        	
  375    F8:273F             	sgx_regionA_crl:.ds	HUCC_SGX_SPLITS		; Two copies of each setting
  376    F8:2747             	sgx_regionB_crl:.ds	HUCC_SGX_SPLITS		; HUCC_SGX_SPLITS bytes apart,
  377    F8:274F             	sgx_regionA_rcr:.ds	HUCC_SGX_SPLITS		; one setting for the current
  378    F8:2757             	sgx_regionB_rcr:.ds	HUCC_SGX_SPLITS		; frame, and one setting that
  379    F8:275F             	sgx_regionA_xl:	.ds	HUCC_SGX_SPLITS		; gets modified and then used
  380    F8:2767             	sgx_regionB_xl:	.ds	HUCC_SGX_SPLITS		; on the next frame after the
  381    F8:276F             	sgx_regionA_xh:	.ds	HUCC_SGX_SPLITS		; change is made.
  382    F8:2777             	sgx_regionB_xh:	.ds	HUCC_SGX_SPLITS		; Regions will have different
  383    F8:277F             	sgx_regionA_yl:	.ds	HUCC_SGX_SPLITS		; A or B currently active!
  384    F8:2787             	sgx_regionB_yl:	.ds	HUCC_SGX_SPLITS
  385    F8:278F             	sgx_regionA_yh:	.ds	HUCC_SGX_SPLITS
  386    F8:2797             	sgx_regionB_yh:	.ds	HUCC_SGX_SPLITS
  387                        	
  388    F8:279F             	sgx_next_region:.ds	1			; Linked list of region indexes
  389    F8:27A0             	sgx_regionA_nxt:.ds	HUCC_SGX_SPLITS		; for the current frame.
  390    F8:27A8             	sgx_regionB_nxt:.ds	HUCC_SGX_SPLITS
  391                        	
  392                        		.endif
  393                        	
  394               E7B7     			.code
  395                        	
  396    14:CD9A             	vbl_init_scroll	.proc
  397                        	
  398    14:CD9A  62         			cla				; A = previous active index
  399    14:CD9B  A2 08      			ldx	#HUCC_PCE_SPLITS	; so $00 for end-of-screen.
  400                        	
  401    14:CD9D  18         			clc				; For regionB indexes.
  402                        	
  403    14:CD9E  CA         	!next_region:	dex				; All regions updated?
  404    14:CD9F  30 20      			bmi	!save_first+
  405                        	
  406    14:CDA1  9E B6 26   			stz	vdc_region_new, x	; Clear region modified flag.
  407                        	
  408    14:CDA4  BC AE 26   			ldy	vdc_region_sel, x	; 0=regionA or 1=regionB.
  409    14:CDA7  F0 0D      			beq	!use_regionA+
  410                        	
  411    14:CDA9  BC C6 26   	!use_regionB:	ldy	vdc_regionB_crl, x	; Region disabled if $00.
  412    14:CDAC  F0 F0      			beq	!next_region-
  413    14:CDAE  9D 27 27   			sta	vdc_regionB_nxt, x	; Save index of next region.
  414    14:CDB1  8A         			txa				; A = current region index.
  415    14:CDB2  69 08      			adc	#HUCC_PCE_SPLITS	; Always leaves CC!
  416    14:CDB4  80 E8      			bra	!next_region-
  417                        	
  418    14:CDB6  BC BE 26   	!use_regionA:	ldy	vdc_regionA_crl, x	; Region disabled if $00.
  419    14:CDB9  F0 E3      			beq	!next_region-
  420    14:CDBB  9D 1F 27   			sta	vdc_regionA_nxt, x	; Save index of next region.
  421    14:CDBE  8A         			txa				; A = current region index.
  422    14:CDBF  80 DD      			bra	!next_region-
  423                        	
  424    14:CDC1  8D 1E 27   	!save_first:	sta	vdc_next_region		; Save index of 1st region.
  425                        	
  426    14:CDC4  AA         			tax				; NZ if first active region
  427    14:CDC5  D0 03      			bne	!init_first+		; is not region 0.
  428    14:CDC7  98         			tya				; NZ if region 0 is active.
  429    14:CDC8  F0 0F      			beq	!+			; If no active leave RCR=0.
  430                        	
  431    14:CDCA  A9 06      	!init_first:	lda	#VDC_RCR		; 1st RCR always happens just
  432    14:CDCC  8D 00 02   			sta	VDC_AR			; before the display starts.
  433    14:CDCF  A9 44      			lda.l	#HUCC_1ST_RCR
  434    14:CDD1  8D 02 02   			sta	VDC_DL
  435    14:CDD4  A9 01      			lda.h	#HUCC_1ST_RCR
  436    14:CDD6  8D 03 02   			sta	VDC_DH
  437                        	
  438               0001     		.if	SUPPORT_SGX
  439                        	
  440    14:CDD9  62         	!:		cla				; A = previous active index
  441    14:CDDA  A2 08      			ldx	#HUCC_SGX_SPLITS	; so $00 for end-of-screen.
  442                        	
  443    14:CDDC  18         			clc				; For regionB indexes.
  444                        	
  445    14:CDDD  CA         	!next_region:	dex				; All regions updated?
  446    14:CDDE  30 20      			bmi	!save_first+
  447                        	
  448    14:CDE0  9E 37 27   			stz	sgx_region_new, x	; Clear region modified flag.
  449                        	
  450    14:CDE3  BC 2F 27   			ldy	sgx_region_sel, x	; 0=regionA or 1=regionB.
  451    14:CDE6  F0 0D      			beq	!use_regionA+
  452                        	
  453    14:CDE8  BC 47 27   	!use_regionB:	ldy	sgx_regionB_crl, x	; Region disabled if $00.
  454    14:CDEB  F0 F0      			beq	!next_region-
  455    14:CDED  9D A8 27   			sta	sgx_regionB_nxt, x	; Save index of next region.
  456    14:CDF0  8A         			txa				; A = current region index.
  457    14:CDF1  69 08      			adc	#HUCC_SGX_SPLITS	; Always leaves CC!
  458    14:CDF3  80 E8      			bra	!next_region-
  459                        	
  460    14:CDF5  BC 3F 27   	!use_regionA:	ldy	sgx_regionA_crl, x	; Region disabled if $00.
  461    14:CDF8  F0 E3      			beq	!next_region-
  462    14:CDFA  9D A0 27   			sta	sgx_regionA_nxt, x	; Save index of next region.
  463    14:CDFD  8A         			txa				; A = current region index.
  464    14:CDFE  80 DD      			bra	!next_region-
  465                        	
  466    14:CE00  8D 9F 27   	!save_first:	sta	sgx_next_region		; Save index of 1st region.
  467                        	
  468    14:CE03  AA         			tax				; NZ if first active region
  469    14:CE04  D0 03      			bne	!init_first+		; is not region 0.
  470    14:CE06  98         			tya				; NZ if region 0 is active.
  471    14:CE07  F0 0F      			beq	!+			; If no active leave RCR=0.
  472                        	
  473    14:CE09  A9 06      	!init_first:	lda	#VDC_RCR		; 1st RCR always happens just
  474    14:CE0B  8D 10 02   			sta	SGX_AR			; before the display starts.
  475    14:CE0E  A9 44      			lda.l	#HUCC_1ST_RCR
  476    14:CE10  8D 12 02   			sta	SGX_DL
  477    14:CE13  A9 01      			lda.h	#HUCC_1ST_RCR
  478    14:CE15  8D 13 02   			sta	SGX_DH
  479                        	
  480                        		.endif	SUPPORT_SGX
  481                        	
  482                        	!:		leave				; All done!
         14:CE18  4C EF FF   			jmp	leave_proc
  483                        	
  484                        			.endp
  485                        	
  486                        	
  487                        	
  488               0001     		.if	SUPPORT_SGX
  489                        	
  490                        	; ***************************************************************************
  491                        	; ***************************************************************************
  492                        	;
  493                        	; VDC_RCR_MACRO and SGX_RCR_MACRO
  494                        	;
  495                        	; A 16-byte TIA takes 142..234 cycles in 5MHz, 128..200 cycles in 7MHz.
  496                        	; A 32-byte TIA takes 270..364 cycles in 5MHz, 242..312 cycles in 7MHz. (527 DUO)
  497                        	;
  498                        	; You need to write the last RCR setting within 540 cycles in order to catch
  499                        	; the next line (at 256/336/512 resolution).
  500                        	;
  501                        	; That gives 305 cycles from the RCR to write the last setting, or there
  502                        	; will be a visible glitch on the screen.
  503                        	
  504               0000     		.ifndef	USING_RCR_MACROS
  506                        		.endif
  507                        	
  508                        	;		;;;				; 8 (cycles for the INT)
  509                        	;		bbs1	<irq_vec, .hook		; 8
  510                        	;		jmp	[irq1_hook]		; 7
  511                        	
  512                        	;		;;;				; 8 (cycles for the INT)
  513                        	;		jmp	irq1_handler		; 4
  514                        	
  515                        	;irq1_handler:	pha				; 3 Save all registers.
  516                        	;		phx				; 3
  517                        	;		phy				; 3
  518                        	;
  519                        	;		lda	VDC_SR			; 6 Acknowledge the VDC's IRQ.
  520                        	;		sta	<vdc_sr			; 4 Remember what caused it.
  521                        	;
  522                        	;		ldx	SGX_SR			; 6 Read SGX_SR after VDC_SR in
  523                        	;		stx	<sgx_sr			; 4 case this is not an SGX!
  524                        	;
  525                        	;!:		and	#$04			; 2 Is this an HSYNC interrupt?
  526                        	;		beq	!+			; 2
  527                        	
  528                        			.macro	VDC_RCR_MACRO
  529                        	
  530                        			st0	#VDC_RCR		; 5
  531                        	
  532                        			ldx	vdc_next_region		; 5 X and Y can be greater than
  533                        			ldy	vdc_regionA_nxt, x	; 5 HUCC_PCE_SPLITS if regionB!
  534                        			clc				; 2
  535                        			bne	!set_next_rcr+		; 4 Stop RCR if next line is 0.
  536                        	
  537                        			and	const_0000		; 5 A=$00 with the same #cycles
  538                        			bra	!clr_next_rcr+		; 4 as if the branch were taken.
  539                        	
  540                        	!set_next_rcr:	lda	vdc_regionA_rcr, y	; 5 Set next RCR 1 line before
  541                        			adc	#64-1			; 2 the region begins, or 0 to
  542                        	!clr_next_rcr:	sta	VDC_DL			; 6 disable.
  543                        			cla				; 2
  544                        			rol	a			; 2
  545                        			sta	VDC_DH			; 6
  546                        	
  547                        			st0	#VDC_BYR		; 5 Do BYR first to mitigate the
  548                        			lda	vdc_regionA_yl, x	; 5 glitch if the IRQ is delayed.
  549                        			sta	VDC_DL			; 6 = 105 cycles from RCR on SGX
  550                        			lda	vdc_regionA_yh, x	; 5
  551                        			sta	VDC_DH			; 6
  552                        	
  553                        			st0	#VDC_CR			; 5
  554                        			lda	vdc_regionA_crl, x	; 5
  555                        	;		asl	a
  556                        			sta	VDC_DL			; 6
  557                        	
  558                        			st0	#VDC_BXR		; 2
  559                        			lda	vdc_regionA_xl, x	; 5
  560                        			sta	VDC_DL			; 6
  561                        			lda	vdc_regionA_xh, x	; 5
  562                        			sta	VDC_DH			; 6 = 156 cycles from RCR if DUO
  563                        	
  564                        	;		bcc	!+
  565                        	;		lda	vdc_regionA_yh, x	; 5
  566                        	;		sta.l	VCE_CTW			; 6
  567                        	
  568                        			sty	vdc_next_region		; 5
  569                        	
  570                        			.endm
  571                        	
  572                        	;!:		bbr2	<sgx_sr, !+		; 6 Is this an HSYNC interrupt?
  573                        	
  574                        			.macro	SGX_RCR_MACRO
  575                        	
  576                        			lda	#VDC_RCR		; 2
  577                        			sta	SGX_AR			; 6
  578                        	
  579                        			ldx	sgx_next_region		; 5 X and Y can be greater than
  580                        			ldy	sgx_regionA_nxt, x	; 5 HUCC_SGX_SPLITS if regionB!
  581                        			clc				; 2
  582                        			bne	!set_next_rcr+		; 4 Stop RCR if next line is 0.
  583                        	
  584                        			and	const_0000		; 5 A=$00 with the same #cycles
  585                        			bra	!clr_next_rcr+		; 4 as if the branch were taken.
  586                        	
  587                        	!set_next_rcr:	lda	sgx_regionA_rcr, y	; 5 Set next RCR 1 line before
  588                        			adc	#64-1			; 2 the region begins, or 0 to
  589                        	!clr_next_rcr:	sta	SGX_DL			; 6 disable.
  590                        			cla				; 2
  591                        			rol	a			; 2
  592                        			sta	SGX_DH			; 6
  593                        	
  594                        			lda	#VDC_BYR		; 2 Do BYR first to mitigate the
  595                        			sta	SGX_AR			; 6 glitch if the IRQ is delayed.
  596                        			lda	sgx_regionA_yl, x	; 5
  597                        			sta	SGX_DL			; 6
  598                        			lda	sgx_regionA_yh, x	; 5
  599                        			sta	SGX_DH			; 6
  600                        	
  601                        			lda	#VDC_CR			; 2
  602                        			sta	SGX_AR			; 6
  603                        			lda	sgx_regionA_crl, x	; 5
  604                        			sta	SGX_DL			; 6
  605                        	
  606                        			lda	#VDC_BXR		; 2
  607                        			sta	SGX_AR			; 6
  608                        			lda	sgx_regionA_xl, x	; 5
  609                        			sta	SGX_DL			; 6
  610                        			lda	sgx_regionA_xh, x	; 5
  611                        			sta	SGX_DH			; 6 = 293 cycles (282 if no YH)
  612                        	
  613                        			sty	sgx_next_region		; 5
  614                        	
  615                        			.endm
  616                        	
  617                        		.else	SUPPORT_SGX
  697                        		.endif	SUPPORT_SGX
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   68                        		.else
   72                        		.endif	HUCC_USES_NEW_SCROLL
   73                        	
   74               0001     		.ifdef	HUCC_USES_OLD_SPR		; Set in hucc_old_spr.h
                             #[3]   "..\..\..\include\hucc\hucc-old-spr.asm"
   75                        			include	"hucc-old-spr.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-old-spr.asm
    5                        	;
    6                        	; Based on the original HuC and MagicKit functions by David Michel and the
    7                        	; other original HuC developers.
    8                        	;
    9                        	; Modifications copyright John Brandwood 2024.
   10                        	;
   11                        	; Distributed under the Boost Software License, Version 1.0.
   12                        	; (See accompanying file LICENSE_1_0.txt or copy at
   13                        	;  http://www.boost.org/LICENSE_1_0.txt)
   14                        	;
   15                        	; ***************************************************************************
   16                        	; ***************************************************************************
   17                        	
   18                        	;
   19                        	; Include dependancies ...
   20                        	;
   21                        	
   22                        			include "common.asm"		; Common helpers.
   23                        			include "vce.asm"		; Useful VCE routines.
   24                        			include "vdc.asm"		; Useful VCE routines.
   25                        	
   26                        	
   27                        	
   28                        	; ***************************************************************************
   29                        	; ***************************************************************************
   30                        	;
   31                        	; HuC Sprite Functions
   32                        	;
   33                        	; ***************************************************************************
   34                        	; ***************************************************************************
   35                        	
   36               209C     			.zp
   37    F8:209C             	spr_ptr:	ds	2
   38               27B0     			.bss
   39    F8:27B0             	spr_sat:	ds	512
   40               E7B7     			.code
   41                        	
   42               0001     		.if	SUPPORT_SGX
   43               209E     			.zp
   44    F8:209E             	sgx_spr_ptr:	ds	2
   45               29B0     			.bss
   46    F8:29B0             	sgx_spr_sat:	ds	512	; N.B. Directly after spr_sat!
   47               E7B7     			.code
   48                        		.endif
   49                        	
   50                        	; Moved to hucc-old-map.asm just to save space. This NEEDS to be changed!
   51                        	;
   52                        	;		.bss
   53                        	;spr_max:	ds	1
   54                        	;spr_clr:	ds	1
   55                        	;	.if	SUPPORT_SGX
   56                        	;sgx_spr_max:	ds	1
   57                        	;sgx_spr_clr:	ds	1
   58                        	;	.endif
   59                        	;		.code
   60                        	
   61                        	
   62                        	
   63                        	; ***************************************************************************
   64                        	; ***************************************************************************
   65                        	;
   66                        	; void __fastcall init_satb( void );
   67                        	; void __fastcall reset_satb( void );
   68                        	;
   69                        	; void __fastcall sgx_init_satb( void );
   70                        	; void __fastcall sgx_reset_satb( void );
   71                        	
   72    00:E7B7             	_reset_satb:
   73    00:E7B7  C2         	_init_satb:	cly
   74    00:E7B8  62         			cla
   75    00:E7B9  99 B0 27   	!:		sta	spr_sat + $0000, y
   76    00:E7BC  99 B0 28   			sta	spr_sat + $0100, y
   77    00:E7BF  C8         			iny
   78    00:E7C0  D0 F7      			bne	!-
   79    00:E7C2  8C 84 26   			sty	spr_max
   80    00:E7C5  C8         			iny
   81    00:E7C6  8C 85 26   			sty	spr_clr
   82    00:E7C9  60         			rts
   83                        	
   84               0001     		.if	SUPPORT_SGX
   85    00:E7CA             	_sgx_reset_satb:
   86    00:E7CA  C2         	_sgx_init_satb:	cly
   87    00:E7CB  62         			cla
   88    00:E7CC  99 B0 29   	!:		sta	sgx_spr_sat + $0000, y
   89    00:E7CF  99 B0 2A   			sta	sgx_spr_sat + $0100, y
   90    00:E7D2  C8         			iny
   91    00:E7D3  D0 F7      			bne	!-
   92    00:E7D5  8C 94 26   			sty	sgx_spr_max
   93    00:E7D8  C8         			iny
   94    00:E7D9  8C 95 26   			sty	sgx_spr_clr
   95    00:E7DC  60         			rts
   96                        		.endif
   97                        	
   98                        	
   99                        	
  100                        	; ***************************************************************************
  101                        	; ***************************************************************************
  102                        	;
  103                        	; void __fastcall satb_update( void );
  104                        	; void __fastcall sgx_satb_update( void );
  105                        	
  106    14:D03C             	old_satb_group	.procgroup
  107                        	
  108               0001     		.if	SUPPORT_SGX
  109    14:D03C             			.proc	_sgx_satb_update
  110                        	
  111    14:D03C  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  112    14:D03E  F0         			db	$F0			; Turn "clx" into a "beq".
  113                        	
  114    14:D03F             			.ref	_satb_update
  115                        			.endp
  116                        		.endif
  117                        	
  118    14:D03F             			.proc	_satb_update
  119                        	
  120    14:D03F  82         			clx				; Offset to PCE VDC.
  121                        	
  122    14:D040  A9 7F      			lda.h	#$7F00			; HuC puts the SAT here in VRAM
  123                        	;		lda.h	#$0800			; but we put it here instead
  124    14:D042  64 F0      			stz.l	<_di
  125    14:D044  85 F1      			sta.h	<_di
  126    14:D046  20 7F E3   			jsr	set_di_to_mawr
  127                        	
  128               0001     		.if	SUPPORT_SGX
  129    14:D049  8A         			txa				; Select which VDC to write
  130    14:D04A  1A         			inc	a			; to.
  131    14:D04B  1A         			inc	a
  132    14:D04C  8D F3 22   			sta.l	ram_tia_dst
  133                        		.endif
  134                        	
  135    14:D04F  A9 10      			lda	#VRAM_XFER_SIZE		; Split into 16-byte chunks
  136    14:D051  8D F5 22   			sta.l	ram_tia_len		; for stable IRQ response.
  137                        	
  138    14:D054  BC 84 26   			ldy	spr_max, x		; Highest sprite that was set.
  139    14:D057  C8         			iny
  140                        	
  141    14:D058  BD 85 26   			lda	spr_clr, x
  142    14:D05B  F0 05      			beq	!+
  143    14:D05D  9E 85 26   			stz	spr_clr, x
  144    14:D060  A0 40      			ldy	#64
  145                        	
  146    14:D062  98         	!:		tya
  147    14:D063  F0 22      			beq	.exit
  148                        	
  149    14:D065  3A         			dec	a			; round up to the next group of 2 sprites
  150    14:D066  4A         			lsr	a
  151               0000     		.if	VRAM_XFER_SIZE == 32
  153                        		.endif
  154    14:D067  1A         			inc	a
  155    14:D068  A8         			tay
  156                        	
  157    14:D069  A9 27      			lda.h	#spr_sat
  158                        	
  159               0001     		.if	SUPPORT_SGX
  160    14:D06B  E0 00      			cpx	#0
  161    14:D06D  F0 02      			beq	!+
  162                        	
  163    14:D06F  A9 29      			lda.h	#sgx_spr_sat
  164                        		.endif
  165                        	
  166    14:D071  8D F2 22   	!:		sta.h	ram_tia_src
  167                        	
  168    14:D074  A9 B0      			lda.l	#spr_sat		; Same for SGX and PCE!
  169    14:D076  8D F1 22   	.chunk_loop:	sta.l	ram_tia_src
  170                        	
  171    14:D079  20 F0 22   			jsr	ram_tia			; transfer 16-bytes
  172                        	
  173    14:D07C  18         			clc				; increment source
  174    14:D07D  69 10      			adc	#VRAM_XFER_SIZE
  175    14:D07F  90 03      			bcc	.same_page
  176    14:D081  EE F2 22   			inc.h	ram_tia_src
  177                        	
  178    14:D084  88         	.same_page:	dey
  179    14:D085  D0 EF      			bne	.chunk_loop
  180                        	
  181                        	.exit:		leave
         14:D087  4C EF FF   			jmp	leave_proc
  182                        	
  183                        			.endp
  184                        	
  185                        			.endprocgroup	; old_satb_group
  186                        	
  187                        	
  188                        	
  189                        	; ***************************************************************************
  190                        	; ***************************************************************************
  191                        	;
  192                        	; void __fastcall spr_set( unsigned char num<acc> );
  193                        	
  194    00:E7DD  CD 84 26   	_spr_set.1:	cmp	spr_max
  195    00:E7E0  90 03      			bcc	!+
  196    00:E7E2  8D 84 26   			sta	spr_max
  197    00:E7E5  A0 27      	!:		ldy.h	#spr_sat
  198    00:E7E7  0A         			asl	a
  199    00:E7E8  0A         			asl	a
  200    00:E7E9  0A         			asl	a
  201    00:E7EA  90 02      			bcc	!+
  202    00:E7EC  C8         			iny
  203    00:E7ED  18         			clc
  204    00:E7EE  69 B0      	!:		adc.l	#spr_sat
  205    00:E7F0  85 9C      			sta.l	<spr_ptr
  206    00:E7F2  90 01      			bcc	!+
  207    00:E7F4  C8         			iny
  208    00:E7F5  84 9D      	!:		sty.h	<spr_ptr
  209    00:E7F7  60         			rts
  210                        	
  211                        	
  212                        	
  213                        	; ***************************************************************************
  214                        	; ***************************************************************************
  215                        	;
  216                        	; void __fastcall spr_hide( void );
  217                        	
  218    00:E7F8  A0 01      	_spr_hide:	ldy	#1
  219    00:E7FA  B1 9C      			lda	[spr_ptr], y
  220    00:E7FC  09 02      			ora	#2
  221    00:E7FE  91 9C      			sta	[spr_ptr], y
  222    00:E800  60         			rts
  223                        	
  224                        	
  225                        	
  226                        	; ***************************************************************************
  227                        	; ***************************************************************************
  228                        	;
  229                        	; void __fastcall spr_show( void );
  230                        	
  231    00:E801  A0 01      	_spr_show:	ldy	#1
  232    00:E803  B1 9C      			lda	[spr_ptr], y
  233    00:E805  29 01      			and	#1
  234    00:E807  91 9C      			sta	[spr_ptr], y
  235    00:E809  60         			rts
  236                        	
  237                        	
  238                        	
  239                        	; ***************************************************************************
  240                        	; ***************************************************************************
  241                        	;
  242                        	; void __fastcall spr_x( unsigned int value<acc> );
  243                        	
  244    00:E80A  02         	_spr_x.1:	sxy
  245    00:E80B  18         			clc
  246    00:E80C  69 20      			adc	#32
  247    00:E80E  A0 02      			ldy	#2
  248    00:E810  91 9C      			sta	[spr_ptr], y
  249    00:E812  8A         			txa
  250    00:E813  69 00      			adc	#0
  251    00:E815  C8         			iny
  252    00:E816  91 9C      			sta	[spr_ptr], y
  253    00:E818  60         			rts
  254                        	
  255                        	
  256                        	
  257                        	; ***************************************************************************
  258                        	; ***************************************************************************
  259                        	;
  260                        	; void __fastcall spr_y( unsigned int value<acc> );
  261                        	
  262    00:E819  18         	_spr_y.1:	clc
  263    00:E81A  69 40      			adc	#64
  264    00:E81C  92 9C      			sta	[spr_ptr]
  265    00:E81E  98         			tya
  266    00:E81F  69 00      			adc	#0
  267    00:E821  A0 01      			ldy	#1
  268    00:E823  91 9C      			sta	[spr_ptr], y
  269    00:E825  60         			rts
  270                        			
  271                        	
  272                        	
  273                        	; ***************************************************************************
  274                        	; ***************************************************************************
  275                        	;
  276                        	; void __fastcall spr_pattern( unsigned int vaddr<acc> );
  277                        	
  278    00:E826  84 00      	_spr_pattern.1:	sty	<__temp		;     zp=fedcba98 a=76543210
  279    00:E828  0A         			asl	a		; c=f zp=edcba987 a=6543210_
  280    00:E829  26 00      			rol	<__temp
  281    00:E82B  2A         			rol	a		; c=e zp=dcba9876 a=543210_f
  282    00:E82C  26 00      			rol	<__temp
  283    00:E82E  2A         			rol	a		; c=d zp=cba98765 a=43210_fe
  284    00:E82F  26 00      			rol	<__temp
  285    00:E831  2A         			rol	a		; c=4 zp=cba98765 a=3210_fed
  286    00:E832  A0 05      			ldy	#5
  287    00:E834  91 9C      			sta	[spr_ptr], y
  288    00:E836  A5 00      			lda	<__temp
  289    00:E838  88         			dey
  290    00:E839  91 9C      			sta	[spr_ptr], y
  291    00:E83B  60         			rts
  292                        	
  293                        	
  294                        	
  295                        	; ***************************************************************************
  296                        	; ***************************************************************************
  297                        	;
  298                        	; void __fastcall spr_ctrl( unsigned char mask<_al>, unsigned char value<acc> );
  299                        	
  300    00:E83C  25 F8      	_spr_ctrl.2:	and	<_al
  301    00:E83E  85 00      			sta	<__temp
  302    00:E840  A5 F8      			lda	<_al
  303    00:E842  49 FF      			eor	#$FF
  304    00:E844  A0 07      			ldy	#7
  305    00:E846  31 9C      			and	[spr_ptr], y
  306    00:E848  05 00      			ora	<__temp
  307    00:E84A  91 9C      			sta	[spr_ptr], y
  308    00:E84C  60         			rts
  309                        	
  310                        	
  311                        	
  312                        	; ***************************************************************************
  313                        	; ***************************************************************************
  314                        	;
  315                        	; void __fastcall spr_pal( unsigned char palette<acc> )
  316                        	
  317    00:E84D  29 0F      	_spr_pal.1:	and	#$0F
  318    00:E84F  85 00      			sta	<__temp
  319    00:E851  A0 06      			ldy	#6
  320    00:E853  B1 9C      			lda	[spr_ptr], y
  321    00:E855  29 F0      			and	#$F0
  322    00:E857  05 00      			ora	<__temp
  323    00:E859  91 9C      			sta	[spr_ptr], y
  324    00:E85B  60         			rts
  325                        	
  326                        	
  327                        	
  328                        	; ***************************************************************************
  329                        	; ***************************************************************************
  330                        	;
  331                        	; void __fastcall spr_pri( unsigned char priority<acc> )
  332                        	
  333    00:E85C  C9 01      	_spr_pri.1:	cmp	#1
  334    00:E85E  A0 06      			ldy	#6
  335    00:E860  B1 9C      			lda	[spr_ptr], y
  336    00:E862  29 7F      			and	#$7F
  337    00:E864  90 02      			bcc	!+
  338    00:E866  09 80      			ora	#$80
  339    00:E868  91 9C      	!:		sta	[spr_ptr], y
  340    00:E86A  60         			rts
  341                        	
  342                        	
  343                        	
  344                        	; ***************************************************************************
  345                        	; ***************************************************************************
  346                        	;
  347                        	; unsigned int __fastcall spr_get_x( void );
  348                        	
  349    00:E86B  38         	_spr_get_x:	sec
  350    00:E86C  A0 02      			ldy	#2
  351    00:E86E  B1 9C      			lda	[spr_ptr], y
  352    00:E870  E9 20      			sbc	#32
  353    00:E872  AA         			tax
  354    00:E873  C8         			iny
  355    00:E874  B1 9C      			lda	[spr_ptr], y
  356    00:E876  E9 00      			sbc	#0
  357    00:E878  A8         			tay
  358    00:E879  8A         			txa
  359    00:E87A  60         			rts
  360                        	
  361                        	
  362                        	
  363                        	; ***************************************************************************
  364                        	; ***************************************************************************
  365                        	;
  366                        	; unsigned int __fastcall spr_get_y( void );
  367                        	
  368    00:E87B  38         	_spr_get_y:	sec
  369    00:E87C  B2 9C      			lda	[spr_ptr]
  370    00:E87E  E9 40      			sbc	#64
  371    00:E880  AA         			tax
  372    00:E881  A0 01      			ldy	#1
  373    00:E883  B1 9C      			lda	[spr_ptr], y
  374    00:E885  E9 00      			sbc	#0
  375    00:E887  A8         			tay
  376    00:E888  8A         			txa
  377    00:E889  60         			rts
  378                        	
  379                        	
  380                        	
  381               0001     		.if	SUPPORT_SGX
  382                        	
  383                        	; ***************************************************************************
  384                        	; ***************************************************************************
  385                        	;
  386                        	; void __fastcall sgx_spr_set( unsigned char num<acc> );
  387                        	
  388    00:E88A  CD 94 26   	_sgx_spr_set.1:	cmp	sgx_spr_max
  389    00:E88D  90 03      			bcc	!+
  390    00:E88F  8D 94 26   			sta	sgx_spr_max
  391    00:E892  A0 29      	!:		ldy.h	#sgx_spr_sat
  392    00:E894  0A         			asl	a
  393    00:E895  0A         			asl	a
  394    00:E896  0A         			asl	a
  395    00:E897  90 02      			bcc	!+
  396    00:E899  C8         			iny
  397    00:E89A  18         			clc
  398    00:E89B  69 B0      	!:		adc.l	#sgx_spr_sat
  399    00:E89D  85 9E      			sta.l	<sgx_spr_ptr
  400    00:E89F  90 01      			bcc	!+
  401    00:E8A1  C8         			iny
  402    00:E8A2  84 9F      	!:		sty.h	<sgx_spr_ptr
  403    00:E8A4  60         			rts
  404                        	
  405                        	
  406                        	
  407                        	; ***************************************************************************
  408                        	; ***************************************************************************
  409                        	;
  410                        	; void __fastcall sgx_spr_hide( void );
  411                        	
  412    00:E8A5  A0 01      	_sgx_spr_hide:	ldy	#1
  413    00:E8A7  B1 9E      			lda	[sgx_spr_ptr], y
  414    00:E8A9  09 02      			ora	#2
  415    00:E8AB  91 9E      			sta	[sgx_spr_ptr], y
  416    00:E8AD  60         			rts
  417                        	
  418                        	
  419                        	
  420                        	; ***************************************************************************
  421                        	; ***************************************************************************
  422                        	;
  423                        	; void __fastcall sgx_spr_show( void );
  424                        	
  425    00:E8AE  A0 01      	_sgx_spr_show:	ldy	#1
  426    00:E8B0  B1 9E      			lda	[sgx_spr_ptr], y
  427    00:E8B2  29 01      			and	#1
  428    00:E8B4  91 9E      			sta	[sgx_spr_ptr], y
  429    00:E8B6  60         			rts
  430                        	
  431                        	
  432                        	
  433                        	; ***************************************************************************
  434                        	; ***************************************************************************
  435                        	;
  436                        	; void __fastcall sgx_spr_x( unsigned int value<acc> );
  437                        	
  438    00:E8B7  02         	_sgx_spr_x.1:	sxy
  439    00:E8B8  18         			clc
  440    00:E8B9  69 20      			adc	#32
  441    00:E8BB  A0 02      			ldy	#2
  442    00:E8BD  91 9E      			sta	[sgx_spr_ptr], y
  443    00:E8BF  8A         			txa
  444    00:E8C0  69 00      			adc	#0
  445    00:E8C2  C8         			iny
  446    00:E8C3  91 9E      			sta	[sgx_spr_ptr], y
  447    00:E8C5  60         			rts
  448                        	
  449                        	
  450                        	
  451                        	; ***************************************************************************
  452                        	; ***************************************************************************
  453                        	;
  454                        	; void __fastcall sgx_spr_y( unsigned int value<acc> );
  455                        	
  456    00:E8C6  18         	_sgx_spr_y.1:	clc
  457    00:E8C7  69 40      			adc	#64
  458    00:E8C9  92 9E      			sta	[sgx_spr_ptr]
  459    00:E8CB  98         			tya
  460    00:E8CC  69 00      			adc	#0
  461    00:E8CE  A0 01      			ldy	#1
  462    00:E8D0  91 9E      			sta	[sgx_spr_ptr], y
  463    00:E8D2  60         			rts
  464                        			
  465                        	
  466                        	
  467                        	; ***************************************************************************
  468                        	; ***************************************************************************
  469                        	;
  470                        	; void __fastcall sgx_spr_pattern( unsigned int vaddr<acc> );
  471                        	
  472    00:E8D3             	_sgx_spr_pattern.1:
  473    00:E8D3  84 00      			sty	<__temp		;     zp=fedcba98 a=76543210
  474    00:E8D5  0A         			asl	a		; c=f zp=edcba987 a=6543210_
  475    00:E8D6  26 00      			rol	<__temp
  476    00:E8D8  2A         			rol	a		; c=e zp=dcba9876 a=543210_f
  477    00:E8D9  26 00      			rol	<__temp
  478    00:E8DB  2A         			rol	a		; c=d zp=cba98765 a=43210_fe
  479    00:E8DC  26 00      			rol	<__temp
  480    00:E8DE  2A         			rol	a		; c=4 zp=cba98765 a=3210_fed
  481    00:E8DF  A0 05      			ldy	#5
  482    00:E8E1  91 9E      			sta	[sgx_spr_ptr], y
  483    00:E8E3  A5 00      			lda	<__temp
  484    00:E8E5  88         			dey
  485    00:E8E6  91 9E      			sta	[sgx_spr_ptr], y
  486    00:E8E8  60         			rts
  487                        	
  488                        	
  489                        	
  490                        	; ***************************************************************************
  491                        	; ***************************************************************************
  492                        	;
  493                        	; void __fastcall sgx_spr_ctrl( unsigned char mask<_al>, unsigned char value<acc> );
  494                        	
  495    00:E8E9  25 F8      	_sgx_spr_ctrl.2:and	<_al
  496    00:E8EB  85 00      			sta	<__temp
  497    00:E8ED  A5 F8      			lda	<_al
  498    00:E8EF  49 FF      			eor	#$FF
  499    00:E8F1  A0 07      			ldy	#7
  500    00:E8F3  31 9E      			and	[sgx_spr_ptr], y
  501    00:E8F5  05 00      			ora	<__temp
  502    00:E8F7  91 9E      			sta	[sgx_spr_ptr], y
  503    00:E8F9  60         			rts
  504                        	
  505                        	
  506                        	
  507                        	; ***************************************************************************
  508                        	; ***************************************************************************
  509                        	;
  510                        	; void __fastcall sgx_spr_pal( unsigned char palette<acc> )
  511                        	
  512    00:E8FA  29 0F      	_sgx_spr_pal.1:	and	#$0F
  513    00:E8FC  85 00      			sta	<__temp
  514    00:E8FE  A0 06      			ldy	#6
  515    00:E900  B1 9E      			lda	[sgx_spr_ptr], y
  516    00:E902  29 F0      			and	#$F0
  517    00:E904  05 00      			ora	<__temp
  518    00:E906  91 9E      			sta	[sgx_spr_ptr], y
  519    00:E908  60         			rts
  520                        	
  521                        	
  522                        	
  523                        	; ***************************************************************************
  524                        	; ***************************************************************************
  525                        	;
  526                        	; void __fastcall sgx_spr_pri( unsigned char priority<acc> )
  527                        	
  528    00:E909  C9 01      	_sgx_spr_pri.1:	cmp	#1
  529    00:E90B  A0 06      			ldy	#6
  530    00:E90D  B1 9E      			lda	[sgx_spr_ptr], y
  531    00:E90F  29 7F      			and	#$7F
  532    00:E911  90 02      			bcc	!+
  533    00:E913  09 80      			ora	#$80
  534    00:E915  91 9E      	!:		sta	[sgx_spr_ptr], y
  535    00:E917  60         			rts
  536                        	
  537                        	
  538                        	
  539                        	; ***************************************************************************
  540                        	; ***************************************************************************
  541                        	;
  542                        	; unsigned int __fastcall sgx_spr_get_x( void );
  543                        	
  544    00:E918  38         	_sgx_spr_get_x:	sec
  545    00:E919  A0 02      			ldy	#2
  546    00:E91B  B1 9E      			lda	[sgx_spr_ptr], y
  547    00:E91D  E9 20      			sbc	#32
  548    00:E91F  AA         			tax
  549    00:E920  C8         			iny
  550    00:E921  B1 9E      			lda	[sgx_spr_ptr], y
  551    00:E923  E9 00      			sbc	#0
  552    00:E925  A8         			tay
  553    00:E926  8A         			txa
  554    00:E927  60         			rts
  555                        	
  556                        	
  557                        	
  558                        	; ***************************************************************************
  559                        	; ***************************************************************************
  560                        	;
  561                        	; unsigned int __fastcall sgx_spr_get_y( void );
  562                        	
  563    00:E928  38         	_sgx_spr_get_y:	sec
  564    00:E929  B2 9E      			lda	[sgx_spr_ptr]
  565    00:E92B  E9 40      			sbc	#64
  566    00:E92D  AA         			tax
  567    00:E92E  A0 01      			ldy	#1
  568    00:E930  B1 9E      			lda	[sgx_spr_ptr], y
  569    00:E932  E9 00      			sbc	#0
  570    00:E934  A8         			tay
  571    00:E935  8A         			txa
  572    00:E936  60         			rts
  573                        	
  574                        		.endif	SUPPORT_SGX
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   76                        		.endif
   77                        	
   78               0001     		.ifdef	HUCC_USES_BLKMAP		; Set in hucc_blkmap.h
                             #[3]   "..\..\..\include\hucc\blkmap.asm"
   79                        			include	"blkmap.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; blkmap.asm
    5                        	;
    6                        	; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
    7                        	;
    8                        	; Copyright John Brandwood 2025.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
   18                        	;
   19                        	; The maximum total size for a blkmap is 16KBytes, which allows for maps up
   20                        	; to 128x128 blocks (2048x2048 pixels).
   21                        	;
   22                        	; Huge multi-screen blkmaps are also supported (optionally).
   23                        	;
   24                        	; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
   25                        	;
   26                        	; The maximum total size for a multi-screen map is 8KBytes, which allows for
   27                        	; a total of 1024 screens.
   28                        	;
   29                        	; ***************************************************************************
   30                        	; ***************************************************************************
   31                        	
   32                        	;
   33                        	; Include dependancies ...
   34                        	;
   35                        	
   36                        			include "common.asm"		; Common helpers.
   37                        			include "vce.asm"		; Useful VCE routines.
   38                        			include "vdc.asm"		; Useful VCE routines.
   39                        	
   40                        	;
   41                        	; Support large blkmaps up to 16KBytes instead of the regular 8KBytes?
   42                        	;
   43                        	; The maximum X and Y size for regular blkmaps is 128 tiles (2048 pixels).
   44                        	;
   45                        	; This allows for individual maps up to 128x128 tiles (2048x2048 pixels) vs
   46                        	; default limit of 128x64 or 64x128.
   47                        	;
   48                        	
   49               0000     		.ifndef	BLKMAP_LARGEMAP
   51                        		.endif
   52                        	
   53                        	;
   54                        	; Support huge multi-screen maps, up to 32768 pixels wide/high?
   55                        	;
   56                        	; These are sectorized maps split into individual BAT-sized "screens", with
   57                        	; a maximum of 1024 screens per map.
   58                        	;
   59                        	; The BAT size that is used when drawing *must* be the same as the BAT size
   60                        	; that was chosen when creating the multi-screen map.
   61                        	;
   62                        	; Each screen can use a unique set of block definitions, or it might choose
   63                        	; to share the same block definitions that are used on another screen.
   64                        	;
   65                        	; Each screen may choose which 8KByte banks of character data to select for
   66                        	; the 4 banks (32KBytes) of VRAM that its block definitions use, with a max
   67                        	; of 16 banks of characters per multi-screen map.
   68                        	;
   69                        	; Loading those character banks dynamically is an exercise for the user!
   70                        	;
   71                        	; Enabling support adds extra library code, and slightly slows down the use
   72                        	; of regular blkmaps.
   73                        	;
   74                        	
   75               0000     		.ifndef	BLKMAP_MULTISCR
   77                        		.endif
   78                        	
   79                        	;
   80                        	; Block definitions can either use character data from VRAM $1000..$7FFF or
   81                        	; they can be limited to use the 32KByte of characters in VRAM $1000..$4FFF
   82                        	; which then frees up 2-bits for flag information for each character in the
   83                        	; block.
   84                        	;
   85                        	; These 2-bits are perfect for using as collision information in game maps,
   86                        	; allowing storage of states like transparent, solid, up-slope, down-slope.
   87                        	;
   88                        	; Typically this flag information is set by the map conversion tools from a
   89                        	; seperate "collision" map layer.
   90                        	;
   91                        	
   92               0000     		.ifndef	BLKDEF_CHR_FLAG
   94                        		.endif
   95                        	
   96                        	;
   97                        	; Block definitions are accessed in MPR2 ($4000..$5FFF), and must not cross
   98                        	; the bank boundary.
   99                        	;
  100                        	; When working this way, 8 pointers in ZP are used to access the individual
  101                        	; bytes in the block definition. This is fine when using a regular map on a
  102                        	; PC Engine, but it is awfully slow when using multi-screen maps or drawing
  103                        	; maps on both VDC chips in a SuperGRAFX because the pointer values must be
  104                        	; constantly changed.
  105                        	;
  106                        	; When using multi-screen maps, or when developing a SuperGRAFX game, or if
  107                        	; developing a CDROM game, then it is usually preferable to store the block
  108                        	; definitions with 2KByte alignment, especially if they are normally stored
  109                        	; compressed and then decompressed into a 2KByte buffer in RAM when needed.
  110                        	;
  111                        	; This option controls whether the definitions are stored 2KByte aligned or
  112                        	; if pointers should be used instead.
  113                        	;
  114                        	
  115               0000     		.ifndef	BLKDEF_POINTERS
  117                        		.endif
  118                        	
  119                        	;
  120                        	; Add a timing bar to the scroll_map() to see how long the drawing takes?
  121                        	;
  122                        	
  123               0000     		.ifndef	BLKMAP_TIMETEST
  125                        		.endif
  126                        	
  127                        	;
  128                        	;
  129                        	;
  130                        	
  131               0000     		.if	BLKDEF_POINTERS
  144                        		.else
  145                        	
  146                        		; If the block definititions are 2KByte aligned.
  147                        	
  148               4000     	BLK_4000_TL_L	=	$4000
  149               4100     	BLK_4000_TR_L	=	$4100
  150               4200     	BLK_4000_BL_L	=	$4200
  151               4300     	BLK_4000_BR_L	=	$4300
  152               4400     	BLK_4000_TL_H	=	$4400
  153               4500     	BLK_4000_TR_H	=	$4500
  154               4600     	BLK_4000_BL_H	=	$4600
  155               4700     	BLK_4000_BR_H	=	$4700
  156                        	
  157               4800     	BLK_4800_TL_L	=	$4800
  158               4900     	BLK_4800_TR_L	=	$4900
  159               4A00     	BLK_4800_BL_L	=	$4A00
  160               4B00     	BLK_4800_BR_L	=	$4B00
  161               4C00     	BLK_4800_TL_H	=	$4C00
  162               4D00     	BLK_4800_TR_H	=	$4D00
  163               4E00     	BLK_4800_BL_H	=	$4E00
  164               4F00     	BLK_4800_BR_H	=	$4F00
  165                        	
  166               5000     	BLK_5000_TL_L	=	$5000
  167               5100     	BLK_5000_TR_L	=	$5100
  168               5200     	BLK_5000_BL_L	=	$5200
  169               5300     	BLK_5000_BR_L	=	$5300
  170               5400     	BLK_5000_TL_H	=	$5400
  171               5500     	BLK_5000_TR_H	=	$5500
  172               5600     	BLK_5000_BL_H	=	$5600
  173               5700     	BLK_5000_BR_H	=	$5700
  174                        	
  175               5800     	BLK_5800_TL_L	=	$5800
  176               5900     	BLK_5800_TR_L	=	$5900
  177               5A00     	BLK_5800_BL_L	=	$5A00
  178               5B00     	BLK_5800_BR_L	=	$5B00
  179               5C00     	BLK_5800_TL_H	=	$5C00
  180               5D00     	BLK_5800_TR_H	=	$5D00
  181               5E00     	BLK_5800_BL_H	=	$5E00
  182               5F00     	BLK_5800_BR_H	=	$5F00
  183                        	
  184                        		.endif
  185                        	
  186               0080     	MAP_UNALIGNED_X	=	$80
  187               0040     	MAP_UNALIGNED_Y	=	$40
  188                        	
  189                        	;
  190                        	;
  191                        	;
  192                        	
  193               2BB0     			.bss
  194                        	
  195                        	; **************
  196                        	; 8-byte (or 2-byte) entry for each SCREEN in the MULTI_MAP.
  197                        	
  198               0000     			.rsset	0
  199               0000     		.if	BLKDEF_POINTERS
  202                        		.else
  203               0000     	SCR_MAP_PAGE	.rs	1	; 256-byte aligned.
  204               0001     	SCR_MAP_BANK	.rs	1
  205               0002     	SCR_BLK_PAGE	.rs	1	; >$4000, >$4800, >$5000, or >$5800.
  206               0003     	SCR_BLK_BANK	.rs	1
  207               0004     	SCR_TBL_PAGE	.rs	1	; 256-byte aligned.
  208               0005     	SCR_TBL_BANK	.rs	1
  209               0006     	SCR_CHR_12	.rs	1	; Which CHR banks are used by the BLK, with
  210               0007     	SCR_CHR_34	.rs	1	; a max of 16 CHR banks per MULTI_MAP.
  211                        		.endif
  212                        	
  213                        			; A simple macro to help build a multi-screen map.
  214                        	
  215               0000     		.ifndef	SCREEN
  224                        		.endif
  225                        	
  226    F8:2BB0             	map_blk_flag:	ds	1	; Returned from _get_map_block().
  227    F8:2BB1             	map_blk_mask:	ds	1	; Returned from _get_map_block().
  228                        	
  229                        	; **************
  230                        	; 16-bytes of VDC blkmap info.
  231                        	;
  232                        	; N.B. MUST be 16-bytes before the SGX versions to use PCE_VDC_OFFSET.
  233                        	
  234    F8:2BB2             	vdc_old_chr_x:	ds	1	; Previous top-left X in CHR (lo-byte only).
  235    F8:2BB3             	vdc_old_chr_y:	ds	1	; Previous top-left Y in CHR (lo-byte only).
  236                        	
  237    F8:2BB4             	vdc_tbl_addr:	ds	2	; 256-byte aligned.
  238    F8:2BB6             	vdc_tbl_bank:	ds	1
  239                        	
  240    F8:2BB7             	vdc_blk_addr:	ds	2	; 2KBytes of data, 256-byte aligned.
  241    F8:2BB9             	vdc_blk_bank:	ds	1
  242                        	
  243    F8:2BBA             	vdc_map_addr:	ds	2	; Mapped into MPR3..MPR5, max 16KBytes.
  244    F8:2BBC             	vdc_map_bank:	ds	1
  245                        	
  246    F8:2BBD             	vdc_scr_addr:	ds	2	; 8KByte maximum size.
  247    F8:2BBF             	vdc_scr_bank:	ds	1
  248    F8:2BC0             	vdc_scr_chr12:	ds	1	; Which CHR banks are used by the BLK, with
  249    F8:2BC1             	vdc_scr_chr34:	ds	1	; a max of 16 banks per multi-screen map.
  250                        	
  251               0001     		.if	SUPPORT_SGX
  252                        	
  253                        	; **************
  254                        	; 16-bytes of SGX blkmap info.
  255                        	;
  256                        	; N.B. MUST be 16-bytes after the VDC versions to use SGX_VDC_OFFSET.
  257                        	
  258    F8:2BC2             	sgx_old_chr_x:	ds	1	; Previous top-left X in CHR (lo-byte only).
  259    F8:2BC3             	sgx_old_chr_y:	ds	1	; Previous top-left Y in CHR (lo-byte only).
  260                        	
  261    F8:2BC4             	sgx_tbl_addr:	ds	2	; 256-byte aligned.
  262    F8:2BC6             	sgx_tbl_bank:	ds	1
  263                        	
  264    F8:2BC7             	sgx_blk_addr:	ds	2	; 2KBytes of data, 256-byte aligned.
  265    F8:2BC9             	sgx_blk_bank:	ds	1
  266                        	
  267    F8:2BCA             	sgx_map_addr:	ds	2	; Mapped into MPR3..MPR4, max 8KBytes.
  268    F8:2BCC             	sgx_map_bank:	ds	1
  269                        	
  270    F8:2BCD             	sgx_scr_addr:	ds	2	; 8KByte maximum size.
  271    F8:2BCF             	sgx_scr_bank:	ds	1
  272    F8:2BD0             	sgx_scr_chr12:	ds	1	; Which CHR banks are used by the BLK, with
  273    F8:2BD1             	sgx_scr_chr34:	ds	1	; a max of 16 banks per multi-screen map.
  274                        	
  275                        		.endif	SUPPORT_SGX
  276                        	
  277               0000     		.if	0
  310                        		.endif	0
  311                        	
  312                        	; **************
  313                        	; Aliases for the asm variable names in HuCC.
  314                        	;
  315                        	
  316               0001     		.ifdef	HUCC
  317                        	
  318    F8:2BD2             	_map_blk_flag	.alias	map_blk_flag
  319    F8:2BD2             	_map_blk_mask	.alias	map_blk_mask
  320                        	
  321    F8:2BD2             	_vdc_map_draw_w	.alias	vdc_map_draw_w
  322    F8:2BD2             	_vdc_map_draw_h	.alias	vdc_map_draw_h
  323    F8:2BD2             	_vdc_map_pxl_x	.alias	vdc_map_pxl_x
  324    F8:2BD2             	_vdc_map_pxl_y	.alias	vdc_map_pxl_y
  325    F8:2BD2             	_vdc_old_chr_x	.alias	vdc_old_chr_x
  326    F8:2BD2             	_vdc_old_chr_y	.alias	vdc_old_chr_y
  327    F8:2BD2             	_vdc_tbl_addr	.alias	vdc_tbl_addr
  328    F8:2BD2             	_vdc_tbl_bank	.alias	vdc_tbl_bank
  329    F8:2BD2             	_vdc_blk_addr	.alias	vdc_blk_addr
  330    F8:2BD2             	_vdc_blk_bank	.alias	vdc_blk_bank
  331    F8:2BD2             	_vdc_map_line_w	.alias	vdc_map_line_w
  332    F8:2BD2             	_vdc_map_scrn_w	.alias	vdc_map_scrn_w
  333    F8:2BD2             	_vdc_map_addr	.alias	vdc_map_addr
  334    F8:2BD2             	_vdc_map_bank	.alias	vdc_map_bank
  335    F8:2BD2             	_vdc_scr_addr	.alias	vdc_scr_addr
  336    F8:2BD2             	_vdc_scr_bank	.alias	vdc_scr_bank
  337    F8:2BD2             	_vdc_scr_chr12	.alias	vdc_scr_chr12
  338    F8:2BD2             	_vdc_scr_chr34	.alias	vdc_scr_chr34
  339                        	
  340               0001     		.if	SUPPORT_SGX
  341    F8:2BD2             	_sgx_map_draw_w	.alias	sgx_map_draw_w
  342    F8:2BD2             	_sgx_map_draw_h	.alias	sgx_map_draw_h
  343    F8:2BD2             	_sgx_map_pxl_x	.alias	sgx_map_pxl_x
  344    F8:2BD2             	_sgx_map_pxl_y	.alias	sgx_map_pxl_y
  345    F8:2BD2             	_sgx_old_chr_x	.alias	sgx_old_chr_x
  346    F8:2BD2             	_sgx_old_chr_y	.alias	sgx_old_chr_y
  347    F8:2BD2             	_sgx_tbl_addr	.alias	sgx_tbl_addr
  348    F8:2BD2             	_sgx_tbl_bank	.alias	sgx_tbl_bank
  349    F8:2BD2             	_sgx_blk_addr	.alias	sgx_blk_addr
  350    F8:2BD2             	_sgx_blk_bank	.alias	sgx_blk_bank
  351    F8:2BD2             	_sgx_map_line_w	.alias	sgx_map_line_w
  352    F8:2BD2             	_sgx_map_scrn_w	.alias	sgx_map_scrn_w
  353    F8:2BD2             	_sgx_map_addr	.alias	sgx_map_addr
  354    F8:2BD2             	_sgx_map_bank	.alias	sgx_map_bank
  355    F8:2BD2             	_sgx_scr_addr	.alias	sgx_scr_addr
  356    F8:2BD2             	_sgx_scr_bank	.alias	sgx_scr_bank
  357    F8:2BD2             	_sgx_scr_chr12	.alias	sgx_scr_chr12
  358    F8:2BD2             	_sgx_scr_chr34	.alias	sgx_scr_chr34
  359                        		.endif	SUPPORT_SGX
  360                        	
  361                        		.endif	HUCC
  362                        	
  363                        	; **************
  364                        	; Temporary variables for drawing, using common zero-page locations.
  365                        	;
  366                        	
  367               20F8     	map_bat_x	=	_al	; Set by draw_map(), scroll_map() if drawing
  368               20F9     	map_bat_y	=	_ah	; aligned, or as parameters to blit_map().
  369                        	
  370               20FA     	map_draw_w	=	_bl	; Set by draw_map(), scroll_map(), but given
  371               20FB     	map_draw_h	=	_bh	; as parameters to blit_map().
  372                        	
  373               20FC     	map_pxl_x	=	_cx	; Set by draw_map(), scroll_map() and also by
  374               20FC     	map_chr_x	=	_cl	; blit__map(), from current vdc_map_pxl_x.
  375               20FD     	map_scrn_x	=	_ch
  376                        	
  377               20FE     	map_pxl_y	=	_dx	; Set by draw_map(), scroll_map() and also by
  378               20FE     	map_chr_y	=	_dl	; blit__map(), from current vdc_map_pxl_y.
  379               20FF     	map_scrn_y	=	_dh
  380                        	
  381               20EE     	map_line	=	_si	; Start of map data line being drawn.
  382                        	
  383               2000     	map_count	=	__temp + 0
  384               2001     	map_drawn	=	__temp + 1
  385                        	
  386               E937     			.code
  387                        	
  388                        	
  389                        	
  390    02:C000             	blkmap_group	.procgroup
  391                        	
  392                        	; ***************************************************************************
  393                        	; ***************************************************************************
  394                        	;
  395                        	; _set_blocks - Initialize the block definition pointers.
  396                        	; _sgx_set_blocks - Initialize the block definition pointers.
  397                        	;
  398                        	; void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blk<_al> );
  399                        	; void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blk<_al> );
  400                        	;
  401                        	
  402               0001     		.if	SUPPORT_SGX
  403                        	
  404    02:C000             			.proc	_sgx_set_blocks.3
  405                        	
  406    02:C000  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  407    02:C002  F0         			db	$F0			; Turn "clx" into a "beq".
  408                        	
  409    02:C003             			.ref	_set_blocks.3
  410                        			.endp
  411                        		.endif
  412                        	
  413    02:C003             			.proc	_set_blocks.3
  414                        	
  415    02:C003  82         			clx				; Offset to PCE VDC.
  416                        	
  417    02:C004  BD B5 2B   			lda.h	vdc_tbl_addr, x		; Remap the address to MPR2.
  418    02:C007  29 1F      			and	#$1F
  419    02:C009  09 40      			ora	#$40
  420    02:C00B  9D B5 2B   			sta.h	vdc_tbl_addr, x
  421                        	
  422    02:C00E  BD B8 2B   			lda.h	vdc_blk_addr, x		; Remap the address to MPR2.
  423    02:C011  29 1F      			and	#$1F
  424    02:C013  09 40      			ora	#$40
  425    02:C015  9D B8 2B   			sta.h	vdc_blk_addr, x
  426                        	
  427               0000     		.if	BLKDEF_POINTERS
  479                        		.endif	BLKDEF_POINTERS
  480                        	
  481                        			leave
         02:C018  4C EF FF   			jmp	leave_proc
  482                        	
  483                        			.endp
  484                        	
  485                        	
  486                        	
  487                        	; ***************************************************************************
  488                        	; ***************************************************************************
  489                        	;
  490                        	; _draw_map - Draw the entire screen at the current coordinates.
  491                        	; _sgx_draw_map - Draw the entire screen at the current coordinates.
  492                        	;
  493                        	; void __fastcall draw_map( void );
  494                        	; void __fastcall sgx_draw_map( void );
  495                        	;
  496                        	
  497               0001     		.if	SUPPORT_SGX
  498                        	
  499    02:C01B             	_sgx_draw_map	.proc
  500                        	
  501    02:C01B  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  502    02:C01D  F0         			db	$F0			; Turn "clx" into a "beq".
  503                        	
  504    02:C01E             			.ref	_draw_map
  505                        			.endp
  506                        		.endif
  507                        	
  508    02:C01E             	_draw_map	.proc
  509                        	
  510    02:C01E  82         			clx				; Offset to PCE VDC.
  511                        	
  512    02:C01F  43 04      			tma2				; Preserve MPR2..MPR4.
  513    02:C021  48         			pha
  514    02:C022  43 08      			tma3
  515    02:C024  48         			pha
  516    02:C025  43 10      			tma4
  517    02:C027  48         			pha
  518               0000     		.if	BLKMAP_LARGEMAP
  521                        		.endif
  522                        	
  523    02:C028  20 2A C1   			jsr	map_pxl_2_chr		; Set up the draw coordinates.
  524                        	
  525    02:C02B  A5 FC      			lda	<map_chr_x		; Reset previous X position.
  526    02:C02D  9D B2 2B   			sta	vdc_old_chr_x, x
  527                        	
  528    02:C030  A5 FE      			lda	<map_chr_y		; Reset previous Y position,
  529    02:C032  1A         			inc	a			; ready to draw multiple rows.
  530    02:C033  9D B3 2B   			sta	vdc_old_chr_y, x
  531                        	
  532    02:C036  BD 7B 26   			lda	vdc_map_draw_w, x	; Draw the whole screen.
  533    02:C039  85 FA      			sta	<map_draw_w
  534    02:C03B  BD 7C 26   			lda	vdc_map_draw_h, x
  535    02:C03E  85 FB      			sta	<map_draw_h
  536                        	
  537    02:C040  20 80 C3   			jsr	map_scroll_y		; Draw N row of CHR to the BAT.
  538                        	
  539               0000     		.if	BLKMAP_LARGEMAP
  542                        		.endif
  543    02:C043  68         			pla				; Restore MPR2..MPR4.
  544    02:C044  53 10      			tam4
  545    02:C046  68         			pla
  546    02:C047  53 08      			tam3
  547    02:C049  68         			pla
  548    02:C04A  53 04      			tam2
  549                        	
  550                        			leave
         02:C04C  4C EF FF   			jmp	leave_proc
  551                        	
  552                        			.endp
  553                        	
  554                        	
  555                        	
  556                        	; ***************************************************************************
  557                        	; ***************************************************************************
  558                        	;
  559                        	; _scroll_map - Draw a single row of CHR into the BAT to update the edge.
  560                        	; _sgx_scroll_map - Draw a single row of CHR into the BAT to update the edge.
  561                        	;
  562                        	; void __fastcall scroll_map( void );
  563                        	; void __fastcall sgx_scroll_map( void );
  564                        	;
  565                        	
  566               0001     		.if	SUPPORT_SGX
  567                        	
  568    02:C04F             	_sgx_scroll_map	.proc
  569                        	
  570    02:C04F  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  571    02:C051  F0         			db	$F0			; Turn "clx" into a "beq".
  572                        	
  573    02:C052             			.ref	_scroll_map
  574                        			.endp
  575                        		.endif
  576                        	
  577    02:C052             	_scroll_map	.proc
  578                        	
  579    02:C052  82         			clx				; Offset to PCE VDC.
  580                        	
  581               0000     		.if	BLKMAP_TIMETEST
  587                        		.endif
  588                        	
  589    02:C053  43 04      			tma2				; Preserve MPR2..MPR4.
  590    02:C055  48         			pha
  591    02:C056  43 08      			tma3
  592    02:C058  48         			pha
  593    02:C059  43 10      			tma4
  594    02:C05B  48         			pha
  595               0000     		.if	BLKMAP_LARGEMAP
  598                        		.endif
  599                        	
  600    02:C05C  20 2A C1   			jsr	map_pxl_2_chr		; Set up the draw coordinates.
  601                        	
  602               0001     		.if	BLKMAP_MULTISCR
  603    02:C05F  A5 FD      			lda	<map_scrn_x		; map_scroll_x can change this!
  604    02:C061  48         			pha
  605                        		.endif
  606                        	
  607    02:C062  BD 7C 26   			lda	vdc_map_draw_h, x	; Draw new LHS or RHS if needed.
  608    02:C065  85 FB      			sta	<map_draw_h
  609                        	;		lda	#1			; map_scroll_x only ever draws a
  610                        	;		sta	<map_draw_w		; single column.
  611    02:C067  20 61 C2   			jsr	map_scroll_x
  612                        	
  613    02:C06A  BD B2 2B   			lda	vdc_old_chr_x, x	; Restore map_chr_x which could
  614    02:C06D  85 FC      			sta	<map_chr_x		; be changed by map_scroll_x.
  615                        	
  616               0001     		.if	BLKMAP_MULTISCR
  617    02:C06F  68         			pla				; Restore before map_scroll_y.
  618    02:C070  85 FD      			sta	<map_scrn_x
  619                        		.endif
  620                        	
  621    02:C072  BD 7B 26   			lda	vdc_map_draw_w, x	; Draw new TOP or BTM if needed.
  622    02:C075  85 FA      			sta	<map_draw_w
  623    02:C077  A9 01      			lda	#1
  624    02:C079  85 FB      			sta	<map_draw_h
  625    02:C07B  20 80 C3   			jsr	map_scroll_y
  626                        	
  627               0000     		.if	BLKMAP_LARGEMAP
  630                        		.endif
  631    02:C07E  68         			pla				; Restore MPR2..MPR4.
  632    02:C07F  53 10      			tam4
  633    02:C081  68         			pla
  634    02:C082  53 08      			tam3
  635    02:C084  68         			pla
  636    02:C085  53 04      			tam2
  637                        	
  638               0000     		.if	BLKMAP_TIMETEST
  640                        		.endif
  641                        	
  642                        			leave
         02:C087  4C EF FF   			jmp	leave_proc
  643                        	
  644                        			.endp
  645                        	
  646                        	
  647                        	
  648                        	; ***************************************************************************
  649                        	; ***************************************************************************
  650                        	;
  651                        	; _blit_map - Draw a map rectangle to specific BAT coordinates.
  652                        	; _sgx_blit_map - Draw a map rectangle to specific BAT coordinates.
  653                        	;
  654                        	; void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
  655                        	; void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
  656                        	;
  657                        	; Normally you'd just use _draw_map() and _scroll_map(), but for those folks
  658                        	; who really wish to take manual control, you can use this.
  659                        	;
  660                        	
  661               0001     		.if	SUPPORT_SGX
  662                        	
  663                        	_sgx_blit_map	.proc
  669                        			.endp
  670                        		.endif
  671                        	
  672    02:C08A             	_blit_map	.proc
  673                        	
  674    02:C08A  82         			clx				; Offset to PCE VDC.
  675                        	
  676    02:C08B  BD BF 2B   			lda	vdc_scr_bank, x		; Skip this if a multi-screen
  677    02:C08E  D0 36      			bne	.exit			; blkmap.
  678                        	
  679    02:C090  43 04      			tma2				; Preserve MPR2..MPR4.
  680    02:C092  48         			pha
  681    02:C093  43 08      			tma3
  682    02:C095  48         			pha
  683    02:C096  43 10      			tma4
  684    02:C098  48         			pha
  685               0000     		.if	BLKMAP_LARGEMAP
  688                        		.endif
  689                        	
  690    02:C099  BD 83 26   			lda	vdc_map_option, x	; Preserve current map options.
  691    02:C09C  48         			pha
  692    02:C09D  09 C0      			ora	#MAP_UNALIGNED_X | MAP_UNALIGNED_Y
  693    02:C09F  9D 83 26   			sta	vdc_map_option, x
  694                        	
  695    02:C0A2  20 2A C1   			jsr	map_pxl_2_chr		; Set up the draw coordinates.
  696                        	
  697    02:C0A5  A5 FA      			lda	<map_draw_w		; Are we drawing just 1 column?
  698    02:C0A7  C9 01      			cmp	#1
  699    02:C0A9  F0 1E      			beq	.draw_column
  700                        	
  701                        			; Draw N rows.
  702                        	
  703    02:C0AB  A5 FC      	.draw_rows:	lda	<map_chr_x		; Reset previous X position.
  704    02:C0AD  9D B2 2B   			sta	vdc_old_chr_x, x
  705                        	
  706    02:C0B0  A5 FE      			lda	<map_chr_y		; Reset previous Y position,
  707    02:C0B2  1A         			inc	a			; ready to draw rows upwards.
  708    02:C0B3  9D B3 2B   			sta	vdc_old_chr_y, x
  709                        	
  710    02:C0B6  20 80 C3   			jsr	map_scroll_y		; Draw a row of CHR to the BAT.
  711                        	
  712                        			; Drawing completed.
  713                        	
  714    02:C0B9  68         	.finished:	pla				; Restore previous map options.
  715    02:C0BA  9D 83 26   			sta	vdc_map_option, x
  716                        	
  717               0000     		.if	BLKMAP_LARGEMAP
  720                        		.endif
  721    02:C0BD  68         			pla				; Restore MPR2..MPR4.
  722    02:C0BE  53 10      			tam4
  723    02:C0C0  68         			pla
  724    02:C0C1  53 08      			tam3
  725    02:C0C3  68         			pla
  726    02:C0C4  53 04      			tam2
  727                        	
  728                        	.exit:		leave
         02:C0C6  4C EF FF   			jmp	leave_proc
  729                        	
  730                        			; Draw 1 column.
  731                        	
  732    02:C0C9  A5 FC      	.draw_column:	lda	<map_chr_x		; Reset previous X position.
  733    02:C0CB  1A         			inc	a			; ready to draw 1 column.
  734    02:C0CC  9D B2 2B   			sta	vdc_old_chr_x, x
  735                        	
  736    02:C0CF  A5 FE      			lda	<map_chr_y		; Reset previous Y position.
  737    02:C0D1  9D B3 2B   			sta	vdc_old_chr_y, x
  738                        	
  739    02:C0D4  20 61 C2   			jsr	map_scroll_x		; Draw a single column of CHR.
  740                        	
  741    02:C0D7  80 E0      			bra	.finished
  742                        	
  743                        			.endp
  744                        	
  745                        	
  746                        	
  747                        	; ***************************************************************************
  748                        	; ***************************************************************************
  749                        	;
  750                        	; _get_map_block - Get the block number used at a map pixel coordinate.
  751                        	; _sgx_get_map_block - Get the block number used at a map pixel coordinate.
  752                        	;
  753                        	; unsigned char __fastcall _get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
  754                        	; unsigned char __fastcall _sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
  755                        	;
  756                        	
  757               0001     		.if	SUPPORT_SGX
  758                        	
  759                        			.proc	_sgx_get_map_block.2
  765                        			.endp
  766                        		.endif
  767                        	
  768    02:C0D9             			.proc	_get_map_block.2
  769                        	
  770    02:C0D9  82         			clx				; Offset to PCE VDC.
  771                        	
  772    02:C0DA  43 04      			tma2				; Preserve MPR2..MPR4.
  773    02:C0DC  48         			pha
  774    02:C0DD  43 08      			tma3
  775    02:C0DF  48         			pha
  776    02:C0E0  43 10      			tma4
  777    02:C0E2  48         			pha
  778               0000     		.if	BLKMAP_LARGEMAP
  781                        		.endif
  782                        	
  783    02:C0E3  20 3E C1   			jsr	xvt_pxl_2_chr		; Set up the query coordinates.
  784                        	
  785    02:C0E6  20 6C C1   			jsr	map_chr_2_data		; Page in the map address.
  786                        	
  787    02:C0E9  B2 EC      			lda	[_bp]			; Read the BLK from the map.
  788    02:C0EB  A8         			tay
  789                        	
  790    02:C0EC  A5 FC      			lda	<map_chr_x		; Calc the BLK address offset
  791    02:C0EE  4A         			lsr	a			; use depending upon even/odd
  792    02:C0EF  A5 FE      			lda	<map_chr_y		; CHR coordinates (not BAT to
  793    02:C0F1  29 01      			and	#1			; support unaligned drawing).
  794    02:C0F3  2A         			rol	a
  795    02:C0F4  09 04      			ora	#4			; Offset to BLK table top byte.
  796    02:C0F6  7D B8 2B   			adc.h	vdc_blk_addr, x		; What is the BLK data address?
  797    02:C0F9  85 ED      			sta.h	<_bp			; $4000, $4800, $5000 or $5800.
  798    02:C0FB  64 EC      			stz.l	<_bp
  799    02:C0FD  B1 EC      			lda	[_bp], y		; Read the collision flags from
  800    02:C0FF  29 0C      			and	#%00001100		; the top byte of the CHR.
  801    02:C101  4A         			lsr	a
  802    02:C102  4A         			lsr	a
  803    02:C103  4A         			lsr	a			; Swizzle the bottom bit to get
  804    02:C104  90 02      			bcc	!+			; the same bit order as used in
  805    02:C106  09 02      			ora	#2			; .HALTMAP layer.
  806    02:C108  8D B0 2B   	!:		sta	map_blk_flag
  807                        	
  808    02:C10B  BD B6 2B   			lda	vdc_tbl_bank, x		; Is there a table of flags?
  809    02:C10E  F0 09      			beq	!+
  810    02:C110  53 08      			tam3
  811                        	;		inc	a
  812                        	;		tam4
  813                        	;		lda.l	vdc_tbl_addr, x
  814                        	;		sta.l	<_bp
  815    02:C112  BD B5 2B   			lda.h	vdc_tbl_addr, x		; If so, it must be aligned!
  816    02:C115  85 ED      			sta.h	<_bp
  817    02:C117  B1 EC      			lda	[_bp], y		; Read the .MASKMAP/.OVERMAP
  818    02:C119  8D B1 2B   	!:		sta	map_blk_mask		; flag value for this BLK.
  819                        	
  820               0000     		.if	BLKMAP_LARGEMAP
  823                        		.endif
  824    02:C11C  68         			pla				; Restore MPR2..MPR4.
  825    02:C11D  53 10      			tam4
  826    02:C11F  68         			pla
  827    02:C120  53 08      			tam3
  828    02:C122  68         			pla
  829    02:C123  53 04      			tam2
  830                        	
  831    02:C125  02         			sxy				; Put the BLK number in X.
  832    02:C126  C2         			cly
  833                        	
  834                        			leave				; All done!
         02:C127  4C EF FF   			jmp	leave_proc
  835                        	
  836                        			.endp
  837                        	
  838                        	
  839                        	
  840                        	; ***************************************************************************
  841                        	; ***************************************************************************
  842                        	;
  843                        	; map_pxl_2_chr - Convert PXL to CHR, BLK and SCR coordinates.
  844                        	;
  845                        	
  846    02:C12A  BD 81 26   	map_pxl_2_chr:	lda.l	vdc_map_pxl_y, x	; Get current map Y coordinate.
  847    02:C12D  85 FE      			sta.l	<map_pxl_y
  848    02:C12F  BD 82 26   			lda.h	vdc_map_pxl_y, x
  849    02:C132  85 FF      			sta.h	<map_pxl_y
  850                        	
  851    02:C134  BD 7F 26   			lda.l	vdc_map_pxl_x, x	; Get current map X coordinate.
  852    02:C137  85 FC      			sta.l	<map_pxl_x
  853    02:C139  BD 80 26   			lda.h	vdc_map_pxl_x, x
  854    02:C13C  85 FD      			sta.h	<map_pxl_x
  855                        	
  856    02:C13E  A5 FD      	xvt_pxl_2_chr:	lda.h	<map_pxl_x		; Xvert map_pxl_x to map_chr_x.
  857               0001     		.if	BLKMAP_MULTISCR
  858    02:C140  A8         			tay				; Xvert map_pxl_x to map_scrn_x.
  859    02:C141  3C 76 26   			bit	vdc_bat_width, x
  860    02:C144  70 03      			bvs	.w64
  861    02:C146  10 02      			bpl	.w32
  862    02:C148  4A         	.w128:		lsr	a
  863    02:C149  4A         	.w64:		lsr	a
  864    02:C14A  85 FD      	.w32:		sta	<map_scrn_x
  865    02:C14C  98         			tya
  866                        		.endif
  867    02:C14D  4A         			lsr	a
  868    02:C14E  66 FC      			ror.l	<map_pxl_x
  869    02:C150  4A         			lsr	a
  870    02:C151  66 FC      			ror.l	<map_pxl_x
  871    02:C153  4A         			lsr	a
  872    02:C154  66 FC      			ror.l	<map_pxl_x		; Max map width is 256 CHR.
  873                        	
  874    02:C156  A5 FF      			lda.h	<map_pxl_y		; Xvert map_pxl_y to map_chr_y.
  875               0001     		.if	BLKMAP_MULTISCR
  876    02:C158  A8         			tay				; Xvert map_pxl_y to map_scrn_y.
  877    02:C159  3C 77 26   			bit	vdc_bat_height, x
  878    02:C15C  50 01      			bvc	.h32
  879    02:C15E  4A         	.h64:		lsr	a
  880    02:C15F  85 FF      	.h32:		sta	<map_scrn_y
  881    02:C161  98         			tya
  882                        		.endif
  883    02:C162  4A         			lsr	a
  884    02:C163  66 FE      			ror.l	<map_pxl_y
  885    02:C165  4A         			lsr	a
  886    02:C166  66 FE      			ror.l	<map_pxl_y
  887    02:C168  4A         			lsr	a
  888    02:C169  66 FE      			ror.l	<map_pxl_y		; Max map width is 256 CHR.
  889                        	
  890    02:C16B  60         			rts
  891                        	
  892                        	
  893                        	
  894                        	; ***************************************************************************
  895                        	; ***************************************************************************
  896                        	;
  897                        	; map_chr_2_data - Page in the MAP address for the CHR coordinates.
  898                        	;
  899                        	
  900    02:C16C             	map_chr_2_data:
  901                        	
  902               0001     		.if	BLKMAP_MULTISCR
  903                        	
  904                        			; Initialization for a multi-screen map.
  905                        	
  906    02:C16C  BD BF 2B   			lda	vdc_scr_bank, x		; Skip this if regular blkmap.
  907    02:C16F  F0 3A      			beq	.regular
  908                        	
  909    02:C171  A5 FC      	.multiscreen:	lda	<map_chr_x		; Compare old_x with cur_x.
  910    02:C173  3D 78 26   			and	vdc_bat_x_mask, x
  911    02:C176  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
  912                        	
  913    02:C178  A5 FE      			lda	<map_chr_y		; Save BAT Y chr coordinate.
  914    02:C17A  3D 79 26   			and	vdc_bat_y_mask, x
  915    02:C17D  85 F9      			sta	<map_bat_y
  916    02:C17F  4A         			lsr	a			; Map BLK Y coordinate.
  917    02:C180  85 EF      			sta.h	<map_line
  918    02:C182  62         			cla
  919    02:C183  3C 76 26   			bit	vdc_bat_width, x
  920    02:C186  30 08      			bmi	.w128
  921    02:C188  70 03      			bvs	.w64
  922    02:C18A  46 EF      	.w32:		lsr.h	<map_line
  923    02:C18C  6A         			ror	a
  924    02:C18D  46 EF      	.w64:		lsr.h	<map_line
  925    02:C18F  6A         			ror	a
  926    02:C190  46 EF      	.w128:		lsr.h	<map_line
  927    02:C192  6A         			ror	a
  928    02:C193  46 EF      			lsr.h	<map_line		; Hi-byte of (BLK Y * width).
  929    02:C195  6A         			ror	a
  930    02:C196  85 EE      			sta.l	<map_line		; Lo-byte of (BLK Y * width).
  931                        	
  932    02:C198  20 EC C1   			jsr	map_set_screen		; Put BLK & MAP in MPR2-MPR5.
  933                        	
  934    02:C19B  A5 F8      			lda	<map_bat_x		; Calc map data pointer.
  935    02:C19D  4A         			lsr	a			; Map BLK X coordinate.
  936    02:C19E  05 EE      			ora.l	<map_line
  937    02:C1A0  85 EC      			sta.l	<_bp
  938    02:C1A2  A5 EF      			lda.h	<map_line
  939    02:C1A4  18         			clc
  940    02:C1A5  7D BB 2B   			adc.h	vdc_map_addr, x		; N.B. 256-byte aligned!
  941    02:C1A8  85 ED      			sta.h	<_bp
  942                        	
  943    02:C1AA  60         			rts
  944                        	
  945                        		.endif	BLKMAP_MULTISCR
  946                        	
  947                        			; Initialization for a regular map.
  948                        	
  949    02:C1AB  A5 FC      	.regular:	lda	<map_chr_x		; Compare old_x with cur_x.
  950                        	;		bit	vdc_map_option, x	; Set bit7 to disable aligning
  951                        	;		bmi	!+			; BAT X with the map X.
  952    02:C1AD  3D 78 26   			and	vdc_bat_x_mask, x
  953    02:C1B0  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
  954                        	
  955    02:C1B2  A5 FE      	!:		lda	<map_chr_y		; A = map CHR Y coordinate.
  956    02:C1B4  A8         			tay
  957    02:C1B5  4A         			lsr	a
  958    02:C1B6  42         			say				; Y = map BLK Y coordinate.
  959                        	
  960                        	;		bit	vdc_map_option, x	; Set bit6 to disable aligning
  961                        	;		bvs	!+			; BAT Y with the map Y.
  962    02:C1B7  3D 79 26   			and	vdc_bat_y_mask, x
  963    02:C1BA  85 F9      			sta	<map_bat_y		; Save BAT Y chr coordinate.
  964                        	
  965               0000     		.if	BLKMAP_LARGEMAP
  970                        		.endif
  971                        	
  972    02:C1BC  BD 7D 26   	!:		lda	vdc_map_line_w, x	; Map width in BLK.
  973               0000     		.if	FAST_MULTIPLY
  986                        		.else
  987    02:C1BF  84 EF      			sty.h	<map_line		; Takes 144..176 cycles.
  988    02:C1C1  A0 08      			ldy	#8
  989    02:C1C3  4A         			lsr	a
  990    02:C1C4  85 EE      			sta.l	<map_line
  991    02:C1C6  62         			cla
  992    02:C1C7  90 03      			bcc	.rotate
  993    02:C1C9  18         	.add:		clc
  994    02:C1CA  65 EF      			adc.h	<map_line
  995    02:C1CC  6A         	.rotate:	ror	a
  996    02:C1CD  66 EE      			ror.l	<map_line		; Lo-byte of (BLK Y * width).
  997    02:C1CF  88         			dey
  998    02:C1D0  B0 F7      			bcs	.add
  999    02:C1D2  D0 F8      			bne	.rotate
 1000    02:C1D4  A8         			tay				; Hi-byte of (BLK Y * width).
 1001                        		.endif
 1002                        	
 1003    02:C1D5  A5 FC      	!:		lda	<map_chr_x		; Map CHR X coordinate.
 1004    02:C1D7  4A         			lsr	a			; Map BLK X coordinate.
 1005    02:C1D8  18         			clc
 1006    02:C1D9  65 EE      			adc.l	<map_line		; Lo-byte of (BLK Y * width).
 1007    02:C1DB  90 01      			bcc	!+
 1008    02:C1DD  C8         			iny				; Hi-byte of (BLK Y * width).
 1009                        	
 1010    02:C1DE  18         	!:		clc				; Calc map data pointer.
 1011    02:C1DF  7D BA 2B   			adc.l	vdc_map_addr, x
 1012    02:C1E2  85 EC      			sta.l	<_bp			; Maximum map size is 16KBytes
 1013    02:C1E4  98         			tya				; so we don't need to consider
 1014    02:C1E5  7D BB 2B   			adc.h	vdc_map_addr, x		; bank overflow.
 1015    02:C1E8  85 ED      			sta.h	<_bp
 1016                        	
 1017    02:C1EA  80 66      			bra	map_set_banks		; Put BLK & MAP in MPR2-MPR5.
 1018                        	
 1019                        	
 1020                        	
 1021               0001     		.if	BLKMAP_MULTISCR
 1022                        	
 1023                        	; ***************************************************************************
 1024                        	; ***************************************************************************
 1025                        	;
 1026                        	; map_set_screen -
 1027                        	;
 1028                        	; Maximum X and Y dimension of 128 screens (32768 pixels).
 1029                        	; Maximum 8KByte total size of screen data (1024 screens).
 1030                        	;
 1031                        	
 1032    02:C1EC  A4 FF      	map_set_screen:	ldy	<map_scrn_y		; Map SCR Y coordinate.
 1033    02:C1EE  BD 7E 26   			lda	vdc_map_scrn_w, x	; Map width in SCREENS.
 1034                        	
 1035               0000     		.if	FAST_MULTIPLY
 1048                        		.else
 1049    02:C1F1  84 ED      			sty.h	<_bp			; Takes 144..176 cycles.
 1050    02:C1F3  A0 08      			ldy	#8
 1051    02:C1F5  4A         			lsr	a
 1052    02:C1F6  85 EC      			sta.l	<_bp
 1053    02:C1F8  62         			cla
 1054    02:C1F9  90 03      			bcc	.rotate
 1055    02:C1FB  18         	.add:		clc
 1056    02:C1FC  65 ED      			adc.h	<_bp
 1057    02:C1FE  6A         	.rotate:	ror	a
 1058    02:C1FF  66 EC      			ror.l	<_bp			; Lo-byte of (SCR Y * width).
 1059    02:C201  88         			dey
 1060    02:C202  B0 F7      			bcs	.add
 1061    02:C204  D0 F8      			bne	.rotate
 1062    02:C206  A8         			tay				; Hi-byte of (SCR Y * width).
 1063                        		.endif
 1064                        	
 1065    02:C207  A5 FD      			lda	<map_scrn_x		; Map SCR X coordinate.
 1066    02:C209  18         			clc
 1067    02:C20A  65 EC      			adc.l	<_bp
 1068    02:C20C  90 01      			bcc	!+
 1069    02:C20E  C8         			iny
 1070                        	
 1071    02:C20F  84 ED      	!:		sty.h	<_bp			; 2 bytes per screen entry, max
 1072    02:C211  0A         			asl	a			; 8KByte screen table.
 1073    02:C212  26 ED      			rol.h	<_bp
 1074               0001     		.if	BLKDEF_POINTERS == 0
 1075    02:C214  0A         			asl	a			; 8 bytes per screen entry when
 1076    02:C215  26 ED      			rol.h	<_bp			; not using BLK pointers.
 1077    02:C217  0A         			asl	a
 1078    02:C218  26 ED      			rol.h	<_bp
 1079                        		.endif
 1080                        	
 1081    02:C21A  7D BD 2B   			adc.l	vdc_scr_addr, x		; Calc screen data pointer.
 1082    02:C21D  85 EC      			sta.l	<_bp			; Maximum data size is 8KBytes
 1083    02:C21F  A5 ED      			lda.h	<_bp			; so we don't need to consider
 1084    02:C221  7D BE 2B   			adc.h	vdc_scr_addr, x		; bank overflow.
 1085    02:C224  85 ED      			sta.h	<_bp
 1086                        	
 1087    02:C226  BD BF 2B   			lda	vdc_scr_bank, x		; Map the SCR data in MPR3..MPR4.
 1088    02:C229  53 08      			tam3
 1089    02:C22B  1A         			inc	a
 1090    02:C22C  53 10      			tam4
 1091                        	
 1092    02:C22E  C2         			cly
 1093    02:C22F  B1 EC      			lda	[_bp], y		; Get SCR_MAP_PAGE.
 1094    02:C231  9D BB 2B   			sta.h	vdc_map_addr, x
 1095    02:C234  C8         			iny
 1096    02:C235  B1 EC      			lda	[_bp], y		; Get SCR_MAP_BANK.
 1097    02:C237  9D BC 2B   			sta	vdc_map_bank, x
 1098                        	
 1099               0001     		.if	BLKDEF_POINTERS == 0
 1100    02:C23A  C8         			iny
 1101    02:C23B  B1 EC      			lda	[_bp], y		; Get SCR_BLK_PAGE.
 1102    02:C23D  9D B8 2B   			sta.h	vdc_blk_addr, x
 1103    02:C240  C8         			iny
 1104    02:C241  B1 EC      			lda	[_bp], y		; Get SCR_BLK_BANK.
 1105    02:C243  9D B9 2B   			sta	vdc_blk_bank, x
 1106    02:C246  C8         			iny
 1107    02:C247  B1 EC      			lda	[_bp], y		; Get SCR_TBL_PAGE.
 1108    02:C249  9D B5 2B   			sta.h	vdc_tbl_addr, x
 1109    02:C24C  C8         			iny
 1110    02:C24D  B1 EC      			lda	[_bp], y		; Get SCR_TBL_BANK.
 1111    02:C24F  9D B6 2B   			sta	vdc_tbl_bank, x
 1112               0000     		.if	0				; These are not currently used.
 1119                        		.endif
 1120                        		.endif
 1121                        	
 1122                        	;		lda	vdc_bat_width, x	; Set up the map width.
 1123                        	;		lsr	a			; This should have been set
 1124                        	;		sta	vdc_map_line_w, x	; with the multi-screen map.
 1125                        	
 1126                        	;		jmp	map_set_banks		; Put BLK & MAP in MPR2-MPR5.
 1127                        	
 1128                        			; Fall through to map_set_banks.
 1129                        	
 1130                        		.endif	BLKMAP_MULTISCR
 1131                        	
 1132                        	
 1133                        	
 1134                        	; ***************************************************************************
 1135                        	; ***************************************************************************
 1136                        	;
 1137                        	; map_set_banks - Put BLK & MAP in MPR2-MPR5.
 1138                        	;
 1139                        	
 1140    02:C252  BD B9 2B   	map_set_banks:	lda	vdc_blk_bank, x		; Put the BLK into MPR2.
 1141    02:C255  53 04      			tam2
 1142                        	
 1143    02:C257  BD BC 2B   			lda	vdc_map_bank, x		; Put the MAP into MPR3-MPR5.
 1144    02:C25A  53 08      			tam3
 1145    02:C25C  1A         			inc	a
 1146    02:C25D  53 10      			tam4
 1147               0000     		.if	BLKMAP_LARGEMAP
 1156                        		.endif
 1157                        	
 1158    02:C25F  60         	!:		rts
 1159                        	
 1160                        	
 1161                        	
 1162                        	; ***************************************************************************
 1163                        	; ***************************************************************************
 1164                        	;
 1165                        	; map_scroll_x - Update the BAT when X coordinate changes.
 1166                        	;
 1167                        	; N.B. This will alter map_chr_x and map_scrn_x if moved in +ve direction!
 1168                        	;
 1169                        	; N.B. This only ever draws a single column!
 1170                        	;
 1171                        	
 1172    02:C260  60         	!no_change:	rts
 1173                        	
 1174    02:C261             	map_scroll_x:
 1175                        	
 1176               0001     		.if	BLKMAP_MULTISCR
 1177                        	
 1178                        			; Initialization for a multi-screen map.
 1179                        	
 1180    02:C261  BD BF 2B   			lda	vdc_scr_bank, x		; Skip this if regular blkmap.
 1181    02:C264  F0 56      			beq	.regular
 1182                        	
 1183    02:C266  A5 FC      	.multiscreen:	lda	<map_chr_x		; Compare old_x with cur_x.
 1184    02:C268  DD B2 2B   			cmp	vdc_old_chr_x, x
 1185               0001     		.if	BLKMAP_TIMETEST == 0
 1186    02:C26B  F0 F3      			beq	!no_change-		; Do nothing if no change.
 1187                        		.endif
 1188    02:C26D  9D B2 2B   			sta	vdc_old_chr_x, x
 1189    02:C270  30 11      			bmi	!+			; Test the sign of the change.
 1190                        	
 1191    02:C272  18         			clc				; Draw RHS if chr_x >= old_x.
 1192    02:C273  3D 78 26   			and	vdc_bat_x_mask, x
 1193    02:C276  7D 7B 26   			adc	vdc_map_draw_w, x	; Usually (SCR_WIDTH / 8) + 1.
 1194    02:C279  3A         			dec	a
 1195    02:C27A  85 FC      			sta	<map_chr_x		; Update CHR X chr coordinate.
 1196    02:C27C  3C 76 26   			bit	vdc_bat_width, x
 1197    02:C27F  F0 02      			beq	!+
 1198    02:C281  E6 FD      			inc	<map_scrn_x		; Wrapped to the next screen.
 1199                        	
 1200    02:C283  3D 78 26   	!:		and	vdc_bat_x_mask, x
 1201    02:C286  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
 1202                        	
 1203    02:C288  A5 FE      			lda	<map_chr_y		; Save BAT Y chr coordinate.
 1204    02:C28A  3D 79 26   			and	vdc_bat_y_mask, x
 1205    02:C28D  85 F9      			sta	<map_bat_y
 1206    02:C28F  4A         			lsr	a			; Map BLK Y coordinate.
 1207    02:C290  85 EF      			sta.h	<map_line
 1208    02:C292  62         			cla
 1209    02:C293  3C 76 26   			bit	vdc_bat_width, x
 1210    02:C296  30 08      			bmi	.w128
 1211    02:C298  70 03      			bvs	.w64
 1212    02:C29A  46 EF      	.w32:		lsr.h	<map_line
 1213    02:C29C  6A         			ror	a
 1214    02:C29D  46 EF      	.w64:		lsr.h	<map_line
 1215    02:C29F  6A         			ror	a
 1216    02:C2A0  46 EF      	.w128:		lsr.h	<map_line
 1217    02:C2A2  6A         			ror	a
 1218    02:C2A3  46 EF      			lsr.h	<map_line		; Hi-byte of (BLK Y * width).
 1219    02:C2A5  6A         			ror	a
 1220    02:C2A6  85 EE      			sta.l	<map_line		; Lo-byte of (BLK Y * width).
 1221                        	
 1222    02:C2A8  20 EC C1   			jsr	map_set_screen		; Put BLK & MAP in MPR2-MPR5.
 1223                        	
 1224    02:C2AB  A5 F8      			lda	<map_bat_x		; Calc map data pointer.
 1225    02:C2AD  4A         			lsr	a			; Map BLK X coordinate.
 1226    02:C2AE  05 EE      			ora.l	<map_line
 1227    02:C2B0  85 EC      			sta.l	<_bp
 1228    02:C2B2  A5 EF      			lda.h	<map_line
 1229    02:C2B4  18         			clc
 1230    02:C2B5  7D BB 2B   			adc.h	vdc_map_addr, x		; N.B. 256-byte aligned!
 1231    02:C2B8  85 ED      			sta.h	<_bp
 1232                        	
 1233    02:C2BA  80 5D      			bra	.draw_col		; Now draw it.
 1234                        	
 1235                        		.endif	BLKMAP_MULTISCR
 1236                        	
 1237                        			; Initialization for a regular map.
 1238                        	
 1239    02:C2BC  A5 FC      	.regular:	lda	<map_chr_x		; Compare old_x with cur_x.
 1240    02:C2BE  DD B2 2B   			cmp	vdc_old_chr_x, x
 1241               0001     		.if	BLKMAP_TIMETEST == 0
 1242    02:C2C1  F0 9D      			beq	!no_change-		; Do nothing if no change.
 1243                        		.endif
 1244    02:C2C3  9D B2 2B   			sta	vdc_old_chr_x, x
 1245    02:C2C6  30 07      			bmi	!+			; Test the sign of the change.
 1246                        	
 1247    02:C2C8  18         			clc				; Draw RHS if chr_x >= old_x.
 1248    02:C2C9  7D 7B 26   			adc	vdc_map_draw_w, x	; Usually (SCR_WIDTH / 8) + 1.
 1249    02:C2CC  3A         			dec	a
 1250    02:C2CD  85 FC      			sta	<map_chr_x		; Update CHR X chr coordinate.
 1251                        	
 1252    02:C2CF  3C 83 26   	!:		bit	vdc_map_option, x	; Set bit7 to disable aligning
 1253    02:C2D2  30 05      			bmi	!+			; BAT X with the map X.
 1254    02:C2D4  3D 78 26   			and	vdc_bat_x_mask, x
 1255    02:C2D7  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
 1256                        	
 1257    02:C2D9  A5 FE      	!:		lda	<map_chr_y		; A = map CHR Y coordinate.
 1258    02:C2DB  A8         			tay
 1259    02:C2DC  4A         			lsr	a
 1260    02:C2DD  42         			say				; Y = map BLK Y coordinate.
 1261                        	
 1262    02:C2DE  3C 83 26   			bit	vdc_map_option, x	; Set bit6 to disable aligning
 1263    02:C2E1  70 05      			bvs	!+			; BAT Y with the map Y.
 1264    02:C2E3  3D 79 26   			and	vdc_bat_y_mask, x
 1265    02:C2E6  85 F9      			sta	<map_bat_y		; Save BAT Y chr coordinate.
 1266                        	
 1267               0000     		.if	BLKMAP_LARGEMAP
 1272                        		.endif
 1273                        	
 1274    02:C2E8  BD 7D 26   	!:		lda	vdc_map_line_w, x	; Map width in BLK.
 1275               0000     		.if	FAST_MULTIPLY
 1288                        		.else
 1289    02:C2EB  84 EF      			sty.h	<map_line		; Takes 144..176 cycles.
 1290    02:C2ED  A0 08      			ldy	#8
 1291    02:C2EF  4A         			lsr	a
 1292    02:C2F0  85 EE      			sta.l	<map_line
 1293    02:C2F2  62         			cla
 1294    02:C2F3  90 03      			bcc	.rotate
 1295    02:C2F5  18         	.add:		clc
 1296    02:C2F6  65 EF      			adc.h	<map_line
 1297    02:C2F8  6A         	.rotate:	ror	a
 1298    02:C2F9  66 EE      			ror.l	<map_line		; Lo-byte of (BLK Y * width).
 1299    02:C2FB  88         			dey
 1300    02:C2FC  B0 F7      			bcs	.add
 1301    02:C2FE  D0 F8      			bne	.rotate
 1302    02:C300  A8         			tay				; Hi-byte of (BLK Y * width).
 1303                        		.endif
 1304                        	
 1305    02:C301  A5 FC      	!:		lda	<map_chr_x		; Map CHR X coordinate.
 1306    02:C303  4A         			lsr	a			; Map BLK X coordinate.
 1307    02:C304  18         			clc
 1308    02:C305  65 EE      			adc.l	<map_line		; Lo-byte of (BLK Y * width).
 1309    02:C307  90 01      			bcc	!+
 1310    02:C309  C8         			iny				; Hi-byte of (BLK Y * width).
 1311                        	
 1312    02:C30A  18         	!:		clc				; Calc map data pointer.
 1313    02:C30B  7D BA 2B   			adc.l	vdc_map_addr, x
 1314    02:C30E  85 EC      			sta.l	<_bp			; Maximum map size is 16KBytes
 1315    02:C310  98         			tya				; so we don't need to consider
 1316    02:C311  7D BB 2B   			adc.h	vdc_map_addr, x		; bank overflow.
 1317    02:C314  85 ED      			sta.h	<_bp
 1318                        	
 1319    02:C316  20 52 C2   			jsr	map_set_banks		; Put BLK & MAP in MPR2-MPR5.
 1320                        	
 1321                        			; Draw the first part of the column.
 1322                        	
 1323    02:C319  A5 F8      	.draw_col:	lda	<map_bat_x		; Set the BAT VRAM destination
 1324    02:C31B  85 F0      			sta.l	<_di			; coordinates.
 1325    02:C31D  A5 F9      			lda	<map_bat_y
 1326    02:C31F  85 F1      			sta.h	<_di
 1327                        	
 1328    02:C321  5D 79 26   			eor	vdc_bat_y_mask, x	; Calc CHR before wrap.
 1329    02:C324  1A         			inc	a
 1330    02:C325  DD 7C 26   			cmp	vdc_map_draw_h, x	; Usually (SCR_HEIGHT / 8) + 1.
 1331    02:C328  90 03      			bcc	!+
 1332    02:C32A  BD 7C 26   			lda	vdc_map_draw_h, x	; Maximum CHR to draw.
 1333    02:C32D  85 00      	!:		sta	<map_count		; Set number of CHR to draw.
 1334    02:C32F  85 01      			sta	<map_drawn		; Preserve number of CHR drawn.
 1335                        	
 1336    02:C331  A9 05      			lda	#VDC_CR			; Set VDC auto-increment from
 1337    02:C333  95 F7      			sta	<vdc_reg, x		; the BAT width, which is set
 1338    02:C335  9D 00 02   			sta	VDC_AR, x		; up by set_screen_size().
 1339    02:C338  B5 F4      			lda	<vdc_crh, x
 1340    02:C33A  9D 03 02   			sta	VDC_DH, x
 1341                        	
 1342    02:C33D  20 7F C6   			jsr	blk_col_strip		; Draw top of vertical strip.
 1343                        	
 1344                        			; Wrap around and draw the rest of the column (if needed).
 1345                        	
 1346    02:C340  38         			sec				; Are there any more CHR that
 1347    02:C341  BD 7C 26   			lda	vdc_map_draw_h, x	; need to be drawn?
 1348    02:C344  E5 01      			sbc	<map_drawn
 1349    02:C346  F0 2C      			beq	.done
 1350                        	
 1351    02:C348  85 00      			sta	<map_count		; Set number of CHR to draw.
 1352                        	
 1353    02:C34A  A5 FE      			lda	<map_chr_y		; Update CHR Y coordinate for
 1354    02:C34C  48         			pha				; drawing unaligned tiles.
 1355    02:C34D  18         			clc
 1356    02:C34E  65 01      			adc	<map_drawn
 1357    02:C350  85 FE      			sta	<map_chr_y
 1358                        	
 1359               0001     		.if	BLKMAP_MULTISCR
 1360    02:C352  BD BF 2B   			lda	vdc_scr_bank, x		; Skip this if regular blkmap.
 1361    02:C355  F0 0F      			beq	!+
 1362                        	
 1363    02:C357  E6 FF      			inc	<map_scrn_y		; Wrapped to the next screen.
 1364                        	
 1365    02:C359  20 EC C1   			jsr	map_set_screen		; Put BLK & MAP in MPR2-MPR5.
 1366                        	
 1367    02:C35C  A5 F8      			lda	<map_bat_x		; Calc map data pointer.
 1368    02:C35E  4A         			lsr	a			; Map BLK X coordinate.
 1369    02:C35F  85 EC      			sta.l	<_bp
 1370    02:C361  BD BB 2B   			lda.h	vdc_map_addr, x		; N.B. 256-byte aligned!
 1371    02:C364  85 ED      			sta.h	<_bp
 1372                        		.endif
 1373                        	
 1374    02:C366  A5 F8      	!:		lda	<map_bat_x		; Set the BAT VRAM destination
 1375    02:C368  85 F0      			sta.l	<_di			; coordinates.
 1376    02:C36A  64 F1      			stz.h	<_di			; Reset 1st row to draw.
 1377                        	
 1378    02:C36C  20 7F C6   			jsr	blk_col_strip		; Draw btm of vertical strip.
 1379                        	
 1380               0001     		.if	BLKMAP_MULTISCR
 1381    02:C36F  C6 FF      			dec	<map_scrn_y		; Restore, no check if should.
 1382                        		.endif
 1383                        	
 1384    02:C371  68         			pla				; Restore CHR Y coordinate, we
 1385    02:C372  85 FE      			sta	<map_chr_y		; might draw another column!
 1386                        	
 1387    02:C374  A9 05      	.done:		lda	#VDC_CR			; Set VDC auto-increment to 1.
 1388    02:C376  95 F7      			sta	<vdc_reg, x
 1389    02:C378  9D 00 02   			sta	VDC_AR, x
 1390    02:C37B  9E 03 02   			stz	VDC_DH, x
 1391                        	
 1392    02:C37E  60         			rts
 1393                        	
 1394                        	
 1395                        	
 1396                        	; ***************************************************************************
 1397                        	; ***************************************************************************
 1398                        	;
 1399                        	; map_scroll_y - Update the BAT when Y coordinate changes.
 1400                        	;
 1401                        	; N.B. This will alter map_chr_y and map_scrn_y if moved in +ve direction!
 1402                        	;
 1403                        	; N.B. This draws multiple rows when called from _draw_map or _blit_map.
 1404                        	;
 1405                        	
 1406    02:C37F  60         	!no_change:	rts
 1407                        	
 1408    02:C380             	map_scroll_y:
 1409                        	
 1410               0001     		.if	BLKMAP_MULTISCR
 1411                        	
 1412                        			; Initialization for a multi-screen map.
 1413                        	
 1414    02:C380  BD BF 2B   			lda	vdc_scr_bank, x		; Skip this if regular blkmap.
 1415    02:C383  F0 56      			beq	.regular
 1416                        	
 1417    02:C385  A5 FE      	.multiscr:	lda	<map_chr_y		; Compare old_y with cur_y.
 1418    02:C387  DD B3 2B   			cmp	vdc_old_chr_y, x
 1419               0001     		.if	BLKMAP_TIMETEST == 0
 1420    02:C38A  F0 F3      			beq	!no_change-		; Do nothing if no change.
 1421                        		.endif
 1422    02:C38C  9D B3 2B   			sta	vdc_old_chr_y, x
 1423    02:C38F  30 11      			bmi	!+			; Test the sign of the change.
 1424                        	
 1425    02:C391  18         			clc				; Draw bottom if chr_y >= old_y.
 1426    02:C392  3D 79 26   			and	vdc_bat_y_mask, x
 1427    02:C395  7D 7C 26   			adc	vdc_map_draw_h, x	; Usually (SCR_HEIGHT / 8) + 1.
 1428    02:C398  3A         			dec	a
 1429    02:C399  85 FE      			sta	<map_chr_y		; Update CHR Y chr coordinate.
 1430    02:C39B  3C 77 26   			bit	vdc_bat_height, x
 1431    02:C39E  F0 02      			beq	!+
 1432    02:C3A0  E6 FF      			inc	<map_scrn_y		; Wrapped to the next screen.
 1433                        	
 1434    02:C3A2  3D 79 26   	!:		and	vdc_bat_y_mask, x
 1435    02:C3A5  85 F9      			sta	<map_bat_y		; Save BAT Y chr coordinate.
 1436                        	
 1437    02:C3A7  4A         			lsr	a			; Map BLK Y coordinate.
 1438    02:C3A8  85 EF      			sta.h	<map_line
 1439    02:C3AA  62         			cla
 1440    02:C3AB  3C 76 26   			bit	vdc_bat_width, x
 1441    02:C3AE  30 08      			bmi	.w128
 1442    02:C3B0  70 03      			bvs	.w64
 1443    02:C3B2  46 EF      	.w32:		lsr.h	<map_line
 1444    02:C3B4  6A         			ror	a
 1445    02:C3B5  46 EF      	.w64:		lsr.h	<map_line
 1446    02:C3B7  6A         			ror	a
 1447    02:C3B8  46 EF      	.w128:		lsr.h	<map_line
 1448    02:C3BA  6A         			ror	a
 1449    02:C3BB  46 EF      			lsr.h	<map_line		; Hi-byte of (BLK Y * width).
 1450    02:C3BD  6A         			ror	a
 1451    02:C3BE  85 EE      			sta.l	<map_line		; Lo-byte of (BLK Y * width).
 1452                        	
 1453    02:C3C0  A5 FC      			lda	<map_chr_x
 1454    02:C3C2  3D 78 26   			and	vdc_bat_x_mask, x
 1455    02:C3C5  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
 1456                        	
 1457                        			; Loop to here if drawing multiple multi-screen rows.
 1458                        	
 1459    02:C3C7  20 EC C1   	.multiscr_row:	jsr	map_set_screen		; Put BLK & MAP in MPR2-MPR5.
 1460                        	
 1461    02:C3CA  A5 F8      			lda	<map_bat_x		; Calc map data pointer.
 1462    02:C3CC  4A         			lsr	a			; Map BLK X coordinate.
 1463    02:C3CD  05 EE      			ora.l	<map_line
 1464    02:C3CF  85 EC      			sta.l	<_bp
 1465    02:C3D1  A5 EF      			lda.h	<map_line
 1466    02:C3D3  18         			clc
 1467    02:C3D4  7D BB 2B   			adc.h	vdc_map_addr, x		; N.B. 256-byte aligned!
 1468    02:C3D7  85 ED      			sta.h	<_bp
 1469                        	
 1470    02:C3D9  80 60      			bra	.draw_row		; Now draw it.
 1471                        	
 1472                        		.endif	BLKMAP_MULTISCR
 1473                        	
 1474                        			; Initialization for a regular blkmap.
 1475                        	
 1476    02:C3DB  A5 FE      	.regular:	lda	<map_chr_y		; Compare old_y with cur_y.
 1477    02:C3DD  DD B3 2B   			cmp	vdc_old_chr_y, x
 1478               0001     		.if	BLKMAP_TIMETEST == 0
 1479    02:C3E0  F0 9D      			beq	!no_change-		; Do nothing if no change.
 1480                        		.endif
 1481    02:C3E2  9D B3 2B   			sta	vdc_old_chr_y, x
 1482    02:C3E5  30 07      			bmi	!+			; Test the sign of the change.
 1483                        	
 1484    02:C3E7  18         			clc				; Draw bottom if chr_y >= old_y.
 1485    02:C3E8  7D 7C 26   			adc	vdc_map_draw_h, x	; Usually (SCR_HEIGHT / 8) + 1.
 1486    02:C3EB  3A         			dec	a
 1487    02:C3EC  85 FE      			sta	<map_chr_y		; Update CHR Y chr coordinate.
 1488                        	
 1489    02:C3EE  A8         	!:		tay				; A = map CHR Y coordinate.
 1490    02:C3EF  4A         			lsr	a
 1491    02:C3F0  42         			say				; Y = map BLK Y coordinate.
 1492                        	
 1493    02:C3F1  3C 83 26   			bit	vdc_map_option, x	; Set bit6 to disable aligning
 1494    02:C3F4  70 05      			bvs	!+			; BAT Y with the map Y.
 1495    02:C3F6  3D 79 26   			and	vdc_bat_y_mask, x
 1496    02:C3F9  85 F9      			sta	<map_bat_y		; Save BAT Y chr coordinate.
 1497                        	
 1498    02:C3FB  3C 83 26   	!:		bit	vdc_map_option, x	; Set bit7 to disable aligning
 1499    02:C3FE  30 07      			bmi	!+			; BAT X with the map X.
 1500    02:C400  A5 FC      			lda	<map_chr_x
 1501    02:C402  3D 78 26   			and	vdc_bat_x_mask, x
 1502    02:C405  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
 1503    02:C407             	!:
 1504                        	
 1505               0000     		.if	BLKMAP_LARGEMAP
 1510                        		.endif
 1511                        	
 1512    02:C407  BD 7D 26   			lda	vdc_map_line_w, x	; Map width in BLK.
 1513               0000     		.if	FAST_MULTIPLY
 1526                        		.else
 1527    02:C40A  84 EF      			sty.h	<map_line		; Takes 144..176 cycles.
 1528    02:C40C  A0 08      			ldy	#8
 1529    02:C40E  4A         			lsr	a
 1530    02:C40F  85 EE      			sta.l	<map_line
 1531    02:C411  62         			cla
 1532    02:C412  90 03      			bcc	.rotate
 1533    02:C414  18         	.add:		clc
 1534    02:C415  65 EF      			adc.h	<map_line
 1535    02:C417  6A         	.rotate:	ror	a
 1536    02:C418  66 EE      			ror.l	<map_line		; Lo-byte of (BLK Y * width).
 1537    02:C41A  88         			dey
 1538    02:C41B  B0 F7      			bcs	.add
 1539    02:C41D  D0 F8      			bne	.rotate
 1540    02:C41F  85 EF      			sta.h	<map_line		; Hi-byte of (BLK Y * width).
 1541                        		.endif
 1542                        	
 1543    02:C421  20 52 C2   			jsr	map_set_banks		; Put BLK & MAP in MPR2-MPR5.
 1544                        	
 1545                        			; Loop to here if drawing multiple regular blkmap rows.
 1546                        	
 1547    02:C424  A4 EF      	.regular_row:	ldy.h	<map_line		; Hi-byte of (BLK Y * width).
 1548    02:C426  A5 FC      			lda	<map_chr_x		; Map CHR X coordinate.
 1549    02:C428  4A         			lsr	a			; Map BLK X coordinate.
 1550    02:C429  18         			clc
 1551    02:C42A  65 EE      			adc.l	<map_line		; Lo-byte of (BLK Y * width).
 1552    02:C42C  90 01      			bcc	!+
 1553    02:C42E  C8         			iny
 1554    02:C42F  18         	!:		clc				; Calc map data pointer.
 1555    02:C430  7D BA 2B   			adc.l	vdc_map_addr, x
 1556    02:C433  85 EC      			sta.l	<_bp			; Maximum map size is 16KBytes
 1557    02:C435  98         			tya				; so we don't need to consider
 1558    02:C436  7D BB 2B   			adc.h	vdc_map_addr, x		; bank overflow.
 1559    02:C439  85 ED      			sta.h	<_bp
 1560                        	
 1561                        			; Draw the first part of the row.
 1562                        	
 1563    02:C43B  A5 F9      	.draw_row:	lda	<map_bat_y		; Set the BAT VRAM destination
 1564    02:C43D  85 F1      			sta.h	<_di			; coordinates.
 1565    02:C43F  A5 F8      			lda	<map_bat_x
 1566    02:C441  85 F0      			sta.l	<_di
 1567                        	
 1568    02:C443  5D 78 26   			eor	vdc_bat_x_mask, x	; Calc CHR before wrap.
 1569    02:C446  1A         			inc	a
 1570    02:C447  C5 FA      			cmp	<map_draw_w		; Usually (SCR_WIDTH / 8) + 1.
 1571    02:C449  90 02      			bcc	!+
 1572    02:C44B  A5 FA      			lda	<map_draw_w		; Maximum CHR to draw.
 1573    02:C44D  85 00      	!:		sta	<map_count		; Set number of CHR to draw.
 1574    02:C44F  85 01      			sta	<map_drawn		; Preserve number of CHR drawn.
 1575                        	
 1576    02:C451  20 C1 C4   			jsr	blk_row_strip		; Draw lhs of horizontal strip.
 1577                        	
 1578                        			; Wrap around and draw the rest of the row (if needed).
 1579                        	
 1580    02:C454  38         			sec				; Are there any more CHR that
 1581    02:C455  A5 FA      			lda	<map_draw_w		; need to be drawn?
 1582    02:C457  E5 01      			sbc	<map_drawn
 1583    02:C459  F0 2E      			beq	.done_row
 1584                        	
 1585    02:C45B  85 00      			sta	<map_count		; Set number of CHR to draw.
 1586                        	
 1587    02:C45D  A5 FC      			lda	<map_chr_x		; Update CHR X coordinate for
 1588    02:C45F  48         			pha				; drawing unaligned tiles.
 1589    02:C460  18         			clc
 1590    02:C461  65 01      			adc	<map_drawn
 1591    02:C463  85 FC      			sta	<map_chr_x
 1592                        	
 1593               0001     		.if	BLKMAP_MULTISCR
 1594    02:C465  BD BF 2B   			lda	vdc_scr_bank, x		; Skip this if regular blkmap.
 1595    02:C468  F0 11      			beq	!+
 1596                        	
 1597    02:C46A  E6 FD      			inc	<map_scrn_x		; Wrapped to the next screen.
 1598                        	
 1599    02:C46C  20 EC C1   			jsr	map_set_screen		; Locate screen's BLK and MAP.
 1600                        	
 1601    02:C46F  18         			clc				; Calc map data pointer.
 1602    02:C470  A5 EE      			lda.l	<map_line
 1603    02:C472  85 EC      			sta.l	<_bp
 1604    02:C474  A5 EF      			lda.h	<map_line
 1605    02:C476  7D BB 2B   			adc.h	vdc_map_addr, x		; N.B. 256-byte aligned!
 1606    02:C479  85 ED      			sta.h	<_bp
 1607                        		.endif
 1608                        	
 1609    02:C47B  A5 F9      	!:		lda	<map_bat_y		; Set the BAT VRAM destination
 1610    02:C47D  85 F1      			sta.h	<_di			; coordinates.
 1611    02:C47F  64 F0      			stz.l	<_di			; Reset 1st column to draw.
 1612                        	
 1613    02:C481  20 C1 C4   			jsr	blk_row_strip		; Draw rhs of horizontal strip.
 1614                        	
 1615               0001     		.if	BLKMAP_MULTISCR
 1616    02:C484  C6 FD      			dec	<map_scrn_x		; Restore, no check if should.
 1617                        		.endif	BLKMAP_MULTISCR
 1618                        	
 1619    02:C486  68         			pla				; Restore CHR X coordinate, we
 1620    02:C487  85 FC      			sta	<map_chr_x		; might draw another row!
 1621                        	
 1622    02:C489  C6 FB      	.done_row:	dec	<map_draw_h		; Are all desired rows drawn?
 1623    02:C48B  F0 33      			beq	.finished
 1624                        	
 1625    02:C48D  E6 FE      			inc	<map_chr_y		; Move CHR Y down by 1.
 1626                        	
 1627    02:C48F  A5 FE      			lda	<map_chr_y		; If new BLK then ...
 1628    02:C491  4A         			lsr	a
 1629    02:C492  B0 0B      			bcs	!+
 1630    02:C494  BD 7D 26   			lda	vdc_map_line_w, x	; Move the map line pointer to
 1631    02:C497  65 EE      			adc.l	<map_line		; the next line.
 1632    02:C499  85 EE      			sta.l	<map_line
 1633    02:C49B  90 02      			bcc	!+
 1634    02:C49D  E6 EF      			inc.h	<map_line
 1635                        	
 1636    02:C49F  A5 F9      	!:		lda	<map_bat_y		; Move BAT Y down by 1.
 1637    02:C4A1  1A         			inc	a
 1638    02:C4A2  3D 79 26   			and	vdc_bat_y_mask, x
 1639    02:C4A5  85 F9      			sta	<map_bat_y
 1640                        	
 1641               0001     		.if	BLKMAP_MULTISCR
 1642    02:C4A7  BC BF 2B   			ldy	vdc_scr_bank, x		; Skip this if regular blkmap.
 1643    02:C4AA  D0 03 4C 24			beq	.regular_row
         02:C4AE  C4          
 1644                        	
 1645    02:C4AF  A8         			tay				; If wrapped to the top line of
 1646    02:C4B0  D0 0B      			bne	!+			; of the BAT then increment the
 1647    02:C4B2  E6 FF      			inc	<map_scrn_y		; screen.
 1648                        	
 1649    02:C4B4  BD 7A 26   			lda	vdc_bat_limit, x	; The map line must wrap around
 1650    02:C4B7  4A         			lsr	a			; too. This is simple since its
 1651    02:C4B8  4A         			lsr	a			; size (in bytes) is 1/4 of the
 1652    02:C4B9  25 EF      			and.h	<map_line		; BAT size (in words) and it is
 1653    02:C4BB  85 EF      			sta.h	<map_line		; a power-of-2.
 1654                        	
 1655    02:C4BD  4C C7 C3   	!:		jmp	.multiscr_row		; Draw next row.
 1656                        		.else
 1658                        		.endif	BLKMAP_MULTISCR
 1659                        	
 1660    02:C4C0  60         	.finished:	rts
 1661                        	
 1662                        	
 1663                        	
 1664               0000     		.if	BLKDEF_POINTERS
 1858                        		.else	BLKDEF_POINTERS
 1859                        	
 1860                        	
 1861                        	
 1862                        	; ***************************************************************************
 1863                        	; ***************************************************************************
 1864                        	;
 1865                        	; blk_row_strip - Draw a single row of CHR into the BAT.
 1866                        	;
 1867                        	
 1868    02:C4C1  20 34 E4   	blk_row_strip:	jsr	set_di_xy_mawr		; Set the BAT VRAM destination.
 1869                        	
 1870    02:C4C4  A5 FC      			lda	<map_chr_x		; Select what drawing code to
 1871    02:C4C6  4A         			lsr	a			; use depending upon even/odd
 1872    02:C4C7  A5 FE      			lda	<map_chr_y		; CHR coordinates (not BAT to
 1873    02:C4C9  29 01      			and	#1			; support unaligned drawing).
 1874    02:C4CB  2A         			rol	a
 1875    02:C4CC  0A         			asl	a
 1876    02:C4CD  1D B8 2B   			ora.h	vdc_blk_addr, x		; What is the BLK data address?
 1877    02:C4D0  29 1E      			and	#%00011110		; $4000, $4800, $5000 or $5800.
 1878    02:C4D2  A8         			tay
 1879    02:C4D3  B9 E0 C4   			lda.h	.jump_table, y		; Push the address of the code.
 1880    02:C4D6  48         			pha
 1881    02:C4D7  B9 DF C4   			lda.l	.jump_table, y
 1882    02:C4DA  48         			pha
 1883                        	
 1884    02:C4DB  B2 EC      			lda	[_bp]			; Get the first BLK number.
 1885    02:C4DD  A8         			tay
 1886                        	
 1887    02:C4DE  60         			rts				; Jump to the drawing code.
 1888                        	
 1889    02:C4DF  01 C5      	.jump_table:	dw	b4000_top_even - 1
 1890    02:C4E1  14 C5      			dw	b4000_top_odd - 1
 1891    02:C4E3  31 C5      			dw	b4000_btm_even - 1
 1892    02:C4E5  44 C5      			dw	b4000_btm_odd - 1
 1893                        	
 1894    02:C4E7  61 C5      			dw	b4800_top_even - 1
 1895    02:C4E9  74 C5      			dw	b4800_top_odd - 1
 1896    02:C4EB  91 C5      			dw	b4800_btm_even - 1
 1897    02:C4ED  A4 C5      			dw	b4800_btm_odd - 1
 1898                        	
 1899    02:C4EF  C1 C5      			dw	b5000_top_even - 1
 1900    02:C4F1  D4 C5      			dw	b5000_top_odd - 1
 1901    02:C4F3  F1 C5      			dw	b5000_btm_even - 1
 1902    02:C4F5  04 C6      			dw	b5000_btm_odd - 1
 1903                        	
 1904    02:C4F7  21 C6      			dw	b5800_top_even - 1
 1905    02:C4F9  34 C6      			dw	b5800_top_odd - 1
 1906    02:C4FB  51 C6      			dw	b5800_btm_even - 1
 1907    02:C4FD  64 C6      			dw	b5800_btm_odd - 1
 1908                        	
 1909                        			; top horizontal (32+2 rept)
 1910                        			;
 1911                        			; 89 cycles per block * 17 -> 1513 cycles
 1912                        	
 1913    02:C4FF  B2 EC      	!repeat:	lda	[_bp]			; 7
 1914    02:C501  A8         			tay				; 2
 1915                        	
 1916    02:C502  B9 00 40   	b4000_top_even:	lda	BLK_4000_TL_L, y	; 5
 1917    02:C505  9D 02 02   			sta	VDC_DL, x		; 6
 1918    02:C508  B9 00 44   			lda	BLK_4000_TL_H, y	; 5
 1919               0001     		.if	BLKDEF_CHR_FLAG
 1920    02:C50B  29 F3      			and	#%11110011		; 2
 1921                        		.endif
 1922    02:C50D  1A         			inc	a			; 2
 1923    02:C50E  9D 03 02   			sta	VDC_DH, x		; 6
 1924                        	
 1925    02:C511  C6 00      			dec	<map_count		; 6
 1926    02:C513  F0 19      			beq	!end+			; 2
 1927                        	
 1928    02:C515  B9 00 41   	b4000_top_odd:	lda	BLK_4000_TR_L, y	; 5
 1929    02:C518  9D 02 02   			sta	VDC_DL, x		; 6
 1930    02:C51B  B9 00 45   			lda	BLK_4000_TR_H, y	; 5
 1931               0001     		.if	BLKDEF_CHR_FLAG
 1932    02:C51E  29 F3      			and	#%11110011		; 2
 1933                        		.endif
 1934    02:C520  1A         			inc	a			; 2
 1935    02:C521  9D 03 02   			sta	VDC_DH, x		; 6
 1936                        	
 1937    02:C524  E6 EC      			inc.l	<_bp			; 6
 1938    02:C526  D0 02      			bne	!+			; 2/4
 1939    02:C528  E6 ED      			inc.h	<_bp			; 6
 1940                        	
 1941    02:C52A  C6 00      	!:		dec	<map_count		; 6
 1942    02:C52C  D0 D1      			bne	!repeat-		; 4
 1943                        	
 1944    02:C52E  60         	!end:		rts
 1945                        	
 1946                        			; btm horizontal (32+2 rept)
 1947                        			;
 1948                        			; 89 cycles per block * 17 -> 1513 cycles
 1949                        	
 1950    02:C52F  B2 EC      	!repeat:	lda	[_bp]			; 7
 1951    02:C531  A8         			tay				; 2
 1952                        	
 1953    02:C532  B9 00 42   	b4000_btm_even:	lda	BLK_4000_BL_L, y	; 5
 1954    02:C535  9D 02 02   			sta	VDC_DL, x		; 6
 1955    02:C538  B9 00 46   			lda	BLK_4000_BL_H, y	; 5
 1956               0001     		.if	BLKDEF_CHR_FLAG
 1957    02:C53B  29 F3      			and	#%11110011		; 2
 1958                        		.endif
 1959    02:C53D  1A         			inc	a			; 2
 1960    02:C53E  9D 03 02   			sta	VDC_DH, x		; 6
 1961                        	
 1962    02:C541  C6 00      			dec	<map_count		; 6
 1963    02:C543  F0 19      			beq	!end+			; 2
 1964                        	
 1965    02:C545  B9 00 43   	b4000_btm_odd:	lda	BLK_4000_BR_L, y	; 5
 1966    02:C548  9D 02 02   			sta	VDC_DL, x		; 6
 1967    02:C54B  B9 00 47   			lda	BLK_4000_BR_H, y	; 5
 1968               0001     		.if	BLKDEF_CHR_FLAG
 1969    02:C54E  29 F3      			and	#%11110011		; 2
 1970                        		.endif
 1971    02:C550  1A         			inc	a			; 2
 1972    02:C551  9D 03 02   			sta	VDC_DH, x		; 6
 1973                        	
 1974    02:C554  E6 EC      			inc.l	<_bp			; 6
 1975    02:C556  D0 02      			bne	!+			; 2/4
 1976    02:C558  E6 ED      			inc.h	<_bp			; 6
 1977                        	
 1978    02:C55A  C6 00      	!:		dec	<map_count		; 6
 1979    02:C55C  D0 D1      			bne	!repeat-		; 4
 1980                        	
 1981    02:C55E  60         	!end:		rts
 1982                        	
 1983                        			; top horizontal (32+2 rept)
 1984                        			;
 1985                        			; 89 cycles per block * 17 -> 1513 cycles
 1986                        	
 1987    02:C55F  B2 EC      	!repeat:	lda	[_bp]			; 7
 1988    02:C561  A8         			tay				; 2
 1989                        	
 1990    02:C562  B9 00 48   	b4800_top_even:	lda	BLK_4800_TL_L, y	; 5
 1991    02:C565  9D 02 02   			sta	VDC_DL, x		; 6
 1992    02:C568  B9 00 4C   			lda	BLK_4800_TL_H, y	; 5
 1993               0001     		.if	BLKDEF_CHR_FLAG
 1994    02:C56B  29 F3      			and	#%11110011		; 2
 1995                        		.endif
 1996    02:C56D  1A         			inc	a			; 2
 1997    02:C56E  9D 03 02   			sta	VDC_DH, x		; 6
 1998                        	
 1999    02:C571  C6 00      			dec	<map_count		; 6
 2000    02:C573  F0 19      			beq	!end+			; 2
 2001                        	
 2002    02:C575  B9 00 49   	b4800_top_odd:	lda	BLK_4800_TR_L, y	; 5
 2003    02:C578  9D 02 02   			sta	VDC_DL, x		; 6
 2004    02:C57B  B9 00 4D   			lda	BLK_4800_TR_H, y	; 5
 2005               0001     		.if	BLKDEF_CHR_FLAG
 2006    02:C57E  29 F3      			and	#%11110011		; 2
 2007                        		.endif
 2008    02:C580  1A         			inc	a			; 2
 2009    02:C581  9D 03 02   			sta	VDC_DH, x		; 6
 2010                        	
 2011    02:C584  E6 EC      			inc.l	<_bp			; 6
 2012    02:C586  D0 02      			bne	!+			; 2/4
 2013    02:C588  E6 ED      			inc.h	<_bp			; 6
 2014                        	
 2015    02:C58A  C6 00      	!:		dec	<map_count		; 6
 2016    02:C58C  D0 D1      			bne	!repeat-		; 4
 2017                        	
 2018    02:C58E  60         	!end:		rts
 2019                        	
 2020                        			; btm horizontal (32+2 rept)
 2021                        			;
 2022                        			; 89 cycles per block * 17 -> 1513 cycles
 2023                        	
 2024    02:C58F  B2 EC      	!repeat:	lda	[_bp]			; 7
 2025    02:C591  A8         			tay				; 2
 2026                        	
 2027    02:C592  B9 00 4A   	b4800_btm_even:	lda	BLK_4800_BL_L, y	; 5
 2028    02:C595  9D 02 02   			sta	VDC_DL, x		; 6
 2029    02:C598  B9 00 4E   			lda	BLK_4800_BL_H, y	; 5
 2030               0001     		.if	BLKDEF_CHR_FLAG
 2031    02:C59B  29 F3      			and	#%11110011		; 2
 2032                        		.endif
 2033    02:C59D  1A         			inc	a			; 2
 2034    02:C59E  9D 03 02   			sta	VDC_DH, x		; 6
 2035                        	
 2036    02:C5A1  C6 00      			dec	<map_count		; 6
 2037    02:C5A3  F0 19      			beq	!end+			; 2
 2038                        	
 2039    02:C5A5  B9 00 4B   	b4800_btm_odd:	lda	BLK_4800_BR_L, y	; 5
 2040    02:C5A8  9D 02 02   			sta	VDC_DL, x		; 6
 2041    02:C5AB  B9 00 4F   			lda	BLK_4800_BR_H, y	; 5
 2042               0001     		.if	BLKDEF_CHR_FLAG
 2043    02:C5AE  29 F3      			and	#%11110011		; 2
 2044                        		.endif
 2045    02:C5B0  1A         			inc	a			; 2
 2046    02:C5B1  9D 03 02   			sta	VDC_DH, x		; 6
 2047                        	
 2048    02:C5B4  E6 EC      			inc.l	<_bp			; 6
 2049    02:C5B6  D0 02      			bne	!+			; 2/4
 2050    02:C5B8  E6 ED      			inc.h	<_bp			; 6
 2051                        	
 2052    02:C5BA  C6 00      	!:		dec	<map_count		; 6
 2053    02:C5BC  D0 D1      			bne	!repeat-		; 4
 2054                        	
 2055    02:C5BE  60         	!end:		rts
 2056                        	
 2057                        			; top horizontal (32+2 rept)
 2058                        			;
 2059                        			; 89 cycles per block * 17 -> 1513 cycles
 2060                        	
 2061    02:C5BF  B2 EC      	!repeat:	lda	[_bp]			; 7
 2062    02:C5C1  A8         			tay				; 2
 2063                        	
 2064    02:C5C2  B9 00 50   	b5000_top_even:	lda	BLK_5000_TL_L, y	; 5
 2065    02:C5C5  9D 02 02   			sta	VDC_DL, x		; 6
 2066    02:C5C8  B9 00 54   			lda	BLK_5000_TL_H, y	; 5
 2067               0001     		.if	BLKDEF_CHR_FLAG
 2068    02:C5CB  29 F3      			and	#%11110011		; 2
 2069                        		.endif
 2070    02:C5CD  1A         			inc	a			; 2
 2071    02:C5CE  9D 03 02   			sta	VDC_DH, x		; 6
 2072                        	
 2073    02:C5D1  C6 00      			dec	<map_count		; 6
 2074    02:C5D3  F0 19      			beq	!end+			; 2
 2075                        	
 2076    02:C5D5  B9 00 51   	b5000_top_odd:	lda	BLK_5000_TR_L, y	; 5
 2077    02:C5D8  9D 02 02   			sta	VDC_DL, x		; 6
 2078    02:C5DB  B9 00 55   			lda	BLK_5000_TR_H, y	; 5
 2079               0001     		.if	BLKDEF_CHR_FLAG
 2080    02:C5DE  29 F3      			and	#%11110011		; 2
 2081                        		.endif
 2082    02:C5E0  1A         			inc	a			; 2
 2083    02:C5E1  9D 03 02   			sta	VDC_DH, x		; 6
 2084                        	
 2085    02:C5E4  E6 EC      			inc.l	<_bp			; 6
 2086    02:C5E6  D0 02      			bne	!+			; 2/4
 2087    02:C5E8  E6 ED      			inc.h	<_bp			; 6
 2088                        	
 2089    02:C5EA  C6 00      	!:		dec	<map_count		; 6
 2090    02:C5EC  D0 D1      			bne	!repeat-		; 4
 2091                        	
 2092    02:C5EE  60         	!end:		rts
 2093                        	
 2094                        			; btm horizontal (32+2 rept)
 2095                        			;
 2096                        			; 89 cycles per block * 17 -> 1513 cycles
 2097                        	
 2098    02:C5EF  B2 EC      	!repeat:	lda	[_bp]			; 7
 2099    02:C5F1  A8         			tay				; 2
 2100                        	
 2101    02:C5F2  B9 00 52   	b5000_btm_even:	lda	BLK_5000_BL_L, y	; 5
 2102    02:C5F5  9D 02 02   			sta	VDC_DL, x		; 6
 2103    02:C5F8  B9 00 56   			lda	BLK_5000_BL_H, y	; 5
 2104               0001     		.if	BLKDEF_CHR_FLAG
 2105    02:C5FB  29 F3      			and	#%11110011		; 2
 2106                        		.endif
 2107    02:C5FD  1A         			inc	a			; 2
 2108    02:C5FE  9D 03 02   			sta	VDC_DH, x		; 6
 2109                        	
 2110    02:C601  C6 00      			dec	<map_count		; 6
 2111    02:C603  F0 19      			beq	!end+			; 2
 2112                        	
 2113    02:C605  B9 00 53   	b5000_btm_odd:	lda	BLK_5000_BR_L, y	; 5
 2114    02:C608  9D 02 02   			sta	VDC_DL, x		; 6
 2115    02:C60B  B9 00 57   			lda	BLK_5000_BR_H, y	; 5
 2116               0001     		.if	BLKDEF_CHR_FLAG
 2117    02:C60E  29 F3      			and	#%11110011		; 2
 2118                        		.endif
 2119    02:C610  1A         			inc	a			; 2
 2120    02:C611  9D 03 02   			sta	VDC_DH, x		; 6
 2121                        	
 2122    02:C614  E6 EC      			inc.l	<_bp			; 6
 2123    02:C616  D0 02      			bne	!+			; 2/4
 2124    02:C618  E6 ED      			inc.h	<_bp			; 6
 2125                        	
 2126    02:C61A  C6 00      	!:		dec	<map_count		; 6
 2127    02:C61C  D0 D1      			bne	!repeat-		; 4
 2128                        	
 2129    02:C61E  60         	!end:		rts
 2130                        	
 2131                        			; top horizontal (32+2 rept)
 2132                        			;
 2133                        			; 89 cycles per block * 17 -> 1513 cycles
 2134                        	
 2135    02:C61F  B2 EC      	!repeat:	lda	[_bp]			; 7
 2136    02:C621  A8         			tay				; 2
 2137                        	
 2138    02:C622  B9 00 58   	b5800_top_even:	lda	BLK_5800_TL_L, y	; 5
 2139    02:C625  9D 02 02   			sta	VDC_DL, x		; 6
 2140    02:C628  B9 00 5C   			lda	BLK_5800_TL_H, y	; 5
 2141               0001     		.if	BLKDEF_CHR_FLAG
 2142    02:C62B  29 F3      			and	#%11110011		; 2
 2143                        		.endif
 2144    02:C62D  1A         			inc	a			; 2
 2145    02:C62E  9D 03 02   			sta	VDC_DH, x		; 6
 2146                        	
 2147    02:C631  C6 00      			dec	<map_count		; 6
 2148    02:C633  F0 19      			beq	!end+			; 2
 2149                        	
 2150    02:C635  B9 00 59   	b5800_top_odd:	lda	BLK_5800_TR_L, y	; 5
 2151    02:C638  9D 02 02   			sta	VDC_DL, x		; 6
 2152    02:C63B  B9 00 5D   			lda	BLK_5800_TR_H, y	; 5
 2153               0001     		.if	BLKDEF_CHR_FLAG
 2154    02:C63E  29 F3      			and	#%11110011		; 2
 2155                        		.endif
 2156    02:C640  1A         			inc	a			; 2
 2157    02:C641  9D 03 02   			sta	VDC_DH, x		; 6
 2158                        	
 2159    02:C644  E6 EC      			inc.l	<_bp			; 6
 2160    02:C646  D0 02      			bne	!+			; 2/4
 2161    02:C648  E6 ED      			inc.h	<_bp			; 6
 2162                        	
 2163    02:C64A  C6 00      	!:		dec	<map_count		; 6
 2164    02:C64C  D0 D1      			bne	!repeat-		; 4
 2165                        	
 2166    02:C64E  60         	!end:		rts
 2167                        	
 2168                        			; btm horizontal (32+2 rept)
 2169                        			;
 2170                        			; 89 cycles per block * 17 -> 1513 cycles
 2171                        	
 2172    02:C64F  B2 EC      	!repeat:	lda	[_bp]		; 7
 2173    02:C651  A8         			tay				; 2
 2174                        	
 2175    02:C652  B9 00 5A   	b5800_btm_even:	lda	BLK_5800_BL_L, y	; 5
 2176    02:C655  9D 02 02   			sta	VDC_DL, x		; 6
 2177    02:C658  B9 00 5E   			lda	BLK_5800_BL_H, y	; 5
 2178               0001     		.if	BLKDEF_CHR_FLAG
 2179    02:C65B  29 F3      			and	#%11110011		; 2
 2180                        		.endif
 2181    02:C65D  1A         			inc	a			; 2
 2182    02:C65E  9D 03 02   			sta	VDC_DH, x		; 6
 2183                        	
 2184    02:C661  C6 00      			dec	<map_count		; 6
 2185    02:C663  F0 19      			beq	!end+			; 2
 2186                        	
 2187    02:C665  B9 00 5B   	b5800_btm_odd:	lda	BLK_5800_BR_L, y	; 5
 2188    02:C668  9D 02 02   			sta	VDC_DL, x		; 6
 2189    02:C66B  B9 00 5F   			lda	BLK_5800_BR_H, y	; 5
 2190               0001     		.if	BLKDEF_CHR_FLAG
 2191    02:C66E  29 F3      			and	#%11110011		; 2
 2192                        		.endif
 2193    02:C670  1A         			inc	a			; 2
 2194    02:C671  9D 03 02   			sta	VDC_DH, x		; 6
 2195                        	
 2196    02:C674  E6 EC      			inc.l	<_bp			; 6
 2197    02:C676  D0 02      			bne	!+			; 2/4
 2198    02:C678  E6 ED      			inc.h	<_bp			; 6
 2199                        	
 2200    02:C67A  C6 00      	!:		dec	<map_count		; 6
 2201    02:C67C  D0 D1      			bne	!repeat-		; 4
 2202                        	
 2203    02:C67E  60         	!end:		rts
 2204                        	
 2205                        	
 2206                        	
 2207                        	; ***************************************************************************
 2208                        	; ***************************************************************************
 2209                        	;
 2210                        	; blk_col_strip - Draw a single column of CHR into the BAT.
 2211                        	;
 2212                        	
 2213    02:C67F  20 34 E4   	blk_col_strip:	jsr	set_di_xy_mawr		; Set the BAT VRAM destination.
 2214                        	
 2215    02:C682  A5 FC      			lda	<map_chr_x		; Select what drawing code to
 2216    02:C684  4A         			lsr	a			; use depending upon even/odd
 2217    02:C685  A5 FE      			lda	<map_chr_y		; CHR coordinates (not BAT to
 2218    02:C687  29 01      			and	#1			; support unaligned drawing).
 2219    02:C689  2A         			rol	a
 2220    02:C68A  0A         			asl	a			; N.B. Always leaves C clear.
 2221    02:C68B  1D B8 2B   			ora.h	vdc_blk_addr, x		; What is the BLK data address?
 2222    02:C68E  29 1E      			and	#%00011110		; $4000, $4800, $5000 or $5800.
 2223    02:C690  A8         			tay
 2224    02:C691  B9 9E C6   			lda.h	.jump_table, y		; Push the address of the code.
 2225    02:C694  48         			pha
 2226    02:C695  B9 9D C6   			lda.l	.jump_table, y
 2227    02:C698  48         			pha
 2228                        	
 2229    02:C699  B2 EC      			lda	[_bp]			; Get the first BLK number.
 2230    02:C69B  A8         			tay
 2231                        	
 2232    02:C69C  60         			rts				; Jump to the drawing code.
 2233                        	
 2234    02:C69D  BF C6      	.jump_table:	dw	b4000_lhs_even - 1
 2235    02:C69F  F5 C6      			dw	b4000_rhs_even - 1
 2236    02:C6A1  D2 C6      			dw	b4000_lhs_odd - 1
 2237    02:C6A3  08 C7      			dw	b4000_rhs_odd - 1
 2238                        	
 2239    02:C6A5  2B C7      			dw	b4800_lhs_even - 1
 2240    02:C6A7  61 C7      			dw	b4800_rhs_even - 1
 2241    02:C6A9  3E C7      			dw	b4800_lhs_odd - 1
 2242    02:C6AB  74 C7      			dw	b4800_rhs_odd - 1
 2243                        	
 2244    02:C6AD  97 C7      			dw	b5000_lhs_even - 1
 2245    02:C6AF  CD C7      			dw	b5000_rhs_even - 1
 2246    02:C6B1  AA C7      			dw	b5000_lhs_odd - 1
 2247    02:C6B3  E0 C7      			dw	b5000_rhs_odd - 1
 2248                        	
 2249    02:C6B5  03 C8      			dw	b5800_lhs_even - 1
 2250    02:C6B7  39 C8      			dw	b5800_rhs_even - 1
 2251    02:C6B9  16 C8      			dw	b5800_lhs_odd - 1
 2252    02:C6BB  4C C8      			dw	b5800_rhs_odd - 1
 2253                        	
 2254                        			; lhs vertical (28+2 rept)
 2255                        			;
 2256                        			; N.B. C is always clear on entry.
 2257                        			;
 2258                        			; 100 cycles per block * 15 -> 1500 cycles
 2259                        	
 2260    02:C6BD  B2 EC      	!repeat:	lda	[_bp]			; 7
 2261    02:C6BF  A8         			tay				; 2
 2262                        	
 2263    02:C6C0  B9 00 40   	b4000_lhs_even:	lda	BLK_4000_TL_L, y	; 5
 2264    02:C6C3  9D 02 02   			sta	VDC_DL, x		; 6
 2265    02:C6C6  B9 00 44   			lda	BLK_4000_TL_H, y	; 5
 2266               0001     		.if	BLKDEF_CHR_FLAG
 2267    02:C6C9  29 F3      			and	#%11110011		; 2
 2268                        		.endif
 2269    02:C6CB  1A         			inc	a			; 2
 2270    02:C6CC  9D 03 02   			sta	VDC_DH, x		; 6
 2271                        	
 2272    02:C6CF  C6 00      			dec	<map_count		; 6
 2273    02:C6D1  F0 1F      			beq	!end+			; 2
 2274                        	
 2275    02:C6D3  B9 00 42   	b4000_lhs_odd:	lda	BLK_4000_BL_L, y	; 5
 2276    02:C6D6  9D 02 02   			sta	VDC_DL, x		; 6
 2277    02:C6D9  B9 00 46   			lda	BLK_4000_BL_H, y	; 5
 2278               0001     		.if	BLKDEF_CHR_FLAG
 2279    02:C6DC  29 F3      			and	#%11110011		; 2
 2280                        		.endif
 2281    02:C6DE  1A         			inc	a			; 2
 2282    02:C6DF  9D 03 02   			sta	VDC_DH, x		; 6
 2283                        	
 2284    02:C6E2  BD 7D 26   			lda	vdc_map_line_w, x	; 5
 2285    02:C6E5  65 EC      			adc.l	<_bp			; 4
 2286    02:C6E7  85 EC      			sta.l	<_bp			; 4
 2287    02:C6E9  90 03      			bcc	!+			; 2/4
 2288    02:C6EB  E6 ED      			inc.h	<_bp			; 6
 2289    02:C6ED  18         			clc				; 2
 2290                        	
 2291    02:C6EE  C6 00      	!:		dec	<map_count		; 6
 2292    02:C6F0  D0 CB      			bne	!repeat-		; 4
 2293                        	
 2294    02:C6F2  60         	!end:		rts
 2295                        	
 2296                        			; rhs vertical (28+2 rept)
 2297                        			;
 2298                        			; N.B. C is always clear on entry.
 2299                        			;
 2300                        			; 100 cycles per block * 15 -> 1500 cycles
 2301                        	
 2302    02:C6F3  B2 EC      	!repeat:	lda	[_bp]			; 7
 2303    02:C6F5  A8         			tay				; 2
 2304                        	
 2305    02:C6F6  B9 00 41   	b4000_rhs_even:	lda	BLK_4000_TR_L, y	; 5
 2306    02:C6F9  9D 02 02   			sta	VDC_DL, x		; 6
 2307    02:C6FC  B9 00 45   			lda	BLK_4000_TR_H, y	; 5
 2308               0001     		.if	BLKDEF_CHR_FLAG
 2309    02:C6FF  29 F3      			and	#%11110011		; 2
 2310                        		.endif
 2311    02:C701  1A         			inc	a			; 2
 2312    02:C702  9D 03 02   			sta	VDC_DH, x		; 6
 2313                        	
 2314    02:C705  C6 00      			dec	<map_count		; 6
 2315    02:C707  F0 1F      			beq	!end+			; 2
 2316                        	
 2317    02:C709  B9 00 43   	b4000_rhs_odd:	lda	BLK_4000_BR_L, y	; 5
 2318    02:C70C  9D 02 02   			sta	VDC_DL, x		; 6
 2319    02:C70F  B9 00 47   			lda	BLK_4000_BR_H, y	; 5
 2320               0001     		.if	BLKDEF_CHR_FLAG
 2321    02:C712  29 F3      			and	#%11110011		; 2
 2322                        		.endif
 2323    02:C714  1A         			inc	a			; 2
 2324    02:C715  9D 03 02   			sta	VDC_DH, x		; 6
 2325                        	
 2326    02:C718  BD 7D 26   			lda	vdc_map_line_w, x	; 5
 2327    02:C71B  65 EC      			adc.l	<_bp			; 4
 2328    02:C71D  85 EC      			sta.l	<_bp			; 4
 2329    02:C71F  90 03      			bcc	!+			; 2/4
 2330    02:C721  E6 ED      			inc.h	<_bp			; 6
 2331    02:C723  18         			clc				; 2
 2332                        	
 2333    02:C724  C6 00      	!:		dec	<map_count		; 6
 2334    02:C726  D0 CB      			bne	!repeat-		; 4
 2335                        	
 2336    02:C728  60         	!end:		rts
 2337                        	
 2338                        			; lhs vertical (28+2 rept)
 2339                        			;
 2340                        			; N.B. C is always clear on entry.
 2341                        			;
 2342                        			; 100 cycles per block * 15 -> 1500 cycles
 2343                        	
 2344    02:C729  B2 EC      	!repeat:	lda	[_bp]			; 7
 2345    02:C72B  A8         			tay				; 2
 2346                        	
 2347    02:C72C  B9 00 48   	b4800_lhs_even:	lda	BLK_4800_TL_L, y	; 5
 2348    02:C72F  9D 02 02   			sta	VDC_DL, x		; 6
 2349    02:C732  B9 00 4C   			lda	BLK_4800_TL_H, y	; 5
 2350               0001     		.if	BLKDEF_CHR_FLAG
 2351    02:C735  29 F3      			and	#%11110011		; 2
 2352                        		.endif
 2353    02:C737  1A         			inc	a			; 2
 2354    02:C738  9D 03 02   			sta	VDC_DH, x		; 6
 2355                        	
 2356    02:C73B  C6 00      			dec	<map_count		; 6
 2357    02:C73D  F0 1F      			beq	!end+			; 2
 2358                        	
 2359    02:C73F  B9 00 4A   	b4800_lhs_odd:	lda	BLK_4800_BL_L, y	; 5
 2360    02:C742  9D 02 02   			sta	VDC_DL, x		; 6
 2361    02:C745  B9 00 4E   			lda	BLK_4800_BL_H, y	; 5
 2362               0001     		.if	BLKDEF_CHR_FLAG
 2363    02:C748  29 F3      			and	#%11110011		; 2
 2364                        		.endif
 2365    02:C74A  1A         			inc	a			; 2
 2366    02:C74B  9D 03 02   			sta	VDC_DH, x		; 6
 2367                        	
 2368    02:C74E  BD 7D 26   			lda	vdc_map_line_w, x	; 5
 2369    02:C751  65 EC      			adc.l	<_bp			; 4
 2370    02:C753  85 EC      			sta.l	<_bp			; 4
 2371    02:C755  90 03      			bcc	!+			; 2/4
 2372    02:C757  E6 ED      			inc.h	<_bp			; 6
 2373    02:C759  18         			clc				; 2
 2374                        	
 2375    02:C75A  C6 00      	!:		dec	<map_count		; 6
 2376    02:C75C  D0 CB      			bne	!repeat-		; 4
 2377                        	
 2378    02:C75E  60         	!end:		rts
 2379                        	
 2380                        			; rhs vertical (28+2 rept)
 2381                        			;
 2382                        			; N.B. C is always clear on entry.
 2383                        			;
 2384                        			; 100 cycles per block * 15 -> 1500 cycles
 2385                        	
 2386    02:C75F  B2 EC      	!repeat:	lda	[_bp]			; 7
 2387    02:C761  A8         			tay				; 2
 2388                        	
 2389    02:C762  B9 00 49   	b4800_rhs_even:	lda	BLK_4800_TR_L, y	; 5
 2390    02:C765  9D 02 02   			sta	VDC_DL, x		; 6
 2391    02:C768  B9 00 4D   			lda	BLK_4800_TR_H, y	; 5
 2392               0001     		.if	BLKDEF_CHR_FLAG
 2393    02:C76B  29 F3      			and	#%11110011		; 2
 2394                        		.endif
 2395    02:C76D  1A         			inc	a			; 2
 2396    02:C76E  9D 03 02   			sta	VDC_DH, x		; 6
 2397                        	
 2398    02:C771  C6 00      			dec	<map_count		; 6
 2399    02:C773  F0 1F      			beq	!end+			; 2
 2400                        	
 2401    02:C775  B9 00 4B   	b4800_rhs_odd:	lda	BLK_4800_BR_L, y	; 5
 2402    02:C778  9D 02 02   			sta	VDC_DL, x		; 6
 2403    02:C77B  B9 00 4F   			lda	BLK_4800_BR_H, y	; 5
 2404               0001     		.if	BLKDEF_CHR_FLAG
 2405    02:C77E  29 F3      			and	#%11110011		; 2
 2406                        		.endif
 2407    02:C780  1A         			inc	a			; 2
 2408    02:C781  9D 03 02   			sta	VDC_DH, x		; 6
 2409                        	
 2410    02:C784  BD 7D 26   			lda	vdc_map_line_w, x	; 5
 2411    02:C787  65 EC      			adc.l	<_bp			; 4
 2412    02:C789  85 EC      			sta.l	<_bp			; 4
 2413    02:C78B  90 03      			bcc	!+			; 2/4
 2414    02:C78D  E6 ED      			inc.h	<_bp			; 6
 2415    02:C78F  18         			clc				; 2
 2416                        	
 2417    02:C790  C6 00      	!:		dec	<map_count		; 6
 2418    02:C792  D0 CB      			bne	!repeat-		; 4
 2419                        	
 2420    02:C794  60         	!end:		rts
 2421                        	
 2422                        			; lhs vertical (28+2 rept)
 2423                        			;
 2424                        			; N.B. C is always clear on entry.
 2425                        			;
 2426                        			; 100 cycles per block * 15 -> 1500 cycles
 2427                        	
 2428    02:C795  B2 EC      	!repeat:	lda	[_bp]			; 7
 2429    02:C797  A8         			tay				; 2
 2430                        	
 2431    02:C798  B9 00 50   	b5000_lhs_even:	lda	BLK_5000_TL_L, y	; 5
 2432    02:C79B  9D 02 02   			sta	VDC_DL, x		; 6
 2433    02:C79E  B9 00 54   			lda	BLK_5000_TL_H, y	; 5
 2434               0001     		.if	BLKDEF_CHR_FLAG
 2435    02:C7A1  29 F3      			and	#%11110011		; 2
 2436                        		.endif
 2437    02:C7A3  1A         			inc	a			; 2
 2438    02:C7A4  9D 03 02   			sta	VDC_DH, x		; 6
 2439                        	
 2440    02:C7A7  C6 00      			dec	<map_count		; 6
 2441    02:C7A9  F0 1F      			beq	!end+			; 2
 2442                        	
 2443    02:C7AB  B9 00 52   	b5000_lhs_odd:	lda	BLK_5000_BL_L, y	; 5
 2444    02:C7AE  9D 02 02   			sta	VDC_DL, x		; 6
 2445    02:C7B1  B9 00 56   			lda	BLK_5000_BL_H, y	; 5
 2446               0001     		.if	BLKDEF_CHR_FLAG
 2447    02:C7B4  29 F3      			and	#%11110011		; 2
 2448                        		.endif
 2449    02:C7B6  1A         			inc	a			; 2
 2450    02:C7B7  9D 03 02   			sta	VDC_DH, x		; 6
 2451                        	
 2452    02:C7BA  BD 7D 26   			lda	vdc_map_line_w, x	; 5
 2453    02:C7BD  65 EC      			adc.l	<_bp			; 4
 2454    02:C7BF  85 EC      			sta.l	<_bp			; 4
 2455    02:C7C1  90 03      			bcc	!+			; 2/4
 2456    02:C7C3  E6 ED      			inc.h	<_bp			; 6
 2457    02:C7C5  18         			clc				; 2
 2458                        	
 2459    02:C7C6  C6 00      	!:		dec	<map_count		; 6
 2460    02:C7C8  D0 CB      			bne	!repeat-		; 4
 2461                        	
 2462    02:C7CA  60         	!end:		rts
 2463                        	
 2464                        			; rhs vertical (28+2 rept)
 2465                        			;
 2466                        			; N.B. C is always clear on entry.
 2467                        			;
 2468                        			; 100 cycles per block * 15 -> 1500 cycles
 2469                        	
 2470    02:C7CB  B2 EC      	!repeat:	lda	[_bp]			; 7
 2471    02:C7CD  A8         			tay				; 2
 2472                        	
 2473    02:C7CE  B9 00 51   	b5000_rhs_even:	lda	BLK_5000_TR_L, y	; 5
 2474    02:C7D1  9D 02 02   			sta	VDC_DL, x		; 6
 2475    02:C7D4  B9 00 55   			lda	BLK_5000_TR_H, y	; 5
 2476               0001     		.if	BLKDEF_CHR_FLAG
 2477    02:C7D7  29 F3      			and	#%11110011		; 2
 2478                        		.endif
 2479    02:C7D9  1A         			inc	a			; 2
 2480    02:C7DA  9D 03 02   			sta	VDC_DH, x		; 6
 2481                        	
 2482    02:C7DD  C6 00      			dec	<map_count		; 6
 2483    02:C7DF  F0 1F      			beq	!end+			; 2
 2484                        	
 2485    02:C7E1  B9 00 53   	b5000_rhs_odd:	lda	BLK_5000_BR_L, y	; 5
 2486    02:C7E4  9D 02 02   			sta	VDC_DL, x		; 6
 2487    02:C7E7  B9 00 57   			lda	BLK_5000_BR_H, y	; 5
 2488               0001     		.if	BLKDEF_CHR_FLAG
 2489    02:C7EA  29 F3      			and	#%11110011		; 2
 2490                        		.endif
 2491    02:C7EC  1A         			inc	a			; 2
 2492    02:C7ED  9D 03 02   			sta	VDC_DH, x		; 6
 2493                        	
 2494    02:C7F0  BD 7D 26   			lda	vdc_map_line_w, x	; 5
 2495    02:C7F3  65 EC      			adc.l	<_bp			; 4
 2496    02:C7F5  85 EC      			sta.l	<_bp			; 4
 2497    02:C7F7  90 03      			bcc	!+			; 2/4
 2498    02:C7F9  E6 ED      			inc.h	<_bp			; 6
 2499    02:C7FB  18         			clc				; 2
 2500                        	
 2501    02:C7FC  C6 00      	!:		dec	<map_count		; 6
 2502    02:C7FE  D0 CB      			bne	!repeat-		; 4
 2503                        	
 2504    02:C800  60         	!end:		rts
 2505                        	
 2506                        			; lhs vertical (28+2 rept)
 2507                        			;
 2508                        			; N.B. C is always clear on entry.
 2509                        			;
 2510                        			; 100 cycles per block * 15 -> 1500 cycles
 2511                        	
 2512    02:C801  B2 EC      	!repeat:	lda	[_bp]			; 7
 2513    02:C803  A8         			tay				; 2
 2514                        	
 2515    02:C804  B9 00 58   	b5800_lhs_even:	lda	BLK_5800_TL_L, y	; 5
 2516    02:C807  9D 02 02   			sta	VDC_DL, x		; 6
 2517    02:C80A  B9 00 5C   			lda	BLK_5800_TL_H, y	; 5
 2518               0001     		.if	BLKDEF_CHR_FLAG
 2519    02:C80D  29 F3      			and	#%11110011		; 2
 2520                        		.endif
 2521    02:C80F  1A         			inc	a			; 2
 2522    02:C810  9D 03 02   			sta	VDC_DH, x		; 6
 2523                        	
 2524    02:C813  C6 00      			dec	<map_count		; 6
 2525    02:C815  F0 1F      			beq	!end+			; 2
 2526                        	
 2527    02:C817  B9 00 5A   	b5800_lhs_odd:	lda	BLK_5800_BL_L, y	; 5
 2528    02:C81A  9D 02 02   			sta	VDC_DL, x		; 6
 2529    02:C81D  B9 00 5E   			lda	BLK_5800_BL_H, y	; 5
 2530               0001     		.if	BLKDEF_CHR_FLAG
 2531    02:C820  29 F3      			and	#%11110011		; 2
 2532                        		.endif
 2533    02:C822  1A         			inc	a			; 2
 2534    02:C823  9D 03 02   			sta	VDC_DH, x		; 6
 2535                        	
 2536    02:C826  BD 7D 26   			lda	vdc_map_line_w, x	; 5
 2537    02:C829  65 EC      			adc.l	<_bp			; 4
 2538    02:C82B  85 EC      			sta.l	<_bp			; 4
 2539    02:C82D  90 03      			bcc	!+			; 2/4
 2540    02:C82F  E6 ED      			inc.h	<_bp			; 6
 2541    02:C831  18         			clc				; 2
 2542                        	
 2543    02:C832  C6 00      	!:		dec	<map_count		; 6
 2544    02:C834  D0 CB      			bne	!repeat-		; 4
 2545                        	
 2546    02:C836  60         	!end:		rts
 2547                        	
 2548                        			; rhs vertical (28+2 rept)
 2549                        			;
 2550                        			; N.B. C is always clear on entry.
 2551                        			;
 2552                        			; 100 cycles per block * 15 -> 1500 cycles
 2553                        	
 2554    02:C837  B2 EC      	!repeat:	lda	[_bp]			; 7
 2555    02:C839  A8         			tay				; 2
 2556                        	
 2557    02:C83A  B9 00 59   	b5800_rhs_even:	lda	BLK_5800_TR_L, y	; 5
 2558    02:C83D  9D 02 02   			sta	VDC_DL, x		; 6
 2559    02:C840  B9 00 5D   			lda	BLK_5800_TR_H, y	; 5
 2560               0001     		.if	BLKDEF_CHR_FLAG
 2561    02:C843  29 F3      			and	#%11110011		; 2
 2562                        		.endif
 2563    02:C845  1A         			inc	a			; 2
 2564    02:C846  9D 03 02   			sta	VDC_DH, x		; 6
 2565                        	
 2566    02:C849  C6 00      			dec	<map_count		; 6
 2567    02:C84B  F0 1F      			beq	!end+			; 2
 2568                        	
 2569    02:C84D  B9 00 5B   	b5800_rhs_odd:	lda	BLK_5800_BR_L, y	; 5
 2570    02:C850  9D 02 02   			sta	VDC_DL, x		; 6
 2571    02:C853  B9 00 5F   			lda	BLK_5800_BR_H, y	; 5
 2572               0001     		.if	BLKDEF_CHR_FLAG
 2573    02:C856  29 F3      			and	#%11110011		; 2
 2574                        		.endif
 2575    02:C858  1A         			inc	a			; 2
 2576    02:C859  9D 03 02   			sta	VDC_DH, x		; 6
 2577                        	
 2578    02:C85C  BD 7D 26   			lda	vdc_map_line_w, x	; 5
 2579    02:C85F  65 EC      			adc.l	<_bp			; 4
 2580    02:C861  85 EC      			sta.l	<_bp			; 4
 2581    02:C863  90 03      			bcc	!+			; 2/4
 2582    02:C865  E6 ED      			inc.h	<_bp			; 6
 2583    02:C867  18         			clc				; 2
 2584                        	
 2585    02:C868  C6 00      	!:		dec	<map_count		; 6
 2586    02:C86A  D0 CB      			bne	!repeat-		; 4
 2587                        	
 2588    02:C86C  60         	!end:		rts
 2589                        	
 2590                        		.endif	BLKDEF_POINTERS
 2591                        	
 2592                        		.endprocgroup	; blkmap_group
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   80                        		.else
   84                        		.endif	HUCC_USES_BLKMAP
   85                        	
   86               0001     		.ifdef	HUCC_USES_CHRMAP		; Set in hucc_chrmap.h
                             #[3]   "..\..\..\include\hucc\chrmap.asm"
   87                        			include	"chrmap.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; chrmap.asm
    5                        	;
    6                        	; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
    7                        	;
    8                        	; Copyright John Brandwood 2025.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
   18                        	;
   19                        	; The maximum total size for a chrmap is 16KBytes, which allows for maps up
   20                        	; to 256x32 tiles (2048x256 pixels).
   21                        	;
   22                        	; ***************************************************************************
   23                        	; ***************************************************************************
   24                        	
   25                        	;
   26                        	; Include dependancies ...
   27                        	;
   28                        	
   29                        			include "blkmap.asm"		; This defines the variables.
   30                        	
   31                        	;
   32                        	; Chrmaps in BAT format normally address all of VRAM from $0400..$7FFF, but
   33                        	; they can be limited to use the 32KByte of characters in VRAM $1000..$4FFF
   34                        	; which then frees up 2-bits for flag information for each character in the
   35                        	; BAT entry.
   36                        	;
   37                        	; These 2-bits are perfect for using as collision information in game maps,
   38                        	; allowing storage of states like transparent, solid, up-slope, down-slope.
   39                        	;
   40                        	; Typically this flag information is set by the map conversion tools from a
   41                        	; seperate "collision" map layer.
   42                        	;
   43                        	
   44               0000     		.ifndef	CHRMAP_BAT_FLAG
   46                        		.endif
   47                        	
   48                        	;
   49                        	;
   50                        	;
   51                        	
   52                        	
   53                        	
   54    02:DB45             	chrmap_group	.procgroup
   55                        	
   56                        	; ***************************************************************************
   57                        	; ***************************************************************************
   58                        	;
   59                        	; _draw_bat - Draw the entire screen at the current coordinates.
   60                        	; _sgx_draw_bat - Draw the entire screen at the current coordinates.
   61                        	;
   62                        	; void __fastcall draw_bat( void );
   63                        	; void __fastcall sgx_draw_bat( void );
   64                        	;
   65                        	
   66               0001     		.if	SUPPORT_SGX
   67                        	
   68                        	_sgx_draw_bat	.proc
   74                        			.endp
   75                        		.endif
   76                        	
   77    02:DB45             	_draw_bat	.proc
   78                        	
   79    02:DB45  82         			clx				; Offset to PCE VDC.
   80                        	
   81    02:DB46  43 08      			tma3				; Preserve MPR3..MPR5.
   82    02:DB48  48         			pha
   83    02:DB49  43 10      			tma4
   84    02:DB4B  48         			pha
   85    02:DB4C  43 20      			tma5
   86    02:DB4E  48         			pha
   87                        	
   88    02:DB4F  20 F2 DB   			jsr	bat_pxl_2_chr		; Set up the draw coordinates.
   89                        	
   90    02:DB52  A5 FC      			lda	<map_chr_x		; Reset previous X position.
   91    02:DB54  9D B2 2B   			sta	vdc_old_chr_x, x
   92                        	
   93    02:DB57  A5 FE      			lda	<map_chr_y		; Reset previous Y position,
   94    02:DB59  1A         			inc	a			; ready to draw rows upwards.
   95    02:DB5A  9D B3 2B   			sta	vdc_old_chr_y, x
   96                        	
   97    02:DB5D  BD 7B 26   			lda	vdc_map_draw_w, x	; Draw the whole screen.
   98    02:DB60  85 FA      			sta	<map_draw_w
   99    02:DB62  BD 7C 26   			lda	vdc_map_draw_h, x
  100    02:DB65  85 FB      			sta	<map_draw_h
  101                        	
  102    02:DB67  20 D5 DC   			jsr	bat_scroll_y		; Draw N row of CHR to the BAT.
  103                        	
  104    02:DB6A  68         			pla				; Restore MPR3..MPR5.
  105    02:DB6B  53 20      			tam5
  106    02:DB6D  68         			pla
  107    02:DB6E  53 10      			tam4
  108    02:DB70  68         			pla
  109    02:DB71  53 08      			tam3
  110                        	
  111                        			leave
         02:DB73  4C EF FF   			jmp	leave_proc
  112                        	
  113                        			.endp
  114                        	
  115                        	
  116                        	
  117                        	; ***************************************************************************
  118                        	; ***************************************************************************
  119                        	;
  120                        	; _scroll_bat - Draw a single row of CHR into the BAT to update the edge.
  121                        	; _sgx_scroll_bat - Draw a single row of CHR into the BAT to update the edge.
  122                        	;
  123                        	; void __fastcall scroll_bat( void );
  124                        	; void __fastcall sgx_scroll_bat( void );
  125                        	;
  126                        	
  127               0001     		.if	SUPPORT_SGX
  128                        	
  129                        	_sgx_scroll_bat	.proc
  135                        			.endp
  136                        		.endif
  137                        	
  138    02:DB76             	_scroll_bat	.proc
  139                        	
  140    02:DB76  82         			clx				; Offset to PCE VDC.
  141                        	
  142    02:DB77  43 08      			tma3				; Preserve MPR3..MPR5.
  143    02:DB79  48         			pha
  144    02:DB7A  43 10      			tma4
  145    02:DB7C  48         			pha
  146    02:DB7D  43 20      			tma5
  147    02:DB7F  48         			pha
  148                        	
  149    02:DB80  20 F2 DB   			jsr	bat_pxl_2_chr		; Set up the draw coordinates.
  150                        	
  151    02:DB83  BD 7C 26   			lda	vdc_map_draw_h, x	; Draw new LHS or RHS if needed.
  152    02:DB86  85 FB      			sta	<map_draw_h
  153                        	;		lda	#1			; bat_scroll_x only ever draws a
  154                        	;		sta	<map_draw_w		; single column.
  155    02:DB88  20 16 DC   			jsr	bat_scroll_x
  156                        	
  157    02:DB8B  BD B2 2B   			lda	vdc_old_chr_x, x	; Restore map_chr_x which could
  158    02:DB8E  85 FC      			sta	<map_chr_x		; be changed by bat_scroll_x.
  159                        	
  160    02:DB90  BD 7B 26   			lda	vdc_map_draw_w, x	; Draw new TOP or BTM if needed.
  161    02:DB93  85 FA      			sta	<map_draw_w
  162    02:DB95  A9 01      			lda	#1
  163    02:DB97  85 FB      			sta	<map_draw_h
  164    02:DB99  20 D5 DC   			jsr	bat_scroll_y
  165                        	
  166    02:DB9C  68         			pla				; Restore MPR3..MPR5.
  167    02:DB9D  53 20      			tam5
  168    02:DB9F  68         			pla
  169    02:DBA0  53 10      			tam4
  170    02:DBA2  68         			pla
  171    02:DBA3  53 08      			tam3
  172                        	
  173                        			leave
         02:DBA5  4C EF FF   			jmp	leave_proc
  174                        	
  175                        			.endp
  176                        	
  177                        	
  178                        	
  179                        	; ***************************************************************************
  180                        	; ***************************************************************************
  181                        	;
  182                        	; _blit_bat - Draw a map rectangle to specific BAT coordinates.
  183                        	; _sgx_blit_bat - Draw a map rectangle to specific BAT coordinates.
  184                        	;
  185                        	; void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
  186                        	; void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
  187                        	;
  188                        	; Normally you'd just use _draw_bat() and _scroll_bat(), but for those folks
  189                        	; who really wish to take manual control, you can use this.
  190                        	;
  191                        	
  192               0001     		.if	SUPPORT_SGX
  193                        	
  194                        	_sgx_blit_bat	.proc
  200                        			.endp
  201                        		.endif
  202                        	
  203    02:DBA8             	_blit_bat	.proc
  204                        	
  205    02:DBA8  82         			clx				; Offset to PCE VDC.
  206                        	
  207    02:DBA9  43 08      			tma3				; Preserve MPR3..MPR5.
  208    02:DBAB  48         			pha
  209    02:DBAC  43 10      			tma4
  210    02:DBAE  48         			pha
  211    02:DBAF  43 20      			tma5
  212    02:DBB1  48         			pha
  213                        	
  214    02:DBB2  BD 83 26   			lda	vdc_map_option, x	; Preserve current map options.
  215    02:DBB5  48         			pha
  216    02:DBB6  09 C0      			ora	#MAP_UNALIGNED_X | MAP_UNALIGNED_Y
  217    02:DBB8  9D 83 26   			sta	vdc_map_option, x
  218                        	
  219    02:DBBB  20 F2 DB   			jsr	bat_pxl_2_chr		; Set up the draw coordinates.
  220                        	
  221    02:DBBE  A5 FA      			lda	<map_draw_w		; Are we drawing just 1 column?
  222    02:DBC0  C9 01      			cmp	#1
  223    02:DBC2  F0 1E      			beq	.draw_column
  224                        	
  225                        			; Draw N rows.
  226                        	
  227    02:DBC4  A5 FC      	.draw_rows:	lda	<map_chr_x		; Reset previous X position.
  228    02:DBC6  9D B2 2B   			sta	vdc_old_chr_x, x
  229                        	
  230    02:DBC9  A5 FE      			lda	<map_chr_y		; Reset previous Y position,
  231    02:DBCB  1A         			inc	a			; ready to draw rows upwards.
  232    02:DBCC  9D B3 2B   			sta	vdc_old_chr_y, x
  233                        	
  234    02:DBCF  20 D5 DC   			jsr	bat_scroll_y		; Draw a row of CHR to the BAT.
  235                        	
  236                        			; Drawing completed.
  237                        	
  238    02:DBD2  68         	.finished:	pla				; Restore previous map options.
  239    02:DBD3  9D 83 26   			sta	vdc_map_option, x
  240                        	
  241    02:DBD6  68         			pla				; Restore MPR3..MPR5.
  242    02:DBD7  53 20      			tam5
  243    02:DBD9  68         			pla
  244    02:DBDA  53 10      			tam4
  245    02:DBDC  68         			pla
  246    02:DBDD  53 08      			tam3
  247                        	
  248                        	.exit:		leave
         02:DBDF  4C EF FF   			jmp	leave_proc
  249                        	
  250                        			; Draw 1 column.
  251                        	
  252    02:DBE2  A5 FC      	.draw_column:	lda	<map_chr_x		; Reset previous X position.
  253    02:DBE4  1A         			inc	a			; ready to draw 1 column.
  254    02:DBE5  9D B2 2B   			sta	vdc_old_chr_x, x
  255                        	
  256    02:DBE8  A5 FE      			lda	<map_chr_y		; Reset previous Y position.
  257    02:DBEA  9D B3 2B   			sta	vdc_old_chr_y, x
  258                        	
  259    02:DBED  20 16 DC   			jsr	bat_scroll_x		; Draw a single column of CHR.
  260                        	
  261    02:DBF0  80 E0      			bra	.finished
  262                        	
  263                        			.endp
  264                        	
  265                        	
  266                        	
  267                        	; ***************************************************************************
  268                        	; ***************************************************************************
  269                        	;
  270                        	
  271    02:DBF2  BD 7F 26   	bat_pxl_2_chr:	lda.l	vdc_map_pxl_x, x	; Get current map X coordinate.
  272    02:DBF5  85 FC      			sta.l	<map_pxl_x
  273    02:DBF7  BD 80 26   			lda.h	vdc_map_pxl_x, x	; Xvert map_pxl_x to map_chr_x.
  274    02:DBFA  4A         			lsr	a
  275    02:DBFB  66 FC      			ror.l	<map_pxl_x
  276    02:DBFD  4A         			lsr	a
  277    02:DBFE  66 FC      			ror.l	<map_pxl_x
  278    02:DC00  4A         			lsr	a
  279    02:DC01  66 FC      			ror.l	<map_pxl_x		; Max map width is 256 CHR.
  280                        	
  281    02:DC03  BD 81 26   			lda.l	vdc_map_pxl_y, x	; Get current map Y coordinate.
  282    02:DC06  85 FE      			sta.l	<map_pxl_y
  283    02:DC08  BD 82 26   			lda.h	vdc_map_pxl_y, x	; Xvert map_pxl_y to map_chr_y.
  284    02:DC0B  4A         			lsr	a
  285    02:DC0C  66 FE      			ror.l	<map_pxl_y
  286    02:DC0E  4A         			lsr	a
  287    02:DC0F  66 FE      			ror.l	<map_pxl_y
  288    02:DC11  4A         			lsr	a
  289    02:DC12  66 FE      			ror.l	<map_pxl_y		; Max map width is 256 CHR.
  290                        	
  291    02:DC14  60         			rts
  292                        	
  293                        	
  294                        	
  295                        	; ***************************************************************************
  296                        	; ***************************************************************************
  297                        	;
  298                        	; bat_scroll_x - Update the BAT when X coordinate changes.
  299                        	;
  300                        	; N.B. This only ever draws a single column!
  301                        	;
  302                        	
  303    02:DC15  60         	!no_change:	rts
  304                        	
  305    02:DC16  A5 FC      	bat_scroll_x:	lda	<map_chr_x		; Compare old_x with cur_x.
  306    02:DC18  DD B2 2B   			cmp	vdc_old_chr_x, x
  307    02:DC1B  F0 F8      			beq	!no_change-		; Do nothing if no change.
  308    02:DC1D  9D B2 2B   			sta	vdc_old_chr_x, x
  309    02:DC20  30 05      			bmi	.moved			; Test the sign of the change.
  310                        	
  311    02:DC22  18         			clc				; Draw RHS if chr_x >= old_x.
  312    02:DC23  7D 7B 26   			adc	vdc_map_draw_w, x	; Usually (SCR_WIDTH / 8) + 1.
  313    02:DC26  3A         			dec	a
  314                        	
  315    02:DC27  48         	.moved:		pha				; Push chr_x in map section.
  316                        	
  317    02:DC28  3C 83 26   			bit	vdc_map_option, x	; Set bit7 to disable aligning
  318    02:DC2B  30 05      			bmi	!+			; BAT X with the map X.
  319    02:DC2D  3D 78 26   			and	vdc_bat_x_mask, x
  320    02:DC30  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
  321                        	
  322    02:DC32  A5 FE      	!:		lda	<map_chr_y		; Y = chr_y in map section.
  323    02:DC34  A8         			tay
  324                        	
  325    02:DC35  3C 83 26   			bit	vdc_map_option, x	; Set bit6 to disable aligning
  326    02:DC38  70 05      			bvs	!+			; BAT Y with the map Y.
  327    02:DC3A  3D 79 26   			and	vdc_bat_y_mask, x
  328    02:DC3D  85 F9      			sta	<map_bat_y		; Save BAT Y chr coordinate.
  329                        	
  330               0000     		.if	FAST_MULTIPLY
  333                        		.endif
  334                        	
  335    02:DC3F  BD 7D 26   	!:		lda	vdc_map_line_w, x	; Map width in CHR (0 == 256).
  336    02:DC42  D0 05      			bne	!+
  337                        	
  338    02:DC44  64 EE      			stz.l	<map_line		; Multiply by 256 is easy!
  339    02:DC46  98         			tya
  340    02:DC47  80 15      			bra	.double
  341                        	
  342               0000     		.if	FAST_MULTIPLY
  354                        		.else
  355    02:DC49  84 EF      	!:		sty.h	<map_line		; Takes 144..176 cycles.
  356    02:DC4B  A0 08      			ldy	#8
  357    02:DC4D  4A         			lsr	a
  358    02:DC4E  85 EE      			sta.l	<map_line
  359    02:DC50  62         			cla
  360    02:DC51  90 03      			bcc	.rotate
  361    02:DC53  18         	.add:		clc
  362    02:DC54  65 EF      			adc.h	<map_line
  363    02:DC56  6A         	.rotate:	ror	a
  364    02:DC57  66 EE      			ror.l	<map_line		; Lo-byte of (CHR Y * width).
  365    02:DC59  88         			dey
  366    02:DC5A  B0 F7      			bcs	.add
  367    02:DC5C  D0 F8      			bne	.rotate
  368                        		.endif
  369                        	
  370    02:DC5E  06 EE      	.double:	asl.l	<map_line		; Lo-byte of (CHR Y * width * 2).
  371    02:DC60  2A         			rol	a
  372    02:DC61  A8         			tay				; Hi-byte of (CHR Y * width * 2).
  373                        	
  374    02:DC62  BD BC 2B   			lda	vdc_map_bank, x		; Put the MAP into MPR3-MPR5.
  375    02:DC65  53 08      			tam3				; Allow for 16KByte chrmap.
  376    02:DC67  1A         			inc	a
  377    02:DC68  53 10      			tam4
  378    02:DC6A  1A         			inc	a
  379    02:DC6B  53 20      			tam5
  380                        	
  381    02:DC6D  68         			pla				; Pop chr_x in map section.
  382    02:DC6E  0A         			asl	a			; 2-bytes for a BAT value.
  383    02:DC6F  90 02      			bcc	!+
  384    02:DC71  C8         			iny				; Hi-byte of (CHR Y * width * 2).
  385    02:DC72  18         			clc
  386    02:DC73  65 EE      	!:		adc.l	<map_line		; Lo-byte of (CHR Y * width * 2).
  387    02:DC75  90 01      			bcc	!+
  388    02:DC77  C8         			iny
  389                        	
  390    02:DC78  18         	!:		clc				; Calc map data pointer.
  391    02:DC79  7D BA 2B   			adc.l	vdc_map_addr, x
  392    02:DC7C  85 EC      			sta.l	<_bp			; Maximum map size is 16KBytes
  393    02:DC7E  98         			tya				; so we don't need to consider
  394    02:DC7F  7D BB 2B   			adc.h	vdc_map_addr, x		; bank overflow.
  395    02:DC82  85 ED      			sta.h	<_bp
  396                        	
  397    02:DC84  C2         			cly				; Calculate the map line delta
  398    02:DC85  BD 7D 26   			lda	vdc_map_line_w, x	; in bytes.
  399    02:DC88  D0 01      			bne	!+
  400    02:DC8A  C8         			iny
  401    02:DC8B  0A         	!:		asl	a
  402    02:DC8C  85 EE      			sta.l	<map_line
  403    02:DC8E  98         			tya
  404    02:DC8F  2A         			rol	a
  405    02:DC90  85 EF      			sta.h	<map_line
  406                        	
  407                        			; Draw the first part of the column.
  408                        	
  409    02:DC92  A5 F8      	.draw_col:	lda	<map_bat_x		; Set the BAT VRAM destination
  410    02:DC94  85 F0      			sta.l	<_di			; coordinates.
  411    02:DC96  A5 F9      			lda	<map_bat_y
  412    02:DC98  85 F1      			sta.h	<_di
  413                        	
  414    02:DC9A  5D 79 26   			eor	vdc_bat_y_mask, x	; Calc CHR before wrap.
  415    02:DC9D  1A         			inc	a
  416    02:DC9E  C5 FB      			cmp	<map_draw_h		; Usually (SCR_HEIGHT / 8) + 1.
  417    02:DCA0  90 02      			bcc	!+
  418    02:DCA2  A5 FB      			lda	<map_draw_h		; Maximum CHR to draw.
  419    02:DCA4  85 00      	!:		sta	<map_count		; Set number of CHR to draw.
  420    02:DCA6  85 01      			sta	<map_drawn		; Preserve number of CHR drawn.
  421                        	
  422    02:DCA8  A9 05      			lda	#VDC_CR			; Set VDC auto-increment from
  423    02:DCAA  95 F7      			sta	<vdc_reg, x		; the BAT width, which is set
  424    02:DCAC  9D 00 02   			sta	VDC_AR, x		; up by set_screen_size().
  425    02:DCAF  B5 F4      			lda	<vdc_crh, x
  426    02:DCB1  9D 03 02   			sta	VDC_DH, x
  427                        	
  428    02:DCB4  20 B6 DD   			jsr	bat_col_strip		; Draw top of vertical strip.
  429                        	
  430                        			; Wrap around and draw the rest of the column (if needed).
  431                        	
  432    02:DCB7  38         			sec				; Are there any more CHR that
  433    02:DCB8  A5 FB      			lda	<map_draw_h		; need to be drawn?
  434    02:DCBA  E5 01      			sbc	<map_drawn
  435    02:DCBC  F0 0B      			beq	.done
  436                        	
  437    02:DCBE  85 00      			sta	<map_count		; Set number of CHR to draw.
  438                        	
  439    02:DCC0  A5 F8      			lda	<map_bat_x		; Set the BAT VRAM destination
  440    02:DCC2  85 F0      			sta.l	<_di			; coordinates.
  441    02:DCC4  64 F1      			stz.h	<_di			; Reset 1st row to draw.
  442                        	
  443    02:DCC6  20 B6 DD   			jsr	bat_col_strip		; Draw btm of vertical strip.
  444                        	
  445    02:DCC9  A9 05      	.done:		lda	#VDC_CR			; Set VDC auto-increment to 1.
  446    02:DCCB  95 F7      			sta	<vdc_reg, x
  447    02:DCCD  9D 00 02   			sta	VDC_AR, x
  448    02:DCD0  9E 03 02   			stz	VDC_DH, x
  449                        	
  450    02:DCD3  60         			rts
  451                        	
  452                        	
  453                        	
  454                        	; ***************************************************************************
  455                        	; ***************************************************************************
  456                        	;
  457                        	; bat_scroll_y - Update the BAT when Y coordinate changes.
  458                        	;
  459                        	; N.B. This draws multiple rows when called from _draw_bat or _blit_bat.
  460                        	;
  461                        	
  462    02:DCD4  60         	!no_change:	rts
  463                        	
  464    02:DCD5  A5 FE      	bat_scroll_y:	lda	<map_chr_y		; Compare old_y with cur_y.
  465    02:DCD7  DD B3 2B   			cmp	vdc_old_chr_y, x
  466    02:DCDA  F0 F8      			beq	!no_change-		; Do nothing if no change.
  467    02:DCDC  9D B3 2B   			sta	vdc_old_chr_y, x
  468    02:DCDF  30 05      			bmi	.moved			; Test the sign of the change.
  469                        	
  470    02:DCE1  18         			clc				; Draw bottom if chr_y >= old_y.
  471    02:DCE2  7D 7C 26   			adc	vdc_map_draw_h, x	; Usually (SCR_HEIGHT / 8) + 1.
  472    02:DCE5  3A         			dec	a
  473                        	
  474    02:DCE6  A8         	.moved:		tay				; Y = chr_y in map section.
  475                        	
  476    02:DCE7  3C 83 26   			bit	vdc_map_option, x	; Set bit6 to disable aligning
  477    02:DCEA  70 05      			bvs	!+			; BAT Y with the map Y.
  478    02:DCEC  3D 79 26   			and	vdc_bat_y_mask, x
  479    02:DCEF  85 F9      			sta	<map_bat_y		; Save BAT Y chr coordinate.
  480                        	
  481    02:DCF1  3C 83 26   	!:		bit	vdc_map_option, x	; Set bit7 to disable aligning
  482    02:DCF4  30 07      			bmi	!+			; BAT X with the map X.
  483    02:DCF6  A5 FC      			lda	<map_chr_x
  484    02:DCF8  3D 78 26   			and	vdc_bat_x_mask, x
  485    02:DCFB  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
  486                        	
  487               0000     		.if	FAST_MULTIPLY
  490                        		.endif
  491                        	
  492    02:DCFD  BD 7D 26   	!:		lda	vdc_map_line_w, x	; Map width in CHR (0 == 256).
  493    02:DD00  D0 05      			bne	!+
  494                        	
  495    02:DD02  64 EE      			stz.l	<map_line		; Multiply by 256 is easy!
  496    02:DD04  98         			tya
  497    02:DD05  80 15      			bra	.double
  498                        	
  499               0000     		.if	FAST_MULTIPLY
  511                        		.else
  512    02:DD07  84 EF      	!:		sty.h	<map_line		; Takes 144..176 cycles.
  513    02:DD09  A0 08      			ldy	#8
  514    02:DD0B  4A         			lsr	a
  515    02:DD0C  85 EE      			sta.l	<map_line
  516    02:DD0E  62         			cla
  517    02:DD0F  90 03      			bcc	.rotate
  518    02:DD11  18         	.add:		clc
  519    02:DD12  65 EF      			adc.h	<map_line
  520    02:DD14  6A         	.rotate:	ror	a
  521    02:DD15  66 EE      			ror.l	<map_line		; Lo-byte of (CHR Y * width).
  522    02:DD17  88         			dey
  523    02:DD18  B0 F7      			bcs	.add
  524    02:DD1A  D0 F8      			bne	.rotate
  525                        		.endif
  526                        	
  527    02:DD1C  06 EE      	.double:	asl.l	<map_line		; Lo-byte of (CHR Y * width * 2).
  528    02:DD1E  2A         			rol	a
  529    02:DD1F  85 EF      			sta.h	<map_line		; Hi-byte of (CHR Y * width * 2).
  530    02:DD21  A8         			tay
  531                        	
  532    02:DD22  BD BC 2B   			lda	vdc_map_bank, x		; Put the MAP into MPR3-MPR5.
  533    02:DD25  53 08      			tam3				; Allow for 16KByte chrmap.
  534    02:DD27  1A         			inc	a
  535    02:DD28  53 10      			tam4
  536    02:DD2A  1A         			inc	a
  537    02:DD2B  53 20      			tam5
  538                        	
  539                        			; Loop to here if drawing multiple rows.
  540                        	
  541    02:DD2D  A5 FC      	.next_row:	lda	<map_chr_x		; Map CHR X coordinate.
  542    02:DD2F  0A         			asl	a			; 2-bytes for a BAT value!
  543    02:DD30  90 02      			bcc	!+
  544    02:DD32  C8         			iny				; Hi-byte of (CHR Y * width * 2).
  545    02:DD33  18         			clc
  546    02:DD34  65 EE      	!:		adc.l	<map_line		; Lo-byte of (CHR Y * width * 2).
  547    02:DD36  90 01      			bcc	!+
  548    02:DD38  C8         			iny
  549    02:DD39  18         	!:		clc				; Calc map data pointer.
  550    02:DD3A  7D BA 2B   			adc.l	vdc_map_addr, x
  551    02:DD3D  85 EC      			sta.l	<_bp			; Maximum map size is 16KBytes
  552    02:DD3F  98         			tya				; so we don't need to consider
  553    02:DD40  7D BB 2B   			adc.h	vdc_map_addr, x		; bank overflow.
  554    02:DD43  85 ED      			sta.h	<_bp
  555                        	
  556                        			; Draw the first part of the row.
  557                        	
  558    02:DD45  A5 F9      	.draw_row:	lda	<map_bat_y		; Set the BAT VRAM destination
  559    02:DD47  85 F1      			sta.h	<_di			; coordinates.
  560    02:DD49  A5 F8      			lda	<map_bat_x
  561    02:DD4B  85 F0      			sta.l	<_di
  562                        	
  563    02:DD4D  5D 78 26   			eor	vdc_bat_x_mask, x	; Calc CHR before wrap.
  564    02:DD50  1A         			inc	a
  565    02:DD51  C5 FA      			cmp	<map_draw_w		; Usually (SCR_WIDTH / 8) + 1.
  566    02:DD53  90 02      			bcc	!+
  567    02:DD55  A5 FA      			lda	<map_draw_w		; Maximum CHR to draw.
  568    02:DD57  85 00      	!:		sta	<map_count		; Set number of CHR to draw.
  569    02:DD59  85 01      			sta	<map_drawn		; Preserve number of CHR drawn.
  570                        	
  571    02:DD5B  20 95 DD   			jsr	bat_row_strip		; Draw lhs of horizontal strip.
  572                        	
  573                        			; Wrap around and draw the rest of the row (if needed).
  574                        	
  575    02:DD5E  38         			sec				; Are there any more CHR that
  576    02:DD5F  A5 FA      			lda	<map_draw_w		; need to be drawn?
  577    02:DD61  E5 01      			sbc	<map_drawn
  578    02:DD63  F0 0B      			beq	.done_row
  579                        	
  580    02:DD65  85 00      			sta	<map_count		; Set number of CHR to draw.
  581                        	
  582    02:DD67  A5 F9      			lda	<map_bat_y		; Set the BAT VRAM destination
  583    02:DD69  85 F1      			sta.h	<_di			; coordinates.
  584    02:DD6B  64 F0      			stz.l	<_di			; Reset 1st column to draw.
  585                        	
  586    02:DD6D  20 95 DD   			jsr	bat_row_strip		; Draw rhs of horizontal strip.
  587                        	
  588    02:DD70  C6 FB      	.done_row:	dec	<map_draw_h		; Are all desired rows drawn?
  589    02:DD72  F0 20      			beq	.finished
  590                        	
  591    02:DD74  A5 F9      			lda	<map_bat_y		; Move BAT Y down by 1.
  592    02:DD76  1A         			inc	a
  593    02:DD77  3D 79 26   			and	vdc_bat_y_mask, x
  594    02:DD7A  85 F9      			sta	<map_bat_y
  595                        	
  596    02:DD7C  A4 EF      			ldy.h	<map_line		; Move the map line pointer to
  597    02:DD7E  C8         			iny				; the next line.
  598    02:DD7F  BD 7D 26   			lda	vdc_map_line_w, x
  599    02:DD82  F0 0B      			beq	!++			; vdc_map_line_w == 0 == 256.
  600    02:DD84  0A         			asl	a			; 2-bytes for a BAT value!
  601    02:DD85  B0 01      			bcs	!+
  602    02:DD87  88         			dey				; Fix if vdc_map_line_w <= 127.
  603    02:DD88  18         	!:		clc
  604    02:DD89  65 EE      			adc.l	<map_line
  605    02:DD8B  85 EE      			sta.l	<map_line
  606    02:DD8D  90 01      			bcc	!++
  607    02:DD8F  C8         	!:		iny
  608    02:DD90  84 EF      	!:		sty.h	<map_line		; Needed for .next_row!
  609                        	
  610    02:DD92  80 99      			bra	.next_row		; Draw next row.
  611                        	
  612    02:DD94  60         	.finished:	rts
  613                        	
  614                        	
  615                        	
  616                        	; ***************************************************************************
  617                        	; ***************************************************************************
  618                        	;
  619                        	; bat_row_strip - Draw a single row of CHR into the BAT.
  620                        	;
  621                        	
  622    02:DD95  20 34 E4   	bat_row_strip:	jsr	set_di_xy_mawr		; Set the BAT VRAM destination.
  623                        	
  624    02:DD98  C2         			cly				; 2
  625    02:DD99  B1 EC      	.repeat:	lda	[_bp], y		; 7
  626    02:DD9B  9D 02 02   			sta	VDC_DL, x		; 6
  627    02:DD9E  C8         			iny				; 2
  628    02:DD9F  B1 EC      			lda	[_bp], y		; 7
  629               0000     		.if	CHRMAP_BAT_FLAG
  634                        		.endif
  635    02:DDA1  9D 03 02   			sta	VDC_DH, x		; 6
  636    02:DDA4  C8         			iny				; 2
  637                        	
  638    02:DDA5  C6 00      	!:		dec	<map_count		; 6
  639    02:DDA7  D0 F0      			bne	.repeat			; 4
  640                        	
  641    02:DDA9  98         			tya				; 2
  642    02:DDAA  F0 07      			beq	!+			; 2/4
  643    02:DDAC  18         			clc				; 2
  644    02:DDAD  65 EC      			adc.l	<_bp			; 4
  645    02:DDAF  85 EC      			sta.l	<_bp			; 4
  646    02:DDB1  90 02      			bcc	.done			; 2/4
  647    02:DDB3  E6 ED      	!:		inc.h	<_bp			; 6
  648                        	
  649    02:DDB5  60         	.done:		rts
  650                        	
  651                        	
  652                        	
  653                        	; ***************************************************************************
  654                        	; ***************************************************************************
  655                        	;
  656                        	; bat_col_strip - Draw a single column of CHR into the BAT.
  657                        	;
  658                        	
  659    02:DDB6  20 34 E4   	bat_col_strip:	jsr	set_di_xy_mawr		; Set the BAT VRAM destination.
  660                        	
  661    02:DDB9  A0 01      			ldy	#1			; 2
  662    02:DDBB  B2 EC      	.repeat:	lda	[_bp]			; 7
  663    02:DDBD  9D 02 02   			sta	VDC_DL, x		; 6
  664    02:DDC0  B1 EC      			lda	[_bp], y		; 7
  665               0000     		.if	CHRMAP_BAT_FLAG
  670                        		.endif
  671    02:DDC2  9D 03 02   			sta	VDC_DH, x		; 6
  672                        	
  673    02:DDC5  18         			clc				; 2
  674    02:DDC6  A5 EE      			lda.l	<map_line		; 4
  675    02:DDC8  65 EC      			adc.l	<_bp			; 4
  676    02:DDCA  85 EC      			sta.l	<_bp			; 4
  677    02:DDCC  A5 EF      			lda.h	<map_line		; 4
  678    02:DDCE  65 ED      			adc.h	<_bp			; 4
  679    02:DDD0  85 ED      			sta.h	<_bp			; 4
  680                        	
  681    02:DDD2  C6 00      			dec	<map_count		; 6
  682    02:DDD4  D0 E5      			bne	.repeat			; 4
  683                        	
  684    02:DDD6  60         			rts
  685                        	
  686                        		.endprocgroup	; chrmap_group
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   88                        		.endif	HUCC_USES_CHRMAP
   89                        	
   90               0001     		.ifdef	HUCC_USES_OLD_LINE		; Set in hucc_old_line.h
                             #[3]   "..\..\..\include\hucc\hucc-old-line.asm"
   91                        			include	"hucc-old-line.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-old-line.asm
    5                        	;
    6                        	; Based on the original HuC and MagicKit functions by David Michel and the
    7                        	; other original HuC developers.
    8                        	;
    9                        	; Modifications copyright John Brandwood 2024-2025.
   10                        	;
   11                        	; Distributed under the Boost Software License, Version 1.0.
   12                        	; (See accompanying file LICENSE_1_0.txt or copy at
   13                        	;  http://www.boost.org/LICENSE_1_0.txt)
   14                        	;
   15                        	; ***************************************************************************
   16                        	; ***************************************************************************
   17                        	
   18                        	
   19                        	
   20                        	; ***************************************************************************
   21                        	; ***************************************************************************
   22                        	;
   23                        	; void __fastcall gfx_init( unsigned int start_vram_addr<_ax> );
   24                        	;
   25                        	; initialize graphics mode
   26                        	; - points graphics map to tiles at start_vram_addr
   27                        	
   28                        	_gfx_init.1	.proc
   73                        			.endp
   74                        	
   75                        	
   76                        	
   77                        	; ***************************************************************************
   78                        	; ***************************************************************************
   79                        	;
   80                        	; void __fastcall gfx_clear( unsigned int start_vram_addr<_di> );
   81                        	;
   82                        	; Clear the values in the graphics tiles
   83                        	; - places zeroes in graphics tiles at start_vram_addr
   84                        	
   85                        	_gfx_clear.1	.proc
  105                        			.endp
  106                        	
  107                        	
  108                        	
  109                        	; ***************************************************************************
  110                        	; ***************************************************************************
  111                        	;
  112                        	; void __fastcall gfx_line( unsigned int x1<_gfx_x1>, unsigned int y1<_gfx_y1>, unsigned int x2<_gfx_x2>, unsigned int y2<_gfx_y2>, unsigned char color<_gfx_color> );
  113                        	
  114                        	huc_gfx_line	.procgroup
  459                        			.endprocgroup	; huc_gfx_line
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   92                        		.endif
   93                        	
   94               0000     		.ifdef	HUCC_USES_ZX0			; Set in hucc_zx0.h
   96                        		.endif
   97                        	
   98                        	
   99                        	
  100                        	; ***************************************************************************
  101                        	; ***************************************************************************
  102                        	;
  103                        	; Check that C "__zp" declarations aren't overwriting System Card variables.
  104                        	;
  105                        	
  106               20A0     			.zp
  107               0000     		.if	(* > zpg_sys_top) || (USING_PSGDRIVER && (* > zpg_psg_top))
  109                        		.endif
  110                        	
  111                        	
  112                        	
  113                        	; ***************************************************************************
  114                        	; ***************************************************************************
  115                        	;
  116                        	; Check that there isn't too much C "const" data in the ".RODATA" section.
  117                        	;
  118                        	
  119               61A5     			.rodata
  120               0000     		.if	(bank(*) - _bank_base) >= (CONST_BANK + 2)
  122                        		.endif
  123               E937     			.code
                             #[1]   "main.s"

PROCEDURE LIST (in order of size):

Size: $1BCF, Addr: $01:C1A5,      .proc _update_PLAYER
Size: $0A22, Addr: $13:D060,      .proc _joypad_DIR
Size: $086D, Addr: $02:C000, .procgroup blkmap_group
Size: $0580, Addr: $02:C86D,      .proc _joypad_BUTTONS_SHOP
Size: $0469, Addr: $13:DA82,      .proc _init_LEVEL
Size: $0414, Addr: $02:CDED,      .proc _init_SHOP
Size: $0390, Addr: $02:D201,      .proc huc_monofont_x
Size: $02F0, Addr: $02:D591,      .proc _init_HUD
Size: $02C4, Addr: $02:D881,      .proc _load_OBJECT_TILES
Size: $0292, Addr: $02:DB45, .procgroup chrmap_group
Size: $01EB, Addr: $02:DDD7,      .proc _joypad_BUTTONS
Size: $01D5, Addr: $01:DD74,      .proc _main
Size: $0184, Addr: $14:C000,      .proc _check_OBJECT
Size: $0167, Addr: $14:C184,      .proc _scroll_object
Size: $0167, Addr: $14:C2EB,      .proc _scroll_chest
Size: $0167, Addr: $14:C452,      .proc _scroll_npc
Size: $013E, Addr: $14:C5B9,      .proc _check_NPC
Size: $013E, Addr: $14:C6F7,      .proc _init_OBJECT_LV1
Size: $0108, Addr: $13:DEEB,      .proc read_joypads
Size: $0107, Addr: $14:C835,      .proc _recenter_CAMERA
Size: $00DF, Addr: $14:C93C, .procgroup vdc_set_mode
Size: $00D5, Addr: $14:CA1B,      .proc _init_NPC_LV1
Size: $00C8, Addr: $14:CAF0,      .proc _init_CHEST_LV1
Size: $00BF, Addr: $14:CBB8, .procgroup vdc_tty_out
Size: $00A5, Addr: $01:DF49,      .proc _display_TIME_SHOP
Size: $009D, Addr: $14:CC77,      .proc _display_TIME_LEVEL
Size: $0086, Addr: $14:CD14,      .proc _sgx_scroll_split.5
Size: $0081, Addr: $14:CD9A,      .proc vbl_init_scroll
Size: $007A, Addr: $14:CE1B,      .proc _check_TILE_DEPTH
Size: $0077, Addr: $14:CE95,      .proc core_main
Size: $006A, Addr: $14:CF0C, .procgroup load_vram_group
Size: $0064, Addr: $14:CF76,      .proc _check_BG
Size: $0062, Addr: $14:CFDA,      .proc _init_256x224
Size: $004E, Addr: $14:D03C, .procgroup old_satb_group
Size: $004B, Addr: $14:D08A, .procgroup hucc_memcmp
Size: $0043, Addr: $14:D0D5, .procgroup vdc_clear_vram
Size: $0043, Addr: $14:D118,      .proc sgx_detect
Size: $0042, Addr: $14:D15B,      .proc _init_PLAYER
Size: $003F, Addr: $14:D19D, .procgroup load_bat_group
Size: $003E, Addr: $02:DFC2,      .proc _vram2vram.3
Size: $003B, Addr: $14:D1DC,      .proc init_random
Size: $0034, Addr: $14:D217,      .proc _init_VARIABLES
Size: $002E, Addr: $14:D24B,      .proc _scroll_BG
Size: $002B, Addr: $14:D279,      .proc _load_palette.3
Size: $0026, Addr: $14:D2A4,      .proc _load_CHEST_TILES
Size: $0026, Addr: $14:D2CA,      .proc _load_NPC_TILES
Size: $0023, Addr: $14:D2F0,      .proc _hide_LEVEL_SPRITES
Size: $001D, Addr: $14:D313,      .proc _init_SYSTEM
Size: $001C, Addr: $14:D330,      .proc _display_SCORE
Size: $001C, Addr: $14:D34C,      .proc _display_ZENNY
Size: $001C, Addr: $14:D368,      .proc clear_vce
Size: $001A, Addr: $14:D384,      .proc _display_KEY
Size: $001A, Addr: $14:D39E,      .proc _display_POTION
