                             #[1]   "main.s"
   27                        	
   28               0010     	CORE_VERSION	=	$10			; Version 1.0
   29                        	
   30                        			; Get the user program's configuration settings, this will
   31                        			; be read from the current directory, if it exists, or the
   32                        			; "../include/" directory if not.
   33                        	
                             #[4]   "..\..\..\include\hucc\core-config.inc"
   34                        			include	"core-config.inc"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; core-config.inc
    5                        	;
    6                        	; Configuration settings for the "CORE(not TM)" PC Engine library code.
    7                        	;
    8                        	; Copyright John Brandwood 2021-2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; The idea is that you, a PCE developer, copy this file from the ../include/
   18                        	; directory and into your project's directory, and then customize the values
   19                        	; to suit your particular project.
   20                        	;
   21                        	; Because PCEAS searches the current (i.e. project) directory for an include
   22                        	; file first, then it will find your customized copy of the file rather than
   23                        	; the original copy in the ../include/ directory.
   24                        	;
   25                        	; That means that all of the different overlay programs in your project will
   26                        	; share the same overall library configuration for your game.
   27                        	;
   28                        	; ***************************************************************************
   29                        	; ***************************************************************************
   30                        	
   31                        	;
   32                        	; Are we going to take over MPR7?
   33                        	;
   34                        	; While this is the default for the "CORE(not TM)" library, it is definitely
   35                        	; possible to use the library to build CD-ROM code that runs with the System
   36                        	; Card in MPR7, and with the 1st bank remaining in MPR2.
   37                        	;
   38                        	; N.B. The CD-ROM Stage1 loader runs the library with USING_MPR7=0 while it
   39                        	;      installs the kernel into PCE RAM in MPR1.
   40                        	;
   41                        	
   42               0000     		.ifndef	USING_MPR7
   44                        		.endif
   45                        	
   46                        	;
   47                        	; Are we building a CD-ROM overlay that uses an already-built CD-ROM Stage1
   48                        	; loader to install the library's kernel code into PCE RAM in MPR1?
   49                        	;
   50                        	; If this is set, the library's kernel code will be excluded from the build,
   51                        	; which will save about 1KB-3KB of code space in every overlay program!
   52                        	;
   53                        	; N.B. The CD-ROM Stage1 loader sets USING_STAGE1=0 so it builds correctly.
   54                        	;
   55                        	
   56               0000     		.ifndef	USING_STAGE1
   58                        		.endif
   59                        	
   60                        	;
   61                        	; Are we currently building the CD-ROM Stage1 loader?
   62                        	;
   63                        	; If this is set, the library's startup code does not call the __sound_init
   64                        	; macro because the sound driver code is not usually a part of the kernel.
   65                        	;
   66                        	; N.B. The CD-ROM Stage1 loader sets BUILDING_STAGE1=1 so it builds correctly.
   67                        	;
   68                        	
   69               0000     		.ifndef	BUILDING_STAGE1
   71                        		.endif
   72                        	
   73                        	;
   74                        	; Is the last track of the CD a duplicate of the main ISO data track?
   75                        	;
   76                        	; Most CD games put two copies of the same ISO track on the CD, so that data
   77                        	; can be read from the secondary track if the drive has a problem reading it
   78                        	; it from the primary location.
   79                        	;
   80                        	; If set, the secondary track will be enabled when the library first starts.
   81                        	;
   82                        	
   83               0000     		.ifndef	SUPPORT_2ISO
   85                        		.endif
   86                        	
   87                        	;
   88                        	; Maximum number of directory entries to use from the ISO.
   89                        	;
   90                        	; The fewer that we choose, the less RAM memory we need. A setting of 64 is
   91                        	; a good compromise to use until you are putting lots of files on the ISO.
   92                        	;
   93                        	
   94               0000     		.ifndef	MAX_DIRSIZE
   96                        		.endif
   97                        	
   98                        	;
   99                        	; Use the System Card's PSG driver code instead of a modern alternative
  100                        	; sound driver like a DefleMask or Furnace player?
  101                        	;
  102                        	
  103               0000     		.ifndef	USING_PSGDRIVER
  105                        		.endif
  106                        	
  107                        	;
  108                        	; Support development for the Turbo EverDrive v2?
  109                        	;
  110                        	; This only applies to HuCard programs, but when chosen, the "CORE(not TM)"
  111                        	; kernel is moved from bank 0 to bank 2, and a minimal set of startup code
  112                        	; is put in bank 0.
  113                        	;
  114                        	; This is because the TED2 hardware occupies the whole of bank 0 when it is
  115                        	; activated, and so we need to run with a different bank in MPR7.
  116                        	;
  117                        	
  118               0000     		.ifndef	SUPPORT_TED2
  120                        		.endif
  121                        	
  122                        	;
  123                        	; Support development for the SuperGRAFX?
  124                        	;
  125                        	; This enables SuperGRAFX support in certain library functions.
  126                        	;
  127                        	
  128               0000     		.ifndef	SUPPORT_SGX
  130                        		.endif
  131                        	
  132                        	;
  133                        	; Choose SuperGRAFX VPC initialization mode.
  134                        	;
  135                        	; SGX_PARALLAX=0 (useful when VDC #1 is a fullscreen HUD)
  136                        	;
  137                        	;  FRONT
  138                        	;   SP1 = VDC #1 (pce) sprite pixels
  139                        	;   BG1 = VDC #1 (pce) background pixels
  140                        	;   SP2 = VDC #2 (sgx) sprite pixels
  141                        	;   BG2 = VDC #2 (sgx) background pixels
  142                        	;  BACK
  143                        	;
  144                        	; SGX_PARALLAX=1
  145                        	;
  146                        	;  FRONT
  147                        	;   SP1 = VDC #1 (pce) sprite pixels
  148                        	;   SP2 = VDC #2 (sgx) sprite pixels
  149                        	;   BG1 = VDC #1 (pce) background pixels
  150                        	;   BG2 = VDC #2 (sgx) background pixels
  151                        	;  BACK
  152                        	;
  153                        	
  154               0000     		.ifndef	SGX_PARALLAX
  156                        		.endif
  157                        	
  158                        	;
  159                        	; Support development for the ArcadeCard?
  160                        	;
  161                        	; This enables ArcadeCard support in certain library functions.
  162                        	;
  163                        	
  164               0000     		.ifndef	SUPPORT_ACD
  166                        		.endif
  167                        	
  168                        	;
  169                        	; Support development for the IFU's ADPCM hardware?
  170                        	;
  171                        	; Developers would normally just use the System Card functions for ADPCM, but
  172                        	; enabling this adds alternative functions, and allows ADPCM use on a HuCARD.
  173                        	;
  174                        	
  175               0000     		.ifndef	SUPPORT_ADPCM
  177                        		.endif
  178                        	
  179                        	;
  180                        	; Select which version of the joystick library code to include, only one of
  181                        	; these can be set to '1' ...
  182                        	;
  183                        	; SUPPORT_2BUTTON : Only returns buttons I and II.
  184                        	; SUPPORT_6BUTTON : Read buttons III-VI, but ignore a mouse.
  185                        	; SUPPORT_MOUSE	  : Read mouse, but ignore buttons III-VI.
  186                        	;
  187                        	; It doesn't make sense to design a game the relies on both the 6-button and
  188                        	; the mouse, so the joystick library is optimized for one or the other.
  189                        	;
  190                        	; Note that both those devices are always detected and no conflicts occur,
  191                        	; this just controls reading either buttons III-VI or the Mouse Y-movement.
  192                        	;
  193                        	
  194               0000     		.ifndef	SUPPORT_6BUTTON
  200                        		.endif
  201                        	
  202                        	;
  203                        	; How many joypad/mouse devices should be supported?
  204                        	;
  205                        	; This is normally 5, but can be set to 3 (or lower) in order to speed up
  206                        	; the processing and free up CPU time for other code, which is especially
  207                        	; useful for mouse games.
  208                        	;
  209                        	
  210               0000     		.ifndef	MAX_PADS
  212                        		.endif
  213                        	
  214                        	;
  215                        	; Implement a HuC-compatible seperate array for accumulating joypad presses?
  216                        	;
  217                        	; This is only really needed if your game is not expected to run at 60Hz and
  218                        	; so you will sometimes miss joypad presses.
  219                        	;
  220                        	; Alternatively you can set ACCUMULATE_JOY so that joypad presses are always
  221                        	; accumulated in the normal joytrg array, which is how asm programmers would
  222                        	; normally deal with this situation.
  223                        	;
  224                        	
  225               0000     		.ifndef HUC_JOY_EVENTS
  227                        		.endif
  228                        	
  229                        	;
  230                        	; Should "joytrg" accumulate presses, and so need to be explicitely cleared
  231                        	; after reading, or should it just be the result of the last read?
  232                        	;
  233                        	; This option has no effect if HUC_JOY_EVENTS is non-zero since that option
  234                        	; takes precedence over this one!
  235                        	;
  236                        	
  237               0000     		.ifndef ACCUMULATE_JOY
  239                        		.endif
  240                        	
  241                        	;
  242                        	; The DATA_BANK location needs to be set as early as possible so that library
  243                        	; code is able to put data in there before the total overall size of the code
  244                        	; is known.
  245                        	;
  246                        	; By default, DATA_BANK is the next bank after the CORE_BANK.
  247                        	;
  248                        	; RESERVE_BANKS allows developers to reserve some banks between the CORE_BANK
  249                        	; and the DATA_BANK that they can use however they wish.
  250                        	;
  251                        	; One use for RESERVE_BANKS is to create empty space that PCEAS can use when
  252                        	; it relocates procedures. This provides a way for a developer to group code
  253                        	; together at the start of memory, and leave the maximum number of banks for
  254                        	; loading dynamic data from CD-ROM.
  255                        	;
  256                        	; The KickC environment sets RESERVE_BANKS=1 (or higher) so that there is a
  257                        	; a bank for the permanent C code and static constants.
  258                        	;
  259                        	
  260               0000     		.ifndef	RESERVE_BANKS
  266                        		.endif	RESERVE_BANKS
                             #[3]   "..\..\..\include\hucc\core.inc"
   35                        	
   36                        	;
   37                        	; This is a simple macro to call System Card functions when using MPR7 for
   38                        	; running the "CORE(not TM)" PC Engine library code.
   39                        	;
   40                        	
   41                        	system		.macro
   42                        			ldy     #<\1
   43                        			jsr	call_bios
   44                        			.endm
   45                        	
   46                        	;
   47                        	; This replaces the System Card's ex_setvec, because "call_bios" uses the
   48                        	; Y register.
   49                        	;
   50                        	
   51                        	setvec		.macro
   52                        			php
   53                        			sei
   54                        			lda.l	#\2
   55                        			sta.l	\1
   56                        			lda.h	#\2
   57                        			sta.h	\1
   58                        			plp
   59                        			.endm
   60                        	
   61                        	;
   62                        	; Repurpose this System Card variable, since nmi_hook is never used.
   63                        	;
   64                        	; We'll use it as a vector to a user-supplied sound driver instead.
   65                        	;
   66                        	
   67               2206     	sound_hook	=	nmi_hook		; Sound Driver to run in VBL.
   68                        	
   69                        	;
   70                        	; CORE Zero-Page variables, relative to the System Card's ZP variables.
   71                        	;
   72                        	
   73               0000     		.if	USING_PSGDRIVER
   75                        		.else
   76               20EC     	core_zpend	=	$F8:20EC
   77                        		.endif	USING_PSGDRIVER
   78                        	
   79               0001     		.if	SUPPORT_SGX
   80                        	
   81                        			; Put some "CORE(not TM)" variables at the start of Zero Page.
   82                        			;
   83                        			; These are at the *start* of ZP so that the SuperGrafx shadow
   84                        			; "sgx_" registers are at a specific offset from their System
   85                        			; Card "vdc_" counterparts, and they MUST NOT be moved!
   86                        			;
   87                        			; This allows us to put SGX_VDC_OFFSET or PCE_VDC_OFFSET into
   88                        			; the X register, and then index into either set of hardware
   89                        			; registers and the "sgx_reg" or "vdc_reg" shadow-variables.
   90                        	
   91               0000     	PCE_VDC_OFFSET	=	$00		; Offset to PCE VDC chip & shadow vars.
   92               0010     	SGX_VDC_OFFSET	=	$10		; Offset to SGX VDC chip & shadow vars.
   93                        	
   94               2000     			.zp
   95               2000     			.org	$2000
   96    F8:2000             	__temp		ds	2		; $F8:2000 Use within any ASM routine.
   97    F8:2002             	_bp_bank	ds	1		; $F8:2002 Use within any ASM/HuCC routine.
   98    F8:2003             	sgx_crl		ds	1		; $F8:2003 SGX shadow (vdc_crl = $20F3).
   99    F8:2004             	sgx_crh		ds	1		; $F8:2004 SGX shadow (vdc_crh = $20F4).
  100    F8:2005             	core_1stbank	ds	1		; $F8:2005 1st bank of library code.
  101    F8:2006             	sgx_sr		ds	1		; $F8:2006 SGX shadow (vdc_sr  = $20F6).
  102    F8:2007             	sgx_reg		ds	1		; $F8:2007 SGX shadow (vdc_reg = $20F7).
  103                        	
  104               2008     	core_zp1st	=	*		; $F8:2008 1st free user address.
  105                        	
  106                        		.else	SUPPORT_SGX
  116                        		.endif	SUPPORT_SGX
  117                        	
  118                        	;
  119                        	; The kernel code in RAM follows the System Card's RAM variables.
  120                        	;
  121                        	
  122               0000     		.if	USING_PSGDRIVER
  124                        		.else
  125               22D0     	core_ram1st     =	$F8:22D0
  126                        		.endif	USING_PSGDRIVER
  127                        	
  128                        	;
  129                        	; Include the "CORE(not TM)" startup code to begin the HuCARD / Overlay.
  130                        	;
  131                        	
                             #[4]   "..\..\..\include\hucc\core-startup.asm"
  132                        			include	"core-startup.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; core-startup.asm
    5                        	;
    6                        	; The "CORE(not TM)" PC Engine library startup code that runs at boot/reset.
    7                        	;
    8                        	; Copyright John Brandwood 2021-2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; This is the initialization code in the 1st bank, and it is responsible for
   18                        	; setting up a consistant runtime environment for the developer's program,
   19                        	; so that the developer can concentrate on writing the program itself.
   20                        	;
   21                        	; The idea is that when a program is loaded, the first 40KB of it is mapped
   22                        	; as $4000..$DFFF, and initialization starts at $4000, with the developer's
   23                        	; program getting control after initialization, with a jump to "core_main".
   24                        	;
   25                        	; The initializtion sets up a small kernel of code that provides interrupt
   26                        	; handling that mimics a subset of the System Card's behavior, designed to
   27                        	; act in the same way on HuCARD and CD-ROM, with either the System Card in
   28                        	; MPR7, or with an overlay in MPR7.
   29                        	;
   30                        	; The kernel handles reading the joypad/mouse, and it offers handler hooks
   31                        	; for running the developer's interrupt code.  On CD-ROM systems, it also
   32                        	; handles the loading and running of subsequent overlay programs.
   33                        	;
   34                        	; On HuCARD, the kernel itself runs in MPR7; while on CD-ROM systems it is
   35                        	; run from RAM in MPR1, so that overlay programs are independant from each
   36                        	; other, and can be written in different programming languages.
   37                        	;
   38                        	;
   39                        	; 1) If we're running on a HuCARD, the initialization is simple!
   40                        	;
   41                        	;    The PC Engine's memory map is set to ...
   42                        	;
   43                        	;      MPR0 = bank $FF : PCE hardware
   44                        	;      MPR1 = bank $F8 : PCE RAM with Stack & ZP
   45                        	;      MPR2 = bank $00 : HuCARD ROM
   46                        	;      MPR3 = bank $01 : HuCARD ROM
   47                        	;      MPR4 = bank $02 : HuCARD ROM
   48                        	;      MPR5 = bank $03 : HuCARD ROM
   49                        	;      MPR6 = bank $04 : HuCARD ROM
   50                        	;      MPR7 = bank $00 : HuCARD ROM
   51                        	;
   52                        	;
   53                        	; 2) If we're running on a HuCARD that supports the Turbo Everdrive, then the
   54                        	;    first 2 banks are reserved for mapping the TED2 hardware and a RAM bank.
   55                        	;
   56                        	;    The PC Engine's memory map is set to ...
   57                        	;
   58                        	;      MPR0 = bank $FF : PCE hardware
   59                        	;      MPR1 = bank $F8 : PCE RAM with Stack & ZP
   60                        	;      MPR2 = bank $02 : HuCARD ROM
   61                        	;      MPR3 = bank $03 : HuCARD ROM
   62                        	;      MPR4 = bank $04 : HuCARD ROM
   63                        	;      MPR5 = bank $05 : HuCARD ROM
   64                        	;      MPR6 = bank $06 : HuCARD ROM
   65                        	;      MPR7 = bank $02 : HuCARD ROM
   66                        	;
   67                        	;
   68                        	; 3) If we're running on an old CD System, the overlay is loaded from the ISO
   69                        	;    into banks $80-$87 (64KB max).
   70                        	;
   71                        	;    The PC Engine's memory map is set to ...
   72                        	;
   73                        	;      MPR0 = bank $FF : PCE hardware
   74                        	;      MPR1 = bank $F8 : PCE RAM with Stack & ZP
   75                        	;      MPR2 = bank $80 : CD RAM
   76                        	;      MPR3 = bank $81 : CD RAM
   77                        	;      MPR4 = bank $82 : CD RAM
   78                        	;      MPR5 = bank $83 : CD RAM
   79                        	;      MPR6 = bank $84 : CD RAM
   80                        	;      MPR7 = bank $80 : CD RAM or System Card's bank $00
   81                        	;
   82                        	;
   83                        	; 4) If we're running on a SuperCD System, the overlay is loaded from the ISO
   84                        	;    into banks $68-$87 (256KB max).
   85                        	;
   86                        	;    The PC Engine's memory map is set to ...
   87                        	;
   88                        	;      MPR0 = bank $FF : PCE hardware
   89                        	;      MPR1 = bank $F8 : PCE RAM with Stack & ZP
   90                        	;      MPR2 = bank $68 : SCD RAM
   91                        	;      MPR3 = bank $69 : SCD RAM
   92                        	;      MPR4 = bank $6A : SCD RAM
   93                        	;      MPR5 = bank $6B : SCD RAM
   94                        	;      MPR6 = bank $6C : SCD RAM
   95                        	;      MPR7 = bank $68 : SCD RAM or System Card's bank $00
   96                        	;
   97                        	; ***************************************************************************
   98                        	; ***************************************************************************
   99                        	
  100                        	
  101                        	
  102               E000     			.code
  103               0000     			.bank	0
  104                        	
  105               0000     		.if	SUPPORT_TED2			; Do we want to use a TED2?
  177                        		.endif	SUPPORT_TED2
  178                        	
  179                        	
  180                        	
  181               0001     		.if	USING_MPR7
  182                        	
  183                        	; ***************************************************************************
  184                        	; ***************************************************************************
  185                        	;
  186                        	; RESET VECTORS (when running in MPR7, either as a HuCARD, or a CD overlay)
  187                        	;
  188                        	
  189                        			; Hardware reset and interrupt vectors.
  190                        	
  191               FFF4     			.org	$FFF4
  192                        	
  193    00:FFF4  10         	core_version:	db	CORE_VERSION		; CORE(not TM) Version.
  194    00:FFF5  80         			db	$80			; System Card compatibility.
  195                        	
  196    00:FFF6  5D E0      			dw	core_irq2		; IRQ2	(from CD/ADPCM)
  197    00:FFF8  64 E0      			dw	core_irq1		; IRQ1	(from VDC)
  198    00:FFFA  58 E1      			dw	core_timer		; TIMER (from CPU)
  199    00:FFFC  5E E1      			dw	core_rti		; NMI	(unused)
  200               0000     		.if	CDROM
  202                        		.else
  203    00:FFFE  21 E0      			dw	core_hw_reset		; RESET (HuCARD)
  204                        		.endif	CDROM
  205                        	
  206               0001     		.if	USING_NEWPROC			; If the ".proc" trampolines
  207               FFF3     	__trampolineptr =	$FFF3			; are in MPR7, tell PCEAS to
  208                        		.endif					; put them below the vectors.
  209                        	
  210                        		.else	USING_MPR7
  222                        		.endif	USING_MPR7
  223                        	
  224                        	
  225                        	
  226                        	; ***************************************************************************
  227                        	; ***************************************************************************
  228                        	;
  229                        	; !!! THE HuCARD/OVERLAY PROGRAM'S FIRST BANK STARTS HERE !!!
  230                        	;
  231                        	
  232                        			; Switch to MPR2 for the "CORE(not TM)" library init.
  233                        			;
  234                        			; This is also executed by a HuCARD once it has run
  235                        			; its initial hardware-reset code.
  236                        			;
  237                        			; When run, MPR2-MPR6 are always mapped to the 1st 5 banks of
  238                        			; the overlay program, and MPR7 contains the System Card.
  239                        	
  240               4000     			.org	$4000
  241                        	
  242               0000     	CORE_BANK	=	bank(*) - _bank_base	; It isn't always zero! ;-)
  243                        	
  244               0000     			.bank	CORE_BANK, "CORE_BANK"	; Give it a label.
  245                        	
  246               0001     		.if	USING_MPR7
  247               0007     	CORE_PAGE	=	7			; User code runs in MPR7.
  248                        		.else
  250                        		.endif	USING_MPR7
  251                        	
  252    00:4000  4C 06 40   	core_boot:	jmp	* + 6			; Allow someone to patch this.
  253                        	
  254                        			; Add an ident string so isoLINK can autodetect configuration.
  255                        			;
  256                        			; This allows isoLINK to decide whether to use the IPL-SCD boot
  257                        			; sector hack, and whether to include a SuperGRAFX signature in
  258                        			; the boot sector, without the user having to manually use some
  259                        			; command line parameters, although they are free to do that if
  260                        			; they wish.
  261                        	
  262               0001     		.if	SUPPORT_SGX
  263               0000     		.if	BUILDING_STAGE1
  265                        		.else
  266    00:4003  53 47 58   			db	"SGX"			; SGX SuperCD or SGX HuCARD.
  267                        		.endif	BUILDING_STAGE1
  268                        		.else
  282                        		.endif	SUPPORT_SGX
  283                        	
  284               0000     		.if	CDROM
  331                        		.else	CDROM
  332                        	
  333                        			; Set up HuCARD RAM in a compatible way to the System Card.
  334                        			;
  335                        			; Note that the entire RAM is cleared by "core_hw_reset".
  336                        	
  337    00:4006  A9 1F      			lda	#%11111			; Enable joypad soft-reset.
  338    00:4008  8D 27 22   			sta	joyena
  339                        	
  340                        		.endif	CDROM
  341                        	
  342                        			; Now that RAM is initialized ...
  343                        	
  344    00:400B  43 04      			tma2				; Remember overlay's 1st bank
  345    00:400D  85 05      			sta	<core_1stbank		; $00, $02, $68 or $80!
  346               0001     		.if	USING_MPR7
  347    00:400F  53 80      			tam7				; "CORE(not TM)" takes MPR7!
  348                        		.endif
  349                        	
  350    00:4011  A2 FF      			ldx	#$FF			; Initialize stack pointer.
  351    00:4013  9A         			txs
  352                        	
  353    00:4014  20 5F E1   			jsr	core_clr_hooks		; Reset default hooks.
  354                        	
  355                        	;		stz	TIMER_CR		; Stop HuC6280 timer.
  356                        	;		stz	IRQ_ACK			; Clr HuC6280 timer interrupt.
  357                        	;		stz	IRQ_MSK			; Clr HuC6280 interrupt mask.
  358                        	
  359    00:4017  AD 00 02   			lda	VDC_SR			; Purge any overdue VBL.
  360    00:401A  9C 41 22   			stz	irq_cnt			; Make it easy to check.
  361    00:401D  58         			cli				; Restore interrupts.
  362                        	
  363    00:401E  4C E5 FF   			jmp	core_main		; Start the game's code.
  364                        	
  365                        	
  366                        	
  367               0001     		.if	!CDROM
  368                        	
  369                        	; ***************************************************************************
  370                        	; ***************************************************************************
  371                        	;
  372                        	; HuCARD Kernel Code
  373                        	;
  374                        	; core_ram1st - Start of code to relocate to MPR1.
  375                        	; core_ramend - End of code to relocate to MPR1.
  376                        	;
  377                        	
  378                        			; In a HuCARD, BSS variables start as low as possible.
  379                        	
  380               2200     			.bss
  381               22D0     			.org	core_ram1st
  382               22D0     	core_ramend	=	*
  383               4021     			.code
  384                        	
  385                        			; Normal HuCARD hardware-reset code, executed in MPR7.
  386                        			;
  387                        			; This does the basic PCE startup that every HuCARD (including
  388                        			; a System Card) needs to do, and then it remaps memory to be
  389                        			; compatible with the "CORE(not TM)" CD overlay program start.
  390                        	
  391               E021     			.page	7			; This will run in MPR7.
  392                        	
  393    00:E021  78         	core_hw_reset:	sei				; Disable interrupts.
  394    00:E022  D4         			csh				; Set high-speed mode.
  395    00:E023  D8         			cld
  396                        	
  397    00:E024  A2 FF      			ldx	#$FF			; Initialize stack pointer.
  398    00:E026  9A         			txs
  399    00:E027  8A         			txa				; MPR0 = $FF : PCE hardware
  400    00:E028  53 01      			tam0				; MPR1 = $F8 : PCE RAM
  401    00:E02A  A9 F8      			lda	#$F8
  402    00:E02C  53 02      			tam1
  403                        	
  404    00:E02E  9C 01 0C   			stz	TIMER_CR		; HW reset already does these,
  405    00:E031  9C 03 14   			stz	IRQ_ACK			; but this may be a reset from
  406    00:E034  9C 02 14   			stz	IRQ_MSK			; software (i.e. joypad).
  407                        	
  408    00:E037  F3 53 E0 00			tai	const_0000, $2000, 8192 ; Clear RAM.
         00:E03B  20 00 20    
  409                        	
  410    00:E03E  43 80      			tma7				; Not always bank 0!
  411                        	
  412    00:E040  53 04      			tam2				; Set CD-ROM overlay memory map,
  413    00:E042  1A         			inc	a			; 1st 5 banks in MPR2-MPR6.
  414    00:E043  53 08      			tam3
  415    00:E045  1A         			inc	a
  416    00:E046  53 10      			tam4
  417    00:E048  1A         			inc	a
  418    00:E049  53 20      			tam5
  419    00:E04B  1A         			inc	a
  420    00:E04C  53 40      			tam6
  421                        	
  422    00:E04E  4C 00 40   			jmp	core_boot		; Continue execution in MPR2.
  423                        	
  424                        			; In a HuCARD, the kernel code is permanently in MPR7.
  425                        	
                             #[5]   "..\..\..\include\hucc\core-kernel.asm"
  426                        			include "core-kernel.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; core-kernel.asm
    5                        	;
    6                        	; The "CORE(not TM)" PC Engine library kernel code that runs after startup.
    7                        	;
    8                        	; Copyright John Brandwood 2021-2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; This code is permanently located in either MPR7 (HuCARD), or MPR1 (CD-ROM),
   18                        	; and it provides a consistant method of interrupt-handling on both systems
   19                        	; that is designed to be compatible with the System Card.
   20                        	;
   21                        	; The library uses the "irq1_hook" for its own VDC interrupt handler, and PCE
   22                        	; developers are expected to use "vsync_hook" and "hsync_hook" for their VDC
   23                        	; interrupt functions.  Plenty of memory is available in the 1st bank for the
   24                        	; developer to put those functions.
   25                        	;
   26                        	; The reason for using "irq1_hook", is so that the library can work properly
   27                        	; if either the current overlay program, or the System Card, are mapped into
   28                        	; MPR7 whenever an interrupt occurs.
   29                        	;
   30                        	; The VDC interupt handler itself is changed from the System Card's handler,
   31                        	; and it is designed to provide faster response to vsync_hook, and to enable
   32                        	; interrupts during the slow(ish) joypad and sound driver code, so that both
   33                        	; raster and timer interrupts are not delayed.
   34                        	;
   35                        	; Developers are free to enable interrupts during their own vsync_hook code,
   36                        	; if they wish to do so.
   37                        	;
   38                        	; On CD-ROM systems, this library kernel also provides a function to load and
   39                        	; run a new overlay program, without relying upon any of the code/data within
   40                        	; the current overlay program's memory (unlike HuC v3).
   41                        	;
   42                        	; ***************************************************************************
   43                        	; ***************************************************************************
   44                        	
   45                        	
   46                        	
   47                        	; ***************************************************************************
   48                        	; ***************************************************************************
   49                        	;
   50                        	; core_kernel - Start of kernel code.
   51                        	;
   52                        	
   53               E051     	core_kernel	=	*
   54                        	
   55                        	
   56                        	
   57                        	; ***************************************************************************
   58                        	; ***************************************************************************
   59                        	;
   60                        	; Useful constants, needed by joypad library code, and used by many others.
   61                        	;
   62                        	; The kernel starts with a non-zero byte so that core-startup.asm can check
   63                        	; whether it has already been loaded into RAM.
   64                        	;
   65                        	
   66    00:E051  FF FF      	const_FFFF:	dw	$FFFF			; Useful constant for TAI.
   67    00:E053  00 00      	const_0000:	dw	$0000			; Useful constant for TAI.
   68                        	
   69    00:E055  01 02 04 08	bit_mask:	db	$01,$02,$04,$08,$10,$20,$40,$80
         00:E059  10 20 40 80 
   70                        	
   71                        	
   72                        	
   73                        	; ***************************************************************************
   74                        	; ***************************************************************************
   75                        	;
   76                        	; core_irq2  - Minimal interrupt handler compatible with System Card.
   77                        	; core_irq1  - Minimal interrupt handler compatible with System Card.
   78                        	; core_timer - Minimal interrupt handler compatible with System Card.
   79                        	; core_rti   - Minimal interrupt handler compatible with System Card.
   80                        	;
   81                        	; Note that it takes 8 cycles to respond to an IRQ.
   82                        	;
   83                        	; These routines are copied to a location in RAM that does not vary when
   84                        	; a different overlay program is loaded.
   85                        	;
   86                        	; All overlay programs are set up to vector interrupts to these routines,
   87                        	; which is designed to avoid interrupt-related crashes when loading a new
   88                        	; overlay on top of an old overlay in memory.
   89                        	;
   90                        	; All of the game's actual interrupt handling itself is done in the "hook"
   91                        	; functions so that everything works the same if the System Card is banked
   92                        	; into MPR7 when an interrupt occurs.
   93                        	;
   94                        	; ***************************************************************************
   95                        	; ***************************************************************************
   96                        	;
   97                        	; Bit settings for irq_vec  ...
   98                        	;
   99                        	;   7 : 1 to skip BIOS hsync processsing
  100                        	;   6 : 1 to call [hsync_hook]
  101                        	;   5 : 1 to skip BIOS vsync processsing
  102                        	;   4 : 1 to call [vsync_hook]
  103                        	;
  104                        	;   3 : 1 to jump [nmi_hook]
  105                        	;   2 : 1 to jump [timer_hook]
  106                        	;   1 : 1 to jump [irq1_hook]
  107                        	;   0 : 1 to jump [irq2_hook]
  108                        	;
  109                        	; ***************************************************************************
  110                        	; ***************************************************************************
  111                        	
  112    00:E05D  8F F5 01   	core_irq2:	bbs0	<irq_vec, .hook		; 8 cycles if using hook.
  113                        	
  114               0000     		.if	CDROM
  138                        		.else
  139                        			; Does this HuCARD support the IFU's ADPCM hardware?
  140                        	
  141               0000     		.if	SUPPORT_ADPCM
  153                        		.endif	SUPPORT_ADPCM
  154                        	
  155    00:E060  40         			rti				; No IRQ2 hardware on HuCARD.
  156                        	
  157    00:E061  6C 00 22   	.hook:		jmp	[irq2_hook]		; 7 cycles.
  158                        		.endif	CDROM
  159                        	
  160                        	
  161                        	
  162                        	; ***************************************************************************
  163                        	; ***************************************************************************
  164                        	;
  165                        	; core_irq1 - Minimal interrupt handler compatible with System Card.
  166                        	;
  167                        	; irq1_handler - Basic "CORE(not TM)" IRQ1 handler to use as the "irq1_hook".
  168                        	;
  169                        	; Doing the IRQ1 handler processing in this hook means that things operate
  170                        	; the same whether the System Card or an Overlay is paged into MPR7.
  171                        	
  172               0000     		.ifndef	HUCC
  181                        		.else
  182                        			; Faster IRQ servicing for HuCC and code that would like to
  183                        			; avoid the 8 cycles used by the "bbs1" instruction that is
  184                        			; taken when the System Card is mapped into MPR7.
  185                        	
  186    00:E064             	core_irq1:	;;;				; 8 (cycles for the INT)
  187               0001     		.if	CDROM || !defined(NO_CORE_IRQ1_HOOK)
  188    00:E064  6C 02 22   			jmp	[irq1_hook]		; 7 cycles.
  189                        	
  190                        		.endif
  191                        		.endif
  192                        	
  193    00:E067  48         	irq1_handler:	pha				; 3 Save all registers.
  194    00:E068  DA         			phx				; 3
  195    00:E069  5A         			phy				; 3
  196                        	
  197               0000     		.ifndef	USING_RCR_MACROS		;   This slows things down
  206                        		.endif	USING_RCR_MACROS
  207                        	
  208    00:E06A  AD 00 02   			lda	VDC_SR			; 6 Acknowledge the VDC's IRQ.
  209    00:E06D  85 F6      			sta	<vdc_sr			; 4 Remember what caused it.
  210                        	
  211               0001     		.if	SUPPORT_SGX
  212    00:E06F  AE 10 02   			ldx	SGX_SR			; 6 Read SGX_SR after VDC_SR in
  213    00:E072  86 06      			stx	<sgx_sr			; 4 case this is not an SGX!
  214                        		.endif
  215                        	
  216                        			; Handle the VDC's RCR interrupt.
  217                        	
  218    00:E074  29 04      	!:		and	#$04			; 2 Is this an HSYNC interrupt?
  219    00:E076  F0 44      			beq	!+			; 2
  220                        	
  221               0001     		.ifdef	USING_RCR_MACROS
  222                        			VDC_RCR_MACRO
                             	
         00:E078  03 06      			st0	#VDC_RCR		; 5
                             	
         00:E07A  AE 26 27   			ldx	vdc_next_region		; 5 X and Y can be greater than
         00:E07D  BC 27 27   			ldy	vdc_regionA_nxt, x	; 5 HUCC_PCE_SPLITS if regionB!
         00:E080  18         			clc				; 2
         00:E081  D0 05      			bne	!set_next_rcr+		; 4 Stop RCR if next line is 0.
                             	
         00:E083  2D 53 E0   			and	const_0000		; 5 A=$00 with the same #cycles
         00:E086  80 05      			bra	!clr_next_rcr+		; 4 as if the branch were taken.
                             	
         00:E088  B9 D6 26   	!set_next_rcr:	lda	vdc_regionA_rcr, y	; 5 Set next RCR 1 line before
         00:E08B  69 3F      			adc	#64-1			; 2 the region begins, or 0 to
         00:E08D  8D 02 02   	!clr_next_rcr:	sta	VDC_DL			; 6 disable.
         00:E090  62         			cla				; 2
         00:E091  2A         			rol	a			; 2
         00:E092  8D 03 02   			sta	VDC_DH			; 6
                             	
         00:E095  03 08      			st0	#VDC_BYR		; 5 Do BYR first to mitigate the
         00:E097  BD 06 27   			lda	vdc_regionA_yl, x	; 5 glitch if the IRQ is delayed.
         00:E09A  8D 02 02   			sta	VDC_DL			; 6 = 105 cycles from RCR on SGX
         00:E09D  BD 16 27   			lda	vdc_regionA_yh, x	; 5
         00:E0A0  8D 03 02   			sta	VDC_DH			; 6
                             	
         00:E0A3  03 05      			st0	#VDC_CR			; 5
         00:E0A5  BD C6 26   			lda	vdc_regionA_crl, x	; 5
                             	;		asl	a
         00:E0A8  8D 02 02   			sta	VDC_DL			; 6
                             	
         00:E0AB  03 07      			st0	#VDC_BXR		; 2
         00:E0AD  BD E6 26   			lda	vdc_regionA_xl, x	; 5
         00:E0B0  8D 02 02   			sta	VDC_DL			; 6
         00:E0B3  BD F6 26   			lda	vdc_regionA_xh, x	; 5
         00:E0B6  8D 03 02   			sta	VDC_DH			; 6 = 156 cycles from RCR if DUO
                             	
                             	;		bcc	!+
                             	;		lda	vdc_regionA_yh, x	; 5
                             	;		sta.l	VCE_CTW			; 6
                             	
         00:E0B9  8C 26 27   			sty	vdc_next_region		; 5
                             	
  223                        		.else
  225                        		.endif
  226                        	
  227               0001     		.if	SUPPORT_SGX
  228                        	
  229                        			; Handle the SGX's RCR interrupt.
  230                        	
  231    00:E0BC  2F 06 50   	!:		bbr2	<sgx_sr, !+		; 6 Is this an HSYNC interrupt?
  232                        	
  233               0001     		.ifdef	USING_RCR_MACROS
  234                        			SGX_RCR_MACRO
                             	
         00:E0BF  A9 06      			lda	#VDC_RCR		; 2
         00:E0C1  8D 10 02   			sta	SGX_AR			; 6
                             	
         00:E0C4  AE A7 27   			ldx	sgx_next_region		; 5 X and Y can be greater than
         00:E0C7  BC A8 27   			ldy	sgx_regionA_nxt, x	; 5 HUCC_SGX_SPLITS if regionB!
         00:E0CA  18         			clc				; 2
         00:E0CB  D0 05      			bne	!set_next_rcr+		; 4 Stop RCR if next line is 0.
                             	
         00:E0CD  2D 53 E0   			and	const_0000		; 5 A=$00 with the same #cycles
         00:E0D0  80 05      			bra	!clr_next_rcr+		; 4 as if the branch were taken.
                             	
         00:E0D2  B9 57 27   	!set_next_rcr:	lda	sgx_regionA_rcr, y	; 5 Set next RCR 1 line before
         00:E0D5  69 3F      			adc	#64-1			; 2 the region begins, or 0 to
         00:E0D7  8D 12 02   	!clr_next_rcr:	sta	SGX_DL			; 6 disable.
         00:E0DA  62         			cla				; 2
         00:E0DB  2A         			rol	a			; 2
         00:E0DC  8D 13 02   			sta	SGX_DH			; 6
                             	
         00:E0DF  A9 08      			lda	#VDC_BYR		; 2 Do BYR first to mitigate the
         00:E0E1  8D 10 02   			sta	SGX_AR			; 6 glitch if the IRQ is delayed.
         00:E0E4  BD 87 27   			lda	sgx_regionA_yl, x	; 5
         00:E0E7  8D 12 02   			sta	SGX_DL			; 6
         00:E0EA  BD 97 27   			lda	sgx_regionA_yh, x	; 5
         00:E0ED  8D 13 02   			sta	SGX_DH			; 6
                             	
         00:E0F0  A9 05      			lda	#VDC_CR			; 2
         00:E0F2  8D 10 02   			sta	SGX_AR			; 6
         00:E0F5  BD 47 27   			lda	sgx_regionA_crl, x	; 5
         00:E0F8  8D 12 02   			sta	SGX_DL			; 6
                             	
         00:E0FB  A9 07      			lda	#VDC_BXR		; 2
         00:E0FD  8D 10 02   			sta	SGX_AR			; 6
         00:E100  BD 67 27   			lda	sgx_regionA_xl, x	; 5
         00:E103  8D 12 02   			sta	SGX_DL			; 6
         00:E106  BD 77 27   			lda	sgx_regionA_xh, x	; 5
         00:E109  8D 13 02   			sta	SGX_DH			; 6 = 293 cycles (282 if no YH)
                             	
         00:E10C  8C A7 27   			sty	sgx_next_region		; 5
                             	
  235                        		.else
  237                        		.endif
  238                        	
  239                        		.endif	SUPPORT_SGX
  240                        	
  241                        			; Handle the VDC's VBL interrupt.
  242                        	
  243    00:E10F  5F F6 32   	!:		bbr5	<vdc_sr, .exit_irq1	; 6 Is this a VBLANK interrupt?
  244                        	
  245               0001     		.ifdef	USING_RCR_MACROS		;   If we didn't do it earlier
  246               0000     		.if	CDROM				;   then we need to do it now.
  253                        		.endif	CDROM
  254                        		.endif	USING_RCR_MACROS
  255                        	
  256               0001     		.if	SUPPORT_SGX
  257    00:E112  A9 05      			lda	#VDC_CR			; Update the SGX's Control
  258    00:E114  8D 10 02   			sta	SGX_AR			; Register first, just in
  259    00:E117  8D 00 02   			sta	VDC_AR			; case this is not an SGX!
  260    00:E11A  A5 03      			lda	<sgx_crl		
  261    00:E11C  8D 12 02   			sta	SGX_DL
  262    00:E11F  A5 F3      			lda	<vdc_crl
  263    00:E121  8D 02 02   			sta	VDC_DL
  264                        	
  265                        	;		lda	<sgx_crh		; Do not mess with the SGX's
  266                        	;		sta	SGX_DH			; auto-increment!!!
  267                        	;		lda	<vdc_crh		; Do not mess with the VDC's
  268                        	;		sta	VDC_DH			; auto-increment!!!
  269                        		.else
  277                        		.endif	SUPPORT_SGX
  278                        	
  279    00:E124  EE 41 22   			inc	irq_cnt			; Mark that a VBLANK occurred.
  280                        	
  281    00:E127  4F F5 02   			bbr4	<irq_vec, .skip_hookv	; Is a driver registered?
  282                        	
  283    00:E12A  44 26      			bsr	.user_vsync		; Call game's VBLANK code.
  284                        	
  285    00:E12C  DF F5 15   	.skip_hookv:	bbs5	<irq_vec, .exit_vbl	; Should we skip "BIOS" stuff?
  286                        	
  287    00:E12F  58         			cli				; Allow HSYNC and TIMER IRQ.
  288                        	
  289    00:E130  20 DB FF   			call	read_joypads		; Update joypad state.
  290                        	
  291               0000     		.if	USING_PSGDRIVER
  305                        		.else
  306    00:E133  AD 07 22   			lda	sound_hook + 1		; Is a driver registered?
  307    00:E136  F0 0C      			beq	.exit_vbl
  308                        	
  309    00:E138  A9 80      			lda	#$80			; Acquire sound mutex to avoid
  310    00:E13A  0C E7 22   			tsb	sound_mutex		; conflict with a delayed VBL.
  311    00:E13D  30 05      			bmi	.exit_vbl
  312                        	
  313    00:E13F  44 14      			bsr	.user_sound		; Call the driver hook.
  314                        	
  315    00:E141  9C E7 22   			stz	sound_mutex		; Release sound mutex.
  316                        		.endif	USING_PSGDRIVER
  317                        	
  318    00:E144             	.exit_vbl:
  319                        	
  320               0001     		.ifdef	USING_RCR_MACROS		; If USING_RCR_MACROS then 
  321               0000     		.if	CDROM				; restore after the VBLANK.
  326                        		.endif	CDROM
  327                        		.endif	USING_RCR_MACROS
  328                        	
  329    00:E144             	.exit_irq1:
  330                        	
  331               0000     		.ifndef	USING_RCR_MACROS		; If !USING_RCR_MACROS then
  338                        		.endif	USING_RCR_MACROS
  339                        	
  340               0001     		.if	SUPPORT_SGX
  341    00:E144  A5 07      			lda	<sgx_reg		; Restore SGX_AR first, just
  342    00:E146  8D 10 02   			sta	SGX_AR			; in case this is not an SGX!
  343                        		.endif
  344                        	
  345    00:E149  A5 F7      			lda	<vdc_reg		; Restore VDC_AR in case we
  346    00:E14B  8D 00 02   			sta	VDC_AR			; changed it.
  347                        	
  348    00:E14E  7A         			ply				; Restore all registers.
  349    00:E14F  FA         			plx
  350    00:E150  68         			pla
  351                        	
  352    00:E151  40         			rti				; Return from interrupt.
  353                        	
  354    00:E152  6C 08 22   	.user_vsync:	jmp	[vsync_hook]		; 7
  355    00:E155  6C 06 22   	.user_sound:	jmp	[sound_hook]		; 7
  356                        	
  357               0000     		.ifndef	USING_RCR_MACROS
  362                        		.endif	USING_RCR_MACROS
  363                        	
  364                        	
  365                        	
  366                        	; ***************************************************************************
  367                        	; ***************************************************************************
  368                        	;
  369                        	; core_timer - Minimal interrupt handler compatible with System Card.
  370                        	;
  371                        	; tirq_handler - Basic "CORE(not TM)" TIRQ handler to use as the "timer_hook".
  372                        	;
  373                        	; Doing the TIRQ handler processing in this hook means that things operate
  374                        	; the same whether the System Card or an Overlay is paged into MPR7.
  375                        	
  376               0000     		.ifndef	HUCC
  385                        		.else
  386                        			; Faster IRQ servicing for HuCC and code that would like to
  387                        			; avoid the 8 cycles used by the "bbs2" instruction that is
  388                        			; taken when the System Card is mapped into MPR7.
  389                        	
  390    00:E158             	core_timer:	;;;				; 8 (cycles for the INT)
  391               0001     		.if	CDROM || !defined(NO_CORE_TIRQ_HOOK)
  392    00:E158  6C 04 22   			jmp	[timer_hook]		; 7 cycles.
  393                        		.endif
  394                        		.endif
  395                        	
  396    00:E15B             	tirq_handler:
  397               0000     		.ifdef	USING_TIRQ_MACRO
  399                        		.else
  400    00:E15B  9C 03 14   			stz	IRQ_ACK			; 5 Clear timer interrupt.
  401                        		.endif
  402                        	
  403    00:E15E  40         	core_rti:	rti
  404                        	
  405                        	
  406                        	
  407                        	; ***************************************************************************
  408                        	; ***************************************************************************
  409                        	;
  410                        	; core_clr_hooks - Reset default "CORE(not TM)" interrupt-handling hooks.
  411                        	;
  412                        	
  413    00:E15F  08         	core_clr_hooks:	php				; Preserve interrupt state.
  414    00:E160  78         			sei				; Disable interrupts.
  415                        	
  416               0000     		.if	USING_PSGDRIVER
  419                        		.else
  420    00:E161  9C 07 22   			stz.h	sound_hook		; Disable sound driver calls.
  421                        		.endif
  422                        	
  423    00:E164  A9 88      			lda	#<core_sw_reset		; Set up the soft-reset hook.
  424    00:E166  8D 84 22   			sta.l	reset_hook
  425    00:E169  A9 E1      			lda	#>core_sw_reset
  426    00:E16B  8D 85 22   			sta.h	reset_hook
  427                        	
  428    00:E16E  A9 67      			lda	#<irq1_handler		; Set up the IRQ1 hook.
  429    00:E170  8D 02 22   			sta.l	irq1_hook
  430    00:E173  A9 E0      			lda	#>irq1_handler
  431    00:E175  8D 03 22   			sta.h	irq1_hook
  432                        	
  433    00:E178  A9 5B      			lda	#<tirq_handler		; Set up the TIRQ hook.
  434    00:E17A  8D 04 22   			sta.l	timer_hook
  435    00:E17D  A9 E1      			lda	#>tirq_handler
  436    00:E17F  8D 05 22   			sta.h	timer_hook
  437                        	
  438    00:E182  A9 06      			lda	#%00000110		; Replace the System Card's
  439    00:E184  85 F5      			sta	<irq_vec		; IRQ1 and TIRQ processing.
  440                        	
  441    00:E186  28         			plp				; Restore interrupt state.
  442    00:E187  60         			rts
  443                        	
  444                        	
  445                        	
  446                        	; ***************************************************************************
  447                        	; ***************************************************************************
  448                        	;
  449                        	; Include the joypad library, with configuration from "core-config.inc".
  450                        	;
  451                        	
                             #[6]   "..\..\..\include\hucc\joypad.asm"
  452                        			include "joypad.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; joypad.asm
    5                        	;
    6                        	; Read 2-button & 6-button joypads & PCE mouse, with or without a MultiTap.
    7                        	;
    8                        	; Copyright John Brandwood 2019-2025.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; Unlike Lemmings, this code does not interfere with a Memory Base 128! ;-)
   18                        	;
   19                        	; ***************************************************************************
   20                        	; ***************************************************************************
   21                        	;
   22                        	; With SUPPORT_MOUSE ..... 2602 cycles to read 5 ports with 5 mice
   23                        	;
   24                        	; With HuC library code .. 2442 cycles to read 5 ports with 5 pads (2-button)
   25                        	; With HuC library code .. 2442 cycles to read 5 ports with 5 pads (6-button)
   26                        	;
   27                        	; With SUPPORT_MOUSE ....  2016 cycles to read 5 ports with 5 pads (2-button)
   28                        	; With SUPPORT_MOUSE ..... 1976 cycles to read 5 ports with 5 pads (6-button)
   29                        	;
   30                        	; With SUPPORT_MOUSE ....  1618 cycles to read 3 ports with 3 mice
   31                        	; With SUPPORT_MOUSE ..... 1462 cycles to read 3 ports with 2 mice
   32                        	; With SUPPORT_MOUSE ..... 1306 cycles to read 3 ports with 1 mouse
   33                        	;
   34                        	; With SUPPORT_6BUTTON ... 1235 cycles to read 5 ports with 5 pads (2-button)
   35                        	; With SUPPORT_6BUTTON ... 1215 cycles to read 5 ports with 5 pads (6-button)
   36                        	;
   37                        	; With SUPPORT_MOUSE ..... 1126 cycles to read 2 ports with 2 mice
   38                        	; With SUPPORT_MOUSE ...... 970 cycles to read 2 ports with 1 mouse
   39                        	;
   40                        	; Only SUPPORT_2BUTTON .... 971 cycles to read 5 ports with 5 pads (2-button)
   41                        	; Only SUPPORT_2BUTTON .... 861 cycles to read 5 ports with 5 pads (6-button)
   42                        	;
   43                        	; With SUPPORT_MOUSE ...... 634 cycles to read 1 port  with 1 mouse
   44                        	;
   45                        	; ***************************************************************************
   46                        	; ***************************************************************************
   47                        	
  142                        	
  143                        	;
  144                        	; Now choose which version of the code to include.
  145                        	;
  146                        	
  147               0000     		.if	SUPPORT_2BUTTON
  278                        		.endif	SUPPORT_2BUTTON
  279                        	
  280                        	
  281                        	
  282               0000     		.if	SUPPORT_MOUSE
  845                        		.else	SUPPORT_MOUSE
  846                        	
  847                        	
  848                        	
  849               0001     		.if	SUPPORT_6BUTTON			; Without mouse!
  850                        	
  851                        	; ***************************************************************************
  852                        	; ***************************************************************************
  853                        	;
  854                        	; read_joypads - full 6-button pad support, but mouse movement is ignored.
  855                        	;
  856                        	; This code distinguishes between a mouse and a 2-button or 6-button joypad,
  857                        	; so that unsupported devices do not have to be unplugged from the MultiTap.
  858                        	;
  859                        	; The code loops two times to get both sets of buttons on a 6-button joypad.
  860                        	;
  861                        	; N.B. Takes approx 1/3 frame to detect mice the first time it is run.
  862                        	;
  863                        	; bit values for joypad 2-button bytes: (MSB = #7; LSB = #0)
  864                        	; ----------------------------------------------------------
  865                        	; bit 0 (ie $01) = I
  866                        	; bit 1 (ie $02) = II
  867                        	; bit 2 (ie $04) = SELECT
  868                        	; bit 3 (ie $08) = RUN
  869                        	; bit 4 (ie $10) = UP
  870                        	; bit 5 (ie $20) = RIGHT
  871                        	; bit 6 (ie $40) = DOWN
  872                        	; bit 7 (ie $80) = LEFT
  873                        	;
  874                        	; bit values for joypad 6-button bytes: (MSB = #7; LSB = #0)
  875                        	; ----------------------------------------------------------
  876                        	; bit 0 (ie $01) = III
  877                        	; bit 1 (ie $02) = IV
  878                        	; bit 2 (ie $04) = V
  879                        	; bit 3 (ie $08) = VI
  880                        	; bit 4 (ie $10) = zero
  881                        	; bit 5 (ie $20) = zero
  882                        	; bit 6 (ie $40) = zero
  883                        	; bit 7 (ie $80) = zero, but set to one if 6-button pad detected.
  884                        	;
  885                        	
  886               E188     			.code
  887                        	
  888               0001     		.if	(* >= $4000)			; Make this a ".proc" if it
  889    18:C820             	read_joypads	.proc                           ; not running in RAM.
  890                        		.else
  892                        		.endif
  893                        	
  894    18:C820  A9 80      			lda	#$80			; Acquire port mutex to avoid
  895    18:C822  0C D0 22   			tsb	port_mutex		; conflict with a delayed VBL
  896    18:C825  30 75      			bmi	.exit			; or access to an MB128.
  897                        	
  898    18:C827  73 28 22 32			tii	joynow,joyold,MAX_PADS	; Save the previous values.
         18:C82B  22 05 00    
  899    18:C82E  73 D3 22 D8			tii	joy6now,joy6old,MAX_PADS
         18:C832  22 05 00    
  900                        	
  901                        			; Reset the 6-btn bits, the user might change the joypad mode!
  902                        	
  903    18:C835  F3 53 E0 D3			tai	const_0000, joy6now, MAX_PADS
         18:C839  22 05 00    
  904                        	
  905                        			; Detect attached mice the first time this routine is called.
  906                        	
  907    18:C83C  AD D2 22   			lda	mouse_flg		; Has mouse detection happened?
  908    18:C83F  30 28      			bmi	.calc_pressed
  909                        	
  910    18:C841  A9 05      			lda	#MAX_PADS		; Reset number of pads to read.
  911    18:C843  8D D1 22   			sta	num_ports
  912                        	
  913    18:C846  A9 1F      			lda	#%00011111		; Try reading everything as a
  914    18:C848  8D D2 22   			sta	mouse_flg		; mouse.
  915                        	
  916    18:C84B  A0 17      			ldy	#23			; Initialize repeat count.
  917    18:C84D  A9 80      			lda	#$80			; Initialize mouse detection.
  918    18:C84F  5A         	.detect_loop:	phy
  919    18:C850  48         			pha
  920    18:C851  44 53      			bsr	.read_devices		; Read all devices as if mice.
  921    18:C853  68         			pla
  922    18:C854  82         			clx
  923    18:C855  BC E2 22   	.detect_port:	ldy	mouse_x, x		; A movement of zero means
  924    18:C858  D0 03      			bne	.detect_next		; this port is a mouse.
  925    18:C85A  1D 55 E0   			ora	bit_mask, x
  926    18:C85D  E8         	.detect_next:	inx				; Get the next pad from the
  927    18:C85E  E0 05      			cpx	#MAX_PADS		; multitap.
  928    18:C860  D0 F3      			bne	.detect_port
  929    18:C862  7A         			ply				; Repeat the detection test.
  930    18:C863  88         			dey
  931    18:C864  D0 E9      			bne	.detect_loop
  932                        	
  933                        	;	.if	DETECT_PHANTOMS
  934                        	;		cmp	#(1 << MAX_PADS) + 127	; If we find a mouse in every
  935                        	;		bne	.detect_done		; port, then assume mirrored!
  936                        	;		lda	#1			; Report a single mouse in a
  937                        	;		sta	num_ports		; single port.
  938                        	;		lda	#$81
  939                        	;	.endif
  940                        	
  941    18:C866  8D D2 22   	.detect_done:	sta	mouse_flg		; Report mouse detection.
  942                        	
  943                        			; See what has just been pressed, and check for soft-reset.
  944                        	
  945    18:C869  44 3B      	.calc_pressed:	bsr	.read_devices		; Read all devices normally.
  946                        	
  947    18:C86B  A2 04      			ldx	#MAX_PADS - 1
  948                        	
  949    18:C86D  BD D3 22   	.pressed_loop:	lda	joy6now, x		; Calc which buttons have just
  950    18:C870  5D D8 22   			eor	joy6old, x		; been pressed (6-button).
  951    18:C873  3D D3 22   			and	joy6now, x
  952               0000     		.if	HUC_JOY_EVENTS
  956                        		.else
  957               0000     		.if	ACCUMULATE_JOY
  959                        		.endif
  960    18:C876  9D DD 22   			sta	joy6trg, x
  961                        		.endif
  962                        	
  963    18:C879  BD 28 22   			lda	joynow, x		; Calc which buttons have just
  964    18:C87C  A8         			tay                             ; been pressed (2-button).
  965    18:C87D  5D 32 22   			eor	joyold, x
  966    18:C880  3D 28 22   			and	joynow, x
  967               0000     		.if	HUC_JOY_EVENTS
  971                        		.else
  972               0000     		.if	ACCUMULATE_JOY
  974                        		.endif
  975    18:C883  9D 2D 22   			sta	joytrg, x
  976                        		.endif
  977                        	
  978    18:C886  C9 04      			cmp	#$04			; Detect the soft-reset combo,
  979    18:C888  D0 0C      			bne	.not_reset		; hold RUN then press SELECT.
  980    18:C88A  C0 0C      			cpy	#$0C
  981    18:C88C  D0 08      			bne	.not_reset
  982    18:C88E  BD 55 E0   			lda	bit_mask, x
  983    18:C891  2C 27 22   			bit	joyena
  984    18:C894  D0 09      			bne	.soft_reset
  985                        	
  986    18:C896  CA         	.not_reset:	dex				; Check the next pad from the
  987    18:C897  10 D4      			bpl	.pressed_loop		; multitap.
  988                        	
  989    18:C899  9C D0 22   			stz	port_mutex		; Release port mutex.
  990                        	
  991               0001     		.if	(* >= $4000)			; This is a ".proc" if it is
  992                        	.exit:		leave                           ; not running in RAM.
         18:C89C  4C EF FF   			jmp	leave_proc
  993                        		.else
  995                        		.endif
  996                        	
  997    18:C89F  78         	.soft_reset:	sei				; Disable interrupts.
  998    18:C8A0  9C D0 22   			stz	port_mutex		; Release port mutex.
  999    18:C8A3  6C 84 22   			jmp	[reset_hook]		; Jump to the soft-reset hook.
 1000                        	
 1001                        			; Read all of the devices attached to the MultiTap.
 1002                        	
 1003    18:C8A6  A2 02      	.read_devices:	ldx	#2			; Repeat this loop 2 times.
 1004                        	
 1005    18:C8A8  A9 01      	.read_multitap:	lda	#$01			; CLR lo, SEL hi for d-pad.
 1006    18:C8AA  8D 00 10   			sta	IO_PORT
 1007    18:C8AD  A9 03      			lda	#$03			; CLR hi, SEL hi, reset tap.
 1008    18:C8AF  8D 00 10   			sta	IO_PORT
 1009    18:C8B2  C2         			cly				; Start at port 1.
 1010                        	
 1011    18:C8B3  A9 01      	.read_port:	lda	#$01			; CLR lo, SEL hi for d-pad.
 1012    18:C8B5  8D 00 10   			sta	IO_PORT			; Wait 1.25us (9 cycles).
 1013                        	
 1014    18:C8B8  B9 55 E0   			lda	bit_mask, y		; Is there a mouse attached?
 1015    18:C8BB  2D D2 22   			and	mouse_flg
 1016    18:C8BE  D0 33      			bne	.read_mouse
 1017                        	
 1018    18:C8C0  AD 00 10   	.read_pad:	lda	IO_PORT			; Read direction-pad bits.
 1019    18:C8C3  9C 00 10   			stz	IO_PORT			; CLR lo, SEL lo for buttons.
 1020    18:C8C6  0A         			asl	a			; Wait 1.25us (9 cycles).
 1021    18:C8C7  0A         			asl	a
 1022    18:C8C8  0A         			asl	a
 1023    18:C8C9  0A         			asl	a
 1024    18:C8CA  F0 1B      			beq	.read_6button		; 6-btn pad if UDLR all held.
 1025                        	
 1026    18:C8CC  99 28 22   	.read_2button:	sta	joynow, y		; Get buttons of 2-btn pad.
 1027    18:C8CF  AD 00 10   			lda	IO_PORT
 1028    18:C8D2  29 0F      			and	#$0F
 1029    18:C8D4  19 28 22   			ora	joynow, y
 1030    18:C8D7  49 FF      			eor	#$FF
 1031    18:C8D9  99 28 22   			sta	joynow, y
 1032                        	
 1033    18:C8DC  C8         	.next_port:	iny				; Get the next pad from the
 1034    18:C8DD  CC D1 22   			cpy	num_ports		; multitap.
 1035    18:C8E0  90 D1      			bcc	.read_port
 1036                        	
 1037    18:C8E2  CA         			dex				; Do the next complete pass.
 1038    18:C8E3  CA         			dex
 1039    18:C8E4  10 C2      			bpl	.read_multitap		; Have we finished 2 passes?
 1040    18:C8E6  60         			rts				; Now that everything is read.
 1041                        	
 1042    18:C8E7  AD 00 10   	.read_6button:	lda	IO_PORT			; Get buttons of 6-btn pad.
 1043    18:C8EA  29 0F      			and	#$0F
 1044    18:C8EC  49 8F      			eor	#$8F			; Set bit-7 to show that a
 1045    18:C8EE  99 D3 22   			sta	joy6now, y		; 6-button pad is present.
 1046    18:C8F1  80 E9      			bra	.next_port
 1047                        	
 1048    18:C8F3  7C 24 C9   	.read_mouse:	jmp	[.mouse_vectors, x]	; Which mouse info is next?
 1049                        	
 1050                        			; Mouse processing, normally four passes, here just two.
 1051                        	
 1052    18:C8F6  A9 1C      	.mouse_x_hi:	lda	#28			; 189 cycle delay after CLR lo
 1053    18:C8F8  3A         	.wait_loop:	dec	a			; on port to allow the mouse
 1054    18:C8F9  D0 FD      			bne	.wait_loop		; to buffer and reset counters.
 1055                        	
 1056    18:C8FB  AD 00 10   			lda	IO_PORT			; Read direction-pad bits.
 1057    18:C8FE  9C 00 10   			stz	IO_PORT			; CLR lo, SEL lo for buttons.
 1058    18:C901  0A         			asl	a			; Wait 1.25us (9 cycles).
 1059    18:C902  0A         			asl	a
 1060    18:C903  0A         			asl	a
 1061    18:C904  0A         			asl	a
 1062    18:C905  99 E2 22   			sta	mouse_x, y		; Save port's X-hi nibble.
 1063                        	
 1064    18:C908  AD 00 10   			lda	IO_PORT			; Get mouse buttons.
 1065    18:C90B  29 0F      			and	#$0F
 1066    18:C90D  49 0F      			eor	#$0F
 1067    18:C90F  99 28 22   			sta	joynow, y
 1068    18:C912  80 C8      			bra	.next_port
 1069                        	
 1070    18:C914  AD 00 10   	.mouse_x_lo:	lda	IO_PORT			; Read direction-pad bits.
 1071    18:C917  9C 00 10   			stz	IO_PORT			; CLR lo, SEL lo for buttons.
 1072    18:C91A  29 0F      			and	#$0F			; Wait 1.25us (9 cycles).
 1073    18:C91C  19 E2 22   			ora	mouse_x, y		; Add port's X-hi nibble.
 1074                        	;		eor	#$FF			; Negate so LEFT is -ve.
 1075                        	;		inc	a
 1076    18:C91F  99 E2 22   			sta	mouse_x, y
 1077    18:C922  80 B8      			bra	.next_port
 1078                        	
 1079    18:C924  14 C9      	.mouse_vectors: dw	.mouse_x_lo		; Pass 2
 1080    18:C926  F6 C8      			dw	.mouse_x_hi		; Pass 1
 1081                        	
 1082               0001     		.if	(* >= $4000)			; This is a ".proc" if it is
 1083                        			.endp                           ; not running in RAM.
 1084               22D0     			.bss				; Put the variables in RAM.
 1085                        		.endif
 1086                        	
 1087    F8:22D0             	port_mutex:	ds	1			; NZ when controller port busy.
 1088    F8:22D1             	num_ports:	ds	1			; Set to 1 if no multitap.
 1089    F8:22D2             	mouse_flg:	ds	1			; Which ports are mice?
 1090               0000     		.if	HUC_JOY_EVENTS
 1093                        		.endif
 1094    F8:22D3             	joy6now:	ds	MAX_PADS
 1095    F8:22D8             	joy6old:	ds	MAX_PADS
 1096    F8:22DD             	joy6trg:	ds	MAX_PADS
 1097    F8:22E2             	mouse_x:	ds	MAX_PADS
 1098                        	
 1099               E188     			.code
 1100                        	
 1101                        		.endif	SUPPORT_6BUTTON			; Without mouse!
 1102                        	
 1103                        		.endif	SUPPORT_MOUSE
                             #[5]   "..\..\..\include\hucc\core-kernel.asm"
  453                        	
  454                        	
  455                        	
  456               0001     		.if	!CDROM
  457                        	
  458                        	; ***************************************************************************
  459                        	; ***************************************************************************
  460                        	;
  461                        	; core_sw_reset - Default HuCARD handler for a joypad "soft-reset".
  462                        	;
  463                        	
  464    00:E188  78         	core_sw_reset:	sei				; Disable interrupts.
  465                        	
  466    00:E189  6C FE FF   			jmp	[$FFFE]			; Jump to the HuCARD reset.
  467                        	
  468                        	
  469                        	
  470                        		.else	!CDROM
  616                        		.endif	!CDROM
  617                        	
  618                        	
  619                        	
  620                        	; ***************************************************************************
  621                        	; ***************************************************************************
  622                        	
  623               0001     		.if	(core_kernel >= $4000)		; If not running in RAM, then
  624               22E7     			.bss				; put these variables in RAM.
  625                        		.endif
  626                        	
  627    F8:22E7             	sound_mutex:	ds	1			; NZ when controller port busy.
  628                        	
  629               0001     		.if	SUPPORT_SGX
  630    F8:22E8             	sgx_detected:	ds	1			; NZ if SuperGrafx detected.
  631    F8:22E9             	hsync_hook_sgx:	ds	2			; SGX version of hsync_hook.
  632                        		.endif
  633                        	
  634               0000     		.if	SUPPORT_ACD
  636                        		.endif
  637                        	
  638               0001     		.if	(core_kernel >= $4000)
  639               E18C     			.code
  640                        		.endif
                             #[4]   "..\..\..\include\hucc\core-startup.asm"
  427                        	
  428                        	
  429                        	
  430                        		.else	!CDROM
  524                        		.endif	!CDROM
  525                        	
  526                        	
  527                        	
  528                        	; ***************************************************************************
  529                        	; ***************************************************************************
  530                        	;
  531                        	; With the availability of so many different configuration options, we've now
  532                        	; built somewhere between a few hundred bytes, and a couple of KB, of code in
  533                        	; the CORE_BANK of the HuCARD / overlay program.
  534                        	;
  535                        	; This is the end of the "CORE(not TM)" library code!
  536                        	;
  537                        	; Remember that the ".proc" trampolines are located at the end of this bank,
  538                        	; so the amount of free space left depends upon the number of ".proc" calls.
  539                        	;
  540                        	
  541                        			; Switch to CORE_PAGE to run the developer's game code.
  542               E18C     			.page	CORE_PAGE
  543                        	
  544                        	
  545                        	
  546                        	; ***************************************************************************
  547                        	; ***************************************************************************
  548                        	;
  549                        	; The DATA_BANK location needs to be set as early as possible so that library
  550                        	; code is able to put data in there before the total overall size of the code
  551                        	; is known.
  552                        	;
  553                        	; By default, DATA_BANK is the next bank after the CORE_BANK.
  554                        	;
  555                        	; RESERVE_BANKS allows developers to reserve some banks between the CORE_BANK
  556                        	; and the DATA_BANK that they can use however they wish.
  557                        	;
  558                        	; One use for RESERVE_BANKS is to create empty space that PCEAS can use when
  559                        	; it relocates procedures. This provides a way for a developer to group code
  560                        	; together at the start of memory, and leave the maximum number of banks for
  561                        	; loading dynamic data from CD-ROM.
  562                        	;
  563                        	; The KickC environment sets RESERVE_BANKS=1 (or higher) so that there is a
  564                        	; a bank for the permanent C code and static constants.
  565                        	;
  566                        	; RESERVE_BANKS is normally defined in each project's "core-config.inc".
  567                        	;
  568                        	
  569                        			.opt	d+			; DATA labels use fixed MPR.
  570                        	
  571               0001     			.rsset	CORE_BANK + 1
  572                        	
  573               0000     		.ifdef	NEED_HOME_BANK
  580                        		.endif
  581                        	
  582               0001     		.ifdef	NEED_SOUND_BANK			; Defined in hucc-sound.inc
  583               0000     		.if	NEED_SOUND_BANK			; if the driver wants a bank.
  585                        		.endif
  586                        		.endif
  587                        	
  588               0001     		.ifdef	RESERVE_BANKS			; For CORE projects.
  589               0001     	RESERVED_BANK	.rs	RESERVE_BANKS
  590                        		.endif
  591                        	
  592               0001     		.ifdef	HUCC
  593               0001     		.ifdef	HUC_RESERVE_BANKS		; For HuCC projects.
  594               0001     	HUC_USER_BANK	.rs	HUC_RESERVE_BANKS
  595                        		.endif
  596                        	
  597               0001     	CONST_BANK	.rs	2
  598               6000     			.rodata
  599               0001     			.bank	CONST_BANK, ".rodata"
  600                        		.endif	HUCC
  601                        	
  602               0003     	DATA_BANK	.rs	0
  603               6000     			.data
  604               0000     		.if	BUILDING_STAGE1
  606                        		.else
  607               0003     			.bank	DATA_BANK, ".data"
  608                        		.endif
  609               6000     			.org	$6000
  610                        	
  611               E18C     			.code
                             #[3]   "..\..\..\include\hucc\core.inc"
                             #[2]   "..\..\..\include\hucc\hucc.asm"
  120                        		.else
  126                        		.endif
  127                        	
  128                        			; Allocate this as early as possible to ensure bank-aligned
  129                        			; so that there is no wasted space for aligning the table.
  130                        	
  131               0000     		.if	FAST_MULTIPLY
  138                        		.endif
  139                        	
  140                        			;
  141                        	
  144                        	
  145                        			; The hardware stack is used for expressions.
  146                        	
  147               00FF     	__tos		=	$F8:2101, 255
  148                        	
  149               2008     			.zp
  150               2008     			.align	2
  151    F8:2008             	__stack:	ds	HUCC_STACK_SZ
  152                        	
  153    F8:2088             	__ptr:		ds	2
  154    F8:208A             	__fptr:		ds	2
  155    F8:208C             	__fbank:	ds	1
  156    F8:208D             	__sp:		ds	1
  157                        	
  158                        			; REGTEMP 6-byte stack for temporaries used by SDCC.
  159                        			; Keep the size in sync with NUM_TEMP_REGS in sdcc/src/mos6502/gen.h!
  160                        	
  161    F8:208E             	REGTEMP:	ds	6
  162                        	
  163                        			; HuCC's non-recursive consecutive varargs for printf().
  164                        	
  165               2008     	__vararg1	=	__stack + 0
  166               200A     	__vararg2	=	__stack + 2
  167               200C     	__vararg3	=	__stack + 4
  168               200E     	__vararg4	=	__stack + 6
  169                        	
  170                        			; Pointer used by poke() because __ptr could be overwritten.
  171                        	
  172               20EE     	__poke		=	__si
  173                        	
  174                        			; Used for indirect calls because __ptr could be overwritten.
  175                        	
  176               20EE     	__func		=	__si
  177                        	
  178                        			; Data pointer used by SDCC for indirect indexed memory access.
  179                        	
  180               2088     	DPTR		=	__ptr
  181                        	
  182                        			; Values returned from SDCC functions that don't fit into XA.
  183                        			; These are also used as workspace for SDCC library functions,
  184                        			; including HuCC's multiplication and division functions.
  185                        	
  186    F8:2094             	___SDCC_m6502_ret0:	ds	1
  187    F8:2095             	___SDCC_m6502_ret1:	ds	1
  188    F8:2096             	___SDCC_m6502_ret2:	ds	1
  189    F8:2097             	___SDCC_m6502_ret3:	ds	1
  190                        	
  191               0000     		.if	0
  196                        		.endif
  197                        	
  198                        			; Permanent pointers for fast table-of-squares multiplication.
  199                        	
  200               0000     		.if	FAST_MULTIPLY
  205                        		.endif
  206                        	
  207                        			; HuCC keeps a realtime clock, updated in hucc_vbl.
  208                        			;
  209                        			; Defining this here means that it will go before any HuCC
  210                        			; variables in "globals.h", and so it won't get cleared in
  211                        			; a CDROM game when loading different overlays.
  212                        	
  213               22EB     			.bss
  214    F8:22EB             	old_cnt:	ds	1			; irq_cnt of previous vsync().
  215    F8:22EC             	clock_hh:	ds	1			; System Clock, hours	(0-11)
  216    F8:22ED             	clock_mm:	ds	1			; System Clock, minutes (0-59)
  217    F8:22EE             	clock_ss:	ds	1			; System Clock, seconds (0-59)
  218    F8:22EF             	clock_tt:	ds	1			; System Clock, ticks	(0-59)
  219               E18C     			.code
  220                        	
  221                        			; Critical HuCC libraries that the compiler depends upon.
  222                        			;
  223                        			; These include various macros that must be defined before
  224                        			; they are encountered in any compiler-generated code.
  225                        	
                             #[3]   "..\..\..\include\hucc\hucc-codegen.asm"
  226                        			include "hucc-codegen.asm"	; HuCC i-code macros and funcs.
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-codegen.asm
    5                        	;
    6                        	; The HuCC compiler translates C code into these macros, it does not directly
    7                        	; generate HuC6280 instructions.
    8                        	;
    9                        	; Based on the original HuC macros created by David Michel and the other HuC
   10                        	; developers, later modified and improved by Ulrich Hecht.
   11                        	;
   12                        	; Modifications copyright John Brandwood 2024.
   13                        	;
   14                        	; Distributed under the Boost Software License, Version 1.0.
   15                        	; (See accompanying file LICENSE_1_0.txt or copy at
   16                        	;  http://www.boost.org/LICENSE_1_0.txt)
   17                        	;
   18                        	; ***************************************************************************
   19                        	; ***************************************************************************
   20                        	;
   21                        	; NAMING SCHEME FOR HuCC MACROS ...
   22                        	;
   23                        	;   __function.parameters
   24                        	;
   25                        	; {parameters} is a list of alphanumeric specifiers, starting with {size} and
   26                        	; followed by {where}, followed by {index} if an array, then optional {value}
   27                        	; and finally ending with optional {suffix}
   28                        	;
   29                        	; {size}
   30                        	;   w : 16-bit signed int (default "int" in HuCC)
   31                        	;   c : 16-bit unsigned int (a "cardinal" in Pascal terms)
   32                        	;   b :  8-bit signed char
   33                        	;   u :  8-bit unsigned char (default "char" in HuCC)
   34                        	;
   35                        	; {where} or {index}
   36                        	;   r : HuCC primary register, made up of the Y:A cpu registers
   37                        	;   t : top of expression stack
   38                        	;   p : indirect pointer, usually [__ptr]
   39                        	;   f : structure field (member) offset value
   40                        	;   i : immediate value, i.e. a decimal number
   41                        	;   m : memory, i.e. C global, static, and "-fno-recursive" variables
   42                        	;   s : stack, i.e. C function parameters and locals (not "-fno-recursive")
   43                        	;   a : array, i.e. C global, static, "-fno-recursive" arrays <= 256 bytes
   44                        	;   x : array index already in the X register
   45                        	;   y : array index already in the Y register
   46                        	;
   47                        	; {value} OPTIONAL
   48                        	;   i : immediate value, i.e. a decimal number
   49                        	;   z : zero value
   50                        	;
   51                        	; {suffix} OPTIONAL
   52                        	;   q : quick, used for optimized math on only 8-bit values, because all math
   53                        	;       is normally promoted to "int" size in C; and when optimized stores do
   54                        	;       not need to preserve the primary register contents
   55                        	;
   56                        	; ***************************************************************************
   57                        	; ***************************************************************************
   58                        	
   59                        	
   60                        	
 8399                        	
 8400                        	; ***************************************************************************
 8401                        	; ***************************************************************************
 8402                        	; subroutines for logical and arithmetic shifts by a constant amount
 8403                        	; ***************************************************************************
 8404                        	; ***************************************************************************
 8405                        	
 8406                        	; **************
 8407                        	; Y:A = Y:A << const
 8408                        	
 8409    00:E1BE  0A         	aslw15:		asl	a
 8410    00:E1BF  0A         	aslw14:		asl	a
 8411    00:E1C0  0A         	aslw13:		asl	a
 8412    00:E1C1  0A         	aslw12:		asl	a
 8413    00:E1C2  0A         	aslw11:		asl	a
 8414    00:E1C3  0A         	aslw10:		asl	a
 8415    00:E1C4  0A         	aslw9:		asl	a
 8416    00:E1C5  A8         	aslw8:		tay
 8417    00:E1C6  62         			cla
 8418    00:E1C7  60         			rts
 8419                        	
 8420               0001     		.if	1
 8421    00:E1C8  66 00      	aslw5:		ror	<__temp
 8422    00:E1CA  6A         			ror	a
 8423    00:E1CB  66 00      	aslw6:		ror	<__temp
 8424    00:E1CD  6A         			ror	a
 8425    00:E1CE  66 00      	aslw7:		ror	<__temp
 8426    00:E1D0  6A         			ror	a
 8427    00:E1D1  A4 00      			ldy	<__temp
 8428    00:E1D3  60         			rts
 8429                        		.else
 8436                        		.endif
 8437    00:E1D4  0A         	aslw4:		asl	a
 8438    00:E1D5  26 00      			rol	<__temp
 8439    00:E1D7  0A         	aslw3:		asl	a
 8440    00:E1D8  26 00      			rol	<__temp
 8441    00:E1DA  0A         	aslw2:		asl	a
 8442    00:E1DB  26 00      			rol	<__temp
 8443    00:E1DD  0A         	aslw1:		asl	a
 8444    00:E1DE  26 00      			rol	<__temp
 8445    00:E1E0  A4 00      	aslw0:		ldy	<__temp
 8446    00:E1E2  60         			rts
 8447                        	
 8448                        	; **************
 8449                        	; Y:A = Y:A >> const
 8450                        	
 8451    00:E1E3  C9 80      	asrw15:		cmp	#$80
 8452    00:E1E5  6A         			ror	a
 8453    00:E1E6  C9 80      	asrw14:		cmp	#$80
 8454    00:E1E8  6A         			ror	a
 8455    00:E1E9  C9 80      	asrw13:		cmp	#$80
 8456    00:E1EB  6A         			ror	a
 8457    00:E1EC  C9 80      	asrw12:		cmp	#$80
 8458    00:E1EE  6A         			ror	a
 8459    00:E1EF  C9 80      	asrw11:		cmp	#$80
 8460    00:E1F1  6A         			ror	a
 8461    00:E1F2  C9 80      	asrw10:		cmp	#$80
 8462    00:E1F4  6A         			ror	a
 8463    00:E1F5  C9 80      	asrw9:		cmp	#$80
 8464    00:E1F7  6A         			ror	a
 8465    00:E1F8  C9 80      	asrw8:		cmp	#$80
 8466    00:E1FA  C2         			cly
 8467    00:E1FB  90 01      			bcc	!+
 8468    00:E1FD  88         			dey
 8469    00:E1FE  60         	!:		rts
 8470                        	
 8471    00:E1FF  C0 80      	asrw7:		cpy	#$80
 8472    00:E201  66 00      			ror	<__temp
 8473    00:E203  6A         			ror	a
 8474    00:E204  C0 80      	asrw6:		cpy	#$80
 8475    00:E206  66 00      			ror	<__temp
 8476    00:E208  6A         			ror	a
 8477    00:E209  C0 80      	asrw5:		cpy	#$80
 8478    00:E20B  66 00      			ror	<__temp
 8479    00:E20D  6A         			ror	a
 8480    00:E20E  C0 80      	asrw4:		cpy	#$80
 8481    00:E210  66 00      			ror	<__temp
 8482    00:E212  6A         			ror	a
 8483    00:E213  C0 80      	asrw3:		cpy	#$80
 8484    00:E215  66 00      			ror	<__temp
 8485    00:E217  6A         			ror	a
 8486    00:E218  C0 80      	asrw2:		cpy	#$80
 8487    00:E21A  66 00      			ror	<__temp
 8488    00:E21C  6A         			ror	a
 8489    00:E21D  C0 80      	asrw1:		cpy	#$80
 8490    00:E21F  66 00      			ror	<__temp
 8491    00:E221  6A         			ror	a
 8492    00:E222  A4 00      	asrw0:		ldy	<__temp
 8493    00:E224  60         			rts
 8494                        	
 8495                        	; **************
 8496                        	; Y:A = Y:A >> const
 8497                        	
 8498    00:E225  4A         	lsrw15:		lsr	a
 8499    00:E226  4A         	lsrw14:		lsr	a
 8500    00:E227  4A         	lsrw13:		lsr	a
 8501    00:E228  4A         	lsrw12:		lsr	a
 8502    00:E229  4A         	lsrw11:		lsr	a
 8503    00:E22A  4A         	lsrw10:		lsr	a
 8504    00:E22B  4A         	lsrw9:		lsr	a
 8505    00:E22C  C2         	lsrw8:		cly
 8506    00:E22D  60         			rts
 8507                        	
 8508    00:E22E  46 00      	lsrw7:		lsr	<__temp
 8509    00:E230  6A         			ror	a
 8510    00:E231  46 00      	lsrw6:		lsr	<__temp
 8511    00:E233  6A         			ror	a
 8512    00:E234  46 00      	lsrw5:		lsr	<__temp
 8513    00:E236  6A         			ror	a
 8514    00:E237  46 00      	lsrw4:		lsr	<__temp
 8515    00:E239  6A         			ror	a
 8516    00:E23A  46 00      	lsrw3:		lsr	<__temp
 8517    00:E23C  6A         			ror	a
 8518    00:E23D  46 00      	lsrw2:		lsr	<__temp
 8519    00:E23F  6A         			ror	a
 8520    00:E240  46 00      	lsrw1:		lsr	<__temp
 8521    00:E242  6A         			ror	a
 8522    00:E243  A4 00      	lsrw0:		ldy	<__temp
 8523    00:E245  60         			rts
 8524                        	
 8525                        	
 8526                        	
 8527                        	; ***************************************************************************
 8528                        	; ***************************************************************************
 8529                        	; subroutines for logical and arithmetic shifts by a variable amount
 8530                        	; ***************************************************************************
 8531                        	; ***************************************************************************
 8532                        	
 8533                        	; **************
 8534                        	; Y:A = Y:A << X
 8535                        	
 8536    00:E246  84 00      	asl.wx:		sty	<__temp
 8537    00:E248  E0 10      			cpx	#16
 8538    00:E24A  B0 37      			bcs	!zero+
 8539    00:E24C  CA         			dex
 8540    00:E24D  30 06      			bmi	.done
 8541    00:E24F  0A         	.loop:		asl	a
 8542    00:E250  26 00      			rol	<__temp
 8543    00:E252  CA         			dex
 8544    00:E253  10 FA      			bpl	.loop
 8545    00:E255  A4 00      	.done:		ldy	<__temp
 8546    00:E257  60         			rts
 8547                        	
 8548                        	; **************
 8549                        	; Y:A = Y:A >> X
 8550                        	
 8551    00:E258  84 00      	asr.wx:		sty	<__temp
 8552    00:E25A  10 17      			bpl	!positive+
 8553    00:E25C  E0 10      	!negative:	cpx	#16
 8554    00:E25E  B0 0D      			bcs	.sign
 8555    00:E260  CA         			dex
 8556    00:E261  30 07      			bmi	.done
 8557    00:E263  38         	.loop:		sec
 8558    00:E264  66 00      			ror	<__temp
 8559    00:E266  6A         			ror	a
 8560    00:E267  CA         			dex
 8561    00:E268  10 F9      			bpl	.loop
 8562    00:E26A  A4 00      	.done:		ldy	<__temp
 8563    00:E26C  60         			rts
 8564                        	
 8565    00:E26D  A9 FF      	.sign:		lda	#$FF
 8566    00:E26F  A8         			tay
 8567    00:E270  60         			rts
 8568                        	
 8569                        	; **************
 8570                        	; Y:A = Y:A >> X
 8571                        	
 8572    00:E271  84 00      	lsr.wx:		sty	<__temp
 8573    00:E273  E0 10      	!positive:	cpx	#16
 8574    00:E275  B0 0C      			bcs	!zero+
 8575    00:E277  CA         			dex
 8576    00:E278  30 06      			bmi	.done
 8577    00:E27A  46 00      	.loop:		lsr	<__temp
 8578    00:E27C  6A         			ror	a
 8579    00:E27D  CA         			dex
 8580    00:E27E  10 FA      			bpl	.loop
 8581    00:E280  A4 00      	.done:		ldy	<__temp
 8582    00:E282  60         			rts
 8583                        	
 8584    00:E283  62         	!zero:		cla
 8585    00:E284  C2         			cly
 8586    00:E285  60         			rts
 8587                        	
 8588                        	
 8589                        	
 8590                        	; ***************************************************************************
 8591                        	; ***************************************************************************
 8592                        	; POTENTIAL OPTIMIZATIONS, NOT YET ADDED
 8593                        	; ***************************************************************************
 8594                        	; ***************************************************************************
                             #[2]   "..\..\..\include\hucc\hucc.asm"
                             #[3]   "..\..\..\include\hucc\hucc-baselib.asm"
  227                        			include	"hucc-baselib.asm"	; HuCC base library macros.
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-baselib.asm
    5                        	;
    6                        	; Basic library functions provided (mostly) as macros.
    7                        	;
    8                        	; Copyright John Brandwood 2024-2025.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	
   17                        	
   18                        	
   19                        	; ***************************************************************************
   20                        	; ***************************************************************************
   21                        	;
   22                        	; Make certain System Card variables accessible to HuCC.
   23                        	
   24    00:E286             	_irq_cnt	.alias	irq_cnt
   25    00:E286             	_joynow		.alias	joynow
   26    00:E286             	_joytrg		.alias	joytrg
   27    00:E286             	_joy6now	.alias	joy6now
   28    00:E286             	_joy6trg	.alias	joy6trg
   29    00:E286             	_bg_x1		.alias	bg_x1
   30    00:E286             	_bg_y1		.alias	bg_y1
   31    00:E286             	_bg_x2		.alias	bg_x2
   32    00:E286             	_bg_y2		.alias	bg_y2
   33                        	
   34                        	
   35                        	
   36                        	; ***************************************************************************
   37                        	; ***************************************************************************
   38                        	;
   39                        	; void __fastcall dump_screen( void );
   40                        	;
   41                        	; THIS IS AN ILLEGAL INSTRUCTION ONLY IMPLEMENTED BY THE TGEMU EMULATOR!
   42                        	
   43    00:E286  33         	_dump_screen:	db	0x33
   44                        	
   45                        	
   46                        	
   47                        	; ***************************************************************************
   48                        	; ***************************************************************************
   49                        	;
   50                        	; void __fastcall abort( void );
   51                        	;
   52                        	; THIS IS AN ILLEGAL INSTRUCTION ONLY IMPLEMENTED BY THE TGEMU EMULATOR!
   53                        	
   54    00:E287  E2         	_abort:		db	0xE2
   55                        	
   56                        	
   57                        	
   58                        	; ***************************************************************************
   59                        	; ***************************************************************************
   60                        	;
   61                        	; void __fastcall exit( int value<acc> );
   62                        	;
   63                        	; THIS IS AN ILLEGAL INSTRUCTION ONLY IMPLEMENTED BY THE TGEMU EMULATOR!
   64                        	
   65    00:E288  AA         	_exit.1:	tax				; Put the return code into X.
   66    00:E289  63         			db	0x63
   67                        	
   68    00:E28A  80 FE      	.hang:		bra	.hang			; Hang if used in normal code.
   69                        	
   70                        	
   71                        	
   72                        	; ***************************************************************************
   73                        	; ***************************************************************************
   74                        	;
   75                        	; unsigned char __fastcall __macro cd_execoverlay( unsigned char ovl_index<acc> );
   76                        	;
   77                        	; Execute program overlay from disc
   78                        	;
   79                        	; N.B. This does not return, even if there's an error.
   80                        	
   81                        			.macro	_cd_execoverlay.1
   82                        			tax
   83                        			jmp	exec_overlay
   84                        			.endm
   85                        	
   86                        	
   87                        	
   88                        	; ***************************************************************************
   89                        	; ***************************************************************************
   90                        	;
   91                        	; void __fastcall __nop set_far_base( unsigned char data_bank<_bp_bank>, unsigned char *data_addr<_bp> );
   92                        	; void __fastcall set_far_offset( unsigned int offset<_bp>, unsigned char data_bank<_bp_bank>, unsigned char *data_addr<acc> );
   93                        	
   94    00:E28C             	_set_far_offset.3:
   95    00:E28C  18         			clc
   96    00:E28D  65 EC      			adc.l	<_bp
   97    00:E28F  85 EC      			sta.l	<_bp
   98    00:E291  98         			tya
   99    00:E292  29 1F      			and	#$1F
  100    00:E294  65 ED      			adc.h	<_bp
  101    00:E296  A8         			tay
  102    00:E297  29 1F      			and	#$1F
  103    00:E299  09 60      			ora	#$60
  104    00:E29B  85 ED      			sta.h	<_bp
  105    00:E29D  98         			tya
  106    00:E29E  6A         			ror	a
  107    00:E29F  4A         			lsr	a
  108    00:E2A0  4A         			lsr	a
  109    00:E2A1  4A         			lsr	a
  110    00:E2A2  4A         			lsr	a
  111    00:E2A3  18         			clc
  112    00:E2A4  65 02      			adc	<_bp_bank
  113    00:E2A6  85 02      			sta	<_bp_bank
  114    00:E2A8  60         			rts
  115                        	
  116                        	
  117                        	; ***************************************************************************
  118                        	; ***************************************************************************
  119                        	;
  120                        	; void __fastcall __macro reset_mpr2( void );
  121                        	; void __fastcall __macro reset_mpr34( void );
  122                        	;
  123                        	; void * __fastcall __macro set_mpr2( void __far *addr<_bp_bank:_bp> );
  124                        	; void * __fastcall __macro set_mpr34( void __far *addr<_bp_bank:_bp> );
  125                        	;
  126                        	; void * __fastcall __macro far_set_mpr2( void );
  127                        	; void * __fastcall __macro far_set_mpr34( void );
  128                        	
  129                        	_reset_mpr2	.macro
  130                        		.if	SUPPORT_SGX
  131                        			lda	#$F9
  132                        		.else
  133                        			lda	#$87
  134                        		.endif
  135                        			tam2
  136                        			.endm
  137                        	
  138                        	_reset_mpr34	.macro
  139                        			lda	#CONST_BANK + _bank_base
  140                        			tam3
  141                        			inc	a
  142                        			tam4
  143                        			.endm
  144                        	
  145                        	_farset_mpr2.1	.macro
  146                        			lda	<_bp_bank
  147                        			tam2
  148                        			lda.l	<_bp
  149                        			ldy.h	<_bp
  150                        			.endm
  151                        	
  152                        	_farset_mpr34.1	.macro
  153                        			lda	<_bp_bank
  154                        			tam3
  155                        			inc	a
  156                        			tam4
  157                        			lda.l	<_bp
  158                        			ldy.h	<_bp
  159                        			.endm
  160                        	
  161                        	_far_set_mpr2	.macro
  162                        			lda	<_bp_bank
  163                        			tam2
  164                        			lda.l	<_bp
  165                        			ldy.h	<_bp
  166                        			.endm
  167                        	
  168                        	_far_set_mpr34	.macro
  169                        			lda	<_bp_bank
  170                        			tam3
  171                        			inc	a
  172                        			tam4
  173                        			lda.l	<_bp
  174                        			ldy.h	<_bp
  175                        			.endm
  176                        	
  177                        	
  178                        	
  179                        	; ***************************************************************************
  180                        	; ***************************************************************************
  181                        	;
  182                        	; unsigned char __fastcall __macro ac_exists( void );
  183                        	
  184                        	_ac_exists	.macro
  185                        			cla
  186                        			ldy	ACD_FLAG
  187                        			cpy	#ACD_ID
  188                        			bne	!+
  189                        			inc	a
  190                        	!:		cly
  191                        			.endm
  192                        	
  193                        	
  194                        	
  195                        	; ***************************************************************************
  196                        	; ***************************************************************************
  197                        	;
  198                        	; unsigned char __fastcall __macro _sgx_detect( void );
  199                        	
  200                        	_sgx_detect	.macro
  201                        			lda	sgx_detected
  202                        			cly
  203                        			.endm
  204                        	
  205                        	
  206                        	
  207                        	; ***************************************************************************
  208                        	; ***************************************************************************
  209                        	;
  210                        	; unsigned int __fastcall __macro peek( unsigned int addr<__ptr> );
  211                        	
  212                        	_peek.1		.macro
  213                        			lda	[__ptr]
  214                        			cly
  215                        			.endm
  216                        	
  217                        	
  218                        	
  219                        	; ***************************************************************************
  220                        	; ***************************************************************************
  221                        	;
  222                        	; unsigned int __fastcall __macro peekw( unsigned int addr<__ptr> );
  223                        	
  224                        	_peekw.1	.macro
  225                        			lda	[__ptr]
  226                        			pha
  227                        			ldy	#1
  228                        			lda	[__ptr], y
  229                        			tay
  230                        			pla
  231                        			.endm
  232                        	
  233                        	
  234                        	
  235                        	; ***************************************************************************
  236                        	; ***************************************************************************
  237                        	;
  238                        	; void __fastcall __macro poke( unsigned int addr<__poke>, unsigned char with<acc> );
  239                        	;
  240                        	; N.B. Because the <acc> value can be a complex C calculation, it isn't safe
  241                        	; to use __ptr as the destination, which can be overwritten in C macros.
  242                        	
  243                        	_poke.2		.macro
  244                        			sta	[__poke]
  245                        			.endm
  246                        	
  247                        	
  248                        	
  249                        	; ***************************************************************************
  250                        	; ***************************************************************************
  251                        	;
  252                        	; void __fastcall __macro pokew( unsigned int addr<__poke>, unsigned int with<acc> );
  253                        	;
  254                        	; N.B. Because the <acc> value can be a complex C calculation, it isn't safe
  255                        	; to use __ptr as the destination, which can be overwritten in C macros.
  256                        	
  257                        	_pokew.2	.macro
  258                        			sta	[__poke]
  259                        			tya
  260                        			ldy	#1
  261                        			sta	[__poke], y
  262                        			.endm
  263                        	
  264                        	
  265                        	
  266                        	; ***************************************************************************
  267                        	; ***************************************************************************
  268                        	;
  269                        	; unsigned char __fastcall __macro clock_hh( void );
  270                        	
  271                        	_clock_hh	.macro
  272                        			lda	clock_hh
  273                        			cly
  274                        			.endm
  275                        	
  276                        	
  277                        	
  278                        	; ***************************************************************************
  279                        	; ***************************************************************************
  280                        	;
  281                        	; unsigned char __fastcall __macro clock_mm( void );
  282                        	
  283                        	_clock_mm	.macro
  284                        			lda	clock_mm
  285                        			cly
  286                        			.endm
  287                        	
  288                        	
  289                        	
  290                        	; ***************************************************************************
  291                        	; ***************************************************************************
  292                        	;
  293                        	; unsigned char __fastcall __macro clock_ss( void );
  294                        	
  295                        	_clock_ss	.macro
  296                        			lda	clock_ss
  297                        			cly
  298                        			.endm
  299                        	
  300                        	
  301                        	
  302                        	; ***************************************************************************
  303                        	; ***************************************************************************
  304                        	;
  305                        	; unsigned char __fastcall __macro clock_tt( void );
  306                        	
  307                        	_clock_tt	.macro
  308                        			lda	clock_tt
  309                        			cly
  310                        			.endm
  311                        	
  312                        	
  313                        	
  314                        	; ***************************************************************************
  315                        	; ***************************************************************************
  316                        	;
  317                        	; void __fastcall __macro clock_reset( void );
  318                        	
  319                        	_clock_reset	.macro
  320                        			stz	clock_hh
  321                        			stz	clock_mm
  322                        			stz	clock_ss
  323                        			stz	clock_tt
  324                        			.endm
  325                        	
  326                        	
  327                        	
  328                        	; ***************************************************************************
  329                        	; ***************************************************************************
  330                        	;
  331                        	; unsigned int __fastcall __macro joy( unsigned char which<acc> );
  332                        	
  333                        	_joy.1		.macro
  334                        			tax
  335                        			lda	joynow, x
  336                        		.if	SUPPORT_6BUTTON
  337                        			ldy	joy6now, x
  338                        		.else
  339                        			cly
  340                        		.endif
  341                        			.endm
  342                        	
  343                        	
  344                        	
  345                        	; ***************************************************************************
  346                        	; ***************************************************************************
  347                        	;
  348                        	; unsigned int __fastcall __macro joytrg( unsigned char which<acc> );
  349                        	
  350                        	_joytrg.1	.macro
  351                        			tax
  352                        			lda	joytrg, x
  353                        		.if	SUPPORT_6BUTTON
  354                        			ldy	joy6trg, x
  355                        		.else
  356                        			cly
  357                        		.endif
  358                        			.endm
  359                        	
  360                        	
  361                        	
  362                        	; ***************************************************************************
  363                        	; ***************************************************************************
  364                        	;
  365                        	; unsigned int __fastcall __macro joybuf( unsigned char which<acc> );
  366                        	
  367                        	_joybuf.1	.macro
  368                        		.if	HUC_JOY_EVENTS
  369                        			tax
  370                        			lda	joybuf, x
  371                        		.if	SUPPORT_6BUTTON
  372                        			ldy	joy6buf, x
  373                        		.else
  374                        			cly
  375                        		.endif
  376                        		.else
  377                        			.fail	You must enable HUC_JOY_EVENTS in your hucc-config.inc!
  378                        		.endif
  379                        			.endm
  380                        	
  381                        	
  382                        	
  383                        	; ***************************************************************************
  384                        	; ***************************************************************************
  385                        	;
  386                        	; unsigned int __fastcall __macro get_joy_events( unsigned char which<acc> );
  387                        	;
  388                        	; N.B. This is just a version of joybuf() that clears the accumulated events.
  389                        	
  390                        			.macro	_get_joy_events.1
  391                        		.if	HUC_JOY_EVENTS
  392                        			tax
  393                        			lda	joybuf, x
  394                        			stz	joybuf, x
  395                        		.if	SUPPORT_6BUTTON
  396                        			ldy	joy6buf, x
  397                        			stz	joy6buf, x
  398                        		.else
  399                        			cly
  400                        		.endif
  401                        		.else
  402                        		.if	ACCUMULATE_JOY
  403                        			tax
  404                        			lda	joytrg, x
  405                        			stz	joytrg, x
  406                        		.if	SUPPORT_6BUTTON
  407                        			ldy	joy6trg, x
  408                        			stz	joy6trg, x
  409                        		.else
  410                        			cly
  411                        		.endif
  412                        		.else
  413                        			.fail	You must enable HUC_JOY_EVENTS or ACCUMULATE_JOY in your hucc-config.inc!
  414                        		.endif
  415                        		.endif
  416                        			.endm
  417                        	
  418                        	
  419                        	
  420                        	; ***************************************************************************
  421                        	; ***************************************************************************
  422                        	;
  423                        	; void __fastcall __macro clear_joy_events( unsigned char mask<acc> );
  424                        	
  425                        			.macro	_clear_joy_events.1
  426                        			php
  427                        			sei
  428                        			and	#(1 << MAX_PADS) - 1
  429                        			ldx	#$FF
  430                        	.loop:		inx
  431                        			lsr	a
  432                        			bcc	.next
  433                        		.if	HUC_JOY_EVENTS
  434                        			stz	joybuf, x
  435                        		.if	SUPPORT_6BUTTON
  436                        			stz	joy6buf, x
  437                        		.endif
  438                        		.else
  439                        		.if	ACCUMULATE_JOY
  440                        			stz	joytrg, x
  441                        		.if	SUPPORT_6BUTTON
  442                        			stz	joy6trg, x
  443                        		.endif
  444                        		.else
  445                        			.fail	You must enable HUC_JOY_EVENTS or ACCUMULATE_JOY in your hucc-config.inc!
  446                        		.endif
  447                        		.endif
  448                        	.next:		bne	.loop
  449                        			plp
  450                        			.endm
  451                        	
  452                        	
  453                        	
  454                        	; ***************************************************************************
  455                        	; ***************************************************************************
  456                        	;
  457                        	; void __fastcall srand( unsigned char seed<acc> );
  458                        	
  459               0001     		.ifndef	HUCC_NO_DEFAULT_RANDOM
  460                        	_srand.1	.macro
  461                        			tay
  462                        			jsr	init_random
  463                        			.endm
  464                        		.endif
  465                        	
  466                        	
  467                        	
  468                        	; ***************************************************************************
  469                        	; ***************************************************************************
  470                        	;
  471                        	; unsigned int __fastcall rand( void );
  472                        	; unsigned char __fastcall rand8( void );
  473                        	
  474               0001     		.ifndef	HUCC_NO_DEFAULT_RANDOM
  475    00:E2A9  20 C3 E5   	_rand:		jsr	get_random		; Random in A, preserve Y.
  476    00:E2AC  A8         			tay
  477    00:E2AD  4C C3 E5   			jmp	get_random		; Random in A, preserve Y.
  478                        		.endif
  479                        	
  480                        	
  481                        	
  482                        	; ***************************************************************************
  483                        	; ***************************************************************************
  484                        	;
  485                        	; unsigned char __fastcall random8( unsigned char limit<acc> );
  486                        	;
  487                        	; IN :	A = range (0..255)
  488                        	; OUT : A = random number interval 0 <= x < A
  489                        	
  490               0001     		.ifndef	HUCC_NO_DEFAULT_RANDOM
  491                        	
  492    00:E2B0  A8         	_random8.1:	tay				; Preserve the limit.
  493    00:E2B1  20 C3 E5   			jsr	get_random		; Random in A, preserve Y.
  494                        	
  495    00:E2B4  20 F0 E4   			jsr	__muluchar
  496    00:E2B7  98         			tya				; Do a 8.0 x 0.8 fixed point
  497    00:E2B8  C2         			cly				; fractional multiply.
  498    00:E2B9  60         			rts
  499                        		.endif
  500                        	
  501                        	
  502                        	
  503                        	; ***************************************************************************
  504                        	; ***************************************************************************
  505                        	;
  506                        	; unsigned char __fastcall random( unsigned char limit<acc> );
  507                        	;
  508                        	; IN :	A = range (0..128), 129..255 is treated as 128
  509                        	; OUT : A = random number interval 0 <= x < A
  510                        	
  511               0001     		.ifndef	HUCC_NO_DEFAULT_RANDOM
  512                        	
  513    00:E2BA  A8         	_random.1:	tay				; Preserve the limit.
  514    00:E2BB  20 C3 E5   			jsr	get_random		; Random in A, preserve Y.
  515                        	
  516    00:E2BE  C0 80      			cpy	#128			; Check the limit.
  517    00:E2C0  90 04      			bcc	!+
  518                        	
  519    00:E2C2  29 7F      			and	#$7F			; Just mask the random if
  520    00:E2C4  C2         			cly				; the limit is >= 128.
  521    00:E2C5  60         			rts
  522                        	
  523    00:E2C6  20 F0 E4   	!:		jsr	__muluchar
  524    00:E2C9  98         			tya				; If the limit is < 128 then
  525    00:E2CA  C2         			cly				; do a 8.0 x 0.8 fixed point
  526    00:E2CB  60         			rts				; fractional multiply.
  527                        		.endif
  528                        	
  529                        	
  530                        	
  531                        	; ***************************************************************************
  532                        	; ***************************************************************************
  533                        	;
  534                        	; unsigned char __fastcall __builtin_ffs( unsigned int value<__temp> );
  535                        	
  536                        			.proc	___builtin_ffs.1
  556                        			.endp
  557                        	
  558                        	
  559                        	
  560                        	; ***************************************************************************
  561                        	; ***************************************************************************
  562                        	;
  563                        	; N.B. Declared in hucc-string.h, but defined here because they're macros!
  564                        	;
  565                        	; int __fastcall __macro memcmp( unsigned char *destination<_di>, unsigned char *source<_bp>, unsigned int count<acc> );
  566                        	
  567                        	_memcmp.3	.macro
  568                        			stz	<_bp_bank		; Map the source string.
  569                        			call	_farmemcmp.3
  570                        			.endm
  571                        	
  572                        	
  573                        	
  574                        	; ***************************************************************************
  575                        	; ***************************************************************************
  576                        	;
  577                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  578                        	;
  579                        	; void __fastcall __macro get_color( unsigned int index<VCE_CTA> );
  580                        	
  581                        	_get_color.1	.macro
  582                        			lda.l	VCE_CTR
  583                        			ldy.h	VCE_CTR
  584                        			.endm
  585                        	
  586                        	
  587                        	
  588                        	; ***************************************************************************
  589                        	; ***************************************************************************
  590                        	;
  591                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  592                        	;
  593                        	; void __fastcall __macro fade_to_black( unsigned int __far *from<_bp_bank:_bp>, unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_sub<_ah> );
  594                        	; void __fastcall __macro fade_to_white( unsigned int __far *from<_bp_bank:_bp>, unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_add<_ah> );
  595                        	; void __fastcall __macro cross_fade_to( unsigned int __far *from<_bp_bank:_bp>, unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char which_component<_ah );
  596                        	;
  597                        	; void __fastcall __macro far_fade_to_black( unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_sub<_ah> );
  598                        	; void __fastcall __macro far_fade_to_white( unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_add<_ah> );
  599                        	; void __fastcall __macro far_cross_fade_to( unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char which_component<_ah );
  600                        	
  601                        			.macro	_fade_to_black.4
  602                        			ldy	<_bp_bank
  603                        			call	fade_to_black
  604                        			.endm
  605                        	
  606                        			.macro	_fade_to_white.4
  607                        			ldy	<_bp_bank
  608                        			call	fade_to_white
  609                        			.endm
  610                        	
  611                        			.macro	_cross_fade_to.4
  612                        			ldy	<_bp_bank
  613                        			call	cross_fade_to
  614                        			.endm
  615                        	
  616                        			.macro	_far_fade_to_black.3
  617                        			ldy	<_bp_bank
  618                        			call	fade_to_black
  619                        			.endm
  620                        	
  621                        			.macro	_far_fade_to_white.3
  622                        			ldy	<_bp_bank
  623                        			call	fade_to_white
  624                        			.endm
  625                        	
  626                        			.macro	_far_cross_fade_to.3
  627                        			ldy	<_bp_bank
  628                        			call	cross_fade_to
  629                        			.endm
  630                        	
  631                        	
  632                        	
  633                        	; ***************************************************************************
  634                        	; ***************************************************************************
  635                        	;
  636                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  637                        	;
  638                        	; void __fastcall __macro set_xres( unsigned int x_pixels<_ax> );
  639                        	; void __fastcall __macro sgx_set_xres( unsigned int x_pixels<_ax> );
  640                        	;
  641                        	; void __fastcall set_xres( unsigned int x_pixels<_ax>, unsigned char blur_flag<_bl> );
  642                        	; void __fastcall sgx_set_xres( unsigned int x_pixels<_ax>, unsigned char blur_flag<_bl> );
  643                        	
  644                        	_set_xres.1	.macro
  645                        			lda	#XRES_SOFT
  646                        			sta	<_bl
  647                        			call	_set_xres.2
  648                        			.endm
  649                        	
  650               0001     		.if	SUPPORT_SGX
  651                        			.macro	_sgx_set_xres.1
  652                        			lda	#XRES_SOFT
  653                        			sta	<_bl
  654                        			call	_sgx_set_xres.2
  655                        			.endm
  656                        		.endif
  657                        	
  658                        	
  659                        	
  660                        	; ***************************************************************************
  661                        	; ***************************************************************************
  662                        	;
  663                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  664                        	;
  665                        	; unsigned int __fastcall __macro vram_addr( unsigned char bat_x<_al>, unsigned char bat_y<_ah> );
  666                        	; unsigned int __fastcall __macro sgx_vram_addr( unsigned char bat_x<_al>, unsigned char bat_y<_ah> );
  667                        	
  668                        			.macro	_vram_addr.2
  669                        			cla
  670                        			bit	vdc_bat_width
  671                        			bmi	!w128+
  672                        			bvs	!w64+
  673                        	!w32:		lsr	<_ah
  674                        			ror	a
  675                        	!w64:		lsr	<_ah
  676                        			ror	a
  677                        	!w128:		lsr	<_ah
  678                        			ror	a
  679                        			ora	<_al
  680                        			ldy	<_ah
  681                        			.endm
  682                        	
  683               0001     		.if	SUPPORT_SGX
  684                        			.macro	_sgx_vram_addr.2
  685                        			cla
  686                        			bit	sgx_bat_width
  687                        			bmi	!w128+
  688                        			bvs	!w64+
  689                        	!w32:		lsr	<_ah
  690                        			ror	a
  691                        	!w64:		lsr	<_ah
  692                        			ror	a
  693                        	!w128:		lsr	<_ah
  694                        			ror	a
  695                        			ora	<_al
  696                        			ldy	<_ah
  697                        			.endm
  698                        		.endif
  699                        	
  700                        	
  701                        	
  702                        	; ***************************************************************************
  703                        	; ***************************************************************************
  704                        	;
  705                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  706                        	;
  707                        	; unsigned int __fastcall __macro get_vram( unsigned int address<_di> );
  708                        	; void __fastcall __macro put_vram( unsigned int address<_di>, unsigned int data<acc> );
  709                        	;
  710                        	; unsigned int __fastcall __macro sgx_get_vram( unsigned int address<_di> );
  711                        	; void __fastcall __macro sgx_put_vram( unsigned int address<_di>, unsigned int data<acc> );
  712                        	
  713                        			.macro	_get_vram.1
  714                        			jsr	vdc_di_to_marr
  715                        			lda	VDC_DL
  716                        			ldy	VDC_DH
  717                        			.endm
  718                        	
  719                        			.macro	_put_vram.2
  720                        			pha
  721                        			jsr	vdc_di_to_mawr
  722                        			pla
  723                        			sta	VDC_DL
  724                        			sty	VDC_DH
  725                        			.endm
  726                        	
  727               0001     		.if	SUPPORT_SGX
  728                        			.macro	_sgx_get_vram.1
  729                        			jsr	sgx_di_to_marr
  730                        			lda	SGX_DL
  731                        			ldy	SGX_DH
  732                        			.endm
  733                        	
  734                        			.macro	_sgx_put_vram.2
  735                        			pha
  736                        			jsr	sgx_di_to_mawr
  737                        			pla
  738                        			sta	SGX_DL
  739                        			sty	SGX_DH
  740                        			.endm
  741                        		.endif
  742                        	
  743                        	
  744                        	
  745                        	; ***************************************************************************
  746                        	; ***************************************************************************
  747                        	;
  748                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  749                        	;
  750                        	; void __fastcall __macro set_bgpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp> );
  751                        	; void __fastcall __macro set_bgpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_palettes<_ah> );
  752                        	; void __fastcall __macro set_sprpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp> );
  753                        	; void __fastcall __macro set_sprpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_palettes<_ah> );
  754                        	
  755                        	_set_bgpal.2	.macro
  756                        			lda	#1
  757                        			sta	<_ah
  758                        			call	_load_palette.3
  759                        			.endm
  760                        	
  761                        	_set_bgpal.3	.macro
  762                        			call	_load_palette.3
  763                        			.endm
  764                        	
  765                        	_set_sprpal.2	.macro
  766                        			lda	#1
  767                        			sta	<_ah
  768                        			smb4	<_al
  769                        			call	_load_palette.3
  770                        			.endm
  771                        	
  772                        	_set_sprpal.3	.macro
  773                        			smb4	<_al
  774                        			call	_load_palette.3
  775                        			.endm
  776                        	
  777                        	
  778                        	
  779                        	; ***************************************************************************
  780                        	; ***************************************************************************
  781                        	;
  782                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  783                        	;
  784                        	; void __fastcall __macro load_vram( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_words<_ax> );
  785                        	; void __fastcall __macro sgx_load_vram( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_words<_ax> );
  786                        	;
  787                        	; void __fastcall __macro far_load_vram( unsigned int vram<_di>, unsigned int num_words<_ax> );
  788                        	; void __fastcall __macro sgx_far_load_vram( unsigned int vram<_di>, unsigned int num_words<_ax> );
  789                        	;
  790                        	
  791               0001     		.if	SUPPORT_SGX
  792                        			.macro	_sgx_load_vram.3
  793                        			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  794                        			call	load_vram_x
  795                        			.endm
  796                        	
  797                        			.macro	_sgx_far_load_vram.2
  798                        			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  799                        			call	load_vram_x
  800                        			.endm
  801                        		.endif
  802                        	
  803                        			.macro	_load_vram.3
  804                        			clx				; Offset to PCE VDC.
  805                        			call	load_vram_x
  806                        			.endm
  807                        	
  808                        			.macro	_far_load_vram.2
  809                        			clx				; Offset to PCE VDC.
  810                        			call	load_vram_x
  811                        			.endm
  812                        	
  813                        	
  814                        	
  815                        	; ***************************************************************************
  816                        	; ***************************************************************************
  817                        	;
  818                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  819                        	;
  820                        	; void __fastcall __macro load_sprites( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_groups<acc> );
  821                        	; void __fastcall __macro sgx_load_sprites( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_groups<acc> );
  822                        	; void __fastcall __macro far_load_sprites( unsigned int vram<_di>, unsigned int num_groups<acc> );
  823                        	; void __fastcall __macro sgx_far_load_sprites( unsigned int vram<_di>, unsigned int num_groups<acc> );
  824                        	
  825               0001     		.if	SUPPORT_SGX
  826                        			.macro	_sgx_load_sprites.3
  827                        			stz.l	<_ax
  828                        			asl	a
  829                        			sta.h	<_ax
  830                        			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  831                        			call	load_vram_x
  832                        			.endm
  833                        	
  834                        			.macro	_sgx_far_load_sprites.2
  835                        			stz.l	<_ax
  836                        			asl	a
  837                        			sta.h	<_ax
  838                        			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  839                        			call	load_vram_x
  840                        			.endm
  841                        		.endif
  842                        	
  843                        			.macro	_load_sprites.3
  844                        			stz.l	<_ax
  845                        			asl	a
  846                        			sta.h	<_ax
  847                        			clx				; Offset to PCE VDC.
  848                        			call	load_vram_x
  849                        			.endm
  850                        	
  851                        			.macro	_far_load_sprites.2
  852                        			stz.l	<_ax
  853                        			asl	a
  854                        			sta.h	<_ax
  855                        			clx				; Offset to PCE VDC.
  856                        			call	load_vram_x
  857                        			.endm
  858                        	
  859                        	
  860                        	
  861                        	; ***************************************************************************
  862                        	; ***************************************************************************
  863                        	;
  864                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  865                        	;
  866                        	; void __fastcall load_default_font( void );
  867                        	; void __fastcall sgx_load_default_font( void );
  868                        	;
  869                        	
  870               0001     		.if	SUPPORT_SGX
  871                        			.macro	_sgx_load_default_font
  872                        			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  873                        			call	huc_monofont_x
  874                        			.endm
  875                        		.endif
  876                        	
  877                        			.macro	_load_default_font
  878                        			clx				; Offset to PCE VDC.
  879                        			call	huc_monofont_x
  880                        			.endm
  881                        	
  882                        	
  883                        	
  884                        	; ***************************************************************************
  885                        	; ***************************************************************************
  886                        	
  887               0000     		.if	0
  905                        		.endif
                             #[2]   "..\..\..\include\hucc\hucc.asm"
  228                        	
  229               0000     		.if	CDROM
  231                        		.endif
  232                        	
  233                        			; Definitions for compatibility with old HuC/MagicKit projects.
  234                        	
  235               0001     		.ifndef	HUCC_NO_DEPRECATED
                             #[3]   "..\..\..\include\hucc\hucc-deprecated.inc"
  236                        			include	"hucc-deprecated.inc"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-deprecated.inc
    5                        	;
    6                        	; Macros and definitions for compatibility with old HuC/MagicKit projects.
    7                        	;
    8                        	; Based on the original HuC and MagicKit definitions by David Michel and the
    9                        	; other original HuC developers.
   10                        	;
   11                        	; ***************************************************************************
   12                        	; ***************************************************************************
   13                        	
   14                        			; For compatibility with HuC projects that use the old name.
   15                        	
   16               0001     	HUC_USER_RESERVED = HUC_USER_BANK
   17                        	
   18                        			; For compatibility with code that expects the HuC naming that
   19                        			; is used in the newer HuC, rather than the original HuC v3.21.
   20                        			;
   21                        			; Code generated by HuCC uses the original single-underscore.
   22                        	
   23               0001     		.if	1				
   24               0002     	__bp		=	$F8:20EC, 2		; base pointer
   25               0002     	__si		=	$F8:20EE, 2		; source address
   26               0002     	__di		=	$F8:20F0, 2		; destination address
   27                        	
   28               0002     	__ax		=	$F8:20F8, 2
   29               0001     	__al		=	$F8:20F8, 1
   30               0001     	__ah		=	$F8:20F9, 1
   31                        	
   32               0002     	__bx		=	$F8:20FA, 2
   33               0001     	__bl		=	$F8:20FA, 1
   34               0001     	__bh		=	$F8:20FB, 1
   35                        	
   36               0002     	__cx		=	$F8:20FC, 2
   37               0001     	__cl		=	$F8:20FC, 1
   38               0001     	__ch		=	$F8:20FD, 1
   39                        	
   40               0002     	__dx		=	$F8:20FE, 2
   41               0001     	__dl		=	$F8:20FE, 1
   42               0001     	__dh		=	$F8:20FF, 1
   43                        		.endif
   44                        	
   45                        			; For compatibility with code that expects the HuC naming that
   46                        			; is used rather than the shorter upper-case #define naming.
   47                        	
   48               0001     		.if	1				
   49               0001     	video_reg	=	$FF:0200, 1		; Address/Status Register
   50               0001     	video_reg_l	=	$FF:0200, 1		; Address/Status Register
   51               0001     	video_reg_h	=	$FF:0201, 1		; Address/Status Register
   52               0002     	video_data	=	$FF:0202, 2		; Data (Read/Write) Low
   53               0001     	video_data_l	=	$FF:0202, 1		; Data (Read/Write) Low
   54               0001     	video_data_h	=	$FF:0203, 1		; Data (Read/Write) High
   55                        	
   56               0002     	color_ctrl	=	$FF:0400, 2		; Control Register
   57               0002     	color_reg	=	$FF:0402, 2		; Color Table Address
   58               0001     	color_reg_l	=	$FF:0402, 1		; Color Table Address
   59               0001     	color_reg_h	=	$FF:0402, 1		; Color Table Address
   60               0002     	color_data	=	$FF:0404, 2		; Color Table Data Read/Write
   61               0001     	color_data_l	=	$FF:0404, 1		; Color Table Data Read/Write
   62               0001     	color_data_h	=	$FF:0405, 1		; Color Table Data Read/Write
   63                        	
   64               0001     	psg_ch		=	$FF:0800, 1		; Channel Select
   65               0001     	psg_mainvol	=	$FF:0801, 1		; Main Amplitude Level
   66               0001     	psg_freqlo	=	$FF:0802, 1		; Frequency Low
   67               0001     	psg_freqhi	=	$FF:0803, 1		; Frequency High
   68               0001     	psg_ctrl	=	$FF:0804, 1		; Control & Channel Amplitude
   69               0001     	psg_pan		=	$FF:0805, 1		; L/R Amplitude Level
   70               0001     	psg_wavebuf	=	$FF:0806, 1		; Waveform
   71               0001     	psg_noise	=	$FF:0807, 1		; Noise
   72               0001     	psg_lfofreq	=	$FF:0808, 1		; LFO Frequency
   73               0001     	psg_lfoctrl	=	$FF:0809, 1		; LFO Control
   74                        	
   75               0001     	irq_m		=	irq_vec, 1		; Old System Card name.
   76               0002     	irq2_jmp	=	irq2_hook, 2		; Old System Card name.
   77               0002     	irq1_jmp	=	irq1_hook, 2		; Old System Card name.
   78               0002     	timer_jmp	=	timer_hook, 2		; Old System Card name.
   79               0002     	nmi_jmp		=	nmi_hook, 2		; Old System Card name.
   80               0002     	sat_adr		=	satb_addr, 2		; Old System Card name.
   81               0005     	joy		=	joynow, 5		; Old System Card name.
   82               0001     	mwr_m		=	vdc_mwr, 1		; Old System Card name.
   83               0001     	dcr_m		=	vdc_dcr, 1		; Old System Card name.
   84                        		.endif
   85                        	
   86                        			; Macros for compatibility with #asm usage in old HuC projects.
   87                        	
   88                        	stw		.macro
   89                        			lda.l	\1
   90                        			sta.l	\2
   91                        			lda.h	\1
   92                        			sta.h	\2
   93                        			.endm
   94                        	
   95                        	stb		.macro
   96                        			lda	\1
   97                        			sta	\2
   98                        			.endm
   99                        	
  100                        	addw		.macro
  101                        		.if	(\# = 3)
  102                        			clc
  103                        			lda.l	\2
  104                        			adc.l	\1
  105                        			sta.l	\3
  106                        			lda.h	\2
  107                        			adc.h	\1
  108                        			sta.h	\3
  109                        		.else
  110                        			clc
  111                        			lda.l	\2
  112                        			adc.l	\1
  113                        			sta.l	\2
  114                        			lda.h	\2
  115                        			adc.h	\1
  116                        			sta.h	\2
  117                        		.endif
  118                        			.endm
  119                        	
  120                        	add		.macro			; add byte-sized value to
  121                        		.if (\# = 2)			; register A (handle carry
  122                        			lda	\2		; flag)
  123                        			clc
  124                        			adc	\1
  125                        			sta	\2
  126                        		.else
  127                        			clc
  128                        			adc	\1
  129                        		.endif
  130                        			.endm
  131                        	
  132                        	subw		.macro
  133                        			sec
  134                        			lda.l	\2
  135                        			sbc.l	\1
  136                        			sta.l	\2
  137                        			lda.h	\2
  138                        			sbc.h	\1
  139                        			sta.h	\2
  140                        			.endm
  141                        	
  142                        	sub		.macro			; subtract byte-sized value
  143                        		.if (\# = 2)			; from register A (handle
  144                        			lda	\2		; carry flag)
  145                        			sec
  146                        			sbc	\1
  147                        			sta	\2
  148                        		.else
  149                        			sec
  150                        			sbc	\1
  151                        		.endif
  152                        			.endm
  153                        	
  154                        	incw		.macro			; increment a word-sized
  155                        			inc.l	\1		; value at stated memory
  156                        			bne	!+		; location
  157                        			inc.h	\1
  158                        	!:
  159                        			.endm
  160                        	
  161                        	decw		.macro			; decrement a word-sized
  162                        			lda	\1		; value at stated memory
  163                        			bne	!+		; location
  164                        			dec.h	\1
  165                        	!:		dec.l	\1
  166                        			.endm
  167                        	
  168                        	lbne		.macro
  169                        			bne	\1
  170                        			.endm
  171                        	
  172                        	lbeq		.macro
  173                        			beq	\1
  174                        			.endm
  175                        	
  176                        	lbpl		.macro
  177                        			bpl	\1
  178                        			.endm
  179                        	
  180                        	lbmi		.macro
  181                        			bmi	\1
  182                        			.endm
  183                        	
  184                        	lbcc		.macro
  185                        			bcc	\1
  186                        			.endm
  187                        	
  188                        	lbcs		.macro
  189                        			bcs	\1
  190                        			.endm
  191                        	
  192                        	lblo		.macro
  193                        			bcc	\1
  194                        			.endm
  195                        	
  196                        	lbhs		.macro
  197                        			bcs	\1
  198                        			.endm
  199                        	
  200                        	__ldwi		.macro
  201                        		__ld.wi		\1
  202                        			.endm
                             #[2]   "..\..\..\include\hucc\hucc.asm"
  237                        		.endif
  238                        	
  239                        			;
  240                        			;
  241                        			;
  242                        	
  243                        	
  244                        	
  245                        	; ***************************************************************************
  246                        	; ***************************************************************************
  247                        	;
  248                        	; core_main - This is executed after "CORE(not TM)" library initialization.
  249                        	;
  250                        	; This is the first code assembled after the library includes, so we're still
  251                        	; in the CORE_BANK, usually ".bank 0"; and because this is assembled with the
  252                        	; default configuration from "include/core-config.inc", which sets the option
  253                        	; "USING_MPR7", then we're running in MPR7 ($E000-$FFFF).
  254                        	
  255    01:DF87             	core_main	.proc
  256                        	
  257               0001     		.if	SUPPORT_SGX
  258    01:DF87  A9 F9      			lda	#$F9			; Map the 2nd SGX RAM bank.
  259                        		.else
  261                        		.endif
  262    01:DF89  53 04      			tam2
  263                        	
  264    01:DF8B  A9 01      			lda	#CONST_BANK + _bank_base; Map HuCC's .RODATA bank.
  265    01:DF8D  53 08      			tam3
  266    01:DF8F  1A         			inc	a
  267    01:DF90  53 10      			tam4
  268                        	
  269               0000     		.ifdef	HOME_BANK
  271                        		.else
  272    01:DF92  1A         			inc	a
  273                        		.endif
  274    01:DF93  53 20      			tam5
  275                        	
  276    01:DF95  08         			php				; Disable interrupts while
  277    01:DF96  78         			sei				; clearing overlay's BSS.
  278                        	
  279               0000     		.ifndef	USING_RCR_MACROS
  294                        		.endif	USING_RCR_MACROS
  295                        	
  296    01:DF97  A9 CC      			lda	#<hucc_vbl		; Setup HuCC's VBL IRQ handler.
  297    01:DF99  8D 08 22   			sta.l	vsync_hook
  298    01:DF9C  A9 E2      			lda	#>hucc_vbl
  299    01:DF9E  8D 09 22   			sta.h	vsync_hook
  300                        	
  301               0000     		.if	CDROM				; Overlays should clear BSS.
  303                        		.else
  304    01:DFA1  73 EE DF F0			tii	.rom_tia, ram_tia, 16	; Only needed on HuCARD.
         01:DFA5  22 10 00    
  305                        		.endif	CDROM
  306                        	
  307               0000     		.if	(__heap_start - __bss_init)	; Copy initialized BSS data.
  309                        		.endif
  310                        	
  311    01:DFA8  F3 EC DF 08			tai	.stack_fill, __stack, HUCC_STACK_SZ
         01:DFAC  20 80 00    
  312                        	
  313               0000     		.if	FAST_MULTIPLY
  322                        		.endif
  323                        	
  324    01:DFAF  A9 10      			lda	#$10			; Enable HuCC's vblank IRQ
  325    01:DFB1  04 F5      			tsb	<irq_vec		; handler.
  326                        	
  327                        			__sound_init			; Initialize a sound driver.
  328                        	
  329    01:DFB3  AD 00 02   			lda	VDC_SR			; Purge any overdue VBL.
  330    01:DFB6  9C 41 22   			stz	irq_cnt			; Make it easy to check.
  331                        	
  332    01:DFB9  28         			plp				; Restore interrupts.
  333                        	
  334               0001     		.ifndef	HUCC_NO_DEFAULT_SCREEN
  335    01:DFBA  20 D1 FF   			call	_init_256x224		; HuCC initializes the VDC and
  336    01:DFBD  20 16 E4   			jsr	set_dspon		; turns the display on.
  337                        		.endif
  338                        	
  339               0001     		.ifndef	HUCC_NO_DEFAULT_FONT
  340    01:DFC0  A9 01      			lda	#1			; HuCC loads a default font.
  341    01:DFC2  8D B4 26   			sta	monofont_fg
  342    01:DFC5  9C B5 26   			stz	monofont_bg
  343                        			_load_default_font
         01:DFC8  82         			clx				; Offset to PCE VDC.
         01:DFC9  20 C7 FF   			call	huc_monofont_x
  344    01:DFCC  A9 01      			lda	#$01			; Set the font palette entry to
  345    01:DFCE  8D 02 04   			sta.l	VCE_CTA			; cyan which is a) visible, but
  346    01:DFD1  9C 03 04   			stz.h	VCE_CTA			; b) a clear indicator that the
  347    01:DFD4  A0 96      			ldy	#$96			; user hasn't set a palette yet.
  348    01:DFD6  8C 04 04   			sty.l	VCE_CTW
  349    01:DFD9  8D 05 04   			sta.h	VCE_CTW
  350                        		.endif
  351                        	
  352               0001     		.ifndef	HUCC_NO_DEFAULT_RANDOM
  353    01:DFDC  AC 41 22   			ldy	irq_cnt			; Initialize random seed.
  354    01:DFDF  20 BD FF   			call	init_random
  355                        		.endif
  356                        	
  357    01:DFE2  A2 80      			ldx	#HUCC_STACK_SZ		; Initialize the HuCC stack.
  358    01:DFE4  86 8D      			stx	<__sp
  359                        	
  360    01:DFE6  20 B3 FF   			call	_main			; Execute the HuCC program.
  361                        	
  362    01:DFE9  4C 88 E2   			jmp	_exit.1			; Pass the exit code on.
  363                        	
  364    01:DFEC  EA EA      	.stack_fill:	db	$EA,$EA			; To make it easier to see.
  365                        	
  366               0001     		.if	!CDROM
  367                        	
  368    01:DFEE  E3 34 12 02	.rom_tia:	tia	$1234, VDC_DL, 32
         01:DFF2  02 20 00    
  369    01:DFF5  60         			rts
  370                        	
  371    01:DFF6  73 34 12 78	.rom_tii:	tii	$1234, $5678, $9ABC
         01:DFFA  56 BC 9A    
  372    01:DFFD  60         			rts
  373                        	
  374               22F0     			.bss
  375    F8:22F0             	ram_tia:	ds	8
  376    F8:22F8             	ram_tii:	ds	8
  377               DFFE     			.code
  378                        	
  379                        		.endif	!CDROM
  380                        	
  381                        			.endp
  382                        	
  383                        			;
  384                        			; Self-Modifying TIA and TII instruction subroutines.
  385                        			;
  386                        			; These need to be in permanently-accessible memory so that
  387                        			; HuCC code can modify the values as __fastcall parameters.
  388                        			;
  389                        	
  390               0000     		.if	CDROM
  398                        		.endif	CDROM
  399                        	
  400               22F0     			rsset	ram_tia
  401               22F0     	ram_tia_opc	rs	1
  402               22F1     	ram_tia_src	rs	2
  403               22F3     	ram_tia_dst	rs	2
  404               22F5     	ram_tia_len	rs	2
  405               22F7     	ram_tia_rts	rs	1
  406                        	
  407               22F8     			rsset	ram_tii
  408               22F8     	ram_tii_opc	rs	1
  409               22F9     	ram_tii_src	rs	2
  410               22FB     	ram_tii_dst	rs	2
  411               22FD     	ram_tii_len	rs	2
  412               22FF     	ram_tii_rts	rs	1
  413                        	
  414                        	
  415                        	
  416                        	; ***************************************************************************
  417                        	; ***************************************************************************
  418                        	;
  419                        	; hucc_vbl - vblank IRQ handler, called by the "CORE(not TM)" kernel.
  420                        	;
  421                        	; This uses the kernel's hook to process things during vblank. It returns
  422                        	; with a simple RTS, and it can corrupt any register.
  423                        	;
  424                        	; Any slow routines in here should enable interrupts and protect itself from
  425                        	; re-entrancy problems.
  426                        	;
  427                        	
  428    00:E2CC  20 A9 FF   	hucc_vbl:	call	vbl_init_scroll		; Prepare for the next frame.
  429                        	
  430    00:E2CF  F8         			sed				; Update the HuC system clock
  431    00:E2D0  38         			sec				; which is in BCD here rather
  432    00:E2D1  AD EF 22   			lda	clock_tt		; than the binary one in HuC.
  433    00:E2D4  69 00      			adc	#0			; BCD add ...
  434    00:E2D6  C9 60      			cmp	#$60			; ... but binary comparison.
  435    00:E2D8  90 28      			bcc	.ticks
  436    00:E2DA  AD EE 22   			lda	clock_ss
  437    00:E2DD  69 00      			adc	#0			; BCD add ...
  438    00:E2DF  C9 60      			cmp	#$60			; ... but binary comparison.
  439    00:E2E1  90 1B      			bcc	.seconds
  440    00:E2E3  AD ED 22   			lda	clock_mm
  441    00:E2E6  69 00      			adc	#0			; BCD add ...
  442    00:E2E8  C9 60      			cmp	#$60			; ... but binary comparison.
  443    00:E2EA  90 0E      			bcc	.minutes
  444    00:E2EC  AD EC 22   			lda	clock_hh
  445    00:E2EF  69 00      			adc	#0			; BCD add ...
  446    00:E2F1  C9 12      			cmp	#$12			; ... but binary comparison.
  447    00:E2F3  90 01      			bcc	.hours
  448    00:E2F5  62         			cla
  449    00:E2F6  8D EC 22   	.hours:		sta	clock_hh
  450    00:E2F9  62         			cla
  451    00:E2FA  8D ED 22   	.minutes:	sta	clock_mm
  452    00:E2FD  62         			cla
  453    00:E2FE  8D EE 22   	.seconds:	sta	clock_ss
  454    00:E301  62         			cla
  455    00:E302  8D EF 22   	.ticks:		sta	clock_tt
  456    00:E305  D8         			cld
  457                        	
  458    00:E306  4C 96 E3   			jmp	xfer_palettes		; Upload any palette changes.
                             #[1]   "main.s"
   15               6000     			.data
   16               0003     			.bank	DATA_BANK
   17                        	
   18               E309     		.code
   19                        	
   20                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 1; // **************************************************************************
   21                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 2; // **************************************************************************
   22                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 3; //
   23                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 4; // globals.h
   24                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 5; //
   25                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 6; // **************************************************************************
   26                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 7; // **************************************************************************
   27                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 8; //
   28                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 9; // The idea is that you, a PCE developer, copy this file from the ../include/
   29                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 10; // directory and into your project's directory, and then define the variables
   30                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 11; // that you want to have shared access to in all overlay programs on your CD.
   31                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 12; //
   32                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 13; // Because PCEAS searches the current (i.e. project) directory for an include
   33                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 14; // file first, then it will find your customized copy of the file rather than
   34                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 15; // the original copy in the ../include/ directory.
   35                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 16; //
   36                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 17; // **************************************************************************
   37                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 18; // **************************************************************************
   38                        		.dbg	clear
   39               2300     		.bss
   40    F8:2300             	huc_globals:
   41                        	
   42    F8:2300             	huc_globals_end:
   43               E309     		.code
   44                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
   45                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
   46                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
   47                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
   48                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
   49                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
   50                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
   51                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
   52                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
   53                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
   54                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
   55                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
   56                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
   57                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
   58                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
   59                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
   60                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
   61                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
   62                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
   63                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
   64                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
   65                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
   66                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
   67                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
   68                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
   69                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
   70                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
   71                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
   72                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
   73                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
   74                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
   75                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 1; #ifndef _hucc_systemcard_h
   76                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 2; #define _hucc_systemcard_h
   77                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 4; /****************************************************************************
   78                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 5; ; ***************************************************************************
   79                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 6; ;
   80                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 7; ; hucc-systemcard.h
   81                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 8; ;
   82                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 9; ; Macros and library functions for using the System Card.
   83                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 10; ;
   84                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 11; ; Copyright John Brandwood 2024.
   85                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 12; ;
   86                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 13; ; Distributed under the Boost Software License, Version 1.0.
   87                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
   88                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
   89                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 16; ;
   90                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 17; ; ***************************************************************************
   91                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 18; ; ***************************************************************************
   92                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 19; ;
   93                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 20; ; Because these are mainly macros, and so must be included before being used
   94                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 21; ; in compiled code, the actual functions here are written to avoid using any
   95                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 22; ; BSS memory so that HuCC's overlay global-shared-variables are not effected.
   96                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 23; ;
   97                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 24; ; ***************************************************************************
   98                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 25; ; **************************************************************************/
   99                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 27; // *************
  100                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 28; // Backup RAM defines ...
  101                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 29; // *************
  102                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 31; #define  BM_OK             0
  103                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 32; #define  BM_NOT_FOUND      1
  104                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 33; #define  BM_BAD_CHECKSUM   2
  105                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 34; #define  BM_DIR_CORRUPTED  3
  106                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 35; #define  BM_FILE_EMPTY     4
  107                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 36; #define  BM_FULL           5
  108                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 37; #define  BM_NOT_FORMATED   0xFF			// HuC incorrect spelling.
  109                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 38; #define  BM_NOT_FORMATTED  0xFF			// HuCC can use a dictionary!
  110                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 40; #define  BRAM_STARTPTR     0x8010
  111                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 42; // *************
  112                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 43; // CD defines ...
  113                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 44; // *************
  114                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 46; #define	CDPLAY_MUTE		0
  115                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 47; #define	CDPLAY_REPEAT		1
  116                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 48; #define	CDPLAY_NORMAL		2
  117                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 49; #define	CDPLAY_ENDOFDISC	0
  118                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 51; #define	CDFADE_CANCEL	0
  119                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 52; #define	CDFADE_PCM6	8
  120                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 53; #define	CDFADE_ADPCM6	10
  121                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 54; #define	CDFADE_PCM2	12
  122                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 55; #define	CDFADE_ADPCM2	14
  123                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 57; #define CDTRK_AUDIO	0
  124                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 58; #define CDTRK_DATA	4
  125                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 60; // *************
  126                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 61; // ADPCM defines ...
  127                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 62; // *************
  128                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 64; #define	ADPLAY_AUTOSTOP		0
  129                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 65; #define	ADPLAY_REPEAT		0x80
  130                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 67; #define ADPLAY_FREQ_16KHZ	0xE
  131                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 68; #define ADPLAY_FREQ_10KHZ	0xD
  132                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 69; #define ADPLAY_FREQ_8KHZ	0xC
  133                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 70; #define ADPLAY_FREQ_6KHZ	0xB
  134                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 71; #define ADPLAY_FREQ_5KHZ	0xA
  135                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 73; #define ADREAD_RAM	0
  136                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 74; #define ADREAD_VRAM	0xFF
  137                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 76; #define ADWRITE_RAM	0
  138                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 77; #define ADWRITE_VRAM	0xFF
  139                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 79; // *************
  140                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 80; // Functions in hucc-systemcard.asm ...
  141                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 81; // *************
  142                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 83; #ifdef __HUCC__
  143                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 85; #asmdef	HUCC_USES_SYSTEMCARD 1
  144               0001     	HUCC_USES_SYSTEMCARD = 1
  145                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 87; extern void __fastcall __macro cd_boot( void );
  146                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 88; extern unsigned int __fastcall __macro cd_getver( void );
  147                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 89; extern void __fastcall __macro cd_reset( void );
  148                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 90; extern unsigned char __fastcall __macro cd_pause( void );
  149                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 91; extern unsigned char __fastcall cd_unpause( void );
  150                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 92; extern void __fastcall __macro cd_fade( unsigned char type<acc> );
  151                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 93; extern unsigned char __fastcall cd_playtrk( unsigned char start_track<_bx>, unsigned char end_track<_cx>, unsigned char mode<_dh> );
  152                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 94; extern unsigned char __fastcall cd_playmsf( unsigned char start_minute<_al>,  unsigned char start_second<_ah>,  unsigned char start_frame<_bl>, unsigned char end_minute<_cl>,  unsigned char end_second<_ch>,  unsigned char end_frame<_dl>,  unsigned char mode<_dh> );
  153                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 95; extern unsigned char __fastcall cd_fastvram( unsigned char ovl_index<_cl>, unsigned int sect_offset<_si>, unsigned int vramaddr<_bx>, unsigned int sectors<_al> );
  154                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 96; extern unsigned char __fastcall cd_loadvram( unsigned char ovl_index<_cl>, unsigned int sect_offset<_si>, unsigned int vramaddr<_bx>, unsigned int bytes<_ax> );
  155                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 97; extern unsigned char __fastcall cd_loaddata( unsigned char ovl_index<_cl>, unsigned int sect_offset<_si>, unsigned char __far *buffer<_bp_bank:_bp>, unsigned int bytes<__ptr> );
  156                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 98; extern unsigned char __fastcall cd_loadbank( unsigned char ovl_index<_cl>, unsigned int sect_offset<_si>, unsigned char bank<_bl>, unsigned int sectors<_al> );
  157                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 99; extern unsigned char __fastcall __macro cd_status( unsigned char mode<acc> );
  158                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 101; extern void __fastcall __macro ad_reset( void );
  159                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 102; extern unsigned char __fastcall __macro ad_trans( unsigned char ovl_index<_cl>, unsigned int sect_offset<_si>, unsigned char nb_sectors<_dh>, unsigned int ad_addr<_bx> );
  160                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 103; extern void __fastcall __macro ad_read( unsigned int ad_addr<_cx>, unsigned char mode<_dh>, unsigned int buf<_bx>, unsigned int bytes<_ax> );
  161                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 104; extern void __fastcall __macro ad_write( unsigned int ad_addr<_cx>, unsigned char mode<_dh>, unsigned int buf<_bx>, unsigned int bytes<_ax> );
  162                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 105; extern unsigned char __fastcall __macro ad_play( unsigned int ad_addr<_bx>, unsigned int bytes<_ax>, unsigned char freq<_dh>, unsigned char mode<_dl> );
  163                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 106; extern unsigned char __fastcall __macro ad_cplay( unsigned char ovl_index<_cl>, unsigned int sect_offset<_si>, unsigned int nb_sectors<_bx>, unsigned char freq<_dh> );
  164                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 107; extern void __fastcall __macro ad_stop( void );
  165                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 108; extern unsigned char __fastcall __macro ad_stat( void );
  166                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 110; extern unsigned char __fastcall bm_check( void );
  167                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 111; extern unsigned char __fastcall bm_format( void );
  168                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 112; extern unsigned int __fastcall __macro bm_free( void );
  169                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 113; extern unsigned char __fastcall __macro bm_read( unsigned char *buffer<_bx>, unsigned char *name<_ax>, unsigned int offset<_dx>, unsigned int length<_cx> );
  170                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 114; extern unsigned char __fastcall __macro bm_write( unsigned char *buffer<_bx>, unsigned char *name<_ax>, unsigned int offset<_dx>, unsigned int length<_cx> );
  171                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 115; extern unsigned char __fastcall __macro bm_delete( unsigned char *name<_ax> );
  172                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 117; // Deprecated functions ...
  173                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 119; extern unsigned char __fastcall __macro bm_exist( unsigned char *name<_ax> );
  174                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 120; extern unsigned char __fastcall __macro bm_create( unsigned char *name<_ax>, unsigned int length<_cx> );
  175                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 122; // void __fastcall _xsafe add_sectors( unsigned int sector_offset<acc> );
  176                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 124; #endif // __HUCC__
  177                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 126; #endif // _hucc_systemcard_h
  178                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
  179                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 1; #ifndef _hucc_baselib_h
  180                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 2; #define _hucc_baselib_h
  181                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 4; /****************************************************************************
  182                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 5; ; ***************************************************************************
  183                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 6; ;
  184                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 7; ; hucc-baselib.h
  185                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 8; ;
  186                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 9; ; Basic library functions provided as macros.
  187                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 10; ;
  188                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 11; ; Copyright John Brandwood 2024.
  189                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 12; ;
  190                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 13; ; Distributed under the Boost Software License, Version 1.0.
  191                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
  192                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
  193                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 16; ;
  194                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 17; ; ***************************************************************************
  195                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 18; ; **************************************************************************/
  196                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 20; // *************
  197                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 21; // Joypad defines ...
  198                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 22; // *************
  199                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 24; #define	JOY_A		0x01
  200                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 25; #define	JOY_I		0x01
  201                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 26; #define	JOY_B		0x02
  202                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 27; #define	JOY_II		0x02
  203                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 28; #define	JOY_SLCT	0x04
  204                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 29; #define	JOY_SEL		0x04
  205                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 30; #define	JOY_STRT	0x08
  206                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 31; #define	JOY_RUN		0x08
  207                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 32; #define	JOY_UP		0x10
  208                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 33; #define	JOY_RGHT	0x20
  209                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 34; #define	JOY_RIGHT	0x20
  210                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 35; #define	JOY_DOWN	0x40
  211                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 36; #define	JOY_LEFT	0x80
  212                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 38; #define	JOY_C		0x0100
  213                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 39; #define	JOY_III		0x0100
  214                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 40; #define	JOY_D		0x0200
  215                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 41; #define	JOY_IV		0x0200
  216                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 42; #define	JOY_E		0x0400
  217                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 43; #define	JOY_V		0x0400
  218                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 44; #define	JOY_F		0x0800
  219                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 45; #define	JOY_VI		0x0800
  220                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 47; #define JOY_SIXBUT	0x8000
  221                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 48; #define JOY_TYPE6	0x8000
  222                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 50; // *************
  223                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 51; // SuperGRAFX VPC settings for set_vpc_ctl() ...
  224                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 52; // *************
  225                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 54; #define VPC_SPR1_BKG1_SPR2_BKG2	0x3000 // same as SGX_PARALLAX=0
  226                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 55; #define VPC_SPR1_SPR2_BKG1_BKG2	0x7000 // same as SGX_PARALLAX=1
  227                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 56; #define VPC_BKG1_BKG2_SPR1_SPR2	0xB000
  228                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 58; // *************
  229                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 59; // System Card variables ...
  230                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 60; // *************
  231                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 62; extern unsigned int si;
  232                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 63; extern unsigned int di;
  233                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 64; extern unsigned int bp;
  234                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 66; extern unsigned int ax;
  235                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 67; extern unsigned int bx;
  236                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 68; extern unsigned int cx;
  237                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 69; extern unsigned int dx;
  238                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 71; extern unsigned char al;
  239                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 72; extern unsigned char ah;
  240                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 73; extern unsigned char bl;
  241                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 74; extern unsigned char bh;
  242                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 75; extern unsigned char cl;
  243                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 76; extern unsigned char ch;
  244                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 77; extern unsigned char dl;
  245                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 78; extern unsigned char dh;
  246                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 80; extern unsigned char irq_cnt;
  247                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 81; extern unsigned char joynow[5];
  248                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 82; extern unsigned char joytrg[5];
  249                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 83; extern unsigned char joy6now[5];
  250                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 84; extern unsigned char joy6trg[5];
  251                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 85; extern unsigned int  bg_x1;
  252                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 86; extern unsigned int  bg_y1;
  253                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 87; extern unsigned int  bg_x2;
  254                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 88; extern unsigned int  bg_y2;
  255                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 90; // *************
  256                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 91; // Special macros to get information from PCEAS ...
  257                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 92; // *************
  258                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 94; #define BANK( datasym ) ((unsigned) (&__bank__ ## datasym))
  259                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 95; #define SIZEOF( datasym ) ((unsigned) (&__sizeof__ ## datasym))
  260                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 96; #define COUNTOF( datasym ) ((unsigned) (&__countof__ ## datasym))
  261                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 97; #define OVERLAY( datasym ) ((unsigned) (&__overlay__ ## datasym))
  262                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 100; // *************
  263                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 101; // Functions in hucc-baselib.asm ...
  264                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 102; // *************
  265                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 104; #ifdef __HUCC__
  266                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 106; #asmdef	HUCC_USES_BASELIB 1
  267               0001     	HUCC_USES_BASELIB = 1
  268                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 108; #define	_OPTIMIZE 1
  269                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 111; // *************
  270                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 112; // Hardware Detection
  271                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 113; // *************
  272                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 115; extern unsigned char __fastcall __macro sgx_detect( void );
  273                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 116; extern unsigned char __fastcall __macro ac_exists( void );
  274                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 119; // *************
  275                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 120; // Memory Access
  276                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 121; // *************
  277                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 123; extern unsigned char __fastcall __macro peek( unsigned int addr<__ptr> );
  278                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 124; extern unsigned int  __fastcall __macro peekw( unsigned int addr<__ptr> );
  279                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 126; extern void __fastcall __macro poke( unsigned int addr<__poke>, unsigned char with<acc> );
  280                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 127; extern void __fastcall __macro pokew( unsigned int addr<__poke>, unsigned int with<acc> );
  281                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 129; extern unsigned char __fastcall farpeek( void __far *addr<_bp_bank:_bp> );
  282                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 130; extern unsigned int  __fastcall farpeekw( void __far *addr<_bp_bank:_bp> );
  283                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 132; extern void __fastcall __nop set_far_base( unsigned char data_bank<_bp_bank>, unsigned char *data_addr<_bp> );
  284                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 133; extern void __fastcall set_far_offset( unsigned int offset<_bp>, unsigned char data_bank<_bp_bank>, unsigned char *data_addr<acc> );
  285                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 135; extern unsigned char __fastcall far_peek( void );
  286                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 136; extern unsigned int  __fastcall far_peekw( void );
  287                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 138; extern void __fastcall __macro reset_mpr2( void );
  288                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 139; extern void __fastcall __macro reset_mpr34( void );
  289                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 141; extern void * __fastcall __macro farset_mpr2( void __far *addr<_bp_bank:_bp> );
  290                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 142; extern void * __fastcall __macro farset_mpr34( void __far *addr<_bp_bank:_bp> );
  291                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 144; extern void * __fastcall __macro far_set_mpr2( void );
  292                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 145; extern void * __fastcall __macro far_set_mpr34( void );
  293                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 148; // *************
  294                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 149; // Clock Functions
  295                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 150; // *************
  296                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 152; extern unsigned char __fastcall __macro clock_hh( void );
  297                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 153; extern unsigned char __fastcall __macro clock_mm( void );
  298                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 154; extern unsigned char __fastcall __macro clock_ss( void );
  299                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 155; extern unsigned char __fastcall __macro clock_tt( void );
  300                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 156; extern void __fastcall __macro clock_reset( void );
  301                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 159; // *************
  302                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 160; // Joypad Functions
  303                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 161; // *************
  304                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 163; extern unsigned int __fastcall __macro joy( unsigned char which<acc> );
  305                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 164; extern unsigned int __fastcall __macro joytrg( unsigned char which<acc> );
  306                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 167; // *************
  307                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 168; // Number Functions
  308                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 169; // *************
  309                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 171; extern int __fastcall abs( int value<acc> );
  310                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 173; extern void __fastcall __macro srand( unsigned char seed<acc> );
  311                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 174; extern unsigned int __fastcall rand( void );
  312                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 175; extern unsigned char __fastcall rand8( void );
  313                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 177; // Note: "limit" is 0..255.
  314                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 178; extern unsigned char __fastcall random8( unsigned char limit<acc> );
  315                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 180; // Note: "limit" is 0..128, 129..255 are treated as 128!
  316                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 181; extern unsigned char __fastcall random( unsigned char limit<acc> );
  317                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 184; // *************
  318                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 185; // Overlay Execution
  319                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 186; // *************
  320                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 188; extern unsigned char __fastcall __macro cd_execoverlay( unsigned char ovl_index<acc> );
  321                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 191; // *************
  322                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 192; // Functions that are only optionally available if configured in your hucc-config.inc
  323                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 193; // *************
  324                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 195; extern unsigned int __fastcall __macro joybuf( unsigned char which<acc> );
  325                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 196; extern unsigned int __fastcall __macro get_joy_events( unsigned char which<acc> );
  326                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 197; extern void __fastcall __macro clear_joy_events( unsigned char mask<acc> );
  327                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 200; // *************
  328                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 201; // Functions that are only implemented in the TGEMU emulator for unit-testing
  329                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 202; // the compiler, and which should never be used in normal HuCC projects ...
  330                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 203; // *************
  331                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 205; extern void __fastcall dump_screen( void );
  332                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 206; extern void __fastcall abort( void );
  333                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 207; extern void __fastcall exit( int value<acc> );
  334                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 209; extern unsigned char __fastcall __builtin_ffs( unsigned int value<__temp> );
  335                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 211; #endif // __HUCC__
  336                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 213; #endif // _hucc_baselib_h
  337                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
  338                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 1; #ifndef _hucc_gfx_h
  339                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 2; #define _hucc_gfx_h
  340                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 4; /****************************************************************************
  341                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 5; ; ***************************************************************************
  342                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 6; ;
  343                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 7; ; huc-gfx.h
  344                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 8; ;
  345                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 9; ; Based on the original HuC and MagicKit functions by David Michel and the
  346                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 10; ; other original HuC developers.
  347                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 11; ;
  348                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 12; ; Modifications copyright John Brandwood 2024.
  349                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 13; ;
  350                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 14; ; Distributed under the Boost Software License, Version 1.0.
  351                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 15; ; (See accompanying file LICENSE_1_0.txt or copy at
  352                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 16; ;  http://www.boost.org/LICENSE_1_0.txt)
  353                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 17; ;
  354                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 18; ; ***************************************************************************
  355                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 19; ; **************************************************************************/
  356                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 21; // *************
  357                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 22; // Screen defines ...
  358                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 23; // *************
  359                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 25; #define	SCR_SIZE_32x32	0
  360                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 26; #define	SCR_SIZE_64x32	1
  361                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 27; #define	SCR_SIZE_128x32	2
  362                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 28; #define	SCR_SIZE_32x64	4
  363                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 29; #define	SCR_SIZE_64x64	5
  364                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 30; #define	SCR_SIZE_128x64	6
  365                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 32; #define	XRES_SHARP	0
  366                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 33; #define	XRES_SOFT	4
  367                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 34; #define	XRES_KEEP	128
  368                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 36; #define VPC_WIN_A	0x00
  369                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 37; #define VPC_WIN_B	0x01
  370                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 38; #define	VPC_WIN_AB	0x02
  371                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 39; #define	VPC_WIN_NONE	0x03
  372                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 40; #define	VPC_NORM	0x00
  373                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 41; #define	VPC_SPR		0x04
  374                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 42; #define	VPC_INV_SPR	0x08
  375                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 43; #define VDC1_ON		0x01
  376                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 44; #define	VDC1_OFF	0x00
  377                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 45; #define VDC2_ON		0x02
  378                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 46; #define	VDC2_OFF	0x00
  379                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 47; #define VDC_ON		0x03
  380                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 48; #define	VDC_OFF		0x00
  381                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 50; // *************
  382                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 51; // Functions in hucc-gfx.asm ...
  383                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 52; // *************
  384                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 54; #ifdef __HUCC__
  385                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 56; #asmdef	HUCC_USES_GFX 1
  386               0001     	HUCC_USES_GFX = 1
  387                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 58; // *************
  388                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 59; // Color and Palette Functions
  389                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 60; // *************
  390                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 62; extern void __fastcall clear_palette( void );
  391                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 64; extern void __fastcall __nop set_color( unsigned int index<VCE_CTA>, unsigned int value<VCE_CTW> );
  392                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 65; extern void __fastcall set_color_rgb( unsigned int index<VCE_CTA>, unsigned char r<_al>, unsigned char g<_ah>, unsigned char b<acc> );
  393                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 66; extern unsigned int __fastcall __macro get_color( unsigned int index<VCE_CTA> );
  394                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 68; extern void __fastcall load_palette( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp>, unsigned char num_palettes<_ah> );
  395                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 69; extern void __fastcall far_load_palette( unsigned char palette<_al>, unsigned char num_palettes<_ah> );
  396                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 71; extern void __fastcall read_palette( unsigned char palette<_al>, unsigned char num_palettes<_ah>, unsigned int *destination<_di> );
  397                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 73; extern void __fastcall __macro fade_to_black( unsigned int __far *from<_bp_bank:_bp>, unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_sub<_ah> );
  398                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 74; extern void __fastcall __macro fade_to_white( unsigned int __far *from<_bp_bank:_bp>, unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_add<_ah> );
  399                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 75; extern void __fastcall __macro cross_fade_to( unsigned int __far *from<_bp_bank:_bp>, unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char which_component<_ah> );
  400                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 77; extern void __fastcall __macro far_fade_to_black( unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_sub<_ah> );
  401                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 78; extern void __fastcall __macro far_fade_to_white( unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_add<_ah> );
  402                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 79; extern void __fastcall __macro far_cross_fade_to( unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char which_component<_ah> );
  403                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 83; // *************
  404                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 84; // Video Functions
  405                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 85; // *************
  406                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 87; extern void __fastcall init_240x208( void );
  407                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 88; extern void __fastcall init_256x224( void );
  408                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 90; extern void __fastcall vsync( void );
  409                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 91; extern void __fastcall vsync( unsigned char count<_al> );
  410                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 93; extern void __fastcall disp_on( void );
  411                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 94; extern void __fastcall disp_off( void );
  412                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 96; extern void __fastcall set_screen_size( unsigned char value<_al> );
  413                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 98; extern void __fastcall set_xres( unsigned int x_pixels<_ax>, unsigned char blur_flag<_bl> );
  414                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 100; extern void __fastcall cls( void );
  415                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 101; extern void __fastcall cls( unsigned int tile<acc> );
  416                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 103; extern unsigned int __fastcall __macro vram_addr( unsigned char bat_x<_al>, unsigned char bat_y<_ah> );
  417                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 104; extern unsigned int __fastcall __macro get_vram( unsigned int address<_di> );
  418                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 105; extern void __fastcall __macro put_vram( unsigned int address<_di>, unsigned int data<acc> );
  419                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 107; extern void __fastcall __macro load_vram( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_words<_ax> );
  420                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 108; extern void __fastcall __macro far_load_vram( unsigned int vram<_di>,  unsigned int num_words<_ax> );
  421                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 110; extern void __fastcall load_bat( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  422                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 111; extern void __fastcall far_load_bat( unsigned int vram<_di>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  423                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 113; extern void __fastcall __macro load_sprites( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_groups<acc> );
  424                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 114; extern void __fastcall __macro far_load_sprites( unsigned int vram<_di>, unsigned int num_groups<acc> );
  425                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 116; extern void __fastcall vram2vram( unsigned int vram_dst<_ax>, unsigned int vram_src<_bx>, unsigned int word_len<_cx> );
  426                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 119; // *************
  427                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 120; // SuperGRAFX Video Functions
  428                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 121; // *************
  429                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 123; extern void __fastcall __nop vpc_set_ctl( unsigned int bits<VPC_CR> );
  430                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 124; extern void __fastcall __nop vpc_set_win1( unsigned int width<VPC_WINDOW1> );
  431                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 125; extern void __fastcall __nop vpc_set_win2( unsigned int width<VPC_WINDOW2> );
  432                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 127; extern void __fastcall sgx_set_screen_size( unsigned char value<_al> );
  433                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 129; extern void __fastcall sgx_set_xres( unsigned int x_pixels<_ax>, unsigned char blur_flag<_bl> );
  434                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 131; extern void __fastcall sgx_cls( void );
  435                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 132; extern void __fastcall sgx_cls( unsigned int tile<acc> );
  436                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 134; extern unsigned int __fastcall __macro sgx_vram_addr( unsigned char bat_x<_al>, unsigned char bat_y<_ah> );
  437                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 135; extern unsigned int __fastcall __macro sgx_get_vram( unsigned int address<_di> );
  438                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 136; extern void __fastcall __macro sgx_put_vram( unsigned int address<_di>, unsigned int data<acc> );
  439                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 138; extern void __fastcall __macro sgx_load_vram( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_words<_ax> );
  440                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 139; extern void __fastcall __macro sgx_far_load_vram( unsigned int vram<_di>, unsigned int num_words<_ax> );
  441                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 141; extern void __fastcall sgx_load_bat( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  442                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 142; extern void __fastcall sgx_far_load_bat( unsigned int vram<_di>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  443                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 144; extern void __fastcall __macro sgx_load_sprites( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_groups<acc> );
  444                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 145; extern void __fastcall __macro sgx_far_load_sprites( unsigned int vram<_di>, unsigned int num_groups<acc> );
  445                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 147; extern void __fastcall sgx_vram2vram( unsigned int vram_dst<_ax>, unsigned int vram_src<_bx>, unsigned int word_len<_cx> );
  446                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 150; // *************
  447                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 151; // Font Functions
  448                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 152; // *************
  449                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 154; extern void __fastcall set_font_addr( unsigned int vram<acc> );
  450                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 155; extern void __fastcall set_font_pal( unsigned char palette<acc> );
  451                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 157; extern void __fastcall load_font( unsigned char __far *font<_bp_bank:_bp>, unsigned char count<_al>, unsigned int vram<acc> );
  452                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 158; extern void __fastcall far_load_font( unsigned char count<_al>, unsigned int vram<acc> );
  453                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 160; extern void __fastcall __nop set_font_color( unsigned char foreground<monofont_fg>, unsigned char background<monofont_bg> );
  454                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 161; extern void __fastcall __macro load_default_font( void );
  455                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 164; // *************
  456                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 165; // SuperGRAFX Font Functions
  457                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 166; // *************
  458                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 168; extern void __fastcall sgx_set_font_addr( unsigned int vram<acc> );
  459                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 169; extern void __fastcall sgx_set_font_pal( unsigned char palette<acc> );
  460                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 171; extern void __fastcall sgx_load_font( char __far *font<_bp_bank:_bp>, unsigned char count<_al>, unsigned int vram<acc> );
  461                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 172; extern void __fastcall sgx_far_load_font( unsigned char count<_al>, unsigned int vram<acc> );
  462                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 174; extern void __fastcall __macro sgx_load_default_font( void );
  463                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 177; // *************
  464                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 178; // Deprecated functions ...
  465                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 179; // *************
  466                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 181; extern void __fastcall __macro set_xres( unsigned int x_pixels<_ax> );
  467                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 182; extern void __fastcall __macro sgx_set_xres( unsigned int x_pixels<_ax> );
  468                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 184; extern void __fastcall load_background( unsigned char __far *tiles<_bp_bank:_bp>, unsigned char __far *palettes<__fbank:__fptr>, unsigned char __far *bat<_cl:_bx>, unsigned char w<_dl>, unsigned char h<_dh> );
  469                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 186; extern void __fastcall __macro set_bgpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp> );
  470                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 187; extern void __fastcall __macro set_bgpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_palettes<_ah> );
  471                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 188; extern void __fastcall __macro set_sprpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp> );
  472                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 189; extern void __fastcall __macro set_sprpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_palettes<_ah> );
  473                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 191; extern void __fastcall load_font( char __far *font<_bp_bank:_bp>, unsigned char count<_al> );
  474                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 193; extern void __fastcall put_string( unsigned char *string<_bp>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
  475                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 195; extern void __fastcall put_char( unsigned char digit<_bl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
  476                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 196; extern void __fastcall put_digit( unsigned char digit<_bl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
  477                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 197; extern void __fastcall put_hex( unsigned int number<_bx>, unsigned char length<_cl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
  478                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 198; extern void __fastcall put_number( unsigned int number<_bx>, unsigned char length<_cl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
  479                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 199; extern void __fastcall put_raw( unsigned int data<_bx>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
  480                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 201; #endif // __HUCC__
  481                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 203; #endif // _hucc_gfx_h
  482                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
  483                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 1; #ifndef _hucc_string_h
  484                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 2; #define _hucc_string_h
  485                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 4; /****************************************************************************
  486                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 5; ; ***************************************************************************
  487                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 6; ;
  488                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 7; ; hucc-string.h
  489                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 8; ;
  490                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 9; ; Not-quite-standard, but fast, replacements for <string.h>.
  491                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 10; ;
  492                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 11; ; Copyright John Brandwood 2024.
  493                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 12; ;
  494                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 13; ; Distributed under the Boost Software License, Version 1.0.
  495                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
  496                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
  497                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 16; ;
  498                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 17; ; ***************************************************************************
  499                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 18; ; ***************************************************************************
  500                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 19; ;
  501                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 20; ; !!! WARNING : non-standard return values !!!
  502                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 21; ;
  503                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 22; ; Strings are limited to a maximum of 255 characters (+ the terminator)!
  504                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 23; ;
  505                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 24; ; The memcpy(), strcpy() and strcat() functions do NOT return the destination
  506                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 25; ; address, and they are declared "void" to check that the value is not used.
  507                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 26; ;
  508                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 27; ; mempcpy() is provided which returns the end address instead of the starting
  509                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 28; ; address, because this is typically more useful.
  510                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 29; ;
  511                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 30; ; Please note that both memcpy() and memset() are implemented using a TII for
  512                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 31; ; speed, and so the length should be < 16 bytes if used in time-critical bits
  513                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 32; ; of code (such as when using a split screen) because they delay interrupts.
  514                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 33; ;
  515                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 34; ; strncpy() and strncat() are not provided, because strncpy() was not created
  516                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 35; ; for the purpose of avoiding string overruns, and strncat() is just a poorly
  517                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 36; ; designed function IMHO.
  518                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 37; ;
  519                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 38; ; POSIX strlcpy() and strlcat() are provided instead, but once again they are
  520                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 39; ; slightly non-standard in that the return value when there is an overflow is
  521                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 40; ; the buffer size (so that the overflow can be detected), instead of the full
  522                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 41; ; size of the destination string that was too big to fit in the buffer.
  523                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 42; ;
  524                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 43; ; ***************************************************************************
  525                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 44; ; **************************************************************************/
  526                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 46; // *************
  527                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 47; // Functions in hucc-string.asm ...
  528                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 48; // *************
  529                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 50; #ifdef __HUCC__
  530                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 52; #asmdef	HUCC_USES_STRING 1
  531               0001     	HUCC_USES_STRING = 1
  532                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 54; extern void __fastcall strcpy( char *destination<_di>, char *source<_bp> );
  533                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 55; extern void __fastcall strcat( char *destination<_di>, char *source<_bp> );
  534                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 57; extern unsigned int __fastcall strlen( char *source<_bp> );
  535                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 59; extern unsigned int __fastcall strlcpy( char *destination<_di>, char *source<_bp>, unsigned char size<acc> );
  536                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 60; extern unsigned int __fastcall strlcat( char *destination<_di>, char *source<_bp>, unsigned char size<acc> );
  537                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 62; extern void __fastcall memcpy( unsigned char *destination<ram_tii_dst>, unsigned char *source<ram_tii_src>, unsigned int count<acc> );
  538                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 63; extern void __fastcall farmemcpy( unsigned char *destination<ram_tii_dst>, unsigned char __far *source<_bp_bank:ram_tii_src>, unsigned int count<acc> );
  539                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 64; extern void __fastcall far_memcpy( unsigned char *destination<ram_tii_dst>, unsigned int count<acc> );
  540                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 66; extern unsigned char * __fastcall mempcpy( unsigned char *destination<ram_tii_dst>, unsigned char *source<ram_tii_src>, unsigned int count<acc> );
  541                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 67; extern unsigned char * __fastcall farmempcpy( unsigned char *destination<ram_tii_dst>, unsigned char __far *source<_bp_bank:ram_tii_src>, unsigned int count<acc> );
  542                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 68; extern unsigned char * __fastcall far_mempcpy( unsigned char *destination<ram_tii_dst>, unsigned int count<acc> );
  543                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 70; extern void __fastcall memset( unsigned char *destination<ram_tii_src>, unsigned char value<_al>, unsigned int count<acc> );
  544                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 72; //  0 	if strings are equal
  545                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 73; //  1 	if the first non-matching character in string1 > string2 (in ASCII).
  546                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 74; // -1 	if the first non-matching character in string1 < string2 (in ASCII).
  547                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 76; extern int __fastcall strcmp( char *string1<_di>, char *string2<_bp> );
  548                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 77; extern int __fastcall strncmp( char *string1<_di>, char *string2<_bp>, unsigned int count<_ax> );
  549                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 79; extern int __fastcall __macro memcmp( unsigned char *string1<_di>, unsigned char *string2<_bp>, unsigned int count<acc> );
  550                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 80; extern int __fastcall farmemcmp( unsigned char *string1<_di>, unsigned char __far *string2<_bp_bank:_bp>, unsigned int count<acc> );
  551                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 81; extern int __fastcall far_memcmp( unsigned char *string1<_di>, unsigned int count<acc> );
  552                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 83; #endif // __HUCC__
  553                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 85; #endif // _hucc_string_h
  554                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
  555                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 1; #ifndef _hucc_old_scroll_h
  556                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 2; #define _hucc_old_scroll_h
  557                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 4; /****************************************************************************
  558                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 5; ; ***************************************************************************
  559                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 6; ;
  560                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 7; ; hucc-old-scroll.h
  561                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 8; ;
  562                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 9; ; Based on the original HuC and MagicKit functions by David Michel and the
  563                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 10; ; other original HuC developers.
  564                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 11; ;
  565                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 12; ; Modifications copyright John Brandwood 2024.
  566                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 13; ;
  567                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 14; ; Distributed under the Boost Software License, Version 1.0.
  568                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 15; ; (See accompanying file LICENSE_1_0.txt or copy at
  569                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 16; ;  http://www.boost.org/LICENSE_1_0.txt)
  570                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 17; ;
  571                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 18; ; ***************************************************************************
  572                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 19; ; ***************************************************************************
  573                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 20; ;
  574                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 21; ; HuC's old scrolling library is provided for use with existing HuC projects,
  575                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 22; ; but it should preferably be avoided in new projects because it is slow and
  576                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 23; ; forever limited by its choice to handle gaps between areas, and sorting.
  577                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 24; ;
  578                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 25; ; HuCC's new scrolling library puts the responibility for defining both gaps
  579                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 26; ; and the display order into the project's hands, but in return it runs much
  580                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 27; ; faster, using less than 1/6 of the processing time in VBLANK, and far less
  581                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 28; ; time in the RCR interrputs themselves. It also supports the 2nd SuperGRAFX
  582                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 29; ; screen layer, which HuC's old scrolling library ignores.
  583                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 30; ;
  584                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 31; ; ***************************************************************************
  585                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 32; ; **************************************************************************/
  586                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 34; // *************
  587                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 35; // Functions in hucc-old-scroll.asm ...
  588                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 36; // *************
  589                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 38; #ifdef __HUCC__
  590                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 40; #asmdef	HUCC_USES_OLD_SCROLL 1
  591               0001     	HUCC_USES_OLD_SCROLL = 1
  592                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 42; extern void __fastcall scroll( unsigned char num<_al>, unsigned int x<_cx>, unsigned int y<_dx>, unsigned char top<_ah>, unsigned char bottom<_bl>, unsigned char disp<acc> );
  593                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 43; extern void __fastcall scroll_disable( unsigned char num<acc> );
  594                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 45; #endif // __HUCC__
  595                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 47; #endif // _hucc_old_scroll_h
  596                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
  597                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 1; #ifndef _hucc_old_spr_h
  598                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 2; #define _hucc_old_spr_h
  599                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 4; /****************************************************************************
  600                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 5; ; ***************************************************************************
  601                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 6; ;
  602                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 7; ; hucc-old-spr.h
  603                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 8; ;
  604                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 9; ; Based on the original HuC and MagicKit functions by David Michel and the
  605                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 10; ; other original HuC developers.
  606                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 11; ;
  607                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 12; ; Modifications copyright John Brandwood 2024.
  608                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 13; ;
  609                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 14; ; Distributed under the Boost Software License, Version 1.0.
  610                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 15; ; (See accompanying file LICENSE_1_0.txt or copy at
  611                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 16; ;  http://www.boost.org/LICENSE_1_0.txt)
  612                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 17; ;
  613                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 18; ; ***************************************************************************
  614                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 19; ; **************************************************************************/
  615                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 21; // *************
  616                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 22; // Sprite defines ...
  617                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 23; // *************
  618                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 25; #define FLIP_X_MASK 0x08
  619                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 26; #define FLIP_Y_MASK 0x80
  620                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 27; #define FLIP_MAS    0x88
  621                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 28; #define SIZE_MAS    0x31
  622                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 30; #define NO_FLIP     0x00
  623                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 31; #define NO_FLIP_X   0x00
  624                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 32; #define NO_FLIP_Y   0x00
  625                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 33; #define FLIP_X      0x08
  626                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 34; #define FLIP_Y      0x80
  627                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 35; #define SZ_16x16    0x00
  628                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 36; #define SZ_16x32    0x10
  629                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 37; #define SZ_16x64    0x30
  630                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 38; #define SZ_32x16    0x01
  631                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 39; #define SZ_32x32    0x11
  632                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 40; #define	SZ_32x64    0x31
  633                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 42; // *************
  634                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 43; // Functions in hucc-old-spr.asm ...
  635                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 44; // *************
  636                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 46; #ifdef __HUCC__
  637                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 48; #asmdef	HUCC_USES_OLD_SPR 1
  638               0001     	HUCC_USES_OLD_SPR = 1
  639                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 50; extern void __fastcall init_satb( void );
  640                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 51; extern void __fastcall reset_satb( void );
  641                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 52; extern void __fastcall satb_update( void );
  642                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 53; extern void __fastcall spr_set( unsigned char num<acc> );
  643                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 54; extern void __fastcall spr_hide( void );
  644                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 55; extern void __fastcall spr_show( void );
  645                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 56; extern void __fastcall spr_x( unsigned int value<acc> );
  646                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 57; extern void __fastcall spr_y( unsigned int value<acc> );
  647                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 58; extern void __fastcall spr_pattern( unsigned int vaddr<acc> );
  648                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 59; extern void __fastcall spr_ctrl( unsigned char mask<_al>, unsigned char value<acc> );
  649                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 60; extern void __fastcall spr_pal( unsigned char palette<acc> );
  650                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 61; extern void __fastcall spr_pri( unsigned char priority<acc> );
  651                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 63; extern unsigned int __fastcall spr_get_x( void );
  652                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 64; extern unsigned int __fastcall spr_get_y( void );
  653                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 66; extern void __fastcall sgx_init_satb( void );
  654                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 67; extern void __fastcall sgx_reset_satb( void );
  655                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 68; extern void __fastcall sgx_satb_update( void );
  656                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 69; extern void __fastcall sgx_spr_set( unsigned char num<acc> );
  657                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 70; extern void __fastcall sgx_spr_hide( void );
  658                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 71; extern void __fastcall sgx_spr_show( void );
  659                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 72; extern void __fastcall sgx_spr_x( unsigned int value<acc> );
  660                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 73; extern void __fastcall sgx_spr_y( unsigned int value<acc> );
  661                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 74; extern void __fastcall sgx_spr_pattern( unsigned int vaddr<acc> );
  662                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 75; extern void __fastcall sgx_spr_ctrl( unsigned char mask<_al>, unsigned char value<acc> );
  663                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 76; extern void __fastcall sgx_spr_pal( unsigned char palette<acc> );
  664                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 77; extern void __fastcall sgx_spr_pri( unsigned char priority<acc> );
  665                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 79; extern unsigned int __fastcall sgx_spr_get_x( void );
  666                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 80; extern unsigned int __fastcall sgx_spr_get_y( void );
  667                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 82; #endif // __HUCC__
  668                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 84; #endif // _hucc_old_spr_h
  669                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
  670                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 1; #ifndef _hucc_old_map_h
  671                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 2; #define _hucc_old_map_h
  672                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 4; /****************************************************************************
  673                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 5; ; ***************************************************************************
  674                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 6; ;
  675                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 7; ; hucc-old-map.h
  676                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 8; ;
  677                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 9; ; Based on the original HuC and MagicKit functions by David Michel and the
  678                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 10; ; other original HuC developers.
  679                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 11; ;
  680                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 12; ; Modifications copyright John Brandwood 2024.
  681                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 13; ;
  682                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 14; ; Distributed under the Boost Software License, Version 1.0.
  683                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 15; ; (See accompanying file LICENSE_1_0.txt or copy at
  684                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 16; ;  http://www.boost.org/LICENSE_1_0.txt)
  685                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 17; ;
  686                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 18; ; ***************************************************************************
  687                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 19; ; **************************************************************************/
  688                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 21; // *************
  689                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 22; // Functions in hucc-old-map.asm ...
  690                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 23; // *************
  691                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 25; #ifdef __HUCC__
  692                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 27; #asmdef	HUCC_USES_OLD_MAP 1
  693               0001     	HUCC_USES_OLD_MAP = 1
  694                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 29; extern void __fastcall set_tile_address( unsigned int vram<_di> );
  695                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 30; extern void __fastcall sgx_set_tile_address( unsigned int vram<_di> );
  696                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 32; extern void __fastcall __nop set_tile_data( unsigned char __far *tiles<vdc_tile_bank:vdc_tile_addr>, unsigned char num_tiles<vdc_num_tiles>, unsigned char __far *palette_table<vdc_attr_bank:vdc_attr_addr>, unsigned char tile_type<vdc_tile_type> );
  697                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 33; extern void __fastcall __nop sgx_set_tile_data( unsigned char __far *tiles<sgx_tile_bank:sgx_tile_addr>, unsigned char num_tiles<sgx_num_tiles>, unsigned char __far *palette_table<sgx_attr_bank:sgx_attr_addr>, unsigned char tile_type<sgx_tile_type> );
  698                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 35; extern void __fastcall __nop set_far_tile_data( unsigned char tile_bank<vdc_tile_bank>, unsigned char *tile_addr<vdc_tile_addr>, unsigned char num_tiles<vdc_num_tiles>, unsigned char palette_table_bank<vdc_attr_bank>, unsigned char *palette_table_addr<vdc_attr_addr>, unsigned char tile_type<vdc_tile_type> );
  699                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 36; extern void __fastcall __nop sgx_set_far_tile_data( unsigned char tile_bank<sgx_tile_bank>, unsigned char *tile_addr<sgx_tile_addr>, unsigned char num_tiles<sgx_num_tiles>, unsigned char palette_table_bank<sgx_attr_bank>, unsigned char *palette_table_addr<sgx_attr_addr>, unsigned char tile_type<sgx_tile_type> );
  700                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 38; extern void __fastcall __nop set_map_data( unsigned char __far *map<vdc_map_bank:vdc_map_addr>, unsigned char w<vdc_map_width>, unsigned char h<vdc_map_height> );
  701                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 39; extern void __fastcall __nop sgx_set_map_data( unsigned char __far *map<sgx_map_bank:sgx_map_addr>, unsigned char w<sgx_map_width>, unsigned char h<sgx_map_height> );
  702                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 41; extern void __fastcall __nop set_far_map_data( unsigned char map_bank<vdc_map_bank>, unsigned char *map_addr<vdc_map_addr>, unsigned char w<vdc_map_width>, unsigned char h<vdc_map_height> );
  703                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 42; extern void __fastcall __nop sgx_set_far_map_data( unsigned char map_bank<vdc_map_bank>, unsigned char *map_addr<vdc_map_addr>, unsigned char w<sgx_map_width>, unsigned char h<sgx_map_height> );
  704                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 44; extern void __fastcall load_tile( unsigned int vram<_di> );
  705                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 45; extern void __fastcall sgx_load_tile( unsigned int vram<_di> );
  706                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 47; extern void __fastcall load_map( unsigned char bat_x<_al>, unsigned char bat_y<_ah>, int map_x<_bx>, int map_y<_dx>, unsigned char tiles_w<_cl>, unsigned char tiles_h<_ch> );
  707                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 48; extern void __fastcall sgx_load_map( unsigned char bat_x<_al>, unsigned char bat_y<_ah>, int map_x<_bx>, int map_y<_dx>, unsigned char tiles_w<_cl>, unsigned char tiles_h<_ch> );
  708                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 50; extern unsigned char __fastcall map_get_tile( unsigned char map_x<_bl>, unsigned char map_y<_bh> );
  709                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 51; extern unsigned char __fastcall sgx_map_get_tile( unsigned char map_x<_bl>, unsigned char map_y<_bh> );
  710                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 53; extern void __fastcall map_put_tile( unsigned char map_x<_bl>, unsigned char map_y<_bh>, unsigned char tile<_al> );
  711                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 54; extern void __fastcall sgx_map_put_tile( unsigned char map_x<_bl>, unsigned char map_y<_bh>, unsigned char tile<_al> );
  712                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 56; extern void __fastcall put_tile( unsigned char tile<_bl>, unsigned char bat_x<_al>, unsigned char bat_y<_ah> );
  713                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 57; extern void __fastcall sgx_put_tile( unsigned char tile<_bl>, unsigned char bat_x<_al>, unsigned char bat_y<_ah> );
  714                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 59; // Deprecated functions ...
  715                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 61; extern void __fastcall set_tile_data( unsigned char *tile_ex<_di> );
  716                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 63; extern void __fastcall __nop set_map_pals( unsigned char __far *palette_table<vdc_attr_bank:vdc_attr_addr> );
  717                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 64; extern void __fastcall __nop set_map_tile_type( unsigned char tile_type<vdc_tile_type> );
  718                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 66; extern void __fastcall __nop sgx_set_map_pals( unsigned char __far *palette_table<sgx_attr_bank:sgx_attr_addr> );
  719                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 67; extern void __fastcall __nop sgx_set_map_tile_type( unsigned char tile_type<sgx_tile_type> );
  720                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 69; extern void __fastcall set_map_tile_base( unsigned int vram<_di> );
  721                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 70; extern void __fastcall sgx_set_map_tile_base( unsigned int vram<_di> );
  722                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 72; #endif // __HUCC__
  723                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 74; #endif // _hucc_old_map_h
  724                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
  725                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 1; #ifndef _hucc_old_line_h
  726                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 2; #define _hucc_old_line_h
  727                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 4; /****************************************************************************
  728                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 5; ; ***************************************************************************
  729                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 6; ;
  730                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 7; ; hucc-old-line.h
  731                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 8; ;
  732                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 9; ; Based on the original HuC and MagicKit functions by David Michel and the
  733                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 10; ; other original HuC developers.
  734                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 11; ;
  735                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 12; ; Modifications copyright John Brandwood 2024.
  736                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 13; ;
  737                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 14; ; Distributed under the Boost Software License, Version 1.0.
  738                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 15; ; (See accompanying file LICENSE_1_0.txt or copy at
  739                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 16; ;  http://www.boost.org/LICENSE_1_0.txt)
  740                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 17; ;
  741                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 18; ; ***************************************************************************
  742                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 19; ; **************************************************************************/
  743                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 21; // *************
  744                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 22; // Functions in hucc-old-line.asm ...
  745                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 23; // *************
  746                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 25; #ifdef __HUCC__
  747                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 27; #asmdef	HUCC_USES_OLD_LINE 1
  748               0001     	HUCC_USES_OLD_LINE = 1
  749                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 29; extern void __fastcall gfx_init( unsigned int start_vram_addr<_ax> );
  750                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 30; extern void __fastcall gfx_clear( unsigned int start_vram_addr<_di> );
  751                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 31; extern void __fastcall gfx_plot( unsigned int x<_gfx_x1>, unsigned int y<_gfx_y1>, char color<_gfx_color> );
  752                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 32; extern void __fastcall gfx_line( unsigned int x1<_gfx_x1>, unsigned int y1<_gfx_y1>, unsigned int x2<_gfx_x2>, unsigned int y2<_gfx_y2>, unsigned char color<_gfx_color> );
  753                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 34; #endif // __HUCC__
  754                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 36; #endif // _hucc_old_line_h
  755                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
  756                        		.dbg	line,	"main.c", 1; #include "huc.h"
  757                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
  758                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
  759                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
  760                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
  761                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
  762                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
  763                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
  764                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
  765                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
  766                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
  767                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
  768                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
  769                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
  770                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
  771                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
  772                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
  773                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
  774                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
  775                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
  776                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
  777                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
  778                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
  779                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
  780                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
  781                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
  782                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
  783                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
  784                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
  785                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
  786                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
  787                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
  788                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
  789                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
  790                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
  791                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
  792                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
  793                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
  794                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
  795                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
  796                        		.dbg	line,	"main.c", 2; #include "hucc-scroll.h"
  797                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 1; #ifndef _hucc_scroll_h
  798                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 2; #define _hucc_scroll_h
  799                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 4; /****************************************************************************
  800                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 5; ; ***************************************************************************
  801                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 6; ;
  802                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 7; ; hucc-scroll.h
  803                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 8; ;
  804                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 9; ; Routines for a fast split-screen scrolling system.
  805                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 10; ;
  806                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 11; ; Copyright John Brandwood 2024.
  807                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 12; ;
  808                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 13; ; Distributed under the Boost Software License, Version 1.0.
  809                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
  810                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
  811                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 16; ;
  812                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 17; ; ***************************************************************************
  813                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 18; ; ***************************************************************************
  814                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 19; ;
  815                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 20; ; The maximum number of splits for each screen layer is set in your project's
  816                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 21; ; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
  817                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 22; ;
  818                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 23; ; Your first active split must be defined to start at screen line 0, and then
  819                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 24; ; the rest of the active splits must be in increasing line order to match the
  820                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 25; ; way that the PC Engine displays the output image.
  821                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 26; ;
  822                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 27; ; You can have disabled splits interleaved with your active splits.
  823                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 28; ;
  824                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 29; ; Splits that are normally disabled can be used to create full screen effects
  825                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 30; ; such as bouncing the screen up and down by adding blank areas at the top or
  826                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 31; ; bottom of the screen, and then rapidly changing the height of those areas.
  827                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 32; ;
  828                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 33; ; ***************************************************************************
  829                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 34; ; **************************************************************************/
  830                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 36; // *************
  831                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 37; // VDC bits for display_flags ...
  832                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 38; // *************
  833                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 40; #ifndef BKG_OFF
  834                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 41; #define BKG_OFF 0x00
  835                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 42; #endif
  836                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 44; #ifndef SPR_OFF
  837                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 45; #define SPR_OFF 0x00
  838                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 46; #endif
  839                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 48; #ifndef BKG_ON
  840                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 49; #define BKG_ON 0x80
  841                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 50; #endif
  842                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 52; #ifndef SPR_ON
  843                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 53; #define SPR_ON 0x40
  844                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 54; #endif
  845                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 56; // *************
  846                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 57; // Functions in hucc-scroll.asm ...
  847                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 58; // *************
  848                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 60; #ifdef __HUCC__
  849                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 62; #asmdef	HUCC_USES_NEW_SCROLL 1
  850               0001     	HUCC_USES_NEW_SCROLL = 1
  851                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 64; extern void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
  852                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 65; extern void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
  853                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 67; extern void __fastcall disable_split( unsigned char index<acc> );
  854                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 68; extern void __fastcall sgx_disable_split( unsigned char index<acc> );
  855                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 70; extern void __fastcall __macro disable_all_splits( void );
  856                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 71; extern void __fastcall __macro sgx_disable_all_splits( void );
  857                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 73; #asm
  858                        		.dbg	clear
  859                        			.macro	_disable_all_splits
  860                        			ldy	#HUCC_PCE_SPLITS - 1
  861                        	!loop:		tya
  862                        			call	_disable_split.1
  863                        			dey
  864                        			bpl	!loop-
  865                        			.endm
  866                        			.macro	_sgx_disable_all_splits
  867                        			ldy	#HUCC_SGX_SPLITS - 1
  868                        	!loop:		tya
  869                        			call	_sgx_disable_split.1
  870                        			dey
  871                        			bpl	!loop-
  872                        			.endm
  873                        	
  874                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 89; #endasm
  875                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 91; #endif // __HUCC__
  876                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 93; #endif // _hucc_scroll_h
  877                        		.dbg	line,	"main.c", 3; #include "hucc-chrmap.h"
  878                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 1; #ifndef _hucc_chrmap_h
  879                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 2; #define _hucc_chrmap_h
  880                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 4; /****************************************************************************
  881                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 5; ; ***************************************************************************
  882                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 6; ;
  883                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 7; ; hucc-chrmap.h
  884                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 8; ;
  885                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 9; ; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
  886                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 10; ;
  887                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 11; ; Copyright John Brandwood 2025.
  888                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 12; ;
  889                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
  890                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
  891                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
  892                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 16; ;
  893                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 17; ; ***************************************************************************
  894                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 18; ; ***************************************************************************
  895                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 19; ;
  896                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 20; ; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
  897                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 21; ;
  898                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 22; ; The maximum total size for a chrmap is 16KBytes, which allows for maps up
  899                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 23; ; to 256x32 tiles (2048x256 pixels).
  900                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 24; ;
  901                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 25; ; ***************************************************************************
  902                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 26; ; **************************************************************************/
  903                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 28; // *************
  904                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 29; // This code extends the blkmap library ...
  905                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 30; // *************
  906                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 32; #include "hucc-blkmap.h"
  907                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
  908                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
  909                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
  910                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
  911                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
  912                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
  913                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
  914                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
  915                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
  916                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
  917                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
  918                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
  919                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
  920                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
  921                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
  922                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
  923                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
  924                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
  925                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
  926                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
  927                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
  928                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
  929                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
  930                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
  931                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
  932                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
  933                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
  934                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
  935                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
  936                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
  937                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
  938                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
  939                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
  940                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
  941                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
  942                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
  943                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
  944               0001     	HUCC_USES_BLKMAP = 1
  945                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
  946                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
  947                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
  948                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
  949                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
  950                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
  951                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
  952                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
  953                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
  954                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
  955                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
  956                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
  957                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
  958                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
  959                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
  960                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
  961                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
  962                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
  963                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
  964                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
  965                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
  966                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
  967                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
  968                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
  969                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
  970                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
  971                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
  972                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
  973                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
  974                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
  975                        		.dbg	clear
  976                        			.macro	_set_blkmap.2
  977                        			stz	vdc_scr_bank
  978                        			.endm
  979                        			.macro	_set_multimap.2
  980                        			lda	vdc_bat_width
  981                        			lsr	a
  982                        			sta	vdc_map_line_w
  983                        			.endm
  984                        			.macro	SCREEN
  985                        			db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
  986                        			db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
  987                        			db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
  988                        			dw	(\4)
  989                        			.endm
  990                        	
  991                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
  992                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
  993                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
  994                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
  995                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
  996                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
  997                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
  998                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
  999                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
 1000                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
 1001                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
 1002                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
 1003                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
 1004                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
 1005                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
 1006                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
 1007                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
 1008                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
 1009                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
 1010                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
 1011                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
 1012                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
 1013                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
 1014                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
 1015                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
 1016                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1017                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 1018                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
 1019                        		.dbg	clear
 1020                        			.macro	_sgx_set_blkmap.2
 1021                        			stz	sgx_scr_bank
 1022                        			.endm
 1023                        			.macro	_sgx_set_multimap.2
 1024                        			lda	sgx_bat_width
 1025                        			lsr	a
 1026                        			sta	sgx_map_line_w
 1027                        			.endm
 1028                        	
 1029                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
 1030                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
 1031                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
 1032                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
 1033                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 34; // *************
 1034                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 35; // Functions in chrmap.asm ...
 1035                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 36; // *************
 1036                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 38; #ifdef __HUCC__
 1037                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 40; #asmdef	HUCC_USES_CHRMAP 1
 1038               0001     	HUCC_USES_CHRMAP = 1
 1039                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 42; extern void __fastcall __nop set_chrmap( unsigned char __far *chrmap<vdc_map_bank:vdc_map_addr>, unsigned char tiles_w<vdc_map_line_w> );
 1040                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 44; extern void __fastcall draw_bat( void );
 1041                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 45; extern void __fastcall scroll_bat( void );
 1042                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 47; extern void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1043                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 49; #ifdef _SGX
 1044                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 51; extern void __fastcall __nop sgx_set_chrmap( unsigned char __far *chrmap<sgx_map_bank:sgx_map_addr>, unsigned char tiles_w<sgx_map_line_w> );
 1045                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 53; extern void __fastcall sgx_draw_bat( void );
 1046                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 54; extern void __fastcall sgx_scroll_bat( void );
 1047                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 56; extern void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1048                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 58; #endif
 1049                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 60; #endif // __HUCC__
 1050                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 62; #endif // _hucc_chrmap_h
 1051                        		.dbg	line,	"main.c", 4; #include "hucc-blkmap.h"
 1052                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
 1053                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
 1054                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
 1055                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
 1056                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
 1057                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
 1058                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
 1059                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
 1060                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
 1061                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
 1062                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
 1063                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1064                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1065                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1066                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
 1067                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
 1068                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
 1069                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
 1070                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
 1071                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
 1072                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
 1073                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
 1074                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
 1075                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
 1076                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
 1077                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
 1078                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
 1079                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
 1080                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
 1081                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
 1082                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
 1083                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
 1084                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
 1085                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
 1086                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
 1087                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
 1088                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
 1089                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
 1090                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
 1091                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
 1092                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
 1093                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
 1094                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
 1095                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
 1096                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
 1097                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
 1098                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
 1099                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
 1100                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
 1101                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
 1102                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
 1103                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
 1104                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
 1105                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
 1106                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
 1107                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
 1108                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
 1109                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
 1110                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
 1111                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
 1112                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
 1113                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
 1114                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
 1115                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
 1116                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1117                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 1118                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
 1119                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 86; .macro	_set_blkmap.2
 1120                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 87; stz	vdc_scr_bank
 1121                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 88; .endm
 1122                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 90; .macro	_set_multimap.2
 1123                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 91; lda	vdc_bat_width
 1124                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 92; lsr	a
 1125                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 93; sta	vdc_map_line_w
 1126                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 94; .endm
 1127                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 96; .macro	SCREEN
 1128                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 97; db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
 1129                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 98; db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
 1130                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 99; db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
 1131                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 100; dw	(\4)
 1132                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 101; .endm
 1133                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
 1134                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
 1135                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
 1136                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
 1137                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
 1138                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
 1139                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
 1140                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
 1141                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
 1142                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
 1143                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
 1144                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
 1145                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
 1146                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
 1147                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
 1148                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
 1149                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
 1150                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
 1151                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
 1152                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
 1153                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
 1154                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
 1155                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
 1156                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
 1157                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
 1158                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1159                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 1160                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
 1161                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 144; .macro	_sgx_set_blkmap.2
 1162                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 145; stz	sgx_scr_bank
 1163                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 146; .endm
 1164                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 148; .macro	_sgx_set_multimap.2
 1165                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 149; lda	sgx_bat_width
 1166                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 150; lsr	a
 1167                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 151; sta	sgx_map_line_w
 1168                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 152; .endm
 1169                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
 1170                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
 1171                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
 1172                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
 1173                        		.dbg	line,	"main.c", 7; #include "include/constants.c"
 1174                        		.dbg	line,	"include\constants.c", 1; //*****************************************************************************//
 1175                        		.dbg	line,	"include\constants.c", 2; //                                                                             //
 1176                        		.dbg	line,	"include\constants.c", 3; //                                SYSTEM CONSTANTS                             //
 1177                        		.dbg	line,	"include\constants.c", 4; //                                                                             //
 1178                        		.dbg	line,	"include\constants.c", 5; //*****************************************************************************//
 1179                        		.dbg	line,	"include\constants.c", 7; #define FALSE 0
 1180                        		.dbg	line,	"include\constants.c", 8; #define TRUE  1
 1181                        		.dbg	line,	"include\constants.c", 10; #define YES   1
 1182                        		.dbg	line,	"include\constants.c", 11; #define NO    2
 1183                        		.dbg	line,	"include\constants.c", 13; #define JOYPAD_1 0
 1184                        		.dbg	line,	"include\constants.c", 14; #define JOYPAD_2 1
 1185                        		.dbg	line,	"include\constants.c", 16; #define BAT_SIZE_W 2048 // IN PIXELS
 1186                        		.dbg	line,	"include\constants.c", 17; #define BAT_SIZE_H 256  // IN PIXELS
 1187                        		.dbg	line,	"include\constants.c", 19; #define NUMBERS_FONT_VRAM_ADR   0x0900
 1188                        		.dbg	line,	"include\constants.c", 21; #define JOY_DIR_PRESSED (JOY_DOWN | JOY_UP | JOY_RIGHT | JOY_LEFT)
 1189                        		.dbg	line,	"include\constants.c", 24; #define TILES_1   16
 1190                        		.dbg	line,	"include\constants.c", 25; #define TILES_2   32
 1191                        		.dbg	line,	"include\constants.c", 26; #define TILES_3   48
 1192                        		.dbg	line,	"include\constants.c", 27; #define TILES_4   64
 1193                        		.dbg	line,	"include\constants.c", 28; #define TILES_8   128
 1194                        		.dbg	line,	"include\constants.c", 29; #define TILES_12  192
 1195                        		.dbg	line,	"include\constants.c", 30; #define TILES_16  256
 1196                        		.dbg	line,	"include\constants.c", 31; #define TILES_24  384
 1197                        		.dbg	line,	"include\constants.c", 32; #define TILES_32  512
 1198                        		.dbg	line,	"include\constants.c", 33; #define TILES_48  768
 1199                        		.dbg	line,	"include\constants.c", 34; #define TILES_64  1024
 1200                        		.dbg	line,	"include\constants.c", 35; #define TILES_80  1280
 1201                        		.dbg	line,	"include\constants.c", 36; #define TILES_96  1536
 1202                        		.dbg	line,	"include\constants.c", 37; #define TILES_144 2304
 1203                        		.dbg	line,	"include\constants.c", 38; #define TILES_160 2560
 1204                        		.dbg	line,	"include\constants.c", 39; #define TILES_400 6400
 1205                        		.dbg	line,	"include\constants.c", 44; #define SEQUENCE_TITLE      0
 1206                        		.dbg	line,	"include\constants.c", 45; #define SEQUENCE_INTRO      1
 1207                        		.dbg	line,	"include\constants.c", 46; #define SEQUENCE_GAME       2
 1208                        		.dbg	line,	"include\constants.c", 47; #define SEQUENCE_NPC        3
 1209                        		.dbg	line,	"include\constants.c", 48; #define SEQUENCE_SHOP       4
 1210                        		.dbg	line,	"include\constants.c", 51; #define CAMERA_RECENTER_VELOCITY    4
 1211                        		.dbg	line,	"include\constants.c", 56; //-----------------------------------------------------------------------------//
 1212                        		.dbg	line,	"include\constants.c", 57; //                                                                             //
 1213                        		.dbg	line,	"include\constants.c", 58; //                                   PLAYER                                    //
 1214                        		.dbg	line,	"include\constants.c", 59; //                                                                             //
 1215                        		.dbg	line,	"include\constants.c", 60; //-----------------------------------------------------------------------------//
 1216                        		.dbg	line,	"include\constants.c", 62; #define AXIS_RIGHT          0
 1217                        		.dbg	line,	"include\constants.c", 63; #define AXIS_LEFT           1
 1218                        		.dbg	line,	"include\constants.c", 64; #define AXIS_UP             2
 1219                        		.dbg	line,	"include\constants.c", 65; #define AXIS_DOWN           3
 1220                        		.dbg	line,	"include\constants.c", 69; #define STATE_IDLE          0
 1221                        		.dbg	line,	"include\constants.c", 70; #define STATE_WALK          1
 1222                        		.dbg	line,	"include\constants.c", 71; #define STATE_ATTACK        2
 1223                        		.dbg	line,	"include\constants.c", 72; #define STATE_JUMP          4
 1224                        		.dbg	line,	"include\constants.c", 73; #define STATE_JUMP_RIGHT    5
 1225                        		.dbg	line,	"include\constants.c", 74; #define STATE_JUMP_LEFT     6
 1226                        		.dbg	line,	"include\constants.c", 75; #define STATE_CROUCH        7
 1227                        		.dbg	line,	"include\constants.c", 76; #define STATE_CROUCH_ATTACK 8
 1228                        		.dbg	line,	"include\constants.c", 77; #define STATE_FALL          9
 1229                        		.dbg	line,	"include\constants.c", 78; #define STATE_HANG          10
 1230                        		.dbg	line,	"include\constants.c", 79; #define STATE_CLIMB_UP      11
 1231                        		.dbg	line,	"include\constants.c", 80; #define STATE_CLIMB_DOWN    12
 1232                        		.dbg	line,	"include\constants.c", 81; #define STATE_JUMP_LADDER   13
 1233                        		.dbg	line,	"include\constants.c", 82; #define STATE_HANG_ATTACK   14
 1234                        		.dbg	line,	"include\constants.c", 87; #define PLAYER_BASE_Y_POS   128
 1235                        		.dbg	line,	"include\constants.c", 89; #define RESPAWN_DEAD        1
 1236                        		.dbg	line,	"include\constants.c", 90; #define RESPAWN_SHOP        2
 1237                        		.dbg	line,	"include\constants.c", 92; #define PLAYER_START_INDEX  14
 1238                        		.dbg	line,	"include\constants.c", 96; #define PLAYER_VRAM_ADR                     0x1400
 1239                        		.dbg	line,	"include\constants.c", 97; #define PLAYER_IDLE_VRAM_ADR                PLAYER_VRAM_ADR
 1240                        		.dbg	line,	"include\constants.c", 98; #define PLAYER_WALK_1_VRAM_ADR              PLAYER_VRAM_ADR+TILES_16
 1241                        		.dbg	line,	"include\constants.c", 99; #define PLAYER_WALK_2_VRAM_ADR              PLAYER_WALK_1_VRAM_ADR+TILES_16
 1242                        		.dbg	line,	"include\constants.c", 100; #define PLAYER_WALK_3_VRAM_ADR              PLAYER_WALK_2_VRAM_ADR+TILES_16
 1243                        		.dbg	line,	"include\constants.c", 101; #define PLAYER_WALK_4_VRAM_ADR              PLAYER_WALK_3_VRAM_ADR+TILES_16
 1244                        		.dbg	line,	"include\constants.c", 102; #define PLAYER_WALK_5_VRAM_ADR              PLAYER_WALK_4_VRAM_ADR+TILES_16
 1245                        		.dbg	line,	"include\constants.c", 103; #define PLAYER_WALK_6_VRAM_ADR              PLAYER_WALK_5_VRAM_ADR+TILES_16
 1246                        		.dbg	line,	"include\constants.c", 105; #define PLAYER_JUMP_VRAM_ADR                PLAYER_WALK_6_VRAM_ADR+TILES_16
 1247                        		.dbg	line,	"include\constants.c", 106; #define PLAYER_CROUCH_VRAM_ADR              PLAYER_JUMP_VRAM_ADR+TILES_16
 1248                        		.dbg	line,	"include\constants.c", 107; #define PLAYER_HANG_VRAM_ADR                PLAYER_CROUCH_VRAM_ADR+TILES_16
 1249                        		.dbg	line,	"include\constants.c", 109; #define PLAYER_CLIMB_1_VRAM_ADR             PLAYER_HANG_VRAM_ADR+TILES_16
 1250                        		.dbg	line,	"include\constants.c", 110; #define PLAYER_CLIMB_2_VRAM_ADR             PLAYER_CLIMB_1_VRAM_ADR+TILES_16
 1251                        		.dbg	line,	"include\constants.c", 111; #define PLAYER_CLIMB_3_VRAM_ADR             PLAYER_CLIMB_2_VRAM_ADR+TILES_16
 1252                        		.dbg	line,	"include\constants.c", 112; #define PLAYER_CLIMB_4_VRAM_ADR             PLAYER_CLIMB_3_VRAM_ADR+TILES_16
 1253                        		.dbg	line,	"include\constants.c", 113; #define PLAYER_CLIMB_5_VRAM_ADR             PLAYER_CLIMB_4_VRAM_ADR+TILES_16
 1254                        		.dbg	line,	"include\constants.c", 114; #define PLAYER_CLIMB_6_VRAM_ADR             PLAYER_CLIMB_5_VRAM_ADR+TILES_16
 1255                        		.dbg	line,	"include\constants.c", 116; #define PLAYER_FALL_VRAM_ADR                PLAYER_CLIMB_6_VRAM_ADR+TILES_16
 1256                        		.dbg	line,	"include\constants.c", 118; #define PLAYER_ATTACK_1_VRAM_ADR            PLAYER_FALL_VRAM_ADR+TILES_16
 1257                        		.dbg	line,	"include\constants.c", 119; #define PLAYER_ATTACK_2_VRAM_ADR            PLAYER_ATTACK_1_VRAM_ADR+TILES_16
 1258                        		.dbg	line,	"include\constants.c", 121; #define PLAYER_CROUCH_ATTACK_1_VRAM_ADR     PLAYER_ATTACK_2_VRAM_ADR+TILES_16
 1259                        		.dbg	line,	"include\constants.c", 122; #define PLAYER_CROUCH_ATTACK_2_VRAM_ADR     PLAYER_CROUCH_ATTACK_1_VRAM_ADR+TILES_16
 1260                        		.dbg	line,	"include\constants.c", 124; #define PLAYER_JUMP_ATTACK_1_VRAM_ADR       PLAYER_CROUCH_ATTACK_2_VRAM_ADR+TILES_16
 1261                        		.dbg	line,	"include\constants.c", 125; #define PLAYER_JUMP_ATTACK_2_VRAM_ADR       PLAYER_JUMP_ATTACK_1_VRAM_ADR+TILES_16
 1262                        		.dbg	line,	"include\constants.c", 127; #define PLAYER_HANG_ATTACK_1_VRAM_ADR       PLAYER_JUMP_ATTACK_2_VRAM_ADR+TILES_16
 1263                        		.dbg	line,	"include\constants.c", 128; #define PLAYER_HANG_ATTACK_2_VRAM_ADR       PLAYER_HANG_ATTACK_1_VRAM_ADR+TILES_16
 1264                        		.dbg	line,	"include\constants.c", 133; //-----------------------------------------------------------------------------//
 1265                        		.dbg	line,	"include\constants.c", 134; //                                                                             //
 1266                        		.dbg	line,	"include\constants.c", 135; //                                  WEAPONS                                    //
 1267                        		.dbg	line,	"include\constants.c", 136; //                                                                             //
 1268                        		.dbg	line,	"include\constants.c", 137; //-----------------------------------------------------------------------------//
 1269                        		.dbg	line,	"include\constants.c", 139; #define CHAIN_VRAM_ADR                  0x7C00
 1270                        		.dbg	line,	"include\constants.c", 140; #define WEAPON_VRAM_ADR                 CHAIN_VRAM_ADR+TILES_4
 1271                        		.dbg	line,	"include\constants.c", 141; #define CHAIN_START_INDEX               PLAYER_START_INDEX-3
 1272                        		.dbg	line,	"include\constants.c", 143; #define WEAPON_IDLE_VRAM_ADRESS         WEAPON_VRAM_ADR
 1273                        		.dbg	line,	"include\constants.c", 144; #define WEAPON_WALK_1_VRAM_ADRESS       WEAPON_IDLE_VRAM_ADRESS+TILES_4
 1274                        		.dbg	line,	"include\constants.c", 145; #define WEAPON_WALK_2_VRAM_ADRESS       WEAPON_WALK_1_VRAM_ADRESS+TILES_4
 1275                        		.dbg	line,	"include\constants.c", 147; #define WEAPON_ATTACK_1_VRAM_ADRESS     WEAPON_WALK_2_VRAM_ADRESS+TILES_4
 1276                        		.dbg	line,	"include\constants.c", 148; #define WEAPON_ATTACK_2_VRAM_ADRESS     WEAPON_ATTACK_1_VRAM_ADRESS+TILES_4
 1277                        		.dbg	line,	"include\constants.c", 153; //-----------------------------------------------------------------------------//
 1278                        		.dbg	line,	"include\constants.c", 154; //                                                                             //
 1279                        		.dbg	line,	"include\constants.c", 155; //                                  COLLISIONS                                 //
 1280                        		.dbg	line,	"include\constants.c", 156; //                                                                             //
 1281                        		.dbg	line,	"include\constants.c", 157; //-----------------------------------------------------------------------------//
 1282                        		.dbg	line,	"include\constants.c", 159; #define TILE_EMPTY          0
 1283                        		.dbg	line,	"include\constants.c", 160; #define TILE_BG             1
 1284                        		.dbg	line,	"include\constants.c", 161; #define TILE_LADDER         2
 1285                        		.dbg	line,	"include\constants.c", 166; //-----------------------------------------------------------------------------//
 1286                        		.dbg	line,	"include\constants.c", 167; //                                                                             //
 1287                        		.dbg	line,	"include\constants.c", 168; //                                     HUD                                     //
 1288                        		.dbg	line,	"include\constants.c", 169; //                                                                             //
 1289                        		.dbg	line,	"include\constants.c", 170; //-----------------------------------------------------------------------------//
 1290                        		.dbg	line,	"include\constants.c", 172; #define LIFEBAR_1_VRAM_ADR      0x1000
 1291                        		.dbg	line,	"include\constants.c", 173; #define LIFEBAR_2_VRAM_ADR      LIFEBAR_1_VRAM_ADR+TILES_2
 1292                        		.dbg	line,	"include\constants.c", 174; #define LIFEBAR_3_VRAM_ADR      LIFEBAR_2_VRAM_ADR+TILES_2
 1293                        		.dbg	line,	"include\constants.c", 175; #define LIFEBAR_4_VRAM_ADR      LIFEBAR_3_VRAM_ADR+TILES_2
 1294                        		.dbg	line,	"include\constants.c", 176; #define LIFEBAR_5_VRAM_ADR      LIFEBAR_4_VRAM_ADR+TILES_2
 1295                        		.dbg	line,	"include\constants.c", 178; #define WEAPON_ICON_VRAM_ADR    LIFEBAR_5_VRAM_ADR+TILES_2
 1296                        		.dbg	line,	"include\constants.c", 179; #define ARMOR_VRAM_ADR          WEAPON_ICON_VRAM_ADR+TILES_4
 1297                        		.dbg	line,	"include\constants.c", 184; //-----------------------------------------------------------------------------//
 1298                        		.dbg	line,	"include\constants.c", 185; //                                                                             //
 1299                        		.dbg	line,	"include\constants.c", 186; //                                    LEVELS                                   //
 1300                        		.dbg	line,	"include\constants.c", 187; //                                                                             //
 1301                        		.dbg	line,	"include\constants.c", 188; //-----------------------------------------------------------------------------//
 1302                        		.dbg	line,	"include\constants.c", 190; #define LV1_WALL_VRAM_ADR       0x1000
 1303                        		.dbg	line,	"include\constants.c", 191; #define LV1_DOOR_VRAM_ADR       LV1_WALL_VRAM_ADR+256
 1304                        		.dbg	line,	"include\constants.c", 196; #define OBJECT_NUMBER_LV1       23
 1305                        		.dbg	line,	"include\constants.c", 197; #define CHEST_NUMBER_LV1        2
 1306                        		.dbg	line,	"include\constants.c", 198; #define NPC_NUMBER_LV1          2
 1307                        		.dbg	line,	"include\constants.c", 200; #define OBJECT_START_INDEX_LV1  0
 1308                        		.dbg	line,	"include\constants.c", 201; #define CHEST_START_INDEX_LV1   OBJECT_START_INDEX_LV1+OBJECT_NUMBER_LV1
 1309                        		.dbg	line,	"include\constants.c", 202; #define NPC_START_INDEX_LV1     CHEST_START_INDEX_LV1+CHEST_NUMBER_LV1
 1310                        		.dbg	line,	"include\constants.c", 207; //-----------------------------------------------------------------------------//
 1311                        		.dbg	line,	"include\constants.c", 208; //                                                                             //
 1312                        		.dbg	line,	"include\constants.c", 209; //                                   OBJECT                                    //
 1313                        		.dbg	line,	"include\constants.c", 210; //                                                                             //
 1314                        		.dbg	line,	"include\constants.c", 211; //-----------------------------------------------------------------------------//
 1315                        		.dbg	line,	"include\constants.c", 213; #define TYPE_HOURGLASS          0
 1316                        		.dbg	line,	"include\constants.c", 214; #define TYPE_POT                1
 1317                        		.dbg	line,	"include\constants.c", 215; #define TYPE_POW                2
 1318                        		.dbg	line,	"include\constants.c", 216; #define TYPE_CHEST              3
 1319                        		.dbg	line,	"include\constants.c", 217; #define TYPE_GRAY_KEY           4
 1320                        		.dbg	line,	"include\constants.c", 218; #define TYPE_GOLD_KEY           5
 1321                        		.dbg	line,	"include\constants.c", 219; #define TYPE_1UP                6
 1322                        		.dbg	line,	"include\constants.c", 220; #define TYPE_COIN_1             7
 1323                        		.dbg	line,	"include\constants.c", 221; #define TYPE_COIN_5             8
 1324                        		.dbg	line,	"include\constants.c", 222; #define TYPE_COIN_10            9
 1325                        		.dbg	line,	"include\constants.c", 223; #define TYPE_COIN_50            10
 1326                        		.dbg	line,	"include\constants.c", 224; #define TYPE_COIN_100           11
 1327                        		.dbg	line,	"include\constants.c", 225; #define TYPE_COIN_500           12
 1328                        		.dbg	line,	"include\constants.c", 226; #define TYPE_COIN_1000          13
 1329                        		.dbg	line,	"include\constants.c", 227; #define TYPE_YASHICHI           14
 1330                        		.dbg	line,	"include\constants.c", 230; #define STATE_ACTIVE            0
 1331                        		.dbg	line,	"include\constants.c", 231; #define STATE_INACTIVE          1
 1332                        		.dbg	line,	"include\constants.c", 233; #define OBJECT_MARGIN           10//9
 1333                        		.dbg	line,	"include\constants.c", 236; #define POT1_VRAM_ADR           0x6800
 1334                        		.dbg	line,	"include\constants.c", 237; #define POT2_VRAM_ADR           POT1_VRAM_ADR+TILES_4
 1335                        		.dbg	line,	"include\constants.c", 238; #define POT3_VRAM_ADR           POT2_VRAM_ADR+TILES_4
 1336                        		.dbg	line,	"include\constants.c", 239; #define POT4_VRAM_ADR           POT3_VRAM_ADR+TILES_4
 1337                        		.dbg	line,	"include\constants.c", 240; #define POT5_VRAM_ADR           POT4_VRAM_ADR+TILES_4
 1338                        		.dbg	line,	"include\constants.c", 241; #define POT6_VRAM_ADR           POT5_VRAM_ADR+TILES_4
 1339                        		.dbg	line,	"include\constants.c", 242; #define POT7_VRAM_ADR           POT6_VRAM_ADR+TILES_4
 1340                        		.dbg	line,	"include\constants.c", 243; #define POT8_VRAM_ADR           POT7_VRAM_ADR+TILES_4
 1341                        		.dbg	line,	"include\constants.c", 245; #define POW_VRAM_ADR            POT8_VRAM_ADR+TILES_4
 1342                        		.dbg	line,	"include\constants.c", 246; #define GRAY_KEY_VRAM_ADR       POW_VRAM_ADR+TILES_4
 1343                        		.dbg	line,	"include\constants.c", 247; #define GOLD_KEY_VRAM_ADR       GRAY_KEY_VRAM_ADR+TILES_4
 1344                        		.dbg	line,	"include\constants.c", 248; #define LIFE_VRAM_ADR           GOLD_KEY_VRAM_ADR+TILES_4
 1345                        		.dbg	line,	"include\constants.c", 250; #define COIN_1_VRAM_ADR         LIFE_VRAM_ADR+TILES_4
 1346                        		.dbg	line,	"include\constants.c", 251; #define COIN_5_VRAM_ADR         COIN_1_VRAM_ADR+TILES_4
 1347                        		.dbg	line,	"include\constants.c", 252; #define COIN_10_VRAM_ADR        COIN_5_VRAM_ADR+TILES_4
 1348                        		.dbg	line,	"include\constants.c", 253; #define COIN_50_VRAM_ADR        COIN_10_VRAM_ADR+TILES_4
 1349                        		.dbg	line,	"include\constants.c", 254; #define COIN_100_VRAM_ADR       COIN_50_VRAM_ADR+TILES_4
 1350                        		.dbg	line,	"include\constants.c", 255; #define COIN_500_VRAM_ADR       COIN_100_VRAM_ADR+TILES_4
 1351                        		.dbg	line,	"include\constants.c", 256; #define COIN_1000_VRAM_ADR      COIN_500_VRAM_ADR+TILES_4
 1352                        		.dbg	line,	"include\constants.c", 258; #define STAR_VRAM_ADR           COIN_1000_VRAM_ADR+TILES_4
 1353                        		.dbg	line,	"include\constants.c", 259; #define OCTOPUS_VRAM_ADR        STAR_VRAM_ADR+TILES_4
 1354                        		.dbg	line,	"include\constants.c", 260; #define FRUIT_VRAM_ADR          OCTOPUS_VRAM_ADR+TILES_4
 1355                        		.dbg	line,	"include\constants.c", 261; #define BARREL_VRAM_ADR         FRUIT_VRAM_ADR+TILES_4
 1356                        		.dbg	line,	"include\constants.c", 262; #define HOURGLASS_VRAM_ADR      BARREL_VRAM_ADR+TILES_4
 1357                        		.dbg	line,	"include\constants.c", 263; #define BAMBOO_VRAM_ADR         HOURGLASS_VRAM_ADR+TILES_4
 1358                        		.dbg	line,	"include\constants.c", 264; #define YASHICHI_VRAM_ADR       BAMBOO_VRAM_ADR+TILES_4
 1359                        		.dbg	line,	"include\constants.c", 265; #define ELEPHANT_VRAM_ADR       YASHICHI_VRAM_ADR+TILES_4
 1360                        		.dbg	line,	"include\constants.c", 266; #define DRAGONFLY_VRAM_ADR      ELEPHANT_VRAM_ADR+TILES_4
 1361                        		.dbg	line,	"include\constants.c", 267; #define COW_VRAM_ADR            DRAGONFLY_VRAM_ADR+TILES_4
 1362                        		.dbg	line,	"include\constants.c", 268; #define MOBICHAN_VRAM_ADR       COW_VRAM_ADR+TILES_4
 1363                        		.dbg	line,	"include\constants.c", 270; #define CHEST_VRAM_ADR          0x7000
 1364                        		.dbg	line,	"include\constants.c", 271; #define NPC_VRAM_ADR            CHEST_VRAM_ADR+TILES_96
 1365                        		.dbg	line,	"include\constants.c", 276; //-----------------------------------------------------------------------------//
 1366                        		.dbg	line,	"include\constants.c", 277; //                                                                             //
 1367                        		.dbg	line,	"include\constants.c", 278; //                                    NPC                                      //
 1368                        		.dbg	line,	"include\constants.c", 279; //                                                                             //
 1369                        		.dbg	line,	"include\constants.c", 280; //-----------------------------------------------------------------------------//
 1370                        		.dbg	line,	"include\constants.c", 282; #define TYPE_NPC_REWARD         0
 1371                        		.dbg	line,	"include\constants.c", 283; #define TYPE_NPC_SHOP           1
 1372                        		.dbg	line,	"include\constants.c", 288; //-----------------------------------------------------------------------------//
 1373                        		.dbg	line,	"include\constants.c", 289; //                                                                             //
 1374                        		.dbg	line,	"include\constants.c", 290; //                                    SHOP                                     //
 1375                        		.dbg	line,	"include\constants.c", 291; //                                                                             //
 1376                        		.dbg	line,	"include\constants.c", 292; //-----------------------------------------------------------------------------//
 1377                        		.dbg	line,	"include\constants.c", 294; #define SHOP_PHASE_ENTER        0
 1378                        		.dbg	line,	"include\constants.c", 295; #define SHOP_PHASE_BUY          1
 1379                        		.dbg	line,	"include\constants.c", 296; #define SHOP_PHASE_EXIT         2
 1380                        		.dbg	line,	"include\constants.c", 298; #define TYPE_ITEM_WEAPON_2      0
 1381                        		.dbg	line,	"include\constants.c", 299; #define TYPE_ITEM_WEAPON_3      1
 1382                        		.dbg	line,	"include\constants.c", 300; #define TYPE_ITEM_WEAPON_4      2
 1383                        		.dbg	line,	"include\constants.c", 301; #define TYPE_ITEM_WEAPON_5      3
 1384                        		.dbg	line,	"include\constants.c", 302; #define TYPE_ITEM_KEY           4
 1385                        		.dbg	line,	"include\constants.c", 304; #define TYPE_ITEM_ARMOR_2       5
 1386                        		.dbg	line,	"include\constants.c", 305; #define TYPE_ITEM_ARMOR_3       6
 1387                        		.dbg	line,	"include\constants.c", 306; #define TYPE_ITEM_ARMOR_4       7
 1388                        		.dbg	line,	"include\constants.c", 307; #define TYPE_ITEM_ARMOR_5       8
 1389                        		.dbg	line,	"include\constants.c", 308; #define TYPE_ITEM_POTION        9
 1390                        		.dbg	line,	"include\constants.c", 313; //-----------------------------------------------------------------------------//
 1391                        		.dbg	line,	"include\constants.c", 314; //                                                                             //
 1392                        		.dbg	line,	"include\constants.c", 315; //                                   ENEMIES                                   //
 1393                        		.dbg	line,	"include\constants.c", 316; //                                                                             //
 1394                        		.dbg	line,	"include\constants.c", 317; //-----------------------------------------------------------------------------//
 1395                        		.dbg	line,	"include\constants.c", 319; //-----------------------------------------------------------------------------//
 1396                        		.dbg	line,	"include\constants.c", 320; //                                     ORC                                     //
 1397                        		.dbg	line,	"include\constants.c", 321; //-----------------------------------------------------------------------------//
 1398                        		.dbg	line,	"include\constants.c", 323; #define ORC_VRAM_ADR                     PLAYER_HANG_ATTACK_2_VRAM_ADR+TILES_16
 1399                        		.dbg	line,	"include\constants.c", 325; #define ORC_WALK_1_VRAM_ADR              ORC_VRAM_ADR
 1400                        		.dbg	line,	"include\constants.c", 326; #define ORC_WALK_2_VRAM_ADR              ORC_WALK_1_VRAM_ADR+TILES_16
 1401                        		.dbg	line,	"include\constants.c", 327; #define ORC_WALK_3_VRAM_ADR              ORC_WALK_2_VRAM_ADR+TILES_16
 1402                        		.dbg	line,	"include\constants.c", 328; #define ORC_ATTACK_1_VRAM_ADR            ORC_WALK_3_VRAM_ADR+TILES_16
 1403                        		.dbg	line,	"include\constants.c", 330; #define ORC_ATTACK_2_VRAM_ADR            ORC_ATTACK_1_VRAM_ADR+TILES_16
 1404                        		.dbg	line,	"include\constants.c", 331; #define ORC_ATTACK_3_VRAM_ADR            ORC_ATTACK_2_VRAM_ADR+TILES_16
 1405                        		.dbg	line,	"include\constants.c", 332; #define ORC_ATTACK_4_VRAM_ADR            ORC_ATTACK_3_VRAM_ADR+TILES_16
 1406                        		.dbg	line,	"include\constants.c", 333; #define ORC_ATTACK_5_VRAM_ADR            ORC_ATTACK_4_VRAM_ADR+TILES_16
 1407                        		.dbg	line,	"include\constants.c", 334; #define ORC_ATTACK_6_VRAM_ADR            ORC_ATTACK_5_VRAM_ADR+TILES_16
 1408                        		.dbg	line,	"include\constants.c", 336; #define ORC_DEAD_1_VRAM_ADR              ORC_ATTACK_6_VRAM_ADR+TILES_16
 1409                        		.dbg	line,	"include\constants.c", 337; #define ORC_DEAD_2_VRAM_ADR              ORC_DEAD_1_VRAM_ADR+TILES_16
 1410                        		.dbg	line,	"include\constants.c", 338; #define ORC_DEAD_3_VRAM_ADR              ORC_DEAD_2_VRAM_ADR+TILES_16
 1411                        		.dbg	line,	"include\constants.c", 339; #define ORC_DEAD_4_VRAM_ADR              ORC_DEAD_3_VRAM_ADR+TILES_16
 1412                        		.dbg	line,	"include\constants.c", 341; #define ORC_AXE_1_VRAM_ADR               ORC_DEAD_4_VRAM_ADR+TILES_16
 1413                        		.dbg	line,	"include\constants.c", 342; #define ORC_AXE_2_VRAM_ADR               ORC_AXE_1_VRAM_ADR+TILES_4
 1414                        		.dbg	line,	"include\constants.c", 343; #define ORC_AXE_3_VRAM_ADR               ORC_AXE_2_VRAM_ADR+TILES_4
 1415                        		.dbg	line,	"include\constants.c", 344; #define ORC_AXE_4_VRAM_ADR               ORC_AXE_3_VRAM_ADR+TILES_4
 1416                        		.dbg	line,	"include\constants.c", 345; #define ORC_AXE_5_VRAM_ADR               ORC_AXE_4_VRAM_ADR+TILES_4
 1417                        		.dbg	line,	"include\constants.c", 346; #define ORC_AXE_6_VRAM_ADR               ORC_AXE_5_VRAM_ADR+TILES_4
 1418                        		.dbg	line,	"include\constants.c", 349; //-----------------------------------------------------------------------------//
 1419                        		.dbg	line,	"include\constants.c", 350; //                                                                             //
 1420                        		.dbg	line,	"include\constants.c", 351; //                                   SERPENT                                   //
 1421                        		.dbg	line,	"include\constants.c", 352; //                                                                             //
 1422                        		.dbg	line,	"include\constants.c", 353; //-----------------------------------------------------------------------------//
 1423                        		.dbg	line,	"include\constants.c", 355; #define SERPENT_VRAM_ADR                    ORC_AXE_6_VRAM_ADR+TILES_4
 1424                        		.dbg	line,	"include\constants.c", 356; #define SERPENT_LEFT_VRAM_ADR               SERPENT_VRAM_ADR
 1425                        		.dbg	line,	"include\constants.c", 357; #define SERPENT_FRONT_VRAM_ADR              SERPENT_LEFT_VRAM_ADR+TILES_16
 1426                        		.dbg	line,	"include\constants.c", 358; #define SERPENT_RIGHT_VRAM_ADR              SERPENT_FRONT_VRAM_ADR+TILES_16
 1427                        		.dbg	line,	"include\constants.c", 359; #define SERPENT_ATTACK_LEFT_VRAM_ADR        SERPENT_RIGHT_VRAM_ADR+TILES_16
 1428                        		.dbg	line,	"include\constants.c", 360; #define SERPENT_ATTACK_FRONT_VRAM_ADR       SERPENT_ATTACK_LEFT_VRAM_ADR+TILES_16
 1429                        		.dbg	line,	"include\constants.c", 361; #define SERPENT_ATTACK_RIGHT_VRAM_ADR       SERPENT_ATTACK_FRONT_VRAM_ADR+TILES_16
 1430                        		.dbg	line,	"include\constants.c", 364; //-----------------------------------------------------------------------------//
 1431                        		.dbg	line,	"include\constants.c", 365; //                                                                             //
 1432                        		.dbg	line,	"include\constants.c", 366; //                                    PLANT                                    //
 1433                        		.dbg	line,	"include\constants.c", 367; //                                                                             //
 1434                        		.dbg	line,	"include\constants.c", 368; //-----------------------------------------------------------------------------//
 1435                        		.dbg	line,	"include\constants.c", 370; #define PLANT_VRAM_ADR                      SERPENT_ATTACK_RIGHT_VRAM_ADR+TILES_16
 1436                        		.dbg	line,	"include\constants.c", 371; #define PLANT_IDLE_VRAM_ADR                 PLANT_VRAM_ADR
 1437                        		.dbg	line,	"main.c", 8; #include "include/variables.c"
 1438                        		.dbg	line,	"include\variables.c", 1; #include "huc.h"
 1439                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
 1440                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
 1441                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
 1442                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
 1443                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
 1444                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
 1445                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
 1446                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
 1447                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
 1448                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
 1449                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
 1450                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1451                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1452                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1453                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
 1454                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
 1455                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
 1456                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
 1457                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
 1458                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
 1459                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
 1460                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
 1461                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
 1462                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
 1463                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
 1464                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
 1465                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
 1466                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
 1467                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
 1468                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
 1469                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
 1470                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
 1471                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
 1472                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
 1473                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
 1474                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
 1475                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
 1476                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
 1477                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
 1478                        		.dbg	line,	"include\variables.c", 2; #include "hucc-scroll.h"
 1479                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 1; #ifndef _hucc_scroll_h
 1480                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 2; #define _hucc_scroll_h
 1481                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 4; /****************************************************************************
 1482                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 5; ; ***************************************************************************
 1483                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 6; ;
 1484                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 7; ; hucc-scroll.h
 1485                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 8; ;
 1486                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 9; ; Routines for a fast split-screen scrolling system.
 1487                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 10; ;
 1488                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 11; ; Copyright John Brandwood 2024.
 1489                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 12; ;
 1490                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1491                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1492                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1493                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 16; ;
 1494                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 17; ; ***************************************************************************
 1495                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 18; ; ***************************************************************************
 1496                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 19; ;
 1497                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 20; ; The maximum number of splits for each screen layer is set in your project's
 1498                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 21; ; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
 1499                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 22; ;
 1500                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 23; ; Your first active split must be defined to start at screen line 0, and then
 1501                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 24; ; the rest of the active splits must be in increasing line order to match the
 1502                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 25; ; way that the PC Engine displays the output image.
 1503                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 26; ;
 1504                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 27; ; You can have disabled splits interleaved with your active splits.
 1505                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 28; ;
 1506                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 29; ; Splits that are normally disabled can be used to create full screen effects
 1507                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 30; ; such as bouncing the screen up and down by adding blank areas at the top or
 1508                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 31; ; bottom of the screen, and then rapidly changing the height of those areas.
 1509                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 32; ;
 1510                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 33; ; ***************************************************************************
 1511                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 34; ; **************************************************************************/
 1512                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 36; // *************
 1513                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 37; // VDC bits for display_flags ...
 1514                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 38; // *************
 1515                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 40; #ifndef BKG_OFF
 1516                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 41; #define BKG_OFF 0x00
 1517                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 42; #endif
 1518                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 44; #ifndef SPR_OFF
 1519                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 45; #define SPR_OFF 0x00
 1520                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 46; #endif
 1521                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 48; #ifndef BKG_ON
 1522                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 49; #define BKG_ON 0x80
 1523                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 50; #endif
 1524                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 52; #ifndef SPR_ON
 1525                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 53; #define SPR_ON 0x40
 1526                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 54; #endif
 1527                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 56; // *************
 1528                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 57; // Functions in hucc-scroll.asm ...
 1529                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 58; // *************
 1530                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 60; #ifdef __HUCC__
 1531                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 62; #asmdef	HUCC_USES_NEW_SCROLL 1
 1532                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 64; extern void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
 1533                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 65; extern void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
 1534                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 67; extern void __fastcall disable_split( unsigned char index<acc> );
 1535                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 68; extern void __fastcall sgx_disable_split( unsigned char index<acc> );
 1536                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 70; extern void __fastcall __macro disable_all_splits( void );
 1537                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 71; extern void __fastcall __macro sgx_disable_all_splits( void );
 1538                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 73; #asm
 1539                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 74; .macro	_disable_all_splits
 1540                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 75; ldy	#HUCC_PCE_SPLITS - 1
 1541                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 76; !loop:		tya
 1542                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 77; call	_disable_split.1
 1543                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 78; dey
 1544                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 79; bpl	!loop-
 1545                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 80; .endm
 1546                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 82; .macro	_sgx_disable_all_splits
 1547                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 83; ldy	#HUCC_SGX_SPLITS - 1
 1548                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 84; !loop:		tya
 1549                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 85; call	_sgx_disable_split.1
 1550                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 86; dey
 1551                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 87; bpl	!loop-
 1552                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 88; .endm
 1553                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 89; #endasm
 1554                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 91; #endif // __HUCC__
 1555                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 93; #endif // _hucc_scroll_h
 1556                        		.dbg	line,	"include\variables.c", 3; #include "hucc-chrmap.h"
 1557                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 1; #ifndef _hucc_chrmap_h
 1558                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 2; #define _hucc_chrmap_h
 1559                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 4; /****************************************************************************
 1560                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 5; ; ***************************************************************************
 1561                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 6; ;
 1562                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 7; ; hucc-chrmap.h
 1563                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 8; ;
 1564                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 9; ; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
 1565                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 10; ;
 1566                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 11; ; Copyright John Brandwood 2025.
 1567                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 12; ;
 1568                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1569                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1570                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1571                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 16; ;
 1572                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 17; ; ***************************************************************************
 1573                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 18; ; ***************************************************************************
 1574                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 19; ;
 1575                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 20; ; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
 1576                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 21; ;
 1577                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 22; ; The maximum total size for a chrmap is 16KBytes, which allows for maps up
 1578                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 23; ; to 256x32 tiles (2048x256 pixels).
 1579                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 24; ;
 1580                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 25; ; ***************************************************************************
 1581                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 26; ; **************************************************************************/
 1582                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 28; // *************
 1583                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 29; // This code extends the blkmap library ...
 1584                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 30; // *************
 1585                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 32; #include "hucc-blkmap.h"
 1586                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 34; // *************
 1587                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 35; // Functions in chrmap.asm ...
 1588                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 36; // *************
 1589                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 38; #ifdef __HUCC__
 1590                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 40; #asmdef	HUCC_USES_CHRMAP 1
 1591                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 42; extern void __fastcall __nop set_chrmap( unsigned char __far *chrmap<vdc_map_bank:vdc_map_addr>, unsigned char tiles_w<vdc_map_line_w> );
 1592                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 44; extern void __fastcall draw_bat( void );
 1593                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 45; extern void __fastcall scroll_bat( void );
 1594                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 47; extern void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1595                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 49; #ifdef _SGX
 1596                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 51; extern void __fastcall __nop sgx_set_chrmap( unsigned char __far *chrmap<sgx_map_bank:sgx_map_addr>, unsigned char tiles_w<sgx_map_line_w> );
 1597                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 53; extern void __fastcall sgx_draw_bat( void );
 1598                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 54; extern void __fastcall sgx_scroll_bat( void );
 1599                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 56; extern void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1600                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 58; #endif
 1601                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 60; #endif // __HUCC__
 1602                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 62; #endif // _hucc_chrmap_h
 1603                        		.dbg	line,	"include\variables.c", 4; #include "hucc-blkmap.h"
 1604                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
 1605                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
 1606                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
 1607                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
 1608                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
 1609                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
 1610                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
 1611                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
 1612                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
 1613                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
 1614                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
 1615                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1616                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1617                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1618                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
 1619                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
 1620                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
 1621                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
 1622                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
 1623                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
 1624                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
 1625                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
 1626                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
 1627                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
 1628                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
 1629                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
 1630                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
 1631                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
 1632                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
 1633                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
 1634                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
 1635                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
 1636                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
 1637                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
 1638                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
 1639                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
 1640                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
 1641                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
 1642                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
 1643                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
 1644                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
 1645                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
 1646                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
 1647                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
 1648                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
 1649                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
 1650                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
 1651                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
 1652                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
 1653                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
 1654                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
 1655                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
 1656                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
 1657                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
 1658                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
 1659                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
 1660                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
 1661                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
 1662                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
 1663                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
 1664                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
 1665                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
 1666                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
 1667                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
 1668                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1669                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 1670                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
 1671                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 86; .macro	_set_blkmap.2
 1672                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 87; stz	vdc_scr_bank
 1673                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 88; .endm
 1674                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 90; .macro	_set_multimap.2
 1675                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 91; lda	vdc_bat_width
 1676                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 92; lsr	a
 1677                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 93; sta	vdc_map_line_w
 1678                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 94; .endm
 1679                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 96; .macro	SCREEN
 1680                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 97; db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
 1681                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 98; db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
 1682                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 99; db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
 1683                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 100; dw	(\4)
 1684                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 101; .endm
 1685                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
 1686                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
 1687                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
 1688                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
 1689                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
 1690                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
 1691                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
 1692                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
 1693                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
 1694                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
 1695                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
 1696                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
 1697                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
 1698                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
 1699                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
 1700                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
 1701                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
 1702                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
 1703                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
 1704                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
 1705                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
 1706                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
 1707                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
 1708                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
 1709                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
 1710                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1711                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 1712                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
 1713                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 144; .macro	_sgx_set_blkmap.2
 1714                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 145; stz	sgx_scr_bank
 1715                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 146; .endm
 1716                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 148; .macro	_sgx_set_multimap.2
 1717                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 149; lda	sgx_bat_width
 1718                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 150; lsr	a
 1719                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 151; sta	sgx_map_line_w
 1720                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 152; .endm
 1721                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
 1722                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
 1723                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
 1724                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
 1725                        		.dbg	line,	"include\variables.c", 13; unsigned char   sequence_id,
 1726                        		.dbg	line,	"include\variables.c", 14; sequence_loaded,
 1727                        		.dbg	line,	"include\variables.c", 16; level_id,
 1728                        		.dbg	line,	"include\variables.c", 18; // PLAYER //
 1729                        		.dbg	line,	"include\variables.c", 19; respawn,
 1730                        		.dbg	line,	"include\variables.c", 20; player_id,
 1731                        		.dbg	line,	"include\variables.c", 21; player_state,
 1732                        		.dbg	line,	"include\variables.c", 22; player_axis,
 1733                        		.dbg	line,	"include\variables.c", 23; player_previous_axis,
 1734                        		.dbg	line,	"include\variables.c", 24; player_counter_anim,
 1735                        		.dbg	line,	"include\variables.c", 25; player_index_jump,
 1736                        		.dbg	line,	"include\variables.c", 26; player_index_fall,
 1737                        		.dbg	line,	"include\variables.c", 27; player_counter_attack,
 1738                        		.dbg	line,	"include\variables.c", 29; player_naked,
 1739                        		.dbg	line,	"include\variables.c", 30; player_attack,
 1740                        		.dbg	line,	"include\variables.c", 32; jump_ladder,
 1741                        		.dbg	line,	"include\variables.c", 33; jump_max_index,
 1742                        		.dbg	line,	"include\variables.c", 34; fall_ladder,
 1743                        		.dbg	line,	"include\variables.c", 35; hit_wall,
 1744                        		.dbg	line,	"include\variables.c", 37; // ARMOR + WEAPON //
 1745                        		.dbg	line,	"include\variables.c", 38; chain_id,
 1746                        		.dbg	line,	"include\variables.c", 39; weapon_id,
 1747                        		.dbg	line,	"include\variables.c", 40; armor_level,
 1748                        		.dbg	line,	"include\variables.c", 41; weapon_level,                
 1749                        		.dbg	line,	"include\variables.c", 42; list_chain_active[3],
 1750                        		.dbg	line,	"include\variables.c", 44; // HUD //
 1751                        		.dbg	line,	"include\variables.c", 45; life_amount,
 1752                        		.dbg	line,	"include\variables.c", 46; credits_amount,
 1753                        		.dbg	line,	"include\variables.c", 47; key_amount,
 1754                        		.dbg	line,	"include\variables.c", 48; potion_amount,
 1755                        		.dbg	line,	"include\variables.c", 50; // TIME //
 1756                        		.dbg	line,	"include\variables.c", 51; minutes,
 1757                        		.dbg	line,	"include\variables.c", 52; seconds,
 1758                        		.dbg	line,	"include\variables.c", 53; time_counter,
 1759                        		.dbg	line,	"include\variables.c", 55; minutes_backup,
 1760                        		.dbg	line,	"include\variables.c", 56; seconds_backup,
 1761                        		.dbg	line,	"include\variables.c", 59; // OBJECTS //
 1762                        		.dbg	line,	"include\variables.c", 60; object_start_index,
 1763                        		.dbg	line,	"include\variables.c", 61; level_object_number,
 1764                        		.dbg	line,	"include\variables.c", 62; onscreen_object_number,
 1765                        		.dbg	line,	"include\variables.c", 63; 
 1766                        		.dbg	line,	"include\variables.c", 64; list_object_type[25],
 1767                        		.dbg	line,	"include\variables.c", 65; list_object_state[25],
 1768                        		.dbg	line,	"include\variables.c", 66; list_object_energy[25],
 1769                        		.dbg	line,	"include\variables.c", 67; list_reward_type[25],
 1770                        		.dbg	line,	"include\variables.c", 68; 
 1771                        		.dbg	line,	"include\variables.c", 69; list_onscreen_object[8],
 1772                        		.dbg	line,	"include\variables.c", 70; 
 1773                        		.dbg	line,	"include\variables.c", 71; // CHESTS //
 1774                        		.dbg	line,	"include\variables.c", 72; chest_start_index,
 1775                        		.dbg	line,	"include\variables.c", 73; level_chest_number,
 1776                        		.dbg	line,	"include\variables.c", 74; onscreen_chest_number,
 1777                        		.dbg	line,	"include\variables.c", 75; 
 1778                        		.dbg	line,	"include\variables.c", 76; list_chest_state[8],
 1779                        		.dbg	line,	"include\variables.c", 77; list_onscreen_chest[8],
 1780                        		.dbg	line,	"include\variables.c", 79; // NPC //
 1781                        		.dbg	line,	"include\variables.c", 80; npc_start_index,
 1782                        		.dbg	line,	"include\variables.c", 81; level_npc_number,
 1783                        		.dbg	line,	"include\variables.c", 82; onscreen_npc_number,
 1784                        		.dbg	line,	"include\variables.c", 84; list_npc_type[9],
 1785                        		.dbg	line,	"include\variables.c", 85; list_npc_state[9],
 1786                        		.dbg	line,	"include\variables.c", 86; list_onscreen_npc[9],
 1787                        		.dbg	line,	"include\variables.c", 88; // SHOPS //
 1788                        		.dbg	line,	"include\variables.c", 89; index_x,
 1789                        		.dbg	line,	"include\variables.c", 90; index_y,
 1790                        		.dbg	line,	"include\variables.c", 91; item_index,
 1791                        		.dbg	line,	"include\variables.c", 93; shop_phase,
 1792                        		.dbg	line,	"include\variables.c", 94; shop_counter,
 1793                        		.dbg	line,	"include\variables.c", 95; 
 1794                        		.dbg	line,	"include\variables.c", 96; tilemap_mask[256];
 1795                        		.dbg	line,	"include\variables.c", 101; signed int      player_pos_x,
 1796                        		.dbg	line,	"include\variables.c", 102; player_pos_y,
 1797                        		.dbg	line,	"include\variables.c", 103; camera_max_y_position,
 1798                        		.dbg	line,	"include\variables.c", 105; camera_pos_x_backup,
 1799                        		.dbg	line,	"include\variables.c", 106; camera_pos_y_backup,
 1800                        		.dbg	line,	"include\variables.c", 109; list_object_x_pos[25],
 1801                        		.dbg	line,	"include\variables.c", 110; list_object_y_pos[25],
 1802                        		.dbg	line,	"include\variables.c", 111; list_object_x_pos_ref[25],
 1803                        		.dbg	line,	"include\variables.c", 112; list_object_y_pos_ref[25],
 1804                        		.dbg	line,	"include\variables.c", 115; list_chest_x_pos[8],
 1805                        		.dbg	line,	"include\variables.c", 116; list_chest_y_pos[8],
 1806                        		.dbg	line,	"include\variables.c", 117; list_chest_x_pos_ref[8],
 1807                        		.dbg	line,	"include\variables.c", 118; list_chest_y_pos_ref[8],
 1808                        		.dbg	line,	"include\variables.c", 121; list_npc_x_pos[9],
 1809                        		.dbg	line,	"include\variables.c", 122; list_npc_y_pos[9],
 1810                        		.dbg	line,	"include\variables.c", 123; list_npc_x_pos_ref[9],
 1811                        		.dbg	line,	"include\variables.c", 124; list_npc_y_pos_ref[9];
 1812                        		.dbg	line,	"include\variables.c", 125; 
 1813                        		.dbg	line,	"include\variables.c", 129; int             zenny_amount,
 1814                        		.dbg	line,	"include\variables.c", 130; score,
 1815                        		.dbg	line,	"include\variables.c", 132; shop_prices[10];
 1816                        		.dbg	line,	"include\variables.c", 137; signed char weapon_y_offset;
 1817                        		.dbg	line,	"include\variables.c", 142; extern unsigned char tileset_LV1_BG_B[];
 1818                        		.dbg	line,	"include\variables.c", 143; extern unsigned char multimap_LV1_BG_B[];
 1819                        		.dbg	line,	"include\variables.c", 145; extern unsigned char tileset_HUD[];
 1820                        		.dbg	line,	"include\variables.c", 146; extern unsigned char multimap_LV1_BG_A[];
 1821                        		.dbg	line,	"include\variables.c", 148; extern unsigned char tileset_SHOP_BG_B[];
 1822                        		.dbg	line,	"include\variables.c", 151; int *ptr_SHOP_ITEM_PRICES;
 1823                        		.dbg	line,	"main.c", 11; #include "include/gfx_BG_TITLE.c"
 1824                        		.dbg	line,	"include\gfx_BG_TITLE.c", 1; #include "huc.h"
 1825                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
 1826                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
 1827                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
 1828                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
 1829                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
 1830                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
 1831                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
 1832                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
 1833                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
 1834                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
 1835                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
 1836                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1837                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1838                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1839                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
 1840                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
 1841                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
 1842                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
 1843                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
 1844                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
 1845                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
 1846                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
 1847                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
 1848                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
 1849                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
 1850                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
 1851                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
 1852                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
 1853                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
 1854                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
 1855                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
 1856                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
 1857                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
 1858                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
 1859                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
 1860                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
 1861                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
 1862                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
 1863                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
 1864                        		.dbg	line,	"include\gfx_BG_TITLE.c", 2; #include "hucc-scroll.h"
 1865                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 1; #ifndef _hucc_scroll_h
 1866                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 2; #define _hucc_scroll_h
 1867                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 4; /****************************************************************************
 1868                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 5; ; ***************************************************************************
 1869                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 6; ;
 1870                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 7; ; hucc-scroll.h
 1871                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 8; ;
 1872                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 9; ; Routines for a fast split-screen scrolling system.
 1873                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 10; ;
 1874                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 11; ; Copyright John Brandwood 2024.
 1875                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 12; ;
 1876                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1877                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1878                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1879                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 16; ;
 1880                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 17; ; ***************************************************************************
 1881                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 18; ; ***************************************************************************
 1882                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 19; ;
 1883                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 20; ; The maximum number of splits for each screen layer is set in your project's
 1884                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 21; ; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
 1885                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 22; ;
 1886                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 23; ; Your first active split must be defined to start at screen line 0, and then
 1887                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 24; ; the rest of the active splits must be in increasing line order to match the
 1888                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 25; ; way that the PC Engine displays the output image.
 1889                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 26; ;
 1890                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 27; ; You can have disabled splits interleaved with your active splits.
 1891                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 28; ;
 1892                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 29; ; Splits that are normally disabled can be used to create full screen effects
 1893                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 30; ; such as bouncing the screen up and down by adding blank areas at the top or
 1894                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 31; ; bottom of the screen, and then rapidly changing the height of those areas.
 1895                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 32; ;
 1896                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 33; ; ***************************************************************************
 1897                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 34; ; **************************************************************************/
 1898                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 36; // *************
 1899                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 37; // VDC bits for display_flags ...
 1900                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 38; // *************
 1901                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 40; #ifndef BKG_OFF
 1902                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 41; #define BKG_OFF 0x00
 1903                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 42; #endif
 1904                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 44; #ifndef SPR_OFF
 1905                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 45; #define SPR_OFF 0x00
 1906                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 46; #endif
 1907                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 48; #ifndef BKG_ON
 1908                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 49; #define BKG_ON 0x80
 1909                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 50; #endif
 1910                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 52; #ifndef SPR_ON
 1911                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 53; #define SPR_ON 0x40
 1912                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 54; #endif
 1913                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 56; // *************
 1914                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 57; // Functions in hucc-scroll.asm ...
 1915                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 58; // *************
 1916                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 60; #ifdef __HUCC__
 1917                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 62; #asmdef	HUCC_USES_NEW_SCROLL 1
 1918                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 64; extern void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
 1919                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 65; extern void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
 1920                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 67; extern void __fastcall disable_split( unsigned char index<acc> );
 1921                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 68; extern void __fastcall sgx_disable_split( unsigned char index<acc> );
 1922                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 70; extern void __fastcall __macro disable_all_splits( void );
 1923                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 71; extern void __fastcall __macro sgx_disable_all_splits( void );
 1924                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 73; #asm
 1925                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 74; .macro	_disable_all_splits
 1926                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 75; ldy	#HUCC_PCE_SPLITS - 1
 1927                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 76; !loop:		tya
 1928                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 77; call	_disable_split.1
 1929                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 78; dey
 1930                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 79; bpl	!loop-
 1931                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 80; .endm
 1932                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 82; .macro	_sgx_disable_all_splits
 1933                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 83; ldy	#HUCC_SGX_SPLITS - 1
 1934                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 84; !loop:		tya
 1935                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 85; call	_sgx_disable_split.1
 1936                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 86; dey
 1937                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 87; bpl	!loop-
 1938                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 88; .endm
 1939                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 89; #endasm
 1940                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 91; #endif // __HUCC__
 1941                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 93; #endif // _hucc_scroll_h
 1942                        		.dbg	line,	"include\gfx_BG_TITLE.c", 3; #include "hucc-chrmap.h"
 1943                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 1; #ifndef _hucc_chrmap_h
 1944                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 2; #define _hucc_chrmap_h
 1945                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 4; /****************************************************************************
 1946                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 5; ; ***************************************************************************
 1947                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 6; ;
 1948                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 7; ; hucc-chrmap.h
 1949                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 8; ;
 1950                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 9; ; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
 1951                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 10; ;
 1952                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 11; ; Copyright John Brandwood 2025.
 1953                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 12; ;
 1954                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1955                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1956                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1957                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 16; ;
 1958                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 17; ; ***************************************************************************
 1959                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 18; ; ***************************************************************************
 1960                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 19; ;
 1961                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 20; ; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
 1962                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 21; ;
 1963                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 22; ; The maximum total size for a chrmap is 16KBytes, which allows for maps up
 1964                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 23; ; to 256x32 tiles (2048x256 pixels).
 1965                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 24; ;
 1966                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 25; ; ***************************************************************************
 1967                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 26; ; **************************************************************************/
 1968                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 28; // *************
 1969                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 29; // This code extends the blkmap library ...
 1970                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 30; // *************
 1971                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 32; #include "hucc-blkmap.h"
 1972                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 34; // *************
 1973                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 35; // Functions in chrmap.asm ...
 1974                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 36; // *************
 1975                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 38; #ifdef __HUCC__
 1976                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 40; #asmdef	HUCC_USES_CHRMAP 1
 1977                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 42; extern void __fastcall __nop set_chrmap( unsigned char __far *chrmap<vdc_map_bank:vdc_map_addr>, unsigned char tiles_w<vdc_map_line_w> );
 1978                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 44; extern void __fastcall draw_bat( void );
 1979                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 45; extern void __fastcall scroll_bat( void );
 1980                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 47; extern void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1981                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 49; #ifdef _SGX
 1982                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 51; extern void __fastcall __nop sgx_set_chrmap( unsigned char __far *chrmap<sgx_map_bank:sgx_map_addr>, unsigned char tiles_w<sgx_map_line_w> );
 1983                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 53; extern void __fastcall sgx_draw_bat( void );
 1984                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 54; extern void __fastcall sgx_scroll_bat( void );
 1985                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 56; extern void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1986                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 58; #endif
 1987                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 60; #endif // __HUCC__
 1988                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 62; #endif // _hucc_chrmap_h
 1989                        		.dbg	line,	"include\gfx_BG_TITLE.c", 4; #include "hucc-blkmap.h"
 1990                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
 1991                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
 1992                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
 1993                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
 1994                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
 1995                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
 1996                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
 1997                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
 1998                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
 1999                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
 2000                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
 2001                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 2002                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 2003                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 2004                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
 2005                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
 2006                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
 2007                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
 2008                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
 2009                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
 2010                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
 2011                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
 2012                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
 2013                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
 2014                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
 2015                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
 2016                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
 2017                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
 2018                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
 2019                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
 2020                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
 2021                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
 2022                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
 2023                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
 2024                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
 2025                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
 2026                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
 2027                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
 2028                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
 2029                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
 2030                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
 2031                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
 2032                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
 2033                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
 2034                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
 2035                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
 2036                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
 2037                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
 2038                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
 2039                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
 2040                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
 2041                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
 2042                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
 2043                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
 2044                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
 2045                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
 2046                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
 2047                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
 2048                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
 2049                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
 2050                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
 2051                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
 2052                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
 2053                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
 2054                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 2055                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 2056                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
 2057                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 86; .macro	_set_blkmap.2
 2058                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 87; stz	vdc_scr_bank
 2059                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 88; .endm
 2060                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 90; .macro	_set_multimap.2
 2061                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 91; lda	vdc_bat_width
 2062                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 92; lsr	a
 2063                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 93; sta	vdc_map_line_w
 2064                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 94; .endm
 2065                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 96; .macro	SCREEN
 2066                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 97; db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
 2067                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 98; db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
 2068                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 99; db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
 2069                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 100; dw	(\4)
 2070                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 101; .endm
 2071                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
 2072                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
 2073                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
 2074                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
 2075                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
 2076                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
 2077                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
 2078                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
 2079                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
 2080                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
 2081                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
 2082                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
 2083                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
 2084                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
 2085                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
 2086                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
 2087                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
 2088                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
 2089                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
 2090                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
 2091                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
 2092                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
 2093                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
 2094                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
 2095                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
 2096                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 2097                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 2098                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
 2099                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 144; .macro	_sgx_set_blkmap.2
 2100                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 145; stz	sgx_scr_bank
 2101                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 146; .endm
 2102                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 148; .macro	_sgx_set_multimap.2
 2103                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 149; lda	sgx_bat_width
 2104                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 150; lsr	a
 2105                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 151; sta	sgx_map_line_w
 2106                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 152; .endm
 2107                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
 2108                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
 2109                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
 2110                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
 2111                        		.dbg	line,	"include\gfx_BG_TITLE.c", 13; #incchr(tileset_FONT_TITLE,"res/maps/tiles_FONT_TITLE.png");
 2112               6000     		.data
 2113    03:6000             	_tileset_FONT_TITLE: 	.incchr		"res/maps/tiles_FONT_TITLE.png"
 2114               E309     		.code
 2115                        		.dbg	line,	"include\gfx_BG_TITLE.c", 16; //**************************************************************************************//
 2116                        		.dbg	line,	"include\gfx_BG_TITLE.c", 17; //                                                                                      //
 2117                        		.dbg	line,	"include\gfx_BG_TITLE.c", 18; //                                        TITLE                                         //
 2118                        		.dbg	line,	"include\gfx_BG_TITLE.c", 19; //                                                                                      //
 2119                        		.dbg	line,	"include\gfx_BG_TITLE.c", 20; //**************************************************************************************//
 2120                        		.dbg	line,	"include\gfx_BG_TITLE.c", 22; #incchr(tileset_TITLE_BG_B, "res/maps/tilemap_TITLE_BG_B.png", _OPTIMIZE)
 2121               6C00     		.data
 2122    03:6C00             	_tileset_TITLE_BG_B: 	.incchr		"res/maps/tilemap_TITLE_BG_B.png", 1
 2123               E309     		.code
 2124                        		.dbg	line,	"include\gfx_BG_TITLE.c", 24; #incbat(tilemap_TITLE_BG_B,"res/maps/tilemap_TITLE_BG_B.png", 0x1000 , 32 , 28 , tileset_TITLE_BG_B);
 2125               6860     		.data
 2126    04:6860             	_tilemap_TITLE_BG_B:	.incbat		"res/maps/tilemap_TITLE_BG_B.png", 4096, 32, 28, _tileset_TITLE_BG_B
 2127               E309     		.code
 2128                        		.dbg	line,	"main.c", 11; #incpal(palette_TITLE, "res/maps/tilemap_TITLE_BG_B.png")
 2129               6F60     		.data
 2130    04:6F60             	_palette_TITLE:	.incpal		"res/maps/tilemap_TITLE_BG_B.png"
 2131               E309     		.code
 2132                        		.dbg	line,	"main.c", 12; #include "include/gfx_BG_LEVELS.c"
 2133                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 1; #include "huc.h"
 2134                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
 2135                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
 2136                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
 2137                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
 2138                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
 2139                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
 2140                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
 2141                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
 2142                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
 2143                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
 2144                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
 2145                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 2146                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 2147                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 2148                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
 2149                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
 2150                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
 2151                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
 2152                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
 2153                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
 2154                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
 2155                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
 2156                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
 2157                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
 2158                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
 2159                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
 2160                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
 2161                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
 2162                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
 2163                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
 2164                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
 2165                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
 2166                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
 2167                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
 2168                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
 2169                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
 2170                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
 2171                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
 2172                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
 2173                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 2; #include "hucc-scroll.h"
 2174                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 1; #ifndef _hucc_scroll_h
 2175                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 2; #define _hucc_scroll_h
 2176                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 4; /****************************************************************************
 2177                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 5; ; ***************************************************************************
 2178                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 6; ;
 2179                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 7; ; hucc-scroll.h
 2180                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 8; ;
 2181                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 9; ; Routines for a fast split-screen scrolling system.
 2182                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 10; ;
 2183                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 11; ; Copyright John Brandwood 2024.
 2184                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 12; ;
 2185                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 2186                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 2187                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 2188                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 16; ;
 2189                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 17; ; ***************************************************************************
 2190                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 18; ; ***************************************************************************
 2191                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 19; ;
 2192                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 20; ; The maximum number of splits for each screen layer is set in your project's
 2193                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 21; ; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
 2194                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 22; ;
 2195                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 23; ; Your first active split must be defined to start at screen line 0, and then
 2196                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 24; ; the rest of the active splits must be in increasing line order to match the
 2197                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 25; ; way that the PC Engine displays the output image.
 2198                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 26; ;
 2199                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 27; ; You can have disabled splits interleaved with your active splits.
 2200                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 28; ;
 2201                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 29; ; Splits that are normally disabled can be used to create full screen effects
 2202                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 30; ; such as bouncing the screen up and down by adding blank areas at the top or
 2203                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 31; ; bottom of the screen, and then rapidly changing the height of those areas.
 2204                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 32; ;
 2205                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 33; ; ***************************************************************************
 2206                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 34; ; **************************************************************************/
 2207                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 36; // *************
 2208                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 37; // VDC bits for display_flags ...
 2209                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 38; // *************
 2210                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 40; #ifndef BKG_OFF
 2211                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 41; #define BKG_OFF 0x00
 2212                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 42; #endif
 2213                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 44; #ifndef SPR_OFF
 2214                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 45; #define SPR_OFF 0x00
 2215                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 46; #endif
 2216                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 48; #ifndef BKG_ON
 2217                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 49; #define BKG_ON 0x80
 2218                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 50; #endif
 2219                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 52; #ifndef SPR_ON
 2220                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 53; #define SPR_ON 0x40
 2221                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 54; #endif
 2222                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 56; // *************
 2223                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 57; // Functions in hucc-scroll.asm ...
 2224                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 58; // *************
 2225                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 60; #ifdef __HUCC__
 2226                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 62; #asmdef	HUCC_USES_NEW_SCROLL 1
 2227                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 64; extern void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
 2228                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 65; extern void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
 2229                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 67; extern void __fastcall disable_split( unsigned char index<acc> );
 2230                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 68; extern void __fastcall sgx_disable_split( unsigned char index<acc> );
 2231                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 70; extern void __fastcall __macro disable_all_splits( void );
 2232                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 71; extern void __fastcall __macro sgx_disable_all_splits( void );
 2233                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 73; #asm
 2234                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 74; .macro	_disable_all_splits
 2235                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 75; ldy	#HUCC_PCE_SPLITS - 1
 2236                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 76; !loop:		tya
 2237                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 77; call	_disable_split.1
 2238                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 78; dey
 2239                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 79; bpl	!loop-
 2240                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 80; .endm
 2241                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 82; .macro	_sgx_disable_all_splits
 2242                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 83; ldy	#HUCC_SGX_SPLITS - 1
 2243                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 84; !loop:		tya
 2244                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 85; call	_sgx_disable_split.1
 2245                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 86; dey
 2246                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 87; bpl	!loop-
 2247                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 88; .endm
 2248                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 89; #endasm
 2249                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 91; #endif // __HUCC__
 2250                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 93; #endif // _hucc_scroll_h
 2251                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 3; #include "hucc-chrmap.h"
 2252                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 1; #ifndef _hucc_chrmap_h
 2253                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 2; #define _hucc_chrmap_h
 2254                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 4; /****************************************************************************
 2255                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 5; ; ***************************************************************************
 2256                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 6; ;
 2257                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 7; ; hucc-chrmap.h
 2258                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 8; ;
 2259                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 9; ; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
 2260                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 10; ;
 2261                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 11; ; Copyright John Brandwood 2025.
 2262                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 12; ;
 2263                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 2264                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 2265                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 2266                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 16; ;
 2267                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 17; ; ***************************************************************************
 2268                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 18; ; ***************************************************************************
 2269                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 19; ;
 2270                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 20; ; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
 2271                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 21; ;
 2272                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 22; ; The maximum total size for a chrmap is 16KBytes, which allows for maps up
 2273                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 23; ; to 256x32 tiles (2048x256 pixels).
 2274                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 24; ;
 2275                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 25; ; ***************************************************************************
 2276                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 26; ; **************************************************************************/
 2277                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 28; // *************
 2278                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 29; // This code extends the blkmap library ...
 2279                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 30; // *************
 2280                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 32; #include "hucc-blkmap.h"
 2281                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 34; // *************
 2282                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 35; // Functions in chrmap.asm ...
 2283                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 36; // *************
 2284                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 38; #ifdef __HUCC__
 2285                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 40; #asmdef	HUCC_USES_CHRMAP 1
 2286                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 42; extern void __fastcall __nop set_chrmap( unsigned char __far *chrmap<vdc_map_bank:vdc_map_addr>, unsigned char tiles_w<vdc_map_line_w> );
 2287                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 44; extern void __fastcall draw_bat( void );
 2288                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 45; extern void __fastcall scroll_bat( void );
 2289                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 47; extern void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 2290                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 49; #ifdef _SGX
 2291                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 51; extern void __fastcall __nop sgx_set_chrmap( unsigned char __far *chrmap<sgx_map_bank:sgx_map_addr>, unsigned char tiles_w<sgx_map_line_w> );
 2292                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 53; extern void __fastcall sgx_draw_bat( void );
 2293                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 54; extern void __fastcall sgx_scroll_bat( void );
 2294                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 56; extern void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 2295                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 58; #endif
 2296                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 60; #endif // __HUCC__
 2297                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 62; #endif // _hucc_chrmap_h
 2298                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 4; #include "hucc-blkmap.h"
 2299                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
 2300                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
 2301                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
 2302                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
 2303                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
 2304                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
 2305                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
 2306                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
 2307                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
 2308                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
 2309                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
 2310                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 2311                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 2312                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 2313                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
 2314                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
 2315                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
 2316                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
 2317                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
 2318                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
 2319                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
 2320                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
 2321                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
 2322                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
 2323                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
 2324                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
 2325                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
 2326                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
 2327                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
 2328                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
 2329                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
 2330                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
 2331                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
 2332                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
 2333                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
 2334                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
 2335                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
 2336                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
 2337                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
 2338                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
 2339                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
 2340                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
 2341                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
 2342                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
 2343                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
 2344                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
 2345                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
 2346                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
 2347                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
 2348                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
 2349                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
 2350                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
 2351                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
 2352                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
 2353                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
 2354                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
 2355                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
 2356                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
 2357                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
 2358                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
 2359                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
 2360                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
 2361                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
 2362                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
 2363                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 2364                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 2365                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
 2366                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 86; .macro	_set_blkmap.2
 2367                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 87; stz	vdc_scr_bank
 2368                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 88; .endm
 2369                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 90; .macro	_set_multimap.2
 2370                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 91; lda	vdc_bat_width
 2371                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 92; lsr	a
 2372                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 93; sta	vdc_map_line_w
 2373                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 94; .endm
 2374                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 96; .macro	SCREEN
 2375                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 97; db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
 2376                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 98; db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
 2377                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 99; db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
 2378                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 100; dw	(\4)
 2379                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 101; .endm
 2380                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
 2381                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
 2382                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
 2383                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
 2384                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
 2385                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
 2386                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
 2387                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
 2388                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
 2389                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
 2390                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
 2391                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
 2392                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
 2393                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
 2394                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
 2395                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
 2396                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
 2397                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
 2398                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
 2399                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
 2400                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
 2401                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
 2402                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
 2403                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
 2404                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
 2405                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 2406                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 2407                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
 2408                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 144; .macro	_sgx_set_blkmap.2
 2409                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 145; stz	sgx_scr_bank
 2410                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 146; .endm
 2411                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 148; .macro	_sgx_set_multimap.2
 2412                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 149; lda	sgx_bat_width
 2413                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 150; lsr	a
 2414                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 151; sta	sgx_map_line_w
 2415                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 152; .endm
 2416                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
 2417                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
 2418                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
 2419                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
 2420                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 13; #incchr(tileset_FONT,"res/maps/tiles_FONT.png");
 2421               7160     		.data
 2422    04:7160             	_tileset_FONT: 	.incchr		"res/maps/tiles_FONT.png"
 2423               E309     		.code
 2424                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 16; //**************************************************************************************//
 2425                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 17; //                                                                                      //
 2426                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 18; //                                       LEVEL 1                                        //
 2427                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 19; //                                                                                      //
 2428                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 20; //**************************************************************************************//
 2429                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 22; #incchr(tileset_LV1_WALL,"res/maps/tiles_LV1_WALL.png", 4 , 4);
 2430               7D60     		.data
 2431    04:7D60             	_tileset_LV1_WALL: 	.incchr		"res/maps/tiles_LV1_WALL.png", 4, 4
 2432               E309     		.code
 2433                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 23; #incchr(tileset_LV1_DOOR_OPEN,"res/maps/tiles_LV1_DOOR_OPEN.png", 4 , 6);
 2434               7F60     		.data
 2435    04:7F60             	_tileset_LV1_DOOR_OPEN: 	.incchr		"res/maps/tiles_LV1_DOOR_OPEN.png", 4, 6
 2436               E309     		.code
 2437                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 24; #incchr(tileset_LV1_DOOR_CLOSED,"res/maps/tiles_LV1_DOOR_CLOSED.png", 4 , 6);
 2438               6260     		.data
 2439    05:6260             	_tileset_LV1_DOOR_CLOSED: 	.incchr		"res/maps/tiles_LV1_DOOR_CLOSED.png", 4, 6
 2440               E309     		.code
 2441                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 26; #incchr(tileset_LIFE_RED,"res/maps/tileset_LIFE_RED.png", 2 , 1);
 2442               6560     		.data
 2443    05:6560             	_tileset_LIFE_RED: 	.incchr		"res/maps/tileset_LIFE_RED.png", 2, 1
 2444               E309     		.code
 2445                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 27; #incchr(tileset_LIFE_ORANGE,"res/maps/tileset_LIFE_ORANGE.png", 2 , 1);
 2446               65A0     		.data
 2447    05:65A0             	_tileset_LIFE_ORANGE: 	.incchr		"res/maps/tileset_LIFE_ORANGE.png", 2, 1
 2448               E309     		.code
 2449                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 28; #incchr(tileset_LIFE_YELLOW,"res/maps/tileset_LIFE_YELLOW.png", 2 , 1);
 2450               65E0     		.data
 2451    05:65E0             	_tileset_LIFE_YELLOW: 	.incchr		"res/maps/tileset_LIFE_YELLOW.png", 2, 1
 2452               E309     		.code
 2453                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 29; #incchr(tileset_LIFE_EMPTY,"res/maps/tileset_LIFE_EMPTY.png", 2 , 1);
 2454               6620     		.data
 2455    05:6620             	_tileset_LIFE_EMPTY: 	.incchr		"res/maps/tileset_LIFE_EMPTY.png", 2, 1
 2456               E309     		.code
 2457                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 31; #incchr(tileset_ARMOR_1,"res/maps/tileset_ARMOR_1.png", 2 , 2);
 2458               6660     		.data
 2459    05:6660             	_tileset_ARMOR_1: 	.incchr		"res/maps/tileset_ARMOR_1.png", 2, 2
 2460               E309     		.code
 2461                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 32; #incchr(tileset_ARMOR_2,"res/maps/tileset_ARMOR_2.png", 2 , 2);
 2462               66E0     		.data
 2463    05:66E0             	_tileset_ARMOR_2: 	.incchr		"res/maps/tileset_ARMOR_2.png", 2, 2
 2464               E309     		.code
 2465                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 33; #incchr(tileset_ARMOR_4,"res/maps/tileset_ARMOR_4.png", 2 , 2);
 2466               6760     		.data
 2467    05:6760             	_tileset_ARMOR_4: 	.incchr		"res/maps/tileset_ARMOR_4.png", 2, 2
 2468               E309     		.code
 2469                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 34; #incchr(tileset_ARMOR_8,"res/maps/tileset_ARMOR_8.png", 2 , 2);
 2470               67E0     		.data
 2471    05:67E0             	_tileset_ARMOR_8: 	.incchr		"res/maps/tileset_ARMOR_8.png", 2, 2
 2472               E309     		.code
 2473                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 36; #incchr(tileset_WEAPON_1,"res/maps/tileset_WEAPON_1.png", 2 , 2);
 2474               6860     		.data
 2475    05:6860             	_tileset_WEAPON_1: 	.incchr		"res/maps/tileset_WEAPON_1.png", 2, 2
 2476               E309     		.code
 2477                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 37; #incchr(tileset_WEAPON_2,"res/maps/tileset_WEAPON_2.png", 2 , 2);
 2478               68E0     		.data
 2479    05:68E0             	_tileset_WEAPON_2: 	.incchr		"res/maps/tileset_WEAPON_2.png", 2, 2
 2480               E309     		.code
 2481                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 38; #incchr(tileset_WEAPON_4,"res/maps/tileset_WEAPON_4.png", 2 , 2);
 2482               6960     		.data
 2483    05:6960             	_tileset_WEAPON_4: 	.incchr		"res/maps/tileset_WEAPON_4.png", 2, 2
 2484               E309     		.code
 2485                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 39; #incchr(tileset_WEAPON_5,"res/maps/tileset_WEAPON_5.png", 2 , 2);
 2486               69E0     		.data
 2487    05:69E0             	_tileset_WEAPON_5: 	.incchr		"res/maps/tileset_WEAPON_5.png", 2, 2
 2488               E309     		.code
 2489                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 40; #incchr(tileset_WEAPON_8,"res/maps/tileset_WEAPON_8.png", 2 , 2);
 2490               6A60     		.data
 2491    05:6A60             	_tileset_WEAPON_8: 	.incchr		"res/maps/tileset_WEAPON_8.png", 2, 2
 2492               E309     		.code
 2493                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 43; //--------------------------------------------------------------------------------------//
 2494                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 44; //                                        VDC 2                                         //
 2495                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 45; //--------------------------------------------------------------------------------------//
 2496                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 47; #asm
 2497                        		.dbg	clear
 2498               0001     	OPTIMIZE	=	1
 2499               6AE0     			.data
 2500                        	; EXTRACT TILESET
 2501                        	;----------------
 2502    05:6AE0             	_tileset_LV1_BG_B:  incchr	"res/maps/template_LV1_WALL.png"
 2503    05:6CE0             			incchr	"res/maps/template_LV1_DOOR.png"
 2504    05:6FE0             			incchr	"res/maps/tilemap_LV1_BG_B.png", OPTIMIZE
 2505                        	; EXTRACT BLOCKS
 2506                        	;--------------
 2507    09:6000             	blocks_LV1_BG_B1:	incblk	"res/maps/tilemap_LV1_BG_B.png" , 0x1000 ,    0 ,   0 ,  64 , 32 , _tileset_LV1_BG_B ; // 96x16 = 1536 | 32x16 =  512
 2508    09:6800             	blocks_LV1_BG_B2:	incblk	"res/maps/tilemap_LV1_BG_B.png" , 0x1000 , 1024 ,   0 ,  96 , 32 , _tileset_LV1_BG_B ; // 64x16 = 1024 | 32x16 =  512
 2509    09:7000             	blocks_LV1_BG_B3:	incblk	"res/maps/tilemap_LV1_BG_B.png" , 0x1000 ,    0 , 512 ,  64 , 32 , _tileset_LV1_BG_B ; // 96x16 = 1536 | 16x16 =  256
 2510    09:7800             	blocks_LV1_BG_B4:	incblk	"res/maps/tilemap_LV1_BG_B.png" , 0x1000 , 1024 , 512 ,  96 , 32 , _tileset_LV1_BG_B ; // 64x16 = 1024 | 16x16 =  256
 2511                        	; EXTRACT MAPS
 2512                        	;------------
 2513               6000     			align	256
 2514    0A:6000             	MAP_LV1_BG_B1:		incmap	"res/maps/tilemap_LV1_BG_B.png",    0 ,   0 ,  64 , 32 , blocks_LV1_BG_B1 ; // 96x16 = 1536 | 32x16 =  512
 2515               6800     			align	256
 2516    0A:6800             	MAP_LV1_BG_B2:		incmap	"res/maps/tilemap_LV1_BG_B.png", 1024 ,   0 ,  96 , 32 , blocks_LV1_BG_B2 ; // 64x16 = 1024 | 32x16 =  512
 2517               7400     			align	256
 2518    0A:7400             	MAP_LV1_BG_B3:		incmap	"res/maps/tilemap_LV1_BG_B.png",    0 , 512 ,  64 , 32 , blocks_LV1_BG_B3 ; // 96x16 = 1536 | 16x16 =  256
 2519               7C00     			align	256
 2520    0A:7C00             	MAP_LV1_BG_B4:		incmap	"res/maps/tilemap_LV1_BG_B.png", 1024 , 512 ,  96 , 32 , blocks_LV1_BG_B4 ; // 64x16 = 1024 | 16x16 =  256
 2521                        	; MASK (EMPTY)
 2522                        	;----------------
 2523    0B:6800  00 00 00 00	dummy_tbl:	ds	256
         0B:6804  00 00 00 00 
         0B:6808  00 00 00 00 
         0B:680C  00 00 00 00 
         0B:6810  00 00 00 00 
         0B:6814  00 00 00 00 
         0B:6818  00 00 00 00 
         0B:681C  00 00 00 00 
         0B:6820  00 00 00 00 
         0B:6824  00 00 00 00 
         0B:6828  00 00 00 00 
         0B:682C  00 00 00 00 
         0B:6830  00 00 00 00 
         0B:6834  00 00 00 00 
         0B:6838  00 00 00 00 
         0B:683C  00 00 00 00 
         0B:6840  00 00 00 00 
         0B:6844  00 00 00 00 
         0B:6848  00 00 00 00 
         0B:684C  00 00 00 00 
         0B:6850  00 00 00 00 
         0B:6854  00 00 00 00 
         0B:6858  00 00 00 00 
         0B:685C  00 00 00 00 
         0B:6860  00 00 00 00 
         0B:6864  00 00 00 00 
         0B:6868  00 00 00 00 
         0B:686C  00 00 00 00 
         0B:6870  00 00 00 00 
         0B:6874  00 00 00 00 
         0B:6878  00 00 00 00 
         0B:687C  00 00 00 00 
         0B:6880  00 00 00 00 
         0B:6884  00 00 00 00 
         0B:6888  00 00 00 00 
         0B:688C  00 00 00 00 
         0B:6890  00 00 00 00 
         0B:6894  00 00 00 00 
         0B:6898  00 00 00 00 
         0B:689C  00 00 00 00 
         0B:68A0  00 00 00 00 
         0B:68A4  00 00 00 00 
         0B:68A8  00 00 00 00 
         0B:68AC  00 00 00 00 
         0B:68B0  00 00 00 00 
         0B:68B4  00 00 00 00 
         0B:68B8  00 00 00 00 
         0B:68BC  00 00 00 00 
         0B:68C0  00 00 00 00 
         0B:68C4  00 00 00 00 
         0B:68C8  00 00 00 00 
         0B:68CC  00 00 00 00 
         0B:68D0  00 00 00 00 
         0B:68D4  00 00 00 00 
         0B:68D8  00 00 00 00 
         0B:68DC  00 00 00 00 
         0B:68E0  00 00 00 00 
         0B:68E4  00 00 00 00 
         0B:68E8  00 00 00 00 
         0B:68EC  00 00 00 00 
         0B:68F0  00 00 00 00 
         0B:68F4  00 00 00 00 
         0B:68F8  00 00 00 00 
         0B:68FC  00 00 00 00 
 2524                        	; SWIZZLE MAPS
 2525                        	;-------------
 2526    0B:6900             	swizzle	MAP_LV1_BG_B1,  32, 16 ;
 2527    0B:6900             	swizzle	MAP_LV1_BG_B2,  32, 16 ;
 2528    0B:6900             	swizzle	MAP_LV1_BG_B3,  32, 16 ;
 2529    0B:6900             	swizzle	MAP_LV1_BG_B4,  32, 16 ;
 2530                        	; BUILD MULTIMAP
 2531                        	;---------------
 2532    0B:6900             	_multimap_LV1_BG_B:
 2533                        			; 1st line of 5 screens (512x256)
 2534                        			SCREEN MAP_LV1_BG_B1 + 0x0000, blocks_LV1_BG_B1, dummy_tbl, 0
         0B:6900  60 0A      			db	(((MAP_LV1_BG_B1 + 0x0000) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B1 + 0x0000)
         0B:6902  40 09      			db	(((blocks_LV1_BG_B1) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B1)
         0B:6904  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:6906  00 00      			dw	(0)
 2535                        			SCREEN MAP_LV1_BG_B1 + 0x0200, blocks_LV1_BG_B1, dummy_tbl, 0
         0B:6908  62 0A      			db	(((MAP_LV1_BG_B1 + 0x0200) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B1 + 0x0200)
         0B:690A  40 09      			db	(((blocks_LV1_BG_B1) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B1)
         0B:690C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:690E  00 00      			dw	(0)
 2536                        			SCREEN MAP_LV1_BG_B2 + 0x0000, blocks_LV1_BG_B2, dummy_tbl, 0
         0B:6910  68 0A      			db	(((MAP_LV1_BG_B2 + 0x0000) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B2 + 0x0000)
         0B:6912  48 09      			db	(((blocks_LV1_BG_B2) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B2)
         0B:6914  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:6916  00 00      			dw	(0)
 2537                        			SCREEN MAP_LV1_BG_B2 + 0x0200, blocks_LV1_BG_B2, dummy_tbl, 0
         0B:6918  6A 0A      			db	(((MAP_LV1_BG_B2 + 0x0200) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B2 + 0x0200)
         0B:691A  48 09      			db	(((blocks_LV1_BG_B2) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B2)
         0B:691C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:691E  00 00      			dw	(0)
 2538                        			SCREEN MAP_LV1_BG_B2 + 0x0400, blocks_LV1_BG_B2, dummy_tbl, 0
         0B:6920  6C 0A      			db	(((MAP_LV1_BG_B2 + 0x0400) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B2 + 0x0400)
         0B:6922  48 09      			db	(((blocks_LV1_BG_B2) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B2)
         0B:6924  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:6926  00 00      			dw	(0)
 2539                        			; 2nd line of 5 screens (512x256)
 2540                        			SCREEN MAP_LV1_BG_B1 + 0x0400, blocks_LV1_BG_B1, dummy_tbl, 0
         0B:6928  64 0A      			db	(((MAP_LV1_BG_B1 + 0x0400) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B1 + 0x0400)
         0B:692A  40 09      			db	(((blocks_LV1_BG_B1) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B1)
         0B:692C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:692E  00 00      			dw	(0)
 2541                        			SCREEN MAP_LV1_BG_B1 + 0x0600, blocks_LV1_BG_B1, dummy_tbl, 0
         0B:6930  66 0A      			db	(((MAP_LV1_BG_B1 + 0x0600) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B1 + 0x0600)
         0B:6932  40 09      			db	(((blocks_LV1_BG_B1) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B1)
         0B:6934  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:6936  00 00      			dw	(0)
 2542                        			SCREEN MAP_LV1_BG_B2 + 0x0600, blocks_LV1_BG_B2, dummy_tbl, 0
         0B:6938  6E 0A      			db	(((MAP_LV1_BG_B2 + 0x0600) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B2 + 0x0600)
         0B:693A  48 09      			db	(((blocks_LV1_BG_B2) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B2)
         0B:693C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:693E  00 00      			dw	(0)
 2543                        			SCREEN MAP_LV1_BG_B2 + 0x0800, blocks_LV1_BG_B2, dummy_tbl, 0
         0B:6940  70 0A      			db	(((MAP_LV1_BG_B2 + 0x0800) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B2 + 0x0800)
         0B:6942  48 09      			db	(((blocks_LV1_BG_B2) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B2)
         0B:6944  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:6946  00 00      			dw	(0)
 2544                        			SCREEN MAP_LV1_BG_B2 + 0x0A00, blocks_LV1_BG_B2, dummy_tbl, 0
         0B:6948  72 0A      			db	(((MAP_LV1_BG_B2 + 0x0A00) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B2 + 0x0A00)
         0B:694A  48 09      			db	(((blocks_LV1_BG_B2) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B2)
         0B:694C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:694E  00 00      			dw	(0)
 2545                        			; 3rd line of 5 screens (512x256)
 2546                        			SCREEN MAP_LV1_BG_B3 + 0x0000, blocks_LV1_BG_B3, dummy_tbl, 0
         0B:6950  74 0A      			db	(((MAP_LV1_BG_B3 + 0x0000) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B3 + 0x0000)
         0B:6952  50 09      			db	(((blocks_LV1_BG_B3) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B3)
         0B:6954  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:6956  00 00      			dw	(0)
 2547                        			SCREEN MAP_LV1_BG_B3 + 0x0200, blocks_LV1_BG_B3, dummy_tbl, 0
         0B:6958  76 0A      			db	(((MAP_LV1_BG_B3 + 0x0200) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B3 + 0x0200)
         0B:695A  50 09      			db	(((blocks_LV1_BG_B3) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B3)
         0B:695C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:695E  00 00      			dw	(0)
 2548                        			SCREEN MAP_LV1_BG_B4 + 0x0000, blocks_LV1_BG_B4, dummy_tbl, 0
         0B:6960  7C 0A      			db	(((MAP_LV1_BG_B4 + 0x0000) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B4 + 0x0000)
         0B:6962  58 09      			db	(((blocks_LV1_BG_B4) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B4)
         0B:6964  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:6966  00 00      			dw	(0)
 2549                        			SCREEN MAP_LV1_BG_B4 + 0x0200, blocks_LV1_BG_B4, dummy_tbl, 0
         0B:6968  7E 0A      			db	(((MAP_LV1_BG_B4 + 0x0200) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B4 + 0x0200)
         0B:696A  58 09      			db	(((blocks_LV1_BG_B4) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B4)
         0B:696C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:696E  00 00      			dw	(0)
 2550                        			SCREEN MAP_LV1_BG_B4 + 0x0400, blocks_LV1_BG_B4, dummy_tbl, 0
         0B:6970  60 0B      			db	(((MAP_LV1_BG_B4 + 0x0400) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B4 + 0x0400)
         0B:6972  58 09      			db	(((blocks_LV1_BG_B4) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B4)
         0B:6974  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:6976  00 00      			dw	(0)
 2551                        			; 4th line of 5 screens (512x256)
 2552                        			SCREEN MAP_LV1_BG_B3 + 0x0400, blocks_LV1_BG_B3, dummy_tbl, 0
         0B:6978  78 0A      			db	(((MAP_LV1_BG_B3 + 0x0400) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B3 + 0x0400)
         0B:697A  50 09      			db	(((blocks_LV1_BG_B3) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B3)
         0B:697C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:697E  00 00      			dw	(0)
 2553                        			SCREEN MAP_LV1_BG_B3 + 0x0600, blocks_LV1_BG_B3, dummy_tbl, 0
         0B:6980  7A 0A      			db	(((MAP_LV1_BG_B3 + 0x0600) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B3 + 0x0600)
         0B:6982  50 09      			db	(((blocks_LV1_BG_B3) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B3)
         0B:6984  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:6986  00 00      			dw	(0)
 2554                        			SCREEN MAP_LV1_BG_B4 + 0x0600, blocks_LV1_BG_B4, dummy_tbl, 0
         0B:6988  62 0B      			db	(((MAP_LV1_BG_B4 + 0x0600) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B4 + 0x0600)
         0B:698A  58 09      			db	(((blocks_LV1_BG_B4) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B4)
         0B:698C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:698E  00 00      			dw	(0)
 2555                        			SCREEN MAP_LV1_BG_B4 + 0x0800, blocks_LV1_BG_B4, dummy_tbl, 0
         0B:6990  64 0B      			db	(((MAP_LV1_BG_B4 + 0x0800) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B4 + 0x0800)
         0B:6992  58 09      			db	(((blocks_LV1_BG_B4) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B4)
         0B:6994  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:6996  00 00      			dw	(0)
 2556                        			SCREEN MAP_LV1_BG_B4 + 0x0A00, blocks_LV1_BG_B4, dummy_tbl, 0
         0B:6998  66 0B      			db	(((MAP_LV1_BG_B4 + 0x0A00) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B4 + 0x0A00)
         0B:699A  58 09      			db	(((blocks_LV1_BG_B4) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B4)
         0B:699C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:699E  00 00      			dw	(0)
 2557                        	;//--------------------------------------------------------------------------------------//
 2558                        	;//                                        VDC 1                                         //
 2559                        	;//--------------------------------------------------------------------------------------//
 2560                        	; EXTRACT TILESET
 2561                        	;----------------
 2562    0B:69A0             	_tileset_HUD:	incchr	"res/maps/template_LIFEBAR_1.png"
 2563    0B:69E0             			incchr	"res/maps/template_LIFEBAR_2.png"
 2564    0B:6A20             			incchr	"res/maps/template_LIFEBAR_3.png"
 2565    0B:6A60             			incchr	"res/maps/template_LIFEBAR_4.png"
 2566    0B:6AA0             			incchr	"res/maps/template_LIFEBAR_5.png"
 2567    0B:6AE0             			incchr	"res/maps/tileset_WEAPON_1.png"
 2568    0B:6B60             			incchr	"res/maps/tileset_ARMOR_2.png"
 2569    0B:6BE0             			incchr	"res/maps/tilemap_HUD.png", OPTIMIZE
 2570                        	; EXTRACT BLOCKS
 2571                        	;--------------
 2572    0B:7000             	blocks_HUD1:	incblk	"res/maps/tilemap_HUD.png" , 0x1000 ,    0 ,   0 , 128 , 64 , _tileset_HUD ; // 128x16 = 2048 | 64x16 = 1024
 2573    0B:7800             	blocks_HUD2:	incblk	"res/maps/tilemap_HUD.png" , 0x1000 , 2048 ,   0 ,  32 , 64 , _tileset_HUD ; //  32x16 =  512 | 64x16 = 1024
 2574                        	; EXTRACT MAPS
 2575                        	;------------
 2576               6000     			align	256
 2577    0C:6000             	MAP_HUD1:		incmap	"res/maps/tilemap_HUD.png",    0 ,   0 , 128 , 64 , blocks_HUD1 ; // 128x16 = 2048 | 64x16 = 1024
 2578    0C:8000             			flagmap "res/maps/collision_LV1.png",       0 ,   0 , 128 , 64 , MAP_HUD1
 2579               6000     			align	256
 2580    0D:6000             	MAP_HUD2:		incmap	"res/maps/tilemap_HUD.png", 2048 ,   0 ,  32 , 64 , blocks_HUD2 ; //  32x16 =  512 | 64x16 = 1024
 2581    0D:6800             			flagmap "res/maps/collision_LV1.png",    2048 ,   0 ,  32 , 64 , MAP_HUD2
 2582                        	; SWIZZLE MAPS
 2583                        	;-------------
 2584    0D:6800             	swizzle	MAP_HUD1,  32, 16 ;
 2585    0D:6800             	swizzle	MAP_HUD2,  32, 16 ;
 2586                        	; BUILD MULTIMAP
 2587                        	;---------------
 2588    0D:6800             	_multimap_LV1_BG_A:
 2589                        			; 1st line of 5 screens (512x256)
 2590                        			SCREEN MAP_HUD1 + 0x0000, blocks_HUD1, dummy_tbl, 0
         0D:6800  60 0C      			db	(((MAP_HUD1 + 0x0000) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0000)
         0D:6802  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:6804  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:6806  00 00      			dw	(0)
 2591                        			SCREEN MAP_HUD1 + 0x0200, blocks_HUD1, dummy_tbl, 0
         0D:6808  62 0C      			db	(((MAP_HUD1 + 0x0200) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0200)
         0D:680A  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:680C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:680E  00 00      			dw	(0)
 2592                        			SCREEN MAP_HUD1 + 0x0400, blocks_HUD1, dummy_tbl, 0
         0D:6810  64 0C      			db	(((MAP_HUD1 + 0x0400) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0400)
         0D:6812  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:6814  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:6816  00 00      			dw	(0)
 2593                        			SCREEN MAP_HUD1 + 0x0600, blocks_HUD1, dummy_tbl, 0
         0D:6818  66 0C      			db	(((MAP_HUD1 + 0x0600) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0600)
         0D:681A  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:681C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:681E  00 00      			dw	(0)
 2594                        			SCREEN MAP_HUD2 + 0x0000, blocks_HUD2, dummy_tbl, 0
         0D:6820  60 0D      			db	(((MAP_HUD2 + 0x0000) & $1FFF) | $6000) >> 8, bank(MAP_HUD2 + 0x0000)
         0D:6822  58 0B      			db	(((blocks_HUD2) & $1FFF) | $4000) >> 8, bank(blocks_HUD2)
         0D:6824  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:6826  00 00      			dw	(0)
 2595                        			; 2nd line of 5 screens (512x256)
 2596                        			SCREEN MAP_HUD1 + 0x0800, blocks_HUD1, dummy_tbl, 0
         0D:6828  68 0C      			db	(((MAP_HUD1 + 0x0800) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0800)
         0D:682A  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:682C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:682E  00 00      			dw	(0)
 2597                        			SCREEN MAP_HUD1 + 0x0A00, blocks_HUD1, dummy_tbl, 0
         0D:6830  6A 0C      			db	(((MAP_HUD1 + 0x0A00) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0A00)
         0D:6832  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:6834  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:6836  00 00      			dw	(0)
 2598                        			SCREEN MAP_HUD1 + 0x0C00, blocks_HUD1, dummy_tbl, 0
         0D:6838  6C 0C      			db	(((MAP_HUD1 + 0x0C00) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0C00)
         0D:683A  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:683C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:683E  00 00      			dw	(0)
 2599                        			SCREEN MAP_HUD1 + 0x0E00, blocks_HUD1, dummy_tbl, 0
         0D:6840  6E 0C      			db	(((MAP_HUD1 + 0x0E00) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0E00)
         0D:6842  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:6844  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:6846  00 00      			dw	(0)
 2600                        			SCREEN MAP_HUD2 + 0x0200, blocks_HUD2, dummy_tbl, 0
         0D:6848  62 0D      			db	(((MAP_HUD2 + 0x0200) & $1FFF) | $6000) >> 8, bank(MAP_HUD2 + 0x0200)
         0D:684A  58 0B      			db	(((blocks_HUD2) & $1FFF) | $4000) >> 8, bank(blocks_HUD2)
         0D:684C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:684E  00 00      			dw	(0)
 2601                        			; 3rd line of 5 screens (512x256)
 2602                        			SCREEN MAP_HUD1 + 0x1000, blocks_HUD1, dummy_tbl, 0
         0D:6850  70 0C      			db	(((MAP_HUD1 + 0x1000) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1000)
         0D:6852  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:6854  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:6856  00 00      			dw	(0)
 2603                        			SCREEN MAP_HUD1 + 0x1200, blocks_HUD1, dummy_tbl, 0
         0D:6858  72 0C      			db	(((MAP_HUD1 + 0x1200) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1200)
         0D:685A  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:685C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:685E  00 00      			dw	(0)
 2604                        			SCREEN MAP_HUD1 + 0x1400, blocks_HUD1, dummy_tbl, 0
         0D:6860  74 0C      			db	(((MAP_HUD1 + 0x1400) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1400)
         0D:6862  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:6864  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:6866  00 00      			dw	(0)
 2605                        			SCREEN MAP_HUD1 + 0x1600, blocks_HUD1, dummy_tbl, 0
         0D:6868  76 0C      			db	(((MAP_HUD1 + 0x1600) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1600)
         0D:686A  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:686C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:686E  00 00      			dw	(0)
 2606                        			SCREEN MAP_HUD2 + 0x0400, blocks_HUD2, dummy_tbl, 0
         0D:6870  64 0D      			db	(((MAP_HUD2 + 0x0400) & $1FFF) | $6000) >> 8, bank(MAP_HUD2 + 0x0400)
         0D:6872  58 0B      			db	(((blocks_HUD2) & $1FFF) | $4000) >> 8, bank(blocks_HUD2)
         0D:6874  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:6876  00 00      			dw	(0)
 2607                        			; 4th line of 5 screens (512x256)
 2608                        			SCREEN MAP_HUD1 + 0x1800, blocks_HUD1, dummy_tbl, 0
         0D:6878  78 0C      			db	(((MAP_HUD1 + 0x1800) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1800)
         0D:687A  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:687C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:687E  00 00      			dw	(0)
 2609                        			SCREEN MAP_HUD1 + 0x1A00, blocks_HUD1, dummy_tbl, 0
         0D:6880  7A 0C      			db	(((MAP_HUD1 + 0x1A00) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1A00)
         0D:6882  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:6884  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:6886  00 00      			dw	(0)
 2610                        			SCREEN MAP_HUD1 + 0x1C00, blocks_HUD1, dummy_tbl, 0
         0D:6888  7C 0C      			db	(((MAP_HUD1 + 0x1C00) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1C00)
         0D:688A  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:688C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:688E  00 00      			dw	(0)
 2611                        			SCREEN MAP_HUD1 + 0x1E00, blocks_HUD1, dummy_tbl, 0
         0D:6890  7E 0C      			db	(((MAP_HUD1 + 0x1E00) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1E00)
         0D:6892  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:6894  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:6896  00 00      			dw	(0)
 2612                        			SCREEN MAP_HUD2 + 0x0600, blocks_HUD2, dummy_tbl, 0
         0D:6898  66 0D      			db	(((MAP_HUD2 + 0x0600) & $1FFF) | $6000) >> 8, bank(MAP_HUD2 + 0x0600)
         0D:689A  58 0B      			db	(((blocks_HUD2) & $1FFF) | $4000) >> 8, bank(blocks_HUD2)
         0D:689C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:689E  00 00      			dw	(0)
 2613               E309     			.code
 2614                        	
 2615                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 207; #endasm
 2616                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 211; //--------------------------------------------------------------------------------------//
 2617                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 212; //                                   EXTRACT PALETTES                                   //
 2618                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 213; //--------------------------------------------------------------------------------------//
 2619                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 215; #incpal(palette_LV1,"res/maps/tilemap_LV1_BG_B.png");
 2620               68A0     		.data
 2621    0D:68A0             	_palette_LV1:	.incpal		"res/maps/tilemap_LV1_BG_B.png"
 2622               E309     		.code
 2623                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 224; //**************************************************************************************//
 2624                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 225; //                                                                                      //
 2625                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 226; //                                         SHOP                                         //
 2626                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 227; //                                                                                      //
 2627                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 228; //**************************************************************************************//
 2628                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 230; #asm
 2629                        		.dbg	clear
 2630               0001     	OPTIMIZE	=	1
 2631               6AA0     			.data
 2632                        	;//--------------------------------------------------------------------------------------//
 2633                        	;//                                        VDC 1                                         //
 2634                        	;//--------------------------------------------------------------------------------------//
 2635                        	; EXTRACT TILESET
 2636                        	;----------------
 2637    0D:6AA0             	_tileset_SHOP_BG_B:		incchr	"res/maps/template_ITEM_1.png"
 2638    0D:6B20             			incchr	"res/maps/template_ITEM_2.png"
 2639    0D:6BA0             			incchr	"res/maps/template_ITEM_3.png"
 2640    0D:6C20             			incchr	"res/maps/template_ITEM_4.png"
 2641    0D:6CA0             			incchr	"res/maps/template_ITEM_5.png"
 2642    0D:6D20             			incchr	"res/maps/template_ITEM_6.png"
 2643    0D:6DA0             			incchr	"res/maps/template_ITEM_7.png"
 2644    0D:6E20             			incchr	"res/maps/template_ITEM_8.png"
 2645    0D:6EA0             			incchr	"res/maps/template_ITEM_9.png"
 2646    0D:6F20             			incchr	"res/maps/template_ITEM_10.png"
 2647    0D:6FA0             			incchr	"res/maps/tilemap_SHOP_BG_B.png", OPTIMIZE
 2648               E309     			.code
 2649                        	
 2650                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 254; #endasm
 2651                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 257; // EXTRACT BLOCKS //
 2652                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 258; #incblk(blocks_SHOP_BG_B, "res/maps/tilemap_SHOP_BG_B.png", 0x1000, tileset_SHOP_BG_B);
 2653               6400     		.data
 2654    0F:6800             	_blocks_SHOP_BG_B:	.incblk		"res/maps/tilemap_SHOP_BG_B.png", 4096, _tileset_SHOP_BG_B
 2655               E309     		.code
 2656                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 260; // EXTRACT MAP //
 2657                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 261; #incmap(map_SHOP_BG_B, "res/maps/tilemap_SHOP_BG_B.png", blocks_SHOP_BG_B);
 2658               7000     		.data
 2659    0F:7000             	_map_SHOP_BG_B:	.incmap		"res/maps/tilemap_SHOP_BG_B.png", _blocks_SHOP_BG_B
 2660               E309     		.code
 2661                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 264; //--------------------------------------------------------------------------------------//
 2662                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 265; //                                        ITEMS                                         //
 2663                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 266; //--------------------------------------------------------------------------------------//
 2664                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 268; #incchr(tiles_ITEM_WEAPON_2,"res/maps/tiles_ITEM_WEAPON_2.png", 2 , 2);
 2665               70E0     		.data
 2666    0F:70E0             	_tiles_ITEM_WEAPON_2: 	.incchr		"res/maps/tiles_ITEM_WEAPON_2.png", 2, 2
 2667               E309     		.code
 2668                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 269; #incchr(tiles_ITEM_WEAPON_3,"res/maps/tiles_ITEM_WEAPON_3.png", 2 , 2);
 2669               7160     		.data
 2670    0F:7160             	_tiles_ITEM_WEAPON_3: 	.incchr		"res/maps/tiles_ITEM_WEAPON_3.png", 2, 2
 2671               E309     		.code
 2672                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 270; #incchr(tiles_ITEM_WEAPON_4,"res/maps/tiles_ITEM_WEAPON_4.png", 2 , 2);
 2673               71E0     		.data
 2674    0F:71E0             	_tiles_ITEM_WEAPON_4: 	.incchr		"res/maps/tiles_ITEM_WEAPON_4.png", 2, 2
 2675               E309     		.code
 2676                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 271; #incchr(tiles_ITEM_WEAPON_5,"res/maps/tiles_ITEM_WEAPON_5.png", 2 , 2);
 2677               7260     		.data
 2678    0F:7260             	_tiles_ITEM_WEAPON_5: 	.incchr		"res/maps/tiles_ITEM_WEAPON_5.png", 2, 2
 2679               E309     		.code
 2680                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 272; #incchr(tiles_ITEM_KEY,"res/maps/tiles_ITEM_KEY.png", 2 , 2);
 2681               72E0     		.data
 2682    0F:72E0             	_tiles_ITEM_KEY: 	.incchr		"res/maps/tiles_ITEM_KEY.png", 2, 2
 2683               E309     		.code
 2684                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 273; #incchr(tiles_ITEM_ARMOR_2,"res/maps/tiles_ITEM_ARMOR_2.png", 2 , 2);
 2685               7360     		.data
 2686    0F:7360             	_tiles_ITEM_ARMOR_2: 	.incchr		"res/maps/tiles_ITEM_ARMOR_2.png", 2, 2
 2687               E309     		.code
 2688                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 274; #incchr(tiles_ITEM_ARMOR_3,"res/maps/tiles_ITEM_ARMOR_3.png", 2 , 2);
 2689               73E0     		.data
 2690    0F:73E0             	_tiles_ITEM_ARMOR_3: 	.incchr		"res/maps/tiles_ITEM_ARMOR_3.png", 2, 2
 2691               E309     		.code
 2692                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 275; #incchr(tiles_ITEM_ARMOR_4,"res/maps/tiles_ITEM_ARMOR_4.png", 2 , 2);
 2693               7460     		.data
 2694    0F:7460             	_tiles_ITEM_ARMOR_4: 	.incchr		"res/maps/tiles_ITEM_ARMOR_4.png", 2, 2
 2695               E309     		.code
 2696                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 276; #incchr(tiles_ITEM_ARMOR_5,"res/maps/tiles_ITEM_ARMOR_5.png", 2 , 2);
 2697               74E0     		.data
 2698    0F:74E0             	_tiles_ITEM_ARMOR_5: 	.incchr		"res/maps/tiles_ITEM_ARMOR_5.png", 2, 2
 2699               E309     		.code
 2700                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 277; #incchr(tiles_ITEM_POTION,"res/maps/tiles_ITEM_POTION.png", 2 , 2);
 2701               7560     		.data
 2702    0F:7560             	_tiles_ITEM_POTION: 	.incchr		"res/maps/tiles_ITEM_POTION.png", 2, 2
 2703               E309     		.code
 2704                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 279; //#incchr(tileset_NUMBERS_SHOP_FONT,"res/maps/tiles_NUMBERS_SHOP_FONT.png");
 2705                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 282; //--------------------------------------------------------------------------------------//
 2706                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 283; //                                   EXTRACT PALETTES                                   //
 2707                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 284; //--------------------------------------------------------------------------------------//
 2708                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 286; #incpal(palette_SHOP,"res/maps/tilemap_SHOP_BG_B.png");
 2709               75E0     		.data
 2710    0F:75E0             	_palette_SHOP:	.incpal		"res/maps/tilemap_SHOP_BG_B.png"
 2711               E309     		.code
 2712                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 287; #incpal(palette_SHOP_ITEMS,"res/palettes/palette_SHOP_ITEMS.png");
 2713               77E0     		.data
 2714    0F:77E0             	_palette_SHOP_ITEMS:	.incpal		"res/palettes/palette_SHOP_ITEMS.png"
 2715               E309     		.code
 2716                        		.dbg	line,	"main.c", 13; #include "include/gfx_SPRITES.c"
 2717                        		.dbg	line,	"include\gfx_SPRITES.c", 1; #include "huc.h"
 2718                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
 2719                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
 2720                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
 2721                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
 2722                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
 2723                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
 2724                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
 2725                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
 2726                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
 2727                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
 2728                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
 2729                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 2730                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 2731                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 2732                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
 2733                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
 2734                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
 2735                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
 2736                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
 2737                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
 2738                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
 2739                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
 2740                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
 2741                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
 2742                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
 2743                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
 2744                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
 2745                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
 2746                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
 2747                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
 2748                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
 2749                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
 2750                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
 2751                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
 2752                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
 2753                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
 2754                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
 2755                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
 2756                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
 2757                        		.dbg	line,	"include\gfx_SPRITES.c", 9; #incspr(tiles_SPR_SELECTOR,"res/sprites/tiles_SPR_SELECTOR.png")
 2758               79E0     		.data
 2759    0F:79E0             	_tiles_SPR_SELECTOR:	.incspr		"res/sprites/tiles_SPR_SELECTOR.png"
 2760               E309     		.code
 2761                        		.dbg	line,	"include\gfx_SPRITES.c", 12; // EXTRACT PLAYER TILES //
 2762                        		.dbg	line,	"include\gfx_SPRITES.c", 13; #incspr(tiles_SPR_PLAYER_ARMOR,"res/sprites/tiles_SPR_PLAYER_ARMOR.png")
 2763               7A60     		.data
 2764    0F:7A60             	_tiles_SPR_PLAYER_ARMOR:	.incspr		"res/sprites/tiles_SPR_PLAYER_ARMOR.png"
 2765               E309     		.code
 2766                        		.dbg	line,	"include\gfx_SPRITES.c", 14; #incspr(tiles_SPR_PLAYER_NAKED,"res/sprites/tiles_SPR_PLAYER_NAKED.png")
 2767               6C60     		.data
 2768    11:6C60             	_tiles_SPR_PLAYER_NAKED:	.incspr		"res/sprites/tiles_SPR_PLAYER_NAKED.png"
 2769               E309     		.code
 2770                        		.dbg	line,	"include\gfx_SPRITES.c", 16; // EXTRACT PLAYER PALETTE //
 2771                        		.dbg	line,	"include\gfx_SPRITES.c", 17; #incpal(palette_PLAYER_1,"res/palettes/palette_PLAYER_1.png");
 2772               7E60     		.data
 2773    12:7E60             	_palette_PLAYER_1:	.incpal		"res/palettes/palette_PLAYER_1.png"
 2774               E309     		.code
 2775                        		.dbg	line,	"include\gfx_SPRITES.c", 18; #incpal(palette_PLAYER_4,"res/palettes/palette_PLAYER_4.png");
 2776               6060     		.data
 2777    13:6060             	_palette_PLAYER_4:	.incpal		"res/palettes/palette_PLAYER_4.png"
 2778               E309     		.code
 2779                        		.dbg	line,	"include\gfx_SPRITES.c", 19; #incpal(palette_PLAYER_5,"res/palettes/palette_PLAYER_5.png");
 2780               6260     		.data
 2781    13:6260             	_palette_PLAYER_5:	.incpal		"res/palettes/palette_PLAYER_5.png"
 2782               E309     		.code
 2783                        		.dbg	line,	"include\gfx_SPRITES.c", 20; #incpal(palette_PLAYER_8,"res/palettes/palette_PLAYER_8.png");
 2784               6460     		.data
 2785    13:6460             	_palette_PLAYER_8:	.incpal		"res/palettes/palette_PLAYER_8.png"
 2786               E309     		.code
 2787                        		.dbg	line,	"include\gfx_SPRITES.c", 23; // EXTRACT WEAPONS TILES //
 2788                        		.dbg	line,	"include\gfx_SPRITES.c", 24; #incspr(tiles_SPR_CHAIN,"res/sprites/tiles_SPR_CHAIN.png")
 2789               6660     		.data
 2790    13:6660             	_tiles_SPR_CHAIN:	.incspr		"res/sprites/tiles_SPR_CHAIN.png"
 2791               E309     		.code
 2792                        		.dbg	line,	"include\gfx_SPRITES.c", 25; #incspr(tiles_SPR_WEAPON_0,"res/sprites/tiles_SPR_WEAPON_0.png")
 2793               66E0     		.data
 2794    13:66E0             	_tiles_SPR_WEAPON_0:	.incspr		"res/sprites/tiles_SPR_WEAPON_0.png"
 2795               E309     		.code
 2796                        		.dbg	line,	"include\gfx_SPRITES.c", 26; #incspr(tiles_SPR_WEAPON_1,"res/sprites/tiles_SPR_WEAPON_1.png")
 2797               6960     		.data
 2798    13:6960             	_tiles_SPR_WEAPON_1:	.incspr		"res/sprites/tiles_SPR_WEAPON_1.png"
 2799               E309     		.code
 2800                        		.dbg	line,	"include\gfx_SPRITES.c", 27; #incspr(tiles_SPR_WEAPON_2,"res/sprites/tiles_SPR_WEAPON_2.png")
 2801               6BE0     		.data
 2802    13:6BE0             	_tiles_SPR_WEAPON_2:	.incspr		"res/sprites/tiles_SPR_WEAPON_2.png"
 2803               E309     		.code
 2804                        		.dbg	line,	"include\gfx_SPRITES.c", 28; #incspr(tiles_SPR_WEAPON_3,"res/sprites/tiles_SPR_WEAPON_3.png")
 2805               6E60     		.data
 2806    13:6E60             	_tiles_SPR_WEAPON_3:	.incspr		"res/sprites/tiles_SPR_WEAPON_3.png"
 2807               E309     		.code
 2808                        		.dbg	line,	"include\gfx_SPRITES.c", 29; #incspr(tiles_SPR_WEAPON_4,"res/sprites/tiles_SPR_WEAPON_4.png")
 2809               70E0     		.data
 2810    13:70E0             	_tiles_SPR_WEAPON_4:	.incspr		"res/sprites/tiles_SPR_WEAPON_4.png"
 2811               E309     		.code
 2812                        		.dbg	line,	"include\gfx_SPRITES.c", 32; #incspr(tiles_SPR_HIT,"res/sprites/tiles_SPR_HIT.png")
 2813               7360     		.data
 2814    13:7360             	_tiles_SPR_HIT:	.incspr		"res/sprites/tiles_SPR_HIT.png"
 2815               E309     		.code
 2816                        		.dbg	line,	"include\gfx_SPRITES.c", 35; // EXTRACT OBJECTS TILES //
 2817                        		.dbg	line,	"include\gfx_SPRITES.c", 36; #incspr(tiles_SPR_BARREL,"res/sprites/tiles_SPR_BARREL.png")
 2818               73E0     		.data
 2819    13:73E0             	_tiles_SPR_BARREL:	.incspr		"res/sprites/tiles_SPR_BARREL.png"
 2820               E309     		.code
 2821                        		.dbg	line,	"include\gfx_SPRITES.c", 37; #incspr(tiles_SPR_CHEST,"res/sprites/tiles_SPR_CHEST.png")
 2822               7460     		.data
 2823    13:7460             	_tiles_SPR_CHEST:	.incspr		"res/sprites/tiles_SPR_CHEST.png"
 2824               E309     		.code
 2825                        		.dbg	line,	"include\gfx_SPRITES.c", 38; #incspr(tiles_SPR_COIN_1,"res/sprites/tiles_SPR_COIN_1.png")
 2826               6060     		.data
 2827    14:6060             	_tiles_SPR_COIN_1:	.incspr		"res/sprites/tiles_SPR_COIN_1.png"
 2828               E309     		.code
 2829                        		.dbg	line,	"include\gfx_SPRITES.c", 39; #incspr(tiles_SPR_COIN_5,"res/sprites/tiles_SPR_COIN_5.png")
 2830               60E0     		.data
 2831    14:60E0             	_tiles_SPR_COIN_5:	.incspr		"res/sprites/tiles_SPR_COIN_5.png"
 2832               E309     		.code
 2833                        		.dbg	line,	"include\gfx_SPRITES.c", 40; #incspr(tiles_SPR_COIN_10,"res/sprites/tiles_SPR_COIN_10.png")
 2834               6160     		.data
 2835    14:6160             	_tiles_SPR_COIN_10:	.incspr		"res/sprites/tiles_SPR_COIN_10.png"
 2836               E309     		.code
 2837                        		.dbg	line,	"include\gfx_SPRITES.c", 41; #incspr(tiles_SPR_COIN_50,"res/sprites/tiles_SPR_COIN_50.png")
 2838               61E0     		.data
 2839    14:61E0             	_tiles_SPR_COIN_50:	.incspr		"res/sprites/tiles_SPR_COIN_50.png"
 2840               E309     		.code
 2841                        		.dbg	line,	"include\gfx_SPRITES.c", 42; #incspr(tiles_SPR_COIN_100,"res/sprites/tiles_SPR_COIN_100.png")
 2842               6260     		.data
 2843    14:6260             	_tiles_SPR_COIN_100:	.incspr		"res/sprites/tiles_SPR_COIN_100.png"
 2844               E309     		.code
 2845                        		.dbg	line,	"include\gfx_SPRITES.c", 43; #incspr(tiles_SPR_COIN_500,"res/sprites/tiles_SPR_COIN_500.png")
 2846               62E0     		.data
 2847    14:62E0             	_tiles_SPR_COIN_500:	.incspr		"res/sprites/tiles_SPR_COIN_500.png"
 2848               E309     		.code
 2849                        		.dbg	line,	"include\gfx_SPRITES.c", 44; #incspr(tiles_SPR_COIN_1000,"res/sprites/tiles_SPR_COIN_1000.png")
 2850               6360     		.data
 2851    14:6360             	_tiles_SPR_COIN_1000:	.incspr		"res/sprites/tiles_SPR_COIN_1000.png"
 2852               E309     		.code
 2853                        		.dbg	line,	"include\gfx_SPRITES.c", 45; #incspr(tiles_SPR_FRUIT,"res/sprites/tiles_SPR_FRUIT.png")
 2854               63E0     		.data
 2855    14:63E0             	_tiles_SPR_FRUIT:	.incspr		"res/sprites/tiles_SPR_FRUIT.png"
 2856               E309     		.code
 2857                        		.dbg	line,	"include\gfx_SPRITES.c", 46; #incspr(tiles_SPR_GRAY_KEY,"res/sprites/tiles_SPR_GRAY_KEY.png")
 2858               6460     		.data
 2859    14:6460             	_tiles_SPR_GRAY_KEY:	.incspr		"res/sprites/tiles_SPR_GRAY_KEY.png"
 2860               E309     		.code
 2861                        		.dbg	line,	"include\gfx_SPRITES.c", 47; #incspr(tiles_SPR_GOLD_KEY,"res/sprites/tiles_SPR_GOLD_KEY.png")
 2862               64E0     		.data
 2863    14:64E0             	_tiles_SPR_GOLD_KEY:	.incspr		"res/sprites/tiles_SPR_GOLD_KEY.png"
 2864               E309     		.code
 2865                        		.dbg	line,	"include\gfx_SPRITES.c", 48; #incspr(tiles_SPR_HOURGLASS,"res/sprites/tiles_SPR_HOURGLASS.png")
 2866               6560     		.data
 2867    14:6560             	_tiles_SPR_HOURGLASS:	.incspr		"res/sprites/tiles_SPR_HOURGLASS.png"
 2868               E309     		.code
 2869                        		.dbg	line,	"include\gfx_SPRITES.c", 49; #incspr(tiles_SPR_LIFE,"res/sprites/tiles_SPR_LIFE.png")
 2870               65E0     		.data
 2871    14:65E0             	_tiles_SPR_LIFE:	.incspr		"res/sprites/tiles_SPR_LIFE.png"
 2872               E309     		.code
 2873                        		.dbg	line,	"include\gfx_SPRITES.c", 50; #incspr(tiles_SPR_OCTOPUS,"res/sprites/tiles_SPR_OCTOPUS.png")
 2874               6660     		.data
 2875    14:6660             	_tiles_SPR_OCTOPUS:	.incspr		"res/sprites/tiles_SPR_OCTOPUS.png"
 2876               E309     		.code
 2877                        		.dbg	line,	"include\gfx_SPRITES.c", 51; #incspr(tiles_SPR_POT,"res/sprites/tiles_SPR_POT.png")
 2878               66E0     		.data
 2879    14:66E0             	_tiles_SPR_POT:	.incspr		"res/sprites/tiles_SPR_POT.png"
 2880               E309     		.code
 2881                        		.dbg	line,	"include\gfx_SPRITES.c", 52; #incspr(tiles_SPR_POW,"res/sprites/tiles_SPR_POW.png")
 2882               6AE0     		.data
 2883    14:6AE0             	_tiles_SPR_POW:	.incspr		"res/sprites/tiles_SPR_POW.png"
 2884               E309     		.code
 2885                        		.dbg	line,	"include\gfx_SPRITES.c", 53; #incspr(tiles_SPR_STAR,"res/sprites/tiles_SPR_STAR.png")
 2886               6B60     		.data
 2887    14:6B60             	_tiles_SPR_STAR:	.incspr		"res/sprites/tiles_SPR_STAR.png"
 2888               E309     		.code
 2889                        		.dbg	line,	"include\gfx_SPRITES.c", 54; #incspr(tiles_SPR_BAMBOO,"res/sprites/tiles_SPR_BAMBOO.png")
 2890               6BE0     		.data
 2891    14:6BE0             	_tiles_SPR_BAMBOO:	.incspr		"res/sprites/tiles_SPR_BAMBOO.png"
 2892               E309     		.code
 2893                        		.dbg	line,	"include\gfx_SPRITES.c", 55; #incspr(tiles_SPR_YASHICHI,"res/sprites/tiles_SPR_YASHICHI.png")
 2894               6C60     		.data
 2895    14:6C60             	_tiles_SPR_YASHICHI:	.incspr		"res/sprites/tiles_SPR_YASHICHI.png"
 2896               E309     		.code
 2897                        		.dbg	line,	"include\gfx_SPRITES.c", 56; #incspr(tiles_SPR_ELEPHANT,"res/sprites/tiles_SPR_ELEPHANT.png")
 2898               6CE0     		.data
 2899    14:6CE0             	_tiles_SPR_ELEPHANT:	.incspr		"res/sprites/tiles_SPR_ELEPHANT.png"
 2900               E309     		.code
 2901                        		.dbg	line,	"include\gfx_SPRITES.c", 57; #incspr(tiles_SPR_DRAGONFLY,"res/sprites/tiles_SPR_DRAGONFLY.png")
 2902               6D60     		.data
 2903    14:6D60             	_tiles_SPR_DRAGONFLY:	.incspr		"res/sprites/tiles_SPR_DRAGONFLY.png"
 2904               E309     		.code
 2905                        		.dbg	line,	"include\gfx_SPRITES.c", 58; #incspr(tiles_SPR_COW,"res/sprites/tiles_SPR_COW.png")
 2906               6DE0     		.data
 2907    14:6DE0             	_tiles_SPR_COW:	.incspr		"res/sprites/tiles_SPR_COW.png"
 2908               E309     		.code
 2909                        		.dbg	line,	"include\gfx_SPRITES.c", 59; #incspr(tiles_SPR_MOBICHAN,"res/sprites/tiles_SPR_MOBICHAN.png")
 2910               6E60     		.data
 2911    14:6E60             	_tiles_SPR_MOBICHAN:	.incspr		"res/sprites/tiles_SPR_MOBICHAN.png"
 2912               E309     		.code
 2913                        		.dbg	line,	"include\gfx_SPRITES.c", 61; // EXTRACT OBJECTS PALETTE //
 2914                        		.dbg	line,	"include\gfx_SPRITES.c", 62; #incpal(palette_objects_1,"res/palettes/palette_objects_1.png");
 2915               6EE0     		.data
 2916    14:6EE0             	_palette_objects_1:	.incpal		"res/palettes/palette_objects_1.png"
 2917               E309     		.code
 2918                        		.dbg	line,	"include\gfx_SPRITES.c", 63; #incpal(palette_objects_2,"res/palettes/palette_objects_2.png");
 2919               70E0     		.data
 2920    14:70E0             	_palette_objects_2:	.incpal		"res/palettes/palette_objects_2.png"
 2921               E309     		.code
 2922                        		.dbg	line,	"include\gfx_SPRITES.c", 66; // EXTRACT NPCS TILES //
 2923                        		.dbg	line,	"include\gfx_SPRITES.c", 67; #incspr(tiles_SPR_NPC,"res/sprites/tiles_SPR_NPC.png")
 2924               72E0     		.data
 2925    14:72E0             	_tiles_SPR_NPC:	.incspr		"res/sprites/tiles_SPR_NPC.png"
 2926               E309     		.code
 2927                        		.dbg	line,	"include\gfx_SPRITES.c", 71; // EXTRACT CURSOR TILES //
 2928                        		.dbg	line,	"include\gfx_SPRITES.c", 72; #incspr(tiles_SPR_CURSOR,"res/sprites/tiles_SPR_CURSOR.png")
 2929               7EE0     		.data
 2930    14:7EE0             	_tiles_SPR_CURSOR:	.incspr		"res/sprites/tiles_SPR_CURSOR.png"
 2931               E309     		.code
 2932                        		.dbg	line,	"include\gfx_SPRITES.c", 77; // EXTRACT ENEMIES TILES //
 2933                        		.dbg	line,	"include\gfx_SPRITES.c", 78; #incspr(tiles_SPR_ORC,"res/sprites/tiles_SPR_ORC.png")
 2934               60E0     		.data
 2935    15:60E0             	_tiles_SPR_ORC:	.incspr		"res/sprites/tiles_SPR_ORC.png"
 2936               E309     		.code
 2937                        		.dbg	line,	"include\gfx_SPRITES.c", 79; #incspr(tiles_SPR_SERPENT,"res/sprites/tiles_SPR_SERPENT.png")
 2938               7DE0     		.data
 2939    15:7DE0             	_tiles_SPR_SERPENT:	.incspr		"res/sprites/tiles_SPR_SERPENT.png"
 2940               E309     		.code
 2941                        		.dbg	line,	"include\gfx_SPRITES.c", 80; #incspr(tiles_SPR_PLANT,"res/sprites/tiles_SPR_PLANT.png")
 2942               69E0     		.data
 2943    16:69E0             	_tiles_SPR_PLANT:	.incspr		"res/sprites/tiles_SPR_PLANT.png"
 2944               E309     		.code
 2945                        		.dbg	line,	"include\gfx_SPRITES.c", 82; // EXTRACT ENEMIES PALETTES //
 2946                        		.dbg	line,	"include\gfx_SPRITES.c", 83; #incpal(palette_SPR_ORC,"res/sprites/tiles_SPR_ORC.png")
 2947               63E0     		.data
 2948    17:63E0             	_palette_SPR_ORC:	.incpal		"res/sprites/tiles_SPR_ORC.png"
 2949               E309     		.code
 2950                        		.dbg	line,	"include\gfx_SPRITES.c", 84; #incpal(palette_SPR_PLANT,"res/sprites/tiles_SPR_PLANT.png")
 2951               65E0     		.data
 2952    17:65E0             	_palette_SPR_PLANT:	.incpal		"res/sprites/tiles_SPR_PLANT.png"
 2953               E309     		.code
 2954                        		.dbg	line,	"main.c", 16; #include "include/tables_NPC.c"
 2955                        		.dbg	line,	"include\tables_NPC.c", 1; //-----------------------------------------------------------------------------//
 2956                        		.dbg	line,	"include\tables_NPC.c", 2; //                                                                             //
 2957                        		.dbg	line,	"include\tables_NPC.c", 3; //                                   LEVEL 1                                   //
 2958                        		.dbg	line,	"include\tables_NPC.c", 4; //                                                                             //
 2959                        		.dbg	line,	"include\tables_NPC.c", 5; //-----------------------------------------------------------------------------//
 2960                        		.dbg	line,	"include\tables_NPC.c", 7; const char              TABLE_NPC_TYPE_LV1[NPC_NUMBER_LV1]              =   {
 2961                        		.dbg	line,	"include\tables_NPC.c", 8; TYPE_NPC_SHOP,
 2962                        		.dbg	line,	"include\tables_NPC.c", 9; TYPE_NPC_REWARD
 2963                        		.dbg	line,	"include\tables_NPC.c", 10; };
 2964                        		.dbg	line,	"include\tables_NPC.c", 13; const signed int        TABLE_NPC_X_POS_REF_LV1[NPC_NUMBER_LV1]         =   {
 2965                        		.dbg	line,	"include\tables_NPC.c", 14; 912,
 2966                        		.dbg	line,	"include\tables_NPC.c", 15; 1232
 2967                        		.dbg	line,	"include\tables_NPC.c", 16; };
 2968                        		.dbg	line,	"include\tables_NPC.c", 19; const signed int        TABLE_NPC_Y_POS_REF_LV1[NPC_NUMBER_LV1]         =   {
 2969                        		.dbg	line,	"include\tables_NPC.c", 20; 576,
 2970                        		.dbg	line,	"include\tables_NPC.c", 21; 400
 2971                        		.dbg	line,	"include\tables_NPC.c", 22; };
 2972                        		.dbg	line,	"main.c", 17; #include "include/tables_OBJECT.c"
 2973                        		.dbg	line,	"include\tables_OBJECT.c", 1; //-----------------------------------------------------------------------------//
 2974                        		.dbg	line,	"include\tables_OBJECT.c", 2; //                                                                             //
 2975                        		.dbg	line,	"include\tables_OBJECT.c", 3; //                                   LEVEL 1                                   //
 2976                        		.dbg	line,	"include\tables_OBJECT.c", 4; //                                                                             //
 2977                        		.dbg	line,	"include\tables_OBJECT.c", 5; //-----------------------------------------------------------------------------//
 2978                        		.dbg	line,	"include\tables_OBJECT.c", 7; const char              TABLE_OBJECT_TYPE_LV1[OBJECT_NUMBER_LV1]      =   {
 2979                        		.dbg	line,	"include\tables_OBJECT.c", 8; TYPE_HOURGLASS,
 2980                        		.dbg	line,	"include\tables_OBJECT.c", 9; TYPE_POT,
 2981                        		.dbg	line,	"include\tables_OBJECT.c", 10; TYPE_POT,
 2982                        		.dbg	line,	"include\tables_OBJECT.c", 11; TYPE_POT,
 2983                        		.dbg	line,	"include\tables_OBJECT.c", 12; TYPE_POT,
 2984                        		.dbg	line,	"include\tables_OBJECT.c", 13; TYPE_POT,
 2985                        		.dbg	line,	"include\tables_OBJECT.c", 14; TYPE_POT,
 2986                        		.dbg	line,	"include\tables_OBJECT.c", 15; TYPE_POW,
 2987                        		.dbg	line,	"include\tables_OBJECT.c", 16; TYPE_POT,
 2988                        		.dbg	line,	"include\tables_OBJECT.c", 17; TYPE_POT,
 2989                        		.dbg	line,	"include\tables_OBJECT.c", 19; //
 2990                        		.dbg	line,	"include\tables_OBJECT.c", 20; TYPE_POT,
 2991                        		.dbg	line,	"include\tables_OBJECT.c", 21; TYPE_POT,
 2992                        		.dbg	line,	"include\tables_OBJECT.c", 22; TYPE_POT,
 2993                        		.dbg	line,	"include\tables_OBJECT.c", 23; TYPE_POT,
 2994                        		.dbg	line,	"include\tables_OBJECT.c", 24; TYPE_POT,
 2995                        		.dbg	line,	"include\tables_OBJECT.c", 25; TYPE_POT,
 2996                        		.dbg	line,	"include\tables_OBJECT.c", 26; TYPE_POT,
 2997                        		.dbg	line,	"include\tables_OBJECT.c", 27; TYPE_POT,
 2998                        		.dbg	line,	"include\tables_OBJECT.c", 28; TYPE_POT,
 2999                        		.dbg	line,	"include\tables_OBJECT.c", 29; TYPE_POT,
 3000                        		.dbg	line,	"include\tables_OBJECT.c", 31; //
 3001                        		.dbg	line,	"include\tables_OBJECT.c", 32; TYPE_POT,
 3002                        		.dbg	line,	"include\tables_OBJECT.c", 33; TYPE_POT,
 3003                        		.dbg	line,	"include\tables_OBJECT.c", 34; TYPE_POT
 3004                        		.dbg	line,	"include\tables_OBJECT.c", 35; };
 3005                        		.dbg	line,	"include\tables_OBJECT.c", 38; const signed int        TABLE_OBJECT_X_POS_REF_LV1[OBJECT_NUMBER_LV1] =   {
 3006                        		.dbg	line,	"include\tables_OBJECT.c", 39; 1680,
 3007                        		.dbg	line,	"include\tables_OBJECT.c", 40; 1280,
 3008                        		.dbg	line,	"include\tables_OBJECT.c", 41; 1472,
 3009                        		.dbg	line,	"include\tables_OBJECT.c", 42; 1440,
 3010                        		.dbg	line,	"include\tables_OBJECT.c", 43; 1168,
 3011                        		.dbg	line,	"include\tables_OBJECT.c", 44; 1200,
 3012                        		.dbg	line,	"include\tables_OBJECT.c", 45; 960,
 3013                        		.dbg	line,	"include\tables_OBJECT.c", 46; 984,
 3014                        		.dbg	line,	"include\tables_OBJECT.c", 47; 1360,
 3015                        		.dbg	line,	"include\tables_OBJECT.c", 48; 1392,
 3016                        		.dbg	line,	"include\tables_OBJECT.c", 50; //
 3017                        		.dbg	line,	"include\tables_OBJECT.c", 51; 1552,
 3018                        		.dbg	line,	"include\tables_OBJECT.c", 52; 1680,
 3019                        		.dbg	line,	"include\tables_OBJECT.c", 53; 1712,
 3020                        		.dbg	line,	"include\tables_OBJECT.c", 54; 1744,
 3021                        		.dbg	line,	"include\tables_OBJECT.c", 55; 1248,
 3022                        		.dbg	line,	"include\tables_OBJECT.c", 56; 1280,
 3023                        		.dbg	line,	"include\tables_OBJECT.c", 57; 1168,
 3024                        		.dbg	line,	"include\tables_OBJECT.c", 58; 1040,
 3025                        		.dbg	line,	"include\tables_OBJECT.c", 59; 640,
 3026                        		.dbg	line,	"include\tables_OBJECT.c", 60; 672,
 3027                        		.dbg	line,	"include\tables_OBJECT.c", 62; //
 3028                        		.dbg	line,	"include\tables_OBJECT.c", 63; 336,
 3029                        		.dbg	line,	"include\tables_OBJECT.c", 64; 368,
 3030                        		.dbg	line,	"include\tables_OBJECT.c", 65; 416
 3031                        		.dbg	line,	"include\tables_OBJECT.c", 66; };
 3032                        		.dbg	line,	"include\tables_OBJECT.c", 69; const signed int        TABLE_OBJECT_Y_POS_REF_LV1[OBJECT_NUMBER_LV1] =   {
 3033                        		.dbg	line,	"include\tables_OBJECT.c", 70; 384,
 3034                        		.dbg	line,	"include\tables_OBJECT.c", 71; 416,
 3035                        		.dbg	line,	"include\tables_OBJECT.c", 72; 480,
 3036                        		.dbg	line,	"include\tables_OBJECT.c", 73; 496,
 3037                        		.dbg	line,	"include\tables_OBJECT.c", 74; 560,
 3038                        		.dbg	line,	"include\tables_OBJECT.c", 75; 560,
 3039                        		.dbg	line,	"include\tables_OBJECT.c", 76; 592,
 3040                        		.dbg	line,	"include\tables_OBJECT.c", 77; 592,
 3041                        		.dbg	line,	"include\tables_OBJECT.c", 78; 592,
 3042                        		.dbg	line,	"include\tables_OBJECT.c", 79; 592,
 3043                        		.dbg	line,	"include\tables_OBJECT.c", 81; //
 3044                        		.dbg	line,	"include\tables_OBJECT.c", 82; 704,
 3045                        		.dbg	line,	"include\tables_OBJECT.c", 83; 720,
 3046                        		.dbg	line,	"include\tables_OBJECT.c", 84; 720,
 3047                        		.dbg	line,	"include\tables_OBJECT.c", 85; 720,
 3048                        		.dbg	line,	"include\tables_OBJECT.c", 86; 736,
 3049                        		.dbg	line,	"include\tables_OBJECT.c", 87; 736,
 3050                        		.dbg	line,	"include\tables_OBJECT.c", 88; 752,
 3051                        		.dbg	line,	"include\tables_OBJECT.c", 89; 848,
 3052                        		.dbg	line,	"include\tables_OBJECT.c", 90; 880,
 3053                        		.dbg	line,	"include\tables_OBJECT.c", 91; 880,
 3054                        		.dbg	line,	"include\tables_OBJECT.c", 93; //
 3055                        		.dbg	line,	"include\tables_OBJECT.c", 94; 896,
 3056                        		.dbg	line,	"include\tables_OBJECT.c", 95; 896,
 3057                        		.dbg	line,	"include\tables_OBJECT.c", 96; 896
 3058                        		.dbg	line,	"include\tables_OBJECT.c", 97; };
 3059                        		.dbg	line,	"include\tables_OBJECT.c", 100; /*const char              TABLE_REWARD_TYPE_LV1[OBJECT_NUMBER_LV1]       =   {
 3060                        		.dbg	line,	"include\tables_OBJECT.c", 101; TYPE_POT
 3061                        		.dbg	line,	"include\tables_OBJECT.c", 102; TYPE_POT,
 3062                        		.dbg	line,	"include\tables_OBJECT.c", 103; TYPE_POT,
 3063                        		.dbg	line,	"include\tables_OBJECT.c", 104; TYPE_POT,
 3064                        		.dbg	line,	"include\tables_OBJECT.c", 105; TYPE_POT,
 3065                        		.dbg	line,	"include\tables_OBJECT.c", 106; TYPE_POT,
 3066                        		.dbg	line,	"include\tables_OBJECT.c", 107; TYPE_POT,
 3067                        		.dbg	line,	"include\tables_OBJECT.c", 108; TYPE_POW,
 3068                        		.dbg	line,	"include\tables_OBJECT.c", 109; TYPE_POT,
 3069                        		.dbg	line,	"include\tables_OBJECT.c", 110; TYPE_POT,
 3070                        		.dbg	line,	"include\tables_OBJECT.c", 112; //
 3071                        		.dbg	line,	"include\tables_OBJECT.c", 113; TYPE_POT,
 3072                        		.dbg	line,	"include\tables_OBJECT.c", 114; TYPE_POT,
 3073                        		.dbg	line,	"include\tables_OBJECT.c", 115; TYPE_POT,
 3074                        		.dbg	line,	"include\tables_OBJECT.c", 116; TYPE_POT,
 3075                        		.dbg	line,	"include\tables_OBJECT.c", 117; TYPE_POT,
 3076                        		.dbg	line,	"include\tables_OBJECT.c", 118; TYPE_POT,
 3077                        		.dbg	line,	"include\tables_OBJECT.c", 119; TYPE_POT,
 3078                        		.dbg	line,	"include\tables_OBJECT.c", 120; TYPE_POT,
 3079                        		.dbg	line,	"include\tables_OBJECT.c", 122; //
 3080                        		.dbg	line,	"include\tables_OBJECT.c", 123; TYPE_GRAY_KEY,
 3081                        		.dbg	line,	"include\tables_OBJECT.c", 124; TYPE_GRAY_KEY,
 3082                        		.dbg	line,	"include\tables_OBJECT.c", 125; TYPE_GRAY_KEY,
 3083                        		.dbg	line,	"include\tables_OBJECT.c", 126; TYPE_COIN_5,
 3084                        		.dbg	line,	"include\tables_OBJECT.c", 127; TYPE_GRAY_KEY
 3085                        		.dbg	line,	"include\tables_OBJECT.c", 128; };*/
 3086                        		.dbg	line,	"include\tables_OBJECT.c", 133; const signed int        TABLE_CHEST_X_POS_REF_LV1[CHEST_NUMBER_LV1]   =   {
 3087                        		.dbg	line,	"include\tables_OBJECT.c", 134; 1072,
 3088                        		.dbg	line,	"include\tables_OBJECT.c", 135; 816
 3089                        		.dbg	line,	"include\tables_OBJECT.c", 136; };
 3090                        		.dbg	line,	"include\tables_OBJECT.c", 139; const signed int        TABLE_CHEST_Y_POS_REF_LV1[CHEST_NUMBER_LV1]   =   {
 3091                        		.dbg	line,	"include\tables_OBJECT.c", 140; 832,
 3092                        		.dbg	line,	"include\tables_OBJECT.c", 141; 848
 3093                        		.dbg	line,	"main.c", 17; };
 3094                        		.dbg	line,	"main.c", 18; #include "include/tables_PLAYER.c"
 3095                        		.dbg	line,	"include\tables_PLAYER.c", 3; const unsigned char     *TABLE_PLAYER_TILES_ADR[2]     =   {
 3096                        		.dbg	line,	"include\tables_PLAYER.c", 4; &tiles_SPR_PLAYER_ARMOR,
 3097                        		.dbg	line,	"include\tables_PLAYER.c", 5; &tiles_SPR_PLAYER_NAKED
 3098                        		.dbg	line,	"include\tables_PLAYER.c", 6; };
 3099                        		.dbg	line,	"include\tables_PLAYER.c", 9; const unsigned char     TABLE_PLAYER_TILES_BANK[2]     =   {
 3100                        		.dbg	line,	"include\tables_PLAYER.c", 10; ^tiles_SPR_PLAYER_ARMOR,
 3101                        		.dbg	line,	"include\tables_PLAYER.c", 11; ^tiles_SPR_PLAYER_NAKED
 3102                        		.dbg	line,	"include\tables_PLAYER.c", 12; };
 3103                        		.dbg	line,	"include\tables_PLAYER.c", 15; const signed char       TABLE_PLAYER_JUMP_V[35]     =   {
 3104                        		.dbg	line,	"include\tables_PLAYER.c", 16; // UPWARD
 3105                        		.dbg	line,	"include\tables_PLAYER.c", 17; -4,
 3106                        		.dbg	line,	"include\tables_PLAYER.c", 18; -5,
 3107                        		.dbg	line,	"include\tables_PLAYER.c", 19; -10,
 3108                        		.dbg	line,	"include\tables_PLAYER.c", 20; -4,
 3109                        		.dbg	line,	"include\tables_PLAYER.c", 21; -4,
 3110                        		.dbg	line,	"include\tables_PLAYER.c", 22; -7,
 3111                        		.dbg	line,	"include\tables_PLAYER.c", 23; -6,
 3112                        		.dbg	line,	"include\tables_PLAYER.c", 24; -3,
 3113                        		.dbg	line,	"include\tables_PLAYER.c", 25; -5,
 3114                        		.dbg	line,	"include\tables_PLAYER.c", 26; -2,
 3115                        		.dbg	line,	"include\tables_PLAYER.c", 27; -4,
 3116                        		.dbg	line,	"include\tables_PLAYER.c", 28; -1,
 3117                        		.dbg	line,	"include\tables_PLAYER.c", 29; -1,
 3118                        		.dbg	line,	"include\tables_PLAYER.c", 30; -1,
 3119                        		.dbg	line,	"include\tables_PLAYER.c", 31; -1,
 3120                        		.dbg	line,	"include\tables_PLAYER.c", 32; 0,
 3121                        		.dbg	line,	"include\tables_PLAYER.c", 33; 0,
 3122                        		.dbg	line,	"include\tables_PLAYER.c", 34; 0,
 3123                        		.dbg	line,	"include\tables_PLAYER.c", 35; 0,
 3124                        		.dbg	line,	"include\tables_PLAYER.c", 36; // DOWNWARD
 3125                        		.dbg	line,	"include\tables_PLAYER.c", 37; 1,
 3126                        		.dbg	line,	"include\tables_PLAYER.c", 38; 1,
 3127                        		.dbg	line,	"include\tables_PLAYER.c", 39; 1,
 3128                        		.dbg	line,	"include\tables_PLAYER.c", 40; 1,
 3129                        		.dbg	line,	"include\tables_PLAYER.c", 41; 4,
 3130                        		.dbg	line,	"include\tables_PLAYER.c", 42; 2,
 3131                        		.dbg	line,	"include\tables_PLAYER.c", 43; 5,
 3132                        		.dbg	line,	"include\tables_PLAYER.c", 44; 3,
 3133                        		.dbg	line,	"include\tables_PLAYER.c", 45; 6,
 3134                        		.dbg	line,	"include\tables_PLAYER.c", 46; 7,
 3135                        		.dbg	line,	"include\tables_PLAYER.c", 47; 4,
 3136                        		.dbg	line,	"include\tables_PLAYER.c", 48; 4,
 3137                        		.dbg	line,	"include\tables_PLAYER.c", 49; 10,
 3138                        		.dbg	line,	"include\tables_PLAYER.c", 50; 4,
 3139                        		.dbg	line,	"include\tables_PLAYER.c", 51; 4,
 3140                        		.dbg	line,	"include\tables_PLAYER.c", 52; 5
 3141                        		.dbg	line,	"include\tables_PLAYER.c", 53; };
 3142                        		.dbg	line,	"include\tables_PLAYER.c", 56; const signed char       TABLE_PLAYER_FALL[21]       =   {
 3143                        		.dbg	line,	"include\tables_PLAYER.c", 57; 0,
 3144                        		.dbg	line,	"include\tables_PLAYER.c", 58; 0,
 3145                        		.dbg	line,	"include\tables_PLAYER.c", 59; 0,
 3146                        		.dbg	line,	"include\tables_PLAYER.c", 60; 0,
 3147                        		.dbg	line,	"include\tables_PLAYER.c", 61; 1,
 3148                        		.dbg	line,	"include\tables_PLAYER.c", 62; 1,
 3149                        		.dbg	line,	"include\tables_PLAYER.c", 63; 1,
 3150                        		.dbg	line,	"include\tables_PLAYER.c", 64; 1,
 3151                        		.dbg	line,	"include\tables_PLAYER.c", 65; 2,
 3152                        		.dbg	line,	"include\tables_PLAYER.c", 66; 2,
 3153                        		.dbg	line,	"include\tables_PLAYER.c", 67; 2,
 3154                        		.dbg	line,	"include\tables_PLAYER.c", 68; 2,
 3155                        		.dbg	line,	"include\tables_PLAYER.c", 69; 3,
 3156                        		.dbg	line,	"include\tables_PLAYER.c", 70; 3,
 3157                        		.dbg	line,	"include\tables_PLAYER.c", 71; 3,
 3158                        		.dbg	line,	"include\tables_PLAYER.c", 72; 4,
 3159                        		.dbg	line,	"include\tables_PLAYER.c", 73; 4,
 3160                        		.dbg	line,	"include\tables_PLAYER.c", 74; 4,
 3161                        		.dbg	line,	"include\tables_PLAYER.c", 75; 4,
 3162                        		.dbg	line,	"include\tables_PLAYER.c", 76; 4,
 3163                        		.dbg	line,	"include\tables_PLAYER.c", 77; 5
 3164                        		.dbg	line,	"include\tables_PLAYER.c", 78; };
 3165                        		.dbg	line,	"include\tables_PLAYER.c", 81; const signed char       TABLE_PLAYER_JUMP_LADDER[30]    =   {
 3166                        		.dbg	line,	"include\tables_PLAYER.c", 82; // UPWARD
 3167                        		.dbg	line,	"include\tables_PLAYER.c", 83; -4,
 3168                        		.dbg	line,	"include\tables_PLAYER.c", 84; -4,
 3169                        		.dbg	line,	"include\tables_PLAYER.c", 85; -3,
 3170                        		.dbg	line,	"include\tables_PLAYER.c", 86; -3,
 3171                        		.dbg	line,	"include\tables_PLAYER.c", 87; -3,
 3172                        		.dbg	line,	"include\tables_PLAYER.c", 88; -2,
 3173                        		.dbg	line,	"include\tables_PLAYER.c", 89; -2,
 3174                        		.dbg	line,	"include\tables_PLAYER.c", 90; -2,
 3175                        		.dbg	line,	"include\tables_PLAYER.c", 91; -1,
 3176                        		.dbg	line,	"include\tables_PLAYER.c", 92; -1,
 3177                        		.dbg	line,	"include\tables_PLAYER.c", 93; -1,
 3178                        		.dbg	line,	"include\tables_PLAYER.c", 94; -1,
 3179                        		.dbg	line,	"include\tables_PLAYER.c", 95; -1,
 3180                        		.dbg	line,	"include\tables_PLAYER.c", 96; 0,
 3181                        		.dbg	line,	"include\tables_PLAYER.c", 97; 0,
 3182                        		.dbg	line,	"include\tables_PLAYER.c", 98; 0,
 3183                        		.dbg	line,	"include\tables_PLAYER.c", 99; 0,
 3184                        		.dbg	line,	"include\tables_PLAYER.c", 100; // DOWNWARD
 3185                        		.dbg	line,	"include\tables_PLAYER.c", 101; 1,
 3186                        		.dbg	line,	"include\tables_PLAYER.c", 102; 1,
 3187                        		.dbg	line,	"include\tables_PLAYER.c", 103; 1,
 3188                        		.dbg	line,	"include\tables_PLAYER.c", 104; 1,
 3189                        		.dbg	line,	"include\tables_PLAYER.c", 105; 1,
 3190                        		.dbg	line,	"include\tables_PLAYER.c", 106; 2,
 3191                        		.dbg	line,	"include\tables_PLAYER.c", 107; 2,
 3192                        		.dbg	line,	"include\tables_PLAYER.c", 108; 2,
 3193                        		.dbg	line,	"include\tables_PLAYER.c", 109; 3,
 3194                        		.dbg	line,	"include\tables_PLAYER.c", 110; 3,
 3195                        		.dbg	line,	"include\tables_PLAYER.c", 111; 3,
 3196                        		.dbg	line,	"include\tables_PLAYER.c", 112; 4,
 3197                        		.dbg	line,	"include\tables_PLAYER.c", 113; 4
 3198                        		.dbg	line,	"include\tables_PLAYER.c", 114; };
 3199                        		.dbg	line,	"include\tables_PLAYER.c", 123; const unsigned char     *TABLE_WEAPON_TILES_ADR[5]     =   {
 3200                        		.dbg	line,	"include\tables_PLAYER.c", 124; &tiles_SPR_WEAPON_0,
 3201                        		.dbg	line,	"include\tables_PLAYER.c", 125; &tiles_SPR_WEAPON_1,
 3202                        		.dbg	line,	"include\tables_PLAYER.c", 126; &tiles_SPR_WEAPON_2,
 3203                        		.dbg	line,	"include\tables_PLAYER.c", 127; &tiles_SPR_WEAPON_3,
 3204                        		.dbg	line,	"include\tables_PLAYER.c", 128; &tiles_SPR_WEAPON_4
 3205                        		.dbg	line,	"include\tables_PLAYER.c", 129; };
 3206                        		.dbg	line,	"include\tables_PLAYER.c", 132; const unsigned char     TABLE_WEAPON_TILES_BANK[5]     =   {
 3207                        		.dbg	line,	"include\tables_PLAYER.c", 133; ^tiles_SPR_WEAPON_0,
 3208                        		.dbg	line,	"include\tables_PLAYER.c", 134; ^tiles_SPR_WEAPON_1,
 3209                        		.dbg	line,	"include\tables_PLAYER.c", 135; ^tiles_SPR_WEAPON_2,
 3210                        		.dbg	line,	"include\tables_PLAYER.c", 136; ^tiles_SPR_WEAPON_3,
 3211                        		.dbg	line,	"include\tables_PLAYER.c", 137; ^tiles_SPR_WEAPON_4
 3212                        		.dbg	line,	"main.c", 18; };
 3213                        		.dbg	line,	"main.c", 19; #include "include/tables_SHOP.c"
 3214                        		.dbg	line,	"include\tables_SHOP.c", 1; //-----------------------------------------------------------------------------//
 3215                        		.dbg	line,	"include\tables_SHOP.c", 2; //                                                                             //
 3216                        		.dbg	line,	"include\tables_SHOP.c", 3; //                                   LEVEL 1                                   //
 3217                        		.dbg	line,	"include\tables_SHOP.c", 4; //                                                                             //
 3218                        		.dbg	line,	"include\tables_SHOP.c", 5; //-----------------------------------------------------------------------------//
 3219                        		.dbg	line,	"include\tables_SHOP.c", 7; const char              TABLE_SHOP_ITEMS_LV1[10]        =   {
 3220                        		.dbg	line,	"include\tables_SHOP.c", 8; TYPE_ITEM_WEAPON_2,
 3221                        		.dbg	line,	"include\tables_SHOP.c", 9; TYPE_ITEM_WEAPON_3,
 3222                        		.dbg	line,	"include\tables_SHOP.c", 10; TYPE_ITEM_WEAPON_4,
 3223                        		.dbg	line,	"include\tables_SHOP.c", 11; TYPE_ITEM_WEAPON_5,
 3224                        		.dbg	line,	"include\tables_SHOP.c", 12; TYPE_ITEM_KEY,
 3225                        		.dbg	line,	"include\tables_SHOP.c", 14; TYPE_ITEM_ARMOR_2,
 3226                        		.dbg	line,	"include\tables_SHOP.c", 15; TYPE_ITEM_ARMOR_3,
 3227                        		.dbg	line,	"include\tables_SHOP.c", 16; TYPE_ITEM_ARMOR_4,
 3228                        		.dbg	line,	"include\tables_SHOP.c", 17; TYPE_ITEM_ARMOR_5,
 3229                        		.dbg	line,	"include\tables_SHOP.c", 18; TYPE_ITEM_POTION
 3230                        		.dbg	line,	"include\tables_SHOP.c", 19; };
 3231                        		.dbg	line,	"include\tables_SHOP.c", 22; const int               TABLE_SHOP_PRICES_LV1[10]       =   {
 3232                        		.dbg	line,	"include\tables_SHOP.c", 23; 100,
 3233                        		.dbg	line,	"include\tables_SHOP.c", 24; 1000,
 3234                        		.dbg	line,	"include\tables_SHOP.c", 25; 2400,
 3235                        		.dbg	line,	"include\tables_SHOP.c", 26; 9600,
 3236                        		.dbg	line,	"include\tables_SHOP.c", 27; 30,
 3237                        		.dbg	line,	"include\tables_SHOP.c", 28; 80,
 3238                        		.dbg	line,	"include\tables_SHOP.c", 29; 300,
 3239                        		.dbg	line,	"include\tables_SHOP.c", 30; 800,
 3240                        		.dbg	line,	"include\tables_SHOP.c", 31; 1600,
 3241                        		.dbg	line,	"include\tables_SHOP.c", 32; 150
 3242                        		.dbg	line,	"include\tables_SHOP.c", 33; };
 3243                        		.dbg	line,	"include\tables_SHOP.c", 36; const unsigned char     *TABLE_SHOP_ITEMS_TILES_ADR[10]     =   {
 3244                        		.dbg	line,	"include\tables_SHOP.c", 37; &tiles_ITEM_WEAPON_2,
 3245                        		.dbg	line,	"include\tables_SHOP.c", 38; &tiles_ITEM_WEAPON_3,
 3246                        		.dbg	line,	"include\tables_SHOP.c", 39; &tiles_ITEM_WEAPON_4,
 3247                        		.dbg	line,	"include\tables_SHOP.c", 40; &tiles_ITEM_WEAPON_5,
 3248                        		.dbg	line,	"include\tables_SHOP.c", 41; &tiles_ITEM_KEY,
 3249                        		.dbg	line,	"include\tables_SHOP.c", 42; &tiles_ITEM_ARMOR_2,
 3250                        		.dbg	line,	"include\tables_SHOP.c", 43; &tiles_ITEM_ARMOR_3,
 3251                        		.dbg	line,	"include\tables_SHOP.c", 44; &tiles_ITEM_ARMOR_4,
 3252                        		.dbg	line,	"include\tables_SHOP.c", 45; &tiles_ITEM_ARMOR_5,
 3253                        		.dbg	line,	"include\tables_SHOP.c", 46; &tiles_ITEM_POTION
 3254                        		.dbg	line,	"include\tables_SHOP.c", 47; };
 3255                        		.dbg	line,	"include\tables_SHOP.c", 50; const unsigned char     TABLE_SHOP_ITEMS_TILES_BANK[10]     =   {
 3256                        		.dbg	line,	"include\tables_SHOP.c", 51; ^tiles_ITEM_WEAPON_2,
 3257                        		.dbg	line,	"include\tables_SHOP.c", 52; ^tiles_ITEM_WEAPON_3,
 3258                        		.dbg	line,	"include\tables_SHOP.c", 53; ^tiles_ITEM_WEAPON_4,
 3259                        		.dbg	line,	"include\tables_SHOP.c", 54; ^tiles_ITEM_WEAPON_5,
 3260                        		.dbg	line,	"include\tables_SHOP.c", 55; ^tiles_ITEM_KEY,
 3261                        		.dbg	line,	"include\tables_SHOP.c", 56; ^tiles_ITEM_ARMOR_2,
 3262                        		.dbg	line,	"include\tables_SHOP.c", 57; ^tiles_ITEM_ARMOR_3,
 3263                        		.dbg	line,	"include\tables_SHOP.c", 58; ^tiles_ITEM_ARMOR_4,
 3264                        		.dbg	line,	"include\tables_SHOP.c", 59; ^tiles_ITEM_ARMOR_5,
 3265                        		.dbg	line,	"include\tables_SHOP.c", 60; ^tiles_ITEM_POTION
 3266                        		.dbg	line,	"include\tables_SHOP.c", 61; };
 3267                        		.dbg	line,	"include\tables_SHOP.c", 64; const char              TABLE_CURSOR_POS_X[11]              =   {
 3268                        		.dbg	line,	"include\tables_SHOP.c", 65; 24,
 3269                        		.dbg	line,	"include\tables_SHOP.c", 66; 56,
 3270                        		.dbg	line,	"include\tables_SHOP.c", 67; 96,
 3271                        		.dbg	line,	"include\tables_SHOP.c", 68; 136,
 3272                        		.dbg	line,	"include\tables_SHOP.c", 69; 176,
 3273                        		.dbg	line,	"include\tables_SHOP.c", 70; 24,
 3274                        		.dbg	line,	"include\tables_SHOP.c", 71; 56,
 3275                        		.dbg	line,	"include\tables_SHOP.c", 72; 96,
 3276                        		.dbg	line,	"include\tables_SHOP.c", 73; 136,
 3277                        		.dbg	line,	"include\tables_SHOP.c", 74; 176,
 3278                        		.dbg	line,	"include\tables_SHOP.c", 75; 212
 3279                        		.dbg	line,	"include\tables_SHOP.c", 76; };
 3280                        		.dbg	line,	"main.c", 23; #include "include/routines_LEVELS.c"
 3281                        		.dbg	line,	"include\routines_LEVELS.c", 1; #include "huc.h"
 3282                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
 3283                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
 3284                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
 3285                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
 3286                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
 3287                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
 3288                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
 3289                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
 3290                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
 3291                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
 3292                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
 3293                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 3294                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 3295                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 3296                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
 3297                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
 3298                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
 3299                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
 3300                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
 3301                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
 3302                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
 3303                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
 3304                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
 3305                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
 3306                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
 3307                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
 3308                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
 3309                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
 3310                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
 3311                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
 3312                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
 3313                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
 3314                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
 3315                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
 3316                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
 3317                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
 3318                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
 3319                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
 3320                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
 3321                        		.dbg	line,	"include\routines_LEVELS.c", 2; #include "hucc-scroll.h"
 3322                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 1; #ifndef _hucc_scroll_h
 3323                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 2; #define _hucc_scroll_h
 3324                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 4; /****************************************************************************
 3325                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 5; ; ***************************************************************************
 3326                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 6; ;
 3327                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 7; ; hucc-scroll.h
 3328                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 8; ;
 3329                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 9; ; Routines for a fast split-screen scrolling system.
 3330                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 10; ;
 3331                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 11; ; Copyright John Brandwood 2024.
 3332                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 12; ;
 3333                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 3334                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 3335                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 3336                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 16; ;
 3337                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 17; ; ***************************************************************************
 3338                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 18; ; ***************************************************************************
 3339                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 19; ;
 3340                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 20; ; The maximum number of splits for each screen layer is set in your project's
 3341                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 21; ; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
 3342                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 22; ;
 3343                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 23; ; Your first active split must be defined to start at screen line 0, and then
 3344                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 24; ; the rest of the active splits must be in increasing line order to match the
 3345                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 25; ; way that the PC Engine displays the output image.
 3346                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 26; ;
 3347                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 27; ; You can have disabled splits interleaved with your active splits.
 3348                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 28; ;
 3349                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 29; ; Splits that are normally disabled can be used to create full screen effects
 3350                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 30; ; such as bouncing the screen up and down by adding blank areas at the top or
 3351                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 31; ; bottom of the screen, and then rapidly changing the height of those areas.
 3352                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 32; ;
 3353                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 33; ; ***************************************************************************
 3354                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 34; ; **************************************************************************/
 3355                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 36; // *************
 3356                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 37; // VDC bits for display_flags ...
 3357                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 38; // *************
 3358                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 40; #ifndef BKG_OFF
 3359                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 41; #define BKG_OFF 0x00
 3360                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 42; #endif
 3361                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 44; #ifndef SPR_OFF
 3362                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 45; #define SPR_OFF 0x00
 3363                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 46; #endif
 3364                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 48; #ifndef BKG_ON
 3365                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 49; #define BKG_ON 0x80
 3366                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 50; #endif
 3367                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 52; #ifndef SPR_ON
 3368                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 53; #define SPR_ON 0x40
 3369                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 54; #endif
 3370                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 56; // *************
 3371                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 57; // Functions in hucc-scroll.asm ...
 3372                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 58; // *************
 3373                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 60; #ifdef __HUCC__
 3374                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 62; #asmdef	HUCC_USES_NEW_SCROLL 1
 3375                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 64; extern void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
 3376                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 65; extern void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
 3377                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 67; extern void __fastcall disable_split( unsigned char index<acc> );
 3378                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 68; extern void __fastcall sgx_disable_split( unsigned char index<acc> );
 3379                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 70; extern void __fastcall __macro disable_all_splits( void );
 3380                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 71; extern void __fastcall __macro sgx_disable_all_splits( void );
 3381                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 73; #asm
 3382                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 74; .macro	_disable_all_splits
 3383                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 75; ldy	#HUCC_PCE_SPLITS - 1
 3384                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 76; !loop:		tya
 3385                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 77; call	_disable_split.1
 3386                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 78; dey
 3387                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 79; bpl	!loop-
 3388                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 80; .endm
 3389                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 82; .macro	_sgx_disable_all_splits
 3390                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 83; ldy	#HUCC_SGX_SPLITS - 1
 3391                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 84; !loop:		tya
 3392                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 85; call	_sgx_disable_split.1
 3393                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 86; dey
 3394                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 87; bpl	!loop-
 3395                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 88; .endm
 3396                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 89; #endasm
 3397                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 91; #endif // __HUCC__
 3398                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 93; #endif // _hucc_scroll_h
 3399                        		.dbg	line,	"include\routines_LEVELS.c", 3; #include "hucc-chrmap.h"
 3400                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 1; #ifndef _hucc_chrmap_h
 3401                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 2; #define _hucc_chrmap_h
 3402                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 4; /****************************************************************************
 3403                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 5; ; ***************************************************************************
 3404                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 6; ;
 3405                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 7; ; hucc-chrmap.h
 3406                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 8; ;
 3407                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 9; ; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
 3408                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 10; ;
 3409                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 11; ; Copyright John Brandwood 2025.
 3410                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 12; ;
 3411                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 3412                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 3413                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 3414                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 16; ;
 3415                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 17; ; ***************************************************************************
 3416                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 18; ; ***************************************************************************
 3417                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 19; ;
 3418                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 20; ; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
 3419                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 21; ;
 3420                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 22; ; The maximum total size for a chrmap is 16KBytes, which allows for maps up
 3421                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 23; ; to 256x32 tiles (2048x256 pixels).
 3422                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 24; ;
 3423                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 25; ; ***************************************************************************
 3424                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 26; ; **************************************************************************/
 3425                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 28; // *************
 3426                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 29; // This code extends the blkmap library ...
 3427                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 30; // *************
 3428                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 32; #include "hucc-blkmap.h"
 3429                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 34; // *************
 3430                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 35; // Functions in chrmap.asm ...
 3431                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 36; // *************
 3432                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 38; #ifdef __HUCC__
 3433                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 40; #asmdef	HUCC_USES_CHRMAP 1
 3434                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 42; extern void __fastcall __nop set_chrmap( unsigned char __far *chrmap<vdc_map_bank:vdc_map_addr>, unsigned char tiles_w<vdc_map_line_w> );
 3435                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 44; extern void __fastcall draw_bat( void );
 3436                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 45; extern void __fastcall scroll_bat( void );
 3437                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 47; extern void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 3438                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 49; #ifdef _SGX
 3439                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 51; extern void __fastcall __nop sgx_set_chrmap( unsigned char __far *chrmap<sgx_map_bank:sgx_map_addr>, unsigned char tiles_w<sgx_map_line_w> );
 3440                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 53; extern void __fastcall sgx_draw_bat( void );
 3441                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 54; extern void __fastcall sgx_scroll_bat( void );
 3442                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 56; extern void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 3443                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 58; #endif
 3444                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 60; #endif // __HUCC__
 3445                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 62; #endif // _hucc_chrmap_h
 3446                        		.dbg	line,	"include\routines_LEVELS.c", 4; #include "hucc-blkmap.h"
 3447                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
 3448                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
 3449                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
 3450                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
 3451                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
 3452                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
 3453                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
 3454                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
 3455                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
 3456                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
 3457                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
 3458                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 3459                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 3460                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 3461                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
 3462                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
 3463                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
 3464                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
 3465                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
 3466                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
 3467                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
 3468                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
 3469                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
 3470                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
 3471                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
 3472                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
 3473                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
 3474                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
 3475                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
 3476                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
 3477                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
 3478                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
 3479                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
 3480                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
 3481                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
 3482                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
 3483                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
 3484                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
 3485                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
 3486                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
 3487                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
 3488                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
 3489                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
 3490                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
 3491                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
 3492                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
 3493                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
 3494                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
 3495                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
 3496                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
 3497                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
 3498                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
 3499                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
 3500                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
 3501                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
 3502                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
 3503                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
 3504                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
 3505                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
 3506                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
 3507                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
 3508                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
 3509                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
 3510                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
 3511                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 3512                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 3513                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
 3514                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 86; .macro	_set_blkmap.2
 3515                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 87; stz	vdc_scr_bank
 3516                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 88; .endm
 3517                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 90; .macro	_set_multimap.2
 3518                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 91; lda	vdc_bat_width
 3519                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 92; lsr	a
 3520                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 93; sta	vdc_map_line_w
 3521                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 94; .endm
 3522                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 96; .macro	SCREEN
 3523                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 97; db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
 3524                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 98; db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
 3525                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 99; db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
 3526                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 100; dw	(\4)
 3527                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 101; .endm
 3528                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
 3529                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
 3530                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
 3531                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
 3532                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
 3533                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
 3534                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
 3535                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
 3536                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
 3537                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
 3538                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
 3539                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
 3540                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
 3541                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
 3542                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
 3543                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
 3544                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
 3545                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
 3546                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
 3547                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
 3548                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
 3549                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
 3550                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
 3551                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
 3552                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
 3553                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 3554                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 3555                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
 3556                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 144; .macro	_sgx_set_blkmap.2
 3557                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 145; stz	sgx_scr_bank
 3558                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 146; .endm
 3559                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 148; .macro	_sgx_set_multimap.2
 3560                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 149; lda	sgx_bat_width
 3561                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 150; lsr	a
 3562                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 151; sta	sgx_map_line_w
 3563                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 152; .endm
 3564                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
 3565                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
 3566                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
 3567                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
 3568                        		.dbg	line,	"include\routines_LEVELS.c", 13; void hide_LEVEL_SPRITES()
 3569                        		.dbg	line,	"include\routines_LEVELS.c", 14; {
 3570                        	;***********************
 3571                        	;***********************
 3572                        	
 3573                        		.hucc
 3574    18:D371             		.proc		_hide_LEVEL_SPRITES
 3575                        		__enter		_hide_LEVEL_SPRITES
 3576                        	
 3577                        		.dbg	line,	"include\routines_LEVELS.c", 15; char i;
 3578                        	
 3579                        		.dbg	line,	"include\routines_LEVELS.c", 17; for(i=0 ; i<64 ; i++)
 3580                        		__st.umiq	0, __hide_LEVEL_SPRITES_end - 1  /* i */
         18:D371  9C 52 26   			stz	__hide_LEVEL_SPRITES_end - 1
 3581    18:D374             	.LL3:
 3582                        		__ld.umq	__hide_LEVEL_SPRITES_end - 1  /* i */
         18:D374  AD 52 26   			lda	__hide_LEVEL_SPRITES_end - 1
 3583                        		__ult_b.uiq	64
         18:D377  C9 40      			cmp	#64		; Subtract integer from A.
         18:D379  6A         			ror	a		; CC if A < integer.
         18:D37A  49 80      			eor	#$80
         18:D37C  2A         			rol	a
 3584                        		__btrue		.LL5
         18:D37D  B0 07      			bcs	.LL5
 3585                        		__bra		.LL6
         18:D37F  80 10      			bra	.LL6
 3586    18:D381             	.LL4:
 3587                        		__inc.umq	__hide_LEVEL_SPRITES_end - 1  /* i */
         18:D381  EE 52 26   			inc	__hide_LEVEL_SPRITES_end - 1
 3588                        		__bra		.LL3
         18:D384  80 EE      			bra	.LL3
 3589    18:D386             	.LL5:
 3590                        	
 3591                        		.dbg	line,	"include\routines_LEVELS.c", 18; {
 3592                        	
 3593                        		.dbg	line,	"include\routines_LEVELS.c", 19; spr_set(i);
 3594                        		__ld.umq	__hide_LEVEL_SPRITES_end - 1  /* i */
         18:D386  AD 52 26   			lda	__hide_LEVEL_SPRITES_end - 1
 3595                        		__call		_spr_set.1
         18:D389  20 DD E7   			call	_spr_set.1
 3596                        	
 3597                        		.dbg	line,	"include\routines_LEVELS.c", 20; spr_hide();
 3598                        		__call		_spr_hide
         18:D38C  20 F8 E7   			call	_spr_hide
 3599                        	
 3600                        		.dbg	line,	"include\routines_LEVELS.c", 21; }
 3601                        		__bra		.LL4
         18:D38F  80 F0      			bra	.LL4
 3602    18:D391             	.LL6:
 3603                        	
 3604                        		.dbg	line,	"include\routines_LEVELS.c", 22; }
 3605    18:D391             	.LL2:
 3606                        		__return	0
         18:D391  4C EF FF   			jmp	leave_proc
 3607                        		.dbg	clear
 3608                        		.endp
 3609                        		.pceas
 3610                        	
 3611                        		.dbg	line,	"include\routines_LEVELS.c", 27; void display_LIFE()
 3612                        		.dbg	line,	"include\routines_LEVELS.c", 28; {
 3613                        	;***********************
 3614                        	;***********************
 3615                        	
 3616                        		.hucc
 3617                        		.proc		_display_LIFE
 3626                        		.endp
 3627                        		.pceas
 3628                        	
 3629                        		.dbg	line,	"include\routines_LEVELS.c", 33; void display_SCORE()
 3630                        		.dbg	line,	"include\routines_LEVELS.c", 34; {
 3631                        	;***********************
 3632                        	;***********************
 3633                        	
 3634                        		.hucc
 3635    18:D3B1             		.proc		_display_SCORE
 3636                        		__enter		_display_SCORE
 3637                        	
 3638                        		.dbg	line,	"include\routines_LEVELS.c", 35; put_number(score,6,14,1);
 3639                        		__ld.wm		_score
         18:D3B1  AD 36 26   			lda.l	_score
         18:D3B4  AC 37 26   			ldy.h	_score
 3640                        		__st.wmq	_bx
         18:D3B7  85 FA      			sta.l	_bx
         18:D3B9  84 FB      			sty.h	_bx
 3641                        		__st.umiq	6, _cl
         18:D3BB  A9 06      			lda.l	#6
         18:D3BD  85 FC      			sta	_cl
 3642                        		__st.umiq	14, _dil
         18:D3BF  A9 0E      			lda.l	#14
         18:D3C1  85 F0      			sta	_dil
 3643                        		__st.umiq	1, _dih
         18:D3C3  A9 01      			lda.l	#1
         18:D3C5  85 F1      			sta	_dih
 3644                        		__call		_put_number.4
         18:D3C7  20 9F FF   			call	_put_number.4
 3645                        	
 3646                        		.dbg	line,	"include\routines_LEVELS.c", 36; }
 3647    18:D3CA             	.LL8:
 3648                        		__return	0
         18:D3CA  4C EF FF   			jmp	leave_proc
 3649                        		.dbg	clear
 3650                        		.endp
 3651                        		.pceas
 3652                        	
 3653                        		.dbg	line,	"include\routines_LEVELS.c", 39; void display_TIME_LEVEL()
 3654                        		.dbg	line,	"include\routines_LEVELS.c", 40; {
 3655                        	;***********************
 3656                        	;***********************
 3657                        	
 3658                        		.hucc
 3659    18:CD6A             		.proc		_display_TIME_LEVEL
 3660                        		__enter		_display_TIME_LEVEL
 3661                        	
 3662                        		.dbg	line,	"include\routines_LEVELS.c", 41; put_number(minutes,1,1,3);
 3663                        		__ld.um		_minutes
         18:CD6A  AD 30 23   			lda	_minutes
         18:CD6D  C2         			cly
 3664                        		__st.wmq	_bx
         18:CD6E  85 FA      			sta.l	_bx
         18:CD70  84 FB      			sty.h	_bx
 3665                        		__st.umiq	1, _cl
         18:CD72  A9 01      			lda.l	#1
         18:CD74  85 FC      			sta	_cl
 3666                        		__st.umiq	1, _dil
         18:CD76  A9 01      			lda.l	#1
         18:CD78  85 F0      			sta	_dil
 3667                        		__st.umiq	3, _dih
         18:CD7A  A9 03      			lda.l	#3
         18:CD7C  85 F1      			sta	_dih
 3668                        		__call		_put_number.4
         18:CD7E  20 9F FF   			call	_put_number.4
 3669                        	
 3670                        		.dbg	line,	"include\routines_LEVELS.c", 43; if(seconds < 10)
 3671                        		__ld.umq	_seconds
         18:CD81  AD 31 23   			lda	_seconds
 3672                        		__ult_b.uiq	10
         18:CD84  C9 0A      			cmp	#10		; Subtract integer from A.
         18:CD86  6A         			ror	a		; CC if A < integer.
         18:CD87  49 80      			eor	#$80
         18:CD89  2A         			rol	a
 3673                        		__bfalse	.LL10
         18:CD8A  90 2C      			bcc	.LL10
 3674                        	
 3675                        		.dbg	line,	"include\routines_LEVELS.c", 44; {
 3676                        	
 3677                        		.dbg	line,	"include\routines_LEVELS.c", 45; put_number(0,1,3,3);
 3678                        		__st.wmiq	0, _bx
         18:CD8C  64 FA      			stz.l	_bx
         18:CD8E  64 FB      			stz.h	_bx
 3679                        		__st.umiq	1, _cl
         18:CD90  A9 01      			lda.l	#1
         18:CD92  85 FC      			sta	_cl
 3680                        		__st.umiq	3, _dil
         18:CD94  A9 03      			lda.l	#3
         18:CD96  85 F0      			sta	_dil
 3681                        		__st.umiq	3, _dih
         18:CD98  A9 03      			lda.l	#3
         18:CD9A  85 F1      			sta	_dih
 3682                        		__call		_put_number.4
         18:CD9C  20 9F FF   			call	_put_number.4
 3683                        	
 3684                        		.dbg	line,	"include\routines_LEVELS.c", 46; put_number(seconds,1,4,3);
 3685                        		__ld.um		_seconds
         18:CD9F  AD 31 23   			lda	_seconds
         18:CDA2  C2         			cly
 3686                        		__st.wmq	_bx
         18:CDA3  85 FA      			sta.l	_bx
         18:CDA5  84 FB      			sty.h	_bx
 3687                        		__st.umiq	1, _cl
         18:CDA7  A9 01      			lda.l	#1
         18:CDA9  85 FC      			sta	_cl
 3688                        		__st.umiq	4, _dil
         18:CDAB  A9 04      			lda.l	#4
         18:CDAD  85 F0      			sta	_dil
 3689                        		__st.umiq	3, _dih
         18:CDAF  A9 03      			lda.l	#3
         18:CDB1  85 F1      			sta	_dih
 3690                        		__call		_put_number.4
         18:CDB3  20 9F FF   			call	_put_number.4
 3691                        	
 3692                        		.dbg	line,	"include\routines_LEVELS.c", 47; }
 3693                        	
 3694                        		.dbg	line,	"include\routines_LEVELS.c", 49; else
 3695                        		__bra		.LL11
         18:CDB6  80 17      			bra	.LL11
 3696    18:CDB8             	.LL10:
 3697                        	
 3698                        		.dbg	line,	"include\routines_LEVELS.c", 50; {
 3699                        	
 3700                        		.dbg	line,	"include\routines_LEVELS.c", 51; put_number(seconds,2,3,3);
 3701                        		__ld.um		_seconds
         18:CDB8  AD 31 23   			lda	_seconds
         18:CDBB  C2         			cly
 3702                        		__st.wmq	_bx
         18:CDBC  85 FA      			sta.l	_bx
         18:CDBE  84 FB      			sty.h	_bx
 3703                        		__st.umiq	2, _cl
         18:CDC0  A9 02      			lda.l	#2
         18:CDC2  85 FC      			sta	_cl
 3704                        		__st.umiq	3, _dil
         18:CDC4  A9 03      			lda.l	#3
         18:CDC6  85 F0      			sta	_dil
 3705                        		__st.umiq	3, _dih
         18:CDC8  A9 03      			lda.l	#3
         18:CDCA  85 F1      			sta	_dih
 3706                        		__call		_put_number.4
         18:CDCC  20 9F FF   			call	_put_number.4
 3707                        	
 3708                        		.dbg	line,	"include\routines_LEVELS.c", 52; }
 3709    18:CDCF             	.LL11:
 3710                        	
 3711                        		.dbg	line,	"include\routines_LEVELS.c", 54; time_counter += 1;
 3712                        		__add_st.umiq	1, _time_counter
         18:CDCF  EE 32 23   			inc	_time_counter
 3713                        	
 3714                        		.dbg	line,	"include\routines_LEVELS.c", 56; if(time_counter == 60)
 3715                        		__ld.umq	_time_counter
         18:CDD2  AD 32 23   			lda	_time_counter
 3716                        		__equ_b.uiq	60
         18:CDD5  C9 3C      			cmp	#60
         18:CDD7  F0 01      			beq	!+
         18:CDD9  18         			clc
         18:CDDA             	!:
 3717                        		__bfalse	.LL12
         18:CDDA  90 28      			bcc	.LL12
 3718                        	
 3719                        		.dbg	line,	"include\routines_LEVELS.c", 57; {
 3720                        	
 3721                        		.dbg	line,	"include\routines_LEVELS.c", 58; time_counter = 0;
 3722                        		__st.umiq	0, _time_counter
         18:CDDC  9C 32 23   			stz	_time_counter
 3723                        	
 3724                        		.dbg	line,	"include\routines_LEVELS.c", 60; if(seconds > 0)
 3725                        		__ld.umq	_seconds
         18:CDDF  AD 31 23   			lda	_seconds
 3726                        		__ugt_b.uiq	0
         18:CDE2  18         			clc			; Subtract integer+1 from A.
         18:CDE3  E9 00      			sbc	#0		; CS if A > integer.
 3727                        		__bfalse	.LL13
         18:CDE5  90 05      			bcc	.LL13
 3728                        	
 3729                        		.dbg	line,	"include\routines_LEVELS.c", 61; {
 3730                        	
 3731                        		.dbg	line,	"include\routines_LEVELS.c", 62; seconds -= 1;
 3732                        		__sub_st.umiq	1, _seconds
         18:CDE7  CE 31 23   			dec	_seconds
 3733                        	
 3734                        		.dbg	line,	"include\routines_LEVELS.c", 63; }
 3735                        	
 3736                        		.dbg	line,	"include\routines_LEVELS.c", 65; else
 3737                        		__bra		.LL14
         18:CDEA  80 18      			bra	.LL14
 3738    18:CDEC             	.LL13:
 3739                        	
 3740                        		.dbg	line,	"include\routines_LEVELS.c", 66; {
 3741                        	
 3742                        		.dbg	line,	"include\routines_LEVELS.c", 67; if(minutes > 0)
 3743                        		__ld.umq	_minutes
         18:CDEC  AD 30 23   			lda	_minutes
 3744                        		__ugt_b.uiq	0
         18:CDEF  18         			clc			; Subtract integer+1 from A.
         18:CDF0  E9 00      			sbc	#0		; CS if A > integer.
 3745                        		__bfalse	.LL15
         18:CDF2  90 0A      			bcc	.LL15
 3746                        	
 3747                        		.dbg	line,	"include\routines_LEVELS.c", 68; {
 3748                        	
 3749                        		.dbg	line,	"include\routines_LEVELS.c", 69; seconds = 59;
 3750                        		__st.umiq	59, _seconds
         18:CDF4  A9 3B      			lda.l	#59
         18:CDF6  8D 31 23   			sta	_seconds
 3751                        	
 3752                        		.dbg	line,	"include\routines_LEVELS.c", 70; minutes -= 1;
 3753                        		__sub_st.umiq	1, _minutes
         18:CDF9  CE 30 23   			dec	_minutes
 3754                        	
 3755                        		.dbg	line,	"include\routines_LEVELS.c", 71; }
 3756                        	
 3757                        		.dbg	line,	"include\routines_LEVELS.c", 73; else
 3758                        		__bra		.LL16
         18:CDFC  80 06      			bra	.LL16
 3759    18:CDFE             	.LL15:
 3760                        	
 3761                        		.dbg	line,	"include\routines_LEVELS.c", 74; {
 3762                        	
 3763                        		.dbg	line,	"include\routines_LEVELS.c", 75; seconds = 0;
 3764                        		__st.umiq	0, _seconds
         18:CDFE  9C 31 23   			stz	_seconds
 3765                        	
 3766                        		.dbg	line,	"include\routines_LEVELS.c", 76; minutes = 0;
 3767                        		__st.umiq	0, _minutes
         18:CE01  9C 30 23   			stz	_minutes
 3768                        	
 3769                        		.dbg	line,	"include\routines_LEVELS.c", 77; // TIME OUT //
 3770                        	
 3771                        		.dbg	line,	"include\routines_LEVELS.c", 78; }
 3772    18:CE04             	.LL16:
 3773                        	
 3774                        		.dbg	line,	"include\routines_LEVELS.c", 79; }
 3775    18:CE04             	.LL14:
 3776                        	
 3777                        		.dbg	line,	"include\routines_LEVELS.c", 80; } 
 3778                        	
 3779                        		.dbg	line,	"include\routines_LEVELS.c", 81; }
 3780    18:CE04             	.LL12:
 3781    18:CE04             	.LL9:
 3782                        		__return	0
         18:CE04  4C EF FF   			jmp	leave_proc
 3783                        		.dbg	clear
 3784                        		.endp
 3785                        		.pceas
 3786                        	
 3787                        		.dbg	line,	"include\routines_LEVELS.c", 84; void display_KEY()
 3788                        		.dbg	line,	"include\routines_LEVELS.c", 85; {
 3789                        	;***********************
 3790                        	;***********************
 3791                        	
 3792                        		.hucc
 3793    18:D405             		.proc		_display_KEY
 3794                        		__enter		_display_KEY
 3795                        	
 3796                        		.dbg	line,	"include\routines_LEVELS.c", 86; put_number(key_amount,2,7,27);
 3797                        		__ld.um		_key_amount
         18:D405  AD 2E 23   			lda	_key_amount
         18:D408  C2         			cly
 3798                        		__st.wmq	_bx
         18:D409  85 FA      			sta.l	_bx
         18:D40B  84 FB      			sty.h	_bx
 3799                        		__st.umiq	2, _cl
         18:D40D  A9 02      			lda.l	#2
         18:D40F  85 FC      			sta	_cl
 3800                        		__st.umiq	7, _dil
         18:D411  A9 07      			lda.l	#7
         18:D413  85 F0      			sta	_dil
 3801                        		__st.umiq	27, _dih
         18:D415  A9 1B      			lda.l	#27
         18:D417  85 F1      			sta	_dih
 3802                        		__call		_put_number.4
         18:D419  20 9F FF   			call	_put_number.4
 3803                        	
 3804                        		.dbg	line,	"include\routines_LEVELS.c", 87; }
 3805    18:D41C             	.LL17:
 3806                        		__return	0
         18:D41C  4C EF FF   			jmp	leave_proc
 3807                        		.dbg	clear
 3808                        		.endp
 3809                        		.pceas
 3810                        	
 3811                        		.dbg	line,	"include\routines_LEVELS.c", 90; void display_POTION()
 3812                        		.dbg	line,	"include\routines_LEVELS.c", 91; {
 3813                        	;***********************
 3814                        	;***********************
 3815                        	
 3816                        		.hucc
 3817    18:D41F             		.proc		_display_POTION
 3818                        		__enter		_display_POTION
 3819                        	
 3820                        		.dbg	line,	"include\routines_LEVELS.c", 92; put_number(potion_amount,2,19,27);
 3821                        		__ld.um		_potion_amount
         18:D41F  AD 2F 23   			lda	_potion_amount
         18:D422  C2         			cly
 3822                        		__st.wmq	_bx
         18:D423  85 FA      			sta.l	_bx
         18:D425  84 FB      			sty.h	_bx
 3823                        		__st.umiq	2, _cl
         18:D427  A9 02      			lda.l	#2
         18:D429  85 FC      			sta	_cl
 3824                        		__st.umiq	19, _dil
         18:D42B  A9 13      			lda.l	#19
         18:D42D  85 F0      			sta	_dil
 3825                        		__st.umiq	27, _dih
         18:D42F  A9 1B      			lda.l	#27
         18:D431  85 F1      			sta	_dih
 3826                        		__call		_put_number.4
         18:D433  20 9F FF   			call	_put_number.4
 3827                        	
 3828                        		.dbg	line,	"include\routines_LEVELS.c", 93; }
 3829    18:D436             	.LL18:
 3830                        		__return	0
         18:D436  4C EF FF   			jmp	leave_proc
 3831                        		.dbg	clear
 3832                        		.endp
 3833                        		.pceas
 3834                        	
 3835                        		.dbg	line,	"include\routines_LEVELS.c", 96; void display_ZENNY()
 3836                        		.dbg	line,	"include\routines_LEVELS.c", 97; {
 3837                        	;***********************
 3838                        	;***********************
 3839                        	
 3840                        		.hucc
 3841    18:D3CD             		.proc		_display_ZENNY
 3842                        		__enter		_display_ZENNY
 3843                        	
 3844                        		.dbg	line,	"include\routines_LEVELS.c", 98; put_number(zenny_amount,5,26,4);
 3845                        		__ld.wm		_zenny_amount
         18:D3CD  AD 34 26   			lda.l	_zenny_amount
         18:D3D0  AC 35 26   			ldy.h	_zenny_amount
 3846                        		__st.wmq	_bx
         18:D3D3  85 FA      			sta.l	_bx
         18:D3D5  84 FB      			sty.h	_bx
 3847                        		__st.umiq	5, _cl
         18:D3D7  A9 05      			lda.l	#5
         18:D3D9  85 FC      			sta	_cl
 3848                        		__st.umiq	26, _dil
         18:D3DB  A9 1A      			lda.l	#26
         18:D3DD  85 F0      			sta	_dil
 3849                        		__st.umiq	4, _dih
         18:D3DF  A9 04      			lda.l	#4
         18:D3E1  85 F1      			sta	_dih
 3850                        		__call		_put_number.4
         18:D3E3  20 9F FF   			call	_put_number.4
 3851                        	
 3852                        		.dbg	line,	"include\routines_LEVELS.c", 99; }
 3853    18:D3E6             	.LL19:
 3854                        		__return	0
         18:D3E6  4C EF FF   			jmp	leave_proc
 3855                        		.dbg	clear
 3856                        		.endp
 3857                        		.pceas
 3858                        	
 3859                        		.dbg	line,	"include\routines_LEVELS.c", 104; void scroll_object()
 3860                        		.dbg	line,	"include\routines_LEVELS.c", 105; {
 3861                        	;***********************
 3862                        	;***********************
 3863                        	
 3864                        		.hucc
 3865    18:C16F             		.proc		_scroll_object
 3866                        		__enter		_scroll_object
 3867                        	
 3868                        		.dbg	line,	"include\routines_LEVELS.c", 106; char i;
 3869                        	
 3870                        		.dbg	line,	"include\routines_LEVELS.c", 107; onscreen_object_number = 0;
 3871                        		__st.umiq	0, _onscreen_object_number
         18:C16F  9C 37 23   			stz	_onscreen_object_number
 3872                        	
 3873                        		.dbg	line,	"include\routines_LEVELS.c", 109; for(i=0 ; i<level_object_number ; i++)
 3874                        		__st.umiq	0, __scroll_object_end - 1  /* i */
         18:C172  9C 52 26   			stz	__scroll_object_end - 1
 3875    18:C175             	.LL21:
 3876                        		__ld.umq	__scroll_object_end - 1  /* i */
         18:C175  AD 52 26   			lda	__scroll_object_end - 1
 3877                        		__ult_b.umq	_level_object_number
         18:C178  CD 36 23   			cmp	_level_object_number		; Subtract memory from A.
         18:C17B  6A         			ror	a		; CC if A < memory.
         18:C17C  49 80      			eor	#$80
         18:C17E  2A         			rol	a
 3878                        		__btrue		.LL23
         18:C17F  B0 08      			bcs	.LL23
 3879                        		__bra		.LL24
         18:C181  4C D3 C2   			bra	.LL24
 3880    18:C184             	.LL22:
 3881                        		__inc.umq	__scroll_object_end - 1  /* i */
         18:C184  EE 52 26   			inc	__scroll_object_end - 1
 3882                        		__bra		.LL21
         18:C187  80 EC      			bra	.LL21
 3883    18:C189             	.LL23:
 3884                        	
 3885                        		.dbg	line,	"include\routines_LEVELS.c", 110; {
 3886                        	
 3887                        		.dbg	line,	"include\routines_LEVELS.c", 111; if(list_object_state[i] != STATE_INACTIVE)
 3888                        		__ldx.umq	__scroll_object_end - 1  /* i */
         18:C189  AE 52 26   			ldx	__scroll_object_end - 1
 3889                        		__ld.uaxq	_list_object_state
         18:C18C  BD 51 23   			lda	_list_object_state, x
 3890                        		__neq_b.uiq	1
         18:C18F  38         			sec
         18:C190  49 01      			eor	#1
         18:C192  D0 01      			bne	!+
         18:C194  18         			clc
         18:C195             	!:
 3891                        		__bfalse	.LL25
         18:C195  90 ED      			bcc	.LL25
 3892                        	
 3893                        		.dbg	line,	"include\routines_LEVELS.c", 112; {
 3894                        	
 3895                        		.dbg	line,	"include\routines_LEVELS.c", 113; char scroll_allowed = FALSE;
 3896                        		__st.umiq	0, __scroll_object_end - 2  /* scroll_allowed */
         18:C197  9C 51 26   			stz	__scroll_object_end - 2
 3897                        	
 3898                        		.dbg	line,	"include\routines_LEVELS.c", 114; 
 3899                        	
 3900                        		.dbg	line,	"include\routines_LEVELS.c", 115; // IF OBJECT X POSITION IS INFERIOR TO SCREEN RIGHT SIDE //
 3901                        	
 3902                        		.dbg	line,	"include\routines_LEVELS.c", 116; if(list_object_x_pos_ref[i] < sgx_map_pxl_x + 256)
 3903                        		__ld.wm		_sgx_map_pxl_x
         18:C19A  AD 97 26   			lda.l	_sgx_map_pxl_x
         18:C19D  AC 98 26   			ldy.h	_sgx_map_pxl_x
 3904                        		__add.wi	256
         18:C1A0  18         			clc
         18:C1A1  69 00      			adc.l	#256
         18:C1A3  42         			say
         18:C1A4  69 01      			adc.h	#256
         18:C1A6  42         			say
 3905                        		__ld2x.um	__scroll_object_end - 1  /* i */
         18:C1A7  AA         			tax
         18:C1A8  AD 52 26   			lda	__scroll_object_end - 1
         18:C1AB  0A         			asl	a
         18:C1AC  22         			sax
 3906                        		__ugt_w.wax	_list_object_x_pos_ref
         18:C1AD  18         			clc			; Subtract memory+1 from Y:A.
         18:C1AE  FD 48 25   			sbc.l	_list_object_x_pos_ref, x
         18:C1B1  98         			tya
         18:C1B2  FD 49 25   			sbc.h	_list_object_x_pos_ref, x		; CS if Y:A > memory.
 3907                        		__bfalse	.LL26
         18:C1B5  B0 03 4C 3A			bcc	.LL26
         18:C1B9  C2          
 3908                        	
 3909                        		.dbg	line,	"include\routines_LEVELS.c", 117; {
 3910                        	
 3911                        		.dbg	line,	"include\routines_LEVELS.c", 118; // IF OBJECT X POSITION IS SUPERIOR TO SCREEN LEFT SIDE PLUS 16 PX //
 3912                        	
 3913                        		.dbg	line,	"include\routines_LEVELS.c", 119; if(list_object_x_pos_ref[i] - sgx_map_pxl_x + 16 > 0)
 3914                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         18:C1BA  AD 52 26   			lda	__scroll_object_end - 1
         18:C1BD  0A         			asl	a
         18:C1BE  AA         			tax
 3915                        		__ld.wax	_list_object_x_pos_ref
         18:C1BF  BD 48 25   			lda.l	_list_object_x_pos_ref, x
         18:C1C2  BC 49 25   			ldy.h	_list_object_x_pos_ref, x
 3916                        		__sub.wm	_sgx_map_pxl_x
         18:C1C5  38         			sec
         18:C1C6  ED 97 26   			sbc.l	_sgx_map_pxl_x
         18:C1C9  42         			say
         18:C1CA  ED 98 26   			sbc.h	_sgx_map_pxl_x
         18:C1CD  42         			say
 3917                        		__add.wi	16
         18:C1CE  18         			clc
         18:C1CF  69 10      			adc.l	#16
         18:C1D1  90 01      			bcc	!+
         18:C1D3  C8         			iny
         18:C1D4             	!:
 3918                        		__sgt_w.wi	0
         18:C1D4  18         			clc			; Subtract integer+1 from Y:A.
         18:C1D5  E9 00      			sbc.l	#0
         18:C1D7  98         			tya
         18:C1D8  E9 00      			sbc.h	#0
         18:C1DA  50 02      			bvc	!+
         18:C1DC  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         18:C1DE  49 80      	!:		eor	#$80
         18:C1E0  0A         			asl	a
 3919                        		__bfalse	.LL27
         18:C1E1  90 57      			bcc	.LL27
 3920                        	
 3921                        		.dbg	line,	"include\routines_LEVELS.c", 120; {
 3922                        	
 3923                        		.dbg	line,	"include\routines_LEVELS.c", 121; // IF OBJECT Y POSITION IS INFERIOR TO SCREEN BOTTOM //
 3924                        	
 3925                        		.dbg	line,	"include\routines_LEVELS.c", 122; if(list_object_y_pos_ref[i] < sgx_map_pxl_y + 224)
 3926                        		__ld.wm		_sgx_map_pxl_y
         18:C1E3  AD 99 26   			lda.l	_sgx_map_pxl_y
         18:C1E6  AC 9A 26   			ldy.h	_sgx_map_pxl_y
 3927                        		__add.wi	224
         18:C1E9  18         			clc
         18:C1EA  69 E0      			adc.l	#224
         18:C1EC  90 01      			bcc	!+
         18:C1EE  C8         			iny
         18:C1EF             	!:
 3928                        		__ld2x.um	__scroll_object_end - 1  /* i */
         18:C1EF  AA         			tax
         18:C1F0  AD 52 26   			lda	__scroll_object_end - 1
         18:C1F3  0A         			asl	a
         18:C1F4  22         			sax
 3929                        		__ugt_w.wax	_list_object_y_pos_ref
         18:C1F5  18         			clc			; Subtract memory+1 from Y:A.
         18:C1F6  FD 7A 25   			sbc.l	_list_object_y_pos_ref, x
         18:C1F9  98         			tya
         18:C1FA  FD 7B 25   			sbc.h	_list_object_y_pos_ref, x		; CS if Y:A > memory.
 3930                        		__bfalse	.LL28
         18:C1FD  90 3B      			bcc	.LL28
 3931                        	
 3932                        		.dbg	line,	"include\routines_LEVELS.c", 123; {
 3933                        	
 3934                        		.dbg	line,	"include\routines_LEVELS.c", 124; // IF OBJECT Y POSITION IS SUPERIOR TO SCREEN TOP PLUS 16 PX //
 3935                        	
 3936                        		.dbg	line,	"include\routines_LEVELS.c", 125; if(list_object_y_pos_ref[i] - sgx_map_pxl_y + 16 > 0)
 3937                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         18:C1FF  AD 52 26   			lda	__scroll_object_end - 1
         18:C202  0A         			asl	a
         18:C203  AA         			tax
 3938                        		__ld.wax	_list_object_y_pos_ref
         18:C204  BD 7A 25   			lda.l	_list_object_y_pos_ref, x
         18:C207  BC 7B 25   			ldy.h	_list_object_y_pos_ref, x
 3939                        		__sub.wm	_sgx_map_pxl_y
         18:C20A  38         			sec
         18:C20B  ED 99 26   			sbc.l	_sgx_map_pxl_y
         18:C20E  42         			say
         18:C20F  ED 9A 26   			sbc.h	_sgx_map_pxl_y
         18:C212  42         			say
 3940                        		__add.wi	16
         18:C213  18         			clc
         18:C214  69 10      			adc.l	#16
         18:C216  90 01      			bcc	!+
         18:C218  C8         			iny
         18:C219             	!:
 3941                        		__sgt_w.wi	0
         18:C219  18         			clc			; Subtract integer+1 from Y:A.
         18:C21A  E9 00      			sbc.l	#0
         18:C21C  98         			tya
         18:C21D  E9 00      			sbc.h	#0
         18:C21F  50 02      			bvc	!+
         18:C221  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         18:C223  49 80      	!:		eor	#$80
         18:C225  0A         			asl	a
 3942                        		__bfalse	.LL29
         18:C226  90 12      			bcc	.LL29
 3943                        	
 3944                        		.dbg	line,	"include\routines_LEVELS.c", 126; {
 3945                        	
 3946                        		.dbg	line,	"include\routines_LEVELS.c", 127; // WE STORE THE OBJECT ID //
 3947                        	
 3948                        		.dbg	line,	"include\routines_LEVELS.c", 128; //put_number(i,2,0,2+onscreen_object_number);
 3949                        	
 3950                        		.dbg	line,	"include\routines_LEVELS.c", 129; list_onscreen_object[onscreen_object_number] = i;
 3951                        		__ldx.umq	_onscreen_object_number
         18:C228  AE 37 23   			ldx	_onscreen_object_number
 3952                        		__ld.um		__scroll_object_end - 1  /* i */
         18:C22B  AD 52 26   			lda	__scroll_object_end - 1
         18:C22E  C2         			cly
 3953                        		__st.uaxq	_list_onscreen_object
         18:C22F  9D 9C 23   			sta	_list_onscreen_object, x
 3954                        	
 3955                        		.dbg	line,	"include\routines_LEVELS.c", 130; onscreen_object_number += 1;
 3956                        		__add_st.umiq	1, _onscreen_object_number
         18:C232  EE 37 23   			inc	_onscreen_object_number
 3957                        	
 3958                        		.dbg	line,	"include\routines_LEVELS.c", 131; 
 3959                        	
 3960                        		.dbg	line,	"include\routines_LEVELS.c", 132; //list_object_visibility[i] = ON_SCREEN;
 3961                        	
 3962                        		.dbg	line,	"include\routines_LEVELS.c", 133; scroll_allowed = TRUE;
 3963                        		__st.umiq	1, __scroll_object_end - 2  /* scroll_allowed */
         18:C235  A9 01      			lda.l	#1
         18:C237  8D 51 26   			sta	__scroll_object_end - 2
 3964                        	
 3965                        		.dbg	line,	"include\routines_LEVELS.c", 134; }
 3966                        	
 3967                        		.dbg	line,	"include\routines_LEVELS.c", 135; }
 3968    18:C23A             	.LL29:
 3969                        	
 3970                        		.dbg	line,	"include\routines_LEVELS.c", 136; }
 3971    18:C23A             	.LL28:
 3972                        	
 3973                        		.dbg	line,	"include\routines_LEVELS.c", 137; }
 3974    18:C23A             	.LL27:
 3975                        	
 3976                        		.dbg	line,	"include\routines_LEVELS.c", 139; // IF OBJECTS IS WITHIN THE SCREEN LIMITS //
 3977                        	
 3978                        		.dbg	line,	"include\routines_LEVELS.c", 140; if(scroll_allowed == TRUE)
 3979    18:C23A             	.LL26:
 3980                        		__ld.umq	__scroll_object_end - 2  /* scroll_allowed */
         18:C23A  AD 51 26   			lda	__scroll_object_end - 2
 3981                        		__equ_b.uiq	1
         18:C23D  C9 01      			cmp	#1
         18:C23F  F0 01      			beq	!+
         18:C241  18         			clc
         18:C242             	!:
 3982                        		__bfalse	.LL30
         18:C242  90 44      			bcc	.LL30
 3983                        	
 3984                        		.dbg	line,	"include\routines_LEVELS.c", 141; {
 3985                        	
 3986                        		.dbg	line,	"include\routines_LEVELS.c", 142; list_object_x_pos[i] = list_object_x_pos_ref[i] - sgx_map_pxl_x;
 3987                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         18:C244  AD 52 26   			lda	__scroll_object_end - 1
         18:C247  0A         			asl	a
         18:C248  AA         			tax
 3988                        		__ld.wax	_list_object_x_pos_ref
         18:C249  BD 48 25   			lda.l	_list_object_x_pos_ref, x
         18:C24C  BC 49 25   			ldy.h	_list_object_x_pos_ref, x
 3989                        		__sub.wm	_sgx_map_pxl_x
         18:C24F  38         			sec
         18:C250  ED 97 26   			sbc.l	_sgx_map_pxl_x
         18:C253  42         			say
         18:C254  ED 98 26   			sbc.h	_sgx_map_pxl_x
         18:C257  42         			say
 3990                        		__ld2x.um	__scroll_object_end - 1  /* i */
         18:C258  AA         			tax
         18:C259  AD 52 26   			lda	__scroll_object_end - 1
         18:C25C  0A         			asl	a
         18:C25D  22         			sax
 3991                        		__st.waxq	_list_object_x_pos
         18:C25E  9D E4 24   			sta.l	_list_object_x_pos, x
         18:C261  98         			tya
         18:C262  9D E5 24   			sta.h	_list_object_x_pos, x
 3992                        	
 3993                        		.dbg	line,	"include\routines_LEVELS.c", 143; list_object_y_pos[i] = list_object_y_pos_ref[i] - sgx_map_pxl_y;
 3994                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         18:C265  AD 52 26   			lda	__scroll_object_end - 1
         18:C268  0A         			asl	a
         18:C269  AA         			tax
 3995                        		__ld.wax	_list_object_y_pos_ref
         18:C26A  BD 7A 25   			lda.l	_list_object_y_pos_ref, x
         18:C26D  BC 7B 25   			ldy.h	_list_object_y_pos_ref, x
 3996                        		__sub.wm	_sgx_map_pxl_y
         18:C270  38         			sec
         18:C271  ED 99 26   			sbc.l	_sgx_map_pxl_y
         18:C274  42         			say
         18:C275  ED 9A 26   			sbc.h	_sgx_map_pxl_y
         18:C278  42         			say
 3997                        		__ld2x.um	__scroll_object_end - 1  /* i */
         18:C279  AA         			tax
         18:C27A  AD 52 26   			lda	__scroll_object_end - 1
         18:C27D  0A         			asl	a
         18:C27E  22         			sax
 3998                        		__st.waxq	_list_object_y_pos
         18:C27F  9D 16 25   			sta.l	_list_object_y_pos, x
         18:C282  98         			tya
         18:C283  9D 17 25   			sta.h	_list_object_y_pos, x
 3999                        	
 4000                        		.dbg	line,	"include\routines_LEVELS.c", 144; }
 4001                        	
 4002                        		.dbg	line,	"include\routines_LEVELS.c", 146; else
 4003                        		__bra		.LL31
         18:C286  80 1E      			bra	.LL31
 4004    18:C288             	.LL30:
 4005                        	
 4006                        		.dbg	line,	"include\routines_LEVELS.c", 147; {
 4007                        	
 4008                        		.dbg	line,	"include\routines_LEVELS.c", 148; list_object_x_pos[i] = -16;
 4009                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         18:C288  AD 52 26   			lda	__scroll_object_end - 1
         18:C28B  0A         			asl	a
         18:C28C  AA         			tax
 4010                        		__st.waxiq	-16, _list_object_x_pos
         18:C28D  A9 F0      			lda.l	#-16
         18:C28F  9D E4 24   			sta.l	_list_object_x_pos, x
         18:C292  A9 FF      			lda.h	#-16
         18:C294  9D E5 24   			sta.h	_list_object_x_pos, x
 4011                        	
 4012                        		.dbg	line,	"include\routines_LEVELS.c", 149; list_object_y_pos[i] = -16;
 4013                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         18:C297  AD 52 26   			lda	__scroll_object_end - 1
         18:C29A  0A         			asl	a
         18:C29B  AA         			tax
 4014                        		__st.waxiq	-16, _list_object_y_pos
         18:C29C  A9 F0      			lda.l	#-16
         18:C29E  9D 16 25   			sta.l	_list_object_y_pos, x
         18:C2A1  A9 FF      			lda.h	#-16
         18:C2A3  9D 17 25   			sta.h	_list_object_y_pos, x
 4015                        	
 4016                        		.dbg	line,	"include\routines_LEVELS.c", 150; //list_object_visibility[i] = OFF_SCREEN;
 4017                        	
 4018                        		.dbg	line,	"include\routines_LEVELS.c", 151; }
 4019    18:C2A6             	.LL31:
 4020                        	
 4021                        		.dbg	line,	"include\routines_LEVELS.c", 153; sgx_spr_set(i + object_start_index);
 4022                        		__ld.um		__scroll_object_end - 1  /* i */
         18:C2A6  AD 52 26   			lda	__scroll_object_end - 1
         18:C2A9  C2         			cly
 4023                        		__add.um	_object_start_index
         18:C2AA  18         			clc
         18:C2AB  6D 35 23   			adc	_object_start_index
         18:C2AE  90 01      			bcc	!+
         18:C2B0  C8         			iny
         18:C2B1             	!:
 4024                        		__call		_sgx_spr_set.1
         18:C2B1  20 8A E8   			call	_sgx_spr_set.1
 4025                        	
 4026                        		.dbg	line,	"include\routines_LEVELS.c", 155; sgx_spr_x(list_object_x_pos[i]);
 4027                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         18:C2B4  AD 52 26   			lda	__scroll_object_end - 1
         18:C2B7  0A         			asl	a
         18:C2B8  AA         			tax
 4028                        		__ld.wax	_list_object_x_pos
         18:C2B9  BD E4 24   			lda.l	_list_object_x_pos, x
         18:C2BC  BC E5 24   			ldy.h	_list_object_x_pos, x
 4029                        		__call		_sgx_spr_x.1
         18:C2BF  20 B7 E8   			call	_sgx_spr_x.1
 4030                        	
 4031                        		.dbg	line,	"include\routines_LEVELS.c", 156; sgx_spr_y(list_object_y_pos[i]);
 4032                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         18:C2C2  AD 52 26   			lda	__scroll_object_end - 1
         18:C2C5  0A         			asl	a
         18:C2C6  AA         			tax
 4033                        		__ld.wax	_list_object_y_pos
         18:C2C7  BD 16 25   			lda.l	_list_object_y_pos, x
         18:C2CA  BC 17 25   			ldy.h	_list_object_y_pos, x
 4034                        		__call		_sgx_spr_y.1
         18:C2CD  20 C6 E8   			call	_sgx_spr_y.1
 4035                        	
 4036                        		.dbg	line,	"include\routines_LEVELS.c", 157; }
 4037                        	
 4038                        		.dbg	line,	"include\routines_LEVELS.c", 158; }
 4039    18:C2D0             	.LL25	.alias		.LL22
 4040                        		__bra		.LL22
         18:C2D0  4C 84 C1   			bra	.LL22
 4041    18:C2D3             	.LL24:
 4042                        	
 4043                        		.dbg	line,	"include\routines_LEVELS.c", 159; }
 4044    18:C2D3             	.LL20:
 4045                        		__return	0
         18:C2D3  4C EF FF   			jmp	leave_proc
 4046                        		.dbg	clear
 4047                        		.endp
 4048                        		.pceas
 4049                        	
 4050                        		.dbg	line,	"include\routines_LEVELS.c", 162; void scroll_chest()
 4051                        		.dbg	line,	"include\routines_LEVELS.c", 163; {
 4052                        	;***********************
 4053                        	;***********************
 4054                        	
 4055                        		.hucc
 4056    18:C2D6             		.proc		_scroll_chest
 4057                        		__enter		_scroll_chest
 4058                        	
 4059                        		.dbg	line,	"include\routines_LEVELS.c", 164; char i;
 4060                        	
 4061                        		.dbg	line,	"include\routines_LEVELS.c", 165; onscreen_chest_number = 0;
 4062                        		__st.umiq	0, _onscreen_chest_number
         18:C2D6  9C A6 23   			stz	_onscreen_chest_number
 4063                        	
 4064                        		.dbg	line,	"include\routines_LEVELS.c", 167; for(i=0 ; i<level_chest_number ; i++)
 4065                        		__st.umiq	0, __scroll_chest_end - 1  /* i */
         18:C2D9  9C 52 26   			stz	__scroll_chest_end - 1
 4066    18:C2DC             	.LL33:
 4067                        		__ld.umq	__scroll_chest_end - 1  /* i */
         18:C2DC  AD 52 26   			lda	__scroll_chest_end - 1
 4068                        		__ult_b.umq	_level_chest_number
         18:C2DF  CD A5 23   			cmp	_level_chest_number		; Subtract memory from A.
         18:C2E2  6A         			ror	a		; CC if A < memory.
         18:C2E3  49 80      			eor	#$80
         18:C2E5  2A         			rol	a
 4069                        		__btrue		.LL35
         18:C2E6  B0 08      			bcs	.LL35
 4070                        		__bra		.LL36
         18:C2E8  4C 3A C4   			bra	.LL36
 4071    18:C2EB             	.LL34:
 4072                        		__inc.umq	__scroll_chest_end - 1  /* i */
         18:C2EB  EE 52 26   			inc	__scroll_chest_end - 1
 4073                        		__bra		.LL33
         18:C2EE  80 EC      			bra	.LL33
 4074    18:C2F0             	.LL35:
 4075                        	
 4076                        		.dbg	line,	"include\routines_LEVELS.c", 168; {
 4077                        	
 4078                        		.dbg	line,	"include\routines_LEVELS.c", 169; if(list_chest_state[i] != STATE_INACTIVE)
 4079                        		__ldx.umq	__scroll_chest_end - 1  /* i */
         18:C2F0  AE 52 26   			ldx	__scroll_chest_end - 1
 4080                        		__ld.uaxq	_list_chest_state
         18:C2F3  BD A7 23   			lda	_list_chest_state, x
 4081                        		__neq_b.uiq	1
         18:C2F6  38         			sec
         18:C2F7  49 01      			eor	#1
         18:C2F9  D0 01      			bne	!+
         18:C2FB  18         			clc
         18:C2FC             	!:
 4082                        		__bfalse	.LL37
         18:C2FC  90 ED      			bcc	.LL37
 4083                        	
 4084                        		.dbg	line,	"include\routines_LEVELS.c", 170; {
 4085                        	
 4086                        		.dbg	line,	"include\routines_LEVELS.c", 171; char scroll_allowed = FALSE;
 4087                        		__st.umiq	0, __scroll_chest_end - 2  /* scroll_allowed */
         18:C2FE  9C 51 26   			stz	__scroll_chest_end - 2
 4088                        	
 4089                        		.dbg	line,	"include\routines_LEVELS.c", 172; 
 4090                        	
 4091                        		.dbg	line,	"include\routines_LEVELS.c", 173; // IF CHEST X POSITION IS INFERIOR TO SCREEN RIGHT SIDE //
 4092                        	
 4093                        		.dbg	line,	"include\routines_LEVELS.c", 174; if(list_chest_x_pos_ref[i] < sgx_map_pxl_x + 256)
 4094                        		__ld.wm		_sgx_map_pxl_x
         18:C301  AD 97 26   			lda.l	_sgx_map_pxl_x
         18:C304  AC 98 26   			ldy.h	_sgx_map_pxl_x
 4095                        		__add.wi	256
         18:C307  18         			clc
         18:C308  69 00      			adc.l	#256
         18:C30A  42         			say
         18:C30B  69 01      			adc.h	#256
         18:C30D  42         			say
 4096                        		__ld2x.um	__scroll_chest_end - 1  /* i */
         18:C30E  AA         			tax
         18:C30F  AD 52 26   			lda	__scroll_chest_end - 1
         18:C312  0A         			asl	a
         18:C313  22         			sax
 4097                        		__ugt_w.wax	_list_chest_x_pos_ref
         18:C314  18         			clc			; Subtract memory+1 from Y:A.
         18:C315  FD CC 25   			sbc.l	_list_chest_x_pos_ref, x
         18:C318  98         			tya
         18:C319  FD CD 25   			sbc.h	_list_chest_x_pos_ref, x		; CS if Y:A > memory.
 4098                        		__bfalse	.LL38
         18:C31C  B0 03 4C A1			bcc	.LL38
         18:C320  C3          
 4099                        	
 4100                        		.dbg	line,	"include\routines_LEVELS.c", 175; {
 4101                        	
 4102                        		.dbg	line,	"include\routines_LEVELS.c", 176; // IF CHEST X POSITION IS SUPERIOR TO SCREEN LEFT SIDE PLUS 32 PX //
 4103                        	
 4104                        		.dbg	line,	"include\routines_LEVELS.c", 177; if(list_chest_x_pos_ref[i] - sgx_map_pxl_x + 32 > 0)
 4105                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         18:C321  AD 52 26   			lda	__scroll_chest_end - 1
         18:C324  0A         			asl	a
         18:C325  AA         			tax
 4106                        		__ld.wax	_list_chest_x_pos_ref
         18:C326  BD CC 25   			lda.l	_list_chest_x_pos_ref, x
         18:C329  BC CD 25   			ldy.h	_list_chest_x_pos_ref, x
 4107                        		__sub.wm	_sgx_map_pxl_x
         18:C32C  38         			sec
         18:C32D  ED 97 26   			sbc.l	_sgx_map_pxl_x
         18:C330  42         			say
         18:C331  ED 98 26   			sbc.h	_sgx_map_pxl_x
         18:C334  42         			say
 4108                        		__add.wi	32
         18:C335  18         			clc
         18:C336  69 20      			adc.l	#32
         18:C338  90 01      			bcc	!+
         18:C33A  C8         			iny
         18:C33B             	!:
 4109                        		__sgt_w.wi	0
         18:C33B  18         			clc			; Subtract integer+1 from Y:A.
         18:C33C  E9 00      			sbc.l	#0
         18:C33E  98         			tya
         18:C33F  E9 00      			sbc.h	#0
         18:C341  50 02      			bvc	!+
         18:C343  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         18:C345  49 80      	!:		eor	#$80
         18:C347  0A         			asl	a
 4110                        		__bfalse	.LL39
         18:C348  90 57      			bcc	.LL39
 4111                        	
 4112                        		.dbg	line,	"include\routines_LEVELS.c", 178; {
 4113                        	
 4114                        		.dbg	line,	"include\routines_LEVELS.c", 179; // IF CHEST Y POSITION IS INFERIOR TO SCREEN BOTTOM //
 4115                        	
 4116                        		.dbg	line,	"include\routines_LEVELS.c", 180; if(list_chest_y_pos_ref[i] < sgx_map_pxl_y + 224)
 4117                        		__ld.wm		_sgx_map_pxl_y
         18:C34A  AD 99 26   			lda.l	_sgx_map_pxl_y
         18:C34D  AC 9A 26   			ldy.h	_sgx_map_pxl_y
 4118                        		__add.wi	224
         18:C350  18         			clc
         18:C351  69 E0      			adc.l	#224
         18:C353  90 01      			bcc	!+
         18:C355  C8         			iny
         18:C356             	!:
 4119                        		__ld2x.um	__scroll_chest_end - 1  /* i */
         18:C356  AA         			tax
         18:C357  AD 52 26   			lda	__scroll_chest_end - 1
         18:C35A  0A         			asl	a
         18:C35B  22         			sax
 4120                        		__ugt_w.wax	_list_chest_y_pos_ref
         18:C35C  18         			clc			; Subtract memory+1 from Y:A.
         18:C35D  FD DC 25   			sbc.l	_list_chest_y_pos_ref, x
         18:C360  98         			tya
         18:C361  FD DD 25   			sbc.h	_list_chest_y_pos_ref, x		; CS if Y:A > memory.
 4121                        		__bfalse	.LL40
         18:C364  90 3B      			bcc	.LL40
 4122                        	
 4123                        		.dbg	line,	"include\routines_LEVELS.c", 181; {
 4124                        	
 4125                        		.dbg	line,	"include\routines_LEVELS.c", 182; // IF CHEST Y POSITION IS SUPERIOR TO SCREEN TOP PLUS 32 PX //
 4126                        	
 4127                        		.dbg	line,	"include\routines_LEVELS.c", 183; if(list_chest_y_pos_ref[i] - sgx_map_pxl_y + 32 > 0)
 4128                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         18:C366  AD 52 26   			lda	__scroll_chest_end - 1
         18:C369  0A         			asl	a
         18:C36A  AA         			tax
 4129                        		__ld.wax	_list_chest_y_pos_ref
         18:C36B  BD DC 25   			lda.l	_list_chest_y_pos_ref, x
         18:C36E  BC DD 25   			ldy.h	_list_chest_y_pos_ref, x
 4130                        		__sub.wm	_sgx_map_pxl_y
         18:C371  38         			sec
         18:C372  ED 99 26   			sbc.l	_sgx_map_pxl_y
         18:C375  42         			say
         18:C376  ED 9A 26   			sbc.h	_sgx_map_pxl_y
         18:C379  42         			say
 4131                        		__add.wi	32
         18:C37A  18         			clc
         18:C37B  69 20      			adc.l	#32
         18:C37D  90 01      			bcc	!+
         18:C37F  C8         			iny
         18:C380             	!:
 4132                        		__sgt_w.wi	0
         18:C380  18         			clc			; Subtract integer+1 from Y:A.
         18:C381  E9 00      			sbc.l	#0
         18:C383  98         			tya
         18:C384  E9 00      			sbc.h	#0
         18:C386  50 02      			bvc	!+
         18:C388  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         18:C38A  49 80      	!:		eor	#$80
         18:C38C  0A         			asl	a
 4133                        		__bfalse	.LL41
         18:C38D  90 12      			bcc	.LL41
 4134                        	
 4135                        		.dbg	line,	"include\routines_LEVELS.c", 184; {
 4136                        	
 4137                        		.dbg	line,	"include\routines_LEVELS.c", 185; // WE STORE THE CHEST ID //
 4138                        	
 4139                        		.dbg	line,	"include\routines_LEVELS.c", 186; list_onscreen_chest[onscreen_chest_number] = i;
 4140                        		__ldx.umq	_onscreen_chest_number
         18:C38F  AE A6 23   			ldx	_onscreen_chest_number
 4141                        		__ld.um		__scroll_chest_end - 1  /* i */
         18:C392  AD 52 26   			lda	__scroll_chest_end - 1
         18:C395  C2         			cly
 4142                        		__st.uaxq	_list_onscreen_chest
         18:C396  9D AF 23   			sta	_list_onscreen_chest, x
 4143                        	
 4144                        		.dbg	line,	"include\routines_LEVELS.c", 187; onscreen_chest_number += 1;
 4145                        		__add_st.umiq	1, _onscreen_chest_number
         18:C399  EE A6 23   			inc	_onscreen_chest_number
 4146                        	
 4147                        		.dbg	line,	"include\routines_LEVELS.c", 188; 
 4148                        	
 4149                        		.dbg	line,	"include\routines_LEVELS.c", 189; scroll_allowed = TRUE;
 4150                        		__st.umiq	1, __scroll_chest_end - 2  /* scroll_allowed */
         18:C39C  A9 01      			lda.l	#1
         18:C39E  8D 51 26   			sta	__scroll_chest_end - 2
 4151                        	
 4152                        		.dbg	line,	"include\routines_LEVELS.c", 190; }
 4153                        	
 4154                        		.dbg	line,	"include\routines_LEVELS.c", 191; }
 4155    18:C3A1             	.LL41:
 4156                        	
 4157                        		.dbg	line,	"include\routines_LEVELS.c", 192; }
 4158    18:C3A1             	.LL40:
 4159                        	
 4160                        		.dbg	line,	"include\routines_LEVELS.c", 193; }
 4161    18:C3A1             	.LL39:
 4162                        	
 4163                        		.dbg	line,	"include\routines_LEVELS.c", 195; // IF CHEST IS WITHIN THE SCREEN LIMITS //
 4164                        	
 4165                        		.dbg	line,	"include\routines_LEVELS.c", 196; if(scroll_allowed == TRUE)
 4166    18:C3A1             	.LL38:
 4167                        		__ld.umq	__scroll_chest_end - 2  /* scroll_allowed */
         18:C3A1  AD 51 26   			lda	__scroll_chest_end - 2
 4168                        		__equ_b.uiq	1
         18:C3A4  C9 01      			cmp	#1
         18:C3A6  F0 01      			beq	!+
         18:C3A8  18         			clc
         18:C3A9             	!:
 4169                        		__bfalse	.LL42
         18:C3A9  90 44      			bcc	.LL42
 4170                        	
 4171                        		.dbg	line,	"include\routines_LEVELS.c", 197; {
 4172                        	
 4173                        		.dbg	line,	"include\routines_LEVELS.c", 198; list_chest_x_pos[i] = list_chest_x_pos_ref[i] - sgx_map_pxl_x;
 4174                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         18:C3AB  AD 52 26   			lda	__scroll_chest_end - 1
         18:C3AE  0A         			asl	a
         18:C3AF  AA         			tax
 4175                        		__ld.wax	_list_chest_x_pos_ref
         18:C3B0  BD CC 25   			lda.l	_list_chest_x_pos_ref, x
         18:C3B3  BC CD 25   			ldy.h	_list_chest_x_pos_ref, x
 4176                        		__sub.wm	_sgx_map_pxl_x
         18:C3B6  38         			sec
         18:C3B7  ED 97 26   			sbc.l	_sgx_map_pxl_x
         18:C3BA  42         			say
         18:C3BB  ED 98 26   			sbc.h	_sgx_map_pxl_x
         18:C3BE  42         			say
 4177                        		__ld2x.um	__scroll_chest_end - 1  /* i */
         18:C3BF  AA         			tax
         18:C3C0  AD 52 26   			lda	__scroll_chest_end - 1
         18:C3C3  0A         			asl	a
         18:C3C4  22         			sax
 4178                        		__st.waxq	_list_chest_x_pos
         18:C3C5  9D AC 25   			sta.l	_list_chest_x_pos, x
         18:C3C8  98         			tya
         18:C3C9  9D AD 25   			sta.h	_list_chest_x_pos, x
 4179                        	
 4180                        		.dbg	line,	"include\routines_LEVELS.c", 199; list_chest_y_pos[i] = list_chest_y_pos_ref[i] - sgx_map_pxl_y;
 4181                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         18:C3CC  AD 52 26   			lda	__scroll_chest_end - 1
         18:C3CF  0A         			asl	a
         18:C3D0  AA         			tax
 4182                        		__ld.wax	_list_chest_y_pos_ref
         18:C3D1  BD DC 25   			lda.l	_list_chest_y_pos_ref, x
         18:C3D4  BC DD 25   			ldy.h	_list_chest_y_pos_ref, x
 4183                        		__sub.wm	_sgx_map_pxl_y
         18:C3D7  38         			sec
         18:C3D8  ED 99 26   			sbc.l	_sgx_map_pxl_y
         18:C3DB  42         			say
         18:C3DC  ED 9A 26   			sbc.h	_sgx_map_pxl_y
         18:C3DF  42         			say
 4184                        		__ld2x.um	__scroll_chest_end - 1  /* i */
         18:C3E0  AA         			tax
         18:C3E1  AD 52 26   			lda	__scroll_chest_end - 1
         18:C3E4  0A         			asl	a
         18:C3E5  22         			sax
 4185                        		__st.waxq	_list_chest_y_pos
         18:C3E6  9D BC 25   			sta.l	_list_chest_y_pos, x
         18:C3E9  98         			tya
         18:C3EA  9D BD 25   			sta.h	_list_chest_y_pos, x
 4186                        	
 4187                        		.dbg	line,	"include\routines_LEVELS.c", 200; }
 4188                        	
 4189                        		.dbg	line,	"include\routines_LEVELS.c", 202; else
 4190                        		__bra		.LL43
         18:C3ED  80 1E      			bra	.LL43
 4191    18:C3EF             	.LL42:
 4192                        	
 4193                        		.dbg	line,	"include\routines_LEVELS.c", 203; {
 4194                        	
 4195                        		.dbg	line,	"include\routines_LEVELS.c", 204; list_chest_x_pos[i] = -32;
 4196                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         18:C3EF  AD 52 26   			lda	__scroll_chest_end - 1
         18:C3F2  0A         			asl	a
         18:C3F3  AA         			tax
 4197                        		__st.waxiq	-32, _list_chest_x_pos
         18:C3F4  A9 E0      			lda.l	#-32
         18:C3F6  9D AC 25   			sta.l	_list_chest_x_pos, x
         18:C3F9  A9 FF      			lda.h	#-32
         18:C3FB  9D AD 25   			sta.h	_list_chest_x_pos, x
 4198                        	
 4199                        		.dbg	line,	"include\routines_LEVELS.c", 205; list_chest_y_pos[i] = -32;
 4200                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         18:C3FE  AD 52 26   			lda	__scroll_chest_end - 1
         18:C401  0A         			asl	a
         18:C402  AA         			tax
 4201                        		__st.waxiq	-32, _list_chest_y_pos
         18:C403  A9 E0      			lda.l	#-32
         18:C405  9D BC 25   			sta.l	_list_chest_y_pos, x
         18:C408  A9 FF      			lda.h	#-32
         18:C40A  9D BD 25   			sta.h	_list_chest_y_pos, x
 4202                        	
 4203                        		.dbg	line,	"include\routines_LEVELS.c", 206; }
 4204    18:C40D             	.LL43:
 4205                        	
 4206                        		.dbg	line,	"include\routines_LEVELS.c", 208; sgx_spr_set(i + chest_start_index);
 4207                        		__ld.um		__scroll_chest_end - 1  /* i */
         18:C40D  AD 52 26   			lda	__scroll_chest_end - 1
         18:C410  C2         			cly
 4208                        		__add.um	_chest_start_index
         18:C411  18         			clc
         18:C412  6D A4 23   			adc	_chest_start_index
         18:C415  90 01      			bcc	!+
         18:C417  C8         			iny
         18:C418             	!:
 4209                        		__call		_sgx_spr_set.1
         18:C418  20 8A E8   			call	_sgx_spr_set.1
 4210                        	
 4211                        		.dbg	line,	"include\routines_LEVELS.c", 210; sgx_spr_x(list_chest_x_pos[i]);
 4212                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         18:C41B  AD 52 26   			lda	__scroll_chest_end - 1
         18:C41E  0A         			asl	a
         18:C41F  AA         			tax
 4213                        		__ld.wax	_list_chest_x_pos
         18:C420  BD AC 25   			lda.l	_list_chest_x_pos, x
         18:C423  BC AD 25   			ldy.h	_list_chest_x_pos, x
 4214                        		__call		_sgx_spr_x.1
         18:C426  20 B7 E8   			call	_sgx_spr_x.1
 4215                        	
 4216                        		.dbg	line,	"include\routines_LEVELS.c", 211; sgx_spr_y(list_chest_y_pos[i]);
 4217                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         18:C429  AD 52 26   			lda	__scroll_chest_end - 1
         18:C42C  0A         			asl	a
         18:C42D  AA         			tax
 4218                        		__ld.wax	_list_chest_y_pos
         18:C42E  BD BC 25   			lda.l	_list_chest_y_pos, x
         18:C431  BC BD 25   			ldy.h	_list_chest_y_pos, x
 4219                        		__call		_sgx_spr_y.1
         18:C434  20 C6 E8   			call	_sgx_spr_y.1
 4220                        	
 4221                        		.dbg	line,	"include\routines_LEVELS.c", 212; }
 4222                        	
 4223                        		.dbg	line,	"include\routines_LEVELS.c", 213; }
 4224    18:C437             	.LL37	.alias		.LL34
 4225                        		__bra		.LL34
         18:C437  4C EB C2   			bra	.LL34
 4226    18:C43A             	.LL36:
 4227                        	
 4228                        		.dbg	line,	"include\routines_LEVELS.c", 214; }
 4229    18:C43A             	.LL32:
 4230                        		__return	0
         18:C43A  4C EF FF   			jmp	leave_proc
 4231                        		.dbg	clear
 4232                        		.endp
 4233                        		.pceas
 4234                        	
 4235                        		.dbg	line,	"include\routines_LEVELS.c", 217; void scroll_npc()
 4236                        		.dbg	line,	"include\routines_LEVELS.c", 218; {
 4237                        	;***********************
 4238                        	;***********************
 4239                        	
 4240                        		.hucc
 4241    18:C43D             		.proc		_scroll_npc
 4242                        		__enter		_scroll_npc
 4243                        	
 4244                        		.dbg	line,	"include\routines_LEVELS.c", 219; char i;
 4245                        	
 4246                        		.dbg	line,	"include\routines_LEVELS.c", 220; onscreen_npc_number = 0;
 4247                        		__st.umiq	0, _onscreen_npc_number
         18:C43D  9C B9 23   			stz	_onscreen_npc_number
 4248                        	
 4249                        		.dbg	line,	"include\routines_LEVELS.c", 222; for(i=0 ; i<level_npc_number ; i++)
 4250                        		__st.umiq	0, __scroll_npc_end - 1  /* i */
         18:C440  9C 52 26   			stz	__scroll_npc_end - 1
 4251    18:C443             	.LL45:
 4252                        		__ld.umq	__scroll_npc_end - 1  /* i */
         18:C443  AD 52 26   			lda	__scroll_npc_end - 1
 4253                        		__ult_b.umq	_level_npc_number
         18:C446  CD B8 23   			cmp	_level_npc_number		; Subtract memory from A.
         18:C449  6A         			ror	a		; CC if A < memory.
         18:C44A  49 80      			eor	#$80
         18:C44C  2A         			rol	a
 4254                        		__btrue		.LL47
         18:C44D  B0 08      			bcs	.LL47
 4255                        		__bra		.LL48
         18:C44F  4C A1 C5   			bra	.LL48
 4256    18:C452             	.LL46:
 4257                        		__inc.umq	__scroll_npc_end - 1  /* i */
         18:C452  EE 52 26   			inc	__scroll_npc_end - 1
 4258                        		__bra		.LL45
         18:C455  80 EC      			bra	.LL45
 4259    18:C457             	.LL47:
 4260                        	
 4261                        		.dbg	line,	"include\routines_LEVELS.c", 223; {
 4262                        	
 4263                        		.dbg	line,	"include\routines_LEVELS.c", 224; if(list_npc_state[i] != STATE_INACTIVE)
 4264                        		__ldx.umq	__scroll_npc_end - 1  /* i */
         18:C457  AE 52 26   			ldx	__scroll_npc_end - 1
 4265                        		__ld.uaxq	_list_npc_state
         18:C45A  BD C3 23   			lda	_list_npc_state, x
 4266                        		__neq_b.uiq	1
         18:C45D  38         			sec
         18:C45E  49 01      			eor	#1
         18:C460  D0 01      			bne	!+
         18:C462  18         			clc
         18:C463             	!:
 4267                        		__bfalse	.LL49
         18:C463  90 ED      			bcc	.LL49
 4268                        	
 4269                        		.dbg	line,	"include\routines_LEVELS.c", 225; {
 4270                        	
 4271                        		.dbg	line,	"include\routines_LEVELS.c", 226; char scroll_allowed = FALSE;
 4272                        		__st.umiq	0, __scroll_npc_end - 2  /* scroll_allowed */
         18:C465  9C 51 26   			stz	__scroll_npc_end - 2
 4273                        	
 4274                        		.dbg	line,	"include\routines_LEVELS.c", 227; 
 4275                        	
 4276                        		.dbg	line,	"include\routines_LEVELS.c", 228; // IF NPC X POSITION IS INFERIOR TO SCREEN RIGHT SIDE //
 4277                        	
 4278                        		.dbg	line,	"include\routines_LEVELS.c", 229; if(list_npc_x_pos_ref[i] < sgx_map_pxl_x + 256)
 4279                        		__ld.wm		_sgx_map_pxl_x
         18:C468  AD 97 26   			lda.l	_sgx_map_pxl_x
         18:C46B  AC 98 26   			ldy.h	_sgx_map_pxl_x
 4280                        		__add.wi	256
         18:C46E  18         			clc
         18:C46F  69 00      			adc.l	#256
         18:C471  42         			say
         18:C472  69 01      			adc.h	#256
         18:C474  42         			say
 4281                        		__ld2x.um	__scroll_npc_end - 1  /* i */
         18:C475  AA         			tax
         18:C476  AD 52 26   			lda	__scroll_npc_end - 1
         18:C479  0A         			asl	a
         18:C47A  22         			sax
 4282                        		__ugt_w.wax	_list_npc_x_pos_ref
         18:C47B  18         			clc			; Subtract memory+1 from Y:A.
         18:C47C  FD 10 26   			sbc.l	_list_npc_x_pos_ref, x
         18:C47F  98         			tya
         18:C480  FD 11 26   			sbc.h	_list_npc_x_pos_ref, x		; CS if Y:A > memory.
 4283                        		__bfalse	.LL50
         18:C483  B0 03 4C 08			bcc	.LL50
         18:C487  C5          
 4284                        	
 4285                        		.dbg	line,	"include\routines_LEVELS.c", 230; {
 4286                        	
 4287                        		.dbg	line,	"include\routines_LEVELS.c", 231; // IF NPC X POSITION IS SUPERIOR TO SCREEN LEFT SIDE PLUS 32 PX //
 4288                        	
 4289                        		.dbg	line,	"include\routines_LEVELS.c", 232; if(list_npc_x_pos_ref[i] - sgx_map_pxl_x + 32 > 0)
 4290                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         18:C488  AD 52 26   			lda	__scroll_npc_end - 1
         18:C48B  0A         			asl	a
         18:C48C  AA         			tax
 4291                        		__ld.wax	_list_npc_x_pos_ref
         18:C48D  BD 10 26   			lda.l	_list_npc_x_pos_ref, x
         18:C490  BC 11 26   			ldy.h	_list_npc_x_pos_ref, x
 4292                        		__sub.wm	_sgx_map_pxl_x
         18:C493  38         			sec
         18:C494  ED 97 26   			sbc.l	_sgx_map_pxl_x
         18:C497  42         			say
         18:C498  ED 98 26   			sbc.h	_sgx_map_pxl_x
         18:C49B  42         			say
 4293                        		__add.wi	32
         18:C49C  18         			clc
         18:C49D  69 20      			adc.l	#32
         18:C49F  90 01      			bcc	!+
         18:C4A1  C8         			iny
         18:C4A2             	!:
 4294                        		__sgt_w.wi	0
         18:C4A2  18         			clc			; Subtract integer+1 from Y:A.
         18:C4A3  E9 00      			sbc.l	#0
         18:C4A5  98         			tya
         18:C4A6  E9 00      			sbc.h	#0
         18:C4A8  50 02      			bvc	!+
         18:C4AA  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         18:C4AC  49 80      	!:		eor	#$80
         18:C4AE  0A         			asl	a
 4295                        		__bfalse	.LL51
         18:C4AF  90 57      			bcc	.LL51
 4296                        	
 4297                        		.dbg	line,	"include\routines_LEVELS.c", 233; {
 4298                        	
 4299                        		.dbg	line,	"include\routines_LEVELS.c", 234; // IF NPC Y POSITION IS INFERIOR TO SCREEN BOTTOM //
 4300                        	
 4301                        		.dbg	line,	"include\routines_LEVELS.c", 235; if(list_npc_y_pos_ref[i] < sgx_map_pxl_y + 224)
 4302                        		__ld.wm		_sgx_map_pxl_y
         18:C4B1  AD 99 26   			lda.l	_sgx_map_pxl_y
         18:C4B4  AC 9A 26   			ldy.h	_sgx_map_pxl_y
 4303                        		__add.wi	224
         18:C4B7  18         			clc
         18:C4B8  69 E0      			adc.l	#224
         18:C4BA  90 01      			bcc	!+
         18:C4BC  C8         			iny
         18:C4BD             	!:
 4304                        		__ld2x.um	__scroll_npc_end - 1  /* i */
         18:C4BD  AA         			tax
         18:C4BE  AD 52 26   			lda	__scroll_npc_end - 1
         18:C4C1  0A         			asl	a
         18:C4C2  22         			sax
 4305                        		__ugt_w.wax	_list_npc_y_pos_ref
         18:C4C3  18         			clc			; Subtract memory+1 from Y:A.
         18:C4C4  FD 22 26   			sbc.l	_list_npc_y_pos_ref, x
         18:C4C7  98         			tya
         18:C4C8  FD 23 26   			sbc.h	_list_npc_y_pos_ref, x		; CS if Y:A > memory.
 4306                        		__bfalse	.LL52
         18:C4CB  90 3B      			bcc	.LL52
 4307                        	
 4308                        		.dbg	line,	"include\routines_LEVELS.c", 236; {
 4309                        	
 4310                        		.dbg	line,	"include\routines_LEVELS.c", 237; // IF NPC Y POSITION IS SUPERIOR TO SCREEN TOP PLUS 32 PX //
 4311                        	
 4312                        		.dbg	line,	"include\routines_LEVELS.c", 238; if(list_npc_y_pos_ref[i] - sgx_map_pxl_y + 32 > 0)
 4313                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         18:C4CD  AD 52 26   			lda	__scroll_npc_end - 1
         18:C4D0  0A         			asl	a
         18:C4D1  AA         			tax
 4314                        		__ld.wax	_list_npc_y_pos_ref
         18:C4D2  BD 22 26   			lda.l	_list_npc_y_pos_ref, x
         18:C4D5  BC 23 26   			ldy.h	_list_npc_y_pos_ref, x
 4315                        		__sub.wm	_sgx_map_pxl_y
         18:C4D8  38         			sec
         18:C4D9  ED 99 26   			sbc.l	_sgx_map_pxl_y
         18:C4DC  42         			say
         18:C4DD  ED 9A 26   			sbc.h	_sgx_map_pxl_y
         18:C4E0  42         			say
 4316                        		__add.wi	32
         18:C4E1  18         			clc
         18:C4E2  69 20      			adc.l	#32
         18:C4E4  90 01      			bcc	!+
         18:C4E6  C8         			iny
         18:C4E7             	!:
 4317                        		__sgt_w.wi	0
         18:C4E7  18         			clc			; Subtract integer+1 from Y:A.
         18:C4E8  E9 00      			sbc.l	#0
         18:C4EA  98         			tya
         18:C4EB  E9 00      			sbc.h	#0
         18:C4ED  50 02      			bvc	!+
         18:C4EF  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         18:C4F1  49 80      	!:		eor	#$80
         18:C4F3  0A         			asl	a
 4318                        		__bfalse	.LL53
         18:C4F4  90 12      			bcc	.LL53
 4319                        	
 4320                        		.dbg	line,	"include\routines_LEVELS.c", 239; {
 4321                        	
 4322                        		.dbg	line,	"include\routines_LEVELS.c", 240; // WE STORE THE NPC ID //
 4323                        	
 4324                        		.dbg	line,	"include\routines_LEVELS.c", 241; list_onscreen_npc[onscreen_npc_number] = i;
 4325                        		__ldx.umq	_onscreen_npc_number
         18:C4F6  AE B9 23   			ldx	_onscreen_npc_number
 4326                        		__ld.um		__scroll_npc_end - 1  /* i */
         18:C4F9  AD 52 26   			lda	__scroll_npc_end - 1
         18:C4FC  C2         			cly
 4327                        		__st.uaxq	_list_onscreen_npc
         18:C4FD  9D CC 23   			sta	_list_onscreen_npc, x
 4328                        	
 4329                        		.dbg	line,	"include\routines_LEVELS.c", 242; onscreen_npc_number += 1;
 4330                        		__add_st.umiq	1, _onscreen_npc_number
         18:C500  EE B9 23   			inc	_onscreen_npc_number
 4331                        	
 4332                        		.dbg	line,	"include\routines_LEVELS.c", 243; 
 4333                        	
 4334                        		.dbg	line,	"include\routines_LEVELS.c", 244; scroll_allowed = TRUE;
 4335                        		__st.umiq	1, __scroll_npc_end - 2  /* scroll_allowed */
         18:C503  A9 01      			lda.l	#1
         18:C505  8D 51 26   			sta	__scroll_npc_end - 2
 4336                        	
 4337                        		.dbg	line,	"include\routines_LEVELS.c", 245; }
 4338                        	
 4339                        		.dbg	line,	"include\routines_LEVELS.c", 246; }
 4340    18:C508             	.LL53:
 4341                        	
 4342                        		.dbg	line,	"include\routines_LEVELS.c", 247; }
 4343    18:C508             	.LL52:
 4344                        	
 4345                        		.dbg	line,	"include\routines_LEVELS.c", 248; }
 4346    18:C508             	.LL51:
 4347                        	
 4348                        		.dbg	line,	"include\routines_LEVELS.c", 250; // IF NPC IS WITHIN THE SCREEN LIMITS //
 4349                        	
 4350                        		.dbg	line,	"include\routines_LEVELS.c", 251; if(scroll_allowed == TRUE)
 4351    18:C508             	.LL50:
 4352                        		__ld.umq	__scroll_npc_end - 2  /* scroll_allowed */
         18:C508  AD 51 26   			lda	__scroll_npc_end - 2
 4353                        		__equ_b.uiq	1
         18:C50B  C9 01      			cmp	#1
         18:C50D  F0 01      			beq	!+
         18:C50F  18         			clc
         18:C510             	!:
 4354                        		__bfalse	.LL54
         18:C510  90 44      			bcc	.LL54
 4355                        	
 4356                        		.dbg	line,	"include\routines_LEVELS.c", 252; {
 4357                        	
 4358                        		.dbg	line,	"include\routines_LEVELS.c", 253; list_npc_x_pos[i] = list_npc_x_pos_ref[i] - sgx_map_pxl_x;
 4359                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         18:C512  AD 52 26   			lda	__scroll_npc_end - 1
         18:C515  0A         			asl	a
         18:C516  AA         			tax
 4360                        		__ld.wax	_list_npc_x_pos_ref
         18:C517  BD 10 26   			lda.l	_list_npc_x_pos_ref, x
         18:C51A  BC 11 26   			ldy.h	_list_npc_x_pos_ref, x
 4361                        		__sub.wm	_sgx_map_pxl_x
         18:C51D  38         			sec
         18:C51E  ED 97 26   			sbc.l	_sgx_map_pxl_x
         18:C521  42         			say
         18:C522  ED 98 26   			sbc.h	_sgx_map_pxl_x
         18:C525  42         			say
 4362                        		__ld2x.um	__scroll_npc_end - 1  /* i */
         18:C526  AA         			tax
         18:C527  AD 52 26   			lda	__scroll_npc_end - 1
         18:C52A  0A         			asl	a
         18:C52B  22         			sax
 4363                        		__st.waxq	_list_npc_x_pos
         18:C52C  9D EC 25   			sta.l	_list_npc_x_pos, x
         18:C52F  98         			tya
         18:C530  9D ED 25   			sta.h	_list_npc_x_pos, x
 4364                        	
 4365                        		.dbg	line,	"include\routines_LEVELS.c", 254; list_npc_y_pos[i] = list_npc_y_pos_ref[i] - sgx_map_pxl_y;
 4366                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         18:C533  AD 52 26   			lda	__scroll_npc_end - 1
         18:C536  0A         			asl	a
         18:C537  AA         			tax
 4367                        		__ld.wax	_list_npc_y_pos_ref
         18:C538  BD 22 26   			lda.l	_list_npc_y_pos_ref, x
         18:C53B  BC 23 26   			ldy.h	_list_npc_y_pos_ref, x
 4368                        		__sub.wm	_sgx_map_pxl_y
         18:C53E  38         			sec
         18:C53F  ED 99 26   			sbc.l	_sgx_map_pxl_y
         18:C542  42         			say
         18:C543  ED 9A 26   			sbc.h	_sgx_map_pxl_y
         18:C546  42         			say
 4369                        		__ld2x.um	__scroll_npc_end - 1  /* i */
         18:C547  AA         			tax
         18:C548  AD 52 26   			lda	__scroll_npc_end - 1
         18:C54B  0A         			asl	a
         18:C54C  22         			sax
 4370                        		__st.waxq	_list_npc_y_pos
         18:C54D  9D FE 25   			sta.l	_list_npc_y_pos, x
         18:C550  98         			tya
         18:C551  9D FF 25   			sta.h	_list_npc_y_pos, x
 4371                        	
 4372                        		.dbg	line,	"include\routines_LEVELS.c", 255; }
 4373                        	
 4374                        		.dbg	line,	"include\routines_LEVELS.c", 257; else
 4375                        		__bra		.LL55
         18:C554  80 1E      			bra	.LL55
 4376    18:C556             	.LL54:
 4377                        	
 4378                        		.dbg	line,	"include\routines_LEVELS.c", 258; {
 4379                        	
 4380                        		.dbg	line,	"include\routines_LEVELS.c", 259; list_npc_x_pos[i] = -32;
 4381                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         18:C556  AD 52 26   			lda	__scroll_npc_end - 1
         18:C559  0A         			asl	a
         18:C55A  AA         			tax
 4382                        		__st.waxiq	-32, _list_npc_x_pos
         18:C55B  A9 E0      			lda.l	#-32
         18:C55D  9D EC 25   			sta.l	_list_npc_x_pos, x
         18:C560  A9 FF      			lda.h	#-32
         18:C562  9D ED 25   			sta.h	_list_npc_x_pos, x
 4383                        	
 4384                        		.dbg	line,	"include\routines_LEVELS.c", 260; list_npc_y_pos[i] = -32;
 4385                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         18:C565  AD 52 26   			lda	__scroll_npc_end - 1
         18:C568  0A         			asl	a
         18:C569  AA         			tax
 4386                        		__st.waxiq	-32, _list_npc_y_pos
         18:C56A  A9 E0      			lda.l	#-32
         18:C56C  9D FE 25   			sta.l	_list_npc_y_pos, x
         18:C56F  A9 FF      			lda.h	#-32
         18:C571  9D FF 25   			sta.h	_list_npc_y_pos, x
 4387                        	
 4388                        		.dbg	line,	"include\routines_LEVELS.c", 261; }
 4389    18:C574             	.LL55:
 4390                        	
 4391                        		.dbg	line,	"include\routines_LEVELS.c", 263; sgx_spr_set(i + npc_start_index);
 4392                        		__ld.um		__scroll_npc_end - 1  /* i */
         18:C574  AD 52 26   			lda	__scroll_npc_end - 1
         18:C577  C2         			cly
 4393                        		__add.um	_npc_start_index
         18:C578  18         			clc
         18:C579  6D B7 23   			adc	_npc_start_index
         18:C57C  90 01      			bcc	!+
         18:C57E  C8         			iny
         18:C57F             	!:
 4394                        		__call		_sgx_spr_set.1
         18:C57F  20 8A E8   			call	_sgx_spr_set.1
 4395                        	
 4396                        		.dbg	line,	"include\routines_LEVELS.c", 265; sgx_spr_x(list_npc_x_pos[i]);
 4397                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         18:C582  AD 52 26   			lda	__scroll_npc_end - 1
         18:C585  0A         			asl	a
         18:C586  AA         			tax
 4398                        		__ld.wax	_list_npc_x_pos
         18:C587  BD EC 25   			lda.l	_list_npc_x_pos, x
         18:C58A  BC ED 25   			ldy.h	_list_npc_x_pos, x
 4399                        		__call		_sgx_spr_x.1
         18:C58D  20 B7 E8   			call	_sgx_spr_x.1
 4400                        	
 4401                        		.dbg	line,	"include\routines_LEVELS.c", 266; sgx_spr_y(list_npc_y_pos[i]);
 4402                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         18:C590  AD 52 26   			lda	__scroll_npc_end - 1
         18:C593  0A         			asl	a
         18:C594  AA         			tax
 4403                        		__ld.wax	_list_npc_y_pos
         18:C595  BD FE 25   			lda.l	_list_npc_y_pos, x
         18:C598  BC FF 25   			ldy.h	_list_npc_y_pos, x
 4404                        		__call		_sgx_spr_y.1
         18:C59B  20 C6 E8   			call	_sgx_spr_y.1
 4405                        	
 4406                        		.dbg	line,	"include\routines_LEVELS.c", 267; }
 4407                        	
 4408                        		.dbg	line,	"include\routines_LEVELS.c", 268; }
 4409    18:C59E             	.LL49	.alias		.LL46
 4410                        		__bra		.LL46
         18:C59E  4C 52 C4   			bra	.LL46
 4411    18:C5A1             	.LL48:
 4412                        	
 4413                        		.dbg	line,	"include\routines_LEVELS.c", 269; }
 4414    18:C5A1             	.LL44:
 4415                        		__return	0
         18:C5A1  4C EF FF   			jmp	leave_proc
 4416                        		.dbg	clear
 4417                        		.endp
 4418                        		.pceas
 4419                        	
 4420                        		.dbg	line,	"include\routines_LEVELS.c", 274; int check_TILE_DEPTH(signed char x_offset , signed char y_offset)
 4421                        		.dbg	line,	"include\routines_LEVELS.c", 275; {
 4422                        	;***********************
 4423                        	;***********************
 4424                        	
 4425                        		.hucc
 4426    18:CF0E             		.proc		_check_TILE_DEPTH
 4427                        		__enter		_check_TILE_DEPTH
 4428                        	
 4429                        		.dbg	line,	"include\routines_LEVELS.c", 276; int player_COLL_X;
 4430                        	
 4431                        		.dbg	line,	"include\routines_LEVELS.c", 277; int player_COLL_Y;
 4432                        	
 4433                        		.dbg	line,	"include\routines_LEVELS.c", 280; player_COLL_X = player_pos_x + x_offset;
 4434                        		__ld.bs		2  /* x_offset */
         18:CF0E  A6 8D      			ldx	<__sp
         18:CF10  B5 0A      			lda	<__stack + 2, x
         18:CF12  C2         			cly
         18:CF13  10 01      			bpl	!+	; signed
         18:CF15  88         			dey
         18:CF16             	!:
 4435                        		__add.wm	_player_pos_x
         18:CF16  18         			clc
         18:CF17  6D DA 24   			adc.l	_player_pos_x
         18:CF1A  42         			say
         18:CF1B  6D DB 24   			adc.h	_player_pos_x
         18:CF1E  42         			say
 4436                        		__st.wmq	__check_TILE_DEPTH_end - 2  /* player_COLL_X */
         18:CF1F  8D 51 26   			sta.l	__check_TILE_DEPTH_end - 2
         18:CF22  8C 52 26   			sty.h	__check_TILE_DEPTH_end - 2
 4437                        	
 4438                        		.dbg	line,	"include\routines_LEVELS.c", 281; player_COLL_Y = player_pos_y + 32 - y_offset;//32
 4439                        		__ld.wm		_player_pos_y
         18:CF25  AD DC 24   			lda.l	_player_pos_y
         18:CF28  AC DD 24   			ldy.h	_player_pos_y
 4440                        		__add.wi	32
         18:CF2B  18         			clc
         18:CF2C  69 20      			adc.l	#32
         18:CF2E  90 01      			bcc	!+
         18:CF30  C8         			iny
         18:CF31             	!:
 4441                        		__push.wr
         18:CF31  5A         			phy
         18:CF32  48         			pha
 4442                        		__ld.bs		0  /* y_offset */
         18:CF33  A6 8D      			ldx	<__sp
         18:CF35  B5 08      			lda	<__stack + 0, x
         18:CF37  C2         			cly
         18:CF38  10 01      			bpl	!+	; signed
         18:CF3A  88         			dey
         18:CF3B             	!:
 4443                        		__sub.wt
         18:CF3B  BA         			tsx
         18:CF3C  38         			sec
         18:CF3D  49 FF      			eor	#$FF
         18:CF3F  7D 01 21   			adc.l	__tos, x
         18:CF42  42         			say
         18:CF43  49 FF      			eor	#$FF
         18:CF45  7D 02 21   			adc.h	__tos, x
         18:CF48  42         			say
         18:CF49  E8         			inx
         18:CF4A  E8         			inx
         18:CF4B  9A         			txs
 4444                        		__st.wmq	__check_TILE_DEPTH_end - 4  /* player_COLL_Y */
         18:CF4C  8D 4F 26   			sta.l	__check_TILE_DEPTH_end - 4
         18:CF4F  8C 50 26   			sty.h	__check_TILE_DEPTH_end - 4
 4445                        	
 4446                        		.dbg	line,	"include\routines_LEVELS.c", 283; get_map_block(player_COLL_X + sgx_map_pxl_x, player_COLL_Y + sgx_map_pxl_y);
 4447                        		__ld.wm		__check_TILE_DEPTH_end - 2  /* player_COLL_X */
         18:CF52  AD 51 26   			lda.l	__check_TILE_DEPTH_end - 2
         18:CF55  AC 52 26   			ldy.h	__check_TILE_DEPTH_end - 2
 4448                        		__add.wm	_sgx_map_pxl_x
         18:CF58  18         			clc
         18:CF59  6D 97 26   			adc.l	_sgx_map_pxl_x
         18:CF5C  42         			say
         18:CF5D  6D 98 26   			adc.h	_sgx_map_pxl_x
         18:CF60  42         			say
 4449                        		__st.wmq	map_pxl_x
         18:CF61  85 FC      			sta.l	map_pxl_x
         18:CF63  84 FD      			sty.h	map_pxl_x
 4450                        		__ld.wm		__check_TILE_DEPTH_end - 4  /* player_COLL_Y */
         18:CF65  AD 4F 26   			lda.l	__check_TILE_DEPTH_end - 4
         18:CF68  AC 50 26   			ldy.h	__check_TILE_DEPTH_end - 4
 4451                        		__add.wm	_sgx_map_pxl_y
         18:CF6B  18         			clc
         18:CF6C  6D 99 26   			adc.l	_sgx_map_pxl_y
         18:CF6F  42         			say
         18:CF70  6D 9A 26   			adc.h	_sgx_map_pxl_y
         18:CF73  42         			say
 4452                        		__st.wmq	map_pxl_y
         18:CF74  85 FE      			sta.l	map_pxl_y
         18:CF76  84 FF      			sty.h	map_pxl_y
 4453                        		__call		_get_map_block.2
         18:CF78  20 95 FF   			call	_get_map_block.2
 4454                        	
 4455                        		.dbg	line,	"include\routines_LEVELS.c", 284; }
 4456    18:CF7B             	.LL56:
 4457                        		__modsp		4
         18:CF7B  AA         			tax
         18:CF7C  A5 8D      			lda	<__sp
         18:CF7E  18         			clc
         18:CF7F  69 04      			adc	#4
         18:CF81  85 8D      			sta	<__sp
         18:CF83  8A         			txa
 4458                        		__return	1
         18:CF84  AA         			tax
         18:CF85  4C EF FF   			jmp	leave_proc
 4459                        		.dbg	clear
 4460                        		.endp
 4461                        		.pceas
 4462                        	
 4463                        		.dbg	line,	"include\routines_LEVELS.c", 286; // CHECK COLLISION WITH BG //
 4464                        		.dbg	line,	"include\routines_LEVELS.c", 287; int check_BG(signed char x_offset , signed char y_offset)
 4465                        		.dbg	line,	"include\routines_LEVELS.c", 288; {
 4466                        	;***********************
 4467                        	;***********************
 4468                        	
 4469                        		.hucc
 4470    18:CFF2             		.proc		_check_BG
 4471                        		__enter		_check_BG
 4472                        	
 4473                        		.dbg	line,	"include\routines_LEVELS.c", 289; int player_COLL_X;
 4474                        	
 4475                        		.dbg	line,	"include\routines_LEVELS.c", 290; int player_COLL_Y;
 4476                        	
 4477                        		.dbg	line,	"include\routines_LEVELS.c", 293; player_COLL_X = player_pos_x + x_offset;
 4478                        		__ld.bs		2  /* x_offset */
         18:CFF2  A6 8D      			ldx	<__sp
         18:CFF4  B5 0A      			lda	<__stack + 2, x
         18:CFF6  C2         			cly
         18:CFF7  10 01      			bpl	!+	; signed
         18:CFF9  88         			dey
         18:CFFA             	!:
 4479                        		__add.wm	_player_pos_x
         18:CFFA  18         			clc
         18:CFFB  6D DA 24   			adc.l	_player_pos_x
         18:CFFE  42         			say
         18:CFFF  6D DB 24   			adc.h	_player_pos_x
         18:D002  42         			say
 4480                        		__st.wmq	__check_BG_end - 2  /* player_COLL_X */
         18:D003  8D 51 26   			sta.l	__check_BG_end - 2
         18:D006  8C 52 26   			sty.h	__check_BG_end - 2
 4481                        	
 4482                        		.dbg	line,	"include\routines_LEVELS.c", 294; player_COLL_Y = player_pos_y + y_offset;
 4483                        		__ld.bs		0  /* y_offset */
         18:D009  A6 8D      			ldx	<__sp
         18:D00B  B5 08      			lda	<__stack + 0, x
         18:D00D  C2         			cly
         18:D00E  10 01      			bpl	!+	; signed
         18:D010  88         			dey
         18:D011             	!:
 4484                        		__add.wm	_player_pos_y
         18:D011  18         			clc
         18:D012  6D DC 24   			adc.l	_player_pos_y
         18:D015  42         			say
         18:D016  6D DD 24   			adc.h	_player_pos_y
         18:D019  42         			say
 4485                        		__st.wmq	__check_BG_end - 4  /* player_COLL_Y */
         18:D01A  8D 4F 26   			sta.l	__check_BG_end - 4
         18:D01D  8C 50 26   			sty.h	__check_BG_end - 4
 4486                        	
 4487                        		.dbg	line,	"include\routines_LEVELS.c", 296; get_map_block(player_COLL_X + sgx_map_pxl_x, player_COLL_Y + sgx_map_pxl_y);
 4488                        		__ld.wm		__check_BG_end - 2  /* player_COLL_X */
         18:D020  AD 51 26   			lda.l	__check_BG_end - 2
         18:D023  AC 52 26   			ldy.h	__check_BG_end - 2
 4489                        		__add.wm	_sgx_map_pxl_x
         18:D026  18         			clc
         18:D027  6D 97 26   			adc.l	_sgx_map_pxl_x
         18:D02A  42         			say
         18:D02B  6D 98 26   			adc.h	_sgx_map_pxl_x
         18:D02E  42         			say
 4490                        		__st.wmq	map_pxl_x
         18:D02F  85 FC      			sta.l	map_pxl_x
         18:D031  84 FD      			sty.h	map_pxl_x
 4491                        		__ld.wm		__check_BG_end - 4  /* player_COLL_Y */
         18:D033  AD 4F 26   			lda.l	__check_BG_end - 4
         18:D036  AC 50 26   			ldy.h	__check_BG_end - 4
 4492                        		__add.wm	_sgx_map_pxl_y
         18:D039  18         			clc
         18:D03A  6D 99 26   			adc.l	_sgx_map_pxl_y
         18:D03D  42         			say
         18:D03E  6D 9A 26   			adc.h	_sgx_map_pxl_y
         18:D041  42         			say
 4493                        		__st.wmq	map_pxl_y
         18:D042  85 FE      			sta.l	map_pxl_y
         18:D044  84 FF      			sty.h	map_pxl_y
 4494                        		__call		_get_map_block.2
         18:D046  20 95 FF   			call	_get_map_block.2
 4495                        	
 4496                        		.dbg	line,	"include\routines_LEVELS.c", 297; }
 4497    18:D049             	.LL57:
 4498                        		__modsp		4
         18:D049  AA         			tax
         18:D04A  A5 8D      			lda	<__sp
         18:D04C  18         			clc
         18:D04D  69 04      			adc	#4
         18:D04F  85 8D      			sta	<__sp
         18:D051  8A         			txa
 4499                        		__return	1
         18:D052  AA         			tax
         18:D053  4C EF FF   			jmp	leave_proc
 4500                        		.dbg	clear
 4501                        		.endp
 4502                        		.pceas
 4503                        	
 4504                        		.dbg	line,	"include\routines_LEVELS.c", 299; // CHECK COLLISION WITH OBJECTS //
 4505                        		.dbg	line,	"include\routines_LEVELS.c", 300; void check_OBJECT()
 4506                        		.dbg	line,	"include\routines_LEVELS.c", 301; {
 4507                        	;***********************
 4508                        	;***********************
 4509                        	
 4510                        		.hucc
 4511    02:DDD3             		.proc		_check_OBJECT
 4512                        		__enter		_check_OBJECT
 4513                        	
 4514                        		.dbg	line,	"include\routines_LEVELS.c", 302; if(onscreen_object_number != 0)
 4515                        		__tst.um	_onscreen_object_number
         02:DDD3  AD 37 23   			lda	_onscreen_object_number
         02:DDD6  C9 01      			cmp	#1
 4516                        		__bfalse	.LL59
         02:DDD8  B0 03 4C 54			bcc	.LL59
         02:DDDC  DF          
 4517                        	
 4518                        		.dbg	line,	"include\routines_LEVELS.c", 303; {
 4519                        	
 4520                        		.dbg	line,	"include\routines_LEVELS.c", 304; char i;
 4521                        	
 4522                        		.dbg	line,	"include\routines_LEVELS.c", 305; char current_object_id;
 4523                        	
 4524                        		.dbg	line,	"include\routines_LEVELS.c", 306; char current_object_type;
 4525                        	
 4526                        		.dbg	line,	"include\routines_LEVELS.c", 308; for(i=0 ; i<onscreen_object_number ; i++)
 4527                        		__st.umiq	0, __check_OBJECT_end - 1  /* i */
         02:DDDD  9C 02 23   			stz	__check_OBJECT_end - 1
 4528    02:DDE0             	.LL60:
 4529                        		__ld.umq	__check_OBJECT_end - 1  /* i */
         02:DDE0  AD 02 23   			lda	__check_OBJECT_end - 1
 4530                        		__ult_b.umq	_onscreen_object_number
         02:DDE3  CD 37 23   			cmp	_onscreen_object_number		; Subtract memory from A.
         02:DDE6  6A         			ror	a		; CC if A < memory.
         02:DDE7  49 80      			eor	#$80
         02:DDE9  2A         			rol	a
 4531                        		__btrue		.LL62
         02:DDEA  B0 08      			bcs	.LL62
 4532                        		__bra		.LL63
         02:DDEC  4C 54 DF   			bra	.LL63
 4533    02:DDEF             	.LL61:
 4534                        		__inc.umq	__check_OBJECT_end - 1  /* i */
         02:DDEF  EE 02 23   			inc	__check_OBJECT_end - 1
 4535                        		__bra		.LL60
         02:DDF2  80 EC      			bra	.LL60
 4536    02:DDF4             	.LL62:
 4537                        	
 4538                        		.dbg	line,	"include\routines_LEVELS.c", 309; {
 4539                        	
 4540                        		.dbg	line,	"include\routines_LEVELS.c", 310; // RETRIEVE OBJECT INDEX IN THE LIST //
 4541                        	
 4542                        		.dbg	line,	"include\routines_LEVELS.c", 311; current_object_id = list_onscreen_object[i];
 4543                        		__ldx.umq	__check_OBJECT_end - 1  /* i */
         02:DDF4  AE 02 23   			ldx	__check_OBJECT_end - 1
 4544                        		__ld.uax	_list_onscreen_object
         02:DDF7  BD 9C 23   			lda	_list_onscreen_object, x
         02:DDFA  C2         			cly
 4545                        		__st.umq	__check_OBJECT_end - 2  /* current_object_id */
         02:DDFB  8D 01 23   			sta	__check_OBJECT_end - 2
 4546                        	
 4547                        		.dbg	line,	"include\routines_LEVELS.c", 312; // RETRIEVE OBJECT TYPE //
 4548                        	
 4549                        		.dbg	line,	"include\routines_LEVELS.c", 313; current_object_type = list_object_type[current_object_id];
 4550                        		__ldx.umq	__check_OBJECT_end - 2  /* current_object_id */
         02:DDFE  AE 01 23   			ldx	__check_OBJECT_end - 2
 4551                        		__ld.uax	_list_object_type
         02:DE01  BD 38 23   			lda	_list_object_type, x
         02:DE04  C2         			cly
 4552                        		__st.umq	__check_OBJECT_end - 3  /* current_object_type */
         02:DE05  8D 00 23   			sta	__check_OBJECT_end - 3
 4553                        	
 4554                        		.dbg	line,	"include\routines_LEVELS.c", 315; if(current_object_type != TYPE_POT)
 4555                        		__ld.umq	__check_OBJECT_end - 3  /* current_object_type */
         02:DE08  AD 00 23   			lda	__check_OBJECT_end - 3
 4556                        		__neq_b.uiq	1
         02:DE0B  38         			sec
         02:DE0C  49 01      			eor	#1
         02:DE0E  D0 01      			bne	!+
         02:DE10  18         			clc
         02:DE11             	!:
 4557                        		__bfalse	.LL64
         02:DE11  90 DC      			bcc	.LL64
 4558                        	
 4559                        		.dbg	line,	"include\routines_LEVELS.c", 316; {
 4560                        	
 4561                        		.dbg	line,	"include\routines_LEVELS.c", 317; if(abs( (player_pos_x + 16) - (list_object_x_pos[current_object_id] + 8) ) < OBJECT_MARGIN)
 4562                        		__ld.wm		_player_pos_x
         02:DE13  AD DA 24   			lda.l	_player_pos_x
         02:DE16  AC DB 24   			ldy.h	_player_pos_x
 4563                        		__add.wi	16
         02:DE19  18         			clc
         02:DE1A  69 10      			adc.l	#16
         02:DE1C  90 01      			bcc	!+
         02:DE1E  C8         			iny
         02:DE1F             	!:
 4564                        		__push.wr
         02:DE1F  5A         			phy
         02:DE20  48         			pha
 4565                        		__ld2x.umq	__check_OBJECT_end - 2  /* current_object_id */
         02:DE21  AD 01 23   			lda	__check_OBJECT_end - 2
         02:DE24  0A         			asl	a
         02:DE25  AA         			tax
 4566                        		__ld.wax	_list_object_x_pos
         02:DE26  BD E4 24   			lda.l	_list_object_x_pos, x
         02:DE29  BC E5 24   			ldy.h	_list_object_x_pos, x
 4567                        		__add.wi	8
         02:DE2C  18         			clc
         02:DE2D  69 08      			adc.l	#8
         02:DE2F  90 01      			bcc	!+
         02:DE31  C8         			iny
         02:DE32             	!:
 4568                        		__sub.wt
         02:DE32  BA         			tsx
         02:DE33  38         			sec
         02:DE34  49 FF      			eor	#$FF
         02:DE36  7D 01 21   			adc.l	__tos, x
         02:DE39  42         			say
         02:DE3A  49 FF      			eor	#$FF
         02:DE3C  7D 02 21   			adc.h	__tos, x
         02:DE3F  42         			say
         02:DE40  E8         			inx
         02:DE41  E8         			inx
         02:DE42  9A         			txs
 4569                        		__call		_abs.1
         02:DE43  20 09 E5   			call	_abs.1
 4570                        		__slt_w.wi	10
         02:DE46  C9 0A      			cmp.l	#10		; Subtract integer from Y:A.
         02:DE48  98         			tya
         02:DE49  E9 00      			sbc.h	#10
         02:DE4B  50 02      			bvc	!+
         02:DE4D  49 80      			eor	#$80		; -ve if Y:A < integer (signed).
         02:DE4F  0A         	!:		asl	a
 4571                        		__bfalse	.LL65
         02:DE50  90 9D      			bcc	.LL65
 4572                        	
 4573                        		.dbg	line,	"include\routines_LEVELS.c", 318; {
 4574                        	
 4575                        		.dbg	line,	"include\routines_LEVELS.c", 319; if(abs( (player_pos_y + 16) - (list_object_y_pos[current_object_id] + 8) ) < OBJECT_MARGIN)
 4576                        		__ld.wm		_player_pos_y
         02:DE52  AD DC 24   			lda.l	_player_pos_y
         02:DE55  AC DD 24   			ldy.h	_player_pos_y
 4577                        		__add.wi	16
         02:DE58  18         			clc
         02:DE59  69 10      			adc.l	#16
         02:DE5B  90 01      			bcc	!+
         02:DE5D  C8         			iny
         02:DE5E             	!:
 4578                        		__push.wr
         02:DE5E  5A         			phy
         02:DE5F  48         			pha
 4579                        		__ld2x.umq	__check_OBJECT_end - 2  /* current_object_id */
         02:DE60  AD 01 23   			lda	__check_OBJECT_end - 2
         02:DE63  0A         			asl	a
         02:DE64  AA         			tax
 4580                        		__ld.wax	_list_object_y_pos
         02:DE65  BD 16 25   			lda.l	_list_object_y_pos, x
         02:DE68  BC 17 25   			ldy.h	_list_object_y_pos, x
 4581                        		__add.wi	8
         02:DE6B  18         			clc
         02:DE6C  69 08      			adc.l	#8
         02:DE6E  90 01      			bcc	!+
         02:DE70  C8         			iny
         02:DE71             	!:
 4582                        		__sub.wt
         02:DE71  BA         			tsx
         02:DE72  38         			sec
         02:DE73  49 FF      			eor	#$FF
         02:DE75  7D 01 21   			adc.l	__tos, x
         02:DE78  42         			say
         02:DE79  49 FF      			eor	#$FF
         02:DE7B  7D 02 21   			adc.h	__tos, x
         02:DE7E  42         			say
         02:DE7F  E8         			inx
         02:DE80  E8         			inx
         02:DE81  9A         			txs
 4583                        		__call		_abs.1
         02:DE82  20 09 E5   			call	_abs.1
 4584                        		__slt_w.wi	10
         02:DE85  C9 0A      			cmp.l	#10		; Subtract integer from Y:A.
         02:DE87  98         			tya
         02:DE88  E9 00      			sbc.h	#10
         02:DE8A  50 02      			bvc	!+
         02:DE8C  49 80      			eor	#$80		; -ve if Y:A < integer (signed).
         02:DE8E  0A         	!:		asl	a
 4585                        		__bfalse	.LL66
         02:DE8F  B0 03 4C EF			bcc	.LL66
         02:DE93  DD          
 4586                        	
 4587                        		.dbg	line,	"include\routines_LEVELS.c", 320; {
 4588                        	
 4589                        		.dbg	line,	"include\routines_LEVELS.c", 321; // THE OBJECT DISAPPEARS //
 4590                        	
 4591                        		.dbg	line,	"include\routines_LEVELS.c", 322; list_object_x_pos[current_object_id] = -16;
 4592                        		__ld2x.umq	__check_OBJECT_end - 2  /* current_object_id */
         02:DE94  AD 01 23   			lda	__check_OBJECT_end - 2
         02:DE97  0A         			asl	a
         02:DE98  AA         			tax
 4593                        		__st.waxiq	-16, _list_object_x_pos
         02:DE99  A9 F0      			lda.l	#-16
         02:DE9B  9D E4 24   			sta.l	_list_object_x_pos, x
         02:DE9E  A9 FF      			lda.h	#-16
         02:DEA0  9D E5 24   			sta.h	_list_object_x_pos, x
 4594                        	
 4595                        		.dbg	line,	"include\routines_LEVELS.c", 323; list_object_y_pos[current_object_id] = -16;
 4596                        		__ld2x.umq	__check_OBJECT_end - 2  /* current_object_id */
         02:DEA3  AD 01 23   			lda	__check_OBJECT_end - 2
         02:DEA6  0A         			asl	a
         02:DEA7  AA         			tax
 4597                        		__st.waxiq	-16, _list_object_y_pos
         02:DEA8  A9 F0      			lda.l	#-16
         02:DEAA  9D 16 25   			sta.l	_list_object_y_pos, x
         02:DEAD  A9 FF      			lda.h	#-16
         02:DEAF  9D 17 25   			sta.h	_list_object_y_pos, x
 4598                        	
 4599                        		.dbg	line,	"include\routines_LEVELS.c", 324; list_object_state[current_object_id] = STATE_INACTIVE;
 4600                        		__ldx.umq	__check_OBJECT_end - 2  /* current_object_id */
         02:DEB2  AE 01 23   			ldx	__check_OBJECT_end - 2
 4601                        		__st.uaxiq	1, _list_object_state
         02:DEB5  A9 01      			lda.l	#1
         02:DEB7  9D 51 23   			sta	_list_object_state, x
 4602                        	
 4603                        		.dbg	line,	"include\routines_LEVELS.c", 326; sgx_spr_set(current_object_id + object_start_index);
 4604                        		__ld.um		__check_OBJECT_end - 2  /* current_object_id */
         02:DEBA  AD 01 23   			lda	__check_OBJECT_end - 2
         02:DEBD  C2         			cly
 4605                        		__add.um	_object_start_index
         02:DEBE  18         			clc
         02:DEBF  6D 35 23   			adc	_object_start_index
         02:DEC2  90 01      			bcc	!+
         02:DEC4  C8         			iny
         02:DEC5             	!:
 4606                        		__call		_sgx_spr_set.1
         02:DEC5  20 8A E8   			call	_sgx_spr_set.1
 4607                        	
 4608                        		.dbg	line,	"include\routines_LEVELS.c", 327; sgx_spr_x(list_object_x_pos[current_object_id]);
 4609                        		__ld2x.umq	__check_OBJECT_end - 2  /* current_object_id */
         02:DEC8  AD 01 23   			lda	__check_OBJECT_end - 2
         02:DECB  0A         			asl	a
         02:DECC  AA         			tax
 4610                        		__ld.wax	_list_object_x_pos
         02:DECD  BD E4 24   			lda.l	_list_object_x_pos, x
         02:DED0  BC E5 24   			ldy.h	_list_object_x_pos, x
 4611                        		__call		_sgx_spr_x.1
         02:DED3  20 B7 E8   			call	_sgx_spr_x.1
 4612                        	
 4613                        		.dbg	line,	"include\routines_LEVELS.c", 328; sgx_spr_y(list_object_y_pos[current_object_id]);
 4614                        		__ld2x.umq	__check_OBJECT_end - 2  /* current_object_id */
         02:DED6  AD 01 23   			lda	__check_OBJECT_end - 2
         02:DED9  0A         			asl	a
         02:DEDA  AA         			tax
 4615                        		__ld.wax	_list_object_y_pos
         02:DEDB  BD 16 25   			lda.l	_list_object_y_pos, x
         02:DEDE  BC 17 25   			ldy.h	_list_object_y_pos, x
 4616                        		__call		_sgx_spr_y.1
         02:DEE1  20 C6 E8   			call	_sgx_spr_y.1
 4617                        	
 4618                        		.dbg	line,	"include\routines_LEVELS.c", 329; 
 4619                        	
 4620                        		.dbg	line,	"include\routines_LEVELS.c", 331; switch(current_object_type)
 4621                        		__ld.umq	__check_OBJECT_end - 3  /* current_object_type */
         02:DEE4  AD 00 23   			lda	__check_OBJECT_end - 3
 4622                        		__bra		.LL67
         02:DEE7  80 4A      			bra	.LL67
 4623                        	
 4624                        		.dbg	line,	"include\routines_LEVELS.c", 332; {
 4625                        	
 4626                        		.dbg	line,	"include\routines_LEVELS.c", 333; case TYPE_HOURGLASS:
 4627    02:DEE9             	.LL69:
 4628                        		__case		0
 4629                        	
 4630                        		.dbg	line,	"include\routines_LEVELS.c", 334; if(seconds + 30 > 59)
 4631                        		__ld.um		_seconds
         02:DEE9  AD 31 23   			lda	_seconds
         02:DEEC  C2         			cly
 4632                        		__add.wi	30
         02:DEED  18         			clc
         02:DEEE  69 1E      			adc.l	#30
         02:DEF0  90 01      			bcc	!+
         02:DEF2  C8         			iny
         02:DEF3             	!:
 4633                        		__sgt_w.wi	59
         02:DEF3  18         			clc			; Subtract integer+1 from Y:A.
         02:DEF4  E9 3B      			sbc.l	#59
         02:DEF6  98         			tya
         02:DEF7  E9 00      			sbc.h	#59
         02:DEF9  50 02      			bvc	!+
         02:DEFB  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         02:DEFD  49 80      	!:		eor	#$80
         02:DEFF  0A         			asl	a
 4634                        		__bfalse	.LL70
         02:DF00  90 13      			bcc	.LL70
 4635                        	
 4636                        		.dbg	line,	"include\routines_LEVELS.c", 335; {
 4637                        	
 4638                        		.dbg	line,	"include\routines_LEVELS.c", 336; seconds = seconds + 30 - 60;
 4639                        		__ld.um		_seconds
         02:DF02  AD 31 23   			lda	_seconds
         02:DF05  C2         			cly
 4640                        		__sub.wi	30
         02:DF06  38         			sec
         02:DF07  E9 1E      			sbc.l	#30
         02:DF09  B0 01      			bcs	!+
         02:DF0B  88         			dey
         02:DF0C             	!:
 4641                        		__st.umq	_seconds
         02:DF0C  8D 31 23   			sta	_seconds
 4642                        	
 4643                        		.dbg	line,	"include\routines_LEVELS.c", 337; minutes += 1;
 4644                        		__add_st.umiq	1, _minutes
         02:DF0F  EE 30 23   			inc	_minutes
 4645                        	
 4646                        		.dbg	line,	"include\routines_LEVELS.c", 338; }
 4647                        	
 4648                        		.dbg	line,	"include\routines_LEVELS.c", 340; else
 4649                        		__bra		.LL71
         02:DF12  4C EF DD   			bra	.LL71
 4650    02:DF15             	.LL70:
 4651                        	
 4652                        		.dbg	line,	"include\routines_LEVELS.c", 341; {
 4653                        	
 4654                        		.dbg	line,	"include\routines_LEVELS.c", 342; seconds += 30;
 4655                        		__add_st.umiq	30, _seconds
         02:DF15  18         			clc
         02:DF16  AD 31 23   			lda	_seconds
         02:DF19  69 1E      			adc	#30
         02:DF1B  8D 31 23   			sta	_seconds
 4656                        	
 4657                        		.dbg	line,	"include\routines_LEVELS.c", 343; }
 4658    02:DF1E             	.LL71	.alias		.LL68
 4659                        	
 4660                        		.dbg	line,	"include\routines_LEVELS.c", 345; break;
 4661                        		__bra		.LL68
         02:DF1E  4C EF DD   			bra	.LL68
 4662                        	
 4663                        		.dbg	line,	"include\routines_LEVELS.c", 347; case TYPE_POW:
 4664    02:DF21             	.LL72:
 4665                        		__case		2
 4666                        	
 4667                        		.dbg	line,	"include\routines_LEVELS.c", 348; //
 4668                        	
 4669                        		.dbg	line,	"include\routines_LEVELS.c", 349; break;
 4670                        		__bra		.LL68
         02:DF21  4C EF DD   			bra	.LL68
 4671                        	
 4672                        		.dbg	line,	"include\routines_LEVELS.c", 351; case TYPE_GRAY_KEY:
 4673    02:DF24             	.LL73:
 4674                        		__case		4
 4675                        	
 4676                        		.dbg	line,	"include\routines_LEVELS.c", 352; key_amount += 1;
 4677                        		__add_st.umiq	1, _key_amount
         02:DF24  EE 2E 23   			inc	_key_amount
 4678                        	
 4679                        		.dbg	line,	"include\routines_LEVELS.c", 353; display_KEY();
 4680                        		__call		_display_KEY
         02:DF27  20 8B FF   			call	_display_KEY
 4681                        	
 4682                        		.dbg	line,	"include\routines_LEVELS.c", 354; break;
 4683                        		__bra		.LL68
         02:DF2A  4C EF DD   			bra	.LL68
 4684                        	
 4685                        		.dbg	line,	"include\routines_LEVELS.c", 356; case TYPE_YASHICHI:
 4686    02:DF2D             	.LL74:
 4687                        		__case		14
 4688                        	
 4689                        		.dbg	line,	"include\routines_LEVELS.c", 357; life_amount += 1;
 4690                        		__add_st.umiq	1, _life_amount
         02:DF2D  EE 2C 23   			inc	_life_amount
 4691                        	
 4692                        		.dbg	line,	"include\routines_LEVELS.c", 358; break;
 4693                        		__bra		.LL68
         02:DF30  4C EF DD   			bra	.LL68
 4694                        	
 4695                        		.dbg	line,	"include\routines_LEVELS.c", 359; }
 4696    02:DF33             	.LL67:
 4697                        		__switch_c.ur	4
         02:DF33  A2 05      			ldx	#4 + 1
         02:DF35  CA         	!loop:		dex
         02:DF36  F0 05      			beq	!found+
         02:DF38  DD 42 DF   			cmp	!table+ - 1, x
         02:DF3B  D0 F8      			bne	!loop-
         02:DF3D  8A         	!found:		txa
         02:DF3E  0A         			asl	a
         02:DF3F  AA         			tax
         02:DF40  7C 47 DF   			jmp	[!table+ + 4, x]
 4698                        	
 4699    02:DF43  0E 04 02 00	!table:		db	14, 4, 2, 0
 4700    02:DF47  EF DD      			dw	.LL68
 4701    02:DF49  2D DF      			dw	.LL74, .LL73, .LL72, .LL69
         02:DF4B  24 DF       
         02:DF4D  21 DF       
         02:DF4F  E9 DE       
 4702                        	
 4703    02:DF51             	.LL68	.alias		.LL61
 4704                        	
 4705                        		.dbg	line,	"include\routines_LEVELS.c", 360; }
 4706                        	
 4707                        		.dbg	line,	"include\routines_LEVELS.c", 361; }
 4708    02:DF51             	.LL66	.alias		.LL61
 4709                        	
 4710                        		.dbg	line,	"include\routines_LEVELS.c", 362; }
 4711    02:DF51             	.LL65	.alias		.LL61
 4712                        	
 4713                        		.dbg	line,	"include\routines_LEVELS.c", 363; }
 4714    02:DF51             	.LL64	.alias		.LL61
 4715                        		__bra		.LL61
         02:DF51  4C EF DD   			bra	.LL61
 4716    02:DF54             	.LL63:
 4717                        	
 4718                        		.dbg	line,	"include\routines_LEVELS.c", 364; }
 4719                        	
 4720                        		.dbg	line,	"include\routines_LEVELS.c", 365; }
 4721    02:DF54             	.LL59:
 4722    02:DF54             	.LL58:
 4723                        		__return	0
         02:DF54  4C EF FF   			jmp	leave_proc
 4724                        		.dbg	clear
 4725                        		.endp
 4726               67E0     		.data
 4727               2300     		.bss
 4728    F8:2300             	__check_OBJECT_loc:
 4729    F8:2300             			ds	3
 4730    F8:2303             	__check_OBJECT_end:
 4731               E309     		.code
 4732                        		.pceas
 4733                        	
 4734                        		.dbg	line,	"include\routines_LEVELS.c", 367; // CHECK COLLISION WITH NPCS //
 4735                        		.dbg	line,	"include\routines_LEVELS.c", 368; void check_NPC()
 4736                        		.dbg	line,	"include\routines_LEVELS.c", 369; {
 4737                        	;***********************
 4738                        	;***********************
 4739                        	
 4740                        		.hucc
 4741    18:C5A4             		.proc		_check_NPC
 4742                        		__enter		_check_NPC
 4743                        	
 4744                        		.dbg	line,	"include\routines_LEVELS.c", 370; if(onscreen_npc_number != 0)
 4745                        		__tst.um	_onscreen_npc_number
         18:C5A4  AD B9 23   			lda	_onscreen_npc_number
         18:C5A7  C9 01      			cmp	#1
 4746                        		__bfalse	.LL76
         18:C5A9  B0 03 4C DF			bcc	.LL76
         18:C5AD  C6          
 4747                        	
 4748                        		.dbg	line,	"include\routines_LEVELS.c", 371; {
 4749                        	
 4750                        		.dbg	line,	"include\routines_LEVELS.c", 372; if(player_state == STATE_IDLE || player_state == STATE_WALK)
 4751                        		__not.um	_player_state
         18:C5AE  AD 18 23   			lda	_player_state
         18:C5B1  18         			clc
         18:C5B2  D0 01      			bne	!+
         18:C5B4  38         			sec
         18:C5B5             	!:
 4752                        		__btrue		.LL78
         18:C5B5  B0 08      			bcs	.LL78
 4753                        		__ld.umq	_player_state
         18:C5B7  AD 18 23   			lda	_player_state
 4754                        		__equ_b.uiq	1
         18:C5BA  C9 01      			cmp	#1
         18:C5BC  F0 01      			beq	!+
         18:C5BE  18         			clc
         18:C5BF             	!:
 4755    18:C5BF             	.LL78:
 4756                        		__bfalse	.LL77
         18:C5BF  B0 03 4C DF			bcc	.LL77
         18:C5C3  C6          
 4757                        	
 4758                        		.dbg	line,	"include\routines_LEVELS.c", 373; {
 4759                        	
 4760                        		.dbg	line,	"include\routines_LEVELS.c", 374; char i,j;
 4761                        	
 4762                        		.dbg	line,	"include\routines_LEVELS.c", 375; char current_npc_id;
 4763                        	
 4764                        		.dbg	line,	"include\routines_LEVELS.c", 376; char current_npc_type;
 4765                        	
 4766                        		.dbg	line,	"include\routines_LEVELS.c", 378; for(i=0 ; i<onscreen_npc_number ; i++)
 4767                        		__st.umiq	0, __check_NPC_end - 1  /* i */
         18:C5C4  9C 52 26   			stz	__check_NPC_end - 1
 4768    18:C5C7             	.LL79:
 4769                        		__ld.umq	__check_NPC_end - 1  /* i */
         18:C5C7  AD 52 26   			lda	__check_NPC_end - 1
 4770                        		__ult_b.umq	_onscreen_npc_number
         18:C5CA  CD B9 23   			cmp	_onscreen_npc_number		; Subtract memory from A.
         18:C5CD  6A         			ror	a		; CC if A < memory.
         18:C5CE  49 80      			eor	#$80
         18:C5D0  2A         			rol	a
 4771                        		__btrue		.LL81
         18:C5D1  B0 08      			bcs	.LL81
 4772                        		__bra		.LL82
         18:C5D3  4C DF C6   			bra	.LL82
 4773    18:C5D6             	.LL80:
 4774                        		__inc.umq	__check_NPC_end - 1  /* i */
         18:C5D6  EE 52 26   			inc	__check_NPC_end - 1
 4775                        		__bra		.LL79
         18:C5D9  80 EC      			bra	.LL79
 4776    18:C5DB             	.LL81:
 4777                        	
 4778                        		.dbg	line,	"include\routines_LEVELS.c", 379; {
 4779                        	
 4780                        		.dbg	line,	"include\routines_LEVELS.c", 380; // RETRIEVE NPC INDEX IN THE LIST //
 4781                        	
 4782                        		.dbg	line,	"include\routines_LEVELS.c", 381; current_npc_id = list_onscreen_npc[i];
 4783                        		__ldx.umq	__check_NPC_end - 1  /* i */
         18:C5DB  AE 52 26   			ldx	__check_NPC_end - 1
 4784                        		__ld.uax	_list_onscreen_npc
         18:C5DE  BD CC 23   			lda	_list_onscreen_npc, x
         18:C5E1  C2         			cly
 4785                        		__st.umq	__check_NPC_end - 3  /* current_npc_id */
         18:C5E2  8D 50 26   			sta	__check_NPC_end - 3
 4786                        	
 4787                        		.dbg	line,	"include\routines_LEVELS.c", 383; if(list_npc_state[current_npc_id] == STATE_ACTIVE)
 4788                        		__ldx.umq	__check_NPC_end - 3  /* current_npc_id */
         18:C5E5  AE 50 26   			ldx	__check_NPC_end - 3
 4789                        		__not.uax	_list_npc_state
         18:C5E8  BD C3 23   			lda	_list_npc_state, x
         18:C5EB  18         			clc
         18:C5EC  D0 01      			bne	!+
         18:C5EE  38         			sec
         18:C5EF             	!:
 4790                        		__bfalse	.LL83
         18:C5EF  90 E5      			bcc	.LL83
 4791                        	
 4792                        		.dbg	line,	"include\routines_LEVELS.c", 384; {
 4793                        	
 4794                        		.dbg	line,	"include\routines_LEVELS.c", 385; // RETRIEVE NPC TYPE //
 4795                        	
 4796                        		.dbg	line,	"include\routines_LEVELS.c", 386; current_npc_type = list_npc_type[current_npc_id];
 4797                        		__ldx.umq	__check_NPC_end - 3  /* current_npc_id */
         18:C5F1  AE 50 26   			ldx	__check_NPC_end - 3
 4798                        		__ld.uax	_list_npc_type
         18:C5F4  BD BA 23   			lda	_list_npc_type, x
         18:C5F7  C2         			cly
 4799                        		__st.umq	__check_NPC_end - 4  /* current_npc_type */
         18:C5F8  8D 4F 26   			sta	__check_NPC_end - 4
 4800                        	
 4801                        		.dbg	line,	"include\routines_LEVELS.c", 388; if(abs( (player_pos_x + 16) - (list_npc_x_pos[current_npc_id] + 16) ) < OBJECT_MARGIN)
 4802                        		__ld.wm		_player_pos_x
         18:C5FB  AD DA 24   			lda.l	_player_pos_x
         18:C5FE  AC DB 24   			ldy.h	_player_pos_x
 4803                        		__add.wi	16
         18:C601  18         			clc
         18:C602  69 10      			adc.l	#16
         18:C604  90 01      			bcc	!+
         18:C606  C8         			iny
         18:C607             	!:
 4804                        		__push.wr
         18:C607  5A         			phy
         18:C608  48         			pha
 4805                        		__ld2x.umq	__check_NPC_end - 3  /* current_npc_id */
         18:C609  AD 50 26   			lda	__check_NPC_end - 3
         18:C60C  0A         			asl	a
         18:C60D  AA         			tax
 4806                        		__ld.wax	_list_npc_x_pos
         18:C60E  BD EC 25   			lda.l	_list_npc_x_pos, x
         18:C611  BC ED 25   			ldy.h	_list_npc_x_pos, x
 4807                        		__add.wi	16
         18:C614  18         			clc
         18:C615  69 10      			adc.l	#16
         18:C617  90 01      			bcc	!+
         18:C619  C8         			iny
         18:C61A             	!:
 4808                        		__sub.wt
         18:C61A  BA         			tsx
         18:C61B  38         			sec
         18:C61C  49 FF      			eor	#$FF
         18:C61E  7D 01 21   			adc.l	__tos, x
         18:C621  42         			say
         18:C622  49 FF      			eor	#$FF
         18:C624  7D 02 21   			adc.h	__tos, x
         18:C627  42         			say
         18:C628  E8         			inx
         18:C629  E8         			inx
         18:C62A  9A         			txs
 4809                        		__call		_abs.1
         18:C62B  20 09 E5   			call	_abs.1
 4810                        		__slt_w.wi	10
         18:C62E  C9 0A      			cmp.l	#10		; Subtract integer from Y:A.
         18:C630  98         			tya
         18:C631  E9 00      			sbc.h	#10
         18:C633  50 02      			bvc	!+
         18:C635  49 80      			eor	#$80		; -ve if Y:A < integer (signed).
         18:C637  0A         	!:		asl	a
 4811                        		__bfalse	.LL84
         18:C638  90 9C      			bcc	.LL84
 4812                        	
 4813                        		.dbg	line,	"include\routines_LEVELS.c", 389; {
 4814                        	
 4815                        		.dbg	line,	"include\routines_LEVELS.c", 390; if(abs( (player_pos_y + 16) - (list_npc_y_pos[current_npc_id] + 16) ) < OBJECT_MARGIN)
 4816                        		__ld.wm		_player_pos_y
         18:C63A  AD DC 24   			lda.l	_player_pos_y
         18:C63D  AC DD 24   			ldy.h	_player_pos_y
 4817                        		__add.wi	16
         18:C640  18         			clc
         18:C641  69 10      			adc.l	#16
         18:C643  90 01      			bcc	!+
         18:C645  C8         			iny
         18:C646             	!:
 4818                        		__push.wr
         18:C646  5A         			phy
         18:C647  48         			pha
 4819                        		__ld2x.umq	__check_NPC_end - 3  /* current_npc_id */
         18:C648  AD 50 26   			lda	__check_NPC_end - 3
         18:C64B  0A         			asl	a
         18:C64C  AA         			tax
 4820                        		__ld.wax	_list_npc_y_pos
         18:C64D  BD FE 25   			lda.l	_list_npc_y_pos, x
         18:C650  BC FF 25   			ldy.h	_list_npc_y_pos, x
 4821                        		__add.wi	16
         18:C653  18         			clc
         18:C654  69 10      			adc.l	#16
         18:C656  90 01      			bcc	!+
         18:C658  C8         			iny
         18:C659             	!:
 4822                        		__sub.wt
         18:C659  BA         			tsx
         18:C65A  38         			sec
         18:C65B  49 FF      			eor	#$FF
         18:C65D  7D 01 21   			adc.l	__tos, x
         18:C660  42         			say
         18:C661  49 FF      			eor	#$FF
         18:C663  7D 02 21   			adc.h	__tos, x
         18:C666  42         			say
         18:C667  E8         			inx
         18:C668  E8         			inx
         18:C669  9A         			txs
 4823                        		__call		_abs.1
         18:C66A  20 09 E5   			call	_abs.1
 4824                        		__slt_w.wi	10
         18:C66D  C9 0A      			cmp.l	#10		; Subtract integer from Y:A.
         18:C66F  98         			tya
         18:C670  E9 00      			sbc.h	#10
         18:C672  50 02      			bvc	!+
         18:C674  49 80      			eor	#$80		; -ve if Y:A < integer (signed).
         18:C676  0A         	!:		asl	a
 4825                        		__bfalse	.LL85
         18:C677  B0 03 4C D6			bcc	.LL85
         18:C67B  C5          
 4826                        	
 4827                        		.dbg	line,	"include\routines_LEVELS.c", 391; {               
 4828                        	
 4829                        		.dbg	line,	"include\routines_LEVELS.c", 392; switch(current_npc_type)
 4830                        		__ld.umq	__check_NPC_end - 4  /* current_npc_type */
         18:C67C  AD 4F 26   			lda	__check_NPC_end - 4
 4831                        		__bra		.LL86
         18:C67F  80 4A      			bra	.LL86
 4832                        	
 4833                        		.dbg	line,	"include\routines_LEVELS.c", 393; {
 4834                        	
 4835                        		.dbg	line,	"include\routines_LEVELS.c", 394; case TYPE_NPC_REWARD:
 4836    18:C681             	.LL88:
 4837                        		__case		0
 4838                        	
 4839                        		.dbg	line,	"include\routines_LEVELS.c", 395; //
 4840                        	
 4841                        		.dbg	line,	"include\routines_LEVELS.c", 396; break;
 4842                        		__bra		.LL87
         18:C681  4C D6 C5   			bra	.LL87
 4843                        	
 4844                        		.dbg	line,	"include\routines_LEVELS.c", 398; case TYPE_NPC_SHOP:
 4845    18:C684             	.LL89:
 4846                        		__case		1
 4847                        	
 4848                        		.dbg	line,	"include\routines_LEVELS.c", 399; disp_off();
 4849                        		__call		_disp_off
         18:C684  20 29 E4   			call	_disp_off
 4850                        	
 4851                        		.dbg	line,	"include\routines_LEVELS.c", 401; minutes_backup = minutes;
 4852                        		__ld.um		_minutes
         18:C687  AD 30 23   			lda	_minutes
         18:C68A  C2         			cly
 4853                        		__st.umq	_minutes_backup
         18:C68B  8D 33 23   			sta	_minutes_backup
 4854                        	
 4855                        		.dbg	line,	"include\routines_LEVELS.c", 402; seconds_backup = seconds;
 4856                        		__ld.um		_seconds
         18:C68E  AD 31 23   			lda	_seconds
         18:C691  C2         			cly
 4857                        		__st.umq	_seconds_backup
         18:C692  8D 34 23   			sta	_seconds_backup
 4858                        	
 4859                        		.dbg	line,	"include\routines_LEVELS.c", 403; list_npc_state[current_npc_id] = STATE_INACTIVE;
 4860                        		__ldx.umq	__check_NPC_end - 3  /* current_npc_id */
         18:C695  AE 50 26   			ldx	__check_NPC_end - 3
 4861                        		__st.uaxiq	1, _list_npc_state
         18:C698  A9 01      			lda.l	#1
         18:C69A  9D C3 23   			sta	_list_npc_state, x
 4862                        	
 4863                        		.dbg	line,	"include\routines_LEVELS.c", 404; camera_pos_x_backup = sgx_map_pxl_x;
 4864                        		__ld.wm		_sgx_map_pxl_x
         18:C69D  AD 97 26   			lda.l	_sgx_map_pxl_x
         18:C6A0  AC 98 26   			ldy.h	_sgx_map_pxl_x
 4865                        		__st.wmq	_camera_pos_x_backup
         18:C6A3  8D E0 24   			sta.l	_camera_pos_x_backup
         18:C6A6  8C E1 24   			sty.h	_camera_pos_x_backup
 4866                        	
 4867                        		.dbg	line,	"include\routines_LEVELS.c", 405; camera_pos_y_backup = list_npc_y_pos_ref[current_npc_id] - 128;                                    
 4868                        		__ld2x.umq	__check_NPC_end - 3  /* current_npc_id */
         18:C6A9  AD 50 26   			lda	__check_NPC_end - 3
         18:C6AC  0A         			asl	a
         18:C6AD  AA         			tax
 4869                        		__ld.wax	_list_npc_y_pos_ref
         18:C6AE  BD 22 26   			lda.l	_list_npc_y_pos_ref, x
         18:C6B1  BC 23 26   			ldy.h	_list_npc_y_pos_ref, x
 4870                        		__sub.wi	128
         18:C6B4  38         			sec
         18:C6B5  E9 80      			sbc.l	#128
         18:C6B7  B0 01      			bcs	!+
         18:C6B9  88         			dey
         18:C6BA             	!:
 4871                        		__st.wmq	_camera_pos_y_backup
         18:C6BA  8D E2 24   			sta.l	_camera_pos_y_backup
         18:C6BD  8C E3 24   			sty.h	_camera_pos_y_backup
 4872                        	
 4873                        		.dbg	line,	"include\routines_LEVELS.c", 406; sequence_loaded = FALSE;
 4874                        		__st.umiq	0, _sequence_loaded
         18:C6C0  9C 14 23   			stz	_sequence_loaded
 4875                        	
 4876                        		.dbg	line,	"include\routines_LEVELS.c", 407; sequence_id = SEQUENCE_SHOP;
 4877                        		__st.umiq	4, _sequence_id
         18:C6C3  A9 04      			lda.l	#4
         18:C6C5  8D 13 23   			sta	_sequence_id
 4878                        	
 4879                        		.dbg	line,	"include\routines_LEVELS.c", 408; break;
 4880                        		__bra		.LL87
         18:C6C8  4C D6 C5   			bra	.LL87
 4881                        	
 4882                        		.dbg	line,	"include\routines_LEVELS.c", 409; }
 4883    18:C6CB             	.LL86:
 4884                        		__switch_r.ur	0, 1
         18:C6CB  C9 02      			cmp	#(1 - 0) + 1
         18:C6CD  90 02      			bcc	!found+
         18:C6CF  A9 02      	!default:	lda	#(1 - 0) + 1
         18:C6D1  0A         	!found:		asl	a
         18:C6D2  AA         			tax
         18:C6D3  7C D6 C6   			jmp	[!table+, x]
 4885                        	
 4886    18:C6D6  81 C6      	!table:		dw	.LL88, .LL89
         18:C6D8  84 C6       
 4887    18:C6DA  D6 C5      			dw	.LL87
 4888    18:C6DC             	.LL87	.alias		.LL80
 4889                        	
 4890                        		.dbg	line,	"include\routines_LEVELS.c", 410; }
 4891                        	
 4892                        		.dbg	line,	"include\routines_LEVELS.c", 411; }
 4893    18:C6DC             	.LL85	.alias		.LL80
 4894                        	
 4895                        		.dbg	line,	"include\routines_LEVELS.c", 412; }
 4896    18:C6DC             	.LL84	.alias		.LL80
 4897                        	
 4898                        		.dbg	line,	"include\routines_LEVELS.c", 413; }
 4899    18:C6DC             	.LL83	.alias		.LL80
 4900                        		__bra		.LL80
         18:C6DC  4C D6 C5   			bra	.LL80
 4901    18:C6DF             	.LL82:
 4902                        	
 4903                        		.dbg	line,	"include\routines_LEVELS.c", 414; }
 4904                        	
 4905                        		.dbg	line,	"include\routines_LEVELS.c", 415; }
 4906    18:C6DF             	.LL77:
 4907                        	
 4908                        		.dbg	line,	"include\routines_LEVELS.c", 416; }
 4909    18:C6DF             	.LL76:
 4910    18:C6DF             	.LL75:
 4911                        		__return	0
         18:C6DF  4C EF FF   			jmp	leave_proc
 4912                        		.dbg	clear
 4913                        		.endp
 4914                        		.pceas
 4915                        	
 4916                        		.dbg	line,	"include\routines_LEVELS.c", 422; void scroll_BG()
 4917                        		.dbg	line,	"include\routines_LEVELS.c", 423; {
 4918                        	;***********************
 4919                        	;***********************
 4920                        	
 4921                        		.hucc
 4922    18:D2CC             		.proc		_scroll_BG
 4923                        		__enter		_scroll_BG
 4924                        	
 4925                        		.dbg	line,	"include\routines_LEVELS.c", 424; // UPDATE VDC2 BG //
 4926                        	
 4927                        		.dbg	line,	"include\routines_LEVELS.c", 425; sgx_scroll_map();
 4928                        		__call		_sgx_scroll_map
         18:D2CC  20 81 FF   			call	_sgx_scroll_map
 4929                        	
 4930                        		.dbg	line,	"include\routines_LEVELS.c", 427; //--------------------------------------------------------------------------------------//
 4931                        	
 4932                        		.dbg	line,	"include\routines_LEVELS.c", 428; //                                        VDC 2                                         //
 4933                        	
 4934                        		.dbg	line,	"include\routines_LEVELS.c", 429; //--------------------------------------------------------------------------------------//
 4935                        	
 4936                        		.dbg	line,	"include\routines_LEVELS.c", 431; sgx_scroll_split(0,   0, sgx_map_pxl_x & (BAT_SIZE_W - 1), sgx_map_pxl_y & (BAT_SIZE_H - 1), BKG_ON | SPR_ON);
 4937                        		__st.umiq	0, _al
         18:D2CF  64 F8      			stz	_al
 4938                        		__st.umiq	0, _ah
         18:D2D1  64 F9      			stz	_ah
 4939                        		__ld.wm		_sgx_map_pxl_x
         18:D2D3  AD 97 26   			lda.l	_sgx_map_pxl_x
         18:D2D6  AC 98 26   			ldy.h	_sgx_map_pxl_x
 4940                        		__and.wi	2047
         18:D2D9  29 FF      			and.l	#2047
         18:D2DB  42         			say
         18:D2DC  29 07      			and.h	#2047
         18:D2DE  42         			say
 4941                        		__st.wmq	_bx
         18:D2DF  85 FA      			sta.l	_bx
         18:D2E1  84 FB      			sty.h	_bx
 4942                        		__ld.wm		_sgx_map_pxl_y
         18:D2E3  AD 99 26   			lda.l	_sgx_map_pxl_y
         18:D2E6  AC 9A 26   			ldy.h	_sgx_map_pxl_y
 4943                        		__and.wi	255
         18:D2E9  29 FF      			and	#255
         18:D2EB  C2         			cly
 4944                        		__st.wmq	_cx
         18:D2EC  85 FC      			sta.l	_cx
         18:D2EE  84 FD      			sty.h	_cx
 4945                        		__st.umiq	192, _dl
         18:D2F0  A9 C0      			lda.l	#192
         18:D2F2  85 FE      			sta	_dl
 4946                        		__call		_sgx_scroll_split.5
         18:D2F4  20 77 FF   			call	_sgx_scroll_split.5
 4947                        	
 4948                        		.dbg	line,	"include\routines_LEVELS.c", 432; }
 4949    18:D2F7             	.LL90:
 4950                        		__return	0
         18:D2F7  4C EF FF   			jmp	leave_proc
 4951                        		.dbg	clear
 4952                        		.endp
 4953                        		.pceas
 4954                        	
 4955                        		.dbg	line,	"include\routines_LEVELS.c", 435; void recenter_CAMERA()
 4956                        		.dbg	line,	"include\routines_LEVELS.c", 436; {
 4957                        	;***********************
 4958                        	;***********************
 4959                        	
 4960                        		.hucc
 4961    18:C928             		.proc		_recenter_CAMERA
 4962                        		__enter		_recenter_CAMERA
 4963                        	
 4964                        		.dbg	line,	"include\routines_LEVELS.c", 437; signed char camera_y_move;
 4965                        	
 4966                        		.dbg	line,	"include\routines_LEVELS.c", 439; spr_set(player_id);
 4967                        		__ld.umq	_player_id
         18:C928  AD 17 23   			lda	_player_id
 4968                        		__call		_spr_set.1
         18:C92B  20 DD E7   			call	_spr_set.1
 4969                        	
 4970                        		.dbg	line,	"include\routines_LEVELS.c", 442; if(player_pos_y < 128)
 4971                        		__ld.wm		_player_pos_y
         18:C92E  AD DC 24   			lda.l	_player_pos_y
         18:C931  AC DD 24   			ldy.h	_player_pos_y
 4972                        		__slt_w.wi	128
         18:C934  C9 80      			cmp.l	#128		; Subtract integer from Y:A.
         18:C936  98         			tya
         18:C937  E9 00      			sbc.h	#128
         18:C939  50 02      			bvc	!+
         18:C93B  49 80      			eor	#$80		; -ve if Y:A < integer (signed).
         18:C93D  0A         	!:		asl	a
 4973                        		__bfalse	.LL92
         18:C93E  90 70      			bcc	.LL92
 4974                        	
 4975                        		.dbg	line,	"include\routines_LEVELS.c", 443; {
 4976                        	
 4977                        		.dbg	line,	"include\routines_LEVELS.c", 444; player_pos_y += CAMERA_RECENTER_VELOCITY;
 4978                        		__add_st.wmiq	4, _player_pos_y
         18:C940  18         			clc
         18:C941  AD DC 24   			lda.l	_player_pos_y
         18:C944  69 04      			adc.l	#4
         18:C946  8D DC 24   			sta.l	_player_pos_y
         18:C949  90 03      			bcc	!+
         18:C94B  EE DD 24   			inc.h	_player_pos_y
         18:C94E             	!:
 4979                        	
 4980                        		.dbg	line,	"include\routines_LEVELS.c", 446; if(player_pos_y > 128)
 4981                        		__ld.wm		_player_pos_y
         18:C94E  AD DC 24   			lda.l	_player_pos_y
         18:C951  AC DD 24   			ldy.h	_player_pos_y
 4982                        		__sgt_w.wi	128
         18:C954  18         			clc			; Subtract integer+1 from Y:A.
         18:C955  E9 80      			sbc.l	#128
         18:C957  98         			tya
         18:C958  E9 00      			sbc.h	#128
         18:C95A  50 02      			bvc	!+
         18:C95C  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         18:C95E  49 80      	!:		eor	#$80
         18:C960  0A         			asl	a
 4983                        		__bfalse	.LL93
         18:C961  90 24      			bcc	.LL93
 4984                        	
 4985                        		.dbg	line,	"include\routines_LEVELS.c", 447; {
 4986                        	
 4987                        		.dbg	line,	"include\routines_LEVELS.c", 448; camera_y_move = CAMERA_RECENTER_VELOCITY - (player_pos_y - 128);
 4988                        		__ld.wm		_player_pos_y
         18:C963  AD DC 24   			lda.l	_player_pos_y
         18:C966  AC DD 24   			ldy.h	_player_pos_y
 4989                        		__sub.wi	128
         18:C969  38         			sec
         18:C96A  E9 80      			sbc.l	#128
         18:C96C  B0 01      			bcs	!+
         18:C96E  88         			dey
         18:C96F             	!:
 4990                        		__isub.wi	4
         18:C96F  38         			sec
         18:C970  49 FF      			eor	#$FF
         18:C972  69 04      			adc.l	#4
         18:C974  42         			say
         18:C975  49 FF      			eor	#$FF
         18:C977  69 00      			adc.h	#4
         18:C979  42         			say
 4991                        		__st.umq	__recenter_CAMERA_end - 1  /* camera_y_move */
         18:C97A  8D 52 26   			sta	__recenter_CAMERA_end - 1
 4992                        	
 4993                        		.dbg	line,	"include\routines_LEVELS.c", 450; player_pos_y = 128;
 4994                        		__st.wmiq	128, _player_pos_y
         18:C97D  A9 80      			lda.l	#128
         18:C97F  8D DC 24   			sta.l	_player_pos_y
         18:C982  9C DD 24   			stz.h	_player_pos_y
 4995                        	
 4996                        		.dbg	line,	"include\routines_LEVELS.c", 451; }
 4997                        	
 4998                        		.dbg	line,	"include\routines_LEVELS.c", 453; else
 4999                        		__bra		.LL94
         18:C985  80 05      			bra	.LL94
 5000    18:C987             	.LL93:
 5001                        	
 5002                        		.dbg	line,	"include\routines_LEVELS.c", 454; {
 5003                        	
 5004                        		.dbg	line,	"include\routines_LEVELS.c", 455; camera_y_move = CAMERA_RECENTER_VELOCITY;
 5005                        		__st.umiq	4, __recenter_CAMERA_end - 1  /* camera_y_move */
         18:C987  A9 04      			lda.l	#4
         18:C989  8D 52 26   			sta	__recenter_CAMERA_end - 1
 5006                        	
 5007                        		.dbg	line,	"include\routines_LEVELS.c", 456; }
 5008    18:C98C             	.LL94:
 5009                        	
 5010                        		.dbg	line,	"include\routines_LEVELS.c", 458; spr_y(player_pos_y);
 5011                        		__ld.wm		_player_pos_y
         18:C98C  AD DC 24   			lda.l	_player_pos_y
         18:C98F  AC DD 24   			ldy.h	_player_pos_y
 5012                        		__call		_spr_y.1
         18:C992  20 19 E8   			call	_spr_y.1
 5013                        	
 5014                        		.dbg	line,	"include\routines_LEVELS.c", 460; sgx_map_pxl_y -= camera_y_move;
 5015                        		__ld.bm		__recenter_CAMERA_end - 1  /* camera_y_move */
         18:C995  AD 52 26   			lda	__recenter_CAMERA_end - 1
         18:C998  C2         			cly
         18:C999  10 01      			bpl	!+
         18:C99B  88         			dey
         18:C99C             	!:
 5016                        		__isub_st.wmq	_sgx_map_pxl_y
         18:C99C  38         			sec
         18:C99D  49 FF      			eor	#$FF
         18:C99F  6D 99 26   			adc.l	_sgx_map_pxl_y
         18:C9A2  8D 99 26   			sta.l	_sgx_map_pxl_y
         18:C9A5  98         			tya
         18:C9A6  49 FF      			eor	#$FF
         18:C9A8  6D 9A 26   			adc.h	_sgx_map_pxl_y
         18:C9AB  8D 9A 26   			sta.h	_sgx_map_pxl_y
 5017                        	
 5018                        		.dbg	line,	"include\routines_LEVELS.c", 461; }
 5019                        	
 5020                        		.dbg	line,	"include\routines_LEVELS.c", 464; else if(player_pos_y > 128)
 5021                        		__bra		.LL95
         18:C9AE  80 7C      			bra	.LL95
 5022    18:C9B0             	.LL92:
 5023                        		__ld.wm		_player_pos_y
         18:C9B0  AD DC 24   			lda.l	_player_pos_y
         18:C9B3  AC DD 24   			ldy.h	_player_pos_y
 5024                        		__sgt_w.wi	128
         18:C9B6  18         			clc			; Subtract integer+1 from Y:A.
         18:C9B7  E9 80      			sbc.l	#128
         18:C9B9  98         			tya
         18:C9BA  E9 00      			sbc.h	#128
         18:C9BC  50 02      			bvc	!+
         18:C9BE  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         18:C9C0  49 80      	!:		eor	#$80
         18:C9C2  0A         			asl	a
 5025                        		__bfalse	.LL96
         18:C9C3  90 67      			bcc	.LL96
 5026                        	
 5027                        		.dbg	line,	"include\routines_LEVELS.c", 465; {
 5028                        	
 5029                        		.dbg	line,	"include\routines_LEVELS.c", 466; player_pos_y -= CAMERA_RECENTER_VELOCITY;
 5030                        		__sub_st.wmiq	4, _player_pos_y
         18:C9C5  38         			sec
         18:C9C6  AD DC 24   			lda.l	_player_pos_y
         18:C9C9  E9 04      			sbc.l	#4
         18:C9CB  8D DC 24   			sta.l	_player_pos_y
         18:C9CE  B0 03      			bcs	!+
         18:C9D0  CE DD 24   			dec.h	_player_pos_y
         18:C9D3             	!:
 5031                        	
 5032                        		.dbg	line,	"include\routines_LEVELS.c", 468; if(player_pos_y < 128)
 5033                        		__ld.wm		_player_pos_y
         18:C9D3  AD DC 24   			lda.l	_player_pos_y
         18:C9D6  AC DD 24   			ldy.h	_player_pos_y
 5034                        		__slt_w.wi	128
         18:C9D9  C9 80      			cmp.l	#128		; Subtract integer from Y:A.
         18:C9DB  98         			tya
         18:C9DC  E9 00      			sbc.h	#128
         18:C9DE  50 02      			bvc	!+
         18:C9E0  49 80      			eor	#$80		; -ve if Y:A < integer (signed).
         18:C9E2  0A         	!:		asl	a
 5035                        		__bfalse	.LL97
         18:C9E3  90 24      			bcc	.LL97
 5036                        	
 5037                        		.dbg	line,	"include\routines_LEVELS.c", 469; {
 5038                        	
 5039                        		.dbg	line,	"include\routines_LEVELS.c", 470; camera_y_move = CAMERA_RECENTER_VELOCITY - (128 - player_pos_y);
 5040                        		__ld.wi		128
         18:C9E5  A9 80      			lda.l	#128
         18:C9E7  C2         			cly
 5041                        		__sub.wm	_player_pos_y
         18:C9E8  38         			sec
         18:C9E9  ED DC 24   			sbc.l	_player_pos_y
         18:C9EC  42         			say
         18:C9ED  ED DD 24   			sbc.h	_player_pos_y
         18:C9F0  42         			say
 5042                        		__isub.wi	4
         18:C9F1  38         			sec
         18:C9F2  49 FF      			eor	#$FF
         18:C9F4  69 04      			adc.l	#4
         18:C9F6  42         			say
         18:C9F7  49 FF      			eor	#$FF
         18:C9F9  69 00      			adc.h	#4
         18:C9FB  42         			say
 5043                        		__st.umq	__recenter_CAMERA_end - 1  /* camera_y_move */
         18:C9FC  8D 52 26   			sta	__recenter_CAMERA_end - 1
 5044                        	
 5045                        		.dbg	line,	"include\routines_LEVELS.c", 472; player_pos_y = 128;
 5046                        		__st.wmiq	128, _player_pos_y
         18:C9FF  A9 80      			lda.l	#128
         18:CA01  8D DC 24   			sta.l	_player_pos_y
         18:CA04  9C DD 24   			stz.h	_player_pos_y
 5047                        	
 5048                        		.dbg	line,	"include\routines_LEVELS.c", 473; }
 5049                        	
 5050                        		.dbg	line,	"include\routines_LEVELS.c", 475; else
 5051                        		__bra		.LL98
         18:CA07  80 05      			bra	.LL98
 5052    18:CA09             	.LL97:
 5053                        	
 5054                        		.dbg	line,	"include\routines_LEVELS.c", 476; {
 5055                        	
 5056                        		.dbg	line,	"include\routines_LEVELS.c", 477; camera_y_move = CAMERA_RECENTER_VELOCITY;
 5057                        		__st.umiq	4, __recenter_CAMERA_end - 1  /* camera_y_move */
         18:CA09  A9 04      			lda.l	#4
         18:CA0B  8D 52 26   			sta	__recenter_CAMERA_end - 1
 5058                        	
 5059                        		.dbg	line,	"include\routines_LEVELS.c", 478; }
 5060    18:CA0E             	.LL98:
 5061                        	
 5062                        		.dbg	line,	"include\routines_LEVELS.c", 480; spr_y(player_pos_y);
 5063                        		__ld.wm		_player_pos_y
         18:CA0E  AD DC 24   			lda.l	_player_pos_y
         18:CA11  AC DD 24   			ldy.h	_player_pos_y
 5064                        		__call		_spr_y.1
         18:CA14  20 19 E8   			call	_spr_y.1
 5065                        	
 5066                        		.dbg	line,	"include\routines_LEVELS.c", 482; sgx_map_pxl_y += camera_y_move;
 5067                        		__ld.bm		__recenter_CAMERA_end - 1  /* camera_y_move */
         18:CA17  AD 52 26   			lda	__recenter_CAMERA_end - 1
         18:CA1A  C2         			cly
         18:CA1B  10 01      			bpl	!+
         18:CA1D  88         			dey
         18:CA1E             	!:
 5068                        		__add_st.wmq	_sgx_map_pxl_y
         18:CA1E  18         			clc
         18:CA1F  6D 99 26   			adc.l	_sgx_map_pxl_y
         18:CA22  8D 99 26   			sta.l	_sgx_map_pxl_y
         18:CA25  98         			tya
         18:CA26  6D 9A 26   			adc.h	_sgx_map_pxl_y
         18:CA29  8D 9A 26   			sta.h	_sgx_map_pxl_y
 5069                        	
 5070                        		.dbg	line,	"include\routines_LEVELS.c", 483; }
 5071                        	
 5072                        		.dbg	line,	"include\routines_LEVELS.c", 484; }
 5073    18:CA2C             	.LL96:
 5074    18:CA2C             	.LL95:
 5075    18:CA2C             	.LL91:
 5076                        		__return	0
         18:CA2C  4C EF FF   			jmp	leave_proc
 5077                        		.dbg	clear
 5078                        		.endp
 5079                        		.pceas
 5080                        	
 5081                        		.dbg	line,	"include\routines_LEVELS.c", 493; void joypad_BUTTONS()
 5082                        		.dbg	line,	"include\routines_LEVELS.c", 494; {
 5083                        	;***********************
 5084                        	;***********************
 5085                        	
 5086                        		.hucc
 5087    02:D9C3             		.proc		_joypad_BUTTONS
 5088                        		__enter		_joypad_BUTTONS
 5089                        	
 5090                        		.dbg	line,	"include\routines_LEVELS.c", 495; // JUMP //
 5091                        	
 5092                        		.dbg	line,	"include\routines_LEVELS.c", 496; if(joytrg(JOYPAD_1) == JOY_I)
 5093                        		__ld.uiq	0
         02:D9C3  62         			cla
 5094                        		 _joytrg.1
         02:D9C4  AA         			tax
         02:D9C5  BD 2D 22   			lda	joytrg, x
         02:D9C8  BC DD 22   			ldy	joy6trg, x
 5095                        		__equ_w.wi	1
         02:D9CB  C9 01      			cmp.l	#1
         02:D9CD  D0 04      			bne	!false+
         02:D9CF  C0 00      			cpy.h	#1
         02:D9D1  F0 01      			beq	!+
         02:D9D3  18         	!false:		clc
         02:D9D4             	!:
 5096                        		__bfalse	.LL100
         02:D9D4  B0 03 4C 86			bcc	.LL100
         02:D9D8  DB          
 5097                        	
 5098                        		.dbg	line,	"include\routines_LEVELS.c", 497; {
 5099                        	
 5100                        		.dbg	line,	"include\routines_LEVELS.c", 498; if(player_state == STATE_IDLE)
 5101                        		__not.um	_player_state
         02:D9D9  AD 18 23   			lda	_player_state
         02:D9DC  18         			clc
         02:D9DD  D0 01      			bne	!+
         02:D9DF  38         			sec
         02:D9E0             	!:
 5102                        		__bfalse	.LL101
         02:D9E0  90 3E      			bcc	.LL101
 5103                        	
 5104                        		.dbg	line,	"include\routines_LEVELS.c", 499; {
 5105                        	
 5106                        		.dbg	line,	"include\routines_LEVELS.c", 500; hit_wall = FALSE;
 5107                        		__st.umiq	0, _hit_wall
         02:D9E2  9C 24 23   			stz	_hit_wall
 5108                        	
 5109                        		.dbg	line,	"include\routines_LEVELS.c", 501; 
 5110                        	
 5111                        		.dbg	line,	"include\routines_LEVELS.c", 502; player_counter_anim = 0;
 5112                        		__st.umiq	0, _player_counter_anim
         02:D9E5  9C 1B 23   			stz	_player_counter_anim
 5113                        	
 5114                        		.dbg	line,	"include\routines_LEVELS.c", 504; player_state = STATE_JUMP;
 5115                        		__st.umiq	4, _player_state
         02:D9E8  A9 04      			lda.l	#4
         02:D9EA  8D 18 23   			sta	_player_state
 5116                        	
 5117                        		.dbg	line,	"include\routines_LEVELS.c", 506; spr_set(weapon_id);
 5118                        		__ld.umq	_weapon_id
         02:D9ED  AD 26 23   			lda	_weapon_id
 5119                        		__call		_spr_set.1
         02:D9F0  20 DD E7   			call	_spr_set.1
 5120                        	
 5121                        		.dbg	line,	"include\routines_LEVELS.c", 507; 
 5122                        	
 5123                        		.dbg	line,	"include\routines_LEVELS.c", 508; if(player_axis == AXIS_RIGHT)
 5124                        		__not.um	_player_axis
         02:D9F3  AD 19 23   			lda	_player_axis
         02:D9F6  18         			clc
         02:D9F7  D0 01      			bne	!+
         02:D9F9  38         			sec
         02:D9FA             	!:
 5125                        		__bfalse	.LL102
         02:D9FA  90 12      			bcc	.LL102
 5126                        	
 5127                        		.dbg	line,	"include\routines_LEVELS.c", 509; {
 5128                        	
 5129                        		.dbg	line,	"include\routines_LEVELS.c", 510; spr_x(player_pos_x-5);
 5130                        		__ld.wm		_player_pos_x
         02:D9FC  AD DA 24   			lda.l	_player_pos_x
         02:D9FF  AC DB 24   			ldy.h	_player_pos_x
 5131                        		__sub.wi	5
         02:DA02  38         			sec
         02:DA03  E9 05      			sbc.l	#5
         02:DA05  B0 01      			bcs	!+
         02:DA07  88         			dey
         02:DA08             	!:
 5132                        		__call		_spr_x.1
         02:DA08  20 0A E8   			call	_spr_x.1
 5133                        	
 5134                        		.dbg	line,	"include\routines_LEVELS.c", 511; }
 5135                        	
 5136                        		.dbg	line,	"include\routines_LEVELS.c", 513; else
 5137                        		__bra		.LL103
         02:DA0B  4C 39 DC   			bra	.LL103
 5138    02:DA0E             	.LL102:
 5139                        	
 5140                        		.dbg	line,	"include\routines_LEVELS.c", 514; {
 5141                        	
 5142                        		.dbg	line,	"include\routines_LEVELS.c", 515; spr_x(player_pos_x+21);
 5143                        		__ld.wm		_player_pos_x
         02:DA0E  AD DA 24   			lda.l	_player_pos_x
         02:DA11  AC DB 24   			ldy.h	_player_pos_x
 5144                        		__add.wi	21
         02:DA14  18         			clc
         02:DA15  69 15      			adc.l	#21
         02:DA17  90 01      			bcc	!+
         02:DA19  C8         			iny
         02:DA1A             	!:
 5145                        		__call		_spr_x.1
         02:DA1A  20 0A E8   			call	_spr_x.1
 5146                        	
 5147                        		.dbg	line,	"include\routines_LEVELS.c", 516; }
 5148    02:DA1D             	.LL103	.alias		.LL104
 5149                        	
 5150                        		.dbg	line,	"include\routines_LEVELS.c", 517; }
 5151                        	
 5152                        		.dbg	line,	"include\routines_LEVELS.c", 520; else if(player_state == STATE_WALK)
 5153                        		__bra		.LL104
         02:DA1D  4C 39 DC   			bra	.LL104
 5154    02:DA20             	.LL101:
 5155                        		__ld.umq	_player_state
         02:DA20  AD 18 23   			lda	_player_state
 5156                        		__equ_b.uiq	1
         02:DA23  C9 01      			cmp	#1
         02:DA25  F0 01      			beq	!+
         02:DA27  18         			clc
         02:DA28             	!:
 5157                        		__bfalse	.LL105
         02:DA28  90 46      			bcc	.LL105
 5158                        	
 5159                        		.dbg	line,	"include\routines_LEVELS.c", 521; {
 5160                        	
 5161                        		.dbg	line,	"include\routines_LEVELS.c", 522; hit_wall = FALSE;
 5162                        		__st.umiq	0, _hit_wall
         02:DA2A  9C 24 23   			stz	_hit_wall
 5163                        	
 5164                        		.dbg	line,	"include\routines_LEVELS.c", 523; 
 5165                        	
 5166                        		.dbg	line,	"include\routines_LEVELS.c", 524; player_counter_anim = 0;
 5167                        		__st.umiq	0, _player_counter_anim
         02:DA2D  9C 1B 23   			stz	_player_counter_anim
 5168                        	
 5169                        		.dbg	line,	"include\routines_LEVELS.c", 526; player_state = STATE_JUMP_RIGHT + player_axis;
 5170                        		__ld.wi		5
         02:DA30  A9 05      			lda.l	#5
         02:DA32  C2         			cly
 5171                        		__add.um	_player_axis
         02:DA33  18         			clc
         02:DA34  6D 19 23   			adc	_player_axis
         02:DA37  90 01      			bcc	!+
         02:DA39  C8         			iny
         02:DA3A             	!:
 5172                        		__st.umq	_player_state
         02:DA3A  8D 18 23   			sta	_player_state
 5173                        	
 5174                        		.dbg	line,	"include\routines_LEVELS.c", 528; spr_set(weapon_id);
 5175                        		__ld.umq	_weapon_id
         02:DA3D  AD 26 23   			lda	_weapon_id
 5176                        		__call		_spr_set.1
         02:DA40  20 DD E7   			call	_spr_set.1
 5177                        	
 5178                        		.dbg	line,	"include\routines_LEVELS.c", 529; 
 5179                        	
 5180                        		.dbg	line,	"include\routines_LEVELS.c", 530; if(player_axis == AXIS_RIGHT)
 5181                        		__not.um	_player_axis
         02:DA43  AD 19 23   			lda	_player_axis
         02:DA46  18         			clc
         02:DA47  D0 01      			bne	!+
         02:DA49  38         			sec
         02:DA4A             	!:
 5182                        		__bfalse	.LL106
         02:DA4A  90 12      			bcc	.LL106
 5183                        	
 5184                        		.dbg	line,	"include\routines_LEVELS.c", 531; {
 5185                        	
 5186                        		.dbg	line,	"include\routines_LEVELS.c", 532; spr_x(player_pos_x-5);
 5187                        		__ld.wm		_player_pos_x
         02:DA4C  AD DA 24   			lda.l	_player_pos_x
         02:DA4F  AC DB 24   			ldy.h	_player_pos_x
 5188                        		__sub.wi	5
         02:DA52  38         			sec
         02:DA53  E9 05      			sbc.l	#5
         02:DA55  B0 01      			bcs	!+
         02:DA57  88         			dey
         02:DA58             	!:
 5189                        		__call		_spr_x.1
         02:DA58  20 0A E8   			call	_spr_x.1
 5190                        	
 5191                        		.dbg	line,	"include\routines_LEVELS.c", 533; }
 5192                        	
 5193                        		.dbg	line,	"include\routines_LEVELS.c", 535; else
 5194                        		__bra		.LL107
         02:DA5B  4C 39 DC   			bra	.LL107
 5195    02:DA5E             	.LL106:
 5196                        	
 5197                        		.dbg	line,	"include\routines_LEVELS.c", 536; {
 5198                        	
 5199                        		.dbg	line,	"include\routines_LEVELS.c", 537; spr_x(player_pos_x+21);
 5200                        		__ld.wm		_player_pos_x
         02:DA5E  AD DA 24   			lda.l	_player_pos_x
         02:DA61  AC DB 24   			ldy.h	_player_pos_x
 5201                        		__add.wi	21
         02:DA64  18         			clc
         02:DA65  69 15      			adc.l	#21
         02:DA67  90 01      			bcc	!+
         02:DA69  C8         			iny
         02:DA6A             	!:
 5202                        		__call		_spr_x.1
         02:DA6A  20 0A E8   			call	_spr_x.1
 5203                        	
 5204                        		.dbg	line,	"include\routines_LEVELS.c", 538; }
 5205    02:DA6D             	.LL107	.alias		.LL108
 5206                        	
 5207                        		.dbg	line,	"include\routines_LEVELS.c", 539; }
 5208                        	
 5209                        		.dbg	line,	"include\routines_LEVELS.c", 542; else if(player_state == STATE_HANG || player_state == STATE_CLIMB_UP || player_state == STATE_CLIMB_DOWN)
 5210                        		__bra		.LL108
         02:DA6D  4C 39 DC   			bra	.LL108
 5211    02:DA70             	.LL105:
 5212                        		__ld.umq	_player_state
         02:DA70  AD 18 23   			lda	_player_state
 5213                        		__equ_b.uiq	10
         02:DA73  C9 0A      			cmp	#10
         02:DA75  F0 01      			beq	!+
         02:DA77  18         			clc
         02:DA78             	!:
 5214                        		__btrue		.LL110
         02:DA78  B0 08      			bcs	.LL110
 5215                        		__ld.umq	_player_state
         02:DA7A  AD 18 23   			lda	_player_state
 5216                        		__equ_b.uiq	11
         02:DA7D  C9 0B      			cmp	#11
         02:DA7F  F0 01      			beq	!+
         02:DA81  18         			clc
         02:DA82             	!:
 5217    02:DA82             	.LL110:
 5218                        		__btrue		.LL111
         02:DA82  B0 08      			bcs	.LL111
 5219                        		__ld.umq	_player_state
         02:DA84  AD 18 23   			lda	_player_state
 5220                        		__equ_b.uiq	12
         02:DA87  C9 0C      			cmp	#12
         02:DA89  F0 01      			beq	!+
         02:DA8B  18         			clc
         02:DA8C             	!:
 5221    02:DA8C             	.LL111:
 5222                        		__bfalse	.LL109
         02:DA8C  B0 03 4C 39			bcc	.LL109
         02:DA90  DC          
 5223                        	
 5224                        		.dbg	line,	"include\routines_LEVELS.c", 543; {
 5225                        	
 5226                        		.dbg	line,	"include\routines_LEVELS.c", 544; if(player_attack == FALSE)
 5227                        		__not.um	_player_attack
         02:DA91  AD 20 23   			lda	_player_attack
         02:DA94  18         			clc
         02:DA95  D0 01      			bne	!+
         02:DA97  38         			sec
         02:DA98             	!:
 5228                        		__bfalse	.LL112
         02:DA98  B0 03 4C 39			bcc	.LL112
         02:DA9C  DC          
 5229                        	
 5230                        		.dbg	line,	"include\routines_LEVELS.c", 545; {
 5231                        	
 5232                        		.dbg	line,	"include\routines_LEVELS.c", 546; if(joy(JOYPAD_1) & JOY_RIGHT)
 5233                        		__ld.uiq	0
         02:DA9D  62         			cla
 5234                        		 _joy.1
         02:DA9E  AA         			tax
         02:DA9F  BD 28 22   			lda	joynow, x
         02:DAA2  BC D3 22   			ldy	joy6now, x
 5235                        		__tand.wi	32
         02:DAA5  29 20      			and	#32
         02:DAA7  C9 01      	!:		cmp	#1
 5236                        		__bfalse	.LL113
         02:DAA9  90 23      			bcc	.LL113
 5237                        	
 5238                        		.dbg	line,	"include\routines_LEVELS.c", 547; {
 5239                        	
 5240                        		.dbg	line,	"include\routines_LEVELS.c", 548; hit_wall = FALSE;
 5241                        		__st.umiq	0, _hit_wall
         02:DAAB  9C 24 23   			stz	_hit_wall
 5242                        	
 5243                        		.dbg	line,	"include\routines_LEVELS.c", 549; 
 5244                        	
 5245                        		.dbg	line,	"include\routines_LEVELS.c", 550; player_counter_anim = 0;
 5246                        		__st.umiq	0, _player_counter_anim
         02:DAAE  9C 1B 23   			stz	_player_counter_anim
 5247                        	
 5248                        		.dbg	line,	"include\routines_LEVELS.c", 552; player_state = STATE_JUMP_RIGHT;
 5249                        		__st.umiq	5, _player_state
         02:DAB1  A9 05      			lda.l	#5
         02:DAB3  8D 18 23   			sta	_player_state
 5250                        	
 5251                        		.dbg	line,	"include\routines_LEVELS.c", 554; spr_set(weapon_id);
 5252                        		__ld.umq	_weapon_id
         02:DAB6  AD 26 23   			lda	_weapon_id
 5253                        		__call		_spr_set.1
         02:DAB9  20 DD E7   			call	_spr_set.1
 5254                        	
 5255                        		.dbg	line,	"include\routines_LEVELS.c", 555; spr_x(player_pos_x-5);
 5256                        		__ld.wm		_player_pos_x
         02:DABC  AD DA 24   			lda.l	_player_pos_x
         02:DABF  AC DB 24   			ldy.h	_player_pos_x
 5257                        		__sub.wi	5
         02:DAC2  38         			sec
         02:DAC3  E9 05      			sbc.l	#5
         02:DAC5  B0 01      			bcs	!+
         02:DAC7  88         			dey
         02:DAC8             	!:
 5258                        		__call		_spr_x.1
         02:DAC8  20 0A E8   			call	_spr_x.1
 5259                        	
 5260                        		.dbg	line,	"include\routines_LEVELS.c", 556; }
 5261                        	
 5262                        		.dbg	line,	"include\routines_LEVELS.c", 558; else if(joy(JOYPAD_1) & JOY_LEFT)
 5263                        		__bra		.LL114
         02:DACB  4C 39 DC   			bra	.LL114
 5264    02:DACE             	.LL113:
 5265                        		__ld.uiq	0
         02:DACE  62         			cla
 5266                        		 _joy.1
         02:DACF  AA         			tax
         02:DAD0  BD 28 22   			lda	joynow, x
         02:DAD3  BC D3 22   			ldy	joy6now, x
 5267                        		__tand.wi	128
         02:DAD6  29 80      			and	#128
         02:DAD8  C9 01      	!:		cmp	#1
 5268                        		__bfalse	.LL115
         02:DADA  90 23      			bcc	.LL115
 5269                        	
 5270                        		.dbg	line,	"include\routines_LEVELS.c", 559; {
 5271                        	
 5272                        		.dbg	line,	"include\routines_LEVELS.c", 560; hit_wall = FALSE;
 5273                        		__st.umiq	0, _hit_wall
         02:DADC  9C 24 23   			stz	_hit_wall
 5274                        	
 5275                        		.dbg	line,	"include\routines_LEVELS.c", 561; 
 5276                        	
 5277                        		.dbg	line,	"include\routines_LEVELS.c", 562; player_counter_anim = 0;
 5278                        		__st.umiq	0, _player_counter_anim
         02:DADF  9C 1B 23   			stz	_player_counter_anim
 5279                        	
 5280                        		.dbg	line,	"include\routines_LEVELS.c", 564; player_state = STATE_JUMP_LEFT;
 5281                        		__st.umiq	6, _player_state
         02:DAE2  A9 06      			lda.l	#6
         02:DAE4  8D 18 23   			sta	_player_state
 5282                        	
 5283                        		.dbg	line,	"include\routines_LEVELS.c", 566; spr_set(weapon_id);
 5284                        		__ld.umq	_weapon_id
         02:DAE7  AD 26 23   			lda	_weapon_id
 5285                        		__call		_spr_set.1
         02:DAEA  20 DD E7   			call	_spr_set.1
 5286                        	
 5287                        		.dbg	line,	"include\routines_LEVELS.c", 567; spr_x(player_pos_x+21);
 5288                        		__ld.wm		_player_pos_x
         02:DAED  AD DA 24   			lda.l	_player_pos_x
         02:DAF0  AC DB 24   			ldy.h	_player_pos_x
 5289                        		__add.wi	21
         02:DAF3  18         			clc
         02:DAF4  69 15      			adc.l	#21
         02:DAF6  90 01      			bcc	!+
         02:DAF8  C8         			iny
         02:DAF9             	!:
 5290                        		__call		_spr_x.1
         02:DAF9  20 0A E8   			call	_spr_x.1
 5291                        	
 5292                        		.dbg	line,	"include\routines_LEVELS.c", 568; }
 5293                        	
 5294                        		.dbg	line,	"include\routines_LEVELS.c", 570; else if(joy(JOYPAD_1) & JOY_UP)
 5295                        		__bra		.LL116
         02:DAFC  4C 39 DC   			bra	.LL116
 5296    02:DAFF             	.LL115:
 5297                        		__ld.uiq	0
         02:DAFF  62         			cla
 5298                        		 _joy.1
         02:DB00  AA         			tax
         02:DB01  BD 28 22   			lda	joynow, x
         02:DB04  BC D3 22   			ldy	joy6now, x
 5299                        		__tand.wi	16
         02:DB07  29 10      			and	#16
         02:DB09  C9 01      	!:		cmp	#1
 5300                        		__bfalse	.LL117
         02:DB0B  B0 03 4C 39			bcc	.LL117
         02:DB0F  DC          
 5301                        	
 5302                        		.dbg	line,	"include\routines_LEVELS.c", 571; {
 5303                        	
 5304                        		.dbg	line,	"include\routines_LEVELS.c", 572; hit_wall = FALSE;
 5305                        		__st.umiq	0, _hit_wall
         02:DB10  9C 24 23   			stz	_hit_wall
 5306                        	
 5307                        		.dbg	line,	"include\routines_LEVELS.c", 573; 
 5308                        	
 5309                        		.dbg	line,	"include\routines_LEVELS.c", 574; player_counter_anim = 0;
 5310                        		__st.umiq	0, _player_counter_anim
         02:DB13  9C 1B 23   			stz	_player_counter_anim
 5311                        	
 5312                        		.dbg	line,	"include\routines_LEVELS.c", 576; check_BG( 15 , 8 );
 5313                        		__ld.wi		15
         02:DB16  A9 0F      			lda.l	#15
         02:DB18  C2         			cly
 5314                        		__pusharg.wr
         02:DB19  A6 8D      			ldx	<__sp
         02:DB1B  CA         			dex
         02:DB1C  CA         			dex
         02:DB1D  95 08      			sta.l	<__stack, x
         02:DB1F  94 09      			sty.h	<__stack, x
         02:DB21  86 8D      			stx	<__sp
 5315                        		__ld.wi		8
         02:DB23  A9 08      			lda.l	#8
         02:DB25  C2         			cly
 5316                        		__pusharg.wr
         02:DB26  A6 8D      			ldx	<__sp
         02:DB28  CA         			dex
         02:DB29  CA         			dex
         02:DB2A  95 08      			sta.l	<__stack, x
         02:DB2C  94 09      			sty.h	<__stack, x
         02:DB2E  86 8D      			stx	<__sp
 5317                        		__call		_check_BG
         02:DB30  20 6D FF   			call	_check_BG
 5318                        	
 5319                        		.dbg	line,	"include\routines_LEVELS.c", 578; if(map_blk_flag == TILE_EMPTY)
 5320                        		__not.um	_map_blk_flag
         02:DB33  AD B8 2B   			lda	_map_blk_flag
         02:DB36  18         			clc
         02:DB37  D0 01      			bne	!+
         02:DB39  38         			sec
         02:DB3A             	!:
 5321                        		__bfalse	.LL118
         02:DB3A  B0 03 4C 39			bcc	.LL118
         02:DB3E  DC          
 5322                        	
 5323                        		.dbg	line,	"include\routines_LEVELS.c", 579; {
 5324                        	
 5325                        		.dbg	line,	"include\routines_LEVELS.c", 580; player_state = STATE_JUMP_LADDER;
 5326                        		__st.umiq	13, _player_state
         02:DB3F  A9 0D      			lda.l	#13
         02:DB41  8D 18 23   			sta	_player_state
 5327                        	
 5328                        		.dbg	line,	"include\routines_LEVELS.c", 582; spr_set(weapon_id);
 5329                        		__ld.umq	_weapon_id
         02:DB44  AD 26 23   			lda	_weapon_id
 5330                        		__call		_spr_set.1
         02:DB47  20 DD E7   			call	_spr_set.1
 5331                        	
 5332                        		.dbg	line,	"include\routines_LEVELS.c", 583; spr_y(player_pos_y+8);
 5333                        		__ld.wm		_player_pos_y
         02:DB4A  AD DC 24   			lda.l	_player_pos_y
         02:DB4D  AC DD 24   			ldy.h	_player_pos_y
 5334                        		__add.wi	8
         02:DB50  18         			clc
         02:DB51  69 08      			adc.l	#8
         02:DB53  90 01      			bcc	!+
         02:DB55  C8         			iny
         02:DB56             	!:
 5335                        		__call		_spr_y.1
         02:DB56  20 19 E8   			call	_spr_y.1
 5336                        	
 5337                        		.dbg	line,	"include\routines_LEVELS.c", 584; 
 5338                        	
 5339                        		.dbg	line,	"include\routines_LEVELS.c", 585; if(player_axis == AXIS_RIGHT)
 5340                        		__not.um	_player_axis
         02:DB59  AD 19 23   			lda	_player_axis
         02:DB5C  18         			clc
         02:DB5D  D0 01      			bne	!+
         02:DB5F  38         			sec
         02:DB60             	!:
 5341                        		__bfalse	.LL119
         02:DB60  90 12      			bcc	.LL119
 5342                        	
 5343                        		.dbg	line,	"include\routines_LEVELS.c", 586; {
 5344                        	
 5345                        		.dbg	line,	"include\routines_LEVELS.c", 587; spr_x(player_pos_x-5);
 5346                        		__ld.wm		_player_pos_x
         02:DB62  AD DA 24   			lda.l	_player_pos_x
         02:DB65  AC DB 24   			ldy.h	_player_pos_x
 5347                        		__sub.wi	5
         02:DB68  38         			sec
         02:DB69  E9 05      			sbc.l	#5
         02:DB6B  B0 01      			bcs	!+
         02:DB6D  88         			dey
         02:DB6E             	!:
 5348                        		__call		_spr_x.1
         02:DB6E  20 0A E8   			call	_spr_x.1
 5349                        	
 5350                        		.dbg	line,	"include\routines_LEVELS.c", 588; }
 5351                        	
 5352                        		.dbg	line,	"include\routines_LEVELS.c", 590; else
 5353                        		__bra		.LL120
         02:DB71  4C 39 DC   			bra	.LL120
 5354    02:DB74             	.LL119:
 5355                        	
 5356                        		.dbg	line,	"include\routines_LEVELS.c", 591; {
 5357                        	
 5358                        		.dbg	line,	"include\routines_LEVELS.c", 592; spr_x(player_pos_x+21);
 5359                        		__ld.wm		_player_pos_x
         02:DB74  AD DA 24   			lda.l	_player_pos_x
         02:DB77  AC DB 24   			ldy.h	_player_pos_x
 5360                        		__add.wi	21
         02:DB7A  18         			clc
         02:DB7B  69 15      			adc.l	#21
         02:DB7D  90 01      			bcc	!+
         02:DB7F  C8         			iny
         02:DB80             	!:
 5361                        		__call		_spr_x.1
         02:DB80  20 0A E8   			call	_spr_x.1
 5362                        	
 5363                        		.dbg	line,	"include\routines_LEVELS.c", 593; }
 5364    02:DB83             	.LL120	.alias		.LL121
 5365                        	
 5366                        		.dbg	line,	"include\routines_LEVELS.c", 594; }
 5367                        	
 5368                        		.dbg	line,	"include\routines_LEVELS.c", 595; }
 5369    02:DB83             	.LL118	.alias		.LL121
 5370                        	
 5371                        		.dbg	line,	"include\routines_LEVELS.c", 596; }
 5372    02:DB83             	.LL117	.alias		.LL121
 5373    02:DB83             	.LL116	.alias		.LL121
 5374    02:DB83             	.LL114	.alias		.LL121
 5375                        	
 5376                        		.dbg	line,	"include\routines_LEVELS.c", 597; }
 5377    02:DB83             	.LL112	.alias		.LL121
 5378                        	
 5379                        		.dbg	line,	"include\routines_LEVELS.c", 598; }
 5380    02:DB83             	.LL109	.alias		.LL121
 5381    02:DB83             	.LL108	.alias		.LL121
 5382    02:DB83             	.LL104	.alias		.LL121
 5383                        	
 5384                        		.dbg	line,	"include\routines_LEVELS.c", 600; // ATTACK //
 5385                        	
 5386                        		.dbg	line,	"include\routines_LEVELS.c", 601; else if(joytrg(JOYPAD_1) == JOY_II)
 5387                        		__bra		.LL121
         02:DB83  4C 39 DC   			bra	.LL121
 5388    02:DB86             	.LL100:
 5389                        		__ld.uiq	0
         02:DB86  62         			cla
 5390                        		 _joytrg.1
         02:DB87  AA         			tax
         02:DB88  BD 2D 22   			lda	joytrg, x
         02:DB8B  BC DD 22   			ldy	joy6trg, x
 5391                        		__equ_w.wi	2
         02:DB8E  C9 02      			cmp.l	#2
         02:DB90  D0 04      			bne	!false+
         02:DB92  C0 00      			cpy.h	#2
         02:DB94  F0 01      			beq	!+
         02:DB96  18         	!false:		clc
         02:DB97             	!:
 5392                        		__bfalse	.LL122
         02:DB97  B0 03 4C 39			bcc	.LL122
         02:DB9B  DC          
 5393                        	
 5394                        		.dbg	line,	"include\routines_LEVELS.c", 602; {
 5395                        	
 5396                        		.dbg	line,	"include\routines_LEVELS.c", 603; if(player_state == STATE_IDLE || player_state == STATE_WALK)
 5397                        		__not.um	_player_state
         02:DB9C  AD 18 23   			lda	_player_state
         02:DB9F  18         			clc
         02:DBA0  D0 01      			bne	!+
         02:DBA2  38         			sec
         02:DBA3             	!:
 5398                        		__btrue		.LL124
         02:DBA3  B0 08      			bcs	.LL124
 5399                        		__ld.umq	_player_state
         02:DBA5  AD 18 23   			lda	_player_state
 5400                        		__equ_b.uiq	1
         02:DBA8  C9 01      			cmp	#1
         02:DBAA  F0 01      			beq	!+
         02:DBAC  18         			clc
         02:DBAD             	!:
 5401    02:DBAD             	.LL124:
 5402                        		__bfalse	.LL123
         02:DBAD  90 13      			bcc	.LL123
 5403                        	
 5404                        		.dbg	line,	"include\routines_LEVELS.c", 604; {
 5405                        	
 5406                        		.dbg	line,	"include\routines_LEVELS.c", 605; list_chain_active[0] = FALSE;
 5407                        		__st.umiq	0, _list_chain_active
         02:DBAF  9C 29 23   			stz	_list_chain_active
 5408                        	
 5409                        		.dbg	line,	"include\routines_LEVELS.c", 606; list_chain_active[1] = FALSE;
 5410                        		__st.umiq	0, _list_chain_active + 1
         02:DBB2  9C 2A 23   			stz	_list_chain_active + 1
 5411                        	
 5412                        		.dbg	line,	"include\routines_LEVELS.c", 607; list_chain_active[2] = FALSE;
 5413                        		__st.umiq	0, _list_chain_active + 2
         02:DBB5  9C 2B 23   			stz	_list_chain_active + 2
 5414                        	
 5415                        		.dbg	line,	"include\routines_LEVELS.c", 609; player_counter_attack = 0;
 5416                        		__st.umiq	0, _player_counter_attack
         02:DBB8  9C 1E 23   			stz	_player_counter_attack
 5417                        	
 5418                        		.dbg	line,	"include\routines_LEVELS.c", 610; player_state = STATE_ATTACK;
 5419                        		__st.umiq	2, _player_state
         02:DBBB  A9 02      			lda.l	#2
         02:DBBD  8D 18 23   			sta	_player_state
 5420                        	
 5421                        		.dbg	line,	"include\routines_LEVELS.c", 611; }
 5422                        	
 5423                        		.dbg	line,	"include\routines_LEVELS.c", 613; else if(player_state == STATE_JUMP)
 5424                        		__bra		.LL125
         02:DBC0  80 77      			bra	.LL125
 5425    02:DBC2             	.LL123:
 5426                        		__ld.umq	_player_state
         02:DBC2  AD 18 23   			lda	_player_state
 5427                        		__equ_b.uiq	4
         02:DBC5  C9 04      			cmp	#4
         02:DBC7  F0 01      			beq	!+
         02:DBC9  18         			clc
         02:DBCA             	!:
 5428                        		__bfalse	.LL126
         02:DBCA  90 13      			bcc	.LL126
 5429                        	
 5430                        		.dbg	line,	"include\routines_LEVELS.c", 614; {
 5431                        	
 5432                        		.dbg	line,	"include\routines_LEVELS.c", 615; if(player_attack == FALSE)
 5433                        		__not.um	_player_attack
         02:DBCC  AD 20 23   			lda	_player_attack
         02:DBCF  18         			clc
         02:DBD0  D0 01      			bne	!+
         02:DBD2  38         			sec
         02:DBD3             	!:
 5434                        		__bfalse	.LL127
         02:DBD3  90 64      			bcc	.LL127
 5435                        	
 5436                        		.dbg	line,	"include\routines_LEVELS.c", 616; {
 5437                        	
 5438                        		.dbg	line,	"include\routines_LEVELS.c", 617; player_counter_attack = 0;
 5439                        		__st.umiq	0, _player_counter_attack
         02:DBD5  9C 1E 23   			stz	_player_counter_attack
 5440                        	
 5441                        		.dbg	line,	"include\routines_LEVELS.c", 618; player_attack = TRUE;
 5442                        		__st.umiq	1, _player_attack
         02:DBD8  A9 01      			lda.l	#1
         02:DBDA  8D 20 23   			sta	_player_attack
 5443                        	
 5444                        		.dbg	line,	"include\routines_LEVELS.c", 619; }
 5445                        	
 5446                        		.dbg	line,	"include\routines_LEVELS.c", 620; }
 5447    02:DBDD             	.LL127	.alias		.LL128
 5448                        	
 5449                        		.dbg	line,	"include\routines_LEVELS.c", 622; else if(player_state == STATE_CROUCH)
 5450                        		__bra		.LL128
         02:DBDD  80 5A      			bra	.LL128
 5451    02:DBDF             	.LL126:
 5452                        		__ld.umq	_player_state
         02:DBDF  AD 18 23   			lda	_player_state
 5453                        		__equ_b.uiq	7
         02:DBE2  C9 07      			cmp	#7
         02:DBE4  F0 01      			beq	!+
         02:DBE6  18         			clc
         02:DBE7             	!:
 5454                        		__bfalse	.LL129
         02:DBE7  90 13      			bcc	.LL129
 5455                        	
 5456                        		.dbg	line,	"include\routines_LEVELS.c", 623; {
 5457                        	
 5458                        		.dbg	line,	"include\routines_LEVELS.c", 624; list_chain_active[0] = FALSE;
 5459                        		__st.umiq	0, _list_chain_active
         02:DBE9  9C 29 23   			stz	_list_chain_active
 5460                        	
 5461                        		.dbg	line,	"include\routines_LEVELS.c", 625; list_chain_active[1] = FALSE;
 5462                        		__st.umiq	0, _list_chain_active + 1
         02:DBEC  9C 2A 23   			stz	_list_chain_active + 1
 5463                        	
 5464                        		.dbg	line,	"include\routines_LEVELS.c", 626; list_chain_active[2] = FALSE;
 5465                        		__st.umiq	0, _list_chain_active + 2
         02:DBEF  9C 2B 23   			stz	_list_chain_active + 2
 5466                        	
 5467                        		.dbg	line,	"include\routines_LEVELS.c", 628; player_counter_attack = 0;
 5468                        		__st.umiq	0, _player_counter_attack
         02:DBF2  9C 1E 23   			stz	_player_counter_attack
 5469                        	
 5470                        		.dbg	line,	"include\routines_LEVELS.c", 629; player_state = STATE_CROUCH_ATTACK;
 5471                        		__st.umiq	8, _player_state
         02:DBF5  A9 08      			lda.l	#8
         02:DBF7  8D 18 23   			sta	_player_state
 5472                        	
 5473                        		.dbg	line,	"include\routines_LEVELS.c", 630; }
 5474                        	
 5475                        		.dbg	line,	"include\routines_LEVELS.c", 632; else if(player_state == STATE_HANG || player_state == STATE_CLIMB_UP || player_state == STATE_CLIMB_DOWN)
 5476                        		__bra		.LL130
         02:DBFA  80 3D      			bra	.LL130
 5477    02:DBFC             	.LL129:
 5478                        		__ld.umq	_player_state
         02:DBFC  AD 18 23   			lda	_player_state
 5479                        		__equ_b.uiq	10
         02:DBFF  C9 0A      			cmp	#10
         02:DC01  F0 01      			beq	!+
         02:DC03  18         			clc
         02:DC04             	!:
 5480                        		__btrue		.LL132
         02:DC04  B0 08      			bcs	.LL132
 5481                        		__ld.umq	_player_state
         02:DC06  AD 18 23   			lda	_player_state
 5482                        		__equ_b.uiq	11
         02:DC09  C9 0B      			cmp	#11
         02:DC0B  F0 01      			beq	!+
         02:DC0D  18         			clc
         02:DC0E             	!:
 5483    02:DC0E             	.LL132:
 5484                        		__btrue		.LL133
         02:DC0E  B0 08      			bcs	.LL133
 5485                        		__ld.umq	_player_state
         02:DC10  AD 18 23   			lda	_player_state
 5486                        		__equ_b.uiq	12
         02:DC13  C9 0C      			cmp	#12
         02:DC15  F0 01      			beq	!+
         02:DC17  18         			clc
         02:DC18             	!:
 5487    02:DC18             	.LL133:
 5488                        		__bfalse	.LL131
         02:DC18  90 1F      			bcc	.LL131
 5489                        	
 5490                        		.dbg	line,	"include\routines_LEVELS.c", 633; {
 5491                        	
 5492                        		.dbg	line,	"include\routines_LEVELS.c", 634; if(player_attack == FALSE)
 5493                        		__not.um	_player_attack
         02:DC1A  AD 20 23   			lda	_player_attack
         02:DC1D  18         			clc
         02:DC1E  D0 01      			bne	!+
         02:DC20  38         			sec
         02:DC21             	!:
 5494                        		__bfalse	.LL134
         02:DC21  90 16      			bcc	.LL134
 5495                        	
 5496                        		.dbg	line,	"include\routines_LEVELS.c", 635; {
 5497                        	
 5498                        		.dbg	line,	"include\routines_LEVELS.c", 636; list_chain_active[0] = FALSE;
 5499                        		__st.umiq	0, _list_chain_active
         02:DC23  9C 29 23   			stz	_list_chain_active
 5500                        	
 5501                        		.dbg	line,	"include\routines_LEVELS.c", 637; list_chain_active[1] = FALSE;
 5502                        		__st.umiq	0, _list_chain_active + 1
         02:DC26  9C 2A 23   			stz	_list_chain_active + 1
 5503                        	
 5504                        		.dbg	line,	"include\routines_LEVELS.c", 638; list_chain_active[2] = FALSE;
 5505                        		__st.umiq	0, _list_chain_active + 2
         02:DC29  9C 2B 23   			stz	_list_chain_active + 2
 5506                        	
 5507                        		.dbg	line,	"include\routines_LEVELS.c", 639; 
 5508                        	
 5509                        		.dbg	line,	"include\routines_LEVELS.c", 640; player_counter_attack = 0;
 5510                        		__st.umiq	0, _player_counter_attack
         02:DC2C  9C 1E 23   			stz	_player_counter_attack
 5511                        	
 5512                        		.dbg	line,	"include\routines_LEVELS.c", 641; player_attack = TRUE;
 5513                        		__st.umiq	1, _player_attack
         02:DC2F  A9 01      			lda.l	#1
         02:DC31  8D 20 23   			sta	_player_attack
 5514                        	
 5515                        		.dbg	line,	"include\routines_LEVELS.c", 642; player_state = STATE_HANG;
 5516                        		__st.umiq	10, _player_state
         02:DC34  A9 0A      			lda.l	#10
         02:DC36  8D 18 23   			sta	_player_state
 5517                        	
 5518                        		.dbg	line,	"include\routines_LEVELS.c", 643; }
 5519                        	
 5520                        		.dbg	line,	"include\routines_LEVELS.c", 644; }
 5521    02:DC39             	.LL134:
 5522                        	
 5523                        		.dbg	line,	"include\routines_LEVELS.c", 645; }
 5524    02:DC39             	.LL131:
 5525    02:DC39             	.LL130:
 5526    02:DC39             	.LL128:
 5527    02:DC39             	.LL125:
 5528                        	
 5529                        		.dbg	line,	"include\routines_LEVELS.c", 646; }
 5530    02:DC39             	.LL122:
 5531    02:DC39             	.LL121:
 5532    02:DC39             	.LL99:
 5533                        		__return	0
         02:DC39  4C EF FF   			jmp	leave_proc
 5534                        		.dbg	clear
 5535                        		.endp
 5536                        		.pceas
 5537                        	
 5538                        		.dbg	line,	"include\routines_LEVELS.c", 649; void joypad_DIR()
 5539                        		.dbg	line,	"include\routines_LEVELS.c", 650; {
 5540                        	;***********************
 5541                        	;***********************
 5542                        	
 5543                        		.hucc
 5544    17:C7E0             		.proc		_joypad_DIR
 5545                        		__enter		_joypad_DIR
 5546                        	
 5547                        		.dbg	line,	"include\routines_LEVELS.c", 651; //--------------------------------------------------------------------------------------//
 5548                        	
 5549                        		.dbg	line,	"include\routines_LEVELS.c", 652; //                                        NO DIR                                        //
 5550                        	
 5551                        		.dbg	line,	"include\routines_LEVELS.c", 653; //--------------------------------------------------------------------------------------//
 5552                        	
 5553                        		.dbg	line,	"include\routines_LEVELS.c", 655; if(! (joy(JOYPAD_1) & JOY_DIR_PRESSED) )
 5554                        		__ld.uiq	0
         17:C7E0  62         			cla
 5555                        		 _joy.1
         17:C7E1  AA         			tax
         17:C7E2  BD 28 22   			lda	joynow, x
         17:C7E5  BC D3 22   			ldy	joy6now, x
 5556                        		__nand.wi	240
         17:C7E8  18         			clc
         17:C7E9  29 F0      			and	#240
         17:C7EB  D0 01      			bne	!+
         17:C7ED  38         			sec
         17:C7EE             	!:
 5557                        		__bfalse	.LL136
         17:C7EE  90 58      			bcc	.LL136
 5558                        	
 5559                        		.dbg	line,	"include\routines_LEVELS.c", 656; {
 5560                        	
 5561                        		.dbg	line,	"include\routines_LEVELS.c", 657; if(player_state == STATE_WALK || player_state == STATE_CROUCH)
 5562                        		__ld.umq	_player_state
         17:C7F0  AD 18 23   			lda	_player_state
 5563                        		__equ_b.uiq	1
         17:C7F3  C9 01      			cmp	#1
         17:C7F5  F0 01      			beq	!+
         17:C7F7  18         			clc
         17:C7F8             	!:
 5564                        		__btrue		.LL138
         17:C7F8  B0 08      			bcs	.LL138
 5565                        		__ld.umq	_player_state
         17:C7FA  AD 18 23   			lda	_player_state
 5566                        		__equ_b.uiq	7
         17:C7FD  C9 07      			cmp	#7
         17:C7FF  F0 01      			beq	!+
         17:C801  18         			clc
         17:C802             	!:
 5567    17:C802             	.LL138:
 5568                        		__bfalse	.LL137
         17:C802  90 13      			bcc	.LL137
 5569                        	
 5570                        		.dbg	line,	"include\routines_LEVELS.c", 658; {
 5571                        	
 5572                        		.dbg	line,	"include\routines_LEVELS.c", 659; if(player_attack == FALSE)
 5573                        		__not.um	_player_attack
         17:C804  AD 20 23   			lda	_player_attack
         17:C807  18         			clc
         17:C808  D0 01      			bne	!+
         17:C80A  38         			sec
         17:C80B             	!:
 5574                        		__bfalse	.LL139
         17:C80B  90 3B      			bcc	.LL139
 5575                        	
 5576                        		.dbg	line,	"include\routines_LEVELS.c", 660; {
 5577                        	
 5578                        		.dbg	line,	"include\routines_LEVELS.c", 661; player_counter_anim = 1;
 5579                        		__st.umiq	1, _player_counter_anim
         17:C80D  A9 01      			lda.l	#1
         17:C80F  8D 1B 23   			sta	_player_counter_anim
 5580                        	
 5581                        		.dbg	line,	"include\routines_LEVELS.c", 662; player_state = STATE_IDLE;
 5582                        		__st.umiq	0, _player_state
         17:C812  9C 18 23   			stz	_player_state
 5583                        	
 5584                        		.dbg	line,	"include\routines_LEVELS.c", 663; }
 5585                        	
 5586                        		.dbg	line,	"include\routines_LEVELS.c", 664; }
 5587    17:C815             	.LL139	.alias		.LL140
 5588                        	
 5589                        		.dbg	line,	"include\routines_LEVELS.c", 667; else if(player_state == STATE_CLIMB_UP || player_state == STATE_CLIMB_DOWN)
 5590                        		__bra		.LL140
         17:C815  80 31      			bra	.LL140
 5591    17:C817             	.LL137:
 5592                        		__ld.umq	_player_state
         17:C817  AD 18 23   			lda	_player_state
 5593                        		__equ_b.uiq	11
         17:C81A  C9 0B      			cmp	#11
         17:C81C  F0 01      			beq	!+
         17:C81E  18         			clc
         17:C81F             	!:
 5594                        		__btrue		.LL142
         17:C81F  B0 08      			bcs	.LL142
 5595                        		__ld.umq	_player_state
         17:C821  AD 18 23   			lda	_player_state
 5596                        		__equ_b.uiq	12
         17:C824  C9 0C      			cmp	#12
         17:C826  F0 01      			beq	!+
         17:C828  18         			clc
         17:C829             	!:
 5597    17:C829             	.LL142:
 5598                        		__bfalse	.LL141
         17:C829  90 1D      			bcc	.LL141
 5599                        	
 5600                        		.dbg	line,	"include\routines_LEVELS.c", 668; {
 5601                        	
 5602                        		.dbg	line,	"include\routines_LEVELS.c", 669; if(player_attack == FALSE)
 5603                        		__not.um	_player_attack
         17:C82B  AD 20 23   			lda	_player_attack
         17:C82E  18         			clc
         17:C82F  D0 01      			bne	!+
         17:C831  38         			sec
         17:C832             	!:
 5604                        		__bfalse	.LL143
         17:C832  90 14      			bcc	.LL143
 5605                        	
 5606                        		.dbg	line,	"include\routines_LEVELS.c", 670; {
 5607                        	
 5608                        		.dbg	line,	"include\routines_LEVELS.c", 671; spr_set(player_id);
 5609                        		__ld.umq	_player_id
         17:C834  AD 17 23   			lda	_player_id
 5610                        		__call		_spr_set.1
         17:C837  20 DD E7   			call	_spr_set.1
 5611                        	
 5612                        		.dbg	line,	"include\routines_LEVELS.c", 672; spr_pattern(PLAYER_HANG_VRAM_ADR);
 5613                        		__ld.wi		7424
         17:C83A  62         			cla
         17:C83B  A0 1D      			ldy.h	#7424
 5614                        		__call		_spr_pattern.1
         17:C83D  20 26 E8   			call	_spr_pattern.1
 5615                        	
 5616                        		.dbg	line,	"include\routines_LEVELS.c", 673; player_counter_anim = 0;
 5617                        		__st.umiq	0, _player_counter_anim
         17:C840  9C 1B 23   			stz	_player_counter_anim
 5618                        	
 5619                        		.dbg	line,	"include\routines_LEVELS.c", 674; player_state = STATE_HANG;
 5620                        		__st.umiq	10, _player_state
         17:C843  A9 0A      			lda.l	#10
         17:C845  8D 18 23   			sta	_player_state
 5621                        	
 5622                        		.dbg	line,	"include\routines_LEVELS.c", 675; }
 5623                        	
 5624                        		.dbg	line,	"include\routines_LEVELS.c", 676; }
 5625    17:C848             	.LL143:
 5626                        	
 5627                        		.dbg	line,	"include\routines_LEVELS.c", 677; }
 5628    17:C848             	.LL141:
 5629    17:C848             	.LL140:
 5630                        	
 5631                        		.dbg	line,	"include\routines_LEVELS.c", 680; //--------------------------------------------------------------------------------------//
 5632                        	
 5633                        		.dbg	line,	"include\routines_LEVELS.c", 681; //                                     RIGHT BUTTON                                     //
 5634                        	
 5635                        		.dbg	line,	"include\routines_LEVELS.c", 682; //--------------------------------------------------------------------------------------//
 5636                        	
 5637                        		.dbg	line,	"include\routines_LEVELS.c", 684; if(joy(JOYPAD_1) & JOY_RIGHT)
 5638    17:C848             	.LL136:
 5639                        		__ld.uiq	0
         17:C848  62         			cla
 5640                        		 _joy.1
         17:C849  AA         			tax
         17:C84A  BD 28 22   			lda	joynow, x
         17:C84D  BC D3 22   			ldy	joy6now, x
 5641                        		__tand.wi	32
         17:C850  29 20      			and	#32
         17:C852  C9 01      	!:		cmp	#1
 5642                        		__bfalse	.LL144
         17:C854  B0 03 4C 13			bcc	.LL144
         17:C858  CC          
 5643                        	
 5644                        		.dbg	line,	"include\routines_LEVELS.c", 685; {
 5645                        	
 5646                        		.dbg	line,	"include\routines_LEVELS.c", 686; if(player_state == STATE_IDLE || player_state == STATE_WALK)
 5647                        		__not.um	_player_state
         17:C859  AD 18 23   			lda	_player_state
         17:C85C  18         			clc
         17:C85D  D0 01      			bne	!+
         17:C85F  38         			sec
         17:C860             	!:
 5648                        		__btrue		.LL146
         17:C860  B0 08      			bcs	.LL146
 5649                        		__ld.umq	_player_state
         17:C862  AD 18 23   			lda	_player_state
 5650                        		__equ_b.uiq	1
         17:C865  C9 01      			cmp	#1
         17:C867  F0 01      			beq	!+
         17:C869  18         			clc
         17:C86A             	!:
 5651    17:C86A             	.LL146:
 5652                        		__bfalse	.LL145
         17:C86A  B0 03 4C 07			bcc	.LL145
         17:C86E  C9          
 5653                        	
 5654                        		.dbg	line,	"include\routines_LEVELS.c", 687; {
 5655                        	
 5656                        		.dbg	line,	"include\routines_LEVELS.c", 688; player_axis = AXIS_RIGHT;
 5657                        		__st.umiq	0, _player_axis
         17:C86F  9C 19 23   			stz	_player_axis
 5658                        	
 5659                        		.dbg	line,	"include\routines_LEVELS.c", 690; if(player_previous_axis != player_axis)
 5660                        		__ld.umq	_player_previous_axis
         17:C872  AD 1A 23   			lda	_player_previous_axis
 5661                        		__neq_b.umq	_player_axis
         17:C875  38         			sec
         17:C876  4D 19 23   			eor	_player_axis
         17:C879  D0 01      			bne	!+
         17:C87B  18         			clc
         17:C87C             	!:
 5662                        		__bfalse	.LL147
         17:C87C  90 66      			bcc	.LL147
 5663                        	
 5664                        		.dbg	line,	"include\routines_LEVELS.c", 691; {
 5665                        	
 5666                        		.dbg	line,	"include\routines_LEVELS.c", 692; player_previous_axis = player_axis;
 5667                        		__ld.um		_player_axis
         17:C87E  AD 19 23   			lda	_player_axis
         17:C881  C2         			cly
 5668                        		__st.umq	_player_previous_axis
         17:C882  8D 1A 23   			sta	_player_previous_axis
 5669                        	
 5670                        		.dbg	line,	"include\routines_LEVELS.c", 694; spr_set(player_id);
 5671                        		__ld.umq	_player_id
         17:C885  AD 17 23   			lda	_player_id
 5672                        		__call		_spr_set.1
         17:C888  20 DD E7   			call	_spr_set.1
 5673                        	
 5674                        		.dbg	line,	"include\routines_LEVELS.c", 695; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5675                        		__st.umiq	136, _al
         17:C88B  A9 88      			lda.l	#136
         17:C88D  85 F8      			sta	_al
 5676                        		__ld.uiq	0
         17:C88F  62         			cla
 5677                        		__call		_spr_ctrl.2
         17:C890  20 3C E8   			call	_spr_ctrl.2
 5678                        	
 5679                        		.dbg	line,	"include\routines_LEVELS.c", 697; spr_set(chain_id);
 5680                        		__ld.umq	_chain_id
         17:C893  AD 25 23   			lda	_chain_id
 5681                        		__call		_spr_set.1
         17:C896  20 DD E7   			call	_spr_set.1
 5682                        	
 5683                        		.dbg	line,	"include\routines_LEVELS.c", 698; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5684                        		__st.umiq	136, _al
         17:C899  A9 88      			lda.l	#136
         17:C89B  85 F8      			sta	_al
 5685                        		__ld.uiq	0
         17:C89D  62         			cla
 5686                        		__call		_spr_ctrl.2
         17:C89E  20 3C E8   			call	_spr_ctrl.2
 5687                        	
 5688                        		.dbg	line,	"include\routines_LEVELS.c", 700; spr_set(chain_id+1);
 5689                        		__ld.um		_chain_id
         17:C8A1  AD 25 23   			lda	_chain_id
         17:C8A4  C2         			cly
 5690                        		__add.wi	1
         17:C8A5  1A         			inc	a
         17:C8A6  D0 01      			bne	!+
         17:C8A8  C8         			iny
         17:C8A9             	!:
 5691                        		__call		_spr_set.1
         17:C8A9  20 DD E7   			call	_spr_set.1
 5692                        	
 5693                        		.dbg	line,	"include\routines_LEVELS.c", 701; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5694                        		__st.umiq	136, _al
         17:C8AC  A9 88      			lda.l	#136
         17:C8AE  85 F8      			sta	_al
 5695                        		__ld.uiq	0
         17:C8B0  62         			cla
 5696                        		__call		_spr_ctrl.2
         17:C8B1  20 3C E8   			call	_spr_ctrl.2
 5697                        	
 5698                        		.dbg	line,	"include\routines_LEVELS.c", 703; spr_set(chain_id+2);
 5699                        		__ld.um		_chain_id
         17:C8B4  AD 25 23   			lda	_chain_id
         17:C8B7  C2         			cly
 5700                        		__add.wi	2
         17:C8B8  18         			clc
         17:C8B9  69 02      			adc.l	#2
         17:C8BB  90 01      			bcc	!+
         17:C8BD  C8         			iny
         17:C8BE             	!:
 5701                        		__call		_spr_set.1
         17:C8BE  20 DD E7   			call	_spr_set.1
 5702                        	
 5703                        		.dbg	line,	"include\routines_LEVELS.c", 704; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5704                        		__st.umiq	136, _al
         17:C8C1  A9 88      			lda.l	#136
         17:C8C3  85 F8      			sta	_al
 5705                        		__ld.uiq	0
         17:C8C5  62         			cla
 5706                        		__call		_spr_ctrl.2
         17:C8C6  20 3C E8   			call	_spr_ctrl.2
 5707                        	
 5708                        		.dbg	line,	"include\routines_LEVELS.c", 706; spr_set(weapon_id);
 5709                        		__ld.umq	_weapon_id
         17:C8C9  AD 26 23   			lda	_weapon_id
 5710                        		__call		_spr_set.1
         17:C8CC  20 DD E7   			call	_spr_set.1
 5711                        	
 5712                        		.dbg	line,	"include\routines_LEVELS.c", 707; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5713                        		__st.umiq	136, _al
         17:C8CF  A9 88      			lda.l	#136
         17:C8D1  85 F8      			sta	_al
 5714                        		__ld.uiq	0
         17:C8D3  62         			cla
 5715                        		__call		_spr_ctrl.2
         17:C8D4  20 3C E8   			call	_spr_ctrl.2
 5716                        	
 5717                        		.dbg	line,	"include\routines_LEVELS.c", 708; spr_x(player_pos_x+1);
 5718                        		__ld.wm		_player_pos_x
         17:C8D7  AD DA 24   			lda.l	_player_pos_x
         17:C8DA  AC DB 24   			ldy.h	_player_pos_x
 5719                        		__add.wi	1
         17:C8DD  1A         			inc	a
         17:C8DE  D0 01      			bne	!+
         17:C8E0  C8         			iny
         17:C8E1             	!:
 5720                        		__call		_spr_x.1
         17:C8E1  20 0A E8   			call	_spr_x.1
 5721                        	
 5722                        		.dbg	line,	"include\routines_LEVELS.c", 709; }
 5723                        	
 5724                        		.dbg	line,	"include\routines_LEVELS.c", 711; if(joy(JOYPAD_1) & JOY_DOWN)
 5725    17:C8E4             	.LL147:
 5726                        		__ld.uiq	0
         17:C8E4  62         			cla
 5727                        		 _joy.1
         17:C8E5  AA         			tax
         17:C8E6  BD 28 22   			lda	joynow, x
         17:C8E9  BC D3 22   			ldy	joy6now, x
 5728                        		__tand.wi	64
         17:C8EC  29 40      			and	#64
         17:C8EE  C9 01      	!:		cmp	#1
 5729                        		__bfalse	.LL148
         17:C8F0  90 0D      			bcc	.LL148
 5730                        	
 5731                        		.dbg	line,	"include\routines_LEVELS.c", 712; {
 5732                        	
 5733                        		.dbg	line,	"include\routines_LEVELS.c", 713; player_counter_anim = 1;
 5734                        		__st.umiq	1, _player_counter_anim
         17:C8F2  A9 01      			lda.l	#1
         17:C8F4  8D 1B 23   			sta	_player_counter_anim
 5735                        	
 5736                        		.dbg	line,	"include\routines_LEVELS.c", 714; player_state = STATE_CROUCH;
 5737                        		__st.umiq	7, _player_state
         17:C8F7  A9 07      			lda.l	#7
         17:C8F9  8D 18 23   			sta	_player_state
 5738                        	
 5739                        		.dbg	line,	"include\routines_LEVELS.c", 715; return;
 5740                        		__bra		.LL135
         17:C8FC  4C 3E D2   			bra	.LL135
 5741                        	
 5742                        		.dbg	line,	"include\routines_LEVELS.c", 716; }
 5743                        	
 5744                        		.dbg	line,	"include\routines_LEVELS.c", 718; player_state = STATE_WALK;
 5745    17:C8FF             	.LL148:
 5746                        		__st.umiq	1, _player_state
         17:C8FF  A9 01      			lda.l	#1
         17:C901  8D 18 23   			sta	_player_state
 5747                        	
 5748                        		.dbg	line,	"include\routines_LEVELS.c", 719; }
 5749                        	
 5750                        		.dbg	line,	"include\routines_LEVELS.c", 722; else if(player_state == STATE_JUMP)
 5751                        		__bra		.LL149
         17:C904  4C 3E D2   			bra	.LL149
 5752    17:C907             	.LL145:
 5753                        		__ld.umq	_player_state
         17:C907  AD 18 23   			lda	_player_state
 5754                        		__equ_b.uiq	4
         17:C90A  C9 04      			cmp	#4
         17:C90C  F0 01      			beq	!+
         17:C90E  18         			clc
         17:C90F             	!:
 5755                        		__bfalse	.LL150
         17:C90F  B0 03 4C B3			bcc	.LL150
         17:C913  C9          
 5756                        	
 5757                        		.dbg	line,	"include\routines_LEVELS.c", 723; {
 5758                        	
 5759                        		.dbg	line,	"include\routines_LEVELS.c", 724; if(player_attack == FALSE)
 5760                        		__not.um	_player_attack
         17:C914  AD 20 23   			lda	_player_attack
         17:C917  18         			clc
         17:C918  D0 01      			bne	!+
         17:C91A  38         			sec
         17:C91B             	!:
 5761                        		__bfalse	.LL151
         17:C91B  B0 03 4C 3E			bcc	.LL151
         17:C91F  D2          
 5762                        	
 5763                        		.dbg	line,	"include\routines_LEVELS.c", 725; {
 5764                        	
 5765                        		.dbg	line,	"include\routines_LEVELS.c", 726; if(player_axis == AXIS_LEFT)
 5766                        		__ld.umq	_player_axis
         17:C920  AD 19 23   			lda	_player_axis
 5767                        		__equ_b.uiq	1
         17:C923  C9 01      			cmp	#1
         17:C925  F0 01      			beq	!+
         17:C927  18         			clc
         17:C928             	!:
 5768                        		__bfalse	.LL152
         17:C928  90 6B      			bcc	.LL152
 5769                        	
 5770                        		.dbg	line,	"include\routines_LEVELS.c", 727; {
 5771                        	
 5772                        		.dbg	line,	"include\routines_LEVELS.c", 728; player_axis = AXIS_RIGHT;
 5773                        		__st.umiq	0, _player_axis
         17:C92A  9C 19 23   			stz	_player_axis
 5774                        	
 5775                        		.dbg	line,	"include\routines_LEVELS.c", 729; player_previous_axis = player_axis;
 5776                        		__ld.um		_player_axis
         17:C92D  AD 19 23   			lda	_player_axis
         17:C930  C2         			cly
 5777                        		__st.umq	_player_previous_axis
         17:C931  8D 1A 23   			sta	_player_previous_axis
 5778                        	
 5779                        		.dbg	line,	"include\routines_LEVELS.c", 731; spr_set(player_id);
 5780                        		__ld.umq	_player_id
         17:C934  AD 17 23   			lda	_player_id
 5781                        		__call		_spr_set.1
         17:C937  20 DD E7   			call	_spr_set.1
 5782                        	
 5783                        		.dbg	line,	"include\routines_LEVELS.c", 732; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5784                        		__st.umiq	136, _al
         17:C93A  A9 88      			lda.l	#136
         17:C93C  85 F8      			sta	_al
 5785                        		__ld.uiq	0
         17:C93E  62         			cla
 5786                        		__call		_spr_ctrl.2
         17:C93F  20 3C E8   			call	_spr_ctrl.2
 5787                        	
 5788                        		.dbg	line,	"include\routines_LEVELS.c", 734; spr_set(chain_id);
 5789                        		__ld.umq	_chain_id
         17:C942  AD 25 23   			lda	_chain_id
 5790                        		__call		_spr_set.1
         17:C945  20 DD E7   			call	_spr_set.1
 5791                        	
 5792                        		.dbg	line,	"include\routines_LEVELS.c", 735; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5793                        		__st.umiq	136, _al
         17:C948  A9 88      			lda.l	#136
         17:C94A  85 F8      			sta	_al
 5794                        		__ld.uiq	0
         17:C94C  62         			cla
 5795                        		__call		_spr_ctrl.2
         17:C94D  20 3C E8   			call	_spr_ctrl.2
 5796                        	
 5797                        		.dbg	line,	"include\routines_LEVELS.c", 737; spr_set(chain_id+1);
 5798                        		__ld.um		_chain_id
         17:C950  AD 25 23   			lda	_chain_id
         17:C953  C2         			cly
 5799                        		__add.wi	1
         17:C954  1A         			inc	a
         17:C955  D0 01      			bne	!+
         17:C957  C8         			iny
         17:C958             	!:
 5800                        		__call		_spr_set.1
         17:C958  20 DD E7   			call	_spr_set.1
 5801                        	
 5802                        		.dbg	line,	"include\routines_LEVELS.c", 738; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5803                        		__st.umiq	136, _al
         17:C95B  A9 88      			lda.l	#136
         17:C95D  85 F8      			sta	_al
 5804                        		__ld.uiq	0
         17:C95F  62         			cla
 5805                        		__call		_spr_ctrl.2
         17:C960  20 3C E8   			call	_spr_ctrl.2
 5806                        	
 5807                        		.dbg	line,	"include\routines_LEVELS.c", 740; spr_set(chain_id+2);
 5808                        		__ld.um		_chain_id
         17:C963  AD 25 23   			lda	_chain_id
         17:C966  C2         			cly
 5809                        		__add.wi	2
         17:C967  18         			clc
         17:C968  69 02      			adc.l	#2
         17:C96A  90 01      			bcc	!+
         17:C96C  C8         			iny
         17:C96D             	!:
 5810                        		__call		_spr_set.1
         17:C96D  20 DD E7   			call	_spr_set.1
 5811                        	
 5812                        		.dbg	line,	"include\routines_LEVELS.c", 741; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5813                        		__st.umiq	136, _al
         17:C970  A9 88      			lda.l	#136
         17:C972  85 F8      			sta	_al
 5814                        		__ld.uiq	0
         17:C974  62         			cla
 5815                        		__call		_spr_ctrl.2
         17:C975  20 3C E8   			call	_spr_ctrl.2
 5816                        	
 5817                        		.dbg	line,	"include\routines_LEVELS.c", 743; spr_set(weapon_id);
 5818                        		__ld.umq	_weapon_id
         17:C978  AD 26 23   			lda	_weapon_id
 5819                        		__call		_spr_set.1
         17:C97B  20 DD E7   			call	_spr_set.1
 5820                        	
 5821                        		.dbg	line,	"include\routines_LEVELS.c", 744; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5822                        		__st.umiq	136, _al
         17:C97E  A9 88      			lda.l	#136
         17:C980  85 F8      			sta	_al
 5823                        		__ld.uiq	0
         17:C982  62         			cla
 5824                        		__call		_spr_ctrl.2
         17:C983  20 3C E8   			call	_spr_ctrl.2
 5825                        	
 5826                        		.dbg	line,	"include\routines_LEVELS.c", 745; spr_x(player_pos_x-5);
 5827                        		__ld.wm		_player_pos_x
         17:C986  AD DA 24   			lda.l	_player_pos_x
         17:C989  AC DB 24   			ldy.h	_player_pos_x
 5828                        		__sub.wi	5
         17:C98C  38         			sec
         17:C98D  E9 05      			sbc.l	#5
         17:C98F  B0 01      			bcs	!+
         17:C991  88         			dey
         17:C992             	!:
 5829                        		__call		_spr_x.1
         17:C992  20 0A E8   			call	_spr_x.1
 5830                        	
 5831                        		.dbg	line,	"include\routines_LEVELS.c", 746; }
 5832                        	
 5833                        		.dbg	line,	"include\routines_LEVELS.c", 748; if(player_index_jump > 11 && player_index_jump < 15)
 5834    17:C995             	.LL152:
 5835                        		__ld.umq	_player_index_jump
         17:C995  AD 1C 23   			lda	_player_index_jump
 5836                        		__ugt_b.uiq	11
         17:C998  18         			clc			; Subtract integer+1 from A.
         17:C999  E9 0B      			sbc	#11		; CS if A > integer.
 5837                        		__bfalse	.LL154
         17:C99B  90 09      			bcc	.LL154
 5838                        		__ld.umq	_player_index_jump
         17:C99D  AD 1C 23   			lda	_player_index_jump
 5839                        		__ult_b.uiq	15
         17:C9A0  C9 0F      			cmp	#15		; Subtract integer from A.
         17:C9A2  6A         			ror	a		; CC if A < integer.
         17:C9A3  49 80      			eor	#$80
         17:C9A5  2A         			rol	a
 5840    17:C9A6             	.LL154:
 5841                        		__bfalse	.LL153
         17:C9A6  B0 03 4C 3E			bcc	.LL153
         17:C9AA  D2          
 5842                        	
 5843                        		.dbg	line,	"include\routines_LEVELS.c", 749; {
 5844                        	
 5845                        		.dbg	line,	"include\routines_LEVELS.c", 750; player_state = STATE_JUMP_RIGHT;                        
 5846                        		__st.umiq	5, _player_state
         17:C9AB  A9 05      			lda.l	#5
         17:C9AD  8D 18 23   			sta	_player_state
 5847                        	
 5848                        		.dbg	line,	"include\routines_LEVELS.c", 751; }
 5849                        	
 5850                        		.dbg	line,	"include\routines_LEVELS.c", 752; }
 5851    17:C9B0             	.LL153	.alias		.LL155
 5852                        	
 5853                        		.dbg	line,	"include\routines_LEVELS.c", 753; }
 5854    17:C9B0             	.LL151	.alias		.LL155
 5855                        	
 5856                        		.dbg	line,	"include\routines_LEVELS.c", 756; else if(player_state == STATE_JUMP_LEFT)
 5857                        		__bra		.LL155
         17:C9B0  4C 3E D2   			bra	.LL155
 5858    17:C9B3             	.LL150:
 5859                        		__ld.umq	_player_state
         17:C9B3  AD 18 23   			lda	_player_state
 5860                        		__equ_b.uiq	6
         17:C9B6  C9 06      			cmp	#6
         17:C9B8  F0 01      			beq	!+
         17:C9BA  18         			clc
         17:C9BB             	!:
 5861                        		__bfalse	.LL156
         17:C9BB  90 7B      			bcc	.LL156
 5862                        	
 5863                        		.dbg	line,	"include\routines_LEVELS.c", 757; {
 5864                        	
 5865                        		.dbg	line,	"include\routines_LEVELS.c", 758; if(player_axis == AXIS_LEFT)
 5866                        		__ld.umq	_player_axis
         17:C9BD  AD 19 23   			lda	_player_axis
 5867                        		__equ_b.uiq	1
         17:C9C0  C9 01      			cmp	#1
         17:C9C2  F0 01      			beq	!+
         17:C9C4  18         			clc
         17:C9C5             	!:
 5868                        		__bfalse	.LL157
         17:C9C5  B0 03 4C 3E			bcc	.LL157
         17:C9C9  D2          
 5869                        	
 5870                        		.dbg	line,	"include\routines_LEVELS.c", 759; {
 5871                        	
 5872                        		.dbg	line,	"include\routines_LEVELS.c", 760; player_axis = AXIS_RIGHT;
 5873                        		__st.umiq	0, _player_axis
         17:C9CA  9C 19 23   			stz	_player_axis
 5874                        	
 5875                        		.dbg	line,	"include\routines_LEVELS.c", 761; player_previous_axis = player_axis;
 5876                        		__ld.um		_player_axis
         17:C9CD  AD 19 23   			lda	_player_axis
         17:C9D0  C2         			cly
 5877                        		__st.umq	_player_previous_axis
         17:C9D1  8D 1A 23   			sta	_player_previous_axis
 5878                        	
 5879                        		.dbg	line,	"include\routines_LEVELS.c", 763; spr_set(player_id);
 5880                        		__ld.umq	_player_id
         17:C9D4  AD 17 23   			lda	_player_id
 5881                        		__call		_spr_set.1
         17:C9D7  20 DD E7   			call	_spr_set.1
 5882                        	
 5883                        		.dbg	line,	"include\routines_LEVELS.c", 764; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5884                        		__st.umiq	136, _al
         17:C9DA  A9 88      			lda.l	#136
         17:C9DC  85 F8      			sta	_al
 5885                        		__ld.uiq	0
         17:C9DE  62         			cla
 5886                        		__call		_spr_ctrl.2
         17:C9DF  20 3C E8   			call	_spr_ctrl.2
 5887                        	
 5888                        		.dbg	line,	"include\routines_LEVELS.c", 766; spr_set(chain_id);
 5889                        		__ld.umq	_chain_id
         17:C9E2  AD 25 23   			lda	_chain_id
 5890                        		__call		_spr_set.1
         17:C9E5  20 DD E7   			call	_spr_set.1
 5891                        	
 5892                        		.dbg	line,	"include\routines_LEVELS.c", 767; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5893                        		__st.umiq	136, _al
         17:C9E8  A9 88      			lda.l	#136
         17:C9EA  85 F8      			sta	_al
 5894                        		__ld.uiq	0
         17:C9EC  62         			cla
 5895                        		__call		_spr_ctrl.2
         17:C9ED  20 3C E8   			call	_spr_ctrl.2
 5896                        	
 5897                        		.dbg	line,	"include\routines_LEVELS.c", 769; spr_set(chain_id+1);
 5898                        		__ld.um		_chain_id
         17:C9F0  AD 25 23   			lda	_chain_id
         17:C9F3  C2         			cly
 5899                        		__add.wi	1
         17:C9F4  1A         			inc	a
         17:C9F5  D0 01      			bne	!+
         17:C9F7  C8         			iny
         17:C9F8             	!:
 5900                        		__call		_spr_set.1
         17:C9F8  20 DD E7   			call	_spr_set.1
 5901                        	
 5902                        		.dbg	line,	"include\routines_LEVELS.c", 770; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5903                        		__st.umiq	136, _al
         17:C9FB  A9 88      			lda.l	#136
         17:C9FD  85 F8      			sta	_al
 5904                        		__ld.uiq	0
         17:C9FF  62         			cla
 5905                        		__call		_spr_ctrl.2
         17:CA00  20 3C E8   			call	_spr_ctrl.2
 5906                        	
 5907                        		.dbg	line,	"include\routines_LEVELS.c", 772; spr_set(chain_id+2);
 5908                        		__ld.um		_chain_id
         17:CA03  AD 25 23   			lda	_chain_id
         17:CA06  C2         			cly
 5909                        		__add.wi	2
         17:CA07  18         			clc
         17:CA08  69 02      			adc.l	#2
         17:CA0A  90 01      			bcc	!+
         17:CA0C  C8         			iny
         17:CA0D             	!:
 5910                        		__call		_spr_set.1
         17:CA0D  20 DD E7   			call	_spr_set.1
 5911                        	
 5912                        		.dbg	line,	"include\routines_LEVELS.c", 773; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5913                        		__st.umiq	136, _al
         17:CA10  A9 88      			lda.l	#136
         17:CA12  85 F8      			sta	_al
 5914                        		__ld.uiq	0
         17:CA14  62         			cla
 5915                        		__call		_spr_ctrl.2
         17:CA15  20 3C E8   			call	_spr_ctrl.2
 5916                        	
 5917                        		.dbg	line,	"include\routines_LEVELS.c", 775; spr_set(weapon_id);
 5918                        		__ld.umq	_weapon_id
         17:CA18  AD 26 23   			lda	_weapon_id
 5919                        		__call		_spr_set.1
         17:CA1B  20 DD E7   			call	_spr_set.1
 5920                        	
 5921                        		.dbg	line,	"include\routines_LEVELS.c", 776; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5922                        		__st.umiq	136, _al
         17:CA1E  A9 88      			lda.l	#136
         17:CA20  85 F8      			sta	_al
 5923                        		__ld.uiq	0
         17:CA22  62         			cla
 5924                        		__call		_spr_ctrl.2
         17:CA23  20 3C E8   			call	_spr_ctrl.2
 5925                        	
 5926                        		.dbg	line,	"include\routines_LEVELS.c", 777; spr_x(player_pos_x-5);
 5927                        		__ld.wm		_player_pos_x
         17:CA26  AD DA 24   			lda.l	_player_pos_x
         17:CA29  AC DB 24   			ldy.h	_player_pos_x
 5928                        		__sub.wi	5
         17:CA2C  38         			sec
         17:CA2D  E9 05      			sbc.l	#5
         17:CA2F  B0 01      			bcs	!+
         17:CA31  88         			dey
         17:CA32             	!:
 5929                        		__call		_spr_x.1
         17:CA32  20 0A E8   			call	_spr_x.1
 5930                        	
 5931                        		.dbg	line,	"include\routines_LEVELS.c", 778; }
 5932                        	
 5933                        		.dbg	line,	"include\routines_LEVELS.c", 779; }
 5934    17:CA35             	.LL157	.alias		.LL158
 5935                        	
 5936                        		.dbg	line,	"include\routines_LEVELS.c", 782; else if(player_state == STATE_CROUCH)
 5937                        		__bra		.LL158
         17:CA35  4C 3E D2   			bra	.LL158
 5938    17:CA38             	.LL156:
 5939                        		__ld.umq	_player_state
         17:CA38  AD 18 23   			lda	_player_state
 5940                        		__equ_b.uiq	7
         17:CA3B  C9 07      			cmp	#7
         17:CA3D  F0 01      			beq	!+
         17:CA3F  18         			clc
         17:CA40             	!:
 5941                        		__bfalse	.LL159
         17:CA40  90 7B      			bcc	.LL159
 5942                        	
 5943                        		.dbg	line,	"include\routines_LEVELS.c", 783; {
 5944                        	
 5945                        		.dbg	line,	"include\routines_LEVELS.c", 784; if(player_axis == AXIS_LEFT)
 5946                        		__ld.umq	_player_axis
         17:CA42  AD 19 23   			lda	_player_axis
 5947                        		__equ_b.uiq	1
         17:CA45  C9 01      			cmp	#1
         17:CA47  F0 01      			beq	!+
         17:CA49  18         			clc
         17:CA4A             	!:
 5948                        		__bfalse	.LL160
         17:CA4A  B0 03 4C 3E			bcc	.LL160
         17:CA4E  D2          
 5949                        	
 5950                        		.dbg	line,	"include\routines_LEVELS.c", 785; {
 5951                        	
 5952                        		.dbg	line,	"include\routines_LEVELS.c", 786; player_axis = AXIS_RIGHT;
 5953                        		__st.umiq	0, _player_axis
         17:CA4F  9C 19 23   			stz	_player_axis
 5954                        	
 5955                        		.dbg	line,	"include\routines_LEVELS.c", 787; player_previous_axis = player_axis;
 5956                        		__ld.um		_player_axis
         17:CA52  AD 19 23   			lda	_player_axis
         17:CA55  C2         			cly
 5957                        		__st.umq	_player_previous_axis
         17:CA56  8D 1A 23   			sta	_player_previous_axis
 5958                        	
 5959                        		.dbg	line,	"include\routines_LEVELS.c", 789; spr_set(player_id);
 5960                        		__ld.umq	_player_id
         17:CA59  AD 17 23   			lda	_player_id
 5961                        		__call		_spr_set.1
         17:CA5C  20 DD E7   			call	_spr_set.1
 5962                        	
 5963                        		.dbg	line,	"include\routines_LEVELS.c", 790; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5964                        		__st.umiq	136, _al
         17:CA5F  A9 88      			lda.l	#136
         17:CA61  85 F8      			sta	_al
 5965                        		__ld.uiq	0
         17:CA63  62         			cla
 5966                        		__call		_spr_ctrl.2
         17:CA64  20 3C E8   			call	_spr_ctrl.2
 5967                        	
 5968                        		.dbg	line,	"include\routines_LEVELS.c", 792; spr_set(chain_id);
 5969                        		__ld.umq	_chain_id
         17:CA67  AD 25 23   			lda	_chain_id
 5970                        		__call		_spr_set.1
         17:CA6A  20 DD E7   			call	_spr_set.1
 5971                        	
 5972                        		.dbg	line,	"include\routines_LEVELS.c", 793; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5973                        		__st.umiq	136, _al
         17:CA6D  A9 88      			lda.l	#136
         17:CA6F  85 F8      			sta	_al
 5974                        		__ld.uiq	0
         17:CA71  62         			cla
 5975                        		__call		_spr_ctrl.2
         17:CA72  20 3C E8   			call	_spr_ctrl.2
 5976                        	
 5977                        		.dbg	line,	"include\routines_LEVELS.c", 795; spr_set(chain_id+1);
 5978                        		__ld.um		_chain_id
         17:CA75  AD 25 23   			lda	_chain_id
         17:CA78  C2         			cly
 5979                        		__add.wi	1
         17:CA79  1A         			inc	a
         17:CA7A  D0 01      			bne	!+
         17:CA7C  C8         			iny
         17:CA7D             	!:
 5980                        		__call		_spr_set.1
         17:CA7D  20 DD E7   			call	_spr_set.1
 5981                        	
 5982                        		.dbg	line,	"include\routines_LEVELS.c", 796; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5983                        		__st.umiq	136, _al
         17:CA80  A9 88      			lda.l	#136
         17:CA82  85 F8      			sta	_al
 5984                        		__ld.uiq	0
         17:CA84  62         			cla
 5985                        		__call		_spr_ctrl.2
         17:CA85  20 3C E8   			call	_spr_ctrl.2
 5986                        	
 5987                        		.dbg	line,	"include\routines_LEVELS.c", 798; spr_set(chain_id+2);
 5988                        		__ld.um		_chain_id
         17:CA88  AD 25 23   			lda	_chain_id
         17:CA8B  C2         			cly
 5989                        		__add.wi	2
         17:CA8C  18         			clc
         17:CA8D  69 02      			adc.l	#2
         17:CA8F  90 01      			bcc	!+
         17:CA91  C8         			iny
         17:CA92             	!:
 5990                        		__call		_spr_set.1
         17:CA92  20 DD E7   			call	_spr_set.1
 5991                        	
 5992                        		.dbg	line,	"include\routines_LEVELS.c", 799; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5993                        		__st.umiq	136, _al
         17:CA95  A9 88      			lda.l	#136
         17:CA97  85 F8      			sta	_al
 5994                        		__ld.uiq	0
         17:CA99  62         			cla
 5995                        		__call		_spr_ctrl.2
         17:CA9A  20 3C E8   			call	_spr_ctrl.2
 5996                        	
 5997                        		.dbg	line,	"include\routines_LEVELS.c", 801; spr_set(weapon_id);
 5998                        		__ld.umq	_weapon_id
         17:CA9D  AD 26 23   			lda	_weapon_id
 5999                        		__call		_spr_set.1
         17:CAA0  20 DD E7   			call	_spr_set.1
 6000                        	
 6001                        		.dbg	line,	"include\routines_LEVELS.c", 802; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 6002                        		__st.umiq	136, _al
         17:CAA3  A9 88      			lda.l	#136
         17:CAA5  85 F8      			sta	_al
 6003                        		__ld.uiq	0
         17:CAA7  62         			cla
 6004                        		__call		_spr_ctrl.2
         17:CAA8  20 3C E8   			call	_spr_ctrl.2
 6005                        	
 6006                        		.dbg	line,	"include\routines_LEVELS.c", 803; spr_x(player_pos_x-1);
 6007                        		__ld.wm		_player_pos_x
         17:CAAB  AD DA 24   			lda.l	_player_pos_x
         17:CAAE  AC DB 24   			ldy.h	_player_pos_x
 6008                        		__sub.wi	1
         17:CAB1  38         			sec
         17:CAB2  E9 01      			sbc.l	#1
         17:CAB4  B0 01      			bcs	!+
         17:CAB6  88         			dey
         17:CAB7             	!:
 6009                        		__call		_spr_x.1
         17:CAB7  20 0A E8   			call	_spr_x.1
 6010                        	
 6011                        		.dbg	line,	"include\routines_LEVELS.c", 804; }
 6012                        	
 6013                        		.dbg	line,	"include\routines_LEVELS.c", 805; }
 6014    17:CABA             	.LL160	.alias		.LL161
 6015                        	
 6016                        		.dbg	line,	"include\routines_LEVELS.c", 808; else if(player_state == STATE_FALL)
 6017                        		__bra		.LL161
         17:CABA  4C 3E D2   			bra	.LL161
 6018    17:CABD             	.LL159:
 6019                        		__ld.umq	_player_state
         17:CABD  AD 18 23   			lda	_player_state
 6020                        		__equ_b.uiq	9
         17:CAC0  C9 09      			cmp	#9
         17:CAC2  F0 01      			beq	!+
         17:CAC4  18         			clc
         17:CAC5             	!:
 6021                        		__bfalse	.LL162
         17:CAC5  B0 03 4C 51			bcc	.LL162
         17:CAC9  CB          
 6022                        	
 6023                        		.dbg	line,	"include\routines_LEVELS.c", 809; {
 6024                        	
 6025                        		.dbg	line,	"include\routines_LEVELS.c", 810; if(player_attack == FALSE)
 6026                        		__not.um	_player_attack
         17:CACA  AD 20 23   			lda	_player_attack
         17:CACD  18         			clc
         17:CACE  D0 01      			bne	!+
         17:CAD0  38         			sec
         17:CAD1             	!:
 6027                        		__bfalse	.LL163
         17:CAD1  B0 03 4C 3E			bcc	.LL163
         17:CAD5  D2          
 6028                        	
 6029                        		.dbg	line,	"include\routines_LEVELS.c", 811; {
 6030                        	
 6031                        		.dbg	line,	"include\routines_LEVELS.c", 812; if(player_axis == AXIS_LEFT)
 6032                        		__ld.umq	_player_axis
         17:CAD6  AD 19 23   			lda	_player_axis
 6033                        		__equ_b.uiq	1
         17:CAD9  C9 01      			cmp	#1
         17:CADB  F0 01      			beq	!+
         17:CADD  18         			clc
         17:CADE             	!:
 6034                        		__bfalse	.LL164
         17:CADE  B0 03 4C 3E			bcc	.LL164
         17:CAE2  D2          
 6035                        	
 6036                        		.dbg	line,	"include\routines_LEVELS.c", 813; {
 6037                        	
 6038                        		.dbg	line,	"include\routines_LEVELS.c", 814; player_axis = AXIS_RIGHT;
 6039                        		__st.umiq	0, _player_axis
         17:CAE3  9C 19 23   			stz	_player_axis
 6040                        	
 6041                        		.dbg	line,	"include\routines_LEVELS.c", 815; player_previous_axis = player_axis;
 6042                        		__ld.um		_player_axis
         17:CAE6  AD 19 23   			lda	_player_axis
         17:CAE9  C2         			cly
 6043                        		__st.umq	_player_previous_axis
         17:CAEA  8D 1A 23   			sta	_player_previous_axis
 6044                        	
 6045                        		.dbg	line,	"include\routines_LEVELS.c", 817; spr_set(player_id);
 6046                        		__ld.umq	_player_id
         17:CAED  AD 17 23   			lda	_player_id
 6047                        		__call		_spr_set.1
         17:CAF0  20 DD E7   			call	_spr_set.1
 6048                        	
 6049                        		.dbg	line,	"include\routines_LEVELS.c", 818; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 6050                        		__st.umiq	136, _al
         17:CAF3  A9 88      			lda.l	#136
         17:CAF5  85 F8      			sta	_al
 6051                        		__ld.uiq	0
         17:CAF7  62         			cla
 6052                        		__call		_spr_ctrl.2
         17:CAF8  20 3C E8   			call	_spr_ctrl.2
 6053                        	
 6054                        		.dbg	line,	"include\routines_LEVELS.c", 820; spr_set(chain_id);
 6055                        		__ld.umq	_chain_id
         17:CAFB  AD 25 23   			lda	_chain_id
 6056                        		__call		_spr_set.1
         17:CAFE  20 DD E7   			call	_spr_set.1
 6057                        	
 6058                        		.dbg	line,	"include\routines_LEVELS.c", 821; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 6059                        		__st.umiq	136, _al
         17:CB01  A9 88      			lda.l	#136
         17:CB03  85 F8      			sta	_al
 6060                        		__ld.uiq	0
         17:CB05  62         			cla
 6061                        		__call		_spr_ctrl.2
         17:CB06  20 3C E8   			call	_spr_ctrl.2
 6062                        	
 6063                        		.dbg	line,	"include\routines_LEVELS.c", 823; spr_set(chain_id+1);
 6064                        		__ld.um		_chain_id
         17:CB09  AD 25 23   			lda	_chain_id
         17:CB0C  C2         			cly
 6065                        		__add.wi	1
         17:CB0D  1A         			inc	a
         17:CB0E  D0 01      			bne	!+
         17:CB10  C8         			iny
         17:CB11             	!:
 6066                        		__call		_spr_set.1
         17:CB11  20 DD E7   			call	_spr_set.1
 6067                        	
 6068                        		.dbg	line,	"include\routines_LEVELS.c", 824; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 6069                        		__st.umiq	136, _al
         17:CB14  A9 88      			lda.l	#136
         17:CB16  85 F8      			sta	_al
 6070                        		__ld.uiq	0
         17:CB18  62         			cla
 6071                        		__call		_spr_ctrl.2
         17:CB19  20 3C E8   			call	_spr_ctrl.2
 6072                        	
 6073                        		.dbg	line,	"include\routines_LEVELS.c", 826; spr_set(chain_id+2);
 6074                        		__ld.um		_chain_id
         17:CB1C  AD 25 23   			lda	_chain_id
         17:CB1F  C2         			cly
 6075                        		__add.wi	2
         17:CB20  18         			clc
         17:CB21  69 02      			adc.l	#2
         17:CB23  90 01      			bcc	!+
         17:CB25  C8         			iny
         17:CB26             	!:
 6076                        		__call		_spr_set.1
         17:CB26  20 DD E7   			call	_spr_set.1
 6077                        	
 6078                        		.dbg	line,	"include\routines_LEVELS.c", 827; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 6079                        		__st.umiq	136, _al
         17:CB29  A9 88      			lda.l	#136
         17:CB2B  85 F8      			sta	_al
 6080                        		__ld.uiq	0
         17:CB2D  62         			cla
 6081                        		__call		_spr_ctrl.2
         17:CB2E  20 3C E8   			call	_spr_ctrl.2
 6082                        	
 6083                        		.dbg	line,	"include\routines_LEVELS.c", 829; spr_set(weapon_id);
 6084                        		__ld.umq	_weapon_id
         17:CB31  AD 26 23   			lda	_weapon_id
 6085                        		__call		_spr_set.1
         17:CB34  20 DD E7   			call	_spr_set.1
 6086                        	
 6087                        		.dbg	line,	"include\routines_LEVELS.c", 830; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 6088                        		__st.umiq	136, _al
         17:CB37  A9 88      			lda.l	#136
         17:CB39  85 F8      			sta	_al
 6089                        		__ld.uiq	0
         17:CB3B  62         			cla
 6090                        		__call		_spr_ctrl.2
         17:CB3C  20 3C E8   			call	_spr_ctrl.2
 6091                        	
 6092                        		.dbg	line,	"include\routines_LEVELS.c", 831; spr_x(player_pos_x-4);
 6093                        		__ld.wm		_player_pos_x
         17:CB3F  AD DA 24   			lda.l	_player_pos_x
         17:CB42  AC DB 24   			ldy.h	_player_pos_x
 6094                        		__sub.wi	4
         17:CB45  38         			sec
         17:CB46  E9 04      			sbc.l	#4
         17:CB48  B0 01      			bcs	!+
         17:CB4A  88         			dey
         17:CB4B             	!:
 6095                        		__call		_spr_x.1
         17:CB4B  20 0A E8   			call	_spr_x.1
 6096                        	
 6097                        		.dbg	line,	"include\routines_LEVELS.c", 832; }
 6098                        	
 6099                        		.dbg	line,	"include\routines_LEVELS.c", 833; }
 6100    17:CB4E             	.LL164	.alias		.LL165
 6101                        	
 6102                        		.dbg	line,	"include\routines_LEVELS.c", 834; }
 6103    17:CB4E             	.LL163	.alias		.LL165
 6104                        	
 6105                        		.dbg	line,	"include\routines_LEVELS.c", 837; else if(player_state == STATE_HANG)
 6106                        		__bra		.LL165
         17:CB4E  4C 3E D2   			bra	.LL165
 6107    17:CB51             	.LL162:
 6108                        		__ld.umq	_player_state
         17:CB51  AD 18 23   			lda	_player_state
 6109                        		__equ_b.uiq	10
         17:CB54  C9 0A      			cmp	#10
         17:CB56  F0 01      			beq	!+
         17:CB58  18         			clc
         17:CB59             	!:
 6110                        		__bfalse	.LL166
         17:CB59  B0 03 4C E5			bcc	.LL166
         17:CB5D  CB          
 6111                        	
 6112                        		.dbg	line,	"include\routines_LEVELS.c", 838; {
 6113                        	
 6114                        		.dbg	line,	"include\routines_LEVELS.c", 839; if(player_attack == FALSE)
 6115                        		__not.um	_player_attack
         17:CB5E  AD 20 23   			lda	_player_attack
         17:CB61  18         			clc
         17:CB62  D0 01      			bne	!+
         17:CB64  38         			sec
         17:CB65             	!:
 6116                        		__bfalse	.LL167
         17:CB65  B0 03 4C 3E			bcc	.LL167
         17:CB69  D2          
 6117                        	
 6118                        		.dbg	line,	"include\routines_LEVELS.c", 840; {
 6119                        	
 6120                        		.dbg	line,	"include\routines_LEVELS.c", 841; if(player_axis == AXIS_LEFT)
 6121                        		__ld.umq	_player_axis
         17:CB6A  AD 19 23   			lda	_player_axis
 6122                        		__equ_b.uiq	1
         17:CB6D  C9 01      			cmp	#1
         17:CB6F  F0 01      			beq	!+
         17:CB71  18         			clc
         17:CB72             	!:
 6123                        		__bfalse	.LL168
         17:CB72  B0 03 4C 3E			bcc	.LL168
         17:CB76  D2          
 6124                        	
 6125                        		.dbg	line,	"include\routines_LEVELS.c", 842; {
 6126                        	
 6127                        		.dbg	line,	"include\routines_LEVELS.c", 843; player_axis = AXIS_RIGHT;
 6128                        		__st.umiq	0, _player_axis
         17:CB77  9C 19 23   			stz	_player_axis
 6129                        	
 6130                        		.dbg	line,	"include\routines_LEVELS.c", 844; player_previous_axis = player_axis;
 6131                        		__ld.um		_player_axis
         17:CB7A  AD 19 23   			lda	_player_axis
         17:CB7D  C2         			cly
 6132                        		__st.umq	_player_previous_axis
         17:CB7E  8D 1A 23   			sta	_player_previous_axis
 6133                        	
 6134                        		.dbg	line,	"include\routines_LEVELS.c", 846; spr_set(player_id);
 6135                        		__ld.umq	_player_id
         17:CB81  AD 17 23   			lda	_player_id
 6136                        		__call		_spr_set.1
         17:CB84  20 DD E7   			call	_spr_set.1
 6137                        	
 6138                        		.dbg	line,	"include\routines_LEVELS.c", 847; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 6139                        		__st.umiq	136, _al
         17:CB87  A9 88      			lda.l	#136
         17:CB89  85 F8      			sta	_al
 6140                        		__ld.uiq	0
         17:CB8B  62         			cla
 6141                        		__call		_spr_ctrl.2
         17:CB8C  20 3C E8   			call	_spr_ctrl.2
 6142                        	
 6143                        		.dbg	line,	"include\routines_LEVELS.c", 849; spr_set(chain_id);
 6144                        		__ld.umq	_chain_id
         17:CB8F  AD 25 23   			lda	_chain_id
 6145                        		__call		_spr_set.1
         17:CB92  20 DD E7   			call	_spr_set.1
 6146                        	
 6147                        		.dbg	line,	"include\routines_LEVELS.c", 850; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 6148                        		__st.umiq	136, _al
         17:CB95  A9 88      			lda.l	#136
         17:CB97  85 F8      			sta	_al
 6149                        		__ld.uiq	0
         17:CB99  62         			cla
 6150                        		__call		_spr_ctrl.2
         17:CB9A  20 3C E8   			call	_spr_ctrl.2
 6151                        	
 6152                        		.dbg	line,	"include\routines_LEVELS.c", 852; spr_set(chain_id+1);
 6153                        		__ld.um		_chain_id
         17:CB9D  AD 25 23   			lda	_chain_id
         17:CBA0  C2         			cly
 6154                        		__add.wi	1
         17:CBA1  1A         			inc	a
         17:CBA2  D0 01      			bne	!+
         17:CBA4  C8         			iny
         17:CBA5             	!:
 6155                        		__call		_spr_set.1
         17:CBA5  20 DD E7   			call	_spr_set.1
 6156                        	
 6157                        		.dbg	line,	"include\routines_LEVELS.c", 853; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 6158                        		__st.umiq	136, _al
         17:CBA8  A9 88      			lda.l	#136
         17:CBAA  85 F8      			sta	_al
 6159                        		__ld.uiq	0
         17:CBAC  62         			cla
 6160                        		__call		_spr_ctrl.2
         17:CBAD  20 3C E8   			call	_spr_ctrl.2
 6161                        	
 6162                        		.dbg	line,	"include\routines_LEVELS.c", 855; spr_set(chain_id+2);
 6163                        		__ld.um		_chain_id
         17:CBB0  AD 25 23   			lda	_chain_id
         17:CBB3  C2         			cly
 6164                        		__add.wi	2
         17:CBB4  18         			clc
         17:CBB5  69 02      			adc.l	#2
         17:CBB7  90 01      			bcc	!+
         17:CBB9  C8         			iny
         17:CBBA             	!:
 6165                        		__call		_spr_set.1
         17:CBBA  20 DD E7   			call	_spr_set.1
 6166                        	
 6167                        		.dbg	line,	"include\routines_LEVELS.c", 856; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 6168                        		__st.umiq	136, _al
         17:CBBD  A9 88      			lda.l	#136
         17:CBBF  85 F8      			sta	_al
 6169                        		__ld.uiq	0
         17:CBC1  62         			cla
 6170                        		__call		_spr_ctrl.2
         17:CBC2  20 3C E8   			call	_spr_ctrl.2
 6171                        	
 6172                        		.dbg	line,	"include\routines_LEVELS.c", 858; spr_set(weapon_id);
 6173                        		__ld.umq	_weapon_id
         17:CBC5  AD 26 23   			lda	_weapon_id
 6174                        		__call		_spr_set.1
         17:CBC8  20 DD E7   			call	_spr_set.1
 6175                        	
 6176                        		.dbg	line,	"include\routines_LEVELS.c", 859; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 6177                        		__st.umiq	136, _al
         17:CBCB  A9 88      			lda.l	#136
         17:CBCD  85 F8      			sta	_al
 6178                        		__ld.uiq	0
         17:CBCF  62         			cla
 6179                        		__call		_spr_ctrl.2
         17:CBD0  20 3C E8   			call	_spr_ctrl.2
 6180                        	
 6181                        		.dbg	line,	"include\routines_LEVELS.c", 860; spr_x(player_pos_x+17);
 6182                        		__ld.wm		_player_pos_x
         17:CBD3  AD DA 24   			lda.l	_player_pos_x
         17:CBD6  AC DB 24   			ldy.h	_player_pos_x
 6183                        		__add.wi	17
         17:CBD9  18         			clc
         17:CBDA  69 11      			adc.l	#17
         17:CBDC  90 01      			bcc	!+
         17:CBDE  C8         			iny
         17:CBDF             	!:
 6184                        		__call		_spr_x.1
         17:CBDF  20 0A E8   			call	_spr_x.1
 6185                        	
 6186                        		.dbg	line,	"include\routines_LEVELS.c", 861; }
 6187                        	
 6188                        		.dbg	line,	"include\routines_LEVELS.c", 862; }
 6189    17:CBE2             	.LL168	.alias		.LL169
 6190                        	
 6191                        		.dbg	line,	"include\routines_LEVELS.c", 863; }
 6192    17:CBE2             	.LL167	.alias		.LL169
 6193                        	
 6194                        		.dbg	line,	"include\routines_LEVELS.c", 866; else if(player_state == STATE_CLIMB_UP || player_state == STATE_CLIMB_DOWN)
 6195                        		__bra		.LL169
         17:CBE2  4C 3E D2   			bra	.LL169
 6196    17:CBE5             	.LL166:
 6197                        		__ld.umq	_player_state
         17:CBE5  AD 18 23   			lda	_player_state
 6198                        		__equ_b.uiq	11
         17:CBE8  C9 0B      			cmp	#11
         17:CBEA  F0 01      			beq	!+
         17:CBEC  18         			clc
         17:CBED             	!:
 6199                        		__btrue		.LL171
         17:CBED  B0 08      			bcs	.LL171
 6200                        		__ld.umq	_player_state
         17:CBEF  AD 18 23   			lda	_player_state
 6201                        		__equ_b.uiq	12
         17:CBF2  C9 0C      			cmp	#12
         17:CBF4  F0 01      			beq	!+
         17:CBF6  18         			clc
         17:CBF7             	!:
 6202    17:CBF7             	.LL171:
 6203                        		__bfalse	.LL170
         17:CBF7  B0 03 4C 3E			bcc	.LL170
         17:CBFB  D2          
 6204                        	
 6205                        		.dbg	line,	"include\routines_LEVELS.c", 867; {
 6206                        	
 6207                        		.dbg	line,	"include\routines_LEVELS.c", 868; spr_set(player_id);
 6208                        		__ld.umq	_player_id
         17:CBFC  AD 17 23   			lda	_player_id
 6209                        		__call		_spr_set.1
         17:CBFF  20 DD E7   			call	_spr_set.1
 6210                        	
 6211                        		.dbg	line,	"include\routines_LEVELS.c", 869; spr_pattern(PLAYER_HANG_VRAM_ADR);
 6212                        		__ld.wi		7424
         17:CC02  62         			cla
         17:CC03  A0 1D      			ldy.h	#7424
 6213                        		__call		_spr_pattern.1
         17:CC05  20 26 E8   			call	_spr_pattern.1
 6214                        	
 6215                        		.dbg	line,	"include\routines_LEVELS.c", 870; player_counter_anim = 0;
 6216                        		__st.umiq	0, _player_counter_anim
         17:CC08  9C 1B 23   			stz	_player_counter_anim
 6217                        	
 6218                        		.dbg	line,	"include\routines_LEVELS.c", 871; player_state = STATE_HANG;
 6219                        		__st.umiq	10, _player_state
         17:CC0B  A9 0A      			lda.l	#10
         17:CC0D  8D 18 23   			sta	_player_state
 6220                        	
 6221                        		.dbg	line,	"include\routines_LEVELS.c", 872; }
 6222                        	
 6223                        		.dbg	line,	"include\routines_LEVELS.c", 873; }
 6224    17:CC10             	.LL170	.alias		.LL172
 6225    17:CC10             	.LL169	.alias		.LL172
 6226    17:CC10             	.LL165	.alias		.LL172
 6227    17:CC10             	.LL161	.alias		.LL172
 6228    17:CC10             	.LL158	.alias		.LL172
 6229    17:CC10             	.LL155	.alias		.LL172
 6230    17:CC10             	.LL149	.alias		.LL172
 6231                        	
 6232                        		.dbg	line,	"include\routines_LEVELS.c", 876; //--------------------------------------------------------------------------------------//
 6233                        	
 6234                        		.dbg	line,	"include\routines_LEVELS.c", 877; //                                     LEFT BUTTON                                      //
 6235                        	
 6236                        		.dbg	line,	"include\routines_LEVELS.c", 878; //--------------------------------------------------------------------------------------//
 6237                        	
 6238                        		.dbg	line,	"include\routines_LEVELS.c", 880; else if(joy(JOYPAD_1) & JOY_LEFT)
 6239                        		__bra		.LL172
         17:CC10  4C 3E D2   			bra	.LL172
 6240    17:CC13             	.LL144:
 6241                        		__ld.uiq	0
         17:CC13  62         			cla
 6242                        		 _joy.1
         17:CC14  AA         			tax
         17:CC15  BD 28 22   			lda	joynow, x
         17:CC18  BC D3 22   			ldy	joy6now, x
 6243                        		__tand.wi	128
         17:CC1B  29 80      			and	#128
         17:CC1D  C9 01      	!:		cmp	#1
 6244                        		__bfalse	.LL173
         17:CC1F  B0 03 4C E7			bcc	.LL173
         17:CC23  CF          
 6245                        	
 6246                        		.dbg	line,	"include\routines_LEVELS.c", 881; {
 6247                        	
 6248                        		.dbg	line,	"include\routines_LEVELS.c", 882; if(player_state == STATE_IDLE || player_state == STATE_WALK)
 6249                        		__not.um	_player_state
         17:CC24  AD 18 23   			lda	_player_state
         17:CC27  18         			clc
         17:CC28  D0 01      			bne	!+
         17:CC2A  38         			sec
         17:CC2B             	!:
 6250                        		__btrue		.LL175
         17:CC2B  B0 08      			bcs	.LL175
 6251                        		__ld.umq	_player_state
         17:CC2D  AD 18 23   			lda	_player_state
 6252                        		__equ_b.uiq	1
         17:CC30  C9 01      			cmp	#1
         17:CC32  F0 01      			beq	!+
         17:CC34  18         			clc
         17:CC35             	!:
 6253    17:CC35             	.LL175:
 6254                        		__bfalse	.LL174
         17:CC35  B0 03 4C DB			bcc	.LL174
         17:CC39  CC          
 6255                        	
 6256                        		.dbg	line,	"include\routines_LEVELS.c", 883; {
 6257                        	
 6258                        		.dbg	line,	"include\routines_LEVELS.c", 884; player_axis = AXIS_LEFT;
 6259                        		__st.umiq	1, _player_axis
         17:CC3A  A9 01      			lda.l	#1
         17:CC3C  8D 19 23   			sta	_player_axis
 6260                        	
 6261                        		.dbg	line,	"include\routines_LEVELS.c", 886; if(player_previous_axis != player_axis)
 6262                        		__ld.umq	_player_previous_axis
         17:CC3F  AD 1A 23   			lda	_player_previous_axis
 6263                        		__neq_b.umq	_player_axis
         17:CC42  38         			sec
         17:CC43  4D 19 23   			eor	_player_axis
         17:CC46  D0 01      			bne	!+
         17:CC48  18         			clc
         17:CC49             	!:
 6264                        		__bfalse	.LL176
         17:CC49  90 6D      			bcc	.LL176
 6265                        	
 6266                        		.dbg	line,	"include\routines_LEVELS.c", 887; {
 6267                        	
 6268                        		.dbg	line,	"include\routines_LEVELS.c", 888; player_previous_axis = player_axis;
 6269                        		__ld.um		_player_axis
         17:CC4B  AD 19 23   			lda	_player_axis
         17:CC4E  C2         			cly
 6270                        		__st.umq	_player_previous_axis
         17:CC4F  8D 1A 23   			sta	_player_previous_axis
 6271                        	
 6272                        		.dbg	line,	"include\routines_LEVELS.c", 890; spr_set(player_id);
 6273                        		__ld.umq	_player_id
         17:CC52  AD 17 23   			lda	_player_id
 6274                        		__call		_spr_set.1
         17:CC55  20 DD E7   			call	_spr_set.1
 6275                        	
 6276                        		.dbg	line,	"include\routines_LEVELS.c", 891; spr_ctrl(FLIP_MAS, FLIP_X);
 6277                        		__st.umiq	136, _al
         17:CC58  A9 88      			lda.l	#136
         17:CC5A  85 F8      			sta	_al
 6278                        		__ld.uiq	8
         17:CC5C  A9 08      			lda	#8
 6279                        		__call		_spr_ctrl.2
         17:CC5E  20 3C E8   			call	_spr_ctrl.2
 6280                        	
 6281                        		.dbg	line,	"include\routines_LEVELS.c", 893; spr_set(chain_id);
 6282                        		__ld.umq	_chain_id
         17:CC61  AD 25 23   			lda	_chain_id
 6283                        		__call		_spr_set.1
         17:CC64  20 DD E7   			call	_spr_set.1
 6284                        	
 6285                        		.dbg	line,	"include\routines_LEVELS.c", 894; spr_ctrl(FLIP_MAS, FLIP_X);
 6286                        		__st.umiq	136, _al
         17:CC67  A9 88      			lda.l	#136
         17:CC69  85 F8      			sta	_al
 6287                        		__ld.uiq	8
         17:CC6B  A9 08      			lda	#8
 6288                        		__call		_spr_ctrl.2
         17:CC6D  20 3C E8   			call	_spr_ctrl.2
 6289                        	
 6290                        		.dbg	line,	"include\routines_LEVELS.c", 896; spr_set(chain_id+1);
 6291                        		__ld.um		_chain_id
         17:CC70  AD 25 23   			lda	_chain_id
         17:CC73  C2         			cly
 6292                        		__add.wi	1
         17:CC74  1A         			inc	a
         17:CC75  D0 01      			bne	!+
         17:CC77  C8         			iny
         17:CC78             	!:
 6293                        		__call		_spr_set.1
         17:CC78  20 DD E7   			call	_spr_set.1
 6294                        	
 6295                        		.dbg	line,	"include\routines_LEVELS.c", 897; spr_ctrl(FLIP_MAS, FLIP_X);
 6296                        		__st.umiq	136, _al
         17:CC7B  A9 88      			lda.l	#136
         17:CC7D  85 F8      			sta	_al
 6297                        		__ld.uiq	8
         17:CC7F  A9 08      			lda	#8
 6298                        		__call		_spr_ctrl.2
         17:CC81  20 3C E8   			call	_spr_ctrl.2
 6299                        	
 6300                        		.dbg	line,	"include\routines_LEVELS.c", 899; spr_set(chain_id+2);
 6301                        		__ld.um		_chain_id
         17:CC84  AD 25 23   			lda	_chain_id
         17:CC87  C2         			cly
 6302                        		__add.wi	2
         17:CC88  18         			clc
         17:CC89  69 02      			adc.l	#2
         17:CC8B  90 01      			bcc	!+
         17:CC8D  C8         			iny
         17:CC8E             	!:
 6303                        		__call		_spr_set.1
         17:CC8E  20 DD E7   			call	_spr_set.1
 6304                        	
 6305                        		.dbg	line,	"include\routines_LEVELS.c", 900; spr_ctrl(FLIP_MAS, FLIP_X);
 6306                        		__st.umiq	136, _al
         17:CC91  A9 88      			lda.l	#136
         17:CC93  85 F8      			sta	_al
 6307                        		__ld.uiq	8
         17:CC95  A9 08      			lda	#8
 6308                        		__call		_spr_ctrl.2
         17:CC97  20 3C E8   			call	_spr_ctrl.2
 6309                        	
 6310                        		.dbg	line,	"include\routines_LEVELS.c", 902; spr_set(weapon_id);
 6311                        		__ld.umq	_weapon_id
         17:CC9A  AD 26 23   			lda	_weapon_id
 6312                        		__call		_spr_set.1
         17:CC9D  20 DD E7   			call	_spr_set.1
 6313                        	
 6314                        		.dbg	line,	"include\routines_LEVELS.c", 903; spr_ctrl(FLIP_MAS, FLIP_X);
 6315                        		__st.umiq	136, _al
         17:CCA0  A9 88      			lda.l	#136
         17:CCA2  85 F8      			sta	_al
 6316                        		__ld.uiq	8
         17:CCA4  A9 08      			lda	#8
 6317                        		__call		_spr_ctrl.2
         17:CCA6  20 3C E8   			call	_spr_ctrl.2
 6318                        	
 6319                        		.dbg	line,	"include\routines_LEVELS.c", 904; spr_x(player_pos_x+15);
 6320                        		__ld.wm		_player_pos_x
         17:CCA9  AD DA 24   			lda.l	_player_pos_x
         17:CCAC  AC DB 24   			ldy.h	_player_pos_x
 6321                        		__add.wi	15
         17:CCAF  18         			clc
         17:CCB0  69 0F      			adc.l	#15
         17:CCB2  90 01      			bcc	!+
         17:CCB4  C8         			iny
         17:CCB5             	!:
 6322                        		__call		_spr_x.1
         17:CCB5  20 0A E8   			call	_spr_x.1
 6323                        	
 6324                        		.dbg	line,	"include\routines_LEVELS.c", 905; }
 6325                        	
 6326                        		.dbg	line,	"include\routines_LEVELS.c", 907; if(joy(JOYPAD_1) & JOY_DOWN)
 6327    17:CCB8             	.LL176:
 6328                        		__ld.uiq	0
         17:CCB8  62         			cla
 6329                        		 _joy.1
         17:CCB9  AA         			tax
         17:CCBA  BD 28 22   			lda	joynow, x
         17:CCBD  BC D3 22   			ldy	joy6now, x
 6330                        		__tand.wi	64
         17:CCC0  29 40      			and	#64
         17:CCC2  C9 01      	!:		cmp	#1
 6331                        		__bfalse	.LL177
         17:CCC4  90 0D      			bcc	.LL177
 6332                        	
 6333                        		.dbg	line,	"include\routines_LEVELS.c", 908; {
 6334                        	
 6335                        		.dbg	line,	"include\routines_LEVELS.c", 909; player_counter_anim = 1;
 6336                        		__st.umiq	1, _player_counter_anim
         17:CCC6  A9 01      			lda.l	#1
         17:CCC8  8D 1B 23   			sta	_player_counter_anim
 6337                        	
 6338                        		.dbg	line,	"include\routines_LEVELS.c", 910; player_state = STATE_CROUCH;
 6339                        		__st.umiq	7, _player_state
         17:CCCB  A9 07      			lda.l	#7
         17:CCCD  8D 18 23   			sta	_player_state
 6340                        	
 6341                        		.dbg	line,	"include\routines_LEVELS.c", 911; return;
 6342                        		__bra		.LL135
         17:CCD0  4C 3E D2   			bra	.LL135
 6343                        	
 6344                        		.dbg	line,	"include\routines_LEVELS.c", 912; }
 6345                        	
 6346                        		.dbg	line,	"include\routines_LEVELS.c", 914; player_state = STATE_WALK;
 6347    17:CCD3             	.LL177:
 6348                        		__st.umiq	1, _player_state
         17:CCD3  A9 01      			lda.l	#1
         17:CCD5  8D 18 23   			sta	_player_state
 6349                        	
 6350                        		.dbg	line,	"include\routines_LEVELS.c", 915; }
 6351                        	
 6352                        		.dbg	line,	"include\routines_LEVELS.c", 918; else if(player_state == STATE_JUMP)
 6353                        		__bra		.LL178
         17:CCD8  4C 3E D2   			bra	.LL178
 6354    17:CCDB             	.LL174:
 6355                        		__ld.umq	_player_state
         17:CCDB  AD 18 23   			lda	_player_state
 6356                        		__equ_b.uiq	4
         17:CCDE  C9 04      			cmp	#4
         17:CCE0  F0 01      			beq	!+
         17:CCE2  18         			clc
         17:CCE3             	!:
 6357                        		__bfalse	.LL179
         17:CCE3  B0 03 4C 81			bcc	.LL179
         17:CCE7  CD          
 6358                        	
 6359                        		.dbg	line,	"include\routines_LEVELS.c", 919; {
 6360                        	
 6361                        		.dbg	line,	"include\routines_LEVELS.c", 920; if(player_axis == AXIS_RIGHT)
 6362                        		__not.um	_player_axis
         17:CCE8  AD 19 23   			lda	_player_axis
         17:CCEB  18         			clc
         17:CCEC  D0 01      			bne	!+
         17:CCEE  38         			sec
         17:CCEF             	!:
 6363                        		__bfalse	.LL180
         17:CCEF  90 72      			bcc	.LL180
 6364                        	
 6365                        		.dbg	line,	"include\routines_LEVELS.c", 921; {
 6366                        	
 6367                        		.dbg	line,	"include\routines_LEVELS.c", 922; player_axis = AXIS_LEFT;
 6368                        		__st.umiq	1, _player_axis
         17:CCF1  A9 01      			lda.l	#1
         17:CCF3  8D 19 23   			sta	_player_axis
 6369                        	
 6370                        		.dbg	line,	"include\routines_LEVELS.c", 923; player_previous_axis = player_axis;
 6371                        		__ld.um		_player_axis
         17:CCF6  AD 19 23   			lda	_player_axis
         17:CCF9  C2         			cly
 6372                        		__st.umq	_player_previous_axis
         17:CCFA  8D 1A 23   			sta	_player_previous_axis
 6373                        	
 6374                        		.dbg	line,	"include\routines_LEVELS.c", 925; spr_set(player_id);
 6375                        		__ld.umq	_player_id
         17:CCFD  AD 17 23   			lda	_player_id
 6376                        		__call		_spr_set.1
         17:CD00  20 DD E7   			call	_spr_set.1
 6377                        	
 6378                        		.dbg	line,	"include\routines_LEVELS.c", 926; spr_ctrl(FLIP_MAS, FLIP_X);
 6379                        		__st.umiq	136, _al
         17:CD03  A9 88      			lda.l	#136
         17:CD05  85 F8      			sta	_al
 6380                        		__ld.uiq	8
         17:CD07  A9 08      			lda	#8
 6381                        		__call		_spr_ctrl.2
         17:CD09  20 3C E8   			call	_spr_ctrl.2
 6382                        	
 6383                        		.dbg	line,	"include\routines_LEVELS.c", 928; spr_set(chain_id);
 6384                        		__ld.umq	_chain_id
         17:CD0C  AD 25 23   			lda	_chain_id
 6385                        		__call		_spr_set.1
         17:CD0F  20 DD E7   			call	_spr_set.1
 6386                        	
 6387                        		.dbg	line,	"include\routines_LEVELS.c", 929; spr_ctrl(FLIP_MAS, FLIP_X);
 6388                        		__st.umiq	136, _al
         17:CD12  A9 88      			lda.l	#136
         17:CD14  85 F8      			sta	_al
 6389                        		__ld.uiq	8
         17:CD16  A9 08      			lda	#8
 6390                        		__call		_spr_ctrl.2
         17:CD18  20 3C E8   			call	_spr_ctrl.2
 6391                        	
 6392                        		.dbg	line,	"include\routines_LEVELS.c", 931; spr_set(chain_id+1);
 6393                        		__ld.um		_chain_id
         17:CD1B  AD 25 23   			lda	_chain_id
         17:CD1E  C2         			cly
 6394                        		__add.wi	1
         17:CD1F  1A         			inc	a
         17:CD20  D0 01      			bne	!+
         17:CD22  C8         			iny
         17:CD23             	!:
 6395                        		__call		_spr_set.1
         17:CD23  20 DD E7   			call	_spr_set.1
 6396                        	
 6397                        		.dbg	line,	"include\routines_LEVELS.c", 932; spr_ctrl(FLIP_MAS, FLIP_X);
 6398                        		__st.umiq	136, _al
         17:CD26  A9 88      			lda.l	#136
         17:CD28  85 F8      			sta	_al
 6399                        		__ld.uiq	8
         17:CD2A  A9 08      			lda	#8
 6400                        		__call		_spr_ctrl.2
         17:CD2C  20 3C E8   			call	_spr_ctrl.2
 6401                        	
 6402                        		.dbg	line,	"include\routines_LEVELS.c", 934; spr_set(chain_id+2);
 6403                        		__ld.um		_chain_id
         17:CD2F  AD 25 23   			lda	_chain_id
         17:CD32  C2         			cly
 6404                        		__add.wi	2
         17:CD33  18         			clc
         17:CD34  69 02      			adc.l	#2
         17:CD36  90 01      			bcc	!+
         17:CD38  C8         			iny
         17:CD39             	!:
 6405                        		__call		_spr_set.1
         17:CD39  20 DD E7   			call	_spr_set.1
 6406                        	
 6407                        		.dbg	line,	"include\routines_LEVELS.c", 935; spr_ctrl(FLIP_MAS, FLIP_X);
 6408                        		__st.umiq	136, _al
         17:CD3C  A9 88      			lda.l	#136
         17:CD3E  85 F8      			sta	_al
 6409                        		__ld.uiq	8
         17:CD40  A9 08      			lda	#8
 6410                        		__call		_spr_ctrl.2
         17:CD42  20 3C E8   			call	_spr_ctrl.2
 6411                        	
 6412                        		.dbg	line,	"include\routines_LEVELS.c", 937; spr_set(weapon_id);
 6413                        		__ld.umq	_weapon_id
         17:CD45  AD 26 23   			lda	_weapon_id
 6414                        		__call		_spr_set.1
         17:CD48  20 DD E7   			call	_spr_set.1
 6415                        	
 6416                        		.dbg	line,	"include\routines_LEVELS.c", 938; spr_ctrl(FLIP_MAS, FLIP_X);
 6417                        		__st.umiq	136, _al
         17:CD4B  A9 88      			lda.l	#136
         17:CD4D  85 F8      			sta	_al
 6418                        		__ld.uiq	8
         17:CD4F  A9 08      			lda	#8
 6419                        		__call		_spr_ctrl.2
         17:CD51  20 3C E8   			call	_spr_ctrl.2
 6420                        	
 6421                        		.dbg	line,	"include\routines_LEVELS.c", 939; spr_x(player_pos_x+21);
 6422                        		__ld.wm		_player_pos_x
         17:CD54  AD DA 24   			lda.l	_player_pos_x
         17:CD57  AC DB 24   			ldy.h	_player_pos_x
 6423                        		__add.wi	21
         17:CD5A  18         			clc
         17:CD5B  69 15      			adc.l	#21
         17:CD5D  90 01      			bcc	!+
         17:CD5F  C8         			iny
         17:CD60             	!:
 6424                        		__call		_spr_x.1
         17:CD60  20 0A E8   			call	_spr_x.1
 6425                        	
 6426                        		.dbg	line,	"include\routines_LEVELS.c", 940; }
 6427                        	
 6428                        		.dbg	line,	"include\routines_LEVELS.c", 942; if(player_index_jump > 11 && player_index_jump < 15)
 6429    17:CD63             	.LL180:
 6430                        		__ld.umq	_player_index_jump
         17:CD63  AD 1C 23   			lda	_player_index_jump
 6431                        		__ugt_b.uiq	11
         17:CD66  18         			clc			; Subtract integer+1 from A.
         17:CD67  E9 0B      			sbc	#11		; CS if A > integer.
 6432                        		__bfalse	.LL182
         17:CD69  90 09      			bcc	.LL182
 6433                        		__ld.umq	_player_index_jump
         17:CD6B  AD 1C 23   			lda	_player_index_jump
 6434                        		__ult_b.uiq	15
         17:CD6E  C9 0F      			cmp	#15		; Subtract integer from A.
         17:CD70  6A         			ror	a		; CC if A < integer.
         17:CD71  49 80      			eor	#$80
         17:CD73  2A         			rol	a
 6435    17:CD74             	.LL182:
 6436                        		__bfalse	.LL181
         17:CD74  B0 03 4C 3E			bcc	.LL181
         17:CD78  D2          
 6437                        	
 6438                        		.dbg	line,	"include\routines_LEVELS.c", 943; {
 6439                        	
 6440                        		.dbg	line,	"include\routines_LEVELS.c", 944; player_state = STATE_JUMP_LEFT;                        
 6441                        		__st.umiq	6, _player_state
         17:CD79  A9 06      			lda.l	#6
         17:CD7B  8D 18 23   			sta	_player_state
 6442                        	
 6443                        		.dbg	line,	"include\routines_LEVELS.c", 945; }
 6444                        	
 6445                        		.dbg	line,	"include\routines_LEVELS.c", 946; }
 6446    17:CD7E             	.LL181	.alias		.LL183
 6447                        	
 6448                        		.dbg	line,	"include\routines_LEVELS.c", 949; else if(player_state == STATE_JUMP_RIGHT)
 6449                        		__bra		.LL183
         17:CD7E  4C 3E D2   			bra	.LL183
 6450    17:CD81             	.LL179:
 6451                        		__ld.umq	_player_state
         17:CD81  AD 18 23   			lda	_player_state
 6452                        		__equ_b.uiq	5
         17:CD84  C9 05      			cmp	#5
         17:CD86  F0 01      			beq	!+
         17:CD88  18         			clc
         17:CD89             	!:
 6453                        		__bfalse	.LL184
         17:CD89  B0 03 4C 0F			bcc	.LL184
         17:CD8D  CE          
 6454                        	
 6455                        		.dbg	line,	"include\routines_LEVELS.c", 950; {
 6456                        	
 6457                        		.dbg	line,	"include\routines_LEVELS.c", 951; if(player_axis == AXIS_RIGHT)
 6458                        		__not.um	_player_axis
         17:CD8E  AD 19 23   			lda	_player_axis
         17:CD91  18         			clc
         17:CD92  D0 01      			bne	!+
         17:CD94  38         			sec
         17:CD95             	!:
 6459                        		__bfalse	.LL185
         17:CD95  B0 03 4C 3E			bcc	.LL185
         17:CD99  D2          
 6460                        	
 6461                        		.dbg	line,	"include\routines_LEVELS.c", 952; {
 6462                        	
 6463                        		.dbg	line,	"include\routines_LEVELS.c", 953; player_axis = AXIS_LEFT;
 6464                        		__st.umiq	1, _player_axis
         17:CD9A  A9 01      			lda.l	#1
         17:CD9C  8D 19 23   			sta	_player_axis
 6465                        	
 6466                        		.dbg	line,	"include\routines_LEVELS.c", 954; player_previous_axis = player_axis;
 6467                        		__ld.um		_player_axis
         17:CD9F  AD 19 23   			lda	_player_axis
         17:CDA2  C2         			cly
 6468                        		__st.umq	_player_previous_axis
         17:CDA3  8D 1A 23   			sta	_player_previous_axis
 6469                        	
 6470                        		.dbg	line,	"include\routines_LEVELS.c", 956; spr_set(player_id);
 6471                        		__ld.umq	_player_id
         17:CDA6  AD 17 23   			lda	_player_id
 6472                        		__call		_spr_set.1
         17:CDA9  20 DD E7   			call	_spr_set.1
 6473                        	
 6474                        		.dbg	line,	"include\routines_LEVELS.c", 957; spr_ctrl(FLIP_MAS, FLIP_X);
 6475                        		__st.umiq	136, _al
         17:CDAC  A9 88      			lda.l	#136
         17:CDAE  85 F8      			sta	_al
 6476                        		__ld.uiq	8
         17:CDB0  A9 08      			lda	#8
 6477                        		__call		_spr_ctrl.2
         17:CDB2  20 3C E8   			call	_spr_ctrl.2
 6478                        	
 6479                        		.dbg	line,	"include\routines_LEVELS.c", 959; spr_set(chain_id);
 6480                        		__ld.umq	_chain_id
         17:CDB5  AD 25 23   			lda	_chain_id
 6481                        		__call		_spr_set.1
         17:CDB8  20 DD E7   			call	_spr_set.1
 6482                        	
 6483                        		.dbg	line,	"include\routines_LEVELS.c", 960; spr_ctrl(FLIP_MAS, FLIP_X);
 6484                        		__st.umiq	136, _al
         17:CDBB  A9 88      			lda.l	#136
         17:CDBD  85 F8      			sta	_al
 6485                        		__ld.uiq	8
         17:CDBF  A9 08      			lda	#8
 6486                        		__call		_spr_ctrl.2
         17:CDC1  20 3C E8   			call	_spr_ctrl.2
 6487                        	
 6488                        		.dbg	line,	"include\routines_LEVELS.c", 962; spr_set(chain_id+1);
 6489                        		__ld.um		_chain_id
         17:CDC4  AD 25 23   			lda	_chain_id
         17:CDC7  C2         			cly
 6490                        		__add.wi	1
         17:CDC8  1A         			inc	a
         17:CDC9  D0 01      			bne	!+
         17:CDCB  C8         			iny
         17:CDCC             	!:
 6491                        		__call		_spr_set.1
         17:CDCC  20 DD E7   			call	_spr_set.1
 6492                        	
 6493                        		.dbg	line,	"include\routines_LEVELS.c", 963; spr_ctrl(FLIP_MAS, FLIP_X);
 6494                        		__st.umiq	136, _al
         17:CDCF  A9 88      			lda.l	#136
         17:CDD1  85 F8      			sta	_al
 6495                        		__ld.uiq	8
         17:CDD3  A9 08      			lda	#8
 6496                        		__call		_spr_ctrl.2
         17:CDD5  20 3C E8   			call	_spr_ctrl.2
 6497                        	
 6498                        		.dbg	line,	"include\routines_LEVELS.c", 965; spr_set(chain_id+2);
 6499                        		__ld.um		_chain_id
         17:CDD8  AD 25 23   			lda	_chain_id
         17:CDDB  C2         			cly
 6500                        		__add.wi	2
         17:CDDC  18         			clc
         17:CDDD  69 02      			adc.l	#2
         17:CDDF  90 01      			bcc	!+
         17:CDE1  C8         			iny
         17:CDE2             	!:
 6501                        		__call		_spr_set.1
         17:CDE2  20 DD E7   			call	_spr_set.1
 6502                        	
 6503                        		.dbg	line,	"include\routines_LEVELS.c", 966; spr_ctrl(FLIP_MAS, FLIP_X);
 6504                        		__st.umiq	136, _al
         17:CDE5  A9 88      			lda.l	#136
         17:CDE7  85 F8      			sta	_al
 6505                        		__ld.uiq	8
         17:CDE9  A9 08      			lda	#8
 6506                        		__call		_spr_ctrl.2
         17:CDEB  20 3C E8   			call	_spr_ctrl.2
 6507                        	
 6508                        		.dbg	line,	"include\routines_LEVELS.c", 968; spr_set(weapon_id);
 6509                        		__ld.umq	_weapon_id
         17:CDEE  AD 26 23   			lda	_weapon_id
 6510                        		__call		_spr_set.1
         17:CDF1  20 DD E7   			call	_spr_set.1
 6511                        	
 6512                        		.dbg	line,	"include\routines_LEVELS.c", 969; spr_ctrl(FLIP_MAS, FLIP_X);
 6513                        		__st.umiq	136, _al
         17:CDF4  A9 88      			lda.l	#136
         17:CDF6  85 F8      			sta	_al
 6514                        		__ld.uiq	8
         17:CDF8  A9 08      			lda	#8
 6515                        		__call		_spr_ctrl.2
         17:CDFA  20 3C E8   			call	_spr_ctrl.2
 6516                        	
 6517                        		.dbg	line,	"include\routines_LEVELS.c", 970; spr_x(player_pos_x+21);
 6518                        		__ld.wm		_player_pos_x
         17:CDFD  AD DA 24   			lda.l	_player_pos_x
         17:CE00  AC DB 24   			ldy.h	_player_pos_x
 6519                        		__add.wi	21
         17:CE03  18         			clc
         17:CE04  69 15      			adc.l	#21
         17:CE06  90 01      			bcc	!+
         17:CE08  C8         			iny
         17:CE09             	!:
 6520                        		__call		_spr_x.1
         17:CE09  20 0A E8   			call	_spr_x.1
 6521                        	
 6522                        		.dbg	line,	"include\routines_LEVELS.c", 971; }
 6523                        	
 6524                        		.dbg	line,	"include\routines_LEVELS.c", 972; }
 6525    17:CE0C             	.LL185	.alias		.LL186
 6526                        	
 6527                        		.dbg	line,	"include\routines_LEVELS.c", 975; else if(player_state == STATE_CROUCH)
 6528                        		__bra		.LL186
         17:CE0C  4C 3E D2   			bra	.LL186
 6529    17:CE0F             	.LL184:
 6530                        		__ld.umq	_player_state
         17:CE0F  AD 18 23   			lda	_player_state
 6531                        		__equ_b.uiq	7
         17:CE12  C9 07      			cmp	#7
         17:CE14  F0 01      			beq	!+
         17:CE16  18         			clc
         17:CE17             	!:
 6532                        		__bfalse	.LL187
         17:CE17  B0 03 4C 9D			bcc	.LL187
         17:CE1B  CE          
 6533                        	
 6534                        		.dbg	line,	"include\routines_LEVELS.c", 976; {
 6535                        	
 6536                        		.dbg	line,	"include\routines_LEVELS.c", 977; if(player_axis == AXIS_RIGHT)
 6537                        		__not.um	_player_axis
         17:CE1C  AD 19 23   			lda	_player_axis
         17:CE1F  18         			clc
         17:CE20  D0 01      			bne	!+
         17:CE22  38         			sec
         17:CE23             	!:
 6538                        		__bfalse	.LL188
         17:CE23  B0 03 4C 3E			bcc	.LL188
         17:CE27  D2          
 6539                        	
 6540                        		.dbg	line,	"include\routines_LEVELS.c", 978; {
 6541                        	
 6542                        		.dbg	line,	"include\routines_LEVELS.c", 979; player_axis = AXIS_LEFT;
 6543                        		__st.umiq	1, _player_axis
         17:CE28  A9 01      			lda.l	#1
         17:CE2A  8D 19 23   			sta	_player_axis
 6544                        	
 6545                        		.dbg	line,	"include\routines_LEVELS.c", 980; player_previous_axis = player_axis;
 6546                        		__ld.um		_player_axis
         17:CE2D  AD 19 23   			lda	_player_axis
         17:CE30  C2         			cly
 6547                        		__st.umq	_player_previous_axis
         17:CE31  8D 1A 23   			sta	_player_previous_axis
 6548                        	
 6549                        		.dbg	line,	"include\routines_LEVELS.c", 982; spr_set(player_id);
 6550                        		__ld.umq	_player_id
         17:CE34  AD 17 23   			lda	_player_id
 6551                        		__call		_spr_set.1
         17:CE37  20 DD E7   			call	_spr_set.1
 6552                        	
 6553                        		.dbg	line,	"include\routines_LEVELS.c", 983; spr_ctrl(FLIP_MAS, FLIP_X);
 6554                        		__st.umiq	136, _al
         17:CE3A  A9 88      			lda.l	#136
         17:CE3C  85 F8      			sta	_al
 6555                        		__ld.uiq	8
         17:CE3E  A9 08      			lda	#8
 6556                        		__call		_spr_ctrl.2
         17:CE40  20 3C E8   			call	_spr_ctrl.2
 6557                        	
 6558                        		.dbg	line,	"include\routines_LEVELS.c", 985; spr_set(chain_id);
 6559                        		__ld.umq	_chain_id
         17:CE43  AD 25 23   			lda	_chain_id
 6560                        		__call		_spr_set.1
         17:CE46  20 DD E7   			call	_spr_set.1
 6561                        	
 6562                        		.dbg	line,	"include\routines_LEVELS.c", 986; spr_ctrl(FLIP_MAS, FLIP_X);
 6563                        		__st.umiq	136, _al
         17:CE49  A9 88      			lda.l	#136
         17:CE4B  85 F8      			sta	_al
 6564                        		__ld.uiq	8
         17:CE4D  A9 08      			lda	#8
 6565                        		__call		_spr_ctrl.2
         17:CE4F  20 3C E8   			call	_spr_ctrl.2
 6566                        	
 6567                        		.dbg	line,	"include\routines_LEVELS.c", 988; spr_set(chain_id+1);
 6568                        		__ld.um		_chain_id
         17:CE52  AD 25 23   			lda	_chain_id
         17:CE55  C2         			cly
 6569                        		__add.wi	1
         17:CE56  1A         			inc	a
         17:CE57  D0 01      			bne	!+
         17:CE59  C8         			iny
         17:CE5A             	!:
 6570                        		__call		_spr_set.1
         17:CE5A  20 DD E7   			call	_spr_set.1
 6571                        	
 6572                        		.dbg	line,	"include\routines_LEVELS.c", 989; spr_ctrl(FLIP_MAS, FLIP_X);
 6573                        		__st.umiq	136, _al
         17:CE5D  A9 88      			lda.l	#136
         17:CE5F  85 F8      			sta	_al
 6574                        		__ld.uiq	8
         17:CE61  A9 08      			lda	#8
 6575                        		__call		_spr_ctrl.2
         17:CE63  20 3C E8   			call	_spr_ctrl.2
 6576                        	
 6577                        		.dbg	line,	"include\routines_LEVELS.c", 991; spr_set(chain_id+2);
 6578                        		__ld.um		_chain_id
         17:CE66  AD 25 23   			lda	_chain_id
         17:CE69  C2         			cly
 6579                        		__add.wi	2
         17:CE6A  18         			clc
         17:CE6B  69 02      			adc.l	#2
         17:CE6D  90 01      			bcc	!+
         17:CE6F  C8         			iny
         17:CE70             	!:
 6580                        		__call		_spr_set.1
         17:CE70  20 DD E7   			call	_spr_set.1
 6581                        	
 6582                        		.dbg	line,	"include\routines_LEVELS.c", 992; spr_ctrl(FLIP_MAS, FLIP_X);
 6583                        		__st.umiq	136, _al
         17:CE73  A9 88      			lda.l	#136
         17:CE75  85 F8      			sta	_al
 6584                        		__ld.uiq	8
         17:CE77  A9 08      			lda	#8
 6585                        		__call		_spr_ctrl.2
         17:CE79  20 3C E8   			call	_spr_ctrl.2
 6586                        	
 6587                        		.dbg	line,	"include\routines_LEVELS.c", 994; spr_set(weapon_id);
 6588                        		__ld.umq	_weapon_id
         17:CE7C  AD 26 23   			lda	_weapon_id
 6589                        		__call		_spr_set.1
         17:CE7F  20 DD E7   			call	_spr_set.1
 6590                        	
 6591                        		.dbg	line,	"include\routines_LEVELS.c", 995; spr_ctrl(FLIP_MAS, FLIP_X);
 6592                        		__st.umiq	136, _al
         17:CE82  A9 88      			lda.l	#136
         17:CE84  85 F8      			sta	_al
 6593                        		__ld.uiq	8
         17:CE86  A9 08      			lda	#8
 6594                        		__call		_spr_ctrl.2
         17:CE88  20 3C E8   			call	_spr_ctrl.2
 6595                        	
 6596                        		.dbg	line,	"include\routines_LEVELS.c", 996; spr_x(player_pos_x+17);
 6597                        		__ld.wm		_player_pos_x
         17:CE8B  AD DA 24   			lda.l	_player_pos_x
         17:CE8E  AC DB 24   			ldy.h	_player_pos_x
 6598                        		__add.wi	17
         17:CE91  18         			clc
         17:CE92  69 11      			adc.l	#17
         17:CE94  90 01      			bcc	!+
         17:CE96  C8         			iny
         17:CE97             	!:
 6599                        		__call		_spr_x.1
         17:CE97  20 0A E8   			call	_spr_x.1
 6600                        	
 6601                        		.dbg	line,	"include\routines_LEVELS.c", 997; }
 6602                        	
 6603                        		.dbg	line,	"include\routines_LEVELS.c", 998; }
 6604    17:CE9A             	.LL188	.alias		.LL189
 6605                        	
 6606                        		.dbg	line,	"include\routines_LEVELS.c", 1001; else if(player_state == STATE_FALL)
 6607                        		__bra		.LL189
         17:CE9A  4C 3E D2   			bra	.LL189
 6608    17:CE9D             	.LL187:
 6609                        		__ld.umq	_player_state
         17:CE9D  AD 18 23   			lda	_player_state
 6610                        		__equ_b.uiq	9
         17:CEA0  C9 09      			cmp	#9
         17:CEA2  F0 01      			beq	!+
         17:CEA4  18         			clc
         17:CEA5             	!:
 6611                        		__bfalse	.LL190
         17:CEA5  B0 03 4C 2B			bcc	.LL190
         17:CEA9  CF          
 6612                        	
 6613                        		.dbg	line,	"include\routines_LEVELS.c", 1002; {
 6614                        	
 6615                        		.dbg	line,	"include\routines_LEVELS.c", 1003; if(player_axis == AXIS_RIGHT)
 6616                        		__not.um	_player_axis
         17:CEAA  AD 19 23   			lda	_player_axis
         17:CEAD  18         			clc
         17:CEAE  D0 01      			bne	!+
         17:CEB0  38         			sec
         17:CEB1             	!:
 6617                        		__bfalse	.LL191
         17:CEB1  B0 03 4C 3E			bcc	.LL191
         17:CEB5  D2          
 6618                        	
 6619                        		.dbg	line,	"include\routines_LEVELS.c", 1004; {
 6620                        	
 6621                        		.dbg	line,	"include\routines_LEVELS.c", 1005; player_axis = AXIS_LEFT;
 6622                        		__st.umiq	1, _player_axis
         17:CEB6  A9 01      			lda.l	#1
         17:CEB8  8D 19 23   			sta	_player_axis
 6623                        	
 6624                        		.dbg	line,	"include\routines_LEVELS.c", 1006; player_previous_axis = player_axis;
 6625                        		__ld.um		_player_axis
         17:CEBB  AD 19 23   			lda	_player_axis
         17:CEBE  C2         			cly
 6626                        		__st.umq	_player_previous_axis
         17:CEBF  8D 1A 23   			sta	_player_previous_axis
 6627                        	
 6628                        		.dbg	line,	"include\routines_LEVELS.c", 1008; spr_set(player_id);
 6629                        		__ld.umq	_player_id
         17:CEC2  AD 17 23   			lda	_player_id
 6630                        		__call		_spr_set.1
         17:CEC5  20 DD E7   			call	_spr_set.1
 6631                        	
 6632                        		.dbg	line,	"include\routines_LEVELS.c", 1009; spr_ctrl(FLIP_MAS, FLIP_X);
 6633                        		__st.umiq	136, _al
         17:CEC8  A9 88      			lda.l	#136
         17:CECA  85 F8      			sta	_al
 6634                        		__ld.uiq	8
         17:CECC  A9 08      			lda	#8
 6635                        		__call		_spr_ctrl.2
         17:CECE  20 3C E8   			call	_spr_ctrl.2
 6636                        	
 6637                        		.dbg	line,	"include\routines_LEVELS.c", 1011; spr_set(chain_id);
 6638                        		__ld.umq	_chain_id
         17:CED1  AD 25 23   			lda	_chain_id
 6639                        		__call		_spr_set.1
         17:CED4  20 DD E7   			call	_spr_set.1
 6640                        	
 6641                        		.dbg	line,	"include\routines_LEVELS.c", 1012; spr_ctrl(FLIP_MAS, FLIP_X);
 6642                        		__st.umiq	136, _al
         17:CED7  A9 88      			lda.l	#136
         17:CED9  85 F8      			sta	_al
 6643                        		__ld.uiq	8
         17:CEDB  A9 08      			lda	#8
 6644                        		__call		_spr_ctrl.2
         17:CEDD  20 3C E8   			call	_spr_ctrl.2
 6645                        	
 6646                        		.dbg	line,	"include\routines_LEVELS.c", 1014; spr_set(chain_id+1);
 6647                        		__ld.um		_chain_id
         17:CEE0  AD 25 23   			lda	_chain_id
         17:CEE3  C2         			cly
 6648                        		__add.wi	1
         17:CEE4  1A         			inc	a
         17:CEE5  D0 01      			bne	!+
         17:CEE7  C8         			iny
         17:CEE8             	!:
 6649                        		__call		_spr_set.1
         17:CEE8  20 DD E7   			call	_spr_set.1
 6650                        	
 6651                        		.dbg	line,	"include\routines_LEVELS.c", 1015; spr_ctrl(FLIP_MAS, FLIP_X);
 6652                        		__st.umiq	136, _al
         17:CEEB  A9 88      			lda.l	#136
         17:CEED  85 F8      			sta	_al
 6653                        		__ld.uiq	8
         17:CEEF  A9 08      			lda	#8
 6654                        		__call		_spr_ctrl.2
         17:CEF1  20 3C E8   			call	_spr_ctrl.2
 6655                        	
 6656                        		.dbg	line,	"include\routines_LEVELS.c", 1017; spr_set(chain_id+2);
 6657                        		__ld.um		_chain_id
         17:CEF4  AD 25 23   			lda	_chain_id
         17:CEF7  C2         			cly
 6658                        		__add.wi	2
         17:CEF8  18         			clc
         17:CEF9  69 02      			adc.l	#2
         17:CEFB  90 01      			bcc	!+
         17:CEFD  C8         			iny
         17:CEFE             	!:
 6659                        		__call		_spr_set.1
         17:CEFE  20 DD E7   			call	_spr_set.1
 6660                        	
 6661                        		.dbg	line,	"include\routines_LEVELS.c", 1018; spr_ctrl(FLIP_MAS, FLIP_X);
 6662                        		__st.umiq	136, _al
         17:CF01  A9 88      			lda.l	#136
         17:CF03  85 F8      			sta	_al
 6663                        		__ld.uiq	8
         17:CF05  A9 08      			lda	#8
 6664                        		__call		_spr_ctrl.2
         17:CF07  20 3C E8   			call	_spr_ctrl.2
 6665                        	
 6666                        		.dbg	line,	"include\routines_LEVELS.c", 1020; spr_set(weapon_id);
 6667                        		__ld.umq	_weapon_id
         17:CF0A  AD 26 23   			lda	_weapon_id
 6668                        		__call		_spr_set.1
         17:CF0D  20 DD E7   			call	_spr_set.1
 6669                        	
 6670                        		.dbg	line,	"include\routines_LEVELS.c", 1021; spr_ctrl(FLIP_MAS, FLIP_X);
 6671                        		__st.umiq	136, _al
         17:CF10  A9 88      			lda.l	#136
         17:CF12  85 F8      			sta	_al
 6672                        		__ld.uiq	8
         17:CF14  A9 08      			lda	#8
 6673                        		__call		_spr_ctrl.2
         17:CF16  20 3C E8   			call	_spr_ctrl.2
 6674                        	
 6675                        		.dbg	line,	"include\routines_LEVELS.c", 1022; spr_x(player_pos_x+20);
 6676                        		__ld.wm		_player_pos_x
         17:CF19  AD DA 24   			lda.l	_player_pos_x
         17:CF1C  AC DB 24   			ldy.h	_player_pos_x
 6677                        		__add.wi	20
         17:CF1F  18         			clc
         17:CF20  69 14      			adc.l	#20
         17:CF22  90 01      			bcc	!+
         17:CF24  C8         			iny
         17:CF25             	!:
 6678                        		__call		_spr_x.1
         17:CF25  20 0A E8   			call	_spr_x.1
 6679                        	
 6680                        		.dbg	line,	"include\routines_LEVELS.c", 1023; }
 6681                        	
 6682                        		.dbg	line,	"include\routines_LEVELS.c", 1024; }
 6683    17:CF28             	.LL191	.alias		.LL192
 6684                        	
 6685                        		.dbg	line,	"include\routines_LEVELS.c", 1026; 
 6686                        	
 6687                        		.dbg	line,	"include\routines_LEVELS.c", 1027; else if(player_state == STATE_HANG)
 6688                        		__bra		.LL192
         17:CF28  4C 3E D2   			bra	.LL192
 6689    17:CF2B             	.LL190:
 6690                        		__ld.umq	_player_state
         17:CF2B  AD 18 23   			lda	_player_state
 6691                        		__equ_b.uiq	10
         17:CF2E  C9 0A      			cmp	#10
         17:CF30  F0 01      			beq	!+
         17:CF32  18         			clc
         17:CF33             	!:
 6692                        		__bfalse	.LL193
         17:CF33  B0 03 4C B9			bcc	.LL193
         17:CF37  CF          
 6693                        	
 6694                        		.dbg	line,	"include\routines_LEVELS.c", 1028; {
 6695                        	
 6696                        		.dbg	line,	"include\routines_LEVELS.c", 1029; if(player_axis == AXIS_RIGHT)
 6697                        		__not.um	_player_axis
         17:CF38  AD 19 23   			lda	_player_axis
         17:CF3B  18         			clc
         17:CF3C  D0 01      			bne	!+
         17:CF3E  38         			sec
         17:CF3F             	!:
 6698                        		__bfalse	.LL194
         17:CF3F  B0 03 4C 3E			bcc	.LL194
         17:CF43  D2          
 6699                        	
 6700                        		.dbg	line,	"include\routines_LEVELS.c", 1030; {
 6701                        	
 6702                        		.dbg	line,	"include\routines_LEVELS.c", 1031; player_axis = AXIS_LEFT;
 6703                        		__st.umiq	1, _player_axis
         17:CF44  A9 01      			lda.l	#1
         17:CF46  8D 19 23   			sta	_player_axis
 6704                        	
 6705                        		.dbg	line,	"include\routines_LEVELS.c", 1032; player_previous_axis = player_axis;
 6706                        		__ld.um		_player_axis
         17:CF49  AD 19 23   			lda	_player_axis
         17:CF4C  C2         			cly
 6707                        		__st.umq	_player_previous_axis
         17:CF4D  8D 1A 23   			sta	_player_previous_axis
 6708                        	
 6709                        		.dbg	line,	"include\routines_LEVELS.c", 1034; spr_set(player_id);
 6710                        		__ld.umq	_player_id
         17:CF50  AD 17 23   			lda	_player_id
 6711                        		__call		_spr_set.1
         17:CF53  20 DD E7   			call	_spr_set.1
 6712                        	
 6713                        		.dbg	line,	"include\routines_LEVELS.c", 1035; spr_ctrl(FLIP_MAS, FLIP_X);
 6714                        		__st.umiq	136, _al
         17:CF56  A9 88      			lda.l	#136
         17:CF58  85 F8      			sta	_al
 6715                        		__ld.uiq	8
         17:CF5A  A9 08      			lda	#8
 6716                        		__call		_spr_ctrl.2
         17:CF5C  20 3C E8   			call	_spr_ctrl.2
 6717                        	
 6718                        		.dbg	line,	"include\routines_LEVELS.c", 1037; spr_set(chain_id);
 6719                        		__ld.umq	_chain_id
         17:CF5F  AD 25 23   			lda	_chain_id
 6720                        		__call		_spr_set.1
         17:CF62  20 DD E7   			call	_spr_set.1
 6721                        	
 6722                        		.dbg	line,	"include\routines_LEVELS.c", 1038; spr_ctrl(FLIP_MAS, FLIP_X);
 6723                        		__st.umiq	136, _al
         17:CF65  A9 88      			lda.l	#136
         17:CF67  85 F8      			sta	_al
 6724                        		__ld.uiq	8
         17:CF69  A9 08      			lda	#8
 6725                        		__call		_spr_ctrl.2
         17:CF6B  20 3C E8   			call	_spr_ctrl.2
 6726                        	
 6727                        		.dbg	line,	"include\routines_LEVELS.c", 1040; spr_set(chain_id+1);
 6728                        		__ld.um		_chain_id
         17:CF6E  AD 25 23   			lda	_chain_id
         17:CF71  C2         			cly
 6729                        		__add.wi	1
         17:CF72  1A         			inc	a
         17:CF73  D0 01      			bne	!+
         17:CF75  C8         			iny
         17:CF76             	!:
 6730                        		__call		_spr_set.1
         17:CF76  20 DD E7   			call	_spr_set.1
 6731                        	
 6732                        		.dbg	line,	"include\routines_LEVELS.c", 1041; spr_ctrl(FLIP_MAS, FLIP_X);
 6733                        		__st.umiq	136, _al
         17:CF79  A9 88      			lda.l	#136
         17:CF7B  85 F8      			sta	_al
 6734                        		__ld.uiq	8
         17:CF7D  A9 08      			lda	#8
 6735                        		__call		_spr_ctrl.2
         17:CF7F  20 3C E8   			call	_spr_ctrl.2
 6736                        	
 6737                        		.dbg	line,	"include\routines_LEVELS.c", 1043; spr_set(chain_id+2);
 6738                        		__ld.um		_chain_id
         17:CF82  AD 25 23   			lda	_chain_id
         17:CF85  C2         			cly
 6739                        		__add.wi	2
         17:CF86  18         			clc
         17:CF87  69 02      			adc.l	#2
         17:CF89  90 01      			bcc	!+
         17:CF8B  C8         			iny
         17:CF8C             	!:
 6740                        		__call		_spr_set.1
         17:CF8C  20 DD E7   			call	_spr_set.1
 6741                        	
 6742                        		.dbg	line,	"include\routines_LEVELS.c", 1044; spr_ctrl(FLIP_MAS, FLIP_X);
 6743                        		__st.umiq	136, _al
         17:CF8F  A9 88      			lda.l	#136
         17:CF91  85 F8      			sta	_al
 6744                        		__ld.uiq	8
         17:CF93  A9 08      			lda	#8
 6745                        		__call		_spr_ctrl.2
         17:CF95  20 3C E8   			call	_spr_ctrl.2
 6746                        	
 6747                        		.dbg	line,	"include\routines_LEVELS.c", 1046; spr_set(weapon_id);
 6748                        		__ld.umq	_weapon_id
         17:CF98  AD 26 23   			lda	_weapon_id
 6749                        		__call		_spr_set.1
         17:CF9B  20 DD E7   			call	_spr_set.1
 6750                        	
 6751                        		.dbg	line,	"include\routines_LEVELS.c", 1047; spr_ctrl(FLIP_MAS, FLIP_X);
 6752                        		__st.umiq	136, _al
         17:CF9E  A9 88      			lda.l	#136
         17:CFA0  85 F8      			sta	_al
 6753                        		__ld.uiq	8
         17:CFA2  A9 08      			lda	#8
 6754                        		__call		_spr_ctrl.2
         17:CFA4  20 3C E8   			call	_spr_ctrl.2
 6755                        	
 6756                        		.dbg	line,	"include\routines_LEVELS.c", 1048; spr_x(player_pos_x-2);
 6757                        		__ld.wm		_player_pos_x
         17:CFA7  AD DA 24   			lda.l	_player_pos_x
         17:CFAA  AC DB 24   			ldy.h	_player_pos_x
 6758                        		__sub.wi	2
         17:CFAD  38         			sec
         17:CFAE  E9 02      			sbc.l	#2
         17:CFB0  B0 01      			bcs	!+
         17:CFB2  88         			dey
         17:CFB3             	!:
 6759                        		__call		_spr_x.1
         17:CFB3  20 0A E8   			call	_spr_x.1
 6760                        	
 6761                        		.dbg	line,	"include\routines_LEVELS.c", 1049; }
 6762                        	
 6763                        		.dbg	line,	"include\routines_LEVELS.c", 1050; }
 6764    17:CFB6             	.LL194	.alias		.LL195
 6765                        	
 6766                        		.dbg	line,	"include\routines_LEVELS.c", 1053; else if(player_state == STATE_CLIMB_UP || player_state == STATE_CLIMB_DOWN)
 6767                        		__bra		.LL195
         17:CFB6  4C 3E D2   			bra	.LL195
 6768    17:CFB9             	.LL193:
 6769                        		__ld.umq	_player_state
         17:CFB9  AD 18 23   			lda	_player_state
 6770                        		__equ_b.uiq	11
         17:CFBC  C9 0B      			cmp	#11
         17:CFBE  F0 01      			beq	!+
         17:CFC0  18         			clc
         17:CFC1             	!:
 6771                        		__btrue		.LL197
         17:CFC1  B0 08      			bcs	.LL197
 6772                        		__ld.umq	_player_state
         17:CFC3  AD 18 23   			lda	_player_state
 6773                        		__equ_b.uiq	12
         17:CFC6  C9 0C      			cmp	#12
         17:CFC8  F0 01      			beq	!+
         17:CFCA  18         			clc
         17:CFCB             	!:
 6774    17:CFCB             	.LL197:
 6775                        		__bfalse	.LL196
         17:CFCB  B0 03 4C 3E			bcc	.LL196
         17:CFCF  D2          
 6776                        	
 6777                        		.dbg	line,	"include\routines_LEVELS.c", 1054; {
 6778                        	
 6779                        		.dbg	line,	"include\routines_LEVELS.c", 1055; spr_set(player_id);
 6780                        		__ld.umq	_player_id
         17:CFD0  AD 17 23   			lda	_player_id
 6781                        		__call		_spr_set.1
         17:CFD3  20 DD E7   			call	_spr_set.1
 6782                        	
 6783                        		.dbg	line,	"include\routines_LEVELS.c", 1056; spr_pattern(PLAYER_HANG_VRAM_ADR);
 6784                        		__ld.wi		7424
         17:CFD6  62         			cla
         17:CFD7  A0 1D      			ldy.h	#7424
 6785                        		__call		_spr_pattern.1
         17:CFD9  20 26 E8   			call	_spr_pattern.1
 6786                        	
 6787                        		.dbg	line,	"include\routines_LEVELS.c", 1057; player_counter_anim = 0;
 6788                        		__st.umiq	0, _player_counter_anim
         17:CFDC  9C 1B 23   			stz	_player_counter_anim
 6789                        	
 6790                        		.dbg	line,	"include\routines_LEVELS.c", 1058; player_state = STATE_HANG;
 6791                        		__st.umiq	10, _player_state
         17:CFDF  A9 0A      			lda.l	#10
         17:CFE1  8D 18 23   			sta	_player_state
 6792                        	
 6793                        		.dbg	line,	"include\routines_LEVELS.c", 1059; }
 6794                        	
 6795                        		.dbg	line,	"include\routines_LEVELS.c", 1060; }
 6796    17:CFE4             	.LL196	.alias		.LL198
 6797    17:CFE4             	.LL195	.alias		.LL198
 6798    17:CFE4             	.LL192	.alias		.LL198
 6799    17:CFE4             	.LL189	.alias		.LL198
 6800    17:CFE4             	.LL186	.alias		.LL198
 6801    17:CFE4             	.LL183	.alias		.LL198
 6802    17:CFE4             	.LL178	.alias		.LL198
 6803                        	
 6804                        		.dbg	line,	"include\routines_LEVELS.c", 1063; //--------------------------------------------------------------------------------------//
 6805                        	
 6806                        		.dbg	line,	"include\routines_LEVELS.c", 1064; //                                      UP BUTTON                                       //
 6807                        	
 6808                        		.dbg	line,	"include\routines_LEVELS.c", 1065; //--------------------------------------------------------------------------------------//
 6809                        	
 6810                        		.dbg	line,	"include\routines_LEVELS.c", 1067; else if(joy(JOYPAD_1) & JOY_UP)
 6811                        		__bra		.LL198
         17:CFE4  4C 3E D2   			bra	.LL198
 6812    17:CFE7             	.LL173:
 6813                        		__ld.uiq	0
         17:CFE7  62         			cla
 6814                        		 _joy.1
         17:CFE8  AA         			tax
         17:CFE9  BD 28 22   			lda	joynow, x
         17:CFEC  BC D3 22   			ldy	joy6now, x
 6815                        		__tand.wi	16
         17:CFEF  29 10      			and	#16
         17:CFF1  C9 01      	!:		cmp	#1
 6816                        		__bfalse	.LL199
         17:CFF3  B0 03 4C D1			bcc	.LL199
         17:CFF7  D0          
 6817                        	
 6818                        		.dbg	line,	"include\routines_LEVELS.c", 1068; {
 6819                        	
 6820                        		.dbg	line,	"include\routines_LEVELS.c", 1069; if(player_state == STATE_HANG || player_state == STATE_CLIMB_UP || player_state == STATE_CLIMB_DOWN)
 6821                        		__ld.umq	_player_state
         17:CFF8  AD 18 23   			lda	_player_state
 6822                        		__equ_b.uiq	10
         17:CFFB  C9 0A      			cmp	#10
         17:CFFD  F0 01      			beq	!+
         17:CFFF  18         			clc
         17:D000             	!:
 6823                        		__btrue		.LL201
         17:D000  B0 08      			bcs	.LL201
 6824                        		__ld.umq	_player_state
         17:D002  AD 18 23   			lda	_player_state
 6825                        		__equ_b.uiq	11
         17:D005  C9 0B      			cmp	#11
         17:D007  F0 01      			beq	!+
         17:D009  18         			clc
         17:D00A             	!:
 6826    17:D00A             	.LL201:
 6827                        		__btrue		.LL202
         17:D00A  B0 08      			bcs	.LL202
 6828                        		__ld.umq	_player_state
         17:D00C  AD 18 23   			lda	_player_state
 6829                        		__equ_b.uiq	12
         17:D00F  C9 0C      			cmp	#12
         17:D011  F0 01      			beq	!+
         17:D013  18         			clc
         17:D014             	!:
 6830    17:D014             	.LL202:
 6831                        		__bfalse	.LL200
         17:D014  B0 03 4C 3E			bcc	.LL200
         17:D018  D2          
 6832                        	
 6833                        		.dbg	line,	"include\routines_LEVELS.c", 1070; {
 6834                        	
 6835                        		.dbg	line,	"include\routines_LEVELS.c", 1071; if(player_attack == FALSE)
 6836                        		__not.um	_player_attack
         17:D019  AD 20 23   			lda	_player_attack
         17:D01C  18         			clc
         17:D01D  D0 01      			bne	!+
         17:D01F  38         			sec
         17:D020             	!:
 6837                        		__bfalse	.LL203
         17:D020  B0 03 4C 3E			bcc	.LL203
         17:D024  D2          
 6838                        	
 6839                        		.dbg	line,	"include\routines_LEVELS.c", 1072; {
 6840                        	
 6841                        		.dbg	line,	"include\routines_LEVELS.c", 1073; unsigned char i;
 6842                        	
 6843                        		.dbg	line,	"include\routines_LEVELS.c", 1075; check_BG( 15 , 8 );
 6844                        		__ld.wi		15
         17:D025  A9 0F      			lda.l	#15
         17:D027  C2         			cly
 6845                        		__pusharg.wr
         17:D028  A6 8D      			ldx	<__sp
         17:D02A  CA         			dex
         17:D02B  CA         			dex
         17:D02C  95 08      			sta.l	<__stack, x
         17:D02E  94 09      			sty.h	<__stack, x
         17:D030  86 8D      			stx	<__sp
 6846                        		__ld.wi		8
         17:D032  A9 08      			lda.l	#8
         17:D034  C2         			cly
 6847                        		__pusharg.wr
         17:D035  A6 8D      			ldx	<__sp
         17:D037  CA         			dex
         17:D038  CA         			dex
         17:D039  95 08      			sta.l	<__stack, x
         17:D03B  94 09      			sty.h	<__stack, x
         17:D03D  86 8D      			stx	<__sp
 6848                        		__call		_check_BG
         17:D03F  20 6D FF   			call	_check_BG
 6849                        	
 6850                        		.dbg	line,	"include\routines_LEVELS.c", 1077; if(map_blk_flag == TILE_EMPTY)
 6851                        		__not.um	_map_blk_flag
         17:D042  AD B8 2B   			lda	_map_blk_flag
         17:D045  18         			clc
         17:D046  D0 01      			bne	!+
         17:D048  38         			sec
         17:D049             	!:
 6852                        		__bfalse	.LL204
         17:D049  90 67      			bcc	.LL204
 6853                        	
 6854                        		.dbg	line,	"include\routines_LEVELS.c", 1078; {
 6855                        	
 6856                        		.dbg	line,	"include\routines_LEVELS.c", 1079; for(i=1 ; i<3 ; i++)
 6857                        		__st.umiq	1, __joypad_DIR_end - 1  /* i */
         17:D04B  A9 01      			lda.l	#1
         17:D04D  8D 04 23   			sta	__joypad_DIR_end - 1
 6858    17:D050             	.LL205:
 6859                        		__ld.umq	__joypad_DIR_end - 1  /* i */
         17:D050  AD 04 23   			lda	__joypad_DIR_end - 1
 6860                        		__ult_b.uiq	3
         17:D053  C9 03      			cmp	#3		; Subtract integer from A.
         17:D055  6A         			ror	a		; CC if A < integer.
         17:D056  49 80      			eor	#$80
         17:D058  2A         			rol	a
 6861                        		__btrue		.LL207
         17:D059  B0 07      			bcs	.LL207
 6862                        		__bra		.LL208
         17:D05B  80 63      			bra	.LL208
 6863    17:D05D             	.LL206:
 6864                        		__inc.umq	__joypad_DIR_end - 1  /* i */
         17:D05D  EE 04 23   			inc	__joypad_DIR_end - 1
 6865                        		__bra		.LL205
         17:D060  80 EE      			bra	.LL205
 6866    17:D062             	.LL207:
 6867                        	
 6868                        		.dbg	line,	"include\routines_LEVELS.c", 1080; {
 6869                        	
 6870                        		.dbg	line,	"include\routines_LEVELS.c", 1081; check_BG( 15 , 8 + i );
 6871                        		__ld.wi		15
         17:D062  A9 0F      			lda.l	#15
         17:D064  C2         			cly
 6872                        		__pusharg.wr
         17:D065  A6 8D      			ldx	<__sp
         17:D067  CA         			dex
         17:D068  CA         			dex
         17:D069  95 08      			sta.l	<__stack, x
         17:D06B  94 09      			sty.h	<__stack, x
         17:D06D  86 8D      			stx	<__sp
 6873                        		__ld.wi		8
         17:D06F  A9 08      			lda.l	#8
         17:D071  C2         			cly
 6874                        		__add.um	__joypad_DIR_end - 1  /* i */
         17:D072  18         			clc
         17:D073  6D 04 23   			adc	__joypad_DIR_end - 1
         17:D076  90 01      			bcc	!+
         17:D078  C8         			iny
         17:D079             	!:
 6875                        		__pusharg.wr
         17:D079  A6 8D      			ldx	<__sp
         17:D07B  CA         			dex
         17:D07C  CA         			dex
         17:D07D  95 08      			sta.l	<__stack, x
         17:D07F  94 09      			sty.h	<__stack, x
         17:D081  86 8D      			stx	<__sp
 6876                        		__call		_check_BG
         17:D083  20 6D FF   			call	_check_BG
 6877                        	
 6878                        		.dbg	line,	"include\routines_LEVELS.c", 1083; if(map_blk_flag == TILE_LADDER)
 6879                        		__ld.umq	_map_blk_flag
         17:D086  AD B8 2B   			lda	_map_blk_flag
 6880                        		__equ_b.uiq	2
         17:D089  C9 02      			cmp	#2
         17:D08B  F0 01      			beq	!+
         17:D08D  18         			clc
         17:D08E             	!:
 6881                        		__bfalse	.LL209
         17:D08E  90 CD      			bcc	.LL209
 6882                        	
 6883                        		.dbg	line,	"include\routines_LEVELS.c", 1084; {
 6884                        	
 6885                        		.dbg	line,	"include\routines_LEVELS.c", 1085; sgx_map_pxl_y -= (2 - i);
 6886                        		__ld.wi		2
         17:D090  A9 02      			lda.l	#2
         17:D092  C2         			cly
 6887                        		__sub.um	__joypad_DIR_end - 1  /* i */
         17:D093  38         			sec
         17:D094  ED 04 23   			sbc	__joypad_DIR_end - 1
         17:D097  B0 01      			bcs	!+
         17:D099  88         			dey
         17:D09A             	!:
 6888                        		__isub_st.wmq	_sgx_map_pxl_y
         17:D09A  38         			sec
         17:D09B  49 FF      			eor	#$FF
         17:D09D  6D 99 26   			adc.l	_sgx_map_pxl_y
         17:D0A0  8D 99 26   			sta.l	_sgx_map_pxl_y
         17:D0A3  98         			tya
         17:D0A4  49 FF      			eor	#$FF
         17:D0A6  6D 9A 26   			adc.h	_sgx_map_pxl_y
         17:D0A9  8D 9A 26   			sta.h	_sgx_map_pxl_y
 6889                        	
 6890                        		.dbg	line,	"include\routines_LEVELS.c", 1086; break;
 6891                        		__bra		.LL208
         17:D0AC  80 12      			bra	.LL208
 6892                        	
 6893                        		.dbg	line,	"include\routines_LEVELS.c", 1087; }
 6894                        	
 6895                        		.dbg	line,	"include\routines_LEVELS.c", 1088; }
 6896    17:D0AE             	.LL209	.alias		.LL206
 6897                        		__bra		.LL206
         17:D0AE  80 AD      			bra	.LL206
 6898    17:D0B0             	.LL208	.alias		.LL210
 6899                        	
 6900                        		.dbg	line,	"include\routines_LEVELS.c", 1089; }
 6901                        	
 6902                        		.dbg	line,	"include\routines_LEVELS.c", 1091; else
 6903                        		__bra		.LL210
         17:D0B0  80 0E      			bra	.LL210
 6904    17:D0B2             	.LL204:
 6905                        	
 6906                        		.dbg	line,	"include\routines_LEVELS.c", 1092; {
 6907                        	
 6908                        		.dbg	line,	"include\routines_LEVELS.c", 1093; sgx_map_pxl_y -= 2;
 6909                        		__sub_st.wmiq	2, _sgx_map_pxl_y
         17:D0B2  38         			sec
         17:D0B3  AD 99 26   			lda.l	_sgx_map_pxl_y
         17:D0B6  E9 02      			sbc.l	#2
         17:D0B8  8D 99 26   			sta.l	_sgx_map_pxl_y
         17:D0BB  B0 03      			bcs	!+
         17:D0BD  CE 9A 26   			dec.h	_sgx_map_pxl_y
         17:D0C0             	!:
 6910                        	
 6911                        		.dbg	line,	"include\routines_LEVELS.c", 1094; }
 6912    17:D0C0             	.LL210:
 6913                        	
 6914                        		.dbg	line,	"include\routines_LEVELS.c", 1096; spr_set(weapon_id);
 6915                        		__ld.umq	_weapon_id
         17:D0C0  AD 26 23   			lda	_weapon_id
 6916                        		__call		_spr_set.1
         17:D0C3  20 DD E7   			call	_spr_set.1
 6917                        	
 6918                        		.dbg	line,	"include\routines_LEVELS.c", 1097; spr_hide();
 6919                        		__call		_spr_hide
         17:D0C6  20 F8 E7   			call	_spr_hide
 6920                        	
 6921                        		.dbg	line,	"include\routines_LEVELS.c", 1099; player_state = STATE_CLIMB_UP;
 6922                        		__st.umiq	11, _player_state
         17:D0C9  A9 0B      			lda.l	#11
         17:D0CB  8D 18 23   			sta	_player_state
 6923                        	
 6924                        		.dbg	line,	"include\routines_LEVELS.c", 1100; }
 6925                        	
 6926                        		.dbg	line,	"include\routines_LEVELS.c", 1101; }
 6927    17:D0CE             	.LL203	.alias		.LL211
 6928                        	
 6929                        		.dbg	line,	"include\routines_LEVELS.c", 1102; }
 6930    17:D0CE             	.LL200	.alias		.LL211
 6931                        	
 6932                        		.dbg	line,	"include\routines_LEVELS.c", 1105; //--------------------------------------------------------------------------------------//
 6933                        	
 6934                        		.dbg	line,	"include\routines_LEVELS.c", 1106; //                                     DOWN BUTTON                                      //
 6935                        	
 6936                        		.dbg	line,	"include\routines_LEVELS.c", 1107; //--------------------------------------------------------------------------------------//
 6937                        	
 6938                        		.dbg	line,	"include\routines_LEVELS.c", 1109; else if(joy(JOYPAD_1) & JOY_DOWN)
 6939                        		__bra		.LL211
         17:D0CE  4C 3E D2   			bra	.LL211
 6940    17:D0D1             	.LL199:
 6941                        		__ld.uiq	0
         17:D0D1  62         			cla
 6942                        		 _joy.1
         17:D0D2  AA         			tax
         17:D0D3  BD 28 22   			lda	joynow, x
         17:D0D6  BC D3 22   			ldy	joy6now, x
 6943                        		__tand.wi	64
         17:D0D9  29 40      			and	#64
         17:D0DB  C9 01      	!:		cmp	#1
 6944                        		__bfalse	.LL212
         17:D0DD  B0 03 4C 3E			bcc	.LL212
         17:D0E1  D2          
 6945                        	
 6946                        		.dbg	line,	"include\routines_LEVELS.c", 1110; {
 6947                        	
 6948                        		.dbg	line,	"include\routines_LEVELS.c", 1111; if(player_state == STATE_IDLE || player_state == STATE_WALK)
 6949                        		__not.um	_player_state
         17:D0E2  AD 18 23   			lda	_player_state
         17:D0E5  18         			clc
         17:D0E6  D0 01      			bne	!+
         17:D0E8  38         			sec
         17:D0E9             	!:
 6950                        		__btrue		.LL214
         17:D0E9  B0 08      			bcs	.LL214
 6951                        		__ld.umq	_player_state
         17:D0EB  AD 18 23   			lda	_player_state
 6952                        		__equ_b.uiq	1
         17:D0EE  C9 01      			cmp	#1
         17:D0F0  F0 01      			beq	!+
         17:D0F2  18         			clc
         17:D0F3             	!:
 6953    17:D0F3             	.LL214:
 6954                        		__bfalse	.LL213
         17:D0F3  90 0D      			bcc	.LL213
 6955                        	
 6956                        		.dbg	line,	"include\routines_LEVELS.c", 1112; {
 6957                        	
 6958                        		.dbg	line,	"include\routines_LEVELS.c", 1113; player_counter_anim = 1;
 6959                        		__st.umiq	1, _player_counter_anim
         17:D0F5  A9 01      			lda.l	#1
         17:D0F7  8D 1B 23   			sta	_player_counter_anim
 6960                        	
 6961                        		.dbg	line,	"include\routines_LEVELS.c", 1114; player_state = STATE_CROUCH;
 6962                        		__st.umiq	7, _player_state
         17:D0FA  A9 07      			lda.l	#7
         17:D0FC  8D 18 23   			sta	_player_state
 6963                        	
 6964                        		.dbg	line,	"include\routines_LEVELS.c", 1115; }
 6965                        	
 6966                        		.dbg	line,	"include\routines_LEVELS.c", 1118; else if(player_state == STATE_HANG || player_state == STATE_CLIMB_UP || player_state == STATE_CLIMB_DOWN)
 6967                        		__bra		.LL215
         17:D0FF  4C 3E D2   			bra	.LL215
 6968    17:D102             	.LL213:
 6969                        		__ld.umq	_player_state
         17:D102  AD 18 23   			lda	_player_state
 6970                        		__equ_b.uiq	10
         17:D105  C9 0A      			cmp	#10
         17:D107  F0 01      			beq	!+
         17:D109  18         			clc
         17:D10A             	!:
 6971                        		__btrue		.LL217
         17:D10A  B0 08      			bcs	.LL217
 6972                        		__ld.umq	_player_state
         17:D10C  AD 18 23   			lda	_player_state
 6973                        		__equ_b.uiq	11
         17:D10F  C9 0B      			cmp	#11
         17:D111  F0 01      			beq	!+
         17:D113  18         			clc
         17:D114             	!:
 6974    17:D114             	.LL217:
 6975                        		__btrue		.LL218
         17:D114  B0 08      			bcs	.LL218
 6976                        		__ld.umq	_player_state
         17:D116  AD 18 23   			lda	_player_state
 6977                        		__equ_b.uiq	12
         17:D119  C9 0C      			cmp	#12
         17:D11B  F0 01      			beq	!+
         17:D11D  18         			clc
         17:D11E             	!:
 6978    17:D11E             	.LL218:
 6979                        		__bfalse	.LL216
         17:D11E  B0 03 4C 3E			bcc	.LL216
         17:D122  D2          
 6980                        	
 6981                        		.dbg	line,	"include\routines_LEVELS.c", 1119; {
 6982                        	
 6983                        		.dbg	line,	"include\routines_LEVELS.c", 1120; if(player_attack == FALSE)
 6984                        		__not.um	_player_attack
         17:D123  AD 20 23   			lda	_player_attack
         17:D126  18         			clc
         17:D127  D0 01      			bne	!+
         17:D129  38         			sec
         17:D12A             	!:
 6985                        		__bfalse	.LL219
         17:D12A  B0 03 4C 3E			bcc	.LL219
         17:D12E  D2          
 6986                        	
 6987                        		.dbg	line,	"include\routines_LEVELS.c", 1121; {
 6988                        	
 6989                        		.dbg	line,	"include\routines_LEVELS.c", 1122; unsigned char i;
 6990                        	
 6991                        		.dbg	line,	"include\routines_LEVELS.c", 1124; check_BG( 15 , 10 );
 6992                        		__ld.wi		15
         17:D12F  A9 0F      			lda.l	#15
         17:D131  C2         			cly
 6993                        		__pusharg.wr
         17:D132  A6 8D      			ldx	<__sp
         17:D134  CA         			dex
         17:D135  CA         			dex
         17:D136  95 08      			sta.l	<__stack, x
         17:D138  94 09      			sty.h	<__stack, x
         17:D13A  86 8D      			stx	<__sp
 6994                        		__ld.wi		10
         17:D13C  A9 0A      			lda.l	#10
         17:D13E  C2         			cly
 6995                        		__pusharg.wr
         17:D13F  A6 8D      			ldx	<__sp
         17:D141  CA         			dex
         17:D142  CA         			dex
         17:D143  95 08      			sta.l	<__stack, x
         17:D145  94 09      			sty.h	<__stack, x
         17:D147  86 8D      			stx	<__sp
 6996                        		__call		_check_BG
         17:D149  20 6D FF   			call	_check_BG
 6997                        	
 6998                        		.dbg	line,	"include\routines_LEVELS.c", 1126; if(map_blk_flag == TILE_EMPTY)
 6999                        		__not.um	_map_blk_flag
         17:D14C  AD B8 2B   			lda	_map_blk_flag
         17:D14F  18         			clc
         17:D150  D0 01      			bne	!+
         17:D152  38         			sec
         17:D153             	!:
 7000                        		__bfalse	.LL220
         17:D153  B0 03 4C 22			bcc	.LL220
         17:D157  D2          
 7001                        	
 7002                        		.dbg	line,	"include\routines_LEVELS.c", 1127; {
 7003                        	
 7004                        		.dbg	line,	"include\routines_LEVELS.c", 1128; for(i=1 ; i<3 ; i++)
 7005                        		__st.umiq	1, __joypad_DIR_end - 2  /* i */
         17:D158  A9 01      			lda.l	#1
         17:D15A  8D 03 23   			sta	__joypad_DIR_end - 2
 7006    17:D15D             	.LL221:
 7007                        		__ld.umq	__joypad_DIR_end - 2  /* i */
         17:D15D  AD 03 23   			lda	__joypad_DIR_end - 2
 7008                        		__ult_b.uiq	3
         17:D160  C9 03      			cmp	#3		; Subtract integer from A.
         17:D162  6A         			ror	a		; CC if A < integer.
         17:D163  49 80      			eor	#$80
         17:D165  2A         			rol	a
 7009                        		__btrue		.LL223
         17:D166  B0 08      			bcs	.LL223
 7010                        		__bra		.LL224
         17:D168  4C 3E D2   			bra	.LL224
 7011    17:D16B             	.LL222:
 7012                        		__inc.umq	__joypad_DIR_end - 2  /* i */
         17:D16B  EE 03 23   			inc	__joypad_DIR_end - 2
 7013                        		__bra		.LL221
         17:D16E  80 ED      			bra	.LL221
 7014    17:D170             	.LL223:
 7015                        	
 7016                        		.dbg	line,	"include\routines_LEVELS.c", 1129; {
 7017                        	
 7018                        		.dbg	line,	"include\routines_LEVELS.c", 1130; check_BG( 15 , 22 + i );
 7019                        		__ld.wi		15
         17:D170  A9 0F      			lda.l	#15
         17:D172  C2         			cly
 7020                        		__pusharg.wr
         17:D173  A6 8D      			ldx	<__sp
         17:D175  CA         			dex
         17:D176  CA         			dex
         17:D177  95 08      			sta.l	<__stack, x
         17:D179  94 09      			sty.h	<__stack, x
         17:D17B  86 8D      			stx	<__sp
 7021                        		__ld.wi		22
         17:D17D  A9 16      			lda.l	#22
         17:D17F  C2         			cly
 7022                        		__add.um	__joypad_DIR_end - 2  /* i */
         17:D180  18         			clc
         17:D181  6D 03 23   			adc	__joypad_DIR_end - 2
         17:D184  90 01      			bcc	!+
         17:D186  C8         			iny
         17:D187             	!:
 7023                        		__pusharg.wr
         17:D187  A6 8D      			ldx	<__sp
         17:D189  CA         			dex
         17:D18A  CA         			dex
         17:D18B  95 08      			sta.l	<__stack, x
         17:D18D  94 09      			sty.h	<__stack, x
         17:D18F  86 8D      			stx	<__sp
 7024                        		__call		_check_BG
         17:D191  20 6D FF   			call	_check_BG
 7025                        	
 7026                        		.dbg	line,	"include\routines_LEVELS.c", 1132; if(map_blk_flag == TILE_LADDER)
 7027                        		__ld.umq	_map_blk_flag
         17:D194  AD B8 2B   			lda	_map_blk_flag
 7028                        		__equ_b.uiq	2
         17:D197  C9 02      			cmp	#2
         17:D199  F0 01      			beq	!+
         17:D19B  18         			clc
         17:D19C             	!:
 7029                        		__bfalse	.LL225
         17:D19C  90 1B      			bcc	.LL225
 7030                        	
 7031                        		.dbg	line,	"include\routines_LEVELS.c", 1133; {
 7032                        	
 7033                        		.dbg	line,	"include\routines_LEVELS.c", 1134; sgx_map_pxl_y += (2 - i);
 7034                        		__ld.wi		2
         17:D19E  A9 02      			lda.l	#2
         17:D1A0  C2         			cly
 7035                        		__sub.um	__joypad_DIR_end - 2  /* i */
         17:D1A1  38         			sec
         17:D1A2  ED 03 23   			sbc	__joypad_DIR_end - 2
         17:D1A5  B0 01      			bcs	!+
         17:D1A7  88         			dey
         17:D1A8             	!:
 7036                        		__add_st.wmq	_sgx_map_pxl_y
         17:D1A8  18         			clc
         17:D1A9  6D 99 26   			adc.l	_sgx_map_pxl_y
         17:D1AC  8D 99 26   			sta.l	_sgx_map_pxl_y
         17:D1AF  98         			tya
         17:D1B0  6D 9A 26   			adc.h	_sgx_map_pxl_y
         17:D1B3  8D 9A 26   			sta.h	_sgx_map_pxl_y
 7037                        	
 7038                        		.dbg	line,	"include\routines_LEVELS.c", 1135; break;
 7039                        		__bra		.LL224
         17:D1B6  4C 3E D2   			bra	.LL224
 7040                        	
 7041                        		.dbg	line,	"include\routines_LEVELS.c", 1136; }
 7042                        	
 7043                        		.dbg	line,	"include\routines_LEVELS.c", 1138; else
 7044    17:D1B9             	.LL225:
 7045                        	
 7046                        		.dbg	line,	"include\routines_LEVELS.c", 1139; {
 7047                        	
 7048                        		.dbg	line,	"include\routines_LEVELS.c", 1140; spr_set(player_id);
 7049                        		__ld.umq	_player_id
         17:D1B9  AD 17 23   			lda	_player_id
 7050                        		__call		_spr_set.1
         17:D1BC  20 DD E7   			call	_spr_set.1
 7051                        	
 7052                        		.dbg	line,	"include\routines_LEVELS.c", 1141; spr_pattern(PLAYER_FALL_VRAM_ADR);
 7053                        		__ld.wi		9216
         17:D1BF  62         			cla
         17:D1C0  A0 24      			ldy.h	#9216
 7054                        		__call		_spr_pattern.1
         17:D1C2  20 26 E8   			call	_spr_pattern.1
 7055                        	
 7056                        		.dbg	line,	"include\routines_LEVELS.c", 1143; spr_set(weapon_id);
 7057                        		__ld.umq	_weapon_id
         17:D1C5  AD 26 23   			lda	_weapon_id
 7058                        		__call		_spr_set.1
         17:D1C8  20 DD E7   			call	_spr_set.1
 7059                        	
 7060                        		.dbg	line,	"include\routines_LEVELS.c", 1144; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
 7061                        		__ld.wi		31808
         17:D1CB  A9 40      			lda.l	#31808
         17:D1CD  A0 7C      			ldy.h	#31808
 7062                        		__call		_spr_pattern.1
         17:D1CF  20 26 E8   			call	_spr_pattern.1
 7063                        	
 7064                        		.dbg	line,	"include\routines_LEVELS.c", 1145; spr_y(player_pos_y+4);
 7065                        		__ld.wm		_player_pos_y
         17:D1D2  AD DC 24   			lda.l	_player_pos_y
         17:D1D5  AC DD 24   			ldy.h	_player_pos_y
 7066                        		__add.wi	4
         17:D1D8  18         			clc
         17:D1D9  69 04      			adc.l	#4
         17:D1DB  90 01      			bcc	!+
         17:D1DD  C8         			iny
         17:D1DE             	!:
 7067                        		__call		_spr_y.1
         17:D1DE  20 19 E8   			call	_spr_y.1
 7068                        	
 7069                        		.dbg	line,	"include\routines_LEVELS.c", 1147; if(player_axis == AXIS_RIGHT)
 7070                        		__not.um	_player_axis
         17:D1E1  AD 19 23   			lda	_player_axis
         17:D1E4  18         			clc
         17:D1E5  D0 01      			bne	!+
         17:D1E7  38         			sec
         17:D1E8             	!:
 7071                        		__bfalse	.LL227
         17:D1E8  90 11      			bcc	.LL227
 7072                        	
 7073                        		.dbg	line,	"include\routines_LEVELS.c", 1148; {
 7074                        	
 7075                        		.dbg	line,	"include\routines_LEVELS.c", 1149; spr_x(player_pos_x-4);
 7076                        		__ld.wm		_player_pos_x
         17:D1EA  AD DA 24   			lda.l	_player_pos_x
         17:D1ED  AC DB 24   			ldy.h	_player_pos_x
 7077                        		__sub.wi	4
         17:D1F0  38         			sec
         17:D1F1  E9 04      			sbc.l	#4
         17:D1F3  B0 01      			bcs	!+
         17:D1F5  88         			dey
         17:D1F6             	!:
 7078                        		__call		_spr_x.1
         17:D1F6  20 0A E8   			call	_spr_x.1
 7079                        	
 7080                        		.dbg	line,	"include\routines_LEVELS.c", 1150; }
 7081                        	
 7082                        		.dbg	line,	"include\routines_LEVELS.c", 1151; 
 7083                        	
 7084                        		.dbg	line,	"include\routines_LEVELS.c", 1152; else
 7085                        		__bra		.LL228
         17:D1F9  80 0F      			bra	.LL228
 7086    17:D1FB             	.LL227:
 7087                        	
 7088                        		.dbg	line,	"include\routines_LEVELS.c", 1153; {
 7089                        	
 7090                        		.dbg	line,	"include\routines_LEVELS.c", 1154; spr_x(player_pos_x+20);
 7091                        		__ld.wm		_player_pos_x
         17:D1FB  AD DA 24   			lda.l	_player_pos_x
         17:D1FE  AC DB 24   			ldy.h	_player_pos_x
 7092                        		__add.wi	20
         17:D201  18         			clc
         17:D202  69 14      			adc.l	#20
         17:D204  90 01      			bcc	!+
         17:D206  C8         			iny
         17:D207             	!:
 7093                        		__call		_spr_x.1
         17:D207  20 0A E8   			call	_spr_x.1
 7094                        	
 7095                        		.dbg	line,	"include\routines_LEVELS.c", 1155; }
 7096    17:D20A             	.LL228:
 7097                        	
 7098                        		.dbg	line,	"include\routines_LEVELS.c", 1156; 
 7099                        	
 7100                        		.dbg	line,	"include\routines_LEVELS.c", 1158; jump_ladder = FALSE;
 7101                        		__st.umiq	0, _jump_ladder
         17:D20A  9C 21 23   			stz	_jump_ladder
 7102                        	
 7103                        		.dbg	line,	"include\routines_LEVELS.c", 1159; player_index_jump = 0;
 7104                        		__st.umiq	0, _player_index_jump
         17:D20D  9C 1C 23   			stz	_player_index_jump
 7105                        	
 7106                        		.dbg	line,	"include\routines_LEVELS.c", 1160; player_index_fall = 0;
 7107                        		__st.umiq	0, _player_index_fall
         17:D210  9C 1D 23   			stz	_player_index_fall
 7108                        	
 7109                        		.dbg	line,	"include\routines_LEVELS.c", 1161; fall_ladder = TRUE;
 7110                        		__st.umiq	1, _fall_ladder
         17:D213  A9 01      			lda.l	#1
         17:D215  8D 23 23   			sta	_fall_ladder
 7111                        	
 7112                        		.dbg	line,	"include\routines_LEVELS.c", 1162; player_state = STATE_FALL;
 7113                        		__st.umiq	9, _player_state
         17:D218  A9 09      			lda.l	#9
         17:D21A  8D 18 23   			sta	_player_state
 7114                        	
 7115                        		.dbg	line,	"include\routines_LEVELS.c", 1163; }
 7116    17:D21D             	.LL226	.alias		.LL222
 7117                        	
 7118                        		.dbg	line,	"include\routines_LEVELS.c", 1164; }
 7119                        		__bra		.LL222
         17:D21D  4C 6B D1   			bra	.LL222
 7120    17:D220             	.LL224	.alias		.LL229
 7121                        	
 7122                        		.dbg	line,	"include\routines_LEVELS.c", 1165; }
 7123                        	
 7124                        		.dbg	line,	"include\routines_LEVELS.c", 1167; else
 7125                        		__bra		.LL229
         17:D220  80 1C      			bra	.LL229
 7126    17:D222             	.LL220:
 7127                        	
 7128                        		.dbg	line,	"include\routines_LEVELS.c", 1168; {
 7129                        	
 7130                        		.dbg	line,	"include\routines_LEVELS.c", 1169; spr_set(weapon_id);
 7131                        		__ld.umq	_weapon_id
         17:D222  AD 26 23   			lda	_weapon_id
 7132                        		__call		_spr_set.1
         17:D225  20 DD E7   			call	_spr_set.1
 7133                        	
 7134                        		.dbg	line,	"include\routines_LEVELS.c", 1170; spr_hide();
 7135                        		__call		_spr_hide
         17:D228  20 F8 E7   			call	_spr_hide
 7136                        	
 7137                        		.dbg	line,	"include\routines_LEVELS.c", 1171; 
 7138                        	
 7139                        		.dbg	line,	"include\routines_LEVELS.c", 1172; sgx_map_pxl_y += 2;
 7140                        		__add_st.wmiq	2, _sgx_map_pxl_y
         17:D22B  18         			clc
         17:D22C  AD 99 26   			lda.l	_sgx_map_pxl_y
         17:D22F  69 02      			adc.l	#2
         17:D231  8D 99 26   			sta.l	_sgx_map_pxl_y
         17:D234  90 03      			bcc	!+
         17:D236  EE 9A 26   			inc.h	_sgx_map_pxl_y
         17:D239             	!:
 7141                        	
 7142                        		.dbg	line,	"include\routines_LEVELS.c", 1173; player_state = STATE_CLIMB_DOWN;
 7143                        		__st.umiq	12, _player_state
         17:D239  A9 0C      			lda.l	#12
         17:D23B  8D 18 23   			sta	_player_state
 7144                        	
 7145                        		.dbg	line,	"include\routines_LEVELS.c", 1174; }
 7146    17:D23E             	.LL229:
 7147                        	
 7148                        		.dbg	line,	"include\routines_LEVELS.c", 1175; }
 7149                        	
 7150                        		.dbg	line,	"include\routines_LEVELS.c", 1176; }
 7151    17:D23E             	.LL219:
 7152                        	
 7153                        		.dbg	line,	"include\routines_LEVELS.c", 1177; }
 7154    17:D23E             	.LL216:
 7155    17:D23E             	.LL215:
 7156                        	
 7157                        		.dbg	line,	"include\routines_LEVELS.c", 1178; }
 7158    17:D23E             	.LL212:
 7159    17:D23E             	.LL211:
 7160    17:D23E             	.LL198:
 7161    17:D23E             	.LL172:
 7162    17:D23E             	.LL135:
 7163                        		__return	0
         17:D23E  4C EF FF   			jmp	leave_proc
 7164                        		.dbg	clear
 7165                        		.endp
 7166               67E0     		.data
 7167               2303     		.bss
 7168    F8:2303             	__joypad_DIR_loc:
 7169    F8:2303             			ds	2
 7170    F8:2305             	__joypad_DIR_end:
 7171               E309     		.code
 7172                        		.pceas
 7173                        	
 7174                        		.dbg	line,	"include\routines_LEVELS.c", 1187; void update_PLAYER()
 7175                        		.dbg	line,	"include\routines_LEVELS.c", 1188; {
 7176                        	;***********************
 7177                        	;***********************
 7178                        	
 7179                        		.hucc
 7180    01:C1C9             		.proc		_update_PLAYER
 7181                        		__enter		_update_PLAYER
 7182                        	
 7183                        		.dbg	line,	"include\routines_LEVELS.c", 1189; if(player_state == STATE_IDLE)
 7184                        		__not.um	_player_state
         01:C1C9  AD 18 23   			lda	_player_state
         01:C1CC  18         			clc
         01:C1CD  D0 01      			bne	!+
         01:C1CF  38         			sec
         01:C1D0             	!:
 7185                        		__bfalse	.LL231
         01:C1D0  B0 03 4C 79			bcc	.LL231
         01:C1D4  C2          
 7186                        	
 7187                        		.dbg	line,	"include\routines_LEVELS.c", 1190; {
 7188                        	
 7189                        		.dbg	line,	"include\routines_LEVELS.c", 1191; if(player_counter_anim == 1)
 7190                        		__ld.umq	_player_counter_anim
         01:C1D5  AD 1B 23   			lda	_player_counter_anim
 7191                        		__equ_b.uiq	1
         01:C1D8  C9 01      			cmp	#1
         01:C1DA  F0 01      			beq	!+
         01:C1DC  18         			clc
         01:C1DD             	!:
 7192                        		__bfalse	.LL232
         01:C1DD  90 0F      			bcc	.LL232
 7193                        	
 7194                        		.dbg	line,	"include\routines_LEVELS.c", 1192; {
 7195                        	
 7196                        		.dbg	line,	"include\routines_LEVELS.c", 1193; spr_set(player_id);
 7197                        		__ld.umq	_player_id
         01:C1DF  AD 17 23   			lda	_player_id
 7198                        		__call		_spr_set.1
         01:C1E2  20 DD E7   			call	_spr_set.1
 7199                        	
 7200                        		.dbg	line,	"include\routines_LEVELS.c", 1194; spr_pattern(PLAYER_IDLE_VRAM_ADR);
 7201                        		__ld.wi		5120
         01:C1E5  62         			cla
         01:C1E6  A0 14      			ldy.h	#5120
 7202                        		__call		_spr_pattern.1
         01:C1E8  20 26 E8   			call	_spr_pattern.1
 7203                        	
 7204                        		.dbg	line,	"include\routines_LEVELS.c", 1196; player_counter_anim = 0;
 7205                        		__st.umiq	0, _player_counter_anim
         01:C1EB  9C 1B 23   			stz	_player_counter_anim
 7206                        	
 7207                        		.dbg	line,	"include\routines_LEVELS.c", 1197; }
 7208                        	
 7209                        		.dbg	line,	"include\routines_LEVELS.c", 1199; recenter_CAMERA();
 7210    01:C1EE             	.LL232:
 7211                        		__call		_recenter_CAMERA
         01:C1EE  20 63 FF   			call	_recenter_CAMERA
 7212                        	
 7213                        		.dbg	line,	"include\routines_LEVELS.c", 1202; // CHECK COLLISION WITH LEFT FLOOR //
 7214                        	
 7215                        		.dbg	line,	"include\routines_LEVELS.c", 1203; check_BG( 10 , 32 );//8
 7216                        		__ld.wi		10
         01:C1F1  A9 0A      			lda.l	#10
         01:C1F3  C2         			cly
 7217                        		__pusharg.wr
         01:C1F4  A6 8D      			ldx	<__sp
         01:C1F6  CA         			dex
         01:C1F7  CA         			dex
         01:C1F8  95 08      			sta.l	<__stack, x
         01:C1FA  94 09      			sty.h	<__stack, x
         01:C1FC  86 8D      			stx	<__sp
 7218                        		__ld.wi		32
         01:C1FE  A9 20      			lda.l	#32
         01:C200  C2         			cly
 7219                        		__pusharg.wr
         01:C201  A6 8D      			ldx	<__sp
         01:C203  CA         			dex
         01:C204  CA         			dex
         01:C205  95 08      			sta.l	<__stack, x
         01:C207  94 09      			sty.h	<__stack, x
         01:C209  86 8D      			stx	<__sp
 7220                        		__call		_check_BG
         01:C20B  20 6D FF   			call	_check_BG
 7221                        	
 7222                        		.dbg	line,	"include\routines_LEVELS.c", 1205; if(map_blk_flag == TILE_EMPTY)
 7223                        		__not.um	_map_blk_flag
         01:C20E  AD B8 2B   			lda	_map_blk_flag
         01:C211  18         			clc
         01:C212  D0 01      			bne	!+
         01:C214  38         			sec
         01:C215             	!:
 7224                        		__bfalse	.LL233
         01:C215  90 34      			bcc	.LL233
 7225                        	
 7226                        		.dbg	line,	"include\routines_LEVELS.c", 1206; {
 7227                        	
 7228                        		.dbg	line,	"include\routines_LEVELS.c", 1207; // CHECK COLLISION WITH RIGHT FLOOR //
 7229                        	
 7230                        		.dbg	line,	"include\routines_LEVELS.c", 1208; check_BG( 22 , 32 );//24
 7231                        		__ld.wi		22
         01:C217  A9 16      			lda.l	#22
         01:C219  C2         			cly
 7232                        		__pusharg.wr
         01:C21A  A6 8D      			ldx	<__sp
         01:C21C  CA         			dex
         01:C21D  CA         			dex
         01:C21E  95 08      			sta.l	<__stack, x
         01:C220  94 09      			sty.h	<__stack, x
         01:C222  86 8D      			stx	<__sp
 7233                        		__ld.wi		32
         01:C224  A9 20      			lda.l	#32
         01:C226  C2         			cly
 7234                        		__pusharg.wr
         01:C227  A6 8D      			ldx	<__sp
         01:C229  CA         			dex
         01:C22A  CA         			dex
         01:C22B  95 08      			sta.l	<__stack, x
         01:C22D  94 09      			sty.h	<__stack, x
         01:C22F  86 8D      			stx	<__sp
 7235                        		__call		_check_BG
         01:C231  20 6D FF   			call	_check_BG
 7236                        	
 7237                        		.dbg	line,	"include\routines_LEVELS.c", 1210; if(map_blk_flag == TILE_EMPTY)
 7238                        		__not.um	_map_blk_flag
         01:C234  AD B8 2B   			lda	_map_blk_flag
         01:C237  18         			clc
         01:C238  D0 01      			bne	!+
         01:C23A  38         			sec
         01:C23B             	!:
 7239                        		__bfalse	.LL234
         01:C23B  90 0E      			bcc	.LL234
 7240                        	
 7241                        		.dbg	line,	"include\routines_LEVELS.c", 1211; {
 7242                        	
 7243                        		.dbg	line,	"include\routines_LEVELS.c", 1212; //set_far_base(TABLE_PLAYER_TILES_BANK[player_naked],TABLE_PLAYER_TILES_ADR[player_naked]);
 7244                        	
 7245                        		.dbg	line,	"include\routines_LEVELS.c", 1213; //far_load_vram(PLAYER_VRAM_ADR,TILES_16);
 7246                        	
 7247                        		.dbg	line,	"include\routines_LEVELS.c", 1215; jump_ladder = FALSE;
 7248                        		__st.umiq	0, _jump_ladder
         01:C23D  9C 21 23   			stz	_jump_ladder
 7249                        	
 7250                        		.dbg	line,	"include\routines_LEVELS.c", 1216; player_index_jump = 0;
 7251                        		__st.umiq	0, _player_index_jump
         01:C240  9C 1C 23   			stz	_player_index_jump
 7252                        	
 7253                        		.dbg	line,	"include\routines_LEVELS.c", 1217; player_index_fall = 0;
 7254                        		__st.umiq	0, _player_index_fall
         01:C243  9C 1D 23   			stz	_player_index_fall
 7255                        	
 7256                        		.dbg	line,	"include\routines_LEVELS.c", 1218; player_state = STATE_FALL;
 7257                        		__st.umiq	9, _player_state
         01:C246  A9 09      			lda.l	#9
         01:C248  8D 18 23   			sta	_player_state
 7258                        	
 7259                        		.dbg	line,	"include\routines_LEVELS.c", 1219; }
 7260                        	
 7261                        		.dbg	line,	"include\routines_LEVELS.c", 1220; }
 7262    01:C24B             	.LL234:
 7263                        	
 7264                        		.dbg	line,	"include\routines_LEVELS.c", 1222; spr_set(weapon_id);
 7265    01:C24B             	.LL233:
 7266                        		__ld.umq	_weapon_id
         01:C24B  AD 26 23   			lda	_weapon_id
 7267                        		__call		_spr_set.1
         01:C24E  20 DD E7   			call	_spr_set.1
 7268                        	
 7269                        		.dbg	line,	"include\routines_LEVELS.c", 1223; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
 7270                        		__ld.wi		31808
         01:C251  A9 40      			lda.l	#31808
         01:C253  A0 7C      			ldy.h	#31808
 7271                        		__call		_spr_pattern.1
         01:C255  20 26 E8   			call	_spr_pattern.1
 7272                        	
 7273                        		.dbg	line,	"include\routines_LEVELS.c", 1224; spr_x(player_pos_x+8);
 7274                        		__ld.wm		_player_pos_x
         01:C258  AD DA 24   			lda.l	_player_pos_x
         01:C25B  AC DB 24   			ldy.h	_player_pos_x
 7275                        		__add.wi	8
         01:C25E  18         			clc
         01:C25F  69 08      			adc.l	#8
         01:C261  90 01      			bcc	!+
         01:C263  C8         			iny
         01:C264             	!:
 7276                        		__call		_spr_x.1
         01:C264  20 0A E8   			call	_spr_x.1
 7277                        	
 7278                        		.dbg	line,	"include\routines_LEVELS.c", 1225; spr_y(player_pos_y+16);
 7279                        		__ld.wm		_player_pos_y
         01:C267  AD DC 24   			lda.l	_player_pos_y
         01:C26A  AC DD 24   			ldy.h	_player_pos_y
 7280                        		__add.wi	16
         01:C26D  18         			clc
         01:C26E  69 10      			adc.l	#16
         01:C270  90 01      			bcc	!+
         01:C272  C8         			iny
         01:C273             	!:
 7281                        		__call		_spr_y.1
         01:C273  20 19 E8   			call	_spr_y.1
 7282                        	
 7283                        		.dbg	line,	"include\routines_LEVELS.c", 1226; }
 7284                        	
 7285                        		.dbg	line,	"include\routines_LEVELS.c", 1229; else if(player_state == STATE_WALK)
 7286                        		__bra		.LL235
         01:C276  4C 70 DB   			bra	.LL235
 7287    01:C279             	.LL231:
 7288                        		__ld.umq	_player_state
         01:C279  AD 18 23   			lda	_player_state
 7289                        		__equ_b.uiq	1
         01:C27C  C9 01      			cmp	#1
         01:C27E  F0 01      			beq	!+
         01:C280  18         			clc
         01:C281             	!:
 7290                        		__bfalse	.LL236
         01:C281  B0 03 4C 27			bcc	.LL236
         01:C285  C6          
 7291                        	
 7292                        		.dbg	line,	"include\routines_LEVELS.c", 1230; {
 7293                        	
 7294                        		.dbg	line,	"include\routines_LEVELS.c", 1231; recenter_CAMERA();
 7295                        		__call		_recenter_CAMERA
         01:C286  20 63 FF   			call	_recenter_CAMERA
 7296                        	
 7297                        		.dbg	line,	"include\routines_LEVELS.c", 1234; //--------------------------------------------------------------------------------------//
 7298                        	
 7299                        		.dbg	line,	"include\routines_LEVELS.c", 1235; //                                   FLOOR COLLISION                                    //
 7300                        	
 7301                        		.dbg	line,	"include\routines_LEVELS.c", 1236; //--------------------------------------------------------------------------------------//
 7302                        	
 7303                        		.dbg	line,	"include\routines_LEVELS.c", 1238; // CHECK COLLISION WITH LEFT FLOOR //
 7304                        	
 7305                        		.dbg	line,	"include\routines_LEVELS.c", 1239; check_BG( 10 , 32 );//8
 7306                        		__ld.wi		10
         01:C289  A9 0A      			lda.l	#10
         01:C28B  C2         			cly
 7307                        		__pusharg.wr
         01:C28C  A6 8D      			ldx	<__sp
         01:C28E  CA         			dex
         01:C28F  CA         			dex
         01:C290  95 08      			sta.l	<__stack, x
         01:C292  94 09      			sty.h	<__stack, x
         01:C294  86 8D      			stx	<__sp
 7308                        		__ld.wi		32
         01:C296  A9 20      			lda.l	#32
         01:C298  C2         			cly
 7309                        		__pusharg.wr
         01:C299  A6 8D      			ldx	<__sp
         01:C29B  CA         			dex
         01:C29C  CA         			dex
         01:C29D  95 08      			sta.l	<__stack, x
         01:C29F  94 09      			sty.h	<__stack, x
         01:C2A1  86 8D      			stx	<__sp
 7310                        		__call		_check_BG
         01:C2A3  20 6D FF   			call	_check_BG
 7311                        	
 7312                        		.dbg	line,	"include\routines_LEVELS.c", 1241; if(map_blk_flag == TILE_EMPTY)
 7313                        		__not.um	_map_blk_flag
         01:C2A6  AD B8 2B   			lda	_map_blk_flag
         01:C2A9  18         			clc
         01:C2AA  D0 01      			bne	!+
         01:C2AC  38         			sec
         01:C2AD             	!:
 7314                        		__bfalse	.LL237
         01:C2AD  B0 03 4C 65			bcc	.LL237
         01:C2B1  C3          
 7315                        	
 7316                        		.dbg	line,	"include\routines_LEVELS.c", 1242; {
 7317                        	
 7318                        		.dbg	line,	"include\routines_LEVELS.c", 1243; // CHECK COLLISION WITH RIGHT FLOOR //
 7319                        	
 7320                        		.dbg	line,	"include\routines_LEVELS.c", 1244; check_BG( 22 , 32 );//24
 7321                        		__ld.wi		22
         01:C2B2  A9 16      			lda.l	#22
         01:C2B4  C2         			cly
 7322                        		__pusharg.wr
         01:C2B5  A6 8D      			ldx	<__sp
         01:C2B7  CA         			dex
         01:C2B8  CA         			dex
         01:C2B9  95 08      			sta.l	<__stack, x
         01:C2BB  94 09      			sty.h	<__stack, x
         01:C2BD  86 8D      			stx	<__sp
 7323                        		__ld.wi		32
         01:C2BF  A9 20      			lda.l	#32
         01:C2C1  C2         			cly
 7324                        		__pusharg.wr
         01:C2C2  A6 8D      			ldx	<__sp
         01:C2C4  CA         			dex
         01:C2C5  CA         			dex
         01:C2C6  95 08      			sta.l	<__stack, x
         01:C2C8  94 09      			sty.h	<__stack, x
         01:C2CA  86 8D      			stx	<__sp
 7325                        		__call		_check_BG
         01:C2CC  20 6D FF   			call	_check_BG
 7326                        	
 7327                        		.dbg	line,	"include\routines_LEVELS.c", 1246; if(map_blk_flag == TILE_EMPTY)
 7328                        		__not.um	_map_blk_flag
         01:C2CF  AD B8 2B   			lda	_map_blk_flag
         01:C2D2  18         			clc
         01:C2D3  D0 01      			bne	!+
         01:C2D5  38         			sec
         01:C2D6             	!:
 7329                        		__bfalse	.LL238
         01:C2D6  90 11      			bcc	.LL238
 7330                        	
 7331                        		.dbg	line,	"include\routines_LEVELS.c", 1247; {
 7332                        	
 7333                        		.dbg	line,	"include\routines_LEVELS.c", 1248; /*spr_set(player_id);
 7334                        	
 7335                        		.dbg	line,	"include\routines_LEVELS.c", 1249; spr_pattern(PLAYER_IDLE_VRAM_ADR);
 7336                        	
 7337                        		.dbg	line,	"include\routines_LEVELS.c", 1251; spr_set(weapon_id);
 7338                        	
 7339                        		.dbg	line,	"include\routines_LEVELS.c", 1252; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
 7340                        	
 7341                        		.dbg	line,	"include\routines_LEVELS.c", 1253; spr_x(player_pos_x+8);
 7342                        	
 7343                        		.dbg	line,	"include\routines_LEVELS.c", 1254; spr_y(player_pos_y+16);*/
 7344                        	
 7345                        		.dbg	line,	"include\routines_LEVELS.c", 1256; jump_ladder = FALSE;
 7346                        		__st.umiq	0, _jump_ladder
         01:C2D8  9C 21 23   			stz	_jump_ladder
 7347                        	
 7348                        		.dbg	line,	"include\routines_LEVELS.c", 1257; player_index_jump = 0;
 7349                        		__st.umiq	0, _player_index_jump
         01:C2DB  9C 1C 23   			stz	_player_index_jump
 7350                        	
 7351                        		.dbg	line,	"include\routines_LEVELS.c", 1258; player_index_fall = 0;
 7352                        		__st.umiq	0, _player_index_fall
         01:C2DE  9C 1D 23   			stz	_player_index_fall
 7353                        	
 7354                        		.dbg	line,	"include\routines_LEVELS.c", 1259; player_state = STATE_FALL;
 7355                        		__st.umiq	9, _player_state
         01:C2E1  A9 09      			lda.l	#9
         01:C2E3  8D 18 23   			sta	_player_state
 7356                        	
 7357                        		.dbg	line,	"include\routines_LEVELS.c", 1260; }
 7358                        	
 7359                        		.dbg	line,	"include\routines_LEVELS.c", 1263; else
 7360                        		__bra		.LL239
         01:C2E6  4C D8 C3   			bra	.LL239
 7361    01:C2E9             	.LL238:
 7362                        	
 7363                        		.dbg	line,	"include\routines_LEVELS.c", 1264; {
 7364                        	
 7365                        		.dbg	line,	"include\routines_LEVELS.c", 1265; if(player_axis == AXIS_RIGHT)
 7366                        		__not.um	_player_axis
         01:C2E9  AD 19 23   			lda	_player_axis
         01:C2EC  18         			clc
         01:C2ED  D0 01      			bne	!+
         01:C2EF  38         			sec
         01:C2F0             	!:
 7367                        		__bfalse	.LL240
         01:C2F0  90 3A      			bcc	.LL240
 7368                        	
 7369                        		.dbg	line,	"include\routines_LEVELS.c", 1266; {
 7370                        	
 7371                        		.dbg	line,	"include\routines_LEVELS.c", 1267; // CHECK COLLISION WITH RIGHT WALL //
 7372                        	
 7373                        		.dbg	line,	"include\routines_LEVELS.c", 1268; check_BG( 24 , 31 ); // 24+2
 7374                        		__ld.wi		24
         01:C2F2  A9 18      			lda.l	#24
         01:C2F4  C2         			cly
 7375                        		__pusharg.wr
         01:C2F5  A6 8D      			ldx	<__sp
         01:C2F7  CA         			dex
         01:C2F8  CA         			dex
         01:C2F9  95 08      			sta.l	<__stack, x
         01:C2FB  94 09      			sty.h	<__stack, x
         01:C2FD  86 8D      			stx	<__sp
 7376                        		__ld.wi		31
         01:C2FF  A9 1F      			lda.l	#31
         01:C301  C2         			cly
 7377                        		__pusharg.wr
         01:C302  A6 8D      			ldx	<__sp
         01:C304  CA         			dex
         01:C305  CA         			dex
         01:C306  95 08      			sta.l	<__stack, x
         01:C308  94 09      			sty.h	<__stack, x
         01:C30A  86 8D      			stx	<__sp
 7378                        		__call		_check_BG
         01:C30C  20 6D FF   			call	_check_BG
 7379                        	
 7380                        		.dbg	line,	"include\routines_LEVELS.c", 1270; if(map_blk_flag == TILE_EMPTY)
 7381                        		__not.um	_map_blk_flag
         01:C30F  AD B8 2B   			lda	_map_blk_flag
         01:C312  18         			clc
         01:C313  D0 01      			bne	!+
         01:C315  38         			sec
         01:C316             	!:
 7382                        		__bfalse	.LL241
         01:C316  B0 03 4C D8			bcc	.LL241
         01:C31A  C3          
 7383                        	
 7384                        		.dbg	line,	"include\routines_LEVELS.c", 1271; {
 7385                        	
 7386                        		.dbg	line,	"include\routines_LEVELS.c", 1272; sgx_map_pxl_x += 2;
 7387                        		__add_st.wmiq	2, _sgx_map_pxl_x
         01:C31B  18         			clc
         01:C31C  AD 97 26   			lda.l	_sgx_map_pxl_x
         01:C31F  69 02      			adc.l	#2
         01:C321  8D 97 26   			sta.l	_sgx_map_pxl_x
         01:C324  90 03      			bcc	!+
         01:C326  EE 98 26   			inc.h	_sgx_map_pxl_x
         01:C329             	!:
 7388                        	
 7389                        		.dbg	line,	"include\routines_LEVELS.c", 1273; }
 7390                        	
 7391                        		.dbg	line,	"include\routines_LEVELS.c", 1274; }
 7392    01:C329             	.LL241	.alias		.LL242
 7393                        	
 7394                        		.dbg	line,	"include\routines_LEVELS.c", 1276; else
 7395                        		__bra		.LL242
         01:C329  4C D8 C3   			bra	.LL242
 7396    01:C32C             	.LL240:
 7397                        	
 7398                        		.dbg	line,	"include\routines_LEVELS.c", 1277; {
 7399                        	
 7400                        		.dbg	line,	"include\routines_LEVELS.c", 1278; // CHECK COLLISION WITH LEFT WALL //
 7401                        	
 7402                        		.dbg	line,	"include\routines_LEVELS.c", 1279; check_BG( 8 , 31 ); // 8-2
 7403                        		__ld.wi		8
         01:C32C  A9 08      			lda.l	#8
         01:C32E  C2         			cly
 7404                        		__pusharg.wr
         01:C32F  A6 8D      			ldx	<__sp
         01:C331  CA         			dex
         01:C332  CA         			dex
         01:C333  95 08      			sta.l	<__stack, x
         01:C335  94 09      			sty.h	<__stack, x
         01:C337  86 8D      			stx	<__sp
 7405                        		__ld.wi		31
         01:C339  A9 1F      			lda.l	#31
         01:C33B  C2         			cly
 7406                        		__pusharg.wr
         01:C33C  A6 8D      			ldx	<__sp
         01:C33E  CA         			dex
         01:C33F  CA         			dex
         01:C340  95 08      			sta.l	<__stack, x
         01:C342  94 09      			sty.h	<__stack, x
         01:C344  86 8D      			stx	<__sp
 7407                        		__call		_check_BG
         01:C346  20 6D FF   			call	_check_BG
 7408                        	
 7409                        		.dbg	line,	"include\routines_LEVELS.c", 1281; if(map_blk_flag == TILE_EMPTY)
 7410                        		__not.um	_map_blk_flag
         01:C349  AD B8 2B   			lda	_map_blk_flag
         01:C34C  18         			clc
         01:C34D  D0 01      			bne	!+
         01:C34F  38         			sec
         01:C350             	!:
 7411                        		__bfalse	.LL243
         01:C350  B0 03 4C D8			bcc	.LL243
         01:C354  C3          
 7412                        	
 7413                        		.dbg	line,	"include\routines_LEVELS.c", 1282; {
 7414                        	
 7415                        		.dbg	line,	"include\routines_LEVELS.c", 1283; sgx_map_pxl_x -= 2;
 7416                        		__sub_st.wmiq	2, _sgx_map_pxl_x
         01:C355  38         			sec
         01:C356  AD 97 26   			lda.l	_sgx_map_pxl_x
         01:C359  E9 02      			sbc.l	#2
         01:C35B  8D 97 26   			sta.l	_sgx_map_pxl_x
         01:C35E  B0 03      			bcs	!+
         01:C360  CE 98 26   			dec.h	_sgx_map_pxl_x
         01:C363             	!:
 7417                        	
 7418                        		.dbg	line,	"include\routines_LEVELS.c", 1284; }
 7419                        	
 7420                        		.dbg	line,	"include\routines_LEVELS.c", 1285; }
 7421    01:C363             	.LL243	.alias		.LL244
 7422    01:C363             	.LL242	.alias		.LL244
 7423                        	
 7424                        		.dbg	line,	"include\routines_LEVELS.c", 1286; }
 7425    01:C363             	.LL239	.alias		.LL244
 7426                        	
 7427                        		.dbg	line,	"include\routines_LEVELS.c", 1287; }
 7428                        	
 7429                        		.dbg	line,	"include\routines_LEVELS.c", 1290; else
 7430                        		__bra		.LL244
         01:C363  80 73      			bra	.LL244
 7431    01:C365             	.LL237:
 7432                        	
 7433                        		.dbg	line,	"include\routines_LEVELS.c", 1291; {
 7434                        	
 7435                        		.dbg	line,	"include\routines_LEVELS.c", 1292; if(player_axis == AXIS_RIGHT)
 7436                        		__not.um	_player_axis
         01:C365  AD 19 23   			lda	_player_axis
         01:C368  18         			clc
         01:C369  D0 01      			bne	!+
         01:C36B  38         			sec
         01:C36C             	!:
 7437                        		__bfalse	.LL245
         01:C36C  90 36      			bcc	.LL245
 7438                        	
 7439                        		.dbg	line,	"include\routines_LEVELS.c", 1293; {
 7440                        	
 7441                        		.dbg	line,	"include\routines_LEVELS.c", 1294; // CHECK COLLISION WITH RIGHT WALL //
 7442                        	
 7443                        		.dbg	line,	"include\routines_LEVELS.c", 1295; check_BG( 24 , 31 ); // 24+2
 7444                        		__ld.wi		24
         01:C36E  A9 18      			lda.l	#24
         01:C370  C2         			cly
 7445                        		__pusharg.wr
         01:C371  A6 8D      			ldx	<__sp
         01:C373  CA         			dex
         01:C374  CA         			dex
         01:C375  95 08      			sta.l	<__stack, x
         01:C377  94 09      			sty.h	<__stack, x
         01:C379  86 8D      			stx	<__sp
 7446                        		__ld.wi		31
         01:C37B  A9 1F      			lda.l	#31
         01:C37D  C2         			cly
 7447                        		__pusharg.wr
         01:C37E  A6 8D      			ldx	<__sp
         01:C380  CA         			dex
         01:C381  CA         			dex
         01:C382  95 08      			sta.l	<__stack, x
         01:C384  94 09      			sty.h	<__stack, x
         01:C386  86 8D      			stx	<__sp
 7448                        		__call		_check_BG
         01:C388  20 6D FF   			call	_check_BG
 7449                        	
 7450                        		.dbg	line,	"include\routines_LEVELS.c", 1297; if(map_blk_flag == TILE_EMPTY)
 7451                        		__not.um	_map_blk_flag
         01:C38B  AD B8 2B   			lda	_map_blk_flag
         01:C38E  18         			clc
         01:C38F  D0 01      			bne	!+
         01:C391  38         			sec
         01:C392             	!:
 7452                        		__bfalse	.LL246
         01:C392  90 44      			bcc	.LL246
 7453                        	
 7454                        		.dbg	line,	"include\routines_LEVELS.c", 1298; {
 7455                        	
 7456                        		.dbg	line,	"include\routines_LEVELS.c", 1299; sgx_map_pxl_x += 2;
 7457                        		__add_st.wmiq	2, _sgx_map_pxl_x
         01:C394  18         			clc
         01:C395  AD 97 26   			lda.l	_sgx_map_pxl_x
         01:C398  69 02      			adc.l	#2
         01:C39A  8D 97 26   			sta.l	_sgx_map_pxl_x
         01:C39D  90 03      			bcc	!+
         01:C39F  EE 98 26   			inc.h	_sgx_map_pxl_x
         01:C3A2             	!:
 7458                        	
 7459                        		.dbg	line,	"include\routines_LEVELS.c", 1300; }
 7460                        	
 7461                        		.dbg	line,	"include\routines_LEVELS.c", 1301; }
 7462    01:C3A2             	.LL246	.alias		.LL247
 7463                        	
 7464                        		.dbg	line,	"include\routines_LEVELS.c", 1303; else
 7465                        		__bra		.LL247
         01:C3A2  80 34      			bra	.LL247
 7466    01:C3A4             	.LL245:
 7467                        	
 7468                        		.dbg	line,	"include\routines_LEVELS.c", 1304; {
 7469                        	
 7470                        		.dbg	line,	"include\routines_LEVELS.c", 1305; // CHECK COLLISION WITH LEFT WALL //
 7471                        	
 7472                        		.dbg	line,	"include\routines_LEVELS.c", 1306; check_BG( 8 , 31 ); // 8-2
 7473                        		__ld.wi		8
         01:C3A4  A9 08      			lda.l	#8
         01:C3A6  C2         			cly
 7474                        		__pusharg.wr
         01:C3A7  A6 8D      			ldx	<__sp
         01:C3A9  CA         			dex
         01:C3AA  CA         			dex
         01:C3AB  95 08      			sta.l	<__stack, x
         01:C3AD  94 09      			sty.h	<__stack, x
         01:C3AF  86 8D      			stx	<__sp
 7475                        		__ld.wi		31
         01:C3B1  A9 1F      			lda.l	#31
         01:C3B3  C2         			cly
 7476                        		__pusharg.wr
         01:C3B4  A6 8D      			ldx	<__sp
         01:C3B6  CA         			dex
         01:C3B7  CA         			dex
         01:C3B8  95 08      			sta.l	<__stack, x
         01:C3BA  94 09      			sty.h	<__stack, x
         01:C3BC  86 8D      			stx	<__sp
 7477                        		__call		_check_BG
         01:C3BE  20 6D FF   			call	_check_BG
 7478                        	
 7479                        		.dbg	line,	"include\routines_LEVELS.c", 1308; if(map_blk_flag == TILE_EMPTY)
 7480                        		__not.um	_map_blk_flag
         01:C3C1  AD B8 2B   			lda	_map_blk_flag
         01:C3C4  18         			clc
         01:C3C5  D0 01      			bne	!+
         01:C3C7  38         			sec
         01:C3C8             	!:
 7481                        		__bfalse	.LL248
         01:C3C8  90 0E      			bcc	.LL248
 7482                        	
 7483                        		.dbg	line,	"include\routines_LEVELS.c", 1309; {
 7484                        	
 7485                        		.dbg	line,	"include\routines_LEVELS.c", 1310; sgx_map_pxl_x -= 2;
 7486                        		__sub_st.wmiq	2, _sgx_map_pxl_x
         01:C3CA  38         			sec
         01:C3CB  AD 97 26   			lda.l	_sgx_map_pxl_x
         01:C3CE  E9 02      			sbc.l	#2
         01:C3D0  8D 97 26   			sta.l	_sgx_map_pxl_x
         01:C3D3  B0 03      			bcs	!+
         01:C3D5  CE 98 26   			dec.h	_sgx_map_pxl_x
         01:C3D8             	!:
 7487                        	
 7488                        		.dbg	line,	"include\routines_LEVELS.c", 1311; }
 7489                        	
 7490                        		.dbg	line,	"include\routines_LEVELS.c", 1312; }
 7491    01:C3D8             	.LL248:
 7492    01:C3D8             	.LL247:
 7493                        	
 7494                        		.dbg	line,	"include\routines_LEVELS.c", 1313; }
 7495    01:C3D8             	.LL244:
 7496                        	
 7497                        		.dbg	line,	"include\routines_LEVELS.c", 1318; spr_set(player_id);
 7498                        		__ld.umq	_player_id
         01:C3D8  AD 17 23   			lda	_player_id
 7499                        		__call		_spr_set.1
         01:C3DB  20 DD E7   			call	_spr_set.1
 7500                        	
 7501                        		.dbg	line,	"include\routines_LEVELS.c", 1321; player_counter_anim += 1;
 7502                        		__add_st.umiq	1, _player_counter_anim
         01:C3DE  EE 1B 23   			inc	_player_counter_anim
 7503                        	
 7504                        		.dbg	line,	"include\routines_LEVELS.c", 1324; // UPDATE PLAYER TILES //
 7505                        	
 7506                        		.dbg	line,	"include\routines_LEVELS.c", 1325; if(player_counter_anim == 1)
 7507                        		__ld.umq	_player_counter_anim
         01:C3E1  AD 1B 23   			lda	_player_counter_anim
 7508                        		__equ_b.uiq	1
         01:C3E4  C9 01      			cmp	#1
         01:C3E6  F0 01      			beq	!+
         01:C3E8  18         			clc
         01:C3E9             	!:
 7509                        		__bfalse	.LL249
         01:C3E9  90 2A      			bcc	.LL249
 7510                        	
 7511                        		.dbg	line,	"include\routines_LEVELS.c", 1326; {
 7512                        	
 7513                        		.dbg	line,	"include\routines_LEVELS.c", 1327; spr_pattern(PLAYER_IDLE_VRAM_ADR);
 7514                        		__ld.wi		5120
         01:C3EB  62         			cla
         01:C3EC  A0 14      			ldy.h	#5120
 7515                        		__call		_spr_pattern.1
         01:C3EE  20 26 E8   			call	_spr_pattern.1
 7516                        	
 7517                        		.dbg	line,	"include\routines_LEVELS.c", 1329; spr_set(weapon_id);
 7518                        		__ld.umq	_weapon_id
         01:C3F1  AD 26 23   			lda	_weapon_id
 7519                        		__call		_spr_set.1
         01:C3F4  20 DD E7   			call	_spr_set.1
 7520                        	
 7521                        		.dbg	line,	"include\routines_LEVELS.c", 1330; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
 7522                        		__ld.wi		31808
         01:C3F7  A9 40      			lda.l	#31808
         01:C3F9  A0 7C      			ldy.h	#31808
 7523                        		__call		_spr_pattern.1
         01:C3FB  20 26 E8   			call	_spr_pattern.1
 7524                        	
 7525                        		.dbg	line,	"include\routines_LEVELS.c", 1331; spr_x(player_pos_x+8);
 7526                        		__ld.wm		_player_pos_x
         01:C3FE  AD DA 24   			lda.l	_player_pos_x
         01:C401  AC DB 24   			ldy.h	_player_pos_x
 7527                        		__add.wi	8
         01:C404  18         			clc
         01:C405  69 08      			adc.l	#8
         01:C407  90 01      			bcc	!+
         01:C409  C8         			iny
         01:C40A             	!:
 7528                        		__call		_spr_x.1
         01:C40A  20 0A E8   			call	_spr_x.1
 7529                        	
 7530                        		.dbg	line,	"include\routines_LEVELS.c", 1332; weapon_y_offset = 16;
 7531                        		__st.umiq	16, _weapon_y_offset
         01:C40D  A9 10      			lda.l	#16
         01:C40F  8D 4C 26   			sta	_weapon_y_offset
 7532                        	
 7533                        		.dbg	line,	"include\routines_LEVELS.c", 1333; //spr_y(player_pos_y+16);
 7534                        	
 7535                        		.dbg	line,	"include\routines_LEVELS.c", 1334; }
 7536                        	
 7537                        		.dbg	line,	"include\routines_LEVELS.c", 1337; else if(player_counter_anim == 2)
 7538                        		__bra		.LL250
         01:C412  4C 0B C6   			bra	.LL250
 7539    01:C415             	.LL249:
 7540                        		__ld.umq	_player_counter_anim
         01:C415  AD 1B 23   			lda	_player_counter_anim
 7541                        		__equ_b.uiq	2
         01:C418  C9 02      			cmp	#2
         01:C41A  F0 01      			beq	!+
         01:C41C  18         			clc
         01:C41D             	!:
 7542                        		__bfalse	.LL251
         01:C41D  90 45      			bcc	.LL251
 7543                        	
 7544                        		.dbg	line,	"include\routines_LEVELS.c", 1338; {
 7545                        	
 7546                        		.dbg	line,	"include\routines_LEVELS.c", 1339; spr_pattern(PLAYER_WALK_1_VRAM_ADR);
 7547                        		__ld.wi		5376
         01:C41F  62         			cla
         01:C420  A0 15      			ldy.h	#5376
 7548                        		__call		_spr_pattern.1
         01:C422  20 26 E8   			call	_spr_pattern.1
 7549                        	
 7550                        		.dbg	line,	"include\routines_LEVELS.c", 1341; spr_set(weapon_id);
 7551                        		__ld.umq	_weapon_id
         01:C425  AD 26 23   			lda	_weapon_id
 7552                        		__call		_spr_set.1
         01:C428  20 DD E7   			call	_spr_set.1
 7553                        	
 7554                        		.dbg	line,	"include\routines_LEVELS.c", 1342; spr_pattern(WEAPON_WALK_1_VRAM_ADRESS);
 7555                        		__ld.wi		31872
         01:C42B  A9 80      			lda.l	#31872
         01:C42D  A0 7C      			ldy.h	#31872
 7556                        		__call		_spr_pattern.1
         01:C42F  20 26 E8   			call	_spr_pattern.1
 7557                        	
 7558                        		.dbg	line,	"include\routines_LEVELS.c", 1343; weapon_y_offset = 17;
 7559                        		__st.umiq	17, _weapon_y_offset
         01:C432  A9 11      			lda.l	#17
         01:C434  8D 4C 26   			sta	_weapon_y_offset
 7560                        	
 7561                        		.dbg	line,	"include\routines_LEVELS.c", 1344; //spr_y(player_pos_y+17);
 7562                        	
 7563                        		.dbg	line,	"include\routines_LEVELS.c", 1346; if(player_axis == AXIS_RIGHT)
 7564                        		__not.um	_player_axis
         01:C437  AD 19 23   			lda	_player_axis
         01:C43A  18         			clc
         01:C43B  D0 01      			bne	!+
         01:C43D  38         			sec
         01:C43E             	!:
 7565                        		__bfalse	.LL252
         01:C43E  90 12      			bcc	.LL252
 7566                        	
 7567                        		.dbg	line,	"include\routines_LEVELS.c", 1347; {
 7568                        	
 7569                        		.dbg	line,	"include\routines_LEVELS.c", 1348; spr_x(player_pos_x+5);
 7570                        		__ld.wm		_player_pos_x
         01:C440  AD DA 24   			lda.l	_player_pos_x
         01:C443  AC DB 24   			ldy.h	_player_pos_x
 7571                        		__add.wi	5
         01:C446  18         			clc
         01:C447  69 05      			adc.l	#5
         01:C449  90 01      			bcc	!+
         01:C44B  C8         			iny
         01:C44C             	!:
 7572                        		__call		_spr_x.1
         01:C44C  20 0A E8   			call	_spr_x.1
 7573                        	
 7574                        		.dbg	line,	"include\routines_LEVELS.c", 1349; }
 7575                        	
 7576                        		.dbg	line,	"include\routines_LEVELS.c", 1351; else
 7577                        		__bra		.LL253
         01:C44F  4C 0B C6   			bra	.LL253
 7578    01:C452             	.LL252:
 7579                        	
 7580                        		.dbg	line,	"include\routines_LEVELS.c", 1352; {
 7581                        	
 7582                        		.dbg	line,	"include\routines_LEVELS.c", 1353; spr_x(player_pos_x+11);
 7583                        		__ld.wm		_player_pos_x
         01:C452  AD DA 24   			lda.l	_player_pos_x
         01:C455  AC DB 24   			ldy.h	_player_pos_x
 7584                        		__add.wi	11
         01:C458  18         			clc
         01:C459  69 0B      			adc.l	#11
         01:C45B  90 01      			bcc	!+
         01:C45D  C8         			iny
         01:C45E             	!:
 7585                        		__call		_spr_x.1
         01:C45E  20 0A E8   			call	_spr_x.1
 7586                        	
 7587                        		.dbg	line,	"include\routines_LEVELS.c", 1354; }
 7588    01:C461             	.LL253	.alias		.LL254
 7589                        	
 7590                        		.dbg	line,	"include\routines_LEVELS.c", 1355; }
 7591                        	
 7592                        		.dbg	line,	"include\routines_LEVELS.c", 1358; else if(player_counter_anim == 4)
 7593                        		__bra		.LL254
         01:C461  4C 0B C6   			bra	.LL254
 7594    01:C464             	.LL251:
 7595                        		__ld.umq	_player_counter_anim
         01:C464  AD 1B 23   			lda	_player_counter_anim
 7596                        		__equ_b.uiq	4
         01:C467  C9 04      			cmp	#4
         01:C469  F0 01      			beq	!+
         01:C46B  18         			clc
         01:C46C             	!:
 7597                        		__bfalse	.LL255
         01:C46C  90 40      			bcc	.LL255
 7598                        	
 7599                        		.dbg	line,	"include\routines_LEVELS.c", 1359; {
 7600                        	
 7601                        		.dbg	line,	"include\routines_LEVELS.c", 1360; spr_pattern(PLAYER_WALK_2_VRAM_ADR);
 7602                        		__ld.wi		5632
         01:C46E  62         			cla
         01:C46F  A0 16      			ldy.h	#5632
 7603                        		__call		_spr_pattern.1
         01:C471  20 26 E8   			call	_spr_pattern.1
 7604                        	
 7605                        		.dbg	line,	"include\routines_LEVELS.c", 1361; 
 7606                        	
 7607                        		.dbg	line,	"include\routines_LEVELS.c", 1362; spr_set(weapon_id);
 7608                        		__ld.umq	_weapon_id
         01:C474  AD 26 23   			lda	_weapon_id
 7609                        		__call		_spr_set.1
         01:C477  20 DD E7   			call	_spr_set.1
 7610                        	
 7611                        		.dbg	line,	"include\routines_LEVELS.c", 1363; spr_pattern(WEAPON_WALK_2_VRAM_ADRESS);
 7612                        		__ld.wi		31936
         01:C47A  A9 C0      			lda.l	#31936
         01:C47C  A0 7C      			ldy.h	#31936
 7613                        		__call		_spr_pattern.1
         01:C47E  20 26 E8   			call	_spr_pattern.1
 7614                        	
 7615                        		.dbg	line,	"include\routines_LEVELS.c", 1365; if(player_axis == AXIS_RIGHT)
 7616                        		__not.um	_player_axis
         01:C481  AD 19 23   			lda	_player_axis
         01:C484  18         			clc
         01:C485  D0 01      			bne	!+
         01:C487  38         			sec
         01:C488             	!:
 7617                        		__bfalse	.LL256
         01:C488  90 12      			bcc	.LL256
 7618                        	
 7619                        		.dbg	line,	"include\routines_LEVELS.c", 1366; {
 7620                        	
 7621                        		.dbg	line,	"include\routines_LEVELS.c", 1367; spr_x(player_pos_x+3);
 7622                        		__ld.wm		_player_pos_x
         01:C48A  AD DA 24   			lda.l	_player_pos_x
         01:C48D  AC DB 24   			ldy.h	_player_pos_x
 7623                        		__add.wi	3
         01:C490  18         			clc
         01:C491  69 03      			adc.l	#3
         01:C493  90 01      			bcc	!+
         01:C495  C8         			iny
         01:C496             	!:
 7624                        		__call		_spr_x.1
         01:C496  20 0A E8   			call	_spr_x.1
 7625                        	
 7626                        		.dbg	line,	"include\routines_LEVELS.c", 1368; }
 7627                        	
 7628                        		.dbg	line,	"include\routines_LEVELS.c", 1370; else
 7629                        		__bra		.LL257
         01:C499  4C 0B C6   			bra	.LL257
 7630    01:C49C             	.LL256:
 7631                        	
 7632                        		.dbg	line,	"include\routines_LEVELS.c", 1371; {
 7633                        	
 7634                        		.dbg	line,	"include\routines_LEVELS.c", 1372; spr_x(player_pos_x+13);
 7635                        		__ld.wm		_player_pos_x
         01:C49C  AD DA 24   			lda.l	_player_pos_x
         01:C49F  AC DB 24   			ldy.h	_player_pos_x
 7636                        		__add.wi	13
         01:C4A2  18         			clc
         01:C4A3  69 0D      			adc.l	#13
         01:C4A5  90 01      			bcc	!+
         01:C4A7  C8         			iny
         01:C4A8             	!:
 7637                        		__call		_spr_x.1
         01:C4A8  20 0A E8   			call	_spr_x.1
 7638                        	
 7639                        		.dbg	line,	"include\routines_LEVELS.c", 1373; }
 7640    01:C4AB             	.LL257	.alias		.LL258
 7641                        	
 7642                        		.dbg	line,	"include\routines_LEVELS.c", 1374; }
 7643                        	
 7644                        		.dbg	line,	"include\routines_LEVELS.c", 1377; else if(player_counter_anim == 7)
 7645                        		__bra		.LL258
         01:C4AB  4C 0B C6   			bra	.LL258
 7646    01:C4AE             	.LL255:
 7647                        		__ld.umq	_player_counter_anim
         01:C4AE  AD 1B 23   			lda	_player_counter_anim
 7648                        		__equ_b.uiq	7
         01:C4B1  C9 07      			cmp	#7
         01:C4B3  F0 01      			beq	!+
         01:C4B5  18         			clc
         01:C4B6             	!:
 7649                        		__bfalse	.LL259
         01:C4B6  90 40      			bcc	.LL259
 7650                        	
 7651                        		.dbg	line,	"include\routines_LEVELS.c", 1378; {
 7652                        	
 7653                        		.dbg	line,	"include\routines_LEVELS.c", 1379; //spr_set(player_id);
 7654                        	
 7655                        		.dbg	line,	"include\routines_LEVELS.c", 1380; spr_pattern(PLAYER_WALK_3_VRAM_ADR);
 7656                        		__ld.wi		5888
         01:C4B8  62         			cla
         01:C4B9  A0 17      			ldy.h	#5888
 7657                        		__call		_spr_pattern.1
         01:C4BB  20 26 E8   			call	_spr_pattern.1
 7658                        	
 7659                        		.dbg	line,	"include\routines_LEVELS.c", 1382; spr_set(weapon_id);
 7660                        		__ld.umq	_weapon_id
         01:C4BE  AD 26 23   			lda	_weapon_id
 7661                        		__call		_spr_set.1
         01:C4C1  20 DD E7   			call	_spr_set.1
 7662                        	
 7663                        		.dbg	line,	"include\routines_LEVELS.c", 1383; spr_pattern(WEAPON_WALK_1_VRAM_ADRESS);
 7664                        		__ld.wi		31872
         01:C4C4  A9 80      			lda.l	#31872
         01:C4C6  A0 7C      			ldy.h	#31872
 7665                        		__call		_spr_pattern.1
         01:C4C8  20 26 E8   			call	_spr_pattern.1
 7666                        	
 7667                        		.dbg	line,	"include\routines_LEVELS.c", 1385; if(player_axis == AXIS_RIGHT)
 7668                        		__not.um	_player_axis
         01:C4CB  AD 19 23   			lda	_player_axis
         01:C4CE  18         			clc
         01:C4CF  D0 01      			bne	!+
         01:C4D1  38         			sec
         01:C4D2             	!:
 7669                        		__bfalse	.LL260
         01:C4D2  90 12      			bcc	.LL260
 7670                        	
 7671                        		.dbg	line,	"include\routines_LEVELS.c", 1386; {
 7672                        	
 7673                        		.dbg	line,	"include\routines_LEVELS.c", 1387; spr_x(player_pos_x+5);
 7674                        		__ld.wm		_player_pos_x
         01:C4D4  AD DA 24   			lda.l	_player_pos_x
         01:C4D7  AC DB 24   			ldy.h	_player_pos_x
 7675                        		__add.wi	5
         01:C4DA  18         			clc
         01:C4DB  69 05      			adc.l	#5
         01:C4DD  90 01      			bcc	!+
         01:C4DF  C8         			iny
         01:C4E0             	!:
 7676                        		__call		_spr_x.1
         01:C4E0  20 0A E8   			call	_spr_x.1
 7677                        	
 7678                        		.dbg	line,	"include\routines_LEVELS.c", 1388; }
 7679                        	
 7680                        		.dbg	line,	"include\routines_LEVELS.c", 1390; else
 7681                        		__bra		.LL261
         01:C4E3  4C 0B C6   			bra	.LL261
 7682    01:C4E6             	.LL260:
 7683                        	
 7684                        		.dbg	line,	"include\routines_LEVELS.c", 1391; {
 7685                        	
 7686                        		.dbg	line,	"include\routines_LEVELS.c", 1392; spr_x(player_pos_x+11);
 7687                        		__ld.wm		_player_pos_x
         01:C4E6  AD DA 24   			lda.l	_player_pos_x
         01:C4E9  AC DB 24   			ldy.h	_player_pos_x
 7688                        		__add.wi	11
         01:C4EC  18         			clc
         01:C4ED  69 0B      			adc.l	#11
         01:C4EF  90 01      			bcc	!+
         01:C4F1  C8         			iny
         01:C4F2             	!:
 7689                        		__call		_spr_x.1
         01:C4F2  20 0A E8   			call	_spr_x.1
 7690                        	
 7691                        		.dbg	line,	"include\routines_LEVELS.c", 1393; }
 7692    01:C4F5             	.LL261	.alias		.LL262
 7693                        	
 7694                        		.dbg	line,	"include\routines_LEVELS.c", 1394; }
 7695                        	
 7696                        		.dbg	line,	"include\routines_LEVELS.c", 1397; else if(player_counter_anim == 9)
 7697                        		__bra		.LL262
         01:C4F5  4C 0B C6   			bra	.LL262
 7698    01:C4F8             	.LL259:
 7699                        		__ld.umq	_player_counter_anim
         01:C4F8  AD 1B 23   			lda	_player_counter_anim
 7700                        		__equ_b.uiq	9
         01:C4FB  C9 09      			cmp	#9
         01:C4FD  F0 01      			beq	!+
         01:C4FF  18         			clc
         01:C500             	!:
 7701                        		__bfalse	.LL263
         01:C500  90 2A      			bcc	.LL263
 7702                        	
 7703                        		.dbg	line,	"include\routines_LEVELS.c", 1398; {
 7704                        	
 7705                        		.dbg	line,	"include\routines_LEVELS.c", 1399; //spr_set(player_id);
 7706                        	
 7707                        		.dbg	line,	"include\routines_LEVELS.c", 1400; spr_pattern(PLAYER_IDLE_VRAM_ADR);
 7708                        		__ld.wi		5120
         01:C502  62         			cla
         01:C503  A0 14      			ldy.h	#5120
 7709                        		__call		_spr_pattern.1
         01:C505  20 26 E8   			call	_spr_pattern.1
 7710                        	
 7711                        		.dbg	line,	"include\routines_LEVELS.c", 1402; spr_set(weapon_id);
 7712                        		__ld.umq	_weapon_id
         01:C508  AD 26 23   			lda	_weapon_id
 7713                        		__call		_spr_set.1
         01:C50B  20 DD E7   			call	_spr_set.1
 7714                        	
 7715                        		.dbg	line,	"include\routines_LEVELS.c", 1403; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
 7716                        		__ld.wi		31808
         01:C50E  A9 40      			lda.l	#31808
         01:C510  A0 7C      			ldy.h	#31808
 7717                        		__call		_spr_pattern.1
         01:C512  20 26 E8   			call	_spr_pattern.1
 7718                        	
 7719                        		.dbg	line,	"include\routines_LEVELS.c", 1404; spr_x(player_pos_x+8);
 7720                        		__ld.wm		_player_pos_x
         01:C515  AD DA 24   			lda.l	_player_pos_x
         01:C518  AC DB 24   			ldy.h	_player_pos_x
 7721                        		__add.wi	8
         01:C51B  18         			clc
         01:C51C  69 08      			adc.l	#8
         01:C51E  90 01      			bcc	!+
         01:C520  C8         			iny
         01:C521             	!:
 7722                        		__call		_spr_x.1
         01:C521  20 0A E8   			call	_spr_x.1
 7723                        	
 7724                        		.dbg	line,	"include\routines_LEVELS.c", 1405; weapon_y_offset = 16;
 7725                        		__st.umiq	16, _weapon_y_offset
         01:C524  A9 10      			lda.l	#16
         01:C526  8D 4C 26   			sta	_weapon_y_offset
 7726                        	
 7727                        		.dbg	line,	"include\routines_LEVELS.c", 1406; //pr_y(player_pos_y+16);
 7728                        	
 7729                        		.dbg	line,	"include\routines_LEVELS.c", 1407; }
 7730                        	
 7731                        		.dbg	line,	"include\routines_LEVELS.c", 1410; else if(player_counter_anim == 12)
 7732                        		__bra		.LL264
         01:C529  4C 0B C6   			bra	.LL264
 7733    01:C52C             	.LL263:
 7734                        		__ld.umq	_player_counter_anim
         01:C52C  AD 1B 23   			lda	_player_counter_anim
 7735                        		__equ_b.uiq	12
         01:C52F  C9 0C      			cmp	#12
         01:C531  F0 01      			beq	!+
         01:C533  18         			clc
         01:C534             	!:
 7736                        		__bfalse	.LL265
         01:C534  90 3E      			bcc	.LL265
 7737                        	
 7738                        		.dbg	line,	"include\routines_LEVELS.c", 1411; {
 7739                        	
 7740                        		.dbg	line,	"include\routines_LEVELS.c", 1412; spr_pattern(PLAYER_WALK_4_VRAM_ADR);
 7741                        		__ld.wi		6144
         01:C536  62         			cla
         01:C537  A0 18      			ldy.h	#6144
 7742                        		__call		_spr_pattern.1
         01:C539  20 26 E8   			call	_spr_pattern.1
 7743                        	
 7744                        		.dbg	line,	"include\routines_LEVELS.c", 1414; spr_set(weapon_id);
 7745                        		__ld.umq	_weapon_id
         01:C53C  AD 26 23   			lda	_weapon_id
 7746                        		__call		_spr_set.1
         01:C53F  20 DD E7   			call	_spr_set.1
 7747                        	
 7748                        		.dbg	line,	"include\routines_LEVELS.c", 1415; weapon_y_offset = 14;
 7749                        		__st.umiq	14, _weapon_y_offset
         01:C542  A9 0E      			lda.l	#14
         01:C544  8D 4C 26   			sta	_weapon_y_offset
 7750                        	
 7751                        		.dbg	line,	"include\routines_LEVELS.c", 1416; //spr_y(player_pos_y+14);
 7752                        	
 7753                        		.dbg	line,	"include\routines_LEVELS.c", 1418; if(player_axis == AXIS_RIGHT)
 7754                        		__not.um	_player_axis
         01:C547  AD 19 23   			lda	_player_axis
         01:C54A  18         			clc
         01:C54B  D0 01      			bne	!+
         01:C54D  38         			sec
         01:C54E             	!:
 7755                        		__bfalse	.LL266
         01:C54E  90 12      			bcc	.LL266
 7756                        	
 7757                        		.dbg	line,	"include\routines_LEVELS.c", 1419; {
 7758                        	
 7759                        		.dbg	line,	"include\routines_LEVELS.c", 1420; spr_x(player_pos_x+12);
 7760                        		__ld.wm		_player_pos_x
         01:C550  AD DA 24   			lda.l	_player_pos_x
         01:C553  AC DB 24   			ldy.h	_player_pos_x
 7761                        		__add.wi	12
         01:C556  18         			clc
         01:C557  69 0C      			adc.l	#12
         01:C559  90 01      			bcc	!+
         01:C55B  C8         			iny
         01:C55C             	!:
 7762                        		__call		_spr_x.1
         01:C55C  20 0A E8   			call	_spr_x.1
 7763                        	
 7764                        		.dbg	line,	"include\routines_LEVELS.c", 1421; }
 7765                        	
 7766                        		.dbg	line,	"include\routines_LEVELS.c", 1423; else
 7767                        		__bra		.LL267
         01:C55F  4C 0B C6   			bra	.LL267
 7768    01:C562             	.LL266:
 7769                        	
 7770                        		.dbg	line,	"include\routines_LEVELS.c", 1424; {
 7771                        	
 7772                        		.dbg	line,	"include\routines_LEVELS.c", 1425; spr_x(player_pos_x+4);
 7773                        		__ld.wm		_player_pos_x
         01:C562  AD DA 24   			lda.l	_player_pos_x
         01:C565  AC DB 24   			ldy.h	_player_pos_x
 7774                        		__add.wi	4
         01:C568  18         			clc
         01:C569  69 04      			adc.l	#4
         01:C56B  90 01      			bcc	!+
         01:C56D  C8         			iny
         01:C56E             	!:
 7775                        		__call		_spr_x.1
         01:C56E  20 0A E8   			call	_spr_x.1
 7776                        	
 7777                        		.dbg	line,	"include\routines_LEVELS.c", 1426; }
 7778    01:C571             	.LL267	.alias		.LL268
 7779                        	
 7780                        		.dbg	line,	"include\routines_LEVELS.c", 1427; }
 7781                        	
 7782                        		.dbg	line,	"include\routines_LEVELS.c", 1430; else if(player_counter_anim == 15)
 7783                        		__bra		.LL268
         01:C571  4C 0B C6   			bra	.LL268
 7784    01:C574             	.LL265:
 7785                        		__ld.umq	_player_counter_anim
         01:C574  AD 1B 23   			lda	_player_counter_anim
 7786                        		__equ_b.uiq	15
         01:C577  C9 0F      			cmp	#15
         01:C579  F0 01      			beq	!+
         01:C57B  18         			clc
         01:C57C             	!:
 7787                        		__bfalse	.LL269
         01:C57C  90 3A      			bcc	.LL269
 7788                        	
 7789                        		.dbg	line,	"include\routines_LEVELS.c", 1431; {
 7790                        	
 7791                        		.dbg	line,	"include\routines_LEVELS.c", 1432; spr_pattern(PLAYER_WALK_5_VRAM_ADR);
 7792                        		__ld.wi		6400
         01:C57E  62         			cla
         01:C57F  A0 19      			ldy.h	#6400
 7793                        		__call		_spr_pattern.1
         01:C581  20 26 E8   			call	_spr_pattern.1
 7794                        	
 7795                        		.dbg	line,	"include\routines_LEVELS.c", 1434; spr_set(weapon_id);
 7796                        		__ld.umq	_weapon_id
         01:C584  AD 26 23   			lda	_weapon_id
 7797                        		__call		_spr_set.1
         01:C587  20 DD E7   			call	_spr_set.1
 7798                        	
 7799                        		.dbg	line,	"include\routines_LEVELS.c", 1435; weapon_y_offset = 12;
 7800                        		__st.umiq	12, _weapon_y_offset
         01:C58A  A9 0C      			lda.l	#12
         01:C58C  8D 4C 26   			sta	_weapon_y_offset
 7801                        	
 7802                        		.dbg	line,	"include\routines_LEVELS.c", 1436; //spr_y(player_pos_y+12);
 7803                        	
 7804                        		.dbg	line,	"include\routines_LEVELS.c", 1438; if(player_axis == AXIS_RIGHT)
 7805                        		__not.um	_player_axis
         01:C58F  AD 19 23   			lda	_player_axis
         01:C592  18         			clc
         01:C593  D0 01      			bne	!+
         01:C595  38         			sec
         01:C596             	!:
 7806                        		__bfalse	.LL270
         01:C596  90 11      			bcc	.LL270
 7807                        	
 7808                        		.dbg	line,	"include\routines_LEVELS.c", 1439; {
 7809                        	
 7810                        		.dbg	line,	"include\routines_LEVELS.c", 1440; spr_x(player_pos_x+15);
 7811                        		__ld.wm		_player_pos_x
         01:C598  AD DA 24   			lda.l	_player_pos_x
         01:C59B  AC DB 24   			ldy.h	_player_pos_x
 7812                        		__add.wi	15
         01:C59E  18         			clc
         01:C59F  69 0F      			adc.l	#15
         01:C5A1  90 01      			bcc	!+
         01:C5A3  C8         			iny
         01:C5A4             	!:
 7813                        		__call		_spr_x.1
         01:C5A4  20 0A E8   			call	_spr_x.1
 7814                        	
 7815                        		.dbg	line,	"include\routines_LEVELS.c", 1441; }
 7816                        	
 7817                        		.dbg	line,	"include\routines_LEVELS.c", 1443; else
 7818                        		__bra		.LL271
         01:C5A7  80 62      			bra	.LL271
 7819    01:C5A9             	.LL270:
 7820                        	
 7821                        		.dbg	line,	"include\routines_LEVELS.c", 1444; {
 7822                        	
 7823                        		.dbg	line,	"include\routines_LEVELS.c", 1445; spr_x(player_pos_x+1);
 7824                        		__ld.wm		_player_pos_x
         01:C5A9  AD DA 24   			lda.l	_player_pos_x
         01:C5AC  AC DB 24   			ldy.h	_player_pos_x
 7825                        		__add.wi	1
         01:C5AF  1A         			inc	a
         01:C5B0  D0 01      			bne	!+
         01:C5B2  C8         			iny
         01:C5B3             	!:
 7826                        		__call		_spr_x.1
         01:C5B3  20 0A E8   			call	_spr_x.1
 7827                        	
 7828                        		.dbg	line,	"include\routines_LEVELS.c", 1446; }
 7829    01:C5B6             	.LL271	.alias		.LL272
 7830                        	
 7831                        		.dbg	line,	"include\routines_LEVELS.c", 1447; }
 7832                        	
 7833                        		.dbg	line,	"include\routines_LEVELS.c", 1450; else if(player_counter_anim == 18)
 7834                        		__bra		.LL272
         01:C5B6  80 53      			bra	.LL272
 7835    01:C5B8             	.LL269:
 7836                        		__ld.umq	_player_counter_anim
         01:C5B8  AD 1B 23   			lda	_player_counter_anim
 7837                        		__equ_b.uiq	18
         01:C5BB  C9 12      			cmp	#18
         01:C5BD  F0 01      			beq	!+
         01:C5BF  18         			clc
         01:C5C0             	!:
 7838                        		__bfalse	.LL273
         01:C5C0  90 3C      			bcc	.LL273
 7839                        	
 7840                        		.dbg	line,	"include\routines_LEVELS.c", 1451; {
 7841                        	
 7842                        		.dbg	line,	"include\routines_LEVELS.c", 1452; spr_pattern(PLAYER_WALK_6_VRAM_ADR);
 7843                        		__ld.wi		6656
         01:C5C2  62         			cla
         01:C5C3  A0 1A      			ldy.h	#6656
 7844                        		__call		_spr_pattern.1
         01:C5C5  20 26 E8   			call	_spr_pattern.1
 7845                        	
 7846                        		.dbg	line,	"include\routines_LEVELS.c", 1454; spr_set(weapon_id);
 7847                        		__ld.umq	_weapon_id
         01:C5C8  AD 26 23   			lda	_weapon_id
 7848                        		__call		_spr_set.1
         01:C5CB  20 DD E7   			call	_spr_set.1
 7849                        	
 7850                        		.dbg	line,	"include\routines_LEVELS.c", 1455; weapon_y_offset = 14;
 7851                        		__st.umiq	14, _weapon_y_offset
         01:C5CE  A9 0E      			lda.l	#14
         01:C5D0  8D 4C 26   			sta	_weapon_y_offset
 7852                        	
 7853                        		.dbg	line,	"include\routines_LEVELS.c", 1456; //spr_y(player_pos_y+14);
 7854                        	
 7855                        		.dbg	line,	"include\routines_LEVELS.c", 1458; if(player_axis == AXIS_RIGHT)
 7856                        		__not.um	_player_axis
         01:C5D3  AD 19 23   			lda	_player_axis
         01:C5D6  18         			clc
         01:C5D7  D0 01      			bne	!+
         01:C5D9  38         			sec
         01:C5DA             	!:
 7857                        		__bfalse	.LL274
         01:C5DA  90 11      			bcc	.LL274
 7858                        	
 7859                        		.dbg	line,	"include\routines_LEVELS.c", 1459; {
 7860                        	
 7861                        		.dbg	line,	"include\routines_LEVELS.c", 1460; spr_x(player_pos_x+12);
 7862                        		__ld.wm		_player_pos_x
         01:C5DC  AD DA 24   			lda.l	_player_pos_x
         01:C5DF  AC DB 24   			ldy.h	_player_pos_x
 7863                        		__add.wi	12
         01:C5E2  18         			clc
         01:C5E3  69 0C      			adc.l	#12
         01:C5E5  90 01      			bcc	!+
         01:C5E7  C8         			iny
         01:C5E8             	!:
 7864                        		__call		_spr_x.1
         01:C5E8  20 0A E8   			call	_spr_x.1
 7865                        	
 7866                        		.dbg	line,	"include\routines_LEVELS.c", 1461; }
 7867                        	
 7868                        		.dbg	line,	"include\routines_LEVELS.c", 1463; else
 7869                        		__bra		.LL275
         01:C5EB  80 1E      			bra	.LL275
 7870    01:C5ED             	.LL274:
 7871                        	
 7872                        		.dbg	line,	"include\routines_LEVELS.c", 1464; {
 7873                        	
 7874                        		.dbg	line,	"include\routines_LEVELS.c", 1465; spr_x(player_pos_x+4);
 7875                        		__ld.wm		_player_pos_x
         01:C5ED  AD DA 24   			lda.l	_player_pos_x
         01:C5F0  AC DB 24   			ldy.h	_player_pos_x
 7876                        		__add.wi	4
         01:C5F3  18         			clc
         01:C5F4  69 04      			adc.l	#4
         01:C5F6  90 01      			bcc	!+
         01:C5F8  C8         			iny
         01:C5F9             	!:
 7877                        		__call		_spr_x.1
         01:C5F9  20 0A E8   			call	_spr_x.1
 7878                        	
 7879                        		.dbg	line,	"include\routines_LEVELS.c", 1466; } 
 7880    01:C5FC             	.LL275	.alias		.LL276
 7881                        	
 7882                        		.dbg	line,	"include\routines_LEVELS.c", 1467; }
 7883                        	
 7884                        		.dbg	line,	"include\routines_LEVELS.c", 1470; else if(player_counter_anim == 19)
 7885                        		__bra		.LL276
         01:C5FC  80 0D      			bra	.LL276
 7886    01:C5FE             	.LL273:
 7887                        		__ld.umq	_player_counter_anim
         01:C5FE  AD 1B 23   			lda	_player_counter_anim
 7888                        		__equ_b.uiq	19
         01:C601  C9 13      			cmp	#19
         01:C603  F0 01      			beq	!+
         01:C605  18         			clc
         01:C606             	!:
 7889                        		__bfalse	.LL277
         01:C606  90 03      			bcc	.LL277
 7890                        	
 7891                        		.dbg	line,	"include\routines_LEVELS.c", 1471; {
 7892                        	
 7893                        		.dbg	line,	"include\routines_LEVELS.c", 1472; player_counter_anim = 0;
 7894                        		__st.umiq	0, _player_counter_anim
         01:C608  9C 1B 23   			stz	_player_counter_anim
 7895                        	
 7896                        		.dbg	line,	"include\routines_LEVELS.c", 1473; }
 7897                        	
 7898                        		.dbg	line,	"include\routines_LEVELS.c", 1476; spr_set(weapon_id);
 7899    01:C60B             	.LL277:
 7900    01:C60B             	.LL276:
 7901    01:C60B             	.LL272:
 7902    01:C60B             	.LL268:
 7903    01:C60B             	.LL264:
 7904    01:C60B             	.LL262:
 7905    01:C60B             	.LL258:
 7906    01:C60B             	.LL254:
 7907    01:C60B             	.LL250:
 7908                        		__ld.umq	_weapon_id
         01:C60B  AD 26 23   			lda	_weapon_id
 7909                        		__call		_spr_set.1
         01:C60E  20 DD E7   			call	_spr_set.1
 7910                        	
 7911                        		.dbg	line,	"include\routines_LEVELS.c", 1477; spr_y(player_pos_y + weapon_y_offset);
 7912                        		__ld.bm		_weapon_y_offset
         01:C611  AD 4C 26   			lda	_weapon_y_offset
         01:C614  C2         			cly
         01:C615  10 01      			bpl	!+
         01:C617  88         			dey
         01:C618             	!:
 7913                        		__add.wm	_player_pos_y
         01:C618  18         			clc
         01:C619  6D DC 24   			adc.l	_player_pos_y
         01:C61C  42         			say
         01:C61D  6D DD 24   			adc.h	_player_pos_y
         01:C620  42         			say
 7914                        		__call		_spr_y.1
         01:C621  20 19 E8   			call	_spr_y.1
 7915                        	
 7916                        		.dbg	line,	"include\routines_LEVELS.c", 1478; //player_counter_anim += 1;
 7917                        	
 7918                        		.dbg	line,	"include\routines_LEVELS.c", 1480; }
 7919                        	
 7920                        		.dbg	line,	"include\routines_LEVELS.c", 1483; else if(player_state == STATE_JUMP)
 7921                        		__bra		.LL278
         01:C624  4C 70 DB   			bra	.LL278
 7922    01:C627             	.LL236:
 7923                        		__ld.umq	_player_state
         01:C627  AD 18 23   			lda	_player_state
 7924                        		__equ_b.uiq	4
         01:C62A  C9 04      			cmp	#4
         01:C62C  F0 01      			beq	!+
         01:C62E  18         			clc
         01:C62F             	!:
 7925                        		__bfalse	.LL279
         01:C62F  B0 03 4C 2B			bcc	.LL279
         01:C633  CC          
 7926                        	
 7927                        		.dbg	line,	"include\routines_LEVELS.c", 1484; {
 7928                        	
 7929                        		.dbg	line,	"include\routines_LEVELS.c", 1485; unsigned char i;
 7930                        	
 7931                        		.dbg	line,	"include\routines_LEVELS.c", 1486; i = 1;
 7932                        		__st.umiq	1, __update_PLAYER_end - 1  /* i */
         01:C634  A9 01      			lda.l	#1
         01:C636  8D 0C 23   			sta	__update_PLAYER_end - 1
 7933                        	
 7934                        		.dbg	line,	"include\routines_LEVELS.c", 1489; if(player_counter_anim == 0)
 7935                        		__not.um	_player_counter_anim
         01:C639  AD 1B 23   			lda	_player_counter_anim
         01:C63C  18         			clc
         01:C63D  D0 01      			bne	!+
         01:C63F  38         			sec
         01:C640             	!:
 7936                        		__bfalse	.LL280
         01:C640  90 11      			bcc	.LL280
 7937                        	
 7938                        		.dbg	line,	"include\routines_LEVELS.c", 1490; {
 7939                        	
 7940                        		.dbg	line,	"include\routines_LEVELS.c", 1491; spr_set(player_id);
 7941                        		__ld.umq	_player_id
         01:C642  AD 17 23   			lda	_player_id
 7942                        		__call		_spr_set.1
         01:C645  20 DD E7   			call	_spr_set.1
 7943                        	
 7944                        		.dbg	line,	"include\routines_LEVELS.c", 1492; spr_pattern(PLAYER_JUMP_VRAM_ADR);
 7945                        		__ld.wi		6912
         01:C648  62         			cla
         01:C649  A0 1B      			ldy.h	#6912
 7946                        		__call		_spr_pattern.1
         01:C64B  20 26 E8   			call	_spr_pattern.1
 7947                        	
 7948                        		.dbg	line,	"include\routines_LEVELS.c", 1494; player_counter_anim = 1;
 7949                        		__st.umiq	1, _player_counter_anim
         01:C64E  A9 01      			lda.l	#1
         01:C650  8D 1B 23   			sta	_player_counter_anim
 7950                        	
 7951                        		.dbg	line,	"include\routines_LEVELS.c", 1495; }
 7952                        	
 7953                        		.dbg	line,	"include\routines_LEVELS.c", 1498; player_pos_y += TABLE_PLAYER_JUMP_V[player_index_jump];
 7954    01:C653             	.LL280:
 7955                        		__ldx.umq	_player_index_jump
         01:C653  AE 1C 23   			ldx	_player_index_jump
 7956                        		__ld.bax	_TABLE_PLAYER_JUMP_V
         01:C656  BD 1D 61   			lda	_TABLE_PLAYER_JUMP_V, x
         01:C659  C2         			cly
         01:C65A  10 01      			bpl	!+
         01:C65C  88         			dey
         01:C65D             	!:
 7957                        		__add_st.wmq	_player_pos_y
         01:C65D  18         			clc
         01:C65E  6D DC 24   			adc.l	_player_pos_y
         01:C661  8D DC 24   			sta.l	_player_pos_y
         01:C664  98         			tya
         01:C665  6D DD 24   			adc.h	_player_pos_y
         01:C668  8D DD 24   			sta.h	_player_pos_y
 7958                        	
 7959                        		.dbg	line,	"include\routines_LEVELS.c", 1500; // CHECK COLLISION WITH CEILING //
 7960                        	
 7961                        		.dbg	line,	"include\routines_LEVELS.c", 1501; check_BG( 15 , 8 );
 7962                        		__ld.wi		15
         01:C66B  A9 0F      			lda.l	#15
         01:C66D  C2         			cly
 7963                        		__pusharg.wr
         01:C66E  A6 8D      			ldx	<__sp
         01:C670  CA         			dex
         01:C671  CA         			dex
         01:C672  95 08      			sta.l	<__stack, x
         01:C674  94 09      			sty.h	<__stack, x
         01:C676  86 8D      			stx	<__sp
 7964                        		__ld.wi		8
         01:C678  A9 08      			lda.l	#8
         01:C67A  C2         			cly
 7965                        		__pusharg.wr
         01:C67B  A6 8D      			ldx	<__sp
         01:C67D  CA         			dex
         01:C67E  CA         			dex
         01:C67F  95 08      			sta.l	<__stack, x
         01:C681  94 09      			sty.h	<__stack, x
         01:C683  86 8D      			stx	<__sp
 7966                        		__call		_check_BG
         01:C685  20 6D FF   			call	_check_BG
 7967                        	
 7968                        		.dbg	line,	"include\routines_LEVELS.c", 1503; if(map_blk_flag == TILE_BG)
 7969                        		__ld.umq	_map_blk_flag
         01:C688  AD B8 2B   			lda	_map_blk_flag
 7970                        		__equ_b.uiq	1
         01:C68B  C9 01      			cmp	#1
         01:C68D  F0 01      			beq	!+
         01:C68F  18         			clc
         01:C690             	!:
 7971                        		__bfalse	.LL281
         01:C690  90 5A      			bcc	.LL281
 7972                        	
 7973                        		.dbg	line,	"include\routines_LEVELS.c", 1504; {
 7974                        	
 7975                        		.dbg	line,	"include\routines_LEVELS.c", 1505; for(i=1 ; i<8 ; i++)
 7976                        		__st.umiq	1, __update_PLAYER_end - 1  /* i */
         01:C692  A9 01      			lda.l	#1
         01:C694  8D 0C 23   			sta	__update_PLAYER_end - 1
 7977    01:C697             	.LL282:
 7978                        		__ld.umq	__update_PLAYER_end - 1  /* i */
         01:C697  AD 0C 23   			lda	__update_PLAYER_end - 1
 7979                        		__ult_b.uiq	8
         01:C69A  C9 08      			cmp	#8		; Subtract integer from A.
         01:C69C  6A         			ror	a		; CC if A < integer.
         01:C69D  49 80      			eor	#$80
         01:C69F  2A         			rol	a
 7980                        		__btrue		.LL284
         01:C6A0  B0 07      			bcs	.LL284
 7981                        		__bra		.LL285
         01:C6A2  80 48      			bra	.LL285
 7982    01:C6A4             	.LL283:
 7983                        		__inc.umq	__update_PLAYER_end - 1  /* i */
         01:C6A4  EE 0C 23   			inc	__update_PLAYER_end - 1
 7984                        		__bra		.LL282
         01:C6A7  80 EE      			bra	.LL282
 7985    01:C6A9             	.LL284:
 7986                        	
 7987                        		.dbg	line,	"include\routines_LEVELS.c", 1506; {
 7988                        	
 7989                        		.dbg	line,	"include\routines_LEVELS.c", 1507; check_BG( 15 , 8 + i );
 7990                        		__ld.wi		15
         01:C6A9  A9 0F      			lda.l	#15
         01:C6AB  C2         			cly
 7991                        		__pusharg.wr
         01:C6AC  A6 8D      			ldx	<__sp
         01:C6AE  CA         			dex
         01:C6AF  CA         			dex
         01:C6B0  95 08      			sta.l	<__stack, x
         01:C6B2  94 09      			sty.h	<__stack, x
         01:C6B4  86 8D      			stx	<__sp
 7992                        		__ld.wi		8
         01:C6B6  A9 08      			lda.l	#8
         01:C6B8  C2         			cly
 7993                        		__add.um	__update_PLAYER_end - 1  /* i */
         01:C6B9  18         			clc
         01:C6BA  6D 0C 23   			adc	__update_PLAYER_end - 1
         01:C6BD  90 01      			bcc	!+
         01:C6BF  C8         			iny
         01:C6C0             	!:
 7994                        		__pusharg.wr
         01:C6C0  A6 8D      			ldx	<__sp
         01:C6C2  CA         			dex
         01:C6C3  CA         			dex
         01:C6C4  95 08      			sta.l	<__stack, x
         01:C6C6  94 09      			sty.h	<__stack, x
         01:C6C8  86 8D      			stx	<__sp
 7995                        		__call		_check_BG
         01:C6CA  20 6D FF   			call	_check_BG
 7996                        	
 7997                        		.dbg	line,	"include\routines_LEVELS.c", 1508; {
 7998                        	
 7999                        		.dbg	line,	"include\routines_LEVELS.c", 1509; if(map_blk_flag == TILE_EMPTY)
 8000                        		__not.um	_map_blk_flag
         01:C6CD  AD B8 2B   			lda	_map_blk_flag
         01:C6D0  18         			clc
         01:C6D1  D0 01      			bne	!+
         01:C6D3  38         			sec
         01:C6D4             	!:
 8001                        		__bfalse	.LL286
         01:C6D4  90 CE      			bcc	.LL286
 8002                        	
 8003                        		.dbg	line,	"include\routines_LEVELS.c", 1510; {
 8004                        	
 8005                        		.dbg	line,	"include\routines_LEVELS.c", 1511; player_pos_y += i;
 8006                        		__ld.um		__update_PLAYER_end - 1  /* i */
         01:C6D6  AD 0C 23   			lda	__update_PLAYER_end - 1
         01:C6D9  C2         			cly
 8007                        		__add_st.wmq	_player_pos_y
         01:C6DA  18         			clc
         01:C6DB  6D DC 24   			adc.l	_player_pos_y
         01:C6DE  8D DC 24   			sta.l	_player_pos_y
         01:C6E1  98         			tya
         01:C6E2  6D DD 24   			adc.h	_player_pos_y
         01:C6E5  8D DD 24   			sta.h	_player_pos_y
 8008                        	
 8009                        		.dbg	line,	"include\routines_LEVELS.c", 1512; break;
 8010                        		__bra		.LL285
         01:C6E8  80 02      			bra	.LL285
 8011                        	
 8012                        		.dbg	line,	"include\routines_LEVELS.c", 1513; }
 8013                        	
 8014                        		.dbg	line,	"include\routines_LEVELS.c", 1514; }
 8015    01:C6EA             	.LL286	.alias		.LL283
 8016                        	
 8017                        		.dbg	line,	"include\routines_LEVELS.c", 1515; }
 8018                        		__bra		.LL283
         01:C6EA  80 B8      			bra	.LL283
 8019    01:C6EC             	.LL285:
 8020                        	
 8021                        		.dbg	line,	"include\routines_LEVELS.c", 1516; }
 8022                        	
 8023                        		.dbg	line,	"include\routines_LEVELS.c", 1519; if(player_attack == FALSE)
 8024    01:C6EC             	.LL281:
 8025                        		__not.um	_player_attack
         01:C6EC  AD 20 23   			lda	_player_attack
         01:C6EF  18         			clc
         01:C6F0  D0 01      			bne	!+
         01:C6F2  38         			sec
         01:C6F3             	!:
 8026                        		__bfalse	.LL287
         01:C6F3  90 18      			bcc	.LL287
 8027                        	
 8028                        		.dbg	line,	"include\routines_LEVELS.c", 1520; {
 8029                        	
 8030                        		.dbg	line,	"include\routines_LEVELS.c", 1521; spr_set(weapon_id);
 8031                        		__ld.umq	_weapon_id
         01:C6F5  AD 26 23   			lda	_weapon_id
 8032                        		__call		_spr_set.1
         01:C6F8  20 DD E7   			call	_spr_set.1
 8033                        	
 8034                        		.dbg	line,	"include\routines_LEVELS.c", 1522; spr_y(player_pos_y+8);
 8035                        		__ld.wm		_player_pos_y
         01:C6FB  AD DC 24   			lda.l	_player_pos_y
         01:C6FE  AC DD 24   			ldy.h	_player_pos_y
 8036                        		__add.wi	8
         01:C701  18         			clc
         01:C702  69 08      			adc.l	#8
         01:C704  90 01      			bcc	!+
         01:C706  C8         			iny
         01:C707             	!:
 8037                        		__call		_spr_y.1
         01:C707  20 19 E8   			call	_spr_y.1
 8038                        	
 8039                        		.dbg	line,	"include\routines_LEVELS.c", 1523; }
 8040                        	
 8041                        		.dbg	line,	"include\routines_LEVELS.c", 1525; 
 8042                        	
 8043                        		.dbg	line,	"include\routines_LEVELS.c", 1526; else
 8044                        		__bra		.LL288
         01:C70A  4C B6 C9   			bra	.LL288
 8045    01:C70D             	.LL287:
 8046                        	
 8047                        		.dbg	line,	"include\routines_LEVELS.c", 1527; {
 8048                        	
 8049                        		.dbg	line,	"include\routines_LEVELS.c", 1528; if(player_counter_attack == 0)
 8050                        		__not.um	_player_counter_attack
         01:C70D  AD 1E 23   			lda	_player_counter_attack
         01:C710  18         			clc
         01:C711  D0 01      			bne	!+
         01:C713  38         			sec
         01:C714             	!:
 8051                        		__bfalse	.LL289
         01:C714  90 53      			bcc	.LL289
 8052                        	
 8053                        		.dbg	line,	"include\routines_LEVELS.c", 1529; {
 8054                        	
 8055                        		.dbg	line,	"include\routines_LEVELS.c", 1530; spr_set(player_id);
 8056                        		__ld.umq	_player_id
         01:C716  AD 17 23   			lda	_player_id
 8057                        		__call		_spr_set.1
         01:C719  20 DD E7   			call	_spr_set.1
 8058                        	
 8059                        		.dbg	line,	"include\routines_LEVELS.c", 1531; spr_pattern(PLAYER_JUMP_ATTACK_1_VRAM_ADR);
 8060                        		__ld.wi		10496
         01:C71C  62         			cla
         01:C71D  A0 29      			ldy.h	#10496
 8061                        		__call		_spr_pattern.1
         01:C71F  20 26 E8   			call	_spr_pattern.1
 8062                        	
 8063                        		.dbg	line,	"include\routines_LEVELS.c", 1533; spr_set(weapon_id);
 8064                        		__ld.umq	_weapon_id
         01:C722  AD 26 23   			lda	_weapon_id
 8065                        		__call		_spr_set.1
         01:C725  20 DD E7   			call	_spr_set.1
 8066                        	
 8067                        		.dbg	line,	"include\routines_LEVELS.c", 1534; spr_pattern(WEAPON_ATTACK_1_VRAM_ADRESS);
 8068                        		__ld.wi		32000
         01:C728  62         			cla
         01:C729  A0 7D      			ldy.h	#32000
 8069                        		__call		_spr_pattern.1
         01:C72B  20 26 E8   			call	_spr_pattern.1
 8070                        	
 8071                        		.dbg	line,	"include\routines_LEVELS.c", 1536; if(player_axis == AXIS_RIGHT)
 8072                        		__not.um	_player_axis
         01:C72E  AD 19 23   			lda	_player_axis
         01:C731  18         			clc
         01:C732  D0 01      			bne	!+
         01:C734  38         			sec
         01:C735             	!:
 8073                        		__bfalse	.LL290
         01:C735  90 11      			bcc	.LL290
 8074                        	
 8075                        		.dbg	line,	"include\routines_LEVELS.c", 1537; {
 8076                        	
 8077                        		.dbg	line,	"include\routines_LEVELS.c", 1538; spr_x(player_pos_x-14);
 8078                        		__ld.wm		_player_pos_x
         01:C737  AD DA 24   			lda.l	_player_pos_x
         01:C73A  AC DB 24   			ldy.h	_player_pos_x
 8079                        		__sub.wi	14
         01:C73D  38         			sec
         01:C73E  E9 0E      			sbc.l	#14
         01:C740  B0 01      			bcs	!+
         01:C742  88         			dey
         01:C743             	!:
 8080                        		__call		_spr_x.1
         01:C743  20 0A E8   			call	_spr_x.1
 8081                        	
 8082                        		.dbg	line,	"include\routines_LEVELS.c", 1539; }
 8083                        	
 8084                        		.dbg	line,	"include\routines_LEVELS.c", 1541; else
 8085                        		__bra		.LL291
         01:C746  80 0F      			bra	.LL291
 8086    01:C748             	.LL290:
 8087                        	
 8088                        		.dbg	line,	"include\routines_LEVELS.c", 1542; {
 8089                        	
 8090                        		.dbg	line,	"include\routines_LEVELS.c", 1543; spr_x(player_pos_x+29);
 8091                        		__ld.wm		_player_pos_x
         01:C748  AD DA 24   			lda.l	_player_pos_x
         01:C74B  AC DB 24   			ldy.h	_player_pos_x
 8092                        		__add.wi	29
         01:C74E  18         			clc
         01:C74F  69 1D      			adc.l	#29
         01:C751  90 01      			bcc	!+
         01:C753  C8         			iny
         01:C754             	!:
 8093                        		__call		_spr_x.1
         01:C754  20 0A E8   			call	_spr_x.1
 8094                        	
 8095                        		.dbg	line,	"include\routines_LEVELS.c", 1544; }
 8096    01:C757             	.LL291:
 8097                        	
 8098                        		.dbg	line,	"include\routines_LEVELS.c", 1546; spr_y(player_pos_y-8);
 8099                        		__ld.wm		_player_pos_y
         01:C757  AD DC 24   			lda.l	_player_pos_y
         01:C75A  AC DD 24   			ldy.h	_player_pos_y
 8100                        		__sub.wi	8
         01:C75D  38         			sec
         01:C75E  E9 08      			sbc.l	#8
         01:C760  B0 01      			bcs	!+
         01:C762  88         			dey
         01:C763             	!:
 8101                        		__call		_spr_y.1
         01:C763  20 19 E8   			call	_spr_y.1
 8102                        	
 8103                        		.dbg	line,	"include\routines_LEVELS.c", 1547; }
 8104                        	
 8105                        		.dbg	line,	"include\routines_LEVELS.c", 1549; else if(player_counter_attack == 6)
 8106                        		__bra		.LL292
         01:C766  4C B3 C9   			bra	.LL292
 8107    01:C769             	.LL289:
 8108                        		__ld.umq	_player_counter_attack
         01:C769  AD 1E 23   			lda	_player_counter_attack
 8109                        		__equ_b.uiq	6
         01:C76C  C9 06      			cmp	#6
         01:C76E  F0 01      			beq	!+
         01:C770  18         			clc
         01:C771             	!:
 8110                        		__bfalse	.LL293
         01:C771  90 54      			bcc	.LL293
 8111                        	
 8112                        		.dbg	line,	"include\routines_LEVELS.c", 1550; {
 8113                        	
 8114                        		.dbg	line,	"include\routines_LEVELS.c", 1551; spr_set(player_id);
 8115                        		__ld.umq	_player_id
         01:C773  AD 17 23   			lda	_player_id
 8116                        		__call		_spr_set.1
         01:C776  20 DD E7   			call	_spr_set.1
 8117                        	
 8118                        		.dbg	line,	"include\routines_LEVELS.c", 1552; spr_pattern(PLAYER_JUMP_ATTACK_2_VRAM_ADR);
 8119                        		__ld.wi		10752
         01:C779  62         			cla
         01:C77A  A0 2A      			ldy.h	#10752
 8120                        		__call		_spr_pattern.1
         01:C77C  20 26 E8   			call	_spr_pattern.1
 8121                        	
 8122                        		.dbg	line,	"include\routines_LEVELS.c", 1554; spr_set(weapon_id);
 8123                        		__ld.umq	_weapon_id
         01:C77F  AD 26 23   			lda	_weapon_id
 8124                        		__call		_spr_set.1
         01:C782  20 DD E7   			call	_spr_set.1
 8125                        	
 8126                        		.dbg	line,	"include\routines_LEVELS.c", 1555; spr_pattern(WEAPON_ATTACK_2_VRAM_ADRESS);
 8127                        		__ld.wi		32064
         01:C785  A9 40      			lda.l	#32064
         01:C787  A0 7D      			ldy.h	#32064
 8128                        		__call		_spr_pattern.1
         01:C789  20 26 E8   			call	_spr_pattern.1
 8129                        	
 8130                        		.dbg	line,	"include\routines_LEVELS.c", 1557; if(player_axis == AXIS_RIGHT)
 8131                        		__not.um	_player_axis
         01:C78C  AD 19 23   			lda	_player_axis
         01:C78F  18         			clc
         01:C790  D0 01      			bne	!+
         01:C792  38         			sec
         01:C793             	!:
 8132                        		__bfalse	.LL294
         01:C793  90 11      			bcc	.LL294
 8133                        	
 8134                        		.dbg	line,	"include\routines_LEVELS.c", 1558; {
 8135                        	
 8136                        		.dbg	line,	"include\routines_LEVELS.c", 1559; spr_x(player_pos_x+32);
 8137                        		__ld.wm		_player_pos_x
         01:C795  AD DA 24   			lda.l	_player_pos_x
         01:C798  AC DB 24   			ldy.h	_player_pos_x
 8138                        		__add.wi	32
         01:C79B  18         			clc
         01:C79C  69 20      			adc.l	#32
         01:C79E  90 01      			bcc	!+
         01:C7A0  C8         			iny
         01:C7A1             	!:
 8139                        		__call		_spr_x.1
         01:C7A1  20 0A E8   			call	_spr_x.1
 8140                        	
 8141                        		.dbg	line,	"include\routines_LEVELS.c", 1560; 
 8142                        	
 8143                        		.dbg	line,	"include\routines_LEVELS.c", 1561; }
 8144                        	
 8145                        		.dbg	line,	"include\routines_LEVELS.c", 1562; 
 8146                        	
 8147                        		.dbg	line,	"include\routines_LEVELS.c", 1563; else
 8148                        		__bra		.LL295
         01:C7A4  80 0F      			bra	.LL295
 8149    01:C7A6             	.LL294:
 8150                        	
 8151                        		.dbg	line,	"include\routines_LEVELS.c", 1564; {
 8152                        	
 8153                        		.dbg	line,	"include\routines_LEVELS.c", 1565; spr_x(player_pos_x-16);
 8154                        		__ld.wm		_player_pos_x
         01:C7A6  AD DA 24   			lda.l	_player_pos_x
         01:C7A9  AC DB 24   			ldy.h	_player_pos_x
 8155                        		__sub.wi	16
         01:C7AC  38         			sec
         01:C7AD  E9 10      			sbc.l	#16
         01:C7AF  B0 01      			bcs	!+
         01:C7B1  88         			dey
         01:C7B2             	!:
 8156                        		__call		_spr_x.1
         01:C7B2  20 0A E8   			call	_spr_x.1
 8157                        	
 8158                        		.dbg	line,	"include\routines_LEVELS.c", 1566; }
 8159    01:C7B5             	.LL295:
 8160                        	
 8161                        		.dbg	line,	"include\routines_LEVELS.c", 1568; spr_y(player_pos_y+6);
 8162                        		__ld.wm		_player_pos_y
         01:C7B5  AD DC 24   			lda.l	_player_pos_y
         01:C7B8  AC DD 24   			ldy.h	_player_pos_y
 8163                        		__add.wi	6
         01:C7BB  18         			clc
         01:C7BC  69 06      			adc.l	#6
         01:C7BE  90 01      			bcc	!+
         01:C7C0  C8         			iny
         01:C7C1             	!:
 8164                        		__call		_spr_y.1
         01:C7C1  20 19 E8   			call	_spr_y.1
 8165                        	
 8166                        		.dbg	line,	"include\routines_LEVELS.c", 1569; }
 8167                        	
 8168                        		.dbg	line,	"include\routines_LEVELS.c", 1571; else if(player_counter_attack == 7)
 8169                        		__bra		.LL296
         01:C7C4  4C B3 C9   			bra	.LL296
 8170    01:C7C7             	.LL293:
 8171                        		__ld.umq	_player_counter_attack
         01:C7C7  AD 1E 23   			lda	_player_counter_attack
 8172                        		__equ_b.uiq	7
         01:C7CA  C9 07      			cmp	#7
         01:C7CC  F0 01      			beq	!+
         01:C7CE  18         			clc
         01:C7CF             	!:
 8173                        		__bfalse	.LL297
         01:C7CF  90 66      			bcc	.LL297
 8174                        	
 8175                        		.dbg	line,	"include\routines_LEVELS.c", 1572; {
 8176                        	
 8177                        		.dbg	line,	"include\routines_LEVELS.c", 1573; spr_set(chain_id);
 8178                        		__ld.umq	_chain_id
         01:C7D1  AD 25 23   			lda	_chain_id
 8179                        		__call		_spr_set.1
         01:C7D4  20 DD E7   			call	_spr_set.1
 8180                        	
 8181                        		.dbg	line,	"include\routines_LEVELS.c", 1574; spr_y(player_pos_y);
 8182                        		__ld.wm		_player_pos_y
         01:C7D7  AD DC 24   			lda.l	_player_pos_y
         01:C7DA  AC DD 24   			ldy.h	_player_pos_y
 8183                        		__call		_spr_y.1
         01:C7DD  20 19 E8   			call	_spr_y.1
 8184                        	
 8185                        		.dbg	line,	"include\routines_LEVELS.c", 1576; if(player_axis == AXIS_RIGHT)
 8186                        		__not.um	_player_axis
         01:C7E0  AD 19 23   			lda	_player_axis
         01:C7E3  18         			clc
         01:C7E4  D0 01      			bne	!+
         01:C7E6  38         			sec
         01:C7E7             	!:
 8187                        		__bfalse	.LL298
         01:C7E7  90 27      			bcc	.LL298
 8188                        	
 8189                        		.dbg	line,	"include\routines_LEVELS.c", 1577; {
 8190                        	
 8191                        		.dbg	line,	"include\routines_LEVELS.c", 1578; spr_x(player_pos_x+32);
 8192                        		__ld.wm		_player_pos_x
         01:C7E9  AD DA 24   			lda.l	_player_pos_x
         01:C7EC  AC DB 24   			ldy.h	_player_pos_x
 8193                        		__add.wi	32
         01:C7EF  18         			clc
         01:C7F0  69 20      			adc.l	#32
         01:C7F2  90 01      			bcc	!+
         01:C7F4  C8         			iny
         01:C7F5             	!:
 8194                        		__call		_spr_x.1
         01:C7F5  20 0A E8   			call	_spr_x.1
 8195                        	
 8196                        		.dbg	line,	"include\routines_LEVELS.c", 1580; spr_set(weapon_id);
 8197                        		__ld.umq	_weapon_id
         01:C7F8  AD 26 23   			lda	_weapon_id
 8198                        		__call		_spr_set.1
         01:C7FB  20 DD E7   			call	_spr_set.1
 8199                        	
 8200                        		.dbg	line,	"include\routines_LEVELS.c", 1581; spr_x(player_pos_x+48);
 8201                        		__ld.wm		_player_pos_x
         01:C7FE  AD DA 24   			lda.l	_player_pos_x
         01:C801  AC DB 24   			ldy.h	_player_pos_x
 8202                        		__add.wi	48
         01:C804  18         			clc
         01:C805  69 30      			adc.l	#48
         01:C807  90 01      			bcc	!+
         01:C809  C8         			iny
         01:C80A             	!:
 8203                        		__call		_spr_x.1
         01:C80A  20 0A E8   			call	_spr_x.1
 8204                        	
 8205                        		.dbg	line,	"include\routines_LEVELS.c", 1582; }
 8206                        	
 8207                        		.dbg	line,	"include\routines_LEVELS.c", 1583; 
 8208                        	
 8209                        		.dbg	line,	"include\routines_LEVELS.c", 1584; else
 8210                        		__bra		.LL299
         01:C80D  4C B3 C9   			bra	.LL299
 8211    01:C810             	.LL298:
 8212                        	
 8213                        		.dbg	line,	"include\routines_LEVELS.c", 1585; {
 8214                        	
 8215                        		.dbg	line,	"include\routines_LEVELS.c", 1586; spr_x(player_pos_x-16);
 8216                        		__ld.wm		_player_pos_x
         01:C810  AD DA 24   			lda.l	_player_pos_x
         01:C813  AC DB 24   			ldy.h	_player_pos_x
 8217                        		__sub.wi	16
         01:C816  38         			sec
         01:C817  E9 10      			sbc.l	#16
         01:C819  B0 01      			bcs	!+
         01:C81B  88         			dey
         01:C81C             	!:
 8218                        		__call		_spr_x.1
         01:C81C  20 0A E8   			call	_spr_x.1
 8219                        	
 8220                        		.dbg	line,	"include\routines_LEVELS.c", 1588; spr_set(weapon_id);
 8221                        		__ld.umq	_weapon_id
         01:C81F  AD 26 23   			lda	_weapon_id
 8222                        		__call		_spr_set.1
         01:C822  20 DD E7   			call	_spr_set.1
 8223                        	
 8224                        		.dbg	line,	"include\routines_LEVELS.c", 1589; spr_x(player_pos_x-32);
 8225                        		__ld.wm		_player_pos_x
         01:C825  AD DA 24   			lda.l	_player_pos_x
         01:C828  AC DB 24   			ldy.h	_player_pos_x
 8226                        		__sub.wi	32
         01:C82B  38         			sec
         01:C82C  E9 20      			sbc.l	#32
         01:C82E  B0 01      			bcs	!+
         01:C830  88         			dey
         01:C831             	!:
 8227                        		__call		_spr_x.1
         01:C831  20 0A E8   			call	_spr_x.1
 8228                        	
 8229                        		.dbg	line,	"include\routines_LEVELS.c", 1590; }
 8230    01:C834             	.LL299	.alias		.LL300
 8231                        	
 8232                        		.dbg	line,	"include\routines_LEVELS.c", 1591; }
 8233                        	
 8234                        		.dbg	line,	"include\routines_LEVELS.c", 1593; else if(player_counter_attack == 8)
 8235                        		__bra		.LL300
         01:C834  4C B3 C9   			bra	.LL300
 8236    01:C837             	.LL297:
 8237                        		__ld.umq	_player_counter_attack
         01:C837  AD 1E 23   			lda	_player_counter_attack
 8238                        		__equ_b.uiq	8
         01:C83A  C9 08      			cmp	#8
         01:C83C  F0 01      			beq	!+
         01:C83E  18         			clc
         01:C83F             	!:
 8239                        		__bfalse	.LL301
         01:C83F  90 6B      			bcc	.LL301
 8240                        	
 8241                        		.dbg	line,	"include\routines_LEVELS.c", 1594; {
 8242                        	
 8243                        		.dbg	line,	"include\routines_LEVELS.c", 1595; spr_set(chain_id+1);
 8244                        		__ld.um		_chain_id
         01:C841  AD 25 23   			lda	_chain_id
         01:C844  C2         			cly
 8245                        		__add.wi	1
         01:C845  1A         			inc	a
         01:C846  D0 01      			bne	!+
         01:C848  C8         			iny
         01:C849             	!:
 8246                        		__call		_spr_set.1
         01:C849  20 DD E7   			call	_spr_set.1
 8247                        	
 8248                        		.dbg	line,	"include\routines_LEVELS.c", 1596; spr_y(player_pos_y);
 8249                        		__ld.wm		_player_pos_y
         01:C84C  AD DC 24   			lda.l	_player_pos_y
         01:C84F  AC DD 24   			ldy.h	_player_pos_y
 8250                        		__call		_spr_y.1
         01:C852  20 19 E8   			call	_spr_y.1
 8251                        	
 8252                        		.dbg	line,	"include\routines_LEVELS.c", 1598; if(player_axis == AXIS_RIGHT)
 8253                        		__not.um	_player_axis
         01:C855  AD 19 23   			lda	_player_axis
         01:C858  18         			clc
         01:C859  D0 01      			bne	!+
         01:C85B  38         			sec
         01:C85C             	!:
 8254                        		__bfalse	.LL302
         01:C85C  90 27      			bcc	.LL302
 8255                        	
 8256                        		.dbg	line,	"include\routines_LEVELS.c", 1599; {
 8257                        	
 8258                        		.dbg	line,	"include\routines_LEVELS.c", 1600; spr_x(player_pos_x+48);
 8259                        		__ld.wm		_player_pos_x
         01:C85E  AD DA 24   			lda.l	_player_pos_x
         01:C861  AC DB 24   			ldy.h	_player_pos_x
 8260                        		__add.wi	48
         01:C864  18         			clc
         01:C865  69 30      			adc.l	#48
         01:C867  90 01      			bcc	!+
         01:C869  C8         			iny
         01:C86A             	!:
 8261                        		__call		_spr_x.1
         01:C86A  20 0A E8   			call	_spr_x.1
 8262                        	
 8263                        		.dbg	line,	"include\routines_LEVELS.c", 1602; spr_set(weapon_id);
 8264                        		__ld.umq	_weapon_id
         01:C86D  AD 26 23   			lda	_weapon_id
 8265                        		__call		_spr_set.1
         01:C870  20 DD E7   			call	_spr_set.1
 8266                        	
 8267                        		.dbg	line,	"include\routines_LEVELS.c", 1603; spr_x(player_pos_x+64);
 8268                        		__ld.wm		_player_pos_x
         01:C873  AD DA 24   			lda.l	_player_pos_x
         01:C876  AC DB 24   			ldy.h	_player_pos_x
 8269                        		__add.wi	64
         01:C879  18         			clc
         01:C87A  69 40      			adc.l	#64
         01:C87C  90 01      			bcc	!+
         01:C87E  C8         			iny
         01:C87F             	!:
 8270                        		__call		_spr_x.1
         01:C87F  20 0A E8   			call	_spr_x.1
 8271                        	
 8272                        		.dbg	line,	"include\routines_LEVELS.c", 1604; }
 8273                        	
 8274                        		.dbg	line,	"include\routines_LEVELS.c", 1605; 
 8275                        	
 8276                        		.dbg	line,	"include\routines_LEVELS.c", 1606; else
 8277                        		__bra		.LL303
         01:C882  4C B3 C9   			bra	.LL303
 8278    01:C885             	.LL302:
 8279                        	
 8280                        		.dbg	line,	"include\routines_LEVELS.c", 1607; {
 8281                        	
 8282                        		.dbg	line,	"include\routines_LEVELS.c", 1608; spr_x(player_pos_x-32);
 8283                        		__ld.wm		_player_pos_x
         01:C885  AD DA 24   			lda.l	_player_pos_x
         01:C888  AC DB 24   			ldy.h	_player_pos_x
 8284                        		__sub.wi	32
         01:C88B  38         			sec
         01:C88C  E9 20      			sbc.l	#32
         01:C88E  B0 01      			bcs	!+
         01:C890  88         			dey
         01:C891             	!:
 8285                        		__call		_spr_x.1
         01:C891  20 0A E8   			call	_spr_x.1
 8286                        	
 8287                        		.dbg	line,	"include\routines_LEVELS.c", 1610; spr_set(weapon_id);
 8288                        		__ld.umq	_weapon_id
         01:C894  AD 26 23   			lda	_weapon_id
 8289                        		__call		_spr_set.1
         01:C897  20 DD E7   			call	_spr_set.1
 8290                        	
 8291                        		.dbg	line,	"include\routines_LEVELS.c", 1611; spr_x(player_pos_x-48);
 8292                        		__ld.wm		_player_pos_x
         01:C89A  AD DA 24   			lda.l	_player_pos_x
         01:C89D  AC DB 24   			ldy.h	_player_pos_x
 8293                        		__sub.wi	48
         01:C8A0  38         			sec
         01:C8A1  E9 30      			sbc.l	#48
         01:C8A3  B0 01      			bcs	!+
         01:C8A5  88         			dey
         01:C8A6             	!:
 8294                        		__call		_spr_x.1
         01:C8A6  20 0A E8   			call	_spr_x.1
 8295                        	
 8296                        		.dbg	line,	"include\routines_LEVELS.c", 1612; }
 8297    01:C8A9             	.LL303	.alias		.LL304
 8298                        	
 8299                        		.dbg	line,	"include\routines_LEVELS.c", 1613; }
 8300                        	
 8301                        		.dbg	line,	"include\routines_LEVELS.c", 1615; else if(player_counter_attack == 9)
 8302                        		__bra		.LL304
         01:C8A9  4C B3 C9   			bra	.LL304
 8303    01:C8AC             	.LL301:
 8304                        		__ld.umq	_player_counter_attack
         01:C8AC  AD 1E 23   			lda	_player_counter_attack
 8305                        		__equ_b.uiq	9
         01:C8AF  C9 09      			cmp	#9
         01:C8B1  F0 01      			beq	!+
         01:C8B3  18         			clc
         01:C8B4             	!:
 8306                        		__bfalse	.LL305
         01:C8B4  90 6D      			bcc	.LL305
 8307                        	
 8308                        		.dbg	line,	"include\routines_LEVELS.c", 1616; {
 8309                        	
 8310                        		.dbg	line,	"include\routines_LEVELS.c", 1617; spr_set(chain_id+2);
 8311                        		__ld.um		_chain_id
         01:C8B6  AD 25 23   			lda	_chain_id
         01:C8B9  C2         			cly
 8312                        		__add.wi	2
         01:C8BA  18         			clc
         01:C8BB  69 02      			adc.l	#2
         01:C8BD  90 01      			bcc	!+
         01:C8BF  C8         			iny
         01:C8C0             	!:
 8313                        		__call		_spr_set.1
         01:C8C0  20 DD E7   			call	_spr_set.1
 8314                        	
 8315                        		.dbg	line,	"include\routines_LEVELS.c", 1618; spr_y(player_pos_y);
 8316                        		__ld.wm		_player_pos_y
         01:C8C3  AD DC 24   			lda.l	_player_pos_y
         01:C8C6  AC DD 24   			ldy.h	_player_pos_y
 8317                        		__call		_spr_y.1
         01:C8C9  20 19 E8   			call	_spr_y.1
 8318                        	
 8319                        		.dbg	line,	"include\routines_LEVELS.c", 1620; if(player_axis == AXIS_RIGHT)
 8320                        		__not.um	_player_axis
         01:C8CC  AD 19 23   			lda	_player_axis
         01:C8CF  18         			clc
         01:C8D0  D0 01      			bne	!+
         01:C8D2  38         			sec
         01:C8D3             	!:
 8321                        		__bfalse	.LL306
         01:C8D3  90 27      			bcc	.LL306
 8322                        	
 8323                        		.dbg	line,	"include\routines_LEVELS.c", 1621; {
 8324                        	
 8325                        		.dbg	line,	"include\routines_LEVELS.c", 1622; spr_x(player_pos_x+64);
 8326                        		__ld.wm		_player_pos_x
         01:C8D5  AD DA 24   			lda.l	_player_pos_x
         01:C8D8  AC DB 24   			ldy.h	_player_pos_x
 8327                        		__add.wi	64
         01:C8DB  18         			clc
         01:C8DC  69 40      			adc.l	#64
         01:C8DE  90 01      			bcc	!+
         01:C8E0  C8         			iny
         01:C8E1             	!:
 8328                        		__call		_spr_x.1
         01:C8E1  20 0A E8   			call	_spr_x.1
 8329                        	
 8330                        		.dbg	line,	"include\routines_LEVELS.c", 1624; spr_set(weapon_id);
 8331                        		__ld.umq	_weapon_id
         01:C8E4  AD 26 23   			lda	_weapon_id
 8332                        		__call		_spr_set.1
         01:C8E7  20 DD E7   			call	_spr_set.1
 8333                        	
 8334                        		.dbg	line,	"include\routines_LEVELS.c", 1625; spr_x(player_pos_x+80);
 8335                        		__ld.wm		_player_pos_x
         01:C8EA  AD DA 24   			lda.l	_player_pos_x
         01:C8ED  AC DB 24   			ldy.h	_player_pos_x
 8336                        		__add.wi	80
         01:C8F0  18         			clc
         01:C8F1  69 50      			adc.l	#80
         01:C8F3  90 01      			bcc	!+
         01:C8F5  C8         			iny
         01:C8F6             	!:
 8337                        		__call		_spr_x.1
         01:C8F6  20 0A E8   			call	_spr_x.1
 8338                        	
 8339                        		.dbg	line,	"include\routines_LEVELS.c", 1626; }
 8340                        	
 8341                        		.dbg	line,	"include\routines_LEVELS.c", 1627; 
 8342                        	
 8343                        		.dbg	line,	"include\routines_LEVELS.c", 1628; else
 8344                        		__bra		.LL307
         01:C8F9  4C B3 C9   			bra	.LL307
 8345    01:C8FC             	.LL306:
 8346                        	
 8347                        		.dbg	line,	"include\routines_LEVELS.c", 1629; {
 8348                        	
 8349                        		.dbg	line,	"include\routines_LEVELS.c", 1630; spr_x(player_pos_x-48);
 8350                        		__ld.wm		_player_pos_x
         01:C8FC  AD DA 24   			lda.l	_player_pos_x
         01:C8FF  AC DB 24   			ldy.h	_player_pos_x
 8351                        		__sub.wi	48
         01:C902  38         			sec
         01:C903  E9 30      			sbc.l	#48
         01:C905  B0 01      			bcs	!+
         01:C907  88         			dey
         01:C908             	!:
 8352                        		__call		_spr_x.1
         01:C908  20 0A E8   			call	_spr_x.1
 8353                        	
 8354                        		.dbg	line,	"include\routines_LEVELS.c", 1632; spr_set(weapon_id);
 8355                        		__ld.umq	_weapon_id
         01:C90B  AD 26 23   			lda	_weapon_id
 8356                        		__call		_spr_set.1
         01:C90E  20 DD E7   			call	_spr_set.1
 8357                        	
 8358                        		.dbg	line,	"include\routines_LEVELS.c", 1633; spr_x(player_pos_x-64);
 8359                        		__ld.wm		_player_pos_x
         01:C911  AD DA 24   			lda.l	_player_pos_x
         01:C914  AC DB 24   			ldy.h	_player_pos_x
 8360                        		__sub.wi	64
         01:C917  38         			sec
         01:C918  E9 40      			sbc.l	#64
         01:C91A  B0 01      			bcs	!+
         01:C91C  88         			dey
         01:C91D             	!:
 8361                        		__call		_spr_x.1
         01:C91D  20 0A E8   			call	_spr_x.1
 8362                        	
 8363                        		.dbg	line,	"include\routines_LEVELS.c", 1634; }
 8364    01:C920             	.LL307	.alias		.LL308
 8365                        	
 8366                        		.dbg	line,	"include\routines_LEVELS.c", 1635; }
 8367                        	
 8368                        		.dbg	line,	"include\routines_LEVELS.c", 1637; else if(player_counter_attack == 23)
 8369                        		__bra		.LL308
         01:C920  4C B3 C9   			bra	.LL308
 8370    01:C923             	.LL305:
 8371                        		__ld.umq	_player_counter_attack
         01:C923  AD 1E 23   			lda	_player_counter_attack
 8372                        		__equ_b.uiq	23
         01:C926  C9 17      			cmp	#23
         01:C928  F0 01      			beq	!+
         01:C92A  18         			clc
         01:C92B             	!:
 8373                        		__bfalse	.LL309
         01:C92B  B0 03 4C B3			bcc	.LL309
         01:C92F  C9          
 8374                        	
 8375                        		.dbg	line,	"include\routines_LEVELS.c", 1638; {
 8376                        	
 8377                        		.dbg	line,	"include\routines_LEVELS.c", 1639; spr_set(chain_id);
 8378                        		__ld.umq	_chain_id
         01:C930  AD 25 23   			lda	_chain_id
 8379                        		__call		_spr_set.1
         01:C933  20 DD E7   			call	_spr_set.1
 8380                        	
 8381                        		.dbg	line,	"include\routines_LEVELS.c", 1640; spr_hide();
 8382                        		__call		_spr_hide
         01:C936  20 F8 E7   			call	_spr_hide
 8383                        	
 8384                        		.dbg	line,	"include\routines_LEVELS.c", 1642; spr_set(chain_id+1);
 8385                        		__ld.um		_chain_id
         01:C939  AD 25 23   			lda	_chain_id
         01:C93C  C2         			cly
 8386                        		__add.wi	1
         01:C93D  1A         			inc	a
         01:C93E  D0 01      			bne	!+
         01:C940  C8         			iny
         01:C941             	!:
 8387                        		__call		_spr_set.1
         01:C941  20 DD E7   			call	_spr_set.1
 8388                        	
 8389                        		.dbg	line,	"include\routines_LEVELS.c", 1643; spr_hide();
 8390                        		__call		_spr_hide
         01:C944  20 F8 E7   			call	_spr_hide
 8391                        	
 8392                        		.dbg	line,	"include\routines_LEVELS.c", 1645; spr_set(chain_id+2);
 8393                        		__ld.um		_chain_id
         01:C947  AD 25 23   			lda	_chain_id
         01:C94A  C2         			cly
 8394                        		__add.wi	2
         01:C94B  18         			clc
         01:C94C  69 02      			adc.l	#2
         01:C94E  90 01      			bcc	!+
         01:C950  C8         			iny
         01:C951             	!:
 8395                        		__call		_spr_set.1
         01:C951  20 DD E7   			call	_spr_set.1
 8396                        	
 8397                        		.dbg	line,	"include\routines_LEVELS.c", 1646; spr_hide();
 8398                        		__call		_spr_hide
         01:C954  20 F8 E7   			call	_spr_hide
 8399                        	
 8400                        		.dbg	line,	"include\routines_LEVELS.c", 1648; spr_set(player_id);
 8401                        		__ld.umq	_player_id
         01:C957  AD 17 23   			lda	_player_id
 8402                        		__call		_spr_set.1
         01:C95A  20 DD E7   			call	_spr_set.1
 8403                        	
 8404                        		.dbg	line,	"include\routines_LEVELS.c", 1649; spr_pattern(PLAYER_HANG_VRAM_ADR);
 8405                        		__ld.wi		7424
         01:C95D  62         			cla
         01:C95E  A0 1D      			ldy.h	#7424
 8406                        		__call		_spr_pattern.1
         01:C960  20 26 E8   			call	_spr_pattern.1
 8407                        	
 8408                        		.dbg	line,	"include\routines_LEVELS.c", 1651; spr_set(weapon_id);
 8409                        		__ld.umq	_weapon_id
         01:C963  AD 26 23   			lda	_weapon_id
 8410                        		__call		_spr_set.1
         01:C966  20 DD E7   			call	_spr_set.1
 8411                        	
 8412                        		.dbg	line,	"include\routines_LEVELS.c", 1652; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
 8413                        		__ld.wi		31808
         01:C969  A9 40      			lda.l	#31808
         01:C96B  A0 7C      			ldy.h	#31808
 8414                        		__call		_spr_pattern.1
         01:C96D  20 26 E8   			call	_spr_pattern.1
 8415                        	
 8416                        		.dbg	line,	"include\routines_LEVELS.c", 1653; spr_y(player_pos_y+5);
 8417                        		__ld.wm		_player_pos_y
         01:C970  AD DC 24   			lda.l	_player_pos_y
         01:C973  AC DD 24   			ldy.h	_player_pos_y
 8418                        		__add.wi	5
         01:C976  18         			clc
         01:C977  69 05      			adc.l	#5
         01:C979  90 01      			bcc	!+
         01:C97B  C8         			iny
         01:C97C             	!:
 8419                        		__call		_spr_y.1
         01:C97C  20 19 E8   			call	_spr_y.1
 8420                        	
 8421                        		.dbg	line,	"include\routines_LEVELS.c", 1655; if(player_axis == AXIS_RIGHT)
 8422                        		__not.um	_player_axis
         01:C97F  AD 19 23   			lda	_player_axis
         01:C982  18         			clc
         01:C983  D0 01      			bne	!+
         01:C985  38         			sec
         01:C986             	!:
 8423                        		__bfalse	.LL310
         01:C986  90 11      			bcc	.LL310
 8424                        	
 8425                        		.dbg	line,	"include\routines_LEVELS.c", 1656; {
 8426                        	
 8427                        		.dbg	line,	"include\routines_LEVELS.c", 1657; spr_x(player_pos_x+17);
 8428                        		__ld.wm		_player_pos_x
         01:C988  AD DA 24   			lda.l	_player_pos_x
         01:C98B  AC DB 24   			ldy.h	_player_pos_x
 8429                        		__add.wi	17
         01:C98E  18         			clc
         01:C98F  69 11      			adc.l	#17
         01:C991  90 01      			bcc	!+
         01:C993  C8         			iny
         01:C994             	!:
 8430                        		__call		_spr_x.1
         01:C994  20 0A E8   			call	_spr_x.1
 8431                        	
 8432                        		.dbg	line,	"include\routines_LEVELS.c", 1658; }
 8433                        	
 8434                        		.dbg	line,	"include\routines_LEVELS.c", 1660; else
 8435                        		__bra		.LL311
         01:C997  80 0F      			bra	.LL311
 8436    01:C999             	.LL310:
 8437                        	
 8438                        		.dbg	line,	"include\routines_LEVELS.c", 1661; {
 8439                        	
 8440                        		.dbg	line,	"include\routines_LEVELS.c", 1662; spr_x(player_pos_x-2);
 8441                        		__ld.wm		_player_pos_x
         01:C999  AD DA 24   			lda.l	_player_pos_x
         01:C99C  AC DB 24   			ldy.h	_player_pos_x
 8442                        		__sub.wi	2
         01:C99F  38         			sec
         01:C9A0  E9 02      			sbc.l	#2
         01:C9A2  B0 01      			bcs	!+
         01:C9A4  88         			dey
         01:C9A5             	!:
 8443                        		__call		_spr_x.1
         01:C9A5  20 0A E8   			call	_spr_x.1
 8444                        	
 8445                        		.dbg	line,	"include\routines_LEVELS.c", 1663; }
 8446    01:C9A8             	.LL311:
 8447                        	
 8448                        		.dbg	line,	"include\routines_LEVELS.c", 1665; player_attack = FALSE;
 8449                        		__st.umiq	0, _player_attack
         01:C9A8  9C 20 23   			stz	_player_attack
 8450                        	
 8451                        		.dbg	line,	"include\routines_LEVELS.c", 1666; player_counter_attack = 0;
 8452                        		__st.umiq	0, _player_counter_attack
         01:C9AB  9C 1E 23   			stz	_player_counter_attack
 8453                        	
 8454                        		.dbg	line,	"include\routines_LEVELS.c", 1667; player_state = STATE_HANG;
 8455                        		__st.umiq	10, _player_state
         01:C9AE  A9 0A      			lda.l	#10
         01:C9B0  8D 18 23   			sta	_player_state
 8456                        	
 8457                        		.dbg	line,	"include\routines_LEVELS.c", 1668; }
 8458                        	
 8459                        		.dbg	line,	"include\routines_LEVELS.c", 1671; player_counter_attack += 1;
 8460    01:C9B3             	.LL309:
 8461    01:C9B3             	.LL308:
 8462    01:C9B3             	.LL304:
 8463    01:C9B3             	.LL300:
 8464    01:C9B3             	.LL296:
 8465    01:C9B3             	.LL292:
 8466                        		__add_st.umiq	1, _player_counter_attack
         01:C9B3  EE 1E 23   			inc	_player_counter_attack
 8467                        	
 8468                        		.dbg	line,	"include\routines_LEVELS.c", 1672; }
 8469    01:C9B6             	.LL288:
 8470                        	
 8471                        		.dbg	line,	"include\routines_LEVELS.c", 1674; spr_set(player_id);
 8472                        		__ld.umq	_player_id
         01:C9B6  AD 17 23   			lda	_player_id
 8473                        		__call		_spr_set.1
         01:C9B9  20 DD E7   			call	_spr_set.1
 8474                        	
 8475                        		.dbg	line,	"include\routines_LEVELS.c", 1675; spr_y(player_pos_y);
 8476                        		__ld.wm		_player_pos_y
         01:C9BC  AD DC 24   			lda.l	_player_pos_y
         01:C9BF  AC DD 24   			ldy.h	_player_pos_y
 8477                        		__call		_spr_y.1
         01:C9C2  20 19 E8   			call	_spr_y.1
 8478                        	
 8479                        		.dbg	line,	"include\routines_LEVELS.c", 1679; if(player_index_jump < 34)
 8480                        		__ld.umq	_player_index_jump
         01:C9C5  AD 1C 23   			lda	_player_index_jump
 8481                        		__ult_b.uiq	34
         01:C9C8  C9 22      			cmp	#34		; Subtract integer from A.
         01:C9CA  6A         			ror	a		; CC if A < integer.
         01:C9CB  49 80      			eor	#$80
         01:C9CD  2A         			rol	a
 8482                        		__bfalse	.LL312
         01:C9CE  90 03      			bcc	.LL312
 8483                        	
 8484                        		.dbg	line,	"include\routines_LEVELS.c", 1680; {
 8485                        	
 8486                        		.dbg	line,	"include\routines_LEVELS.c", 1681; player_index_jump += 1;
 8487                        		__add_st.umiq	1, _player_index_jump
         01:C9D0  EE 1C 23   			inc	_player_index_jump
 8488                        	
 8489                        		.dbg	line,	"include\routines_LEVELS.c", 1682; }
 8490                        	
 8491                        		.dbg	line,	"include\routines_LEVELS.c", 1687; //--------------------------------------------------------------------------------------//
 8492                        	
 8493                        		.dbg	line,	"include\routines_LEVELS.c", 1688; //                                   FLOOR COLLISION                                    //
 8494                        	
 8495                        		.dbg	line,	"include\routines_LEVELS.c", 1689; //--------------------------------------------------------------------------------------//
 8496                        	
 8497                        		.dbg	line,	"include\routines_LEVELS.c", 1691; if(player_index_jump > 14)
 8498    01:C9D3             	.LL312:
 8499                        		__ld.umq	_player_index_jump
         01:C9D3  AD 1C 23   			lda	_player_index_jump
 8500                        		__ugt_b.uiq	14
         01:C9D6  18         			clc			; Subtract integer+1 from A.
         01:C9D7  E9 0E      			sbc	#14		; CS if A > integer.
 8501                        		__bfalse	.LL313
         01:C9D9  B0 03 4C 9A			bcc	.LL313
         01:C9DD  CB          
 8502                        	
 8503                        		.dbg	line,	"include\routines_LEVELS.c", 1692; {
 8504                        	
 8505                        		.dbg	line,	"include\routines_LEVELS.c", 1693; // CHECK COLLISION WITH LEFT FLOOR //
 8506                        	
 8507                        		.dbg	line,	"include\routines_LEVELS.c", 1694; check_BG( 10 , 32 );
 8508                        		__ld.wi		10
         01:C9DE  A9 0A      			lda.l	#10
         01:C9E0  C2         			cly
 8509                        		__pusharg.wr
         01:C9E1  A6 8D      			ldx	<__sp
         01:C9E3  CA         			dex
         01:C9E4  CA         			dex
         01:C9E5  95 08      			sta.l	<__stack, x
         01:C9E7  94 09      			sty.h	<__stack, x
         01:C9E9  86 8D      			stx	<__sp
 8510                        		__ld.wi		32
         01:C9EB  A9 20      			lda.l	#32
         01:C9ED  C2         			cly
 8511                        		__pusharg.wr
         01:C9EE  A6 8D      			ldx	<__sp
         01:C9F0  CA         			dex
         01:C9F1  CA         			dex
         01:C9F2  95 08      			sta.l	<__stack, x
         01:C9F4  94 09      			sty.h	<__stack, x
         01:C9F6  86 8D      			stx	<__sp
 8512                        		__call		_check_BG
         01:C9F8  20 6D FF   			call	_check_BG
 8513                        	
 8514                        		.dbg	line,	"include\routines_LEVELS.c", 1696; // IF PLAYER TOUCHES THE GROUND TO THE LEFT //
 8515                        	
 8516                        		.dbg	line,	"include\routines_LEVELS.c", 1697; if(map_blk_flag == TILE_BG)
 8517                        		__ld.umq	_map_blk_flag
         01:C9FB  AD B8 2B   			lda	_map_blk_flag
 8518                        		__equ_b.uiq	1
         01:C9FE  C9 01      			cmp	#1
         01:CA00  F0 01      			beq	!+
         01:CA02  18         			clc
         01:CA03             	!:
 8519                        		__bfalse	.LL314
         01:CA03  B0 03 4C BC			bcc	.LL314
         01:CA07  CA          
 8520                        	
 8521                        		.dbg	line,	"include\routines_LEVELS.c", 1698; {
 8522                        	
 8523                        		.dbg	line,	"include\routines_LEVELS.c", 1699; // CALCULATE HOW MANY PIXELS THE PLAYER MOVED INTO THE GROUND //
 8524                        	
 8525                        		.dbg	line,	"include\routines_LEVELS.c", 1700; for(i=1; i<11 ; i++ )
 8526                        		__st.umiq	1, __update_PLAYER_end - 1  /* i */
         01:CA08  A9 01      			lda.l	#1
         01:CA0A  8D 0C 23   			sta	__update_PLAYER_end - 1
 8527    01:CA0D             	.LL315:
 8528                        		__ld.umq	__update_PLAYER_end - 1  /* i */
         01:CA0D  AD 0C 23   			lda	__update_PLAYER_end - 1
 8529                        		__ult_b.uiq	11
         01:CA10  C9 0B      			cmp	#11		; Subtract integer from A.
         01:CA12  6A         			ror	a		; CC if A < integer.
         01:CA13  49 80      			eor	#$80
         01:CA15  2A         			rol	a
 8530                        		__btrue		.LL317
         01:CA16  B0 07      			bcs	.LL317
 8531                        		__bra		.LL318
         01:CA18  80 5B      			bra	.LL318
 8532    01:CA1A             	.LL316:
 8533                        		__inc.umq	__update_PLAYER_end - 1  /* i */
         01:CA1A  EE 0C 23   			inc	__update_PLAYER_end - 1
 8534                        		__bra		.LL315
         01:CA1D  80 EE      			bra	.LL315
 8535    01:CA1F             	.LL317:
 8536                        	
 8537                        		.dbg	line,	"include\routines_LEVELS.c", 1701; {
 8538                        	
 8539                        		.dbg	line,	"include\routines_LEVELS.c", 1702; check_TILE_DEPTH( 10 , i);
 8540                        		__ld.wi		10
         01:CA1F  A9 0A      			lda.l	#10
         01:CA21  C2         			cly
 8541                        		__pusharg.wr
         01:CA22  A6 8D      			ldx	<__sp
         01:CA24  CA         			dex
         01:CA25  CA         			dex
         01:CA26  95 08      			sta.l	<__stack, x
         01:CA28  94 09      			sty.h	<__stack, x
         01:CA2A  86 8D      			stx	<__sp
 8542                        		__ld.um		__update_PLAYER_end - 1  /* i */
         01:CA2C  AD 0C 23   			lda	__update_PLAYER_end - 1
         01:CA2F  C2         			cly
 8543                        		__pusharg.wr
         01:CA30  A6 8D      			ldx	<__sp
         01:CA32  CA         			dex
         01:CA33  CA         			dex
         01:CA34  95 08      			sta.l	<__stack, x
         01:CA36  94 09      			sty.h	<__stack, x
         01:CA38  86 8D      			stx	<__sp
 8544                        		__call		_check_TILE_DEPTH
         01:CA3A  20 59 FF   			call	_check_TILE_DEPTH
 8545                        	
 8546                        		.dbg	line,	"include\routines_LEVELS.c", 1704; if(map_blk_flag == TILE_EMPTY)
 8547                        		__not.um	_map_blk_flag
         01:CA3D  AD B8 2B   			lda	_map_blk_flag
         01:CA40  18         			clc
         01:CA41  D0 01      			bne	!+
         01:CA43  38         			sec
         01:CA44             	!:
 8548                        		__bfalse	.LL319
         01:CA44  90 D4      			bcc	.LL319
 8549                        	
 8550                        		.dbg	line,	"include\routines_LEVELS.c", 1705; {
 8551                        	
 8552                        		.dbg	line,	"include\routines_LEVELS.c", 1706; //spr_set(player_id);
 8553                        	
 8554                        		.dbg	line,	"include\routines_LEVELS.c", 1707; spr_pattern(PLAYER_IDLE_VRAM_ADR);
 8555                        		__ld.wi		5120
         01:CA46  62         			cla
         01:CA47  A0 14      			ldy.h	#5120
 8556                        		__call		_spr_pattern.1
         01:CA49  20 26 E8   			call	_spr_pattern.1
 8557                        	
 8558                        		.dbg	line,	"include\routines_LEVELS.c", 1708; player_pos_y -= (i - 1);
 8559                        		__ld.um		__update_PLAYER_end - 1  /* i */
         01:CA4C  AD 0C 23   			lda	__update_PLAYER_end - 1
         01:CA4F  C2         			cly
 8560                        		__sub.wi	1
         01:CA50  38         			sec
         01:CA51  E9 01      			sbc.l	#1
         01:CA53  B0 01      			bcs	!+
         01:CA55  88         			dey
         01:CA56             	!:
 8561                        		__isub_st.wmq	_player_pos_y
         01:CA56  38         			sec
         01:CA57  49 FF      			eor	#$FF
         01:CA59  6D DC 24   			adc.l	_player_pos_y
         01:CA5C  8D DC 24   			sta.l	_player_pos_y
         01:CA5F  98         			tya
         01:CA60  49 FF      			eor	#$FF
         01:CA62  6D DD 24   			adc.h	_player_pos_y
         01:CA65  8D DD 24   			sta.h	_player_pos_y
 8562                        	
 8563                        		.dbg	line,	"include\routines_LEVELS.c", 1709; spr_y(player_pos_y);
 8564                        		__ld.wm		_player_pos_y
         01:CA68  AD DC 24   			lda.l	_player_pos_y
         01:CA6B  AC DD 24   			ldy.h	_player_pos_y
 8565                        		__call		_spr_y.1
         01:CA6E  20 19 E8   			call	_spr_y.1
 8566                        	
 8567                        		.dbg	line,	"include\routines_LEVELS.c", 1710; break;
 8568                        		__bra		.LL318
         01:CA71  80 02      			bra	.LL318
 8569                        	
 8570                        		.dbg	line,	"include\routines_LEVELS.c", 1711; }
 8571                        	
 8572                        		.dbg	line,	"include\routines_LEVELS.c", 1713; }
 8573    01:CA73             	.LL319	.alias		.LL316
 8574                        		__bra		.LL316
         01:CA73  80 A5      			bra	.LL316
 8575    01:CA75             	.LL318:
 8576                        	
 8577                        		.dbg	line,	"include\routines_LEVELS.c", 1715; if(player_attack == FALSE)
 8578                        		__not.um	_player_attack
         01:CA75  AD 20 23   			lda	_player_attack
         01:CA78  18         			clc
         01:CA79  D0 01      			bne	!+
         01:CA7B  38         			sec
         01:CA7C             	!:
 8579                        		__bfalse	.LL320
         01:CA7C  90 24      			bcc	.LL320
 8580                        	
 8581                        		.dbg	line,	"include\routines_LEVELS.c", 1716; {
 8582                        	
 8583                        		.dbg	line,	"include\routines_LEVELS.c", 1717; spr_set(weapon_id);
 8584                        		__ld.umq	_weapon_id
         01:CA7E  AD 26 23   			lda	_weapon_id
 8585                        		__call		_spr_set.1
         01:CA81  20 DD E7   			call	_spr_set.1
 8586                        	
 8587                        		.dbg	line,	"include\routines_LEVELS.c", 1718; spr_x(player_pos_x+8);
 8588                        		__ld.wm		_player_pos_x
         01:CA84  AD DA 24   			lda.l	_player_pos_x
         01:CA87  AC DB 24   			ldy.h	_player_pos_x
 8589                        		__add.wi	8
         01:CA8A  18         			clc
         01:CA8B  69 08      			adc.l	#8
         01:CA8D  90 01      			bcc	!+
         01:CA8F  C8         			iny
         01:CA90             	!:
 8590                        		__call		_spr_x.1
         01:CA90  20 0A E8   			call	_spr_x.1
 8591                        	
 8592                        		.dbg	line,	"include\routines_LEVELS.c", 1719; spr_y(player_pos_y+16);
 8593                        		__ld.wm		_player_pos_y
         01:CA93  AD DC 24   			lda.l	_player_pos_y
         01:CA96  AC DD 24   			ldy.h	_player_pos_y
 8594                        		__add.wi	16
         01:CA99  18         			clc
         01:CA9A  69 10      			adc.l	#16
         01:CA9C  90 01      			bcc	!+
         01:CA9E  C8         			iny
         01:CA9F             	!:
 8595                        		__call		_spr_y.1
         01:CA9F  20 19 E8   			call	_spr_y.1
 8596                        	
 8597                        		.dbg	line,	"include\routines_LEVELS.c", 1720; }
 8598                        	
 8599                        		.dbg	line,	"include\routines_LEVELS.c", 1722; player_counter_anim = 1;
 8600    01:CAA2             	.LL320:
 8601                        		__st.umiq	1, _player_counter_anim
         01:CAA2  A9 01      			lda.l	#1
         01:CAA4  8D 1B 23   			sta	_player_counter_anim
 8602                        	
 8603                        		.dbg	line,	"include\routines_LEVELS.c", 1723; player_index_jump = 0;
 8604                        		__st.umiq	0, _player_index_jump
         01:CAA7  9C 1C 23   			stz	_player_index_jump
 8605                        	
 8606                        		.dbg	line,	"include\routines_LEVELS.c", 1724; //hit_wall = FALSE;
 8607                        	
 8608                        		.dbg	line,	"include\routines_LEVELS.c", 1726; if(player_attack == FALSE)
 8609                        		__not.um	_player_attack
         01:CAAA  AD 20 23   			lda	_player_attack
         01:CAAD  18         			clc
         01:CAAE  D0 01      			bne	!+
         01:CAB0  38         			sec
         01:CAB1             	!:
 8610                        		__bfalse	.LL321
         01:CAB1  B0 03 4C 70			bcc	.LL321
         01:CAB5  DB          
 8611                        	
 8612                        		.dbg	line,	"include\routines_LEVELS.c", 1727; {
 8613                        	
 8614                        		.dbg	line,	"include\routines_LEVELS.c", 1728; player_state = STATE_IDLE;
 8615                        		__st.umiq	0, _player_state
         01:CAB6  9C 18 23   			stz	_player_state
 8616                        	
 8617                        		.dbg	line,	"include\routines_LEVELS.c", 1729; }
 8618                        	
 8619                        		.dbg	line,	"include\routines_LEVELS.c", 1730; 
 8620                        	
 8621                        		.dbg	line,	"include\routines_LEVELS.c", 1731; return;
 8622    01:CAB9             	.LL321	.alias		.LL230
 8623                        		__bra		.LL230
         01:CAB9  4C 70 DB   			bra	.LL230
 8624                        	
 8625                        		.dbg	line,	"include\routines_LEVELS.c", 1732; }
 8626                        	
 8627                        		.dbg	line,	"include\routines_LEVELS.c", 1734; // IF PLAYER TOUCHES THE GROUND TO THE RIGHT //
 8628                        	
 8629                        		.dbg	line,	"include\routines_LEVELS.c", 1735; else
 8630    01:CABC             	.LL314:
 8631                        	
 8632                        		.dbg	line,	"include\routines_LEVELS.c", 1736; {
 8633                        	
 8634                        		.dbg	line,	"include\routines_LEVELS.c", 1737; // CHECK COLLISION WITH RIGHT FLOOR //
 8635                        	
 8636                        		.dbg	line,	"include\routines_LEVELS.c", 1738; check_BG( 22 , 32 );
 8637                        		__ld.wi		22
         01:CABC  A9 16      			lda.l	#22
         01:CABE  C2         			cly
 8638                        		__pusharg.wr
         01:CABF  A6 8D      			ldx	<__sp
         01:CAC1  CA         			dex
         01:CAC2  CA         			dex
         01:CAC3  95 08      			sta.l	<__stack, x
         01:CAC5  94 09      			sty.h	<__stack, x
         01:CAC7  86 8D      			stx	<__sp
 8639                        		__ld.wi		32
         01:CAC9  A9 20      			lda.l	#32
         01:CACB  C2         			cly
 8640                        		__pusharg.wr
         01:CACC  A6 8D      			ldx	<__sp
         01:CACE  CA         			dex
         01:CACF  CA         			dex
         01:CAD0  95 08      			sta.l	<__stack, x
         01:CAD2  94 09      			sty.h	<__stack, x
         01:CAD4  86 8D      			stx	<__sp
 8641                        		__call		_check_BG
         01:CAD6  20 6D FF   			call	_check_BG
 8642                        	
 8643                        		.dbg	line,	"include\routines_LEVELS.c", 1740; if(map_blk_flag == TILE_BG)
 8644                        		__ld.umq	_map_blk_flag
         01:CAD9  AD B8 2B   			lda	_map_blk_flag
 8645                        		__equ_b.uiq	1
         01:CADC  C9 01      			cmp	#1
         01:CADE  F0 01      			beq	!+
         01:CAE0  18         			clc
         01:CAE1             	!:
 8646                        		__bfalse	.LL323
         01:CAE1  B0 03 4C 9A			bcc	.LL323
         01:CAE5  CB          
 8647                        	
 8648                        		.dbg	line,	"include\routines_LEVELS.c", 1741; {
 8649                        	
 8650                        		.dbg	line,	"include\routines_LEVELS.c", 1742; // CALCULATE HOW MANY PIXELS THE PLAYER MOVED INTO THE GROUND //
 8651                        	
 8652                        		.dbg	line,	"include\routines_LEVELS.c", 1743; for(i=1; i<11 ; i++ )
 8653                        		__st.umiq	1, __update_PLAYER_end - 1  /* i */
         01:CAE6  A9 01      			lda.l	#1
         01:CAE8  8D 0C 23   			sta	__update_PLAYER_end - 1
 8654    01:CAEB             	.LL324:
 8655                        		__ld.umq	__update_PLAYER_end - 1  /* i */
         01:CAEB  AD 0C 23   			lda	__update_PLAYER_end - 1
 8656                        		__ult_b.uiq	11
         01:CAEE  C9 0B      			cmp	#11		; Subtract integer from A.
         01:CAF0  6A         			ror	a		; CC if A < integer.
         01:CAF1  49 80      			eor	#$80
         01:CAF3  2A         			rol	a
 8657                        		__btrue		.LL326
         01:CAF4  B0 07      			bcs	.LL326
 8658                        		__bra		.LL327
         01:CAF6  80 5B      			bra	.LL327
 8659    01:CAF8             	.LL325:
 8660                        		__inc.umq	__update_PLAYER_end - 1  /* i */
         01:CAF8  EE 0C 23   			inc	__update_PLAYER_end - 1
 8661                        		__bra		.LL324
         01:CAFB  80 EE      			bra	.LL324
 8662    01:CAFD             	.LL326:
 8663                        	
 8664                        		.dbg	line,	"include\routines_LEVELS.c", 1744; {
 8665                        	
 8666                        		.dbg	line,	"include\routines_LEVELS.c", 1745; check_TILE_DEPTH( 22 , i);
 8667                        		__ld.wi		22
         01:CAFD  A9 16      			lda.l	#22
         01:CAFF  C2         			cly
 8668                        		__pusharg.wr
         01:CB00  A6 8D      			ldx	<__sp
         01:CB02  CA         			dex
         01:CB03  CA         			dex
         01:CB04  95 08      			sta.l	<__stack, x
         01:CB06  94 09      			sty.h	<__stack, x
         01:CB08  86 8D      			stx	<__sp
 8669                        		__ld.um		__update_PLAYER_end - 1  /* i */
         01:CB0A  AD 0C 23   			lda	__update_PLAYER_end - 1
         01:CB0D  C2         			cly
 8670                        		__pusharg.wr
         01:CB0E  A6 8D      			ldx	<__sp
         01:CB10  CA         			dex
         01:CB11  CA         			dex
         01:CB12  95 08      			sta.l	<__stack, x
         01:CB14  94 09      			sty.h	<__stack, x
         01:CB16  86 8D      			stx	<__sp
 8671                        		__call		_check_TILE_DEPTH
         01:CB18  20 59 FF   			call	_check_TILE_DEPTH
 8672                        	
 8673                        		.dbg	line,	"include\routines_LEVELS.c", 1747; if(map_blk_flag == TILE_EMPTY)
 8674                        		__not.um	_map_blk_flag
         01:CB1B  AD B8 2B   			lda	_map_blk_flag
         01:CB1E  18         			clc
         01:CB1F  D0 01      			bne	!+
         01:CB21  38         			sec
         01:CB22             	!:
 8675                        		__bfalse	.LL328
         01:CB22  90 D4      			bcc	.LL328
 8676                        	
 8677                        		.dbg	line,	"include\routines_LEVELS.c", 1748; {
 8678                        	
 8679                        		.dbg	line,	"include\routines_LEVELS.c", 1749; //spr_set(player_id);
 8680                        	
 8681                        		.dbg	line,	"include\routines_LEVELS.c", 1750; spr_pattern(PLAYER_IDLE_VRAM_ADR);
 8682                        		__ld.wi		5120
         01:CB24  62         			cla
         01:CB25  A0 14      			ldy.h	#5120
 8683                        		__call		_spr_pattern.1
         01:CB27  20 26 E8   			call	_spr_pattern.1
 8684                        	
 8685                        		.dbg	line,	"include\routines_LEVELS.c", 1751; player_pos_y -= (i - 1);
 8686                        		__ld.um		__update_PLAYER_end - 1  /* i */
         01:CB2A  AD 0C 23   			lda	__update_PLAYER_end - 1
         01:CB2D  C2         			cly
 8687                        		__sub.wi	1
         01:CB2E  38         			sec
         01:CB2F  E9 01      			sbc.l	#1
         01:CB31  B0 01      			bcs	!+
         01:CB33  88         			dey
         01:CB34             	!:
 8688                        		__isub_st.wmq	_player_pos_y
         01:CB34  38         			sec
         01:CB35  49 FF      			eor	#$FF
         01:CB37  6D DC 24   			adc.l	_player_pos_y
         01:CB3A  8D DC 24   			sta.l	_player_pos_y
         01:CB3D  98         			tya
         01:CB3E  49 FF      			eor	#$FF
         01:CB40  6D DD 24   			adc.h	_player_pos_y
         01:CB43  8D DD 24   			sta.h	_player_pos_y
 8689                        	
 8690                        		.dbg	line,	"include\routines_LEVELS.c", 1752; spr_y(player_pos_y);
 8691                        		__ld.wm		_player_pos_y
         01:CB46  AD DC 24   			lda.l	_player_pos_y
         01:CB49  AC DD 24   			ldy.h	_player_pos_y
 8692                        		__call		_spr_y.1
         01:CB4C  20 19 E8   			call	_spr_y.1
 8693                        	
 8694                        		.dbg	line,	"include\routines_LEVELS.c", 1753; break;
 8695                        		__bra		.LL327
         01:CB4F  80 02      			bra	.LL327
 8696                        	
 8697                        		.dbg	line,	"include\routines_LEVELS.c", 1754; }
 8698                        	
 8699                        		.dbg	line,	"include\routines_LEVELS.c", 1756; }
 8700    01:CB51             	.LL328	.alias		.LL325
 8701                        		__bra		.LL325
         01:CB51  80 A5      			bra	.LL325
 8702    01:CB53             	.LL327:
 8703                        	
 8704                        		.dbg	line,	"include\routines_LEVELS.c", 1758; if(player_attack == FALSE)
 8705                        		__not.um	_player_attack
         01:CB53  AD 20 23   			lda	_player_attack
         01:CB56  18         			clc
         01:CB57  D0 01      			bne	!+
         01:CB59  38         			sec
         01:CB5A             	!:
 8706                        		__bfalse	.LL329
         01:CB5A  90 24      			bcc	.LL329
 8707                        	
 8708                        		.dbg	line,	"include\routines_LEVELS.c", 1759; {
 8709                        	
 8710                        		.dbg	line,	"include\routines_LEVELS.c", 1760; spr_set(weapon_id);
 8711                        		__ld.umq	_weapon_id
         01:CB5C  AD 26 23   			lda	_weapon_id
 8712                        		__call		_spr_set.1
         01:CB5F  20 DD E7   			call	_spr_set.1
 8713                        	
 8714                        		.dbg	line,	"include\routines_LEVELS.c", 1761; spr_x(player_pos_x+8);
 8715                        		__ld.wm		_player_pos_x
         01:CB62  AD DA 24   			lda.l	_player_pos_x
         01:CB65  AC DB 24   			ldy.h	_player_pos_x
 8716                        		__add.wi	8
         01:CB68  18         			clc
         01:CB69  69 08      			adc.l	#8
         01:CB6B  90 01      			bcc	!+
         01:CB6D  C8         			iny
         01:CB6E             	!:
 8717                        		__call		_spr_x.1
         01:CB6E  20 0A E8   			call	_spr_x.1
 8718                        	
 8719                        		.dbg	line,	"include\routines_LEVELS.c", 1762; spr_y(player_pos_y+16);
 8720                        		__ld.wm		_player_pos_y
         01:CB71  AD DC 24   			lda.l	_player_pos_y
         01:CB74  AC DD 24   			ldy.h	_player_pos_y
 8721                        		__add.wi	16
         01:CB77  18         			clc
         01:CB78  69 10      			adc.l	#16
         01:CB7A  90 01      			bcc	!+
         01:CB7C  C8         			iny
         01:CB7D             	!:
 8722                        		__call		_spr_y.1
         01:CB7D  20 19 E8   			call	_spr_y.1
 8723                        	
 8724                        		.dbg	line,	"include\routines_LEVELS.c", 1763; }
 8725                        	
 8726                        		.dbg	line,	"include\routines_LEVELS.c", 1765; player_counter_anim = 1;
 8727    01:CB80             	.LL329:
 8728                        		__st.umiq	1, _player_counter_anim
         01:CB80  A9 01      			lda.l	#1
         01:CB82  8D 1B 23   			sta	_player_counter_anim
 8729                        	
 8730                        		.dbg	line,	"include\routines_LEVELS.c", 1766; player_index_jump = 0;
 8731                        		__st.umiq	0, _player_index_jump
         01:CB85  9C 1C 23   			stz	_player_index_jump
 8732                        	
 8733                        		.dbg	line,	"include\routines_LEVELS.c", 1767; //hit_wall = FALSE;
 8734                        	
 8735                        		.dbg	line,	"include\routines_LEVELS.c", 1769; if(player_attack == FALSE)
 8736                        		__not.um	_player_attack
         01:CB88  AD 20 23   			lda	_player_attack
         01:CB8B  18         			clc
         01:CB8C  D0 01      			bne	!+
         01:CB8E  38         			sec
         01:CB8F             	!:
 8737                        		__bfalse	.LL330
         01:CB8F  B0 03 4C 70			bcc	.LL330
         01:CB93  DB          
 8738                        	
 8739                        		.dbg	line,	"include\routines_LEVELS.c", 1770; {
 8740                        	
 8741                        		.dbg	line,	"include\routines_LEVELS.c", 1771; player_state = STATE_IDLE;
 8742                        		__st.umiq	0, _player_state
         01:CB94  9C 18 23   			stz	_player_state
 8743                        	
 8744                        		.dbg	line,	"include\routines_LEVELS.c", 1772; }
 8745                        	
 8746                        		.dbg	line,	"include\routines_LEVELS.c", 1774; return;
 8747    01:CB97             	.LL330	.alias		.LL230
 8748                        		__bra		.LL230
         01:CB97  4C 70 DB   			bra	.LL230
 8749                        	
 8750                        		.dbg	line,	"include\routines_LEVELS.c", 1775; }
 8751                        	
 8752                        		.dbg	line,	"include\routines_LEVELS.c", 1776; }
 8753    01:CB9A             	.LL323:
 8754    01:CB9A             	.LL322:
 8755                        	
 8756                        		.dbg	line,	"include\routines_LEVELS.c", 1777; }
 8757                        	
 8758                        		.dbg	line,	"include\routines_LEVELS.c", 1781; // CHECK COLLISION WITH LADDERS //
 8759                        	
 8760                        		.dbg	line,	"include\routines_LEVELS.c", 1782; check_BG( 16 , 16 );
 8761    01:CB9A             	.LL313:
 8762                        		__ld.wi		16
         01:CB9A  A9 10      			lda.l	#16
         01:CB9C  C2         			cly
 8763                        		__pusharg.wr
         01:CB9D  A6 8D      			ldx	<__sp
         01:CB9F  CA         			dex
         01:CBA0  CA         			dex
         01:CBA1  95 08      			sta.l	<__stack, x
         01:CBA3  94 09      			sty.h	<__stack, x
         01:CBA5  86 8D      			stx	<__sp
 8764                        		__ld.wi		16
         01:CBA7  A9 10      			lda.l	#16
         01:CBA9  C2         			cly
 8765                        		__pusharg.wr
         01:CBAA  A6 8D      			ldx	<__sp
         01:CBAC  CA         			dex
         01:CBAD  CA         			dex
         01:CBAE  95 08      			sta.l	<__stack, x
         01:CBB0  94 09      			sty.h	<__stack, x
         01:CBB2  86 8D      			stx	<__sp
 8766                        		__call		_check_BG
         01:CBB4  20 6D FF   			call	_check_BG
 8767                        	
 8768                        		.dbg	line,	"include\routines_LEVELS.c", 1784; // IF PLAYER HITS THE LADDER //
 8769                        	
 8770                        		.dbg	line,	"include\routines_LEVELS.c", 1785; if(map_blk_flag == TILE_LADDER)
 8771                        		__ld.umq	_map_blk_flag
         01:CBB7  AD B8 2B   			lda	_map_blk_flag
 8772                        		__equ_b.uiq	2
         01:CBBA  C9 02      			cmp	#2
         01:CBBC  F0 01      			beq	!+
         01:CBBE  18         			clc
         01:CBBF             	!:
 8773                        		__bfalse	.LL331
         01:CBBF  B0 03 4C 70			bcc	.LL331
         01:CBC3  DB          
 8774                        	
 8775                        		.dbg	line,	"include\routines_LEVELS.c", 1786; {
 8776                        	
 8777                        		.dbg	line,	"include\routines_LEVELS.c", 1787; // CAMERA GOES 8 PX BACKWARD //
 8778                        	
 8779                        		.dbg	line,	"include\routines_LEVELS.c", 1788; sgx_map_pxl_x = ( (sgx_map_pxl_x >> 3) << 3 );
 8780                        		__ld.wm		_sgx_map_pxl_x
         01:CBC4  AD 97 26   			lda.l	_sgx_map_pxl_x
         01:CBC7  AC 98 26   			ldy.h	_sgx_map_pxl_x
 8781                        		__lsr.wi	3
         01:CBCA  84 00      			sty	__temp
         01:CBCC  20 3A E2   			jsr	lsrw3
 8782                        		__asl.wi	3
         01:CBCF  84 00      			sty	__temp
         01:CBD1  20 D7 E1   			jsr	aslw3
 8783                        		__st.wmq	_sgx_map_pxl_x
         01:CBD4  8D 97 26   			sta.l	_sgx_map_pxl_x
         01:CBD7  8C 98 26   			sty.h	_sgx_map_pxl_x
 8784                        	
 8785                        		.dbg	line,	"include\routines_LEVELS.c", 1790; // SO WE UPDATE THE MAP //
 8786                        	
 8787                        		.dbg	line,	"include\routines_LEVELS.c", 1791; sgx_scroll_map();
 8788                        		__call		_sgx_scroll_map
         01:CBDA  20 81 FF   			call	_sgx_scroll_map
 8789                        	
 8790                        		.dbg	line,	"include\routines_LEVELS.c", 1793; // CHECK IF THE PLAYER STANDS RIGHT TO THE LADDER //
 8791                        	
 8792                        		.dbg	line,	"include\routines_LEVELS.c", 1794; check_BG( 31 , 16 );
 8793                        		__ld.wi		31
         01:CBDD  A9 1F      			lda.l	#31
         01:CBDF  C2         			cly
 8794                        		__pusharg.wr
         01:CBE0  A6 8D      			ldx	<__sp
         01:CBE2  CA         			dex
         01:CBE3  CA         			dex
         01:CBE4  95 08      			sta.l	<__stack, x
         01:CBE6  94 09      			sty.h	<__stack, x
         01:CBE8  86 8D      			stx	<__sp
 8795                        		__ld.wi		16
         01:CBEA  A9 10      			lda.l	#16
         01:CBEC  C2         			cly
 8796                        		__pusharg.wr
         01:CBED  A6 8D      			ldx	<__sp
         01:CBEF  CA         			dex
         01:CBF0  CA         			dex
         01:CBF1  95 08      			sta.l	<__stack, x
         01:CBF3  94 09      			sty.h	<__stack, x
         01:CBF5  86 8D      			stx	<__sp
 8797                        		__call		_check_BG
         01:CBF7  20 6D FF   			call	_check_BG
 8798                        	
 8799                        		.dbg	line,	"include\routines_LEVELS.c", 1796; if(map_blk_flag == TILE_LADDER)
 8800                        		__ld.umq	_map_blk_flag
         01:CBFA  AD B8 2B   			lda	_map_blk_flag
 8801                        		__equ_b.uiq	2
         01:CBFD  C9 02      			cmp	#2
         01:CBFF  F0 01      			beq	!+
         01:CC01  18         			clc
         01:CC02             	!:
 8802                        		__bfalse	.LL332
         01:CC02  90 0E      			bcc	.LL332
 8803                        	
 8804                        		.dbg	line,	"include\routines_LEVELS.c", 1797; {
 8805                        	
 8806                        		.dbg	line,	"include\routines_LEVELS.c", 1798; sgx_map_pxl_x += 8;
 8807                        		__add_st.wmiq	8, _sgx_map_pxl_x
         01:CC04  18         			clc
         01:CC05  AD 97 26   			lda.l	_sgx_map_pxl_x
         01:CC08  69 08      			adc.l	#8
         01:CC0A  8D 97 26   			sta.l	_sgx_map_pxl_x
         01:CC0D  90 03      			bcc	!+
         01:CC0F  EE 98 26   			inc.h	_sgx_map_pxl_x
         01:CC12             	!:
 8808                        	
 8809                        		.dbg	line,	"include\routines_LEVELS.c", 1799; }
 8810                        	
 8811                        		.dbg	line,	"include\routines_LEVELS.c", 1801; spr_pattern(PLAYER_HANG_VRAM_ADR);
 8812    01:CC12             	.LL332:
 8813                        		__ld.wi		7424
         01:CC12  62         			cla
         01:CC13  A0 1D      			ldy.h	#7424
 8814                        		__call		_spr_pattern.1
         01:CC15  20 26 E8   			call	_spr_pattern.1
 8815                        	
 8816                        		.dbg	line,	"include\routines_LEVELS.c", 1802; player_counter_anim = 0;
 8817                        		__st.umiq	0, _player_counter_anim
         01:CC18  9C 1B 23   			stz	_player_counter_anim
 8818                        	
 8819                        		.dbg	line,	"include\routines_LEVELS.c", 1803; player_index_jump = 0;
 8820                        		__st.umiq	0, _player_index_jump
         01:CC1B  9C 1C 23   			stz	_player_index_jump
 8821                        	
 8822                        		.dbg	line,	"include\routines_LEVELS.c", 1804; jump_ladder = TRUE;
 8823                        		__st.umiq	1, _jump_ladder
         01:CC1E  A9 01      			lda.l	#1
         01:CC20  8D 21 23   			sta	_jump_ladder
 8824                        	
 8825                        		.dbg	line,	"include\routines_LEVELS.c", 1805; player_state = STATE_HANG;
 8826                        		__st.umiq	10, _player_state
         01:CC23  A9 0A      			lda.l	#10
         01:CC25  8D 18 23   			sta	_player_state
 8827                        	
 8828                        		.dbg	line,	"include\routines_LEVELS.c", 1806; }
 8829                        	
 8830                        		.dbg	line,	"include\routines_LEVELS.c", 1807; }
 8831    01:CC28             	.LL331	.alias		.LL333
 8832                        	
 8833                        		.dbg	line,	"include\routines_LEVELS.c", 1810; else if(player_state == STATE_JUMP_RIGHT)
 8834                        		__bra		.LL333
         01:CC28  4C 70 DB   			bra	.LL333
 8835    01:CC2B             	.LL279:
 8836                        		__ld.umq	_player_state
         01:CC2B  AD 18 23   			lda	_player_state
 8837                        		__equ_b.uiq	5
         01:CC2E  C9 05      			cmp	#5
         01:CC30  F0 01      			beq	!+
         01:CC32  18         			clc
         01:CC33             	!:
 8838                        		__bfalse	.LL334
         01:CC33  B0 03 4C 94			bcc	.LL334
         01:CC37  D0          
 8839                        	
 8840                        		.dbg	line,	"include\routines_LEVELS.c", 1811; {
 8841                        	
 8842                        		.dbg	line,	"include\routines_LEVELS.c", 1812; unsigned char i, camera_y_move;
 8843                        	
 8844                        		.dbg	line,	"include\routines_LEVELS.c", 1813; i = 1;
 8845                        		__st.umiq	1, __update_PLAYER_end - 2  /* i */
         01:CC38  A9 01      			lda.l	#1
         01:CC3A  8D 0B 23   			sta	__update_PLAYER_end - 2
 8846                        	
 8847                        		.dbg	line,	"include\routines_LEVELS.c", 1815; // UPDATE PLAYER TILES //
 8848                        	
 8849                        		.dbg	line,	"include\routines_LEVELS.c", 1816; if(player_counter_anim == 0)
 8850                        		__not.um	_player_counter_anim
         01:CC3D  AD 1B 23   			lda	_player_counter_anim
         01:CC40  18         			clc
         01:CC41  D0 01      			bne	!+
         01:CC43  38         			sec
         01:CC44             	!:
 8851                        		__bfalse	.LL335
         01:CC44  90 11      			bcc	.LL335
 8852                        	
 8853                        		.dbg	line,	"include\routines_LEVELS.c", 1817; {
 8854                        	
 8855                        		.dbg	line,	"include\routines_LEVELS.c", 1818; spr_set(player_id);
 8856                        		__ld.umq	_player_id
         01:CC46  AD 17 23   			lda	_player_id
 8857                        		__call		_spr_set.1
         01:CC49  20 DD E7   			call	_spr_set.1
 8858                        	
 8859                        		.dbg	line,	"include\routines_LEVELS.c", 1819; spr_pattern(PLAYER_JUMP_VRAM_ADR);
 8860                        		__ld.wi		6912
         01:CC4C  62         			cla
         01:CC4D  A0 1B      			ldy.h	#6912
 8861                        		__call		_spr_pattern.1
         01:CC4F  20 26 E8   			call	_spr_pattern.1
 8862                        	
 8863                        		.dbg	line,	"include\routines_LEVELS.c", 1821; player_counter_anim = 1;
 8864                        		__st.umiq	1, _player_counter_anim
         01:CC52  A9 01      			lda.l	#1
         01:CC54  8D 1B 23   			sta	_player_counter_anim
 8865                        	
 8866                        		.dbg	line,	"include\routines_LEVELS.c", 1822; }
 8867                        	
 8868                        		.dbg	line,	"include\routines_LEVELS.c", 1825; // SELECT PLAYER SPRITE //
 8869                        	
 8870                        		.dbg	line,	"include\routines_LEVELS.c", 1826; spr_set(player_id);
 8871    01:CC57             	.LL335:
 8872                        		__ld.umq	_player_id
         01:CC57  AD 17 23   			lda	_player_id
 8873                        		__call		_spr_set.1
         01:CC5A  20 DD E7   			call	_spr_set.1
 8874                        	
 8875                        		.dbg	line,	"include\routines_LEVELS.c", 1829; //**************************************************************************************//
 8876                        	
 8877                        		.dbg	line,	"include\routines_LEVELS.c", 1830; //                                        H MOVE                                        //
 8878                        	
 8879                        		.dbg	line,	"include\routines_LEVELS.c", 1831; //**************************************************************************************//
 8880                        	
 8881                        		.dbg	line,	"include\routines_LEVELS.c", 1833; //--------------------------------------------------------------------------------------//
 8882                        	
 8883                        		.dbg	line,	"include\routines_LEVELS.c", 1834; //                                    WALL COLLISION                                    //
 8884                        	
 8885                        		.dbg	line,	"include\routines_LEVELS.c", 1835; //--------------------------------------------------------------------------------------//
 8886                        	
 8887                        		.dbg	line,	"include\routines_LEVELS.c", 1837; // CHECK COLLISION WITH BOTTOM RIGHT WALL //
 8888                        	
 8889                        		.dbg	line,	"include\routines_LEVELS.c", 1838; check_BG( 24 , 31 );
 8890                        		__ld.wi		24
         01:CC5D  A9 18      			lda.l	#24
         01:CC5F  C2         			cly
 8891                        		__pusharg.wr
         01:CC60  A6 8D      			ldx	<__sp
         01:CC62  CA         			dex
         01:CC63  CA         			dex
         01:CC64  95 08      			sta.l	<__stack, x
         01:CC66  94 09      			sty.h	<__stack, x
         01:CC68  86 8D      			stx	<__sp
 8892                        		__ld.wi		31
         01:CC6A  A9 1F      			lda.l	#31
         01:CC6C  C2         			cly
 8893                        		__pusharg.wr
         01:CC6D  A6 8D      			ldx	<__sp
         01:CC6F  CA         			dex
         01:CC70  CA         			dex
         01:CC71  95 08      			sta.l	<__stack, x
         01:CC73  94 09      			sty.h	<__stack, x
         01:CC75  86 8D      			stx	<__sp
 8894                        		__call		_check_BG
         01:CC77  20 6D FF   			call	_check_BG
 8895                        	
 8896                        		.dbg	line,	"include\routines_LEVELS.c", 1840; if(map_blk_flag != TILE_BG)
 8897                        		__ld.umq	_map_blk_flag
         01:CC7A  AD B8 2B   			lda	_map_blk_flag
 8898                        		__neq_b.uiq	1
         01:CC7D  38         			sec
         01:CC7E  49 01      			eor	#1
         01:CC80  D0 01      			bne	!+
         01:CC82  18         			clc
         01:CC83             	!:
 8899                        		__bfalse	.LL336
         01:CC83  90 78      			bcc	.LL336
 8900                        	
 8901                        		.dbg	line,	"include\routines_LEVELS.c", 1841; {
 8902                        	
 8903                        		.dbg	line,	"include\routines_LEVELS.c", 1842; // CHECK COLLISION WITH TOP RIGHT WALL //
 8904                        	
 8905                        		.dbg	line,	"include\routines_LEVELS.c", 1843; check_BG( 24 , 15 );
 8906                        		__ld.wi		24
         01:CC85  A9 18      			lda.l	#24
         01:CC87  C2         			cly
 8907                        		__pusharg.wr
         01:CC88  A6 8D      			ldx	<__sp
         01:CC8A  CA         			dex
         01:CC8B  CA         			dex
         01:CC8C  95 08      			sta.l	<__stack, x
         01:CC8E  94 09      			sty.h	<__stack, x
         01:CC90  86 8D      			stx	<__sp
 8908                        		__ld.wi		15
         01:CC92  A9 0F      			lda.l	#15
         01:CC94  C2         			cly
 8909                        		__pusharg.wr
         01:CC95  A6 8D      			ldx	<__sp
         01:CC97  CA         			dex
         01:CC98  CA         			dex
         01:CC99  95 08      			sta.l	<__stack, x
         01:CC9B  94 09      			sty.h	<__stack, x
         01:CC9D  86 8D      			stx	<__sp
 8910                        		__call		_check_BG
         01:CC9F  20 6D FF   			call	_check_BG
 8911                        	
 8912                        		.dbg	line,	"include\routines_LEVELS.c", 1845; if(map_blk_flag == TILE_BG)
 8913                        		__ld.umq	_map_blk_flag
         01:CCA2  AD B8 2B   			lda	_map_blk_flag
 8914                        		__equ_b.uiq	1
         01:CCA5  C9 01      			cmp	#1
         01:CCA7  F0 01      			beq	!+
         01:CCA9  18         			clc
         01:CCAA             	!:
 8915                        		__bfalse	.LL337
         01:CCAA  90 41      			bcc	.LL337
 8916                        	
 8917                        		.dbg	line,	"include\routines_LEVELS.c", 1846; {
 8918                        	
 8919                        		.dbg	line,	"include\routines_LEVELS.c", 1847; check_TILE_DEPTH( 15 , -16 );
 8920                        		__ld.wi		15
         01:CCAC  A9 0F      			lda.l	#15
         01:CCAE  C2         			cly
 8921                        		__pusharg.wr
         01:CCAF  A6 8D      			ldx	<__sp
         01:CCB1  CA         			dex
         01:CCB2  CA         			dex
         01:CCB3  95 08      			sta.l	<__stack, x
         01:CCB5  94 09      			sty.h	<__stack, x
         01:CCB7  86 8D      			stx	<__sp
 8922                        		__ld.wi		-16
         01:CCB9  A9 F0      			lda.l	#-16
         01:CCBB  A0 FF      			ldy.h	#-16
 8923                        		__pusharg.wr
         01:CCBD  A6 8D      			ldx	<__sp
         01:CCBF  CA         			dex
         01:CCC0  CA         			dex
         01:CCC1  95 08      			sta.l	<__stack, x
         01:CCC3  94 09      			sty.h	<__stack, x
         01:CCC5  86 8D      			stx	<__sp
 8924                        		__call		_check_TILE_DEPTH
         01:CCC7  20 59 FF   			call	_check_TILE_DEPTH
 8925                        	
 8926                        		.dbg	line,	"include\routines_LEVELS.c", 1849; if(map_blk_flag == TILE_EMPTY && jump_ladder == TRUE)
 8927                        		__not.um	_map_blk_flag
         01:CCCA  AD B8 2B   			lda	_map_blk_flag
         01:CCCD  18         			clc
         01:CCCE  D0 01      			bne	!+
         01:CCD0  38         			sec
         01:CCD1             	!:
 8928                        		__bfalse	.LL339
         01:CCD1  90 08      			bcc	.LL339
 8929                        		__ld.umq	_jump_ladder
         01:CCD3  AD 21 23   			lda	_jump_ladder
 8930                        		__equ_b.uiq	1
         01:CCD6  C9 01      			cmp	#1
         01:CCD8  F0 01      			beq	!+
         01:CCDA  18         			clc
         01:CCDB             	!:
 8931    01:CCDB             	.LL339:
 8932                        		__bfalse	.LL338
         01:CCDB  90 64      			bcc	.LL338
 8933                        	
 8934                        		.dbg	line,	"include\routines_LEVELS.c", 1850; {
 8935                        	
 8936                        		.dbg	line,	"include\routines_LEVELS.c", 1851; jump_ladder = FALSE;
 8937                        		__st.umiq	0, _jump_ladder
         01:CCDD  9C 21 23   			stz	_jump_ladder
 8938                        	
 8939                        		.dbg	line,	"include\routines_LEVELS.c", 1852; player_index_fall = 0;
 8940                        		__st.umiq	0, _player_index_fall
         01:CCE0  9C 1D 23   			stz	_player_index_fall
 8941                        	
 8942                        		.dbg	line,	"include\routines_LEVELS.c", 1853; player_state = STATE_FALL;
 8943                        		__st.umiq	9, _player_state
         01:CCE3  A9 09      			lda.l	#9
         01:CCE5  8D 18 23   			sta	_player_state
 8944                        	
 8945                        		.dbg	line,	"include\routines_LEVELS.c", 1854; return;
 8946                        		__bra		.LL230
         01:CCE8  4C 70 DB   			bra	.LL230
 8947                        	
 8948                        		.dbg	line,	"include\routines_LEVELS.c", 1855; }
 8949                        	
 8950                        		.dbg	line,	"include\routines_LEVELS.c", 1856; }
 8951    01:CCEB             	.LL338	.alias		.LL340
 8952                        	
 8953                        		.dbg	line,	"include\routines_LEVELS.c", 1858; else
 8954                        		__bra		.LL340
         01:CCEB  80 54      			bra	.LL340
 8955    01:CCED             	.LL337:
 8956                        	
 8957                        		.dbg	line,	"include\routines_LEVELS.c", 1859; {
 8958                        	
 8959                        		.dbg	line,	"include\routines_LEVELS.c", 1860; sgx_map_pxl_x += 2;
 8960                        		__add_st.wmiq	2, _sgx_map_pxl_x
         01:CCED  18         			clc
         01:CCEE  AD 97 26   			lda.l	_sgx_map_pxl_x
         01:CCF1  69 02      			adc.l	#2
         01:CCF3  8D 97 26   			sta.l	_sgx_map_pxl_x
         01:CCF6  90 03      			bcc	!+
         01:CCF8  EE 98 26   			inc.h	_sgx_map_pxl_x
         01:CCFB             	!:
 8961                        	
 8962                        		.dbg	line,	"include\routines_LEVELS.c", 1861; }
 8963    01:CCFB             	.LL340	.alias		.LL341
 8964                        	
 8965                        		.dbg	line,	"include\routines_LEVELS.c", 1862; }
 8966                        	
 8967                        		.dbg	line,	"include\routines_LEVELS.c", 1864; else
 8968                        		__bra		.LL341
         01:CCFB  80 44      			bra	.LL341
 8969    01:CCFD             	.LL336:
 8970                        	
 8971                        		.dbg	line,	"include\routines_LEVELS.c", 1865; {
 8972                        	
 8973                        		.dbg	line,	"include\routines_LEVELS.c", 1866; check_TILE_DEPTH( 15 , -16 );
 8974                        		__ld.wi		15
         01:CCFD  A9 0F      			lda.l	#15
         01:CCFF  C2         			cly
 8975                        		__pusharg.wr
         01:CD00  A6 8D      			ldx	<__sp
         01:CD02  CA         			dex
         01:CD03  CA         			dex
         01:CD04  95 08      			sta.l	<__stack, x
         01:CD06  94 09      			sty.h	<__stack, x
         01:CD08  86 8D      			stx	<__sp
 8976                        		__ld.wi		-16
         01:CD0A  A9 F0      			lda.l	#-16
         01:CD0C  A0 FF      			ldy.h	#-16
 8977                        		__pusharg.wr
         01:CD0E  A6 8D      			ldx	<__sp
         01:CD10  CA         			dex
         01:CD11  CA         			dex
         01:CD12  95 08      			sta.l	<__stack, x
         01:CD14  94 09      			sty.h	<__stack, x
         01:CD16  86 8D      			stx	<__sp
 8978                        		__call		_check_TILE_DEPTH
         01:CD18  20 59 FF   			call	_check_TILE_DEPTH
 8979                        	
 8980                        		.dbg	line,	"include\routines_LEVELS.c", 1868; if(map_blk_flag == TILE_EMPTY && jump_ladder == TRUE)
 8981                        		__not.um	_map_blk_flag
         01:CD1B  AD B8 2B   			lda	_map_blk_flag
         01:CD1E  18         			clc
         01:CD1F  D0 01      			bne	!+
         01:CD21  38         			sec
         01:CD22             	!:
 8982                        		__bfalse	.LL343
         01:CD22  90 08      			bcc	.LL343
 8983                        		__ld.umq	_jump_ladder
         01:CD24  AD 21 23   			lda	_jump_ladder
 8984                        		__equ_b.uiq	1
         01:CD27  C9 01      			cmp	#1
         01:CD29  F0 01      			beq	!+
         01:CD2B  18         			clc
         01:CD2C             	!:
 8985    01:CD2C             	.LL343:
 8986                        		__bfalse	.LL342
         01:CD2C  90 13      			bcc	.LL342
 8987                        	
 8988                        		.dbg	line,	"include\routines_LEVELS.c", 1869; {
 8989                        	
 8990                        		.dbg	line,	"include\routines_LEVELS.c", 1870; jump_ladder = FALSE;
 8991                        		__st.umiq	0, _jump_ladder
         01:CD2E  9C 21 23   			stz	_jump_ladder
 8992                        	
 8993                        		.dbg	line,	"include\routines_LEVELS.c", 1871; hit_wall = TRUE;
 8994                        		__st.umiq	1, _hit_wall
         01:CD31  A9 01      			lda.l	#1
         01:CD33  8D 24 23   			sta	_hit_wall
 8995                        	
 8996                        		.dbg	line,	"include\routines_LEVELS.c", 1872; player_index_fall = 0;
 8997                        		__st.umiq	0, _player_index_fall
         01:CD36  9C 1D 23   			stz	_player_index_fall
 8998                        	
 8999                        		.dbg	line,	"include\routines_LEVELS.c", 1873; player_state = STATE_FALL;
 9000                        		__st.umiq	9, _player_state
         01:CD39  A9 09      			lda.l	#9
         01:CD3B  8D 18 23   			sta	_player_state
 9001                        	
 9002                        		.dbg	line,	"include\routines_LEVELS.c", 1874; return;
 9003                        		__bra		.LL230
         01:CD3E  4C 70 DB   			bra	.LL230
 9004                        	
 9005                        		.dbg	line,	"include\routines_LEVELS.c", 1875; }
 9006                        	
 9007                        		.dbg	line,	"include\routines_LEVELS.c", 1876; }
 9008    01:CD41             	.LL342:
 9009    01:CD41             	.LL341:
 9010                        	
 9011                        		.dbg	line,	"include\routines_LEVELS.c", 1881; //**************************************************************************************//
 9012                        	
 9013                        		.dbg	line,	"include\routines_LEVELS.c", 1882; //                                        V MOVE                                        //
 9014                        	
 9015                        		.dbg	line,	"include\routines_LEVELS.c", 1883; //**************************************************************************************//
 9016                        	
 9017                        		.dbg	line,	"include\routines_LEVELS.c", 1885; // UPDATE PLAYER Y POSITION //
 9018                        	
 9019                        		.dbg	line,	"include\routines_LEVELS.c", 1886; if(jump_ladder == FALSE)
 9020                        		__not.um	_jump_ladder
         01:CD41  AD 21 23   			lda	_jump_ladder
         01:CD44  18         			clc
         01:CD45  D0 01      			bne	!+
         01:CD47  38         			sec
         01:CD48             	!:
 9021                        		__bfalse	.LL344
         01:CD48  90 1A      			bcc	.LL344
 9022                        	
 9023                        		.dbg	line,	"include\routines_LEVELS.c", 1887; {
 9024                        	
 9025                        		.dbg	line,	"include\routines_LEVELS.c", 1888; player_pos_y += TABLE_PLAYER_JUMP_V[player_index_jump];
 9026                        		__ldx.umq	_player_index_jump
         01:CD4A  AE 1C 23   			ldx	_player_index_jump
 9027                        		__ld.bax	_TABLE_PLAYER_JUMP_V
         01:CD4D  BD 1D 61   			lda	_TABLE_PLAYER_JUMP_V, x
         01:CD50  C2         			cly
         01:CD51  10 01      			bpl	!+
         01:CD53  88         			dey
         01:CD54             	!:
 9028                        		__add_st.wmq	_player_pos_y
         01:CD54  18         			clc
         01:CD55  6D DC 24   			adc.l	_player_pos_y
         01:CD58  8D DC 24   			sta.l	_player_pos_y
         01:CD5B  98         			tya
         01:CD5C  6D DD 24   			adc.h	_player_pos_y
         01:CD5F  8D DD 24   			sta.h	_player_pos_y
 9029                        	
 9030                        		.dbg	line,	"include\routines_LEVELS.c", 1889; }
 9031                        	
 9032                        		.dbg	line,	"include\routines_LEVELS.c", 1891; else
 9033                        		__bra		.LL345
         01:CD62  80 18      			bra	.LL345
 9034    01:CD64             	.LL344:
 9035                        	
 9036                        		.dbg	line,	"include\routines_LEVELS.c", 1892; {
 9037                        	
 9038                        		.dbg	line,	"include\routines_LEVELS.c", 1893; player_pos_y += TABLE_PLAYER_JUMP_LADDER[player_index_jump];
 9039                        		__ldx.umq	_player_index_jump
         01:CD64  AE 1C 23   			ldx	_player_index_jump
 9040                        		__ld.bax	_TABLE_PLAYER_JUMP_LADDER
         01:CD67  BD 55 61   			lda	_TABLE_PLAYER_JUMP_LADDER, x
         01:CD6A  C2         			cly
         01:CD6B  10 01      			bpl	!+
         01:CD6D  88         			dey
         01:CD6E             	!:
 9041                        		__add_st.wmq	_player_pos_y
         01:CD6E  18         			clc
         01:CD6F  6D DC 24   			adc.l	_player_pos_y
         01:CD72  8D DC 24   			sta.l	_player_pos_y
         01:CD75  98         			tya
         01:CD76  6D DD 24   			adc.h	_player_pos_y
         01:CD79  8D DD 24   			sta.h	_player_pos_y
 9042                        	
 9043                        		.dbg	line,	"include\routines_LEVELS.c", 1894; }
 9044    01:CD7C             	.LL345:
 9045                        	
 9046                        		.dbg	line,	"include\routines_LEVELS.c", 1898; // IF PLAYER GOES BELOW ITS BASE Y POSITION //
 9047                        	
 9048                        		.dbg	line,	"include\routines_LEVELS.c", 1899; if(player_pos_y >= PLAYER_BASE_Y_POS)
 9049                        		__ld.wm		_player_pos_y
         01:CD7C  AD DC 24   			lda.l	_player_pos_y
         01:CD7F  AC DD 24   			ldy.h	_player_pos_y
 9050                        		__sge_w.wi	128
         01:CD82  C9 80      			cmp.l	#128		; Subtract integer from Y:A.
         01:CD84  98         			tya
         01:CD85  E9 00      			sbc.h	#128
         01:CD87  50 02      			bvc	!+
         01:CD89  49 80      			eor	#$80		; +ve if Y:A >= integer (signed).
         01:CD8B  49 80      	!:		eor	#$80
         01:CD8D  0A         			asl	a
 9051                        		__bfalse	.LL346
         01:CD8E  90 4E      			bcc	.LL346
 9052                        	
 9053                        		.dbg	line,	"include\routines_LEVELS.c", 1900; {
 9054                        	
 9055                        		.dbg	line,	"include\routines_LEVELS.c", 1901; // THE CAMERA MOVES //
 9056                        	
 9057                        		.dbg	line,	"include\routines_LEVELS.c", 1902; // CALCULATE HOW MANY PIXELS THE CAMERA HAS TO MOVE DOWN //
 9058                        	
 9059                        		.dbg	line,	"include\routines_LEVELS.c", 1903; camera_y_move = player_pos_y - PLAYER_BASE_Y_POS;
 9060                        		__ld.wm		_player_pos_y
         01:CD90  AD DC 24   			lda.l	_player_pos_y
         01:CD93  AC DD 24   			ldy.h	_player_pos_y
 9061                        		__sub.wi	128
         01:CD96  38         			sec
         01:CD97  E9 80      			sbc.l	#128
         01:CD99  B0 01      			bcs	!+
         01:CD9B  88         			dey
         01:CD9C             	!:
 9062                        		__st.umq	__update_PLAYER_end - 3  /* camera_y_move */
         01:CD9C  8D 0A 23   			sta	__update_PLAYER_end - 3
 9063                        	
 9064                        		.dbg	line,	"include\routines_LEVELS.c", 1904; sgx_map_pxl_y += camera_y_move;
 9065                        		__ld.um		__update_PLAYER_end - 3  /* camera_y_move */
         01:CD9F  AD 0A 23   			lda	__update_PLAYER_end - 3
         01:CDA2  C2         			cly
 9066                        		__add_st.wmq	_sgx_map_pxl_y
         01:CDA3  18         			clc
         01:CDA4  6D 99 26   			adc.l	_sgx_map_pxl_y
         01:CDA7  8D 99 26   			sta.l	_sgx_map_pxl_y
         01:CDAA  98         			tya
         01:CDAB  6D 9A 26   			adc.h	_sgx_map_pxl_y
         01:CDAE  8D 9A 26   			sta.h	_sgx_map_pxl_y
 9067                        	
 9068                        		.dbg	line,	"include\routines_LEVELS.c", 1906; // IF THE CAMERA HAS REACHED ITS MAX (LOWEST) POSITION //
 9069                        	
 9070                        		.dbg	line,	"include\routines_LEVELS.c", 1907; if(sgx_map_pxl_y > camera_max_y_position)
 9071                        		__ld.wm		_sgx_map_pxl_y
         01:CDB1  AD 99 26   			lda.l	_sgx_map_pxl_y
         01:CDB4  AC 9A 26   			ldy.h	_sgx_map_pxl_y
 9072                        		__ugt_w.wm	_camera_max_y_position
         01:CDB7  18         			clc			; Subtract memory+1 from Y:A.
         01:CDB8  ED DE 24   			sbc.l	_camera_max_y_position
         01:CDBB  98         			tya
         01:CDBC  ED DF 24   			sbc.h	_camera_max_y_position		; CS if Y:A > memory.
 9073                        		__bfalse	.LL347
         01:CDBF  90 0C      			bcc	.LL347
 9074                        	
 9075                        		.dbg	line,	"include\routines_LEVELS.c", 1908; {
 9076                        	
 9077                        		.dbg	line,	"include\routines_LEVELS.c", 1909; // THE CAMERA CAN NOT MOVE LOWER //
 9078                        	
 9079                        		.dbg	line,	"include\routines_LEVELS.c", 1910; sgx_map_pxl_y = camera_max_y_position;
 9080                        		__ld.wm		_camera_max_y_position
         01:CDC1  AD DE 24   			lda.l	_camera_max_y_position
         01:CDC4  AC DF 24   			ldy.h	_camera_max_y_position
 9081                        		__st.wmq	_sgx_map_pxl_y
         01:CDC7  8D 99 26   			sta.l	_sgx_map_pxl_y
         01:CDCA  8C 9A 26   			sty.h	_sgx_map_pxl_y
 9082                        	
 9083                        		.dbg	line,	"include\routines_LEVELS.c", 1911; }
 9084                        	
 9085                        		.dbg	line,	"include\routines_LEVELS.c", 1913; // THE PLAYER STAYS AT ITS BASE Y POSITION //
 9086                        	
 9087                        		.dbg	line,	"include\routines_LEVELS.c", 1914; player_pos_y = PLAYER_BASE_Y_POS;
 9088    01:CDCD             	.LL347:
 9089                        		__st.wmiq	128, _player_pos_y
         01:CDCD  A9 80      			lda.l	#128
         01:CDCF  8D DC 24   			sta.l	_player_pos_y
         01:CDD2  9C DD 24   			stz.h	_player_pos_y
 9090                        	
 9091                        		.dbg	line,	"include\routines_LEVELS.c", 1916; spr_y(player_pos_y);
 9092                        		__ld.wm		_player_pos_y
         01:CDD5  AD DC 24   			lda.l	_player_pos_y
         01:CDD8  AC DD 24   			ldy.h	_player_pos_y
 9093                        		__call		_spr_y.1
         01:CDDB  20 19 E8   			call	_spr_y.1
 9094                        	
 9095                        		.dbg	line,	"include\routines_LEVELS.c", 1917; }
 9096                        	
 9097                        		.dbg	line,	"include\routines_LEVELS.c", 1920; // UPDATE JUMP INDEX IN THE ARRAY //
 9098                        	
 9099                        		.dbg	line,	"include\routines_LEVELS.c", 1921; if(player_index_jump < jump_max_index)
 9100    01:CDDE             	.LL346:
 9101                        		__ld.umq	_player_index_jump
         01:CDDE  AD 1C 23   			lda	_player_index_jump
 9102                        		__ult_b.umq	_jump_max_index
         01:CDE1  CD 22 23   			cmp	_jump_max_index		; Subtract memory from A.
         01:CDE4  6A         			ror	a		; CC if A < memory.
         01:CDE5  49 80      			eor	#$80
         01:CDE7  2A         			rol	a
 9103                        		__bfalse	.LL348
         01:CDE8  90 03      			bcc	.LL348
 9104                        	
 9105                        		.dbg	line,	"include\routines_LEVELS.c", 1922; {
 9106                        	
 9107                        		.dbg	line,	"include\routines_LEVELS.c", 1923; player_index_jump += 1;
 9108                        		__add_st.umiq	1, _player_index_jump
         01:CDEA  EE 1C 23   			inc	_player_index_jump
 9109                        	
 9110                        		.dbg	line,	"include\routines_LEVELS.c", 1924; }
 9111                        	
 9112                        		.dbg	line,	"include\routines_LEVELS.c", 1929; //--------------------------------------------------------------------------------------//
 9113                        	
 9114                        		.dbg	line,	"include\routines_LEVELS.c", 1930; //                                   FLOOR COLLISION                                    //
 9115                        	
 9116                        		.dbg	line,	"include\routines_LEVELS.c", 1931; //--------------------------------------------------------------------------------------//
 9117                        	
 9118                        		.dbg	line,	"include\routines_LEVELS.c", 1933; if(player_index_jump > 14)
 9119    01:CDED             	.LL348:
 9120                        		__ld.umq	_player_index_jump
         01:CDED  AD 1C 23   			lda	_player_index_jump
 9121                        		__ugt_b.uiq	14
         01:CDF0  18         			clc			; Subtract integer+1 from A.
         01:CDF1  E9 0E      			sbc	#14		; CS if A > integer.
 9122                        		__bfalse	.LL349
         01:CDF3  B0 03 4C D8			bcc	.LL349
         01:CDF7  CF          
 9123                        	
 9124                        		.dbg	line,	"include\routines_LEVELS.c", 1934; {
 9125                        	
 9126                        		.dbg	line,	"include\routines_LEVELS.c", 1935; // CHECK COLLISION WITH LEFT FLOOR //
 9127                        	
 9128                        		.dbg	line,	"include\routines_LEVELS.c", 1936; check_BG( 10 , 32 );
 9129                        		__ld.wi		10
         01:CDF8  A9 0A      			lda.l	#10
         01:CDFA  C2         			cly
 9130                        		__pusharg.wr
         01:CDFB  A6 8D      			ldx	<__sp
         01:CDFD  CA         			dex
         01:CDFE  CA         			dex
         01:CDFF  95 08      			sta.l	<__stack, x
         01:CE01  94 09      			sty.h	<__stack, x
         01:CE03  86 8D      			stx	<__sp
 9131                        		__ld.wi		32
         01:CE05  A9 20      			lda.l	#32
         01:CE07  C2         			cly
 9132                        		__pusharg.wr
         01:CE08  A6 8D      			ldx	<__sp
         01:CE0A  CA         			dex
         01:CE0B  CA         			dex
         01:CE0C  95 08      			sta.l	<__stack, x
         01:CE0E  94 09      			sty.h	<__stack, x
         01:CE10  86 8D      			stx	<__sp
 9133                        		__call		_check_BG
         01:CE12  20 6D FF   			call	_check_BG
 9134                        	
 9135                        		.dbg	line,	"include\routines_LEVELS.c", 1938; // IF PLAYER TOUCHES THE GROUND TO THE LEFT //
 9136                        	
 9137                        		.dbg	line,	"include\routines_LEVELS.c", 1939; if(map_blk_flag == TILE_BG)
 9138                        		__ld.umq	_map_blk_flag
         01:CE15  AD B8 2B   			lda	_map_blk_flag
 9139                        		__equ_b.uiq	1
         01:CE18  C9 01      			cmp	#1
         01:CE1A  F0 01      			beq	!+
         01:CE1C  18         			clc
         01:CE1D             	!:
 9140                        		__bfalse	.LL350
         01:CE1D  B0 03 4C E8			bcc	.LL350
         01:CE21  CE          
 9141                        	
 9142                        		.dbg	line,	"include\routines_LEVELS.c", 1940; {
 9143                        	
 9144                        		.dbg	line,	"include\routines_LEVELS.c", 1941; // CALCULATE HOW MANY PIXELS THE PLAYER MOVED INTO THE GROUND //
 9145                        	
 9146                        		.dbg	line,	"include\routines_LEVELS.c", 1942; for(i=1; i<11 ; i++)
 9147                        		__st.umiq	1, __update_PLAYER_end - 2  /* i */
         01:CE22  A9 01      			lda.l	#1
         01:CE24  8D 0B 23   			sta	__update_PLAYER_end - 2
 9148    01:CE27             	.LL351:
 9149                        		__ld.umq	__update_PLAYER_end - 2  /* i */
         01:CE27  AD 0B 23   			lda	__update_PLAYER_end - 2
 9150                        		__ult_b.uiq	11
         01:CE2A  C9 0B      			cmp	#11		; Subtract integer from A.
         01:CE2C  6A         			ror	a		; CC if A < integer.
         01:CE2D  49 80      			eor	#$80
         01:CE2F  2A         			rol	a
 9151                        		__btrue		.LL353
         01:CE30  B0 07      			bcs	.LL353
 9152                        		__bra		.LL354
         01:CE32  80 7D      			bra	.LL354
 9153    01:CE34             	.LL352:
 9154                        		__inc.umq	__update_PLAYER_end - 2  /* i */
         01:CE34  EE 0B 23   			inc	__update_PLAYER_end - 2
 9155                        		__bra		.LL351
         01:CE37  80 EE      			bra	.LL351
 9156    01:CE39             	.LL353:
 9157                        	
 9158                        		.dbg	line,	"include\routines_LEVELS.c", 1943; {
 9159                        	
 9160                        		.dbg	line,	"include\routines_LEVELS.c", 1944; check_TILE_DEPTH( 10 , i);
 9161                        		__ld.wi		10
         01:CE39  A9 0A      			lda.l	#10
         01:CE3B  C2         			cly
 9162                        		__pusharg.wr
         01:CE3C  A6 8D      			ldx	<__sp
         01:CE3E  CA         			dex
         01:CE3F  CA         			dex
         01:CE40  95 08      			sta.l	<__stack, x
         01:CE42  94 09      			sty.h	<__stack, x
         01:CE44  86 8D      			stx	<__sp
 9163                        		__ld.um		__update_PLAYER_end - 2  /* i */
         01:CE46  AD 0B 23   			lda	__update_PLAYER_end - 2
         01:CE49  C2         			cly
 9164                        		__pusharg.wr
         01:CE4A  A6 8D      			ldx	<__sp
         01:CE4C  CA         			dex
         01:CE4D  CA         			dex
         01:CE4E  95 08      			sta.l	<__stack, x
         01:CE50  94 09      			sty.h	<__stack, x
         01:CE52  86 8D      			stx	<__sp
 9165                        		__call		_check_TILE_DEPTH
         01:CE54  20 59 FF   			call	_check_TILE_DEPTH
 9166                        	
 9167                        		.dbg	line,	"include\routines_LEVELS.c", 1946; if(map_blk_flag == TILE_EMPTY)
 9168                        		__not.um	_map_blk_flag
         01:CE57  AD B8 2B   			lda	_map_blk_flag
         01:CE5A  18         			clc
         01:CE5B  D0 01      			bne	!+
         01:CE5D  38         			sec
         01:CE5E             	!:
 9169                        		__bfalse	.LL355
         01:CE5E  90 D4      			bcc	.LL355
 9170                        	
 9171                        		.dbg	line,	"include\routines_LEVELS.c", 1947; {
 9172                        	
 9173                        		.dbg	line,	"include\routines_LEVELS.c", 1948; if(player_pos_y != PLAYER_BASE_Y_POS)
 9174                        		__ld.wm		_player_pos_y
         01:CE60  AD DC 24   			lda.l	_player_pos_y
         01:CE63  AC DD 24   			ldy.h	_player_pos_y
 9175                        		__neq_w.wi	128
         01:CE66  38         			sec
         01:CE67  49 80      			eor.l	#128
         01:CE69  D0 06      			bne	!+
         01:CE6B  98         			tya
         01:CE6C  49 00      			eor.h	#128
         01:CE6E  D0 01      			bne	!+
         01:CE70  18         			clc
         01:CE71             	!:
 9176                        		__bfalse	.LL356
         01:CE71  90 1E      			bcc	.LL356
 9177                        	
 9178                        		.dbg	line,	"include\routines_LEVELS.c", 1949; {
 9179                        	
 9180                        		.dbg	line,	"include\routines_LEVELS.c", 1950; player_pos_y -= (i - 1);
 9181                        		__ld.um		__update_PLAYER_end - 2  /* i */
         01:CE73  AD 0B 23   			lda	__update_PLAYER_end - 2
         01:CE76  C2         			cly
 9182                        		__sub.wi	1
         01:CE77  38         			sec
         01:CE78  E9 01      			sbc.l	#1
         01:CE7A  B0 01      			bcs	!+
         01:CE7C  88         			dey
         01:CE7D             	!:
 9183                        		__isub_st.wmq	_player_pos_y
         01:CE7D  38         			sec
         01:CE7E  49 FF      			eor	#$FF
         01:CE80  6D DC 24   			adc.l	_player_pos_y
         01:CE83  8D DC 24   			sta.l	_player_pos_y
         01:CE86  98         			tya
         01:CE87  49 FF      			eor	#$FF
         01:CE89  6D DD 24   			adc.h	_player_pos_y
         01:CE8C  8D DD 24   			sta.h	_player_pos_y
 9184                        	
 9185                        		.dbg	line,	"include\routines_LEVELS.c", 1951; }
 9186                        	
 9187                        		.dbg	line,	"include\routines_LEVELS.c", 1953; else
 9188                        		__bra		.LL357
         01:CE8F  80 20      			bra	.LL357
 9189    01:CE91             	.LL356:
 9190                        	
 9191                        		.dbg	line,	"include\routines_LEVELS.c", 1954; {
 9192                        	
 9193                        		.dbg	line,	"include\routines_LEVELS.c", 1955; sgx_map_pxl_y -= (i - 1);
 9194                        		__ld.um		__update_PLAYER_end - 2  /* i */
         01:CE91  AD 0B 23   			lda	__update_PLAYER_end - 2
         01:CE94  C2         			cly
 9195                        		__sub.wi	1
         01:CE95  38         			sec
         01:CE96  E9 01      			sbc.l	#1
         01:CE98  B0 01      			bcs	!+
         01:CE9A  88         			dey
         01:CE9B             	!:
 9196                        		__isub_st.wmq	_sgx_map_pxl_y
         01:CE9B  38         			sec
         01:CE9C  49 FF      			eor	#$FF
         01:CE9E  6D 99 26   			adc.l	_sgx_map_pxl_y
         01:CEA1  8D 99 26   			sta.l	_sgx_map_pxl_y
         01:CEA4  98         			tya
         01:CEA5  49 FF      			eor	#$FF
         01:CEA7  6D 9A 26   			adc.h	_sgx_map_pxl_y
         01:CEAA  8D 9A 26   			sta.h	_sgx_map_pxl_y
 9197                        	
 9198                        		.dbg	line,	"include\routines_LEVELS.c", 1956; }
 9199    01:CEAD             	.LL357	.alias		.LL354
 9200                        	
 9201                        		.dbg	line,	"include\routines_LEVELS.c", 1958; break;
 9202                        		__bra		.LL354
         01:CEAD  80 02      			bra	.LL354
 9203                        	
 9204                        		.dbg	line,	"include\routines_LEVELS.c", 1959; }
 9205                        	
 9206                        		.dbg	line,	"include\routines_LEVELS.c", 1960; }
 9207    01:CEAF             	.LL355	.alias		.LL352
 9208                        		__bra		.LL352
         01:CEAF  80 83      			bra	.LL352
 9209    01:CEB1             	.LL354:
 9210                        	
 9211                        		.dbg	line,	"include\routines_LEVELS.c", 1962; // SET PLAYER SPRITE NEW POSITION //
 9212                        	
 9213                        		.dbg	line,	"include\routines_LEVELS.c", 1963; spr_y(player_pos_y);
 9214                        		__ld.wm		_player_pos_y
         01:CEB1  AD DC 24   			lda.l	_player_pos_y
         01:CEB4  AC DD 24   			ldy.h	_player_pos_y
 9215                        		__call		_spr_y.1
         01:CEB7  20 19 E8   			call	_spr_y.1
 9216                        	
 9217                        		.dbg	line,	"include\routines_LEVELS.c", 1965; spr_set(weapon_id);
 9218                        		__ld.umq	_weapon_id
         01:CEBA  AD 26 23   			lda	_weapon_id
 9219                        		__call		_spr_set.1
         01:CEBD  20 DD E7   			call	_spr_set.1
 9220                        	
 9221                        		.dbg	line,	"include\routines_LEVELS.c", 1966; spr_y(player_pos_y+8);
 9222                        		__ld.wm		_player_pos_y
         01:CEC0  AD DC 24   			lda.l	_player_pos_y
         01:CEC3  AC DD 24   			ldy.h	_player_pos_y
 9223                        		__add.wi	8
         01:CEC6  18         			clc
         01:CEC7  69 08      			adc.l	#8
         01:CEC9  90 01      			bcc	!+
         01:CECB  C8         			iny
         01:CECC             	!:
 9224                        		__call		_spr_y.1
         01:CECC  20 19 E8   			call	_spr_y.1
 9225                        	
 9226                        		.dbg	line,	"include\routines_LEVELS.c", 1968; player_counter_anim = 1;
 9227                        		__st.umiq	1, _player_counter_anim
         01:CECF  A9 01      			lda.l	#1
         01:CED1  8D 1B 23   			sta	_player_counter_anim
 9228                        	
 9229                        		.dbg	line,	"include\routines_LEVELS.c", 1969; player_index_jump = 0;
 9230                        		__st.umiq	0, _player_index_jump
         01:CED4  9C 1C 23   			stz	_player_index_jump
 9231                        	
 9232                        		.dbg	line,	"include\routines_LEVELS.c", 1970; jump_ladder = FALSE;
 9233                        		__st.umiq	0, _jump_ladder
         01:CED7  9C 21 23   			stz	_jump_ladder
 9234                        	
 9235                        		.dbg	line,	"include\routines_LEVELS.c", 1971; hit_wall = FALSE;
 9236                        		__st.umiq	0, _hit_wall
         01:CEDA  9C 24 23   			stz	_hit_wall
 9237                        	
 9238                        		.dbg	line,	"include\routines_LEVELS.c", 1972; jump_max_index = 34;
 9239                        		__st.umiq	34, _jump_max_index
         01:CEDD  A9 22      			lda.l	#34
         01:CEDF  8D 22 23   			sta	_jump_max_index
 9240                        	
 9241                        		.dbg	line,	"include\routines_LEVELS.c", 1973; player_state = STATE_IDLE;
 9242                        		__st.umiq	0, _player_state
         01:CEE2  9C 18 23   			stz	_player_state
 9243                        	
 9244                        		.dbg	line,	"include\routines_LEVELS.c", 1974; return;
 9245                        		__bra		.LL230
         01:CEE5  4C 70 DB   			bra	.LL230
 9246                        	
 9247                        		.dbg	line,	"include\routines_LEVELS.c", 1975; }
 9248                        	
 9249                        		.dbg	line,	"include\routines_LEVELS.c", 1977; // IF PLAYER TOUCHES THE GROUND TO THE RIGHT //
 9250                        	
 9251                        		.dbg	line,	"include\routines_LEVELS.c", 1978; else
 9252    01:CEE8             	.LL350:
 9253                        	
 9254                        		.dbg	line,	"include\routines_LEVELS.c", 1979; {
 9255                        	
 9256                        		.dbg	line,	"include\routines_LEVELS.c", 1980; // CHECK COLLISION WITH RIGHT FLOOR //
 9257                        	
 9258                        		.dbg	line,	"include\routines_LEVELS.c", 1981; check_BG( 22 , 32 );
 9259                        		__ld.wi		22
         01:CEE8  A9 16      			lda.l	#22
         01:CEEA  C2         			cly
 9260                        		__pusharg.wr
         01:CEEB  A6 8D      			ldx	<__sp
         01:CEED  CA         			dex
         01:CEEE  CA         			dex
         01:CEEF  95 08      			sta.l	<__stack, x
         01:CEF1  94 09      			sty.h	<__stack, x
         01:CEF3  86 8D      			stx	<__sp
 9261                        		__ld.wi		32
         01:CEF5  A9 20      			lda.l	#32
         01:CEF7  C2         			cly
 9262                        		__pusharg.wr
         01:CEF8  A6 8D      			ldx	<__sp
         01:CEFA  CA         			dex
         01:CEFB  CA         			dex
         01:CEFC  95 08      			sta.l	<__stack, x
         01:CEFE  94 09      			sty.h	<__stack, x
         01:CF00  86 8D      			stx	<__sp
 9263                        		__call		_check_BG
         01:CF02  20 6D FF   			call	_check_BG
 9264                        	
 9265                        		.dbg	line,	"include\routines_LEVELS.c", 1983; if(map_blk_flag == TILE_BG)
 9266                        		__ld.umq	_map_blk_flag
         01:CF05  AD B8 2B   			lda	_map_blk_flag
 9267                        		__equ_b.uiq	1
         01:CF08  C9 01      			cmp	#1
         01:CF0A  F0 01      			beq	!+
         01:CF0C  18         			clc
         01:CF0D             	!:
 9268                        		__bfalse	.LL359
         01:CF0D  B0 03 4C D8			bcc	.LL359
         01:CF11  CF          
 9269                        	
 9270                        		.dbg	line,	"include\routines_LEVELS.c", 1984; {
 9271                        	
 9272                        		.dbg	line,	"include\routines_LEVELS.c", 1985; // CALCULATE HOW MANY PIXELS THE PLAYER MOVED INTO THE GROUND //
 9273                        	
 9274                        		.dbg	line,	"include\routines_LEVELS.c", 1986; for(i=1; i<11 ; i++)
 9275                        		__st.umiq	1, __update_PLAYER_end - 2  /* i */
         01:CF12  A9 01      			lda.l	#1
         01:CF14  8D 0B 23   			sta	__update_PLAYER_end - 2
 9276    01:CF17             	.LL360:
 9277                        		__ld.umq	__update_PLAYER_end - 2  /* i */
         01:CF17  AD 0B 23   			lda	__update_PLAYER_end - 2
 9278                        		__ult_b.uiq	11
         01:CF1A  C9 0B      			cmp	#11		; Subtract integer from A.
         01:CF1C  6A         			ror	a		; CC if A < integer.
         01:CF1D  49 80      			eor	#$80
         01:CF1F  2A         			rol	a
 9279                        		__btrue		.LL362
         01:CF20  B0 07      			bcs	.LL362
 9280                        		__bra		.LL363
         01:CF22  80 7D      			bra	.LL363
 9281    01:CF24             	.LL361:
 9282                        		__inc.umq	__update_PLAYER_end - 2  /* i */
         01:CF24  EE 0B 23   			inc	__update_PLAYER_end - 2
 9283                        		__bra		.LL360
         01:CF27  80 EE      			bra	.LL360
 9284    01:CF29             	.LL362:
 9285                        	
 9286                        		.dbg	line,	"include\routines_LEVELS.c", 1987; {
 9287                        	
 9288                        		.dbg	line,	"include\routines_LEVELS.c", 1988; check_TILE_DEPTH( 22 , i);
 9289                        		__ld.wi		22
         01:CF29  A9 16      			lda.l	#22
         01:CF2B  C2         			cly
 9290                        		__pusharg.wr
         01:CF2C  A6 8D      			ldx	<__sp
         01:CF2E  CA         			dex
         01:CF2F  CA         			dex
         01:CF30  95 08      			sta.l	<__stack, x
         01:CF32  94 09      			sty.h	<__stack, x
         01:CF34  86 8D      			stx	<__sp
 9291                        		__ld.um		__update_PLAYER_end - 2  /* i */
         01:CF36  AD 0B 23   			lda	__update_PLAYER_end - 2
         01:CF39  C2         			cly
 9292                        		__pusharg.wr
         01:CF3A  A6 8D      			ldx	<__sp
         01:CF3C  CA         			dex
         01:CF3D  CA         			dex
         01:CF3E  95 08      			sta.l	<__stack, x
         01:CF40  94 09      			sty.h	<__stack, x
         01:CF42  86 8D      			stx	<__sp
 9293                        		__call		_check_TILE_DEPTH
         01:CF44  20 59 FF   			call	_check_TILE_DEPTH
 9294                        	
 9295                        		.dbg	line,	"include\routines_LEVELS.c", 1990; if(map_blk_flag == TILE_EMPTY)
 9296                        		__not.um	_map_blk_flag
         01:CF47  AD B8 2B   			lda	_map_blk_flag
         01:CF4A  18         			clc
         01:CF4B  D0 01      			bne	!+
         01:CF4D  38         			sec
         01:CF4E             	!:
 9297                        		__bfalse	.LL364
         01:CF4E  90 D4      			bcc	.LL364
 9298                        	
 9299                        		.dbg	line,	"include\routines_LEVELS.c", 1991; {
 9300                        	
 9301                        		.dbg	line,	"include\routines_LEVELS.c", 1992; if(player_pos_y != PLAYER_BASE_Y_POS)
 9302                        		__ld.wm		_player_pos_y
         01:CF50  AD DC 24   			lda.l	_player_pos_y
         01:CF53  AC DD 24   			ldy.h	_player_pos_y
 9303                        		__neq_w.wi	128
         01:CF56  38         			sec
         01:CF57  49 80      			eor.l	#128
         01:CF59  D0 06      			bne	!+
         01:CF5B  98         			tya
         01:CF5C  49 00      			eor.h	#128
         01:CF5E  D0 01      			bne	!+
         01:CF60  18         			clc
         01:CF61             	!:
 9304                        		__bfalse	.LL365
         01:CF61  90 1E      			bcc	.LL365
 9305                        	
 9306                        		.dbg	line,	"include\routines_LEVELS.c", 1993; {
 9307                        	
 9308                        		.dbg	line,	"include\routines_LEVELS.c", 1994; player_pos_y -= (i - 1);
 9309                        		__ld.um		__update_PLAYER_end - 2  /* i */
         01:CF63  AD 0B 23   			lda	__update_PLAYER_end - 2
         01:CF66  C2         			cly
 9310                        		__sub.wi	1
         01:CF67  38         			sec
         01:CF68  E9 01      			sbc.l	#1
         01:CF6A  B0 01      			bcs	!+
         01:CF6C  88         			dey
         01:CF6D             	!:
 9311                        		__isub_st.wmq	_player_pos_y
         01:CF6D  38         			sec
         01:CF6E  49 FF      			eor	#$FF
         01:CF70  6D DC 24   			adc.l	_player_pos_y
         01:CF73  8D DC 24   			sta.l	_player_pos_y
         01:CF76  98         			tya
         01:CF77  49 FF      			eor	#$FF
         01:CF79  6D DD 24   			adc.h	_player_pos_y
         01:CF7C  8D DD 24   			sta.h	_player_pos_y
 9312                        	
 9313                        		.dbg	line,	"include\routines_LEVELS.c", 1995; }
 9314                        	
 9315                        		.dbg	line,	"include\routines_LEVELS.c", 1997; else
 9316                        		__bra		.LL366
         01:CF7F  80 20      			bra	.LL366
 9317    01:CF81             	.LL365:
 9318                        	
 9319                        		.dbg	line,	"include\routines_LEVELS.c", 1998; {
 9320                        	
 9321                        		.dbg	line,	"include\routines_LEVELS.c", 1999; sgx_map_pxl_y -= (i - 1);
 9322                        		__ld.um		__update_PLAYER_end - 2  /* i */
         01:CF81  AD 0B 23   			lda	__update_PLAYER_end - 2
         01:CF84  C2         			cly
 9323                        		__sub.wi	1
         01:CF85  38         			sec
         01:CF86  E9 01      			sbc.l	#1
         01:CF88  B0 01      			bcs	!+
         01:CF8A  88         			dey
         01:CF8B             	!:
 9324                        		__isub_st.wmq	_sgx_map_pxl_y
         01:CF8B  38         			sec
         01:CF8C  49 FF      			eor	#$FF
         01:CF8E  6D 99 26   			adc.l	_sgx_map_pxl_y
         01:CF91  8D 99 26   			sta.l	_sgx_map_pxl_y
         01:CF94  98         			tya
         01:CF95  49 FF      			eor	#$FF
         01:CF97  6D 9A 26   			adc.h	_sgx_map_pxl_y
         01:CF9A  8D 9A 26   			sta.h	_sgx_map_pxl_y
 9325                        	
 9326                        		.dbg	line,	"include\routines_LEVELS.c", 2000; }
 9327    01:CF9D             	.LL366	.alias		.LL363
 9328                        	
 9329                        		.dbg	line,	"include\routines_LEVELS.c", 2002; break;
 9330                        		__bra		.LL363
         01:CF9D  80 02      			bra	.LL363
 9331                        	
 9332                        		.dbg	line,	"include\routines_LEVELS.c", 2003; }
 9333                        	
 9334                        		.dbg	line,	"include\routines_LEVELS.c", 2004; }
 9335    01:CF9F             	.LL364	.alias		.LL361
 9336                        		__bra		.LL361
         01:CF9F  80 83      			bra	.LL361
 9337    01:CFA1             	.LL363:
 9338                        	
 9339                        		.dbg	line,	"include\routines_LEVELS.c", 2006; // SET PLAYER SPRITE NEW POSITION //
 9340                        	
 9341                        		.dbg	line,	"include\routines_LEVELS.c", 2007; spr_y(player_pos_y);
 9342                        		__ld.wm		_player_pos_y
         01:CFA1  AD DC 24   			lda.l	_player_pos_y
         01:CFA4  AC DD 24   			ldy.h	_player_pos_y
 9343                        		__call		_spr_y.1
         01:CFA7  20 19 E8   			call	_spr_y.1
 9344                        	
 9345                        		.dbg	line,	"include\routines_LEVELS.c", 2009; spr_set(weapon_id);
 9346                        		__ld.umq	_weapon_id
         01:CFAA  AD 26 23   			lda	_weapon_id
 9347                        		__call		_spr_set.1
         01:CFAD  20 DD E7   			call	_spr_set.1
 9348                        	
 9349                        		.dbg	line,	"include\routines_LEVELS.c", 2010; spr_y(player_pos_y+8);
 9350                        		__ld.wm		_player_pos_y
         01:CFB0  AD DC 24   			lda.l	_player_pos_y
         01:CFB3  AC DD 24   			ldy.h	_player_pos_y
 9351                        		__add.wi	8
         01:CFB6  18         			clc
         01:CFB7  69 08      			adc.l	#8
         01:CFB9  90 01      			bcc	!+
         01:CFBB  C8         			iny
         01:CFBC             	!:
 9352                        		__call		_spr_y.1
         01:CFBC  20 19 E8   			call	_spr_y.1
 9353                        	
 9354                        		.dbg	line,	"include\routines_LEVELS.c", 2012; player_counter_anim = 1;
 9355                        		__st.umiq	1, _player_counter_anim
         01:CFBF  A9 01      			lda.l	#1
         01:CFC1  8D 1B 23   			sta	_player_counter_anim
 9356                        	
 9357                        		.dbg	line,	"include\routines_LEVELS.c", 2013; player_index_jump = 0;
 9358                        		__st.umiq	0, _player_index_jump
         01:CFC4  9C 1C 23   			stz	_player_index_jump
 9359                        	
 9360                        		.dbg	line,	"include\routines_LEVELS.c", 2014; jump_ladder = FALSE;
 9361                        		__st.umiq	0, _jump_ladder
         01:CFC7  9C 21 23   			stz	_jump_ladder
 9362                        	
 9363                        		.dbg	line,	"include\routines_LEVELS.c", 2015; hit_wall = FALSE;
 9364                        		__st.umiq	0, _hit_wall
         01:CFCA  9C 24 23   			stz	_hit_wall
 9365                        	
 9366                        		.dbg	line,	"include\routines_LEVELS.c", 2016; jump_max_index = 34;
 9367                        		__st.umiq	34, _jump_max_index
         01:CFCD  A9 22      			lda.l	#34
         01:CFCF  8D 22 23   			sta	_jump_max_index
 9368                        	
 9369                        		.dbg	line,	"include\routines_LEVELS.c", 2017; player_state = STATE_IDLE;
 9370                        		__st.umiq	0, _player_state
         01:CFD2  9C 18 23   			stz	_player_state
 9371                        	
 9372                        		.dbg	line,	"include\routines_LEVELS.c", 2018; return;
 9373                        		__bra		.LL230
         01:CFD5  4C 70 DB   			bra	.LL230
 9374                        	
 9375                        		.dbg	line,	"include\routines_LEVELS.c", 2019; }
 9376                        	
 9377                        		.dbg	line,	"include\routines_LEVELS.c", 2020; }
 9378    01:CFD8             	.LL359:
 9379    01:CFD8             	.LL358:
 9380                        	
 9381                        		.dbg	line,	"include\routines_LEVELS.c", 2021; }
 9382                        	
 9383                        		.dbg	line,	"include\routines_LEVELS.c", 2026; //--------------------------------------------------------------------------------------//
 9384                        	
 9385                        		.dbg	line,	"include\routines_LEVELS.c", 2027; //                                   LADDER COLLISION                                   //
 9386                        	
 9387                        		.dbg	line,	"include\routines_LEVELS.c", 2028; //--------------------------------------------------------------------------------------//
 9388                        	
 9389                        		.dbg	line,	"include\routines_LEVELS.c", 2030; if(player_index_jump > 4)
 9390    01:CFD8             	.LL349:
 9391                        		__ld.umq	_player_index_jump
         01:CFD8  AD 1C 23   			lda	_player_index_jump
 9392                        		__ugt_b.uiq	4
         01:CFDB  18         			clc			; Subtract integer+1 from A.
         01:CFDC  E9 04      			sbc	#4		; CS if A > integer.
 9393                        		__bfalse	.LL367
         01:CFDE  B0 03 4C 73			bcc	.LL367
         01:CFE2  D0          
 9394                        	
 9395                        		.dbg	line,	"include\routines_LEVELS.c", 2031; {
 9396                        	
 9397                        		.dbg	line,	"include\routines_LEVELS.c", 2032; check_BG( 16 , 16 );
 9398                        		__ld.wi		16
         01:CFE3  A9 10      			lda.l	#16
         01:CFE5  C2         			cly
 9399                        		__pusharg.wr
         01:CFE6  A6 8D      			ldx	<__sp
         01:CFE8  CA         			dex
         01:CFE9  CA         			dex
         01:CFEA  95 08      			sta.l	<__stack, x
         01:CFEC  94 09      			sty.h	<__stack, x
         01:CFEE  86 8D      			stx	<__sp
 9400                        		__ld.wi		16
         01:CFF0  A9 10      			lda.l	#16
         01:CFF2  C2         			cly
 9401                        		__pusharg.wr
         01:CFF3  A6 8D      			ldx	<__sp
         01:CFF5  CA         			dex
         01:CFF6  CA         			dex
         01:CFF7  95 08      			sta.l	<__stack, x
         01:CFF9  94 09      			sty.h	<__stack, x
         01:CFFB  86 8D      			stx	<__sp
 9402                        		__call		_check_BG
         01:CFFD  20 6D FF   			call	_check_BG
 9403                        	
 9404                        		.dbg	line,	"include\routines_LEVELS.c", 2034; // IF PLAYER HITS THE LADDER //
 9405                        	
 9406                        		.dbg	line,	"include\routines_LEVELS.c", 2035; if(map_blk_flag == TILE_LADDER)
 9407                        		__ld.umq	_map_blk_flag
         01:D000  AD B8 2B   			lda	_map_blk_flag
 9408                        		__equ_b.uiq	2
         01:D003  C9 02      			cmp	#2
         01:D005  F0 01      			beq	!+
         01:D007  18         			clc
         01:D008             	!:
 9409                        		__bfalse	.LL368
         01:D008  90 69      			bcc	.LL368
 9410                        	
 9411                        		.dbg	line,	"include\routines_LEVELS.c", 2036; {
 9412                        	
 9413                        		.dbg	line,	"include\routines_LEVELS.c", 2037; // CAMERA GOES 8 PX BACKWARD //
 9414                        	
 9415                        		.dbg	line,	"include\routines_LEVELS.c", 2038; sgx_map_pxl_x = ( (sgx_map_pxl_x >> 3) << 3 );
 9416                        		__ld.wm		_sgx_map_pxl_x
         01:D00A  AD 97 26   			lda.l	_sgx_map_pxl_x
         01:D00D  AC 98 26   			ldy.h	_sgx_map_pxl_x
 9417                        		__lsr.wi	3
         01:D010  84 00      			sty	__temp
         01:D012  20 3A E2   			jsr	lsrw3
 9418                        		__asl.wi	3
         01:D015  84 00      			sty	__temp
         01:D017  20 D7 E1   			jsr	aslw3
 9419                        		__st.wmq	_sgx_map_pxl_x
         01:D01A  8D 97 26   			sta.l	_sgx_map_pxl_x
         01:D01D  8C 98 26   			sty.h	_sgx_map_pxl_x
 9420                        	
 9421                        		.dbg	line,	"include\routines_LEVELS.c", 2040; // SO WE UPDATE THE MAP //
 9422                        	
 9423                        		.dbg	line,	"include\routines_LEVELS.c", 2041; sgx_scroll_map();
 9424                        		__call		_sgx_scroll_map
         01:D020  20 81 FF   			call	_sgx_scroll_map
 9425                        	
 9426                        		.dbg	line,	"include\routines_LEVELS.c", 2043; // CHECK IF THE PLAYER STANDS RIGHT TO THE LADDER //
 9427                        	
 9428                        		.dbg	line,	"include\routines_LEVELS.c", 2044; check_BG( 31 , 16 );
 9429                        		__ld.wi		31
         01:D023  A9 1F      			lda.l	#31
         01:D025  C2         			cly
 9430                        		__pusharg.wr
         01:D026  A6 8D      			ldx	<__sp
         01:D028  CA         			dex
         01:D029  CA         			dex
         01:D02A  95 08      			sta.l	<__stack, x
         01:D02C  94 09      			sty.h	<__stack, x
         01:D02E  86 8D      			stx	<__sp
 9431                        		__ld.wi		16
         01:D030  A9 10      			lda.l	#16
         01:D032  C2         			cly
 9432                        		__pusharg.wr
         01:D033  A6 8D      			ldx	<__sp
         01:D035  CA         			dex
         01:D036  CA         			dex
         01:D037  95 08      			sta.l	<__stack, x
         01:D039  94 09      			sty.h	<__stack, x
         01:D03B  86 8D      			stx	<__sp
 9433                        		__call		_check_BG
         01:D03D  20 6D FF   			call	_check_BG
 9434                        	
 9435                        		.dbg	line,	"include\routines_LEVELS.c", 2046; if(map_blk_flag == TILE_LADDER)
 9436                        		__ld.umq	_map_blk_flag
         01:D040  AD B8 2B   			lda	_map_blk_flag
 9437                        		__equ_b.uiq	2
         01:D043  C9 02      			cmp	#2
         01:D045  F0 01      			beq	!+
         01:D047  18         			clc
         01:D048             	!:
 9438                        		__bfalse	.LL369
         01:D048  90 0E      			bcc	.LL369
 9439                        	
 9440                        		.dbg	line,	"include\routines_LEVELS.c", 2047; {
 9441                        	
 9442                        		.dbg	line,	"include\routines_LEVELS.c", 2048; sgx_map_pxl_x += 8;
 9443                        		__add_st.wmiq	8, _sgx_map_pxl_x
         01:D04A  18         			clc
         01:D04B  AD 97 26   			lda.l	_sgx_map_pxl_x
         01:D04E  69 08      			adc.l	#8
         01:D050  8D 97 26   			sta.l	_sgx_map_pxl_x
         01:D053  90 03      			bcc	!+
         01:D055  EE 98 26   			inc.h	_sgx_map_pxl_x
         01:D058             	!:
 9444                        	
 9445                        		.dbg	line,	"include\routines_LEVELS.c", 2049; }
 9446                        	
 9447                        		.dbg	line,	"include\routines_LEVELS.c", 2051; spr_pattern(PLAYER_HANG_VRAM_ADR);
 9448    01:D058             	.LL369:
 9449                        		__ld.wi		7424
         01:D058  62         			cla
         01:D059  A0 1D      			ldy.h	#7424
 9450                        		__call		_spr_pattern.1
         01:D05B  20 26 E8   			call	_spr_pattern.1
 9451                        	
 9452                        		.dbg	line,	"include\routines_LEVELS.c", 2052; player_counter_anim = 0;
 9453                        		__st.umiq	0, _player_counter_anim
         01:D05E  9C 1B 23   			stz	_player_counter_anim
 9454                        	
 9455                        		.dbg	line,	"include\routines_LEVELS.c", 2053; player_index_jump = 0;
 9456                        		__st.umiq	0, _player_index_jump
         01:D061  9C 1C 23   			stz	_player_index_jump
 9457                        	
 9458                        		.dbg	line,	"include\routines_LEVELS.c", 2054; jump_ladder = TRUE;
 9459                        		__st.umiq	1, _jump_ladder
         01:D064  A9 01      			lda.l	#1
         01:D066  8D 21 23   			sta	_jump_ladder
 9460                        	
 9461                        		.dbg	line,	"include\routines_LEVELS.c", 2055; jump_max_index = 29;
 9462                        		__st.umiq	29, _jump_max_index
         01:D069  A9 1D      			lda.l	#29
         01:D06B  8D 22 23   			sta	_jump_max_index
 9463                        	
 9464                        		.dbg	line,	"include\routines_LEVELS.c", 2056; player_state = STATE_HANG;
 9465                        		__st.umiq	10, _player_state
         01:D06E  A9 0A      			lda.l	#10
         01:D070  8D 18 23   			sta	_player_state
 9466                        	
 9467                        		.dbg	line,	"include\routines_LEVELS.c", 2057; }
 9468                        	
 9469                        		.dbg	line,	"include\routines_LEVELS.c", 2058; }
 9470    01:D073             	.LL368:
 9471                        	
 9472                        		.dbg	line,	"include\routines_LEVELS.c", 2061; // SET PLAYER SPRITE NEW POSITION //
 9473                        	
 9474                        		.dbg	line,	"include\routines_LEVELS.c", 2062; spr_y(player_pos_y);
 9475    01:D073             	.LL367:
 9476                        		__ld.wm		_player_pos_y
         01:D073  AD DC 24   			lda.l	_player_pos_y
         01:D076  AC DD 24   			ldy.h	_player_pos_y
 9477                        		__call		_spr_y.1
         01:D079  20 19 E8   			call	_spr_y.1
 9478                        	
 9479                        		.dbg	line,	"include\routines_LEVELS.c", 2063; spr_set(weapon_id);
 9480                        		__ld.umq	_weapon_id
         01:D07C  AD 26 23   			lda	_weapon_id
 9481                        		__call		_spr_set.1
         01:D07F  20 DD E7   			call	_spr_set.1
 9482                        	
 9483                        		.dbg	line,	"include\routines_LEVELS.c", 2064; spr_y(player_pos_y+8);
 9484                        		__ld.wm		_player_pos_y
         01:D082  AD DC 24   			lda.l	_player_pos_y
         01:D085  AC DD 24   			ldy.h	_player_pos_y
 9485                        		__add.wi	8
         01:D088  18         			clc
         01:D089  69 08      			adc.l	#8
         01:D08B  90 01      			bcc	!+
         01:D08D  C8         			iny
         01:D08E             	!:
 9486                        		__call		_spr_y.1
         01:D08E  20 19 E8   			call	_spr_y.1
 9487                        	
 9488                        		.dbg	line,	"include\routines_LEVELS.c", 2065; }
 9489                        	
 9490                        		.dbg	line,	"include\routines_LEVELS.c", 2068; else if(player_state == STATE_JUMP_LEFT)
 9491                        		__bra		.LL370
         01:D091  4C 70 DB   			bra	.LL370
 9492    01:D094             	.LL334:
 9493                        		__ld.umq	_player_state
         01:D094  AD 18 23   			lda	_player_state
 9494                        		__equ_b.uiq	6
         01:D097  C9 06      			cmp	#6
         01:D099  F0 01      			beq	!+
         01:D09B  18         			clc
         01:D09C             	!:
 9495                        		__bfalse	.LL371
         01:D09C  B0 03 4C FD			bcc	.LL371
         01:D0A0  D4          
 9496                        	
 9497                        		.dbg	line,	"include\routines_LEVELS.c", 2069; {
 9498                        	
 9499                        		.dbg	line,	"include\routines_LEVELS.c", 2070; unsigned char i, camera_y_move;
 9500                        	
 9501                        		.dbg	line,	"include\routines_LEVELS.c", 2071; i = 1;
 9502                        		__st.umiq	1, __update_PLAYER_end - 4  /* i */
         01:D0A1  A9 01      			lda.l	#1
         01:D0A3  8D 09 23   			sta	__update_PLAYER_end - 4
 9503                        	
 9504                        		.dbg	line,	"include\routines_LEVELS.c", 2074; // UPDATE PLAYER TILES //
 9505                        	
 9506                        		.dbg	line,	"include\routines_LEVELS.c", 2075; if(player_counter_anim == 0)
 9507                        		__not.um	_player_counter_anim
         01:D0A6  AD 1B 23   			lda	_player_counter_anim
         01:D0A9  18         			clc
         01:D0AA  D0 01      			bne	!+
         01:D0AC  38         			sec
         01:D0AD             	!:
 9508                        		__bfalse	.LL372
         01:D0AD  90 11      			bcc	.LL372
 9509                        	
 9510                        		.dbg	line,	"include\routines_LEVELS.c", 2076; {
 9511                        	
 9512                        		.dbg	line,	"include\routines_LEVELS.c", 2077; spr_set(player_id);
 9513                        		__ld.umq	_player_id
         01:D0AF  AD 17 23   			lda	_player_id
 9514                        		__call		_spr_set.1
         01:D0B2  20 DD E7   			call	_spr_set.1
 9515                        	
 9516                        		.dbg	line,	"include\routines_LEVELS.c", 2078; spr_pattern(PLAYER_JUMP_VRAM_ADR);
 9517                        		__ld.wi		6912
         01:D0B5  62         			cla
         01:D0B6  A0 1B      			ldy.h	#6912
 9518                        		__call		_spr_pattern.1
         01:D0B8  20 26 E8   			call	_spr_pattern.1
 9519                        	
 9520                        		.dbg	line,	"include\routines_LEVELS.c", 2080; player_counter_anim = 1;
 9521                        		__st.umiq	1, _player_counter_anim
         01:D0BB  A9 01      			lda.l	#1
         01:D0BD  8D 1B 23   			sta	_player_counter_anim
 9522                        	
 9523                        		.dbg	line,	"include\routines_LEVELS.c", 2081; }
 9524                        	
 9525                        		.dbg	line,	"include\routines_LEVELS.c", 2084; // SELECT PLAYER SPRITE //
 9526                        	
 9527                        		.dbg	line,	"include\routines_LEVELS.c", 2085; spr_set(player_id);
 9528    01:D0C0             	.LL372:
 9529                        		__ld.umq	_player_id
         01:D0C0  AD 17 23   			lda	_player_id
 9530                        		__call		_spr_set.1
         01:D0C3  20 DD E7   			call	_spr_set.1
 9531                        	
 9532                        		.dbg	line,	"include\routines_LEVELS.c", 2088; //**************************************************************************************//
 9533                        	
 9534                        		.dbg	line,	"include\routines_LEVELS.c", 2089; //                                        H MOVE                                        //
 9535                        	
 9536                        		.dbg	line,	"include\routines_LEVELS.c", 2090; //**************************************************************************************//
 9537                        	
 9538                        		.dbg	line,	"include\routines_LEVELS.c", 2092; //--------------------------------------------------------------------------------------//
 9539                        	
 9540                        		.dbg	line,	"include\routines_LEVELS.c", 2093; //                                    WALL COLLISION                                    //
 9541                        	
 9542                        		.dbg	line,	"include\routines_LEVELS.c", 2094; //--------------------------------------------------------------------------------------//
 9543                        	
 9544                        		.dbg	line,	"include\routines_LEVELS.c", 2096; // CHECK COLLISION WITH BOTTOM LEFT WALL //
 9545                        	
 9546                        		.dbg	line,	"include\routines_LEVELS.c", 2097; check_BG( 8 , 31 );
 9547                        		__ld.wi		8
         01:D0C6  A9 08      			lda.l	#8
         01:D0C8  C2         			cly
 9548                        		__pusharg.wr
         01:D0C9  A6 8D      			ldx	<__sp
         01:D0CB  CA         			dex
         01:D0CC  CA         			dex
         01:D0CD  95 08      			sta.l	<__stack, x
         01:D0CF  94 09      			sty.h	<__stack, x
         01:D0D1  86 8D      			stx	<__sp
 9549                        		__ld.wi		31
         01:D0D3  A9 1F      			lda.l	#31
         01:D0D5  C2         			cly
 9550                        		__pusharg.wr
         01:D0D6  A6 8D      			ldx	<__sp
         01:D0D8  CA         			dex
         01:D0D9  CA         			dex
         01:D0DA  95 08      			sta.l	<__stack, x
         01:D0DC  94 09      			sty.h	<__stack, x
         01:D0DE  86 8D      			stx	<__sp
 9551                        		__call		_check_BG
         01:D0E0  20 6D FF   			call	_check_BG
 9552                        	
 9553                        		.dbg	line,	"include\routines_LEVELS.c", 2099; if(map_blk_flag != TILE_BG)
 9554                        		__ld.umq	_map_blk_flag
         01:D0E3  AD B8 2B   			lda	_map_blk_flag
 9555                        		__neq_b.uiq	1
         01:D0E6  38         			sec
         01:D0E7  49 01      			eor	#1
         01:D0E9  D0 01      			bne	!+
         01:D0EB  18         			clc
         01:D0EC             	!:
 9556                        		__bfalse	.LL373
         01:D0EC  90 78      			bcc	.LL373
 9557                        	
 9558                        		.dbg	line,	"include\routines_LEVELS.c", 2100; {
 9559                        	
 9560                        		.dbg	line,	"include\routines_LEVELS.c", 2101; // CHECK COLLISION WITH TOP RIGHT WALL //
 9561                        	
 9562                        		.dbg	line,	"include\routines_LEVELS.c", 2102; check_BG( 8 , 15 );
 9563                        		__ld.wi		8
         01:D0EE  A9 08      			lda.l	#8
         01:D0F0  C2         			cly
 9564                        		__pusharg.wr
         01:D0F1  A6 8D      			ldx	<__sp
         01:D0F3  CA         			dex
         01:D0F4  CA         			dex
         01:D0F5  95 08      			sta.l	<__stack, x
         01:D0F7  94 09      			sty.h	<__stack, x
         01:D0F9  86 8D      			stx	<__sp
 9565                        		__ld.wi		15
         01:D0FB  A9 0F      			lda.l	#15
         01:D0FD  C2         			cly
 9566                        		__pusharg.wr
         01:D0FE  A6 8D      			ldx	<__sp
         01:D100  CA         			dex
         01:D101  CA         			dex
         01:D102  95 08      			sta.l	<__stack, x
         01:D104  94 09      			sty.h	<__stack, x
         01:D106  86 8D      			stx	<__sp
 9567                        		__call		_check_BG
         01:D108  20 6D FF   			call	_check_BG
 9568                        	
 9569                        		.dbg	line,	"include\routines_LEVELS.c", 2104; if(map_blk_flag == TILE_BG)
 9570                        		__ld.umq	_map_blk_flag
         01:D10B  AD B8 2B   			lda	_map_blk_flag
 9571                        		__equ_b.uiq	1
         01:D10E  C9 01      			cmp	#1
         01:D110  F0 01      			beq	!+
         01:D112  18         			clc
         01:D113             	!:
 9572                        		__bfalse	.LL374
         01:D113  90 41      			bcc	.LL374
 9573                        	
 9574                        		.dbg	line,	"include\routines_LEVELS.c", 2105; {
 9575                        	
 9576                        		.dbg	line,	"include\routines_LEVELS.c", 2106; check_TILE_DEPTH( 15 , -16 );
 9577                        		__ld.wi		15
         01:D115  A9 0F      			lda.l	#15
         01:D117  C2         			cly
 9578                        		__pusharg.wr
         01:D118  A6 8D      			ldx	<__sp
         01:D11A  CA         			dex
         01:D11B  CA         			dex
         01:D11C  95 08      			sta.l	<__stack, x
         01:D11E  94 09      			sty.h	<__stack, x
         01:D120  86 8D      			stx	<__sp
 9579                        		__ld.wi		-16
         01:D122  A9 F0      			lda.l	#-16
         01:D124  A0 FF      			ldy.h	#-16
 9580                        		__pusharg.wr
         01:D126  A6 8D      			ldx	<__sp
         01:D128  CA         			dex
         01:D129  CA         			dex
         01:D12A  95 08      			sta.l	<__stack, x
         01:D12C  94 09      			sty.h	<__stack, x
         01:D12E  86 8D      			stx	<__sp
 9581                        		__call		_check_TILE_DEPTH
         01:D130  20 59 FF   			call	_check_TILE_DEPTH
 9582                        	
 9583                        		.dbg	line,	"include\routines_LEVELS.c", 2108; if(map_blk_flag == TILE_EMPTY && jump_ladder == TRUE)
 9584                        		__not.um	_map_blk_flag
         01:D133  AD B8 2B   			lda	_map_blk_flag
         01:D136  18         			clc
         01:D137  D0 01      			bne	!+
         01:D139  38         			sec
         01:D13A             	!:
 9585                        		__bfalse	.LL376
         01:D13A  90 08      			bcc	.LL376
 9586                        		__ld.umq	_jump_ladder
         01:D13C  AD 21 23   			lda	_jump_ladder
 9587                        		__equ_b.uiq	1
         01:D13F  C9 01      			cmp	#1
         01:D141  F0 01      			beq	!+
         01:D143  18         			clc
         01:D144             	!:
 9588    01:D144             	.LL376:
 9589                        		__bfalse	.LL375
         01:D144  90 64      			bcc	.LL375
 9590                        	
 9591                        		.dbg	line,	"include\routines_LEVELS.c", 2109; {
 9592                        	
 9593                        		.dbg	line,	"include\routines_LEVELS.c", 2110; jump_ladder = FALSE;
 9594                        		__st.umiq	0, _jump_ladder
         01:D146  9C 21 23   			stz	_jump_ladder
 9595                        	
 9596                        		.dbg	line,	"include\routines_LEVELS.c", 2111; player_index_fall = 0;
 9597                        		__st.umiq	0, _player_index_fall
         01:D149  9C 1D 23   			stz	_player_index_fall
 9598                        	
 9599                        		.dbg	line,	"include\routines_LEVELS.c", 2112; player_state = STATE_FALL;
 9600                        		__st.umiq	9, _player_state
         01:D14C  A9 09      			lda.l	#9
         01:D14E  8D 18 23   			sta	_player_state
 9601                        	
 9602                        		.dbg	line,	"include\routines_LEVELS.c", 2113; return;
 9603                        		__bra		.LL230
         01:D151  4C 70 DB   			bra	.LL230
 9604                        	
 9605                        		.dbg	line,	"include\routines_LEVELS.c", 2114; }
 9606                        	
 9607                        		.dbg	line,	"include\routines_LEVELS.c", 2115; }
 9608    01:D154             	.LL375	.alias		.LL377
 9609                        	
 9610                        		.dbg	line,	"include\routines_LEVELS.c", 2117; else
 9611                        		__bra		.LL377
         01:D154  80 54      			bra	.LL377
 9612    01:D156             	.LL374:
 9613                        	
 9614                        		.dbg	line,	"include\routines_LEVELS.c", 2118; {
 9615                        	
 9616                        		.dbg	line,	"include\routines_LEVELS.c", 2119; sgx_map_pxl_x -= 2;
 9617                        		__sub_st.wmiq	2, _sgx_map_pxl_x
         01:D156  38         			sec
         01:D157  AD 97 26   			lda.l	_sgx_map_pxl_x
         01:D15A  E9 02      			sbc.l	#2
         01:D15C  8D 97 26   			sta.l	_sgx_map_pxl_x
         01:D15F  B0 03      			bcs	!+
         01:D161  CE 98 26   			dec.h	_sgx_map_pxl_x
         01:D164             	!:
 9618                        	
 9619                        		.dbg	line,	"include\routines_LEVELS.c", 2120; }
 9620    01:D164             	.LL377	.alias		.LL378
 9621                        	
 9622                        		.dbg	line,	"include\routines_LEVELS.c", 2121; }
 9623                        	
 9624                        		.dbg	line,	"include\routines_LEVELS.c", 2123; else
 9625                        		__bra		.LL378
         01:D164  80 44      			bra	.LL378
 9626    01:D166             	.LL373:
 9627                        	
 9628                        		.dbg	line,	"include\routines_LEVELS.c", 2124; {
 9629                        	
 9630                        		.dbg	line,	"include\routines_LEVELS.c", 2125; check_TILE_DEPTH( 15 , -16 );
 9631                        		__ld.wi		15
         01:D166  A9 0F      			lda.l	#15
         01:D168  C2         			cly
 9632                        		__pusharg.wr
         01:D169  A6 8D      			ldx	<__sp
         01:D16B  CA         			dex
         01:D16C  CA         			dex
         01:D16D  95 08      			sta.l	<__stack, x
         01:D16F  94 09      			sty.h	<__stack, x
         01:D171  86 8D      			stx	<__sp
 9633                        		__ld.wi		-16
         01:D173  A9 F0      			lda.l	#-16
         01:D175  A0 FF      			ldy.h	#-16
 9634                        		__pusharg.wr
         01:D177  A6 8D      			ldx	<__sp
         01:D179  CA         			dex
         01:D17A  CA         			dex
         01:D17B  95 08      			sta.l	<__stack, x
         01:D17D  94 09      			sty.h	<__stack, x
         01:D17F  86 8D      			stx	<__sp
 9635                        		__call		_check_TILE_DEPTH
         01:D181  20 59 FF   			call	_check_TILE_DEPTH
 9636                        	
 9637                        		.dbg	line,	"include\routines_LEVELS.c", 2127; if(map_blk_flag == TILE_EMPTY && jump_ladder == TRUE)
 9638                        		__not.um	_map_blk_flag
         01:D184  AD B8 2B   			lda	_map_blk_flag
         01:D187  18         			clc
         01:D188  D0 01      			bne	!+
         01:D18A  38         			sec
         01:D18B             	!:
 9639                        		__bfalse	.LL380
         01:D18B  90 08      			bcc	.LL380
 9640                        		__ld.umq	_jump_ladder
         01:D18D  AD 21 23   			lda	_jump_ladder
 9641                        		__equ_b.uiq	1
         01:D190  C9 01      			cmp	#1
         01:D192  F0 01      			beq	!+
         01:D194  18         			clc
         01:D195             	!:
 9642    01:D195             	.LL380:
 9643                        		__bfalse	.LL379
         01:D195  90 13      			bcc	.LL379
 9644                        	
 9645                        		.dbg	line,	"include\routines_LEVELS.c", 2128; {
 9646                        	
 9647                        		.dbg	line,	"include\routines_LEVELS.c", 2129; jump_ladder = FALSE;
 9648                        		__st.umiq	0, _jump_ladder
         01:D197  9C 21 23   			stz	_jump_ladder
 9649                        	
 9650                        		.dbg	line,	"include\routines_LEVELS.c", 2130; hit_wall = TRUE;
 9651                        		__st.umiq	1, _hit_wall
         01:D19A  A9 01      			lda.l	#1
         01:D19C  8D 24 23   			sta	_hit_wall
 9652                        	
 9653                        		.dbg	line,	"include\routines_LEVELS.c", 2131; player_index_fall = 0;
 9654                        		__st.umiq	0, _player_index_fall
         01:D19F  9C 1D 23   			stz	_player_index_fall
 9655                        	
 9656                        		.dbg	line,	"include\routines_LEVELS.c", 2132; player_state = STATE_FALL;
 9657                        		__st.umiq	9, _player_state
         01:D1A2  A9 09      			lda.l	#9
         01:D1A4  8D 18 23   			sta	_player_state
 9658                        	
 9659                        		.dbg	line,	"include\routines_LEVELS.c", 2133; return;
 9660                        		__bra		.LL230
         01:D1A7  4C 70 DB   			bra	.LL230
 9661                        	
 9662                        		.dbg	line,	"include\routines_LEVELS.c", 2134; }
 9663                        	
 9664                        		.dbg	line,	"include\routines_LEVELS.c", 2135; }
 9665    01:D1AA             	.LL379:
 9666    01:D1AA             	.LL378:
 9667                        	
 9668                        		.dbg	line,	"include\routines_LEVELS.c", 2140; //**************************************************************************************//
 9669                        	
 9670                        		.dbg	line,	"include\routines_LEVELS.c", 2141; //                                        V MOVE                                        //
 9671                        	
 9672                        		.dbg	line,	"include\routines_LEVELS.c", 2142; //**************************************************************************************//
 9673                        	
 9674                        		.dbg	line,	"include\routines_LEVELS.c", 2144; // UPDATE PLAYER Y POSITION //
 9675                        	
 9676                        		.dbg	line,	"include\routines_LEVELS.c", 2145; if(jump_ladder == FALSE)
 9677                        		__not.um	_jump_ladder
         01:D1AA  AD 21 23   			lda	_jump_ladder
         01:D1AD  18         			clc
         01:D1AE  D0 01      			bne	!+
         01:D1B0  38         			sec
         01:D1B1             	!:
 9678                        		__bfalse	.LL381
         01:D1B1  90 1A      			bcc	.LL381
 9679                        	
 9680                        		.dbg	line,	"include\routines_LEVELS.c", 2146; {
 9681                        	
 9682                        		.dbg	line,	"include\routines_LEVELS.c", 2147; player_pos_y += TABLE_PLAYER_JUMP_V[player_index_jump];
 9683                        		__ldx.umq	_player_index_jump
         01:D1B3  AE 1C 23   			ldx	_player_index_jump
 9684                        		__ld.bax	_TABLE_PLAYER_JUMP_V
         01:D1B6  BD 1D 61   			lda	_TABLE_PLAYER_JUMP_V, x
         01:D1B9  C2         			cly
         01:D1BA  10 01      			bpl	!+
         01:D1BC  88         			dey
         01:D1BD             	!:
 9685                        		__add_st.wmq	_player_pos_y
         01:D1BD  18         			clc
         01:D1BE  6D DC 24   			adc.l	_player_pos_y
         01:D1C1  8D DC 24   			sta.l	_player_pos_y
         01:D1C4  98         			tya
         01:D1C5  6D DD 24   			adc.h	_player_pos_y
         01:D1C8  8D DD 24   			sta.h	_player_pos_y
 9686                        	
 9687                        		.dbg	line,	"include\routines_LEVELS.c", 2148; }
 9688                        	
 9689                        		.dbg	line,	"include\routines_LEVELS.c", 2150; else
 9690                        		__bra		.LL382
         01:D1CB  80 18      			bra	.LL382
 9691    01:D1CD             	.LL381:
 9692                        	
 9693                        		.dbg	line,	"include\routines_LEVELS.c", 2151; {
 9694                        	
 9695                        		.dbg	line,	"include\routines_LEVELS.c", 2152; player_pos_y += TABLE_PLAYER_JUMP_LADDER[player_index_jump];
 9696                        		__ldx.umq	_player_index_jump
         01:D1CD  AE 1C 23   			ldx	_player_index_jump
 9697                        		__ld.bax	_TABLE_PLAYER_JUMP_LADDER
         01:D1D0  BD 55 61   			lda	_TABLE_PLAYER_JUMP_LADDER, x
         01:D1D3  C2         			cly
         01:D1D4  10 01      			bpl	!+
         01:D1D6  88         			dey
         01:D1D7             	!:
 9698                        		__add_st.wmq	_player_pos_y
         01:D1D7  18         			clc
         01:D1D8  6D DC 24   			adc.l	_player_pos_y
         01:D1DB  8D DC 24   			sta.l	_player_pos_y
         01:D1DE  98         			tya
         01:D1DF  6D DD 24   			adc.h	_player_pos_y
         01:D1E2  8D DD 24   			sta.h	_player_pos_y
 9699                        	
 9700                        		.dbg	line,	"include\routines_LEVELS.c", 2153; }
 9701    01:D1E5             	.LL382:
 9702                        	
 9703                        		.dbg	line,	"include\routines_LEVELS.c", 2156; // IF PLAYER GOES BELOW ITS BASE Y POSITION //
 9704                        	
 9705                        		.dbg	line,	"include\routines_LEVELS.c", 2157; if(player_pos_y >= PLAYER_BASE_Y_POS)
 9706                        		__ld.wm		_player_pos_y
         01:D1E5  AD DC 24   			lda.l	_player_pos_y
         01:D1E8  AC DD 24   			ldy.h	_player_pos_y
 9707                        		__sge_w.wi	128
         01:D1EB  C9 80      			cmp.l	#128		; Subtract integer from Y:A.
         01:D1ED  98         			tya
         01:D1EE  E9 00      			sbc.h	#128
         01:D1F0  50 02      			bvc	!+
         01:D1F2  49 80      			eor	#$80		; +ve if Y:A >= integer (signed).
         01:D1F4  49 80      	!:		eor	#$80
         01:D1F6  0A         			asl	a
 9708                        		__bfalse	.LL383
         01:D1F7  90 4E      			bcc	.LL383
 9709                        	
 9710                        		.dbg	line,	"include\routines_LEVELS.c", 2158; {
 9711                        	
 9712                        		.dbg	line,	"include\routines_LEVELS.c", 2159; // THE CAMERA MOVES //
 9713                        	
 9714                        		.dbg	line,	"include\routines_LEVELS.c", 2160; // CALCULATE HOW MANY PIXELS THE CAMERA HAS TO MOVE DOWN //
 9715                        	
 9716                        		.dbg	line,	"include\routines_LEVELS.c", 2161; camera_y_move = player_pos_y - PLAYER_BASE_Y_POS;
 9717                        		__ld.wm		_player_pos_y
         01:D1F9  AD DC 24   			lda.l	_player_pos_y
         01:D1FC  AC DD 24   			ldy.h	_player_pos_y
 9718                        		__sub.wi	128
         01:D1FF  38         			sec
         01:D200  E9 80      			sbc.l	#128
         01:D202  B0 01      			bcs	!+
         01:D204  88         			dey
         01:D205             	!:
 9719                        		__st.umq	__update_PLAYER_end - 5  /* camera_y_move */
         01:D205  8D 08 23   			sta	__update_PLAYER_end - 5
 9720                        	
 9721                        		.dbg	line,	"include\routines_LEVELS.c", 2162; sgx_map_pxl_y += camera_y_move;
 9722                        		__ld.um		__update_PLAYER_end - 5  /* camera_y_move */
         01:D208  AD 08 23   			lda	__update_PLAYER_end - 5
         01:D20B  C2         			cly
 9723                        		__add_st.wmq	_sgx_map_pxl_y
         01:D20C  18         			clc
         01:D20D  6D 99 26   			adc.l	_sgx_map_pxl_y
         01:D210  8D 99 26   			sta.l	_sgx_map_pxl_y
         01:D213  98         			tya
         01:D214  6D 9A 26   			adc.h	_sgx_map_pxl_y
         01:D217  8D 9A 26   			sta.h	_sgx_map_pxl_y
 9724                        	
 9725                        		.dbg	line,	"include\routines_LEVELS.c", 2164; // IF THE CAMERA HAS REACHED ITS MAX (LOWEST) POSITION //
 9726                        	
 9727                        		.dbg	line,	"include\routines_LEVELS.c", 2165; if(sgx_map_pxl_y > camera_max_y_position)
 9728                        		__ld.wm		_sgx_map_pxl_y
         01:D21A  AD 99 26   			lda.l	_sgx_map_pxl_y
         01:D21D  AC 9A 26   			ldy.h	_sgx_map_pxl_y
 9729                        		__ugt_w.wm	_camera_max_y_position
         01:D220  18         			clc			; Subtract memory+1 from Y:A.
         01:D221  ED DE 24   			sbc.l	_camera_max_y_position
         01:D224  98         			tya
         01:D225  ED DF 24   			sbc.h	_camera_max_y_position		; CS if Y:A > memory.
 9730                        		__bfalse	.LL384
         01:D228  90 0C      			bcc	.LL384
 9731                        	
 9732                        		.dbg	line,	"include\routines_LEVELS.c", 2166; {
 9733                        	
 9734                        		.dbg	line,	"include\routines_LEVELS.c", 2167; // THE CAMERA CAN NOT MOVE LOWER //
 9735                        	
 9736                        		.dbg	line,	"include\routines_LEVELS.c", 2168; sgx_map_pxl_y = camera_max_y_position;
 9737                        		__ld.wm		_camera_max_y_position
         01:D22A  AD DE 24   			lda.l	_camera_max_y_position
         01:D22D  AC DF 24   			ldy.h	_camera_max_y_position
 9738                        		__st.wmq	_sgx_map_pxl_y
         01:D230  8D 99 26   			sta.l	_sgx_map_pxl_y
         01:D233  8C 9A 26   			sty.h	_sgx_map_pxl_y
 9739                        	
 9740                        		.dbg	line,	"include\routines_LEVELS.c", 2169; }
 9741                        	
 9742                        		.dbg	line,	"include\routines_LEVELS.c", 2171; // THE PLAYER STAYS AT ITS BASE Y POSITION //
 9743                        	
 9744                        		.dbg	line,	"include\routines_LEVELS.c", 2172; player_pos_y = PLAYER_BASE_Y_POS;
 9745    01:D236             	.LL384:
 9746                        		__st.wmiq	128, _player_pos_y
         01:D236  A9 80      			lda.l	#128
         01:D238  8D DC 24   			sta.l	_player_pos_y
         01:D23B  9C DD 24   			stz.h	_player_pos_y
 9747                        	
 9748                        		.dbg	line,	"include\routines_LEVELS.c", 2174; spr_y(player_pos_y);
 9749                        		__ld.wm		_player_pos_y
         01:D23E  AD DC 24   			lda.l	_player_pos_y
         01:D241  AC DD 24   			ldy.h	_player_pos_y
 9750                        		__call		_spr_y.1
         01:D244  20 19 E8   			call	_spr_y.1
 9751                        	
 9752                        		.dbg	line,	"include\routines_LEVELS.c", 2175; }
 9753                        	
 9754                        		.dbg	line,	"include\routines_LEVELS.c", 2178; // UPDATE JUMP INDEX IN THE ARRAY //
 9755                        	
 9756                        		.dbg	line,	"include\routines_LEVELS.c", 2179; if(player_index_jump < jump_max_index)
 9757    01:D247             	.LL383:
 9758                        		__ld.umq	_player_index_jump
         01:D247  AD 1C 23   			lda	_player_index_jump
 9759                        		__ult_b.umq	_jump_max_index
         01:D24A  CD 22 23   			cmp	_jump_max_index		; Subtract memory from A.
         01:D24D  6A         			ror	a		; CC if A < memory.
         01:D24E  49 80      			eor	#$80
         01:D250  2A         			rol	a
 9760                        		__bfalse	.LL385
         01:D251  90 03      			bcc	.LL385
 9761                        	
 9762                        		.dbg	line,	"include\routines_LEVELS.c", 2180; {
 9763                        	
 9764                        		.dbg	line,	"include\routines_LEVELS.c", 2181; player_index_jump += 1;
 9765                        		__add_st.umiq	1, _player_index_jump
         01:D253  EE 1C 23   			inc	_player_index_jump
 9766                        	
 9767                        		.dbg	line,	"include\routines_LEVELS.c", 2182; }
 9768                        	
 9769                        		.dbg	line,	"include\routines_LEVELS.c", 2187; //--------------------------------------------------------------------------------------//
 9770                        	
 9771                        		.dbg	line,	"include\routines_LEVELS.c", 2188; //                                   FLOOR COLLISION                                    //
 9772                        	
 9773                        		.dbg	line,	"include\routines_LEVELS.c", 2189; //--------------------------------------------------------------------------------------//
 9774                        	
 9775                        		.dbg	line,	"include\routines_LEVELS.c", 2191; if(player_index_jump > 14)
 9776    01:D256             	.LL385:
 9777                        		__ld.umq	_player_index_jump
         01:D256  AD 1C 23   			lda	_player_index_jump
 9778                        		__ugt_b.uiq	14
         01:D259  18         			clc			; Subtract integer+1 from A.
         01:D25A  E9 0E      			sbc	#14		; CS if A > integer.
 9779                        		__bfalse	.LL386
         01:D25C  B0 03 4C 41			bcc	.LL386
         01:D260  D4          
 9780                        	
 9781                        		.dbg	line,	"include\routines_LEVELS.c", 2192; {
 9782                        	
 9783                        		.dbg	line,	"include\routines_LEVELS.c", 2193; // CHECK COLLISION WITH LEFT FLOOR //
 9784                        	
 9785                        		.dbg	line,	"include\routines_LEVELS.c", 2194; check_BG( 10 , 32 );
 9786                        		__ld.wi		10
         01:D261  A9 0A      			lda.l	#10
         01:D263  C2         			cly
 9787                        		__pusharg.wr
         01:D264  A6 8D      			ldx	<__sp
         01:D266  CA         			dex
         01:D267  CA         			dex
         01:D268  95 08      			sta.l	<__stack, x
         01:D26A  94 09      			sty.h	<__stack, x
         01:D26C  86 8D      			stx	<__sp
 9788                        		__ld.wi		32
         01:D26E  A9 20      			lda.l	#32
         01:D270  C2         			cly
 9789                        		__pusharg.wr
         01:D271  A6 8D      			ldx	<__sp
         01:D273  CA         			dex
         01:D274  CA         			dex
         01:D275  95 08      			sta.l	<__stack, x
         01:D277  94 09      			sty.h	<__stack, x
         01:D279  86 8D      			stx	<__sp
 9790                        		__call		_check_BG
         01:D27B  20 6D FF   			call	_check_BG
 9791                        	
 9792                        		.dbg	line,	"include\routines_LEVELS.c", 2196; if(map_blk_flag == TILE_BG)
 9793                        		__ld.umq	_map_blk_flag
         01:D27E  AD B8 2B   			lda	_map_blk_flag
 9794                        		__equ_b.uiq	1
         01:D281  C9 01      			cmp	#1
         01:D283  F0 01      			beq	!+
         01:D285  18         			clc
         01:D286             	!:
 9795                        		__bfalse	.LL387
         01:D286  B0 03 4C 51			bcc	.LL387
         01:D28A  D3          
 9796                        	
 9797                        		.dbg	line,	"include\routines_LEVELS.c", 2197; {
 9798                        	
 9799                        		.dbg	line,	"include\routines_LEVELS.c", 2198; // CALCULATE HOW MANY PIXELS THE PLAYER MOVED INTO THE GROUND //
 9800                        	
 9801                        		.dbg	line,	"include\routines_LEVELS.c", 2199; for(i=1; i<11 ; i++)
 9802                        		__st.umiq	1, __update_PLAYER_end - 4  /* i */
         01:D28B  A9 01      			lda.l	#1
         01:D28D  8D 09 23   			sta	__update_PLAYER_end - 4
 9803    01:D290             	.LL388:
 9804                        		__ld.umq	__update_PLAYER_end - 4  /* i */
         01:D290  AD 09 23   			lda	__update_PLAYER_end - 4
 9805                        		__ult_b.uiq	11
         01:D293  C9 0B      			cmp	#11		; Subtract integer from A.
         01:D295  6A         			ror	a		; CC if A < integer.
         01:D296  49 80      			eor	#$80
         01:D298  2A         			rol	a
 9806                        		__btrue		.LL390
         01:D299  B0 07      			bcs	.LL390
 9807                        		__bra		.LL391
         01:D29B  80 7D      			bra	.LL391
 9808    01:D29D             	.LL389:
 9809                        		__inc.umq	__update_PLAYER_end - 4  /* i */
         01:D29D  EE 09 23   			inc	__update_PLAYER_end - 4
 9810                        		__bra		.LL388
         01:D2A0  80 EE      			bra	.LL388
 9811    01:D2A2             	.LL390:
 9812                        	
 9813                        		.dbg	line,	"include\routines_LEVELS.c", 2200; {
 9814                        	
 9815                        		.dbg	line,	"include\routines_LEVELS.c", 2201; check_TILE_DEPTH( 10 , i);
 9816                        		__ld.wi		10
         01:D2A2  A9 0A      			lda.l	#10
         01:D2A4  C2         			cly
 9817                        		__pusharg.wr
         01:D2A5  A6 8D      			ldx	<__sp
         01:D2A7  CA         			dex
         01:D2A8  CA         			dex
         01:D2A9  95 08      			sta.l	<__stack, x
         01:D2AB  94 09      			sty.h	<__stack, x
         01:D2AD  86 8D      			stx	<__sp
 9818                        		__ld.um		__update_PLAYER_end - 4  /* i */
         01:D2AF  AD 09 23   			lda	__update_PLAYER_end - 4
         01:D2B2  C2         			cly
 9819                        		__pusharg.wr
         01:D2B3  A6 8D      			ldx	<__sp
         01:D2B5  CA         			dex
         01:D2B6  CA         			dex
         01:D2B7  95 08      			sta.l	<__stack, x
         01:D2B9  94 09      			sty.h	<__stack, x
         01:D2BB  86 8D      			stx	<__sp
 9820                        		__call		_check_TILE_DEPTH
         01:D2BD  20 59 FF   			call	_check_TILE_DEPTH
 9821                        	
 9822                        		.dbg	line,	"include\routines_LEVELS.c", 2203; if(map_blk_flag == TILE_EMPTY)
 9823                        		__not.um	_map_blk_flag
         01:D2C0  AD B8 2B   			lda	_map_blk_flag
         01:D2C3  18         			clc
         01:D2C4  D0 01      			bne	!+
         01:D2C6  38         			sec
         01:D2C7             	!:
 9824                        		__bfalse	.LL392
         01:D2C7  90 D4      			bcc	.LL392
 9825                        	
 9826                        		.dbg	line,	"include\routines_LEVELS.c", 2204; {
 9827                        	
 9828                        		.dbg	line,	"include\routines_LEVELS.c", 2205; if(player_pos_y != PLAYER_BASE_Y_POS)
 9829                        		__ld.wm		_player_pos_y
         01:D2C9  AD DC 24   			lda.l	_player_pos_y
         01:D2CC  AC DD 24   			ldy.h	_player_pos_y
 9830                        		__neq_w.wi	128
         01:D2CF  38         			sec
         01:D2D0  49 80      			eor.l	#128
         01:D2D2  D0 06      			bne	!+
         01:D2D4  98         			tya
         01:D2D5  49 00      			eor.h	#128
         01:D2D7  D0 01      			bne	!+
         01:D2D9  18         			clc
         01:D2DA             	!:
 9831                        		__bfalse	.LL393
         01:D2DA  90 1E      			bcc	.LL393
 9832                        	
 9833                        		.dbg	line,	"include\routines_LEVELS.c", 2206; {
 9834                        	
 9835                        		.dbg	line,	"include\routines_LEVELS.c", 2207; player_pos_y -= (i - 1);
 9836                        		__ld.um		__update_PLAYER_end - 4  /* i */
         01:D2DC  AD 09 23   			lda	__update_PLAYER_end - 4
         01:D2DF  C2         			cly
 9837                        		__sub.wi	1
         01:D2E0  38         			sec
         01:D2E1  E9 01      			sbc.l	#1
         01:D2E3  B0 01      			bcs	!+
         01:D2E5  88         			dey
         01:D2E6             	!:
 9838                        		__isub_st.wmq	_player_pos_y
         01:D2E6  38         			sec
         01:D2E7  49 FF      			eor	#$FF
         01:D2E9  6D DC 24   			adc.l	_player_pos_y
         01:D2EC  8D DC 24   			sta.l	_player_pos_y
         01:D2EF  98         			tya
         01:D2F0  49 FF      			eor	#$FF
         01:D2F2  6D DD 24   			adc.h	_player_pos_y
         01:D2F5  8D DD 24   			sta.h	_player_pos_y
 9839                        	
 9840                        		.dbg	line,	"include\routines_LEVELS.c", 2208; }
 9841                        	
 9842                        		.dbg	line,	"include\routines_LEVELS.c", 2210; else
 9843                        		__bra		.LL394
         01:D2F8  80 20      			bra	.LL394
 9844    01:D2FA             	.LL393:
 9845                        	
 9846                        		.dbg	line,	"include\routines_LEVELS.c", 2211; {
 9847                        	
 9848                        		.dbg	line,	"include\routines_LEVELS.c", 2212; sgx_map_pxl_y -= (i - 1);
 9849                        		__ld.um		__update_PLAYER_end - 4  /* i */
         01:D2FA  AD 09 23   			lda	__update_PLAYER_end - 4
         01:D2FD  C2         			cly
 9850                        		__sub.wi	1
         01:D2FE  38         			sec
         01:D2FF  E9 01      			sbc.l	#1
         01:D301  B0 01      			bcs	!+
         01:D303  88         			dey
         01:D304             	!:
 9851                        		__isub_st.wmq	_sgx_map_pxl_y
         01:D304  38         			sec
         01:D305  49 FF      			eor	#$FF
         01:D307  6D 99 26   			adc.l	_sgx_map_pxl_y
         01:D30A  8D 99 26   			sta.l	_sgx_map_pxl_y
         01:D30D  98         			tya
         01:D30E  49 FF      			eor	#$FF
         01:D310  6D 9A 26   			adc.h	_sgx_map_pxl_y
         01:D313  8D 9A 26   			sta.h	_sgx_map_pxl_y
 9852                        	
 9853                        		.dbg	line,	"include\routines_LEVELS.c", 2213; }
 9854    01:D316             	.LL394	.alias		.LL391
 9855                        	
 9856                        		.dbg	line,	"include\routines_LEVELS.c", 2215; break;
 9857                        		__bra		.LL391
         01:D316  80 02      			bra	.LL391
 9858                        	
 9859                        		.dbg	line,	"include\routines_LEVELS.c", 2216; }
 9860                        	
 9861                        		.dbg	line,	"include\routines_LEVELS.c", 2217; }
 9862    01:D318             	.LL392	.alias		.LL389
 9863                        		__bra		.LL389
         01:D318  80 83      			bra	.LL389
 9864    01:D31A             	.LL391:
 9865                        	
 9866                        		.dbg	line,	"include\routines_LEVELS.c", 2219; // SET PLAYER SPRITE NEW POSITION //
 9867                        	
 9868                        		.dbg	line,	"include\routines_LEVELS.c", 2220; spr_y(player_pos_y);
 9869                        		__ld.wm		_player_pos_y
         01:D31A  AD DC 24   			lda.l	_player_pos_y
         01:D31D  AC DD 24   			ldy.h	_player_pos_y
 9870                        		__call		_spr_y.1
         01:D320  20 19 E8   			call	_spr_y.1
 9871                        	
 9872                        		.dbg	line,	"include\routines_LEVELS.c", 2222; spr_set(weapon_id);
 9873                        		__ld.umq	_weapon_id
         01:D323  AD 26 23   			lda	_weapon_id
 9874                        		__call		_spr_set.1
         01:D326  20 DD E7   			call	_spr_set.1
 9875                        	
 9876                        		.dbg	line,	"include\routines_LEVELS.c", 2223; spr_y(player_pos_y+8);
 9877                        		__ld.wm		_player_pos_y
         01:D329  AD DC 24   			lda.l	_player_pos_y
         01:D32C  AC DD 24   			ldy.h	_player_pos_y
 9878                        		__add.wi	8
         01:D32F  18         			clc
         01:D330  69 08      			adc.l	#8
         01:D332  90 01      			bcc	!+
         01:D334  C8         			iny
         01:D335             	!:
 9879                        		__call		_spr_y.1
         01:D335  20 19 E8   			call	_spr_y.1
 9880                        	
 9881                        		.dbg	line,	"include\routines_LEVELS.c", 2225; player_counter_anim = 1;
 9882                        		__st.umiq	1, _player_counter_anim
         01:D338  A9 01      			lda.l	#1
         01:D33A  8D 1B 23   			sta	_player_counter_anim
 9883                        	
 9884                        		.dbg	line,	"include\routines_LEVELS.c", 2226; player_index_jump = 0;
 9885                        		__st.umiq	0, _player_index_jump
         01:D33D  9C 1C 23   			stz	_player_index_jump
 9886                        	
 9887                        		.dbg	line,	"include\routines_LEVELS.c", 2227; jump_ladder = FALSE;
 9888                        		__st.umiq	0, _jump_ladder
         01:D340  9C 21 23   			stz	_jump_ladder
 9889                        	
 9890                        		.dbg	line,	"include\routines_LEVELS.c", 2228; hit_wall = FALSE;
 9891                        		__st.umiq	0, _hit_wall
         01:D343  9C 24 23   			stz	_hit_wall
 9892                        	
 9893                        		.dbg	line,	"include\routines_LEVELS.c", 2229; jump_max_index = 34;
 9894                        		__st.umiq	34, _jump_max_index
         01:D346  A9 22      			lda.l	#34
         01:D348  8D 22 23   			sta	_jump_max_index
 9895                        	
 9896                        		.dbg	line,	"include\routines_LEVELS.c", 2230; player_state = STATE_IDLE;
 9897                        		__st.umiq	0, _player_state
         01:D34B  9C 18 23   			stz	_player_state
 9898                        	
 9899                        		.dbg	line,	"include\routines_LEVELS.c", 2231; return;
 9900                        		__bra		.LL230
         01:D34E  4C 70 DB   			bra	.LL230
 9901                        	
 9902                        		.dbg	line,	"include\routines_LEVELS.c", 2232; }
 9903                        	
 9904                        		.dbg	line,	"include\routines_LEVELS.c", 2234; else
 9905    01:D351             	.LL387:
 9906                        	
 9907                        		.dbg	line,	"include\routines_LEVELS.c", 2235; {
 9908                        	
 9909                        		.dbg	line,	"include\routines_LEVELS.c", 2236; // CHECK COLLISION WITH RIGHT FLOOR //
 9910                        	
 9911                        		.dbg	line,	"include\routines_LEVELS.c", 2237; check_BG( 22 , 32 );
 9912                        		__ld.wi		22
         01:D351  A9 16      			lda.l	#22
         01:D353  C2         			cly
 9913                        		__pusharg.wr
         01:D354  A6 8D      			ldx	<__sp
         01:D356  CA         			dex
         01:D357  CA         			dex
         01:D358  95 08      			sta.l	<__stack, x
         01:D35A  94 09      			sty.h	<__stack, x
         01:D35C  86 8D      			stx	<__sp
 9914                        		__ld.wi		32
         01:D35E  A9 20      			lda.l	#32
         01:D360  C2         			cly
 9915                        		__pusharg.wr
         01:D361  A6 8D      			ldx	<__sp
         01:D363  CA         			dex
         01:D364  CA         			dex
         01:D365  95 08      			sta.l	<__stack, x
         01:D367  94 09      			sty.h	<__stack, x
         01:D369  86 8D      			stx	<__sp
 9916                        		__call		_check_BG
         01:D36B  20 6D FF   			call	_check_BG
 9917                        	
 9918                        		.dbg	line,	"include\routines_LEVELS.c", 2239; if(map_blk_flag == TILE_BG)
 9919                        		__ld.umq	_map_blk_flag
         01:D36E  AD B8 2B   			lda	_map_blk_flag
 9920                        		__equ_b.uiq	1
         01:D371  C9 01      			cmp	#1
         01:D373  F0 01      			beq	!+
         01:D375  18         			clc
         01:D376             	!:
 9921                        		__bfalse	.LL396
         01:D376  B0 03 4C 41			bcc	.LL396
         01:D37A  D4          
 9922                        	
 9923                        		.dbg	line,	"include\routines_LEVELS.c", 2240; {
 9924                        	
 9925                        		.dbg	line,	"include\routines_LEVELS.c", 2241; // CALCULATE HOW MANY PIXELS THE PLAYER MOVED INTO THE GROUND //
 9926                        	
 9927                        		.dbg	line,	"include\routines_LEVELS.c", 2242; for(i=1; i<11 ; i++)
 9928                        		__st.umiq	1, __update_PLAYER_end - 4  /* i */
         01:D37B  A9 01      			lda.l	#1
         01:D37D  8D 09 23   			sta	__update_PLAYER_end - 4
 9929    01:D380             	.LL397:
 9930                        		__ld.umq	__update_PLAYER_end - 4  /* i */
         01:D380  AD 09 23   			lda	__update_PLAYER_end - 4
 9931                        		__ult_b.uiq	11
         01:D383  C9 0B      			cmp	#11		; Subtract integer from A.
         01:D385  6A         			ror	a		; CC if A < integer.
         01:D386  49 80      			eor	#$80
         01:D388  2A         			rol	a
 9932                        		__btrue		.LL399
         01:D389  B0 07      			bcs	.LL399
 9933                        		__bra		.LL400
         01:D38B  80 7D      			bra	.LL400
 9934    01:D38D             	.LL398:
 9935                        		__inc.umq	__update_PLAYER_end - 4  /* i */
         01:D38D  EE 09 23   			inc	__update_PLAYER_end - 4
 9936                        		__bra		.LL397
         01:D390  80 EE      			bra	.LL397
 9937    01:D392             	.LL399:
 9938                        	
 9939                        		.dbg	line,	"include\routines_LEVELS.c", 2243; {
 9940                        	
 9941                        		.dbg	line,	"include\routines_LEVELS.c", 2244; check_TILE_DEPTH( 22 , i);
 9942                        		__ld.wi		22
         01:D392  A9 16      			lda.l	#22
         01:D394  C2         			cly
 9943                        		__pusharg.wr
         01:D395  A6 8D      			ldx	<__sp
         01:D397  CA         			dex
         01:D398  CA         			dex
         01:D399  95 08      			sta.l	<__stack, x
         01:D39B  94 09      			sty.h	<__stack, x
         01:D39D  86 8D      			stx	<__sp
 9944                        		__ld.um		__update_PLAYER_end - 4  /* i */
         01:D39F  AD 09 23   			lda	__update_PLAYER_end - 4
         01:D3A2  C2         			cly
 9945                        		__pusharg.wr
         01:D3A3  A6 8D      			ldx	<__sp
         01:D3A5  CA         			dex
         01:D3A6  CA         			dex
         01:D3A7  95 08      			sta.l	<__stack, x
         01:D3A9  94 09      			sty.h	<__stack, x
         01:D3AB  86 8D      			stx	<__sp
 9946                        		__call		_check_TILE_DEPTH
         01:D3AD  20 59 FF   			call	_check_TILE_DEPTH
 9947                        	
 9948                        		.dbg	line,	"include\routines_LEVELS.c", 2246; if(map_blk_flag == TILE_EMPTY)
 9949                        		__not.um	_map_blk_flag
         01:D3B0  AD B8 2B   			lda	_map_blk_flag
         01:D3B3  18         			clc
         01:D3B4  D0 01      			bne	!+
         01:D3B6  38         			sec
         01:D3B7             	!:
 9950                        		__bfalse	.LL401
         01:D3B7  90 D4      			bcc	.LL401
 9951                        	
 9952                        		.dbg	line,	"include\routines_LEVELS.c", 2247; {
 9953                        	
 9954                        		.dbg	line,	"include\routines_LEVELS.c", 2248; if(player_pos_y != PLAYER_BASE_Y_POS)
 9955                        		__ld.wm		_player_pos_y
         01:D3B9  AD DC 24   			lda.l	_player_pos_y
         01:D3BC  AC DD 24   			ldy.h	_player_pos_y
 9956                        		__neq_w.wi	128
         01:D3BF  38         			sec
         01:D3C0  49 80      			eor.l	#128
         01:D3C2  D0 06      			bne	!+
         01:D3C4  98         			tya
         01:D3C5  49 00      			eor.h	#128
         01:D3C7  D0 01      			bne	!+
         01:D3C9  18         			clc
         01:D3CA             	!:
 9957                        		__bfalse	.LL402
         01:D3CA  90 1E      			bcc	.LL402
 9958                        	
 9959                        		.dbg	line,	"include\routines_LEVELS.c", 2249; {
 9960                        	
 9961                        		.dbg	line,	"include\routines_LEVELS.c", 2250; player_pos_y -= (i - 1);
 9962                        		__ld.um		__update_PLAYER_end - 4  /* i */
         01:D3CC  AD 09 23   			lda	__update_PLAYER_end - 4
         01:D3CF  C2         			cly
 9963                        		__sub.wi	1
         01:D3D0  38         			sec
         01:D3D1  E9 01      			sbc.l	#1
         01:D3D3  B0 01      			bcs	!+
         01:D3D5  88         			dey
         01:D3D6             	!:
 9964                        		__isub_st.wmq	_player_pos_y
         01:D3D6  38         			sec
         01:D3D7  49 FF      			eor	#$FF
         01:D3D9  6D DC 24   			adc.l	_player_pos_y
         01:D3DC  8D DC 24   			sta.l	_player_pos_y
         01:D3DF  98         			tya
         01:D3E0  49 FF      			eor	#$FF
         01:D3E2  6D DD 24   			adc.h	_player_pos_y
         01:D3E5  8D DD 24   			sta.h	_player_pos_y
 9965                        	
 9966                        		.dbg	line,	"include\routines_LEVELS.c", 2251; }
 9967                        	
 9968                        		.dbg	line,	"include\routines_LEVELS.c", 2253; else
 9969                        		__bra		.LL403
         01:D3E8  80 20      			bra	.LL403
 9970    01:D3EA             	.LL402:
 9971                        	
 9972                        		.dbg	line,	"include\routines_LEVELS.c", 2254; {
 9973                        	
 9974                        		.dbg	line,	"include\routines_LEVELS.c", 2255; sgx_map_pxl_y -= (i - 1);
 9975                        		__ld.um		__update_PLAYER_end - 4  /* i */
         01:D3EA  AD 09 23   			lda	__update_PLAYER_end - 4
         01:D3ED  C2         			cly
 9976                        		__sub.wi	1
         01:D3EE  38         			sec
         01:D3EF  E9 01      			sbc.l	#1
         01:D3F1  B0 01      			bcs	!+
         01:D3F3  88         			dey
         01:D3F4             	!:
 9977                        		__isub_st.wmq	_sgx_map_pxl_y
         01:D3F4  38         			sec
         01:D3F5  49 FF      			eor	#$FF
         01:D3F7  6D 99 26   			adc.l	_sgx_map_pxl_y
         01:D3FA  8D 99 26   			sta.l	_sgx_map_pxl_y
         01:D3FD  98         			tya
         01:D3FE  49 FF      			eor	#$FF
         01:D400  6D 9A 26   			adc.h	_sgx_map_pxl_y
         01:D403  8D 9A 26   			sta.h	_sgx_map_pxl_y
 9978                        	
 9979                        		.dbg	line,	"include\routines_LEVELS.c", 2256; }
 9980    01:D406             	.LL403	.alias		.LL400
 9981                        	
 9982                        		.dbg	line,	"include\routines_LEVELS.c", 2258; break;
 9983                        		__bra		.LL400
         01:D406  80 02      			bra	.LL400
 9984                        	
 9985                        		.dbg	line,	"include\routines_LEVELS.c", 2259; }
 9986                        	
 9987                        		.dbg	line,	"include\routines_LEVELS.c", 2260; }
 9988    01:D408             	.LL401	.alias		.LL398
 9989                        		__bra		.LL398
         01:D408  80 83      			bra	.LL398
 9990    01:D40A             	.LL400:
 9991                        	
 9992                        		.dbg	line,	"include\routines_LEVELS.c", 2262; // SET PLAYER SPRITE NEW POSITION //
 9993                        	
 9994                        		.dbg	line,	"include\routines_LEVELS.c", 2263; spr_y(player_pos_y);
 9995                        		__ld.wm		_player_pos_y
         01:D40A  AD DC 24   			lda.l	_player_pos_y
         01:D40D  AC DD 24   			ldy.h	_player_pos_y
 9996                        		__call		_spr_y.1
         01:D410  20 19 E8   			call	_spr_y.1
 9997                        	
 9998                        		.dbg	line,	"include\routines_LEVELS.c", 2265; spr_set(weapon_id);
 9999                        		__ld.umq	_weapon_id
         01:D413  AD 26 23   			lda	_weapon_id
10000                        		__call		_spr_set.1
         01:D416  20 DD E7   			call	_spr_set.1
10001                        	
10002                        		.dbg	line,	"include\routines_LEVELS.c", 2266; spr_y(player_pos_y+8);
10003                        		__ld.wm		_player_pos_y
         01:D419  AD DC 24   			lda.l	_player_pos_y
         01:D41C  AC DD 24   			ldy.h	_player_pos_y
10004                        		__add.wi	8
         01:D41F  18         			clc
         01:D420  69 08      			adc.l	#8
         01:D422  90 01      			bcc	!+
         01:D424  C8         			iny
         01:D425             	!:
10005                        		__call		_spr_y.1
         01:D425  20 19 E8   			call	_spr_y.1
10006                        	
10007                        		.dbg	line,	"include\routines_LEVELS.c", 2268; player_counter_anim = 1;
10008                        		__st.umiq	1, _player_counter_anim
         01:D428  A9 01      			lda.l	#1
         01:D42A  8D 1B 23   			sta	_player_counter_anim
10009                        	
10010                        		.dbg	line,	"include\routines_LEVELS.c", 2269; player_index_jump = 0;
10011                        		__st.umiq	0, _player_index_jump
         01:D42D  9C 1C 23   			stz	_player_index_jump
10012                        	
10013                        		.dbg	line,	"include\routines_LEVELS.c", 2270; jump_ladder = FALSE;
10014                        		__st.umiq	0, _jump_ladder
         01:D430  9C 21 23   			stz	_jump_ladder
10015                        	
10016                        		.dbg	line,	"include\routines_LEVELS.c", 2271; hit_wall = FALSE;
10017                        		__st.umiq	0, _hit_wall
         01:D433  9C 24 23   			stz	_hit_wall
10018                        	
10019                        		.dbg	line,	"include\routines_LEVELS.c", 2272; jump_max_index = 34;
10020                        		__st.umiq	34, _jump_max_index
         01:D436  A9 22      			lda.l	#34
         01:D438  8D 22 23   			sta	_jump_max_index
10021                        	
10022                        		.dbg	line,	"include\routines_LEVELS.c", 2273; player_state = STATE_IDLE;
10023                        		__st.umiq	0, _player_state
         01:D43B  9C 18 23   			stz	_player_state
10024                        	
10025                        		.dbg	line,	"include\routines_LEVELS.c", 2274; return;
10026                        		__bra		.LL230
         01:D43E  4C 70 DB   			bra	.LL230
10027                        	
10028                        		.dbg	line,	"include\routines_LEVELS.c", 2275; }
10029                        	
10030                        		.dbg	line,	"include\routines_LEVELS.c", 2276; }
10031    01:D441             	.LL396:
10032    01:D441             	.LL395:
10033                        	
10034                        		.dbg	line,	"include\routines_LEVELS.c", 2277; }
10035                        	
10036                        		.dbg	line,	"include\routines_LEVELS.c", 2282; //--------------------------------------------------------------------------------------//
10037                        	
10038                        		.dbg	line,	"include\routines_LEVELS.c", 2283; //                                   LADDER COLLISION                                   //
10039                        	
10040                        		.dbg	line,	"include\routines_LEVELS.c", 2284; //--------------------------------------------------------------------------------------//
10041                        	
10042                        		.dbg	line,	"include\routines_LEVELS.c", 2286; if(player_index_jump > 4)
10043    01:D441             	.LL386:
10044                        		__ld.umq	_player_index_jump
         01:D441  AD 1C 23   			lda	_player_index_jump
10045                        		__ugt_b.uiq	4
         01:D444  18         			clc			; Subtract integer+1 from A.
         01:D445  E9 04      			sbc	#4		; CS if A > integer.
10046                        		__bfalse	.LL404
         01:D447  B0 03 4C DC			bcc	.LL404
         01:D44B  D4          
10047                        	
10048                        		.dbg	line,	"include\routines_LEVELS.c", 2287; {
10049                        	
10050                        		.dbg	line,	"include\routines_LEVELS.c", 2288; check_BG( 16 , 16 );
10051                        		__ld.wi		16
         01:D44C  A9 10      			lda.l	#16
         01:D44E  C2         			cly
10052                        		__pusharg.wr
         01:D44F  A6 8D      			ldx	<__sp
         01:D451  CA         			dex
         01:D452  CA         			dex
         01:D453  95 08      			sta.l	<__stack, x
         01:D455  94 09      			sty.h	<__stack, x
         01:D457  86 8D      			stx	<__sp
10053                        		__ld.wi		16
         01:D459  A9 10      			lda.l	#16
         01:D45B  C2         			cly
10054                        		__pusharg.wr
         01:D45C  A6 8D      			ldx	<__sp
         01:D45E  CA         			dex
         01:D45F  CA         			dex
         01:D460  95 08      			sta.l	<__stack, x
         01:D462  94 09      			sty.h	<__stack, x
         01:D464  86 8D      			stx	<__sp
10055                        		__call		_check_BG
         01:D466  20 6D FF   			call	_check_BG
10056                        	
10057                        		.dbg	line,	"include\routines_LEVELS.c", 2290; if(map_blk_flag == TILE_LADDER)
10058                        		__ld.umq	_map_blk_flag
         01:D469  AD B8 2B   			lda	_map_blk_flag
10059                        		__equ_b.uiq	2
         01:D46C  C9 02      			cmp	#2
         01:D46E  F0 01      			beq	!+
         01:D470  18         			clc
         01:D471             	!:
10060                        		__bfalse	.LL405
         01:D471  90 69      			bcc	.LL405
10061                        	
10062                        		.dbg	line,	"include\routines_LEVELS.c", 2291; {
10063                        	
10064                        		.dbg	line,	"include\routines_LEVELS.c", 2292; // CAMERA GOES 8 PX BACKWARD //
10065                        	
10066                        		.dbg	line,	"include\routines_LEVELS.c", 2293; sgx_map_pxl_x = ( (sgx_map_pxl_x >> 3) << 3 );
10067                        		__ld.wm		_sgx_map_pxl_x
         01:D473  AD 97 26   			lda.l	_sgx_map_pxl_x
         01:D476  AC 98 26   			ldy.h	_sgx_map_pxl_x
10068                        		__lsr.wi	3
         01:D479  84 00      			sty	__temp
         01:D47B  20 3A E2   			jsr	lsrw3
10069                        		__asl.wi	3
         01:D47E  84 00      			sty	__temp
         01:D480  20 D7 E1   			jsr	aslw3
10070                        		__st.wmq	_sgx_map_pxl_x
         01:D483  8D 97 26   			sta.l	_sgx_map_pxl_x
         01:D486  8C 98 26   			sty.h	_sgx_map_pxl_x
10071                        	
10072                        		.dbg	line,	"include\routines_LEVELS.c", 2295; // SO WE UPDATE THE MAP //
10073                        	
10074                        		.dbg	line,	"include\routines_LEVELS.c", 2296; sgx_scroll_map();
10075                        		__call		_sgx_scroll_map
         01:D489  20 81 FF   			call	_sgx_scroll_map
10076                        	
10077                        		.dbg	line,	"include\routines_LEVELS.c", 2298; // CHECK IF THE PLAYER STANDS RIGHT TO THE LADDER //
10078                        	
10079                        		.dbg	line,	"include\routines_LEVELS.c", 2299; check_BG( 31 , 16 );
10080                        		__ld.wi		31
         01:D48C  A9 1F      			lda.l	#31
         01:D48E  C2         			cly
10081                        		__pusharg.wr
         01:D48F  A6 8D      			ldx	<__sp
         01:D491  CA         			dex
         01:D492  CA         			dex
         01:D493  95 08      			sta.l	<__stack, x
         01:D495  94 09      			sty.h	<__stack, x
         01:D497  86 8D      			stx	<__sp
10082                        		__ld.wi		16
         01:D499  A9 10      			lda.l	#16
         01:D49B  C2         			cly
10083                        		__pusharg.wr
         01:D49C  A6 8D      			ldx	<__sp
         01:D49E  CA         			dex
         01:D49F  CA         			dex
         01:D4A0  95 08      			sta.l	<__stack, x
         01:D4A2  94 09      			sty.h	<__stack, x
         01:D4A4  86 8D      			stx	<__sp
10084                        		__call		_check_BG
         01:D4A6  20 6D FF   			call	_check_BG
10085                        	
10086                        		.dbg	line,	"include\routines_LEVELS.c", 2301; if(map_blk_flag == TILE_LADDER)
10087                        		__ld.umq	_map_blk_flag
         01:D4A9  AD B8 2B   			lda	_map_blk_flag
10088                        		__equ_b.uiq	2
         01:D4AC  C9 02      			cmp	#2
         01:D4AE  F0 01      			beq	!+
         01:D4B0  18         			clc
         01:D4B1             	!:
10089                        		__bfalse	.LL406
         01:D4B1  90 0E      			bcc	.LL406
10090                        	
10091                        		.dbg	line,	"include\routines_LEVELS.c", 2302; {
10092                        	
10093                        		.dbg	line,	"include\routines_LEVELS.c", 2303; sgx_map_pxl_x += 8;
10094                        		__add_st.wmiq	8, _sgx_map_pxl_x
         01:D4B3  18         			clc
         01:D4B4  AD 97 26   			lda.l	_sgx_map_pxl_x
         01:D4B7  69 08      			adc.l	#8
         01:D4B9  8D 97 26   			sta.l	_sgx_map_pxl_x
         01:D4BC  90 03      			bcc	!+
         01:D4BE  EE 98 26   			inc.h	_sgx_map_pxl_x
         01:D4C1             	!:
10095                        	
10096                        		.dbg	line,	"include\routines_LEVELS.c", 2304; }
10097                        	
10098                        		.dbg	line,	"include\routines_LEVELS.c", 2306; spr_pattern(PLAYER_HANG_VRAM_ADR);
10099    01:D4C1             	.LL406:
10100                        		__ld.wi		7424
         01:D4C1  62         			cla
         01:D4C2  A0 1D      			ldy.h	#7424
10101                        		__call		_spr_pattern.1
         01:D4C4  20 26 E8   			call	_spr_pattern.1
10102                        	
10103                        		.dbg	line,	"include\routines_LEVELS.c", 2307; player_counter_anim = 0;
10104                        		__st.umiq	0, _player_counter_anim
         01:D4C7  9C 1B 23   			stz	_player_counter_anim
10105                        	
10106                        		.dbg	line,	"include\routines_LEVELS.c", 2308; player_index_jump = 0;
10107                        		__st.umiq	0, _player_index_jump
         01:D4CA  9C 1C 23   			stz	_player_index_jump
10108                        	
10109                        		.dbg	line,	"include\routines_LEVELS.c", 2309; jump_ladder = TRUE;
10110                        		__st.umiq	1, _jump_ladder
         01:D4CD  A9 01      			lda.l	#1
         01:D4CF  8D 21 23   			sta	_jump_ladder
10111                        	
10112                        		.dbg	line,	"include\routines_LEVELS.c", 2310; jump_max_index = 29;
10113                        		__st.umiq	29, _jump_max_index
         01:D4D2  A9 1D      			lda.l	#29
         01:D4D4  8D 22 23   			sta	_jump_max_index
10114                        	
10115                        		.dbg	line,	"include\routines_LEVELS.c", 2311; player_state = STATE_HANG;
10116                        		__st.umiq	10, _player_state
         01:D4D7  A9 0A      			lda.l	#10
         01:D4D9  8D 18 23   			sta	_player_state
10117                        	
10118                        		.dbg	line,	"include\routines_LEVELS.c", 2312; }
10119                        	
10120                        		.dbg	line,	"include\routines_LEVELS.c", 2313; }
10121    01:D4DC             	.LL405:
10122                        	
10123                        		.dbg	line,	"include\routines_LEVELS.c", 2316; // SET PLAYER SPRITE NEW POSITION //
10124                        	
10125                        		.dbg	line,	"include\routines_LEVELS.c", 2317; spr_y(player_pos_y);
10126    01:D4DC             	.LL404:
10127                        		__ld.wm		_player_pos_y
         01:D4DC  AD DC 24   			lda.l	_player_pos_y
         01:D4DF  AC DD 24   			ldy.h	_player_pos_y
10128                        		__call		_spr_y.1
         01:D4E2  20 19 E8   			call	_spr_y.1
10129                        	
10130                        		.dbg	line,	"include\routines_LEVELS.c", 2319; spr_set(weapon_id);
10131                        		__ld.umq	_weapon_id
         01:D4E5  AD 26 23   			lda	_weapon_id
10132                        		__call		_spr_set.1
         01:D4E8  20 DD E7   			call	_spr_set.1
10133                        	
10134                        		.dbg	line,	"include\routines_LEVELS.c", 2320; spr_y(player_pos_y+8);
10135                        		__ld.wm		_player_pos_y
         01:D4EB  AD DC 24   			lda.l	_player_pos_y
         01:D4EE  AC DD 24   			ldy.h	_player_pos_y
10136                        		__add.wi	8
         01:D4F1  18         			clc
         01:D4F2  69 08      			adc.l	#8
         01:D4F4  90 01      			bcc	!+
         01:D4F6  C8         			iny
         01:D4F7             	!:
10137                        		__call		_spr_y.1
         01:D4F7  20 19 E8   			call	_spr_y.1
10138                        	
10139                        		.dbg	line,	"include\routines_LEVELS.c", 2321; }
10140                        	
10141                        		.dbg	line,	"include\routines_LEVELS.c", 2324; else if(player_state == STATE_CROUCH)
10142                        		__bra		.LL407
         01:D4FA  4C 70 DB   			bra	.LL407
10143    01:D4FD             	.LL371:
10144                        		__ld.umq	_player_state
         01:D4FD  AD 18 23   			lda	_player_state
10145                        		__equ_b.uiq	7
         01:D500  C9 07      			cmp	#7
         01:D502  F0 01      			beq	!+
         01:D504  18         			clc
         01:D505             	!:
10146                        		__bfalse	.LL408
         01:D505  90 6A      			bcc	.LL408
10147                        	
10148                        		.dbg	line,	"include\routines_LEVELS.c", 2325; {
10149                        	
10150                        		.dbg	line,	"include\routines_LEVELS.c", 2326; recenter_CAMERA();
10151                        		__call		_recenter_CAMERA
         01:D507  20 63 FF   			call	_recenter_CAMERA
10152                        	
10153                        		.dbg	line,	"include\routines_LEVELS.c", 2327; 
10154                        	
10155                        		.dbg	line,	"include\routines_LEVELS.c", 2328; if(player_counter_anim == 1)
10156                        		__ld.umq	_player_counter_anim
         01:D50A  AD 1B 23   			lda	_player_counter_anim
10157                        		__equ_b.uiq	1
         01:D50D  C9 01      			cmp	#1
         01:D50F  F0 01      			beq	!+
         01:D511  18         			clc
         01:D512             	!:
10158                        		__bfalse	.LL409
         01:D512  90 45      			bcc	.LL409
10159                        	
10160                        		.dbg	line,	"include\routines_LEVELS.c", 2329; {
10161                        	
10162                        		.dbg	line,	"include\routines_LEVELS.c", 2330; spr_set(player_id);
10163                        		__ld.umq	_player_id
         01:D514  AD 17 23   			lda	_player_id
10164                        		__call		_spr_set.1
         01:D517  20 DD E7   			call	_spr_set.1
10165                        	
10166                        		.dbg	line,	"include\routines_LEVELS.c", 2331; spr_pattern(PLAYER_CROUCH_VRAM_ADR);
10167                        		__ld.wi		7168
         01:D51A  62         			cla
         01:D51B  A0 1C      			ldy.h	#7168
10168                        		__call		_spr_pattern.1
         01:D51D  20 26 E8   			call	_spr_pattern.1
10169                        	
10170                        		.dbg	line,	"include\routines_LEVELS.c", 2333; spr_set(weapon_id);
10171                        		__ld.umq	_weapon_id
         01:D520  AD 26 23   			lda	_weapon_id
10172                        		__call		_spr_set.1
         01:D523  20 DD E7   			call	_spr_set.1
10173                        	
10174                        		.dbg	line,	"include\routines_LEVELS.c", 2334; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
10175                        		__ld.wi		31808
         01:D526  A9 40      			lda.l	#31808
         01:D528  A0 7C      			ldy.h	#31808
10176                        		__call		_spr_pattern.1
         01:D52A  20 26 E8   			call	_spr_pattern.1
10177                        	
10178                        		.dbg	line,	"include\routines_LEVELS.c", 2335; 
10179                        	
10180                        		.dbg	line,	"include\routines_LEVELS.c", 2336; if(player_axis == AXIS_RIGHT)
10181                        		__not.um	_player_axis
         01:D52D  AD 19 23   			lda	_player_axis
         01:D530  18         			clc
         01:D531  D0 01      			bne	!+
         01:D533  38         			sec
         01:D534             	!:
10182                        		__bfalse	.LL410
         01:D534  90 11      			bcc	.LL410
10183                        	
10184                        		.dbg	line,	"include\routines_LEVELS.c", 2337; {
10185                        	
10186                        		.dbg	line,	"include\routines_LEVELS.c", 2338; spr_x(player_pos_x-1);
10187                        		__ld.wm		_player_pos_x
         01:D536  AD DA 24   			lda.l	_player_pos_x
         01:D539  AC DB 24   			ldy.h	_player_pos_x
10188                        		__sub.wi	1
         01:D53C  38         			sec
         01:D53D  E9 01      			sbc.l	#1
         01:D53F  B0 01      			bcs	!+
         01:D541  88         			dey
         01:D542             	!:
10189                        		__call		_spr_x.1
         01:D542  20 0A E8   			call	_spr_x.1
10190                        	
10191                        		.dbg	line,	"include\routines_LEVELS.c", 2339; }
10192                        	
10193                        		.dbg	line,	"include\routines_LEVELS.c", 2341; else
10194                        		__bra		.LL411
         01:D545  80 0F      			bra	.LL411
10195    01:D547             	.LL410:
10196                        	
10197                        		.dbg	line,	"include\routines_LEVELS.c", 2342; {
10198                        	
10199                        		.dbg	line,	"include\routines_LEVELS.c", 2343; spr_x(player_pos_x+17);
10200                        		__ld.wm		_player_pos_x
         01:D547  AD DA 24   			lda.l	_player_pos_x
         01:D54A  AC DB 24   			ldy.h	_player_pos_x
10201                        		__add.wi	17
         01:D54D  18         			clc
         01:D54E  69 11      			adc.l	#17
         01:D550  90 01      			bcc	!+
         01:D552  C8         			iny
         01:D553             	!:
10202                        		__call		_spr_x.1
         01:D553  20 0A E8   			call	_spr_x.1
10203                        	
10204                        		.dbg	line,	"include\routines_LEVELS.c", 2344; }
10205    01:D556             	.LL411:
10206                        	
10207                        		.dbg	line,	"include\routines_LEVELS.c", 2346; //spr_y(player_pos_y+18);
10208                        	
10209                        		.dbg	line,	"include\routines_LEVELS.c", 2347; 
10210                        	
10211                        		.dbg	line,	"include\routines_LEVELS.c", 2348; player_counter_anim = 0;
10212                        		__st.umiq	0, _player_counter_anim
         01:D556  9C 1B 23   			stz	_player_counter_anim
10213                        	
10214                        		.dbg	line,	"include\routines_LEVELS.c", 2349; }
10215                        	
10216                        		.dbg	line,	"include\routines_LEVELS.c", 2351; spr_set(weapon_id);
10217    01:D559             	.LL409:
10218                        		__ld.umq	_weapon_id
         01:D559  AD 26 23   			lda	_weapon_id
10219                        		__call		_spr_set.1
         01:D55C  20 DD E7   			call	_spr_set.1
10220                        	
10221                        		.dbg	line,	"include\routines_LEVELS.c", 2352; spr_y(player_pos_y+18);
10222                        		__ld.wm		_player_pos_y
         01:D55F  AD DC 24   			lda.l	_player_pos_y
         01:D562  AC DD 24   			ldy.h	_player_pos_y
10223                        		__add.wi	18
         01:D565  18         			clc
         01:D566  69 12      			adc.l	#18
         01:D568  90 01      			bcc	!+
         01:D56A  C8         			iny
         01:D56B             	!:
10224                        		__call		_spr_y.1
         01:D56B  20 19 E8   			call	_spr_y.1
10225                        	
10226                        		.dbg	line,	"include\routines_LEVELS.c", 2353; //recenter_CAMERA();
10227                        	
10228                        		.dbg	line,	"include\routines_LEVELS.c", 2354; }
10229                        	
10230                        		.dbg	line,	"include\routines_LEVELS.c", 2357; else if(player_state == STATE_FALL)
10231                        		__bra		.LL412
         01:D56E  4C 70 DB   			bra	.LL412
10232    01:D571             	.LL408:
10233                        		__ld.umq	_player_state
         01:D571  AD 18 23   			lda	_player_state
10234                        		__equ_b.uiq	9
         01:D574  C9 09      			cmp	#9
         01:D576  F0 01      			beq	!+
         01:D578  18         			clc
         01:D579             	!:
10235                        		__bfalse	.LL413
         01:D579  B0 03 4C B6			bcc	.LL413
         01:D57D  D7          
10236                        	
10237                        		.dbg	line,	"include\routines_LEVELS.c", 2358; {
10238                        	
10239                        		.dbg	line,	"include\routines_LEVELS.c", 2359; unsigned char i, camera_y_move;
10240                        	
10241                        		.dbg	line,	"include\routines_LEVELS.c", 2360; i = 1;
10242                        		__st.umiq	1, __update_PLAYER_end - 6  /* i */
         01:D57E  A9 01      			lda.l	#1
         01:D580  8D 07 23   			sta	__update_PLAYER_end - 6
10243                        	
10244                        		.dbg	line,	"include\routines_LEVELS.c", 2363; spr_set(player_id);
10245                        		__ld.umq	_player_id
         01:D583  AD 17 23   			lda	_player_id
10246                        		__call		_spr_set.1
         01:D586  20 DD E7   			call	_spr_set.1
10247                        	
10248                        		.dbg	line,	"include\routines_LEVELS.c", 2366; //--------------------------------------------------------------------------------------//
10249                        	
10250                        		.dbg	line,	"include\routines_LEVELS.c", 2367; //                                        V MOVE                                        //
10251                        	
10252                        		.dbg	line,	"include\routines_LEVELS.c", 2368; //--------------------------------------------------------------------------------------//
10253                        	
10254                        		.dbg	line,	"include\routines_LEVELS.c", 2370; // UPDATE PLAYER Y POSITION //
10255                        	
10256                        		.dbg	line,	"include\routines_LEVELS.c", 2371; player_pos_y += TABLE_PLAYER_FALL[player_index_fall];
10257                        		__ldx.umq	_player_index_fall
         01:D589  AE 1D 23   			ldx	_player_index_fall
10258                        		__ld.bax	_TABLE_PLAYER_FALL
         01:D58C  BD 40 61   			lda	_TABLE_PLAYER_FALL, x
         01:D58F  C2         			cly
         01:D590  10 01      			bpl	!+
         01:D592  88         			dey
         01:D593             	!:
10259                        		__add_st.wmq	_player_pos_y
         01:D593  18         			clc
         01:D594  6D DC 24   			adc.l	_player_pos_y
         01:D597  8D DC 24   			sta.l	_player_pos_y
         01:D59A  98         			tya
         01:D59B  6D DD 24   			adc.h	_player_pos_y
         01:D59E  8D DD 24   			sta.h	_player_pos_y
10260                        	
10261                        		.dbg	line,	"include\routines_LEVELS.c", 2374; // IF PLAYER GOES BELOW ITS BASE Y POSITION //
10262                        	
10263                        		.dbg	line,	"include\routines_LEVELS.c", 2375; if(player_pos_y >= PLAYER_BASE_Y_POS)
10264                        		__ld.wm		_player_pos_y
         01:D5A1  AD DC 24   			lda.l	_player_pos_y
         01:D5A4  AC DD 24   			ldy.h	_player_pos_y
10265                        		__sge_w.wi	128
         01:D5A7  C9 80      			cmp.l	#128		; Subtract integer from Y:A.
         01:D5A9  98         			tya
         01:D5AA  E9 00      			sbc.h	#128
         01:D5AC  50 02      			bvc	!+
         01:D5AE  49 80      			eor	#$80		; +ve if Y:A >= integer (signed).
         01:D5B0  49 80      	!:		eor	#$80
         01:D5B2  0A         			asl	a
10266                        		__bfalse	.LL414
         01:D5B3  90 45      			bcc	.LL414
10267                        	
10268                        		.dbg	line,	"include\routines_LEVELS.c", 2376; {
10269                        	
10270                        		.dbg	line,	"include\routines_LEVELS.c", 2377; // THE CAMERA MOVES //
10271                        	
10272                        		.dbg	line,	"include\routines_LEVELS.c", 2378; // CALCULATE HOW MANY PIXELS THE CAMERA HAS TO MOVE DOWN //
10273                        	
10274                        		.dbg	line,	"include\routines_LEVELS.c", 2379; camera_y_move = player_pos_y - PLAYER_BASE_Y_POS;
10275                        		__ld.wm		_player_pos_y
         01:D5B5  AD DC 24   			lda.l	_player_pos_y
         01:D5B8  AC DD 24   			ldy.h	_player_pos_y
10276                        		__sub.wi	128
         01:D5BB  38         			sec
         01:D5BC  E9 80      			sbc.l	#128
         01:D5BE  B0 01      			bcs	!+
         01:D5C0  88         			dey
         01:D5C1             	!:
10277                        		__st.umq	__update_PLAYER_end - 7  /* camera_y_move */
         01:D5C1  8D 06 23   			sta	__update_PLAYER_end - 7
10278                        	
10279                        		.dbg	line,	"include\routines_LEVELS.c", 2380; sgx_map_pxl_y += camera_y_move;
10280                        		__ld.um		__update_PLAYER_end - 7  /* camera_y_move */
         01:D5C4  AD 06 23   			lda	__update_PLAYER_end - 7
         01:D5C7  C2         			cly
10281                        		__add_st.wmq	_sgx_map_pxl_y
         01:D5C8  18         			clc
         01:D5C9  6D 99 26   			adc.l	_sgx_map_pxl_y
         01:D5CC  8D 99 26   			sta.l	_sgx_map_pxl_y
         01:D5CF  98         			tya
         01:D5D0  6D 9A 26   			adc.h	_sgx_map_pxl_y
         01:D5D3  8D 9A 26   			sta.h	_sgx_map_pxl_y
10282                        	
10283                        		.dbg	line,	"include\routines_LEVELS.c", 2382; // IF THE CAMERA HAS REACHED ITS MAX (LOWEST) POSITION //
10284                        	
10285                        		.dbg	line,	"include\routines_LEVELS.c", 2383; if(sgx_map_pxl_y > camera_max_y_position)
10286                        		__ld.wm		_sgx_map_pxl_y
         01:D5D6  AD 99 26   			lda.l	_sgx_map_pxl_y
         01:D5D9  AC 9A 26   			ldy.h	_sgx_map_pxl_y
10287                        		__ugt_w.wm	_camera_max_y_position
         01:D5DC  18         			clc			; Subtract memory+1 from Y:A.
         01:D5DD  ED DE 24   			sbc.l	_camera_max_y_position
         01:D5E0  98         			tya
         01:D5E1  ED DF 24   			sbc.h	_camera_max_y_position		; CS if Y:A > memory.
10288                        		__bfalse	.LL415
         01:D5E4  90 0C      			bcc	.LL415
10289                        	
10290                        		.dbg	line,	"include\routines_LEVELS.c", 2384; {
10291                        	
10292                        		.dbg	line,	"include\routines_LEVELS.c", 2385; // THE CAMERA CAN NOT MOVE LOWER //
10293                        	
10294                        		.dbg	line,	"include\routines_LEVELS.c", 2386; sgx_map_pxl_y = camera_max_y_position;
10295                        		__ld.wm		_camera_max_y_position
         01:D5E6  AD DE 24   			lda.l	_camera_max_y_position
         01:D5E9  AC DF 24   			ldy.h	_camera_max_y_position
10296                        		__st.wmq	_sgx_map_pxl_y
         01:D5EC  8D 99 26   			sta.l	_sgx_map_pxl_y
         01:D5EF  8C 9A 26   			sty.h	_sgx_map_pxl_y
10297                        	
10298                        		.dbg	line,	"include\routines_LEVELS.c", 2387; }
10299                        	
10300                        		.dbg	line,	"include\routines_LEVELS.c", 2389; // THE PLAYER STAYS AT ITS BASE Y POSITION //
10301                        	
10302                        		.dbg	line,	"include\routines_LEVELS.c", 2390; player_pos_y = PLAYER_BASE_Y_POS;
10303    01:D5F2             	.LL415:
10304                        		__st.wmiq	128, _player_pos_y
         01:D5F2  A9 80      			lda.l	#128
         01:D5F4  8D DC 24   			sta.l	_player_pos_y
         01:D5F7  9C DD 24   			stz.h	_player_pos_y
10305                        	
10306                        		.dbg	line,	"include\routines_LEVELS.c", 2391; }
10307                        	
10308                        		.dbg	line,	"include\routines_LEVELS.c", 2394; // UPDATE JUMP INDEX IN THE ARRAY //
10309                        	
10310                        		.dbg	line,	"include\routines_LEVELS.c", 2395; // ARRAY MAX ENTRY : 20//
10311                        	
10312                        		.dbg	line,	"include\routines_LEVELS.c", 2396; if(player_index_fall < 20)
10313    01:D5FA             	.LL414:
10314                        		__ld.umq	_player_index_fall
         01:D5FA  AD 1D 23   			lda	_player_index_fall
10315                        		__ult_b.uiq	20
         01:D5FD  C9 14      			cmp	#20		; Subtract integer from A.
         01:D5FF  6A         			ror	a		; CC if A < integer.
         01:D600  49 80      			eor	#$80
         01:D602  2A         			rol	a
10316                        		__bfalse	.LL416
         01:D603  90 03      			bcc	.LL416
10317                        	
10318                        		.dbg	line,	"include\routines_LEVELS.c", 2397; {
10319                        	
10320                        		.dbg	line,	"include\routines_LEVELS.c", 2398; player_index_fall += 1;
10321                        		__add_st.umiq	1, _player_index_fall
         01:D605  EE 1D 23   			inc	_player_index_fall
10322                        	
10323                        		.dbg	line,	"include\routines_LEVELS.c", 2399; }
10324                        	
10325                        		.dbg	line,	"include\routines_LEVELS.c", 2402; check_TILE_DEPTH( 15 , 0);
10326    01:D608             	.LL416:
10327                        		__ld.wi		15
         01:D608  A9 0F      			lda.l	#15
         01:D60A  C2         			cly
10328                        		__pusharg.wr
         01:D60B  A6 8D      			ldx	<__sp
         01:D60D  CA         			dex
         01:D60E  CA         			dex
         01:D60F  95 08      			sta.l	<__stack, x
         01:D611  94 09      			sty.h	<__stack, x
         01:D613  86 8D      			stx	<__sp
10329                        		__ld.wi		0
         01:D615  62         			cla
         01:D616  C2         			cly
10330                        		__pusharg.wr
         01:D617  A6 8D      			ldx	<__sp
         01:D619  CA         			dex
         01:D61A  CA         			dex
         01:D61B  95 08      			sta.l	<__stack, x
         01:D61D  94 09      			sty.h	<__stack, x
         01:D61F  86 8D      			stx	<__sp
10331                        		__call		_check_TILE_DEPTH
         01:D621  20 59 FF   			call	_check_TILE_DEPTH
10332                        	
10333                        		.dbg	line,	"include\routines_LEVELS.c", 2405; if(map_blk_flag == TILE_BG)
10334                        		__ld.umq	_map_blk_flag
         01:D624  AD B8 2B   			lda	_map_blk_flag
10335                        		__equ_b.uiq	1
         01:D627  C9 01      			cmp	#1
         01:D629  F0 01      			beq	!+
         01:D62B  18         			clc
         01:D62C             	!:
10336                        		__bfalse	.LL417
         01:D62C  B0 03 4C E8			bcc	.LL417
         01:D630  D6          
10337                        	
10338                        		.dbg	line,	"include\routines_LEVELS.c", 2406; {
10339                        	
10340                        		.dbg	line,	"include\routines_LEVELS.c", 2407; // CALCULATE HOW MANY PIXELS THE PLAYER MOVED INTO THE GROUND //
10341                        	
10342                        		.dbg	line,	"include\routines_LEVELS.c", 2408; for(i=1; i<11 ; i++ )
10343                        		__st.umiq	1, __update_PLAYER_end - 6  /* i */
         01:D631  A9 01      			lda.l	#1
         01:D633  8D 07 23   			sta	__update_PLAYER_end - 6
10344    01:D636             	.LL418:
10345                        		__ld.umq	__update_PLAYER_end - 6  /* i */
         01:D636  AD 07 23   			lda	__update_PLAYER_end - 6
10346                        		__ult_b.uiq	11
         01:D639  C9 0B      			cmp	#11		; Subtract integer from A.
         01:D63B  6A         			ror	a		; CC if A < integer.
         01:D63C  49 80      			eor	#$80
         01:D63E  2A         			rol	a
10347                        		__btrue		.LL420
         01:D63F  B0 07      			bcs	.LL420
10348                        		__bra		.LL421
         01:D641  80 7D      			bra	.LL421
10349    01:D643             	.LL419:
10350                        		__inc.umq	__update_PLAYER_end - 6  /* i */
         01:D643  EE 07 23   			inc	__update_PLAYER_end - 6
10351                        		__bra		.LL418
         01:D646  80 EE      			bra	.LL418
10352    01:D648             	.LL420:
10353                        	
10354                        		.dbg	line,	"include\routines_LEVELS.c", 2409; {
10355                        	
10356                        		.dbg	line,	"include\routines_LEVELS.c", 2410; check_TILE_DEPTH( 15 , i);//20
10357                        		__ld.wi		15
         01:D648  A9 0F      			lda.l	#15
         01:D64A  C2         			cly
10358                        		__pusharg.wr
         01:D64B  A6 8D      			ldx	<__sp
         01:D64D  CA         			dex
         01:D64E  CA         			dex
         01:D64F  95 08      			sta.l	<__stack, x
         01:D651  94 09      			sty.h	<__stack, x
         01:D653  86 8D      			stx	<__sp
10359                        		__ld.um		__update_PLAYER_end - 6  /* i */
         01:D655  AD 07 23   			lda	__update_PLAYER_end - 6
         01:D658  C2         			cly
10360                        		__pusharg.wr
         01:D659  A6 8D      			ldx	<__sp
         01:D65B  CA         			dex
         01:D65C  CA         			dex
         01:D65D  95 08      			sta.l	<__stack, x
         01:D65F  94 09      			sty.h	<__stack, x
         01:D661  86 8D      			stx	<__sp
10361                        		__call		_check_TILE_DEPTH
         01:D663  20 59 FF   			call	_check_TILE_DEPTH
10362                        	
10363                        		.dbg	line,	"include\routines_LEVELS.c", 2413; if(map_blk_flag == TILE_EMPTY)
10364                        		__not.um	_map_blk_flag
         01:D666  AD B8 2B   			lda	_map_blk_flag
         01:D669  18         			clc
         01:D66A  D0 01      			bne	!+
         01:D66C  38         			sec
         01:D66D             	!:
10365                        		__bfalse	.LL422
         01:D66D  90 D4      			bcc	.LL422
10366                        	
10367                        		.dbg	line,	"include\routines_LEVELS.c", 2414; {
10368                        	
10369                        		.dbg	line,	"include\routines_LEVELS.c", 2415; if(player_pos_y != PLAYER_BASE_Y_POS)
10370                        		__ld.wm		_player_pos_y
         01:D66F  AD DC 24   			lda.l	_player_pos_y
         01:D672  AC DD 24   			ldy.h	_player_pos_y
10371                        		__neq_w.wi	128
         01:D675  38         			sec
         01:D676  49 80      			eor.l	#128
         01:D678  D0 06      			bne	!+
         01:D67A  98         			tya
         01:D67B  49 00      			eor.h	#128
         01:D67D  D0 01      			bne	!+
         01:D67F  18         			clc
         01:D680             	!:
10372                        		__bfalse	.LL423
         01:D680  90 1E      			bcc	.LL423
10373                        	
10374                        		.dbg	line,	"include\routines_LEVELS.c", 2416; {
10375                        	
10376                        		.dbg	line,	"include\routines_LEVELS.c", 2417; player_pos_y -= (i - 1);
10377                        		__ld.um		__update_PLAYER_end - 6  /* i */
         01:D682  AD 07 23   			lda	__update_PLAYER_end - 6
         01:D685  C2         			cly
10378                        		__sub.wi	1
         01:D686  38         			sec
         01:D687  E9 01      			sbc.l	#1
         01:D689  B0 01      			bcs	!+
         01:D68B  88         			dey
         01:D68C             	!:
10379                        		__isub_st.wmq	_player_pos_y
         01:D68C  38         			sec
         01:D68D  49 FF      			eor	#$FF
         01:D68F  6D DC 24   			adc.l	_player_pos_y
         01:D692  8D DC 24   			sta.l	_player_pos_y
         01:D695  98         			tya
         01:D696  49 FF      			eor	#$FF
         01:D698  6D DD 24   			adc.h	_player_pos_y
         01:D69B  8D DD 24   			sta.h	_player_pos_y
10380                        	
10381                        		.dbg	line,	"include\routines_LEVELS.c", 2418; }
10382                        	
10383                        		.dbg	line,	"include\routines_LEVELS.c", 2420; else
10384                        		__bra		.LL424
         01:D69E  80 20      			bra	.LL424
10385    01:D6A0             	.LL423:
10386                        	
10387                        		.dbg	line,	"include\routines_LEVELS.c", 2421; {
10388                        	
10389                        		.dbg	line,	"include\routines_LEVELS.c", 2422; sgx_map_pxl_y -= (i - 1);
10390                        		__ld.um		__update_PLAYER_end - 6  /* i */
         01:D6A0  AD 07 23   			lda	__update_PLAYER_end - 6
         01:D6A3  C2         			cly
10391                        		__sub.wi	1
         01:D6A4  38         			sec
         01:D6A5  E9 01      			sbc.l	#1
         01:D6A7  B0 01      			bcs	!+
         01:D6A9  88         			dey
         01:D6AA             	!:
10392                        		__isub_st.wmq	_sgx_map_pxl_y
         01:D6AA  38         			sec
         01:D6AB  49 FF      			eor	#$FF
         01:D6AD  6D 99 26   			adc.l	_sgx_map_pxl_y
         01:D6B0  8D 99 26   			sta.l	_sgx_map_pxl_y
         01:D6B3  98         			tya
         01:D6B4  49 FF      			eor	#$FF
         01:D6B6  6D 9A 26   			adc.h	_sgx_map_pxl_y
         01:D6B9  8D 9A 26   			sta.h	_sgx_map_pxl_y
10393                        	
10394                        		.dbg	line,	"include\routines_LEVELS.c", 2423; }
10395    01:D6BC             	.LL424	.alias		.LL421
10396                        	
10397                        		.dbg	line,	"include\routines_LEVELS.c", 2426; break;
10398                        		__bra		.LL421
         01:D6BC  80 02      			bra	.LL421
10399                        	
10400                        		.dbg	line,	"include\routines_LEVELS.c", 2427; }
10401                        	
10402                        		.dbg	line,	"include\routines_LEVELS.c", 2429; }
10403    01:D6BE             	.LL422	.alias		.LL419
10404                        		__bra		.LL419
         01:D6BE  80 83      			bra	.LL419
10405    01:D6C0             	.LL421:
10406                        	
10407                        		.dbg	line,	"include\routines_LEVELS.c", 2431; spr_y(player_pos_y);
10408                        		__ld.wm		_player_pos_y
         01:D6C0  AD DC 24   			lda.l	_player_pos_y
         01:D6C3  AC DD 24   			ldy.h	_player_pos_y
10409                        		__call		_spr_y.1
         01:D6C6  20 19 E8   			call	_spr_y.1
10410                        	
10411                        		.dbg	line,	"include\routines_LEVELS.c", 2433; player_counter_anim = 1;
10412                        		__st.umiq	1, _player_counter_anim
         01:D6C9  A9 01      			lda.l	#1
         01:D6CB  8D 1B 23   			sta	_player_counter_anim
10413                        	
10414                        		.dbg	line,	"include\routines_LEVELS.c", 2434; player_index_jump = 0;
10415                        		__st.umiq	0, _player_index_jump
         01:D6CE  9C 1C 23   			stz	_player_index_jump
10416                        	
10417                        		.dbg	line,	"include\routines_LEVELS.c", 2435; player_index_fall = 0;
10418                        		__st.umiq	0, _player_index_fall
         01:D6D1  9C 1D 23   			stz	_player_index_fall
10419                        	
10420                        		.dbg	line,	"include\routines_LEVELS.c", 2436; jump_ladder = FALSE;
10421                        		__st.umiq	0, _jump_ladder
         01:D6D4  9C 21 23   			stz	_jump_ladder
10422                        	
10423                        		.dbg	line,	"include\routines_LEVELS.c", 2437; fall_ladder = FALSE;
10424                        		__st.umiq	0, _fall_ladder
         01:D6D7  9C 23 23   			stz	_fall_ladder
10425                        	
10426                        		.dbg	line,	"include\routines_LEVELS.c", 2438; hit_wall = FALSE;
10427                        		__st.umiq	0, _hit_wall
         01:D6DA  9C 24 23   			stz	_hit_wall
10428                        	
10429                        		.dbg	line,	"include\routines_LEVELS.c", 2439; jump_max_index = 34;
10430                        		__st.umiq	34, _jump_max_index
         01:D6DD  A9 22      			lda.l	#34
         01:D6DF  8D 22 23   			sta	_jump_max_index
10431                        	
10432                        		.dbg	line,	"include\routines_LEVELS.c", 2440; player_state = STATE_IDLE;
10433                        		__st.umiq	0, _player_state
         01:D6E2  9C 18 23   			stz	_player_state
10434                        	
10435                        		.dbg	line,	"include\routines_LEVELS.c", 2441; return;
10436                        		__bra		.LL230
         01:D6E5  4C 70 DB   			bra	.LL230
10437                        	
10438                        		.dbg	line,	"include\routines_LEVELS.c", 2442; }
10439                        	
10440                        		.dbg	line,	"include\routines_LEVELS.c", 2445; check_BG( 16 , 16 );
10441    01:D6E8             	.LL417:
10442                        		__ld.wi		16
         01:D6E8  A9 10      			lda.l	#16
         01:D6EA  C2         			cly
10443                        		__pusharg.wr
         01:D6EB  A6 8D      			ldx	<__sp
         01:D6ED  CA         			dex
         01:D6EE  CA         			dex
         01:D6EF  95 08      			sta.l	<__stack, x
         01:D6F1  94 09      			sty.h	<__stack, x
         01:D6F3  86 8D      			stx	<__sp
10444                        		__ld.wi		16
         01:D6F5  A9 10      			lda.l	#16
         01:D6F7  C2         			cly
10445                        		__pusharg.wr
         01:D6F8  A6 8D      			ldx	<__sp
         01:D6FA  CA         			dex
         01:D6FB  CA         			dex
         01:D6FC  95 08      			sta.l	<__stack, x
         01:D6FE  94 09      			sty.h	<__stack, x
         01:D700  86 8D      			stx	<__sp
10446                        		__call		_check_BG
         01:D702  20 6D FF   			call	_check_BG
10447                        	
10448                        		.dbg	line,	"include\routines_LEVELS.c", 2447; // IF PLAYER HITS THE LADDER //
10449                        	
10450                        		.dbg	line,	"include\routines_LEVELS.c", 2448; if(map_blk_flag == TILE_LADDER)
10451                        		__ld.umq	_map_blk_flag
         01:D705  AD B8 2B   			lda	_map_blk_flag
10452                        		__equ_b.uiq	2
         01:D708  C9 02      			cmp	#2
         01:D70A  F0 01      			beq	!+
         01:D70C  18         			clc
         01:D70D             	!:
10453                        		__bfalse	.LL425
         01:D70D  90 6F      			bcc	.LL425
10454                        	
10455                        		.dbg	line,	"include\routines_LEVELS.c", 2449; {
10456                        	
10457                        		.dbg	line,	"include\routines_LEVELS.c", 2450; // CAMERA GOES 8 PX BACKWARD //
10458                        	
10459                        		.dbg	line,	"include\routines_LEVELS.c", 2451; sgx_map_pxl_x = ( (sgx_map_pxl_x >> 3) << 3 );
10460                        		__ld.wm		_sgx_map_pxl_x
         01:D70F  AD 97 26   			lda.l	_sgx_map_pxl_x
         01:D712  AC 98 26   			ldy.h	_sgx_map_pxl_x
10461                        		__lsr.wi	3
         01:D715  84 00      			sty	__temp
         01:D717  20 3A E2   			jsr	lsrw3
10462                        		__asl.wi	3
         01:D71A  84 00      			sty	__temp
         01:D71C  20 D7 E1   			jsr	aslw3
10463                        		__st.wmq	_sgx_map_pxl_x
         01:D71F  8D 97 26   			sta.l	_sgx_map_pxl_x
         01:D722  8C 98 26   			sty.h	_sgx_map_pxl_x
10464                        	
10465                        		.dbg	line,	"include\routines_LEVELS.c", 2453; // SO WE UPDATE THE MAP //
10466                        	
10467                        		.dbg	line,	"include\routines_LEVELS.c", 2454; sgx_scroll_map();
10468                        		__call		_sgx_scroll_map
         01:D725  20 81 FF   			call	_sgx_scroll_map
10469                        	
10470                        		.dbg	line,	"include\routines_LEVELS.c", 2456; // CHECK IF THE PLAYER STANDS RIGHT TO THE LADDER //
10471                        	
10472                        		.dbg	line,	"include\routines_LEVELS.c", 2457; check_BG( 31 , 16 );
10473                        		__ld.wi		31
         01:D728  A9 1F      			lda.l	#31
         01:D72A  C2         			cly
10474                        		__pusharg.wr
         01:D72B  A6 8D      			ldx	<__sp
         01:D72D  CA         			dex
         01:D72E  CA         			dex
         01:D72F  95 08      			sta.l	<__stack, x
         01:D731  94 09      			sty.h	<__stack, x
         01:D733  86 8D      			stx	<__sp
10475                        		__ld.wi		16
         01:D735  A9 10      			lda.l	#16
         01:D737  C2         			cly
10476                        		__pusharg.wr
         01:D738  A6 8D      			ldx	<__sp
         01:D73A  CA         			dex
         01:D73B  CA         			dex
         01:D73C  95 08      			sta.l	<__stack, x
         01:D73E  94 09      			sty.h	<__stack, x
         01:D740  86 8D      			stx	<__sp
10477                        		__call		_check_BG
         01:D742  20 6D FF   			call	_check_BG
10478                        	
10479                        		.dbg	line,	"include\routines_LEVELS.c", 2459; if(map_blk_flag == TILE_LADDER)
10480                        		__ld.umq	_map_blk_flag
         01:D745  AD B8 2B   			lda	_map_blk_flag
10481                        		__equ_b.uiq	2
         01:D748  C9 02      			cmp	#2
         01:D74A  F0 01      			beq	!+
         01:D74C  18         			clc
         01:D74D             	!:
10482                        		__bfalse	.LL426
         01:D74D  90 0E      			bcc	.LL426
10483                        	
10484                        		.dbg	line,	"include\routines_LEVELS.c", 2460; {
10485                        	
10486                        		.dbg	line,	"include\routines_LEVELS.c", 2461; sgx_map_pxl_x += 8;
10487                        		__add_st.wmiq	8, _sgx_map_pxl_x
         01:D74F  18         			clc
         01:D750  AD 97 26   			lda.l	_sgx_map_pxl_x
         01:D753  69 08      			adc.l	#8
         01:D755  8D 97 26   			sta.l	_sgx_map_pxl_x
         01:D758  90 03      			bcc	!+
         01:D75A  EE 98 26   			inc.h	_sgx_map_pxl_x
         01:D75D             	!:
10488                        	
10489                        		.dbg	line,	"include\routines_LEVELS.c", 2462; }
10490                        	
10491                        		.dbg	line,	"include\routines_LEVELS.c", 2464; spr_pattern(PLAYER_HANG_VRAM_ADR);
10492    01:D75D             	.LL426:
10493                        		__ld.wi		7424
         01:D75D  62         			cla
         01:D75E  A0 1D      			ldy.h	#7424
10494                        		__call		_spr_pattern.1
         01:D760  20 26 E8   			call	_spr_pattern.1
10495                        	
10496                        		.dbg	line,	"include\routines_LEVELS.c", 2465; player_counter_anim = 0;//1
10497                        		__st.umiq	0, _player_counter_anim
         01:D763  9C 1B 23   			stz	_player_counter_anim
10498                        	
10499                        		.dbg	line,	"include\routines_LEVELS.c", 2466; player_index_jump = 0;
10500                        		__st.umiq	0, _player_index_jump
         01:D766  9C 1C 23   			stz	_player_index_jump
10501                        	
10502                        		.dbg	line,	"include\routines_LEVELS.c", 2467; player_index_fall = 0;
10503                        		__st.umiq	0, _player_index_fall
         01:D769  9C 1D 23   			stz	_player_index_fall
10504                        	
10505                        		.dbg	line,	"include\routines_LEVELS.c", 2468; jump_ladder = TRUE;
10506                        		__st.umiq	1, _jump_ladder
         01:D76C  A9 01      			lda.l	#1
         01:D76E  8D 21 23   			sta	_jump_ladder
10507                        	
10508                        		.dbg	line,	"include\routines_LEVELS.c", 2469; jump_max_index = 29;
10509                        		__st.umiq	29, _jump_max_index
         01:D771  A9 1D      			lda.l	#29
         01:D773  8D 22 23   			sta	_jump_max_index
10510                        	
10511                        		.dbg	line,	"include\routines_LEVELS.c", 2470; player_state = STATE_HANG;
10512                        		__st.umiq	10, _player_state
         01:D776  A9 0A      			lda.l	#10
         01:D778  8D 18 23   			sta	_player_state
10513                        	
10514                        		.dbg	line,	"include\routines_LEVELS.c", 2471; return;
10515                        		__bra		.LL230
         01:D77B  4C 70 DB   			bra	.LL230
10516                        	
10517                        		.dbg	line,	"include\routines_LEVELS.c", 2472; }
10518                        	
10519                        		.dbg	line,	"include\routines_LEVELS.c", 2474; spr_y(player_pos_y);
10520    01:D77E             	.LL425:
10521                        		__ld.wm		_player_pos_y
         01:D77E  AD DC 24   			lda.l	_player_pos_y
         01:D781  AC DD 24   			ldy.h	_player_pos_y
10522                        		__call		_spr_y.1
         01:D784  20 19 E8   			call	_spr_y.1
10523                        	
10524                        		.dbg	line,	"include\routines_LEVELS.c", 2476; spr_set(weapon_id);
10525                        		__ld.umq	_weapon_id
         01:D787  AD 26 23   			lda	_weapon_id
10526                        		__call		_spr_set.1
         01:D78A  20 DD E7   			call	_spr_set.1
10527                        	
10528                        		.dbg	line,	"include\routines_LEVELS.c", 2478; if(fall_ladder == TRUE || hit_wall == TRUE)
10529                        		__ld.umq	_fall_ladder
         01:D78D  AD 23 23   			lda	_fall_ladder
10530                        		__equ_b.uiq	1
         01:D790  C9 01      			cmp	#1
         01:D792  F0 01      			beq	!+
         01:D794  18         			clc
         01:D795             	!:
10531                        		__btrue		.LL428
         01:D795  B0 08      			bcs	.LL428
10532                        		__ld.umq	_hit_wall
         01:D797  AD 24 23   			lda	_hit_wall
10533                        		__equ_b.uiq	1
         01:D79A  C9 01      			cmp	#1
         01:D79C  F0 01      			beq	!+
         01:D79E  18         			clc
         01:D79F             	!:
10534    01:D79F             	.LL428:
10535                        		__bfalse	.LL427
         01:D79F  B0 03 4C 70			bcc	.LL427
         01:D7A3  DB          
10536                        	
10537                        		.dbg	line,	"include\routines_LEVELS.c", 2479; {
10538                        	
10539                        		.dbg	line,	"include\routines_LEVELS.c", 2480; spr_y(player_pos_y+8);
10540                        		__ld.wm		_player_pos_y
         01:D7A4  AD DC 24   			lda.l	_player_pos_y
         01:D7A7  AC DD 24   			ldy.h	_player_pos_y
10541                        		__add.wi	8
         01:D7AA  18         			clc
         01:D7AB  69 08      			adc.l	#8
         01:D7AD  90 01      			bcc	!+
         01:D7AF  C8         			iny
         01:D7B0             	!:
10542                        		__call		_spr_y.1
         01:D7B0  20 19 E8   			call	_spr_y.1
10543                        	
10544                        		.dbg	line,	"include\routines_LEVELS.c", 2481; }
10545                        	
10546                        		.dbg	line,	"include\routines_LEVELS.c", 2482; }
10547    01:D7B3             	.LL427	.alias		.LL429
10548                        	
10549                        		.dbg	line,	"include\routines_LEVELS.c", 2485; else if(player_state == STATE_HANG)
10550                        		__bra		.LL429
         01:D7B3  4C 70 DB   			bra	.LL429
10551    01:D7B6             	.LL413:
10552                        		__ld.umq	_player_state
         01:D7B6  AD 18 23   			lda	_player_state
10553                        		__equ_b.uiq	10
         01:D7B9  C9 0A      			cmp	#10
         01:D7BB  F0 01      			beq	!+
         01:D7BD  18         			clc
         01:D7BE             	!:
10554                        		__bfalse	.LL430
         01:D7BE  90 5A      			bcc	.LL430
10555                        	
10556                        		.dbg	line,	"include\routines_LEVELS.c", 2486; {
10557                        	
10558                        		.dbg	line,	"include\routines_LEVELS.c", 2487; recenter_CAMERA();
10559                        		__call		_recenter_CAMERA
         01:D7C0  20 63 FF   			call	_recenter_CAMERA
10560                        	
10561                        		.dbg	line,	"include\routines_LEVELS.c", 2489; if(player_attack == FALSE)
10562                        		__not.um	_player_attack
         01:D7C3  AD 20 23   			lda	_player_attack
         01:D7C6  18         			clc
         01:D7C7  D0 01      			bne	!+
         01:D7C9  38         			sec
         01:D7CA             	!:
10563                        		__bfalse	.LL431
         01:D7CA  B0 03 4C 70			bcc	.LL431
         01:D7CE  DB          
10564                        	
10565                        		.dbg	line,	"include\routines_LEVELS.c", 2490; {
10566                        	
10567                        		.dbg	line,	"include\routines_LEVELS.c", 2491; spr_set(weapon_id);
10568                        		__ld.umq	_weapon_id
         01:D7CF  AD 26 23   			lda	_weapon_id
10569                        		__call		_spr_set.1
         01:D7D2  20 DD E7   			call	_spr_set.1
10570                        	
10571                        		.dbg	line,	"include\routines_LEVELS.c", 2492; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
10572                        		__ld.wi		31808
         01:D7D5  A9 40      			lda.l	#31808
         01:D7D7  A0 7C      			ldy.h	#31808
10573                        		__call		_spr_pattern.1
         01:D7D9  20 26 E8   			call	_spr_pattern.1
10574                        	
10575                        		.dbg	line,	"include\routines_LEVELS.c", 2493; spr_y(player_pos_y+5);
10576                        		__ld.wm		_player_pos_y
         01:D7DC  AD DC 24   			lda.l	_player_pos_y
         01:D7DF  AC DD 24   			ldy.h	_player_pos_y
10577                        		__add.wi	5
         01:D7E2  18         			clc
         01:D7E3  69 05      			adc.l	#5
         01:D7E5  90 01      			bcc	!+
         01:D7E7  C8         			iny
         01:D7E8             	!:
10578                        		__call		_spr_y.1
         01:D7E8  20 19 E8   			call	_spr_y.1
10579                        	
10580                        		.dbg	line,	"include\routines_LEVELS.c", 2495; if(player_axis == AXIS_RIGHT)
10581                        		__not.um	_player_axis
         01:D7EB  AD 19 23   			lda	_player_axis
         01:D7EE  18         			clc
         01:D7EF  D0 01      			bne	!+
         01:D7F1  38         			sec
         01:D7F2             	!:
10582                        		__bfalse	.LL432
         01:D7F2  90 11      			bcc	.LL432
10583                        	
10584                        		.dbg	line,	"include\routines_LEVELS.c", 2496; {
10585                        	
10586                        		.dbg	line,	"include\routines_LEVELS.c", 2497; spr_x(player_pos_x+17);
10587                        		__ld.wm		_player_pos_x
         01:D7F4  AD DA 24   			lda.l	_player_pos_x
         01:D7F7  AC DB 24   			ldy.h	_player_pos_x
10588                        		__add.wi	17
         01:D7FA  18         			clc
         01:D7FB  69 11      			adc.l	#17
         01:D7FD  90 01      			bcc	!+
         01:D7FF  C8         			iny
         01:D800             	!:
10589                        		__call		_spr_x.1
         01:D800  20 0A E8   			call	_spr_x.1
10590                        	
10591                        		.dbg	line,	"include\routines_LEVELS.c", 2498; }
10592                        	
10593                        		.dbg	line,	"include\routines_LEVELS.c", 2500; else
10594                        		__bra		.LL433
         01:D803  80 0F      			bra	.LL433
10595    01:D805             	.LL432:
10596                        	
10597                        		.dbg	line,	"include\routines_LEVELS.c", 2501; {
10598                        	
10599                        		.dbg	line,	"include\routines_LEVELS.c", 2502; spr_x(player_pos_x-2);
10600                        		__ld.wm		_player_pos_x
         01:D805  AD DA 24   			lda.l	_player_pos_x
         01:D808  AC DB 24   			ldy.h	_player_pos_x
10601                        		__sub.wi	2
         01:D80B  38         			sec
         01:D80C  E9 02      			sbc.l	#2
         01:D80E  B0 01      			bcs	!+
         01:D810  88         			dey
         01:D811             	!:
10602                        		__call		_spr_x.1
         01:D811  20 0A E8   			call	_spr_x.1
10603                        	
10604                        		.dbg	line,	"include\routines_LEVELS.c", 2503; }
10605    01:D814             	.LL433:
10606                        	
10607                        		.dbg	line,	"include\routines_LEVELS.c", 2504; 
10608                        	
10609                        		.dbg	line,	"include\routines_LEVELS.c", 2505; player_counter_anim = 0;
10610                        		__st.umiq	0, _player_counter_anim
         01:D814  9C 1B 23   			stz	_player_counter_anim
10611                        	
10612                        		.dbg	line,	"include\routines_LEVELS.c", 2506; }
10613                        	
10614                        		.dbg	line,	"include\routines_LEVELS.c", 2507; }
10615    01:D817             	.LL431	.alias		.LL434
10616                        	
10617                        		.dbg	line,	"include\routines_LEVELS.c", 2510; else if(player_state == STATE_CLIMB_UP)
10618                        		__bra		.LL434
         01:D817  4C 70 DB   			bra	.LL434
10619    01:D81A             	.LL430:
10620                        		__ld.umq	_player_state
         01:D81A  AD 18 23   			lda	_player_state
10621                        		__equ_b.uiq	11
         01:D81D  C9 0B      			cmp	#11
         01:D81F  F0 01      			beq	!+
         01:D821  18         			clc
         01:D822             	!:
10622                        		__bfalse	.LL435
         01:D822  B0 03 4C FC			bcc	.LL435
         01:D826  D8          
10623                        	
10624                        		.dbg	line,	"include\routines_LEVELS.c", 2511; {
10625                        	
10626                        		.dbg	line,	"include\routines_LEVELS.c", 2512; if(player_counter_anim == 0)
10627                        		__not.um	_player_counter_anim
         01:D827  AD 1B 23   			lda	_player_counter_anim
         01:D82A  18         			clc
         01:D82B  D0 01      			bne	!+
         01:D82D  38         			sec
         01:D82E             	!:
10628                        		__bfalse	.LL436
         01:D82E  90 0F      			bcc	.LL436
10629                        	
10630                        		.dbg	line,	"include\routines_LEVELS.c", 2513; {
10631                        	
10632                        		.dbg	line,	"include\routines_LEVELS.c", 2514; spr_set(player_id);
10633                        		__ld.umq	_player_id
         01:D830  AD 17 23   			lda	_player_id
10634                        		__call		_spr_set.1
         01:D833  20 DD E7   			call	_spr_set.1
10635                        	
10636                        		.dbg	line,	"include\routines_LEVELS.c", 2515; spr_pattern(PLAYER_CLIMB_1_VRAM_ADR); 
10637                        		__ld.wi		7680
         01:D836  62         			cla
         01:D837  A0 1E      			ldy.h	#7680
10638                        		__call		_spr_pattern.1
         01:D839  20 26 E8   			call	_spr_pattern.1
10639                        	
10640                        		.dbg	line,	"include\routines_LEVELS.c", 2516; }
10641                        	
10642                        		.dbg	line,	"include\routines_LEVELS.c", 2518; else if(player_counter_anim == 2)
10643                        		__bra		.LL437
         01:D83C  4C E6 D8   			bra	.LL437
10644    01:D83F             	.LL436:
10645                        		__ld.umq	_player_counter_anim
         01:D83F  AD 1B 23   			lda	_player_counter_anim
10646                        		__equ_b.uiq	2
         01:D842  C9 02      			cmp	#2
         01:D844  F0 01      			beq	!+
         01:D846  18         			clc
         01:D847             	!:
10647                        		__bfalse	.LL438
         01:D847  90 0F      			bcc	.LL438
10648                        	
10649                        		.dbg	line,	"include\routines_LEVELS.c", 2519; {
10650                        	
10651                        		.dbg	line,	"include\routines_LEVELS.c", 2520; spr_set(player_id);
10652                        		__ld.umq	_player_id
         01:D849  AD 17 23   			lda	_player_id
10653                        		__call		_spr_set.1
         01:D84C  20 DD E7   			call	_spr_set.1
10654                        	
10655                        		.dbg	line,	"include\routines_LEVELS.c", 2521; spr_pattern(PLAYER_CLIMB_2_VRAM_ADR); 
10656                        		__ld.wi		7936
         01:D84F  62         			cla
         01:D850  A0 1F      			ldy.h	#7936
10657                        		__call		_spr_pattern.1
         01:D852  20 26 E8   			call	_spr_pattern.1
10658                        	
10659                        		.dbg	line,	"include\routines_LEVELS.c", 2522; }
10660                        	
10661                        		.dbg	line,	"include\routines_LEVELS.c", 2524; else if(player_counter_anim == 5)
10662                        		__bra		.LL439
         01:D855  4C E6 D8   			bra	.LL439
10663    01:D858             	.LL438:
10664                        		__ld.umq	_player_counter_anim
         01:D858  AD 1B 23   			lda	_player_counter_anim
10665                        		__equ_b.uiq	5
         01:D85B  C9 05      			cmp	#5
         01:D85D  F0 01      			beq	!+
         01:D85F  18         			clc
         01:D860             	!:
10666                        		__bfalse	.LL440
         01:D860  90 0E      			bcc	.LL440
10667                        	
10668                        		.dbg	line,	"include\routines_LEVELS.c", 2525; {
10669                        	
10670                        		.dbg	line,	"include\routines_LEVELS.c", 2526; spr_set(player_id);
10671                        		__ld.umq	_player_id
         01:D862  AD 17 23   			lda	_player_id
10672                        		__call		_spr_set.1
         01:D865  20 DD E7   			call	_spr_set.1
10673                        	
10674                        		.dbg	line,	"include\routines_LEVELS.c", 2527; spr_pattern(PLAYER_CLIMB_3_VRAM_ADR); 
10675                        		__ld.wi		8192
         01:D868  62         			cla
         01:D869  A0 20      			ldy.h	#8192
10676                        		__call		_spr_pattern.1
         01:D86B  20 26 E8   			call	_spr_pattern.1
10677                        	
10678                        		.dbg	line,	"include\routines_LEVELS.c", 2528; }
10679                        	
10680                        		.dbg	line,	"include\routines_LEVELS.c", 2530; else if(player_counter_anim == 8)
10681                        		__bra		.LL441
         01:D86E  80 76      			bra	.LL441
10682    01:D870             	.LL440:
10683                        		__ld.umq	_player_counter_anim
         01:D870  AD 1B 23   			lda	_player_counter_anim
10684                        		__equ_b.uiq	8
         01:D873  C9 08      			cmp	#8
         01:D875  F0 01      			beq	!+
         01:D877  18         			clc
         01:D878             	!:
10685                        		__bfalse	.LL442
         01:D878  90 0E      			bcc	.LL442
10686                        	
10687                        		.dbg	line,	"include\routines_LEVELS.c", 2531; {
10688                        	
10689                        		.dbg	line,	"include\routines_LEVELS.c", 2532; spr_set(player_id);
10690                        		__ld.umq	_player_id
         01:D87A  AD 17 23   			lda	_player_id
10691                        		__call		_spr_set.1
         01:D87D  20 DD E7   			call	_spr_set.1
10692                        	
10693                        		.dbg	line,	"include\routines_LEVELS.c", 2533; spr_pattern(PLAYER_CLIMB_4_VRAM_ADR); 
10694                        		__ld.wi		8448
         01:D880  62         			cla
         01:D881  A0 21      			ldy.h	#8448
10695                        		__call		_spr_pattern.1
         01:D883  20 26 E8   			call	_spr_pattern.1
10696                        	
10697                        		.dbg	line,	"include\routines_LEVELS.c", 2534; }
10698                        	
10699                        		.dbg	line,	"include\routines_LEVELS.c", 2536; else if(player_counter_anim == 11)
10700                        		__bra		.LL443
         01:D886  80 5E      			bra	.LL443
10701    01:D888             	.LL442:
10702                        		__ld.umq	_player_counter_anim
         01:D888  AD 1B 23   			lda	_player_counter_anim
10703                        		__equ_b.uiq	11
         01:D88B  C9 0B      			cmp	#11
         01:D88D  F0 01      			beq	!+
         01:D88F  18         			clc
         01:D890             	!:
10704                        		__bfalse	.LL444
         01:D890  90 0E      			bcc	.LL444
10705                        	
10706                        		.dbg	line,	"include\routines_LEVELS.c", 2537; {
10707                        	
10708                        		.dbg	line,	"include\routines_LEVELS.c", 2538; spr_set(player_id);
10709                        		__ld.umq	_player_id
         01:D892  AD 17 23   			lda	_player_id
10710                        		__call		_spr_set.1
         01:D895  20 DD E7   			call	_spr_set.1
10711                        	
10712                        		.dbg	line,	"include\routines_LEVELS.c", 2539; spr_pattern(PLAYER_CLIMB_5_VRAM_ADR); 
10713                        		__ld.wi		8704
         01:D898  62         			cla
         01:D899  A0 22      			ldy.h	#8704
10714                        		__call		_spr_pattern.1
         01:D89B  20 26 E8   			call	_spr_pattern.1
10715                        	
10716                        		.dbg	line,	"include\routines_LEVELS.c", 2540; }
10717                        	
10718                        		.dbg	line,	"include\routines_LEVELS.c", 2542; else if(player_counter_anim == 14)
10719                        		__bra		.LL445
         01:D89E  80 46      			bra	.LL445
10720    01:D8A0             	.LL444:
10721                        		__ld.umq	_player_counter_anim
         01:D8A0  AD 1B 23   			lda	_player_counter_anim
10722                        		__equ_b.uiq	14
         01:D8A3  C9 0E      			cmp	#14
         01:D8A5  F0 01      			beq	!+
         01:D8A7  18         			clc
         01:D8A8             	!:
10723                        		__bfalse	.LL446
         01:D8A8  90 0E      			bcc	.LL446
10724                        	
10725                        		.dbg	line,	"include\routines_LEVELS.c", 2543; {
10726                        	
10727                        		.dbg	line,	"include\routines_LEVELS.c", 2544; spr_set(player_id);
10728                        		__ld.umq	_player_id
         01:D8AA  AD 17 23   			lda	_player_id
10729                        		__call		_spr_set.1
         01:D8AD  20 DD E7   			call	_spr_set.1
10730                        	
10731                        		.dbg	line,	"include\routines_LEVELS.c", 2545; spr_pattern(PLAYER_CLIMB_6_VRAM_ADR); 
10732                        		__ld.wi		8960
         01:D8B0  62         			cla
         01:D8B1  A0 23      			ldy.h	#8960
10733                        		__call		_spr_pattern.1
         01:D8B3  20 26 E8   			call	_spr_pattern.1
10734                        	
10735                        		.dbg	line,	"include\routines_LEVELS.c", 2546; }
10736                        	
10737                        		.dbg	line,	"include\routines_LEVELS.c", 2548; else if(player_counter_anim == 17)
10738                        		__bra		.LL447
         01:D8B6  80 2E      			bra	.LL447
10739    01:D8B8             	.LL446:
10740                        		__ld.umq	_player_counter_anim
         01:D8B8  AD 1B 23   			lda	_player_counter_anim
10741                        		__equ_b.uiq	17
         01:D8BB  C9 11      			cmp	#17
         01:D8BD  F0 01      			beq	!+
         01:D8BF  18         			clc
         01:D8C0             	!:
10742                        		__bfalse	.LL448
         01:D8C0  90 0E      			bcc	.LL448
10743                        	
10744                        		.dbg	line,	"include\routines_LEVELS.c", 2549; {
10745                        	
10746                        		.dbg	line,	"include\routines_LEVELS.c", 2550; spr_set(player_id);
10747                        		__ld.umq	_player_id
         01:D8C2  AD 17 23   			lda	_player_id
10748                        		__call		_spr_set.1
         01:D8C5  20 DD E7   			call	_spr_set.1
10749                        	
10750                        		.dbg	line,	"include\routines_LEVELS.c", 2551; spr_pattern(PLAYER_CLIMB_3_VRAM_ADR); 
10751                        		__ld.wi		8192
         01:D8C8  62         			cla
         01:D8C9  A0 20      			ldy.h	#8192
10752                        		__call		_spr_pattern.1
         01:D8CB  20 26 E8   			call	_spr_pattern.1
10753                        	
10754                        		.dbg	line,	"include\routines_LEVELS.c", 2552; }
10755                        	
10756                        		.dbg	line,	"include\routines_LEVELS.c", 2554; else if(player_counter_anim == 20)
10757                        		__bra		.LL449
         01:D8CE  80 16      			bra	.LL449
10758    01:D8D0             	.LL448:
10759                        		__ld.umq	_player_counter_anim
         01:D8D0  AD 1B 23   			lda	_player_counter_anim
10760                        		__equ_b.uiq	20
         01:D8D3  C9 14      			cmp	#20
         01:D8D5  F0 01      			beq	!+
         01:D8D7  18         			clc
         01:D8D8             	!:
10761                        		__bfalse	.LL450
         01:D8D8  90 0C      			bcc	.LL450
10762                        	
10763                        		.dbg	line,	"include\routines_LEVELS.c", 2555; {
10764                        	
10765                        		.dbg	line,	"include\routines_LEVELS.c", 2556; spr_set(player_id);
10766                        		__ld.umq	_player_id
         01:D8DA  AD 17 23   			lda	_player_id
10767                        		__call		_spr_set.1
         01:D8DD  20 DD E7   			call	_spr_set.1
10768                        	
10769                        		.dbg	line,	"include\routines_LEVELS.c", 2557; spr_pattern(PLAYER_CLIMB_2_VRAM_ADR); 
10770                        		__ld.wi		7936
         01:D8E0  62         			cla
         01:D8E1  A0 1F      			ldy.h	#7936
10771                        		__call		_spr_pattern.1
         01:D8E3  20 26 E8   			call	_spr_pattern.1
10772                        	
10773                        		.dbg	line,	"include\routines_LEVELS.c", 2558; }
10774                        	
10775                        		.dbg	line,	"include\routines_LEVELS.c", 2561; player_counter_anim += 1;
10776    01:D8E6             	.LL450:
10777    01:D8E6             	.LL449:
10778    01:D8E6             	.LL447:
10779    01:D8E6             	.LL445:
10780    01:D8E6             	.LL443:
10781    01:D8E6             	.LL441:
10782    01:D8E6             	.LL439:
10783    01:D8E6             	.LL437:
10784                        		__add_st.umiq	1, _player_counter_anim
         01:D8E6  EE 1B 23   			inc	_player_counter_anim
10785                        	
10786                        		.dbg	line,	"include\routines_LEVELS.c", 2563; if(player_counter_anim == 22)
10787                        		__ld.umq	_player_counter_anim
         01:D8E9  AD 1B 23   			lda	_player_counter_anim
10788                        		__equ_b.uiq	22
         01:D8EC  C9 16      			cmp	#22
         01:D8EE  F0 01      			beq	!+
         01:D8F0  18         			clc
         01:D8F1             	!:
10789                        		__bfalse	.LL451
         01:D8F1  90 03      			bcc	.LL451
10790                        	
10791                        		.dbg	line,	"include\routines_LEVELS.c", 2564; {
10792                        	
10793                        		.dbg	line,	"include\routines_LEVELS.c", 2565; player_counter_anim = 0;
10794                        		__st.umiq	0, _player_counter_anim
         01:D8F3  9C 1B 23   			stz	_player_counter_anim
10795                        	
10796                        		.dbg	line,	"include\routines_LEVELS.c", 2566; }
10797                        	
10798                        		.dbg	line,	"include\routines_LEVELS.c", 2568; recenter_CAMERA();
10799    01:D8F6             	.LL451:
10800                        		__call		_recenter_CAMERA
         01:D8F6  20 63 FF   			call	_recenter_CAMERA
10801                        	
10802                        		.dbg	line,	"include\routines_LEVELS.c", 2569; }
10803                        	
10804                        		.dbg	line,	"include\routines_LEVELS.c", 2572; else if(player_state == STATE_CLIMB_DOWN)
10805                        		__bra		.LL452
         01:D8F9  4C 70 DB   			bra	.LL452
10806    01:D8FC             	.LL435:
10807                        		__ld.umq	_player_state
         01:D8FC  AD 18 23   			lda	_player_state
10808                        		__equ_b.uiq	12
         01:D8FF  C9 0C      			cmp	#12
         01:D901  F0 01      			beq	!+
         01:D903  18         			clc
         01:D904             	!:
10809                        		__bfalse	.LL453
         01:D904  B0 03 4C DE			bcc	.LL453
         01:D908  D9          
10810                        	
10811                        		.dbg	line,	"include\routines_LEVELS.c", 2573; {
10812                        	
10813                        		.dbg	line,	"include\routines_LEVELS.c", 2574; if(player_counter_anim == 0)
10814                        		__not.um	_player_counter_anim
         01:D909  AD 1B 23   			lda	_player_counter_anim
         01:D90C  18         			clc
         01:D90D  D0 01      			bne	!+
         01:D90F  38         			sec
         01:D910             	!:
10815                        		__bfalse	.LL454
         01:D910  90 0F      			bcc	.LL454
10816                        	
10817                        		.dbg	line,	"include\routines_LEVELS.c", 2575; {
10818                        	
10819                        		.dbg	line,	"include\routines_LEVELS.c", 2576; spr_set(player_id);
10820                        		__ld.umq	_player_id
         01:D912  AD 17 23   			lda	_player_id
10821                        		__call		_spr_set.1
         01:D915  20 DD E7   			call	_spr_set.1
10822                        	
10823                        		.dbg	line,	"include\routines_LEVELS.c", 2577; spr_pattern(PLAYER_CLIMB_1_VRAM_ADR); 
10824                        		__ld.wi		7680
         01:D918  62         			cla
         01:D919  A0 1E      			ldy.h	#7680
10825                        		__call		_spr_pattern.1
         01:D91B  20 26 E8   			call	_spr_pattern.1
10826                        	
10827                        		.dbg	line,	"include\routines_LEVELS.c", 2578; }
10828                        	
10829                        		.dbg	line,	"include\routines_LEVELS.c", 2580; else if(player_counter_anim == 2)
10830                        		__bra		.LL455
         01:D91E  4C C8 D9   			bra	.LL455
10831    01:D921             	.LL454:
10832                        		__ld.umq	_player_counter_anim
         01:D921  AD 1B 23   			lda	_player_counter_anim
10833                        		__equ_b.uiq	2
         01:D924  C9 02      			cmp	#2
         01:D926  F0 01      			beq	!+
         01:D928  18         			clc
         01:D929             	!:
10834                        		__bfalse	.LL456
         01:D929  90 0F      			bcc	.LL456
10835                        	
10836                        		.dbg	line,	"include\routines_LEVELS.c", 2581; {
10837                        	
10838                        		.dbg	line,	"include\routines_LEVELS.c", 2582; spr_set(player_id);
10839                        		__ld.umq	_player_id
         01:D92B  AD 17 23   			lda	_player_id
10840                        		__call		_spr_set.1
         01:D92E  20 DD E7   			call	_spr_set.1
10841                        	
10842                        		.dbg	line,	"include\routines_LEVELS.c", 2583; spr_pattern(PLAYER_CLIMB_2_VRAM_ADR); 
10843                        		__ld.wi		7936
         01:D931  62         			cla
         01:D932  A0 1F      			ldy.h	#7936
10844                        		__call		_spr_pattern.1
         01:D934  20 26 E8   			call	_spr_pattern.1
10845                        	
10846                        		.dbg	line,	"include\routines_LEVELS.c", 2584; }
10847                        	
10848                        		.dbg	line,	"include\routines_LEVELS.c", 2586; else if(player_counter_anim == 5)
10849                        		__bra		.LL457
         01:D937  4C C8 D9   			bra	.LL457
10850    01:D93A             	.LL456:
10851                        		__ld.umq	_player_counter_anim
         01:D93A  AD 1B 23   			lda	_player_counter_anim
10852                        		__equ_b.uiq	5
         01:D93D  C9 05      			cmp	#5
         01:D93F  F0 01      			beq	!+
         01:D941  18         			clc
         01:D942             	!:
10853                        		__bfalse	.LL458
         01:D942  90 0E      			bcc	.LL458
10854                        	
10855                        		.dbg	line,	"include\routines_LEVELS.c", 2587; {
10856                        	
10857                        		.dbg	line,	"include\routines_LEVELS.c", 2588; spr_set(player_id);
10858                        		__ld.umq	_player_id
         01:D944  AD 17 23   			lda	_player_id
10859                        		__call		_spr_set.1
         01:D947  20 DD E7   			call	_spr_set.1
10860                        	
10861                        		.dbg	line,	"include\routines_LEVELS.c", 2589; spr_pattern(PLAYER_CLIMB_3_VRAM_ADR); 
10862                        		__ld.wi		8192
         01:D94A  62         			cla
         01:D94B  A0 20      			ldy.h	#8192
10863                        		__call		_spr_pattern.1
         01:D94D  20 26 E8   			call	_spr_pattern.1
10864                        	
10865                        		.dbg	line,	"include\routines_LEVELS.c", 2590; }
10866                        	
10867                        		.dbg	line,	"include\routines_LEVELS.c", 2592; else if(player_counter_anim == 8)
10868                        		__bra		.LL459
         01:D950  80 76      			bra	.LL459
10869    01:D952             	.LL458:
10870                        		__ld.umq	_player_counter_anim
         01:D952  AD 1B 23   			lda	_player_counter_anim
10871                        		__equ_b.uiq	8
         01:D955  C9 08      			cmp	#8
         01:D957  F0 01      			beq	!+
         01:D959  18         			clc
         01:D95A             	!:
10872                        		__bfalse	.LL460
         01:D95A  90 0E      			bcc	.LL460
10873                        	
10874                        		.dbg	line,	"include\routines_LEVELS.c", 2593; {
10875                        	
10876                        		.dbg	line,	"include\routines_LEVELS.c", 2594; spr_set(player_id);
10877                        		__ld.umq	_player_id
         01:D95C  AD 17 23   			lda	_player_id
10878                        		__call		_spr_set.1
         01:D95F  20 DD E7   			call	_spr_set.1
10879                        	
10880                        		.dbg	line,	"include\routines_LEVELS.c", 2595; spr_pattern(PLAYER_CLIMB_4_VRAM_ADR); 
10881                        		__ld.wi		8448
         01:D962  62         			cla
         01:D963  A0 21      			ldy.h	#8448
10882                        		__call		_spr_pattern.1
         01:D965  20 26 E8   			call	_spr_pattern.1
10883                        	
10884                        		.dbg	line,	"include\routines_LEVELS.c", 2596; }
10885                        	
10886                        		.dbg	line,	"include\routines_LEVELS.c", 2598; else if(player_counter_anim == 11)
10887                        		__bra		.LL461
         01:D968  80 5E      			bra	.LL461
10888    01:D96A             	.LL460:
10889                        		__ld.umq	_player_counter_anim
         01:D96A  AD 1B 23   			lda	_player_counter_anim
10890                        		__equ_b.uiq	11
         01:D96D  C9 0B      			cmp	#11
         01:D96F  F0 01      			beq	!+
         01:D971  18         			clc
         01:D972             	!:
10891                        		__bfalse	.LL462
         01:D972  90 0E      			bcc	.LL462
10892                        	
10893                        		.dbg	line,	"include\routines_LEVELS.c", 2599; {
10894                        	
10895                        		.dbg	line,	"include\routines_LEVELS.c", 2600; spr_set(player_id);
10896                        		__ld.umq	_player_id
         01:D974  AD 17 23   			lda	_player_id
10897                        		__call		_spr_set.1
         01:D977  20 DD E7   			call	_spr_set.1
10898                        	
10899                        		.dbg	line,	"include\routines_LEVELS.c", 2601; spr_pattern(PLAYER_CLIMB_5_VRAM_ADR); 
10900                        		__ld.wi		8704
         01:D97A  62         			cla
         01:D97B  A0 22      			ldy.h	#8704
10901                        		__call		_spr_pattern.1
         01:D97D  20 26 E8   			call	_spr_pattern.1
10902                        	
10903                        		.dbg	line,	"include\routines_LEVELS.c", 2602; }
10904                        	
10905                        		.dbg	line,	"include\routines_LEVELS.c", 2604; else if(player_counter_anim == 14)
10906                        		__bra		.LL463
         01:D980  80 46      			bra	.LL463
10907    01:D982             	.LL462:
10908                        		__ld.umq	_player_counter_anim
         01:D982  AD 1B 23   			lda	_player_counter_anim
10909                        		__equ_b.uiq	14
         01:D985  C9 0E      			cmp	#14
         01:D987  F0 01      			beq	!+
         01:D989  18         			clc
         01:D98A             	!:
10910                        		__bfalse	.LL464
         01:D98A  90 0E      			bcc	.LL464
10911                        	
10912                        		.dbg	line,	"include\routines_LEVELS.c", 2605; {
10913                        	
10914                        		.dbg	line,	"include\routines_LEVELS.c", 2606; spr_set(player_id);
10915                        		__ld.umq	_player_id
         01:D98C  AD 17 23   			lda	_player_id
10916                        		__call		_spr_set.1
         01:D98F  20 DD E7   			call	_spr_set.1
10917                        	
10918                        		.dbg	line,	"include\routines_LEVELS.c", 2607; spr_pattern(PLAYER_CLIMB_4_VRAM_ADR); 
10919                        		__ld.wi		8448
         01:D992  62         			cla
         01:D993  A0 21      			ldy.h	#8448
10920                        		__call		_spr_pattern.1
         01:D995  20 26 E8   			call	_spr_pattern.1
10921                        	
10922                        		.dbg	line,	"include\routines_LEVELS.c", 2608; }
10923                        	
10924                        		.dbg	line,	"include\routines_LEVELS.c", 2610; else if(player_counter_anim == 17)
10925                        		__bra		.LL465
         01:D998  80 2E      			bra	.LL465
10926    01:D99A             	.LL464:
10927                        		__ld.umq	_player_counter_anim
         01:D99A  AD 1B 23   			lda	_player_counter_anim
10928                        		__equ_b.uiq	17
         01:D99D  C9 11      			cmp	#17
         01:D99F  F0 01      			beq	!+
         01:D9A1  18         			clc
         01:D9A2             	!:
10929                        		__bfalse	.LL466
         01:D9A2  90 0E      			bcc	.LL466
10930                        	
10931                        		.dbg	line,	"include\routines_LEVELS.c", 2611; {
10932                        	
10933                        		.dbg	line,	"include\routines_LEVELS.c", 2612; spr_set(player_id);
10934                        		__ld.umq	_player_id
         01:D9A4  AD 17 23   			lda	_player_id
10935                        		__call		_spr_set.1
         01:D9A7  20 DD E7   			call	_spr_set.1
10936                        	
10937                        		.dbg	line,	"include\routines_LEVELS.c", 2613; spr_pattern(PLAYER_CLIMB_3_VRAM_ADR); 
10938                        		__ld.wi		8192
         01:D9AA  62         			cla
         01:D9AB  A0 20      			ldy.h	#8192
10939                        		__call		_spr_pattern.1
         01:D9AD  20 26 E8   			call	_spr_pattern.1
10940                        	
10941                        		.dbg	line,	"include\routines_LEVELS.c", 2614; }
10942                        	
10943                        		.dbg	line,	"include\routines_LEVELS.c", 2616; else if(player_counter_anim == 20)
10944                        		__bra		.LL467
         01:D9B0  80 16      			bra	.LL467
10945    01:D9B2             	.LL466:
10946                        		__ld.umq	_player_counter_anim
         01:D9B2  AD 1B 23   			lda	_player_counter_anim
10947                        		__equ_b.uiq	20
         01:D9B5  C9 14      			cmp	#20
         01:D9B7  F0 01      			beq	!+
         01:D9B9  18         			clc
         01:D9BA             	!:
10948                        		__bfalse	.LL468
         01:D9BA  90 0C      			bcc	.LL468
10949                        	
10950                        		.dbg	line,	"include\routines_LEVELS.c", 2617; {
10951                        	
10952                        		.dbg	line,	"include\routines_LEVELS.c", 2618; spr_set(player_id);
10953                        		__ld.umq	_player_id
         01:D9BC  AD 17 23   			lda	_player_id
10954                        		__call		_spr_set.1
         01:D9BF  20 DD E7   			call	_spr_set.1
10955                        	
10956                        		.dbg	line,	"include\routines_LEVELS.c", 2619; spr_pattern(PLAYER_CLIMB_2_VRAM_ADR); 
10957                        		__ld.wi		7936
         01:D9C2  62         			cla
         01:D9C3  A0 1F      			ldy.h	#7936
10958                        		__call		_spr_pattern.1
         01:D9C5  20 26 E8   			call	_spr_pattern.1
10959                        	
10960                        		.dbg	line,	"include\routines_LEVELS.c", 2620; }
10961                        	
10962                        		.dbg	line,	"include\routines_LEVELS.c", 2623; player_counter_anim += 1;
10963    01:D9C8             	.LL468:
10964    01:D9C8             	.LL467:
10965    01:D9C8             	.LL465:
10966    01:D9C8             	.LL463:
10967    01:D9C8             	.LL461:
10968    01:D9C8             	.LL459:
10969    01:D9C8             	.LL457:
10970    01:D9C8             	.LL455:
10971                        		__add_st.umiq	1, _player_counter_anim
         01:D9C8  EE 1B 23   			inc	_player_counter_anim
10972                        	
10973                        		.dbg	line,	"include\routines_LEVELS.c", 2625; if(player_counter_anim == 22)
10974                        		__ld.umq	_player_counter_anim
         01:D9CB  AD 1B 23   			lda	_player_counter_anim
10975                        		__equ_b.uiq	22
         01:D9CE  C9 16      			cmp	#22
         01:D9D0  F0 01      			beq	!+
         01:D9D2  18         			clc
         01:D9D3             	!:
10976                        		__bfalse	.LL469
         01:D9D3  90 03      			bcc	.LL469
10977                        	
10978                        		.dbg	line,	"include\routines_LEVELS.c", 2626; {
10979                        	
10980                        		.dbg	line,	"include\routines_LEVELS.c", 2627; player_counter_anim = 0;
10981                        		__st.umiq	0, _player_counter_anim
         01:D9D5  9C 1B 23   			stz	_player_counter_anim
10982                        	
10983                        		.dbg	line,	"include\routines_LEVELS.c", 2628; }
10984                        	
10985                        		.dbg	line,	"include\routines_LEVELS.c", 2630; recenter_CAMERA();
10986    01:D9D8             	.LL469:
10987                        		__call		_recenter_CAMERA
         01:D9D8  20 63 FF   			call	_recenter_CAMERA
10988                        	
10989                        		.dbg	line,	"include\routines_LEVELS.c", 2631; }
10990                        	
10991                        		.dbg	line,	"include\routines_LEVELS.c", 2634; else if(player_state == STATE_JUMP_LADDER)
10992                        		__bra		.LL470
         01:D9DB  4C 70 DB   			bra	.LL470
10993    01:D9DE             	.LL453:
10994                        		__ld.umq	_player_state
         01:D9DE  AD 18 23   			lda	_player_state
10995                        		__equ_b.uiq	13
         01:D9E1  C9 0D      			cmp	#13
         01:D9E3  F0 01      			beq	!+
         01:D9E5  18         			clc
         01:D9E6             	!:
10996                        		__bfalse	.LL471
         01:D9E6  B0 03 4C 70			bcc	.LL471
         01:D9EA  DB          
10997                        	
10998                        		.dbg	line,	"include\routines_LEVELS.c", 2635; {
10999                        	
11000                        		.dbg	line,	"include\routines_LEVELS.c", 2636; unsigned char i;
11001                        	
11002                        		.dbg	line,	"include\routines_LEVELS.c", 2637; i = 1;
11003                        		__st.umiq	1, __update_PLAYER_end - 8  /* i */
         01:D9EB  A9 01      			lda.l	#1
         01:D9ED  8D 05 23   			sta	__update_PLAYER_end - 8
11004                        	
11005                        		.dbg	line,	"include\routines_LEVELS.c", 2640; if(player_counter_anim == 0)
11006                        		__not.um	_player_counter_anim
         01:D9F0  AD 1B 23   			lda	_player_counter_anim
         01:D9F3  18         			clc
         01:D9F4  D0 01      			bne	!+
         01:D9F6  38         			sec
         01:D9F7             	!:
11007                        		__bfalse	.LL472
         01:D9F7  90 11      			bcc	.LL472
11008                        	
11009                        		.dbg	line,	"include\routines_LEVELS.c", 2641; {
11010                        	
11011                        		.dbg	line,	"include\routines_LEVELS.c", 2642; spr_set(player_id);
11012                        		__ld.umq	_player_id
         01:D9F9  AD 17 23   			lda	_player_id
11013                        		__call		_spr_set.1
         01:D9FC  20 DD E7   			call	_spr_set.1
11014                        	
11015                        		.dbg	line,	"include\routines_LEVELS.c", 2643; spr_pattern(PLAYER_JUMP_VRAM_ADR); 
11016                        		__ld.wi		6912
         01:D9FF  62         			cla
         01:DA00  A0 1B      			ldy.h	#6912
11017                        		__call		_spr_pattern.1
         01:DA02  20 26 E8   			call	_spr_pattern.1
11018                        	
11019                        		.dbg	line,	"include\routines_LEVELS.c", 2645; player_counter_anim = 1;
11020                        		__st.umiq	1, _player_counter_anim
         01:DA05  A9 01      			lda.l	#1
         01:DA07  8D 1B 23   			sta	_player_counter_anim
11021                        	
11022                        		.dbg	line,	"include\routines_LEVELS.c", 2646; }
11023                        	
11024                        		.dbg	line,	"include\routines_LEVELS.c", 2649; player_pos_y += TABLE_PLAYER_JUMP_V[player_index_jump];
11025    01:DA0A             	.LL472:
11026                        		__ldx.umq	_player_index_jump
         01:DA0A  AE 1C 23   			ldx	_player_index_jump
11027                        		__ld.bax	_TABLE_PLAYER_JUMP_V
         01:DA0D  BD 1D 61   			lda	_TABLE_PLAYER_JUMP_V, x
         01:DA10  C2         			cly
         01:DA11  10 01      			bpl	!+
         01:DA13  88         			dey
         01:DA14             	!:
11028                        		__add_st.wmq	_player_pos_y
         01:DA14  18         			clc
         01:DA15  6D DC 24   			adc.l	_player_pos_y
         01:DA18  8D DC 24   			sta.l	_player_pos_y
         01:DA1B  98         			tya
         01:DA1C  6D DD 24   			adc.h	_player_pos_y
         01:DA1F  8D DD 24   			sta.h	_player_pos_y
11029                        	
11030                        		.dbg	line,	"include\routines_LEVELS.c", 2651; // CHECK COLLISION WITH CEILING //
11031                        	
11032                        		.dbg	line,	"include\routines_LEVELS.c", 2652; check_BG( 15 , 8 );
11033                        		__ld.wi		15
         01:DA22  A9 0F      			lda.l	#15
         01:DA24  C2         			cly
11034                        		__pusharg.wr
         01:DA25  A6 8D      			ldx	<__sp
         01:DA27  CA         			dex
         01:DA28  CA         			dex
         01:DA29  95 08      			sta.l	<__stack, x
         01:DA2B  94 09      			sty.h	<__stack, x
         01:DA2D  86 8D      			stx	<__sp
11035                        		__ld.wi		8
         01:DA2F  A9 08      			lda.l	#8
         01:DA31  C2         			cly
11036                        		__pusharg.wr
         01:DA32  A6 8D      			ldx	<__sp
         01:DA34  CA         			dex
         01:DA35  CA         			dex
         01:DA36  95 08      			sta.l	<__stack, x
         01:DA38  94 09      			sty.h	<__stack, x
         01:DA3A  86 8D      			stx	<__sp
11037                        		__call		_check_BG
         01:DA3C  20 6D FF   			call	_check_BG
11038                        	
11039                        		.dbg	line,	"include\routines_LEVELS.c", 2654; if(map_blk_flag == TILE_BG)
11040                        		__ld.umq	_map_blk_flag
         01:DA3F  AD B8 2B   			lda	_map_blk_flag
11041                        		__equ_b.uiq	1
         01:DA42  C9 01      			cmp	#1
         01:DA44  F0 01      			beq	!+
         01:DA46  18         			clc
         01:DA47             	!:
11042                        		__bfalse	.LL473
         01:DA47  90 5A      			bcc	.LL473
11043                        	
11044                        		.dbg	line,	"include\routines_LEVELS.c", 2655; {
11045                        	
11046                        		.dbg	line,	"include\routines_LEVELS.c", 2656; for(i=1 ; i<8 ; i++)
11047                        		__st.umiq	1, __update_PLAYER_end - 8  /* i */
         01:DA49  A9 01      			lda.l	#1
         01:DA4B  8D 05 23   			sta	__update_PLAYER_end - 8
11048    01:DA4E             	.LL474:
11049                        		__ld.umq	__update_PLAYER_end - 8  /* i */
         01:DA4E  AD 05 23   			lda	__update_PLAYER_end - 8
11050                        		__ult_b.uiq	8
         01:DA51  C9 08      			cmp	#8		; Subtract integer from A.
         01:DA53  6A         			ror	a		; CC if A < integer.
         01:DA54  49 80      			eor	#$80
         01:DA56  2A         			rol	a
11051                        		__btrue		.LL476
         01:DA57  B0 07      			bcs	.LL476
11052                        		__bra		.LL477
         01:DA59  80 48      			bra	.LL477
11053    01:DA5B             	.LL475:
11054                        		__inc.umq	__update_PLAYER_end - 8  /* i */
         01:DA5B  EE 05 23   			inc	__update_PLAYER_end - 8
11055                        		__bra		.LL474
         01:DA5E  80 EE      			bra	.LL474
11056    01:DA60             	.LL476:
11057                        	
11058                        		.dbg	line,	"include\routines_LEVELS.c", 2657; {
11059                        	
11060                        		.dbg	line,	"include\routines_LEVELS.c", 2658; check_BG( 15 , 8 + i );
11061                        		__ld.wi		15
         01:DA60  A9 0F      			lda.l	#15
         01:DA62  C2         			cly
11062                        		__pusharg.wr
         01:DA63  A6 8D      			ldx	<__sp
         01:DA65  CA         			dex
         01:DA66  CA         			dex
         01:DA67  95 08      			sta.l	<__stack, x
         01:DA69  94 09      			sty.h	<__stack, x
         01:DA6B  86 8D      			stx	<__sp
11063                        		__ld.wi		8
         01:DA6D  A9 08      			lda.l	#8
         01:DA6F  C2         			cly
11064                        		__add.um	__update_PLAYER_end - 8  /* i */
         01:DA70  18         			clc
         01:DA71  6D 05 23   			adc	__update_PLAYER_end - 8
         01:DA74  90 01      			bcc	!+
         01:DA76  C8         			iny
         01:DA77             	!:
11065                        		__pusharg.wr
         01:DA77  A6 8D      			ldx	<__sp
         01:DA79  CA         			dex
         01:DA7A  CA         			dex
         01:DA7B  95 08      			sta.l	<__stack, x
         01:DA7D  94 09      			sty.h	<__stack, x
         01:DA7F  86 8D      			stx	<__sp
11066                        		__call		_check_BG
         01:DA81  20 6D FF   			call	_check_BG
11067                        	
11068                        		.dbg	line,	"include\routines_LEVELS.c", 2659; {
11069                        	
11070                        		.dbg	line,	"include\routines_LEVELS.c", 2660; if(map_blk_flag == TILE_EMPTY)
11071                        		__not.um	_map_blk_flag
         01:DA84  AD B8 2B   			lda	_map_blk_flag
         01:DA87  18         			clc
         01:DA88  D0 01      			bne	!+
         01:DA8A  38         			sec
         01:DA8B             	!:
11072                        		__bfalse	.LL478
         01:DA8B  90 CE      			bcc	.LL478
11073                        	
11074                        		.dbg	line,	"include\routines_LEVELS.c", 2661; {
11075                        	
11076                        		.dbg	line,	"include\routines_LEVELS.c", 2662; player_pos_y += i;
11077                        		__ld.um		__update_PLAYER_end - 8  /* i */
         01:DA8D  AD 05 23   			lda	__update_PLAYER_end - 8
         01:DA90  C2         			cly
11078                        		__add_st.wmq	_player_pos_y
         01:DA91  18         			clc
         01:DA92  6D DC 24   			adc.l	_player_pos_y
         01:DA95  8D DC 24   			sta.l	_player_pos_y
         01:DA98  98         			tya
         01:DA99  6D DD 24   			adc.h	_player_pos_y
         01:DA9C  8D DD 24   			sta.h	_player_pos_y
11079                        	
11080                        		.dbg	line,	"include\routines_LEVELS.c", 2663; break;
11081                        		__bra		.LL477
         01:DA9F  80 02      			bra	.LL477
11082                        	
11083                        		.dbg	line,	"include\routines_LEVELS.c", 2664; }
11084                        	
11085                        		.dbg	line,	"include\routines_LEVELS.c", 2665; }
11086    01:DAA1             	.LL478	.alias		.LL475
11087                        	
11088                        		.dbg	line,	"include\routines_LEVELS.c", 2666; }
11089                        		__bra		.LL475
         01:DAA1  80 B8      			bra	.LL475
11090    01:DAA3             	.LL477:
11091                        	
11092                        		.dbg	line,	"include\routines_LEVELS.c", 2667; }
11093                        	
11094                        		.dbg	line,	"include\routines_LEVELS.c", 2669; spr_set(player_id);
11095    01:DAA3             	.LL473:
11096                        		__ld.umq	_player_id
         01:DAA3  AD 17 23   			lda	_player_id
11097                        		__call		_spr_set.1
         01:DAA6  20 DD E7   			call	_spr_set.1
11098                        	
11099                        		.dbg	line,	"include\routines_LEVELS.c", 2670; spr_y(player_pos_y);
11100                        		__ld.wm		_player_pos_y
         01:DAA9  AD DC 24   			lda.l	_player_pos_y
         01:DAAC  AC DD 24   			ldy.h	_player_pos_y
11101                        		__call		_spr_y.1
         01:DAAF  20 19 E8   			call	_spr_y.1
11102                        	
11103                        		.dbg	line,	"include\routines_LEVELS.c", 2674; if(player_index_jump < 34)
11104                        		__ld.umq	_player_index_jump
         01:DAB2  AD 1C 23   			lda	_player_index_jump
11105                        		__ult_b.uiq	34
         01:DAB5  C9 22      			cmp	#34		; Subtract integer from A.
         01:DAB7  6A         			ror	a		; CC if A < integer.
         01:DAB8  49 80      			eor	#$80
         01:DABA  2A         			rol	a
11106                        		__bfalse	.LL479
         01:DABB  90 03      			bcc	.LL479
11107                        	
11108                        		.dbg	line,	"include\routines_LEVELS.c", 2675; {
11109                        	
11110                        		.dbg	line,	"include\routines_LEVELS.c", 2676; player_index_jump += 1;
11111                        		__add_st.umiq	1, _player_index_jump
         01:DABD  EE 1C 23   			inc	_player_index_jump
11112                        	
11113                        		.dbg	line,	"include\routines_LEVELS.c", 2677; }
11114                        	
11115                        		.dbg	line,	"include\routines_LEVELS.c", 2682; //--------------------------------------------------------------------------------------//
11116                        	
11117                        		.dbg	line,	"include\routines_LEVELS.c", 2683; //                                   LADDER COLLISION                                   //
11118                        	
11119                        		.dbg	line,	"include\routines_LEVELS.c", 2684; //--------------------------------------------------------------------------------------//
11120                        	
11121                        		.dbg	line,	"include\routines_LEVELS.c", 2686; if(player_index_jump > 18)
11122    01:DAC0             	.LL479:
11123                        		__ld.umq	_player_index_jump
         01:DAC0  AD 1C 23   			lda	_player_index_jump
11124                        		__ugt_b.uiq	18
         01:DAC3  18         			clc			; Subtract integer+1 from A.
         01:DAC4  E9 12      			sbc	#18		; CS if A > integer.
11125                        		__bfalse	.LL480
         01:DAC6  B0 03 4C 5B			bcc	.LL480
         01:DACA  DB          
11126                        	
11127                        		.dbg	line,	"include\routines_LEVELS.c", 2687; {
11128                        	
11129                        		.dbg	line,	"include\routines_LEVELS.c", 2688; // CHECK COLLISION WITH LADDERS //
11130                        	
11131                        		.dbg	line,	"include\routines_LEVELS.c", 2689; check_BG( 16 , 8 );
11132                        		__ld.wi		16
         01:DACB  A9 10      			lda.l	#16
         01:DACD  C2         			cly
11133                        		__pusharg.wr
         01:DACE  A6 8D      			ldx	<__sp
         01:DAD0  CA         			dex
         01:DAD1  CA         			dex
         01:DAD2  95 08      			sta.l	<__stack, x
         01:DAD4  94 09      			sty.h	<__stack, x
         01:DAD6  86 8D      			stx	<__sp
11134                        		__ld.wi		8
         01:DAD8  A9 08      			lda.l	#8
         01:DADA  C2         			cly
11135                        		__pusharg.wr
         01:DADB  A6 8D      			ldx	<__sp
         01:DADD  CA         			dex
         01:DADE  CA         			dex
         01:DADF  95 08      			sta.l	<__stack, x
         01:DAE1  94 09      			sty.h	<__stack, x
         01:DAE3  86 8D      			stx	<__sp
11136                        		__call		_check_BG
         01:DAE5  20 6D FF   			call	_check_BG
11137                        	
11138                        		.dbg	line,	"include\routines_LEVELS.c", 2691; // IF PLAYER HITS THE LADDER //
11139                        	
11140                        		.dbg	line,	"include\routines_LEVELS.c", 2692; if(map_blk_flag == TILE_LADDER)
11141                        		__ld.umq	_map_blk_flag
         01:DAE8  AD B8 2B   			lda	_map_blk_flag
11142                        		__equ_b.uiq	2
         01:DAEB  C9 02      			cmp	#2
         01:DAED  F0 01      			beq	!+
         01:DAEF  18         			clc
         01:DAF0             	!:
11143                        		__bfalse	.LL481
         01:DAF0  90 69      			bcc	.LL481
11144                        	
11145                        		.dbg	line,	"include\routines_LEVELS.c", 2693; {
11146                        	
11147                        		.dbg	line,	"include\routines_LEVELS.c", 2694; // CAMERA GOES 8 PX BACKWARD //
11148                        	
11149                        		.dbg	line,	"include\routines_LEVELS.c", 2695; sgx_map_pxl_x = ( (sgx_map_pxl_x >> 3) << 3 );
11150                        		__ld.wm		_sgx_map_pxl_x
         01:DAF2  AD 97 26   			lda.l	_sgx_map_pxl_x
         01:DAF5  AC 98 26   			ldy.h	_sgx_map_pxl_x
11151                        		__lsr.wi	3
         01:DAF8  84 00      			sty	__temp
         01:DAFA  20 3A E2   			jsr	lsrw3
11152                        		__asl.wi	3
         01:DAFD  84 00      			sty	__temp
         01:DAFF  20 D7 E1   			jsr	aslw3
11153                        		__st.wmq	_sgx_map_pxl_x
         01:DB02  8D 97 26   			sta.l	_sgx_map_pxl_x
         01:DB05  8C 98 26   			sty.h	_sgx_map_pxl_x
11154                        	
11155                        		.dbg	line,	"include\routines_LEVELS.c", 2697; // SO WE UPDATE THE MAP //
11156                        	
11157                        		.dbg	line,	"include\routines_LEVELS.c", 2698; sgx_scroll_map();
11158                        		__call		_sgx_scroll_map
         01:DB08  20 81 FF   			call	_sgx_scroll_map
11159                        	
11160                        		.dbg	line,	"include\routines_LEVELS.c", 2700; // CHECK IF THE PLAYER STANDS RIGHT TO THE LADDER //
11161                        	
11162                        		.dbg	line,	"include\routines_LEVELS.c", 2701; check_BG( 31 , 8 );
11163                        		__ld.wi		31
         01:DB0B  A9 1F      			lda.l	#31
         01:DB0D  C2         			cly
11164                        		__pusharg.wr
         01:DB0E  A6 8D      			ldx	<__sp
         01:DB10  CA         			dex
         01:DB11  CA         			dex
         01:DB12  95 08      			sta.l	<__stack, x
         01:DB14  94 09      			sty.h	<__stack, x
         01:DB16  86 8D      			stx	<__sp
11165                        		__ld.wi		8
         01:DB18  A9 08      			lda.l	#8
         01:DB1A  C2         			cly
11166                        		__pusharg.wr
         01:DB1B  A6 8D      			ldx	<__sp
         01:DB1D  CA         			dex
         01:DB1E  CA         			dex
         01:DB1F  95 08      			sta.l	<__stack, x
         01:DB21  94 09      			sty.h	<__stack, x
         01:DB23  86 8D      			stx	<__sp
11167                        		__call		_check_BG
         01:DB25  20 6D FF   			call	_check_BG
11168                        	
11169                        		.dbg	line,	"include\routines_LEVELS.c", 2703; if(map_blk_flag == TILE_LADDER)
11170                        		__ld.umq	_map_blk_flag
         01:DB28  AD B8 2B   			lda	_map_blk_flag
11171                        		__equ_b.uiq	2
         01:DB2B  C9 02      			cmp	#2
         01:DB2D  F0 01      			beq	!+
         01:DB2F  18         			clc
         01:DB30             	!:
11172                        		__bfalse	.LL482
         01:DB30  90 0E      			bcc	.LL482
11173                        	
11174                        		.dbg	line,	"include\routines_LEVELS.c", 2704; {
11175                        	
11176                        		.dbg	line,	"include\routines_LEVELS.c", 2705; sgx_map_pxl_x += 8;
11177                        		__add_st.wmiq	8, _sgx_map_pxl_x
         01:DB32  18         			clc
         01:DB33  AD 97 26   			lda.l	_sgx_map_pxl_x
         01:DB36  69 08      			adc.l	#8
         01:DB38  8D 97 26   			sta.l	_sgx_map_pxl_x
         01:DB3B  90 03      			bcc	!+
         01:DB3D  EE 98 26   			inc.h	_sgx_map_pxl_x
         01:DB40             	!:
11178                        	
11179                        		.dbg	line,	"include\routines_LEVELS.c", 2706; }
11180                        	
11181                        		.dbg	line,	"include\routines_LEVELS.c", 2708; //spr_set(player_id);
11182                        	
11183                        		.dbg	line,	"include\routines_LEVELS.c", 2709; spr_pattern(PLAYER_HANG_VRAM_ADR);
11184    01:DB40             	.LL482:
11185                        		__ld.wi		7424
         01:DB40  62         			cla
         01:DB41  A0 1D      			ldy.h	#7424
11186                        		__call		_spr_pattern.1
         01:DB43  20 26 E8   			call	_spr_pattern.1
11187                        	
11188                        		.dbg	line,	"include\routines_LEVELS.c", 2711; player_counter_anim = 0;//
11189                        		__st.umiq	0, _player_counter_anim
         01:DB46  9C 1B 23   			stz	_player_counter_anim
11190                        	
11191                        		.dbg	line,	"include\routines_LEVELS.c", 2712; player_index_jump = 0;
11192                        		__st.umiq	0, _player_index_jump
         01:DB49  9C 1C 23   			stz	_player_index_jump
11193                        	
11194                        		.dbg	line,	"include\routines_LEVELS.c", 2713; jump_ladder = TRUE;
11195                        		__st.umiq	1, _jump_ladder
         01:DB4C  A9 01      			lda.l	#1
         01:DB4E  8D 21 23   			sta	_jump_ladder
11196                        	
11197                        		.dbg	line,	"include\routines_LEVELS.c", 2714; jump_max_index = 29;
11198                        		__st.umiq	29, _jump_max_index
         01:DB51  A9 1D      			lda.l	#29
         01:DB53  8D 22 23   			sta	_jump_max_index
11199                        	
11200                        		.dbg	line,	"include\routines_LEVELS.c", 2715; player_state = STATE_HANG;
11201                        		__st.umiq	10, _player_state
         01:DB56  A9 0A      			lda.l	#10
         01:DB58  8D 18 23   			sta	_player_state
11202                        	
11203                        		.dbg	line,	"include\routines_LEVELS.c", 2716; }
11204                        	
11205                        		.dbg	line,	"include\routines_LEVELS.c", 2717; }
11206    01:DB5B             	.LL481:
11207                        	
11208                        		.dbg	line,	"include\routines_LEVELS.c", 2719; spr_set(weapon_id);
11209    01:DB5B             	.LL480:
11210                        		__ld.umq	_weapon_id
         01:DB5B  AD 26 23   			lda	_weapon_id
11211                        		__call		_spr_set.1
         01:DB5E  20 DD E7   			call	_spr_set.1
11212                        	
11213                        		.dbg	line,	"include\routines_LEVELS.c", 2720; spr_y(player_pos_y+8);
11214                        		__ld.wm		_player_pos_y
         01:DB61  AD DC 24   			lda.l	_player_pos_y
         01:DB64  AC DD 24   			ldy.h	_player_pos_y
11215                        		__add.wi	8
         01:DB67  18         			clc
         01:DB68  69 08      			adc.l	#8
         01:DB6A  90 01      			bcc	!+
         01:DB6C  C8         			iny
         01:DB6D             	!:
11216                        		__call		_spr_y.1
         01:DB6D  20 19 E8   			call	_spr_y.1
11217                        	
11218                        		.dbg	line,	"include\routines_LEVELS.c", 2721; }
11219                        	
11220                        		.dbg	line,	"include\routines_LEVELS.c", 2723; }
11221    01:DB70             	.LL471:
11222    01:DB70             	.LL470:
11223    01:DB70             	.LL452:
11224    01:DB70             	.LL434:
11225    01:DB70             	.LL429:
11226    01:DB70             	.LL412:
11227    01:DB70             	.LL407:
11228    01:DB70             	.LL370:
11229    01:DB70             	.LL333:
11230    01:DB70             	.LL278:
11231    01:DB70             	.LL235:
11232    01:DB70             	.LL230:
11233                        		__return	0
         01:DB70  4C EF FF   			jmp	leave_proc
11234                        		.dbg	clear
11235                        		.endp
11236               67E0     		.data
11237               2305     		.bss
11238    F8:2305             	__update_PLAYER_loc:
11239    F8:2305             			ds	8
11240    F8:230D             	__update_PLAYER_end:
11241               E309     		.code
11242                        		.pceas
11243                        	
11244                        		.dbg	line,	"include\routines_LEVELS.c", 2726; void update_WEAPON()
11245                        		.dbg	line,	"include\routines_LEVELS.c", 2727; {
11246                        	;***********************
11247                        	;***********************
11248                        	
11249                        		.hucc
11250    17:D241             		.proc		_update_WEAPON
11251                        		__enter		_update_WEAPON
11252                        	
11253                        		.dbg	line,	"include\routines_LEVELS.c", 2728; if(player_state == STATE_ATTACK)
11254                        		__ld.umq	_player_state
         17:D241  AD 18 23   			lda	_player_state
11255                        		__equ_b.uiq	2
         17:D244  C9 02      			cmp	#2
         17:D246  F0 01      			beq	!+
         17:D248  18         			clc
         17:D249             	!:
11256                        		__bfalse	.LL484
         17:D249  B0 03 4C 28			bcc	.LL484
         17:D24D  D5          
11257                        	
11258                        		.dbg	line,	"include\routines_LEVELS.c", 2729; {
11259                        	
11260                        		.dbg	line,	"include\routines_LEVELS.c", 2730; char i;
11261                        	
11262                        		.dbg	line,	"include\routines_LEVELS.c", 2731; 
11263                        	
11264                        		.dbg	line,	"include\routines_LEVELS.c", 2732; recenter_CAMERA();
11265                        		__call		_recenter_CAMERA
         17:D24E  20 63 FF   			call	_recenter_CAMERA
11266                        	
11267                        		.dbg	line,	"include\routines_LEVELS.c", 2734; if(player_counter_attack == 0)
11268                        		__not.um	_player_counter_attack
         17:D251  AD 1E 23   			lda	_player_counter_attack
         17:D254  18         			clc
         17:D255  D0 01      			bne	!+
         17:D257  38         			sec
         17:D258             	!:
11269                        		__bfalse	.LL485
         17:D258  90 49      			bcc	.LL485
11270                        	
11271                        		.dbg	line,	"include\routines_LEVELS.c", 2735; {
11272                        	
11273                        		.dbg	line,	"include\routines_LEVELS.c", 2736; spr_set(player_id);
11274                        		__ld.umq	_player_id
         17:D25A  AD 17 23   			lda	_player_id
11275                        		__call		_spr_set.1
         17:D25D  20 DD E7   			call	_spr_set.1
11276                        	
11277                        		.dbg	line,	"include\routines_LEVELS.c", 2737; spr_pattern(PLAYER_ATTACK_1_VRAM_ADR);
11278                        		__ld.wi		9472
         17:D260  62         			cla
         17:D261  A0 25      			ldy.h	#9472
11279                        		__call		_spr_pattern.1
         17:D263  20 26 E8   			call	_spr_pattern.1
11280                        	
11281                        		.dbg	line,	"include\routines_LEVELS.c", 2739; spr_set(weapon_id);
11282                        		__ld.umq	_weapon_id
         17:D266  AD 26 23   			lda	_weapon_id
11283                        		__call		_spr_set.1
         17:D269  20 DD E7   			call	_spr_set.1
11284                        	
11285                        		.dbg	line,	"include\routines_LEVELS.c", 2740; spr_pattern(WEAPON_ATTACK_1_VRAM_ADRESS);
11286                        		__ld.wi		32000
         17:D26C  62         			cla
         17:D26D  A0 7D      			ldy.h	#32000
11287                        		__call		_spr_pattern.1
         17:D26F  20 26 E8   			call	_spr_pattern.1
11288                        	
11289                        		.dbg	line,	"include\routines_LEVELS.c", 2742; if(player_axis == AXIS_RIGHT)
11290                        		__not.um	_player_axis
         17:D272  AD 19 23   			lda	_player_axis
         17:D275  18         			clc
         17:D276  D0 01      			bne	!+
         17:D278  38         			sec
         17:D279             	!:
11291                        		__bfalse	.LL486
         17:D279  90 11      			bcc	.LL486
11292                        	
11293                        		.dbg	line,	"include\routines_LEVELS.c", 2743; {
11294                        	
11295                        		.dbg	line,	"include\routines_LEVELS.c", 2744; spr_x(player_pos_x-13);
11296                        		__ld.wm		_player_pos_x
         17:D27B  AD DA 24   			lda.l	_player_pos_x
         17:D27E  AC DB 24   			ldy.h	_player_pos_x
11297                        		__sub.wi	13
         17:D281  38         			sec
         17:D282  E9 0D      			sbc.l	#13
         17:D284  B0 01      			bcs	!+
         17:D286  88         			dey
         17:D287             	!:
11298                        		__call		_spr_x.1
         17:D287  20 0A E8   			call	_spr_x.1
11299                        	
11300                        		.dbg	line,	"include\routines_LEVELS.c", 2745; }
11301                        	
11302                        		.dbg	line,	"include\routines_LEVELS.c", 2747; else
11303                        		__bra		.LL487
         17:D28A  80 0F      			bra	.LL487
11304    17:D28C             	.LL486:
11305                        	
11306                        		.dbg	line,	"include\routines_LEVELS.c", 2748; {
11307                        	
11308                        		.dbg	line,	"include\routines_LEVELS.c", 2749; spr_x(player_pos_x+29);
11309                        		__ld.wm		_player_pos_x
         17:D28C  AD DA 24   			lda.l	_player_pos_x
         17:D28F  AC DB 24   			ldy.h	_player_pos_x
11310                        		__add.wi	29
         17:D292  18         			clc
         17:D293  69 1D      			adc.l	#29
         17:D295  90 01      			bcc	!+
         17:D297  C8         			iny
         17:D298             	!:
11311                        		__call		_spr_x.1
         17:D298  20 0A E8   			call	_spr_x.1
11312                        	
11313                        		.dbg	line,	"include\routines_LEVELS.c", 2750; }
11314    17:D29B             	.LL487:
11315                        	
11316                        		.dbg	line,	"include\routines_LEVELS.c", 2752; weapon_y_offset = -8;
11317                        		__st.umiq	-8, _weapon_y_offset
         17:D29B  A9 F8      			lda.l	#-8
         17:D29D  8D 4C 26   			sta	_weapon_y_offset
11318                        	
11319                        		.dbg	line,	"include\routines_LEVELS.c", 2753; }
11320                        	
11321                        		.dbg	line,	"include\routines_LEVELS.c", 2755; else if(player_counter_attack == 6)
11322                        		__bra		.LL488
         17:D2A0  4C BC D4   			bra	.LL488
11323    17:D2A3             	.LL485:
11324                        		__ld.umq	_player_counter_attack
         17:D2A3  AD 1E 23   			lda	_player_counter_attack
11325                        		__equ_b.uiq	6
         17:D2A6  C9 06      			cmp	#6
         17:D2A8  F0 01      			beq	!+
         17:D2AA  18         			clc
         17:D2AB             	!:
11326                        		__bfalse	.LL489
         17:D2AB  90 4A      			bcc	.LL489
11327                        	
11328                        		.dbg	line,	"include\routines_LEVELS.c", 2756; {
11329                        	
11330                        		.dbg	line,	"include\routines_LEVELS.c", 2757; spr_set(player_id);
11331                        		__ld.umq	_player_id
         17:D2AD  AD 17 23   			lda	_player_id
11332                        		__call		_spr_set.1
         17:D2B0  20 DD E7   			call	_spr_set.1
11333                        	
11334                        		.dbg	line,	"include\routines_LEVELS.c", 2758; spr_pattern(PLAYER_ATTACK_2_VRAM_ADR);
11335                        		__ld.wi		9728
         17:D2B3  62         			cla
         17:D2B4  A0 26      			ldy.h	#9728
11336                        		__call		_spr_pattern.1
         17:D2B6  20 26 E8   			call	_spr_pattern.1
11337                        	
11338                        		.dbg	line,	"include\routines_LEVELS.c", 2760; spr_set(weapon_id);
11339                        		__ld.umq	_weapon_id
         17:D2B9  AD 26 23   			lda	_weapon_id
11340                        		__call		_spr_set.1
         17:D2BC  20 DD E7   			call	_spr_set.1
11341                        	
11342                        		.dbg	line,	"include\routines_LEVELS.c", 2761; spr_pattern(WEAPON_ATTACK_2_VRAM_ADRESS);
11343                        		__ld.wi		32064
         17:D2BF  A9 40      			lda.l	#32064
         17:D2C1  A0 7D      			ldy.h	#32064
11344                        		__call		_spr_pattern.1
         17:D2C3  20 26 E8   			call	_spr_pattern.1
11345                        	
11346                        		.dbg	line,	"include\routines_LEVELS.c", 2763; if(player_axis == AXIS_RIGHT)
11347                        		__not.um	_player_axis
         17:D2C6  AD 19 23   			lda	_player_axis
         17:D2C9  18         			clc
         17:D2CA  D0 01      			bne	!+
         17:D2CC  38         			sec
         17:D2CD             	!:
11348                        		__bfalse	.LL490
         17:D2CD  90 11      			bcc	.LL490
11349                        	
11350                        		.dbg	line,	"include\routines_LEVELS.c", 2764; {
11351                        	
11352                        		.dbg	line,	"include\routines_LEVELS.c", 2765; spr_x(player_pos_x+32);
11353                        		__ld.wm		_player_pos_x
         17:D2CF  AD DA 24   			lda.l	_player_pos_x
         17:D2D2  AC DB 24   			ldy.h	_player_pos_x
11354                        		__add.wi	32
         17:D2D5  18         			clc
         17:D2D6  69 20      			adc.l	#32
         17:D2D8  90 01      			bcc	!+
         17:D2DA  C8         			iny
         17:D2DB             	!:
11355                        		__call		_spr_x.1
         17:D2DB  20 0A E8   			call	_spr_x.1
11356                        	
11357                        		.dbg	line,	"include\routines_LEVELS.c", 2766; 
11358                        	
11359                        		.dbg	line,	"include\routines_LEVELS.c", 2767; }
11360                        	
11361                        		.dbg	line,	"include\routines_LEVELS.c", 2768; 
11362                        	
11363                        		.dbg	line,	"include\routines_LEVELS.c", 2769; else
11364                        		__bra		.LL491
         17:D2DE  80 0F      			bra	.LL491
11365    17:D2E0             	.LL490:
11366                        	
11367                        		.dbg	line,	"include\routines_LEVELS.c", 2770; {
11368                        	
11369                        		.dbg	line,	"include\routines_LEVELS.c", 2771; spr_x(player_pos_x-16);
11370                        		__ld.wm		_player_pos_x
         17:D2E0  AD DA 24   			lda.l	_player_pos_x
         17:D2E3  AC DB 24   			ldy.h	_player_pos_x
11371                        		__sub.wi	16
         17:D2E6  38         			sec
         17:D2E7  E9 10      			sbc.l	#16
         17:D2E9  B0 01      			bcs	!+
         17:D2EB  88         			dey
         17:D2EC             	!:
11372                        		__call		_spr_x.1
         17:D2EC  20 0A E8   			call	_spr_x.1
11373                        	
11374                        		.dbg	line,	"include\routines_LEVELS.c", 2772; }
11375    17:D2EF             	.LL491:
11376                        	
11377                        		.dbg	line,	"include\routines_LEVELS.c", 2774; weapon_y_offset = 6;
11378                        		__st.umiq	6, _weapon_y_offset
         17:D2EF  A9 06      			lda.l	#6
         17:D2F1  8D 4C 26   			sta	_weapon_y_offset
11379                        	
11380                        		.dbg	line,	"include\routines_LEVELS.c", 2775; }
11381                        	
11382                        		.dbg	line,	"include\routines_LEVELS.c", 2777; else if(player_counter_attack == 7)
11383                        		__bra		.LL492
         17:D2F4  4C BC D4   			bra	.LL492
11384    17:D2F7             	.LL489:
11385                        		__ld.umq	_player_counter_attack
         17:D2F7  AD 1E 23   			lda	_player_counter_attack
11386                        		__equ_b.uiq	7
         17:D2FA  C9 07      			cmp	#7
         17:D2FC  F0 01      			beq	!+
         17:D2FE  18         			clc
         17:D2FF             	!:
11387                        		__bfalse	.LL493
         17:D2FF  90 62      			bcc	.LL493
11388                        	
11389                        		.dbg	line,	"include\routines_LEVELS.c", 2778; {
11390                        	
11391                        		.dbg	line,	"include\routines_LEVELS.c", 2779; list_chain_active[0] = TRUE;
11392                        		__st.umiq	1, _list_chain_active
         17:D301  A9 01      			lda.l	#1
         17:D303  8D 29 23   			sta	_list_chain_active
11393                        	
11394                        		.dbg	line,	"include\routines_LEVELS.c", 2780; spr_set(chain_id);
11395                        		__ld.umq	_chain_id
         17:D306  AD 25 23   			lda	_chain_id
11396                        		__call		_spr_set.1
         17:D309  20 DD E7   			call	_spr_set.1
11397                        	
11398                        		.dbg	line,	"include\routines_LEVELS.c", 2782; if(player_axis == AXIS_RIGHT)
11399                        		__not.um	_player_axis
         17:D30C  AD 19 23   			lda	_player_axis
         17:D30F  18         			clc
         17:D310  D0 01      			bne	!+
         17:D312  38         			sec
         17:D313             	!:
11400                        		__bfalse	.LL494
         17:D313  90 27      			bcc	.LL494
11401                        	
11402                        		.dbg	line,	"include\routines_LEVELS.c", 2783; {
11403                        	
11404                        		.dbg	line,	"include\routines_LEVELS.c", 2784; spr_x(player_pos_x+32);
11405                        		__ld.wm		_player_pos_x
         17:D315  AD DA 24   			lda.l	_player_pos_x
         17:D318  AC DB 24   			ldy.h	_player_pos_x
11406                        		__add.wi	32
         17:D31B  18         			clc
         17:D31C  69 20      			adc.l	#32
         17:D31E  90 01      			bcc	!+
         17:D320  C8         			iny
         17:D321             	!:
11407                        		__call		_spr_x.1
         17:D321  20 0A E8   			call	_spr_x.1
11408                        	
11409                        		.dbg	line,	"include\routines_LEVELS.c", 2786; spr_set(weapon_id);
11410                        		__ld.umq	_weapon_id
         17:D324  AD 26 23   			lda	_weapon_id
11411                        		__call		_spr_set.1
         17:D327  20 DD E7   			call	_spr_set.1
11412                        	
11413                        		.dbg	line,	"include\routines_LEVELS.c", 2787; spr_x(player_pos_x+48);
11414                        		__ld.wm		_player_pos_x
         17:D32A  AD DA 24   			lda.l	_player_pos_x
         17:D32D  AC DB 24   			ldy.h	_player_pos_x
11415                        		__add.wi	48
         17:D330  18         			clc
         17:D331  69 30      			adc.l	#48
         17:D333  90 01      			bcc	!+
         17:D335  C8         			iny
         17:D336             	!:
11416                        		__call		_spr_x.1
         17:D336  20 0A E8   			call	_spr_x.1
11417                        	
11418                        		.dbg	line,	"include\routines_LEVELS.c", 2788; }
11419                        	
11420                        		.dbg	line,	"include\routines_LEVELS.c", 2789; 
11421                        	
11422                        		.dbg	line,	"include\routines_LEVELS.c", 2790; else
11423                        		__bra		.LL495
         17:D339  4C BC D4   			bra	.LL495
11424    17:D33C             	.LL494:
11425                        	
11426                        		.dbg	line,	"include\routines_LEVELS.c", 2791; {
11427                        	
11428                        		.dbg	line,	"include\routines_LEVELS.c", 2792; spr_x(player_pos_x-16);
11429                        		__ld.wm		_player_pos_x
         17:D33C  AD DA 24   			lda.l	_player_pos_x
         17:D33F  AC DB 24   			ldy.h	_player_pos_x
11430                        		__sub.wi	16
         17:D342  38         			sec
         17:D343  E9 10      			sbc.l	#16
         17:D345  B0 01      			bcs	!+
         17:D347  88         			dey
         17:D348             	!:
11431                        		__call		_spr_x.1
         17:D348  20 0A E8   			call	_spr_x.1
11432                        	
11433                        		.dbg	line,	"include\routines_LEVELS.c", 2794; spr_set(weapon_id);
11434                        		__ld.umq	_weapon_id
         17:D34B  AD 26 23   			lda	_weapon_id
11435                        		__call		_spr_set.1
         17:D34E  20 DD E7   			call	_spr_set.1
11436                        	
11437                        		.dbg	line,	"include\routines_LEVELS.c", 2795; spr_x(player_pos_x-32);
11438                        		__ld.wm		_player_pos_x
         17:D351  AD DA 24   			lda.l	_player_pos_x
         17:D354  AC DB 24   			ldy.h	_player_pos_x
11439                        		__sub.wi	32
         17:D357  38         			sec
         17:D358  E9 20      			sbc.l	#32
         17:D35A  B0 01      			bcs	!+
         17:D35C  88         			dey
         17:D35D             	!:
11440                        		__call		_spr_x.1
         17:D35D  20 0A E8   			call	_spr_x.1
11441                        	
11442                        		.dbg	line,	"include\routines_LEVELS.c", 2796; }
11443    17:D360             	.LL495	.alias		.LL496
11444                        	
11445                        		.dbg	line,	"include\routines_LEVELS.c", 2797; }
11446                        	
11447                        		.dbg	line,	"include\routines_LEVELS.c", 2799; else if(player_counter_attack == 8)
11448                        		__bra		.LL496
         17:D360  4C BC D4   			bra	.LL496
11449    17:D363             	.LL493:
11450                        		__ld.umq	_player_counter_attack
         17:D363  AD 1E 23   			lda	_player_counter_attack
11451                        		__equ_b.uiq	8
         17:D366  C9 08      			cmp	#8
         17:D368  F0 01      			beq	!+
         17:D36A  18         			clc
         17:D36B             	!:
11452                        		__bfalse	.LL497
         17:D36B  90 67      			bcc	.LL497
11453                        	
11454                        		.dbg	line,	"include\routines_LEVELS.c", 2800; {
11455                        	
11456                        		.dbg	line,	"include\routines_LEVELS.c", 2801; list_chain_active[1] = TRUE;
11457                        		__st.umiq	1, _list_chain_active + 1
         17:D36D  A9 01      			lda.l	#1
         17:D36F  8D 2A 23   			sta	_list_chain_active + 1
11458                        	
11459                        		.dbg	line,	"include\routines_LEVELS.c", 2802; spr_set(chain_id+1);
11460                        		__ld.um		_chain_id
         17:D372  AD 25 23   			lda	_chain_id
         17:D375  C2         			cly
11461                        		__add.wi	1
         17:D376  1A         			inc	a
         17:D377  D0 01      			bne	!+
         17:D379  C8         			iny
         17:D37A             	!:
11462                        		__call		_spr_set.1
         17:D37A  20 DD E7   			call	_spr_set.1
11463                        	
11464                        		.dbg	line,	"include\routines_LEVELS.c", 2804; if(player_axis == AXIS_RIGHT)
11465                        		__not.um	_player_axis
         17:D37D  AD 19 23   			lda	_player_axis
         17:D380  18         			clc
         17:D381  D0 01      			bne	!+
         17:D383  38         			sec
         17:D384             	!:
11466                        		__bfalse	.LL498
         17:D384  90 27      			bcc	.LL498
11467                        	
11468                        		.dbg	line,	"include\routines_LEVELS.c", 2805; {
11469                        	
11470                        		.dbg	line,	"include\routines_LEVELS.c", 2806; spr_x(player_pos_x+48);
11471                        		__ld.wm		_player_pos_x
         17:D386  AD DA 24   			lda.l	_player_pos_x
         17:D389  AC DB 24   			ldy.h	_player_pos_x
11472                        		__add.wi	48
         17:D38C  18         			clc
         17:D38D  69 30      			adc.l	#48
         17:D38F  90 01      			bcc	!+
         17:D391  C8         			iny
         17:D392             	!:
11473                        		__call		_spr_x.1
         17:D392  20 0A E8   			call	_spr_x.1
11474                        	
11475                        		.dbg	line,	"include\routines_LEVELS.c", 2808; spr_set(weapon_id);
11476                        		__ld.umq	_weapon_id
         17:D395  AD 26 23   			lda	_weapon_id
11477                        		__call		_spr_set.1
         17:D398  20 DD E7   			call	_spr_set.1
11478                        	
11479                        		.dbg	line,	"include\routines_LEVELS.c", 2809; spr_x(player_pos_x+64);
11480                        		__ld.wm		_player_pos_x
         17:D39B  AD DA 24   			lda.l	_player_pos_x
         17:D39E  AC DB 24   			ldy.h	_player_pos_x
11481                        		__add.wi	64
         17:D3A1  18         			clc
         17:D3A2  69 40      			adc.l	#64
         17:D3A4  90 01      			bcc	!+
         17:D3A6  C8         			iny
         17:D3A7             	!:
11482                        		__call		_spr_x.1
         17:D3A7  20 0A E8   			call	_spr_x.1
11483                        	
11484                        		.dbg	line,	"include\routines_LEVELS.c", 2810; }
11485                        	
11486                        		.dbg	line,	"include\routines_LEVELS.c", 2811; 
11487                        	
11488                        		.dbg	line,	"include\routines_LEVELS.c", 2812; else
11489                        		__bra		.LL499
         17:D3AA  4C BC D4   			bra	.LL499
11490    17:D3AD             	.LL498:
11491                        	
11492                        		.dbg	line,	"include\routines_LEVELS.c", 2813; {
11493                        	
11494                        		.dbg	line,	"include\routines_LEVELS.c", 2814; spr_x(player_pos_x-32);
11495                        		__ld.wm		_player_pos_x
         17:D3AD  AD DA 24   			lda.l	_player_pos_x
         17:D3B0  AC DB 24   			ldy.h	_player_pos_x
11496                        		__sub.wi	32
         17:D3B3  38         			sec
         17:D3B4  E9 20      			sbc.l	#32
         17:D3B6  B0 01      			bcs	!+
         17:D3B8  88         			dey
         17:D3B9             	!:
11497                        		__call		_spr_x.1
         17:D3B9  20 0A E8   			call	_spr_x.1
11498                        	
11499                        		.dbg	line,	"include\routines_LEVELS.c", 2816; spr_set(weapon_id);
11500                        		__ld.umq	_weapon_id
         17:D3BC  AD 26 23   			lda	_weapon_id
11501                        		__call		_spr_set.1
         17:D3BF  20 DD E7   			call	_spr_set.1
11502                        	
11503                        		.dbg	line,	"include\routines_LEVELS.c", 2817; spr_x(player_pos_x-48);
11504                        		__ld.wm		_player_pos_x
         17:D3C2  AD DA 24   			lda.l	_player_pos_x
         17:D3C5  AC DB 24   			ldy.h	_player_pos_x
11505                        		__sub.wi	48
         17:D3C8  38         			sec
         17:D3C9  E9 30      			sbc.l	#48
         17:D3CB  B0 01      			bcs	!+
         17:D3CD  88         			dey
         17:D3CE             	!:
11506                        		__call		_spr_x.1
         17:D3CE  20 0A E8   			call	_spr_x.1
11507                        	
11508                        		.dbg	line,	"include\routines_LEVELS.c", 2818; }
11509    17:D3D1             	.LL499	.alias		.LL500
11510                        	
11511                        		.dbg	line,	"include\routines_LEVELS.c", 2819; }
11512                        	
11513                        		.dbg	line,	"include\routines_LEVELS.c", 2821; else if(player_counter_attack == 9)
11514                        		__bra		.LL500
         17:D3D1  4C BC D4   			bra	.LL500
11515    17:D3D4             	.LL497:
11516                        		__ld.umq	_player_counter_attack
         17:D3D4  AD 1E 23   			lda	_player_counter_attack
11517                        		__equ_b.uiq	9
         17:D3D7  C9 09      			cmp	#9
         17:D3D9  F0 01      			beq	!+
         17:D3DB  18         			clc
         17:D3DC             	!:
11518                        		__bfalse	.LL501
         17:D3DC  90 68      			bcc	.LL501
11519                        	
11520                        		.dbg	line,	"include\routines_LEVELS.c", 2822; {
11521                        	
11522                        		.dbg	line,	"include\routines_LEVELS.c", 2823; list_chain_active[2] = TRUE;
11523                        		__st.umiq	1, _list_chain_active + 2
         17:D3DE  A9 01      			lda.l	#1
         17:D3E0  8D 2B 23   			sta	_list_chain_active + 2
11524                        	
11525                        		.dbg	line,	"include\routines_LEVELS.c", 2824; spr_set(chain_id+2);
11526                        		__ld.um		_chain_id
         17:D3E3  AD 25 23   			lda	_chain_id
         17:D3E6  C2         			cly
11527                        		__add.wi	2
         17:D3E7  18         			clc
         17:D3E8  69 02      			adc.l	#2
         17:D3EA  90 01      			bcc	!+
         17:D3EC  C8         			iny
         17:D3ED             	!:
11528                        		__call		_spr_set.1
         17:D3ED  20 DD E7   			call	_spr_set.1
11529                        	
11530                        		.dbg	line,	"include\routines_LEVELS.c", 2826; if(player_axis == AXIS_RIGHT)
11531                        		__not.um	_player_axis
         17:D3F0  AD 19 23   			lda	_player_axis
         17:D3F3  18         			clc
         17:D3F4  D0 01      			bne	!+
         17:D3F6  38         			sec
         17:D3F7             	!:
11532                        		__bfalse	.LL502
         17:D3F7  90 27      			bcc	.LL502
11533                        	
11534                        		.dbg	line,	"include\routines_LEVELS.c", 2827; {
11535                        	
11536                        		.dbg	line,	"include\routines_LEVELS.c", 2828; spr_x(player_pos_x+64);
11537                        		__ld.wm		_player_pos_x
         17:D3F9  AD DA 24   			lda.l	_player_pos_x
         17:D3FC  AC DB 24   			ldy.h	_player_pos_x
11538                        		__add.wi	64
         17:D3FF  18         			clc
         17:D400  69 40      			adc.l	#64
         17:D402  90 01      			bcc	!+
         17:D404  C8         			iny
         17:D405             	!:
11539                        		__call		_spr_x.1
         17:D405  20 0A E8   			call	_spr_x.1
11540                        	
11541                        		.dbg	line,	"include\routines_LEVELS.c", 2830; spr_set(weapon_id);
11542                        		__ld.umq	_weapon_id
         17:D408  AD 26 23   			lda	_weapon_id
11543                        		__call		_spr_set.1
         17:D40B  20 DD E7   			call	_spr_set.1
11544                        	
11545                        		.dbg	line,	"include\routines_LEVELS.c", 2831; spr_x(player_pos_x+80);
11546                        		__ld.wm		_player_pos_x
         17:D40E  AD DA 24   			lda.l	_player_pos_x
         17:D411  AC DB 24   			ldy.h	_player_pos_x
11547                        		__add.wi	80
         17:D414  18         			clc
         17:D415  69 50      			adc.l	#80
         17:D417  90 01      			bcc	!+
         17:D419  C8         			iny
         17:D41A             	!:
11548                        		__call		_spr_x.1
         17:D41A  20 0A E8   			call	_spr_x.1
11549                        	
11550                        		.dbg	line,	"include\routines_LEVELS.c", 2832; }
11551                        	
11552                        		.dbg	line,	"include\routines_LEVELS.c", 2833; 
11553                        	
11554                        		.dbg	line,	"include\routines_LEVELS.c", 2834; else
11555                        		__bra		.LL503
         17:D41D  4C BC D4   			bra	.LL503
11556    17:D420             	.LL502:
11557                        	
11558                        		.dbg	line,	"include\routines_LEVELS.c", 2835; {
11559                        	
11560                        		.dbg	line,	"include\routines_LEVELS.c", 2836; spr_x(player_pos_x-48);
11561                        		__ld.wm		_player_pos_x
         17:D420  AD DA 24   			lda.l	_player_pos_x
         17:D423  AC DB 24   			ldy.h	_player_pos_x
11562                        		__sub.wi	48
         17:D426  38         			sec
         17:D427  E9 30      			sbc.l	#48
         17:D429  B0 01      			bcs	!+
         17:D42B  88         			dey
         17:D42C             	!:
11563                        		__call		_spr_x.1
         17:D42C  20 0A E8   			call	_spr_x.1
11564                        	
11565                        		.dbg	line,	"include\routines_LEVELS.c", 2838; spr_set(weapon_id);
11566                        		__ld.umq	_weapon_id
         17:D42F  AD 26 23   			lda	_weapon_id
11567                        		__call		_spr_set.1
         17:D432  20 DD E7   			call	_spr_set.1
11568                        	
11569                        		.dbg	line,	"include\routines_LEVELS.c", 2839; spr_x(player_pos_x-64);
11570                        		__ld.wm		_player_pos_x
         17:D435  AD DA 24   			lda.l	_player_pos_x
         17:D438  AC DB 24   			ldy.h	_player_pos_x
11571                        		__sub.wi	64
         17:D43B  38         			sec
         17:D43C  E9 40      			sbc.l	#64
         17:D43E  B0 01      			bcs	!+
         17:D440  88         			dey
         17:D441             	!:
11572                        		__call		_spr_x.1
         17:D441  20 0A E8   			call	_spr_x.1
11573                        	
11574                        		.dbg	line,	"include\routines_LEVELS.c", 2840; }
11575    17:D444             	.LL503	.alias		.LL504
11576                        	
11577                        		.dbg	line,	"include\routines_LEVELS.c", 2841; }
11578                        	
11579                        		.dbg	line,	"include\routines_LEVELS.c", 2843; else if(player_counter_attack == 23)
11580                        		__bra		.LL504
         17:D444  80 76      			bra	.LL504
11581    17:D446             	.LL501:
11582                        		__ld.umq	_player_counter_attack
         17:D446  AD 1E 23   			lda	_player_counter_attack
11583                        		__equ_b.uiq	23
         17:D449  C9 17      			cmp	#23
         17:D44B  F0 01      			beq	!+
         17:D44D  18         			clc
         17:D44E             	!:
11584                        		__bfalse	.LL505
         17:D44E  90 6C      			bcc	.LL505
11585                        	
11586                        		.dbg	line,	"include\routines_LEVELS.c", 2844; {
11587                        	
11588                        		.dbg	line,	"include\routines_LEVELS.c", 2845; spr_set(chain_id);
11589                        		__ld.umq	_chain_id
         17:D450  AD 25 23   			lda	_chain_id
11590                        		__call		_spr_set.1
         17:D453  20 DD E7   			call	_spr_set.1
11591                        	
11592                        		.dbg	line,	"include\routines_LEVELS.c", 2846; spr_hide();
11593                        		__call		_spr_hide
         17:D456  20 F8 E7   			call	_spr_hide
11594                        	
11595                        		.dbg	line,	"include\routines_LEVELS.c", 2848; spr_set(chain_id+1);
11596                        		__ld.um		_chain_id
         17:D459  AD 25 23   			lda	_chain_id
         17:D45C  C2         			cly
11597                        		__add.wi	1
         17:D45D  1A         			inc	a
         17:D45E  D0 01      			bne	!+
         17:D460  C8         			iny
         17:D461             	!:
11598                        		__call		_spr_set.1
         17:D461  20 DD E7   			call	_spr_set.1
11599                        	
11600                        		.dbg	line,	"include\routines_LEVELS.c", 2849; spr_hide();
11601                        		__call		_spr_hide
         17:D464  20 F8 E7   			call	_spr_hide
11602                        	
11603                        		.dbg	line,	"include\routines_LEVELS.c", 2851; spr_set(chain_id+2);
11604                        		__ld.um		_chain_id
         17:D467  AD 25 23   			lda	_chain_id
         17:D46A  C2         			cly
11605                        		__add.wi	2
         17:D46B  18         			clc
         17:D46C  69 02      			adc.l	#2
         17:D46E  90 01      			bcc	!+
         17:D470  C8         			iny
         17:D471             	!:
11606                        		__call		_spr_set.1
         17:D471  20 DD E7   			call	_spr_set.1
11607                        	
11608                        		.dbg	line,	"include\routines_LEVELS.c", 2852; spr_hide();
11609                        		__call		_spr_hide
         17:D474  20 F8 E7   			call	_spr_hide
11610                        	
11611                        		.dbg	line,	"include\routines_LEVELS.c", 2854; spr_set(player_id);
11612                        		__ld.umq	_player_id
         17:D477  AD 17 23   			lda	_player_id
11613                        		__call		_spr_set.1
         17:D47A  20 DD E7   			call	_spr_set.1
11614                        	
11615                        		.dbg	line,	"include\routines_LEVELS.c", 2855; spr_pattern(PLAYER_IDLE_VRAM_ADR);
11616                        		__ld.wi		5120
         17:D47D  62         			cla
         17:D47E  A0 14      			ldy.h	#5120
11617                        		__call		_spr_pattern.1
         17:D480  20 26 E8   			call	_spr_pattern.1
11618                        	
11619                        		.dbg	line,	"include\routines_LEVELS.c", 2857; spr_set(weapon_id);
11620                        		__ld.umq	_weapon_id
         17:D483  AD 26 23   			lda	_weapon_id
11621                        		__call		_spr_set.1
         17:D486  20 DD E7   			call	_spr_set.1
11622                        	
11623                        		.dbg	line,	"include\routines_LEVELS.c", 2858; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
11624                        		__ld.wi		31808
         17:D489  A9 40      			lda.l	#31808
         17:D48B  A0 7C      			ldy.h	#31808
11625                        		__call		_spr_pattern.1
         17:D48D  20 26 E8   			call	_spr_pattern.1
11626                        	
11627                        		.dbg	line,	"include\routines_LEVELS.c", 2859; spr_x(player_pos_x+8);
11628                        		__ld.wm		_player_pos_x
         17:D490  AD DA 24   			lda.l	_player_pos_x
         17:D493  AC DB 24   			ldy.h	_player_pos_x
11629                        		__add.wi	8
         17:D496  18         			clc
         17:D497  69 08      			adc.l	#8
         17:D499  90 01      			bcc	!+
         17:D49B  C8         			iny
         17:D49C             	!:
11630                        		__call		_spr_x.1
         17:D49C  20 0A E8   			call	_spr_x.1
11631                        	
11632                        		.dbg	line,	"include\routines_LEVELS.c", 2860; spr_y(player_pos_y+16);
11633                        		__ld.wm		_player_pos_y
         17:D49F  AD DC 24   			lda.l	_player_pos_y
         17:D4A2  AC DD 24   			ldy.h	_player_pos_y
11634                        		__add.wi	16
         17:D4A5  18         			clc
         17:D4A6  69 10      			adc.l	#16
         17:D4A8  90 01      			bcc	!+
         17:D4AA  C8         			iny
         17:D4AB             	!:
11635                        		__call		_spr_y.1
         17:D4AB  20 19 E8   			call	_spr_y.1
11636                        	
11637                        		.dbg	line,	"include\routines_LEVELS.c", 2862; player_attack = FALSE;
11638                        		__st.umiq	0, _player_attack
         17:D4AE  9C 20 23   			stz	_player_attack
11639                        	
11640                        		.dbg	line,	"include\routines_LEVELS.c", 2863; player_counter_anim = 1;
11641                        		__st.umiq	1, _player_counter_anim
         17:D4B1  A9 01      			lda.l	#1
         17:D4B3  8D 1B 23   			sta	_player_counter_anim
11642                        	
11643                        		.dbg	line,	"include\routines_LEVELS.c", 2864; player_state = STATE_IDLE;
11644                        		__st.umiq	0, _player_state
         17:D4B6  9C 18 23   			stz	_player_state
11645                        	
11646                        		.dbg	line,	"include\routines_LEVELS.c", 2865; return;
11647                        		__bra		.LL483
         17:D4B9  4C F0 DA   			bra	.LL483
11648                        	
11649                        		.dbg	line,	"include\routines_LEVELS.c", 2866; }
11650                        	
11651                        		.dbg	line,	"include\routines_LEVELS.c", 2869; player_counter_attack += 1;
11652    17:D4BC             	.LL505:
11653    17:D4BC             	.LL504:
11654    17:D4BC             	.LL500:
11655    17:D4BC             	.LL496:
11656    17:D4BC             	.LL492:
11657    17:D4BC             	.LL488:
11658                        		__add_st.umiq	1, _player_counter_attack
         17:D4BC  EE 1E 23   			inc	_player_counter_attack
11659                        	
11660                        		.dbg	line,	"include\routines_LEVELS.c", 2872; // SET WEAPON Y POSITION //
11661                        	
11662                        		.dbg	line,	"include\routines_LEVELS.c", 2873; spr_set(weapon_id);
11663                        		__ld.umq	_weapon_id
         17:D4BF  AD 26 23   			lda	_weapon_id
11664                        		__call		_spr_set.1
         17:D4C2  20 DD E7   			call	_spr_set.1
11665                        	
11666                        		.dbg	line,	"include\routines_LEVELS.c", 2874; spr_y(player_pos_y + weapon_y_offset);
11667                        		__ld.bm		_weapon_y_offset
         17:D4C5  AD 4C 26   			lda	_weapon_y_offset
         17:D4C8  C2         			cly
         17:D4C9  10 01      			bpl	!+
         17:D4CB  88         			dey
         17:D4CC             	!:
11668                        		__add.wm	_player_pos_y
         17:D4CC  18         			clc
         17:D4CD  6D DC 24   			adc.l	_player_pos_y
         17:D4D0  42         			say
         17:D4D1  6D DD 24   			adc.h	_player_pos_y
         17:D4D4  42         			say
11669                        		__call		_spr_y.1
         17:D4D5  20 19 E8   			call	_spr_y.1
11670                        	
11671                        		.dbg	line,	"include\routines_LEVELS.c", 2877; // SET CHAIN Y POSITION //
11672                        	
11673                        		.dbg	line,	"include\routines_LEVELS.c", 2878; for(i=0 ; i<3 ; i++)
11674                        		__st.umiq	0, __update_WEAPON_end - 1  /* i */
         17:D4D8  9C 0E 23   			stz	__update_WEAPON_end - 1
11675    17:D4DB             	.LL506:
11676                        		__ld.umq	__update_WEAPON_end - 1  /* i */
         17:D4DB  AD 0E 23   			lda	__update_WEAPON_end - 1
11677                        		__ult_b.uiq	3
         17:D4DE  C9 03      			cmp	#3		; Subtract integer from A.
         17:D4E0  6A         			ror	a		; CC if A < integer.
         17:D4E1  49 80      			eor	#$80
         17:D4E3  2A         			rol	a
11678                        		__btrue		.LL508
         17:D4E4  B0 08      			bcs	.LL508
11679                        		__bra		.LL509
         17:D4E6  4C F0 DA   			bra	.LL509
11680    17:D4E9             	.LL507:
11681                        		__inc.umq	__update_WEAPON_end - 1  /* i */
         17:D4E9  EE 0E 23   			inc	__update_WEAPON_end - 1
11682                        		__bra		.LL506
         17:D4EC  80 ED      			bra	.LL506
11683    17:D4EE             	.LL508:
11684                        	
11685                        		.dbg	line,	"include\routines_LEVELS.c", 2879; {
11686                        	
11687                        		.dbg	line,	"include\routines_LEVELS.c", 2880; spr_set(chain_id+i);
11688                        		__ld.um		_chain_id
         17:D4EE  AD 25 23   			lda	_chain_id
         17:D4F1  C2         			cly
11689                        		__add.um	__update_WEAPON_end - 1  /* i */
         17:D4F2  18         			clc
         17:D4F3  6D 0E 23   			adc	__update_WEAPON_end - 1
         17:D4F6  90 01      			bcc	!+
         17:D4F8  C8         			iny
         17:D4F9             	!:
11690                        		__call		_spr_set.1
         17:D4F9  20 DD E7   			call	_spr_set.1
11691                        	
11692                        		.dbg	line,	"include\routines_LEVELS.c", 2882; spr_y( ((player_pos_y + 16) * list_chain_active[i]) - 16); //list_chain_active[0] = TRUE;
11693                        		__ld.wm		_player_pos_y
         17:D4FC  AD DC 24   			lda.l	_player_pos_y
         17:D4FF  AC DD 24   			ldy.h	_player_pos_y
11694                        		__add.wi	16
         17:D502  18         			clc
         17:D503  69 10      			adc.l	#16
         17:D505  90 01      			bcc	!+
         17:D507  C8         			iny
         17:D508             	!:
11695                        		__push.wr
         17:D508  5A         			phy
         17:D509  48         			pha
11696                        		__ldx.umq	__update_WEAPON_end - 1  /* i */
         17:D50A  AE 0E 23   			ldx	__update_WEAPON_end - 1
11697                        		__ld.uax	_list_chain_active
         17:D50D  BD 29 23   			lda	_list_chain_active, x
         17:D510  C2         			cly
11698                        		__mul.wt
         17:D511  85 00      			sta.l	<multiplier
         17:D513  84 01      			sty.h	<multiplier
         17:D515  68         			pla
         17:D516  7A         			ply
         17:D517  20 4C E4   			jsr	__mulint
11699                        		__sub.wi	16
         17:D51A  38         			sec
         17:D51B  E9 10      			sbc.l	#16
         17:D51D  B0 01      			bcs	!+
         17:D51F  88         			dey
         17:D520             	!:
11700                        		__call		_spr_y.1
         17:D520  20 19 E8   			call	_spr_y.1
11701                        	
11702                        		.dbg	line,	"include\routines_LEVELS.c", 2883; }
11703                        		__bra		.LL507
         17:D523  80 C4      			bra	.LL507
11704    17:D525             	.LL509	.alias		.LL510
11705                        	
11706                        		.dbg	line,	"include\routines_LEVELS.c", 2884; }
11707                        	
11708                        		.dbg	line,	"include\routines_LEVELS.c", 2887; else if(player_state == STATE_CROUCH_ATTACK)
11709                        		__bra		.LL510
         17:D525  4C F0 DA   			bra	.LL510
11710    17:D528             	.LL484:
11711                        		__ld.umq	_player_state
         17:D528  AD 18 23   			lda	_player_state
11712                        		__equ_b.uiq	8
         17:D52B  C9 08      			cmp	#8
         17:D52D  F0 01      			beq	!+
         17:D52F  18         			clc
         17:D530             	!:
11713                        		__bfalse	.LL511
         17:D530  B0 03 4C 2D			bcc	.LL511
         17:D534  D8          
11714                        	
11715                        		.dbg	line,	"include\routines_LEVELS.c", 2888; {
11716                        	
11717                        		.dbg	line,	"include\routines_LEVELS.c", 2889; char i;
11718                        	
11719                        		.dbg	line,	"include\routines_LEVELS.c", 2890; 
11720                        	
11721                        		.dbg	line,	"include\routines_LEVELS.c", 2891; recenter_CAMERA();
11722                        		__call		_recenter_CAMERA
         17:D535  20 63 FF   			call	_recenter_CAMERA
11723                        	
11724                        		.dbg	line,	"include\routines_LEVELS.c", 2893; if(player_counter_attack == 0)
11725                        		__not.um	_player_counter_attack
         17:D538  AD 1E 23   			lda	_player_counter_attack
         17:D53B  18         			clc
         17:D53C  D0 01      			bne	!+
         17:D53E  38         			sec
         17:D53F             	!:
11726                        		__bfalse	.LL512
         17:D53F  90 47      			bcc	.LL512
11727                        	
11728                        		.dbg	line,	"include\routines_LEVELS.c", 2894; {
11729                        	
11730                        		.dbg	line,	"include\routines_LEVELS.c", 2895; spr_set(player_id);
11731                        		__ld.umq	_player_id
         17:D541  AD 17 23   			lda	_player_id
11732                        		__call		_spr_set.1
         17:D544  20 DD E7   			call	_spr_set.1
11733                        	
11734                        		.dbg	line,	"include\routines_LEVELS.c", 2896; spr_pattern(PLAYER_CROUCH_ATTACK_1_VRAM_ADR);
11735                        		__ld.wi		9984
         17:D547  62         			cla
         17:D548  A0 27      			ldy.h	#9984
11736                        		__call		_spr_pattern.1
         17:D54A  20 26 E8   			call	_spr_pattern.1
11737                        	
11738                        		.dbg	line,	"include\routines_LEVELS.c", 2898; spr_set(weapon_id);
11739                        		__ld.umq	_weapon_id
         17:D54D  AD 26 23   			lda	_weapon_id
11740                        		__call		_spr_set.1
         17:D550  20 DD E7   			call	_spr_set.1
11741                        	
11742                        		.dbg	line,	"include\routines_LEVELS.c", 2899; spr_pattern(WEAPON_ATTACK_1_VRAM_ADRESS);
11743                        		__ld.wi		32000
         17:D553  62         			cla
         17:D554  A0 7D      			ldy.h	#32000
11744                        		__call		_spr_pattern.1
         17:D556  20 26 E8   			call	_spr_pattern.1
11745                        	
11746                        		.dbg	line,	"include\routines_LEVELS.c", 2901; if(player_axis == AXIS_RIGHT)
11747                        		__not.um	_player_axis
         17:D559  AD 19 23   			lda	_player_axis
         17:D55C  18         			clc
         17:D55D  D0 01      			bne	!+
         17:D55F  38         			sec
         17:D560             	!:
11748                        		__bfalse	.LL513
         17:D560  90 11      			bcc	.LL513
11749                        	
11750                        		.dbg	line,	"include\routines_LEVELS.c", 2902; {
11751                        	
11752                        		.dbg	line,	"include\routines_LEVELS.c", 2903; spr_x(player_pos_x-16);
11753                        		__ld.wm		_player_pos_x
         17:D562  AD DA 24   			lda.l	_player_pos_x
         17:D565  AC DB 24   			ldy.h	_player_pos_x
11754                        		__sub.wi	16
         17:D568  38         			sec
         17:D569  E9 10      			sbc.l	#16
         17:D56B  B0 01      			bcs	!+
         17:D56D  88         			dey
         17:D56E             	!:
11755                        		__call		_spr_x.1
         17:D56E  20 0A E8   			call	_spr_x.1
11756                        	
11757                        		.dbg	line,	"include\routines_LEVELS.c", 2904; }
11758                        	
11759                        		.dbg	line,	"include\routines_LEVELS.c", 2906; else
11760                        		__bra		.LL514
         17:D571  80 0F      			bra	.LL514
11761    17:D573             	.LL513:
11762                        	
11763                        		.dbg	line,	"include\routines_LEVELS.c", 2907; {
11764                        	
11765                        		.dbg	line,	"include\routines_LEVELS.c", 2908; spr_x(player_pos_x+32);
11766                        		__ld.wm		_player_pos_x
         17:D573  AD DA 24   			lda.l	_player_pos_x
         17:D576  AC DB 24   			ldy.h	_player_pos_x
11767                        		__add.wi	32
         17:D579  18         			clc
         17:D57A  69 20      			adc.l	#32
         17:D57C  90 01      			bcc	!+
         17:D57E  C8         			iny
         17:D57F             	!:
11768                        		__call		_spr_x.1
         17:D57F  20 0A E8   			call	_spr_x.1
11769                        	
11770                        		.dbg	line,	"include\routines_LEVELS.c", 2909; }
11771    17:D582             	.LL514:
11772                        	
11773                        		.dbg	line,	"include\routines_LEVELS.c", 2911; weapon_y_offset = 0;
11774                        		__st.umiq	0, _weapon_y_offset
         17:D582  9C 4C 26   			stz	_weapon_y_offset
11775                        	
11776                        		.dbg	line,	"include\routines_LEVELS.c", 2912; }
11777                        	
11778                        		.dbg	line,	"include\routines_LEVELS.c", 2914; else if(player_counter_attack == 6)
11779                        		__bra		.LL515
         17:D585  4C C1 D7   			bra	.LL515
11780    17:D588             	.LL512:
11781                        		__ld.umq	_player_counter_attack
         17:D588  AD 1E 23   			lda	_player_counter_attack
11782                        		__equ_b.uiq	6
         17:D58B  C9 06      			cmp	#6
         17:D58D  F0 01      			beq	!+
         17:D58F  18         			clc
         17:D590             	!:
11783                        		__bfalse	.LL516
         17:D590  90 4A      			bcc	.LL516
11784                        	
11785                        		.dbg	line,	"include\routines_LEVELS.c", 2915; {
11786                        	
11787                        		.dbg	line,	"include\routines_LEVELS.c", 2916; spr_set(player_id);
11788                        		__ld.umq	_player_id
         17:D592  AD 17 23   			lda	_player_id
11789                        		__call		_spr_set.1
         17:D595  20 DD E7   			call	_spr_set.1
11790                        	
11791                        		.dbg	line,	"include\routines_LEVELS.c", 2917; spr_pattern(PLAYER_CROUCH_ATTACK_2_VRAM_ADR);
11792                        		__ld.wi		10240
         17:D598  62         			cla
         17:D599  A0 28      			ldy.h	#10240
11793                        		__call		_spr_pattern.1
         17:D59B  20 26 E8   			call	_spr_pattern.1
11794                        	
11795                        		.dbg	line,	"include\routines_LEVELS.c", 2919; spr_set(weapon_id);
11796                        		__ld.umq	_weapon_id
         17:D59E  AD 26 23   			lda	_weapon_id
11797                        		__call		_spr_set.1
         17:D5A1  20 DD E7   			call	_spr_set.1
11798                        	
11799                        		.dbg	line,	"include\routines_LEVELS.c", 2920; spr_pattern(WEAPON_ATTACK_2_VRAM_ADRESS);
11800                        		__ld.wi		32064
         17:D5A4  A9 40      			lda.l	#32064
         17:D5A6  A0 7D      			ldy.h	#32064
11801                        		__call		_spr_pattern.1
         17:D5A8  20 26 E8   			call	_spr_pattern.1
11802                        	
11803                        		.dbg	line,	"include\routines_LEVELS.c", 2922; if(player_axis == AXIS_RIGHT)
11804                        		__not.um	_player_axis
         17:D5AB  AD 19 23   			lda	_player_axis
         17:D5AE  18         			clc
         17:D5AF  D0 01      			bne	!+
         17:D5B1  38         			sec
         17:D5B2             	!:
11805                        		__bfalse	.LL517
         17:D5B2  90 11      			bcc	.LL517
11806                        	
11807                        		.dbg	line,	"include\routines_LEVELS.c", 2923; {
11808                        	
11809                        		.dbg	line,	"include\routines_LEVELS.c", 2924; spr_x(player_pos_x+32);
11810                        		__ld.wm		_player_pos_x
         17:D5B4  AD DA 24   			lda.l	_player_pos_x
         17:D5B7  AC DB 24   			ldy.h	_player_pos_x
11811                        		__add.wi	32
         17:D5BA  18         			clc
         17:D5BB  69 20      			adc.l	#32
         17:D5BD  90 01      			bcc	!+
         17:D5BF  C8         			iny
         17:D5C0             	!:
11812                        		__call		_spr_x.1
         17:D5C0  20 0A E8   			call	_spr_x.1
11813                        	
11814                        		.dbg	line,	"include\routines_LEVELS.c", 2925; 
11815                        	
11816                        		.dbg	line,	"include\routines_LEVELS.c", 2926; }
11817                        	
11818                        		.dbg	line,	"include\routines_LEVELS.c", 2927; 
11819                        	
11820                        		.dbg	line,	"include\routines_LEVELS.c", 2928; else
11821                        		__bra		.LL518
         17:D5C3  80 0F      			bra	.LL518
11822    17:D5C5             	.LL517:
11823                        	
11824                        		.dbg	line,	"include\routines_LEVELS.c", 2929; {
11825                        	
11826                        		.dbg	line,	"include\routines_LEVELS.c", 2930; spr_x(player_pos_x-16);
11827                        		__ld.wm		_player_pos_x
         17:D5C5  AD DA 24   			lda.l	_player_pos_x
         17:D5C8  AC DB 24   			ldy.h	_player_pos_x
11828                        		__sub.wi	16
         17:D5CB  38         			sec
         17:D5CC  E9 10      			sbc.l	#16
         17:D5CE  B0 01      			bcs	!+
         17:D5D0  88         			dey
         17:D5D1             	!:
11829                        		__call		_spr_x.1
         17:D5D1  20 0A E8   			call	_spr_x.1
11830                        	
11831                        		.dbg	line,	"include\routines_LEVELS.c", 2931; }
11832    17:D5D4             	.LL518:
11833                        	
11834                        		.dbg	line,	"include\routines_LEVELS.c", 2933; weapon_y_offset = 14;
11835                        		__st.umiq	14, _weapon_y_offset
         17:D5D4  A9 0E      			lda.l	#14
         17:D5D6  8D 4C 26   			sta	_weapon_y_offset
11836                        	
11837                        		.dbg	line,	"include\routines_LEVELS.c", 2934; }
11838                        	
11839                        		.dbg	line,	"include\routines_LEVELS.c", 2936; else if(player_counter_attack == 7)
11840                        		__bra		.LL519
         17:D5D9  4C C1 D7   			bra	.LL519
11841    17:D5DC             	.LL516:
11842                        		__ld.umq	_player_counter_attack
         17:D5DC  AD 1E 23   			lda	_player_counter_attack
11843                        		__equ_b.uiq	7
         17:D5DF  C9 07      			cmp	#7
         17:D5E1  F0 01      			beq	!+
         17:D5E3  18         			clc
         17:D5E4             	!:
11844                        		__bfalse	.LL520
         17:D5E4  90 62      			bcc	.LL520
11845                        	
11846                        		.dbg	line,	"include\routines_LEVELS.c", 2937; {
11847                        	
11848                        		.dbg	line,	"include\routines_LEVELS.c", 2938; list_chain_active[0] = TRUE;
11849                        		__st.umiq	1, _list_chain_active
         17:D5E6  A9 01      			lda.l	#1
         17:D5E8  8D 29 23   			sta	_list_chain_active
11850                        	
11851                        		.dbg	line,	"include\routines_LEVELS.c", 2939; spr_set(chain_id);
11852                        		__ld.umq	_chain_id
         17:D5EB  AD 25 23   			lda	_chain_id
11853                        		__call		_spr_set.1
         17:D5EE  20 DD E7   			call	_spr_set.1
11854                        	
11855                        		.dbg	line,	"include\routines_LEVELS.c", 2941; if(player_axis == AXIS_RIGHT)
11856                        		__not.um	_player_axis
         17:D5F1  AD 19 23   			lda	_player_axis
         17:D5F4  18         			clc
         17:D5F5  D0 01      			bne	!+
         17:D5F7  38         			sec
         17:D5F8             	!:
11857                        		__bfalse	.LL521
         17:D5F8  90 27      			bcc	.LL521
11858                        	
11859                        		.dbg	line,	"include\routines_LEVELS.c", 2942; {
11860                        	
11861                        		.dbg	line,	"include\routines_LEVELS.c", 2943; spr_x(player_pos_x+32);
11862                        		__ld.wm		_player_pos_x
         17:D5FA  AD DA 24   			lda.l	_player_pos_x
         17:D5FD  AC DB 24   			ldy.h	_player_pos_x
11863                        		__add.wi	32
         17:D600  18         			clc
         17:D601  69 20      			adc.l	#32
         17:D603  90 01      			bcc	!+
         17:D605  C8         			iny
         17:D606             	!:
11864                        		__call		_spr_x.1
         17:D606  20 0A E8   			call	_spr_x.1
11865                        	
11866                        		.dbg	line,	"include\routines_LEVELS.c", 2945; spr_set(weapon_id);
11867                        		__ld.umq	_weapon_id
         17:D609  AD 26 23   			lda	_weapon_id
11868                        		__call		_spr_set.1
         17:D60C  20 DD E7   			call	_spr_set.1
11869                        	
11870                        		.dbg	line,	"include\routines_LEVELS.c", 2946; spr_x(player_pos_x+48);
11871                        		__ld.wm		_player_pos_x
         17:D60F  AD DA 24   			lda.l	_player_pos_x
         17:D612  AC DB 24   			ldy.h	_player_pos_x
11872                        		__add.wi	48
         17:D615  18         			clc
         17:D616  69 30      			adc.l	#48
         17:D618  90 01      			bcc	!+
         17:D61A  C8         			iny
         17:D61B             	!:
11873                        		__call		_spr_x.1
         17:D61B  20 0A E8   			call	_spr_x.1
11874                        	
11875                        		.dbg	line,	"include\routines_LEVELS.c", 2947; }
11876                        	
11877                        		.dbg	line,	"include\routines_LEVELS.c", 2948; 
11878                        	
11879                        		.dbg	line,	"include\routines_LEVELS.c", 2949; else
11880                        		__bra		.LL522
         17:D61E  4C C1 D7   			bra	.LL522
11881    17:D621             	.LL521:
11882                        	
11883                        		.dbg	line,	"include\routines_LEVELS.c", 2950; {
11884                        	
11885                        		.dbg	line,	"include\routines_LEVELS.c", 2951; spr_x(player_pos_x-16);
11886                        		__ld.wm		_player_pos_x
         17:D621  AD DA 24   			lda.l	_player_pos_x
         17:D624  AC DB 24   			ldy.h	_player_pos_x
11887                        		__sub.wi	16
         17:D627  38         			sec
         17:D628  E9 10      			sbc.l	#16
         17:D62A  B0 01      			bcs	!+
         17:D62C  88         			dey
         17:D62D             	!:
11888                        		__call		_spr_x.1
         17:D62D  20 0A E8   			call	_spr_x.1
11889                        	
11890                        		.dbg	line,	"include\routines_LEVELS.c", 2953; spr_set(weapon_id);
11891                        		__ld.umq	_weapon_id
         17:D630  AD 26 23   			lda	_weapon_id
11892                        		__call		_spr_set.1
         17:D633  20 DD E7   			call	_spr_set.1
11893                        	
11894                        		.dbg	line,	"include\routines_LEVELS.c", 2954; spr_x(player_pos_x-32);
11895                        		__ld.wm		_player_pos_x
         17:D636  AD DA 24   			lda.l	_player_pos_x
         17:D639  AC DB 24   			ldy.h	_player_pos_x
11896                        		__sub.wi	32
         17:D63C  38         			sec
         17:D63D  E9 20      			sbc.l	#32
         17:D63F  B0 01      			bcs	!+
         17:D641  88         			dey
         17:D642             	!:
11897                        		__call		_spr_x.1
         17:D642  20 0A E8   			call	_spr_x.1
11898                        	
11899                        		.dbg	line,	"include\routines_LEVELS.c", 2955; }
11900    17:D645             	.LL522	.alias		.LL523
11901                        	
11902                        		.dbg	line,	"include\routines_LEVELS.c", 2956; }
11903                        	
11904                        		.dbg	line,	"include\routines_LEVELS.c", 2958; else if(player_counter_attack == 8)
11905                        		__bra		.LL523
         17:D645  4C C1 D7   			bra	.LL523
11906    17:D648             	.LL520:
11907                        		__ld.umq	_player_counter_attack
         17:D648  AD 1E 23   			lda	_player_counter_attack
11908                        		__equ_b.uiq	8
         17:D64B  C9 08      			cmp	#8
         17:D64D  F0 01      			beq	!+
         17:D64F  18         			clc
         17:D650             	!:
11909                        		__bfalse	.LL524
         17:D650  90 67      			bcc	.LL524
11910                        	
11911                        		.dbg	line,	"include\routines_LEVELS.c", 2959; {
11912                        	
11913                        		.dbg	line,	"include\routines_LEVELS.c", 2960; list_chain_active[1] = TRUE;
11914                        		__st.umiq	1, _list_chain_active + 1
         17:D652  A9 01      			lda.l	#1
         17:D654  8D 2A 23   			sta	_list_chain_active + 1
11915                        	
11916                        		.dbg	line,	"include\routines_LEVELS.c", 2961; spr_set(chain_id+1);
11917                        		__ld.um		_chain_id
         17:D657  AD 25 23   			lda	_chain_id
         17:D65A  C2         			cly
11918                        		__add.wi	1
         17:D65B  1A         			inc	a
         17:D65C  D0 01      			bne	!+
         17:D65E  C8         			iny
         17:D65F             	!:
11919                        		__call		_spr_set.1
         17:D65F  20 DD E7   			call	_spr_set.1
11920                        	
11921                        		.dbg	line,	"include\routines_LEVELS.c", 2963; if(player_axis == AXIS_RIGHT)
11922                        		__not.um	_player_axis
         17:D662  AD 19 23   			lda	_player_axis
         17:D665  18         			clc
         17:D666  D0 01      			bne	!+
         17:D668  38         			sec
         17:D669             	!:
11923                        		__bfalse	.LL525
         17:D669  90 27      			bcc	.LL525
11924                        	
11925                        		.dbg	line,	"include\routines_LEVELS.c", 2964; {
11926                        	
11927                        		.dbg	line,	"include\routines_LEVELS.c", 2965; spr_x(player_pos_x+48);
11928                        		__ld.wm		_player_pos_x
         17:D66B  AD DA 24   			lda.l	_player_pos_x
         17:D66E  AC DB 24   			ldy.h	_player_pos_x
11929                        		__add.wi	48
         17:D671  18         			clc
         17:D672  69 30      			adc.l	#48
         17:D674  90 01      			bcc	!+
         17:D676  C8         			iny
         17:D677             	!:
11930                        		__call		_spr_x.1
         17:D677  20 0A E8   			call	_spr_x.1
11931                        	
11932                        		.dbg	line,	"include\routines_LEVELS.c", 2967; spr_set(weapon_id);
11933                        		__ld.umq	_weapon_id
         17:D67A  AD 26 23   			lda	_weapon_id
11934                        		__call		_spr_set.1
         17:D67D  20 DD E7   			call	_spr_set.1
11935                        	
11936                        		.dbg	line,	"include\routines_LEVELS.c", 2968; spr_x(player_pos_x+64);
11937                        		__ld.wm		_player_pos_x
         17:D680  AD DA 24   			lda.l	_player_pos_x
         17:D683  AC DB 24   			ldy.h	_player_pos_x
11938                        		__add.wi	64
         17:D686  18         			clc
         17:D687  69 40      			adc.l	#64
         17:D689  90 01      			bcc	!+
         17:D68B  C8         			iny
         17:D68C             	!:
11939                        		__call		_spr_x.1
         17:D68C  20 0A E8   			call	_spr_x.1
11940                        	
11941                        		.dbg	line,	"include\routines_LEVELS.c", 2969; }
11942                        	
11943                        		.dbg	line,	"include\routines_LEVELS.c", 2970; 
11944                        	
11945                        		.dbg	line,	"include\routines_LEVELS.c", 2971; else
11946                        		__bra		.LL526
         17:D68F  4C C1 D7   			bra	.LL526
11947    17:D692             	.LL525:
11948                        	
11949                        		.dbg	line,	"include\routines_LEVELS.c", 2972; {
11950                        	
11951                        		.dbg	line,	"include\routines_LEVELS.c", 2973; spr_x(player_pos_x-32);
11952                        		__ld.wm		_player_pos_x
         17:D692  AD DA 24   			lda.l	_player_pos_x
         17:D695  AC DB 24   			ldy.h	_player_pos_x
11953                        		__sub.wi	32
         17:D698  38         			sec
         17:D699  E9 20      			sbc.l	#32
         17:D69B  B0 01      			bcs	!+
         17:D69D  88         			dey
         17:D69E             	!:
11954                        		__call		_spr_x.1
         17:D69E  20 0A E8   			call	_spr_x.1
11955                        	
11956                        		.dbg	line,	"include\routines_LEVELS.c", 2975; spr_set(weapon_id);
11957                        		__ld.umq	_weapon_id
         17:D6A1  AD 26 23   			lda	_weapon_id
11958                        		__call		_spr_set.1
         17:D6A4  20 DD E7   			call	_spr_set.1
11959                        	
11960                        		.dbg	line,	"include\routines_LEVELS.c", 2976; spr_x(player_pos_x-48);
11961                        		__ld.wm		_player_pos_x
         17:D6A7  AD DA 24   			lda.l	_player_pos_x
         17:D6AA  AC DB 24   			ldy.h	_player_pos_x
11962                        		__sub.wi	48
         17:D6AD  38         			sec
         17:D6AE  E9 30      			sbc.l	#48
         17:D6B0  B0 01      			bcs	!+
         17:D6B2  88         			dey
         17:D6B3             	!:
11963                        		__call		_spr_x.1
         17:D6B3  20 0A E8   			call	_spr_x.1
11964                        	
11965                        		.dbg	line,	"include\routines_LEVELS.c", 2977; }
11966    17:D6B6             	.LL526	.alias		.LL527
11967                        	
11968                        		.dbg	line,	"include\routines_LEVELS.c", 2978; }
11969                        	
11970                        		.dbg	line,	"include\routines_LEVELS.c", 2980; else if(player_counter_attack == 9)
11971                        		__bra		.LL527
         17:D6B6  4C C1 D7   			bra	.LL527
11972    17:D6B9             	.LL524:
11973                        		__ld.umq	_player_counter_attack
         17:D6B9  AD 1E 23   			lda	_player_counter_attack
11974                        		__equ_b.uiq	9
         17:D6BC  C9 09      			cmp	#9
         17:D6BE  F0 01      			beq	!+
         17:D6C0  18         			clc
         17:D6C1             	!:
11975                        		__bfalse	.LL528
         17:D6C1  90 69      			bcc	.LL528
11976                        	
11977                        		.dbg	line,	"include\routines_LEVELS.c", 2981; {
11978                        	
11979                        		.dbg	line,	"include\routines_LEVELS.c", 2982; list_chain_active[2] = TRUE;
11980                        		__st.umiq	1, _list_chain_active + 2
         17:D6C3  A9 01      			lda.l	#1
         17:D6C5  8D 2B 23   			sta	_list_chain_active + 2
11981                        	
11982                        		.dbg	line,	"include\routines_LEVELS.c", 2983; spr_set(chain_id+2);
11983                        		__ld.um		_chain_id
         17:D6C8  AD 25 23   			lda	_chain_id
         17:D6CB  C2         			cly
11984                        		__add.wi	2
         17:D6CC  18         			clc
         17:D6CD  69 02      			adc.l	#2
         17:D6CF  90 01      			bcc	!+
         17:D6D1  C8         			iny
         17:D6D2             	!:
11985                        		__call		_spr_set.1
         17:D6D2  20 DD E7   			call	_spr_set.1
11986                        	
11987                        		.dbg	line,	"include\routines_LEVELS.c", 2985; if(player_axis == AXIS_RIGHT)
11988                        		__not.um	_player_axis
         17:D6D5  AD 19 23   			lda	_player_axis
         17:D6D8  18         			clc
         17:D6D9  D0 01      			bne	!+
         17:D6DB  38         			sec
         17:D6DC             	!:
11989                        		__bfalse	.LL529
         17:D6DC  90 27      			bcc	.LL529
11990                        	
11991                        		.dbg	line,	"include\routines_LEVELS.c", 2986; {
11992                        	
11993                        		.dbg	line,	"include\routines_LEVELS.c", 2987; spr_x(player_pos_x+64);
11994                        		__ld.wm		_player_pos_x
         17:D6DE  AD DA 24   			lda.l	_player_pos_x
         17:D6E1  AC DB 24   			ldy.h	_player_pos_x
11995                        		__add.wi	64
         17:D6E4  18         			clc
         17:D6E5  69 40      			adc.l	#64
         17:D6E7  90 01      			bcc	!+
         17:D6E9  C8         			iny
         17:D6EA             	!:
11996                        		__call		_spr_x.1
         17:D6EA  20 0A E8   			call	_spr_x.1
11997                        	
11998                        		.dbg	line,	"include\routines_LEVELS.c", 2989; spr_set(weapon_id);
11999                        		__ld.umq	_weapon_id
         17:D6ED  AD 26 23   			lda	_weapon_id
12000                        		__call		_spr_set.1
         17:D6F0  20 DD E7   			call	_spr_set.1
12001                        	
12002                        		.dbg	line,	"include\routines_LEVELS.c", 2990; spr_x(player_pos_x+80);
12003                        		__ld.wm		_player_pos_x
         17:D6F3  AD DA 24   			lda.l	_player_pos_x
         17:D6F6  AC DB 24   			ldy.h	_player_pos_x
12004                        		__add.wi	80
         17:D6F9  18         			clc
         17:D6FA  69 50      			adc.l	#80
         17:D6FC  90 01      			bcc	!+
         17:D6FE  C8         			iny
         17:D6FF             	!:
12005                        		__call		_spr_x.1
         17:D6FF  20 0A E8   			call	_spr_x.1
12006                        	
12007                        		.dbg	line,	"include\routines_LEVELS.c", 2991; }
12008                        	
12009                        		.dbg	line,	"include\routines_LEVELS.c", 2992; 
12010                        	
12011                        		.dbg	line,	"include\routines_LEVELS.c", 2993; else
12012                        		__bra		.LL530
         17:D702  4C C1 D7   			bra	.LL530
12013    17:D705             	.LL529:
12014                        	
12015                        		.dbg	line,	"include\routines_LEVELS.c", 2994; {
12016                        	
12017                        		.dbg	line,	"include\routines_LEVELS.c", 2995; spr_x(player_pos_x-48);
12018                        		__ld.wm		_player_pos_x
         17:D705  AD DA 24   			lda.l	_player_pos_x
         17:D708  AC DB 24   			ldy.h	_player_pos_x
12019                        		__sub.wi	48
         17:D70B  38         			sec
         17:D70C  E9 30      			sbc.l	#48
         17:D70E  B0 01      			bcs	!+
         17:D710  88         			dey
         17:D711             	!:
12020                        		__call		_spr_x.1
         17:D711  20 0A E8   			call	_spr_x.1
12021                        	
12022                        		.dbg	line,	"include\routines_LEVELS.c", 2997; spr_set(weapon_id);
12023                        		__ld.umq	_weapon_id
         17:D714  AD 26 23   			lda	_weapon_id
12024                        		__call		_spr_set.1
         17:D717  20 DD E7   			call	_spr_set.1
12025                        	
12026                        		.dbg	line,	"include\routines_LEVELS.c", 2998; spr_x(player_pos_x-64);
12027                        		__ld.wm		_player_pos_x
         17:D71A  AD DA 24   			lda.l	_player_pos_x
         17:D71D  AC DB 24   			ldy.h	_player_pos_x
12028                        		__sub.wi	64
         17:D720  38         			sec
         17:D721  E9 40      			sbc.l	#64
         17:D723  B0 01      			bcs	!+
         17:D725  88         			dey
         17:D726             	!:
12029                        		__call		_spr_x.1
         17:D726  20 0A E8   			call	_spr_x.1
12030                        	
12031                        		.dbg	line,	"include\routines_LEVELS.c", 2999; }
12032    17:D729             	.LL530	.alias		.LL531
12033                        	
12034                        		.dbg	line,	"include\routines_LEVELS.c", 3000; }
12035                        	
12036                        		.dbg	line,	"include\routines_LEVELS.c", 3002; else if(player_counter_attack == 23)
12037                        		__bra		.LL531
         17:D729  4C C1 D7   			bra	.LL531
12038    17:D72C             	.LL528:
12039                        		__ld.umq	_player_counter_attack
         17:D72C  AD 1E 23   			lda	_player_counter_attack
12040                        		__equ_b.uiq	23
         17:D72F  C9 17      			cmp	#23
         17:D731  F0 01      			beq	!+
         17:D733  18         			clc
         17:D734             	!:
12041                        		__bfalse	.LL532
         17:D734  B0 03 4C C1			bcc	.LL532
         17:D738  D7          
12042                        	
12043                        		.dbg	line,	"include\routines_LEVELS.c", 3003; {
12044                        	
12045                        		.dbg	line,	"include\routines_LEVELS.c", 3004; spr_set(chain_id);
12046                        		__ld.umq	_chain_id
         17:D739  AD 25 23   			lda	_chain_id
12047                        		__call		_spr_set.1
         17:D73C  20 DD E7   			call	_spr_set.1
12048                        	
12049                        		.dbg	line,	"include\routines_LEVELS.c", 3005; spr_hide();
12050                        		__call		_spr_hide
         17:D73F  20 F8 E7   			call	_spr_hide
12051                        	
12052                        		.dbg	line,	"include\routines_LEVELS.c", 3007; spr_set(chain_id+1);
12053                        		__ld.um		_chain_id
         17:D742  AD 25 23   			lda	_chain_id
         17:D745  C2         			cly
12054                        		__add.wi	1
         17:D746  1A         			inc	a
         17:D747  D0 01      			bne	!+
         17:D749  C8         			iny
         17:D74A             	!:
12055                        		__call		_spr_set.1
         17:D74A  20 DD E7   			call	_spr_set.1
12056                        	
12057                        		.dbg	line,	"include\routines_LEVELS.c", 3008; spr_hide();
12058                        		__call		_spr_hide
         17:D74D  20 F8 E7   			call	_spr_hide
12059                        	
12060                        		.dbg	line,	"include\routines_LEVELS.c", 3010; spr_set(chain_id+2);
12061                        		__ld.um		_chain_id
         17:D750  AD 25 23   			lda	_chain_id
         17:D753  C2         			cly
12062                        		__add.wi	2
         17:D754  18         			clc
         17:D755  69 02      			adc.l	#2
         17:D757  90 01      			bcc	!+
         17:D759  C8         			iny
         17:D75A             	!:
12063                        		__call		_spr_set.1
         17:D75A  20 DD E7   			call	_spr_set.1
12064                        	
12065                        		.dbg	line,	"include\routines_LEVELS.c", 3011; spr_hide();
12066                        		__call		_spr_hide
         17:D75D  20 F8 E7   			call	_spr_hide
12067                        	
12068                        		.dbg	line,	"include\routines_LEVELS.c", 3013; spr_set(player_id);
12069                        		__ld.umq	_player_id
         17:D760  AD 17 23   			lda	_player_id
12070                        		__call		_spr_set.1
         17:D763  20 DD E7   			call	_spr_set.1
12071                        	
12072                        		.dbg	line,	"include\routines_LEVELS.c", 3014; spr_pattern(PLAYER_CROUCH_VRAM_ADR);
12073                        		__ld.wi		7168
         17:D766  62         			cla
         17:D767  A0 1C      			ldy.h	#7168
12074                        		__call		_spr_pattern.1
         17:D769  20 26 E8   			call	_spr_pattern.1
12075                        	
12076                        		.dbg	line,	"include\routines_LEVELS.c", 3016; spr_set(weapon_id);
12077                        		__ld.umq	_weapon_id
         17:D76C  AD 26 23   			lda	_weapon_id
12078                        		__call		_spr_set.1
         17:D76F  20 DD E7   			call	_spr_set.1
12079                        	
12080                        		.dbg	line,	"include\routines_LEVELS.c", 3017; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
12081                        		__ld.wi		31808
         17:D772  A9 40      			lda.l	#31808
         17:D774  A0 7C      			ldy.h	#31808
12082                        		__call		_spr_pattern.1
         17:D776  20 26 E8   			call	_spr_pattern.1
12083                        	
12084                        		.dbg	line,	"include\routines_LEVELS.c", 3018; 
12085                        	
12086                        		.dbg	line,	"include\routines_LEVELS.c", 3019; if(player_axis == AXIS_RIGHT)
12087                        		__not.um	_player_axis
         17:D779  AD 19 23   			lda	_player_axis
         17:D77C  18         			clc
         17:D77D  D0 01      			bne	!+
         17:D77F  38         			sec
         17:D780             	!:
12088                        		__bfalse	.LL533
         17:D780  90 11      			bcc	.LL533
12089                        	
12090                        		.dbg	line,	"include\routines_LEVELS.c", 3020; {
12091                        	
12092                        		.dbg	line,	"include\routines_LEVELS.c", 3021; spr_x(player_pos_x-1);
12093                        		__ld.wm		_player_pos_x
         17:D782  AD DA 24   			lda.l	_player_pos_x
         17:D785  AC DB 24   			ldy.h	_player_pos_x
12094                        		__sub.wi	1
         17:D788  38         			sec
         17:D789  E9 01      			sbc.l	#1
         17:D78B  B0 01      			bcs	!+
         17:D78D  88         			dey
         17:D78E             	!:
12095                        		__call		_spr_x.1
         17:D78E  20 0A E8   			call	_spr_x.1
12096                        	
12097                        		.dbg	line,	"include\routines_LEVELS.c", 3022; }
12098                        	
12099                        		.dbg	line,	"include\routines_LEVELS.c", 3024; else
12100                        		__bra		.LL534
         17:D791  80 0F      			bra	.LL534
12101    17:D793             	.LL533:
12102                        	
12103                        		.dbg	line,	"include\routines_LEVELS.c", 3025; {
12104                        	
12105                        		.dbg	line,	"include\routines_LEVELS.c", 3026; spr_x(player_pos_x+17);
12106                        		__ld.wm		_player_pos_x
         17:D793  AD DA 24   			lda.l	_player_pos_x
         17:D796  AC DB 24   			ldy.h	_player_pos_x
12107                        		__add.wi	17
         17:D799  18         			clc
         17:D79A  69 11      			adc.l	#17
         17:D79C  90 01      			bcc	!+
         17:D79E  C8         			iny
         17:D79F             	!:
12108                        		__call		_spr_x.1
         17:D79F  20 0A E8   			call	_spr_x.1
12109                        	
12110                        		.dbg	line,	"include\routines_LEVELS.c", 3027; }
12111    17:D7A2             	.LL534:
12112                        	
12113                        		.dbg	line,	"include\routines_LEVELS.c", 3029; spr_y(player_pos_y+18);
12114                        		__ld.wm		_player_pos_y
         17:D7A2  AD DC 24   			lda.l	_player_pos_y
         17:D7A5  AC DD 24   			ldy.h	_player_pos_y
12115                        		__add.wi	18
         17:D7A8  18         			clc
         17:D7A9  69 12      			adc.l	#18
         17:D7AB  90 01      			bcc	!+
         17:D7AD  C8         			iny
         17:D7AE             	!:
12116                        		__call		_spr_y.1
         17:D7AE  20 19 E8   			call	_spr_y.1
12117                        	
12118                        		.dbg	line,	"include\routines_LEVELS.c", 3031; player_attack = FALSE;
12119                        		__st.umiq	0, _player_attack
         17:D7B1  9C 20 23   			stz	_player_attack
12120                        	
12121                        		.dbg	line,	"include\routines_LEVELS.c", 3032; player_counter_attack = 1;
12122                        		__st.umiq	1, _player_counter_attack
         17:D7B4  A9 01      			lda.l	#1
         17:D7B6  8D 1E 23   			sta	_player_counter_attack
12123                        	
12124                        		.dbg	line,	"include\routines_LEVELS.c", 3033; player_state = STATE_CROUCH;
12125                        		__st.umiq	7, _player_state
         17:D7B9  A9 07      			lda.l	#7
         17:D7BB  8D 18 23   			sta	_player_state
12126                        	
12127                        		.dbg	line,	"include\routines_LEVELS.c", 3034; return;
12128                        		__bra		.LL483
         17:D7BE  4C F0 DA   			bra	.LL483
12129                        	
12130                        		.dbg	line,	"include\routines_LEVELS.c", 3035; }
12131                        	
12132                        		.dbg	line,	"include\routines_LEVELS.c", 3038; player_counter_attack += 1;
12133    17:D7C1             	.LL532:
12134    17:D7C1             	.LL531:
12135    17:D7C1             	.LL527:
12136    17:D7C1             	.LL523:
12137    17:D7C1             	.LL519:
12138    17:D7C1             	.LL515:
12139                        		__add_st.umiq	1, _player_counter_attack
         17:D7C1  EE 1E 23   			inc	_player_counter_attack
12140                        	
12141                        		.dbg	line,	"include\routines_LEVELS.c", 3041; // SET WEAPON Y POSITION //
12142                        	
12143                        		.dbg	line,	"include\routines_LEVELS.c", 3042; spr_set(weapon_id);
12144                        		__ld.umq	_weapon_id
         17:D7C4  AD 26 23   			lda	_weapon_id
12145                        		__call		_spr_set.1
         17:D7C7  20 DD E7   			call	_spr_set.1
12146                        	
12147                        		.dbg	line,	"include\routines_LEVELS.c", 3043; spr_y(player_pos_y + weapon_y_offset);
12148                        		__ld.bm		_weapon_y_offset
         17:D7CA  AD 4C 26   			lda	_weapon_y_offset
         17:D7CD  C2         			cly
         17:D7CE  10 01      			bpl	!+
         17:D7D0  88         			dey
         17:D7D1             	!:
12149                        		__add.wm	_player_pos_y
         17:D7D1  18         			clc
         17:D7D2  6D DC 24   			adc.l	_player_pos_y
         17:D7D5  42         			say
         17:D7D6  6D DD 24   			adc.h	_player_pos_y
         17:D7D9  42         			say
12150                        		__call		_spr_y.1
         17:D7DA  20 19 E8   			call	_spr_y.1
12151                        	
12152                        		.dbg	line,	"include\routines_LEVELS.c", 3046; // SET CHAIN Y POSITION //
12153                        	
12154                        		.dbg	line,	"include\routines_LEVELS.c", 3047; for(i=0 ; i<3 ; i++)
12155                        		__st.umiq	0, __update_WEAPON_end - 2  /* i */
         17:D7DD  9C 0D 23   			stz	__update_WEAPON_end - 2
12156    17:D7E0             	.LL535:
12157                        		__ld.umq	__update_WEAPON_end - 2  /* i */
         17:D7E0  AD 0D 23   			lda	__update_WEAPON_end - 2
12158                        		__ult_b.uiq	3
         17:D7E3  C9 03      			cmp	#3		; Subtract integer from A.
         17:D7E5  6A         			ror	a		; CC if A < integer.
         17:D7E6  49 80      			eor	#$80
         17:D7E8  2A         			rol	a
12159                        		__btrue		.LL537
         17:D7E9  B0 08      			bcs	.LL537
12160                        		__bra		.LL538
         17:D7EB  4C F0 DA   			bra	.LL538
12161    17:D7EE             	.LL536:
12162                        		__inc.umq	__update_WEAPON_end - 2  /* i */
         17:D7EE  EE 0D 23   			inc	__update_WEAPON_end - 2
12163                        		__bra		.LL535
         17:D7F1  80 ED      			bra	.LL535
12164    17:D7F3             	.LL537:
12165                        	
12166                        		.dbg	line,	"include\routines_LEVELS.c", 3048; {
12167                        	
12168                        		.dbg	line,	"include\routines_LEVELS.c", 3049; spr_set(chain_id+i);
12169                        		__ld.um		_chain_id
         17:D7F3  AD 25 23   			lda	_chain_id
         17:D7F6  C2         			cly
12170                        		__add.um	__update_WEAPON_end - 2  /* i */
         17:D7F7  18         			clc
         17:D7F8  6D 0D 23   			adc	__update_WEAPON_end - 2
         17:D7FB  90 01      			bcc	!+
         17:D7FD  C8         			iny
         17:D7FE             	!:
12171                        		__call		_spr_set.1
         17:D7FE  20 DD E7   			call	_spr_set.1
12172                        	
12173                        		.dbg	line,	"include\routines_LEVELS.c", 3051; spr_y( ((player_pos_y + 24) * list_chain_active[i]) - 16); //list_chain_active[0] = TRUE;
12174                        		__ld.wm		_player_pos_y
         17:D801  AD DC 24   			lda.l	_player_pos_y
         17:D804  AC DD 24   			ldy.h	_player_pos_y
12175                        		__add.wi	24
         17:D807  18         			clc
         17:D808  69 18      			adc.l	#24
         17:D80A  90 01      			bcc	!+
         17:D80C  C8         			iny
         17:D80D             	!:
12176                        		__push.wr
         17:D80D  5A         			phy
         17:D80E  48         			pha
12177                        		__ldx.umq	__update_WEAPON_end - 2  /* i */
         17:D80F  AE 0D 23   			ldx	__update_WEAPON_end - 2
12178                        		__ld.uax	_list_chain_active
         17:D812  BD 29 23   			lda	_list_chain_active, x
         17:D815  C2         			cly
12179                        		__mul.wt
         17:D816  85 00      			sta.l	<multiplier
         17:D818  84 01      			sty.h	<multiplier
         17:D81A  68         			pla
         17:D81B  7A         			ply
         17:D81C  20 4C E4   			jsr	__mulint
12180                        		__sub.wi	16
         17:D81F  38         			sec
         17:D820  E9 10      			sbc.l	#16
         17:D822  B0 01      			bcs	!+
         17:D824  88         			dey
         17:D825             	!:
12181                        		__call		_spr_y.1
         17:D825  20 19 E8   			call	_spr_y.1
12182                        	
12183                        		.dbg	line,	"include\routines_LEVELS.c", 3052; }
12184                        		__bra		.LL536
         17:D828  80 C4      			bra	.LL536
12185    17:D82A             	.LL538	.alias		.LL539
12186                        	
12187                        		.dbg	line,	"include\routines_LEVELS.c", 3053; }
12188                        	
12189                        		.dbg	line,	"include\routines_LEVELS.c", 3056; else if(player_state == STATE_HANG)
12190                        		__bra		.LL539
         17:D82A  4C F0 DA   			bra	.LL539
12191    17:D82D             	.LL511:
12192                        		__ld.umq	_player_state
         17:D82D  AD 18 23   			lda	_player_state
12193                        		__equ_b.uiq	10
         17:D830  C9 0A      			cmp	#10
         17:D832  F0 01      			beq	!+
         17:D834  18         			clc
         17:D835             	!:
12194                        		__bfalse	.LL540
         17:D835  B0 03 4C F0			bcc	.LL540
         17:D839  DA          
12195                        	
12196                        		.dbg	line,	"include\routines_LEVELS.c", 3057; {
12197                        	
12198                        		.dbg	line,	"include\routines_LEVELS.c", 3058; if(player_attack == TRUE)
12199                        		__ld.umq	_player_attack
         17:D83A  AD 20 23   			lda	_player_attack
12200                        		__equ_b.uiq	1
         17:D83D  C9 01      			cmp	#1
         17:D83F  F0 01      			beq	!+
         17:D841  18         			clc
         17:D842             	!:
12201                        		__bfalse	.LL541
         17:D842  B0 03 4C F0			bcc	.LL541
         17:D846  DA          
12202                        	
12203                        		.dbg	line,	"include\routines_LEVELS.c", 3059; {
12204                        	
12205                        		.dbg	line,	"include\routines_LEVELS.c", 3060; if(player_counter_attack == 0)
12206                        		__not.um	_player_counter_attack
         17:D847  AD 1E 23   			lda	_player_counter_attack
         17:D84A  18         			clc
         17:D84B  D0 01      			bne	!+
         17:D84D  38         			sec
         17:D84E             	!:
12207                        		__bfalse	.LL542
         17:D84E  90 53      			bcc	.LL542
12208                        	
12209                        		.dbg	line,	"include\routines_LEVELS.c", 3061; {
12210                        	
12211                        		.dbg	line,	"include\routines_LEVELS.c", 3062; spr_set(player_id);
12212                        		__ld.umq	_player_id
         17:D850  AD 17 23   			lda	_player_id
12213                        		__call		_spr_set.1
         17:D853  20 DD E7   			call	_spr_set.1
12214                        	
12215                        		.dbg	line,	"include\routines_LEVELS.c", 3063; spr_pattern(PLAYER_HANG_ATTACK_1_VRAM_ADR);
12216                        		__ld.wi		11008
         17:D856  62         			cla
         17:D857  A0 2B      			ldy.h	#11008
12217                        		__call		_spr_pattern.1
         17:D859  20 26 E8   			call	_spr_pattern.1
12218                        	
12219                        		.dbg	line,	"include\routines_LEVELS.c", 3065; spr_set(weapon_id);
12220                        		__ld.umq	_weapon_id
         17:D85C  AD 26 23   			lda	_weapon_id
12221                        		__call		_spr_set.1
         17:D85F  20 DD E7   			call	_spr_set.1
12222                        	
12223                        		.dbg	line,	"include\routines_LEVELS.c", 3066; spr_pattern(WEAPON_ATTACK_1_VRAM_ADRESS);
12224                        		__ld.wi		32000
         17:D862  62         			cla
         17:D863  A0 7D      			ldy.h	#32000
12225                        		__call		_spr_pattern.1
         17:D865  20 26 E8   			call	_spr_pattern.1
12226                        	
12227                        		.dbg	line,	"include\routines_LEVELS.c", 3068; if(player_axis == AXIS_RIGHT)
12228                        		__not.um	_player_axis
         17:D868  AD 19 23   			lda	_player_axis
         17:D86B  18         			clc
         17:D86C  D0 01      			bne	!+
         17:D86E  38         			sec
         17:D86F             	!:
12229                        		__bfalse	.LL543
         17:D86F  90 11      			bcc	.LL543
12230                        	
12231                        		.dbg	line,	"include\routines_LEVELS.c", 3069; {
12232                        	
12233                        		.dbg	line,	"include\routines_LEVELS.c", 3070; spr_x(player_pos_x-14);
12234                        		__ld.wm		_player_pos_x
         17:D871  AD DA 24   			lda.l	_player_pos_x
         17:D874  AC DB 24   			ldy.h	_player_pos_x
12235                        		__sub.wi	14
         17:D877  38         			sec
         17:D878  E9 0E      			sbc.l	#14
         17:D87A  B0 01      			bcs	!+
         17:D87C  88         			dey
         17:D87D             	!:
12236                        		__call		_spr_x.1
         17:D87D  20 0A E8   			call	_spr_x.1
12237                        	
12238                        		.dbg	line,	"include\routines_LEVELS.c", 3071; }
12239                        	
12240                        		.dbg	line,	"include\routines_LEVELS.c", 3073; else
12241                        		__bra		.LL544
         17:D880  80 0F      			bra	.LL544
12242    17:D882             	.LL543:
12243                        	
12244                        		.dbg	line,	"include\routines_LEVELS.c", 3074; {
12245                        	
12246                        		.dbg	line,	"include\routines_LEVELS.c", 3075; spr_x(player_pos_x+29);
12247                        		__ld.wm		_player_pos_x
         17:D882  AD DA 24   			lda.l	_player_pos_x
         17:D885  AC DB 24   			ldy.h	_player_pos_x
12248                        		__add.wi	29
         17:D888  18         			clc
         17:D889  69 1D      			adc.l	#29
         17:D88B  90 01      			bcc	!+
         17:D88D  C8         			iny
         17:D88E             	!:
12249                        		__call		_spr_x.1
         17:D88E  20 0A E8   			call	_spr_x.1
12250                        	
12251                        		.dbg	line,	"include\routines_LEVELS.c", 3076; }
12252    17:D891             	.LL544:
12253                        	
12254                        		.dbg	line,	"include\routines_LEVELS.c", 3078; spr_y(player_pos_y-8);
12255                        		__ld.wm		_player_pos_y
         17:D891  AD DC 24   			lda.l	_player_pos_y
         17:D894  AC DD 24   			ldy.h	_player_pos_y
12256                        		__sub.wi	8
         17:D897  38         			sec
         17:D898  E9 08      			sbc.l	#8
         17:D89A  B0 01      			bcs	!+
         17:D89C  88         			dey
         17:D89D             	!:
12257                        		__call		_spr_y.1
         17:D89D  20 19 E8   			call	_spr_y.1
12258                        	
12259                        		.dbg	line,	"include\routines_LEVELS.c", 3079; }
12260                        	
12261                        		.dbg	line,	"include\routines_LEVELS.c", 3081; else if(player_counter_attack == 6)
12262                        		__bra		.LL545
         17:D8A0  4C ED DA   			bra	.LL545
12263    17:D8A3             	.LL542:
12264                        		__ld.umq	_player_counter_attack
         17:D8A3  AD 1E 23   			lda	_player_counter_attack
12265                        		__equ_b.uiq	6
         17:D8A6  C9 06      			cmp	#6
         17:D8A8  F0 01      			beq	!+
         17:D8AA  18         			clc
         17:D8AB             	!:
12266                        		__bfalse	.LL546
         17:D8AB  90 54      			bcc	.LL546
12267                        	
12268                        		.dbg	line,	"include\routines_LEVELS.c", 3082; {
12269                        	
12270                        		.dbg	line,	"include\routines_LEVELS.c", 3083; spr_set(player_id);
12271                        		__ld.umq	_player_id
         17:D8AD  AD 17 23   			lda	_player_id
12272                        		__call		_spr_set.1
         17:D8B0  20 DD E7   			call	_spr_set.1
12273                        	
12274                        		.dbg	line,	"include\routines_LEVELS.c", 3084; spr_pattern(PLAYER_HANG_ATTACK_2_VRAM_ADR);
12275                        		__ld.wi		11264
         17:D8B3  62         			cla
         17:D8B4  A0 2C      			ldy.h	#11264
12276                        		__call		_spr_pattern.1
         17:D8B6  20 26 E8   			call	_spr_pattern.1
12277                        	
12278                        		.dbg	line,	"include\routines_LEVELS.c", 3086; spr_set(weapon_id);
12279                        		__ld.umq	_weapon_id
         17:D8B9  AD 26 23   			lda	_weapon_id
12280                        		__call		_spr_set.1
         17:D8BC  20 DD E7   			call	_spr_set.1
12281                        	
12282                        		.dbg	line,	"include\routines_LEVELS.c", 3087; spr_pattern(WEAPON_ATTACK_2_VRAM_ADRESS);
12283                        		__ld.wi		32064
         17:D8BF  A9 40      			lda.l	#32064
         17:D8C1  A0 7D      			ldy.h	#32064
12284                        		__call		_spr_pattern.1
         17:D8C3  20 26 E8   			call	_spr_pattern.1
12285                        	
12286                        		.dbg	line,	"include\routines_LEVELS.c", 3089; if(player_axis == AXIS_RIGHT)
12287                        		__not.um	_player_axis
         17:D8C6  AD 19 23   			lda	_player_axis
         17:D8C9  18         			clc
         17:D8CA  D0 01      			bne	!+
         17:D8CC  38         			sec
         17:D8CD             	!:
12288                        		__bfalse	.LL547
         17:D8CD  90 11      			bcc	.LL547
12289                        	
12290                        		.dbg	line,	"include\routines_LEVELS.c", 3090; {
12291                        	
12292                        		.dbg	line,	"include\routines_LEVELS.c", 3091; spr_x(player_pos_x+32);
12293                        		__ld.wm		_player_pos_x
         17:D8CF  AD DA 24   			lda.l	_player_pos_x
         17:D8D2  AC DB 24   			ldy.h	_player_pos_x
12294                        		__add.wi	32
         17:D8D5  18         			clc
         17:D8D6  69 20      			adc.l	#32
         17:D8D8  90 01      			bcc	!+
         17:D8DA  C8         			iny
         17:D8DB             	!:
12295                        		__call		_spr_x.1
         17:D8DB  20 0A E8   			call	_spr_x.1
12296                        	
12297                        		.dbg	line,	"include\routines_LEVELS.c", 3092; 
12298                        	
12299                        		.dbg	line,	"include\routines_LEVELS.c", 3093; }
12300                        	
12301                        		.dbg	line,	"include\routines_LEVELS.c", 3094; 
12302                        	
12303                        		.dbg	line,	"include\routines_LEVELS.c", 3095; else
12304                        		__bra		.LL548
         17:D8DE  80 0F      			bra	.LL548
12305    17:D8E0             	.LL547:
12306                        	
12307                        		.dbg	line,	"include\routines_LEVELS.c", 3096; {
12308                        	
12309                        		.dbg	line,	"include\routines_LEVELS.c", 3097; spr_x(player_pos_x-16);
12310                        		__ld.wm		_player_pos_x
         17:D8E0  AD DA 24   			lda.l	_player_pos_x
         17:D8E3  AC DB 24   			ldy.h	_player_pos_x
12311                        		__sub.wi	16
         17:D8E6  38         			sec
         17:D8E7  E9 10      			sbc.l	#16
         17:D8E9  B0 01      			bcs	!+
         17:D8EB  88         			dey
         17:D8EC             	!:
12312                        		__call		_spr_x.1
         17:D8EC  20 0A E8   			call	_spr_x.1
12313                        	
12314                        		.dbg	line,	"include\routines_LEVELS.c", 3098; }
12315    17:D8EF             	.LL548:
12316                        	
12317                        		.dbg	line,	"include\routines_LEVELS.c", 3100; spr_y(player_pos_y+6);
12318                        		__ld.wm		_player_pos_y
         17:D8EF  AD DC 24   			lda.l	_player_pos_y
         17:D8F2  AC DD 24   			ldy.h	_player_pos_y
12319                        		__add.wi	6
         17:D8F5  18         			clc
         17:D8F6  69 06      			adc.l	#6
         17:D8F8  90 01      			bcc	!+
         17:D8FA  C8         			iny
         17:D8FB             	!:
12320                        		__call		_spr_y.1
         17:D8FB  20 19 E8   			call	_spr_y.1
12321                        	
12322                        		.dbg	line,	"include\routines_LEVELS.c", 3101; }
12323                        	
12324                        		.dbg	line,	"include\routines_LEVELS.c", 3103; else if(player_counter_attack == 7)
12325                        		__bra		.LL549
         17:D8FE  4C ED DA   			bra	.LL549
12326    17:D901             	.LL546:
12327                        		__ld.umq	_player_counter_attack
         17:D901  AD 1E 23   			lda	_player_counter_attack
12328                        		__equ_b.uiq	7
         17:D904  C9 07      			cmp	#7
         17:D906  F0 01      			beq	!+
         17:D908  18         			clc
         17:D909             	!:
12329                        		__bfalse	.LL550
         17:D909  90 66      			bcc	.LL550
12330                        	
12331                        		.dbg	line,	"include\routines_LEVELS.c", 3104; {
12332                        	
12333                        		.dbg	line,	"include\routines_LEVELS.c", 3105; spr_set(chain_id);
12334                        		__ld.umq	_chain_id
         17:D90B  AD 25 23   			lda	_chain_id
12335                        		__call		_spr_set.1
         17:D90E  20 DD E7   			call	_spr_set.1
12336                        	
12337                        		.dbg	line,	"include\routines_LEVELS.c", 3106; spr_y(player_pos_y);
12338                        		__ld.wm		_player_pos_y
         17:D911  AD DC 24   			lda.l	_player_pos_y
         17:D914  AC DD 24   			ldy.h	_player_pos_y
12339                        		__call		_spr_y.1
         17:D917  20 19 E8   			call	_spr_y.1
12340                        	
12341                        		.dbg	line,	"include\routines_LEVELS.c", 3108; if(player_axis == AXIS_RIGHT)
12342                        		__not.um	_player_axis
         17:D91A  AD 19 23   			lda	_player_axis
         17:D91D  18         			clc
         17:D91E  D0 01      			bne	!+
         17:D920  38         			sec
         17:D921             	!:
12343                        		__bfalse	.LL551
         17:D921  90 27      			bcc	.LL551
12344                        	
12345                        		.dbg	line,	"include\routines_LEVELS.c", 3109; {
12346                        	
12347                        		.dbg	line,	"include\routines_LEVELS.c", 3110; spr_x(player_pos_x+32);
12348                        		__ld.wm		_player_pos_x
         17:D923  AD DA 24   			lda.l	_player_pos_x
         17:D926  AC DB 24   			ldy.h	_player_pos_x
12349                        		__add.wi	32
         17:D929  18         			clc
         17:D92A  69 20      			adc.l	#32
         17:D92C  90 01      			bcc	!+
         17:D92E  C8         			iny
         17:D92F             	!:
12350                        		__call		_spr_x.1
         17:D92F  20 0A E8   			call	_spr_x.1
12351                        	
12352                        		.dbg	line,	"include\routines_LEVELS.c", 3112; spr_set(weapon_id);
12353                        		__ld.umq	_weapon_id
         17:D932  AD 26 23   			lda	_weapon_id
12354                        		__call		_spr_set.1
         17:D935  20 DD E7   			call	_spr_set.1
12355                        	
12356                        		.dbg	line,	"include\routines_LEVELS.c", 3113; spr_x(player_pos_x+48);
12357                        		__ld.wm		_player_pos_x
         17:D938  AD DA 24   			lda.l	_player_pos_x
         17:D93B  AC DB 24   			ldy.h	_player_pos_x
12358                        		__add.wi	48
         17:D93E  18         			clc
         17:D93F  69 30      			adc.l	#48
         17:D941  90 01      			bcc	!+
         17:D943  C8         			iny
         17:D944             	!:
12359                        		__call		_spr_x.1
         17:D944  20 0A E8   			call	_spr_x.1
12360                        	
12361                        		.dbg	line,	"include\routines_LEVELS.c", 3114; }
12362                        	
12363                        		.dbg	line,	"include\routines_LEVELS.c", 3115; 
12364                        	
12365                        		.dbg	line,	"include\routines_LEVELS.c", 3116; else
12366                        		__bra		.LL552
         17:D947  4C ED DA   			bra	.LL552
12367    17:D94A             	.LL551:
12368                        	
12369                        		.dbg	line,	"include\routines_LEVELS.c", 3117; {
12370                        	
12371                        		.dbg	line,	"include\routines_LEVELS.c", 3118; spr_x(player_pos_x-16);
12372                        		__ld.wm		_player_pos_x
         17:D94A  AD DA 24   			lda.l	_player_pos_x
         17:D94D  AC DB 24   			ldy.h	_player_pos_x
12373                        		__sub.wi	16
         17:D950  38         			sec
         17:D951  E9 10      			sbc.l	#16
         17:D953  B0 01      			bcs	!+
         17:D955  88         			dey
         17:D956             	!:
12374                        		__call		_spr_x.1
         17:D956  20 0A E8   			call	_spr_x.1
12375                        	
12376                        		.dbg	line,	"include\routines_LEVELS.c", 3120; spr_set(weapon_id);
12377                        		__ld.umq	_weapon_id
         17:D959  AD 26 23   			lda	_weapon_id
12378                        		__call		_spr_set.1
         17:D95C  20 DD E7   			call	_spr_set.1
12379                        	
12380                        		.dbg	line,	"include\routines_LEVELS.c", 3121; spr_x(player_pos_x-32);
12381                        		__ld.wm		_player_pos_x
         17:D95F  AD DA 24   			lda.l	_player_pos_x
         17:D962  AC DB 24   			ldy.h	_player_pos_x
12382                        		__sub.wi	32
         17:D965  38         			sec
         17:D966  E9 20      			sbc.l	#32
         17:D968  B0 01      			bcs	!+
         17:D96A  88         			dey
         17:D96B             	!:
12383                        		__call		_spr_x.1
         17:D96B  20 0A E8   			call	_spr_x.1
12384                        	
12385                        		.dbg	line,	"include\routines_LEVELS.c", 3122; }
12386    17:D96E             	.LL552	.alias		.LL553
12387                        	
12388                        		.dbg	line,	"include\routines_LEVELS.c", 3123; }
12389                        	
12390                        		.dbg	line,	"include\routines_LEVELS.c", 3125; else if(player_counter_attack == 8)
12391                        		__bra		.LL553
         17:D96E  4C ED DA   			bra	.LL553
12392    17:D971             	.LL550:
12393                        		__ld.umq	_player_counter_attack
         17:D971  AD 1E 23   			lda	_player_counter_attack
12394                        		__equ_b.uiq	8
         17:D974  C9 08      			cmp	#8
         17:D976  F0 01      			beq	!+
         17:D978  18         			clc
         17:D979             	!:
12395                        		__bfalse	.LL554
         17:D979  90 6B      			bcc	.LL554
12396                        	
12397                        		.dbg	line,	"include\routines_LEVELS.c", 3126; {
12398                        	
12399                        		.dbg	line,	"include\routines_LEVELS.c", 3127; spr_set(chain_id+1);
12400                        		__ld.um		_chain_id
         17:D97B  AD 25 23   			lda	_chain_id
         17:D97E  C2         			cly
12401                        		__add.wi	1
         17:D97F  1A         			inc	a
         17:D980  D0 01      			bne	!+
         17:D982  C8         			iny
         17:D983             	!:
12402                        		__call		_spr_set.1
         17:D983  20 DD E7   			call	_spr_set.1
12403                        	
12404                        		.dbg	line,	"include\routines_LEVELS.c", 3128; spr_y(player_pos_y);
12405                        		__ld.wm		_player_pos_y
         17:D986  AD DC 24   			lda.l	_player_pos_y
         17:D989  AC DD 24   			ldy.h	_player_pos_y
12406                        		__call		_spr_y.1
         17:D98C  20 19 E8   			call	_spr_y.1
12407                        	
12408                        		.dbg	line,	"include\routines_LEVELS.c", 3130; if(player_axis == AXIS_RIGHT)
12409                        		__not.um	_player_axis
         17:D98F  AD 19 23   			lda	_player_axis
         17:D992  18         			clc
         17:D993  D0 01      			bne	!+
         17:D995  38         			sec
         17:D996             	!:
12410                        		__bfalse	.LL555
         17:D996  90 27      			bcc	.LL555
12411                        	
12412                        		.dbg	line,	"include\routines_LEVELS.c", 3131; {
12413                        	
12414                        		.dbg	line,	"include\routines_LEVELS.c", 3132; spr_x(player_pos_x+48);
12415                        		__ld.wm		_player_pos_x
         17:D998  AD DA 24   			lda.l	_player_pos_x
         17:D99B  AC DB 24   			ldy.h	_player_pos_x
12416                        		__add.wi	48
         17:D99E  18         			clc
         17:D99F  69 30      			adc.l	#48
         17:D9A1  90 01      			bcc	!+
         17:D9A3  C8         			iny
         17:D9A4             	!:
12417                        		__call		_spr_x.1
         17:D9A4  20 0A E8   			call	_spr_x.1
12418                        	
12419                        		.dbg	line,	"include\routines_LEVELS.c", 3134; spr_set(weapon_id);
12420                        		__ld.umq	_weapon_id
         17:D9A7  AD 26 23   			lda	_weapon_id
12421                        		__call		_spr_set.1
         17:D9AA  20 DD E7   			call	_spr_set.1
12422                        	
12423                        		.dbg	line,	"include\routines_LEVELS.c", 3135; spr_x(player_pos_x+64);
12424                        		__ld.wm		_player_pos_x
         17:D9AD  AD DA 24   			lda.l	_player_pos_x
         17:D9B0  AC DB 24   			ldy.h	_player_pos_x
12425                        		__add.wi	64
         17:D9B3  18         			clc
         17:D9B4  69 40      			adc.l	#64
         17:D9B6  90 01      			bcc	!+
         17:D9B8  C8         			iny
         17:D9B9             	!:
12426                        		__call		_spr_x.1
         17:D9B9  20 0A E8   			call	_spr_x.1
12427                        	
12428                        		.dbg	line,	"include\routines_LEVELS.c", 3136; }
12429                        	
12430                        		.dbg	line,	"include\routines_LEVELS.c", 3137; 
12431                        	
12432                        		.dbg	line,	"include\routines_LEVELS.c", 3138; else
12433                        		__bra		.LL556
         17:D9BC  4C ED DA   			bra	.LL556
12434    17:D9BF             	.LL555:
12435                        	
12436                        		.dbg	line,	"include\routines_LEVELS.c", 3139; {
12437                        	
12438                        		.dbg	line,	"include\routines_LEVELS.c", 3140; spr_x(player_pos_x-32);
12439                        		__ld.wm		_player_pos_x
         17:D9BF  AD DA 24   			lda.l	_player_pos_x
         17:D9C2  AC DB 24   			ldy.h	_player_pos_x
12440                        		__sub.wi	32
         17:D9C5  38         			sec
         17:D9C6  E9 20      			sbc.l	#32
         17:D9C8  B0 01      			bcs	!+
         17:D9CA  88         			dey
         17:D9CB             	!:
12441                        		__call		_spr_x.1
         17:D9CB  20 0A E8   			call	_spr_x.1
12442                        	
12443                        		.dbg	line,	"include\routines_LEVELS.c", 3142; spr_set(weapon_id);
12444                        		__ld.umq	_weapon_id
         17:D9CE  AD 26 23   			lda	_weapon_id
12445                        		__call		_spr_set.1
         17:D9D1  20 DD E7   			call	_spr_set.1
12446                        	
12447                        		.dbg	line,	"include\routines_LEVELS.c", 3143; spr_x(player_pos_x-48);
12448                        		__ld.wm		_player_pos_x
         17:D9D4  AD DA 24   			lda.l	_player_pos_x
         17:D9D7  AC DB 24   			ldy.h	_player_pos_x
12449                        		__sub.wi	48
         17:D9DA  38         			sec
         17:D9DB  E9 30      			sbc.l	#48
         17:D9DD  B0 01      			bcs	!+
         17:D9DF  88         			dey
         17:D9E0             	!:
12450                        		__call		_spr_x.1
         17:D9E0  20 0A E8   			call	_spr_x.1
12451                        	
12452                        		.dbg	line,	"include\routines_LEVELS.c", 3144; }
12453    17:D9E3             	.LL556	.alias		.LL557
12454                        	
12455                        		.dbg	line,	"include\routines_LEVELS.c", 3145; }
12456                        	
12457                        		.dbg	line,	"include\routines_LEVELS.c", 3147; else if(player_counter_attack == 9)
12458                        		__bra		.LL557
         17:D9E3  4C ED DA   			bra	.LL557
12459    17:D9E6             	.LL554:
12460                        		__ld.umq	_player_counter_attack
         17:D9E6  AD 1E 23   			lda	_player_counter_attack
12461                        		__equ_b.uiq	9
         17:D9E9  C9 09      			cmp	#9
         17:D9EB  F0 01      			beq	!+
         17:D9ED  18         			clc
         17:D9EE             	!:
12462                        		__bfalse	.LL558
         17:D9EE  90 6D      			bcc	.LL558
12463                        	
12464                        		.dbg	line,	"include\routines_LEVELS.c", 3148; {
12465                        	
12466                        		.dbg	line,	"include\routines_LEVELS.c", 3149; spr_set(chain_id+2);
12467                        		__ld.um		_chain_id
         17:D9F0  AD 25 23   			lda	_chain_id
         17:D9F3  C2         			cly
12468                        		__add.wi	2
         17:D9F4  18         			clc
         17:D9F5  69 02      			adc.l	#2
         17:D9F7  90 01      			bcc	!+
         17:D9F9  C8         			iny
         17:D9FA             	!:
12469                        		__call		_spr_set.1
         17:D9FA  20 DD E7   			call	_spr_set.1
12470                        	
12471                        		.dbg	line,	"include\routines_LEVELS.c", 3150; spr_y(player_pos_y);
12472                        		__ld.wm		_player_pos_y
         17:D9FD  AD DC 24   			lda.l	_player_pos_y
         17:DA00  AC DD 24   			ldy.h	_player_pos_y
12473                        		__call		_spr_y.1
         17:DA03  20 19 E8   			call	_spr_y.1
12474                        	
12475                        		.dbg	line,	"include\routines_LEVELS.c", 3152; if(player_axis == AXIS_RIGHT)
12476                        		__not.um	_player_axis
         17:DA06  AD 19 23   			lda	_player_axis
         17:DA09  18         			clc
         17:DA0A  D0 01      			bne	!+
         17:DA0C  38         			sec
         17:DA0D             	!:
12477                        		__bfalse	.LL559
         17:DA0D  90 27      			bcc	.LL559
12478                        	
12479                        		.dbg	line,	"include\routines_LEVELS.c", 3153; {
12480                        	
12481                        		.dbg	line,	"include\routines_LEVELS.c", 3154; spr_x(player_pos_x+64);
12482                        		__ld.wm		_player_pos_x
         17:DA0F  AD DA 24   			lda.l	_player_pos_x
         17:DA12  AC DB 24   			ldy.h	_player_pos_x
12483                        		__add.wi	64
         17:DA15  18         			clc
         17:DA16  69 40      			adc.l	#64
         17:DA18  90 01      			bcc	!+
         17:DA1A  C8         			iny
         17:DA1B             	!:
12484                        		__call		_spr_x.1
         17:DA1B  20 0A E8   			call	_spr_x.1
12485                        	
12486                        		.dbg	line,	"include\routines_LEVELS.c", 3156; spr_set(weapon_id);
12487                        		__ld.umq	_weapon_id
         17:DA1E  AD 26 23   			lda	_weapon_id
12488                        		__call		_spr_set.1
         17:DA21  20 DD E7   			call	_spr_set.1
12489                        	
12490                        		.dbg	line,	"include\routines_LEVELS.c", 3157; spr_x(player_pos_x+80);
12491                        		__ld.wm		_player_pos_x
         17:DA24  AD DA 24   			lda.l	_player_pos_x
         17:DA27  AC DB 24   			ldy.h	_player_pos_x
12492                        		__add.wi	80
         17:DA2A  18         			clc
         17:DA2B  69 50      			adc.l	#80
         17:DA2D  90 01      			bcc	!+
         17:DA2F  C8         			iny
         17:DA30             	!:
12493                        		__call		_spr_x.1
         17:DA30  20 0A E8   			call	_spr_x.1
12494                        	
12495                        		.dbg	line,	"include\routines_LEVELS.c", 3158; }
12496                        	
12497                        		.dbg	line,	"include\routines_LEVELS.c", 3159; 
12498                        	
12499                        		.dbg	line,	"include\routines_LEVELS.c", 3160; else
12500                        		__bra		.LL560
         17:DA33  4C ED DA   			bra	.LL560
12501    17:DA36             	.LL559:
12502                        	
12503                        		.dbg	line,	"include\routines_LEVELS.c", 3161; {
12504                        	
12505                        		.dbg	line,	"include\routines_LEVELS.c", 3162; spr_x(player_pos_x-48);
12506                        		__ld.wm		_player_pos_x
         17:DA36  AD DA 24   			lda.l	_player_pos_x
         17:DA39  AC DB 24   			ldy.h	_player_pos_x
12507                        		__sub.wi	48
         17:DA3C  38         			sec
         17:DA3D  E9 30      			sbc.l	#48
         17:DA3F  B0 01      			bcs	!+
         17:DA41  88         			dey
         17:DA42             	!:
12508                        		__call		_spr_x.1
         17:DA42  20 0A E8   			call	_spr_x.1
12509                        	
12510                        		.dbg	line,	"include\routines_LEVELS.c", 3164; spr_set(weapon_id);
12511                        		__ld.umq	_weapon_id
         17:DA45  AD 26 23   			lda	_weapon_id
12512                        		__call		_spr_set.1
         17:DA48  20 DD E7   			call	_spr_set.1
12513                        	
12514                        		.dbg	line,	"include\routines_LEVELS.c", 3165; spr_x(player_pos_x-64);
12515                        		__ld.wm		_player_pos_x
         17:DA4B  AD DA 24   			lda.l	_player_pos_x
         17:DA4E  AC DB 24   			ldy.h	_player_pos_x
12516                        		__sub.wi	64
         17:DA51  38         			sec
         17:DA52  E9 40      			sbc.l	#64
         17:DA54  B0 01      			bcs	!+
         17:DA56  88         			dey
         17:DA57             	!:
12517                        		__call		_spr_x.1
         17:DA57  20 0A E8   			call	_spr_x.1
12518                        	
12519                        		.dbg	line,	"include\routines_LEVELS.c", 3166; }
12520    17:DA5A             	.LL560	.alias		.LL561
12521                        	
12522                        		.dbg	line,	"include\routines_LEVELS.c", 3167; }
12523                        	
12524                        		.dbg	line,	"include\routines_LEVELS.c", 3169; else if(player_counter_attack == 23)
12525                        		__bra		.LL561
         17:DA5A  4C ED DA   			bra	.LL561
12526    17:DA5D             	.LL558:
12527                        		__ld.umq	_player_counter_attack
         17:DA5D  AD 1E 23   			lda	_player_counter_attack
12528                        		__equ_b.uiq	23
         17:DA60  C9 17      			cmp	#23
         17:DA62  F0 01      			beq	!+
         17:DA64  18         			clc
         17:DA65             	!:
12529                        		__bfalse	.LL562
         17:DA65  B0 03 4C ED			bcc	.LL562
         17:DA69  DA          
12530                        	
12531                        		.dbg	line,	"include\routines_LEVELS.c", 3170; {
12532                        	
12533                        		.dbg	line,	"include\routines_LEVELS.c", 3171; spr_set(chain_id);
12534                        		__ld.umq	_chain_id
         17:DA6A  AD 25 23   			lda	_chain_id
12535                        		__call		_spr_set.1
         17:DA6D  20 DD E7   			call	_spr_set.1
12536                        	
12537                        		.dbg	line,	"include\routines_LEVELS.c", 3172; spr_hide();
12538                        		__call		_spr_hide
         17:DA70  20 F8 E7   			call	_spr_hide
12539                        	
12540                        		.dbg	line,	"include\routines_LEVELS.c", 3174; spr_set(chain_id+1);
12541                        		__ld.um		_chain_id
         17:DA73  AD 25 23   			lda	_chain_id
         17:DA76  C2         			cly
12542                        		__add.wi	1
         17:DA77  1A         			inc	a
         17:DA78  D0 01      			bne	!+
         17:DA7A  C8         			iny
         17:DA7B             	!:
12543                        		__call		_spr_set.1
         17:DA7B  20 DD E7   			call	_spr_set.1
12544                        	
12545                        		.dbg	line,	"include\routines_LEVELS.c", 3175; spr_hide();
12546                        		__call		_spr_hide
         17:DA7E  20 F8 E7   			call	_spr_hide
12547                        	
12548                        		.dbg	line,	"include\routines_LEVELS.c", 3177; spr_set(chain_id+2);
12549                        		__ld.um		_chain_id
         17:DA81  AD 25 23   			lda	_chain_id
         17:DA84  C2         			cly
12550                        		__add.wi	2
         17:DA85  18         			clc
         17:DA86  69 02      			adc.l	#2
         17:DA88  90 01      			bcc	!+
         17:DA8A  C8         			iny
         17:DA8B             	!:
12551                        		__call		_spr_set.1
         17:DA8B  20 DD E7   			call	_spr_set.1
12552                        	
12553                        		.dbg	line,	"include\routines_LEVELS.c", 3178; spr_hide();
12554                        		__call		_spr_hide
         17:DA8E  20 F8 E7   			call	_spr_hide
12555                        	
12556                        		.dbg	line,	"include\routines_LEVELS.c", 3180; spr_set(player_id);
12557                        		__ld.umq	_player_id
         17:DA91  AD 17 23   			lda	_player_id
12558                        		__call		_spr_set.1
         17:DA94  20 DD E7   			call	_spr_set.1
12559                        	
12560                        		.dbg	line,	"include\routines_LEVELS.c", 3181; spr_pattern(PLAYER_HANG_VRAM_ADR);
12561                        		__ld.wi		7424
         17:DA97  62         			cla
         17:DA98  A0 1D      			ldy.h	#7424
12562                        		__call		_spr_pattern.1
         17:DA9A  20 26 E8   			call	_spr_pattern.1
12563                        	
12564                        		.dbg	line,	"include\routines_LEVELS.c", 3183; spr_set(weapon_id);
12565                        		__ld.umq	_weapon_id
         17:DA9D  AD 26 23   			lda	_weapon_id
12566                        		__call		_spr_set.1
         17:DAA0  20 DD E7   			call	_spr_set.1
12567                        	
12568                        		.dbg	line,	"include\routines_LEVELS.c", 3184; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
12569                        		__ld.wi		31808
         17:DAA3  A9 40      			lda.l	#31808
         17:DAA5  A0 7C      			ldy.h	#31808
12570                        		__call		_spr_pattern.1
         17:DAA7  20 26 E8   			call	_spr_pattern.1
12571                        	
12572                        		.dbg	line,	"include\routines_LEVELS.c", 3185; spr_y(player_pos_y+5);
12573                        		__ld.wm		_player_pos_y
         17:DAAA  AD DC 24   			lda.l	_player_pos_y
         17:DAAD  AC DD 24   			ldy.h	_player_pos_y
12574                        		__add.wi	5
         17:DAB0  18         			clc
         17:DAB1  69 05      			adc.l	#5
         17:DAB3  90 01      			bcc	!+
         17:DAB5  C8         			iny
         17:DAB6             	!:
12575                        		__call		_spr_y.1
         17:DAB6  20 19 E8   			call	_spr_y.1
12576                        	
12577                        		.dbg	line,	"include\routines_LEVELS.c", 3187; if(player_axis == AXIS_RIGHT)
12578                        		__not.um	_player_axis
         17:DAB9  AD 19 23   			lda	_player_axis
         17:DABC  18         			clc
         17:DABD  D0 01      			bne	!+
         17:DABF  38         			sec
         17:DAC0             	!:
12579                        		__bfalse	.LL563
         17:DAC0  90 11      			bcc	.LL563
12580                        	
12581                        		.dbg	line,	"include\routines_LEVELS.c", 3188; {
12582                        	
12583                        		.dbg	line,	"include\routines_LEVELS.c", 3189; spr_x(player_pos_x+17);
12584                        		__ld.wm		_player_pos_x
         17:DAC2  AD DA 24   			lda.l	_player_pos_x
         17:DAC5  AC DB 24   			ldy.h	_player_pos_x
12585                        		__add.wi	17
         17:DAC8  18         			clc
         17:DAC9  69 11      			adc.l	#17
         17:DACB  90 01      			bcc	!+
         17:DACD  C8         			iny
         17:DACE             	!:
12586                        		__call		_spr_x.1
         17:DACE  20 0A E8   			call	_spr_x.1
12587                        	
12588                        		.dbg	line,	"include\routines_LEVELS.c", 3190; }
12589                        	
12590                        		.dbg	line,	"include\routines_LEVELS.c", 3192; else
12591                        		__bra		.LL564
         17:DAD1  80 0F      			bra	.LL564
12592    17:DAD3             	.LL563:
12593                        	
12594                        		.dbg	line,	"include\routines_LEVELS.c", 3193; {
12595                        	
12596                        		.dbg	line,	"include\routines_LEVELS.c", 3194; spr_x(player_pos_x-2);
12597                        		__ld.wm		_player_pos_x
         17:DAD3  AD DA 24   			lda.l	_player_pos_x
         17:DAD6  AC DB 24   			ldy.h	_player_pos_x
12598                        		__sub.wi	2
         17:DAD9  38         			sec
         17:DADA  E9 02      			sbc.l	#2
         17:DADC  B0 01      			bcs	!+
         17:DADE  88         			dey
         17:DADF             	!:
12599                        		__call		_spr_x.1
         17:DADF  20 0A E8   			call	_spr_x.1
12600                        	
12601                        		.dbg	line,	"include\routines_LEVELS.c", 3195; }
12602    17:DAE2             	.LL564:
12603                        	
12604                        		.dbg	line,	"include\routines_LEVELS.c", 3197; player_attack = FALSE;
12605                        		__st.umiq	0, _player_attack
         17:DAE2  9C 20 23   			stz	_player_attack
12606                        	
12607                        		.dbg	line,	"include\routines_LEVELS.c", 3198; player_counter_attack = 0;
12608                        		__st.umiq	0, _player_counter_attack
         17:DAE5  9C 1E 23   			stz	_player_counter_attack
12609                        	
12610                        		.dbg	line,	"include\routines_LEVELS.c", 3199; player_state = STATE_HANG;
12611                        		__st.umiq	10, _player_state
         17:DAE8  A9 0A      			lda.l	#10
         17:DAEA  8D 18 23   			sta	_player_state
12612                        	
12613                        		.dbg	line,	"include\routines_LEVELS.c", 3200; }
12614                        	
12615                        		.dbg	line,	"include\routines_LEVELS.c", 3203; player_counter_attack += 1;
12616    17:DAED             	.LL562:
12617    17:DAED             	.LL561:
12618    17:DAED             	.LL557:
12619    17:DAED             	.LL553:
12620    17:DAED             	.LL549:
12621    17:DAED             	.LL545:
12622                        		__add_st.umiq	1, _player_counter_attack
         17:DAED  EE 1E 23   			inc	_player_counter_attack
12623                        	
12624                        		.dbg	line,	"include\routines_LEVELS.c", 3204; } 
12625                        	
12626                        		.dbg	line,	"include\routines_LEVELS.c", 3205; }
12627    17:DAF0             	.LL541:
12628                        	
12629                        		.dbg	line,	"include\routines_LEVELS.c", 3206; }
12630    17:DAF0             	.LL540:
12631    17:DAF0             	.LL539:
12632    17:DAF0             	.LL510:
12633    17:DAF0             	.LL483:
12634                        		__return	0
         17:DAF0  4C EF FF   			jmp	leave_proc
12635                        		.dbg	clear
12636                        		.endp
12637               67E0     		.data
12638               230D     		.bss
12639    F8:230D             	__update_WEAPON_loc:
12640    F8:230D             			ds	2
12641    F8:230F             	__update_WEAPON_end:
12642               E309     		.code
12643                        		.pceas
12644                        	
12645                        		.dbg	line,	"main.c", 24; #include "include/routines_SHOP.c"
12646                        		.dbg	line,	"include\routines_SHOP.c", 1; #include "huc.h"
12647                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
12648                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
12649                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
12650                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
12651                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
12652                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
12653                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
12654                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
12655                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
12656                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
12657                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
12658                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
12659                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
12660                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
12661                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
12662                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
12663                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
12664                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
12665                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
12666                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
12667                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
12668                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
12669                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
12670                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
12671                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
12672                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
12673                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
12674                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
12675                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
12676                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
12677                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
12678                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
12679                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
12680                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
12681                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
12682                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
12683                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
12684                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
12685                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
12686                        		.dbg	line,	"include\routines_SHOP.c", 2; #include "hucc-scroll.h"
12687                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 1; #ifndef _hucc_scroll_h
12688                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 2; #define _hucc_scroll_h
12689                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 4; /****************************************************************************
12690                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 5; ; ***************************************************************************
12691                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 6; ;
12692                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 7; ; hucc-scroll.h
12693                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 8; ;
12694                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 9; ; Routines for a fast split-screen scrolling system.
12695                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 10; ;
12696                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 11; ; Copyright John Brandwood 2024.
12697                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 12; ;
12698                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 13; ; Distributed under the Boost Software License, Version 1.0.
12699                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
12700                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
12701                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 16; ;
12702                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 17; ; ***************************************************************************
12703                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 18; ; ***************************************************************************
12704                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 19; ;
12705                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 20; ; The maximum number of splits for each screen layer is set in your project's
12706                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 21; ; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
12707                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 22; ;
12708                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 23; ; Your first active split must be defined to start at screen line 0, and then
12709                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 24; ; the rest of the active splits must be in increasing line order to match the
12710                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 25; ; way that the PC Engine displays the output image.
12711                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 26; ;
12712                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 27; ; You can have disabled splits interleaved with your active splits.
12713                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 28; ;
12714                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 29; ; Splits that are normally disabled can be used to create full screen effects
12715                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 30; ; such as bouncing the screen up and down by adding blank areas at the top or
12716                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 31; ; bottom of the screen, and then rapidly changing the height of those areas.
12717                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 32; ;
12718                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 33; ; ***************************************************************************
12719                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 34; ; **************************************************************************/
12720                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 36; // *************
12721                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 37; // VDC bits for display_flags ...
12722                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 38; // *************
12723                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 40; #ifndef BKG_OFF
12724                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 41; #define BKG_OFF 0x00
12725                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 42; #endif
12726                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 44; #ifndef SPR_OFF
12727                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 45; #define SPR_OFF 0x00
12728                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 46; #endif
12729                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 48; #ifndef BKG_ON
12730                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 49; #define BKG_ON 0x80
12731                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 50; #endif
12732                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 52; #ifndef SPR_ON
12733                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 53; #define SPR_ON 0x40
12734                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 54; #endif
12735                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 56; // *************
12736                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 57; // Functions in hucc-scroll.asm ...
12737                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 58; // *************
12738                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 60; #ifdef __HUCC__
12739                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 62; #asmdef	HUCC_USES_NEW_SCROLL 1
12740                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 64; extern void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
12741                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 65; extern void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
12742                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 67; extern void __fastcall disable_split( unsigned char index<acc> );
12743                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 68; extern void __fastcall sgx_disable_split( unsigned char index<acc> );
12744                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 70; extern void __fastcall __macro disable_all_splits( void );
12745                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 71; extern void __fastcall __macro sgx_disable_all_splits( void );
12746                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 73; #asm
12747                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 74; .macro	_disable_all_splits
12748                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 75; ldy	#HUCC_PCE_SPLITS - 1
12749                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 76; !loop:		tya
12750                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 77; call	_disable_split.1
12751                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 78; dey
12752                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 79; bpl	!loop-
12753                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 80; .endm
12754                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 82; .macro	_sgx_disable_all_splits
12755                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 83; ldy	#HUCC_SGX_SPLITS - 1
12756                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 84; !loop:		tya
12757                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 85; call	_sgx_disable_split.1
12758                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 86; dey
12759                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 87; bpl	!loop-
12760                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 88; .endm
12761                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 89; #endasm
12762                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 91; #endif // __HUCC__
12763                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 93; #endif // _hucc_scroll_h
12764                        		.dbg	line,	"include\routines_SHOP.c", 3; #include "hucc-chrmap.h"
12765                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 1; #ifndef _hucc_chrmap_h
12766                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 2; #define _hucc_chrmap_h
12767                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 4; /****************************************************************************
12768                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 5; ; ***************************************************************************
12769                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 6; ;
12770                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 7; ; hucc-chrmap.h
12771                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 8; ;
12772                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 9; ; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
12773                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 10; ;
12774                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 11; ; Copyright John Brandwood 2025.
12775                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 12; ;
12776                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
12777                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
12778                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
12779                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 16; ;
12780                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 17; ; ***************************************************************************
12781                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 18; ; ***************************************************************************
12782                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 19; ;
12783                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 20; ; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
12784                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 21; ;
12785                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 22; ; The maximum total size for a chrmap is 16KBytes, which allows for maps up
12786                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 23; ; to 256x32 tiles (2048x256 pixels).
12787                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 24; ;
12788                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 25; ; ***************************************************************************
12789                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 26; ; **************************************************************************/
12790                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 28; // *************
12791                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 29; // This code extends the blkmap library ...
12792                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 30; // *************
12793                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 32; #include "hucc-blkmap.h"
12794                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 34; // *************
12795                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 35; // Functions in chrmap.asm ...
12796                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 36; // *************
12797                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 38; #ifdef __HUCC__
12798                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 40; #asmdef	HUCC_USES_CHRMAP 1
12799                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 42; extern void __fastcall __nop set_chrmap( unsigned char __far *chrmap<vdc_map_bank:vdc_map_addr>, unsigned char tiles_w<vdc_map_line_w> );
12800                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 44; extern void __fastcall draw_bat( void );
12801                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 45; extern void __fastcall scroll_bat( void );
12802                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 47; extern void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
12803                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 49; #ifdef _SGX
12804                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 51; extern void __fastcall __nop sgx_set_chrmap( unsigned char __far *chrmap<sgx_map_bank:sgx_map_addr>, unsigned char tiles_w<sgx_map_line_w> );
12805                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 53; extern void __fastcall sgx_draw_bat( void );
12806                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 54; extern void __fastcall sgx_scroll_bat( void );
12807                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 56; extern void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
12808                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 58; #endif
12809                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 60; #endif // __HUCC__
12810                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 62; #endif // _hucc_chrmap_h
12811                        		.dbg	line,	"include\routines_SHOP.c", 4; #include "hucc-blkmap.h"
12812                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
12813                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
12814                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
12815                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
12816                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
12817                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
12818                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
12819                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
12820                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
12821                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
12822                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
12823                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
12824                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
12825                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
12826                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
12827                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
12828                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
12829                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
12830                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
12831                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
12832                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
12833                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
12834                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
12835                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
12836                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
12837                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
12838                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
12839                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
12840                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
12841                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
12842                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
12843                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
12844                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
12845                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
12846                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
12847                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
12848                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
12849                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
12850                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
12851                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
12852                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
12853                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
12854                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
12855                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
12856                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
12857                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
12858                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
12859                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
12860                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
12861                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
12862                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
12863                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
12864                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
12865                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
12866                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
12867                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
12868                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
12869                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
12870                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
12871                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
12872                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
12873                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
12874                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
12875                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
12876                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
12877                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
12878                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
12879                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 86; .macro	_set_blkmap.2
12880                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 87; stz	vdc_scr_bank
12881                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 88; .endm
12882                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 90; .macro	_set_multimap.2
12883                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 91; lda	vdc_bat_width
12884                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 92; lsr	a
12885                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 93; sta	vdc_map_line_w
12886                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 94; .endm
12887                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 96; .macro	SCREEN
12888                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 97; db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
12889                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 98; db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
12890                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 99; db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
12891                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 100; dw	(\4)
12892                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 101; .endm
12893                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
12894                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
12895                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
12896                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
12897                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
12898                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
12899                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
12900                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
12901                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
12902                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
12903                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
12904                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
12905                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
12906                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
12907                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
12908                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
12909                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
12910                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
12911                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
12912                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
12913                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
12914                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
12915                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
12916                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
12917                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
12918                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
12919                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
12920                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
12921                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 144; .macro	_sgx_set_blkmap.2
12922                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 145; stz	sgx_scr_bank
12923                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 146; .endm
12924                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 148; .macro	_sgx_set_multimap.2
12925                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 149; lda	sgx_bat_width
12926                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 150; lsr	a
12927                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 151; sta	sgx_map_line_w
12928                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 152; .endm
12929                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
12930                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
12931                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
12932                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
12933                        		.dbg	line,	"include\routines_SHOP.c", 12; void display_TIME_SHOP()
12934                        		.dbg	line,	"include\routines_SHOP.c", 13; {
12935                        	;***********************
12936                        	;***********************
12937                        	
12938                        		.hucc
12939    02:DF57             		.proc		_display_TIME_SHOP
12940                        		__enter		_display_TIME_SHOP
12941                        	
12942                        		.dbg	line,	"include\routines_SHOP.c", 14; put_number(minutes,1,1,3);
12943                        		__ld.um		_minutes
         02:DF57  AD 30 23   			lda	_minutes
         02:DF5A  C2         			cly
12944                        		__st.wmq	_bx
         02:DF5B  85 FA      			sta.l	_bx
         02:DF5D  84 FB      			sty.h	_bx
12945                        		__st.umiq	1, _cl
         02:DF5F  A9 01      			lda.l	#1
         02:DF61  85 FC      			sta	_cl
12946                        		__st.umiq	1, _dil
         02:DF63  A9 01      			lda.l	#1
         02:DF65  85 F0      			sta	_dil
12947                        		__st.umiq	3, _dih
         02:DF67  A9 03      			lda.l	#3
         02:DF69  85 F1      			sta	_dih
12948                        		__call		_put_number.4
         02:DF6B  20 9F FF   			call	_put_number.4
12949                        	
12950                        		.dbg	line,	"include\routines_SHOP.c", 16; if(seconds < 10)
12951                        		__ld.umq	_seconds
         02:DF6E  AD 31 23   			lda	_seconds
12952                        		__ult_b.uiq	10
         02:DF71  C9 0A      			cmp	#10		; Subtract integer from A.
         02:DF73  6A         			ror	a		; CC if A < integer.
         02:DF74  49 80      			eor	#$80
         02:DF76  2A         			rol	a
12953                        		__bfalse	.LL566
         02:DF77  90 2C      			bcc	.LL566
12954                        	
12955                        		.dbg	line,	"include\routines_SHOP.c", 17; {
12956                        	
12957                        		.dbg	line,	"include\routines_SHOP.c", 18; put_number(0,1,3,3);
12958                        		__st.wmiq	0, _bx
         02:DF79  64 FA      			stz.l	_bx
         02:DF7B  64 FB      			stz.h	_bx
12959                        		__st.umiq	1, _cl
         02:DF7D  A9 01      			lda.l	#1
         02:DF7F  85 FC      			sta	_cl
12960                        		__st.umiq	3, _dil
         02:DF81  A9 03      			lda.l	#3
         02:DF83  85 F0      			sta	_dil
12961                        		__st.umiq	3, _dih
         02:DF85  A9 03      			lda.l	#3
         02:DF87  85 F1      			sta	_dih
12962                        		__call		_put_number.4
         02:DF89  20 9F FF   			call	_put_number.4
12963                        	
12964                        		.dbg	line,	"include\routines_SHOP.c", 19; put_number(seconds,1,4,3);
12965                        		__ld.um		_seconds
         02:DF8C  AD 31 23   			lda	_seconds
         02:DF8F  C2         			cly
12966                        		__st.wmq	_bx
         02:DF90  85 FA      			sta.l	_bx
         02:DF92  84 FB      			sty.h	_bx
12967                        		__st.umiq	1, _cl
         02:DF94  A9 01      			lda.l	#1
         02:DF96  85 FC      			sta	_cl
12968                        		__st.umiq	4, _dil
         02:DF98  A9 04      			lda.l	#4
         02:DF9A  85 F0      			sta	_dil
12969                        		__st.umiq	3, _dih
         02:DF9C  A9 03      			lda.l	#3
         02:DF9E  85 F1      			sta	_dih
12970                        		__call		_put_number.4
         02:DFA0  20 9F FF   			call	_put_number.4
12971                        	
12972                        		.dbg	line,	"include\routines_SHOP.c", 20; }
12973                        	
12974                        		.dbg	line,	"include\routines_SHOP.c", 22; else
12975                        		__bra		.LL567
         02:DFA3  80 17      			bra	.LL567
12976    02:DFA5             	.LL566:
12977                        	
12978                        		.dbg	line,	"include\routines_SHOP.c", 23; {
12979                        	
12980                        		.dbg	line,	"include\routines_SHOP.c", 24; put_number(seconds,2,3,3);
12981                        		__ld.um		_seconds
         02:DFA5  AD 31 23   			lda	_seconds
         02:DFA8  C2         			cly
12982                        		__st.wmq	_bx
         02:DFA9  85 FA      			sta.l	_bx
         02:DFAB  84 FB      			sty.h	_bx
12983                        		__st.umiq	2, _cl
         02:DFAD  A9 02      			lda.l	#2
         02:DFAF  85 FC      			sta	_cl
12984                        		__st.umiq	3, _dil
         02:DFB1  A9 03      			lda.l	#3
         02:DFB3  85 F0      			sta	_dil
12985                        		__st.umiq	3, _dih
         02:DFB5  A9 03      			lda.l	#3
         02:DFB7  85 F1      			sta	_dih
12986                        		__call		_put_number.4
         02:DFB9  20 9F FF   			call	_put_number.4
12987                        	
12988                        		.dbg	line,	"include\routines_SHOP.c", 25; }
12989    02:DFBC             	.LL567:
12990                        	
12991                        		.dbg	line,	"include\routines_SHOP.c", 27; time_counter += 1;
12992                        		__add_st.umiq	1, _time_counter
         02:DFBC  EE 32 23   			inc	_time_counter
12993                        	
12994                        		.dbg	line,	"include\routines_SHOP.c", 29; if(time_counter == 60)
12995                        		__ld.umq	_time_counter
         02:DFBF  AD 32 23   			lda	_time_counter
12996                        		__equ_b.uiq	60
         02:DFC2  C9 3C      			cmp	#60
         02:DFC4  F0 01      			beq	!+
         02:DFC6  18         			clc
         02:DFC7             	!:
12997                        		__bfalse	.LL568
         02:DFC7  90 30      			bcc	.LL568
12998                        	
12999                        		.dbg	line,	"include\routines_SHOP.c", 30; {
13000                        	
13001                        		.dbg	line,	"include\routines_SHOP.c", 31; time_counter = 0;
13002                        		__st.umiq	0, _time_counter
         02:DFC9  9C 32 23   			stz	_time_counter
13003                        	
13004                        		.dbg	line,	"include\routines_SHOP.c", 33; if(seconds > 0)
13005                        		__ld.umq	_seconds
         02:DFCC  AD 31 23   			lda	_seconds
13006                        		__ugt_b.uiq	0
         02:DFCF  18         			clc			; Subtract integer+1 from A.
         02:DFD0  E9 00      			sbc	#0		; CS if A > integer.
13007                        		__bfalse	.LL569
         02:DFD2  90 05      			bcc	.LL569
13008                        	
13009                        		.dbg	line,	"include\routines_SHOP.c", 34; {
13010                        	
13011                        		.dbg	line,	"include\routines_SHOP.c", 35; seconds -= 1;
13012                        		__sub_st.umiq	1, _seconds
         02:DFD4  CE 31 23   			dec	_seconds
13013                        	
13014                        		.dbg	line,	"include\routines_SHOP.c", 36; }
13015                        	
13016                        		.dbg	line,	"include\routines_SHOP.c", 38; else
13017                        		__bra		.LL570
         02:DFD7  80 20      			bra	.LL570
13018    02:DFD9             	.LL569:
13019                        	
13020                        		.dbg	line,	"include\routines_SHOP.c", 39; {
13021                        	
13022                        		.dbg	line,	"include\routines_SHOP.c", 40; if(minutes > 0)
13023                        		__ld.umq	_minutes
         02:DFD9  AD 30 23   			lda	_minutes
13024                        		__ugt_b.uiq	0
         02:DFDC  18         			clc			; Subtract integer+1 from A.
         02:DFDD  E9 00      			sbc	#0		; CS if A > integer.
13025                        		__bfalse	.LL571
         02:DFDF  90 0A      			bcc	.LL571
13026                        	
13027                        		.dbg	line,	"include\routines_SHOP.c", 41; {
13028                        	
13029                        		.dbg	line,	"include\routines_SHOP.c", 42; seconds = 59;
13030                        		__st.umiq	59, _seconds
         02:DFE1  A9 3B      			lda.l	#59
         02:DFE3  8D 31 23   			sta	_seconds
13031                        	
13032                        		.dbg	line,	"include\routines_SHOP.c", 43; minutes -= 1;
13033                        		__sub_st.umiq	1, _minutes
         02:DFE6  CE 30 23   			dec	_minutes
13034                        	
13035                        		.dbg	line,	"include\routines_SHOP.c", 44; }
13036                        	
13037                        		.dbg	line,	"include\routines_SHOP.c", 46; else
13038                        		__bra		.LL572
         02:DFE9  80 0E      			bra	.LL572
13039    02:DFEB             	.LL571:
13040                        	
13041                        		.dbg	line,	"include\routines_SHOP.c", 47; {
13042                        	
13043                        		.dbg	line,	"include\routines_SHOP.c", 48; seconds = 0;
13044                        		__st.umiq	0, _seconds
         02:DFEB  9C 31 23   			stz	_seconds
13045                        	
13046                        		.dbg	line,	"include\routines_SHOP.c", 49; minutes = 0;
13047                        		__st.umiq	0, _minutes
         02:DFEE  9C 30 23   			stz	_minutes
13048                        	
13049                        		.dbg	line,	"include\routines_SHOP.c", 50; shop_counter = 0;    
13050                        		__st.umiq	0, _shop_counter
         02:DFF1  9C D9 23   			stz	_shop_counter
13051                        	
13052                        		.dbg	line,	"include\routines_SHOP.c", 51; shop_phase = SHOP_PHASE_EXIT;
13053                        		__st.umiq	2, _shop_phase
         02:DFF4  A9 02      			lda.l	#2
         02:DFF6  8D D8 23   			sta	_shop_phase
13054                        	
13055                        		.dbg	line,	"include\routines_SHOP.c", 52; }
13056    02:DFF9             	.LL572:
13057                        	
13058                        		.dbg	line,	"include\routines_SHOP.c", 53; }
13059    02:DFF9             	.LL570:
13060                        	
13061                        		.dbg	line,	"include\routines_SHOP.c", 54; } 
13062                        	
13063                        		.dbg	line,	"include\routines_SHOP.c", 55; }
13064    02:DFF9             	.LL568:
13065    02:DFF9             	.LL565:
13066                        		__return	0
         02:DFF9  4C EF FF   			jmp	leave_proc
13067                        		.dbg	clear
13068                        		.endp
13069                        		.pceas
13070                        	
13071                        		.dbg	line,	"include\routines_SHOP.c", 59; void joypad_BUTTONS_SHOP()
13072                        		.dbg	line,	"include\routines_SHOP.c", 60; {
13073                        	;***********************
13074                        	;***********************
13075                        	
13076                        		.hucc
13077    02:C86D             		.proc		_joypad_BUTTONS_SHOP
13078                        		__enter		_joypad_BUTTONS_SHOP
13079                        	
13080                        		.dbg	line,	"include\routines_SHOP.c", 61; if(joytrg(JOYPAD_1) & JOY_RIGHT)
13081                        		__ld.uiq	0
         02:C86D  62         			cla
13082                        		 _joytrg.1
         02:C86E  AA         			tax
         02:C86F  BD 2D 22   			lda	joytrg, x
         02:C872  BC DD 22   			ldy	joy6trg, x
13083                        		__tand.wi	32
         02:C875  29 20      			and	#32
         02:C877  C9 01      	!:		cmp	#1
13084                        		__bfalse	.LL574
         02:C879  90 59      			bcc	.LL574
13085                        	
13086                        		.dbg	line,	"include\routines_SHOP.c", 62; {   
13087                        	
13088                        		.dbg	line,	"include\routines_SHOP.c", 63; char max_index;
13089                        	
13090                        		.dbg	line,	"include\routines_SHOP.c", 64; 
13091                        	
13092                        		.dbg	line,	"include\routines_SHOP.c", 65; if(index_y == 0)
13093                        		__not.um	_index_y
         02:C87B  AD D6 23   			lda	_index_y
         02:C87E  18         			clc
         02:C87F  D0 01      			bne	!+
         02:C881  38         			sec
         02:C882             	!:
13094                        		__bfalse	.LL575
         02:C882  90 07      			bcc	.LL575
13095                        	
13096                        		.dbg	line,	"include\routines_SHOP.c", 66; {
13097                        	
13098                        		.dbg	line,	"include\routines_SHOP.c", 67; max_index = 4;
13099                        		__st.umiq	4, __joypad_BUTTONS_SHOP_end - 1  /* max_index */
         02:C884  A9 04      			lda.l	#4
         02:C886  8D 0F 23   			sta	__joypad_BUTTONS_SHOP_end - 1
13100                        	
13101                        		.dbg	line,	"include\routines_SHOP.c", 68; }
13102                        	
13103                        		.dbg	line,	"include\routines_SHOP.c", 70; else
13104                        		__bra		.LL576
         02:C889  80 05      			bra	.LL576
13105    02:C88B             	.LL575:
13106                        	
13107                        		.dbg	line,	"include\routines_SHOP.c", 71; {
13108                        	
13109                        		.dbg	line,	"include\routines_SHOP.c", 72; max_index = 5;
13110                        		__st.umiq	5, __joypad_BUTTONS_SHOP_end - 1  /* max_index */
         02:C88B  A9 05      			lda.l	#5
         02:C88D  8D 0F 23   			sta	__joypad_BUTTONS_SHOP_end - 1
13111                        	
13112                        		.dbg	line,	"include\routines_SHOP.c", 73; }
13113    02:C890             	.LL576:
13114                        	
13115                        		.dbg	line,	"include\routines_SHOP.c", 75; if(index_x < max_index)
13116                        		__ld.umq	_index_x
         02:C890  AD D5 23   			lda	_index_x
13117                        		__ult_b.umq	__joypad_BUTTONS_SHOP_end - 1  /* max_index */
         02:C893  CD 0F 23   			cmp	__joypad_BUTTONS_SHOP_end - 1		; Subtract memory from A.
         02:C896  6A         			ror	a		; CC if A < memory.
         02:C897  49 80      			eor	#$80
         02:C899  2A         			rol	a
13118                        		__bfalse	.LL577
         02:C89A  B0 03 4C EA			bcc	.LL577
         02:C89E  CD          
13119                        	
13120                        		.dbg	line,	"include\routines_SHOP.c", 76; {
13121                        	
13122                        		.dbg	line,	"include\routines_SHOP.c", 77; index_x += 1;
13123                        		__add_st.umiq	1, _index_x
         02:C89F  EE D5 23   			inc	_index_x
13124                        	
13125                        		.dbg	line,	"include\routines_SHOP.c", 78; item_index = (index_x + (index_y * 5));
13126                        		__ld.um		_index_y
         02:C8A2  AD D6 23   			lda	_index_y
         02:C8A5  C2         			cly
13127                        		__mul.wi	5
         02:C8A6  85 00      			sta.l	__temp
         02:C8A8  84 01      			sty.h	__temp
                             		__asl.wr
         02:C8AA  0A         			asl	a
         02:C8AB  42         			say
         02:C8AC  2A         			rol	a
         02:C8AD  42         			say
                             		__asl.wr
         02:C8AE  0A         			asl	a
         02:C8AF  42         			say
         02:C8B0  2A         			rol	a
         02:C8B1  42         			say
                             		__add.wm	__temp
         02:C8B2  18         			clc
         02:C8B3  65 00      			adc.l	__temp
         02:C8B5  42         			say
         02:C8B6  65 01      			adc.h	__temp
         02:C8B8  42         			say
13128                        		__add.um	_index_x
         02:C8B9  18         			clc
         02:C8BA  6D D5 23   			adc	_index_x
         02:C8BD  90 01      			bcc	!+
         02:C8BF  C8         			iny
         02:C8C0             	!:
13129                        		__st.umq	_item_index
         02:C8C0  8D D7 23   			sta	_item_index
13130                        	
13131                        		.dbg	line,	"include\routines_SHOP.c", 80; spr_set(0);
13132                        		__ld.uiq	0
         02:C8C3  62         			cla
13133                        		__call		_spr_set.1
         02:C8C4  20 DD E7   			call	_spr_set.1
13134                        	
13135                        		.dbg	line,	"include\routines_SHOP.c", 81; spr_x(TABLE_CURSOR_POS_X[item_index]);
13136                        		__ldx.umq	_item_index
         02:C8C7  AE D7 23   			ldx	_item_index
13137                        		__ld.uax	_TABLE_CURSOR_POS_X
         02:C8CA  BD BE 61   			lda	_TABLE_CURSOR_POS_X, x
         02:C8CD  C2         			cly
13138                        		__call		_spr_x.1
         02:C8CE  20 0A E8   			call	_spr_x.1
13139                        	
13140                        		.dbg	line,	"include\routines_SHOP.c", 82; }
13141                        	
13142                        		.dbg	line,	"include\routines_SHOP.c", 83; }
13143    02:C8D1             	.LL577	.alias		.LL578
13144                        	
13145                        		.dbg	line,	"include\routines_SHOP.c", 85; 
13146                        	
13147                        		.dbg	line,	"include\routines_SHOP.c", 86; else if(joytrg(JOYPAD_1) & JOY_LEFT)
13148                        		__bra		.LL578
         02:C8D1  4C EA CD   			bra	.LL578
13149    02:C8D4             	.LL574:
13150                        		__ld.uiq	0
         02:C8D4  62         			cla
13151                        		 _joytrg.1
         02:C8D5  AA         			tax
         02:C8D6  BD 2D 22   			lda	joytrg, x
         02:C8D9  BC DD 22   			ldy	joy6trg, x
13152                        		__tand.wi	128
         02:C8DC  29 80      			and	#128
         02:C8DE  C9 01      	!:		cmp	#1
13153                        		__bfalse	.LL579
         02:C8E0  90 40      			bcc	.LL579
13154                        	
13155                        		.dbg	line,	"include\routines_SHOP.c", 87; {
13156                        	
13157                        		.dbg	line,	"include\routines_SHOP.c", 88; if(index_x > 0)
13158                        		__ld.umq	_index_x
         02:C8E2  AD D5 23   			lda	_index_x
13159                        		__ugt_b.uiq	0
         02:C8E5  18         			clc			; Subtract integer+1 from A.
         02:C8E6  E9 00      			sbc	#0		; CS if A > integer.
13160                        		__bfalse	.LL580
         02:C8E8  B0 03 4C EA			bcc	.LL580
         02:C8EC  CD          
13161                        	
13162                        		.dbg	line,	"include\routines_SHOP.c", 89; {
13163                        	
13164                        		.dbg	line,	"include\routines_SHOP.c", 90; index_x -= 1;
13165                        		__sub_st.umiq	1, _index_x
         02:C8ED  CE D5 23   			dec	_index_x
13166                        	
13167                        		.dbg	line,	"include\routines_SHOP.c", 91; item_index = (index_x + (index_y * 5));
13168                        		__ld.um		_index_y
         02:C8F0  AD D6 23   			lda	_index_y
         02:C8F3  C2         			cly
13169                        		__mul.wi	5
         02:C8F4  85 00      			sta.l	__temp
         02:C8F6  84 01      			sty.h	__temp
                             		__asl.wr
         02:C8F8  0A         			asl	a
         02:C8F9  42         			say
         02:C8FA  2A         			rol	a
         02:C8FB  42         			say
                             		__asl.wr
         02:C8FC  0A         			asl	a
         02:C8FD  42         			say
         02:C8FE  2A         			rol	a
         02:C8FF  42         			say
                             		__add.wm	__temp
         02:C900  18         			clc
         02:C901  65 00      			adc.l	__temp
         02:C903  42         			say
         02:C904  65 01      			adc.h	__temp
         02:C906  42         			say
13170                        		__add.um	_index_x
         02:C907  18         			clc
         02:C908  6D D5 23   			adc	_index_x
         02:C90B  90 01      			bcc	!+
         02:C90D  C8         			iny
         02:C90E             	!:
13171                        		__st.umq	_item_index
         02:C90E  8D D7 23   			sta	_item_index
13172                        	
13173                        		.dbg	line,	"include\routines_SHOP.c", 93; spr_set(0);
13174                        		__ld.uiq	0
         02:C911  62         			cla
13175                        		__call		_spr_set.1
         02:C912  20 DD E7   			call	_spr_set.1
13176                        	
13177                        		.dbg	line,	"include\routines_SHOP.c", 94; spr_x(TABLE_CURSOR_POS_X[item_index]);
13178                        		__ldx.umq	_item_index
         02:C915  AE D7 23   			ldx	_item_index
13179                        		__ld.uax	_TABLE_CURSOR_POS_X
         02:C918  BD BE 61   			lda	_TABLE_CURSOR_POS_X, x
         02:C91B  C2         			cly
13180                        		__call		_spr_x.1
         02:C91C  20 0A E8   			call	_spr_x.1
13181                        	
13182                        		.dbg	line,	"include\routines_SHOP.c", 95; }
13183                        	
13184                        		.dbg	line,	"include\routines_SHOP.c", 96; }
13185    02:C91F             	.LL580	.alias		.LL581
13186                        	
13187                        		.dbg	line,	"include\routines_SHOP.c", 99; else if(joytrg(JOYPAD_1) & JOY_UP)
13188                        		__bra		.LL581
         02:C91F  4C EA CD   			bra	.LL581
13189    02:C922             	.LL579:
13190                        		__ld.uiq	0
         02:C922  62         			cla
13191                        		 _joytrg.1
         02:C923  AA         			tax
         02:C924  BD 2D 22   			lda	joytrg, x
         02:C927  BC DD 22   			ldy	joy6trg, x
13192                        		__tand.wi	16
         02:C92A  29 10      			and	#16
         02:C92C  C9 01      	!:		cmp	#1
13193                        		__bfalse	.LL582
         02:C92E  90 4A      			bcc	.LL582
13194                        	
13195                        		.dbg	line,	"include\routines_SHOP.c", 100; {
13196                        	
13197                        		.dbg	line,	"include\routines_SHOP.c", 101; if(index_y > 0)
13198                        		__ld.umq	_index_y
         02:C930  AD D6 23   			lda	_index_y
13199                        		__ugt_b.uiq	0
         02:C933  18         			clc			; Subtract integer+1 from A.
         02:C934  E9 00      			sbc	#0		; CS if A > integer.
13200                        		__bfalse	.LL583
         02:C936  B0 03 4C EA			bcc	.LL583
         02:C93A  CD          
13201                        	
13202                        		.dbg	line,	"include\routines_SHOP.c", 102; {
13203                        	
13204                        		.dbg	line,	"include\routines_SHOP.c", 103; if(item_index != 10)
13205                        		__ld.umq	_item_index
         02:C93B  AD D7 23   			lda	_item_index
13206                        		__neq_b.uiq	10
         02:C93E  38         			sec
         02:C93F  49 0A      			eor	#10
         02:C941  D0 01      			bne	!+
         02:C943  18         			clc
         02:C944             	!:
13207                        		__bfalse	.LL584
         02:C944  B0 03 4C EA			bcc	.LL584
         02:C948  CD          
13208                        	
13209                        		.dbg	line,	"include\routines_SHOP.c", 104; {
13210                        	
13211                        		.dbg	line,	"include\routines_SHOP.c", 105; index_y -= 1;
13212                        		__sub_st.umiq	1, _index_y
         02:C949  CE D6 23   			dec	_index_y
13213                        	
13214                        		.dbg	line,	"include\routines_SHOP.c", 106; item_index = (index_x + (index_y * 5));
13215                        		__ld.um		_index_y
         02:C94C  AD D6 23   			lda	_index_y
         02:C94F  C2         			cly
13216                        		__mul.wi	5
         02:C950  85 00      			sta.l	__temp
         02:C952  84 01      			sty.h	__temp
                             		__asl.wr
         02:C954  0A         			asl	a
         02:C955  42         			say
         02:C956  2A         			rol	a
         02:C957  42         			say
                             		__asl.wr
         02:C958  0A         			asl	a
         02:C959  42         			say
         02:C95A  2A         			rol	a
         02:C95B  42         			say
                             		__add.wm	__temp
         02:C95C  18         			clc
         02:C95D  65 00      			adc.l	__temp
         02:C95F  42         			say
         02:C960  65 01      			adc.h	__temp
         02:C962  42         			say
13217                        		__add.um	_index_x
         02:C963  18         			clc
         02:C964  6D D5 23   			adc	_index_x
         02:C967  90 01      			bcc	!+
         02:C969  C8         			iny
         02:C96A             	!:
13218                        		__st.umq	_item_index
         02:C96A  8D D7 23   			sta	_item_index
13219                        	
13220                        		.dbg	line,	"include\routines_SHOP.c", 108; spr_set(0);
13221                        		__ld.uiq	0
         02:C96D  62         			cla
13222                        		__call		_spr_set.1
         02:C96E  20 DD E7   			call	_spr_set.1
13223                        	
13224                        		.dbg	line,	"include\routines_SHOP.c", 109; spr_y(144);
13225                        		__ld.wi		144
         02:C971  A9 90      			lda.l	#144
         02:C973  C2         			cly
13226                        		__call		_spr_y.1
         02:C974  20 19 E8   			call	_spr_y.1
13227                        	
13228                        		.dbg	line,	"include\routines_SHOP.c", 110; }
13229                        	
13230                        		.dbg	line,	"include\routines_SHOP.c", 111; }
13231    02:C977             	.LL584	.alias		.LL585
13232                        	
13233                        		.dbg	line,	"include\routines_SHOP.c", 112; }
13234    02:C977             	.LL583	.alias		.LL585
13235                        	
13236                        		.dbg	line,	"include\routines_SHOP.c", 115; else if(joytrg(JOYPAD_1) & JOY_DOWN)
13237                        		__bra		.LL585
         02:C977  4C EA CD   			bra	.LL585
13238    02:C97A             	.LL582:
13239                        		__ld.uiq	0
         02:C97A  62         			cla
13240                        		 _joytrg.1
         02:C97B  AA         			tax
         02:C97C  BD 2D 22   			lda	joytrg, x
         02:C97F  BC DD 22   			ldy	joy6trg, x
13241                        		__tand.wi	64
         02:C982  29 40      			and	#64
         02:C984  C9 01      	!:		cmp	#1
13242                        		__bfalse	.LL586
         02:C986  90 3F      			bcc	.LL586
13243                        	
13244                        		.dbg	line,	"include\routines_SHOP.c", 116; {
13245                        	
13246                        		.dbg	line,	"include\routines_SHOP.c", 117; if(index_y < 1)
13247                        		__ld.umq	_index_y
         02:C988  AD D6 23   			lda	_index_y
13248                        		__ult_b.uiq	1
         02:C98B  C9 01      			cmp	#1		; Subtract integer from A.
         02:C98D  6A         			ror	a		; CC if A < integer.
         02:C98E  49 80      			eor	#$80
         02:C990  2A         			rol	a
13249                        		__bfalse	.LL587
         02:C991  B0 03 4C EA			bcc	.LL587
         02:C995  CD          
13250                        	
13251                        		.dbg	line,	"include\routines_SHOP.c", 118; {
13252                        	
13253                        		.dbg	line,	"include\routines_SHOP.c", 119; index_y += 1;
13254                        		__add_st.umiq	1, _index_y
         02:C996  EE D6 23   			inc	_index_y
13255                        	
13256                        		.dbg	line,	"include\routines_SHOP.c", 120; item_index = (index_x + (index_y * 5));
13257                        		__ld.um		_index_y
         02:C999  AD D6 23   			lda	_index_y
         02:C99C  C2         			cly
13258                        		__mul.wi	5
         02:C99D  85 00      			sta.l	__temp
         02:C99F  84 01      			sty.h	__temp
                             		__asl.wr
         02:C9A1  0A         			asl	a
         02:C9A2  42         			say
         02:C9A3  2A         			rol	a
         02:C9A4  42         			say
                             		__asl.wr
         02:C9A5  0A         			asl	a
         02:C9A6  42         			say
         02:C9A7  2A         			rol	a
         02:C9A8  42         			say
                             		__add.wm	__temp
         02:C9A9  18         			clc
         02:C9AA  65 00      			adc.l	__temp
         02:C9AC  42         			say
         02:C9AD  65 01      			adc.h	__temp
         02:C9AF  42         			say
13259                        		__add.um	_index_x
         02:C9B0  18         			clc
         02:C9B1  6D D5 23   			adc	_index_x
         02:C9B4  90 01      			bcc	!+
         02:C9B6  C8         			iny
         02:C9B7             	!:
13260                        		__st.umq	_item_index
         02:C9B7  8D D7 23   			sta	_item_index
13261                        	
13262                        		.dbg	line,	"include\routines_SHOP.c", 122; spr_set(0);
13263                        		__ld.uiq	0
         02:C9BA  62         			cla
13264                        		__call		_spr_set.1
         02:C9BB  20 DD E7   			call	_spr_set.1
13265                        	
13266                        		.dbg	line,	"include\routines_SHOP.c", 123; spr_y(168);
13267                        		__ld.wi		168
         02:C9BE  A9 A8      			lda.l	#168
         02:C9C0  C2         			cly
13268                        		__call		_spr_y.1
         02:C9C1  20 19 E8   			call	_spr_y.1
13269                        	
13270                        		.dbg	line,	"include\routines_SHOP.c", 124; }
13271                        	
13272                        		.dbg	line,	"include\routines_SHOP.c", 125; }
13273    02:C9C4             	.LL587	.alias		.LL588
13274                        	
13275                        		.dbg	line,	"include\routines_SHOP.c", 128; else if(joytrg(JOYPAD_1) & JOY_I)
13276                        		__bra		.LL588
         02:C9C4  4C EA CD   			bra	.LL588
13277    02:C9C7             	.LL586:
13278                        		__ld.uiq	0
         02:C9C7  62         			cla
13279                        		 _joytrg.1
         02:C9C8  AA         			tax
         02:C9C9  BD 2D 22   			lda	joytrg, x
         02:C9CC  BC DD 22   			ldy	joy6trg, x
13280                        		__tand.wi	1
         02:C9CF  29 01      			and	#1
         02:C9D1  C9 01      	!:		cmp	#1
13281                        		__bfalse	.LL589
         02:C9D3  B0 03 4C EA			bcc	.LL589
         02:C9D7  CD          
13282                        	
13283                        		.dbg	line,	"include\routines_SHOP.c", 129; {
13284                        	
13285                        		.dbg	line,	"include\routines_SHOP.c", 130; switch(item_index)
13286                        		__ld.umq	_item_index
         02:C9D8  AD D7 23   			lda	_item_index
13287                        		__bra		.LL590
         02:C9DB  4C C7 CD   			bra	.LL590
13288                        	
13289                        		.dbg	line,	"include\routines_SHOP.c", 131; {
13290                        	
13291                        		.dbg	line,	"include\routines_SHOP.c", 132; // WEAPON 2 //
13292                        	
13293                        		.dbg	line,	"include\routines_SHOP.c", 133; case 0:
13294    02:C9DE             	.LL592:
13295                        		__case		0
13296                        	
13297                        		.dbg	line,	"include\routines_SHOP.c", 134; if(zenny_amount >= shop_prices[0])
13298                        		__ld.wm		_zenny_amount
         02:C9DE  AD 34 26   			lda.l	_zenny_amount
         02:C9E1  AC 35 26   			ldy.h	_zenny_amount
13299                        		__sge_w.wm	_shop_prices
         02:C9E4  CD 38 26   			cmp.l	_shop_prices		; Subtract memory from Y:A.
         02:C9E7  98         			tya
         02:C9E8  ED 39 26   			sbc.h	_shop_prices
         02:C9EB  50 02      			bvc	!+
         02:C9ED  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:C9EF  49 80      	!:		eor	#$80
         02:C9F1  0A         			asl	a
13300                        		__bfalse	.LL593
         02:C9F2  B0 03 4C EA			bcc	.LL593
         02:C9F6  CD          
13301                        	
13302                        		.dbg	line,	"include\routines_SHOP.c", 135; {
13303                        	
13304                        		.dbg	line,	"include\routines_SHOP.c", 136; if(weapon_level < 1)
13305                        		__ld.umq	_weapon_level
         02:C9F7  AD 28 23   			lda	_weapon_level
13306                        		__ult_b.uiq	1
         02:C9FA  C9 01      			cmp	#1		; Subtract integer from A.
         02:C9FC  6A         			ror	a		; CC if A < integer.
         02:C9FD  49 80      			eor	#$80
         02:C9FF  2A         			rol	a
13307                        		__bfalse	.LL594
         02:CA00  B0 03 4C EA			bcc	.LL594
         02:CA04  CD          
13308                        	
13309                        		.dbg	line,	"include\routines_SHOP.c", 137; {
13310                        	
13311                        		.dbg	line,	"include\routines_SHOP.c", 138; weapon_level = 1;
13312                        		__st.umiq	1, _weapon_level
         02:CA05  A9 01      			lda.l	#1
         02:CA07  8D 28 23   			sta	_weapon_level
13313                        	
13314                        		.dbg	line,	"include\routines_SHOP.c", 139; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_2, SIZEOF(tileset_WEAPON_2) >> 1 );
13315                        		__st.wmiq	4256, _di
         02:CA0A  A9 A0      			lda.l	#4256
         02:CA0C  85 F0      			sta.l	_di
         02:CA0E  A9 10      			lda.h	#4256
         02:CA10  85 F1      			sta.h	_di
13316                        		__farptr	_tileset_WEAPON_2, _bp_bank, _bp
         02:CA12  A9 E0      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_2))
         02:CA14  85 EC      			sta.l	_bp
         02:CA16  A9 68      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_2))
         02:CA18  85 ED      			sta.h	_bp
         02:CA1A  A9 05      			lda	#bank(_tileset_WEAPON_2)
         02:CA1C  85 02      			sta	_bp_bank
13317                        		__ld.wi		___sizeof__tileset_WEAPON_2
         02:CA1E  A9 80      			lda.l	#___sizeof__tileset_WEAPON_2
         02:CA20  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_2
13318                        		__lsr.wi	1
         02:CA22  42         			say
         02:CA23  4A         			lsr	a
         02:CA24  42         			say
         02:CA25  6A         			ror	a
13319                        		__st.wmq	_ax
         02:CA26  85 F8      			sta.l	_ax
         02:CA28  84 F9      			sty.h	_ax
13320                        		 _load_vram.3
         02:CA2A  82         			clx				; Offset to PCE VDC.
         02:CA2B  20 4F FF   			call	load_vram_x
13321                        	
13322                        		.dbg	line,	"include\routines_SHOP.c", 141; zenny_amount -= shop_prices[0];
13323                        		__ld.wm		_shop_prices
         02:CA2E  AD 38 26   			lda.l	_shop_prices
         02:CA31  AC 39 26   			ldy.h	_shop_prices
13324                        		__isub_st.wmq	_zenny_amount
         02:CA34  38         			sec
         02:CA35  49 FF      			eor	#$FF
         02:CA37  6D 34 26   			adc.l	_zenny_amount
         02:CA3A  8D 34 26   			sta.l	_zenny_amount
         02:CA3D  98         			tya
         02:CA3E  49 FF      			eor	#$FF
         02:CA40  6D 35 26   			adc.h	_zenny_amount
         02:CA43  8D 35 26   			sta.h	_zenny_amount
13325                        	
13326                        		.dbg	line,	"include\routines_SHOP.c", 142; display_ZENNY();
13327                        		__call		_display_ZENNY
         02:CA46  20 45 FF   			call	_display_ZENNY
13328                        	
13329                        		.dbg	line,	"include\routines_SHOP.c", 143; }
13330                        	
13331                        		.dbg	line,	"include\routines_SHOP.c", 144; }
13332    02:CA49             	.LL594	.alias		.LL591
13333                        	
13334                        		.dbg	line,	"include\routines_SHOP.c", 146; break;   
13335    02:CA49             	.LL593	.alias		.LL591
13336                        		__bra		.LL591
         02:CA49  4C EA CD   			bra	.LL591
13337                        	
13338                        		.dbg	line,	"include\routines_SHOP.c", 149; // WEAPON 4 //
13339                        	
13340                        		.dbg	line,	"include\routines_SHOP.c", 150; case 1:
13341    02:CA4C             	.LL595:
13342                        		__case		1
13343                        	
13344                        		.dbg	line,	"include\routines_SHOP.c", 151; if(zenny_amount >= shop_prices[1])
13345                        		__ld.wm		_zenny_amount
         02:CA4C  AD 34 26   			lda.l	_zenny_amount
         02:CA4F  AC 35 26   			ldy.h	_zenny_amount
13346                        		__sge_w.wm	_shop_prices + 2
         02:CA52  CD 3A 26   			cmp.l	_shop_prices + 2		; Subtract memory from Y:A.
         02:CA55  98         			tya
         02:CA56  ED 3B 26   			sbc.h	_shop_prices + 2
         02:CA59  50 02      			bvc	!+
         02:CA5B  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:CA5D  49 80      	!:		eor	#$80
         02:CA5F  0A         			asl	a
13347                        		__bfalse	.LL596
         02:CA60  B0 03 4C EA			bcc	.LL596
         02:CA64  CD          
13348                        	
13349                        		.dbg	line,	"include\routines_SHOP.c", 152; {
13350                        	
13351                        		.dbg	line,	"include\routines_SHOP.c", 153; if(weapon_level < 2)
13352                        		__ld.umq	_weapon_level
         02:CA65  AD 28 23   			lda	_weapon_level
13353                        		__ult_b.uiq	2
         02:CA68  C9 02      			cmp	#2		; Subtract integer from A.
         02:CA6A  6A         			ror	a		; CC if A < integer.
         02:CA6B  49 80      			eor	#$80
         02:CA6D  2A         			rol	a
13354                        		__bfalse	.LL597
         02:CA6E  B0 03 4C EA			bcc	.LL597
         02:CA72  CD          
13355                        	
13356                        		.dbg	line,	"include\routines_SHOP.c", 154; {
13357                        	
13358                        		.dbg	line,	"include\routines_SHOP.c", 155; weapon_level = 2;
13359                        		__st.umiq	2, _weapon_level
         02:CA73  A9 02      			lda.l	#2
         02:CA75  8D 28 23   			sta	_weapon_level
13360                        	
13361                        		.dbg	line,	"include\routines_SHOP.c", 156; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_4, SIZEOF(tileset_WEAPON_4) >> 1 );
13362                        		__st.wmiq	4256, _di
         02:CA78  A9 A0      			lda.l	#4256
         02:CA7A  85 F0      			sta.l	_di
         02:CA7C  A9 10      			lda.h	#4256
         02:CA7E  85 F1      			sta.h	_di
13363                        		__farptr	_tileset_WEAPON_4, _bp_bank, _bp
         02:CA80  A9 60      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_4))
         02:CA82  85 EC      			sta.l	_bp
         02:CA84  A9 69      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_4))
         02:CA86  85 ED      			sta.h	_bp
         02:CA88  A9 05      			lda	#bank(_tileset_WEAPON_4)
         02:CA8A  85 02      			sta	_bp_bank
13364                        		__ld.wi		___sizeof__tileset_WEAPON_4
         02:CA8C  A9 80      			lda.l	#___sizeof__tileset_WEAPON_4
         02:CA8E  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_4
13365                        		__lsr.wi	1
         02:CA90  42         			say
         02:CA91  4A         			lsr	a
         02:CA92  42         			say
         02:CA93  6A         			ror	a
13366                        		__st.wmq	_ax
         02:CA94  85 F8      			sta.l	_ax
         02:CA96  84 F9      			sty.h	_ax
13367                        		 _load_vram.3
         02:CA98  82         			clx				; Offset to PCE VDC.
         02:CA99  20 4F FF   			call	load_vram_x
13368                        	
13369                        		.dbg	line,	"include\routines_SHOP.c", 158; zenny_amount -= shop_prices[1];
13370                        		__ld.wm		_shop_prices + 2
         02:CA9C  AD 3A 26   			lda.l	_shop_prices + 2
         02:CA9F  AC 3B 26   			ldy.h	_shop_prices + 2
13371                        		__isub_st.wmq	_zenny_amount
         02:CAA2  38         			sec
         02:CAA3  49 FF      			eor	#$FF
         02:CAA5  6D 34 26   			adc.l	_zenny_amount
         02:CAA8  8D 34 26   			sta.l	_zenny_amount
         02:CAAB  98         			tya
         02:CAAC  49 FF      			eor	#$FF
         02:CAAE  6D 35 26   			adc.h	_zenny_amount
         02:CAB1  8D 35 26   			sta.h	_zenny_amount
13372                        	
13373                        		.dbg	line,	"include\routines_SHOP.c", 159; display_ZENNY();
13374                        		__call		_display_ZENNY
         02:CAB4  20 45 FF   			call	_display_ZENNY
13375                        	
13376                        		.dbg	line,	"include\routines_SHOP.c", 160; }
13377                        	
13378                        		.dbg	line,	"include\routines_SHOP.c", 161; }
13379    02:CAB7             	.LL597	.alias		.LL591
13380                        	
13381                        		.dbg	line,	"include\routines_SHOP.c", 163; break; 
13382    02:CAB7             	.LL596	.alias		.LL591
13383                        		__bra		.LL591
         02:CAB7  4C EA CD   			bra	.LL591
13384                        	
13385                        		.dbg	line,	"include\routines_SHOP.c", 166; // WEAPON 5 //
13386                        	
13387                        		.dbg	line,	"include\routines_SHOP.c", 167; case 2:
13388    02:CABA             	.LL598:
13389                        		__case		2
13390                        	
13391                        		.dbg	line,	"include\routines_SHOP.c", 168; if(zenny_amount >= shop_prices[2])
13392                        		__ld.wm		_zenny_amount
         02:CABA  AD 34 26   			lda.l	_zenny_amount
         02:CABD  AC 35 26   			ldy.h	_zenny_amount
13393                        		__sge_w.wm	_shop_prices + 4
         02:CAC0  CD 3C 26   			cmp.l	_shop_prices + 4		; Subtract memory from Y:A.
         02:CAC3  98         			tya
         02:CAC4  ED 3D 26   			sbc.h	_shop_prices + 4
         02:CAC7  50 02      			bvc	!+
         02:CAC9  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:CACB  49 80      	!:		eor	#$80
         02:CACD  0A         			asl	a
13394                        		__bfalse	.LL599
         02:CACE  B0 03 4C EA			bcc	.LL599
         02:CAD2  CD          
13395                        	
13396                        		.dbg	line,	"include\routines_SHOP.c", 169; {
13397                        	
13398                        		.dbg	line,	"include\routines_SHOP.c", 170; if(weapon_level < 3)
13399                        		__ld.umq	_weapon_level
         02:CAD3  AD 28 23   			lda	_weapon_level
13400                        		__ult_b.uiq	3
         02:CAD6  C9 03      			cmp	#3		; Subtract integer from A.
         02:CAD8  6A         			ror	a		; CC if A < integer.
         02:CAD9  49 80      			eor	#$80
         02:CADB  2A         			rol	a
13401                        		__bfalse	.LL600
         02:CADC  B0 03 4C EA			bcc	.LL600
         02:CAE0  CD          
13402                        	
13403                        		.dbg	line,	"include\routines_SHOP.c", 171; {
13404                        	
13405                        		.dbg	line,	"include\routines_SHOP.c", 172; weapon_level = 3;
13406                        		__st.umiq	3, _weapon_level
         02:CAE1  A9 03      			lda.l	#3
         02:CAE3  8D 28 23   			sta	_weapon_level
13407                        	
13408                        		.dbg	line,	"include\routines_SHOP.c", 173; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_5, SIZEOF(tileset_WEAPON_5) >> 1 );
13409                        		__st.wmiq	4256, _di
         02:CAE6  A9 A0      			lda.l	#4256
         02:CAE8  85 F0      			sta.l	_di
         02:CAEA  A9 10      			lda.h	#4256
         02:CAEC  85 F1      			sta.h	_di
13410                        		__farptr	_tileset_WEAPON_5, _bp_bank, _bp
         02:CAEE  A9 E0      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_5))
         02:CAF0  85 EC      			sta.l	_bp
         02:CAF2  A9 69      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_5))
         02:CAF4  85 ED      			sta.h	_bp
         02:CAF6  A9 05      			lda	#bank(_tileset_WEAPON_5)
         02:CAF8  85 02      			sta	_bp_bank
13411                        		__ld.wi		___sizeof__tileset_WEAPON_5
         02:CAFA  A9 80      			lda.l	#___sizeof__tileset_WEAPON_5
         02:CAFC  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_5
13412                        		__lsr.wi	1
         02:CAFE  42         			say
         02:CAFF  4A         			lsr	a
         02:CB00  42         			say
         02:CB01  6A         			ror	a
13413                        		__st.wmq	_ax
         02:CB02  85 F8      			sta.l	_ax
         02:CB04  84 F9      			sty.h	_ax
13414                        		 _load_vram.3
         02:CB06  82         			clx				; Offset to PCE VDC.
         02:CB07  20 4F FF   			call	load_vram_x
13415                        	
13416                        		.dbg	line,	"include\routines_SHOP.c", 175; zenny_amount -= shop_prices[2];
13417                        		__ld.wm		_shop_prices + 4
         02:CB0A  AD 3C 26   			lda.l	_shop_prices + 4
         02:CB0D  AC 3D 26   			ldy.h	_shop_prices + 4
13418                        		__isub_st.wmq	_zenny_amount
         02:CB10  38         			sec
         02:CB11  49 FF      			eor	#$FF
         02:CB13  6D 34 26   			adc.l	_zenny_amount
         02:CB16  8D 34 26   			sta.l	_zenny_amount
         02:CB19  98         			tya
         02:CB1A  49 FF      			eor	#$FF
         02:CB1C  6D 35 26   			adc.h	_zenny_amount
         02:CB1F  8D 35 26   			sta.h	_zenny_amount
13419                        	
13420                        		.dbg	line,	"include\routines_SHOP.c", 176; display_ZENNY();
13421                        		__call		_display_ZENNY
         02:CB22  20 45 FF   			call	_display_ZENNY
13422                        	
13423                        		.dbg	line,	"include\routines_SHOP.c", 177; }
13424                        	
13425                        		.dbg	line,	"include\routines_SHOP.c", 178; }
13426    02:CB25             	.LL600	.alias		.LL591
13427                        	
13428                        		.dbg	line,	"include\routines_SHOP.c", 180; break;   
13429    02:CB25             	.LL599	.alias		.LL591
13430                        		__bra		.LL591
         02:CB25  4C EA CD   			bra	.LL591
13431                        	
13432                        		.dbg	line,	"include\routines_SHOP.c", 183; // WEAPON 8 //
13433                        	
13434                        		.dbg	line,	"include\routines_SHOP.c", 184; case 3:
13435    02:CB28             	.LL601:
13436                        		__case		3
13437                        	
13438                        		.dbg	line,	"include\routines_SHOP.c", 185; if(zenny_amount >= shop_prices[3])
13439                        		__ld.wm		_zenny_amount
         02:CB28  AD 34 26   			lda.l	_zenny_amount
         02:CB2B  AC 35 26   			ldy.h	_zenny_amount
13440                        		__sge_w.wm	_shop_prices + 6
         02:CB2E  CD 3E 26   			cmp.l	_shop_prices + 6		; Subtract memory from Y:A.
         02:CB31  98         			tya
         02:CB32  ED 3F 26   			sbc.h	_shop_prices + 6
         02:CB35  50 02      			bvc	!+
         02:CB37  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:CB39  49 80      	!:		eor	#$80
         02:CB3B  0A         			asl	a
13441                        		__bfalse	.LL602
         02:CB3C  B0 03 4C EA			bcc	.LL602
         02:CB40  CD          
13442                        	
13443                        		.dbg	line,	"include\routines_SHOP.c", 186; {
13444                        	
13445                        		.dbg	line,	"include\routines_SHOP.c", 187; if(weapon_level < 4)
13446                        		__ld.umq	_weapon_level
         02:CB41  AD 28 23   			lda	_weapon_level
13447                        		__ult_b.uiq	4
         02:CB44  C9 04      			cmp	#4		; Subtract integer from A.
         02:CB46  6A         			ror	a		; CC if A < integer.
         02:CB47  49 80      			eor	#$80
         02:CB49  2A         			rol	a
13448                        		__bfalse	.LL603
         02:CB4A  B0 03 4C EA			bcc	.LL603
         02:CB4E  CD          
13449                        	
13450                        		.dbg	line,	"include\routines_SHOP.c", 188; {
13451                        	
13452                        		.dbg	line,	"include\routines_SHOP.c", 189; weapon_level = 4;
13453                        		__st.umiq	4, _weapon_level
         02:CB4F  A9 04      			lda.l	#4
         02:CB51  8D 28 23   			sta	_weapon_level
13454                        	
13455                        		.dbg	line,	"include\routines_SHOP.c", 190; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_8, SIZEOF(tileset_WEAPON_8) >> 1 );
13456                        		__st.wmiq	4256, _di
         02:CB54  A9 A0      			lda.l	#4256
         02:CB56  85 F0      			sta.l	_di
         02:CB58  A9 10      			lda.h	#4256
         02:CB5A  85 F1      			sta.h	_di
13457                        		__farptr	_tileset_WEAPON_8, _bp_bank, _bp
         02:CB5C  A9 60      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_8))
         02:CB5E  85 EC      			sta.l	_bp
         02:CB60  A9 6A      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_8))
         02:CB62  85 ED      			sta.h	_bp
         02:CB64  A9 05      			lda	#bank(_tileset_WEAPON_8)
         02:CB66  85 02      			sta	_bp_bank
13458                        		__ld.wi		___sizeof__tileset_WEAPON_8
         02:CB68  A9 80      			lda.l	#___sizeof__tileset_WEAPON_8
         02:CB6A  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_8
13459                        		__lsr.wi	1
         02:CB6C  42         			say
         02:CB6D  4A         			lsr	a
         02:CB6E  42         			say
         02:CB6F  6A         			ror	a
13460                        		__st.wmq	_ax
         02:CB70  85 F8      			sta.l	_ax
         02:CB72  84 F9      			sty.h	_ax
13461                        		 _load_vram.3
         02:CB74  82         			clx				; Offset to PCE VDC.
         02:CB75  20 4F FF   			call	load_vram_x
13462                        	
13463                        		.dbg	line,	"include\routines_SHOP.c", 192; zenny_amount -= shop_prices[3];
13464                        		__ld.wm		_shop_prices + 6
         02:CB78  AD 3E 26   			lda.l	_shop_prices + 6
         02:CB7B  AC 3F 26   			ldy.h	_shop_prices + 6
13465                        		__isub_st.wmq	_zenny_amount
         02:CB7E  38         			sec
         02:CB7F  49 FF      			eor	#$FF
         02:CB81  6D 34 26   			adc.l	_zenny_amount
         02:CB84  8D 34 26   			sta.l	_zenny_amount
         02:CB87  98         			tya
         02:CB88  49 FF      			eor	#$FF
         02:CB8A  6D 35 26   			adc.h	_zenny_amount
         02:CB8D  8D 35 26   			sta.h	_zenny_amount
13466                        	
13467                        		.dbg	line,	"include\routines_SHOP.c", 193; display_ZENNY();
13468                        		__call		_display_ZENNY
         02:CB90  20 45 FF   			call	_display_ZENNY
13469                        	
13470                        		.dbg	line,	"include\routines_SHOP.c", 194; }
13471                        	
13472                        		.dbg	line,	"include\routines_SHOP.c", 195; }
13473    02:CB93             	.LL603	.alias		.LL591
13474                        	
13475                        		.dbg	line,	"include\routines_SHOP.c", 197; break;  
13476    02:CB93             	.LL602	.alias		.LL591
13477                        		__bra		.LL591
         02:CB93  4C EA CD   			bra	.LL591
13478                        	
13479                        		.dbg	line,	"include\routines_SHOP.c", 200; // KEY //
13480                        	
13481                        		.dbg	line,	"include\routines_SHOP.c", 201; case 4:
13482    02:CB96             	.LL604:
13483                        		__case		4
13484                        	
13485                        		.dbg	line,	"include\routines_SHOP.c", 202; if(zenny_amount >= shop_prices[4])
13486                        		__ld.wm		_zenny_amount
         02:CB96  AD 34 26   			lda.l	_zenny_amount
         02:CB99  AC 35 26   			ldy.h	_zenny_amount
13487                        		__sge_w.wm	_shop_prices + 8
         02:CB9C  CD 40 26   			cmp.l	_shop_prices + 8		; Subtract memory from Y:A.
         02:CB9F  98         			tya
         02:CBA0  ED 41 26   			sbc.h	_shop_prices + 8
         02:CBA3  50 02      			bvc	!+
         02:CBA5  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:CBA7  49 80      	!:		eor	#$80
         02:CBA9  0A         			asl	a
13488                        		__bfalse	.LL605
         02:CBAA  B0 03 4C EA			bcc	.LL605
         02:CBAE  CD          
13489                        	
13490                        		.dbg	line,	"include\routines_SHOP.c", 203; {
13491                        	
13492                        		.dbg	line,	"include\routines_SHOP.c", 204; key_amount += 1;
13493                        		__add_st.umiq	1, _key_amount
         02:CBAF  EE 2E 23   			inc	_key_amount
13494                        	
13495                        		.dbg	line,	"include\routines_SHOP.c", 206; zenny_amount -= shop_prices[4];
13496                        		__ld.wm		_shop_prices + 8
         02:CBB2  AD 40 26   			lda.l	_shop_prices + 8
         02:CBB5  AC 41 26   			ldy.h	_shop_prices + 8
13497                        		__isub_st.wmq	_zenny_amount
         02:CBB8  38         			sec
         02:CBB9  49 FF      			eor	#$FF
         02:CBBB  6D 34 26   			adc.l	_zenny_amount
         02:CBBE  8D 34 26   			sta.l	_zenny_amount
         02:CBC1  98         			tya
         02:CBC2  49 FF      			eor	#$FF
         02:CBC4  6D 35 26   			adc.h	_zenny_amount
         02:CBC7  8D 35 26   			sta.h	_zenny_amount
13498                        	
13499                        		.dbg	line,	"include\routines_SHOP.c", 207; display_KEY();
13500                        		__call		_display_KEY
         02:CBCA  20 8B FF   			call	_display_KEY
13501                        	
13502                        		.dbg	line,	"include\routines_SHOP.c", 208; }
13503                        	
13504                        		.dbg	line,	"include\routines_SHOP.c", 210; break;   
13505    02:CBCD             	.LL605	.alias		.LL591
13506                        		__bra		.LL591
         02:CBCD  4C EA CD   			bra	.LL591
13507                        	
13508                        		.dbg	line,	"include\routines_SHOP.c", 213; // ARMOR 1 //
13509                        	
13510                        		.dbg	line,	"include\routines_SHOP.c", 214; case 5:
13511    02:CBD0             	.LL606:
13512                        		__case		5
13513                        	
13514                        		.dbg	line,	"include\routines_SHOP.c", 215; if(zenny_amount >= shop_prices[5])
13515                        		__ld.wm		_zenny_amount
         02:CBD0  AD 34 26   			lda.l	_zenny_amount
         02:CBD3  AC 35 26   			ldy.h	_zenny_amount
13516                        		__sge_w.wm	_shop_prices + 10
         02:CBD6  CD 42 26   			cmp.l	_shop_prices + 10		; Subtract memory from Y:A.
         02:CBD9  98         			tya
         02:CBDA  ED 43 26   			sbc.h	_shop_prices + 10
         02:CBDD  50 02      			bvc	!+
         02:CBDF  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:CBE1  49 80      	!:		eor	#$80
         02:CBE3  0A         			asl	a
13517                        		__bfalse	.LL607
         02:CBE4  B0 03 4C EA			bcc	.LL607
         02:CBE8  CD          
13518                        	
13519                        		.dbg	line,	"include\routines_SHOP.c", 216; {
13520                        	
13521                        		.dbg	line,	"include\routines_SHOP.c", 217; if(armor_level < 1)
13522                        		__ld.umq	_armor_level
         02:CBE9  AD 27 23   			lda	_armor_level
13523                        		__ult_b.uiq	1
         02:CBEC  C9 01      			cmp	#1		; Subtract integer from A.
         02:CBEE  6A         			ror	a		; CC if A < integer.
         02:CBEF  49 80      			eor	#$80
         02:CBF1  2A         			rol	a
13524                        		__bfalse	.LL608
         02:CBF2  B0 03 4C EA			bcc	.LL608
         02:CBF6  CD          
13525                        	
13526                        		.dbg	line,	"include\routines_SHOP.c", 218; {
13527                        	
13528                        		.dbg	line,	"include\routines_SHOP.c", 219; armor_level = 1;
13529                        		__st.umiq	1, _armor_level
         02:CBF7  A9 01      			lda.l	#1
         02:CBF9  8D 27 23   			sta	_armor_level
13530                        	
13531                        		.dbg	line,	"include\routines_SHOP.c", 220; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_1, SIZEOF(tileset_ARMOR_1) >> 1 );
13532                        		__st.wmiq	4320, _di
         02:CBFC  A9 E0      			lda.l	#4320
         02:CBFE  85 F0      			sta.l	_di
         02:CC00  A9 10      			lda.h	#4320
         02:CC02  85 F1      			sta.h	_di
13533                        		__farptr	_tileset_ARMOR_1, _bp_bank, _bp
         02:CC04  A9 60      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_1))
         02:CC06  85 EC      			sta.l	_bp
         02:CC08  A9 66      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_1))
         02:CC0A  85 ED      			sta.h	_bp
         02:CC0C  A9 05      			lda	#bank(_tileset_ARMOR_1)
         02:CC0E  85 02      			sta	_bp_bank
13534                        		__ld.wi		___sizeof__tileset_ARMOR_1
         02:CC10  A9 80      			lda.l	#___sizeof__tileset_ARMOR_1
         02:CC12  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_1
13535                        		__lsr.wi	1
         02:CC14  42         			say
         02:CC15  4A         			lsr	a
         02:CC16  42         			say
         02:CC17  6A         			ror	a
13536                        		__st.wmq	_ax
         02:CC18  85 F8      			sta.l	_ax
         02:CC1A  84 F9      			sty.h	_ax
13537                        		 _load_vram.3
         02:CC1C  82         			clx				; Offset to PCE VDC.
         02:CC1D  20 4F FF   			call	load_vram_x
13538                        	
13539                        		.dbg	line,	"include\routines_SHOP.c", 222; zenny_amount -= shop_prices[5];
13540                        		__ld.wm		_shop_prices + 10
         02:CC20  AD 42 26   			lda.l	_shop_prices + 10
         02:CC23  AC 43 26   			ldy.h	_shop_prices + 10
13541                        		__isub_st.wmq	_zenny_amount
         02:CC26  38         			sec
         02:CC27  49 FF      			eor	#$FF
         02:CC29  6D 34 26   			adc.l	_zenny_amount
         02:CC2C  8D 34 26   			sta.l	_zenny_amount
         02:CC2F  98         			tya
         02:CC30  49 FF      			eor	#$FF
         02:CC32  6D 35 26   			adc.h	_zenny_amount
         02:CC35  8D 35 26   			sta.h	_zenny_amount
13542                        	
13543                        		.dbg	line,	"include\routines_SHOP.c", 223; display_ZENNY();
13544                        		__call		_display_ZENNY
         02:CC38  20 45 FF   			call	_display_ZENNY
13545                        	
13546                        		.dbg	line,	"include\routines_SHOP.c", 224; }
13547                        	
13548                        		.dbg	line,	"include\routines_SHOP.c", 225; }
13549    02:CC3B             	.LL608	.alias		.LL591
13550                        	
13551                        		.dbg	line,	"include\routines_SHOP.c", 227; break;   
13552    02:CC3B             	.LL607	.alias		.LL591
13553                        		__bra		.LL591
         02:CC3B  4C EA CD   			bra	.LL591
13554                        	
13555                        		.dbg	line,	"include\routines_SHOP.c", 230; // ARMOR 2 //
13556                        	
13557                        		.dbg	line,	"include\routines_SHOP.c", 231; case 6:
13558    02:CC3E             	.LL609:
13559                        		__case		6
13560                        	
13561                        		.dbg	line,	"include\routines_SHOP.c", 232; if(zenny_amount >= shop_prices[6])
13562                        		__ld.wm		_zenny_amount
         02:CC3E  AD 34 26   			lda.l	_zenny_amount
         02:CC41  AC 35 26   			ldy.h	_zenny_amount
13563                        		__sge_w.wm	_shop_prices + 12
         02:CC44  CD 44 26   			cmp.l	_shop_prices + 12		; Subtract memory from Y:A.
         02:CC47  98         			tya
         02:CC48  ED 45 26   			sbc.h	_shop_prices + 12
         02:CC4B  50 02      			bvc	!+
         02:CC4D  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:CC4F  49 80      	!:		eor	#$80
         02:CC51  0A         			asl	a
13564                        		__bfalse	.LL610
         02:CC52  B0 03 4C EA			bcc	.LL610
         02:CC56  CD          
13565                        	
13566                        		.dbg	line,	"include\routines_SHOP.c", 233; {
13567                        	
13568                        		.dbg	line,	"include\routines_SHOP.c", 234; if(armor_level < 4)
13569                        		__ld.umq	_armor_level
         02:CC57  AD 27 23   			lda	_armor_level
13570                        		__ult_b.uiq	4
         02:CC5A  C9 04      			cmp	#4		; Subtract integer from A.
         02:CC5C  6A         			ror	a		; CC if A < integer.
         02:CC5D  49 80      			eor	#$80
         02:CC5F  2A         			rol	a
13571                        		__bfalse	.LL611
         02:CC60  B0 03 4C EA			bcc	.LL611
         02:CC64  CD          
13572                        	
13573                        		.dbg	line,	"include\routines_SHOP.c", 235; {
13574                        	
13575                        		.dbg	line,	"include\routines_SHOP.c", 236; armor_level = 4;
13576                        		__st.umiq	4, _armor_level
         02:CC65  A9 04      			lda.l	#4
         02:CC67  8D 27 23   			sta	_armor_level
13577                        	
13578                        		.dbg	line,	"include\routines_SHOP.c", 237; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_2, SIZEOF(tileset_ARMOR_2) >> 1 );
13579                        		__st.wmiq	4320, _di
         02:CC6A  A9 E0      			lda.l	#4320
         02:CC6C  85 F0      			sta.l	_di
         02:CC6E  A9 10      			lda.h	#4320
         02:CC70  85 F1      			sta.h	_di
13580                        		__farptr	_tileset_ARMOR_2, _bp_bank, _bp
         02:CC72  A9 E0      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_2))
         02:CC74  85 EC      			sta.l	_bp
         02:CC76  A9 66      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_2))
         02:CC78  85 ED      			sta.h	_bp
         02:CC7A  A9 05      			lda	#bank(_tileset_ARMOR_2)
         02:CC7C  85 02      			sta	_bp_bank
13581                        		__ld.wi		___sizeof__tileset_ARMOR_2
         02:CC7E  A9 80      			lda.l	#___sizeof__tileset_ARMOR_2
         02:CC80  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_2
13582                        		__lsr.wi	1
         02:CC82  42         			say
         02:CC83  4A         			lsr	a
         02:CC84  42         			say
         02:CC85  6A         			ror	a
13583                        		__st.wmq	_ax
         02:CC86  85 F8      			sta.l	_ax
         02:CC88  84 F9      			sty.h	_ax
13584                        		 _load_vram.3
         02:CC8A  82         			clx				; Offset to PCE VDC.
         02:CC8B  20 4F FF   			call	load_vram_x
13585                        	
13586                        		.dbg	line,	"include\routines_SHOP.c", 239; zenny_amount -= shop_prices[6];
13587                        		__ld.wm		_shop_prices + 12
         02:CC8E  AD 44 26   			lda.l	_shop_prices + 12
         02:CC91  AC 45 26   			ldy.h	_shop_prices + 12
13588                        		__isub_st.wmq	_zenny_amount
         02:CC94  38         			sec
         02:CC95  49 FF      			eor	#$FF
         02:CC97  6D 34 26   			adc.l	_zenny_amount
         02:CC9A  8D 34 26   			sta.l	_zenny_amount
         02:CC9D  98         			tya
         02:CC9E  49 FF      			eor	#$FF
         02:CCA0  6D 35 26   			adc.h	_zenny_amount
         02:CCA3  8D 35 26   			sta.h	_zenny_amount
13589                        	
13590                        		.dbg	line,	"include\routines_SHOP.c", 240; display_ZENNY();
13591                        		__call		_display_ZENNY
         02:CCA6  20 45 FF   			call	_display_ZENNY
13592                        	
13593                        		.dbg	line,	"include\routines_SHOP.c", 241; }
13594                        	
13595                        		.dbg	line,	"include\routines_SHOP.c", 242; }
13596    02:CCA9             	.LL611	.alias		.LL591
13597                        	
13598                        		.dbg	line,	"include\routines_SHOP.c", 244; break;    
13599    02:CCA9             	.LL610	.alias		.LL591
13600                        		__bra		.LL591
         02:CCA9  4C EA CD   			bra	.LL591
13601                        	
13602                        		.dbg	line,	"include\routines_SHOP.c", 247; // ARMOR 4 //
13603                        	
13604                        		.dbg	line,	"include\routines_SHOP.c", 248; case 7:
13605    02:CCAC             	.LL612:
13606                        		__case		7
13607                        	
13608                        		.dbg	line,	"include\routines_SHOP.c", 249; if(zenny_amount >= shop_prices[7])
13609                        		__ld.wm		_zenny_amount
         02:CCAC  AD 34 26   			lda.l	_zenny_amount
         02:CCAF  AC 35 26   			ldy.h	_zenny_amount
13610                        		__sge_w.wm	_shop_prices + 14
         02:CCB2  CD 46 26   			cmp.l	_shop_prices + 14		; Subtract memory from Y:A.
         02:CCB5  98         			tya
         02:CCB6  ED 47 26   			sbc.h	_shop_prices + 14
         02:CCB9  50 02      			bvc	!+
         02:CCBB  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:CCBD  49 80      	!:		eor	#$80
         02:CCBF  0A         			asl	a
13611                        		__bfalse	.LL613
         02:CCC0  B0 03 4C EA			bcc	.LL613
         02:CCC4  CD          
13612                        	
13613                        		.dbg	line,	"include\routines_SHOP.c", 250; {
13614                        	
13615                        		.dbg	line,	"include\routines_SHOP.c", 251; if(armor_level < 5)
13616                        		__ld.umq	_armor_level
         02:CCC5  AD 27 23   			lda	_armor_level
13617                        		__ult_b.uiq	5
         02:CCC8  C9 05      			cmp	#5		; Subtract integer from A.
         02:CCCA  6A         			ror	a		; CC if A < integer.
         02:CCCB  49 80      			eor	#$80
         02:CCCD  2A         			rol	a
13618                        		__bfalse	.LL614
         02:CCCE  B0 03 4C EA			bcc	.LL614
         02:CCD2  CD          
13619                        	
13620                        		.dbg	line,	"include\routines_SHOP.c", 252; {
13621                        	
13622                        		.dbg	line,	"include\routines_SHOP.c", 253; armor_level = 5;
13623                        		__st.umiq	5, _armor_level
         02:CCD3  A9 05      			lda.l	#5
         02:CCD5  8D 27 23   			sta	_armor_level
13624                        	
13625                        		.dbg	line,	"include\routines_SHOP.c", 254; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_4, SIZEOF(tileset_ARMOR_4) >> 1 );
13626                        		__st.wmiq	4320, _di
         02:CCD8  A9 E0      			lda.l	#4320
         02:CCDA  85 F0      			sta.l	_di
         02:CCDC  A9 10      			lda.h	#4320
         02:CCDE  85 F1      			sta.h	_di
13627                        		__farptr	_tileset_ARMOR_4, _bp_bank, _bp
         02:CCE0  A9 60      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_4))
         02:CCE2  85 EC      			sta.l	_bp
         02:CCE4  A9 67      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_4))
         02:CCE6  85 ED      			sta.h	_bp
         02:CCE8  A9 05      			lda	#bank(_tileset_ARMOR_4)
         02:CCEA  85 02      			sta	_bp_bank
13628                        		__ld.wi		___sizeof__tileset_ARMOR_4
         02:CCEC  A9 80      			lda.l	#___sizeof__tileset_ARMOR_4
         02:CCEE  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_4
13629                        		__lsr.wi	1
         02:CCF0  42         			say
         02:CCF1  4A         			lsr	a
         02:CCF2  42         			say
         02:CCF3  6A         			ror	a
13630                        		__st.wmq	_ax
         02:CCF4  85 F8      			sta.l	_ax
         02:CCF6  84 F9      			sty.h	_ax
13631                        		 _load_vram.3
         02:CCF8  82         			clx				; Offset to PCE VDC.
         02:CCF9  20 4F FF   			call	load_vram_x
13632                        	
13633                        		.dbg	line,	"include\routines_SHOP.c", 256; zenny_amount -= shop_prices[7];
13634                        		__ld.wm		_shop_prices + 14
         02:CCFC  AD 46 26   			lda.l	_shop_prices + 14
         02:CCFF  AC 47 26   			ldy.h	_shop_prices + 14
13635                        		__isub_st.wmq	_zenny_amount
         02:CD02  38         			sec
         02:CD03  49 FF      			eor	#$FF
         02:CD05  6D 34 26   			adc.l	_zenny_amount
         02:CD08  8D 34 26   			sta.l	_zenny_amount
         02:CD0B  98         			tya
         02:CD0C  49 FF      			eor	#$FF
         02:CD0E  6D 35 26   			adc.h	_zenny_amount
         02:CD11  8D 35 26   			sta.h	_zenny_amount
13636                        	
13637                        		.dbg	line,	"include\routines_SHOP.c", 257; display_ZENNY();
13638                        		__call		_display_ZENNY
         02:CD14  20 45 FF   			call	_display_ZENNY
13639                        	
13640                        		.dbg	line,	"include\routines_SHOP.c", 258; }
13641                        	
13642                        		.dbg	line,	"include\routines_SHOP.c", 259; }
13643    02:CD17             	.LL614	.alias		.LL591
13644                        	
13645                        		.dbg	line,	"include\routines_SHOP.c", 261; break;   
13646    02:CD17             	.LL613	.alias		.LL591
13647                        		__bra		.LL591
         02:CD17  4C EA CD   			bra	.LL591
13648                        	
13649                        		.dbg	line,	"include\routines_SHOP.c", 264; // ARMOR 8 //
13650                        	
13651                        		.dbg	line,	"include\routines_SHOP.c", 265; case 8:
13652    02:CD1A             	.LL615:
13653                        		__case		8
13654                        	
13655                        		.dbg	line,	"include\routines_SHOP.c", 266; if(zenny_amount >= shop_prices[8])
13656                        		__ld.wm		_zenny_amount
         02:CD1A  AD 34 26   			lda.l	_zenny_amount
         02:CD1D  AC 35 26   			ldy.h	_zenny_amount
13657                        		__sge_w.wm	_shop_prices + 16
         02:CD20  CD 48 26   			cmp.l	_shop_prices + 16		; Subtract memory from Y:A.
         02:CD23  98         			tya
         02:CD24  ED 49 26   			sbc.h	_shop_prices + 16
         02:CD27  50 02      			bvc	!+
         02:CD29  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:CD2B  49 80      	!:		eor	#$80
         02:CD2D  0A         			asl	a
13658                        		__bfalse	.LL616
         02:CD2E  B0 03 4C EA			bcc	.LL616
         02:CD32  CD          
13659                        	
13660                        		.dbg	line,	"include\routines_SHOP.c", 267; {
13661                        	
13662                        		.dbg	line,	"include\routines_SHOP.c", 268; if(armor_level < 8)
13663                        		__ld.umq	_armor_level
         02:CD33  AD 27 23   			lda	_armor_level
13664                        		__ult_b.uiq	8
         02:CD36  C9 08      			cmp	#8		; Subtract integer from A.
         02:CD38  6A         			ror	a		; CC if A < integer.
         02:CD39  49 80      			eor	#$80
         02:CD3B  2A         			rol	a
13665                        		__bfalse	.LL617
         02:CD3C  B0 03 4C EA			bcc	.LL617
         02:CD40  CD          
13666                        	
13667                        		.dbg	line,	"include\routines_SHOP.c", 269; {
13668                        	
13669                        		.dbg	line,	"include\routines_SHOP.c", 270; armor_level = 8;
13670                        		__st.umiq	8, _armor_level
         02:CD41  A9 08      			lda.l	#8
         02:CD43  8D 27 23   			sta	_armor_level
13671                        	
13672                        		.dbg	line,	"include\routines_SHOP.c", 271; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_8, SIZEOF(tileset_ARMOR_8) >> 1 );
13673                        		__st.wmiq	4320, _di
         02:CD46  A9 E0      			lda.l	#4320
         02:CD48  85 F0      			sta.l	_di
         02:CD4A  A9 10      			lda.h	#4320
         02:CD4C  85 F1      			sta.h	_di
13674                        		__farptr	_tileset_ARMOR_8, _bp_bank, _bp
         02:CD4E  A9 E0      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_8))
         02:CD50  85 EC      			sta.l	_bp
         02:CD52  A9 67      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_8))
         02:CD54  85 ED      			sta.h	_bp
         02:CD56  A9 05      			lda	#bank(_tileset_ARMOR_8)
         02:CD58  85 02      			sta	_bp_bank
13675                        		__ld.wi		___sizeof__tileset_ARMOR_8
         02:CD5A  A9 80      			lda.l	#___sizeof__tileset_ARMOR_8
         02:CD5C  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_8
13676                        		__lsr.wi	1
         02:CD5E  42         			say
         02:CD5F  4A         			lsr	a
         02:CD60  42         			say
         02:CD61  6A         			ror	a
13677                        		__st.wmq	_ax
         02:CD62  85 F8      			sta.l	_ax
         02:CD64  84 F9      			sty.h	_ax
13678                        		 _load_vram.3
         02:CD66  82         			clx				; Offset to PCE VDC.
         02:CD67  20 4F FF   			call	load_vram_x
13679                        	
13680                        		.dbg	line,	"include\routines_SHOP.c", 273; zenny_amount -= shop_prices[8];
13681                        		__ld.wm		_shop_prices + 16
         02:CD6A  AD 48 26   			lda.l	_shop_prices + 16
         02:CD6D  AC 49 26   			ldy.h	_shop_prices + 16
13682                        		__isub_st.wmq	_zenny_amount
         02:CD70  38         			sec
         02:CD71  49 FF      			eor	#$FF
         02:CD73  6D 34 26   			adc.l	_zenny_amount
         02:CD76  8D 34 26   			sta.l	_zenny_amount
         02:CD79  98         			tya
         02:CD7A  49 FF      			eor	#$FF
         02:CD7C  6D 35 26   			adc.h	_zenny_amount
         02:CD7F  8D 35 26   			sta.h	_zenny_amount
13683                        	
13684                        		.dbg	line,	"include\routines_SHOP.c", 274; display_ZENNY();
13685                        		__call		_display_ZENNY
         02:CD82  20 45 FF   			call	_display_ZENNY
13686                        	
13687                        		.dbg	line,	"include\routines_SHOP.c", 275; }
13688                        	
13689                        		.dbg	line,	"include\routines_SHOP.c", 276; }
13690    02:CD85             	.LL617	.alias		.LL591
13691                        	
13692                        		.dbg	line,	"include\routines_SHOP.c", 278; break;   
13693    02:CD85             	.LL616	.alias		.LL591
13694                        		__bra		.LL591
         02:CD85  80 63      			bra	.LL591
13695                        	
13696                        		.dbg	line,	"include\routines_SHOP.c", 281; // POTION //
13697                        	
13698                        		.dbg	line,	"include\routines_SHOP.c", 282; case 9:
13699    02:CD87             	.LL618:
13700                        		__case		9
13701                        	
13702                        		.dbg	line,	"include\routines_SHOP.c", 283; if(zenny_amount >= shop_prices[9])
13703                        		__ld.wm		_zenny_amount
         02:CD87  AD 34 26   			lda.l	_zenny_amount
         02:CD8A  AC 35 26   			ldy.h	_zenny_amount
13704                        		__sge_w.wm	_shop_prices + 18
         02:CD8D  CD 4A 26   			cmp.l	_shop_prices + 18		; Subtract memory from Y:A.
         02:CD90  98         			tya
         02:CD91  ED 4B 26   			sbc.h	_shop_prices + 18
         02:CD94  50 02      			bvc	!+
         02:CD96  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:CD98  49 80      	!:		eor	#$80
         02:CD9A  0A         			asl	a
13705                        		__bfalse	.LL619
         02:CD9B  90 4D      			bcc	.LL619
13706                        	
13707                        		.dbg	line,	"include\routines_SHOP.c", 284; {
13708                        	
13709                        		.dbg	line,	"include\routines_SHOP.c", 285; potion_amount += 1;
13710                        		__add_st.umiq	1, _potion_amount
         02:CD9D  EE 2F 23   			inc	_potion_amount
13711                        	
13712                        		.dbg	line,	"include\routines_SHOP.c", 287; zenny_amount -= shop_prices[9];
13713                        		__ld.wm		_shop_prices + 18
         02:CDA0  AD 4A 26   			lda.l	_shop_prices + 18
         02:CDA3  AC 4B 26   			ldy.h	_shop_prices + 18
13714                        		__isub_st.wmq	_zenny_amount
         02:CDA6  38         			sec
         02:CDA7  49 FF      			eor	#$FF
         02:CDA9  6D 34 26   			adc.l	_zenny_amount
         02:CDAC  8D 34 26   			sta.l	_zenny_amount
         02:CDAF  98         			tya
         02:CDB0  49 FF      			eor	#$FF
         02:CDB2  6D 35 26   			adc.h	_zenny_amount
         02:CDB5  8D 35 26   			sta.h	_zenny_amount
13715                        	
13716                        		.dbg	line,	"include\routines_SHOP.c", 288; display_POTION();
13717                        		__call		_display_POTION
         02:CDB8  20 3B FF   			call	_display_POTION
13718                        	
13719                        		.dbg	line,	"include\routines_SHOP.c", 289; }
13720                        	
13721                        		.dbg	line,	"include\routines_SHOP.c", 291; break;   
13722    02:CDBB             	.LL619	.alias		.LL591
13723                        		__bra		.LL591
         02:CDBB  80 2D      			bra	.LL591
13724                        	
13725                        		.dbg	line,	"include\routines_SHOP.c", 294; // EXIT //
13726                        	
13727                        		.dbg	line,	"include\routines_SHOP.c", 295; case 10:
13728    02:CDBD             	.LL620:
13729                        		__case		10
13730                        	
13731                        		.dbg	line,	"include\routines_SHOP.c", 296; shop_counter = 0;    
13732                        		__st.umiq	0, _shop_counter
         02:CDBD  9C D9 23   			stz	_shop_counter
13733                        	
13734                        		.dbg	line,	"include\routines_SHOP.c", 297; shop_phase = SHOP_PHASE_EXIT;
13735                        		__st.umiq	2, _shop_phase
         02:CDC0  A9 02      			lda.l	#2
         02:CDC2  8D D8 23   			sta	_shop_phase
13736                        	
13737                        		.dbg	line,	"include\routines_SHOP.c", 299; break;                  
13738                        		__bra		.LL591
         02:CDC5  80 23      			bra	.LL591
13739                        	
13740                        		.dbg	line,	"include\routines_SHOP.c", 300; }
13741    02:CDC7             	.LL590:
13742                        		__switch_r.ur	0, 10
         02:CDC7  C9 0B      			cmp	#(10 - 0) + 1
         02:CDC9  90 02      			bcc	!found+
         02:CDCB  A9 0B      	!default:	lda	#(10 - 0) + 1
         02:CDCD  0A         	!found:		asl	a
         02:CDCE  AA         			tax
         02:CDCF  7C D2 CD   			jmp	[!table+, x]
13743                        	
13744    02:CDD2  DE C9      	!table:		dw	.LL592, .LL595, .LL598, .LL601, .LL604, .LL606, .LL609, .LL612
         02:CDD4  4C CA       
         02:CDD6  BA CA       
         02:CDD8  28 CB       
         02:CDDA  96 CB       
         02:CDDC  D0 CB       
         02:CDDE  3E CC       
         02:CDE0  AC CC       
13745    02:CDE2  1A CD      			dw	.LL615, .LL618, .LL620
         02:CDE4  87 CD       
         02:CDE6  BD CD       
13746    02:CDE8  EA CD      			dw	.LL591
13747    02:CDEA             	.LL591:
13748                        	
13749                        		.dbg	line,	"include\routines_SHOP.c", 301; }
13750                        	
13751                        		.dbg	line,	"include\routines_SHOP.c", 302; }
13752    02:CDEA             	.LL589:
13753    02:CDEA             	.LL588:
13754    02:CDEA             	.LL585:
13755    02:CDEA             	.LL581:
13756    02:CDEA             	.LL578:
13757    02:CDEA             	.LL573:
13758                        		__return	0
         02:CDEA  4C EF FF   			jmp	leave_proc
13759                        		.dbg	clear
13760                        		.endp
13761               67E0     		.data
13762               230F     		.bss
13763    F8:230F             	__joypad_BUTTONS_SHOP_loc:
13764    F8:230F             			ds	1
13765    F8:2310             	__joypad_BUTTONS_SHOP_end:
13766               E309     		.code
13767                        		.pceas
13768                        	
13769                        		.dbg	line,	"main.c", 25; #include "include/routines_TITLE.c"
13770                        		.dbg	line,	"include\routines_TITLE.c", 1; #include "huc.h"
13771                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
13772                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
13773                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
13774                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
13775                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
13776                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
13777                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
13778                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
13779                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
13780                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
13781                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
13782                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
13783                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
13784                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
13785                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
13786                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
13787                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
13788                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
13789                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
13790                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
13791                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
13792                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
13793                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
13794                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
13795                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
13796                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
13797                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
13798                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
13799                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
13800                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
13801                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
13802                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
13803                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
13804                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
13805                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
13806                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
13807                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
13808                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
13809                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
13810                        		.dbg	line,	"include\routines_TITLE.c", 2; #include "hucc-scroll.h"
13811                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 1; #ifndef _hucc_scroll_h
13812                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 2; #define _hucc_scroll_h
13813                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 4; /****************************************************************************
13814                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 5; ; ***************************************************************************
13815                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 6; ;
13816                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 7; ; hucc-scroll.h
13817                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 8; ;
13818                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 9; ; Routines for a fast split-screen scrolling system.
13819                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 10; ;
13820                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 11; ; Copyright John Brandwood 2024.
13821                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 12; ;
13822                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 13; ; Distributed under the Boost Software License, Version 1.0.
13823                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
13824                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
13825                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 16; ;
13826                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 17; ; ***************************************************************************
13827                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 18; ; ***************************************************************************
13828                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 19; ;
13829                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 20; ; The maximum number of splits for each screen layer is set in your project's
13830                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 21; ; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
13831                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 22; ;
13832                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 23; ; Your first active split must be defined to start at screen line 0, and then
13833                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 24; ; the rest of the active splits must be in increasing line order to match the
13834                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 25; ; way that the PC Engine displays the output image.
13835                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 26; ;
13836                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 27; ; You can have disabled splits interleaved with your active splits.
13837                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 28; ;
13838                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 29; ; Splits that are normally disabled can be used to create full screen effects
13839                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 30; ; such as bouncing the screen up and down by adding blank areas at the top or
13840                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 31; ; bottom of the screen, and then rapidly changing the height of those areas.
13841                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 32; ;
13842                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 33; ; ***************************************************************************
13843                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 34; ; **************************************************************************/
13844                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 36; // *************
13845                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 37; // VDC bits for display_flags ...
13846                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 38; // *************
13847                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 40; #ifndef BKG_OFF
13848                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 41; #define BKG_OFF 0x00
13849                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 42; #endif
13850                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 44; #ifndef SPR_OFF
13851                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 45; #define SPR_OFF 0x00
13852                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 46; #endif
13853                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 48; #ifndef BKG_ON
13854                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 49; #define BKG_ON 0x80
13855                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 50; #endif
13856                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 52; #ifndef SPR_ON
13857                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 53; #define SPR_ON 0x40
13858                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 54; #endif
13859                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 56; // *************
13860                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 57; // Functions in hucc-scroll.asm ...
13861                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 58; // *************
13862                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 60; #ifdef __HUCC__
13863                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 62; #asmdef	HUCC_USES_NEW_SCROLL 1
13864                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 64; extern void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
13865                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 65; extern void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
13866                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 67; extern void __fastcall disable_split( unsigned char index<acc> );
13867                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 68; extern void __fastcall sgx_disable_split( unsigned char index<acc> );
13868                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 70; extern void __fastcall __macro disable_all_splits( void );
13869                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 71; extern void __fastcall __macro sgx_disable_all_splits( void );
13870                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 73; #asm
13871                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 74; .macro	_disable_all_splits
13872                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 75; ldy	#HUCC_PCE_SPLITS - 1
13873                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 76; !loop:		tya
13874                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 77; call	_disable_split.1
13875                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 78; dey
13876                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 79; bpl	!loop-
13877                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 80; .endm
13878                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 82; .macro	_sgx_disable_all_splits
13879                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 83; ldy	#HUCC_SGX_SPLITS - 1
13880                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 84; !loop:		tya
13881                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 85; call	_sgx_disable_split.1
13882                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 86; dey
13883                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 87; bpl	!loop-
13884                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 88; .endm
13885                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 89; #endasm
13886                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 91; #endif // __HUCC__
13887                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 93; #endif // _hucc_scroll_h
13888                        		.dbg	line,	"include\routines_TITLE.c", 3; #include "hucc-chrmap.h"
13889                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 1; #ifndef _hucc_chrmap_h
13890                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 2; #define _hucc_chrmap_h
13891                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 4; /****************************************************************************
13892                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 5; ; ***************************************************************************
13893                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 6; ;
13894                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 7; ; hucc-chrmap.h
13895                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 8; ;
13896                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 9; ; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
13897                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 10; ;
13898                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 11; ; Copyright John Brandwood 2025.
13899                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 12; ;
13900                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
13901                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
13902                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
13903                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 16; ;
13904                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 17; ; ***************************************************************************
13905                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 18; ; ***************************************************************************
13906                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 19; ;
13907                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 20; ; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
13908                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 21; ;
13909                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 22; ; The maximum total size for a chrmap is 16KBytes, which allows for maps up
13910                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 23; ; to 256x32 tiles (2048x256 pixels).
13911                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 24; ;
13912                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 25; ; ***************************************************************************
13913                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 26; ; **************************************************************************/
13914                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 28; // *************
13915                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 29; // This code extends the blkmap library ...
13916                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 30; // *************
13917                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 32; #include "hucc-blkmap.h"
13918                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 34; // *************
13919                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 35; // Functions in chrmap.asm ...
13920                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 36; // *************
13921                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 38; #ifdef __HUCC__
13922                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 40; #asmdef	HUCC_USES_CHRMAP 1
13923                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 42; extern void __fastcall __nop set_chrmap( unsigned char __far *chrmap<vdc_map_bank:vdc_map_addr>, unsigned char tiles_w<vdc_map_line_w> );
13924                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 44; extern void __fastcall draw_bat( void );
13925                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 45; extern void __fastcall scroll_bat( void );
13926                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 47; extern void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
13927                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 49; #ifdef _SGX
13928                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 51; extern void __fastcall __nop sgx_set_chrmap( unsigned char __far *chrmap<sgx_map_bank:sgx_map_addr>, unsigned char tiles_w<sgx_map_line_w> );
13929                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 53; extern void __fastcall sgx_draw_bat( void );
13930                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 54; extern void __fastcall sgx_scroll_bat( void );
13931                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 56; extern void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
13932                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 58; #endif
13933                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 60; #endif // __HUCC__
13934                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 62; #endif // _hucc_chrmap_h
13935                        		.dbg	line,	"include\routines_TITLE.c", 4; #include "hucc-blkmap.h"
13936                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
13937                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
13938                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
13939                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
13940                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
13941                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
13942                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
13943                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
13944                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
13945                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
13946                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
13947                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
13948                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
13949                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
13950                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
13951                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
13952                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
13953                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
13954                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
13955                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
13956                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
13957                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
13958                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
13959                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
13960                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
13961                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
13962                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
13963                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
13964                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
13965                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
13966                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
13967                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
13968                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
13969                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
13970                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
13971                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
13972                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
13973                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
13974                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
13975                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
13976                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
13977                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
13978                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
13979                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
13980                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
13981                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
13982                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
13983                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
13984                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
13985                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
13986                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
13987                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
13988                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
13989                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
13990                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
13991                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
13992                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
13993                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
13994                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
13995                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
13996                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
13997                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
13998                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
13999                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
14000                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
14001                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
14002                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
14003                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 86; .macro	_set_blkmap.2
14004                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 87; stz	vdc_scr_bank
14005                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 88; .endm
14006                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 90; .macro	_set_multimap.2
14007                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 91; lda	vdc_bat_width
14008                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 92; lsr	a
14009                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 93; sta	vdc_map_line_w
14010                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 94; .endm
14011                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 96; .macro	SCREEN
14012                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 97; db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
14013                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 98; db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
14014                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 99; db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
14015                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 100; dw	(\4)
14016                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 101; .endm
14017                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
14018                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
14019                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
14020                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
14021                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
14022                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
14023                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
14024                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
14025                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
14026                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
14027                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
14028                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
14029                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
14030                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
14031                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
14032                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
14033                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
14034                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
14035                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
14036                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
14037                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
14038                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
14039                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
14040                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
14041                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
14042                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
14043                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
14044                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
14045                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 144; .macro	_sgx_set_blkmap.2
14046                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 145; stz	sgx_scr_bank
14047                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 146; .endm
14048                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 148; .macro	_sgx_set_multimap.2
14049                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 149; lda	sgx_bat_width
14050                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 150; lsr	a
14051                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 151; sta	sgx_map_line_w
14052                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 152; .endm
14053                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
14054                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
14055                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
14056                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
14057                        		.dbg	line,	"include\routines_TITLE.c", 12; void joypad_BUTTONS_TITLE()
14058                        		.dbg	line,	"include\routines_TITLE.c", 13; {
14059                        	;***********************
14060                        	;***********************
14061                        	
14062                        		.hucc
14063    02:DC3C             		.proc		_joypad_BUTTONS_TITLE
14064                        		__enter		_joypad_BUTTONS_TITLE
14065                        	
14066                        		.dbg	line,	"include\routines_TITLE.c", 14; char selector_pos;
14067                        	
14068                        		.dbg	line,	"include\routines_TITLE.c", 15; 
14069                        	
14070                        		.dbg	line,	"include\routines_TITLE.c", 16; if(joytrg(JOYPAD_1) & JOY_RIGHT)
14071                        		__ld.uiq	0
         02:DC3C  62         			cla
14072                        		 _joytrg.1
         02:DC3D  AA         			tax
         02:DC3E  BD 2D 22   			lda	joytrg, x
         02:DC41  BC DD 22   			ldy	joy6trg, x
14073                        		__tand.wi	32
         02:DC44  29 20      			and	#32
         02:DC46  C9 01      	!:		cmp	#1
14074                        		__bfalse	.LL622
         02:DC48  90 77      			bcc	.LL622
14075                        	
14076                        		.dbg	line,	"include\routines_TITLE.c", 17; {   
14077                        	
14078                        		.dbg	line,	"include\routines_TITLE.c", 18; spr_set(0);
14079                        		__ld.uiq	0
         02:DC4A  62         			cla
14080                        		__call		_spr_set.1
         02:DC4B  20 DD E7   			call	_spr_set.1
14081                        	
14082                        		.dbg	line,	"include\routines_TITLE.c", 19; selector_pos = spr_get_y();
14083                        		__call		_spr_get_y
         02:DC4E  20 7B E8   			call	_spr_get_y
14084                        		__st.umq	__joypad_BUTTONS_TITLE_end - 1  /* selector_pos */
         02:DC51  8D 52 26   			sta	__joypad_BUTTONS_TITLE_end - 1
14085                        	
14086                        		.dbg	line,	"include\routines_TITLE.c", 21; if(selector_pos == 160)
14087                        		__ld.umq	__joypad_BUTTONS_TITLE_end - 1  /* selector_pos */
         02:DC54  AD 52 26   			lda	__joypad_BUTTONS_TITLE_end - 1
14088                        		__equ_b.uiq	160
         02:DC57  C9 A0      			cmp	#160
         02:DC59  F0 01      			beq	!+
         02:DC5B  18         			clc
         02:DC5C             	!:
14089                        		__bfalse	.LL623
         02:DC5C  90 2B      			bcc	.LL623
14090                        	
14091                        		.dbg	line,	"include\routines_TITLE.c", 22; {
14092                        	
14093                        		.dbg	line,	"include\routines_TITLE.c", 23; if(life_amount < 9)
14094                        		__ld.umq	_life_amount
         02:DC5E  AD 2C 23   			lda	_life_amount
14095                        		__ult_b.uiq	9
         02:DC61  C9 09      			cmp	#9		; Subtract integer from A.
         02:DC63  6A         			ror	a		; CC if A < integer.
         02:DC64  49 80      			eor	#$80
         02:DC66  2A         			rol	a
14096                        		__bfalse	.LL624
         02:DC67  B0 03 4C D0			bcc	.LL624
         02:DC6B  DD          
14097                        	
14098                        		.dbg	line,	"include\routines_TITLE.c", 24; {
14099                        	
14100                        		.dbg	line,	"include\routines_TITLE.c", 25; life_amount += 1;
14101                        		__add_st.umiq	1, _life_amount
         02:DC6C  EE 2C 23   			inc	_life_amount
14102                        	
14103                        		.dbg	line,	"include\routines_TITLE.c", 26; put_number(life_amount   	,  1 , 20 , 20);
14104                        		__ld.um		_life_amount
         02:DC6F  AD 2C 23   			lda	_life_amount
         02:DC72  C2         			cly
14105                        		__st.wmq	_bx
         02:DC73  85 FA      			sta.l	_bx
         02:DC75  84 FB      			sty.h	_bx
14106                        		__st.umiq	1, _cl
         02:DC77  A9 01      			lda.l	#1
         02:DC79  85 FC      			sta	_cl
14107                        		__st.umiq	20, _dil
         02:DC7B  A9 14      			lda.l	#20
         02:DC7D  85 F0      			sta	_dil
14108                        		__st.umiq	20, _dih
         02:DC7F  A9 14      			lda.l	#20
         02:DC81  85 F1      			sta	_dih
14109                        		__call		_put_number.4
         02:DC83  20 9F FF   			call	_put_number.4
14110                        	
14111                        		.dbg	line,	"include\routines_TITLE.c", 27; }
14112                        	
14113                        		.dbg	line,	"include\routines_TITLE.c", 28; }
14114    02:DC86             	.LL624	.alias		.LL625
14115                        	
14116                        		.dbg	line,	"include\routines_TITLE.c", 30; else if(selector_pos == 168)
14117                        		__bra		.LL625
         02:DC86  4C D0 DD   			bra	.LL625
14118    02:DC89             	.LL623:
14119                        		__ld.umq	__joypad_BUTTONS_TITLE_end - 1  /* selector_pos */
         02:DC89  AD 52 26   			lda	__joypad_BUTTONS_TITLE_end - 1
14120                        		__equ_b.uiq	168
         02:DC8C  C9 A8      			cmp	#168
         02:DC8E  F0 01      			beq	!+
         02:DC90  18         			clc
         02:DC91             	!:
14121                        		__bfalse	.LL626
         02:DC91  B0 03 4C D0			bcc	.LL626
         02:DC95  DD          
14122                        	
14123                        		.dbg	line,	"include\routines_TITLE.c", 31; {
14124                        	
14125                        		.dbg	line,	"include\routines_TITLE.c", 32; if(credits_amount < 5)
14126                        		__ld.umq	_credits_amount
         02:DC96  AD 2D 23   			lda	_credits_amount
14127                        		__ult_b.uiq	5
         02:DC99  C9 05      			cmp	#5		; Subtract integer from A.
         02:DC9B  6A         			ror	a		; CC if A < integer.
         02:DC9C  49 80      			eor	#$80
         02:DC9E  2A         			rol	a
14128                        		__bfalse	.LL627
         02:DC9F  B0 03 4C D0			bcc	.LL627
         02:DCA3  DD          
14129                        	
14130                        		.dbg	line,	"include\routines_TITLE.c", 33; {
14131                        	
14132                        		.dbg	line,	"include\routines_TITLE.c", 34; credits_amount += 1;
14133                        		__add_st.umiq	1, _credits_amount
         02:DCA4  EE 2D 23   			inc	_credits_amount
14134                        	
14135                        		.dbg	line,	"include\routines_TITLE.c", 35; put_number(credits_amount   ,  1 , 20 , 21);
14136                        		__ld.um		_credits_amount
         02:DCA7  AD 2D 23   			lda	_credits_amount
         02:DCAA  C2         			cly
14137                        		__st.wmq	_bx
         02:DCAB  85 FA      			sta.l	_bx
         02:DCAD  84 FB      			sty.h	_bx
14138                        		__st.umiq	1, _cl
         02:DCAF  A9 01      			lda.l	#1
         02:DCB1  85 FC      			sta	_cl
14139                        		__st.umiq	20, _dil
         02:DCB3  A9 14      			lda.l	#20
         02:DCB5  85 F0      			sta	_dil
14140                        		__st.umiq	21, _dih
         02:DCB7  A9 15      			lda.l	#21
         02:DCB9  85 F1      			sta	_dih
14141                        		__call		_put_number.4
         02:DCBB  20 9F FF   			call	_put_number.4
14142                        	
14143                        		.dbg	line,	"include\routines_TITLE.c", 36; }
14144                        	
14145                        		.dbg	line,	"include\routines_TITLE.c", 37; }
14146    02:DCBE             	.LL627	.alias		.LL628
14147                        	
14148                        		.dbg	line,	"include\routines_TITLE.c", 38; }
14149    02:DCBE             	.LL626	.alias		.LL628
14150    02:DCBE             	.LL625	.alias		.LL628
14151                        	
14152                        		.dbg	line,	"include\routines_TITLE.c", 40; 
14153                        	
14154                        		.dbg	line,	"include\routines_TITLE.c", 41; else if(joytrg(JOYPAD_1) & JOY_LEFT)
14155                        		__bra		.LL628
         02:DCBE  4C D0 DD   			bra	.LL628
14156    02:DCC1             	.LL622:
14157                        		__ld.uiq	0
         02:DCC1  62         			cla
14158                        		 _joytrg.1
         02:DCC2  AA         			tax
         02:DCC3  BD 2D 22   			lda	joytrg, x
         02:DCC6  BC DD 22   			ldy	joy6trg, x
14159                        		__tand.wi	128
         02:DCC9  29 80      			and	#128
         02:DCCB  C9 01      	!:		cmp	#1
14160                        		__bfalse	.LL629
         02:DCCD  90 71      			bcc	.LL629
14161                        	
14162                        		.dbg	line,	"include\routines_TITLE.c", 42; {
14163                        	
14164                        		.dbg	line,	"include\routines_TITLE.c", 43; spr_set(0);
14165                        		__ld.uiq	0
         02:DCCF  62         			cla
14166                        		__call		_spr_set.1
         02:DCD0  20 DD E7   			call	_spr_set.1
14167                        	
14168                        		.dbg	line,	"include\routines_TITLE.c", 44; selector_pos = spr_get_y();
14169                        		__call		_spr_get_y
         02:DCD3  20 7B E8   			call	_spr_get_y
14170                        		__st.umq	__joypad_BUTTONS_TITLE_end - 1  /* selector_pos */
         02:DCD6  8D 52 26   			sta	__joypad_BUTTONS_TITLE_end - 1
14171                        	
14172                        		.dbg	line,	"include\routines_TITLE.c", 46; if(selector_pos == 160)
14173                        		__ld.umq	__joypad_BUTTONS_TITLE_end - 1  /* selector_pos */
         02:DCD9  AD 52 26   			lda	__joypad_BUTTONS_TITLE_end - 1
14174                        		__equ_b.uiq	160
         02:DCDC  C9 A0      			cmp	#160
         02:DCDE  F0 01      			beq	!+
         02:DCE0  18         			clc
         02:DCE1             	!:
14175                        		__bfalse	.LL630
         02:DCE1  90 28      			bcc	.LL630
14176                        	
14177                        		.dbg	line,	"include\routines_TITLE.c", 47; {
14178                        	
14179                        		.dbg	line,	"include\routines_TITLE.c", 48; if(life_amount > 3)
14180                        		__ld.umq	_life_amount
         02:DCE3  AD 2C 23   			lda	_life_amount
14181                        		__ugt_b.uiq	3
         02:DCE6  18         			clc			; Subtract integer+1 from A.
         02:DCE7  E9 03      			sbc	#3		; CS if A > integer.
14182                        		__bfalse	.LL631
         02:DCE9  B0 03 4C D0			bcc	.LL631
         02:DCED  DD          
14183                        	
14184                        		.dbg	line,	"include\routines_TITLE.c", 49; {
14185                        	
14186                        		.dbg	line,	"include\routines_TITLE.c", 50; life_amount -= 1;
14187                        		__sub_st.umiq	1, _life_amount
         02:DCEE  CE 2C 23   			dec	_life_amount
14188                        	
14189                        		.dbg	line,	"include\routines_TITLE.c", 51; put_number(life_amount   	,  1 , 20 , 20);
14190                        		__ld.um		_life_amount
         02:DCF1  AD 2C 23   			lda	_life_amount
         02:DCF4  C2         			cly
14191                        		__st.wmq	_bx
         02:DCF5  85 FA      			sta.l	_bx
         02:DCF7  84 FB      			sty.h	_bx
14192                        		__st.umiq	1, _cl
         02:DCF9  A9 01      			lda.l	#1
         02:DCFB  85 FC      			sta	_cl
14193                        		__st.umiq	20, _dil
         02:DCFD  A9 14      			lda.l	#20
         02:DCFF  85 F0      			sta	_dil
14194                        		__st.umiq	20, _dih
         02:DD01  A9 14      			lda.l	#20
         02:DD03  85 F1      			sta	_dih
14195                        		__call		_put_number.4
         02:DD05  20 9F FF   			call	_put_number.4
14196                        	
14197                        		.dbg	line,	"include\routines_TITLE.c", 52; }
14198                        	
14199                        		.dbg	line,	"include\routines_TITLE.c", 53; }
14200    02:DD08             	.LL631	.alias		.LL632
14201                        	
14202                        		.dbg	line,	"include\routines_TITLE.c", 55; else if(selector_pos == 168)
14203                        		__bra		.LL632
         02:DD08  4C D0 DD   			bra	.LL632
14204    02:DD0B             	.LL630:
14205                        		__ld.umq	__joypad_BUTTONS_TITLE_end - 1  /* selector_pos */
         02:DD0B  AD 52 26   			lda	__joypad_BUTTONS_TITLE_end - 1
14206                        		__equ_b.uiq	168
         02:DD0E  C9 A8      			cmp	#168
         02:DD10  F0 01      			beq	!+
         02:DD12  18         			clc
         02:DD13             	!:
14207                        		__bfalse	.LL633
         02:DD13  B0 03 4C D0			bcc	.LL633
         02:DD17  DD          
14208                        	
14209                        		.dbg	line,	"include\routines_TITLE.c", 56; {
14210                        	
14211                        		.dbg	line,	"include\routines_TITLE.c", 57; if(credits_amount > 2)
14212                        		__ld.umq	_credits_amount
         02:DD18  AD 2D 23   			lda	_credits_amount
14213                        		__ugt_b.uiq	2
         02:DD1B  18         			clc			; Subtract integer+1 from A.
         02:DD1C  E9 02      			sbc	#2		; CS if A > integer.
14214                        		__bfalse	.LL634
         02:DD1E  B0 03 4C D0			bcc	.LL634
         02:DD22  DD          
14215                        	
14216                        		.dbg	line,	"include\routines_TITLE.c", 58; {
14217                        	
14218                        		.dbg	line,	"include\routines_TITLE.c", 59; credits_amount -= 1;
14219                        		__sub_st.umiq	1, _credits_amount
         02:DD23  CE 2D 23   			dec	_credits_amount
14220                        	
14221                        		.dbg	line,	"include\routines_TITLE.c", 60; put_number(credits_amount   ,  1 , 20 , 21);
14222                        		__ld.um		_credits_amount
         02:DD26  AD 2D 23   			lda	_credits_amount
         02:DD29  C2         			cly
14223                        		__st.wmq	_bx
         02:DD2A  85 FA      			sta.l	_bx
         02:DD2C  84 FB      			sty.h	_bx
14224                        		__st.umiq	1, _cl
         02:DD2E  A9 01      			lda.l	#1
         02:DD30  85 FC      			sta	_cl
14225                        		__st.umiq	20, _dil
         02:DD32  A9 14      			lda.l	#20
         02:DD34  85 F0      			sta	_dil
14226                        		__st.umiq	21, _dih
         02:DD36  A9 15      			lda.l	#21
         02:DD38  85 F1      			sta	_dih
14227                        		__call		_put_number.4
         02:DD3A  20 9F FF   			call	_put_number.4
14228                        	
14229                        		.dbg	line,	"include\routines_TITLE.c", 61; }
14230                        	
14231                        		.dbg	line,	"include\routines_TITLE.c", 62; }
14232    02:DD3D             	.LL634	.alias		.LL635
14233                        	
14234                        		.dbg	line,	"include\routines_TITLE.c", 63; }
14235    02:DD3D             	.LL633	.alias		.LL635
14236    02:DD3D             	.LL632	.alias		.LL635
14237                        	
14238                        		.dbg	line,	"include\routines_TITLE.c", 66; else if(joytrg(JOYPAD_1) & JOY_UP)
14239                        		__bra		.LL635
         02:DD3D  4C D0 DD   			bra	.LL635
14240    02:DD40             	.LL629:
14241                        		__ld.uiq	0
         02:DD40  62         			cla
14242                        		 _joytrg.1
         02:DD41  AA         			tax
         02:DD42  BD 2D 22   			lda	joytrg, x
         02:DD45  BC DD 22   			ldy	joy6trg, x
14243                        		__tand.wi	16
         02:DD48  29 10      			and	#16
         02:DD4A  C9 01      	!:		cmp	#1
14244                        		__bfalse	.LL636
         02:DD4C  90 2E      			bcc	.LL636
14245                        	
14246                        		.dbg	line,	"include\routines_TITLE.c", 67; {
14247                        	
14248                        		.dbg	line,	"include\routines_TITLE.c", 68; spr_set(0);
14249                        		__ld.uiq	0
         02:DD4E  62         			cla
14250                        		__call		_spr_set.1
         02:DD4F  20 DD E7   			call	_spr_set.1
14251                        	
14252                        		.dbg	line,	"include\routines_TITLE.c", 69; selector_pos = spr_get_y();
14253                        		__call		_spr_get_y
         02:DD52  20 7B E8   			call	_spr_get_y
14254                        		__st.umq	__joypad_BUTTONS_TITLE_end - 1  /* selector_pos */
         02:DD55  8D 52 26   			sta	__joypad_BUTTONS_TITLE_end - 1
14255                        	
14256                        		.dbg	line,	"include\routines_TITLE.c", 71; if(selector_pos == 160)
14257                        		__ld.umq	__joypad_BUTTONS_TITLE_end - 1  /* selector_pos */
         02:DD58  AD 52 26   			lda	__joypad_BUTTONS_TITLE_end - 1
14258                        		__equ_b.uiq	160
         02:DD5B  C9 A0      			cmp	#160
         02:DD5D  F0 01      			beq	!+
         02:DD5F  18         			clc
         02:DD60             	!:
14259                        		__bfalse	.LL637
         02:DD60  90 08      			bcc	.LL637
14260                        	
14261                        		.dbg	line,	"include\routines_TITLE.c", 72; {
14262                        	
14263                        		.dbg	line,	"include\routines_TITLE.c", 73; spr_y(144);
14264                        		__ld.wi		144
         02:DD62  A9 90      			lda.l	#144
         02:DD64  C2         			cly
14265                        		__call		_spr_y.1
         02:DD65  20 19 E8   			call	_spr_y.1
14266                        	
14267                        		.dbg	line,	"include\routines_TITLE.c", 74; }
14268                        	
14269                        		.dbg	line,	"include\routines_TITLE.c", 76; else if(selector_pos == 168)
14270                        		__bra		.LL638
         02:DD68  80 66      			bra	.LL638
14271    02:DD6A             	.LL637:
14272                        		__ld.umq	__joypad_BUTTONS_TITLE_end - 1  /* selector_pos */
         02:DD6A  AD 52 26   			lda	__joypad_BUTTONS_TITLE_end - 1
14273                        		__equ_b.uiq	168
         02:DD6D  C9 A8      			cmp	#168
         02:DD6F  F0 01      			beq	!+
         02:DD71  18         			clc
         02:DD72             	!:
14274                        		__bfalse	.LL639
         02:DD72  90 5C      			bcc	.LL639
14275                        	
14276                        		.dbg	line,	"include\routines_TITLE.c", 77; {
14277                        	
14278                        		.dbg	line,	"include\routines_TITLE.c", 78; spr_y(160);
14279                        		__ld.wi		160
         02:DD74  A9 A0      			lda.l	#160
         02:DD76  C2         			cly
14280                        		__call		_spr_y.1
         02:DD77  20 19 E8   			call	_spr_y.1
14281                        	
14282                        		.dbg	line,	"include\routines_TITLE.c", 79; }
14283                        	
14284                        		.dbg	line,	"include\routines_TITLE.c", 80; }
14285    02:DD7A             	.LL639	.alias		.LL640
14286    02:DD7A             	.LL638	.alias		.LL640
14287                        	
14288                        		.dbg	line,	"include\routines_TITLE.c", 83; else if(joytrg(JOYPAD_1) & JOY_DOWN)
14289                        		__bra		.LL640
         02:DD7A  80 54      			bra	.LL640
14290    02:DD7C             	.LL636:
14291                        		__ld.uiq	0
         02:DD7C  62         			cla
14292                        		 _joytrg.1
         02:DD7D  AA         			tax
         02:DD7E  BD 2D 22   			lda	joytrg, x
         02:DD81  BC DD 22   			ldy	joy6trg, x
14293                        		__tand.wi	64
         02:DD84  29 40      			and	#64
         02:DD86  C9 01      	!:		cmp	#1
14294                        		__bfalse	.LL641
         02:DD88  90 2E      			bcc	.LL641
14295                        	
14296                        		.dbg	line,	"include\routines_TITLE.c", 84; {
14297                        	
14298                        		.dbg	line,	"include\routines_TITLE.c", 85; spr_set(0);
14299                        		__ld.uiq	0
         02:DD8A  62         			cla
14300                        		__call		_spr_set.1
         02:DD8B  20 DD E7   			call	_spr_set.1
14301                        	
14302                        		.dbg	line,	"include\routines_TITLE.c", 86; selector_pos = spr_get_y();
14303                        		__call		_spr_get_y
         02:DD8E  20 7B E8   			call	_spr_get_y
14304                        		__st.umq	__joypad_BUTTONS_TITLE_end - 1  /* selector_pos */
         02:DD91  8D 52 26   			sta	__joypad_BUTTONS_TITLE_end - 1
14305                        	
14306                        		.dbg	line,	"include\routines_TITLE.c", 88; if(selector_pos == 144)
14307                        		__ld.umq	__joypad_BUTTONS_TITLE_end - 1  /* selector_pos */
         02:DD94  AD 52 26   			lda	__joypad_BUTTONS_TITLE_end - 1
14308                        		__equ_b.uiq	144
         02:DD97  C9 90      			cmp	#144
         02:DD99  F0 01      			beq	!+
         02:DD9B  18         			clc
         02:DD9C             	!:
14309                        		__bfalse	.LL642
         02:DD9C  90 08      			bcc	.LL642
14310                        	
14311                        		.dbg	line,	"include\routines_TITLE.c", 89; {
14312                        	
14313                        		.dbg	line,	"include\routines_TITLE.c", 90; spr_y(160);
14314                        		__ld.wi		160
         02:DD9E  A9 A0      			lda.l	#160
         02:DDA0  C2         			cly
14315                        		__call		_spr_y.1
         02:DDA1  20 19 E8   			call	_spr_y.1
14316                        	
14317                        		.dbg	line,	"include\routines_TITLE.c", 91; }
14318                        	
14319                        		.dbg	line,	"include\routines_TITLE.c", 93; else if(selector_pos == 160)
14320                        		__bra		.LL643
         02:DDA4  80 2A      			bra	.LL643
14321    02:DDA6             	.LL642:
14322                        		__ld.umq	__joypad_BUTTONS_TITLE_end - 1  /* selector_pos */
         02:DDA6  AD 52 26   			lda	__joypad_BUTTONS_TITLE_end - 1
14323                        		__equ_b.uiq	160
         02:DDA9  C9 A0      			cmp	#160
         02:DDAB  F0 01      			beq	!+
         02:DDAD  18         			clc
         02:DDAE             	!:
14324                        		__bfalse	.LL644
         02:DDAE  90 20      			bcc	.LL644
14325                        	
14326                        		.dbg	line,	"include\routines_TITLE.c", 94; {
14327                        	
14328                        		.dbg	line,	"include\routines_TITLE.c", 95; spr_y(168);
14329                        		__ld.wi		168
         02:DDB0  A9 A8      			lda.l	#168
         02:DDB2  C2         			cly
14330                        		__call		_spr_y.1
         02:DDB3  20 19 E8   			call	_spr_y.1
14331                        	
14332                        		.dbg	line,	"include\routines_TITLE.c", 96; }        
14333                        	
14334                        		.dbg	line,	"include\routines_TITLE.c", 97; }
14335    02:DDB6             	.LL644	.alias		.LL645
14336    02:DDB6             	.LL643	.alias		.LL645
14337                        	
14338                        		.dbg	line,	"include\routines_TITLE.c", 100; else if(joytrg(JOYPAD_1) & JOY_I)
14339                        		__bra		.LL645
         02:DDB6  80 18      			bra	.LL645
14340    02:DDB8             	.LL641:
14341                        		__ld.uiq	0
         02:DDB8  62         			cla
14342                        		 _joytrg.1
         02:DDB9  AA         			tax
         02:DDBA  BD 2D 22   			lda	joytrg, x
         02:DDBD  BC DD 22   			ldy	joy6trg, x
14343                        		__tand.wi	1
         02:DDC0  29 01      			and	#1
         02:DDC2  C9 01      	!:		cmp	#1
14344                        		__bfalse	.LL646
         02:DDC4  90 0A      			bcc	.LL646
14345                        	
14346                        		.dbg	line,	"include\routines_TITLE.c", 101; {
14347                        	
14348                        		.dbg	line,	"include\routines_TITLE.c", 102; spr_set(0);
14349                        		__ld.uiq	0
         02:DDC6  62         			cla
14350                        		__call		_spr_set.1
         02:DDC7  20 DD E7   			call	_spr_set.1
14351                        	
14352                        		.dbg	line,	"include\routines_TITLE.c", 103; selector_pos = spr_get_y();
14353                        		__call		_spr_get_y
         02:DDCA  20 7B E8   			call	_spr_get_y
14354                        		__st.umq	__joypad_BUTTONS_TITLE_end - 1  /* selector_pos */
         02:DDCD  8D 52 26   			sta	__joypad_BUTTONS_TITLE_end - 1
14355                        	
14356                        		.dbg	line,	"include\routines_TITLE.c", 104; }
14357                        	
14358                        		.dbg	line,	"include\routines_TITLE.c", 105; }
14359    02:DDD0             	.LL646:
14360    02:DDD0             	.LL645:
14361    02:DDD0             	.LL640:
14362    02:DDD0             	.LL635:
14363    02:DDD0             	.LL628:
14364    02:DDD0             	.LL621:
14365                        		__return	0
         02:DDD0  4C EF FF   			jmp	leave_proc
14366                        		.dbg	clear
14367                        		.endp
14368                        		.pceas
14369                        	
14370                        		.dbg	line,	"main.c", 26; #include "include/init.c"
14371                        		.dbg	line,	"include\init.c", 1; #include "huc.h"
14372                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
14373                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
14374                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
14375                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
14376                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
14377                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
14378                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
14379                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
14380                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
14381                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
14382                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
14383                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
14384                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
14385                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
14386                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
14387                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
14388                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
14389                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
14390                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
14391                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
14392                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
14393                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
14394                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
14395                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
14396                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
14397                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
14398                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
14399                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
14400                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
14401                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
14402                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
14403                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
14404                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
14405                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
14406                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
14407                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
14408                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
14409                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
14410                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
14411                        		.dbg	line,	"include\init.c", 2; #include "hucc-scroll.h"
14412                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 1; #ifndef _hucc_scroll_h
14413                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 2; #define _hucc_scroll_h
14414                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 4; /****************************************************************************
14415                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 5; ; ***************************************************************************
14416                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 6; ;
14417                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 7; ; hucc-scroll.h
14418                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 8; ;
14419                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 9; ; Routines for a fast split-screen scrolling system.
14420                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 10; ;
14421                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 11; ; Copyright John Brandwood 2024.
14422                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 12; ;
14423                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 13; ; Distributed under the Boost Software License, Version 1.0.
14424                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
14425                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
14426                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 16; ;
14427                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 17; ; ***************************************************************************
14428                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 18; ; ***************************************************************************
14429                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 19; ;
14430                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 20; ; The maximum number of splits for each screen layer is set in your project's
14431                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 21; ; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
14432                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 22; ;
14433                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 23; ; Your first active split must be defined to start at screen line 0, and then
14434                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 24; ; the rest of the active splits must be in increasing line order to match the
14435                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 25; ; way that the PC Engine displays the output image.
14436                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 26; ;
14437                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 27; ; You can have disabled splits interleaved with your active splits.
14438                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 28; ;
14439                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 29; ; Splits that are normally disabled can be used to create full screen effects
14440                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 30; ; such as bouncing the screen up and down by adding blank areas at the top or
14441                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 31; ; bottom of the screen, and then rapidly changing the height of those areas.
14442                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 32; ;
14443                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 33; ; ***************************************************************************
14444                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 34; ; **************************************************************************/
14445                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 36; // *************
14446                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 37; // VDC bits for display_flags ...
14447                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 38; // *************
14448                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 40; #ifndef BKG_OFF
14449                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 41; #define BKG_OFF 0x00
14450                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 42; #endif
14451                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 44; #ifndef SPR_OFF
14452                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 45; #define SPR_OFF 0x00
14453                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 46; #endif
14454                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 48; #ifndef BKG_ON
14455                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 49; #define BKG_ON 0x80
14456                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 50; #endif
14457                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 52; #ifndef SPR_ON
14458                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 53; #define SPR_ON 0x40
14459                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 54; #endif
14460                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 56; // *************
14461                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 57; // Functions in hucc-scroll.asm ...
14462                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 58; // *************
14463                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 60; #ifdef __HUCC__
14464                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 62; #asmdef	HUCC_USES_NEW_SCROLL 1
14465                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 64; extern void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
14466                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 65; extern void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
14467                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 67; extern void __fastcall disable_split( unsigned char index<acc> );
14468                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 68; extern void __fastcall sgx_disable_split( unsigned char index<acc> );
14469                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 70; extern void __fastcall __macro disable_all_splits( void );
14470                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 71; extern void __fastcall __macro sgx_disable_all_splits( void );
14471                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 73; #asm
14472                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 74; .macro	_disable_all_splits
14473                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 75; ldy	#HUCC_PCE_SPLITS - 1
14474                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 76; !loop:		tya
14475                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 77; call	_disable_split.1
14476                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 78; dey
14477                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 79; bpl	!loop-
14478                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 80; .endm
14479                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 82; .macro	_sgx_disable_all_splits
14480                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 83; ldy	#HUCC_SGX_SPLITS - 1
14481                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 84; !loop:		tya
14482                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 85; call	_sgx_disable_split.1
14483                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 86; dey
14484                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 87; bpl	!loop-
14485                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 88; .endm
14486                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 89; #endasm
14487                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 91; #endif // __HUCC__
14488                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 93; #endif // _hucc_scroll_h
14489                        		.dbg	line,	"include\init.c", 3; #include "hucc-chrmap.h"
14490                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 1; #ifndef _hucc_chrmap_h
14491                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 2; #define _hucc_chrmap_h
14492                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 4; /****************************************************************************
14493                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 5; ; ***************************************************************************
14494                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 6; ;
14495                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 7; ; hucc-chrmap.h
14496                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 8; ;
14497                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 9; ; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
14498                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 10; ;
14499                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 11; ; Copyright John Brandwood 2025.
14500                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 12; ;
14501                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
14502                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
14503                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
14504                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 16; ;
14505                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 17; ; ***************************************************************************
14506                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 18; ; ***************************************************************************
14507                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 19; ;
14508                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 20; ; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
14509                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 21; ;
14510                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 22; ; The maximum total size for a chrmap is 16KBytes, which allows for maps up
14511                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 23; ; to 256x32 tiles (2048x256 pixels).
14512                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 24; ;
14513                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 25; ; ***************************************************************************
14514                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 26; ; **************************************************************************/
14515                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 28; // *************
14516                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 29; // This code extends the blkmap library ...
14517                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 30; // *************
14518                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 32; #include "hucc-blkmap.h"
14519                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 34; // *************
14520                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 35; // Functions in chrmap.asm ...
14521                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 36; // *************
14522                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 38; #ifdef __HUCC__
14523                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 40; #asmdef	HUCC_USES_CHRMAP 1
14524                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 42; extern void __fastcall __nop set_chrmap( unsigned char __far *chrmap<vdc_map_bank:vdc_map_addr>, unsigned char tiles_w<vdc_map_line_w> );
14525                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 44; extern void __fastcall draw_bat( void );
14526                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 45; extern void __fastcall scroll_bat( void );
14527                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 47; extern void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
14528                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 49; #ifdef _SGX
14529                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 51; extern void __fastcall __nop sgx_set_chrmap( unsigned char __far *chrmap<sgx_map_bank:sgx_map_addr>, unsigned char tiles_w<sgx_map_line_w> );
14530                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 53; extern void __fastcall sgx_draw_bat( void );
14531                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 54; extern void __fastcall sgx_scroll_bat( void );
14532                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 56; extern void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
14533                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 58; #endif
14534                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 60; #endif // __HUCC__
14535                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 62; #endif // _hucc_chrmap_h
14536                        		.dbg	line,	"include\init.c", 4; #include "hucc-blkmap.h"
14537                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
14538                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
14539                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
14540                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
14541                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
14542                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
14543                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
14544                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
14545                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
14546                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
14547                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
14548                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
14549                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
14550                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
14551                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
14552                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
14553                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
14554                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
14555                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
14556                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
14557                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
14558                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
14559                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
14560                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
14561                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
14562                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
14563                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
14564                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
14565                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
14566                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
14567                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
14568                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
14569                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
14570                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
14571                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
14572                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
14573                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
14574                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
14575                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
14576                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
14577                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
14578                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
14579                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
14580                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
14581                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
14582                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
14583                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
14584                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
14585                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
14586                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
14587                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
14588                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
14589                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
14590                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
14591                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
14592                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
14593                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
14594                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
14595                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
14596                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
14597                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
14598                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
14599                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
14600                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
14601                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
14602                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
14603                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
14604                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 86; .macro	_set_blkmap.2
14605                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 87; stz	vdc_scr_bank
14606                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 88; .endm
14607                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 90; .macro	_set_multimap.2
14608                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 91; lda	vdc_bat_width
14609                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 92; lsr	a
14610                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 93; sta	vdc_map_line_w
14611                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 94; .endm
14612                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 96; .macro	SCREEN
14613                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 97; db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
14614                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 98; db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
14615                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 99; db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
14616                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 100; dw	(\4)
14617                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 101; .endm
14618                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
14619                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
14620                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
14621                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
14622                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
14623                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
14624                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
14625                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
14626                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
14627                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
14628                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
14629                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
14630                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
14631                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
14632                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
14633                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
14634                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
14635                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
14636                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
14637                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
14638                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
14639                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
14640                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
14641                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
14642                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
14643                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
14644                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
14645                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
14646                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 144; .macro	_sgx_set_blkmap.2
14647                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 145; stz	sgx_scr_bank
14648                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 146; .endm
14649                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 148; .macro	_sgx_set_multimap.2
14650                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 149; lda	sgx_bat_width
14651                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 150; lsr	a
14652                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 151; sta	sgx_map_line_w
14653                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 152; .endm
14654                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
14655                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
14656                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
14657                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
14658                        		.dbg	line,	"include\init.c", 13; void init_SYSTEM()
14659                        		.dbg	line,	"include\init.c", 14; {
14660                        	;***********************
14661                        	;***********************
14662                        	
14663                        		.hucc
14664    18:D394             		.proc		_init_SYSTEM
14665                        		__enter		_init_SYSTEM
14666                        	
14667                        		.dbg	line,	"include\init.c", 15; // DISABLE DISPLAY //
14668                        	
14669                        		.dbg	line,	"include\init.c", 16; disp_off();
14670                        		__call		_disp_off
         18:D394  20 29 E4   			call	_disp_off
14671                        	
14672                        		.dbg	line,	"include\init.c", 18; // VSYNC //
14673                        	
14674                        		.dbg	line,	"include\init.c", 19; vsync();
14675                        		__call		_vsync
         18:D397  20 09 E3   			call	_vsync
14676                        	
14677                        		.dbg	line,	"include\init.c", 21; // LOAD DEFAULT FONT //
14678                        	
14679                        		.dbg	line,	"include\init.c", 22; load_default_font();
14680                        		 _load_default_font
         18:D39A  82         			clx				; Offset to PCE VDC.
         18:D39B  20 C7 FF   			call	huc_monofont_x
14681                        	
14682                        		.dbg	line,	"include\init.c", 25; // SET VDC 1 SCREEN SIZE (IN TILES) - 32x32 = 256 PIXELS
14683                        	
14684                        		.dbg	line,	"include\init.c", 26; set_screen_size(SCR_SIZE_32x32);
14685                        		__st.umiq	0, _al
         18:D39E  64 F8      			stz	_al
14686                        		__call		_set_screen_size.1
         18:D3A0  20 31 FF   			call	_set_screen_size.1
14687                        	
14688                        		.dbg	line,	"include\init.c", 29; // SET VDC 2 SCREEN SIZE (IN TILES) - 32x32 = 256 PIXELS
14689                        	
14690                        		.dbg	line,	"include\init.c", 30; sgx_set_screen_size(SCR_SIZE_32x32);
14691                        		__st.umiq	0, _al
         18:D3A3  64 F8      			stz	_al
14692                        		__call		_sgx_set_screen_size.1
         18:D3A5  20 27 FF   			call	_sgx_set_screen_size.1
14693                        	
14694                        		.dbg	line,	"include\init.c", 33; // INIT SPRITE ATTRIBUTE TABLE //
14695                        	
14696                        		.dbg	line,	"include\init.c", 34; init_satb();
14697                        		__call		_init_satb
         18:D3A8  20 B7 E7   			call	_init_satb
14698                        	
14699                        		.dbg	line,	"include\init.c", 35; sgx_init_satb();
14700                        		__call		_sgx_init_satb
         18:D3AB  20 CA E7   			call	_sgx_init_satb
14701                        	
14702                        		.dbg	line,	"include\init.c", 38; // ENABLE DISPLAY //
14703                        	
14704                        		.dbg	line,	"include\init.c", 39; //disp_on();
14705                        	
14706                        		.dbg	line,	"include\init.c", 40; }
14707    18:D3AE             	.LL647:
14708                        		__return	0
         18:D3AE  4C EF FF   			jmp	leave_proc
14709                        		.dbg	clear
14710                        		.endp
14711                        		.pceas
14712                        	
14713                        		.dbg	line,	"include\init.c", 43; void init_VARIABLES()
14714                        		.dbg	line,	"include\init.c", 44; {
14715                        	;***********************
14716                        	;***********************
14717                        	
14718                        		.hucc
14719    18:D215             		.proc		_init_VARIABLES
14720                        		__enter		_init_VARIABLES
14721                        	
14722                        		.dbg	line,	"include\init.c", 45; sequence_id = SEQUENCE_GAME; // SEQUENCE_TITLE | SEQUENCE_GAME | SEQUENCE_SHOP
14723                        		__st.umiq	2, _sequence_id
         18:D215  A9 02      			lda.l	#2
         18:D217  8D 13 23   			sta	_sequence_id
14724                        	
14725                        		.dbg	line,	"include\init.c", 47; level_id = 1;
14726                        		__st.umiq	1, _level_id
         18:D21A  A9 01      			lda.l	#1
         18:D21C  8D 15 23   			sta	_level_id
14727                        	
14728                        		.dbg	line,	"include\init.c", 49; life_amount = 3;
14729                        		__st.umiq	3, _life_amount
         18:D21F  A9 03      			lda.l	#3
         18:D221  8D 2C 23   			sta	_life_amount
14730                        	
14731                        		.dbg	line,	"include\init.c", 50; credits_amount = 2;
14732                        		__st.umiq	2, _credits_amount
         18:D224  A9 02      			lda.l	#2
         18:D226  8D 2D 23   			sta	_credits_amount
14733                        	
14734                        		.dbg	line,	"include\init.c", 51; key_amount = 0;
14735                        		__st.umiq	0, _key_amount
         18:D229  9C 2E 23   			stz	_key_amount
14736                        	
14737                        		.dbg	line,	"include\init.c", 52; potion_amount = 0;
14738                        		__st.umiq	0, _potion_amount
         18:D22C  9C 2F 23   			stz	_potion_amount
14739                        	
14740                        		.dbg	line,	"include\init.c", 53; zenny_amount = 25000;
14741                        		__st.wmiq	25000, _zenny_amount
         18:D22F  A9 A8      			lda.l	#25000
         18:D231  8D 34 26   			sta.l	_zenny_amount
         18:D234  A9 61      			lda.h	#25000
         18:D236  8D 35 26   			sta.h	_zenny_amount
14742                        	
14743                        		.dbg	line,	"include\init.c", 55; weapon_level = 0;
14744                        		__st.umiq	0, _weapon_level
         18:D239  9C 28 23   			stz	_weapon_level
14745                        	
14746                        		.dbg	line,	"include\init.c", 56; armor_level = 2;
14747                        		__st.umiq	2, _armor_level
         18:D23C  A9 02      			lda.l	#2
         18:D23E  8D 27 23   			sta	_armor_level
14748                        	
14749                        		.dbg	line,	"include\init.c", 57; 
14750                        	
14751                        		.dbg	line,	"include\init.c", 58; player_naked = FALSE;
14752                        		__st.umiq	0, _player_naked
         18:D241  9C 1F 23   			stz	_player_naked
14753                        	
14754                        		.dbg	line,	"include\init.c", 60; shop_counter = 0;
14755                        		__st.umiq	0, _shop_counter
         18:D244  9C D9 23   			stz	_shop_counter
14756                        	
14757                        		.dbg	line,	"include\init.c", 61; shop_phase = SHOP_PHASE_ENTER;
14758                        		__st.umiq	0, _shop_phase
         18:D247  9C D8 23   			stz	_shop_phase
14759                        	
14760                        		.dbg	line,	"include\init.c", 63; respawn = FALSE;
14761                        		__st.umiq	0, _respawn
         18:D24A  9C 16 23   			stz	_respawn
14762                        	
14763                        		.dbg	line,	"include\init.c", 65; sequence_loaded = FALSE;
14764                        		__st.umiq	0, _sequence_loaded
         18:D24D  9C 14 23   			stz	_sequence_loaded
14765                        	
14766                        		.dbg	line,	"include\init.c", 66; }
14767    18:D250             	.LL648:
14768                        		__return	0
         18:D250  4C EF FF   			jmp	leave_proc
14769                        		.dbg	clear
14770                        		.endp
14771                        		.pceas
14772                        	
14773                        		.dbg	line,	"include\init.c", 69; void init_PLAYER()
14774                        		.dbg	line,	"include\init.c", 70; {
14775                        	;***********************
14776                        	;***********************
14777                        	
14778                        		.hucc
14779    18:D194             		.proc		_init_PLAYER
14780                        		__enter		_init_PLAYER
14781                        	
14782                        		.dbg	line,	"include\init.c", 71; if(player_naked != RESPAWN_SHOP)
14783                        		__ld.umq	_player_naked
         18:D194  AD 1F 23   			lda	_player_naked
14784                        		__neq_b.uiq	2
         18:D197  38         			sec
         18:D198  49 02      			eor	#2
         18:D19A  D0 01      			bne	!+
         18:D19C  18         			clc
         18:D19D             	!:
14785                        		__bfalse	.LL650
         18:D19D  90 03      			bcc	.LL650
14786                        	
14787                        		.dbg	line,	"include\init.c", 72; {
14788                        	
14789                        		.dbg	line,	"include\init.c", 73; player_naked = FALSE;
14790                        		__st.umiq	0, _player_naked
         18:D19F  9C 1F 23   			stz	_player_naked
14791                        	
14792                        		.dbg	line,	"include\init.c", 74; }
14793                        	
14794                        		.dbg	line,	"include\init.c", 75; 
14795                        	
14796                        		.dbg	line,	"include\init.c", 76; player_id = PLAYER_START_INDEX;
14797    18:D1A2             	.LL650:
14798                        		__st.umiq	14, _player_id
         18:D1A2  A9 0E      			lda.l	#14
         18:D1A4  8D 17 23   			sta	_player_id
14799                        	
14800                        		.dbg	line,	"include\init.c", 77; player_axis = AXIS_RIGHT;
14801                        		__st.umiq	0, _player_axis
         18:D1A7  9C 19 23   			stz	_player_axis
14802                        	
14803                        		.dbg	line,	"include\init.c", 78; player_previous_axis = player_axis;
14804                        		__ld.um		_player_axis
         18:D1AA  AD 19 23   			lda	_player_axis
         18:D1AD  C2         			cly
14805                        		__st.umq	_player_previous_axis
         18:D1AE  8D 1A 23   			sta	_player_previous_axis
14806                        	
14807                        		.dbg	line,	"include\init.c", 79; player_counter_anim = 0;
14808                        		__st.umiq	0, _player_counter_anim
         18:D1B1  9C 1B 23   			stz	_player_counter_anim
14809                        	
14810                        		.dbg	line,	"include\init.c", 80; player_index_jump = 0;
14811                        		__st.umiq	0, _player_index_jump
         18:D1B4  9C 1C 23   			stz	_player_index_jump
14812                        	
14813                        		.dbg	line,	"include\init.c", 81; player_index_fall = 0;
14814                        		__st.umiq	0, _player_index_fall
         18:D1B7  9C 1D 23   			stz	_player_index_fall
14815                        	
14816                        		.dbg	line,	"include\init.c", 82; fall_ladder = FALSE;
14817                        		__st.umiq	0, _fall_ladder
         18:D1BA  9C 23 23   			stz	_fall_ladder
14818                        	
14819                        		.dbg	line,	"include\init.c", 83; player_counter_attack = 0;
14820                        		__st.umiq	0, _player_counter_attack
         18:D1BD  9C 1E 23   			stz	_player_counter_attack
14821                        	
14822                        		.dbg	line,	"include\init.c", 84; player_attack = FALSE;
14823                        		__st.umiq	0, _player_attack
         18:D1C0  9C 20 23   			stz	_player_attack
14824                        	
14825                        		.dbg	line,	"include\init.c", 85; player_state = STATE_IDLE;
14826                        		__st.umiq	0, _player_state
         18:D1C3  9C 18 23   			stz	_player_state
14827                        	
14828                        		.dbg	line,	"include\init.c", 87; chain_id = player_id - 3;
14829                        		__ld.um		_player_id
         18:D1C6  AD 17 23   			lda	_player_id
         18:D1C9  C2         			cly
14830                        		__sub.wi	3
         18:D1CA  38         			sec
         18:D1CB  E9 03      			sbc.l	#3
         18:D1CD  B0 01      			bcs	!+
         18:D1CF  88         			dey
         18:D1D0             	!:
14831                        		__st.umq	_chain_id
         18:D1D0  8D 25 23   			sta	_chain_id
14832                        	
14833                        		.dbg	line,	"include\init.c", 88; }
14834    18:D1D3             	.LL649:
14835                        		__return	0
         18:D1D3  4C EF FF   			jmp	leave_proc
14836                        		.dbg	clear
14837                        		.endp
14838                        		.pceas
14839                        	
14840                        		.dbg	line,	"include\init.c", 97; void init_TITLE()
14841                        		.dbg	line,	"include\init.c", 98; {
14842                        	;***********************
14843                        	;***********************
14844                        	
14845                        		.hucc
14846    18:C000             		.proc		_init_TITLE
14847                        		__enter		_init_TITLE
14848                        	
14849                        		.dbg	line,	"include\init.c", 99; // DISABLE DISPLAY //
14850                        	
14851                        		.dbg	line,	"include\init.c", 100; disp_off();
14852                        		__call		_disp_off
         18:C000  20 29 E4   			call	_disp_off
14853                        	
14854                        		.dbg	line,	"include\init.c", 101; 
14855                        	
14856                        		.dbg	line,	"include\init.c", 103; // VSYNC //
14857                        	
14858                        		.dbg	line,	"include\init.c", 104; vsync();
14859                        		__call		_vsync
         18:C003  20 09 E3   			call	_vsync
14860                        	
14861                        		.dbg	line,	"include\init.c", 107; // SET VDC 1 SCREEN SIZE (IN TILES) - 32x32 = 256 PIXELS
14862                        	
14863                        		.dbg	line,	"include\init.c", 108; set_screen_size(SCR_SIZE_32x32);
14864                        		__st.umiq	0, _al
         18:C006  64 F8      			stz	_al
14865                        		__call		_set_screen_size.1
         18:C008  20 31 FF   			call	_set_screen_size.1
14866                        	
14867                        		.dbg	line,	"include\init.c", 113; //**************************************************************************************//
14868                        	
14869                        		.dbg	line,	"include\init.c", 114; //                                                                                      //
14870                        	
14871                        		.dbg	line,	"include\init.c", 115; //                                        VDC 1                                         //
14872                        	
14873                        		.dbg	line,	"include\init.c", 116; //                                                                                      //
14874                        	
14875                        		.dbg	line,	"include\init.c", 117; //**************************************************************************************//
14876                        	
14877                        		.dbg	line,	"include\init.c", 119; //--------------------------------------------------------------------------------------//
14878                        	
14879                        		.dbg	line,	"include\init.c", 120; //                                      LOAD FONT                                       //
14880                        	
14881                        		.dbg	line,	"include\init.c", 121; //--------------------------------------------------------------------------------------//
14882                        	
14883                        		.dbg	line,	"include\init.c", 123; load_vram( 0x0800, tileset_FONT_TITLE, SIZEOF(tileset_FONT_TITLE) >> 1 );
14884                        		__st.wmiq	2048, _di
         18:C00B  64 F0      			stz.l	_di
         18:C00D  A9 08      			lda.h	#2048
         18:C00F  85 F1      			sta.h	_di
14885                        		__farptr	_tileset_FONT_TITLE, _bp_bank, _bp
         18:C011  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_FONT_TITLE))
         18:C013  85 EC      			sta.l	_bp
         18:C015  A9 60      			lda.h	#$6000 + ($1FFF & (_tileset_FONT_TITLE))
         18:C017  85 ED      			sta.h	_bp
         18:C019  A9 03      			lda	#bank(_tileset_FONT_TITLE)
         18:C01B  85 02      			sta	_bp_bank
14886                        		__ld.wi		___sizeof__tileset_FONT_TITLE
         18:C01D  A9 00      			lda.l	#___sizeof__tileset_FONT_TITLE
         18:C01F  A0 0C      			ldy.h	#___sizeof__tileset_FONT_TITLE
14887                        		__lsr.wi	1
         18:C021  42         			say
         18:C022  4A         			lsr	a
         18:C023  42         			say
         18:C024  6A         			ror	a
14888                        		__st.wmq	_ax
         18:C025  85 F8      			sta.l	_ax
         18:C027  84 F9      			sty.h	_ax
14889                        		 _load_vram.3
         18:C029  82         			clx				; Offset to PCE VDC.
         18:C02A  20 4F FF   			call	load_vram_x
14890                        	
14891                        		.dbg	line,	"include\init.c", 125; set_font_pal(15);
14892                        		__ld.uiq	15
         18:C02D  A9 0F      			lda	#15
14893                        		__call		_set_font_pal.1
         18:C02F  20 09 E6   			call	_set_font_pal.1
14894                        	
14895                        		.dbg	line,	"include\init.c", 129; //--------------------------------------------------------------------------------------//
14896                        	
14897                        		.dbg	line,	"include\init.c", 130; //                                    LOAD TILEMAP                                      //
14898                        	
14899                        		.dbg	line,	"include\init.c", 131; //--------------------------------------------------------------------------------------//
14900                        	
14901                        		.dbg	line,	"include\init.c", 133; load_vram( 0x0000, tilemap_TITLE_BG_B, SIZEOF(tilemap_TITLE_BG_B) >> 1 );
14902                        		__st.wmiq	0, _di
         18:C032  64 F0      			stz.l	_di
         18:C034  64 F1      			stz.h	_di
14903                        		__farptr	_tilemap_TITLE_BG_B, _bp_bank, _bp
         18:C036  A9 60      			lda.l	#$6000 + ($1FFF & (_tilemap_TITLE_BG_B))
         18:C038  85 EC      			sta.l	_bp
         18:C03A  A9 68      			lda.h	#$6000 + ($1FFF & (_tilemap_TITLE_BG_B))
         18:C03C  85 ED      			sta.h	_bp
         18:C03E  A9 04      			lda	#bank(_tilemap_TITLE_BG_B)
         18:C040  85 02      			sta	_bp_bank
14904                        		__ld.wi		___sizeof__tilemap_TITLE_BG_B
         18:C042  A9 00      			lda.l	#___sizeof__tilemap_TITLE_BG_B
         18:C044  A0 07      			ldy.h	#___sizeof__tilemap_TITLE_BG_B
14905                        		__lsr.wi	1
         18:C046  42         			say
         18:C047  4A         			lsr	a
         18:C048  42         			say
         18:C049  6A         			ror	a
14906                        		__st.wmq	_ax
         18:C04A  85 F8      			sta.l	_ax
         18:C04C  84 F9      			sty.h	_ax
14907                        		 _load_vram.3
         18:C04E  82         			clx				; Offset to PCE VDC.
         18:C04F  20 4F FF   			call	load_vram_x
14908                        	
14909                        		.dbg	line,	"include\init.c", 135; //--------------------------------------------------------------------------------------//
14910                        	
14911                        		.dbg	line,	"include\init.c", 136; //                                    LOAD TILESET                                      //
14912                        	
14913                        		.dbg	line,	"include\init.c", 137; //--------------------------------------------------------------------------------------//
14914                        	
14915                        		.dbg	line,	"include\init.c", 139; load_vram( 0x1000, tileset_TITLE_BG_B, SIZEOF(tileset_TITLE_BG_B) >> 1 );
14916                        		__st.wmiq	4096, _di
         18:C052  64 F0      			stz.l	_di
         18:C054  A9 10      			lda.h	#4096
         18:C056  85 F1      			sta.h	_di
14917                        		__farptr	_tileset_TITLE_BG_B, _bp_bank, _bp
         18:C058  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_TITLE_BG_B))
         18:C05A  85 EC      			sta.l	_bp
         18:C05C  A9 6C      			lda.h	#$6000 + ($1FFF & (_tileset_TITLE_BG_B))
         18:C05E  85 ED      			sta.h	_bp
         18:C060  A9 03      			lda	#bank(_tileset_TITLE_BG_B)
         18:C062  85 02      			sta	_bp_bank
14918                        		__ld.wi		___sizeof__tileset_TITLE_BG_B
         18:C064  A9 60      			lda.l	#___sizeof__tileset_TITLE_BG_B
         18:C066  A0 1C      			ldy.h	#___sizeof__tileset_TITLE_BG_B
14919                        		__lsr.wi	1
         18:C068  42         			say
         18:C069  4A         			lsr	a
         18:C06A  42         			say
         18:C06B  6A         			ror	a
14920                        		__st.wmq	_ax
         18:C06C  85 F8      			sta.l	_ax
         18:C06E  84 F9      			sty.h	_ax
14921                        		 _load_vram.3
         18:C070  82         			clx				; Offset to PCE VDC.
         18:C071  20 4F FF   			call	load_vram_x
14922                        	
14923                        		.dbg	line,	"include\init.c", 144; //put_string("PRESS RUN"   , 11 , 18);
14924                        	
14925                        		.dbg	line,	"include\init.c", 145; put_string("START GAME"  	, 11 , 18);
14926                        		__ld.wi		__const1+0
         18:C074  62         			cla
         18:C075  A0 60      			ldy.h	#__const1+0
14927                        		__st.wmq	_bp
         18:C077  85 EC      			sta.l	_bp
         18:C079  84 ED      			sty.h	_bp
14928                        		__st.umiq	11, _dil
         18:C07B  A9 0B      			lda.l	#11
         18:C07D  85 F0      			sta	_dil
14929                        		__st.umiq	18, _dih
         18:C07F  A9 12      			lda.l	#18
         18:C081  85 F1      			sta	_dih
14930                        		__call		_put_string.3
         18:C083  20 68 E6   			call	_put_string.3
14931                        	
14932                        		.dbg	line,	"include\init.c", 147; put_string("LIFE"        	, 11 , 20);
14933                        		__ld.wi		__const1+11
         18:C086  A9 0B      			lda.l	#__const1+11
         18:C088  A0 60      			ldy.h	#__const1+11
14934                        		__st.wmq	_bp
         18:C08A  85 EC      			sta.l	_bp
         18:C08C  84 ED      			sty.h	_bp
14935                        		__st.umiq	11, _dil
         18:C08E  A9 0B      			lda.l	#11
         18:C090  85 F0      			sta	_dil
14936                        		__st.umiq	20, _dih
         18:C092  A9 14      			lda.l	#20
         18:C094  85 F1      			sta	_dih
14937                        		__call		_put_string.3
         18:C096  20 68 E6   			call	_put_string.3
14938                        	
14939                        		.dbg	line,	"include\init.c", 148; put_number(life_amount   	,  1 , 20 , 20);
14940                        		__ld.um		_life_amount
         18:C099  AD 2C 23   			lda	_life_amount
         18:C09C  C2         			cly
14941                        		__st.wmq	_bx
         18:C09D  85 FA      			sta.l	_bx
         18:C09F  84 FB      			sty.h	_bx
14942                        		__st.umiq	1, _cl
         18:C0A1  A9 01      			lda.l	#1
         18:C0A3  85 FC      			sta	_cl
14943                        		__st.umiq	20, _dil
         18:C0A5  A9 14      			lda.l	#20
         18:C0A7  85 F0      			sta	_dil
14944                        		__st.umiq	20, _dih
         18:C0A9  A9 14      			lda.l	#20
         18:C0AB  85 F1      			sta	_dih
14945                        		__call		_put_number.4
         18:C0AD  20 9F FF   			call	_put_number.4
14946                        	
14947                        		.dbg	line,	"include\init.c", 150; put_string("CREDITS"		, 11 , 21);
14948                        		__ld.wi		__const1+16
         18:C0B0  A9 10      			lda.l	#__const1+16
         18:C0B2  A0 60      			ldy.h	#__const1+16
14949                        		__st.wmq	_bp
         18:C0B4  85 EC      			sta.l	_bp
         18:C0B6  84 ED      			sty.h	_bp
14950                        		__st.umiq	11, _dil
         18:C0B8  A9 0B      			lda.l	#11
         18:C0BA  85 F0      			sta	_dil
14951                        		__st.umiq	21, _dih
         18:C0BC  A9 15      			lda.l	#21
         18:C0BE  85 F1      			sta	_dih
14952                        		__call		_put_string.3
         18:C0C0  20 68 E6   			call	_put_string.3
14953                        	
14954                        		.dbg	line,	"include\init.c", 151; put_number(credits_amount   ,  1 , 20 , 21);
14955                        		__ld.um		_credits_amount
         18:C0C3  AD 2D 23   			lda	_credits_amount
         18:C0C6  C2         			cly
14956                        		__st.wmq	_bx
         18:C0C7  85 FA      			sta.l	_bx
         18:C0C9  84 FB      			sty.h	_bx
14957                        		__st.umiq	1, _cl
         18:C0CB  A9 01      			lda.l	#1
         18:C0CD  85 FC      			sta	_cl
14958                        		__st.umiq	20, _dil
         18:C0CF  A9 14      			lda.l	#20
         18:C0D1  85 F0      			sta	_dil
14959                        		__st.umiq	21, _dih
         18:C0D3  A9 15      			lda.l	#21
         18:C0D5  85 F1      			sta	_dih
14960                        		__call		_put_number.4
         18:C0D7  20 9F FF   			call	_put_number.4
14961                        	
14962                        		.dbg	line,	"include\init.c", 153; put_string("CAPCOM 1987" 	, 11 , 26);
14963                        		__ld.wi		__const1+24
         18:C0DA  A9 18      			lda.l	#__const1+24
         18:C0DC  A0 60      			ldy.h	#__const1+24
14964                        		__st.wmq	_bp
         18:C0DE  85 EC      			sta.l	_bp
         18:C0E0  84 ED      			sty.h	_bp
14965                        		__st.umiq	11, _dil
         18:C0E2  A9 0B      			lda.l	#11
         18:C0E4  85 F0      			sta	_dil
14966                        		__st.umiq	26, _dih
         18:C0E6  A9 1A      			lda.l	#26
         18:C0E8  85 F1      			sta	_dih
14967                        		__call		_put_string.3
         18:C0EA  20 68 E6   			call	_put_string.3
14968                        	
14969                        		.dbg	line,	"include\init.c", 158; //--------------------------------------------------------------------------------------//
14970                        	
14971                        		.dbg	line,	"include\init.c", 159; //                                   LOAD BG PALETTES                                   //
14972                        	
14973                        		.dbg	line,	"include\init.c", 160; //--------------------------------------------------------------------------------------//
14974                        	
14975                        		.dbg	line,	"include\init.c", 162; load_palette( 0, palette_TITLE, 16 );
14976                        		__st.umiq	0, _al
         18:C0ED  64 F8      			stz	_al
14977                        		__farptr	_palette_TITLE, _bp_bank, _bp
         18:C0EF  A9 60      			lda.l	#$6000 + ($1FFF & (_palette_TITLE))
         18:C0F1  85 EC      			sta.l	_bp
         18:C0F3  A9 6F      			lda.h	#$6000 + ($1FFF & (_palette_TITLE))
         18:C0F5  85 ED      			sta.h	_bp
         18:C0F7  A9 04      			lda	#bank(_palette_TITLE)
         18:C0F9  85 02      			sta	_bp_bank
14978                        		__st.umiq	16, _ah
         18:C0FB  A9 10      			lda.l	#16
         18:C0FD  85 F9      			sta	_ah
14979                        		__call		_load_palette.3
         18:C0FF  20 1D FF   			call	_load_palette.3
14980                        	
14981                        		.dbg	line,	"include\init.c", 167; //**************************************************************************************//
14982                        	
14983                        		.dbg	line,	"include\init.c", 168; //                                                                                      //
14984                        	
14985                        		.dbg	line,	"include\init.c", 169; //                                       SPRITES                                        //
14986                        	
14987                        		.dbg	line,	"include\init.c", 170; //                                                                                      //
14988                        	
14989                        		.dbg	line,	"include\init.c", 171; //**************************************************************************************//
14990                        	
14991                        		.dbg	line,	"include\init.c", 173; //--------------------------------------------------------------------------------------//
14992                        	
14993                        		.dbg	line,	"include\init.c", 174; //                                        CURSOR                                        //
14994                        	
14995                        		.dbg	line,	"include\init.c", 175; //--------------------------------------------------------------------------------------//
14996                        	
14997                        		.dbg	line,	"include\init.c", 177; // LOAD CURSOR TILES //
14998                        	
14999                        		.dbg	line,	"include\init.c", 178; load_vram(0x2000, tiles_SPR_SELECTOR , SIZEOF(tiles_SPR_SELECTOR) >> 1 );
15000                        		__st.wmiq	8192, _di
         18:C102  64 F0      			stz.l	_di
         18:C104  A9 20      			lda.h	#8192
         18:C106  85 F1      			sta.h	_di
15001                        		__farptr	_tiles_SPR_SELECTOR, _bp_bank, _bp
         18:C108  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_SELECTOR))
         18:C10A  85 EC      			sta.l	_bp
         18:C10C  A9 79      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_SELECTOR))
         18:C10E  85 ED      			sta.h	_bp
         18:C110  A9 0F      			lda	#bank(_tiles_SPR_SELECTOR)
         18:C112  85 02      			sta	_bp_bank
15002                        		__ld.wi		___sizeof__tiles_SPR_SELECTOR
         18:C114  A9 80      			lda.l	#___sizeof__tiles_SPR_SELECTOR
         18:C116  A0 00      			ldy.h	#___sizeof__tiles_SPR_SELECTOR
15003                        		__lsr.wi	1
         18:C118  42         			say
         18:C119  4A         			lsr	a
         18:C11A  42         			say
         18:C11B  6A         			ror	a
15004                        		__st.wmq	_ax
         18:C11C  85 F8      			sta.l	_ax
         18:C11E  84 F9      			sty.h	_ax
15005                        		 _load_vram.3
         18:C120  82         			clx				; Offset to PCE VDC.
         18:C121  20 4F FF   			call	load_vram_x
15006                        	
15007                        		.dbg	line,	"include\init.c", 181; // SELECT CURSOR SPRITE //
15008                        	
15009                        		.dbg	line,	"include\init.c", 182; spr_set(0);
15010                        		__ld.uiq	0
         18:C124  62         			cla
15011                        		__call		_spr_set.1
         18:C125  20 DD E7   			call	_spr_set.1
15012                        	
15013                        		.dbg	line,	"include\init.c", 185; spr_x(72);
15014                        		__ld.wi		72
         18:C128  A9 48      			lda.l	#72
         18:C12A  C2         			cly
15015                        		__call		_spr_x.1
         18:C12B  20 0A E8   			call	_spr_x.1
15016                        	
15017                        		.dbg	line,	"include\init.c", 186; spr_y(144);
15018                        		__ld.wi		144
         18:C12E  A9 90      			lda.l	#144
         18:C130  C2         			cly
15019                        		__call		_spr_y.1
         18:C131  20 19 E8   			call	_spr_y.1
15020                        	
15021                        		.dbg	line,	"include\init.c", 188; // SET TILES DATA FOR THE CURSOR //
15022                        	
15023                        		.dbg	line,	"include\init.c", 189; spr_pattern(0x2000);
15024                        		__ld.wi		8192
         18:C134  62         			cla
         18:C135  A0 20      			ldy.h	#8192
15025                        		__call		_spr_pattern.1
         18:C137  20 26 E8   			call	_spr_pattern.1
15026                        	
15027                        		.dbg	line,	"include\init.c", 192; spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_16x16);
15028                        		__st.umiq	185, _al
         18:C13A  A9 B9      			lda.l	#185
         18:C13C  85 F8      			sta	_al
15029                        		__ld.uiq	0
         18:C13E  62         			cla
15030                        		__call		_spr_ctrl.2
         18:C13F  20 3C E8   			call	_spr_ctrl.2
15031                        	
15032                        		.dbg	line,	"include\init.c", 195; spr_pal(16);
15033                        		__ld.uiq	16
         18:C142  A9 10      			lda	#16
15034                        		__call		_spr_pal.1
         18:C144  20 4D E8   			call	_spr_pal.1
15035                        	
15036                        		.dbg	line,	"include\init.c", 196; spr_pri(TRUE);
15037                        		__ld.uiq	1
         18:C147  A9 01      			lda	#1
15038                        		__call		_spr_pri.1
         18:C149  20 5C E8   			call	_spr_pri.1
15039                        	
15040                        		.dbg	line,	"include\init.c", 199; //--------------------------------------------------------------------------------------//
15041                        	
15042                        		.dbg	line,	"include\init.c", 200; //                                LOAD SPRITES PALETTES                                 //
15043                        	
15044                        		.dbg	line,	"include\init.c", 201; //--------------------------------------------------------------------------------------//
15045                        	
15046                        		.dbg	line,	"include\init.c", 203; load_palette( 16, palette_objects_2, 1 );
15047                        		__st.umiq	16, _al
         18:C14C  A9 10      			lda.l	#16
         18:C14E  85 F8      			sta	_al
15048                        		__farptr	_palette_objects_2, _bp_bank, _bp
         18:C150  A9 E0      			lda.l	#$6000 + ($1FFF & (_palette_objects_2))
         18:C152  85 EC      			sta.l	_bp
         18:C154  A9 70      			lda.h	#$6000 + ($1FFF & (_palette_objects_2))
         18:C156  85 ED      			sta.h	_bp
         18:C158  A9 14      			lda	#bank(_palette_objects_2)
         18:C15A  85 02      			sta	_bp_bank
15049                        		__st.umiq	1, _ah
         18:C15C  A9 01      			lda.l	#1
         18:C15E  85 F9      			sta	_ah
15050                        		__call		_load_palette.3
         18:C160  20 1D FF   			call	_load_palette.3
15051                        	
15052                        		.dbg	line,	"include\init.c", 208; // UPDATE PCE SAT //
15053                        	
15054                        		.dbg	line,	"include\init.c", 209; satb_update();
15055                        		__call		_satb_update
         18:C163  20 13 FF   			call	_satb_update
15056                        	
15057                        		.dbg	line,	"include\init.c", 214; // VSYNC //
15058                        	
15059                        		.dbg	line,	"include\init.c", 215; vsync();
15060                        		__call		_vsync
         18:C166  20 09 E3   			call	_vsync
15061                        	
15062                        		.dbg	line,	"include\init.c", 217; // ENABLE DISPLAY //
15063                        	
15064                        		.dbg	line,	"include\init.c", 218; disp_on();
15065                        		__call		_disp_on
         18:C169  20 16 E4   			call	_disp_on
15066                        	
15067                        		.dbg	line,	"include\init.c", 219; }
15068    18:C16C             	.LL651:
15069                        		__return	0
         18:C16C  4C EF FF   			jmp	leave_proc
15070                        		.dbg	clear
15071                        		.endp
15072                        		.pceas
15073                        	
15074                        		.dbg	line,	"include\init.c", 228; void load_OBJECT_TILES()
15075                        		.dbg	line,	"include\init.c", 229; {
15076                        	;***********************
15077                        	;***********************
15078                        	
15079                        		.hucc
15080    02:D46D             		.proc		_load_OBJECT_TILES
15081                        		__enter		_load_OBJECT_TILES
15082                        	
15083                        		.dbg	line,	"include\init.c", 230; sgx_load_vram(POT1_VRAM_ADR, tiles_SPR_POT , SIZEOF(tiles_SPR_POT) >> 1);
15084                        		__st.wmiq	26624, _di
         02:D46D  64 F0      			stz.l	_di
         02:D46F  A9 68      			lda.h	#26624
         02:D471  85 F1      			sta.h	_di
15085                        		__farptr	_tiles_SPR_POT, _bp_bank, _bp
         02:D473  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_POT))
         02:D475  85 EC      			sta.l	_bp
         02:D477  A9 66      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_POT))
         02:D479  85 ED      			sta.h	_bp
         02:D47B  A9 14      			lda	#bank(_tiles_SPR_POT)
         02:D47D  85 02      			sta	_bp_bank
15086                        		__ld.wi		___sizeof__tiles_SPR_POT
         02:D47F  A9 00      			lda.l	#___sizeof__tiles_SPR_POT
         02:D481  A0 04      			ldy.h	#___sizeof__tiles_SPR_POT
15087                        		__lsr.wi	1
         02:D483  42         			say
         02:D484  4A         			lsr	a
         02:D485  42         			say
         02:D486  6A         			ror	a
15088                        		__st.wmq	_ax
         02:D487  85 F8      			sta.l	_ax
         02:D489  84 F9      			sty.h	_ax
15089                        		 _sgx_load_vram.3
         02:D48B  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D48D  20 4F FF   			call	load_vram_x
15090                        	
15091                        		.dbg	line,	"include\init.c", 231; sgx_load_vram(POW_VRAM_ADR, tiles_SPR_POW , TILES_4);
15092                        		__st.wmiq	27136, _di
         02:D490  64 F0      			stz.l	_di
         02:D492  A9 6A      			lda.h	#27136
         02:D494  85 F1      			sta.h	_di
15093                        		__farptr	_tiles_SPR_POW, _bp_bank, _bp
         02:D496  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_POW))
         02:D498  85 EC      			sta.l	_bp
         02:D49A  A9 6A      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_POW))
         02:D49C  85 ED      			sta.h	_bp
         02:D49E  A9 14      			lda	#bank(_tiles_SPR_POW)
         02:D4A0  85 02      			sta	_bp_bank
15094                        		__st.wmiq	64, _ax
         02:D4A2  A9 40      			lda.l	#64
         02:D4A4  85 F8      			sta.l	_ax
         02:D4A6  64 F9      			stz.h	_ax
15095                        		 _sgx_load_vram.3
         02:D4A8  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D4AA  20 4F FF   			call	load_vram_x
15096                        	
15097                        		.dbg	line,	"include\init.c", 232; sgx_load_vram(GRAY_KEY_VRAM_ADR, tiles_SPR_GRAY_KEY , TILES_4);
15098                        		__st.wmiq	27200, _di
         02:D4AD  A9 40      			lda.l	#27200
         02:D4AF  85 F0      			sta.l	_di
         02:D4B1  A9 6A      			lda.h	#27200
         02:D4B3  85 F1      			sta.h	_di
15099                        		__farptr	_tiles_SPR_GRAY_KEY, _bp_bank, _bp
         02:D4B5  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_GRAY_KEY))
         02:D4B7  85 EC      			sta.l	_bp
         02:D4B9  A9 64      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_GRAY_KEY))
         02:D4BB  85 ED      			sta.h	_bp
         02:D4BD  A9 14      			lda	#bank(_tiles_SPR_GRAY_KEY)
         02:D4BF  85 02      			sta	_bp_bank
15100                        		__st.wmiq	64, _ax
         02:D4C1  A9 40      			lda.l	#64
         02:D4C3  85 F8      			sta.l	_ax
         02:D4C5  64 F9      			stz.h	_ax
15101                        		 _sgx_load_vram.3
         02:D4C7  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D4C9  20 4F FF   			call	load_vram_x
15102                        	
15103                        		.dbg	line,	"include\init.c", 233; sgx_load_vram(GOLD_KEY_VRAM_ADR, tiles_SPR_GOLD_KEY , TILES_4);
15104                        		__st.wmiq	27264, _di
         02:D4CC  A9 80      			lda.l	#27264
         02:D4CE  85 F0      			sta.l	_di
         02:D4D0  A9 6A      			lda.h	#27264
         02:D4D2  85 F1      			sta.h	_di
15105                        		__farptr	_tiles_SPR_GOLD_KEY, _bp_bank, _bp
         02:D4D4  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_GOLD_KEY))
         02:D4D6  85 EC      			sta.l	_bp
         02:D4D8  A9 64      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_GOLD_KEY))
         02:D4DA  85 ED      			sta.h	_bp
         02:D4DC  A9 14      			lda	#bank(_tiles_SPR_GOLD_KEY)
         02:D4DE  85 02      			sta	_bp_bank
15106                        		__st.wmiq	64, _ax
         02:D4E0  A9 40      			lda.l	#64
         02:D4E2  85 F8      			sta.l	_ax
         02:D4E4  64 F9      			stz.h	_ax
15107                        		 _sgx_load_vram.3
         02:D4E6  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D4E8  20 4F FF   			call	load_vram_x
15108                        	
15109                        		.dbg	line,	"include\init.c", 234; sgx_load_vram(LIFE_VRAM_ADR, tiles_SPR_LIFE , TILES_4);
15110                        		__st.wmiq	27328, _di
         02:D4EB  A9 C0      			lda.l	#27328
         02:D4ED  85 F0      			sta.l	_di
         02:D4EF  A9 6A      			lda.h	#27328
         02:D4F1  85 F1      			sta.h	_di
15111                        		__farptr	_tiles_SPR_LIFE, _bp_bank, _bp
         02:D4F3  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_LIFE))
         02:D4F5  85 EC      			sta.l	_bp
         02:D4F7  A9 65      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_LIFE))
         02:D4F9  85 ED      			sta.h	_bp
         02:D4FB  A9 14      			lda	#bank(_tiles_SPR_LIFE)
         02:D4FD  85 02      			sta	_bp_bank
15112                        		__st.wmiq	64, _ax
         02:D4FF  A9 40      			lda.l	#64
         02:D501  85 F8      			sta.l	_ax
         02:D503  64 F9      			stz.h	_ax
15113                        		 _sgx_load_vram.3
         02:D505  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D507  20 4F FF   			call	load_vram_x
15114                        	
15115                        		.dbg	line,	"include\init.c", 235; sgx_load_vram(COIN_1_VRAM_ADR, tiles_SPR_COIN_1 , TILES_4);
15116                        		__st.wmiq	27392, _di
         02:D50A  64 F0      			stz.l	_di
         02:D50C  A9 6B      			lda.h	#27392
         02:D50E  85 F1      			sta.h	_di
15117                        		__farptr	_tiles_SPR_COIN_1, _bp_bank, _bp
         02:D510  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COIN_1))
         02:D512  85 EC      			sta.l	_bp
         02:D514  A9 60      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COIN_1))
         02:D516  85 ED      			sta.h	_bp
         02:D518  A9 14      			lda	#bank(_tiles_SPR_COIN_1)
         02:D51A  85 02      			sta	_bp_bank
15118                        		__st.wmiq	64, _ax
         02:D51C  A9 40      			lda.l	#64
         02:D51E  85 F8      			sta.l	_ax
         02:D520  64 F9      			stz.h	_ax
15119                        		 _sgx_load_vram.3
         02:D522  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D524  20 4F FF   			call	load_vram_x
15120                        	
15121                        		.dbg	line,	"include\init.c", 236; sgx_load_vram(COIN_5_VRAM_ADR, tiles_SPR_COIN_5 , TILES_4);
15122                        		__st.wmiq	27456, _di
         02:D527  A9 40      			lda.l	#27456
         02:D529  85 F0      			sta.l	_di
         02:D52B  A9 6B      			lda.h	#27456
         02:D52D  85 F1      			sta.h	_di
15123                        		__farptr	_tiles_SPR_COIN_5, _bp_bank, _bp
         02:D52F  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COIN_5))
         02:D531  85 EC      			sta.l	_bp
         02:D533  A9 60      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COIN_5))
         02:D535  85 ED      			sta.h	_bp
         02:D537  A9 14      			lda	#bank(_tiles_SPR_COIN_5)
         02:D539  85 02      			sta	_bp_bank
15124                        		__st.wmiq	64, _ax
         02:D53B  A9 40      			lda.l	#64
         02:D53D  85 F8      			sta.l	_ax
         02:D53F  64 F9      			stz.h	_ax
15125                        		 _sgx_load_vram.3
         02:D541  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D543  20 4F FF   			call	load_vram_x
15126                        	
15127                        		.dbg	line,	"include\init.c", 237; sgx_load_vram(COIN_10_VRAM_ADR, tiles_SPR_COIN_10 , TILES_4);
15128                        		__st.wmiq	27520, _di
         02:D546  A9 80      			lda.l	#27520
         02:D548  85 F0      			sta.l	_di
         02:D54A  A9 6B      			lda.h	#27520
         02:D54C  85 F1      			sta.h	_di
15129                        		__farptr	_tiles_SPR_COIN_10, _bp_bank, _bp
         02:D54E  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COIN_10))
         02:D550  85 EC      			sta.l	_bp
         02:D552  A9 61      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COIN_10))
         02:D554  85 ED      			sta.h	_bp
         02:D556  A9 14      			lda	#bank(_tiles_SPR_COIN_10)
         02:D558  85 02      			sta	_bp_bank
15130                        		__st.wmiq	64, _ax
         02:D55A  A9 40      			lda.l	#64
         02:D55C  85 F8      			sta.l	_ax
         02:D55E  64 F9      			stz.h	_ax
15131                        		 _sgx_load_vram.3
         02:D560  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D562  20 4F FF   			call	load_vram_x
15132                        	
15133                        		.dbg	line,	"include\init.c", 238; sgx_load_vram(COIN_50_VRAM_ADR, tiles_SPR_COIN_50 , TILES_4);
15134                        		__st.wmiq	27584, _di
         02:D565  A9 C0      			lda.l	#27584
         02:D567  85 F0      			sta.l	_di
         02:D569  A9 6B      			lda.h	#27584
         02:D56B  85 F1      			sta.h	_di
15135                        		__farptr	_tiles_SPR_COIN_50, _bp_bank, _bp
         02:D56D  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COIN_50))
         02:D56F  85 EC      			sta.l	_bp
         02:D571  A9 61      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COIN_50))
         02:D573  85 ED      			sta.h	_bp
         02:D575  A9 14      			lda	#bank(_tiles_SPR_COIN_50)
         02:D577  85 02      			sta	_bp_bank
15136                        		__st.wmiq	64, _ax
         02:D579  A9 40      			lda.l	#64
         02:D57B  85 F8      			sta.l	_ax
         02:D57D  64 F9      			stz.h	_ax
15137                        		 _sgx_load_vram.3
         02:D57F  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D581  20 4F FF   			call	load_vram_x
15138                        	
15139                        		.dbg	line,	"include\init.c", 239; sgx_load_vram(COIN_100_VRAM_ADR, tiles_SPR_COIN_100 , TILES_4);
15140                        		__st.wmiq	27648, _di
         02:D584  64 F0      			stz.l	_di
         02:D586  A9 6C      			lda.h	#27648
         02:D588  85 F1      			sta.h	_di
15141                        		__farptr	_tiles_SPR_COIN_100, _bp_bank, _bp
         02:D58A  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COIN_100))
         02:D58C  85 EC      			sta.l	_bp
         02:D58E  A9 62      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COIN_100))
         02:D590  85 ED      			sta.h	_bp
         02:D592  A9 14      			lda	#bank(_tiles_SPR_COIN_100)
         02:D594  85 02      			sta	_bp_bank
15142                        		__st.wmiq	64, _ax
         02:D596  A9 40      			lda.l	#64
         02:D598  85 F8      			sta.l	_ax
         02:D59A  64 F9      			stz.h	_ax
15143                        		 _sgx_load_vram.3
         02:D59C  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D59E  20 4F FF   			call	load_vram_x
15144                        	
15145                        		.dbg	line,	"include\init.c", 240; sgx_load_vram(COIN_500_VRAM_ADR, tiles_SPR_COIN_500 , TILES_4);
15146                        		__st.wmiq	27712, _di
         02:D5A1  A9 40      			lda.l	#27712
         02:D5A3  85 F0      			sta.l	_di
         02:D5A5  A9 6C      			lda.h	#27712
         02:D5A7  85 F1      			sta.h	_di
15147                        		__farptr	_tiles_SPR_COIN_500, _bp_bank, _bp
         02:D5A9  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COIN_500))
         02:D5AB  85 EC      			sta.l	_bp
         02:D5AD  A9 62      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COIN_500))
         02:D5AF  85 ED      			sta.h	_bp
         02:D5B1  A9 14      			lda	#bank(_tiles_SPR_COIN_500)
         02:D5B3  85 02      			sta	_bp_bank
15148                        		__st.wmiq	64, _ax
         02:D5B5  A9 40      			lda.l	#64
         02:D5B7  85 F8      			sta.l	_ax
         02:D5B9  64 F9      			stz.h	_ax
15149                        		 _sgx_load_vram.3
         02:D5BB  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D5BD  20 4F FF   			call	load_vram_x
15150                        	
15151                        		.dbg	line,	"include\init.c", 241; sgx_load_vram(COIN_1000_VRAM_ADR, tiles_SPR_COIN_1000 , TILES_4);
15152                        		__st.wmiq	27776, _di
         02:D5C0  A9 80      			lda.l	#27776
         02:D5C2  85 F0      			sta.l	_di
         02:D5C4  A9 6C      			lda.h	#27776
         02:D5C6  85 F1      			sta.h	_di
15153                        		__farptr	_tiles_SPR_COIN_1000, _bp_bank, _bp
         02:D5C8  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COIN_1000))
         02:D5CA  85 EC      			sta.l	_bp
         02:D5CC  A9 63      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COIN_1000))
         02:D5CE  85 ED      			sta.h	_bp
         02:D5D0  A9 14      			lda	#bank(_tiles_SPR_COIN_1000)
         02:D5D2  85 02      			sta	_bp_bank
15154                        		__st.wmiq	64, _ax
         02:D5D4  A9 40      			lda.l	#64
         02:D5D6  85 F8      			sta.l	_ax
         02:D5D8  64 F9      			stz.h	_ax
15155                        		 _sgx_load_vram.3
         02:D5DA  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D5DC  20 4F FF   			call	load_vram_x
15156                        	
15157                        		.dbg	line,	"include\init.c", 242; sgx_load_vram(STAR_VRAM_ADR, tiles_SPR_STAR , TILES_4);
15158                        		__st.wmiq	27840, _di
         02:D5DF  A9 C0      			lda.l	#27840
         02:D5E1  85 F0      			sta.l	_di
         02:D5E3  A9 6C      			lda.h	#27840
         02:D5E5  85 F1      			sta.h	_di
15159                        		__farptr	_tiles_SPR_STAR, _bp_bank, _bp
         02:D5E7  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_STAR))
         02:D5E9  85 EC      			sta.l	_bp
         02:D5EB  A9 6B      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_STAR))
         02:D5ED  85 ED      			sta.h	_bp
         02:D5EF  A9 14      			lda	#bank(_tiles_SPR_STAR)
         02:D5F1  85 02      			sta	_bp_bank
15160                        		__st.wmiq	64, _ax
         02:D5F3  A9 40      			lda.l	#64
         02:D5F5  85 F8      			sta.l	_ax
         02:D5F7  64 F9      			stz.h	_ax
15161                        		 _sgx_load_vram.3
         02:D5F9  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D5FB  20 4F FF   			call	load_vram_x
15162                        	
15163                        		.dbg	line,	"include\init.c", 243; sgx_load_vram(OCTOPUS_VRAM_ADR, tiles_SPR_OCTOPUS , TILES_4);
15164                        		__st.wmiq	27904, _di
         02:D5FE  64 F0      			stz.l	_di
         02:D600  A9 6D      			lda.h	#27904
         02:D602  85 F1      			sta.h	_di
15165                        		__farptr	_tiles_SPR_OCTOPUS, _bp_bank, _bp
         02:D604  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_OCTOPUS))
         02:D606  85 EC      			sta.l	_bp
         02:D608  A9 66      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_OCTOPUS))
         02:D60A  85 ED      			sta.h	_bp
         02:D60C  A9 14      			lda	#bank(_tiles_SPR_OCTOPUS)
         02:D60E  85 02      			sta	_bp_bank
15166                        		__st.wmiq	64, _ax
         02:D610  A9 40      			lda.l	#64
         02:D612  85 F8      			sta.l	_ax
         02:D614  64 F9      			stz.h	_ax
15167                        		 _sgx_load_vram.3
         02:D616  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D618  20 4F FF   			call	load_vram_x
15168                        	
15169                        		.dbg	line,	"include\init.c", 244; sgx_load_vram(FRUIT_VRAM_ADR, tiles_SPR_FRUIT , TILES_4);
15170                        		__st.wmiq	27968, _di
         02:D61B  A9 40      			lda.l	#27968
         02:D61D  85 F0      			sta.l	_di
         02:D61F  A9 6D      			lda.h	#27968
         02:D621  85 F1      			sta.h	_di
15171                        		__farptr	_tiles_SPR_FRUIT, _bp_bank, _bp
         02:D623  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_FRUIT))
         02:D625  85 EC      			sta.l	_bp
         02:D627  A9 63      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_FRUIT))
         02:D629  85 ED      			sta.h	_bp
         02:D62B  A9 14      			lda	#bank(_tiles_SPR_FRUIT)
         02:D62D  85 02      			sta	_bp_bank
15172                        		__st.wmiq	64, _ax
         02:D62F  A9 40      			lda.l	#64
         02:D631  85 F8      			sta.l	_ax
         02:D633  64 F9      			stz.h	_ax
15173                        		 _sgx_load_vram.3
         02:D635  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D637  20 4F FF   			call	load_vram_x
15174                        	
15175                        		.dbg	line,	"include\init.c", 245; sgx_load_vram(BARREL_VRAM_ADR, tiles_SPR_BARREL , TILES_4);
15176                        		__st.wmiq	28032, _di
         02:D63A  A9 80      			lda.l	#28032
         02:D63C  85 F0      			sta.l	_di
         02:D63E  A9 6D      			lda.h	#28032
         02:D640  85 F1      			sta.h	_di
15177                        		__farptr	_tiles_SPR_BARREL, _bp_bank, _bp
         02:D642  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_BARREL))
         02:D644  85 EC      			sta.l	_bp
         02:D646  A9 73      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_BARREL))
         02:D648  85 ED      			sta.h	_bp
         02:D64A  A9 13      			lda	#bank(_tiles_SPR_BARREL)
         02:D64C  85 02      			sta	_bp_bank
15178                        		__st.wmiq	64, _ax
         02:D64E  A9 40      			lda.l	#64
         02:D650  85 F8      			sta.l	_ax
         02:D652  64 F9      			stz.h	_ax
15179                        		 _sgx_load_vram.3
         02:D654  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D656  20 4F FF   			call	load_vram_x
15180                        	
15181                        		.dbg	line,	"include\init.c", 246; sgx_load_vram(HOURGLASS_VRAM_ADR, tiles_SPR_HOURGLASS , TILES_4);
15182                        		__st.wmiq	28096, _di
         02:D659  A9 C0      			lda.l	#28096
         02:D65B  85 F0      			sta.l	_di
         02:D65D  A9 6D      			lda.h	#28096
         02:D65F  85 F1      			sta.h	_di
15183                        		__farptr	_tiles_SPR_HOURGLASS, _bp_bank, _bp
         02:D661  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_HOURGLASS))
         02:D663  85 EC      			sta.l	_bp
         02:D665  A9 65      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_HOURGLASS))
         02:D667  85 ED      			sta.h	_bp
         02:D669  A9 14      			lda	#bank(_tiles_SPR_HOURGLASS)
         02:D66B  85 02      			sta	_bp_bank
15184                        		__st.wmiq	64, _ax
         02:D66D  A9 40      			lda.l	#64
         02:D66F  85 F8      			sta.l	_ax
         02:D671  64 F9      			stz.h	_ax
15185                        		 _sgx_load_vram.3
         02:D673  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D675  20 4F FF   			call	load_vram_x
15186                        	
15187                        		.dbg	line,	"include\init.c", 247; sgx_load_vram(BAMBOO_VRAM_ADR, tiles_SPR_BAMBOO , TILES_4);
15188                        		__st.wmiq	28160, _di
         02:D678  64 F0      			stz.l	_di
         02:D67A  A9 6E      			lda.h	#28160
         02:D67C  85 F1      			sta.h	_di
15189                        		__farptr	_tiles_SPR_BAMBOO, _bp_bank, _bp
         02:D67E  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_BAMBOO))
         02:D680  85 EC      			sta.l	_bp
         02:D682  A9 6B      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_BAMBOO))
         02:D684  85 ED      			sta.h	_bp
         02:D686  A9 14      			lda	#bank(_tiles_SPR_BAMBOO)
         02:D688  85 02      			sta	_bp_bank
15190                        		__st.wmiq	64, _ax
         02:D68A  A9 40      			lda.l	#64
         02:D68C  85 F8      			sta.l	_ax
         02:D68E  64 F9      			stz.h	_ax
15191                        		 _sgx_load_vram.3
         02:D690  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D692  20 4F FF   			call	load_vram_x
15192                        	
15193                        		.dbg	line,	"include\init.c", 248; sgx_load_vram(YASHICHI_VRAM_ADR, tiles_SPR_YASHICHI , TILES_4);
15194                        		__st.wmiq	28224, _di
         02:D695  A9 40      			lda.l	#28224
         02:D697  85 F0      			sta.l	_di
         02:D699  A9 6E      			lda.h	#28224
         02:D69B  85 F1      			sta.h	_di
15195                        		__farptr	_tiles_SPR_YASHICHI, _bp_bank, _bp
         02:D69D  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_YASHICHI))
         02:D69F  85 EC      			sta.l	_bp
         02:D6A1  A9 6C      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_YASHICHI))
         02:D6A3  85 ED      			sta.h	_bp
         02:D6A5  A9 14      			lda	#bank(_tiles_SPR_YASHICHI)
         02:D6A7  85 02      			sta	_bp_bank
15196                        		__st.wmiq	64, _ax
         02:D6A9  A9 40      			lda.l	#64
         02:D6AB  85 F8      			sta.l	_ax
         02:D6AD  64 F9      			stz.h	_ax
15197                        		 _sgx_load_vram.3
         02:D6AF  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D6B1  20 4F FF   			call	load_vram_x
15198                        	
15199                        		.dbg	line,	"include\init.c", 249; sgx_load_vram(ELEPHANT_VRAM_ADR, tiles_SPR_ELEPHANT , TILES_4);
15200                        		__st.wmiq	28288, _di
         02:D6B4  A9 80      			lda.l	#28288
         02:D6B6  85 F0      			sta.l	_di
         02:D6B8  A9 6E      			lda.h	#28288
         02:D6BA  85 F1      			sta.h	_di
15201                        		__farptr	_tiles_SPR_ELEPHANT, _bp_bank, _bp
         02:D6BC  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_ELEPHANT))
         02:D6BE  85 EC      			sta.l	_bp
         02:D6C0  A9 6C      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_ELEPHANT))
         02:D6C2  85 ED      			sta.h	_bp
         02:D6C4  A9 14      			lda	#bank(_tiles_SPR_ELEPHANT)
         02:D6C6  85 02      			sta	_bp_bank
15202                        		__st.wmiq	64, _ax
         02:D6C8  A9 40      			lda.l	#64
         02:D6CA  85 F8      			sta.l	_ax
         02:D6CC  64 F9      			stz.h	_ax
15203                        		 _sgx_load_vram.3
         02:D6CE  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D6D0  20 4F FF   			call	load_vram_x
15204                        	
15205                        		.dbg	line,	"include\init.c", 250; sgx_load_vram(DRAGONFLY_VRAM_ADR, tiles_SPR_DRAGONFLY , TILES_4);
15206                        		__st.wmiq	28352, _di
         02:D6D3  A9 C0      			lda.l	#28352
         02:D6D5  85 F0      			sta.l	_di
         02:D6D7  A9 6E      			lda.h	#28352
         02:D6D9  85 F1      			sta.h	_di
15207                        		__farptr	_tiles_SPR_DRAGONFLY, _bp_bank, _bp
         02:D6DB  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_DRAGONFLY))
         02:D6DD  85 EC      			sta.l	_bp
         02:D6DF  A9 6D      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_DRAGONFLY))
         02:D6E1  85 ED      			sta.h	_bp
         02:D6E3  A9 14      			lda	#bank(_tiles_SPR_DRAGONFLY)
         02:D6E5  85 02      			sta	_bp_bank
15208                        		__st.wmiq	64, _ax
         02:D6E7  A9 40      			lda.l	#64
         02:D6E9  85 F8      			sta.l	_ax
         02:D6EB  64 F9      			stz.h	_ax
15209                        		 _sgx_load_vram.3
         02:D6ED  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D6EF  20 4F FF   			call	load_vram_x
15210                        	
15211                        		.dbg	line,	"include\init.c", 251; sgx_load_vram(COW_VRAM_ADR, tiles_SPR_COW , TILES_4);
15212                        		__st.wmiq	28416, _di
         02:D6F2  64 F0      			stz.l	_di
         02:D6F4  A9 6F      			lda.h	#28416
         02:D6F6  85 F1      			sta.h	_di
15213                        		__farptr	_tiles_SPR_COW, _bp_bank, _bp
         02:D6F8  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COW))
         02:D6FA  85 EC      			sta.l	_bp
         02:D6FC  A9 6D      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COW))
         02:D6FE  85 ED      			sta.h	_bp
         02:D700  A9 14      			lda	#bank(_tiles_SPR_COW)
         02:D702  85 02      			sta	_bp_bank
15214                        		__st.wmiq	64, _ax
         02:D704  A9 40      			lda.l	#64
         02:D706  85 F8      			sta.l	_ax
         02:D708  64 F9      			stz.h	_ax
15215                        		 _sgx_load_vram.3
         02:D70A  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D70C  20 4F FF   			call	load_vram_x
15216                        	
15217                        		.dbg	line,	"include\init.c", 252; sgx_load_vram(MOBICHAN_VRAM_ADR, tiles_SPR_MOBICHAN , TILES_4);
15218                        		__st.wmiq	28480, _di
         02:D70F  A9 40      			lda.l	#28480
         02:D711  85 F0      			sta.l	_di
         02:D713  A9 6F      			lda.h	#28480
         02:D715  85 F1      			sta.h	_di
15219                        		__farptr	_tiles_SPR_MOBICHAN, _bp_bank, _bp
         02:D717  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_MOBICHAN))
         02:D719  85 EC      			sta.l	_bp
         02:D71B  A9 6E      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_MOBICHAN))
         02:D71D  85 ED      			sta.h	_bp
         02:D71F  A9 14      			lda	#bank(_tiles_SPR_MOBICHAN)
         02:D721  85 02      			sta	_bp_bank
15220                        		__st.wmiq	64, _ax
         02:D723  A9 40      			lda.l	#64
         02:D725  85 F8      			sta.l	_ax
         02:D727  64 F9      			stz.h	_ax
15221                        		 _sgx_load_vram.3
         02:D729  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D72B  20 4F FF   			call	load_vram_x
15222                        	
15223                        		.dbg	line,	"include\init.c", 253; }
15224    02:D72E             	.LL652:
15225                        		__return	0
         02:D72E  4C EF FF   			jmp	leave_proc
15226                        		.dbg	clear
15227                        		.endp
15228                        		.pceas
15229                        	
15230                        		.dbg	line,	"include\init.c", 256; void load_CHEST_TILES()
15231                        		.dbg	line,	"include\init.c", 257; {
15232                        	;***********************
15233                        	;***********************
15234                        	
15235                        		.hucc
15236    18:D325             		.proc		_load_CHEST_TILES
15237                        		__enter		_load_CHEST_TILES
15238                        	
15239                        		.dbg	line,	"include\init.c", 258; sgx_load_vram(CHEST_VRAM_ADR, tiles_SPR_CHEST , SIZEOF(tiles_SPR_CHEST) >> 1);
15240                        		__st.wmiq	28672, _di
         18:D325  64 F0      			stz.l	_di
         18:D327  A9 70      			lda.h	#28672
         18:D329  85 F1      			sta.h	_di
15241                        		__farptr	_tiles_SPR_CHEST, _bp_bank, _bp
         18:D32B  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_CHEST))
         18:D32D  85 EC      			sta.l	_bp
         18:D32F  A9 74      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_CHEST))
         18:D331  85 ED      			sta.h	_bp
         18:D333  A9 13      			lda	#bank(_tiles_SPR_CHEST)
         18:D335  85 02      			sta	_bp_bank
15242                        		__ld.wi		___sizeof__tiles_SPR_CHEST
         18:D337  A9 00      			lda.l	#___sizeof__tiles_SPR_CHEST
         18:D339  A0 0C      			ldy.h	#___sizeof__tiles_SPR_CHEST
15243                        		__lsr.wi	1
         18:D33B  42         			say
         18:D33C  4A         			lsr	a
         18:D33D  42         			say
         18:D33E  6A         			ror	a
15244                        		__st.wmq	_ax
         18:D33F  85 F8      			sta.l	_ax
         18:D341  84 F9      			sty.h	_ax
15245                        		 _sgx_load_vram.3
         18:D343  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         18:D345  20 4F FF   			call	load_vram_x
15246                        	
15247                        		.dbg	line,	"include\init.c", 259; }
15248    18:D348             	.LL653:
15249                        		__return	0
         18:D348  4C EF FF   			jmp	leave_proc
15250                        		.dbg	clear
15251                        		.endp
15252                        		.pceas
15253                        	
15254                        		.dbg	line,	"include\init.c", 262; void load_NPC_TILES()
15255                        		.dbg	line,	"include\init.c", 263; {
15256                        	;***********************
15257                        	;***********************
15258                        	
15259                        		.hucc
15260    18:D34B             		.proc		_load_NPC_TILES
15261                        		__enter		_load_NPC_TILES
15262                        	
15263                        		.dbg	line,	"include\init.c", 264; sgx_load_vram(NPC_VRAM_ADR, tiles_SPR_NPC , SIZEOF(tiles_SPR_NPC) >> 1);
15264                        		__st.wmiq	30208, _di
         18:D34B  64 F0      			stz.l	_di
         18:D34D  A9 76      			lda.h	#30208
         18:D34F  85 F1      			sta.h	_di
15265                        		__farptr	_tiles_SPR_NPC, _bp_bank, _bp
         18:D351  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_NPC))
         18:D353  85 EC      			sta.l	_bp
         18:D355  A9 72      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_NPC))
         18:D357  85 ED      			sta.h	_bp
         18:D359  A9 14      			lda	#bank(_tiles_SPR_NPC)
         18:D35B  85 02      			sta	_bp_bank
15266                        		__ld.wi		___sizeof__tiles_SPR_NPC
         18:D35D  A9 00      			lda.l	#___sizeof__tiles_SPR_NPC
         18:D35F  A0 0C      			ldy.h	#___sizeof__tiles_SPR_NPC
15267                        		__lsr.wi	1
         18:D361  42         			say
         18:D362  4A         			lsr	a
         18:D363  42         			say
         18:D364  6A         			ror	a
15268                        		__st.wmq	_ax
         18:D365  85 F8      			sta.l	_ax
         18:D367  84 F9      			sty.h	_ax
15269                        		 _sgx_load_vram.3
         18:D369  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         18:D36B  20 4F FF   			call	load_vram_x
15270                        	
15271                        		.dbg	line,	"include\init.c", 265; }
15272    18:D36E             	.LL654:
15273                        		__return	0
         18:D36E  4C EF FF   			jmp	leave_proc
15274                        		.dbg	clear
15275                        		.endp
15276                        		.pceas
15277                        	
15278                        		.dbg	line,	"include\init.c", 268; void init_OBJECT_LV1()
15279                        		.dbg	line,	"include\init.c", 269; {
15280                        	;***********************
15281                        	;***********************
15282                        	
15283                        		.hucc
15284    18:C6E2             		.proc		_init_OBJECT_LV1
15285                        		__enter		_init_OBJECT_LV1
15286                        	
15287                        		.dbg	line,	"include\init.c", 270; signed char i;
15288                        	
15289                        		.dbg	line,	"include\init.c", 272; for(i=0 ; i<level_object_number ; i++)
15290                        		__st.umiq	0, __init_OBJECT_LV1_end - 1  /* i */
         18:C6E2  9C 52 26   			stz	__init_OBJECT_LV1_end - 1
15291    18:C6E5             	.LL656:
15292                        		__ld.bm		__init_OBJECT_LV1_end - 1  /* i */
         18:C6E5  AD 52 26   			lda	__init_OBJECT_LV1_end - 1
         18:C6E8  C2         			cly
         18:C6E9  10 01      			bpl	!+
         18:C6EB  88         			dey
         18:C6EC             	!:
15293                        		__slt_w.um	_level_object_number
         18:C6EC  CD 36 23   			cmp	_level_object_number		; Subtract memory from Y:A.
         18:C6EF  98         			tya
         18:C6F0  E9 00      			sbc	#0
         18:C6F2  50 02      			bvc	!+
         18:C6F4  49 80      			eor	#$80		; -ve if Y:A < memory (signed).
         18:C6F6  0A         	!:		asl	a
15294                        		__btrue		.LL658
         18:C6F7  B0 08      			bcs	.LL658
15295                        		__bra		.LL659
         18:C6F9  4C 1D C8   			bra	.LL659
15296    18:C6FC             	.LL657:
15297                        		__inc.umq	__init_OBJECT_LV1_end - 1  /* i */
         18:C6FC  EE 52 26   			inc	__init_OBJECT_LV1_end - 1
15298                        		__bra		.LL656
         18:C6FF  80 E4      			bra	.LL656
15299    18:C701             	.LL658:
15300                        	
15301                        		.dbg	line,	"include\init.c", 273; {
15302                        	
15303                        		.dbg	line,	"include\init.c", 274; // SET OBJECT PROPERTIES //
15304                        	
15305                        		.dbg	line,	"include\init.c", 275; list_object_type[i] = TABLE_OBJECT_TYPE_LV1[i];
15306                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         18:C701  AE 52 26   			ldx	__init_OBJECT_LV1_end - 1
15307                        		__ld.uax	_TABLE_OBJECT_TYPE_LV1
         18:C704  BD 9C 60   			lda	_TABLE_OBJECT_TYPE_LV1, x
         18:C707  C2         			cly
15308                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         18:C708  AE 52 26   			ldx	__init_OBJECT_LV1_end - 1
15309                        		__st.uaxq	_list_object_type
         18:C70B  9D 38 23   			sta	_list_object_type, x
15310                        	
15311                        		.dbg	line,	"include\init.c", 276; list_object_x_pos_ref[i] = TABLE_OBJECT_X_POS_REF_LV1[i];
15312                        		__ld2x.bmq	__init_OBJECT_LV1_end - 1  /* i */
         18:C70E  AD 52 26   			lda	__init_OBJECT_LV1_end - 1
         18:C711  0A         			asl	a
         18:C712  AA         			tax
15313                        		__ld.wax	_TABLE_OBJECT_X_POS_REF_LV1
         18:C713  BD B3 60   			lda.l	_TABLE_OBJECT_X_POS_REF_LV1, x
         18:C716  BC B4 60   			ldy.h	_TABLE_OBJECT_X_POS_REF_LV1, x
15314                        		__ld2x.bm	__init_OBJECT_LV1_end - 1  /* i */
         18:C719  AA         			tax
         18:C71A  AD 52 26   			lda	__init_OBJECT_LV1_end - 1
         18:C71D  0A         			asl	a
         18:C71E  22         			sax
15315                        		__st.waxq	_list_object_x_pos_ref
         18:C71F  9D 48 25   			sta.l	_list_object_x_pos_ref, x
         18:C722  98         			tya
         18:C723  9D 49 25   			sta.h	_list_object_x_pos_ref, x
15316                        	
15317                        		.dbg	line,	"include\init.c", 277; list_object_y_pos_ref[i] = TABLE_OBJECT_Y_POS_REF_LV1[i];
15318                        		__ld2x.bmq	__init_OBJECT_LV1_end - 1  /* i */
         18:C726  AD 52 26   			lda	__init_OBJECT_LV1_end - 1
         18:C729  0A         			asl	a
         18:C72A  AA         			tax
15319                        		__ld.wax	_TABLE_OBJECT_Y_POS_REF_LV1
         18:C72B  BD E1 60   			lda.l	_TABLE_OBJECT_Y_POS_REF_LV1, x
         18:C72E  BC E2 60   			ldy.h	_TABLE_OBJECT_Y_POS_REF_LV1, x
15320                        		__ld2x.bm	__init_OBJECT_LV1_end - 1  /* i */
         18:C731  AA         			tax
         18:C732  AD 52 26   			lda	__init_OBJECT_LV1_end - 1
         18:C735  0A         			asl	a
         18:C736  22         			sax
15321                        		__st.waxq	_list_object_y_pos_ref
         18:C737  9D 7A 25   			sta.l	_list_object_y_pos_ref, x
         18:C73A  98         			tya
         18:C73B  9D 7B 25   			sta.h	_list_object_y_pos_ref, x
15322                        	
15323                        		.dbg	line,	"include\init.c", 278; list_object_x_pos[i] = -16;
15324                        		__ld2x.bmq	__init_OBJECT_LV1_end - 1  /* i */
         18:C73E  AD 52 26   			lda	__init_OBJECT_LV1_end - 1
         18:C741  0A         			asl	a
         18:C742  AA         			tax
15325                        		__st.waxiq	-16, _list_object_x_pos
         18:C743  A9 F0      			lda.l	#-16
         18:C745  9D E4 24   			sta.l	_list_object_x_pos, x
         18:C748  A9 FF      			lda.h	#-16
         18:C74A  9D E5 24   			sta.h	_list_object_x_pos, x
15326                        	
15327                        		.dbg	line,	"include\init.c", 279; list_object_y_pos[i] = -16;
15328                        		__ld2x.bmq	__init_OBJECT_LV1_end - 1  /* i */
         18:C74D  AD 52 26   			lda	__init_OBJECT_LV1_end - 1
         18:C750  0A         			asl	a
         18:C751  AA         			tax
15329                        		__st.waxiq	-16, _list_object_y_pos
         18:C752  A9 F0      			lda.l	#-16
         18:C754  9D 16 25   			sta.l	_list_object_y_pos, x
         18:C757  A9 FF      			lda.h	#-16
         18:C759  9D 17 25   			sta.h	_list_object_y_pos, x
15330                        	
15331                        		.dbg	line,	"include\init.c", 280; 
15332                        	
15333                        		.dbg	line,	"include\init.c", 281; // IF THE PLAYERS ENTERS THE LEVEL FOR THE 1RST TIME //
15334                        	
15335                        		.dbg	line,	"include\init.c", 282; // ALL OBJECTS ARE ACTIVE //
15336                        	
15337                        		.dbg	line,	"include\init.c", 283; if(respawn == FALSE)
15338                        		__not.um	_respawn
         18:C75C  AD 16 23   			lda	_respawn
         18:C75F  18         			clc
         18:C760  D0 01      			bne	!+
         18:C762  38         			sec
         18:C763             	!:
15339                        		__bfalse	.LL660
         18:C763  90 06      			bcc	.LL660
15340                        	
15341                        		.dbg	line,	"include\init.c", 284; {
15342                        	
15343                        		.dbg	line,	"include\init.c", 285; list_object_state[i] = STATE_ACTIVE;
15344                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         18:C765  AE 52 26   			ldx	__init_OBJECT_LV1_end - 1
15345                        		__st.uaxiq	0, _list_object_state
         18:C768  9E 51 23   			stz	_list_object_state, x
15346                        	
15347                        		.dbg	line,	"include\init.c", 286; }
15348                        	
15349                        		.dbg	line,	"include\init.c", 289; // SET OBJECT SPRITE //
15350                        	
15351                        		.dbg	line,	"include\init.c", 290; sgx_spr_set(i + object_start_index);
15352    18:C76B             	.LL660:
15353                        		__ld.bm		__init_OBJECT_LV1_end - 1  /* i */
         18:C76B  AD 52 26   			lda	__init_OBJECT_LV1_end - 1
         18:C76E  C2         			cly
         18:C76F  10 01      			bpl	!+
         18:C771  88         			dey
         18:C772             	!:
15354                        		__add.um	_object_start_index
         18:C772  18         			clc
         18:C773  6D 35 23   			adc	_object_start_index
         18:C776  90 01      			bcc	!+
         18:C778  C8         			iny
         18:C779             	!:
15355                        		__call		_sgx_spr_set.1
         18:C779  20 8A E8   			call	_sgx_spr_set.1
15356                        	
15357                        		.dbg	line,	"include\init.c", 291; sgx_spr_x(list_object_x_pos[i]);
15358                        		__ld2x.bmq	__init_OBJECT_LV1_end - 1  /* i */
         18:C77C  AD 52 26   			lda	__init_OBJECT_LV1_end - 1
         18:C77F  0A         			asl	a
         18:C780  AA         			tax
15359                        		__ld.wax	_list_object_x_pos
         18:C781  BD E4 24   			lda.l	_list_object_x_pos, x
         18:C784  BC E5 24   			ldy.h	_list_object_x_pos, x
15360                        		__call		_sgx_spr_x.1
         18:C787  20 B7 E8   			call	_sgx_spr_x.1
15361                        	
15362                        		.dbg	line,	"include\init.c", 292; sgx_spr_y(list_object_y_pos[i]);
15363                        		__ld2x.bmq	__init_OBJECT_LV1_end - 1  /* i */
         18:C78A  AD 52 26   			lda	__init_OBJECT_LV1_end - 1
         18:C78D  0A         			asl	a
         18:C78E  AA         			tax
15364                        		__ld.wax	_list_object_y_pos
         18:C78F  BD 16 25   			lda.l	_list_object_y_pos, x
         18:C792  BC 17 25   			ldy.h	_list_object_y_pos, x
15365                        		__call		_sgx_spr_y.1
         18:C795  20 C6 E8   			call	_sgx_spr_y.1
15366                        	
15367                        		.dbg	line,	"include\init.c", 293; sgx_spr_pri(TRUE);
15368                        		__ld.uiq	1
         18:C798  A9 01      			lda	#1
15369                        		__call		_sgx_spr_pri.1
         18:C79A  20 09 E9   			call	_sgx_spr_pri.1
15370                        	
15371                        		.dbg	line,	"include\init.c", 296; if(list_object_type[i] == TYPE_HOURGLASS)
15372                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         18:C79D  AE 52 26   			ldx	__init_OBJECT_LV1_end - 1
15373                        		__not.uax	_list_object_type
         18:C7A0  BD 38 23   			lda	_list_object_type, x
         18:C7A3  18         			clc
         18:C7A4  D0 01      			bne	!+
         18:C7A6  38         			sec
         18:C7A7             	!:
15374                        		__bfalse	.LL661
         18:C7A7  90 1D      			bcc	.LL661
15375                        	
15376                        		.dbg	line,	"include\init.c", 297; {
15377                        	
15378                        		.dbg	line,	"include\init.c", 298; list_object_energy[i] = 0;
15379                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         18:C7A9  AE 52 26   			ldx	__init_OBJECT_LV1_end - 1
15380                        		__st.uaxiq	0, _list_object_energy
         18:C7AC  9E 6A 23   			stz	_list_object_energy, x
15381                        	
15382                        		.dbg	line,	"include\init.c", 299; sgx_spr_pal(18);
15383                        		__ld.uiq	18
         18:C7AF  A9 12      			lda	#18
15384                        		__call		_sgx_spr_pal.1
         18:C7B1  20 FA E8   			call	_sgx_spr_pal.1
15385                        	
15386                        		.dbg	line,	"include\init.c", 300; sgx_spr_pattern(HOURGLASS_VRAM_ADR);
15387                        		__ld.wi		28096
         18:C7B4  A9 C0      			lda.l	#28096
         18:C7B6  A0 6D      			ldy.h	#28096
15388                        		__call		_sgx_spr_pattern.1
         18:C7B8  20 D3 E8   			call	_sgx_spr_pattern.1
15389                        	
15390                        		.dbg	line,	"include\init.c", 301; sgx_spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_16x16);
15391                        		__st.umiq	185, _al
         18:C7BB  A9 B9      			lda.l	#185
         18:C7BD  85 F8      			sta	_al
15392                        		__ld.uiq	0
         18:C7BF  62         			cla
15393                        		__call		_sgx_spr_ctrl.2
         18:C7C0  20 E9 E8   			call	_sgx_spr_ctrl.2
15394                        	
15395                        		.dbg	line,	"include\init.c", 302; }
15396                        	
15397                        		.dbg	line,	"include\init.c", 304; else if(list_object_type[i] == TYPE_POT)
15398                        		__bra		.LL662
         18:C7C3  4C FC C6   			bra	.LL662
15399    18:C7C6             	.LL661:
15400                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         18:C7C6  AE 52 26   			ldx	__init_OBJECT_LV1_end - 1
15401                        		__ld.uaxq	_list_object_type
         18:C7C9  BD 38 23   			lda	_list_object_type, x
15402                        		__equ_b.uiq	1
         18:C7CC  C9 01      			cmp	#1
         18:C7CE  F0 01      			beq	!+
         18:C7D0  18         			clc
         18:C7D1             	!:
15403                        		__bfalse	.LL663
         18:C7D1  90 1E      			bcc	.LL663
15404                        	
15405                        		.dbg	line,	"include\init.c", 305; {
15406                        	
15407                        		.dbg	line,	"include\init.c", 306; list_object_energy[i] = 2;
15408                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         18:C7D3  AE 52 26   			ldx	__init_OBJECT_LV1_end - 1
15409                        		__st.uaxiq	2, _list_object_energy
         18:C7D6  A9 02      			lda.l	#2
         18:C7D8  9D 6A 23   			sta	_list_object_energy, x
15410                        	
15411                        		.dbg	line,	"include\init.c", 307; sgx_spr_pal(17);
15412                        		__ld.uiq	17
         18:C7DB  A9 11      			lda	#17
15413                        		__call		_sgx_spr_pal.1
         18:C7DD  20 FA E8   			call	_sgx_spr_pal.1
15414                        	
15415                        		.dbg	line,	"include\init.c", 308; sgx_spr_pattern(POT1_VRAM_ADR);
15416                        		__ld.wi		26624
         18:C7E0  62         			cla
         18:C7E1  A0 68      			ldy.h	#26624
15417                        		__call		_sgx_spr_pattern.1
         18:C7E3  20 D3 E8   			call	_sgx_spr_pattern.1
15418                        	
15419                        		.dbg	line,	"include\init.c", 309; sgx_spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_16x16);
15420                        		__st.umiq	185, _al
         18:C7E6  A9 B9      			lda.l	#185
         18:C7E8  85 F8      			sta	_al
15421                        		__ld.uiq	0
         18:C7EA  62         			cla
15422                        		__call		_sgx_spr_ctrl.2
         18:C7EB  20 E9 E8   			call	_sgx_spr_ctrl.2
15423                        	
15424                        		.dbg	line,	"include\init.c", 310; }
15425                        	
15426                        		.dbg	line,	"include\init.c", 312; else if(list_object_type[i] == TYPE_POW)
15427                        		__bra		.LL664
         18:C7EE  4C FC C6   			bra	.LL664
15428    18:C7F1             	.LL663:
15429                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         18:C7F1  AE 52 26   			ldx	__init_OBJECT_LV1_end - 1
15430                        		__ld.uaxq	_list_object_type
         18:C7F4  BD 38 23   			lda	_list_object_type, x
15431                        		__equ_b.uiq	2
         18:C7F7  C9 02      			cmp	#2
         18:C7F9  F0 01      			beq	!+
         18:C7FB  18         			clc
         18:C7FC             	!:
15432                        		__bfalse	.LL665
         18:C7FC  B0 03 4C FC			bcc	.LL665
         18:C800  C6          
15433                        	
15434                        		.dbg	line,	"include\init.c", 313; {
15435                        	
15436                        		.dbg	line,	"include\init.c", 314; list_object_energy[i] = 0;
15437                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         18:C801  AE 52 26   			ldx	__init_OBJECT_LV1_end - 1
15438                        		__st.uaxiq	0, _list_object_energy
         18:C804  9E 6A 23   			stz	_list_object_energy, x
15439                        	
15440                        		.dbg	line,	"include\init.c", 315; sgx_spr_pal(18);
15441                        		__ld.uiq	18
         18:C807  A9 12      			lda	#18
15442                        		__call		_sgx_spr_pal.1
         18:C809  20 FA E8   			call	_sgx_spr_pal.1
15443                        	
15444                        		.dbg	line,	"include\init.c", 316; sgx_spr_pattern(POW_VRAM_ADR);
15445                        		__ld.wi		27136
         18:C80C  62         			cla
         18:C80D  A0 6A      			ldy.h	#27136
15446                        		__call		_sgx_spr_pattern.1
         18:C80F  20 D3 E8   			call	_sgx_spr_pattern.1
15447                        	
15448                        		.dbg	line,	"include\init.c", 317; sgx_spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_16x16);
15449                        		__st.umiq	185, _al
         18:C812  A9 B9      			lda.l	#185
         18:C814  85 F8      			sta	_al
15450                        		__ld.uiq	0
         18:C816  62         			cla
15451                        		__call		_sgx_spr_ctrl.2
         18:C817  20 E9 E8   			call	_sgx_spr_ctrl.2
15452                        	
15453                        		.dbg	line,	"include\init.c", 318; }
15454                        	
15455                        		.dbg	line,	"include\init.c", 319; }
15456    18:C81A             	.LL665	.alias		.LL657
15457    18:C81A             	.LL664	.alias		.LL657
15458    18:C81A             	.LL662	.alias		.LL657
15459                        		__bra		.LL657
         18:C81A  4C FC C6   			bra	.LL657
15460    18:C81D             	.LL659:
15461                        	
15462                        		.dbg	line,	"include\init.c", 320; }
15463    18:C81D             	.LL655:
15464                        		__return	0
         18:C81D  4C EF FF   			jmp	leave_proc
15465                        		.dbg	clear
15466                        		.endp
15467                        		.pceas
15468                        	
15469                        		.dbg	line,	"include\init.c", 323; void init_CHEST_LV1()
15470                        		.dbg	line,	"include\init.c", 324; {
15471                        	;***********************
15472                        	;***********************
15473                        	
15474                        		.hucc
15475    18:CBE3             		.proc		_init_CHEST_LV1
15476                        		__enter		_init_CHEST_LV1
15477                        	
15478                        		.dbg	line,	"include\init.c", 325; signed char i;
15479                        	
15480                        		.dbg	line,	"include\init.c", 327; for(i=0 ; i<level_chest_number ; i++)
15481                        		__st.umiq	0, __init_CHEST_LV1_end - 1  /* i */
         18:CBE3  9C 52 26   			stz	__init_CHEST_LV1_end - 1
15482    18:CBE6             	.LL667:
15483                        		__ld.bm		__init_CHEST_LV1_end - 1  /* i */
         18:CBE6  AD 52 26   			lda	__init_CHEST_LV1_end - 1
         18:CBE9  C2         			cly
         18:CBEA  10 01      			bpl	!+
         18:CBEC  88         			dey
         18:CBED             	!:
15484                        		__slt_w.um	_level_chest_number
         18:CBED  CD A5 23   			cmp	_level_chest_number		; Subtract memory from Y:A.
         18:CBF0  98         			tya
         18:CBF1  E9 00      			sbc	#0
         18:CBF3  50 02      			bvc	!+
         18:CBF5  49 80      			eor	#$80		; -ve if Y:A < memory (signed).
         18:CBF7  0A         	!:		asl	a
15485                        		__btrue		.LL669
         18:CBF8  B0 08      			bcs	.LL669
15486                        		__bra		.LL670
         18:CBFA  4C A8 CC   			bra	.LL670
15487    18:CBFD             	.LL668:
15488                        		__inc.umq	__init_CHEST_LV1_end - 1  /* i */
         18:CBFD  EE 52 26   			inc	__init_CHEST_LV1_end - 1
15489                        		__bra		.LL667
         18:CC00  80 E4      			bra	.LL667
15490    18:CC02             	.LL669:
15491                        	
15492                        		.dbg	line,	"include\init.c", 328; {
15493                        	
15494                        		.dbg	line,	"include\init.c", 329; // SET CHEST PROPERTIES //
15495                        	
15496                        		.dbg	line,	"include\init.c", 330; list_chest_x_pos_ref[i] = TABLE_CHEST_X_POS_REF_LV1[i];
15497                        		__ld2x.bmq	__init_CHEST_LV1_end - 1  /* i */
         18:CC02  AD 52 26   			lda	__init_CHEST_LV1_end - 1
         18:CC05  0A         			asl	a
         18:CC06  AA         			tax
15498                        		__ld.wax	_TABLE_CHEST_X_POS_REF_LV1
         18:CC07  BD 0F 61   			lda.l	_TABLE_CHEST_X_POS_REF_LV1, x
         18:CC0A  BC 10 61   			ldy.h	_TABLE_CHEST_X_POS_REF_LV1, x
15499                        		__ld2x.bm	__init_CHEST_LV1_end - 1  /* i */
         18:CC0D  AA         			tax
         18:CC0E  AD 52 26   			lda	__init_CHEST_LV1_end - 1
         18:CC11  0A         			asl	a
         18:CC12  22         			sax
15500                        		__st.waxq	_list_chest_x_pos_ref
         18:CC13  9D CC 25   			sta.l	_list_chest_x_pos_ref, x
         18:CC16  98         			tya
         18:CC17  9D CD 25   			sta.h	_list_chest_x_pos_ref, x
15501                        	
15502                        		.dbg	line,	"include\init.c", 331; list_chest_y_pos_ref[i] = TABLE_CHEST_Y_POS_REF_LV1[i];
15503                        		__ld2x.bmq	__init_CHEST_LV1_end - 1  /* i */
         18:CC1A  AD 52 26   			lda	__init_CHEST_LV1_end - 1
         18:CC1D  0A         			asl	a
         18:CC1E  AA         			tax
15504                        		__ld.wax	_TABLE_CHEST_Y_POS_REF_LV1
         18:CC1F  BD 13 61   			lda.l	_TABLE_CHEST_Y_POS_REF_LV1, x
         18:CC22  BC 14 61   			ldy.h	_TABLE_CHEST_Y_POS_REF_LV1, x
15505                        		__ld2x.bm	__init_CHEST_LV1_end - 1  /* i */
         18:CC25  AA         			tax
         18:CC26  AD 52 26   			lda	__init_CHEST_LV1_end - 1
         18:CC29  0A         			asl	a
         18:CC2A  22         			sax
15506                        		__st.waxq	_list_chest_y_pos_ref
         18:CC2B  9D DC 25   			sta.l	_list_chest_y_pos_ref, x
         18:CC2E  98         			tya
         18:CC2F  9D DD 25   			sta.h	_list_chest_y_pos_ref, x
15507                        	
15508                        		.dbg	line,	"include\init.c", 332; list_chest_x_pos[i] = -32;
15509                        		__ld2x.bmq	__init_CHEST_LV1_end - 1  /* i */
         18:CC32  AD 52 26   			lda	__init_CHEST_LV1_end - 1
         18:CC35  0A         			asl	a
         18:CC36  AA         			tax
15510                        		__st.waxiq	-32, _list_chest_x_pos
         18:CC37  A9 E0      			lda.l	#-32
         18:CC39  9D AC 25   			sta.l	_list_chest_x_pos, x
         18:CC3C  A9 FF      			lda.h	#-32
         18:CC3E  9D AD 25   			sta.h	_list_chest_x_pos, x
15511                        	
15512                        		.dbg	line,	"include\init.c", 333; list_chest_y_pos[i] = -32;
15513                        		__ld2x.bmq	__init_CHEST_LV1_end - 1  /* i */
         18:CC41  AD 52 26   			lda	__init_CHEST_LV1_end - 1
         18:CC44  0A         			asl	a
         18:CC45  AA         			tax
15514                        		__st.waxiq	-32, _list_chest_y_pos
         18:CC46  A9 E0      			lda.l	#-32
         18:CC48  9D BC 25   			sta.l	_list_chest_y_pos, x
         18:CC4B  A9 FF      			lda.h	#-32
         18:CC4D  9D BD 25   			sta.h	_list_chest_y_pos, x
15515                        	
15516                        		.dbg	line,	"include\init.c", 335; if(respawn == FALSE)
15517                        		__not.um	_respawn
         18:CC50  AD 16 23   			lda	_respawn
         18:CC53  18         			clc
         18:CC54  D0 01      			bne	!+
         18:CC56  38         			sec
         18:CC57             	!:
15518                        		__bfalse	.LL671
         18:CC57  90 06      			bcc	.LL671
15519                        	
15520                        		.dbg	line,	"include\init.c", 336; {
15521                        	
15522                        		.dbg	line,	"include\init.c", 337; list_chest_state[i] = STATE_ACTIVE;
15523                        		__ldx.bmq	__init_CHEST_LV1_end - 1  /* i */
         18:CC59  AE 52 26   			ldx	__init_CHEST_LV1_end - 1
15524                        		__st.uaxiq	0, _list_chest_state
         18:CC5C  9E A7 23   			stz	_list_chest_state, x
15525                        	
15526                        		.dbg	line,	"include\init.c", 338; }
15527                        	
15528                        		.dbg	line,	"include\init.c", 341; // SET CHEST SPRITE //
15529                        	
15530                        		.dbg	line,	"include\init.c", 342; sgx_spr_set(i + chest_start_index);
15531    18:CC5F             	.LL671:
15532                        		__ld.bm		__init_CHEST_LV1_end - 1  /* i */
         18:CC5F  AD 52 26   			lda	__init_CHEST_LV1_end - 1
         18:CC62  C2         			cly
         18:CC63  10 01      			bpl	!+
         18:CC65  88         			dey
         18:CC66             	!:
15533                        		__add.um	_chest_start_index
         18:CC66  18         			clc
         18:CC67  6D A4 23   			adc	_chest_start_index
         18:CC6A  90 01      			bcc	!+
         18:CC6C  C8         			iny
         18:CC6D             	!:
15534                        		__call		_sgx_spr_set.1
         18:CC6D  20 8A E8   			call	_sgx_spr_set.1
15535                        	
15536                        		.dbg	line,	"include\init.c", 343; sgx_spr_x(list_chest_x_pos[i]);
15537                        		__ld2x.bmq	__init_CHEST_LV1_end - 1  /* i */
         18:CC70  AD 52 26   			lda	__init_CHEST_LV1_end - 1
         18:CC73  0A         			asl	a
         18:CC74  AA         			tax
15538                        		__ld.wax	_list_chest_x_pos
         18:CC75  BD AC 25   			lda.l	_list_chest_x_pos, x
         18:CC78  BC AD 25   			ldy.h	_list_chest_x_pos, x
15539                        		__call		_sgx_spr_x.1
         18:CC7B  20 B7 E8   			call	_sgx_spr_x.1
15540                        	
15541                        		.dbg	line,	"include\init.c", 344; sgx_spr_y(list_chest_y_pos[i]);
15542                        		__ld2x.bmq	__init_CHEST_LV1_end - 1  /* i */
         18:CC7E  AD 52 26   			lda	__init_CHEST_LV1_end - 1
         18:CC81  0A         			asl	a
         18:CC82  AA         			tax
15543                        		__ld.wax	_list_chest_y_pos
         18:CC83  BD BC 25   			lda.l	_list_chest_y_pos, x
         18:CC86  BC BD 25   			ldy.h	_list_chest_y_pos, x
15544                        		__call		_sgx_spr_y.1
         18:CC89  20 C6 E8   			call	_sgx_spr_y.1
15545                        	
15546                        		.dbg	line,	"include\init.c", 345; sgx_spr_pri(TRUE);
15547                        		__ld.uiq	1
         18:CC8C  A9 01      			lda	#1
15548                        		__call		_sgx_spr_pri.1
         18:CC8E  20 09 E9   			call	_sgx_spr_pri.1
15549                        	
15550                        		.dbg	line,	"include\init.c", 348; sgx_spr_pal(18);
15551                        		__ld.uiq	18
         18:CC91  A9 12      			lda	#18
15552                        		__call		_sgx_spr_pal.1
         18:CC93  20 FA E8   			call	_sgx_spr_pal.1
15553                        	
15554                        		.dbg	line,	"include\init.c", 349; sgx_spr_pattern(CHEST_VRAM_ADR);
15555                        		__ld.wi		28672
         18:CC96  62         			cla
         18:CC97  A0 70      			ldy.h	#28672
15556                        		__call		_sgx_spr_pattern.1
         18:CC99  20 D3 E8   			call	_sgx_spr_pattern.1
15557                        	
15558                        		.dbg	line,	"include\init.c", 350; sgx_spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_32x32);
15559                        		__st.umiq	185, _al
         18:CC9C  A9 B9      			lda.l	#185
         18:CC9E  85 F8      			sta	_al
15560                        		__ld.uiq	17
         18:CCA0  A9 11      			lda	#17
15561                        		__call		_sgx_spr_ctrl.2
         18:CCA2  20 E9 E8   			call	_sgx_spr_ctrl.2
15562                        	
15563                        		.dbg	line,	"include\init.c", 351; }
15564                        		__bra		.LL668
         18:CCA5  4C FD CB   			bra	.LL668
15565    18:CCA8             	.LL670:
15566                        	
15567                        		.dbg	line,	"include\init.c", 352; }
15568    18:CCA8             	.LL666:
15569                        		__return	0
         18:CCA8  4C EF FF   			jmp	leave_proc
15570                        		.dbg	clear
15571                        		.endp
15572                        		.pceas
15573                        	
15574                        		.dbg	line,	"include\init.c", 355; void init_NPC_LV1()
15575                        		.dbg	line,	"include\init.c", 356; {
15576                        	;***********************
15577                        	;***********************
15578                        	
15579                        		.hucc
15580    18:CB0E             		.proc		_init_NPC_LV1
15581                        		__enter		_init_NPC_LV1
15582                        	
15583                        		.dbg	line,	"include\init.c", 357; signed char i;
15584                        	
15585                        		.dbg	line,	"include\init.c", 359; for(i=0 ; i<level_npc_number ; i++)
15586                        		__st.umiq	0, __init_NPC_LV1_end - 1  /* i */
         18:CB0E  9C 52 26   			stz	__init_NPC_LV1_end - 1
15587    18:CB11             	.LL673:
15588                        		__ld.bm		__init_NPC_LV1_end - 1  /* i */
         18:CB11  AD 52 26   			lda	__init_NPC_LV1_end - 1
         18:CB14  C2         			cly
         18:CB15  10 01      			bpl	!+
         18:CB17  88         			dey
         18:CB18             	!:
15589                        		__slt_w.um	_level_npc_number
         18:CB18  CD B8 23   			cmp	_level_npc_number		; Subtract memory from Y:A.
         18:CB1B  98         			tya
         18:CB1C  E9 00      			sbc	#0
         18:CB1E  50 02      			bvc	!+
         18:CB20  49 80      			eor	#$80		; -ve if Y:A < memory (signed).
         18:CB22  0A         	!:		asl	a
15590                        		__btrue		.LL675
         18:CB23  B0 08      			bcs	.LL675
15591                        		__bra		.LL676
         18:CB25  4C E0 CB   			bra	.LL676
15592    18:CB28             	.LL674:
15593                        		__inc.umq	__init_NPC_LV1_end - 1  /* i */
         18:CB28  EE 52 26   			inc	__init_NPC_LV1_end - 1
15594                        		__bra		.LL673
         18:CB2B  80 E4      			bra	.LL673
15595    18:CB2D             	.LL675:
15596                        	
15597                        		.dbg	line,	"include\init.c", 360; {
15598                        	
15599                        		.dbg	line,	"include\init.c", 361; // SET NPC PROPERTIES //
15600                        	
15601                        		.dbg	line,	"include\init.c", 362; list_npc_type[i] = TABLE_NPC_TYPE_LV1[i];
15602                        		__ldx.bmq	__init_NPC_LV1_end - 1  /* i */
         18:CB2D  AE 52 26   			ldx	__init_NPC_LV1_end - 1
15603                        		__ld.uax	_TABLE_NPC_TYPE_LV1
         18:CB30  BD 92 60   			lda	_TABLE_NPC_TYPE_LV1, x
         18:CB33  C2         			cly
15604                        		__ldx.bmq	__init_NPC_LV1_end - 1  /* i */
         18:CB34  AE 52 26   			ldx	__init_NPC_LV1_end - 1
15605                        		__st.uaxq	_list_npc_type
         18:CB37  9D BA 23   			sta	_list_npc_type, x
15606                        	
15607                        		.dbg	line,	"include\init.c", 363; list_npc_x_pos_ref[i] = TABLE_NPC_X_POS_REF_LV1[i];
15608                        		__ld2x.bmq	__init_NPC_LV1_end - 1  /* i */
         18:CB3A  AD 52 26   			lda	__init_NPC_LV1_end - 1
         18:CB3D  0A         			asl	a
         18:CB3E  AA         			tax
15609                        		__ld.wax	_TABLE_NPC_X_POS_REF_LV1
         18:CB3F  BD 94 60   			lda.l	_TABLE_NPC_X_POS_REF_LV1, x
         18:CB42  BC 95 60   			ldy.h	_TABLE_NPC_X_POS_REF_LV1, x
15610                        		__ld2x.bm	__init_NPC_LV1_end - 1  /* i */
         18:CB45  AA         			tax
         18:CB46  AD 52 26   			lda	__init_NPC_LV1_end - 1
         18:CB49  0A         			asl	a
         18:CB4A  22         			sax
15611                        		__st.waxq	_list_npc_x_pos_ref
         18:CB4B  9D 10 26   			sta.l	_list_npc_x_pos_ref, x
         18:CB4E  98         			tya
         18:CB4F  9D 11 26   			sta.h	_list_npc_x_pos_ref, x
15612                        	
15613                        		.dbg	line,	"include\init.c", 364; list_npc_y_pos_ref[i] = TABLE_NPC_Y_POS_REF_LV1[i];
15614                        		__ld2x.bmq	__init_NPC_LV1_end - 1  /* i */
         18:CB52  AD 52 26   			lda	__init_NPC_LV1_end - 1
         18:CB55  0A         			asl	a
         18:CB56  AA         			tax
15615                        		__ld.wax	_TABLE_NPC_Y_POS_REF_LV1
         18:CB57  BD 98 60   			lda.l	_TABLE_NPC_Y_POS_REF_LV1, x
         18:CB5A  BC 99 60   			ldy.h	_TABLE_NPC_Y_POS_REF_LV1, x
15616                        		__ld2x.bm	__init_NPC_LV1_end - 1  /* i */
         18:CB5D  AA         			tax
         18:CB5E  AD 52 26   			lda	__init_NPC_LV1_end - 1
         18:CB61  0A         			asl	a
         18:CB62  22         			sax
15617                        		__st.waxq	_list_npc_y_pos_ref
         18:CB63  9D 22 26   			sta.l	_list_npc_y_pos_ref, x
         18:CB66  98         			tya
         18:CB67  9D 23 26   			sta.h	_list_npc_y_pos_ref, x
15618                        	
15619                        		.dbg	line,	"include\init.c", 365; list_npc_x_pos[i] = -32;
15620                        		__ld2x.bmq	__init_NPC_LV1_end - 1  /* i */
         18:CB6A  AD 52 26   			lda	__init_NPC_LV1_end - 1
         18:CB6D  0A         			asl	a
         18:CB6E  AA         			tax
15621                        		__st.waxiq	-32, _list_npc_x_pos
         18:CB6F  A9 E0      			lda.l	#-32
         18:CB71  9D EC 25   			sta.l	_list_npc_x_pos, x
         18:CB74  A9 FF      			lda.h	#-32
         18:CB76  9D ED 25   			sta.h	_list_npc_x_pos, x
15622                        	
15623                        		.dbg	line,	"include\init.c", 366; list_npc_y_pos[i] = -32;
15624                        		__ld2x.bmq	__init_NPC_LV1_end - 1  /* i */
         18:CB79  AD 52 26   			lda	__init_NPC_LV1_end - 1
         18:CB7C  0A         			asl	a
         18:CB7D  AA         			tax
15625                        		__st.waxiq	-32, _list_npc_y_pos
         18:CB7E  A9 E0      			lda.l	#-32
         18:CB80  9D FE 25   			sta.l	_list_npc_y_pos, x
         18:CB83  A9 FF      			lda.h	#-32
         18:CB85  9D FF 25   			sta.h	_list_npc_y_pos, x
15626                        	
15627                        		.dbg	line,	"include\init.c", 368; if(respawn == FALSE)
15628                        		__not.um	_respawn
         18:CB88  AD 16 23   			lda	_respawn
         18:CB8B  18         			clc
         18:CB8C  D0 01      			bne	!+
         18:CB8E  38         			sec
         18:CB8F             	!:
15629                        		__bfalse	.LL677
         18:CB8F  90 06      			bcc	.LL677
15630                        	
15631                        		.dbg	line,	"include\init.c", 369; {
15632                        	
15633                        		.dbg	line,	"include\init.c", 370; list_npc_state[i] = STATE_ACTIVE;
15634                        		__ldx.bmq	__init_NPC_LV1_end - 1  /* i */
         18:CB91  AE 52 26   			ldx	__init_NPC_LV1_end - 1
15635                        		__st.uaxiq	0, _list_npc_state
         18:CB94  9E C3 23   			stz	_list_npc_state, x
15636                        	
15637                        		.dbg	line,	"include\init.c", 371; }
15638                        	
15639                        		.dbg	line,	"include\init.c", 374; // SET NPC SPRITE //
15640                        	
15641                        		.dbg	line,	"include\init.c", 375; sgx_spr_set(i + npc_start_index);
15642    18:CB97             	.LL677:
15643                        		__ld.bm		__init_NPC_LV1_end - 1  /* i */
         18:CB97  AD 52 26   			lda	__init_NPC_LV1_end - 1
         18:CB9A  C2         			cly
         18:CB9B  10 01      			bpl	!+
         18:CB9D  88         			dey
         18:CB9E             	!:
15644                        		__add.um	_npc_start_index
         18:CB9E  18         			clc
         18:CB9F  6D B7 23   			adc	_npc_start_index
         18:CBA2  90 01      			bcc	!+
         18:CBA4  C8         			iny
         18:CBA5             	!:
15645                        		__call		_sgx_spr_set.1
         18:CBA5  20 8A E8   			call	_sgx_spr_set.1
15646                        	
15647                        		.dbg	line,	"include\init.c", 376; sgx_spr_x(list_npc_x_pos[i]);
15648                        		__ld2x.bmq	__init_NPC_LV1_end - 1  /* i */
         18:CBA8  AD 52 26   			lda	__init_NPC_LV1_end - 1
         18:CBAB  0A         			asl	a
         18:CBAC  AA         			tax
15649                        		__ld.wax	_list_npc_x_pos
         18:CBAD  BD EC 25   			lda.l	_list_npc_x_pos, x
         18:CBB0  BC ED 25   			ldy.h	_list_npc_x_pos, x
15650                        		__call		_sgx_spr_x.1
         18:CBB3  20 B7 E8   			call	_sgx_spr_x.1
15651                        	
15652                        		.dbg	line,	"include\init.c", 377; sgx_spr_y(list_npc_y_pos[i]);
15653                        		__ld2x.bmq	__init_NPC_LV1_end - 1  /* i */
         18:CBB6  AD 52 26   			lda	__init_NPC_LV1_end - 1
         18:CBB9  0A         			asl	a
         18:CBBA  AA         			tax
15654                        		__ld.wax	_list_npc_y_pos
         18:CBBB  BD FE 25   			lda.l	_list_npc_y_pos, x
         18:CBBE  BC FF 25   			ldy.h	_list_npc_y_pos, x
15655                        		__call		_sgx_spr_y.1
         18:CBC1  20 C6 E8   			call	_sgx_spr_y.1
15656                        	
15657                        		.dbg	line,	"include\init.c", 378; sgx_spr_pri(TRUE);
15658                        		__ld.uiq	1
         18:CBC4  A9 01      			lda	#1
15659                        		__call		_sgx_spr_pri.1
         18:CBC6  20 09 E9   			call	_sgx_spr_pri.1
15660                        	
15661                        		.dbg	line,	"include\init.c", 381; sgx_spr_pal(17);
15662                        		__ld.uiq	17
         18:CBC9  A9 11      			lda	#17
15663                        		__call		_sgx_spr_pal.1
         18:CBCB  20 FA E8   			call	_sgx_spr_pal.1
15664                        	
15665                        		.dbg	line,	"include\init.c", 382; sgx_spr_pattern(NPC_VRAM_ADR);
15666                        		__ld.wi		30208
         18:CBCE  62         			cla
         18:CBCF  A0 76      			ldy.h	#30208
15667                        		__call		_sgx_spr_pattern.1
         18:CBD1  20 D3 E8   			call	_sgx_spr_pattern.1
15668                        	
15669                        		.dbg	line,	"include\init.c", 383; sgx_spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_32x32);
15670                        		__st.umiq	185, _al
         18:CBD4  A9 B9      			lda.l	#185
         18:CBD6  85 F8      			sta	_al
15671                        		__ld.uiq	17
         18:CBD8  A9 11      			lda	#17
15672                        		__call		_sgx_spr_ctrl.2
         18:CBDA  20 E9 E8   			call	_sgx_spr_ctrl.2
15673                        	
15674                        		.dbg	line,	"include\init.c", 384; }
15675                        		__bra		.LL674
         18:CBDD  4C 28 CB   			bra	.LL674
15676    18:CBE0             	.LL676:
15677                        	
15678                        		.dbg	line,	"include\init.c", 385; }
15679    18:CBE0             	.LL672:
15680                        		__return	0
         18:CBE0  4C EF FF   			jmp	leave_proc
15681                        		.dbg	clear
15682                        		.endp
15683                        		.pceas
15684                        	
15685                        		.dbg	line,	"include\init.c", 392; void init_HUD()
15686                        		.dbg	line,	"include\init.c", 393; {
15687                        	;***********************
15688                        	;***********************
15689                        	
15690                        		.hucc
15691    02:D17D             		.proc		_init_HUD
15692                        		__enter		_init_HUD
15693                        	
15694                        		.dbg	line,	"include\init.c", 394; //**************************************************************************************//
15695                        	
15696                        		.dbg	line,	"include\init.c", 395; //                                                                                      //
15697                        	
15698                        		.dbg	line,	"include\init.c", 396; //                                        VDC 1                                         //
15699                        	
15700                        		.dbg	line,	"include\init.c", 397; //                                                                                      //
15701                        	
15702                        		.dbg	line,	"include\init.c", 398; //**************************************************************************************//
15703                        	
15704                        		.dbg	line,	"include\init.c", 400; //--------------------------------------------------------------------------------------//
15705                        	
15706                        		.dbg	line,	"include\init.c", 401; //                                      LOAD FONT                                       //
15707                        	
15708                        		.dbg	line,	"include\init.c", 402; //--------------------------------------------------------------------------------------//
15709                        	
15710                        		.dbg	line,	"include\init.c", 404; load_vram( 0x0800, tileset_FONT_TITLE, SIZEOF(tileset_FONT_TITLE) >> 1 );
15711                        		__st.wmiq	2048, _di
         02:D17D  64 F0      			stz.l	_di
         02:D17F  A9 08      			lda.h	#2048
         02:D181  85 F1      			sta.h	_di
15712                        		__farptr	_tileset_FONT_TITLE, _bp_bank, _bp
         02:D183  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_FONT_TITLE))
         02:D185  85 EC      			sta.l	_bp
         02:D187  A9 60      			lda.h	#$6000 + ($1FFF & (_tileset_FONT_TITLE))
         02:D189  85 ED      			sta.h	_bp
         02:D18B  A9 03      			lda	#bank(_tileset_FONT_TITLE)
         02:D18D  85 02      			sta	_bp_bank
15713                        		__ld.wi		___sizeof__tileset_FONT_TITLE
         02:D18F  A9 00      			lda.l	#___sizeof__tileset_FONT_TITLE
         02:D191  A0 0C      			ldy.h	#___sizeof__tileset_FONT_TITLE
15714                        		__lsr.wi	1
         02:D193  42         			say
         02:D194  4A         			lsr	a
         02:D195  42         			say
         02:D196  6A         			ror	a
15715                        		__st.wmq	_ax
         02:D197  85 F8      			sta.l	_ax
         02:D199  84 F9      			sty.h	_ax
15716                        		 _load_vram.3
         02:D19B  82         			clx				; Offset to PCE VDC.
         02:D19C  20 4F FF   			call	load_vram_x
15717                        	
15718                        		.dbg	line,	"include\init.c", 406; set_font_pal(15);
15719                        		__ld.uiq	15
         02:D19F  A9 0F      			lda	#15
15720                        		__call		_set_font_pal.1
         02:D1A1  20 09 E6   			call	_set_font_pal.1
15721                        	
15722                        		.dbg	line,	"include\init.c", 409; //--------------------------------------------------------------------------------------//
15723                        	
15724                        		.dbg	line,	"include\init.c", 410; //                                    LOAD TILESET                                      //
15725                        	
15726                        		.dbg	line,	"include\init.c", 411; //--------------------------------------------------------------------------------------//
15727                        	
15728                        		.dbg	line,	"include\init.c", 413; load_vram( 0x1000, tileset_HUD, SIZEOF(tileset_HUD) >> 1 );
15729                        		__st.wmiq	4096, _di
         02:D1A4  64 F0      			stz.l	_di
         02:D1A6  A9 10      			lda.h	#4096
         02:D1A8  85 F1      			sta.h	_di
15730                        		__farptr	_tileset_HUD, _bp_bank, _bp
         02:D1AA  A9 A0      			lda.l	#$6000 + ($1FFF & (_tileset_HUD))
         02:D1AC  85 EC      			sta.l	_bp
         02:D1AE  A9 69      			lda.h	#$6000 + ($1FFF & (_tileset_HUD))
         02:D1B0  85 ED      			sta.h	_bp
         02:D1B2  A9 0B      			lda	#bank(_tileset_HUD)
         02:D1B4  85 02      			sta	_bp_bank
15731                        		__ld.wi		___sizeof__tileset_HUD
         02:D1B6  A9 60      			lda.l	#___sizeof__tileset_HUD
         02:D1B8  A0 06      			ldy.h	#___sizeof__tileset_HUD
15732                        		__lsr.wi	1
         02:D1BA  42         			say
         02:D1BB  4A         			lsr	a
         02:D1BC  42         			say
         02:D1BD  6A         			ror	a
15733                        		__st.wmq	_ax
         02:D1BE  85 F8      			sta.l	_ax
         02:D1C0  84 F9      			sty.h	_ax
15734                        		 _load_vram.3
         02:D1C2  82         			clx				; Offset to PCE VDC.
         02:D1C3  20 4F FF   			call	load_vram_x
15735                        	
15736                        		.dbg	line,	"include\init.c", 416; //--------------------------------------------------------------------------------------//
15737                        	
15738                        		.dbg	line,	"include\init.c", 417; //                                 LOAD LIFEBAR TILES                                   //
15739                        	
15740                        		.dbg	line,	"include\init.c", 418; //--------------------------------------------------------------------------------------//
15741                        	
15742                        		.dbg	line,	"include\init.c", 420; load_vram( LIFEBAR_1_VRAM_ADR, tileset_LIFE_RED, SIZEOF(tileset_LIFE_RED) >> 1 );
15743                        		__st.wmiq	4096, _di
         02:D1C6  64 F0      			stz.l	_di
         02:D1C8  A9 10      			lda.h	#4096
         02:D1CA  85 F1      			sta.h	_di
15744                        		__farptr	_tileset_LIFE_RED, _bp_bank, _bp
         02:D1CC  A9 60      			lda.l	#$6000 + ($1FFF & (_tileset_LIFE_RED))
         02:D1CE  85 EC      			sta.l	_bp
         02:D1D0  A9 65      			lda.h	#$6000 + ($1FFF & (_tileset_LIFE_RED))
         02:D1D2  85 ED      			sta.h	_bp
         02:D1D4  A9 05      			lda	#bank(_tileset_LIFE_RED)
         02:D1D6  85 02      			sta	_bp_bank
15745                        		__ld.wi		___sizeof__tileset_LIFE_RED
         02:D1D8  A9 40      			lda.l	#___sizeof__tileset_LIFE_RED
         02:D1DA  A0 00      			ldy.h	#___sizeof__tileset_LIFE_RED
15746                        		__lsr.wi	1
         02:D1DC  42         			say
         02:D1DD  4A         			lsr	a
         02:D1DE  42         			say
         02:D1DF  6A         			ror	a
15747                        		__st.wmq	_ax
         02:D1E0  85 F8      			sta.l	_ax
         02:D1E2  84 F9      			sty.h	_ax
15748                        		 _load_vram.3
         02:D1E4  82         			clx				; Offset to PCE VDC.
         02:D1E5  20 4F FF   			call	load_vram_x
15749                        	
15750                        		.dbg	line,	"include\init.c", 421; load_vram( LIFEBAR_2_VRAM_ADR, tileset_LIFE_ORANGE, SIZEOF(tileset_LIFE_ORANGE) >> 1 );
15751                        		__st.wmiq	4128, _di
         02:D1E8  A9 20      			lda.l	#4128
         02:D1EA  85 F0      			sta.l	_di
         02:D1EC  A9 10      			lda.h	#4128
         02:D1EE  85 F1      			sta.h	_di
15752                        		__farptr	_tileset_LIFE_ORANGE, _bp_bank, _bp
         02:D1F0  A9 A0      			lda.l	#$6000 + ($1FFF & (_tileset_LIFE_ORANGE))
         02:D1F2  85 EC      			sta.l	_bp
         02:D1F4  A9 65      			lda.h	#$6000 + ($1FFF & (_tileset_LIFE_ORANGE))
         02:D1F6  85 ED      			sta.h	_bp
         02:D1F8  A9 05      			lda	#bank(_tileset_LIFE_ORANGE)
         02:D1FA  85 02      			sta	_bp_bank
15753                        		__ld.wi		___sizeof__tileset_LIFE_ORANGE
         02:D1FC  A9 40      			lda.l	#___sizeof__tileset_LIFE_ORANGE
         02:D1FE  A0 00      			ldy.h	#___sizeof__tileset_LIFE_ORANGE
15754                        		__lsr.wi	1
         02:D200  42         			say
         02:D201  4A         			lsr	a
         02:D202  42         			say
         02:D203  6A         			ror	a
15755                        		__st.wmq	_ax
         02:D204  85 F8      			sta.l	_ax
         02:D206  84 F9      			sty.h	_ax
15756                        		 _load_vram.3
         02:D208  82         			clx				; Offset to PCE VDC.
         02:D209  20 4F FF   			call	load_vram_x
15757                        	
15758                        		.dbg	line,	"include\init.c", 422; load_vram( LIFEBAR_3_VRAM_ADR, tileset_LIFE_YELLOW, SIZEOF(tileset_LIFE_YELLOW) >> 1 );
15759                        		__st.wmiq	4160, _di
         02:D20C  A9 40      			lda.l	#4160
         02:D20E  85 F0      			sta.l	_di
         02:D210  A9 10      			lda.h	#4160
         02:D212  85 F1      			sta.h	_di
15760                        		__farptr	_tileset_LIFE_YELLOW, _bp_bank, _bp
         02:D214  A9 E0      			lda.l	#$6000 + ($1FFF & (_tileset_LIFE_YELLOW))
         02:D216  85 EC      			sta.l	_bp
         02:D218  A9 65      			lda.h	#$6000 + ($1FFF & (_tileset_LIFE_YELLOW))
         02:D21A  85 ED      			sta.h	_bp
         02:D21C  A9 05      			lda	#bank(_tileset_LIFE_YELLOW)
         02:D21E  85 02      			sta	_bp_bank
15761                        		__ld.wi		___sizeof__tileset_LIFE_YELLOW
         02:D220  A9 40      			lda.l	#___sizeof__tileset_LIFE_YELLOW
         02:D222  A0 00      			ldy.h	#___sizeof__tileset_LIFE_YELLOW
15762                        		__lsr.wi	1
         02:D224  42         			say
         02:D225  4A         			lsr	a
         02:D226  42         			say
         02:D227  6A         			ror	a
15763                        		__st.wmq	_ax
         02:D228  85 F8      			sta.l	_ax
         02:D22A  84 F9      			sty.h	_ax
15764                        		 _load_vram.3
         02:D22C  82         			clx				; Offset to PCE VDC.
         02:D22D  20 4F FF   			call	load_vram_x
15765                        	
15766                        		.dbg	line,	"include\init.c", 423; load_vram( LIFEBAR_4_VRAM_ADR, tileset_LIFE_YELLOW, SIZEOF(tileset_LIFE_YELLOW) >> 1 );
15767                        		__st.wmiq	4192, _di
         02:D230  A9 60      			lda.l	#4192
         02:D232  85 F0      			sta.l	_di
         02:D234  A9 10      			lda.h	#4192
         02:D236  85 F1      			sta.h	_di
15768                        		__farptr	_tileset_LIFE_YELLOW, _bp_bank, _bp
         02:D238  A9 E0      			lda.l	#$6000 + ($1FFF & (_tileset_LIFE_YELLOW))
         02:D23A  85 EC      			sta.l	_bp
         02:D23C  A9 65      			lda.h	#$6000 + ($1FFF & (_tileset_LIFE_YELLOW))
         02:D23E  85 ED      			sta.h	_bp
         02:D240  A9 05      			lda	#bank(_tileset_LIFE_YELLOW)
         02:D242  85 02      			sta	_bp_bank
15769                        		__ld.wi		___sizeof__tileset_LIFE_YELLOW
         02:D244  A9 40      			lda.l	#___sizeof__tileset_LIFE_YELLOW
         02:D246  A0 00      			ldy.h	#___sizeof__tileset_LIFE_YELLOW
15770                        		__lsr.wi	1
         02:D248  42         			say
         02:D249  4A         			lsr	a
         02:D24A  42         			say
         02:D24B  6A         			ror	a
15771                        		__st.wmq	_ax
         02:D24C  85 F8      			sta.l	_ax
         02:D24E  84 F9      			sty.h	_ax
15772                        		 _load_vram.3
         02:D250  82         			clx				; Offset to PCE VDC.
         02:D251  20 4F FF   			call	load_vram_x
15773                        	
15774                        		.dbg	line,	"include\init.c", 424; load_vram( LIFEBAR_5_VRAM_ADR, tileset_LIFE_EMPTY, SIZEOF(tileset_LIFE_EMPTY) >> 1 );
15775                        		__st.wmiq	4224, _di
         02:D254  A9 80      			lda.l	#4224
         02:D256  85 F0      			sta.l	_di
         02:D258  A9 10      			lda.h	#4224
         02:D25A  85 F1      			sta.h	_di
15776                        		__farptr	_tileset_LIFE_EMPTY, _bp_bank, _bp
         02:D25C  A9 20      			lda.l	#$6000 + ($1FFF & (_tileset_LIFE_EMPTY))
         02:D25E  85 EC      			sta.l	_bp
         02:D260  A9 66      			lda.h	#$6000 + ($1FFF & (_tileset_LIFE_EMPTY))
         02:D262  85 ED      			sta.h	_bp
         02:D264  A9 05      			lda	#bank(_tileset_LIFE_EMPTY)
         02:D266  85 02      			sta	_bp_bank
15777                        		__ld.wi		___sizeof__tileset_LIFE_EMPTY
         02:D268  A9 40      			lda.l	#___sizeof__tileset_LIFE_EMPTY
         02:D26A  A0 00      			ldy.h	#___sizeof__tileset_LIFE_EMPTY
15778                        		__lsr.wi	1
         02:D26C  42         			say
         02:D26D  4A         			lsr	a
         02:D26E  42         			say
         02:D26F  6A         			ror	a
15779                        		__st.wmq	_ax
         02:D270  85 F8      			sta.l	_ax
         02:D272  84 F9      			sty.h	_ax
15780                        		 _load_vram.3
         02:D274  82         			clx				; Offset to PCE VDC.
         02:D275  20 4F FF   			call	load_vram_x
15781                        	
15782                        		.dbg	line,	"include\init.c", 427; //--------------------------------------------------------------------------------------//
15783                        	
15784                        		.dbg	line,	"include\init.c", 428; //                               LOAD WEAPON + ARMOR TILES                              //
15785                        	
15786                        		.dbg	line,	"include\init.c", 429; //--------------------------------------------------------------------------------------//
15787                        	
15788                        		.dbg	line,	"include\init.c", 431; if(weapon_level == 1)
15789                        		__ld.umq	_weapon_level
         02:D278  AD 28 23   			lda	_weapon_level
15790                        		__equ_b.uiq	1
         02:D27B  C9 01      			cmp	#1
         02:D27D  F0 01      			beq	!+
         02:D27F  18         			clc
         02:D280             	!:
15791                        		__bfalse	.LL679
         02:D280  90 27      			bcc	.LL679
15792                        	
15793                        		.dbg	line,	"include\init.c", 432; {
15794                        	
15795                        		.dbg	line,	"include\init.c", 433; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_1, SIZEOF(tileset_WEAPON_1) >> 1 );
15796                        		__st.wmiq	4256, _di
         02:D282  A9 A0      			lda.l	#4256
         02:D284  85 F0      			sta.l	_di
         02:D286  A9 10      			lda.h	#4256
         02:D288  85 F1      			sta.h	_di
15797                        		__farptr	_tileset_WEAPON_1, _bp_bank, _bp
         02:D28A  A9 60      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_1))
         02:D28C  85 EC      			sta.l	_bp
         02:D28E  A9 68      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_1))
         02:D290  85 ED      			sta.h	_bp
         02:D292  A9 05      			lda	#bank(_tileset_WEAPON_1)
         02:D294  85 02      			sta	_bp_bank
15798                        		__ld.wi		___sizeof__tileset_WEAPON_1
         02:D296  A9 80      			lda.l	#___sizeof__tileset_WEAPON_1
         02:D298  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_1
15799                        		__lsr.wi	1
         02:D29A  42         			say
         02:D29B  4A         			lsr	a
         02:D29C  42         			say
         02:D29D  6A         			ror	a
15800                        		__st.wmq	_ax
         02:D29E  85 F8      			sta.l	_ax
         02:D2A0  84 F9      			sty.h	_ax
15801                        		 _load_vram.3
         02:D2A2  82         			clx				; Offset to PCE VDC.
         02:D2A3  20 4F FF   			call	load_vram_x
15802                        	
15803                        		.dbg	line,	"include\init.c", 434; }
15804                        	
15805                        		.dbg	line,	"include\init.c", 436; else if(weapon_level == 2)
15806                        		__bra		.LL680
         02:D2A6  4C 68 D3   			bra	.LL680
15807    02:D2A9             	.LL679:
15808                        		__ld.umq	_weapon_level
         02:D2A9  AD 28 23   			lda	_weapon_level
15809                        		__equ_b.uiq	2
         02:D2AC  C9 02      			cmp	#2
         02:D2AE  F0 01      			beq	!+
         02:D2B0  18         			clc
         02:D2B1             	!:
15810                        		__bfalse	.LL681
         02:D2B1  90 27      			bcc	.LL681
15811                        	
15812                        		.dbg	line,	"include\init.c", 437; {
15813                        	
15814                        		.dbg	line,	"include\init.c", 438; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_2, SIZEOF(tileset_WEAPON_2) >> 1 );
15815                        		__st.wmiq	4256, _di
         02:D2B3  A9 A0      			lda.l	#4256
         02:D2B5  85 F0      			sta.l	_di
         02:D2B7  A9 10      			lda.h	#4256
         02:D2B9  85 F1      			sta.h	_di
15816                        		__farptr	_tileset_WEAPON_2, _bp_bank, _bp
         02:D2BB  A9 E0      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_2))
         02:D2BD  85 EC      			sta.l	_bp
         02:D2BF  A9 68      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_2))
         02:D2C1  85 ED      			sta.h	_bp
         02:D2C3  A9 05      			lda	#bank(_tileset_WEAPON_2)
         02:D2C5  85 02      			sta	_bp_bank
15817                        		__ld.wi		___sizeof__tileset_WEAPON_2
         02:D2C7  A9 80      			lda.l	#___sizeof__tileset_WEAPON_2
         02:D2C9  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_2
15818                        		__lsr.wi	1
         02:D2CB  42         			say
         02:D2CC  4A         			lsr	a
         02:D2CD  42         			say
         02:D2CE  6A         			ror	a
15819                        		__st.wmq	_ax
         02:D2CF  85 F8      			sta.l	_ax
         02:D2D1  84 F9      			sty.h	_ax
15820                        		 _load_vram.3
         02:D2D3  82         			clx				; Offset to PCE VDC.
         02:D2D4  20 4F FF   			call	load_vram_x
15821                        	
15822                        		.dbg	line,	"include\init.c", 439; }
15823                        	
15824                        		.dbg	line,	"include\init.c", 441; else if(weapon_level == 3)
15825                        		__bra		.LL682
         02:D2D7  4C 68 D3   			bra	.LL682
15826    02:D2DA             	.LL681:
15827                        		__ld.umq	_weapon_level
         02:D2DA  AD 28 23   			lda	_weapon_level
15828                        		__equ_b.uiq	3
         02:D2DD  C9 03      			cmp	#3
         02:D2DF  F0 01      			beq	!+
         02:D2E1  18         			clc
         02:D2E2             	!:
15829                        		__bfalse	.LL683
         02:D2E2  90 26      			bcc	.LL683
15830                        	
15831                        		.dbg	line,	"include\init.c", 442; {
15832                        	
15833                        		.dbg	line,	"include\init.c", 443; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_4, SIZEOF(tileset_WEAPON_4) >> 1 );
15834                        		__st.wmiq	4256, _di
         02:D2E4  A9 A0      			lda.l	#4256
         02:D2E6  85 F0      			sta.l	_di
         02:D2E8  A9 10      			lda.h	#4256
         02:D2EA  85 F1      			sta.h	_di
15835                        		__farptr	_tileset_WEAPON_4, _bp_bank, _bp
         02:D2EC  A9 60      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_4))
         02:D2EE  85 EC      			sta.l	_bp
         02:D2F0  A9 69      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_4))
         02:D2F2  85 ED      			sta.h	_bp
         02:D2F4  A9 05      			lda	#bank(_tileset_WEAPON_4)
         02:D2F6  85 02      			sta	_bp_bank
15836                        		__ld.wi		___sizeof__tileset_WEAPON_4
         02:D2F8  A9 80      			lda.l	#___sizeof__tileset_WEAPON_4
         02:D2FA  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_4
15837                        		__lsr.wi	1
         02:D2FC  42         			say
         02:D2FD  4A         			lsr	a
         02:D2FE  42         			say
         02:D2FF  6A         			ror	a
15838                        		__st.wmq	_ax
         02:D300  85 F8      			sta.l	_ax
         02:D302  84 F9      			sty.h	_ax
15839                        		 _load_vram.3
         02:D304  82         			clx				; Offset to PCE VDC.
         02:D305  20 4F FF   			call	load_vram_x
15840                        	
15841                        		.dbg	line,	"include\init.c", 444; }
15842                        	
15843                        		.dbg	line,	"include\init.c", 446; else if(weapon_level == 4)
15844                        		__bra		.LL684
         02:D308  80 5E      			bra	.LL684
15845    02:D30A             	.LL683:
15846                        		__ld.umq	_weapon_level
         02:D30A  AD 28 23   			lda	_weapon_level
15847                        		__equ_b.uiq	4
         02:D30D  C9 04      			cmp	#4
         02:D30F  F0 01      			beq	!+
         02:D311  18         			clc
         02:D312             	!:
15848                        		__bfalse	.LL685
         02:D312  90 26      			bcc	.LL685
15849                        	
15850                        		.dbg	line,	"include\init.c", 447; {
15851                        	
15852                        		.dbg	line,	"include\init.c", 448; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_5, SIZEOF(tileset_WEAPON_5) >> 1 );
15853                        		__st.wmiq	4256, _di
         02:D314  A9 A0      			lda.l	#4256
         02:D316  85 F0      			sta.l	_di
         02:D318  A9 10      			lda.h	#4256
         02:D31A  85 F1      			sta.h	_di
15854                        		__farptr	_tileset_WEAPON_5, _bp_bank, _bp
         02:D31C  A9 E0      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_5))
         02:D31E  85 EC      			sta.l	_bp
         02:D320  A9 69      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_5))
         02:D322  85 ED      			sta.h	_bp
         02:D324  A9 05      			lda	#bank(_tileset_WEAPON_5)
         02:D326  85 02      			sta	_bp_bank
15855                        		__ld.wi		___sizeof__tileset_WEAPON_5
         02:D328  A9 80      			lda.l	#___sizeof__tileset_WEAPON_5
         02:D32A  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_5
15856                        		__lsr.wi	1
         02:D32C  42         			say
         02:D32D  4A         			lsr	a
         02:D32E  42         			say
         02:D32F  6A         			ror	a
15857                        		__st.wmq	_ax
         02:D330  85 F8      			sta.l	_ax
         02:D332  84 F9      			sty.h	_ax
15858                        		 _load_vram.3
         02:D334  82         			clx				; Offset to PCE VDC.
         02:D335  20 4F FF   			call	load_vram_x
15859                        	
15860                        		.dbg	line,	"include\init.c", 449; }
15861                        	
15862                        		.dbg	line,	"include\init.c", 451; else if(weapon_level == 5)
15863                        		__bra		.LL686
         02:D338  80 2E      			bra	.LL686
15864    02:D33A             	.LL685:
15865                        		__ld.umq	_weapon_level
         02:D33A  AD 28 23   			lda	_weapon_level
15866                        		__equ_b.uiq	5
         02:D33D  C9 05      			cmp	#5
         02:D33F  F0 01      			beq	!+
         02:D341  18         			clc
         02:D342             	!:
15867                        		__bfalse	.LL687
         02:D342  90 24      			bcc	.LL687
15868                        	
15869                        		.dbg	line,	"include\init.c", 452; {
15870                        	
15871                        		.dbg	line,	"include\init.c", 453; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_8, SIZEOF(tileset_WEAPON_8) >> 1 );
15872                        		__st.wmiq	4256, _di
         02:D344  A9 A0      			lda.l	#4256
         02:D346  85 F0      			sta.l	_di
         02:D348  A9 10      			lda.h	#4256
         02:D34A  85 F1      			sta.h	_di
15873                        		__farptr	_tileset_WEAPON_8, _bp_bank, _bp
         02:D34C  A9 60      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_8))
         02:D34E  85 EC      			sta.l	_bp
         02:D350  A9 6A      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_8))
         02:D352  85 ED      			sta.h	_bp
         02:D354  A9 05      			lda	#bank(_tileset_WEAPON_8)
         02:D356  85 02      			sta	_bp_bank
15874                        		__ld.wi		___sizeof__tileset_WEAPON_8
         02:D358  A9 80      			lda.l	#___sizeof__tileset_WEAPON_8
         02:D35A  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_8
15875                        		__lsr.wi	1
         02:D35C  42         			say
         02:D35D  4A         			lsr	a
         02:D35E  42         			say
         02:D35F  6A         			ror	a
15876                        		__st.wmq	_ax
         02:D360  85 F8      			sta.l	_ax
         02:D362  84 F9      			sty.h	_ax
15877                        		 _load_vram.3
         02:D364  82         			clx				; Offset to PCE VDC.
         02:D365  20 4F FF   			call	load_vram_x
15878                        	
15879                        		.dbg	line,	"include\init.c", 454; }
15880                        	
15881                        		.dbg	line,	"include\init.c", 459; if(armor_level == 1)
15882    02:D368             	.LL687:
15883    02:D368             	.LL686:
15884    02:D368             	.LL684:
15885    02:D368             	.LL682:
15886    02:D368             	.LL680:
15887                        		__ld.umq	_armor_level
         02:D368  AD 27 23   			lda	_armor_level
15888                        		__equ_b.uiq	1
         02:D36B  C9 01      			cmp	#1
         02:D36D  F0 01      			beq	!+
         02:D36F  18         			clc
         02:D370             	!:
15889                        		__bfalse	.LL688
         02:D370  90 27      			bcc	.LL688
15890                        	
15891                        		.dbg	line,	"include\init.c", 460; {
15892                        	
15893                        		.dbg	line,	"include\init.c", 461; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_1, SIZEOF(tileset_ARMOR_1) >> 1 );
15894                        		__st.wmiq	4320, _di
         02:D372  A9 E0      			lda.l	#4320
         02:D374  85 F0      			sta.l	_di
         02:D376  A9 10      			lda.h	#4320
         02:D378  85 F1      			sta.h	_di
15895                        		__farptr	_tileset_ARMOR_1, _bp_bank, _bp
         02:D37A  A9 60      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_1))
         02:D37C  85 EC      			sta.l	_bp
         02:D37E  A9 66      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_1))
         02:D380  85 ED      			sta.h	_bp
         02:D382  A9 05      			lda	#bank(_tileset_ARMOR_1)
         02:D384  85 02      			sta	_bp_bank
15896                        		__ld.wi		___sizeof__tileset_ARMOR_1
         02:D386  A9 80      			lda.l	#___sizeof__tileset_ARMOR_1
         02:D388  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_1
15897                        		__lsr.wi	1
         02:D38A  42         			say
         02:D38B  4A         			lsr	a
         02:D38C  42         			say
         02:D38D  6A         			ror	a
15898                        		__st.wmq	_ax
         02:D38E  85 F8      			sta.l	_ax
         02:D390  84 F9      			sty.h	_ax
15899                        		 _load_vram.3
         02:D392  82         			clx				; Offset to PCE VDC.
         02:D393  20 4F FF   			call	load_vram_x
15900                        	
15901                        		.dbg	line,	"include\init.c", 462; }
15902                        	
15903                        		.dbg	line,	"include\init.c", 464; else if(armor_level == 2)
15904                        		__bra		.LL689
         02:D396  4C 27 D4   			bra	.LL689
15905    02:D399             	.LL688:
15906                        		__ld.umq	_armor_level
         02:D399  AD 27 23   			lda	_armor_level
15907                        		__equ_b.uiq	2
         02:D39C  C9 02      			cmp	#2
         02:D39E  F0 01      			beq	!+
         02:D3A0  18         			clc
         02:D3A1             	!:
15908                        		__bfalse	.LL690
         02:D3A1  90 26      			bcc	.LL690
15909                        	
15910                        		.dbg	line,	"include\init.c", 465; {
15911                        	
15912                        		.dbg	line,	"include\init.c", 466; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_2, SIZEOF(tileset_ARMOR_2) >> 1 );
15913                        		__st.wmiq	4320, _di
         02:D3A3  A9 E0      			lda.l	#4320
         02:D3A5  85 F0      			sta.l	_di
         02:D3A7  A9 10      			lda.h	#4320
         02:D3A9  85 F1      			sta.h	_di
15914                        		__farptr	_tileset_ARMOR_2, _bp_bank, _bp
         02:D3AB  A9 E0      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_2))
         02:D3AD  85 EC      			sta.l	_bp
         02:D3AF  A9 66      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_2))
         02:D3B1  85 ED      			sta.h	_bp
         02:D3B3  A9 05      			lda	#bank(_tileset_ARMOR_2)
         02:D3B5  85 02      			sta	_bp_bank
15915                        		__ld.wi		___sizeof__tileset_ARMOR_2
         02:D3B7  A9 80      			lda.l	#___sizeof__tileset_ARMOR_2
         02:D3B9  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_2
15916                        		__lsr.wi	1
         02:D3BB  42         			say
         02:D3BC  4A         			lsr	a
         02:D3BD  42         			say
         02:D3BE  6A         			ror	a
15917                        		__st.wmq	_ax
         02:D3BF  85 F8      			sta.l	_ax
         02:D3C1  84 F9      			sty.h	_ax
15918                        		 _load_vram.3
         02:D3C3  82         			clx				; Offset to PCE VDC.
         02:D3C4  20 4F FF   			call	load_vram_x
15919                        	
15920                        		.dbg	line,	"include\init.c", 467; }
15921                        	
15922                        		.dbg	line,	"include\init.c", 469; else if(armor_level == 3)
15923                        		__bra		.LL691
         02:D3C7  80 5E      			bra	.LL691
15924    02:D3C9             	.LL690:
15925                        		__ld.umq	_armor_level
         02:D3C9  AD 27 23   			lda	_armor_level
15926                        		__equ_b.uiq	3
         02:D3CC  C9 03      			cmp	#3
         02:D3CE  F0 01      			beq	!+
         02:D3D0  18         			clc
         02:D3D1             	!:
15927                        		__bfalse	.LL692
         02:D3D1  90 26      			bcc	.LL692
15928                        	
15929                        		.dbg	line,	"include\init.c", 470; {
15930                        	
15931                        		.dbg	line,	"include\init.c", 471; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_4, SIZEOF(tileset_ARMOR_4) >> 1 );
15932                        		__st.wmiq	4320, _di
         02:D3D3  A9 E0      			lda.l	#4320
         02:D3D5  85 F0      			sta.l	_di
         02:D3D7  A9 10      			lda.h	#4320
         02:D3D9  85 F1      			sta.h	_di
15933                        		__farptr	_tileset_ARMOR_4, _bp_bank, _bp
         02:D3DB  A9 60      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_4))
         02:D3DD  85 EC      			sta.l	_bp
         02:D3DF  A9 67      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_4))
         02:D3E1  85 ED      			sta.h	_bp
         02:D3E3  A9 05      			lda	#bank(_tileset_ARMOR_4)
         02:D3E5  85 02      			sta	_bp_bank
15934                        		__ld.wi		___sizeof__tileset_ARMOR_4
         02:D3E7  A9 80      			lda.l	#___sizeof__tileset_ARMOR_4
         02:D3E9  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_4
15935                        		__lsr.wi	1
         02:D3EB  42         			say
         02:D3EC  4A         			lsr	a
         02:D3ED  42         			say
         02:D3EE  6A         			ror	a
15936                        		__st.wmq	_ax
         02:D3EF  85 F8      			sta.l	_ax
         02:D3F1  84 F9      			sty.h	_ax
15937                        		 _load_vram.3
         02:D3F3  82         			clx				; Offset to PCE VDC.
         02:D3F4  20 4F FF   			call	load_vram_x
15938                        	
15939                        		.dbg	line,	"include\init.c", 472; }
15940                        	
15941                        		.dbg	line,	"include\init.c", 474; else if(armor_level == 4)
15942                        		__bra		.LL693
         02:D3F7  80 2E      			bra	.LL693
15943    02:D3F9             	.LL692:
15944                        		__ld.umq	_armor_level
         02:D3F9  AD 27 23   			lda	_armor_level
15945                        		__equ_b.uiq	4
         02:D3FC  C9 04      			cmp	#4
         02:D3FE  F0 01      			beq	!+
         02:D400  18         			clc
         02:D401             	!:
15946                        		__bfalse	.LL694
         02:D401  90 24      			bcc	.LL694
15947                        	
15948                        		.dbg	line,	"include\init.c", 475; {
15949                        	
15950                        		.dbg	line,	"include\init.c", 476; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_8, SIZEOF(tileset_ARMOR_8) >> 1 );
15951                        		__st.wmiq	4320, _di
         02:D403  A9 E0      			lda.l	#4320
         02:D405  85 F0      			sta.l	_di
         02:D407  A9 10      			lda.h	#4320
         02:D409  85 F1      			sta.h	_di
15952                        		__farptr	_tileset_ARMOR_8, _bp_bank, _bp
         02:D40B  A9 E0      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_8))
         02:D40D  85 EC      			sta.l	_bp
         02:D40F  A9 67      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_8))
         02:D411  85 ED      			sta.h	_bp
         02:D413  A9 05      			lda	#bank(_tileset_ARMOR_8)
         02:D415  85 02      			sta	_bp_bank
15953                        		__ld.wi		___sizeof__tileset_ARMOR_8
         02:D417  A9 80      			lda.l	#___sizeof__tileset_ARMOR_8
         02:D419  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_8
15954                        		__lsr.wi	1
         02:D41B  42         			say
         02:D41C  4A         			lsr	a
         02:D41D  42         			say
         02:D41E  6A         			ror	a
15955                        		__st.wmq	_ax
         02:D41F  85 F8      			sta.l	_ax
         02:D421  84 F9      			sty.h	_ax
15956                        		 _load_vram.3
         02:D423  82         			clx				; Offset to PCE VDC.
         02:D424  20 4F FF   			call	load_vram_x
15957                        	
15958                        		.dbg	line,	"include\init.c", 477; }
15959                        	
15960                        		.dbg	line,	"include\init.c", 482; //--------------------------------------------------------------------------------------//
15961                        	
15962                        		.dbg	line,	"include\init.c", 483; //                                     SET MULTIMAP                                     //
15963                        	
15964                        		.dbg	line,	"include\init.c", 484; //--------------------------------------------------------------------------------------//
15965                        	
15966                        		.dbg	line,	"include\init.c", 486; // multimap is 2 screens wide //
15967                        	
15968                        		.dbg	line,	"include\init.c", 487; set_multimap( multimap_LV1_BG_A , 5 );
15969    02:D427             	.LL694:
15970    02:D427             	.LL693:
15971    02:D427             	.LL691:
15972    02:D427             	.LL689:
15973                        		__farptr	_multimap_LV1_BG_A, vdc_scr_bank, vdc_scr_addr
         02:D427  A9 00      			lda.l	#$6000 + ($1FFF & (_multimap_LV1_BG_A))
         02:D429  8D C5 2B   			sta.l	vdc_scr_addr
         02:D42C  A9 68      			lda.h	#$6000 + ($1FFF & (_multimap_LV1_BG_A))
         02:D42E  8D C6 2B   			sta.h	vdc_scr_addr
         02:D431  A9 0D      			lda	#bank(_multimap_LV1_BG_A)
         02:D433  8D C7 2B   			sta	vdc_scr_bank
15974                        		__st.umiq	5, vdc_map_scrn_w
         02:D436  A9 05      			lda.l	#5
         02:D438  8D 86 26   			sta	vdc_map_scrn_w
15975                        		 _set_multimap.2
         02:D43B  AD 7E 26   			lda	vdc_bat_width
         02:D43E  4A         			lsr	a
         02:D43F  8D 85 26   			sta	vdc_map_line_w
15976                        	
15977                        		.dbg	line,	"include\init.c", 490; //--------------------------------------------------------------------------------------//
15978                        	
15979                        		.dbg	line,	"include\init.c", 491; //                                    DRAW TILEMAP                                      //
15980                        	
15981                        		.dbg	line,	"include\init.c", 492; //--------------------------------------------------------------------------------------//
15982                        	
15983                        		.dbg	line,	"include\init.c", 494; // The blkmap is drawn using global variables for the top-left coordinate
15984                        	
15985                        		.dbg	line,	"include\init.c", 495; // in pixels, and the draw width and height in terms of 8x8 characters.
15986                        	
15987                        		.dbg	line,	"include\init.c", 497; vdc_map_pxl_x = 0;
15988                        		__st.wmiq	0, _vdc_map_pxl_x
         02:D442  9C 87 26   			stz.l	_vdc_map_pxl_x
         02:D445  9C 88 26   			stz.h	_vdc_map_pxl_x
15989                        	
15990                        		.dbg	line,	"include\init.c", 498; vdc_map_pxl_y = 0;
15991                        		__st.wmiq	0, _vdc_map_pxl_y
         02:D448  9C 89 26   			stz.l	_vdc_map_pxl_y
         02:D44B  9C 8A 26   			stz.h	_vdc_map_pxl_y
15992                        	
15993                        		.dbg	line,	"include\init.c", 500; vdc_map_draw_w = 32;
15994                        		__st.umiq	32, _vdc_map_draw_w
         02:D44E  A9 20      			lda.l	#32
         02:D450  8D 83 26   			sta	_vdc_map_draw_w
15995                        	
15996                        		.dbg	line,	"include\init.c", 501; vdc_map_draw_h = 28;
15997                        		__st.umiq	28, _vdc_map_draw_h
         02:D453  A9 1C      			lda.l	#28
         02:D455  8D 84 26   			sta	_vdc_map_draw_h
15998                        	
15999                        		.dbg	line,	"include\init.c", 503; draw_map();
16000                        		__call		_draw_map
         02:D458  20 09 FF   			call	_draw_map
16001                        	
16002                        		.dbg	line,	"include\init.c", 505; display_SCORE();
16003                        		__call		_display_SCORE
         02:D45B  20 FF FE   			call	_display_SCORE
16004                        	
16005                        		.dbg	line,	"include\init.c", 506; display_TIME_LEVEL();
16006                        		__call		_display_TIME_LEVEL
         02:D45E  20 F5 FE   			call	_display_TIME_LEVEL
16007                        	
16008                        		.dbg	line,	"include\init.c", 507; display_KEY();
16009                        		__call		_display_KEY
         02:D461  20 8B FF   			call	_display_KEY
16010                        	
16011                        		.dbg	line,	"include\init.c", 508; display_POTION();
16012                        		__call		_display_POTION
         02:D464  20 3B FF   			call	_display_POTION
16013                        	
16014                        		.dbg	line,	"include\init.c", 509; display_ZENNY();
16015                        		__call		_display_ZENNY
         02:D467  20 45 FF   			call	_display_ZENNY
16016                        	
16017                        		.dbg	line,	"include\init.c", 510; }
16018    02:D46A             	.LL678:
16019                        		__return	0
         02:D46A  4C EF FF   			jmp	leave_proc
16020                        		.dbg	clear
16021                        		.endp
16022                        		.pceas
16023                        	
16024                        		.dbg	line,	"include\init.c", 513; void init_LEVEL()
16025                        		.dbg	line,	"include\init.c", 514; {
16026                        	;***********************
16027                        	;***********************
16028                        	
16029                        		.hucc
16030    17:DAF3             		.proc		_init_LEVEL
16031                        		__enter		_init_LEVEL
16032                        	
16033                        		.dbg	line,	"include\init.c", 515; if(level_id == 1)
16034                        		__ld.umq	_level_id
         17:DAF3  AD 15 23   			lda	_level_id
16035                        		__equ_b.uiq	1
         17:DAF6  C9 01      			cmp	#1
         17:DAF8  F0 01      			beq	!+
         17:DAFA  18         			clc
         17:DAFB             	!:
16036                        		__bfalse	.LL696
         17:DAFB  B0 03 4C E5			bcc	.LL696
         17:DAFF  DF          
16037                        	
16038                        		.dbg	line,	"include\init.c", 516; {
16039                        	
16040                        		.dbg	line,	"include\init.c", 517; char i;
16041                        	
16042                        		.dbg	line,	"include\init.c", 518; 
16043                        	
16044                        		.dbg	line,	"include\init.c", 519; // VSYNC //
16045                        	
16046                        		.dbg	line,	"include\init.c", 520; vsync();
16047                        		__call		_vsync
         17:DB00  20 09 E3   			call	_vsync
16048                        	
16049                        		.dbg	line,	"include\init.c", 523; // DISABLE DISPLAY //
16050                        	
16051                        		.dbg	line,	"include\init.c", 524; disp_off();
16052                        		__call		_disp_off
         17:DB03  20 29 E4   			call	_disp_off
16053                        	
16054                        		.dbg	line,	"include\init.c", 527; // SET VDC 1 SCREEN SIZE (IN TILES) - 64x32 = 512x256 PIXELS
16055                        	
16056                        		.dbg	line,	"include\init.c", 528; set_screen_size(SCR_SIZE_64x32);
16057                        		__st.umiq	1, _al
         17:DB06  A9 01      			lda.l	#1
         17:DB08  85 F8      			sta	_al
16058                        		__call		_set_screen_size.1
         17:DB0A  20 31 FF   			call	_set_screen_size.1
16059                        	
16060                        		.dbg	line,	"include\init.c", 531; // SET VDC 2 SCREEN SIZE (IN TILES) - 64x32 = 512x256 PIXELS
16061                        	
16062                        		.dbg	line,	"include\init.c", 532; sgx_set_screen_size(SCR_SIZE_64x32);
16063                        		__st.umiq	1, _al
         17:DB0D  A9 01      			lda.l	#1
         17:DB0F  85 F8      			sta	_al
16064                        		__call		_sgx_set_screen_size.1
         17:DB11  20 27 FF   			call	_sgx_set_screen_size.1
16065                        	
16066                        		.dbg	line,	"include\init.c", 535; // INIT SPRITE ATTRIBUTE TABLE //
16067                        	
16068                        		.dbg	line,	"include\init.c", 536; //init_satb();
16069                        	
16070                        		.dbg	line,	"include\init.c", 541; //**************************************************************************************//
16071                        	
16072                        		.dbg	line,	"include\init.c", 542; //                                                                                      //
16073                        	
16074                        		.dbg	line,	"include\init.c", 543; //                                      VARIABLES                                       //
16075                        	
16076                        		.dbg	line,	"include\init.c", 544; //                                                                                      //
16077                        	
16078                        		.dbg	line,	"include\init.c", 545; //**************************************************************************************//
16079                        	
16080                        		.dbg	line,	"include\init.c", 547; time_counter = 0;
16081                        		__st.umiq	0, _time_counter
         17:DB14  9C 32 23   			stz	_time_counter
16082                        	
16083                        		.dbg	line,	"include\init.c", 548; 
16084                        	
16085                        		.dbg	line,	"include\init.c", 549; if(respawn == RESPAWN_SHOP)
16086                        		__ld.umq	_respawn
         17:DB17  AD 16 23   			lda	_respawn
16087                        		__equ_b.uiq	2
         17:DB1A  C9 02      			cmp	#2
         17:DB1C  F0 01      			beq	!+
         17:DB1E  18         			clc
         17:DB1F             	!:
16088                        		__bfalse	.LL697
         17:DB1F  90 10      			bcc	.LL697
16089                        	
16090                        		.dbg	line,	"include\init.c", 550; {
16091                        	
16092                        		.dbg	line,	"include\init.c", 551; minutes = minutes_backup;
16093                        		__ld.um		_minutes_backup
         17:DB21  AD 33 23   			lda	_minutes_backup
         17:DB24  C2         			cly
16094                        		__st.umq	_minutes
         17:DB25  8D 30 23   			sta	_minutes
16095                        	
16096                        		.dbg	line,	"include\init.c", 552; seconds = seconds_backup;
16097                        		__ld.um		_seconds_backup
         17:DB28  AD 34 23   			lda	_seconds_backup
         17:DB2B  C2         			cly
16098                        		__st.umq	_seconds
         17:DB2C  8D 31 23   			sta	_seconds
16099                        	
16100                        		.dbg	line,	"include\init.c", 553; }
16101                        	
16102                        		.dbg	line,	"include\init.c", 555; else
16103                        		__bra		.LL698
         17:DB2F  80 0A      			bra	.LL698
16104    17:DB31             	.LL697:
16105                        	
16106                        		.dbg	line,	"include\init.c", 556; {
16107                        	
16108                        		.dbg	line,	"include\init.c", 557; minutes = 1;
16109                        		__st.umiq	1, _minutes
         17:DB31  A9 01      			lda.l	#1
         17:DB33  8D 30 23   			sta	_minutes
16110                        	
16111                        		.dbg	line,	"include\init.c", 558; seconds = 59;
16112                        		__st.umiq	59, _seconds
         17:DB36  A9 3B      			lda.l	#59
         17:DB38  8D 31 23   			sta	_seconds
16113                        	
16114                        		.dbg	line,	"include\init.c", 559; }
16115    17:DB3B             	.LL698:
16116                        	
16117                        		.dbg	line,	"include\init.c", 561; camera_max_y_position = 768;
16118                        		__st.wmiq	768, _camera_max_y_position
         17:DB3B  9C DE 24   			stz.l	_camera_max_y_position
         17:DB3E  A9 03      			lda.h	#768
         17:DB40  8D DF 24   			sta.h	_camera_max_y_position
16119                        	
16120                        		.dbg	line,	"include\init.c", 562; jump_max_index = 34;
16121                        		__st.umiq	34, _jump_max_index
         17:DB43  A9 22      			lda.l	#34
         17:DB45  8D 22 23   			sta	_jump_max_index
16122                        	
16123                        		.dbg	line,	"include\init.c", 563; score = 0;
16124                        		__st.wmiq	0, _score
         17:DB48  9C 36 26   			stz.l	_score
         17:DB4B  9C 37 26   			stz.h	_score
16125                        	
16126                        		.dbg	line,	"include\init.c", 564; level_object_number = OBJECT_NUMBER_LV1;
16127                        		__st.umiq	23, _level_object_number
         17:DB4E  A9 17      			lda.l	#23
         17:DB50  8D 36 23   			sta	_level_object_number
16128                        	
16129                        		.dbg	line,	"include\init.c", 565; level_chest_number = CHEST_NUMBER_LV1;
16130                        		__st.umiq	2, _level_chest_number
         17:DB53  A9 02      			lda.l	#2
         17:DB55  8D A5 23   			sta	_level_chest_number
16131                        	
16132                        		.dbg	line,	"include\init.c", 566; level_npc_number = NPC_NUMBER_LV1;
16133                        		__st.umiq	2, _level_npc_number
         17:DB58  A9 02      			lda.l	#2
         17:DB5A  8D B8 23   			sta	_level_npc_number
16134                        	
16135                        		.dbg	line,	"include\init.c", 567; object_start_index = OBJECT_START_INDEX_LV1;
16136                        		__st.umiq	0, _object_start_index
         17:DB5D  9C 35 23   			stz	_object_start_index
16137                        	
16138                        		.dbg	line,	"include\init.c", 568; chest_start_index = CHEST_START_INDEX_LV1;
16139                        		__st.umiq	23, _chest_start_index
         17:DB60  A9 17      			lda.l	#23
         17:DB62  8D A4 23   			sta	_chest_start_index
16140                        	
16141                        		.dbg	line,	"include\init.c", 569; npc_start_index = NPC_START_INDEX_LV1;
16142                        		__st.umiq	25, _npc_start_index
         17:DB65  A9 19      			lda.l	#25
         17:DB67  8D B7 23   			sta	_npc_start_index
16143                        	
16144                        		.dbg	line,	"include\init.c", 570; jump_ladder = FALSE;
16145                        		__st.umiq	0, _jump_ladder
         17:DB6A  9C 21 23   			stz	_jump_ladder
16146                        	
16147                        		.dbg	line,	"include\init.c", 574; //**************************************************************************************//
16148                        	
16149                        		.dbg	line,	"include\init.c", 575; //                                                                                      //
16150                        	
16151                        		.dbg	line,	"include\init.c", 576; //                                        VDC 2                                         //
16152                        	
16153                        		.dbg	line,	"include\init.c", 577; //                                                                                      //
16154                        	
16155                        		.dbg	line,	"include\init.c", 578; //**************************************************************************************//
16156                        	
16157                        		.dbg	line,	"include\init.c", 580; //--------------------------------------------------------------------------------------//
16158                        	
16159                        		.dbg	line,	"include\init.c", 581; //                                    LOAD TILESET                                      //
16160                        	
16161                        		.dbg	line,	"include\init.c", 582; //--------------------------------------------------------------------------------------//
16162                        	
16163                        		.dbg	line,	"include\init.c", 584; sgx_load_vram( 0x1000, tileset_LV1_BG_B, SIZEOF(tileset_LV1_BG_B) >> 1 );
16164                        		__st.wmiq	4096, _di
         17:DB6D  64 F0      			stz.l	_di
         17:DB6F  A9 10      			lda.h	#4096
         17:DB71  85 F1      			sta.h	_di
16165                        		__farptr	_tileset_LV1_BG_B, _bp_bank, _bp
         17:DB73  A9 E0      			lda.l	#$6000 + ($1FFF & (_tileset_LV1_BG_B))
         17:DB75  85 EC      			sta.l	_bp
         17:DB77  A9 6A      			lda.h	#$6000 + ($1FFF & (_tileset_LV1_BG_B))
         17:DB79  85 ED      			sta.h	_bp
         17:DB7B  A9 05      			lda	#bank(_tileset_LV1_BG_B)
         17:DB7D  85 02      			sta	_bp_bank
16166                        		__ld.wi		___sizeof__tileset_LV1_BG_B
         17:DB7F  A9 E0      			lda.l	#___sizeof__tileset_LV1_BG_B
         17:DB81  A0 72      			ldy.h	#___sizeof__tileset_LV1_BG_B
16167                        		__lsr.wi	1
         17:DB83  42         			say
         17:DB84  4A         			lsr	a
         17:DB85  42         			say
         17:DB86  6A         			ror	a
16168                        		__st.wmq	_ax
         17:DB87  85 F8      			sta.l	_ax
         17:DB89  84 F9      			sty.h	_ax
16169                        		 _sgx_load_vram.3
         17:DB8B  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         17:DB8D  20 4F FF   			call	load_vram_x
16170                        	
16171                        		.dbg	line,	"include\init.c", 587; //--------------------------------------------------------------------------------------//
16172                        	
16173                        		.dbg	line,	"include\init.c", 588; //                               LOAD WALL & DOOR TILES                                 //
16174                        	
16175                        		.dbg	line,	"include\init.c", 589; //--------------------------------------------------------------------------------------//
16176                        	
16177                        		.dbg	line,	"include\init.c", 591; sgx_load_vram( LV1_WALL_VRAM_ADR, tileset_LV1_WALL, SIZEOF(tileset_LV1_WALL) >> 1 );
16178                        		__st.wmiq	4096, _di
         17:DB90  64 F0      			stz.l	_di
         17:DB92  A9 10      			lda.h	#4096
         17:DB94  85 F1      			sta.h	_di
16179                        		__farptr	_tileset_LV1_WALL, _bp_bank, _bp
         17:DB96  A9 60      			lda.l	#$6000 + ($1FFF & (_tileset_LV1_WALL))
         17:DB98  85 EC      			sta.l	_bp
         17:DB9A  A9 7D      			lda.h	#$6000 + ($1FFF & (_tileset_LV1_WALL))
         17:DB9C  85 ED      			sta.h	_bp
         17:DB9E  A9 04      			lda	#bank(_tileset_LV1_WALL)
         17:DBA0  85 02      			sta	_bp_bank
16180                        		__ld.wi		___sizeof__tileset_LV1_WALL
         17:DBA2  A9 00      			lda.l	#___sizeof__tileset_LV1_WALL
         17:DBA4  A0 02      			ldy.h	#___sizeof__tileset_LV1_WALL
16181                        		__lsr.wi	1
         17:DBA6  42         			say
         17:DBA7  4A         			lsr	a
         17:DBA8  42         			say
         17:DBA9  6A         			ror	a
16182                        		__st.wmq	_ax
         17:DBAA  85 F8      			sta.l	_ax
         17:DBAC  84 F9      			sty.h	_ax
16183                        		 _sgx_load_vram.3
         17:DBAE  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         17:DBB0  20 4F FF   			call	load_vram_x
16184                        	
16185                        		.dbg	line,	"include\init.c", 592; sgx_load_vram( LV1_DOOR_VRAM_ADR, tileset_LV1_DOOR_OPEN, SIZEOF(tileset_LV1_DOOR_OPEN) >> 1 );
16186                        		__st.wmiq	4352, _di
         17:DBB3  64 F0      			stz.l	_di
         17:DBB5  A9 11      			lda.h	#4352
         17:DBB7  85 F1      			sta.h	_di
16187                        		__farptr	_tileset_LV1_DOOR_OPEN, _bp_bank, _bp
         17:DBB9  A9 60      			lda.l	#$6000 + ($1FFF & (_tileset_LV1_DOOR_OPEN))
         17:DBBB  85 EC      			sta.l	_bp
         17:DBBD  A9 7F      			lda.h	#$6000 + ($1FFF & (_tileset_LV1_DOOR_OPEN))
         17:DBBF  85 ED      			sta.h	_bp
         17:DBC1  A9 04      			lda	#bank(_tileset_LV1_DOOR_OPEN)
         17:DBC3  85 02      			sta	_bp_bank
16188                        		__ld.wi		___sizeof__tileset_LV1_DOOR_OPEN
         17:DBC5  A9 00      			lda.l	#___sizeof__tileset_LV1_DOOR_OPEN
         17:DBC7  A0 03      			ldy.h	#___sizeof__tileset_LV1_DOOR_OPEN
16189                        		__lsr.wi	1
         17:DBC9  42         			say
         17:DBCA  4A         			lsr	a
         17:DBCB  42         			say
         17:DBCC  6A         			ror	a
16190                        		__st.wmq	_ax
         17:DBCD  85 F8      			sta.l	_ax
         17:DBCF  84 F9      			sty.h	_ax
16191                        		 _sgx_load_vram.3
         17:DBD1  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         17:DBD3  20 4F FF   			call	load_vram_x
16192                        	
16193                        		.dbg	line,	"include\init.c", 595; //--------------------------------------------------------------------------------------//
16194                        	
16195                        		.dbg	line,	"include\init.c", 596; //                                     SET MULTIMAP                                     //
16196                        	
16197                        		.dbg	line,	"include\init.c", 597; //--------------------------------------------------------------------------------------//
16198                        	
16199                        		.dbg	line,	"include\init.c", 599; // multimap is 5 screens wide //
16200                        	
16201                        		.dbg	line,	"include\init.c", 600; sgx_set_multimap( multimap_LV1_BG_B , 5 );
16202                        		__farptr	_multimap_LV1_BG_B, sgx_scr_bank, sgx_scr_addr
         17:DBD6  A9 00      			lda.l	#$6000 + ($1FFF & (_multimap_LV1_BG_B))
         17:DBD8  8D D5 2B   			sta.l	sgx_scr_addr
         17:DBDB  A9 69      			lda.h	#$6000 + ($1FFF & (_multimap_LV1_BG_B))
         17:DBDD  8D D6 2B   			sta.h	sgx_scr_addr
         17:DBE0  A9 0B      			lda	#bank(_multimap_LV1_BG_B)
         17:DBE2  8D D7 2B   			sta	sgx_scr_bank
16203                        		__st.umiq	5, sgx_map_scrn_w
         17:DBE5  A9 05      			lda.l	#5
         17:DBE7  8D 96 26   			sta	sgx_map_scrn_w
16204                        		 _sgx_set_multimap.2
         17:DBEA  AD 8E 26   			lda	sgx_bat_width
         17:DBED  4A         			lsr	a
         17:DBEE  8D 95 26   			sta	sgx_map_line_w
16205                        	
16206                        		.dbg	line,	"include\init.c", 603; //--------------------------------------------------------------------------------------//
16207                        	
16208                        		.dbg	line,	"include\init.c", 604; //                                    DRAW TILEMAP                                      //
16209                        	
16210                        		.dbg	line,	"include\init.c", 605; //--------------------------------------------------------------------------------------//
16211                        	
16212                        		.dbg	line,	"include\init.c", 607; // The blkmap is drawn using global variables for the top-left coordinate
16213                        	
16214                        		.dbg	line,	"include\init.c", 608; // in pixels, and the draw width and height in terms of 8x8 characters.
16215                        	
16216                        		.dbg	line,	"include\init.c", 610; if(respawn == FALSE)
16217                        		__not.um	_respawn
         17:DBF1  AD 16 23   			lda	_respawn
         17:DBF4  18         			clc
         17:DBF5  D0 01      			bne	!+
         17:DBF7  38         			sec
         17:DBF8             	!:
16218                        		__bfalse	.LL699
         17:DBF8  90 12      			bcc	.LL699
16219                        	
16220                        		.dbg	line,	"include\init.c", 611; {
16221                        	
16222                        		.dbg	line,	"include\init.c", 612; sgx_map_pxl_x = 96;
16223                        		__st.wmiq	96, _sgx_map_pxl_x
         17:DBFA  A9 60      			lda.l	#96
         17:DBFC  8D 97 26   			sta.l	_sgx_map_pxl_x
         17:DBFF  9C 98 26   			stz.h	_sgx_map_pxl_x
16224                        	
16225                        		.dbg	line,	"include\init.c", 613; sgx_map_pxl_y = 768;
16226                        		__st.wmiq	768, _sgx_map_pxl_y
         17:DC02  9C 99 26   			stz.l	_sgx_map_pxl_y
         17:DC05  A9 03      			lda.h	#768
         17:DC07  8D 9A 26   			sta.h	_sgx_map_pxl_y
16227                        	
16228                        		.dbg	line,	"include\init.c", 614; }
16229                        	
16230                        		.dbg	line,	"include\init.c", 616; else if(respawn == RESPAWN_SHOP)
16231                        		__bra		.LL700
         17:DC0A  80 22      			bra	.LL700
16232    17:DC0C             	.LL699:
16233                        		__ld.umq	_respawn
         17:DC0C  AD 16 23   			lda	_respawn
16234                        		__equ_b.uiq	2
         17:DC0F  C9 02      			cmp	#2
         17:DC11  F0 01      			beq	!+
         17:DC13  18         			clc
         17:DC14             	!:
16235                        		__bfalse	.LL701
         17:DC14  90 18      			bcc	.LL701
16236                        	
16237                        		.dbg	line,	"include\init.c", 617; {
16238                        	
16239                        		.dbg	line,	"include\init.c", 618; sgx_map_pxl_x = camera_pos_x_backup;
16240                        		__ld.wm		_camera_pos_x_backup
         17:DC16  AD E0 24   			lda.l	_camera_pos_x_backup
         17:DC19  AC E1 24   			ldy.h	_camera_pos_x_backup
16241                        		__st.wmq	_sgx_map_pxl_x
         17:DC1C  8D 97 26   			sta.l	_sgx_map_pxl_x
         17:DC1F  8C 98 26   			sty.h	_sgx_map_pxl_x
16242                        	
16243                        		.dbg	line,	"include\init.c", 619; sgx_map_pxl_y = camera_pos_y_backup;
16244                        		__ld.wm		_camera_pos_y_backup
         17:DC22  AD E2 24   			lda.l	_camera_pos_y_backup
         17:DC25  AC E3 24   			ldy.h	_camera_pos_y_backup
16245                        		__st.wmq	_sgx_map_pxl_y
         17:DC28  8D 99 26   			sta.l	_sgx_map_pxl_y
         17:DC2B  8C 9A 26   			sty.h	_sgx_map_pxl_y
16246                        	
16247                        		.dbg	line,	"include\init.c", 620; }
16248                        	
16249                        		.dbg	line,	"include\init.c", 623; sgx_map_draw_w = 63;
16250    17:DC2E             	.LL701:
16251    17:DC2E             	.LL700:
16252                        		__st.umiq	63, _sgx_map_draw_w
         17:DC2E  A9 3F      			lda.l	#63
         17:DC30  8D 93 26   			sta	_sgx_map_draw_w
16253                        	
16254                        		.dbg	line,	"include\init.c", 624; sgx_map_draw_h = 29;
16255                        		__st.umiq	29, _sgx_map_draw_h
         17:DC33  A9 1D      			lda.l	#29
         17:DC35  8D 94 26   			sta	_sgx_map_draw_h
16256                        	
16257                        		.dbg	line,	"include\init.c", 626; sgx_draw_map();
16258                        		__call		_sgx_draw_map
         17:DC38  20 EB FE   			call	_sgx_draw_map
16259                        	
16260                        		.dbg	line,	"include\init.c", 631; //**************************************************************************************//
16261                        	
16262                        		.dbg	line,	"include\init.c", 632; //                                                                                      //
16263                        	
16264                        		.dbg	line,	"include\init.c", 633; //                                         HUD                                          //
16265                        	
16266                        		.dbg	line,	"include\init.c", 634; //                                                                                      //
16267                        	
16268                        		.dbg	line,	"include\init.c", 635; //**************************************************************************************//
16269                        	
16270                        		.dbg	line,	"include\init.c", 637; init_HUD();
16271                        		__call		_init_HUD
         17:DC3B  20 E1 FE   			call	_init_HUD
16272                        	
16273                        		.dbg	line,	"include\init.c", 639; 
16274                        	
16275                        		.dbg	line,	"include\init.c", 642; //**************************************************************************************//
16276                        	
16277                        		.dbg	line,	"include\init.c", 643; //                                                                                      //
16278                        	
16279                        		.dbg	line,	"include\init.c", 644; //                                  SETUP SCROLL_SPLIT                                  //
16280                        	
16281                        		.dbg	line,	"include\init.c", 645; //                                                                                      //
16282                        	
16283                        		.dbg	line,	"include\init.c", 646; //**************************************************************************************//
16284                        	
16285                        		.dbg	line,	"include\init.c", 648; //--------------------------------------------------------------------------------------//
16286                        	
16287                        		.dbg	line,	"include\init.c", 649; //                                        VDC 2                                         //
16288                        	
16289                        		.dbg	line,	"include\init.c", 650; //--------------------------------------------------------------------------------------//
16290                        	
16291                        		.dbg	line,	"include\init.c", 652; sgx_scroll_map();
16292                        		__call		_sgx_scroll_map
         17:DC3E  20 81 FF   			call	_sgx_scroll_map
16293                        	
16294                        		.dbg	line,	"include\init.c", 654; sgx_scroll_split(0,   0, sgx_map_pxl_x & (BAT_SIZE_W - 1), sgx_map_pxl_y & (BAT_SIZE_H - 1), BKG_ON | SPR_ON);
16295                        		__st.umiq	0, _al
         17:DC41  64 F8      			stz	_al
16296                        		__st.umiq	0, _ah
         17:DC43  64 F9      			stz	_ah
16297                        		__ld.wm		_sgx_map_pxl_x
         17:DC45  AD 97 26   			lda.l	_sgx_map_pxl_x
         17:DC48  AC 98 26   			ldy.h	_sgx_map_pxl_x
16298                        		__and.wi	2047
         17:DC4B  29 FF      			and.l	#2047
         17:DC4D  42         			say
         17:DC4E  29 07      			and.h	#2047
         17:DC50  42         			say
16299                        		__st.wmq	_bx
         17:DC51  85 FA      			sta.l	_bx
         17:DC53  84 FB      			sty.h	_bx
16300                        		__ld.wm		_sgx_map_pxl_y
         17:DC55  AD 99 26   			lda.l	_sgx_map_pxl_y
         17:DC58  AC 9A 26   			ldy.h	_sgx_map_pxl_y
16301                        		__and.wi	255
         17:DC5B  29 FF      			and	#255
         17:DC5D  C2         			cly
16302                        		__st.wmq	_cx
         17:DC5E  85 FC      			sta.l	_cx
         17:DC60  84 FD      			sty.h	_cx
16303                        		__st.umiq	192, _dl
         17:DC62  A9 C0      			lda.l	#192
         17:DC64  85 FE      			sta	_dl
16304                        		__call		_sgx_scroll_split.5
         17:DC66  20 77 FF   			call	_sgx_scroll_split.5
16305                        	
16306                        		.dbg	line,	"include\init.c", 659; //--------------------------------------------------------------------------------------//
16307                        	
16308                        		.dbg	line,	"include\init.c", 660; //                                   LOAD BG PALETTES                                   //
16309                        	
16310                        		.dbg	line,	"include\init.c", 661; //--------------------------------------------------------------------------------------//
16311                        	
16312                        		.dbg	line,	"include\init.c", 663; // LOAD ALL PALETTES AT BG PALETTE 0 //
16313                        	
16314                        		.dbg	line,	"include\init.c", 664; load_palette( 0, palette_LV1, 16 );
16315                        		__st.umiq	0, _al
         17:DC69  64 F8      			stz	_al
16316                        		__farptr	_palette_LV1, _bp_bank, _bp
         17:DC6B  A9 A0      			lda.l	#$6000 + ($1FFF & (_palette_LV1))
         17:DC6D  85 EC      			sta.l	_bp
         17:DC6F  A9 68      			lda.h	#$6000 + ($1FFF & (_palette_LV1))
         17:DC71  85 ED      			sta.h	_bp
         17:DC73  A9 0D      			lda	#bank(_palette_LV1)
         17:DC75  85 02      			sta	_bp_bank
16317                        		__st.umiq	16, _ah
         17:DC77  A9 10      			lda.l	#16
         17:DC79  85 F9      			sta	_ah
16318                        		__call		_load_palette.3
         17:DC7B  20 1D FF   			call	_load_palette.3
16319                        	
16320                        		.dbg	line,	"include\init.c", 669; //**************************************************************************************//
16321                        	
16322                        		.dbg	line,	"include\init.c", 670; //                                                                                      //
16323                        	
16324                        		.dbg	line,	"include\init.c", 671; //                                       SPRITES                                        //
16325                        	
16326                        		.dbg	line,	"include\init.c", 672; //                                                                                      //
16327                        	
16328                        		.dbg	line,	"include\init.c", 673; //**************************************************************************************//
16329                        	
16330                        		.dbg	line,	"include\init.c", 675; //--------------------------------------------------------------------------------------//
16331                        	
16332                        		.dbg	line,	"include\init.c", 676; //                                        PLAYER                                        //
16333                        	
16334                        		.dbg	line,	"include\init.c", 677; //--------------------------------------------------------------------------------------//
16335                        	
16336                        		.dbg	line,	"include\init.c", 679; // LOAD ALL PLAYER TILES //
16337                        	
16338                        		.dbg	line,	"include\init.c", 680; set_far_base(TABLE_PLAYER_TILES_BANK[player_naked],TABLE_PLAYER_TILES_ADR[player_naked]);
16339                        		__ldx.umq	_player_naked
         17:DC7E  AE 1F 23   			ldx	_player_naked
16340                        		__ld.uax	_TABLE_PLAYER_TILES_BANK
         17:DC81  BD 1B 61   			lda	_TABLE_PLAYER_TILES_BANK, x
         17:DC84  C2         			cly
16341                        		__st.umq	_bp_bank
         17:DC85  85 02      			sta	_bp_bank
16342                        		__ld2x.umq	_player_naked
         17:DC87  AD 1F 23   			lda	_player_naked
         17:DC8A  0A         			asl	a
         17:DC8B  AA         			tax
16343                        		__ld.wax	_TABLE_PLAYER_TILES_ADR
         17:DC8C  BD 17 61   			lda.l	_TABLE_PLAYER_TILES_ADR, x
         17:DC8F  BC 18 61   			ldy.h	_TABLE_PLAYER_TILES_ADR, x
16344                        		__st.wmq	_bp
         17:DC92  85 EC      			sta.l	_bp
         17:DC94  84 ED      			sty.h	_bp
16345                        	
16346                        		.dbg	line,	"include\init.c", 681; far_load_vram(PLAYER_VRAM_ADR,TILES_400);
16347                        		__st.wmiq	5120, _di
         17:DC96  64 F0      			stz.l	_di
         17:DC98  A9 14      			lda.h	#5120
         17:DC9A  85 F1      			sta.h	_di
16348                        		__st.wmiq	6400, _ax
         17:DC9C  64 F8      			stz.l	_ax
         17:DC9E  A9 19      			lda.h	#6400
         17:DCA0  85 F9      			sta.h	_ax
16349                        		 _far_load_vram.2
         17:DCA2  82         			clx				; Offset to PCE VDC.
         17:DCA3  20 4F FF   			call	load_vram_x
16350                        	
16351                        		.dbg	line,	"include\init.c", 684; // SELECT PLAYER CORE SPRITE //
16352                        	
16353                        		.dbg	line,	"include\init.c", 685; spr_set(player_id); // PLAYER_START_INDEX
16354                        		__ld.umq	_player_id
         17:DCA6  AD 17 23   			lda	_player_id
16355                        		__call		_spr_set.1
         17:DCA9  20 DD E7   			call	_spr_set.1
16356                        	
16357                        		.dbg	line,	"include\init.c", 688; player_pos_x = 112;
16358                        		__st.wmiq	112, _player_pos_x
         17:DCAC  A9 70      			lda.l	#112
         17:DCAE  8D DA 24   			sta.l	_player_pos_x
         17:DCB1  9C DB 24   			stz.h	_player_pos_x
16359                        	
16360                        		.dbg	line,	"include\init.c", 689; player_pos_y = PLAYER_BASE_Y_POS;
16361                        		__st.wmiq	128, _player_pos_y
         17:DCB4  A9 80      			lda.l	#128
         17:DCB6  8D DC 24   			sta.l	_player_pos_y
         17:DCB9  9C DD 24   			stz.h	_player_pos_y
16362                        	
16363                        		.dbg	line,	"include\init.c", 692; spr_x(player_pos_x);
16364                        		__ld.wm		_player_pos_x
         17:DCBC  AD DA 24   			lda.l	_player_pos_x
         17:DCBF  AC DB 24   			ldy.h	_player_pos_x
16365                        		__call		_spr_x.1
         17:DCC2  20 0A E8   			call	_spr_x.1
16366                        	
16367                        		.dbg	line,	"include\init.c", 693; spr_y(player_pos_y);
16368                        		__ld.wm		_player_pos_y
         17:DCC5  AD DC 24   			lda.l	_player_pos_y
         17:DCC8  AC DD 24   			ldy.h	_player_pos_y
16369                        		__call		_spr_y.1
         17:DCCB  20 19 E8   			call	_spr_y.1
16370                        	
16371                        		.dbg	line,	"include\init.c", 695; // SET TILES DATA FOR THE PLAYER //
16372                        	
16373                        		.dbg	line,	"include\init.c", 696; spr_pattern(PLAYER_VRAM_ADR);
16374                        		__ld.wi		5120
         17:DCCE  62         			cla
         17:DCCF  A0 14      			ldy.h	#5120
16375                        		__call		_spr_pattern.1
         17:DCD1  20 26 E8   			call	_spr_pattern.1
16376                        	
16377                        		.dbg	line,	"include\init.c", 698; // SET SPRITE FLIP //
16378                        	
16379                        		.dbg	line,	"include\init.c", 699; spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_32x32);
16380                        		__st.umiq	185, _al
         17:DCD4  A9 B9      			lda.l	#185
         17:DCD6  85 F8      			sta	_al
16381                        		__ld.uiq	17
         17:DCD8  A9 11      			lda	#17
16382                        		__call		_spr_ctrl.2
         17:DCDA  20 3C E8   			call	_spr_ctrl.2
16383                        	
16384                        		.dbg	line,	"include\init.c", 701; 
16385                        	
16386                        		.dbg	line,	"include\init.c", 704; spr_pal(0);
16387                        		__ld.uiq	0
         17:DCDD  62         			cla
16388                        		__call		_spr_pal.1
         17:DCDE  20 4D E8   			call	_spr_pal.1
16389                        	
16390                        		.dbg	line,	"include\init.c", 705; spr_pri(TRUE);
16391                        		__ld.uiq	1
         17:DCE1  A9 01      			lda	#1
16392                        		__call		_spr_pri.1
         17:DCE3  20 5C E8   			call	_spr_pri.1
16393                        	
16394                        		.dbg	line,	"include\init.c", 708; //--------------------------------------------------------------------------------------//
16395                        	
16396                        		.dbg	line,	"include\init.c", 709; //                                        CHAIN                                         //
16397                        	
16398                        		.dbg	line,	"include\init.c", 710; //--------------------------------------------------------------------------------------//
16399                        	
16400                        		.dbg	line,	"include\init.c", 712; load_vram(CHAIN_VRAM_ADR, tiles_SPR_CHAIN , TILES_4);
16401                        		__st.wmiq	31744, _di
         17:DCE6  64 F0      			stz.l	_di
         17:DCE8  A9 7C      			lda.h	#31744
         17:DCEA  85 F1      			sta.h	_di
16402                        		__farptr	_tiles_SPR_CHAIN, _bp_bank, _bp
         17:DCEC  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_CHAIN))
         17:DCEE  85 EC      			sta.l	_bp
         17:DCF0  A9 66      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_CHAIN))
         17:DCF2  85 ED      			sta.h	_bp
         17:DCF4  A9 13      			lda	#bank(_tiles_SPR_CHAIN)
         17:DCF6  85 02      			sta	_bp_bank
16403                        		__st.wmiq	64, _ax
         17:DCF8  A9 40      			lda.l	#64
         17:DCFA  85 F8      			sta.l	_ax
         17:DCFC  64 F9      			stz.h	_ax
16404                        		 _load_vram.3
         17:DCFE  82         			clx				; Offset to PCE VDC.
         17:DCFF  20 4F FF   			call	load_vram_x
16405                        	
16406                        		.dbg	line,	"include\init.c", 714; for(i=0 ; i<3 ; i++)
16407                        		__st.umiq	0, __init_LEVEL_end - 1  /* i */
         17:DD02  9C 10 23   			stz	__init_LEVEL_end - 1
16408    17:DD05             	.LL702:
16409                        		__ld.umq	__init_LEVEL_end - 1  /* i */
         17:DD05  AD 10 23   			lda	__init_LEVEL_end - 1
16410                        		__ult_b.uiq	3
         17:DD08  C9 03      			cmp	#3		; Subtract integer from A.
         17:DD0A  6A         			ror	a		; CC if A < integer.
         17:DD0B  49 80      			eor	#$80
         17:DD0D  2A         			rol	a
16411                        		__btrue		.LL704
         17:DD0E  B0 07      			bcs	.LL704
16412                        		__bra		.LL705
         17:DD10  80 2F      			bra	.LL705
16413    17:DD12             	.LL703:
16414                        		__inc.umq	__init_LEVEL_end - 1  /* i */
         17:DD12  EE 10 23   			inc	__init_LEVEL_end - 1
16415                        		__bra		.LL702
         17:DD15  80 EE      			bra	.LL702
16416    17:DD17             	.LL704:
16417                        	
16418                        		.dbg	line,	"include\init.c", 715; {
16419                        	
16420                        		.dbg	line,	"include\init.c", 716; spr_set(chain_id+i);
16421                        		__ld.um		_chain_id
         17:DD17  AD 25 23   			lda	_chain_id
         17:DD1A  C2         			cly
16422                        		__add.um	__init_LEVEL_end - 1  /* i */
         17:DD1B  18         			clc
         17:DD1C  6D 10 23   			adc	__init_LEVEL_end - 1
         17:DD1F  90 01      			bcc	!+
         17:DD21  C8         			iny
         17:DD22             	!:
16423                        		__call		_spr_set.1
         17:DD22  20 DD E7   			call	_spr_set.1
16424                        	
16425                        		.dbg	line,	"include\init.c", 717; spr_pattern(CHAIN_VRAM_ADR);
16426                        		__ld.wi		31744
         17:DD25  62         			cla
         17:DD26  A0 7C      			ldy.h	#31744
16427                        		__call		_spr_pattern.1
         17:DD28  20 26 E8   			call	_spr_pattern.1
16428                        	
16429                        		.dbg	line,	"include\init.c", 718; spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_16x16);
16430                        		__st.umiq	185, _al
         17:DD2B  A9 B9      			lda.l	#185
         17:DD2D  85 F8      			sta	_al
16431                        		__ld.uiq	0
         17:DD2F  62         			cla
16432                        		__call		_spr_ctrl.2
         17:DD30  20 3C E8   			call	_spr_ctrl.2
16433                        	
16434                        		.dbg	line,	"include\init.c", 719; spr_hide();
16435                        		__call		_spr_hide
         17:DD33  20 F8 E7   			call	_spr_hide
16436                        	
16437                        		.dbg	line,	"include\init.c", 721; spr_pal(0);
16438                        		__ld.uiq	0
         17:DD36  62         			cla
16439                        		__call		_spr_pal.1
         17:DD37  20 4D E8   			call	_spr_pal.1
16440                        	
16441                        		.dbg	line,	"include\init.c", 722; spr_pri(TRUE);
16442                        		__ld.uiq	1
         17:DD3A  A9 01      			lda	#1
16443                        		__call		_spr_pri.1
         17:DD3C  20 5C E8   			call	_spr_pri.1
16444                        	
16445                        		.dbg	line,	"include\init.c", 723; }
16446                        		__bra		.LL703
         17:DD3F  80 D1      			bra	.LL703
16447    17:DD41             	.LL705:
16448                        	
16449                        		.dbg	line,	"include\init.c", 724; 
16450                        	
16451                        		.dbg	line,	"include\init.c", 726; //--------------------------------------------------------------------------------------//
16452                        	
16453                        		.dbg	line,	"include\init.c", 727; //                                        WEAPON                                        //
16454                        	
16455                        		.dbg	line,	"include\init.c", 728; //--------------------------------------------------------------------------------------//
16456                        	
16457                        		.dbg	line,	"include\init.c", 730; if(weapon_level == 0)
16458                        		__not.um	_weapon_level
         17:DD41  AD 28 23   			lda	_weapon_level
         17:DD44  18         			clc
         17:DD45  D0 01      			bne	!+
         17:DD47  38         			sec
         17:DD48             	!:
16459                        		__bfalse	.LL706
         17:DD48  90 27      			bcc	.LL706
16460                        	
16461                        		.dbg	line,	"include\init.c", 731; {
16462                        	
16463                        		.dbg	line,	"include\init.c", 732; load_vram(WEAPON_VRAM_ADR, tiles_SPR_WEAPON_0 , SIZEOF(tiles_SPR_WEAPON_0) >> 1);
16464                        		__st.wmiq	31808, _di
         17:DD4A  A9 40      			lda.l	#31808
         17:DD4C  85 F0      			sta.l	_di
         17:DD4E  A9 7C      			lda.h	#31808
         17:DD50  85 F1      			sta.h	_di
16465                        		__farptr	_tiles_SPR_WEAPON_0, _bp_bank, _bp
         17:DD52  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_0))
         17:DD54  85 EC      			sta.l	_bp
         17:DD56  A9 66      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_0))
         17:DD58  85 ED      			sta.h	_bp
         17:DD5A  A9 13      			lda	#bank(_tiles_SPR_WEAPON_0)
         17:DD5C  85 02      			sta	_bp_bank
16466                        		__ld.wi		___sizeof__tiles_SPR_WEAPON_0
         17:DD5E  A9 80      			lda.l	#___sizeof__tiles_SPR_WEAPON_0
         17:DD60  A0 02      			ldy.h	#___sizeof__tiles_SPR_WEAPON_0
16467                        		__lsr.wi	1
         17:DD62  42         			say
         17:DD63  4A         			lsr	a
         17:DD64  42         			say
         17:DD65  6A         			ror	a
16468                        		__st.wmq	_ax
         17:DD66  85 F8      			sta.l	_ax
         17:DD68  84 F9      			sty.h	_ax
16469                        		 _load_vram.3
         17:DD6A  82         			clx				; Offset to PCE VDC.
         17:DD6B  20 4F FF   			call	load_vram_x
16470                        	
16471                        		.dbg	line,	"include\init.c", 733; }
16472                        	
16473                        		.dbg	line,	"include\init.c", 735; else if(weapon_level == 1)
16474                        		__bra		.LL707
         17:DD6E  4C 30 DE   			bra	.LL707
16475    17:DD71             	.LL706:
16476                        		__ld.umq	_weapon_level
         17:DD71  AD 28 23   			lda	_weapon_level
16477                        		__equ_b.uiq	1
         17:DD74  C9 01      			cmp	#1
         17:DD76  F0 01      			beq	!+
         17:DD78  18         			clc
         17:DD79             	!:
16478                        		__bfalse	.LL708
         17:DD79  90 27      			bcc	.LL708
16479                        	
16480                        		.dbg	line,	"include\init.c", 736; {
16481                        	
16482                        		.dbg	line,	"include\init.c", 737; load_vram(WEAPON_VRAM_ADR, tiles_SPR_WEAPON_1 , SIZEOF(tiles_SPR_WEAPON_1) >> 1);
16483                        		__st.wmiq	31808, _di
         17:DD7B  A9 40      			lda.l	#31808
         17:DD7D  85 F0      			sta.l	_di
         17:DD7F  A9 7C      			lda.h	#31808
         17:DD81  85 F1      			sta.h	_di
16484                        		__farptr	_tiles_SPR_WEAPON_1, _bp_bank, _bp
         17:DD83  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_1))
         17:DD85  85 EC      			sta.l	_bp
         17:DD87  A9 69      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_1))
         17:DD89  85 ED      			sta.h	_bp
         17:DD8B  A9 13      			lda	#bank(_tiles_SPR_WEAPON_1)
         17:DD8D  85 02      			sta	_bp_bank
16485                        		__ld.wi		___sizeof__tiles_SPR_WEAPON_1
         17:DD8F  A9 80      			lda.l	#___sizeof__tiles_SPR_WEAPON_1
         17:DD91  A0 02      			ldy.h	#___sizeof__tiles_SPR_WEAPON_1
16486                        		__lsr.wi	1
         17:DD93  42         			say
         17:DD94  4A         			lsr	a
         17:DD95  42         			say
         17:DD96  6A         			ror	a
16487                        		__st.wmq	_ax
         17:DD97  85 F8      			sta.l	_ax
         17:DD99  84 F9      			sty.h	_ax
16488                        		 _load_vram.3
         17:DD9B  82         			clx				; Offset to PCE VDC.
         17:DD9C  20 4F FF   			call	load_vram_x
16489                        	
16490                        		.dbg	line,	"include\init.c", 738; }
16491                        	
16492                        		.dbg	line,	"include\init.c", 740; else if(weapon_level == 2)
16493                        		__bra		.LL709
         17:DD9F  4C 30 DE   			bra	.LL709
16494    17:DDA2             	.LL708:
16495                        		__ld.umq	_weapon_level
         17:DDA2  AD 28 23   			lda	_weapon_level
16496                        		__equ_b.uiq	2
         17:DDA5  C9 02      			cmp	#2
         17:DDA7  F0 01      			beq	!+
         17:DDA9  18         			clc
         17:DDAA             	!:
16497                        		__bfalse	.LL710
         17:DDAA  90 26      			bcc	.LL710
16498                        	
16499                        		.dbg	line,	"include\init.c", 741; {
16500                        	
16501                        		.dbg	line,	"include\init.c", 742; load_vram(WEAPON_VRAM_ADR, tiles_SPR_WEAPON_2 , SIZEOF(tiles_SPR_WEAPON_2) >> 1);
16502                        		__st.wmiq	31808, _di
         17:DDAC  A9 40      			lda.l	#31808
         17:DDAE  85 F0      			sta.l	_di
         17:DDB0  A9 7C      			lda.h	#31808
         17:DDB2  85 F1      			sta.h	_di
16503                        		__farptr	_tiles_SPR_WEAPON_2, _bp_bank, _bp
         17:DDB4  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_2))
         17:DDB6  85 EC      			sta.l	_bp
         17:DDB8  A9 6B      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_2))
         17:DDBA  85 ED      			sta.h	_bp
         17:DDBC  A9 13      			lda	#bank(_tiles_SPR_WEAPON_2)
         17:DDBE  85 02      			sta	_bp_bank
16504                        		__ld.wi		___sizeof__tiles_SPR_WEAPON_2
         17:DDC0  A9 80      			lda.l	#___sizeof__tiles_SPR_WEAPON_2
         17:DDC2  A0 02      			ldy.h	#___sizeof__tiles_SPR_WEAPON_2
16505                        		__lsr.wi	1
         17:DDC4  42         			say
         17:DDC5  4A         			lsr	a
         17:DDC6  42         			say
         17:DDC7  6A         			ror	a
16506                        		__st.wmq	_ax
         17:DDC8  85 F8      			sta.l	_ax
         17:DDCA  84 F9      			sty.h	_ax
16507                        		 _load_vram.3
         17:DDCC  82         			clx				; Offset to PCE VDC.
         17:DDCD  20 4F FF   			call	load_vram_x
16508                        	
16509                        		.dbg	line,	"include\init.c", 743; }
16510                        	
16511                        		.dbg	line,	"include\init.c", 745; else if(weapon_level == 3)
16512                        		__bra		.LL711
         17:DDD0  80 5E      			bra	.LL711
16513    17:DDD2             	.LL710:
16514                        		__ld.umq	_weapon_level
         17:DDD2  AD 28 23   			lda	_weapon_level
16515                        		__equ_b.uiq	3
         17:DDD5  C9 03      			cmp	#3
         17:DDD7  F0 01      			beq	!+
         17:DDD9  18         			clc
         17:DDDA             	!:
16516                        		__bfalse	.LL712
         17:DDDA  90 26      			bcc	.LL712
16517                        	
16518                        		.dbg	line,	"include\init.c", 746; {
16519                        	
16520                        		.dbg	line,	"include\init.c", 747; load_vram(WEAPON_VRAM_ADR, tiles_SPR_WEAPON_3 , SIZEOF(tiles_SPR_WEAPON_3) >> 1);
16521                        		__st.wmiq	31808, _di
         17:DDDC  A9 40      			lda.l	#31808
         17:DDDE  85 F0      			sta.l	_di
         17:DDE0  A9 7C      			lda.h	#31808
         17:DDE2  85 F1      			sta.h	_di
16522                        		__farptr	_tiles_SPR_WEAPON_3, _bp_bank, _bp
         17:DDE4  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_3))
         17:DDE6  85 EC      			sta.l	_bp
         17:DDE8  A9 6E      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_3))
         17:DDEA  85 ED      			sta.h	_bp
         17:DDEC  A9 13      			lda	#bank(_tiles_SPR_WEAPON_3)
         17:DDEE  85 02      			sta	_bp_bank
16523                        		__ld.wi		___sizeof__tiles_SPR_WEAPON_3
         17:DDF0  A9 80      			lda.l	#___sizeof__tiles_SPR_WEAPON_3
         17:DDF2  A0 02      			ldy.h	#___sizeof__tiles_SPR_WEAPON_3
16524                        		__lsr.wi	1
         17:DDF4  42         			say
         17:DDF5  4A         			lsr	a
         17:DDF6  42         			say
         17:DDF7  6A         			ror	a
16525                        		__st.wmq	_ax
         17:DDF8  85 F8      			sta.l	_ax
         17:DDFA  84 F9      			sty.h	_ax
16526                        		 _load_vram.3
         17:DDFC  82         			clx				; Offset to PCE VDC.
         17:DDFD  20 4F FF   			call	load_vram_x
16527                        	
16528                        		.dbg	line,	"include\init.c", 748; }
16529                        	
16530                        		.dbg	line,	"include\init.c", 750; else if(weapon_level == 4)
16531                        		__bra		.LL713
         17:DE00  80 2E      			bra	.LL713
16532    17:DE02             	.LL712:
16533                        		__ld.umq	_weapon_level
         17:DE02  AD 28 23   			lda	_weapon_level
16534                        		__equ_b.uiq	4
         17:DE05  C9 04      			cmp	#4
         17:DE07  F0 01      			beq	!+
         17:DE09  18         			clc
         17:DE0A             	!:
16535                        		__bfalse	.LL714
         17:DE0A  90 24      			bcc	.LL714
16536                        	
16537                        		.dbg	line,	"include\init.c", 751; {
16538                        	
16539                        		.dbg	line,	"include\init.c", 752; load_vram(WEAPON_VRAM_ADR, tiles_SPR_WEAPON_4 , SIZEOF(tiles_SPR_WEAPON_4) >> 1);
16540                        		__st.wmiq	31808, _di
         17:DE0C  A9 40      			lda.l	#31808
         17:DE0E  85 F0      			sta.l	_di
         17:DE10  A9 7C      			lda.h	#31808
         17:DE12  85 F1      			sta.h	_di
16541                        		__farptr	_tiles_SPR_WEAPON_4, _bp_bank, _bp
         17:DE14  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_4))
         17:DE16  85 EC      			sta.l	_bp
         17:DE18  A9 70      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_4))
         17:DE1A  85 ED      			sta.h	_bp
         17:DE1C  A9 13      			lda	#bank(_tiles_SPR_WEAPON_4)
         17:DE1E  85 02      			sta	_bp_bank
16542                        		__ld.wi		___sizeof__tiles_SPR_WEAPON_4
         17:DE20  A9 80      			lda.l	#___sizeof__tiles_SPR_WEAPON_4
         17:DE22  A0 02      			ldy.h	#___sizeof__tiles_SPR_WEAPON_4
16543                        		__lsr.wi	1
         17:DE24  42         			say
         17:DE25  4A         			lsr	a
         17:DE26  42         			say
         17:DE27  6A         			ror	a
16544                        		__st.wmq	_ax
         17:DE28  85 F8      			sta.l	_ax
         17:DE2A  84 F9      			sty.h	_ax
16545                        		 _load_vram.3
         17:DE2C  82         			clx				; Offset to PCE VDC.
         17:DE2D  20 4F FF   			call	load_vram_x
16546                        	
16547                        		.dbg	line,	"include\init.c", 753; }		
16548                        	
16549                        		.dbg	line,	"include\init.c", 755; 
16550                        	
16551                        		.dbg	line,	"include\init.c", 756; weapon_id = chain_id-1;
16552    17:DE30             	.LL714:
16553    17:DE30             	.LL713:
16554    17:DE30             	.LL711:
16555    17:DE30             	.LL709:
16556    17:DE30             	.LL707:
16557                        		__ld.um		_chain_id
         17:DE30  AD 25 23   			lda	_chain_id
         17:DE33  C2         			cly
16558                        		__sub.wi	1
         17:DE34  38         			sec
         17:DE35  E9 01      			sbc.l	#1
         17:DE37  B0 01      			bcs	!+
         17:DE39  88         			dey
         17:DE3A             	!:
16559                        		__st.umq	_weapon_id
         17:DE3A  8D 26 23   			sta	_weapon_id
16560                        	
16561                        		.dbg	line,	"include\init.c", 757; spr_set(weapon_id);
16562                        		__ld.umq	_weapon_id
         17:DE3D  AD 26 23   			lda	_weapon_id
16563                        		__call		_spr_set.1
         17:DE40  20 DD E7   			call	_spr_set.1
16564                        	
16565                        		.dbg	line,	"include\init.c", 758; spr_pattern(WEAPON_VRAM_ADR);
16566                        		__ld.wi		31808
         17:DE43  A9 40      			lda.l	#31808
         17:DE45  A0 7C      			ldy.h	#31808
16567                        		__call		_spr_pattern.1
         17:DE47  20 26 E8   			call	_spr_pattern.1
16568                        	
16569                        		.dbg	line,	"include\init.c", 759; spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_16x16);
16570                        		__st.umiq	185, _al
         17:DE4A  A9 B9      			lda.l	#185
         17:DE4C  85 F8      			sta	_al
16571                        		__ld.uiq	0
         17:DE4E  62         			cla
16572                        		__call		_spr_ctrl.2
         17:DE4F  20 3C E8   			call	_spr_ctrl.2
16573                        	
16574                        		.dbg	line,	"include\init.c", 761; spr_x(player_pos_x+8);
16575                        		__ld.wm		_player_pos_x
         17:DE52  AD DA 24   			lda.l	_player_pos_x
         17:DE55  AC DB 24   			ldy.h	_player_pos_x
16576                        		__add.wi	8
         17:DE58  18         			clc
         17:DE59  69 08      			adc.l	#8
         17:DE5B  90 01      			bcc	!+
         17:DE5D  C8         			iny
         17:DE5E             	!:
16577                        		__call		_spr_x.1
         17:DE5E  20 0A E8   			call	_spr_x.1
16578                        	
16579                        		.dbg	line,	"include\init.c", 762; spr_y(player_pos_y+16);
16580                        		__ld.wm		_player_pos_y
         17:DE61  AD DC 24   			lda.l	_player_pos_y
         17:DE64  AC DD 24   			ldy.h	_player_pos_y
16581                        		__add.wi	16
         17:DE67  18         			clc
         17:DE68  69 10      			adc.l	#16
         17:DE6A  90 01      			bcc	!+
         17:DE6C  C8         			iny
         17:DE6D             	!:
16582                        		__call		_spr_y.1
         17:DE6D  20 19 E8   			call	_spr_y.1
16583                        	
16584                        		.dbg	line,	"include\init.c", 763; spr_pri(TRUE);
16585                        		__ld.uiq	1
         17:DE70  A9 01      			lda	#1
16586                        		__call		_spr_pri.1
         17:DE72  20 5C E8   			call	_spr_pri.1
16587                        	
16588                        		.dbg	line,	"include\init.c", 765; // WEAPON 4 USES PAL2
16589                        	
16590                        		.dbg	line,	"include\init.c", 766; if(weapon_level == 4)
16591                        		__ld.umq	_weapon_level
         17:DE75  AD 28 23   			lda	_weapon_level
16592                        		__equ_b.uiq	4
         17:DE78  C9 04      			cmp	#4
         17:DE7A  F0 01      			beq	!+
         17:DE7C  18         			clc
         17:DE7D             	!:
16593                        		__bfalse	.LL715
         17:DE7D  90 07      			bcc	.LL715
16594                        	
16595                        		.dbg	line,	"include\init.c", 767; {
16596                        	
16597                        		.dbg	line,	"include\init.c", 768; spr_pal(2);
16598                        		__ld.uiq	2
         17:DE7F  A9 02      			lda	#2
16599                        		__call		_spr_pal.1
         17:DE81  20 4D E8   			call	_spr_pal.1
16600                        	
16601                        		.dbg	line,	"include\init.c", 769; }
16602                        	
16603                        		.dbg	line,	"include\init.c", 770; // ALL OTHERS USE PAL0
16604                        	
16605                        		.dbg	line,	"include\init.c", 771; else
16606                        		__bra		.LL716
         17:DE84  80 04      			bra	.LL716
16607    17:DE86             	.LL715:
16608                        	
16609                        		.dbg	line,	"include\init.c", 772; {
16610                        	
16611                        		.dbg	line,	"include\init.c", 773; spr_pal(0);
16612                        		__ld.uiq	0
         17:DE86  62         			cla
16613                        		__call		_spr_pal.1
         17:DE87  20 4D E8   			call	_spr_pal.1
16614                        	
16615                        		.dbg	line,	"include\init.c", 774; }
16616    17:DE8A             	.LL716:
16617                        	
16618                        		.dbg	line,	"include\init.c", 775; 
16619                        	
16620                        		.dbg	line,	"include\init.c", 776; 
16621                        	
16622                        		.dbg	line,	"include\init.c", 779; //--------------------------------------------------------------------------------------//
16623                        	
16624                        		.dbg	line,	"include\init.c", 780; //                                       OBJECTS                                        //
16625                        	
16626                        		.dbg	line,	"include\init.c", 781; //--------------------------------------------------------------------------------------//
16627                        	
16628                        		.dbg	line,	"include\init.c", 783; load_OBJECT_TILES();
16629                        		__call		_load_OBJECT_TILES
         17:DE8A  20 D7 FE   			call	_load_OBJECT_TILES
16630                        	
16631                        		.dbg	line,	"include\init.c", 784; init_OBJECT_LV1();
16632                        		__call		_init_OBJECT_LV1
         17:DE8D  20 CD FE   			call	_init_OBJECT_LV1
16633                        	
16634                        		.dbg	line,	"include\init.c", 785; scroll_object();
16635                        		__call		_scroll_object
         17:DE90  20 C3 FE   			call	_scroll_object
16636                        	
16637                        		.dbg	line,	"include\init.c", 788; //--------------------------------------------------------------------------------------//
16638                        	
16639                        		.dbg	line,	"include\init.c", 789; //                                        CHESTS                                        //
16640                        	
16641                        		.dbg	line,	"include\init.c", 790; //--------------------------------------------------------------------------------------//
16642                        	
16643                        		.dbg	line,	"include\init.c", 792; load_CHEST_TILES();
16644                        		__call		_load_CHEST_TILES
         17:DE93  20 B9 FE   			call	_load_CHEST_TILES
16645                        	
16646                        		.dbg	line,	"include\init.c", 793; init_CHEST_LV1();
16647                        		__call		_init_CHEST_LV1
         17:DE96  20 AF FE   			call	_init_CHEST_LV1
16648                        	
16649                        		.dbg	line,	"include\init.c", 794; scroll_chest();
16650                        		__call		_scroll_chest
         17:DE99  20 A5 FE   			call	_scroll_chest
16651                        	
16652                        		.dbg	line,	"include\init.c", 797; //--------------------------------------------------------------------------------------//
16653                        	
16654                        		.dbg	line,	"include\init.c", 798; //                                         NPCS                                         //
16655                        	
16656                        		.dbg	line,	"include\init.c", 799; //--------------------------------------------------------------------------------------//
16657                        	
16658                        		.dbg	line,	"include\init.c", 801; load_NPC_TILES();
16659                        		__call		_load_NPC_TILES
         17:DE9C  20 9B FE   			call	_load_NPC_TILES
16660                        	
16661                        		.dbg	line,	"include\init.c", 802; init_NPC_LV1();
16662                        		__call		_init_NPC_LV1
         17:DE9F  20 91 FE   			call	_init_NPC_LV1
16663                        	
16664                        		.dbg	line,	"include\init.c", 807; //--------------------------------------------------------------------------------------//
16665                        	
16666                        		.dbg	line,	"include\init.c", 808; //                                       ENEMIES                                        //
16667                        	
16668                        		.dbg	line,	"include\init.c", 809; //--------------------------------------------------------------------------------------//
16669                        	
16670                        		.dbg	line,	"include\init.c", 811; load_vram(ORC_VRAM_ADR, tiles_SPR_ORC , SIZEOF(tiles_SPR_ORC) >> 1);
16671                        		__st.wmiq	11520, _di
         17:DEA2  64 F0      			stz.l	_di
         17:DEA4  A9 2D      			lda.h	#11520
         17:DEA6  85 F1      			sta.h	_di
16672                        		__farptr	_tiles_SPR_ORC, _bp_bank, _bp
         17:DEA8  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_ORC))
         17:DEAA  85 EC      			sta.l	_bp
         17:DEAC  A9 60      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_ORC))
         17:DEAE  85 ED      			sta.h	_bp
         17:DEB0  A9 15      			lda	#bank(_tiles_SPR_ORC)
         17:DEB2  85 02      			sta	_bp_bank
16673                        		__ld.wi		___sizeof__tiles_SPR_ORC
         17:DEB4  A9 00      			lda.l	#___sizeof__tiles_SPR_ORC
         17:DEB6  A0 1D      			ldy.h	#___sizeof__tiles_SPR_ORC
16674                        		__lsr.wi	1
         17:DEB8  42         			say
         17:DEB9  4A         			lsr	a
         17:DEBA  42         			say
         17:DEBB  6A         			ror	a
16675                        		__st.wmq	_ax
         17:DEBC  85 F8      			sta.l	_ax
         17:DEBE  84 F9      			sty.h	_ax
16676                        		 _load_vram.3
         17:DEC0  82         			clx				; Offset to PCE VDC.
         17:DEC1  20 4F FF   			call	load_vram_x
16677                        	
16678                        		.dbg	line,	"include\init.c", 812; load_vram(SERPENT_VRAM_ADR, tiles_SPR_SERPENT , TILES_96);
16679                        		__st.wmiq	15232, _di
         17:DEC4  A9 80      			lda.l	#15232
         17:DEC6  85 F0      			sta.l	_di
         17:DEC8  A9 3B      			lda.h	#15232
         17:DECA  85 F1      			sta.h	_di
16680                        		__farptr	_tiles_SPR_SERPENT, _bp_bank, _bp
         17:DECC  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_SERPENT))
         17:DECE  85 EC      			sta.l	_bp
         17:DED0  A9 7D      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_SERPENT))
         17:DED2  85 ED      			sta.h	_bp
         17:DED4  A9 15      			lda	#bank(_tiles_SPR_SERPENT)
         17:DED6  85 02      			sta	_bp_bank
16681                        		__st.wmiq	1536, _ax
         17:DED8  64 F8      			stz.l	_ax
         17:DEDA  A9 06      			lda.h	#1536
         17:DEDC  85 F9      			sta.h	_ax
16682                        		 _load_vram.3
         17:DEDE  82         			clx				; Offset to PCE VDC.
         17:DEDF  20 4F FF   			call	load_vram_x
16683                        	
16684                        		.dbg	line,	"include\init.c", 813; load_vram(PLANT_VRAM_ADR, tiles_SPR_PLANT , TILES_160);
16685                        		__st.wmiq	16768, _di
         17:DEE2  A9 80      			lda.l	#16768
         17:DEE4  85 F0      			sta.l	_di
         17:DEE6  A9 41      			lda.h	#16768
         17:DEE8  85 F1      			sta.h	_di
16686                        		__farptr	_tiles_SPR_PLANT, _bp_bank, _bp
         17:DEEA  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_PLANT))
         17:DEEC  85 EC      			sta.l	_bp
         17:DEEE  A9 69      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_PLANT))
         17:DEF0  85 ED      			sta.h	_bp
         17:DEF2  A9 16      			lda	#bank(_tiles_SPR_PLANT)
         17:DEF4  85 02      			sta	_bp_bank
16687                        		__st.wmiq	2560, _ax
         17:DEF6  64 F8      			stz.l	_ax
         17:DEF8  A9 0A      			lda.h	#2560
         17:DEFA  85 F9      			sta.h	_ax
16688                        		 _load_vram.3
         17:DEFC  82         			clx				; Offset to PCE VDC.
         17:DEFD  20 4F FF   			call	load_vram_x
16689                        	
16690                        		.dbg	line,	"include\init.c", 818; // UPDATE PCE SAT //
16691                        	
16692                        		.dbg	line,	"include\init.c", 819; satb_update();
16693                        		__call		_satb_update
         17:DF00  20 13 FF   			call	_satb_update
16694                        	
16695                        		.dbg	line,	"include\init.c", 824; //--------------------------------------------------------------------------------------//
16696                        	
16697                        		.dbg	line,	"include\init.c", 825; //                                LOAD SPRITES PALETTES                                 //
16698                        	
16699                        		.dbg	line,	"include\init.c", 826; //--------------------------------------------------------------------------------------//
16700                        	
16701                        		.dbg	line,	"include\init.c", 828; if(armor_level == 8)
16702                        		__ld.umq	_armor_level
         17:DF03  AD 27 23   			lda	_armor_level
16703                        		__equ_b.uiq	8
         17:DF06  C9 08      			cmp	#8
         17:DF08  F0 01      			beq	!+
         17:DF0A  18         			clc
         17:DF0B             	!:
16704                        		__bfalse	.LL717
         17:DF0B  90 19      			bcc	.LL717
16705                        	
16706                        		.dbg	line,	"include\init.c", 829; {
16707                        	
16708                        		.dbg	line,	"include\init.c", 830; load_palette( 16, palette_PLAYER_8, 1 );
16709                        		__st.umiq	16, _al
         17:DF0D  A9 10      			lda.l	#16
         17:DF0F  85 F8      			sta	_al
16710                        		__farptr	_palette_PLAYER_8, _bp_bank, _bp
         17:DF11  A9 60      			lda.l	#$6000 + ($1FFF & (_palette_PLAYER_8))
         17:DF13  85 EC      			sta.l	_bp
         17:DF15  A9 64      			lda.h	#$6000 + ($1FFF & (_palette_PLAYER_8))
         17:DF17  85 ED      			sta.h	_bp
         17:DF19  A9 13      			lda	#bank(_palette_PLAYER_8)
         17:DF1B  85 02      			sta	_bp_bank
16711                        		__st.umiq	1, _ah
         17:DF1D  A9 01      			lda.l	#1
         17:DF1F  85 F9      			sta	_ah
16712                        		__call		_load_palette.3
         17:DF21  20 1D FF   			call	_load_palette.3
16713                        	
16714                        		.dbg	line,	"include\init.c", 831; }
16715                        	
16716                        		.dbg	line,	"include\init.c", 833; else if(armor_level == 5)
16717                        		__bra		.LL718
         17:DF24  80 5D      			bra	.LL718
16718    17:DF26             	.LL717:
16719                        		__ld.umq	_armor_level
         17:DF26  AD 27 23   			lda	_armor_level
16720                        		__equ_b.uiq	5
         17:DF29  C9 05      			cmp	#5
         17:DF2B  F0 01      			beq	!+
         17:DF2D  18         			clc
         17:DF2E             	!:
16721                        		__bfalse	.LL719
         17:DF2E  90 19      			bcc	.LL719
16722                        	
16723                        		.dbg	line,	"include\init.c", 834; {
16724                        	
16725                        		.dbg	line,	"include\init.c", 835; load_palette( 16, palette_PLAYER_5, 1 );
16726                        		__st.umiq	16, _al
         17:DF30  A9 10      			lda.l	#16
         17:DF32  85 F8      			sta	_al
16727                        		__farptr	_palette_PLAYER_5, _bp_bank, _bp
         17:DF34  A9 60      			lda.l	#$6000 + ($1FFF & (_palette_PLAYER_5))
         17:DF36  85 EC      			sta.l	_bp
         17:DF38  A9 62      			lda.h	#$6000 + ($1FFF & (_palette_PLAYER_5))
         17:DF3A  85 ED      			sta.h	_bp
         17:DF3C  A9 13      			lda	#bank(_palette_PLAYER_5)
         17:DF3E  85 02      			sta	_bp_bank
16728                        		__st.umiq	1, _ah
         17:DF40  A9 01      			lda.l	#1
         17:DF42  85 F9      			sta	_ah
16729                        		__call		_load_palette.3
         17:DF44  20 1D FF   			call	_load_palette.3
16730                        	
16731                        		.dbg	line,	"include\init.c", 836; }
16732                        	
16733                        		.dbg	line,	"include\init.c", 838; else if(armor_level == 4)
16734                        		__bra		.LL720
         17:DF47  80 3A      			bra	.LL720
16735    17:DF49             	.LL719:
16736                        		__ld.umq	_armor_level
         17:DF49  AD 27 23   			lda	_armor_level
16737                        		__equ_b.uiq	4
         17:DF4C  C9 04      			cmp	#4
         17:DF4E  F0 01      			beq	!+
         17:DF50  18         			clc
         17:DF51             	!:
16738                        		__bfalse	.LL721
         17:DF51  90 19      			bcc	.LL721
16739                        	
16740                        		.dbg	line,	"include\init.c", 839; {
16741                        	
16742                        		.dbg	line,	"include\init.c", 840; load_palette( 16, palette_PLAYER_4, 1 );
16743                        		__st.umiq	16, _al
         17:DF53  A9 10      			lda.l	#16
         17:DF55  85 F8      			sta	_al
16744                        		__farptr	_palette_PLAYER_4, _bp_bank, _bp
         17:DF57  A9 60      			lda.l	#$6000 + ($1FFF & (_palette_PLAYER_4))
         17:DF59  85 EC      			sta.l	_bp
         17:DF5B  A9 60      			lda.h	#$6000 + ($1FFF & (_palette_PLAYER_4))
         17:DF5D  85 ED      			sta.h	_bp
         17:DF5F  A9 13      			lda	#bank(_palette_PLAYER_4)
         17:DF61  85 02      			sta	_bp_bank
16745                        		__st.umiq	1, _ah
         17:DF63  A9 01      			lda.l	#1
         17:DF65  85 F9      			sta	_ah
16746                        		__call		_load_palette.3
         17:DF67  20 1D FF   			call	_load_palette.3
16747                        	
16748                        		.dbg	line,	"include\init.c", 841; }
16749                        	
16750                        		.dbg	line,	"include\init.c", 843; else
16751                        		__bra		.LL722
         17:DF6A  80 17      			bra	.LL722
16752    17:DF6C             	.LL721:
16753                        	
16754                        		.dbg	line,	"include\init.c", 844; {
16755                        	
16756                        		.dbg	line,	"include\init.c", 845; load_palette( 16, palette_PLAYER_1, 1 );
16757                        		__st.umiq	16, _al
         17:DF6C  A9 10      			lda.l	#16
         17:DF6E  85 F8      			sta	_al
16758                        		__farptr	_palette_PLAYER_1, _bp_bank, _bp
         17:DF70  A9 60      			lda.l	#$6000 + ($1FFF & (_palette_PLAYER_1))
         17:DF72  85 EC      			sta.l	_bp
         17:DF74  A9 7E      			lda.h	#$6000 + ($1FFF & (_palette_PLAYER_1))
         17:DF76  85 ED      			sta.h	_bp
         17:DF78  A9 12      			lda	#bank(_palette_PLAYER_1)
         17:DF7A  85 02      			sta	_bp_bank
16759                        		__st.umiq	1, _ah
         17:DF7C  A9 01      			lda.l	#1
         17:DF7E  85 F9      			sta	_ah
16760                        		__call		_load_palette.3
         17:DF80  20 1D FF   			call	_load_palette.3
16761                        	
16762                        		.dbg	line,	"include\init.c", 846; }
16763    17:DF83             	.LL722:
16764    17:DF83             	.LL720:
16765    17:DF83             	.LL718:
16766                        	
16767                        		.dbg	line,	"include\init.c", 849; load_palette( 17, palette_objects_1,   1 );
16768                        		__st.umiq	17, _al
         17:DF83  A9 11      			lda.l	#17
         17:DF85  85 F8      			sta	_al
16769                        		__farptr	_palette_objects_1, _bp_bank, _bp
         17:DF87  A9 E0      			lda.l	#$6000 + ($1FFF & (_palette_objects_1))
         17:DF89  85 EC      			sta.l	_bp
         17:DF8B  A9 6E      			lda.h	#$6000 + ($1FFF & (_palette_objects_1))
         17:DF8D  85 ED      			sta.h	_bp
         17:DF8F  A9 14      			lda	#bank(_palette_objects_1)
         17:DF91  85 02      			sta	_bp_bank
16770                        		__st.umiq	1, _ah
         17:DF93  A9 01      			lda.l	#1
         17:DF95  85 F9      			sta	_ah
16771                        		__call		_load_palette.3
         17:DF97  20 1D FF   			call	_load_palette.3
16772                        	
16773                        		.dbg	line,	"include\init.c", 850; load_palette( 18, palette_objects_2,   1 );
16774                        		__st.umiq	18, _al
         17:DF9A  A9 12      			lda.l	#18
         17:DF9C  85 F8      			sta	_al
16775                        		__farptr	_palette_objects_2, _bp_bank, _bp
         17:DF9E  A9 E0      			lda.l	#$6000 + ($1FFF & (_palette_objects_2))
         17:DFA0  85 EC      			sta.l	_bp
         17:DFA2  A9 70      			lda.h	#$6000 + ($1FFF & (_palette_objects_2))
         17:DFA4  85 ED      			sta.h	_bp
         17:DFA6  A9 14      			lda	#bank(_palette_objects_2)
         17:DFA8  85 02      			sta	_bp_bank
16776                        		__st.umiq	1, _ah
         17:DFAA  A9 01      			lda.l	#1
         17:DFAC  85 F9      			sta	_ah
16777                        		__call		_load_palette.3
         17:DFAE  20 1D FF   			call	_load_palette.3
16778                        	
16779                        		.dbg	line,	"include\init.c", 851; load_palette( 19, palette_SPR_ORC,  1 );
16780                        		__st.umiq	19, _al
         17:DFB1  A9 13      			lda.l	#19
         17:DFB3  85 F8      			sta	_al
16781                        		__farptr	_palette_SPR_ORC, _bp_bank, _bp
         17:DFB5  A9 E0      			lda.l	#$6000 + ($1FFF & (_palette_SPR_ORC))
         17:DFB7  85 EC      			sta.l	_bp
         17:DFB9  A9 63      			lda.h	#$6000 + ($1FFF & (_palette_SPR_ORC))
         17:DFBB  85 ED      			sta.h	_bp
         17:DFBD  A9 17      			lda	#bank(_palette_SPR_ORC)
         17:DFBF  85 02      			sta	_bp_bank
16782                        		__st.umiq	1, _ah
         17:DFC1  A9 01      			lda.l	#1
         17:DFC3  85 F9      			sta	_ah
16783                        		__call		_load_palette.3
         17:DFC5  20 1D FF   			call	_load_palette.3
16784                        	
16785                        		.dbg	line,	"include\init.c", 852; load_palette( 20, palette_SPR_PLANT,   1 );
16786                        		__st.umiq	20, _al
         17:DFC8  A9 14      			lda.l	#20
         17:DFCA  85 F8      			sta	_al
16787                        		__farptr	_palette_SPR_PLANT, _bp_bank, _bp
         17:DFCC  A9 E0      			lda.l	#$6000 + ($1FFF & (_palette_SPR_PLANT))
         17:DFCE  85 EC      			sta.l	_bp
         17:DFD0  A9 65      			lda.h	#$6000 + ($1FFF & (_palette_SPR_PLANT))
         17:DFD2  85 ED      			sta.h	_bp
         17:DFD4  A9 17      			lda	#bank(_palette_SPR_PLANT)
         17:DFD6  85 02      			sta	_bp_bank
16788                        		__st.umiq	1, _ah
         17:DFD8  A9 01      			lda.l	#1
         17:DFDA  85 F9      			sta	_ah
16789                        		__call		_load_palette.3
         17:DFDC  20 1D FF   			call	_load_palette.3
16790                        	
16791                        		.dbg	line,	"include\init.c", 857; // VSYNC //
16792                        	
16793                        		.dbg	line,	"include\init.c", 858; vsync();
16794                        		__call		_vsync
         17:DFDF  20 09 E3   			call	_vsync
16795                        	
16796                        		.dbg	line,	"include\init.c", 860; // ENABLE DISPLAY //
16797                        	
16798                        		.dbg	line,	"include\init.c", 861; disp_on();
16799                        		__call		_disp_on
         17:DFE2  20 16 E4   			call	_disp_on
16800                        	
16801                        		.dbg	line,	"include\init.c", 862; }
16802                        	
16803                        		.dbg	line,	"include\init.c", 863; }
16804    17:DFE5             	.LL696:
16805    17:DFE5             	.LL695:
16806                        		__return	0
         17:DFE5  4C EF FF   			jmp	leave_proc
16807                        		.dbg	clear
16808                        		.endp
16809               67E0     		.data
16810               2310     		.bss
16811    F8:2310             	__init_LEVEL_loc:
16812    F8:2310             			ds	1
16813    F8:2311             	__init_LEVEL_end:
16814               E309     		.code
16815                        		.pceas
16816                        	
16817                        		.dbg	line,	"include\init.c", 866; void init_SHOP()
16818                        		.dbg	line,	"include\init.c", 867; {
16819                        	;***********************
16820                        	;***********************
16821                        	
16822                        		.hucc
16823    01:DB73             		.proc		_init_SHOP
16824                        		__enter		_init_SHOP
16825                        	
16826                        		.dbg	line,	"include\init.c", 868; char i;
16827                        	
16828                        		.dbg	line,	"include\init.c", 869; char item_id;
16829                        	
16830                        		.dbg	line,	"include\init.c", 872; // DISABLE DISPLAY //
16831                        	
16832                        		.dbg	line,	"include\init.c", 873; disp_off();
16833                        		__call		_disp_off
         01:DB73  20 29 E4   			call	_disp_off
16834                        	
16835                        		.dbg	line,	"include\init.c", 874; 
16836                        	
16837                        		.dbg	line,	"include\init.c", 876; // VSYNC //
16838                        	
16839                        		.dbg	line,	"include\init.c", 877; vsync();
16840                        		__call		_vsync
         01:DB76  20 09 E3   			call	_vsync
16841                        	
16842                        		.dbg	line,	"include\init.c", 880; // HIDE ALL LEVEL SPRITES //
16843                        	
16844                        		.dbg	line,	"include\init.c", 881; hide_LEVEL_SPRITES();
16845                        		__call		_hide_LEVEL_SPRITES
         01:DB79  20 87 FE   			call	_hide_LEVEL_SPRITES
16846                        	
16847                        		.dbg	line,	"include\init.c", 884; // SET VDC 1 SCREEN SIZE (IN TILES) - 32x32 = 256 PIXELS
16848                        	
16849                        		.dbg	line,	"include\init.c", 885; set_screen_size(SCR_SIZE_64x32);
16850                        		__st.umiq	1, _al
         01:DB7C  A9 01      			lda.l	#1
         01:DB7E  85 F8      			sta	_al
16851                        		__call		_set_screen_size.1
         01:DB80  20 31 FF   			call	_set_screen_size.1
16852                        	
16853                        		.dbg	line,	"include\init.c", 888; // SET VDC 2 SCREEN SIZE (IN TILES) - 32x32 = 256 PIXELS
16854                        	
16855                        		.dbg	line,	"include\init.c", 889; sgx_set_screen_size(SCR_SIZE_32x32);
16856                        		__st.umiq	0, _al
         01:DB83  64 F8      			stz	_al
16857                        		__call		_sgx_set_screen_size.1
         01:DB85  20 27 FF   			call	_sgx_set_screen_size.1
16858                        	
16859                        		.dbg	line,	"include\init.c", 894; //**************************************************************************************//
16860                        	
16861                        		.dbg	line,	"include\init.c", 895; //                                                                                      //
16862                        	
16863                        		.dbg	line,	"include\init.c", 896; //                                      VARIABLES                                       //
16864                        	
16865                        		.dbg	line,	"include\init.c", 897; //                                                                                      //
16866                        	
16867                        		.dbg	line,	"include\init.c", 898; //**************************************************************************************//
16868                        	
16869                        		.dbg	line,	"include\init.c", 900; index_x = 0;
16870                        		__st.umiq	0, _index_x
         01:DB88  9C D5 23   			stz	_index_x
16871                        	
16872                        		.dbg	line,	"include\init.c", 901; index_y = 0;
16873                        		__st.umiq	0, _index_y
         01:DB8B  9C D6 23   			stz	_index_y
16874                        	
16875                        		.dbg	line,	"include\init.c", 902; item_index = 0;
16876                        		__st.umiq	0, _item_index
         01:DB8E  9C D7 23   			stz	_item_index
16877                        	
16878                        		.dbg	line,	"include\init.c", 904; minutes = 0;
16879                        		__st.umiq	0, _minutes
         01:DB91  9C 30 23   			stz	_minutes
16880                        	
16881                        		.dbg	line,	"include\init.c", 905; seconds = 30;
16882                        		__st.umiq	30, _seconds
         01:DB94  A9 1E      			lda.l	#30
         01:DB96  8D 31 23   			sta	_seconds
16883                        	
16884                        		.dbg	line,	"include\init.c", 907; shop_counter = 0;
16885                        		__st.umiq	0, _shop_counter
         01:DB99  9C D9 23   			stz	_shop_counter
16886                        	
16887                        		.dbg	line,	"include\init.c", 908; shop_phase = SHOP_PHASE_ENTER;
16888                        		__st.umiq	0, _shop_phase
         01:DB9C  9C D8 23   			stz	_shop_phase
16889                        	
16890                        		.dbg	line,	"include\init.c", 910; if(level_id == 1)
16891                        		__ld.umq	_level_id
         01:DB9F  AD 15 23   			lda	_level_id
16892                        		__equ_b.uiq	1
         01:DBA2  C9 01      			cmp	#1
         01:DBA4  F0 01      			beq	!+
         01:DBA6  18         			clc
         01:DBA7             	!:
16893                        		__bfalse	.LL724
         01:DBA7  90 0A      			bcc	.LL724
16894                        	
16895                        		.dbg	line,	"include\init.c", 911; {
16896                        	
16897                        		.dbg	line,	"include\init.c", 912; ptr_SHOP_ITEM_PRICES = &TABLE_SHOP_PRICES_LV1[0];
16898                        		__ld.wi		_TABLE_SHOP_PRICES_LV1
         01:DBA9  A9 8C      			lda.l	#_TABLE_SHOP_PRICES_LV1
         01:DBAB  A0 61      			ldy.h	#_TABLE_SHOP_PRICES_LV1
16899                        		__st.wmq	_ptr_SHOP_ITEM_PRICES
         01:DBAD  8D 4D 26   			sta.l	_ptr_SHOP_ITEM_PRICES
         01:DBB0  8C 4E 26   			sty.h	_ptr_SHOP_ITEM_PRICES
16900                        	
16901                        		.dbg	line,	"include\init.c", 913; }
16902                        	
16903                        		.dbg	line,	"include\init.c", 914; 
16904                        	
16905                        		.dbg	line,	"include\init.c", 919; //**************************************************************************************//
16906                        	
16907                        		.dbg	line,	"include\init.c", 920; //                                                                                      //
16908                        	
16909                        		.dbg	line,	"include\init.c", 921; //                                        VDC 2                                         //
16910                        	
16911                        		.dbg	line,	"include\init.c", 922; //                                                                                      //
16912                        	
16913                        		.dbg	line,	"include\init.c", 923; //**************************************************************************************//
16914                        	
16915                        		.dbg	line,	"include\init.c", 925; //--------------------------------------------------------------------------------------//
16916                        	
16917                        		.dbg	line,	"include\init.c", 926; //                                      LOAD FONT                                       //
16918                        	
16919                        		.dbg	line,	"include\init.c", 927; //--------------------------------------------------------------------------------------//
16920                        	
16921                        		.dbg	line,	"include\init.c", 929; load_vram( 0x0800, tileset_FONT, SIZEOF(tileset_FONT) >> 1 );
16922    01:DBB3             	.LL724:
16923                        		__st.wmiq	2048, _di
         01:DBB3  64 F0      			stz.l	_di
         01:DBB5  A9 08      			lda.h	#2048
         01:DBB7  85 F1      			sta.h	_di
16924                        		__farptr	_tileset_FONT, _bp_bank, _bp
         01:DBB9  A9 60      			lda.l	#$6000 + ($1FFF & (_tileset_FONT))
         01:DBBB  85 EC      			sta.l	_bp
         01:DBBD  A9 71      			lda.h	#$6000 + ($1FFF & (_tileset_FONT))
         01:DBBF  85 ED      			sta.h	_bp
         01:DBC1  A9 04      			lda	#bank(_tileset_FONT)
         01:DBC3  85 02      			sta	_bp_bank
16925                        		__ld.wi		___sizeof__tileset_FONT
         01:DBC5  A9 00      			lda.l	#___sizeof__tileset_FONT
         01:DBC7  A0 0C      			ldy.h	#___sizeof__tileset_FONT
16926                        		__lsr.wi	1
         01:DBC9  42         			say
         01:DBCA  4A         			lsr	a
         01:DBCB  42         			say
         01:DBCC  6A         			ror	a
16927                        		__st.wmq	_ax
         01:DBCD  85 F8      			sta.l	_ax
         01:DBCF  84 F9      			sty.h	_ax
16928                        		 _load_vram.3
         01:DBD1  82         			clx				; Offset to PCE VDC.
         01:DBD2  20 4F FF   			call	load_vram_x
16929                        	
16930                        		.dbg	line,	"include\init.c", 931; set_font_pal(15);
16931                        		__ld.uiq	15
         01:DBD5  A9 0F      			lda	#15
16932                        		__call		_set_font_pal.1
         01:DBD7  20 09 E6   			call	_set_font_pal.1
16933                        	
16934                        		.dbg	line,	"include\init.c", 934; //--------------------------------------------------------------------------------------//
16935                        	
16936                        		.dbg	line,	"include\init.c", 935; //                                    LOAD TILESET                                      //
16937                        	
16938                        		.dbg	line,	"include\init.c", 936; //--------------------------------------------------------------------------------------//
16939                        	
16940                        		.dbg	line,	"include\init.c", 938; sgx_load_vram( 0x1000, tileset_SHOP_BG_B, SIZEOF(tileset_SHOP_BG_B) >> 1 );
16941                        		__st.wmiq	4096, _di
         01:DBDA  64 F0      			stz.l	_di
         01:DBDC  A9 10      			lda.h	#4096
         01:DBDE  85 F1      			sta.h	_di
16942                        		__farptr	_tileset_SHOP_BG_B, _bp_bank, _bp
         01:DBE0  A9 A0      			lda.l	#$6000 + ($1FFF & (_tileset_SHOP_BG_B))
         01:DBE2  85 EC      			sta.l	_bp
         01:DBE4  A9 6A      			lda.h	#$6000 + ($1FFF & (_tileset_SHOP_BG_B))
         01:DBE6  85 ED      			sta.h	_bp
         01:DBE8  A9 0D      			lda	#bank(_tileset_SHOP_BG_B)
         01:DBEA  85 02      			sta	_bp_bank
16943                        		__ld.wi		___sizeof__tileset_SHOP_BG_B
         01:DBEC  A9 60      			lda.l	#___sizeof__tileset_SHOP_BG_B
         01:DBEE  A0 39      			ldy.h	#___sizeof__tileset_SHOP_BG_B
16944                        		__lsr.wi	1
         01:DBF0  42         			say
         01:DBF1  4A         			lsr	a
         01:DBF2  42         			say
         01:DBF3  6A         			ror	a
16945                        		__st.wmq	_ax
         01:DBF4  85 F8      			sta.l	_ax
         01:DBF6  84 F9      			sty.h	_ax
16946                        		 _sgx_load_vram.3
         01:DBF8  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         01:DBFA  20 4F FF   			call	load_vram_x
16947                        	
16948                        		.dbg	line,	"include\init.c", 941; //--------------------------------------------------------------------------------------//
16949                        	
16950                        		.dbg	line,	"include\init.c", 942; //                                      LOAD ITEMS                                      //
16951                        	
16952                        		.dbg	line,	"include\init.c", 943; //--------------------------------------------------------------------------------------//
16953                        	
16954                        		.dbg	line,	"include\init.c", 945; for(i=0 ; i<10 ; i++)
16955                        		__st.umiq	0, __init_SHOP_end - 1  /* i */
         01:DBFD  9C 12 23   			stz	__init_SHOP_end - 1
16956    01:DC00             	.LL725:
16957                        		__ld.umq	__init_SHOP_end - 1  /* i */
         01:DC00  AD 12 23   			lda	__init_SHOP_end - 1
16958                        		__ult_b.uiq	10
         01:DC03  C9 0A      			cmp	#10		; Subtract integer from A.
         01:DC05  6A         			ror	a		; CC if A < integer.
         01:DC06  49 80      			eor	#$80
         01:DC08  2A         			rol	a
16959                        		__btrue		.LL727
         01:DC09  B0 07      			bcs	.LL727
16960                        		__bra		.LL728
         01:DC0B  80 42      			bra	.LL728
16961    01:DC0D             	.LL726:
16962                        		__inc.umq	__init_SHOP_end - 1  /* i */
         01:DC0D  EE 12 23   			inc	__init_SHOP_end - 1
16963                        		__bra		.LL725
         01:DC10  80 EE      			bra	.LL725
16964    01:DC12             	.LL727:
16965                        	
16966                        		.dbg	line,	"include\init.c", 946; {
16967                        	
16968                        		.dbg	line,	"include\init.c", 947; set_far_base(TABLE_SHOP_ITEMS_TILES_BANK[i],TABLE_SHOP_ITEMS_TILES_ADR[i]);
16969                        		__ldx.umq	__init_SHOP_end - 1  /* i */
         01:DC12  AE 12 23   			ldx	__init_SHOP_end - 1
16970                        		__ld.uax	_TABLE_SHOP_ITEMS_TILES_BANK
         01:DC15  BD B4 61   			lda	_TABLE_SHOP_ITEMS_TILES_BANK, x
         01:DC18  C2         			cly
16971                        		__st.umq	_bp_bank
         01:DC19  85 02      			sta	_bp_bank
16972                        		__ld2x.umq	__init_SHOP_end - 1  /* i */
         01:DC1B  AD 12 23   			lda	__init_SHOP_end - 1
         01:DC1E  0A         			asl	a
         01:DC1F  AA         			tax
16973                        		__ld.wax	_TABLE_SHOP_ITEMS_TILES_ADR
         01:DC20  BD A0 61   			lda.l	_TABLE_SHOP_ITEMS_TILES_ADR, x
         01:DC23  BC A1 61   			ldy.h	_TABLE_SHOP_ITEMS_TILES_ADR, x
16974                        		__st.wmq	_bp
         01:DC26  85 EC      			sta.l	_bp
         01:DC28  84 ED      			sty.h	_bp
16975                        	
16976                        		.dbg	line,	"include\init.c", 948; sgx_far_load_vram( 0x1000 + (i * TILES_4), TILES_4 );
16977                        		__ld.um		__init_SHOP_end - 1  /* i */
         01:DC2A  AD 12 23   			lda	__init_SHOP_end - 1
         01:DC2D  C2         			cly
16978                        		__asl.wi	6
         01:DC2E  85 00      			sta	__temp
         01:DC30  98         			tya
         01:DC31  4A         			lsr	a
         01:DC32  20 CB E1   			jsr	aslw6
         01:DC35  29 C0      			and.l	#$FF << 6
16979                        		__add.wi	4096
         01:DC37  18         			clc
         01:DC38  69 00      			adc.l	#4096
         01:DC3A  42         			say
         01:DC3B  69 10      			adc.h	#4096
         01:DC3D  42         			say
16980                        		__st.wmq	_di
         01:DC3E  85 F0      			sta.l	_di
         01:DC40  84 F1      			sty.h	_di
16981                        		__st.wmiq	64, _ax
         01:DC42  A9 40      			lda.l	#64
         01:DC44  85 F8      			sta.l	_ax
         01:DC46  64 F9      			stz.h	_ax
16982                        		 _sgx_far_load_vram.2
         01:DC48  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         01:DC4A  20 4F FF   			call	load_vram_x
16983                        	
16984                        		.dbg	line,	"include\init.c", 949; }
16985                        		__bra		.LL726
         01:DC4D  80 BE      			bra	.LL726
16986    01:DC4F             	.LL728:
16987                        	
16988                        		.dbg	line,	"include\init.c", 952; //--------------------------------------------------------------------------------------//
16989                        	
16990                        		.dbg	line,	"include\init.c", 953; //                                      SET BLOCKS                                      //
16991                        	
16992                        		.dbg	line,	"include\init.c", 954; //--------------------------------------------------------------------------------------//
16993                        	
16994                        		.dbg	line,	"include\init.c", 956; sgx_set_blocks( blocks_SHOP_BG_B , tilemap_mask , 256 );
16995                        		__farptr	_blocks_SHOP_BG_B, sgx_blk_bank, sgx_blk_addr
         01:DC4F  A9 00      			lda.l	#$6000 + ($1FFF & (_blocks_SHOP_BG_B))
         01:DC51  8D CF 2B   			sta.l	sgx_blk_addr
         01:DC54  A9 68      			lda.h	#$6000 + ($1FFF & (_blocks_SHOP_BG_B))
         01:DC56  8D D0 2B   			sta.h	sgx_blk_addr
         01:DC59  A9 0F      			lda	#bank(_blocks_SHOP_BG_B)
         01:DC5B  8D D1 2B   			sta	sgx_blk_bank
16996                        		__farptr	_tilemap_mask, sgx_tbl_bank, sgx_tbl_addr
         01:DC5E  A9 DA      			lda.l	#$6000 + ($1FFF & (_tilemap_mask))
         01:DC60  8D CC 2B   			sta.l	sgx_tbl_addr
         01:DC63  A9 63      			lda.h	#$6000 + ($1FFF & (_tilemap_mask))
         01:DC65  8D CD 2B   			sta.h	sgx_tbl_addr
         01:DC68  A9 F8      			lda	#bank(_tilemap_mask)
         01:DC6A  8D CE 2B   			sta	sgx_tbl_bank
16997                        		__st.umiq	256, _al
         01:DC6D  A9 00      			lda.l	#256
         01:DC6F  85 F8      			sta	_al
16998                        		__call		_sgx_set_blocks.3
         01:DC71  20 7D FE   			call	_sgx_set_blocks.3
16999                        	
17000                        		.dbg	line,	"include\init.c", 960; //--------------------------------------------------------------------------------------//
17001                        	
17002                        		.dbg	line,	"include\init.c", 961; //                                       SET MAP                                        //
17003                        	
17004                        		.dbg	line,	"include\init.c", 962; //--------------------------------------------------------------------------------------//
17005                        	
17006                        		.dbg	line,	"include\init.c", 964; sgx_set_blkmap( map_SHOP_BG_B, COUNTOF(map_SHOP_BG_B) );
17007                        		__farptr	_map_SHOP_BG_B, sgx_map_bank, sgx_map_addr
         01:DC74  A9 00      			lda.l	#$6000 + ($1FFF & (_map_SHOP_BG_B))
         01:DC76  8D D2 2B   			sta.l	sgx_map_addr
         01:DC79  A9 70      			lda.h	#$6000 + ($1FFF & (_map_SHOP_BG_B))
         01:DC7B  8D D3 2B   			sta.h	sgx_map_addr
         01:DC7E  A9 0F      			lda	#bank(_map_SHOP_BG_B)
         01:DC80  8D D4 2B   			sta	sgx_map_bank
17008                        		__ld.wi		___countof__map_SHOP_BG_B
         01:DC83  A9 10      			lda.l	#___countof__map_SHOP_BG_B
         01:DC85  A0 00      			ldy.h	#___countof__map_SHOP_BG_B
17009                        		__st.umq	sgx_map_line_w
         01:DC87  8D 95 26   			sta	sgx_map_line_w
17010                        		 _sgx_set_blkmap.2
         01:DC8A  9C D7 2B   			stz	sgx_scr_bank
17011                        	
17012                        		.dbg	line,	"include\init.c", 967; //--------------------------------------------------------------------------------------//
17013                        	
17014                        		.dbg	line,	"include\init.c", 968; //                                    DRAW TILEMAP                                      //
17015                        	
17016                        		.dbg	line,	"include\init.c", 969; //--------------------------------------------------------------------------------------//
17017                        	
17018                        		.dbg	line,	"include\init.c", 971; // The blkmap is drawn using global variables for the top-left coordinate
17019                        	
17020                        		.dbg	line,	"include\init.c", 972; // in pixels, and the draw width and height in terms of 8x8 characters.
17021                        	
17022                        		.dbg	line,	"include\init.c", 974; sgx_map_pxl_x = 0;
17023                        		__st.wmiq	0, _sgx_map_pxl_x
         01:DC8D  9C 97 26   			stz.l	_sgx_map_pxl_x
         01:DC90  9C 98 26   			stz.h	_sgx_map_pxl_x
17024                        	
17025                        		.dbg	line,	"include\init.c", 975; sgx_map_pxl_y = 0;
17026                        		__st.wmiq	0, _sgx_map_pxl_y
         01:DC93  9C 99 26   			stz.l	_sgx_map_pxl_y
         01:DC96  9C 9A 26   			stz.h	_sgx_map_pxl_y
17027                        	
17028                        		.dbg	line,	"include\init.c", 977; sgx_map_draw_w = 32;
17029                        		__st.umiq	32, _sgx_map_draw_w
         01:DC99  A9 20      			lda.l	#32
         01:DC9B  8D 93 26   			sta	_sgx_map_draw_w
17030                        	
17031                        		.dbg	line,	"include\init.c", 978; sgx_map_draw_h = 28;
17032                        		__st.umiq	28, _sgx_map_draw_h
         01:DC9E  A9 1C      			lda.l	#28
         01:DCA0  8D 94 26   			sta	_sgx_map_draw_h
17033                        	
17034                        		.dbg	line,	"include\init.c", 981; //**************************************************************************************//
17035                        	
17036                        		.dbg	line,	"include\init.c", 982; //                                                                                      //
17037                        	
17038                        		.dbg	line,	"include\init.c", 983; //                                  SETUP SCROLL_SPLIT                                  //
17039                        	
17040                        		.dbg	line,	"include\init.c", 984; //                                                                                      //
17041                        	
17042                        		.dbg	line,	"include\init.c", 985; //**************************************************************************************//
17043                        	
17044                        		.dbg	line,	"include\init.c", 987; sgx_draw_map();
17045                        		__call		_sgx_draw_map
         01:DCA3  20 EB FE   			call	_sgx_draw_map
17046                        	
17047                        		.dbg	line,	"include\init.c", 989; sgx_scroll_split(0,   0, sgx_map_pxl_x & (BAT_SIZE_W - 1), sgx_map_pxl_y & (BAT_SIZE_H - 1), BKG_ON | SPR_ON);
17048                        		__st.umiq	0, _al
         01:DCA6  64 F8      			stz	_al
17049                        		__st.umiq	0, _ah
         01:DCA8  64 F9      			stz	_ah
17050                        		__ld.wm		_sgx_map_pxl_x
         01:DCAA  AD 97 26   			lda.l	_sgx_map_pxl_x
         01:DCAD  AC 98 26   			ldy.h	_sgx_map_pxl_x
17051                        		__and.wi	2047
         01:DCB0  29 FF      			and.l	#2047
         01:DCB2  42         			say
         01:DCB3  29 07      			and.h	#2047
         01:DCB5  42         			say
17052                        		__st.wmq	_bx
         01:DCB6  85 FA      			sta.l	_bx
         01:DCB8  84 FB      			sty.h	_bx
17053                        		__ld.wm		_sgx_map_pxl_y
         01:DCBA  AD 99 26   			lda.l	_sgx_map_pxl_y
         01:DCBD  AC 9A 26   			ldy.h	_sgx_map_pxl_y
17054                        		__and.wi	255
         01:DCC0  29 FF      			and	#255
         01:DCC2  C2         			cly
17055                        		__st.wmq	_cx
         01:DCC3  85 FC      			sta.l	_cx
         01:DCC5  84 FD      			sty.h	_cx
17056                        		__st.umiq	192, _dl
         01:DCC7  A9 C0      			lda.l	#192
         01:DCC9  85 FE      			sta	_dl
17057                        		__call		_sgx_scroll_split.5
         01:DCCB  20 77 FF   			call	_sgx_scroll_split.5
17058                        	
17059                        		.dbg	line,	"include\init.c", 994; //**************************************************************************************//
17060                        	
17061                        		.dbg	line,	"include\init.c", 995; //                                                                                      //
17062                        	
17063                        		.dbg	line,	"include\init.c", 996; //                                         HUD                                          //
17064                        	
17065                        		.dbg	line,	"include\init.c", 997; //                                                                                      //
17066                        	
17067                        		.dbg	line,	"include\init.c", 998; //**************************************************************************************//
17068                        	
17069                        		.dbg	line,	"include\init.c", 1000; init_HUD();
17070                        		__call		_init_HUD
         01:DCCE  20 E1 FE   			call	_init_HUD
17071                        	
17072                        		.dbg	line,	"include\init.c", 1003; //--------------------------------------------------------------------------------------//
17073                        	
17074                        		.dbg	line,	"include\init.c", 1004; //                                     DRAW PRICES                                      //
17075                        	
17076                        		.dbg	line,	"include\init.c", 1005; //--------------------------------------------------------------------------------------//
17077                        	
17078                        		.dbg	line,	"include\init.c", 1007; shop_prices[0] = *(ptr_SHOP_ITEM_PRICES);
17079                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         01:DCD1  AD 4D 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         01:DCD4  AC 4E 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
17080                        		__st.wm		__ptr
         01:DCD7  85 88      			sta.l	__ptr
         01:DCD9  84 89      			sty.h	__ptr
17081                        		__ld.wp		__ptr
         01:DCDB  A0 01      			ldy	#1
         01:DCDD  B1 88      			lda	[__ptr], y
         01:DCDF  A8         			tay
         01:DCE0  B2 88      			lda	[__ptr]
17082                        		__st.wmq	_shop_prices
         01:DCE2  8D 38 26   			sta.l	_shop_prices
         01:DCE5  8C 39 26   			sty.h	_shop_prices
17083                        	
17084                        		.dbg	line,	"include\init.c", 1008; shop_prices[1] = *(ptr_SHOP_ITEM_PRICES+1);
17085                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         01:DCE8  AD 4D 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         01:DCEB  AC 4E 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
17086                        		__add.wi	2
         01:DCEE  18         			clc
         01:DCEF  69 02      			adc.l	#2
         01:DCF1  90 01      			bcc	!+
         01:DCF3  C8         			iny
         01:DCF4             	!:
17087                        		__st.wm		__ptr
         01:DCF4  85 88      			sta.l	__ptr
         01:DCF6  84 89      			sty.h	__ptr
17088                        		__ld.wp		__ptr
         01:DCF8  A0 01      			ldy	#1
         01:DCFA  B1 88      			lda	[__ptr], y
         01:DCFC  A8         			tay
         01:DCFD  B2 88      			lda	[__ptr]
17089                        		__st.wmq	_shop_prices + 2
         01:DCFF  8D 3A 26   			sta.l	_shop_prices + 2
         01:DD02  8C 3B 26   			sty.h	_shop_prices + 2
17090                        	
17091                        		.dbg	line,	"include\init.c", 1009; shop_prices[2] = *(ptr_SHOP_ITEM_PRICES+2);
17092                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         01:DD05  AD 4D 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         01:DD08  AC 4E 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
17093                        		__add.wi	4
         01:DD0B  18         			clc
         01:DD0C  69 04      			adc.l	#4
         01:DD0E  90 01      			bcc	!+
         01:DD10  C8         			iny
         01:DD11             	!:
17094                        		__st.wm		__ptr
         01:DD11  85 88      			sta.l	__ptr
         01:DD13  84 89      			sty.h	__ptr
17095                        		__ld.wp		__ptr
         01:DD15  A0 01      			ldy	#1
         01:DD17  B1 88      			lda	[__ptr], y
         01:DD19  A8         			tay
         01:DD1A  B2 88      			lda	[__ptr]
17096                        		__st.wmq	_shop_prices + 4
         01:DD1C  8D 3C 26   			sta.l	_shop_prices + 4
         01:DD1F  8C 3D 26   			sty.h	_shop_prices + 4
17097                        	
17098                        		.dbg	line,	"include\init.c", 1010; shop_prices[3] = *(ptr_SHOP_ITEM_PRICES+3);
17099                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         01:DD22  AD 4D 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         01:DD25  AC 4E 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
17100                        		__add.wi	6
         01:DD28  18         			clc
         01:DD29  69 06      			adc.l	#6
         01:DD2B  90 01      			bcc	!+
         01:DD2D  C8         			iny
         01:DD2E             	!:
17101                        		__st.wm		__ptr
         01:DD2E  85 88      			sta.l	__ptr
         01:DD30  84 89      			sty.h	__ptr
17102                        		__ld.wp		__ptr
         01:DD32  A0 01      			ldy	#1
         01:DD34  B1 88      			lda	[__ptr], y
         01:DD36  A8         			tay
         01:DD37  B2 88      			lda	[__ptr]
17103                        		__st.wmq	_shop_prices + 6
         01:DD39  8D 3E 26   			sta.l	_shop_prices + 6
         01:DD3C  8C 3F 26   			sty.h	_shop_prices + 6
17104                        	
17105                        		.dbg	line,	"include\init.c", 1011; shop_prices[4] = *(ptr_SHOP_ITEM_PRICES+4);
17106                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         01:DD3F  AD 4D 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         01:DD42  AC 4E 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
17107                        		__add.wi	8
         01:DD45  18         			clc
         01:DD46  69 08      			adc.l	#8
         01:DD48  90 01      			bcc	!+
         01:DD4A  C8         			iny
         01:DD4B             	!:
17108                        		__st.wm		__ptr
         01:DD4B  85 88      			sta.l	__ptr
         01:DD4D  84 89      			sty.h	__ptr
17109                        		__ld.wp		__ptr
         01:DD4F  A0 01      			ldy	#1
         01:DD51  B1 88      			lda	[__ptr], y
         01:DD53  A8         			tay
         01:DD54  B2 88      			lda	[__ptr]
17110                        		__st.wmq	_shop_prices + 8
         01:DD56  8D 40 26   			sta.l	_shop_prices + 8
         01:DD59  8C 41 26   			sty.h	_shop_prices + 8
17111                        	
17112                        		.dbg	line,	"include\init.c", 1012; 
17113                        	
17114                        		.dbg	line,	"include\init.c", 1013; shop_prices[5] = *(ptr_SHOP_ITEM_PRICES+5);
17115                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         01:DD5C  AD 4D 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         01:DD5F  AC 4E 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
17116                        		__add.wi	10
         01:DD62  18         			clc
         01:DD63  69 0A      			adc.l	#10
         01:DD65  90 01      			bcc	!+
         01:DD67  C8         			iny
         01:DD68             	!:
17117                        		__st.wm		__ptr
         01:DD68  85 88      			sta.l	__ptr
         01:DD6A  84 89      			sty.h	__ptr
17118                        		__ld.wp		__ptr
         01:DD6C  A0 01      			ldy	#1
         01:DD6E  B1 88      			lda	[__ptr], y
         01:DD70  A8         			tay
         01:DD71  B2 88      			lda	[__ptr]
17119                        		__st.wmq	_shop_prices + 10
         01:DD73  8D 42 26   			sta.l	_shop_prices + 10
         01:DD76  8C 43 26   			sty.h	_shop_prices + 10
17120                        	
17121                        		.dbg	line,	"include\init.c", 1014; shop_prices[6] = *(ptr_SHOP_ITEM_PRICES+6);
17122                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         01:DD79  AD 4D 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         01:DD7C  AC 4E 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
17123                        		__add.wi	12
         01:DD7F  18         			clc
         01:DD80  69 0C      			adc.l	#12
         01:DD82  90 01      			bcc	!+
         01:DD84  C8         			iny
         01:DD85             	!:
17124                        		__st.wm		__ptr
         01:DD85  85 88      			sta.l	__ptr
         01:DD87  84 89      			sty.h	__ptr
17125                        		__ld.wp		__ptr
         01:DD89  A0 01      			ldy	#1
         01:DD8B  B1 88      			lda	[__ptr], y
         01:DD8D  A8         			tay
         01:DD8E  B2 88      			lda	[__ptr]
17126                        		__st.wmq	_shop_prices + 12
         01:DD90  8D 44 26   			sta.l	_shop_prices + 12
         01:DD93  8C 45 26   			sty.h	_shop_prices + 12
17127                        	
17128                        		.dbg	line,	"include\init.c", 1015; shop_prices[7] = *(ptr_SHOP_ITEM_PRICES+7);
17129                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         01:DD96  AD 4D 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         01:DD99  AC 4E 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
17130                        		__add.wi	14
         01:DD9C  18         			clc
         01:DD9D  69 0E      			adc.l	#14
         01:DD9F  90 01      			bcc	!+
         01:DDA1  C8         			iny
         01:DDA2             	!:
17131                        		__st.wm		__ptr
         01:DDA2  85 88      			sta.l	__ptr
         01:DDA4  84 89      			sty.h	__ptr
17132                        		__ld.wp		__ptr
         01:DDA6  A0 01      			ldy	#1
         01:DDA8  B1 88      			lda	[__ptr], y
         01:DDAA  A8         			tay
         01:DDAB  B2 88      			lda	[__ptr]
17133                        		__st.wmq	_shop_prices + 14
         01:DDAD  8D 46 26   			sta.l	_shop_prices + 14
         01:DDB0  8C 47 26   			sty.h	_shop_prices + 14
17134                        	
17135                        		.dbg	line,	"include\init.c", 1016; shop_prices[8] = *(ptr_SHOP_ITEM_PRICES+8);
17136                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         01:DDB3  AD 4D 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         01:DDB6  AC 4E 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
17137                        		__add.wi	16
         01:DDB9  18         			clc
         01:DDBA  69 10      			adc.l	#16
         01:DDBC  90 01      			bcc	!+
         01:DDBE  C8         			iny
         01:DDBF             	!:
17138                        		__st.wm		__ptr
         01:DDBF  85 88      			sta.l	__ptr
         01:DDC1  84 89      			sty.h	__ptr
17139                        		__ld.wp		__ptr
         01:DDC3  A0 01      			ldy	#1
         01:DDC5  B1 88      			lda	[__ptr], y
         01:DDC7  A8         			tay
         01:DDC8  B2 88      			lda	[__ptr]
17140                        		__st.wmq	_shop_prices + 16
         01:DDCA  8D 48 26   			sta.l	_shop_prices + 16
         01:DDCD  8C 49 26   			sty.h	_shop_prices + 16
17141                        	
17142                        		.dbg	line,	"include\init.c", 1017; shop_prices[9] = *(ptr_SHOP_ITEM_PRICES+9);
17143                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         01:DDD0  AD 4D 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         01:DDD3  AC 4E 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
17144                        		__add.wi	18
         01:DDD6  18         			clc
         01:DDD7  69 12      			adc.l	#18
         01:DDD9  90 01      			bcc	!+
         01:DDDB  C8         			iny
         01:DDDC             	!:
17145                        		__st.wm		__ptr
         01:DDDC  85 88      			sta.l	__ptr
         01:DDDE  84 89      			sty.h	__ptr
17146                        		__ld.wp		__ptr
         01:DDE0  A0 01      			ldy	#1
         01:DDE2  B1 88      			lda	[__ptr], y
         01:DDE4  A8         			tay
         01:DDE5  B2 88      			lda	[__ptr]
17147                        		__st.wmq	_shop_prices + 18
         01:DDE7  8D 4A 26   			sta.l	_shop_prices + 18
         01:DDEA  8C 4B 26   			sty.h	_shop_prices + 18
17148                        	
17149                        		.dbg	line,	"include\init.c", 1020; put_number(shop_prices[0],4,2,20);
17150                        		__ld.wm		_shop_prices
         01:DDED  AD 38 26   			lda.l	_shop_prices
         01:DDF0  AC 39 26   			ldy.h	_shop_prices
17151                        		__st.wmq	_bx
         01:DDF3  85 FA      			sta.l	_bx
         01:DDF5  84 FB      			sty.h	_bx
17152                        		__st.umiq	4, _cl
         01:DDF7  A9 04      			lda.l	#4
         01:DDF9  85 FC      			sta	_cl
17153                        		__st.umiq	2, _dil
         01:DDFB  A9 02      			lda.l	#2
         01:DDFD  85 F0      			sta	_dil
17154                        		__st.umiq	20, _dih
         01:DDFF  A9 14      			lda.l	#20
         01:DE01  85 F1      			sta	_dih
17155                        		__call		_put_number.4
         01:DE03  20 9F FF   			call	_put_number.4
17156                        	
17157                        		.dbg	line,	"include\init.c", 1021; put_number(shop_prices[1],4,7,20);
17158                        		__ld.wm		_shop_prices + 2
         01:DE06  AD 3A 26   			lda.l	_shop_prices + 2
         01:DE09  AC 3B 26   			ldy.h	_shop_prices + 2
17159                        		__st.wmq	_bx
         01:DE0C  85 FA      			sta.l	_bx
         01:DE0E  84 FB      			sty.h	_bx
17160                        		__st.umiq	4, _cl
         01:DE10  A9 04      			lda.l	#4
         01:DE12  85 FC      			sta	_cl
17161                        		__st.umiq	7, _dil
         01:DE14  A9 07      			lda.l	#7
         01:DE16  85 F0      			sta	_dil
17162                        		__st.umiq	20, _dih
         01:DE18  A9 14      			lda.l	#20
         01:DE1A  85 F1      			sta	_dih
17163                        		__call		_put_number.4
         01:DE1C  20 9F FF   			call	_put_number.4
17164                        	
17165                        		.dbg	line,	"include\init.c", 1022; put_number(shop_prices[2],4,12,20);
17166                        		__ld.wm		_shop_prices + 4
         01:DE1F  AD 3C 26   			lda.l	_shop_prices + 4
         01:DE22  AC 3D 26   			ldy.h	_shop_prices + 4
17167                        		__st.wmq	_bx
         01:DE25  85 FA      			sta.l	_bx
         01:DE27  84 FB      			sty.h	_bx
17168                        		__st.umiq	4, _cl
         01:DE29  A9 04      			lda.l	#4
         01:DE2B  85 FC      			sta	_cl
17169                        		__st.umiq	12, _dil
         01:DE2D  A9 0C      			lda.l	#12
         01:DE2F  85 F0      			sta	_dil
17170                        		__st.umiq	20, _dih
         01:DE31  A9 14      			lda.l	#20
         01:DE33  85 F1      			sta	_dih
17171                        		__call		_put_number.4
         01:DE35  20 9F FF   			call	_put_number.4
17172                        	
17173                        		.dbg	line,	"include\init.c", 1023; put_number(shop_prices[3],4,17,20);
17174                        		__ld.wm		_shop_prices + 6
         01:DE38  AD 3E 26   			lda.l	_shop_prices + 6
         01:DE3B  AC 3F 26   			ldy.h	_shop_prices + 6
17175                        		__st.wmq	_bx
         01:DE3E  85 FA      			sta.l	_bx
         01:DE40  84 FB      			sty.h	_bx
17176                        		__st.umiq	4, _cl
         01:DE42  A9 04      			lda.l	#4
         01:DE44  85 FC      			sta	_cl
17177                        		__st.umiq	17, _dil
         01:DE46  A9 11      			lda.l	#17
         01:DE48  85 F0      			sta	_dil
17178                        		__st.umiq	20, _dih
         01:DE4A  A9 14      			lda.l	#20
         01:DE4C  85 F1      			sta	_dih
17179                        		__call		_put_number.4
         01:DE4E  20 9F FF   			call	_put_number.4
17180                        	
17181                        		.dbg	line,	"include\init.c", 1024; put_number(shop_prices[4],4,22,20);
17182                        		__ld.wm		_shop_prices + 8
         01:DE51  AD 40 26   			lda.l	_shop_prices + 8
         01:DE54  AC 41 26   			ldy.h	_shop_prices + 8
17183                        		__st.wmq	_bx
         01:DE57  85 FA      			sta.l	_bx
         01:DE59  84 FB      			sty.h	_bx
17184                        		__st.umiq	4, _cl
         01:DE5B  A9 04      			lda.l	#4
         01:DE5D  85 FC      			sta	_cl
17185                        		__st.umiq	22, _dil
         01:DE5F  A9 16      			lda.l	#22
         01:DE61  85 F0      			sta	_dil
17186                        		__st.umiq	20, _dih
         01:DE63  A9 14      			lda.l	#20
         01:DE65  85 F1      			sta	_dih
17187                        		__call		_put_number.4
         01:DE67  20 9F FF   			call	_put_number.4
17188                        	
17189                        		.dbg	line,	"include\init.c", 1026; put_number(shop_prices[5],4,2,23);
17190                        		__ld.wm		_shop_prices + 10
         01:DE6A  AD 42 26   			lda.l	_shop_prices + 10
         01:DE6D  AC 43 26   			ldy.h	_shop_prices + 10
17191                        		__st.wmq	_bx
         01:DE70  85 FA      			sta.l	_bx
         01:DE72  84 FB      			sty.h	_bx
17192                        		__st.umiq	4, _cl
         01:DE74  A9 04      			lda.l	#4
         01:DE76  85 FC      			sta	_cl
17193                        		__st.umiq	2, _dil
         01:DE78  A9 02      			lda.l	#2
         01:DE7A  85 F0      			sta	_dil
17194                        		__st.umiq	23, _dih
         01:DE7C  A9 17      			lda.l	#23
         01:DE7E  85 F1      			sta	_dih
17195                        		__call		_put_number.4
         01:DE80  20 9F FF   			call	_put_number.4
17196                        	
17197                        		.dbg	line,	"include\init.c", 1027; put_number(shop_prices[6],4,7,23);
17198                        		__ld.wm		_shop_prices + 12
         01:DE83  AD 44 26   			lda.l	_shop_prices + 12
         01:DE86  AC 45 26   			ldy.h	_shop_prices + 12
17199                        		__st.wmq	_bx
         01:DE89  85 FA      			sta.l	_bx
         01:DE8B  84 FB      			sty.h	_bx
17200                        		__st.umiq	4, _cl
         01:DE8D  A9 04      			lda.l	#4
         01:DE8F  85 FC      			sta	_cl
17201                        		__st.umiq	7, _dil
         01:DE91  A9 07      			lda.l	#7
         01:DE93  85 F0      			sta	_dil
17202                        		__st.umiq	23, _dih
         01:DE95  A9 17      			lda.l	#23
         01:DE97  85 F1      			sta	_dih
17203                        		__call		_put_number.4
         01:DE99  20 9F FF   			call	_put_number.4
17204                        	
17205                        		.dbg	line,	"include\init.c", 1028; put_number(shop_prices[7],4,12,23);
17206                        		__ld.wm		_shop_prices + 14
         01:DE9C  AD 46 26   			lda.l	_shop_prices + 14
         01:DE9F  AC 47 26   			ldy.h	_shop_prices + 14
17207                        		__st.wmq	_bx
         01:DEA2  85 FA      			sta.l	_bx
         01:DEA4  84 FB      			sty.h	_bx
17208                        		__st.umiq	4, _cl
         01:DEA6  A9 04      			lda.l	#4
         01:DEA8  85 FC      			sta	_cl
17209                        		__st.umiq	12, _dil
         01:DEAA  A9 0C      			lda.l	#12
         01:DEAC  85 F0      			sta	_dil
17210                        		__st.umiq	23, _dih
         01:DEAE  A9 17      			lda.l	#23
         01:DEB0  85 F1      			sta	_dih
17211                        		__call		_put_number.4
         01:DEB2  20 9F FF   			call	_put_number.4
17212                        	
17213                        		.dbg	line,	"include\init.c", 1029; put_number(shop_prices[8],4,17,23);
17214                        		__ld.wm		_shop_prices + 16
         01:DEB5  AD 48 26   			lda.l	_shop_prices + 16
         01:DEB8  AC 49 26   			ldy.h	_shop_prices + 16
17215                        		__st.wmq	_bx
         01:DEBB  85 FA      			sta.l	_bx
         01:DEBD  84 FB      			sty.h	_bx
17216                        		__st.umiq	4, _cl
         01:DEBF  A9 04      			lda.l	#4
         01:DEC1  85 FC      			sta	_cl
17217                        		__st.umiq	17, _dil
         01:DEC3  A9 11      			lda.l	#17
         01:DEC5  85 F0      			sta	_dil
17218                        		__st.umiq	23, _dih
         01:DEC7  A9 17      			lda.l	#23
         01:DEC9  85 F1      			sta	_dih
17219                        		__call		_put_number.4
         01:DECB  20 9F FF   			call	_put_number.4
17220                        	
17221                        		.dbg	line,	"include\init.c", 1030; put_number(shop_prices[9],4,22,23);
17222                        		__ld.wm		_shop_prices + 18
         01:DECE  AD 4A 26   			lda.l	_shop_prices + 18
         01:DED1  AC 4B 26   			ldy.h	_shop_prices + 18
17223                        		__st.wmq	_bx
         01:DED4  85 FA      			sta.l	_bx
         01:DED6  84 FB      			sty.h	_bx
17224                        		__st.umiq	4, _cl
         01:DED8  A9 04      			lda.l	#4
         01:DEDA  85 FC      			sta	_cl
17225                        		__st.umiq	22, _dil
         01:DEDC  A9 16      			lda.l	#22
         01:DEDE  85 F0      			sta	_dil
17226                        		__st.umiq	23, _dih
         01:DEE0  A9 17      			lda.l	#23
         01:DEE2  85 F1      			sta	_dih
17227                        		__call		_put_number.4
         01:DEE4  20 9F FF   			call	_put_number.4
17228                        	
17229                        		.dbg	line,	"include\init.c", 1035; //--------------------------------------------------------------------------------------//
17230                        	
17231                        		.dbg	line,	"include\init.c", 1036; //                                   LOAD BG PALETTES                                   //
17232                        	
17233                        		.dbg	line,	"include\init.c", 1037; //--------------------------------------------------------------------------------------//
17234                        	
17235                        		.dbg	line,	"include\init.c", 1039; load_palette( 0, palette_SHOP, 16 );
17236                        		__st.umiq	0, _al
         01:DEE7  64 F8      			stz	_al
17237                        		__farptr	_palette_SHOP, _bp_bank, _bp
         01:DEE9  A9 E0      			lda.l	#$6000 + ($1FFF & (_palette_SHOP))
         01:DEEB  85 EC      			sta.l	_bp
         01:DEED  A9 75      			lda.h	#$6000 + ($1FFF & (_palette_SHOP))
         01:DEEF  85 ED      			sta.h	_bp
         01:DEF1  A9 0F      			lda	#bank(_palette_SHOP)
         01:DEF3  85 02      			sta	_bp_bank
17238                        		__st.umiq	16, _ah
         01:DEF5  A9 10      			lda.l	#16
         01:DEF7  85 F9      			sta	_ah
17239                        		__call		_load_palette.3
         01:DEF9  20 1D FF   			call	_load_palette.3
17240                        	
17241                        		.dbg	line,	"include\init.c", 1044; //**************************************************************************************//
17242                        	
17243                        		.dbg	line,	"include\init.c", 1045; //                                                                                      //
17244                        	
17245                        		.dbg	line,	"include\init.c", 1046; //                                       SPRITES                                        //
17246                        	
17247                        		.dbg	line,	"include\init.c", 1047; //                                                                                      //
17248                        	
17249                        		.dbg	line,	"include\init.c", 1048; //**************************************************************************************//
17250                        	
17251                        		.dbg	line,	"include\init.c", 1050; //--------------------------------------------------------------------------------------//
17252                        	
17253                        		.dbg	line,	"include\init.c", 1051; //                                   HIDE ALL SPRITES                                   //
17254                        	
17255                        		.dbg	line,	"include\init.c", 1052; //--------------------------------------------------------------------------------------//
17256                        	
17257                        		.dbg	line,	"include\init.c", 1054; for(i=0 ; i<63 ; i++)
17258                        		__st.umiq	0, __init_SHOP_end - 1  /* i */
         01:DEFC  9C 12 23   			stz	__init_SHOP_end - 1
17259    01:DEFF             	.LL729:
17260                        		__ld.umq	__init_SHOP_end - 1  /* i */
         01:DEFF  AD 12 23   			lda	__init_SHOP_end - 1
17261                        		__ult_b.uiq	63
         01:DF02  C9 3F      			cmp	#63		; Subtract integer from A.
         01:DF04  6A         			ror	a		; CC if A < integer.
         01:DF05  49 80      			eor	#$80
         01:DF07  2A         			rol	a
17262                        		__btrue		.LL731
         01:DF08  B0 07      			bcs	.LL731
17263                        		__bra		.LL732
         01:DF0A  80 19      			bra	.LL732
17264    01:DF0C             	.LL730:
17265                        		__inc.umq	__init_SHOP_end - 1  /* i */
         01:DF0C  EE 12 23   			inc	__init_SHOP_end - 1
17266                        		__bra		.LL729
         01:DF0F  80 EE      			bra	.LL729
17267    01:DF11             	.LL731:
17268                        	
17269                        		.dbg	line,	"include\init.c", 1055; {
17270                        	
17271                        		.dbg	line,	"include\init.c", 1056; spr_set(i);
17272                        		__ld.umq	__init_SHOP_end - 1  /* i */
         01:DF11  AD 12 23   			lda	__init_SHOP_end - 1
17273                        		__call		_spr_set.1
         01:DF14  20 DD E7   			call	_spr_set.1
17274                        	
17275                        		.dbg	line,	"include\init.c", 1057; spr_hide();
17276                        		__call		_spr_hide
         01:DF17  20 F8 E7   			call	_spr_hide
17277                        	
17278                        		.dbg	line,	"include\init.c", 1059; sgx_spr_set(i);
17279                        		__ld.umq	__init_SHOP_end - 1  /* i */
         01:DF1A  AD 12 23   			lda	__init_SHOP_end - 1
17280                        		__call		_sgx_spr_set.1
         01:DF1D  20 8A E8   			call	_sgx_spr_set.1
17281                        	
17282                        		.dbg	line,	"include\init.c", 1060; sgx_spr_hide();
17283                        		__call		_sgx_spr_hide
         01:DF20  20 A5 E8   			call	_sgx_spr_hide
17284                        	
17285                        		.dbg	line,	"include\init.c", 1061; }
17286                        		__bra		.LL730
         01:DF23  80 E7      			bra	.LL730
17287    01:DF25             	.LL732:
17288                        	
17289                        		.dbg	line,	"include\init.c", 1063; //--------------------------------------------------------------------------------------//
17290                        	
17291                        		.dbg	line,	"include\init.c", 1064; //                                        CURSOR                                        //
17292                        	
17293                        		.dbg	line,	"include\init.c", 1065; //--------------------------------------------------------------------------------------//
17294                        	
17295                        		.dbg	line,	"include\init.c", 1067; // LOAD CURSOR TILES //
17296                        	
17297                        		.dbg	line,	"include\init.c", 1068; load_vram(0x2000, tiles_SPR_CURSOR , TILES_16);
17298                        		__st.wmiq	8192, _di
         01:DF25  64 F0      			stz.l	_di
         01:DF27  A9 20      			lda.h	#8192
         01:DF29  85 F1      			sta.h	_di
17299                        		__farptr	_tiles_SPR_CURSOR, _bp_bank, _bp
         01:DF2B  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_CURSOR))
         01:DF2D  85 EC      			sta.l	_bp
         01:DF2F  A9 7E      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_CURSOR))
         01:DF31  85 ED      			sta.h	_bp
         01:DF33  A9 14      			lda	#bank(_tiles_SPR_CURSOR)
         01:DF35  85 02      			sta	_bp_bank
17300                        		__st.wmiq	256, _ax
         01:DF37  64 F8      			stz.l	_ax
         01:DF39  A9 01      			lda.h	#256
         01:DF3B  85 F9      			sta.h	_ax
17301                        		 _load_vram.3
         01:DF3D  82         			clx				; Offset to PCE VDC.
         01:DF3E  20 4F FF   			call	load_vram_x
17302                        	
17303                        		.dbg	line,	"include\init.c", 1071; // SELECT CURSOR SPRITE //
17304                        	
17305                        		.dbg	line,	"include\init.c", 1072; spr_set(0);
17306                        		__ld.uiq	0
         01:DF41  62         			cla
17307                        		__call		_spr_set.1
         01:DF42  20 DD E7   			call	_spr_set.1
17308                        	
17309                        		.dbg	line,	"include\init.c", 1073; spr_hide();
17310                        		__call		_spr_hide
         01:DF45  20 F8 E7   			call	_spr_hide
17311                        	
17312                        		.dbg	line,	"include\init.c", 1076; //spr_x(24);
17313                        	
17314                        		.dbg	line,	"include\init.c", 1077; //spr_y(144);
17315                        	
17316                        		.dbg	line,	"include\init.c", 1079; // SET TILES DATA FOR THE CURSOR //
17317                        	
17318                        		.dbg	line,	"include\init.c", 1080; spr_pattern(0x2000);
17319                        		__ld.wi		8192
         01:DF48  62         			cla
         01:DF49  A0 20      			ldy.h	#8192
17320                        		__call		_spr_pattern.1
         01:DF4B  20 26 E8   			call	_spr_pattern.1
17321                        	
17322                        		.dbg	line,	"include\init.c", 1083; spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_32x32);
17323                        		__st.umiq	185, _al
         01:DF4E  A9 B9      			lda.l	#185
         01:DF50  85 F8      			sta	_al
17324                        		__ld.uiq	17
         01:DF52  A9 11      			lda	#17
17325                        		__call		_spr_ctrl.2
         01:DF54  20 3C E8   			call	_spr_ctrl.2
17326                        	
17327                        		.dbg	line,	"include\init.c", 1086; spr_pal(16);
17328                        		__ld.uiq	16
         01:DF57  A9 10      			lda	#16
17329                        		__call		_spr_pal.1
         01:DF59  20 4D E8   			call	_spr_pal.1
17330                        	
17331                        		.dbg	line,	"include\init.c", 1087; spr_pri(TRUE);
17332                        		__ld.uiq	1
         01:DF5C  A9 01      			lda	#1
17333                        		__call		_spr_pri.1
         01:DF5E  20 5C E8   			call	_spr_pri.1
17334                        	
17335                        		.dbg	line,	"include\init.c", 1090; // UPDATE PCE SAT //
17336                        	
17337                        		.dbg	line,	"include\init.c", 1091; satb_update();
17338                        		__call		_satb_update
         01:DF61  20 13 FF   			call	_satb_update
17339                        	
17340                        		.dbg	line,	"include\init.c", 1092; sgx_satb_update();
17341                        		__call		_sgx_satb_update
         01:DF64  20 73 FE   			call	_sgx_satb_update
17342                        	
17343                        		.dbg	line,	"include\init.c", 1096; //--------------------------------------------------------------------------------------//
17344                        	
17345                        		.dbg	line,	"include\init.c", 1097; //                                LOAD SPRITES PALETTES                                 //
17346                        	
17347                        		.dbg	line,	"include\init.c", 1098; //--------------------------------------------------------------------------------------//
17348                        	
17349                        		.dbg	line,	"include\init.c", 1100; load_palette( 16, palette_objects_2, 1 );
17350                        		__st.umiq	16, _al
         01:DF67  A9 10      			lda.l	#16
         01:DF69  85 F8      			sta	_al
17351                        		__farptr	_palette_objects_2, _bp_bank, _bp
         01:DF6B  A9 E0      			lda.l	#$6000 + ($1FFF & (_palette_objects_2))
         01:DF6D  85 EC      			sta.l	_bp
         01:DF6F  A9 70      			lda.h	#$6000 + ($1FFF & (_palette_objects_2))
         01:DF71  85 ED      			sta.h	_bp
         01:DF73  A9 14      			lda	#bank(_palette_objects_2)
         01:DF75  85 02      			sta	_bp_bank
17352                        		__st.umiq	1, _ah
         01:DF77  A9 01      			lda.l	#1
         01:DF79  85 F9      			sta	_ah
17353                        		__call		_load_palette.3
         01:DF7B  20 1D FF   			call	_load_palette.3
17354                        	
17355                        		.dbg	line,	"include\init.c", 1104; // VSYNC //
17356                        	
17357                        		.dbg	line,	"include\init.c", 1105; vsync();
17358                        		__call		_vsync
         01:DF7E  20 09 E3   			call	_vsync
17359                        	
17360                        		.dbg	line,	"include\init.c", 1107; // ENABLE DISPLAY //
17361                        	
17362                        		.dbg	line,	"include\init.c", 1108; disp_on();
17363                        		__call		_disp_on
         01:DF81  20 16 E4   			call	_disp_on
17364                        	
17365                        		.dbg	line,	"include\init.c", 1109; }
17366    01:DF84             	.LL723:
17367                        		__return	0
         01:DF84  4C EF FF   			jmp	leave_proc
17368                        		.dbg	clear
17369                        		.endp
17370               67E0     		.data
17371               2311     		.bss
17372    F8:2311             	__init_SHOP_loc:
17373    F8:2311             			ds	2
17374    F8:2313             	__init_SHOP_end:
17375               E309     		.code
17376                        		.pceas
17377                        	
17378                        		.dbg	line,	"main.c", 33; main()
17379                        		.dbg	line,	"main.c", 34; {
17380                        	;***********************
17381                        	;***********************
17382                        	
17383                        		.hucc
17384    08:DDC0             		.proc		_main
17385                        		__enter		_main
17386                        	
17387                        		.dbg	line,	"main.c", 35; if(!sgx_detect())
17388                        		 _sgx_detect
         08:DDC0  AD E8 22   			lda	sgx_detected
         08:DDC3  C2         			cly
17389                        		__not.wr
         08:DDC4  84 00      			sty	__temp
         08:DDC6  05 00      			ora	__temp
         08:DDC8  18         			clc
         08:DDC9  D0 01      			bne	!+
         08:DDCB  38         			sec
         08:DDCC             	!:
17390                        		__bfalse	.LL734
         08:DDCC  90 15      			bcc	.LL734
17391                        	
17392                        		.dbg	line,	"main.c", 36; {
17393                        	
17394                        		.dbg	line,	"main.c", 37; put_string("Halt: SGX hardware not found", 2, 13);
17395                        		__ld.wi		__const1+36
         08:DDCE  A9 24      			lda.l	#__const1+36
         08:DDD0  A0 60      			ldy.h	#__const1+36
17396                        		__st.wmq	_bp
         08:DDD2  85 EC      			sta.l	_bp
         08:DDD4  84 ED      			sty.h	_bp
17397                        		__st.umiq	2, _dil
         08:DDD6  A9 02      			lda.l	#2
         08:DDD8  85 F0      			sta	_dil
17398                        		__st.umiq	13, _dih
         08:DDDA  A9 0D      			lda.l	#13
         08:DDDC  85 F1      			sta	_dih
17399                        		__call		_put_string.3
         08:DDDE  20 68 E6   			call	_put_string.3
17400                        	
17401                        		.dbg	line,	"main.c", 39; for(;;)
17402    08:DDE1             	.LL735	.alias		.LL737
17403    08:DDE1             	.LL736	.alias		.LL737
17404    08:DDE1             	.LL737:
17405                        	
17406                        		.dbg	line,	"main.c", 40; {
17407                        	
17408                        		.dbg	line,	"main.c", 41; // INFINITE LOOP //
17409                        	
17410                        		.dbg	line,	"main.c", 42; }
17411                        		__bra		.LL737
         08:DDE1  80 FE      			bra	.LL737
17412    08:DDE3             	.LL738:
17413                        	
17414                        		.dbg	line,	"main.c", 43; }
17415                        	
17416                        		.dbg	line,	"main.c", 48; init_SYSTEM();
17417    08:DDE3             	.LL734:
17418                        		__call		_init_SYSTEM
         08:DDE3  20 69 FE   			call	_init_SYSTEM
17419                        	
17420                        		.dbg	line,	"main.c", 49; 
17421                        	
17422                        		.dbg	line,	"main.c", 50; 
17423                        	
17424                        		.dbg	line,	"main.c", 51; init_VARIABLES();
17425                        		__call		_init_VARIABLES
         08:DDE6  20 5F FE   			call	_init_VARIABLES
17426                        	
17427                        		.dbg	line,	"main.c", 54; init_PLAYER();
17428                        		__call		_init_PLAYER
         08:DDE9  20 55 FE   			call	_init_PLAYER
17429                        	
17430                        		.dbg	line,	"main.c", 59; //**************************************************************************************//
17431                        	
17432                        		.dbg	line,	"main.c", 60; //                                                                                      //
17433                        	
17434                        		.dbg	line,	"main.c", 61; //                                         MAIN                                         //
17435                        	
17436                        		.dbg	line,	"main.c", 62; //                                                                                      //
17437                        	
17438                        		.dbg	line,	"main.c", 63; //**************************************************************************************//
17439                        	
17440                        		.dbg	line,	"main.c", 64; for(;;)
17441    08:DDEC             	.LL739:
17442    08:DDEC             	.LL740:
17443    08:DDEC             	.LL741:
17444                        	
17445                        		.dbg	line,	"main.c", 65; {
17446                        	
17447                        		.dbg	line,	"main.c", 66; switch(sequence_id)
17448                        		__ld.umq	_sequence_id
         08:DDEC  AD 13 23   			lda	_sequence_id
17449                        		__bra		.LL743
         08:DDEF  4C 99 DF   			bra	.LL743
17450                        	
17451                        		.dbg	line,	"main.c", 67; {
17452                        	
17453                        		.dbg	line,	"main.c", 68; //-----------------------------------------------------------------------------//
17454                        	
17455                        		.dbg	line,	"main.c", 69; //                                    TITLE                                    //
17456                        	
17457                        		.dbg	line,	"main.c", 70; //-----------------------------------------------------------------------------//
17458                        	
17459                        		.dbg	line,	"main.c", 71; case SEQUENCE_TITLE:
17460    08:DDF2             	.LL745:
17461                        		__case		0
17462                        	
17463                        		.dbg	line,	"main.c", 72; if(sequence_loaded == FALSE)
17464                        		__not.um	_sequence_loaded
         08:DDF2  AD 14 23   			lda	_sequence_loaded
         08:DDF5  18         			clc
         08:DDF6  D0 01      			bne	!+
         08:DDF8  38         			sec
         08:DDF9             	!:
17465                        		__bfalse	.LL746
         08:DDF9  90 0A      			bcc	.LL746
17466                        	
17467                        		.dbg	line,	"main.c", 73; {
17468                        	
17469                        		.dbg	line,	"main.c", 74; init_TITLE();
17470                        		__call		_init_TITLE
         08:DDFB  20 4B FE   			call	_init_TITLE
17471                        	
17472                        		.dbg	line,	"main.c", 76; sequence_loaded = TRUE;
17473                        		__st.umiq	1, _sequence_loaded
         08:DDFE  A9 01      			lda.l	#1
         08:DE00  8D 14 23   			sta	_sequence_loaded
17474                        	
17475                        		.dbg	line,	"main.c", 77; }
17476                        	
17477                        		.dbg	line,	"main.c", 79; else
17478                        		__bra		.LL747
         08:DE03  80 E7      			bra	.LL747
17479    08:DE05             	.LL746:
17480                        	
17481                        		.dbg	line,	"main.c", 80; {
17482                        	
17483                        		.dbg	line,	"main.c", 81; vsync();
17484                        		__call		_vsync
         08:DE05  20 09 E3   			call	_vsync
17485                        	
17486                        		.dbg	line,	"main.c", 83; joypad_BUTTONS_TITLE();
17487                        		__call		_joypad_BUTTONS_TITLE
         08:DE08  20 41 FE   			call	_joypad_BUTTONS_TITLE
17488                        	
17489                        		.dbg	line,	"main.c", 85; satb_update();
17490                        		__call		_satb_update
         08:DE0B  20 13 FF   			call	_satb_update
17491                        	
17492                        		.dbg	line,	"main.c", 86; }
17493    08:DE0E             	.LL747	.alias		.LL744
17494                        	
17495                        		.dbg	line,	"main.c", 88; break;
17496                        		__bra		.LL744
         08:DE0E  80 DC      			bra	.LL744
17497                        	
17498                        		.dbg	line,	"main.c", 91; //-----------------------------------------------------------------------------//
17499                        	
17500                        		.dbg	line,	"main.c", 92; //                                    INTRO                                    //
17501                        	
17502                        		.dbg	line,	"main.c", 93; //-----------------------------------------------------------------------------//
17503                        	
17504                        		.dbg	line,	"main.c", 94; case SEQUENCE_INTRO:
17505    08:DE10             	.LL748:
17506                        		__case		1
17507                        	
17508                        		.dbg	line,	"main.c", 95; break;
17509                        		__bra		.LL744
         08:DE10  80 DA      			bra	.LL744
17510                        	
17511                        		.dbg	line,	"main.c", 98; //-----------------------------------------------------------------------------//
17512                        	
17513                        		.dbg	line,	"main.c", 99; //                                    GAME                                     //
17514                        	
17515                        		.dbg	line,	"main.c", 100; //-----------------------------------------------------------------------------//
17516                        	
17517                        		.dbg	line,	"main.c", 101; case SEQUENCE_GAME:
17518    08:DE12             	.LL749:
17519                        		__case		2
17520                        	
17521                        		.dbg	line,	"main.c", 102; if(sequence_loaded == FALSE)
17522                        		__not.um	_sequence_loaded
         08:DE12  AD 14 23   			lda	_sequence_loaded
         08:DE15  18         			clc
         08:DE16  D0 01      			bne	!+
         08:DE18  38         			sec
         08:DE19             	!:
17523                        		__bfalse	.LL750
         08:DE19  90 0A      			bcc	.LL750
17524                        	
17525                        		.dbg	line,	"main.c", 103; {
17526                        	
17527                        		.dbg	line,	"main.c", 104; init_LEVEL();
17528                        		__call		_init_LEVEL
         08:DE1B  20 37 FE   			call	_init_LEVEL
17529                        	
17530                        		.dbg	line,	"main.c", 106; sequence_loaded = TRUE;
17531                        		__st.umiq	1, _sequence_loaded
         08:DE1E  A9 01      			lda.l	#1
         08:DE20  8D 14 23   			sta	_sequence_loaded
17532                        	
17533                        		.dbg	line,	"main.c", 107; }
17534                        	
17535                        		.dbg	line,	"main.c", 109; else
17536                        		__bra		.LL751
         08:DE23  80 C7      			bra	.LL751
17537    08:DE25             	.LL750:
17538                        	
17539                        		.dbg	line,	"main.c", 110; {
17540                        	
17541                        		.dbg	line,	"main.c", 111; switch(level_id)
17542                        		__ld.umq	_level_id
         08:DE25  AD 15 23   			lda	_level_id
17543                        		__bra		.LL752
         08:DE28  80 40      			bra	.LL752
17544                        	
17545                        		.dbg	line,	"main.c", 112; {
17546                        	
17547                        		.dbg	line,	"main.c", 113; case 1:
17548    08:DE2A             	.LL754:
17549                        		__case		1
17550                        	
17551                        		.dbg	line,	"main.c", 114; vsync();
17552                        		__call		_vsync
         08:DE2A  20 09 E3   			call	_vsync
17553                        	
17554                        		.dbg	line,	"main.c", 116; update_PLAYER();
17555                        		__call		_update_PLAYER
         08:DE2D  20 2D FE   			call	_update_PLAYER
17556                        	
17557                        		.dbg	line,	"main.c", 117; update_WEAPON();
17558                        		__call		_update_WEAPON
         08:DE30  20 23 FE   			call	_update_WEAPON
17559                        	
17560                        		.dbg	line,	"main.c", 118; //put_number(hit_wall,1,0,1);
17561                        	
17562                        		.dbg	line,	"main.c", 121; scroll_object();
17563                        		__call		_scroll_object
         08:DE33  20 C3 FE   			call	_scroll_object
17564                        	
17565                        		.dbg	line,	"main.c", 122; scroll_chest();
17566                        		__call		_scroll_chest
         08:DE36  20 A5 FE   			call	_scroll_chest
17567                        	
17568                        		.dbg	line,	"main.c", 123; scroll_npc();
17569                        		__call		_scroll_npc
         08:DE39  20 19 FE   			call	_scroll_npc
17570                        	
17571                        		.dbg	line,	"main.c", 125; check_OBJECT();
17572                        		__call		_check_OBJECT
         08:DE3C  20 0F FE   			call	_check_OBJECT
17573                        	
17574                        		.dbg	line,	"main.c", 126; check_NPC();
17575                        		__call		_check_NPC
         08:DE3F  20 05 FE   			call	_check_NPC
17576                        	
17577                        		.dbg	line,	"main.c", 128; display_TIME_LEVEL();
17578                        		__call		_display_TIME_LEVEL
         08:DE42  20 F5 FE   			call	_display_TIME_LEVEL
17579                        	
17580                        		.dbg	line,	"main.c", 130; satb_update();
17581                        		__call		_satb_update
         08:DE45  20 13 FF   			call	_satb_update
17582                        	
17583                        		.dbg	line,	"main.c", 131; sgx_satb_update();
17584                        		__call		_sgx_satb_update
         08:DE48  20 73 FE   			call	_sgx_satb_update
17585                        	
17586                        		.dbg	line,	"main.c", 133; scroll_BG();
17587                        		__call		_scroll_BG
         08:DE4B  20 FB FD   			call	_scroll_BG
17588                        	
17589                        		.dbg	line,	"main.c", 135; joypad_DIR();
17590                        		__call		_joypad_DIR
         08:DE4E  20 F1 FD   			call	_joypad_DIR
17591                        	
17592                        		.dbg	line,	"main.c", 136; joypad_BUTTONS();
17593                        		__call		_joypad_BUTTONS
         08:DE51  20 E7 FD   			call	_joypad_BUTTONS
17594                        	
17595                        		.dbg	line,	"main.c", 138; break;
17596                        		__bra		.LL753
         08:DE54  80 96      			bra	.LL753
17597                        	
17598                        		.dbg	line,	"main.c", 141; case 2:
17599    08:DE56             	.LL755:
17600                        		__case		2
17601                        	
17602                        		.dbg	line,	"main.c", 142; vsync();
17603                        		__call		_vsync
         08:DE56  20 09 E3   			call	_vsync
17604                        	
17605                        		.dbg	line,	"main.c", 143; break;
17606                        		__bra		.LL753
         08:DE59  80 91      			bra	.LL753
17607                        	
17608                        		.dbg	line,	"main.c", 146; case 3:
17609    08:DE5B             	.LL756:
17610                        		__case		3
17611                        	
17612                        		.dbg	line,	"main.c", 147; vsync();
17613                        		__call		_vsync
         08:DE5B  20 09 E3   			call	_vsync
17614                        	
17615                        		.dbg	line,	"main.c", 148; break;
17616                        		__bra		.LL753
         08:DE5E  80 8C      			bra	.LL753
17617                        	
17618                        		.dbg	line,	"main.c", 151; case 4:
17619    08:DE60             	.LL757:
17620                        		__case		4
17621                        	
17622                        		.dbg	line,	"main.c", 152; vsync();
17623                        		__call		_vsync
         08:DE60  20 09 E3   			call	_vsync
17624                        	
17625                        		.dbg	line,	"main.c", 153; break;
17626                        		__bra		.LL753
         08:DE63  80 87      			bra	.LL753
17627                        	
17628                        		.dbg	line,	"main.c", 156; case 5:
17629    08:DE65             	.LL758:
17630                        		__case		5
17631                        	
17632                        		.dbg	line,	"main.c", 157; vsync();
17633                        		__call		_vsync
         08:DE65  20 09 E3   			call	_vsync
17634                        	
17635                        		.dbg	line,	"main.c", 158; break;
17636                        		__bra		.LL753
         08:DE68  80 82      			bra	.LL753
17637                        	
17638                        		.dbg	line,	"main.c", 160; }
17639    08:DE6A             	.LL752:
17640                        		__switch_r.ur	0, 5
         08:DE6A  C9 06      			cmp	#(5 - 0) + 1
         08:DE6C  90 02      			bcc	!found+
         08:DE6E  A9 06      	!default:	lda	#(5 - 0) + 1
         08:DE70  0A         	!found:		asl	a
         08:DE71  AA         			tax
         08:DE72  7C 75 DE   			jmp	[!table+, x]
17641                        	
17642    08:DE75  EC DD      	!table:		dw	.LL753, .LL754, .LL755, .LL756, .LL757, .LL758
         08:DE77  2A DE       
         08:DE79  56 DE       
         08:DE7B  5B DE       
         08:DE7D  60 DE       
         08:DE7F  65 DE       
17643    08:DE81  EC DD      			dw	.LL753
17644    08:DE83             	.LL753	.alias		.LL744
17645                        	
17646                        		.dbg	line,	"main.c", 161; }
17647    08:DE83             	.LL751	.alias		.LL744
17648                        	
17649                        		.dbg	line,	"main.c", 163; break;
17650                        		__bra		.LL744
         08:DE83  4C EC DD   			bra	.LL744
17651                        	
17652                        		.dbg	line,	"main.c", 166; //-----------------------------------------------------------------------------//
17653                        	
17654                        		.dbg	line,	"main.c", 167; //                                     NPC                                     //
17655                        	
17656                        		.dbg	line,	"main.c", 168; //-----------------------------------------------------------------------------//
17657                        	
17658                        		.dbg	line,	"main.c", 169; case SEQUENCE_NPC:
17659    08:DE86             	.LL759:
17660                        		__case		3
17661                        	
17662                        		.dbg	line,	"main.c", 170; break;
17663                        		__bra		.LL744
         08:DE86  4C EC DD   			bra	.LL744
17664                        	
17665                        		.dbg	line,	"main.c", 173; //-----------------------------------------------------------------------------//
17666                        	
17667                        		.dbg	line,	"main.c", 174; //                                    SHOP                                     //
17668                        	
17669                        		.dbg	line,	"main.c", 175; //-----------------------------------------------------------------------------//
17670                        	
17671                        		.dbg	line,	"main.c", 176; case SEQUENCE_SHOP:
17672    08:DE89             	.LL760:
17673                        		__case		4
17674                        	
17675                        		.dbg	line,	"main.c", 177; if(sequence_loaded == FALSE)
17676                        		__not.um	_sequence_loaded
         08:DE89  AD 14 23   			lda	_sequence_loaded
         08:DE8C  18         			clc
         08:DE8D  D0 01      			bne	!+
         08:DE8F  38         			sec
         08:DE90             	!:
17677                        		__bfalse	.LL761
         08:DE90  90 0B      			bcc	.LL761
17678                        	
17679                        		.dbg	line,	"main.c", 178; {
17680                        	
17681                        		.dbg	line,	"main.c", 179; init_SHOP();
17682                        		__call		_init_SHOP
         08:DE92  20 DD FD   			call	_init_SHOP
17683                        	
17684                        		.dbg	line,	"main.c", 181; sequence_loaded = TRUE;
17685                        		__st.umiq	1, _sequence_loaded
         08:DE95  A9 01      			lda.l	#1
         08:DE97  8D 14 23   			sta	_sequence_loaded
17686                        	
17687                        		.dbg	line,	"main.c", 182; }
17688                        	
17689                        		.dbg	line,	"main.c", 183; 
17690                        	
17691                        		.dbg	line,	"main.c", 184; else
17692                        		__bra		.LL762
         08:DE9A  4C EC DD   			bra	.LL762
17693    08:DE9D             	.LL761:
17694                        	
17695                        		.dbg	line,	"main.c", 185; {
17696                        	
17697                        		.dbg	line,	"main.c", 186; switch(shop_phase)
17698                        		__ld.umq	_shop_phase
         08:DE9D  AD D8 23   			lda	_shop_phase
17699                        		__bra		.LL763
         08:DEA0  4C 83 DF   			bra	.LL763
17700                        	
17701                        		.dbg	line,	"main.c", 187; {
17702                        	
17703                        		.dbg	line,	"main.c", 188; case SHOP_PHASE_ENTER:
17704    08:DEA3             	.LL765:
17705                        		__case		0
17706                        	
17707                        		.dbg	line,	"main.c", 189; vsync();
17708                        		__call		_vsync
         08:DEA3  20 09 E3   			call	_vsync
17709                        	
17710                        		.dbg	line,	"main.c", 191; if(shop_counter == 0)
17711                        		__not.um	_shop_counter
         08:DEA6  AD D9 23   			lda	_shop_counter
         08:DEA9  18         			clc
         08:DEAA  D0 01      			bne	!+
         08:DEAC  38         			sec
         08:DEAD             	!:
17712                        		__bfalse	.LL766
         08:DEAD  90 28      			bcc	.LL766
17713                        	
17714                        		.dbg	line,	"main.c", 192; {
17715                        	
17716                        		.dbg	line,	"main.c", 193; put_string("Maybe, i can sell you" ,  2 , 15);
17717                        		__ld.wi		__const1+65
         08:DEAF  A9 41      			lda.l	#__const1+65
         08:DEB1  A0 60      			ldy.h	#__const1+65
17718                        		__st.wmq	_bp
         08:DEB3  85 EC      			sta.l	_bp
         08:DEB5  84 ED      			sty.h	_bp
17719                        		__st.umiq	2, _dil
         08:DEB7  A9 02      			lda.l	#2
         08:DEB9  85 F0      			sta	_dil
17720                        		__st.umiq	15, _dih
         08:DEBB  A9 0F      			lda.l	#15
         08:DEBD  85 F1      			sta	_dih
17721                        		__call		_put_string.3
         08:DEBF  20 68 E6   			call	_put_string.3
17722                        	
17723                        		.dbg	line,	"main.c", 194; put_string("something..." , 18 , 16);
17724                        		__ld.wi		__const1+87
         08:DEC2  A9 57      			lda.l	#__const1+87
         08:DEC4  A0 60      			ldy.h	#__const1+87
17725                        		__st.wmq	_bp
         08:DEC6  85 EC      			sta.l	_bp
         08:DEC8  84 ED      			sty.h	_bp
17726                        		__st.umiq	18, _dil
         08:DECA  A9 12      			lda.l	#18
         08:DECC  85 F0      			sta	_dil
17727                        		__st.umiq	16, _dih
         08:DECE  A9 10      			lda.l	#16
         08:DED0  85 F1      			sta	_dih
17728                        		__call		_put_string.3
         08:DED2  20 68 E6   			call	_put_string.3
17729                        	
17730                        		.dbg	line,	"main.c", 195; }
17731                        	
17732                        		.dbg	line,	"main.c", 197; else if(shop_counter == 120)
17733                        		__bra		.LL767
         08:DED5  80 44      			bra	.LL767
17734    08:DED7             	.LL766:
17735                        		__ld.umq	_shop_counter
         08:DED7  AD D9 23   			lda	_shop_counter
17736                        		__equ_b.uiq	120
         08:DEDA  C9 78      			cmp	#120
         08:DEDC  F0 01      			beq	!+
         08:DEDE  18         			clc
         08:DEDF             	!:
17737                        		__bfalse	.LL768
         08:DEDF  90 3A      			bcc	.LL768
17738                        	
17739                        		.dbg	line,	"main.c", 198; {
17740                        	
17741                        		.dbg	line,	"main.c", 199; put_string("                     " ,  2 , 15);
17742                        		__ld.wi		__const1+100
         08:DEE1  A9 64      			lda.l	#__const1+100
         08:DEE3  A0 60      			ldy.h	#__const1+100
17743                        		__st.wmq	_bp
         08:DEE5  85 EC      			sta.l	_bp
         08:DEE7  84 ED      			sty.h	_bp
17744                        		__st.umiq	2, _dil
         08:DEE9  A9 02      			lda.l	#2
         08:DEEB  85 F0      			sta	_dil
17745                        		__st.umiq	15, _dih
         08:DEED  A9 0F      			lda.l	#15
         08:DEEF  85 F1      			sta	_dih
17746                        		__call		_put_string.3
         08:DEF1  20 68 E6   			call	_put_string.3
17747                        	
17748                        		.dbg	line,	"main.c", 200; put_string("            " , 18 , 16);
17749                        		__ld.wi		__const1+122
         08:DEF4  A9 7A      			lda.l	#__const1+122
         08:DEF6  A0 60      			ldy.h	#__const1+122
17750                        		__st.wmq	_bp
         08:DEF8  85 EC      			sta.l	_bp
         08:DEFA  84 ED      			sty.h	_bp
17751                        		__st.umiq	18, _dil
         08:DEFC  A9 12      			lda.l	#18
         08:DEFE  85 F0      			sta	_dil
17752                        		__st.umiq	16, _dih
         08:DF00  A9 10      			lda.l	#16
         08:DF02  85 F1      			sta	_dih
17753                        		__call		_put_string.3
         08:DF04  20 68 E6   			call	_put_string.3
17754                        	
17755                        		.dbg	line,	"main.c", 202; spr_x(24);
17756                        		__ld.wi		24
         08:DF07  A9 18      			lda.l	#24
         08:DF09  C2         			cly
17757                        		__call		_spr_x.1
         08:DF0A  20 0A E8   			call	_spr_x.1
17758                        	
17759                        		.dbg	line,	"main.c", 203; spr_y(144);
17760                        		__ld.wi		144
         08:DF0D  A9 90      			lda.l	#144
         08:DF0F  C2         			cly
17761                        		__call		_spr_y.1
         08:DF10  20 19 E8   			call	_spr_y.1
17762                        	
17763                        		.dbg	line,	"main.c", 204; satb_update();
17764                        		__call		_satb_update
         08:DF13  20 13 FF   			call	_satb_update
17765                        	
17766                        		.dbg	line,	"main.c", 206; shop_phase = SHOP_PHASE_BUY;
17767                        		__st.umiq	1, _shop_phase
         08:DF16  A9 01      			lda.l	#1
         08:DF18  8D D8 23   			sta	_shop_phase
17768                        	
17769                        		.dbg	line,	"main.c", 207; }
17770                        	
17771                        		.dbg	line,	"main.c", 209; shop_counter++;
17772    08:DF1B             	.LL768:
17773    08:DF1B             	.LL767:
17774                        		__inc.umq	_shop_counter
         08:DF1B  EE D9 23   			inc	_shop_counter
17775                        	
17776                        		.dbg	line,	"main.c", 211; break;
17777                        		__bra		.LL764
         08:DF1E  4C EC DD   			bra	.LL764
17778                        	
17779                        		.dbg	line,	"main.c", 212; 
17780                        	
17781                        		.dbg	line,	"main.c", 214; case SHOP_PHASE_BUY:
17782    08:DF21             	.LL769:
17783                        		__case		1
17784                        	
17785                        		.dbg	line,	"main.c", 215; vsync();
17786                        		__call		_vsync
         08:DF21  20 09 E3   			call	_vsync
17787                        	
17788                        		.dbg	line,	"main.c", 217; joypad_BUTTONS_SHOP();
17789                        		__call		_joypad_BUTTONS_SHOP
         08:DF24  20 D3 FD   			call	_joypad_BUTTONS_SHOP
17790                        	
17791                        		.dbg	line,	"main.c", 218; display_TIME_SHOP();
17792                        		__call		_display_TIME_SHOP
         08:DF27  20 C9 FD   			call	_display_TIME_SHOP
17793                        	
17794                        		.dbg	line,	"main.c", 219; satb_update();
17795                        		__call		_satb_update
         08:DF2A  20 13 FF   			call	_satb_update
17796                        	
17797                        		.dbg	line,	"main.c", 221; break;
17798                        		__bra		.LL764
         08:DF2D  4C EC DD   			bra	.LL764
17799                        	
17800                        		.dbg	line,	"main.c", 224; case SHOP_PHASE_EXIT:
17801    08:DF30             	.LL770:
17802                        		__case		2
17803                        	
17804                        		.dbg	line,	"main.c", 225; vsync();
17805                        		__call		_vsync
         08:DF30  20 09 E3   			call	_vsync
17806                        	
17807                        		.dbg	line,	"main.c", 227; if(shop_counter == 0)
17808                        		__not.um	_shop_counter
         08:DF33  AD D9 23   			lda	_shop_counter
         08:DF36  18         			clc
         08:DF37  D0 01      			bne	!+
         08:DF39  38         			sec
         08:DF3A             	!:
17809                        		__bfalse	.LL771
         08:DF3A  90 1F      			bcc	.LL771
17810                        	
17811                        		.dbg	line,	"main.c", 228; {
17812                        	
17813                        		.dbg	line,	"main.c", 229; put_string("GOOD LUCK!" , 11 , 16);
17814                        		__ld.wi		__const1+135
         08:DF3C  A9 87      			lda.l	#__const1+135
         08:DF3E  A0 60      			ldy.h	#__const1+135
17815                        		__st.wmq	_bp
         08:DF40  85 EC      			sta.l	_bp
         08:DF42  84 ED      			sty.h	_bp
17816                        		__st.umiq	11, _dil
         08:DF44  A9 0B      			lda.l	#11
         08:DF46  85 F0      			sta	_dil
17817                        		__st.umiq	16, _dih
         08:DF48  A9 10      			lda.l	#16
         08:DF4A  85 F1      			sta	_dih
17818                        		__call		_put_string.3
         08:DF4C  20 68 E6   			call	_put_string.3
17819                        	
17820                        		.dbg	line,	"main.c", 231; // HIDE CURSOR //
17821                        	
17822                        		.dbg	line,	"main.c", 232; spr_set(0);
17823                        		__ld.uiq	0
         08:DF4F  62         			cla
17824                        		__call		_spr_set.1
         08:DF50  20 DD E7   			call	_spr_set.1
17825                        	
17826                        		.dbg	line,	"main.c", 233; spr_hide();
17827                        		__call		_spr_hide
         08:DF53  20 F8 E7   			call	_spr_hide
17828                        	
17829                        		.dbg	line,	"main.c", 234; satb_update();
17830                        		__call		_satb_update
         08:DF56  20 13 FF   			call	_satb_update
17831                        	
17832                        		.dbg	line,	"main.c", 235; }
17833                        	
17834                        		.dbg	line,	"main.c", 237; else if(shop_counter == 120)
17835                        		__bra		.LL772
         08:DF59  80 22      			bra	.LL772
17836    08:DF5B             	.LL771:
17837                        		__ld.umq	_shop_counter
         08:DF5B  AD D9 23   			lda	_shop_counter
17838                        		__equ_b.uiq	120
         08:DF5E  C9 78      			cmp	#120
         08:DF60  F0 01      			beq	!+
         08:DF62  18         			clc
         08:DF63             	!:
17839                        		__bfalse	.LL773
         08:DF63  90 18      			bcc	.LL773
17840                        	
17841                        		.dbg	line,	"main.c", 238; {
17842                        	
17843                        		.dbg	line,	"main.c", 239; disp_off();
17844                        		__call		_disp_off
         08:DF65  20 29 E4   			call	_disp_off
17845                        	
17846                        		.dbg	line,	"main.c", 241; // REINIT PLAYER //
17847                        	
17848                        		.dbg	line,	"main.c", 242; init_PLAYER();
17849                        		__call		_init_PLAYER
         08:DF68  20 55 FE   			call	_init_PLAYER
17850                        	
17851                        		.dbg	line,	"main.c", 244; shop_phase = SHOP_PHASE_EXIT;
17852                        		__st.umiq	2, _shop_phase
         08:DF6B  A9 02      			lda.l	#2
         08:DF6D  8D D8 23   			sta	_shop_phase
17853                        	
17854                        		.dbg	line,	"main.c", 245; respawn = RESPAWN_SHOP;
17855                        		__st.umiq	2, _respawn
         08:DF70  A9 02      			lda.l	#2
         08:DF72  8D 16 23   			sta	_respawn
17856                        	
17857                        		.dbg	line,	"main.c", 246; sequence_loaded = FALSE;
17858                        		__st.umiq	0, _sequence_loaded
         08:DF75  9C 14 23   			stz	_sequence_loaded
17859                        	
17860                        		.dbg	line,	"main.c", 247; sequence_id = SEQUENCE_GAME;
17861                        		__st.umiq	2, _sequence_id
         08:DF78  A9 02      			lda.l	#2
         08:DF7A  8D 13 23   			sta	_sequence_id
17862                        	
17863                        		.dbg	line,	"main.c", 248; }
17864                        	
17865                        		.dbg	line,	"main.c", 250; shop_counter++;
17866    08:DF7D             	.LL773:
17867    08:DF7D             	.LL772:
17868                        		__inc.umq	_shop_counter
         08:DF7D  EE D9 23   			inc	_shop_counter
17869                        	
17870                        		.dbg	line,	"main.c", 252; break;
17871                        		__bra		.LL764
         08:DF80  4C EC DD   			bra	.LL764
17872                        	
17873                        		.dbg	line,	"main.c", 253; }
17874    08:DF83             	.LL763:
17875                        		__switch_r.ur	0, 2
         08:DF83  C9 03      			cmp	#(2 - 0) + 1
         08:DF85  90 02      			bcc	!found+
         08:DF87  A9 03      	!default:	lda	#(2 - 0) + 1
         08:DF89  0A         	!found:		asl	a
         08:DF8A  AA         			tax
         08:DF8B  7C 8E DF   			jmp	[!table+, x]
17876                        	
17877    08:DF8E  A3 DE      	!table:		dw	.LL765, .LL769, .LL770
         08:DF90  21 DF       
         08:DF92  30 DF       
17878    08:DF94  EC DD      			dw	.LL764
17879    08:DF96             	.LL764	.alias		.LL744
17880                        	
17881                        		.dbg	line,	"main.c", 254; }
17882    08:DF96             	.LL762	.alias		.LL744
17883                        	
17884                        		.dbg	line,	"main.c", 256; break;
17885                        		__bra		.LL744
         08:DF96  4C EC DD   			bra	.LL744
17886                        	
17887                        		.dbg	line,	"main.c", 257; }
17888    08:DF99             	.LL743:
17889                        		__switch_r.ur	0, 4
         08:DF99  C9 05      			cmp	#(4 - 0) + 1
         08:DF9B  90 02      			bcc	!found+
         08:DF9D  A9 05      	!default:	lda	#(4 - 0) + 1
         08:DF9F  0A         	!found:		asl	a
         08:DFA0  AA         			tax
         08:DFA1  7C A4 DF   			jmp	[!table+, x]
17890                        	
17891    08:DFA4  F2 DD      	!table:		dw	.LL745, .LL748, .LL749, .LL759, .LL760
         08:DFA6  10 DE       
         08:DFA8  12 DE       
         08:DFAA  86 DE       
         08:DFAC  89 DE       
17892    08:DFAE  EC DD      			dw	.LL744
17893    08:DFB0             	.LL744	.alias		.LL741
17894                        	
17895                        		.dbg	line,	"main.c", 258; }
17896                        		__bra		.LL741
         08:DFB0  4C EC DD   			bra	.LL741
17897    08:DFB3             	.LL742:
17898                        	
17899                        		.dbg	line,	"main.c", 259; }
17900    08:DFB3             	.LL733:
17901                        		__return	1
         08:DFB3  AA         			tax
         08:DFB4  4C EF FF   			jmp	leave_proc
17902                        		.dbg	clear
17903                        		.endp
17904                        		.pceas
17905                        	
17906                        		.dbg	clear
17907               6000     		.rodata
17908    01:6000             	__const1:
17909    01:6000  53 54 41 52			db	'S','T','A','R','T',' ','G','A'
         01:6004  54 20 47 41 
17910    01:6008  4D 45 00 4C			db	'M','E',$00,'L','I','F','E',$00
         01:600C  49 46 45 00 
17911    01:6010  43 52 45 44			db	'C','R','E','D','I','T','S',$00
         01:6014  49 54 53 00 
17912    01:6018  43 41 50 43			db	'C','A','P','C','O','M',' ','1'
         01:601C  4F 4D 20 31 
17913    01:6020  39 38 37 00			db	'9','8','7',$00,'H','a','l','t'
         01:6024  48 61 6C 74 
17914    01:6028  3A 20 53 47			db	':',' ','S','G','X',' ','h','a'
         01:602C  58 20 68 61 
17915    01:6030  72 64 77 61			db	'r','d','w','a','r','e',' ','n'
         01:6034  72 65 20 6E 
17916    01:6038  6F 74 20 66			db	'o','t',' ','f','o','u','n','d'
         01:603C  6F 75 6E 64 
17917    01:6040  00 4D 61 79			db	$00,'M','a','y','b','e',',',' '
         01:6044  62 65 2C 20 
17918    01:6048  69 20 63 61			db	'i',' ','c','a','n',' ','s','e'
         01:604C  6E 20 73 65 
17919    01:6050  6C 6C 20 79			db	'l','l',' ','y','o','u',$00,'s'
         01:6054  6F 75 00 73 
17920    01:6058  6F 6D 65 74			db	'o','m','e','t','h','i','n','g'
         01:605C  68 69 6E 67 
17921    01:6060  2E 2E 2E 00			db	'.','.','.',$00,' ',' ',' ',' '
         01:6064  20 20 20 20 
17922    01:6068  20 20 20 20			db	' ',' ',' ',' ',' ',' ',' ',' '
         01:606C  20 20 20 20 
17923    01:6070  20 20 20 20			db	' ',' ',' ',' ',' ',' ',' ',' '
         01:6074  20 20 20 20 
17924    01:6078  20 00 20 20			db	' ',$00,' ',' ',' ',' ',' ',' '
         01:607C  20 20 20 20 
17925    01:6080  20 20 20 20			db	' ',' ',' ',' ',' ',' ',$00,'G'
         01:6084  20 20 00 47 
17926    01:6088  4F 4F 44 20			db	'O','O','D',' ','L','U','C','K'
         01:608C  4C 55 43 4B 
17927    01:6090  21 00      			db	'!',$00
17928    01:6092             	_TABLE_NPC_TYPE_LV1:
17929    01:6092  01         			db	1
17930    01:6093  00         			db	0
17931    01:6094             	_TABLE_NPC_X_POS_REF_LV1:
17932    01:6094  90 03      			dw	912
17933    01:6096  D0 04      			dw	1232
17934    01:6098             	_TABLE_NPC_Y_POS_REF_LV1:
17935    01:6098  40 02      			dw	576
17936    01:609A  90 01      			dw	400
17937    01:609C             	_TABLE_OBJECT_TYPE_LV1:
17938    01:609C  00         			db	0
17939    01:609D  01         			db	1
17940    01:609E  01         			db	1
17941    01:609F  01         			db	1
17942    01:60A0  01         			db	1
17943    01:60A1  01         			db	1
17944    01:60A2  01         			db	1
17945    01:60A3  02         			db	2
17946    01:60A4  01         			db	1
17947    01:60A5  01         			db	1
17948    01:60A6  01         			db	1
17949    01:60A7  01         			db	1
17950    01:60A8  01         			db	1
17951    01:60A9  01         			db	1
17952    01:60AA  01         			db	1
17953    01:60AB  01         			db	1
17954    01:60AC  01         			db	1
17955    01:60AD  01         			db	1
17956    01:60AE  01         			db	1
17957    01:60AF  01         			db	1
17958    01:60B0  01         			db	1
17959    01:60B1  01         			db	1
17960    01:60B2  01         			db	1
17961    01:60B3             	_TABLE_OBJECT_X_POS_REF_LV1:
17962    01:60B3  90 06      			dw	1680
17963    01:60B5  00 05      			dw	1280
17964    01:60B7  C0 05      			dw	1472
17965    01:60B9  A0 05      			dw	1440
17966    01:60BB  90 04      			dw	1168
17967    01:60BD  B0 04      			dw	1200
17968    01:60BF  C0 03      			dw	960
17969    01:60C1  D8 03      			dw	984
17970    01:60C3  50 05      			dw	1360
17971    01:60C5  70 05      			dw	1392
17972    01:60C7  10 06      			dw	1552
17973    01:60C9  90 06      			dw	1680
17974    01:60CB  B0 06      			dw	1712
17975    01:60CD  D0 06      			dw	1744
17976    01:60CF  E0 04      			dw	1248
17977    01:60D1  00 05      			dw	1280
17978    01:60D3  90 04      			dw	1168
17979    01:60D5  10 04      			dw	1040
17980    01:60D7  80 02      			dw	640
17981    01:60D9  A0 02      			dw	672
17982    01:60DB  50 01      			dw	336
17983    01:60DD  70 01      			dw	368
17984    01:60DF  A0 01      			dw	416
17985    01:60E1             	_TABLE_OBJECT_Y_POS_REF_LV1:
17986    01:60E1  80 01      			dw	384
17987    01:60E3  A0 01      			dw	416
17988    01:60E5  E0 01      			dw	480
17989    01:60E7  F0 01      			dw	496
17990    01:60E9  30 02      			dw	560
17991    01:60EB  30 02      			dw	560
17992    01:60ED  50 02      			dw	592
17993    01:60EF  50 02      			dw	592
17994    01:60F1  50 02      			dw	592
17995    01:60F3  50 02      			dw	592
17996    01:60F5  C0 02      			dw	704
17997    01:60F7  D0 02      			dw	720
17998    01:60F9  D0 02      			dw	720
17999    01:60FB  D0 02      			dw	720
18000    01:60FD  E0 02      			dw	736
18001    01:60FF  E0 02      			dw	736
18002    01:6101  F0 02      			dw	752
18003    01:6103  50 03      			dw	848
18004    01:6105  70 03      			dw	880
18005    01:6107  70 03      			dw	880
18006    01:6109  80 03      			dw	896
18007    01:610B  80 03      			dw	896
18008    01:610D  80 03      			dw	896
18009    01:610F             	_TABLE_CHEST_X_POS_REF_LV1:
18010    01:610F  30 04      			dw	1072
18011    01:6111  30 03      			dw	816
18012    01:6113             	_TABLE_CHEST_Y_POS_REF_LV1:
18013    01:6113  40 03      			dw	832
18014    01:6115  50 03      			dw	848
18015    01:6117             	_TABLE_PLAYER_TILES_ADR:
18016    01:6117  60 7A      			dw	_tiles_SPR_PLAYER_ARMOR
18017    01:6119  60 6C      			dw	_tiles_SPR_PLAYER_NAKED
18018    01:611B             	_TABLE_PLAYER_TILES_BANK:
18019    01:611B  0F         			db	^_tiles_SPR_PLAYER_ARMOR
18020    01:611C  11         			db	^_tiles_SPR_PLAYER_NAKED
18021    01:611D             	_TABLE_PLAYER_JUMP_V:
18022    01:611D  FC         			db	-4
18023    01:611E  FB         			db	-5
18024    01:611F  F6         			db	-10
18025    01:6120  FC         			db	-4
18026    01:6121  FC         			db	-4
18027    01:6122  F9         			db	-7
18028    01:6123  FA         			db	-6
18029    01:6124  FD         			db	-3
18030    01:6125  FB         			db	-5
18031    01:6126  FE         			db	-2
18032    01:6127  FC         			db	-4
18033    01:6128  FF         			db	-1
18034    01:6129  FF         			db	-1
18035    01:612A  FF         			db	-1
18036    01:612B  FF         			db	-1
18037    01:612C  00         			db	0
18038    01:612D  00         			db	0
18039    01:612E  00         			db	0
18040    01:612F  00         			db	0
18041    01:6130  01         			db	1
18042    01:6131  01         			db	1
18043    01:6132  01         			db	1
18044    01:6133  01         			db	1
18045    01:6134  04         			db	4
18046    01:6135  02         			db	2
18047    01:6136  05         			db	5
18048    01:6137  03         			db	3
18049    01:6138  06         			db	6
18050    01:6139  07         			db	7
18051    01:613A  04         			db	4
18052    01:613B  04         			db	4
18053    01:613C  0A         			db	10
18054    01:613D  04         			db	4
18055    01:613E  04         			db	4
18056    01:613F  05         			db	5
18057    01:6140             	_TABLE_PLAYER_FALL:
18058    01:6140  00         			db	0
18059    01:6141  00         			db	0
18060    01:6142  00         			db	0
18061    01:6143  00         			db	0
18062    01:6144  01         			db	1
18063    01:6145  01         			db	1
18064    01:6146  01         			db	1
18065    01:6147  01         			db	1
18066    01:6148  02         			db	2
18067    01:6149  02         			db	2
18068    01:614A  02         			db	2
18069    01:614B  02         			db	2
18070    01:614C  03         			db	3
18071    01:614D  03         			db	3
18072    01:614E  03         			db	3
18073    01:614F  04         			db	4
18074    01:6150  04         			db	4
18075    01:6151  04         			db	4
18076    01:6152  04         			db	4
18077    01:6153  04         			db	4
18078    01:6154  05         			db	5
18079    01:6155             	_TABLE_PLAYER_JUMP_LADDER:
18080    01:6155  FC         			db	-4
18081    01:6156  FC         			db	-4
18082    01:6157  FD         			db	-3
18083    01:6158  FD         			db	-3
18084    01:6159  FD         			db	-3
18085    01:615A  FE         			db	-2
18086    01:615B  FE         			db	-2
18087    01:615C  FE         			db	-2
18088    01:615D  FF         			db	-1
18089    01:615E  FF         			db	-1
18090    01:615F  FF         			db	-1
18091    01:6160  FF         			db	-1
18092    01:6161  FF         			db	-1
18093    01:6162  00         			db	0
18094    01:6163  00         			db	0
18095    01:6164  00         			db	0
18096    01:6165  00         			db	0
18097    01:6166  01         			db	1
18098    01:6167  01         			db	1
18099    01:6168  01         			db	1
18100    01:6169  01         			db	1
18101    01:616A  01         			db	1
18102    01:616B  02         			db	2
18103    01:616C  02         			db	2
18104    01:616D  02         			db	2
18105    01:616E  03         			db	3
18106    01:616F  03         			db	3
18107    01:6170  03         			db	3
18108    01:6171  04         			db	4
18109    01:6172  04         			db	4
18110    01:6173             	_TABLE_WEAPON_TILES_ADR:
18111    01:6173  E0 66      			dw	_tiles_SPR_WEAPON_0
18112    01:6175  60 69      			dw	_tiles_SPR_WEAPON_1
18113    01:6177  E0 6B      			dw	_tiles_SPR_WEAPON_2
18114    01:6179  60 6E      			dw	_tiles_SPR_WEAPON_3
18115    01:617B  E0 70      			dw	_tiles_SPR_WEAPON_4
18116    01:617D             	_TABLE_WEAPON_TILES_BANK:
18117    01:617D  13         			db	^_tiles_SPR_WEAPON_0
18118    01:617E  13         			db	^_tiles_SPR_WEAPON_1
18119    01:617F  13         			db	^_tiles_SPR_WEAPON_2
18120    01:6180  13         			db	^_tiles_SPR_WEAPON_3
18121    01:6181  13         			db	^_tiles_SPR_WEAPON_4
18122    01:6182             	_TABLE_SHOP_ITEMS_LV1:
18123    01:6182  00         			db	0
18124    01:6183  01         			db	1
18125    01:6184  02         			db	2
18126    01:6185  03         			db	3
18127    01:6186  04         			db	4
18128    01:6187  05         			db	5
18129    01:6188  06         			db	6
18130    01:6189  07         			db	7
18131    01:618A  08         			db	8
18132    01:618B  09         			db	9
18133    01:618C             	_TABLE_SHOP_PRICES_LV1:
18134    01:618C  64 00      			dw	100
18135    01:618E  E8 03      			dw	1000
18136    01:6190  60 09      			dw	2400
18137    01:6192  80 25      			dw	9600
18138    01:6194  1E 00      			dw	30
18139    01:6196  50 00      			dw	80
18140    01:6198  2C 01      			dw	300
18141    01:619A  20 03      			dw	800
18142    01:619C  40 06      			dw	1600
18143    01:619E  96 00      			dw	150
18144    01:61A0             	_TABLE_SHOP_ITEMS_TILES_ADR:
18145    01:61A0  E0 70      			dw	_tiles_ITEM_WEAPON_2
18146    01:61A2  60 71      			dw	_tiles_ITEM_WEAPON_3
18147    01:61A4  E0 71      			dw	_tiles_ITEM_WEAPON_4
18148    01:61A6  60 72      			dw	_tiles_ITEM_WEAPON_5
18149    01:61A8  E0 72      			dw	_tiles_ITEM_KEY
18150    01:61AA  60 73      			dw	_tiles_ITEM_ARMOR_2
18151    01:61AC  E0 73      			dw	_tiles_ITEM_ARMOR_3
18152    01:61AE  60 74      			dw	_tiles_ITEM_ARMOR_4
18153    01:61B0  E0 74      			dw	_tiles_ITEM_ARMOR_5
18154    01:61B2  60 75      			dw	_tiles_ITEM_POTION
18155    01:61B4             	_TABLE_SHOP_ITEMS_TILES_BANK:
18156    01:61B4  0F         			db	^_tiles_ITEM_WEAPON_2
18157    01:61B5  0F         			db	^_tiles_ITEM_WEAPON_3
18158    01:61B6  0F         			db	^_tiles_ITEM_WEAPON_4
18159    01:61B7  0F         			db	^_tiles_ITEM_WEAPON_5
18160    01:61B8  0F         			db	^_tiles_ITEM_KEY
18161    01:61B9  0F         			db	^_tiles_ITEM_ARMOR_2
18162    01:61BA  0F         			db	^_tiles_ITEM_ARMOR_3
18163    01:61BB  0F         			db	^_tiles_ITEM_ARMOR_4
18164    01:61BC  0F         			db	^_tiles_ITEM_ARMOR_5
18165    01:61BD  0F         			db	^_tiles_ITEM_POTION
18166    01:61BE             	_TABLE_CURSOR_POS_X:
18167    01:61BE  18         			db	24
18168    01:61BF  38         			db	56
18169    01:61C0  60         			db	96
18170    01:61C1  88         			db	136
18171    01:61C2  B0         			db	176
18172    01:61C3  18         			db	24
18173    01:61C4  38         			db	56
18174    01:61C5  60         			db	96
18175    01:61C6  88         			db	136
18176    01:61C7  B0         			db	176
18177    01:61C8  D4         			db	212
18178                        	
18179               2313     		.bss
18180    F8:2313             	_sequence_id:
18181    F8:2313             			ds	1
18182    F8:2314             	_sequence_loaded:
18183    F8:2314             			ds	1
18184    F8:2315             	_level_id:
18185    F8:2315             			ds	1
18186    F8:2316             	_respawn:
18187    F8:2316             			ds	1
18188    F8:2317             	_player_id:
18189    F8:2317             			ds	1
18190    F8:2318             	_player_state:
18191    F8:2318             			ds	1
18192    F8:2319             	_player_axis:
18193    F8:2319             			ds	1
18194    F8:231A             	_player_previous_axis:
18195    F8:231A             			ds	1
18196    F8:231B             	_player_counter_anim:
18197    F8:231B             			ds	1
18198    F8:231C             	_player_index_jump:
18199    F8:231C             			ds	1
18200    F8:231D             	_player_index_fall:
18201    F8:231D             			ds	1
18202    F8:231E             	_player_counter_attack:
18203    F8:231E             			ds	1
18204    F8:231F             	_player_naked:
18205    F8:231F             			ds	1
18206    F8:2320             	_player_attack:
18207    F8:2320             			ds	1
18208    F8:2321             	_jump_ladder:
18209    F8:2321             			ds	1
18210    F8:2322             	_jump_max_index:
18211    F8:2322             			ds	1
18212    F8:2323             	_fall_ladder:
18213    F8:2323             			ds	1
18214    F8:2324             	_hit_wall:
18215    F8:2324             			ds	1
18216    F8:2325             	_chain_id:
18217    F8:2325             			ds	1
18218    F8:2326             	_weapon_id:
18219    F8:2326             			ds	1
18220    F8:2327             	_armor_level:
18221    F8:2327             			ds	1
18222    F8:2328             	_weapon_level:
18223    F8:2328             			ds	1
18224    F8:2329             	_list_chain_active:
18225    F8:2329             			ds	3
18226    F8:232C             	_life_amount:
18227    F8:232C             			ds	1
18228    F8:232D             	_credits_amount:
18229    F8:232D             			ds	1
18230    F8:232E             	_key_amount:
18231    F8:232E             			ds	1
18232    F8:232F             	_potion_amount:
18233    F8:232F             			ds	1
18234    F8:2330             	_minutes:
18235    F8:2330             			ds	1
18236    F8:2331             	_seconds:
18237    F8:2331             			ds	1
18238    F8:2332             	_time_counter:
18239    F8:2332             			ds	1
18240    F8:2333             	_minutes_backup:
18241    F8:2333             			ds	1
18242    F8:2334             	_seconds_backup:
18243    F8:2334             			ds	1
18244    F8:2335             	_object_start_index:
18245    F8:2335             			ds	1
18246    F8:2336             	_level_object_number:
18247    F8:2336             			ds	1
18248    F8:2337             	_onscreen_object_number:
18249    F8:2337             			ds	1
18250    F8:2338             	_list_object_type:
18251    F8:2338             			ds	25
18252    F8:2351             	_list_object_state:
18253    F8:2351             			ds	25
18254    F8:236A             	_list_object_energy:
18255    F8:236A             			ds	25
18256    F8:2383             	_list_reward_type:
18257    F8:2383             			ds	25
18258    F8:239C             	_list_onscreen_object:
18259    F8:239C             			ds	8
18260    F8:23A4             	_chest_start_index:
18261    F8:23A4             			ds	1
18262    F8:23A5             	_level_chest_number:
18263    F8:23A5             			ds	1
18264    F8:23A6             	_onscreen_chest_number:
18265    F8:23A6             			ds	1
18266    F8:23A7             	_list_chest_state:
18267    F8:23A7             			ds	8
18268    F8:23AF             	_list_onscreen_chest:
18269    F8:23AF             			ds	8
18270    F8:23B7             	_npc_start_index:
18271    F8:23B7             			ds	1
18272    F8:23B8             	_level_npc_number:
18273    F8:23B8             			ds	1
18274    F8:23B9             	_onscreen_npc_number:
18275    F8:23B9             			ds	1
18276    F8:23BA             	_list_npc_type:
18277    F8:23BA             			ds	9
18278    F8:23C3             	_list_npc_state:
18279    F8:23C3             			ds	9
18280    F8:23CC             	_list_onscreen_npc:
18281    F8:23CC             			ds	9
18282    F8:23D5             	_index_x:
18283    F8:23D5             			ds	1
18284    F8:23D6             	_index_y:
18285    F8:23D6             			ds	1
18286    F8:23D7             	_item_index:
18287    F8:23D7             			ds	1
18288    F8:23D8             	_shop_phase:
18289    F8:23D8             			ds	1
18290    F8:23D9             	_shop_counter:
18291    F8:23D9             			ds	1
18292    F8:23DA             	_tilemap_mask:
18293    F8:23DA             			ds	256
18294    F8:24DA             	_player_pos_x:
18295    F8:24DA             			ds	2
18296    F8:24DC             	_player_pos_y:
18297    F8:24DC             			ds	2
18298    F8:24DE             	_camera_max_y_position:
18299    F8:24DE             			ds	2
18300    F8:24E0             	_camera_pos_x_backup:
18301    F8:24E0             			ds	2
18302    F8:24E2             	_camera_pos_y_backup:
18303    F8:24E2             			ds	2
18304    F8:24E4             	_list_object_x_pos:
18305    F8:24E4             			ds	50
18306    F8:2516             	_list_object_y_pos:
18307    F8:2516             			ds	50
18308    F8:2548             	_list_object_x_pos_ref:
18309    F8:2548             			ds	50
18310    F8:257A             	_list_object_y_pos_ref:
18311    F8:257A             			ds	50
18312    F8:25AC             	_list_chest_x_pos:
18313    F8:25AC             			ds	16
18314    F8:25BC             	_list_chest_y_pos:
18315    F8:25BC             			ds	16
18316    F8:25CC             	_list_chest_x_pos_ref:
18317    F8:25CC             			ds	16
18318    F8:25DC             	_list_chest_y_pos_ref:
18319    F8:25DC             			ds	16
18320    F8:25EC             	_list_npc_x_pos:
18321    F8:25EC             			ds	18
18322    F8:25FE             	_list_npc_y_pos:
18323    F8:25FE             			ds	18
18324    F8:2610             	_list_npc_x_pos_ref:
18325    F8:2610             			ds	18
18326    F8:2622             	_list_npc_y_pos_ref:
18327    F8:2622             			ds	18
18328    F8:2634             	_zenny_amount:
18329    F8:2634             			ds	2
18330    F8:2636             	_score:
18331    F8:2636             			ds	2
18332    F8:2638             	_shop_prices:
18333    F8:2638             			ds	20
18334    F8:264C             	_weapon_y_offset:
18335    F8:264C             			ds	1
18336    F8:264D             	_ptr_SHOP_ITEM_PRICES:
18337    F8:264D             			ds	2
18338                        	
18339                        	
18340                        	;0 error(s) in compilation
18341                        	;	literal pool:146
18342                        	;	constant pool:311
18343                        	;	global pool:553
18344                        	;	Macro pool:322
18345    F8:264F             	leaf_loc:
18346    F8:264F             			ds	4
18347    F8:2653             	__hide_LEVEL_SPRITES_end:
18348    F8:2653             	__scroll_object_end:
18349    F8:2653             	__scroll_chest_end:
18350    F8:2653             	__scroll_npc_end:
18351    F8:2653             	__check_TILE_DEPTH_end:
18352    F8:2653             	__check_BG_end:
18353    F8:2653             	__check_NPC_end:
18354    F8:2653             	__recenter_CAMERA_end:
18355    F8:2653             	__joypad_BUTTONS_TITLE_end:
18356    F8:2653             	__init_OBJECT_LV1_end:
18357    F8:2653             	__init_CHEST_LV1_end:
18358    F8:2653             	__init_NPC_LV1_end:
18359                        	
18360    F8:2653             	__bss_init:
18361                        	
18362    F8:2653             	__heap_start:
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-final.asm
    5                        	;
    6                        	; PCEAS auto-includes this file at the end of every pass in HuCC or SDCC.
    7                        	;
    8                        	; Copyright John Brandwood 2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; This is used to select which assembly-language library files to include in
   18                        	; a HuCC project, using labels defined in the compiler's header files.
   19                        	;
   20                        	; ***************************************************************************
   21                        	; ***************************************************************************
   22                        	
   23                        			; Allow projects to customize what is included at the end
   24                        			; of a pass without replacing the entire "hucc-final.asm".
   25                        	
   26               E309     			.code
   27               0000     			.bank	CORE_BANK
   28               E309     			.page	CORE_PAGE
   29                        	
                             #[3]   "..\..\..\include\hucc\hucc-final-extra.asm"
   30                        			include	"hucc-final-extra.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-final-extra.asm
    5                        	;
    6                        	; hucc-final.asm includes this file at the end of every pass in HuCC or SDCC.
    7                        	;
    8                        	; Copyright John Brandwood 2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; This is used to select which assembly-language library files to include in
   18                        	; a HuCC project, using labels defined in the compiler's header files.
   19                        	;
   20                        	; ***************************************************************************
   21                        	; ***************************************************************************
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   31                        	
   32                        			; Libraries required for basic functionality.
   33                        	
   34               E309     			.code
   35               0000     			.bank	CORE_BANK
   36               E309     			.page	CORE_PAGE
   37                        	
                             #[3]   "..\..\..\include\hucc\common.asm"
   38                        			include	"common.asm"		; Common helpers.
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; common.asm
    5                        	;
    6                        	; Small, generic, PCE subroutines that are commonly useful when developing.
    7                        	;
    8                        	; These should be located in permanently-accessible memory!
    9                        	;
   10                        	; Copyright John Brandwood 2021-2024.
   11                        	;
   12                        	; Distributed under the Boost Software License, Version 1.0.
   13                        	; (See accompanying file LICENSE_1_0.txt or copy at
   14                        	;  http://www.boost.org/LICENSE_1_0.txt)
   15                        	;
   16                        	; ***************************************************************************
   17                        	; ***************************************************************************
   18                        	
   19                        	
   20                        	
   21                        	; ***************************************************************************
   22                        	; ***************************************************************************
   23                        	;
   24                        	; Wait for the next VBLANK IRQ.
   25                        	;
   26                        	
   27    00:E309  AD 41 22   	wait_vsync:	lda	irq_cnt			; System Card variable, changed
   28    00:E30C  CD 41 22   	.loop:		cmp	irq_cnt			; every VBLANK interrupt.
   29    00:E30F  F0 FB      			beq	.loop
   30               0001     		.ifdef	HUCC
   31    00:E311  8D EB 22   			sta	old_cnt			; Remember the frame count.
   32                        		.endif
   33    00:E314  60         			rts
   34                        	
   35                        	
   36                        	
   37                        	; ***************************************************************************
   38                        	; ***************************************************************************
   39                        	;
   40                        	; Delay for the next Y VBLANK IRQs.
   41                        	;
   42                        	
   43               0001     		.ifdef	HUCC
   44    00:E315             	_vsync		.alias	wait_vsync
   45                        	
   46    00:E315  AD 41 22   	_vsync.1:	lda	irq_cnt			; HuCC's vsync(n) was defined
   47    00:E318  38         			sec				; as frames from the previous
   48    00:E319  ED EB 22   			sbc	old_cnt			; vsync() call, 1 to 255.
   49    00:E31C  38         			sec
   50    00:E31D  E5 F8      			sbc	<_al
   51    00:E31F  90 02      			bcc	!+
   52    00:E321  A9 FF      			lda	#$FF
   53    00:E323  49 FF      	!:		eor	#$FF
   54    00:E325  1A         			inc	a
   55    00:E326  A8         			tay
   56                        		.endif
   57                        	
   58    00:E327  44 E0      	wait_nvsync:	bsr	wait_vsync		; # of VBLANK IRQs to wait in
   59    00:E329  88         			dey				; the Y register.
   60    00:E32A  D0 FB      			bne	wait_nvsync
   61    00:E32C  60         			rts
   62                        	
   63                        	
   64                        	
   65               0000     		.ifndef	HUCC
  101                        		.endif
  102                        	
  103                        	
  104                        	
  105                        	; ***************************************************************************
  106                        	; ***************************************************************************
  107                        	;
  108                        	; Map the _bp data far-pointer into MPR3 (& MPR4).
  109                        	;
  110                        	; Because the 16KB RAM region at $2000-$5FFF is composed of two separate
  111                        	; banks, with the 2nd bank having no specific relation to the 1st, there
  112                        	; is no way to deal with a bank-increment, so do not map that region.
  113                        	;
  114                        	; N.B. Library code relies on this preserving X and V!
  115                        	;
  116                        	
  117    00:E32D  98         	map_bp_to_mpr3:	tya				; Put bank into MPR3.
  118    00:E32E  F0 0A      			beq	!+
  119    00:E330  53 08      			tam3
  120    00:E332  A5 ED      			lda.h	<_bp			; Do not remap a ptr to RAM,
  121    00:E334  29 1F      			and	#$1F			; Remap ptr to MPR3.
  122    00:E336  09 60      			ora	#$60
  123    00:E338  85 ED      			sta.h	<_bp
  124    00:E33A  60         	!:		rts
  125                        	
  126    00:E33B  98         	map_bp_to_mpr34:tya				; Put bank into MPR3.
  127    00:E33C  F0 0D      			beq	!+
  128    00:E33E  53 08      			tam3
  129    00:E340  1A         			inc	a			; Put next into MPR4.
  130    00:E341  53 10      			tam4
  131    00:E343  A5 ED      			lda.h	<_bp			; Do not remap a ptr to RAM,
  132    00:E345  29 1F      			and	#$1F			; Remap ptr to MPR3.
  133    00:E347  09 60      			ora	#$60
  134    00:E349  85 ED      			sta.h	<_bp
  135    00:E34B  60         	!:		rts
  136                        	
  137                        	
  138                        	
  139                        	; ***************************************************************************
  140                        	; ***************************************************************************
  141                        	;
  142                        	; Increment the hi-byte of _bp and change TMA3 if necessary.
  143                        	;
  144                        	; N.B. Library code relies on this preserving A,X,Y and V!
  145                        	;
  146                        	
  147    00:E34C  E6 ED      	inc.h_bp_mpr3:	inc.h	<_bp			; Increment hi-byte of _bp.
  148    00:E34E  10 0B      			bpl	!+			; OK if within MPR0-MPR3.
  149    00:E350  48         			pha				; Increment the bank in MPR3,
  150    00:E351  43 08      			tma3				; usually when pointer moves
  151    00:E353  1A         			inc	a			; from $7FFF -> $8000.
  152    00:E354  53 08      			tam3
  153    00:E356  A9 60      			lda	#$60
  154    00:E358  85 ED      			sta.h	<_bp
  155    00:E35A  68         			pla
  156    00:E35B  60         	!:		rts
  157                        	
  158                        	
  159                        	
  160                        	; ***************************************************************************
  161                        	; ***************************************************************************
  162                        	;
  163                        	; Increment the hi-byte of _bp and change TMA3 and TMA4 if necessary.
  164                        	;
  165                        	; N.B. Library code relies on this preserving A,X,Y and V!
  166                        	;
  167                        	
  168    00:E35C  E6 ED      	inc.h_bp_mpr34:	inc.h	<_bp			; Increment hi-byte of _bp.
  169    00:E35E  10 0D      			bpl	!+			; OK if within MPR0-MPR3.
  170    00:E360  48         			pha				; Increment the bank in MPR3,
  171    00:E361  43 10      			tma4				; usually when pointer moves
  172    00:E363  53 08      			tam3				; from $7FFF -> $8000.
  173    00:E365  1A         			inc	a
  174    00:E366  53 10      			tam4
  175    00:E368  A9 60      			lda	#$60
  176    00:E36A  85 ED      			sta.h	<_bp
  177    00:E36C  68         			pla
  178    00:E36D  60         	!:		rts
  179                        	
  180                        	
  181                        	
  182                        	; ***************************************************************************
  183                        	; ***************************************************************************
  184                        	;
  185                        	; Put the _di data pointer into the VDC's MARR or MAWR register.
  186                        	;
  187                        	; N.B. Library code relies on this preserving Y!
  188                        	;
  189                        	
  190               0001     		.if	SUPPORT_SGX
  191    00:E36E  A2 10      	sgx_di_to_marr:	ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  192    00:E370  F0         			db	$F0			; Turn "clx" into a "beq".
  193                        		.endif
  194                        	
  195    00:E371  82         	vdc_di_to_marr:	clx				; Offset to PCE VDC.
  196                        	
  197    00:E372  A9 01      	set_di_to_marr	lda	#VDC_MARR		; Set VDC or SGX destination
  198    00:E374  95 F7      			sta	<vdc_reg, x		; address.
  199    00:E376  9D 00 02   			sta	VDC_AR, x
  200    00:E379  80 09      			bra	!+
  201                        	
  202               0001     		.if	SUPPORT_SGX
  203    00:E37B  A2 10      	sgx_di_to_mawr:	ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  204    00:E37D  F0         			db	$F0			; Turn "clx" into a "beq".
  205                        		.endif
  206                        	
  207    00:E37E  82         	vdc_di_to_mawr:	clx				; Offset to PCE VDC.
  208                        	
  209    00:E37F             	set_di_to_mawr;	lda	#VDC_MAWR		; Set VDC or SGX destination
  210    00:E37F  74 F7      			stz	<vdc_reg, x		; address.
  211    00:E381  9E 00 02   			stz	VDC_AR, x
  212                        	
  213    00:E384  A5 F0      	!:		lda	<_di + 0
  214    00:E386  9D 02 02   			sta	VDC_DL, x
  215    00:E389  A5 F1      			lda	<_di + 1
  216    00:E38B  9D 03 02   			sta	VDC_DH, x
  217                        	
  218    00:E38E  A9 02      			lda	#VDC_VWR		; Select the VRR/VWR data
  219    00:E390  95 F7      			sta	<vdc_reg, x		; register.
  220    00:E392  9D 00 02   			sta	VDC_AR, x
  221    00:E395  60         			rts
  222                        	
  223                        	
  224                        	
  225                        	; ***************************************************************************
  226                        	; ***************************************************************************
  227                        	;
  228                        	; Increment the hi-byte of _di and change TMA4 if necessary.
  229                        	;
  230                        	
  231               0000     		.if	0				; Save memory, for now.
  250                        		.endif
  251                        	
  252                        	
  253                        	
  254                        	; ***************************************************************************
  255                        	; ***************************************************************************
  256                        	;
  257                        	; Far-call a function in another bank.
  258                        	;
  259                        	; This is a potential alternative procedure call trampoline that uses only 10
  260                        	; bytes of common memory per bank of procedures, instead of 10 bytes for each
  261                        	; individual procedure call, BUT it uses the X register as a procedure-index,
  262                        	; and it needs a table of addresses at the end of every procedure bank.
  263                        	;
  264                        	; To use this ...
  265                        	;
  266                        	;  ldx #procedure-index
  267                        	;  jsr far_call_nn
  268                        	;
  269                        	; The called .PROC routine must exit with "jmp leave_proc" and not "rts".
  270                        	;
  271                        	; leave_proc:	pla
  272                        	;		tam6
  273                        	;		tya
  274                        	;		rts
  275                        	;
  276                        	; N.B. This costs 21 cycles vs 18 for the .newproc trampoline code (when you
  277                        	;      exclude preserving YA in zero-page).
  278                        	;
  279                        	; N.B. This was written as an excerise, and definitely not for HuC!
  280                        	;
  281                        	
  282               0000     		.if	0
  295                        		.endif					; 21
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
                             #[3]   "..\..\..\include\hucc\vce.asm"
   39                        			include	"vce.asm"		; Useful VCE routines.
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; vce.asm
    5                        	;
    6                        	; Useful routines for operating the HuC6260 Video Color Encoder
    7                        	;
    8                        	; These should be located in permanently-accessible memory!
    9                        	;
   10                        	; Copyright John Brandwood 2021-2025.
   11                        	;
   12                        	; Distributed under the Boost Software License, Version 1.0.
   13                        	; (See accompanying file LICENSE_1_0.txt or copy at
   14                        	;  http://www.boost.org/LICENSE_1_0.txt)
   15                        	;
   16                        	; ***************************************************************************
   17                        	; ***************************************************************************
   18                        	
   19                        	;
   20                        	; Configure Library ...
   21                        	;
   22                        	
   23               0000     		.ifndef VCE_SPLIT_CROSS
   25                        		.endif
   26                        	
   27                        	
   28                        	
   29                        	; ***************************************************************************
   30                        	; ***************************************************************************
   31                        	;
   32                        	; xfer_palettes - Update the VCE with the queued palettes changes.
   33                        	;
   34                        	; This is normally called in a developer's vsync_hook handler, but it can
   35                        	; be called manually as long as it will not also be called in an interrupt.
   36                        	;
   37                        	; The queued transfers are split into 32-byte chunks so that an HSYNC and/or
   38                        	; TIMER IRQ is not delayed for too long during the VBLANK.
   39                        	;
   40                        	
   41    00:E396  A9 80      	xfer_palettes:	lda	#$80			; Acquire color mutex to avoid
   42    00:E398  0C 53 26   			tsb	color_mutex		; conflict with a delayed VBL.
   43    00:E39B  30 5F      			bmi	.busy
   44                        	
   45    00:E39D  AC 54 26   			ldy	color_queue_r		; Are there any palette xfers
   46    00:E3A0  CC 55 26   			cpy	color_queue_w		; queued up?
   47    00:E3A3  F0 54      			beq	.exit
   48                        	
   49    00:E3A5  08         			php				; Enable interrupts so that an
   50    00:E3A6  58         			cli				; HSYNC or TIMER IRQ can occur.
   51                        	
   52    00:E3A7  43 08      			tma3				; Preserve MPR3 & MPR4 because
   53    00:E3A9  48         			pha				; this normally runs in the
   54    00:E3AA  43 10      			tma4				; VBLANK IRQ.
   55    00:E3AC  48         			pha
   56                        	
   57               0001     		.if	!CDROM
   58    00:E3AD  73 02 E4 86			tii	.tia_func, color_tia, 8 ; Copy TIA to RAM.
         00:E3B1  22 08 00    
   59                        		.endif
   60                        	
   61    00:E3B4  B9 56 26   	.next_item:	lda	color_index, y		; Get the next set of palettes
   62    00:E3B7  0A         			asl	a			; from the queue.
   63    00:E3B8  0A         			asl	a
   64    00:E3B9  0A         			asl	a
   65    00:E3BA  0A         			asl	a
   66    00:E3BB  8D 02 04   			sta	VCE_CTA + 0
   67    00:E3BE  62         			cla
   68    00:E3BF  2A         			rol	a
   69    00:E3C0  8D 03 04   			sta	VCE_CTA + 1
   70                        	
   71    00:E3C3  BE 5E 26   			ldx	color_count,y		; How many palettes to xfer?
   72                        	
   73    00:E3C6  B9 76 26   			lda	color_bank, y		; Map data into MPR3 & MPR4.
   74    00:E3C9  53 08      			tam3
   75    00:E3CB  1A         			inc	a
   76    00:E3CC  53 10      			tam4
   77    00:E3CE  B9 6E 26   			lda	color_addr_h, y
   78    00:E3D1  8D 88 22   			sta	.ram_tia + 2
   79    00:E3D4  B9 66 26   			lda	color_addr_l, y
   80    00:E3D7  8D 87 22   	.palette_loop:	sta	.ram_tia + 1
   81                        	
   82               0000     		.if	CDROM
   84                        		.else
   85    00:E3DA  20 86 22   			jsr	.ram_tia		; Copy 32-bytes to the VCE.
   86                        		.endif
   87                        	
   88    00:E3DD  18         			clc				; Increment the data ptr to
   89    00:E3DE  69 20      			adc	#32			; the next 32-byte palette.
   90    00:E3E0  B0 1B      			bcs	.next_page
   91                        	
   92    00:E3E2  CA         	.next_palette:	dex				; Any palettes left to xfer?
   93    00:E3E3  D0 F2      			bne	.palette_loop
   94                        	
   95    00:E3E5  C8         			iny				; Increment the queue index.
   96    00:E3E6  98         			tya
   97    00:E3E7  29 07      			and	#7
   98    00:E3E9  A8         			tay
   99                        	
  100    00:E3EA  CC 55 26   			cpy	color_queue_w		; Any more items in the queue?
  101    00:E3ED  D0 C5      			bne	.next_item
  102    00:E3EF  8C 54 26   			sty	color_queue_r		; Signal the queue is empty.
  103                        	
  104    00:E3F2  68         			pla				; Restore MPR3 & MPR4.
  105    00:E3F3  53 10      			tam4
  106    00:E3F5  68         			pla
  107    00:E3F6  53 08      			tam3
  108                        	
  109    00:E3F8  28         			plp				; Restore interrupt state.
  110                        	
  111    00:E3F9  9C 53 26   	.exit:		stz	color_mutex		; Release color mutex.
  112                        	
  113    00:E3FC  60         	.busy:		rts
  114                        	
  115    00:E3FD  EE 88 22   	.next_page:	inc	.ram_tia + 2
  116    00:E400  80 E0      			bra	.next_palette
  117                        	
  118               0001     		.if	!CDROM
  119               2286     	.ram_tia	=	color_tia		; Use a TIA in RAM.
  120                        	
  121    00:E402  E3 00 00 04	.tia_func:	tia	0, VCE_CTW, 32
         00:E406  04 20 00    
  122    00:E409  60         			rts
  123                        		.endif	!CDROM
  124                        	
  125               2653     			.bss
  126                        	
  127    F8:2653             	color_mutex:	ds	1			; Mutex for VCE changes.
  128    F8:2654             	color_queue_r:	ds	1			; Ring buffer read index.
  129    F8:2655             	color_queue_w:	ds	1			; Ring buffer write index.
  130    F8:2656             	color_index:	ds	8			; Ring buffer - Palette index.
  131    F8:265E             	color_count:	ds	8			; Ring buffer - Palette count.
  132    F8:2666             	color_addr_l:	ds	8			; Ring buffer - Data Ptr (lo).
  133    F8:266E             	color_addr_h:	ds	8			; Ring buffer - Data Ptr (hi).
  134    F8:2676             	color_bank:	ds	8			; Ring buffer - Data Ptr (bank).
  135                        	
  136               E40A     			.code
  137                        	
  138                        	
  139                        	
  140                        	; ***************************************************************************
  141                        	; ***************************************************************************
  142                        	;
  143                        	; load_palettes - Queue a set of palettes to upload to the VCE next VBLANK.
  144                        	;
  145                        	; Args: _al = Palette index (0..15 for BG, 16..31 for SPR).
  146                        	; Args: _ah = Palette count (1..32).
  147                        	; Args: _bp = Pointer to palette data.
  148                        	; Args:   Y = Bank to map into MPR3 & MPR4, or zero to leave unchanged.
  149                        	;
  150                        	; N.B. Y==0 is only useful if the palette data is permanently mapped!
  151                        	;
  152                        	
  153                        	load_palettes	.proc
  179                        			.endp
  180                        	
  181                        	
  182                        	
  183                        	; ***************************************************************************
  184                        	; ***************************************************************************
  185                        	;
  186                        	; clear_vce - Clear all 512 of the VCE's palette entries.
  187                        	;
  188                        	
  189    18:D3E9             	clear_vce	.proc
  190                        	
  191    18:D3E9  08         			php				; Disable interrupts to avoid
  192    18:D3EA  78         			sei				; VBLANK palette upload.
  193    18:D3EB  C2         			cly
  194    18:D3EC  9C 02 04   			stz	VCE_CTA+0		; Set VCE write address.
  195    18:D3EF  9C 03 04   			stz	VCE_CTA+1
  196    18:D3F2  9C 04 04   	.loop:		stz	VCE_CTW+0		; Set lo-byte of color.
  197    18:D3F5  9C 05 04   			stz	VCE_CTW+1		; Write 1 color value.
  198    18:D3F8  9C 04 04   			stz	VCE_CTW+0		; Set lo-byte of color.
  199    18:D3FB  9C 05 04   			stz	VCE_CTW+1		; Write 1 color value.
  200    18:D3FE  88         			dey
  201    18:D3FF  D0 F1      			bne	.loop
  202    18:D401  28         			plp
  203                        	
  204                        			leave				; All done, phew!
         18:D402  4C EF FF   			jmp	leave_proc
  205                        	
  206                        			.endp
  207                        	
  208               0001     		.ifdef	HUCC
  209    00:E40A             			.alias	_clear_palette		= clear_vce
  210                        		.endif
  211                        	
  212                        	
  213                        	
  214                        	; ***************************************************************************
  215                        	; ***************************************************************************
  216                        	;
  217                        	; read_palettes - Read palettes from the VCE into a buffer in RAM.
  218                        	;
  219                        	; Args: _al = Palette index (0..15 for BG, 16..31 for SPR).
  220                        	; Args: _ah = Palette count (1..32).
  221                        	; Args: _di = Pointer to palette data destination in RAM.
  222                        	;
  223                        	; The transfer is split into 32-byte chunks so that an HSYNC and/or TIMER
  224                        	; IRQ is not delayed for too long while executing.
  225                        	;
  226                        	
  227                        	read_palettes	.proc
  281                        			.endp
  282                        	
  283               0001     		.ifdef	HUCC
  284    00:E40A             			.alias	_read_palette.3		= read_palettes
  285                        		.endif
  286                        	
  287                        	
  288                        	
  289                        	vce_fade_funcs	.procgroup
  516                        			.endprocgroup
  517                        	
  518                        	
  519                        	
  520                        	; ***************************************************************************
  521                        	; ***************************************************************************
  522                        	;
  523                        	; cross_fade_to - Cross fade a palette in RAM towards a reference palette.
  524                        	;
  525                        	; Args: _al = Number of colors (1..256).
  526                        	; Args: _di = Pointer to faded palette destination in RAM.
  527                        	; Args: _bp = Pointer to reference palette data.
  528                        	; Args:   Y = Bank to map into MPR3 & MPR4, or zero to leave unchanged.
  529                        	;
  530                        	; N.B. Y==0 is only useful if the reference palette data is already mapped!
  531                        	;
  532                        	; N.B. This only updates the palette in RAM by 1 RGB step, so it will need
  533                        	;      to be called 7 times to guarantee that you've reached the target.
  534                        	;
  535                        	
  536                        	cross_fade_to	.proc
  658                        			.endp
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
                             #[3]   "..\..\..\include\hucc\vdc.asm"
   40                        			include	"vdc.asm"		; Useful VDC routines.
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; vdc.asm
    5                        	;
    6                        	; Useful routines for operating the HuC6270 Video Display Controller.
    7                        	;
    8                        	; These should be located in permanently-accessible memory!
    9                        	;
   10                        	; Copyright John Brandwood 2021-2025.
   11                        	;
   12                        	; Distributed under the Boost Software License, Version 1.0.
   13                        	; (See accompanying file LICENSE_1_0.txt or copy at
   14                        	;  http://www.boost.org/LICENSE_1_0.txt)
   15                        	;
   16                        	; ***************************************************************************
   17                        	; ***************************************************************************
   18                        	
   19                        	;
   20                        	; Include dependancies ...
   21                        	;
   22                        	
   23                        			include "common.asm"		; Common helpers.
   24                        			include "vce.asm"		; Useful VCE routines.
   25                        	
   26                        	;
   27                        	; Choose how much to transfer to VRAM in a single chunk, normally 16-bytes.
   28                        	;
   29                        	; The cycle timings for a TIA-to-VRAM depend upon how the VDC's MWR CPU slots
   30                        	; line up to the CPU's writes, and how long the VDC has to halt the CPU while
   31                        	; it fetches the next scanline's sprite data.
   32                        	;
   33                        	; These cycle timings are for 0 sprites (best) and 16 sprites (worst) ...
   34                        	;
   35                        	; 32-byte TIA takes 270..364 cycles in 5MHz, 242..312 cycles in 7MHz. (8.44 cycles-per-byte best-case at 5MHz.)
   36                        	; 24-byte TIA takes 210..298 cycles in 5MHz, 186..256 cycles in 7MHz. (8.75 cycles-per-byte best-case at 5MHz.)
   37                        	; 16-byte TIA takes 142..234 cycles in 5MHz, 128..200 cycles in 7MHz. (8.88 cycles-per-byte best-case at 5MHz.)
   38                        	;
   39                        	; If a user wishes to be able to put RCR interrupts one-line-after-another,
   40                        	; then it is only safe to use 32-byte chunks if there are no TIMER or IRQ2
   41                        	; interrupts ... which is almost-impossible to rely on in library code!
   42                        	;
   43                        	
   44               0000     		.ifndef	VRAM_XFER_SIZE
   46                        		.endif
   47                        	
   48                        	;
   49                        	; Enable BG & SPR layers, and RCR interrupt.
   50                        	;
   51                        	
   52    00:E40A  A9 04      	set_rcron:	lda	#$04			; Enable RCR interrupt.
   53    00:E40C  80 0A      			bra	!+
   54                        	
   55    00:E40E  A9 80      	set_bgon:	lda	#$80			; Enable BG layer.
   56    00:E410  80 06      			bra	!+
   57                        	
   58    00:E412  A9 40      	set_spron:	lda	#$40			; Enable SPR layer.
   59    00:E414  80 02      			bra	!+
   60                        	
   61    00:E416  A9 C0      	set_dspon:	lda	#$C0			; Enable BG & SPR layers.
   62                        	
   63    00:E418  04 F3      	!:		tsb	<vdc_crl		; These take effect when
   64               0001     		.if	SUPPORT_SGX			; the next VBLANK occurs.
   65    00:E41A  04 03      			tsb	<sgx_crl
   66                        		.endif
   67    00:E41C  60         			rts
   68                        	
   69                        	;
   70                        	; Disable BG & SPR layers, and RCR interrupt.
   71                        	;
   72                        	
   73    00:E41D  A9 04      	set_rcroff:	lda	#$04			; Disable RCR interrupt.
   74    00:E41F  80 0A      			bra	!+
   75                        	
   76    00:E421  A9 80      	set_bgoff:	lda	#$80			; Disable BG layer.
   77    00:E423  80 06      			bra	!+
   78                        	
   79    00:E425  A9 40      	set_sproff:	lda	#$40			; Disable SPR layer.
   80    00:E427  80 02      			bra	!+
   81                        	
   82    00:E429  A9 C0      	set_dspoff:	lda	#$C0			; Disable BG & SPR layers.
   83                        	
   84    00:E42B  14 F3      	!:		trb	<vdc_crl		; These take effect when
   85               0001     		.if	SUPPORT_SGX			; the next VBLANK occurs.
   86    00:E42D  14 03      			trb	<sgx_crl
   87                        		.endif
   88    00:E42F  60         			rts
   89                        	
   90                        	
   91                        	
   92                        	; ***************************************************************************
   93                        	; ***************************************************************************
   94                        	;
   95                        	; Put the _di data pointer into the VDC's MARR or MAWR register.
   96                        	;
   97                        	; N.B. Library code relies on this preserving Y!
   98                        	;
   99                        	; Args: _di + 0 = BAT X coordinate.
  100                        	; Args: _di + 1 = BAT Y coordinate.
  101                        	;
  102                        	; Here because it relies on the "vdc_bat_width" that is defined in this file.
  103                        	;
  104                        	
  105               0001     		.if	SUPPORT_SGX
  106    00:E430  A2 10      	sgx_di_xy_marr:	ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  107    00:E432  F0         			db	$F0			; Turn "clx" into a "beq".
  108                        		.endif
  109                        	
  110    00:E433  82         	vdc_di_xy_marr:	clx				; Offset to PCE VDC.
  111                        	
  112    00:E434  62         	set_di_xy_mawr:	cla
  113    00:E435  3C 7E 26   			bit	vdc_bat_width, x	; Set by set_bat_size().
  114    00:E438  30 08      			bmi	.w128
  115    00:E43A  70 03      			bvs	.w64
  116    00:E43C  46 F1      	.w32:		lsr.h	<_di
  117    00:E43E  6A         			ror	a
  118    00:E43F  46 F1      	.w64:		lsr.h	<_di
  119    00:E441  6A         			ror	a
  120    00:E442  46 F1      	.w128:		lsr.h	<_di
  121    00:E444  6A         			ror	a
  122    00:E445  05 F0      			ora.l	<_di
  123    00:E447  85 F0      			sta.l	<_di
  124    00:E449  4C 7F E3   			jmp	set_di_to_mawr		; In "common.asm".
  125                        	
  126                        	
  127                        	
  128    08:DFB7             	vdc_clear_vram	.procgroup			; These routines share code!
  129                        	
  130                        	; ***************************************************************************
  131                        	; ***************************************************************************
  132                        	;
  133                        	; clear_vram_sgx - Clear all of VRAM in the SGX VDC.
  134                        	; clear_vram_vdc - Clear all of VRAM in the PCE VDC.
  135                        	;
  136                        	; Args: _ax = word value to write to the BAT.
  137                        	; Args: _bl = hi-byte of size of BAT (# of words).
  138                        	;
  139                        	
  140               0001     		.if	SUPPORT_SGX
  141    08:DFB7             	clear_vram_sgx	.proc
  142                        	
  143    08:DFB7  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  144    08:DFB9  F0         			db	$F0			; Turn "clx" into a "beq".
  145                        	
  146    08:DFBA             			.ref	clear_vram_vdc		; Need clear_vram_vdc
  147                        			.endp
  148                        		.endif
  149                        	
  150    08:DFBA             	clear_vram_vdc	.proc
  151                        	
  152    08:DFBA  82         			clx				; Offset to PCE VDC.
  153                        	
  154    08:DFBB  20 B5 FD   	clear_vram_x:	call	clear_bat_x		; Clear the BAT.
  155                        	
  156    08:DFBE  A9 80      			lda	#$80			; Xvert hi-byte of # words
  157    08:DFC0  38         			sec				; in screen to loop count.
  158    08:DFC1  E5 FA      			sbc	<_bl
  159    08:DFC3  4A         			lsr	a
  160                        	
  161                        	;		cly				; Clear the rest of VRAM.
  162    08:DFC4  9E 02 02   			stz	VDC_DL, x
  163    08:DFC7  9E 03 02   	.clr_loop:	stz	VDC_DH, x		; Seperate writes to minimize
  164    08:DFCA  88         			dey				; VDC MWR penalty.
  165    08:DFCB  9E 03 02   			stz	VDC_DH, x
  166    08:DFCE  D0 F7      			bne	.clr_loop
  167    08:DFD0  3A         			dec	a
  168    08:DFD1  D0 F4      			bne	.clr_loop
  169                        	
  170                        			leave				; All done, phew!
         08:DFD3  4C EF FF   			jmp	leave_proc
  171                        	
  172                        			.endp
  173                        	
  174                        	
  175                        	
  176                        	; ***************************************************************************
  177                        	; ***************************************************************************
  178                        	;
  179                        	; clear_bat_sgx - Clear the BAT in the SGX VDC.
  180                        	; clear_bat_vdc - Clear the BAT in the PCE VDC.
  181                        	;
  182                        	; Args: _ax = word value to write to the BAT.
  183                        	; Args: _bl = hi-byte of size of BAT (# of words).
  184                        	;
  185                        	
  186               0001     		.if	SUPPORT_SGX
  187                        	clear_bat_sgx	.proc
  193                        			.endp
  194                        		.endif
  195                        	
  196    08:DFD6             	clear_bat_vdc	.proc
  197                        	
  198    08:DFD6  82         			clx				; Offset to PCE VDC.
  199                        	
  200    08:DFD7             			.ref	clear_bat_x		; Need clear_bat_x
  201                        			.endp
  202                        	
  203    08:DFD7             	clear_bat_x	.proc				; HuCC uses this entry point.
  204                        	
  205    08:DFD7  64 F0      			stz	<_di + 0		; Set VDC or SGX destination
  206    08:DFD9  64 F1      			stz	<_di + 1		; address.
  207    08:DFDB  20 7F E3   			jsr	set_di_to_mawr
  208                        	
  209    08:DFDE  A5 FA      			lda	<_bl			; Xvert hi-byte of # words
  210    08:DFE0  4A         			lsr	a			; in screen to loop count.
  211                        	
  212    08:DFE1  C2         			cly
  213    08:DFE2  48         	.bat_loop:	pha
  214    08:DFE3  A5 F8      			lda	<_ax + 0
  215    08:DFE5  9D 02 02   			sta	VDC_DL, x
  216    08:DFE8  A5 F9      			lda	<_ax + 1
  217    08:DFEA  9D 03 02   	.bat_pair:	sta	VDC_DH, x		; Seperate writes to minimize
  218    08:DFED  88         			dey				; VDC MWR penalty.
  219    08:DFEE  9D 03 02   			sta	VDC_DH, x
  220    08:DFF1  D0 F7      			bne	.bat_pair
  221                        	
  222    08:DFF3  68         			pla
  223    08:DFF4  3A         			dec	a
  224    08:DFF5  D0 EB      			bne	.bat_loop
  225                        	
  226                        			leave
         08:DFF7  4C EF FF   			jmp	leave_proc
  227                        	
  228                        			.endp
  229                        	
  230                        			.endprocgroup
  231                        	
  232                        	;
  233                        	;
  234                        	;
  235                        	
  236    18:CA2F             	vdc_set_mode	.procgroup			; These routines share code!
  237                        	
  238                        	; ***************************************************************************
  239                        	; ***************************************************************************
  240                        	;
  241                        	; set_mode_sgx - Set video hardware registers from a data table.
  242                        	; set_mode_vdc - Set video hardware registers from a data table.
  243                        	;
  244                        	; Args: _bp, Y = _farptr to data table mapped into MPR3 & MPR4.
  245                        	;
  246                        	
  247               0001     		.if	SUPPORT_SGX
  248    18:CA2F             	set_mode_sgx	.proc
  249                        	
  250    18:CA2F  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  251    18:CA31  F0         			db	$F0			; Turn "clx" into a "beq".
  252                        	
  253                        			.endp
  254                        		.endif
  255                        	
  256    18:CA32             	set_mode_vdc	.proc
  257                        	
  258    18:CA32  82         			clx				; Offset to PCE VDC.
  259                        	
  260    18:CA33  F7 F8      			smb7	<_al			; Signal no set_bat_size() yet.
  261                        	
  262    18:CA35  43 08      			tma3				; Preserve MPR3.
  263    18:CA37  48         			pha
  264    18:CA38  43 10      			tma4				; Preserve MPR4.
  265    18:CA3A  48         			pha
  266                        	
  267    18:CA3B  20 3B E3   			jsr	map_bp_to_mpr34		; Map data to MPR3 & MPR4.
  268                        	
  269    18:CA3E  08         			php				; Disable interrupts.
  270    18:CA3F  78         			sei
  271                        	
  272    18:CA40  C2         			cly				; Table size is < 256 bytes.
  273                        	
  274    18:CA41  B1 EC      	.loop:		lda	[_bp], y		; Get the register #, +ve for
  275    18:CA43  F0 46      			beq	.done			; VDC, -128 for VCE_CR.
  276    18:CA45  10 0C      			bpl	.set_vdc_reg
  277                        	
  278                        			; Set the VCE_CR register.
  279                        	
  280    18:CA47  C8         	.set_vce_cr:	iny
  281                        	
  282    18:CA48  B1 EC      			lda	[_bp], y		; Get lo-byte of register.
  283    18:CA4A  C8         			iny
  284    18:CA4B  8D 44 22   			sta	vce_cr			; No SGX shadow for this!
  285    18:CA4E  8D 00 04   			sta	VCE_CR			; Set the VCE clock speed.
  286    18:CA51  80 EE      			bra	.loop			; Do not set VDC_MWR reg bits!
  287                        	
  288                        			; Set a VDC register.
  289                        	
  290    18:CA53  C8         	.set_vdc_reg:	iny
  291    18:CA54  9D 00 02   			sta	VDC_AR, x		; Set which VDC register.
  292                        	
  293    18:CA57  C9 05      			cmp	#VDC_CR			; CS if VDC_CR or higher.
  294    18:CA59  F0 14      			beq	.skip_cc
  295    18:CA5B  18         			clc				; CC if not VDC_CR.
  296                        	
  297    18:CA5C  49 09      			eor	#VDC_MWR		; Check if this the VDC_MWR
  298    18:CA5E  D0 0F      			bne	.skip_cc		; without changing CC.
  299                        	
  300    18:CA60  B1 EC      			lda	[_bp], y		; Remember the BAT size so that
  301    18:CA62  8D 42 22   			sta	vdc_mwr			; set_bat_size() can be called.
  302    18:CA65  4A         			lsr	a
  303    18:CA66  4A         			lsr	a
  304    18:CA67  4A         			lsr	a
  305    18:CA68  4A         			lsr	a
  306    18:CA69  85 F8      			sta	<_al
  307    18:CA6B  C8         			iny
  308    18:CA6C  C8         			iny
  309    18:CA6D  80 D2      			bra	.loop
  310                        	
  311    18:CA6F  B1 EC      	.skip_cc:	lda	[_bp], y		; Get lo-byte of register.
  312    18:CA71  C8         			iny
  313    18:CA72  90 08      			bcc	.not_vdc_cr
  314                        	
  315               0001     		.if	SUPPORT_SGX
  316    18:CA74  E0 00      			cpx	#0			; Writing to the VDC or SGX?
  317    18:CA76  F0 02      			beq	.save_crl
  318    18:CA78  29 F7      			and	#$F7			; We only need 1 vblank IRQ!
  319                        		.endif
  320                        	
  321    18:CA7A  95 F3      	.save_crl:	sta	<vdc_crl, x		; Save VDC_CR shadow register.
  322                        	
  323    18:CA7C  9D 02 02   	.not_vdc_cr:	sta	VDC_DL, x		; Write to VDC.
  324                        	
  325    18:CA7F  B1 EC      			lda	[_bp], y		; Get hi-byte of register.
  326    18:CA81  C8         			iny
  327    18:CA82  9D 03 02   			sta	VDC_DH, x
  328    18:CA85  90 BA      			bcc	.loop			; Next register, please!
  329                        	
  330    18:CA87  95 F4      			sta	<vdc_crh, x		; Save VDC_CR shadow register.
  331                        	
  332    18:CA89  80 B6      			bra	.loop			; Next register, please!
  333                        	
  334                        			; All registers set!
  335                        	
  336    18:CA8B  A9 02      	.done:		lda	#VDC_VWR		; Leave with VDC_VWR set.
  337    18:CA8D  95 F7      			sta	<vdc_reg, x
  338                        	;		lda	<vdc_reg, x		; Restore previous VDC_AR from
  339    18:CA8F  9D 00 02   			sta	VDC_AR, x		; the shadow variable.
  340                        	
  341    18:CA92  28         			plp				; Restore interrupts.
  342                        	
  343    18:CA93  68         			pla				; Restore MPR4.
  344    18:CA94  53 10      			tam4
  345    18:CA96  68         			pla				; Restore MPR3.
  346    18:CA97  53 08      			tam3
  347                        	
  348    18:CA99  7F F8 07   			bbr7	<_al, set_bat_size	; Update if BAT size changed.
  349                        	
  350                        			leave				; All done, phew!
         18:CA9C  4C EF FF   			jmp	leave_proc
  351                        	
  352    18:CA9F             			.ref	set_bat_vdc
  353                        			.endp
  354                        	
  355                        	
  356                        	
  357                        	; ***************************************************************************
  358                        	; ***************************************************************************
  359                        	;
  360                        	; set_bat_sgx - Change the SGX BAT size and initialize variables based on it.
  361                        	; set_bat_vdc - Change the PCE BAT size and initialize variables based on it.
  362                        	;
  363                        	; Args: _al = new size (0-7).
  364                        	;
  365                        	; (VDC_MWR_32x32  >> 4) or in HuCC, SCR_SIZE_32x32.
  366                        	; (VDC_MWR_32x64  >> 4) or in HuCC, SCR_SIZE_32x64.
  367                        	; (VDC_MWR_64x32  >> 4) or in HuCC, SCR_SIZE_64x32.
  368                        	; (VDC_MWR_64x64  >> 4) or in HuCC, SCR_SIZE_64x64.
  369                        	; (VDC_MWR_128x32 >> 4) or in HuCC, SCR_SIZE_128x32.
  370                        	; (VDC_MWR_128x64 >> 4) or in HuCC, SCR_SIZE_128x64.
  371                        	;
  372                        	
  373               0001     		.if	SUPPORT_SGX
  374    18:CA9F             	set_bat_sgx	.proc
  375                        	
  376    18:CA9F  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  377    18:CAA1  F0         			db	$F0			; Turn "clx" into a "beq".
  378                        	
  379    18:CAA2             			.ref	set_bat_vdc
  380                        			.endp
  381                        		.endif
  382                        	
  383    18:CAA2             	set_bat_vdc	.proc
  384                        	
  385    18:CAA2  82         			clx				; Offset to PCE VDC.
  386                        	
  387    18:CAA3  A5 F8      	set_bat_size:	lda	<_al			; Get BAT size value.
  388    18:CAA5  29 07      			and	#7			; Sanitize screen size value.
  389    18:CAA7  A8         			tay
  390    18:CAA8  0A         			asl	a			; Put it in bits 4..6.
  391    18:CAA9  0A         			asl	a
  392    18:CAAA  0A         			asl	a
  393    18:CAAB  0A         			asl	a
  394    18:CAAC  85 00      			sta	<__temp
  395                        	
  396    18:CAAE  B9 EE CA   			lda	.width, y
  397    18:CAB1  9D 7E 26   			sta	vdc_bat_width, x
  398    18:CAB4  3A         			dec	a
  399    18:CAB5  9D 80 26   			sta	vdc_bat_x_mask, x
  400                        	
  401    18:CAB8  B9 F6 CA   			lda	.height, y
  402    18:CABB  9D 7F 26   			sta	vdc_bat_height, x
  403    18:CABE  3A         			dec	a
  404    18:CABF  9D 81 26   			sta	vdc_bat_y_mask, x
  405                        	
  406    18:CAC2  B9 FE CA   			lda	.limit, y
  407    18:CAC5  9D 82 26   			sta	vdc_bat_limit, x
  408                        	
  409    18:CAC8  B9 06 CB   			lda	.increment, y		; Put the VRAM increment for a
  410    18:CACB  95 F4      			sta	<vdc_crh, x		; line into vdc_crh for later.
  411                        	
  412    18:CACD  08         			php
  413    18:CACE  78         			sei
  414                        	
  415    18:CACF  A9 09      			lda	#VDC_MWR
  416    18:CAD1  9D 00 02   			sta	VDC_AR, x
  417                        	
  418    18:CAD4  AD 42 22   			lda	vdc_mwr			; Get the MWR access width bits.
  419    18:CAD7  29 8F      			and	#%10001111
  420    18:CAD9  05 00      			ora	<__temp
  421               0001     		.if	SUPPORT_SGX
  422    18:CADB  E0 00      			cpx	#PCE_VDC_OFFSET		; This has no SGX shadow!
  423    18:CADD  D0 03      			bne	!+
  424                        		.endif
  425    18:CADF  8D 42 22   			sta	vdc_mwr
  426    18:CAE2  9D 02 02   	!:		sta	VDC_DL, x
  427                        	
  428    18:CAE5  B5 F7      			lda	<vdc_reg, x		; Restore previous VDC_AR from
  429    18:CAE7  9D 00 02   			sta	VDC_AR, x		; the shadow variable.
  430                        	
  431    18:CAEA  28         			plp
  432                        	
  433                        			leave
         18:CAEB  4C EF FF   			jmp	leave_proc
  434                        	
  435    18:CAEE  20 40 80 80	.width:		db	$20,$40,$80,$80,$20,$40,$80,$80
         18:CAF2  20 40 80 80 
  436    18:CAF6  20 20 20 20	.height:	db	$20,$20,$20,$20,$40,$40,$40,$40
         18:CAFA  40 40 40 40 
  437    18:CAFE  03 07 0F 0F	.limit:		db	$03,$07,$0F,$0F,$07,$0F,$1F,$1F
         18:CB02  07 0F 1F 1F 
  438    18:CB06  08 10 18 18	.increment	db	$08,$10,$18,$18,$08,$10,$18,$18
         18:CB0A  08 10 18 18 
  439                        	
  440               267E     			.bss
  441                        	
  442                        	; **************
  443                        	; 16-bytes of VDC BAT information.
  444                        	;
  445                        	; N.B. MUST be 16-bytes before the SGX versions to use PCE_VDC_OFFSET.
  446                        	;
  447                        	; N.B. Declared inside this .proc so that they can be stripped if unused.
  448                        	
  449                        	; Initialized by set_bat_vdc.
  450    F8:267E             	vdc_bat_width:	ds	1	; $20, $40, $80
  451    F8:267F             	vdc_bat_height:	ds	1	; $20, $40
  452    F8:2680             	vdc_bat_x_mask:	ds	1	; $1F, $3F, $7F
  453    F8:2681             	vdc_bat_y_mask:	ds	1	; $1F, $3F
  454    F8:2682             	vdc_bat_limit:	ds	1	; (>$03FF), (>$07FF), (>$0FFF), (>$1FFF)
  455                        	
  456                        	; From blkmap.asm just to avoid wasting .bss space with padding.
  457    F8:2683             	vdc_map_draw_w:	ds	1	; (SCR_WIDTH / 8) + 1
  458    F8:2684             	vdc_map_draw_h:	ds	1	; (SCR_HEIGHT / 8) + 1
  459    F8:2685             	vdc_map_line_w:	ds	1	; Line width of map data in tiles.
  460    F8:2686             	vdc_map_scrn_w:	ds	1	; Line width of map data in screens.
  461    F8:2687             	vdc_map_pxl_x:	ds	2	; Current top-left X in pixels.
  462    F8:2689             	vdc_map_pxl_y:	ds	2	; Current top-left Y in pixels.
  463    F8:268B             	vdc_map_option:	ds	1	; Flags to disable BAT alignment.
  464                        	
  465                        	; From hucc-old-spr.asm just to avoid wasting .bss space with padding.
  466    F8:268C             	spr_max:	ds	1
  467    F8:268D             	spr_clr:	ds	1
  468                        	
  469               0001     		.if	SUPPORT_SGX
  470                        	
  471                        	; **************
  472                        	; 16-bytes of SGX BAT information.
  473                        	;
  474                        	; N.B. MUST be 16-bytes after the VDC versions to use SGX_VDC_OFFSET.
  475                        	;
  476                        	; N.B. Declared inside this .proc so that they can be stripped if unused.
  477                        	
  478                        	; Initialized by set_bat_sgx.
  479    F8:268E             	sgx_bat_width:	ds	1	; $20, $40, $80
  480    F8:268F             	sgx_bat_height:	ds	1	; $20, $40
  481    F8:2690             	sgx_bat_x_mask:	ds	1	; $1F, $3F, $7F
  482    F8:2691             	sgx_bat_y_mask:	ds	1	; $1F, $3F
  483    F8:2692             	sgx_bat_limit:	ds	1	; (>$03FF), (>$07FF), (>$0FFF), (>$1FFF)
  484                        	
  485                        	; From blkmap.asm just to avoid wasting .bss space with padding.
  486    F8:2693             	sgx_map_draw_w:	ds	1	; (SCR_WIDTH / 8) + 1
  487    F8:2694             	sgx_map_draw_h:	ds	1	; (SCR_HEIGHT / 8) + 1
  488    F8:2695             	sgx_map_line_w:	ds	1	; Line width of map data in tiles.
  489    F8:2696             	sgx_map_scrn_w:	ds	1	; Line width of map data in screens.
  490    F8:2697             	sgx_map_pxl_x:	ds	2	; Current top-left X in pixels.
  491    F8:2699             	sgx_map_pxl_y:	ds	2	; Current top-left Y in pixels.
  492    F8:269B             	sgx_map_option:	ds	1	; Flags to disable BAT alignment.
  493                        	
  494                        	; From hucc-old-spr.asm just to avoid wasting .bss space with padding.
  495    F8:269C             	sgx_spr_max:	ds	1
  496    F8:269D             	sgx_spr_clr:	ds	1
  497                        	
  498                        		.endif
  499                        	
  500               CB0E     			.code
  501                        	
  502                        			.endp
  503                        	
  504                        			.endprocgroup
  505                        	
  506                        	
  507                        	
  508                        	; ***************************************************************************
  509                        	; ***************************************************************************
  510                        	;
  511                        	; sgx_detect - Detect whether we're running on a SuperGrafx (and init VPC).
  512                        	;
  513                        	; Returns: X,C-flag, and "sgx_detected" = NZ, CS if detected.
  514                        	;
  515                        	; ***************************************************************************
  516                        	;
  517                        	; https://web.archive.org/web/20161129055659/http://cgfm2.emuviews.com/txt/sgxtech.txt
  518                        	;
  519                        	; ***************************************************************************
  520                        	;
  521                        	; HuC6202 VIDEO PRIORITY CONTROLLER (huge thanks to Charles MacDonald!)
  522                        	;
  523                        	; The VPC has no access to sprite priority data, it can only sort pixels
  524                        	; based upon which VDC and whether they are "sprite" or "background".
  525                        	;
  526                        	; This can sometimes lead to unexpected results with low-priority sprites.
  527                        	;
  528                        	; VPC registers $0008 and $0009 make up four 4-bit values that define the
  529                        	; enabled layers and priority setting for the four possible window areas.
  530                        	;
  531                        	; Bits 3-0 of $0008 are for the region where Window 1 and 2 overlap
  532                        	; Bits 7-4 of $0008 are for the region occupied by only Window 2
  533                        	; Bits 3-0 of $0009 are for the region occupied by only Window 1
  534                        	; Bits 7-4 of $0009 are for the region where no Window is present
  535                        	;
  536                        	;  Each 4-bit value has the same format:
  537                        	;
  538                        	;  Bit 0: VDC #1 graphics are 0=disabled, 1=enabled
  539                        	;  Bit 1: VDC #2 graphics are 0=disabled, 1=enabled
  540                        	;  Bit 2: Bit 0 of priority setting
  541                        	;  Bit 3: Bit 1 of priority setting
  542                        	;
  543                        	;   Priority Setting 0b00xx: (useful when VDC #1 is a fullscreen HUD)
  544                        	;
  545                        	;    FRONT
  546                        	;     SP1 = VDC #1 (pce) sprite pixels
  547                        	;     BG1 = VDC #1 (pce) background pixels
  548                        	;     SP2 = VDC #2 (sgx) sprite pixels
  549                        	;     BG2 = VDC #2 (sgx) background pixels
  550                        	;    BACK
  551                        	;
  552                        	;   Priority Setting 0b01xx: (useful for parallax backgrounds)
  553                        	;
  554                        	;    FRONT
  555                        	;     SP1 = VDC #1 (pce) sprite pixels
  556                        	;     SP2 = VDC #2 (sgx) sprite pixels
  557                        	;     BG1 = VDC #1 (pce) background pixels
  558                        	;     BG2 = VDC #2 (sgx) background pixels
  559                        	;    BACK
  560                        	;
  561                        	;   Priority Setting 0b10xx: (only useful for special effects)
  562                        	;
  563                        	;    FRONT
  564                        	;     BG1 = VDC #1 (pce) background pixels (transparent where sprites)
  565                        	;     BG2 = VDC #2 (sgx) background pixels
  566                        	;     SP1 = VDC #1 (pce) sprite pixels
  567                        	;     SP2 = VDC #2 (sgx) sprite pixels
  568                        	;    BACK
  569                        	
  570               0001     		.if	SUPPORT_SGX
  571               0001     		.if	1
  572    18:D151             	sgx_detect	.proc
  573                        	
  574    18:D151  A0 7F      			ldy	#$7F			; Use VRAM address $7F7F
  575    18:D153  84 F0      			sty.l	<_di			; because it won't cause
  576    18:D155  84 F1      			sty.h	<_di			; a screen glitch.
  577                        	
  578    18:D157  20 7B E3   			jsr	sgx_di_to_mawr		; Write $0001 to SGX VRAM.
  579    18:D15A  A0 01      			ldy	#$01
  580    18:D15C  8C 12 02   			sty	SGX_DL
  581    18:D15F  9C 13 02   			stz	SGX_DH
  582                        	
  583    18:D162  20 7E E3   			jsr	vdc_di_to_mawr		; Write $0000 to VDC VRAM.
  584    18:D165  9C 02 02   			stz	VDC_DL
  585    18:D168  9C 03 02   			stz	VDC_DH
  586                        	
  587    18:D16B  20 6E E3   			jsr	sgx_di_to_marr		; Check value in SGX VRAM.
  588    18:D16E  AC 12 02   			ldy	SGX_DL			; $01 if found, $00 if not.
  589    18:D171  8C E8 22   			sty	sgx_detected
  590    18:D174  F0 10      			beq	!+			; Skip the rest if not SGX.
  591                        	
  592    18:D176  20 7B E3   			jsr	sgx_di_to_mawr		; Write $0000 to SGX VRAM
  593    18:D179  9C 12 02   			stz	SGX_DL			; to clean VRAM contents.
  594    18:D17C  9C 13 02   			stz	SGX_DH
  595                        	
  596    18:D17F  73 8C D1 08			tii	.vpc_mode, VPC_CR, 8	; Initialize the HuC6202 VPC.
         18:D183  02 08 00    
  597                        	
  598    18:D186  98         	!:		tya
  599    18:D187  AA         			tax				; "leave" copies X back to A.
  600    18:D188  4A         			lsr	a			; Also CC if PCE, CS if SGX.
  601                        	
  602                        			leave				; All done, phew!
         18:D189  4C EF FF   			jmp	leave_proc
  603                        		.else
  618                        		.endif
  619                        	
  620               0000     		.ifndef	SGX_PARALLAX
  622                        		.endif
  623                        	
  624               0000     		.if	SGX_PARALLAX
  629                        		.else
  630    18:D18C  00 30      	.vpc_mode:	dw	$3000			; Use SGX as the background
  631    18:D18E  00 00      			dw	$0000			; behind a fullscreen HUD.
  632    18:D190  00 00      			dw	$0000
  633    18:D192  00 00      			dw	$0000
  634                        		.endif	SGX_PARALLAX
  635                        	
  636                        			.endp
  637                        	
  638               0000     		.ifndef	CORE_VERSION			; CORE has this in the kernel.
  642                        		.endif	CORE_VERSION
  643                        	
  644                        		.endif	SUPPORT_SGX
  645                        	
  646                        	
  647                        	
  648                        	
  649                        	vdc_copy_to	.procgroup			; These routines share code!
  799                        			.endprocgroup
  800                        	
  801                        	
  802                        	
  803                        	; ***************************************************************************
  804                        	; ***************************************************************************
  805                        	;
  806                        	; init_240x208 - An example of initializing screen and VRAM.
  807                        	;
  808                        	; This can be used as-is, or copied to your own program and modified.
  809                        	;
  810                        	
  811                        	init_240x208	.proc
  892                        			.endp
  893                        	
  894                        	
  895                        	
  896                        	; ***************************************************************************
  897                        	; ***************************************************************************
  898                        	;
  899                        	; init_256x224 - An example of initializing screen and VRAM.
  900                        	;
  901                        	; This can be used as-is, or copied to your own program and modified.
  902                        	;
  903                        	
  904                        	init_256x224	.proc
  985                        			.endp
  986                        	
  987                        	
  988                        	
  989                        	; ***************************************************************************
  990                        	; ***************************************************************************
  991                        	;
  992                        	; init_352x224 - An example of initializing screen and VRAM.
  993                        	;
  994                        	; This can be used as-is, or copied to your own program and modified.
  995                        	;
  996                        	
  997                        	init_352x224	.proc
 1078                        			.endp
 1079                        	
 1080                        	
 1081                        	
 1082                        	; ***************************************************************************
 1083                        	; ***************************************************************************
 1084                        	;
 1085                        	; init_512x224 - An example of initializing screen and VRAM.
 1086                        	;
 1087                        	; This can be used as-is, or copied to your own program and modified.
 1088                        	;
 1089                        	
 1090                        	init_512x224	.proc
 1171                        			.endp
 1172                        	
 1173                        	
 1174                        	
 1175                        	; ***************************************************************************
 1176                        	; ***************************************************************************
 1177                        	;
 1178                        	; init_320x208 - An example of initializing screen and VRAM.
 1179                        	;
 1180                        	; This can be used as-is, or copied to your own program and modified.
 1181                        	;
 1182                        	; This resolution is rarely-seen, but it has no overscan, so it has a use.
 1183                        	;
 1184                        	
 1185                        	init_320x208	.proc
 1266                        			.endp
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   41                        	
                             #[3]   "..\..\..\include\hucc\hucc-math.asm"
   42                        			include	"hucc-math.asm"		; HuCC multiply and divide.
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-math.asm
    5                        	;
    6                        	; Basic (i.e. very slow) 8-bit and 16-bit multiply and divide routines.
    7                        	;
    8                        	; Copyright John Brandwood 2021-2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; This is basically a set of SDCC-compatible routines, but using Y:A for the
   18                        	; primary register instead of X:A.
   19                        	;
   20                        	; Using Y:A makes the routines instantly usable with HuCC, and it also makes
   21                        	; them usable with SDCC with just an "sxy" before and after the call.
   22                        	;
   23                        	; ***************************************************************************
   24                        	; ***************************************************************************
   25                        	
   26               E44C     			.code
   27                        	
   28               2000     	multiplier	=	__temp
   29               2094     	multiplicand	=	___SDCC_m6502_ret0
   30               2094     	product		=	multiplicand
   31                        	
   32               2000     	__mulint_PARM_2	=	multiplier
   33                        	
   34               2000     	divisor		=	__temp
   35               2094     	dividend	=	___SDCC_m6502_ret0
   36               2094     	quotient	=	dividend
   37               2096     	remainder	=	___SDCC_m6502_ret2
   38                        	
   39               2000     	__moduint_PARM_2 =	divisor
   40               2000     	__modsint_PARM_2 =	divisor
   41               2000     	__divuint_PARM_2 =	divisor
   42               2000     	__divsint_PARM_2 =	divisor
   43                        	
   44                        	
   45                        	
   46                        	; ***************************************************************************
   47                        	; int
   48                        	; _mulint (int a, int b)
   49                        	;
   50                        	; 1st parameter in Y:A (multiplicand)
   51                        	; 2nd parameter in __mulint_PARM_2 (multiplier)
   52                        	; result in Y:A
   53                        	;
   54                        	; N.B. signed and unsigned multiply only differ in the top 16 of the 32bits!
   55                        	
   56    00:E44C  85 94      	__mulint:	sta	<multiplicand + 0
   57    00:E44E  84 95      			sty	<multiplicand + 1
   58                        	
   59    00:E450  A2 10      			ldx	#16			; Loop 16 times.
   60                        	
   61    00:E452  46 95      			lsr	<multiplicand + 1	; Divide multiplicand by 2
   62    00:E454  66 94      			ror	<multiplicand + 0	; and clear the 16th bit.
   63                        	
   64    00:E456  62         			cla				; Clear top word of product.
   65    00:E457  85 96      			sta.l	<multiplicand + 2
   66    00:E459  90 0B      			bcc	.rotate
   67                        	
   68    00:E45B  A8         	.add:		tay				; Add the 16-bit multiplier to
   69    00:E45C  18         			clc				; top 16-bits of the product.
   70    00:E45D  A5 96      			lda	<multiplicand + 2
   71    00:E45F  65 00      			adc.l	<multiplier
   72    00:E461  85 96      			sta	<multiplicand + 2
   73    00:E463  98         			tya
   74    00:E464  65 01      			adc.h	<multiplier
   75                        	
   76    00:E466  6A         	.rotate:	ror	a			; Rotate product into the top
   77    00:E467  66 96      			ror	<multiplicand + 2	; bits of the multiplicand ...
   78    00:E469  66 95      			ror	<multiplicand + 1	; and divide multiplicand by 2.
   79    00:E46B  66 94      			ror	<multiplicand + 0
   80                        	
   81    00:E46D  CA         			dex
   82    00:E46E  B0 EB      			bcs	.add			; Add multiplier to top word?
   83    00:E470  D0 F4      			bne	.rotate			; Completed 16 bits?
   84                        	
   85    00:E472  85 97      			sta	<multiplicand + 3	; Save top byte of product.
   86                        	
   87    00:E474  A5 94      			lda.l	<multiplicand		; Return the bottom 16-bits of
   88    00:E476  A4 95      			ldy.h	<multiplicand		; the 32-bit product.
   89                        	
   90    00:E478  60         			rts
   91                        	
   92                        	
   93                        	
   94                        	; ***************************************************************************
   95                        	; unsigned int
   96                        	; _divuint (unsigned int x, unsigned int y)
   97                        	;
   98                        	; 1st parameter in Y:A (unsigned dividend)
   99                        	; 2nd parameter in __divuint_PARM_2 (unsigned divisor)
  100                        	; result in Y:A
  101                        	
  102    00:E479  20 81 E4   	__divuint:	jsr	__moduint		; Call the basic uint division.
  103                        	
  104    00:E47C  A5 94      			lda.l	<quotient		; Then get the result from where
  105    00:E47E  A4 95      			ldy.h	<quotient		; it was calculated.
  106    00:E480  60         			rts
  107                        	
  108                        	
  109                        	
  110                        	; ***************************************************************************
  111                        	; unsigned int
  112                        	; _moduint (unsigned int x, unsigned int y)
  113                        	;
  114                        	; 1st parameter in Y:A (unsigned dividend)
  115                        	; 2nd parameter in __moduint_PARM_2 (unsigned divisor)
  116                        	; result in Y:A
  117                        	;
  118                        	; If the dividend has more bits than the divisor, then we need to check the
  119                        	; 17th bit of the remainder!
  120                        	
  121               0000     		.if	0
  176                        		.else
  177                        	
  178    00:E481  85 94      	__moduint:	sta.l	<dividend		; 1st SDCC parameter in Y:A.
  179    00:E483  84 95      			sty.h	<dividend
  180                        	
  181    00:E485  A5 00      	divmoduint:	lda.l	<divisor		; Check for a divide-by-zero.
  182    00:E487  05 01      			ora.h	<divisor
  183    00:E489  F0 FE      	.zero:		beq	.zero
  184                        	
  185    00:E48B  A2 11      			ldx	#16 + 1
  186                        	
  187    00:E48D  C2         			cly				; Clear remainder.
  188    00:E48E  84 97      			sty.h	<remainder
  189                        	
  190    00:E490  98         	.skip:		tya				; Restore remainder lo-byte.
  191                        	
  192    00:E491  26 94      	.loop:		rol.l	<dividend		; Quotient bit -> dividend LSB.
  193    00:E493  26 95      			rol.h	<dividend		; Rotate dividend, MSB -> C.
  194                        	
  195    00:E495  CA         			dex
  196    00:E496  F0 14      			beq	.finished
  197                        	
  198    00:E498  2A         			rol	a			; Rotate C into remainder.
  199    00:E499  26 97      			rol.h	<remainder
  200                        	;		php				; Preserve remainder 17th bit.
  201                        	
  202    00:E49B  A8         			tay				; Preserve remainder lo-byte.
  203                        	
  204    00:E49C  C5 00      			cmp.l	<divisor		; Test divisor.
  205    00:E49E  A5 97      			lda.h	<remainder
  206    00:E4A0  E5 01      			sbc.h	<divisor
  207    00:E4A2  90 EC      			bcc	.skip			; CC if divisor > remainder.
  208                        	
  209                        	;		cmp.l	<divisor		; If the dividend has more bits
  210                        	;		lda.h	<remainder		; than the divisor then we need
  211                        	;		sbc.h	<divisor		; to check the remainder hi-bit.
  212                        	;		bcs	.subtract		; CS if divisor <= remainder.
  213                        	;		plp				; Restore remainder 17th bit.
  214                        	;		bcc	.skip			; CC if divisor > remainder.
  215                        	;		db	$90			; Turn "plp" into "bcc" to skip.
  216                        	;.subtract:	plp				; Discard remainder 17th bit.
  217                        	;		sec
  218                        	
  219    00:E4A4  85 97      			sta.h	<remainder		; Subtract divisor.
  220    00:E4A6  98         			tya
  221    00:E4A7  E5 00      			sbc.l	<divisor
  222    00:E4A9  38         			sec				
  223    00:E4AA  80 E5      			bra	.loop
  224                        	
  225    00:E4AC  A4 97      	.finished:	ldy.h	<remainder		; Get the remainder hi-byte.
  226                        	
  227    00:E4AE  60         			rts
  228                        	
  229                        		.endif
  230                        	
  231                        	
  232                        	
  233                        	; ***************************************************************************
  234                        	; int
  235                        	; _divsint (int x, int y)
  236                        	;
  237                        	; 1st parameter in Y:A (signed dividend)
  238                        	; 2nd parameter in __divsint_PARM_2 (signed divisor)
  239                        	; result in Y:A
  240                        	
  241    00:E4AF  20 B7 E4   	__divsint:	jsr	__modsint		; Call the basic sint division.
  242                        	
  243    00:E4B2  A5 94      			lda.l	<quotient		; Then get the result from where
  244    00:E4B4  A4 95      			ldy.h	<quotient		; it was calculated.
  245    00:E4B6  60         			rts
  246                        	
  247                        	
  248                        	
  249                        	; ***************************************************************************
  250                        	; int
  251                        	; _modsint (int x, int y)
  252                        	;
  253                        	; 1st parameter in Y:A (signed dividend)
  254                        	; 2nd parameter in __modsint_PARM_2 (signed divisor)
  255                        	; result in Y:A
  256                        	
  257    00:E4B7  84 95      	__modsint:	sty.h	<dividend
  258                        	
  259    00:E4B9  C0 80      			cpy	#$80			; Remainder -ve if dividend
  260    00:E4BB  08         			php				; was -ve.
  261    00:E4BC  90 03      			bcc	!+
  262    00:E4BE  20 0E E5   			jsr	neg_yacs		; Negate the dividend.
  263                        	
  264    00:E4C1  85 94      	!:		sta.l	<dividend		; Store the dividend.
  265    00:E4C3  A5 95      			lda.h	<dividend
  266    00:E4C5  84 95      			sty.h	<dividend
  267                        	
  268    00:E4C7  45 01      			eor.h	<divisor		; Quotient is -ve if divisor
  269    00:E4C9  08         			php				; and dividend signs differ.
  270                        	
  271    00:E4CA  A5 01      			lda.h	<divisor		; Is the divisor -ve?
  272    00:E4CC  10 0B      			bpl	!+
  273                        	
  274    00:E4CE  38         			sec				; Negate the divisor.
  275    00:E4CF  62         			cla
  276    00:E4D0  E5 00      			sbc.l	<divisor
  277    00:E4D2  85 00      			sta.l	<divisor
  278    00:E4D4  62         			cla
  279    00:E4D5  E5 01      			sbc.h	<divisor
  280    00:E4D7  85 01      			sta.h	<divisor
  281                        	
  282    00:E4D9  20 85 E4   	!:		jsr	divmoduint		; Do the unsigned division.
  283                        	
  284    00:E4DC  28         	.result:	plp				; Should the quotient be -ve?
  285    00:E4DD  10 0D      			bpl	.remainder
  286                        	
  287    00:E4DF  AA         			tax				; Preserve remainder lo-byte.
  288                        	
  289    00:E4E0  38         			sec				; Then negate the quotient.
  290    00:E4E1  62         			cla
  291    00:E4E2  E5 94      			sbc.l	<dividend
  292    00:E4E4  85 94      			sta.l	<dividend
  293    00:E4E6  62         			cla
  294    00:E4E7  E5 95      			sbc.h	<dividend
  295    00:E4E9  85 95      			sta.h	<dividend
  296                        	
  297    00:E4EB  8A         			txa				; Restore remainder lo-byte.
  298                        	
  299    00:E4EC  28         	.remainder:	plp				; Was the dividend -ve?
  300    00:E4ED  B0 1F      			bcs	neg_yacs		; Then negate the remainder.
  301    00:E4EF  60         			rts
  302                        	
  303                        	
  304                        	
  305                        	; ***************************************************************************
  306                        	; unsigned int
  307                        	; _muluchar (unsigned char x, unsigned char y)
  308                        	;
  309                        	; 1st parameter in A (unsigned multiplicand)
  310                        	; 2nd parameter in Y (unsigned multiplier)
  311                        	; result in Y:A
  312                        	
  313    00:E4F0  84 00      	__muluchar:	sty	<multiplier
  314                        	
  315    00:E4F2  A0 08      	muluchar_a:	ldy	#8			; Loop 8 times.
  316                        	
  317    00:E4F4  4A         			lsr	a			; Divide multiplicand by 2
  318    00:E4F5  85 94      			sta	<multiplicand		; and clear the 8th bit.
  319                        	
  320    00:E4F7  62         			cla				; Clear top byte of product.
  321    00:E4F8  90 03      			bcc	.rotate
  322                        	
  323    00:E4FA  18         	.add:		clc				; Add the 8-bit multiplier to
  324    00:E4FB  65 00      			adc	<multiplier		; top 8-bits of the product.
  325                        	
  326    00:E4FD  6A         	.rotate:	ror	a			; Rotate product into the top
  327    00:E4FE  66 94      			ror	<multiplicand		; bits of the multiplicand.
  328                        	
  329    00:E500  88         			dey
  330    00:E501  B0 F7      			bcs	.add			; Add multiplier to top byte?
  331    00:E503  D0 F8      			bne	.rotate			; Completed 8 bits?
  332                        	
  333    00:E505  A8         			tay				; Return the 16-bit product.
  334    00:E506  A5 94      			lda	<multiplicand
  335                        	
  336    00:E508  60         			rts
  337                        	
  338                        	
  339                        	
  340                        	; ***************************************************************************
  341                        	; signed int
  342                        	; abs (signed int x)
  343                        	;
  344                        	; 1st parameter in Y:A (signed)
  345                        	; result in Y:A
  346                        	
  347    00:E509  C0 80      	_abs:		cpy	#$80			; Is the hi-byte -ve?
  348    00:E50B  90 0B      			bcc	!+
  349                        	
  350    00:E50D  38         	neg_ya:		sec
  351    00:E50E  49 FF      	neg_yacs:	eor	#$FF
  352    00:E510  69 00      			adc	#0
  353    00:E512  42         			say
  354    00:E513  49 FF      			eor	#$FF
  355    00:E515  69 00      			adc	#0
  356    00:E517  42         			say
  357    00:E518  60         	!:		rts
  358                        	
  359    00:E519             	_abs.1		.alias	_abs
  360                        	
  361                        	
  362                        	
  363                        	; ***************************************************************************
  364                        	; signed int
  365                        	; _mulschar (signed char x, signed char y)
  366                        	;
  367                        	; 1st parameter in A (signed multiplicand)
  368                        	; 2nd parameter in Y (signed multiplier)
  369                        	; result in Y:A
  370                        	;
  371                        	; N.B. Y and A get swapped to make the code shorter.
  372                        	
  373    00:E519  85 94      	__mulschar:	sta	<multiplicand		; Remember multiplicand sign.
  374                        	
  375    00:E51B  C9 80      			cmp	#$80			; Is the multiplicand -ve?
  376    00:E51D  90 03      			bcc	!+
  377    00:E51F  49 FF      			eor	#$FF			; Negate the multiplicand.
  378    00:E521  1A         			inc	a
  379    00:E522  85 00      	!:		sta	<multiplier		; Then save it as multiplier.
  380                        	
  381    00:E524  98         			tya				; Product -ve if multiplicand
  382    00:E525  45 94      			eor	<multiplicand		; and multiplier signs differ.
  383    00:E527  08         			php				; Remember product sign.
  384                        	
  385    00:E528  98         			tya				; Is the multiplicand -ve?
  386    00:E529  10 03      			bpl	!+
  387    00:E52B  49 FF      			eor	#$FF			; Negate the multiplicand.
  388    00:E52D  1A         			inc	a
  389                        	
  390    00:E52E  20 F2 E4   	!:		jsr	muluchar_a		; Multiplier already saved.
  391                        	
  392    00:E531  28         			plp				; Is the product -ve?
  393    00:E532  30 D9      			bmi	neg_ya
  394    00:E534  60         			rts
  395                        	
  396                        	
  397                        	
  398                        	; ***************************************************************************
  399                        	; unsigned int
  400                        	; _mulsuchar (signed char x, signed char y)
  401                        	;
  402                        	; 1st parameter in A (unsigned multiplicand)
  403                        	; 2nd parameter in Y (signed multiplier)
  404                        	; result in Y:A
  405                        	;
  406                        	; N.B. Y and A get swapped to make the code shorter.
  407                        	
  408    00:E535  42         	__mulsuchar:	say				; Put the signed param in A.
  409                        			; drop through to __muluschar
  410                        	
  411                        	
  412                        	
  413                        	; ***************************************************************************
  414                        	; signed int
  415                        	; _muluschar (unsigned char x, unsigned char y)
  416                        	;
  417                        	; 1st parameter in A (signed multiplicand)
  418                        	; 2nd parameter in Y (unsigned multiplier)
  419                        	; result in Y:A
  420                        	
  421    00:E536  C9 80      	__muluschar:	cmp	#$80			; Is multiplicand -ve?
  422    00:E538  08         			php				; Remember the sign.
  423    00:E539  90 03      			bcc	!+
  424    00:E53B  49 FF      			eor	#$FF			; Negate multiplicand.
  425    00:E53D  1A         			inc	a
  426                        	
  427    00:E53E  20 F0 E4   	!:		jsr	__muluchar		; Do the unsigned multiply.
  428                        	
  429    00:E541  28         			plp				; Was multiplicand -ve?
  430    00:E542  B0 CA      			bcs	neg_yacs		; Then negate the product.
  431    00:E544  60         			rts
  432                        	
  433                        	
  434                        	
  435                        	; ***************************************************************************
  436                        	; unsigned int
  437                        	; _moduchar (unsigned char x, unsigned char y)
  438                        	;
  439                        	; 1st parameter in A (unsigned dividend)
  440                        	; 2nd parameter in Y (unsigned divisor)
  441                        	; result in Y:A
  442                        	
  443    00:E545  84 00      	__moduchar:	sty.l	<divisor
  444                        	
  445    00:E547  0A         	divmodu8_a:	asl	a			; Rotate dividend, MSB -> C.
  446    00:E548  85 94      			sta.l	<dividend
  447    00:E54A  64 95      			stz.h	<dividend		; Clear quotient hi-byte.
  448                        	
  449    00:E54C  A0 08      			ldy	#8
  450    00:E54E  62         			cla				; Clear remainder.
  451    00:E54F  2A         	.loop:		rol	a			; Rotate C into remainder.
  452    00:E550  C5 00      			cmp	<divisor		; Test divisor.
  453    00:E552  90 02      			bcc	.skip			; CC if divisor > remainder.
  454    00:E554  E5 00      			sbc	<divisor		; Subtract divisor.
  455    00:E556  26 94      	.skip:		rol	<dividend		; Quotient bit -> dividend LSB.
  456    00:E558  88         			dey
  457    00:E559  D0 F4      			bne	.loop
  458                        	
  459    00:E55B  C2         			cly				; Clear hi-byte of return.
  460    00:E55C  60         			rts				; Return the 16-bit remainder.
  461                        	
  462                        	
  463                        	
  464                        	; ***************************************************************************
  465                        	; unsigned int
  466                        	; _divuchar (unsigned char x, unsigned char y)
  467                        	;
  468                        	; 1st parameter in A (unsigned dividend)
  469                        	; 2nd parameter in Y (unsigned divisor)
  470                        	; result in Y:A
  471                        	
  472    00:E55D  20 45 E5   	__divuchar:	jsr	__moduchar
  473                        	
  474    00:E560  A5 94      			lda	<dividend		; Get the dividend lo-byte.
  475    00:E562  60         			rts				; Return the 16-bit dividend.
  476                        	
  477                        	
  478                        	
  479                        	; ***************************************************************************
  480                        	; signed int
  481                        	; _modschar (signed char x, signed char y)
  482                        	;
  483                        	; 1st parameter in A (signed dividend)
  484                        	; 2nd parameter in Y (signed divisor)
  485                        	; result in Y:A
  486                        	
  487    00:E563  AA         	__modschar:	tax				; Preserve the dividend.
  488    00:E564  08         			php				; Remember remainder sign.
  489                        	
  490    00:E565  84 00      			sty	<divisor		; Quotient negative if divisor
  491    00:E567  45 00      			eor	<divisor		; and dividend signs differ.
  492    00:E569  08         			php				; Remember the quotient sign.
  493                        	
  494    00:E56A  98         			tya				; Is the divisor -ve?
  495    00:E56B  10 05      			bpl	!+
  496    00:E56D  49 FF      			eor	#$FF			; Negate the divisor.
  497    00:E56F  1A         			inc	a
  498    00:E570  85 00      			sta	<divisor
  499                        	
  500    00:E572  8A         	!:		txa				; Is the dividend -ve?
  501    00:E573  10 03      			bpl	divmods8_a
  502                        	
  503    00:E575  49 FF      	divmods8_neg:	eor	#$FF			; Negate the dividend.
  504    00:E577  1A         			inc	a
  505                        	
  506    00:E578  20 47 E5   	divmods8_a:	jsr	divmodu8_a		; Do the unsigned division.
  507                        	
  508    00:E57B  28         			plp				; Should the quotient be -ve?
  509    00:E57C  10 0C      			bpl	!+
  510                        	
  511    00:E57E  AA         			tax				; Preserve remainder lo-byte.
  512                        	
  513    00:E57F  38         			sec				; Negate the quotient.
  514    00:E580  62         			cla
  515    00:E581  E5 94      			sbc.l	<dividend
  516    00:E583  85 94      			sta.l	<dividend
  517    00:E585  A9 FF      			lda	#$FF
  518    00:E587  85 95      			sta.h	<dividend
  519                        	
  520    00:E589  8A         			txa				; Restore remainder lo-byte.
  521                        	
  522    00:E58A  28         	!:		plp				; Was the dividend -ve?
  523    00:E58B  10 05      			bpl	!+
  524                        	
  525    00:E58D  49 FF      			eor	#$FF			; Then negate the remainder.
  526    00:E58F  1A         			inc	a
  527    00:E590  A0 FF      			ldy	#$FF
  528                        	
  529    00:E592  60         	!:		rts
  530                        	
  531                        	
  532                        	
  533                        	; ***************************************************************************
  534                        	; signed int
  535                        	; _moduschar (unsigned char x, unsigned char y)
  536                        	;
  537                        	; 1st parameter in A (signed dividend)
  538                        	; 2nd parameter in Y (unsigned divisor)
  539                        	; result in Y:A
  540                        	
  541    00:E593  84 00      	__moduschar:	sty.l	<divisor
  542                        	
  543    00:E595  A8         			tay				; Is the dividend -ve?
  544    00:E596  08         			php				; Remember remainder sign.
  545    00:E597  08         			php				; Remember quotient sign.
  546    00:E598  30 DB      			bmi	divmods8_neg
  547    00:E59A  80 DC      			bra	divmods8_a
  548                        	
  549                        	
  550                        	
  551                        	; ***************************************************************************
  552                        	; unsigned int
  553                        	; _modsuchar (signed char x, signed char y)
  554                        	;
  555                        	; 1st parameter in A (unsigned dividend)
  556                        	; 2nd parameter in Y (signed divisor)
  557                        	; result in Y:A
  558                        	
  559    00:E59C  AA         	__modsuchar:	tax				; Preserve the dividend.
  560    00:E59D  08         			php				; Remember remainder sign.
  561                        	
  562    00:E59E  98         			tya				; Check the divisor sign.
  563    00:E59F  08         			php				; Remember quotient sign.
  564    00:E5A0  10 03      			bpl	!+
  565    00:E5A2  49 FF      			eor	#$FF			; Negate the divisor.
  566    00:E5A4  1A         			inc	a
  567    00:E5A5  85 00      	!:		sta.l	<divisor
  568                        	
  569    00:E5A7  8A         			txa				; Restore the dividend.
  570    00:E5A8  80 CE      			bra	divmods8_a
  571                        	
  572                        	
  573                        	
  574                        	; ***************************************************************************
  575                        	; signed int
  576                        	; _divschar (signed char x, signed char y)
  577                        	;
  578                        	; 1st parameter in A (signed dividend)
  579                        	; 2nd parameter in Y (signed divisor)
  580                        	; result in Y:A
  581                        	
  582    00:E5AA  20 63 E5   	__divschar:	jsr	__modschar
  583                        	
  584    00:E5AD  A5 94      			lda.l	<dividend
  585    00:E5AF  A4 95      			ldy.h	<dividend
  586    00:E5B1  60         			rts
  587                        	
  588                        	
  589                        	
  590                        	; ***************************************************************************
  591                        	; signed int
  592                        	; _divuschar (unsigned char x, unsigned char y)
  593                        	;
  594                        	; 1st parameter in A (signed dividend)
  595                        	; 2nd parameter in Y (unsigned divisor)
  596                        	; result in Y:A
  597                        	
  598    00:E5B2  20 93 E5   	__divuschar:	jsr	__moduschar
  599                        	
  600    00:E5B5  A5 94      			lda.l	<dividend
  601    00:E5B7  A4 95      			ldy.h	<dividend
  602    00:E5B9  60         			rts
  603                        	
  604                        	
  605                        	
  606                        	; ***************************************************************************
  607                        	; unsigned int
  608                        	; _divsuchar (signed char x, signed char y)
  609                        	;
  610                        	; 1st parameter in A (unsigned dividend)
  611                        	; 2nd parameter in Y (signed divisor)
  612                        	; result in Y:A
  613                        	
  614    00:E5BA  20 9C E5   	__divsuchar:	jsr	__modsuchar
  615                        	
  616    00:E5BD  A5 94      			lda.l	<dividend
  617    00:E5BF  A4 95      			ldy.h	<dividend
  618    00:E5C1  60         			rts
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   43                        	
   44                        			; Define in hucc-config.inc to remove this.
   45                        	
   46               0001     		.ifndef	HUCC_NO_DEFAULT_RANDOM
                             #[3]   "..\..\..\include\hucc\random.asm"
   47                        			include	"random.asm"		; Random number generator.
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; random.asm
    5                        	;
    6                        	; Pseudo-random number generator (https://github.com/bbbradsmith/prng_6502)
    7                        	;
    8                        	; Copyright Brad Smith 2019.
    9                        	;
   10                        	; License:
   11                        	;
   12                        	; This code and may be used, reused, and modified for any purpose, commercial
   13                        	; or non-commercial.
   14                        	;
   15                        	; Attribution in released binaries or documentation is appreciated but not
   16                        	; required.
   17                        	;
   18                        	; ***************************************************************************
   19                        	; ***************************************************************************
   20                        	;
   21                        	; This is a linear feedback shift register (LFSR) in Galois form, which is
   22                        	; iterated 8 times to produce an 8-bit pseudo-random number.
   23                        	;
   24                        	; Two widths of LFSR are provided:
   25                        	;
   26                        	;  24-bit requires 3 bytes, and repeats after 16777215 calls.
   27                        	;  32-bit requires 4 bytes, and repeats after 4294967295 calls.
   28                        	;
   29                        	; Usage:
   30                        	;
   31                        	;  Initialize the zero-page "random" variable to any value other than 0.
   32                        	;  The size of "random" is 3 or 4 bytes, depending on the width of LFSR
   33                        	;  chosen.
   34                        	;
   35                        	;  Call one of the RNG functions and an 8-bit result will be returned in the
   36                        	;  A-register (with flags), and the Y-register will be clobbered.
   37                        	;
   38                        	;  Do not mix RNGs of different width in the same program, unless you can
   39                        	;  give them each separate "random" state storage.
   40                        	;
   41                        	; ***************************************************************************
   42                        	; ***************************************************************************
   43                        	
   44                        	
   45               0001     		.ifndef	_KICKC				; Variables defined in C?
   46               2098     			.zp
   47    F8:2098             	random:		.ds	4			; Seed is 3 or 4 bytes.
   48               E5C2     			.code
   49                        		.endif	_KICKC
   50                        	
   51                        	
   52                        	
   53                        	; ***************************************************************************
   54                        	; ***************************************************************************
   55                        	;
   56                        	; init_random - Initialize a 32-bit LFSR using an 8-bit seed value in Y.
   57                        	;
   58                        	; The LFSR is initialized to n'th entry of a standard CRC-32 lookup-table,
   59                        	; which gives it a decent distribution of bits.
   60                        	;
   61                        	; Since seed is an 8-bit value, there are 255 (256-1) possible starting
   62                        	; states for the LFSR, because 0 would generate a 0 state.
   63                        	;
   64                        	; CRC-32 code by Paul Guertin. See http://6502.org/source/integers/crc.htm
   65                        	;
   66                        	
   67    18:D291             	init_random	.proc
   68                        	
   69    18:D291  A9 01      			lda	#1			; Init CRC-32 table value.
   70    18:D293  85 98      			sta	<random + 0
   71    18:D295  98         			tya				; Get and check the seed value.
   72    18:D296  D0 01      			bne	.reverse_seed
   73    18:D298  3A         			dec	a			; Which must be non-zero!
   74    18:D299  4A         	.reverse_seed:	lsr	a			; Reverse the bits so that small changes
   75    18:D29A  26 98      			rol	<random + 0		; in the seed make larger differences in
   76    18:D29C  90 FB      			bcc	.reverse_seed		; the initial state.
   77                        	
   78    18:D29E  64 99      			stz	<random + 1		; A contains the high byte of the CRC-32.
   79    18:D2A0  64 9A      			stz	<random + 2		; The other three bytes are in memory.
   80    18:D2A2  62         			cla
   81                        	
   82    18:D2A3  A0 08      			ldy	#8			; Y counts bits in a byte.
   83    18:D2A5  4A         	.bit_loop:	lsr	a			; The CRC-32 algorithm is similar to CRC-16
   84    18:D2A6  66 9A      			ror	<random + 2		; except that it is reversed (originally for
   85    18:D2A8  66 99      			ror	<random + 1		; hardware reasons). This is why we shift
   86    18:D2AA  66 98      			ror	<random + 0		; right instead of left here.
   87    18:D2AC  90 16      			bcc	.no_add			; Do nothing if no overflow,
   88    18:D2AE  49 ED      			eor	#$ED			; else add CRC-32 polynomial $EDB88320.
   89                        	
   90    18:D2B0  48         			pha				; Save high byte while we do others.
   91    18:D2B1  A5 9A      			lda	<random + 2
   92    18:D2B3  49 B8      			eor	#$B8			; Most reference books give the CRC-32 poly
   93    18:D2B5  85 9A      			sta	<random + 2		; as $04C11DB7. This is actually the same if
   94    18:D2B7  A5 99      			lda	<random + 1		; you write it in binary and read it right-
   95    18:D2B9  49 83      			eor	#$83			; to-left instead of left-to-right. Doing it
   96    18:D2BB  85 99      			sta	<random + 1		; this way means we won't have to explicitly
   97    18:D2BD  A5 98      			lda	<random + 0		; reverse things afterwards.
   98    18:D2BF  49 20      			eor	#$20
   99    18:D2C1  85 98      			sta	<random + 0
  100    18:D2C3  68         			pla				; Restore high byte.
  101                        	
  102    18:D2C4  88         	.no_add:	dey				; Do next bit.
  103    18:D2C5  D0 DE      			bne	.bit_loop
  104                        	
  105    18:D2C7  85 9B      			sta	<random + 3		; Save CRC-32 high-byte.
  106                        	
  107                        			leave				; All done!
         18:D2C9  4C EF FF   			jmp	leave_proc
  108                        	
  109                        			.endp
  110                        	
  111                        	
  112                        	
  113                        	; ***************************************************************************
  114                        	; ***************************************************************************
  115                        	;
  116                        	; get_random - 8-bit LFSR pseudo-random number with a 24-bit cycle.
  117                        	;
  118                        	; The pseudo-random sequence repeats after (2^24)-1 calls.
  119                        	;
  120                        	; Written by Wim Couwenberg, see ...
  121                        	;
  122                        	; "https://wimcouwenberg.wordpress.com/2020/11/15/ ...
  123                        	;  a-fast-24-bit-prng-algorithm-for-the-6502-processor/"
  124                        	;
  125                        	; Takes 68 cycles on the HuC6280, incl JSR & RTS.
  126                        	;
  127                        	; N.B. HuCC library code relies on this preserving X and Y!
  128                        	;
  129                        	
  130    00:E5C2  C2         	_rand8:		cly				; Entry point for HuCC.
  131                        	
  132    00:E5C3  A5 98      	get_random:	lda	<random + 0		; Operation 7 (with carry clear).
  133    00:E5C5  0A         			asl	a
  134    00:E5C6  45 99      			eor	<random + 1
  135    00:E5C8  85 99      			sta	<random + 1
  136    00:E5CA  2A         			rol	a             		; Operation 9.
  137    00:E5CB  45 9A      			eor	<random + 2
  138    00:E5CD  85 9A      			sta	<random + 2
  139    00:E5CF  45 98      			eor	<random + 0		; Operation 5.
  140    00:E5D1  85 98      			sta	<random + 0
  141    00:E5D3  A5 99      			lda	<random + 1		; Operation 15.
  142    00:E5D5  6A         			ror	a
  143    00:E5D6  45 9A      			eor	<random + 2
  144    00:E5D8  85 9A      			sta	<random + 2
  145    00:E5DA  45 99      			eor	<random + 1		; Operation 6.
  146    00:E5DC  85 99      			sta	<random + 1
  147    00:E5DE  60         			rts
  148                        	
  149                        	
  150                        	
  151               0000     		.if	0
  316                        		.endif
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   48                        		.endif
   49                        	
   50                        			; Optional libraries that get used when their header files
   51                        			; are included in a HuCC project.
   52                        			;
   53                        			; When the HuCC compiler is invoked with the "--legacy"
   54                        			; option to compile old projects, then the "huc.h" file
   55                        			; is automatically included, which then includes a list
   56                        			; of specific headers corresponding to HuC's library.
   57                        	
   58               0001     		.ifdef	HUCC_USES_GFX
                             #[3]   "..\..\..\include\hucc\hucc-gfx.asm"
   59                        			include	"hucc-gfx.asm"		; Set in hucc_gfx.h
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; huc-gfx.asm
    5                        	;
    6                        	; Based on the original HuC and MagicKit functions by David Michel and the
    7                        	; other original HuC developers.
    8                        	;
    9                        	; Modifications copyright John Brandwood 2024-2025.
   10                        	;
   11                        	; Distributed under the Boost Software License, Version 1.0.
   12                        	; (See accompanying file LICENSE_1_0.txt or copy at
   13                        	;  http://www.boost.org/LICENSE_1_0.txt)
   14                        	;
   15                        	; ***************************************************************************
   16                        	; ***************************************************************************
   17                        	
   18                        	;
   19                        	; Include dependancies ...
   20                        	;
   21                        	
   22                        			include "common.asm"		; Common helpers.
   23                        			include "vce.asm"		; Useful VCE routines.
   24                        			include "vdc.asm"		; Useful VCE routines.
   25                        	
   26                        	
   27                        	
   28                        	; ***************************************************************************
   29                        	; ***************************************************************************
   30                        	;
   31                        	; void __fastcall disp_on( void );
   32                        	; void __fastcall disp_off( void );
   33                        	
   34    00:E5DF             			.alias	_disp_on		= set_dspon
   35    00:E5DF             			.alias	_disp_off		= set_dspoff
   36                        	
   37                        	
   38                        	
   39                        	; ***************************************************************************
   40                        	; ***************************************************************************
   41                        	;
   42                        	; void __fastcall set_screen_size( unsigned char value<_al> );
   43                        	; void __fastcall sgx_set_screen_size( unsigned char value<_al> );
   44                        	;
   45                        	
   46    00:E5DF             			.alias	_set_screen_size.1	= set_bat_vdc
   47    00:E5DF             			.alias	_sgx_set_screen_size.1	= set_bat_sgx
   48                        	
   49                        	
   50                        	
   51                        	; ***************************************************************************
   52                        	; ***************************************************************************
   53                        	;
   54                        	; void __fastcall init_256x224( void );
   55                        	
   56    18:D056             	_init_256x224	.proc
   57                        	
   58               0800     	.BAT_SIZE	=	64 * 32
   59               0080     	.CHR_0x20	=	.BAT_SIZE / 16		; 1st tile # after the BAT.
   60               7F00     	.SAT_ADDR	=	$7F00			; SAT takes 16 tiles of VRAM.
   61                        	
   62    18:D056  08         			php				; Disable interrupts.
   63    18:D057  78         			sei
   64                        	
   65    18:D058  20 AB FD   			call	clear_vce		; Clear all palettes.
   66                        	
   67    18:D05B  A9 80      			lda.l	#.CHR_0x20		; CHR # of ASCII ' '.
   68    18:D05D  85 F8      			sta.l	<_ax
   69    18:D05F  A9 00      			lda.h	#.CHR_0x20
   70    18:D061  85 F9      			sta.h	<_ax
   71                        	
   72    18:D063  A9 08      			lda	#>.BAT_SIZE		; Size of BAT in words.
   73    18:D065  85 FA      			sta	<_bl
   74                        	
   75    18:D067  20 BF FD   			call	clear_vram_vdc		; Clear VRAM.
   76               0001     		.if	SUPPORT_SGX
   77    18:D06A  20 A1 FD   			call	clear_vram_sgx
   78                        		.endif
   79                        	
   80    18:D06D  A9 91      			lda	#<.mode_256x224		; Disable BKG & SPR layers but
   81    18:D06F  85 EC      			sta.l	<_bp			; enable RCR & VBLANK IRQ.
   82    18:D071  A9 D0      			lda	#>.mode_256x224
   83    18:D073  85 ED      			sta.h	<_bp
   84                        	
   85               0001     		.if	SUPPORT_SGX
   86    18:D075  20 97 FD   			call	sgx_detect		; Are we really on an SGX?
   87    18:D078  90 05      			bcc	!+
   88    18:D07A  A0 18      			ldy	#^.mode_256x224		; Set SGX 1st, with no VBL.
   89    18:D07C  20 8D FD   			call	set_mode_sgx
   90                        		.endif
   91    18:D07F  A0 18      	!:		ldy	#^.mode_256x224		; Set VDC 2nd, VBL allowed.
   92    18:D081  20 83 FD   			call	set_mode_vdc
   93                        	
   94               0001     		.if	SUPPORT_SGX
   95    18:D084  2C 10 02   			bit	SGX_SR			; Purge any overdue RCR.
   96                        		.endif
   97    18:D087  2C 00 02   			bit	VDC_SR			; Purge any overdue VBL.
   98    18:D08A  28         			plp				; Restore interrupts.
   99                        	
  100    18:D08B  20 09 E3   			call	wait_vsync		; Wait for the next VBLANK.
  101                        	
  102                        			leave				; All done, phew!
         18:D08E  4C EF FF   			jmp	leave_proc
  103                        	
  104                        			; A standard 256x224 screen with overscan.
  105                        	
  106    18:D091  80         	.mode_256x224:	db	$80			; VCE Control Register.
  107    18:D092  04         			db	VCE_CR_5MHz + XRES_SOFT	;   Video Clock + Artifact Reduction
  108                        	
  109    18:D093  09         			db	VDC_MWR			; Memory-access Width Register
  110    18:D094  10 00      			dw	VDC_MWR_64x32 + VDC_MWR_1CYCLE
  111    18:D096  0A         			db	VDC_HSR			; Horizontal Sync Register
  112    18:D097  02 02      			dw	VDC_HSR_256
  113    18:D099  0B         			db	VDC_HDR			; Horizontal Display Register
  114    18:D09A  1F 04      			dw	VDC_HDR_256
  115    18:D09C  0C         			db	VDC_VPR			; Vertical Sync Register
  116    18:D09D  02 17      			dw	VDC_VPR_224
  117    18:D09F  0D         			db	VDC_VDW			; Vertical Display Register
  118    18:D0A0  DF 00      			dw	VDC_VDW_224
  119    18:D0A2  0E         			db	VDC_VCR			; Vertical Display END position Register
  120    18:D0A3  FF 00      			dw	VDC_VCR_224
  121    18:D0A5  0F         			db	VDC_DCR			; DMA Control Register
  122    18:D0A6  10 00      			dw	$0010			;   Enable automatic VRAM->SATB
  123    18:D0A8  13         			db	VDC_DVSSR		; VRAM->SATB address $7F00
  124    18:D0A9  00 7F      			dw	.SAT_ADDR
  125    18:D0AB  07         			db	VDC_BXR			; Background X-Scroll Register
  126    18:D0AC  00 00      			dw	$0000
  127    18:D0AE  08         			db	VDC_BYR			; Background Y-Scroll Register
  128    18:D0AF  00 00      			dw	$0000
  129    18:D0B1  06         			db	VDC_RCR			; Raster Counter Register
  130    18:D0B2  00 00      			dw	$0000			;   Never occurs!
  131    18:D0B4  05         			db	VDC_CR			; Control Register
  132    18:D0B5  0C 00      			dw	$000C			;   Enable VSYNC & RCR IRQ
  133    18:D0B7  00         			db	0
  134                        	
  135                        			.endp
  136                        	
  137                        	
  138                        	
  139                        	; ***************************************************************************
  140                        	; ***************************************************************************
  141                        	;
  142                        	; void __fastcall init_240x208( void );
  143                        	
  144                        	_init_240x208	.proc
  223                        			.endp
  224                        	
  225                        	
  226                        	
  227                        	; ***************************************************************************
  228                        	; ***************************************************************************
  229                        	;
  230                        	; void __fastcall _macro set_xres( unsigned int x_pixels<_ax> );
  231                        	; void __fastcall _macro sgx_set_xres( unsigned int x_pixels<_ax> );
  232                        	;
  233                        	; void __fastcall set_xres( unsigned int x_pixels<_ax>, unsigned char blur_flag<_bl> );
  234                        	; void __fastcall sgx_set_xres( unsigned int x_pixels<_ax>, unsigned char blur_flag<_bl> );
  235                        	;
  236                        	; blur_flag = XRES_SOFT (default if not specified), XRES_SHARP or XRES_KEEP
  237                        	
  238                        	set_xres_group	.procgroup			; These routines share code!
  337                        			.endprocgroup	; set_xres_group
  338                        	
  339                        	
  340                        	
  341                        	; ***************************************************************************
  342                        	; ***************************************************************************
  343                        	;
  344                        	; HuC VRAM Functions
  345                        	;
  346                        	; ***************************************************************************
  347                        	; ***************************************************************************
  348                        	
  349                        	
  350    18:CF88             	load_vram_group	.procgroup			; These routines share code!
  351                        	
  352                        	; ***************************************************************************
  353                        	; ***************************************************************************
  354                        	;
  355                        	; void __fastcall load_vram( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_words<_ax> );
  356                        	; void __fastcall sgx_load_vram( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_words<_ax> );
  357                        	;
  358                        	; void __fastcall far_load_vram( unsigned int vram<_di>, unsigned int num_words<_ax> );
  359                        	; void __fastcall sgx_far_load_vram( unsigned int vram<_di>, unsigned int num_words<_ax> );
  360                        	;
  361                        	; load_vram_sgx -  copy a block of memory to VRAM
  362                        	; load_vram_vdc -  copy a block of memory to VRAM
  363                        	;
  364                        	; _bp		= BAT memory location
  365                        	; _bp_bank	= BAT bank
  366                        	; _di		= VRAM base address
  367                        	; _ax		= nb of words to copy
  368                        	; ----
  369                        	; N.B. BAT data *must* be word-aligned!
  370                        	
  371               0000     		.ifndef	VRAM_XFER_SIZE
  373                        		.endif
  374                        	
  375    18:CF88             	load_vram_x	.proc
  376                        	
  377    18:CF88  43 08      			tma3
  378    18:CF8A  48         			pha
  379    18:CF8B  43 10      			tma4
  380    18:CF8D  48         			pha
  381                        	
  382    18:CF8E  A4 02      			ldy	<_bp_bank
  383    18:CF90  20 3B E3   			jsr	map_bp_to_mpr34		; Map data to MPR3 & MPR4.
  384                        	
  385    18:CF93  20 7F E3   			jsr	set_di_to_mawr
  386                        	
  387                        	;		tii	.vdc_tai, ram_tia, 8
  388                        	
  389               0001     		.if	SUPPORT_SGX
  390    18:CF96  8A         			txa				; Select which VDC to write
  391    18:CF97  1A         			inc	a			; to.
  392    18:CF98  1A         			inc	a
  393    18:CF99  8D F3 22   			sta.l	ram_tia_dst
  394                        		.endif
  395                        	
  396    18:CF9C  A9 10      			lda	#VRAM_XFER_SIZE		; Split into 16-byte chunks
  397    18:CF9E  8D F5 22   			sta.l	ram_tia_len		; for stable IRQ response.
  398                        	
  399    18:CFA1  A6 EC      			ldx.l	<_bp
  400    18:CFA3  8E F1 22   			stx.l	ram_tia_src
  401    18:CFA6  A4 ED      			ldy.h	<_bp
  402    18:CFA8  8C F2 22   			sty.h	ram_tia_src
  403                        	
  404    18:CFAB  A5 F8      			lda.l	<_ax			; Length in words.
  405    18:CFAD  48         			pha				; Preserve length.l
  406                        	
  407    18:CFAE  46 F9      			lsr.h	<_ax
  408    18:CFB0  6A         			ror	a
  409    18:CFB1  46 F9      			lsr.h	<_ax
  410    18:CFB3  6A         			ror	a
  411    18:CFB4  46 F9      			lsr.h	<_ax
  412    18:CFB6  6A         			ror	a
  413               0000     		.if	VRAM_XFER_SIZE == 32
  416                        		.endif
  417                        	
  418    18:CFB7  22         			sax				; x=chunks-lo
  419    18:CFB8  F0 1F      			beq	.next_block		; a=source-lo, y=source-hi
  420                        	
  421    18:CFBA  20 F0 22   	.chunk_loop:	jsr	ram_tia			; transfer 16-bytes
  422                        	
  423    18:CFBD  18         			clc				; increment source
  424    18:CFBE  69 10      			adc	#VRAM_XFER_SIZE
  425    18:CFC0  8D F1 22   			sta.l	ram_tia_src
  426    18:CFC3  90 11      			bcc	.same_page
  427    18:CFC5  C8         			iny
  428    18:CFC6  10 0B      			bpl	.same_bank		; remap_data
  429                        	
  430    18:CFC8  42         			say
  431    18:CFC9  43 10      			tma4
  432    18:CFCB  53 08      			tam3
  433    18:CFCD  1A         			inc	a
  434    18:CFCE  53 10      			tam4
  435    18:CFD0  A9 60      			lda	#$60
  436    18:CFD2  42         			say
  437                        	
  438    18:CFD3  8C F2 22   	.same_bank:	sty.h	ram_tia_src
  439                        	
  440    18:CFD6  CA         	.same_page:	dex
  441    18:CFD7  D0 E1      			bne	.chunk_loop
  442                        	
  443    18:CFD9  C6 F9      	.next_block:	dec.h	<_ax
  444    18:CFDB  10 DD      			bpl	.chunk_loop
  445                        	
  446    18:CFDD  68         			pla				; Restore length.l
  447    18:CFDE  29 07      			and	#VRAM_XFER_SIZE / 2 - 1
  448    18:CFE0  F0 07      			beq	.done
  449                        	
  450    18:CFE2  0A         			asl	a			; Convert words to bytes.
  451    18:CFE3  8D F5 22   			sta.l	ram_tia_len
  452                        	
  453    18:CFE6  20 F0 22   			jsr	ram_tia			; transfer remainder
  454                        	
  455    18:CFE9  68         	.done:		pla
  456    18:CFEA  53 10      			tam4
  457    18:CFEC  68         			pla
  458    18:CFED  53 08      			tam3
  459                        	
  460                        			leave
         18:CFEF  4C EF FF   			jmp	leave_proc
  461                        	
  462                        			.endp
  463                        	
  464                        			.endprocgroup	; load_vram_group
  465                        	
  466                        	
  467                        	
  468                        	; ***************************************************************************
  469                        	; ***************************************************************************
  470                        	;
  471                        	; void __fastcall load_bat( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  472                        	; void __fastcall sgx_load_bat( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  473                        	;
  474                        	; void __fastcall far_load_bat( unsigned int vram<_di>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  475                        	; void __fastcall sgx_far_load_bat( unsigned int vram<_di>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  476                        	;
  477                        	; load_bat_sgx - transfer a BAT to VRAM
  478                        	; load_bat_vdc - transfer a BAT to VRAM
  479                        	;
  480                        	; transfer a BAT to VRAM
  481                        	; ----
  482                        	; _bp		= BAT memory location
  483                        	; _bp_bank	= BAT bank
  484                        	; _di		= VRAM base address
  485                        	; _al		= nb of column to copy
  486                        	; _ah		= nb of row
  487                        	; ----
  488                        	; N.B. BAT data *must* be word-aligned!
  489                        	
  490               20EC     	_gfx_load_bat_PARM_2	=	_bp
  491               20F0     	_gfx_load_bat_PARM_3	=	_di
  492               20F8     	_gfx_load_bat_PARM_4	=	_al
  493               20F9     	_gfx_load_bat_PARM_5	=	_ah
  494                        	
  495    18:D1D6             	load_bat_group	.procgroup			; These routines share code!
  496                        	
  497               0001     		.if	SUPPORT_SGX
  498                        			.proc	_sgx_load_bat.4
  505                        			.endp
  506                        		.endif
  507                        	
  508    18:D1D6             			.proc	_load_bat.4
  509    18:D1D6             			.alias	_far_load_bat.3		= _load_bat.4
  510                        	
  511    18:D1D6  82         			clx				; Offset to PCE VDC.
  512                        	
  513    18:D1D7  43 08      			tma3
  514    18:D1D9  48         			pha
  515                        	
  516    18:D1DA  A4 02      			ldy	<_bp_bank
  517    18:D1DC  20 2D E3   			jsr	map_bp_to_mpr3		; Map data to MPR3.
  518                        	
  519    18:D1DF  A4 EC      			ldy.l	<_bp
  520    18:D1E1  64 EC      			stz.l	<_bp
  521                        	
  522    18:D1E3  20 7F E3   	.line_loop:	jsr	set_di_to_mawr
  523                        	
  524    18:D1E6  A5 F8      			lda	<_al
  525    18:D1E8  85 00      			sta	<__temp
  526    18:D1EA  B1 EC      	.tile_loop:	lda	[_bp], y
  527    18:D1EC  9D 02 02   			sta	VDC_DL, x
  528    18:D1EF  C8         			iny
  529    18:D1F0  B1 EC      			lda	[_bp], y
  530    18:D1F2  9D 03 02   			sta	VDC_DH, x
  531    18:D1F5  C8         			iny
  532    18:D1F6  D0 03      			bne	!+
  533    18:D1F8  20 4C E3   			jsr	inc.h_bp_mpr3
  534    18:D1FB  C6 00      	!:		dec	<__temp
  535    18:D1FD  D0 EB      			bne	.tile_loop
  536                        	
  537    18:D1FF  BD 7E 26   			lda	vdc_bat_width, x
  538    18:D202  18         			clc
  539    18:D203  65 F0      			adc.l	<_di
  540    18:D205  85 F0      			sta.l	<_di
  541    18:D207  90 02      			bcc	!+
  542    18:D209  E6 F1      			inc.h	<_di
  543                        	
  544    18:D20B  C6 F9      	!:		dec	<_ah
  545    18:D20D  D0 D4      			bne	.line_loop
  546                        	
  547    18:D20F  68         			pla
  548    18:D210  53 08      			tam3
  549                        	
  550                        			leave
         18:D212  4C EF FF   			jmp	leave_proc
  551                        	
  552                        			.endp
  553                        	
  554                        			.endprocgroup	; load_bat_group
  555                        	
  556                        	
  557                        	
  558                        	; ***************************************************************************
  559                        	; ***************************************************************************
  560                        	;
  561                        	; void __fastcall load_palette( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp>, unsigned char num_palettes<_ah> );
  562                        	;
  563                        	; void __fastcall far_load_palette( unsigned char palette<_al>, unsigned char num_palettes<_ah> );
  564                        	
  565    18:D2FA             			.proc	_load_palette.3
  566    18:D2FA             			.alias	_far_load_palette.2	= _load_palette.3
  567                        	
  568    18:D2FA  AC 55 26   			ldy	color_queue_w		; Get the queue's write index.
  569                        	
  570    18:D2FD  A5 EC      			lda.l	<_bp			; Add this set of palettes to
  571    18:D2FF  99 66 26   			sta	color_addr_l, y		; the queue.
  572    18:D302  A5 ED      			lda.h	<_bp
  573    18:D304  99 6E 26   			sta	color_addr_h, y
  574    18:D307  A5 02      			lda	<_bp_bank
  575    18:D309  99 76 26   			sta	color_bank, y
  576    18:D30C  A5 F8      			lda	<_al
  577    18:D30E  99 56 26   			sta	color_index, y
  578    18:D311  A5 F9      			lda	<_ah
  579    18:D313  99 5E 26   			sta	color_count, y
  580                        	
  581    18:D316  C8         			iny				; Increment the queue index.
  582    18:D317  98         			tya
  583    18:D318  29 07      			and	#7
  584                        	
  585    18:D31A  CD 54 26   	.wait:		cmp	color_queue_r		; If the queue is full, wait
  586    18:D31D  F0 FB      			beq	.wait			; for the next VBLANK.
  587                        	
  588    18:D31F  8D 55 26   			sta	color_queue_w		; Signal item is in the queue.
  589                        	
  590                        			leave				; All done, phew!
         18:D322  4C EF FF   			jmp	leave_proc
  591                        	
  592                        			.endp
  593                        	
  594                        	
  595                        	
  596               0000     		.if	0
  620                        		.endif
  621                        	
  622                        	
  623                        	
  624                        	; ***************************************************************************
  625                        	; ***************************************************************************
  626                        	;
  627                        	; void __fastcall load_background( unsigned char __far *tiles<_bp_bank:_bp>, unsigned char __far *palettes<__fbank:__fptr>, unsigned char __far *bat<_cl:_bx>, unsigned char w<_dl>, unsigned char w<_dh> );
  628                        	
  629                        			.proc	_load_background.5
  667                        			.endp
  668                        	
  669                        	
  670                        	
  671                        	; ***************************************************************************
  672                        	; ***************************************************************************
  673                        	;
  674                        	; void __fastcall vram2vram( unsigned int vram_dst<_ax>, unsigned int vram_src<_bx>, unsigned int word_len<_cx> );
  675                        	; void __fastcall sgx_vram2vram( unsigned int vram_dst<_ax>, unsigned int vram_src<_bx>, unsigned int word_len<_cx> );
  676                        	;
  677                        	
  678               0001     		.if	SUPPORT_SGX
  679                        			.proc	_sgx_vram2vram.3
  685                        			.endp
  686                        		.endif
  687                        	
  688    18:D253             			.proc	_vram2vram.3
  689                        	
  690    18:D253  82         			clx				; Offset to PCE VDC.
  691                        	
  692    18:D254  08         			php
  693    18:D255  78         			sei
  694    18:D256  A9 11      			lda	#VDC_DESR
  695    18:D258  9D 00 02   			sta	VDC_AR, x
  696    18:D25B  A5 F8      			lda.l	<_ax
  697    18:D25D  9D 02 02   			sta	VDC_DL, x
  698    18:D260  A5 F9      			lda.h	<_ax
  699    18:D262  9D 03 02   			sta	VDC_DH, x
  700                        	
  701    18:D265  A9 10      			lda	#VDC_SOUR
  702    18:D267  9D 00 02   			sta	VDC_AR, x
  703    18:D26A  A5 FA      			lda.l	<_bx
  704    18:D26C  9D 02 02   			sta	VDC_DL, x
  705    18:D26F  A5 FB      			lda.h	<_bx
  706    18:D271  9D 03 02   			sta	VDC_DH, x
  707                        	
  708    18:D274  A9 12      			lda	#VDC_LENR
  709    18:D276  9D 00 02   			sta	VDC_AR, x
  710    18:D279  18         			clc
  711    18:D27A  A5 FC      			lda.l	<_cx
  712    18:D27C  69 FF      			adc	#$FF
  713    18:D27E  9D 02 02   			sta	VDC_DL, x
  714    18:D281  A5 FD      			lda.h	<_cx
  715    18:D283  69 FF      			adc	#$FF
  716    18:D285  9D 03 02   			sta	VDC_DH, x
  717                        	
  718    18:D288  B5 F7      			lda	<vdc_reg, x
  719    18:D28A  8D 00 02   			sta	VDC_AR
  720    18:D28D  28         			plp
  721                        	
  722                        			leave
         18:D28E  4C EF FF   			jmp	leave_proc
  723                        	
  724                        			.endp
  725                        	
  726                        	
  727                        	
  728                        	; ***************************************************************************
  729                        	; ***************************************************************************
  730                        	;
  731                        	; HuC Font Functions
  732                        	;
  733                        	; ***************************************************************************
  734                        	; ***************************************************************************
  735                        	
  736                        	
  737                        	
  738               269E     			.bss
  739                        	
  740                        	; **************
  741                        	; 16-bytes of VDC BAT information.
  742                        	;
  743                        	; N.B. MUST be 16-bytes before the SGX versions to use PCE_VDC_OFFSET.
  744                        	
  745    F8:269E             	_vdc_font_base:	ds	2	; Tile number of ASCII '\0'.
  746                        	
  747                        	; From hucc-printf.asm just to avoid wasting .bss space with padding.
  748    F8:26A0             	_vdc_tty_x_lhs:	ds	1	; TTY minimum X position.
  749    F8:26A1             	_vdc_tty_y_top:	ds	1	; TTY minimum Y position.
  750    F8:26A2             	_vdc_tty_x:	ds	1	; TTY current X position.
  751    F8:26A3             	_vdc_tty_y:	ds	1	; TTY current Y position.
  752                        	
  753               0001     		.if	SUPPORT_SGX
  754                        	
  755                        	; **************
  756                        	; 16-bytes of SGX BAT information.
  757                        	;
  758                        	; N.B. MUST be 16-bytes after the VDC versions to use SGX_VDC_OFFSET.
  759                        	
  760    F8:26A4             			ds	10	; Padding to ensure the 16-byte delta.
  761                        	
  762    F8:26AE             	_sgx_font_base:	ds	2	; Tile number of ASCII '\0'.
  763                        	
  764                        	; From hucc-printf.asm just to avoid wasting .bss space with padding.
  765    F8:26B0             	_sgx_tty_x_lhs:	ds	1	; TTY minimum X position.
  766    F8:26B1             	_sgx_tty_y_top:	ds	1	; TTY minimum Y position.
  767    F8:26B2             	_sgx_tty_x:	ds	1	; TTY current X position.
  768    F8:26B3             	_sgx_tty_y:	ds	1	; TTY current Y position.
  769                        	
  770                        		.endif
  771                        	
  772                        	;_font_base	.alias	vdc_font_base
  773                        	
  774               E5DF     			.code
  775                        	
  776                        	
  777                        	
  778                        	; ***************************************************************************
  779                        	; ***************************************************************************
  780                        	;
  781                        	; void __fastcall set_font_addr( unsigned int vram<acc> );
  782                        	; void __fastcall sgx_set_font_addr( unsigned int vram<acc> );
  783                        	
  784               0001     		.if	SUPPORT_SGX
  785    00:E5DF             	_sgx_set_font_addr.1:
  786    00:E5DF  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  787    00:E5E1  F0         			db	$F0			; Turn "clx" into a "beq".
  788                        		.endif
  789                        	
  790    00:E5E2             	_set_font_addr.1:
  791    00:E5E2  82         			clx				; Offset to PCE VDC.
  792                        	
  793    00:E5E3  84 00      	set_font_addr:	sty	<__temp
  794    00:E5E5  46 00      			lsr	<__temp
  795    00:E5E7  6A         			ror	a
  796    00:E5E8  46 00      			lsr	<__temp
  797    00:E5EA  6A         			ror	a
  798    00:E5EB  46 00      			lsr	<__temp
  799    00:E5ED  6A         			ror	a
  800    00:E5EE  46 00      			lsr	<__temp
  801    00:E5F0  6A         			ror	a
  802    00:E5F1  38         			sec
  803    00:E5F2  E9 20      			sbc	#$20
  804    00:E5F4  9D 9E 26   			sta.l	_vdc_font_base,x
  805    00:E5F7  B0 02      			bcs	!+
  806    00:E5F9  C6 00      			dec	<__temp
  807                        	
  808    00:E5FB  BD 9F 26   	!:		lda.h	_vdc_font_base, x
  809    00:E5FE  29 F0      			and	#$F0
  810    00:E600  05 00      			ora	<__temp
  811    00:E602  9D 9F 26   			sta.h	_vdc_font_base, x
  812    00:E605  60         			rts
  813                        	
  814                        	
  815                        	
  816                        	; ***************************************************************************
  817                        	; ***************************************************************************
  818                        	;
  819                        	; void __fastcall set_font_pal( unsigned char palette<acc> );
  820                        	; void __fastcall sgx_set_font_pal( unsigned char palette<acc> );
  821                        	
  822               0001     		.if	SUPPORT_SGX
  823    00:E606             	_sgx_set_font_pal.1:
  824    00:E606  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  825    00:E608  F0         			db	$F0			; Turn "clx" into a "beq".
  826                        		.endif
  827                        	
  828    00:E609             	_set_font_pal:					; For compatibility with HuC.
  829    00:E609             	_set_font_pal.1:
  830    00:E609  82         			clx				; Offset to PCE VDC.
  831    00:E60A  0A         			asl	a
  832    00:E60B  0A         			asl	a
  833    00:E60C  0A         			asl	a
  834    00:E60D  0A         			asl	a
  835    00:E60E  85 00      			sta	<__temp
  836                        	
  837    00:E610  BD 9F 26   			lda.h	_vdc_font_base, x
  838    00:E613  29 0F      			and	#$0F
  839    00:E615  05 00      			ora	<__temp
  840    00:E617  9D 9F 26   			sta.h	_vdc_font_base, x
  841    00:E61A  60         			rts
  842                        	
  843                        	
  844                        	
  845                        	; ***************************************************************************
  846                        	; ***************************************************************************
  847                        	;
  848                        	; void __fastcall load_font( char far *font<_bp_bank:_bp>, unsigned char count<_al> );
  849                        	;
  850                        	; void __fastcall load_font( char far *font<_bp_bank:_bp>, unsigned char count<_al>, unsigned int vram<acc> );
  851                        	; void __fastcall sgx_load_font( char far *font<_bp_bank:_bp>, unsigned char count<_al>, unsigned int vram<acc> );
  852                        	;
  853                        	; void __fastcall far_load_font( unsigned char count<_al>, unsigned int vram<acc> );
  854                        	; void __fastcall sgx_far_load_font( unsigned char count<_al>, unsigned int vram<acc> );
  855                        	
  856    00:E61B  AC 82 26   	_load_font.2:	ldy	vdc_bat_limit		; Load the font directly
  857    00:E61E  C8         			iny				; after the BAT (stupid!).
  858    00:E61F  62         			cla
  859    00:E620  80 03      			bra	_load_font.3
  860                        	
  861               0001     		.if	SUPPORT_SGX
  862    00:E622             	_sgx_load_font.3:
  863    00:E622  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  864    00:E624  F0         			db	$F0			; Turn "clx" into a "beq".
  865                        		.endif
  866                        	
  867    00:E625  82         	_load_font.3:	clx				; Offset to PCE VDC.
  868                        	
  869    00:E626  85 F0      			sta.l	<_di			; Load the font directly
  870    00:E628  84 F1      			sty.h	<_di			; after the BAT (stupid!).
  871                        	
  872    00:E62A  20 E3 E5   			jsr	set_font_addr		; Set xxx_font_base from addr.
  873                        	
  874    00:E62D  A5 F8      			lda	<__al			; Convert #tiles into #words.
  875    00:E62F  64 F9      			stz	<__ah
  876    00:E631  0A         			asl	a
  877    00:E632  26 F9      			rol	<__ah
  878    00:E634  0A         			asl	a
  879    00:E635  26 F9      			rol	<__ah
  880    00:E637  0A         			asl	a
  881    00:E638  26 F9      			rol	<__ah
  882    00:E63A  0A         			asl	a
  883    00:E63B  26 F9      			rol	<__ah
  884    00:E63D  85 F8      			sta	<__al
  885    00:E63F  4C 4F FF   			jmp	load_vram_x
  886                        	
  887    00:E642             			.alias	_far_load_font.2	= _load_font.3
  888    00:E642             			.alias	_sgx_far_load_font.2	= _sgx_load_font.3
  889                        	
  890                        	
  891                        	
  892                        	; ***************************************************************************
  893                        	; ***************************************************************************
  894                        	;
  895                        	; void __fastcall cls();
  896                        	; void __fastcall sgx_cls();
  897                        	;
  898                        	; void __fastcall cls( int tile<acc> );
  899                        	; void __fastcall sgx_cls( int tile<acc> );
  900                        	
  901               0001     		.if	SUPPORT_SGX
  902    00:E642  A2 10      	_sgx_cls:	ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  903    00:E644  F0         			db	$F0			; Turn "clx" into a "beq".
  904                        		.endif
  905                        	
  906    00:E645  82         	_cls:		clx				; Offset to PCE VDC.
  907                        	
  908    00:E646  BD 9E 26   	clear_tty_x:	lda.l	_vdc_font_base, x
  909    00:E649  BC 9F 26   			ldy.h	_vdc_font_base, x
  910    00:E64C  18         			clc
  911    00:E64D  69 20      			adc	#' '
  912    00:E64F  90 07      			bcc	!+
  913    00:E651  C8         			iny
  914    00:E652  80 04      			bra	!+
  915                        	
  916               0001     		.if	SUPPORT_SGX
  917    00:E654  A2 10      	_sgx_cls.1:	ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  918    00:E656  F0         			db	$F0			; Turn "clx" into a "beq".
  919                        		.endif
  920                        	
  921    00:E657  82         	_cls.1:		clx
  922                        	
  923    00:E658  85 F8      	!:		sta.l	<_ax			; VRAM word to write.
  924    00:E65A  84 F9      			sty.h	<_ax
  925    00:E65C  BD 82 26   			lda	vdc_bat_limit, x	; BAT size hi-byte.
  926    00:E65F  1A         			inc	a
  927    00:E660  85 FA      			sta	<_bl
  928    00:E662  4C B5 FD   			jmp	clear_bat_x
  929                        	
  930                        	
  931                        	
  932                        	; ***************************************************************************
  933                        	; ***************************************************************************
  934                        	;
  935                        	; void __fastcall __macro load_default_font( void );
  936                        	; void __fastcall __macro sgx_load_default_font( void );
  937                        	;
  938                        	; Args: _bp, _bp_bank = _farptr to font data mapped into MPR3 & MPR4.
  939                        	; Args: _di = VRAM destination address.
  940                        	; Args: monofont_fg = font color (0..15)
  941                        	; Args: monofont_bg = background color (0..15)
  942                        	; Args: _al = number of tiles (aka characters) 0==256
  943                        	
  944    02:CDED             	huc_monofont_x	.proc
  945                        	
  946               26B4     			.bss
  947    F8:26B4             	monofont_fg:	.ds	1
  948    F8:26B5             	monofont_bg:	.ds	1
  949               CDED     			.code
  950                        	
  951    02:CDED  BC 82 26   			ldy	vdc_bat_limit, x	; BAT limit mask hi-byte.
  952    02:CDF0  C8         			iny
  953    02:CDF1  62         			cla
  954    02:CDF2  85 F0      			sta.l	<_di			; Load the font directly
  955    02:CDF4  84 F1      			sty.h	<_di			; after the BAT (stupid!).
  956                        	
  957    02:CDF6  20 E3 E5   			jsr	set_font_addr		; Set xxx_font_base from addr.
  958                        	
  959    02:CDF9  A9 7D      			lda.l	#.font
  960    02:CDFB  85 EC      			sta.l	<_bp
  961    02:CDFD  A9 CE      			lda.h	#.font
  962    02:CDFF  85 ED      			sta.h	<_bp
  963                        	
  964    02:CE01  A9 60      			lda	#$60			; #characters.
  965    02:CE03  85 F8      			sta	<_al
  966                        	
  967    02:CE05  20 7F E3   			jsr	set_di_to_mawr
  968                        	
  969    02:CE08  AD B4 26   			lda	monofont_fg		; Foreground pixel color.
  970    02:CE0B  85 00      			sta	<__temp
  971    02:CE0D  AD B5 26   			lda	monofont_bg		; Background pixel color.
  972    02:CE10  DA         			phx
  973    02:CE11  A2 FC      			ldx.l	#_cx			; Create a bit mask for each
  974    02:CE13  9E 00 20   	.bg_loop:	stz	$2000, x		; plane of the background.
  975    02:CE16  4A         			lsr	a
  976    02:CE17  90 03      			bcc	.bg_plane
  977    02:CE19  DE 00 20   			dec	$2000, x
  978    02:CE1C  E8         	.bg_plane:	inx
  979    02:CE1D  D0 F4      			bne	.bg_loop
  980    02:CE1F  FA         			plx
  981                        	
  982    02:CE20  C2         	.tile_loop:	cly
  983                        	
  984    02:CE21  B1 EC      	.plane01:	lda	[_bp], y		; Get font byte.
  985    02:CE23  8F 00 06   			bbs0	<__temp, .set_plane0
  986    02:CE26  49 FF      	.clr_plane0:	eor	#$FF			; Clr font bits in background.
  987    02:CE28  25 FC      			and	<_cx + 0
  988    02:CE2A  80 02      			bra	.put_plane0
  989    02:CE2C  05 FC      	.set_plane0:	ora	<_cx + 0		; Set font bits in background.
  990    02:CE2E  9D 02 02   	.put_plane0:	sta	VDC_DL, x
  991                        	
  992    02:CE31  B1 EC      			lda	[_bp], y		; Get font byte.
  993    02:CE33  9F 00 06   			bbs1	<__temp, .set_plane1
  994    02:CE36  49 FF      	.clr_plane1:	eor	#$FF			; Clr font bits in background.
  995    02:CE38  25 FD      			and	<_cx + 1
  996    02:CE3A  80 02      			bra	.put_plane1
  997    02:CE3C  05 FD      	.set_plane1:	ora	<_cx + 1		; Set font bits in background.
  998    02:CE3E  9D 03 02   	.put_plane1:	sta	VDC_DH, x
  999                        	
 1000    02:CE41  C8         			iny
 1001    02:CE42  C0 08      			cpy	#8
 1002    02:CE44  90 DB      			bcc	.plane01
 1003                        	
 1004    02:CE46  C2         			cly
 1005                        	
 1006    02:CE47  B1 EC      	.plane23:	lda	[_bp], y		; Get font byte.
 1007    02:CE49  AF 00 06   			bbs2	<__temp, .set_plane2
 1008    02:CE4C  49 FF      	.clr_plane2:	eor	#$FF			; Clr font bits in background.
 1009    02:CE4E  25 FE      			and	<_cx + 2
 1010    02:CE50  80 02      			bra	.put_plane2
 1011    02:CE52  05 FE      	.set_plane2:	ora	<_cx + 2		; Set font bits in background.
 1012    02:CE54  9D 02 02   	.put_plane2:	sta	VDC_DL, x
 1013                        	
 1014    02:CE57  B1 EC      			lda	[_bp], y		; Get font byte.
 1015    02:CE59  BF 00 06   			bbs3	<__temp, .set_plane3
 1016    02:CE5C  49 FF      	.clr_plane3:	eor	#$FF			; Clr font bits in background.
 1017    02:CE5E  25 FF      			and	<_cx + 3
 1018    02:CE60  80 02      			bra	.put_plane3
 1019    02:CE62  05 FF      	.set_plane3:	ora	<_cx + 3		; Set font bits in background.
 1020    02:CE64  9D 03 02   	.put_plane3:	sta	VDC_DH, x
 1021                        	
 1022    02:CE67  C8         			iny
 1023    02:CE68  C0 08      			cpy	#8
 1024    02:CE6A  90 DB      			bcc	.plane23
 1025                        	
 1026    02:CE6C  A5 EC      			lda.l	<_bp
 1027    02:CE6E  69 07      			adc	#8-1
 1028    02:CE70  85 EC      			sta.l	<_bp
 1029    02:CE72  90 02      			bcc	!+
 1030    02:CE74  E6 ED      			inc.h	<_bp
 1031                        	
 1032    02:CE76  C6 F8      	!:		dec	<_al
 1033    02:CE78  D0 A6      			bne	.tile_loop
 1034                        	
 1035                        			leave				; All done, phew!
         02:CE7A  4C EF FF   			jmp	leave_proc
 1036                        	
 1037    02:CE7D             	.font:		incbin	"data/font8x8-bold-short-iso646-fr.dat", 128
 1038                        	
 1039                        			.endp
 1040                        	
 1041                        	
 1042                        	
 1043                        	; ***************************************************************************
 1044                        	; ***************************************************************************
 1045                        	;
 1046                        	; HuC Text Output
 1047                        	;
 1048                        	; ***************************************************************************
 1049                        	; ***************************************************************************
 1050                        	
 1051                        	
 1052                        	
 1053    18:CCAB             	vdc_tty_out	.procgroup			; These routines share code!
 1054                        	
 1055                        	; ***************************************************************************
 1056                        	; ***************************************************************************
 1057                        	;
 1058                        	; void __fastcall put_char( unsigned char digit<_bl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
 1059                        	
 1060               0001     		.if	SUPPORT_SGX
 1061                        	put_char_sgx	.proc
 1067                        			.endp
 1068                        		.endif
 1069                        	
 1070    18:CCAB             	put_char_vdc	.proc
 1071                        	
 1072    18:CCAB  82         			clx				; Offset to PCE VDC.
 1073                        	
 1074    18:CCAC  20 34 E4   			jsr	set_di_xy_mawr
 1075                        	
 1076    18:CCAF  62         			cla				; Push EOL marker.
 1077    18:CCB0  48         			pha
 1078                        	
 1079    18:CCB1  A5 FA      			lda	<_bl
 1080    18:CCB3  48         			pha				; Push character to output.
 1081    18:CCB4  80 58      			bra	!output+
 1082                        	
 1083    18:CCB6             			.ref	put_hex_vdc		; Need put_number_vdc
 1084                        			.endp
 1085                        	
 1086    18:CCB6             			.alias	_put_char.3		= put_char_vdc
 1087                        	
 1088                        	
 1089                        	
 1090                        	; ***************************************************************************
 1091                        	; ***************************************************************************
 1092                        	;
 1093                        	; void __fastcall put_digit( unsigned char digit<_bl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
 1094                        	
 1095               0001     		.if	SUPPORT_SGX
 1096                        	put_digit_sgx	.proc
 1102                        			.endp
 1103                        		.endif
 1104                        	
 1105    18:CCB6             	put_digit_vdc	.proc
 1106                        	
 1107    18:CCB6  82         			clx				; Offset to PCE VDC.
 1108                        	
 1109    18:CCB7  20 34 E4   			jsr	set_di_xy_mawr
 1110                        	
 1111    18:CCBA  62         			cla				; Push EOL marker.
 1112    18:CCBB  48         			pha
 1113                        	
 1114    18:CCBC  A5 FA      			lda	<_bl			; Convert hex digit to ASCII.
 1115    18:CCBE  29 0F      			and	#$0F
 1116    18:CCC0  C9 0A      			cmp	#10
 1117    18:CCC2  90 02      			bcc	!+
 1118    18:CCC4  69 06      			adc	#6
 1119    18:CCC6  69 30      	!:		adc	#'0'
 1120    18:CCC8  48         			pha				; Push character to output.
 1121    18:CCC9  80 43      			bra	!output+
 1122                        	
 1123    18:CCCB             			.ref	put_hex_vdc		; Need put_number_vdc
 1124                        			.endp
 1125                        	
 1126    18:CCCB             			.alias	_put_digit.3		= put_digit_vdc
 1127                        	
 1128                        	
 1129                        	
 1130                        	; ***************************************************************************
 1131                        	; ***************************************************************************
 1132                        	;
 1133                        	; void __fastcall put_hex( unsigned int number<_bx>, unsigned char length<_cl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
 1134                        	
 1135               0001     		.if	SUPPORT_SGX
 1136                        	put_hex_sgx	.proc
 1141                        			.endp
 1142                        		.endif
 1143                        	
 1144    18:CCCB             	put_hex_vdc	.proc
 1145                        	
 1146    18:CCCB  82         			clx				; Offset to PCE VDC.
 1147                        	
 1148    18:CCCC  20 34 E4   			jsr	set_di_xy_mawr
 1149                        	
 1150    18:CCCF  A4 FC      			ldy	<_cl			; Total #characters to print,
 1151    18:CCD1  F0 3E      			beq	!exit+			; NOT minimum #characters!
 1152                        	
 1153    18:CCD3  86 00      			stx	<__temp			; Preserve which VDC.
 1154                        	
 1155    18:CCD5  82         			clx				; Push EOL marker.
 1156    18:CCD6  DA         			phx
 1157                        	
 1158    18:CCD7  B5 FA      	.hex_byte:	lda.l	<_bx, x			; Convert hex digit to ASCII.
 1159    18:CCD9  29 0F      			and	#$0F
 1160    18:CCDB  C9 0A      			cmp	#10
 1161    18:CCDD  90 02      			bcc	!+
 1162    18:CCDF  69 06      			adc	#6
 1163    18:CCE1  69 30      	!:		adc	#'0'
 1164    18:CCE3  48         			pha				; Push character to output.
 1165    18:CCE4  88         			dey
 1166    18:CCE5  F0 15      			beq	.hex_done
 1167                        	
 1168    18:CCE7  B5 FA      			lda.l	<_bx, x			; Convert hex digit to ASCII.
 1169    18:CCE9  4A         			lsr	a
 1170    18:CCEA  4A         			lsr	a
 1171    18:CCEB  4A         			lsr	a
 1172    18:CCEC  4A         			lsr	a
 1173    18:CCED  C9 0A      			cmp	#10
 1174    18:CCEF  90 02      			bcc	!+
 1175    18:CCF1  69 06      			adc	#6
 1176    18:CCF3  69 30      	!:		adc	#'0'
 1177    18:CCF5  48         			pha				; Push character to output.
 1178    18:CCF6  88         			dey
 1179    18:CCF7  F0 03      			beq	.hex_done
 1180                        	
 1181    18:CCF9  E8         			inx
 1182    18:CCFA  80 DB      			bra	.hex_byte
 1183                        	
 1184    18:CCFC  A6 00      	.hex_done:	ldx	<__temp			; Restore which VDC.
 1185    18:CCFE  80 0E      			bra	!output+
 1186                        	
 1187    18:CD00  18         	.write:		clc
 1188    18:CD01  7D 9E 26   			adc.l	_vdc_font_base, x
 1189    18:CD04  9D 02 02   			sta	VDC_DL, x
 1190    18:CD07  62         			cla
 1191    18:CD08  7D 9F 26   			adc.h	_vdc_font_base, x
 1192    18:CD0B  9D 03 02   			sta	VDC_DH, x
 1193                        	
 1194    18:CD0E  68         	!output:	pla				; Pop the digits and output.
 1195    18:CD0F  D0 EF      			bne	.write
 1196                        	
 1197                        	!exit:		leave				; All done!
         18:CD11  4C EF FF   			jmp	leave_proc
 1198                        	
 1199                        			.endp
 1200                        	
 1201    18:CD14             			.alias	_put_hex.4 = put_hex_vdc
 1202                        	
 1203                        	
 1204                        	
 1205                        	; ***************************************************************************
 1206                        	; ***************************************************************************
 1207                        	;
 1208                        	; void __fastcall put_number( unsigned int number<_bx>, unsigned char length<_cl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
 1209                        	
 1210               0001     		.if	SUPPORT_SGX
 1211                        	put_number_sgx	.proc
 1216                        			.endp
 1217                        		.endif
 1218                        	
 1219    18:CD14             	put_number_vdc	.proc
 1220                        	
 1221    18:CD14  82         			clx				; Offset to PCE VDC.
 1222                        	
 1223    18:CD15  20 34 E4   			jsr	set_di_xy_mawr
 1224                        	
 1225    18:CD18  A4 FC      			ldy	<_cl			; Total #characters to print,
 1226    18:CD1A  F0 F5      			beq	!exit-			; NOT minimum #characters!
 1227                        	
 1228    18:CD1C  86 00      			stx	<__temp			; Preserve which VDC.
 1229                        	
 1230    18:CD1E  82         			clx				; Push EOL marker.
 1231    18:CD1F  DA         			phx
 1232                        	
 1233    18:CD20  A6 FB      			ldx.h	<_bx			; Is the number -ve?
 1234    18:CD22  86 FC      			stx	<_cl			; Remember this.
 1235    18:CD24  10 10      			bpl	.divide_by_ten
 1236                        	
 1237    18:CD26  38         			sec				; Make the number +ve.
 1238    18:CD27  A5 FA      			lda.l	<_bx
 1239    18:CD29  49 FF      			eor	#$FF
 1240    18:CD2B  69 00      			adc	#0
 1241    18:CD2D  85 FA      			sta.l	<_bx
 1242    18:CD2F  8A         			txa
 1243    18:CD30  49 FF      			eor	#$FF
 1244    18:CD32  69 00      			adc	#0
 1245    18:CD34  85 FB      			sta.h	<_bx
 1246                        	
 1247    18:CD36  A2 10      	.divide_by_ten:	ldx	#16
 1248    18:CD38  62         			cla				; Clear Remainder.
 1249    18:CD39  06 FA      			asl.l	<_bx			; Rotate Dividend, MSB -> C.
 1250    18:CD3B  26 FB      			rol.h	<_bx
 1251    18:CD3D  2A         	.divide_loop:	rol	a			; Rotate C into Remainder.
 1252    18:CD3E  C9 0A      			cmp	#10			; Test Divisor.
 1253    18:CD40  90 02      			bcc	.divide_less		; CC if Divisor > Remainder.
 1254    18:CD42  E9 0A      			sbc	#10			; Subtract Divisor.
 1255    18:CD44  26 FA      	.divide_less:	rol.l	<_bx			; Quotient bit -> Dividend LSB.
 1256    18:CD46  26 FB      			rol.h	<_bx			; Rotate Dividend, MSB -> C.
 1257    18:CD48  CA         			dex
 1258    18:CD49  D0 F2      			bne	.divide_loop
 1259                        	
 1260    18:CD4B  18         			clc
 1261    18:CD4C  69 30      			adc	#'0'			; Always leaves C clr.
 1262    18:CD4E  48         			pha				; Push character to output.
 1263    18:CD4F  88         			dey
 1264    18:CD50  F0 10      			beq	!pad+
 1265    18:CD52  A5 FA      			lda.l	<_bx			; Repeat while non-zero.
 1266    18:CD54  05 FB      			ora.h	<_bx
 1267    18:CD56  D0 DE      			bne	.divide_by_ten
 1268                        	
 1269    18:CD58  A6 00      			ldx	<__temp			; Restore which VDC.
 1270                        	
 1271    18:CD5A  A5 FC      			lda	<_cl			; Was the number -ve?
 1272    18:CD5C  10 04      			bpl	!pad+
 1273    18:CD5E  A9 2D      			lda	#'-'			; Output a leading '-'.
 1274    18:CD60  48         			pha
 1275    18:CD61  88         			dey
 1276                        	
 1277    18:CD62  A9 20      	!pad:		lda	#' '			; Add padding characters.
 1278    18:CD64  88         	.loop:		dey
 1279    18:CD65  30 A7      			bmi	!output-
 1280    18:CD67  48         			pha
 1281    18:CD68  80 FA      			bra	.loop
 1282                        	
 1283    18:CD6A             			.ref	put_hex_vdc		; Need put_number_vdc
 1284                        	
 1285                        			.endp
 1286                        	
 1287    18:CD6A             			.alias	_put_number.4 = put_number_vdc
 1288                        	
 1289                        	
 1290                        	
 1291                        	; ***************************************************************************
 1292                        	; ***************************************************************************
 1293                        	;
 1294                        	; void __fastcall put_raw( unsigned int data<_bx>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
 1295                        	
 1296               0001     		.if	SUPPORT_SGX
 1297                        	put_raw_sgx	.proc
 1302                        			.endp
 1303                        		.endif
 1304                        	
 1305                        	put_raw_vdc	.proc
 1318                        			.endp
 1319                        	
 1320    18:CD6A             			.alias	_put_raw.3		= put_raw_vdc
 1321                        	
 1322                        			.endprocgroup			; vdc_tty_out
 1323                        	
 1324                        	
 1325                        	
 1326                        	; ***************************************************************************
 1327                        	; ***************************************************************************
 1328                        	;
 1329                        	; void __fastcall put_string( unsigned char *string<_bp>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
 1330                        	;
 1331                        	; N.B. This is not a .proc right now because it is called from procedures
 1332                        	; that contain embedded strings, and the string aren't banked in before
 1333                        	; printing (yet).
 1334                        	
 1335               0001     		.if	SUPPORT_SGX
 1336    00:E665             	_sgx_put_string.3:
 1337    00:E665  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
 1338    00:E667  F0         			db	$F0			; Turn "clx" into a "beq".
 1339                        		.endif
 1340                        	
 1341    00:E668  82         	_put_string.3:	clx				; Offset to PCE VDC.
 1342                        	
 1343    00:E669  20 34 E4   			jsr	set_di_xy_mawr
 1344                        	
 1345    00:E66C  C2         			cly
 1346    00:E66D  B1 EC      	.chr_loop:	lda	[_bp], y
 1347    00:E66F  F0 15      			beq	.done
 1348                        	
 1349    00:E671  18         			clc
 1350    00:E672  7D 9E 26   			adc.l	_vdc_font_base, x
 1351    00:E675  9D 02 02   			sta	VDC_DL, x
 1352    00:E678  62         			cla
 1353    00:E679  7D 9F 26   			adc.h	_vdc_font_base, x
 1354    00:E67C  9D 03 02   			sta	VDC_DH, x
 1355                        	
 1356    00:E67F  C8         			iny
 1357    00:E680  D0 EB      			bne	.chr_loop
 1358    00:E682  E6 ED      			inc.h	<_bp
 1359    00:E684  80 E7      			bra	.chr_loop
 1360                        	
 1361    00:E686  60         	.done:		rts
 1362                        	
 1363                        	
 1364                        	
 1365                        	; ***************************************************************************
 1366                        	; ***************************************************************************
 1367                        	;
 1368                        	; void __fastcall set_color_rgb( unsigned int index<VCE_CTA>, unsigned char r<_al>, unsigned char g<_ah>, unsigned char b<acc> );
 1369                        	;
 1370                        	; r:	red	RED:	bit 3-5
 1371                        	; g:	green	GREEN:	bit 6-8
 1372                        	; b:	blue	BLUE:	bit 0-2
 1373                        	
 1374    00:E687             	_set_color_rgb.4:
 1375                        	;		and	#7
 1376    00:E687  85 00      			sta	<__temp
 1377    00:E689  A5 F8      			lda	<_al
 1378                        	;		and	#7
 1379    00:E68B  0A         			asl	a
 1380    00:E68C  0A         			asl	a
 1381    00:E68D  0A         			asl	a
 1382    00:E68E  05 00      			ora	<__temp
 1383    00:E690  0A         			asl	a
 1384    00:E691  0A         			asl	a
 1385    00:E692  85 00      			sta	<__temp
 1386    00:E694  A5 F9      			lda	<_ah
 1387                        	;		and	#7
 1388    00:E696  4A         			lsr	a
 1389    00:E697  66 00      			ror	<__temp
 1390    00:E699  4A         			lsr	a
 1391    00:E69A  66 00      			ror	<__temp
 1392    00:E69C  A8         			tay
 1393    00:E69D  A5 00      			lda	<__temp
 1394    00:E69F  8D 04 04   			sta.l	VCE_CTW
 1395    00:E6A2  8C 05 04   			sty.h	VCE_CTW
 1396    00:E6A5  60         			rts
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   60                        		.endif
   61                        	
   62               0001     		.ifdef	HUCC_USES_STRING		; Set in hucc_string.h
                             #[3]   "..\..\..\include\hucc\hucc-string.asm"
   63                        			include	"hucc-string.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-string.asm
    5                        	;
    6                        	; Not-quite-standard, but fast, replacements for <string.h>.
    7                        	;
    8                        	; Copyright John Brandwood 2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; !!! WARNING : non-standard return values !!!
   18                        	;
   19                        	; Strings are limited to a maximum of 255 characters (+ the terminator)!
   20                        	;
   21                        	; The memcpy(), strcpy() and strcat() functions do NOT return the destination
   22                        	; address, and they are declared "void" to check that the value is not used.
   23                        	;
   24                        	; mempcpy() is provided which returns the end address instead of the starting
   25                        	; address, because this is typically more useful.
   26                        	;
   27                        	; Please note that both memcpy() and memset() are implemented using a TII for
   28                        	; speed, and so the length should be < 16 bytes if used in time-critical bits
   29                        	; of code (such as when using a split screen) because they delay interrupts.
   30                        	;
   31                        	; strncpy() and strncat() are not provided, because strncpy() was not created
   32                        	; for the purpose of avoiding string overruns, and strncat() is just a poorly
   33                        	; designed function.
   34                        	;
   35                        	; POSIX strlcpy() and strlcat() are provided instead, but once again they are
   36                        	; slightly non-standard in that the return value when there is an overflow is
   37                        	; the buffer size (so that the overflow can be detected), instead of the full
   38                        	; size of the destination string that was too big to fit in the buffer.
   39                        	;
   40                        	; ***************************************************************************
   41                        	; ***************************************************************************
   42                        	
   43                        	
   44                        	
   45                        	; ***************************************************************************
   46                        	; ***************************************************************************
   47                        	;
   48                        	; void __fastcall strcpy( char *destination<_di>, char *source<_bp> );
   49                        	; void __fastcall strcat( char *destination<_di>, char *source<_bp> );
   50                        	;
   51                        	; unsigned int __fastcall strlcpy( char *destination<_di>, char *source<_bp>, unsigned char size<acc> );
   52                        	; unsigned int __fastcall strlcat( char *destination<_di>, char *source<_bp>, unsigned char size<acc> );
   53                        	; unsigned int __fastcall strlen( char *source<_bp> );
   54                        	;
   55                        	; NOT WORKING YET (needs compiler changes) ...
   56                        	;
   57                        	; void __fastcall strcpy( char *destination<_di>, char __far *source<_bp_bank:_bp> );
   58                        	; void __fastcall strcat( char *destination<_di>, char __far *source<_bp_bank:_bp> );
   59                        	;
   60                        	; unsigned int __fastcall strlcpy( char *destination<_di>, char __far *source<_bp_bank:_bp>, unsigned char size<acc> );
   61                        	; unsigned int __fastcall strlcat( char *destination<_di>, char __far *source<_bp_bank:_bp>, unsigned char size<acc> );
   62                        	; unsigned int __fastcall strlen( char __far *source<_bp_bank:_bp> );
   63                        	
   64    00:E6A6  62         	_strcat:	cla				; Max string length == 256!
   65    00:E6A7  A0 01      			ldy.h	#256
   66                        	
   67    00:E6A9  AA         	_strlcat:	tax				; X = buffer length (1..256).
   68                        	
   69               0000     		.ifdef	_DEBUG
   74                        		.endif
   75                        	
   76    00:E6AA  43 08      			tma3				; Preserve MPR3 and MPR4.
   77    00:E6AC  48         			pha
   78    00:E6AD  43 10      			tma4
   79    00:E6AF  48         			pha
   80                        	
   81                        	;		ldy	<_bp_bank		; Map the source string.
   82                        	;		beq	.no_bank
   83                        	;		jsr	map_bp_to_mpr34
   84                        	
   85    00:E6B0  C2         	.no_bank:	cly
   86                        	
   87    00:E6B1  B1 F0      	.find:		lda	[_di], y		; Find the end of the string.
   88    00:E6B3  F0 08      			beq	.adjust
   89    00:E6B5  C8         			iny
   90    00:E6B6  CA         			dex
   91    00:E6B7  D0 F8      			bne	.find
   92    00:E6B9  98         			tya				; A:Y = buffer length.
   93    00:E6BA  62         			cla
   94    00:E6BB  80 28      			bra	str_overflow
   95                        	
   96    00:E6BD  98         	.adjust:	tya				; Subtract Y from _bp so that
   97    00:E6BE  49 FF      			eor	#$FF			; _bp and _di use the same Y.
   98    00:E6C0  38         			sec
   99    00:E6C1  65 EC      			adc.l	<_bp
  100    00:E6C3  85 EC      			sta.l	<_bp
  101    00:E6C5  B0 0F      			bcs	str_copy
  102    00:E6C7  C6 ED      			dec.h	<_bp
  103    00:E6C9  80 0B      			bra	str_copy
  104                        	
  105                        			;
  106                        	
  107    00:E6CB  62         	_strcpy:	cla				; Max string length == 256!
  108    00:E6CC  A0 01      			ldy.h	#256
  109                        	
  110    00:E6CE  AA         	_strlcpy:	tax				; X = buffer length (1..256).
  111                        	
  112               0000     		.ifdef	_DEBUG
  117                        		.endif
  118                        	
  119    00:E6CF  43 08      			tma3				; Preserve MPR3 and MPR4.
  120    00:E6D1  48         			pha
  121    00:E6D2  43 10      			tma4
  122    00:E6D4  48         			pha
  123                        	
  124                        	;		ldy	<_bp_bank		; Map the source string.
  125                        	;		beq	.no_bank
  126                        	;		jsr	map_bp_to_mpr34
  127                        	
  128    00:E6D5  C2         	.no_bank:	cly
  129                        	
  130    00:E6D6  B1 EC      	str_copy:	lda	[_bp], y
  131    00:E6D8  91 F0      			sta	[_di], y
  132    00:E6DA  F0 1E      			beq	str_exit		; A:Y = string length.
  133    00:E6DC  C8         			iny
  134    00:E6DD  CA         			dex
  135    00:E6DE  D0 F6      			bne	str_copy
  136                        	
  137    00:E6E0  88         			dey
  138    00:E6E1  62         			cla
  139    00:E6E2  91 F0      			sta	[_di], y
  140    00:E6E4  C8         			iny				; A:Y = buffer length.
  141    00:E6E5  D0 13      	str_overflow:	bne	str_exit
  142    00:E6E7  1A         			inc	a			; A:Y = buffer length = 256.
  143    00:E6E8  80 10      			bra	str_exit
  144                        	
  145                        			;
  146                        	
  147    00:E6EA  43 08      	_strlen:	tma3
  148    00:E6EC  48         			pha
  149    00:E6ED  43 10      			tma4
  150    00:E6EF  48         			pha
  151                        	
  152                        	;		ldy	<_bp_bank
  153                        	;		beq	.no_bank
  154                        	;		jsr	map_bp_to_mpr34
  155                        	
  156    00:E6F0  C2         	.no_bank:	cly
  157                        	
  158    00:E6F1  B1 EC      	.find:		lda	[_bp], y
  159    00:E6F3  F0 05      			beq	str_exit
  160    00:E6F5  C8         			iny
  161    00:E6F6  D0 F9      			bne	.find
  162    00:E6F8  A9 01      			lda.h	#256			; A:Y = overflow length = 256.
  163                        	
  164    00:E6FA  AA         	str_exit:	tax				; X:Y = string or buffer length.
  165                        	
  166    00:E6FB  68         			pla				; Restore MPR3 and MPR4.
  167    00:E6FC  53 10      			tam4
  168    00:E6FE  68         			pla
  169    00:E6FF  53 08      			tam3
  170                        	
  171    00:E701  8A         			txa				; A:Y = string or buffer length.
  172    00:E702  42         			say				; Y:A = string or buffer length.
  173                        	
  174    00:E703  60         			rts
  175                        	
  176    00:E704             			.alias	_strlen.1		= _strlen
  177    00:E704             			.alias	_strcpy.2		= _strcpy
  178    00:E704             			.alias	_strcat.2		= _strcat
  179    00:E704             			.alias	_strlcpy.3		= _strlcpy
  180    00:E704             			.alias	_strlcat.3		= _strlcat
  181                        	
  182                        	
  183                        	
  184                        	; ***************************************************************************
  185                        	; ***************************************************************************
  186                        	;
  187                        	; void __fastcall memcpy( unsigned char *destination<ram_tii_dst>, unsigned char  *source<ram_tii_src>, unsigned int count<acc> );
  188                        	; unsigned char * __fastcall mempcpy( unsigned char *destination<ram_tii_dst>, unsigned char  *source<ram_tii_src>, unsigned int count<acc> );
  189                        	;
  190                        	; void __fastcall farmemcpy( unsigned char *destination<ram_tii_dst>, unsigned char __far *source<_bp_bank:ram_tii_src>, unsigned int count<acc> );
  191                        	; unsigned char * __fastcall farmempcpy( unsigned char *destination<ram_tii_dst>, unsigned char __far *source<_bp_bank:ram_tii_src>, unsigned int count<acc> );
  192                        	;
  193                        	; void __fastcall far_memcpy( unsigned char *destination<ram_tii_dst>, unsigned int count<acc> );
  194                        	; unsigned char * __fastcall far_mempcpy( unsigned char *destination<ram_tii_dst>, unsigned int count<acc> );
  195                        	;
  196                        	
  197    00:E704             	_memcpy.3:
  198    00:E704  64 02      	_mempcpy.3:	stz	<_bp_bank		; Map the source memory.
  199                        	
  200    00:E706             	_farmemcpy.3:
  201    00:E706  8C FE 22   	_farmempcpy.3:	sty.h	ram_tii_len		; Check for zero length.
  202    00:E709  8D FD 22   			sta.l	ram_tii_len
  203    00:E70C  0D FE 22   			ora.h	ram_tii_len
  204    00:E70F  F0 18      			beq	.zero_length
  205                        	
  206    00:E711  43 08      			tma3				; Preserve MPR3 and MPR4.
  207    00:E713  48         			pha
  208    00:E714  43 10      			tma4
  209    00:E716  48         			pha
  210                        	
  211    00:E717  A5 02      			lda	<_bp_bank		; Map the source memory.
  212    00:E719  F0 05      			beq	.no_bank
  213                        	
  214    00:E71B  53 08      			tam3				; Put bank into MPR3.
  215    00:E71D  1A         			inc	a
  216    00:E71E  53 10      			tam4				; Put next into MPR4.
  217                        	
  218                        	;		lda.h	ram_tii_src		; Remap ptr to MPR3.
  219                        	;		and	#$1F
  220                        	;		ora	#$60
  221                        	;		sta.h	ram_tii_src
  222                        	
  223    00:E720  20 F8 22   	.no_bank:	jsr	ram_tii			; Copy the memory.
  224                        	
  225    00:E723  68         			pla				; Restore MPR3 and MPR4.
  226    00:E724  53 10      			tam4
  227    00:E726  68         			pla
  228    00:E727  53 08      			tam3
  229                        	
  230    00:E729  18         	.zero_length:	clc				; Return the end address
  231    00:E72A  AD FB 22   			lda.l	ram_tii_dst		; like mempcpy().
  232    00:E72D  6D FD 22   			adc.l	ram_tii_len
  233    00:E730  A8         			tay
  234    00:E731  AD FC 22   			lda.h	ram_tii_dst
  235    00:E734  6D FE 22   			adc.h	ram_tii_len
  236    00:E737  42         			say
  237                        	
  238    00:E738  60         			rts
  239                        	
  240    00:E739             			.alias	_far_memcpy.2		= _farmemcpy.3
  241    00:E739             			.alias	_far_mempcpy.2		= _farmempcpy.3
  242                        	
  243                        	
  244                        	
  245                        	; ***************************************************************************
  246                        	; ***************************************************************************
  247                        	;
  248                        	; void __fastcall memset( unsigned char *destination<ram_tii_src>, unsigned char value<_al>, unsigned int count<acc> );
  249                        	
  250    00:E739  C9 00      	_memset:	cmp	#0			; Decrement the length, check
  251    00:E73B  D0 05      			bne	!+			; for zero and set C. 
  252    00:E73D  C0 00      			cpy	#0
  253    00:E73F  F0 23      			beq	.zero_length
  254    00:E741  88         			dey
  255    00:E742  3A         	!:		dec	a
  256    00:E743  8D FD 22   			sta.l	ram_tii_len
  257    00:E746  8C FE 22   			sty.h	ram_tii_len
  258                        	
  259    00:E749  AD F9 22   			lda.l	ram_tii_src		; ram_tii_dst = ram_tii_src + 1
  260    00:E74C  85 88      			sta.l	<__ptr
  261    00:E74E  69 00      			adc	#0
  262    00:E750  8D FB 22   			sta.l	ram_tii_dst
  263    00:E753  AD FA 22   			lda.h	ram_tii_src
  264    00:E756  85 89      			sta.h	<__ptr
  265    00:E758  69 00      			adc	#0
  266    00:E75A  8D FC 22   			sta.h	ram_tii_dst
  267                        	
  268    00:E75D  A5 F8      			lda	<_al			; Set the fill value.
  269    00:E75F  92 88      			sta	[__ptr]
  270                        	
  271    00:E761  4C F8 22   			jmp	ram_tii			; Copy the memory.
  272                        	
  273    00:E764  60         	.zero_length:	rts
  274                        	
  275    00:E765             			.alias	_memset.3		= _memset
  276                        	
  277                        	
  278                        	
  279                        	; ***************************************************************************
  280                        	; ***************************************************************************
  281                        	;
  282                        	; int __fastcall strcmp( char *string1<_di>, char *string2<_bp> );
  283                        	; int __fastcall strncmp( char *string1<_di>, char *string2<_bp>, unsigned int count<_ax> );
  284                        	;
  285                        	; int __fastcall __macro memcmp( unsigned char *string1<_di>, unsigned char *string2<_bp>, unsigned int count<_ax> );
  286                        	; int __fastcall farmemcmp( unsigned char *string1<_di>, unsigned char __far *string2<_bp_bank:_bp>, unsigned int count<_ax> );
  287                        	; int __fastcall far_memcmp( unsigned char *string1<_di>, unsigned int count<_ax> );
  288                        	;
  289                        	;  0 	if strings are equal
  290                        	;  1 	if the first non-matching character in string1 > string2 (in ASCII).
  291                        	; -1 	if the first non-matching character in string1 < string2 (in ASCII).
  292                        	
  293    18:D106             	hucc_memcmp	.procgroup
  294                        	
  295                        	_strcmp.2	.proc
  300                        			.endp				; Fall through.
  301                        	
  302    18:D106             	_strncmp.3	.proc
  303    18:D106  64 02      			stz	<_bp_bank		; Assume strings are mapped.
  304    18:D108  89 40      			bit	#$40			; Set the V bit for strcmp.
  305    18:D10A  50         			db	$50			; Turn "clv" into "bvc".
  306    18:D10B             			.ref	_farmemcmp.3		; Don't strip _farmemcmp.3!
  307                        			.endp				; Fall through.
  308                        	
  309    18:D10B             	_farmemcmp.3	.proc
  310    18:D10B  B8         			clv				; Clr the V bit for memcmp.
  311                        	
  312    18:D10C  43 08      			tma3				; Preserve MPR3 and MPR4.
  313    18:D10E  48         			pha
  314    18:D10F  43 10      			tma4
  315    18:D111  48         			pha
  316                        	
  317    18:D112  A4 02      			ldy	<_bp_bank		; Map string2.
  318    18:D114  F0 03      			beq	.no_bank
  319                        	
  320    18:D116  20 3B E3   			jsr	map_bp_to_mpr34
  321                        	
  322    18:D119  C2         	.no_bank:	cly
  323                        	
  324    18:D11A  A6 F8      			ldx.l	<_ax			; Increment length.l
  325    18:D11C  E8         			inx
  326    18:D11D  CA         	.loop:		dex				; Decrement length.l
  327    18:D11E  F0 17      			beq	.page
  328    18:D120  B1 F0      	.test:		lda	[_di], y		; string1 - string2
  329    18:D122  D1 EC      			cmp	[_bp], y
  330    18:D124  90 1E      			bcc	.return_neg		; string1 < string2 
  331    18:D126  D0 17      			bne	.return_pos		; string1 > string2
  332    18:D128  50 04      			bvc	!+			; Only check for end-of-string
  333    18:D12A  C9 00      			cmp	#0			; if the V flag is set.
  334    18:D12C  F0 0D      			beq	.return_same
  335    18:D12E  C8         	!:		iny
  336    18:D12F  D0 EC      			bne	.loop
  337    18:D131  E6 F1      			inc.h	<_di
  338    18:D133  E6 ED      			inc.h	<_bp			; Limited to 8KB maximum!
  339                        	;		jsr	inc.h_bp_mpr34
  340    18:D135  80 E6      			bra	.loop
  341                        	
  342    18:D137  C6 F9      	.page:		dec.h	<_ax			; Decrement length.h 
  343    18:D139  10 E5      			bpl	.test			; Limit comparison to 32KB.
  344                        	;		bra	cmp_same
  345                        	
  346    18:D13B  82         	.return_same:	clx				; Return code in Y:X, X -> A.
  347    18:D13C  C2         			cly
  348    18:D13D  80 09      			bra	!+
  349                        	
  350    18:D13F  A2 01      	.return_pos:	ldx	#$01			; Return code in Y:X, X -> A.
  351    18:D141  C2         			cly
  352    18:D142  80 04      			bra	!+
  353                        	
  354    18:D144  A2 FF      	.return_neg:	ldx	#$FF			; Return code in Y:X, X -> A.
  355    18:D146  A0 FF      			ldy	#$FF
  356                        	
  357    18:D148  68         	!:		pla				; Restore MPR3 and MPR4.
  358    18:D149  53 10      			tam4
  359    18:D14B  68         			pla
  360    18:D14C  53 08      			tam3
  361                        	
  362                        			leave				; Return and copy X -> A.
         18:D14E  4C EF FF   			jmp	leave_proc
  363                        	
  364                        			.endp
  365                        	
  366                        			.endprocgroup			; hucc_memcmp
  367                        	
  368    00:E765             			.alias	_far_memcmp.2		= _farmemcmp.3
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   64                        		.endif
   65                        	
   66               0001     		.ifdef	HUCC_USES_NEW_SCROLL		; Set in hucc_scroll.h
                             #[3]   "..\..\..\include\hucc\hucc-scroll.asm"
   67                        			include	"hucc-scroll.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-scroll.asm
    5                        	;
    6                        	; Routines for a fast split-screen scrolling system.
    7                        	;
    8                        	; Copyright John Brandwood 2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; The maximum number of splits for each screen layer is set in your project's
   18                        	; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
   19                        	;
   20                        	; Your first active split must be defined to start at screen line 0, and then
   21                        	; the rest of the active splits must be in increasing line order to match the
   22                        	; way that the PC Engine displays the output image.
   23                        	;
   24                        	; You can have disabled splits interleaved with your active splits.
   25                        	;
   26                        	; Splits that are normally disabled can be used to create full screen effects
   27                        	; such as bouncing the screen up and down by adding blank areas at the top or
   28                        	; bottom of the screen, and then rapidly changing the height of those areas.
   29                        	;
   30                        	; ***************************************************************************
   31                        	; ***************************************************************************
   32                        	
   33                        	
   34                        	
   35               0000     		.ifndef	HUCC_PCE_SPLITS
   37                        		.endif
   38                        	
   39               0000     		.ifndef	HUCC_SGX_SPLITS
   41                        		.endif
   42                        	
   43               0000     		.if	(HUCC_PCE_SPLITS < 2) || (HUCC_PCE_SPLITS > 128)
   45                        		.endif
   46                        	
   47               0000     		.if	(HUCC_SGX_SPLITS < 2) || (HUCC_SGX_SPLITS > 128)
   49                        		.endif
   50                        	
   51               0144     	HUCC_1ST_RCR	=	$144
   52               00E0     	HUCC_SCR_HEIGHT	=	224
   53                        	
   54               E765     			.code
   55                        	
   56                        	
   57                        	
   58                        	; ***************************************************************************
   59                        	; ***************************************************************************
   60                        	;
   61                        	; void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
   62                        	; void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
   63                        	;
   64                        	; set screen scrolling
   65                        	
   66                        			.proc	_scroll_split.5
  143                        			.endp
  144                        	
  145               0001     		.if	SUPPORT_SGX
  146                        	
  147    18:CE07             			.proc	_sgx_scroll_split.5
  148                        	
  149    18:CE07  08         			php				; Disable interrupts while
  150    18:CE08  78         			sei				; updating this structure.
  151                        	
  152    18:CE09  A6 F8      			ldx	<_al			; Region number.
  153    18:CE0B  E0 08      			cpx	#HUCC_SGX_SPLITS
  154    18:CE0D  B0 FE      	.hang:		bcs	.hang			; Better a hang than a crash!
  155                        	
  156    18:CE0F  BD 37 27   			lda	sgx_region_sel, x	; Update the parameter copy
  157    18:CE12  5D 3F 27   			eor	sgx_region_new, x	; that is not displayed now.
  158    18:CE15  D0 3B      			bne	.regionA
  159                        	
  160    18:CE17  A5 F9      	.regionB:	lda	<_ah			; Scanline (i.e. top).
  161    18:CE19  C9 E0      			cmp	#HUCC_SCR_HEIGHT	; Skip if offscreen.
  162    18:CE1B  B0 31      			bcs	!done+
  163    18:CE1D  9D 5F 27   			sta	sgx_regionB_rcr, x
  164                        	
  165    18:CE20  C9 00      			cmp	#0			; Either Y at top of the frame
  166    18:CE22  F0 01      			beq	!+			; or Y-1 because the RCR code
  167    18:CE24  18         			clc				; sets it on the line before.
  168    18:CE25  A5 FC      	!:		lda.l	<_cx
  169    18:CE27  E9 00      			sbc	#0
  170    18:CE29  9D 8F 27   			sta	sgx_regionB_yl, x
  171    18:CE2C  A5 FD      			lda.h	<_cx
  172    18:CE2E  E9 00      			sbc	#0
  173    18:CE30  9D 9F 27   			sta	sgx_regionB_yh, x
  174                        	
  175    18:CE33  A5 FA      			lda.l	<_bx
  176    18:CE35  9D 6F 27   			sta	sgx_regionB_xl, x
  177    18:CE38  A5 FB      			lda.h	<_bx
  178    18:CE3A  9D 7F 27   			sta	sgx_regionB_xh, x
  179                        	
  180    18:CE3D  A5 FE      			lda	<_dl
  181    18:CE3F  29 C0      			and	#$C0			; Flags (mark it as enabled).
  182    18:CE41  09 0C      			ora	#$0C
  183    18:CE43  9D 4F 27   			sta	sgx_regionB_crl, x
  184                        	
  185    18:CE46  A9 01      			lda	#1			; Mark that we've changed the
  186    18:CE48  9D 3F 27   			sta	sgx_region_new, x	; selected region.
  187    18:CE4B  9D 37 27   			sta	sgx_region_sel, x
  188                        	
  189    18:CE4E  28         	!done:		plp				; Restore interrupts.
  190                        			leave				; All done!
         18:CE4F  4C EF FF   			jmp	leave_proc
  191                        	
  192    18:CE52  A5 F9      	.regionA:	lda	<_ah			; Scanline (i.e. top).
  193    18:CE54  C9 E0      			cmp	#HUCC_SCR_HEIGHT	; Skip if offscreen.
  194    18:CE56  B0 31      			bcs	!done+
  195    18:CE58  9D 57 27   			sta	sgx_regionA_rcr, x
  196                        	
  197    18:CE5B  C9 00      			cmp	#0			; Either Y at top of the frame
  198    18:CE5D  F0 01      			beq	!+			; or Y-1 because the RCR code
  199    18:CE5F  18         			clc				; sets it on the line before.
  200    18:CE60  A5 FC      	!:		lda.l	<_cx
  201    18:CE62  E9 00      			sbc	#0
  202    18:CE64  9D 87 27   			sta	sgx_regionA_yl, x
  203    18:CE67  A5 FD      			lda.h	<_cx
  204    18:CE69  E9 00      			sbc	#0
  205    18:CE6B  9D 97 27   			sta	sgx_regionA_yh, x
  206                        	
  207    18:CE6E  A5 FA      			lda.l	<_bx
  208    18:CE70  9D 67 27   			sta	sgx_regionA_xl, x
  209    18:CE73  A5 FB      			lda.h	<_bx
  210    18:CE75  9D 77 27   			sta	sgx_regionA_xh, x
  211                        	
  212    18:CE78  A5 FE      			lda	<_dl
  213    18:CE7A  29 C0      			and	#$C0			; Flags (mark it as enabled).
  214    18:CE7C  09 0C      			ora	#$0C
  215    18:CE7E  9D 47 27   			sta	sgx_regionA_crl, x
  216                        	
  217    18:CE81  A9 01      			lda	#1			; Mark that we've changed the
  218    18:CE83  9D 3F 27   			sta	sgx_region_new, x	; selected region.
  219    18:CE86  9E 37 27   			stz	sgx_region_sel, x
  220                        	
  221    18:CE89  28         	!done:		plp				; Restore interrupts.
  222                        			leave				; All done!
         18:CE8A  4C EF FF   			jmp	leave_proc
  223                        	
  224                        			.endp
  225                        	
  226                        		.endif	SUPPORT_SGX
  227                        	
  228                        	
  229                        	
  230                        	; ***************************************************************************
  231                        	; ***************************************************************************
  232                        	;
  233                        	; void __fastcall disable_split( unsigned char index<acc> );
  234                        	; void __fastcall sgx_disable_split( unsigned char index<acc> );
  235                        	;
  236                        	; disable screen scrolling for a scroll region
  237                        	
  238    00:E765             	_disable_split.1:
  239    00:E765  08         			php				; Disable interrupts while
  240    00:E766  78         			sei				; updating this structure.
  241                        	
  242    00:E767  C9 08      			cmp	#HUCC_PCE_SPLITS	; Better a hang than a crash!
  243    00:E769  B0 FE      	.hang:		bcs	.hang
  244    00:E76B  AA         			tax
  245                        	
  246    00:E76C  BD B6 26   			lda	vdc_region_sel, x	; Update the parameter copy
  247    00:E76F  5D BE 26   			eor	vdc_region_new, x	; that is not displayed now.
  248    00:E772  D0 0D      			bne	.regionA
  249                        	
  250    00:E774  9E CE 26   	.regionB:	stz	vdc_regionB_crl, x	; Region disabled if $00.
  251                        	
  252    00:E777  A9 01      			lda	#1			; Mark that we've changed the
  253    00:E779  9D BE 26   			sta	vdc_region_new, x	; selected region.
  254    00:E77C  9D B6 26   			sta	vdc_region_sel, x
  255                        	
  256    00:E77F  28         			plp				; Restore interrupts.
  257    00:E780  60         			rts
  258                        	
  259    00:E781  9E C6 26   	.regionA:	stz	vdc_regionA_crl, x	; Region disabled if $00.
  260                        	
  261    00:E784  A9 01      			lda	#1			; Mark that we've changed the
  262    00:E786  9D BE 26   			sta	vdc_region_new, x	; selected region.
  263    00:E789  9E B6 26   			stz	vdc_region_sel, x
  264                        	
  265    00:E78C  28         			plp				; Restore interrupts.
  266    00:E78D  60         			rts
  267                        	
  268               0001     		.if	SUPPORT_SGX
  269                        	
  270    00:E78E             	_sgx_disable_split.1:
  271    00:E78E  08         			php				; Disable interrupts while
  272    00:E78F  78         			sei				; updating this structure.
  273                        	
  274    00:E790  C9 08      			cmp	#HUCC_SGX_SPLITS	; Better a hang than a crash!
  275    00:E792  B0 FE      	.hang:		bcs	.hang
  276    00:E794  AA         			tax
  277                        	
  278    00:E795  BD 37 27   			lda	sgx_region_sel, x	; Update the parameter copy
  279    00:E798  5D 3F 27   			eor	sgx_region_new, x	; that is not displayed now.
  280    00:E79B  D0 0D      			bne	.regionA
  281                        	
  282    00:E79D  9E 4F 27   	.regionB:	stz	sgx_regionB_crl, x	; Region disabled if $00.
  283                        	
  284    00:E7A0  A9 01      			lda	#1			; Mark that we've changed the
  285    00:E7A2  9D 3F 27   			sta	sgx_region_new, x	; selected region.
  286    00:E7A5  9D 37 27   			sta	sgx_region_sel, x
  287                        	
  288    00:E7A8  28         			plp				; Restore interrupts.
  289    00:E7A9  60         			rts
  290                        	
  291    00:E7AA  9E 47 27   	.regionA:	stz	sgx_regionA_crl, x	; Region disabled if $00.
  292                        	
  293    00:E7AD  A9 01      			lda	#1			; Mark that we've changed the
  294    00:E7AF  9D 3F 27   			sta	sgx_region_new, x	; selected region.
  295    00:E7B2  9E 37 27   			stz	sgx_region_sel, x
  296                        	
  297    00:E7B5  28         			plp				; Restore interrupts.
  298    00:E7B6  60         			rts
  299                        	
  300                        		.endif	SUPPORT_SGX
  301                        	
  302                        	
  303                        	
  304                        	; ***************************************************************************
  305                        	; ***************************************************************************
  306                        	;
  307                        	; vbl_init_scroll
  308                        	;
  309                        	; From Charles MacDonald's pcetech.txt ...
  310                        	;
  311                        	;  Raster Compare Register (RCR):
  312                        	;
  313                        	;  The range of the RCR is 263 lines, relative to the start of the active
  314                        	;  display period. (defined by VSW, VDS, and VCR) The VDC treats the first
  315                        	;  scanline of the active display period as $0040, so the valid ranges for
  316                        	;  the RCR register are $0040 to $0146.
  317                        	;
  318                        	;  For example, assume VSW=$02, VDS=$17. This positions the first line of
  319                        	;  the active display period at line 25 of the frame. An RCR value of $0040
  320                        	;  (zero) causes an interrupt at line 25, and a value of $0146 (262) causes an
  321                        	;  interrupt at line 24 of the next frame.
  322                        	;
  323                        	;  Any other RCR values that are out of range ($00-$3F, $147-$3FF) will never
  324                        	;  result in a successful line compare.
  325                        	;
  326                        	; Processing time:
  327                        	;
  328                        	; Old HuC rcr_init: 2148 cycles if all 8 regions pre-sorted
  329                        	; Old HuC rcr_init: 4346 cycles if all 8 regions need sorting
  330                        	;
  331                        	; New HuCC vbl_init_scroll:   8 disabled splits:  290 cycles
  332                        	; New HuCC vbl_init_scroll:   8  enabled splits:  384 cycles
  333                        	;
  334                        	; New HuCC vbl_init_scroll:  16 disabled splits:  506 cycles
  335                        	; New HuCC vbl_init_scroll:  16  enabled splits:  672 cycles
  336                        	;
  337                        	; New HuCC vbl_init_scroll:  32 disabled splits:  953 cycles
  338                        	; New HuCC vbl_init_scroll:  32  enabled splits: 1263 cycles
  339                        	;
  340                        	; New HuCC vbl_init_scroll:  64 disabled splits: 1802 cycles
  341                        	; New HuCC vbl_init_scroll:  64  enabled splits: 2400 cycles
  342                        	;
  343                        	; New HuCC vbl_init_scroll: 128 disabled splits: 3530 cycles
  344                        	; New HuCC vbl_init_scroll: 128  enabled splits: 4704 cycles
  345                        	;
  346                        	; Memory used is 16 bytes per scroll per VDC!
  347                        	
  348               26B6     			.bss
  349                        	
  350    F8:26B6             	vdc_region_sel:	.ds	HUCC_PCE_SPLITS		; Use A or B region next frame?
  351    F8:26BE             	vdc_region_new:	.ds	HUCC_PCE_SPLITS		; 1 if vdc_region_sel modified.
  352                        	
  353    F8:26C6             	vdc_regionA_crl:.ds	HUCC_PCE_SPLITS		; Two copies of each setting
  354    F8:26CE             	vdc_regionB_crl:.ds	HUCC_PCE_SPLITS		; HUCC_PCE_SPLITS bytes apart,
  355    F8:26D6             	vdc_regionA_rcr:.ds	HUCC_PCE_SPLITS		; one setting for the current
  356    F8:26DE             	vdc_regionB_rcr:.ds	HUCC_PCE_SPLITS		; frame, and one setting that
  357    F8:26E6             	vdc_regionA_xl:	.ds	HUCC_PCE_SPLITS		; gets modified and then used
  358    F8:26EE             	vdc_regionB_xl:	.ds	HUCC_PCE_SPLITS		; on the next frame after the
  359    F8:26F6             	vdc_regionA_xh:	.ds	HUCC_PCE_SPLITS		; change is made.
  360    F8:26FE             	vdc_regionB_xh:	.ds	HUCC_PCE_SPLITS		; Regions will have different
  361    F8:2706             	vdc_regionA_yl:	.ds	HUCC_PCE_SPLITS		; A or B currently active!
  362    F8:270E             	vdc_regionB_yl:	.ds	HUCC_PCE_SPLITS
  363    F8:2716             	vdc_regionA_yh:	.ds	HUCC_PCE_SPLITS
  364    F8:271E             	vdc_regionB_yh:	.ds	HUCC_PCE_SPLITS
  365                        	
  366    F8:2726             	vdc_next_region:.ds	1			; Linked list of region indexes
  367    F8:2727             	vdc_regionA_nxt:.ds	HUCC_PCE_SPLITS		; for the current frame.
  368    F8:272F             	vdc_regionB_nxt:.ds	HUCC_PCE_SPLITS
  369                        	
  370               0001     		.if	SUPPORT_SGX
  371                        	
  372    F8:2737             	sgx_region_sel:	.ds	HUCC_SGX_SPLITS		; Use A or B region next frame?
  373    F8:273F             	sgx_region_new:	.ds	HUCC_SGX_SPLITS		; 1 if sgx_region_sel modified.
  374                        	
  375    F8:2747             	sgx_regionA_crl:.ds	HUCC_SGX_SPLITS		; Two copies of each setting
  376    F8:274F             	sgx_regionB_crl:.ds	HUCC_SGX_SPLITS		; HUCC_SGX_SPLITS bytes apart,
  377    F8:2757             	sgx_regionA_rcr:.ds	HUCC_SGX_SPLITS		; one setting for the current
  378    F8:275F             	sgx_regionB_rcr:.ds	HUCC_SGX_SPLITS		; frame, and one setting that
  379    F8:2767             	sgx_regionA_xl:	.ds	HUCC_SGX_SPLITS		; gets modified and then used
  380    F8:276F             	sgx_regionB_xl:	.ds	HUCC_SGX_SPLITS		; on the next frame after the
  381    F8:2777             	sgx_regionA_xh:	.ds	HUCC_SGX_SPLITS		; change is made.
  382    F8:277F             	sgx_regionB_xh:	.ds	HUCC_SGX_SPLITS		; Regions will have different
  383    F8:2787             	sgx_regionA_yl:	.ds	HUCC_SGX_SPLITS		; A or B currently active!
  384    F8:278F             	sgx_regionB_yl:	.ds	HUCC_SGX_SPLITS
  385    F8:2797             	sgx_regionA_yh:	.ds	HUCC_SGX_SPLITS
  386    F8:279F             	sgx_regionB_yh:	.ds	HUCC_SGX_SPLITS
  387                        	
  388    F8:27A7             	sgx_next_region:.ds	1			; Linked list of region indexes
  389    F8:27A8             	sgx_regionA_nxt:.ds	HUCC_SGX_SPLITS		; for the current frame.
  390    F8:27B0             	sgx_regionB_nxt:.ds	HUCC_SGX_SPLITS
  391                        	
  392                        		.endif
  393                        	
  394               E7B7     			.code
  395                        	
  396    18:CE8D             	vbl_init_scroll	.proc
  397                        	
  398    18:CE8D  62         			cla				; A = previous active index
  399    18:CE8E  A2 08      			ldx	#HUCC_PCE_SPLITS	; so $00 for end-of-screen.
  400                        	
  401    18:CE90  18         			clc				; For regionB indexes.
  402                        	
  403    18:CE91  CA         	!next_region:	dex				; All regions updated?
  404    18:CE92  30 20      			bmi	!save_first+
  405                        	
  406    18:CE94  9E BE 26   			stz	vdc_region_new, x	; Clear region modified flag.
  407                        	
  408    18:CE97  BC B6 26   			ldy	vdc_region_sel, x	; 0=regionA or 1=regionB.
  409    18:CE9A  F0 0D      			beq	!use_regionA+
  410                        	
  411    18:CE9C  BC CE 26   	!use_regionB:	ldy	vdc_regionB_crl, x	; Region disabled if $00.
  412    18:CE9F  F0 F0      			beq	!next_region-
  413    18:CEA1  9D 2F 27   			sta	vdc_regionB_nxt, x	; Save index of next region.
  414    18:CEA4  8A         			txa				; A = current region index.
  415    18:CEA5  69 08      			adc	#HUCC_PCE_SPLITS	; Always leaves CC!
  416    18:CEA7  80 E8      			bra	!next_region-
  417                        	
  418    18:CEA9  BC C6 26   	!use_regionA:	ldy	vdc_regionA_crl, x	; Region disabled if $00.
  419    18:CEAC  F0 E3      			beq	!next_region-
  420    18:CEAE  9D 27 27   			sta	vdc_regionA_nxt, x	; Save index of next region.
  421    18:CEB1  8A         			txa				; A = current region index.
  422    18:CEB2  80 DD      			bra	!next_region-
  423                        	
  424    18:CEB4  8D 26 27   	!save_first:	sta	vdc_next_region		; Save index of 1st region.
  425                        	
  426    18:CEB7  AA         			tax				; NZ if first active region
  427    18:CEB8  D0 03      			bne	!init_first+		; is not region 0.
  428    18:CEBA  98         			tya				; NZ if region 0 is active.
  429    18:CEBB  F0 0F      			beq	!+			; If no active leave RCR=0.
  430                        	
  431    18:CEBD  A9 06      	!init_first:	lda	#VDC_RCR		; 1st RCR always happens just
  432    18:CEBF  8D 00 02   			sta	VDC_AR			; before the display starts.
  433    18:CEC2  A9 44      			lda.l	#HUCC_1ST_RCR
  434    18:CEC4  8D 02 02   			sta	VDC_DL
  435    18:CEC7  A9 01      			lda.h	#HUCC_1ST_RCR
  436    18:CEC9  8D 03 02   			sta	VDC_DH
  437                        	
  438               0001     		.if	SUPPORT_SGX
  439                        	
  440    18:CECC  62         	!:		cla				; A = previous active index
  441    18:CECD  A2 08      			ldx	#HUCC_SGX_SPLITS	; so $00 for end-of-screen.
  442                        	
  443    18:CECF  18         			clc				; For regionB indexes.
  444                        	
  445    18:CED0  CA         	!next_region:	dex				; All regions updated?
  446    18:CED1  30 20      			bmi	!save_first+
  447                        	
  448    18:CED3  9E 3F 27   			stz	sgx_region_new, x	; Clear region modified flag.
  449                        	
  450    18:CED6  BC 37 27   			ldy	sgx_region_sel, x	; 0=regionA or 1=regionB.
  451    18:CED9  F0 0D      			beq	!use_regionA+
  452                        	
  453    18:CEDB  BC 4F 27   	!use_regionB:	ldy	sgx_regionB_crl, x	; Region disabled if $00.
  454    18:CEDE  F0 F0      			beq	!next_region-
  455    18:CEE0  9D B0 27   			sta	sgx_regionB_nxt, x	; Save index of next region.
  456    18:CEE3  8A         			txa				; A = current region index.
  457    18:CEE4  69 08      			adc	#HUCC_SGX_SPLITS	; Always leaves CC!
  458    18:CEE6  80 E8      			bra	!next_region-
  459                        	
  460    18:CEE8  BC 47 27   	!use_regionA:	ldy	sgx_regionA_crl, x	; Region disabled if $00.
  461    18:CEEB  F0 E3      			beq	!next_region-
  462    18:CEED  9D A8 27   			sta	sgx_regionA_nxt, x	; Save index of next region.
  463    18:CEF0  8A         			txa				; A = current region index.
  464    18:CEF1  80 DD      			bra	!next_region-
  465                        	
  466    18:CEF3  8D A7 27   	!save_first:	sta	sgx_next_region		; Save index of 1st region.
  467                        	
  468    18:CEF6  AA         			tax				; NZ if first active region
  469    18:CEF7  D0 03      			bne	!init_first+		; is not region 0.
  470    18:CEF9  98         			tya				; NZ if region 0 is active.
  471    18:CEFA  F0 0F      			beq	!+			; If no active leave RCR=0.
  472                        	
  473    18:CEFC  A9 06      	!init_first:	lda	#VDC_RCR		; 1st RCR always happens just
  474    18:CEFE  8D 10 02   			sta	SGX_AR			; before the display starts.
  475    18:CF01  A9 44      			lda.l	#HUCC_1ST_RCR
  476    18:CF03  8D 12 02   			sta	SGX_DL
  477    18:CF06  A9 01      			lda.h	#HUCC_1ST_RCR
  478    18:CF08  8D 13 02   			sta	SGX_DH
  479                        	
  480                        		.endif	SUPPORT_SGX
  481                        	
  482                        	!:		leave				; All done!
         18:CF0B  4C EF FF   			jmp	leave_proc
  483                        	
  484                        			.endp
  485                        	
  486                        	
  487                        	
  488               0001     		.if	SUPPORT_SGX
  489                        	
  490                        	; ***************************************************************************
  491                        	; ***************************************************************************
  492                        	;
  493                        	; VDC_RCR_MACRO and SGX_RCR_MACRO
  494                        	;
  495                        	; A 16-byte TIA takes 142..234 cycles in 5MHz, 128..200 cycles in 7MHz.
  496                        	; A 32-byte TIA takes 270..364 cycles in 5MHz, 242..312 cycles in 7MHz. (527 DUO)
  497                        	;
  498                        	; You need to write the last RCR setting within 540 cycles in order to catch
  499                        	; the next line (at 256/336/512 resolution).
  500                        	;
  501                        	; That gives 305 cycles from the RCR to write the last setting, or there
  502                        	; will be a visible glitch on the screen.
  503                        	
  504               0000     		.ifndef	USING_RCR_MACROS
  506                        		.endif
  507                        	
  508                        	;		;;;				; 8 (cycles for the INT)
  509                        	;		bbs1	<irq_vec, .hook		; 8
  510                        	;		jmp	[irq1_hook]		; 7
  511                        	
  512                        	;		;;;				; 8 (cycles for the INT)
  513                        	;		jmp	irq1_handler		; 4
  514                        	
  515                        	;irq1_handler:	pha				; 3 Save all registers.
  516                        	;		phx				; 3
  517                        	;		phy				; 3
  518                        	;
  519                        	;		lda	VDC_SR			; 6 Acknowledge the VDC's IRQ.
  520                        	;		sta	<vdc_sr			; 4 Remember what caused it.
  521                        	;
  522                        	;		ldx	SGX_SR			; 6 Read SGX_SR after VDC_SR in
  523                        	;		stx	<sgx_sr			; 4 case this is not an SGX!
  524                        	;
  525                        	;!:		and	#$04			; 2 Is this an HSYNC interrupt?
  526                        	;		beq	!+			; 2
  527                        	
  528                        			.macro	VDC_RCR_MACRO
  529                        	
  530                        			st0	#VDC_RCR		; 5
  531                        	
  532                        			ldx	vdc_next_region		; 5 X and Y can be greater than
  533                        			ldy	vdc_regionA_nxt, x	; 5 HUCC_PCE_SPLITS if regionB!
  534                        			clc				; 2
  535                        			bne	!set_next_rcr+		; 4 Stop RCR if next line is 0.
  536                        	
  537                        			and	const_0000		; 5 A=$00 with the same #cycles
  538                        			bra	!clr_next_rcr+		; 4 as if the branch were taken.
  539                        	
  540                        	!set_next_rcr:	lda	vdc_regionA_rcr, y	; 5 Set next RCR 1 line before
  541                        			adc	#64-1			; 2 the region begins, or 0 to
  542                        	!clr_next_rcr:	sta	VDC_DL			; 6 disable.
  543                        			cla				; 2
  544                        			rol	a			; 2
  545                        			sta	VDC_DH			; 6
  546                        	
  547                        			st0	#VDC_BYR		; 5 Do BYR first to mitigate the
  548                        			lda	vdc_regionA_yl, x	; 5 glitch if the IRQ is delayed.
  549                        			sta	VDC_DL			; 6 = 105 cycles from RCR on SGX
  550                        			lda	vdc_regionA_yh, x	; 5
  551                        			sta	VDC_DH			; 6
  552                        	
  553                        			st0	#VDC_CR			; 5
  554                        			lda	vdc_regionA_crl, x	; 5
  555                        	;		asl	a
  556                        			sta	VDC_DL			; 6
  557                        	
  558                        			st0	#VDC_BXR		; 2
  559                        			lda	vdc_regionA_xl, x	; 5
  560                        			sta	VDC_DL			; 6
  561                        			lda	vdc_regionA_xh, x	; 5
  562                        			sta	VDC_DH			; 6 = 156 cycles from RCR if DUO
  563                        	
  564                        	;		bcc	!+
  565                        	;		lda	vdc_regionA_yh, x	; 5
  566                        	;		sta.l	VCE_CTW			; 6
  567                        	
  568                        			sty	vdc_next_region		; 5
  569                        	
  570                        			.endm
  571                        	
  572                        	;!:		bbr2	<sgx_sr, !+		; 6 Is this an HSYNC interrupt?
  573                        	
  574                        			.macro	SGX_RCR_MACRO
  575                        	
  576                        			lda	#VDC_RCR		; 2
  577                        			sta	SGX_AR			; 6
  578                        	
  579                        			ldx	sgx_next_region		; 5 X and Y can be greater than
  580                        			ldy	sgx_regionA_nxt, x	; 5 HUCC_SGX_SPLITS if regionB!
  581                        			clc				; 2
  582                        			bne	!set_next_rcr+		; 4 Stop RCR if next line is 0.
  583                        	
  584                        			and	const_0000		; 5 A=$00 with the same #cycles
  585                        			bra	!clr_next_rcr+		; 4 as if the branch were taken.
  586                        	
  587                        	!set_next_rcr:	lda	sgx_regionA_rcr, y	; 5 Set next RCR 1 line before
  588                        			adc	#64-1			; 2 the region begins, or 0 to
  589                        	!clr_next_rcr:	sta	SGX_DL			; 6 disable.
  590                        			cla				; 2
  591                        			rol	a			; 2
  592                        			sta	SGX_DH			; 6
  593                        	
  594                        			lda	#VDC_BYR		; 2 Do BYR first to mitigate the
  595                        			sta	SGX_AR			; 6 glitch if the IRQ is delayed.
  596                        			lda	sgx_regionA_yl, x	; 5
  597                        			sta	SGX_DL			; 6
  598                        			lda	sgx_regionA_yh, x	; 5
  599                        			sta	SGX_DH			; 6
  600                        	
  601                        			lda	#VDC_CR			; 2
  602                        			sta	SGX_AR			; 6
  603                        			lda	sgx_regionA_crl, x	; 5
  604                        			sta	SGX_DL			; 6
  605                        	
  606                        			lda	#VDC_BXR		; 2
  607                        			sta	SGX_AR			; 6
  608                        			lda	sgx_regionA_xl, x	; 5
  609                        			sta	SGX_DL			; 6
  610                        			lda	sgx_regionA_xh, x	; 5
  611                        			sta	SGX_DH			; 6 = 293 cycles (282 if no YH)
  612                        	
  613                        			sty	sgx_next_region		; 5
  614                        	
  615                        			.endm
  616                        	
  617                        		.else	SUPPORT_SGX
  697                        		.endif	SUPPORT_SGX
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   68                        		.else
   72                        		.endif	HUCC_USES_NEW_SCROLL
   73                        	
   74               0001     		.ifdef	HUCC_USES_OLD_SPR		; Set in hucc_old_spr.h
                             #[3]   "..\..\..\include\hucc\hucc-old-spr.asm"
   75                        			include	"hucc-old-spr.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-old-spr.asm
    5                        	;
    6                        	; Based on the original HuC and MagicKit functions by David Michel and the
    7                        	; other original HuC developers.
    8                        	;
    9                        	; Modifications copyright John Brandwood 2024.
   10                        	;
   11                        	; Distributed under the Boost Software License, Version 1.0.
   12                        	; (See accompanying file LICENSE_1_0.txt or copy at
   13                        	;  http://www.boost.org/LICENSE_1_0.txt)
   14                        	;
   15                        	; ***************************************************************************
   16                        	; ***************************************************************************
   17                        	
   18                        	;
   19                        	; Include dependancies ...
   20                        	;
   21                        	
   22                        			include "common.asm"		; Common helpers.
   23                        			include "vce.asm"		; Useful VCE routines.
   24                        			include "vdc.asm"		; Useful VCE routines.
   25                        	
   26                        	
   27                        	
   28                        	; ***************************************************************************
   29                        	; ***************************************************************************
   30                        	;
   31                        	; HuC Sprite Functions
   32                        	;
   33                        	; ***************************************************************************
   34                        	; ***************************************************************************
   35                        	
   36               209C     			.zp
   37    F8:209C             	spr_ptr:	ds	2
   38               27B8     			.bss
   39    F8:27B8             	spr_sat:	ds	512
   40               E7B7     			.code
   41                        	
   42               0001     		.if	SUPPORT_SGX
   43               209E     			.zp
   44    F8:209E             	sgx_spr_ptr:	ds	2
   45               29B8     			.bss
   46    F8:29B8             	sgx_spr_sat:	ds	512	; N.B. Directly after spr_sat!
   47               E7B7     			.code
   48                        		.endif
   49                        	
   50                        	; Moved to hucc-old-map.asm just to save space. This NEEDS to be changed!
   51                        	;
   52                        	;		.bss
   53                        	;spr_max:	ds	1
   54                        	;spr_clr:	ds	1
   55                        	;	.if	SUPPORT_SGX
   56                        	;sgx_spr_max:	ds	1
   57                        	;sgx_spr_clr:	ds	1
   58                        	;	.endif
   59                        	;		.code
   60                        	
   61                        	
   62                        	
   63                        	; ***************************************************************************
   64                        	; ***************************************************************************
   65                        	;
   66                        	; void __fastcall init_satb( void );
   67                        	; void __fastcall reset_satb( void );
   68                        	;
   69                        	; void __fastcall sgx_init_satb( void );
   70                        	; void __fastcall sgx_reset_satb( void );
   71                        	
   72    00:E7B7             	_reset_satb:
   73    00:E7B7  C2         	_init_satb:	cly
   74    00:E7B8  62         			cla
   75    00:E7B9  99 B8 27   	!:		sta	spr_sat + $0000, y
   76    00:E7BC  99 B8 28   			sta	spr_sat + $0100, y
   77    00:E7BF  C8         			iny
   78    00:E7C0  D0 F7      			bne	!-
   79    00:E7C2  8C 8C 26   			sty	spr_max
   80    00:E7C5  C8         			iny
   81    00:E7C6  8C 8D 26   			sty	spr_clr
   82    00:E7C9  60         			rts
   83                        	
   84               0001     		.if	SUPPORT_SGX
   85    00:E7CA             	_sgx_reset_satb:
   86    00:E7CA  C2         	_sgx_init_satb:	cly
   87    00:E7CB  62         			cla
   88    00:E7CC  99 B8 29   	!:		sta	sgx_spr_sat + $0000, y
   89    00:E7CF  99 B8 2A   			sta	sgx_spr_sat + $0100, y
   90    00:E7D2  C8         			iny
   91    00:E7D3  D0 F7      			bne	!-
   92    00:E7D5  8C 9C 26   			sty	sgx_spr_max
   93    00:E7D8  C8         			iny
   94    00:E7D9  8C 9D 26   			sty	sgx_spr_clr
   95    00:E7DC  60         			rts
   96                        		.endif
   97                        	
   98                        	
   99                        	
  100                        	; ***************************************************************************
  101                        	; ***************************************************************************
  102                        	;
  103                        	; void __fastcall satb_update( void );
  104                        	; void __fastcall sgx_satb_update( void );
  105                        	
  106    18:D0B8             	old_satb_group	.procgroup
  107                        	
  108               0001     		.if	SUPPORT_SGX
  109    18:D0B8             			.proc	_sgx_satb_update
  110                        	
  111    18:D0B8  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  112    18:D0BA  F0         			db	$F0			; Turn "clx" into a "beq".
  113                        	
  114    18:D0BB             			.ref	_satb_update
  115                        			.endp
  116                        		.endif
  117                        	
  118    18:D0BB             			.proc	_satb_update
  119                        	
  120    18:D0BB  82         			clx				; Offset to PCE VDC.
  121                        	
  122    18:D0BC  A9 7F      			lda.h	#$7F00			; HuC puts the SAT here in VRAM
  123                        	;		lda.h	#$0800			; but we put it here instead
  124    18:D0BE  64 F0      			stz.l	<_di
  125    18:D0C0  85 F1      			sta.h	<_di
  126    18:D0C2  20 7F E3   			jsr	set_di_to_mawr
  127                        	
  128               0001     		.if	SUPPORT_SGX
  129    18:D0C5  8A         			txa				; Select which VDC to write
  130    18:D0C6  1A         			inc	a			; to.
  131    18:D0C7  1A         			inc	a
  132    18:D0C8  8D F3 22   			sta.l	ram_tia_dst
  133                        		.endif
  134                        	
  135    18:D0CB  A9 10      			lda	#VRAM_XFER_SIZE		; Split into 16-byte chunks
  136    18:D0CD  8D F5 22   			sta.l	ram_tia_len		; for stable IRQ response.
  137                        	
  138    18:D0D0  BC 8C 26   			ldy	spr_max, x		; Highest sprite that was set.
  139    18:D0D3  C8         			iny
  140                        	
  141    18:D0D4  BD 8D 26   			lda	spr_clr, x
  142    18:D0D7  F0 05      			beq	!+
  143    18:D0D9  9E 8D 26   			stz	spr_clr, x
  144    18:D0DC  A0 40      			ldy	#64
  145                        	
  146    18:D0DE  98         	!:		tya
  147    18:D0DF  F0 22      			beq	.exit
  148                        	
  149    18:D0E1  3A         			dec	a			; round up to the next group of 2 sprites
  150    18:D0E2  4A         			lsr	a
  151               0000     		.if	VRAM_XFER_SIZE == 32
  153                        		.endif
  154    18:D0E3  1A         			inc	a
  155    18:D0E4  A8         			tay
  156                        	
  157    18:D0E5  A9 27      			lda.h	#spr_sat
  158                        	
  159               0001     		.if	SUPPORT_SGX
  160    18:D0E7  E0 00      			cpx	#0
  161    18:D0E9  F0 02      			beq	!+
  162                        	
  163    18:D0EB  A9 29      			lda.h	#sgx_spr_sat
  164                        		.endif
  165                        	
  166    18:D0ED  8D F2 22   	!:		sta.h	ram_tia_src
  167                        	
  168    18:D0F0  A9 B8      			lda.l	#spr_sat		; Same for SGX and PCE!
  169    18:D0F2  8D F1 22   	.chunk_loop:	sta.l	ram_tia_src
  170                        	
  171    18:D0F5  20 F0 22   			jsr	ram_tia			; transfer 16-bytes
  172                        	
  173    18:D0F8  18         			clc				; increment source
  174    18:D0F9  69 10      			adc	#VRAM_XFER_SIZE
  175    18:D0FB  90 03      			bcc	.same_page
  176    18:D0FD  EE F2 22   			inc.h	ram_tia_src
  177                        	
  178    18:D100  88         	.same_page:	dey
  179    18:D101  D0 EF      			bne	.chunk_loop
  180                        	
  181                        	.exit:		leave
         18:D103  4C EF FF   			jmp	leave_proc
  182                        	
  183                        			.endp
  184                        	
  185                        			.endprocgroup	; old_satb_group
  186                        	
  187                        	
  188                        	
  189                        	; ***************************************************************************
  190                        	; ***************************************************************************
  191                        	;
  192                        	; void __fastcall spr_set( unsigned char num<acc> );
  193                        	
  194    00:E7DD  CD 8C 26   	_spr_set.1:	cmp	spr_max
  195    00:E7E0  90 03      			bcc	!+
  196    00:E7E2  8D 8C 26   			sta	spr_max
  197    00:E7E5  A0 27      	!:		ldy.h	#spr_sat
  198    00:E7E7  0A         			asl	a
  199    00:E7E8  0A         			asl	a
  200    00:E7E9  0A         			asl	a
  201    00:E7EA  90 02      			bcc	!+
  202    00:E7EC  C8         			iny
  203    00:E7ED  18         			clc
  204    00:E7EE  69 B8      	!:		adc.l	#spr_sat
  205    00:E7F0  85 9C      			sta.l	<spr_ptr
  206    00:E7F2  90 01      			bcc	!+
  207    00:E7F4  C8         			iny
  208    00:E7F5  84 9D      	!:		sty.h	<spr_ptr
  209    00:E7F7  60         			rts
  210                        	
  211                        	
  212                        	
  213                        	; ***************************************************************************
  214                        	; ***************************************************************************
  215                        	;
  216                        	; void __fastcall spr_hide( void );
  217                        	
  218    00:E7F8  A0 01      	_spr_hide:	ldy	#1
  219    00:E7FA  B1 9C      			lda	[spr_ptr], y
  220    00:E7FC  09 02      			ora	#2
  221    00:E7FE  91 9C      			sta	[spr_ptr], y
  222    00:E800  60         			rts
  223                        	
  224                        	
  225                        	
  226                        	; ***************************************************************************
  227                        	; ***************************************************************************
  228                        	;
  229                        	; void __fastcall spr_show( void );
  230                        	
  231    00:E801  A0 01      	_spr_show:	ldy	#1
  232    00:E803  B1 9C      			lda	[spr_ptr], y
  233    00:E805  29 01      			and	#1
  234    00:E807  91 9C      			sta	[spr_ptr], y
  235    00:E809  60         			rts
  236                        	
  237                        	
  238                        	
  239                        	; ***************************************************************************
  240                        	; ***************************************************************************
  241                        	;
  242                        	; void __fastcall spr_x( unsigned int value<acc> );
  243                        	
  244    00:E80A  02         	_spr_x.1:	sxy
  245    00:E80B  18         			clc
  246    00:E80C  69 20      			adc	#32
  247    00:E80E  A0 02      			ldy	#2
  248    00:E810  91 9C      			sta	[spr_ptr], y
  249    00:E812  8A         			txa
  250    00:E813  69 00      			adc	#0
  251    00:E815  C8         			iny
  252    00:E816  91 9C      			sta	[spr_ptr], y
  253    00:E818  60         			rts
  254                        	
  255                        	
  256                        	
  257                        	; ***************************************************************************
  258                        	; ***************************************************************************
  259                        	;
  260                        	; void __fastcall spr_y( unsigned int value<acc> );
  261                        	
  262    00:E819  18         	_spr_y.1:	clc
  263    00:E81A  69 40      			adc	#64
  264    00:E81C  92 9C      			sta	[spr_ptr]
  265    00:E81E  98         			tya
  266    00:E81F  69 00      			adc	#0
  267    00:E821  A0 01      			ldy	#1
  268    00:E823  91 9C      			sta	[spr_ptr], y
  269    00:E825  60         			rts
  270                        			
  271                        	
  272                        	
  273                        	; ***************************************************************************
  274                        	; ***************************************************************************
  275                        	;
  276                        	; void __fastcall spr_pattern( unsigned int vaddr<acc> );
  277                        	
  278    00:E826  84 00      	_spr_pattern.1:	sty	<__temp		;     zp=fedcba98 a=76543210
  279    00:E828  0A         			asl	a		; c=f zp=edcba987 a=6543210_
  280    00:E829  26 00      			rol	<__temp
  281    00:E82B  2A         			rol	a		; c=e zp=dcba9876 a=543210_f
  282    00:E82C  26 00      			rol	<__temp
  283    00:E82E  2A         			rol	a		; c=d zp=cba98765 a=43210_fe
  284    00:E82F  26 00      			rol	<__temp
  285    00:E831  2A         			rol	a		; c=4 zp=cba98765 a=3210_fed
  286    00:E832  A0 05      			ldy	#5
  287    00:E834  91 9C      			sta	[spr_ptr], y
  288    00:E836  A5 00      			lda	<__temp
  289    00:E838  88         			dey
  290    00:E839  91 9C      			sta	[spr_ptr], y
  291    00:E83B  60         			rts
  292                        	
  293                        	
  294                        	
  295                        	; ***************************************************************************
  296                        	; ***************************************************************************
  297                        	;
  298                        	; void __fastcall spr_ctrl( unsigned char mask<_al>, unsigned char value<acc> );
  299                        	
  300    00:E83C  25 F8      	_spr_ctrl.2:	and	<_al
  301    00:E83E  85 00      			sta	<__temp
  302    00:E840  A5 F8      			lda	<_al
  303    00:E842  49 FF      			eor	#$FF
  304    00:E844  A0 07      			ldy	#7
  305    00:E846  31 9C      			and	[spr_ptr], y
  306    00:E848  05 00      			ora	<__temp
  307    00:E84A  91 9C      			sta	[spr_ptr], y
  308    00:E84C  60         			rts
  309                        	
  310                        	
  311                        	
  312                        	; ***************************************************************************
  313                        	; ***************************************************************************
  314                        	;
  315                        	; void __fastcall spr_pal( unsigned char palette<acc> )
  316                        	
  317    00:E84D  29 0F      	_spr_pal.1:	and	#$0F
  318    00:E84F  85 00      			sta	<__temp
  319    00:E851  A0 06      			ldy	#6
  320    00:E853  B1 9C      			lda	[spr_ptr], y
  321    00:E855  29 F0      			and	#$F0
  322    00:E857  05 00      			ora	<__temp
  323    00:E859  91 9C      			sta	[spr_ptr], y
  324    00:E85B  60         			rts
  325                        	
  326                        	
  327                        	
  328                        	; ***************************************************************************
  329                        	; ***************************************************************************
  330                        	;
  331                        	; void __fastcall spr_pri( unsigned char priority<acc> )
  332                        	
  333    00:E85C  C9 01      	_spr_pri.1:	cmp	#1
  334    00:E85E  A0 06      			ldy	#6
  335    00:E860  B1 9C      			lda	[spr_ptr], y
  336    00:E862  29 7F      			and	#$7F
  337    00:E864  90 02      			bcc	!+
  338    00:E866  09 80      			ora	#$80
  339    00:E868  91 9C      	!:		sta	[spr_ptr], y
  340    00:E86A  60         			rts
  341                        	
  342                        	
  343                        	
  344                        	; ***************************************************************************
  345                        	; ***************************************************************************
  346                        	;
  347                        	; unsigned int __fastcall spr_get_x( void );
  348                        	
  349    00:E86B  38         	_spr_get_x:	sec
  350    00:E86C  A0 02      			ldy	#2
  351    00:E86E  B1 9C      			lda	[spr_ptr], y
  352    00:E870  E9 20      			sbc	#32
  353    00:E872  AA         			tax
  354    00:E873  C8         			iny
  355    00:E874  B1 9C      			lda	[spr_ptr], y
  356    00:E876  E9 00      			sbc	#0
  357    00:E878  A8         			tay
  358    00:E879  8A         			txa
  359    00:E87A  60         			rts
  360                        	
  361                        	
  362                        	
  363                        	; ***************************************************************************
  364                        	; ***************************************************************************
  365                        	;
  366                        	; unsigned int __fastcall spr_get_y( void );
  367                        	
  368    00:E87B  38         	_spr_get_y:	sec
  369    00:E87C  B2 9C      			lda	[spr_ptr]
  370    00:E87E  E9 40      			sbc	#64
  371    00:E880  AA         			tax
  372    00:E881  A0 01      			ldy	#1
  373    00:E883  B1 9C      			lda	[spr_ptr], y
  374    00:E885  E9 00      			sbc	#0
  375    00:E887  A8         			tay
  376    00:E888  8A         			txa
  377    00:E889  60         			rts
  378                        	
  379                        	
  380                        	
  381               0001     		.if	SUPPORT_SGX
  382                        	
  383                        	; ***************************************************************************
  384                        	; ***************************************************************************
  385                        	;
  386                        	; void __fastcall sgx_spr_set( unsigned char num<acc> );
  387                        	
  388    00:E88A  CD 9C 26   	_sgx_spr_set.1:	cmp	sgx_spr_max
  389    00:E88D  90 03      			bcc	!+
  390    00:E88F  8D 9C 26   			sta	sgx_spr_max
  391    00:E892  A0 29      	!:		ldy.h	#sgx_spr_sat
  392    00:E894  0A         			asl	a
  393    00:E895  0A         			asl	a
  394    00:E896  0A         			asl	a
  395    00:E897  90 02      			bcc	!+
  396    00:E899  C8         			iny
  397    00:E89A  18         			clc
  398    00:E89B  69 B8      	!:		adc.l	#sgx_spr_sat
  399    00:E89D  85 9E      			sta.l	<sgx_spr_ptr
  400    00:E89F  90 01      			bcc	!+
  401    00:E8A1  C8         			iny
  402    00:E8A2  84 9F      	!:		sty.h	<sgx_spr_ptr
  403    00:E8A4  60         			rts
  404                        	
  405                        	
  406                        	
  407                        	; ***************************************************************************
  408                        	; ***************************************************************************
  409                        	;
  410                        	; void __fastcall sgx_spr_hide( void );
  411                        	
  412    00:E8A5  A0 01      	_sgx_spr_hide:	ldy	#1
  413    00:E8A7  B1 9E      			lda	[sgx_spr_ptr], y
  414    00:E8A9  09 02      			ora	#2
  415    00:E8AB  91 9E      			sta	[sgx_spr_ptr], y
  416    00:E8AD  60         			rts
  417                        	
  418                        	
  419                        	
  420                        	; ***************************************************************************
  421                        	; ***************************************************************************
  422                        	;
  423                        	; void __fastcall sgx_spr_show( void );
  424                        	
  425    00:E8AE  A0 01      	_sgx_spr_show:	ldy	#1
  426    00:E8B0  B1 9E      			lda	[sgx_spr_ptr], y
  427    00:E8B2  29 01      			and	#1
  428    00:E8B4  91 9E      			sta	[sgx_spr_ptr], y
  429    00:E8B6  60         			rts
  430                        	
  431                        	
  432                        	
  433                        	; ***************************************************************************
  434                        	; ***************************************************************************
  435                        	;
  436                        	; void __fastcall sgx_spr_x( unsigned int value<acc> );
  437                        	
  438    00:E8B7  02         	_sgx_spr_x.1:	sxy
  439    00:E8B8  18         			clc
  440    00:E8B9  69 20      			adc	#32
  441    00:E8BB  A0 02      			ldy	#2
  442    00:E8BD  91 9E      			sta	[sgx_spr_ptr], y
  443    00:E8BF  8A         			txa
  444    00:E8C0  69 00      			adc	#0
  445    00:E8C2  C8         			iny
  446    00:E8C3  91 9E      			sta	[sgx_spr_ptr], y
  447    00:E8C5  60         			rts
  448                        	
  449                        	
  450                        	
  451                        	; ***************************************************************************
  452                        	; ***************************************************************************
  453                        	;
  454                        	; void __fastcall sgx_spr_y( unsigned int value<acc> );
  455                        	
  456    00:E8C6  18         	_sgx_spr_y.1:	clc
  457    00:E8C7  69 40      			adc	#64
  458    00:E8C9  92 9E      			sta	[sgx_spr_ptr]
  459    00:E8CB  98         			tya
  460    00:E8CC  69 00      			adc	#0
  461    00:E8CE  A0 01      			ldy	#1
  462    00:E8D0  91 9E      			sta	[sgx_spr_ptr], y
  463    00:E8D2  60         			rts
  464                        			
  465                        	
  466                        	
  467                        	; ***************************************************************************
  468                        	; ***************************************************************************
  469                        	;
  470                        	; void __fastcall sgx_spr_pattern( unsigned int vaddr<acc> );
  471                        	
  472    00:E8D3             	_sgx_spr_pattern.1:
  473    00:E8D3  84 00      			sty	<__temp		;     zp=fedcba98 a=76543210
  474    00:E8D5  0A         			asl	a		; c=f zp=edcba987 a=6543210_
  475    00:E8D6  26 00      			rol	<__temp
  476    00:E8D8  2A         			rol	a		; c=e zp=dcba9876 a=543210_f
  477    00:E8D9  26 00      			rol	<__temp
  478    00:E8DB  2A         			rol	a		; c=d zp=cba98765 a=43210_fe
  479    00:E8DC  26 00      			rol	<__temp
  480    00:E8DE  2A         			rol	a		; c=4 zp=cba98765 a=3210_fed
  481    00:E8DF  A0 05      			ldy	#5
  482    00:E8E1  91 9E      			sta	[sgx_spr_ptr], y
  483    00:E8E3  A5 00      			lda	<__temp
  484    00:E8E5  88         			dey
  485    00:E8E6  91 9E      			sta	[sgx_spr_ptr], y
  486    00:E8E8  60         			rts
  487                        	
  488                        	
  489                        	
  490                        	; ***************************************************************************
  491                        	; ***************************************************************************
  492                        	;
  493                        	; void __fastcall sgx_spr_ctrl( unsigned char mask<_al>, unsigned char value<acc> );
  494                        	
  495    00:E8E9  25 F8      	_sgx_spr_ctrl.2:and	<_al
  496    00:E8EB  85 00      			sta	<__temp
  497    00:E8ED  A5 F8      			lda	<_al
  498    00:E8EF  49 FF      			eor	#$FF
  499    00:E8F1  A0 07      			ldy	#7
  500    00:E8F3  31 9E      			and	[sgx_spr_ptr], y
  501    00:E8F5  05 00      			ora	<__temp
  502    00:E8F7  91 9E      			sta	[sgx_spr_ptr], y
  503    00:E8F9  60         			rts
  504                        	
  505                        	
  506                        	
  507                        	; ***************************************************************************
  508                        	; ***************************************************************************
  509                        	;
  510                        	; void __fastcall sgx_spr_pal( unsigned char palette<acc> )
  511                        	
  512    00:E8FA  29 0F      	_sgx_spr_pal.1:	and	#$0F
  513    00:E8FC  85 00      			sta	<__temp
  514    00:E8FE  A0 06      			ldy	#6
  515    00:E900  B1 9E      			lda	[sgx_spr_ptr], y
  516    00:E902  29 F0      			and	#$F0
  517    00:E904  05 00      			ora	<__temp
  518    00:E906  91 9E      			sta	[sgx_spr_ptr], y
  519    00:E908  60         			rts
  520                        	
  521                        	
  522                        	
  523                        	; ***************************************************************************
  524                        	; ***************************************************************************
  525                        	;
  526                        	; void __fastcall sgx_spr_pri( unsigned char priority<acc> )
  527                        	
  528    00:E909  C9 01      	_sgx_spr_pri.1:	cmp	#1
  529    00:E90B  A0 06      			ldy	#6
  530    00:E90D  B1 9E      			lda	[sgx_spr_ptr], y
  531    00:E90F  29 7F      			and	#$7F
  532    00:E911  90 02      			bcc	!+
  533    00:E913  09 80      			ora	#$80
  534    00:E915  91 9E      	!:		sta	[sgx_spr_ptr], y
  535    00:E917  60         			rts
  536                        	
  537                        	
  538                        	
  539                        	; ***************************************************************************
  540                        	; ***************************************************************************
  541                        	;
  542                        	; unsigned int __fastcall sgx_spr_get_x( void );
  543                        	
  544    00:E918  38         	_sgx_spr_get_x:	sec
  545    00:E919  A0 02      			ldy	#2
  546    00:E91B  B1 9E      			lda	[sgx_spr_ptr], y
  547    00:E91D  E9 20      			sbc	#32
  548    00:E91F  AA         			tax
  549    00:E920  C8         			iny
  550    00:E921  B1 9E      			lda	[sgx_spr_ptr], y
  551    00:E923  E9 00      			sbc	#0
  552    00:E925  A8         			tay
  553    00:E926  8A         			txa
  554    00:E927  60         			rts
  555                        	
  556                        	
  557                        	
  558                        	; ***************************************************************************
  559                        	; ***************************************************************************
  560                        	;
  561                        	; unsigned int __fastcall sgx_spr_get_y( void );
  562                        	
  563    00:E928  38         	_sgx_spr_get_y:	sec
  564    00:E929  B2 9E      			lda	[sgx_spr_ptr]
  565    00:E92B  E9 40      			sbc	#64
  566    00:E92D  AA         			tax
  567    00:E92E  A0 01      			ldy	#1
  568    00:E930  B1 9E      			lda	[sgx_spr_ptr], y
  569    00:E932  E9 00      			sbc	#0
  570    00:E934  A8         			tay
  571    00:E935  8A         			txa
  572    00:E936  60         			rts
  573                        	
  574                        		.endif	SUPPORT_SGX
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   76                        		.endif
   77                        	
   78               0001     		.ifdef	HUCC_USES_BLKMAP		; Set in hucc_blkmap.h
                             #[3]   "..\..\..\include\hucc\blkmap.asm"
   79                        			include	"blkmap.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; blkmap.asm
    5                        	;
    6                        	; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
    7                        	;
    8                        	; Copyright John Brandwood 2025.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
   18                        	;
   19                        	; The maximum total size for a blkmap is 16KBytes, which allows for maps up
   20                        	; to 128x128 blocks (2048x2048 pixels).
   21                        	;
   22                        	; Huge multi-screen blkmaps are also supported (optionally).
   23                        	;
   24                        	; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
   25                        	;
   26                        	; The maximum total size for a multi-screen map is 8KBytes, which allows for
   27                        	; a total of 1024 screens.
   28                        	;
   29                        	; ***************************************************************************
   30                        	; ***************************************************************************
   31                        	
   32                        	;
   33                        	; Include dependancies ...
   34                        	;
   35                        	
   36                        			include "common.asm"		; Common helpers.
   37                        			include "vce.asm"		; Useful VCE routines.
   38                        			include "vdc.asm"		; Useful VCE routines.
   39                        	
   40                        	;
   41                        	; Support large blkmaps up to 16KBytes instead of the regular 8KBytes?
   42                        	;
   43                        	; The maximum X and Y size for regular blkmaps is 128 tiles (2048 pixels).
   44                        	;
   45                        	; This allows for individual maps up to 128x128 tiles (2048x2048 pixels) vs
   46                        	; default limit of 128x64 or 64x128.
   47                        	;
   48                        	
   49               0000     		.ifndef	BLKMAP_LARGEMAP
   51                        		.endif
   52                        	
   53                        	;
   54                        	; Support huge multi-screen maps, up to 32768 pixels wide/high?
   55                        	;
   56                        	; These are sectorized maps split into individual BAT-sized "screens", with
   57                        	; a maximum of 1024 screens per map.
   58                        	;
   59                        	; The BAT size that is used when drawing *must* be the same as the BAT size
   60                        	; that was chosen when creating the multi-screen map.
   61                        	;
   62                        	; Each screen can use a unique set of block definitions, or it might choose
   63                        	; to share the same block definitions that are used on another screen.
   64                        	;
   65                        	; Each screen may choose which 8KByte banks of character data to select for
   66                        	; the 4 banks (32KBytes) of VRAM that its block definitions use, with a max
   67                        	; of 16 banks of characters per multi-screen map.
   68                        	;
   69                        	; Loading those character banks dynamically is an exercise for the user!
   70                        	;
   71                        	; Enabling support adds extra library code, and slightly slows down the use
   72                        	; of regular blkmaps.
   73                        	;
   74                        	
   75               0000     		.ifndef	BLKMAP_MULTISCR
   77                        		.endif
   78                        	
   79                        	;
   80                        	; Block definitions can either use character data from VRAM $1000..$7FFF or
   81                        	; they can be limited to use the 32KByte of characters in VRAM $1000..$4FFF
   82                        	; which then frees up 2-bits for flag information for each character in the
   83                        	; block.
   84                        	;
   85                        	; These 2-bits are perfect for using as collision information in game maps,
   86                        	; allowing storage of states like transparent, solid, up-slope, down-slope.
   87                        	;
   88                        	; Typically this flag information is set by the map conversion tools from a
   89                        	; seperate "collision" map layer.
   90                        	;
   91                        	
   92               0000     		.ifndef	BLKDEF_CHR_FLAG
   94                        		.endif
   95                        	
   96                        	;
   97                        	; Block definitions are accessed in MPR2 ($4000..$5FFF), and must not cross
   98                        	; the bank boundary.
   99                        	;
  100                        	; When working this way, 8 pointers in ZP are used to access the individual
  101                        	; bytes in the block definition. This is fine when using a regular map on a
  102                        	; PC Engine, but it is awfully slow when using multi-screen maps or drawing
  103                        	; maps on both VDC chips in a SuperGRAFX because the pointer values must be
  104                        	; constantly changed.
  105                        	;
  106                        	; When using multi-screen maps, or when developing a SuperGRAFX game, or if
  107                        	; developing a CDROM game, then it is usually preferable to store the block
  108                        	; definitions with 2KByte alignment, especially if they are normally stored
  109                        	; compressed and then decompressed into a 2KByte buffer in RAM when needed.
  110                        	;
  111                        	; This option controls whether the definitions are stored 2KByte aligned or
  112                        	; if pointers should be used instead.
  113                        	;
  114                        	
  115               0000     		.ifndef	BLKDEF_POINTERS
  117                        		.endif
  118                        	
  119                        	;
  120                        	; Add a timing bar to the scroll_map() to see how long the drawing takes?
  121                        	;
  122                        	
  123               0000     		.ifndef	BLKMAP_TIMETEST
  125                        		.endif
  126                        	
  127                        	;
  128                        	;
  129                        	;
  130                        	
  131               0000     		.if	BLKDEF_POINTERS
  144                        		.else
  145                        	
  146                        		; If the block definititions are 2KByte aligned.
  147                        	
  148               4000     	BLK_4000_TL_L	=	$4000
  149               4100     	BLK_4000_TR_L	=	$4100
  150               4200     	BLK_4000_BL_L	=	$4200
  151               4300     	BLK_4000_BR_L	=	$4300
  152               4400     	BLK_4000_TL_H	=	$4400
  153               4500     	BLK_4000_TR_H	=	$4500
  154               4600     	BLK_4000_BL_H	=	$4600
  155               4700     	BLK_4000_BR_H	=	$4700
  156                        	
  157               4800     	BLK_4800_TL_L	=	$4800
  158               4900     	BLK_4800_TR_L	=	$4900
  159               4A00     	BLK_4800_BL_L	=	$4A00
  160               4B00     	BLK_4800_BR_L	=	$4B00
  161               4C00     	BLK_4800_TL_H	=	$4C00
  162               4D00     	BLK_4800_TR_H	=	$4D00
  163               4E00     	BLK_4800_BL_H	=	$4E00
  164               4F00     	BLK_4800_BR_H	=	$4F00
  165                        	
  166               5000     	BLK_5000_TL_L	=	$5000
  167               5100     	BLK_5000_TR_L	=	$5100
  168               5200     	BLK_5000_BL_L	=	$5200
  169               5300     	BLK_5000_BR_L	=	$5300
  170               5400     	BLK_5000_TL_H	=	$5400
  171               5500     	BLK_5000_TR_H	=	$5500
  172               5600     	BLK_5000_BL_H	=	$5600
  173               5700     	BLK_5000_BR_H	=	$5700
  174                        	
  175               5800     	BLK_5800_TL_L	=	$5800
  176               5900     	BLK_5800_TR_L	=	$5900
  177               5A00     	BLK_5800_BL_L	=	$5A00
  178               5B00     	BLK_5800_BR_L	=	$5B00
  179               5C00     	BLK_5800_TL_H	=	$5C00
  180               5D00     	BLK_5800_TR_H	=	$5D00
  181               5E00     	BLK_5800_BL_H	=	$5E00
  182               5F00     	BLK_5800_BR_H	=	$5F00
  183                        	
  184                        		.endif
  185                        	
  186               0080     	MAP_UNALIGNED_X	=	$80
  187               0040     	MAP_UNALIGNED_Y	=	$40
  188                        	
  189                        	;
  190                        	;
  191                        	;
  192                        	
  193               2BB8     			.bss
  194                        	
  195                        	; **************
  196                        	; 8-byte (or 2-byte) entry for each SCREEN in the MULTI_MAP.
  197                        	
  198               0000     			.rsset	0
  199               0000     		.if	BLKDEF_POINTERS
  202                        		.else
  203               0000     	SCR_MAP_PAGE	.rs	1	; 256-byte aligned.
  204               0001     	SCR_MAP_BANK	.rs	1
  205               0002     	SCR_BLK_PAGE	.rs	1	; >$4000, >$4800, >$5000, or >$5800.
  206               0003     	SCR_BLK_BANK	.rs	1
  207               0004     	SCR_TBL_PAGE	.rs	1	; 256-byte aligned.
  208               0005     	SCR_TBL_BANK	.rs	1
  209               0006     	SCR_CHR_12	.rs	1	; Which CHR banks are used by the BLK, with
  210               0007     	SCR_CHR_34	.rs	1	; a max of 16 CHR banks per MULTI_MAP.
  211                        		.endif
  212                        	
  213                        			; A simple macro to help build a multi-screen map.
  214                        	
  215               0000     		.ifndef	SCREEN
  224                        		.endif
  225                        	
  226    F8:2BB8             	map_blk_flag:	ds	1	; Returned from _get_map_block().
  227    F8:2BB9             	map_blk_mask:	ds	1	; Returned from _get_map_block().
  228                        	
  229                        	; **************
  230                        	; 16-bytes of VDC blkmap info.
  231                        	;
  232                        	; N.B. MUST be 16-bytes before the SGX versions to use PCE_VDC_OFFSET.
  233                        	
  234    F8:2BBA             	vdc_old_chr_x:	ds	1	; Previous top-left X in CHR (lo-byte only).
  235    F8:2BBB             	vdc_old_chr_y:	ds	1	; Previous top-left Y in CHR (lo-byte only).
  236                        	
  237    F8:2BBC             	vdc_tbl_addr:	ds	2	; 256-byte aligned.
  238    F8:2BBE             	vdc_tbl_bank:	ds	1
  239                        	
  240    F8:2BBF             	vdc_blk_addr:	ds	2	; 2KBytes of data, 256-byte aligned.
  241    F8:2BC1             	vdc_blk_bank:	ds	1
  242                        	
  243    F8:2BC2             	vdc_map_addr:	ds	2	; Mapped into MPR3..MPR5, max 16KBytes.
  244    F8:2BC4             	vdc_map_bank:	ds	1
  245                        	
  246    F8:2BC5             	vdc_scr_addr:	ds	2	; 8KByte maximum size.
  247    F8:2BC7             	vdc_scr_bank:	ds	1
  248    F8:2BC8             	vdc_scr_chr12:	ds	1	; Which CHR banks are used by the BLK, with
  249    F8:2BC9             	vdc_scr_chr34:	ds	1	; a max of 16 banks per multi-screen map.
  250                        	
  251               0001     		.if	SUPPORT_SGX
  252                        	
  253                        	; **************
  254                        	; 16-bytes of SGX blkmap info.
  255                        	;
  256                        	; N.B. MUST be 16-bytes after the VDC versions to use SGX_VDC_OFFSET.
  257                        	
  258    F8:2BCA             	sgx_old_chr_x:	ds	1	; Previous top-left X in CHR (lo-byte only).
  259    F8:2BCB             	sgx_old_chr_y:	ds	1	; Previous top-left Y in CHR (lo-byte only).
  260                        	
  261    F8:2BCC             	sgx_tbl_addr:	ds	2	; 256-byte aligned.
  262    F8:2BCE             	sgx_tbl_bank:	ds	1
  263                        	
  264    F8:2BCF             	sgx_blk_addr:	ds	2	; 2KBytes of data, 256-byte aligned.
  265    F8:2BD1             	sgx_blk_bank:	ds	1
  266                        	
  267    F8:2BD2             	sgx_map_addr:	ds	2	; Mapped into MPR3..MPR4, max 8KBytes.
  268    F8:2BD4             	sgx_map_bank:	ds	1
  269                        	
  270    F8:2BD5             	sgx_scr_addr:	ds	2	; 8KByte maximum size.
  271    F8:2BD7             	sgx_scr_bank:	ds	1
  272    F8:2BD8             	sgx_scr_chr12:	ds	1	; Which CHR banks are used by the BLK, with
  273    F8:2BD9             	sgx_scr_chr34:	ds	1	; a max of 16 banks per multi-screen map.
  274                        	
  275                        		.endif	SUPPORT_SGX
  276                        	
  277               0000     		.if	0
  310                        		.endif	0
  311                        	
  312                        	; **************
  313                        	; Aliases for the asm variable names in HuCC.
  314                        	;
  315                        	
  316               0001     		.ifdef	HUCC
  317                        	
  318    F8:2BDA             	_map_blk_flag	.alias	map_blk_flag
  319    F8:2BDA             	_map_blk_mask	.alias	map_blk_mask
  320                        	
  321    F8:2BDA             	_vdc_map_draw_w	.alias	vdc_map_draw_w
  322    F8:2BDA             	_vdc_map_draw_h	.alias	vdc_map_draw_h
  323    F8:2BDA             	_vdc_map_pxl_x	.alias	vdc_map_pxl_x
  324    F8:2BDA             	_vdc_map_pxl_y	.alias	vdc_map_pxl_y
  325    F8:2BDA             	_vdc_old_chr_x	.alias	vdc_old_chr_x
  326    F8:2BDA             	_vdc_old_chr_y	.alias	vdc_old_chr_y
  327    F8:2BDA             	_vdc_tbl_addr	.alias	vdc_tbl_addr
  328    F8:2BDA             	_vdc_tbl_bank	.alias	vdc_tbl_bank
  329    F8:2BDA             	_vdc_blk_addr	.alias	vdc_blk_addr
  330    F8:2BDA             	_vdc_blk_bank	.alias	vdc_blk_bank
  331    F8:2BDA             	_vdc_map_line_w	.alias	vdc_map_line_w
  332    F8:2BDA             	_vdc_map_scrn_w	.alias	vdc_map_scrn_w
  333    F8:2BDA             	_vdc_map_addr	.alias	vdc_map_addr
  334    F8:2BDA             	_vdc_map_bank	.alias	vdc_map_bank
  335    F8:2BDA             	_vdc_scr_addr	.alias	vdc_scr_addr
  336    F8:2BDA             	_vdc_scr_bank	.alias	vdc_scr_bank
  337    F8:2BDA             	_vdc_scr_chr12	.alias	vdc_scr_chr12
  338    F8:2BDA             	_vdc_scr_chr34	.alias	vdc_scr_chr34
  339                        	
  340               0001     		.if	SUPPORT_SGX
  341    F8:2BDA             	_sgx_map_draw_w	.alias	sgx_map_draw_w
  342    F8:2BDA             	_sgx_map_draw_h	.alias	sgx_map_draw_h
  343    F8:2BDA             	_sgx_map_pxl_x	.alias	sgx_map_pxl_x
  344    F8:2BDA             	_sgx_map_pxl_y	.alias	sgx_map_pxl_y
  345    F8:2BDA             	_sgx_old_chr_x	.alias	sgx_old_chr_x
  346    F8:2BDA             	_sgx_old_chr_y	.alias	sgx_old_chr_y
  347    F8:2BDA             	_sgx_tbl_addr	.alias	sgx_tbl_addr
  348    F8:2BDA             	_sgx_tbl_bank	.alias	sgx_tbl_bank
  349    F8:2BDA             	_sgx_blk_addr	.alias	sgx_blk_addr
  350    F8:2BDA             	_sgx_blk_bank	.alias	sgx_blk_bank
  351    F8:2BDA             	_sgx_map_line_w	.alias	sgx_map_line_w
  352    F8:2BDA             	_sgx_map_scrn_w	.alias	sgx_map_scrn_w
  353    F8:2BDA             	_sgx_map_addr	.alias	sgx_map_addr
  354    F8:2BDA             	_sgx_map_bank	.alias	sgx_map_bank
  355    F8:2BDA             	_sgx_scr_addr	.alias	sgx_scr_addr
  356    F8:2BDA             	_sgx_scr_bank	.alias	sgx_scr_bank
  357    F8:2BDA             	_sgx_scr_chr12	.alias	sgx_scr_chr12
  358    F8:2BDA             	_sgx_scr_chr34	.alias	sgx_scr_chr34
  359                        		.endif	SUPPORT_SGX
  360                        	
  361                        		.endif	HUCC
  362                        	
  363                        	; **************
  364                        	; Temporary variables for drawing, using common zero-page locations.
  365                        	;
  366                        	
  367               20F8     	map_bat_x	=	_al	; Set by draw_map(), scroll_map() if drawing
  368               20F9     	map_bat_y	=	_ah	; aligned, or as parameters to blit_map().
  369                        	
  370               20FA     	map_draw_w	=	_bl	; Set by draw_map(), scroll_map(), but given
  371               20FB     	map_draw_h	=	_bh	; as parameters to blit_map().
  372                        	
  373               20FC     	map_pxl_x	=	_cx	; Set by draw_map(), scroll_map() and also by
  374               20FC     	map_chr_x	=	_cl	; blit__map(), from current vdc_map_pxl_x.
  375               20FD     	map_scrn_x	=	_ch
  376                        	
  377               20FE     	map_pxl_y	=	_dx	; Set by draw_map(), scroll_map() and also by
  378               20FE     	map_chr_y	=	_dl	; blit__map(), from current vdc_map_pxl_y.
  379               20FF     	map_scrn_y	=	_dh
  380                        	
  381               20EE     	map_line	=	_si	; Start of map data line being drawn.
  382                        	
  383               2000     	map_count	=	__temp + 0
  384               2001     	map_drawn	=	__temp + 1
  385                        	
  386               E937     			.code
  387                        	
  388                        	
  389                        	
  390    02:C000             	blkmap_group	.procgroup
  391                        	
  392                        	; ***************************************************************************
  393                        	; ***************************************************************************
  394                        	;
  395                        	; _set_blocks - Initialize the block definition pointers.
  396                        	; _sgx_set_blocks - Initialize the block definition pointers.
  397                        	;
  398                        	; void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blk<_al> );
  399                        	; void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blk<_al> );
  400                        	;
  401                        	
  402               0001     		.if	SUPPORT_SGX
  403                        	
  404    02:C000             			.proc	_sgx_set_blocks.3
  405                        	
  406    02:C000  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  407    02:C002  F0         			db	$F0			; Turn "clx" into a "beq".
  408                        	
  409    02:C003             			.ref	_set_blocks.3
  410                        			.endp
  411                        		.endif
  412                        	
  413    02:C003             			.proc	_set_blocks.3
  414                        	
  415    02:C003  82         			clx				; Offset to PCE VDC.
  416                        	
  417    02:C004  BD BD 2B   			lda.h	vdc_tbl_addr, x		; Remap the address to MPR2.
  418    02:C007  29 1F      			and	#$1F
  419    02:C009  09 40      			ora	#$40
  420    02:C00B  9D BD 2B   			sta.h	vdc_tbl_addr, x
  421                        	
  422    02:C00E  BD C0 2B   			lda.h	vdc_blk_addr, x		; Remap the address to MPR2.
  423    02:C011  29 1F      			and	#$1F
  424    02:C013  09 40      			ora	#$40
  425    02:C015  9D C0 2B   			sta.h	vdc_blk_addr, x
  426                        	
  427               0000     		.if	BLKDEF_POINTERS
  479                        		.endif	BLKDEF_POINTERS
  480                        	
  481                        			leave
         02:C018  4C EF FF   			jmp	leave_proc
  482                        	
  483                        			.endp
  484                        	
  485                        	
  486                        	
  487                        	; ***************************************************************************
  488                        	; ***************************************************************************
  489                        	;
  490                        	; _draw_map - Draw the entire screen at the current coordinates.
  491                        	; _sgx_draw_map - Draw the entire screen at the current coordinates.
  492                        	;
  493                        	; void __fastcall draw_map( void );
  494                        	; void __fastcall sgx_draw_map( void );
  495                        	;
  496                        	
  497               0001     		.if	SUPPORT_SGX
  498                        	
  499    02:C01B             	_sgx_draw_map	.proc
  500                        	
  501    02:C01B  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  502    02:C01D  F0         			db	$F0			; Turn "clx" into a "beq".
  503                        	
  504    02:C01E             			.ref	_draw_map
  505                        			.endp
  506                        		.endif
  507                        	
  508    02:C01E             	_draw_map	.proc
  509                        	
  510    02:C01E  82         			clx				; Offset to PCE VDC.
  511                        	
  512    02:C01F  43 04      			tma2				; Preserve MPR2..MPR4.
  513    02:C021  48         			pha
  514    02:C022  43 08      			tma3
  515    02:C024  48         			pha
  516    02:C025  43 10      			tma4
  517    02:C027  48         			pha
  518               0000     		.if	BLKMAP_LARGEMAP
  521                        		.endif
  522                        	
  523    02:C028  20 2A C1   			jsr	map_pxl_2_chr		; Set up the draw coordinates.
  524                        	
  525    02:C02B  A5 FC      			lda	<map_chr_x		; Reset previous X position.
  526    02:C02D  9D BA 2B   			sta	vdc_old_chr_x, x
  527                        	
  528    02:C030  A5 FE      			lda	<map_chr_y		; Reset previous Y position,
  529    02:C032  1A         			inc	a			; ready to draw multiple rows.
  530    02:C033  9D BB 2B   			sta	vdc_old_chr_y, x
  531                        	
  532    02:C036  BD 83 26   			lda	vdc_map_draw_w, x	; Draw the whole screen.
  533    02:C039  85 FA      			sta	<map_draw_w
  534    02:C03B  BD 84 26   			lda	vdc_map_draw_h, x
  535    02:C03E  85 FB      			sta	<map_draw_h
  536                        	
  537    02:C040  20 80 C3   			jsr	map_scroll_y		; Draw N row of CHR to the BAT.
  538                        	
  539               0000     		.if	BLKMAP_LARGEMAP
  542                        		.endif
  543    02:C043  68         			pla				; Restore MPR2..MPR4.
  544    02:C044  53 10      			tam4
  545    02:C046  68         			pla
  546    02:C047  53 08      			tam3
  547    02:C049  68         			pla
  548    02:C04A  53 04      			tam2
  549                        	
  550                        			leave
         02:C04C  4C EF FF   			jmp	leave_proc
  551                        	
  552                        			.endp
  553                        	
  554                        	
  555                        	
  556                        	; ***************************************************************************
  557                        	; ***************************************************************************
  558                        	;
  559                        	; _scroll_map - Draw a single row of CHR into the BAT to update the edge.
  560                        	; _sgx_scroll_map - Draw a single row of CHR into the BAT to update the edge.
  561                        	;
  562                        	; void __fastcall scroll_map( void );
  563                        	; void __fastcall sgx_scroll_map( void );
  564                        	;
  565                        	
  566               0001     		.if	SUPPORT_SGX
  567                        	
  568    02:C04F             	_sgx_scroll_map	.proc
  569                        	
  570    02:C04F  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  571    02:C051  F0         			db	$F0			; Turn "clx" into a "beq".
  572                        	
  573    02:C052             			.ref	_scroll_map
  574                        			.endp
  575                        		.endif
  576                        	
  577    02:C052             	_scroll_map	.proc
  578                        	
  579    02:C052  82         			clx				; Offset to PCE VDC.
  580                        	
  581               0000     		.if	BLKMAP_TIMETEST
  587                        		.endif
  588                        	
  589    02:C053  43 04      			tma2				; Preserve MPR2..MPR4.
  590    02:C055  48         			pha
  591    02:C056  43 08      			tma3
  592    02:C058  48         			pha
  593    02:C059  43 10      			tma4
  594    02:C05B  48         			pha
  595               0000     		.if	BLKMAP_LARGEMAP
  598                        		.endif
  599                        	
  600    02:C05C  20 2A C1   			jsr	map_pxl_2_chr		; Set up the draw coordinates.
  601                        	
  602               0001     		.if	BLKMAP_MULTISCR
  603    02:C05F  A5 FD      			lda	<map_scrn_x		; map_scroll_x can change this!
  604    02:C061  48         			pha
  605                        		.endif
  606                        	
  607    02:C062  BD 84 26   			lda	vdc_map_draw_h, x	; Draw new LHS or RHS if needed.
  608    02:C065  85 FB      			sta	<map_draw_h
  609                        	;		lda	#1			; map_scroll_x only ever draws a
  610                        	;		sta	<map_draw_w		; single column.
  611    02:C067  20 61 C2   			jsr	map_scroll_x
  612                        	
  613    02:C06A  BD BA 2B   			lda	vdc_old_chr_x, x	; Restore map_chr_x which could
  614    02:C06D  85 FC      			sta	<map_chr_x		; be changed by map_scroll_x.
  615                        	
  616               0001     		.if	BLKMAP_MULTISCR
  617    02:C06F  68         			pla				; Restore before map_scroll_y.
  618    02:C070  85 FD      			sta	<map_scrn_x
  619                        		.endif
  620                        	
  621    02:C072  BD 83 26   			lda	vdc_map_draw_w, x	; Draw new TOP or BTM if needed.
  622    02:C075  85 FA      			sta	<map_draw_w
  623    02:C077  A9 01      			lda	#1
  624    02:C079  85 FB      			sta	<map_draw_h
  625    02:C07B  20 80 C3   			jsr	map_scroll_y
  626                        	
  627               0000     		.if	BLKMAP_LARGEMAP
  630                        		.endif
  631    02:C07E  68         			pla				; Restore MPR2..MPR4.
  632    02:C07F  53 10      			tam4
  633    02:C081  68         			pla
  634    02:C082  53 08      			tam3
  635    02:C084  68         			pla
  636    02:C085  53 04      			tam2
  637                        	
  638               0000     		.if	BLKMAP_TIMETEST
  640                        		.endif
  641                        	
  642                        			leave
         02:C087  4C EF FF   			jmp	leave_proc
  643                        	
  644                        			.endp
  645                        	
  646                        	
  647                        	
  648                        	; ***************************************************************************
  649                        	; ***************************************************************************
  650                        	;
  651                        	; _blit_map - Draw a map rectangle to specific BAT coordinates.
  652                        	; _sgx_blit_map - Draw a map rectangle to specific BAT coordinates.
  653                        	;
  654                        	; void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
  655                        	; void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
  656                        	;
  657                        	; Normally you'd just use _draw_map() and _scroll_map(), but for those folks
  658                        	; who really wish to take manual control, you can use this.
  659                        	;
  660                        	
  661               0001     		.if	SUPPORT_SGX
  662                        	
  663                        	_sgx_blit_map	.proc
  669                        			.endp
  670                        		.endif
  671                        	
  672    02:C08A             	_blit_map	.proc
  673                        	
  674    02:C08A  82         			clx				; Offset to PCE VDC.
  675                        	
  676    02:C08B  BD C7 2B   			lda	vdc_scr_bank, x		; Skip this if a multi-screen
  677    02:C08E  D0 36      			bne	.exit			; blkmap.
  678                        	
  679    02:C090  43 04      			tma2				; Preserve MPR2..MPR4.
  680    02:C092  48         			pha
  681    02:C093  43 08      			tma3
  682    02:C095  48         			pha
  683    02:C096  43 10      			tma4
  684    02:C098  48         			pha
  685               0000     		.if	BLKMAP_LARGEMAP
  688                        		.endif
  689                        	
  690    02:C099  BD 8B 26   			lda	vdc_map_option, x	; Preserve current map options.
  691    02:C09C  48         			pha
  692    02:C09D  09 C0      			ora	#MAP_UNALIGNED_X | MAP_UNALIGNED_Y
  693    02:C09F  9D 8B 26   			sta	vdc_map_option, x
  694                        	
  695    02:C0A2  20 2A C1   			jsr	map_pxl_2_chr		; Set up the draw coordinates.
  696                        	
  697    02:C0A5  A5 FA      			lda	<map_draw_w		; Are we drawing just 1 column?
  698    02:C0A7  C9 01      			cmp	#1
  699    02:C0A9  F0 1E      			beq	.draw_column
  700                        	
  701                        			; Draw N rows.
  702                        	
  703    02:C0AB  A5 FC      	.draw_rows:	lda	<map_chr_x		; Reset previous X position.
  704    02:C0AD  9D BA 2B   			sta	vdc_old_chr_x, x
  705                        	
  706    02:C0B0  A5 FE      			lda	<map_chr_y		; Reset previous Y position,
  707    02:C0B2  1A         			inc	a			; ready to draw rows upwards.
  708    02:C0B3  9D BB 2B   			sta	vdc_old_chr_y, x
  709                        	
  710    02:C0B6  20 80 C3   			jsr	map_scroll_y		; Draw a row of CHR to the BAT.
  711                        	
  712                        			; Drawing completed.
  713                        	
  714    02:C0B9  68         	.finished:	pla				; Restore previous map options.
  715    02:C0BA  9D 8B 26   			sta	vdc_map_option, x
  716                        	
  717               0000     		.if	BLKMAP_LARGEMAP
  720                        		.endif
  721    02:C0BD  68         			pla				; Restore MPR2..MPR4.
  722    02:C0BE  53 10      			tam4
  723    02:C0C0  68         			pla
  724    02:C0C1  53 08      			tam3
  725    02:C0C3  68         			pla
  726    02:C0C4  53 04      			tam2
  727                        	
  728                        	.exit:		leave
         02:C0C6  4C EF FF   			jmp	leave_proc
  729                        	
  730                        			; Draw 1 column.
  731                        	
  732    02:C0C9  A5 FC      	.draw_column:	lda	<map_chr_x		; Reset previous X position.
  733    02:C0CB  1A         			inc	a			; ready to draw 1 column.
  734    02:C0CC  9D BA 2B   			sta	vdc_old_chr_x, x
  735                        	
  736    02:C0CF  A5 FE      			lda	<map_chr_y		; Reset previous Y position.
  737    02:C0D1  9D BB 2B   			sta	vdc_old_chr_y, x
  738                        	
  739    02:C0D4  20 61 C2   			jsr	map_scroll_x		; Draw a single column of CHR.
  740                        	
  741    02:C0D7  80 E0      			bra	.finished
  742                        	
  743                        			.endp
  744                        	
  745                        	
  746                        	
  747                        	; ***************************************************************************
  748                        	; ***************************************************************************
  749                        	;
  750                        	; _get_map_block - Get the block number used at a map pixel coordinate.
  751                        	; _sgx_get_map_block - Get the block number used at a map pixel coordinate.
  752                        	;
  753                        	; unsigned char __fastcall _get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
  754                        	; unsigned char __fastcall _sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
  755                        	;
  756                        	
  757               0001     		.if	SUPPORT_SGX
  758                        	
  759                        			.proc	_sgx_get_map_block.2
  765                        			.endp
  766                        		.endif
  767                        	
  768    02:C0D9             			.proc	_get_map_block.2
  769                        	
  770    02:C0D9  82         			clx				; Offset to PCE VDC.
  771                        	
  772    02:C0DA  43 04      			tma2				; Preserve MPR2..MPR4.
  773    02:C0DC  48         			pha
  774    02:C0DD  43 08      			tma3
  775    02:C0DF  48         			pha
  776    02:C0E0  43 10      			tma4
  777    02:C0E2  48         			pha
  778               0000     		.if	BLKMAP_LARGEMAP
  781                        		.endif
  782                        	
  783    02:C0E3  20 3E C1   			jsr	xvt_pxl_2_chr		; Set up the query coordinates.
  784                        	
  785    02:C0E6  20 6C C1   			jsr	map_chr_2_data		; Page in the map address.
  786                        	
  787    02:C0E9  B2 EC      			lda	[_bp]			; Read the BLK from the map.
  788    02:C0EB  A8         			tay
  789                        	
  790    02:C0EC  A5 FC      			lda	<map_chr_x		; Calc the BLK address offset
  791    02:C0EE  4A         			lsr	a			; use depending upon even/odd
  792    02:C0EF  A5 FE      			lda	<map_chr_y		; CHR coordinates (not BAT to
  793    02:C0F1  29 01      			and	#1			; support unaligned drawing).
  794    02:C0F3  2A         			rol	a
  795    02:C0F4  09 04      			ora	#4			; Offset to BLK table top byte.
  796    02:C0F6  7D C0 2B   			adc.h	vdc_blk_addr, x		; What is the BLK data address?
  797    02:C0F9  85 ED      			sta.h	<_bp			; $4000, $4800, $5000 or $5800.
  798    02:C0FB  64 EC      			stz.l	<_bp
  799    02:C0FD  B1 EC      			lda	[_bp], y		; Read the collision flags from
  800    02:C0FF  29 0C      			and	#%00001100		; the top byte of the CHR.
  801    02:C101  4A         			lsr	a
  802    02:C102  4A         			lsr	a
  803    02:C103  4A         			lsr	a			; Swizzle the bottom bit to get
  804    02:C104  90 02      			bcc	!+			; the same bit order as used in
  805    02:C106  09 02      			ora	#2			; .HALTMAP layer.
  806    02:C108  8D B8 2B   	!:		sta	map_blk_flag
  807                        	
  808    02:C10B  BD BE 2B   			lda	vdc_tbl_bank, x		; Is there a table of flags?
  809    02:C10E  F0 09      			beq	!+
  810    02:C110  53 08      			tam3
  811                        	;		inc	a
  812                        	;		tam4
  813                        	;		lda.l	vdc_tbl_addr, x
  814                        	;		sta.l	<_bp
  815    02:C112  BD BD 2B   			lda.h	vdc_tbl_addr, x		; If so, it must be aligned!
  816    02:C115  85 ED      			sta.h	<_bp
  817    02:C117  B1 EC      			lda	[_bp], y		; Read the .MASKMAP/.OVERMAP
  818    02:C119  8D B9 2B   	!:		sta	map_blk_mask		; flag value for this BLK.
  819                        	
  820               0000     		.if	BLKMAP_LARGEMAP
  823                        		.endif
  824    02:C11C  68         			pla				; Restore MPR2..MPR4.
  825    02:C11D  53 10      			tam4
  826    02:C11F  68         			pla
  827    02:C120  53 08      			tam3
  828    02:C122  68         			pla
  829    02:C123  53 04      			tam2
  830                        	
  831    02:C125  02         			sxy				; Put the BLK number in X.
  832    02:C126  C2         			cly
  833                        	
  834                        			leave				; All done!
         02:C127  4C EF FF   			jmp	leave_proc
  835                        	
  836                        			.endp
  837                        	
  838                        	
  839                        	
  840                        	; ***************************************************************************
  841                        	; ***************************************************************************
  842                        	;
  843                        	; map_pxl_2_chr - Convert PXL to CHR, BLK and SCR coordinates.
  844                        	;
  845                        	
  846    02:C12A  BD 89 26   	map_pxl_2_chr:	lda.l	vdc_map_pxl_y, x	; Get current map Y coordinate.
  847    02:C12D  85 FE      			sta.l	<map_pxl_y
  848    02:C12F  BD 8A 26   			lda.h	vdc_map_pxl_y, x
  849    02:C132  85 FF      			sta.h	<map_pxl_y
  850                        	
  851    02:C134  BD 87 26   			lda.l	vdc_map_pxl_x, x	; Get current map X coordinate.
  852    02:C137  85 FC      			sta.l	<map_pxl_x
  853    02:C139  BD 88 26   			lda.h	vdc_map_pxl_x, x
  854    02:C13C  85 FD      			sta.h	<map_pxl_x
  855                        	
  856    02:C13E  A5 FD      	xvt_pxl_2_chr:	lda.h	<map_pxl_x		; Xvert map_pxl_x to map_chr_x.
  857               0001     		.if	BLKMAP_MULTISCR
  858    02:C140  A8         			tay				; Xvert map_pxl_x to map_scrn_x.
  859    02:C141  3C 7E 26   			bit	vdc_bat_width, x
  860    02:C144  70 03      			bvs	.w64
  861    02:C146  10 02      			bpl	.w32
  862    02:C148  4A         	.w128:		lsr	a
  863    02:C149  4A         	.w64:		lsr	a
  864    02:C14A  85 FD      	.w32:		sta	<map_scrn_x
  865    02:C14C  98         			tya
  866                        		.endif
  867    02:C14D  4A         			lsr	a
  868    02:C14E  66 FC      			ror.l	<map_pxl_x
  869    02:C150  4A         			lsr	a
  870    02:C151  66 FC      			ror.l	<map_pxl_x
  871    02:C153  4A         			lsr	a
  872    02:C154  66 FC      			ror.l	<map_pxl_x		; Max map width is 256 CHR.
  873                        	
  874    02:C156  A5 FF      			lda.h	<map_pxl_y		; Xvert map_pxl_y to map_chr_y.
  875               0001     		.if	BLKMAP_MULTISCR
  876    02:C158  A8         			tay				; Xvert map_pxl_y to map_scrn_y.
  877    02:C159  3C 7F 26   			bit	vdc_bat_height, x
  878    02:C15C  50 01      			bvc	.h32
  879    02:C15E  4A         	.h64:		lsr	a
  880    02:C15F  85 FF      	.h32:		sta	<map_scrn_y
  881    02:C161  98         			tya
  882                        		.endif
  883    02:C162  4A         			lsr	a
  884    02:C163  66 FE      			ror.l	<map_pxl_y
  885    02:C165  4A         			lsr	a
  886    02:C166  66 FE      			ror.l	<map_pxl_y
  887    02:C168  4A         			lsr	a
  888    02:C169  66 FE      			ror.l	<map_pxl_y		; Max map width is 256 CHR.
  889                        	
  890    02:C16B  60         			rts
  891                        	
  892                        	
  893                        	
  894                        	; ***************************************************************************
  895                        	; ***************************************************************************
  896                        	;
  897                        	; map_chr_2_data - Page in the MAP address for the CHR coordinates.
  898                        	;
  899                        	
  900    02:C16C             	map_chr_2_data:
  901                        	
  902               0001     		.if	BLKMAP_MULTISCR
  903                        	
  904                        			; Initialization for a multi-screen map.
  905                        	
  906    02:C16C  BD C7 2B   			lda	vdc_scr_bank, x		; Skip this if regular blkmap.
  907    02:C16F  F0 3A      			beq	.regular
  908                        	
  909    02:C171  A5 FC      	.multiscreen:	lda	<map_chr_x		; Compare old_x with cur_x.
  910    02:C173  3D 80 26   			and	vdc_bat_x_mask, x
  911    02:C176  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
  912                        	
  913    02:C178  A5 FE      			lda	<map_chr_y		; Save BAT Y chr coordinate.
  914    02:C17A  3D 81 26   			and	vdc_bat_y_mask, x
  915    02:C17D  85 F9      			sta	<map_bat_y
  916    02:C17F  4A         			lsr	a			; Map BLK Y coordinate.
  917    02:C180  85 EF      			sta.h	<map_line
  918    02:C182  62         			cla
  919    02:C183  3C 7E 26   			bit	vdc_bat_width, x
  920    02:C186  30 08      			bmi	.w128
  921    02:C188  70 03      			bvs	.w64
  922    02:C18A  46 EF      	.w32:		lsr.h	<map_line
  923    02:C18C  6A         			ror	a
  924    02:C18D  46 EF      	.w64:		lsr.h	<map_line
  925    02:C18F  6A         			ror	a
  926    02:C190  46 EF      	.w128:		lsr.h	<map_line
  927    02:C192  6A         			ror	a
  928    02:C193  46 EF      			lsr.h	<map_line		; Hi-byte of (BLK Y * width).
  929    02:C195  6A         			ror	a
  930    02:C196  85 EE      			sta.l	<map_line		; Lo-byte of (BLK Y * width).
  931                        	
  932    02:C198  20 EC C1   			jsr	map_set_screen		; Put BLK & MAP in MPR2-MPR5.
  933                        	
  934    02:C19B  A5 F8      			lda	<map_bat_x		; Calc map data pointer.
  935    02:C19D  4A         			lsr	a			; Map BLK X coordinate.
  936    02:C19E  05 EE      			ora.l	<map_line
  937    02:C1A0  85 EC      			sta.l	<_bp
  938    02:C1A2  A5 EF      			lda.h	<map_line
  939    02:C1A4  18         			clc
  940    02:C1A5  7D C3 2B   			adc.h	vdc_map_addr, x		; N.B. 256-byte aligned!
  941    02:C1A8  85 ED      			sta.h	<_bp
  942                        	
  943    02:C1AA  60         			rts
  944                        	
  945                        		.endif	BLKMAP_MULTISCR
  946                        	
  947                        			; Initialization for a regular map.
  948                        	
  949    02:C1AB  A5 FC      	.regular:	lda	<map_chr_x		; Compare old_x with cur_x.
  950                        	;		bit	vdc_map_option, x	; Set bit7 to disable aligning
  951                        	;		bmi	!+			; BAT X with the map X.
  952    02:C1AD  3D 80 26   			and	vdc_bat_x_mask, x
  953    02:C1B0  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
  954                        	
  955    02:C1B2  A5 FE      	!:		lda	<map_chr_y		; A = map CHR Y coordinate.
  956    02:C1B4  A8         			tay
  957    02:C1B5  4A         			lsr	a
  958    02:C1B6  42         			say				; Y = map BLK Y coordinate.
  959                        	
  960                        	;		bit	vdc_map_option, x	; Set bit6 to disable aligning
  961                        	;		bvs	!+			; BAT Y with the map Y.
  962    02:C1B7  3D 81 26   			and	vdc_bat_y_mask, x
  963    02:C1BA  85 F9      			sta	<map_bat_y		; Save BAT Y chr coordinate.
  964                        	
  965               0000     		.if	BLKMAP_LARGEMAP
  970                        		.endif
  971                        	
  972    02:C1BC  BD 85 26   	!:		lda	vdc_map_line_w, x	; Map width in BLK.
  973               0000     		.if	FAST_MULTIPLY
  986                        		.else
  987    02:C1BF  84 EF      			sty.h	<map_line		; Takes 144..176 cycles.
  988    02:C1C1  A0 08      			ldy	#8
  989    02:C1C3  4A         			lsr	a
  990    02:C1C4  85 EE      			sta.l	<map_line
  991    02:C1C6  62         			cla
  992    02:C1C7  90 03      			bcc	.rotate
  993    02:C1C9  18         	.add:		clc
  994    02:C1CA  65 EF      			adc.h	<map_line
  995    02:C1CC  6A         	.rotate:	ror	a
  996    02:C1CD  66 EE      			ror.l	<map_line		; Lo-byte of (BLK Y * width).
  997    02:C1CF  88         			dey
  998    02:C1D0  B0 F7      			bcs	.add
  999    02:C1D2  D0 F8      			bne	.rotate
 1000    02:C1D4  A8         			tay				; Hi-byte of (BLK Y * width).
 1001                        		.endif
 1002                        	
 1003    02:C1D5  A5 FC      	!:		lda	<map_chr_x		; Map CHR X coordinate.
 1004    02:C1D7  4A         			lsr	a			; Map BLK X coordinate.
 1005    02:C1D8  18         			clc
 1006    02:C1D9  65 EE      			adc.l	<map_line		; Lo-byte of (BLK Y * width).
 1007    02:C1DB  90 01      			bcc	!+
 1008    02:C1DD  C8         			iny				; Hi-byte of (BLK Y * width).
 1009                        	
 1010    02:C1DE  18         	!:		clc				; Calc map data pointer.
 1011    02:C1DF  7D C2 2B   			adc.l	vdc_map_addr, x
 1012    02:C1E2  85 EC      			sta.l	<_bp			; Maximum map size is 16KBytes
 1013    02:C1E4  98         			tya				; so we don't need to consider
 1014    02:C1E5  7D C3 2B   			adc.h	vdc_map_addr, x		; bank overflow.
 1015    02:C1E8  85 ED      			sta.h	<_bp
 1016                        	
 1017    02:C1EA  80 66      			bra	map_set_banks		; Put BLK & MAP in MPR2-MPR5.
 1018                        	
 1019                        	
 1020                        	
 1021               0001     		.if	BLKMAP_MULTISCR
 1022                        	
 1023                        	; ***************************************************************************
 1024                        	; ***************************************************************************
 1025                        	;
 1026                        	; map_set_screen -
 1027                        	;
 1028                        	; Maximum X and Y dimension of 128 screens (32768 pixels).
 1029                        	; Maximum 8KByte total size of screen data (1024 screens).
 1030                        	;
 1031                        	
 1032    02:C1EC  A4 FF      	map_set_screen:	ldy	<map_scrn_y		; Map SCR Y coordinate.
 1033    02:C1EE  BD 86 26   			lda	vdc_map_scrn_w, x	; Map width in SCREENS.
 1034                        	
 1035               0000     		.if	FAST_MULTIPLY
 1048                        		.else
 1049    02:C1F1  84 ED      			sty.h	<_bp			; Takes 144..176 cycles.
 1050    02:C1F3  A0 08      			ldy	#8
 1051    02:C1F5  4A         			lsr	a
 1052    02:C1F6  85 EC      			sta.l	<_bp
 1053    02:C1F8  62         			cla
 1054    02:C1F9  90 03      			bcc	.rotate
 1055    02:C1FB  18         	.add:		clc
 1056    02:C1FC  65 ED      			adc.h	<_bp
 1057    02:C1FE  6A         	.rotate:	ror	a
 1058    02:C1FF  66 EC      			ror.l	<_bp			; Lo-byte of (SCR Y * width).
 1059    02:C201  88         			dey
 1060    02:C202  B0 F7      			bcs	.add
 1061    02:C204  D0 F8      			bne	.rotate
 1062    02:C206  A8         			tay				; Hi-byte of (SCR Y * width).
 1063                        		.endif
 1064                        	
 1065    02:C207  A5 FD      			lda	<map_scrn_x		; Map SCR X coordinate.
 1066    02:C209  18         			clc
 1067    02:C20A  65 EC      			adc.l	<_bp
 1068    02:C20C  90 01      			bcc	!+
 1069    02:C20E  C8         			iny
 1070                        	
 1071    02:C20F  84 ED      	!:		sty.h	<_bp			; 2 bytes per screen entry, max
 1072    02:C211  0A         			asl	a			; 8KByte screen table.
 1073    02:C212  26 ED      			rol.h	<_bp
 1074               0001     		.if	BLKDEF_POINTERS == 0
 1075    02:C214  0A         			asl	a			; 8 bytes per screen entry when
 1076    02:C215  26 ED      			rol.h	<_bp			; not using BLK pointers.
 1077    02:C217  0A         			asl	a
 1078    02:C218  26 ED      			rol.h	<_bp
 1079                        		.endif
 1080                        	
 1081    02:C21A  7D C5 2B   			adc.l	vdc_scr_addr, x		; Calc screen data pointer.
 1082    02:C21D  85 EC      			sta.l	<_bp			; Maximum data size is 8KBytes
 1083    02:C21F  A5 ED      			lda.h	<_bp			; so we don't need to consider
 1084    02:C221  7D C6 2B   			adc.h	vdc_scr_addr, x		; bank overflow.
 1085    02:C224  85 ED      			sta.h	<_bp
 1086                        	
 1087    02:C226  BD C7 2B   			lda	vdc_scr_bank, x		; Map the SCR data in MPR3..MPR4.
 1088    02:C229  53 08      			tam3
 1089    02:C22B  1A         			inc	a
 1090    02:C22C  53 10      			tam4
 1091                        	
 1092    02:C22E  C2         			cly
 1093    02:C22F  B1 EC      			lda	[_bp], y		; Get SCR_MAP_PAGE.
 1094    02:C231  9D C3 2B   			sta.h	vdc_map_addr, x
 1095    02:C234  C8         			iny
 1096    02:C235  B1 EC      			lda	[_bp], y		; Get SCR_MAP_BANK.
 1097    02:C237  9D C4 2B   			sta	vdc_map_bank, x
 1098                        	
 1099               0001     		.if	BLKDEF_POINTERS == 0
 1100    02:C23A  C8         			iny
 1101    02:C23B  B1 EC      			lda	[_bp], y		; Get SCR_BLK_PAGE.
 1102    02:C23D  9D C0 2B   			sta.h	vdc_blk_addr, x
 1103    02:C240  C8         			iny
 1104    02:C241  B1 EC      			lda	[_bp], y		; Get SCR_BLK_BANK.
 1105    02:C243  9D C1 2B   			sta	vdc_blk_bank, x
 1106    02:C246  C8         			iny
 1107    02:C247  B1 EC      			lda	[_bp], y		; Get SCR_TBL_PAGE.
 1108    02:C249  9D BD 2B   			sta.h	vdc_tbl_addr, x
 1109    02:C24C  C8         			iny
 1110    02:C24D  B1 EC      			lda	[_bp], y		; Get SCR_TBL_BANK.
 1111    02:C24F  9D BE 2B   			sta	vdc_tbl_bank, x
 1112               0000     		.if	0				; These are not currently used.
 1119                        		.endif
 1120                        		.endif
 1121                        	
 1122                        	;		lda	vdc_bat_width, x	; Set up the map width.
 1123                        	;		lsr	a			; This should have been set
 1124                        	;		sta	vdc_map_line_w, x	; with the multi-screen map.
 1125                        	
 1126                        	;		jmp	map_set_banks		; Put BLK & MAP in MPR2-MPR5.
 1127                        	
 1128                        			; Fall through to map_set_banks.
 1129                        	
 1130                        		.endif	BLKMAP_MULTISCR
 1131                        	
 1132                        	
 1133                        	
 1134                        	; ***************************************************************************
 1135                        	; ***************************************************************************
 1136                        	;
 1137                        	; map_set_banks - Put BLK & MAP in MPR2-MPR5.
 1138                        	;
 1139                        	
 1140    02:C252  BD C1 2B   	map_set_banks:	lda	vdc_blk_bank, x		; Put the BLK into MPR2.
 1141    02:C255  53 04      			tam2
 1142                        	
 1143    02:C257  BD C4 2B   			lda	vdc_map_bank, x		; Put the MAP into MPR3-MPR5.
 1144    02:C25A  53 08      			tam3
 1145    02:C25C  1A         			inc	a
 1146    02:C25D  53 10      			tam4
 1147               0000     		.if	BLKMAP_LARGEMAP
 1156                        		.endif
 1157                        	
 1158    02:C25F  60         	!:		rts
 1159                        	
 1160                        	
 1161                        	
 1162                        	; ***************************************************************************
 1163                        	; ***************************************************************************
 1164                        	;
 1165                        	; map_scroll_x - Update the BAT when X coordinate changes.
 1166                        	;
 1167                        	; N.B. This will alter map_chr_x and map_scrn_x if moved in +ve direction!
 1168                        	;
 1169                        	; N.B. This only ever draws a single column!
 1170                        	;
 1171                        	
 1172    02:C260  60         	!no_change:	rts
 1173                        	
 1174    02:C261             	map_scroll_x:
 1175                        	
 1176               0001     		.if	BLKMAP_MULTISCR
 1177                        	
 1178                        			; Initialization for a multi-screen map.
 1179                        	
 1180    02:C261  BD C7 2B   			lda	vdc_scr_bank, x		; Skip this if regular blkmap.
 1181    02:C264  F0 56      			beq	.regular
 1182                        	
 1183    02:C266  A5 FC      	.multiscreen:	lda	<map_chr_x		; Compare old_x with cur_x.
 1184    02:C268  DD BA 2B   			cmp	vdc_old_chr_x, x
 1185               0001     		.if	BLKMAP_TIMETEST == 0
 1186    02:C26B  F0 F3      			beq	!no_change-		; Do nothing if no change.
 1187                        		.endif
 1188    02:C26D  9D BA 2B   			sta	vdc_old_chr_x, x
 1189    02:C270  30 11      			bmi	!+			; Test the sign of the change.
 1190                        	
 1191    02:C272  18         			clc				; Draw RHS if chr_x >= old_x.
 1192    02:C273  3D 80 26   			and	vdc_bat_x_mask, x
 1193    02:C276  7D 83 26   			adc	vdc_map_draw_w, x	; Usually (SCR_WIDTH / 8) + 1.
 1194    02:C279  3A         			dec	a
 1195    02:C27A  85 FC      			sta	<map_chr_x		; Update CHR X chr coordinate.
 1196    02:C27C  3C 7E 26   			bit	vdc_bat_width, x
 1197    02:C27F  F0 02      			beq	!+
 1198    02:C281  E6 FD      			inc	<map_scrn_x		; Wrapped to the next screen.
 1199                        	
 1200    02:C283  3D 80 26   	!:		and	vdc_bat_x_mask, x
 1201    02:C286  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
 1202                        	
 1203    02:C288  A5 FE      			lda	<map_chr_y		; Save BAT Y chr coordinate.
 1204    02:C28A  3D 81 26   			and	vdc_bat_y_mask, x
 1205    02:C28D  85 F9      			sta	<map_bat_y
 1206    02:C28F  4A         			lsr	a			; Map BLK Y coordinate.
 1207    02:C290  85 EF      			sta.h	<map_line
 1208    02:C292  62         			cla
 1209    02:C293  3C 7E 26   			bit	vdc_bat_width, x
 1210    02:C296  30 08      			bmi	.w128
 1211    02:C298  70 03      			bvs	.w64
 1212    02:C29A  46 EF      	.w32:		lsr.h	<map_line
 1213    02:C29C  6A         			ror	a
 1214    02:C29D  46 EF      	.w64:		lsr.h	<map_line
 1215    02:C29F  6A         			ror	a
 1216    02:C2A0  46 EF      	.w128:		lsr.h	<map_line
 1217    02:C2A2  6A         			ror	a
 1218    02:C2A3  46 EF      			lsr.h	<map_line		; Hi-byte of (BLK Y * width).
 1219    02:C2A5  6A         			ror	a
 1220    02:C2A6  85 EE      			sta.l	<map_line		; Lo-byte of (BLK Y * width).
 1221                        	
 1222    02:C2A8  20 EC C1   			jsr	map_set_screen		; Put BLK & MAP in MPR2-MPR5.
 1223                        	
 1224    02:C2AB  A5 F8      			lda	<map_bat_x		; Calc map data pointer.
 1225    02:C2AD  4A         			lsr	a			; Map BLK X coordinate.
 1226    02:C2AE  05 EE      			ora.l	<map_line
 1227    02:C2B0  85 EC      			sta.l	<_bp
 1228    02:C2B2  A5 EF      			lda.h	<map_line
 1229    02:C2B4  18         			clc
 1230    02:C2B5  7D C3 2B   			adc.h	vdc_map_addr, x		; N.B. 256-byte aligned!
 1231    02:C2B8  85 ED      			sta.h	<_bp
 1232                        	
 1233    02:C2BA  80 5D      			bra	.draw_col		; Now draw it.
 1234                        	
 1235                        		.endif	BLKMAP_MULTISCR
 1236                        	
 1237                        			; Initialization for a regular map.
 1238                        	
 1239    02:C2BC  A5 FC      	.regular:	lda	<map_chr_x		; Compare old_x with cur_x.
 1240    02:C2BE  DD BA 2B   			cmp	vdc_old_chr_x, x
 1241               0001     		.if	BLKMAP_TIMETEST == 0
 1242    02:C2C1  F0 9D      			beq	!no_change-		; Do nothing if no change.
 1243                        		.endif
 1244    02:C2C3  9D BA 2B   			sta	vdc_old_chr_x, x
 1245    02:C2C6  30 07      			bmi	!+			; Test the sign of the change.
 1246                        	
 1247    02:C2C8  18         			clc				; Draw RHS if chr_x >= old_x.
 1248    02:C2C9  7D 83 26   			adc	vdc_map_draw_w, x	; Usually (SCR_WIDTH / 8) + 1.
 1249    02:C2CC  3A         			dec	a
 1250    02:C2CD  85 FC      			sta	<map_chr_x		; Update CHR X chr coordinate.
 1251                        	
 1252    02:C2CF  3C 8B 26   	!:		bit	vdc_map_option, x	; Set bit7 to disable aligning
 1253    02:C2D2  30 05      			bmi	!+			; BAT X with the map X.
 1254    02:C2D4  3D 80 26   			and	vdc_bat_x_mask, x
 1255    02:C2D7  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
 1256                        	
 1257    02:C2D9  A5 FE      	!:		lda	<map_chr_y		; A = map CHR Y coordinate.
 1258    02:C2DB  A8         			tay
 1259    02:C2DC  4A         			lsr	a
 1260    02:C2DD  42         			say				; Y = map BLK Y coordinate.
 1261                        	
 1262    02:C2DE  3C 8B 26   			bit	vdc_map_option, x	; Set bit6 to disable aligning
 1263    02:C2E1  70 05      			bvs	!+			; BAT Y with the map Y.
 1264    02:C2E3  3D 81 26   			and	vdc_bat_y_mask, x
 1265    02:C2E6  85 F9      			sta	<map_bat_y		; Save BAT Y chr coordinate.
 1266                        	
 1267               0000     		.if	BLKMAP_LARGEMAP
 1272                        		.endif
 1273                        	
 1274    02:C2E8  BD 85 26   	!:		lda	vdc_map_line_w, x	; Map width in BLK.
 1275               0000     		.if	FAST_MULTIPLY
 1288                        		.else
 1289    02:C2EB  84 EF      			sty.h	<map_line		; Takes 144..176 cycles.
 1290    02:C2ED  A0 08      			ldy	#8
 1291    02:C2EF  4A         			lsr	a
 1292    02:C2F0  85 EE      			sta.l	<map_line
 1293    02:C2F2  62         			cla
 1294    02:C2F3  90 03      			bcc	.rotate
 1295    02:C2F5  18         	.add:		clc
 1296    02:C2F6  65 EF      			adc.h	<map_line
 1297    02:C2F8  6A         	.rotate:	ror	a
 1298    02:C2F9  66 EE      			ror.l	<map_line		; Lo-byte of (BLK Y * width).
 1299    02:C2FB  88         			dey
 1300    02:C2FC  B0 F7      			bcs	.add
 1301    02:C2FE  D0 F8      			bne	.rotate
 1302    02:C300  A8         			tay				; Hi-byte of (BLK Y * width).
 1303                        		.endif
 1304                        	
 1305    02:C301  A5 FC      	!:		lda	<map_chr_x		; Map CHR X coordinate.
 1306    02:C303  4A         			lsr	a			; Map BLK X coordinate.
 1307    02:C304  18         			clc
 1308    02:C305  65 EE      			adc.l	<map_line		; Lo-byte of (BLK Y * width).
 1309    02:C307  90 01      			bcc	!+
 1310    02:C309  C8         			iny				; Hi-byte of (BLK Y * width).
 1311                        	
 1312    02:C30A  18         	!:		clc				; Calc map data pointer.
 1313    02:C30B  7D C2 2B   			adc.l	vdc_map_addr, x
 1314    02:C30E  85 EC      			sta.l	<_bp			; Maximum map size is 16KBytes
 1315    02:C310  98         			tya				; so we don't need to consider
 1316    02:C311  7D C3 2B   			adc.h	vdc_map_addr, x		; bank overflow.
 1317    02:C314  85 ED      			sta.h	<_bp
 1318                        	
 1319    02:C316  20 52 C2   			jsr	map_set_banks		; Put BLK & MAP in MPR2-MPR5.
 1320                        	
 1321                        			; Draw the first part of the column.
 1322                        	
 1323    02:C319  A5 F8      	.draw_col:	lda	<map_bat_x		; Set the BAT VRAM destination
 1324    02:C31B  85 F0      			sta.l	<_di			; coordinates.
 1325    02:C31D  A5 F9      			lda	<map_bat_y
 1326    02:C31F  85 F1      			sta.h	<_di
 1327                        	
 1328    02:C321  5D 81 26   			eor	vdc_bat_y_mask, x	; Calc CHR before wrap.
 1329    02:C324  1A         			inc	a
 1330    02:C325  DD 84 26   			cmp	vdc_map_draw_h, x	; Usually (SCR_HEIGHT / 8) + 1.
 1331    02:C328  90 03      			bcc	!+
 1332    02:C32A  BD 84 26   			lda	vdc_map_draw_h, x	; Maximum CHR to draw.
 1333    02:C32D  85 00      	!:		sta	<map_count		; Set number of CHR to draw.
 1334    02:C32F  85 01      			sta	<map_drawn		; Preserve number of CHR drawn.
 1335                        	
 1336    02:C331  A9 05      			lda	#VDC_CR			; Set VDC auto-increment from
 1337    02:C333  95 F7      			sta	<vdc_reg, x		; the BAT width, which is set
 1338    02:C335  9D 00 02   			sta	VDC_AR, x		; up by set_screen_size().
 1339    02:C338  B5 F4      			lda	<vdc_crh, x
 1340    02:C33A  9D 03 02   			sta	VDC_DH, x
 1341                        	
 1342    02:C33D  20 7F C6   			jsr	blk_col_strip		; Draw top of vertical strip.
 1343                        	
 1344                        			; Wrap around and draw the rest of the column (if needed).
 1345                        	
 1346    02:C340  38         			sec				; Are there any more CHR that
 1347    02:C341  BD 84 26   			lda	vdc_map_draw_h, x	; need to be drawn?
 1348    02:C344  E5 01      			sbc	<map_drawn
 1349    02:C346  F0 2C      			beq	.done
 1350                        	
 1351    02:C348  85 00      			sta	<map_count		; Set number of CHR to draw.
 1352                        	
 1353    02:C34A  A5 FE      			lda	<map_chr_y		; Update CHR Y coordinate for
 1354    02:C34C  48         			pha				; drawing unaligned tiles.
 1355    02:C34D  18         			clc
 1356    02:C34E  65 01      			adc	<map_drawn
 1357    02:C350  85 FE      			sta	<map_chr_y
 1358                        	
 1359               0001     		.if	BLKMAP_MULTISCR
 1360    02:C352  BD C7 2B   			lda	vdc_scr_bank, x		; Skip this if regular blkmap.
 1361    02:C355  F0 0F      			beq	!+
 1362                        	
 1363    02:C357  E6 FF      			inc	<map_scrn_y		; Wrapped to the next screen.
 1364                        	
 1365    02:C359  20 EC C1   			jsr	map_set_screen		; Put BLK & MAP in MPR2-MPR5.
 1366                        	
 1367    02:C35C  A5 F8      			lda	<map_bat_x		; Calc map data pointer.
 1368    02:C35E  4A         			lsr	a			; Map BLK X coordinate.
 1369    02:C35F  85 EC      			sta.l	<_bp
 1370    02:C361  BD C3 2B   			lda.h	vdc_map_addr, x		; N.B. 256-byte aligned!
 1371    02:C364  85 ED      			sta.h	<_bp
 1372                        		.endif
 1373                        	
 1374    02:C366  A5 F8      	!:		lda	<map_bat_x		; Set the BAT VRAM destination
 1375    02:C368  85 F0      			sta.l	<_di			; coordinates.
 1376    02:C36A  64 F1      			stz.h	<_di			; Reset 1st row to draw.
 1377                        	
 1378    02:C36C  20 7F C6   			jsr	blk_col_strip		; Draw btm of vertical strip.
 1379                        	
 1380               0001     		.if	BLKMAP_MULTISCR
 1381    02:C36F  C6 FF      			dec	<map_scrn_y		; Restore, no check if should.
 1382                        		.endif
 1383                        	
 1384    02:C371  68         			pla				; Restore CHR Y coordinate, we
 1385    02:C372  85 FE      			sta	<map_chr_y		; might draw another column!
 1386                        	
 1387    02:C374  A9 05      	.done:		lda	#VDC_CR			; Set VDC auto-increment to 1.
 1388    02:C376  95 F7      			sta	<vdc_reg, x
 1389    02:C378  9D 00 02   			sta	VDC_AR, x
 1390    02:C37B  9E 03 02   			stz	VDC_DH, x
 1391                        	
 1392    02:C37E  60         			rts
 1393                        	
 1394                        	
 1395                        	
 1396                        	; ***************************************************************************
 1397                        	; ***************************************************************************
 1398                        	;
 1399                        	; map_scroll_y - Update the BAT when Y coordinate changes.
 1400                        	;
 1401                        	; N.B. This will alter map_chr_y and map_scrn_y if moved in +ve direction!
 1402                        	;
 1403                        	; N.B. This draws multiple rows when called from _draw_map or _blit_map.
 1404                        	;
 1405                        	
 1406    02:C37F  60         	!no_change:	rts
 1407                        	
 1408    02:C380             	map_scroll_y:
 1409                        	
 1410               0001     		.if	BLKMAP_MULTISCR
 1411                        	
 1412                        			; Initialization for a multi-screen map.
 1413                        	
 1414    02:C380  BD C7 2B   			lda	vdc_scr_bank, x		; Skip this if regular blkmap.
 1415    02:C383  F0 56      			beq	.regular
 1416                        	
 1417    02:C385  A5 FE      	.multiscr:	lda	<map_chr_y		; Compare old_y with cur_y.
 1418    02:C387  DD BB 2B   			cmp	vdc_old_chr_y, x
 1419               0001     		.if	BLKMAP_TIMETEST == 0
 1420    02:C38A  F0 F3      			beq	!no_change-		; Do nothing if no change.
 1421                        		.endif
 1422    02:C38C  9D BB 2B   			sta	vdc_old_chr_y, x
 1423    02:C38F  30 11      			bmi	!+			; Test the sign of the change.
 1424                        	
 1425    02:C391  18         			clc				; Draw bottom if chr_y >= old_y.
 1426    02:C392  3D 81 26   			and	vdc_bat_y_mask, x
 1427    02:C395  7D 84 26   			adc	vdc_map_draw_h, x	; Usually (SCR_HEIGHT / 8) + 1.
 1428    02:C398  3A         			dec	a
 1429    02:C399  85 FE      			sta	<map_chr_y		; Update CHR Y chr coordinate.
 1430    02:C39B  3C 7F 26   			bit	vdc_bat_height, x
 1431    02:C39E  F0 02      			beq	!+
 1432    02:C3A0  E6 FF      			inc	<map_scrn_y		; Wrapped to the next screen.
 1433                        	
 1434    02:C3A2  3D 81 26   	!:		and	vdc_bat_y_mask, x
 1435    02:C3A5  85 F9      			sta	<map_bat_y		; Save BAT Y chr coordinate.
 1436                        	
 1437    02:C3A7  4A         			lsr	a			; Map BLK Y coordinate.
 1438    02:C3A8  85 EF      			sta.h	<map_line
 1439    02:C3AA  62         			cla
 1440    02:C3AB  3C 7E 26   			bit	vdc_bat_width, x
 1441    02:C3AE  30 08      			bmi	.w128
 1442    02:C3B0  70 03      			bvs	.w64
 1443    02:C3B2  46 EF      	.w32:		lsr.h	<map_line
 1444    02:C3B4  6A         			ror	a
 1445    02:C3B5  46 EF      	.w64:		lsr.h	<map_line
 1446    02:C3B7  6A         			ror	a
 1447    02:C3B8  46 EF      	.w128:		lsr.h	<map_line
 1448    02:C3BA  6A         			ror	a
 1449    02:C3BB  46 EF      			lsr.h	<map_line		; Hi-byte of (BLK Y * width).
 1450    02:C3BD  6A         			ror	a
 1451    02:C3BE  85 EE      			sta.l	<map_line		; Lo-byte of (BLK Y * width).
 1452                        	
 1453    02:C3C0  A5 FC      			lda	<map_chr_x
 1454    02:C3C2  3D 80 26   			and	vdc_bat_x_mask, x
 1455    02:C3C5  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
 1456                        	
 1457                        			; Loop to here if drawing multiple multi-screen rows.
 1458                        	
 1459    02:C3C7  20 EC C1   	.multiscr_row:	jsr	map_set_screen		; Put BLK & MAP in MPR2-MPR5.
 1460                        	
 1461    02:C3CA  A5 F8      			lda	<map_bat_x		; Calc map data pointer.
 1462    02:C3CC  4A         			lsr	a			; Map BLK X coordinate.
 1463    02:C3CD  05 EE      			ora.l	<map_line
 1464    02:C3CF  85 EC      			sta.l	<_bp
 1465    02:C3D1  A5 EF      			lda.h	<map_line
 1466    02:C3D3  18         			clc
 1467    02:C3D4  7D C3 2B   			adc.h	vdc_map_addr, x		; N.B. 256-byte aligned!
 1468    02:C3D7  85 ED      			sta.h	<_bp
 1469                        	
 1470    02:C3D9  80 60      			bra	.draw_row		; Now draw it.
 1471                        	
 1472                        		.endif	BLKMAP_MULTISCR
 1473                        	
 1474                        			; Initialization for a regular blkmap.
 1475                        	
 1476    02:C3DB  A5 FE      	.regular:	lda	<map_chr_y		; Compare old_y with cur_y.
 1477    02:C3DD  DD BB 2B   			cmp	vdc_old_chr_y, x
 1478               0001     		.if	BLKMAP_TIMETEST == 0
 1479    02:C3E0  F0 9D      			beq	!no_change-		; Do nothing if no change.
 1480                        		.endif
 1481    02:C3E2  9D BB 2B   			sta	vdc_old_chr_y, x
 1482    02:C3E5  30 07      			bmi	!+			; Test the sign of the change.
 1483                        	
 1484    02:C3E7  18         			clc				; Draw bottom if chr_y >= old_y.
 1485    02:C3E8  7D 84 26   			adc	vdc_map_draw_h, x	; Usually (SCR_HEIGHT / 8) + 1.
 1486    02:C3EB  3A         			dec	a
 1487    02:C3EC  85 FE      			sta	<map_chr_y		; Update CHR Y chr coordinate.
 1488                        	
 1489    02:C3EE  A8         	!:		tay				; A = map CHR Y coordinate.
 1490    02:C3EF  4A         			lsr	a
 1491    02:C3F0  42         			say				; Y = map BLK Y coordinate.
 1492                        	
 1493    02:C3F1  3C 8B 26   			bit	vdc_map_option, x	; Set bit6 to disable aligning
 1494    02:C3F4  70 05      			bvs	!+			; BAT Y with the map Y.
 1495    02:C3F6  3D 81 26   			and	vdc_bat_y_mask, x
 1496    02:C3F9  85 F9      			sta	<map_bat_y		; Save BAT Y chr coordinate.
 1497                        	
 1498    02:C3FB  3C 8B 26   	!:		bit	vdc_map_option, x	; Set bit7 to disable aligning
 1499    02:C3FE  30 07      			bmi	!+			; BAT X with the map X.
 1500    02:C400  A5 FC      			lda	<map_chr_x
 1501    02:C402  3D 80 26   			and	vdc_bat_x_mask, x
 1502    02:C405  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
 1503    02:C407             	!:
 1504                        	
 1505               0000     		.if	BLKMAP_LARGEMAP
 1510                        		.endif
 1511                        	
 1512    02:C407  BD 85 26   			lda	vdc_map_line_w, x	; Map width in BLK.
 1513               0000     		.if	FAST_MULTIPLY
 1526                        		.else
 1527    02:C40A  84 EF      			sty.h	<map_line		; Takes 144..176 cycles.
 1528    02:C40C  A0 08      			ldy	#8
 1529    02:C40E  4A         			lsr	a
 1530    02:C40F  85 EE      			sta.l	<map_line
 1531    02:C411  62         			cla
 1532    02:C412  90 03      			bcc	.rotate
 1533    02:C414  18         	.add:		clc
 1534    02:C415  65 EF      			adc.h	<map_line
 1535    02:C417  6A         	.rotate:	ror	a
 1536    02:C418  66 EE      			ror.l	<map_line		; Lo-byte of (BLK Y * width).
 1537    02:C41A  88         			dey
 1538    02:C41B  B0 F7      			bcs	.add
 1539    02:C41D  D0 F8      			bne	.rotate
 1540    02:C41F  85 EF      			sta.h	<map_line		; Hi-byte of (BLK Y * width).
 1541                        		.endif
 1542                        	
 1543    02:C421  20 52 C2   			jsr	map_set_banks		; Put BLK & MAP in MPR2-MPR5.
 1544                        	
 1545                        			; Loop to here if drawing multiple regular blkmap rows.
 1546                        	
 1547    02:C424  A4 EF      	.regular_row:	ldy.h	<map_line		; Hi-byte of (BLK Y * width).
 1548    02:C426  A5 FC      			lda	<map_chr_x		; Map CHR X coordinate.
 1549    02:C428  4A         			lsr	a			; Map BLK X coordinate.
 1550    02:C429  18         			clc
 1551    02:C42A  65 EE      			adc.l	<map_line		; Lo-byte of (BLK Y * width).
 1552    02:C42C  90 01      			bcc	!+
 1553    02:C42E  C8         			iny
 1554    02:C42F  18         	!:		clc				; Calc map data pointer.
 1555    02:C430  7D C2 2B   			adc.l	vdc_map_addr, x
 1556    02:C433  85 EC      			sta.l	<_bp			; Maximum map size is 16KBytes
 1557    02:C435  98         			tya				; so we don't need to consider
 1558    02:C436  7D C3 2B   			adc.h	vdc_map_addr, x		; bank overflow.
 1559    02:C439  85 ED      			sta.h	<_bp
 1560                        	
 1561                        			; Draw the first part of the row.
 1562                        	
 1563    02:C43B  A5 F9      	.draw_row:	lda	<map_bat_y		; Set the BAT VRAM destination
 1564    02:C43D  85 F1      			sta.h	<_di			; coordinates.
 1565    02:C43F  A5 F8      			lda	<map_bat_x
 1566    02:C441  85 F0      			sta.l	<_di
 1567                        	
 1568    02:C443  5D 80 26   			eor	vdc_bat_x_mask, x	; Calc CHR before wrap.
 1569    02:C446  1A         			inc	a
 1570    02:C447  C5 FA      			cmp	<map_draw_w		; Usually (SCR_WIDTH / 8) + 1.
 1571    02:C449  90 02      			bcc	!+
 1572    02:C44B  A5 FA      			lda	<map_draw_w		; Maximum CHR to draw.
 1573    02:C44D  85 00      	!:		sta	<map_count		; Set number of CHR to draw.
 1574    02:C44F  85 01      			sta	<map_drawn		; Preserve number of CHR drawn.
 1575                        	
 1576    02:C451  20 C1 C4   			jsr	blk_row_strip		; Draw lhs of horizontal strip.
 1577                        	
 1578                        			; Wrap around and draw the rest of the row (if needed).
 1579                        	
 1580    02:C454  38         			sec				; Are there any more CHR that
 1581    02:C455  A5 FA      			lda	<map_draw_w		; need to be drawn?
 1582    02:C457  E5 01      			sbc	<map_drawn
 1583    02:C459  F0 2E      			beq	.done_row
 1584                        	
 1585    02:C45B  85 00      			sta	<map_count		; Set number of CHR to draw.
 1586                        	
 1587    02:C45D  A5 FC      			lda	<map_chr_x		; Update CHR X coordinate for
 1588    02:C45F  48         			pha				; drawing unaligned tiles.
 1589    02:C460  18         			clc
 1590    02:C461  65 01      			adc	<map_drawn
 1591    02:C463  85 FC      			sta	<map_chr_x
 1592                        	
 1593               0001     		.if	BLKMAP_MULTISCR
 1594    02:C465  BD C7 2B   			lda	vdc_scr_bank, x		; Skip this if regular blkmap.
 1595    02:C468  F0 11      			beq	!+
 1596                        	
 1597    02:C46A  E6 FD      			inc	<map_scrn_x		; Wrapped to the next screen.
 1598                        	
 1599    02:C46C  20 EC C1   			jsr	map_set_screen		; Locate screen's BLK and MAP.
 1600                        	
 1601    02:C46F  18         			clc				; Calc map data pointer.
 1602    02:C470  A5 EE      			lda.l	<map_line
 1603    02:C472  85 EC      			sta.l	<_bp
 1604    02:C474  A5 EF      			lda.h	<map_line
 1605    02:C476  7D C3 2B   			adc.h	vdc_map_addr, x		; N.B. 256-byte aligned!
 1606    02:C479  85 ED      			sta.h	<_bp
 1607                        		.endif
 1608                        	
 1609    02:C47B  A5 F9      	!:		lda	<map_bat_y		; Set the BAT VRAM destination
 1610    02:C47D  85 F1      			sta.h	<_di			; coordinates.
 1611    02:C47F  64 F0      			stz.l	<_di			; Reset 1st column to draw.
 1612                        	
 1613    02:C481  20 C1 C4   			jsr	blk_row_strip		; Draw rhs of horizontal strip.
 1614                        	
 1615               0001     		.if	BLKMAP_MULTISCR
 1616    02:C484  C6 FD      			dec	<map_scrn_x		; Restore, no check if should.
 1617                        		.endif	BLKMAP_MULTISCR
 1618                        	
 1619    02:C486  68         			pla				; Restore CHR X coordinate, we
 1620    02:C487  85 FC      			sta	<map_chr_x		; might draw another row!
 1621                        	
 1622    02:C489  C6 FB      	.done_row:	dec	<map_draw_h		; Are all desired rows drawn?
 1623    02:C48B  F0 33      			beq	.finished
 1624                        	
 1625    02:C48D  E6 FE      			inc	<map_chr_y		; Move CHR Y down by 1.
 1626                        	
 1627    02:C48F  A5 FE      			lda	<map_chr_y		; If new BLK then ...
 1628    02:C491  4A         			lsr	a
 1629    02:C492  B0 0B      			bcs	!+
 1630    02:C494  BD 85 26   			lda	vdc_map_line_w, x	; Move the map line pointer to
 1631    02:C497  65 EE      			adc.l	<map_line		; the next line.
 1632    02:C499  85 EE      			sta.l	<map_line
 1633    02:C49B  90 02      			bcc	!+
 1634    02:C49D  E6 EF      			inc.h	<map_line
 1635                        	
 1636    02:C49F  A5 F9      	!:		lda	<map_bat_y		; Move BAT Y down by 1.
 1637    02:C4A1  1A         			inc	a
 1638    02:C4A2  3D 81 26   			and	vdc_bat_y_mask, x
 1639    02:C4A5  85 F9      			sta	<map_bat_y
 1640                        	
 1641               0001     		.if	BLKMAP_MULTISCR
 1642    02:C4A7  BC C7 2B   			ldy	vdc_scr_bank, x		; Skip this if regular blkmap.
 1643    02:C4AA  D0 03 4C 24			beq	.regular_row
         02:C4AE  C4          
 1644                        	
 1645    02:C4AF  A8         			tay				; If wrapped to the top line of
 1646    02:C4B0  D0 0B      			bne	!+			; of the BAT then increment the
 1647    02:C4B2  E6 FF      			inc	<map_scrn_y		; screen.
 1648                        	
 1649    02:C4B4  BD 82 26   			lda	vdc_bat_limit, x	; The map line must wrap around
 1650    02:C4B7  4A         			lsr	a			; too. This is simple since its
 1651    02:C4B8  4A         			lsr	a			; size (in bytes) is 1/4 of the
 1652    02:C4B9  25 EF      			and.h	<map_line		; BAT size (in words) and it is
 1653    02:C4BB  85 EF      			sta.h	<map_line		; a power-of-2.
 1654                        	
 1655    02:C4BD  4C C7 C3   	!:		jmp	.multiscr_row		; Draw next row.
 1656                        		.else
 1658                        		.endif	BLKMAP_MULTISCR
 1659                        	
 1660    02:C4C0  60         	.finished:	rts
 1661                        	
 1662                        	
 1663                        	
 1664               0000     		.if	BLKDEF_POINTERS
 1858                        		.else	BLKDEF_POINTERS
 1859                        	
 1860                        	
 1861                        	
 1862                        	; ***************************************************************************
 1863                        	; ***************************************************************************
 1864                        	;
 1865                        	; blk_row_strip - Draw a single row of CHR into the BAT.
 1866                        	;
 1867                        	
 1868    02:C4C1  20 34 E4   	blk_row_strip:	jsr	set_di_xy_mawr		; Set the BAT VRAM destination.
 1869                        	
 1870    02:C4C4  A5 FC      			lda	<map_chr_x		; Select what drawing code to
 1871    02:C4C6  4A         			lsr	a			; use depending upon even/odd
 1872    02:C4C7  A5 FE      			lda	<map_chr_y		; CHR coordinates (not BAT to
 1873    02:C4C9  29 01      			and	#1			; support unaligned drawing).
 1874    02:C4CB  2A         			rol	a
 1875    02:C4CC  0A         			asl	a
 1876    02:C4CD  1D C0 2B   			ora.h	vdc_blk_addr, x		; What is the BLK data address?
 1877    02:C4D0  29 1E      			and	#%00011110		; $4000, $4800, $5000 or $5800.
 1878    02:C4D2  A8         			tay
 1879    02:C4D3  B9 E0 C4   			lda.h	.jump_table, y		; Push the address of the code.
 1880    02:C4D6  48         			pha
 1881    02:C4D7  B9 DF C4   			lda.l	.jump_table, y
 1882    02:C4DA  48         			pha
 1883                        	
 1884    02:C4DB  B2 EC      			lda	[_bp]			; Get the first BLK number.
 1885    02:C4DD  A8         			tay
 1886                        	
 1887    02:C4DE  60         			rts				; Jump to the drawing code.
 1888                        	
 1889    02:C4DF  01 C5      	.jump_table:	dw	b4000_top_even - 1
 1890    02:C4E1  14 C5      			dw	b4000_top_odd - 1
 1891    02:C4E3  31 C5      			dw	b4000_btm_even - 1
 1892    02:C4E5  44 C5      			dw	b4000_btm_odd - 1
 1893                        	
 1894    02:C4E7  61 C5      			dw	b4800_top_even - 1
 1895    02:C4E9  74 C5      			dw	b4800_top_odd - 1
 1896    02:C4EB  91 C5      			dw	b4800_btm_even - 1
 1897    02:C4ED  A4 C5      			dw	b4800_btm_odd - 1
 1898                        	
 1899    02:C4EF  C1 C5      			dw	b5000_top_even - 1
 1900    02:C4F1  D4 C5      			dw	b5000_top_odd - 1
 1901    02:C4F3  F1 C5      			dw	b5000_btm_even - 1
 1902    02:C4F5  04 C6      			dw	b5000_btm_odd - 1
 1903                        	
 1904    02:C4F7  21 C6      			dw	b5800_top_even - 1
 1905    02:C4F9  34 C6      			dw	b5800_top_odd - 1
 1906    02:C4FB  51 C6      			dw	b5800_btm_even - 1
 1907    02:C4FD  64 C6      			dw	b5800_btm_odd - 1
 1908                        	
 1909                        			; top horizontal (32+2 rept)
 1910                        			;
 1911                        			; 89 cycles per block * 17 -> 1513 cycles
 1912                        	
 1913    02:C4FF  B2 EC      	!repeat:	lda	[_bp]			; 7
 1914    02:C501  A8         			tay				; 2
 1915                        	
 1916    02:C502  B9 00 40   	b4000_top_even:	lda	BLK_4000_TL_L, y	; 5
 1917    02:C505  9D 02 02   			sta	VDC_DL, x		; 6
 1918    02:C508  B9 00 44   			lda	BLK_4000_TL_H, y	; 5
 1919               0001     		.if	BLKDEF_CHR_FLAG
 1920    02:C50B  29 F3      			and	#%11110011		; 2
 1921                        		.endif
 1922    02:C50D  1A         			inc	a			; 2
 1923    02:C50E  9D 03 02   			sta	VDC_DH, x		; 6
 1924                        	
 1925    02:C511  C6 00      			dec	<map_count		; 6
 1926    02:C513  F0 19      			beq	!end+			; 2
 1927                        	
 1928    02:C515  B9 00 41   	b4000_top_odd:	lda	BLK_4000_TR_L, y	; 5
 1929    02:C518  9D 02 02   			sta	VDC_DL, x		; 6
 1930    02:C51B  B9 00 45   			lda	BLK_4000_TR_H, y	; 5
 1931               0001     		.if	BLKDEF_CHR_FLAG
 1932    02:C51E  29 F3      			and	#%11110011		; 2
 1933                        		.endif
 1934    02:C520  1A         			inc	a			; 2
 1935    02:C521  9D 03 02   			sta	VDC_DH, x		; 6
 1936                        	
 1937    02:C524  E6 EC      			inc.l	<_bp			; 6
 1938    02:C526  D0 02      			bne	!+			; 2/4
 1939    02:C528  E6 ED      			inc.h	<_bp			; 6
 1940                        	
 1941    02:C52A  C6 00      	!:		dec	<map_count		; 6
 1942    02:C52C  D0 D1      			bne	!repeat-		; 4
 1943                        	
 1944    02:C52E  60         	!end:		rts
 1945                        	
 1946                        			; btm horizontal (32+2 rept)
 1947                        			;
 1948                        			; 89 cycles per block * 17 -> 1513 cycles
 1949                        	
 1950    02:C52F  B2 EC      	!repeat:	lda	[_bp]			; 7
 1951    02:C531  A8         			tay				; 2
 1952                        	
 1953    02:C532  B9 00 42   	b4000_btm_even:	lda	BLK_4000_BL_L, y	; 5
 1954    02:C535  9D 02 02   			sta	VDC_DL, x		; 6
 1955    02:C538  B9 00 46   			lda	BLK_4000_BL_H, y	; 5
 1956               0001     		.if	BLKDEF_CHR_FLAG
 1957    02:C53B  29 F3      			and	#%11110011		; 2
 1958                        		.endif
 1959    02:C53D  1A         			inc	a			; 2
 1960    02:C53E  9D 03 02   			sta	VDC_DH, x		; 6
 1961                        	
 1962    02:C541  C6 00      			dec	<map_count		; 6
 1963    02:C543  F0 19      			beq	!end+			; 2
 1964                        	
 1965    02:C545  B9 00 43   	b4000_btm_odd:	lda	BLK_4000_BR_L, y	; 5
 1966    02:C548  9D 02 02   			sta	VDC_DL, x		; 6
 1967    02:C54B  B9 00 47   			lda	BLK_4000_BR_H, y	; 5
 1968               0001     		.if	BLKDEF_CHR_FLAG
 1969    02:C54E  29 F3      			and	#%11110011		; 2
 1970                        		.endif
 1971    02:C550  1A         			inc	a			; 2
 1972    02:C551  9D 03 02   			sta	VDC_DH, x		; 6
 1973                        	
 1974    02:C554  E6 EC      			inc.l	<_bp			; 6
 1975    02:C556  D0 02      			bne	!+			; 2/4
 1976    02:C558  E6 ED      			inc.h	<_bp			; 6
 1977                        	
 1978    02:C55A  C6 00      	!:		dec	<map_count		; 6
 1979    02:C55C  D0 D1      			bne	!repeat-		; 4
 1980                        	
 1981    02:C55E  60         	!end:		rts
 1982                        	
 1983                        			; top horizontal (32+2 rept)
 1984                        			;
 1985                        			; 89 cycles per block * 17 -> 1513 cycles
 1986                        	
 1987    02:C55F  B2 EC      	!repeat:	lda	[_bp]			; 7
 1988    02:C561  A8         			tay				; 2
 1989                        	
 1990    02:C562  B9 00 48   	b4800_top_even:	lda	BLK_4800_TL_L, y	; 5
 1991    02:C565  9D 02 02   			sta	VDC_DL, x		; 6
 1992    02:C568  B9 00 4C   			lda	BLK_4800_TL_H, y	; 5
 1993               0001     		.if	BLKDEF_CHR_FLAG
 1994    02:C56B  29 F3      			and	#%11110011		; 2
 1995                        		.endif
 1996    02:C56D  1A         			inc	a			; 2
 1997    02:C56E  9D 03 02   			sta	VDC_DH, x		; 6
 1998                        	
 1999    02:C571  C6 00      			dec	<map_count		; 6
 2000    02:C573  F0 19      			beq	!end+			; 2
 2001                        	
 2002    02:C575  B9 00 49   	b4800_top_odd:	lda	BLK_4800_TR_L, y	; 5
 2003    02:C578  9D 02 02   			sta	VDC_DL, x		; 6
 2004    02:C57B  B9 00 4D   			lda	BLK_4800_TR_H, y	; 5
 2005               0001     		.if	BLKDEF_CHR_FLAG
 2006    02:C57E  29 F3      			and	#%11110011		; 2
 2007                        		.endif
 2008    02:C580  1A         			inc	a			; 2
 2009    02:C581  9D 03 02   			sta	VDC_DH, x		; 6
 2010                        	
 2011    02:C584  E6 EC      			inc.l	<_bp			; 6
 2012    02:C586  D0 02      			bne	!+			; 2/4
 2013    02:C588  E6 ED      			inc.h	<_bp			; 6
 2014                        	
 2015    02:C58A  C6 00      	!:		dec	<map_count		; 6
 2016    02:C58C  D0 D1      			bne	!repeat-		; 4
 2017                        	
 2018    02:C58E  60         	!end:		rts
 2019                        	
 2020                        			; btm horizontal (32+2 rept)
 2021                        			;
 2022                        			; 89 cycles per block * 17 -> 1513 cycles
 2023                        	
 2024    02:C58F  B2 EC      	!repeat:	lda	[_bp]			; 7
 2025    02:C591  A8         			tay				; 2
 2026                        	
 2027    02:C592  B9 00 4A   	b4800_btm_even:	lda	BLK_4800_BL_L, y	; 5
 2028    02:C595  9D 02 02   			sta	VDC_DL, x		; 6
 2029    02:C598  B9 00 4E   			lda	BLK_4800_BL_H, y	; 5
 2030               0001     		.if	BLKDEF_CHR_FLAG
 2031    02:C59B  29 F3      			and	#%11110011		; 2
 2032                        		.endif
 2033    02:C59D  1A         			inc	a			; 2
 2034    02:C59E  9D 03 02   			sta	VDC_DH, x		; 6
 2035                        	
 2036    02:C5A1  C6 00      			dec	<map_count		; 6
 2037    02:C5A3  F0 19      			beq	!end+			; 2
 2038                        	
 2039    02:C5A5  B9 00 4B   	b4800_btm_odd:	lda	BLK_4800_BR_L, y	; 5
 2040    02:C5A8  9D 02 02   			sta	VDC_DL, x		; 6
 2041    02:C5AB  B9 00 4F   			lda	BLK_4800_BR_H, y	; 5
 2042               0001     		.if	BLKDEF_CHR_FLAG
 2043    02:C5AE  29 F3      			and	#%11110011		; 2
 2044                        		.endif
 2045    02:C5B0  1A         			inc	a			; 2
 2046    02:C5B1  9D 03 02   			sta	VDC_DH, x		; 6
 2047                        	
 2048    02:C5B4  E6 EC      			inc.l	<_bp			; 6
 2049    02:C5B6  D0 02      			bne	!+			; 2/4
 2050    02:C5B8  E6 ED      			inc.h	<_bp			; 6
 2051                        	
 2052    02:C5BA  C6 00      	!:		dec	<map_count		; 6
 2053    02:C5BC  D0 D1      			bne	!repeat-		; 4
 2054                        	
 2055    02:C5BE  60         	!end:		rts
 2056                        	
 2057                        			; top horizontal (32+2 rept)
 2058                        			;
 2059                        			; 89 cycles per block * 17 -> 1513 cycles
 2060                        	
 2061    02:C5BF  B2 EC      	!repeat:	lda	[_bp]			; 7
 2062    02:C5C1  A8         			tay				; 2
 2063                        	
 2064    02:C5C2  B9 00 50   	b5000_top_even:	lda	BLK_5000_TL_L, y	; 5
 2065    02:C5C5  9D 02 02   			sta	VDC_DL, x		; 6
 2066    02:C5C8  B9 00 54   			lda	BLK_5000_TL_H, y	; 5
 2067               0001     		.if	BLKDEF_CHR_FLAG
 2068    02:C5CB  29 F3      			and	#%11110011		; 2
 2069                        		.endif
 2070    02:C5CD  1A         			inc	a			; 2
 2071    02:C5CE  9D 03 02   			sta	VDC_DH, x		; 6
 2072                        	
 2073    02:C5D1  C6 00      			dec	<map_count		; 6
 2074    02:C5D3  F0 19      			beq	!end+			; 2
 2075                        	
 2076    02:C5D5  B9 00 51   	b5000_top_odd:	lda	BLK_5000_TR_L, y	; 5
 2077    02:C5D8  9D 02 02   			sta	VDC_DL, x		; 6
 2078    02:C5DB  B9 00 55   			lda	BLK_5000_TR_H, y	; 5
 2079               0001     		.if	BLKDEF_CHR_FLAG
 2080    02:C5DE  29 F3      			and	#%11110011		; 2
 2081                        		.endif
 2082    02:C5E0  1A         			inc	a			; 2
 2083    02:C5E1  9D 03 02   			sta	VDC_DH, x		; 6
 2084                        	
 2085    02:C5E4  E6 EC      			inc.l	<_bp			; 6
 2086    02:C5E6  D0 02      			bne	!+			; 2/4
 2087    02:C5E8  E6 ED      			inc.h	<_bp			; 6
 2088                        	
 2089    02:C5EA  C6 00      	!:		dec	<map_count		; 6
 2090    02:C5EC  D0 D1      			bne	!repeat-		; 4
 2091                        	
 2092    02:C5EE  60         	!end:		rts
 2093                        	
 2094                        			; btm horizontal (32+2 rept)
 2095                        			;
 2096                        			; 89 cycles per block * 17 -> 1513 cycles
 2097                        	
 2098    02:C5EF  B2 EC      	!repeat:	lda	[_bp]			; 7
 2099    02:C5F1  A8         			tay				; 2
 2100                        	
 2101    02:C5F2  B9 00 52   	b5000_btm_even:	lda	BLK_5000_BL_L, y	; 5
 2102    02:C5F5  9D 02 02   			sta	VDC_DL, x		; 6
 2103    02:C5F8  B9 00 56   			lda	BLK_5000_BL_H, y	; 5
 2104               0001     		.if	BLKDEF_CHR_FLAG
 2105    02:C5FB  29 F3      			and	#%11110011		; 2
 2106                        		.endif
 2107    02:C5FD  1A         			inc	a			; 2
 2108    02:C5FE  9D 03 02   			sta	VDC_DH, x		; 6
 2109                        	
 2110    02:C601  C6 00      			dec	<map_count		; 6
 2111    02:C603  F0 19      			beq	!end+			; 2
 2112                        	
 2113    02:C605  B9 00 53   	b5000_btm_odd:	lda	BLK_5000_BR_L, y	; 5
 2114    02:C608  9D 02 02   			sta	VDC_DL, x		; 6
 2115    02:C60B  B9 00 57   			lda	BLK_5000_BR_H, y	; 5
 2116               0001     		.if	BLKDEF_CHR_FLAG
 2117    02:C60E  29 F3      			and	#%11110011		; 2
 2118                        		.endif
 2119    02:C610  1A         			inc	a			; 2
 2120    02:C611  9D 03 02   			sta	VDC_DH, x		; 6
 2121                        	
 2122    02:C614  E6 EC      			inc.l	<_bp			; 6
 2123    02:C616  D0 02      			bne	!+			; 2/4
 2124    02:C618  E6 ED      			inc.h	<_bp			; 6
 2125                        	
 2126    02:C61A  C6 00      	!:		dec	<map_count		; 6
 2127    02:C61C  D0 D1      			bne	!repeat-		; 4
 2128                        	
 2129    02:C61E  60         	!end:		rts
 2130                        	
 2131                        			; top horizontal (32+2 rept)
 2132                        			;
 2133                        			; 89 cycles per block * 17 -> 1513 cycles
 2134                        	
 2135    02:C61F  B2 EC      	!repeat:	lda	[_bp]			; 7
 2136    02:C621  A8         			tay				; 2
 2137                        	
 2138    02:C622  B9 00 58   	b5800_top_even:	lda	BLK_5800_TL_L, y	; 5
 2139    02:C625  9D 02 02   			sta	VDC_DL, x		; 6
 2140    02:C628  B9 00 5C   			lda	BLK_5800_TL_H, y	; 5
 2141               0001     		.if	BLKDEF_CHR_FLAG
 2142    02:C62B  29 F3      			and	#%11110011		; 2
 2143                        		.endif
 2144    02:C62D  1A         			inc	a			; 2
 2145    02:C62E  9D 03 02   			sta	VDC_DH, x		; 6
 2146                        	
 2147    02:C631  C6 00      			dec	<map_count		; 6
 2148    02:C633  F0 19      			beq	!end+			; 2
 2149                        	
 2150    02:C635  B9 00 59   	b5800_top_odd:	lda	BLK_5800_TR_L, y	; 5
 2151    02:C638  9D 02 02   			sta	VDC_DL, x		; 6
 2152    02:C63B  B9 00 5D   			lda	BLK_5800_TR_H, y	; 5
 2153               0001     		.if	BLKDEF_CHR_FLAG
 2154    02:C63E  29 F3      			and	#%11110011		; 2
 2155                        		.endif
 2156    02:C640  1A         			inc	a			; 2
 2157    02:C641  9D 03 02   			sta	VDC_DH, x		; 6
 2158                        	
 2159    02:C644  E6 EC      			inc.l	<_bp			; 6
 2160    02:C646  D0 02      			bne	!+			; 2/4
 2161    02:C648  E6 ED      			inc.h	<_bp			; 6
 2162                        	
 2163    02:C64A  C6 00      	!:		dec	<map_count		; 6
 2164    02:C64C  D0 D1      			bne	!repeat-		; 4
 2165                        	
 2166    02:C64E  60         	!end:		rts
 2167                        	
 2168                        			; btm horizontal (32+2 rept)
 2169                        			;
 2170                        			; 89 cycles per block * 17 -> 1513 cycles
 2171                        	
 2172    02:C64F  B2 EC      	!repeat:	lda	[_bp]		; 7
 2173    02:C651  A8         			tay				; 2
 2174                        	
 2175    02:C652  B9 00 5A   	b5800_btm_even:	lda	BLK_5800_BL_L, y	; 5
 2176    02:C655  9D 02 02   			sta	VDC_DL, x		; 6
 2177    02:C658  B9 00 5E   			lda	BLK_5800_BL_H, y	; 5
 2178               0001     		.if	BLKDEF_CHR_FLAG
 2179    02:C65B  29 F3      			and	#%11110011		; 2
 2180                        		.endif
 2181    02:C65D  1A         			inc	a			; 2
 2182    02:C65E  9D 03 02   			sta	VDC_DH, x		; 6
 2183                        	
 2184    02:C661  C6 00      			dec	<map_count		; 6
 2185    02:C663  F0 19      			beq	!end+			; 2
 2186                        	
 2187    02:C665  B9 00 5B   	b5800_btm_odd:	lda	BLK_5800_BR_L, y	; 5
 2188    02:C668  9D 02 02   			sta	VDC_DL, x		; 6
 2189    02:C66B  B9 00 5F   			lda	BLK_5800_BR_H, y	; 5
 2190               0001     		.if	BLKDEF_CHR_FLAG
 2191    02:C66E  29 F3      			and	#%11110011		; 2
 2192                        		.endif
 2193    02:C670  1A         			inc	a			; 2
 2194    02:C671  9D 03 02   			sta	VDC_DH, x		; 6
 2195                        	
 2196    02:C674  E6 EC      			inc.l	<_bp			; 6
 2197    02:C676  D0 02      			bne	!+			; 2/4
 2198    02:C678  E6 ED      			inc.h	<_bp			; 6
 2199                        	
 2200    02:C67A  C6 00      	!:		dec	<map_count		; 6
 2201    02:C67C  D0 D1      			bne	!repeat-		; 4
 2202                        	
 2203    02:C67E  60         	!end:		rts
 2204                        	
 2205                        	
 2206                        	
 2207                        	; ***************************************************************************
 2208                        	; ***************************************************************************
 2209                        	;
 2210                        	; blk_col_strip - Draw a single column of CHR into the BAT.
 2211                        	;
 2212                        	
 2213    02:C67F  20 34 E4   	blk_col_strip:	jsr	set_di_xy_mawr		; Set the BAT VRAM destination.
 2214                        	
 2215    02:C682  A5 FC      			lda	<map_chr_x		; Select what drawing code to
 2216    02:C684  4A         			lsr	a			; use depending upon even/odd
 2217    02:C685  A5 FE      			lda	<map_chr_y		; CHR coordinates (not BAT to
 2218    02:C687  29 01      			and	#1			; support unaligned drawing).
 2219    02:C689  2A         			rol	a
 2220    02:C68A  0A         			asl	a			; N.B. Always leaves C clear.
 2221    02:C68B  1D C0 2B   			ora.h	vdc_blk_addr, x		; What is the BLK data address?
 2222    02:C68E  29 1E      			and	#%00011110		; $4000, $4800, $5000 or $5800.
 2223    02:C690  A8         			tay
 2224    02:C691  B9 9E C6   			lda.h	.jump_table, y		; Push the address of the code.
 2225    02:C694  48         			pha
 2226    02:C695  B9 9D C6   			lda.l	.jump_table, y
 2227    02:C698  48         			pha
 2228                        	
 2229    02:C699  B2 EC      			lda	[_bp]			; Get the first BLK number.
 2230    02:C69B  A8         			tay
 2231                        	
 2232    02:C69C  60         			rts				; Jump to the drawing code.
 2233                        	
 2234    02:C69D  BF C6      	.jump_table:	dw	b4000_lhs_even - 1
 2235    02:C69F  F5 C6      			dw	b4000_rhs_even - 1
 2236    02:C6A1  D2 C6      			dw	b4000_lhs_odd - 1
 2237    02:C6A3  08 C7      			dw	b4000_rhs_odd - 1
 2238                        	
 2239    02:C6A5  2B C7      			dw	b4800_lhs_even - 1
 2240    02:C6A7  61 C7      			dw	b4800_rhs_even - 1
 2241    02:C6A9  3E C7      			dw	b4800_lhs_odd - 1
 2242    02:C6AB  74 C7      			dw	b4800_rhs_odd - 1
 2243                        	
 2244    02:C6AD  97 C7      			dw	b5000_lhs_even - 1
 2245    02:C6AF  CD C7      			dw	b5000_rhs_even - 1
 2246    02:C6B1  AA C7      			dw	b5000_lhs_odd - 1
 2247    02:C6B3  E0 C7      			dw	b5000_rhs_odd - 1
 2248                        	
 2249    02:C6B5  03 C8      			dw	b5800_lhs_even - 1
 2250    02:C6B7  39 C8      			dw	b5800_rhs_even - 1
 2251    02:C6B9  16 C8      			dw	b5800_lhs_odd - 1
 2252    02:C6BB  4C C8      			dw	b5800_rhs_odd - 1
 2253                        	
 2254                        			; lhs vertical (28+2 rept)
 2255                        			;
 2256                        			; N.B. C is always clear on entry.
 2257                        			;
 2258                        			; 100 cycles per block * 15 -> 1500 cycles
 2259                        	
 2260    02:C6BD  B2 EC      	!repeat:	lda	[_bp]			; 7
 2261    02:C6BF  A8         			tay				; 2
 2262                        	
 2263    02:C6C0  B9 00 40   	b4000_lhs_even:	lda	BLK_4000_TL_L, y	; 5
 2264    02:C6C3  9D 02 02   			sta	VDC_DL, x		; 6
 2265    02:C6C6  B9 00 44   			lda	BLK_4000_TL_H, y	; 5
 2266               0001     		.if	BLKDEF_CHR_FLAG
 2267    02:C6C9  29 F3      			and	#%11110011		; 2
 2268                        		.endif
 2269    02:C6CB  1A         			inc	a			; 2
 2270    02:C6CC  9D 03 02   			sta	VDC_DH, x		; 6
 2271                        	
 2272    02:C6CF  C6 00      			dec	<map_count		; 6
 2273    02:C6D1  F0 1F      			beq	!end+			; 2
 2274                        	
 2275    02:C6D3  B9 00 42   	b4000_lhs_odd:	lda	BLK_4000_BL_L, y	; 5
 2276    02:C6D6  9D 02 02   			sta	VDC_DL, x		; 6
 2277    02:C6D9  B9 00 46   			lda	BLK_4000_BL_H, y	; 5
 2278               0001     		.if	BLKDEF_CHR_FLAG
 2279    02:C6DC  29 F3      			and	#%11110011		; 2
 2280                        		.endif
 2281    02:C6DE  1A         			inc	a			; 2
 2282    02:C6DF  9D 03 02   			sta	VDC_DH, x		; 6
 2283                        	
 2284    02:C6E2  BD 85 26   			lda	vdc_map_line_w, x	; 5
 2285    02:C6E5  65 EC      			adc.l	<_bp			; 4
 2286    02:C6E7  85 EC      			sta.l	<_bp			; 4
 2287    02:C6E9  90 03      			bcc	!+			; 2/4
 2288    02:C6EB  E6 ED      			inc.h	<_bp			; 6
 2289    02:C6ED  18         			clc				; 2
 2290                        	
 2291    02:C6EE  C6 00      	!:		dec	<map_count		; 6
 2292    02:C6F0  D0 CB      			bne	!repeat-		; 4
 2293                        	
 2294    02:C6F2  60         	!end:		rts
 2295                        	
 2296                        			; rhs vertical (28+2 rept)
 2297                        			;
 2298                        			; N.B. C is always clear on entry.
 2299                        			;
 2300                        			; 100 cycles per block * 15 -> 1500 cycles
 2301                        	
 2302    02:C6F3  B2 EC      	!repeat:	lda	[_bp]			; 7
 2303    02:C6F5  A8         			tay				; 2
 2304                        	
 2305    02:C6F6  B9 00 41   	b4000_rhs_even:	lda	BLK_4000_TR_L, y	; 5
 2306    02:C6F9  9D 02 02   			sta	VDC_DL, x		; 6
 2307    02:C6FC  B9 00 45   			lda	BLK_4000_TR_H, y	; 5
 2308               0001     		.if	BLKDEF_CHR_FLAG
 2309    02:C6FF  29 F3      			and	#%11110011		; 2
 2310                        		.endif
 2311    02:C701  1A         			inc	a			; 2
 2312    02:C702  9D 03 02   			sta	VDC_DH, x		; 6
 2313                        	
 2314    02:C705  C6 00      			dec	<map_count		; 6
 2315    02:C707  F0 1F      			beq	!end+			; 2
 2316                        	
 2317    02:C709  B9 00 43   	b4000_rhs_odd:	lda	BLK_4000_BR_L, y	; 5
 2318    02:C70C  9D 02 02   			sta	VDC_DL, x		; 6
 2319    02:C70F  B9 00 47   			lda	BLK_4000_BR_H, y	; 5
 2320               0001     		.if	BLKDEF_CHR_FLAG
 2321    02:C712  29 F3      			and	#%11110011		; 2
 2322                        		.endif
 2323    02:C714  1A         			inc	a			; 2
 2324    02:C715  9D 03 02   			sta	VDC_DH, x		; 6
 2325                        	
 2326    02:C718  BD 85 26   			lda	vdc_map_line_w, x	; 5
 2327    02:C71B  65 EC      			adc.l	<_bp			; 4
 2328    02:C71D  85 EC      			sta.l	<_bp			; 4
 2329    02:C71F  90 03      			bcc	!+			; 2/4
 2330    02:C721  E6 ED      			inc.h	<_bp			; 6
 2331    02:C723  18         			clc				; 2
 2332                        	
 2333    02:C724  C6 00      	!:		dec	<map_count		; 6
 2334    02:C726  D0 CB      			bne	!repeat-		; 4
 2335                        	
 2336    02:C728  60         	!end:		rts
 2337                        	
 2338                        			; lhs vertical (28+2 rept)
 2339                        			;
 2340                        			; N.B. C is always clear on entry.
 2341                        			;
 2342                        			; 100 cycles per block * 15 -> 1500 cycles
 2343                        	
 2344    02:C729  B2 EC      	!repeat:	lda	[_bp]			; 7
 2345    02:C72B  A8         			tay				; 2
 2346                        	
 2347    02:C72C  B9 00 48   	b4800_lhs_even:	lda	BLK_4800_TL_L, y	; 5
 2348    02:C72F  9D 02 02   			sta	VDC_DL, x		; 6
 2349    02:C732  B9 00 4C   			lda	BLK_4800_TL_H, y	; 5
 2350               0001     		.if	BLKDEF_CHR_FLAG
 2351    02:C735  29 F3      			and	#%11110011		; 2
 2352                        		.endif
 2353    02:C737  1A         			inc	a			; 2
 2354    02:C738  9D 03 02   			sta	VDC_DH, x		; 6
 2355                        	
 2356    02:C73B  C6 00      			dec	<map_count		; 6
 2357    02:C73D  F0 1F      			beq	!end+			; 2
 2358                        	
 2359    02:C73F  B9 00 4A   	b4800_lhs_odd:	lda	BLK_4800_BL_L, y	; 5
 2360    02:C742  9D 02 02   			sta	VDC_DL, x		; 6
 2361    02:C745  B9 00 4E   			lda	BLK_4800_BL_H, y	; 5
 2362               0001     		.if	BLKDEF_CHR_FLAG
 2363    02:C748  29 F3      			and	#%11110011		; 2
 2364                        		.endif
 2365    02:C74A  1A         			inc	a			; 2
 2366    02:C74B  9D 03 02   			sta	VDC_DH, x		; 6
 2367                        	
 2368    02:C74E  BD 85 26   			lda	vdc_map_line_w, x	; 5
 2369    02:C751  65 EC      			adc.l	<_bp			; 4
 2370    02:C753  85 EC      			sta.l	<_bp			; 4
 2371    02:C755  90 03      			bcc	!+			; 2/4
 2372    02:C757  E6 ED      			inc.h	<_bp			; 6
 2373    02:C759  18         			clc				; 2
 2374                        	
 2375    02:C75A  C6 00      	!:		dec	<map_count		; 6
 2376    02:C75C  D0 CB      			bne	!repeat-		; 4
 2377                        	
 2378    02:C75E  60         	!end:		rts
 2379                        	
 2380                        			; rhs vertical (28+2 rept)
 2381                        			;
 2382                        			; N.B. C is always clear on entry.
 2383                        			;
 2384                        			; 100 cycles per block * 15 -> 1500 cycles
 2385                        	
 2386    02:C75F  B2 EC      	!repeat:	lda	[_bp]			; 7
 2387    02:C761  A8         			tay				; 2
 2388                        	
 2389    02:C762  B9 00 49   	b4800_rhs_even:	lda	BLK_4800_TR_L, y	; 5
 2390    02:C765  9D 02 02   			sta	VDC_DL, x		; 6
 2391    02:C768  B9 00 4D   			lda	BLK_4800_TR_H, y	; 5
 2392               0001     		.if	BLKDEF_CHR_FLAG
 2393    02:C76B  29 F3      			and	#%11110011		; 2
 2394                        		.endif
 2395    02:C76D  1A         			inc	a			; 2
 2396    02:C76E  9D 03 02   			sta	VDC_DH, x		; 6
 2397                        	
 2398    02:C771  C6 00      			dec	<map_count		; 6
 2399    02:C773  F0 1F      			beq	!end+			; 2
 2400                        	
 2401    02:C775  B9 00 4B   	b4800_rhs_odd:	lda	BLK_4800_BR_L, y	; 5
 2402    02:C778  9D 02 02   			sta	VDC_DL, x		; 6
 2403    02:C77B  B9 00 4F   			lda	BLK_4800_BR_H, y	; 5
 2404               0001     		.if	BLKDEF_CHR_FLAG
 2405    02:C77E  29 F3      			and	#%11110011		; 2
 2406                        		.endif
 2407    02:C780  1A         			inc	a			; 2
 2408    02:C781  9D 03 02   			sta	VDC_DH, x		; 6
 2409                        	
 2410    02:C784  BD 85 26   			lda	vdc_map_line_w, x	; 5
 2411    02:C787  65 EC      			adc.l	<_bp			; 4
 2412    02:C789  85 EC      			sta.l	<_bp			; 4
 2413    02:C78B  90 03      			bcc	!+			; 2/4
 2414    02:C78D  E6 ED      			inc.h	<_bp			; 6
 2415    02:C78F  18         			clc				; 2
 2416                        	
 2417    02:C790  C6 00      	!:		dec	<map_count		; 6
 2418    02:C792  D0 CB      			bne	!repeat-		; 4
 2419                        	
 2420    02:C794  60         	!end:		rts
 2421                        	
 2422                        			; lhs vertical (28+2 rept)
 2423                        			;
 2424                        			; N.B. C is always clear on entry.
 2425                        			;
 2426                        			; 100 cycles per block * 15 -> 1500 cycles
 2427                        	
 2428    02:C795  B2 EC      	!repeat:	lda	[_bp]			; 7
 2429    02:C797  A8         			tay				; 2
 2430                        	
 2431    02:C798  B9 00 50   	b5000_lhs_even:	lda	BLK_5000_TL_L, y	; 5
 2432    02:C79B  9D 02 02   			sta	VDC_DL, x		; 6
 2433    02:C79E  B9 00 54   			lda	BLK_5000_TL_H, y	; 5
 2434               0001     		.if	BLKDEF_CHR_FLAG
 2435    02:C7A1  29 F3      			and	#%11110011		; 2
 2436                        		.endif
 2437    02:C7A3  1A         			inc	a			; 2
 2438    02:C7A4  9D 03 02   			sta	VDC_DH, x		; 6
 2439                        	
 2440    02:C7A7  C6 00      			dec	<map_count		; 6
 2441    02:C7A9  F0 1F      			beq	!end+			; 2
 2442                        	
 2443    02:C7AB  B9 00 52   	b5000_lhs_odd:	lda	BLK_5000_BL_L, y	; 5
 2444    02:C7AE  9D 02 02   			sta	VDC_DL, x		; 6
 2445    02:C7B1  B9 00 56   			lda	BLK_5000_BL_H, y	; 5
 2446               0001     		.if	BLKDEF_CHR_FLAG
 2447    02:C7B4  29 F3      			and	#%11110011		; 2
 2448                        		.endif
 2449    02:C7B6  1A         			inc	a			; 2
 2450    02:C7B7  9D 03 02   			sta	VDC_DH, x		; 6
 2451                        	
 2452    02:C7BA  BD 85 26   			lda	vdc_map_line_w, x	; 5
 2453    02:C7BD  65 EC      			adc.l	<_bp			; 4
 2454    02:C7BF  85 EC      			sta.l	<_bp			; 4
 2455    02:C7C1  90 03      			bcc	!+			; 2/4
 2456    02:C7C3  E6 ED      			inc.h	<_bp			; 6
 2457    02:C7C5  18         			clc				; 2
 2458                        	
 2459    02:C7C6  C6 00      	!:		dec	<map_count		; 6
 2460    02:C7C8  D0 CB      			bne	!repeat-		; 4
 2461                        	
 2462    02:C7CA  60         	!end:		rts
 2463                        	
 2464                        			; rhs vertical (28+2 rept)
 2465                        			;
 2466                        			; N.B. C is always clear on entry.
 2467                        			;
 2468                        			; 100 cycles per block * 15 -> 1500 cycles
 2469                        	
 2470    02:C7CB  B2 EC      	!repeat:	lda	[_bp]			; 7
 2471    02:C7CD  A8         			tay				; 2
 2472                        	
 2473    02:C7CE  B9 00 51   	b5000_rhs_even:	lda	BLK_5000_TR_L, y	; 5
 2474    02:C7D1  9D 02 02   			sta	VDC_DL, x		; 6
 2475    02:C7D4  B9 00 55   			lda	BLK_5000_TR_H, y	; 5
 2476               0001     		.if	BLKDEF_CHR_FLAG
 2477    02:C7D7  29 F3      			and	#%11110011		; 2
 2478                        		.endif
 2479    02:C7D9  1A         			inc	a			; 2
 2480    02:C7DA  9D 03 02   			sta	VDC_DH, x		; 6
 2481                        	
 2482    02:C7DD  C6 00      			dec	<map_count		; 6
 2483    02:C7DF  F0 1F      			beq	!end+			; 2
 2484                        	
 2485    02:C7E1  B9 00 53   	b5000_rhs_odd:	lda	BLK_5000_BR_L, y	; 5
 2486    02:C7E4  9D 02 02   			sta	VDC_DL, x		; 6
 2487    02:C7E7  B9 00 57   			lda	BLK_5000_BR_H, y	; 5
 2488               0001     		.if	BLKDEF_CHR_FLAG
 2489    02:C7EA  29 F3      			and	#%11110011		; 2
 2490                        		.endif
 2491    02:C7EC  1A         			inc	a			; 2
 2492    02:C7ED  9D 03 02   			sta	VDC_DH, x		; 6
 2493                        	
 2494    02:C7F0  BD 85 26   			lda	vdc_map_line_w, x	; 5
 2495    02:C7F3  65 EC      			adc.l	<_bp			; 4
 2496    02:C7F5  85 EC      			sta.l	<_bp			; 4
 2497    02:C7F7  90 03      			bcc	!+			; 2/4
 2498    02:C7F9  E6 ED      			inc.h	<_bp			; 6
 2499    02:C7FB  18         			clc				; 2
 2500                        	
 2501    02:C7FC  C6 00      	!:		dec	<map_count		; 6
 2502    02:C7FE  D0 CB      			bne	!repeat-		; 4
 2503                        	
 2504    02:C800  60         	!end:		rts
 2505                        	
 2506                        			; lhs vertical (28+2 rept)
 2507                        			;
 2508                        			; N.B. C is always clear on entry.
 2509                        			;
 2510                        			; 100 cycles per block * 15 -> 1500 cycles
 2511                        	
 2512    02:C801  B2 EC      	!repeat:	lda	[_bp]			; 7
 2513    02:C803  A8         			tay				; 2
 2514                        	
 2515    02:C804  B9 00 58   	b5800_lhs_even:	lda	BLK_5800_TL_L, y	; 5
 2516    02:C807  9D 02 02   			sta	VDC_DL, x		; 6
 2517    02:C80A  B9 00 5C   			lda	BLK_5800_TL_H, y	; 5
 2518               0001     		.if	BLKDEF_CHR_FLAG
 2519    02:C80D  29 F3      			and	#%11110011		; 2
 2520                        		.endif
 2521    02:C80F  1A         			inc	a			; 2
 2522    02:C810  9D 03 02   			sta	VDC_DH, x		; 6
 2523                        	
 2524    02:C813  C6 00      			dec	<map_count		; 6
 2525    02:C815  F0 1F      			beq	!end+			; 2
 2526                        	
 2527    02:C817  B9 00 5A   	b5800_lhs_odd:	lda	BLK_5800_BL_L, y	; 5
 2528    02:C81A  9D 02 02   			sta	VDC_DL, x		; 6
 2529    02:C81D  B9 00 5E   			lda	BLK_5800_BL_H, y	; 5
 2530               0001     		.if	BLKDEF_CHR_FLAG
 2531    02:C820  29 F3      			and	#%11110011		; 2
 2532                        		.endif
 2533    02:C822  1A         			inc	a			; 2
 2534    02:C823  9D 03 02   			sta	VDC_DH, x		; 6
 2535                        	
 2536    02:C826  BD 85 26   			lda	vdc_map_line_w, x	; 5
 2537    02:C829  65 EC      			adc.l	<_bp			; 4
 2538    02:C82B  85 EC      			sta.l	<_bp			; 4
 2539    02:C82D  90 03      			bcc	!+			; 2/4
 2540    02:C82F  E6 ED      			inc.h	<_bp			; 6
 2541    02:C831  18         			clc				; 2
 2542                        	
 2543    02:C832  C6 00      	!:		dec	<map_count		; 6
 2544    02:C834  D0 CB      			bne	!repeat-		; 4
 2545                        	
 2546    02:C836  60         	!end:		rts
 2547                        	
 2548                        			; rhs vertical (28+2 rept)
 2549                        			;
 2550                        			; N.B. C is always clear on entry.
 2551                        			;
 2552                        			; 100 cycles per block * 15 -> 1500 cycles
 2553                        	
 2554    02:C837  B2 EC      	!repeat:	lda	[_bp]			; 7
 2555    02:C839  A8         			tay				; 2
 2556                        	
 2557    02:C83A  B9 00 59   	b5800_rhs_even:	lda	BLK_5800_TR_L, y	; 5
 2558    02:C83D  9D 02 02   			sta	VDC_DL, x		; 6
 2559    02:C840  B9 00 5D   			lda	BLK_5800_TR_H, y	; 5
 2560               0001     		.if	BLKDEF_CHR_FLAG
 2561    02:C843  29 F3      			and	#%11110011		; 2
 2562                        		.endif
 2563    02:C845  1A         			inc	a			; 2
 2564    02:C846  9D 03 02   			sta	VDC_DH, x		; 6
 2565                        	
 2566    02:C849  C6 00      			dec	<map_count		; 6
 2567    02:C84B  F0 1F      			beq	!end+			; 2
 2568                        	
 2569    02:C84D  B9 00 5B   	b5800_rhs_odd:	lda	BLK_5800_BR_L, y	; 5
 2570    02:C850  9D 02 02   			sta	VDC_DL, x		; 6
 2571    02:C853  B9 00 5F   			lda	BLK_5800_BR_H, y	; 5
 2572               0001     		.if	BLKDEF_CHR_FLAG
 2573    02:C856  29 F3      			and	#%11110011		; 2
 2574                        		.endif
 2575    02:C858  1A         			inc	a			; 2
 2576    02:C859  9D 03 02   			sta	VDC_DH, x		; 6
 2577                        	
 2578    02:C85C  BD 85 26   			lda	vdc_map_line_w, x	; 5
 2579    02:C85F  65 EC      			adc.l	<_bp			; 4
 2580    02:C861  85 EC      			sta.l	<_bp			; 4
 2581    02:C863  90 03      			bcc	!+			; 2/4
 2582    02:C865  E6 ED      			inc.h	<_bp			; 6
 2583    02:C867  18         			clc				; 2
 2584                        	
 2585    02:C868  C6 00      	!:		dec	<map_count		; 6
 2586    02:C86A  D0 CB      			bne	!repeat-		; 4
 2587                        	
 2588    02:C86C  60         	!end:		rts
 2589                        	
 2590                        		.endif	BLKDEF_POINTERS
 2591                        	
 2592                        		.endprocgroup	; blkmap_group
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   80                        		.else
   84                        		.endif	HUCC_USES_BLKMAP
   85                        	
   86               0001     		.ifdef	HUCC_USES_CHRMAP		; Set in hucc_chrmap.h
                             #[3]   "..\..\..\include\hucc\chrmap.asm"
   87                        			include	"chrmap.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; chrmap.asm
    5                        	;
    6                        	; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
    7                        	;
    8                        	; Copyright John Brandwood 2025.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
   18                        	;
   19                        	; The maximum total size for a chrmap is 16KBytes, which allows for maps up
   20                        	; to 256x32 tiles (2048x256 pixels).
   21                        	;
   22                        	; ***************************************************************************
   23                        	; ***************************************************************************
   24                        	
   25                        	;
   26                        	; Include dependancies ...
   27                        	;
   28                        	
   29                        			include "blkmap.asm"		; This defines the variables.
   30                        	
   31                        	;
   32                        	; Chrmaps in BAT format normally address all of VRAM from $0400..$7FFF, but
   33                        	; they can be limited to use the 32KByte of characters in VRAM $1000..$4FFF
   34                        	; which then frees up 2-bits for flag information for each character in the
   35                        	; BAT entry.
   36                        	;
   37                        	; These 2-bits are perfect for using as collision information in game maps,
   38                        	; allowing storage of states like transparent, solid, up-slope, down-slope.
   39                        	;
   40                        	; Typically this flag information is set by the map conversion tools from a
   41                        	; seperate "collision" map layer.
   42                        	;
   43                        	
   44               0000     		.ifndef	CHRMAP_BAT_FLAG
   46                        		.endif
   47                        	
   48                        	;
   49                        	;
   50                        	;
   51                        	
   52                        	
   53                        	
   54    02:D731             	chrmap_group	.procgroup
   55                        	
   56                        	; ***************************************************************************
   57                        	; ***************************************************************************
   58                        	;
   59                        	; _draw_bat - Draw the entire screen at the current coordinates.
   60                        	; _sgx_draw_bat - Draw the entire screen at the current coordinates.
   61                        	;
   62                        	; void __fastcall draw_bat( void );
   63                        	; void __fastcall sgx_draw_bat( void );
   64                        	;
   65                        	
   66               0001     		.if	SUPPORT_SGX
   67                        	
   68                        	_sgx_draw_bat	.proc
   74                        			.endp
   75                        		.endif
   76                        	
   77    02:D731             	_draw_bat	.proc
   78                        	
   79    02:D731  82         			clx				; Offset to PCE VDC.
   80                        	
   81    02:D732  43 08      			tma3				; Preserve MPR3..MPR5.
   82    02:D734  48         			pha
   83    02:D735  43 10      			tma4
   84    02:D737  48         			pha
   85    02:D738  43 20      			tma5
   86    02:D73A  48         			pha
   87                        	
   88    02:D73B  20 DE D7   			jsr	bat_pxl_2_chr		; Set up the draw coordinates.
   89                        	
   90    02:D73E  A5 FC      			lda	<map_chr_x		; Reset previous X position.
   91    02:D740  9D BA 2B   			sta	vdc_old_chr_x, x
   92                        	
   93    02:D743  A5 FE      			lda	<map_chr_y		; Reset previous Y position,
   94    02:D745  1A         			inc	a			; ready to draw rows upwards.
   95    02:D746  9D BB 2B   			sta	vdc_old_chr_y, x
   96                        	
   97    02:D749  BD 83 26   			lda	vdc_map_draw_w, x	; Draw the whole screen.
   98    02:D74C  85 FA      			sta	<map_draw_w
   99    02:D74E  BD 84 26   			lda	vdc_map_draw_h, x
  100    02:D751  85 FB      			sta	<map_draw_h
  101                        	
  102    02:D753  20 C1 D8   			jsr	bat_scroll_y		; Draw N row of CHR to the BAT.
  103                        	
  104    02:D756  68         			pla				; Restore MPR3..MPR5.
  105    02:D757  53 20      			tam5
  106    02:D759  68         			pla
  107    02:D75A  53 10      			tam4
  108    02:D75C  68         			pla
  109    02:D75D  53 08      			tam3
  110                        	
  111                        			leave
         02:D75F  4C EF FF   			jmp	leave_proc
  112                        	
  113                        			.endp
  114                        	
  115                        	
  116                        	
  117                        	; ***************************************************************************
  118                        	; ***************************************************************************
  119                        	;
  120                        	; _scroll_bat - Draw a single row of CHR into the BAT to update the edge.
  121                        	; _sgx_scroll_bat - Draw a single row of CHR into the BAT to update the edge.
  122                        	;
  123                        	; void __fastcall scroll_bat( void );
  124                        	; void __fastcall sgx_scroll_bat( void );
  125                        	;
  126                        	
  127               0001     		.if	SUPPORT_SGX
  128                        	
  129                        	_sgx_scroll_bat	.proc
  135                        			.endp
  136                        		.endif
  137                        	
  138    02:D762             	_scroll_bat	.proc
  139                        	
  140    02:D762  82         			clx				; Offset to PCE VDC.
  141                        	
  142    02:D763  43 08      			tma3				; Preserve MPR3..MPR5.
  143    02:D765  48         			pha
  144    02:D766  43 10      			tma4
  145    02:D768  48         			pha
  146    02:D769  43 20      			tma5
  147    02:D76B  48         			pha
  148                        	
  149    02:D76C  20 DE D7   			jsr	bat_pxl_2_chr		; Set up the draw coordinates.
  150                        	
  151    02:D76F  BD 84 26   			lda	vdc_map_draw_h, x	; Draw new LHS or RHS if needed.
  152    02:D772  85 FB      			sta	<map_draw_h
  153                        	;		lda	#1			; bat_scroll_x only ever draws a
  154                        	;		sta	<map_draw_w		; single column.
  155    02:D774  20 02 D8   			jsr	bat_scroll_x
  156                        	
  157    02:D777  BD BA 2B   			lda	vdc_old_chr_x, x	; Restore map_chr_x which could
  158    02:D77A  85 FC      			sta	<map_chr_x		; be changed by bat_scroll_x.
  159                        	
  160    02:D77C  BD 83 26   			lda	vdc_map_draw_w, x	; Draw new TOP or BTM if needed.
  161    02:D77F  85 FA      			sta	<map_draw_w
  162    02:D781  A9 01      			lda	#1
  163    02:D783  85 FB      			sta	<map_draw_h
  164    02:D785  20 C1 D8   			jsr	bat_scroll_y
  165                        	
  166    02:D788  68         			pla				; Restore MPR3..MPR5.
  167    02:D789  53 20      			tam5
  168    02:D78B  68         			pla
  169    02:D78C  53 10      			tam4
  170    02:D78E  68         			pla
  171    02:D78F  53 08      			tam3
  172                        	
  173                        			leave
         02:D791  4C EF FF   			jmp	leave_proc
  174                        	
  175                        			.endp
  176                        	
  177                        	
  178                        	
  179                        	; ***************************************************************************
  180                        	; ***************************************************************************
  181                        	;
  182                        	; _blit_bat - Draw a map rectangle to specific BAT coordinates.
  183                        	; _sgx_blit_bat - Draw a map rectangle to specific BAT coordinates.
  184                        	;
  185                        	; void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
  186                        	; void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
  187                        	;
  188                        	; Normally you'd just use _draw_bat() and _scroll_bat(), but for those folks
  189                        	; who really wish to take manual control, you can use this.
  190                        	;
  191                        	
  192               0001     		.if	SUPPORT_SGX
  193                        	
  194                        	_sgx_blit_bat	.proc
  200                        			.endp
  201                        		.endif
  202                        	
  203    02:D794             	_blit_bat	.proc
  204                        	
  205    02:D794  82         			clx				; Offset to PCE VDC.
  206                        	
  207    02:D795  43 08      			tma3				; Preserve MPR3..MPR5.
  208    02:D797  48         			pha
  209    02:D798  43 10      			tma4
  210    02:D79A  48         			pha
  211    02:D79B  43 20      			tma5
  212    02:D79D  48         			pha
  213                        	
  214    02:D79E  BD 8B 26   			lda	vdc_map_option, x	; Preserve current map options.
  215    02:D7A1  48         			pha
  216    02:D7A2  09 C0      			ora	#MAP_UNALIGNED_X | MAP_UNALIGNED_Y
  217    02:D7A4  9D 8B 26   			sta	vdc_map_option, x
  218                        	
  219    02:D7A7  20 DE D7   			jsr	bat_pxl_2_chr		; Set up the draw coordinates.
  220                        	
  221    02:D7AA  A5 FA      			lda	<map_draw_w		; Are we drawing just 1 column?
  222    02:D7AC  C9 01      			cmp	#1
  223    02:D7AE  F0 1E      			beq	.draw_column
  224                        	
  225                        			; Draw N rows.
  226                        	
  227    02:D7B0  A5 FC      	.draw_rows:	lda	<map_chr_x		; Reset previous X position.
  228    02:D7B2  9D BA 2B   			sta	vdc_old_chr_x, x
  229                        	
  230    02:D7B5  A5 FE      			lda	<map_chr_y		; Reset previous Y position,
  231    02:D7B7  1A         			inc	a			; ready to draw rows upwards.
  232    02:D7B8  9D BB 2B   			sta	vdc_old_chr_y, x
  233                        	
  234    02:D7BB  20 C1 D8   			jsr	bat_scroll_y		; Draw a row of CHR to the BAT.
  235                        	
  236                        			; Drawing completed.
  237                        	
  238    02:D7BE  68         	.finished:	pla				; Restore previous map options.
  239    02:D7BF  9D 8B 26   			sta	vdc_map_option, x
  240                        	
  241    02:D7C2  68         			pla				; Restore MPR3..MPR5.
  242    02:D7C3  53 20      			tam5
  243    02:D7C5  68         			pla
  244    02:D7C6  53 10      			tam4
  245    02:D7C8  68         			pla
  246    02:D7C9  53 08      			tam3
  247                        	
  248                        	.exit:		leave
         02:D7CB  4C EF FF   			jmp	leave_proc
  249                        	
  250                        			; Draw 1 column.
  251                        	
  252    02:D7CE  A5 FC      	.draw_column:	lda	<map_chr_x		; Reset previous X position.
  253    02:D7D0  1A         			inc	a			; ready to draw 1 column.
  254    02:D7D1  9D BA 2B   			sta	vdc_old_chr_x, x
  255                        	
  256    02:D7D4  A5 FE      			lda	<map_chr_y		; Reset previous Y position.
  257    02:D7D6  9D BB 2B   			sta	vdc_old_chr_y, x
  258                        	
  259    02:D7D9  20 02 D8   			jsr	bat_scroll_x		; Draw a single column of CHR.
  260                        	
  261    02:D7DC  80 E0      			bra	.finished
  262                        	
  263                        			.endp
  264                        	
  265                        	
  266                        	
  267                        	; ***************************************************************************
  268                        	; ***************************************************************************
  269                        	;
  270                        	
  271    02:D7DE  BD 87 26   	bat_pxl_2_chr:	lda.l	vdc_map_pxl_x, x	; Get current map X coordinate.
  272    02:D7E1  85 FC      			sta.l	<map_pxl_x
  273    02:D7E3  BD 88 26   			lda.h	vdc_map_pxl_x, x	; Xvert map_pxl_x to map_chr_x.
  274    02:D7E6  4A         			lsr	a
  275    02:D7E7  66 FC      			ror.l	<map_pxl_x
  276    02:D7E9  4A         			lsr	a
  277    02:D7EA  66 FC      			ror.l	<map_pxl_x
  278    02:D7EC  4A         			lsr	a
  279    02:D7ED  66 FC      			ror.l	<map_pxl_x		; Max map width is 256 CHR.
  280                        	
  281    02:D7EF  BD 89 26   			lda.l	vdc_map_pxl_y, x	; Get current map Y coordinate.
  282    02:D7F2  85 FE      			sta.l	<map_pxl_y
  283    02:D7F4  BD 8A 26   			lda.h	vdc_map_pxl_y, x	; Xvert map_pxl_y to map_chr_y.
  284    02:D7F7  4A         			lsr	a
  285    02:D7F8  66 FE      			ror.l	<map_pxl_y
  286    02:D7FA  4A         			lsr	a
  287    02:D7FB  66 FE      			ror.l	<map_pxl_y
  288    02:D7FD  4A         			lsr	a
  289    02:D7FE  66 FE      			ror.l	<map_pxl_y		; Max map width is 256 CHR.
  290                        	
  291    02:D800  60         			rts
  292                        	
  293                        	
  294                        	
  295                        	; ***************************************************************************
  296                        	; ***************************************************************************
  297                        	;
  298                        	; bat_scroll_x - Update the BAT when X coordinate changes.
  299                        	;
  300                        	; N.B. This only ever draws a single column!
  301                        	;
  302                        	
  303    02:D801  60         	!no_change:	rts
  304                        	
  305    02:D802  A5 FC      	bat_scroll_x:	lda	<map_chr_x		; Compare old_x with cur_x.
  306    02:D804  DD BA 2B   			cmp	vdc_old_chr_x, x
  307    02:D807  F0 F8      			beq	!no_change-		; Do nothing if no change.
  308    02:D809  9D BA 2B   			sta	vdc_old_chr_x, x
  309    02:D80C  30 05      			bmi	.moved			; Test the sign of the change.
  310                        	
  311    02:D80E  18         			clc				; Draw RHS if chr_x >= old_x.
  312    02:D80F  7D 83 26   			adc	vdc_map_draw_w, x	; Usually (SCR_WIDTH / 8) + 1.
  313    02:D812  3A         			dec	a
  314                        	
  315    02:D813  48         	.moved:		pha				; Push chr_x in map section.
  316                        	
  317    02:D814  3C 8B 26   			bit	vdc_map_option, x	; Set bit7 to disable aligning
  318    02:D817  30 05      			bmi	!+			; BAT X with the map X.
  319    02:D819  3D 80 26   			and	vdc_bat_x_mask, x
  320    02:D81C  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
  321                        	
  322    02:D81E  A5 FE      	!:		lda	<map_chr_y		; Y = chr_y in map section.
  323    02:D820  A8         			tay
  324                        	
  325    02:D821  3C 8B 26   			bit	vdc_map_option, x	; Set bit6 to disable aligning
  326    02:D824  70 05      			bvs	!+			; BAT Y with the map Y.
  327    02:D826  3D 81 26   			and	vdc_bat_y_mask, x
  328    02:D829  85 F9      			sta	<map_bat_y		; Save BAT Y chr coordinate.
  329                        	
  330               0000     		.if	FAST_MULTIPLY
  333                        		.endif
  334                        	
  335    02:D82B  BD 85 26   	!:		lda	vdc_map_line_w, x	; Map width in CHR (0 == 256).
  336    02:D82E  D0 05      			bne	!+
  337                        	
  338    02:D830  64 EE      			stz.l	<map_line		; Multiply by 256 is easy!
  339    02:D832  98         			tya
  340    02:D833  80 15      			bra	.double
  341                        	
  342               0000     		.if	FAST_MULTIPLY
  354                        		.else
  355    02:D835  84 EF      	!:		sty.h	<map_line		; Takes 144..176 cycles.
  356    02:D837  A0 08      			ldy	#8
  357    02:D839  4A         			lsr	a
  358    02:D83A  85 EE      			sta.l	<map_line
  359    02:D83C  62         			cla
  360    02:D83D  90 03      			bcc	.rotate
  361    02:D83F  18         	.add:		clc
  362    02:D840  65 EF      			adc.h	<map_line
  363    02:D842  6A         	.rotate:	ror	a
  364    02:D843  66 EE      			ror.l	<map_line		; Lo-byte of (CHR Y * width).
  365    02:D845  88         			dey
  366    02:D846  B0 F7      			bcs	.add
  367    02:D848  D0 F8      			bne	.rotate
  368                        		.endif
  369                        	
  370    02:D84A  06 EE      	.double:	asl.l	<map_line		; Lo-byte of (CHR Y * width * 2).
  371    02:D84C  2A         			rol	a
  372    02:D84D  A8         			tay				; Hi-byte of (CHR Y * width * 2).
  373                        	
  374    02:D84E  BD C4 2B   			lda	vdc_map_bank, x		; Put the MAP into MPR3-MPR5.
  375    02:D851  53 08      			tam3				; Allow for 16KByte chrmap.
  376    02:D853  1A         			inc	a
  377    02:D854  53 10      			tam4
  378    02:D856  1A         			inc	a
  379    02:D857  53 20      			tam5
  380                        	
  381    02:D859  68         			pla				; Pop chr_x in map section.
  382    02:D85A  0A         			asl	a			; 2-bytes for a BAT value.
  383    02:D85B  90 02      			bcc	!+
  384    02:D85D  C8         			iny				; Hi-byte of (CHR Y * width * 2).
  385    02:D85E  18         			clc
  386    02:D85F  65 EE      	!:		adc.l	<map_line		; Lo-byte of (CHR Y * width * 2).
  387    02:D861  90 01      			bcc	!+
  388    02:D863  C8         			iny
  389                        	
  390    02:D864  18         	!:		clc				; Calc map data pointer.
  391    02:D865  7D C2 2B   			adc.l	vdc_map_addr, x
  392    02:D868  85 EC      			sta.l	<_bp			; Maximum map size is 16KBytes
  393    02:D86A  98         			tya				; so we don't need to consider
  394    02:D86B  7D C3 2B   			adc.h	vdc_map_addr, x		; bank overflow.
  395    02:D86E  85 ED      			sta.h	<_bp
  396                        	
  397    02:D870  C2         			cly				; Calculate the map line delta
  398    02:D871  BD 85 26   			lda	vdc_map_line_w, x	; in bytes.
  399    02:D874  D0 01      			bne	!+
  400    02:D876  C8         			iny
  401    02:D877  0A         	!:		asl	a
  402    02:D878  85 EE      			sta.l	<map_line
  403    02:D87A  98         			tya
  404    02:D87B  2A         			rol	a
  405    02:D87C  85 EF      			sta.h	<map_line
  406                        	
  407                        			; Draw the first part of the column.
  408                        	
  409    02:D87E  A5 F8      	.draw_col:	lda	<map_bat_x		; Set the BAT VRAM destination
  410    02:D880  85 F0      			sta.l	<_di			; coordinates.
  411    02:D882  A5 F9      			lda	<map_bat_y
  412    02:D884  85 F1      			sta.h	<_di
  413                        	
  414    02:D886  5D 81 26   			eor	vdc_bat_y_mask, x	; Calc CHR before wrap.
  415    02:D889  1A         			inc	a
  416    02:D88A  C5 FB      			cmp	<map_draw_h		; Usually (SCR_HEIGHT / 8) + 1.
  417    02:D88C  90 02      			bcc	!+
  418    02:D88E  A5 FB      			lda	<map_draw_h		; Maximum CHR to draw.
  419    02:D890  85 00      	!:		sta	<map_count		; Set number of CHR to draw.
  420    02:D892  85 01      			sta	<map_drawn		; Preserve number of CHR drawn.
  421                        	
  422    02:D894  A9 05      			lda	#VDC_CR			; Set VDC auto-increment from
  423    02:D896  95 F7      			sta	<vdc_reg, x		; the BAT width, which is set
  424    02:D898  9D 00 02   			sta	VDC_AR, x		; up by set_screen_size().
  425    02:D89B  B5 F4      			lda	<vdc_crh, x
  426    02:D89D  9D 03 02   			sta	VDC_DH, x
  427                        	
  428    02:D8A0  20 A2 D9   			jsr	bat_col_strip		; Draw top of vertical strip.
  429                        	
  430                        			; Wrap around and draw the rest of the column (if needed).
  431                        	
  432    02:D8A3  38         			sec				; Are there any more CHR that
  433    02:D8A4  A5 FB      			lda	<map_draw_h		; need to be drawn?
  434    02:D8A6  E5 01      			sbc	<map_drawn
  435    02:D8A8  F0 0B      			beq	.done
  436                        	
  437    02:D8AA  85 00      			sta	<map_count		; Set number of CHR to draw.
  438                        	
  439    02:D8AC  A5 F8      			lda	<map_bat_x		; Set the BAT VRAM destination
  440    02:D8AE  85 F0      			sta.l	<_di			; coordinates.
  441    02:D8B0  64 F1      			stz.h	<_di			; Reset 1st row to draw.
  442                        	
  443    02:D8B2  20 A2 D9   			jsr	bat_col_strip		; Draw btm of vertical strip.
  444                        	
  445    02:D8B5  A9 05      	.done:		lda	#VDC_CR			; Set VDC auto-increment to 1.
  446    02:D8B7  95 F7      			sta	<vdc_reg, x
  447    02:D8B9  9D 00 02   			sta	VDC_AR, x
  448    02:D8BC  9E 03 02   			stz	VDC_DH, x
  449                        	
  450    02:D8BF  60         			rts
  451                        	
  452                        	
  453                        	
  454                        	; ***************************************************************************
  455                        	; ***************************************************************************
  456                        	;
  457                        	; bat_scroll_y - Update the BAT when Y coordinate changes.
  458                        	;
  459                        	; N.B. This draws multiple rows when called from _draw_bat or _blit_bat.
  460                        	;
  461                        	
  462    02:D8C0  60         	!no_change:	rts
  463                        	
  464    02:D8C1  A5 FE      	bat_scroll_y:	lda	<map_chr_y		; Compare old_y with cur_y.
  465    02:D8C3  DD BB 2B   			cmp	vdc_old_chr_y, x
  466    02:D8C6  F0 F8      			beq	!no_change-		; Do nothing if no change.
  467    02:D8C8  9D BB 2B   			sta	vdc_old_chr_y, x
  468    02:D8CB  30 05      			bmi	.moved			; Test the sign of the change.
  469                        	
  470    02:D8CD  18         			clc				; Draw bottom if chr_y >= old_y.
  471    02:D8CE  7D 84 26   			adc	vdc_map_draw_h, x	; Usually (SCR_HEIGHT / 8) + 1.
  472    02:D8D1  3A         			dec	a
  473                        	
  474    02:D8D2  A8         	.moved:		tay				; Y = chr_y in map section.
  475                        	
  476    02:D8D3  3C 8B 26   			bit	vdc_map_option, x	; Set bit6 to disable aligning
  477    02:D8D6  70 05      			bvs	!+			; BAT Y with the map Y.
  478    02:D8D8  3D 81 26   			and	vdc_bat_y_mask, x
  479    02:D8DB  85 F9      			sta	<map_bat_y		; Save BAT Y chr coordinate.
  480                        	
  481    02:D8DD  3C 8B 26   	!:		bit	vdc_map_option, x	; Set bit7 to disable aligning
  482    02:D8E0  30 07      			bmi	!+			; BAT X with the map X.
  483    02:D8E2  A5 FC      			lda	<map_chr_x
  484    02:D8E4  3D 80 26   			and	vdc_bat_x_mask, x
  485    02:D8E7  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
  486                        	
  487               0000     		.if	FAST_MULTIPLY
  490                        		.endif
  491                        	
  492    02:D8E9  BD 85 26   	!:		lda	vdc_map_line_w, x	; Map width in CHR (0 == 256).
  493    02:D8EC  D0 05      			bne	!+
  494                        	
  495    02:D8EE  64 EE      			stz.l	<map_line		; Multiply by 256 is easy!
  496    02:D8F0  98         			tya
  497    02:D8F1  80 15      			bra	.double
  498                        	
  499               0000     		.if	FAST_MULTIPLY
  511                        		.else
  512    02:D8F3  84 EF      	!:		sty.h	<map_line		; Takes 144..176 cycles.
  513    02:D8F5  A0 08      			ldy	#8
  514    02:D8F7  4A         			lsr	a
  515    02:D8F8  85 EE      			sta.l	<map_line
  516    02:D8FA  62         			cla
  517    02:D8FB  90 03      			bcc	.rotate
  518    02:D8FD  18         	.add:		clc
  519    02:D8FE  65 EF      			adc.h	<map_line
  520    02:D900  6A         	.rotate:	ror	a
  521    02:D901  66 EE      			ror.l	<map_line		; Lo-byte of (CHR Y * width).
  522    02:D903  88         			dey
  523    02:D904  B0 F7      			bcs	.add
  524    02:D906  D0 F8      			bne	.rotate
  525                        		.endif
  526                        	
  527    02:D908  06 EE      	.double:	asl.l	<map_line		; Lo-byte of (CHR Y * width * 2).
  528    02:D90A  2A         			rol	a
  529    02:D90B  85 EF      			sta.h	<map_line		; Hi-byte of (CHR Y * width * 2).
  530    02:D90D  A8         			tay
  531                        	
  532    02:D90E  BD C4 2B   			lda	vdc_map_bank, x		; Put the MAP into MPR3-MPR5.
  533    02:D911  53 08      			tam3				; Allow for 16KByte chrmap.
  534    02:D913  1A         			inc	a
  535    02:D914  53 10      			tam4
  536    02:D916  1A         			inc	a
  537    02:D917  53 20      			tam5
  538                        	
  539                        			; Loop to here if drawing multiple rows.
  540                        	
  541    02:D919  A5 FC      	.next_row:	lda	<map_chr_x		; Map CHR X coordinate.
  542    02:D91B  0A         			asl	a			; 2-bytes for a BAT value!
  543    02:D91C  90 02      			bcc	!+
  544    02:D91E  C8         			iny				; Hi-byte of (CHR Y * width * 2).
  545    02:D91F  18         			clc
  546    02:D920  65 EE      	!:		adc.l	<map_line		; Lo-byte of (CHR Y * width * 2).
  547    02:D922  90 01      			bcc	!+
  548    02:D924  C8         			iny
  549    02:D925  18         	!:		clc				; Calc map data pointer.
  550    02:D926  7D C2 2B   			adc.l	vdc_map_addr, x
  551    02:D929  85 EC      			sta.l	<_bp			; Maximum map size is 16KBytes
  552    02:D92B  98         			tya				; so we don't need to consider
  553    02:D92C  7D C3 2B   			adc.h	vdc_map_addr, x		; bank overflow.
  554    02:D92F  85 ED      			sta.h	<_bp
  555                        	
  556                        			; Draw the first part of the row.
  557                        	
  558    02:D931  A5 F9      	.draw_row:	lda	<map_bat_y		; Set the BAT VRAM destination
  559    02:D933  85 F1      			sta.h	<_di			; coordinates.
  560    02:D935  A5 F8      			lda	<map_bat_x
  561    02:D937  85 F0      			sta.l	<_di
  562                        	
  563    02:D939  5D 80 26   			eor	vdc_bat_x_mask, x	; Calc CHR before wrap.
  564    02:D93C  1A         			inc	a
  565    02:D93D  C5 FA      			cmp	<map_draw_w		; Usually (SCR_WIDTH / 8) + 1.
  566    02:D93F  90 02      			bcc	!+
  567    02:D941  A5 FA      			lda	<map_draw_w		; Maximum CHR to draw.
  568    02:D943  85 00      	!:		sta	<map_count		; Set number of CHR to draw.
  569    02:D945  85 01      			sta	<map_drawn		; Preserve number of CHR drawn.
  570                        	
  571    02:D947  20 81 D9   			jsr	bat_row_strip		; Draw lhs of horizontal strip.
  572                        	
  573                        			; Wrap around and draw the rest of the row (if needed).
  574                        	
  575    02:D94A  38         			sec				; Are there any more CHR that
  576    02:D94B  A5 FA      			lda	<map_draw_w		; need to be drawn?
  577    02:D94D  E5 01      			sbc	<map_drawn
  578    02:D94F  F0 0B      			beq	.done_row
  579                        	
  580    02:D951  85 00      			sta	<map_count		; Set number of CHR to draw.
  581                        	
  582    02:D953  A5 F9      			lda	<map_bat_y		; Set the BAT VRAM destination
  583    02:D955  85 F1      			sta.h	<_di			; coordinates.
  584    02:D957  64 F0      			stz.l	<_di			; Reset 1st column to draw.
  585                        	
  586    02:D959  20 81 D9   			jsr	bat_row_strip		; Draw rhs of horizontal strip.
  587                        	
  588    02:D95C  C6 FB      	.done_row:	dec	<map_draw_h		; Are all desired rows drawn?
  589    02:D95E  F0 20      			beq	.finished
  590                        	
  591    02:D960  A5 F9      			lda	<map_bat_y		; Move BAT Y down by 1.
  592    02:D962  1A         			inc	a
  593    02:D963  3D 81 26   			and	vdc_bat_y_mask, x
  594    02:D966  85 F9      			sta	<map_bat_y
  595                        	
  596    02:D968  A4 EF      			ldy.h	<map_line		; Move the map line pointer to
  597    02:D96A  C8         			iny				; the next line.
  598    02:D96B  BD 85 26   			lda	vdc_map_line_w, x
  599    02:D96E  F0 0B      			beq	!++			; vdc_map_line_w == 0 == 256.
  600    02:D970  0A         			asl	a			; 2-bytes for a BAT value!
  601    02:D971  B0 01      			bcs	!+
  602    02:D973  88         			dey				; Fix if vdc_map_line_w <= 127.
  603    02:D974  18         	!:		clc
  604    02:D975  65 EE      			adc.l	<map_line
  605    02:D977  85 EE      			sta.l	<map_line
  606    02:D979  90 01      			bcc	!++
  607    02:D97B  C8         	!:		iny
  608    02:D97C  84 EF      	!:		sty.h	<map_line		; Needed for .next_row!
  609                        	
  610    02:D97E  80 99      			bra	.next_row		; Draw next row.
  611                        	
  612    02:D980  60         	.finished:	rts
  613                        	
  614                        	
  615                        	
  616                        	; ***************************************************************************
  617                        	; ***************************************************************************
  618                        	;
  619                        	; bat_row_strip - Draw a single row of CHR into the BAT.
  620                        	;
  621                        	
  622    02:D981  20 34 E4   	bat_row_strip:	jsr	set_di_xy_mawr		; Set the BAT VRAM destination.
  623                        	
  624    02:D984  C2         			cly				; 2
  625    02:D985  B1 EC      	.repeat:	lda	[_bp], y		; 7
  626    02:D987  9D 02 02   			sta	VDC_DL, x		; 6
  627    02:D98A  C8         			iny				; 2
  628    02:D98B  B1 EC      			lda	[_bp], y		; 7
  629               0000     		.if	CHRMAP_BAT_FLAG
  634                        		.endif
  635    02:D98D  9D 03 02   			sta	VDC_DH, x		; 6
  636    02:D990  C8         			iny				; 2
  637                        	
  638    02:D991  C6 00      	!:		dec	<map_count		; 6
  639    02:D993  D0 F0      			bne	.repeat			; 4
  640                        	
  641    02:D995  98         			tya				; 2
  642    02:D996  F0 07      			beq	!+			; 2/4
  643    02:D998  18         			clc				; 2
  644    02:D999  65 EC      			adc.l	<_bp			; 4
  645    02:D99B  85 EC      			sta.l	<_bp			; 4
  646    02:D99D  90 02      			bcc	.done			; 2/4
  647    02:D99F  E6 ED      	!:		inc.h	<_bp			; 6
  648                        	
  649    02:D9A1  60         	.done:		rts
  650                        	
  651                        	
  652                        	
  653                        	; ***************************************************************************
  654                        	; ***************************************************************************
  655                        	;
  656                        	; bat_col_strip - Draw a single column of CHR into the BAT.
  657                        	;
  658                        	
  659    02:D9A2  20 34 E4   	bat_col_strip:	jsr	set_di_xy_mawr		; Set the BAT VRAM destination.
  660                        	
  661    02:D9A5  A0 01      			ldy	#1			; 2
  662    02:D9A7  B2 EC      	.repeat:	lda	[_bp]			; 7
  663    02:D9A9  9D 02 02   			sta	VDC_DL, x		; 6
  664    02:D9AC  B1 EC      			lda	[_bp], y		; 7
  665               0000     		.if	CHRMAP_BAT_FLAG
  670                        		.endif
  671    02:D9AE  9D 03 02   			sta	VDC_DH, x		; 6
  672                        	
  673    02:D9B1  18         			clc				; 2
  674    02:D9B2  A5 EE      			lda.l	<map_line		; 4
  675    02:D9B4  65 EC      			adc.l	<_bp			; 4
  676    02:D9B6  85 EC      			sta.l	<_bp			; 4
  677    02:D9B8  A5 EF      			lda.h	<map_line		; 4
  678    02:D9BA  65 ED      			adc.h	<_bp			; 4
  679    02:D9BC  85 ED      			sta.h	<_bp			; 4
  680                        	
  681    02:D9BE  C6 00      			dec	<map_count		; 6
  682    02:D9C0  D0 E5      			bne	.repeat			; 4
  683                        	
  684    02:D9C2  60         			rts
  685                        	
  686                        		.endprocgroup	; chrmap_group
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   88                        		.endif	HUCC_USES_CHRMAP
   89                        	
   90               0001     		.ifdef	HUCC_USES_OLD_LINE		; Set in hucc_old_line.h
                             #[3]   "..\..\..\include\hucc\hucc-old-line.asm"
   91                        			include	"hucc-old-line.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-old-line.asm
    5                        	;
    6                        	; Based on the original HuC and MagicKit functions by David Michel and the
    7                        	; other original HuC developers.
    8                        	;
    9                        	; Modifications copyright John Brandwood 2024-2025.
   10                        	;
   11                        	; Distributed under the Boost Software License, Version 1.0.
   12                        	; (See accompanying file LICENSE_1_0.txt or copy at
   13                        	;  http://www.boost.org/LICENSE_1_0.txt)
   14                        	;
   15                        	; ***************************************************************************
   16                        	; ***************************************************************************
   17                        	
   18                        	
   19                        	
   20                        	; ***************************************************************************
   21                        	; ***************************************************************************
   22                        	;
   23                        	; void __fastcall gfx_init( unsigned int start_vram_addr<_ax> );
   24                        	;
   25                        	; initialize graphics mode
   26                        	; - points graphics map to tiles at start_vram_addr
   27                        	
   28                        	_gfx_init.1	.proc
   73                        			.endp
   74                        	
   75                        	
   76                        	
   77                        	; ***************************************************************************
   78                        	; ***************************************************************************
   79                        	;
   80                        	; void __fastcall gfx_clear( unsigned int start_vram_addr<_di> );
   81                        	;
   82                        	; Clear the values in the graphics tiles
   83                        	; - places zeroes in graphics tiles at start_vram_addr
   84                        	
   85                        	_gfx_clear.1	.proc
  105                        			.endp
  106                        	
  107                        	
  108                        	
  109                        	; ***************************************************************************
  110                        	; ***************************************************************************
  111                        	;
  112                        	; void __fastcall gfx_line( unsigned int x1<_gfx_x1>, unsigned int y1<_gfx_y1>, unsigned int x2<_gfx_x2>, unsigned int y2<_gfx_y2>, unsigned char color<_gfx_color> );
  113                        	
  114                        	huc_gfx_line	.procgroup
  459                        			.endprocgroup	; huc_gfx_line
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   92                        		.endif
   93                        	
   94               0000     		.ifdef	HUCC_USES_ZX0			; Set in hucc_zx0.h
   96                        		.endif
   97                        	
   98                        	
   99                        	
  100                        	; ***************************************************************************
  101                        	; ***************************************************************************
  102                        	;
  103                        	; Check that C "__zp" declarations aren't overwriting System Card variables.
  104                        	;
  105                        	
  106               20A0     			.zp
  107               0000     		.if	(* > zpg_sys_top) || (USING_PSGDRIVER && (* > zpg_psg_top))
  109                        		.endif
  110                        	
  111                        	
  112                        	
  113                        	; ***************************************************************************
  114                        	; ***************************************************************************
  115                        	;
  116                        	; Check that there isn't too much C "const" data in the ".RODATA" section.
  117                        	;
  118                        	
  119               61C9     			.rodata
  120               0000     		.if	(bank(*) - _bank_base) >= (CONST_BANK + 2)
  122                        		.endif
  123               E937     			.code
                             #[1]   "main.s"

PROCEDURE LIST (in order of size):

Size: $19AA, Addr: $01:C1C9,      .proc _update_PLAYER
Size: $0A61, Addr: $17:C7E0,      .proc _joypad_DIR
Size: $08B2, Addr: $17:D241,      .proc _update_WEAPON
Size: $086D, Addr: $02:C000, .procgroup blkmap_group
Size: $0580, Addr: $02:C86D,      .proc _joypad_BUTTONS_SHOP
Size: $04F5, Addr: $17:DAF3,      .proc _init_LEVEL
Size: $0414, Addr: $01:DB73,      .proc _init_SHOP
Size: $0390, Addr: $02:CDED,      .proc huc_monofont_x
Size: $02F0, Addr: $02:D17D,      .proc _init_HUD
Size: $02C4, Addr: $02:D46D,      .proc _load_OBJECT_TILES
Size: $0292, Addr: $02:D731, .procgroup chrmap_group
Size: $0279, Addr: $02:D9C3,      .proc _joypad_BUTTONS
Size: $01F7, Addr: $08:DDC0,      .proc _main
Size: $0197, Addr: $02:DC3C,      .proc _joypad_BUTTONS_TITLE
Size: $0184, Addr: $02:DDD3,      .proc _check_OBJECT
Size: $016F, Addr: $18:C000,      .proc _init_TITLE
Size: $0167, Addr: $18:C16F,      .proc _scroll_object
Size: $0167, Addr: $18:C2D6,      .proc _scroll_chest
Size: $0167, Addr: $18:C43D,      .proc _scroll_npc
Size: $013E, Addr: $18:C5A4,      .proc _check_NPC
Size: $013E, Addr: $18:C6E2,      .proc _init_OBJECT_LV1
Size: $0108, Addr: $18:C820,      .proc read_joypads
Size: $0107, Addr: $18:C928,      .proc _recenter_CAMERA
Size: $00DF, Addr: $18:CA2F, .procgroup vdc_set_mode
Size: $00D5, Addr: $18:CB0E,      .proc _init_NPC_LV1
Size: $00C8, Addr: $18:CBE3,      .proc _init_CHEST_LV1
Size: $00BF, Addr: $18:CCAB, .procgroup vdc_tty_out
Size: $00A5, Addr: $02:DF57,      .proc _display_TIME_SHOP
Size: $009D, Addr: $18:CD6A,      .proc _display_TIME_LEVEL
Size: $0086, Addr: $18:CE07,      .proc _sgx_scroll_split.5
Size: $0081, Addr: $18:CE8D,      .proc vbl_init_scroll
Size: $007A, Addr: $18:CF0E,      .proc _check_TILE_DEPTH
Size: $0077, Addr: $01:DF87,      .proc core_main
Size: $006A, Addr: $18:CF88, .procgroup load_vram_group
Size: $0064, Addr: $18:CFF2,      .proc _check_BG
Size: $0062, Addr: $18:D056,      .proc _init_256x224
Size: $004E, Addr: $18:D0B8, .procgroup old_satb_group
Size: $004B, Addr: $18:D106, .procgroup hucc_memcmp
Size: $0043, Addr: $08:DFB7, .procgroup vdc_clear_vram
Size: $0043, Addr: $18:D151,      .proc sgx_detect
Size: $0042, Addr: $18:D194,      .proc _init_PLAYER
Size: $003F, Addr: $18:D1D6, .procgroup load_bat_group
Size: $003E, Addr: $18:D215,      .proc _init_VARIABLES
Size: $003E, Addr: $18:D253,      .proc _vram2vram.3
Size: $003B, Addr: $18:D291,      .proc init_random
Size: $002E, Addr: $18:D2CC,      .proc _scroll_BG
Size: $002B, Addr: $18:D2FA,      .proc _load_palette.3
Size: $0026, Addr: $18:D325,      .proc _load_CHEST_TILES
Size: $0026, Addr: $18:D34B,      .proc _load_NPC_TILES
Size: $0023, Addr: $18:D371,      .proc _hide_LEVEL_SPRITES
Size: $001D, Addr: $18:D394,      .proc _init_SYSTEM
Size: $001C, Addr: $18:D3B1,      .proc _display_SCORE
Size: $001C, Addr: $18:D3CD,      .proc _display_ZENNY
Size: $001C, Addr: $18:D3E9,      .proc clear_vce
Size: $001A, Addr: $18:D405,      .proc _display_KEY
Size: $001A, Addr: $18:D41F,      .proc _display_POTION
