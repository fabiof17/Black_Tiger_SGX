                             #[1]   "main.s"
   27                        	
   28               0010     	CORE_VERSION	=	$10			; Version 1.0
   29                        	
   30                        			; Get the user program's configuration settings, this will
   31                        			; be read from the current directory, if it exists, or the
   32                        			; "../include/" directory if not.
   33                        	
                             #[4]   "..\..\..\include\hucc\core-config.inc"
   34                        			include	"core-config.inc"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; core-config.inc
    5                        	;
    6                        	; Configuration settings for the "CORE(not TM)" PC Engine library code.
    7                        	;
    8                        	; Copyright John Brandwood 2021-2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; The idea is that you, a PCE developer, copy this file from the ../include/
   18                        	; directory and into your project's directory, and then customize the values
   19                        	; to suit your particular project.
   20                        	;
   21                        	; Because PCEAS searches the current (i.e. project) directory for an include
   22                        	; file first, then it will find your customized copy of the file rather than
   23                        	; the original copy in the ../include/ directory.
   24                        	;
   25                        	; That means that all of the different overlay programs in your project will
   26                        	; share the same overall library configuration for your game.
   27                        	;
   28                        	; ***************************************************************************
   29                        	; ***************************************************************************
   30                        	
   31                        	;
   32                        	; Are we going to take over MPR7?
   33                        	;
   34                        	; While this is the default for the "CORE(not TM)" library, it is definitely
   35                        	; possible to use the library to build CD-ROM code that runs with the System
   36                        	; Card in MPR7, and with the 1st bank remaining in MPR2.
   37                        	;
   38                        	; N.B. The CD-ROM Stage1 loader runs the library with USING_MPR7=0 while it
   39                        	;      installs the kernel into PCE RAM in MPR1.
   40                        	;
   41                        	
   42               0000     		.ifndef	USING_MPR7
   44                        		.endif
   45                        	
   46                        	;
   47                        	; Are we building a CD-ROM overlay that uses an already-built CD-ROM Stage1
   48                        	; loader to install the library's kernel code into PCE RAM in MPR1?
   49                        	;
   50                        	; If this is set, the library's kernel code will be excluded from the build,
   51                        	; which will save about 1KB-3KB of code space in every overlay program!
   52                        	;
   53                        	; N.B. The CD-ROM Stage1 loader sets USING_STAGE1=0 so it builds correctly.
   54                        	;
   55                        	
   56               0000     		.ifndef	USING_STAGE1
   58                        		.endif
   59                        	
   60                        	;
   61                        	; Are we currently building the CD-ROM Stage1 loader?
   62                        	;
   63                        	; If this is set, the library's startup code does not call the __sound_init
   64                        	; macro because the sound driver code is not usually a part of the kernel.
   65                        	;
   66                        	; N.B. The CD-ROM Stage1 loader sets BUILDING_STAGE1=1 so it builds correctly.
   67                        	;
   68                        	
   69               0000     		.ifndef	BUILDING_STAGE1
   71                        		.endif
   72                        	
   73                        	;
   74                        	; Is the last track of the CD a duplicate of the main ISO data track?
   75                        	;
   76                        	; Most CD games put two copies of the same ISO track on the CD, so that data
   77                        	; can be read from the secondary track if the drive has a problem reading it
   78                        	; it from the primary location.
   79                        	;
   80                        	; If set, the secondary track will be enabled when the library first starts.
   81                        	;
   82                        	
   83               0000     		.ifndef	SUPPORT_2ISO
   85                        		.endif
   86                        	
   87                        	;
   88                        	; Maximum number of directory entries to use from the ISO.
   89                        	;
   90                        	; The fewer that we choose, the less RAM memory we need. A setting of 64 is
   91                        	; a good compromise to use until you are putting lots of files on the ISO.
   92                        	;
   93                        	
   94               0000     		.ifndef	MAX_DIRSIZE
   96                        		.endif
   97                        	
   98                        	;
   99                        	; Use the System Card's PSG driver code instead of a modern alternative
  100                        	; sound driver like a DefleMask or Furnace player?
  101                        	;
  102                        	
  103               0000     		.ifndef	USING_PSGDRIVER
  105                        		.endif
  106                        	
  107                        	;
  108                        	; Support development for the Turbo EverDrive v2?
  109                        	;
  110                        	; This only applies to HuCard programs, but when chosen, the "CORE(not TM)"
  111                        	; kernel is moved from bank 0 to bank 2, and a minimal set of startup code
  112                        	; is put in bank 0.
  113                        	;
  114                        	; This is because the TED2 hardware occupies the whole of bank 0 when it is
  115                        	; activated, and so we need to run with a different bank in MPR7.
  116                        	;
  117                        	
  118               0000     		.ifndef	SUPPORT_TED2
  120                        		.endif
  121                        	
  122                        	;
  123                        	; Support development for the SuperGRAFX?
  124                        	;
  125                        	; This enables SuperGRAFX support in certain library functions.
  126                        	;
  127                        	
  128               0000     		.ifndef	SUPPORT_SGX
  130                        		.endif
  131                        	
  132                        	;
  133                        	; Choose SuperGRAFX VPC initialization mode.
  134                        	;
  135                        	; SGX_PARALLAX=0 (useful when VDC #1 is a fullscreen HUD)
  136                        	;
  137                        	;  FRONT
  138                        	;   SP1 = VDC #1 (pce) sprite pixels
  139                        	;   BG1 = VDC #1 (pce) background pixels
  140                        	;   SP2 = VDC #2 (sgx) sprite pixels
  141                        	;   BG2 = VDC #2 (sgx) background pixels
  142                        	;  BACK
  143                        	;
  144                        	; SGX_PARALLAX=1
  145                        	;
  146                        	;  FRONT
  147                        	;   SP1 = VDC #1 (pce) sprite pixels
  148                        	;   SP2 = VDC #2 (sgx) sprite pixels
  149                        	;   BG1 = VDC #1 (pce) background pixels
  150                        	;   BG2 = VDC #2 (sgx) background pixels
  151                        	;  BACK
  152                        	;
  153                        	
  154               0000     		.ifndef	SGX_PARALLAX
  156                        		.endif
  157                        	
  158                        	;
  159                        	; Support development for the ArcadeCard?
  160                        	;
  161                        	; This enables ArcadeCard support in certain library functions.
  162                        	;
  163                        	
  164               0000     		.ifndef	SUPPORT_ACD
  166                        		.endif
  167                        	
  168                        	;
  169                        	; Support development for the IFU's ADPCM hardware?
  170                        	;
  171                        	; Developers would normally just use the System Card functions for ADPCM, but
  172                        	; enabling this adds alternative functions, and allows ADPCM use on a HuCARD.
  173                        	;
  174                        	
  175               0000     		.ifndef	SUPPORT_ADPCM
  177                        		.endif
  178                        	
  179                        	;
  180                        	; Select which version of the joystick library code to include, only one of
  181                        	; these can be set to '1' ...
  182                        	;
  183                        	; SUPPORT_2BUTTON : Only returns buttons I and II.
  184                        	; SUPPORT_6BUTTON : Read buttons III-VI, but ignore a mouse.
  185                        	; SUPPORT_MOUSE	  : Read mouse, but ignore buttons III-VI.
  186                        	;
  187                        	; It doesn't make sense to design a game the relies on both the 6-button and
  188                        	; the mouse, so the joystick library is optimized for one or the other.
  189                        	;
  190                        	; Note that both those devices are always detected and no conflicts occur,
  191                        	; this just controls reading either buttons III-VI or the Mouse Y-movement.
  192                        	;
  193                        	
  194               0000     		.ifndef	SUPPORT_6BUTTON
  200                        		.endif
  201                        	
  202                        	;
  203                        	; How many joypad/mouse devices should be supported?
  204                        	;
  205                        	; This is normally 5, but can be set to 3 (or lower) in order to speed up
  206                        	; the processing and free up CPU time for other code, which is especially
  207                        	; useful for mouse games.
  208                        	;
  209                        	
  210               0000     		.ifndef	MAX_PADS
  212                        		.endif
  213                        	
  214                        	;
  215                        	; Implement a HuC-compatible seperate array for accumulating joypad presses?
  216                        	;
  217                        	; This is only really needed if your game is not expected to run at 60Hz and
  218                        	; so you will sometimes miss joypad presses.
  219                        	;
  220                        	; Alternatively you can set ACCUMULATE_JOY so that joypad presses are always
  221                        	; accumulated in the normal joytrg array, which is how asm programmers would
  222                        	; normally deal with this situation.
  223                        	;
  224                        	
  225               0000     		.ifndef HUC_JOY_EVENTS
  227                        		.endif
  228                        	
  229                        	;
  230                        	; Should "joytrg" accumulate presses, and so need to be explicitely cleared
  231                        	; after reading, or should it just be the result of the last read?
  232                        	;
  233                        	; This option has no effect if HUC_JOY_EVENTS is non-zero since that option
  234                        	; takes precedence over this one!
  235                        	;
  236                        	
  237               0000     		.ifndef ACCUMULATE_JOY
  239                        		.endif
  240                        	
  241                        	;
  242                        	; The DATA_BANK location needs to be set as early as possible so that library
  243                        	; code is able to put data in there before the total overall size of the code
  244                        	; is known.
  245                        	;
  246                        	; By default, DATA_BANK is the next bank after the CORE_BANK.
  247                        	;
  248                        	; RESERVE_BANKS allows developers to reserve some banks between the CORE_BANK
  249                        	; and the DATA_BANK that they can use however they wish.
  250                        	;
  251                        	; One use for RESERVE_BANKS is to create empty space that PCEAS can use when
  252                        	; it relocates procedures. This provides a way for a developer to group code
  253                        	; together at the start of memory, and leave the maximum number of banks for
  254                        	; loading dynamic data from CD-ROM.
  255                        	;
  256                        	; The KickC environment sets RESERVE_BANKS=1 (or higher) so that there is a
  257                        	; a bank for the permanent C code and static constants.
  258                        	;
  259                        	
  260               0000     		.ifndef	RESERVE_BANKS
  266                        		.endif	RESERVE_BANKS
                             #[3]   "..\..\..\include\hucc\core.inc"
   35                        	
   36                        	;
   37                        	; This is a simple macro to call System Card functions when using MPR7 for
   38                        	; running the "CORE(not TM)" PC Engine library code.
   39                        	;
   40                        	
   41                        	system		.macro
   42                        			ldy     #<\1
   43                        			jsr	call_bios
   44                        			.endm
   45                        	
   46                        	;
   47                        	; This replaces the System Card's ex_setvec, because "call_bios" uses the
   48                        	; Y register.
   49                        	;
   50                        	
   51                        	setvec		.macro
   52                        			php
   53                        			sei
   54                        			lda.l	#\2
   55                        			sta.l	\1
   56                        			lda.h	#\2
   57                        			sta.h	\1
   58                        			plp
   59                        			.endm
   60                        	
   61                        	;
   62                        	; Repurpose this System Card variable, since nmi_hook is never used.
   63                        	;
   64                        	; We'll use it as a vector to a user-supplied sound driver instead.
   65                        	;
   66                        	
   67               2206     	sound_hook	=	nmi_hook		; Sound Driver to run in VBL.
   68                        	
   69                        	;
   70                        	; CORE Zero-Page variables, relative to the System Card's ZP variables.
   71                        	;
   72                        	
   73               0000     		.if	USING_PSGDRIVER
   75                        		.else
   76               20EC     	core_zpend	=	$F8:20EC
   77                        		.endif	USING_PSGDRIVER
   78                        	
   79               0001     		.if	SUPPORT_SGX
   80                        	
   81                        			; Put some "CORE(not TM)" variables at the start of Zero Page.
   82                        			;
   83                        			; These are at the *start* of ZP so that the SuperGrafx shadow
   84                        			; "sgx_" registers are at a specific offset from their System
   85                        			; Card "vdc_" counterparts, and they MUST NOT be moved!
   86                        			;
   87                        			; This allows us to put SGX_VDC_OFFSET or PCE_VDC_OFFSET into
   88                        			; the X register, and then index into either set of hardware
   89                        			; registers and the "sgx_reg" or "vdc_reg" shadow-variables.
   90                        	
   91               0000     	PCE_VDC_OFFSET	=	$00		; Offset to PCE VDC chip & shadow vars.
   92               0010     	SGX_VDC_OFFSET	=	$10		; Offset to SGX VDC chip & shadow vars.
   93                        	
   94               2000     			.zp
   95               2000     			.org	$2000
   96    F8:2000             	__temp		ds	2		; $F8:2000 Use within any ASM routine.
   97    F8:2002             	_bp_bank	ds	1		; $F8:2002 Use within any ASM/HuCC routine.
   98    F8:2003             	sgx_crl		ds	1		; $F8:2003 SGX shadow (vdc_crl = $20F3).
   99    F8:2004             	sgx_crh		ds	1		; $F8:2004 SGX shadow (vdc_crh = $20F4).
  100    F8:2005             	core_1stbank	ds	1		; $F8:2005 1st bank of library code.
  101    F8:2006             	sgx_sr		ds	1		; $F8:2006 SGX shadow (vdc_sr  = $20F6).
  102    F8:2007             	sgx_reg		ds	1		; $F8:2007 SGX shadow (vdc_reg = $20F7).
  103                        	
  104               2008     	core_zp1st	=	*		; $F8:2008 1st free user address.
  105                        	
  106                        		.else	SUPPORT_SGX
  116                        		.endif	SUPPORT_SGX
  117                        	
  118                        	;
  119                        	; The kernel code in RAM follows the System Card's RAM variables.
  120                        	;
  121                        	
  122               0000     		.if	USING_PSGDRIVER
  124                        		.else
  125               22D0     	core_ram1st     =	$F8:22D0
  126                        		.endif	USING_PSGDRIVER
  127                        	
  128                        	;
  129                        	; Include the "CORE(not TM)" startup code to begin the HuCARD / Overlay.
  130                        	;
  131                        	
                             #[4]   "..\..\..\include\hucc\core-startup.asm"
  132                        			include	"core-startup.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; core-startup.asm
    5                        	;
    6                        	; The "CORE(not TM)" PC Engine library startup code that runs at boot/reset.
    7                        	;
    8                        	; Copyright John Brandwood 2021-2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; This is the initialization code in the 1st bank, and it is responsible for
   18                        	; setting up a consistant runtime environment for the developer's program,
   19                        	; so that the developer can concentrate on writing the program itself.
   20                        	;
   21                        	; The idea is that when a program is loaded, the first 40KB of it is mapped
   22                        	; as $4000..$DFFF, and initialization starts at $4000, with the developer's
   23                        	; program getting control after initialization, with a jump to "core_main".
   24                        	;
   25                        	; The initializtion sets up a small kernel of code that provides interrupt
   26                        	; handling that mimics a subset of the System Card's behavior, designed to
   27                        	; act in the same way on HuCARD and CD-ROM, with either the System Card in
   28                        	; MPR7, or with an overlay in MPR7.
   29                        	;
   30                        	; The kernel handles reading the joypad/mouse, and it offers handler hooks
   31                        	; for running the developer's interrupt code.  On CD-ROM systems, it also
   32                        	; handles the loading and running of subsequent overlay programs.
   33                        	;
   34                        	; On HuCARD, the kernel itself runs in MPR7; while on CD-ROM systems it is
   35                        	; run from RAM in MPR1, so that overlay programs are independant from each
   36                        	; other, and can be written in different programming languages.
   37                        	;
   38                        	;
   39                        	; 1) If we're running on a HuCARD, the initialization is simple!
   40                        	;
   41                        	;    The PC Engine's memory map is set to ...
   42                        	;
   43                        	;      MPR0 = bank $FF : PCE hardware
   44                        	;      MPR1 = bank $F8 : PCE RAM with Stack & ZP
   45                        	;      MPR2 = bank $00 : HuCARD ROM
   46                        	;      MPR3 = bank $01 : HuCARD ROM
   47                        	;      MPR4 = bank $02 : HuCARD ROM
   48                        	;      MPR5 = bank $03 : HuCARD ROM
   49                        	;      MPR6 = bank $04 : HuCARD ROM
   50                        	;      MPR7 = bank $00 : HuCARD ROM
   51                        	;
   52                        	;
   53                        	; 2) If we're running on a HuCARD that supports the Turbo Everdrive, then the
   54                        	;    first 2 banks are reserved for mapping the TED2 hardware and a RAM bank.
   55                        	;
   56                        	;    The PC Engine's memory map is set to ...
   57                        	;
   58                        	;      MPR0 = bank $FF : PCE hardware
   59                        	;      MPR1 = bank $F8 : PCE RAM with Stack & ZP
   60                        	;      MPR2 = bank $02 : HuCARD ROM
   61                        	;      MPR3 = bank $03 : HuCARD ROM
   62                        	;      MPR4 = bank $04 : HuCARD ROM
   63                        	;      MPR5 = bank $05 : HuCARD ROM
   64                        	;      MPR6 = bank $06 : HuCARD ROM
   65                        	;      MPR7 = bank $02 : HuCARD ROM
   66                        	;
   67                        	;
   68                        	; 3) If we're running on an old CD System, the overlay is loaded from the ISO
   69                        	;    into banks $80-$87 (64KB max).
   70                        	;
   71                        	;    The PC Engine's memory map is set to ...
   72                        	;
   73                        	;      MPR0 = bank $FF : PCE hardware
   74                        	;      MPR1 = bank $F8 : PCE RAM with Stack & ZP
   75                        	;      MPR2 = bank $80 : CD RAM
   76                        	;      MPR3 = bank $81 : CD RAM
   77                        	;      MPR4 = bank $82 : CD RAM
   78                        	;      MPR5 = bank $83 : CD RAM
   79                        	;      MPR6 = bank $84 : CD RAM
   80                        	;      MPR7 = bank $80 : CD RAM or System Card's bank $00
   81                        	;
   82                        	;
   83                        	; 4) If we're running on a SuperCD System, the overlay is loaded from the ISO
   84                        	;    into banks $68-$87 (256KB max).
   85                        	;
   86                        	;    The PC Engine's memory map is set to ...
   87                        	;
   88                        	;      MPR0 = bank $FF : PCE hardware
   89                        	;      MPR1 = bank $F8 : PCE RAM with Stack & ZP
   90                        	;      MPR2 = bank $68 : SCD RAM
   91                        	;      MPR3 = bank $69 : SCD RAM
   92                        	;      MPR4 = bank $6A : SCD RAM
   93                        	;      MPR5 = bank $6B : SCD RAM
   94                        	;      MPR6 = bank $6C : SCD RAM
   95                        	;      MPR7 = bank $68 : SCD RAM or System Card's bank $00
   96                        	;
   97                        	; ***************************************************************************
   98                        	; ***************************************************************************
   99                        	
  100                        	
  101                        	
  102               E000     			.code
  103               0000     			.bank	0
  104                        	
  105               0000     		.if	SUPPORT_TED2			; Do we want to use a TED2?
  177                        		.endif	SUPPORT_TED2
  178                        	
  179                        	
  180                        	
  181               0001     		.if	USING_MPR7
  182                        	
  183                        	; ***************************************************************************
  184                        	; ***************************************************************************
  185                        	;
  186                        	; RESET VECTORS (when running in MPR7, either as a HuCARD, or a CD overlay)
  187                        	;
  188                        	
  189                        			; Hardware reset and interrupt vectors.
  190                        	
  191               FFF4     			.org	$FFF4
  192                        	
  193    00:FFF4  10         	core_version:	db	CORE_VERSION		; CORE(not TM) Version.
  194    00:FFF5  80         			db	$80			; System Card compatibility.
  195                        	
  196    00:FFF6  5D E0      			dw	core_irq2		; IRQ2	(from CD/ADPCM)
  197    00:FFF8  64 E0      			dw	core_irq1		; IRQ1	(from VDC)
  198    00:FFFA  58 E1      			dw	core_timer		; TIMER (from CPU)
  199    00:FFFC  5E E1      			dw	core_rti		; NMI	(unused)
  200               0000     		.if	CDROM
  202                        		.else
  203    00:FFFE  21 E0      			dw	core_hw_reset		; RESET (HuCARD)
  204                        		.endif	CDROM
  205                        	
  206               0001     		.if	USING_NEWPROC			; If the ".proc" trampolines
  207               FFF3     	__trampolineptr =	$FFF3			; are in MPR7, tell PCEAS to
  208                        		.endif					; put them below the vectors.
  209                        	
  210                        		.else	USING_MPR7
  222                        		.endif	USING_MPR7
  223                        	
  224                        	
  225                        	
  226                        	; ***************************************************************************
  227                        	; ***************************************************************************
  228                        	;
  229                        	; !!! THE HuCARD/OVERLAY PROGRAM'S FIRST BANK STARTS HERE !!!
  230                        	;
  231                        	
  232                        			; Switch to MPR2 for the "CORE(not TM)" library init.
  233                        			;
  234                        			; This is also executed by a HuCARD once it has run
  235                        			; its initial hardware-reset code.
  236                        			;
  237                        			; When run, MPR2-MPR6 are always mapped to the 1st 5 banks of
  238                        			; the overlay program, and MPR7 contains the System Card.
  239                        	
  240               4000     			.org	$4000
  241                        	
  242               0000     	CORE_BANK	=	bank(*) - _bank_base	; It isn't always zero! ;-)
  243                        	
  244               0000     			.bank	CORE_BANK, "CORE_BANK"	; Give it a label.
  245                        	
  246               0001     		.if	USING_MPR7
  247               0007     	CORE_PAGE	=	7			; User code runs in MPR7.
  248                        		.else
  250                        		.endif	USING_MPR7
  251                        	
  252    00:4000  4C 06 40   	core_boot:	jmp	* + 6			; Allow someone to patch this.
  253                        	
  254                        			; Add an ident string so isoLINK can autodetect configuration.
  255                        			;
  256                        			; This allows isoLINK to decide whether to use the IPL-SCD boot
  257                        			; sector hack, and whether to include a SuperGRAFX signature in
  258                        			; the boot sector, without the user having to manually use some
  259                        			; command line parameters, although they are free to do that if
  260                        			; they wish.
  261                        	
  262               0001     		.if	SUPPORT_SGX
  263               0000     		.if	BUILDING_STAGE1
  265                        		.else
  266    00:4003  53 47 58   			db	"SGX"			; SGX SuperCD or SGX HuCARD.
  267                        		.endif	BUILDING_STAGE1
  268                        		.else
  282                        		.endif	SUPPORT_SGX
  283                        	
  284               0000     		.if	CDROM
  331                        		.else	CDROM
  332                        	
  333                        			; Set up HuCARD RAM in a compatible way to the System Card.
  334                        			;
  335                        			; Note that the entire RAM is cleared by "core_hw_reset".
  336                        	
  337    00:4006  A9 1F      			lda	#%11111			; Enable joypad soft-reset.
  338    00:4008  8D 27 22   			sta	joyena
  339                        	
  340                        		.endif	CDROM
  341                        	
  342                        			; Now that RAM is initialized ...
  343                        	
  344    00:400B  43 04      			tma2				; Remember overlay's 1st bank
  345    00:400D  85 05      			sta	<core_1stbank		; $00, $02, $68 or $80!
  346               0001     		.if	USING_MPR7
  347    00:400F  53 80      			tam7				; "CORE(not TM)" takes MPR7!
  348                        		.endif
  349                        	
  350    00:4011  A2 FF      			ldx	#$FF			; Initialize stack pointer.
  351    00:4013  9A         			txs
  352                        	
  353    00:4014  20 5F E1   			jsr	core_clr_hooks		; Reset default hooks.
  354                        	
  355                        	;		stz	TIMER_CR		; Stop HuC6280 timer.
  356                        	;		stz	IRQ_ACK			; Clr HuC6280 timer interrupt.
  357                        	;		stz	IRQ_MSK			; Clr HuC6280 interrupt mask.
  358                        	
  359    00:4017  AD 00 02   			lda	VDC_SR			; Purge any overdue VBL.
  360    00:401A  9C 41 22   			stz	irq_cnt			; Make it easy to check.
  361    00:401D  58         			cli				; Restore interrupts.
  362                        	
  363    00:401E  4C E5 FF   			jmp	core_main		; Start the game's code.
  364                        	
  365                        	
  366                        	
  367               0001     		.if	!CDROM
  368                        	
  369                        	; ***************************************************************************
  370                        	; ***************************************************************************
  371                        	;
  372                        	; HuCARD Kernel Code
  373                        	;
  374                        	; core_ram1st - Start of code to relocate to MPR1.
  375                        	; core_ramend - End of code to relocate to MPR1.
  376                        	;
  377                        	
  378                        			; In a HuCARD, BSS variables start as low as possible.
  379                        	
  380               2200     			.bss
  381               22D0     			.org	core_ram1st
  382               22D0     	core_ramend	=	*
  383               4021     			.code
  384                        	
  385                        			; Normal HuCARD hardware-reset code, executed in MPR7.
  386                        			;
  387                        			; This does the basic PCE startup that every HuCARD (including
  388                        			; a System Card) needs to do, and then it remaps memory to be
  389                        			; compatible with the "CORE(not TM)" CD overlay program start.
  390                        	
  391               E021     			.page	7			; This will run in MPR7.
  392                        	
  393    00:E021  78         	core_hw_reset:	sei				; Disable interrupts.
  394    00:E022  D4         			csh				; Set high-speed mode.
  395    00:E023  D8         			cld
  396                        	
  397    00:E024  A2 FF      			ldx	#$FF			; Initialize stack pointer.
  398    00:E026  9A         			txs
  399    00:E027  8A         			txa				; MPR0 = $FF : PCE hardware
  400    00:E028  53 01      			tam0				; MPR1 = $F8 : PCE RAM
  401    00:E02A  A9 F8      			lda	#$F8
  402    00:E02C  53 02      			tam1
  403                        	
  404    00:E02E  9C 01 0C   			stz	TIMER_CR		; HW reset already does these,
  405    00:E031  9C 03 14   			stz	IRQ_ACK			; but this may be a reset from
  406    00:E034  9C 02 14   			stz	IRQ_MSK			; software (i.e. joypad).
  407                        	
  408    00:E037  F3 53 E0 00			tai	const_0000, $2000, 8192 ; Clear RAM.
         00:E03B  20 00 20    
  409                        	
  410    00:E03E  43 80      			tma7				; Not always bank 0!
  411                        	
  412    00:E040  53 04      			tam2				; Set CD-ROM overlay memory map,
  413    00:E042  1A         			inc	a			; 1st 5 banks in MPR2-MPR6.
  414    00:E043  53 08      			tam3
  415    00:E045  1A         			inc	a
  416    00:E046  53 10      			tam4
  417    00:E048  1A         			inc	a
  418    00:E049  53 20      			tam5
  419    00:E04B  1A         			inc	a
  420    00:E04C  53 40      			tam6
  421                        	
  422    00:E04E  4C 00 40   			jmp	core_boot		; Continue execution in MPR2.
  423                        	
  424                        			; In a HuCARD, the kernel code is permanently in MPR7.
  425                        	
                             #[5]   "..\..\..\include\hucc\core-kernel.asm"
  426                        			include "core-kernel.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; core-kernel.asm
    5                        	;
    6                        	; The "CORE(not TM)" PC Engine library kernel code that runs after startup.
    7                        	;
    8                        	; Copyright John Brandwood 2021-2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; This code is permanently located in either MPR7 (HuCARD), or MPR1 (CD-ROM),
   18                        	; and it provides a consistant method of interrupt-handling on both systems
   19                        	; that is designed to be compatible with the System Card.
   20                        	;
   21                        	; The library uses the "irq1_hook" for its own VDC interrupt handler, and PCE
   22                        	; developers are expected to use "vsync_hook" and "hsync_hook" for their VDC
   23                        	; interrupt functions.  Plenty of memory is available in the 1st bank for the
   24                        	; developer to put those functions.
   25                        	;
   26                        	; The reason for using "irq1_hook", is so that the library can work properly
   27                        	; if either the current overlay program, or the System Card, are mapped into
   28                        	; MPR7 whenever an interrupt occurs.
   29                        	;
   30                        	; The VDC interupt handler itself is changed from the System Card's handler,
   31                        	; and it is designed to provide faster response to vsync_hook, and to enable
   32                        	; interrupts during the slow(ish) joypad and sound driver code, so that both
   33                        	; raster and timer interrupts are not delayed.
   34                        	;
   35                        	; Developers are free to enable interrupts during their own vsync_hook code,
   36                        	; if they wish to do so.
   37                        	;
   38                        	; On CD-ROM systems, this library kernel also provides a function to load and
   39                        	; run a new overlay program, without relying upon any of the code/data within
   40                        	; the current overlay program's memory (unlike HuC v3).
   41                        	;
   42                        	; ***************************************************************************
   43                        	; ***************************************************************************
   44                        	
   45                        	
   46                        	
   47                        	; ***************************************************************************
   48                        	; ***************************************************************************
   49                        	;
   50                        	; core_kernel - Start of kernel code.
   51                        	;
   52                        	
   53               E051     	core_kernel	=	*
   54                        	
   55                        	
   56                        	
   57                        	; ***************************************************************************
   58                        	; ***************************************************************************
   59                        	;
   60                        	; Useful constants, needed by joypad library code, and used by many others.
   61                        	;
   62                        	; The kernel starts with a non-zero byte so that core-startup.asm can check
   63                        	; whether it has already been loaded into RAM.
   64                        	;
   65                        	
   66    00:E051  FF FF      	const_FFFF:	dw	$FFFF			; Useful constant for TAI.
   67    00:E053  00 00      	const_0000:	dw	$0000			; Useful constant for TAI.
   68                        	
   69    00:E055  01 02 04 08	bit_mask:	db	$01,$02,$04,$08,$10,$20,$40,$80
         00:E059  10 20 40 80 
   70                        	
   71                        	
   72                        	
   73                        	; ***************************************************************************
   74                        	; ***************************************************************************
   75                        	;
   76                        	; core_irq2  - Minimal interrupt handler compatible with System Card.
   77                        	; core_irq1  - Minimal interrupt handler compatible with System Card.
   78                        	; core_timer - Minimal interrupt handler compatible with System Card.
   79                        	; core_rti   - Minimal interrupt handler compatible with System Card.
   80                        	;
   81                        	; Note that it takes 8 cycles to respond to an IRQ.
   82                        	;
   83                        	; These routines are copied to a location in RAM that does not vary when
   84                        	; a different overlay program is loaded.
   85                        	;
   86                        	; All overlay programs are set up to vector interrupts to these routines,
   87                        	; which is designed to avoid interrupt-related crashes when loading a new
   88                        	; overlay on top of an old overlay in memory.
   89                        	;
   90                        	; All of the game's actual interrupt handling itself is done in the "hook"
   91                        	; functions so that everything works the same if the System Card is banked
   92                        	; into MPR7 when an interrupt occurs.
   93                        	;
   94                        	; ***************************************************************************
   95                        	; ***************************************************************************
   96                        	;
   97                        	; Bit settings for irq_vec  ...
   98                        	;
   99                        	;   7 : 1 to skip BIOS hsync processsing
  100                        	;   6 : 1 to call [hsync_hook]
  101                        	;   5 : 1 to skip BIOS vsync processsing
  102                        	;   4 : 1 to call [vsync_hook]
  103                        	;
  104                        	;   3 : 1 to jump [nmi_hook]
  105                        	;   2 : 1 to jump [timer_hook]
  106                        	;   1 : 1 to jump [irq1_hook]
  107                        	;   0 : 1 to jump [irq2_hook]
  108                        	;
  109                        	; ***************************************************************************
  110                        	; ***************************************************************************
  111                        	
  112    00:E05D  8F F5 01   	core_irq2:	bbs0	<irq_vec, .hook		; 8 cycles if using hook.
  113                        	
  114               0000     		.if	CDROM
  138                        		.else
  139                        			; Does this HuCARD support the IFU's ADPCM hardware?
  140                        	
  141               0000     		.if	SUPPORT_ADPCM
  153                        		.endif	SUPPORT_ADPCM
  154                        	
  155    00:E060  40         			rti				; No IRQ2 hardware on HuCARD.
  156                        	
  157    00:E061  6C 00 22   	.hook:		jmp	[irq2_hook]		; 7 cycles.
  158                        		.endif	CDROM
  159                        	
  160                        	
  161                        	
  162                        	; ***************************************************************************
  163                        	; ***************************************************************************
  164                        	;
  165                        	; core_irq1 - Minimal interrupt handler compatible with System Card.
  166                        	;
  167                        	; irq1_handler - Basic "CORE(not TM)" IRQ1 handler to use as the "irq1_hook".
  168                        	;
  169                        	; Doing the IRQ1 handler processing in this hook means that things operate
  170                        	; the same whether the System Card or an Overlay is paged into MPR7.
  171                        	
  172               0000     		.ifndef	HUCC
  181                        		.else
  182                        			; Faster IRQ servicing for HuCC and code that would like to
  183                        			; avoid the 8 cycles used by the "bbs1" instruction that is
  184                        			; taken when the System Card is mapped into MPR7.
  185                        	
  186    00:E064             	core_irq1:	;;;				; 8 (cycles for the INT)
  187               0001     		.if	CDROM || !defined(NO_CORE_IRQ1_HOOK)
  188    00:E064  6C 02 22   			jmp	[irq1_hook]		; 7 cycles.
  189                        	
  190                        		.endif
  191                        		.endif
  192                        	
  193    00:E067  48         	irq1_handler:	pha				; 3 Save all registers.
  194    00:E068  DA         			phx				; 3
  195    00:E069  5A         			phy				; 3
  196                        	
  197               0000     		.ifndef	USING_RCR_MACROS		;   This slows things down
  206                        		.endif	USING_RCR_MACROS
  207                        	
  208    00:E06A  AD 00 02   			lda	VDC_SR			; 6 Acknowledge the VDC's IRQ.
  209    00:E06D  85 F6      			sta	<vdc_sr			; 4 Remember what caused it.
  210                        	
  211               0001     		.if	SUPPORT_SGX
  212    00:E06F  AE 10 02   			ldx	SGX_SR			; 6 Read SGX_SR after VDC_SR in
  213    00:E072  86 06      			stx	<sgx_sr			; 4 case this is not an SGX!
  214                        		.endif
  215                        	
  216                        			; Handle the VDC's RCR interrupt.
  217                        	
  218    00:E074  29 04      	!:		and	#$04			; 2 Is this an HSYNC interrupt?
  219    00:E076  F0 44      			beq	!+			; 2
  220                        	
  221               0001     		.ifdef	USING_RCR_MACROS
  222                        			VDC_RCR_MACRO
                             	
         00:E078  03 06      			st0	#VDC_RCR		; 5
                             	
         00:E07A  AE 1F 27   			ldx	vdc_next_region		; 5 X and Y can be greater than
         00:E07D  BC 20 27   			ldy	vdc_regionA_nxt, x	; 5 HUCC_PCE_SPLITS if regionB!
         00:E080  18         			clc				; 2
         00:E081  D0 05      			bne	!set_next_rcr+		; 4 Stop RCR if next line is 0.
                             	
         00:E083  2D 53 E0   			and	const_0000		; 5 A=$00 with the same #cycles
         00:E086  80 05      			bra	!clr_next_rcr+		; 4 as if the branch were taken.
                             	
         00:E088  B9 CF 26   	!set_next_rcr:	lda	vdc_regionA_rcr, y	; 5 Set next RCR 1 line before
         00:E08B  69 3F      			adc	#64-1			; 2 the region begins, or 0 to
         00:E08D  8D 02 02   	!clr_next_rcr:	sta	VDC_DL			; 6 disable.
         00:E090  62         			cla				; 2
         00:E091  2A         			rol	a			; 2
         00:E092  8D 03 02   			sta	VDC_DH			; 6
                             	
         00:E095  03 08      			st0	#VDC_BYR		; 5 Do BYR first to mitigate the
         00:E097  BD FF 26   			lda	vdc_regionA_yl, x	; 5 glitch if the IRQ is delayed.
         00:E09A  8D 02 02   			sta	VDC_DL			; 6 = 105 cycles from RCR on SGX
         00:E09D  BD 0F 27   			lda	vdc_regionA_yh, x	; 5
         00:E0A0  8D 03 02   			sta	VDC_DH			; 6
                             	
         00:E0A3  03 05      			st0	#VDC_CR			; 5
         00:E0A5  BD BF 26   			lda	vdc_regionA_crl, x	; 5
                             	;		asl	a
         00:E0A8  8D 02 02   			sta	VDC_DL			; 6
                             	
         00:E0AB  03 07      			st0	#VDC_BXR		; 2
         00:E0AD  BD DF 26   			lda	vdc_regionA_xl, x	; 5
         00:E0B0  8D 02 02   			sta	VDC_DL			; 6
         00:E0B3  BD EF 26   			lda	vdc_regionA_xh, x	; 5
         00:E0B6  8D 03 02   			sta	VDC_DH			; 6 = 156 cycles from RCR if DUO
                             	
                             	;		bcc	!+
                             	;		lda	vdc_regionA_yh, x	; 5
                             	;		sta.l	VCE_CTW			; 6
                             	
         00:E0B9  8C 1F 27   			sty	vdc_next_region		; 5
                             	
  223                        		.else
  225                        		.endif
  226                        	
  227               0001     		.if	SUPPORT_SGX
  228                        	
  229                        			; Handle the SGX's RCR interrupt.
  230                        	
  231    00:E0BC  2F 06 50   	!:		bbr2	<sgx_sr, !+		; 6 Is this an HSYNC interrupt?
  232                        	
  233               0001     		.ifdef	USING_RCR_MACROS
  234                        			SGX_RCR_MACRO
                             	
         00:E0BF  A9 06      			lda	#VDC_RCR		; 2
         00:E0C1  8D 10 02   			sta	SGX_AR			; 6
                             	
         00:E0C4  AE A0 27   			ldx	sgx_next_region		; 5 X and Y can be greater than
         00:E0C7  BC A1 27   			ldy	sgx_regionA_nxt, x	; 5 HUCC_SGX_SPLITS if regionB!
         00:E0CA  18         			clc				; 2
         00:E0CB  D0 05      			bne	!set_next_rcr+		; 4 Stop RCR if next line is 0.
                             	
         00:E0CD  2D 53 E0   			and	const_0000		; 5 A=$00 with the same #cycles
         00:E0D0  80 05      			bra	!clr_next_rcr+		; 4 as if the branch were taken.
                             	
         00:E0D2  B9 50 27   	!set_next_rcr:	lda	sgx_regionA_rcr, y	; 5 Set next RCR 1 line before
         00:E0D5  69 3F      			adc	#64-1			; 2 the region begins, or 0 to
         00:E0D7  8D 12 02   	!clr_next_rcr:	sta	SGX_DL			; 6 disable.
         00:E0DA  62         			cla				; 2
         00:E0DB  2A         			rol	a			; 2
         00:E0DC  8D 13 02   			sta	SGX_DH			; 6
                             	
         00:E0DF  A9 08      			lda	#VDC_BYR		; 2 Do BYR first to mitigate the
         00:E0E1  8D 10 02   			sta	SGX_AR			; 6 glitch if the IRQ is delayed.
         00:E0E4  BD 80 27   			lda	sgx_regionA_yl, x	; 5
         00:E0E7  8D 12 02   			sta	SGX_DL			; 6
         00:E0EA  BD 90 27   			lda	sgx_regionA_yh, x	; 5
         00:E0ED  8D 13 02   			sta	SGX_DH			; 6
                             	
         00:E0F0  A9 05      			lda	#VDC_CR			; 2
         00:E0F2  8D 10 02   			sta	SGX_AR			; 6
         00:E0F5  BD 40 27   			lda	sgx_regionA_crl, x	; 5
         00:E0F8  8D 12 02   			sta	SGX_DL			; 6
                             	
         00:E0FB  A9 07      			lda	#VDC_BXR		; 2
         00:E0FD  8D 10 02   			sta	SGX_AR			; 6
         00:E100  BD 60 27   			lda	sgx_regionA_xl, x	; 5
         00:E103  8D 12 02   			sta	SGX_DL			; 6
         00:E106  BD 70 27   			lda	sgx_regionA_xh, x	; 5
         00:E109  8D 13 02   			sta	SGX_DH			; 6 = 293 cycles (282 if no YH)
                             	
         00:E10C  8C A0 27   			sty	sgx_next_region		; 5
                             	
  235                        		.else
  237                        		.endif
  238                        	
  239                        		.endif	SUPPORT_SGX
  240                        	
  241                        			; Handle the VDC's VBL interrupt.
  242                        	
  243    00:E10F  5F F6 32   	!:		bbr5	<vdc_sr, .exit_irq1	; 6 Is this a VBLANK interrupt?
  244                        	
  245               0001     		.ifdef	USING_RCR_MACROS		;   If we didn't do it earlier
  246               0000     		.if	CDROM				;   then we need to do it now.
  253                        		.endif	CDROM
  254                        		.endif	USING_RCR_MACROS
  255                        	
  256               0001     		.if	SUPPORT_SGX
  257    00:E112  A9 05      			lda	#VDC_CR			; Update the SGX's Control
  258    00:E114  8D 10 02   			sta	SGX_AR			; Register first, just in
  259    00:E117  8D 00 02   			sta	VDC_AR			; case this is not an SGX!
  260    00:E11A  A5 03      			lda	<sgx_crl		
  261    00:E11C  8D 12 02   			sta	SGX_DL
  262    00:E11F  A5 F3      			lda	<vdc_crl
  263    00:E121  8D 02 02   			sta	VDC_DL
  264                        	
  265                        	;		lda	<sgx_crh		; Do not mess with the SGX's
  266                        	;		sta	SGX_DH			; auto-increment!!!
  267                        	;		lda	<vdc_crh		; Do not mess with the VDC's
  268                        	;		sta	VDC_DH			; auto-increment!!!
  269                        		.else
  277                        		.endif	SUPPORT_SGX
  278                        	
  279    00:E124  EE 41 22   			inc	irq_cnt			; Mark that a VBLANK occurred.
  280                        	
  281    00:E127  4F F5 02   			bbr4	<irq_vec, .skip_hookv	; Is a driver registered?
  282                        	
  283    00:E12A  44 26      			bsr	.user_vsync		; Call game's VBLANK code.
  284                        	
  285    00:E12C  DF F5 15   	.skip_hookv:	bbs5	<irq_vec, .exit_vbl	; Should we skip "BIOS" stuff?
  286                        	
  287    00:E12F  58         			cli				; Allow HSYNC and TIMER IRQ.
  288                        	
  289    00:E130  20 DB FF   			call	read_joypads		; Update joypad state.
  290                        	
  291               0000     		.if	USING_PSGDRIVER
  305                        		.else
  306    00:E133  AD 07 22   			lda	sound_hook + 1		; Is a driver registered?
  307    00:E136  F0 0C      			beq	.exit_vbl
  308                        	
  309    00:E138  A9 80      			lda	#$80			; Acquire sound mutex to avoid
  310    00:E13A  0C E7 22   			tsb	sound_mutex		; conflict with a delayed VBL.
  311    00:E13D  30 05      			bmi	.exit_vbl
  312                        	
  313    00:E13F  44 14      			bsr	.user_sound		; Call the driver hook.
  314                        	
  315    00:E141  9C E7 22   			stz	sound_mutex		; Release sound mutex.
  316                        		.endif	USING_PSGDRIVER
  317                        	
  318    00:E144             	.exit_vbl:
  319                        	
  320               0001     		.ifdef	USING_RCR_MACROS		; If USING_RCR_MACROS then 
  321               0000     		.if	CDROM				; restore after the VBLANK.
  326                        		.endif	CDROM
  327                        		.endif	USING_RCR_MACROS
  328                        	
  329    00:E144             	.exit_irq1:
  330                        	
  331               0000     		.ifndef	USING_RCR_MACROS		; If !USING_RCR_MACROS then
  338                        		.endif	USING_RCR_MACROS
  339                        	
  340               0001     		.if	SUPPORT_SGX
  341    00:E144  A5 07      			lda	<sgx_reg		; Restore SGX_AR first, just
  342    00:E146  8D 10 02   			sta	SGX_AR			; in case this is not an SGX!
  343                        		.endif
  344                        	
  345    00:E149  A5 F7      			lda	<vdc_reg		; Restore VDC_AR in case we
  346    00:E14B  8D 00 02   			sta	VDC_AR			; changed it.
  347                        	
  348    00:E14E  7A         			ply				; Restore all registers.
  349    00:E14F  FA         			plx
  350    00:E150  68         			pla
  351                        	
  352    00:E151  40         			rti				; Return from interrupt.
  353                        	
  354    00:E152  6C 08 22   	.user_vsync:	jmp	[vsync_hook]		; 7
  355    00:E155  6C 06 22   	.user_sound:	jmp	[sound_hook]		; 7
  356                        	
  357               0000     		.ifndef	USING_RCR_MACROS
  362                        		.endif	USING_RCR_MACROS
  363                        	
  364                        	
  365                        	
  366                        	; ***************************************************************************
  367                        	; ***************************************************************************
  368                        	;
  369                        	; core_timer - Minimal interrupt handler compatible with System Card.
  370                        	;
  371                        	; tirq_handler - Basic "CORE(not TM)" TIRQ handler to use as the "timer_hook".
  372                        	;
  373                        	; Doing the TIRQ handler processing in this hook means that things operate
  374                        	; the same whether the System Card or an Overlay is paged into MPR7.
  375                        	
  376               0000     		.ifndef	HUCC
  385                        		.else
  386                        			; Faster IRQ servicing for HuCC and code that would like to
  387                        			; avoid the 8 cycles used by the "bbs2" instruction that is
  388                        			; taken when the System Card is mapped into MPR7.
  389                        	
  390    00:E158             	core_timer:	;;;				; 8 (cycles for the INT)
  391               0001     		.if	CDROM || !defined(NO_CORE_TIRQ_HOOK)
  392    00:E158  6C 04 22   			jmp	[timer_hook]		; 7 cycles.
  393                        		.endif
  394                        		.endif
  395                        	
  396    00:E15B             	tirq_handler:
  397               0000     		.ifdef	USING_TIRQ_MACRO
  399                        		.else
  400    00:E15B  9C 03 14   			stz	IRQ_ACK			; 5 Clear timer interrupt.
  401                        		.endif
  402                        	
  403    00:E15E  40         	core_rti:	rti
  404                        	
  405                        	
  406                        	
  407                        	; ***************************************************************************
  408                        	; ***************************************************************************
  409                        	;
  410                        	; core_clr_hooks - Reset default "CORE(not TM)" interrupt-handling hooks.
  411                        	;
  412                        	
  413    00:E15F  08         	core_clr_hooks:	php				; Preserve interrupt state.
  414    00:E160  78         			sei				; Disable interrupts.
  415                        	
  416               0000     		.if	USING_PSGDRIVER
  419                        		.else
  420    00:E161  9C 07 22   			stz.h	sound_hook		; Disable sound driver calls.
  421                        		.endif
  422                        	
  423    00:E164  A9 88      			lda	#<core_sw_reset		; Set up the soft-reset hook.
  424    00:E166  8D 84 22   			sta.l	reset_hook
  425    00:E169  A9 E1      			lda	#>core_sw_reset
  426    00:E16B  8D 85 22   			sta.h	reset_hook
  427                        	
  428    00:E16E  A9 67      			lda	#<irq1_handler		; Set up the IRQ1 hook.
  429    00:E170  8D 02 22   			sta.l	irq1_hook
  430    00:E173  A9 E0      			lda	#>irq1_handler
  431    00:E175  8D 03 22   			sta.h	irq1_hook
  432                        	
  433    00:E178  A9 5B      			lda	#<tirq_handler		; Set up the TIRQ hook.
  434    00:E17A  8D 04 22   			sta.l	timer_hook
  435    00:E17D  A9 E1      			lda	#>tirq_handler
  436    00:E17F  8D 05 22   			sta.h	timer_hook
  437                        	
  438    00:E182  A9 06      			lda	#%00000110		; Replace the System Card's
  439    00:E184  85 F5      			sta	<irq_vec		; IRQ1 and TIRQ processing.
  440                        	
  441    00:E186  28         			plp				; Restore interrupt state.
  442    00:E187  60         			rts
  443                        	
  444                        	
  445                        	
  446                        	; ***************************************************************************
  447                        	; ***************************************************************************
  448                        	;
  449                        	; Include the joypad library, with configuration from "core-config.inc".
  450                        	;
  451                        	
                             #[6]   "..\..\..\include\hucc\joypad.asm"
  452                        			include "joypad.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; joypad.asm
    5                        	;
    6                        	; Read 2-button & 6-button joypads & PCE mouse, with or without a MultiTap.
    7                        	;
    8                        	; Copyright John Brandwood 2019-2025.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; Unlike Lemmings, this code does not interfere with a Memory Base 128! ;-)
   18                        	;
   19                        	; ***************************************************************************
   20                        	; ***************************************************************************
   21                        	;
   22                        	; With SUPPORT_MOUSE ..... 2602 cycles to read 5 ports with 5 mice
   23                        	;
   24                        	; With HuC library code .. 2442 cycles to read 5 ports with 5 pads (2-button)
   25                        	; With HuC library code .. 2442 cycles to read 5 ports with 5 pads (6-button)
   26                        	;
   27                        	; With SUPPORT_MOUSE ....  2016 cycles to read 5 ports with 5 pads (2-button)
   28                        	; With SUPPORT_MOUSE ..... 1976 cycles to read 5 ports with 5 pads (6-button)
   29                        	;
   30                        	; With SUPPORT_MOUSE ....  1618 cycles to read 3 ports with 3 mice
   31                        	; With SUPPORT_MOUSE ..... 1462 cycles to read 3 ports with 2 mice
   32                        	; With SUPPORT_MOUSE ..... 1306 cycles to read 3 ports with 1 mouse
   33                        	;
   34                        	; With SUPPORT_6BUTTON ... 1235 cycles to read 5 ports with 5 pads (2-button)
   35                        	; With SUPPORT_6BUTTON ... 1215 cycles to read 5 ports with 5 pads (6-button)
   36                        	;
   37                        	; With SUPPORT_MOUSE ..... 1126 cycles to read 2 ports with 2 mice
   38                        	; With SUPPORT_MOUSE ...... 970 cycles to read 2 ports with 1 mouse
   39                        	;
   40                        	; Only SUPPORT_2BUTTON .... 971 cycles to read 5 ports with 5 pads (2-button)
   41                        	; Only SUPPORT_2BUTTON .... 861 cycles to read 5 ports with 5 pads (6-button)
   42                        	;
   43                        	; With SUPPORT_MOUSE ...... 634 cycles to read 1 port  with 1 mouse
   44                        	;
   45                        	; ***************************************************************************
   46                        	; ***************************************************************************
   47                        	
  142                        	
  143                        	;
  144                        	; Now choose which version of the code to include.
  145                        	;
  146                        	
  147               0000     		.if	SUPPORT_2BUTTON
  278                        		.endif	SUPPORT_2BUTTON
  279                        	
  280                        	
  281                        	
  282               0000     		.if	SUPPORT_MOUSE
  845                        		.else	SUPPORT_MOUSE
  846                        	
  847                        	
  848                        	
  849               0001     		.if	SUPPORT_6BUTTON			; Without mouse!
  850                        	
  851                        	; ***************************************************************************
  852                        	; ***************************************************************************
  853                        	;
  854                        	; read_joypads - full 6-button pad support, but mouse movement is ignored.
  855                        	;
  856                        	; This code distinguishes between a mouse and a 2-button or 6-button joypad,
  857                        	; so that unsupported devices do not have to be unplugged from the MultiTap.
  858                        	;
  859                        	; The code loops two times to get both sets of buttons on a 6-button joypad.
  860                        	;
  861                        	; N.B. Takes approx 1/3 frame to detect mice the first time it is run.
  862                        	;
  863                        	; bit values for joypad 2-button bytes: (MSB = #7; LSB = #0)
  864                        	; ----------------------------------------------------------
  865                        	; bit 0 (ie $01) = I
  866                        	; bit 1 (ie $02) = II
  867                        	; bit 2 (ie $04) = SELECT
  868                        	; bit 3 (ie $08) = RUN
  869                        	; bit 4 (ie $10) = UP
  870                        	; bit 5 (ie $20) = RIGHT
  871                        	; bit 6 (ie $40) = DOWN
  872                        	; bit 7 (ie $80) = LEFT
  873                        	;
  874                        	; bit values for joypad 6-button bytes: (MSB = #7; LSB = #0)
  875                        	; ----------------------------------------------------------
  876                        	; bit 0 (ie $01) = III
  877                        	; bit 1 (ie $02) = IV
  878                        	; bit 2 (ie $04) = V
  879                        	; bit 3 (ie $08) = VI
  880                        	; bit 4 (ie $10) = zero
  881                        	; bit 5 (ie $20) = zero
  882                        	; bit 6 (ie $40) = zero
  883                        	; bit 7 (ie $80) = zero, but set to one if 6-button pad detected.
  884                        	;
  885                        	
  886               E188     			.code
  887                        	
  888               0001     		.if	(* >= $4000)			; Make this a ".proc" if it
  889    02:DEF1             	read_joypads	.proc                           ; not running in RAM.
  890                        		.else
  892                        		.endif
  893                        	
  894    02:DEF1  A9 80      			lda	#$80			; Acquire port mutex to avoid
  895    02:DEF3  0C D0 22   			tsb	port_mutex		; conflict with a delayed VBL
  896    02:DEF6  30 75      			bmi	.exit			; or access to an MB128.
  897                        	
  898    02:DEF8  73 28 22 32			tii	joynow,joyold,MAX_PADS	; Save the previous values.
         02:DEFC  22 05 00    
  899    02:DEFF  73 D3 22 D8			tii	joy6now,joy6old,MAX_PADS
         02:DF03  22 05 00    
  900                        	
  901                        			; Reset the 6-btn bits, the user might change the joypad mode!
  902                        	
  903    02:DF06  F3 53 E0 D3			tai	const_0000, joy6now, MAX_PADS
         02:DF0A  22 05 00    
  904                        	
  905                        			; Detect attached mice the first time this routine is called.
  906                        	
  907    02:DF0D  AD D2 22   			lda	mouse_flg		; Has mouse detection happened?
  908    02:DF10  30 28      			bmi	.calc_pressed
  909                        	
  910    02:DF12  A9 05      			lda	#MAX_PADS		; Reset number of pads to read.
  911    02:DF14  8D D1 22   			sta	num_ports
  912                        	
  913    02:DF17  A9 1F      			lda	#%00011111		; Try reading everything as a
  914    02:DF19  8D D2 22   			sta	mouse_flg		; mouse.
  915                        	
  916    02:DF1C  A0 17      			ldy	#23			; Initialize repeat count.
  917    02:DF1E  A9 80      			lda	#$80			; Initialize mouse detection.
  918    02:DF20  5A         	.detect_loop:	phy
  919    02:DF21  48         			pha
  920    02:DF22  44 53      			bsr	.read_devices		; Read all devices as if mice.
  921    02:DF24  68         			pla
  922    02:DF25  82         			clx
  923    02:DF26  BC E2 22   	.detect_port:	ldy	mouse_x, x		; A movement of zero means
  924    02:DF29  D0 03      			bne	.detect_next		; this port is a mouse.
  925    02:DF2B  1D 55 E0   			ora	bit_mask, x
  926    02:DF2E  E8         	.detect_next:	inx				; Get the next pad from the
  927    02:DF2F  E0 05      			cpx	#MAX_PADS		; multitap.
  928    02:DF31  D0 F3      			bne	.detect_port
  929    02:DF33  7A         			ply				; Repeat the detection test.
  930    02:DF34  88         			dey
  931    02:DF35  D0 E9      			bne	.detect_loop
  932                        	
  933                        	;	.if	DETECT_PHANTOMS
  934                        	;		cmp	#(1 << MAX_PADS) + 127	; If we find a mouse in every
  935                        	;		bne	.detect_done		; port, then assume mirrored!
  936                        	;		lda	#1			; Report a single mouse in a
  937                        	;		sta	num_ports		; single port.
  938                        	;		lda	#$81
  939                        	;	.endif
  940                        	
  941    02:DF37  8D D2 22   	.detect_done:	sta	mouse_flg		; Report mouse detection.
  942                        	
  943                        			; See what has just been pressed, and check for soft-reset.
  944                        	
  945    02:DF3A  44 3B      	.calc_pressed:	bsr	.read_devices		; Read all devices normally.
  946                        	
  947    02:DF3C  A2 04      			ldx	#MAX_PADS - 1
  948                        	
  949    02:DF3E  BD D3 22   	.pressed_loop:	lda	joy6now, x		; Calc which buttons have just
  950    02:DF41  5D D8 22   			eor	joy6old, x		; been pressed (6-button).
  951    02:DF44  3D D3 22   			and	joy6now, x
  952               0000     		.if	HUC_JOY_EVENTS
  956                        		.else
  957               0000     		.if	ACCUMULATE_JOY
  959                        		.endif
  960    02:DF47  9D DD 22   			sta	joy6trg, x
  961                        		.endif
  962                        	
  963    02:DF4A  BD 28 22   			lda	joynow, x		; Calc which buttons have just
  964    02:DF4D  A8         			tay                             ; been pressed (2-button).
  965    02:DF4E  5D 32 22   			eor	joyold, x
  966    02:DF51  3D 28 22   			and	joynow, x
  967               0000     		.if	HUC_JOY_EVENTS
  971                        		.else
  972               0000     		.if	ACCUMULATE_JOY
  974                        		.endif
  975    02:DF54  9D 2D 22   			sta	joytrg, x
  976                        		.endif
  977                        	
  978    02:DF57  C9 04      			cmp	#$04			; Detect the soft-reset combo,
  979    02:DF59  D0 0C      			bne	.not_reset		; hold RUN then press SELECT.
  980    02:DF5B  C0 0C      			cpy	#$0C
  981    02:DF5D  D0 08      			bne	.not_reset
  982    02:DF5F  BD 55 E0   			lda	bit_mask, x
  983    02:DF62  2C 27 22   			bit	joyena
  984    02:DF65  D0 09      			bne	.soft_reset
  985                        	
  986    02:DF67  CA         	.not_reset:	dex				; Check the next pad from the
  987    02:DF68  10 D4      			bpl	.pressed_loop		; multitap.
  988                        	
  989    02:DF6A  9C D0 22   			stz	port_mutex		; Release port mutex.
  990                        	
  991               0001     		.if	(* >= $4000)			; This is a ".proc" if it is
  992                        	.exit:		leave                           ; not running in RAM.
         02:DF6D  4C EF FF   			jmp	leave_proc
  993                        		.else
  995                        		.endif
  996                        	
  997    02:DF70  78         	.soft_reset:	sei				; Disable interrupts.
  998    02:DF71  9C D0 22   			stz	port_mutex		; Release port mutex.
  999    02:DF74  6C 84 22   			jmp	[reset_hook]		; Jump to the soft-reset hook.
 1000                        	
 1001                        			; Read all of the devices attached to the MultiTap.
 1002                        	
 1003    02:DF77  A2 02      	.read_devices:	ldx	#2			; Repeat this loop 2 times.
 1004                        	
 1005    02:DF79  A9 01      	.read_multitap:	lda	#$01			; CLR lo, SEL hi for d-pad.
 1006    02:DF7B  8D 00 10   			sta	IO_PORT
 1007    02:DF7E  A9 03      			lda	#$03			; CLR hi, SEL hi, reset tap.
 1008    02:DF80  8D 00 10   			sta	IO_PORT
 1009    02:DF83  C2         			cly				; Start at port 1.
 1010                        	
 1011    02:DF84  A9 01      	.read_port:	lda	#$01			; CLR lo, SEL hi for d-pad.
 1012    02:DF86  8D 00 10   			sta	IO_PORT			; Wait 1.25us (9 cycles).
 1013                        	
 1014    02:DF89  B9 55 E0   			lda	bit_mask, y		; Is there a mouse attached?
 1015    02:DF8C  2D D2 22   			and	mouse_flg
 1016    02:DF8F  D0 33      			bne	.read_mouse
 1017                        	
 1018    02:DF91  AD 00 10   	.read_pad:	lda	IO_PORT			; Read direction-pad bits.
 1019    02:DF94  9C 00 10   			stz	IO_PORT			; CLR lo, SEL lo for buttons.
 1020    02:DF97  0A         			asl	a			; Wait 1.25us (9 cycles).
 1021    02:DF98  0A         			asl	a
 1022    02:DF99  0A         			asl	a
 1023    02:DF9A  0A         			asl	a
 1024    02:DF9B  F0 1B      			beq	.read_6button		; 6-btn pad if UDLR all held.
 1025                        	
 1026    02:DF9D  99 28 22   	.read_2button:	sta	joynow, y		; Get buttons of 2-btn pad.
 1027    02:DFA0  AD 00 10   			lda	IO_PORT
 1028    02:DFA3  29 0F      			and	#$0F
 1029    02:DFA5  19 28 22   			ora	joynow, y
 1030    02:DFA8  49 FF      			eor	#$FF
 1031    02:DFAA  99 28 22   			sta	joynow, y
 1032                        	
 1033    02:DFAD  C8         	.next_port:	iny				; Get the next pad from the
 1034    02:DFAE  CC D1 22   			cpy	num_ports		; multitap.
 1035    02:DFB1  90 D1      			bcc	.read_port
 1036                        	
 1037    02:DFB3  CA         			dex				; Do the next complete pass.
 1038    02:DFB4  CA         			dex
 1039    02:DFB5  10 C2      			bpl	.read_multitap		; Have we finished 2 passes?
 1040    02:DFB7  60         			rts				; Now that everything is read.
 1041                        	
 1042    02:DFB8  AD 00 10   	.read_6button:	lda	IO_PORT			; Get buttons of 6-btn pad.
 1043    02:DFBB  29 0F      			and	#$0F
 1044    02:DFBD  49 8F      			eor	#$8F			; Set bit-7 to show that a
 1045    02:DFBF  99 D3 22   			sta	joy6now, y		; 6-button pad is present.
 1046    02:DFC2  80 E9      			bra	.next_port
 1047                        	
 1048    02:DFC4  7C F5 DF   	.read_mouse:	jmp	[.mouse_vectors, x]	; Which mouse info is next?
 1049                        	
 1050                        			; Mouse processing, normally four passes, here just two.
 1051                        	
 1052    02:DFC7  A9 1C      	.mouse_x_hi:	lda	#28			; 189 cycle delay after CLR lo
 1053    02:DFC9  3A         	.wait_loop:	dec	a			; on port to allow the mouse
 1054    02:DFCA  D0 FD      			bne	.wait_loop		; to buffer and reset counters.
 1055                        	
 1056    02:DFCC  AD 00 10   			lda	IO_PORT			; Read direction-pad bits.
 1057    02:DFCF  9C 00 10   			stz	IO_PORT			; CLR lo, SEL lo for buttons.
 1058    02:DFD2  0A         			asl	a			; Wait 1.25us (9 cycles).
 1059    02:DFD3  0A         			asl	a
 1060    02:DFD4  0A         			asl	a
 1061    02:DFD5  0A         			asl	a
 1062    02:DFD6  99 E2 22   			sta	mouse_x, y		; Save port's X-hi nibble.
 1063                        	
 1064    02:DFD9  AD 00 10   			lda	IO_PORT			; Get mouse buttons.
 1065    02:DFDC  29 0F      			and	#$0F
 1066    02:DFDE  49 0F      			eor	#$0F
 1067    02:DFE0  99 28 22   			sta	joynow, y
 1068    02:DFE3  80 C8      			bra	.next_port
 1069                        	
 1070    02:DFE5  AD 00 10   	.mouse_x_lo:	lda	IO_PORT			; Read direction-pad bits.
 1071    02:DFE8  9C 00 10   			stz	IO_PORT			; CLR lo, SEL lo for buttons.
 1072    02:DFEB  29 0F      			and	#$0F			; Wait 1.25us (9 cycles).
 1073    02:DFED  19 E2 22   			ora	mouse_x, y		; Add port's X-hi nibble.
 1074                        	;		eor	#$FF			; Negate so LEFT is -ve.
 1075                        	;		inc	a
 1076    02:DFF0  99 E2 22   			sta	mouse_x, y
 1077    02:DFF3  80 B8      			bra	.next_port
 1078                        	
 1079    02:DFF5  E5 DF      	.mouse_vectors: dw	.mouse_x_lo		; Pass 2
 1080    02:DFF7  C7 DF      			dw	.mouse_x_hi		; Pass 1
 1081                        	
 1082               0001     		.if	(* >= $4000)			; This is a ".proc" if it is
 1083                        			.endp                           ; not running in RAM.
 1084               22D0     			.bss				; Put the variables in RAM.
 1085                        		.endif
 1086                        	
 1087    F8:22D0             	port_mutex:	ds	1			; NZ when controller port busy.
 1088    F8:22D1             	num_ports:	ds	1			; Set to 1 if no multitap.
 1089    F8:22D2             	mouse_flg:	ds	1			; Which ports are mice?
 1090               0000     		.if	HUC_JOY_EVENTS
 1093                        		.endif
 1094    F8:22D3             	joy6now:	ds	MAX_PADS
 1095    F8:22D8             	joy6old:	ds	MAX_PADS
 1096    F8:22DD             	joy6trg:	ds	MAX_PADS
 1097    F8:22E2             	mouse_x:	ds	MAX_PADS
 1098                        	
 1099               E188     			.code
 1100                        	
 1101                        		.endif	SUPPORT_6BUTTON			; Without mouse!
 1102                        	
 1103                        		.endif	SUPPORT_MOUSE
                             #[5]   "..\..\..\include\hucc\core-kernel.asm"
  453                        	
  454                        	
  455                        	
  456               0001     		.if	!CDROM
  457                        	
  458                        	; ***************************************************************************
  459                        	; ***************************************************************************
  460                        	;
  461                        	; core_sw_reset - Default HuCARD handler for a joypad "soft-reset".
  462                        	;
  463                        	
  464    00:E188  78         	core_sw_reset:	sei				; Disable interrupts.
  465                        	
  466    00:E189  6C FE FF   			jmp	[$FFFE]			; Jump to the HuCARD reset.
  467                        	
  468                        	
  469                        	
  470                        		.else	!CDROM
  616                        		.endif	!CDROM
  617                        	
  618                        	
  619                        	
  620                        	; ***************************************************************************
  621                        	; ***************************************************************************
  622                        	
  623               0001     		.if	(core_kernel >= $4000)		; If not running in RAM, then
  624               22E7     			.bss				; put these variables in RAM.
  625                        		.endif
  626                        	
  627    F8:22E7             	sound_mutex:	ds	1			; NZ when controller port busy.
  628                        	
  629               0001     		.if	SUPPORT_SGX
  630    F8:22E8             	sgx_detected:	ds	1			; NZ if SuperGrafx detected.
  631    F8:22E9             	hsync_hook_sgx:	ds	2			; SGX version of hsync_hook.
  632                        		.endif
  633                        	
  634               0000     		.if	SUPPORT_ACD
  636                        		.endif
  637                        	
  638               0001     		.if	(core_kernel >= $4000)
  639               E18C     			.code
  640                        		.endif
                             #[4]   "..\..\..\include\hucc\core-startup.asm"
  427                        	
  428                        	
  429                        	
  430                        		.else	!CDROM
  524                        		.endif	!CDROM
  525                        	
  526                        	
  527                        	
  528                        	; ***************************************************************************
  529                        	; ***************************************************************************
  530                        	;
  531                        	; With the availability of so many different configuration options, we've now
  532                        	; built somewhere between a few hundred bytes, and a couple of KB, of code in
  533                        	; the CORE_BANK of the HuCARD / overlay program.
  534                        	;
  535                        	; This is the end of the "CORE(not TM)" library code!
  536                        	;
  537                        	; Remember that the ".proc" trampolines are located at the end of this bank,
  538                        	; so the amount of free space left depends upon the number of ".proc" calls.
  539                        	;
  540                        	
  541                        			; Switch to CORE_PAGE to run the developer's game code.
  542               E18C     			.page	CORE_PAGE
  543                        	
  544                        	
  545                        	
  546                        	; ***************************************************************************
  547                        	; ***************************************************************************
  548                        	;
  549                        	; The DATA_BANK location needs to be set as early as possible so that library
  550                        	; code is able to put data in there before the total overall size of the code
  551                        	; is known.
  552                        	;
  553                        	; By default, DATA_BANK is the next bank after the CORE_BANK.
  554                        	;
  555                        	; RESERVE_BANKS allows developers to reserve some banks between the CORE_BANK
  556                        	; and the DATA_BANK that they can use however they wish.
  557                        	;
  558                        	; One use for RESERVE_BANKS is to create empty space that PCEAS can use when
  559                        	; it relocates procedures. This provides a way for a developer to group code
  560                        	; together at the start of memory, and leave the maximum number of banks for
  561                        	; loading dynamic data from CD-ROM.
  562                        	;
  563                        	; The KickC environment sets RESERVE_BANKS=1 (or higher) so that there is a
  564                        	; a bank for the permanent C code and static constants.
  565                        	;
  566                        	; RESERVE_BANKS is normally defined in each project's "core-config.inc".
  567                        	;
  568                        	
  569                        			.opt	d+			; DATA labels use fixed MPR.
  570                        	
  571               0001     			.rsset	CORE_BANK + 1
  572                        	
  573               0000     		.ifdef	NEED_HOME_BANK
  580                        		.endif
  581                        	
  582               0001     		.ifdef	NEED_SOUND_BANK			; Defined in hucc-sound.inc
  583               0000     		.if	NEED_SOUND_BANK			; if the driver wants a bank.
  585                        		.endif
  586                        		.endif
  587                        	
  588               0001     		.ifdef	RESERVE_BANKS			; For CORE projects.
  589               0001     	RESERVED_BANK	.rs	RESERVE_BANKS
  590                        		.endif
  591                        	
  592               0001     		.ifdef	HUCC
  593               0001     		.ifdef	HUC_RESERVE_BANKS		; For HuCC projects.
  594               0001     	HUC_USER_BANK	.rs	HUC_RESERVE_BANKS
  595                        		.endif
  596                        	
  597               0001     	CONST_BANK	.rs	2
  598               6000     			.rodata
  599               0001     			.bank	CONST_BANK, ".rodata"
  600                        		.endif	HUCC
  601                        	
  602               0003     	DATA_BANK	.rs	0
  603               6000     			.data
  604               0000     		.if	BUILDING_STAGE1
  606                        		.else
  607               0003     			.bank	DATA_BANK, ".data"
  608                        		.endif
  609               6000     			.org	$6000
  610                        	
  611               E18C     			.code
                             #[3]   "..\..\..\include\hucc\core.inc"
                             #[2]   "..\..\..\include\hucc\hucc.asm"
  120                        		.else
  126                        		.endif
  127                        	
  128                        			; Allocate this as early as possible to ensure bank-aligned
  129                        			; so that there is no wasted space for aligning the table.
  130                        	
  131               0000     		.if	FAST_MULTIPLY
  138                        		.endif
  139                        	
  140                        			;
  141                        	
  144                        	
  145                        			; The hardware stack is used for expressions.
  146                        	
  147               00FF     	__tos		=	$F8:2101, 255
  148                        	
  149               2008     			.zp
  150               2008     			.align	2
  151    F8:2008             	__stack:	ds	HUCC_STACK_SZ
  152                        	
  153    F8:2088             	__ptr:		ds	2
  154    F8:208A             	__fptr:		ds	2
  155    F8:208C             	__fbank:	ds	1
  156    F8:208D             	__sp:		ds	1
  157                        	
  158                        			; REGTEMP 6-byte stack for temporaries used by SDCC.
  159                        			; Keep the size in sync with NUM_TEMP_REGS in sdcc/src/mos6502/gen.h!
  160                        	
  161    F8:208E             	REGTEMP:	ds	6
  162                        	
  163                        			; HuCC's non-recursive consecutive varargs for printf().
  164                        	
  165               2008     	__vararg1	=	__stack + 0
  166               200A     	__vararg2	=	__stack + 2
  167               200C     	__vararg3	=	__stack + 4
  168               200E     	__vararg4	=	__stack + 6
  169                        	
  170                        			; Pointer used by poke() because __ptr could be overwritten.
  171                        	
  172               20EE     	__poke		=	__si
  173                        	
  174                        			; Used for indirect calls because __ptr could be overwritten.
  175                        	
  176               20EE     	__func		=	__si
  177                        	
  178                        			; Data pointer used by SDCC for indirect indexed memory access.
  179                        	
  180               2088     	DPTR		=	__ptr
  181                        	
  182                        			; Values returned from SDCC functions that don't fit into XA.
  183                        			; These are also used as workspace for SDCC library functions,
  184                        			; including HuCC's multiplication and division functions.
  185                        	
  186    F8:2094             	___SDCC_m6502_ret0:	ds	1
  187    F8:2095             	___SDCC_m6502_ret1:	ds	1
  188    F8:2096             	___SDCC_m6502_ret2:	ds	1
  189    F8:2097             	___SDCC_m6502_ret3:	ds	1
  190                        	
  191               0000     		.if	0
  196                        		.endif
  197                        	
  198                        			; Permanent pointers for fast table-of-squares multiplication.
  199                        	
  200               0000     		.if	FAST_MULTIPLY
  205                        		.endif
  206                        	
  207                        			; HuCC keeps a realtime clock, updated in hucc_vbl.
  208                        			;
  209                        			; Defining this here means that it will go before any HuCC
  210                        			; variables in "globals.h", and so it won't get cleared in
  211                        			; a CDROM game when loading different overlays.
  212                        	
  213               22EB     			.bss
  214    F8:22EB             	old_cnt:	ds	1			; irq_cnt of previous vsync().
  215    F8:22EC             	clock_hh:	ds	1			; System Clock, hours	(0-11)
  216    F8:22ED             	clock_mm:	ds	1			; System Clock, minutes (0-59)
  217    F8:22EE             	clock_ss:	ds	1			; System Clock, seconds (0-59)
  218    F8:22EF             	clock_tt:	ds	1			; System Clock, ticks	(0-59)
  219               E18C     			.code
  220                        	
  221                        			; Critical HuCC libraries that the compiler depends upon.
  222                        			;
  223                        			; These include various macros that must be defined before
  224                        			; they are encountered in any compiler-generated code.
  225                        	
                             #[3]   "..\..\..\include\hucc\hucc-codegen.asm"
  226                        			include "hucc-codegen.asm"	; HuCC i-code macros and funcs.
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-codegen.asm
    5                        	;
    6                        	; The HuCC compiler translates C code into these macros, it does not directly
    7                        	; generate HuC6280 instructions.
    8                        	;
    9                        	; Based on the original HuC macros created by David Michel and the other HuC
   10                        	; developers, later modified and improved by Ulrich Hecht.
   11                        	;
   12                        	; Modifications copyright John Brandwood 2024.
   13                        	;
   14                        	; Distributed under the Boost Software License, Version 1.0.
   15                        	; (See accompanying file LICENSE_1_0.txt or copy at
   16                        	;  http://www.boost.org/LICENSE_1_0.txt)
   17                        	;
   18                        	; ***************************************************************************
   19                        	; ***************************************************************************
   20                        	;
   21                        	; NAMING SCHEME FOR HuCC MACROS ...
   22                        	;
   23                        	;   __function.parameters
   24                        	;
   25                        	; {parameters} is a list of alphanumeric specifiers, starting with {size} and
   26                        	; followed by {where}, followed by {index} if an array, then optional {value}
   27                        	; and finally ending with optional {suffix}
   28                        	;
   29                        	; {size}
   30                        	;   w : 16-bit signed int (default "int" in HuCC)
   31                        	;   c : 16-bit unsigned int (a "cardinal" in Pascal terms)
   32                        	;   b :  8-bit signed char
   33                        	;   u :  8-bit unsigned char (default "char" in HuCC)
   34                        	;
   35                        	; {where} or {index}
   36                        	;   r : HuCC primary register, made up of the Y:A cpu registers
   37                        	;   t : top of expression stack
   38                        	;   p : indirect pointer, usually [__ptr]
   39                        	;   f : structure field (member) offset value
   40                        	;   i : immediate value, i.e. a decimal number
   41                        	;   m : memory, i.e. C global, static, and "-fno-recursive" variables
   42                        	;   s : stack, i.e. C function parameters and locals (not "-fno-recursive")
   43                        	;   a : array, i.e. C global, static, "-fno-recursive" arrays <= 256 bytes
   44                        	;   x : array index already in the X register
   45                        	;   y : array index already in the Y register
   46                        	;
   47                        	; {value} OPTIONAL
   48                        	;   i : immediate value, i.e. a decimal number
   49                        	;   z : zero value
   50                        	;
   51                        	; {suffix} OPTIONAL
   52                        	;   q : quick, used for optimized math on only 8-bit values, because all math
   53                        	;       is normally promoted to "int" size in C; and when optimized stores do
   54                        	;       not need to preserve the primary register contents
   55                        	;
   56                        	; ***************************************************************************
   57                        	; ***************************************************************************
   58                        	
   59                        	
   60                        	
 8399                        	
 8400                        	; ***************************************************************************
 8401                        	; ***************************************************************************
 8402                        	; subroutines for logical and arithmetic shifts by a constant amount
 8403                        	; ***************************************************************************
 8404                        	; ***************************************************************************
 8405                        	
 8406                        	; **************
 8407                        	; Y:A = Y:A << const
 8408                        	
 8409    00:E1BE  0A         	aslw15:		asl	a
 8410    00:E1BF  0A         	aslw14:		asl	a
 8411    00:E1C0  0A         	aslw13:		asl	a
 8412    00:E1C1  0A         	aslw12:		asl	a
 8413    00:E1C2  0A         	aslw11:		asl	a
 8414    00:E1C3  0A         	aslw10:		asl	a
 8415    00:E1C4  0A         	aslw9:		asl	a
 8416    00:E1C5  A8         	aslw8:		tay
 8417    00:E1C6  62         			cla
 8418    00:E1C7  60         			rts
 8419                        	
 8420               0001     		.if	1
 8421    00:E1C8  66 00      	aslw5:		ror	<__temp
 8422    00:E1CA  6A         			ror	a
 8423    00:E1CB  66 00      	aslw6:		ror	<__temp
 8424    00:E1CD  6A         			ror	a
 8425    00:E1CE  66 00      	aslw7:		ror	<__temp
 8426    00:E1D0  6A         			ror	a
 8427    00:E1D1  A4 00      			ldy	<__temp
 8428    00:E1D3  60         			rts
 8429                        		.else
 8436                        		.endif
 8437    00:E1D4  0A         	aslw4:		asl	a
 8438    00:E1D5  26 00      			rol	<__temp
 8439    00:E1D7  0A         	aslw3:		asl	a
 8440    00:E1D8  26 00      			rol	<__temp
 8441    00:E1DA  0A         	aslw2:		asl	a
 8442    00:E1DB  26 00      			rol	<__temp
 8443    00:E1DD  0A         	aslw1:		asl	a
 8444    00:E1DE  26 00      			rol	<__temp
 8445    00:E1E0  A4 00      	aslw0:		ldy	<__temp
 8446    00:E1E2  60         			rts
 8447                        	
 8448                        	; **************
 8449                        	; Y:A = Y:A >> const
 8450                        	
 8451    00:E1E3  C9 80      	asrw15:		cmp	#$80
 8452    00:E1E5  6A         			ror	a
 8453    00:E1E6  C9 80      	asrw14:		cmp	#$80
 8454    00:E1E8  6A         			ror	a
 8455    00:E1E9  C9 80      	asrw13:		cmp	#$80
 8456    00:E1EB  6A         			ror	a
 8457    00:E1EC  C9 80      	asrw12:		cmp	#$80
 8458    00:E1EE  6A         			ror	a
 8459    00:E1EF  C9 80      	asrw11:		cmp	#$80
 8460    00:E1F1  6A         			ror	a
 8461    00:E1F2  C9 80      	asrw10:		cmp	#$80
 8462    00:E1F4  6A         			ror	a
 8463    00:E1F5  C9 80      	asrw9:		cmp	#$80
 8464    00:E1F7  6A         			ror	a
 8465    00:E1F8  C9 80      	asrw8:		cmp	#$80
 8466    00:E1FA  C2         			cly
 8467    00:E1FB  90 01      			bcc	!+
 8468    00:E1FD  88         			dey
 8469    00:E1FE  60         	!:		rts
 8470                        	
 8471    00:E1FF  C0 80      	asrw7:		cpy	#$80
 8472    00:E201  66 00      			ror	<__temp
 8473    00:E203  6A         			ror	a
 8474    00:E204  C0 80      	asrw6:		cpy	#$80
 8475    00:E206  66 00      			ror	<__temp
 8476    00:E208  6A         			ror	a
 8477    00:E209  C0 80      	asrw5:		cpy	#$80
 8478    00:E20B  66 00      			ror	<__temp
 8479    00:E20D  6A         			ror	a
 8480    00:E20E  C0 80      	asrw4:		cpy	#$80
 8481    00:E210  66 00      			ror	<__temp
 8482    00:E212  6A         			ror	a
 8483    00:E213  C0 80      	asrw3:		cpy	#$80
 8484    00:E215  66 00      			ror	<__temp
 8485    00:E217  6A         			ror	a
 8486    00:E218  C0 80      	asrw2:		cpy	#$80
 8487    00:E21A  66 00      			ror	<__temp
 8488    00:E21C  6A         			ror	a
 8489    00:E21D  C0 80      	asrw1:		cpy	#$80
 8490    00:E21F  66 00      			ror	<__temp
 8491    00:E221  6A         			ror	a
 8492    00:E222  A4 00      	asrw0:		ldy	<__temp
 8493    00:E224  60         			rts
 8494                        	
 8495                        	; **************
 8496                        	; Y:A = Y:A >> const
 8497                        	
 8498    00:E225  4A         	lsrw15:		lsr	a
 8499    00:E226  4A         	lsrw14:		lsr	a
 8500    00:E227  4A         	lsrw13:		lsr	a
 8501    00:E228  4A         	lsrw12:		lsr	a
 8502    00:E229  4A         	lsrw11:		lsr	a
 8503    00:E22A  4A         	lsrw10:		lsr	a
 8504    00:E22B  4A         	lsrw9:		lsr	a
 8505    00:E22C  C2         	lsrw8:		cly
 8506    00:E22D  60         			rts
 8507                        	
 8508    00:E22E  46 00      	lsrw7:		lsr	<__temp
 8509    00:E230  6A         			ror	a
 8510    00:E231  46 00      	lsrw6:		lsr	<__temp
 8511    00:E233  6A         			ror	a
 8512    00:E234  46 00      	lsrw5:		lsr	<__temp
 8513    00:E236  6A         			ror	a
 8514    00:E237  46 00      	lsrw4:		lsr	<__temp
 8515    00:E239  6A         			ror	a
 8516    00:E23A  46 00      	lsrw3:		lsr	<__temp
 8517    00:E23C  6A         			ror	a
 8518    00:E23D  46 00      	lsrw2:		lsr	<__temp
 8519    00:E23F  6A         			ror	a
 8520    00:E240  46 00      	lsrw1:		lsr	<__temp
 8521    00:E242  6A         			ror	a
 8522    00:E243  A4 00      	lsrw0:		ldy	<__temp
 8523    00:E245  60         			rts
 8524                        	
 8525                        	
 8526                        	
 8527                        	; ***************************************************************************
 8528                        	; ***************************************************************************
 8529                        	; subroutines for logical and arithmetic shifts by a variable amount
 8530                        	; ***************************************************************************
 8531                        	; ***************************************************************************
 8532                        	
 8533                        	; **************
 8534                        	; Y:A = Y:A << X
 8535                        	
 8536    00:E246  84 00      	asl.wx:		sty	<__temp
 8537    00:E248  E0 10      			cpx	#16
 8538    00:E24A  B0 37      			bcs	!zero+
 8539    00:E24C  CA         			dex
 8540    00:E24D  30 06      			bmi	.done
 8541    00:E24F  0A         	.loop:		asl	a
 8542    00:E250  26 00      			rol	<__temp
 8543    00:E252  CA         			dex
 8544    00:E253  10 FA      			bpl	.loop
 8545    00:E255  A4 00      	.done:		ldy	<__temp
 8546    00:E257  60         			rts
 8547                        	
 8548                        	; **************
 8549                        	; Y:A = Y:A >> X
 8550                        	
 8551    00:E258  84 00      	asr.wx:		sty	<__temp
 8552    00:E25A  10 17      			bpl	!positive+
 8553    00:E25C  E0 10      	!negative:	cpx	#16
 8554    00:E25E  B0 0D      			bcs	.sign
 8555    00:E260  CA         			dex
 8556    00:E261  30 07      			bmi	.done
 8557    00:E263  38         	.loop:		sec
 8558    00:E264  66 00      			ror	<__temp
 8559    00:E266  6A         			ror	a
 8560    00:E267  CA         			dex
 8561    00:E268  10 F9      			bpl	.loop
 8562    00:E26A  A4 00      	.done:		ldy	<__temp
 8563    00:E26C  60         			rts
 8564                        	
 8565    00:E26D  A9 FF      	.sign:		lda	#$FF
 8566    00:E26F  A8         			tay
 8567    00:E270  60         			rts
 8568                        	
 8569                        	; **************
 8570                        	; Y:A = Y:A >> X
 8571                        	
 8572    00:E271  84 00      	lsr.wx:		sty	<__temp
 8573    00:E273  E0 10      	!positive:	cpx	#16
 8574    00:E275  B0 0C      			bcs	!zero+
 8575    00:E277  CA         			dex
 8576    00:E278  30 06      			bmi	.done
 8577    00:E27A  46 00      	.loop:		lsr	<__temp
 8578    00:E27C  6A         			ror	a
 8579    00:E27D  CA         			dex
 8580    00:E27E  10 FA      			bpl	.loop
 8581    00:E280  A4 00      	.done:		ldy	<__temp
 8582    00:E282  60         			rts
 8583                        	
 8584    00:E283  62         	!zero:		cla
 8585    00:E284  C2         			cly
 8586    00:E285  60         			rts
 8587                        	
 8588                        	
 8589                        	
 8590                        	; ***************************************************************************
 8591                        	; ***************************************************************************
 8592                        	; POTENTIAL OPTIMIZATIONS, NOT YET ADDED
 8593                        	; ***************************************************************************
 8594                        	; ***************************************************************************
                             #[2]   "..\..\..\include\hucc\hucc.asm"
                             #[3]   "..\..\..\include\hucc\hucc-baselib.asm"
  227                        			include	"hucc-baselib.asm"	; HuCC base library macros.
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-baselib.asm
    5                        	;
    6                        	; Basic library functions provided (mostly) as macros.
    7                        	;
    8                        	; Copyright John Brandwood 2024-2025.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	
   17                        	
   18                        	
   19                        	; ***************************************************************************
   20                        	; ***************************************************************************
   21                        	;
   22                        	; Make certain System Card variables accessible to HuCC.
   23                        	
   24    00:E286             	_irq_cnt	.alias	irq_cnt
   25    00:E286             	_joynow		.alias	joynow
   26    00:E286             	_joytrg		.alias	joytrg
   27    00:E286             	_joy6now	.alias	joy6now
   28    00:E286             	_joy6trg	.alias	joy6trg
   29    00:E286             	_bg_x1		.alias	bg_x1
   30    00:E286             	_bg_y1		.alias	bg_y1
   31    00:E286             	_bg_x2		.alias	bg_x2
   32    00:E286             	_bg_y2		.alias	bg_y2
   33                        	
   34                        	
   35                        	
   36                        	; ***************************************************************************
   37                        	; ***************************************************************************
   38                        	;
   39                        	; void __fastcall dump_screen( void );
   40                        	;
   41                        	; THIS IS AN ILLEGAL INSTRUCTION ONLY IMPLEMENTED BY THE TGEMU EMULATOR!
   42                        	
   43    00:E286  33         	_dump_screen:	db	0x33
   44                        	
   45                        	
   46                        	
   47                        	; ***************************************************************************
   48                        	; ***************************************************************************
   49                        	;
   50                        	; void __fastcall abort( void );
   51                        	;
   52                        	; THIS IS AN ILLEGAL INSTRUCTION ONLY IMPLEMENTED BY THE TGEMU EMULATOR!
   53                        	
   54    00:E287  E2         	_abort:		db	0xE2
   55                        	
   56                        	
   57                        	
   58                        	; ***************************************************************************
   59                        	; ***************************************************************************
   60                        	;
   61                        	; void __fastcall exit( int value<acc> );
   62                        	;
   63                        	; THIS IS AN ILLEGAL INSTRUCTION ONLY IMPLEMENTED BY THE TGEMU EMULATOR!
   64                        	
   65    00:E288  AA         	_exit.1:	tax				; Put the return code into X.
   66    00:E289  63         			db	0x63
   67                        	
   68    00:E28A  80 FE      	.hang:		bra	.hang			; Hang if used in normal code.
   69                        	
   70                        	
   71                        	
   72                        	; ***************************************************************************
   73                        	; ***************************************************************************
   74                        	;
   75                        	; unsigned char __fastcall __macro cd_execoverlay( unsigned char ovl_index<acc> );
   76                        	;
   77                        	; Execute program overlay from disc
   78                        	;
   79                        	; N.B. This does not return, even if there's an error.
   80                        	
   81                        			.macro	_cd_execoverlay.1
   82                        			tax
   83                        			jmp	exec_overlay
   84                        			.endm
   85                        	
   86                        	
   87                        	
   88                        	; ***************************************************************************
   89                        	; ***************************************************************************
   90                        	;
   91                        	; void __fastcall __nop set_far_base( unsigned char data_bank<_bp_bank>, unsigned char *data_addr<_bp> );
   92                        	; void __fastcall set_far_offset( unsigned int offset<_bp>, unsigned char data_bank<_bp_bank>, unsigned char *data_addr<acc> );
   93                        	
   94    00:E28C             	_set_far_offset.3:
   95    00:E28C  18         			clc
   96    00:E28D  65 EC      			adc.l	<_bp
   97    00:E28F  85 EC      			sta.l	<_bp
   98    00:E291  98         			tya
   99    00:E292  29 1F      			and	#$1F
  100    00:E294  65 ED      			adc.h	<_bp
  101    00:E296  A8         			tay
  102    00:E297  29 1F      			and	#$1F
  103    00:E299  09 60      			ora	#$60
  104    00:E29B  85 ED      			sta.h	<_bp
  105    00:E29D  98         			tya
  106    00:E29E  6A         			ror	a
  107    00:E29F  4A         			lsr	a
  108    00:E2A0  4A         			lsr	a
  109    00:E2A1  4A         			lsr	a
  110    00:E2A2  4A         			lsr	a
  111    00:E2A3  18         			clc
  112    00:E2A4  65 02      			adc	<_bp_bank
  113    00:E2A6  85 02      			sta	<_bp_bank
  114    00:E2A8  60         			rts
  115                        	
  116                        	
  117                        	; ***************************************************************************
  118                        	; ***************************************************************************
  119                        	;
  120                        	; void __fastcall __macro reset_mpr2( void );
  121                        	; void __fastcall __macro reset_mpr34( void );
  122                        	;
  123                        	; void * __fastcall __macro set_mpr2( void __far *addr<_bp_bank:_bp> );
  124                        	; void * __fastcall __macro set_mpr34( void __far *addr<_bp_bank:_bp> );
  125                        	;
  126                        	; void * __fastcall __macro far_set_mpr2( void );
  127                        	; void * __fastcall __macro far_set_mpr34( void );
  128                        	
  129                        	_reset_mpr2	.macro
  130                        		.if	SUPPORT_SGX
  131                        			lda	#$F9
  132                        		.else
  133                        			lda	#$87
  134                        		.endif
  135                        			tam2
  136                        			.endm
  137                        	
  138                        	_reset_mpr34	.macro
  139                        			lda	#CONST_BANK + _bank_base
  140                        			tam3
  141                        			inc	a
  142                        			tam4
  143                        			.endm
  144                        	
  145                        	_farset_mpr2.1	.macro
  146                        			lda	<_bp_bank
  147                        			tam2
  148                        			lda.l	<_bp
  149                        			ldy.h	<_bp
  150                        			.endm
  151                        	
  152                        	_farset_mpr34.1	.macro
  153                        			lda	<_bp_bank
  154                        			tam3
  155                        			inc	a
  156                        			tam4
  157                        			lda.l	<_bp
  158                        			ldy.h	<_bp
  159                        			.endm
  160                        	
  161                        	_far_set_mpr2	.macro
  162                        			lda	<_bp_bank
  163                        			tam2
  164                        			lda.l	<_bp
  165                        			ldy.h	<_bp
  166                        			.endm
  167                        	
  168                        	_far_set_mpr34	.macro
  169                        			lda	<_bp_bank
  170                        			tam3
  171                        			inc	a
  172                        			tam4
  173                        			lda.l	<_bp
  174                        			ldy.h	<_bp
  175                        			.endm
  176                        	
  177                        	
  178                        	
  179                        	; ***************************************************************************
  180                        	; ***************************************************************************
  181                        	;
  182                        	; unsigned char __fastcall __macro ac_exists( void );
  183                        	
  184                        	_ac_exists	.macro
  185                        			cla
  186                        			ldy	ACD_FLAG
  187                        			cpy	#ACD_ID
  188                        			bne	!+
  189                        			inc	a
  190                        	!:		cly
  191                        			.endm
  192                        	
  193                        	
  194                        	
  195                        	; ***************************************************************************
  196                        	; ***************************************************************************
  197                        	;
  198                        	; unsigned char __fastcall __macro _sgx_detect( void );
  199                        	
  200                        	_sgx_detect	.macro
  201                        			lda	sgx_detected
  202                        			cly
  203                        			.endm
  204                        	
  205                        	
  206                        	
  207                        	; ***************************************************************************
  208                        	; ***************************************************************************
  209                        	;
  210                        	; unsigned int __fastcall __macro peek( unsigned int addr<__ptr> );
  211                        	
  212                        	_peek.1		.macro
  213                        			lda	[__ptr]
  214                        			cly
  215                        			.endm
  216                        	
  217                        	
  218                        	
  219                        	; ***************************************************************************
  220                        	; ***************************************************************************
  221                        	;
  222                        	; unsigned int __fastcall __macro peekw( unsigned int addr<__ptr> );
  223                        	
  224                        	_peekw.1	.macro
  225                        			lda	[__ptr]
  226                        			pha
  227                        			ldy	#1
  228                        			lda	[__ptr], y
  229                        			tay
  230                        			pla
  231                        			.endm
  232                        	
  233                        	
  234                        	
  235                        	; ***************************************************************************
  236                        	; ***************************************************************************
  237                        	;
  238                        	; void __fastcall __macro poke( unsigned int addr<__poke>, unsigned char with<acc> );
  239                        	;
  240                        	; N.B. Because the <acc> value can be a complex C calculation, it isn't safe
  241                        	; to use __ptr as the destination, which can be overwritten in C macros.
  242                        	
  243                        	_poke.2		.macro
  244                        			sta	[__poke]
  245                        			.endm
  246                        	
  247                        	
  248                        	
  249                        	; ***************************************************************************
  250                        	; ***************************************************************************
  251                        	;
  252                        	; void __fastcall __macro pokew( unsigned int addr<__poke>, unsigned int with<acc> );
  253                        	;
  254                        	; N.B. Because the <acc> value can be a complex C calculation, it isn't safe
  255                        	; to use __ptr as the destination, which can be overwritten in C macros.
  256                        	
  257                        	_pokew.2	.macro
  258                        			sta	[__poke]
  259                        			tya
  260                        			ldy	#1
  261                        			sta	[__poke], y
  262                        			.endm
  263                        	
  264                        	
  265                        	
  266                        	; ***************************************************************************
  267                        	; ***************************************************************************
  268                        	;
  269                        	; unsigned char __fastcall __macro clock_hh( void );
  270                        	
  271                        	_clock_hh	.macro
  272                        			lda	clock_hh
  273                        			cly
  274                        			.endm
  275                        	
  276                        	
  277                        	
  278                        	; ***************************************************************************
  279                        	; ***************************************************************************
  280                        	;
  281                        	; unsigned char __fastcall __macro clock_mm( void );
  282                        	
  283                        	_clock_mm	.macro
  284                        			lda	clock_mm
  285                        			cly
  286                        			.endm
  287                        	
  288                        	
  289                        	
  290                        	; ***************************************************************************
  291                        	; ***************************************************************************
  292                        	;
  293                        	; unsigned char __fastcall __macro clock_ss( void );
  294                        	
  295                        	_clock_ss	.macro
  296                        			lda	clock_ss
  297                        			cly
  298                        			.endm
  299                        	
  300                        	
  301                        	
  302                        	; ***************************************************************************
  303                        	; ***************************************************************************
  304                        	;
  305                        	; unsigned char __fastcall __macro clock_tt( void );
  306                        	
  307                        	_clock_tt	.macro
  308                        			lda	clock_tt
  309                        			cly
  310                        			.endm
  311                        	
  312                        	
  313                        	
  314                        	; ***************************************************************************
  315                        	; ***************************************************************************
  316                        	;
  317                        	; void __fastcall __macro clock_reset( void );
  318                        	
  319                        	_clock_reset	.macro
  320                        			stz	clock_hh
  321                        			stz	clock_mm
  322                        			stz	clock_ss
  323                        			stz	clock_tt
  324                        			.endm
  325                        	
  326                        	
  327                        	
  328                        	; ***************************************************************************
  329                        	; ***************************************************************************
  330                        	;
  331                        	; unsigned int __fastcall __macro joy( unsigned char which<acc> );
  332                        	
  333                        	_joy.1		.macro
  334                        			tax
  335                        			lda	joynow, x
  336                        		.if	SUPPORT_6BUTTON
  337                        			ldy	joy6now, x
  338                        		.else
  339                        			cly
  340                        		.endif
  341                        			.endm
  342                        	
  343                        	
  344                        	
  345                        	; ***************************************************************************
  346                        	; ***************************************************************************
  347                        	;
  348                        	; unsigned int __fastcall __macro joytrg( unsigned char which<acc> );
  349                        	
  350                        	_joytrg.1	.macro
  351                        			tax
  352                        			lda	joytrg, x
  353                        		.if	SUPPORT_6BUTTON
  354                        			ldy	joy6trg, x
  355                        		.else
  356                        			cly
  357                        		.endif
  358                        			.endm
  359                        	
  360                        	
  361                        	
  362                        	; ***************************************************************************
  363                        	; ***************************************************************************
  364                        	;
  365                        	; unsigned int __fastcall __macro joybuf( unsigned char which<acc> );
  366                        	
  367                        	_joybuf.1	.macro
  368                        		.if	HUC_JOY_EVENTS
  369                        			tax
  370                        			lda	joybuf, x
  371                        		.if	SUPPORT_6BUTTON
  372                        			ldy	joy6buf, x
  373                        		.else
  374                        			cly
  375                        		.endif
  376                        		.else
  377                        			.fail	You must enable HUC_JOY_EVENTS in your hucc-config.inc!
  378                        		.endif
  379                        			.endm
  380                        	
  381                        	
  382                        	
  383                        	; ***************************************************************************
  384                        	; ***************************************************************************
  385                        	;
  386                        	; unsigned int __fastcall __macro get_joy_events( unsigned char which<acc> );
  387                        	;
  388                        	; N.B. This is just a version of joybuf() that clears the accumulated events.
  389                        	
  390                        			.macro	_get_joy_events.1
  391                        		.if	HUC_JOY_EVENTS
  392                        			tax
  393                        			lda	joybuf, x
  394                        			stz	joybuf, x
  395                        		.if	SUPPORT_6BUTTON
  396                        			ldy	joy6buf, x
  397                        			stz	joy6buf, x
  398                        		.else
  399                        			cly
  400                        		.endif
  401                        		.else
  402                        		.if	ACCUMULATE_JOY
  403                        			tax
  404                        			lda	joytrg, x
  405                        			stz	joytrg, x
  406                        		.if	SUPPORT_6BUTTON
  407                        			ldy	joy6trg, x
  408                        			stz	joy6trg, x
  409                        		.else
  410                        			cly
  411                        		.endif
  412                        		.else
  413                        			.fail	You must enable HUC_JOY_EVENTS or ACCUMULATE_JOY in your hucc-config.inc!
  414                        		.endif
  415                        		.endif
  416                        			.endm
  417                        	
  418                        	
  419                        	
  420                        	; ***************************************************************************
  421                        	; ***************************************************************************
  422                        	;
  423                        	; void __fastcall __macro clear_joy_events( unsigned char mask<acc> );
  424                        	
  425                        			.macro	_clear_joy_events.1
  426                        			php
  427                        			sei
  428                        			and	#(1 << MAX_PADS) - 1
  429                        			ldx	#$FF
  430                        	.loop:		inx
  431                        			lsr	a
  432                        			bcc	.next
  433                        		.if	HUC_JOY_EVENTS
  434                        			stz	joybuf, x
  435                        		.if	SUPPORT_6BUTTON
  436                        			stz	joy6buf, x
  437                        		.endif
  438                        		.else
  439                        		.if	ACCUMULATE_JOY
  440                        			stz	joytrg, x
  441                        		.if	SUPPORT_6BUTTON
  442                        			stz	joy6trg, x
  443                        		.endif
  444                        		.else
  445                        			.fail	You must enable HUC_JOY_EVENTS or ACCUMULATE_JOY in your hucc-config.inc!
  446                        		.endif
  447                        		.endif
  448                        	.next:		bne	.loop
  449                        			plp
  450                        			.endm
  451                        	
  452                        	
  453                        	
  454                        	; ***************************************************************************
  455                        	; ***************************************************************************
  456                        	;
  457                        	; void __fastcall srand( unsigned char seed<acc> );
  458                        	
  459               0001     		.ifndef	HUCC_NO_DEFAULT_RANDOM
  460                        	_srand.1	.macro
  461                        			tay
  462                        			jsr	init_random
  463                        			.endm
  464                        		.endif
  465                        	
  466                        	
  467                        	
  468                        	; ***************************************************************************
  469                        	; ***************************************************************************
  470                        	;
  471                        	; unsigned int __fastcall rand( void );
  472                        	; unsigned char __fastcall rand8( void );
  473                        	
  474               0001     		.ifndef	HUCC_NO_DEFAULT_RANDOM
  475    00:E2A9  20 C3 E5   	_rand:		jsr	get_random		; Random in A, preserve Y.
  476    00:E2AC  A8         			tay
  477    00:E2AD  4C C3 E5   			jmp	get_random		; Random in A, preserve Y.
  478                        		.endif
  479                        	
  480                        	
  481                        	
  482                        	; ***************************************************************************
  483                        	; ***************************************************************************
  484                        	;
  485                        	; unsigned char __fastcall random8( unsigned char limit<acc> );
  486                        	;
  487                        	; IN :	A = range (0..255)
  488                        	; OUT : A = random number interval 0 <= x < A
  489                        	
  490               0001     		.ifndef	HUCC_NO_DEFAULT_RANDOM
  491                        	
  492    00:E2B0  A8         	_random8.1:	tay				; Preserve the limit.
  493    00:E2B1  20 C3 E5   			jsr	get_random		; Random in A, preserve Y.
  494                        	
  495    00:E2B4  20 F0 E4   			jsr	__muluchar
  496    00:E2B7  98         			tya				; Do a 8.0 x 0.8 fixed point
  497    00:E2B8  C2         			cly				; fractional multiply.
  498    00:E2B9  60         			rts
  499                        		.endif
  500                        	
  501                        	
  502                        	
  503                        	; ***************************************************************************
  504                        	; ***************************************************************************
  505                        	;
  506                        	; unsigned char __fastcall random( unsigned char limit<acc> );
  507                        	;
  508                        	; IN :	A = range (0..128), 129..255 is treated as 128
  509                        	; OUT : A = random number interval 0 <= x < A
  510                        	
  511               0001     		.ifndef	HUCC_NO_DEFAULT_RANDOM
  512                        	
  513    00:E2BA  A8         	_random.1:	tay				; Preserve the limit.
  514    00:E2BB  20 C3 E5   			jsr	get_random		; Random in A, preserve Y.
  515                        	
  516    00:E2BE  C0 80      			cpy	#128			; Check the limit.
  517    00:E2C0  90 04      			bcc	!+
  518                        	
  519    00:E2C2  29 7F      			and	#$7F			; Just mask the random if
  520    00:E2C4  C2         			cly				; the limit is >= 128.
  521    00:E2C5  60         			rts
  522                        	
  523    00:E2C6  20 F0 E4   	!:		jsr	__muluchar
  524    00:E2C9  98         			tya				; If the limit is < 128 then
  525    00:E2CA  C2         			cly				; do a 8.0 x 0.8 fixed point
  526    00:E2CB  60         			rts				; fractional multiply.
  527                        		.endif
  528                        	
  529                        	
  530                        	
  531                        	; ***************************************************************************
  532                        	; ***************************************************************************
  533                        	;
  534                        	; unsigned char __fastcall __builtin_ffs( unsigned int value<__temp> );
  535                        	
  536                        			.proc	___builtin_ffs.1
  556                        			.endp
  557                        	
  558                        	
  559                        	
  560                        	; ***************************************************************************
  561                        	; ***************************************************************************
  562                        	;
  563                        	; N.B. Declared in hucc-string.h, but defined here because they're macros!
  564                        	;
  565                        	; int __fastcall __macro memcmp( unsigned char *destination<_di>, unsigned char *source<_bp>, unsigned int count<acc> );
  566                        	
  567                        	_memcmp.3	.macro
  568                        			stz	<_bp_bank		; Map the source string.
  569                        			call	_farmemcmp.3
  570                        			.endm
  571                        	
  572                        	
  573                        	
  574                        	; ***************************************************************************
  575                        	; ***************************************************************************
  576                        	;
  577                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  578                        	;
  579                        	; void __fastcall __macro get_color( unsigned int index<VCE_CTA> );
  580                        	
  581                        	_get_color.1	.macro
  582                        			lda.l	VCE_CTR
  583                        			ldy.h	VCE_CTR
  584                        			.endm
  585                        	
  586                        	
  587                        	
  588                        	; ***************************************************************************
  589                        	; ***************************************************************************
  590                        	;
  591                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  592                        	;
  593                        	; void __fastcall __macro fade_to_black( unsigned int __far *from<_bp_bank:_bp>, unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_sub<_ah> );
  594                        	; void __fastcall __macro fade_to_white( unsigned int __far *from<_bp_bank:_bp>, unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_add<_ah> );
  595                        	; void __fastcall __macro cross_fade_to( unsigned int __far *from<_bp_bank:_bp>, unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char which_component<_ah );
  596                        	;
  597                        	; void __fastcall __macro far_fade_to_black( unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_sub<_ah> );
  598                        	; void __fastcall __macro far_fade_to_white( unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_add<_ah> );
  599                        	; void __fastcall __macro far_cross_fade_to( unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char which_component<_ah );
  600                        	
  601                        			.macro	_fade_to_black.4
  602                        			ldy	<_bp_bank
  603                        			call	fade_to_black
  604                        			.endm
  605                        	
  606                        			.macro	_fade_to_white.4
  607                        			ldy	<_bp_bank
  608                        			call	fade_to_white
  609                        			.endm
  610                        	
  611                        			.macro	_cross_fade_to.4
  612                        			ldy	<_bp_bank
  613                        			call	cross_fade_to
  614                        			.endm
  615                        	
  616                        			.macro	_far_fade_to_black.3
  617                        			ldy	<_bp_bank
  618                        			call	fade_to_black
  619                        			.endm
  620                        	
  621                        			.macro	_far_fade_to_white.3
  622                        			ldy	<_bp_bank
  623                        			call	fade_to_white
  624                        			.endm
  625                        	
  626                        			.macro	_far_cross_fade_to.3
  627                        			ldy	<_bp_bank
  628                        			call	cross_fade_to
  629                        			.endm
  630                        	
  631                        	
  632                        	
  633                        	; ***************************************************************************
  634                        	; ***************************************************************************
  635                        	;
  636                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  637                        	;
  638                        	; void __fastcall __macro set_xres( unsigned int x_pixels<_ax> );
  639                        	; void __fastcall __macro sgx_set_xres( unsigned int x_pixels<_ax> );
  640                        	;
  641                        	; void __fastcall set_xres( unsigned int x_pixels<_ax>, unsigned char blur_flag<_bl> );
  642                        	; void __fastcall sgx_set_xres( unsigned int x_pixels<_ax>, unsigned char blur_flag<_bl> );
  643                        	
  644                        	_set_xres.1	.macro
  645                        			lda	#XRES_SOFT
  646                        			sta	<_bl
  647                        			call	_set_xres.2
  648                        			.endm
  649                        	
  650               0001     		.if	SUPPORT_SGX
  651                        			.macro	_sgx_set_xres.1
  652                        			lda	#XRES_SOFT
  653                        			sta	<_bl
  654                        			call	_sgx_set_xres.2
  655                        			.endm
  656                        		.endif
  657                        	
  658                        	
  659                        	
  660                        	; ***************************************************************************
  661                        	; ***************************************************************************
  662                        	;
  663                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  664                        	;
  665                        	; unsigned int __fastcall __macro vram_addr( unsigned char bat_x<_al>, unsigned char bat_y<_ah> );
  666                        	; unsigned int __fastcall __macro sgx_vram_addr( unsigned char bat_x<_al>, unsigned char bat_y<_ah> );
  667                        	
  668                        			.macro	_vram_addr.2
  669                        			cla
  670                        			bit	vdc_bat_width
  671                        			bmi	!w128+
  672                        			bvs	!w64+
  673                        	!w32:		lsr	<_ah
  674                        			ror	a
  675                        	!w64:		lsr	<_ah
  676                        			ror	a
  677                        	!w128:		lsr	<_ah
  678                        			ror	a
  679                        			ora	<_al
  680                        			ldy	<_ah
  681                        			.endm
  682                        	
  683               0001     		.if	SUPPORT_SGX
  684                        			.macro	_sgx_vram_addr.2
  685                        			cla
  686                        			bit	sgx_bat_width
  687                        			bmi	!w128+
  688                        			bvs	!w64+
  689                        	!w32:		lsr	<_ah
  690                        			ror	a
  691                        	!w64:		lsr	<_ah
  692                        			ror	a
  693                        	!w128:		lsr	<_ah
  694                        			ror	a
  695                        			ora	<_al
  696                        			ldy	<_ah
  697                        			.endm
  698                        		.endif
  699                        	
  700                        	
  701                        	
  702                        	; ***************************************************************************
  703                        	; ***************************************************************************
  704                        	;
  705                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  706                        	;
  707                        	; unsigned int __fastcall __macro get_vram( unsigned int address<_di> );
  708                        	; void __fastcall __macro put_vram( unsigned int address<_di>, unsigned int data<acc> );
  709                        	;
  710                        	; unsigned int __fastcall __macro sgx_get_vram( unsigned int address<_di> );
  711                        	; void __fastcall __macro sgx_put_vram( unsigned int address<_di>, unsigned int data<acc> );
  712                        	
  713                        			.macro	_get_vram.1
  714                        			jsr	vdc_di_to_marr
  715                        			lda	VDC_DL
  716                        			ldy	VDC_DH
  717                        			.endm
  718                        	
  719                        			.macro	_put_vram.2
  720                        			pha
  721                        			jsr	vdc_di_to_mawr
  722                        			pla
  723                        			sta	VDC_DL
  724                        			sty	VDC_DH
  725                        			.endm
  726                        	
  727               0001     		.if	SUPPORT_SGX
  728                        			.macro	_sgx_get_vram.1
  729                        			jsr	sgx_di_to_marr
  730                        			lda	SGX_DL
  731                        			ldy	SGX_DH
  732                        			.endm
  733                        	
  734                        			.macro	_sgx_put_vram.2
  735                        			pha
  736                        			jsr	sgx_di_to_mawr
  737                        			pla
  738                        			sta	SGX_DL
  739                        			sty	SGX_DH
  740                        			.endm
  741                        		.endif
  742                        	
  743                        	
  744                        	
  745                        	; ***************************************************************************
  746                        	; ***************************************************************************
  747                        	;
  748                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  749                        	;
  750                        	; void __fastcall __macro set_bgpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp> );
  751                        	; void __fastcall __macro set_bgpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_palettes<_ah> );
  752                        	; void __fastcall __macro set_sprpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp> );
  753                        	; void __fastcall __macro set_sprpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_palettes<_ah> );
  754                        	
  755                        	_set_bgpal.2	.macro
  756                        			lda	#1
  757                        			sta	<_ah
  758                        			call	_load_palette.3
  759                        			.endm
  760                        	
  761                        	_set_bgpal.3	.macro
  762                        			call	_load_palette.3
  763                        			.endm
  764                        	
  765                        	_set_sprpal.2	.macro
  766                        			lda	#1
  767                        			sta	<_ah
  768                        			smb4	<_al
  769                        			call	_load_palette.3
  770                        			.endm
  771                        	
  772                        	_set_sprpal.3	.macro
  773                        			smb4	<_al
  774                        			call	_load_palette.3
  775                        			.endm
  776                        	
  777                        	
  778                        	
  779                        	; ***************************************************************************
  780                        	; ***************************************************************************
  781                        	;
  782                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  783                        	;
  784                        	; void __fastcall __macro load_vram( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_words<_ax> );
  785                        	; void __fastcall __macro sgx_load_vram( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_words<_ax> );
  786                        	;
  787                        	; void __fastcall __macro far_load_vram( unsigned int vram<_di>, unsigned int num_words<_ax> );
  788                        	; void __fastcall __macro sgx_far_load_vram( unsigned int vram<_di>, unsigned int num_words<_ax> );
  789                        	;
  790                        	
  791               0001     		.if	SUPPORT_SGX
  792                        			.macro	_sgx_load_vram.3
  793                        			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  794                        			call	load_vram_x
  795                        			.endm
  796                        	
  797                        			.macro	_sgx_far_load_vram.2
  798                        			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  799                        			call	load_vram_x
  800                        			.endm
  801                        		.endif
  802                        	
  803                        			.macro	_load_vram.3
  804                        			clx				; Offset to PCE VDC.
  805                        			call	load_vram_x
  806                        			.endm
  807                        	
  808                        			.macro	_far_load_vram.2
  809                        			clx				; Offset to PCE VDC.
  810                        			call	load_vram_x
  811                        			.endm
  812                        	
  813                        	
  814                        	
  815                        	; ***************************************************************************
  816                        	; ***************************************************************************
  817                        	;
  818                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  819                        	;
  820                        	; void __fastcall __macro load_sprites( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_groups<acc> );
  821                        	; void __fastcall __macro sgx_load_sprites( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_groups<acc> );
  822                        	; void __fastcall __macro far_load_sprites( unsigned int vram<_di>, unsigned int num_groups<acc> );
  823                        	; void __fastcall __macro sgx_far_load_sprites( unsigned int vram<_di>, unsigned int num_groups<acc> );
  824                        	
  825               0001     		.if	SUPPORT_SGX
  826                        			.macro	_sgx_load_sprites.3
  827                        			stz.l	<_ax
  828                        			asl	a
  829                        			sta.h	<_ax
  830                        			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  831                        			call	load_vram_x
  832                        			.endm
  833                        	
  834                        			.macro	_sgx_far_load_sprites.2
  835                        			stz.l	<_ax
  836                        			asl	a
  837                        			sta.h	<_ax
  838                        			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  839                        			call	load_vram_x
  840                        			.endm
  841                        		.endif
  842                        	
  843                        			.macro	_load_sprites.3
  844                        			stz.l	<_ax
  845                        			asl	a
  846                        			sta.h	<_ax
  847                        			clx				; Offset to PCE VDC.
  848                        			call	load_vram_x
  849                        			.endm
  850                        	
  851                        			.macro	_far_load_sprites.2
  852                        			stz.l	<_ax
  853                        			asl	a
  854                        			sta.h	<_ax
  855                        			clx				; Offset to PCE VDC.
  856                        			call	load_vram_x
  857                        			.endm
  858                        	
  859                        	
  860                        	
  861                        	; ***************************************************************************
  862                        	; ***************************************************************************
  863                        	;
  864                        	; N.B. Declared in hucc-gfx.h, but defined here because they're macros!
  865                        	;
  866                        	; void __fastcall load_default_font( void );
  867                        	; void __fastcall sgx_load_default_font( void );
  868                        	;
  869                        	
  870               0001     		.if	SUPPORT_SGX
  871                        			.macro	_sgx_load_default_font
  872                        			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  873                        			call	huc_monofont_x
  874                        			.endm
  875                        		.endif
  876                        	
  877                        			.macro	_load_default_font
  878                        			clx				; Offset to PCE VDC.
  879                        			call	huc_monofont_x
  880                        			.endm
  881                        	
  882                        	
  883                        	
  884                        	; ***************************************************************************
  885                        	; ***************************************************************************
  886                        	
  887               0000     		.if	0
  905                        		.endif
                             #[2]   "..\..\..\include\hucc\hucc.asm"
  228                        	
  229               0000     		.if	CDROM
  231                        		.endif
  232                        	
  233                        			; Definitions for compatibility with old HuC/MagicKit projects.
  234                        	
  235               0001     		.ifndef	HUCC_NO_DEPRECATED
                             #[3]   "..\..\..\include\hucc\hucc-deprecated.inc"
  236                        			include	"hucc-deprecated.inc"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-deprecated.inc
    5                        	;
    6                        	; Macros and definitions for compatibility with old HuC/MagicKit projects.
    7                        	;
    8                        	; Based on the original HuC and MagicKit definitions by David Michel and the
    9                        	; other original HuC developers.
   10                        	;
   11                        	; ***************************************************************************
   12                        	; ***************************************************************************
   13                        	
   14                        			; For compatibility with HuC projects that use the old name.
   15                        	
   16               0001     	HUC_USER_RESERVED = HUC_USER_BANK
   17                        	
   18                        			; For compatibility with code that expects the HuC naming that
   19                        			; is used in the newer HuC, rather than the original HuC v3.21.
   20                        			;
   21                        			; Code generated by HuCC uses the original single-underscore.
   22                        	
   23               0001     		.if	1				
   24               0002     	__bp		=	$F8:20EC, 2		; base pointer
   25               0002     	__si		=	$F8:20EE, 2		; source address
   26               0002     	__di		=	$F8:20F0, 2		; destination address
   27                        	
   28               0002     	__ax		=	$F8:20F8, 2
   29               0001     	__al		=	$F8:20F8, 1
   30               0001     	__ah		=	$F8:20F9, 1
   31                        	
   32               0002     	__bx		=	$F8:20FA, 2
   33               0001     	__bl		=	$F8:20FA, 1
   34               0001     	__bh		=	$F8:20FB, 1
   35                        	
   36               0002     	__cx		=	$F8:20FC, 2
   37               0001     	__cl		=	$F8:20FC, 1
   38               0001     	__ch		=	$F8:20FD, 1
   39                        	
   40               0002     	__dx		=	$F8:20FE, 2
   41               0001     	__dl		=	$F8:20FE, 1
   42               0001     	__dh		=	$F8:20FF, 1
   43                        		.endif
   44                        	
   45                        			; For compatibility with code that expects the HuC naming that
   46                        			; is used rather than the shorter upper-case #define naming.
   47                        	
   48               0001     		.if	1				
   49               0001     	video_reg	=	$FF:0200, 1		; Address/Status Register
   50               0001     	video_reg_l	=	$FF:0200, 1		; Address/Status Register
   51               0001     	video_reg_h	=	$FF:0201, 1		; Address/Status Register
   52               0002     	video_data	=	$FF:0202, 2		; Data (Read/Write) Low
   53               0001     	video_data_l	=	$FF:0202, 1		; Data (Read/Write) Low
   54               0001     	video_data_h	=	$FF:0203, 1		; Data (Read/Write) High
   55                        	
   56               0002     	color_ctrl	=	$FF:0400, 2		; Control Register
   57               0002     	color_reg	=	$FF:0402, 2		; Color Table Address
   58               0001     	color_reg_l	=	$FF:0402, 1		; Color Table Address
   59               0001     	color_reg_h	=	$FF:0402, 1		; Color Table Address
   60               0002     	color_data	=	$FF:0404, 2		; Color Table Data Read/Write
   61               0001     	color_data_l	=	$FF:0404, 1		; Color Table Data Read/Write
   62               0001     	color_data_h	=	$FF:0405, 1		; Color Table Data Read/Write
   63                        	
   64               0001     	psg_ch		=	$FF:0800, 1		; Channel Select
   65               0001     	psg_mainvol	=	$FF:0801, 1		; Main Amplitude Level
   66               0001     	psg_freqlo	=	$FF:0802, 1		; Frequency Low
   67               0001     	psg_freqhi	=	$FF:0803, 1		; Frequency High
   68               0001     	psg_ctrl	=	$FF:0804, 1		; Control & Channel Amplitude
   69               0001     	psg_pan		=	$FF:0805, 1		; L/R Amplitude Level
   70               0001     	psg_wavebuf	=	$FF:0806, 1		; Waveform
   71               0001     	psg_noise	=	$FF:0807, 1		; Noise
   72               0001     	psg_lfofreq	=	$FF:0808, 1		; LFO Frequency
   73               0001     	psg_lfoctrl	=	$FF:0809, 1		; LFO Control
   74                        	
   75               0001     	irq_m		=	irq_vec, 1		; Old System Card name.
   76               0002     	irq2_jmp	=	irq2_hook, 2		; Old System Card name.
   77               0002     	irq1_jmp	=	irq1_hook, 2		; Old System Card name.
   78               0002     	timer_jmp	=	timer_hook, 2		; Old System Card name.
   79               0002     	nmi_jmp		=	nmi_hook, 2		; Old System Card name.
   80               0002     	sat_adr		=	satb_addr, 2		; Old System Card name.
   81               0005     	joy		=	joynow, 5		; Old System Card name.
   82               0001     	mwr_m		=	vdc_mwr, 1		; Old System Card name.
   83               0001     	dcr_m		=	vdc_dcr, 1		; Old System Card name.
   84                        		.endif
   85                        	
   86                        			; Macros for compatibility with #asm usage in old HuC projects.
   87                        	
   88                        	stw		.macro
   89                        			lda.l	\1
   90                        			sta.l	\2
   91                        			lda.h	\1
   92                        			sta.h	\2
   93                        			.endm
   94                        	
   95                        	stb		.macro
   96                        			lda	\1
   97                        			sta	\2
   98                        			.endm
   99                        	
  100                        	addw		.macro
  101                        		.if	(\# = 3)
  102                        			clc
  103                        			lda.l	\2
  104                        			adc.l	\1
  105                        			sta.l	\3
  106                        			lda.h	\2
  107                        			adc.h	\1
  108                        			sta.h	\3
  109                        		.else
  110                        			clc
  111                        			lda.l	\2
  112                        			adc.l	\1
  113                        			sta.l	\2
  114                        			lda.h	\2
  115                        			adc.h	\1
  116                        			sta.h	\2
  117                        		.endif
  118                        			.endm
  119                        	
  120                        	add		.macro			; add byte-sized value to
  121                        		.if (\# = 2)			; register A (handle carry
  122                        			lda	\2		; flag)
  123                        			clc
  124                        			adc	\1
  125                        			sta	\2
  126                        		.else
  127                        			clc
  128                        			adc	\1
  129                        		.endif
  130                        			.endm
  131                        	
  132                        	subw		.macro
  133                        			sec
  134                        			lda.l	\2
  135                        			sbc.l	\1
  136                        			sta.l	\2
  137                        			lda.h	\2
  138                        			sbc.h	\1
  139                        			sta.h	\2
  140                        			.endm
  141                        	
  142                        	sub		.macro			; subtract byte-sized value
  143                        		.if (\# = 2)			; from register A (handle
  144                        			lda	\2		; carry flag)
  145                        			sec
  146                        			sbc	\1
  147                        			sta	\2
  148                        		.else
  149                        			sec
  150                        			sbc	\1
  151                        		.endif
  152                        			.endm
  153                        	
  154                        	incw		.macro			; increment a word-sized
  155                        			inc.l	\1		; value at stated memory
  156                        			bne	!+		; location
  157                        			inc.h	\1
  158                        	!:
  159                        			.endm
  160                        	
  161                        	decw		.macro			; decrement a word-sized
  162                        			lda	\1		; value at stated memory
  163                        			bne	!+		; location
  164                        			dec.h	\1
  165                        	!:		dec.l	\1
  166                        			.endm
  167                        	
  168                        	lbne		.macro
  169                        			bne	\1
  170                        			.endm
  171                        	
  172                        	lbeq		.macro
  173                        			beq	\1
  174                        			.endm
  175                        	
  176                        	lbpl		.macro
  177                        			bpl	\1
  178                        			.endm
  179                        	
  180                        	lbmi		.macro
  181                        			bmi	\1
  182                        			.endm
  183                        	
  184                        	lbcc		.macro
  185                        			bcc	\1
  186                        			.endm
  187                        	
  188                        	lbcs		.macro
  189                        			bcs	\1
  190                        			.endm
  191                        	
  192                        	lblo		.macro
  193                        			bcc	\1
  194                        			.endm
  195                        	
  196                        	lbhs		.macro
  197                        			bcs	\1
  198                        			.endm
  199                        	
  200                        	__ldwi		.macro
  201                        		__ld.wi		\1
  202                        			.endm
                             #[2]   "..\..\..\include\hucc\hucc.asm"
  237                        		.endif
  238                        	
  239                        			;
  240                        			;
  241                        			;
  242                        	
  243                        	
  244                        	
  245                        	; ***************************************************************************
  246                        	; ***************************************************************************
  247                        	;
  248                        	; core_main - This is executed after "CORE(not TM)" library initialization.
  249                        	;
  250                        	; This is the first code assembled after the library includes, so we're still
  251                        	; in the CORE_BANK, usually ".bank 0"; and because this is assembled with the
  252                        	; default configuration from "include/core-config.inc", which sets the option
  253                        	; "USING_MPR7", then we're running in MPR7 ($E000-$FFFF).
  254                        	
  255    18:CE50             	core_main	.proc
  256                        	
  257               0001     		.if	SUPPORT_SGX
  258    18:CE50  A9 F9      			lda	#$F9			; Map the 2nd SGX RAM bank.
  259                        		.else
  261                        		.endif
  262    18:CE52  53 04      			tam2
  263                        	
  264    18:CE54  A9 01      			lda	#CONST_BANK + _bank_base; Map HuCC's .RODATA bank.
  265    18:CE56  53 08      			tam3
  266    18:CE58  1A         			inc	a
  267    18:CE59  53 10      			tam4
  268                        	
  269               0000     		.ifdef	HOME_BANK
  271                        		.else
  272    18:CE5B  1A         			inc	a
  273                        		.endif
  274    18:CE5C  53 20      			tam5
  275                        	
  276    18:CE5E  08         			php				; Disable interrupts while
  277    18:CE5F  78         			sei				; clearing overlay's BSS.
  278                        	
  279               0000     		.ifndef	USING_RCR_MACROS
  294                        		.endif	USING_RCR_MACROS
  295                        	
  296    18:CE60  A9 CC      			lda	#<hucc_vbl		; Setup HuCC's VBL IRQ handler.
  297    18:CE62  8D 08 22   			sta.l	vsync_hook
  298    18:CE65  A9 E2      			lda	#>hucc_vbl
  299    18:CE67  8D 09 22   			sta.h	vsync_hook
  300                        	
  301               0000     		.if	CDROM				; Overlays should clear BSS.
  303                        		.else
  304    18:CE6A  73 B7 CE F0			tii	.rom_tia, ram_tia, 16	; Only needed on HuCARD.
         18:CE6E  22 10 00    
  305                        		.endif	CDROM
  306                        	
  307               0000     		.if	(__heap_start - __bss_init)	; Copy initialized BSS data.
  309                        		.endif
  310                        	
  311    18:CE71  F3 B5 CE 08			tai	.stack_fill, __stack, HUCC_STACK_SZ
         18:CE75  20 80 00    
  312                        	
  313               0000     		.if	FAST_MULTIPLY
  322                        		.endif
  323                        	
  324    18:CE78  A9 10      			lda	#$10			; Enable HuCC's vblank IRQ
  325    18:CE7A  04 F5      			tsb	<irq_vec		; handler.
  326                        	
  327                        			__sound_init			; Initialize a sound driver.
  328                        	
  329    18:CE7C  AD 00 02   			lda	VDC_SR			; Purge any overdue VBL.
  330    18:CE7F  9C 41 22   			stz	irq_cnt			; Make it easy to check.
  331                        	
  332    18:CE82  28         			plp				; Restore interrupts.
  333                        	
  334               0001     		.ifndef	HUCC_NO_DEFAULT_SCREEN
  335    18:CE83  20 D1 FF   			call	_init_256x224		; HuCC initializes the VDC and
  336    18:CE86  20 16 E4   			jsr	set_dspon		; turns the display on.
  337                        		.endif
  338                        	
  339               0001     		.ifndef	HUCC_NO_DEFAULT_FONT
  340    18:CE89  A9 01      			lda	#1			; HuCC loads a default font.
  341    18:CE8B  8D AD 26   			sta	monofont_fg
  342    18:CE8E  9C AE 26   			stz	monofont_bg
  343                        			_load_default_font
         18:CE91  82         			clx				; Offset to PCE VDC.
         18:CE92  20 C7 FF   			call	huc_monofont_x
  344    18:CE95  A9 01      			lda	#$01			; Set the font palette entry to
  345    18:CE97  8D 02 04   			sta.l	VCE_CTA			; cyan which is a) visible, but
  346    18:CE9A  9C 03 04   			stz.h	VCE_CTA			; b) a clear indicator that the
  347    18:CE9D  A0 96      			ldy	#$96			; user hasn't set a palette yet.
  348    18:CE9F  8C 04 04   			sty.l	VCE_CTW
  349    18:CEA2  8D 05 04   			sta.h	VCE_CTW
  350                        		.endif
  351                        	
  352               0001     		.ifndef	HUCC_NO_DEFAULT_RANDOM
  353    18:CEA5  AC 41 22   			ldy	irq_cnt			; Initialize random seed.
  354    18:CEA8  20 BD FF   			call	init_random
  355                        		.endif
  356                        	
  357    18:CEAB  A2 80      			ldx	#HUCC_STACK_SZ		; Initialize the HuCC stack.
  358    18:CEAD  86 8D      			stx	<__sp
  359                        	
  360    18:CEAF  20 B3 FF   			call	_main			; Execute the HuCC program.
  361                        	
  362    18:CEB2  4C 88 E2   			jmp	_exit.1			; Pass the exit code on.
  363                        	
  364    18:CEB5  EA EA      	.stack_fill:	db	$EA,$EA			; To make it easier to see.
  365                        	
  366               0001     		.if	!CDROM
  367                        	
  368    18:CEB7  E3 34 12 02	.rom_tia:	tia	$1234, VDC_DL, 32
         18:CEBB  02 20 00    
  369    18:CEBE  60         			rts
  370                        	
  371    18:CEBF  73 34 12 78	.rom_tii:	tii	$1234, $5678, $9ABC
         18:CEC3  56 BC 9A    
  372    18:CEC6  60         			rts
  373                        	
  374               22F0     			.bss
  375    F8:22F0             	ram_tia:	ds	8
  376    F8:22F8             	ram_tii:	ds	8
  377               CEC7     			.code
  378                        	
  379                        		.endif	!CDROM
  380                        	
  381                        			.endp
  382                        	
  383                        			;
  384                        			; Self-Modifying TIA and TII instruction subroutines.
  385                        			;
  386                        			; These need to be in permanently-accessible memory so that
  387                        			; HuCC code can modify the values as __fastcall parameters.
  388                        			;
  389                        	
  390               0000     		.if	CDROM
  398                        		.endif	CDROM
  399                        	
  400               22F0     			rsset	ram_tia
  401               22F0     	ram_tia_opc	rs	1
  402               22F1     	ram_tia_src	rs	2
  403               22F3     	ram_tia_dst	rs	2
  404               22F5     	ram_tia_len	rs	2
  405               22F7     	ram_tia_rts	rs	1
  406                        	
  407               22F8     			rsset	ram_tii
  408               22F8     	ram_tii_opc	rs	1
  409               22F9     	ram_tii_src	rs	2
  410               22FB     	ram_tii_dst	rs	2
  411               22FD     	ram_tii_len	rs	2
  412               22FF     	ram_tii_rts	rs	1
  413                        	
  414                        	
  415                        	
  416                        	; ***************************************************************************
  417                        	; ***************************************************************************
  418                        	;
  419                        	; hucc_vbl - vblank IRQ handler, called by the "CORE(not TM)" kernel.
  420                        	;
  421                        	; This uses the kernel's hook to process things during vblank. It returns
  422                        	; with a simple RTS, and it can corrupt any register.
  423                        	;
  424                        	; Any slow routines in here should enable interrupts and protect itself from
  425                        	; re-entrancy problems.
  426                        	;
  427                        	
  428    00:E2CC  20 A9 FF   	hucc_vbl:	call	vbl_init_scroll		; Prepare for the next frame.
  429                        	
  430    00:E2CF  F8         			sed				; Update the HuC system clock
  431    00:E2D0  38         			sec				; which is in BCD here rather
  432    00:E2D1  AD EF 22   			lda	clock_tt		; than the binary one in HuC.
  433    00:E2D4  69 00      			adc	#0			; BCD add ...
  434    00:E2D6  C9 60      			cmp	#$60			; ... but binary comparison.
  435    00:E2D8  90 28      			bcc	.ticks
  436    00:E2DA  AD EE 22   			lda	clock_ss
  437    00:E2DD  69 00      			adc	#0			; BCD add ...
  438    00:E2DF  C9 60      			cmp	#$60			; ... but binary comparison.
  439    00:E2E1  90 1B      			bcc	.seconds
  440    00:E2E3  AD ED 22   			lda	clock_mm
  441    00:E2E6  69 00      			adc	#0			; BCD add ...
  442    00:E2E8  C9 60      			cmp	#$60			; ... but binary comparison.
  443    00:E2EA  90 0E      			bcc	.minutes
  444    00:E2EC  AD EC 22   			lda	clock_hh
  445    00:E2EF  69 00      			adc	#0			; BCD add ...
  446    00:E2F1  C9 12      			cmp	#$12			; ... but binary comparison.
  447    00:E2F3  90 01      			bcc	.hours
  448    00:E2F5  62         			cla
  449    00:E2F6  8D EC 22   	.hours:		sta	clock_hh
  450    00:E2F9  62         			cla
  451    00:E2FA  8D ED 22   	.minutes:	sta	clock_mm
  452    00:E2FD  62         			cla
  453    00:E2FE  8D EE 22   	.seconds:	sta	clock_ss
  454    00:E301  62         			cla
  455    00:E302  8D EF 22   	.ticks:		sta	clock_tt
  456    00:E305  D8         			cld
  457                        	
  458    00:E306  4C 96 E3   			jmp	xfer_palettes		; Upload any palette changes.
                             #[1]   "main.s"
   15               6000     			.data
   16               0003     			.bank	DATA_BANK
   17                        	
   18               E309     		.code
   19                        	
   20                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 1; // **************************************************************************
   21                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 2; // **************************************************************************
   22                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 3; //
   23                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 4; // globals.h
   24                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 5; //
   25                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 6; // **************************************************************************
   26                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 7; // **************************************************************************
   27                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 8; //
   28                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 9; // The idea is that you, a PCE developer, copy this file from the ../include/
   29                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 10; // directory and into your project's directory, and then define the variables
   30                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 11; // that you want to have shared access to in all overlay programs on your CD.
   31                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 12; //
   32                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 13; // Because PCEAS searches the current (i.e. project) directory for an include
   33                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 14; // file first, then it will find your customized copy of the file rather than
   34                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 15; // the original copy in the ../include/ directory.
   35                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 16; //
   36                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 17; // **************************************************************************
   37                        		.dbg	line,	"..\..\..\include\hucc\globals.h", 18; // **************************************************************************
   38                        		.dbg	clear
   39               2300     		.bss
   40    F8:2300             	huc_globals:
   41                        	
   42    F8:2300             	huc_globals_end:
   43               E309     		.code
   44                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
   45                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
   46                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
   47                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
   48                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
   49                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
   50                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
   51                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
   52                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
   53                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
   54                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
   55                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
   56                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
   57                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
   58                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
   59                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
   60                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
   61                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
   62                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
   63                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
   64                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
   65                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
   66                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
   67                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
   68                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
   69                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
   70                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
   71                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
   72                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
   73                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
   74                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
   75                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 1; #ifndef _hucc_systemcard_h
   76                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 2; #define _hucc_systemcard_h
   77                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 4; /****************************************************************************
   78                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 5; ; ***************************************************************************
   79                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 6; ;
   80                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 7; ; hucc-systemcard.h
   81                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 8; ;
   82                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 9; ; Macros and library functions for using the System Card.
   83                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 10; ;
   84                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 11; ; Copyright John Brandwood 2024.
   85                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 12; ;
   86                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 13; ; Distributed under the Boost Software License, Version 1.0.
   87                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
   88                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
   89                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 16; ;
   90                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 17; ; ***************************************************************************
   91                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 18; ; ***************************************************************************
   92                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 19; ;
   93                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 20; ; Because these are mainly macros, and so must be included before being used
   94                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 21; ; in compiled code, the actual functions here are written to avoid using any
   95                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 22; ; BSS memory so that HuCC's overlay global-shared-variables are not effected.
   96                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 23; ;
   97                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 24; ; ***************************************************************************
   98                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 25; ; **************************************************************************/
   99                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 27; // *************
  100                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 28; // Backup RAM defines ...
  101                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 29; // *************
  102                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 31; #define  BM_OK             0
  103                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 32; #define  BM_NOT_FOUND      1
  104                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 33; #define  BM_BAD_CHECKSUM   2
  105                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 34; #define  BM_DIR_CORRUPTED  3
  106                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 35; #define  BM_FILE_EMPTY     4
  107                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 36; #define  BM_FULL           5
  108                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 37; #define  BM_NOT_FORMATED   0xFF			// HuC incorrect spelling.
  109                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 38; #define  BM_NOT_FORMATTED  0xFF			// HuCC can use a dictionary!
  110                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 40; #define  BRAM_STARTPTR     0x8010
  111                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 42; // *************
  112                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 43; // CD defines ...
  113                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 44; // *************
  114                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 46; #define	CDPLAY_MUTE		0
  115                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 47; #define	CDPLAY_REPEAT		1
  116                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 48; #define	CDPLAY_NORMAL		2
  117                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 49; #define	CDPLAY_ENDOFDISC	0
  118                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 51; #define	CDFADE_CANCEL	0
  119                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 52; #define	CDFADE_PCM6	8
  120                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 53; #define	CDFADE_ADPCM6	10
  121                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 54; #define	CDFADE_PCM2	12
  122                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 55; #define	CDFADE_ADPCM2	14
  123                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 57; #define CDTRK_AUDIO	0
  124                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 58; #define CDTRK_DATA	4
  125                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 60; // *************
  126                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 61; // ADPCM defines ...
  127                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 62; // *************
  128                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 64; #define	ADPLAY_AUTOSTOP		0
  129                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 65; #define	ADPLAY_REPEAT		0x80
  130                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 67; #define ADPLAY_FREQ_16KHZ	0xE
  131                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 68; #define ADPLAY_FREQ_10KHZ	0xD
  132                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 69; #define ADPLAY_FREQ_8KHZ	0xC
  133                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 70; #define ADPLAY_FREQ_6KHZ	0xB
  134                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 71; #define ADPLAY_FREQ_5KHZ	0xA
  135                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 73; #define ADREAD_RAM	0
  136                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 74; #define ADREAD_VRAM	0xFF
  137                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 76; #define ADWRITE_RAM	0
  138                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 77; #define ADWRITE_VRAM	0xFF
  139                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 79; // *************
  140                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 80; // Functions in hucc-systemcard.asm ...
  141                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 81; // *************
  142                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 83; #ifdef __HUCC__
  143                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 85; #asmdef	HUCC_USES_SYSTEMCARD 1
  144               0001     	HUCC_USES_SYSTEMCARD = 1
  145                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 87; extern void __fastcall __macro cd_boot( void );
  146                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 88; extern unsigned int __fastcall __macro cd_getver( void );
  147                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 89; extern void __fastcall __macro cd_reset( void );
  148                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 90; extern unsigned char __fastcall __macro cd_pause( void );
  149                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 91; extern unsigned char __fastcall cd_unpause( void );
  150                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 92; extern void __fastcall __macro cd_fade( unsigned char type<acc> );
  151                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 93; extern unsigned char __fastcall cd_playtrk( unsigned char start_track<_bx>, unsigned char end_track<_cx>, unsigned char mode<_dh> );
  152                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 94; extern unsigned char __fastcall cd_playmsf( unsigned char start_minute<_al>,  unsigned char start_second<_ah>,  unsigned char start_frame<_bl>, unsigned char end_minute<_cl>,  unsigned char end_second<_ch>,  unsigned char end_frame<_dl>,  unsigned char mode<_dh> );
  153                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 95; extern unsigned char __fastcall cd_fastvram( unsigned char ovl_index<_cl>, unsigned int sect_offset<_si>, unsigned int vramaddr<_bx>, unsigned int sectors<_al> );
  154                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 96; extern unsigned char __fastcall cd_loadvram( unsigned char ovl_index<_cl>, unsigned int sect_offset<_si>, unsigned int vramaddr<_bx>, unsigned int bytes<_ax> );
  155                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 97; extern unsigned char __fastcall cd_loaddata( unsigned char ovl_index<_cl>, unsigned int sect_offset<_si>, unsigned char __far *buffer<_bp_bank:_bp>, unsigned int bytes<__ptr> );
  156                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 98; extern unsigned char __fastcall cd_loadbank( unsigned char ovl_index<_cl>, unsigned int sect_offset<_si>, unsigned char bank<_bl>, unsigned int sectors<_al> );
  157                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 99; extern unsigned char __fastcall __macro cd_status( unsigned char mode<acc> );
  158                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 101; extern void __fastcall __macro ad_reset( void );
  159                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 102; extern unsigned char __fastcall __macro ad_trans( unsigned char ovl_index<_cl>, unsigned int sect_offset<_si>, unsigned char nb_sectors<_dh>, unsigned int ad_addr<_bx> );
  160                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 103; extern void __fastcall __macro ad_read( unsigned int ad_addr<_cx>, unsigned char mode<_dh>, unsigned int buf<_bx>, unsigned int bytes<_ax> );
  161                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 104; extern void __fastcall __macro ad_write( unsigned int ad_addr<_cx>, unsigned char mode<_dh>, unsigned int buf<_bx>, unsigned int bytes<_ax> );
  162                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 105; extern unsigned char __fastcall __macro ad_play( unsigned int ad_addr<_bx>, unsigned int bytes<_ax>, unsigned char freq<_dh>, unsigned char mode<_dl> );
  163                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 106; extern unsigned char __fastcall __macro ad_cplay( unsigned char ovl_index<_cl>, unsigned int sect_offset<_si>, unsigned int nb_sectors<_bx>, unsigned char freq<_dh> );
  164                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 107; extern void __fastcall __macro ad_stop( void );
  165                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 108; extern unsigned char __fastcall __macro ad_stat( void );
  166                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 110; extern unsigned char __fastcall bm_check( void );
  167                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 111; extern unsigned char __fastcall bm_format( void );
  168                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 112; extern unsigned int __fastcall __macro bm_free( void );
  169                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 113; extern unsigned char __fastcall __macro bm_read( unsigned char *buffer<_bx>, unsigned char *name<_ax>, unsigned int offset<_dx>, unsigned int length<_cx> );
  170                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 114; extern unsigned char __fastcall __macro bm_write( unsigned char *buffer<_bx>, unsigned char *name<_ax>, unsigned int offset<_dx>, unsigned int length<_cx> );
  171                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 115; extern unsigned char __fastcall __macro bm_delete( unsigned char *name<_ax> );
  172                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 117; // Deprecated functions ...
  173                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 119; extern unsigned char __fastcall __macro bm_exist( unsigned char *name<_ax> );
  174                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 120; extern unsigned char __fastcall __macro bm_create( unsigned char *name<_ax>, unsigned int length<_cx> );
  175                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 122; // void __fastcall _xsafe add_sectors( unsigned int sector_offset<acc> );
  176                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 124; #endif // __HUCC__
  177                        		.dbg	line,	"..\..\..\include\hucc\hucc-systemcard.h", 126; #endif // _hucc_systemcard_h
  178                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
  179                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 1; #ifndef _hucc_baselib_h
  180                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 2; #define _hucc_baselib_h
  181                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 4; /****************************************************************************
  182                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 5; ; ***************************************************************************
  183                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 6; ;
  184                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 7; ; hucc-baselib.h
  185                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 8; ;
  186                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 9; ; Basic library functions provided as macros.
  187                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 10; ;
  188                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 11; ; Copyright John Brandwood 2024.
  189                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 12; ;
  190                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 13; ; Distributed under the Boost Software License, Version 1.0.
  191                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
  192                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
  193                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 16; ;
  194                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 17; ; ***************************************************************************
  195                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 18; ; **************************************************************************/
  196                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 20; // *************
  197                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 21; // Joypad defines ...
  198                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 22; // *************
  199                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 24; #define	JOY_A		0x01
  200                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 25; #define	JOY_I		0x01
  201                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 26; #define	JOY_B		0x02
  202                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 27; #define	JOY_II		0x02
  203                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 28; #define	JOY_SLCT	0x04
  204                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 29; #define	JOY_SEL		0x04
  205                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 30; #define	JOY_STRT	0x08
  206                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 31; #define	JOY_RUN		0x08
  207                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 32; #define	JOY_UP		0x10
  208                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 33; #define	JOY_RGHT	0x20
  209                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 34; #define	JOY_RIGHT	0x20
  210                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 35; #define	JOY_DOWN	0x40
  211                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 36; #define	JOY_LEFT	0x80
  212                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 38; #define	JOY_C		0x0100
  213                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 39; #define	JOY_III		0x0100
  214                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 40; #define	JOY_D		0x0200
  215                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 41; #define	JOY_IV		0x0200
  216                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 42; #define	JOY_E		0x0400
  217                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 43; #define	JOY_V		0x0400
  218                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 44; #define	JOY_F		0x0800
  219                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 45; #define	JOY_VI		0x0800
  220                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 47; #define JOY_SIXBUT	0x8000
  221                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 48; #define JOY_TYPE6	0x8000
  222                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 50; // *************
  223                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 51; // SuperGRAFX VPC settings for set_vpc_ctl() ...
  224                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 52; // *************
  225                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 54; #define VPC_SPR1_BKG1_SPR2_BKG2	0x3000 // same as SGX_PARALLAX=0
  226                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 55; #define VPC_SPR1_SPR2_BKG1_BKG2	0x7000 // same as SGX_PARALLAX=1
  227                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 56; #define VPC_BKG1_BKG2_SPR1_SPR2	0xB000
  228                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 58; // *************
  229                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 59; // System Card variables ...
  230                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 60; // *************
  231                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 62; extern unsigned int si;
  232                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 63; extern unsigned int di;
  233                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 64; extern unsigned int bp;
  234                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 66; extern unsigned int ax;
  235                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 67; extern unsigned int bx;
  236                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 68; extern unsigned int cx;
  237                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 69; extern unsigned int dx;
  238                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 71; extern unsigned char al;
  239                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 72; extern unsigned char ah;
  240                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 73; extern unsigned char bl;
  241                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 74; extern unsigned char bh;
  242                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 75; extern unsigned char cl;
  243                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 76; extern unsigned char ch;
  244                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 77; extern unsigned char dl;
  245                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 78; extern unsigned char dh;
  246                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 80; extern unsigned char irq_cnt;
  247                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 81; extern unsigned char joynow[5];
  248                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 82; extern unsigned char joytrg[5];
  249                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 83; extern unsigned char joy6now[5];
  250                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 84; extern unsigned char joy6trg[5];
  251                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 85; extern unsigned int  bg_x1;
  252                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 86; extern unsigned int  bg_y1;
  253                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 87; extern unsigned int  bg_x2;
  254                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 88; extern unsigned int  bg_y2;
  255                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 90; // *************
  256                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 91; // Special macros to get information from PCEAS ...
  257                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 92; // *************
  258                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 94; #define BANK( datasym ) ((unsigned) (&__bank__ ## datasym))
  259                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 95; #define SIZEOF( datasym ) ((unsigned) (&__sizeof__ ## datasym))
  260                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 96; #define COUNTOF( datasym ) ((unsigned) (&__countof__ ## datasym))
  261                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 97; #define OVERLAY( datasym ) ((unsigned) (&__overlay__ ## datasym))
  262                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 100; // *************
  263                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 101; // Functions in hucc-baselib.asm ...
  264                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 102; // *************
  265                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 104; #ifdef __HUCC__
  266                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 106; #asmdef	HUCC_USES_BASELIB 1
  267               0001     	HUCC_USES_BASELIB = 1
  268                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 108; #define	_OPTIMIZE 1
  269                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 111; // *************
  270                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 112; // Hardware Detection
  271                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 113; // *************
  272                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 115; extern unsigned char __fastcall __macro sgx_detect( void );
  273                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 116; extern unsigned char __fastcall __macro ac_exists( void );
  274                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 119; // *************
  275                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 120; // Memory Access
  276                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 121; // *************
  277                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 123; extern unsigned char __fastcall __macro peek( unsigned int addr<__ptr> );
  278                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 124; extern unsigned int  __fastcall __macro peekw( unsigned int addr<__ptr> );
  279                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 126; extern void __fastcall __macro poke( unsigned int addr<__poke>, unsigned char with<acc> );
  280                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 127; extern void __fastcall __macro pokew( unsigned int addr<__poke>, unsigned int with<acc> );
  281                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 129; extern unsigned char __fastcall farpeek( void __far *addr<_bp_bank:_bp> );
  282                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 130; extern unsigned int  __fastcall farpeekw( void __far *addr<_bp_bank:_bp> );
  283                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 132; extern void __fastcall __nop set_far_base( unsigned char data_bank<_bp_bank>, unsigned char *data_addr<_bp> );
  284                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 133; extern void __fastcall set_far_offset( unsigned int offset<_bp>, unsigned char data_bank<_bp_bank>, unsigned char *data_addr<acc> );
  285                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 135; extern unsigned char __fastcall far_peek( void );
  286                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 136; extern unsigned int  __fastcall far_peekw( void );
  287                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 138; extern void __fastcall __macro reset_mpr2( void );
  288                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 139; extern void __fastcall __macro reset_mpr34( void );
  289                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 141; extern void * __fastcall __macro farset_mpr2( void __far *addr<_bp_bank:_bp> );
  290                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 142; extern void * __fastcall __macro farset_mpr34( void __far *addr<_bp_bank:_bp> );
  291                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 144; extern void * __fastcall __macro far_set_mpr2( void );
  292                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 145; extern void * __fastcall __macro far_set_mpr34( void );
  293                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 148; // *************
  294                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 149; // Clock Functions
  295                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 150; // *************
  296                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 152; extern unsigned char __fastcall __macro clock_hh( void );
  297                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 153; extern unsigned char __fastcall __macro clock_mm( void );
  298                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 154; extern unsigned char __fastcall __macro clock_ss( void );
  299                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 155; extern unsigned char __fastcall __macro clock_tt( void );
  300                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 156; extern void __fastcall __macro clock_reset( void );
  301                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 159; // *************
  302                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 160; // Joypad Functions
  303                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 161; // *************
  304                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 163; extern unsigned int __fastcall __macro joy( unsigned char which<acc> );
  305                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 164; extern unsigned int __fastcall __macro joytrg( unsigned char which<acc> );
  306                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 167; // *************
  307                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 168; // Number Functions
  308                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 169; // *************
  309                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 171; extern int __fastcall abs( int value<acc> );
  310                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 173; extern void __fastcall __macro srand( unsigned char seed<acc> );
  311                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 174; extern unsigned int __fastcall rand( void );
  312                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 175; extern unsigned char __fastcall rand8( void );
  313                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 177; // Note: "limit" is 0..255.
  314                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 178; extern unsigned char __fastcall random8( unsigned char limit<acc> );
  315                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 180; // Note: "limit" is 0..128, 129..255 are treated as 128!
  316                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 181; extern unsigned char __fastcall random( unsigned char limit<acc> );
  317                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 184; // *************
  318                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 185; // Overlay Execution
  319                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 186; // *************
  320                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 188; extern unsigned char __fastcall __macro cd_execoverlay( unsigned char ovl_index<acc> );
  321                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 191; // *************
  322                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 192; // Functions that are only optionally available if configured in your hucc-config.inc
  323                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 193; // *************
  324                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 195; extern unsigned int __fastcall __macro joybuf( unsigned char which<acc> );
  325                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 196; extern unsigned int __fastcall __macro get_joy_events( unsigned char which<acc> );
  326                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 197; extern void __fastcall __macro clear_joy_events( unsigned char mask<acc> );
  327                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 200; // *************
  328                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 201; // Functions that are only implemented in the TGEMU emulator for unit-testing
  329                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 202; // the compiler, and which should never be used in normal HuCC projects ...
  330                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 203; // *************
  331                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 205; extern void __fastcall dump_screen( void );
  332                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 206; extern void __fastcall abort( void );
  333                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 207; extern void __fastcall exit( int value<acc> );
  334                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 209; extern unsigned char __fastcall __builtin_ffs( unsigned int value<__temp> );
  335                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 211; #endif // __HUCC__
  336                        		.dbg	line,	"..\..\..\include\hucc\hucc-baselib.h", 213; #endif // _hucc_baselib_h
  337                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
  338                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 1; #ifndef _hucc_gfx_h
  339                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 2; #define _hucc_gfx_h
  340                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 4; /****************************************************************************
  341                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 5; ; ***************************************************************************
  342                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 6; ;
  343                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 7; ; huc-gfx.h
  344                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 8; ;
  345                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 9; ; Based on the original HuC and MagicKit functions by David Michel and the
  346                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 10; ; other original HuC developers.
  347                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 11; ;
  348                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 12; ; Modifications copyright John Brandwood 2024.
  349                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 13; ;
  350                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 14; ; Distributed under the Boost Software License, Version 1.0.
  351                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 15; ; (See accompanying file LICENSE_1_0.txt or copy at
  352                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 16; ;  http://www.boost.org/LICENSE_1_0.txt)
  353                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 17; ;
  354                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 18; ; ***************************************************************************
  355                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 19; ; **************************************************************************/
  356                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 21; // *************
  357                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 22; // Screen defines ...
  358                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 23; // *************
  359                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 25; #define	SCR_SIZE_32x32	0
  360                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 26; #define	SCR_SIZE_64x32	1
  361                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 27; #define	SCR_SIZE_128x32	2
  362                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 28; #define	SCR_SIZE_32x64	4
  363                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 29; #define	SCR_SIZE_64x64	5
  364                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 30; #define	SCR_SIZE_128x64	6
  365                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 32; #define	XRES_SHARP	0
  366                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 33; #define	XRES_SOFT	4
  367                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 34; #define	XRES_KEEP	128
  368                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 36; #define VPC_WIN_A	0x00
  369                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 37; #define VPC_WIN_B	0x01
  370                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 38; #define	VPC_WIN_AB	0x02
  371                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 39; #define	VPC_WIN_NONE	0x03
  372                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 40; #define	VPC_NORM	0x00
  373                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 41; #define	VPC_SPR		0x04
  374                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 42; #define	VPC_INV_SPR	0x08
  375                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 43; #define VDC1_ON		0x01
  376                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 44; #define	VDC1_OFF	0x00
  377                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 45; #define VDC2_ON		0x02
  378                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 46; #define	VDC2_OFF	0x00
  379                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 47; #define VDC_ON		0x03
  380                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 48; #define	VDC_OFF		0x00
  381                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 50; // *************
  382                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 51; // Functions in hucc-gfx.asm ...
  383                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 52; // *************
  384                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 54; #ifdef __HUCC__
  385                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 56; #asmdef	HUCC_USES_GFX 1
  386               0001     	HUCC_USES_GFX = 1
  387                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 58; // *************
  388                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 59; // Color and Palette Functions
  389                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 60; // *************
  390                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 62; extern void __fastcall clear_palette( void );
  391                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 64; extern void __fastcall __nop set_color( unsigned int index<VCE_CTA>, unsigned int value<VCE_CTW> );
  392                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 65; extern void __fastcall set_color_rgb( unsigned int index<VCE_CTA>, unsigned char r<_al>, unsigned char g<_ah>, unsigned char b<acc> );
  393                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 66; extern unsigned int __fastcall __macro get_color( unsigned int index<VCE_CTA> );
  394                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 68; extern void __fastcall load_palette( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp>, unsigned char num_palettes<_ah> );
  395                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 69; extern void __fastcall far_load_palette( unsigned char palette<_al>, unsigned char num_palettes<_ah> );
  396                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 71; extern void __fastcall read_palette( unsigned char palette<_al>, unsigned char num_palettes<_ah>, unsigned int *destination<_di> );
  397                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 73; extern void __fastcall __macro fade_to_black( unsigned int __far *from<_bp_bank:_bp>, unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_sub<_ah> );
  398                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 74; extern void __fastcall __macro fade_to_white( unsigned int __far *from<_bp_bank:_bp>, unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_add<_ah> );
  399                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 75; extern void __fastcall __macro cross_fade_to( unsigned int __far *from<_bp_bank:_bp>, unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char which_component<_ah> );
  400                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 77; extern void __fastcall __macro far_fade_to_black( unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_sub<_ah> );
  401                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 78; extern void __fastcall __macro far_fade_to_white( unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char value_to_add<_ah> );
  402                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 79; extern void __fastcall __macro far_cross_fade_to( unsigned int *destination<_di>, unsigned char num_colors<_al>, unsigned char which_component<_ah> );
  403                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 83; // *************
  404                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 84; // Video Functions
  405                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 85; // *************
  406                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 87; extern void __fastcall init_240x208( void );
  407                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 88; extern void __fastcall init_256x224( void );
  408                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 90; extern void __fastcall vsync( void );
  409                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 91; extern void __fastcall vsync( unsigned char count<_al> );
  410                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 93; extern void __fastcall disp_on( void );
  411                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 94; extern void __fastcall disp_off( void );
  412                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 96; extern void __fastcall set_screen_size( unsigned char value<_al> );
  413                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 98; extern void __fastcall set_xres( unsigned int x_pixels<_ax>, unsigned char blur_flag<_bl> );
  414                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 100; extern void __fastcall cls( void );
  415                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 101; extern void __fastcall cls( unsigned int tile<acc> );
  416                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 103; extern unsigned int __fastcall __macro vram_addr( unsigned char bat_x<_al>, unsigned char bat_y<_ah> );
  417                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 104; extern unsigned int __fastcall __macro get_vram( unsigned int address<_di> );
  418                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 105; extern void __fastcall __macro put_vram( unsigned int address<_di>, unsigned int data<acc> );
  419                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 107; extern void __fastcall __macro load_vram( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_words<_ax> );
  420                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 108; extern void __fastcall __macro far_load_vram( unsigned int vram<_di>,  unsigned int num_words<_ax> );
  421                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 110; extern void __fastcall load_bat( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  422                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 111; extern void __fastcall far_load_bat( unsigned int vram<_di>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  423                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 113; extern void __fastcall __macro load_sprites( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_groups<acc> );
  424                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 114; extern void __fastcall __macro far_load_sprites( unsigned int vram<_di>, unsigned int num_groups<acc> );
  425                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 116; extern void __fastcall vram2vram( unsigned int vram_dst<_ax>, unsigned int vram_src<_bx>, unsigned int word_len<_cx> );
  426                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 119; // *************
  427                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 120; // SuperGRAFX Video Functions
  428                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 121; // *************
  429                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 123; extern void __fastcall __nop vpc_set_ctl( unsigned int bits<VPC_CR> );
  430                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 124; extern void __fastcall __nop vpc_set_win1( unsigned int width<VPC_WINDOW1> );
  431                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 125; extern void __fastcall __nop vpc_set_win2( unsigned int width<VPC_WINDOW2> );
  432                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 127; extern void __fastcall sgx_set_screen_size( unsigned char value<_al> );
  433                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 129; extern void __fastcall sgx_set_xres( unsigned int x_pixels<_ax>, unsigned char blur_flag<_bl> );
  434                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 131; extern void __fastcall sgx_cls( void );
  435                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 132; extern void __fastcall sgx_cls( unsigned int tile<acc> );
  436                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 134; extern unsigned int __fastcall __macro sgx_vram_addr( unsigned char bat_x<_al>, unsigned char bat_y<_ah> );
  437                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 135; extern unsigned int __fastcall __macro sgx_get_vram( unsigned int address<_di> );
  438                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 136; extern void __fastcall __macro sgx_put_vram( unsigned int address<_di>, unsigned int data<acc> );
  439                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 138; extern void __fastcall __macro sgx_load_vram( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_words<_ax> );
  440                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 139; extern void __fastcall __macro sgx_far_load_vram( unsigned int vram<_di>, unsigned int num_words<_ax> );
  441                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 141; extern void __fastcall sgx_load_bat( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  442                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 142; extern void __fastcall sgx_far_load_bat( unsigned int vram<_di>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  443                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 144; extern void __fastcall __macro sgx_load_sprites( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_groups<acc> );
  444                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 145; extern void __fastcall __macro sgx_far_load_sprites( unsigned int vram<_di>, unsigned int num_groups<acc> );
  445                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 147; extern void __fastcall sgx_vram2vram( unsigned int vram_dst<_ax>, unsigned int vram_src<_bx>, unsigned int word_len<_cx> );
  446                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 150; // *************
  447                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 151; // Font Functions
  448                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 152; // *************
  449                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 154; extern void __fastcall set_font_addr( unsigned int vram<acc> );
  450                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 155; extern void __fastcall set_font_pal( unsigned char palette<acc> );
  451                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 157; extern void __fastcall load_font( unsigned char __far *font<_bp_bank:_bp>, unsigned char count<_al>, unsigned int vram<acc> );
  452                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 158; extern void __fastcall far_load_font( unsigned char count<_al>, unsigned int vram<acc> );
  453                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 160; extern void __fastcall __nop set_font_color( unsigned char foreground<monofont_fg>, unsigned char background<monofont_bg> );
  454                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 161; extern void __fastcall __macro load_default_font( void );
  455                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 164; // *************
  456                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 165; // SuperGRAFX Font Functions
  457                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 166; // *************
  458                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 168; extern void __fastcall sgx_set_font_addr( unsigned int vram<acc> );
  459                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 169; extern void __fastcall sgx_set_font_pal( unsigned char palette<acc> );
  460                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 171; extern void __fastcall sgx_load_font( char __far *font<_bp_bank:_bp>, unsigned char count<_al>, unsigned int vram<acc> );
  461                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 172; extern void __fastcall sgx_far_load_font( unsigned char count<_al>, unsigned int vram<acc> );
  462                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 174; extern void __fastcall __macro sgx_load_default_font( void );
  463                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 177; // *************
  464                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 178; // Deprecated functions ...
  465                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 179; // *************
  466                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 181; extern void __fastcall __macro set_xres( unsigned int x_pixels<_ax> );
  467                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 182; extern void __fastcall __macro sgx_set_xres( unsigned int x_pixels<_ax> );
  468                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 184; extern void __fastcall load_background( unsigned char __far *tiles<_bp_bank:_bp>, unsigned char __far *palettes<__fbank:__fptr>, unsigned char __far *bat<_cl:_bx>, unsigned char w<_dl>, unsigned char h<_dh> );
  469                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 186; extern void __fastcall __macro set_bgpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp> );
  470                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 187; extern void __fastcall __macro set_bgpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_palettes<_ah> );
  471                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 188; extern void __fastcall __macro set_sprpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp> );
  472                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 189; extern void __fastcall __macro set_sprpal( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_palettes<_ah> );
  473                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 191; extern void __fastcall load_font( char __far *font<_bp_bank:_bp>, unsigned char count<_al> );
  474                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 193; extern void __fastcall put_string( unsigned char *string<_bp>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
  475                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 195; extern void __fastcall put_char( unsigned char digit<_bl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
  476                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 196; extern void __fastcall put_digit( unsigned char digit<_bl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
  477                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 197; extern void __fastcall put_hex( unsigned int number<_bx>, unsigned char length<_cl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
  478                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 198; extern void __fastcall put_number( unsigned int number<_bx>, unsigned char length<_cl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
  479                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 199; extern void __fastcall put_raw( unsigned int data<_bx>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
  480                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 201; #endif // __HUCC__
  481                        		.dbg	line,	"..\..\..\include\hucc\hucc-gfx.h", 203; #endif // _hucc_gfx_h
  482                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
  483                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 1; #ifndef _hucc_string_h
  484                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 2; #define _hucc_string_h
  485                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 4; /****************************************************************************
  486                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 5; ; ***************************************************************************
  487                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 6; ;
  488                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 7; ; hucc-string.h
  489                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 8; ;
  490                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 9; ; Not-quite-standard, but fast, replacements for <string.h>.
  491                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 10; ;
  492                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 11; ; Copyright John Brandwood 2024.
  493                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 12; ;
  494                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 13; ; Distributed under the Boost Software License, Version 1.0.
  495                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
  496                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
  497                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 16; ;
  498                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 17; ; ***************************************************************************
  499                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 18; ; ***************************************************************************
  500                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 19; ;
  501                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 20; ; !!! WARNING : non-standard return values !!!
  502                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 21; ;
  503                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 22; ; Strings are limited to a maximum of 255 characters (+ the terminator)!
  504                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 23; ;
  505                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 24; ; The memcpy(), strcpy() and strcat() functions do NOT return the destination
  506                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 25; ; address, and they are declared "void" to check that the value is not used.
  507                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 26; ;
  508                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 27; ; mempcpy() is provided which returns the end address instead of the starting
  509                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 28; ; address, because this is typically more useful.
  510                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 29; ;
  511                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 30; ; Please note that both memcpy() and memset() are implemented using a TII for
  512                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 31; ; speed, and so the length should be < 16 bytes if used in time-critical bits
  513                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 32; ; of code (such as when using a split screen) because they delay interrupts.
  514                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 33; ;
  515                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 34; ; strncpy() and strncat() are not provided, because strncpy() was not created
  516                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 35; ; for the purpose of avoiding string overruns, and strncat() is just a poorly
  517                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 36; ; designed function IMHO.
  518                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 37; ;
  519                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 38; ; POSIX strlcpy() and strlcat() are provided instead, but once again they are
  520                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 39; ; slightly non-standard in that the return value when there is an overflow is
  521                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 40; ; the buffer size (so that the overflow can be detected), instead of the full
  522                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 41; ; size of the destination string that was too big to fit in the buffer.
  523                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 42; ;
  524                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 43; ; ***************************************************************************
  525                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 44; ; **************************************************************************/
  526                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 46; // *************
  527                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 47; // Functions in hucc-string.asm ...
  528                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 48; // *************
  529                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 50; #ifdef __HUCC__
  530                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 52; #asmdef	HUCC_USES_STRING 1
  531               0001     	HUCC_USES_STRING = 1
  532                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 54; extern void __fastcall strcpy( char *destination<_di>, char *source<_bp> );
  533                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 55; extern void __fastcall strcat( char *destination<_di>, char *source<_bp> );
  534                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 57; extern unsigned int __fastcall strlen( char *source<_bp> );
  535                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 59; extern unsigned int __fastcall strlcpy( char *destination<_di>, char *source<_bp>, unsigned char size<acc> );
  536                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 60; extern unsigned int __fastcall strlcat( char *destination<_di>, char *source<_bp>, unsigned char size<acc> );
  537                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 62; extern void __fastcall memcpy( unsigned char *destination<ram_tii_dst>, unsigned char *source<ram_tii_src>, unsigned int count<acc> );
  538                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 63; extern void __fastcall farmemcpy( unsigned char *destination<ram_tii_dst>, unsigned char __far *source<_bp_bank:ram_tii_src>, unsigned int count<acc> );
  539                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 64; extern void __fastcall far_memcpy( unsigned char *destination<ram_tii_dst>, unsigned int count<acc> );
  540                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 66; extern unsigned char * __fastcall mempcpy( unsigned char *destination<ram_tii_dst>, unsigned char *source<ram_tii_src>, unsigned int count<acc> );
  541                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 67; extern unsigned char * __fastcall farmempcpy( unsigned char *destination<ram_tii_dst>, unsigned char __far *source<_bp_bank:ram_tii_src>, unsigned int count<acc> );
  542                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 68; extern unsigned char * __fastcall far_mempcpy( unsigned char *destination<ram_tii_dst>, unsigned int count<acc> );
  543                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 70; extern void __fastcall memset( unsigned char *destination<ram_tii_src>, unsigned char value<_al>, unsigned int count<acc> );
  544                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 72; //  0 	if strings are equal
  545                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 73; //  1 	if the first non-matching character in string1 > string2 (in ASCII).
  546                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 74; // -1 	if the first non-matching character in string1 < string2 (in ASCII).
  547                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 76; extern int __fastcall strcmp( char *string1<_di>, char *string2<_bp> );
  548                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 77; extern int __fastcall strncmp( char *string1<_di>, char *string2<_bp>, unsigned int count<_ax> );
  549                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 79; extern int __fastcall __macro memcmp( unsigned char *string1<_di>, unsigned char *string2<_bp>, unsigned int count<acc> );
  550                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 80; extern int __fastcall farmemcmp( unsigned char *string1<_di>, unsigned char __far *string2<_bp_bank:_bp>, unsigned int count<acc> );
  551                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 81; extern int __fastcall far_memcmp( unsigned char *string1<_di>, unsigned int count<acc> );
  552                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 83; #endif // __HUCC__
  553                        		.dbg	line,	"..\..\..\include\hucc\hucc-string.h", 85; #endif // _hucc_string_h
  554                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
  555                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 1; #ifndef _hucc_old_scroll_h
  556                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 2; #define _hucc_old_scroll_h
  557                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 4; /****************************************************************************
  558                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 5; ; ***************************************************************************
  559                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 6; ;
  560                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 7; ; hucc-old-scroll.h
  561                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 8; ;
  562                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 9; ; Based on the original HuC and MagicKit functions by David Michel and the
  563                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 10; ; other original HuC developers.
  564                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 11; ;
  565                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 12; ; Modifications copyright John Brandwood 2024.
  566                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 13; ;
  567                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 14; ; Distributed under the Boost Software License, Version 1.0.
  568                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 15; ; (See accompanying file LICENSE_1_0.txt or copy at
  569                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 16; ;  http://www.boost.org/LICENSE_1_0.txt)
  570                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 17; ;
  571                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 18; ; ***************************************************************************
  572                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 19; ; ***************************************************************************
  573                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 20; ;
  574                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 21; ; HuC's old scrolling library is provided for use with existing HuC projects,
  575                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 22; ; but it should preferably be avoided in new projects because it is slow and
  576                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 23; ; forever limited by its choice to handle gaps between areas, and sorting.
  577                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 24; ;
  578                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 25; ; HuCC's new scrolling library puts the responibility for defining both gaps
  579                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 26; ; and the display order into the project's hands, but in return it runs much
  580                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 27; ; faster, using less than 1/6 of the processing time in VBLANK, and far less
  581                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 28; ; time in the RCR interrputs themselves. It also supports the 2nd SuperGRAFX
  582                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 29; ; screen layer, which HuC's old scrolling library ignores.
  583                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 30; ;
  584                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 31; ; ***************************************************************************
  585                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 32; ; **************************************************************************/
  586                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 34; // *************
  587                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 35; // Functions in hucc-old-scroll.asm ...
  588                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 36; // *************
  589                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 38; #ifdef __HUCC__
  590                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 40; #asmdef	HUCC_USES_OLD_SCROLL 1
  591               0001     	HUCC_USES_OLD_SCROLL = 1
  592                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 42; extern void __fastcall scroll( unsigned char num<_al>, unsigned int x<_cx>, unsigned int y<_dx>, unsigned char top<_ah>, unsigned char bottom<_bl>, unsigned char disp<acc> );
  593                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 43; extern void __fastcall scroll_disable( unsigned char num<acc> );
  594                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 45; #endif // __HUCC__
  595                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-scroll.h", 47; #endif // _hucc_old_scroll_h
  596                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
  597                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 1; #ifndef _hucc_old_spr_h
  598                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 2; #define _hucc_old_spr_h
  599                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 4; /****************************************************************************
  600                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 5; ; ***************************************************************************
  601                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 6; ;
  602                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 7; ; hucc-old-spr.h
  603                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 8; ;
  604                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 9; ; Based on the original HuC and MagicKit functions by David Michel and the
  605                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 10; ; other original HuC developers.
  606                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 11; ;
  607                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 12; ; Modifications copyright John Brandwood 2024.
  608                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 13; ;
  609                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 14; ; Distributed under the Boost Software License, Version 1.0.
  610                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 15; ; (See accompanying file LICENSE_1_0.txt or copy at
  611                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 16; ;  http://www.boost.org/LICENSE_1_0.txt)
  612                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 17; ;
  613                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 18; ; ***************************************************************************
  614                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 19; ; **************************************************************************/
  615                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 21; // *************
  616                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 22; // Sprite defines ...
  617                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 23; // *************
  618                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 25; #define FLIP_X_MASK 0x08
  619                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 26; #define FLIP_Y_MASK 0x80
  620                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 27; #define FLIP_MAS    0x88
  621                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 28; #define SIZE_MAS    0x31
  622                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 30; #define NO_FLIP     0x00
  623                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 31; #define NO_FLIP_X   0x00
  624                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 32; #define NO_FLIP_Y   0x00
  625                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 33; #define FLIP_X      0x08
  626                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 34; #define FLIP_Y      0x80
  627                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 35; #define SZ_16x16    0x00
  628                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 36; #define SZ_16x32    0x10
  629                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 37; #define SZ_16x64    0x30
  630                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 38; #define SZ_32x16    0x01
  631                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 39; #define SZ_32x32    0x11
  632                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 40; #define	SZ_32x64    0x31
  633                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 42; // *************
  634                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 43; // Functions in hucc-old-spr.asm ...
  635                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 44; // *************
  636                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 46; #ifdef __HUCC__
  637                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 48; #asmdef	HUCC_USES_OLD_SPR 1
  638               0001     	HUCC_USES_OLD_SPR = 1
  639                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 50; extern void __fastcall init_satb( void );
  640                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 51; extern void __fastcall reset_satb( void );
  641                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 52; extern void __fastcall satb_update( void );
  642                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 53; extern void __fastcall spr_set( unsigned char num<acc> );
  643                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 54; extern void __fastcall spr_hide( void );
  644                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 55; extern void __fastcall spr_show( void );
  645                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 56; extern void __fastcall spr_x( unsigned int value<acc> );
  646                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 57; extern void __fastcall spr_y( unsigned int value<acc> );
  647                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 58; extern void __fastcall spr_pattern( unsigned int vaddr<acc> );
  648                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 59; extern void __fastcall spr_ctrl( unsigned char mask<_al>, unsigned char value<acc> );
  649                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 60; extern void __fastcall spr_pal( unsigned char palette<acc> );
  650                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 61; extern void __fastcall spr_pri( unsigned char priority<acc> );
  651                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 63; extern unsigned int __fastcall spr_get_x( void );
  652                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 64; extern unsigned int __fastcall spr_get_y( void );
  653                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 66; extern void __fastcall sgx_init_satb( void );
  654                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 67; extern void __fastcall sgx_reset_satb( void );
  655                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 68; extern void __fastcall sgx_satb_update( void );
  656                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 69; extern void __fastcall sgx_spr_set( unsigned char num<acc> );
  657                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 70; extern void __fastcall sgx_spr_hide( void );
  658                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 71; extern void __fastcall sgx_spr_show( void );
  659                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 72; extern void __fastcall sgx_spr_x( unsigned int value<acc> );
  660                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 73; extern void __fastcall sgx_spr_y( unsigned int value<acc> );
  661                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 74; extern void __fastcall sgx_spr_pattern( unsigned int vaddr<acc> );
  662                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 75; extern void __fastcall sgx_spr_ctrl( unsigned char mask<_al>, unsigned char value<acc> );
  663                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 76; extern void __fastcall sgx_spr_pal( unsigned char palette<acc> );
  664                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 77; extern void __fastcall sgx_spr_pri( unsigned char priority<acc> );
  665                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 79; extern unsigned int __fastcall sgx_spr_get_x( void );
  666                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 80; extern unsigned int __fastcall sgx_spr_get_y( void );
  667                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 82; #endif // __HUCC__
  668                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-spr.h", 84; #endif // _hucc_old_spr_h
  669                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
  670                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 1; #ifndef _hucc_old_map_h
  671                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 2; #define _hucc_old_map_h
  672                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 4; /****************************************************************************
  673                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 5; ; ***************************************************************************
  674                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 6; ;
  675                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 7; ; hucc-old-map.h
  676                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 8; ;
  677                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 9; ; Based on the original HuC and MagicKit functions by David Michel and the
  678                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 10; ; other original HuC developers.
  679                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 11; ;
  680                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 12; ; Modifications copyright John Brandwood 2024.
  681                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 13; ;
  682                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 14; ; Distributed under the Boost Software License, Version 1.0.
  683                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 15; ; (See accompanying file LICENSE_1_0.txt or copy at
  684                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 16; ;  http://www.boost.org/LICENSE_1_0.txt)
  685                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 17; ;
  686                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 18; ; ***************************************************************************
  687                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 19; ; **************************************************************************/
  688                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 21; // *************
  689                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 22; // Functions in hucc-old-map.asm ...
  690                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 23; // *************
  691                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 25; #ifdef __HUCC__
  692                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 27; #asmdef	HUCC_USES_OLD_MAP 1
  693               0001     	HUCC_USES_OLD_MAP = 1
  694                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 29; extern void __fastcall set_tile_address( unsigned int vram<_di> );
  695                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 30; extern void __fastcall sgx_set_tile_address( unsigned int vram<_di> );
  696                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 32; extern void __fastcall __nop set_tile_data( unsigned char __far *tiles<vdc_tile_bank:vdc_tile_addr>, unsigned char num_tiles<vdc_num_tiles>, unsigned char __far *palette_table<vdc_attr_bank:vdc_attr_addr>, unsigned char tile_type<vdc_tile_type> );
  697                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 33; extern void __fastcall __nop sgx_set_tile_data( unsigned char __far *tiles<sgx_tile_bank:sgx_tile_addr>, unsigned char num_tiles<sgx_num_tiles>, unsigned char __far *palette_table<sgx_attr_bank:sgx_attr_addr>, unsigned char tile_type<sgx_tile_type> );
  698                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 35; extern void __fastcall __nop set_far_tile_data( unsigned char tile_bank<vdc_tile_bank>, unsigned char *tile_addr<vdc_tile_addr>, unsigned char num_tiles<vdc_num_tiles>, unsigned char palette_table_bank<vdc_attr_bank>, unsigned char *palette_table_addr<vdc_attr_addr>, unsigned char tile_type<vdc_tile_type> );
  699                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 36; extern void __fastcall __nop sgx_set_far_tile_data( unsigned char tile_bank<sgx_tile_bank>, unsigned char *tile_addr<sgx_tile_addr>, unsigned char num_tiles<sgx_num_tiles>, unsigned char palette_table_bank<sgx_attr_bank>, unsigned char *palette_table_addr<sgx_attr_addr>, unsigned char tile_type<sgx_tile_type> );
  700                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 38; extern void __fastcall __nop set_map_data( unsigned char __far *map<vdc_map_bank:vdc_map_addr>, unsigned char w<vdc_map_width>, unsigned char h<vdc_map_height> );
  701                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 39; extern void __fastcall __nop sgx_set_map_data( unsigned char __far *map<sgx_map_bank:sgx_map_addr>, unsigned char w<sgx_map_width>, unsigned char h<sgx_map_height> );
  702                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 41; extern void __fastcall __nop set_far_map_data( unsigned char map_bank<vdc_map_bank>, unsigned char *map_addr<vdc_map_addr>, unsigned char w<vdc_map_width>, unsigned char h<vdc_map_height> );
  703                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 42; extern void __fastcall __nop sgx_set_far_map_data( unsigned char map_bank<vdc_map_bank>, unsigned char *map_addr<vdc_map_addr>, unsigned char w<sgx_map_width>, unsigned char h<sgx_map_height> );
  704                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 44; extern void __fastcall load_tile( unsigned int vram<_di> );
  705                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 45; extern void __fastcall sgx_load_tile( unsigned int vram<_di> );
  706                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 47; extern void __fastcall load_map( unsigned char bat_x<_al>, unsigned char bat_y<_ah>, int map_x<_bx>, int map_y<_dx>, unsigned char tiles_w<_cl>, unsigned char tiles_h<_ch> );
  707                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 48; extern void __fastcall sgx_load_map( unsigned char bat_x<_al>, unsigned char bat_y<_ah>, int map_x<_bx>, int map_y<_dx>, unsigned char tiles_w<_cl>, unsigned char tiles_h<_ch> );
  708                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 50; extern unsigned char __fastcall map_get_tile( unsigned char map_x<_bl>, unsigned char map_y<_bh> );
  709                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 51; extern unsigned char __fastcall sgx_map_get_tile( unsigned char map_x<_bl>, unsigned char map_y<_bh> );
  710                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 53; extern void __fastcall map_put_tile( unsigned char map_x<_bl>, unsigned char map_y<_bh>, unsigned char tile<_al> );
  711                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 54; extern void __fastcall sgx_map_put_tile( unsigned char map_x<_bl>, unsigned char map_y<_bh>, unsigned char tile<_al> );
  712                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 56; extern void __fastcall put_tile( unsigned char tile<_bl>, unsigned char bat_x<_al>, unsigned char bat_y<_ah> );
  713                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 57; extern void __fastcall sgx_put_tile( unsigned char tile<_bl>, unsigned char bat_x<_al>, unsigned char bat_y<_ah> );
  714                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 59; // Deprecated functions ...
  715                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 61; extern void __fastcall set_tile_data( unsigned char *tile_ex<_di> );
  716                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 63; extern void __fastcall __nop set_map_pals( unsigned char __far *palette_table<vdc_attr_bank:vdc_attr_addr> );
  717                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 64; extern void __fastcall __nop set_map_tile_type( unsigned char tile_type<vdc_tile_type> );
  718                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 66; extern void __fastcall __nop sgx_set_map_pals( unsigned char __far *palette_table<sgx_attr_bank:sgx_attr_addr> );
  719                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 67; extern void __fastcall __nop sgx_set_map_tile_type( unsigned char tile_type<sgx_tile_type> );
  720                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 69; extern void __fastcall set_map_tile_base( unsigned int vram<_di> );
  721                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 70; extern void __fastcall sgx_set_map_tile_base( unsigned int vram<_di> );
  722                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 72; #endif // __HUCC__
  723                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-map.h", 74; #endif // _hucc_old_map_h
  724                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
  725                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 1; #ifndef _hucc_old_line_h
  726                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 2; #define _hucc_old_line_h
  727                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 4; /****************************************************************************
  728                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 5; ; ***************************************************************************
  729                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 6; ;
  730                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 7; ; hucc-old-line.h
  731                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 8; ;
  732                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 9; ; Based on the original HuC and MagicKit functions by David Michel and the
  733                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 10; ; other original HuC developers.
  734                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 11; ;
  735                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 12; ; Modifications copyright John Brandwood 2024.
  736                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 13; ;
  737                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 14; ; Distributed under the Boost Software License, Version 1.0.
  738                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 15; ; (See accompanying file LICENSE_1_0.txt or copy at
  739                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 16; ;  http://www.boost.org/LICENSE_1_0.txt)
  740                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 17; ;
  741                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 18; ; ***************************************************************************
  742                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 19; ; **************************************************************************/
  743                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 21; // *************
  744                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 22; // Functions in hucc-old-line.asm ...
  745                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 23; // *************
  746                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 25; #ifdef __HUCC__
  747                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 27; #asmdef	HUCC_USES_OLD_LINE 1
  748               0001     	HUCC_USES_OLD_LINE = 1
  749                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 29; extern void __fastcall gfx_init( unsigned int start_vram_addr<_ax> );
  750                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 30; extern void __fastcall gfx_clear( unsigned int start_vram_addr<_di> );
  751                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 31; extern void __fastcall gfx_plot( unsigned int x<_gfx_x1>, unsigned int y<_gfx_y1>, char color<_gfx_color> );
  752                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 32; extern void __fastcall gfx_line( unsigned int x1<_gfx_x1>, unsigned int y1<_gfx_y1>, unsigned int x2<_gfx_x2>, unsigned int y2<_gfx_y2>, unsigned char color<_gfx_color> );
  753                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 34; #endif // __HUCC__
  754                        		.dbg	line,	"..\..\..\include\hucc\hucc-old-line.h", 36; #endif // _hucc_old_line_h
  755                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
  756                        		.dbg	line,	"main.c", 1; #include "huc.h"
  757                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
  758                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
  759                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
  760                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
  761                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
  762                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
  763                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
  764                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
  765                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
  766                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
  767                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
  768                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
  769                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
  770                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
  771                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
  772                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
  773                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
  774                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
  775                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
  776                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
  777                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
  778                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
  779                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
  780                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
  781                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
  782                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
  783                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
  784                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
  785                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
  786                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
  787                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
  788                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
  789                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
  790                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
  791                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
  792                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
  793                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
  794                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
  795                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
  796                        		.dbg	line,	"main.c", 2; #include "hucc-scroll.h"
  797                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 1; #ifndef _hucc_scroll_h
  798                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 2; #define _hucc_scroll_h
  799                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 4; /****************************************************************************
  800                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 5; ; ***************************************************************************
  801                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 6; ;
  802                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 7; ; hucc-scroll.h
  803                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 8; ;
  804                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 9; ; Routines for a fast split-screen scrolling system.
  805                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 10; ;
  806                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 11; ; Copyright John Brandwood 2024.
  807                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 12; ;
  808                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 13; ; Distributed under the Boost Software License, Version 1.0.
  809                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
  810                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
  811                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 16; ;
  812                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 17; ; ***************************************************************************
  813                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 18; ; ***************************************************************************
  814                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 19; ;
  815                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 20; ; The maximum number of splits for each screen layer is set in your project's
  816                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 21; ; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
  817                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 22; ;
  818                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 23; ; Your first active split must be defined to start at screen line 0, and then
  819                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 24; ; the rest of the active splits must be in increasing line order to match the
  820                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 25; ; way that the PC Engine displays the output image.
  821                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 26; ;
  822                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 27; ; You can have disabled splits interleaved with your active splits.
  823                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 28; ;
  824                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 29; ; Splits that are normally disabled can be used to create full screen effects
  825                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 30; ; such as bouncing the screen up and down by adding blank areas at the top or
  826                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 31; ; bottom of the screen, and then rapidly changing the height of those areas.
  827                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 32; ;
  828                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 33; ; ***************************************************************************
  829                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 34; ; **************************************************************************/
  830                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 36; // *************
  831                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 37; // VDC bits for display_flags ...
  832                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 38; // *************
  833                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 40; #ifndef BKG_OFF
  834                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 41; #define BKG_OFF 0x00
  835                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 42; #endif
  836                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 44; #ifndef SPR_OFF
  837                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 45; #define SPR_OFF 0x00
  838                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 46; #endif
  839                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 48; #ifndef BKG_ON
  840                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 49; #define BKG_ON 0x80
  841                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 50; #endif
  842                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 52; #ifndef SPR_ON
  843                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 53; #define SPR_ON 0x40
  844                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 54; #endif
  845                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 56; // *************
  846                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 57; // Functions in hucc-scroll.asm ...
  847                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 58; // *************
  848                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 60; #ifdef __HUCC__
  849                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 62; #asmdef	HUCC_USES_NEW_SCROLL 1
  850               0001     	HUCC_USES_NEW_SCROLL = 1
  851                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 64; extern void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
  852                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 65; extern void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
  853                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 67; extern void __fastcall disable_split( unsigned char index<acc> );
  854                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 68; extern void __fastcall sgx_disable_split( unsigned char index<acc> );
  855                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 70; extern void __fastcall __macro disable_all_splits( void );
  856                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 71; extern void __fastcall __macro sgx_disable_all_splits( void );
  857                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 73; #asm
  858                        		.dbg	clear
  859                        			.macro	_disable_all_splits
  860                        			ldy	#HUCC_PCE_SPLITS - 1
  861                        	!loop:		tya
  862                        			call	_disable_split.1
  863                        			dey
  864                        			bpl	!loop-
  865                        			.endm
  866                        			.macro	_sgx_disable_all_splits
  867                        			ldy	#HUCC_SGX_SPLITS - 1
  868                        	!loop:		tya
  869                        			call	_sgx_disable_split.1
  870                        			dey
  871                        			bpl	!loop-
  872                        			.endm
  873                        	
  874                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 89; #endasm
  875                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 91; #endif // __HUCC__
  876                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 93; #endif // _hucc_scroll_h
  877                        		.dbg	line,	"main.c", 3; #include "hucc-chrmap.h"
  878                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 1; #ifndef _hucc_chrmap_h
  879                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 2; #define _hucc_chrmap_h
  880                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 4; /****************************************************************************
  881                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 5; ; ***************************************************************************
  882                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 6; ;
  883                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 7; ; hucc-chrmap.h
  884                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 8; ;
  885                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 9; ; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
  886                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 10; ;
  887                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 11; ; Copyright John Brandwood 2025.
  888                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 12; ;
  889                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
  890                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
  891                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
  892                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 16; ;
  893                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 17; ; ***************************************************************************
  894                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 18; ; ***************************************************************************
  895                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 19; ;
  896                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 20; ; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
  897                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 21; ;
  898                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 22; ; The maximum total size for a chrmap is 16KBytes, which allows for maps up
  899                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 23; ; to 256x32 tiles (2048x256 pixels).
  900                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 24; ;
  901                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 25; ; ***************************************************************************
  902                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 26; ; **************************************************************************/
  903                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 28; // *************
  904                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 29; // This code extends the blkmap library ...
  905                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 30; // *************
  906                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 32; #include "hucc-blkmap.h"
  907                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
  908                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
  909                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
  910                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
  911                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
  912                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
  913                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
  914                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
  915                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
  916                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
  917                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
  918                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
  919                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
  920                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
  921                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
  922                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
  923                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
  924                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
  925                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
  926                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
  927                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
  928                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
  929                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
  930                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
  931                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
  932                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
  933                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
  934                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
  935                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
  936                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
  937                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
  938                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
  939                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
  940                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
  941                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
  942                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
  943                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
  944               0001     	HUCC_USES_BLKMAP = 1
  945                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
  946                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
  947                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
  948                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
  949                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
  950                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
  951                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
  952                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
  953                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
  954                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
  955                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
  956                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
  957                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
  958                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
  959                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
  960                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
  961                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
  962                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
  963                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
  964                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
  965                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
  966                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
  967                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
  968                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
  969                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
  970                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
  971                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
  972                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
  973                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
  974                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
  975                        		.dbg	clear
  976                        			.macro	_set_blkmap.2
  977                        			stz	vdc_scr_bank
  978                        			.endm
  979                        			.macro	_set_multimap.2
  980                        			lda	vdc_bat_width
  981                        			lsr	a
  982                        			sta	vdc_map_line_w
  983                        			.endm
  984                        			.macro	SCREEN
  985                        			db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
  986                        			db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
  987                        			db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
  988                        			dw	(\4)
  989                        			.endm
  990                        	
  991                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
  992                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
  993                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
  994                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
  995                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
  996                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
  997                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
  998                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
  999                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
 1000                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
 1001                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
 1002                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
 1003                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
 1004                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
 1005                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
 1006                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
 1007                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
 1008                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
 1009                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
 1010                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
 1011                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
 1012                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
 1013                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
 1014                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
 1015                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
 1016                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1017                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 1018                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
 1019                        		.dbg	clear
 1020                        			.macro	_sgx_set_blkmap.2
 1021                        			stz	sgx_scr_bank
 1022                        			.endm
 1023                        			.macro	_sgx_set_multimap.2
 1024                        			lda	sgx_bat_width
 1025                        			lsr	a
 1026                        			sta	sgx_map_line_w
 1027                        			.endm
 1028                        	
 1029                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
 1030                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
 1031                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
 1032                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
 1033                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 34; // *************
 1034                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 35; // Functions in chrmap.asm ...
 1035                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 36; // *************
 1036                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 38; #ifdef __HUCC__
 1037                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 40; #asmdef	HUCC_USES_CHRMAP 1
 1038               0001     	HUCC_USES_CHRMAP = 1
 1039                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 42; extern void __fastcall __nop set_chrmap( unsigned char __far *chrmap<vdc_map_bank:vdc_map_addr>, unsigned char tiles_w<vdc_map_line_w> );
 1040                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 44; extern void __fastcall draw_bat( void );
 1041                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 45; extern void __fastcall scroll_bat( void );
 1042                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 47; extern void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1043                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 49; #ifdef _SGX
 1044                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 51; extern void __fastcall __nop sgx_set_chrmap( unsigned char __far *chrmap<sgx_map_bank:sgx_map_addr>, unsigned char tiles_w<sgx_map_line_w> );
 1045                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 53; extern void __fastcall sgx_draw_bat( void );
 1046                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 54; extern void __fastcall sgx_scroll_bat( void );
 1047                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 56; extern void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1048                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 58; #endif
 1049                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 60; #endif // __HUCC__
 1050                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 62; #endif // _hucc_chrmap_h
 1051                        		.dbg	line,	"main.c", 4; #include "hucc-blkmap.h"
 1052                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
 1053                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
 1054                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
 1055                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
 1056                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
 1057                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
 1058                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
 1059                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
 1060                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
 1061                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
 1062                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
 1063                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1064                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1065                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1066                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
 1067                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
 1068                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
 1069                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
 1070                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
 1071                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
 1072                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
 1073                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
 1074                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
 1075                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
 1076                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
 1077                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
 1078                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
 1079                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
 1080                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
 1081                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
 1082                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
 1083                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
 1084                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
 1085                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
 1086                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
 1087                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
 1088                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
 1089                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
 1090                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
 1091                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
 1092                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
 1093                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
 1094                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
 1095                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
 1096                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
 1097                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
 1098                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
 1099                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
 1100                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
 1101                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
 1102                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
 1103                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
 1104                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
 1105                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
 1106                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
 1107                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
 1108                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
 1109                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
 1110                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
 1111                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
 1112                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
 1113                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
 1114                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
 1115                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
 1116                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1117                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 1118                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
 1119                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 86; .macro	_set_blkmap.2
 1120                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 87; stz	vdc_scr_bank
 1121                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 88; .endm
 1122                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 90; .macro	_set_multimap.2
 1123                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 91; lda	vdc_bat_width
 1124                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 92; lsr	a
 1125                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 93; sta	vdc_map_line_w
 1126                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 94; .endm
 1127                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 96; .macro	SCREEN
 1128                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 97; db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
 1129                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 98; db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
 1130                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 99; db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
 1131                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 100; dw	(\4)
 1132                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 101; .endm
 1133                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
 1134                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
 1135                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
 1136                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
 1137                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
 1138                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
 1139                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
 1140                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
 1141                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
 1142                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
 1143                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
 1144                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
 1145                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
 1146                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
 1147                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
 1148                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
 1149                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
 1150                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
 1151                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
 1152                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
 1153                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
 1154                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
 1155                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
 1156                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
 1157                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
 1158                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1159                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 1160                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
 1161                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 144; .macro	_sgx_set_blkmap.2
 1162                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 145; stz	sgx_scr_bank
 1163                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 146; .endm
 1164                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 148; .macro	_sgx_set_multimap.2
 1165                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 149; lda	sgx_bat_width
 1166                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 150; lsr	a
 1167                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 151; sta	sgx_map_line_w
 1168                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 152; .endm
 1169                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
 1170                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
 1171                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
 1172                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
 1173                        		.dbg	line,	"main.c", 7; #include "include/constants.c"
 1174                        		.dbg	line,	"include\constants.c", 1; //*****************************************************************************//
 1175                        		.dbg	line,	"include\constants.c", 2; //                                                                             //
 1176                        		.dbg	line,	"include\constants.c", 3; //                                SYSTEM CONSTANTS                             //
 1177                        		.dbg	line,	"include\constants.c", 4; //                                                                             //
 1178                        		.dbg	line,	"include\constants.c", 5; //*****************************************************************************//
 1179                        		.dbg	line,	"include\constants.c", 7; #define FALSE 0
 1180                        		.dbg	line,	"include\constants.c", 8; #define TRUE  1
 1181                        		.dbg	line,	"include\constants.c", 10; #define YES   1
 1182                        		.dbg	line,	"include\constants.c", 11; #define NO    2
 1183                        		.dbg	line,	"include\constants.c", 13; #define JOYPAD_1 0
 1184                        		.dbg	line,	"include\constants.c", 14; #define JOYPAD_2 1
 1185                        		.dbg	line,	"include\constants.c", 16; #define BAT_SIZE_W 2048 // IN PIXELS
 1186                        		.dbg	line,	"include\constants.c", 17; #define BAT_SIZE_H 256  // IN PIXELS
 1187                        		.dbg	line,	"include\constants.c", 19; #define NUMBERS_FONT_VRAM_ADR   0x0900
 1188                        		.dbg	line,	"include\constants.c", 21; #define JOY_DIR_PRESSED (JOY_DOWN | JOY_UP | JOY_RIGHT | JOY_LEFT)
 1189                        		.dbg	line,	"include\constants.c", 24; #define TILES_1   16
 1190                        		.dbg	line,	"include\constants.c", 25; #define TILES_2   32
 1191                        		.dbg	line,	"include\constants.c", 26; #define TILES_3   48
 1192                        		.dbg	line,	"include\constants.c", 27; #define TILES_4   64
 1193                        		.dbg	line,	"include\constants.c", 28; #define TILES_8   128
 1194                        		.dbg	line,	"include\constants.c", 29; #define TILES_12  192
 1195                        		.dbg	line,	"include\constants.c", 30; #define TILES_16  256
 1196                        		.dbg	line,	"include\constants.c", 31; #define TILES_24  384
 1197                        		.dbg	line,	"include\constants.c", 32; #define TILES_32  512
 1198                        		.dbg	line,	"include\constants.c", 33; #define TILES_48  768
 1199                        		.dbg	line,	"include\constants.c", 34; #define TILES_64  1024
 1200                        		.dbg	line,	"include\constants.c", 35; #define TILES_80  1280
 1201                        		.dbg	line,	"include\constants.c", 36; #define TILES_96  1536
 1202                        		.dbg	line,	"include\constants.c", 37; #define TILES_144 2304
 1203                        		.dbg	line,	"include\constants.c", 38; #define TILES_160 2560
 1204                        		.dbg	line,	"include\constants.c", 39; #define TILES_400 6400
 1205                        		.dbg	line,	"include\constants.c", 44; #define SEQUENCE_TITLE      0
 1206                        		.dbg	line,	"include\constants.c", 45; #define SEQUENCE_INTRO      1
 1207                        		.dbg	line,	"include\constants.c", 46; #define SEQUENCE_GAME       2
 1208                        		.dbg	line,	"include\constants.c", 47; #define SEQUENCE_NPC        3
 1209                        		.dbg	line,	"include\constants.c", 48; #define SEQUENCE_SHOP       4
 1210                        		.dbg	line,	"include\constants.c", 51; #define CAMERA_RECENTER_VELOCITY    4
 1211                        		.dbg	line,	"include\constants.c", 56; //-----------------------------------------------------------------------------//
 1212                        		.dbg	line,	"include\constants.c", 57; //                                                                             //
 1213                        		.dbg	line,	"include\constants.c", 58; //                                   PLAYER                                    //
 1214                        		.dbg	line,	"include\constants.c", 59; //                                                                             //
 1215                        		.dbg	line,	"include\constants.c", 60; //-----------------------------------------------------------------------------//
 1216                        		.dbg	line,	"include\constants.c", 62; #define AXIS_RIGHT          0
 1217                        		.dbg	line,	"include\constants.c", 63; #define AXIS_LEFT           1
 1218                        		.dbg	line,	"include\constants.c", 64; #define AXIS_UP             2
 1219                        		.dbg	line,	"include\constants.c", 65; #define AXIS_DOWN           3
 1220                        		.dbg	line,	"include\constants.c", 69; #define STATE_IDLE          0
 1221                        		.dbg	line,	"include\constants.c", 70; #define STATE_WALK          1
 1222                        		.dbg	line,	"include\constants.c", 71; #define STATE_ATTACK        2
 1223                        		.dbg	line,	"include\constants.c", 72; #define STATE_JUMP          4
 1224                        		.dbg	line,	"include\constants.c", 73; #define STATE_JUMP_RIGHT    5
 1225                        		.dbg	line,	"include\constants.c", 74; #define STATE_JUMP_LEFT     6
 1226                        		.dbg	line,	"include\constants.c", 75; #define STATE_CROUCH        7
 1227                        		.dbg	line,	"include\constants.c", 76; #define STATE_CROUCH_ATTACK 8
 1228                        		.dbg	line,	"include\constants.c", 77; #define STATE_FALL          9
 1229                        		.dbg	line,	"include\constants.c", 78; #define STATE_HANG          10
 1230                        		.dbg	line,	"include\constants.c", 79; #define STATE_CLIMB_UP      11
 1231                        		.dbg	line,	"include\constants.c", 80; #define STATE_CLIMB_DOWN    12
 1232                        		.dbg	line,	"include\constants.c", 81; #define STATE_JUMP_LADDER   13
 1233                        		.dbg	line,	"include\constants.c", 82; #define STATE_HANG_ATTACK   14
 1234                        		.dbg	line,	"include\constants.c", 87; #define PLAYER_BASE_Y_POS   128
 1235                        		.dbg	line,	"include\constants.c", 89; #define RESPAWN_DEAD        1
 1236                        		.dbg	line,	"include\constants.c", 90; #define RESPAWN_SHOP        2
 1237                        		.dbg	line,	"include\constants.c", 92; #define PLAYER_START_INDEX  14
 1238                        		.dbg	line,	"include\constants.c", 96; #define PLAYER_VRAM_ADR                     0x1400
 1239                        		.dbg	line,	"include\constants.c", 97; #define PLAYER_IDLE_VRAM_ADR                PLAYER_VRAM_ADR
 1240                        		.dbg	line,	"include\constants.c", 98; #define PLAYER_WALK_1_VRAM_ADR              PLAYER_VRAM_ADR+TILES_16
 1241                        		.dbg	line,	"include\constants.c", 99; #define PLAYER_WALK_2_VRAM_ADR              PLAYER_WALK_1_VRAM_ADR+TILES_16
 1242                        		.dbg	line,	"include\constants.c", 100; #define PLAYER_WALK_3_VRAM_ADR              PLAYER_WALK_2_VRAM_ADR+TILES_16
 1243                        		.dbg	line,	"include\constants.c", 101; #define PLAYER_WALK_4_VRAM_ADR              PLAYER_WALK_3_VRAM_ADR+TILES_16
 1244                        		.dbg	line,	"include\constants.c", 102; #define PLAYER_WALK_5_VRAM_ADR              PLAYER_WALK_4_VRAM_ADR+TILES_16
 1245                        		.dbg	line,	"include\constants.c", 103; #define PLAYER_WALK_6_VRAM_ADR              PLAYER_WALK_5_VRAM_ADR+TILES_16
 1246                        		.dbg	line,	"include\constants.c", 105; #define PLAYER_JUMP_VRAM_ADR                PLAYER_WALK_6_VRAM_ADR+TILES_16
 1247                        		.dbg	line,	"include\constants.c", 106; #define PLAYER_CROUCH_VRAM_ADR              PLAYER_JUMP_VRAM_ADR+TILES_16
 1248                        		.dbg	line,	"include\constants.c", 107; #define PLAYER_HANG_VRAM_ADR                PLAYER_CROUCH_VRAM_ADR+TILES_16
 1249                        		.dbg	line,	"include\constants.c", 109; #define PLAYER_CLIMB_1_VRAM_ADR             PLAYER_HANG_VRAM_ADR+TILES_16
 1250                        		.dbg	line,	"include\constants.c", 110; #define PLAYER_CLIMB_2_VRAM_ADR             PLAYER_CLIMB_1_VRAM_ADR+TILES_16
 1251                        		.dbg	line,	"include\constants.c", 111; #define PLAYER_CLIMB_3_VRAM_ADR             PLAYER_CLIMB_2_VRAM_ADR+TILES_16
 1252                        		.dbg	line,	"include\constants.c", 112; #define PLAYER_CLIMB_4_VRAM_ADR             PLAYER_CLIMB_3_VRAM_ADR+TILES_16
 1253                        		.dbg	line,	"include\constants.c", 113; #define PLAYER_CLIMB_5_VRAM_ADR             PLAYER_CLIMB_4_VRAM_ADR+TILES_16
 1254                        		.dbg	line,	"include\constants.c", 114; #define PLAYER_CLIMB_6_VRAM_ADR             PLAYER_CLIMB_5_VRAM_ADR+TILES_16
 1255                        		.dbg	line,	"include\constants.c", 116; #define PLAYER_FALL_VRAM_ADR                PLAYER_CLIMB_6_VRAM_ADR+TILES_16
 1256                        		.dbg	line,	"include\constants.c", 118; #define PLAYER_ATTACK_1_VRAM_ADR            PLAYER_FALL_VRAM_ADR+TILES_16
 1257                        		.dbg	line,	"include\constants.c", 119; #define PLAYER_ATTACK_2_VRAM_ADR            PLAYER_ATTACK_1_VRAM_ADR+TILES_16
 1258                        		.dbg	line,	"include\constants.c", 121; #define PLAYER_CROUCH_ATTACK_1_VRAM_ADR     PLAYER_ATTACK_2_VRAM_ADR+TILES_16
 1259                        		.dbg	line,	"include\constants.c", 122; #define PLAYER_CROUCH_ATTACK_2_VRAM_ADR     PLAYER_CROUCH_ATTACK_1_VRAM_ADR+TILES_16
 1260                        		.dbg	line,	"include\constants.c", 124; #define PLAYER_JUMP_ATTACK_1_VRAM_ADR       PLAYER_CROUCH_ATTACK_2_VRAM_ADR+TILES_16
 1261                        		.dbg	line,	"include\constants.c", 125; #define PLAYER_JUMP_ATTACK_2_VRAM_ADR       PLAYER_JUMP_ATTACK_1_VRAM_ADR+TILES_16
 1262                        		.dbg	line,	"include\constants.c", 127; #define PLAYER_HANG_ATTACK_1_VRAM_ADR       PLAYER_JUMP_ATTACK_2_VRAM_ADR+TILES_16
 1263                        		.dbg	line,	"include\constants.c", 128; #define PLAYER_HANG_ATTACK_2_VRAM_ADR       PLAYER_HANG_ATTACK_1_VRAM_ADR+TILES_16
 1264                        		.dbg	line,	"include\constants.c", 133; //-----------------------------------------------------------------------------//
 1265                        		.dbg	line,	"include\constants.c", 134; //                                                                             //
 1266                        		.dbg	line,	"include\constants.c", 135; //                                  WEAPONS                                    //
 1267                        		.dbg	line,	"include\constants.c", 136; //                                                                             //
 1268                        		.dbg	line,	"include\constants.c", 137; //-----------------------------------------------------------------------------//
 1269                        		.dbg	line,	"include\constants.c", 139; #define CHAIN_VRAM_ADR                  0x7C00
 1270                        		.dbg	line,	"include\constants.c", 140; #define WEAPON_VRAM_ADR                 CHAIN_VRAM_ADR+TILES_4
 1271                        		.dbg	line,	"include\constants.c", 141; #define CHAIN_START_INDEX               PLAYER_START_INDEX-3
 1272                        		.dbg	line,	"include\constants.c", 143; #define WEAPON_IDLE_VRAM_ADRESS         WEAPON_VRAM_ADR
 1273                        		.dbg	line,	"include\constants.c", 144; #define WEAPON_WALK_1_VRAM_ADRESS       WEAPON_IDLE_VRAM_ADRESS+TILES_4
 1274                        		.dbg	line,	"include\constants.c", 145; #define WEAPON_WALK_2_VRAM_ADRESS       WEAPON_WALK_1_VRAM_ADRESS+TILES_4
 1275                        		.dbg	line,	"include\constants.c", 147; #define WEAPON_ATTACK_1_VRAM_ADRESS     WEAPON_WALK_2_VRAM_ADRESS+TILES_4
 1276                        		.dbg	line,	"include\constants.c", 148; #define WEAPON_ATTACK_2_VRAM_ADRESS     WEAPON_ATTACK_1_VRAM_ADRESS+TILES_4
 1277                        		.dbg	line,	"include\constants.c", 153; //-----------------------------------------------------------------------------//
 1278                        		.dbg	line,	"include\constants.c", 154; //                                                                             //
 1279                        		.dbg	line,	"include\constants.c", 155; //                                  COLLISIONS                                 //
 1280                        		.dbg	line,	"include\constants.c", 156; //                                                                             //
 1281                        		.dbg	line,	"include\constants.c", 157; //-----------------------------------------------------------------------------//
 1282                        		.dbg	line,	"include\constants.c", 159; #define TILE_EMPTY          0
 1283                        		.dbg	line,	"include\constants.c", 160; #define TILE_BG             1
 1284                        		.dbg	line,	"include\constants.c", 161; #define TILE_LADDER         2
 1285                        		.dbg	line,	"include\constants.c", 166; //-----------------------------------------------------------------------------//
 1286                        		.dbg	line,	"include\constants.c", 167; //                                                                             //
 1287                        		.dbg	line,	"include\constants.c", 168; //                                     HUD                                     //
 1288                        		.dbg	line,	"include\constants.c", 169; //                                                                             //
 1289                        		.dbg	line,	"include\constants.c", 170; //-----------------------------------------------------------------------------//
 1290                        		.dbg	line,	"include\constants.c", 172; #define LIFEBAR_1_VRAM_ADR      0x1000
 1291                        		.dbg	line,	"include\constants.c", 173; #define LIFEBAR_2_VRAM_ADR      LIFEBAR_1_VRAM_ADR+TILES_2
 1292                        		.dbg	line,	"include\constants.c", 174; #define LIFEBAR_3_VRAM_ADR      LIFEBAR_2_VRAM_ADR+TILES_2
 1293                        		.dbg	line,	"include\constants.c", 175; #define LIFEBAR_4_VRAM_ADR      LIFEBAR_3_VRAM_ADR+TILES_2
 1294                        		.dbg	line,	"include\constants.c", 176; #define LIFEBAR_5_VRAM_ADR      LIFEBAR_4_VRAM_ADR+TILES_2
 1295                        		.dbg	line,	"include\constants.c", 178; #define WEAPON_ICON_VRAM_ADR    LIFEBAR_5_VRAM_ADR+TILES_2
 1296                        		.dbg	line,	"include\constants.c", 179; #define ARMOR_VRAM_ADR          WEAPON_ICON_VRAM_ADR+TILES_4
 1297                        		.dbg	line,	"include\constants.c", 184; //-----------------------------------------------------------------------------//
 1298                        		.dbg	line,	"include\constants.c", 185; //                                                                             //
 1299                        		.dbg	line,	"include\constants.c", 186; //                                    LEVELS                                   //
 1300                        		.dbg	line,	"include\constants.c", 187; //                                                                             //
 1301                        		.dbg	line,	"include\constants.c", 188; //-----------------------------------------------------------------------------//
 1302                        		.dbg	line,	"include\constants.c", 190; #define LV1_WALL_VRAM_ADR       0x1000
 1303                        		.dbg	line,	"include\constants.c", 191; #define LV1_DOOR_VRAM_ADR       LV1_WALL_VRAM_ADR+256
 1304                        		.dbg	line,	"include\constants.c", 196; #define OBJECT_NUMBER_LV1       23
 1305                        		.dbg	line,	"include\constants.c", 197; #define CHEST_NUMBER_LV1        2
 1306                        		.dbg	line,	"include\constants.c", 198; #define NPC_NUMBER_LV1          2
 1307                        		.dbg	line,	"include\constants.c", 200; #define OBJECT_START_INDEX_LV1  0
 1308                        		.dbg	line,	"include\constants.c", 201; #define CHEST_START_INDEX_LV1   OBJECT_START_INDEX_LV1+OBJECT_NUMBER_LV1
 1309                        		.dbg	line,	"include\constants.c", 202; #define NPC_START_INDEX_LV1     CHEST_START_INDEX_LV1+CHEST_NUMBER_LV1
 1310                        		.dbg	line,	"include\constants.c", 207; //-----------------------------------------------------------------------------//
 1311                        		.dbg	line,	"include\constants.c", 208; //                                                                             //
 1312                        		.dbg	line,	"include\constants.c", 209; //                                   OBJECT                                    //
 1313                        		.dbg	line,	"include\constants.c", 210; //                                                                             //
 1314                        		.dbg	line,	"include\constants.c", 211; //-----------------------------------------------------------------------------//
 1315                        		.dbg	line,	"include\constants.c", 213; #define TYPE_HOURGLASS          0
 1316                        		.dbg	line,	"include\constants.c", 214; #define TYPE_POT                1
 1317                        		.dbg	line,	"include\constants.c", 215; #define TYPE_POW                2
 1318                        		.dbg	line,	"include\constants.c", 216; #define TYPE_CHEST              3
 1319                        		.dbg	line,	"include\constants.c", 217; #define TYPE_GRAY_KEY           4
 1320                        		.dbg	line,	"include\constants.c", 218; #define TYPE_GOLD_KEY           5
 1321                        		.dbg	line,	"include\constants.c", 219; #define TYPE_1UP                6
 1322                        		.dbg	line,	"include\constants.c", 220; #define TYPE_COIN_1             7
 1323                        		.dbg	line,	"include\constants.c", 221; #define TYPE_COIN_5             8
 1324                        		.dbg	line,	"include\constants.c", 222; #define TYPE_COIN_10            9
 1325                        		.dbg	line,	"include\constants.c", 223; #define TYPE_COIN_50            10
 1326                        		.dbg	line,	"include\constants.c", 224; #define TYPE_COIN_100           11
 1327                        		.dbg	line,	"include\constants.c", 225; #define TYPE_COIN_500           12
 1328                        		.dbg	line,	"include\constants.c", 226; #define TYPE_COIN_1000          13
 1329                        		.dbg	line,	"include\constants.c", 227; #define TYPE_YASHICHI           14
 1330                        		.dbg	line,	"include\constants.c", 230; #define STATE_ACTIVE            0
 1331                        		.dbg	line,	"include\constants.c", 231; #define STATE_INACTIVE          1
 1332                        		.dbg	line,	"include\constants.c", 233; #define OBJECT_MARGIN           10//9
 1333                        		.dbg	line,	"include\constants.c", 236; #define POT1_VRAM_ADR           0x6800
 1334                        		.dbg	line,	"include\constants.c", 237; #define POT2_VRAM_ADR           POT1_VRAM_ADR+TILES_4
 1335                        		.dbg	line,	"include\constants.c", 238; #define POT3_VRAM_ADR           POT2_VRAM_ADR+TILES_4
 1336                        		.dbg	line,	"include\constants.c", 239; #define POT4_VRAM_ADR           POT3_VRAM_ADR+TILES_4
 1337                        		.dbg	line,	"include\constants.c", 240; #define POT5_VRAM_ADR           POT4_VRAM_ADR+TILES_4
 1338                        		.dbg	line,	"include\constants.c", 241; #define POT6_VRAM_ADR           POT5_VRAM_ADR+TILES_4
 1339                        		.dbg	line,	"include\constants.c", 242; #define POT7_VRAM_ADR           POT6_VRAM_ADR+TILES_4
 1340                        		.dbg	line,	"include\constants.c", 243; #define POT8_VRAM_ADR           POT7_VRAM_ADR+TILES_4
 1341                        		.dbg	line,	"include\constants.c", 245; #define POW_VRAM_ADR            POT8_VRAM_ADR+TILES_4
 1342                        		.dbg	line,	"include\constants.c", 246; #define GRAY_KEY_VRAM_ADR       POW_VRAM_ADR+TILES_4
 1343                        		.dbg	line,	"include\constants.c", 247; #define GOLD_KEY_VRAM_ADR       GRAY_KEY_VRAM_ADR+TILES_4
 1344                        		.dbg	line,	"include\constants.c", 248; #define LIFE_VRAM_ADR           GOLD_KEY_VRAM_ADR+TILES_4
 1345                        		.dbg	line,	"include\constants.c", 250; #define COIN_1_VRAM_ADR         LIFE_VRAM_ADR+TILES_4
 1346                        		.dbg	line,	"include\constants.c", 251; #define COIN_5_VRAM_ADR         COIN_1_VRAM_ADR+TILES_4
 1347                        		.dbg	line,	"include\constants.c", 252; #define COIN_10_VRAM_ADR        COIN_5_VRAM_ADR+TILES_4
 1348                        		.dbg	line,	"include\constants.c", 253; #define COIN_50_VRAM_ADR        COIN_10_VRAM_ADR+TILES_4
 1349                        		.dbg	line,	"include\constants.c", 254; #define COIN_100_VRAM_ADR       COIN_50_VRAM_ADR+TILES_4
 1350                        		.dbg	line,	"include\constants.c", 255; #define COIN_500_VRAM_ADR       COIN_100_VRAM_ADR+TILES_4
 1351                        		.dbg	line,	"include\constants.c", 256; #define COIN_1000_VRAM_ADR      COIN_500_VRAM_ADR+TILES_4
 1352                        		.dbg	line,	"include\constants.c", 258; #define STAR_VRAM_ADR           COIN_1000_VRAM_ADR+TILES_4
 1353                        		.dbg	line,	"include\constants.c", 259; #define OCTOPUS_VRAM_ADR        STAR_VRAM_ADR+TILES_4
 1354                        		.dbg	line,	"include\constants.c", 260; #define FRUIT_VRAM_ADR          OCTOPUS_VRAM_ADR+TILES_4
 1355                        		.dbg	line,	"include\constants.c", 261; #define BARREL_VRAM_ADR         FRUIT_VRAM_ADR+TILES_4
 1356                        		.dbg	line,	"include\constants.c", 262; #define HOURGLASS_VRAM_ADR      BARREL_VRAM_ADR+TILES_4
 1357                        		.dbg	line,	"include\constants.c", 263; #define BAMBOO_VRAM_ADR         HOURGLASS_VRAM_ADR+TILES_4
 1358                        		.dbg	line,	"include\constants.c", 264; #define YASHICHI_VRAM_ADR       BAMBOO_VRAM_ADR+TILES_4
 1359                        		.dbg	line,	"include\constants.c", 265; #define ELEPHANT_VRAM_ADR       YASHICHI_VRAM_ADR+TILES_4
 1360                        		.dbg	line,	"include\constants.c", 266; #define DRAGONFLY_VRAM_ADR      ELEPHANT_VRAM_ADR+TILES_4
 1361                        		.dbg	line,	"include\constants.c", 267; #define COW_VRAM_ADR            DRAGONFLY_VRAM_ADR+TILES_4
 1362                        		.dbg	line,	"include\constants.c", 268; #define MOBICHAN_VRAM_ADR       COW_VRAM_ADR+TILES_4
 1363                        		.dbg	line,	"include\constants.c", 270; #define CHEST_VRAM_ADR          0x7000
 1364                        		.dbg	line,	"include\constants.c", 271; #define NPC_VRAM_ADR            CHEST_VRAM_ADR+TILES_96
 1365                        		.dbg	line,	"include\constants.c", 276; //-----------------------------------------------------------------------------//
 1366                        		.dbg	line,	"include\constants.c", 277; //                                                                             //
 1367                        		.dbg	line,	"include\constants.c", 278; //                                    NPC                                      //
 1368                        		.dbg	line,	"include\constants.c", 279; //                                                                             //
 1369                        		.dbg	line,	"include\constants.c", 280; //-----------------------------------------------------------------------------//
 1370                        		.dbg	line,	"include\constants.c", 282; #define TYPE_NPC_REWARD         0
 1371                        		.dbg	line,	"include\constants.c", 283; #define TYPE_NPC_SHOP           1
 1372                        		.dbg	line,	"include\constants.c", 288; //-----------------------------------------------------------------------------//
 1373                        		.dbg	line,	"include\constants.c", 289; //                                                                             //
 1374                        		.dbg	line,	"include\constants.c", 290; //                                    SHOP                                     //
 1375                        		.dbg	line,	"include\constants.c", 291; //                                                                             //
 1376                        		.dbg	line,	"include\constants.c", 292; //-----------------------------------------------------------------------------//
 1377                        		.dbg	line,	"include\constants.c", 294; #define SHOP_PHASE_ENTER        0
 1378                        		.dbg	line,	"include\constants.c", 295; #define SHOP_PHASE_BUY          1
 1379                        		.dbg	line,	"include\constants.c", 296; #define SHOP_PHASE_EXIT         2
 1380                        		.dbg	line,	"include\constants.c", 298; #define TYPE_ITEM_WEAPON_2      0
 1381                        		.dbg	line,	"include\constants.c", 299; #define TYPE_ITEM_WEAPON_3      1
 1382                        		.dbg	line,	"include\constants.c", 300; #define TYPE_ITEM_WEAPON_4      2
 1383                        		.dbg	line,	"include\constants.c", 301; #define TYPE_ITEM_WEAPON_5      3
 1384                        		.dbg	line,	"include\constants.c", 302; #define TYPE_ITEM_KEY           4
 1385                        		.dbg	line,	"include\constants.c", 304; #define TYPE_ITEM_ARMOR_2       5
 1386                        		.dbg	line,	"include\constants.c", 305; #define TYPE_ITEM_ARMOR_3       6
 1387                        		.dbg	line,	"include\constants.c", 306; #define TYPE_ITEM_ARMOR_4       7
 1388                        		.dbg	line,	"include\constants.c", 307; #define TYPE_ITEM_ARMOR_5       8
 1389                        		.dbg	line,	"include\constants.c", 308; #define TYPE_ITEM_POTION        9
 1390                        		.dbg	line,	"include\constants.c", 313; //-----------------------------------------------------------------------------//
 1391                        		.dbg	line,	"include\constants.c", 314; //                                                                             //
 1392                        		.dbg	line,	"include\constants.c", 315; //                                   ENEMIES                                   //
 1393                        		.dbg	line,	"include\constants.c", 316; //                                                                             //
 1394                        		.dbg	line,	"include\constants.c", 317; //-----------------------------------------------------------------------------//
 1395                        		.dbg	line,	"include\constants.c", 319; //-----------------------------------------------------------------------------//
 1396                        		.dbg	line,	"include\constants.c", 320; //                                     ORC                                     //
 1397                        		.dbg	line,	"include\constants.c", 321; //-----------------------------------------------------------------------------//
 1398                        		.dbg	line,	"include\constants.c", 323; #define ORC_VRAM_ADR                     PLAYER_HANG_ATTACK_2_VRAM_ADR+TILES_16
 1399                        		.dbg	line,	"include\constants.c", 325; #define ORC_WALK_1_VRAM_ADR              ORC_VRAM_ADR
 1400                        		.dbg	line,	"include\constants.c", 326; #define ORC_WALK_2_VRAM_ADR              ORC_WALK_1_VRAM_ADR+TILES_16
 1401                        		.dbg	line,	"include\constants.c", 327; #define ORC_WALK_3_VRAM_ADR              ORC_WALK_2_VRAM_ADR+TILES_16
 1402                        		.dbg	line,	"include\constants.c", 328; #define ORC_ATTACK_1_VRAM_ADR            ORC_WALK_3_VRAM_ADR+TILES_16
 1403                        		.dbg	line,	"include\constants.c", 330; #define ORC_ATTACK_2_VRAM_ADR            ORC_ATTACK_1_VRAM_ADR+TILES_16
 1404                        		.dbg	line,	"include\constants.c", 331; #define ORC_ATTACK_3_VRAM_ADR            ORC_ATTACK_2_VRAM_ADR+TILES_16
 1405                        		.dbg	line,	"include\constants.c", 332; #define ORC_ATTACK_4_VRAM_ADR            ORC_ATTACK_3_VRAM_ADR+TILES_16
 1406                        		.dbg	line,	"include\constants.c", 333; #define ORC_ATTACK_5_VRAM_ADR            ORC_ATTACK_4_VRAM_ADR+TILES_16
 1407                        		.dbg	line,	"include\constants.c", 334; #define ORC_ATTACK_6_VRAM_ADR            ORC_ATTACK_5_VRAM_ADR+TILES_16
 1408                        		.dbg	line,	"include\constants.c", 336; #define ORC_DEAD_1_VRAM_ADR              ORC_ATTACK_6_VRAM_ADR+TILES_16
 1409                        		.dbg	line,	"include\constants.c", 337; #define ORC_DEAD_2_VRAM_ADR              ORC_DEAD_1_VRAM_ADR+TILES_16
 1410                        		.dbg	line,	"include\constants.c", 338; #define ORC_DEAD_3_VRAM_ADR              ORC_DEAD_2_VRAM_ADR+TILES_16
 1411                        		.dbg	line,	"include\constants.c", 339; #define ORC_DEAD_4_VRAM_ADR              ORC_DEAD_3_VRAM_ADR+TILES_16
 1412                        		.dbg	line,	"include\constants.c", 341; #define ORC_AXE_1_VRAM_ADR               ORC_DEAD_4_VRAM_ADR+TILES_16
 1413                        		.dbg	line,	"include\constants.c", 342; #define ORC_AXE_2_VRAM_ADR               ORC_AXE_1_VRAM_ADR+TILES_4
 1414                        		.dbg	line,	"include\constants.c", 343; #define ORC_AXE_3_VRAM_ADR               ORC_AXE_2_VRAM_ADR+TILES_4
 1415                        		.dbg	line,	"include\constants.c", 344; #define ORC_AXE_4_VRAM_ADR               ORC_AXE_3_VRAM_ADR+TILES_4
 1416                        		.dbg	line,	"include\constants.c", 345; #define ORC_AXE_5_VRAM_ADR               ORC_AXE_4_VRAM_ADR+TILES_4
 1417                        		.dbg	line,	"include\constants.c", 346; #define ORC_AXE_6_VRAM_ADR               ORC_AXE_5_VRAM_ADR+TILES_4
 1418                        		.dbg	line,	"include\constants.c", 349; //-----------------------------------------------------------------------------//
 1419                        		.dbg	line,	"include\constants.c", 350; //                                                                             //
 1420                        		.dbg	line,	"include\constants.c", 351; //                                   SERPENT                                   //
 1421                        		.dbg	line,	"include\constants.c", 352; //                                                                             //
 1422                        		.dbg	line,	"include\constants.c", 353; //-----------------------------------------------------------------------------//
 1423                        		.dbg	line,	"include\constants.c", 355; #define SERPENT_VRAM_ADR                    ORC_AXE_6_VRAM_ADR+TILES_4
 1424                        		.dbg	line,	"include\constants.c", 356; #define SERPENT_LEFT_VRAM_ADR               SERPENT_VRAM_ADR
 1425                        		.dbg	line,	"include\constants.c", 357; #define SERPENT_FRONT_VRAM_ADR              SERPENT_LEFT_VRAM_ADR+TILES_16
 1426                        		.dbg	line,	"include\constants.c", 358; #define SERPENT_RIGHT_VRAM_ADR              SERPENT_FRONT_VRAM_ADR+TILES_16
 1427                        		.dbg	line,	"include\constants.c", 359; #define SERPENT_ATTACK_LEFT_VRAM_ADR        SERPENT_RIGHT_VRAM_ADR+TILES_16
 1428                        		.dbg	line,	"include\constants.c", 360; #define SERPENT_ATTACK_FRONT_VRAM_ADR       SERPENT_ATTACK_LEFT_VRAM_ADR+TILES_16
 1429                        		.dbg	line,	"include\constants.c", 361; #define SERPENT_ATTACK_RIGHT_VRAM_ADR       SERPENT_ATTACK_FRONT_VRAM_ADR+TILES_16
 1430                        		.dbg	line,	"include\constants.c", 364; //-----------------------------------------------------------------------------//
 1431                        		.dbg	line,	"include\constants.c", 365; //                                                                             //
 1432                        		.dbg	line,	"include\constants.c", 366; //                                    PLANT                                    //
 1433                        		.dbg	line,	"include\constants.c", 367; //                                                                             //
 1434                        		.dbg	line,	"include\constants.c", 368; //-----------------------------------------------------------------------------//
 1435                        		.dbg	line,	"include\constants.c", 370; #define PLANT_VRAM_ADR                      SERPENT_ATTACK_RIGHT_VRAM_ADR+TILES_16
 1436                        		.dbg	line,	"include\constants.c", 371; #define PLANT_IDLE_VRAM_ADR                 PLANT_VRAM_ADR
 1437                        		.dbg	line,	"main.c", 8; #include "include/variables.c"
 1438                        		.dbg	line,	"include\variables.c", 1; #include "huc.h"
 1439                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
 1440                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
 1441                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
 1442                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
 1443                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
 1444                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
 1445                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
 1446                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
 1447                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
 1448                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
 1449                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
 1450                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1451                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1452                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1453                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
 1454                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
 1455                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
 1456                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
 1457                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
 1458                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
 1459                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
 1460                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
 1461                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
 1462                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
 1463                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
 1464                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
 1465                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
 1466                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
 1467                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
 1468                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
 1469                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
 1470                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
 1471                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
 1472                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
 1473                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
 1474                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
 1475                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
 1476                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
 1477                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
 1478                        		.dbg	line,	"include\variables.c", 2; #include "hucc-scroll.h"
 1479                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 1; #ifndef _hucc_scroll_h
 1480                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 2; #define _hucc_scroll_h
 1481                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 4; /****************************************************************************
 1482                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 5; ; ***************************************************************************
 1483                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 6; ;
 1484                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 7; ; hucc-scroll.h
 1485                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 8; ;
 1486                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 9; ; Routines for a fast split-screen scrolling system.
 1487                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 10; ;
 1488                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 11; ; Copyright John Brandwood 2024.
 1489                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 12; ;
 1490                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1491                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1492                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1493                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 16; ;
 1494                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 17; ; ***************************************************************************
 1495                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 18; ; ***************************************************************************
 1496                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 19; ;
 1497                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 20; ; The maximum number of splits for each screen layer is set in your project's
 1498                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 21; ; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
 1499                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 22; ;
 1500                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 23; ; Your first active split must be defined to start at screen line 0, and then
 1501                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 24; ; the rest of the active splits must be in increasing line order to match the
 1502                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 25; ; way that the PC Engine displays the output image.
 1503                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 26; ;
 1504                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 27; ; You can have disabled splits interleaved with your active splits.
 1505                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 28; ;
 1506                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 29; ; Splits that are normally disabled can be used to create full screen effects
 1507                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 30; ; such as bouncing the screen up and down by adding blank areas at the top or
 1508                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 31; ; bottom of the screen, and then rapidly changing the height of those areas.
 1509                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 32; ;
 1510                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 33; ; ***************************************************************************
 1511                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 34; ; **************************************************************************/
 1512                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 36; // *************
 1513                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 37; // VDC bits for display_flags ...
 1514                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 38; // *************
 1515                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 40; #ifndef BKG_OFF
 1516                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 41; #define BKG_OFF 0x00
 1517                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 42; #endif
 1518                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 44; #ifndef SPR_OFF
 1519                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 45; #define SPR_OFF 0x00
 1520                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 46; #endif
 1521                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 48; #ifndef BKG_ON
 1522                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 49; #define BKG_ON 0x80
 1523                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 50; #endif
 1524                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 52; #ifndef SPR_ON
 1525                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 53; #define SPR_ON 0x40
 1526                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 54; #endif
 1527                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 56; // *************
 1528                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 57; // Functions in hucc-scroll.asm ...
 1529                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 58; // *************
 1530                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 60; #ifdef __HUCC__
 1531                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 62; #asmdef	HUCC_USES_NEW_SCROLL 1
 1532                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 64; extern void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
 1533                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 65; extern void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
 1534                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 67; extern void __fastcall disable_split( unsigned char index<acc> );
 1535                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 68; extern void __fastcall sgx_disable_split( unsigned char index<acc> );
 1536                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 70; extern void __fastcall __macro disable_all_splits( void );
 1537                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 71; extern void __fastcall __macro sgx_disable_all_splits( void );
 1538                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 73; #asm
 1539                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 74; .macro	_disable_all_splits
 1540                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 75; ldy	#HUCC_PCE_SPLITS - 1
 1541                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 76; !loop:		tya
 1542                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 77; call	_disable_split.1
 1543                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 78; dey
 1544                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 79; bpl	!loop-
 1545                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 80; .endm
 1546                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 82; .macro	_sgx_disable_all_splits
 1547                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 83; ldy	#HUCC_SGX_SPLITS - 1
 1548                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 84; !loop:		tya
 1549                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 85; call	_sgx_disable_split.1
 1550                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 86; dey
 1551                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 87; bpl	!loop-
 1552                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 88; .endm
 1553                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 89; #endasm
 1554                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 91; #endif // __HUCC__
 1555                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 93; #endif // _hucc_scroll_h
 1556                        		.dbg	line,	"include\variables.c", 3; #include "hucc-chrmap.h"
 1557                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 1; #ifndef _hucc_chrmap_h
 1558                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 2; #define _hucc_chrmap_h
 1559                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 4; /****************************************************************************
 1560                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 5; ; ***************************************************************************
 1561                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 6; ;
 1562                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 7; ; hucc-chrmap.h
 1563                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 8; ;
 1564                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 9; ; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
 1565                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 10; ;
 1566                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 11; ; Copyright John Brandwood 2025.
 1567                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 12; ;
 1568                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1569                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1570                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1571                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 16; ;
 1572                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 17; ; ***************************************************************************
 1573                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 18; ; ***************************************************************************
 1574                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 19; ;
 1575                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 20; ; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
 1576                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 21; ;
 1577                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 22; ; The maximum total size for a chrmap is 16KBytes, which allows for maps up
 1578                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 23; ; to 256x32 tiles (2048x256 pixels).
 1579                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 24; ;
 1580                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 25; ; ***************************************************************************
 1581                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 26; ; **************************************************************************/
 1582                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 28; // *************
 1583                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 29; // This code extends the blkmap library ...
 1584                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 30; // *************
 1585                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 32; #include "hucc-blkmap.h"
 1586                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 34; // *************
 1587                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 35; // Functions in chrmap.asm ...
 1588                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 36; // *************
 1589                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 38; #ifdef __HUCC__
 1590                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 40; #asmdef	HUCC_USES_CHRMAP 1
 1591                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 42; extern void __fastcall __nop set_chrmap( unsigned char __far *chrmap<vdc_map_bank:vdc_map_addr>, unsigned char tiles_w<vdc_map_line_w> );
 1592                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 44; extern void __fastcall draw_bat( void );
 1593                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 45; extern void __fastcall scroll_bat( void );
 1594                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 47; extern void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1595                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 49; #ifdef _SGX
 1596                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 51; extern void __fastcall __nop sgx_set_chrmap( unsigned char __far *chrmap<sgx_map_bank:sgx_map_addr>, unsigned char tiles_w<sgx_map_line_w> );
 1597                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 53; extern void __fastcall sgx_draw_bat( void );
 1598                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 54; extern void __fastcall sgx_scroll_bat( void );
 1599                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 56; extern void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1600                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 58; #endif
 1601                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 60; #endif // __HUCC__
 1602                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 62; #endif // _hucc_chrmap_h
 1603                        		.dbg	line,	"include\variables.c", 4; #include "hucc-blkmap.h"
 1604                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
 1605                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
 1606                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
 1607                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
 1608                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
 1609                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
 1610                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
 1611                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
 1612                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
 1613                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
 1614                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
 1615                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1616                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1617                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1618                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
 1619                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
 1620                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
 1621                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
 1622                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
 1623                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
 1624                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
 1625                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
 1626                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
 1627                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
 1628                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
 1629                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
 1630                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
 1631                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
 1632                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
 1633                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
 1634                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
 1635                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
 1636                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
 1637                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
 1638                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
 1639                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
 1640                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
 1641                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
 1642                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
 1643                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
 1644                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
 1645                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
 1646                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
 1647                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
 1648                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
 1649                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
 1650                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
 1651                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
 1652                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
 1653                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
 1654                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
 1655                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
 1656                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
 1657                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
 1658                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
 1659                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
 1660                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
 1661                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
 1662                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
 1663                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
 1664                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
 1665                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
 1666                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
 1667                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
 1668                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1669                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 1670                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
 1671                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 86; .macro	_set_blkmap.2
 1672                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 87; stz	vdc_scr_bank
 1673                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 88; .endm
 1674                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 90; .macro	_set_multimap.2
 1675                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 91; lda	vdc_bat_width
 1676                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 92; lsr	a
 1677                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 93; sta	vdc_map_line_w
 1678                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 94; .endm
 1679                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 96; .macro	SCREEN
 1680                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 97; db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
 1681                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 98; db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
 1682                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 99; db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
 1683                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 100; dw	(\4)
 1684                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 101; .endm
 1685                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
 1686                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
 1687                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
 1688                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
 1689                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
 1690                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
 1691                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
 1692                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
 1693                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
 1694                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
 1695                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
 1696                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
 1697                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
 1698                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
 1699                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
 1700                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
 1701                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
 1702                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
 1703                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
 1704                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
 1705                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
 1706                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
 1707                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
 1708                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
 1709                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
 1710                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1711                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 1712                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
 1713                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 144; .macro	_sgx_set_blkmap.2
 1714                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 145; stz	sgx_scr_bank
 1715                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 146; .endm
 1716                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 148; .macro	_sgx_set_multimap.2
 1717                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 149; lda	sgx_bat_width
 1718                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 150; lsr	a
 1719                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 151; sta	sgx_map_line_w
 1720                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 152; .endm
 1721                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
 1722                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
 1723                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
 1724                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
 1725                        		.dbg	line,	"include\variables.c", 13; unsigned char   sequence_id,
 1726                        		.dbg	line,	"include\variables.c", 14; sequence_loaded,
 1727                        		.dbg	line,	"include\variables.c", 16; level_id,
 1728                        		.dbg	line,	"include\variables.c", 18; // PLAYER //
 1729                        		.dbg	line,	"include\variables.c", 19; respawn,
 1730                        		.dbg	line,	"include\variables.c", 20; player_id,
 1731                        		.dbg	line,	"include\variables.c", 21; player_state,
 1732                        		.dbg	line,	"include\variables.c", 22; player_axis,
 1733                        		.dbg	line,	"include\variables.c", 23; player_previous_axis,
 1734                        		.dbg	line,	"include\variables.c", 24; player_counter_anim,
 1735                        		.dbg	line,	"include\variables.c", 25; player_index_jump,
 1736                        		.dbg	line,	"include\variables.c", 26; player_index_fall,
 1737                        		.dbg	line,	"include\variables.c", 27; player_counter_attack,
 1738                        		.dbg	line,	"include\variables.c", 29; player_naked,
 1739                        		.dbg	line,	"include\variables.c", 30; player_attack,
 1740                        		.dbg	line,	"include\variables.c", 32; jump_ladder,
 1741                        		.dbg	line,	"include\variables.c", 33; jump_max_index,
 1742                        		.dbg	line,	"include\variables.c", 34; fall_ladder,
 1743                        		.dbg	line,	"include\variables.c", 36; // ARMOR + WEAPON //
 1744                        		.dbg	line,	"include\variables.c", 37; chain_id,
 1745                        		.dbg	line,	"include\variables.c", 38; weapon_id,
 1746                        		.dbg	line,	"include\variables.c", 39; armor_level,
 1747                        		.dbg	line,	"include\variables.c", 40; weapon_level,
 1748                        		.dbg	line,	"include\variables.c", 42; // HUD //
 1749                        		.dbg	line,	"include\variables.c", 43; life_amount,
 1750                        		.dbg	line,	"include\variables.c", 44; credits_amount,
 1751                        		.dbg	line,	"include\variables.c", 45; key_amount,
 1752                        		.dbg	line,	"include\variables.c", 46; potion_amount,
 1753                        		.dbg	line,	"include\variables.c", 48; // TIME //
 1754                        		.dbg	line,	"include\variables.c", 49; minutes,
 1755                        		.dbg	line,	"include\variables.c", 50; seconds,
 1756                        		.dbg	line,	"include\variables.c", 51; time_counter,
 1757                        		.dbg	line,	"include\variables.c", 53; minutes_backup,
 1758                        		.dbg	line,	"include\variables.c", 54; seconds_backup,
 1759                        		.dbg	line,	"include\variables.c", 57; // OBJECTS //
 1760                        		.dbg	line,	"include\variables.c", 58; object_start_index,
 1761                        		.dbg	line,	"include\variables.c", 59; level_object_number,
 1762                        		.dbg	line,	"include\variables.c", 60; onscreen_object_number,
 1763                        		.dbg	line,	"include\variables.c", 61; 
 1764                        		.dbg	line,	"include\variables.c", 62; list_object_type[25],
 1765                        		.dbg	line,	"include\variables.c", 63; list_object_state[25],
 1766                        		.dbg	line,	"include\variables.c", 64; list_object_energy[25],
 1767                        		.dbg	line,	"include\variables.c", 65; list_reward_type[25],
 1768                        		.dbg	line,	"include\variables.c", 66; 
 1769                        		.dbg	line,	"include\variables.c", 67; list_onscreen_object[8],
 1770                        		.dbg	line,	"include\variables.c", 68; 
 1771                        		.dbg	line,	"include\variables.c", 69; // CHESTS //
 1772                        		.dbg	line,	"include\variables.c", 70; chest_start_index,
 1773                        		.dbg	line,	"include\variables.c", 71; level_chest_number,
 1774                        		.dbg	line,	"include\variables.c", 72; onscreen_chest_number,
 1775                        		.dbg	line,	"include\variables.c", 73; 
 1776                        		.dbg	line,	"include\variables.c", 74; list_chest_state[8],
 1777                        		.dbg	line,	"include\variables.c", 75; list_onscreen_chest[8],
 1778                        		.dbg	line,	"include\variables.c", 77; // NPC //
 1779                        		.dbg	line,	"include\variables.c", 78; npc_start_index,
 1780                        		.dbg	line,	"include\variables.c", 79; level_npc_number,
 1781                        		.dbg	line,	"include\variables.c", 80; onscreen_npc_number,
 1782                        		.dbg	line,	"include\variables.c", 82; list_npc_type[9],
 1783                        		.dbg	line,	"include\variables.c", 83; list_npc_state[9],
 1784                        		.dbg	line,	"include\variables.c", 84; list_onscreen_npc[9],
 1785                        		.dbg	line,	"include\variables.c", 86; // SHOPS //
 1786                        		.dbg	line,	"include\variables.c", 87; index_x,
 1787                        		.dbg	line,	"include\variables.c", 88; index_y,
 1788                        		.dbg	line,	"include\variables.c", 89; item_index,
 1789                        		.dbg	line,	"include\variables.c", 91; shop_phase,
 1790                        		.dbg	line,	"include\variables.c", 92; shop_counter,
 1791                        		.dbg	line,	"include\variables.c", 93; 
 1792                        		.dbg	line,	"include\variables.c", 94; tilemap_mask[256];
 1793                        		.dbg	line,	"include\variables.c", 99; signed int      player_pos_x,
 1794                        		.dbg	line,	"include\variables.c", 100; player_pos_y,
 1795                        		.dbg	line,	"include\variables.c", 101; camera_max_y_position,
 1796                        		.dbg	line,	"include\variables.c", 103; camera_pos_x_backup,
 1797                        		.dbg	line,	"include\variables.c", 104; camera_pos_y_backup,
 1798                        		.dbg	line,	"include\variables.c", 107; list_object_x_pos[25],
 1799                        		.dbg	line,	"include\variables.c", 108; list_object_y_pos[25],
 1800                        		.dbg	line,	"include\variables.c", 109; list_object_x_pos_ref[25],
 1801                        		.dbg	line,	"include\variables.c", 110; list_object_y_pos_ref[25],
 1802                        		.dbg	line,	"include\variables.c", 113; list_chest_x_pos[8],
 1803                        		.dbg	line,	"include\variables.c", 114; list_chest_y_pos[8],
 1804                        		.dbg	line,	"include\variables.c", 115; list_chest_x_pos_ref[8],
 1805                        		.dbg	line,	"include\variables.c", 116; list_chest_y_pos_ref[8],
 1806                        		.dbg	line,	"include\variables.c", 119; list_npc_x_pos[9],
 1807                        		.dbg	line,	"include\variables.c", 120; list_npc_y_pos[9],
 1808                        		.dbg	line,	"include\variables.c", 121; list_npc_x_pos_ref[9],
 1809                        		.dbg	line,	"include\variables.c", 122; list_npc_y_pos_ref[9];
 1810                        		.dbg	line,	"include\variables.c", 123; 
 1811                        		.dbg	line,	"include\variables.c", 127; int             zenny_amount,
 1812                        		.dbg	line,	"include\variables.c", 128; score,
 1813                        		.dbg	line,	"include\variables.c", 130; shop_prices[10];
 1814                        		.dbg	line,	"include\variables.c", 135; extern unsigned char tileset_LV1_BG_B[];
 1815                        		.dbg	line,	"include\variables.c", 136; extern unsigned char multimap_LV1_BG_B[];
 1816                        		.dbg	line,	"include\variables.c", 138; extern unsigned char tileset_HUD[];
 1817                        		.dbg	line,	"include\variables.c", 139; extern unsigned char multimap_LV1_BG_A[];
 1818                        		.dbg	line,	"include\variables.c", 141; extern unsigned char tileset_SHOP_BG_B[];
 1819                        		.dbg	line,	"include\variables.c", 144; int *ptr_SHOP_ITEM_PRICES;
 1820                        		.dbg	line,	"main.c", 11; #include "include/gfx_BG_TITLE.c"
 1821                        		.dbg	line,	"include\gfx_BG_TITLE.c", 1; #include "huc.h"
 1822                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
 1823                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
 1824                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
 1825                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
 1826                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
 1827                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
 1828                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
 1829                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
 1830                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
 1831                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
 1832                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
 1833                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1834                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1835                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1836                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
 1837                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
 1838                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
 1839                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
 1840                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
 1841                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
 1842                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
 1843                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
 1844                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
 1845                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
 1846                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
 1847                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
 1848                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
 1849                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
 1850                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
 1851                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
 1852                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
 1853                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
 1854                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
 1855                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
 1856                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
 1857                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
 1858                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
 1859                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
 1860                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
 1861                        		.dbg	line,	"include\gfx_BG_TITLE.c", 2; #include "hucc-scroll.h"
 1862                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 1; #ifndef _hucc_scroll_h
 1863                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 2; #define _hucc_scroll_h
 1864                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 4; /****************************************************************************
 1865                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 5; ; ***************************************************************************
 1866                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 6; ;
 1867                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 7; ; hucc-scroll.h
 1868                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 8; ;
 1869                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 9; ; Routines for a fast split-screen scrolling system.
 1870                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 10; ;
 1871                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 11; ; Copyright John Brandwood 2024.
 1872                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 12; ;
 1873                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1874                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1875                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1876                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 16; ;
 1877                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 17; ; ***************************************************************************
 1878                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 18; ; ***************************************************************************
 1879                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 19; ;
 1880                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 20; ; The maximum number of splits for each screen layer is set in your project's
 1881                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 21; ; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
 1882                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 22; ;
 1883                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 23; ; Your first active split must be defined to start at screen line 0, and then
 1884                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 24; ; the rest of the active splits must be in increasing line order to match the
 1885                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 25; ; way that the PC Engine displays the output image.
 1886                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 26; ;
 1887                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 27; ; You can have disabled splits interleaved with your active splits.
 1888                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 28; ;
 1889                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 29; ; Splits that are normally disabled can be used to create full screen effects
 1890                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 30; ; such as bouncing the screen up and down by adding blank areas at the top or
 1891                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 31; ; bottom of the screen, and then rapidly changing the height of those areas.
 1892                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 32; ;
 1893                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 33; ; ***************************************************************************
 1894                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 34; ; **************************************************************************/
 1895                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 36; // *************
 1896                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 37; // VDC bits for display_flags ...
 1897                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 38; // *************
 1898                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 40; #ifndef BKG_OFF
 1899                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 41; #define BKG_OFF 0x00
 1900                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 42; #endif
 1901                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 44; #ifndef SPR_OFF
 1902                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 45; #define SPR_OFF 0x00
 1903                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 46; #endif
 1904                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 48; #ifndef BKG_ON
 1905                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 49; #define BKG_ON 0x80
 1906                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 50; #endif
 1907                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 52; #ifndef SPR_ON
 1908                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 53; #define SPR_ON 0x40
 1909                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 54; #endif
 1910                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 56; // *************
 1911                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 57; // Functions in hucc-scroll.asm ...
 1912                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 58; // *************
 1913                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 60; #ifdef __HUCC__
 1914                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 62; #asmdef	HUCC_USES_NEW_SCROLL 1
 1915                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 64; extern void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
 1916                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 65; extern void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
 1917                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 67; extern void __fastcall disable_split( unsigned char index<acc> );
 1918                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 68; extern void __fastcall sgx_disable_split( unsigned char index<acc> );
 1919                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 70; extern void __fastcall __macro disable_all_splits( void );
 1920                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 71; extern void __fastcall __macro sgx_disable_all_splits( void );
 1921                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 73; #asm
 1922                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 74; .macro	_disable_all_splits
 1923                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 75; ldy	#HUCC_PCE_SPLITS - 1
 1924                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 76; !loop:		tya
 1925                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 77; call	_disable_split.1
 1926                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 78; dey
 1927                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 79; bpl	!loop-
 1928                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 80; .endm
 1929                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 82; .macro	_sgx_disable_all_splits
 1930                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 83; ldy	#HUCC_SGX_SPLITS - 1
 1931                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 84; !loop:		tya
 1932                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 85; call	_sgx_disable_split.1
 1933                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 86; dey
 1934                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 87; bpl	!loop-
 1935                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 88; .endm
 1936                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 89; #endasm
 1937                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 91; #endif // __HUCC__
 1938                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 93; #endif // _hucc_scroll_h
 1939                        		.dbg	line,	"include\gfx_BG_TITLE.c", 3; #include "hucc-chrmap.h"
 1940                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 1; #ifndef _hucc_chrmap_h
 1941                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 2; #define _hucc_chrmap_h
 1942                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 4; /****************************************************************************
 1943                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 5; ; ***************************************************************************
 1944                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 6; ;
 1945                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 7; ; hucc-chrmap.h
 1946                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 8; ;
 1947                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 9; ; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
 1948                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 10; ;
 1949                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 11; ; Copyright John Brandwood 2025.
 1950                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 12; ;
 1951                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1952                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 1953                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 1954                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 16; ;
 1955                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 17; ; ***************************************************************************
 1956                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 18; ; ***************************************************************************
 1957                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 19; ;
 1958                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 20; ; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
 1959                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 21; ;
 1960                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 22; ; The maximum total size for a chrmap is 16KBytes, which allows for maps up
 1961                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 23; ; to 256x32 tiles (2048x256 pixels).
 1962                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 24; ;
 1963                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 25; ; ***************************************************************************
 1964                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 26; ; **************************************************************************/
 1965                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 28; // *************
 1966                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 29; // This code extends the blkmap library ...
 1967                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 30; // *************
 1968                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 32; #include "hucc-blkmap.h"
 1969                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 34; // *************
 1970                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 35; // Functions in chrmap.asm ...
 1971                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 36; // *************
 1972                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 38; #ifdef __HUCC__
 1973                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 40; #asmdef	HUCC_USES_CHRMAP 1
 1974                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 42; extern void __fastcall __nop set_chrmap( unsigned char __far *chrmap<vdc_map_bank:vdc_map_addr>, unsigned char tiles_w<vdc_map_line_w> );
 1975                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 44; extern void __fastcall draw_bat( void );
 1976                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 45; extern void __fastcall scroll_bat( void );
 1977                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 47; extern void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1978                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 49; #ifdef _SGX
 1979                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 51; extern void __fastcall __nop sgx_set_chrmap( unsigned char __far *chrmap<sgx_map_bank:sgx_map_addr>, unsigned char tiles_w<sgx_map_line_w> );
 1980                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 53; extern void __fastcall sgx_draw_bat( void );
 1981                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 54; extern void __fastcall sgx_scroll_bat( void );
 1982                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 56; extern void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 1983                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 58; #endif
 1984                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 60; #endif // __HUCC__
 1985                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 62; #endif // _hucc_chrmap_h
 1986                        		.dbg	line,	"include\gfx_BG_TITLE.c", 4; #include "hucc-blkmap.h"
 1987                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
 1988                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
 1989                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
 1990                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
 1991                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
 1992                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
 1993                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
 1994                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
 1995                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
 1996                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
 1997                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
 1998                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 1999                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 2000                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 2001                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
 2002                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
 2003                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
 2004                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
 2005                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
 2006                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
 2007                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
 2008                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
 2009                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
 2010                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
 2011                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
 2012                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
 2013                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
 2014                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
 2015                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
 2016                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
 2017                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
 2018                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
 2019                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
 2020                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
 2021                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
 2022                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
 2023                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
 2024                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
 2025                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
 2026                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
 2027                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
 2028                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
 2029                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
 2030                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
 2031                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
 2032                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
 2033                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
 2034                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
 2035                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
 2036                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
 2037                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
 2038                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
 2039                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
 2040                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
 2041                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
 2042                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
 2043                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
 2044                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
 2045                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
 2046                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
 2047                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
 2048                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
 2049                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
 2050                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
 2051                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 2052                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 2053                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
 2054                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 86; .macro	_set_blkmap.2
 2055                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 87; stz	vdc_scr_bank
 2056                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 88; .endm
 2057                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 90; .macro	_set_multimap.2
 2058                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 91; lda	vdc_bat_width
 2059                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 92; lsr	a
 2060                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 93; sta	vdc_map_line_w
 2061                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 94; .endm
 2062                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 96; .macro	SCREEN
 2063                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 97; db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
 2064                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 98; db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
 2065                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 99; db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
 2066                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 100; dw	(\4)
 2067                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 101; .endm
 2068                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
 2069                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
 2070                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
 2071                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
 2072                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
 2073                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
 2074                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
 2075                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
 2076                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
 2077                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
 2078                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
 2079                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
 2080                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
 2081                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
 2082                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
 2083                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
 2084                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
 2085                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
 2086                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
 2087                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
 2088                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
 2089                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
 2090                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
 2091                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
 2092                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
 2093                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 2094                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 2095                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
 2096                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 144; .macro	_sgx_set_blkmap.2
 2097                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 145; stz	sgx_scr_bank
 2098                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 146; .endm
 2099                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 148; .macro	_sgx_set_multimap.2
 2100                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 149; lda	sgx_bat_width
 2101                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 150; lsr	a
 2102                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 151; sta	sgx_map_line_w
 2103                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 152; .endm
 2104                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
 2105                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
 2106                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
 2107                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
 2108                        		.dbg	line,	"include\gfx_BG_TITLE.c", 13; #incchr(tileset_FONT_TITLE,"res/maps/tiles_FONT_TITLE.png");
 2109               6000     		.data
 2110    03:6000             	_tileset_FONT_TITLE: 	.incchr		"res/maps/tiles_FONT_TITLE.png"
 2111               E309     		.code
 2112                        		.dbg	line,	"include\gfx_BG_TITLE.c", 16; //**************************************************************************************//
 2113                        		.dbg	line,	"include\gfx_BG_TITLE.c", 17; //                                                                                      //
 2114                        		.dbg	line,	"include\gfx_BG_TITLE.c", 18; //                                        TITLE                                         //
 2115                        		.dbg	line,	"include\gfx_BG_TITLE.c", 19; //                                                                                      //
 2116                        		.dbg	line,	"include\gfx_BG_TITLE.c", 20; //**************************************************************************************//
 2117                        		.dbg	line,	"include\gfx_BG_TITLE.c", 22; #incchr(tileset_TITLE_BG_B, "res/maps/tilemap_TITLE_BG_B.png", _OPTIMIZE)
 2118               6C00     		.data
 2119    03:6C00             	_tileset_TITLE_BG_B: 	.incchr		"res/maps/tilemap_TITLE_BG_B.png", 1
 2120               E309     		.code
 2121                        		.dbg	line,	"include\gfx_BG_TITLE.c", 24; #incbat(tilemap_TITLE_BG_B,"res/maps/tilemap_TITLE_BG_B.png", 0x1000 , 32 , 28 , tileset_TITLE_BG_B);
 2122               6860     		.data
 2123    04:6860             	_tilemap_TITLE_BG_B:	.incbat		"res/maps/tilemap_TITLE_BG_B.png", 4096, 32, 28, _tileset_TITLE_BG_B
 2124               E309     		.code
 2125                        		.dbg	line,	"main.c", 11; #incpal(palette_TITLE, "res/maps/tilemap_TITLE_BG_B.png")
 2126               6F60     		.data
 2127    04:6F60             	_palette_TITLE:	.incpal		"res/maps/tilemap_TITLE_BG_B.png"
 2128               E309     		.code
 2129                        		.dbg	line,	"main.c", 12; #include "include/gfx_BG_LEVELS.c"
 2130                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 1; #include "huc.h"
 2131                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
 2132                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
 2133                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
 2134                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
 2135                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
 2136                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
 2137                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
 2138                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
 2139                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
 2140                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
 2141                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
 2142                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 2143                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 2144                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 2145                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
 2146                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
 2147                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
 2148                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
 2149                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
 2150                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
 2151                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
 2152                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
 2153                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
 2154                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
 2155                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
 2156                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
 2157                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
 2158                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
 2159                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
 2160                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
 2161                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
 2162                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
 2163                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
 2164                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
 2165                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
 2166                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
 2167                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
 2168                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
 2169                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
 2170                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 2; #include "hucc-scroll.h"
 2171                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 1; #ifndef _hucc_scroll_h
 2172                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 2; #define _hucc_scroll_h
 2173                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 4; /****************************************************************************
 2174                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 5; ; ***************************************************************************
 2175                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 6; ;
 2176                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 7; ; hucc-scroll.h
 2177                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 8; ;
 2178                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 9; ; Routines for a fast split-screen scrolling system.
 2179                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 10; ;
 2180                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 11; ; Copyright John Brandwood 2024.
 2181                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 12; ;
 2182                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 2183                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 2184                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 2185                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 16; ;
 2186                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 17; ; ***************************************************************************
 2187                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 18; ; ***************************************************************************
 2188                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 19; ;
 2189                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 20; ; The maximum number of splits for each screen layer is set in your project's
 2190                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 21; ; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
 2191                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 22; ;
 2192                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 23; ; Your first active split must be defined to start at screen line 0, and then
 2193                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 24; ; the rest of the active splits must be in increasing line order to match the
 2194                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 25; ; way that the PC Engine displays the output image.
 2195                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 26; ;
 2196                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 27; ; You can have disabled splits interleaved with your active splits.
 2197                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 28; ;
 2198                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 29; ; Splits that are normally disabled can be used to create full screen effects
 2199                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 30; ; such as bouncing the screen up and down by adding blank areas at the top or
 2200                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 31; ; bottom of the screen, and then rapidly changing the height of those areas.
 2201                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 32; ;
 2202                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 33; ; ***************************************************************************
 2203                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 34; ; **************************************************************************/
 2204                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 36; // *************
 2205                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 37; // VDC bits for display_flags ...
 2206                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 38; // *************
 2207                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 40; #ifndef BKG_OFF
 2208                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 41; #define BKG_OFF 0x00
 2209                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 42; #endif
 2210                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 44; #ifndef SPR_OFF
 2211                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 45; #define SPR_OFF 0x00
 2212                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 46; #endif
 2213                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 48; #ifndef BKG_ON
 2214                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 49; #define BKG_ON 0x80
 2215                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 50; #endif
 2216                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 52; #ifndef SPR_ON
 2217                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 53; #define SPR_ON 0x40
 2218                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 54; #endif
 2219                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 56; // *************
 2220                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 57; // Functions in hucc-scroll.asm ...
 2221                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 58; // *************
 2222                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 60; #ifdef __HUCC__
 2223                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 62; #asmdef	HUCC_USES_NEW_SCROLL 1
 2224                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 64; extern void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
 2225                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 65; extern void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
 2226                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 67; extern void __fastcall disable_split( unsigned char index<acc> );
 2227                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 68; extern void __fastcall sgx_disable_split( unsigned char index<acc> );
 2228                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 70; extern void __fastcall __macro disable_all_splits( void );
 2229                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 71; extern void __fastcall __macro sgx_disable_all_splits( void );
 2230                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 73; #asm
 2231                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 74; .macro	_disable_all_splits
 2232                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 75; ldy	#HUCC_PCE_SPLITS - 1
 2233                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 76; !loop:		tya
 2234                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 77; call	_disable_split.1
 2235                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 78; dey
 2236                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 79; bpl	!loop-
 2237                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 80; .endm
 2238                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 82; .macro	_sgx_disable_all_splits
 2239                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 83; ldy	#HUCC_SGX_SPLITS - 1
 2240                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 84; !loop:		tya
 2241                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 85; call	_sgx_disable_split.1
 2242                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 86; dey
 2243                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 87; bpl	!loop-
 2244                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 88; .endm
 2245                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 89; #endasm
 2246                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 91; #endif // __HUCC__
 2247                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 93; #endif // _hucc_scroll_h
 2248                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 3; #include "hucc-chrmap.h"
 2249                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 1; #ifndef _hucc_chrmap_h
 2250                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 2; #define _hucc_chrmap_h
 2251                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 4; /****************************************************************************
 2252                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 5; ; ***************************************************************************
 2253                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 6; ;
 2254                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 7; ; hucc-chrmap.h
 2255                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 8; ;
 2256                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 9; ; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
 2257                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 10; ;
 2258                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 11; ; Copyright John Brandwood 2025.
 2259                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 12; ;
 2260                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 2261                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 2262                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 2263                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 16; ;
 2264                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 17; ; ***************************************************************************
 2265                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 18; ; ***************************************************************************
 2266                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 19; ;
 2267                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 20; ; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
 2268                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 21; ;
 2269                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 22; ; The maximum total size for a chrmap is 16KBytes, which allows for maps up
 2270                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 23; ; to 256x32 tiles (2048x256 pixels).
 2271                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 24; ;
 2272                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 25; ; ***************************************************************************
 2273                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 26; ; **************************************************************************/
 2274                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 28; // *************
 2275                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 29; // This code extends the blkmap library ...
 2276                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 30; // *************
 2277                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 32; #include "hucc-blkmap.h"
 2278                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 34; // *************
 2279                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 35; // Functions in chrmap.asm ...
 2280                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 36; // *************
 2281                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 38; #ifdef __HUCC__
 2282                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 40; #asmdef	HUCC_USES_CHRMAP 1
 2283                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 42; extern void __fastcall __nop set_chrmap( unsigned char __far *chrmap<vdc_map_bank:vdc_map_addr>, unsigned char tiles_w<vdc_map_line_w> );
 2284                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 44; extern void __fastcall draw_bat( void );
 2285                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 45; extern void __fastcall scroll_bat( void );
 2286                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 47; extern void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 2287                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 49; #ifdef _SGX
 2288                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 51; extern void __fastcall __nop sgx_set_chrmap( unsigned char __far *chrmap<sgx_map_bank:sgx_map_addr>, unsigned char tiles_w<sgx_map_line_w> );
 2289                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 53; extern void __fastcall sgx_draw_bat( void );
 2290                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 54; extern void __fastcall sgx_scroll_bat( void );
 2291                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 56; extern void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 2292                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 58; #endif
 2293                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 60; #endif // __HUCC__
 2294                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 62; #endif // _hucc_chrmap_h
 2295                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 4; #include "hucc-blkmap.h"
 2296                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
 2297                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
 2298                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
 2299                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
 2300                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
 2301                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
 2302                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
 2303                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
 2304                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
 2305                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
 2306                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
 2307                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 2308                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 2309                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 2310                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
 2311                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
 2312                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
 2313                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
 2314                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
 2315                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
 2316                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
 2317                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
 2318                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
 2319                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
 2320                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
 2321                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
 2322                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
 2323                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
 2324                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
 2325                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
 2326                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
 2327                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
 2328                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
 2329                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
 2330                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
 2331                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
 2332                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
 2333                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
 2334                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
 2335                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
 2336                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
 2337                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
 2338                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
 2339                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
 2340                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
 2341                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
 2342                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
 2343                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
 2344                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
 2345                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
 2346                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
 2347                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
 2348                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
 2349                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
 2350                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
 2351                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
 2352                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
 2353                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
 2354                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
 2355                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
 2356                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
 2357                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
 2358                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
 2359                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
 2360                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 2361                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 2362                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
 2363                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 86; .macro	_set_blkmap.2
 2364                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 87; stz	vdc_scr_bank
 2365                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 88; .endm
 2366                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 90; .macro	_set_multimap.2
 2367                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 91; lda	vdc_bat_width
 2368                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 92; lsr	a
 2369                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 93; sta	vdc_map_line_w
 2370                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 94; .endm
 2371                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 96; .macro	SCREEN
 2372                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 97; db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
 2373                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 98; db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
 2374                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 99; db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
 2375                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 100; dw	(\4)
 2376                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 101; .endm
 2377                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
 2378                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
 2379                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
 2380                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
 2381                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
 2382                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
 2383                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
 2384                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
 2385                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
 2386                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
 2387                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
 2388                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
 2389                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
 2390                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
 2391                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
 2392                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
 2393                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
 2394                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
 2395                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
 2396                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
 2397                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
 2398                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
 2399                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
 2400                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
 2401                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
 2402                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 2403                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 2404                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
 2405                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 144; .macro	_sgx_set_blkmap.2
 2406                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 145; stz	sgx_scr_bank
 2407                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 146; .endm
 2408                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 148; .macro	_sgx_set_multimap.2
 2409                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 149; lda	sgx_bat_width
 2410                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 150; lsr	a
 2411                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 151; sta	sgx_map_line_w
 2412                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 152; .endm
 2413                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
 2414                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
 2415                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
 2416                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
 2417                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 13; #incchr(tileset_FONT,"res/maps/tiles_FONT.png");
 2418               7160     		.data
 2419    04:7160             	_tileset_FONT: 	.incchr		"res/maps/tiles_FONT.png"
 2420               E309     		.code
 2421                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 16; //**************************************************************************************//
 2422                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 17; //                                                                                      //
 2423                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 18; //                                       LEVEL 1                                        //
 2424                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 19; //                                                                                      //
 2425                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 20; //**************************************************************************************//
 2426                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 22; #incchr(tileset_LV1_WALL,"res/maps/tiles_LV1_WALL.png", 4 , 4);
 2427               7D60     		.data
 2428    04:7D60             	_tileset_LV1_WALL: 	.incchr		"res/maps/tiles_LV1_WALL.png", 4, 4
 2429               E309     		.code
 2430                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 23; #incchr(tileset_LV1_DOOR_OPEN,"res/maps/tiles_LV1_DOOR_OPEN.png", 4 , 6);
 2431               7F60     		.data
 2432    04:7F60             	_tileset_LV1_DOOR_OPEN: 	.incchr		"res/maps/tiles_LV1_DOOR_OPEN.png", 4, 6
 2433               E309     		.code
 2434                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 24; #incchr(tileset_LV1_DOOR_CLOSED,"res/maps/tiles_LV1_DOOR_CLOSED.png", 4 , 6);
 2435               6260     		.data
 2436    05:6260             	_tileset_LV1_DOOR_CLOSED: 	.incchr		"res/maps/tiles_LV1_DOOR_CLOSED.png", 4, 6
 2437               E309     		.code
 2438                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 26; #incchr(tileset_LIFE_RED,"res/maps/tileset_LIFE_RED.png", 2 , 1);
 2439               6560     		.data
 2440    05:6560             	_tileset_LIFE_RED: 	.incchr		"res/maps/tileset_LIFE_RED.png", 2, 1
 2441               E309     		.code
 2442                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 27; #incchr(tileset_LIFE_ORANGE,"res/maps/tileset_LIFE_ORANGE.png", 2 , 1);
 2443               65A0     		.data
 2444    05:65A0             	_tileset_LIFE_ORANGE: 	.incchr		"res/maps/tileset_LIFE_ORANGE.png", 2, 1
 2445               E309     		.code
 2446                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 28; #incchr(tileset_LIFE_YELLOW,"res/maps/tileset_LIFE_YELLOW.png", 2 , 1);
 2447               65E0     		.data
 2448    05:65E0             	_tileset_LIFE_YELLOW: 	.incchr		"res/maps/tileset_LIFE_YELLOW.png", 2, 1
 2449               E309     		.code
 2450                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 29; #incchr(tileset_LIFE_EMPTY,"res/maps/tileset_LIFE_EMPTY.png", 2 , 1);
 2451               6620     		.data
 2452    05:6620             	_tileset_LIFE_EMPTY: 	.incchr		"res/maps/tileset_LIFE_EMPTY.png", 2, 1
 2453               E309     		.code
 2454                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 31; #incchr(tileset_ARMOR_1,"res/maps/tileset_ARMOR_1.png", 2 , 2);
 2455               6660     		.data
 2456    05:6660             	_tileset_ARMOR_1: 	.incchr		"res/maps/tileset_ARMOR_1.png", 2, 2
 2457               E309     		.code
 2458                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 32; #incchr(tileset_ARMOR_2,"res/maps/tileset_ARMOR_2.png", 2 , 2);
 2459               66E0     		.data
 2460    05:66E0             	_tileset_ARMOR_2: 	.incchr		"res/maps/tileset_ARMOR_2.png", 2, 2
 2461               E309     		.code
 2462                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 33; #incchr(tileset_ARMOR_4,"res/maps/tileset_ARMOR_4.png", 2 , 2);
 2463               6760     		.data
 2464    05:6760             	_tileset_ARMOR_4: 	.incchr		"res/maps/tileset_ARMOR_4.png", 2, 2
 2465               E309     		.code
 2466                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 34; #incchr(tileset_ARMOR_8,"res/maps/tileset_ARMOR_8.png", 2 , 2);
 2467               67E0     		.data
 2468    05:67E0             	_tileset_ARMOR_8: 	.incchr		"res/maps/tileset_ARMOR_8.png", 2, 2
 2469               E309     		.code
 2470                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 36; #incchr(tileset_WEAPON_1,"res/maps/tileset_WEAPON_1.png", 2 , 2);
 2471               6860     		.data
 2472    05:6860             	_tileset_WEAPON_1: 	.incchr		"res/maps/tileset_WEAPON_1.png", 2, 2
 2473               E309     		.code
 2474                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 37; #incchr(tileset_WEAPON_2,"res/maps/tileset_WEAPON_2.png", 2 , 2);
 2475               68E0     		.data
 2476    05:68E0             	_tileset_WEAPON_2: 	.incchr		"res/maps/tileset_WEAPON_2.png", 2, 2
 2477               E309     		.code
 2478                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 38; #incchr(tileset_WEAPON_4,"res/maps/tileset_WEAPON_4.png", 2 , 2);
 2479               6960     		.data
 2480    05:6960             	_tileset_WEAPON_4: 	.incchr		"res/maps/tileset_WEAPON_4.png", 2, 2
 2481               E309     		.code
 2482                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 39; #incchr(tileset_WEAPON_5,"res/maps/tileset_WEAPON_5.png", 2 , 2);
 2483               69E0     		.data
 2484    05:69E0             	_tileset_WEAPON_5: 	.incchr		"res/maps/tileset_WEAPON_5.png", 2, 2
 2485               E309     		.code
 2486                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 40; #incchr(tileset_WEAPON_8,"res/maps/tileset_WEAPON_8.png", 2 , 2);
 2487               6A60     		.data
 2488    05:6A60             	_tileset_WEAPON_8: 	.incchr		"res/maps/tileset_WEAPON_8.png", 2, 2
 2489               E309     		.code
 2490                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 43; //--------------------------------------------------------------------------------------//
 2491                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 44; //                                        VDC 2                                         //
 2492                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 45; //--------------------------------------------------------------------------------------//
 2493                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 47; #asm
 2494                        		.dbg	clear
 2495               0001     	OPTIMIZE	=	1
 2496               6AE0     			.data
 2497                        	; EXTRACT TILESET
 2498                        	;----------------
 2499    05:6AE0             	_tileset_LV1_BG_B:  incchr	"res/maps/template_LV1_WALL.png"
 2500    05:6CE0             			incchr	"res/maps/template_LV1_DOOR.png"
 2501    05:6FE0             			incchr	"res/maps/tilemap_LV1_BG_B.png", OPTIMIZE
 2502                        	; EXTRACT BLOCKS
 2503                        	;--------------
 2504    09:6000             	blocks_LV1_BG_B1:	incblk	"res/maps/tilemap_LV1_BG_B.png" , 0x1000 ,    0 ,   0 ,  64 , 32 , _tileset_LV1_BG_B ; // 96x16 = 1536 | 32x16 =  512
 2505    09:6800             	blocks_LV1_BG_B2:	incblk	"res/maps/tilemap_LV1_BG_B.png" , 0x1000 , 1024 ,   0 ,  96 , 32 , _tileset_LV1_BG_B ; // 64x16 = 1024 | 32x16 =  512
 2506    09:7000             	blocks_LV1_BG_B3:	incblk	"res/maps/tilemap_LV1_BG_B.png" , 0x1000 ,    0 , 512 ,  64 , 32 , _tileset_LV1_BG_B ; // 96x16 = 1536 | 16x16 =  256
 2507    09:7800             	blocks_LV1_BG_B4:	incblk	"res/maps/tilemap_LV1_BG_B.png" , 0x1000 , 1024 , 512 ,  96 , 32 , _tileset_LV1_BG_B ; // 64x16 = 1024 | 16x16 =  256
 2508                        	; EXTRACT MAPS
 2509                        	;------------
 2510               6000     			align	256
 2511    0A:6000             	MAP_LV1_BG_B1:		incmap	"res/maps/tilemap_LV1_BG_B.png",    0 ,   0 ,  64 , 32 , blocks_LV1_BG_B1 ; // 96x16 = 1536 | 32x16 =  512
 2512               6800     			align	256
 2513    0A:6800             	MAP_LV1_BG_B2:		incmap	"res/maps/tilemap_LV1_BG_B.png", 1024 ,   0 ,  96 , 32 , blocks_LV1_BG_B2 ; // 64x16 = 1024 | 32x16 =  512
 2514               7400     			align	256
 2515    0A:7400             	MAP_LV1_BG_B3:		incmap	"res/maps/tilemap_LV1_BG_B.png",    0 , 512 ,  64 , 32 , blocks_LV1_BG_B3 ; // 96x16 = 1536 | 16x16 =  256
 2516               7C00     			align	256
 2517    0A:7C00             	MAP_LV1_BG_B4:		incmap	"res/maps/tilemap_LV1_BG_B.png", 1024 , 512 ,  96 , 32 , blocks_LV1_BG_B4 ; // 64x16 = 1024 | 16x16 =  256
 2518                        	; MASK (EMPTY)
 2519                        	;----------------
 2520    0B:6800  00 00 00 00	dummy_tbl:	ds	256
         0B:6804  00 00 00 00 
         0B:6808  00 00 00 00 
         0B:680C  00 00 00 00 
         0B:6810  00 00 00 00 
         0B:6814  00 00 00 00 
         0B:6818  00 00 00 00 
         0B:681C  00 00 00 00 
         0B:6820  00 00 00 00 
         0B:6824  00 00 00 00 
         0B:6828  00 00 00 00 
         0B:682C  00 00 00 00 
         0B:6830  00 00 00 00 
         0B:6834  00 00 00 00 
         0B:6838  00 00 00 00 
         0B:683C  00 00 00 00 
         0B:6840  00 00 00 00 
         0B:6844  00 00 00 00 
         0B:6848  00 00 00 00 
         0B:684C  00 00 00 00 
         0B:6850  00 00 00 00 
         0B:6854  00 00 00 00 
         0B:6858  00 00 00 00 
         0B:685C  00 00 00 00 
         0B:6860  00 00 00 00 
         0B:6864  00 00 00 00 
         0B:6868  00 00 00 00 
         0B:686C  00 00 00 00 
         0B:6870  00 00 00 00 
         0B:6874  00 00 00 00 
         0B:6878  00 00 00 00 
         0B:687C  00 00 00 00 
         0B:6880  00 00 00 00 
         0B:6884  00 00 00 00 
         0B:6888  00 00 00 00 
         0B:688C  00 00 00 00 
         0B:6890  00 00 00 00 
         0B:6894  00 00 00 00 
         0B:6898  00 00 00 00 
         0B:689C  00 00 00 00 
         0B:68A0  00 00 00 00 
         0B:68A4  00 00 00 00 
         0B:68A8  00 00 00 00 
         0B:68AC  00 00 00 00 
         0B:68B0  00 00 00 00 
         0B:68B4  00 00 00 00 
         0B:68B8  00 00 00 00 
         0B:68BC  00 00 00 00 
         0B:68C0  00 00 00 00 
         0B:68C4  00 00 00 00 
         0B:68C8  00 00 00 00 
         0B:68CC  00 00 00 00 
         0B:68D0  00 00 00 00 
         0B:68D4  00 00 00 00 
         0B:68D8  00 00 00 00 
         0B:68DC  00 00 00 00 
         0B:68E0  00 00 00 00 
         0B:68E4  00 00 00 00 
         0B:68E8  00 00 00 00 
         0B:68EC  00 00 00 00 
         0B:68F0  00 00 00 00 
         0B:68F4  00 00 00 00 
         0B:68F8  00 00 00 00 
         0B:68FC  00 00 00 00 
 2521                        	; SWIZZLE MAPS
 2522                        	;-------------
 2523    0B:6900             	swizzle	MAP_LV1_BG_B1,  32, 16 ;
 2524    0B:6900             	swizzle	MAP_LV1_BG_B2,  32, 16 ;
 2525    0B:6900             	swizzle	MAP_LV1_BG_B3,  32, 16 ;
 2526    0B:6900             	swizzle	MAP_LV1_BG_B4,  32, 16 ;
 2527                        	; BUILD MULTIMAP
 2528                        	;---------------
 2529    0B:6900             	_multimap_LV1_BG_B:
 2530                        			; 1st line of 5 screens (512x256)
 2531                        			SCREEN MAP_LV1_BG_B1 + 0x0000, blocks_LV1_BG_B1, dummy_tbl, 0
         0B:6900  60 0A      			db	(((MAP_LV1_BG_B1 + 0x0000) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B1 + 0x0000)
         0B:6902  40 09      			db	(((blocks_LV1_BG_B1) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B1)
         0B:6904  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:6906  00 00      			dw	(0)
 2532                        			SCREEN MAP_LV1_BG_B1 + 0x0200, blocks_LV1_BG_B1, dummy_tbl, 0
         0B:6908  62 0A      			db	(((MAP_LV1_BG_B1 + 0x0200) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B1 + 0x0200)
         0B:690A  40 09      			db	(((blocks_LV1_BG_B1) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B1)
         0B:690C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:690E  00 00      			dw	(0)
 2533                        			SCREEN MAP_LV1_BG_B2 + 0x0000, blocks_LV1_BG_B2, dummy_tbl, 0
         0B:6910  68 0A      			db	(((MAP_LV1_BG_B2 + 0x0000) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B2 + 0x0000)
         0B:6912  48 09      			db	(((blocks_LV1_BG_B2) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B2)
         0B:6914  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:6916  00 00      			dw	(0)
 2534                        			SCREEN MAP_LV1_BG_B2 + 0x0200, blocks_LV1_BG_B2, dummy_tbl, 0
         0B:6918  6A 0A      			db	(((MAP_LV1_BG_B2 + 0x0200) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B2 + 0x0200)
         0B:691A  48 09      			db	(((blocks_LV1_BG_B2) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B2)
         0B:691C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:691E  00 00      			dw	(0)
 2535                        			SCREEN MAP_LV1_BG_B2 + 0x0400, blocks_LV1_BG_B2, dummy_tbl, 0
         0B:6920  6C 0A      			db	(((MAP_LV1_BG_B2 + 0x0400) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B2 + 0x0400)
         0B:6922  48 09      			db	(((blocks_LV1_BG_B2) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B2)
         0B:6924  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:6926  00 00      			dw	(0)
 2536                        			; 2nd line of 5 screens (512x256)
 2537                        			SCREEN MAP_LV1_BG_B1 + 0x0400, blocks_LV1_BG_B1, dummy_tbl, 0
         0B:6928  64 0A      			db	(((MAP_LV1_BG_B1 + 0x0400) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B1 + 0x0400)
         0B:692A  40 09      			db	(((blocks_LV1_BG_B1) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B1)
         0B:692C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:692E  00 00      			dw	(0)
 2538                        			SCREEN MAP_LV1_BG_B1 + 0x0600, blocks_LV1_BG_B1, dummy_tbl, 0
         0B:6930  66 0A      			db	(((MAP_LV1_BG_B1 + 0x0600) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B1 + 0x0600)
         0B:6932  40 09      			db	(((blocks_LV1_BG_B1) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B1)
         0B:6934  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:6936  00 00      			dw	(0)
 2539                        			SCREEN MAP_LV1_BG_B2 + 0x0600, blocks_LV1_BG_B2, dummy_tbl, 0
         0B:6938  6E 0A      			db	(((MAP_LV1_BG_B2 + 0x0600) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B2 + 0x0600)
         0B:693A  48 09      			db	(((blocks_LV1_BG_B2) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B2)
         0B:693C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:693E  00 00      			dw	(0)
 2540                        			SCREEN MAP_LV1_BG_B2 + 0x0800, blocks_LV1_BG_B2, dummy_tbl, 0
         0B:6940  70 0A      			db	(((MAP_LV1_BG_B2 + 0x0800) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B2 + 0x0800)
         0B:6942  48 09      			db	(((blocks_LV1_BG_B2) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B2)
         0B:6944  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:6946  00 00      			dw	(0)
 2541                        			SCREEN MAP_LV1_BG_B2 + 0x0A00, blocks_LV1_BG_B2, dummy_tbl, 0
         0B:6948  72 0A      			db	(((MAP_LV1_BG_B2 + 0x0A00) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B2 + 0x0A00)
         0B:694A  48 09      			db	(((blocks_LV1_BG_B2) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B2)
         0B:694C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:694E  00 00      			dw	(0)
 2542                        			; 3rd line of 5 screens (512x256)
 2543                        			SCREEN MAP_LV1_BG_B3 + 0x0000, blocks_LV1_BG_B3, dummy_tbl, 0
         0B:6950  74 0A      			db	(((MAP_LV1_BG_B3 + 0x0000) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B3 + 0x0000)
         0B:6952  50 09      			db	(((blocks_LV1_BG_B3) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B3)
         0B:6954  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:6956  00 00      			dw	(0)
 2544                        			SCREEN MAP_LV1_BG_B3 + 0x0200, blocks_LV1_BG_B3, dummy_tbl, 0
         0B:6958  76 0A      			db	(((MAP_LV1_BG_B3 + 0x0200) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B3 + 0x0200)
         0B:695A  50 09      			db	(((blocks_LV1_BG_B3) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B3)
         0B:695C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:695E  00 00      			dw	(0)
 2545                        			SCREEN MAP_LV1_BG_B4 + 0x0000, blocks_LV1_BG_B4, dummy_tbl, 0
         0B:6960  7C 0A      			db	(((MAP_LV1_BG_B4 + 0x0000) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B4 + 0x0000)
         0B:6962  58 09      			db	(((blocks_LV1_BG_B4) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B4)
         0B:6964  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:6966  00 00      			dw	(0)
 2546                        			SCREEN MAP_LV1_BG_B4 + 0x0200, blocks_LV1_BG_B4, dummy_tbl, 0
         0B:6968  7E 0A      			db	(((MAP_LV1_BG_B4 + 0x0200) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B4 + 0x0200)
         0B:696A  58 09      			db	(((blocks_LV1_BG_B4) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B4)
         0B:696C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:696E  00 00      			dw	(0)
 2547                        			SCREEN MAP_LV1_BG_B4 + 0x0400, blocks_LV1_BG_B4, dummy_tbl, 0
         0B:6970  60 0B      			db	(((MAP_LV1_BG_B4 + 0x0400) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B4 + 0x0400)
         0B:6972  58 09      			db	(((blocks_LV1_BG_B4) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B4)
         0B:6974  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:6976  00 00      			dw	(0)
 2548                        			; 4th line of 5 screens (512x256)
 2549                        			SCREEN MAP_LV1_BG_B3 + 0x0400, blocks_LV1_BG_B3, dummy_tbl, 0
         0B:6978  78 0A      			db	(((MAP_LV1_BG_B3 + 0x0400) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B3 + 0x0400)
         0B:697A  50 09      			db	(((blocks_LV1_BG_B3) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B3)
         0B:697C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:697E  00 00      			dw	(0)
 2550                        			SCREEN MAP_LV1_BG_B3 + 0x0600, blocks_LV1_BG_B3, dummy_tbl, 0
         0B:6980  7A 0A      			db	(((MAP_LV1_BG_B3 + 0x0600) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B3 + 0x0600)
         0B:6982  50 09      			db	(((blocks_LV1_BG_B3) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B3)
         0B:6984  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:6986  00 00      			dw	(0)
 2551                        			SCREEN MAP_LV1_BG_B4 + 0x0600, blocks_LV1_BG_B4, dummy_tbl, 0
         0B:6988  62 0B      			db	(((MAP_LV1_BG_B4 + 0x0600) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B4 + 0x0600)
         0B:698A  58 09      			db	(((blocks_LV1_BG_B4) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B4)
         0B:698C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:698E  00 00      			dw	(0)
 2552                        			SCREEN MAP_LV1_BG_B4 + 0x0800, blocks_LV1_BG_B4, dummy_tbl, 0
         0B:6990  64 0B      			db	(((MAP_LV1_BG_B4 + 0x0800) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B4 + 0x0800)
         0B:6992  58 09      			db	(((blocks_LV1_BG_B4) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B4)
         0B:6994  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:6996  00 00      			dw	(0)
 2553                        			SCREEN MAP_LV1_BG_B4 + 0x0A00, blocks_LV1_BG_B4, dummy_tbl, 0
         0B:6998  66 0B      			db	(((MAP_LV1_BG_B4 + 0x0A00) & $1FFF) | $6000) >> 8, bank(MAP_LV1_BG_B4 + 0x0A00)
         0B:699A  58 09      			db	(((blocks_LV1_BG_B4) & $1FFF) | $4000) >> 8, bank(blocks_LV1_BG_B4)
         0B:699C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0B:699E  00 00      			dw	(0)
 2554                        	;//--------------------------------------------------------------------------------------//
 2555                        	;//                                        VDC 1                                         //
 2556                        	;//--------------------------------------------------------------------------------------//
 2557                        	; EXTRACT TILESET
 2558                        	;----------------
 2559    0B:69A0             	_tileset_HUD:	incchr	"res/maps/template_LIFEBAR_1.png"
 2560    0B:69E0             			incchr	"res/maps/template_LIFEBAR_2.png"
 2561    0B:6A20             			incchr	"res/maps/template_LIFEBAR_3.png"
 2562    0B:6A60             			incchr	"res/maps/template_LIFEBAR_4.png"
 2563    0B:6AA0             			incchr	"res/maps/template_LIFEBAR_5.png"
 2564    0B:6AE0             			incchr	"res/maps/tileset_WEAPON_1.png"
 2565    0B:6B60             			incchr	"res/maps/tileset_ARMOR_2.png"
 2566    0B:6BE0             			incchr	"res/maps/tilemap_HUD.png", OPTIMIZE
 2567                        	; EXTRACT BLOCKS
 2568                        	;--------------
 2569    0B:7000             	blocks_HUD1:	incblk	"res/maps/tilemap_HUD.png" , 0x1000 ,    0 ,   0 , 128 , 64 , _tileset_HUD ; // 128x16 = 2048 | 64x16 = 1024
 2570    0B:7800             	blocks_HUD2:	incblk	"res/maps/tilemap_HUD.png" , 0x1000 , 2048 ,   0 ,  32 , 64 , _tileset_HUD ; //  32x16 =  512 | 64x16 = 1024
 2571                        	; EXTRACT MAPS
 2572                        	;------------
 2573               6000     			align	256
 2574    0C:6000             	MAP_HUD1:		incmap	"res/maps/tilemap_HUD.png",    0 ,   0 , 128 , 64 , blocks_HUD1 ; // 128x16 = 2048 | 64x16 = 1024
 2575    0C:8000             			flagmap "res/maps/collision_LV1.png",       0 ,   0 , 128 , 64 , MAP_HUD1
 2576               6000     			align	256
 2577    0D:6000             	MAP_HUD2:		incmap	"res/maps/tilemap_HUD.png", 2048 ,   0 ,  32 , 64 , blocks_HUD2 ; //  32x16 =  512 | 64x16 = 1024
 2578    0D:6800             			flagmap "res/maps/collision_LV1.png",    2048 ,   0 ,  32 , 64 , MAP_HUD2
 2579                        	; SWIZZLE MAPS
 2580                        	;-------------
 2581    0D:6800             	swizzle	MAP_HUD1,  32, 16 ;
 2582    0D:6800             	swizzle	MAP_HUD2,  32, 16 ;
 2583                        	; BUILD MULTIMAP
 2584                        	;---------------
 2585    0D:6800             	_multimap_LV1_BG_A:
 2586                        			; 1st line of 5 screens (512x256)
 2587                        			SCREEN MAP_HUD1 + 0x0000, blocks_HUD1, dummy_tbl, 0
         0D:6800  60 0C      			db	(((MAP_HUD1 + 0x0000) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0000)
         0D:6802  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:6804  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:6806  00 00      			dw	(0)
 2588                        			SCREEN MAP_HUD1 + 0x0200, blocks_HUD1, dummy_tbl, 0
         0D:6808  62 0C      			db	(((MAP_HUD1 + 0x0200) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0200)
         0D:680A  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:680C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:680E  00 00      			dw	(0)
 2589                        			SCREEN MAP_HUD1 + 0x0400, blocks_HUD1, dummy_tbl, 0
         0D:6810  64 0C      			db	(((MAP_HUD1 + 0x0400) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0400)
         0D:6812  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:6814  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:6816  00 00      			dw	(0)
 2590                        			SCREEN MAP_HUD1 + 0x0600, blocks_HUD1, dummy_tbl, 0
         0D:6818  66 0C      			db	(((MAP_HUD1 + 0x0600) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0600)
         0D:681A  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:681C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:681E  00 00      			dw	(0)
 2591                        			SCREEN MAP_HUD2 + 0x0000, blocks_HUD2, dummy_tbl, 0
         0D:6820  60 0D      			db	(((MAP_HUD2 + 0x0000) & $1FFF) | $6000) >> 8, bank(MAP_HUD2 + 0x0000)
         0D:6822  58 0B      			db	(((blocks_HUD2) & $1FFF) | $4000) >> 8, bank(blocks_HUD2)
         0D:6824  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:6826  00 00      			dw	(0)
 2592                        			; 2nd line of 5 screens (512x256)
 2593                        			SCREEN MAP_HUD1 + 0x0800, blocks_HUD1, dummy_tbl, 0
         0D:6828  68 0C      			db	(((MAP_HUD1 + 0x0800) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0800)
         0D:682A  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:682C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:682E  00 00      			dw	(0)
 2594                        			SCREEN MAP_HUD1 + 0x0A00, blocks_HUD1, dummy_tbl, 0
         0D:6830  6A 0C      			db	(((MAP_HUD1 + 0x0A00) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0A00)
         0D:6832  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:6834  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:6836  00 00      			dw	(0)
 2595                        			SCREEN MAP_HUD1 + 0x0C00, blocks_HUD1, dummy_tbl, 0
         0D:6838  6C 0C      			db	(((MAP_HUD1 + 0x0C00) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0C00)
         0D:683A  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:683C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:683E  00 00      			dw	(0)
 2596                        			SCREEN MAP_HUD1 + 0x0E00, blocks_HUD1, dummy_tbl, 0
         0D:6840  6E 0C      			db	(((MAP_HUD1 + 0x0E00) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x0E00)
         0D:6842  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:6844  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:6846  00 00      			dw	(0)
 2597                        			SCREEN MAP_HUD2 + 0x0200, blocks_HUD2, dummy_tbl, 0
         0D:6848  62 0D      			db	(((MAP_HUD2 + 0x0200) & $1FFF) | $6000) >> 8, bank(MAP_HUD2 + 0x0200)
         0D:684A  58 0B      			db	(((blocks_HUD2) & $1FFF) | $4000) >> 8, bank(blocks_HUD2)
         0D:684C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:684E  00 00      			dw	(0)
 2598                        			; 3rd line of 5 screens (512x256)
 2599                        			SCREEN MAP_HUD1 + 0x1000, blocks_HUD1, dummy_tbl, 0
         0D:6850  70 0C      			db	(((MAP_HUD1 + 0x1000) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1000)
         0D:6852  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:6854  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:6856  00 00      			dw	(0)
 2600                        			SCREEN MAP_HUD1 + 0x1200, blocks_HUD1, dummy_tbl, 0
         0D:6858  72 0C      			db	(((MAP_HUD1 + 0x1200) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1200)
         0D:685A  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:685C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:685E  00 00      			dw	(0)
 2601                        			SCREEN MAP_HUD1 + 0x1400, blocks_HUD1, dummy_tbl, 0
         0D:6860  74 0C      			db	(((MAP_HUD1 + 0x1400) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1400)
         0D:6862  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:6864  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:6866  00 00      			dw	(0)
 2602                        			SCREEN MAP_HUD1 + 0x1600, blocks_HUD1, dummy_tbl, 0
         0D:6868  76 0C      			db	(((MAP_HUD1 + 0x1600) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1600)
         0D:686A  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:686C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:686E  00 00      			dw	(0)
 2603                        			SCREEN MAP_HUD2 + 0x0400, blocks_HUD2, dummy_tbl, 0
         0D:6870  64 0D      			db	(((MAP_HUD2 + 0x0400) & $1FFF) | $6000) >> 8, bank(MAP_HUD2 + 0x0400)
         0D:6872  58 0B      			db	(((blocks_HUD2) & $1FFF) | $4000) >> 8, bank(blocks_HUD2)
         0D:6874  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:6876  00 00      			dw	(0)
 2604                        			; 4th line of 5 screens (512x256)
 2605                        			SCREEN MAP_HUD1 + 0x1800, blocks_HUD1, dummy_tbl, 0
         0D:6878  78 0C      			db	(((MAP_HUD1 + 0x1800) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1800)
         0D:687A  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:687C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:687E  00 00      			dw	(0)
 2606                        			SCREEN MAP_HUD1 + 0x1A00, blocks_HUD1, dummy_tbl, 0
         0D:6880  7A 0C      			db	(((MAP_HUD1 + 0x1A00) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1A00)
         0D:6882  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:6884  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:6886  00 00      			dw	(0)
 2607                        			SCREEN MAP_HUD1 + 0x1C00, blocks_HUD1, dummy_tbl, 0
         0D:6888  7C 0C      			db	(((MAP_HUD1 + 0x1C00) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1C00)
         0D:688A  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:688C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:688E  00 00      			dw	(0)
 2608                        			SCREEN MAP_HUD1 + 0x1E00, blocks_HUD1, dummy_tbl, 0
         0D:6890  7E 0C      			db	(((MAP_HUD1 + 0x1E00) & $1FFF) | $6000) >> 8, bank(MAP_HUD1 + 0x1E00)
         0D:6892  50 0B      			db	(((blocks_HUD1) & $1FFF) | $4000) >> 8, bank(blocks_HUD1)
         0D:6894  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:6896  00 00      			dw	(0)
 2609                        			SCREEN MAP_HUD2 + 0x0600, blocks_HUD2, dummy_tbl, 0
         0D:6898  66 0D      			db	(((MAP_HUD2 + 0x0600) & $1FFF) | $6000) >> 8, bank(MAP_HUD2 + 0x0600)
         0D:689A  58 0B      			db	(((blocks_HUD2) & $1FFF) | $4000) >> 8, bank(blocks_HUD2)
         0D:689C  68 0B      			db	(((dummy_tbl) & $1FFF) | $6000) >> 8, bank(dummy_tbl)
         0D:689E  00 00      			dw	(0)
 2610               E309     			.code
 2611                        	
 2612                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 207; #endasm
 2613                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 211; //--------------------------------------------------------------------------------------//
 2614                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 212; //                                   EXTRACT PALETTES                                   //
 2615                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 213; //--------------------------------------------------------------------------------------//
 2616                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 215; #incpal(palette_LV1,"res/maps/tilemap_LV1_BG_B.png");
 2617               68A0     		.data
 2618    0D:68A0             	_palette_LV1:	.incpal		"res/maps/tilemap_LV1_BG_B.png"
 2619               E309     		.code
 2620                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 224; //**************************************************************************************//
 2621                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 225; //                                                                                      //
 2622                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 226; //                                         SHOP                                         //
 2623                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 227; //                                                                                      //
 2624                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 228; //**************************************************************************************//
 2625                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 230; #asm
 2626                        		.dbg	clear
 2627               0001     	OPTIMIZE	=	1
 2628               6AA0     			.data
 2629                        	;//--------------------------------------------------------------------------------------//
 2630                        	;//                                        VDC 1                                         //
 2631                        	;//--------------------------------------------------------------------------------------//
 2632                        	; EXTRACT TILESET
 2633                        	;----------------
 2634    0D:6AA0             	_tileset_SHOP_BG_B:		incchr	"res/maps/template_ITEM_1.png"
 2635    0D:6B20             			incchr	"res/maps/template_ITEM_2.png"
 2636    0D:6BA0             			incchr	"res/maps/template_ITEM_3.png"
 2637    0D:6C20             			incchr	"res/maps/template_ITEM_4.png"
 2638    0D:6CA0             			incchr	"res/maps/template_ITEM_5.png"
 2639    0D:6D20             			incchr	"res/maps/template_ITEM_6.png"
 2640    0D:6DA0             			incchr	"res/maps/template_ITEM_7.png"
 2641    0D:6E20             			incchr	"res/maps/template_ITEM_8.png"
 2642    0D:6EA0             			incchr	"res/maps/template_ITEM_9.png"
 2643    0D:6F20             			incchr	"res/maps/template_ITEM_10.png"
 2644    0D:6FA0             			incchr	"res/maps/tilemap_SHOP_BG_B.png", OPTIMIZE
 2645               E309     			.code
 2646                        	
 2647                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 254; #endasm
 2648                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 257; // EXTRACT BLOCKS //
 2649                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 258; #incblk(blocks_SHOP_BG_B, "res/maps/tilemap_SHOP_BG_B.png", 0x1000, tileset_SHOP_BG_B);
 2650               6400     		.data
 2651    0F:6800             	_blocks_SHOP_BG_B:	.incblk		"res/maps/tilemap_SHOP_BG_B.png", 4096, _tileset_SHOP_BG_B
 2652               E309     		.code
 2653                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 260; // EXTRACT MAP //
 2654                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 261; #incmap(map_SHOP_BG_B, "res/maps/tilemap_SHOP_BG_B.png", blocks_SHOP_BG_B);
 2655               7000     		.data
 2656    0F:7000             	_map_SHOP_BG_B:	.incmap		"res/maps/tilemap_SHOP_BG_B.png", _blocks_SHOP_BG_B
 2657               E309     		.code
 2658                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 264; //--------------------------------------------------------------------------------------//
 2659                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 265; //                                        ITEMS                                         //
 2660                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 266; //--------------------------------------------------------------------------------------//
 2661                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 268; #incchr(tiles_ITEM_WEAPON_2,"res/maps/tiles_ITEM_WEAPON_2.png", 2 , 2);
 2662               70E0     		.data
 2663    0F:70E0             	_tiles_ITEM_WEAPON_2: 	.incchr		"res/maps/tiles_ITEM_WEAPON_2.png", 2, 2
 2664               E309     		.code
 2665                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 269; #incchr(tiles_ITEM_WEAPON_3,"res/maps/tiles_ITEM_WEAPON_3.png", 2 , 2);
 2666               7160     		.data
 2667    0F:7160             	_tiles_ITEM_WEAPON_3: 	.incchr		"res/maps/tiles_ITEM_WEAPON_3.png", 2, 2
 2668               E309     		.code
 2669                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 270; #incchr(tiles_ITEM_WEAPON_4,"res/maps/tiles_ITEM_WEAPON_4.png", 2 , 2);
 2670               71E0     		.data
 2671    0F:71E0             	_tiles_ITEM_WEAPON_4: 	.incchr		"res/maps/tiles_ITEM_WEAPON_4.png", 2, 2
 2672               E309     		.code
 2673                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 271; #incchr(tiles_ITEM_WEAPON_5,"res/maps/tiles_ITEM_WEAPON_5.png", 2 , 2);
 2674               7260     		.data
 2675    0F:7260             	_tiles_ITEM_WEAPON_5: 	.incchr		"res/maps/tiles_ITEM_WEAPON_5.png", 2, 2
 2676               E309     		.code
 2677                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 272; #incchr(tiles_ITEM_KEY,"res/maps/tiles_ITEM_KEY.png", 2 , 2);
 2678               72E0     		.data
 2679    0F:72E0             	_tiles_ITEM_KEY: 	.incchr		"res/maps/tiles_ITEM_KEY.png", 2, 2
 2680               E309     		.code
 2681                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 273; #incchr(tiles_ITEM_ARMOR_2,"res/maps/tiles_ITEM_ARMOR_2.png", 2 , 2);
 2682               7360     		.data
 2683    0F:7360             	_tiles_ITEM_ARMOR_2: 	.incchr		"res/maps/tiles_ITEM_ARMOR_2.png", 2, 2
 2684               E309     		.code
 2685                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 274; #incchr(tiles_ITEM_ARMOR_3,"res/maps/tiles_ITEM_ARMOR_3.png", 2 , 2);
 2686               73E0     		.data
 2687    0F:73E0             	_tiles_ITEM_ARMOR_3: 	.incchr		"res/maps/tiles_ITEM_ARMOR_3.png", 2, 2
 2688               E309     		.code
 2689                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 275; #incchr(tiles_ITEM_ARMOR_4,"res/maps/tiles_ITEM_ARMOR_4.png", 2 , 2);
 2690               7460     		.data
 2691    0F:7460             	_tiles_ITEM_ARMOR_4: 	.incchr		"res/maps/tiles_ITEM_ARMOR_4.png", 2, 2
 2692               E309     		.code
 2693                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 276; #incchr(tiles_ITEM_ARMOR_5,"res/maps/tiles_ITEM_ARMOR_5.png", 2 , 2);
 2694               74E0     		.data
 2695    0F:74E0             	_tiles_ITEM_ARMOR_5: 	.incchr		"res/maps/tiles_ITEM_ARMOR_5.png", 2, 2
 2696               E309     		.code
 2697                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 277; #incchr(tiles_ITEM_POTION,"res/maps/tiles_ITEM_POTION.png", 2 , 2);
 2698               7560     		.data
 2699    0F:7560             	_tiles_ITEM_POTION: 	.incchr		"res/maps/tiles_ITEM_POTION.png", 2, 2
 2700               E309     		.code
 2701                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 279; //#incchr(tileset_NUMBERS_SHOP_FONT,"res/maps/tiles_NUMBERS_SHOP_FONT.png");
 2702                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 282; //--------------------------------------------------------------------------------------//
 2703                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 283; //                                   EXTRACT PALETTES                                   //
 2704                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 284; //--------------------------------------------------------------------------------------//
 2705                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 286; #incpal(palette_SHOP,"res/maps/tilemap_SHOP_BG_B.png");
 2706               75E0     		.data
 2707    0F:75E0             	_palette_SHOP:	.incpal		"res/maps/tilemap_SHOP_BG_B.png"
 2708               E309     		.code
 2709                        		.dbg	line,	"include\gfx_BG_LEVELS.c", 287; #incpal(palette_SHOP_ITEMS,"res/palettes/palette_SHOP_ITEMS.png");
 2710               77E0     		.data
 2711    0F:77E0             	_palette_SHOP_ITEMS:	.incpal		"res/palettes/palette_SHOP_ITEMS.png"
 2712               E309     		.code
 2713                        		.dbg	line,	"main.c", 13; #include "include/gfx_SPRITES.c"
 2714                        		.dbg	line,	"include\gfx_SPRITES.c", 1; #include "huc.h"
 2715                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
 2716                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
 2717                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
 2718                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
 2719                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
 2720                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
 2721                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
 2722                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
 2723                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
 2724                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
 2725                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
 2726                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 2727                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 2728                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 2729                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
 2730                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
 2731                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
 2732                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
 2733                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
 2734                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
 2735                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
 2736                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
 2737                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
 2738                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
 2739                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
 2740                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
 2741                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
 2742                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
 2743                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
 2744                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
 2745                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
 2746                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
 2747                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
 2748                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
 2749                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
 2750                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
 2751                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
 2752                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
 2753                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
 2754                        		.dbg	line,	"include\gfx_SPRITES.c", 9; #incspr(tiles_SPR_SELECTOR,"res/sprites/tiles_SPR_SELECTOR.png")
 2755               79E0     		.data
 2756    0F:79E0             	_tiles_SPR_SELECTOR:	.incspr		"res/sprites/tiles_SPR_SELECTOR.png"
 2757               E309     		.code
 2758                        		.dbg	line,	"include\gfx_SPRITES.c", 12; // EXTRACT PLAYER TILES //
 2759                        		.dbg	line,	"include\gfx_SPRITES.c", 13; #incspr(tiles_SPR_PLAYER_ARMOR,"res/sprites/tiles_SPR_PLAYER_ARMOR.png")
 2760               7A60     		.data
 2761    0F:7A60             	_tiles_SPR_PLAYER_ARMOR:	.incspr		"res/sprites/tiles_SPR_PLAYER_ARMOR.png"
 2762               E309     		.code
 2763                        		.dbg	line,	"include\gfx_SPRITES.c", 14; #incspr(tiles_SPR_PLAYER_NAKED,"res/sprites/tiles_SPR_PLAYER_NAKED.png")
 2764               6C60     		.data
 2765    11:6C60             	_tiles_SPR_PLAYER_NAKED:	.incspr		"res/sprites/tiles_SPR_PLAYER_NAKED.png"
 2766               E309     		.code
 2767                        		.dbg	line,	"include\gfx_SPRITES.c", 16; // EXTRACT PLAYER PALETTE //
 2768                        		.dbg	line,	"include\gfx_SPRITES.c", 17; #incpal(palette_PLAYER_1,"res/palettes/palette_PLAYER_1.png");
 2769               7E60     		.data
 2770    12:7E60             	_palette_PLAYER_1:	.incpal		"res/palettes/palette_PLAYER_1.png"
 2771               E309     		.code
 2772                        		.dbg	line,	"include\gfx_SPRITES.c", 18; #incpal(palette_PLAYER_4,"res/palettes/palette_PLAYER_4.png");
 2773               6060     		.data
 2774    13:6060             	_palette_PLAYER_4:	.incpal		"res/palettes/palette_PLAYER_4.png"
 2775               E309     		.code
 2776                        		.dbg	line,	"include\gfx_SPRITES.c", 19; #incpal(palette_PLAYER_5,"res/palettes/palette_PLAYER_5.png");
 2777               6260     		.data
 2778    13:6260             	_palette_PLAYER_5:	.incpal		"res/palettes/palette_PLAYER_5.png"
 2779               E309     		.code
 2780                        		.dbg	line,	"include\gfx_SPRITES.c", 20; #incpal(palette_PLAYER_8,"res/palettes/palette_PLAYER_8.png");
 2781               6460     		.data
 2782    13:6460             	_palette_PLAYER_8:	.incpal		"res/palettes/palette_PLAYER_8.png"
 2783               E309     		.code
 2784                        		.dbg	line,	"include\gfx_SPRITES.c", 23; // EXTRACT WEAPONS TILES //
 2785                        		.dbg	line,	"include\gfx_SPRITES.c", 24; #incspr(tiles_SPR_CHAIN,"res/sprites/tiles_SPR_CHAIN.png")
 2786               6660     		.data
 2787    13:6660             	_tiles_SPR_CHAIN:	.incspr		"res/sprites/tiles_SPR_CHAIN.png"
 2788               E309     		.code
 2789                        		.dbg	line,	"include\gfx_SPRITES.c", 25; #incspr(tiles_SPR_WEAPON_0,"res/sprites/tiles_SPR_WEAPON_0.png")
 2790               66E0     		.data
 2791    13:66E0             	_tiles_SPR_WEAPON_0:	.incspr		"res/sprites/tiles_SPR_WEAPON_0.png"
 2792               E309     		.code
 2793                        		.dbg	line,	"include\gfx_SPRITES.c", 26; #incspr(tiles_SPR_WEAPON_1,"res/sprites/tiles_SPR_WEAPON_1.png")
 2794               6960     		.data
 2795    13:6960             	_tiles_SPR_WEAPON_1:	.incspr		"res/sprites/tiles_SPR_WEAPON_1.png"
 2796               E309     		.code
 2797                        		.dbg	line,	"include\gfx_SPRITES.c", 27; #incspr(tiles_SPR_WEAPON_2,"res/sprites/tiles_SPR_WEAPON_2.png")
 2798               6BE0     		.data
 2799    13:6BE0             	_tiles_SPR_WEAPON_2:	.incspr		"res/sprites/tiles_SPR_WEAPON_2.png"
 2800               E309     		.code
 2801                        		.dbg	line,	"include\gfx_SPRITES.c", 28; #incspr(tiles_SPR_WEAPON_3,"res/sprites/tiles_SPR_WEAPON_3.png")
 2802               6E60     		.data
 2803    13:6E60             	_tiles_SPR_WEAPON_3:	.incspr		"res/sprites/tiles_SPR_WEAPON_3.png"
 2804               E309     		.code
 2805                        		.dbg	line,	"include\gfx_SPRITES.c", 29; #incspr(tiles_SPR_WEAPON_4,"res/sprites/tiles_SPR_WEAPON_4.png")
 2806               70E0     		.data
 2807    13:70E0             	_tiles_SPR_WEAPON_4:	.incspr		"res/sprites/tiles_SPR_WEAPON_4.png"
 2808               E309     		.code
 2809                        		.dbg	line,	"include\gfx_SPRITES.c", 32; #incspr(tiles_SPR_HIT,"res/sprites/tiles_SPR_HIT.png")
 2810               7360     		.data
 2811    13:7360             	_tiles_SPR_HIT:	.incspr		"res/sprites/tiles_SPR_HIT.png"
 2812               E309     		.code
 2813                        		.dbg	line,	"include\gfx_SPRITES.c", 35; // EXTRACT OBJECTS TILES //
 2814                        		.dbg	line,	"include\gfx_SPRITES.c", 36; #incspr(tiles_SPR_BARREL,"res/sprites/tiles_SPR_BARREL.png")
 2815               73E0     		.data
 2816    13:73E0             	_tiles_SPR_BARREL:	.incspr		"res/sprites/tiles_SPR_BARREL.png"
 2817               E309     		.code
 2818                        		.dbg	line,	"include\gfx_SPRITES.c", 37; #incspr(tiles_SPR_CHEST,"res/sprites/tiles_SPR_CHEST.png")
 2819               7460     		.data
 2820    13:7460             	_tiles_SPR_CHEST:	.incspr		"res/sprites/tiles_SPR_CHEST.png"
 2821               E309     		.code
 2822                        		.dbg	line,	"include\gfx_SPRITES.c", 38; #incspr(tiles_SPR_COIN_1,"res/sprites/tiles_SPR_COIN_1.png")
 2823               6060     		.data
 2824    14:6060             	_tiles_SPR_COIN_1:	.incspr		"res/sprites/tiles_SPR_COIN_1.png"
 2825               E309     		.code
 2826                        		.dbg	line,	"include\gfx_SPRITES.c", 39; #incspr(tiles_SPR_COIN_5,"res/sprites/tiles_SPR_COIN_5.png")
 2827               60E0     		.data
 2828    14:60E0             	_tiles_SPR_COIN_5:	.incspr		"res/sprites/tiles_SPR_COIN_5.png"
 2829               E309     		.code
 2830                        		.dbg	line,	"include\gfx_SPRITES.c", 40; #incspr(tiles_SPR_COIN_10,"res/sprites/tiles_SPR_COIN_10.png")
 2831               6160     		.data
 2832    14:6160             	_tiles_SPR_COIN_10:	.incspr		"res/sprites/tiles_SPR_COIN_10.png"
 2833               E309     		.code
 2834                        		.dbg	line,	"include\gfx_SPRITES.c", 41; #incspr(tiles_SPR_COIN_50,"res/sprites/tiles_SPR_COIN_50.png")
 2835               61E0     		.data
 2836    14:61E0             	_tiles_SPR_COIN_50:	.incspr		"res/sprites/tiles_SPR_COIN_50.png"
 2837               E309     		.code
 2838                        		.dbg	line,	"include\gfx_SPRITES.c", 42; #incspr(tiles_SPR_COIN_100,"res/sprites/tiles_SPR_COIN_100.png")
 2839               6260     		.data
 2840    14:6260             	_tiles_SPR_COIN_100:	.incspr		"res/sprites/tiles_SPR_COIN_100.png"
 2841               E309     		.code
 2842                        		.dbg	line,	"include\gfx_SPRITES.c", 43; #incspr(tiles_SPR_COIN_500,"res/sprites/tiles_SPR_COIN_500.png")
 2843               62E0     		.data
 2844    14:62E0             	_tiles_SPR_COIN_500:	.incspr		"res/sprites/tiles_SPR_COIN_500.png"
 2845               E309     		.code
 2846                        		.dbg	line,	"include\gfx_SPRITES.c", 44; #incspr(tiles_SPR_COIN_1000,"res/sprites/tiles_SPR_COIN_1000.png")
 2847               6360     		.data
 2848    14:6360             	_tiles_SPR_COIN_1000:	.incspr		"res/sprites/tiles_SPR_COIN_1000.png"
 2849               E309     		.code
 2850                        		.dbg	line,	"include\gfx_SPRITES.c", 45; #incspr(tiles_SPR_FRUIT,"res/sprites/tiles_SPR_FRUIT.png")
 2851               63E0     		.data
 2852    14:63E0             	_tiles_SPR_FRUIT:	.incspr		"res/sprites/tiles_SPR_FRUIT.png"
 2853               E309     		.code
 2854                        		.dbg	line,	"include\gfx_SPRITES.c", 46; #incspr(tiles_SPR_GRAY_KEY,"res/sprites/tiles_SPR_GRAY_KEY.png")
 2855               6460     		.data
 2856    14:6460             	_tiles_SPR_GRAY_KEY:	.incspr		"res/sprites/tiles_SPR_GRAY_KEY.png"
 2857               E309     		.code
 2858                        		.dbg	line,	"include\gfx_SPRITES.c", 47; #incspr(tiles_SPR_GOLD_KEY,"res/sprites/tiles_SPR_GOLD_KEY.png")
 2859               64E0     		.data
 2860    14:64E0             	_tiles_SPR_GOLD_KEY:	.incspr		"res/sprites/tiles_SPR_GOLD_KEY.png"
 2861               E309     		.code
 2862                        		.dbg	line,	"include\gfx_SPRITES.c", 48; #incspr(tiles_SPR_HOURGLASS,"res/sprites/tiles_SPR_HOURGLASS.png")
 2863               6560     		.data
 2864    14:6560             	_tiles_SPR_HOURGLASS:	.incspr		"res/sprites/tiles_SPR_HOURGLASS.png"
 2865               E309     		.code
 2866                        		.dbg	line,	"include\gfx_SPRITES.c", 49; #incspr(tiles_SPR_LIFE,"res/sprites/tiles_SPR_LIFE.png")
 2867               65E0     		.data
 2868    14:65E0             	_tiles_SPR_LIFE:	.incspr		"res/sprites/tiles_SPR_LIFE.png"
 2869               E309     		.code
 2870                        		.dbg	line,	"include\gfx_SPRITES.c", 50; #incspr(tiles_SPR_OCTOPUS,"res/sprites/tiles_SPR_OCTOPUS.png")
 2871               6660     		.data
 2872    14:6660             	_tiles_SPR_OCTOPUS:	.incspr		"res/sprites/tiles_SPR_OCTOPUS.png"
 2873               E309     		.code
 2874                        		.dbg	line,	"include\gfx_SPRITES.c", 51; #incspr(tiles_SPR_POT,"res/sprites/tiles_SPR_POT.png")
 2875               66E0     		.data
 2876    14:66E0             	_tiles_SPR_POT:	.incspr		"res/sprites/tiles_SPR_POT.png"
 2877               E309     		.code
 2878                        		.dbg	line,	"include\gfx_SPRITES.c", 52; #incspr(tiles_SPR_POW,"res/sprites/tiles_SPR_POW.png")
 2879               6AE0     		.data
 2880    14:6AE0             	_tiles_SPR_POW:	.incspr		"res/sprites/tiles_SPR_POW.png"
 2881               E309     		.code
 2882                        		.dbg	line,	"include\gfx_SPRITES.c", 53; #incspr(tiles_SPR_STAR,"res/sprites/tiles_SPR_STAR.png")
 2883               6B60     		.data
 2884    14:6B60             	_tiles_SPR_STAR:	.incspr		"res/sprites/tiles_SPR_STAR.png"
 2885               E309     		.code
 2886                        		.dbg	line,	"include\gfx_SPRITES.c", 54; #incspr(tiles_SPR_BAMBOO,"res/sprites/tiles_SPR_BAMBOO.png")
 2887               6BE0     		.data
 2888    14:6BE0             	_tiles_SPR_BAMBOO:	.incspr		"res/sprites/tiles_SPR_BAMBOO.png"
 2889               E309     		.code
 2890                        		.dbg	line,	"include\gfx_SPRITES.c", 55; #incspr(tiles_SPR_YASHICHI,"res/sprites/tiles_SPR_YASHICHI.png")
 2891               6C60     		.data
 2892    14:6C60             	_tiles_SPR_YASHICHI:	.incspr		"res/sprites/tiles_SPR_YASHICHI.png"
 2893               E309     		.code
 2894                        		.dbg	line,	"include\gfx_SPRITES.c", 56; #incspr(tiles_SPR_ELEPHANT,"res/sprites/tiles_SPR_ELEPHANT.png")
 2895               6CE0     		.data
 2896    14:6CE0             	_tiles_SPR_ELEPHANT:	.incspr		"res/sprites/tiles_SPR_ELEPHANT.png"
 2897               E309     		.code
 2898                        		.dbg	line,	"include\gfx_SPRITES.c", 57; #incspr(tiles_SPR_DRAGONFLY,"res/sprites/tiles_SPR_DRAGONFLY.png")
 2899               6D60     		.data
 2900    14:6D60             	_tiles_SPR_DRAGONFLY:	.incspr		"res/sprites/tiles_SPR_DRAGONFLY.png"
 2901               E309     		.code
 2902                        		.dbg	line,	"include\gfx_SPRITES.c", 58; #incspr(tiles_SPR_COW,"res/sprites/tiles_SPR_COW.png")
 2903               6DE0     		.data
 2904    14:6DE0             	_tiles_SPR_COW:	.incspr		"res/sprites/tiles_SPR_COW.png"
 2905               E309     		.code
 2906                        		.dbg	line,	"include\gfx_SPRITES.c", 59; #incspr(tiles_SPR_MOBICHAN,"res/sprites/tiles_SPR_MOBICHAN.png")
 2907               6E60     		.data
 2908    14:6E60             	_tiles_SPR_MOBICHAN:	.incspr		"res/sprites/tiles_SPR_MOBICHAN.png"
 2909               E309     		.code
 2910                        		.dbg	line,	"include\gfx_SPRITES.c", 61; // EXTRACT OBJECTS PALETTE //
 2911                        		.dbg	line,	"include\gfx_SPRITES.c", 62; #incpal(palette_objects_1,"res/palettes/palette_objects_1.png");
 2912               6EE0     		.data
 2913    14:6EE0             	_palette_objects_1:	.incpal		"res/palettes/palette_objects_1.png"
 2914               E309     		.code
 2915                        		.dbg	line,	"include\gfx_SPRITES.c", 63; #incpal(palette_objects_2,"res/palettes/palette_objects_2.png");
 2916               70E0     		.data
 2917    14:70E0             	_palette_objects_2:	.incpal		"res/palettes/palette_objects_2.png"
 2918               E309     		.code
 2919                        		.dbg	line,	"include\gfx_SPRITES.c", 66; // EXTRACT NPCS TILES //
 2920                        		.dbg	line,	"include\gfx_SPRITES.c", 67; #incspr(tiles_SPR_NPC,"res/sprites/tiles_SPR_NPC.png")
 2921               72E0     		.data
 2922    14:72E0             	_tiles_SPR_NPC:	.incspr		"res/sprites/tiles_SPR_NPC.png"
 2923               E309     		.code
 2924                        		.dbg	line,	"include\gfx_SPRITES.c", 71; // EXTRACT CURSOR TILES //
 2925                        		.dbg	line,	"include\gfx_SPRITES.c", 72; #incspr(tiles_SPR_CURSOR,"res/sprites/tiles_SPR_CURSOR.png")
 2926               7EE0     		.data
 2927    14:7EE0             	_tiles_SPR_CURSOR:	.incspr		"res/sprites/tiles_SPR_CURSOR.png"
 2928               E309     		.code
 2929                        		.dbg	line,	"include\gfx_SPRITES.c", 77; // EXTRACT ENEMIES TILES //
 2930                        		.dbg	line,	"include\gfx_SPRITES.c", 78; #incspr(tiles_SPR_ORC,"res/sprites/tiles_SPR_ORC.png")
 2931               60E0     		.data
 2932    15:60E0             	_tiles_SPR_ORC:	.incspr		"res/sprites/tiles_SPR_ORC.png"
 2933               E309     		.code
 2934                        		.dbg	line,	"include\gfx_SPRITES.c", 79; #incspr(tiles_SPR_SERPENT,"res/sprites/tiles_SPR_SERPENT.png")
 2935               7DE0     		.data
 2936    15:7DE0             	_tiles_SPR_SERPENT:	.incspr		"res/sprites/tiles_SPR_SERPENT.png"
 2937               E309     		.code
 2938                        		.dbg	line,	"include\gfx_SPRITES.c", 80; #incspr(tiles_SPR_PLANT,"res/sprites/tiles_SPR_PLANT.png")
 2939               69E0     		.data
 2940    16:69E0             	_tiles_SPR_PLANT:	.incspr		"res/sprites/tiles_SPR_PLANT.png"
 2941               E309     		.code
 2942                        		.dbg	line,	"include\gfx_SPRITES.c", 82; // EXTRACT ENEMIES PALETTES //
 2943                        		.dbg	line,	"include\gfx_SPRITES.c", 83; #incpal(palette_SPR_ORC,"res/sprites/tiles_SPR_ORC.png")
 2944               63E0     		.data
 2945    17:63E0             	_palette_SPR_ORC:	.incpal		"res/sprites/tiles_SPR_ORC.png"
 2946               E309     		.code
 2947                        		.dbg	line,	"include\gfx_SPRITES.c", 84; #incpal(palette_SPR_PLANT,"res/sprites/tiles_SPR_PLANT.png")
 2948               65E0     		.data
 2949    17:65E0             	_palette_SPR_PLANT:	.incpal		"res/sprites/tiles_SPR_PLANT.png"
 2950               E309     		.code
 2951                        		.dbg	line,	"main.c", 16; #include "include/tables_NPC.c"
 2952                        		.dbg	line,	"include\tables_NPC.c", 1; //-----------------------------------------------------------------------------//
 2953                        		.dbg	line,	"include\tables_NPC.c", 2; //                                                                             //
 2954                        		.dbg	line,	"include\tables_NPC.c", 3; //                                   LEVEL 1                                   //
 2955                        		.dbg	line,	"include\tables_NPC.c", 4; //                                                                             //
 2956                        		.dbg	line,	"include\tables_NPC.c", 5; //-----------------------------------------------------------------------------//
 2957                        		.dbg	line,	"include\tables_NPC.c", 7; const char              TABLE_NPC_TYPE_LV1[NPC_NUMBER_LV1]              =   {
 2958                        		.dbg	line,	"include\tables_NPC.c", 8; TYPE_NPC_SHOP,
 2959                        		.dbg	line,	"include\tables_NPC.c", 9; TYPE_NPC_REWARD
 2960                        		.dbg	line,	"include\tables_NPC.c", 10; };
 2961                        		.dbg	line,	"include\tables_NPC.c", 13; const signed int        TABLE_NPC_X_POS_REF_LV1[NPC_NUMBER_LV1]         =   {
 2962                        		.dbg	line,	"include\tables_NPC.c", 14; 912,
 2963                        		.dbg	line,	"include\tables_NPC.c", 15; 1232
 2964                        		.dbg	line,	"include\tables_NPC.c", 16; };
 2965                        		.dbg	line,	"include\tables_NPC.c", 19; const signed int        TABLE_NPC_Y_POS_REF_LV1[NPC_NUMBER_LV1]         =   {
 2966                        		.dbg	line,	"include\tables_NPC.c", 20; 576,
 2967                        		.dbg	line,	"include\tables_NPC.c", 21; 400
 2968                        		.dbg	line,	"include\tables_NPC.c", 22; };
 2969                        		.dbg	line,	"main.c", 17; #include "include/tables_OBJECT.c"
 2970                        		.dbg	line,	"include\tables_OBJECT.c", 1; //-----------------------------------------------------------------------------//
 2971                        		.dbg	line,	"include\tables_OBJECT.c", 2; //                                                                             //
 2972                        		.dbg	line,	"include\tables_OBJECT.c", 3; //                                   LEVEL 1                                   //
 2973                        		.dbg	line,	"include\tables_OBJECT.c", 4; //                                                                             //
 2974                        		.dbg	line,	"include\tables_OBJECT.c", 5; //-----------------------------------------------------------------------------//
 2975                        		.dbg	line,	"include\tables_OBJECT.c", 7; const char              TABLE_OBJECT_TYPE_LV1[OBJECT_NUMBER_LV1]      =   {
 2976                        		.dbg	line,	"include\tables_OBJECT.c", 8; TYPE_HOURGLASS,
 2977                        		.dbg	line,	"include\tables_OBJECT.c", 9; TYPE_POT,
 2978                        		.dbg	line,	"include\tables_OBJECT.c", 10; TYPE_POT,
 2979                        		.dbg	line,	"include\tables_OBJECT.c", 11; TYPE_POT,
 2980                        		.dbg	line,	"include\tables_OBJECT.c", 12; TYPE_POT,
 2981                        		.dbg	line,	"include\tables_OBJECT.c", 13; TYPE_POT,
 2982                        		.dbg	line,	"include\tables_OBJECT.c", 14; TYPE_POT,
 2983                        		.dbg	line,	"include\tables_OBJECT.c", 15; TYPE_POW,
 2984                        		.dbg	line,	"include\tables_OBJECT.c", 16; TYPE_POT,
 2985                        		.dbg	line,	"include\tables_OBJECT.c", 17; TYPE_POT,
 2986                        		.dbg	line,	"include\tables_OBJECT.c", 19; //
 2987                        		.dbg	line,	"include\tables_OBJECT.c", 20; TYPE_POT,
 2988                        		.dbg	line,	"include\tables_OBJECT.c", 21; TYPE_POT,
 2989                        		.dbg	line,	"include\tables_OBJECT.c", 22; TYPE_POT,
 2990                        		.dbg	line,	"include\tables_OBJECT.c", 23; TYPE_POT,
 2991                        		.dbg	line,	"include\tables_OBJECT.c", 24; TYPE_POT,
 2992                        		.dbg	line,	"include\tables_OBJECT.c", 25; TYPE_POT,
 2993                        		.dbg	line,	"include\tables_OBJECT.c", 26; TYPE_POT,
 2994                        		.dbg	line,	"include\tables_OBJECT.c", 27; TYPE_POT,
 2995                        		.dbg	line,	"include\tables_OBJECT.c", 28; TYPE_POT,
 2996                        		.dbg	line,	"include\tables_OBJECT.c", 29; TYPE_POT,
 2997                        		.dbg	line,	"include\tables_OBJECT.c", 31; //
 2998                        		.dbg	line,	"include\tables_OBJECT.c", 32; TYPE_POT,
 2999                        		.dbg	line,	"include\tables_OBJECT.c", 33; TYPE_POT,
 3000                        		.dbg	line,	"include\tables_OBJECT.c", 34; TYPE_POT
 3001                        		.dbg	line,	"include\tables_OBJECT.c", 35; };
 3002                        		.dbg	line,	"include\tables_OBJECT.c", 38; const signed int        TABLE_OBJECT_X_POS_REF_LV1[OBJECT_NUMBER_LV1] =   {
 3003                        		.dbg	line,	"include\tables_OBJECT.c", 39; 1680,
 3004                        		.dbg	line,	"include\tables_OBJECT.c", 40; 1280,
 3005                        		.dbg	line,	"include\tables_OBJECT.c", 41; 1472,
 3006                        		.dbg	line,	"include\tables_OBJECT.c", 42; 1440,
 3007                        		.dbg	line,	"include\tables_OBJECT.c", 43; 1168,
 3008                        		.dbg	line,	"include\tables_OBJECT.c", 44; 1200,
 3009                        		.dbg	line,	"include\tables_OBJECT.c", 45; 960,
 3010                        		.dbg	line,	"include\tables_OBJECT.c", 46; 984,
 3011                        		.dbg	line,	"include\tables_OBJECT.c", 47; 1360,
 3012                        		.dbg	line,	"include\tables_OBJECT.c", 48; 1392,
 3013                        		.dbg	line,	"include\tables_OBJECT.c", 50; //
 3014                        		.dbg	line,	"include\tables_OBJECT.c", 51; 1552,
 3015                        		.dbg	line,	"include\tables_OBJECT.c", 52; 1680,
 3016                        		.dbg	line,	"include\tables_OBJECT.c", 53; 1712,
 3017                        		.dbg	line,	"include\tables_OBJECT.c", 54; 1744,
 3018                        		.dbg	line,	"include\tables_OBJECT.c", 55; 1248,
 3019                        		.dbg	line,	"include\tables_OBJECT.c", 56; 1280,
 3020                        		.dbg	line,	"include\tables_OBJECT.c", 57; 1168,
 3021                        		.dbg	line,	"include\tables_OBJECT.c", 58; 1040,
 3022                        		.dbg	line,	"include\tables_OBJECT.c", 59; 640,
 3023                        		.dbg	line,	"include\tables_OBJECT.c", 60; 672,
 3024                        		.dbg	line,	"include\tables_OBJECT.c", 62; //
 3025                        		.dbg	line,	"include\tables_OBJECT.c", 63; 336,
 3026                        		.dbg	line,	"include\tables_OBJECT.c", 64; 368,
 3027                        		.dbg	line,	"include\tables_OBJECT.c", 65; 416
 3028                        		.dbg	line,	"include\tables_OBJECT.c", 66; };
 3029                        		.dbg	line,	"include\tables_OBJECT.c", 69; const signed int        TABLE_OBJECT_Y_POS_REF_LV1[OBJECT_NUMBER_LV1] =   {
 3030                        		.dbg	line,	"include\tables_OBJECT.c", 70; 384,
 3031                        		.dbg	line,	"include\tables_OBJECT.c", 71; 416,
 3032                        		.dbg	line,	"include\tables_OBJECT.c", 72; 480,
 3033                        		.dbg	line,	"include\tables_OBJECT.c", 73; 496,
 3034                        		.dbg	line,	"include\tables_OBJECT.c", 74; 560,
 3035                        		.dbg	line,	"include\tables_OBJECT.c", 75; 560,
 3036                        		.dbg	line,	"include\tables_OBJECT.c", 76; 592,
 3037                        		.dbg	line,	"include\tables_OBJECT.c", 77; 592,
 3038                        		.dbg	line,	"include\tables_OBJECT.c", 78; 592,
 3039                        		.dbg	line,	"include\tables_OBJECT.c", 79; 592,
 3040                        		.dbg	line,	"include\tables_OBJECT.c", 81; //
 3041                        		.dbg	line,	"include\tables_OBJECT.c", 82; 704,
 3042                        		.dbg	line,	"include\tables_OBJECT.c", 83; 720,
 3043                        		.dbg	line,	"include\tables_OBJECT.c", 84; 720,
 3044                        		.dbg	line,	"include\tables_OBJECT.c", 85; 720,
 3045                        		.dbg	line,	"include\tables_OBJECT.c", 86; 736,
 3046                        		.dbg	line,	"include\tables_OBJECT.c", 87; 736,
 3047                        		.dbg	line,	"include\tables_OBJECT.c", 88; 752,
 3048                        		.dbg	line,	"include\tables_OBJECT.c", 89; 848,
 3049                        		.dbg	line,	"include\tables_OBJECT.c", 90; 880,
 3050                        		.dbg	line,	"include\tables_OBJECT.c", 91; 880,
 3051                        		.dbg	line,	"include\tables_OBJECT.c", 93; //
 3052                        		.dbg	line,	"include\tables_OBJECT.c", 94; 896,
 3053                        		.dbg	line,	"include\tables_OBJECT.c", 95; 896,
 3054                        		.dbg	line,	"include\tables_OBJECT.c", 96; 896
 3055                        		.dbg	line,	"include\tables_OBJECT.c", 97; };
 3056                        		.dbg	line,	"include\tables_OBJECT.c", 100; /*const char              TABLE_REWARD_TYPE_LV1[OBJECT_NUMBER_LV1]       =   {
 3057                        		.dbg	line,	"include\tables_OBJECT.c", 101; TYPE_POT
 3058                        		.dbg	line,	"include\tables_OBJECT.c", 102; TYPE_POT,
 3059                        		.dbg	line,	"include\tables_OBJECT.c", 103; TYPE_POT,
 3060                        		.dbg	line,	"include\tables_OBJECT.c", 104; TYPE_POT,
 3061                        		.dbg	line,	"include\tables_OBJECT.c", 105; TYPE_POT,
 3062                        		.dbg	line,	"include\tables_OBJECT.c", 106; TYPE_POT,
 3063                        		.dbg	line,	"include\tables_OBJECT.c", 107; TYPE_POT,
 3064                        		.dbg	line,	"include\tables_OBJECT.c", 108; TYPE_POW,
 3065                        		.dbg	line,	"include\tables_OBJECT.c", 109; TYPE_POT,
 3066                        		.dbg	line,	"include\tables_OBJECT.c", 110; TYPE_POT,
 3067                        		.dbg	line,	"include\tables_OBJECT.c", 112; //
 3068                        		.dbg	line,	"include\tables_OBJECT.c", 113; TYPE_POT,
 3069                        		.dbg	line,	"include\tables_OBJECT.c", 114; TYPE_POT,
 3070                        		.dbg	line,	"include\tables_OBJECT.c", 115; TYPE_POT,
 3071                        		.dbg	line,	"include\tables_OBJECT.c", 116; TYPE_POT,
 3072                        		.dbg	line,	"include\tables_OBJECT.c", 117; TYPE_POT,
 3073                        		.dbg	line,	"include\tables_OBJECT.c", 118; TYPE_POT,
 3074                        		.dbg	line,	"include\tables_OBJECT.c", 119; TYPE_POT,
 3075                        		.dbg	line,	"include\tables_OBJECT.c", 120; TYPE_POT,
 3076                        		.dbg	line,	"include\tables_OBJECT.c", 122; //
 3077                        		.dbg	line,	"include\tables_OBJECT.c", 123; TYPE_GRAY_KEY,
 3078                        		.dbg	line,	"include\tables_OBJECT.c", 124; TYPE_GRAY_KEY,
 3079                        		.dbg	line,	"include\tables_OBJECT.c", 125; TYPE_GRAY_KEY,
 3080                        		.dbg	line,	"include\tables_OBJECT.c", 126; TYPE_COIN_5,
 3081                        		.dbg	line,	"include\tables_OBJECT.c", 127; TYPE_GRAY_KEY
 3082                        		.dbg	line,	"include\tables_OBJECT.c", 128; };*/
 3083                        		.dbg	line,	"include\tables_OBJECT.c", 133; const signed int        TABLE_CHEST_X_POS_REF_LV1[CHEST_NUMBER_LV1]   =   {
 3084                        		.dbg	line,	"include\tables_OBJECT.c", 134; 1072,
 3085                        		.dbg	line,	"include\tables_OBJECT.c", 135; 816
 3086                        		.dbg	line,	"include\tables_OBJECT.c", 136; };
 3087                        		.dbg	line,	"include\tables_OBJECT.c", 139; const signed int        TABLE_CHEST_Y_POS_REF_LV1[CHEST_NUMBER_LV1]   =   {
 3088                        		.dbg	line,	"include\tables_OBJECT.c", 140; 832,
 3089                        		.dbg	line,	"include\tables_OBJECT.c", 141; 848
 3090                        		.dbg	line,	"main.c", 17; };
 3091                        		.dbg	line,	"main.c", 18; #include "include/tables_PLAYER.c"
 3092                        		.dbg	line,	"include\tables_PLAYER.c", 3; const unsigned char     *TABLE_PLAYER_TILES_ADR[2]     =   {
 3093                        		.dbg	line,	"include\tables_PLAYER.c", 4; &tiles_SPR_PLAYER_ARMOR,
 3094                        		.dbg	line,	"include\tables_PLAYER.c", 5; &tiles_SPR_PLAYER_NAKED
 3095                        		.dbg	line,	"include\tables_PLAYER.c", 6; };
 3096                        		.dbg	line,	"include\tables_PLAYER.c", 9; const unsigned char     TABLE_PLAYER_TILES_BANK[2]     =   {
 3097                        		.dbg	line,	"include\tables_PLAYER.c", 10; ^tiles_SPR_PLAYER_ARMOR,
 3098                        		.dbg	line,	"include\tables_PLAYER.c", 11; ^tiles_SPR_PLAYER_NAKED
 3099                        		.dbg	line,	"include\tables_PLAYER.c", 12; };
 3100                        		.dbg	line,	"include\tables_PLAYER.c", 15; const signed char       TABLE_PLAYER_JUMP_V[35]     =   {
 3101                        		.dbg	line,	"include\tables_PLAYER.c", 16; // UPWARD
 3102                        		.dbg	line,	"include\tables_PLAYER.c", 17; -4,
 3103                        		.dbg	line,	"include\tables_PLAYER.c", 18; -5,
 3104                        		.dbg	line,	"include\tables_PLAYER.c", 19; -10,
 3105                        		.dbg	line,	"include\tables_PLAYER.c", 20; -4,
 3106                        		.dbg	line,	"include\tables_PLAYER.c", 21; -4,
 3107                        		.dbg	line,	"include\tables_PLAYER.c", 22; -7,
 3108                        		.dbg	line,	"include\tables_PLAYER.c", 23; -6,
 3109                        		.dbg	line,	"include\tables_PLAYER.c", 24; -3,
 3110                        		.dbg	line,	"include\tables_PLAYER.c", 25; -5,
 3111                        		.dbg	line,	"include\tables_PLAYER.c", 26; -2,
 3112                        		.dbg	line,	"include\tables_PLAYER.c", 27; -4,
 3113                        		.dbg	line,	"include\tables_PLAYER.c", 28; -1,
 3114                        		.dbg	line,	"include\tables_PLAYER.c", 29; -1,
 3115                        		.dbg	line,	"include\tables_PLAYER.c", 30; -1,
 3116                        		.dbg	line,	"include\tables_PLAYER.c", 31; -1,
 3117                        		.dbg	line,	"include\tables_PLAYER.c", 32; 0,
 3118                        		.dbg	line,	"include\tables_PLAYER.c", 33; 0,
 3119                        		.dbg	line,	"include\tables_PLAYER.c", 34; 0,
 3120                        		.dbg	line,	"include\tables_PLAYER.c", 35; 0,
 3121                        		.dbg	line,	"include\tables_PLAYER.c", 36; // DOWNWARD
 3122                        		.dbg	line,	"include\tables_PLAYER.c", 37; 1,
 3123                        		.dbg	line,	"include\tables_PLAYER.c", 38; 1,
 3124                        		.dbg	line,	"include\tables_PLAYER.c", 39; 1,
 3125                        		.dbg	line,	"include\tables_PLAYER.c", 40; 1,
 3126                        		.dbg	line,	"include\tables_PLAYER.c", 41; 4,
 3127                        		.dbg	line,	"include\tables_PLAYER.c", 42; 2,
 3128                        		.dbg	line,	"include\tables_PLAYER.c", 43; 5,
 3129                        		.dbg	line,	"include\tables_PLAYER.c", 44; 3,
 3130                        		.dbg	line,	"include\tables_PLAYER.c", 45; 6,
 3131                        		.dbg	line,	"include\tables_PLAYER.c", 46; 7,
 3132                        		.dbg	line,	"include\tables_PLAYER.c", 47; 4,
 3133                        		.dbg	line,	"include\tables_PLAYER.c", 48; 4,
 3134                        		.dbg	line,	"include\tables_PLAYER.c", 49; 10,
 3135                        		.dbg	line,	"include\tables_PLAYER.c", 50; 4,
 3136                        		.dbg	line,	"include\tables_PLAYER.c", 51; 4,
 3137                        		.dbg	line,	"include\tables_PLAYER.c", 52; 5
 3138                        		.dbg	line,	"include\tables_PLAYER.c", 53; };
 3139                        		.dbg	line,	"include\tables_PLAYER.c", 56; const signed char       TABLE_PLAYER_FALL[21]       =   {
 3140                        		.dbg	line,	"include\tables_PLAYER.c", 57; 0,
 3141                        		.dbg	line,	"include\tables_PLAYER.c", 58; 0,
 3142                        		.dbg	line,	"include\tables_PLAYER.c", 59; 0,
 3143                        		.dbg	line,	"include\tables_PLAYER.c", 60; 0,
 3144                        		.dbg	line,	"include\tables_PLAYER.c", 61; 1,
 3145                        		.dbg	line,	"include\tables_PLAYER.c", 62; 1,
 3146                        		.dbg	line,	"include\tables_PLAYER.c", 63; 1,
 3147                        		.dbg	line,	"include\tables_PLAYER.c", 64; 1,
 3148                        		.dbg	line,	"include\tables_PLAYER.c", 65; 2,
 3149                        		.dbg	line,	"include\tables_PLAYER.c", 66; 2,
 3150                        		.dbg	line,	"include\tables_PLAYER.c", 67; 2,
 3151                        		.dbg	line,	"include\tables_PLAYER.c", 68; 2,
 3152                        		.dbg	line,	"include\tables_PLAYER.c", 69; 3,
 3153                        		.dbg	line,	"include\tables_PLAYER.c", 70; 3,
 3154                        		.dbg	line,	"include\tables_PLAYER.c", 71; 3,
 3155                        		.dbg	line,	"include\tables_PLAYER.c", 72; 4,
 3156                        		.dbg	line,	"include\tables_PLAYER.c", 73; 4,
 3157                        		.dbg	line,	"include\tables_PLAYER.c", 74; 4,
 3158                        		.dbg	line,	"include\tables_PLAYER.c", 75; 4,
 3159                        		.dbg	line,	"include\tables_PLAYER.c", 76; 4,
 3160                        		.dbg	line,	"include\tables_PLAYER.c", 77; 5
 3161                        		.dbg	line,	"include\tables_PLAYER.c", 78; };
 3162                        		.dbg	line,	"include\tables_PLAYER.c", 81; const signed char       TABLE_PLAYER_JUMP_LADDER[30]    =   {
 3163                        		.dbg	line,	"include\tables_PLAYER.c", 82; // UPWARD
 3164                        		.dbg	line,	"include\tables_PLAYER.c", 83; -4,
 3165                        		.dbg	line,	"include\tables_PLAYER.c", 84; -4,
 3166                        		.dbg	line,	"include\tables_PLAYER.c", 85; -3,
 3167                        		.dbg	line,	"include\tables_PLAYER.c", 86; -3,
 3168                        		.dbg	line,	"include\tables_PLAYER.c", 87; -3,
 3169                        		.dbg	line,	"include\tables_PLAYER.c", 88; -2,
 3170                        		.dbg	line,	"include\tables_PLAYER.c", 89; -2,
 3171                        		.dbg	line,	"include\tables_PLAYER.c", 90; -2,
 3172                        		.dbg	line,	"include\tables_PLAYER.c", 91; -1,
 3173                        		.dbg	line,	"include\tables_PLAYER.c", 92; -1,
 3174                        		.dbg	line,	"include\tables_PLAYER.c", 93; -1,
 3175                        		.dbg	line,	"include\tables_PLAYER.c", 94; -1,
 3176                        		.dbg	line,	"include\tables_PLAYER.c", 95; -1,
 3177                        		.dbg	line,	"include\tables_PLAYER.c", 96; 0,
 3178                        		.dbg	line,	"include\tables_PLAYER.c", 97; 0,
 3179                        		.dbg	line,	"include\tables_PLAYER.c", 98; 0,
 3180                        		.dbg	line,	"include\tables_PLAYER.c", 99; 0,
 3181                        		.dbg	line,	"include\tables_PLAYER.c", 100; // DOWNWARD
 3182                        		.dbg	line,	"include\tables_PLAYER.c", 101; 1,
 3183                        		.dbg	line,	"include\tables_PLAYER.c", 102; 1,
 3184                        		.dbg	line,	"include\tables_PLAYER.c", 103; 1,
 3185                        		.dbg	line,	"include\tables_PLAYER.c", 104; 1,
 3186                        		.dbg	line,	"include\tables_PLAYER.c", 105; 1,
 3187                        		.dbg	line,	"include\tables_PLAYER.c", 106; 2,
 3188                        		.dbg	line,	"include\tables_PLAYER.c", 107; 2,
 3189                        		.dbg	line,	"include\tables_PLAYER.c", 108; 2,
 3190                        		.dbg	line,	"include\tables_PLAYER.c", 109; 3,
 3191                        		.dbg	line,	"include\tables_PLAYER.c", 110; 3,
 3192                        		.dbg	line,	"include\tables_PLAYER.c", 111; 3,
 3193                        		.dbg	line,	"include\tables_PLAYER.c", 112; 4,
 3194                        		.dbg	line,	"include\tables_PLAYER.c", 113; 4
 3195                        		.dbg	line,	"include\tables_PLAYER.c", 114; };
 3196                        		.dbg	line,	"include\tables_PLAYER.c", 123; const unsigned char     *TABLE_WEAPON_TILES_ADR[5]     =   {
 3197                        		.dbg	line,	"include\tables_PLAYER.c", 124; &tiles_SPR_WEAPON_0,
 3198                        		.dbg	line,	"include\tables_PLAYER.c", 125; &tiles_SPR_WEAPON_1,
 3199                        		.dbg	line,	"include\tables_PLAYER.c", 126; &tiles_SPR_WEAPON_2,
 3200                        		.dbg	line,	"include\tables_PLAYER.c", 127; &tiles_SPR_WEAPON_3,
 3201                        		.dbg	line,	"include\tables_PLAYER.c", 128; &tiles_SPR_WEAPON_4
 3202                        		.dbg	line,	"include\tables_PLAYER.c", 129; };
 3203                        		.dbg	line,	"include\tables_PLAYER.c", 132; const unsigned char     TABLE_WEAPON_TILES_BANK[5]     =   {
 3204                        		.dbg	line,	"include\tables_PLAYER.c", 133; ^tiles_SPR_WEAPON_0,
 3205                        		.dbg	line,	"include\tables_PLAYER.c", 134; ^tiles_SPR_WEAPON_1,
 3206                        		.dbg	line,	"include\tables_PLAYER.c", 135; ^tiles_SPR_WEAPON_2,
 3207                        		.dbg	line,	"include\tables_PLAYER.c", 136; ^tiles_SPR_WEAPON_3,
 3208                        		.dbg	line,	"include\tables_PLAYER.c", 137; ^tiles_SPR_WEAPON_4
 3209                        		.dbg	line,	"main.c", 18; };
 3210                        		.dbg	line,	"main.c", 19; #include "include/tables_SHOP.c"
 3211                        		.dbg	line,	"include\tables_SHOP.c", 1; //-----------------------------------------------------------------------------//
 3212                        		.dbg	line,	"include\tables_SHOP.c", 2; //                                                                             //
 3213                        		.dbg	line,	"include\tables_SHOP.c", 3; //                                   LEVEL 1                                   //
 3214                        		.dbg	line,	"include\tables_SHOP.c", 4; //                                                                             //
 3215                        		.dbg	line,	"include\tables_SHOP.c", 5; //-----------------------------------------------------------------------------//
 3216                        		.dbg	line,	"include\tables_SHOP.c", 7; const char              TABLE_SHOP_ITEMS_LV1[10]        =   {
 3217                        		.dbg	line,	"include\tables_SHOP.c", 8; TYPE_ITEM_WEAPON_2,
 3218                        		.dbg	line,	"include\tables_SHOP.c", 9; TYPE_ITEM_WEAPON_3,
 3219                        		.dbg	line,	"include\tables_SHOP.c", 10; TYPE_ITEM_WEAPON_4,
 3220                        		.dbg	line,	"include\tables_SHOP.c", 11; TYPE_ITEM_WEAPON_5,
 3221                        		.dbg	line,	"include\tables_SHOP.c", 12; TYPE_ITEM_KEY,
 3222                        		.dbg	line,	"include\tables_SHOP.c", 14; TYPE_ITEM_ARMOR_2,
 3223                        		.dbg	line,	"include\tables_SHOP.c", 15; TYPE_ITEM_ARMOR_3,
 3224                        		.dbg	line,	"include\tables_SHOP.c", 16; TYPE_ITEM_ARMOR_4,
 3225                        		.dbg	line,	"include\tables_SHOP.c", 17; TYPE_ITEM_ARMOR_5,
 3226                        		.dbg	line,	"include\tables_SHOP.c", 18; TYPE_ITEM_POTION
 3227                        		.dbg	line,	"include\tables_SHOP.c", 19; };
 3228                        		.dbg	line,	"include\tables_SHOP.c", 22; const int               TABLE_SHOP_PRICES_LV1[10]       =   {
 3229                        		.dbg	line,	"include\tables_SHOP.c", 23; 100,
 3230                        		.dbg	line,	"include\tables_SHOP.c", 24; 1000,
 3231                        		.dbg	line,	"include\tables_SHOP.c", 25; 2400,
 3232                        		.dbg	line,	"include\tables_SHOP.c", 26; 9600,
 3233                        		.dbg	line,	"include\tables_SHOP.c", 27; 30,
 3234                        		.dbg	line,	"include\tables_SHOP.c", 28; 80,
 3235                        		.dbg	line,	"include\tables_SHOP.c", 29; 300,
 3236                        		.dbg	line,	"include\tables_SHOP.c", 30; 800,
 3237                        		.dbg	line,	"include\tables_SHOP.c", 31; 1600,
 3238                        		.dbg	line,	"include\tables_SHOP.c", 32; 150
 3239                        		.dbg	line,	"include\tables_SHOP.c", 33; };
 3240                        		.dbg	line,	"include\tables_SHOP.c", 36; const unsigned char     *TABLE_SHOP_ITEMS_TILES_ADR[10]     =   {
 3241                        		.dbg	line,	"include\tables_SHOP.c", 37; &tiles_ITEM_WEAPON_2,
 3242                        		.dbg	line,	"include\tables_SHOP.c", 38; &tiles_ITEM_WEAPON_3,
 3243                        		.dbg	line,	"include\tables_SHOP.c", 39; &tiles_ITEM_WEAPON_4,
 3244                        		.dbg	line,	"include\tables_SHOP.c", 40; &tiles_ITEM_WEAPON_5,
 3245                        		.dbg	line,	"include\tables_SHOP.c", 41; &tiles_ITEM_KEY,
 3246                        		.dbg	line,	"include\tables_SHOP.c", 42; &tiles_ITEM_ARMOR_2,
 3247                        		.dbg	line,	"include\tables_SHOP.c", 43; &tiles_ITEM_ARMOR_3,
 3248                        		.dbg	line,	"include\tables_SHOP.c", 44; &tiles_ITEM_ARMOR_4,
 3249                        		.dbg	line,	"include\tables_SHOP.c", 45; &tiles_ITEM_ARMOR_5,
 3250                        		.dbg	line,	"include\tables_SHOP.c", 46; &tiles_ITEM_POTION
 3251                        		.dbg	line,	"include\tables_SHOP.c", 47; };
 3252                        		.dbg	line,	"include\tables_SHOP.c", 50; const unsigned char     TABLE_SHOP_ITEMS_TILES_BANK[10]     =   {
 3253                        		.dbg	line,	"include\tables_SHOP.c", 51; ^tiles_ITEM_WEAPON_2,
 3254                        		.dbg	line,	"include\tables_SHOP.c", 52; ^tiles_ITEM_WEAPON_3,
 3255                        		.dbg	line,	"include\tables_SHOP.c", 53; ^tiles_ITEM_WEAPON_4,
 3256                        		.dbg	line,	"include\tables_SHOP.c", 54; ^tiles_ITEM_WEAPON_5,
 3257                        		.dbg	line,	"include\tables_SHOP.c", 55; ^tiles_ITEM_KEY,
 3258                        		.dbg	line,	"include\tables_SHOP.c", 56; ^tiles_ITEM_ARMOR_2,
 3259                        		.dbg	line,	"include\tables_SHOP.c", 57; ^tiles_ITEM_ARMOR_3,
 3260                        		.dbg	line,	"include\tables_SHOP.c", 58; ^tiles_ITEM_ARMOR_4,
 3261                        		.dbg	line,	"include\tables_SHOP.c", 59; ^tiles_ITEM_ARMOR_5,
 3262                        		.dbg	line,	"include\tables_SHOP.c", 60; ^tiles_ITEM_POTION
 3263                        		.dbg	line,	"include\tables_SHOP.c", 61; };
 3264                        		.dbg	line,	"include\tables_SHOP.c", 64; const char              TABLE_CURSOR_POS_X[11]              =   {
 3265                        		.dbg	line,	"include\tables_SHOP.c", 65; 24,
 3266                        		.dbg	line,	"include\tables_SHOP.c", 66; 56,
 3267                        		.dbg	line,	"include\tables_SHOP.c", 67; 96,
 3268                        		.dbg	line,	"include\tables_SHOP.c", 68; 136,
 3269                        		.dbg	line,	"include\tables_SHOP.c", 69; 176,
 3270                        		.dbg	line,	"include\tables_SHOP.c", 70; 24,
 3271                        		.dbg	line,	"include\tables_SHOP.c", 71; 56,
 3272                        		.dbg	line,	"include\tables_SHOP.c", 72; 96,
 3273                        		.dbg	line,	"include\tables_SHOP.c", 73; 136,
 3274                        		.dbg	line,	"include\tables_SHOP.c", 74; 176,
 3275                        		.dbg	line,	"include\tables_SHOP.c", 75; 212
 3276                        		.dbg	line,	"include\tables_SHOP.c", 76; };
 3277                        		.dbg	line,	"main.c", 23; #include "include/routines_LEVELS.c"
 3278                        		.dbg	line,	"include\routines_LEVELS.c", 1; #include "huc.h"
 3279                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
 3280                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
 3281                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
 3282                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
 3283                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
 3284                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
 3285                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
 3286                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
 3287                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
 3288                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
 3289                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
 3290                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 3291                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 3292                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 3293                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
 3294                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
 3295                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
 3296                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
 3297                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
 3298                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
 3299                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
 3300                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
 3301                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
 3302                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
 3303                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
 3304                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
 3305                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
 3306                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
 3307                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
 3308                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
 3309                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
 3310                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
 3311                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
 3312                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
 3313                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
 3314                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
 3315                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
 3316                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
 3317                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
 3318                        		.dbg	line,	"include\routines_LEVELS.c", 2; #include "hucc-scroll.h"
 3319                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 1; #ifndef _hucc_scroll_h
 3320                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 2; #define _hucc_scroll_h
 3321                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 4; /****************************************************************************
 3322                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 5; ; ***************************************************************************
 3323                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 6; ;
 3324                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 7; ; hucc-scroll.h
 3325                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 8; ;
 3326                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 9; ; Routines for a fast split-screen scrolling system.
 3327                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 10; ;
 3328                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 11; ; Copyright John Brandwood 2024.
 3329                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 12; ;
 3330                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 3331                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 3332                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 3333                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 16; ;
 3334                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 17; ; ***************************************************************************
 3335                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 18; ; ***************************************************************************
 3336                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 19; ;
 3337                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 20; ; The maximum number of splits for each screen layer is set in your project's
 3338                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 21; ; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
 3339                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 22; ;
 3340                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 23; ; Your first active split must be defined to start at screen line 0, and then
 3341                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 24; ; the rest of the active splits must be in increasing line order to match the
 3342                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 25; ; way that the PC Engine displays the output image.
 3343                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 26; ;
 3344                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 27; ; You can have disabled splits interleaved with your active splits.
 3345                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 28; ;
 3346                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 29; ; Splits that are normally disabled can be used to create full screen effects
 3347                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 30; ; such as bouncing the screen up and down by adding blank areas at the top or
 3348                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 31; ; bottom of the screen, and then rapidly changing the height of those areas.
 3349                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 32; ;
 3350                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 33; ; ***************************************************************************
 3351                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 34; ; **************************************************************************/
 3352                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 36; // *************
 3353                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 37; // VDC bits for display_flags ...
 3354                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 38; // *************
 3355                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 40; #ifndef BKG_OFF
 3356                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 41; #define BKG_OFF 0x00
 3357                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 42; #endif
 3358                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 44; #ifndef SPR_OFF
 3359                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 45; #define SPR_OFF 0x00
 3360                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 46; #endif
 3361                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 48; #ifndef BKG_ON
 3362                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 49; #define BKG_ON 0x80
 3363                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 50; #endif
 3364                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 52; #ifndef SPR_ON
 3365                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 53; #define SPR_ON 0x40
 3366                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 54; #endif
 3367                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 56; // *************
 3368                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 57; // Functions in hucc-scroll.asm ...
 3369                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 58; // *************
 3370                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 60; #ifdef __HUCC__
 3371                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 62; #asmdef	HUCC_USES_NEW_SCROLL 1
 3372                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 64; extern void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
 3373                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 65; extern void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
 3374                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 67; extern void __fastcall disable_split( unsigned char index<acc> );
 3375                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 68; extern void __fastcall sgx_disable_split( unsigned char index<acc> );
 3376                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 70; extern void __fastcall __macro disable_all_splits( void );
 3377                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 71; extern void __fastcall __macro sgx_disable_all_splits( void );
 3378                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 73; #asm
 3379                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 74; .macro	_disable_all_splits
 3380                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 75; ldy	#HUCC_PCE_SPLITS - 1
 3381                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 76; !loop:		tya
 3382                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 77; call	_disable_split.1
 3383                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 78; dey
 3384                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 79; bpl	!loop-
 3385                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 80; .endm
 3386                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 82; .macro	_sgx_disable_all_splits
 3387                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 83; ldy	#HUCC_SGX_SPLITS - 1
 3388                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 84; !loop:		tya
 3389                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 85; call	_sgx_disable_split.1
 3390                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 86; dey
 3391                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 87; bpl	!loop-
 3392                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 88; .endm
 3393                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 89; #endasm
 3394                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 91; #endif // __HUCC__
 3395                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 93; #endif // _hucc_scroll_h
 3396                        		.dbg	line,	"include\routines_LEVELS.c", 3; #include "hucc-chrmap.h"
 3397                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 1; #ifndef _hucc_chrmap_h
 3398                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 2; #define _hucc_chrmap_h
 3399                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 4; /****************************************************************************
 3400                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 5; ; ***************************************************************************
 3401                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 6; ;
 3402                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 7; ; hucc-chrmap.h
 3403                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 8; ;
 3404                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 9; ; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
 3405                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 10; ;
 3406                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 11; ; Copyright John Brandwood 2025.
 3407                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 12; ;
 3408                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 3409                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 3410                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 3411                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 16; ;
 3412                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 17; ; ***************************************************************************
 3413                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 18; ; ***************************************************************************
 3414                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 19; ;
 3415                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 20; ; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
 3416                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 21; ;
 3417                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 22; ; The maximum total size for a chrmap is 16KBytes, which allows for maps up
 3418                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 23; ; to 256x32 tiles (2048x256 pixels).
 3419                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 24; ;
 3420                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 25; ; ***************************************************************************
 3421                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 26; ; **************************************************************************/
 3422                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 28; // *************
 3423                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 29; // This code extends the blkmap library ...
 3424                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 30; // *************
 3425                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 32; #include "hucc-blkmap.h"
 3426                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 34; // *************
 3427                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 35; // Functions in chrmap.asm ...
 3428                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 36; // *************
 3429                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 38; #ifdef __HUCC__
 3430                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 40; #asmdef	HUCC_USES_CHRMAP 1
 3431                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 42; extern void __fastcall __nop set_chrmap( unsigned char __far *chrmap<vdc_map_bank:vdc_map_addr>, unsigned char tiles_w<vdc_map_line_w> );
 3432                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 44; extern void __fastcall draw_bat( void );
 3433                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 45; extern void __fastcall scroll_bat( void );
 3434                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 47; extern void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 3435                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 49; #ifdef _SGX
 3436                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 51; extern void __fastcall __nop sgx_set_chrmap( unsigned char __far *chrmap<sgx_map_bank:sgx_map_addr>, unsigned char tiles_w<sgx_map_line_w> );
 3437                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 53; extern void __fastcall sgx_draw_bat( void );
 3438                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 54; extern void __fastcall sgx_scroll_bat( void );
 3439                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 56; extern void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 3440                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 58; #endif
 3441                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 60; #endif // __HUCC__
 3442                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 62; #endif // _hucc_chrmap_h
 3443                        		.dbg	line,	"include\routines_LEVELS.c", 4; #include "hucc-blkmap.h"
 3444                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
 3445                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
 3446                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
 3447                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
 3448                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
 3449                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
 3450                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
 3451                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
 3452                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
 3453                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
 3454                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
 3455                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
 3456                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
 3457                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
 3458                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
 3459                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
 3460                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
 3461                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
 3462                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
 3463                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
 3464                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
 3465                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
 3466                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
 3467                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
 3468                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
 3469                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
 3470                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
 3471                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
 3472                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
 3473                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
 3474                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
 3475                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
 3476                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
 3477                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
 3478                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
 3479                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
 3480                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
 3481                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
 3482                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
 3483                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
 3484                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
 3485                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
 3486                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
 3487                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
 3488                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
 3489                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
 3490                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
 3491                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
 3492                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
 3493                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
 3494                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
 3495                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
 3496                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
 3497                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
 3498                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
 3499                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
 3500                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
 3501                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
 3502                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
 3503                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
 3504                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
 3505                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
 3506                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
 3507                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
 3508                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 3509                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 3510                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
 3511                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 86; .macro	_set_blkmap.2
 3512                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 87; stz	vdc_scr_bank
 3513                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 88; .endm
 3514                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 90; .macro	_set_multimap.2
 3515                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 91; lda	vdc_bat_width
 3516                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 92; lsr	a
 3517                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 93; sta	vdc_map_line_w
 3518                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 94; .endm
 3519                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 96; .macro	SCREEN
 3520                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 97; db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
 3521                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 98; db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
 3522                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 99; db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
 3523                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 100; dw	(\4)
 3524                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 101; .endm
 3525                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
 3526                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
 3527                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
 3528                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
 3529                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
 3530                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
 3531                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
 3532                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
 3533                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
 3534                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
 3535                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
 3536                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
 3537                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
 3538                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
 3539                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
 3540                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
 3541                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
 3542                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
 3543                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
 3544                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
 3545                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
 3546                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
 3547                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
 3548                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
 3549                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
 3550                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
 3551                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
 3552                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
 3553                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 144; .macro	_sgx_set_blkmap.2
 3554                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 145; stz	sgx_scr_bank
 3555                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 146; .endm
 3556                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 148; .macro	_sgx_set_multimap.2
 3557                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 149; lda	sgx_bat_width
 3558                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 150; lsr	a
 3559                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 151; sta	sgx_map_line_w
 3560                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 152; .endm
 3561                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
 3562                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
 3563                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
 3564                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
 3565                        		.dbg	line,	"include\routines_LEVELS.c", 13; void hide_LEVEL_SPRITES()
 3566                        		.dbg	line,	"include\routines_LEVELS.c", 14; {
 3567                        	;***********************
 3568                        	;***********************
 3569                        	
 3570                        		.hucc
 3571    18:D262             		.proc		_hide_LEVEL_SPRITES
 3572                        		__enter		_hide_LEVEL_SPRITES
 3573                        	
 3574                        		.dbg	line,	"include\routines_LEVELS.c", 15; char i;
 3575                        	
 3576                        		.dbg	line,	"include\routines_LEVELS.c", 17; for(i=0 ; i<64 ; i++)
 3577                        		__st.umiq	0, __hide_LEVEL_SPRITES_end - 1  /* i */
         18:D262  9C 4B 26   			stz	__hide_LEVEL_SPRITES_end - 1
 3578    18:D265             	.LL3:
 3579                        		__ld.umq	__hide_LEVEL_SPRITES_end - 1  /* i */
         18:D265  AD 4B 26   			lda	__hide_LEVEL_SPRITES_end - 1
 3580                        		__ult_b.uiq	64
         18:D268  C9 40      			cmp	#64		; Subtract integer from A.
         18:D26A  6A         			ror	a		; CC if A < integer.
         18:D26B  49 80      			eor	#$80
         18:D26D  2A         			rol	a
 3581                        		__btrue		.LL5
         18:D26E  B0 07      			bcs	.LL5
 3582                        		__bra		.LL6
         18:D270  80 10      			bra	.LL6
 3583    18:D272             	.LL4:
 3584                        		__inc.umq	__hide_LEVEL_SPRITES_end - 1  /* i */
         18:D272  EE 4B 26   			inc	__hide_LEVEL_SPRITES_end - 1
 3585                        		__bra		.LL3
         18:D275  80 EE      			bra	.LL3
 3586    18:D277             	.LL5:
 3587                        	
 3588                        		.dbg	line,	"include\routines_LEVELS.c", 18; {
 3589                        	
 3590                        		.dbg	line,	"include\routines_LEVELS.c", 19; spr_set(i);
 3591                        		__ld.umq	__hide_LEVEL_SPRITES_end - 1  /* i */
         18:D277  AD 4B 26   			lda	__hide_LEVEL_SPRITES_end - 1
 3592                        		__call		_spr_set.1
         18:D27A  20 DD E7   			call	_spr_set.1
 3593                        	
 3594                        		.dbg	line,	"include\routines_LEVELS.c", 20; spr_hide();
 3595                        		__call		_spr_hide
         18:D27D  20 F8 E7   			call	_spr_hide
 3596                        	
 3597                        		.dbg	line,	"include\routines_LEVELS.c", 21; }
 3598                        		__bra		.LL4
         18:D280  80 F0      			bra	.LL4
 3599    18:D282             	.LL6:
 3600                        	
 3601                        		.dbg	line,	"include\routines_LEVELS.c", 22; }
 3602    18:D282             	.LL2:
 3603                        		__return	0
         18:D282  4C EF FF   			jmp	leave_proc
 3604                        		.dbg	clear
 3605                        		.endp
 3606                        		.pceas
 3607                        	
 3608                        		.dbg	line,	"include\routines_LEVELS.c", 27; void display_LIFE()
 3609                        		.dbg	line,	"include\routines_LEVELS.c", 28; {
 3610                        	;***********************
 3611                        	;***********************
 3612                        	
 3613                        		.hucc
 3614                        		.proc		_display_LIFE
 3623                        		.endp
 3624                        		.pceas
 3625                        	
 3626                        		.dbg	line,	"include\routines_LEVELS.c", 33; void display_SCORE()
 3627                        		.dbg	line,	"include\routines_LEVELS.c", 34; {
 3628                        	;***********************
 3629                        	;***********************
 3630                        	
 3631                        		.hucc
 3632    18:D2A2             		.proc		_display_SCORE
 3633                        		__enter		_display_SCORE
 3634                        	
 3635                        		.dbg	line,	"include\routines_LEVELS.c", 35; put_number(score,6,14,1);
 3636                        		__ld.wm		_score
         18:D2A2  AD 30 26   			lda.l	_score
         18:D2A5  AC 31 26   			ldy.h	_score
 3637                        		__st.wmq	_bx
         18:D2A8  85 FA      			sta.l	_bx
         18:D2AA  84 FB      			sty.h	_bx
 3638                        		__st.umiq	6, _cl
         18:D2AC  A9 06      			lda.l	#6
         18:D2AE  85 FC      			sta	_cl
 3639                        		__st.umiq	14, _dil
         18:D2B0  A9 0E      			lda.l	#14
         18:D2B2  85 F0      			sta	_dil
 3640                        		__st.umiq	1, _dih
         18:D2B4  A9 01      			lda.l	#1
         18:D2B6  85 F1      			sta	_dih
 3641                        		__call		_put_number.4
         18:D2B8  20 9F FF   			call	_put_number.4
 3642                        	
 3643                        		.dbg	line,	"include\routines_LEVELS.c", 36; }
 3644    18:D2BB             	.LL8:
 3645                        		__return	0
         18:D2BB  4C EF FF   			jmp	leave_proc
 3646                        		.dbg	clear
 3647                        		.endp
 3648                        		.pceas
 3649                        	
 3650                        		.dbg	line,	"include\routines_LEVELS.c", 39; void display_TIME_LEVEL()
 3651                        		.dbg	line,	"include\routines_LEVELS.c", 40; {
 3652                        	;***********************
 3653                        	;***********************
 3654                        	
 3655                        		.hucc
 3656    18:CC32             		.proc		_display_TIME_LEVEL
 3657                        		__enter		_display_TIME_LEVEL
 3658                        	
 3659                        		.dbg	line,	"include\routines_LEVELS.c", 41; put_number(minutes,1,1,3);
 3660                        		__ld.um		_minutes
         18:CC32  AD 2A 23   			lda	_minutes
         18:CC35  C2         			cly
 3661                        		__st.wmq	_bx
         18:CC36  85 FA      			sta.l	_bx
         18:CC38  84 FB      			sty.h	_bx
 3662                        		__st.umiq	1, _cl
         18:CC3A  A9 01      			lda.l	#1
         18:CC3C  85 FC      			sta	_cl
 3663                        		__st.umiq	1, _dil
         18:CC3E  A9 01      			lda.l	#1
         18:CC40  85 F0      			sta	_dil
 3664                        		__st.umiq	3, _dih
         18:CC42  A9 03      			lda.l	#3
         18:CC44  85 F1      			sta	_dih
 3665                        		__call		_put_number.4
         18:CC46  20 9F FF   			call	_put_number.4
 3666                        	
 3667                        		.dbg	line,	"include\routines_LEVELS.c", 43; if(seconds < 10)
 3668                        		__ld.umq	_seconds
         18:CC49  AD 2B 23   			lda	_seconds
 3669                        		__ult_b.uiq	10
         18:CC4C  C9 0A      			cmp	#10		; Subtract integer from A.
         18:CC4E  6A         			ror	a		; CC if A < integer.
         18:CC4F  49 80      			eor	#$80
         18:CC51  2A         			rol	a
 3670                        		__bfalse	.LL10
         18:CC52  90 2C      			bcc	.LL10
 3671                        	
 3672                        		.dbg	line,	"include\routines_LEVELS.c", 44; {
 3673                        	
 3674                        		.dbg	line,	"include\routines_LEVELS.c", 45; put_number(0,1,3,3);
 3675                        		__st.wmiq	0, _bx
         18:CC54  64 FA      			stz.l	_bx
         18:CC56  64 FB      			stz.h	_bx
 3676                        		__st.umiq	1, _cl
         18:CC58  A9 01      			lda.l	#1
         18:CC5A  85 FC      			sta	_cl
 3677                        		__st.umiq	3, _dil
         18:CC5C  A9 03      			lda.l	#3
         18:CC5E  85 F0      			sta	_dil
 3678                        		__st.umiq	3, _dih
         18:CC60  A9 03      			lda.l	#3
         18:CC62  85 F1      			sta	_dih
 3679                        		__call		_put_number.4
         18:CC64  20 9F FF   			call	_put_number.4
 3680                        	
 3681                        		.dbg	line,	"include\routines_LEVELS.c", 46; put_number(seconds,1,4,3);
 3682                        		__ld.um		_seconds
         18:CC67  AD 2B 23   			lda	_seconds
         18:CC6A  C2         			cly
 3683                        		__st.wmq	_bx
         18:CC6B  85 FA      			sta.l	_bx
         18:CC6D  84 FB      			sty.h	_bx
 3684                        		__st.umiq	1, _cl
         18:CC6F  A9 01      			lda.l	#1
         18:CC71  85 FC      			sta	_cl
 3685                        		__st.umiq	4, _dil
         18:CC73  A9 04      			lda.l	#4
         18:CC75  85 F0      			sta	_dil
 3686                        		__st.umiq	3, _dih
         18:CC77  A9 03      			lda.l	#3
         18:CC79  85 F1      			sta	_dih
 3687                        		__call		_put_number.4
         18:CC7B  20 9F FF   			call	_put_number.4
 3688                        	
 3689                        		.dbg	line,	"include\routines_LEVELS.c", 47; }
 3690                        	
 3691                        		.dbg	line,	"include\routines_LEVELS.c", 49; else
 3692                        		__bra		.LL11
         18:CC7E  80 17      			bra	.LL11
 3693    18:CC80             	.LL10:
 3694                        	
 3695                        		.dbg	line,	"include\routines_LEVELS.c", 50; {
 3696                        	
 3697                        		.dbg	line,	"include\routines_LEVELS.c", 51; put_number(seconds,2,3,3);
 3698                        		__ld.um		_seconds
         18:CC80  AD 2B 23   			lda	_seconds
         18:CC83  C2         			cly
 3699                        		__st.wmq	_bx
         18:CC84  85 FA      			sta.l	_bx
         18:CC86  84 FB      			sty.h	_bx
 3700                        		__st.umiq	2, _cl
         18:CC88  A9 02      			lda.l	#2
         18:CC8A  85 FC      			sta	_cl
 3701                        		__st.umiq	3, _dil
         18:CC8C  A9 03      			lda.l	#3
         18:CC8E  85 F0      			sta	_dil
 3702                        		__st.umiq	3, _dih
         18:CC90  A9 03      			lda.l	#3
         18:CC92  85 F1      			sta	_dih
 3703                        		__call		_put_number.4
         18:CC94  20 9F FF   			call	_put_number.4
 3704                        	
 3705                        		.dbg	line,	"include\routines_LEVELS.c", 52; }
 3706    18:CC97             	.LL11:
 3707                        	
 3708                        		.dbg	line,	"include\routines_LEVELS.c", 54; time_counter += 1;
 3709                        		__add_st.umiq	1, _time_counter
         18:CC97  EE 2C 23   			inc	_time_counter
 3710                        	
 3711                        		.dbg	line,	"include\routines_LEVELS.c", 56; if(time_counter == 60)
 3712                        		__ld.umq	_time_counter
         18:CC9A  AD 2C 23   			lda	_time_counter
 3713                        		__equ_b.uiq	60
         18:CC9D  C9 3C      			cmp	#60
         18:CC9F  F0 01      			beq	!+
         18:CCA1  18         			clc
         18:CCA2             	!:
 3714                        		__bfalse	.LL12
         18:CCA2  90 28      			bcc	.LL12
 3715                        	
 3716                        		.dbg	line,	"include\routines_LEVELS.c", 57; {
 3717                        	
 3718                        		.dbg	line,	"include\routines_LEVELS.c", 58; time_counter = 0;
 3719                        		__st.umiq	0, _time_counter
         18:CCA4  9C 2C 23   			stz	_time_counter
 3720                        	
 3721                        		.dbg	line,	"include\routines_LEVELS.c", 60; if(seconds > 0)
 3722                        		__ld.umq	_seconds
         18:CCA7  AD 2B 23   			lda	_seconds
 3723                        		__ugt_b.uiq	0
         18:CCAA  18         			clc			; Subtract integer+1 from A.
         18:CCAB  E9 00      			sbc	#0		; CS if A > integer.
 3724                        		__bfalse	.LL13
         18:CCAD  90 05      			bcc	.LL13
 3725                        	
 3726                        		.dbg	line,	"include\routines_LEVELS.c", 61; {
 3727                        	
 3728                        		.dbg	line,	"include\routines_LEVELS.c", 62; seconds -= 1;
 3729                        		__sub_st.umiq	1, _seconds
         18:CCAF  CE 2B 23   			dec	_seconds
 3730                        	
 3731                        		.dbg	line,	"include\routines_LEVELS.c", 63; }
 3732                        	
 3733                        		.dbg	line,	"include\routines_LEVELS.c", 65; else
 3734                        		__bra		.LL14
         18:CCB2  80 18      			bra	.LL14
 3735    18:CCB4             	.LL13:
 3736                        	
 3737                        		.dbg	line,	"include\routines_LEVELS.c", 66; {
 3738                        	
 3739                        		.dbg	line,	"include\routines_LEVELS.c", 67; if(minutes > 0)
 3740                        		__ld.umq	_minutes
         18:CCB4  AD 2A 23   			lda	_minutes
 3741                        		__ugt_b.uiq	0
         18:CCB7  18         			clc			; Subtract integer+1 from A.
         18:CCB8  E9 00      			sbc	#0		; CS if A > integer.
 3742                        		__bfalse	.LL15
         18:CCBA  90 0A      			bcc	.LL15
 3743                        	
 3744                        		.dbg	line,	"include\routines_LEVELS.c", 68; {
 3745                        	
 3746                        		.dbg	line,	"include\routines_LEVELS.c", 69; seconds = 59;
 3747                        		__st.umiq	59, _seconds
         18:CCBC  A9 3B      			lda.l	#59
         18:CCBE  8D 2B 23   			sta	_seconds
 3748                        	
 3749                        		.dbg	line,	"include\routines_LEVELS.c", 70; minutes -= 1;
 3750                        		__sub_st.umiq	1, _minutes
         18:CCC1  CE 2A 23   			dec	_minutes
 3751                        	
 3752                        		.dbg	line,	"include\routines_LEVELS.c", 71; }
 3753                        	
 3754                        		.dbg	line,	"include\routines_LEVELS.c", 73; else
 3755                        		__bra		.LL16
         18:CCC4  80 06      			bra	.LL16
 3756    18:CCC6             	.LL15:
 3757                        	
 3758                        		.dbg	line,	"include\routines_LEVELS.c", 74; {
 3759                        	
 3760                        		.dbg	line,	"include\routines_LEVELS.c", 75; seconds = 0;
 3761                        		__st.umiq	0, _seconds
         18:CCC6  9C 2B 23   			stz	_seconds
 3762                        	
 3763                        		.dbg	line,	"include\routines_LEVELS.c", 76; minutes = 0;
 3764                        		__st.umiq	0, _minutes
         18:CCC9  9C 2A 23   			stz	_minutes
 3765                        	
 3766                        		.dbg	line,	"include\routines_LEVELS.c", 77; // TIME OUT //
 3767                        	
 3768                        		.dbg	line,	"include\routines_LEVELS.c", 78; }
 3769    18:CCCC             	.LL16:
 3770                        	
 3771                        		.dbg	line,	"include\routines_LEVELS.c", 79; }
 3772    18:CCCC             	.LL14:
 3773                        	
 3774                        		.dbg	line,	"include\routines_LEVELS.c", 80; } 
 3775                        	
 3776                        		.dbg	line,	"include\routines_LEVELS.c", 81; }
 3777    18:CCCC             	.LL12:
 3778    18:CCCC             	.LL9:
 3779                        		__return	0
         18:CCCC  4C EF FF   			jmp	leave_proc
 3780                        		.dbg	clear
 3781                        		.endp
 3782                        		.pceas
 3783                        	
 3784                        		.dbg	line,	"include\routines_LEVELS.c", 84; void display_KEY()
 3785                        		.dbg	line,	"include\routines_LEVELS.c", 85; {
 3786                        	;***********************
 3787                        	;***********************
 3788                        	
 3789                        		.hucc
 3790    18:D2F6             		.proc		_display_KEY
 3791                        		__enter		_display_KEY
 3792                        	
 3793                        		.dbg	line,	"include\routines_LEVELS.c", 86; put_number(key_amount,2,7,27);
 3794                        		__ld.um		_key_amount
         18:D2F6  AD 28 23   			lda	_key_amount
         18:D2F9  C2         			cly
 3795                        		__st.wmq	_bx
         18:D2FA  85 FA      			sta.l	_bx
         18:D2FC  84 FB      			sty.h	_bx
 3796                        		__st.umiq	2, _cl
         18:D2FE  A9 02      			lda.l	#2
         18:D300  85 FC      			sta	_cl
 3797                        		__st.umiq	7, _dil
         18:D302  A9 07      			lda.l	#7
         18:D304  85 F0      			sta	_dil
 3798                        		__st.umiq	27, _dih
         18:D306  A9 1B      			lda.l	#27
         18:D308  85 F1      			sta	_dih
 3799                        		__call		_put_number.4
         18:D30A  20 9F FF   			call	_put_number.4
 3800                        	
 3801                        		.dbg	line,	"include\routines_LEVELS.c", 87; }
 3802    18:D30D             	.LL17:
 3803                        		__return	0
         18:D30D  4C EF FF   			jmp	leave_proc
 3804                        		.dbg	clear
 3805                        		.endp
 3806                        		.pceas
 3807                        	
 3808                        		.dbg	line,	"include\routines_LEVELS.c", 90; void display_POTION()
 3809                        		.dbg	line,	"include\routines_LEVELS.c", 91; {
 3810                        	;***********************
 3811                        	;***********************
 3812                        	
 3813                        		.hucc
 3814    18:D310             		.proc		_display_POTION
 3815                        		__enter		_display_POTION
 3816                        	
 3817                        		.dbg	line,	"include\routines_LEVELS.c", 92; put_number(potion_amount,2,19,27);
 3818                        		__ld.um		_potion_amount
         18:D310  AD 29 23   			lda	_potion_amount
         18:D313  C2         			cly
 3819                        		__st.wmq	_bx
         18:D314  85 FA      			sta.l	_bx
         18:D316  84 FB      			sty.h	_bx
 3820                        		__st.umiq	2, _cl
         18:D318  A9 02      			lda.l	#2
         18:D31A  85 FC      			sta	_cl
 3821                        		__st.umiq	19, _dil
         18:D31C  A9 13      			lda.l	#19
         18:D31E  85 F0      			sta	_dil
 3822                        		__st.umiq	27, _dih
         18:D320  A9 1B      			lda.l	#27
         18:D322  85 F1      			sta	_dih
 3823                        		__call		_put_number.4
         18:D324  20 9F FF   			call	_put_number.4
 3824                        	
 3825                        		.dbg	line,	"include\routines_LEVELS.c", 93; }
 3826    18:D327             	.LL18:
 3827                        		__return	0
         18:D327  4C EF FF   			jmp	leave_proc
 3828                        		.dbg	clear
 3829                        		.endp
 3830                        		.pceas
 3831                        	
 3832                        		.dbg	line,	"include\routines_LEVELS.c", 96; void display_ZENNY()
 3833                        		.dbg	line,	"include\routines_LEVELS.c", 97; {
 3834                        	;***********************
 3835                        	;***********************
 3836                        	
 3837                        		.hucc
 3838    18:D2BE             		.proc		_display_ZENNY
 3839                        		__enter		_display_ZENNY
 3840                        	
 3841                        		.dbg	line,	"include\routines_LEVELS.c", 98; put_number(zenny_amount,5,26,4);
 3842                        		__ld.wm		_zenny_amount
         18:D2BE  AD 2E 26   			lda.l	_zenny_amount
         18:D2C1  AC 2F 26   			ldy.h	_zenny_amount
 3843                        		__st.wmq	_bx
         18:D2C4  85 FA      			sta.l	_bx
         18:D2C6  84 FB      			sty.h	_bx
 3844                        		__st.umiq	5, _cl
         18:D2C8  A9 05      			lda.l	#5
         18:D2CA  85 FC      			sta	_cl
 3845                        		__st.umiq	26, _dil
         18:D2CC  A9 1A      			lda.l	#26
         18:D2CE  85 F0      			sta	_dil
 3846                        		__st.umiq	4, _dih
         18:D2D0  A9 04      			lda.l	#4
         18:D2D2  85 F1      			sta	_dih
 3847                        		__call		_put_number.4
         18:D2D4  20 9F FF   			call	_put_number.4
 3848                        	
 3849                        		.dbg	line,	"include\routines_LEVELS.c", 99; }
 3850    18:D2D7             	.LL19:
 3851                        		__return	0
         18:D2D7  4C EF FF   			jmp	leave_proc
 3852                        		.dbg	clear
 3853                        		.endp
 3854                        		.pceas
 3855                        	
 3856                        		.dbg	line,	"include\routines_LEVELS.c", 104; void scroll_object()
 3857                        		.dbg	line,	"include\routines_LEVELS.c", 105; {
 3858                        	;***********************
 3859                        	;***********************
 3860                        	
 3861                        		.hucc
 3862    18:C16F             		.proc		_scroll_object
 3863                        		__enter		_scroll_object
 3864                        	
 3865                        		.dbg	line,	"include\routines_LEVELS.c", 106; char i;
 3866                        	
 3867                        		.dbg	line,	"include\routines_LEVELS.c", 107; onscreen_object_number = 0;
 3868                        		__st.umiq	0, _onscreen_object_number
         18:C16F  9C 31 23   			stz	_onscreen_object_number
 3869                        	
 3870                        		.dbg	line,	"include\routines_LEVELS.c", 109; for(i=0 ; i<level_object_number ; i++)
 3871                        		__st.umiq	0, __scroll_object_end - 1  /* i */
         18:C172  9C 4B 26   			stz	__scroll_object_end - 1
 3872    18:C175             	.LL21:
 3873                        		__ld.umq	__scroll_object_end - 1  /* i */
         18:C175  AD 4B 26   			lda	__scroll_object_end - 1
 3874                        		__ult_b.umq	_level_object_number
         18:C178  CD 30 23   			cmp	_level_object_number		; Subtract memory from A.
         18:C17B  6A         			ror	a		; CC if A < memory.
         18:C17C  49 80      			eor	#$80
         18:C17E  2A         			rol	a
 3875                        		__btrue		.LL23
         18:C17F  B0 08      			bcs	.LL23
 3876                        		__bra		.LL24
         18:C181  4C D3 C2   			bra	.LL24
 3877    18:C184             	.LL22:
 3878                        		__inc.umq	__scroll_object_end - 1  /* i */
         18:C184  EE 4B 26   			inc	__scroll_object_end - 1
 3879                        		__bra		.LL21
         18:C187  80 EC      			bra	.LL21
 3880    18:C189             	.LL23:
 3881                        	
 3882                        		.dbg	line,	"include\routines_LEVELS.c", 110; {
 3883                        	
 3884                        		.dbg	line,	"include\routines_LEVELS.c", 111; if(list_object_state[i] != STATE_INACTIVE)
 3885                        		__ldx.umq	__scroll_object_end - 1  /* i */
         18:C189  AE 4B 26   			ldx	__scroll_object_end - 1
 3886                        		__ld.uaxq	_list_object_state
         18:C18C  BD 4B 23   			lda	_list_object_state, x
 3887                        		__neq_b.uiq	1
         18:C18F  38         			sec
         18:C190  49 01      			eor	#1
         18:C192  D0 01      			bne	!+
         18:C194  18         			clc
         18:C195             	!:
 3888                        		__bfalse	.LL25
         18:C195  90 ED      			bcc	.LL25
 3889                        	
 3890                        		.dbg	line,	"include\routines_LEVELS.c", 112; {
 3891                        	
 3892                        		.dbg	line,	"include\routines_LEVELS.c", 113; char scroll_allowed = FALSE;
 3893                        		__st.umiq	0, __scroll_object_end - 2  /* scroll_allowed */
         18:C197  9C 4A 26   			stz	__scroll_object_end - 2
 3894                        	
 3895                        		.dbg	line,	"include\routines_LEVELS.c", 114; 
 3896                        	
 3897                        		.dbg	line,	"include\routines_LEVELS.c", 115; // IF OBJECT X POSITION IS INFERIOR TO SCREEN RIGHT SIDE //
 3898                        	
 3899                        		.dbg	line,	"include\routines_LEVELS.c", 116; if(list_object_x_pos_ref[i] < sgx_map_pxl_x + 256)
 3900                        		__ld.wm		_sgx_map_pxl_x
         18:C19A  AD 90 26   			lda.l	_sgx_map_pxl_x
         18:C19D  AC 91 26   			ldy.h	_sgx_map_pxl_x
 3901                        		__add.wi	256
         18:C1A0  18         			clc
         18:C1A1  69 00      			adc.l	#256
         18:C1A3  42         			say
         18:C1A4  69 01      			adc.h	#256
         18:C1A6  42         			say
 3902                        		__ld2x.um	__scroll_object_end - 1  /* i */
         18:C1A7  AA         			tax
         18:C1A8  AD 4B 26   			lda	__scroll_object_end - 1
         18:C1AB  0A         			asl	a
         18:C1AC  22         			sax
 3903                        		__ugt_w.wax	_list_object_x_pos_ref
         18:C1AD  18         			clc			; Subtract memory+1 from Y:A.
         18:C1AE  FD 42 25   			sbc.l	_list_object_x_pos_ref, x
         18:C1B1  98         			tya
         18:C1B2  FD 43 25   			sbc.h	_list_object_x_pos_ref, x		; CS if Y:A > memory.
 3904                        		__bfalse	.LL26
         18:C1B5  B0 03 4C 3A			bcc	.LL26
         18:C1B9  C2          
 3905                        	
 3906                        		.dbg	line,	"include\routines_LEVELS.c", 117; {
 3907                        	
 3908                        		.dbg	line,	"include\routines_LEVELS.c", 118; // IF OBJECT X POSITION IS SUPERIOR TO SCREEN LEFT SIDE PLUS 16 PX //
 3909                        	
 3910                        		.dbg	line,	"include\routines_LEVELS.c", 119; if(list_object_x_pos_ref[i] - sgx_map_pxl_x + 16 > 0)
 3911                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         18:C1BA  AD 4B 26   			lda	__scroll_object_end - 1
         18:C1BD  0A         			asl	a
         18:C1BE  AA         			tax
 3912                        		__ld.wax	_list_object_x_pos_ref
         18:C1BF  BD 42 25   			lda.l	_list_object_x_pos_ref, x
         18:C1C2  BC 43 25   			ldy.h	_list_object_x_pos_ref, x
 3913                        		__sub.wm	_sgx_map_pxl_x
         18:C1C5  38         			sec
         18:C1C6  ED 90 26   			sbc.l	_sgx_map_pxl_x
         18:C1C9  42         			say
         18:C1CA  ED 91 26   			sbc.h	_sgx_map_pxl_x
         18:C1CD  42         			say
 3914                        		__add.wi	16
         18:C1CE  18         			clc
         18:C1CF  69 10      			adc.l	#16
         18:C1D1  90 01      			bcc	!+
         18:C1D3  C8         			iny
         18:C1D4             	!:
 3915                        		__sgt_w.wi	0
         18:C1D4  18         			clc			; Subtract integer+1 from Y:A.
         18:C1D5  E9 00      			sbc.l	#0
         18:C1D7  98         			tya
         18:C1D8  E9 00      			sbc.h	#0
         18:C1DA  50 02      			bvc	!+
         18:C1DC  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         18:C1DE  49 80      	!:		eor	#$80
         18:C1E0  0A         			asl	a
 3916                        		__bfalse	.LL27
         18:C1E1  90 57      			bcc	.LL27
 3917                        	
 3918                        		.dbg	line,	"include\routines_LEVELS.c", 120; {
 3919                        	
 3920                        		.dbg	line,	"include\routines_LEVELS.c", 121; // IF OBJECT Y POSITION IS INFERIOR TO SCREEN BOTTOM //
 3921                        	
 3922                        		.dbg	line,	"include\routines_LEVELS.c", 122; if(list_object_y_pos_ref[i] < sgx_map_pxl_y + 224)
 3923                        		__ld.wm		_sgx_map_pxl_y
         18:C1E3  AD 92 26   			lda.l	_sgx_map_pxl_y
         18:C1E6  AC 93 26   			ldy.h	_sgx_map_pxl_y
 3924                        		__add.wi	224
         18:C1E9  18         			clc
         18:C1EA  69 E0      			adc.l	#224
         18:C1EC  90 01      			bcc	!+
         18:C1EE  C8         			iny
         18:C1EF             	!:
 3925                        		__ld2x.um	__scroll_object_end - 1  /* i */
         18:C1EF  AA         			tax
         18:C1F0  AD 4B 26   			lda	__scroll_object_end - 1
         18:C1F3  0A         			asl	a
         18:C1F4  22         			sax
 3926                        		__ugt_w.wax	_list_object_y_pos_ref
         18:C1F5  18         			clc			; Subtract memory+1 from Y:A.
         18:C1F6  FD 74 25   			sbc.l	_list_object_y_pos_ref, x
         18:C1F9  98         			tya
         18:C1FA  FD 75 25   			sbc.h	_list_object_y_pos_ref, x		; CS if Y:A > memory.
 3927                        		__bfalse	.LL28
         18:C1FD  90 3B      			bcc	.LL28
 3928                        	
 3929                        		.dbg	line,	"include\routines_LEVELS.c", 123; {
 3930                        	
 3931                        		.dbg	line,	"include\routines_LEVELS.c", 124; // IF OBJECT Y POSITION IS SUPERIOR TO SCREEN TOP PLUS 16 PX //
 3932                        	
 3933                        		.dbg	line,	"include\routines_LEVELS.c", 125; if(list_object_y_pos_ref[i] - sgx_map_pxl_y + 16 > 0)
 3934                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         18:C1FF  AD 4B 26   			lda	__scroll_object_end - 1
         18:C202  0A         			asl	a
         18:C203  AA         			tax
 3935                        		__ld.wax	_list_object_y_pos_ref
         18:C204  BD 74 25   			lda.l	_list_object_y_pos_ref, x
         18:C207  BC 75 25   			ldy.h	_list_object_y_pos_ref, x
 3936                        		__sub.wm	_sgx_map_pxl_y
         18:C20A  38         			sec
         18:C20B  ED 92 26   			sbc.l	_sgx_map_pxl_y
         18:C20E  42         			say
         18:C20F  ED 93 26   			sbc.h	_sgx_map_pxl_y
         18:C212  42         			say
 3937                        		__add.wi	16
         18:C213  18         			clc
         18:C214  69 10      			adc.l	#16
         18:C216  90 01      			bcc	!+
         18:C218  C8         			iny
         18:C219             	!:
 3938                        		__sgt_w.wi	0
         18:C219  18         			clc			; Subtract integer+1 from Y:A.
         18:C21A  E9 00      			sbc.l	#0
         18:C21C  98         			tya
         18:C21D  E9 00      			sbc.h	#0
         18:C21F  50 02      			bvc	!+
         18:C221  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         18:C223  49 80      	!:		eor	#$80
         18:C225  0A         			asl	a
 3939                        		__bfalse	.LL29
         18:C226  90 12      			bcc	.LL29
 3940                        	
 3941                        		.dbg	line,	"include\routines_LEVELS.c", 126; {
 3942                        	
 3943                        		.dbg	line,	"include\routines_LEVELS.c", 127; // WE STORE THE OBJECT ID //
 3944                        	
 3945                        		.dbg	line,	"include\routines_LEVELS.c", 128; //put_number(i,2,0,2+onscreen_object_number);
 3946                        	
 3947                        		.dbg	line,	"include\routines_LEVELS.c", 129; list_onscreen_object[onscreen_object_number] = i;
 3948                        		__ldx.umq	_onscreen_object_number
         18:C228  AE 31 23   			ldx	_onscreen_object_number
 3949                        		__ld.um		__scroll_object_end - 1  /* i */
         18:C22B  AD 4B 26   			lda	__scroll_object_end - 1
         18:C22E  C2         			cly
 3950                        		__st.uaxq	_list_onscreen_object
         18:C22F  9D 96 23   			sta	_list_onscreen_object, x
 3951                        	
 3952                        		.dbg	line,	"include\routines_LEVELS.c", 130; onscreen_object_number += 1;
 3953                        		__add_st.umiq	1, _onscreen_object_number
         18:C232  EE 31 23   			inc	_onscreen_object_number
 3954                        	
 3955                        		.dbg	line,	"include\routines_LEVELS.c", 131; 
 3956                        	
 3957                        		.dbg	line,	"include\routines_LEVELS.c", 132; //list_object_visibility[i] = ON_SCREEN;
 3958                        	
 3959                        		.dbg	line,	"include\routines_LEVELS.c", 133; scroll_allowed = TRUE;
 3960                        		__st.umiq	1, __scroll_object_end - 2  /* scroll_allowed */
         18:C235  A9 01      			lda.l	#1
         18:C237  8D 4A 26   			sta	__scroll_object_end - 2
 3961                        	
 3962                        		.dbg	line,	"include\routines_LEVELS.c", 134; }
 3963                        	
 3964                        		.dbg	line,	"include\routines_LEVELS.c", 135; }
 3965    18:C23A             	.LL29:
 3966                        	
 3967                        		.dbg	line,	"include\routines_LEVELS.c", 136; }
 3968    18:C23A             	.LL28:
 3969                        	
 3970                        		.dbg	line,	"include\routines_LEVELS.c", 137; }
 3971    18:C23A             	.LL27:
 3972                        	
 3973                        		.dbg	line,	"include\routines_LEVELS.c", 139; // IF OBJECTS IS WITHIN THE SCREEN LIMITS //
 3974                        	
 3975                        		.dbg	line,	"include\routines_LEVELS.c", 140; if(scroll_allowed == TRUE)
 3976    18:C23A             	.LL26:
 3977                        		__ld.umq	__scroll_object_end - 2  /* scroll_allowed */
         18:C23A  AD 4A 26   			lda	__scroll_object_end - 2
 3978                        		__equ_b.uiq	1
         18:C23D  C9 01      			cmp	#1
         18:C23F  F0 01      			beq	!+
         18:C241  18         			clc
         18:C242             	!:
 3979                        		__bfalse	.LL30
         18:C242  90 44      			bcc	.LL30
 3980                        	
 3981                        		.dbg	line,	"include\routines_LEVELS.c", 141; {
 3982                        	
 3983                        		.dbg	line,	"include\routines_LEVELS.c", 142; list_object_x_pos[i] = list_object_x_pos_ref[i] - sgx_map_pxl_x;
 3984                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         18:C244  AD 4B 26   			lda	__scroll_object_end - 1
         18:C247  0A         			asl	a
         18:C248  AA         			tax
 3985                        		__ld.wax	_list_object_x_pos_ref
         18:C249  BD 42 25   			lda.l	_list_object_x_pos_ref, x
         18:C24C  BC 43 25   			ldy.h	_list_object_x_pos_ref, x
 3986                        		__sub.wm	_sgx_map_pxl_x
         18:C24F  38         			sec
         18:C250  ED 90 26   			sbc.l	_sgx_map_pxl_x
         18:C253  42         			say
         18:C254  ED 91 26   			sbc.h	_sgx_map_pxl_x
         18:C257  42         			say
 3987                        		__ld2x.um	__scroll_object_end - 1  /* i */
         18:C258  AA         			tax
         18:C259  AD 4B 26   			lda	__scroll_object_end - 1
         18:C25C  0A         			asl	a
         18:C25D  22         			sax
 3988                        		__st.waxq	_list_object_x_pos
         18:C25E  9D DE 24   			sta.l	_list_object_x_pos, x
         18:C261  98         			tya
         18:C262  9D DF 24   			sta.h	_list_object_x_pos, x
 3989                        	
 3990                        		.dbg	line,	"include\routines_LEVELS.c", 143; list_object_y_pos[i] = list_object_y_pos_ref[i] - sgx_map_pxl_y;
 3991                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         18:C265  AD 4B 26   			lda	__scroll_object_end - 1
         18:C268  0A         			asl	a
         18:C269  AA         			tax
 3992                        		__ld.wax	_list_object_y_pos_ref
         18:C26A  BD 74 25   			lda.l	_list_object_y_pos_ref, x
         18:C26D  BC 75 25   			ldy.h	_list_object_y_pos_ref, x
 3993                        		__sub.wm	_sgx_map_pxl_y
         18:C270  38         			sec
         18:C271  ED 92 26   			sbc.l	_sgx_map_pxl_y
         18:C274  42         			say
         18:C275  ED 93 26   			sbc.h	_sgx_map_pxl_y
         18:C278  42         			say
 3994                        		__ld2x.um	__scroll_object_end - 1  /* i */
         18:C279  AA         			tax
         18:C27A  AD 4B 26   			lda	__scroll_object_end - 1
         18:C27D  0A         			asl	a
         18:C27E  22         			sax
 3995                        		__st.waxq	_list_object_y_pos
         18:C27F  9D 10 25   			sta.l	_list_object_y_pos, x
         18:C282  98         			tya
         18:C283  9D 11 25   			sta.h	_list_object_y_pos, x
 3996                        	
 3997                        		.dbg	line,	"include\routines_LEVELS.c", 144; }
 3998                        	
 3999                        		.dbg	line,	"include\routines_LEVELS.c", 146; else
 4000                        		__bra		.LL31
         18:C286  80 1E      			bra	.LL31
 4001    18:C288             	.LL30:
 4002                        	
 4003                        		.dbg	line,	"include\routines_LEVELS.c", 147; {
 4004                        	
 4005                        		.dbg	line,	"include\routines_LEVELS.c", 148; list_object_x_pos[i] = -16;
 4006                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         18:C288  AD 4B 26   			lda	__scroll_object_end - 1
         18:C28B  0A         			asl	a
         18:C28C  AA         			tax
 4007                        		__st.waxiq	-16, _list_object_x_pos
         18:C28D  A9 F0      			lda.l	#-16
         18:C28F  9D DE 24   			sta.l	_list_object_x_pos, x
         18:C292  A9 FF      			lda.h	#-16
         18:C294  9D DF 24   			sta.h	_list_object_x_pos, x
 4008                        	
 4009                        		.dbg	line,	"include\routines_LEVELS.c", 149; list_object_y_pos[i] = -16;
 4010                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         18:C297  AD 4B 26   			lda	__scroll_object_end - 1
         18:C29A  0A         			asl	a
         18:C29B  AA         			tax
 4011                        		__st.waxiq	-16, _list_object_y_pos
         18:C29C  A9 F0      			lda.l	#-16
         18:C29E  9D 10 25   			sta.l	_list_object_y_pos, x
         18:C2A1  A9 FF      			lda.h	#-16
         18:C2A3  9D 11 25   			sta.h	_list_object_y_pos, x
 4012                        	
 4013                        		.dbg	line,	"include\routines_LEVELS.c", 150; //list_object_visibility[i] = OFF_SCREEN;
 4014                        	
 4015                        		.dbg	line,	"include\routines_LEVELS.c", 151; }
 4016    18:C2A6             	.LL31:
 4017                        	
 4018                        		.dbg	line,	"include\routines_LEVELS.c", 153; sgx_spr_set(i + object_start_index);
 4019                        		__ld.um		__scroll_object_end - 1  /* i */
         18:C2A6  AD 4B 26   			lda	__scroll_object_end - 1
         18:C2A9  C2         			cly
 4020                        		__add.um	_object_start_index
         18:C2AA  18         			clc
         18:C2AB  6D 2F 23   			adc	_object_start_index
         18:C2AE  90 01      			bcc	!+
         18:C2B0  C8         			iny
         18:C2B1             	!:
 4021                        		__call		_sgx_spr_set.1
         18:C2B1  20 8A E8   			call	_sgx_spr_set.1
 4022                        	
 4023                        		.dbg	line,	"include\routines_LEVELS.c", 155; sgx_spr_x(list_object_x_pos[i]);
 4024                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         18:C2B4  AD 4B 26   			lda	__scroll_object_end - 1
         18:C2B7  0A         			asl	a
         18:C2B8  AA         			tax
 4025                        		__ld.wax	_list_object_x_pos
         18:C2B9  BD DE 24   			lda.l	_list_object_x_pos, x
         18:C2BC  BC DF 24   			ldy.h	_list_object_x_pos, x
 4026                        		__call		_sgx_spr_x.1
         18:C2BF  20 B7 E8   			call	_sgx_spr_x.1
 4027                        	
 4028                        		.dbg	line,	"include\routines_LEVELS.c", 156; sgx_spr_y(list_object_y_pos[i]);
 4029                        		__ld2x.umq	__scroll_object_end - 1  /* i */
         18:C2C2  AD 4B 26   			lda	__scroll_object_end - 1
         18:C2C5  0A         			asl	a
         18:C2C6  AA         			tax
 4030                        		__ld.wax	_list_object_y_pos
         18:C2C7  BD 10 25   			lda.l	_list_object_y_pos, x
         18:C2CA  BC 11 25   			ldy.h	_list_object_y_pos, x
 4031                        		__call		_sgx_spr_y.1
         18:C2CD  20 C6 E8   			call	_sgx_spr_y.1
 4032                        	
 4033                        		.dbg	line,	"include\routines_LEVELS.c", 157; }
 4034                        	
 4035                        		.dbg	line,	"include\routines_LEVELS.c", 158; }
 4036    18:C2D0             	.LL25	.alias		.LL22
 4037                        		__bra		.LL22
         18:C2D0  4C 84 C1   			bra	.LL22
 4038    18:C2D3             	.LL24:
 4039                        	
 4040                        		.dbg	line,	"include\routines_LEVELS.c", 159; }
 4041    18:C2D3             	.LL20:
 4042                        		__return	0
         18:C2D3  4C EF FF   			jmp	leave_proc
 4043                        		.dbg	clear
 4044                        		.endp
 4045                        		.pceas
 4046                        	
 4047                        		.dbg	line,	"include\routines_LEVELS.c", 162; void scroll_chest()
 4048                        		.dbg	line,	"include\routines_LEVELS.c", 163; {
 4049                        	;***********************
 4050                        	;***********************
 4051                        	
 4052                        		.hucc
 4053    18:C2D6             		.proc		_scroll_chest
 4054                        		__enter		_scroll_chest
 4055                        	
 4056                        		.dbg	line,	"include\routines_LEVELS.c", 164; char i;
 4057                        	
 4058                        		.dbg	line,	"include\routines_LEVELS.c", 165; onscreen_chest_number = 0;
 4059                        		__st.umiq	0, _onscreen_chest_number
         18:C2D6  9C A0 23   			stz	_onscreen_chest_number
 4060                        	
 4061                        		.dbg	line,	"include\routines_LEVELS.c", 167; for(i=0 ; i<level_chest_number ; i++)
 4062                        		__st.umiq	0, __scroll_chest_end - 1  /* i */
         18:C2D9  9C 4B 26   			stz	__scroll_chest_end - 1
 4063    18:C2DC             	.LL33:
 4064                        		__ld.umq	__scroll_chest_end - 1  /* i */
         18:C2DC  AD 4B 26   			lda	__scroll_chest_end - 1
 4065                        		__ult_b.umq	_level_chest_number
         18:C2DF  CD 9F 23   			cmp	_level_chest_number		; Subtract memory from A.
         18:C2E2  6A         			ror	a		; CC if A < memory.
         18:C2E3  49 80      			eor	#$80
         18:C2E5  2A         			rol	a
 4066                        		__btrue		.LL35
         18:C2E6  B0 08      			bcs	.LL35
 4067                        		__bra		.LL36
         18:C2E8  4C 3A C4   			bra	.LL36
 4068    18:C2EB             	.LL34:
 4069                        		__inc.umq	__scroll_chest_end - 1  /* i */
         18:C2EB  EE 4B 26   			inc	__scroll_chest_end - 1
 4070                        		__bra		.LL33
         18:C2EE  80 EC      			bra	.LL33
 4071    18:C2F0             	.LL35:
 4072                        	
 4073                        		.dbg	line,	"include\routines_LEVELS.c", 168; {
 4074                        	
 4075                        		.dbg	line,	"include\routines_LEVELS.c", 169; if(list_chest_state[i] != STATE_INACTIVE)
 4076                        		__ldx.umq	__scroll_chest_end - 1  /* i */
         18:C2F0  AE 4B 26   			ldx	__scroll_chest_end - 1
 4077                        		__ld.uaxq	_list_chest_state
         18:C2F3  BD A1 23   			lda	_list_chest_state, x
 4078                        		__neq_b.uiq	1
         18:C2F6  38         			sec
         18:C2F7  49 01      			eor	#1
         18:C2F9  D0 01      			bne	!+
         18:C2FB  18         			clc
         18:C2FC             	!:
 4079                        		__bfalse	.LL37
         18:C2FC  90 ED      			bcc	.LL37
 4080                        	
 4081                        		.dbg	line,	"include\routines_LEVELS.c", 170; {
 4082                        	
 4083                        		.dbg	line,	"include\routines_LEVELS.c", 171; char scroll_allowed = FALSE;
 4084                        		__st.umiq	0, __scroll_chest_end - 2  /* scroll_allowed */
         18:C2FE  9C 4A 26   			stz	__scroll_chest_end - 2
 4085                        	
 4086                        		.dbg	line,	"include\routines_LEVELS.c", 172; 
 4087                        	
 4088                        		.dbg	line,	"include\routines_LEVELS.c", 173; // IF CHEST X POSITION IS INFERIOR TO SCREEN RIGHT SIDE //
 4089                        	
 4090                        		.dbg	line,	"include\routines_LEVELS.c", 174; if(list_chest_x_pos_ref[i] < sgx_map_pxl_x + 256)
 4091                        		__ld.wm		_sgx_map_pxl_x
         18:C301  AD 90 26   			lda.l	_sgx_map_pxl_x
         18:C304  AC 91 26   			ldy.h	_sgx_map_pxl_x
 4092                        		__add.wi	256
         18:C307  18         			clc
         18:C308  69 00      			adc.l	#256
         18:C30A  42         			say
         18:C30B  69 01      			adc.h	#256
         18:C30D  42         			say
 4093                        		__ld2x.um	__scroll_chest_end - 1  /* i */
         18:C30E  AA         			tax
         18:C30F  AD 4B 26   			lda	__scroll_chest_end - 1
         18:C312  0A         			asl	a
         18:C313  22         			sax
 4094                        		__ugt_w.wax	_list_chest_x_pos_ref
         18:C314  18         			clc			; Subtract memory+1 from Y:A.
         18:C315  FD C6 25   			sbc.l	_list_chest_x_pos_ref, x
         18:C318  98         			tya
         18:C319  FD C7 25   			sbc.h	_list_chest_x_pos_ref, x		; CS if Y:A > memory.
 4095                        		__bfalse	.LL38
         18:C31C  B0 03 4C A1			bcc	.LL38
         18:C320  C3          
 4096                        	
 4097                        		.dbg	line,	"include\routines_LEVELS.c", 175; {
 4098                        	
 4099                        		.dbg	line,	"include\routines_LEVELS.c", 176; // IF CHEST X POSITION IS SUPERIOR TO SCREEN LEFT SIDE PLUS 32 PX //
 4100                        	
 4101                        		.dbg	line,	"include\routines_LEVELS.c", 177; if(list_chest_x_pos_ref[i] - sgx_map_pxl_x + 32 > 0)
 4102                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         18:C321  AD 4B 26   			lda	__scroll_chest_end - 1
         18:C324  0A         			asl	a
         18:C325  AA         			tax
 4103                        		__ld.wax	_list_chest_x_pos_ref
         18:C326  BD C6 25   			lda.l	_list_chest_x_pos_ref, x
         18:C329  BC C7 25   			ldy.h	_list_chest_x_pos_ref, x
 4104                        		__sub.wm	_sgx_map_pxl_x
         18:C32C  38         			sec
         18:C32D  ED 90 26   			sbc.l	_sgx_map_pxl_x
         18:C330  42         			say
         18:C331  ED 91 26   			sbc.h	_sgx_map_pxl_x
         18:C334  42         			say
 4105                        		__add.wi	32
         18:C335  18         			clc
         18:C336  69 20      			adc.l	#32
         18:C338  90 01      			bcc	!+
         18:C33A  C8         			iny
         18:C33B             	!:
 4106                        		__sgt_w.wi	0
         18:C33B  18         			clc			; Subtract integer+1 from Y:A.
         18:C33C  E9 00      			sbc.l	#0
         18:C33E  98         			tya
         18:C33F  E9 00      			sbc.h	#0
         18:C341  50 02      			bvc	!+
         18:C343  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         18:C345  49 80      	!:		eor	#$80
         18:C347  0A         			asl	a
 4107                        		__bfalse	.LL39
         18:C348  90 57      			bcc	.LL39
 4108                        	
 4109                        		.dbg	line,	"include\routines_LEVELS.c", 178; {
 4110                        	
 4111                        		.dbg	line,	"include\routines_LEVELS.c", 179; // IF CHEST Y POSITION IS INFERIOR TO SCREEN BOTTOM //
 4112                        	
 4113                        		.dbg	line,	"include\routines_LEVELS.c", 180; if(list_chest_y_pos_ref[i] < sgx_map_pxl_y + 224)
 4114                        		__ld.wm		_sgx_map_pxl_y
         18:C34A  AD 92 26   			lda.l	_sgx_map_pxl_y
         18:C34D  AC 93 26   			ldy.h	_sgx_map_pxl_y
 4115                        		__add.wi	224
         18:C350  18         			clc
         18:C351  69 E0      			adc.l	#224
         18:C353  90 01      			bcc	!+
         18:C355  C8         			iny
         18:C356             	!:
 4116                        		__ld2x.um	__scroll_chest_end - 1  /* i */
         18:C356  AA         			tax
         18:C357  AD 4B 26   			lda	__scroll_chest_end - 1
         18:C35A  0A         			asl	a
         18:C35B  22         			sax
 4117                        		__ugt_w.wax	_list_chest_y_pos_ref
         18:C35C  18         			clc			; Subtract memory+1 from Y:A.
         18:C35D  FD D6 25   			sbc.l	_list_chest_y_pos_ref, x
         18:C360  98         			tya
         18:C361  FD D7 25   			sbc.h	_list_chest_y_pos_ref, x		; CS if Y:A > memory.
 4118                        		__bfalse	.LL40
         18:C364  90 3B      			bcc	.LL40
 4119                        	
 4120                        		.dbg	line,	"include\routines_LEVELS.c", 181; {
 4121                        	
 4122                        		.dbg	line,	"include\routines_LEVELS.c", 182; // IF CHEST Y POSITION IS SUPERIOR TO SCREEN TOP PLUS 32 PX //
 4123                        	
 4124                        		.dbg	line,	"include\routines_LEVELS.c", 183; if(list_chest_y_pos_ref[i] - sgx_map_pxl_y + 32 > 0)
 4125                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         18:C366  AD 4B 26   			lda	__scroll_chest_end - 1
         18:C369  0A         			asl	a
         18:C36A  AA         			tax
 4126                        		__ld.wax	_list_chest_y_pos_ref
         18:C36B  BD D6 25   			lda.l	_list_chest_y_pos_ref, x
         18:C36E  BC D7 25   			ldy.h	_list_chest_y_pos_ref, x
 4127                        		__sub.wm	_sgx_map_pxl_y
         18:C371  38         			sec
         18:C372  ED 92 26   			sbc.l	_sgx_map_pxl_y
         18:C375  42         			say
         18:C376  ED 93 26   			sbc.h	_sgx_map_pxl_y
         18:C379  42         			say
 4128                        		__add.wi	32
         18:C37A  18         			clc
         18:C37B  69 20      			adc.l	#32
         18:C37D  90 01      			bcc	!+
         18:C37F  C8         			iny
         18:C380             	!:
 4129                        		__sgt_w.wi	0
         18:C380  18         			clc			; Subtract integer+1 from Y:A.
         18:C381  E9 00      			sbc.l	#0
         18:C383  98         			tya
         18:C384  E9 00      			sbc.h	#0
         18:C386  50 02      			bvc	!+
         18:C388  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         18:C38A  49 80      	!:		eor	#$80
         18:C38C  0A         			asl	a
 4130                        		__bfalse	.LL41
         18:C38D  90 12      			bcc	.LL41
 4131                        	
 4132                        		.dbg	line,	"include\routines_LEVELS.c", 184; {
 4133                        	
 4134                        		.dbg	line,	"include\routines_LEVELS.c", 185; // WE STORE THE CHEST ID //
 4135                        	
 4136                        		.dbg	line,	"include\routines_LEVELS.c", 186; list_onscreen_chest[onscreen_chest_number] = i;
 4137                        		__ldx.umq	_onscreen_chest_number
         18:C38F  AE A0 23   			ldx	_onscreen_chest_number
 4138                        		__ld.um		__scroll_chest_end - 1  /* i */
         18:C392  AD 4B 26   			lda	__scroll_chest_end - 1
         18:C395  C2         			cly
 4139                        		__st.uaxq	_list_onscreen_chest
         18:C396  9D A9 23   			sta	_list_onscreen_chest, x
 4140                        	
 4141                        		.dbg	line,	"include\routines_LEVELS.c", 187; onscreen_chest_number += 1;
 4142                        		__add_st.umiq	1, _onscreen_chest_number
         18:C399  EE A0 23   			inc	_onscreen_chest_number
 4143                        	
 4144                        		.dbg	line,	"include\routines_LEVELS.c", 188; 
 4145                        	
 4146                        		.dbg	line,	"include\routines_LEVELS.c", 189; scroll_allowed = TRUE;
 4147                        		__st.umiq	1, __scroll_chest_end - 2  /* scroll_allowed */
         18:C39C  A9 01      			lda.l	#1
         18:C39E  8D 4A 26   			sta	__scroll_chest_end - 2
 4148                        	
 4149                        		.dbg	line,	"include\routines_LEVELS.c", 190; }
 4150                        	
 4151                        		.dbg	line,	"include\routines_LEVELS.c", 191; }
 4152    18:C3A1             	.LL41:
 4153                        	
 4154                        		.dbg	line,	"include\routines_LEVELS.c", 192; }
 4155    18:C3A1             	.LL40:
 4156                        	
 4157                        		.dbg	line,	"include\routines_LEVELS.c", 193; }
 4158    18:C3A1             	.LL39:
 4159                        	
 4160                        		.dbg	line,	"include\routines_LEVELS.c", 195; // IF CHEST IS WITHIN THE SCREEN LIMITS //
 4161                        	
 4162                        		.dbg	line,	"include\routines_LEVELS.c", 196; if(scroll_allowed == TRUE)
 4163    18:C3A1             	.LL38:
 4164                        		__ld.umq	__scroll_chest_end - 2  /* scroll_allowed */
         18:C3A1  AD 4A 26   			lda	__scroll_chest_end - 2
 4165                        		__equ_b.uiq	1
         18:C3A4  C9 01      			cmp	#1
         18:C3A6  F0 01      			beq	!+
         18:C3A8  18         			clc
         18:C3A9             	!:
 4166                        		__bfalse	.LL42
         18:C3A9  90 44      			bcc	.LL42
 4167                        	
 4168                        		.dbg	line,	"include\routines_LEVELS.c", 197; {
 4169                        	
 4170                        		.dbg	line,	"include\routines_LEVELS.c", 198; list_chest_x_pos[i] = list_chest_x_pos_ref[i] - sgx_map_pxl_x;
 4171                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         18:C3AB  AD 4B 26   			lda	__scroll_chest_end - 1
         18:C3AE  0A         			asl	a
         18:C3AF  AA         			tax
 4172                        		__ld.wax	_list_chest_x_pos_ref
         18:C3B0  BD C6 25   			lda.l	_list_chest_x_pos_ref, x
         18:C3B3  BC C7 25   			ldy.h	_list_chest_x_pos_ref, x
 4173                        		__sub.wm	_sgx_map_pxl_x
         18:C3B6  38         			sec
         18:C3B7  ED 90 26   			sbc.l	_sgx_map_pxl_x
         18:C3BA  42         			say
         18:C3BB  ED 91 26   			sbc.h	_sgx_map_pxl_x
         18:C3BE  42         			say
 4174                        		__ld2x.um	__scroll_chest_end - 1  /* i */
         18:C3BF  AA         			tax
         18:C3C0  AD 4B 26   			lda	__scroll_chest_end - 1
         18:C3C3  0A         			asl	a
         18:C3C4  22         			sax
 4175                        		__st.waxq	_list_chest_x_pos
         18:C3C5  9D A6 25   			sta.l	_list_chest_x_pos, x
         18:C3C8  98         			tya
         18:C3C9  9D A7 25   			sta.h	_list_chest_x_pos, x
 4176                        	
 4177                        		.dbg	line,	"include\routines_LEVELS.c", 199; list_chest_y_pos[i] = list_chest_y_pos_ref[i] - sgx_map_pxl_y;
 4178                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         18:C3CC  AD 4B 26   			lda	__scroll_chest_end - 1
         18:C3CF  0A         			asl	a
         18:C3D0  AA         			tax
 4179                        		__ld.wax	_list_chest_y_pos_ref
         18:C3D1  BD D6 25   			lda.l	_list_chest_y_pos_ref, x
         18:C3D4  BC D7 25   			ldy.h	_list_chest_y_pos_ref, x
 4180                        		__sub.wm	_sgx_map_pxl_y
         18:C3D7  38         			sec
         18:C3D8  ED 92 26   			sbc.l	_sgx_map_pxl_y
         18:C3DB  42         			say
         18:C3DC  ED 93 26   			sbc.h	_sgx_map_pxl_y
         18:C3DF  42         			say
 4181                        		__ld2x.um	__scroll_chest_end - 1  /* i */
         18:C3E0  AA         			tax
         18:C3E1  AD 4B 26   			lda	__scroll_chest_end - 1
         18:C3E4  0A         			asl	a
         18:C3E5  22         			sax
 4182                        		__st.waxq	_list_chest_y_pos
         18:C3E6  9D B6 25   			sta.l	_list_chest_y_pos, x
         18:C3E9  98         			tya
         18:C3EA  9D B7 25   			sta.h	_list_chest_y_pos, x
 4183                        	
 4184                        		.dbg	line,	"include\routines_LEVELS.c", 200; }
 4185                        	
 4186                        		.dbg	line,	"include\routines_LEVELS.c", 202; else
 4187                        		__bra		.LL43
         18:C3ED  80 1E      			bra	.LL43
 4188    18:C3EF             	.LL42:
 4189                        	
 4190                        		.dbg	line,	"include\routines_LEVELS.c", 203; {
 4191                        	
 4192                        		.dbg	line,	"include\routines_LEVELS.c", 204; list_chest_x_pos[i] = -32;
 4193                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         18:C3EF  AD 4B 26   			lda	__scroll_chest_end - 1
         18:C3F2  0A         			asl	a
         18:C3F3  AA         			tax
 4194                        		__st.waxiq	-32, _list_chest_x_pos
         18:C3F4  A9 E0      			lda.l	#-32
         18:C3F6  9D A6 25   			sta.l	_list_chest_x_pos, x
         18:C3F9  A9 FF      			lda.h	#-32
         18:C3FB  9D A7 25   			sta.h	_list_chest_x_pos, x
 4195                        	
 4196                        		.dbg	line,	"include\routines_LEVELS.c", 205; list_chest_y_pos[i] = -32;
 4197                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         18:C3FE  AD 4B 26   			lda	__scroll_chest_end - 1
         18:C401  0A         			asl	a
         18:C402  AA         			tax
 4198                        		__st.waxiq	-32, _list_chest_y_pos
         18:C403  A9 E0      			lda.l	#-32
         18:C405  9D B6 25   			sta.l	_list_chest_y_pos, x
         18:C408  A9 FF      			lda.h	#-32
         18:C40A  9D B7 25   			sta.h	_list_chest_y_pos, x
 4199                        	
 4200                        		.dbg	line,	"include\routines_LEVELS.c", 206; }
 4201    18:C40D             	.LL43:
 4202                        	
 4203                        		.dbg	line,	"include\routines_LEVELS.c", 208; sgx_spr_set(i + chest_start_index);
 4204                        		__ld.um		__scroll_chest_end - 1  /* i */
         18:C40D  AD 4B 26   			lda	__scroll_chest_end - 1
         18:C410  C2         			cly
 4205                        		__add.um	_chest_start_index
         18:C411  18         			clc
         18:C412  6D 9E 23   			adc	_chest_start_index
         18:C415  90 01      			bcc	!+
         18:C417  C8         			iny
         18:C418             	!:
 4206                        		__call		_sgx_spr_set.1
         18:C418  20 8A E8   			call	_sgx_spr_set.1
 4207                        	
 4208                        		.dbg	line,	"include\routines_LEVELS.c", 210; sgx_spr_x(list_chest_x_pos[i]);
 4209                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         18:C41B  AD 4B 26   			lda	__scroll_chest_end - 1
         18:C41E  0A         			asl	a
         18:C41F  AA         			tax
 4210                        		__ld.wax	_list_chest_x_pos
         18:C420  BD A6 25   			lda.l	_list_chest_x_pos, x
         18:C423  BC A7 25   			ldy.h	_list_chest_x_pos, x
 4211                        		__call		_sgx_spr_x.1
         18:C426  20 B7 E8   			call	_sgx_spr_x.1
 4212                        	
 4213                        		.dbg	line,	"include\routines_LEVELS.c", 211; sgx_spr_y(list_chest_y_pos[i]);
 4214                        		__ld2x.umq	__scroll_chest_end - 1  /* i */
         18:C429  AD 4B 26   			lda	__scroll_chest_end - 1
         18:C42C  0A         			asl	a
         18:C42D  AA         			tax
 4215                        		__ld.wax	_list_chest_y_pos
         18:C42E  BD B6 25   			lda.l	_list_chest_y_pos, x
         18:C431  BC B7 25   			ldy.h	_list_chest_y_pos, x
 4216                        		__call		_sgx_spr_y.1
         18:C434  20 C6 E8   			call	_sgx_spr_y.1
 4217                        	
 4218                        		.dbg	line,	"include\routines_LEVELS.c", 212; }
 4219                        	
 4220                        		.dbg	line,	"include\routines_LEVELS.c", 213; }
 4221    18:C437             	.LL37	.alias		.LL34
 4222                        		__bra		.LL34
         18:C437  4C EB C2   			bra	.LL34
 4223    18:C43A             	.LL36:
 4224                        	
 4225                        		.dbg	line,	"include\routines_LEVELS.c", 214; }
 4226    18:C43A             	.LL32:
 4227                        		__return	0
         18:C43A  4C EF FF   			jmp	leave_proc
 4228                        		.dbg	clear
 4229                        		.endp
 4230                        		.pceas
 4231                        	
 4232                        		.dbg	line,	"include\routines_LEVELS.c", 217; void scroll_npc()
 4233                        		.dbg	line,	"include\routines_LEVELS.c", 218; {
 4234                        	;***********************
 4235                        	;***********************
 4236                        	
 4237                        		.hucc
 4238    18:C43D             		.proc		_scroll_npc
 4239                        		__enter		_scroll_npc
 4240                        	
 4241                        		.dbg	line,	"include\routines_LEVELS.c", 219; char i;
 4242                        	
 4243                        		.dbg	line,	"include\routines_LEVELS.c", 220; onscreen_npc_number = 0;
 4244                        		__st.umiq	0, _onscreen_npc_number
         18:C43D  9C B3 23   			stz	_onscreen_npc_number
 4245                        	
 4246                        		.dbg	line,	"include\routines_LEVELS.c", 222; for(i=0 ; i<level_npc_number ; i++)
 4247                        		__st.umiq	0, __scroll_npc_end - 1  /* i */
         18:C440  9C 4B 26   			stz	__scroll_npc_end - 1
 4248    18:C443             	.LL45:
 4249                        		__ld.umq	__scroll_npc_end - 1  /* i */
         18:C443  AD 4B 26   			lda	__scroll_npc_end - 1
 4250                        		__ult_b.umq	_level_npc_number
         18:C446  CD B2 23   			cmp	_level_npc_number		; Subtract memory from A.
         18:C449  6A         			ror	a		; CC if A < memory.
         18:C44A  49 80      			eor	#$80
         18:C44C  2A         			rol	a
 4251                        		__btrue		.LL47
         18:C44D  B0 08      			bcs	.LL47
 4252                        		__bra		.LL48
         18:C44F  4C A1 C5   			bra	.LL48
 4253    18:C452             	.LL46:
 4254                        		__inc.umq	__scroll_npc_end - 1  /* i */
         18:C452  EE 4B 26   			inc	__scroll_npc_end - 1
 4255                        		__bra		.LL45
         18:C455  80 EC      			bra	.LL45
 4256    18:C457             	.LL47:
 4257                        	
 4258                        		.dbg	line,	"include\routines_LEVELS.c", 223; {
 4259                        	
 4260                        		.dbg	line,	"include\routines_LEVELS.c", 224; if(list_npc_state[i] != STATE_INACTIVE)
 4261                        		__ldx.umq	__scroll_npc_end - 1  /* i */
         18:C457  AE 4B 26   			ldx	__scroll_npc_end - 1
 4262                        		__ld.uaxq	_list_npc_state
         18:C45A  BD BD 23   			lda	_list_npc_state, x
 4263                        		__neq_b.uiq	1
         18:C45D  38         			sec
         18:C45E  49 01      			eor	#1
         18:C460  D0 01      			bne	!+
         18:C462  18         			clc
         18:C463             	!:
 4264                        		__bfalse	.LL49
         18:C463  90 ED      			bcc	.LL49
 4265                        	
 4266                        		.dbg	line,	"include\routines_LEVELS.c", 225; {
 4267                        	
 4268                        		.dbg	line,	"include\routines_LEVELS.c", 226; char scroll_allowed = FALSE;
 4269                        		__st.umiq	0, __scroll_npc_end - 2  /* scroll_allowed */
         18:C465  9C 4A 26   			stz	__scroll_npc_end - 2
 4270                        	
 4271                        		.dbg	line,	"include\routines_LEVELS.c", 227; 
 4272                        	
 4273                        		.dbg	line,	"include\routines_LEVELS.c", 228; // IF NPC X POSITION IS INFERIOR TO SCREEN RIGHT SIDE //
 4274                        	
 4275                        		.dbg	line,	"include\routines_LEVELS.c", 229; if(list_npc_x_pos_ref[i] < sgx_map_pxl_x + 256)
 4276                        		__ld.wm		_sgx_map_pxl_x
         18:C468  AD 90 26   			lda.l	_sgx_map_pxl_x
         18:C46B  AC 91 26   			ldy.h	_sgx_map_pxl_x
 4277                        		__add.wi	256
         18:C46E  18         			clc
         18:C46F  69 00      			adc.l	#256
         18:C471  42         			say
         18:C472  69 01      			adc.h	#256
         18:C474  42         			say
 4278                        		__ld2x.um	__scroll_npc_end - 1  /* i */
         18:C475  AA         			tax
         18:C476  AD 4B 26   			lda	__scroll_npc_end - 1
         18:C479  0A         			asl	a
         18:C47A  22         			sax
 4279                        		__ugt_w.wax	_list_npc_x_pos_ref
         18:C47B  18         			clc			; Subtract memory+1 from Y:A.
         18:C47C  FD 0A 26   			sbc.l	_list_npc_x_pos_ref, x
         18:C47F  98         			tya
         18:C480  FD 0B 26   			sbc.h	_list_npc_x_pos_ref, x		; CS if Y:A > memory.
 4280                        		__bfalse	.LL50
         18:C483  B0 03 4C 08			bcc	.LL50
         18:C487  C5          
 4281                        	
 4282                        		.dbg	line,	"include\routines_LEVELS.c", 230; {
 4283                        	
 4284                        		.dbg	line,	"include\routines_LEVELS.c", 231; // IF NPC X POSITION IS SUPERIOR TO SCREEN LEFT SIDE PLUS 32 PX //
 4285                        	
 4286                        		.dbg	line,	"include\routines_LEVELS.c", 232; if(list_npc_x_pos_ref[i] - sgx_map_pxl_x + 32 > 0)
 4287                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         18:C488  AD 4B 26   			lda	__scroll_npc_end - 1
         18:C48B  0A         			asl	a
         18:C48C  AA         			tax
 4288                        		__ld.wax	_list_npc_x_pos_ref
         18:C48D  BD 0A 26   			lda.l	_list_npc_x_pos_ref, x
         18:C490  BC 0B 26   			ldy.h	_list_npc_x_pos_ref, x
 4289                        		__sub.wm	_sgx_map_pxl_x
         18:C493  38         			sec
         18:C494  ED 90 26   			sbc.l	_sgx_map_pxl_x
         18:C497  42         			say
         18:C498  ED 91 26   			sbc.h	_sgx_map_pxl_x
         18:C49B  42         			say
 4290                        		__add.wi	32
         18:C49C  18         			clc
         18:C49D  69 20      			adc.l	#32
         18:C49F  90 01      			bcc	!+
         18:C4A1  C8         			iny
         18:C4A2             	!:
 4291                        		__sgt_w.wi	0
         18:C4A2  18         			clc			; Subtract integer+1 from Y:A.
         18:C4A3  E9 00      			sbc.l	#0
         18:C4A5  98         			tya
         18:C4A6  E9 00      			sbc.h	#0
         18:C4A8  50 02      			bvc	!+
         18:C4AA  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         18:C4AC  49 80      	!:		eor	#$80
         18:C4AE  0A         			asl	a
 4292                        		__bfalse	.LL51
         18:C4AF  90 57      			bcc	.LL51
 4293                        	
 4294                        		.dbg	line,	"include\routines_LEVELS.c", 233; {
 4295                        	
 4296                        		.dbg	line,	"include\routines_LEVELS.c", 234; // IF NPC Y POSITION IS INFERIOR TO SCREEN BOTTOM //
 4297                        	
 4298                        		.dbg	line,	"include\routines_LEVELS.c", 235; if(list_npc_y_pos_ref[i] < sgx_map_pxl_y + 224)
 4299                        		__ld.wm		_sgx_map_pxl_y
         18:C4B1  AD 92 26   			lda.l	_sgx_map_pxl_y
         18:C4B4  AC 93 26   			ldy.h	_sgx_map_pxl_y
 4300                        		__add.wi	224
         18:C4B7  18         			clc
         18:C4B8  69 E0      			adc.l	#224
         18:C4BA  90 01      			bcc	!+
         18:C4BC  C8         			iny
         18:C4BD             	!:
 4301                        		__ld2x.um	__scroll_npc_end - 1  /* i */
         18:C4BD  AA         			tax
         18:C4BE  AD 4B 26   			lda	__scroll_npc_end - 1
         18:C4C1  0A         			asl	a
         18:C4C2  22         			sax
 4302                        		__ugt_w.wax	_list_npc_y_pos_ref
         18:C4C3  18         			clc			; Subtract memory+1 from Y:A.
         18:C4C4  FD 1C 26   			sbc.l	_list_npc_y_pos_ref, x
         18:C4C7  98         			tya
         18:C4C8  FD 1D 26   			sbc.h	_list_npc_y_pos_ref, x		; CS if Y:A > memory.
 4303                        		__bfalse	.LL52
         18:C4CB  90 3B      			bcc	.LL52
 4304                        	
 4305                        		.dbg	line,	"include\routines_LEVELS.c", 236; {
 4306                        	
 4307                        		.dbg	line,	"include\routines_LEVELS.c", 237; // IF NPC Y POSITION IS SUPERIOR TO SCREEN TOP PLUS 32 PX //
 4308                        	
 4309                        		.dbg	line,	"include\routines_LEVELS.c", 238; if(list_npc_y_pos_ref[i] - sgx_map_pxl_y + 32 > 0)
 4310                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         18:C4CD  AD 4B 26   			lda	__scroll_npc_end - 1
         18:C4D0  0A         			asl	a
         18:C4D1  AA         			tax
 4311                        		__ld.wax	_list_npc_y_pos_ref
         18:C4D2  BD 1C 26   			lda.l	_list_npc_y_pos_ref, x
         18:C4D5  BC 1D 26   			ldy.h	_list_npc_y_pos_ref, x
 4312                        		__sub.wm	_sgx_map_pxl_y
         18:C4D8  38         			sec
         18:C4D9  ED 92 26   			sbc.l	_sgx_map_pxl_y
         18:C4DC  42         			say
         18:C4DD  ED 93 26   			sbc.h	_sgx_map_pxl_y
         18:C4E0  42         			say
 4313                        		__add.wi	32
         18:C4E1  18         			clc
         18:C4E2  69 20      			adc.l	#32
         18:C4E4  90 01      			bcc	!+
         18:C4E6  C8         			iny
         18:C4E7             	!:
 4314                        		__sgt_w.wi	0
         18:C4E7  18         			clc			; Subtract integer+1 from Y:A.
         18:C4E8  E9 00      			sbc.l	#0
         18:C4EA  98         			tya
         18:C4EB  E9 00      			sbc.h	#0
         18:C4ED  50 02      			bvc	!+
         18:C4EF  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         18:C4F1  49 80      	!:		eor	#$80
         18:C4F3  0A         			asl	a
 4315                        		__bfalse	.LL53
         18:C4F4  90 12      			bcc	.LL53
 4316                        	
 4317                        		.dbg	line,	"include\routines_LEVELS.c", 239; {
 4318                        	
 4319                        		.dbg	line,	"include\routines_LEVELS.c", 240; // WE STORE THE NPC ID //
 4320                        	
 4321                        		.dbg	line,	"include\routines_LEVELS.c", 241; list_onscreen_npc[onscreen_npc_number] = i;
 4322                        		__ldx.umq	_onscreen_npc_number
         18:C4F6  AE B3 23   			ldx	_onscreen_npc_number
 4323                        		__ld.um		__scroll_npc_end - 1  /* i */
         18:C4F9  AD 4B 26   			lda	__scroll_npc_end - 1
         18:C4FC  C2         			cly
 4324                        		__st.uaxq	_list_onscreen_npc
         18:C4FD  9D C6 23   			sta	_list_onscreen_npc, x
 4325                        	
 4326                        		.dbg	line,	"include\routines_LEVELS.c", 242; onscreen_npc_number += 1;
 4327                        		__add_st.umiq	1, _onscreen_npc_number
         18:C500  EE B3 23   			inc	_onscreen_npc_number
 4328                        	
 4329                        		.dbg	line,	"include\routines_LEVELS.c", 243; 
 4330                        	
 4331                        		.dbg	line,	"include\routines_LEVELS.c", 244; scroll_allowed = TRUE;
 4332                        		__st.umiq	1, __scroll_npc_end - 2  /* scroll_allowed */
         18:C503  A9 01      			lda.l	#1
         18:C505  8D 4A 26   			sta	__scroll_npc_end - 2
 4333                        	
 4334                        		.dbg	line,	"include\routines_LEVELS.c", 245; }
 4335                        	
 4336                        		.dbg	line,	"include\routines_LEVELS.c", 246; }
 4337    18:C508             	.LL53:
 4338                        	
 4339                        		.dbg	line,	"include\routines_LEVELS.c", 247; }
 4340    18:C508             	.LL52:
 4341                        	
 4342                        		.dbg	line,	"include\routines_LEVELS.c", 248; }
 4343    18:C508             	.LL51:
 4344                        	
 4345                        		.dbg	line,	"include\routines_LEVELS.c", 250; // IF NPC IS WITHIN THE SCREEN LIMITS //
 4346                        	
 4347                        		.dbg	line,	"include\routines_LEVELS.c", 251; if(scroll_allowed == TRUE)
 4348    18:C508             	.LL50:
 4349                        		__ld.umq	__scroll_npc_end - 2  /* scroll_allowed */
         18:C508  AD 4A 26   			lda	__scroll_npc_end - 2
 4350                        		__equ_b.uiq	1
         18:C50B  C9 01      			cmp	#1
         18:C50D  F0 01      			beq	!+
         18:C50F  18         			clc
         18:C510             	!:
 4351                        		__bfalse	.LL54
         18:C510  90 44      			bcc	.LL54
 4352                        	
 4353                        		.dbg	line,	"include\routines_LEVELS.c", 252; {
 4354                        	
 4355                        		.dbg	line,	"include\routines_LEVELS.c", 253; list_npc_x_pos[i] = list_npc_x_pos_ref[i] - sgx_map_pxl_x;
 4356                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         18:C512  AD 4B 26   			lda	__scroll_npc_end - 1
         18:C515  0A         			asl	a
         18:C516  AA         			tax
 4357                        		__ld.wax	_list_npc_x_pos_ref
         18:C517  BD 0A 26   			lda.l	_list_npc_x_pos_ref, x
         18:C51A  BC 0B 26   			ldy.h	_list_npc_x_pos_ref, x
 4358                        		__sub.wm	_sgx_map_pxl_x
         18:C51D  38         			sec
         18:C51E  ED 90 26   			sbc.l	_sgx_map_pxl_x
         18:C521  42         			say
         18:C522  ED 91 26   			sbc.h	_sgx_map_pxl_x
         18:C525  42         			say
 4359                        		__ld2x.um	__scroll_npc_end - 1  /* i */
         18:C526  AA         			tax
         18:C527  AD 4B 26   			lda	__scroll_npc_end - 1
         18:C52A  0A         			asl	a
         18:C52B  22         			sax
 4360                        		__st.waxq	_list_npc_x_pos
         18:C52C  9D E6 25   			sta.l	_list_npc_x_pos, x
         18:C52F  98         			tya
         18:C530  9D E7 25   			sta.h	_list_npc_x_pos, x
 4361                        	
 4362                        		.dbg	line,	"include\routines_LEVELS.c", 254; list_npc_y_pos[i] = list_npc_y_pos_ref[i] - sgx_map_pxl_y;
 4363                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         18:C533  AD 4B 26   			lda	__scroll_npc_end - 1
         18:C536  0A         			asl	a
         18:C537  AA         			tax
 4364                        		__ld.wax	_list_npc_y_pos_ref
         18:C538  BD 1C 26   			lda.l	_list_npc_y_pos_ref, x
         18:C53B  BC 1D 26   			ldy.h	_list_npc_y_pos_ref, x
 4365                        		__sub.wm	_sgx_map_pxl_y
         18:C53E  38         			sec
         18:C53F  ED 92 26   			sbc.l	_sgx_map_pxl_y
         18:C542  42         			say
         18:C543  ED 93 26   			sbc.h	_sgx_map_pxl_y
         18:C546  42         			say
 4366                        		__ld2x.um	__scroll_npc_end - 1  /* i */
         18:C547  AA         			tax
         18:C548  AD 4B 26   			lda	__scroll_npc_end - 1
         18:C54B  0A         			asl	a
         18:C54C  22         			sax
 4367                        		__st.waxq	_list_npc_y_pos
         18:C54D  9D F8 25   			sta.l	_list_npc_y_pos, x
         18:C550  98         			tya
         18:C551  9D F9 25   			sta.h	_list_npc_y_pos, x
 4368                        	
 4369                        		.dbg	line,	"include\routines_LEVELS.c", 255; }
 4370                        	
 4371                        		.dbg	line,	"include\routines_LEVELS.c", 257; else
 4372                        		__bra		.LL55
         18:C554  80 1E      			bra	.LL55
 4373    18:C556             	.LL54:
 4374                        	
 4375                        		.dbg	line,	"include\routines_LEVELS.c", 258; {
 4376                        	
 4377                        		.dbg	line,	"include\routines_LEVELS.c", 259; list_npc_x_pos[i] = -32;
 4378                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         18:C556  AD 4B 26   			lda	__scroll_npc_end - 1
         18:C559  0A         			asl	a
         18:C55A  AA         			tax
 4379                        		__st.waxiq	-32, _list_npc_x_pos
         18:C55B  A9 E0      			lda.l	#-32
         18:C55D  9D E6 25   			sta.l	_list_npc_x_pos, x
         18:C560  A9 FF      			lda.h	#-32
         18:C562  9D E7 25   			sta.h	_list_npc_x_pos, x
 4380                        	
 4381                        		.dbg	line,	"include\routines_LEVELS.c", 260; list_npc_y_pos[i] = -32;
 4382                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         18:C565  AD 4B 26   			lda	__scroll_npc_end - 1
         18:C568  0A         			asl	a
         18:C569  AA         			tax
 4383                        		__st.waxiq	-32, _list_npc_y_pos
         18:C56A  A9 E0      			lda.l	#-32
         18:C56C  9D F8 25   			sta.l	_list_npc_y_pos, x
         18:C56F  A9 FF      			lda.h	#-32
         18:C571  9D F9 25   			sta.h	_list_npc_y_pos, x
 4384                        	
 4385                        		.dbg	line,	"include\routines_LEVELS.c", 261; }
 4386    18:C574             	.LL55:
 4387                        	
 4388                        		.dbg	line,	"include\routines_LEVELS.c", 263; sgx_spr_set(i + npc_start_index);
 4389                        		__ld.um		__scroll_npc_end - 1  /* i */
         18:C574  AD 4B 26   			lda	__scroll_npc_end - 1
         18:C577  C2         			cly
 4390                        		__add.um	_npc_start_index
         18:C578  18         			clc
         18:C579  6D B1 23   			adc	_npc_start_index
         18:C57C  90 01      			bcc	!+
         18:C57E  C8         			iny
         18:C57F             	!:
 4391                        		__call		_sgx_spr_set.1
         18:C57F  20 8A E8   			call	_sgx_spr_set.1
 4392                        	
 4393                        		.dbg	line,	"include\routines_LEVELS.c", 265; sgx_spr_x(list_npc_x_pos[i]);
 4394                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         18:C582  AD 4B 26   			lda	__scroll_npc_end - 1
         18:C585  0A         			asl	a
         18:C586  AA         			tax
 4395                        		__ld.wax	_list_npc_x_pos
         18:C587  BD E6 25   			lda.l	_list_npc_x_pos, x
         18:C58A  BC E7 25   			ldy.h	_list_npc_x_pos, x
 4396                        		__call		_sgx_spr_x.1
         18:C58D  20 B7 E8   			call	_sgx_spr_x.1
 4397                        	
 4398                        		.dbg	line,	"include\routines_LEVELS.c", 266; sgx_spr_y(list_npc_y_pos[i]);
 4399                        		__ld2x.umq	__scroll_npc_end - 1  /* i */
         18:C590  AD 4B 26   			lda	__scroll_npc_end - 1
         18:C593  0A         			asl	a
         18:C594  AA         			tax
 4400                        		__ld.wax	_list_npc_y_pos
         18:C595  BD F8 25   			lda.l	_list_npc_y_pos, x
         18:C598  BC F9 25   			ldy.h	_list_npc_y_pos, x
 4401                        		__call		_sgx_spr_y.1
         18:C59B  20 C6 E8   			call	_sgx_spr_y.1
 4402                        	
 4403                        		.dbg	line,	"include\routines_LEVELS.c", 267; }
 4404                        	
 4405                        		.dbg	line,	"include\routines_LEVELS.c", 268; }
 4406    18:C59E             	.LL49	.alias		.LL46
 4407                        		__bra		.LL46
         18:C59E  4C 52 C4   			bra	.LL46
 4408    18:C5A1             	.LL48:
 4409                        	
 4410                        		.dbg	line,	"include\routines_LEVELS.c", 269; }
 4411    18:C5A1             	.LL44:
 4412                        		__return	0
         18:C5A1  4C EF FF   			jmp	leave_proc
 4413                        		.dbg	clear
 4414                        		.endp
 4415                        		.pceas
 4416                        	
 4417                        		.dbg	line,	"include\routines_LEVELS.c", 274; int check_TILE_DEPTH(signed char x_offset , signed char y_offset)
 4418                        		.dbg	line,	"include\routines_LEVELS.c", 275; {
 4419                        	;***********************
 4420                        	;***********************
 4421                        	
 4422                        		.hucc
 4423    18:CDD6             		.proc		_check_TILE_DEPTH
 4424                        		__enter		_check_TILE_DEPTH
 4425                        	
 4426                        		.dbg	line,	"include\routines_LEVELS.c", 276; int player_COLL_X;
 4427                        	
 4428                        		.dbg	line,	"include\routines_LEVELS.c", 277; int player_COLL_Y;
 4429                        	
 4430                        		.dbg	line,	"include\routines_LEVELS.c", 280; player_COLL_X = player_pos_x + x_offset;
 4431                        		__ld.bs		2  /* x_offset */
         18:CDD6  A6 8D      			ldx	<__sp
         18:CDD8  B5 0A      			lda	<__stack + 2, x
         18:CDDA  C2         			cly
         18:CDDB  10 01      			bpl	!+	; signed
         18:CDDD  88         			dey
         18:CDDE             	!:
 4432                        		__add.wm	_player_pos_x
         18:CDDE  18         			clc
         18:CDDF  6D D4 24   			adc.l	_player_pos_x
         18:CDE2  42         			say
         18:CDE3  6D D5 24   			adc.h	_player_pos_x
         18:CDE6  42         			say
 4433                        		__st.wmq	__check_TILE_DEPTH_end - 2  /* player_COLL_X */
         18:CDE7  8D 4A 26   			sta.l	__check_TILE_DEPTH_end - 2
         18:CDEA  8C 4B 26   			sty.h	__check_TILE_DEPTH_end - 2
 4434                        	
 4435                        		.dbg	line,	"include\routines_LEVELS.c", 281; player_COLL_Y = player_pos_y + 32 - y_offset;//32
 4436                        		__ld.wm		_player_pos_y
         18:CDED  AD D6 24   			lda.l	_player_pos_y
         18:CDF0  AC D7 24   			ldy.h	_player_pos_y
 4437                        		__add.wi	32
         18:CDF3  18         			clc
         18:CDF4  69 20      			adc.l	#32
         18:CDF6  90 01      			bcc	!+
         18:CDF8  C8         			iny
         18:CDF9             	!:
 4438                        		__push.wr
         18:CDF9  5A         			phy
         18:CDFA  48         			pha
 4439                        		__ld.bs		0  /* y_offset */
         18:CDFB  A6 8D      			ldx	<__sp
         18:CDFD  B5 08      			lda	<__stack + 0, x
         18:CDFF  C2         			cly
         18:CE00  10 01      			bpl	!+	; signed
         18:CE02  88         			dey
         18:CE03             	!:
 4440                        		__sub.wt
         18:CE03  BA         			tsx
         18:CE04  38         			sec
         18:CE05  49 FF      			eor	#$FF
         18:CE07  7D 01 21   			adc.l	__tos, x
         18:CE0A  42         			say
         18:CE0B  49 FF      			eor	#$FF
         18:CE0D  7D 02 21   			adc.h	__tos, x
         18:CE10  42         			say
         18:CE11  E8         			inx
         18:CE12  E8         			inx
         18:CE13  9A         			txs
 4441                        		__st.wmq	__check_TILE_DEPTH_end - 4  /* player_COLL_Y */
         18:CE14  8D 48 26   			sta.l	__check_TILE_DEPTH_end - 4
         18:CE17  8C 49 26   			sty.h	__check_TILE_DEPTH_end - 4
 4442                        	
 4443                        		.dbg	line,	"include\routines_LEVELS.c", 283; get_map_block(player_COLL_X + sgx_map_pxl_x, player_COLL_Y + sgx_map_pxl_y);
 4444                        		__ld.wm		__check_TILE_DEPTH_end - 2  /* player_COLL_X */
         18:CE1A  AD 4A 26   			lda.l	__check_TILE_DEPTH_end - 2
         18:CE1D  AC 4B 26   			ldy.h	__check_TILE_DEPTH_end - 2
 4445                        		__add.wm	_sgx_map_pxl_x
         18:CE20  18         			clc
         18:CE21  6D 90 26   			adc.l	_sgx_map_pxl_x
         18:CE24  42         			say
         18:CE25  6D 91 26   			adc.h	_sgx_map_pxl_x
         18:CE28  42         			say
 4446                        		__st.wmq	map_pxl_x
         18:CE29  85 FC      			sta.l	map_pxl_x
         18:CE2B  84 FD      			sty.h	map_pxl_x
 4447                        		__ld.wm		__check_TILE_DEPTH_end - 4  /* player_COLL_Y */
         18:CE2D  AD 48 26   			lda.l	__check_TILE_DEPTH_end - 4
         18:CE30  AC 49 26   			ldy.h	__check_TILE_DEPTH_end - 4
 4448                        		__add.wm	_sgx_map_pxl_y
         18:CE33  18         			clc
         18:CE34  6D 92 26   			adc.l	_sgx_map_pxl_y
         18:CE37  42         			say
         18:CE38  6D 93 26   			adc.h	_sgx_map_pxl_y
         18:CE3B  42         			say
 4449                        		__st.wmq	map_pxl_y
         18:CE3C  85 FE      			sta.l	map_pxl_y
         18:CE3E  84 FF      			sty.h	map_pxl_y
 4450                        		__call		_get_map_block.2
         18:CE40  20 95 FF   			call	_get_map_block.2
 4451                        	
 4452                        		.dbg	line,	"include\routines_LEVELS.c", 284; }
 4453    18:CE43             	.LL56:
 4454                        		__modsp		4
         18:CE43  AA         			tax
         18:CE44  A5 8D      			lda	<__sp
         18:CE46  18         			clc
         18:CE47  69 04      			adc	#4
         18:CE49  85 8D      			sta	<__sp
         18:CE4B  8A         			txa
 4455                        		__return	1
         18:CE4C  AA         			tax
         18:CE4D  4C EF FF   			jmp	leave_proc
 4456                        		.dbg	clear
 4457                        		.endp
 4458                        		.pceas
 4459                        	
 4460                        		.dbg	line,	"include\routines_LEVELS.c", 286; // CHECK COLLISION WITH BG //
 4461                        		.dbg	line,	"include\routines_LEVELS.c", 287; int check_BG(signed char x_offset , signed char y_offset)
 4462                        		.dbg	line,	"include\routines_LEVELS.c", 288; {
 4463                        	;***********************
 4464                        	;***********************
 4465                        	
 4466                        		.hucc
 4467    18:CF31             		.proc		_check_BG
 4468                        		__enter		_check_BG
 4469                        	
 4470                        		.dbg	line,	"include\routines_LEVELS.c", 289; int player_COLL_X;
 4471                        	
 4472                        		.dbg	line,	"include\routines_LEVELS.c", 290; int player_COLL_Y;
 4473                        	
 4474                        		.dbg	line,	"include\routines_LEVELS.c", 293; player_COLL_X = player_pos_x + x_offset;
 4475                        		__ld.bs		2  /* x_offset */
         18:CF31  A6 8D      			ldx	<__sp
         18:CF33  B5 0A      			lda	<__stack + 2, x
         18:CF35  C2         			cly
         18:CF36  10 01      			bpl	!+	; signed
         18:CF38  88         			dey
         18:CF39             	!:
 4476                        		__add.wm	_player_pos_x
         18:CF39  18         			clc
         18:CF3A  6D D4 24   			adc.l	_player_pos_x
         18:CF3D  42         			say
         18:CF3E  6D D5 24   			adc.h	_player_pos_x
         18:CF41  42         			say
 4477                        		__st.wmq	__check_BG_end - 2  /* player_COLL_X */
         18:CF42  8D 4A 26   			sta.l	__check_BG_end - 2
         18:CF45  8C 4B 26   			sty.h	__check_BG_end - 2
 4478                        	
 4479                        		.dbg	line,	"include\routines_LEVELS.c", 294; player_COLL_Y = player_pos_y + y_offset;
 4480                        		__ld.bs		0  /* y_offset */
         18:CF48  A6 8D      			ldx	<__sp
         18:CF4A  B5 08      			lda	<__stack + 0, x
         18:CF4C  C2         			cly
         18:CF4D  10 01      			bpl	!+	; signed
         18:CF4F  88         			dey
         18:CF50             	!:
 4481                        		__add.wm	_player_pos_y
         18:CF50  18         			clc
         18:CF51  6D D6 24   			adc.l	_player_pos_y
         18:CF54  42         			say
         18:CF55  6D D7 24   			adc.h	_player_pos_y
         18:CF58  42         			say
 4482                        		__st.wmq	__check_BG_end - 4  /* player_COLL_Y */
         18:CF59  8D 48 26   			sta.l	__check_BG_end - 4
         18:CF5C  8C 49 26   			sty.h	__check_BG_end - 4
 4483                        	
 4484                        		.dbg	line,	"include\routines_LEVELS.c", 296; get_map_block(player_COLL_X + sgx_map_pxl_x, player_COLL_Y + sgx_map_pxl_y);
 4485                        		__ld.wm		__check_BG_end - 2  /* player_COLL_X */
         18:CF5F  AD 4A 26   			lda.l	__check_BG_end - 2
         18:CF62  AC 4B 26   			ldy.h	__check_BG_end - 2
 4486                        		__add.wm	_sgx_map_pxl_x
         18:CF65  18         			clc
         18:CF66  6D 90 26   			adc.l	_sgx_map_pxl_x
         18:CF69  42         			say
         18:CF6A  6D 91 26   			adc.h	_sgx_map_pxl_x
         18:CF6D  42         			say
 4487                        		__st.wmq	map_pxl_x
         18:CF6E  85 FC      			sta.l	map_pxl_x
         18:CF70  84 FD      			sty.h	map_pxl_x
 4488                        		__ld.wm		__check_BG_end - 4  /* player_COLL_Y */
         18:CF72  AD 48 26   			lda.l	__check_BG_end - 4
         18:CF75  AC 49 26   			ldy.h	__check_BG_end - 4
 4489                        		__add.wm	_sgx_map_pxl_y
         18:CF78  18         			clc
         18:CF79  6D 92 26   			adc.l	_sgx_map_pxl_y
         18:CF7C  42         			say
         18:CF7D  6D 93 26   			adc.h	_sgx_map_pxl_y
         18:CF80  42         			say
 4490                        		__st.wmq	map_pxl_y
         18:CF81  85 FE      			sta.l	map_pxl_y
         18:CF83  84 FF      			sty.h	map_pxl_y
 4491                        		__call		_get_map_block.2
         18:CF85  20 95 FF   			call	_get_map_block.2
 4492                        	
 4493                        		.dbg	line,	"include\routines_LEVELS.c", 297; }
 4494    18:CF88             	.LL57:
 4495                        		__modsp		4
         18:CF88  AA         			tax
         18:CF89  A5 8D      			lda	<__sp
         18:CF8B  18         			clc
         18:CF8C  69 04      			adc	#4
         18:CF8E  85 8D      			sta	<__sp
         18:CF90  8A         			txa
 4496                        		__return	1
         18:CF91  AA         			tax
         18:CF92  4C EF FF   			jmp	leave_proc
 4497                        		.dbg	clear
 4498                        		.endp
 4499                        		.pceas
 4500                        	
 4501                        		.dbg	line,	"include\routines_LEVELS.c", 299; // CHECK COLLISION WITH OBJECTS //
 4502                        		.dbg	line,	"include\routines_LEVELS.c", 300; void check_OBJECT()
 4503                        		.dbg	line,	"include\routines_LEVELS.c", 301; {
 4504                        	;***********************
 4505                        	;***********************
 4506                        	
 4507                        		.hucc
 4508    02:DD6D             		.proc		_check_OBJECT
 4509                        		__enter		_check_OBJECT
 4510                        	
 4511                        		.dbg	line,	"include\routines_LEVELS.c", 302; if(onscreen_object_number != 0)
 4512                        		__tst.um	_onscreen_object_number
         02:DD6D  AD 31 23   			lda	_onscreen_object_number
         02:DD70  C9 01      			cmp	#1
 4513                        		__bfalse	.LL59
         02:DD72  B0 03 4C EE			bcc	.LL59
         02:DD76  DE          
 4514                        	
 4515                        		.dbg	line,	"include\routines_LEVELS.c", 303; {
 4516                        	
 4517                        		.dbg	line,	"include\routines_LEVELS.c", 304; char i;
 4518                        	
 4519                        		.dbg	line,	"include\routines_LEVELS.c", 305; char current_object_id;
 4520                        	
 4521                        		.dbg	line,	"include\routines_LEVELS.c", 306; char current_object_type;
 4522                        	
 4523                        		.dbg	line,	"include\routines_LEVELS.c", 308; for(i=0 ; i<onscreen_object_number ; i++)
 4524                        		__st.umiq	0, __check_OBJECT_end - 1  /* i */
         02:DD77  9C 02 23   			stz	__check_OBJECT_end - 1
 4525    02:DD7A             	.LL60:
 4526                        		__ld.umq	__check_OBJECT_end - 1  /* i */
         02:DD7A  AD 02 23   			lda	__check_OBJECT_end - 1
 4527                        		__ult_b.umq	_onscreen_object_number
         02:DD7D  CD 31 23   			cmp	_onscreen_object_number		; Subtract memory from A.
         02:DD80  6A         			ror	a		; CC if A < memory.
         02:DD81  49 80      			eor	#$80
         02:DD83  2A         			rol	a
 4528                        		__btrue		.LL62
         02:DD84  B0 08      			bcs	.LL62
 4529                        		__bra		.LL63
         02:DD86  4C EE DE   			bra	.LL63
 4530    02:DD89             	.LL61:
 4531                        		__inc.umq	__check_OBJECT_end - 1  /* i */
         02:DD89  EE 02 23   			inc	__check_OBJECT_end - 1
 4532                        		__bra		.LL60
         02:DD8C  80 EC      			bra	.LL60
 4533    02:DD8E             	.LL62:
 4534                        	
 4535                        		.dbg	line,	"include\routines_LEVELS.c", 309; {
 4536                        	
 4537                        		.dbg	line,	"include\routines_LEVELS.c", 310; // RETRIEVE OBJECT INDEX IN THE LIST //
 4538                        	
 4539                        		.dbg	line,	"include\routines_LEVELS.c", 311; current_object_id = list_onscreen_object[i];
 4540                        		__ldx.umq	__check_OBJECT_end - 1  /* i */
         02:DD8E  AE 02 23   			ldx	__check_OBJECT_end - 1
 4541                        		__ld.uax	_list_onscreen_object
         02:DD91  BD 96 23   			lda	_list_onscreen_object, x
         02:DD94  C2         			cly
 4542                        		__st.umq	__check_OBJECT_end - 2  /* current_object_id */
         02:DD95  8D 01 23   			sta	__check_OBJECT_end - 2
 4543                        	
 4544                        		.dbg	line,	"include\routines_LEVELS.c", 312; // RETRIEVE OBJECT TYPE //
 4545                        	
 4546                        		.dbg	line,	"include\routines_LEVELS.c", 313; current_object_type = list_object_type[current_object_id];
 4547                        		__ldx.umq	__check_OBJECT_end - 2  /* current_object_id */
         02:DD98  AE 01 23   			ldx	__check_OBJECT_end - 2
 4548                        		__ld.uax	_list_object_type
         02:DD9B  BD 32 23   			lda	_list_object_type, x
         02:DD9E  C2         			cly
 4549                        		__st.umq	__check_OBJECT_end - 3  /* current_object_type */
         02:DD9F  8D 00 23   			sta	__check_OBJECT_end - 3
 4550                        	
 4551                        		.dbg	line,	"include\routines_LEVELS.c", 315; if(current_object_type != TYPE_POT)
 4552                        		__ld.umq	__check_OBJECT_end - 3  /* current_object_type */
         02:DDA2  AD 00 23   			lda	__check_OBJECT_end - 3
 4553                        		__neq_b.uiq	1
         02:DDA5  38         			sec
         02:DDA6  49 01      			eor	#1
         02:DDA8  D0 01      			bne	!+
         02:DDAA  18         			clc
         02:DDAB             	!:
 4554                        		__bfalse	.LL64
         02:DDAB  90 DC      			bcc	.LL64
 4555                        	
 4556                        		.dbg	line,	"include\routines_LEVELS.c", 316; {
 4557                        	
 4558                        		.dbg	line,	"include\routines_LEVELS.c", 317; if(abs( (player_pos_x + 16) - (list_object_x_pos[current_object_id] + 8) ) < OBJECT_MARGIN)
 4559                        		__ld.wm		_player_pos_x
         02:DDAD  AD D4 24   			lda.l	_player_pos_x
         02:DDB0  AC D5 24   			ldy.h	_player_pos_x
 4560                        		__add.wi	16
         02:DDB3  18         			clc
         02:DDB4  69 10      			adc.l	#16
         02:DDB6  90 01      			bcc	!+
         02:DDB8  C8         			iny
         02:DDB9             	!:
 4561                        		__push.wr
         02:DDB9  5A         			phy
         02:DDBA  48         			pha
 4562                        		__ld2x.umq	__check_OBJECT_end - 2  /* current_object_id */
         02:DDBB  AD 01 23   			lda	__check_OBJECT_end - 2
         02:DDBE  0A         			asl	a
         02:DDBF  AA         			tax
 4563                        		__ld.wax	_list_object_x_pos
         02:DDC0  BD DE 24   			lda.l	_list_object_x_pos, x
         02:DDC3  BC DF 24   			ldy.h	_list_object_x_pos, x
 4564                        		__add.wi	8
         02:DDC6  18         			clc
         02:DDC7  69 08      			adc.l	#8
         02:DDC9  90 01      			bcc	!+
         02:DDCB  C8         			iny
         02:DDCC             	!:
 4565                        		__sub.wt
         02:DDCC  BA         			tsx
         02:DDCD  38         			sec
         02:DDCE  49 FF      			eor	#$FF
         02:DDD0  7D 01 21   			adc.l	__tos, x
         02:DDD3  42         			say
         02:DDD4  49 FF      			eor	#$FF
         02:DDD6  7D 02 21   			adc.h	__tos, x
         02:DDD9  42         			say
         02:DDDA  E8         			inx
         02:DDDB  E8         			inx
         02:DDDC  9A         			txs
 4566                        		__call		_abs.1
         02:DDDD  20 09 E5   			call	_abs.1
 4567                        		__slt_w.wi	10
         02:DDE0  C9 0A      			cmp.l	#10		; Subtract integer from Y:A.
         02:DDE2  98         			tya
         02:DDE3  E9 00      			sbc.h	#10
         02:DDE5  50 02      			bvc	!+
         02:DDE7  49 80      			eor	#$80		; -ve if Y:A < integer (signed).
         02:DDE9  0A         	!:		asl	a
 4568                        		__bfalse	.LL65
         02:DDEA  90 9D      			bcc	.LL65
 4569                        	
 4570                        		.dbg	line,	"include\routines_LEVELS.c", 318; {
 4571                        	
 4572                        		.dbg	line,	"include\routines_LEVELS.c", 319; if(abs( (player_pos_y + 16) - (list_object_y_pos[current_object_id] + 8) ) < OBJECT_MARGIN)
 4573                        		__ld.wm		_player_pos_y
         02:DDEC  AD D6 24   			lda.l	_player_pos_y
         02:DDEF  AC D7 24   			ldy.h	_player_pos_y
 4574                        		__add.wi	16
         02:DDF2  18         			clc
         02:DDF3  69 10      			adc.l	#16
         02:DDF5  90 01      			bcc	!+
         02:DDF7  C8         			iny
         02:DDF8             	!:
 4575                        		__push.wr
         02:DDF8  5A         			phy
         02:DDF9  48         			pha
 4576                        		__ld2x.umq	__check_OBJECT_end - 2  /* current_object_id */
         02:DDFA  AD 01 23   			lda	__check_OBJECT_end - 2
         02:DDFD  0A         			asl	a
         02:DDFE  AA         			tax
 4577                        		__ld.wax	_list_object_y_pos
         02:DDFF  BD 10 25   			lda.l	_list_object_y_pos, x
         02:DE02  BC 11 25   			ldy.h	_list_object_y_pos, x
 4578                        		__add.wi	8
         02:DE05  18         			clc
         02:DE06  69 08      			adc.l	#8
         02:DE08  90 01      			bcc	!+
         02:DE0A  C8         			iny
         02:DE0B             	!:
 4579                        		__sub.wt
         02:DE0B  BA         			tsx
         02:DE0C  38         			sec
         02:DE0D  49 FF      			eor	#$FF
         02:DE0F  7D 01 21   			adc.l	__tos, x
         02:DE12  42         			say
         02:DE13  49 FF      			eor	#$FF
         02:DE15  7D 02 21   			adc.h	__tos, x
         02:DE18  42         			say
         02:DE19  E8         			inx
         02:DE1A  E8         			inx
         02:DE1B  9A         			txs
 4580                        		__call		_abs.1
         02:DE1C  20 09 E5   			call	_abs.1
 4581                        		__slt_w.wi	10
         02:DE1F  C9 0A      			cmp.l	#10		; Subtract integer from Y:A.
         02:DE21  98         			tya
         02:DE22  E9 00      			sbc.h	#10
         02:DE24  50 02      			bvc	!+
         02:DE26  49 80      			eor	#$80		; -ve if Y:A < integer (signed).
         02:DE28  0A         	!:		asl	a
 4582                        		__bfalse	.LL66
         02:DE29  B0 03 4C 89			bcc	.LL66
         02:DE2D  DD          
 4583                        	
 4584                        		.dbg	line,	"include\routines_LEVELS.c", 320; {
 4585                        	
 4586                        		.dbg	line,	"include\routines_LEVELS.c", 321; // THE OBJECT DISAPPEARS //
 4587                        	
 4588                        		.dbg	line,	"include\routines_LEVELS.c", 322; list_object_x_pos[current_object_id] = -16;
 4589                        		__ld2x.umq	__check_OBJECT_end - 2  /* current_object_id */
         02:DE2E  AD 01 23   			lda	__check_OBJECT_end - 2
         02:DE31  0A         			asl	a
         02:DE32  AA         			tax
 4590                        		__st.waxiq	-16, _list_object_x_pos
         02:DE33  A9 F0      			lda.l	#-16
         02:DE35  9D DE 24   			sta.l	_list_object_x_pos, x
         02:DE38  A9 FF      			lda.h	#-16
         02:DE3A  9D DF 24   			sta.h	_list_object_x_pos, x
 4591                        	
 4592                        		.dbg	line,	"include\routines_LEVELS.c", 323; list_object_y_pos[current_object_id] = -16;
 4593                        		__ld2x.umq	__check_OBJECT_end - 2  /* current_object_id */
         02:DE3D  AD 01 23   			lda	__check_OBJECT_end - 2
         02:DE40  0A         			asl	a
         02:DE41  AA         			tax
 4594                        		__st.waxiq	-16, _list_object_y_pos
         02:DE42  A9 F0      			lda.l	#-16
         02:DE44  9D 10 25   			sta.l	_list_object_y_pos, x
         02:DE47  A9 FF      			lda.h	#-16
         02:DE49  9D 11 25   			sta.h	_list_object_y_pos, x
 4595                        	
 4596                        		.dbg	line,	"include\routines_LEVELS.c", 324; list_object_state[current_object_id] = STATE_INACTIVE;
 4597                        		__ldx.umq	__check_OBJECT_end - 2  /* current_object_id */
         02:DE4C  AE 01 23   			ldx	__check_OBJECT_end - 2
 4598                        		__st.uaxiq	1, _list_object_state
         02:DE4F  A9 01      			lda.l	#1
         02:DE51  9D 4B 23   			sta	_list_object_state, x
 4599                        	
 4600                        		.dbg	line,	"include\routines_LEVELS.c", 326; sgx_spr_set(current_object_id + object_start_index);
 4601                        		__ld.um		__check_OBJECT_end - 2  /* current_object_id */
         02:DE54  AD 01 23   			lda	__check_OBJECT_end - 2
         02:DE57  C2         			cly
 4602                        		__add.um	_object_start_index
         02:DE58  18         			clc
         02:DE59  6D 2F 23   			adc	_object_start_index
         02:DE5C  90 01      			bcc	!+
         02:DE5E  C8         			iny
         02:DE5F             	!:
 4603                        		__call		_sgx_spr_set.1
         02:DE5F  20 8A E8   			call	_sgx_spr_set.1
 4604                        	
 4605                        		.dbg	line,	"include\routines_LEVELS.c", 327; sgx_spr_x(list_object_x_pos[current_object_id]);
 4606                        		__ld2x.umq	__check_OBJECT_end - 2  /* current_object_id */
         02:DE62  AD 01 23   			lda	__check_OBJECT_end - 2
         02:DE65  0A         			asl	a
         02:DE66  AA         			tax
 4607                        		__ld.wax	_list_object_x_pos
         02:DE67  BD DE 24   			lda.l	_list_object_x_pos, x
         02:DE6A  BC DF 24   			ldy.h	_list_object_x_pos, x
 4608                        		__call		_sgx_spr_x.1
         02:DE6D  20 B7 E8   			call	_sgx_spr_x.1
 4609                        	
 4610                        		.dbg	line,	"include\routines_LEVELS.c", 328; sgx_spr_y(list_object_y_pos[current_object_id]);
 4611                        		__ld2x.umq	__check_OBJECT_end - 2  /* current_object_id */
         02:DE70  AD 01 23   			lda	__check_OBJECT_end - 2
         02:DE73  0A         			asl	a
         02:DE74  AA         			tax
 4612                        		__ld.wax	_list_object_y_pos
         02:DE75  BD 10 25   			lda.l	_list_object_y_pos, x
         02:DE78  BC 11 25   			ldy.h	_list_object_y_pos, x
 4613                        		__call		_sgx_spr_y.1
         02:DE7B  20 C6 E8   			call	_sgx_spr_y.1
 4614                        	
 4615                        		.dbg	line,	"include\routines_LEVELS.c", 329; 
 4616                        	
 4617                        		.dbg	line,	"include\routines_LEVELS.c", 331; switch(current_object_type)
 4618                        		__ld.umq	__check_OBJECT_end - 3  /* current_object_type */
         02:DE7E  AD 00 23   			lda	__check_OBJECT_end - 3
 4619                        		__bra		.LL67
         02:DE81  80 4A      			bra	.LL67
 4620                        	
 4621                        		.dbg	line,	"include\routines_LEVELS.c", 332; {
 4622                        	
 4623                        		.dbg	line,	"include\routines_LEVELS.c", 333; case TYPE_HOURGLASS:
 4624    02:DE83             	.LL69:
 4625                        		__case		0
 4626                        	
 4627                        		.dbg	line,	"include\routines_LEVELS.c", 334; if(seconds + 30 > 59)
 4628                        		__ld.um		_seconds
         02:DE83  AD 2B 23   			lda	_seconds
         02:DE86  C2         			cly
 4629                        		__add.wi	30
         02:DE87  18         			clc
         02:DE88  69 1E      			adc.l	#30
         02:DE8A  90 01      			bcc	!+
         02:DE8C  C8         			iny
         02:DE8D             	!:
 4630                        		__sgt_w.wi	59
         02:DE8D  18         			clc			; Subtract integer+1 from Y:A.
         02:DE8E  E9 3B      			sbc.l	#59
         02:DE90  98         			tya
         02:DE91  E9 00      			sbc.h	#59
         02:DE93  50 02      			bvc	!+
         02:DE95  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         02:DE97  49 80      	!:		eor	#$80
         02:DE99  0A         			asl	a
 4631                        		__bfalse	.LL70
         02:DE9A  90 13      			bcc	.LL70
 4632                        	
 4633                        		.dbg	line,	"include\routines_LEVELS.c", 335; {
 4634                        	
 4635                        		.dbg	line,	"include\routines_LEVELS.c", 336; seconds = seconds + 30 - 60;
 4636                        		__ld.um		_seconds
         02:DE9C  AD 2B 23   			lda	_seconds
         02:DE9F  C2         			cly
 4637                        		__sub.wi	30
         02:DEA0  38         			sec
         02:DEA1  E9 1E      			sbc.l	#30
         02:DEA3  B0 01      			bcs	!+
         02:DEA5  88         			dey
         02:DEA6             	!:
 4638                        		__st.umq	_seconds
         02:DEA6  8D 2B 23   			sta	_seconds
 4639                        	
 4640                        		.dbg	line,	"include\routines_LEVELS.c", 337; minutes += 1;
 4641                        		__add_st.umiq	1, _minutes
         02:DEA9  EE 2A 23   			inc	_minutes
 4642                        	
 4643                        		.dbg	line,	"include\routines_LEVELS.c", 338; }
 4644                        	
 4645                        		.dbg	line,	"include\routines_LEVELS.c", 340; else
 4646                        		__bra		.LL71
         02:DEAC  4C 89 DD   			bra	.LL71
 4647    02:DEAF             	.LL70:
 4648                        	
 4649                        		.dbg	line,	"include\routines_LEVELS.c", 341; {
 4650                        	
 4651                        		.dbg	line,	"include\routines_LEVELS.c", 342; seconds += 30;
 4652                        		__add_st.umiq	30, _seconds
         02:DEAF  18         			clc
         02:DEB0  AD 2B 23   			lda	_seconds
         02:DEB3  69 1E      			adc	#30
         02:DEB5  8D 2B 23   			sta	_seconds
 4653                        	
 4654                        		.dbg	line,	"include\routines_LEVELS.c", 343; }
 4655    02:DEB8             	.LL71	.alias		.LL68
 4656                        	
 4657                        		.dbg	line,	"include\routines_LEVELS.c", 345; break;
 4658                        		__bra		.LL68
         02:DEB8  4C 89 DD   			bra	.LL68
 4659                        	
 4660                        		.dbg	line,	"include\routines_LEVELS.c", 347; case TYPE_POW:
 4661    02:DEBB             	.LL72:
 4662                        		__case		2
 4663                        	
 4664                        		.dbg	line,	"include\routines_LEVELS.c", 348; //
 4665                        	
 4666                        		.dbg	line,	"include\routines_LEVELS.c", 349; break;
 4667                        		__bra		.LL68
         02:DEBB  4C 89 DD   			bra	.LL68
 4668                        	
 4669                        		.dbg	line,	"include\routines_LEVELS.c", 351; case TYPE_GRAY_KEY:
 4670    02:DEBE             	.LL73:
 4671                        		__case		4
 4672                        	
 4673                        		.dbg	line,	"include\routines_LEVELS.c", 352; key_amount += 1;
 4674                        		__add_st.umiq	1, _key_amount
         02:DEBE  EE 28 23   			inc	_key_amount
 4675                        	
 4676                        		.dbg	line,	"include\routines_LEVELS.c", 353; display_KEY();
 4677                        		__call		_display_KEY
         02:DEC1  20 8B FF   			call	_display_KEY
 4678                        	
 4679                        		.dbg	line,	"include\routines_LEVELS.c", 354; break;
 4680                        		__bra		.LL68
         02:DEC4  4C 89 DD   			bra	.LL68
 4681                        	
 4682                        		.dbg	line,	"include\routines_LEVELS.c", 356; case TYPE_YASHICHI:
 4683    02:DEC7             	.LL74:
 4684                        		__case		14
 4685                        	
 4686                        		.dbg	line,	"include\routines_LEVELS.c", 357; life_amount += 1;
 4687                        		__add_st.umiq	1, _life_amount
         02:DEC7  EE 26 23   			inc	_life_amount
 4688                        	
 4689                        		.dbg	line,	"include\routines_LEVELS.c", 358; break;
 4690                        		__bra		.LL68
         02:DECA  4C 89 DD   			bra	.LL68
 4691                        	
 4692                        		.dbg	line,	"include\routines_LEVELS.c", 359; }
 4693    02:DECD             	.LL67:
 4694                        		__switch_c.ur	4
         02:DECD  A2 05      			ldx	#4 + 1
         02:DECF  CA         	!loop:		dex
         02:DED0  F0 05      			beq	!found+
         02:DED2  DD DC DE   			cmp	!table+ - 1, x
         02:DED5  D0 F8      			bne	!loop-
         02:DED7  8A         	!found:		txa
         02:DED8  0A         			asl	a
         02:DED9  AA         			tax
         02:DEDA  7C E1 DE   			jmp	[!table+ + 4, x]
 4695                        	
 4696    02:DEDD  0E 04 02 00	!table:		db	14, 4, 2, 0
 4697    02:DEE1  89 DD      			dw	.LL68
 4698    02:DEE3  C7 DE      			dw	.LL74, .LL73, .LL72, .LL69
         02:DEE5  BE DE       
         02:DEE7  BB DE       
         02:DEE9  83 DE       
 4699                        	
 4700    02:DEEB             	.LL68	.alias		.LL61
 4701                        	
 4702                        		.dbg	line,	"include\routines_LEVELS.c", 360; }
 4703                        	
 4704                        		.dbg	line,	"include\routines_LEVELS.c", 361; }
 4705    02:DEEB             	.LL66	.alias		.LL61
 4706                        	
 4707                        		.dbg	line,	"include\routines_LEVELS.c", 362; }
 4708    02:DEEB             	.LL65	.alias		.LL61
 4709                        	
 4710                        		.dbg	line,	"include\routines_LEVELS.c", 363; }
 4711    02:DEEB             	.LL64	.alias		.LL61
 4712                        		__bra		.LL61
         02:DEEB  4C 89 DD   			bra	.LL61
 4713    02:DEEE             	.LL63:
 4714                        	
 4715                        		.dbg	line,	"include\routines_LEVELS.c", 364; }
 4716                        	
 4717                        		.dbg	line,	"include\routines_LEVELS.c", 365; }
 4718    02:DEEE             	.LL59:
 4719    02:DEEE             	.LL58:
 4720                        		__return	0
         02:DEEE  4C EF FF   			jmp	leave_proc
 4721                        		.dbg	clear
 4722                        		.endp
 4723               67E0     		.data
 4724               2300     		.bss
 4725    F8:2300             	__check_OBJECT_loc:
 4726    F8:2300             			ds	3
 4727    F8:2303             	__check_OBJECT_end:
 4728               E309     		.code
 4729                        		.pceas
 4730                        	
 4731                        		.dbg	line,	"include\routines_LEVELS.c", 367; // CHECK COLLISION WITH NPCS //
 4732                        		.dbg	line,	"include\routines_LEVELS.c", 368; void check_NPC()
 4733                        		.dbg	line,	"include\routines_LEVELS.c", 369; {
 4734                        	;***********************
 4735                        	;***********************
 4736                        	
 4737                        		.hucc
 4738    18:C5A4             		.proc		_check_NPC
 4739                        		__enter		_check_NPC
 4740                        	
 4741                        		.dbg	line,	"include\routines_LEVELS.c", 370; if(onscreen_npc_number != 0)
 4742                        		__tst.um	_onscreen_npc_number
         18:C5A4  AD B3 23   			lda	_onscreen_npc_number
         18:C5A7  C9 01      			cmp	#1
 4743                        		__bfalse	.LL76
         18:C5A9  B0 03 4C DF			bcc	.LL76
         18:C5AD  C6          
 4744                        	
 4745                        		.dbg	line,	"include\routines_LEVELS.c", 371; {
 4746                        	
 4747                        		.dbg	line,	"include\routines_LEVELS.c", 372; if(player_state == STATE_IDLE || player_state == STATE_WALK)
 4748                        		__not.um	_player_state
         18:C5AE  AD 16 23   			lda	_player_state
         18:C5B1  18         			clc
         18:C5B2  D0 01      			bne	!+
         18:C5B4  38         			sec
         18:C5B5             	!:
 4749                        		__btrue		.LL78
         18:C5B5  B0 08      			bcs	.LL78
 4750                        		__ld.umq	_player_state
         18:C5B7  AD 16 23   			lda	_player_state
 4751                        		__equ_b.uiq	1
         18:C5BA  C9 01      			cmp	#1
         18:C5BC  F0 01      			beq	!+
         18:C5BE  18         			clc
         18:C5BF             	!:
 4752    18:C5BF             	.LL78:
 4753                        		__bfalse	.LL77
         18:C5BF  B0 03 4C DF			bcc	.LL77
         18:C5C3  C6          
 4754                        	
 4755                        		.dbg	line,	"include\routines_LEVELS.c", 373; {
 4756                        	
 4757                        		.dbg	line,	"include\routines_LEVELS.c", 374; char i,j;
 4758                        	
 4759                        		.dbg	line,	"include\routines_LEVELS.c", 375; char current_npc_id;
 4760                        	
 4761                        		.dbg	line,	"include\routines_LEVELS.c", 376; char current_npc_type;
 4762                        	
 4763                        		.dbg	line,	"include\routines_LEVELS.c", 378; for(i=0 ; i<onscreen_npc_number ; i++)
 4764                        		__st.umiq	0, __check_NPC_end - 1  /* i */
         18:C5C4  9C 4B 26   			stz	__check_NPC_end - 1
 4765    18:C5C7             	.LL79:
 4766                        		__ld.umq	__check_NPC_end - 1  /* i */
         18:C5C7  AD 4B 26   			lda	__check_NPC_end - 1
 4767                        		__ult_b.umq	_onscreen_npc_number
         18:C5CA  CD B3 23   			cmp	_onscreen_npc_number		; Subtract memory from A.
         18:C5CD  6A         			ror	a		; CC if A < memory.
         18:C5CE  49 80      			eor	#$80
         18:C5D0  2A         			rol	a
 4768                        		__btrue		.LL81
         18:C5D1  B0 08      			bcs	.LL81
 4769                        		__bra		.LL82
         18:C5D3  4C DF C6   			bra	.LL82
 4770    18:C5D6             	.LL80:
 4771                        		__inc.umq	__check_NPC_end - 1  /* i */
         18:C5D6  EE 4B 26   			inc	__check_NPC_end - 1
 4772                        		__bra		.LL79
         18:C5D9  80 EC      			bra	.LL79
 4773    18:C5DB             	.LL81:
 4774                        	
 4775                        		.dbg	line,	"include\routines_LEVELS.c", 379; {
 4776                        	
 4777                        		.dbg	line,	"include\routines_LEVELS.c", 380; // RETRIEVE NPC INDEX IN THE LIST //
 4778                        	
 4779                        		.dbg	line,	"include\routines_LEVELS.c", 381; current_npc_id = list_onscreen_npc[i];
 4780                        		__ldx.umq	__check_NPC_end - 1  /* i */
         18:C5DB  AE 4B 26   			ldx	__check_NPC_end - 1
 4781                        		__ld.uax	_list_onscreen_npc
         18:C5DE  BD C6 23   			lda	_list_onscreen_npc, x
         18:C5E1  C2         			cly
 4782                        		__st.umq	__check_NPC_end - 3  /* current_npc_id */
         18:C5E2  8D 49 26   			sta	__check_NPC_end - 3
 4783                        	
 4784                        		.dbg	line,	"include\routines_LEVELS.c", 383; if(list_npc_state[current_npc_id] == STATE_ACTIVE)
 4785                        		__ldx.umq	__check_NPC_end - 3  /* current_npc_id */
         18:C5E5  AE 49 26   			ldx	__check_NPC_end - 3
 4786                        		__not.uax	_list_npc_state
         18:C5E8  BD BD 23   			lda	_list_npc_state, x
         18:C5EB  18         			clc
         18:C5EC  D0 01      			bne	!+
         18:C5EE  38         			sec
         18:C5EF             	!:
 4787                        		__bfalse	.LL83
         18:C5EF  90 E5      			bcc	.LL83
 4788                        	
 4789                        		.dbg	line,	"include\routines_LEVELS.c", 384; {
 4790                        	
 4791                        		.dbg	line,	"include\routines_LEVELS.c", 385; // RETRIEVE NPC TYPE //
 4792                        	
 4793                        		.dbg	line,	"include\routines_LEVELS.c", 386; current_npc_type = list_npc_type[current_npc_id];
 4794                        		__ldx.umq	__check_NPC_end - 3  /* current_npc_id */
         18:C5F1  AE 49 26   			ldx	__check_NPC_end - 3
 4795                        		__ld.uax	_list_npc_type
         18:C5F4  BD B4 23   			lda	_list_npc_type, x
         18:C5F7  C2         			cly
 4796                        		__st.umq	__check_NPC_end - 4  /* current_npc_type */
         18:C5F8  8D 48 26   			sta	__check_NPC_end - 4
 4797                        	
 4798                        		.dbg	line,	"include\routines_LEVELS.c", 388; if(abs( (player_pos_x + 16) - (list_npc_x_pos[current_npc_id] + 16) ) < OBJECT_MARGIN)
 4799                        		__ld.wm		_player_pos_x
         18:C5FB  AD D4 24   			lda.l	_player_pos_x
         18:C5FE  AC D5 24   			ldy.h	_player_pos_x
 4800                        		__add.wi	16
         18:C601  18         			clc
         18:C602  69 10      			adc.l	#16
         18:C604  90 01      			bcc	!+
         18:C606  C8         			iny
         18:C607             	!:
 4801                        		__push.wr
         18:C607  5A         			phy
         18:C608  48         			pha
 4802                        		__ld2x.umq	__check_NPC_end - 3  /* current_npc_id */
         18:C609  AD 49 26   			lda	__check_NPC_end - 3
         18:C60C  0A         			asl	a
         18:C60D  AA         			tax
 4803                        		__ld.wax	_list_npc_x_pos
         18:C60E  BD E6 25   			lda.l	_list_npc_x_pos, x
         18:C611  BC E7 25   			ldy.h	_list_npc_x_pos, x
 4804                        		__add.wi	16
         18:C614  18         			clc
         18:C615  69 10      			adc.l	#16
         18:C617  90 01      			bcc	!+
         18:C619  C8         			iny
         18:C61A             	!:
 4805                        		__sub.wt
         18:C61A  BA         			tsx
         18:C61B  38         			sec
         18:C61C  49 FF      			eor	#$FF
         18:C61E  7D 01 21   			adc.l	__tos, x
         18:C621  42         			say
         18:C622  49 FF      			eor	#$FF
         18:C624  7D 02 21   			adc.h	__tos, x
         18:C627  42         			say
         18:C628  E8         			inx
         18:C629  E8         			inx
         18:C62A  9A         			txs
 4806                        		__call		_abs.1
         18:C62B  20 09 E5   			call	_abs.1
 4807                        		__slt_w.wi	10
         18:C62E  C9 0A      			cmp.l	#10		; Subtract integer from Y:A.
         18:C630  98         			tya
         18:C631  E9 00      			sbc.h	#10
         18:C633  50 02      			bvc	!+
         18:C635  49 80      			eor	#$80		; -ve if Y:A < integer (signed).
         18:C637  0A         	!:		asl	a
 4808                        		__bfalse	.LL84
         18:C638  90 9C      			bcc	.LL84
 4809                        	
 4810                        		.dbg	line,	"include\routines_LEVELS.c", 389; {
 4811                        	
 4812                        		.dbg	line,	"include\routines_LEVELS.c", 390; if(abs( (player_pos_y + 16) - (list_npc_y_pos[current_npc_id] + 16) ) < OBJECT_MARGIN)
 4813                        		__ld.wm		_player_pos_y
         18:C63A  AD D6 24   			lda.l	_player_pos_y
         18:C63D  AC D7 24   			ldy.h	_player_pos_y
 4814                        		__add.wi	16
         18:C640  18         			clc
         18:C641  69 10      			adc.l	#16
         18:C643  90 01      			bcc	!+
         18:C645  C8         			iny
         18:C646             	!:
 4815                        		__push.wr
         18:C646  5A         			phy
         18:C647  48         			pha
 4816                        		__ld2x.umq	__check_NPC_end - 3  /* current_npc_id */
         18:C648  AD 49 26   			lda	__check_NPC_end - 3
         18:C64B  0A         			asl	a
         18:C64C  AA         			tax
 4817                        		__ld.wax	_list_npc_y_pos
         18:C64D  BD F8 25   			lda.l	_list_npc_y_pos, x
         18:C650  BC F9 25   			ldy.h	_list_npc_y_pos, x
 4818                        		__add.wi	16
         18:C653  18         			clc
         18:C654  69 10      			adc.l	#16
         18:C656  90 01      			bcc	!+
         18:C658  C8         			iny
         18:C659             	!:
 4819                        		__sub.wt
         18:C659  BA         			tsx
         18:C65A  38         			sec
         18:C65B  49 FF      			eor	#$FF
         18:C65D  7D 01 21   			adc.l	__tos, x
         18:C660  42         			say
         18:C661  49 FF      			eor	#$FF
         18:C663  7D 02 21   			adc.h	__tos, x
         18:C666  42         			say
         18:C667  E8         			inx
         18:C668  E8         			inx
         18:C669  9A         			txs
 4820                        		__call		_abs.1
         18:C66A  20 09 E5   			call	_abs.1
 4821                        		__slt_w.wi	10
         18:C66D  C9 0A      			cmp.l	#10		; Subtract integer from Y:A.
         18:C66F  98         			tya
         18:C670  E9 00      			sbc.h	#10
         18:C672  50 02      			bvc	!+
         18:C674  49 80      			eor	#$80		; -ve if Y:A < integer (signed).
         18:C676  0A         	!:		asl	a
 4822                        		__bfalse	.LL85
         18:C677  B0 03 4C D6			bcc	.LL85
         18:C67B  C5          
 4823                        	
 4824                        		.dbg	line,	"include\routines_LEVELS.c", 391; {               
 4825                        	
 4826                        		.dbg	line,	"include\routines_LEVELS.c", 392; switch(current_npc_type)
 4827                        		__ld.umq	__check_NPC_end - 4  /* current_npc_type */
         18:C67C  AD 48 26   			lda	__check_NPC_end - 4
 4828                        		__bra		.LL86
         18:C67F  80 4A      			bra	.LL86
 4829                        	
 4830                        		.dbg	line,	"include\routines_LEVELS.c", 393; {
 4831                        	
 4832                        		.dbg	line,	"include\routines_LEVELS.c", 394; case TYPE_NPC_REWARD:
 4833    18:C681             	.LL88:
 4834                        		__case		0
 4835                        	
 4836                        		.dbg	line,	"include\routines_LEVELS.c", 395; //
 4837                        	
 4838                        		.dbg	line,	"include\routines_LEVELS.c", 396; break;
 4839                        		__bra		.LL87
         18:C681  4C D6 C5   			bra	.LL87
 4840                        	
 4841                        		.dbg	line,	"include\routines_LEVELS.c", 398; case TYPE_NPC_SHOP:
 4842    18:C684             	.LL89:
 4843                        		__case		1
 4844                        	
 4845                        		.dbg	line,	"include\routines_LEVELS.c", 399; disp_off();
 4846                        		__call		_disp_off
         18:C684  20 29 E4   			call	_disp_off
 4847                        	
 4848                        		.dbg	line,	"include\routines_LEVELS.c", 401; minutes_backup = minutes;
 4849                        		__ld.um		_minutes
         18:C687  AD 2A 23   			lda	_minutes
         18:C68A  C2         			cly
 4850                        		__st.umq	_minutes_backup
         18:C68B  8D 2D 23   			sta	_minutes_backup
 4851                        	
 4852                        		.dbg	line,	"include\routines_LEVELS.c", 402; seconds_backup = seconds;
 4853                        		__ld.um		_seconds
         18:C68E  AD 2B 23   			lda	_seconds
         18:C691  C2         			cly
 4854                        		__st.umq	_seconds_backup
         18:C692  8D 2E 23   			sta	_seconds_backup
 4855                        	
 4856                        		.dbg	line,	"include\routines_LEVELS.c", 403; list_npc_state[current_npc_id] = STATE_INACTIVE;
 4857                        		__ldx.umq	__check_NPC_end - 3  /* current_npc_id */
         18:C695  AE 49 26   			ldx	__check_NPC_end - 3
 4858                        		__st.uaxiq	1, _list_npc_state
         18:C698  A9 01      			lda.l	#1
         18:C69A  9D BD 23   			sta	_list_npc_state, x
 4859                        	
 4860                        		.dbg	line,	"include\routines_LEVELS.c", 404; camera_pos_x_backup = sgx_map_pxl_x;
 4861                        		__ld.wm		_sgx_map_pxl_x
         18:C69D  AD 90 26   			lda.l	_sgx_map_pxl_x
         18:C6A0  AC 91 26   			ldy.h	_sgx_map_pxl_x
 4862                        		__st.wmq	_camera_pos_x_backup
         18:C6A3  8D DA 24   			sta.l	_camera_pos_x_backup
         18:C6A6  8C DB 24   			sty.h	_camera_pos_x_backup
 4863                        	
 4864                        		.dbg	line,	"include\routines_LEVELS.c", 405; camera_pos_y_backup = list_npc_y_pos_ref[current_npc_id] - 128;                                    
 4865                        		__ld2x.umq	__check_NPC_end - 3  /* current_npc_id */
         18:C6A9  AD 49 26   			lda	__check_NPC_end - 3
         18:C6AC  0A         			asl	a
         18:C6AD  AA         			tax
 4866                        		__ld.wax	_list_npc_y_pos_ref
         18:C6AE  BD 1C 26   			lda.l	_list_npc_y_pos_ref, x
         18:C6B1  BC 1D 26   			ldy.h	_list_npc_y_pos_ref, x
 4867                        		__sub.wi	128
         18:C6B4  38         			sec
         18:C6B5  E9 80      			sbc.l	#128
         18:C6B7  B0 01      			bcs	!+
         18:C6B9  88         			dey
         18:C6BA             	!:
 4868                        		__st.wmq	_camera_pos_y_backup
         18:C6BA  8D DC 24   			sta.l	_camera_pos_y_backup
         18:C6BD  8C DD 24   			sty.h	_camera_pos_y_backup
 4869                        	
 4870                        		.dbg	line,	"include\routines_LEVELS.c", 406; sequence_loaded = FALSE;
 4871                        		__st.umiq	0, _sequence_loaded
         18:C6C0  9C 12 23   			stz	_sequence_loaded
 4872                        	
 4873                        		.dbg	line,	"include\routines_LEVELS.c", 407; sequence_id = SEQUENCE_SHOP;
 4874                        		__st.umiq	4, _sequence_id
         18:C6C3  A9 04      			lda.l	#4
         18:C6C5  8D 11 23   			sta	_sequence_id
 4875                        	
 4876                        		.dbg	line,	"include\routines_LEVELS.c", 408; break;
 4877                        		__bra		.LL87
         18:C6C8  4C D6 C5   			bra	.LL87
 4878                        	
 4879                        		.dbg	line,	"include\routines_LEVELS.c", 409; }
 4880    18:C6CB             	.LL86:
 4881                        		__switch_r.ur	0, 1
         18:C6CB  C9 02      			cmp	#(1 - 0) + 1
         18:C6CD  90 02      			bcc	!found+
         18:C6CF  A9 02      	!default:	lda	#(1 - 0) + 1
         18:C6D1  0A         	!found:		asl	a
         18:C6D2  AA         			tax
         18:C6D3  7C D6 C6   			jmp	[!table+, x]
 4882                        	
 4883    18:C6D6  81 C6      	!table:		dw	.LL88, .LL89
         18:C6D8  84 C6       
 4884    18:C6DA  D6 C5      			dw	.LL87
 4885    18:C6DC             	.LL87	.alias		.LL80
 4886                        	
 4887                        		.dbg	line,	"include\routines_LEVELS.c", 410; }
 4888                        	
 4889                        		.dbg	line,	"include\routines_LEVELS.c", 411; }
 4890    18:C6DC             	.LL85	.alias		.LL80
 4891                        	
 4892                        		.dbg	line,	"include\routines_LEVELS.c", 412; }
 4893    18:C6DC             	.LL84	.alias		.LL80
 4894                        	
 4895                        		.dbg	line,	"include\routines_LEVELS.c", 413; }
 4896    18:C6DC             	.LL83	.alias		.LL80
 4897                        		__bra		.LL80
         18:C6DC  4C D6 C5   			bra	.LL80
 4898    18:C6DF             	.LL82:
 4899                        	
 4900                        		.dbg	line,	"include\routines_LEVELS.c", 414; }
 4901                        	
 4902                        		.dbg	line,	"include\routines_LEVELS.c", 415; }
 4903    18:C6DF             	.LL77:
 4904                        	
 4905                        		.dbg	line,	"include\routines_LEVELS.c", 416; }
 4906    18:C6DF             	.LL76:
 4907    18:C6DF             	.LL75:
 4908                        		__return	0
         18:C6DF  4C EF FF   			jmp	leave_proc
 4909                        		.dbg	clear
 4910                        		.endp
 4911                        		.pceas
 4912                        	
 4913                        		.dbg	line,	"include\routines_LEVELS.c", 422; void scroll_BG()
 4914                        		.dbg	line,	"include\routines_LEVELS.c", 423; {
 4915                        	;***********************
 4916                        	;***********************
 4917                        	
 4918                        		.hucc
 4919    18:D1BD             		.proc		_scroll_BG
 4920                        		__enter		_scroll_BG
 4921                        	
 4922                        		.dbg	line,	"include\routines_LEVELS.c", 424; // UPDATE VDC2 BG //
 4923                        	
 4924                        		.dbg	line,	"include\routines_LEVELS.c", 425; sgx_scroll_map();
 4925                        		__call		_sgx_scroll_map
         18:D1BD  20 81 FF   			call	_sgx_scroll_map
 4926                        	
 4927                        		.dbg	line,	"include\routines_LEVELS.c", 427; //--------------------------------------------------------------------------------------//
 4928                        	
 4929                        		.dbg	line,	"include\routines_LEVELS.c", 428; //                                        VDC 2                                         //
 4930                        	
 4931                        		.dbg	line,	"include\routines_LEVELS.c", 429; //--------------------------------------------------------------------------------------//
 4932                        	
 4933                        		.dbg	line,	"include\routines_LEVELS.c", 431; sgx_scroll_split(0,   0, sgx_map_pxl_x & (BAT_SIZE_W - 1), sgx_map_pxl_y & (BAT_SIZE_H - 1), BKG_ON | SPR_ON);
 4934                        		__st.umiq	0, _al
         18:D1C0  64 F8      			stz	_al
 4935                        		__st.umiq	0, _ah
         18:D1C2  64 F9      			stz	_ah
 4936                        		__ld.wm		_sgx_map_pxl_x
         18:D1C4  AD 90 26   			lda.l	_sgx_map_pxl_x
         18:D1C7  AC 91 26   			ldy.h	_sgx_map_pxl_x
 4937                        		__and.wi	2047
         18:D1CA  29 FF      			and.l	#2047
         18:D1CC  42         			say
         18:D1CD  29 07      			and.h	#2047
         18:D1CF  42         			say
 4938                        		__st.wmq	_bx
         18:D1D0  85 FA      			sta.l	_bx
         18:D1D2  84 FB      			sty.h	_bx
 4939                        		__ld.wm		_sgx_map_pxl_y
         18:D1D4  AD 92 26   			lda.l	_sgx_map_pxl_y
         18:D1D7  AC 93 26   			ldy.h	_sgx_map_pxl_y
 4940                        		__and.wi	255
         18:D1DA  29 FF      			and	#255
         18:D1DC  C2         			cly
 4941                        		__st.wmq	_cx
         18:D1DD  85 FC      			sta.l	_cx
         18:D1DF  84 FD      			sty.h	_cx
 4942                        		__st.umiq	192, _dl
         18:D1E1  A9 C0      			lda.l	#192
         18:D1E3  85 FE      			sta	_dl
 4943                        		__call		_sgx_scroll_split.5
         18:D1E5  20 77 FF   			call	_sgx_scroll_split.5
 4944                        	
 4945                        		.dbg	line,	"include\routines_LEVELS.c", 432; }
 4946    18:D1E8             	.LL90:
 4947                        		__return	0
         18:D1E8  4C EF FF   			jmp	leave_proc
 4948                        		.dbg	clear
 4949                        		.endp
 4950                        		.pceas
 4951                        	
 4952                        		.dbg	line,	"include\routines_LEVELS.c", 435; void recenter_CAMERA()
 4953                        		.dbg	line,	"include\routines_LEVELS.c", 436; {
 4954                        	;***********************
 4955                        	;***********************
 4956                        	
 4957                        		.hucc
 4958    18:C820             		.proc		_recenter_CAMERA
 4959                        		__enter		_recenter_CAMERA
 4960                        	
 4961                        		.dbg	line,	"include\routines_LEVELS.c", 437; signed char camera_y_move;
 4962                        	
 4963                        		.dbg	line,	"include\routines_LEVELS.c", 439; spr_set(player_id);
 4964                        		__ld.umq	_player_id
         18:C820  AD 15 23   			lda	_player_id
 4965                        		__call		_spr_set.1
         18:C823  20 DD E7   			call	_spr_set.1
 4966                        	
 4967                        		.dbg	line,	"include\routines_LEVELS.c", 442; if(player_pos_y < 128)
 4968                        		__ld.wm		_player_pos_y
         18:C826  AD D6 24   			lda.l	_player_pos_y
         18:C829  AC D7 24   			ldy.h	_player_pos_y
 4969                        		__slt_w.wi	128
         18:C82C  C9 80      			cmp.l	#128		; Subtract integer from Y:A.
         18:C82E  98         			tya
         18:C82F  E9 00      			sbc.h	#128
         18:C831  50 02      			bvc	!+
         18:C833  49 80      			eor	#$80		; -ve if Y:A < integer (signed).
         18:C835  0A         	!:		asl	a
 4970                        		__bfalse	.LL92
         18:C836  90 70      			bcc	.LL92
 4971                        	
 4972                        		.dbg	line,	"include\routines_LEVELS.c", 443; {
 4973                        	
 4974                        		.dbg	line,	"include\routines_LEVELS.c", 444; player_pos_y += CAMERA_RECENTER_VELOCITY;
 4975                        		__add_st.wmiq	4, _player_pos_y
         18:C838  18         			clc
         18:C839  AD D6 24   			lda.l	_player_pos_y
         18:C83C  69 04      			adc.l	#4
         18:C83E  8D D6 24   			sta.l	_player_pos_y
         18:C841  90 03      			bcc	!+
         18:C843  EE D7 24   			inc.h	_player_pos_y
         18:C846             	!:
 4976                        	
 4977                        		.dbg	line,	"include\routines_LEVELS.c", 446; if(player_pos_y > 128)
 4978                        		__ld.wm		_player_pos_y
         18:C846  AD D6 24   			lda.l	_player_pos_y
         18:C849  AC D7 24   			ldy.h	_player_pos_y
 4979                        		__sgt_w.wi	128
         18:C84C  18         			clc			; Subtract integer+1 from Y:A.
         18:C84D  E9 80      			sbc.l	#128
         18:C84F  98         			tya
         18:C850  E9 00      			sbc.h	#128
         18:C852  50 02      			bvc	!+
         18:C854  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         18:C856  49 80      	!:		eor	#$80
         18:C858  0A         			asl	a
 4980                        		__bfalse	.LL93
         18:C859  90 24      			bcc	.LL93
 4981                        	
 4982                        		.dbg	line,	"include\routines_LEVELS.c", 447; {
 4983                        	
 4984                        		.dbg	line,	"include\routines_LEVELS.c", 448; camera_y_move = CAMERA_RECENTER_VELOCITY - (player_pos_y - 128);
 4985                        		__ld.wm		_player_pos_y
         18:C85B  AD D6 24   			lda.l	_player_pos_y
         18:C85E  AC D7 24   			ldy.h	_player_pos_y
 4986                        		__sub.wi	128
         18:C861  38         			sec
         18:C862  E9 80      			sbc.l	#128
         18:C864  B0 01      			bcs	!+
         18:C866  88         			dey
         18:C867             	!:
 4987                        		__isub.wi	4
         18:C867  38         			sec
         18:C868  49 FF      			eor	#$FF
         18:C86A  69 04      			adc.l	#4
         18:C86C  42         			say
         18:C86D  49 FF      			eor	#$FF
         18:C86F  69 00      			adc.h	#4
         18:C871  42         			say
 4988                        		__st.umq	__recenter_CAMERA_end - 1  /* camera_y_move */
         18:C872  8D 4B 26   			sta	__recenter_CAMERA_end - 1
 4989                        	
 4990                        		.dbg	line,	"include\routines_LEVELS.c", 450; player_pos_y = 128;
 4991                        		__st.wmiq	128, _player_pos_y
         18:C875  A9 80      			lda.l	#128
         18:C877  8D D6 24   			sta.l	_player_pos_y
         18:C87A  9C D7 24   			stz.h	_player_pos_y
 4992                        	
 4993                        		.dbg	line,	"include\routines_LEVELS.c", 451; }
 4994                        	
 4995                        		.dbg	line,	"include\routines_LEVELS.c", 453; else
 4996                        		__bra		.LL94
         18:C87D  80 05      			bra	.LL94
 4997    18:C87F             	.LL93:
 4998                        	
 4999                        		.dbg	line,	"include\routines_LEVELS.c", 454; {
 5000                        	
 5001                        		.dbg	line,	"include\routines_LEVELS.c", 455; camera_y_move = CAMERA_RECENTER_VELOCITY;
 5002                        		__st.umiq	4, __recenter_CAMERA_end - 1  /* camera_y_move */
         18:C87F  A9 04      			lda.l	#4
         18:C881  8D 4B 26   			sta	__recenter_CAMERA_end - 1
 5003                        	
 5004                        		.dbg	line,	"include\routines_LEVELS.c", 456; }
 5005    18:C884             	.LL94:
 5006                        	
 5007                        		.dbg	line,	"include\routines_LEVELS.c", 458; spr_y(player_pos_y);
 5008                        		__ld.wm		_player_pos_y
         18:C884  AD D6 24   			lda.l	_player_pos_y
         18:C887  AC D7 24   			ldy.h	_player_pos_y
 5009                        		__call		_spr_y.1
         18:C88A  20 19 E8   			call	_spr_y.1
 5010                        	
 5011                        		.dbg	line,	"include\routines_LEVELS.c", 460; sgx_map_pxl_y -= camera_y_move;
 5012                        		__ld.bm		__recenter_CAMERA_end - 1  /* camera_y_move */
         18:C88D  AD 4B 26   			lda	__recenter_CAMERA_end - 1
         18:C890  C2         			cly
         18:C891  10 01      			bpl	!+
         18:C893  88         			dey
         18:C894             	!:
 5013                        		__isub_st.wmq	_sgx_map_pxl_y
         18:C894  38         			sec
         18:C895  49 FF      			eor	#$FF
         18:C897  6D 92 26   			adc.l	_sgx_map_pxl_y
         18:C89A  8D 92 26   			sta.l	_sgx_map_pxl_y
         18:C89D  98         			tya
         18:C89E  49 FF      			eor	#$FF
         18:C8A0  6D 93 26   			adc.h	_sgx_map_pxl_y
         18:C8A3  8D 93 26   			sta.h	_sgx_map_pxl_y
 5014                        	
 5015                        		.dbg	line,	"include\routines_LEVELS.c", 461; }
 5016                        	
 5017                        		.dbg	line,	"include\routines_LEVELS.c", 464; else if(player_pos_y > 128)
 5018                        		__bra		.LL95
         18:C8A6  80 7C      			bra	.LL95
 5019    18:C8A8             	.LL92:
 5020                        		__ld.wm		_player_pos_y
         18:C8A8  AD D6 24   			lda.l	_player_pos_y
         18:C8AB  AC D7 24   			ldy.h	_player_pos_y
 5021                        		__sgt_w.wi	128
         18:C8AE  18         			clc			; Subtract integer+1 from Y:A.
         18:C8AF  E9 80      			sbc.l	#128
         18:C8B1  98         			tya
         18:C8B2  E9 00      			sbc.h	#128
         18:C8B4  50 02      			bvc	!+
         18:C8B6  49 80      			eor	#$80		; +ve if Y:A > integer (signed).
         18:C8B8  49 80      	!:		eor	#$80
         18:C8BA  0A         			asl	a
 5022                        		__bfalse	.LL96
         18:C8BB  90 67      			bcc	.LL96
 5023                        	
 5024                        		.dbg	line,	"include\routines_LEVELS.c", 465; {
 5025                        	
 5026                        		.dbg	line,	"include\routines_LEVELS.c", 466; player_pos_y -= CAMERA_RECENTER_VELOCITY;
 5027                        		__sub_st.wmiq	4, _player_pos_y
         18:C8BD  38         			sec
         18:C8BE  AD D6 24   			lda.l	_player_pos_y
         18:C8C1  E9 04      			sbc.l	#4
         18:C8C3  8D D6 24   			sta.l	_player_pos_y
         18:C8C6  B0 03      			bcs	!+
         18:C8C8  CE D7 24   			dec.h	_player_pos_y
         18:C8CB             	!:
 5028                        	
 5029                        		.dbg	line,	"include\routines_LEVELS.c", 468; if(player_pos_y < 128)
 5030                        		__ld.wm		_player_pos_y
         18:C8CB  AD D6 24   			lda.l	_player_pos_y
         18:C8CE  AC D7 24   			ldy.h	_player_pos_y
 5031                        		__slt_w.wi	128
         18:C8D1  C9 80      			cmp.l	#128		; Subtract integer from Y:A.
         18:C8D3  98         			tya
         18:C8D4  E9 00      			sbc.h	#128
         18:C8D6  50 02      			bvc	!+
         18:C8D8  49 80      			eor	#$80		; -ve if Y:A < integer (signed).
         18:C8DA  0A         	!:		asl	a
 5032                        		__bfalse	.LL97
         18:C8DB  90 24      			bcc	.LL97
 5033                        	
 5034                        		.dbg	line,	"include\routines_LEVELS.c", 469; {
 5035                        	
 5036                        		.dbg	line,	"include\routines_LEVELS.c", 470; camera_y_move = CAMERA_RECENTER_VELOCITY - (128 - player_pos_y);
 5037                        		__ld.wi		128
         18:C8DD  A9 80      			lda.l	#128
         18:C8DF  C2         			cly
 5038                        		__sub.wm	_player_pos_y
         18:C8E0  38         			sec
         18:C8E1  ED D6 24   			sbc.l	_player_pos_y
         18:C8E4  42         			say
         18:C8E5  ED D7 24   			sbc.h	_player_pos_y
         18:C8E8  42         			say
 5039                        		__isub.wi	4
         18:C8E9  38         			sec
         18:C8EA  49 FF      			eor	#$FF
         18:C8EC  69 04      			adc.l	#4
         18:C8EE  42         			say
         18:C8EF  49 FF      			eor	#$FF
         18:C8F1  69 00      			adc.h	#4
         18:C8F3  42         			say
 5040                        		__st.umq	__recenter_CAMERA_end - 1  /* camera_y_move */
         18:C8F4  8D 4B 26   			sta	__recenter_CAMERA_end - 1
 5041                        	
 5042                        		.dbg	line,	"include\routines_LEVELS.c", 472; player_pos_y = 128;
 5043                        		__st.wmiq	128, _player_pos_y
         18:C8F7  A9 80      			lda.l	#128
         18:C8F9  8D D6 24   			sta.l	_player_pos_y
         18:C8FC  9C D7 24   			stz.h	_player_pos_y
 5044                        	
 5045                        		.dbg	line,	"include\routines_LEVELS.c", 473; }
 5046                        	
 5047                        		.dbg	line,	"include\routines_LEVELS.c", 475; else
 5048                        		__bra		.LL98
         18:C8FF  80 05      			bra	.LL98
 5049    18:C901             	.LL97:
 5050                        	
 5051                        		.dbg	line,	"include\routines_LEVELS.c", 476; {
 5052                        	
 5053                        		.dbg	line,	"include\routines_LEVELS.c", 477; camera_y_move = CAMERA_RECENTER_VELOCITY;
 5054                        		__st.umiq	4, __recenter_CAMERA_end - 1  /* camera_y_move */
         18:C901  A9 04      			lda.l	#4
         18:C903  8D 4B 26   			sta	__recenter_CAMERA_end - 1
 5055                        	
 5056                        		.dbg	line,	"include\routines_LEVELS.c", 478; }
 5057    18:C906             	.LL98:
 5058                        	
 5059                        		.dbg	line,	"include\routines_LEVELS.c", 480; spr_y(player_pos_y);
 5060                        		__ld.wm		_player_pos_y
         18:C906  AD D6 24   			lda.l	_player_pos_y
         18:C909  AC D7 24   			ldy.h	_player_pos_y
 5061                        		__call		_spr_y.1
         18:C90C  20 19 E8   			call	_spr_y.1
 5062                        	
 5063                        		.dbg	line,	"include\routines_LEVELS.c", 482; sgx_map_pxl_y += camera_y_move;
 5064                        		__ld.bm		__recenter_CAMERA_end - 1  /* camera_y_move */
         18:C90F  AD 4B 26   			lda	__recenter_CAMERA_end - 1
         18:C912  C2         			cly
         18:C913  10 01      			bpl	!+
         18:C915  88         			dey
         18:C916             	!:
 5065                        		__add_st.wmq	_sgx_map_pxl_y
         18:C916  18         			clc
         18:C917  6D 92 26   			adc.l	_sgx_map_pxl_y
         18:C91A  8D 92 26   			sta.l	_sgx_map_pxl_y
         18:C91D  98         			tya
         18:C91E  6D 93 26   			adc.h	_sgx_map_pxl_y
         18:C921  8D 93 26   			sta.h	_sgx_map_pxl_y
 5066                        	
 5067                        		.dbg	line,	"include\routines_LEVELS.c", 483; }
 5068                        	
 5069                        		.dbg	line,	"include\routines_LEVELS.c", 484; }
 5070    18:C924             	.LL96:
 5071    18:C924             	.LL95:
 5072    18:C924             	.LL91:
 5073                        		__return	0
         18:C924  4C EF FF   			jmp	leave_proc
 5074                        		.dbg	clear
 5075                        		.endp
 5076                        		.pceas
 5077                        	
 5078                        		.dbg	line,	"include\routines_LEVELS.c", 493; void joypad_BUTTONS()
 5079                        		.dbg	line,	"include\routines_LEVELS.c", 494; {
 5080                        	;***********************
 5081                        	;***********************
 5082                        	
 5083                        		.hucc
 5084    02:D987             		.proc		_joypad_BUTTONS
 5085                        		__enter		_joypad_BUTTONS
 5086                        	
 5087                        		.dbg	line,	"include\routines_LEVELS.c", 495; // JUMP //
 5088                        	
 5089                        		.dbg	line,	"include\routines_LEVELS.c", 496; if(joytrg(JOYPAD_1) == JOY_I)
 5090                        		__ld.uiq	0
         02:D987  62         			cla
 5091                        		 _joytrg.1
         02:D988  AA         			tax
         02:D989  BD 2D 22   			lda	joytrg, x
         02:D98C  BC DD 22   			ldy	joy6trg, x
 5092                        		__equ_w.wi	1
         02:D98F  C9 01      			cmp.l	#1
         02:D991  D0 04      			bne	!false+
         02:D993  C0 00      			cpy.h	#1
         02:D995  F0 01      			beq	!+
         02:D997  18         	!false:		clc
         02:D998             	!:
 5093                        		__bfalse	.LL100
         02:D998  B0 03 4C 3B			bcc	.LL100
         02:D99C  DB          
 5094                        	
 5095                        		.dbg	line,	"include\routines_LEVELS.c", 497; {
 5096                        	
 5097                        		.dbg	line,	"include\routines_LEVELS.c", 498; if(player_state == STATE_IDLE)
 5098                        		__not.um	_player_state
         02:D99D  AD 16 23   			lda	_player_state
         02:D9A0  18         			clc
         02:D9A1  D0 01      			bne	!+
         02:D9A3  38         			sec
         02:D9A4             	!:
 5099                        		__bfalse	.LL101
         02:D9A4  90 3B      			bcc	.LL101
 5100                        	
 5101                        		.dbg	line,	"include\routines_LEVELS.c", 499; {
 5102                        	
 5103                        		.dbg	line,	"include\routines_LEVELS.c", 500; player_counter_anim = 0;
 5104                        		__st.umiq	0, _player_counter_anim
         02:D9A6  9C 19 23   			stz	_player_counter_anim
 5105                        	
 5106                        		.dbg	line,	"include\routines_LEVELS.c", 502; player_state = STATE_JUMP;
 5107                        		__st.umiq	4, _player_state
         02:D9A9  A9 04      			lda.l	#4
         02:D9AB  8D 16 23   			sta	_player_state
 5108                        	
 5109                        		.dbg	line,	"include\routines_LEVELS.c", 504; spr_set(weapon_id);
 5110                        		__ld.umq	_weapon_id
         02:D9AE  AD 23 23   			lda	_weapon_id
 5111                        		__call		_spr_set.1
         02:D9B1  20 DD E7   			call	_spr_set.1
 5112                        	
 5113                        		.dbg	line,	"include\routines_LEVELS.c", 505; 
 5114                        	
 5115                        		.dbg	line,	"include\routines_LEVELS.c", 506; if(player_axis == AXIS_RIGHT)
 5116                        		__not.um	_player_axis
         02:D9B4  AD 17 23   			lda	_player_axis
         02:D9B7  18         			clc
         02:D9B8  D0 01      			bne	!+
         02:D9BA  38         			sec
         02:D9BB             	!:
 5117                        		__bfalse	.LL102
         02:D9BB  90 12      			bcc	.LL102
 5118                        	
 5119                        		.dbg	line,	"include\routines_LEVELS.c", 507; {
 5120                        	
 5121                        		.dbg	line,	"include\routines_LEVELS.c", 508; spr_x(player_pos_x-5);
 5122                        		__ld.wm		_player_pos_x
         02:D9BD  AD D4 24   			lda.l	_player_pos_x
         02:D9C0  AC D5 24   			ldy.h	_player_pos_x
 5123                        		__sub.wi	5
         02:D9C3  38         			sec
         02:D9C4  E9 05      			sbc.l	#5
         02:D9C6  B0 01      			bcs	!+
         02:D9C8  88         			dey
         02:D9C9             	!:
 5124                        		__call		_spr_x.1
         02:D9C9  20 0A E8   			call	_spr_x.1
 5125                        	
 5126                        		.dbg	line,	"include\routines_LEVELS.c", 509; }
 5127                        	
 5128                        		.dbg	line,	"include\routines_LEVELS.c", 511; else
 5129                        		__bra		.LL103
         02:D9CC  4C D3 DB   			bra	.LL103
 5130    02:D9CF             	.LL102:
 5131                        	
 5132                        		.dbg	line,	"include\routines_LEVELS.c", 512; {
 5133                        	
 5134                        		.dbg	line,	"include\routines_LEVELS.c", 513; spr_x(player_pos_x+21);
 5135                        		__ld.wm		_player_pos_x
         02:D9CF  AD D4 24   			lda.l	_player_pos_x
         02:D9D2  AC D5 24   			ldy.h	_player_pos_x
 5136                        		__add.wi	21
         02:D9D5  18         			clc
         02:D9D6  69 15      			adc.l	#21
         02:D9D8  90 01      			bcc	!+
         02:D9DA  C8         			iny
         02:D9DB             	!:
 5137                        		__call		_spr_x.1
         02:D9DB  20 0A E8   			call	_spr_x.1
 5138                        	
 5139                        		.dbg	line,	"include\routines_LEVELS.c", 514; }
 5140    02:D9DE             	.LL103	.alias		.LL104
 5141                        	
 5142                        		.dbg	line,	"include\routines_LEVELS.c", 515; }
 5143                        	
 5144                        		.dbg	line,	"include\routines_LEVELS.c", 518; else if(player_state == STATE_WALK)
 5145                        		__bra		.LL104
         02:D9DE  4C D3 DB   			bra	.LL104
 5146    02:D9E1             	.LL101:
 5147                        		__ld.umq	_player_state
         02:D9E1  AD 16 23   			lda	_player_state
 5148                        		__equ_b.uiq	1
         02:D9E4  C9 01      			cmp	#1
         02:D9E6  F0 01      			beq	!+
         02:D9E8  18         			clc
         02:D9E9             	!:
 5149                        		__bfalse	.LL105
         02:D9E9  90 43      			bcc	.LL105
 5150                        	
 5151                        		.dbg	line,	"include\routines_LEVELS.c", 519; {
 5152                        	
 5153                        		.dbg	line,	"include\routines_LEVELS.c", 520; player_counter_anim = 0;
 5154                        		__st.umiq	0, _player_counter_anim
         02:D9EB  9C 19 23   			stz	_player_counter_anim
 5155                        	
 5156                        		.dbg	line,	"include\routines_LEVELS.c", 522; player_state = STATE_JUMP_RIGHT + player_axis;
 5157                        		__ld.wi		5
         02:D9EE  A9 05      			lda.l	#5
         02:D9F0  C2         			cly
 5158                        		__add.um	_player_axis
         02:D9F1  18         			clc
         02:D9F2  6D 17 23   			adc	_player_axis
         02:D9F5  90 01      			bcc	!+
         02:D9F7  C8         			iny
         02:D9F8             	!:
 5159                        		__st.umq	_player_state
         02:D9F8  8D 16 23   			sta	_player_state
 5160                        	
 5161                        		.dbg	line,	"include\routines_LEVELS.c", 524; spr_set(weapon_id);
 5162                        		__ld.umq	_weapon_id
         02:D9FB  AD 23 23   			lda	_weapon_id
 5163                        		__call		_spr_set.1
         02:D9FE  20 DD E7   			call	_spr_set.1
 5164                        	
 5165                        		.dbg	line,	"include\routines_LEVELS.c", 525; 
 5166                        	
 5167                        		.dbg	line,	"include\routines_LEVELS.c", 526; if(player_axis == AXIS_RIGHT)
 5168                        		__not.um	_player_axis
         02:DA01  AD 17 23   			lda	_player_axis
         02:DA04  18         			clc
         02:DA05  D0 01      			bne	!+
         02:DA07  38         			sec
         02:DA08             	!:
 5169                        		__bfalse	.LL106
         02:DA08  90 12      			bcc	.LL106
 5170                        	
 5171                        		.dbg	line,	"include\routines_LEVELS.c", 527; {
 5172                        	
 5173                        		.dbg	line,	"include\routines_LEVELS.c", 528; spr_x(player_pos_x-5);
 5174                        		__ld.wm		_player_pos_x
         02:DA0A  AD D4 24   			lda.l	_player_pos_x
         02:DA0D  AC D5 24   			ldy.h	_player_pos_x
 5175                        		__sub.wi	5
         02:DA10  38         			sec
         02:DA11  E9 05      			sbc.l	#5
         02:DA13  B0 01      			bcs	!+
         02:DA15  88         			dey
         02:DA16             	!:
 5176                        		__call		_spr_x.1
         02:DA16  20 0A E8   			call	_spr_x.1
 5177                        	
 5178                        		.dbg	line,	"include\routines_LEVELS.c", 529; }
 5179                        	
 5180                        		.dbg	line,	"include\routines_LEVELS.c", 531; else
 5181                        		__bra		.LL107
         02:DA19  4C D3 DB   			bra	.LL107
 5182    02:DA1C             	.LL106:
 5183                        	
 5184                        		.dbg	line,	"include\routines_LEVELS.c", 532; {
 5185                        	
 5186                        		.dbg	line,	"include\routines_LEVELS.c", 533; spr_x(player_pos_x+21);
 5187                        		__ld.wm		_player_pos_x
         02:DA1C  AD D4 24   			lda.l	_player_pos_x
         02:DA1F  AC D5 24   			ldy.h	_player_pos_x
 5188                        		__add.wi	21
         02:DA22  18         			clc
         02:DA23  69 15      			adc.l	#21
         02:DA25  90 01      			bcc	!+
         02:DA27  C8         			iny
         02:DA28             	!:
 5189                        		__call		_spr_x.1
         02:DA28  20 0A E8   			call	_spr_x.1
 5190                        	
 5191                        		.dbg	line,	"include\routines_LEVELS.c", 534; }
 5192    02:DA2B             	.LL107	.alias		.LL108
 5193                        	
 5194                        		.dbg	line,	"include\routines_LEVELS.c", 535; }
 5195                        	
 5196                        		.dbg	line,	"include\routines_LEVELS.c", 538; else if(player_state == STATE_HANG || player_state == STATE_CLIMB_UP || player_state == STATE_CLIMB_DOWN)
 5197                        		__bra		.LL108
         02:DA2B  4C D3 DB   			bra	.LL108
 5198    02:DA2E             	.LL105:
 5199                        		__ld.umq	_player_state
         02:DA2E  AD 16 23   			lda	_player_state
 5200                        		__equ_b.uiq	10
         02:DA31  C9 0A      			cmp	#10
         02:DA33  F0 01      			beq	!+
         02:DA35  18         			clc
         02:DA36             	!:
 5201                        		__btrue		.LL110
         02:DA36  B0 08      			bcs	.LL110
 5202                        		__ld.umq	_player_state
         02:DA38  AD 16 23   			lda	_player_state
 5203                        		__equ_b.uiq	11
         02:DA3B  C9 0B      			cmp	#11
         02:DA3D  F0 01      			beq	!+
         02:DA3F  18         			clc
         02:DA40             	!:
 5204    02:DA40             	.LL110:
 5205                        		__btrue		.LL111
         02:DA40  B0 08      			bcs	.LL111
 5206                        		__ld.umq	_player_state
         02:DA42  AD 16 23   			lda	_player_state
 5207                        		__equ_b.uiq	12
         02:DA45  C9 0C      			cmp	#12
         02:DA47  F0 01      			beq	!+
         02:DA49  18         			clc
         02:DA4A             	!:
 5208    02:DA4A             	.LL111:
 5209                        		__bfalse	.LL109
         02:DA4A  B0 03 4C D3			bcc	.LL109
         02:DA4E  DB          
 5210                        	
 5211                        		.dbg	line,	"include\routines_LEVELS.c", 539; {
 5212                        	
 5213                        		.dbg	line,	"include\routines_LEVELS.c", 540; if(player_attack == FALSE)
 5214                        		__not.um	_player_attack
         02:DA4F  AD 1E 23   			lda	_player_attack
         02:DA52  18         			clc
         02:DA53  D0 01      			bne	!+
         02:DA55  38         			sec
         02:DA56             	!:
 5215                        		__bfalse	.LL112
         02:DA56  B0 03 4C D3			bcc	.LL112
         02:DA5A  DB          
 5216                        	
 5217                        		.dbg	line,	"include\routines_LEVELS.c", 541; {
 5218                        	
 5219                        		.dbg	line,	"include\routines_LEVELS.c", 542; if(joy(JOYPAD_1) & JOY_RIGHT)
 5220                        		__ld.uiq	0
         02:DA5B  62         			cla
 5221                        		 _joy.1
         02:DA5C  AA         			tax
         02:DA5D  BD 28 22   			lda	joynow, x
         02:DA60  BC D3 22   			ldy	joy6now, x
 5222                        		__tand.wi	32
         02:DA63  29 20      			and	#32
         02:DA65  C9 01      	!:		cmp	#1
 5223                        		__bfalse	.LL113
         02:DA67  90 20      			bcc	.LL113
 5224                        	
 5225                        		.dbg	line,	"include\routines_LEVELS.c", 543; {
 5226                        	
 5227                        		.dbg	line,	"include\routines_LEVELS.c", 544; player_counter_anim = 0;
 5228                        		__st.umiq	0, _player_counter_anim
         02:DA69  9C 19 23   			stz	_player_counter_anim
 5229                        	
 5230                        		.dbg	line,	"include\routines_LEVELS.c", 546; player_state = STATE_JUMP_RIGHT;
 5231                        		__st.umiq	5, _player_state
         02:DA6C  A9 05      			lda.l	#5
         02:DA6E  8D 16 23   			sta	_player_state
 5232                        	
 5233                        		.dbg	line,	"include\routines_LEVELS.c", 548; spr_set(weapon_id);
 5234                        		__ld.umq	_weapon_id
         02:DA71  AD 23 23   			lda	_weapon_id
 5235                        		__call		_spr_set.1
         02:DA74  20 DD E7   			call	_spr_set.1
 5236                        	
 5237                        		.dbg	line,	"include\routines_LEVELS.c", 549; spr_x(player_pos_x-5);
 5238                        		__ld.wm		_player_pos_x
         02:DA77  AD D4 24   			lda.l	_player_pos_x
         02:DA7A  AC D5 24   			ldy.h	_player_pos_x
 5239                        		__sub.wi	5
         02:DA7D  38         			sec
         02:DA7E  E9 05      			sbc.l	#5
         02:DA80  B0 01      			bcs	!+
         02:DA82  88         			dey
         02:DA83             	!:
 5240                        		__call		_spr_x.1
         02:DA83  20 0A E8   			call	_spr_x.1
 5241                        	
 5242                        		.dbg	line,	"include\routines_LEVELS.c", 550; }
 5243                        	
 5244                        		.dbg	line,	"include\routines_LEVELS.c", 552; else if(joy(JOYPAD_1) & JOY_LEFT)
 5245                        		__bra		.LL114
         02:DA86  4C D3 DB   			bra	.LL114
 5246    02:DA89             	.LL113:
 5247                        		__ld.uiq	0
         02:DA89  62         			cla
 5248                        		 _joy.1
         02:DA8A  AA         			tax
         02:DA8B  BD 28 22   			lda	joynow, x
         02:DA8E  BC D3 22   			ldy	joy6now, x
 5249                        		__tand.wi	128
         02:DA91  29 80      			and	#128
         02:DA93  C9 01      	!:		cmp	#1
 5250                        		__bfalse	.LL115
         02:DA95  90 20      			bcc	.LL115
 5251                        	
 5252                        		.dbg	line,	"include\routines_LEVELS.c", 553; {
 5253                        	
 5254                        		.dbg	line,	"include\routines_LEVELS.c", 554; player_counter_anim = 0;
 5255                        		__st.umiq	0, _player_counter_anim
         02:DA97  9C 19 23   			stz	_player_counter_anim
 5256                        	
 5257                        		.dbg	line,	"include\routines_LEVELS.c", 556; player_state = STATE_JUMP_LEFT;
 5258                        		__st.umiq	6, _player_state
         02:DA9A  A9 06      			lda.l	#6
         02:DA9C  8D 16 23   			sta	_player_state
 5259                        	
 5260                        		.dbg	line,	"include\routines_LEVELS.c", 558; spr_set(weapon_id);
 5261                        		__ld.umq	_weapon_id
         02:DA9F  AD 23 23   			lda	_weapon_id
 5262                        		__call		_spr_set.1
         02:DAA2  20 DD E7   			call	_spr_set.1
 5263                        	
 5264                        		.dbg	line,	"include\routines_LEVELS.c", 559; spr_x(player_pos_x+21);
 5265                        		__ld.wm		_player_pos_x
         02:DAA5  AD D4 24   			lda.l	_player_pos_x
         02:DAA8  AC D5 24   			ldy.h	_player_pos_x
 5266                        		__add.wi	21
         02:DAAB  18         			clc
         02:DAAC  69 15      			adc.l	#21
         02:DAAE  90 01      			bcc	!+
         02:DAB0  C8         			iny
         02:DAB1             	!:
 5267                        		__call		_spr_x.1
         02:DAB1  20 0A E8   			call	_spr_x.1
 5268                        	
 5269                        		.dbg	line,	"include\routines_LEVELS.c", 560; }
 5270                        	
 5271                        		.dbg	line,	"include\routines_LEVELS.c", 562; else if(joy(JOYPAD_1) & JOY_UP)
 5272                        		__bra		.LL116
         02:DAB4  4C D3 DB   			bra	.LL116
 5273    02:DAB7             	.LL115:
 5274                        		__ld.uiq	0
         02:DAB7  62         			cla
 5275                        		 _joy.1
         02:DAB8  AA         			tax
         02:DAB9  BD 28 22   			lda	joynow, x
         02:DABC  BC D3 22   			ldy	joy6now, x
 5276                        		__tand.wi	16
         02:DABF  29 10      			and	#16
         02:DAC1  C9 01      	!:		cmp	#1
 5277                        		__bfalse	.LL117
         02:DAC3  B0 03 4C D3			bcc	.LL117
         02:DAC7  DB          
 5278                        	
 5279                        		.dbg	line,	"include\routines_LEVELS.c", 563; {
 5280                        	
 5281                        		.dbg	line,	"include\routines_LEVELS.c", 564; player_counter_anim = 0;
 5282                        		__st.umiq	0, _player_counter_anim
         02:DAC8  9C 19 23   			stz	_player_counter_anim
 5283                        	
 5284                        		.dbg	line,	"include\routines_LEVELS.c", 566; check_BG( 15 , 8 );
 5285                        		__ld.wi		15
         02:DACB  A9 0F      			lda.l	#15
         02:DACD  C2         			cly
 5286                        		__pusharg.wr
         02:DACE  A6 8D      			ldx	<__sp
         02:DAD0  CA         			dex
         02:DAD1  CA         			dex
         02:DAD2  95 08      			sta.l	<__stack, x
         02:DAD4  94 09      			sty.h	<__stack, x
         02:DAD6  86 8D      			stx	<__sp
 5287                        		__ld.wi		8
         02:DAD8  A9 08      			lda.l	#8
         02:DADA  C2         			cly
 5288                        		__pusharg.wr
         02:DADB  A6 8D      			ldx	<__sp
         02:DADD  CA         			dex
         02:DADE  CA         			dex
         02:DADF  95 08      			sta.l	<__stack, x
         02:DAE1  94 09      			sty.h	<__stack, x
         02:DAE3  86 8D      			stx	<__sp
 5289                        		__call		_check_BG
         02:DAE5  20 6D FF   			call	_check_BG
 5290                        	
 5291                        		.dbg	line,	"include\routines_LEVELS.c", 568; if(map_blk_flag == TILE_EMPTY)
 5292                        		__not.um	_map_blk_flag
         02:DAE8  AD B1 2B   			lda	_map_blk_flag
         02:DAEB  18         			clc
         02:DAEC  D0 01      			bne	!+
         02:DAEE  38         			sec
         02:DAEF             	!:
 5293                        		__bfalse	.LL118
         02:DAEF  B0 03 4C D3			bcc	.LL118
         02:DAF3  DB          
 5294                        	
 5295                        		.dbg	line,	"include\routines_LEVELS.c", 569; {
 5296                        	
 5297                        		.dbg	line,	"include\routines_LEVELS.c", 570; player_state = STATE_JUMP_LADDER;
 5298                        		__st.umiq	13, _player_state
         02:DAF4  A9 0D      			lda.l	#13
         02:DAF6  8D 16 23   			sta	_player_state
 5299                        	
 5300                        		.dbg	line,	"include\routines_LEVELS.c", 572; spr_set(weapon_id);
 5301                        		__ld.umq	_weapon_id
         02:DAF9  AD 23 23   			lda	_weapon_id
 5302                        		__call		_spr_set.1
         02:DAFC  20 DD E7   			call	_spr_set.1
 5303                        	
 5304                        		.dbg	line,	"include\routines_LEVELS.c", 573; spr_y(player_pos_y+8);
 5305                        		__ld.wm		_player_pos_y
         02:DAFF  AD D6 24   			lda.l	_player_pos_y
         02:DB02  AC D7 24   			ldy.h	_player_pos_y
 5306                        		__add.wi	8
         02:DB05  18         			clc
         02:DB06  69 08      			adc.l	#8
         02:DB08  90 01      			bcc	!+
         02:DB0A  C8         			iny
         02:DB0B             	!:
 5307                        		__call		_spr_y.1
         02:DB0B  20 19 E8   			call	_spr_y.1
 5308                        	
 5309                        		.dbg	line,	"include\routines_LEVELS.c", 574; 
 5310                        	
 5311                        		.dbg	line,	"include\routines_LEVELS.c", 575; if(player_axis == AXIS_RIGHT)
 5312                        		__not.um	_player_axis
         02:DB0E  AD 17 23   			lda	_player_axis
         02:DB11  18         			clc
         02:DB12  D0 01      			bne	!+
         02:DB14  38         			sec
         02:DB15             	!:
 5313                        		__bfalse	.LL119
         02:DB15  90 12      			bcc	.LL119
 5314                        	
 5315                        		.dbg	line,	"include\routines_LEVELS.c", 576; {
 5316                        	
 5317                        		.dbg	line,	"include\routines_LEVELS.c", 577; spr_x(player_pos_x-5);
 5318                        		__ld.wm		_player_pos_x
         02:DB17  AD D4 24   			lda.l	_player_pos_x
         02:DB1A  AC D5 24   			ldy.h	_player_pos_x
 5319                        		__sub.wi	5
         02:DB1D  38         			sec
         02:DB1E  E9 05      			sbc.l	#5
         02:DB20  B0 01      			bcs	!+
         02:DB22  88         			dey
         02:DB23             	!:
 5320                        		__call		_spr_x.1
         02:DB23  20 0A E8   			call	_spr_x.1
 5321                        	
 5322                        		.dbg	line,	"include\routines_LEVELS.c", 578; }
 5323                        	
 5324                        		.dbg	line,	"include\routines_LEVELS.c", 580; else
 5325                        		__bra		.LL120
         02:DB26  4C D3 DB   			bra	.LL120
 5326    02:DB29             	.LL119:
 5327                        	
 5328                        		.dbg	line,	"include\routines_LEVELS.c", 581; {
 5329                        	
 5330                        		.dbg	line,	"include\routines_LEVELS.c", 582; spr_x(player_pos_x+21);
 5331                        		__ld.wm		_player_pos_x
         02:DB29  AD D4 24   			lda.l	_player_pos_x
         02:DB2C  AC D5 24   			ldy.h	_player_pos_x
 5332                        		__add.wi	21
         02:DB2F  18         			clc
         02:DB30  69 15      			adc.l	#21
         02:DB32  90 01      			bcc	!+
         02:DB34  C8         			iny
         02:DB35             	!:
 5333                        		__call		_spr_x.1
         02:DB35  20 0A E8   			call	_spr_x.1
 5334                        	
 5335                        		.dbg	line,	"include\routines_LEVELS.c", 583; }
 5336    02:DB38             	.LL120	.alias		.LL121
 5337                        	
 5338                        		.dbg	line,	"include\routines_LEVELS.c", 584; }
 5339                        	
 5340                        		.dbg	line,	"include\routines_LEVELS.c", 585; }
 5341    02:DB38             	.LL118	.alias		.LL121
 5342                        	
 5343                        		.dbg	line,	"include\routines_LEVELS.c", 586; }
 5344    02:DB38             	.LL117	.alias		.LL121
 5345    02:DB38             	.LL116	.alias		.LL121
 5346    02:DB38             	.LL114	.alias		.LL121
 5347                        	
 5348                        		.dbg	line,	"include\routines_LEVELS.c", 587; }
 5349    02:DB38             	.LL112	.alias		.LL121
 5350                        	
 5351                        		.dbg	line,	"include\routines_LEVELS.c", 588; }
 5352    02:DB38             	.LL109	.alias		.LL121
 5353    02:DB38             	.LL108	.alias		.LL121
 5354    02:DB38             	.LL104	.alias		.LL121
 5355                        	
 5356                        		.dbg	line,	"include\routines_LEVELS.c", 590; // ATTACK //
 5357                        	
 5358                        		.dbg	line,	"include\routines_LEVELS.c", 591; else if(joytrg(JOYPAD_1) == JOY_II)
 5359                        		__bra		.LL121
         02:DB38  4C D3 DB   			bra	.LL121
 5360    02:DB3B             	.LL100:
 5361                        		__ld.uiq	0
         02:DB3B  62         			cla
 5362                        		 _joytrg.1
         02:DB3C  AA         			tax
         02:DB3D  BD 2D 22   			lda	joytrg, x
         02:DB40  BC DD 22   			ldy	joy6trg, x
 5363                        		__equ_w.wi	2
         02:DB43  C9 02      			cmp.l	#2
         02:DB45  D0 04      			bne	!false+
         02:DB47  C0 00      			cpy.h	#2
         02:DB49  F0 01      			beq	!+
         02:DB4B  18         	!false:		clc
         02:DB4C             	!:
 5364                        		__bfalse	.LL122
         02:DB4C  B0 03 4C D3			bcc	.LL122
         02:DB50  DB          
 5365                        	
 5366                        		.dbg	line,	"include\routines_LEVELS.c", 592; {
 5367                        	
 5368                        		.dbg	line,	"include\routines_LEVELS.c", 593; if(player_state == STATE_IDLE || player_state == STATE_WALK)
 5369                        		__not.um	_player_state
         02:DB51  AD 16 23   			lda	_player_state
         02:DB54  18         			clc
         02:DB55  D0 01      			bne	!+
         02:DB57  38         			sec
         02:DB58             	!:
 5370                        		__btrue		.LL124
         02:DB58  B0 08      			bcs	.LL124
 5371                        		__ld.umq	_player_state
         02:DB5A  AD 16 23   			lda	_player_state
 5372                        		__equ_b.uiq	1
         02:DB5D  C9 01      			cmp	#1
         02:DB5F  F0 01      			beq	!+
         02:DB61  18         			clc
         02:DB62             	!:
 5373    02:DB62             	.LL124:
 5374                        		__bfalse	.LL123
         02:DB62  90 0A      			bcc	.LL123
 5375                        	
 5376                        		.dbg	line,	"include\routines_LEVELS.c", 594; {
 5377                        	
 5378                        		.dbg	line,	"include\routines_LEVELS.c", 595; player_counter_attack = 0;
 5379                        		__st.umiq	0, _player_counter_attack
         02:DB64  9C 1C 23   			stz	_player_counter_attack
 5380                        	
 5381                        		.dbg	line,	"include\routines_LEVELS.c", 596; player_state = STATE_ATTACK;
 5382                        		__st.umiq	2, _player_state
         02:DB67  A9 02      			lda.l	#2
         02:DB69  8D 16 23   			sta	_player_state
 5383                        	
 5384                        		.dbg	line,	"include\routines_LEVELS.c", 597; }
 5385                        	
 5386                        		.dbg	line,	"include\routines_LEVELS.c", 599; else if(player_state == STATE_JUMP)
 5387                        		__bra		.LL125
         02:DB6C  80 65      			bra	.LL125
 5388    02:DB6E             	.LL123:
 5389                        		__ld.umq	_player_state
         02:DB6E  AD 16 23   			lda	_player_state
 5390                        		__equ_b.uiq	4
         02:DB71  C9 04      			cmp	#4
         02:DB73  F0 01      			beq	!+
         02:DB75  18         			clc
         02:DB76             	!:
 5391                        		__bfalse	.LL126
         02:DB76  90 13      			bcc	.LL126
 5392                        	
 5393                        		.dbg	line,	"include\routines_LEVELS.c", 600; {
 5394                        	
 5395                        		.dbg	line,	"include\routines_LEVELS.c", 601; if(player_attack == FALSE)
 5396                        		__not.um	_player_attack
         02:DB78  AD 1E 23   			lda	_player_attack
         02:DB7B  18         			clc
         02:DB7C  D0 01      			bne	!+
         02:DB7E  38         			sec
         02:DB7F             	!:
 5397                        		__bfalse	.LL127
         02:DB7F  90 52      			bcc	.LL127
 5398                        	
 5399                        		.dbg	line,	"include\routines_LEVELS.c", 602; {
 5400                        	
 5401                        		.dbg	line,	"include\routines_LEVELS.c", 603; player_counter_attack = 0;
 5402                        		__st.umiq	0, _player_counter_attack
         02:DB81  9C 1C 23   			stz	_player_counter_attack
 5403                        	
 5404                        		.dbg	line,	"include\routines_LEVELS.c", 604; player_attack = TRUE;
 5405                        		__st.umiq	1, _player_attack
         02:DB84  A9 01      			lda.l	#1
         02:DB86  8D 1E 23   			sta	_player_attack
 5406                        	
 5407                        		.dbg	line,	"include\routines_LEVELS.c", 605; }
 5408                        	
 5409                        		.dbg	line,	"include\routines_LEVELS.c", 606; }
 5410    02:DB89             	.LL127	.alias		.LL128
 5411                        	
 5412                        		.dbg	line,	"include\routines_LEVELS.c", 608; else if(player_state == STATE_CROUCH)
 5413                        		__bra		.LL128
         02:DB89  80 48      			bra	.LL128
 5414    02:DB8B             	.LL126:
 5415                        		__ld.umq	_player_state
         02:DB8B  AD 16 23   			lda	_player_state
 5416                        		__equ_b.uiq	7
         02:DB8E  C9 07      			cmp	#7
         02:DB90  F0 01      			beq	!+
         02:DB92  18         			clc
         02:DB93             	!:
 5417                        		__bfalse	.LL129
         02:DB93  90 0A      			bcc	.LL129
 5418                        	
 5419                        		.dbg	line,	"include\routines_LEVELS.c", 609; {
 5420                        	
 5421                        		.dbg	line,	"include\routines_LEVELS.c", 610; player_counter_attack = 0;
 5422                        		__st.umiq	0, _player_counter_attack
         02:DB95  9C 1C 23   			stz	_player_counter_attack
 5423                        	
 5424                        		.dbg	line,	"include\routines_LEVELS.c", 611; player_state = STATE_CROUCH_ATTACK;
 5425                        		__st.umiq	8, _player_state
         02:DB98  A9 08      			lda.l	#8
         02:DB9A  8D 16 23   			sta	_player_state
 5426                        	
 5427                        		.dbg	line,	"include\routines_LEVELS.c", 612; }
 5428                        	
 5429                        		.dbg	line,	"include\routines_LEVELS.c", 614; else if(player_state == STATE_HANG || player_state == STATE_CLIMB_UP || player_state == STATE_CLIMB_DOWN)
 5430                        		__bra		.LL130
         02:DB9D  80 34      			bra	.LL130
 5431    02:DB9F             	.LL129:
 5432                        		__ld.umq	_player_state
         02:DB9F  AD 16 23   			lda	_player_state
 5433                        		__equ_b.uiq	10
         02:DBA2  C9 0A      			cmp	#10
         02:DBA4  F0 01      			beq	!+
         02:DBA6  18         			clc
         02:DBA7             	!:
 5434                        		__btrue		.LL132
         02:DBA7  B0 08      			bcs	.LL132
 5435                        		__ld.umq	_player_state
         02:DBA9  AD 16 23   			lda	_player_state
 5436                        		__equ_b.uiq	11
         02:DBAC  C9 0B      			cmp	#11
         02:DBAE  F0 01      			beq	!+
         02:DBB0  18         			clc
         02:DBB1             	!:
 5437    02:DBB1             	.LL132:
 5438                        		__btrue		.LL133
         02:DBB1  B0 08      			bcs	.LL133
 5439                        		__ld.umq	_player_state
         02:DBB3  AD 16 23   			lda	_player_state
 5440                        		__equ_b.uiq	12
         02:DBB6  C9 0C      			cmp	#12
         02:DBB8  F0 01      			beq	!+
         02:DBBA  18         			clc
         02:DBBB             	!:
 5441    02:DBBB             	.LL133:
 5442                        		__bfalse	.LL131
         02:DBBB  90 16      			bcc	.LL131
 5443                        	
 5444                        		.dbg	line,	"include\routines_LEVELS.c", 615; {
 5445                        	
 5446                        		.dbg	line,	"include\routines_LEVELS.c", 616; if(player_attack == FALSE)
 5447                        		__not.um	_player_attack
         02:DBBD  AD 1E 23   			lda	_player_attack
         02:DBC0  18         			clc
         02:DBC1  D0 01      			bne	!+
         02:DBC3  38         			sec
         02:DBC4             	!:
 5448                        		__bfalse	.LL134
         02:DBC4  90 0D      			bcc	.LL134
 5449                        	
 5450                        		.dbg	line,	"include\routines_LEVELS.c", 617; {
 5451                        	
 5452                        		.dbg	line,	"include\routines_LEVELS.c", 618; player_counter_attack = 0;
 5453                        		__st.umiq	0, _player_counter_attack
         02:DBC6  9C 1C 23   			stz	_player_counter_attack
 5454                        	
 5455                        		.dbg	line,	"include\routines_LEVELS.c", 619; player_attack = TRUE;
 5456                        		__st.umiq	1, _player_attack
         02:DBC9  A9 01      			lda.l	#1
         02:DBCB  8D 1E 23   			sta	_player_attack
 5457                        	
 5458                        		.dbg	line,	"include\routines_LEVELS.c", 620; player_state = STATE_HANG;
 5459                        		__st.umiq	10, _player_state
         02:DBCE  A9 0A      			lda.l	#10
         02:DBD0  8D 16 23   			sta	_player_state
 5460                        	
 5461                        		.dbg	line,	"include\routines_LEVELS.c", 621; }
 5462                        	
 5463                        		.dbg	line,	"include\routines_LEVELS.c", 622; }
 5464    02:DBD3             	.LL134:
 5465                        	
 5466                        		.dbg	line,	"include\routines_LEVELS.c", 623; }
 5467    02:DBD3             	.LL131:
 5468    02:DBD3             	.LL130:
 5469    02:DBD3             	.LL128:
 5470    02:DBD3             	.LL125:
 5471                        	
 5472                        		.dbg	line,	"include\routines_LEVELS.c", 624; }
 5473    02:DBD3             	.LL122:
 5474    02:DBD3             	.LL121:
 5475    02:DBD3             	.LL99:
 5476                        		__return	0
         02:DBD3  4C EF FF   			jmp	leave_proc
 5477                        		.dbg	clear
 5478                        		.endp
 5479                        		.pceas
 5480                        	
 5481                        		.dbg	line,	"include\routines_LEVELS.c", 627; void joypad_DIR()
 5482                        		.dbg	line,	"include\routines_LEVELS.c", 628; {
 5483                        	;***********************
 5484                        	;***********************
 5485                        	
 5486                        		.hucc
 5487    17:C7E0             		.proc		_joypad_DIR
 5488                        		__enter		_joypad_DIR
 5489                        	
 5490                        		.dbg	line,	"include\routines_LEVELS.c", 629; //--------------------------------------------------------------------------------------//
 5491                        	
 5492                        		.dbg	line,	"include\routines_LEVELS.c", 630; //                                        NO DIR                                        //
 5493                        	
 5494                        		.dbg	line,	"include\routines_LEVELS.c", 631; //--------------------------------------------------------------------------------------//
 5495                        	
 5496                        		.dbg	line,	"include\routines_LEVELS.c", 633; if(! (joy(JOYPAD_1) & JOY_DIR_PRESSED) )
 5497                        		__ld.uiq	0
         17:C7E0  62         			cla
 5498                        		 _joy.1
         17:C7E1  AA         			tax
         17:C7E2  BD 28 22   			lda	joynow, x
         17:C7E5  BC D3 22   			ldy	joy6now, x
 5499                        		__nand.wi	240
         17:C7E8  18         			clc
         17:C7E9  29 F0      			and	#240
         17:C7EB  D0 01      			bne	!+
         17:C7ED  38         			sec
         17:C7EE             	!:
 5500                        		__bfalse	.LL136
         17:C7EE  90 58      			bcc	.LL136
 5501                        	
 5502                        		.dbg	line,	"include\routines_LEVELS.c", 634; {
 5503                        	
 5504                        		.dbg	line,	"include\routines_LEVELS.c", 635; if(player_state == STATE_WALK || player_state == STATE_CROUCH)
 5505                        		__ld.umq	_player_state
         17:C7F0  AD 16 23   			lda	_player_state
 5506                        		__equ_b.uiq	1
         17:C7F3  C9 01      			cmp	#1
         17:C7F5  F0 01      			beq	!+
         17:C7F7  18         			clc
         17:C7F8             	!:
 5507                        		__btrue		.LL138
         17:C7F8  B0 08      			bcs	.LL138
 5508                        		__ld.umq	_player_state
         17:C7FA  AD 16 23   			lda	_player_state
 5509                        		__equ_b.uiq	7
         17:C7FD  C9 07      			cmp	#7
         17:C7FF  F0 01      			beq	!+
         17:C801  18         			clc
         17:C802             	!:
 5510    17:C802             	.LL138:
 5511                        		__bfalse	.LL137
         17:C802  90 13      			bcc	.LL137
 5512                        	
 5513                        		.dbg	line,	"include\routines_LEVELS.c", 636; {
 5514                        	
 5515                        		.dbg	line,	"include\routines_LEVELS.c", 637; if(player_attack == FALSE)
 5516                        		__not.um	_player_attack
         17:C804  AD 1E 23   			lda	_player_attack
         17:C807  18         			clc
         17:C808  D0 01      			bne	!+
         17:C80A  38         			sec
         17:C80B             	!:
 5517                        		__bfalse	.LL139
         17:C80B  90 3B      			bcc	.LL139
 5518                        	
 5519                        		.dbg	line,	"include\routines_LEVELS.c", 638; {
 5520                        	
 5521                        		.dbg	line,	"include\routines_LEVELS.c", 639; player_counter_anim = 1;
 5522                        		__st.umiq	1, _player_counter_anim
         17:C80D  A9 01      			lda.l	#1
         17:C80F  8D 19 23   			sta	_player_counter_anim
 5523                        	
 5524                        		.dbg	line,	"include\routines_LEVELS.c", 640; player_state = STATE_IDLE;
 5525                        		__st.umiq	0, _player_state
         17:C812  9C 16 23   			stz	_player_state
 5526                        	
 5527                        		.dbg	line,	"include\routines_LEVELS.c", 641; }
 5528                        	
 5529                        		.dbg	line,	"include\routines_LEVELS.c", 642; }
 5530    17:C815             	.LL139	.alias		.LL140
 5531                        	
 5532                        		.dbg	line,	"include\routines_LEVELS.c", 645; else if(player_state == STATE_CLIMB_UP || player_state == STATE_CLIMB_DOWN)
 5533                        		__bra		.LL140
         17:C815  80 31      			bra	.LL140
 5534    17:C817             	.LL137:
 5535                        		__ld.umq	_player_state
         17:C817  AD 16 23   			lda	_player_state
 5536                        		__equ_b.uiq	11
         17:C81A  C9 0B      			cmp	#11
         17:C81C  F0 01      			beq	!+
         17:C81E  18         			clc
         17:C81F             	!:
 5537                        		__btrue		.LL142
         17:C81F  B0 08      			bcs	.LL142
 5538                        		__ld.umq	_player_state
         17:C821  AD 16 23   			lda	_player_state
 5539                        		__equ_b.uiq	12
         17:C824  C9 0C      			cmp	#12
         17:C826  F0 01      			beq	!+
         17:C828  18         			clc
         17:C829             	!:
 5540    17:C829             	.LL142:
 5541                        		__bfalse	.LL141
         17:C829  90 1D      			bcc	.LL141
 5542                        	
 5543                        		.dbg	line,	"include\routines_LEVELS.c", 646; {
 5544                        	
 5545                        		.dbg	line,	"include\routines_LEVELS.c", 647; if(player_attack == FALSE)
 5546                        		__not.um	_player_attack
         17:C82B  AD 1E 23   			lda	_player_attack
         17:C82E  18         			clc
         17:C82F  D0 01      			bne	!+
         17:C831  38         			sec
         17:C832             	!:
 5547                        		__bfalse	.LL143
         17:C832  90 14      			bcc	.LL143
 5548                        	
 5549                        		.dbg	line,	"include\routines_LEVELS.c", 648; {
 5550                        	
 5551                        		.dbg	line,	"include\routines_LEVELS.c", 649; spr_set(player_id);
 5552                        		__ld.umq	_player_id
         17:C834  AD 15 23   			lda	_player_id
 5553                        		__call		_spr_set.1
         17:C837  20 DD E7   			call	_spr_set.1
 5554                        	
 5555                        		.dbg	line,	"include\routines_LEVELS.c", 650; spr_pattern(PLAYER_HANG_VRAM_ADR);
 5556                        		__ld.wi		7424
         17:C83A  62         			cla
         17:C83B  A0 1D      			ldy.h	#7424
 5557                        		__call		_spr_pattern.1
         17:C83D  20 26 E8   			call	_spr_pattern.1
 5558                        	
 5559                        		.dbg	line,	"include\routines_LEVELS.c", 651; player_counter_anim = 0;
 5560                        		__st.umiq	0, _player_counter_anim
         17:C840  9C 19 23   			stz	_player_counter_anim
 5561                        	
 5562                        		.dbg	line,	"include\routines_LEVELS.c", 652; player_state = STATE_HANG;
 5563                        		__st.umiq	10, _player_state
         17:C843  A9 0A      			lda.l	#10
         17:C845  8D 16 23   			sta	_player_state
 5564                        	
 5565                        		.dbg	line,	"include\routines_LEVELS.c", 653; }
 5566                        	
 5567                        		.dbg	line,	"include\routines_LEVELS.c", 654; }
 5568    17:C848             	.LL143:
 5569                        	
 5570                        		.dbg	line,	"include\routines_LEVELS.c", 655; }
 5571    17:C848             	.LL141:
 5572    17:C848             	.LL140:
 5573                        	
 5574                        		.dbg	line,	"include\routines_LEVELS.c", 658; //--------------------------------------------------------------------------------------//
 5575                        	
 5576                        		.dbg	line,	"include\routines_LEVELS.c", 659; //                                     RIGHT BUTTON                                     //
 5577                        	
 5578                        		.dbg	line,	"include\routines_LEVELS.c", 660; //--------------------------------------------------------------------------------------//
 5579                        	
 5580                        		.dbg	line,	"include\routines_LEVELS.c", 662; if(joy(JOYPAD_1) & JOY_RIGHT)
 5581    17:C848             	.LL136:
 5582                        		__ld.uiq	0
         17:C848  62         			cla
 5583                        		 _joy.1
         17:C849  AA         			tax
         17:C84A  BD 28 22   			lda	joynow, x
         17:C84D  BC D3 22   			ldy	joy6now, x
 5584                        		__tand.wi	32
         17:C850  29 20      			and	#32
         17:C852  C9 01      	!:		cmp	#1
 5585                        		__bfalse	.LL144
         17:C854  B0 03 4C 13			bcc	.LL144
         17:C858  CC          
 5586                        	
 5587                        		.dbg	line,	"include\routines_LEVELS.c", 663; {
 5588                        	
 5589                        		.dbg	line,	"include\routines_LEVELS.c", 664; if(player_state == STATE_IDLE || player_state == STATE_WALK)
 5590                        		__not.um	_player_state
         17:C859  AD 16 23   			lda	_player_state
         17:C85C  18         			clc
         17:C85D  D0 01      			bne	!+
         17:C85F  38         			sec
         17:C860             	!:
 5591                        		__btrue		.LL146
         17:C860  B0 08      			bcs	.LL146
 5592                        		__ld.umq	_player_state
         17:C862  AD 16 23   			lda	_player_state
 5593                        		__equ_b.uiq	1
         17:C865  C9 01      			cmp	#1
         17:C867  F0 01      			beq	!+
         17:C869  18         			clc
         17:C86A             	!:
 5594    17:C86A             	.LL146:
 5595                        		__bfalse	.LL145
         17:C86A  B0 03 4C 07			bcc	.LL145
         17:C86E  C9          
 5596                        	
 5597                        		.dbg	line,	"include\routines_LEVELS.c", 665; {
 5598                        	
 5599                        		.dbg	line,	"include\routines_LEVELS.c", 666; player_axis = AXIS_RIGHT;
 5600                        		__st.umiq	0, _player_axis
         17:C86F  9C 17 23   			stz	_player_axis
 5601                        	
 5602                        		.dbg	line,	"include\routines_LEVELS.c", 668; if(player_previous_axis != player_axis)
 5603                        		__ld.umq	_player_previous_axis
         17:C872  AD 18 23   			lda	_player_previous_axis
 5604                        		__neq_b.umq	_player_axis
         17:C875  38         			sec
         17:C876  4D 17 23   			eor	_player_axis
         17:C879  D0 01      			bne	!+
         17:C87B  18         			clc
         17:C87C             	!:
 5605                        		__bfalse	.LL147
         17:C87C  90 66      			bcc	.LL147
 5606                        	
 5607                        		.dbg	line,	"include\routines_LEVELS.c", 669; {
 5608                        	
 5609                        		.dbg	line,	"include\routines_LEVELS.c", 670; player_previous_axis = player_axis;
 5610                        		__ld.um		_player_axis
         17:C87E  AD 17 23   			lda	_player_axis
         17:C881  C2         			cly
 5611                        		__st.umq	_player_previous_axis
         17:C882  8D 18 23   			sta	_player_previous_axis
 5612                        	
 5613                        		.dbg	line,	"include\routines_LEVELS.c", 672; spr_set(player_id);
 5614                        		__ld.umq	_player_id
         17:C885  AD 15 23   			lda	_player_id
 5615                        		__call		_spr_set.1
         17:C888  20 DD E7   			call	_spr_set.1
 5616                        	
 5617                        		.dbg	line,	"include\routines_LEVELS.c", 673; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5618                        		__st.umiq	136, _al
         17:C88B  A9 88      			lda.l	#136
         17:C88D  85 F8      			sta	_al
 5619                        		__ld.uiq	0
         17:C88F  62         			cla
 5620                        		__call		_spr_ctrl.2
         17:C890  20 3C E8   			call	_spr_ctrl.2
 5621                        	
 5622                        		.dbg	line,	"include\routines_LEVELS.c", 675; spr_set(chain_id);
 5623                        		__ld.umq	_chain_id
         17:C893  AD 22 23   			lda	_chain_id
 5624                        		__call		_spr_set.1
         17:C896  20 DD E7   			call	_spr_set.1
 5625                        	
 5626                        		.dbg	line,	"include\routines_LEVELS.c", 676; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5627                        		__st.umiq	136, _al
         17:C899  A9 88      			lda.l	#136
         17:C89B  85 F8      			sta	_al
 5628                        		__ld.uiq	0
         17:C89D  62         			cla
 5629                        		__call		_spr_ctrl.2
         17:C89E  20 3C E8   			call	_spr_ctrl.2
 5630                        	
 5631                        		.dbg	line,	"include\routines_LEVELS.c", 678; spr_set(chain_id+1);
 5632                        		__ld.um		_chain_id
         17:C8A1  AD 22 23   			lda	_chain_id
         17:C8A4  C2         			cly
 5633                        		__add.wi	1
         17:C8A5  1A         			inc	a
         17:C8A6  D0 01      			bne	!+
         17:C8A8  C8         			iny
         17:C8A9             	!:
 5634                        		__call		_spr_set.1
         17:C8A9  20 DD E7   			call	_spr_set.1
 5635                        	
 5636                        		.dbg	line,	"include\routines_LEVELS.c", 679; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5637                        		__st.umiq	136, _al
         17:C8AC  A9 88      			lda.l	#136
         17:C8AE  85 F8      			sta	_al
 5638                        		__ld.uiq	0
         17:C8B0  62         			cla
 5639                        		__call		_spr_ctrl.2
         17:C8B1  20 3C E8   			call	_spr_ctrl.2
 5640                        	
 5641                        		.dbg	line,	"include\routines_LEVELS.c", 681; spr_set(chain_id+2);
 5642                        		__ld.um		_chain_id
         17:C8B4  AD 22 23   			lda	_chain_id
         17:C8B7  C2         			cly
 5643                        		__add.wi	2
         17:C8B8  18         			clc
         17:C8B9  69 02      			adc.l	#2
         17:C8BB  90 01      			bcc	!+
         17:C8BD  C8         			iny
         17:C8BE             	!:
 5644                        		__call		_spr_set.1
         17:C8BE  20 DD E7   			call	_spr_set.1
 5645                        	
 5646                        		.dbg	line,	"include\routines_LEVELS.c", 682; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5647                        		__st.umiq	136, _al
         17:C8C1  A9 88      			lda.l	#136
         17:C8C3  85 F8      			sta	_al
 5648                        		__ld.uiq	0
         17:C8C5  62         			cla
 5649                        		__call		_spr_ctrl.2
         17:C8C6  20 3C E8   			call	_spr_ctrl.2
 5650                        	
 5651                        		.dbg	line,	"include\routines_LEVELS.c", 684; spr_set(weapon_id);
 5652                        		__ld.umq	_weapon_id
         17:C8C9  AD 23 23   			lda	_weapon_id
 5653                        		__call		_spr_set.1
         17:C8CC  20 DD E7   			call	_spr_set.1
 5654                        	
 5655                        		.dbg	line,	"include\routines_LEVELS.c", 685; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5656                        		__st.umiq	136, _al
         17:C8CF  A9 88      			lda.l	#136
         17:C8D1  85 F8      			sta	_al
 5657                        		__ld.uiq	0
         17:C8D3  62         			cla
 5658                        		__call		_spr_ctrl.2
         17:C8D4  20 3C E8   			call	_spr_ctrl.2
 5659                        	
 5660                        		.dbg	line,	"include\routines_LEVELS.c", 686; spr_x(player_pos_x+1);
 5661                        		__ld.wm		_player_pos_x
         17:C8D7  AD D4 24   			lda.l	_player_pos_x
         17:C8DA  AC D5 24   			ldy.h	_player_pos_x
 5662                        		__add.wi	1
         17:C8DD  1A         			inc	a
         17:C8DE  D0 01      			bne	!+
         17:C8E0  C8         			iny
         17:C8E1             	!:
 5663                        		__call		_spr_x.1
         17:C8E1  20 0A E8   			call	_spr_x.1
 5664                        	
 5665                        		.dbg	line,	"include\routines_LEVELS.c", 687; }
 5666                        	
 5667                        		.dbg	line,	"include\routines_LEVELS.c", 689; if(joy(JOYPAD_1) & JOY_DOWN)
 5668    17:C8E4             	.LL147:
 5669                        		__ld.uiq	0
         17:C8E4  62         			cla
 5670                        		 _joy.1
         17:C8E5  AA         			tax
         17:C8E6  BD 28 22   			lda	joynow, x
         17:C8E9  BC D3 22   			ldy	joy6now, x
 5671                        		__tand.wi	64
         17:C8EC  29 40      			and	#64
         17:C8EE  C9 01      	!:		cmp	#1
 5672                        		__bfalse	.LL148
         17:C8F0  90 0D      			bcc	.LL148
 5673                        	
 5674                        		.dbg	line,	"include\routines_LEVELS.c", 690; {
 5675                        	
 5676                        		.dbg	line,	"include\routines_LEVELS.c", 691; player_counter_anim = 1;
 5677                        		__st.umiq	1, _player_counter_anim
         17:C8F2  A9 01      			lda.l	#1
         17:C8F4  8D 19 23   			sta	_player_counter_anim
 5678                        	
 5679                        		.dbg	line,	"include\routines_LEVELS.c", 692; player_state = STATE_CROUCH;
 5680                        		__st.umiq	7, _player_state
         17:C8F7  A9 07      			lda.l	#7
         17:C8F9  8D 16 23   			sta	_player_state
 5681                        	
 5682                        		.dbg	line,	"include\routines_LEVELS.c", 693; return;
 5683                        		__bra		.LL135
         17:C8FC  4C 3E D2   			bra	.LL135
 5684                        	
 5685                        		.dbg	line,	"include\routines_LEVELS.c", 694; }
 5686                        	
 5687                        		.dbg	line,	"include\routines_LEVELS.c", 696; player_state = STATE_WALK;
 5688    17:C8FF             	.LL148:
 5689                        		__st.umiq	1, _player_state
         17:C8FF  A9 01      			lda.l	#1
         17:C901  8D 16 23   			sta	_player_state
 5690                        	
 5691                        		.dbg	line,	"include\routines_LEVELS.c", 697; }
 5692                        	
 5693                        		.dbg	line,	"include\routines_LEVELS.c", 700; else if(player_state == STATE_JUMP)
 5694                        		__bra		.LL149
         17:C904  4C 3E D2   			bra	.LL149
 5695    17:C907             	.LL145:
 5696                        		__ld.umq	_player_state
         17:C907  AD 16 23   			lda	_player_state
 5697                        		__equ_b.uiq	4
         17:C90A  C9 04      			cmp	#4
         17:C90C  F0 01      			beq	!+
         17:C90E  18         			clc
         17:C90F             	!:
 5698                        		__bfalse	.LL150
         17:C90F  B0 03 4C B3			bcc	.LL150
         17:C913  C9          
 5699                        	
 5700                        		.dbg	line,	"include\routines_LEVELS.c", 701; {
 5701                        	
 5702                        		.dbg	line,	"include\routines_LEVELS.c", 702; if(player_attack == FALSE)
 5703                        		__not.um	_player_attack
         17:C914  AD 1E 23   			lda	_player_attack
         17:C917  18         			clc
         17:C918  D0 01      			bne	!+
         17:C91A  38         			sec
         17:C91B             	!:
 5704                        		__bfalse	.LL151
         17:C91B  B0 03 4C 3E			bcc	.LL151
         17:C91F  D2          
 5705                        	
 5706                        		.dbg	line,	"include\routines_LEVELS.c", 703; {
 5707                        	
 5708                        		.dbg	line,	"include\routines_LEVELS.c", 704; if(player_axis == AXIS_LEFT)
 5709                        		__ld.umq	_player_axis
         17:C920  AD 17 23   			lda	_player_axis
 5710                        		__equ_b.uiq	1
         17:C923  C9 01      			cmp	#1
         17:C925  F0 01      			beq	!+
         17:C927  18         			clc
         17:C928             	!:
 5711                        		__bfalse	.LL152
         17:C928  90 6B      			bcc	.LL152
 5712                        	
 5713                        		.dbg	line,	"include\routines_LEVELS.c", 705; {
 5714                        	
 5715                        		.dbg	line,	"include\routines_LEVELS.c", 706; player_axis = AXIS_RIGHT;
 5716                        		__st.umiq	0, _player_axis
         17:C92A  9C 17 23   			stz	_player_axis
 5717                        	
 5718                        		.dbg	line,	"include\routines_LEVELS.c", 707; player_previous_axis = player_axis;
 5719                        		__ld.um		_player_axis
         17:C92D  AD 17 23   			lda	_player_axis
         17:C930  C2         			cly
 5720                        		__st.umq	_player_previous_axis
         17:C931  8D 18 23   			sta	_player_previous_axis
 5721                        	
 5722                        		.dbg	line,	"include\routines_LEVELS.c", 709; spr_set(player_id);
 5723                        		__ld.umq	_player_id
         17:C934  AD 15 23   			lda	_player_id
 5724                        		__call		_spr_set.1
         17:C937  20 DD E7   			call	_spr_set.1
 5725                        	
 5726                        		.dbg	line,	"include\routines_LEVELS.c", 710; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5727                        		__st.umiq	136, _al
         17:C93A  A9 88      			lda.l	#136
         17:C93C  85 F8      			sta	_al
 5728                        		__ld.uiq	0
         17:C93E  62         			cla
 5729                        		__call		_spr_ctrl.2
         17:C93F  20 3C E8   			call	_spr_ctrl.2
 5730                        	
 5731                        		.dbg	line,	"include\routines_LEVELS.c", 712; spr_set(chain_id);
 5732                        		__ld.umq	_chain_id
         17:C942  AD 22 23   			lda	_chain_id
 5733                        		__call		_spr_set.1
         17:C945  20 DD E7   			call	_spr_set.1
 5734                        	
 5735                        		.dbg	line,	"include\routines_LEVELS.c", 713; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5736                        		__st.umiq	136, _al
         17:C948  A9 88      			lda.l	#136
         17:C94A  85 F8      			sta	_al
 5737                        		__ld.uiq	0
         17:C94C  62         			cla
 5738                        		__call		_spr_ctrl.2
         17:C94D  20 3C E8   			call	_spr_ctrl.2
 5739                        	
 5740                        		.dbg	line,	"include\routines_LEVELS.c", 715; spr_set(chain_id+1);
 5741                        		__ld.um		_chain_id
         17:C950  AD 22 23   			lda	_chain_id
         17:C953  C2         			cly
 5742                        		__add.wi	1
         17:C954  1A         			inc	a
         17:C955  D0 01      			bne	!+
         17:C957  C8         			iny
         17:C958             	!:
 5743                        		__call		_spr_set.1
         17:C958  20 DD E7   			call	_spr_set.1
 5744                        	
 5745                        		.dbg	line,	"include\routines_LEVELS.c", 716; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5746                        		__st.umiq	136, _al
         17:C95B  A9 88      			lda.l	#136
         17:C95D  85 F8      			sta	_al
 5747                        		__ld.uiq	0
         17:C95F  62         			cla
 5748                        		__call		_spr_ctrl.2
         17:C960  20 3C E8   			call	_spr_ctrl.2
 5749                        	
 5750                        		.dbg	line,	"include\routines_LEVELS.c", 718; spr_set(chain_id+2);
 5751                        		__ld.um		_chain_id
         17:C963  AD 22 23   			lda	_chain_id
         17:C966  C2         			cly
 5752                        		__add.wi	2
         17:C967  18         			clc
         17:C968  69 02      			adc.l	#2
         17:C96A  90 01      			bcc	!+
         17:C96C  C8         			iny
         17:C96D             	!:
 5753                        		__call		_spr_set.1
         17:C96D  20 DD E7   			call	_spr_set.1
 5754                        	
 5755                        		.dbg	line,	"include\routines_LEVELS.c", 719; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5756                        		__st.umiq	136, _al
         17:C970  A9 88      			lda.l	#136
         17:C972  85 F8      			sta	_al
 5757                        		__ld.uiq	0
         17:C974  62         			cla
 5758                        		__call		_spr_ctrl.2
         17:C975  20 3C E8   			call	_spr_ctrl.2
 5759                        	
 5760                        		.dbg	line,	"include\routines_LEVELS.c", 721; spr_set(weapon_id);
 5761                        		__ld.umq	_weapon_id
         17:C978  AD 23 23   			lda	_weapon_id
 5762                        		__call		_spr_set.1
         17:C97B  20 DD E7   			call	_spr_set.1
 5763                        	
 5764                        		.dbg	line,	"include\routines_LEVELS.c", 722; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5765                        		__st.umiq	136, _al
         17:C97E  A9 88      			lda.l	#136
         17:C980  85 F8      			sta	_al
 5766                        		__ld.uiq	0
         17:C982  62         			cla
 5767                        		__call		_spr_ctrl.2
         17:C983  20 3C E8   			call	_spr_ctrl.2
 5768                        	
 5769                        		.dbg	line,	"include\routines_LEVELS.c", 723; spr_x(player_pos_x-5);
 5770                        		__ld.wm		_player_pos_x
         17:C986  AD D4 24   			lda.l	_player_pos_x
         17:C989  AC D5 24   			ldy.h	_player_pos_x
 5771                        		__sub.wi	5
         17:C98C  38         			sec
         17:C98D  E9 05      			sbc.l	#5
         17:C98F  B0 01      			bcs	!+
         17:C991  88         			dey
         17:C992             	!:
 5772                        		__call		_spr_x.1
         17:C992  20 0A E8   			call	_spr_x.1
 5773                        	
 5774                        		.dbg	line,	"include\routines_LEVELS.c", 724; }
 5775                        	
 5776                        		.dbg	line,	"include\routines_LEVELS.c", 726; if(player_index_jump > 11 && player_index_jump < 15)
 5777    17:C995             	.LL152:
 5778                        		__ld.umq	_player_index_jump
         17:C995  AD 1A 23   			lda	_player_index_jump
 5779                        		__ugt_b.uiq	11
         17:C998  18         			clc			; Subtract integer+1 from A.
         17:C999  E9 0B      			sbc	#11		; CS if A > integer.
 5780                        		__bfalse	.LL154
         17:C99B  90 09      			bcc	.LL154
 5781                        		__ld.umq	_player_index_jump
         17:C99D  AD 1A 23   			lda	_player_index_jump
 5782                        		__ult_b.uiq	15
         17:C9A0  C9 0F      			cmp	#15		; Subtract integer from A.
         17:C9A2  6A         			ror	a		; CC if A < integer.
         17:C9A3  49 80      			eor	#$80
         17:C9A5  2A         			rol	a
 5783    17:C9A6             	.LL154:
 5784                        		__bfalse	.LL153
         17:C9A6  B0 03 4C 3E			bcc	.LL153
         17:C9AA  D2          
 5785                        	
 5786                        		.dbg	line,	"include\routines_LEVELS.c", 727; {
 5787                        	
 5788                        		.dbg	line,	"include\routines_LEVELS.c", 728; player_state = STATE_JUMP_RIGHT;                        
 5789                        		__st.umiq	5, _player_state
         17:C9AB  A9 05      			lda.l	#5
         17:C9AD  8D 16 23   			sta	_player_state
 5790                        	
 5791                        		.dbg	line,	"include\routines_LEVELS.c", 729; }
 5792                        	
 5793                        		.dbg	line,	"include\routines_LEVELS.c", 730; }
 5794    17:C9B0             	.LL153	.alias		.LL155
 5795                        	
 5796                        		.dbg	line,	"include\routines_LEVELS.c", 731; }
 5797    17:C9B0             	.LL151	.alias		.LL155
 5798                        	
 5799                        		.dbg	line,	"include\routines_LEVELS.c", 734; else if(player_state == STATE_JUMP_LEFT)
 5800                        		__bra		.LL155
         17:C9B0  4C 3E D2   			bra	.LL155
 5801    17:C9B3             	.LL150:
 5802                        		__ld.umq	_player_state
         17:C9B3  AD 16 23   			lda	_player_state
 5803                        		__equ_b.uiq	6
         17:C9B6  C9 06      			cmp	#6
         17:C9B8  F0 01      			beq	!+
         17:C9BA  18         			clc
         17:C9BB             	!:
 5804                        		__bfalse	.LL156
         17:C9BB  90 7B      			bcc	.LL156
 5805                        	
 5806                        		.dbg	line,	"include\routines_LEVELS.c", 735; {
 5807                        	
 5808                        		.dbg	line,	"include\routines_LEVELS.c", 736; if(player_axis == AXIS_LEFT)
 5809                        		__ld.umq	_player_axis
         17:C9BD  AD 17 23   			lda	_player_axis
 5810                        		__equ_b.uiq	1
         17:C9C0  C9 01      			cmp	#1
         17:C9C2  F0 01      			beq	!+
         17:C9C4  18         			clc
         17:C9C5             	!:
 5811                        		__bfalse	.LL157
         17:C9C5  B0 03 4C 3E			bcc	.LL157
         17:C9C9  D2          
 5812                        	
 5813                        		.dbg	line,	"include\routines_LEVELS.c", 737; {
 5814                        	
 5815                        		.dbg	line,	"include\routines_LEVELS.c", 738; player_axis = AXIS_RIGHT;
 5816                        		__st.umiq	0, _player_axis
         17:C9CA  9C 17 23   			stz	_player_axis
 5817                        	
 5818                        		.dbg	line,	"include\routines_LEVELS.c", 739; player_previous_axis = player_axis;
 5819                        		__ld.um		_player_axis
         17:C9CD  AD 17 23   			lda	_player_axis
         17:C9D0  C2         			cly
 5820                        		__st.umq	_player_previous_axis
         17:C9D1  8D 18 23   			sta	_player_previous_axis
 5821                        	
 5822                        		.dbg	line,	"include\routines_LEVELS.c", 741; spr_set(player_id);
 5823                        		__ld.umq	_player_id
         17:C9D4  AD 15 23   			lda	_player_id
 5824                        		__call		_spr_set.1
         17:C9D7  20 DD E7   			call	_spr_set.1
 5825                        	
 5826                        		.dbg	line,	"include\routines_LEVELS.c", 742; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5827                        		__st.umiq	136, _al
         17:C9DA  A9 88      			lda.l	#136
         17:C9DC  85 F8      			sta	_al
 5828                        		__ld.uiq	0
         17:C9DE  62         			cla
 5829                        		__call		_spr_ctrl.2
         17:C9DF  20 3C E8   			call	_spr_ctrl.2
 5830                        	
 5831                        		.dbg	line,	"include\routines_LEVELS.c", 744; spr_set(chain_id);
 5832                        		__ld.umq	_chain_id
         17:C9E2  AD 22 23   			lda	_chain_id
 5833                        		__call		_spr_set.1
         17:C9E5  20 DD E7   			call	_spr_set.1
 5834                        	
 5835                        		.dbg	line,	"include\routines_LEVELS.c", 745; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5836                        		__st.umiq	136, _al
         17:C9E8  A9 88      			lda.l	#136
         17:C9EA  85 F8      			sta	_al
 5837                        		__ld.uiq	0
         17:C9EC  62         			cla
 5838                        		__call		_spr_ctrl.2
         17:C9ED  20 3C E8   			call	_spr_ctrl.2
 5839                        	
 5840                        		.dbg	line,	"include\routines_LEVELS.c", 747; spr_set(chain_id+1);
 5841                        		__ld.um		_chain_id
         17:C9F0  AD 22 23   			lda	_chain_id
         17:C9F3  C2         			cly
 5842                        		__add.wi	1
         17:C9F4  1A         			inc	a
         17:C9F5  D0 01      			bne	!+
         17:C9F7  C8         			iny
         17:C9F8             	!:
 5843                        		__call		_spr_set.1
         17:C9F8  20 DD E7   			call	_spr_set.1
 5844                        	
 5845                        		.dbg	line,	"include\routines_LEVELS.c", 748; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5846                        		__st.umiq	136, _al
         17:C9FB  A9 88      			lda.l	#136
         17:C9FD  85 F8      			sta	_al
 5847                        		__ld.uiq	0
         17:C9FF  62         			cla
 5848                        		__call		_spr_ctrl.2
         17:CA00  20 3C E8   			call	_spr_ctrl.2
 5849                        	
 5850                        		.dbg	line,	"include\routines_LEVELS.c", 750; spr_set(chain_id+2);
 5851                        		__ld.um		_chain_id
         17:CA03  AD 22 23   			lda	_chain_id
         17:CA06  C2         			cly
 5852                        		__add.wi	2
         17:CA07  18         			clc
         17:CA08  69 02      			adc.l	#2
         17:CA0A  90 01      			bcc	!+
         17:CA0C  C8         			iny
         17:CA0D             	!:
 5853                        		__call		_spr_set.1
         17:CA0D  20 DD E7   			call	_spr_set.1
 5854                        	
 5855                        		.dbg	line,	"include\routines_LEVELS.c", 751; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5856                        		__st.umiq	136, _al
         17:CA10  A9 88      			lda.l	#136
         17:CA12  85 F8      			sta	_al
 5857                        		__ld.uiq	0
         17:CA14  62         			cla
 5858                        		__call		_spr_ctrl.2
         17:CA15  20 3C E8   			call	_spr_ctrl.2
 5859                        	
 5860                        		.dbg	line,	"include\routines_LEVELS.c", 753; spr_set(weapon_id);
 5861                        		__ld.umq	_weapon_id
         17:CA18  AD 23 23   			lda	_weapon_id
 5862                        		__call		_spr_set.1
         17:CA1B  20 DD E7   			call	_spr_set.1
 5863                        	
 5864                        		.dbg	line,	"include\routines_LEVELS.c", 754; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5865                        		__st.umiq	136, _al
         17:CA1E  A9 88      			lda.l	#136
         17:CA20  85 F8      			sta	_al
 5866                        		__ld.uiq	0
         17:CA22  62         			cla
 5867                        		__call		_spr_ctrl.2
         17:CA23  20 3C E8   			call	_spr_ctrl.2
 5868                        	
 5869                        		.dbg	line,	"include\routines_LEVELS.c", 755; spr_x(player_pos_x-5);
 5870                        		__ld.wm		_player_pos_x
         17:CA26  AD D4 24   			lda.l	_player_pos_x
         17:CA29  AC D5 24   			ldy.h	_player_pos_x
 5871                        		__sub.wi	5
         17:CA2C  38         			sec
         17:CA2D  E9 05      			sbc.l	#5
         17:CA2F  B0 01      			bcs	!+
         17:CA31  88         			dey
         17:CA32             	!:
 5872                        		__call		_spr_x.1
         17:CA32  20 0A E8   			call	_spr_x.1
 5873                        	
 5874                        		.dbg	line,	"include\routines_LEVELS.c", 756; }
 5875                        	
 5876                        		.dbg	line,	"include\routines_LEVELS.c", 757; }
 5877    17:CA35             	.LL157	.alias		.LL158
 5878                        	
 5879                        		.dbg	line,	"include\routines_LEVELS.c", 760; else if(player_state == STATE_CROUCH)
 5880                        		__bra		.LL158
         17:CA35  4C 3E D2   			bra	.LL158
 5881    17:CA38             	.LL156:
 5882                        		__ld.umq	_player_state
         17:CA38  AD 16 23   			lda	_player_state
 5883                        		__equ_b.uiq	7
         17:CA3B  C9 07      			cmp	#7
         17:CA3D  F0 01      			beq	!+
         17:CA3F  18         			clc
         17:CA40             	!:
 5884                        		__bfalse	.LL159
         17:CA40  90 7B      			bcc	.LL159
 5885                        	
 5886                        		.dbg	line,	"include\routines_LEVELS.c", 761; {
 5887                        	
 5888                        		.dbg	line,	"include\routines_LEVELS.c", 762; if(player_axis == AXIS_LEFT)
 5889                        		__ld.umq	_player_axis
         17:CA42  AD 17 23   			lda	_player_axis
 5890                        		__equ_b.uiq	1
         17:CA45  C9 01      			cmp	#1
         17:CA47  F0 01      			beq	!+
         17:CA49  18         			clc
         17:CA4A             	!:
 5891                        		__bfalse	.LL160
         17:CA4A  B0 03 4C 3E			bcc	.LL160
         17:CA4E  D2          
 5892                        	
 5893                        		.dbg	line,	"include\routines_LEVELS.c", 763; {
 5894                        	
 5895                        		.dbg	line,	"include\routines_LEVELS.c", 764; player_axis = AXIS_RIGHT;
 5896                        		__st.umiq	0, _player_axis
         17:CA4F  9C 17 23   			stz	_player_axis
 5897                        	
 5898                        		.dbg	line,	"include\routines_LEVELS.c", 765; player_previous_axis = player_axis;
 5899                        		__ld.um		_player_axis
         17:CA52  AD 17 23   			lda	_player_axis
         17:CA55  C2         			cly
 5900                        		__st.umq	_player_previous_axis
         17:CA56  8D 18 23   			sta	_player_previous_axis
 5901                        	
 5902                        		.dbg	line,	"include\routines_LEVELS.c", 767; spr_set(player_id);
 5903                        		__ld.umq	_player_id
         17:CA59  AD 15 23   			lda	_player_id
 5904                        		__call		_spr_set.1
         17:CA5C  20 DD E7   			call	_spr_set.1
 5905                        	
 5906                        		.dbg	line,	"include\routines_LEVELS.c", 768; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5907                        		__st.umiq	136, _al
         17:CA5F  A9 88      			lda.l	#136
         17:CA61  85 F8      			sta	_al
 5908                        		__ld.uiq	0
         17:CA63  62         			cla
 5909                        		__call		_spr_ctrl.2
         17:CA64  20 3C E8   			call	_spr_ctrl.2
 5910                        	
 5911                        		.dbg	line,	"include\routines_LEVELS.c", 770; spr_set(chain_id);
 5912                        		__ld.umq	_chain_id
         17:CA67  AD 22 23   			lda	_chain_id
 5913                        		__call		_spr_set.1
         17:CA6A  20 DD E7   			call	_spr_set.1
 5914                        	
 5915                        		.dbg	line,	"include\routines_LEVELS.c", 771; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5916                        		__st.umiq	136, _al
         17:CA6D  A9 88      			lda.l	#136
         17:CA6F  85 F8      			sta	_al
 5917                        		__ld.uiq	0
         17:CA71  62         			cla
 5918                        		__call		_spr_ctrl.2
         17:CA72  20 3C E8   			call	_spr_ctrl.2
 5919                        	
 5920                        		.dbg	line,	"include\routines_LEVELS.c", 773; spr_set(chain_id+1);
 5921                        		__ld.um		_chain_id
         17:CA75  AD 22 23   			lda	_chain_id
         17:CA78  C2         			cly
 5922                        		__add.wi	1
         17:CA79  1A         			inc	a
         17:CA7A  D0 01      			bne	!+
         17:CA7C  C8         			iny
         17:CA7D             	!:
 5923                        		__call		_spr_set.1
         17:CA7D  20 DD E7   			call	_spr_set.1
 5924                        	
 5925                        		.dbg	line,	"include\routines_LEVELS.c", 774; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5926                        		__st.umiq	136, _al
         17:CA80  A9 88      			lda.l	#136
         17:CA82  85 F8      			sta	_al
 5927                        		__ld.uiq	0
         17:CA84  62         			cla
 5928                        		__call		_spr_ctrl.2
         17:CA85  20 3C E8   			call	_spr_ctrl.2
 5929                        	
 5930                        		.dbg	line,	"include\routines_LEVELS.c", 776; spr_set(chain_id+2);
 5931                        		__ld.um		_chain_id
         17:CA88  AD 22 23   			lda	_chain_id
         17:CA8B  C2         			cly
 5932                        		__add.wi	2
         17:CA8C  18         			clc
         17:CA8D  69 02      			adc.l	#2
         17:CA8F  90 01      			bcc	!+
         17:CA91  C8         			iny
         17:CA92             	!:
 5933                        		__call		_spr_set.1
         17:CA92  20 DD E7   			call	_spr_set.1
 5934                        	
 5935                        		.dbg	line,	"include\routines_LEVELS.c", 777; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5936                        		__st.umiq	136, _al
         17:CA95  A9 88      			lda.l	#136
         17:CA97  85 F8      			sta	_al
 5937                        		__ld.uiq	0
         17:CA99  62         			cla
 5938                        		__call		_spr_ctrl.2
         17:CA9A  20 3C E8   			call	_spr_ctrl.2
 5939                        	
 5940                        		.dbg	line,	"include\routines_LEVELS.c", 779; spr_set(weapon_id);
 5941                        		__ld.umq	_weapon_id
         17:CA9D  AD 23 23   			lda	_weapon_id
 5942                        		__call		_spr_set.1
         17:CAA0  20 DD E7   			call	_spr_set.1
 5943                        	
 5944                        		.dbg	line,	"include\routines_LEVELS.c", 780; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5945                        		__st.umiq	136, _al
         17:CAA3  A9 88      			lda.l	#136
         17:CAA5  85 F8      			sta	_al
 5946                        		__ld.uiq	0
         17:CAA7  62         			cla
 5947                        		__call		_spr_ctrl.2
         17:CAA8  20 3C E8   			call	_spr_ctrl.2
 5948                        	
 5949                        		.dbg	line,	"include\routines_LEVELS.c", 781; spr_x(player_pos_x-1);
 5950                        		__ld.wm		_player_pos_x
         17:CAAB  AD D4 24   			lda.l	_player_pos_x
         17:CAAE  AC D5 24   			ldy.h	_player_pos_x
 5951                        		__sub.wi	1
         17:CAB1  38         			sec
         17:CAB2  E9 01      			sbc.l	#1
         17:CAB4  B0 01      			bcs	!+
         17:CAB6  88         			dey
         17:CAB7             	!:
 5952                        		__call		_spr_x.1
         17:CAB7  20 0A E8   			call	_spr_x.1
 5953                        	
 5954                        		.dbg	line,	"include\routines_LEVELS.c", 782; }
 5955                        	
 5956                        		.dbg	line,	"include\routines_LEVELS.c", 783; }
 5957    17:CABA             	.LL160	.alias		.LL161
 5958                        	
 5959                        		.dbg	line,	"include\routines_LEVELS.c", 786; else if(player_state == STATE_FALL)
 5960                        		__bra		.LL161
         17:CABA  4C 3E D2   			bra	.LL161
 5961    17:CABD             	.LL159:
 5962                        		__ld.umq	_player_state
         17:CABD  AD 16 23   			lda	_player_state
 5963                        		__equ_b.uiq	9
         17:CAC0  C9 09      			cmp	#9
         17:CAC2  F0 01      			beq	!+
         17:CAC4  18         			clc
         17:CAC5             	!:
 5964                        		__bfalse	.LL162
         17:CAC5  B0 03 4C 51			bcc	.LL162
         17:CAC9  CB          
 5965                        	
 5966                        		.dbg	line,	"include\routines_LEVELS.c", 787; {
 5967                        	
 5968                        		.dbg	line,	"include\routines_LEVELS.c", 788; if(player_attack == FALSE)
 5969                        		__not.um	_player_attack
         17:CACA  AD 1E 23   			lda	_player_attack
         17:CACD  18         			clc
         17:CACE  D0 01      			bne	!+
         17:CAD0  38         			sec
         17:CAD1             	!:
 5970                        		__bfalse	.LL163
         17:CAD1  B0 03 4C 3E			bcc	.LL163
         17:CAD5  D2          
 5971                        	
 5972                        		.dbg	line,	"include\routines_LEVELS.c", 789; {
 5973                        	
 5974                        		.dbg	line,	"include\routines_LEVELS.c", 790; if(player_axis == AXIS_LEFT)
 5975                        		__ld.umq	_player_axis
         17:CAD6  AD 17 23   			lda	_player_axis
 5976                        		__equ_b.uiq	1
         17:CAD9  C9 01      			cmp	#1
         17:CADB  F0 01      			beq	!+
         17:CADD  18         			clc
         17:CADE             	!:
 5977                        		__bfalse	.LL164
         17:CADE  B0 03 4C 3E			bcc	.LL164
         17:CAE2  D2          
 5978                        	
 5979                        		.dbg	line,	"include\routines_LEVELS.c", 791; {
 5980                        	
 5981                        		.dbg	line,	"include\routines_LEVELS.c", 792; player_axis = AXIS_RIGHT;
 5982                        		__st.umiq	0, _player_axis
         17:CAE3  9C 17 23   			stz	_player_axis
 5983                        	
 5984                        		.dbg	line,	"include\routines_LEVELS.c", 793; player_previous_axis = player_axis;
 5985                        		__ld.um		_player_axis
         17:CAE6  AD 17 23   			lda	_player_axis
         17:CAE9  C2         			cly
 5986                        		__st.umq	_player_previous_axis
         17:CAEA  8D 18 23   			sta	_player_previous_axis
 5987                        	
 5988                        		.dbg	line,	"include\routines_LEVELS.c", 795; spr_set(player_id);
 5989                        		__ld.umq	_player_id
         17:CAED  AD 15 23   			lda	_player_id
 5990                        		__call		_spr_set.1
         17:CAF0  20 DD E7   			call	_spr_set.1
 5991                        	
 5992                        		.dbg	line,	"include\routines_LEVELS.c", 796; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 5993                        		__st.umiq	136, _al
         17:CAF3  A9 88      			lda.l	#136
         17:CAF5  85 F8      			sta	_al
 5994                        		__ld.uiq	0
         17:CAF7  62         			cla
 5995                        		__call		_spr_ctrl.2
         17:CAF8  20 3C E8   			call	_spr_ctrl.2
 5996                        	
 5997                        		.dbg	line,	"include\routines_LEVELS.c", 798; spr_set(chain_id);
 5998                        		__ld.umq	_chain_id
         17:CAFB  AD 22 23   			lda	_chain_id
 5999                        		__call		_spr_set.1
         17:CAFE  20 DD E7   			call	_spr_set.1
 6000                        	
 6001                        		.dbg	line,	"include\routines_LEVELS.c", 799; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 6002                        		__st.umiq	136, _al
         17:CB01  A9 88      			lda.l	#136
         17:CB03  85 F8      			sta	_al
 6003                        		__ld.uiq	0
         17:CB05  62         			cla
 6004                        		__call		_spr_ctrl.2
         17:CB06  20 3C E8   			call	_spr_ctrl.2
 6005                        	
 6006                        		.dbg	line,	"include\routines_LEVELS.c", 801; spr_set(chain_id+1);
 6007                        		__ld.um		_chain_id
         17:CB09  AD 22 23   			lda	_chain_id
         17:CB0C  C2         			cly
 6008                        		__add.wi	1
         17:CB0D  1A         			inc	a
         17:CB0E  D0 01      			bne	!+
         17:CB10  C8         			iny
         17:CB11             	!:
 6009                        		__call		_spr_set.1
         17:CB11  20 DD E7   			call	_spr_set.1
 6010                        	
 6011                        		.dbg	line,	"include\routines_LEVELS.c", 802; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 6012                        		__st.umiq	136, _al
         17:CB14  A9 88      			lda.l	#136
         17:CB16  85 F8      			sta	_al
 6013                        		__ld.uiq	0
         17:CB18  62         			cla
 6014                        		__call		_spr_ctrl.2
         17:CB19  20 3C E8   			call	_spr_ctrl.2
 6015                        	
 6016                        		.dbg	line,	"include\routines_LEVELS.c", 804; spr_set(chain_id+2);
 6017                        		__ld.um		_chain_id
         17:CB1C  AD 22 23   			lda	_chain_id
         17:CB1F  C2         			cly
 6018                        		__add.wi	2
         17:CB20  18         			clc
         17:CB21  69 02      			adc.l	#2
         17:CB23  90 01      			bcc	!+
         17:CB25  C8         			iny
         17:CB26             	!:
 6019                        		__call		_spr_set.1
         17:CB26  20 DD E7   			call	_spr_set.1
 6020                        	
 6021                        		.dbg	line,	"include\routines_LEVELS.c", 805; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 6022                        		__st.umiq	136, _al
         17:CB29  A9 88      			lda.l	#136
         17:CB2B  85 F8      			sta	_al
 6023                        		__ld.uiq	0
         17:CB2D  62         			cla
 6024                        		__call		_spr_ctrl.2
         17:CB2E  20 3C E8   			call	_spr_ctrl.2
 6025                        	
 6026                        		.dbg	line,	"include\routines_LEVELS.c", 807; spr_set(weapon_id);
 6027                        		__ld.umq	_weapon_id
         17:CB31  AD 23 23   			lda	_weapon_id
 6028                        		__call		_spr_set.1
         17:CB34  20 DD E7   			call	_spr_set.1
 6029                        	
 6030                        		.dbg	line,	"include\routines_LEVELS.c", 808; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 6031                        		__st.umiq	136, _al
         17:CB37  A9 88      			lda.l	#136
         17:CB39  85 F8      			sta	_al
 6032                        		__ld.uiq	0
         17:CB3B  62         			cla
 6033                        		__call		_spr_ctrl.2
         17:CB3C  20 3C E8   			call	_spr_ctrl.2
 6034                        	
 6035                        		.dbg	line,	"include\routines_LEVELS.c", 809; spr_x(player_pos_x-4);
 6036                        		__ld.wm		_player_pos_x
         17:CB3F  AD D4 24   			lda.l	_player_pos_x
         17:CB42  AC D5 24   			ldy.h	_player_pos_x
 6037                        		__sub.wi	4
         17:CB45  38         			sec
         17:CB46  E9 04      			sbc.l	#4
         17:CB48  B0 01      			bcs	!+
         17:CB4A  88         			dey
         17:CB4B             	!:
 6038                        		__call		_spr_x.1
         17:CB4B  20 0A E8   			call	_spr_x.1
 6039                        	
 6040                        		.dbg	line,	"include\routines_LEVELS.c", 810; }
 6041                        	
 6042                        		.dbg	line,	"include\routines_LEVELS.c", 811; }
 6043    17:CB4E             	.LL164	.alias		.LL165
 6044                        	
 6045                        		.dbg	line,	"include\routines_LEVELS.c", 812; }
 6046    17:CB4E             	.LL163	.alias		.LL165
 6047                        	
 6048                        		.dbg	line,	"include\routines_LEVELS.c", 815; else if(player_state == STATE_HANG)
 6049                        		__bra		.LL165
         17:CB4E  4C 3E D2   			bra	.LL165
 6050    17:CB51             	.LL162:
 6051                        		__ld.umq	_player_state
         17:CB51  AD 16 23   			lda	_player_state
 6052                        		__equ_b.uiq	10
         17:CB54  C9 0A      			cmp	#10
         17:CB56  F0 01      			beq	!+
         17:CB58  18         			clc
         17:CB59             	!:
 6053                        		__bfalse	.LL166
         17:CB59  B0 03 4C E5			bcc	.LL166
         17:CB5D  CB          
 6054                        	
 6055                        		.dbg	line,	"include\routines_LEVELS.c", 816; {
 6056                        	
 6057                        		.dbg	line,	"include\routines_LEVELS.c", 817; if(player_attack == FALSE)
 6058                        		__not.um	_player_attack
         17:CB5E  AD 1E 23   			lda	_player_attack
         17:CB61  18         			clc
         17:CB62  D0 01      			bne	!+
         17:CB64  38         			sec
         17:CB65             	!:
 6059                        		__bfalse	.LL167
         17:CB65  B0 03 4C 3E			bcc	.LL167
         17:CB69  D2          
 6060                        	
 6061                        		.dbg	line,	"include\routines_LEVELS.c", 818; {
 6062                        	
 6063                        		.dbg	line,	"include\routines_LEVELS.c", 819; if(player_axis == AXIS_LEFT)
 6064                        		__ld.umq	_player_axis
         17:CB6A  AD 17 23   			lda	_player_axis
 6065                        		__equ_b.uiq	1
         17:CB6D  C9 01      			cmp	#1
         17:CB6F  F0 01      			beq	!+
         17:CB71  18         			clc
         17:CB72             	!:
 6066                        		__bfalse	.LL168
         17:CB72  B0 03 4C 3E			bcc	.LL168
         17:CB76  D2          
 6067                        	
 6068                        		.dbg	line,	"include\routines_LEVELS.c", 820; {
 6069                        	
 6070                        		.dbg	line,	"include\routines_LEVELS.c", 821; player_axis = AXIS_RIGHT;
 6071                        		__st.umiq	0, _player_axis
         17:CB77  9C 17 23   			stz	_player_axis
 6072                        	
 6073                        		.dbg	line,	"include\routines_LEVELS.c", 822; player_previous_axis = player_axis;
 6074                        		__ld.um		_player_axis
         17:CB7A  AD 17 23   			lda	_player_axis
         17:CB7D  C2         			cly
 6075                        		__st.umq	_player_previous_axis
         17:CB7E  8D 18 23   			sta	_player_previous_axis
 6076                        	
 6077                        		.dbg	line,	"include\routines_LEVELS.c", 824; spr_set(player_id);
 6078                        		__ld.umq	_player_id
         17:CB81  AD 15 23   			lda	_player_id
 6079                        		__call		_spr_set.1
         17:CB84  20 DD E7   			call	_spr_set.1
 6080                        	
 6081                        		.dbg	line,	"include\routines_LEVELS.c", 825; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 6082                        		__st.umiq	136, _al
         17:CB87  A9 88      			lda.l	#136
         17:CB89  85 F8      			sta	_al
 6083                        		__ld.uiq	0
         17:CB8B  62         			cla
 6084                        		__call		_spr_ctrl.2
         17:CB8C  20 3C E8   			call	_spr_ctrl.2
 6085                        	
 6086                        		.dbg	line,	"include\routines_LEVELS.c", 827; spr_set(chain_id);
 6087                        		__ld.umq	_chain_id
         17:CB8F  AD 22 23   			lda	_chain_id
 6088                        		__call		_spr_set.1
         17:CB92  20 DD E7   			call	_spr_set.1
 6089                        	
 6090                        		.dbg	line,	"include\routines_LEVELS.c", 828; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 6091                        		__st.umiq	136, _al
         17:CB95  A9 88      			lda.l	#136
         17:CB97  85 F8      			sta	_al
 6092                        		__ld.uiq	0
         17:CB99  62         			cla
 6093                        		__call		_spr_ctrl.2
         17:CB9A  20 3C E8   			call	_spr_ctrl.2
 6094                        	
 6095                        		.dbg	line,	"include\routines_LEVELS.c", 830; spr_set(chain_id+1);
 6096                        		__ld.um		_chain_id
         17:CB9D  AD 22 23   			lda	_chain_id
         17:CBA0  C2         			cly
 6097                        		__add.wi	1
         17:CBA1  1A         			inc	a
         17:CBA2  D0 01      			bne	!+
         17:CBA4  C8         			iny
         17:CBA5             	!:
 6098                        		__call		_spr_set.1
         17:CBA5  20 DD E7   			call	_spr_set.1
 6099                        	
 6100                        		.dbg	line,	"include\routines_LEVELS.c", 831; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 6101                        		__st.umiq	136, _al
         17:CBA8  A9 88      			lda.l	#136
         17:CBAA  85 F8      			sta	_al
 6102                        		__ld.uiq	0
         17:CBAC  62         			cla
 6103                        		__call		_spr_ctrl.2
         17:CBAD  20 3C E8   			call	_spr_ctrl.2
 6104                        	
 6105                        		.dbg	line,	"include\routines_LEVELS.c", 833; spr_set(chain_id+2);
 6106                        		__ld.um		_chain_id
         17:CBB0  AD 22 23   			lda	_chain_id
         17:CBB3  C2         			cly
 6107                        		__add.wi	2
         17:CBB4  18         			clc
         17:CBB5  69 02      			adc.l	#2
         17:CBB7  90 01      			bcc	!+
         17:CBB9  C8         			iny
         17:CBBA             	!:
 6108                        		__call		_spr_set.1
         17:CBBA  20 DD E7   			call	_spr_set.1
 6109                        	
 6110                        		.dbg	line,	"include\routines_LEVELS.c", 834; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 6111                        		__st.umiq	136, _al
         17:CBBD  A9 88      			lda.l	#136
         17:CBBF  85 F8      			sta	_al
 6112                        		__ld.uiq	0
         17:CBC1  62         			cla
 6113                        		__call		_spr_ctrl.2
         17:CBC2  20 3C E8   			call	_spr_ctrl.2
 6114                        	
 6115                        		.dbg	line,	"include\routines_LEVELS.c", 836; spr_set(weapon_id);
 6116                        		__ld.umq	_weapon_id
         17:CBC5  AD 23 23   			lda	_weapon_id
 6117                        		__call		_spr_set.1
         17:CBC8  20 DD E7   			call	_spr_set.1
 6118                        	
 6119                        		.dbg	line,	"include\routines_LEVELS.c", 837; spr_ctrl(FLIP_MAS, NO_FLIP_X);
 6120                        		__st.umiq	136, _al
         17:CBCB  A9 88      			lda.l	#136
         17:CBCD  85 F8      			sta	_al
 6121                        		__ld.uiq	0
         17:CBCF  62         			cla
 6122                        		__call		_spr_ctrl.2
         17:CBD0  20 3C E8   			call	_spr_ctrl.2
 6123                        	
 6124                        		.dbg	line,	"include\routines_LEVELS.c", 838; spr_x(player_pos_x+17);
 6125                        		__ld.wm		_player_pos_x
         17:CBD3  AD D4 24   			lda.l	_player_pos_x
         17:CBD6  AC D5 24   			ldy.h	_player_pos_x
 6126                        		__add.wi	17
         17:CBD9  18         			clc
         17:CBDA  69 11      			adc.l	#17
         17:CBDC  90 01      			bcc	!+
         17:CBDE  C8         			iny
         17:CBDF             	!:
 6127                        		__call		_spr_x.1
         17:CBDF  20 0A E8   			call	_spr_x.1
 6128                        	
 6129                        		.dbg	line,	"include\routines_LEVELS.c", 839; }
 6130                        	
 6131                        		.dbg	line,	"include\routines_LEVELS.c", 840; }
 6132    17:CBE2             	.LL168	.alias		.LL169
 6133                        	
 6134                        		.dbg	line,	"include\routines_LEVELS.c", 841; }
 6135    17:CBE2             	.LL167	.alias		.LL169
 6136                        	
 6137                        		.dbg	line,	"include\routines_LEVELS.c", 844; else if(player_state == STATE_CLIMB_UP || player_state == STATE_CLIMB_DOWN)
 6138                        		__bra		.LL169
         17:CBE2  4C 3E D2   			bra	.LL169
 6139    17:CBE5             	.LL166:
 6140                        		__ld.umq	_player_state
         17:CBE5  AD 16 23   			lda	_player_state
 6141                        		__equ_b.uiq	11
         17:CBE8  C9 0B      			cmp	#11
         17:CBEA  F0 01      			beq	!+
         17:CBEC  18         			clc
         17:CBED             	!:
 6142                        		__btrue		.LL171
         17:CBED  B0 08      			bcs	.LL171
 6143                        		__ld.umq	_player_state
         17:CBEF  AD 16 23   			lda	_player_state
 6144                        		__equ_b.uiq	12
         17:CBF2  C9 0C      			cmp	#12
         17:CBF4  F0 01      			beq	!+
         17:CBF6  18         			clc
         17:CBF7             	!:
 6145    17:CBF7             	.LL171:
 6146                        		__bfalse	.LL170
         17:CBF7  B0 03 4C 3E			bcc	.LL170
         17:CBFB  D2          
 6147                        	
 6148                        		.dbg	line,	"include\routines_LEVELS.c", 845; {
 6149                        	
 6150                        		.dbg	line,	"include\routines_LEVELS.c", 846; spr_set(player_id);
 6151                        		__ld.umq	_player_id
         17:CBFC  AD 15 23   			lda	_player_id
 6152                        		__call		_spr_set.1
         17:CBFF  20 DD E7   			call	_spr_set.1
 6153                        	
 6154                        		.dbg	line,	"include\routines_LEVELS.c", 847; spr_pattern(PLAYER_HANG_VRAM_ADR);
 6155                        		__ld.wi		7424
         17:CC02  62         			cla
         17:CC03  A0 1D      			ldy.h	#7424
 6156                        		__call		_spr_pattern.1
         17:CC05  20 26 E8   			call	_spr_pattern.1
 6157                        	
 6158                        		.dbg	line,	"include\routines_LEVELS.c", 848; player_counter_anim = 0;
 6159                        		__st.umiq	0, _player_counter_anim
         17:CC08  9C 19 23   			stz	_player_counter_anim
 6160                        	
 6161                        		.dbg	line,	"include\routines_LEVELS.c", 849; player_state = STATE_HANG;
 6162                        		__st.umiq	10, _player_state
         17:CC0B  A9 0A      			lda.l	#10
         17:CC0D  8D 16 23   			sta	_player_state
 6163                        	
 6164                        		.dbg	line,	"include\routines_LEVELS.c", 850; }
 6165                        	
 6166                        		.dbg	line,	"include\routines_LEVELS.c", 851; }
 6167    17:CC10             	.LL170	.alias		.LL172
 6168    17:CC10             	.LL169	.alias		.LL172
 6169    17:CC10             	.LL165	.alias		.LL172
 6170    17:CC10             	.LL161	.alias		.LL172
 6171    17:CC10             	.LL158	.alias		.LL172
 6172    17:CC10             	.LL155	.alias		.LL172
 6173    17:CC10             	.LL149	.alias		.LL172
 6174                        	
 6175                        		.dbg	line,	"include\routines_LEVELS.c", 854; //--------------------------------------------------------------------------------------//
 6176                        	
 6177                        		.dbg	line,	"include\routines_LEVELS.c", 855; //                                     LEFT BUTTON                                      //
 6178                        	
 6179                        		.dbg	line,	"include\routines_LEVELS.c", 856; //--------------------------------------------------------------------------------------//
 6180                        	
 6181                        		.dbg	line,	"include\routines_LEVELS.c", 858; else if(joy(JOYPAD_1) & JOY_LEFT)
 6182                        		__bra		.LL172
         17:CC10  4C 3E D2   			bra	.LL172
 6183    17:CC13             	.LL144:
 6184                        		__ld.uiq	0
         17:CC13  62         			cla
 6185                        		 _joy.1
         17:CC14  AA         			tax
         17:CC15  BD 28 22   			lda	joynow, x
         17:CC18  BC D3 22   			ldy	joy6now, x
 6186                        		__tand.wi	128
         17:CC1B  29 80      			and	#128
         17:CC1D  C9 01      	!:		cmp	#1
 6187                        		__bfalse	.LL173
         17:CC1F  B0 03 4C E7			bcc	.LL173
         17:CC23  CF          
 6188                        	
 6189                        		.dbg	line,	"include\routines_LEVELS.c", 859; {
 6190                        	
 6191                        		.dbg	line,	"include\routines_LEVELS.c", 860; if(player_state == STATE_IDLE || player_state == STATE_WALK)
 6192                        		__not.um	_player_state
         17:CC24  AD 16 23   			lda	_player_state
         17:CC27  18         			clc
         17:CC28  D0 01      			bne	!+
         17:CC2A  38         			sec
         17:CC2B             	!:
 6193                        		__btrue		.LL175
         17:CC2B  B0 08      			bcs	.LL175
 6194                        		__ld.umq	_player_state
         17:CC2D  AD 16 23   			lda	_player_state
 6195                        		__equ_b.uiq	1
         17:CC30  C9 01      			cmp	#1
         17:CC32  F0 01      			beq	!+
         17:CC34  18         			clc
         17:CC35             	!:
 6196    17:CC35             	.LL175:
 6197                        		__bfalse	.LL174
         17:CC35  B0 03 4C DB			bcc	.LL174
         17:CC39  CC          
 6198                        	
 6199                        		.dbg	line,	"include\routines_LEVELS.c", 861; {
 6200                        	
 6201                        		.dbg	line,	"include\routines_LEVELS.c", 862; player_axis = AXIS_LEFT;
 6202                        		__st.umiq	1, _player_axis
         17:CC3A  A9 01      			lda.l	#1
         17:CC3C  8D 17 23   			sta	_player_axis
 6203                        	
 6204                        		.dbg	line,	"include\routines_LEVELS.c", 864; if(player_previous_axis != player_axis)
 6205                        		__ld.umq	_player_previous_axis
         17:CC3F  AD 18 23   			lda	_player_previous_axis
 6206                        		__neq_b.umq	_player_axis
         17:CC42  38         			sec
         17:CC43  4D 17 23   			eor	_player_axis
         17:CC46  D0 01      			bne	!+
         17:CC48  18         			clc
         17:CC49             	!:
 6207                        		__bfalse	.LL176
         17:CC49  90 6D      			bcc	.LL176
 6208                        	
 6209                        		.dbg	line,	"include\routines_LEVELS.c", 865; {
 6210                        	
 6211                        		.dbg	line,	"include\routines_LEVELS.c", 866; player_previous_axis = player_axis;
 6212                        		__ld.um		_player_axis
         17:CC4B  AD 17 23   			lda	_player_axis
         17:CC4E  C2         			cly
 6213                        		__st.umq	_player_previous_axis
         17:CC4F  8D 18 23   			sta	_player_previous_axis
 6214                        	
 6215                        		.dbg	line,	"include\routines_LEVELS.c", 868; spr_set(player_id);
 6216                        		__ld.umq	_player_id
         17:CC52  AD 15 23   			lda	_player_id
 6217                        		__call		_spr_set.1
         17:CC55  20 DD E7   			call	_spr_set.1
 6218                        	
 6219                        		.dbg	line,	"include\routines_LEVELS.c", 869; spr_ctrl(FLIP_MAS, FLIP_X);
 6220                        		__st.umiq	136, _al
         17:CC58  A9 88      			lda.l	#136
         17:CC5A  85 F8      			sta	_al
 6221                        		__ld.uiq	8
         17:CC5C  A9 08      			lda	#8
 6222                        		__call		_spr_ctrl.2
         17:CC5E  20 3C E8   			call	_spr_ctrl.2
 6223                        	
 6224                        		.dbg	line,	"include\routines_LEVELS.c", 871; spr_set(chain_id);
 6225                        		__ld.umq	_chain_id
         17:CC61  AD 22 23   			lda	_chain_id
 6226                        		__call		_spr_set.1
         17:CC64  20 DD E7   			call	_spr_set.1
 6227                        	
 6228                        		.dbg	line,	"include\routines_LEVELS.c", 872; spr_ctrl(FLIP_MAS, FLIP_X);
 6229                        		__st.umiq	136, _al
         17:CC67  A9 88      			lda.l	#136
         17:CC69  85 F8      			sta	_al
 6230                        		__ld.uiq	8
         17:CC6B  A9 08      			lda	#8
 6231                        		__call		_spr_ctrl.2
         17:CC6D  20 3C E8   			call	_spr_ctrl.2
 6232                        	
 6233                        		.dbg	line,	"include\routines_LEVELS.c", 874; spr_set(chain_id+1);
 6234                        		__ld.um		_chain_id
         17:CC70  AD 22 23   			lda	_chain_id
         17:CC73  C2         			cly
 6235                        		__add.wi	1
         17:CC74  1A         			inc	a
         17:CC75  D0 01      			bne	!+
         17:CC77  C8         			iny
         17:CC78             	!:
 6236                        		__call		_spr_set.1
         17:CC78  20 DD E7   			call	_spr_set.1
 6237                        	
 6238                        		.dbg	line,	"include\routines_LEVELS.c", 875; spr_ctrl(FLIP_MAS, FLIP_X);
 6239                        		__st.umiq	136, _al
         17:CC7B  A9 88      			lda.l	#136
         17:CC7D  85 F8      			sta	_al
 6240                        		__ld.uiq	8
         17:CC7F  A9 08      			lda	#8
 6241                        		__call		_spr_ctrl.2
         17:CC81  20 3C E8   			call	_spr_ctrl.2
 6242                        	
 6243                        		.dbg	line,	"include\routines_LEVELS.c", 877; spr_set(chain_id+2);
 6244                        		__ld.um		_chain_id
         17:CC84  AD 22 23   			lda	_chain_id
         17:CC87  C2         			cly
 6245                        		__add.wi	2
         17:CC88  18         			clc
         17:CC89  69 02      			adc.l	#2
         17:CC8B  90 01      			bcc	!+
         17:CC8D  C8         			iny
         17:CC8E             	!:
 6246                        		__call		_spr_set.1
         17:CC8E  20 DD E7   			call	_spr_set.1
 6247                        	
 6248                        		.dbg	line,	"include\routines_LEVELS.c", 878; spr_ctrl(FLIP_MAS, FLIP_X);
 6249                        		__st.umiq	136, _al
         17:CC91  A9 88      			lda.l	#136
         17:CC93  85 F8      			sta	_al
 6250                        		__ld.uiq	8
         17:CC95  A9 08      			lda	#8
 6251                        		__call		_spr_ctrl.2
         17:CC97  20 3C E8   			call	_spr_ctrl.2
 6252                        	
 6253                        		.dbg	line,	"include\routines_LEVELS.c", 880; spr_set(weapon_id);
 6254                        		__ld.umq	_weapon_id
         17:CC9A  AD 23 23   			lda	_weapon_id
 6255                        		__call		_spr_set.1
         17:CC9D  20 DD E7   			call	_spr_set.1
 6256                        	
 6257                        		.dbg	line,	"include\routines_LEVELS.c", 881; spr_ctrl(FLIP_MAS, FLIP_X);
 6258                        		__st.umiq	136, _al
         17:CCA0  A9 88      			lda.l	#136
         17:CCA2  85 F8      			sta	_al
 6259                        		__ld.uiq	8
         17:CCA4  A9 08      			lda	#8
 6260                        		__call		_spr_ctrl.2
         17:CCA6  20 3C E8   			call	_spr_ctrl.2
 6261                        	
 6262                        		.dbg	line,	"include\routines_LEVELS.c", 882; spr_x(player_pos_x+15);
 6263                        		__ld.wm		_player_pos_x
         17:CCA9  AD D4 24   			lda.l	_player_pos_x
         17:CCAC  AC D5 24   			ldy.h	_player_pos_x
 6264                        		__add.wi	15
         17:CCAF  18         			clc
         17:CCB0  69 0F      			adc.l	#15
         17:CCB2  90 01      			bcc	!+
         17:CCB4  C8         			iny
         17:CCB5             	!:
 6265                        		__call		_spr_x.1
         17:CCB5  20 0A E8   			call	_spr_x.1
 6266                        	
 6267                        		.dbg	line,	"include\routines_LEVELS.c", 883; }
 6268                        	
 6269                        		.dbg	line,	"include\routines_LEVELS.c", 885; if(joy(JOYPAD_1) & JOY_DOWN)
 6270    17:CCB8             	.LL176:
 6271                        		__ld.uiq	0
         17:CCB8  62         			cla
 6272                        		 _joy.1
         17:CCB9  AA         			tax
         17:CCBA  BD 28 22   			lda	joynow, x
         17:CCBD  BC D3 22   			ldy	joy6now, x
 6273                        		__tand.wi	64
         17:CCC0  29 40      			and	#64
         17:CCC2  C9 01      	!:		cmp	#1
 6274                        		__bfalse	.LL177
         17:CCC4  90 0D      			bcc	.LL177
 6275                        	
 6276                        		.dbg	line,	"include\routines_LEVELS.c", 886; {
 6277                        	
 6278                        		.dbg	line,	"include\routines_LEVELS.c", 887; player_counter_anim = 1;
 6279                        		__st.umiq	1, _player_counter_anim
         17:CCC6  A9 01      			lda.l	#1
         17:CCC8  8D 19 23   			sta	_player_counter_anim
 6280                        	
 6281                        		.dbg	line,	"include\routines_LEVELS.c", 888; player_state = STATE_CROUCH;
 6282                        		__st.umiq	7, _player_state
         17:CCCB  A9 07      			lda.l	#7
         17:CCCD  8D 16 23   			sta	_player_state
 6283                        	
 6284                        		.dbg	line,	"include\routines_LEVELS.c", 889; return;
 6285                        		__bra		.LL135
         17:CCD0  4C 3E D2   			bra	.LL135
 6286                        	
 6287                        		.dbg	line,	"include\routines_LEVELS.c", 890; }
 6288                        	
 6289                        		.dbg	line,	"include\routines_LEVELS.c", 892; player_state = STATE_WALK;
 6290    17:CCD3             	.LL177:
 6291                        		__st.umiq	1, _player_state
         17:CCD3  A9 01      			lda.l	#1
         17:CCD5  8D 16 23   			sta	_player_state
 6292                        	
 6293                        		.dbg	line,	"include\routines_LEVELS.c", 893; }
 6294                        	
 6295                        		.dbg	line,	"include\routines_LEVELS.c", 896; else if(player_state == STATE_JUMP)
 6296                        		__bra		.LL178
         17:CCD8  4C 3E D2   			bra	.LL178
 6297    17:CCDB             	.LL174:
 6298                        		__ld.umq	_player_state
         17:CCDB  AD 16 23   			lda	_player_state
 6299                        		__equ_b.uiq	4
         17:CCDE  C9 04      			cmp	#4
         17:CCE0  F0 01      			beq	!+
         17:CCE2  18         			clc
         17:CCE3             	!:
 6300                        		__bfalse	.LL179
         17:CCE3  B0 03 4C 81			bcc	.LL179
         17:CCE7  CD          
 6301                        	
 6302                        		.dbg	line,	"include\routines_LEVELS.c", 897; {
 6303                        	
 6304                        		.dbg	line,	"include\routines_LEVELS.c", 898; if(player_axis == AXIS_RIGHT)
 6305                        		__not.um	_player_axis
         17:CCE8  AD 17 23   			lda	_player_axis
         17:CCEB  18         			clc
         17:CCEC  D0 01      			bne	!+
         17:CCEE  38         			sec
         17:CCEF             	!:
 6306                        		__bfalse	.LL180
         17:CCEF  90 72      			bcc	.LL180
 6307                        	
 6308                        		.dbg	line,	"include\routines_LEVELS.c", 899; {
 6309                        	
 6310                        		.dbg	line,	"include\routines_LEVELS.c", 900; player_axis = AXIS_LEFT;
 6311                        		__st.umiq	1, _player_axis
         17:CCF1  A9 01      			lda.l	#1
         17:CCF3  8D 17 23   			sta	_player_axis
 6312                        	
 6313                        		.dbg	line,	"include\routines_LEVELS.c", 901; player_previous_axis = player_axis;
 6314                        		__ld.um		_player_axis
         17:CCF6  AD 17 23   			lda	_player_axis
         17:CCF9  C2         			cly
 6315                        		__st.umq	_player_previous_axis
         17:CCFA  8D 18 23   			sta	_player_previous_axis
 6316                        	
 6317                        		.dbg	line,	"include\routines_LEVELS.c", 903; spr_set(player_id);
 6318                        		__ld.umq	_player_id
         17:CCFD  AD 15 23   			lda	_player_id
 6319                        		__call		_spr_set.1
         17:CD00  20 DD E7   			call	_spr_set.1
 6320                        	
 6321                        		.dbg	line,	"include\routines_LEVELS.c", 904; spr_ctrl(FLIP_MAS, FLIP_X);
 6322                        		__st.umiq	136, _al
         17:CD03  A9 88      			lda.l	#136
         17:CD05  85 F8      			sta	_al
 6323                        		__ld.uiq	8
         17:CD07  A9 08      			lda	#8
 6324                        		__call		_spr_ctrl.2
         17:CD09  20 3C E8   			call	_spr_ctrl.2
 6325                        	
 6326                        		.dbg	line,	"include\routines_LEVELS.c", 906; spr_set(chain_id);
 6327                        		__ld.umq	_chain_id
         17:CD0C  AD 22 23   			lda	_chain_id
 6328                        		__call		_spr_set.1
         17:CD0F  20 DD E7   			call	_spr_set.1
 6329                        	
 6330                        		.dbg	line,	"include\routines_LEVELS.c", 907; spr_ctrl(FLIP_MAS, FLIP_X);
 6331                        		__st.umiq	136, _al
         17:CD12  A9 88      			lda.l	#136
         17:CD14  85 F8      			sta	_al
 6332                        		__ld.uiq	8
         17:CD16  A9 08      			lda	#8
 6333                        		__call		_spr_ctrl.2
         17:CD18  20 3C E8   			call	_spr_ctrl.2
 6334                        	
 6335                        		.dbg	line,	"include\routines_LEVELS.c", 909; spr_set(chain_id+1);
 6336                        		__ld.um		_chain_id
         17:CD1B  AD 22 23   			lda	_chain_id
         17:CD1E  C2         			cly
 6337                        		__add.wi	1
         17:CD1F  1A         			inc	a
         17:CD20  D0 01      			bne	!+
         17:CD22  C8         			iny
         17:CD23             	!:
 6338                        		__call		_spr_set.1
         17:CD23  20 DD E7   			call	_spr_set.1
 6339                        	
 6340                        		.dbg	line,	"include\routines_LEVELS.c", 910; spr_ctrl(FLIP_MAS, FLIP_X);
 6341                        		__st.umiq	136, _al
         17:CD26  A9 88      			lda.l	#136
         17:CD28  85 F8      			sta	_al
 6342                        		__ld.uiq	8
         17:CD2A  A9 08      			lda	#8
 6343                        		__call		_spr_ctrl.2
         17:CD2C  20 3C E8   			call	_spr_ctrl.2
 6344                        	
 6345                        		.dbg	line,	"include\routines_LEVELS.c", 912; spr_set(chain_id+2);
 6346                        		__ld.um		_chain_id
         17:CD2F  AD 22 23   			lda	_chain_id
         17:CD32  C2         			cly
 6347                        		__add.wi	2
         17:CD33  18         			clc
         17:CD34  69 02      			adc.l	#2
         17:CD36  90 01      			bcc	!+
         17:CD38  C8         			iny
         17:CD39             	!:
 6348                        		__call		_spr_set.1
         17:CD39  20 DD E7   			call	_spr_set.1
 6349                        	
 6350                        		.dbg	line,	"include\routines_LEVELS.c", 913; spr_ctrl(FLIP_MAS, FLIP_X);
 6351                        		__st.umiq	136, _al
         17:CD3C  A9 88      			lda.l	#136
         17:CD3E  85 F8      			sta	_al
 6352                        		__ld.uiq	8
         17:CD40  A9 08      			lda	#8
 6353                        		__call		_spr_ctrl.2
         17:CD42  20 3C E8   			call	_spr_ctrl.2
 6354                        	
 6355                        		.dbg	line,	"include\routines_LEVELS.c", 915; spr_set(weapon_id);
 6356                        		__ld.umq	_weapon_id
         17:CD45  AD 23 23   			lda	_weapon_id
 6357                        		__call		_spr_set.1
         17:CD48  20 DD E7   			call	_spr_set.1
 6358                        	
 6359                        		.dbg	line,	"include\routines_LEVELS.c", 916; spr_ctrl(FLIP_MAS, FLIP_X);
 6360                        		__st.umiq	136, _al
         17:CD4B  A9 88      			lda.l	#136
         17:CD4D  85 F8      			sta	_al
 6361                        		__ld.uiq	8
         17:CD4F  A9 08      			lda	#8
 6362                        		__call		_spr_ctrl.2
         17:CD51  20 3C E8   			call	_spr_ctrl.2
 6363                        	
 6364                        		.dbg	line,	"include\routines_LEVELS.c", 917; spr_x(player_pos_x+21);
 6365                        		__ld.wm		_player_pos_x
         17:CD54  AD D4 24   			lda.l	_player_pos_x
         17:CD57  AC D5 24   			ldy.h	_player_pos_x
 6366                        		__add.wi	21
         17:CD5A  18         			clc
         17:CD5B  69 15      			adc.l	#21
         17:CD5D  90 01      			bcc	!+
         17:CD5F  C8         			iny
         17:CD60             	!:
 6367                        		__call		_spr_x.1
         17:CD60  20 0A E8   			call	_spr_x.1
 6368                        	
 6369                        		.dbg	line,	"include\routines_LEVELS.c", 918; }
 6370                        	
 6371                        		.dbg	line,	"include\routines_LEVELS.c", 920; if(player_index_jump > 11 && player_index_jump < 15)
 6372    17:CD63             	.LL180:
 6373                        		__ld.umq	_player_index_jump
         17:CD63  AD 1A 23   			lda	_player_index_jump
 6374                        		__ugt_b.uiq	11
         17:CD66  18         			clc			; Subtract integer+1 from A.
         17:CD67  E9 0B      			sbc	#11		; CS if A > integer.
 6375                        		__bfalse	.LL182
         17:CD69  90 09      			bcc	.LL182
 6376                        		__ld.umq	_player_index_jump
         17:CD6B  AD 1A 23   			lda	_player_index_jump
 6377                        		__ult_b.uiq	15
         17:CD6E  C9 0F      			cmp	#15		; Subtract integer from A.
         17:CD70  6A         			ror	a		; CC if A < integer.
         17:CD71  49 80      			eor	#$80
         17:CD73  2A         			rol	a
 6378    17:CD74             	.LL182:
 6379                        		__bfalse	.LL181
         17:CD74  B0 03 4C 3E			bcc	.LL181
         17:CD78  D2          
 6380                        	
 6381                        		.dbg	line,	"include\routines_LEVELS.c", 921; {
 6382                        	
 6383                        		.dbg	line,	"include\routines_LEVELS.c", 922; player_state = STATE_JUMP_LEFT;                        
 6384                        		__st.umiq	6, _player_state
         17:CD79  A9 06      			lda.l	#6
         17:CD7B  8D 16 23   			sta	_player_state
 6385                        	
 6386                        		.dbg	line,	"include\routines_LEVELS.c", 923; }
 6387                        	
 6388                        		.dbg	line,	"include\routines_LEVELS.c", 924; }
 6389    17:CD7E             	.LL181	.alias		.LL183
 6390                        	
 6391                        		.dbg	line,	"include\routines_LEVELS.c", 927; else if(player_state == STATE_JUMP_RIGHT)
 6392                        		__bra		.LL183
         17:CD7E  4C 3E D2   			bra	.LL183
 6393    17:CD81             	.LL179:
 6394                        		__ld.umq	_player_state
         17:CD81  AD 16 23   			lda	_player_state
 6395                        		__equ_b.uiq	5
         17:CD84  C9 05      			cmp	#5
         17:CD86  F0 01      			beq	!+
         17:CD88  18         			clc
         17:CD89             	!:
 6396                        		__bfalse	.LL184
         17:CD89  B0 03 4C 0F			bcc	.LL184
         17:CD8D  CE          
 6397                        	
 6398                        		.dbg	line,	"include\routines_LEVELS.c", 928; {
 6399                        	
 6400                        		.dbg	line,	"include\routines_LEVELS.c", 929; if(player_axis == AXIS_RIGHT)
 6401                        		__not.um	_player_axis
         17:CD8E  AD 17 23   			lda	_player_axis
         17:CD91  18         			clc
         17:CD92  D0 01      			bne	!+
         17:CD94  38         			sec
         17:CD95             	!:
 6402                        		__bfalse	.LL185
         17:CD95  B0 03 4C 3E			bcc	.LL185
         17:CD99  D2          
 6403                        	
 6404                        		.dbg	line,	"include\routines_LEVELS.c", 930; {
 6405                        	
 6406                        		.dbg	line,	"include\routines_LEVELS.c", 931; player_axis = AXIS_LEFT;
 6407                        		__st.umiq	1, _player_axis
         17:CD9A  A9 01      			lda.l	#1
         17:CD9C  8D 17 23   			sta	_player_axis
 6408                        	
 6409                        		.dbg	line,	"include\routines_LEVELS.c", 932; player_previous_axis = player_axis;
 6410                        		__ld.um		_player_axis
         17:CD9F  AD 17 23   			lda	_player_axis
         17:CDA2  C2         			cly
 6411                        		__st.umq	_player_previous_axis
         17:CDA3  8D 18 23   			sta	_player_previous_axis
 6412                        	
 6413                        		.dbg	line,	"include\routines_LEVELS.c", 934; spr_set(player_id);
 6414                        		__ld.umq	_player_id
         17:CDA6  AD 15 23   			lda	_player_id
 6415                        		__call		_spr_set.1
         17:CDA9  20 DD E7   			call	_spr_set.1
 6416                        	
 6417                        		.dbg	line,	"include\routines_LEVELS.c", 935; spr_ctrl(FLIP_MAS, FLIP_X);
 6418                        		__st.umiq	136, _al
         17:CDAC  A9 88      			lda.l	#136
         17:CDAE  85 F8      			sta	_al
 6419                        		__ld.uiq	8
         17:CDB0  A9 08      			lda	#8
 6420                        		__call		_spr_ctrl.2
         17:CDB2  20 3C E8   			call	_spr_ctrl.2
 6421                        	
 6422                        		.dbg	line,	"include\routines_LEVELS.c", 937; spr_set(chain_id);
 6423                        		__ld.umq	_chain_id
         17:CDB5  AD 22 23   			lda	_chain_id
 6424                        		__call		_spr_set.1
         17:CDB8  20 DD E7   			call	_spr_set.1
 6425                        	
 6426                        		.dbg	line,	"include\routines_LEVELS.c", 938; spr_ctrl(FLIP_MAS, FLIP_X);
 6427                        		__st.umiq	136, _al
         17:CDBB  A9 88      			lda.l	#136
         17:CDBD  85 F8      			sta	_al
 6428                        		__ld.uiq	8
         17:CDBF  A9 08      			lda	#8
 6429                        		__call		_spr_ctrl.2
         17:CDC1  20 3C E8   			call	_spr_ctrl.2
 6430                        	
 6431                        		.dbg	line,	"include\routines_LEVELS.c", 940; spr_set(chain_id+1);
 6432                        		__ld.um		_chain_id
         17:CDC4  AD 22 23   			lda	_chain_id
         17:CDC7  C2         			cly
 6433                        		__add.wi	1
         17:CDC8  1A         			inc	a
         17:CDC9  D0 01      			bne	!+
         17:CDCB  C8         			iny
         17:CDCC             	!:
 6434                        		__call		_spr_set.1
         17:CDCC  20 DD E7   			call	_spr_set.1
 6435                        	
 6436                        		.dbg	line,	"include\routines_LEVELS.c", 941; spr_ctrl(FLIP_MAS, FLIP_X);
 6437                        		__st.umiq	136, _al
         17:CDCF  A9 88      			lda.l	#136
         17:CDD1  85 F8      			sta	_al
 6438                        		__ld.uiq	8
         17:CDD3  A9 08      			lda	#8
 6439                        		__call		_spr_ctrl.2
         17:CDD5  20 3C E8   			call	_spr_ctrl.2
 6440                        	
 6441                        		.dbg	line,	"include\routines_LEVELS.c", 943; spr_set(chain_id+2);
 6442                        		__ld.um		_chain_id
         17:CDD8  AD 22 23   			lda	_chain_id
         17:CDDB  C2         			cly
 6443                        		__add.wi	2
         17:CDDC  18         			clc
         17:CDDD  69 02      			adc.l	#2
         17:CDDF  90 01      			bcc	!+
         17:CDE1  C8         			iny
         17:CDE2             	!:
 6444                        		__call		_spr_set.1
         17:CDE2  20 DD E7   			call	_spr_set.1
 6445                        	
 6446                        		.dbg	line,	"include\routines_LEVELS.c", 944; spr_ctrl(FLIP_MAS, FLIP_X);
 6447                        		__st.umiq	136, _al
         17:CDE5  A9 88      			lda.l	#136
         17:CDE7  85 F8      			sta	_al
 6448                        		__ld.uiq	8
         17:CDE9  A9 08      			lda	#8
 6449                        		__call		_spr_ctrl.2
         17:CDEB  20 3C E8   			call	_spr_ctrl.2
 6450                        	
 6451                        		.dbg	line,	"include\routines_LEVELS.c", 946; spr_set(weapon_id);
 6452                        		__ld.umq	_weapon_id
         17:CDEE  AD 23 23   			lda	_weapon_id
 6453                        		__call		_spr_set.1
         17:CDF1  20 DD E7   			call	_spr_set.1
 6454                        	
 6455                        		.dbg	line,	"include\routines_LEVELS.c", 947; spr_ctrl(FLIP_MAS, FLIP_X);
 6456                        		__st.umiq	136, _al
         17:CDF4  A9 88      			lda.l	#136
         17:CDF6  85 F8      			sta	_al
 6457                        		__ld.uiq	8
         17:CDF8  A9 08      			lda	#8
 6458                        		__call		_spr_ctrl.2
         17:CDFA  20 3C E8   			call	_spr_ctrl.2
 6459                        	
 6460                        		.dbg	line,	"include\routines_LEVELS.c", 948; spr_x(player_pos_x+21);
 6461                        		__ld.wm		_player_pos_x
         17:CDFD  AD D4 24   			lda.l	_player_pos_x
         17:CE00  AC D5 24   			ldy.h	_player_pos_x
 6462                        		__add.wi	21
         17:CE03  18         			clc
         17:CE04  69 15      			adc.l	#21
         17:CE06  90 01      			bcc	!+
         17:CE08  C8         			iny
         17:CE09             	!:
 6463                        		__call		_spr_x.1
         17:CE09  20 0A E8   			call	_spr_x.1
 6464                        	
 6465                        		.dbg	line,	"include\routines_LEVELS.c", 949; }
 6466                        	
 6467                        		.dbg	line,	"include\routines_LEVELS.c", 950; }
 6468    17:CE0C             	.LL185	.alias		.LL186
 6469                        	
 6470                        		.dbg	line,	"include\routines_LEVELS.c", 953; else if(player_state == STATE_CROUCH)
 6471                        		__bra		.LL186
         17:CE0C  4C 3E D2   			bra	.LL186
 6472    17:CE0F             	.LL184:
 6473                        		__ld.umq	_player_state
         17:CE0F  AD 16 23   			lda	_player_state
 6474                        		__equ_b.uiq	7
         17:CE12  C9 07      			cmp	#7
         17:CE14  F0 01      			beq	!+
         17:CE16  18         			clc
         17:CE17             	!:
 6475                        		__bfalse	.LL187
         17:CE17  B0 03 4C 9D			bcc	.LL187
         17:CE1B  CE          
 6476                        	
 6477                        		.dbg	line,	"include\routines_LEVELS.c", 954; {
 6478                        	
 6479                        		.dbg	line,	"include\routines_LEVELS.c", 955; if(player_axis == AXIS_RIGHT)
 6480                        		__not.um	_player_axis
         17:CE1C  AD 17 23   			lda	_player_axis
         17:CE1F  18         			clc
         17:CE20  D0 01      			bne	!+
         17:CE22  38         			sec
         17:CE23             	!:
 6481                        		__bfalse	.LL188
         17:CE23  B0 03 4C 3E			bcc	.LL188
         17:CE27  D2          
 6482                        	
 6483                        		.dbg	line,	"include\routines_LEVELS.c", 956; {
 6484                        	
 6485                        		.dbg	line,	"include\routines_LEVELS.c", 957; player_axis = AXIS_LEFT;
 6486                        		__st.umiq	1, _player_axis
         17:CE28  A9 01      			lda.l	#1
         17:CE2A  8D 17 23   			sta	_player_axis
 6487                        	
 6488                        		.dbg	line,	"include\routines_LEVELS.c", 958; player_previous_axis = player_axis;
 6489                        		__ld.um		_player_axis
         17:CE2D  AD 17 23   			lda	_player_axis
         17:CE30  C2         			cly
 6490                        		__st.umq	_player_previous_axis
         17:CE31  8D 18 23   			sta	_player_previous_axis
 6491                        	
 6492                        		.dbg	line,	"include\routines_LEVELS.c", 960; spr_set(player_id);
 6493                        		__ld.umq	_player_id
         17:CE34  AD 15 23   			lda	_player_id
 6494                        		__call		_spr_set.1
         17:CE37  20 DD E7   			call	_spr_set.1
 6495                        	
 6496                        		.dbg	line,	"include\routines_LEVELS.c", 961; spr_ctrl(FLIP_MAS, FLIP_X);
 6497                        		__st.umiq	136, _al
         17:CE3A  A9 88      			lda.l	#136
         17:CE3C  85 F8      			sta	_al
 6498                        		__ld.uiq	8
         17:CE3E  A9 08      			lda	#8
 6499                        		__call		_spr_ctrl.2
         17:CE40  20 3C E8   			call	_spr_ctrl.2
 6500                        	
 6501                        		.dbg	line,	"include\routines_LEVELS.c", 963; spr_set(chain_id);
 6502                        		__ld.umq	_chain_id
         17:CE43  AD 22 23   			lda	_chain_id
 6503                        		__call		_spr_set.1
         17:CE46  20 DD E7   			call	_spr_set.1
 6504                        	
 6505                        		.dbg	line,	"include\routines_LEVELS.c", 964; spr_ctrl(FLIP_MAS, FLIP_X);
 6506                        		__st.umiq	136, _al
         17:CE49  A9 88      			lda.l	#136
         17:CE4B  85 F8      			sta	_al
 6507                        		__ld.uiq	8
         17:CE4D  A9 08      			lda	#8
 6508                        		__call		_spr_ctrl.2
         17:CE4F  20 3C E8   			call	_spr_ctrl.2
 6509                        	
 6510                        		.dbg	line,	"include\routines_LEVELS.c", 966; spr_set(chain_id+1);
 6511                        		__ld.um		_chain_id
         17:CE52  AD 22 23   			lda	_chain_id
         17:CE55  C2         			cly
 6512                        		__add.wi	1
         17:CE56  1A         			inc	a
         17:CE57  D0 01      			bne	!+
         17:CE59  C8         			iny
         17:CE5A             	!:
 6513                        		__call		_spr_set.1
         17:CE5A  20 DD E7   			call	_spr_set.1
 6514                        	
 6515                        		.dbg	line,	"include\routines_LEVELS.c", 967; spr_ctrl(FLIP_MAS, FLIP_X);
 6516                        		__st.umiq	136, _al
         17:CE5D  A9 88      			lda.l	#136
         17:CE5F  85 F8      			sta	_al
 6517                        		__ld.uiq	8
         17:CE61  A9 08      			lda	#8
 6518                        		__call		_spr_ctrl.2
         17:CE63  20 3C E8   			call	_spr_ctrl.2
 6519                        	
 6520                        		.dbg	line,	"include\routines_LEVELS.c", 969; spr_set(chain_id+2);
 6521                        		__ld.um		_chain_id
         17:CE66  AD 22 23   			lda	_chain_id
         17:CE69  C2         			cly
 6522                        		__add.wi	2
         17:CE6A  18         			clc
         17:CE6B  69 02      			adc.l	#2
         17:CE6D  90 01      			bcc	!+
         17:CE6F  C8         			iny
         17:CE70             	!:
 6523                        		__call		_spr_set.1
         17:CE70  20 DD E7   			call	_spr_set.1
 6524                        	
 6525                        		.dbg	line,	"include\routines_LEVELS.c", 970; spr_ctrl(FLIP_MAS, FLIP_X);
 6526                        		__st.umiq	136, _al
         17:CE73  A9 88      			lda.l	#136
         17:CE75  85 F8      			sta	_al
 6527                        		__ld.uiq	8
         17:CE77  A9 08      			lda	#8
 6528                        		__call		_spr_ctrl.2
         17:CE79  20 3C E8   			call	_spr_ctrl.2
 6529                        	
 6530                        		.dbg	line,	"include\routines_LEVELS.c", 972; spr_set(weapon_id);
 6531                        		__ld.umq	_weapon_id
         17:CE7C  AD 23 23   			lda	_weapon_id
 6532                        		__call		_spr_set.1
         17:CE7F  20 DD E7   			call	_spr_set.1
 6533                        	
 6534                        		.dbg	line,	"include\routines_LEVELS.c", 973; spr_ctrl(FLIP_MAS, FLIP_X);
 6535                        		__st.umiq	136, _al
         17:CE82  A9 88      			lda.l	#136
         17:CE84  85 F8      			sta	_al
 6536                        		__ld.uiq	8
         17:CE86  A9 08      			lda	#8
 6537                        		__call		_spr_ctrl.2
         17:CE88  20 3C E8   			call	_spr_ctrl.2
 6538                        	
 6539                        		.dbg	line,	"include\routines_LEVELS.c", 974; spr_x(player_pos_x+17);
 6540                        		__ld.wm		_player_pos_x
         17:CE8B  AD D4 24   			lda.l	_player_pos_x
         17:CE8E  AC D5 24   			ldy.h	_player_pos_x
 6541                        		__add.wi	17
         17:CE91  18         			clc
         17:CE92  69 11      			adc.l	#17
         17:CE94  90 01      			bcc	!+
         17:CE96  C8         			iny
         17:CE97             	!:
 6542                        		__call		_spr_x.1
         17:CE97  20 0A E8   			call	_spr_x.1
 6543                        	
 6544                        		.dbg	line,	"include\routines_LEVELS.c", 975; }
 6545                        	
 6546                        		.dbg	line,	"include\routines_LEVELS.c", 976; }
 6547    17:CE9A             	.LL188	.alias		.LL189
 6548                        	
 6549                        		.dbg	line,	"include\routines_LEVELS.c", 979; else if(player_state == STATE_FALL)
 6550                        		__bra		.LL189
         17:CE9A  4C 3E D2   			bra	.LL189
 6551    17:CE9D             	.LL187:
 6552                        		__ld.umq	_player_state
         17:CE9D  AD 16 23   			lda	_player_state
 6553                        		__equ_b.uiq	9
         17:CEA0  C9 09      			cmp	#9
         17:CEA2  F0 01      			beq	!+
         17:CEA4  18         			clc
         17:CEA5             	!:
 6554                        		__bfalse	.LL190
         17:CEA5  B0 03 4C 2B			bcc	.LL190
         17:CEA9  CF          
 6555                        	
 6556                        		.dbg	line,	"include\routines_LEVELS.c", 980; {
 6557                        	
 6558                        		.dbg	line,	"include\routines_LEVELS.c", 981; if(player_axis == AXIS_RIGHT)
 6559                        		__not.um	_player_axis
         17:CEAA  AD 17 23   			lda	_player_axis
         17:CEAD  18         			clc
         17:CEAE  D0 01      			bne	!+
         17:CEB0  38         			sec
         17:CEB1             	!:
 6560                        		__bfalse	.LL191
         17:CEB1  B0 03 4C 3E			bcc	.LL191
         17:CEB5  D2          
 6561                        	
 6562                        		.dbg	line,	"include\routines_LEVELS.c", 982; {
 6563                        	
 6564                        		.dbg	line,	"include\routines_LEVELS.c", 983; player_axis = AXIS_LEFT;
 6565                        		__st.umiq	1, _player_axis
         17:CEB6  A9 01      			lda.l	#1
         17:CEB8  8D 17 23   			sta	_player_axis
 6566                        	
 6567                        		.dbg	line,	"include\routines_LEVELS.c", 984; player_previous_axis = player_axis;
 6568                        		__ld.um		_player_axis
         17:CEBB  AD 17 23   			lda	_player_axis
         17:CEBE  C2         			cly
 6569                        		__st.umq	_player_previous_axis
         17:CEBF  8D 18 23   			sta	_player_previous_axis
 6570                        	
 6571                        		.dbg	line,	"include\routines_LEVELS.c", 986; spr_set(player_id);
 6572                        		__ld.umq	_player_id
         17:CEC2  AD 15 23   			lda	_player_id
 6573                        		__call		_spr_set.1
         17:CEC5  20 DD E7   			call	_spr_set.1
 6574                        	
 6575                        		.dbg	line,	"include\routines_LEVELS.c", 987; spr_ctrl(FLIP_MAS, FLIP_X);
 6576                        		__st.umiq	136, _al
         17:CEC8  A9 88      			lda.l	#136
         17:CECA  85 F8      			sta	_al
 6577                        		__ld.uiq	8
         17:CECC  A9 08      			lda	#8
 6578                        		__call		_spr_ctrl.2
         17:CECE  20 3C E8   			call	_spr_ctrl.2
 6579                        	
 6580                        		.dbg	line,	"include\routines_LEVELS.c", 989; spr_set(chain_id);
 6581                        		__ld.umq	_chain_id
         17:CED1  AD 22 23   			lda	_chain_id
 6582                        		__call		_spr_set.1
         17:CED4  20 DD E7   			call	_spr_set.1
 6583                        	
 6584                        		.dbg	line,	"include\routines_LEVELS.c", 990; spr_ctrl(FLIP_MAS, FLIP_X);
 6585                        		__st.umiq	136, _al
         17:CED7  A9 88      			lda.l	#136
         17:CED9  85 F8      			sta	_al
 6586                        		__ld.uiq	8
         17:CEDB  A9 08      			lda	#8
 6587                        		__call		_spr_ctrl.2
         17:CEDD  20 3C E8   			call	_spr_ctrl.2
 6588                        	
 6589                        		.dbg	line,	"include\routines_LEVELS.c", 992; spr_set(chain_id+1);
 6590                        		__ld.um		_chain_id
         17:CEE0  AD 22 23   			lda	_chain_id
         17:CEE3  C2         			cly
 6591                        		__add.wi	1
         17:CEE4  1A         			inc	a
         17:CEE5  D0 01      			bne	!+
         17:CEE7  C8         			iny
         17:CEE8             	!:
 6592                        		__call		_spr_set.1
         17:CEE8  20 DD E7   			call	_spr_set.1
 6593                        	
 6594                        		.dbg	line,	"include\routines_LEVELS.c", 993; spr_ctrl(FLIP_MAS, FLIP_X);
 6595                        		__st.umiq	136, _al
         17:CEEB  A9 88      			lda.l	#136
         17:CEED  85 F8      			sta	_al
 6596                        		__ld.uiq	8
         17:CEEF  A9 08      			lda	#8
 6597                        		__call		_spr_ctrl.2
         17:CEF1  20 3C E8   			call	_spr_ctrl.2
 6598                        	
 6599                        		.dbg	line,	"include\routines_LEVELS.c", 995; spr_set(chain_id+2);
 6600                        		__ld.um		_chain_id
         17:CEF4  AD 22 23   			lda	_chain_id
         17:CEF7  C2         			cly
 6601                        		__add.wi	2
         17:CEF8  18         			clc
         17:CEF9  69 02      			adc.l	#2
         17:CEFB  90 01      			bcc	!+
         17:CEFD  C8         			iny
         17:CEFE             	!:
 6602                        		__call		_spr_set.1
         17:CEFE  20 DD E7   			call	_spr_set.1
 6603                        	
 6604                        		.dbg	line,	"include\routines_LEVELS.c", 996; spr_ctrl(FLIP_MAS, FLIP_X);
 6605                        		__st.umiq	136, _al
         17:CF01  A9 88      			lda.l	#136
         17:CF03  85 F8      			sta	_al
 6606                        		__ld.uiq	8
         17:CF05  A9 08      			lda	#8
 6607                        		__call		_spr_ctrl.2
         17:CF07  20 3C E8   			call	_spr_ctrl.2
 6608                        	
 6609                        		.dbg	line,	"include\routines_LEVELS.c", 998; spr_set(weapon_id);
 6610                        		__ld.umq	_weapon_id
         17:CF0A  AD 23 23   			lda	_weapon_id
 6611                        		__call		_spr_set.1
         17:CF0D  20 DD E7   			call	_spr_set.1
 6612                        	
 6613                        		.dbg	line,	"include\routines_LEVELS.c", 999; spr_ctrl(FLIP_MAS, FLIP_X);
 6614                        		__st.umiq	136, _al
         17:CF10  A9 88      			lda.l	#136
         17:CF12  85 F8      			sta	_al
 6615                        		__ld.uiq	8
         17:CF14  A9 08      			lda	#8
 6616                        		__call		_spr_ctrl.2
         17:CF16  20 3C E8   			call	_spr_ctrl.2
 6617                        	
 6618                        		.dbg	line,	"include\routines_LEVELS.c", 1000; spr_x(player_pos_x+20);
 6619                        		__ld.wm		_player_pos_x
         17:CF19  AD D4 24   			lda.l	_player_pos_x
         17:CF1C  AC D5 24   			ldy.h	_player_pos_x
 6620                        		__add.wi	20
         17:CF1F  18         			clc
         17:CF20  69 14      			adc.l	#20
         17:CF22  90 01      			bcc	!+
         17:CF24  C8         			iny
         17:CF25             	!:
 6621                        		__call		_spr_x.1
         17:CF25  20 0A E8   			call	_spr_x.1
 6622                        	
 6623                        		.dbg	line,	"include\routines_LEVELS.c", 1001; }
 6624                        	
 6625                        		.dbg	line,	"include\routines_LEVELS.c", 1002; }
 6626    17:CF28             	.LL191	.alias		.LL192
 6627                        	
 6628                        		.dbg	line,	"include\routines_LEVELS.c", 1004; 
 6629                        	
 6630                        		.dbg	line,	"include\routines_LEVELS.c", 1005; else if(player_state == STATE_HANG)
 6631                        		__bra		.LL192
         17:CF28  4C 3E D2   			bra	.LL192
 6632    17:CF2B             	.LL190:
 6633                        		__ld.umq	_player_state
         17:CF2B  AD 16 23   			lda	_player_state
 6634                        		__equ_b.uiq	10
         17:CF2E  C9 0A      			cmp	#10
         17:CF30  F0 01      			beq	!+
         17:CF32  18         			clc
         17:CF33             	!:
 6635                        		__bfalse	.LL193
         17:CF33  B0 03 4C B9			bcc	.LL193
         17:CF37  CF          
 6636                        	
 6637                        		.dbg	line,	"include\routines_LEVELS.c", 1006; {
 6638                        	
 6639                        		.dbg	line,	"include\routines_LEVELS.c", 1007; if(player_axis == AXIS_RIGHT)
 6640                        		__not.um	_player_axis
         17:CF38  AD 17 23   			lda	_player_axis
         17:CF3B  18         			clc
         17:CF3C  D0 01      			bne	!+
         17:CF3E  38         			sec
         17:CF3F             	!:
 6641                        		__bfalse	.LL194
         17:CF3F  B0 03 4C 3E			bcc	.LL194
         17:CF43  D2          
 6642                        	
 6643                        		.dbg	line,	"include\routines_LEVELS.c", 1008; {
 6644                        	
 6645                        		.dbg	line,	"include\routines_LEVELS.c", 1009; player_axis = AXIS_LEFT;
 6646                        		__st.umiq	1, _player_axis
         17:CF44  A9 01      			lda.l	#1
         17:CF46  8D 17 23   			sta	_player_axis
 6647                        	
 6648                        		.dbg	line,	"include\routines_LEVELS.c", 1010; player_previous_axis = player_axis;
 6649                        		__ld.um		_player_axis
         17:CF49  AD 17 23   			lda	_player_axis
         17:CF4C  C2         			cly
 6650                        		__st.umq	_player_previous_axis
         17:CF4D  8D 18 23   			sta	_player_previous_axis
 6651                        	
 6652                        		.dbg	line,	"include\routines_LEVELS.c", 1012; spr_set(player_id);
 6653                        		__ld.umq	_player_id
         17:CF50  AD 15 23   			lda	_player_id
 6654                        		__call		_spr_set.1
         17:CF53  20 DD E7   			call	_spr_set.1
 6655                        	
 6656                        		.dbg	line,	"include\routines_LEVELS.c", 1013; spr_ctrl(FLIP_MAS, FLIP_X);
 6657                        		__st.umiq	136, _al
         17:CF56  A9 88      			lda.l	#136
         17:CF58  85 F8      			sta	_al
 6658                        		__ld.uiq	8
         17:CF5A  A9 08      			lda	#8
 6659                        		__call		_spr_ctrl.2
         17:CF5C  20 3C E8   			call	_spr_ctrl.2
 6660                        	
 6661                        		.dbg	line,	"include\routines_LEVELS.c", 1015; spr_set(chain_id);
 6662                        		__ld.umq	_chain_id
         17:CF5F  AD 22 23   			lda	_chain_id
 6663                        		__call		_spr_set.1
         17:CF62  20 DD E7   			call	_spr_set.1
 6664                        	
 6665                        		.dbg	line,	"include\routines_LEVELS.c", 1016; spr_ctrl(FLIP_MAS, FLIP_X);
 6666                        		__st.umiq	136, _al
         17:CF65  A9 88      			lda.l	#136
         17:CF67  85 F8      			sta	_al
 6667                        		__ld.uiq	8
         17:CF69  A9 08      			lda	#8
 6668                        		__call		_spr_ctrl.2
         17:CF6B  20 3C E8   			call	_spr_ctrl.2
 6669                        	
 6670                        		.dbg	line,	"include\routines_LEVELS.c", 1018; spr_set(chain_id+1);
 6671                        		__ld.um		_chain_id
         17:CF6E  AD 22 23   			lda	_chain_id
         17:CF71  C2         			cly
 6672                        		__add.wi	1
         17:CF72  1A         			inc	a
         17:CF73  D0 01      			bne	!+
         17:CF75  C8         			iny
         17:CF76             	!:
 6673                        		__call		_spr_set.1
         17:CF76  20 DD E7   			call	_spr_set.1
 6674                        	
 6675                        		.dbg	line,	"include\routines_LEVELS.c", 1019; spr_ctrl(FLIP_MAS, FLIP_X);
 6676                        		__st.umiq	136, _al
         17:CF79  A9 88      			lda.l	#136
         17:CF7B  85 F8      			sta	_al
 6677                        		__ld.uiq	8
         17:CF7D  A9 08      			lda	#8
 6678                        		__call		_spr_ctrl.2
         17:CF7F  20 3C E8   			call	_spr_ctrl.2
 6679                        	
 6680                        		.dbg	line,	"include\routines_LEVELS.c", 1021; spr_set(chain_id+2);
 6681                        		__ld.um		_chain_id
         17:CF82  AD 22 23   			lda	_chain_id
         17:CF85  C2         			cly
 6682                        		__add.wi	2
         17:CF86  18         			clc
         17:CF87  69 02      			adc.l	#2
         17:CF89  90 01      			bcc	!+
         17:CF8B  C8         			iny
         17:CF8C             	!:
 6683                        		__call		_spr_set.1
         17:CF8C  20 DD E7   			call	_spr_set.1
 6684                        	
 6685                        		.dbg	line,	"include\routines_LEVELS.c", 1022; spr_ctrl(FLIP_MAS, FLIP_X);
 6686                        		__st.umiq	136, _al
         17:CF8F  A9 88      			lda.l	#136
         17:CF91  85 F8      			sta	_al
 6687                        		__ld.uiq	8
         17:CF93  A9 08      			lda	#8
 6688                        		__call		_spr_ctrl.2
         17:CF95  20 3C E8   			call	_spr_ctrl.2
 6689                        	
 6690                        		.dbg	line,	"include\routines_LEVELS.c", 1024; spr_set(weapon_id);
 6691                        		__ld.umq	_weapon_id
         17:CF98  AD 23 23   			lda	_weapon_id
 6692                        		__call		_spr_set.1
         17:CF9B  20 DD E7   			call	_spr_set.1
 6693                        	
 6694                        		.dbg	line,	"include\routines_LEVELS.c", 1025; spr_ctrl(FLIP_MAS, FLIP_X);
 6695                        		__st.umiq	136, _al
         17:CF9E  A9 88      			lda.l	#136
         17:CFA0  85 F8      			sta	_al
 6696                        		__ld.uiq	8
         17:CFA2  A9 08      			lda	#8
 6697                        		__call		_spr_ctrl.2
         17:CFA4  20 3C E8   			call	_spr_ctrl.2
 6698                        	
 6699                        		.dbg	line,	"include\routines_LEVELS.c", 1026; spr_x(player_pos_x-2);
 6700                        		__ld.wm		_player_pos_x
         17:CFA7  AD D4 24   			lda.l	_player_pos_x
         17:CFAA  AC D5 24   			ldy.h	_player_pos_x
 6701                        		__sub.wi	2
         17:CFAD  38         			sec
         17:CFAE  E9 02      			sbc.l	#2
         17:CFB0  B0 01      			bcs	!+
         17:CFB2  88         			dey
         17:CFB3             	!:
 6702                        		__call		_spr_x.1
         17:CFB3  20 0A E8   			call	_spr_x.1
 6703                        	
 6704                        		.dbg	line,	"include\routines_LEVELS.c", 1027; }
 6705                        	
 6706                        		.dbg	line,	"include\routines_LEVELS.c", 1028; }
 6707    17:CFB6             	.LL194	.alias		.LL195
 6708                        	
 6709                        		.dbg	line,	"include\routines_LEVELS.c", 1031; else if(player_state == STATE_CLIMB_UP || player_state == STATE_CLIMB_DOWN)
 6710                        		__bra		.LL195
         17:CFB6  4C 3E D2   			bra	.LL195
 6711    17:CFB9             	.LL193:
 6712                        		__ld.umq	_player_state
         17:CFB9  AD 16 23   			lda	_player_state
 6713                        		__equ_b.uiq	11
         17:CFBC  C9 0B      			cmp	#11
         17:CFBE  F0 01      			beq	!+
         17:CFC0  18         			clc
         17:CFC1             	!:
 6714                        		__btrue		.LL197
         17:CFC1  B0 08      			bcs	.LL197
 6715                        		__ld.umq	_player_state
         17:CFC3  AD 16 23   			lda	_player_state
 6716                        		__equ_b.uiq	12
         17:CFC6  C9 0C      			cmp	#12
         17:CFC8  F0 01      			beq	!+
         17:CFCA  18         			clc
         17:CFCB             	!:
 6717    17:CFCB             	.LL197:
 6718                        		__bfalse	.LL196
         17:CFCB  B0 03 4C 3E			bcc	.LL196
         17:CFCF  D2          
 6719                        	
 6720                        		.dbg	line,	"include\routines_LEVELS.c", 1032; {
 6721                        	
 6722                        		.dbg	line,	"include\routines_LEVELS.c", 1033; spr_set(player_id);
 6723                        		__ld.umq	_player_id
         17:CFD0  AD 15 23   			lda	_player_id
 6724                        		__call		_spr_set.1
         17:CFD3  20 DD E7   			call	_spr_set.1
 6725                        	
 6726                        		.dbg	line,	"include\routines_LEVELS.c", 1034; spr_pattern(PLAYER_HANG_VRAM_ADR);
 6727                        		__ld.wi		7424
         17:CFD6  62         			cla
         17:CFD7  A0 1D      			ldy.h	#7424
 6728                        		__call		_spr_pattern.1
         17:CFD9  20 26 E8   			call	_spr_pattern.1
 6729                        	
 6730                        		.dbg	line,	"include\routines_LEVELS.c", 1035; player_counter_anim = 0;
 6731                        		__st.umiq	0, _player_counter_anim
         17:CFDC  9C 19 23   			stz	_player_counter_anim
 6732                        	
 6733                        		.dbg	line,	"include\routines_LEVELS.c", 1036; player_state = STATE_HANG;
 6734                        		__st.umiq	10, _player_state
         17:CFDF  A9 0A      			lda.l	#10
         17:CFE1  8D 16 23   			sta	_player_state
 6735                        	
 6736                        		.dbg	line,	"include\routines_LEVELS.c", 1037; }
 6737                        	
 6738                        		.dbg	line,	"include\routines_LEVELS.c", 1038; }
 6739    17:CFE4             	.LL196	.alias		.LL198
 6740    17:CFE4             	.LL195	.alias		.LL198
 6741    17:CFE4             	.LL192	.alias		.LL198
 6742    17:CFE4             	.LL189	.alias		.LL198
 6743    17:CFE4             	.LL186	.alias		.LL198
 6744    17:CFE4             	.LL183	.alias		.LL198
 6745    17:CFE4             	.LL178	.alias		.LL198
 6746                        	
 6747                        		.dbg	line,	"include\routines_LEVELS.c", 1041; //--------------------------------------------------------------------------------------//
 6748                        	
 6749                        		.dbg	line,	"include\routines_LEVELS.c", 1042; //                                      UP BUTTON                                       //
 6750                        	
 6751                        		.dbg	line,	"include\routines_LEVELS.c", 1043; //--------------------------------------------------------------------------------------//
 6752                        	
 6753                        		.dbg	line,	"include\routines_LEVELS.c", 1045; else if(joy(JOYPAD_1) & JOY_UP)
 6754                        		__bra		.LL198
         17:CFE4  4C 3E D2   			bra	.LL198
 6755    17:CFE7             	.LL173:
 6756                        		__ld.uiq	0
         17:CFE7  62         			cla
 6757                        		 _joy.1
         17:CFE8  AA         			tax
         17:CFE9  BD 28 22   			lda	joynow, x
         17:CFEC  BC D3 22   			ldy	joy6now, x
 6758                        		__tand.wi	16
         17:CFEF  29 10      			and	#16
         17:CFF1  C9 01      	!:		cmp	#1
 6759                        		__bfalse	.LL199
         17:CFF3  B0 03 4C D1			bcc	.LL199
         17:CFF7  D0          
 6760                        	
 6761                        		.dbg	line,	"include\routines_LEVELS.c", 1046; {
 6762                        	
 6763                        		.dbg	line,	"include\routines_LEVELS.c", 1047; if(player_state == STATE_HANG || player_state == STATE_CLIMB_UP || player_state == STATE_CLIMB_DOWN)
 6764                        		__ld.umq	_player_state
         17:CFF8  AD 16 23   			lda	_player_state
 6765                        		__equ_b.uiq	10
         17:CFFB  C9 0A      			cmp	#10
         17:CFFD  F0 01      			beq	!+
         17:CFFF  18         			clc
         17:D000             	!:
 6766                        		__btrue		.LL201
         17:D000  B0 08      			bcs	.LL201
 6767                        		__ld.umq	_player_state
         17:D002  AD 16 23   			lda	_player_state
 6768                        		__equ_b.uiq	11
         17:D005  C9 0B      			cmp	#11
         17:D007  F0 01      			beq	!+
         17:D009  18         			clc
         17:D00A             	!:
 6769    17:D00A             	.LL201:
 6770                        		__btrue		.LL202
         17:D00A  B0 08      			bcs	.LL202
 6771                        		__ld.umq	_player_state
         17:D00C  AD 16 23   			lda	_player_state
 6772                        		__equ_b.uiq	12
         17:D00F  C9 0C      			cmp	#12
         17:D011  F0 01      			beq	!+
         17:D013  18         			clc
         17:D014             	!:
 6773    17:D014             	.LL202:
 6774                        		__bfalse	.LL200
         17:D014  B0 03 4C 3E			bcc	.LL200
         17:D018  D2          
 6775                        	
 6776                        		.dbg	line,	"include\routines_LEVELS.c", 1048; {
 6777                        	
 6778                        		.dbg	line,	"include\routines_LEVELS.c", 1049; if(player_attack == FALSE)
 6779                        		__not.um	_player_attack
         17:D019  AD 1E 23   			lda	_player_attack
         17:D01C  18         			clc
         17:D01D  D0 01      			bne	!+
         17:D01F  38         			sec
         17:D020             	!:
 6780                        		__bfalse	.LL203
         17:D020  B0 03 4C 3E			bcc	.LL203
         17:D024  D2          
 6781                        	
 6782                        		.dbg	line,	"include\routines_LEVELS.c", 1050; {
 6783                        	
 6784                        		.dbg	line,	"include\routines_LEVELS.c", 1051; unsigned char i;
 6785                        	
 6786                        		.dbg	line,	"include\routines_LEVELS.c", 1053; check_BG( 15 , 8 );
 6787                        		__ld.wi		15
         17:D025  A9 0F      			lda.l	#15
         17:D027  C2         			cly
 6788                        		__pusharg.wr
         17:D028  A6 8D      			ldx	<__sp
         17:D02A  CA         			dex
         17:D02B  CA         			dex
         17:D02C  95 08      			sta.l	<__stack, x
         17:D02E  94 09      			sty.h	<__stack, x
         17:D030  86 8D      			stx	<__sp
 6789                        		__ld.wi		8
         17:D032  A9 08      			lda.l	#8
         17:D034  C2         			cly
 6790                        		__pusharg.wr
         17:D035  A6 8D      			ldx	<__sp
         17:D037  CA         			dex
         17:D038  CA         			dex
         17:D039  95 08      			sta.l	<__stack, x
         17:D03B  94 09      			sty.h	<__stack, x
         17:D03D  86 8D      			stx	<__sp
 6791                        		__call		_check_BG
         17:D03F  20 6D FF   			call	_check_BG
 6792                        	
 6793                        		.dbg	line,	"include\routines_LEVELS.c", 1055; if(map_blk_flag == TILE_EMPTY)
 6794                        		__not.um	_map_blk_flag
         17:D042  AD B1 2B   			lda	_map_blk_flag
         17:D045  18         			clc
         17:D046  D0 01      			bne	!+
         17:D048  38         			sec
         17:D049             	!:
 6795                        		__bfalse	.LL204
         17:D049  90 67      			bcc	.LL204
 6796                        	
 6797                        		.dbg	line,	"include\routines_LEVELS.c", 1056; {
 6798                        	
 6799                        		.dbg	line,	"include\routines_LEVELS.c", 1057; for(i=1 ; i<3 ; i++)
 6800                        		__st.umiq	1, __joypad_DIR_end - 1  /* i */
         17:D04B  A9 01      			lda.l	#1
         17:D04D  8D 04 23   			sta	__joypad_DIR_end - 1
 6801    17:D050             	.LL205:
 6802                        		__ld.umq	__joypad_DIR_end - 1  /* i */
         17:D050  AD 04 23   			lda	__joypad_DIR_end - 1
 6803                        		__ult_b.uiq	3
         17:D053  C9 03      			cmp	#3		; Subtract integer from A.
         17:D055  6A         			ror	a		; CC if A < integer.
         17:D056  49 80      			eor	#$80
         17:D058  2A         			rol	a
 6804                        		__btrue		.LL207
         17:D059  B0 07      			bcs	.LL207
 6805                        		__bra		.LL208
         17:D05B  80 63      			bra	.LL208
 6806    17:D05D             	.LL206:
 6807                        		__inc.umq	__joypad_DIR_end - 1  /* i */
         17:D05D  EE 04 23   			inc	__joypad_DIR_end - 1
 6808                        		__bra		.LL205
         17:D060  80 EE      			bra	.LL205
 6809    17:D062             	.LL207:
 6810                        	
 6811                        		.dbg	line,	"include\routines_LEVELS.c", 1058; {
 6812                        	
 6813                        		.dbg	line,	"include\routines_LEVELS.c", 1059; check_BG( 15 , 8 + i );
 6814                        		__ld.wi		15
         17:D062  A9 0F      			lda.l	#15
         17:D064  C2         			cly
 6815                        		__pusharg.wr
         17:D065  A6 8D      			ldx	<__sp
         17:D067  CA         			dex
         17:D068  CA         			dex
         17:D069  95 08      			sta.l	<__stack, x
         17:D06B  94 09      			sty.h	<__stack, x
         17:D06D  86 8D      			stx	<__sp
 6816                        		__ld.wi		8
         17:D06F  A9 08      			lda.l	#8
         17:D071  C2         			cly
 6817                        		__add.um	__joypad_DIR_end - 1  /* i */
         17:D072  18         			clc
         17:D073  6D 04 23   			adc	__joypad_DIR_end - 1
         17:D076  90 01      			bcc	!+
         17:D078  C8         			iny
         17:D079             	!:
 6818                        		__pusharg.wr
         17:D079  A6 8D      			ldx	<__sp
         17:D07B  CA         			dex
         17:D07C  CA         			dex
         17:D07D  95 08      			sta.l	<__stack, x
         17:D07F  94 09      			sty.h	<__stack, x
         17:D081  86 8D      			stx	<__sp
 6819                        		__call		_check_BG
         17:D083  20 6D FF   			call	_check_BG
 6820                        	
 6821                        		.dbg	line,	"include\routines_LEVELS.c", 1061; if(map_blk_flag == TILE_LADDER)
 6822                        		__ld.umq	_map_blk_flag
         17:D086  AD B1 2B   			lda	_map_blk_flag
 6823                        		__equ_b.uiq	2
         17:D089  C9 02      			cmp	#2
         17:D08B  F0 01      			beq	!+
         17:D08D  18         			clc
         17:D08E             	!:
 6824                        		__bfalse	.LL209
         17:D08E  90 CD      			bcc	.LL209
 6825                        	
 6826                        		.dbg	line,	"include\routines_LEVELS.c", 1062; {
 6827                        	
 6828                        		.dbg	line,	"include\routines_LEVELS.c", 1063; sgx_map_pxl_y -= (2 - i);
 6829                        		__ld.wi		2
         17:D090  A9 02      			lda.l	#2
         17:D092  C2         			cly
 6830                        		__sub.um	__joypad_DIR_end - 1  /* i */
         17:D093  38         			sec
         17:D094  ED 04 23   			sbc	__joypad_DIR_end - 1
         17:D097  B0 01      			bcs	!+
         17:D099  88         			dey
         17:D09A             	!:
 6831                        		__isub_st.wmq	_sgx_map_pxl_y
         17:D09A  38         			sec
         17:D09B  49 FF      			eor	#$FF
         17:D09D  6D 92 26   			adc.l	_sgx_map_pxl_y
         17:D0A0  8D 92 26   			sta.l	_sgx_map_pxl_y
         17:D0A3  98         			tya
         17:D0A4  49 FF      			eor	#$FF
         17:D0A6  6D 93 26   			adc.h	_sgx_map_pxl_y
         17:D0A9  8D 93 26   			sta.h	_sgx_map_pxl_y
 6832                        	
 6833                        		.dbg	line,	"include\routines_LEVELS.c", 1064; break;
 6834                        		__bra		.LL208
         17:D0AC  80 12      			bra	.LL208
 6835                        	
 6836                        		.dbg	line,	"include\routines_LEVELS.c", 1065; }
 6837                        	
 6838                        		.dbg	line,	"include\routines_LEVELS.c", 1066; }
 6839    17:D0AE             	.LL209	.alias		.LL206
 6840                        		__bra		.LL206
         17:D0AE  80 AD      			bra	.LL206
 6841    17:D0B0             	.LL208	.alias		.LL210
 6842                        	
 6843                        		.dbg	line,	"include\routines_LEVELS.c", 1067; }
 6844                        	
 6845                        		.dbg	line,	"include\routines_LEVELS.c", 1069; else
 6846                        		__bra		.LL210
         17:D0B0  80 0E      			bra	.LL210
 6847    17:D0B2             	.LL204:
 6848                        	
 6849                        		.dbg	line,	"include\routines_LEVELS.c", 1070; {
 6850                        	
 6851                        		.dbg	line,	"include\routines_LEVELS.c", 1071; sgx_map_pxl_y -= 2;
 6852                        		__sub_st.wmiq	2, _sgx_map_pxl_y
         17:D0B2  38         			sec
         17:D0B3  AD 92 26   			lda.l	_sgx_map_pxl_y
         17:D0B6  E9 02      			sbc.l	#2
         17:D0B8  8D 92 26   			sta.l	_sgx_map_pxl_y
         17:D0BB  B0 03      			bcs	!+
         17:D0BD  CE 93 26   			dec.h	_sgx_map_pxl_y
         17:D0C0             	!:
 6853                        	
 6854                        		.dbg	line,	"include\routines_LEVELS.c", 1072; }
 6855    17:D0C0             	.LL210:
 6856                        	
 6857                        		.dbg	line,	"include\routines_LEVELS.c", 1074; spr_set(weapon_id);
 6858                        		__ld.umq	_weapon_id
         17:D0C0  AD 23 23   			lda	_weapon_id
 6859                        		__call		_spr_set.1
         17:D0C3  20 DD E7   			call	_spr_set.1
 6860                        	
 6861                        		.dbg	line,	"include\routines_LEVELS.c", 1075; spr_hide();
 6862                        		__call		_spr_hide
         17:D0C6  20 F8 E7   			call	_spr_hide
 6863                        	
 6864                        		.dbg	line,	"include\routines_LEVELS.c", 1077; player_state = STATE_CLIMB_UP;
 6865                        		__st.umiq	11, _player_state
         17:D0C9  A9 0B      			lda.l	#11
         17:D0CB  8D 16 23   			sta	_player_state
 6866                        	
 6867                        		.dbg	line,	"include\routines_LEVELS.c", 1078; }
 6868                        	
 6869                        		.dbg	line,	"include\routines_LEVELS.c", 1079; }
 6870    17:D0CE             	.LL203	.alias		.LL211
 6871                        	
 6872                        		.dbg	line,	"include\routines_LEVELS.c", 1080; }
 6873    17:D0CE             	.LL200	.alias		.LL211
 6874                        	
 6875                        		.dbg	line,	"include\routines_LEVELS.c", 1083; //--------------------------------------------------------------------------------------//
 6876                        	
 6877                        		.dbg	line,	"include\routines_LEVELS.c", 1084; //                                     DOWN BUTTON                                      //
 6878                        	
 6879                        		.dbg	line,	"include\routines_LEVELS.c", 1085; //--------------------------------------------------------------------------------------//
 6880                        	
 6881                        		.dbg	line,	"include\routines_LEVELS.c", 1087; else if(joy(JOYPAD_1) & JOY_DOWN)
 6882                        		__bra		.LL211
         17:D0CE  4C 3E D2   			bra	.LL211
 6883    17:D0D1             	.LL199:
 6884                        		__ld.uiq	0
         17:D0D1  62         			cla
 6885                        		 _joy.1
         17:D0D2  AA         			tax
         17:D0D3  BD 28 22   			lda	joynow, x
         17:D0D6  BC D3 22   			ldy	joy6now, x
 6886                        		__tand.wi	64
         17:D0D9  29 40      			and	#64
         17:D0DB  C9 01      	!:		cmp	#1
 6887                        		__bfalse	.LL212
         17:D0DD  B0 03 4C 3E			bcc	.LL212
         17:D0E1  D2          
 6888                        	
 6889                        		.dbg	line,	"include\routines_LEVELS.c", 1088; {
 6890                        	
 6891                        		.dbg	line,	"include\routines_LEVELS.c", 1089; if(player_state == STATE_IDLE || player_state == STATE_WALK)
 6892                        		__not.um	_player_state
         17:D0E2  AD 16 23   			lda	_player_state
         17:D0E5  18         			clc
         17:D0E6  D0 01      			bne	!+
         17:D0E8  38         			sec
         17:D0E9             	!:
 6893                        		__btrue		.LL214
         17:D0E9  B0 08      			bcs	.LL214
 6894                        		__ld.umq	_player_state
         17:D0EB  AD 16 23   			lda	_player_state
 6895                        		__equ_b.uiq	1
         17:D0EE  C9 01      			cmp	#1
         17:D0F0  F0 01      			beq	!+
         17:D0F2  18         			clc
         17:D0F3             	!:
 6896    17:D0F3             	.LL214:
 6897                        		__bfalse	.LL213
         17:D0F3  90 0D      			bcc	.LL213
 6898                        	
 6899                        		.dbg	line,	"include\routines_LEVELS.c", 1090; {
 6900                        	
 6901                        		.dbg	line,	"include\routines_LEVELS.c", 1091; player_counter_anim = 1;
 6902                        		__st.umiq	1, _player_counter_anim
         17:D0F5  A9 01      			lda.l	#1
         17:D0F7  8D 19 23   			sta	_player_counter_anim
 6903                        	
 6904                        		.dbg	line,	"include\routines_LEVELS.c", 1092; player_state = STATE_CROUCH;
 6905                        		__st.umiq	7, _player_state
         17:D0FA  A9 07      			lda.l	#7
         17:D0FC  8D 16 23   			sta	_player_state
 6906                        	
 6907                        		.dbg	line,	"include\routines_LEVELS.c", 1093; }
 6908                        	
 6909                        		.dbg	line,	"include\routines_LEVELS.c", 1096; else if(player_state == STATE_HANG || player_state == STATE_CLIMB_UP || player_state == STATE_CLIMB_DOWN)
 6910                        		__bra		.LL215
         17:D0FF  4C 3E D2   			bra	.LL215
 6911    17:D102             	.LL213:
 6912                        		__ld.umq	_player_state
         17:D102  AD 16 23   			lda	_player_state
 6913                        		__equ_b.uiq	10
         17:D105  C9 0A      			cmp	#10
         17:D107  F0 01      			beq	!+
         17:D109  18         			clc
         17:D10A             	!:
 6914                        		__btrue		.LL217
         17:D10A  B0 08      			bcs	.LL217
 6915                        		__ld.umq	_player_state
         17:D10C  AD 16 23   			lda	_player_state
 6916                        		__equ_b.uiq	11
         17:D10F  C9 0B      			cmp	#11
         17:D111  F0 01      			beq	!+
         17:D113  18         			clc
         17:D114             	!:
 6917    17:D114             	.LL217:
 6918                        		__btrue		.LL218
         17:D114  B0 08      			bcs	.LL218
 6919                        		__ld.umq	_player_state
         17:D116  AD 16 23   			lda	_player_state
 6920                        		__equ_b.uiq	12
         17:D119  C9 0C      			cmp	#12
         17:D11B  F0 01      			beq	!+
         17:D11D  18         			clc
         17:D11E             	!:
 6921    17:D11E             	.LL218:
 6922                        		__bfalse	.LL216
         17:D11E  B0 03 4C 3E			bcc	.LL216
         17:D122  D2          
 6923                        	
 6924                        		.dbg	line,	"include\routines_LEVELS.c", 1097; {
 6925                        	
 6926                        		.dbg	line,	"include\routines_LEVELS.c", 1098; if(player_attack == FALSE)
 6927                        		__not.um	_player_attack
         17:D123  AD 1E 23   			lda	_player_attack
         17:D126  18         			clc
         17:D127  D0 01      			bne	!+
         17:D129  38         			sec
         17:D12A             	!:
 6928                        		__bfalse	.LL219
         17:D12A  B0 03 4C 3E			bcc	.LL219
         17:D12E  D2          
 6929                        	
 6930                        		.dbg	line,	"include\routines_LEVELS.c", 1099; {
 6931                        	
 6932                        		.dbg	line,	"include\routines_LEVELS.c", 1100; unsigned char i;
 6933                        	
 6934                        		.dbg	line,	"include\routines_LEVELS.c", 1102; check_BG( 15 , 10 );
 6935                        		__ld.wi		15
         17:D12F  A9 0F      			lda.l	#15
         17:D131  C2         			cly
 6936                        		__pusharg.wr
         17:D132  A6 8D      			ldx	<__sp
         17:D134  CA         			dex
         17:D135  CA         			dex
         17:D136  95 08      			sta.l	<__stack, x
         17:D138  94 09      			sty.h	<__stack, x
         17:D13A  86 8D      			stx	<__sp
 6937                        		__ld.wi		10
         17:D13C  A9 0A      			lda.l	#10
         17:D13E  C2         			cly
 6938                        		__pusharg.wr
         17:D13F  A6 8D      			ldx	<__sp
         17:D141  CA         			dex
         17:D142  CA         			dex
         17:D143  95 08      			sta.l	<__stack, x
         17:D145  94 09      			sty.h	<__stack, x
         17:D147  86 8D      			stx	<__sp
 6939                        		__call		_check_BG
         17:D149  20 6D FF   			call	_check_BG
 6940                        	
 6941                        		.dbg	line,	"include\routines_LEVELS.c", 1104; if(map_blk_flag == TILE_EMPTY)
 6942                        		__not.um	_map_blk_flag
         17:D14C  AD B1 2B   			lda	_map_blk_flag
         17:D14F  18         			clc
         17:D150  D0 01      			bne	!+
         17:D152  38         			sec
         17:D153             	!:
 6943                        		__bfalse	.LL220
         17:D153  B0 03 4C 22			bcc	.LL220
         17:D157  D2          
 6944                        	
 6945                        		.dbg	line,	"include\routines_LEVELS.c", 1105; {
 6946                        	
 6947                        		.dbg	line,	"include\routines_LEVELS.c", 1106; for(i=1 ; i<3 ; i++)
 6948                        		__st.umiq	1, __joypad_DIR_end - 2  /* i */
         17:D158  A9 01      			lda.l	#1
         17:D15A  8D 03 23   			sta	__joypad_DIR_end - 2
 6949    17:D15D             	.LL221:
 6950                        		__ld.umq	__joypad_DIR_end - 2  /* i */
         17:D15D  AD 03 23   			lda	__joypad_DIR_end - 2
 6951                        		__ult_b.uiq	3
         17:D160  C9 03      			cmp	#3		; Subtract integer from A.
         17:D162  6A         			ror	a		; CC if A < integer.
         17:D163  49 80      			eor	#$80
         17:D165  2A         			rol	a
 6952                        		__btrue		.LL223
         17:D166  B0 08      			bcs	.LL223
 6953                        		__bra		.LL224
         17:D168  4C 3E D2   			bra	.LL224
 6954    17:D16B             	.LL222:
 6955                        		__inc.umq	__joypad_DIR_end - 2  /* i */
         17:D16B  EE 03 23   			inc	__joypad_DIR_end - 2
 6956                        		__bra		.LL221
         17:D16E  80 ED      			bra	.LL221
 6957    17:D170             	.LL223:
 6958                        	
 6959                        		.dbg	line,	"include\routines_LEVELS.c", 1107; {
 6960                        	
 6961                        		.dbg	line,	"include\routines_LEVELS.c", 1108; check_BG( 15 , 22 + i );
 6962                        		__ld.wi		15
         17:D170  A9 0F      			lda.l	#15
         17:D172  C2         			cly
 6963                        		__pusharg.wr
         17:D173  A6 8D      			ldx	<__sp
         17:D175  CA         			dex
         17:D176  CA         			dex
         17:D177  95 08      			sta.l	<__stack, x
         17:D179  94 09      			sty.h	<__stack, x
         17:D17B  86 8D      			stx	<__sp
 6964                        		__ld.wi		22
         17:D17D  A9 16      			lda.l	#22
         17:D17F  C2         			cly
 6965                        		__add.um	__joypad_DIR_end - 2  /* i */
         17:D180  18         			clc
         17:D181  6D 03 23   			adc	__joypad_DIR_end - 2
         17:D184  90 01      			bcc	!+
         17:D186  C8         			iny
         17:D187             	!:
 6966                        		__pusharg.wr
         17:D187  A6 8D      			ldx	<__sp
         17:D189  CA         			dex
         17:D18A  CA         			dex
         17:D18B  95 08      			sta.l	<__stack, x
         17:D18D  94 09      			sty.h	<__stack, x
         17:D18F  86 8D      			stx	<__sp
 6967                        		__call		_check_BG
         17:D191  20 6D FF   			call	_check_BG
 6968                        	
 6969                        		.dbg	line,	"include\routines_LEVELS.c", 1110; if(map_blk_flag == TILE_LADDER)
 6970                        		__ld.umq	_map_blk_flag
         17:D194  AD B1 2B   			lda	_map_blk_flag
 6971                        		__equ_b.uiq	2
         17:D197  C9 02      			cmp	#2
         17:D199  F0 01      			beq	!+
         17:D19B  18         			clc
         17:D19C             	!:
 6972                        		__bfalse	.LL225
         17:D19C  90 1B      			bcc	.LL225
 6973                        	
 6974                        		.dbg	line,	"include\routines_LEVELS.c", 1111; {
 6975                        	
 6976                        		.dbg	line,	"include\routines_LEVELS.c", 1112; sgx_map_pxl_y += (2 - i);
 6977                        		__ld.wi		2
         17:D19E  A9 02      			lda.l	#2
         17:D1A0  C2         			cly
 6978                        		__sub.um	__joypad_DIR_end - 2  /* i */
         17:D1A1  38         			sec
         17:D1A2  ED 03 23   			sbc	__joypad_DIR_end - 2
         17:D1A5  B0 01      			bcs	!+
         17:D1A7  88         			dey
         17:D1A8             	!:
 6979                        		__add_st.wmq	_sgx_map_pxl_y
         17:D1A8  18         			clc
         17:D1A9  6D 92 26   			adc.l	_sgx_map_pxl_y
         17:D1AC  8D 92 26   			sta.l	_sgx_map_pxl_y
         17:D1AF  98         			tya
         17:D1B0  6D 93 26   			adc.h	_sgx_map_pxl_y
         17:D1B3  8D 93 26   			sta.h	_sgx_map_pxl_y
 6980                        	
 6981                        		.dbg	line,	"include\routines_LEVELS.c", 1113; break;
 6982                        		__bra		.LL224
         17:D1B6  4C 3E D2   			bra	.LL224
 6983                        	
 6984                        		.dbg	line,	"include\routines_LEVELS.c", 1114; }
 6985                        	
 6986                        		.dbg	line,	"include\routines_LEVELS.c", 1116; else
 6987    17:D1B9             	.LL225:
 6988                        	
 6989                        		.dbg	line,	"include\routines_LEVELS.c", 1117; {
 6990                        	
 6991                        		.dbg	line,	"include\routines_LEVELS.c", 1118; spr_set(player_id);
 6992                        		__ld.umq	_player_id
         17:D1B9  AD 15 23   			lda	_player_id
 6993                        		__call		_spr_set.1
         17:D1BC  20 DD E7   			call	_spr_set.1
 6994                        	
 6995                        		.dbg	line,	"include\routines_LEVELS.c", 1119; spr_pattern(PLAYER_FALL_VRAM_ADR);
 6996                        		__ld.wi		9216
         17:D1BF  62         			cla
         17:D1C0  A0 24      			ldy.h	#9216
 6997                        		__call		_spr_pattern.1
         17:D1C2  20 26 E8   			call	_spr_pattern.1
 6998                        	
 6999                        		.dbg	line,	"include\routines_LEVELS.c", 1121; spr_set(weapon_id);
 7000                        		__ld.umq	_weapon_id
         17:D1C5  AD 23 23   			lda	_weapon_id
 7001                        		__call		_spr_set.1
         17:D1C8  20 DD E7   			call	_spr_set.1
 7002                        	
 7003                        		.dbg	line,	"include\routines_LEVELS.c", 1122; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
 7004                        		__ld.wi		31808
         17:D1CB  A9 40      			lda.l	#31808
         17:D1CD  A0 7C      			ldy.h	#31808
 7005                        		__call		_spr_pattern.1
         17:D1CF  20 26 E8   			call	_spr_pattern.1
 7006                        	
 7007                        		.dbg	line,	"include\routines_LEVELS.c", 1123; spr_y(player_pos_y+4);
 7008                        		__ld.wm		_player_pos_y
         17:D1D2  AD D6 24   			lda.l	_player_pos_y
         17:D1D5  AC D7 24   			ldy.h	_player_pos_y
 7009                        		__add.wi	4
         17:D1D8  18         			clc
         17:D1D9  69 04      			adc.l	#4
         17:D1DB  90 01      			bcc	!+
         17:D1DD  C8         			iny
         17:D1DE             	!:
 7010                        		__call		_spr_y.1
         17:D1DE  20 19 E8   			call	_spr_y.1
 7011                        	
 7012                        		.dbg	line,	"include\routines_LEVELS.c", 1125; if(player_axis == AXIS_RIGHT)
 7013                        		__not.um	_player_axis
         17:D1E1  AD 17 23   			lda	_player_axis
         17:D1E4  18         			clc
         17:D1E5  D0 01      			bne	!+
         17:D1E7  38         			sec
         17:D1E8             	!:
 7014                        		__bfalse	.LL227
         17:D1E8  90 11      			bcc	.LL227
 7015                        	
 7016                        		.dbg	line,	"include\routines_LEVELS.c", 1126; {
 7017                        	
 7018                        		.dbg	line,	"include\routines_LEVELS.c", 1127; spr_x(player_pos_x-4);
 7019                        		__ld.wm		_player_pos_x
         17:D1EA  AD D4 24   			lda.l	_player_pos_x
         17:D1ED  AC D5 24   			ldy.h	_player_pos_x
 7020                        		__sub.wi	4
         17:D1F0  38         			sec
         17:D1F1  E9 04      			sbc.l	#4
         17:D1F3  B0 01      			bcs	!+
         17:D1F5  88         			dey
         17:D1F6             	!:
 7021                        		__call		_spr_x.1
         17:D1F6  20 0A E8   			call	_spr_x.1
 7022                        	
 7023                        		.dbg	line,	"include\routines_LEVELS.c", 1128; }
 7024                        	
 7025                        		.dbg	line,	"include\routines_LEVELS.c", 1129; 
 7026                        	
 7027                        		.dbg	line,	"include\routines_LEVELS.c", 1130; else
 7028                        		__bra		.LL228
         17:D1F9  80 0F      			bra	.LL228
 7029    17:D1FB             	.LL227:
 7030                        	
 7031                        		.dbg	line,	"include\routines_LEVELS.c", 1131; {
 7032                        	
 7033                        		.dbg	line,	"include\routines_LEVELS.c", 1132; spr_x(player_pos_x+20);
 7034                        		__ld.wm		_player_pos_x
         17:D1FB  AD D4 24   			lda.l	_player_pos_x
         17:D1FE  AC D5 24   			ldy.h	_player_pos_x
 7035                        		__add.wi	20
         17:D201  18         			clc
         17:D202  69 14      			adc.l	#20
         17:D204  90 01      			bcc	!+
         17:D206  C8         			iny
         17:D207             	!:
 7036                        		__call		_spr_x.1
         17:D207  20 0A E8   			call	_spr_x.1
 7037                        	
 7038                        		.dbg	line,	"include\routines_LEVELS.c", 1133; }
 7039    17:D20A             	.LL228:
 7040                        	
 7041                        		.dbg	line,	"include\routines_LEVELS.c", 1134; 
 7042                        	
 7043                        		.dbg	line,	"include\routines_LEVELS.c", 1136; jump_ladder = FALSE;
 7044                        		__st.umiq	0, _jump_ladder
         17:D20A  9C 1F 23   			stz	_jump_ladder
 7045                        	
 7046                        		.dbg	line,	"include\routines_LEVELS.c", 1137; player_index_jump = 0;
 7047                        		__st.umiq	0, _player_index_jump
         17:D20D  9C 1A 23   			stz	_player_index_jump
 7048                        	
 7049                        		.dbg	line,	"include\routines_LEVELS.c", 1138; player_index_fall = 0;
 7050                        		__st.umiq	0, _player_index_fall
         17:D210  9C 1B 23   			stz	_player_index_fall
 7051                        	
 7052                        		.dbg	line,	"include\routines_LEVELS.c", 1139; fall_ladder = TRUE;
 7053                        		__st.umiq	1, _fall_ladder
         17:D213  A9 01      			lda.l	#1
         17:D215  8D 21 23   			sta	_fall_ladder
 7054                        	
 7055                        		.dbg	line,	"include\routines_LEVELS.c", 1140; player_state = STATE_FALL;
 7056                        		__st.umiq	9, _player_state
         17:D218  A9 09      			lda.l	#9
         17:D21A  8D 16 23   			sta	_player_state
 7057                        	
 7058                        		.dbg	line,	"include\routines_LEVELS.c", 1141; }
 7059    17:D21D             	.LL226	.alias		.LL222
 7060                        	
 7061                        		.dbg	line,	"include\routines_LEVELS.c", 1142; }
 7062                        		__bra		.LL222
         17:D21D  4C 6B D1   			bra	.LL222
 7063    17:D220             	.LL224	.alias		.LL229
 7064                        	
 7065                        		.dbg	line,	"include\routines_LEVELS.c", 1143; }
 7066                        	
 7067                        		.dbg	line,	"include\routines_LEVELS.c", 1145; else
 7068                        		__bra		.LL229
         17:D220  80 1C      			bra	.LL229
 7069    17:D222             	.LL220:
 7070                        	
 7071                        		.dbg	line,	"include\routines_LEVELS.c", 1146; {
 7072                        	
 7073                        		.dbg	line,	"include\routines_LEVELS.c", 1147; spr_set(weapon_id);
 7074                        		__ld.umq	_weapon_id
         17:D222  AD 23 23   			lda	_weapon_id
 7075                        		__call		_spr_set.1
         17:D225  20 DD E7   			call	_spr_set.1
 7076                        	
 7077                        		.dbg	line,	"include\routines_LEVELS.c", 1148; spr_hide();
 7078                        		__call		_spr_hide
         17:D228  20 F8 E7   			call	_spr_hide
 7079                        	
 7080                        		.dbg	line,	"include\routines_LEVELS.c", 1149; 
 7081                        	
 7082                        		.dbg	line,	"include\routines_LEVELS.c", 1150; sgx_map_pxl_y += 2;
 7083                        		__add_st.wmiq	2, _sgx_map_pxl_y
         17:D22B  18         			clc
         17:D22C  AD 92 26   			lda.l	_sgx_map_pxl_y
         17:D22F  69 02      			adc.l	#2
         17:D231  8D 92 26   			sta.l	_sgx_map_pxl_y
         17:D234  90 03      			bcc	!+
         17:D236  EE 93 26   			inc.h	_sgx_map_pxl_y
         17:D239             	!:
 7084                        	
 7085                        		.dbg	line,	"include\routines_LEVELS.c", 1151; player_state = STATE_CLIMB_DOWN;
 7086                        		__st.umiq	12, _player_state
         17:D239  A9 0C      			lda.l	#12
         17:D23B  8D 16 23   			sta	_player_state
 7087                        	
 7088                        		.dbg	line,	"include\routines_LEVELS.c", 1152; }
 7089    17:D23E             	.LL229:
 7090                        	
 7091                        		.dbg	line,	"include\routines_LEVELS.c", 1153; }
 7092                        	
 7093                        		.dbg	line,	"include\routines_LEVELS.c", 1154; }
 7094    17:D23E             	.LL219:
 7095                        	
 7096                        		.dbg	line,	"include\routines_LEVELS.c", 1155; }
 7097    17:D23E             	.LL216:
 7098    17:D23E             	.LL215:
 7099                        	
 7100                        		.dbg	line,	"include\routines_LEVELS.c", 1156; }
 7101    17:D23E             	.LL212:
 7102    17:D23E             	.LL211:
 7103    17:D23E             	.LL198:
 7104    17:D23E             	.LL172:
 7105    17:D23E             	.LL135:
 7106                        		__return	0
         17:D23E  4C EF FF   			jmp	leave_proc
 7107                        		.dbg	clear
 7108                        		.endp
 7109               67E0     		.data
 7110               2303     		.bss
 7111    F8:2303             	__joypad_DIR_loc:
 7112    F8:2303             			ds	2
 7113    F8:2305             	__joypad_DIR_end:
 7114               E309     		.code
 7115                        		.pceas
 7116                        	
 7117                        		.dbg	line,	"include\routines_LEVELS.c", 1165; void update_PLAYER()
 7118                        		.dbg	line,	"include\routines_LEVELS.c", 1166; {
 7119                        	;***********************
 7120                        	;***********************
 7121                        	
 7122                        		.hucc
 7123    01:C1C9             		.proc		_update_PLAYER
 7124                        		__enter		_update_PLAYER
 7125                        	
 7126                        		.dbg	line,	"include\routines_LEVELS.c", 1167; if(player_state == STATE_IDLE)
 7127                        		__not.um	_player_state
         01:C1C9  AD 16 23   			lda	_player_state
         01:C1CC  18         			clc
         01:C1CD  D0 01      			bne	!+
         01:C1CF  38         			sec
         01:C1D0             	!:
 7128                        		__bfalse	.LL231
         01:C1D0  B0 03 4C 79			bcc	.LL231
         01:C1D4  C2          
 7129                        	
 7130                        		.dbg	line,	"include\routines_LEVELS.c", 1168; {
 7131                        	
 7132                        		.dbg	line,	"include\routines_LEVELS.c", 1169; if(player_counter_anim == 1)
 7133                        		__ld.umq	_player_counter_anim
         01:C1D5  AD 19 23   			lda	_player_counter_anim
 7134                        		__equ_b.uiq	1
         01:C1D8  C9 01      			cmp	#1
         01:C1DA  F0 01      			beq	!+
         01:C1DC  18         			clc
         01:C1DD             	!:
 7135                        		__bfalse	.LL232
         01:C1DD  90 0F      			bcc	.LL232
 7136                        	
 7137                        		.dbg	line,	"include\routines_LEVELS.c", 1170; {
 7138                        	
 7139                        		.dbg	line,	"include\routines_LEVELS.c", 1171; spr_set(player_id);
 7140                        		__ld.umq	_player_id
         01:C1DF  AD 15 23   			lda	_player_id
 7141                        		__call		_spr_set.1
         01:C1E2  20 DD E7   			call	_spr_set.1
 7142                        	
 7143                        		.dbg	line,	"include\routines_LEVELS.c", 1172; spr_pattern(PLAYER_IDLE_VRAM_ADR);
 7144                        		__ld.wi		5120
         01:C1E5  62         			cla
         01:C1E6  A0 14      			ldy.h	#5120
 7145                        		__call		_spr_pattern.1
         01:C1E8  20 26 E8   			call	_spr_pattern.1
 7146                        	
 7147                        		.dbg	line,	"include\routines_LEVELS.c", 1174; player_counter_anim = 0;
 7148                        		__st.umiq	0, _player_counter_anim
         01:C1EB  9C 19 23   			stz	_player_counter_anim
 7149                        	
 7150                        		.dbg	line,	"include\routines_LEVELS.c", 1175; }
 7151                        	
 7152                        		.dbg	line,	"include\routines_LEVELS.c", 1177; recenter_CAMERA();
 7153    01:C1EE             	.LL232:
 7154                        		__call		_recenter_CAMERA
         01:C1EE  20 63 FF   			call	_recenter_CAMERA
 7155                        	
 7156                        		.dbg	line,	"include\routines_LEVELS.c", 1180; // CHECK COLLISION WITH LEFT FLOOR //
 7157                        	
 7158                        		.dbg	line,	"include\routines_LEVELS.c", 1181; check_BG( 10 , 32 );//8
 7159                        		__ld.wi		10
         01:C1F1  A9 0A      			lda.l	#10
         01:C1F3  C2         			cly
 7160                        		__pusharg.wr
         01:C1F4  A6 8D      			ldx	<__sp
         01:C1F6  CA         			dex
         01:C1F7  CA         			dex
         01:C1F8  95 08      			sta.l	<__stack, x
         01:C1FA  94 09      			sty.h	<__stack, x
         01:C1FC  86 8D      			stx	<__sp
 7161                        		__ld.wi		32
         01:C1FE  A9 20      			lda.l	#32
         01:C200  C2         			cly
 7162                        		__pusharg.wr
         01:C201  A6 8D      			ldx	<__sp
         01:C203  CA         			dex
         01:C204  CA         			dex
         01:C205  95 08      			sta.l	<__stack, x
         01:C207  94 09      			sty.h	<__stack, x
         01:C209  86 8D      			stx	<__sp
 7163                        		__call		_check_BG
         01:C20B  20 6D FF   			call	_check_BG
 7164                        	
 7165                        		.dbg	line,	"include\routines_LEVELS.c", 1183; if(map_blk_flag == TILE_EMPTY)
 7166                        		__not.um	_map_blk_flag
         01:C20E  AD B1 2B   			lda	_map_blk_flag
         01:C211  18         			clc
         01:C212  D0 01      			bne	!+
         01:C214  38         			sec
         01:C215             	!:
 7167                        		__bfalse	.LL233
         01:C215  90 34      			bcc	.LL233
 7168                        	
 7169                        		.dbg	line,	"include\routines_LEVELS.c", 1184; {
 7170                        	
 7171                        		.dbg	line,	"include\routines_LEVELS.c", 1185; // CHECK COLLISION WITH RIGHT FLOOR //
 7172                        	
 7173                        		.dbg	line,	"include\routines_LEVELS.c", 1186; check_BG( 22 , 32 );//24
 7174                        		__ld.wi		22
         01:C217  A9 16      			lda.l	#22
         01:C219  C2         			cly
 7175                        		__pusharg.wr
         01:C21A  A6 8D      			ldx	<__sp
         01:C21C  CA         			dex
         01:C21D  CA         			dex
         01:C21E  95 08      			sta.l	<__stack, x
         01:C220  94 09      			sty.h	<__stack, x
         01:C222  86 8D      			stx	<__sp
 7176                        		__ld.wi		32
         01:C224  A9 20      			lda.l	#32
         01:C226  C2         			cly
 7177                        		__pusharg.wr
         01:C227  A6 8D      			ldx	<__sp
         01:C229  CA         			dex
         01:C22A  CA         			dex
         01:C22B  95 08      			sta.l	<__stack, x
         01:C22D  94 09      			sty.h	<__stack, x
         01:C22F  86 8D      			stx	<__sp
 7178                        		__call		_check_BG
         01:C231  20 6D FF   			call	_check_BG
 7179                        	
 7180                        		.dbg	line,	"include\routines_LEVELS.c", 1188; if(map_blk_flag == TILE_EMPTY)
 7181                        		__not.um	_map_blk_flag
         01:C234  AD B1 2B   			lda	_map_blk_flag
         01:C237  18         			clc
         01:C238  D0 01      			bne	!+
         01:C23A  38         			sec
         01:C23B             	!:
 7182                        		__bfalse	.LL234
         01:C23B  90 0E      			bcc	.LL234
 7183                        	
 7184                        		.dbg	line,	"include\routines_LEVELS.c", 1189; {
 7185                        	
 7186                        		.dbg	line,	"include\routines_LEVELS.c", 1190; //set_far_base(TABLE_PLAYER_TILES_BANK[player_naked],TABLE_PLAYER_TILES_ADR[player_naked]);
 7187                        	
 7188                        		.dbg	line,	"include\routines_LEVELS.c", 1191; //far_load_vram(PLAYER_VRAM_ADR,TILES_16);
 7189                        	
 7190                        		.dbg	line,	"include\routines_LEVELS.c", 1193; jump_ladder = FALSE;
 7191                        		__st.umiq	0, _jump_ladder
         01:C23D  9C 1F 23   			stz	_jump_ladder
 7192                        	
 7193                        		.dbg	line,	"include\routines_LEVELS.c", 1194; player_index_jump = 0;
 7194                        		__st.umiq	0, _player_index_jump
         01:C240  9C 1A 23   			stz	_player_index_jump
 7195                        	
 7196                        		.dbg	line,	"include\routines_LEVELS.c", 1195; player_index_fall = 0;
 7197                        		__st.umiq	0, _player_index_fall
         01:C243  9C 1B 23   			stz	_player_index_fall
 7198                        	
 7199                        		.dbg	line,	"include\routines_LEVELS.c", 1196; player_state = STATE_FALL;
 7200                        		__st.umiq	9, _player_state
         01:C246  A9 09      			lda.l	#9
         01:C248  8D 16 23   			sta	_player_state
 7201                        	
 7202                        		.dbg	line,	"include\routines_LEVELS.c", 1197; }
 7203                        	
 7204                        		.dbg	line,	"include\routines_LEVELS.c", 1198; }
 7205    01:C24B             	.LL234:
 7206                        	
 7207                        		.dbg	line,	"include\routines_LEVELS.c", 1200; spr_set(weapon_id);
 7208    01:C24B             	.LL233:
 7209                        		__ld.umq	_weapon_id
         01:C24B  AD 23 23   			lda	_weapon_id
 7210                        		__call		_spr_set.1
         01:C24E  20 DD E7   			call	_spr_set.1
 7211                        	
 7212                        		.dbg	line,	"include\routines_LEVELS.c", 1201; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
 7213                        		__ld.wi		31808
         01:C251  A9 40      			lda.l	#31808
         01:C253  A0 7C      			ldy.h	#31808
 7214                        		__call		_spr_pattern.1
         01:C255  20 26 E8   			call	_spr_pattern.1
 7215                        	
 7216                        		.dbg	line,	"include\routines_LEVELS.c", 1202; spr_x(player_pos_x+8);
 7217                        		__ld.wm		_player_pos_x
         01:C258  AD D4 24   			lda.l	_player_pos_x
         01:C25B  AC D5 24   			ldy.h	_player_pos_x
 7218                        		__add.wi	8
         01:C25E  18         			clc
         01:C25F  69 08      			adc.l	#8
         01:C261  90 01      			bcc	!+
         01:C263  C8         			iny
         01:C264             	!:
 7219                        		__call		_spr_x.1
         01:C264  20 0A E8   			call	_spr_x.1
 7220                        	
 7221                        		.dbg	line,	"include\routines_LEVELS.c", 1203; spr_y(player_pos_y+16);
 7222                        		__ld.wm		_player_pos_y
         01:C267  AD D6 24   			lda.l	_player_pos_y
         01:C26A  AC D7 24   			ldy.h	_player_pos_y
 7223                        		__add.wi	16
         01:C26D  18         			clc
         01:C26E  69 10      			adc.l	#16
         01:C270  90 01      			bcc	!+
         01:C272  C8         			iny
         01:C273             	!:
 7224                        		__call		_spr_y.1
         01:C273  20 19 E8   			call	_spr_y.1
 7225                        	
 7226                        		.dbg	line,	"include\routines_LEVELS.c", 1204; }
 7227                        	
 7228                        		.dbg	line,	"include\routines_LEVELS.c", 1207; else if(player_state == STATE_WALK)
 7229                        		__bra		.LL235
         01:C276  4C 0B DB   			bra	.LL235
 7230    01:C279             	.LL231:
 7231                        		__ld.umq	_player_state
         01:C279  AD 16 23   			lda	_player_state
 7232                        		__equ_b.uiq	1
         01:C27C  C9 01      			cmp	#1
         01:C27E  F0 01      			beq	!+
         01:C280  18         			clc
         01:C281             	!:
 7233                        		__bfalse	.LL236
         01:C281  B0 03 4C 4C			bcc	.LL236
         01:C285  C6          
 7234                        	
 7235                        		.dbg	line,	"include\routines_LEVELS.c", 1208; {
 7236                        	
 7237                        		.dbg	line,	"include\routines_LEVELS.c", 1209; recenter_CAMERA();
 7238                        		__call		_recenter_CAMERA
         01:C286  20 63 FF   			call	_recenter_CAMERA
 7239                        	
 7240                        		.dbg	line,	"include\routines_LEVELS.c", 1212; //--------------------------------------------------------------------------------------//
 7241                        	
 7242                        		.dbg	line,	"include\routines_LEVELS.c", 1213; //                                   FLOOR COLLISION                                    //
 7243                        	
 7244                        		.dbg	line,	"include\routines_LEVELS.c", 1214; //--------------------------------------------------------------------------------------//
 7245                        	
 7246                        		.dbg	line,	"include\routines_LEVELS.c", 1216; // CHECK COLLISION WITH LEFT FLOOR //
 7247                        	
 7248                        		.dbg	line,	"include\routines_LEVELS.c", 1217; check_BG( 10 , 32 );//8
 7249                        		__ld.wi		10
         01:C289  A9 0A      			lda.l	#10
         01:C28B  C2         			cly
 7250                        		__pusharg.wr
         01:C28C  A6 8D      			ldx	<__sp
         01:C28E  CA         			dex
         01:C28F  CA         			dex
         01:C290  95 08      			sta.l	<__stack, x
         01:C292  94 09      			sty.h	<__stack, x
         01:C294  86 8D      			stx	<__sp
 7251                        		__ld.wi		32
         01:C296  A9 20      			lda.l	#32
         01:C298  C2         			cly
 7252                        		__pusharg.wr
         01:C299  A6 8D      			ldx	<__sp
         01:C29B  CA         			dex
         01:C29C  CA         			dex
         01:C29D  95 08      			sta.l	<__stack, x
         01:C29F  94 09      			sty.h	<__stack, x
         01:C2A1  86 8D      			stx	<__sp
 7253                        		__call		_check_BG
         01:C2A3  20 6D FF   			call	_check_BG
 7254                        	
 7255                        		.dbg	line,	"include\routines_LEVELS.c", 1219; if(map_blk_flag == TILE_EMPTY)
 7256                        		__not.um	_map_blk_flag
         01:C2A6  AD B1 2B   			lda	_map_blk_flag
         01:C2A9  18         			clc
         01:C2AA  D0 01      			bne	!+
         01:C2AC  38         			sec
         01:C2AD             	!:
 7257                        		__bfalse	.LL237
         01:C2AD  B0 03 4C 65			bcc	.LL237
         01:C2B1  C3          
 7258                        	
 7259                        		.dbg	line,	"include\routines_LEVELS.c", 1220; {
 7260                        	
 7261                        		.dbg	line,	"include\routines_LEVELS.c", 1221; // CHECK COLLISION WITH RIGHT FLOOR //
 7262                        	
 7263                        		.dbg	line,	"include\routines_LEVELS.c", 1222; check_BG( 22 , 32 );//24
 7264                        		__ld.wi		22
         01:C2B2  A9 16      			lda.l	#22
         01:C2B4  C2         			cly
 7265                        		__pusharg.wr
         01:C2B5  A6 8D      			ldx	<__sp
         01:C2B7  CA         			dex
         01:C2B8  CA         			dex
         01:C2B9  95 08      			sta.l	<__stack, x
         01:C2BB  94 09      			sty.h	<__stack, x
         01:C2BD  86 8D      			stx	<__sp
 7266                        		__ld.wi		32
         01:C2BF  A9 20      			lda.l	#32
         01:C2C1  C2         			cly
 7267                        		__pusharg.wr
         01:C2C2  A6 8D      			ldx	<__sp
         01:C2C4  CA         			dex
         01:C2C5  CA         			dex
         01:C2C6  95 08      			sta.l	<__stack, x
         01:C2C8  94 09      			sty.h	<__stack, x
         01:C2CA  86 8D      			stx	<__sp
 7268                        		__call		_check_BG
         01:C2CC  20 6D FF   			call	_check_BG
 7269                        	
 7270                        		.dbg	line,	"include\routines_LEVELS.c", 1224; if(map_blk_flag == TILE_EMPTY)
 7271                        		__not.um	_map_blk_flag
         01:C2CF  AD B1 2B   			lda	_map_blk_flag
         01:C2D2  18         			clc
         01:C2D3  D0 01      			bne	!+
         01:C2D5  38         			sec
         01:C2D6             	!:
 7272                        		__bfalse	.LL238
         01:C2D6  90 11      			bcc	.LL238
 7273                        	
 7274                        		.dbg	line,	"include\routines_LEVELS.c", 1225; {
 7275                        	
 7276                        		.dbg	line,	"include\routines_LEVELS.c", 1226; /*spr_set(player_id);
 7277                        	
 7278                        		.dbg	line,	"include\routines_LEVELS.c", 1227; spr_pattern(PLAYER_IDLE_VRAM_ADR);
 7279                        	
 7280                        		.dbg	line,	"include\routines_LEVELS.c", 1229; spr_set(weapon_id);
 7281                        	
 7282                        		.dbg	line,	"include\routines_LEVELS.c", 1230; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
 7283                        	
 7284                        		.dbg	line,	"include\routines_LEVELS.c", 1231; spr_x(player_pos_x+8);
 7285                        	
 7286                        		.dbg	line,	"include\routines_LEVELS.c", 1232; spr_y(player_pos_y+16);*/
 7287                        	
 7288                        		.dbg	line,	"include\routines_LEVELS.c", 1234; jump_ladder = FALSE;
 7289                        		__st.umiq	0, _jump_ladder
         01:C2D8  9C 1F 23   			stz	_jump_ladder
 7290                        	
 7291                        		.dbg	line,	"include\routines_LEVELS.c", 1235; player_index_jump = 0;
 7292                        		__st.umiq	0, _player_index_jump
         01:C2DB  9C 1A 23   			stz	_player_index_jump
 7293                        	
 7294                        		.dbg	line,	"include\routines_LEVELS.c", 1236; player_index_fall = 0;
 7295                        		__st.umiq	0, _player_index_fall
         01:C2DE  9C 1B 23   			stz	_player_index_fall
 7296                        	
 7297                        		.dbg	line,	"include\routines_LEVELS.c", 1237; player_state = STATE_FALL;
 7298                        		__st.umiq	9, _player_state
         01:C2E1  A9 09      			lda.l	#9
         01:C2E3  8D 16 23   			sta	_player_state
 7299                        	
 7300                        		.dbg	line,	"include\routines_LEVELS.c", 1238; }
 7301                        	
 7302                        		.dbg	line,	"include\routines_LEVELS.c", 1241; else
 7303                        		__bra		.LL239
         01:C2E6  4C D8 C3   			bra	.LL239
 7304    01:C2E9             	.LL238:
 7305                        	
 7306                        		.dbg	line,	"include\routines_LEVELS.c", 1242; {
 7307                        	
 7308                        		.dbg	line,	"include\routines_LEVELS.c", 1243; if(player_axis == AXIS_RIGHT)
 7309                        		__not.um	_player_axis
         01:C2E9  AD 17 23   			lda	_player_axis
         01:C2EC  18         			clc
         01:C2ED  D0 01      			bne	!+
         01:C2EF  38         			sec
         01:C2F0             	!:
 7310                        		__bfalse	.LL240
         01:C2F0  90 3A      			bcc	.LL240
 7311                        	
 7312                        		.dbg	line,	"include\routines_LEVELS.c", 1244; {
 7313                        	
 7314                        		.dbg	line,	"include\routines_LEVELS.c", 1245; // CHECK COLLISION WITH RIGHT WALL //
 7315                        	
 7316                        		.dbg	line,	"include\routines_LEVELS.c", 1246; check_BG( 24 , 31 ); // 24+2
 7317                        		__ld.wi		24
         01:C2F2  A9 18      			lda.l	#24
         01:C2F4  C2         			cly
 7318                        		__pusharg.wr
         01:C2F5  A6 8D      			ldx	<__sp
         01:C2F7  CA         			dex
         01:C2F8  CA         			dex
         01:C2F9  95 08      			sta.l	<__stack, x
         01:C2FB  94 09      			sty.h	<__stack, x
         01:C2FD  86 8D      			stx	<__sp
 7319                        		__ld.wi		31
         01:C2FF  A9 1F      			lda.l	#31
         01:C301  C2         			cly
 7320                        		__pusharg.wr
         01:C302  A6 8D      			ldx	<__sp
         01:C304  CA         			dex
         01:C305  CA         			dex
         01:C306  95 08      			sta.l	<__stack, x
         01:C308  94 09      			sty.h	<__stack, x
         01:C30A  86 8D      			stx	<__sp
 7321                        		__call		_check_BG
         01:C30C  20 6D FF   			call	_check_BG
 7322                        	
 7323                        		.dbg	line,	"include\routines_LEVELS.c", 1248; if(map_blk_flag == TILE_EMPTY)
 7324                        		__not.um	_map_blk_flag
         01:C30F  AD B1 2B   			lda	_map_blk_flag
         01:C312  18         			clc
         01:C313  D0 01      			bne	!+
         01:C315  38         			sec
         01:C316             	!:
 7325                        		__bfalse	.LL241
         01:C316  B0 03 4C D8			bcc	.LL241
         01:C31A  C3          
 7326                        	
 7327                        		.dbg	line,	"include\routines_LEVELS.c", 1249; {
 7328                        	
 7329                        		.dbg	line,	"include\routines_LEVELS.c", 1250; sgx_map_pxl_x += 2;
 7330                        		__add_st.wmiq	2, _sgx_map_pxl_x
         01:C31B  18         			clc
         01:C31C  AD 90 26   			lda.l	_sgx_map_pxl_x
         01:C31F  69 02      			adc.l	#2
         01:C321  8D 90 26   			sta.l	_sgx_map_pxl_x
         01:C324  90 03      			bcc	!+
         01:C326  EE 91 26   			inc.h	_sgx_map_pxl_x
         01:C329             	!:
 7331                        	
 7332                        		.dbg	line,	"include\routines_LEVELS.c", 1251; }
 7333                        	
 7334                        		.dbg	line,	"include\routines_LEVELS.c", 1252; }
 7335    01:C329             	.LL241	.alias		.LL242
 7336                        	
 7337                        		.dbg	line,	"include\routines_LEVELS.c", 1254; else
 7338                        		__bra		.LL242
         01:C329  4C D8 C3   			bra	.LL242
 7339    01:C32C             	.LL240:
 7340                        	
 7341                        		.dbg	line,	"include\routines_LEVELS.c", 1255; {
 7342                        	
 7343                        		.dbg	line,	"include\routines_LEVELS.c", 1256; // CHECK COLLISION WITH LEFT WALL //
 7344                        	
 7345                        		.dbg	line,	"include\routines_LEVELS.c", 1257; check_BG( 8 , 31 ); // 8-2
 7346                        		__ld.wi		8
         01:C32C  A9 08      			lda.l	#8
         01:C32E  C2         			cly
 7347                        		__pusharg.wr
         01:C32F  A6 8D      			ldx	<__sp
         01:C331  CA         			dex
         01:C332  CA         			dex
         01:C333  95 08      			sta.l	<__stack, x
         01:C335  94 09      			sty.h	<__stack, x
         01:C337  86 8D      			stx	<__sp
 7348                        		__ld.wi		31
         01:C339  A9 1F      			lda.l	#31
         01:C33B  C2         			cly
 7349                        		__pusharg.wr
         01:C33C  A6 8D      			ldx	<__sp
         01:C33E  CA         			dex
         01:C33F  CA         			dex
         01:C340  95 08      			sta.l	<__stack, x
         01:C342  94 09      			sty.h	<__stack, x
         01:C344  86 8D      			stx	<__sp
 7350                        		__call		_check_BG
         01:C346  20 6D FF   			call	_check_BG
 7351                        	
 7352                        		.dbg	line,	"include\routines_LEVELS.c", 1259; if(map_blk_flag == TILE_EMPTY)
 7353                        		__not.um	_map_blk_flag
         01:C349  AD B1 2B   			lda	_map_blk_flag
         01:C34C  18         			clc
         01:C34D  D0 01      			bne	!+
         01:C34F  38         			sec
         01:C350             	!:
 7354                        		__bfalse	.LL243
         01:C350  B0 03 4C D8			bcc	.LL243
         01:C354  C3          
 7355                        	
 7356                        		.dbg	line,	"include\routines_LEVELS.c", 1260; {
 7357                        	
 7358                        		.dbg	line,	"include\routines_LEVELS.c", 1261; sgx_map_pxl_x -= 2;
 7359                        		__sub_st.wmiq	2, _sgx_map_pxl_x
         01:C355  38         			sec
         01:C356  AD 90 26   			lda.l	_sgx_map_pxl_x
         01:C359  E9 02      			sbc.l	#2
         01:C35B  8D 90 26   			sta.l	_sgx_map_pxl_x
         01:C35E  B0 03      			bcs	!+
         01:C360  CE 91 26   			dec.h	_sgx_map_pxl_x
         01:C363             	!:
 7360                        	
 7361                        		.dbg	line,	"include\routines_LEVELS.c", 1262; }
 7362                        	
 7363                        		.dbg	line,	"include\routines_LEVELS.c", 1263; }
 7364    01:C363             	.LL243	.alias		.LL244
 7365    01:C363             	.LL242	.alias		.LL244
 7366                        	
 7367                        		.dbg	line,	"include\routines_LEVELS.c", 1264; }
 7368    01:C363             	.LL239	.alias		.LL244
 7369                        	
 7370                        		.dbg	line,	"include\routines_LEVELS.c", 1265; }
 7371                        	
 7372                        		.dbg	line,	"include\routines_LEVELS.c", 1268; else
 7373                        		__bra		.LL244
         01:C363  80 73      			bra	.LL244
 7374    01:C365             	.LL237:
 7375                        	
 7376                        		.dbg	line,	"include\routines_LEVELS.c", 1269; {
 7377                        	
 7378                        		.dbg	line,	"include\routines_LEVELS.c", 1270; if(player_axis == AXIS_RIGHT)
 7379                        		__not.um	_player_axis
         01:C365  AD 17 23   			lda	_player_axis
         01:C368  18         			clc
         01:C369  D0 01      			bne	!+
         01:C36B  38         			sec
         01:C36C             	!:
 7380                        		__bfalse	.LL245
         01:C36C  90 36      			bcc	.LL245
 7381                        	
 7382                        		.dbg	line,	"include\routines_LEVELS.c", 1271; {
 7383                        	
 7384                        		.dbg	line,	"include\routines_LEVELS.c", 1272; // CHECK COLLISION WITH RIGHT WALL //
 7385                        	
 7386                        		.dbg	line,	"include\routines_LEVELS.c", 1273; check_BG( 24 , 31 ); // 24+2
 7387                        		__ld.wi		24
         01:C36E  A9 18      			lda.l	#24
         01:C370  C2         			cly
 7388                        		__pusharg.wr
         01:C371  A6 8D      			ldx	<__sp
         01:C373  CA         			dex
         01:C374  CA         			dex
         01:C375  95 08      			sta.l	<__stack, x
         01:C377  94 09      			sty.h	<__stack, x
         01:C379  86 8D      			stx	<__sp
 7389                        		__ld.wi		31
         01:C37B  A9 1F      			lda.l	#31
         01:C37D  C2         			cly
 7390                        		__pusharg.wr
         01:C37E  A6 8D      			ldx	<__sp
         01:C380  CA         			dex
         01:C381  CA         			dex
         01:C382  95 08      			sta.l	<__stack, x
         01:C384  94 09      			sty.h	<__stack, x
         01:C386  86 8D      			stx	<__sp
 7391                        		__call		_check_BG
         01:C388  20 6D FF   			call	_check_BG
 7392                        	
 7393                        		.dbg	line,	"include\routines_LEVELS.c", 1275; if(map_blk_flag == TILE_EMPTY)
 7394                        		__not.um	_map_blk_flag
         01:C38B  AD B1 2B   			lda	_map_blk_flag
         01:C38E  18         			clc
         01:C38F  D0 01      			bne	!+
         01:C391  38         			sec
         01:C392             	!:
 7395                        		__bfalse	.LL246
         01:C392  90 44      			bcc	.LL246
 7396                        	
 7397                        		.dbg	line,	"include\routines_LEVELS.c", 1276; {
 7398                        	
 7399                        		.dbg	line,	"include\routines_LEVELS.c", 1277; sgx_map_pxl_x += 2;
 7400                        		__add_st.wmiq	2, _sgx_map_pxl_x
         01:C394  18         			clc
         01:C395  AD 90 26   			lda.l	_sgx_map_pxl_x
         01:C398  69 02      			adc.l	#2
         01:C39A  8D 90 26   			sta.l	_sgx_map_pxl_x
         01:C39D  90 03      			bcc	!+
         01:C39F  EE 91 26   			inc.h	_sgx_map_pxl_x
         01:C3A2             	!:
 7401                        	
 7402                        		.dbg	line,	"include\routines_LEVELS.c", 1278; }
 7403                        	
 7404                        		.dbg	line,	"include\routines_LEVELS.c", 1279; }
 7405    01:C3A2             	.LL246	.alias		.LL247
 7406                        	
 7407                        		.dbg	line,	"include\routines_LEVELS.c", 1281; else
 7408                        		__bra		.LL247
         01:C3A2  80 34      			bra	.LL247
 7409    01:C3A4             	.LL245:
 7410                        	
 7411                        		.dbg	line,	"include\routines_LEVELS.c", 1282; {
 7412                        	
 7413                        		.dbg	line,	"include\routines_LEVELS.c", 1283; // CHECK COLLISION WITH LEFT WALL //
 7414                        	
 7415                        		.dbg	line,	"include\routines_LEVELS.c", 1284; check_BG( 8 , 31 ); // 8-2
 7416                        		__ld.wi		8
         01:C3A4  A9 08      			lda.l	#8
         01:C3A6  C2         			cly
 7417                        		__pusharg.wr
         01:C3A7  A6 8D      			ldx	<__sp
         01:C3A9  CA         			dex
         01:C3AA  CA         			dex
         01:C3AB  95 08      			sta.l	<__stack, x
         01:C3AD  94 09      			sty.h	<__stack, x
         01:C3AF  86 8D      			stx	<__sp
 7418                        		__ld.wi		31
         01:C3B1  A9 1F      			lda.l	#31
         01:C3B3  C2         			cly
 7419                        		__pusharg.wr
         01:C3B4  A6 8D      			ldx	<__sp
         01:C3B6  CA         			dex
         01:C3B7  CA         			dex
         01:C3B8  95 08      			sta.l	<__stack, x
         01:C3BA  94 09      			sty.h	<__stack, x
         01:C3BC  86 8D      			stx	<__sp
 7420                        		__call		_check_BG
         01:C3BE  20 6D FF   			call	_check_BG
 7421                        	
 7422                        		.dbg	line,	"include\routines_LEVELS.c", 1286; if(map_blk_flag == TILE_EMPTY)
 7423                        		__not.um	_map_blk_flag
         01:C3C1  AD B1 2B   			lda	_map_blk_flag
         01:C3C4  18         			clc
         01:C3C5  D0 01      			bne	!+
         01:C3C7  38         			sec
         01:C3C8             	!:
 7424                        		__bfalse	.LL248
         01:C3C8  90 0E      			bcc	.LL248
 7425                        	
 7426                        		.dbg	line,	"include\routines_LEVELS.c", 1287; {
 7427                        	
 7428                        		.dbg	line,	"include\routines_LEVELS.c", 1288; sgx_map_pxl_x -= 2;
 7429                        		__sub_st.wmiq	2, _sgx_map_pxl_x
         01:C3CA  38         			sec
         01:C3CB  AD 90 26   			lda.l	_sgx_map_pxl_x
         01:C3CE  E9 02      			sbc.l	#2
         01:C3D0  8D 90 26   			sta.l	_sgx_map_pxl_x
         01:C3D3  B0 03      			bcs	!+
         01:C3D5  CE 91 26   			dec.h	_sgx_map_pxl_x
         01:C3D8             	!:
 7430                        	
 7431                        		.dbg	line,	"include\routines_LEVELS.c", 1289; }
 7432                        	
 7433                        		.dbg	line,	"include\routines_LEVELS.c", 1290; }
 7434    01:C3D8             	.LL248:
 7435    01:C3D8             	.LL247:
 7436                        	
 7437                        		.dbg	line,	"include\routines_LEVELS.c", 1291; }
 7438    01:C3D8             	.LL244:
 7439                        	
 7440                        		.dbg	line,	"include\routines_LEVELS.c", 1296; spr_set(player_id);
 7441                        		__ld.umq	_player_id
         01:C3D8  AD 15 23   			lda	_player_id
 7442                        		__call		_spr_set.1
         01:C3DB  20 DD E7   			call	_spr_set.1
 7443                        	
 7444                        		.dbg	line,	"include\routines_LEVELS.c", 1299; // UPDATE PLAYER TILES //
 7445                        	
 7446                        		.dbg	line,	"include\routines_LEVELS.c", 1300; if(player_counter_anim == 0)
 7447                        		__not.um	_player_counter_anim
         01:C3DE  AD 19 23   			lda	_player_counter_anim
         01:C3E1  18         			clc
         01:C3E2  D0 01      			bne	!+
         01:C3E4  38         			sec
         01:C3E5             	!:
 7448                        		__bfalse	.LL249
         01:C3E5  90 34      			bcc	.LL249
 7449                        	
 7450                        		.dbg	line,	"include\routines_LEVELS.c", 1301; {
 7451                        	
 7452                        		.dbg	line,	"include\routines_LEVELS.c", 1302; spr_pattern(PLAYER_IDLE_VRAM_ADR);
 7453                        		__ld.wi		5120
         01:C3E7  62         			cla
         01:C3E8  A0 14      			ldy.h	#5120
 7454                        		__call		_spr_pattern.1
         01:C3EA  20 26 E8   			call	_spr_pattern.1
 7455                        	
 7456                        		.dbg	line,	"include\routines_LEVELS.c", 1304; spr_set(weapon_id);
 7457                        		__ld.umq	_weapon_id
         01:C3ED  AD 23 23   			lda	_weapon_id
 7458                        		__call		_spr_set.1
         01:C3F0  20 DD E7   			call	_spr_set.1
 7459                        	
 7460                        		.dbg	line,	"include\routines_LEVELS.c", 1305; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
 7461                        		__ld.wi		31808
         01:C3F3  A9 40      			lda.l	#31808
         01:C3F5  A0 7C      			ldy.h	#31808
 7462                        		__call		_spr_pattern.1
         01:C3F7  20 26 E8   			call	_spr_pattern.1
 7463                        	
 7464                        		.dbg	line,	"include\routines_LEVELS.c", 1306; spr_x(player_pos_x+8);
 7465                        		__ld.wm		_player_pos_x
         01:C3FA  AD D4 24   			lda.l	_player_pos_x
         01:C3FD  AC D5 24   			ldy.h	_player_pos_x
 7466                        		__add.wi	8
         01:C400  18         			clc
         01:C401  69 08      			adc.l	#8
         01:C403  90 01      			bcc	!+
         01:C405  C8         			iny
         01:C406             	!:
 7467                        		__call		_spr_x.1
         01:C406  20 0A E8   			call	_spr_x.1
 7468                        	
 7469                        		.dbg	line,	"include\routines_LEVELS.c", 1307; spr_y(player_pos_y+16);
 7470                        		__ld.wm		_player_pos_y
         01:C409  AD D6 24   			lda.l	_player_pos_y
         01:C40C  AC D7 24   			ldy.h	_player_pos_y
 7471                        		__add.wi	16
         01:C40F  18         			clc
         01:C410  69 10      			adc.l	#16
         01:C412  90 01      			bcc	!+
         01:C414  C8         			iny
         01:C415             	!:
 7472                        		__call		_spr_y.1
         01:C415  20 19 E8   			call	_spr_y.1
 7473                        	
 7474                        		.dbg	line,	"include\routines_LEVELS.c", 1308; }
 7475                        	
 7476                        		.dbg	line,	"include\routines_LEVELS.c", 1311; else if(player_counter_anim == 1)
 7477                        		__bra		.LL250
         01:C418  4C 46 C6   			bra	.LL250
 7478    01:C41B             	.LL249:
 7479                        		__ld.umq	_player_counter_anim
         01:C41B  AD 19 23   			lda	_player_counter_anim
 7480                        		__equ_b.uiq	1
         01:C41E  C9 01      			cmp	#1
         01:C420  F0 01      			beq	!+
         01:C422  18         			clc
         01:C423             	!:
 7481                        		__bfalse	.LL251
         01:C423  90 4F      			bcc	.LL251
 7482                        	
 7483                        		.dbg	line,	"include\routines_LEVELS.c", 1312; {
 7484                        	
 7485                        		.dbg	line,	"include\routines_LEVELS.c", 1313; spr_pattern(PLAYER_WALK_1_VRAM_ADR);
 7486                        		__ld.wi		5376
         01:C425  62         			cla
         01:C426  A0 15      			ldy.h	#5376
 7487                        		__call		_spr_pattern.1
         01:C428  20 26 E8   			call	_spr_pattern.1
 7488                        	
 7489                        		.dbg	line,	"include\routines_LEVELS.c", 1315; spr_set(weapon_id);
 7490                        		__ld.umq	_weapon_id
         01:C42B  AD 23 23   			lda	_weapon_id
 7491                        		__call		_spr_set.1
         01:C42E  20 DD E7   			call	_spr_set.1
 7492                        	
 7493                        		.dbg	line,	"include\routines_LEVELS.c", 1316; spr_pattern(WEAPON_WALK_1_VRAM_ADRESS);
 7494                        		__ld.wi		31872
         01:C431  A9 80      			lda.l	#31872
         01:C433  A0 7C      			ldy.h	#31872
 7495                        		__call		_spr_pattern.1
         01:C435  20 26 E8   			call	_spr_pattern.1
 7496                        	
 7497                        		.dbg	line,	"include\routines_LEVELS.c", 1317; spr_y(player_pos_y+17);
 7498                        		__ld.wm		_player_pos_y
         01:C438  AD D6 24   			lda.l	_player_pos_y
         01:C43B  AC D7 24   			ldy.h	_player_pos_y
 7499                        		__add.wi	17
         01:C43E  18         			clc
         01:C43F  69 11      			adc.l	#17
         01:C441  90 01      			bcc	!+
         01:C443  C8         			iny
         01:C444             	!:
 7500                        		__call		_spr_y.1
         01:C444  20 19 E8   			call	_spr_y.1
 7501                        	
 7502                        		.dbg	line,	"include\routines_LEVELS.c", 1319; if(player_axis == AXIS_RIGHT)
 7503                        		__not.um	_player_axis
         01:C447  AD 17 23   			lda	_player_axis
         01:C44A  18         			clc
         01:C44B  D0 01      			bne	!+
         01:C44D  38         			sec
         01:C44E             	!:
 7504                        		__bfalse	.LL252
         01:C44E  90 12      			bcc	.LL252
 7505                        	
 7506                        		.dbg	line,	"include\routines_LEVELS.c", 1320; {
 7507                        	
 7508                        		.dbg	line,	"include\routines_LEVELS.c", 1321; spr_x(player_pos_x+5);
 7509                        		__ld.wm		_player_pos_x
         01:C450  AD D4 24   			lda.l	_player_pos_x
         01:C453  AC D5 24   			ldy.h	_player_pos_x
 7510                        		__add.wi	5
         01:C456  18         			clc
         01:C457  69 05      			adc.l	#5
         01:C459  90 01      			bcc	!+
         01:C45B  C8         			iny
         01:C45C             	!:
 7511                        		__call		_spr_x.1
         01:C45C  20 0A E8   			call	_spr_x.1
 7512                        	
 7513                        		.dbg	line,	"include\routines_LEVELS.c", 1322; }
 7514                        	
 7515                        		.dbg	line,	"include\routines_LEVELS.c", 1324; else
 7516                        		__bra		.LL253
         01:C45F  4C 46 C6   			bra	.LL253
 7517    01:C462             	.LL252:
 7518                        	
 7519                        		.dbg	line,	"include\routines_LEVELS.c", 1325; {
 7520                        	
 7521                        		.dbg	line,	"include\routines_LEVELS.c", 1326; spr_x(player_pos_x+11);
 7522                        		__ld.wm		_player_pos_x
         01:C462  AD D4 24   			lda.l	_player_pos_x
         01:C465  AC D5 24   			ldy.h	_player_pos_x
 7523                        		__add.wi	11
         01:C468  18         			clc
         01:C469  69 0B      			adc.l	#11
         01:C46B  90 01      			bcc	!+
         01:C46D  C8         			iny
         01:C46E             	!:
 7524                        		__call		_spr_x.1
         01:C46E  20 0A E8   			call	_spr_x.1
 7525                        	
 7526                        		.dbg	line,	"include\routines_LEVELS.c", 1327; }
 7527    01:C471             	.LL253	.alias		.LL254
 7528                        	
 7529                        		.dbg	line,	"include\routines_LEVELS.c", 1328; }
 7530                        	
 7531                        		.dbg	line,	"include\routines_LEVELS.c", 1331; else if(player_counter_anim == 3)
 7532                        		__bra		.LL254
         01:C471  4C 46 C6   			bra	.LL254
 7533    01:C474             	.LL251:
 7534                        		__ld.umq	_player_counter_anim
         01:C474  AD 19 23   			lda	_player_counter_anim
 7535                        		__equ_b.uiq	3
         01:C477  C9 03      			cmp	#3
         01:C479  F0 01      			beq	!+
         01:C47B  18         			clc
         01:C47C             	!:
 7536                        		__bfalse	.LL255
         01:C47C  90 40      			bcc	.LL255
 7537                        	
 7538                        		.dbg	line,	"include\routines_LEVELS.c", 1332; {
 7539                        	
 7540                        		.dbg	line,	"include\routines_LEVELS.c", 1333; spr_pattern(PLAYER_WALK_2_VRAM_ADR);
 7541                        		__ld.wi		5632
         01:C47E  62         			cla
         01:C47F  A0 16      			ldy.h	#5632
 7542                        		__call		_spr_pattern.1
         01:C481  20 26 E8   			call	_spr_pattern.1
 7543                        	
 7544                        		.dbg	line,	"include\routines_LEVELS.c", 1334; 
 7545                        	
 7546                        		.dbg	line,	"include\routines_LEVELS.c", 1335; spr_set(weapon_id);
 7547                        		__ld.umq	_weapon_id
         01:C484  AD 23 23   			lda	_weapon_id
 7548                        		__call		_spr_set.1
         01:C487  20 DD E7   			call	_spr_set.1
 7549                        	
 7550                        		.dbg	line,	"include\routines_LEVELS.c", 1336; spr_pattern(WEAPON_WALK_2_VRAM_ADRESS);
 7551                        		__ld.wi		31936
         01:C48A  A9 C0      			lda.l	#31936
         01:C48C  A0 7C      			ldy.h	#31936
 7552                        		__call		_spr_pattern.1
         01:C48E  20 26 E8   			call	_spr_pattern.1
 7553                        	
 7554                        		.dbg	line,	"include\routines_LEVELS.c", 1338; if(player_axis == AXIS_RIGHT)
 7555                        		__not.um	_player_axis
         01:C491  AD 17 23   			lda	_player_axis
         01:C494  18         			clc
         01:C495  D0 01      			bne	!+
         01:C497  38         			sec
         01:C498             	!:
 7556                        		__bfalse	.LL256
         01:C498  90 12      			bcc	.LL256
 7557                        	
 7558                        		.dbg	line,	"include\routines_LEVELS.c", 1339; {
 7559                        	
 7560                        		.dbg	line,	"include\routines_LEVELS.c", 1340; spr_x(player_pos_x+3);
 7561                        		__ld.wm		_player_pos_x
         01:C49A  AD D4 24   			lda.l	_player_pos_x
         01:C49D  AC D5 24   			ldy.h	_player_pos_x
 7562                        		__add.wi	3
         01:C4A0  18         			clc
         01:C4A1  69 03      			adc.l	#3
         01:C4A3  90 01      			bcc	!+
         01:C4A5  C8         			iny
         01:C4A6             	!:
 7563                        		__call		_spr_x.1
         01:C4A6  20 0A E8   			call	_spr_x.1
 7564                        	
 7565                        		.dbg	line,	"include\routines_LEVELS.c", 1341; }
 7566                        	
 7567                        		.dbg	line,	"include\routines_LEVELS.c", 1343; else
 7568                        		__bra		.LL257
         01:C4A9  4C 46 C6   			bra	.LL257
 7569    01:C4AC             	.LL256:
 7570                        	
 7571                        		.dbg	line,	"include\routines_LEVELS.c", 1344; {
 7572                        	
 7573                        		.dbg	line,	"include\routines_LEVELS.c", 1345; spr_x(player_pos_x+13);
 7574                        		__ld.wm		_player_pos_x
         01:C4AC  AD D4 24   			lda.l	_player_pos_x
         01:C4AF  AC D5 24   			ldy.h	_player_pos_x
 7575                        		__add.wi	13
         01:C4B2  18         			clc
         01:C4B3  69 0D      			adc.l	#13
         01:C4B5  90 01      			bcc	!+
         01:C4B7  C8         			iny
         01:C4B8             	!:
 7576                        		__call		_spr_x.1
         01:C4B8  20 0A E8   			call	_spr_x.1
 7577                        	
 7578                        		.dbg	line,	"include\routines_LEVELS.c", 1346; }
 7579    01:C4BB             	.LL257	.alias		.LL258
 7580                        	
 7581                        		.dbg	line,	"include\routines_LEVELS.c", 1347; }
 7582                        	
 7583                        		.dbg	line,	"include\routines_LEVELS.c", 1350; else if(player_counter_anim == 6)
 7584                        		__bra		.LL258
         01:C4BB  4C 46 C6   			bra	.LL258
 7585    01:C4BE             	.LL255:
 7586                        		__ld.umq	_player_counter_anim
         01:C4BE  AD 19 23   			lda	_player_counter_anim
 7587                        		__equ_b.uiq	6
         01:C4C1  C9 06      			cmp	#6
         01:C4C3  F0 01      			beq	!+
         01:C4C5  18         			clc
         01:C4C6             	!:
 7588                        		__bfalse	.LL259
         01:C4C6  90 40      			bcc	.LL259
 7589                        	
 7590                        		.dbg	line,	"include\routines_LEVELS.c", 1351; {
 7591                        	
 7592                        		.dbg	line,	"include\routines_LEVELS.c", 1352; //spr_set(player_id);
 7593                        	
 7594                        		.dbg	line,	"include\routines_LEVELS.c", 1353; spr_pattern(PLAYER_WALK_3_VRAM_ADR);
 7595                        		__ld.wi		5888
         01:C4C8  62         			cla
         01:C4C9  A0 17      			ldy.h	#5888
 7596                        		__call		_spr_pattern.1
         01:C4CB  20 26 E8   			call	_spr_pattern.1
 7597                        	
 7598                        		.dbg	line,	"include\routines_LEVELS.c", 1355; spr_set(weapon_id);
 7599                        		__ld.umq	_weapon_id
         01:C4CE  AD 23 23   			lda	_weapon_id
 7600                        		__call		_spr_set.1
         01:C4D1  20 DD E7   			call	_spr_set.1
 7601                        	
 7602                        		.dbg	line,	"include\routines_LEVELS.c", 1356; spr_pattern(WEAPON_WALK_1_VRAM_ADRESS);
 7603                        		__ld.wi		31872
         01:C4D4  A9 80      			lda.l	#31872
         01:C4D6  A0 7C      			ldy.h	#31872
 7604                        		__call		_spr_pattern.1
         01:C4D8  20 26 E8   			call	_spr_pattern.1
 7605                        	
 7606                        		.dbg	line,	"include\routines_LEVELS.c", 1358; if(player_axis == AXIS_RIGHT)
 7607                        		__not.um	_player_axis
         01:C4DB  AD 17 23   			lda	_player_axis
         01:C4DE  18         			clc
         01:C4DF  D0 01      			bne	!+
         01:C4E1  38         			sec
         01:C4E2             	!:
 7608                        		__bfalse	.LL260
         01:C4E2  90 12      			bcc	.LL260
 7609                        	
 7610                        		.dbg	line,	"include\routines_LEVELS.c", 1359; {
 7611                        	
 7612                        		.dbg	line,	"include\routines_LEVELS.c", 1360; spr_x(player_pos_x+5);
 7613                        		__ld.wm		_player_pos_x
         01:C4E4  AD D4 24   			lda.l	_player_pos_x
         01:C4E7  AC D5 24   			ldy.h	_player_pos_x
 7614                        		__add.wi	5
         01:C4EA  18         			clc
         01:C4EB  69 05      			adc.l	#5
         01:C4ED  90 01      			bcc	!+
         01:C4EF  C8         			iny
         01:C4F0             	!:
 7615                        		__call		_spr_x.1
         01:C4F0  20 0A E8   			call	_spr_x.1
 7616                        	
 7617                        		.dbg	line,	"include\routines_LEVELS.c", 1361; }
 7618                        	
 7619                        		.dbg	line,	"include\routines_LEVELS.c", 1363; else
 7620                        		__bra		.LL261
         01:C4F3  4C 46 C6   			bra	.LL261
 7621    01:C4F6             	.LL260:
 7622                        	
 7623                        		.dbg	line,	"include\routines_LEVELS.c", 1364; {
 7624                        	
 7625                        		.dbg	line,	"include\routines_LEVELS.c", 1365; spr_x(player_pos_x+11);
 7626                        		__ld.wm		_player_pos_x
         01:C4F6  AD D4 24   			lda.l	_player_pos_x
         01:C4F9  AC D5 24   			ldy.h	_player_pos_x
 7627                        		__add.wi	11
         01:C4FC  18         			clc
         01:C4FD  69 0B      			adc.l	#11
         01:C4FF  90 01      			bcc	!+
         01:C501  C8         			iny
         01:C502             	!:
 7628                        		__call		_spr_x.1
         01:C502  20 0A E8   			call	_spr_x.1
 7629                        	
 7630                        		.dbg	line,	"include\routines_LEVELS.c", 1366; }
 7631    01:C505             	.LL261	.alias		.LL262
 7632                        	
 7633                        		.dbg	line,	"include\routines_LEVELS.c", 1367; }
 7634                        	
 7635                        		.dbg	line,	"include\routines_LEVELS.c", 1370; else if(player_counter_anim == 8)
 7636                        		__bra		.LL262
         01:C505  4C 46 C6   			bra	.LL262
 7637    01:C508             	.LL259:
 7638                        		__ld.umq	_player_counter_anim
         01:C508  AD 19 23   			lda	_player_counter_anim
 7639                        		__equ_b.uiq	8
         01:C50B  C9 08      			cmp	#8
         01:C50D  F0 01      			beq	!+
         01:C50F  18         			clc
         01:C510             	!:
 7640                        		__bfalse	.LL263
         01:C510  90 34      			bcc	.LL263
 7641                        	
 7642                        		.dbg	line,	"include\routines_LEVELS.c", 1371; {
 7643                        	
 7644                        		.dbg	line,	"include\routines_LEVELS.c", 1372; //spr_set(player_id);
 7645                        	
 7646                        		.dbg	line,	"include\routines_LEVELS.c", 1373; spr_pattern(PLAYER_IDLE_VRAM_ADR);
 7647                        		__ld.wi		5120
         01:C512  62         			cla
         01:C513  A0 14      			ldy.h	#5120
 7648                        		__call		_spr_pattern.1
         01:C515  20 26 E8   			call	_spr_pattern.1
 7649                        	
 7650                        		.dbg	line,	"include\routines_LEVELS.c", 1375; spr_set(weapon_id);
 7651                        		__ld.umq	_weapon_id
         01:C518  AD 23 23   			lda	_weapon_id
 7652                        		__call		_spr_set.1
         01:C51B  20 DD E7   			call	_spr_set.1
 7653                        	
 7654                        		.dbg	line,	"include\routines_LEVELS.c", 1376; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
 7655                        		__ld.wi		31808
         01:C51E  A9 40      			lda.l	#31808
         01:C520  A0 7C      			ldy.h	#31808
 7656                        		__call		_spr_pattern.1
         01:C522  20 26 E8   			call	_spr_pattern.1
 7657                        	
 7658                        		.dbg	line,	"include\routines_LEVELS.c", 1377; spr_x(player_pos_x+8);
 7659                        		__ld.wm		_player_pos_x
         01:C525  AD D4 24   			lda.l	_player_pos_x
         01:C528  AC D5 24   			ldy.h	_player_pos_x
 7660                        		__add.wi	8
         01:C52B  18         			clc
         01:C52C  69 08      			adc.l	#8
         01:C52E  90 01      			bcc	!+
         01:C530  C8         			iny
         01:C531             	!:
 7661                        		__call		_spr_x.1
         01:C531  20 0A E8   			call	_spr_x.1
 7662                        	
 7663                        		.dbg	line,	"include\routines_LEVELS.c", 1378; spr_y(player_pos_y+16);
 7664                        		__ld.wm		_player_pos_y
         01:C534  AD D6 24   			lda.l	_player_pos_y
         01:C537  AC D7 24   			ldy.h	_player_pos_y
 7665                        		__add.wi	16
         01:C53A  18         			clc
         01:C53B  69 10      			adc.l	#16
         01:C53D  90 01      			bcc	!+
         01:C53F  C8         			iny
         01:C540             	!:
 7666                        		__call		_spr_y.1
         01:C540  20 19 E8   			call	_spr_y.1
 7667                        	
 7668                        		.dbg	line,	"include\routines_LEVELS.c", 1379; }
 7669                        	
 7670                        		.dbg	line,	"include\routines_LEVELS.c", 1382; else if(player_counter_anim == 11)
 7671                        		__bra		.LL264
         01:C543  4C 46 C6   			bra	.LL264
 7672    01:C546             	.LL263:
 7673                        		__ld.umq	_player_counter_anim
         01:C546  AD 19 23   			lda	_player_counter_anim
 7674                        		__equ_b.uiq	11
         01:C549  C9 0B      			cmp	#11
         01:C54B  F0 01      			beq	!+
         01:C54D  18         			clc
         01:C54E             	!:
 7675                        		__bfalse	.LL265
         01:C54E  90 48      			bcc	.LL265
 7676                        	
 7677                        		.dbg	line,	"include\routines_LEVELS.c", 1383; {
 7678                        	
 7679                        		.dbg	line,	"include\routines_LEVELS.c", 1384; spr_pattern(PLAYER_WALK_4_VRAM_ADR);
 7680                        		__ld.wi		6144
         01:C550  62         			cla
         01:C551  A0 18      			ldy.h	#6144
 7681                        		__call		_spr_pattern.1
         01:C553  20 26 E8   			call	_spr_pattern.1
 7682                        	
 7683                        		.dbg	line,	"include\routines_LEVELS.c", 1386; spr_set(weapon_id);
 7684                        		__ld.umq	_weapon_id
         01:C556  AD 23 23   			lda	_weapon_id
 7685                        		__call		_spr_set.1
         01:C559  20 DD E7   			call	_spr_set.1
 7686                        	
 7687                        		.dbg	line,	"include\routines_LEVELS.c", 1387; spr_y(player_pos_y+14);
 7688                        		__ld.wm		_player_pos_y
         01:C55C  AD D6 24   			lda.l	_player_pos_y
         01:C55F  AC D7 24   			ldy.h	_player_pos_y
 7689                        		__add.wi	14
         01:C562  18         			clc
         01:C563  69 0E      			adc.l	#14
         01:C565  90 01      			bcc	!+
         01:C567  C8         			iny
         01:C568             	!:
 7690                        		__call		_spr_y.1
         01:C568  20 19 E8   			call	_spr_y.1
 7691                        	
 7692                        		.dbg	line,	"include\routines_LEVELS.c", 1389; if(player_axis == AXIS_RIGHT)
 7693                        		__not.um	_player_axis
         01:C56B  AD 17 23   			lda	_player_axis
         01:C56E  18         			clc
         01:C56F  D0 01      			bne	!+
         01:C571  38         			sec
         01:C572             	!:
 7694                        		__bfalse	.LL266
         01:C572  90 12      			bcc	.LL266
 7695                        	
 7696                        		.dbg	line,	"include\routines_LEVELS.c", 1390; {
 7697                        	
 7698                        		.dbg	line,	"include\routines_LEVELS.c", 1391; spr_x(player_pos_x+12);
 7699                        		__ld.wm		_player_pos_x
         01:C574  AD D4 24   			lda.l	_player_pos_x
         01:C577  AC D5 24   			ldy.h	_player_pos_x
 7700                        		__add.wi	12
         01:C57A  18         			clc
         01:C57B  69 0C      			adc.l	#12
         01:C57D  90 01      			bcc	!+
         01:C57F  C8         			iny
         01:C580             	!:
 7701                        		__call		_spr_x.1
         01:C580  20 0A E8   			call	_spr_x.1
 7702                        	
 7703                        		.dbg	line,	"include\routines_LEVELS.c", 1392; }
 7704                        	
 7705                        		.dbg	line,	"include\routines_LEVELS.c", 1394; else
 7706                        		__bra		.LL267
         01:C583  4C 46 C6   			bra	.LL267
 7707    01:C586             	.LL266:
 7708                        	
 7709                        		.dbg	line,	"include\routines_LEVELS.c", 1395; {
 7710                        	
 7711                        		.dbg	line,	"include\routines_LEVELS.c", 1396; spr_x(player_pos_x+4);
 7712                        		__ld.wm		_player_pos_x
         01:C586  AD D4 24   			lda.l	_player_pos_x
         01:C589  AC D5 24   			ldy.h	_player_pos_x
 7713                        		__add.wi	4
         01:C58C  18         			clc
         01:C58D  69 04      			adc.l	#4
         01:C58F  90 01      			bcc	!+
         01:C591  C8         			iny
         01:C592             	!:
 7714                        		__call		_spr_x.1
         01:C592  20 0A E8   			call	_spr_x.1
 7715                        	
 7716                        		.dbg	line,	"include\routines_LEVELS.c", 1397; }
 7717    01:C595             	.LL267	.alias		.LL268
 7718                        	
 7719                        		.dbg	line,	"include\routines_LEVELS.c", 1398; }
 7720                        	
 7721                        		.dbg	line,	"include\routines_LEVELS.c", 1401; else if(player_counter_anim == 14)
 7722                        		__bra		.LL268
         01:C595  4C 46 C6   			bra	.LL268
 7723    01:C598             	.LL265:
 7724                        		__ld.umq	_player_counter_anim
         01:C598  AD 19 23   			lda	_player_counter_anim
 7725                        		__equ_b.uiq	14
         01:C59B  C9 0E      			cmp	#14
         01:C59D  F0 01      			beq	!+
         01:C59F  18         			clc
         01:C5A0             	!:
 7726                        		__bfalse	.LL269
         01:C5A0  90 44      			bcc	.LL269
 7727                        	
 7728                        		.dbg	line,	"include\routines_LEVELS.c", 1402; {
 7729                        	
 7730                        		.dbg	line,	"include\routines_LEVELS.c", 1403; spr_pattern(PLAYER_WALK_5_VRAM_ADR);
 7731                        		__ld.wi		6400
         01:C5A2  62         			cla
         01:C5A3  A0 19      			ldy.h	#6400
 7732                        		__call		_spr_pattern.1
         01:C5A5  20 26 E8   			call	_spr_pattern.1
 7733                        	
 7734                        		.dbg	line,	"include\routines_LEVELS.c", 1405; spr_set(weapon_id);
 7735                        		__ld.umq	_weapon_id
         01:C5A8  AD 23 23   			lda	_weapon_id
 7736                        		__call		_spr_set.1
         01:C5AB  20 DD E7   			call	_spr_set.1
 7737                        	
 7738                        		.dbg	line,	"include\routines_LEVELS.c", 1406; spr_y(player_pos_y+12);
 7739                        		__ld.wm		_player_pos_y
         01:C5AE  AD D6 24   			lda.l	_player_pos_y
         01:C5B1  AC D7 24   			ldy.h	_player_pos_y
 7740                        		__add.wi	12
         01:C5B4  18         			clc
         01:C5B5  69 0C      			adc.l	#12
         01:C5B7  90 01      			bcc	!+
         01:C5B9  C8         			iny
         01:C5BA             	!:
 7741                        		__call		_spr_y.1
         01:C5BA  20 19 E8   			call	_spr_y.1
 7742                        	
 7743                        		.dbg	line,	"include\routines_LEVELS.c", 1408; if(player_axis == AXIS_RIGHT)
 7744                        		__not.um	_player_axis
         01:C5BD  AD 17 23   			lda	_player_axis
         01:C5C0  18         			clc
         01:C5C1  D0 01      			bne	!+
         01:C5C3  38         			sec
         01:C5C4             	!:
 7745                        		__bfalse	.LL270
         01:C5C4  90 11      			bcc	.LL270
 7746                        	
 7747                        		.dbg	line,	"include\routines_LEVELS.c", 1409; {
 7748                        	
 7749                        		.dbg	line,	"include\routines_LEVELS.c", 1410; spr_x(player_pos_x+15);
 7750                        		__ld.wm		_player_pos_x
         01:C5C6  AD D4 24   			lda.l	_player_pos_x
         01:C5C9  AC D5 24   			ldy.h	_player_pos_x
 7751                        		__add.wi	15
         01:C5CC  18         			clc
         01:C5CD  69 0F      			adc.l	#15
         01:C5CF  90 01      			bcc	!+
         01:C5D1  C8         			iny
         01:C5D2             	!:
 7752                        		__call		_spr_x.1
         01:C5D2  20 0A E8   			call	_spr_x.1
 7753                        	
 7754                        		.dbg	line,	"include\routines_LEVELS.c", 1411; }
 7755                        	
 7756                        		.dbg	line,	"include\routines_LEVELS.c", 1413; else
 7757                        		__bra		.LL271
         01:C5D5  80 6F      			bra	.LL271
 7758    01:C5D7             	.LL270:
 7759                        	
 7760                        		.dbg	line,	"include\routines_LEVELS.c", 1414; {
 7761                        	
 7762                        		.dbg	line,	"include\routines_LEVELS.c", 1415; spr_x(player_pos_x+1);
 7763                        		__ld.wm		_player_pos_x
         01:C5D7  AD D4 24   			lda.l	_player_pos_x
         01:C5DA  AC D5 24   			ldy.h	_player_pos_x
 7764                        		__add.wi	1
         01:C5DD  1A         			inc	a
         01:C5DE  D0 01      			bne	!+
         01:C5E0  C8         			iny
         01:C5E1             	!:
 7765                        		__call		_spr_x.1
         01:C5E1  20 0A E8   			call	_spr_x.1
 7766                        	
 7767                        		.dbg	line,	"include\routines_LEVELS.c", 1416; }
 7768    01:C5E4             	.LL271	.alias		.LL272
 7769                        	
 7770                        		.dbg	line,	"include\routines_LEVELS.c", 1417; }
 7771                        	
 7772                        		.dbg	line,	"include\routines_LEVELS.c", 1420; else if(player_counter_anim == 17)
 7773                        		__bra		.LL272
         01:C5E4  80 60      			bra	.LL272
 7774    01:C5E6             	.LL269:
 7775                        		__ld.umq	_player_counter_anim
         01:C5E6  AD 19 23   			lda	_player_counter_anim
 7776                        		__equ_b.uiq	17
         01:C5E9  C9 11      			cmp	#17
         01:C5EB  F0 01      			beq	!+
         01:C5ED  18         			clc
         01:C5EE             	!:
 7777                        		__bfalse	.LL273
         01:C5EE  90 46      			bcc	.LL273
 7778                        	
 7779                        		.dbg	line,	"include\routines_LEVELS.c", 1421; {
 7780                        	
 7781                        		.dbg	line,	"include\routines_LEVELS.c", 1422; spr_pattern(PLAYER_WALK_6_VRAM_ADR);
 7782                        		__ld.wi		6656
         01:C5F0  62         			cla
         01:C5F1  A0 1A      			ldy.h	#6656
 7783                        		__call		_spr_pattern.1
         01:C5F3  20 26 E8   			call	_spr_pattern.1
 7784                        	
 7785                        		.dbg	line,	"include\routines_LEVELS.c", 1424; spr_set(weapon_id);
 7786                        		__ld.umq	_weapon_id
         01:C5F6  AD 23 23   			lda	_weapon_id
 7787                        		__call		_spr_set.1
         01:C5F9  20 DD E7   			call	_spr_set.1
 7788                        	
 7789                        		.dbg	line,	"include\routines_LEVELS.c", 1425; spr_y(player_pos_y+14);
 7790                        		__ld.wm		_player_pos_y
         01:C5FC  AD D6 24   			lda.l	_player_pos_y
         01:C5FF  AC D7 24   			ldy.h	_player_pos_y
 7791                        		__add.wi	14
         01:C602  18         			clc
         01:C603  69 0E      			adc.l	#14
         01:C605  90 01      			bcc	!+
         01:C607  C8         			iny
         01:C608             	!:
 7792                        		__call		_spr_y.1
         01:C608  20 19 E8   			call	_spr_y.1
 7793                        	
 7794                        		.dbg	line,	"include\routines_LEVELS.c", 1427; if(player_axis == AXIS_RIGHT)
 7795                        		__not.um	_player_axis
         01:C60B  AD 17 23   			lda	_player_axis
         01:C60E  18         			clc
         01:C60F  D0 01      			bne	!+
         01:C611  38         			sec
         01:C612             	!:
 7796                        		__bfalse	.LL274
         01:C612  90 11      			bcc	.LL274
 7797                        	
 7798                        		.dbg	line,	"include\routines_LEVELS.c", 1428; {
 7799                        	
 7800                        		.dbg	line,	"include\routines_LEVELS.c", 1429; spr_x(player_pos_x+12);
 7801                        		__ld.wm		_player_pos_x
         01:C614  AD D4 24   			lda.l	_player_pos_x
         01:C617  AC D5 24   			ldy.h	_player_pos_x
 7802                        		__add.wi	12
         01:C61A  18         			clc
         01:C61B  69 0C      			adc.l	#12
         01:C61D  90 01      			bcc	!+
         01:C61F  C8         			iny
         01:C620             	!:
 7803                        		__call		_spr_x.1
         01:C620  20 0A E8   			call	_spr_x.1
 7804                        	
 7805                        		.dbg	line,	"include\routines_LEVELS.c", 1430; }
 7806                        	
 7807                        		.dbg	line,	"include\routines_LEVELS.c", 1432; else
 7808                        		__bra		.LL275
         01:C623  80 21      			bra	.LL275
 7809    01:C625             	.LL274:
 7810                        	
 7811                        		.dbg	line,	"include\routines_LEVELS.c", 1433; {
 7812                        	
 7813                        		.dbg	line,	"include\routines_LEVELS.c", 1434; spr_x(player_pos_x+4);
 7814                        		__ld.wm		_player_pos_x
         01:C625  AD D4 24   			lda.l	_player_pos_x
         01:C628  AC D5 24   			ldy.h	_player_pos_x
 7815                        		__add.wi	4
         01:C62B  18         			clc
         01:C62C  69 04      			adc.l	#4
         01:C62E  90 01      			bcc	!+
         01:C630  C8         			iny
         01:C631             	!:
 7816                        		__call		_spr_x.1
         01:C631  20 0A E8   			call	_spr_x.1
 7817                        	
 7818                        		.dbg	line,	"include\routines_LEVELS.c", 1435; } 
 7819    01:C634             	.LL275	.alias		.LL276
 7820                        	
 7821                        		.dbg	line,	"include\routines_LEVELS.c", 1436; }
 7822                        	
 7823                        		.dbg	line,	"include\routines_LEVELS.c", 1439; else if(player_counter_anim == 18)
 7824                        		__bra		.LL276
         01:C634  80 10      			bra	.LL276
 7825    01:C636             	.LL273:
 7826                        		__ld.umq	_player_counter_anim
         01:C636  AD 19 23   			lda	_player_counter_anim
 7827                        		__equ_b.uiq	18
         01:C639  C9 12      			cmp	#18
         01:C63B  F0 01      			beq	!+
         01:C63D  18         			clc
         01:C63E             	!:
 7828                        		__bfalse	.LL277
         01:C63E  90 06      			bcc	.LL277
 7829                        	
 7830                        		.dbg	line,	"include\routines_LEVELS.c", 1440; {
 7831                        	
 7832                        		.dbg	line,	"include\routines_LEVELS.c", 1441; player_counter_anim = 0;
 7833                        		__st.umiq	0, _player_counter_anim
         01:C640  9C 19 23   			stz	_player_counter_anim
 7834                        	
 7835                        		.dbg	line,	"include\routines_LEVELS.c", 1443; return;
 7836                        		__bra		.LL230
         01:C643  4C 0B DB   			bra	.LL230
 7837                        	
 7838                        		.dbg	line,	"include\routines_LEVELS.c", 1444; }
 7839                        	
 7840                        		.dbg	line,	"include\routines_LEVELS.c", 1447; player_counter_anim += 1;
 7841    01:C646             	.LL277:
 7842    01:C646             	.LL276:
 7843    01:C646             	.LL272:
 7844    01:C646             	.LL268:
 7845    01:C646             	.LL264:
 7846    01:C646             	.LL262:
 7847    01:C646             	.LL258:
 7848    01:C646             	.LL254:
 7849    01:C646             	.LL250:
 7850                        		__add_st.umiq	1, _player_counter_anim
         01:C646  EE 19 23   			inc	_player_counter_anim
 7851                        	
 7852                        		.dbg	line,	"include\routines_LEVELS.c", 1449; }
 7853                        	
 7854                        		.dbg	line,	"include\routines_LEVELS.c", 1452; else if(player_state == STATE_JUMP)
 7855                        		__bra		.LL278
         01:C649  4C 0B DB   			bra	.LL278
 7856    01:C64C             	.LL236:
 7857                        		__ld.umq	_player_state
         01:C64C  AD 16 23   			lda	_player_state
 7858                        		__equ_b.uiq	4
         01:C64F  C9 04      			cmp	#4
         01:C651  F0 01      			beq	!+
         01:C653  18         			clc
         01:C654             	!:
 7859                        		__bfalse	.LL279
         01:C654  B0 03 4C 50			bcc	.LL279
         01:C658  CC          
 7860                        	
 7861                        		.dbg	line,	"include\routines_LEVELS.c", 1453; {
 7862                        	
 7863                        		.dbg	line,	"include\routines_LEVELS.c", 1454; unsigned char i;
 7864                        	
 7865                        		.dbg	line,	"include\routines_LEVELS.c", 1455; i = 1;
 7866                        		__st.umiq	1, __update_PLAYER_end - 1  /* i */
         01:C659  A9 01      			lda.l	#1
         01:C65B  8D 0C 23   			sta	__update_PLAYER_end - 1
 7867                        	
 7868                        		.dbg	line,	"include\routines_LEVELS.c", 1458; if(player_counter_anim == 0)
 7869                        		__not.um	_player_counter_anim
         01:C65E  AD 19 23   			lda	_player_counter_anim
         01:C661  18         			clc
         01:C662  D0 01      			bne	!+
         01:C664  38         			sec
         01:C665             	!:
 7870                        		__bfalse	.LL280
         01:C665  90 11      			bcc	.LL280
 7871                        	
 7872                        		.dbg	line,	"include\routines_LEVELS.c", 1459; {
 7873                        	
 7874                        		.dbg	line,	"include\routines_LEVELS.c", 1460; spr_set(player_id);
 7875                        		__ld.umq	_player_id
         01:C667  AD 15 23   			lda	_player_id
 7876                        		__call		_spr_set.1
         01:C66A  20 DD E7   			call	_spr_set.1
 7877                        	
 7878                        		.dbg	line,	"include\routines_LEVELS.c", 1461; spr_pattern(PLAYER_JUMP_VRAM_ADR);
 7879                        		__ld.wi		6912
         01:C66D  62         			cla
         01:C66E  A0 1B      			ldy.h	#6912
 7880                        		__call		_spr_pattern.1
         01:C670  20 26 E8   			call	_spr_pattern.1
 7881                        	
 7882                        		.dbg	line,	"include\routines_LEVELS.c", 1463; player_counter_anim = 1;
 7883                        		__st.umiq	1, _player_counter_anim
         01:C673  A9 01      			lda.l	#1
         01:C675  8D 19 23   			sta	_player_counter_anim
 7884                        	
 7885                        		.dbg	line,	"include\routines_LEVELS.c", 1464; }
 7886                        	
 7887                        		.dbg	line,	"include\routines_LEVELS.c", 1467; player_pos_y += TABLE_PLAYER_JUMP_V[player_index_jump];
 7888    01:C678             	.LL280:
 7889                        		__ldx.umq	_player_index_jump
         01:C678  AE 1A 23   			ldx	_player_index_jump
 7890                        		__ld.bax	_TABLE_PLAYER_JUMP_V
         01:C67B  BD 1D 61   			lda	_TABLE_PLAYER_JUMP_V, x
         01:C67E  C2         			cly
         01:C67F  10 01      			bpl	!+
         01:C681  88         			dey
         01:C682             	!:
 7891                        		__add_st.wmq	_player_pos_y
         01:C682  18         			clc
         01:C683  6D D6 24   			adc.l	_player_pos_y
         01:C686  8D D6 24   			sta.l	_player_pos_y
         01:C689  98         			tya
         01:C68A  6D D7 24   			adc.h	_player_pos_y
         01:C68D  8D D7 24   			sta.h	_player_pos_y
 7892                        	
 7893                        		.dbg	line,	"include\routines_LEVELS.c", 1469; // CHECK COLLISION WITH CEILING //
 7894                        	
 7895                        		.dbg	line,	"include\routines_LEVELS.c", 1470; check_BG( 15 , 8 );
 7896                        		__ld.wi		15
         01:C690  A9 0F      			lda.l	#15
         01:C692  C2         			cly
 7897                        		__pusharg.wr
         01:C693  A6 8D      			ldx	<__sp
         01:C695  CA         			dex
         01:C696  CA         			dex
         01:C697  95 08      			sta.l	<__stack, x
         01:C699  94 09      			sty.h	<__stack, x
         01:C69B  86 8D      			stx	<__sp
 7898                        		__ld.wi		8
         01:C69D  A9 08      			lda.l	#8
         01:C69F  C2         			cly
 7899                        		__pusharg.wr
         01:C6A0  A6 8D      			ldx	<__sp
         01:C6A2  CA         			dex
         01:C6A3  CA         			dex
         01:C6A4  95 08      			sta.l	<__stack, x
         01:C6A6  94 09      			sty.h	<__stack, x
         01:C6A8  86 8D      			stx	<__sp
 7900                        		__call		_check_BG
         01:C6AA  20 6D FF   			call	_check_BG
 7901                        	
 7902                        		.dbg	line,	"include\routines_LEVELS.c", 1472; if(map_blk_flag == TILE_BG)
 7903                        		__ld.umq	_map_blk_flag
         01:C6AD  AD B1 2B   			lda	_map_blk_flag
 7904                        		__equ_b.uiq	1
         01:C6B0  C9 01      			cmp	#1
         01:C6B2  F0 01      			beq	!+
         01:C6B4  18         			clc
         01:C6B5             	!:
 7905                        		__bfalse	.LL281
         01:C6B5  90 5A      			bcc	.LL281
 7906                        	
 7907                        		.dbg	line,	"include\routines_LEVELS.c", 1473; {
 7908                        	
 7909                        		.dbg	line,	"include\routines_LEVELS.c", 1474; for(i=1 ; i<8 ; i++)
 7910                        		__st.umiq	1, __update_PLAYER_end - 1  /* i */
         01:C6B7  A9 01      			lda.l	#1
         01:C6B9  8D 0C 23   			sta	__update_PLAYER_end - 1
 7911    01:C6BC             	.LL282:
 7912                        		__ld.umq	__update_PLAYER_end - 1  /* i */
         01:C6BC  AD 0C 23   			lda	__update_PLAYER_end - 1
 7913                        		__ult_b.uiq	8
         01:C6BF  C9 08      			cmp	#8		; Subtract integer from A.
         01:C6C1  6A         			ror	a		; CC if A < integer.
         01:C6C2  49 80      			eor	#$80
         01:C6C4  2A         			rol	a
 7914                        		__btrue		.LL284
         01:C6C5  B0 07      			bcs	.LL284
 7915                        		__bra		.LL285
         01:C6C7  80 48      			bra	.LL285
 7916    01:C6C9             	.LL283:
 7917                        		__inc.umq	__update_PLAYER_end - 1  /* i */
         01:C6C9  EE 0C 23   			inc	__update_PLAYER_end - 1
 7918                        		__bra		.LL282
         01:C6CC  80 EE      			bra	.LL282
 7919    01:C6CE             	.LL284:
 7920                        	
 7921                        		.dbg	line,	"include\routines_LEVELS.c", 1475; {
 7922                        	
 7923                        		.dbg	line,	"include\routines_LEVELS.c", 1476; check_BG( 15 , 8 + i );
 7924                        		__ld.wi		15
         01:C6CE  A9 0F      			lda.l	#15
         01:C6D0  C2         			cly
 7925                        		__pusharg.wr
         01:C6D1  A6 8D      			ldx	<__sp
         01:C6D3  CA         			dex
         01:C6D4  CA         			dex
         01:C6D5  95 08      			sta.l	<__stack, x
         01:C6D7  94 09      			sty.h	<__stack, x
         01:C6D9  86 8D      			stx	<__sp
 7926                        		__ld.wi		8
         01:C6DB  A9 08      			lda.l	#8
         01:C6DD  C2         			cly
 7927                        		__add.um	__update_PLAYER_end - 1  /* i */
         01:C6DE  18         			clc
         01:C6DF  6D 0C 23   			adc	__update_PLAYER_end - 1
         01:C6E2  90 01      			bcc	!+
         01:C6E4  C8         			iny
         01:C6E5             	!:
 7928                        		__pusharg.wr
         01:C6E5  A6 8D      			ldx	<__sp
         01:C6E7  CA         			dex
         01:C6E8  CA         			dex
         01:C6E9  95 08      			sta.l	<__stack, x
         01:C6EB  94 09      			sty.h	<__stack, x
         01:C6ED  86 8D      			stx	<__sp
 7929                        		__call		_check_BG
         01:C6EF  20 6D FF   			call	_check_BG
 7930                        	
 7931                        		.dbg	line,	"include\routines_LEVELS.c", 1477; {
 7932                        	
 7933                        		.dbg	line,	"include\routines_LEVELS.c", 1478; if(map_blk_flag == TILE_EMPTY)
 7934                        		__not.um	_map_blk_flag
         01:C6F2  AD B1 2B   			lda	_map_blk_flag
         01:C6F5  18         			clc
         01:C6F6  D0 01      			bne	!+
         01:C6F8  38         			sec
         01:C6F9             	!:
 7935                        		__bfalse	.LL286
         01:C6F9  90 CE      			bcc	.LL286
 7936                        	
 7937                        		.dbg	line,	"include\routines_LEVELS.c", 1479; {
 7938                        	
 7939                        		.dbg	line,	"include\routines_LEVELS.c", 1480; player_pos_y += i;
 7940                        		__ld.um		__update_PLAYER_end - 1  /* i */
         01:C6FB  AD 0C 23   			lda	__update_PLAYER_end - 1
         01:C6FE  C2         			cly
 7941                        		__add_st.wmq	_player_pos_y
         01:C6FF  18         			clc
         01:C700  6D D6 24   			adc.l	_player_pos_y
         01:C703  8D D6 24   			sta.l	_player_pos_y
         01:C706  98         			tya
         01:C707  6D D7 24   			adc.h	_player_pos_y
         01:C70A  8D D7 24   			sta.h	_player_pos_y
 7942                        	
 7943                        		.dbg	line,	"include\routines_LEVELS.c", 1481; break;
 7944                        		__bra		.LL285
         01:C70D  80 02      			bra	.LL285
 7945                        	
 7946                        		.dbg	line,	"include\routines_LEVELS.c", 1482; }
 7947                        	
 7948                        		.dbg	line,	"include\routines_LEVELS.c", 1483; }
 7949    01:C70F             	.LL286	.alias		.LL283
 7950                        	
 7951                        		.dbg	line,	"include\routines_LEVELS.c", 1484; }
 7952                        		__bra		.LL283
         01:C70F  80 B8      			bra	.LL283
 7953    01:C711             	.LL285:
 7954                        	
 7955                        		.dbg	line,	"include\routines_LEVELS.c", 1485; }
 7956                        	
 7957                        		.dbg	line,	"include\routines_LEVELS.c", 1488; if(player_attack == FALSE)
 7958    01:C711             	.LL281:
 7959                        		__not.um	_player_attack
         01:C711  AD 1E 23   			lda	_player_attack
         01:C714  18         			clc
         01:C715  D0 01      			bne	!+
         01:C717  38         			sec
         01:C718             	!:
 7960                        		__bfalse	.LL287
         01:C718  90 18      			bcc	.LL287
 7961                        	
 7962                        		.dbg	line,	"include\routines_LEVELS.c", 1489; {
 7963                        	
 7964                        		.dbg	line,	"include\routines_LEVELS.c", 1490; spr_set(weapon_id);
 7965                        		__ld.umq	_weapon_id
         01:C71A  AD 23 23   			lda	_weapon_id
 7966                        		__call		_spr_set.1
         01:C71D  20 DD E7   			call	_spr_set.1
 7967                        	
 7968                        		.dbg	line,	"include\routines_LEVELS.c", 1491; spr_y(player_pos_y+8);
 7969                        		__ld.wm		_player_pos_y
         01:C720  AD D6 24   			lda.l	_player_pos_y
         01:C723  AC D7 24   			ldy.h	_player_pos_y
 7970                        		__add.wi	8
         01:C726  18         			clc
         01:C727  69 08      			adc.l	#8
         01:C729  90 01      			bcc	!+
         01:C72B  C8         			iny
         01:C72C             	!:
 7971                        		__call		_spr_y.1
         01:C72C  20 19 E8   			call	_spr_y.1
 7972                        	
 7973                        		.dbg	line,	"include\routines_LEVELS.c", 1492; }
 7974                        	
 7975                        		.dbg	line,	"include\routines_LEVELS.c", 1494; 
 7976                        	
 7977                        		.dbg	line,	"include\routines_LEVELS.c", 1495; else
 7978                        		__bra		.LL288
         01:C72F  4C DB C9   			bra	.LL288
 7979    01:C732             	.LL287:
 7980                        	
 7981                        		.dbg	line,	"include\routines_LEVELS.c", 1496; {
 7982                        	
 7983                        		.dbg	line,	"include\routines_LEVELS.c", 1497; if(player_counter_attack == 0)
 7984                        		__not.um	_player_counter_attack
         01:C732  AD 1C 23   			lda	_player_counter_attack
         01:C735  18         			clc
         01:C736  D0 01      			bne	!+
         01:C738  38         			sec
         01:C739             	!:
 7985                        		__bfalse	.LL289
         01:C739  90 53      			bcc	.LL289
 7986                        	
 7987                        		.dbg	line,	"include\routines_LEVELS.c", 1498; {
 7988                        	
 7989                        		.dbg	line,	"include\routines_LEVELS.c", 1499; spr_set(player_id);
 7990                        		__ld.umq	_player_id
         01:C73B  AD 15 23   			lda	_player_id
 7991                        		__call		_spr_set.1
         01:C73E  20 DD E7   			call	_spr_set.1
 7992                        	
 7993                        		.dbg	line,	"include\routines_LEVELS.c", 1500; spr_pattern(PLAYER_JUMP_ATTACK_1_VRAM_ADR);
 7994                        		__ld.wi		10496
         01:C741  62         			cla
         01:C742  A0 29      			ldy.h	#10496
 7995                        		__call		_spr_pattern.1
         01:C744  20 26 E8   			call	_spr_pattern.1
 7996                        	
 7997                        		.dbg	line,	"include\routines_LEVELS.c", 1502; spr_set(weapon_id);
 7998                        		__ld.umq	_weapon_id
         01:C747  AD 23 23   			lda	_weapon_id
 7999                        		__call		_spr_set.1
         01:C74A  20 DD E7   			call	_spr_set.1
 8000                        	
 8001                        		.dbg	line,	"include\routines_LEVELS.c", 1503; spr_pattern(WEAPON_ATTACK_1_VRAM_ADRESS);
 8002                        		__ld.wi		32000
         01:C74D  62         			cla
         01:C74E  A0 7D      			ldy.h	#32000
 8003                        		__call		_spr_pattern.1
         01:C750  20 26 E8   			call	_spr_pattern.1
 8004                        	
 8005                        		.dbg	line,	"include\routines_LEVELS.c", 1505; if(player_axis == AXIS_RIGHT)
 8006                        		__not.um	_player_axis
         01:C753  AD 17 23   			lda	_player_axis
         01:C756  18         			clc
         01:C757  D0 01      			bne	!+
         01:C759  38         			sec
         01:C75A             	!:
 8007                        		__bfalse	.LL290
         01:C75A  90 11      			bcc	.LL290
 8008                        	
 8009                        		.dbg	line,	"include\routines_LEVELS.c", 1506; {
 8010                        	
 8011                        		.dbg	line,	"include\routines_LEVELS.c", 1507; spr_x(player_pos_x-14);
 8012                        		__ld.wm		_player_pos_x
         01:C75C  AD D4 24   			lda.l	_player_pos_x
         01:C75F  AC D5 24   			ldy.h	_player_pos_x
 8013                        		__sub.wi	14
         01:C762  38         			sec
         01:C763  E9 0E      			sbc.l	#14
         01:C765  B0 01      			bcs	!+
         01:C767  88         			dey
         01:C768             	!:
 8014                        		__call		_spr_x.1
         01:C768  20 0A E8   			call	_spr_x.1
 8015                        	
 8016                        		.dbg	line,	"include\routines_LEVELS.c", 1508; }
 8017                        	
 8018                        		.dbg	line,	"include\routines_LEVELS.c", 1510; else
 8019                        		__bra		.LL291
         01:C76B  80 0F      			bra	.LL291
 8020    01:C76D             	.LL290:
 8021                        	
 8022                        		.dbg	line,	"include\routines_LEVELS.c", 1511; {
 8023                        	
 8024                        		.dbg	line,	"include\routines_LEVELS.c", 1512; spr_x(player_pos_x+29);
 8025                        		__ld.wm		_player_pos_x
         01:C76D  AD D4 24   			lda.l	_player_pos_x
         01:C770  AC D5 24   			ldy.h	_player_pos_x
 8026                        		__add.wi	29
         01:C773  18         			clc
         01:C774  69 1D      			adc.l	#29
         01:C776  90 01      			bcc	!+
         01:C778  C8         			iny
         01:C779             	!:
 8027                        		__call		_spr_x.1
         01:C779  20 0A E8   			call	_spr_x.1
 8028                        	
 8029                        		.dbg	line,	"include\routines_LEVELS.c", 1513; }
 8030    01:C77C             	.LL291:
 8031                        	
 8032                        		.dbg	line,	"include\routines_LEVELS.c", 1515; spr_y(player_pos_y-8);
 8033                        		__ld.wm		_player_pos_y
         01:C77C  AD D6 24   			lda.l	_player_pos_y
         01:C77F  AC D7 24   			ldy.h	_player_pos_y
 8034                        		__sub.wi	8
         01:C782  38         			sec
         01:C783  E9 08      			sbc.l	#8
         01:C785  B0 01      			bcs	!+
         01:C787  88         			dey
         01:C788             	!:
 8035                        		__call		_spr_y.1
         01:C788  20 19 E8   			call	_spr_y.1
 8036                        	
 8037                        		.dbg	line,	"include\routines_LEVELS.c", 1516; }
 8038                        	
 8039                        		.dbg	line,	"include\routines_LEVELS.c", 1518; else if(player_counter_attack == 6)
 8040                        		__bra		.LL292
         01:C78B  4C D8 C9   			bra	.LL292
 8041    01:C78E             	.LL289:
 8042                        		__ld.umq	_player_counter_attack
         01:C78E  AD 1C 23   			lda	_player_counter_attack
 8043                        		__equ_b.uiq	6
         01:C791  C9 06      			cmp	#6
         01:C793  F0 01      			beq	!+
         01:C795  18         			clc
         01:C796             	!:
 8044                        		__bfalse	.LL293
         01:C796  90 54      			bcc	.LL293
 8045                        	
 8046                        		.dbg	line,	"include\routines_LEVELS.c", 1519; {
 8047                        	
 8048                        		.dbg	line,	"include\routines_LEVELS.c", 1520; spr_set(player_id);
 8049                        		__ld.umq	_player_id
         01:C798  AD 15 23   			lda	_player_id
 8050                        		__call		_spr_set.1
         01:C79B  20 DD E7   			call	_spr_set.1
 8051                        	
 8052                        		.dbg	line,	"include\routines_LEVELS.c", 1521; spr_pattern(PLAYER_JUMP_ATTACK_2_VRAM_ADR);
 8053                        		__ld.wi		10752
         01:C79E  62         			cla
         01:C79F  A0 2A      			ldy.h	#10752
 8054                        		__call		_spr_pattern.1
         01:C7A1  20 26 E8   			call	_spr_pattern.1
 8055                        	
 8056                        		.dbg	line,	"include\routines_LEVELS.c", 1523; spr_set(weapon_id);
 8057                        		__ld.umq	_weapon_id
         01:C7A4  AD 23 23   			lda	_weapon_id
 8058                        		__call		_spr_set.1
         01:C7A7  20 DD E7   			call	_spr_set.1
 8059                        	
 8060                        		.dbg	line,	"include\routines_LEVELS.c", 1524; spr_pattern(WEAPON_ATTACK_2_VRAM_ADRESS);
 8061                        		__ld.wi		32064
         01:C7AA  A9 40      			lda.l	#32064
         01:C7AC  A0 7D      			ldy.h	#32064
 8062                        		__call		_spr_pattern.1
         01:C7AE  20 26 E8   			call	_spr_pattern.1
 8063                        	
 8064                        		.dbg	line,	"include\routines_LEVELS.c", 1526; if(player_axis == AXIS_RIGHT)
 8065                        		__not.um	_player_axis
         01:C7B1  AD 17 23   			lda	_player_axis
         01:C7B4  18         			clc
         01:C7B5  D0 01      			bne	!+
         01:C7B7  38         			sec
         01:C7B8             	!:
 8066                        		__bfalse	.LL294
         01:C7B8  90 11      			bcc	.LL294
 8067                        	
 8068                        		.dbg	line,	"include\routines_LEVELS.c", 1527; {
 8069                        	
 8070                        		.dbg	line,	"include\routines_LEVELS.c", 1528; spr_x(player_pos_x+32);
 8071                        		__ld.wm		_player_pos_x
         01:C7BA  AD D4 24   			lda.l	_player_pos_x
         01:C7BD  AC D5 24   			ldy.h	_player_pos_x
 8072                        		__add.wi	32
         01:C7C0  18         			clc
         01:C7C1  69 20      			adc.l	#32
         01:C7C3  90 01      			bcc	!+
         01:C7C5  C8         			iny
         01:C7C6             	!:
 8073                        		__call		_spr_x.1
         01:C7C6  20 0A E8   			call	_spr_x.1
 8074                        	
 8075                        		.dbg	line,	"include\routines_LEVELS.c", 1529; 
 8076                        	
 8077                        		.dbg	line,	"include\routines_LEVELS.c", 1530; }
 8078                        	
 8079                        		.dbg	line,	"include\routines_LEVELS.c", 1531; 
 8080                        	
 8081                        		.dbg	line,	"include\routines_LEVELS.c", 1532; else
 8082                        		__bra		.LL295
         01:C7C9  80 0F      			bra	.LL295
 8083    01:C7CB             	.LL294:
 8084                        	
 8085                        		.dbg	line,	"include\routines_LEVELS.c", 1533; {
 8086                        	
 8087                        		.dbg	line,	"include\routines_LEVELS.c", 1534; spr_x(player_pos_x-16);
 8088                        		__ld.wm		_player_pos_x
         01:C7CB  AD D4 24   			lda.l	_player_pos_x
         01:C7CE  AC D5 24   			ldy.h	_player_pos_x
 8089                        		__sub.wi	16
         01:C7D1  38         			sec
         01:C7D2  E9 10      			sbc.l	#16
         01:C7D4  B0 01      			bcs	!+
         01:C7D6  88         			dey
         01:C7D7             	!:
 8090                        		__call		_spr_x.1
         01:C7D7  20 0A E8   			call	_spr_x.1
 8091                        	
 8092                        		.dbg	line,	"include\routines_LEVELS.c", 1535; }
 8093    01:C7DA             	.LL295:
 8094                        	
 8095                        		.dbg	line,	"include\routines_LEVELS.c", 1537; spr_y(player_pos_y+6);
 8096                        		__ld.wm		_player_pos_y
         01:C7DA  AD D6 24   			lda.l	_player_pos_y
         01:C7DD  AC D7 24   			ldy.h	_player_pos_y
 8097                        		__add.wi	6
         01:C7E0  18         			clc
         01:C7E1  69 06      			adc.l	#6
         01:C7E3  90 01      			bcc	!+
         01:C7E5  C8         			iny
         01:C7E6             	!:
 8098                        		__call		_spr_y.1
         01:C7E6  20 19 E8   			call	_spr_y.1
 8099                        	
 8100                        		.dbg	line,	"include\routines_LEVELS.c", 1538; }
 8101                        	
 8102                        		.dbg	line,	"include\routines_LEVELS.c", 1540; else if(player_counter_attack == 7)
 8103                        		__bra		.LL296
         01:C7E9  4C D8 C9   			bra	.LL296
 8104    01:C7EC             	.LL293:
 8105                        		__ld.umq	_player_counter_attack
         01:C7EC  AD 1C 23   			lda	_player_counter_attack
 8106                        		__equ_b.uiq	7
         01:C7EF  C9 07      			cmp	#7
         01:C7F1  F0 01      			beq	!+
         01:C7F3  18         			clc
         01:C7F4             	!:
 8107                        		__bfalse	.LL297
         01:C7F4  90 66      			bcc	.LL297
 8108                        	
 8109                        		.dbg	line,	"include\routines_LEVELS.c", 1541; {
 8110                        	
 8111                        		.dbg	line,	"include\routines_LEVELS.c", 1542; spr_set(chain_id);
 8112                        		__ld.umq	_chain_id
         01:C7F6  AD 22 23   			lda	_chain_id
 8113                        		__call		_spr_set.1
         01:C7F9  20 DD E7   			call	_spr_set.1
 8114                        	
 8115                        		.dbg	line,	"include\routines_LEVELS.c", 1543; spr_y(player_pos_y);
 8116                        		__ld.wm		_player_pos_y
         01:C7FC  AD D6 24   			lda.l	_player_pos_y
         01:C7FF  AC D7 24   			ldy.h	_player_pos_y
 8117                        		__call		_spr_y.1
         01:C802  20 19 E8   			call	_spr_y.1
 8118                        	
 8119                        		.dbg	line,	"include\routines_LEVELS.c", 1545; if(player_axis == AXIS_RIGHT)
 8120                        		__not.um	_player_axis
         01:C805  AD 17 23   			lda	_player_axis
         01:C808  18         			clc
         01:C809  D0 01      			bne	!+
         01:C80B  38         			sec
         01:C80C             	!:
 8121                        		__bfalse	.LL298
         01:C80C  90 27      			bcc	.LL298
 8122                        	
 8123                        		.dbg	line,	"include\routines_LEVELS.c", 1546; {
 8124                        	
 8125                        		.dbg	line,	"include\routines_LEVELS.c", 1547; spr_x(player_pos_x+32);
 8126                        		__ld.wm		_player_pos_x
         01:C80E  AD D4 24   			lda.l	_player_pos_x
         01:C811  AC D5 24   			ldy.h	_player_pos_x
 8127                        		__add.wi	32
         01:C814  18         			clc
         01:C815  69 20      			adc.l	#32
         01:C817  90 01      			bcc	!+
         01:C819  C8         			iny
         01:C81A             	!:
 8128                        		__call		_spr_x.1
         01:C81A  20 0A E8   			call	_spr_x.1
 8129                        	
 8130                        		.dbg	line,	"include\routines_LEVELS.c", 1549; spr_set(weapon_id);
 8131                        		__ld.umq	_weapon_id
         01:C81D  AD 23 23   			lda	_weapon_id
 8132                        		__call		_spr_set.1
         01:C820  20 DD E7   			call	_spr_set.1
 8133                        	
 8134                        		.dbg	line,	"include\routines_LEVELS.c", 1550; spr_x(player_pos_x+48);
 8135                        		__ld.wm		_player_pos_x
         01:C823  AD D4 24   			lda.l	_player_pos_x
         01:C826  AC D5 24   			ldy.h	_player_pos_x
 8136                        		__add.wi	48
         01:C829  18         			clc
         01:C82A  69 30      			adc.l	#48
         01:C82C  90 01      			bcc	!+
         01:C82E  C8         			iny
         01:C82F             	!:
 8137                        		__call		_spr_x.1
         01:C82F  20 0A E8   			call	_spr_x.1
 8138                        	
 8139                        		.dbg	line,	"include\routines_LEVELS.c", 1551; }
 8140                        	
 8141                        		.dbg	line,	"include\routines_LEVELS.c", 1552; 
 8142                        	
 8143                        		.dbg	line,	"include\routines_LEVELS.c", 1553; else
 8144                        		__bra		.LL299
         01:C832  4C D8 C9   			bra	.LL299
 8145    01:C835             	.LL298:
 8146                        	
 8147                        		.dbg	line,	"include\routines_LEVELS.c", 1554; {
 8148                        	
 8149                        		.dbg	line,	"include\routines_LEVELS.c", 1555; spr_x(player_pos_x-16);
 8150                        		__ld.wm		_player_pos_x
         01:C835  AD D4 24   			lda.l	_player_pos_x
         01:C838  AC D5 24   			ldy.h	_player_pos_x
 8151                        		__sub.wi	16
         01:C83B  38         			sec
         01:C83C  E9 10      			sbc.l	#16
         01:C83E  B0 01      			bcs	!+
         01:C840  88         			dey
         01:C841             	!:
 8152                        		__call		_spr_x.1
         01:C841  20 0A E8   			call	_spr_x.1
 8153                        	
 8154                        		.dbg	line,	"include\routines_LEVELS.c", 1557; spr_set(weapon_id);
 8155                        		__ld.umq	_weapon_id
         01:C844  AD 23 23   			lda	_weapon_id
 8156                        		__call		_spr_set.1
         01:C847  20 DD E7   			call	_spr_set.1
 8157                        	
 8158                        		.dbg	line,	"include\routines_LEVELS.c", 1558; spr_x(player_pos_x-32);
 8159                        		__ld.wm		_player_pos_x
         01:C84A  AD D4 24   			lda.l	_player_pos_x
         01:C84D  AC D5 24   			ldy.h	_player_pos_x
 8160                        		__sub.wi	32
         01:C850  38         			sec
         01:C851  E9 20      			sbc.l	#32
         01:C853  B0 01      			bcs	!+
         01:C855  88         			dey
         01:C856             	!:
 8161                        		__call		_spr_x.1
         01:C856  20 0A E8   			call	_spr_x.1
 8162                        	
 8163                        		.dbg	line,	"include\routines_LEVELS.c", 1559; }
 8164    01:C859             	.LL299	.alias		.LL300
 8165                        	
 8166                        		.dbg	line,	"include\routines_LEVELS.c", 1560; }
 8167                        	
 8168                        		.dbg	line,	"include\routines_LEVELS.c", 1562; else if(player_counter_attack == 8)
 8169                        		__bra		.LL300
         01:C859  4C D8 C9   			bra	.LL300
 8170    01:C85C             	.LL297:
 8171                        		__ld.umq	_player_counter_attack
         01:C85C  AD 1C 23   			lda	_player_counter_attack
 8172                        		__equ_b.uiq	8
         01:C85F  C9 08      			cmp	#8
         01:C861  F0 01      			beq	!+
         01:C863  18         			clc
         01:C864             	!:
 8173                        		__bfalse	.LL301
         01:C864  90 6B      			bcc	.LL301
 8174                        	
 8175                        		.dbg	line,	"include\routines_LEVELS.c", 1563; {
 8176                        	
 8177                        		.dbg	line,	"include\routines_LEVELS.c", 1564; spr_set(chain_id+1);
 8178                        		__ld.um		_chain_id
         01:C866  AD 22 23   			lda	_chain_id
         01:C869  C2         			cly
 8179                        		__add.wi	1
         01:C86A  1A         			inc	a
         01:C86B  D0 01      			bne	!+
         01:C86D  C8         			iny
         01:C86E             	!:
 8180                        		__call		_spr_set.1
         01:C86E  20 DD E7   			call	_spr_set.1
 8181                        	
 8182                        		.dbg	line,	"include\routines_LEVELS.c", 1565; spr_y(player_pos_y);
 8183                        		__ld.wm		_player_pos_y
         01:C871  AD D6 24   			lda.l	_player_pos_y
         01:C874  AC D7 24   			ldy.h	_player_pos_y
 8184                        		__call		_spr_y.1
         01:C877  20 19 E8   			call	_spr_y.1
 8185                        	
 8186                        		.dbg	line,	"include\routines_LEVELS.c", 1567; if(player_axis == AXIS_RIGHT)
 8187                        		__not.um	_player_axis
         01:C87A  AD 17 23   			lda	_player_axis
         01:C87D  18         			clc
         01:C87E  D0 01      			bne	!+
         01:C880  38         			sec
         01:C881             	!:
 8188                        		__bfalse	.LL302
         01:C881  90 27      			bcc	.LL302
 8189                        	
 8190                        		.dbg	line,	"include\routines_LEVELS.c", 1568; {
 8191                        	
 8192                        		.dbg	line,	"include\routines_LEVELS.c", 1569; spr_x(player_pos_x+48);
 8193                        		__ld.wm		_player_pos_x
         01:C883  AD D4 24   			lda.l	_player_pos_x
         01:C886  AC D5 24   			ldy.h	_player_pos_x
 8194                        		__add.wi	48
         01:C889  18         			clc
         01:C88A  69 30      			adc.l	#48
         01:C88C  90 01      			bcc	!+
         01:C88E  C8         			iny
         01:C88F             	!:
 8195                        		__call		_spr_x.1
         01:C88F  20 0A E8   			call	_spr_x.1
 8196                        	
 8197                        		.dbg	line,	"include\routines_LEVELS.c", 1571; spr_set(weapon_id);
 8198                        		__ld.umq	_weapon_id
         01:C892  AD 23 23   			lda	_weapon_id
 8199                        		__call		_spr_set.1
         01:C895  20 DD E7   			call	_spr_set.1
 8200                        	
 8201                        		.dbg	line,	"include\routines_LEVELS.c", 1572; spr_x(player_pos_x+64);
 8202                        		__ld.wm		_player_pos_x
         01:C898  AD D4 24   			lda.l	_player_pos_x
         01:C89B  AC D5 24   			ldy.h	_player_pos_x
 8203                        		__add.wi	64
         01:C89E  18         			clc
         01:C89F  69 40      			adc.l	#64
         01:C8A1  90 01      			bcc	!+
         01:C8A3  C8         			iny
         01:C8A4             	!:
 8204                        		__call		_spr_x.1
         01:C8A4  20 0A E8   			call	_spr_x.1
 8205                        	
 8206                        		.dbg	line,	"include\routines_LEVELS.c", 1573; }
 8207                        	
 8208                        		.dbg	line,	"include\routines_LEVELS.c", 1574; 
 8209                        	
 8210                        		.dbg	line,	"include\routines_LEVELS.c", 1575; else
 8211                        		__bra		.LL303
         01:C8A7  4C D8 C9   			bra	.LL303
 8212    01:C8AA             	.LL302:
 8213                        	
 8214                        		.dbg	line,	"include\routines_LEVELS.c", 1576; {
 8215                        	
 8216                        		.dbg	line,	"include\routines_LEVELS.c", 1577; spr_x(player_pos_x-32);
 8217                        		__ld.wm		_player_pos_x
         01:C8AA  AD D4 24   			lda.l	_player_pos_x
         01:C8AD  AC D5 24   			ldy.h	_player_pos_x
 8218                        		__sub.wi	32
         01:C8B0  38         			sec
         01:C8B1  E9 20      			sbc.l	#32
         01:C8B3  B0 01      			bcs	!+
         01:C8B5  88         			dey
         01:C8B6             	!:
 8219                        		__call		_spr_x.1
         01:C8B6  20 0A E8   			call	_spr_x.1
 8220                        	
 8221                        		.dbg	line,	"include\routines_LEVELS.c", 1579; spr_set(weapon_id);
 8222                        		__ld.umq	_weapon_id
         01:C8B9  AD 23 23   			lda	_weapon_id
 8223                        		__call		_spr_set.1
         01:C8BC  20 DD E7   			call	_spr_set.1
 8224                        	
 8225                        		.dbg	line,	"include\routines_LEVELS.c", 1580; spr_x(player_pos_x-48);
 8226                        		__ld.wm		_player_pos_x
         01:C8BF  AD D4 24   			lda.l	_player_pos_x
         01:C8C2  AC D5 24   			ldy.h	_player_pos_x
 8227                        		__sub.wi	48
         01:C8C5  38         			sec
         01:C8C6  E9 30      			sbc.l	#48
         01:C8C8  B0 01      			bcs	!+
         01:C8CA  88         			dey
         01:C8CB             	!:
 8228                        		__call		_spr_x.1
         01:C8CB  20 0A E8   			call	_spr_x.1
 8229                        	
 8230                        		.dbg	line,	"include\routines_LEVELS.c", 1581; }
 8231    01:C8CE             	.LL303	.alias		.LL304
 8232                        	
 8233                        		.dbg	line,	"include\routines_LEVELS.c", 1582; }
 8234                        	
 8235                        		.dbg	line,	"include\routines_LEVELS.c", 1584; else if(player_counter_attack == 9)
 8236                        		__bra		.LL304
         01:C8CE  4C D8 C9   			bra	.LL304
 8237    01:C8D1             	.LL301:
 8238                        		__ld.umq	_player_counter_attack
         01:C8D1  AD 1C 23   			lda	_player_counter_attack
 8239                        		__equ_b.uiq	9
         01:C8D4  C9 09      			cmp	#9
         01:C8D6  F0 01      			beq	!+
         01:C8D8  18         			clc
         01:C8D9             	!:
 8240                        		__bfalse	.LL305
         01:C8D9  90 6D      			bcc	.LL305
 8241                        	
 8242                        		.dbg	line,	"include\routines_LEVELS.c", 1585; {
 8243                        	
 8244                        		.dbg	line,	"include\routines_LEVELS.c", 1586; spr_set(chain_id+2);
 8245                        		__ld.um		_chain_id
         01:C8DB  AD 22 23   			lda	_chain_id
         01:C8DE  C2         			cly
 8246                        		__add.wi	2
         01:C8DF  18         			clc
         01:C8E0  69 02      			adc.l	#2
         01:C8E2  90 01      			bcc	!+
         01:C8E4  C8         			iny
         01:C8E5             	!:
 8247                        		__call		_spr_set.1
         01:C8E5  20 DD E7   			call	_spr_set.1
 8248                        	
 8249                        		.dbg	line,	"include\routines_LEVELS.c", 1587; spr_y(player_pos_y);
 8250                        		__ld.wm		_player_pos_y
         01:C8E8  AD D6 24   			lda.l	_player_pos_y
         01:C8EB  AC D7 24   			ldy.h	_player_pos_y
 8251                        		__call		_spr_y.1
         01:C8EE  20 19 E8   			call	_spr_y.1
 8252                        	
 8253                        		.dbg	line,	"include\routines_LEVELS.c", 1589; if(player_axis == AXIS_RIGHT)
 8254                        		__not.um	_player_axis
         01:C8F1  AD 17 23   			lda	_player_axis
         01:C8F4  18         			clc
         01:C8F5  D0 01      			bne	!+
         01:C8F7  38         			sec
         01:C8F8             	!:
 8255                        		__bfalse	.LL306
         01:C8F8  90 27      			bcc	.LL306
 8256                        	
 8257                        		.dbg	line,	"include\routines_LEVELS.c", 1590; {
 8258                        	
 8259                        		.dbg	line,	"include\routines_LEVELS.c", 1591; spr_x(player_pos_x+64);
 8260                        		__ld.wm		_player_pos_x
         01:C8FA  AD D4 24   			lda.l	_player_pos_x
         01:C8FD  AC D5 24   			ldy.h	_player_pos_x
 8261                        		__add.wi	64
         01:C900  18         			clc
         01:C901  69 40      			adc.l	#64
         01:C903  90 01      			bcc	!+
         01:C905  C8         			iny
         01:C906             	!:
 8262                        		__call		_spr_x.1
         01:C906  20 0A E8   			call	_spr_x.1
 8263                        	
 8264                        		.dbg	line,	"include\routines_LEVELS.c", 1593; spr_set(weapon_id);
 8265                        		__ld.umq	_weapon_id
         01:C909  AD 23 23   			lda	_weapon_id
 8266                        		__call		_spr_set.1
         01:C90C  20 DD E7   			call	_spr_set.1
 8267                        	
 8268                        		.dbg	line,	"include\routines_LEVELS.c", 1594; spr_x(player_pos_x+80);
 8269                        		__ld.wm		_player_pos_x
         01:C90F  AD D4 24   			lda.l	_player_pos_x
         01:C912  AC D5 24   			ldy.h	_player_pos_x
 8270                        		__add.wi	80
         01:C915  18         			clc
         01:C916  69 50      			adc.l	#80
         01:C918  90 01      			bcc	!+
         01:C91A  C8         			iny
         01:C91B             	!:
 8271                        		__call		_spr_x.1
         01:C91B  20 0A E8   			call	_spr_x.1
 8272                        	
 8273                        		.dbg	line,	"include\routines_LEVELS.c", 1595; }
 8274                        	
 8275                        		.dbg	line,	"include\routines_LEVELS.c", 1596; 
 8276                        	
 8277                        		.dbg	line,	"include\routines_LEVELS.c", 1597; else
 8278                        		__bra		.LL307
         01:C91E  4C D8 C9   			bra	.LL307
 8279    01:C921             	.LL306:
 8280                        	
 8281                        		.dbg	line,	"include\routines_LEVELS.c", 1598; {
 8282                        	
 8283                        		.dbg	line,	"include\routines_LEVELS.c", 1599; spr_x(player_pos_x-48);
 8284                        		__ld.wm		_player_pos_x
         01:C921  AD D4 24   			lda.l	_player_pos_x
         01:C924  AC D5 24   			ldy.h	_player_pos_x
 8285                        		__sub.wi	48
         01:C927  38         			sec
         01:C928  E9 30      			sbc.l	#48
         01:C92A  B0 01      			bcs	!+
         01:C92C  88         			dey
         01:C92D             	!:
 8286                        		__call		_spr_x.1
         01:C92D  20 0A E8   			call	_spr_x.1
 8287                        	
 8288                        		.dbg	line,	"include\routines_LEVELS.c", 1601; spr_set(weapon_id);
 8289                        		__ld.umq	_weapon_id
         01:C930  AD 23 23   			lda	_weapon_id
 8290                        		__call		_spr_set.1
         01:C933  20 DD E7   			call	_spr_set.1
 8291                        	
 8292                        		.dbg	line,	"include\routines_LEVELS.c", 1602; spr_x(player_pos_x-64);
 8293                        		__ld.wm		_player_pos_x
         01:C936  AD D4 24   			lda.l	_player_pos_x
         01:C939  AC D5 24   			ldy.h	_player_pos_x
 8294                        		__sub.wi	64
         01:C93C  38         			sec
         01:C93D  E9 40      			sbc.l	#64
         01:C93F  B0 01      			bcs	!+
         01:C941  88         			dey
         01:C942             	!:
 8295                        		__call		_spr_x.1
         01:C942  20 0A E8   			call	_spr_x.1
 8296                        	
 8297                        		.dbg	line,	"include\routines_LEVELS.c", 1603; }
 8298    01:C945             	.LL307	.alias		.LL308
 8299                        	
 8300                        		.dbg	line,	"include\routines_LEVELS.c", 1604; }
 8301                        	
 8302                        		.dbg	line,	"include\routines_LEVELS.c", 1606; else if(player_counter_attack == 23)
 8303                        		__bra		.LL308
         01:C945  4C D8 C9   			bra	.LL308
 8304    01:C948             	.LL305:
 8305                        		__ld.umq	_player_counter_attack
         01:C948  AD 1C 23   			lda	_player_counter_attack
 8306                        		__equ_b.uiq	23
         01:C94B  C9 17      			cmp	#23
         01:C94D  F0 01      			beq	!+
         01:C94F  18         			clc
         01:C950             	!:
 8307                        		__bfalse	.LL309
         01:C950  B0 03 4C D8			bcc	.LL309
         01:C954  C9          
 8308                        	
 8309                        		.dbg	line,	"include\routines_LEVELS.c", 1607; {
 8310                        	
 8311                        		.dbg	line,	"include\routines_LEVELS.c", 1608; spr_set(chain_id);
 8312                        		__ld.umq	_chain_id
         01:C955  AD 22 23   			lda	_chain_id
 8313                        		__call		_spr_set.1
         01:C958  20 DD E7   			call	_spr_set.1
 8314                        	
 8315                        		.dbg	line,	"include\routines_LEVELS.c", 1609; spr_hide();
 8316                        		__call		_spr_hide
         01:C95B  20 F8 E7   			call	_spr_hide
 8317                        	
 8318                        		.dbg	line,	"include\routines_LEVELS.c", 1611; spr_set(chain_id+1);
 8319                        		__ld.um		_chain_id
         01:C95E  AD 22 23   			lda	_chain_id
         01:C961  C2         			cly
 8320                        		__add.wi	1
         01:C962  1A         			inc	a
         01:C963  D0 01      			bne	!+
         01:C965  C8         			iny
         01:C966             	!:
 8321                        		__call		_spr_set.1
         01:C966  20 DD E7   			call	_spr_set.1
 8322                        	
 8323                        		.dbg	line,	"include\routines_LEVELS.c", 1612; spr_hide();
 8324                        		__call		_spr_hide
         01:C969  20 F8 E7   			call	_spr_hide
 8325                        	
 8326                        		.dbg	line,	"include\routines_LEVELS.c", 1614; spr_set(chain_id+2);
 8327                        		__ld.um		_chain_id
         01:C96C  AD 22 23   			lda	_chain_id
         01:C96F  C2         			cly
 8328                        		__add.wi	2
         01:C970  18         			clc
         01:C971  69 02      			adc.l	#2
         01:C973  90 01      			bcc	!+
         01:C975  C8         			iny
         01:C976             	!:
 8329                        		__call		_spr_set.1
         01:C976  20 DD E7   			call	_spr_set.1
 8330                        	
 8331                        		.dbg	line,	"include\routines_LEVELS.c", 1615; spr_hide();
 8332                        		__call		_spr_hide
         01:C979  20 F8 E7   			call	_spr_hide
 8333                        	
 8334                        		.dbg	line,	"include\routines_LEVELS.c", 1617; spr_set(player_id);
 8335                        		__ld.umq	_player_id
         01:C97C  AD 15 23   			lda	_player_id
 8336                        		__call		_spr_set.1
         01:C97F  20 DD E7   			call	_spr_set.1
 8337                        	
 8338                        		.dbg	line,	"include\routines_LEVELS.c", 1618; spr_pattern(PLAYER_HANG_VRAM_ADR);
 8339                        		__ld.wi		7424
         01:C982  62         			cla
         01:C983  A0 1D      			ldy.h	#7424
 8340                        		__call		_spr_pattern.1
         01:C985  20 26 E8   			call	_spr_pattern.1
 8341                        	
 8342                        		.dbg	line,	"include\routines_LEVELS.c", 1620; spr_set(weapon_id);
 8343                        		__ld.umq	_weapon_id
         01:C988  AD 23 23   			lda	_weapon_id
 8344                        		__call		_spr_set.1
         01:C98B  20 DD E7   			call	_spr_set.1
 8345                        	
 8346                        		.dbg	line,	"include\routines_LEVELS.c", 1621; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
 8347                        		__ld.wi		31808
         01:C98E  A9 40      			lda.l	#31808
         01:C990  A0 7C      			ldy.h	#31808
 8348                        		__call		_spr_pattern.1
         01:C992  20 26 E8   			call	_spr_pattern.1
 8349                        	
 8350                        		.dbg	line,	"include\routines_LEVELS.c", 1622; spr_y(player_pos_y+5);
 8351                        		__ld.wm		_player_pos_y
         01:C995  AD D6 24   			lda.l	_player_pos_y
         01:C998  AC D7 24   			ldy.h	_player_pos_y
 8352                        		__add.wi	5
         01:C99B  18         			clc
         01:C99C  69 05      			adc.l	#5
         01:C99E  90 01      			bcc	!+
         01:C9A0  C8         			iny
         01:C9A1             	!:
 8353                        		__call		_spr_y.1
         01:C9A1  20 19 E8   			call	_spr_y.1
 8354                        	
 8355                        		.dbg	line,	"include\routines_LEVELS.c", 1624; if(player_axis == AXIS_RIGHT)
 8356                        		__not.um	_player_axis
         01:C9A4  AD 17 23   			lda	_player_axis
         01:C9A7  18         			clc
         01:C9A8  D0 01      			bne	!+
         01:C9AA  38         			sec
         01:C9AB             	!:
 8357                        		__bfalse	.LL310
         01:C9AB  90 11      			bcc	.LL310
 8358                        	
 8359                        		.dbg	line,	"include\routines_LEVELS.c", 1625; {
 8360                        	
 8361                        		.dbg	line,	"include\routines_LEVELS.c", 1626; spr_x(player_pos_x+17);
 8362                        		__ld.wm		_player_pos_x
         01:C9AD  AD D4 24   			lda.l	_player_pos_x
         01:C9B0  AC D5 24   			ldy.h	_player_pos_x
 8363                        		__add.wi	17
         01:C9B3  18         			clc
         01:C9B4  69 11      			adc.l	#17
         01:C9B6  90 01      			bcc	!+
         01:C9B8  C8         			iny
         01:C9B9             	!:
 8364                        		__call		_spr_x.1
         01:C9B9  20 0A E8   			call	_spr_x.1
 8365                        	
 8366                        		.dbg	line,	"include\routines_LEVELS.c", 1627; }
 8367                        	
 8368                        		.dbg	line,	"include\routines_LEVELS.c", 1629; else
 8369                        		__bra		.LL311
         01:C9BC  80 0F      			bra	.LL311
 8370    01:C9BE             	.LL310:
 8371                        	
 8372                        		.dbg	line,	"include\routines_LEVELS.c", 1630; {
 8373                        	
 8374                        		.dbg	line,	"include\routines_LEVELS.c", 1631; spr_x(player_pos_x-2);
 8375                        		__ld.wm		_player_pos_x
         01:C9BE  AD D4 24   			lda.l	_player_pos_x
         01:C9C1  AC D5 24   			ldy.h	_player_pos_x
 8376                        		__sub.wi	2
         01:C9C4  38         			sec
         01:C9C5  E9 02      			sbc.l	#2
         01:C9C7  B0 01      			bcs	!+
         01:C9C9  88         			dey
         01:C9CA             	!:
 8377                        		__call		_spr_x.1
         01:C9CA  20 0A E8   			call	_spr_x.1
 8378                        	
 8379                        		.dbg	line,	"include\routines_LEVELS.c", 1632; }
 8380    01:C9CD             	.LL311:
 8381                        	
 8382                        		.dbg	line,	"include\routines_LEVELS.c", 1634; player_attack = FALSE;
 8383                        		__st.umiq	0, _player_attack
         01:C9CD  9C 1E 23   			stz	_player_attack
 8384                        	
 8385                        		.dbg	line,	"include\routines_LEVELS.c", 1635; player_counter_attack = 0;
 8386                        		__st.umiq	0, _player_counter_attack
         01:C9D0  9C 1C 23   			stz	_player_counter_attack
 8387                        	
 8388                        		.dbg	line,	"include\routines_LEVELS.c", 1636; player_state = STATE_HANG;
 8389                        		__st.umiq	10, _player_state
         01:C9D3  A9 0A      			lda.l	#10
         01:C9D5  8D 16 23   			sta	_player_state
 8390                        	
 8391                        		.dbg	line,	"include\routines_LEVELS.c", 1637; }
 8392                        	
 8393                        		.dbg	line,	"include\routines_LEVELS.c", 1640; player_counter_attack += 1;
 8394    01:C9D8             	.LL309:
 8395    01:C9D8             	.LL308:
 8396    01:C9D8             	.LL304:
 8397    01:C9D8             	.LL300:
 8398    01:C9D8             	.LL296:
 8399    01:C9D8             	.LL292:
 8400                        		__add_st.umiq	1, _player_counter_attack
         01:C9D8  EE 1C 23   			inc	_player_counter_attack
 8401                        	
 8402                        		.dbg	line,	"include\routines_LEVELS.c", 1641; }
 8403    01:C9DB             	.LL288:
 8404                        	
 8405                        		.dbg	line,	"include\routines_LEVELS.c", 1643; spr_set(player_id);
 8406                        		__ld.umq	_player_id
         01:C9DB  AD 15 23   			lda	_player_id
 8407                        		__call		_spr_set.1
         01:C9DE  20 DD E7   			call	_spr_set.1
 8408                        	
 8409                        		.dbg	line,	"include\routines_LEVELS.c", 1644; spr_y(player_pos_y);
 8410                        		__ld.wm		_player_pos_y
         01:C9E1  AD D6 24   			lda.l	_player_pos_y
         01:C9E4  AC D7 24   			ldy.h	_player_pos_y
 8411                        		__call		_spr_y.1
         01:C9E7  20 19 E8   			call	_spr_y.1
 8412                        	
 8413                        		.dbg	line,	"include\routines_LEVELS.c", 1648; if(player_index_jump < 34)
 8414                        		__ld.umq	_player_index_jump
         01:C9EA  AD 1A 23   			lda	_player_index_jump
 8415                        		__ult_b.uiq	34
         01:C9ED  C9 22      			cmp	#34		; Subtract integer from A.
         01:C9EF  6A         			ror	a		; CC if A < integer.
         01:C9F0  49 80      			eor	#$80
         01:C9F2  2A         			rol	a
 8416                        		__bfalse	.LL312
         01:C9F3  90 03      			bcc	.LL312
 8417                        	
 8418                        		.dbg	line,	"include\routines_LEVELS.c", 1649; {
 8419                        	
 8420                        		.dbg	line,	"include\routines_LEVELS.c", 1650; player_index_jump += 1;
 8421                        		__add_st.umiq	1, _player_index_jump
         01:C9F5  EE 1A 23   			inc	_player_index_jump
 8422                        	
 8423                        		.dbg	line,	"include\routines_LEVELS.c", 1651; }
 8424                        	
 8425                        		.dbg	line,	"include\routines_LEVELS.c", 1656; //--------------------------------------------------------------------------------------//
 8426                        	
 8427                        		.dbg	line,	"include\routines_LEVELS.c", 1657; //                                   FLOOR COLLISION                                    //
 8428                        	
 8429                        		.dbg	line,	"include\routines_LEVELS.c", 1658; //--------------------------------------------------------------------------------------//
 8430                        	
 8431                        		.dbg	line,	"include\routines_LEVELS.c", 1660; if(player_index_jump > 14)
 8432    01:C9F8             	.LL312:
 8433                        		__ld.umq	_player_index_jump
         01:C9F8  AD 1A 23   			lda	_player_index_jump
 8434                        		__ugt_b.uiq	14
         01:C9FB  18         			clc			; Subtract integer+1 from A.
         01:C9FC  E9 0E      			sbc	#14		; CS if A > integer.
 8435                        		__bfalse	.LL313
         01:C9FE  B0 03 4C BF			bcc	.LL313
         01:CA02  CB          
 8436                        	
 8437                        		.dbg	line,	"include\routines_LEVELS.c", 1661; {
 8438                        	
 8439                        		.dbg	line,	"include\routines_LEVELS.c", 1662; // CHECK COLLISION WITH LEFT FLOOR //
 8440                        	
 8441                        		.dbg	line,	"include\routines_LEVELS.c", 1663; check_BG( 10 , 32 );
 8442                        		__ld.wi		10
         01:CA03  A9 0A      			lda.l	#10
         01:CA05  C2         			cly
 8443                        		__pusharg.wr
         01:CA06  A6 8D      			ldx	<__sp
         01:CA08  CA         			dex
         01:CA09  CA         			dex
         01:CA0A  95 08      			sta.l	<__stack, x
         01:CA0C  94 09      			sty.h	<__stack, x
         01:CA0E  86 8D      			stx	<__sp
 8444                        		__ld.wi		32
         01:CA10  A9 20      			lda.l	#32
         01:CA12  C2         			cly
 8445                        		__pusharg.wr
         01:CA13  A6 8D      			ldx	<__sp
         01:CA15  CA         			dex
         01:CA16  CA         			dex
         01:CA17  95 08      			sta.l	<__stack, x
         01:CA19  94 09      			sty.h	<__stack, x
         01:CA1B  86 8D      			stx	<__sp
 8446                        		__call		_check_BG
         01:CA1D  20 6D FF   			call	_check_BG
 8447                        	
 8448                        		.dbg	line,	"include\routines_LEVELS.c", 1665; // IF PLAYER TOUCHES THE GROUND TO THE LEFT //
 8449                        	
 8450                        		.dbg	line,	"include\routines_LEVELS.c", 1666; if(map_blk_flag == TILE_BG)
 8451                        		__ld.umq	_map_blk_flag
         01:CA20  AD B1 2B   			lda	_map_blk_flag
 8452                        		__equ_b.uiq	1
         01:CA23  C9 01      			cmp	#1
         01:CA25  F0 01      			beq	!+
         01:CA27  18         			clc
         01:CA28             	!:
 8453                        		__bfalse	.LL314
         01:CA28  B0 03 4C E1			bcc	.LL314
         01:CA2C  CA          
 8454                        	
 8455                        		.dbg	line,	"include\routines_LEVELS.c", 1667; {
 8456                        	
 8457                        		.dbg	line,	"include\routines_LEVELS.c", 1668; // CALCULATE HOW MANY PIXELS THE PLAYER MOVED INTO THE GROUND //
 8458                        	
 8459                        		.dbg	line,	"include\routines_LEVELS.c", 1669; for(i=1; i<11 ; i++ )
 8460                        		__st.umiq	1, __update_PLAYER_end - 1  /* i */
         01:CA2D  A9 01      			lda.l	#1
         01:CA2F  8D 0C 23   			sta	__update_PLAYER_end - 1
 8461    01:CA32             	.LL315:
 8462                        		__ld.umq	__update_PLAYER_end - 1  /* i */
         01:CA32  AD 0C 23   			lda	__update_PLAYER_end - 1
 8463                        		__ult_b.uiq	11
         01:CA35  C9 0B      			cmp	#11		; Subtract integer from A.
         01:CA37  6A         			ror	a		; CC if A < integer.
         01:CA38  49 80      			eor	#$80
         01:CA3A  2A         			rol	a
 8464                        		__btrue		.LL317
         01:CA3B  B0 07      			bcs	.LL317
 8465                        		__bra		.LL318
         01:CA3D  80 5B      			bra	.LL318
 8466    01:CA3F             	.LL316:
 8467                        		__inc.umq	__update_PLAYER_end - 1  /* i */
         01:CA3F  EE 0C 23   			inc	__update_PLAYER_end - 1
 8468                        		__bra		.LL315
         01:CA42  80 EE      			bra	.LL315
 8469    01:CA44             	.LL317:
 8470                        	
 8471                        		.dbg	line,	"include\routines_LEVELS.c", 1670; {
 8472                        	
 8473                        		.dbg	line,	"include\routines_LEVELS.c", 1671; check_TILE_DEPTH( 10 , i);
 8474                        		__ld.wi		10
         01:CA44  A9 0A      			lda.l	#10
         01:CA46  C2         			cly
 8475                        		__pusharg.wr
         01:CA47  A6 8D      			ldx	<__sp
         01:CA49  CA         			dex
         01:CA4A  CA         			dex
         01:CA4B  95 08      			sta.l	<__stack, x
         01:CA4D  94 09      			sty.h	<__stack, x
         01:CA4F  86 8D      			stx	<__sp
 8476                        		__ld.um		__update_PLAYER_end - 1  /* i */
         01:CA51  AD 0C 23   			lda	__update_PLAYER_end - 1
         01:CA54  C2         			cly
 8477                        		__pusharg.wr
         01:CA55  A6 8D      			ldx	<__sp
         01:CA57  CA         			dex
         01:CA58  CA         			dex
         01:CA59  95 08      			sta.l	<__stack, x
         01:CA5B  94 09      			sty.h	<__stack, x
         01:CA5D  86 8D      			stx	<__sp
 8478                        		__call		_check_TILE_DEPTH
         01:CA5F  20 59 FF   			call	_check_TILE_DEPTH
 8479                        	
 8480                        		.dbg	line,	"include\routines_LEVELS.c", 1673; if(map_blk_flag == TILE_EMPTY)
 8481                        		__not.um	_map_blk_flag
         01:CA62  AD B1 2B   			lda	_map_blk_flag
         01:CA65  18         			clc
         01:CA66  D0 01      			bne	!+
         01:CA68  38         			sec
         01:CA69             	!:
 8482                        		__bfalse	.LL319
         01:CA69  90 D4      			bcc	.LL319
 8483                        	
 8484                        		.dbg	line,	"include\routines_LEVELS.c", 1674; {
 8485                        	
 8486                        		.dbg	line,	"include\routines_LEVELS.c", 1675; //spr_set(player_id);
 8487                        	
 8488                        		.dbg	line,	"include\routines_LEVELS.c", 1676; spr_pattern(PLAYER_IDLE_VRAM_ADR);
 8489                        		__ld.wi		5120
         01:CA6B  62         			cla
         01:CA6C  A0 14      			ldy.h	#5120
 8490                        		__call		_spr_pattern.1
         01:CA6E  20 26 E8   			call	_spr_pattern.1
 8491                        	
 8492                        		.dbg	line,	"include\routines_LEVELS.c", 1677; player_pos_y -= (i - 1);
 8493                        		__ld.um		__update_PLAYER_end - 1  /* i */
         01:CA71  AD 0C 23   			lda	__update_PLAYER_end - 1
         01:CA74  C2         			cly
 8494                        		__sub.wi	1
         01:CA75  38         			sec
         01:CA76  E9 01      			sbc.l	#1
         01:CA78  B0 01      			bcs	!+
         01:CA7A  88         			dey
         01:CA7B             	!:
 8495                        		__isub_st.wmq	_player_pos_y
         01:CA7B  38         			sec
         01:CA7C  49 FF      			eor	#$FF
         01:CA7E  6D D6 24   			adc.l	_player_pos_y
         01:CA81  8D D6 24   			sta.l	_player_pos_y
         01:CA84  98         			tya
         01:CA85  49 FF      			eor	#$FF
         01:CA87  6D D7 24   			adc.h	_player_pos_y
         01:CA8A  8D D7 24   			sta.h	_player_pos_y
 8496                        	
 8497                        		.dbg	line,	"include\routines_LEVELS.c", 1678; spr_y(player_pos_y);
 8498                        		__ld.wm		_player_pos_y
         01:CA8D  AD D6 24   			lda.l	_player_pos_y
         01:CA90  AC D7 24   			ldy.h	_player_pos_y
 8499                        		__call		_spr_y.1
         01:CA93  20 19 E8   			call	_spr_y.1
 8500                        	
 8501                        		.dbg	line,	"include\routines_LEVELS.c", 1679; break;
 8502                        		__bra		.LL318
         01:CA96  80 02      			bra	.LL318
 8503                        	
 8504                        		.dbg	line,	"include\routines_LEVELS.c", 1680; }
 8505                        	
 8506                        		.dbg	line,	"include\routines_LEVELS.c", 1682; }
 8507    01:CA98             	.LL319	.alias		.LL316
 8508                        		__bra		.LL316
         01:CA98  80 A5      			bra	.LL316
 8509    01:CA9A             	.LL318:
 8510                        	
 8511                        		.dbg	line,	"include\routines_LEVELS.c", 1684; if(player_attack == FALSE)
 8512                        		__not.um	_player_attack
         01:CA9A  AD 1E 23   			lda	_player_attack
         01:CA9D  18         			clc
         01:CA9E  D0 01      			bne	!+
         01:CAA0  38         			sec
         01:CAA1             	!:
 8513                        		__bfalse	.LL320
         01:CAA1  90 24      			bcc	.LL320
 8514                        	
 8515                        		.dbg	line,	"include\routines_LEVELS.c", 1685; {
 8516                        	
 8517                        		.dbg	line,	"include\routines_LEVELS.c", 1686; spr_set(weapon_id);
 8518                        		__ld.umq	_weapon_id
         01:CAA3  AD 23 23   			lda	_weapon_id
 8519                        		__call		_spr_set.1
         01:CAA6  20 DD E7   			call	_spr_set.1
 8520                        	
 8521                        		.dbg	line,	"include\routines_LEVELS.c", 1687; spr_x(player_pos_x+8);
 8522                        		__ld.wm		_player_pos_x
         01:CAA9  AD D4 24   			lda.l	_player_pos_x
         01:CAAC  AC D5 24   			ldy.h	_player_pos_x
 8523                        		__add.wi	8
         01:CAAF  18         			clc
         01:CAB0  69 08      			adc.l	#8
         01:CAB2  90 01      			bcc	!+
         01:CAB4  C8         			iny
         01:CAB5             	!:
 8524                        		__call		_spr_x.1
         01:CAB5  20 0A E8   			call	_spr_x.1
 8525                        	
 8526                        		.dbg	line,	"include\routines_LEVELS.c", 1688; spr_y(player_pos_y+16);
 8527                        		__ld.wm		_player_pos_y
         01:CAB8  AD D6 24   			lda.l	_player_pos_y
         01:CABB  AC D7 24   			ldy.h	_player_pos_y
 8528                        		__add.wi	16
         01:CABE  18         			clc
         01:CABF  69 10      			adc.l	#16
         01:CAC1  90 01      			bcc	!+
         01:CAC3  C8         			iny
         01:CAC4             	!:
 8529                        		__call		_spr_y.1
         01:CAC4  20 19 E8   			call	_spr_y.1
 8530                        	
 8531                        		.dbg	line,	"include\routines_LEVELS.c", 1689; }
 8532                        	
 8533                        		.dbg	line,	"include\routines_LEVELS.c", 1691; player_counter_anim = 1;
 8534    01:CAC7             	.LL320:
 8535                        		__st.umiq	1, _player_counter_anim
         01:CAC7  A9 01      			lda.l	#1
         01:CAC9  8D 19 23   			sta	_player_counter_anim
 8536                        	
 8537                        		.dbg	line,	"include\routines_LEVELS.c", 1692; player_index_jump = 0;
 8538                        		__st.umiq	0, _player_index_jump
         01:CACC  9C 1A 23   			stz	_player_index_jump
 8539                        	
 8540                        		.dbg	line,	"include\routines_LEVELS.c", 1694; if(player_attack == FALSE)
 8541                        		__not.um	_player_attack
         01:CACF  AD 1E 23   			lda	_player_attack
         01:CAD2  18         			clc
         01:CAD3  D0 01      			bne	!+
         01:CAD5  38         			sec
         01:CAD6             	!:
 8542                        		__bfalse	.LL321
         01:CAD6  B0 03 4C 0B			bcc	.LL321
         01:CADA  DB          
 8543                        	
 8544                        		.dbg	line,	"include\routines_LEVELS.c", 1695; {
 8545                        	
 8546                        		.dbg	line,	"include\routines_LEVELS.c", 1696; player_state = STATE_IDLE;
 8547                        		__st.umiq	0, _player_state
         01:CADB  9C 16 23   			stz	_player_state
 8548                        	
 8549                        		.dbg	line,	"include\routines_LEVELS.c", 1697; }
 8550                        	
 8551                        		.dbg	line,	"include\routines_LEVELS.c", 1698; 
 8552                        	
 8553                        		.dbg	line,	"include\routines_LEVELS.c", 1699; return;
 8554    01:CADE             	.LL321	.alias		.LL230
 8555                        		__bra		.LL230
         01:CADE  4C 0B DB   			bra	.LL230
 8556                        	
 8557                        		.dbg	line,	"include\routines_LEVELS.c", 1700; }
 8558                        	
 8559                        		.dbg	line,	"include\routines_LEVELS.c", 1702; // IF PLAYER TOUCHES THE GROUND TO THE RIGHT //
 8560                        	
 8561                        		.dbg	line,	"include\routines_LEVELS.c", 1703; else
 8562    01:CAE1             	.LL314:
 8563                        	
 8564                        		.dbg	line,	"include\routines_LEVELS.c", 1704; {
 8565                        	
 8566                        		.dbg	line,	"include\routines_LEVELS.c", 1705; // CHECK COLLISION WITH RIGHT FLOOR //
 8567                        	
 8568                        		.dbg	line,	"include\routines_LEVELS.c", 1706; check_BG( 22 , 32 );
 8569                        		__ld.wi		22
         01:CAE1  A9 16      			lda.l	#22
         01:CAE3  C2         			cly
 8570                        		__pusharg.wr
         01:CAE4  A6 8D      			ldx	<__sp
         01:CAE6  CA         			dex
         01:CAE7  CA         			dex
         01:CAE8  95 08      			sta.l	<__stack, x
         01:CAEA  94 09      			sty.h	<__stack, x
         01:CAEC  86 8D      			stx	<__sp
 8571                        		__ld.wi		32
         01:CAEE  A9 20      			lda.l	#32
         01:CAF0  C2         			cly
 8572                        		__pusharg.wr
         01:CAF1  A6 8D      			ldx	<__sp
         01:CAF3  CA         			dex
         01:CAF4  CA         			dex
         01:CAF5  95 08      			sta.l	<__stack, x
         01:CAF7  94 09      			sty.h	<__stack, x
         01:CAF9  86 8D      			stx	<__sp
 8573                        		__call		_check_BG
         01:CAFB  20 6D FF   			call	_check_BG
 8574                        	
 8575                        		.dbg	line,	"include\routines_LEVELS.c", 1708; if(map_blk_flag == TILE_BG)
 8576                        		__ld.umq	_map_blk_flag
         01:CAFE  AD B1 2B   			lda	_map_blk_flag
 8577                        		__equ_b.uiq	1
         01:CB01  C9 01      			cmp	#1
         01:CB03  F0 01      			beq	!+
         01:CB05  18         			clc
         01:CB06             	!:
 8578                        		__bfalse	.LL323
         01:CB06  B0 03 4C BF			bcc	.LL323
         01:CB0A  CB          
 8579                        	
 8580                        		.dbg	line,	"include\routines_LEVELS.c", 1709; {
 8581                        	
 8582                        		.dbg	line,	"include\routines_LEVELS.c", 1710; // CALCULATE HOW MANY PIXELS THE PLAYER MOVED INTO THE GROUND //
 8583                        	
 8584                        		.dbg	line,	"include\routines_LEVELS.c", 1711; for(i=1; i<11 ; i++ )
 8585                        		__st.umiq	1, __update_PLAYER_end - 1  /* i */
         01:CB0B  A9 01      			lda.l	#1
         01:CB0D  8D 0C 23   			sta	__update_PLAYER_end - 1
 8586    01:CB10             	.LL324:
 8587                        		__ld.umq	__update_PLAYER_end - 1  /* i */
         01:CB10  AD 0C 23   			lda	__update_PLAYER_end - 1
 8588                        		__ult_b.uiq	11
         01:CB13  C9 0B      			cmp	#11		; Subtract integer from A.
         01:CB15  6A         			ror	a		; CC if A < integer.
         01:CB16  49 80      			eor	#$80
         01:CB18  2A         			rol	a
 8589                        		__btrue		.LL326
         01:CB19  B0 07      			bcs	.LL326
 8590                        		__bra		.LL327
         01:CB1B  80 5B      			bra	.LL327
 8591    01:CB1D             	.LL325:
 8592                        		__inc.umq	__update_PLAYER_end - 1  /* i */
         01:CB1D  EE 0C 23   			inc	__update_PLAYER_end - 1
 8593                        		__bra		.LL324
         01:CB20  80 EE      			bra	.LL324
 8594    01:CB22             	.LL326:
 8595                        	
 8596                        		.dbg	line,	"include\routines_LEVELS.c", 1712; {
 8597                        	
 8598                        		.dbg	line,	"include\routines_LEVELS.c", 1713; check_TILE_DEPTH( 22 , i);
 8599                        		__ld.wi		22
         01:CB22  A9 16      			lda.l	#22
         01:CB24  C2         			cly
 8600                        		__pusharg.wr
         01:CB25  A6 8D      			ldx	<__sp
         01:CB27  CA         			dex
         01:CB28  CA         			dex
         01:CB29  95 08      			sta.l	<__stack, x
         01:CB2B  94 09      			sty.h	<__stack, x
         01:CB2D  86 8D      			stx	<__sp
 8601                        		__ld.um		__update_PLAYER_end - 1  /* i */
         01:CB2F  AD 0C 23   			lda	__update_PLAYER_end - 1
         01:CB32  C2         			cly
 8602                        		__pusharg.wr
         01:CB33  A6 8D      			ldx	<__sp
         01:CB35  CA         			dex
         01:CB36  CA         			dex
         01:CB37  95 08      			sta.l	<__stack, x
         01:CB39  94 09      			sty.h	<__stack, x
         01:CB3B  86 8D      			stx	<__sp
 8603                        		__call		_check_TILE_DEPTH
         01:CB3D  20 59 FF   			call	_check_TILE_DEPTH
 8604                        	
 8605                        		.dbg	line,	"include\routines_LEVELS.c", 1715; if(map_blk_flag == TILE_EMPTY)
 8606                        		__not.um	_map_blk_flag
         01:CB40  AD B1 2B   			lda	_map_blk_flag
         01:CB43  18         			clc
         01:CB44  D0 01      			bne	!+
         01:CB46  38         			sec
         01:CB47             	!:
 8607                        		__bfalse	.LL328
         01:CB47  90 D4      			bcc	.LL328
 8608                        	
 8609                        		.dbg	line,	"include\routines_LEVELS.c", 1716; {
 8610                        	
 8611                        		.dbg	line,	"include\routines_LEVELS.c", 1717; //spr_set(player_id);
 8612                        	
 8613                        		.dbg	line,	"include\routines_LEVELS.c", 1718; spr_pattern(PLAYER_IDLE_VRAM_ADR);
 8614                        		__ld.wi		5120
         01:CB49  62         			cla
         01:CB4A  A0 14      			ldy.h	#5120
 8615                        		__call		_spr_pattern.1
         01:CB4C  20 26 E8   			call	_spr_pattern.1
 8616                        	
 8617                        		.dbg	line,	"include\routines_LEVELS.c", 1719; player_pos_y -= (i - 1);
 8618                        		__ld.um		__update_PLAYER_end - 1  /* i */
         01:CB4F  AD 0C 23   			lda	__update_PLAYER_end - 1
         01:CB52  C2         			cly
 8619                        		__sub.wi	1
         01:CB53  38         			sec
         01:CB54  E9 01      			sbc.l	#1
         01:CB56  B0 01      			bcs	!+
         01:CB58  88         			dey
         01:CB59             	!:
 8620                        		__isub_st.wmq	_player_pos_y
         01:CB59  38         			sec
         01:CB5A  49 FF      			eor	#$FF
         01:CB5C  6D D6 24   			adc.l	_player_pos_y
         01:CB5F  8D D6 24   			sta.l	_player_pos_y
         01:CB62  98         			tya
         01:CB63  49 FF      			eor	#$FF
         01:CB65  6D D7 24   			adc.h	_player_pos_y
         01:CB68  8D D7 24   			sta.h	_player_pos_y
 8621                        	
 8622                        		.dbg	line,	"include\routines_LEVELS.c", 1720; spr_y(player_pos_y);
 8623                        		__ld.wm		_player_pos_y
         01:CB6B  AD D6 24   			lda.l	_player_pos_y
         01:CB6E  AC D7 24   			ldy.h	_player_pos_y
 8624                        		__call		_spr_y.1
         01:CB71  20 19 E8   			call	_spr_y.1
 8625                        	
 8626                        		.dbg	line,	"include\routines_LEVELS.c", 1721; break;
 8627                        		__bra		.LL327
         01:CB74  80 02      			bra	.LL327
 8628                        	
 8629                        		.dbg	line,	"include\routines_LEVELS.c", 1722; }
 8630                        	
 8631                        		.dbg	line,	"include\routines_LEVELS.c", 1724; }
 8632    01:CB76             	.LL328	.alias		.LL325
 8633                        		__bra		.LL325
         01:CB76  80 A5      			bra	.LL325
 8634    01:CB78             	.LL327:
 8635                        	
 8636                        		.dbg	line,	"include\routines_LEVELS.c", 1726; if(player_attack == FALSE)
 8637                        		__not.um	_player_attack
         01:CB78  AD 1E 23   			lda	_player_attack
         01:CB7B  18         			clc
         01:CB7C  D0 01      			bne	!+
         01:CB7E  38         			sec
         01:CB7F             	!:
 8638                        		__bfalse	.LL329
         01:CB7F  90 24      			bcc	.LL329
 8639                        	
 8640                        		.dbg	line,	"include\routines_LEVELS.c", 1727; {
 8641                        	
 8642                        		.dbg	line,	"include\routines_LEVELS.c", 1728; spr_set(weapon_id);
 8643                        		__ld.umq	_weapon_id
         01:CB81  AD 23 23   			lda	_weapon_id
 8644                        		__call		_spr_set.1
         01:CB84  20 DD E7   			call	_spr_set.1
 8645                        	
 8646                        		.dbg	line,	"include\routines_LEVELS.c", 1729; spr_x(player_pos_x+8);
 8647                        		__ld.wm		_player_pos_x
         01:CB87  AD D4 24   			lda.l	_player_pos_x
         01:CB8A  AC D5 24   			ldy.h	_player_pos_x
 8648                        		__add.wi	8
         01:CB8D  18         			clc
         01:CB8E  69 08      			adc.l	#8
         01:CB90  90 01      			bcc	!+
         01:CB92  C8         			iny
         01:CB93             	!:
 8649                        		__call		_spr_x.1
         01:CB93  20 0A E8   			call	_spr_x.1
 8650                        	
 8651                        		.dbg	line,	"include\routines_LEVELS.c", 1730; spr_y(player_pos_y+16);
 8652                        		__ld.wm		_player_pos_y
         01:CB96  AD D6 24   			lda.l	_player_pos_y
         01:CB99  AC D7 24   			ldy.h	_player_pos_y
 8653                        		__add.wi	16
         01:CB9C  18         			clc
         01:CB9D  69 10      			adc.l	#16
         01:CB9F  90 01      			bcc	!+
         01:CBA1  C8         			iny
         01:CBA2             	!:
 8654                        		__call		_spr_y.1
         01:CBA2  20 19 E8   			call	_spr_y.1
 8655                        	
 8656                        		.dbg	line,	"include\routines_LEVELS.c", 1731; }
 8657                        	
 8658                        		.dbg	line,	"include\routines_LEVELS.c", 1733; player_counter_anim = 1;
 8659    01:CBA5             	.LL329:
 8660                        		__st.umiq	1, _player_counter_anim
         01:CBA5  A9 01      			lda.l	#1
         01:CBA7  8D 19 23   			sta	_player_counter_anim
 8661                        	
 8662                        		.dbg	line,	"include\routines_LEVELS.c", 1734; player_index_jump = 0;
 8663                        		__st.umiq	0, _player_index_jump
         01:CBAA  9C 1A 23   			stz	_player_index_jump
 8664                        	
 8665                        		.dbg	line,	"include\routines_LEVELS.c", 1736; if(player_attack == FALSE)
 8666                        		__not.um	_player_attack
         01:CBAD  AD 1E 23   			lda	_player_attack
         01:CBB0  18         			clc
         01:CBB1  D0 01      			bne	!+
         01:CBB3  38         			sec
         01:CBB4             	!:
 8667                        		__bfalse	.LL330
         01:CBB4  B0 03 4C 0B			bcc	.LL330
         01:CBB8  DB          
 8668                        	
 8669                        		.dbg	line,	"include\routines_LEVELS.c", 1737; {
 8670                        	
 8671                        		.dbg	line,	"include\routines_LEVELS.c", 1738; player_state = STATE_IDLE;
 8672                        		__st.umiq	0, _player_state
         01:CBB9  9C 16 23   			stz	_player_state
 8673                        	
 8674                        		.dbg	line,	"include\routines_LEVELS.c", 1739; }
 8675                        	
 8676                        		.dbg	line,	"include\routines_LEVELS.c", 1741; return;
 8677    01:CBBC             	.LL330	.alias		.LL230
 8678                        		__bra		.LL230
         01:CBBC  4C 0B DB   			bra	.LL230
 8679                        	
 8680                        		.dbg	line,	"include\routines_LEVELS.c", 1742; }
 8681                        	
 8682                        		.dbg	line,	"include\routines_LEVELS.c", 1743; }
 8683    01:CBBF             	.LL323:
 8684    01:CBBF             	.LL322:
 8685                        	
 8686                        		.dbg	line,	"include\routines_LEVELS.c", 1744; }
 8687                        	
 8688                        		.dbg	line,	"include\routines_LEVELS.c", 1748; // CHECK COLLISION WITH LADDERS //
 8689                        	
 8690                        		.dbg	line,	"include\routines_LEVELS.c", 1749; check_BG( 16 , 16 );
 8691    01:CBBF             	.LL313:
 8692                        		__ld.wi		16
         01:CBBF  A9 10      			lda.l	#16
         01:CBC1  C2         			cly
 8693                        		__pusharg.wr
         01:CBC2  A6 8D      			ldx	<__sp
         01:CBC4  CA         			dex
         01:CBC5  CA         			dex
         01:CBC6  95 08      			sta.l	<__stack, x
         01:CBC8  94 09      			sty.h	<__stack, x
         01:CBCA  86 8D      			stx	<__sp
 8694                        		__ld.wi		16
         01:CBCC  A9 10      			lda.l	#16
         01:CBCE  C2         			cly
 8695                        		__pusharg.wr
         01:CBCF  A6 8D      			ldx	<__sp
         01:CBD1  CA         			dex
         01:CBD2  CA         			dex
         01:CBD3  95 08      			sta.l	<__stack, x
         01:CBD5  94 09      			sty.h	<__stack, x
         01:CBD7  86 8D      			stx	<__sp
 8696                        		__call		_check_BG
         01:CBD9  20 6D FF   			call	_check_BG
 8697                        	
 8698                        		.dbg	line,	"include\routines_LEVELS.c", 1751; // IF PLAYER HITS THE LADDER //
 8699                        	
 8700                        		.dbg	line,	"include\routines_LEVELS.c", 1752; if(map_blk_flag == TILE_LADDER)
 8701                        		__ld.umq	_map_blk_flag
         01:CBDC  AD B1 2B   			lda	_map_blk_flag
 8702                        		__equ_b.uiq	2
         01:CBDF  C9 02      			cmp	#2
         01:CBE1  F0 01      			beq	!+
         01:CBE3  18         			clc
         01:CBE4             	!:
 8703                        		__bfalse	.LL331
         01:CBE4  B0 03 4C 0B			bcc	.LL331
         01:CBE8  DB          
 8704                        	
 8705                        		.dbg	line,	"include\routines_LEVELS.c", 1753; {
 8706                        	
 8707                        		.dbg	line,	"include\routines_LEVELS.c", 1754; // CAMERA GOES 8 PX BACKWARD //
 8708                        	
 8709                        		.dbg	line,	"include\routines_LEVELS.c", 1755; sgx_map_pxl_x = ( (sgx_map_pxl_x >> 3) << 3 );
 8710                        		__ld.wm		_sgx_map_pxl_x
         01:CBE9  AD 90 26   			lda.l	_sgx_map_pxl_x
         01:CBEC  AC 91 26   			ldy.h	_sgx_map_pxl_x
 8711                        		__lsr.wi	3
         01:CBEF  84 00      			sty	__temp
         01:CBF1  20 3A E2   			jsr	lsrw3
 8712                        		__asl.wi	3
         01:CBF4  84 00      			sty	__temp
         01:CBF6  20 D7 E1   			jsr	aslw3
 8713                        		__st.wmq	_sgx_map_pxl_x
         01:CBF9  8D 90 26   			sta.l	_sgx_map_pxl_x
         01:CBFC  8C 91 26   			sty.h	_sgx_map_pxl_x
 8714                        	
 8715                        		.dbg	line,	"include\routines_LEVELS.c", 1757; // SO WE UPDATE THE MAP //
 8716                        	
 8717                        		.dbg	line,	"include\routines_LEVELS.c", 1758; sgx_scroll_map();
 8718                        		__call		_sgx_scroll_map
         01:CBFF  20 81 FF   			call	_sgx_scroll_map
 8719                        	
 8720                        		.dbg	line,	"include\routines_LEVELS.c", 1760; // CHECK IF THE PLAYER STANDS RIGHT TO THE LADDER //
 8721                        	
 8722                        		.dbg	line,	"include\routines_LEVELS.c", 1761; check_BG( 31 , 16 );
 8723                        		__ld.wi		31
         01:CC02  A9 1F      			lda.l	#31
         01:CC04  C2         			cly
 8724                        		__pusharg.wr
         01:CC05  A6 8D      			ldx	<__sp
         01:CC07  CA         			dex
         01:CC08  CA         			dex
         01:CC09  95 08      			sta.l	<__stack, x
         01:CC0B  94 09      			sty.h	<__stack, x
         01:CC0D  86 8D      			stx	<__sp
 8725                        		__ld.wi		16
         01:CC0F  A9 10      			lda.l	#16
         01:CC11  C2         			cly
 8726                        		__pusharg.wr
         01:CC12  A6 8D      			ldx	<__sp
         01:CC14  CA         			dex
         01:CC15  CA         			dex
         01:CC16  95 08      			sta.l	<__stack, x
         01:CC18  94 09      			sty.h	<__stack, x
         01:CC1A  86 8D      			stx	<__sp
 8727                        		__call		_check_BG
         01:CC1C  20 6D FF   			call	_check_BG
 8728                        	
 8729                        		.dbg	line,	"include\routines_LEVELS.c", 1763; if(map_blk_flag == TILE_LADDER)
 8730                        		__ld.umq	_map_blk_flag
         01:CC1F  AD B1 2B   			lda	_map_blk_flag
 8731                        		__equ_b.uiq	2
         01:CC22  C9 02      			cmp	#2
         01:CC24  F0 01      			beq	!+
         01:CC26  18         			clc
         01:CC27             	!:
 8732                        		__bfalse	.LL332
         01:CC27  90 0E      			bcc	.LL332
 8733                        	
 8734                        		.dbg	line,	"include\routines_LEVELS.c", 1764; {
 8735                        	
 8736                        		.dbg	line,	"include\routines_LEVELS.c", 1765; sgx_map_pxl_x += 8;
 8737                        		__add_st.wmiq	8, _sgx_map_pxl_x
         01:CC29  18         			clc
         01:CC2A  AD 90 26   			lda.l	_sgx_map_pxl_x
         01:CC2D  69 08      			adc.l	#8
         01:CC2F  8D 90 26   			sta.l	_sgx_map_pxl_x
         01:CC32  90 03      			bcc	!+
         01:CC34  EE 91 26   			inc.h	_sgx_map_pxl_x
         01:CC37             	!:
 8738                        	
 8739                        		.dbg	line,	"include\routines_LEVELS.c", 1766; }
 8740                        	
 8741                        		.dbg	line,	"include\routines_LEVELS.c", 1768; spr_pattern(PLAYER_HANG_VRAM_ADR);
 8742    01:CC37             	.LL332:
 8743                        		__ld.wi		7424
         01:CC37  62         			cla
         01:CC38  A0 1D      			ldy.h	#7424
 8744                        		__call		_spr_pattern.1
         01:CC3A  20 26 E8   			call	_spr_pattern.1
 8745                        	
 8746                        		.dbg	line,	"include\routines_LEVELS.c", 1769; player_counter_anim = 0;
 8747                        		__st.umiq	0, _player_counter_anim
         01:CC3D  9C 19 23   			stz	_player_counter_anim
 8748                        	
 8749                        		.dbg	line,	"include\routines_LEVELS.c", 1770; player_index_jump = 0;
 8750                        		__st.umiq	0, _player_index_jump
         01:CC40  9C 1A 23   			stz	_player_index_jump
 8751                        	
 8752                        		.dbg	line,	"include\routines_LEVELS.c", 1771; jump_ladder = TRUE;
 8753                        		__st.umiq	1, _jump_ladder
         01:CC43  A9 01      			lda.l	#1
         01:CC45  8D 1F 23   			sta	_jump_ladder
 8754                        	
 8755                        		.dbg	line,	"include\routines_LEVELS.c", 1772; player_state = STATE_HANG;
 8756                        		__st.umiq	10, _player_state
         01:CC48  A9 0A      			lda.l	#10
         01:CC4A  8D 16 23   			sta	_player_state
 8757                        	
 8758                        		.dbg	line,	"include\routines_LEVELS.c", 1773; }
 8759                        	
 8760                        		.dbg	line,	"include\routines_LEVELS.c", 1774; }
 8761    01:CC4D             	.LL331	.alias		.LL333
 8762                        	
 8763                        		.dbg	line,	"include\routines_LEVELS.c", 1777; else if(player_state == STATE_JUMP_RIGHT)
 8764                        		__bra		.LL333
         01:CC4D  4C 0B DB   			bra	.LL333
 8765    01:CC50             	.LL279:
 8766                        		__ld.umq	_player_state
         01:CC50  AD 16 23   			lda	_player_state
 8767                        		__equ_b.uiq	5
         01:CC53  C9 05      			cmp	#5
         01:CC55  F0 01      			beq	!+
         01:CC57  18         			clc
         01:CC58             	!:
 8768                        		__bfalse	.LL334
         01:CC58  B0 03 4C 84			bcc	.LL334
         01:CC5C  D0          
 8769                        	
 8770                        		.dbg	line,	"include\routines_LEVELS.c", 1778; {
 8771                        	
 8772                        		.dbg	line,	"include\routines_LEVELS.c", 1779; unsigned char i, camera_y_move;
 8773                        	
 8774                        		.dbg	line,	"include\routines_LEVELS.c", 1780; i = 1;
 8775                        		__st.umiq	1, __update_PLAYER_end - 2  /* i */
         01:CC5D  A9 01      			lda.l	#1
         01:CC5F  8D 0B 23   			sta	__update_PLAYER_end - 2
 8776                        	
 8777                        		.dbg	line,	"include\routines_LEVELS.c", 1782; // UPDATE PLAYER TILES //
 8778                        	
 8779                        		.dbg	line,	"include\routines_LEVELS.c", 1783; if(player_counter_anim == 0)
 8780                        		__not.um	_player_counter_anim
         01:CC62  AD 19 23   			lda	_player_counter_anim
         01:CC65  18         			clc
         01:CC66  D0 01      			bne	!+
         01:CC68  38         			sec
         01:CC69             	!:
 8781                        		__bfalse	.LL335
         01:CC69  90 11      			bcc	.LL335
 8782                        	
 8783                        		.dbg	line,	"include\routines_LEVELS.c", 1784; {
 8784                        	
 8785                        		.dbg	line,	"include\routines_LEVELS.c", 1785; spr_set(player_id);
 8786                        		__ld.umq	_player_id
         01:CC6B  AD 15 23   			lda	_player_id
 8787                        		__call		_spr_set.1
         01:CC6E  20 DD E7   			call	_spr_set.1
 8788                        	
 8789                        		.dbg	line,	"include\routines_LEVELS.c", 1786; spr_pattern(PLAYER_JUMP_VRAM_ADR);
 8790                        		__ld.wi		6912
         01:CC71  62         			cla
         01:CC72  A0 1B      			ldy.h	#6912
 8791                        		__call		_spr_pattern.1
         01:CC74  20 26 E8   			call	_spr_pattern.1
 8792                        	
 8793                        		.dbg	line,	"include\routines_LEVELS.c", 1788; player_counter_anim = 1;
 8794                        		__st.umiq	1, _player_counter_anim
         01:CC77  A9 01      			lda.l	#1
         01:CC79  8D 19 23   			sta	_player_counter_anim
 8795                        	
 8796                        		.dbg	line,	"include\routines_LEVELS.c", 1789; }
 8797                        	
 8798                        		.dbg	line,	"include\routines_LEVELS.c", 1792; // SELECT PLAYER SPRITE //
 8799                        	
 8800                        		.dbg	line,	"include\routines_LEVELS.c", 1793; spr_set(player_id);
 8801    01:CC7C             	.LL335:
 8802                        		__ld.umq	_player_id
         01:CC7C  AD 15 23   			lda	_player_id
 8803                        		__call		_spr_set.1
         01:CC7F  20 DD E7   			call	_spr_set.1
 8804                        	
 8805                        		.dbg	line,	"include\routines_LEVELS.c", 1796; //**************************************************************************************//
 8806                        	
 8807                        		.dbg	line,	"include\routines_LEVELS.c", 1797; //                                        H MOVE                                        //
 8808                        	
 8809                        		.dbg	line,	"include\routines_LEVELS.c", 1798; //**************************************************************************************//
 8810                        	
 8811                        		.dbg	line,	"include\routines_LEVELS.c", 1800; //--------------------------------------------------------------------------------------//
 8812                        	
 8813                        		.dbg	line,	"include\routines_LEVELS.c", 1801; //                                    WALL COLLISION                                    //
 8814                        	
 8815                        		.dbg	line,	"include\routines_LEVELS.c", 1802; //--------------------------------------------------------------------------------------//
 8816                        	
 8817                        		.dbg	line,	"include\routines_LEVELS.c", 1804; // CHECK COLLISION WITH BOTTOM RIGHT WALL //
 8818                        	
 8819                        		.dbg	line,	"include\routines_LEVELS.c", 1805; check_BG( 24 , 31 );
 8820                        		__ld.wi		24
         01:CC82  A9 18      			lda.l	#24
         01:CC84  C2         			cly
 8821                        		__pusharg.wr
         01:CC85  A6 8D      			ldx	<__sp
         01:CC87  CA         			dex
         01:CC88  CA         			dex
         01:CC89  95 08      			sta.l	<__stack, x
         01:CC8B  94 09      			sty.h	<__stack, x
         01:CC8D  86 8D      			stx	<__sp
 8822                        		__ld.wi		31
         01:CC8F  A9 1F      			lda.l	#31
         01:CC91  C2         			cly
 8823                        		__pusharg.wr
         01:CC92  A6 8D      			ldx	<__sp
         01:CC94  CA         			dex
         01:CC95  CA         			dex
         01:CC96  95 08      			sta.l	<__stack, x
         01:CC98  94 09      			sty.h	<__stack, x
         01:CC9A  86 8D      			stx	<__sp
 8824                        		__call		_check_BG
         01:CC9C  20 6D FF   			call	_check_BG
 8825                        	
 8826                        		.dbg	line,	"include\routines_LEVELS.c", 1807; if(map_blk_flag != TILE_BG)
 8827                        		__ld.umq	_map_blk_flag
         01:CC9F  AD B1 2B   			lda	_map_blk_flag
 8828                        		__neq_b.uiq	1
         01:CCA2  38         			sec
         01:CCA3  49 01      			eor	#1
         01:CCA5  D0 01      			bne	!+
         01:CCA7  18         			clc
         01:CCA8             	!:
 8829                        		__bfalse	.LL336
         01:CCA8  90 78      			bcc	.LL336
 8830                        	
 8831                        		.dbg	line,	"include\routines_LEVELS.c", 1808; {
 8832                        	
 8833                        		.dbg	line,	"include\routines_LEVELS.c", 1809; // CHECK COLLISION WITH TOP RIGHT WALL //
 8834                        	
 8835                        		.dbg	line,	"include\routines_LEVELS.c", 1810; check_BG( 24 , 15 );
 8836                        		__ld.wi		24
         01:CCAA  A9 18      			lda.l	#24
         01:CCAC  C2         			cly
 8837                        		__pusharg.wr
         01:CCAD  A6 8D      			ldx	<__sp
         01:CCAF  CA         			dex
         01:CCB0  CA         			dex
         01:CCB1  95 08      			sta.l	<__stack, x
         01:CCB3  94 09      			sty.h	<__stack, x
         01:CCB5  86 8D      			stx	<__sp
 8838                        		__ld.wi		15
         01:CCB7  A9 0F      			lda.l	#15
         01:CCB9  C2         			cly
 8839                        		__pusharg.wr
         01:CCBA  A6 8D      			ldx	<__sp
         01:CCBC  CA         			dex
         01:CCBD  CA         			dex
         01:CCBE  95 08      			sta.l	<__stack, x
         01:CCC0  94 09      			sty.h	<__stack, x
         01:CCC2  86 8D      			stx	<__sp
 8840                        		__call		_check_BG
         01:CCC4  20 6D FF   			call	_check_BG
 8841                        	
 8842                        		.dbg	line,	"include\routines_LEVELS.c", 1812; if(map_blk_flag == TILE_BG)
 8843                        		__ld.umq	_map_blk_flag
         01:CCC7  AD B1 2B   			lda	_map_blk_flag
 8844                        		__equ_b.uiq	1
         01:CCCA  C9 01      			cmp	#1
         01:CCCC  F0 01      			beq	!+
         01:CCCE  18         			clc
         01:CCCF             	!:
 8845                        		__bfalse	.LL337
         01:CCCF  90 41      			bcc	.LL337
 8846                        	
 8847                        		.dbg	line,	"include\routines_LEVELS.c", 1813; {
 8848                        	
 8849                        		.dbg	line,	"include\routines_LEVELS.c", 1814; check_TILE_DEPTH( 15 , -16 );
 8850                        		__ld.wi		15
         01:CCD1  A9 0F      			lda.l	#15
         01:CCD3  C2         			cly
 8851                        		__pusharg.wr
         01:CCD4  A6 8D      			ldx	<__sp
         01:CCD6  CA         			dex
         01:CCD7  CA         			dex
         01:CCD8  95 08      			sta.l	<__stack, x
         01:CCDA  94 09      			sty.h	<__stack, x
         01:CCDC  86 8D      			stx	<__sp
 8852                        		__ld.wi		-16
         01:CCDE  A9 F0      			lda.l	#-16
         01:CCE0  A0 FF      			ldy.h	#-16
 8853                        		__pusharg.wr
         01:CCE2  A6 8D      			ldx	<__sp
         01:CCE4  CA         			dex
         01:CCE5  CA         			dex
         01:CCE6  95 08      			sta.l	<__stack, x
         01:CCE8  94 09      			sty.h	<__stack, x
         01:CCEA  86 8D      			stx	<__sp
 8854                        		__call		_check_TILE_DEPTH
         01:CCEC  20 59 FF   			call	_check_TILE_DEPTH
 8855                        	
 8856                        		.dbg	line,	"include\routines_LEVELS.c", 1816; if(map_blk_flag == TILE_EMPTY && jump_ladder == TRUE)
 8857                        		__not.um	_map_blk_flag
         01:CCEF  AD B1 2B   			lda	_map_blk_flag
         01:CCF2  18         			clc
         01:CCF3  D0 01      			bne	!+
         01:CCF5  38         			sec
         01:CCF6             	!:
 8858                        		__bfalse	.LL339
         01:CCF6  90 08      			bcc	.LL339
 8859                        		__ld.umq	_jump_ladder
         01:CCF8  AD 1F 23   			lda	_jump_ladder
 8860                        		__equ_b.uiq	1
         01:CCFB  C9 01      			cmp	#1
         01:CCFD  F0 01      			beq	!+
         01:CCFF  18         			clc
         01:CD00             	!:
 8861    01:CD00             	.LL339:
 8862                        		__bfalse	.LL338
         01:CD00  90 5F      			bcc	.LL338
 8863                        	
 8864                        		.dbg	line,	"include\routines_LEVELS.c", 1817; {
 8865                        	
 8866                        		.dbg	line,	"include\routines_LEVELS.c", 1818; jump_ladder = FALSE;
 8867                        		__st.umiq	0, _jump_ladder
         01:CD02  9C 1F 23   			stz	_jump_ladder
 8868                        	
 8869                        		.dbg	line,	"include\routines_LEVELS.c", 1819; player_index_fall = 0;
 8870                        		__st.umiq	0, _player_index_fall
         01:CD05  9C 1B 23   			stz	_player_index_fall
 8871                        	
 8872                        		.dbg	line,	"include\routines_LEVELS.c", 1820; player_state = STATE_FALL;
 8873                        		__st.umiq	9, _player_state
         01:CD08  A9 09      			lda.l	#9
         01:CD0A  8D 16 23   			sta	_player_state
 8874                        	
 8875                        		.dbg	line,	"include\routines_LEVELS.c", 1821; return;
 8876                        		__bra		.LL230
         01:CD0D  4C 0B DB   			bra	.LL230
 8877                        	
 8878                        		.dbg	line,	"include\routines_LEVELS.c", 1822; }
 8879                        	
 8880                        		.dbg	line,	"include\routines_LEVELS.c", 1823; }
 8881    01:CD10             	.LL338	.alias		.LL340
 8882                        	
 8883                        		.dbg	line,	"include\routines_LEVELS.c", 1825; else
 8884                        		__bra		.LL340
         01:CD10  80 4F      			bra	.LL340
 8885    01:CD12             	.LL337:
 8886                        	
 8887                        		.dbg	line,	"include\routines_LEVELS.c", 1826; {
 8888                        	
 8889                        		.dbg	line,	"include\routines_LEVELS.c", 1827; sgx_map_pxl_x += 2;
 8890                        		__add_st.wmiq	2, _sgx_map_pxl_x
         01:CD12  18         			clc
         01:CD13  AD 90 26   			lda.l	_sgx_map_pxl_x
         01:CD16  69 02      			adc.l	#2
         01:CD18  8D 90 26   			sta.l	_sgx_map_pxl_x
         01:CD1B  90 03      			bcc	!+
         01:CD1D  EE 91 26   			inc.h	_sgx_map_pxl_x
         01:CD20             	!:
 8891                        	
 8892                        		.dbg	line,	"include\routines_LEVELS.c", 1828; }
 8893    01:CD20             	.LL340	.alias		.LL341
 8894                        	
 8895                        		.dbg	line,	"include\routines_LEVELS.c", 1829; }
 8896                        	
 8897                        		.dbg	line,	"include\routines_LEVELS.c", 1831; else
 8898                        		__bra		.LL341
         01:CD20  80 3F      			bra	.LL341
 8899    01:CD22             	.LL336:
 8900                        	
 8901                        		.dbg	line,	"include\routines_LEVELS.c", 1832; {
 8902                        	
 8903                        		.dbg	line,	"include\routines_LEVELS.c", 1833; check_TILE_DEPTH( 15 , -16 );
 8904                        		__ld.wi		15
         01:CD22  A9 0F      			lda.l	#15
         01:CD24  C2         			cly
 8905                        		__pusharg.wr
         01:CD25  A6 8D      			ldx	<__sp
         01:CD27  CA         			dex
         01:CD28  CA         			dex
         01:CD29  95 08      			sta.l	<__stack, x
         01:CD2B  94 09      			sty.h	<__stack, x
         01:CD2D  86 8D      			stx	<__sp
 8906                        		__ld.wi		-16
         01:CD2F  A9 F0      			lda.l	#-16
         01:CD31  A0 FF      			ldy.h	#-16
 8907                        		__pusharg.wr
         01:CD33  A6 8D      			ldx	<__sp
         01:CD35  CA         			dex
         01:CD36  CA         			dex
         01:CD37  95 08      			sta.l	<__stack, x
         01:CD39  94 09      			sty.h	<__stack, x
         01:CD3B  86 8D      			stx	<__sp
 8908                        		__call		_check_TILE_DEPTH
         01:CD3D  20 59 FF   			call	_check_TILE_DEPTH
 8909                        	
 8910                        		.dbg	line,	"include\routines_LEVELS.c", 1835; if(map_blk_flag == TILE_EMPTY && jump_ladder == TRUE)
 8911                        		__not.um	_map_blk_flag
         01:CD40  AD B1 2B   			lda	_map_blk_flag
         01:CD43  18         			clc
         01:CD44  D0 01      			bne	!+
         01:CD46  38         			sec
         01:CD47             	!:
 8912                        		__bfalse	.LL343
         01:CD47  90 08      			bcc	.LL343
 8913                        		__ld.umq	_jump_ladder
         01:CD49  AD 1F 23   			lda	_jump_ladder
 8914                        		__equ_b.uiq	1
         01:CD4C  C9 01      			cmp	#1
         01:CD4E  F0 01      			beq	!+
         01:CD50  18         			clc
         01:CD51             	!:
 8915    01:CD51             	.LL343:
 8916                        		__bfalse	.LL342
         01:CD51  90 0E      			bcc	.LL342
 8917                        	
 8918                        		.dbg	line,	"include\routines_LEVELS.c", 1836; {
 8919                        	
 8920                        		.dbg	line,	"include\routines_LEVELS.c", 1837; jump_ladder = FALSE;
 8921                        		__st.umiq	0, _jump_ladder
         01:CD53  9C 1F 23   			stz	_jump_ladder
 8922                        	
 8923                        		.dbg	line,	"include\routines_LEVELS.c", 1838; player_index_fall = 0;
 8924                        		__st.umiq	0, _player_index_fall
         01:CD56  9C 1B 23   			stz	_player_index_fall
 8925                        	
 8926                        		.dbg	line,	"include\routines_LEVELS.c", 1839; player_state = STATE_FALL;
 8927                        		__st.umiq	9, _player_state
         01:CD59  A9 09      			lda.l	#9
         01:CD5B  8D 16 23   			sta	_player_state
 8928                        	
 8929                        		.dbg	line,	"include\routines_LEVELS.c", 1840; return;
 8930                        		__bra		.LL230
         01:CD5E  4C 0B DB   			bra	.LL230
 8931                        	
 8932                        		.dbg	line,	"include\routines_LEVELS.c", 1841; }
 8933                        	
 8934                        		.dbg	line,	"include\routines_LEVELS.c", 1842; }
 8935    01:CD61             	.LL342:
 8936    01:CD61             	.LL341:
 8937                        	
 8938                        		.dbg	line,	"include\routines_LEVELS.c", 1847; //**************************************************************************************//
 8939                        	
 8940                        		.dbg	line,	"include\routines_LEVELS.c", 1848; //                                        V MOVE                                        //
 8941                        	
 8942                        		.dbg	line,	"include\routines_LEVELS.c", 1849; //**************************************************************************************//
 8943                        	
 8944                        		.dbg	line,	"include\routines_LEVELS.c", 1851; // UPDATE PLAYER Y POSITION //
 8945                        	
 8946                        		.dbg	line,	"include\routines_LEVELS.c", 1852; if(jump_ladder == FALSE)
 8947                        		__not.um	_jump_ladder
         01:CD61  AD 1F 23   			lda	_jump_ladder
         01:CD64  18         			clc
         01:CD65  D0 01      			bne	!+
         01:CD67  38         			sec
         01:CD68             	!:
 8948                        		__bfalse	.LL344
         01:CD68  90 1A      			bcc	.LL344
 8949                        	
 8950                        		.dbg	line,	"include\routines_LEVELS.c", 1853; {
 8951                        	
 8952                        		.dbg	line,	"include\routines_LEVELS.c", 1854; player_pos_y += TABLE_PLAYER_JUMP_V[player_index_jump];
 8953                        		__ldx.umq	_player_index_jump
         01:CD6A  AE 1A 23   			ldx	_player_index_jump
 8954                        		__ld.bax	_TABLE_PLAYER_JUMP_V
         01:CD6D  BD 1D 61   			lda	_TABLE_PLAYER_JUMP_V, x
         01:CD70  C2         			cly
         01:CD71  10 01      			bpl	!+
         01:CD73  88         			dey
         01:CD74             	!:
 8955                        		__add_st.wmq	_player_pos_y
         01:CD74  18         			clc
         01:CD75  6D D6 24   			adc.l	_player_pos_y
         01:CD78  8D D6 24   			sta.l	_player_pos_y
         01:CD7B  98         			tya
         01:CD7C  6D D7 24   			adc.h	_player_pos_y
         01:CD7F  8D D7 24   			sta.h	_player_pos_y
 8956                        	
 8957                        		.dbg	line,	"include\routines_LEVELS.c", 1855; }
 8958                        	
 8959                        		.dbg	line,	"include\routines_LEVELS.c", 1857; else
 8960                        		__bra		.LL345
         01:CD82  80 18      			bra	.LL345
 8961    01:CD84             	.LL344:
 8962                        	
 8963                        		.dbg	line,	"include\routines_LEVELS.c", 1858; {
 8964                        	
 8965                        		.dbg	line,	"include\routines_LEVELS.c", 1859; player_pos_y += TABLE_PLAYER_JUMP_LADDER[player_index_jump];
 8966                        		__ldx.umq	_player_index_jump
         01:CD84  AE 1A 23   			ldx	_player_index_jump
 8967                        		__ld.bax	_TABLE_PLAYER_JUMP_LADDER
         01:CD87  BD 55 61   			lda	_TABLE_PLAYER_JUMP_LADDER, x
         01:CD8A  C2         			cly
         01:CD8B  10 01      			bpl	!+
         01:CD8D  88         			dey
         01:CD8E             	!:
 8968                        		__add_st.wmq	_player_pos_y
         01:CD8E  18         			clc
         01:CD8F  6D D6 24   			adc.l	_player_pos_y
         01:CD92  8D D6 24   			sta.l	_player_pos_y
         01:CD95  98         			tya
         01:CD96  6D D7 24   			adc.h	_player_pos_y
         01:CD99  8D D7 24   			sta.h	_player_pos_y
 8969                        	
 8970                        		.dbg	line,	"include\routines_LEVELS.c", 1860; }
 8971    01:CD9C             	.LL345:
 8972                        	
 8973                        		.dbg	line,	"include\routines_LEVELS.c", 1864; // IF PLAYER GOES BELOW ITS BASE Y POSITION //
 8974                        	
 8975                        		.dbg	line,	"include\routines_LEVELS.c", 1865; if(player_pos_y >= PLAYER_BASE_Y_POS)
 8976                        		__ld.wm		_player_pos_y
         01:CD9C  AD D6 24   			lda.l	_player_pos_y
         01:CD9F  AC D7 24   			ldy.h	_player_pos_y
 8977                        		__sge_w.wi	128
         01:CDA2  C9 80      			cmp.l	#128		; Subtract integer from Y:A.
         01:CDA4  98         			tya
         01:CDA5  E9 00      			sbc.h	#128
         01:CDA7  50 02      			bvc	!+
         01:CDA9  49 80      			eor	#$80		; +ve if Y:A >= integer (signed).
         01:CDAB  49 80      	!:		eor	#$80
         01:CDAD  0A         			asl	a
 8978                        		__bfalse	.LL346
         01:CDAE  90 4E      			bcc	.LL346
 8979                        	
 8980                        		.dbg	line,	"include\routines_LEVELS.c", 1866; {
 8981                        	
 8982                        		.dbg	line,	"include\routines_LEVELS.c", 1867; // THE CAMERA MOVES //
 8983                        	
 8984                        		.dbg	line,	"include\routines_LEVELS.c", 1868; // CALCULATE HOW MANY PIXELS THE CAMERA HAS TO MOVE DOWN //
 8985                        	
 8986                        		.dbg	line,	"include\routines_LEVELS.c", 1869; camera_y_move = player_pos_y - PLAYER_BASE_Y_POS;
 8987                        		__ld.wm		_player_pos_y
         01:CDB0  AD D6 24   			lda.l	_player_pos_y
         01:CDB3  AC D7 24   			ldy.h	_player_pos_y
 8988                        		__sub.wi	128
         01:CDB6  38         			sec
         01:CDB7  E9 80      			sbc.l	#128
         01:CDB9  B0 01      			bcs	!+
         01:CDBB  88         			dey
         01:CDBC             	!:
 8989                        		__st.umq	__update_PLAYER_end - 3  /* camera_y_move */
         01:CDBC  8D 0A 23   			sta	__update_PLAYER_end - 3
 8990                        	
 8991                        		.dbg	line,	"include\routines_LEVELS.c", 1870; sgx_map_pxl_y += camera_y_move;
 8992                        		__ld.um		__update_PLAYER_end - 3  /* camera_y_move */
         01:CDBF  AD 0A 23   			lda	__update_PLAYER_end - 3
         01:CDC2  C2         			cly
 8993                        		__add_st.wmq	_sgx_map_pxl_y
         01:CDC3  18         			clc
         01:CDC4  6D 92 26   			adc.l	_sgx_map_pxl_y
         01:CDC7  8D 92 26   			sta.l	_sgx_map_pxl_y
         01:CDCA  98         			tya
         01:CDCB  6D 93 26   			adc.h	_sgx_map_pxl_y
         01:CDCE  8D 93 26   			sta.h	_sgx_map_pxl_y
 8994                        	
 8995                        		.dbg	line,	"include\routines_LEVELS.c", 1872; // IF THE CAMERA HAS REACHED ITS MAX (LOWEST) POSITION //
 8996                        	
 8997                        		.dbg	line,	"include\routines_LEVELS.c", 1873; if(sgx_map_pxl_y > camera_max_y_position)
 8998                        		__ld.wm		_sgx_map_pxl_y
         01:CDD1  AD 92 26   			lda.l	_sgx_map_pxl_y
         01:CDD4  AC 93 26   			ldy.h	_sgx_map_pxl_y
 8999                        		__ugt_w.wm	_camera_max_y_position
         01:CDD7  18         			clc			; Subtract memory+1 from Y:A.
         01:CDD8  ED D8 24   			sbc.l	_camera_max_y_position
         01:CDDB  98         			tya
         01:CDDC  ED D9 24   			sbc.h	_camera_max_y_position		; CS if Y:A > memory.
 9000                        		__bfalse	.LL347
         01:CDDF  90 0C      			bcc	.LL347
 9001                        	
 9002                        		.dbg	line,	"include\routines_LEVELS.c", 1874; {
 9003                        	
 9004                        		.dbg	line,	"include\routines_LEVELS.c", 1875; // THE CAMERA CAN NOT MOVE LOWER //
 9005                        	
 9006                        		.dbg	line,	"include\routines_LEVELS.c", 1876; sgx_map_pxl_y = camera_max_y_position;
 9007                        		__ld.wm		_camera_max_y_position
         01:CDE1  AD D8 24   			lda.l	_camera_max_y_position
         01:CDE4  AC D9 24   			ldy.h	_camera_max_y_position
 9008                        		__st.wmq	_sgx_map_pxl_y
         01:CDE7  8D 92 26   			sta.l	_sgx_map_pxl_y
         01:CDEA  8C 93 26   			sty.h	_sgx_map_pxl_y
 9009                        	
 9010                        		.dbg	line,	"include\routines_LEVELS.c", 1877; }
 9011                        	
 9012                        		.dbg	line,	"include\routines_LEVELS.c", 1879; // THE PLAYER STAYS AT ITS BASE Y POSITION //
 9013                        	
 9014                        		.dbg	line,	"include\routines_LEVELS.c", 1880; player_pos_y = PLAYER_BASE_Y_POS;
 9015    01:CDED             	.LL347:
 9016                        		__st.wmiq	128, _player_pos_y
         01:CDED  A9 80      			lda.l	#128
         01:CDEF  8D D6 24   			sta.l	_player_pos_y
         01:CDF2  9C D7 24   			stz.h	_player_pos_y
 9017                        	
 9018                        		.dbg	line,	"include\routines_LEVELS.c", 1882; spr_y(player_pos_y);
 9019                        		__ld.wm		_player_pos_y
         01:CDF5  AD D6 24   			lda.l	_player_pos_y
         01:CDF8  AC D7 24   			ldy.h	_player_pos_y
 9020                        		__call		_spr_y.1
         01:CDFB  20 19 E8   			call	_spr_y.1
 9021                        	
 9022                        		.dbg	line,	"include\routines_LEVELS.c", 1883; }
 9023                        	
 9024                        		.dbg	line,	"include\routines_LEVELS.c", 1886; // UPDATE JUMP INDEX IN THE ARRAY //
 9025                        	
 9026                        		.dbg	line,	"include\routines_LEVELS.c", 1887; if(player_index_jump < jump_max_index)
 9027    01:CDFE             	.LL346:
 9028                        		__ld.umq	_player_index_jump
         01:CDFE  AD 1A 23   			lda	_player_index_jump
 9029                        		__ult_b.umq	_jump_max_index
         01:CE01  CD 20 23   			cmp	_jump_max_index		; Subtract memory from A.
         01:CE04  6A         			ror	a		; CC if A < memory.
         01:CE05  49 80      			eor	#$80
         01:CE07  2A         			rol	a
 9030                        		__bfalse	.LL348
         01:CE08  90 03      			bcc	.LL348
 9031                        	
 9032                        		.dbg	line,	"include\routines_LEVELS.c", 1888; {
 9033                        	
 9034                        		.dbg	line,	"include\routines_LEVELS.c", 1889; player_index_jump += 1;
 9035                        		__add_st.umiq	1, _player_index_jump
         01:CE0A  EE 1A 23   			inc	_player_index_jump
 9036                        	
 9037                        		.dbg	line,	"include\routines_LEVELS.c", 1890; }
 9038                        	
 9039                        		.dbg	line,	"include\routines_LEVELS.c", 1895; //--------------------------------------------------------------------------------------//
 9040                        	
 9041                        		.dbg	line,	"include\routines_LEVELS.c", 1896; //                                   FLOOR COLLISION                                    //
 9042                        	
 9043                        		.dbg	line,	"include\routines_LEVELS.c", 1897; //--------------------------------------------------------------------------------------//
 9044                        	
 9045                        		.dbg	line,	"include\routines_LEVELS.c", 1899; if(player_index_jump > 14)
 9046    01:CE0D             	.LL348:
 9047                        		__ld.umq	_player_index_jump
         01:CE0D  AD 1A 23   			lda	_player_index_jump
 9048                        		__ugt_b.uiq	14
         01:CE10  18         			clc			; Subtract integer+1 from A.
         01:CE11  E9 0E      			sbc	#14		; CS if A > integer.
 9049                        		__bfalse	.LL349
         01:CE13  B0 03 4C C8			bcc	.LL349
         01:CE17  CF          
 9050                        	
 9051                        		.dbg	line,	"include\routines_LEVELS.c", 1900; {
 9052                        	
 9053                        		.dbg	line,	"include\routines_LEVELS.c", 1901; // CHECK COLLISION WITH LEFT FLOOR //
 9054                        	
 9055                        		.dbg	line,	"include\routines_LEVELS.c", 1902; check_BG( 10 , 32 );
 9056                        		__ld.wi		10
         01:CE18  A9 0A      			lda.l	#10
         01:CE1A  C2         			cly
 9057                        		__pusharg.wr
         01:CE1B  A6 8D      			ldx	<__sp
         01:CE1D  CA         			dex
         01:CE1E  CA         			dex
         01:CE1F  95 08      			sta.l	<__stack, x
         01:CE21  94 09      			sty.h	<__stack, x
         01:CE23  86 8D      			stx	<__sp
 9058                        		__ld.wi		32
         01:CE25  A9 20      			lda.l	#32
         01:CE27  C2         			cly
 9059                        		__pusharg.wr
         01:CE28  A6 8D      			ldx	<__sp
         01:CE2A  CA         			dex
         01:CE2B  CA         			dex
         01:CE2C  95 08      			sta.l	<__stack, x
         01:CE2E  94 09      			sty.h	<__stack, x
         01:CE30  86 8D      			stx	<__sp
 9060                        		__call		_check_BG
         01:CE32  20 6D FF   			call	_check_BG
 9061                        	
 9062                        		.dbg	line,	"include\routines_LEVELS.c", 1904; // IF PLAYER TOUCHES THE GROUND TO THE LEFT //
 9063                        	
 9064                        		.dbg	line,	"include\routines_LEVELS.c", 1905; if(map_blk_flag == TILE_BG)
 9065                        		__ld.umq	_map_blk_flag
         01:CE35  AD B1 2B   			lda	_map_blk_flag
 9066                        		__equ_b.uiq	1
         01:CE38  C9 01      			cmp	#1
         01:CE3A  F0 01      			beq	!+
         01:CE3C  18         			clc
         01:CE3D             	!:
 9067                        		__bfalse	.LL350
         01:CE3D  B0 03 4C F0			bcc	.LL350
         01:CE41  CE          
 9068                        	
 9069                        		.dbg	line,	"include\routines_LEVELS.c", 1906; {
 9070                        	
 9071                        		.dbg	line,	"include\routines_LEVELS.c", 1907; // CALCULATE HOW MANY PIXELS THE PLAYER MOVED INTO THE GROUND //
 9072                        	
 9073                        		.dbg	line,	"include\routines_LEVELS.c", 1908; for(i=1; i<11 ; i++)
 9074                        		__st.umiq	1, __update_PLAYER_end - 2  /* i */
         01:CE42  A9 01      			lda.l	#1
         01:CE44  8D 0B 23   			sta	__update_PLAYER_end - 2
 9075    01:CE47             	.LL351:
 9076                        		__ld.umq	__update_PLAYER_end - 2  /* i */
         01:CE47  AD 0B 23   			lda	__update_PLAYER_end - 2
 9077                        		__ult_b.uiq	11
         01:CE4A  C9 0B      			cmp	#11		; Subtract integer from A.
         01:CE4C  6A         			ror	a		; CC if A < integer.
         01:CE4D  49 80      			eor	#$80
         01:CE4F  2A         			rol	a
 9078                        		__btrue		.LL353
         01:CE50  B0 07      			bcs	.LL353
 9079                        		__bra		.LL354
         01:CE52  80 7D      			bra	.LL354
 9080    01:CE54             	.LL352:
 9081                        		__inc.umq	__update_PLAYER_end - 2  /* i */
         01:CE54  EE 0B 23   			inc	__update_PLAYER_end - 2
 9082                        		__bra		.LL351
         01:CE57  80 EE      			bra	.LL351
 9083    01:CE59             	.LL353:
 9084                        	
 9085                        		.dbg	line,	"include\routines_LEVELS.c", 1909; {
 9086                        	
 9087                        		.dbg	line,	"include\routines_LEVELS.c", 1910; check_TILE_DEPTH( 10 , i);
 9088                        		__ld.wi		10
         01:CE59  A9 0A      			lda.l	#10
         01:CE5B  C2         			cly
 9089                        		__pusharg.wr
         01:CE5C  A6 8D      			ldx	<__sp
         01:CE5E  CA         			dex
         01:CE5F  CA         			dex
         01:CE60  95 08      			sta.l	<__stack, x
         01:CE62  94 09      			sty.h	<__stack, x
         01:CE64  86 8D      			stx	<__sp
 9090                        		__ld.um		__update_PLAYER_end - 2  /* i */
         01:CE66  AD 0B 23   			lda	__update_PLAYER_end - 2
         01:CE69  C2         			cly
 9091                        		__pusharg.wr
         01:CE6A  A6 8D      			ldx	<__sp
         01:CE6C  CA         			dex
         01:CE6D  CA         			dex
         01:CE6E  95 08      			sta.l	<__stack, x
         01:CE70  94 09      			sty.h	<__stack, x
         01:CE72  86 8D      			stx	<__sp
 9092                        		__call		_check_TILE_DEPTH
         01:CE74  20 59 FF   			call	_check_TILE_DEPTH
 9093                        	
 9094                        		.dbg	line,	"include\routines_LEVELS.c", 1912; if(map_blk_flag == TILE_EMPTY)
 9095                        		__not.um	_map_blk_flag
         01:CE77  AD B1 2B   			lda	_map_blk_flag
         01:CE7A  18         			clc
         01:CE7B  D0 01      			bne	!+
         01:CE7D  38         			sec
         01:CE7E             	!:
 9096                        		__bfalse	.LL355
         01:CE7E  90 D4      			bcc	.LL355
 9097                        	
 9098                        		.dbg	line,	"include\routines_LEVELS.c", 1913; {
 9099                        	
 9100                        		.dbg	line,	"include\routines_LEVELS.c", 1914; if(player_pos_y != PLAYER_BASE_Y_POS)
 9101                        		__ld.wm		_player_pos_y
         01:CE80  AD D6 24   			lda.l	_player_pos_y
         01:CE83  AC D7 24   			ldy.h	_player_pos_y
 9102                        		__neq_w.wi	128
         01:CE86  38         			sec
         01:CE87  49 80      			eor.l	#128
         01:CE89  D0 06      			bne	!+
         01:CE8B  98         			tya
         01:CE8C  49 00      			eor.h	#128
         01:CE8E  D0 01      			bne	!+
         01:CE90  18         			clc
         01:CE91             	!:
 9103                        		__bfalse	.LL356
         01:CE91  90 1E      			bcc	.LL356
 9104                        	
 9105                        		.dbg	line,	"include\routines_LEVELS.c", 1915; {
 9106                        	
 9107                        		.dbg	line,	"include\routines_LEVELS.c", 1916; player_pos_y -= (i - 1);
 9108                        		__ld.um		__update_PLAYER_end - 2  /* i */
         01:CE93  AD 0B 23   			lda	__update_PLAYER_end - 2
         01:CE96  C2         			cly
 9109                        		__sub.wi	1
         01:CE97  38         			sec
         01:CE98  E9 01      			sbc.l	#1
         01:CE9A  B0 01      			bcs	!+
         01:CE9C  88         			dey
         01:CE9D             	!:
 9110                        		__isub_st.wmq	_player_pos_y
         01:CE9D  38         			sec
         01:CE9E  49 FF      			eor	#$FF
         01:CEA0  6D D6 24   			adc.l	_player_pos_y
         01:CEA3  8D D6 24   			sta.l	_player_pos_y
         01:CEA6  98         			tya
         01:CEA7  49 FF      			eor	#$FF
         01:CEA9  6D D7 24   			adc.h	_player_pos_y
         01:CEAC  8D D7 24   			sta.h	_player_pos_y
 9111                        	
 9112                        		.dbg	line,	"include\routines_LEVELS.c", 1917; }
 9113                        	
 9114                        		.dbg	line,	"include\routines_LEVELS.c", 1919; else
 9115                        		__bra		.LL357
         01:CEAF  80 20      			bra	.LL357
 9116    01:CEB1             	.LL356:
 9117                        	
 9118                        		.dbg	line,	"include\routines_LEVELS.c", 1920; {
 9119                        	
 9120                        		.dbg	line,	"include\routines_LEVELS.c", 1921; sgx_map_pxl_y -= (i - 1);
 9121                        		__ld.um		__update_PLAYER_end - 2  /* i */
         01:CEB1  AD 0B 23   			lda	__update_PLAYER_end - 2
         01:CEB4  C2         			cly
 9122                        		__sub.wi	1
         01:CEB5  38         			sec
         01:CEB6  E9 01      			sbc.l	#1
         01:CEB8  B0 01      			bcs	!+
         01:CEBA  88         			dey
         01:CEBB             	!:
 9123                        		__isub_st.wmq	_sgx_map_pxl_y
         01:CEBB  38         			sec
         01:CEBC  49 FF      			eor	#$FF
         01:CEBE  6D 92 26   			adc.l	_sgx_map_pxl_y
         01:CEC1  8D 92 26   			sta.l	_sgx_map_pxl_y
         01:CEC4  98         			tya
         01:CEC5  49 FF      			eor	#$FF
         01:CEC7  6D 93 26   			adc.h	_sgx_map_pxl_y
         01:CECA  8D 93 26   			sta.h	_sgx_map_pxl_y
 9124                        	
 9125                        		.dbg	line,	"include\routines_LEVELS.c", 1922; }
 9126    01:CECD             	.LL357	.alias		.LL354
 9127                        	
 9128                        		.dbg	line,	"include\routines_LEVELS.c", 1924; break;
 9129                        		__bra		.LL354
         01:CECD  80 02      			bra	.LL354
 9130                        	
 9131                        		.dbg	line,	"include\routines_LEVELS.c", 1925; }
 9132                        	
 9133                        		.dbg	line,	"include\routines_LEVELS.c", 1926; }
 9134    01:CECF             	.LL355	.alias		.LL352
 9135                        		__bra		.LL352
         01:CECF  80 83      			bra	.LL352
 9136    01:CED1             	.LL354:
 9137                        	
 9138                        		.dbg	line,	"include\routines_LEVELS.c", 1928; // SET PLAYER SPRITE NEW POSITION //
 9139                        	
 9140                        		.dbg	line,	"include\routines_LEVELS.c", 1929; spr_y(player_pos_y);
 9141                        		__ld.wm		_player_pos_y
         01:CED1  AD D6 24   			lda.l	_player_pos_y
         01:CED4  AC D7 24   			ldy.h	_player_pos_y
 9142                        		__call		_spr_y.1
         01:CED7  20 19 E8   			call	_spr_y.1
 9143                        	
 9144                        		.dbg	line,	"include\routines_LEVELS.c", 1931; player_counter_anim = 1;
 9145                        		__st.umiq	1, _player_counter_anim
         01:CEDA  A9 01      			lda.l	#1
         01:CEDC  8D 19 23   			sta	_player_counter_anim
 9146                        	
 9147                        		.dbg	line,	"include\routines_LEVELS.c", 1932; player_index_jump = 0;
 9148                        		__st.umiq	0, _player_index_jump
         01:CEDF  9C 1A 23   			stz	_player_index_jump
 9149                        	
 9150                        		.dbg	line,	"include\routines_LEVELS.c", 1933; jump_ladder = FALSE;
 9151                        		__st.umiq	0, _jump_ladder
         01:CEE2  9C 1F 23   			stz	_jump_ladder
 9152                        	
 9153                        		.dbg	line,	"include\routines_LEVELS.c", 1934; jump_max_index = 34;
 9154                        		__st.umiq	34, _jump_max_index
         01:CEE5  A9 22      			lda.l	#34
         01:CEE7  8D 20 23   			sta	_jump_max_index
 9155                        	
 9156                        		.dbg	line,	"include\routines_LEVELS.c", 1935; player_state = STATE_IDLE;
 9157                        		__st.umiq	0, _player_state
         01:CEEA  9C 16 23   			stz	_player_state
 9158                        	
 9159                        		.dbg	line,	"include\routines_LEVELS.c", 1936; return;
 9160                        		__bra		.LL230
         01:CEED  4C 0B DB   			bra	.LL230
 9161                        	
 9162                        		.dbg	line,	"include\routines_LEVELS.c", 1937; }
 9163                        	
 9164                        		.dbg	line,	"include\routines_LEVELS.c", 1939; // IF PLAYER TOUCHES THE GROUND TO THE RIGHT //
 9165                        	
 9166                        		.dbg	line,	"include\routines_LEVELS.c", 1940; else
 9167    01:CEF0             	.LL350:
 9168                        	
 9169                        		.dbg	line,	"include\routines_LEVELS.c", 1941; {
 9170                        	
 9171                        		.dbg	line,	"include\routines_LEVELS.c", 1942; // CHECK COLLISION WITH RIGHT FLOOR //
 9172                        	
 9173                        		.dbg	line,	"include\routines_LEVELS.c", 1943; check_BG( 22 , 32 );
 9174                        		__ld.wi		22
         01:CEF0  A9 16      			lda.l	#22
         01:CEF2  C2         			cly
 9175                        		__pusharg.wr
         01:CEF3  A6 8D      			ldx	<__sp
         01:CEF5  CA         			dex
         01:CEF6  CA         			dex
         01:CEF7  95 08      			sta.l	<__stack, x
         01:CEF9  94 09      			sty.h	<__stack, x
         01:CEFB  86 8D      			stx	<__sp
 9176                        		__ld.wi		32
         01:CEFD  A9 20      			lda.l	#32
         01:CEFF  C2         			cly
 9177                        		__pusharg.wr
         01:CF00  A6 8D      			ldx	<__sp
         01:CF02  CA         			dex
         01:CF03  CA         			dex
         01:CF04  95 08      			sta.l	<__stack, x
         01:CF06  94 09      			sty.h	<__stack, x
         01:CF08  86 8D      			stx	<__sp
 9178                        		__call		_check_BG
         01:CF0A  20 6D FF   			call	_check_BG
 9179                        	
 9180                        		.dbg	line,	"include\routines_LEVELS.c", 1945; if(map_blk_flag == TILE_BG)
 9181                        		__ld.umq	_map_blk_flag
         01:CF0D  AD B1 2B   			lda	_map_blk_flag
 9182                        		__equ_b.uiq	1
         01:CF10  C9 01      			cmp	#1
         01:CF12  F0 01      			beq	!+
         01:CF14  18         			clc
         01:CF15             	!:
 9183                        		__bfalse	.LL359
         01:CF15  B0 03 4C C8			bcc	.LL359
         01:CF19  CF          
 9184                        	
 9185                        		.dbg	line,	"include\routines_LEVELS.c", 1946; {
 9186                        	
 9187                        		.dbg	line,	"include\routines_LEVELS.c", 1947; // CALCULATE HOW MANY PIXELS THE PLAYER MOVED INTO THE GROUND //
 9188                        	
 9189                        		.dbg	line,	"include\routines_LEVELS.c", 1948; for(i=1; i<11 ; i++)
 9190                        		__st.umiq	1, __update_PLAYER_end - 2  /* i */
         01:CF1A  A9 01      			lda.l	#1
         01:CF1C  8D 0B 23   			sta	__update_PLAYER_end - 2
 9191    01:CF1F             	.LL360:
 9192                        		__ld.umq	__update_PLAYER_end - 2  /* i */
         01:CF1F  AD 0B 23   			lda	__update_PLAYER_end - 2
 9193                        		__ult_b.uiq	11
         01:CF22  C9 0B      			cmp	#11		; Subtract integer from A.
         01:CF24  6A         			ror	a		; CC if A < integer.
         01:CF25  49 80      			eor	#$80
         01:CF27  2A         			rol	a
 9194                        		__btrue		.LL362
         01:CF28  B0 07      			bcs	.LL362
 9195                        		__bra		.LL363
         01:CF2A  80 7D      			bra	.LL363
 9196    01:CF2C             	.LL361:
 9197                        		__inc.umq	__update_PLAYER_end - 2  /* i */
         01:CF2C  EE 0B 23   			inc	__update_PLAYER_end - 2
 9198                        		__bra		.LL360
         01:CF2F  80 EE      			bra	.LL360
 9199    01:CF31             	.LL362:
 9200                        	
 9201                        		.dbg	line,	"include\routines_LEVELS.c", 1949; {
 9202                        	
 9203                        		.dbg	line,	"include\routines_LEVELS.c", 1950; check_TILE_DEPTH( 22 , i);
 9204                        		__ld.wi		22
         01:CF31  A9 16      			lda.l	#22
         01:CF33  C2         			cly
 9205                        		__pusharg.wr
         01:CF34  A6 8D      			ldx	<__sp
         01:CF36  CA         			dex
         01:CF37  CA         			dex
         01:CF38  95 08      			sta.l	<__stack, x
         01:CF3A  94 09      			sty.h	<__stack, x
         01:CF3C  86 8D      			stx	<__sp
 9206                        		__ld.um		__update_PLAYER_end - 2  /* i */
         01:CF3E  AD 0B 23   			lda	__update_PLAYER_end - 2
         01:CF41  C2         			cly
 9207                        		__pusharg.wr
         01:CF42  A6 8D      			ldx	<__sp
         01:CF44  CA         			dex
         01:CF45  CA         			dex
         01:CF46  95 08      			sta.l	<__stack, x
         01:CF48  94 09      			sty.h	<__stack, x
         01:CF4A  86 8D      			stx	<__sp
 9208                        		__call		_check_TILE_DEPTH
         01:CF4C  20 59 FF   			call	_check_TILE_DEPTH
 9209                        	
 9210                        		.dbg	line,	"include\routines_LEVELS.c", 1952; if(map_blk_flag == TILE_EMPTY)
 9211                        		__not.um	_map_blk_flag
         01:CF4F  AD B1 2B   			lda	_map_blk_flag
         01:CF52  18         			clc
         01:CF53  D0 01      			bne	!+
         01:CF55  38         			sec
         01:CF56             	!:
 9212                        		__bfalse	.LL364
         01:CF56  90 D4      			bcc	.LL364
 9213                        	
 9214                        		.dbg	line,	"include\routines_LEVELS.c", 1953; {
 9215                        	
 9216                        		.dbg	line,	"include\routines_LEVELS.c", 1954; if(player_pos_y != PLAYER_BASE_Y_POS)
 9217                        		__ld.wm		_player_pos_y
         01:CF58  AD D6 24   			lda.l	_player_pos_y
         01:CF5B  AC D7 24   			ldy.h	_player_pos_y
 9218                        		__neq_w.wi	128
         01:CF5E  38         			sec
         01:CF5F  49 80      			eor.l	#128
         01:CF61  D0 06      			bne	!+
         01:CF63  98         			tya
         01:CF64  49 00      			eor.h	#128
         01:CF66  D0 01      			bne	!+
         01:CF68  18         			clc
         01:CF69             	!:
 9219                        		__bfalse	.LL365
         01:CF69  90 1E      			bcc	.LL365
 9220                        	
 9221                        		.dbg	line,	"include\routines_LEVELS.c", 1955; {
 9222                        	
 9223                        		.dbg	line,	"include\routines_LEVELS.c", 1956; player_pos_y -= (i - 1);
 9224                        		__ld.um		__update_PLAYER_end - 2  /* i */
         01:CF6B  AD 0B 23   			lda	__update_PLAYER_end - 2
         01:CF6E  C2         			cly
 9225                        		__sub.wi	1
         01:CF6F  38         			sec
         01:CF70  E9 01      			sbc.l	#1
         01:CF72  B0 01      			bcs	!+
         01:CF74  88         			dey
         01:CF75             	!:
 9226                        		__isub_st.wmq	_player_pos_y
         01:CF75  38         			sec
         01:CF76  49 FF      			eor	#$FF
         01:CF78  6D D6 24   			adc.l	_player_pos_y
         01:CF7B  8D D6 24   			sta.l	_player_pos_y
         01:CF7E  98         			tya
         01:CF7F  49 FF      			eor	#$FF
         01:CF81  6D D7 24   			adc.h	_player_pos_y
         01:CF84  8D D7 24   			sta.h	_player_pos_y
 9227                        	
 9228                        		.dbg	line,	"include\routines_LEVELS.c", 1957; }
 9229                        	
 9230                        		.dbg	line,	"include\routines_LEVELS.c", 1959; else
 9231                        		__bra		.LL366
         01:CF87  80 20      			bra	.LL366
 9232    01:CF89             	.LL365:
 9233                        	
 9234                        		.dbg	line,	"include\routines_LEVELS.c", 1960; {
 9235                        	
 9236                        		.dbg	line,	"include\routines_LEVELS.c", 1961; sgx_map_pxl_y -= (i - 1);
 9237                        		__ld.um		__update_PLAYER_end - 2  /* i */
         01:CF89  AD 0B 23   			lda	__update_PLAYER_end - 2
         01:CF8C  C2         			cly
 9238                        		__sub.wi	1
         01:CF8D  38         			sec
         01:CF8E  E9 01      			sbc.l	#1
         01:CF90  B0 01      			bcs	!+
         01:CF92  88         			dey
         01:CF93             	!:
 9239                        		__isub_st.wmq	_sgx_map_pxl_y
         01:CF93  38         			sec
         01:CF94  49 FF      			eor	#$FF
         01:CF96  6D 92 26   			adc.l	_sgx_map_pxl_y
         01:CF99  8D 92 26   			sta.l	_sgx_map_pxl_y
         01:CF9C  98         			tya
         01:CF9D  49 FF      			eor	#$FF
         01:CF9F  6D 93 26   			adc.h	_sgx_map_pxl_y
         01:CFA2  8D 93 26   			sta.h	_sgx_map_pxl_y
 9240                        	
 9241                        		.dbg	line,	"include\routines_LEVELS.c", 1962; }
 9242    01:CFA5             	.LL366	.alias		.LL363
 9243                        	
 9244                        		.dbg	line,	"include\routines_LEVELS.c", 1964; break;
 9245                        		__bra		.LL363
         01:CFA5  80 02      			bra	.LL363
 9246                        	
 9247                        		.dbg	line,	"include\routines_LEVELS.c", 1965; }
 9248                        	
 9249                        		.dbg	line,	"include\routines_LEVELS.c", 1966; }
 9250    01:CFA7             	.LL364	.alias		.LL361
 9251                        		__bra		.LL361
         01:CFA7  80 83      			bra	.LL361
 9252    01:CFA9             	.LL363:
 9253                        	
 9254                        		.dbg	line,	"include\routines_LEVELS.c", 1968; // SET PLAYER SPRITE NEW POSITION //
 9255                        	
 9256                        		.dbg	line,	"include\routines_LEVELS.c", 1969; spr_y(player_pos_y);
 9257                        		__ld.wm		_player_pos_y
         01:CFA9  AD D6 24   			lda.l	_player_pos_y
         01:CFAC  AC D7 24   			ldy.h	_player_pos_y
 9258                        		__call		_spr_y.1
         01:CFAF  20 19 E8   			call	_spr_y.1
 9259                        	
 9260                        		.dbg	line,	"include\routines_LEVELS.c", 1971; player_counter_anim = 1;
 9261                        		__st.umiq	1, _player_counter_anim
         01:CFB2  A9 01      			lda.l	#1
         01:CFB4  8D 19 23   			sta	_player_counter_anim
 9262                        	
 9263                        		.dbg	line,	"include\routines_LEVELS.c", 1972; player_index_jump = 0;
 9264                        		__st.umiq	0, _player_index_jump
         01:CFB7  9C 1A 23   			stz	_player_index_jump
 9265                        	
 9266                        		.dbg	line,	"include\routines_LEVELS.c", 1973; jump_ladder = FALSE;
 9267                        		__st.umiq	0, _jump_ladder
         01:CFBA  9C 1F 23   			stz	_jump_ladder
 9268                        	
 9269                        		.dbg	line,	"include\routines_LEVELS.c", 1974; jump_max_index = 34;
 9270                        		__st.umiq	34, _jump_max_index
         01:CFBD  A9 22      			lda.l	#34
         01:CFBF  8D 20 23   			sta	_jump_max_index
 9271                        	
 9272                        		.dbg	line,	"include\routines_LEVELS.c", 1975; player_state = STATE_IDLE;
 9273                        		__st.umiq	0, _player_state
         01:CFC2  9C 16 23   			stz	_player_state
 9274                        	
 9275                        		.dbg	line,	"include\routines_LEVELS.c", 1976; return;
 9276                        		__bra		.LL230
         01:CFC5  4C 0B DB   			bra	.LL230
 9277                        	
 9278                        		.dbg	line,	"include\routines_LEVELS.c", 1977; }
 9279                        	
 9280                        		.dbg	line,	"include\routines_LEVELS.c", 1978; }
 9281    01:CFC8             	.LL359:
 9282    01:CFC8             	.LL358:
 9283                        	
 9284                        		.dbg	line,	"include\routines_LEVELS.c", 1979; }
 9285                        	
 9286                        		.dbg	line,	"include\routines_LEVELS.c", 1984; //--------------------------------------------------------------------------------------//
 9287                        	
 9288                        		.dbg	line,	"include\routines_LEVELS.c", 1985; //                                   LADDER COLLISION                                   //
 9289                        	
 9290                        		.dbg	line,	"include\routines_LEVELS.c", 1986; //--------------------------------------------------------------------------------------//
 9291                        	
 9292                        		.dbg	line,	"include\routines_LEVELS.c", 1988; if(player_index_jump > 4)
 9293    01:CFC8             	.LL349:
 9294                        		__ld.umq	_player_index_jump
         01:CFC8  AD 1A 23   			lda	_player_index_jump
 9295                        		__ugt_b.uiq	4
         01:CFCB  18         			clc			; Subtract integer+1 from A.
         01:CFCC  E9 04      			sbc	#4		; CS if A > integer.
 9296                        		__bfalse	.LL367
         01:CFCE  B0 03 4C 63			bcc	.LL367
         01:CFD2  D0          
 9297                        	
 9298                        		.dbg	line,	"include\routines_LEVELS.c", 1989; {
 9299                        	
 9300                        		.dbg	line,	"include\routines_LEVELS.c", 1990; check_BG( 16 , 16 );
 9301                        		__ld.wi		16
         01:CFD3  A9 10      			lda.l	#16
         01:CFD5  C2         			cly
 9302                        		__pusharg.wr
         01:CFD6  A6 8D      			ldx	<__sp
         01:CFD8  CA         			dex
         01:CFD9  CA         			dex
         01:CFDA  95 08      			sta.l	<__stack, x
         01:CFDC  94 09      			sty.h	<__stack, x
         01:CFDE  86 8D      			stx	<__sp
 9303                        		__ld.wi		16
         01:CFE0  A9 10      			lda.l	#16
         01:CFE2  C2         			cly
 9304                        		__pusharg.wr
         01:CFE3  A6 8D      			ldx	<__sp
         01:CFE5  CA         			dex
         01:CFE6  CA         			dex
         01:CFE7  95 08      			sta.l	<__stack, x
         01:CFE9  94 09      			sty.h	<__stack, x
         01:CFEB  86 8D      			stx	<__sp
 9305                        		__call		_check_BG
         01:CFED  20 6D FF   			call	_check_BG
 9306                        	
 9307                        		.dbg	line,	"include\routines_LEVELS.c", 1992; // IF PLAYER HITS THE LADDER //
 9308                        	
 9309                        		.dbg	line,	"include\routines_LEVELS.c", 1993; if(map_blk_flag == TILE_LADDER)
 9310                        		__ld.umq	_map_blk_flag
         01:CFF0  AD B1 2B   			lda	_map_blk_flag
 9311                        		__equ_b.uiq	2
         01:CFF3  C9 02      			cmp	#2
         01:CFF5  F0 01      			beq	!+
         01:CFF7  18         			clc
         01:CFF8             	!:
 9312                        		__bfalse	.LL368
         01:CFF8  90 69      			bcc	.LL368
 9313                        	
 9314                        		.dbg	line,	"include\routines_LEVELS.c", 1994; {
 9315                        	
 9316                        		.dbg	line,	"include\routines_LEVELS.c", 1995; // CAMERA GOES 8 PX BACKWARD //
 9317                        	
 9318                        		.dbg	line,	"include\routines_LEVELS.c", 1996; sgx_map_pxl_x = ( (sgx_map_pxl_x >> 3) << 3 );
 9319                        		__ld.wm		_sgx_map_pxl_x
         01:CFFA  AD 90 26   			lda.l	_sgx_map_pxl_x
         01:CFFD  AC 91 26   			ldy.h	_sgx_map_pxl_x
 9320                        		__lsr.wi	3
         01:D000  84 00      			sty	__temp
         01:D002  20 3A E2   			jsr	lsrw3
 9321                        		__asl.wi	3
         01:D005  84 00      			sty	__temp
         01:D007  20 D7 E1   			jsr	aslw3
 9322                        		__st.wmq	_sgx_map_pxl_x
         01:D00A  8D 90 26   			sta.l	_sgx_map_pxl_x
         01:D00D  8C 91 26   			sty.h	_sgx_map_pxl_x
 9323                        	
 9324                        		.dbg	line,	"include\routines_LEVELS.c", 1998; // SO WE UPDATE THE MAP //
 9325                        	
 9326                        		.dbg	line,	"include\routines_LEVELS.c", 1999; sgx_scroll_map();
 9327                        		__call		_sgx_scroll_map
         01:D010  20 81 FF   			call	_sgx_scroll_map
 9328                        	
 9329                        		.dbg	line,	"include\routines_LEVELS.c", 2001; // CHECK IF THE PLAYER STANDS RIGHT TO THE LADDER //
 9330                        	
 9331                        		.dbg	line,	"include\routines_LEVELS.c", 2002; check_BG( 31 , 16 );
 9332                        		__ld.wi		31
         01:D013  A9 1F      			lda.l	#31
         01:D015  C2         			cly
 9333                        		__pusharg.wr
         01:D016  A6 8D      			ldx	<__sp
         01:D018  CA         			dex
         01:D019  CA         			dex
         01:D01A  95 08      			sta.l	<__stack, x
         01:D01C  94 09      			sty.h	<__stack, x
         01:D01E  86 8D      			stx	<__sp
 9334                        		__ld.wi		16
         01:D020  A9 10      			lda.l	#16
         01:D022  C2         			cly
 9335                        		__pusharg.wr
         01:D023  A6 8D      			ldx	<__sp
         01:D025  CA         			dex
         01:D026  CA         			dex
         01:D027  95 08      			sta.l	<__stack, x
         01:D029  94 09      			sty.h	<__stack, x
         01:D02B  86 8D      			stx	<__sp
 9336                        		__call		_check_BG
         01:D02D  20 6D FF   			call	_check_BG
 9337                        	
 9338                        		.dbg	line,	"include\routines_LEVELS.c", 2004; if(map_blk_flag == TILE_LADDER)
 9339                        		__ld.umq	_map_blk_flag
         01:D030  AD B1 2B   			lda	_map_blk_flag
 9340                        		__equ_b.uiq	2
         01:D033  C9 02      			cmp	#2
         01:D035  F0 01      			beq	!+
         01:D037  18         			clc
         01:D038             	!:
 9341                        		__bfalse	.LL369
         01:D038  90 0E      			bcc	.LL369
 9342                        	
 9343                        		.dbg	line,	"include\routines_LEVELS.c", 2005; {
 9344                        	
 9345                        		.dbg	line,	"include\routines_LEVELS.c", 2006; sgx_map_pxl_x += 8;
 9346                        		__add_st.wmiq	8, _sgx_map_pxl_x
         01:D03A  18         			clc
         01:D03B  AD 90 26   			lda.l	_sgx_map_pxl_x
         01:D03E  69 08      			adc.l	#8
         01:D040  8D 90 26   			sta.l	_sgx_map_pxl_x
         01:D043  90 03      			bcc	!+
         01:D045  EE 91 26   			inc.h	_sgx_map_pxl_x
         01:D048             	!:
 9347                        	
 9348                        		.dbg	line,	"include\routines_LEVELS.c", 2007; }
 9349                        	
 9350                        		.dbg	line,	"include\routines_LEVELS.c", 2009; spr_pattern(PLAYER_HANG_VRAM_ADR);
 9351    01:D048             	.LL369:
 9352                        		__ld.wi		7424
         01:D048  62         			cla
         01:D049  A0 1D      			ldy.h	#7424
 9353                        		__call		_spr_pattern.1
         01:D04B  20 26 E8   			call	_spr_pattern.1
 9354                        	
 9355                        		.dbg	line,	"include\routines_LEVELS.c", 2010; player_counter_anim = 0;
 9356                        		__st.umiq	0, _player_counter_anim
         01:D04E  9C 19 23   			stz	_player_counter_anim
 9357                        	
 9358                        		.dbg	line,	"include\routines_LEVELS.c", 2011; player_index_jump = 0;
 9359                        		__st.umiq	0, _player_index_jump
         01:D051  9C 1A 23   			stz	_player_index_jump
 9360                        	
 9361                        		.dbg	line,	"include\routines_LEVELS.c", 2012; jump_ladder = TRUE;
 9362                        		__st.umiq	1, _jump_ladder
         01:D054  A9 01      			lda.l	#1
         01:D056  8D 1F 23   			sta	_jump_ladder
 9363                        	
 9364                        		.dbg	line,	"include\routines_LEVELS.c", 2013; jump_max_index = 29;
 9365                        		__st.umiq	29, _jump_max_index
         01:D059  A9 1D      			lda.l	#29
         01:D05B  8D 20 23   			sta	_jump_max_index
 9366                        	
 9367                        		.dbg	line,	"include\routines_LEVELS.c", 2014; player_state = STATE_HANG;
 9368                        		__st.umiq	10, _player_state
         01:D05E  A9 0A      			lda.l	#10
         01:D060  8D 16 23   			sta	_player_state
 9369                        	
 9370                        		.dbg	line,	"include\routines_LEVELS.c", 2015; }
 9371                        	
 9372                        		.dbg	line,	"include\routines_LEVELS.c", 2016; }
 9373    01:D063             	.LL368:
 9374                        	
 9375                        		.dbg	line,	"include\routines_LEVELS.c", 2019; // SET PLAYER SPRITE NEW POSITION //
 9376                        	
 9377                        		.dbg	line,	"include\routines_LEVELS.c", 2020; spr_y(player_pos_y);
 9378    01:D063             	.LL367:
 9379                        		__ld.wm		_player_pos_y
         01:D063  AD D6 24   			lda.l	_player_pos_y
         01:D066  AC D7 24   			ldy.h	_player_pos_y
 9380                        		__call		_spr_y.1
         01:D069  20 19 E8   			call	_spr_y.1
 9381                        	
 9382                        		.dbg	line,	"include\routines_LEVELS.c", 2021; spr_set(weapon_id);
 9383                        		__ld.umq	_weapon_id
         01:D06C  AD 23 23   			lda	_weapon_id
 9384                        		__call		_spr_set.1
         01:D06F  20 DD E7   			call	_spr_set.1
 9385                        	
 9386                        		.dbg	line,	"include\routines_LEVELS.c", 2022; spr_y(player_pos_y+8);
 9387                        		__ld.wm		_player_pos_y
         01:D072  AD D6 24   			lda.l	_player_pos_y
         01:D075  AC D7 24   			ldy.h	_player_pos_y
 9388                        		__add.wi	8
         01:D078  18         			clc
         01:D079  69 08      			adc.l	#8
         01:D07B  90 01      			bcc	!+
         01:D07D  C8         			iny
         01:D07E             	!:
 9389                        		__call		_spr_y.1
         01:D07E  20 19 E8   			call	_spr_y.1
 9390                        	
 9391                        		.dbg	line,	"include\routines_LEVELS.c", 2023; }
 9392                        	
 9393                        		.dbg	line,	"include\routines_LEVELS.c", 2026; else if(player_state == STATE_JUMP_LEFT)
 9394                        		__bra		.LL370
         01:D081  4C 0B DB   			bra	.LL370
 9395    01:D084             	.LL334:
 9396                        		__ld.umq	_player_state
         01:D084  AD 16 23   			lda	_player_state
 9397                        		__equ_b.uiq	6
         01:D087  C9 06      			cmp	#6
         01:D089  F0 01      			beq	!+
         01:D08B  18         			clc
         01:D08C             	!:
 9398                        		__bfalse	.LL371
         01:D08C  B0 03 4C B8			bcc	.LL371
         01:D090  D4          
 9399                        	
 9400                        		.dbg	line,	"include\routines_LEVELS.c", 2027; {
 9401                        	
 9402                        		.dbg	line,	"include\routines_LEVELS.c", 2028; unsigned char i, camera_y_move;
 9403                        	
 9404                        		.dbg	line,	"include\routines_LEVELS.c", 2029; i = 1;
 9405                        		__st.umiq	1, __update_PLAYER_end - 4  /* i */
         01:D091  A9 01      			lda.l	#1
         01:D093  8D 09 23   			sta	__update_PLAYER_end - 4
 9406                        	
 9407                        		.dbg	line,	"include\routines_LEVELS.c", 2032; // UPDATE PLAYER TILES //
 9408                        	
 9409                        		.dbg	line,	"include\routines_LEVELS.c", 2033; if(player_counter_anim == 0)
 9410                        		__not.um	_player_counter_anim
         01:D096  AD 19 23   			lda	_player_counter_anim
         01:D099  18         			clc
         01:D09A  D0 01      			bne	!+
         01:D09C  38         			sec
         01:D09D             	!:
 9411                        		__bfalse	.LL372
         01:D09D  90 11      			bcc	.LL372
 9412                        	
 9413                        		.dbg	line,	"include\routines_LEVELS.c", 2034; {
 9414                        	
 9415                        		.dbg	line,	"include\routines_LEVELS.c", 2035; spr_set(player_id);
 9416                        		__ld.umq	_player_id
         01:D09F  AD 15 23   			lda	_player_id
 9417                        		__call		_spr_set.1
         01:D0A2  20 DD E7   			call	_spr_set.1
 9418                        	
 9419                        		.dbg	line,	"include\routines_LEVELS.c", 2036; spr_pattern(PLAYER_JUMP_VRAM_ADR);
 9420                        		__ld.wi		6912
         01:D0A5  62         			cla
         01:D0A6  A0 1B      			ldy.h	#6912
 9421                        		__call		_spr_pattern.1
         01:D0A8  20 26 E8   			call	_spr_pattern.1
 9422                        	
 9423                        		.dbg	line,	"include\routines_LEVELS.c", 2038; player_counter_anim = 1;
 9424                        		__st.umiq	1, _player_counter_anim
         01:D0AB  A9 01      			lda.l	#1
         01:D0AD  8D 19 23   			sta	_player_counter_anim
 9425                        	
 9426                        		.dbg	line,	"include\routines_LEVELS.c", 2039; }
 9427                        	
 9428                        		.dbg	line,	"include\routines_LEVELS.c", 2042; // SELECT PLAYER SPRITE //
 9429                        	
 9430                        		.dbg	line,	"include\routines_LEVELS.c", 2043; spr_set(player_id);
 9431    01:D0B0             	.LL372:
 9432                        		__ld.umq	_player_id
         01:D0B0  AD 15 23   			lda	_player_id
 9433                        		__call		_spr_set.1
         01:D0B3  20 DD E7   			call	_spr_set.1
 9434                        	
 9435                        		.dbg	line,	"include\routines_LEVELS.c", 2046; //**************************************************************************************//
 9436                        	
 9437                        		.dbg	line,	"include\routines_LEVELS.c", 2047; //                                        H MOVE                                        //
 9438                        	
 9439                        		.dbg	line,	"include\routines_LEVELS.c", 2048; //**************************************************************************************//
 9440                        	
 9441                        		.dbg	line,	"include\routines_LEVELS.c", 2050; //--------------------------------------------------------------------------------------//
 9442                        	
 9443                        		.dbg	line,	"include\routines_LEVELS.c", 2051; //                                    WALL COLLISION                                    //
 9444                        	
 9445                        		.dbg	line,	"include\routines_LEVELS.c", 2052; //--------------------------------------------------------------------------------------//
 9446                        	
 9447                        		.dbg	line,	"include\routines_LEVELS.c", 2054; // CHECK COLLISION WITH BOTTOM LEFT WALL //
 9448                        	
 9449                        		.dbg	line,	"include\routines_LEVELS.c", 2055; check_BG( 8 , 31 );
 9450                        		__ld.wi		8
         01:D0B6  A9 08      			lda.l	#8
         01:D0B8  C2         			cly
 9451                        		__pusharg.wr
         01:D0B9  A6 8D      			ldx	<__sp
         01:D0BB  CA         			dex
         01:D0BC  CA         			dex
         01:D0BD  95 08      			sta.l	<__stack, x
         01:D0BF  94 09      			sty.h	<__stack, x
         01:D0C1  86 8D      			stx	<__sp
 9452                        		__ld.wi		31
         01:D0C3  A9 1F      			lda.l	#31
         01:D0C5  C2         			cly
 9453                        		__pusharg.wr
         01:D0C6  A6 8D      			ldx	<__sp
         01:D0C8  CA         			dex
         01:D0C9  CA         			dex
         01:D0CA  95 08      			sta.l	<__stack, x
         01:D0CC  94 09      			sty.h	<__stack, x
         01:D0CE  86 8D      			stx	<__sp
 9454                        		__call		_check_BG
         01:D0D0  20 6D FF   			call	_check_BG
 9455                        	
 9456                        		.dbg	line,	"include\routines_LEVELS.c", 2057; if(map_blk_flag != TILE_BG)
 9457                        		__ld.umq	_map_blk_flag
         01:D0D3  AD B1 2B   			lda	_map_blk_flag
 9458                        		__neq_b.uiq	1
         01:D0D6  38         			sec
         01:D0D7  49 01      			eor	#1
         01:D0D9  D0 01      			bne	!+
         01:D0DB  18         			clc
         01:D0DC             	!:
 9459                        		__bfalse	.LL373
         01:D0DC  90 78      			bcc	.LL373
 9460                        	
 9461                        		.dbg	line,	"include\routines_LEVELS.c", 2058; {
 9462                        	
 9463                        		.dbg	line,	"include\routines_LEVELS.c", 2059; // CHECK COLLISION WITH TOP RIGHT WALL //
 9464                        	
 9465                        		.dbg	line,	"include\routines_LEVELS.c", 2060; check_BG( 8 , 15 );
 9466                        		__ld.wi		8
         01:D0DE  A9 08      			lda.l	#8
         01:D0E0  C2         			cly
 9467                        		__pusharg.wr
         01:D0E1  A6 8D      			ldx	<__sp
         01:D0E3  CA         			dex
         01:D0E4  CA         			dex
         01:D0E5  95 08      			sta.l	<__stack, x
         01:D0E7  94 09      			sty.h	<__stack, x
         01:D0E9  86 8D      			stx	<__sp
 9468                        		__ld.wi		15
         01:D0EB  A9 0F      			lda.l	#15
         01:D0ED  C2         			cly
 9469                        		__pusharg.wr
         01:D0EE  A6 8D      			ldx	<__sp
         01:D0F0  CA         			dex
         01:D0F1  CA         			dex
         01:D0F2  95 08      			sta.l	<__stack, x
         01:D0F4  94 09      			sty.h	<__stack, x
         01:D0F6  86 8D      			stx	<__sp
 9470                        		__call		_check_BG
         01:D0F8  20 6D FF   			call	_check_BG
 9471                        	
 9472                        		.dbg	line,	"include\routines_LEVELS.c", 2062; if(map_blk_flag == TILE_BG)
 9473                        		__ld.umq	_map_blk_flag
         01:D0FB  AD B1 2B   			lda	_map_blk_flag
 9474                        		__equ_b.uiq	1
         01:D0FE  C9 01      			cmp	#1
         01:D100  F0 01      			beq	!+
         01:D102  18         			clc
         01:D103             	!:
 9475                        		__bfalse	.LL374
         01:D103  90 41      			bcc	.LL374
 9476                        	
 9477                        		.dbg	line,	"include\routines_LEVELS.c", 2063; {
 9478                        	
 9479                        		.dbg	line,	"include\routines_LEVELS.c", 2064; check_TILE_DEPTH( 15 , -16 );
 9480                        		__ld.wi		15
         01:D105  A9 0F      			lda.l	#15
         01:D107  C2         			cly
 9481                        		__pusharg.wr
         01:D108  A6 8D      			ldx	<__sp
         01:D10A  CA         			dex
         01:D10B  CA         			dex
         01:D10C  95 08      			sta.l	<__stack, x
         01:D10E  94 09      			sty.h	<__stack, x
         01:D110  86 8D      			stx	<__sp
 9482                        		__ld.wi		-16
         01:D112  A9 F0      			lda.l	#-16
         01:D114  A0 FF      			ldy.h	#-16
 9483                        		__pusharg.wr
         01:D116  A6 8D      			ldx	<__sp
         01:D118  CA         			dex
         01:D119  CA         			dex
         01:D11A  95 08      			sta.l	<__stack, x
         01:D11C  94 09      			sty.h	<__stack, x
         01:D11E  86 8D      			stx	<__sp
 9484                        		__call		_check_TILE_DEPTH
         01:D120  20 59 FF   			call	_check_TILE_DEPTH
 9485                        	
 9486                        		.dbg	line,	"include\routines_LEVELS.c", 2066; if(map_blk_flag == TILE_EMPTY && jump_ladder == TRUE)
 9487                        		__not.um	_map_blk_flag
         01:D123  AD B1 2B   			lda	_map_blk_flag
         01:D126  18         			clc
         01:D127  D0 01      			bne	!+
         01:D129  38         			sec
         01:D12A             	!:
 9488                        		__bfalse	.LL376
         01:D12A  90 08      			bcc	.LL376
 9489                        		__ld.umq	_jump_ladder
         01:D12C  AD 1F 23   			lda	_jump_ladder
 9490                        		__equ_b.uiq	1
         01:D12F  C9 01      			cmp	#1
         01:D131  F0 01      			beq	!+
         01:D133  18         			clc
         01:D134             	!:
 9491    01:D134             	.LL376:
 9492                        		__bfalse	.LL375
         01:D134  90 5F      			bcc	.LL375
 9493                        	
 9494                        		.dbg	line,	"include\routines_LEVELS.c", 2067; {
 9495                        	
 9496                        		.dbg	line,	"include\routines_LEVELS.c", 2068; jump_ladder = FALSE;
 9497                        		__st.umiq	0, _jump_ladder
         01:D136  9C 1F 23   			stz	_jump_ladder
 9498                        	
 9499                        		.dbg	line,	"include\routines_LEVELS.c", 2069; player_index_fall = 0;
 9500                        		__st.umiq	0, _player_index_fall
         01:D139  9C 1B 23   			stz	_player_index_fall
 9501                        	
 9502                        		.dbg	line,	"include\routines_LEVELS.c", 2070; player_state = STATE_FALL;
 9503                        		__st.umiq	9, _player_state
         01:D13C  A9 09      			lda.l	#9
         01:D13E  8D 16 23   			sta	_player_state
 9504                        	
 9505                        		.dbg	line,	"include\routines_LEVELS.c", 2071; return;
 9506                        		__bra		.LL230
         01:D141  4C 0B DB   			bra	.LL230
 9507                        	
 9508                        		.dbg	line,	"include\routines_LEVELS.c", 2072; }
 9509                        	
 9510                        		.dbg	line,	"include\routines_LEVELS.c", 2073; }
 9511    01:D144             	.LL375	.alias		.LL377
 9512                        	
 9513                        		.dbg	line,	"include\routines_LEVELS.c", 2075; else
 9514                        		__bra		.LL377
         01:D144  80 4F      			bra	.LL377
 9515    01:D146             	.LL374:
 9516                        	
 9517                        		.dbg	line,	"include\routines_LEVELS.c", 2076; {
 9518                        	
 9519                        		.dbg	line,	"include\routines_LEVELS.c", 2077; sgx_map_pxl_x -= 2;
 9520                        		__sub_st.wmiq	2, _sgx_map_pxl_x
         01:D146  38         			sec
         01:D147  AD 90 26   			lda.l	_sgx_map_pxl_x
         01:D14A  E9 02      			sbc.l	#2
         01:D14C  8D 90 26   			sta.l	_sgx_map_pxl_x
         01:D14F  B0 03      			bcs	!+
         01:D151  CE 91 26   			dec.h	_sgx_map_pxl_x
         01:D154             	!:
 9521                        	
 9522                        		.dbg	line,	"include\routines_LEVELS.c", 2078; }
 9523    01:D154             	.LL377	.alias		.LL378
 9524                        	
 9525                        		.dbg	line,	"include\routines_LEVELS.c", 2079; }
 9526                        	
 9527                        		.dbg	line,	"include\routines_LEVELS.c", 2081; else
 9528                        		__bra		.LL378
         01:D154  80 3F      			bra	.LL378
 9529    01:D156             	.LL373:
 9530                        	
 9531                        		.dbg	line,	"include\routines_LEVELS.c", 2082; {
 9532                        	
 9533                        		.dbg	line,	"include\routines_LEVELS.c", 2083; check_TILE_DEPTH( 15 , -16 );
 9534                        		__ld.wi		15
         01:D156  A9 0F      			lda.l	#15
         01:D158  C2         			cly
 9535                        		__pusharg.wr
         01:D159  A6 8D      			ldx	<__sp
         01:D15B  CA         			dex
         01:D15C  CA         			dex
         01:D15D  95 08      			sta.l	<__stack, x
         01:D15F  94 09      			sty.h	<__stack, x
         01:D161  86 8D      			stx	<__sp
 9536                        		__ld.wi		-16
         01:D163  A9 F0      			lda.l	#-16
         01:D165  A0 FF      			ldy.h	#-16
 9537                        		__pusharg.wr
         01:D167  A6 8D      			ldx	<__sp
         01:D169  CA         			dex
         01:D16A  CA         			dex
         01:D16B  95 08      			sta.l	<__stack, x
         01:D16D  94 09      			sty.h	<__stack, x
         01:D16F  86 8D      			stx	<__sp
 9538                        		__call		_check_TILE_DEPTH
         01:D171  20 59 FF   			call	_check_TILE_DEPTH
 9539                        	
 9540                        		.dbg	line,	"include\routines_LEVELS.c", 2085; if(map_blk_flag == TILE_EMPTY && jump_ladder == TRUE)
 9541                        		__not.um	_map_blk_flag
         01:D174  AD B1 2B   			lda	_map_blk_flag
         01:D177  18         			clc
         01:D178  D0 01      			bne	!+
         01:D17A  38         			sec
         01:D17B             	!:
 9542                        		__bfalse	.LL380
         01:D17B  90 08      			bcc	.LL380
 9543                        		__ld.umq	_jump_ladder
         01:D17D  AD 1F 23   			lda	_jump_ladder
 9544                        		__equ_b.uiq	1
         01:D180  C9 01      			cmp	#1
         01:D182  F0 01      			beq	!+
         01:D184  18         			clc
         01:D185             	!:
 9545    01:D185             	.LL380:
 9546                        		__bfalse	.LL379
         01:D185  90 0E      			bcc	.LL379
 9547                        	
 9548                        		.dbg	line,	"include\routines_LEVELS.c", 2086; {
 9549                        	
 9550                        		.dbg	line,	"include\routines_LEVELS.c", 2087; jump_ladder = FALSE;
 9551                        		__st.umiq	0, _jump_ladder
         01:D187  9C 1F 23   			stz	_jump_ladder
 9552                        	
 9553                        		.dbg	line,	"include\routines_LEVELS.c", 2088; player_index_fall = 0;
 9554                        		__st.umiq	0, _player_index_fall
         01:D18A  9C 1B 23   			stz	_player_index_fall
 9555                        	
 9556                        		.dbg	line,	"include\routines_LEVELS.c", 2089; player_state = STATE_FALL;
 9557                        		__st.umiq	9, _player_state
         01:D18D  A9 09      			lda.l	#9
         01:D18F  8D 16 23   			sta	_player_state
 9558                        	
 9559                        		.dbg	line,	"include\routines_LEVELS.c", 2090; return;
 9560                        		__bra		.LL230
         01:D192  4C 0B DB   			bra	.LL230
 9561                        	
 9562                        		.dbg	line,	"include\routines_LEVELS.c", 2091; }
 9563                        	
 9564                        		.dbg	line,	"include\routines_LEVELS.c", 2092; }
 9565    01:D195             	.LL379:
 9566    01:D195             	.LL378:
 9567                        	
 9568                        		.dbg	line,	"include\routines_LEVELS.c", 2097; //**************************************************************************************//
 9569                        	
 9570                        		.dbg	line,	"include\routines_LEVELS.c", 2098; //                                        V MOVE                                        //
 9571                        	
 9572                        		.dbg	line,	"include\routines_LEVELS.c", 2099; //**************************************************************************************//
 9573                        	
 9574                        		.dbg	line,	"include\routines_LEVELS.c", 2101; // UPDATE PLAYER Y POSITION //
 9575                        	
 9576                        		.dbg	line,	"include\routines_LEVELS.c", 2102; if(jump_ladder == FALSE)
 9577                        		__not.um	_jump_ladder
         01:D195  AD 1F 23   			lda	_jump_ladder
         01:D198  18         			clc
         01:D199  D0 01      			bne	!+
         01:D19B  38         			sec
         01:D19C             	!:
 9578                        		__bfalse	.LL381
         01:D19C  90 1A      			bcc	.LL381
 9579                        	
 9580                        		.dbg	line,	"include\routines_LEVELS.c", 2103; {
 9581                        	
 9582                        		.dbg	line,	"include\routines_LEVELS.c", 2104; player_pos_y += TABLE_PLAYER_JUMP_V[player_index_jump];
 9583                        		__ldx.umq	_player_index_jump
         01:D19E  AE 1A 23   			ldx	_player_index_jump
 9584                        		__ld.bax	_TABLE_PLAYER_JUMP_V
         01:D1A1  BD 1D 61   			lda	_TABLE_PLAYER_JUMP_V, x
         01:D1A4  C2         			cly
         01:D1A5  10 01      			bpl	!+
         01:D1A7  88         			dey
         01:D1A8             	!:
 9585                        		__add_st.wmq	_player_pos_y
         01:D1A8  18         			clc
         01:D1A9  6D D6 24   			adc.l	_player_pos_y
         01:D1AC  8D D6 24   			sta.l	_player_pos_y
         01:D1AF  98         			tya
         01:D1B0  6D D7 24   			adc.h	_player_pos_y
         01:D1B3  8D D7 24   			sta.h	_player_pos_y
 9586                        	
 9587                        		.dbg	line,	"include\routines_LEVELS.c", 2105; }
 9588                        	
 9589                        		.dbg	line,	"include\routines_LEVELS.c", 2107; else
 9590                        		__bra		.LL382
         01:D1B6  80 18      			bra	.LL382
 9591    01:D1B8             	.LL381:
 9592                        	
 9593                        		.dbg	line,	"include\routines_LEVELS.c", 2108; {
 9594                        	
 9595                        		.dbg	line,	"include\routines_LEVELS.c", 2109; player_pos_y += TABLE_PLAYER_JUMP_LADDER[player_index_jump];
 9596                        		__ldx.umq	_player_index_jump
         01:D1B8  AE 1A 23   			ldx	_player_index_jump
 9597                        		__ld.bax	_TABLE_PLAYER_JUMP_LADDER
         01:D1BB  BD 55 61   			lda	_TABLE_PLAYER_JUMP_LADDER, x
         01:D1BE  C2         			cly
         01:D1BF  10 01      			bpl	!+
         01:D1C1  88         			dey
         01:D1C2             	!:
 9598                        		__add_st.wmq	_player_pos_y
         01:D1C2  18         			clc
         01:D1C3  6D D6 24   			adc.l	_player_pos_y
         01:D1C6  8D D6 24   			sta.l	_player_pos_y
         01:D1C9  98         			tya
         01:D1CA  6D D7 24   			adc.h	_player_pos_y
         01:D1CD  8D D7 24   			sta.h	_player_pos_y
 9599                        	
 9600                        		.dbg	line,	"include\routines_LEVELS.c", 2110; }
 9601    01:D1D0             	.LL382:
 9602                        	
 9603                        		.dbg	line,	"include\routines_LEVELS.c", 2113; // IF PLAYER GOES BELOW ITS BASE Y POSITION //
 9604                        	
 9605                        		.dbg	line,	"include\routines_LEVELS.c", 2114; if(player_pos_y >= PLAYER_BASE_Y_POS)
 9606                        		__ld.wm		_player_pos_y
         01:D1D0  AD D6 24   			lda.l	_player_pos_y
         01:D1D3  AC D7 24   			ldy.h	_player_pos_y
 9607                        		__sge_w.wi	128
         01:D1D6  C9 80      			cmp.l	#128		; Subtract integer from Y:A.
         01:D1D8  98         			tya
         01:D1D9  E9 00      			sbc.h	#128
         01:D1DB  50 02      			bvc	!+
         01:D1DD  49 80      			eor	#$80		; +ve if Y:A >= integer (signed).
         01:D1DF  49 80      	!:		eor	#$80
         01:D1E1  0A         			asl	a
 9608                        		__bfalse	.LL383
         01:D1E2  90 4E      			bcc	.LL383
 9609                        	
 9610                        		.dbg	line,	"include\routines_LEVELS.c", 2115; {
 9611                        	
 9612                        		.dbg	line,	"include\routines_LEVELS.c", 2116; // THE CAMERA MOVES //
 9613                        	
 9614                        		.dbg	line,	"include\routines_LEVELS.c", 2117; // CALCULATE HOW MANY PIXELS THE CAMERA HAS TO MOVE DOWN //
 9615                        	
 9616                        		.dbg	line,	"include\routines_LEVELS.c", 2118; camera_y_move = player_pos_y - PLAYER_BASE_Y_POS;
 9617                        		__ld.wm		_player_pos_y
         01:D1E4  AD D6 24   			lda.l	_player_pos_y
         01:D1E7  AC D7 24   			ldy.h	_player_pos_y
 9618                        		__sub.wi	128
         01:D1EA  38         			sec
         01:D1EB  E9 80      			sbc.l	#128
         01:D1ED  B0 01      			bcs	!+
         01:D1EF  88         			dey
         01:D1F0             	!:
 9619                        		__st.umq	__update_PLAYER_end - 5  /* camera_y_move */
         01:D1F0  8D 08 23   			sta	__update_PLAYER_end - 5
 9620                        	
 9621                        		.dbg	line,	"include\routines_LEVELS.c", 2119; sgx_map_pxl_y += camera_y_move;
 9622                        		__ld.um		__update_PLAYER_end - 5  /* camera_y_move */
         01:D1F3  AD 08 23   			lda	__update_PLAYER_end - 5
         01:D1F6  C2         			cly
 9623                        		__add_st.wmq	_sgx_map_pxl_y
         01:D1F7  18         			clc
         01:D1F8  6D 92 26   			adc.l	_sgx_map_pxl_y
         01:D1FB  8D 92 26   			sta.l	_sgx_map_pxl_y
         01:D1FE  98         			tya
         01:D1FF  6D 93 26   			adc.h	_sgx_map_pxl_y
         01:D202  8D 93 26   			sta.h	_sgx_map_pxl_y
 9624                        	
 9625                        		.dbg	line,	"include\routines_LEVELS.c", 2121; // IF THE CAMERA HAS REACHED ITS MAX (LOWEST) POSITION //
 9626                        	
 9627                        		.dbg	line,	"include\routines_LEVELS.c", 2122; if(sgx_map_pxl_y > camera_max_y_position)
 9628                        		__ld.wm		_sgx_map_pxl_y
         01:D205  AD 92 26   			lda.l	_sgx_map_pxl_y
         01:D208  AC 93 26   			ldy.h	_sgx_map_pxl_y
 9629                        		__ugt_w.wm	_camera_max_y_position
         01:D20B  18         			clc			; Subtract memory+1 from Y:A.
         01:D20C  ED D8 24   			sbc.l	_camera_max_y_position
         01:D20F  98         			tya
         01:D210  ED D9 24   			sbc.h	_camera_max_y_position		; CS if Y:A > memory.
 9630                        		__bfalse	.LL384
         01:D213  90 0C      			bcc	.LL384
 9631                        	
 9632                        		.dbg	line,	"include\routines_LEVELS.c", 2123; {
 9633                        	
 9634                        		.dbg	line,	"include\routines_LEVELS.c", 2124; // THE CAMERA CAN NOT MOVE LOWER //
 9635                        	
 9636                        		.dbg	line,	"include\routines_LEVELS.c", 2125; sgx_map_pxl_y = camera_max_y_position;
 9637                        		__ld.wm		_camera_max_y_position
         01:D215  AD D8 24   			lda.l	_camera_max_y_position
         01:D218  AC D9 24   			ldy.h	_camera_max_y_position
 9638                        		__st.wmq	_sgx_map_pxl_y
         01:D21B  8D 92 26   			sta.l	_sgx_map_pxl_y
         01:D21E  8C 93 26   			sty.h	_sgx_map_pxl_y
 9639                        	
 9640                        		.dbg	line,	"include\routines_LEVELS.c", 2126; }
 9641                        	
 9642                        		.dbg	line,	"include\routines_LEVELS.c", 2128; // THE PLAYER STAYS AT ITS BASE Y POSITION //
 9643                        	
 9644                        		.dbg	line,	"include\routines_LEVELS.c", 2129; player_pos_y = PLAYER_BASE_Y_POS;
 9645    01:D221             	.LL384:
 9646                        		__st.wmiq	128, _player_pos_y
         01:D221  A9 80      			lda.l	#128
         01:D223  8D D6 24   			sta.l	_player_pos_y
         01:D226  9C D7 24   			stz.h	_player_pos_y
 9647                        	
 9648                        		.dbg	line,	"include\routines_LEVELS.c", 2131; spr_y(player_pos_y);
 9649                        		__ld.wm		_player_pos_y
         01:D229  AD D6 24   			lda.l	_player_pos_y
         01:D22C  AC D7 24   			ldy.h	_player_pos_y
 9650                        		__call		_spr_y.1
         01:D22F  20 19 E8   			call	_spr_y.1
 9651                        	
 9652                        		.dbg	line,	"include\routines_LEVELS.c", 2132; }
 9653                        	
 9654                        		.dbg	line,	"include\routines_LEVELS.c", 2135; // UPDATE JUMP INDEX IN THE ARRAY //
 9655                        	
 9656                        		.dbg	line,	"include\routines_LEVELS.c", 2136; if(player_index_jump < jump_max_index)
 9657    01:D232             	.LL383:
 9658                        		__ld.umq	_player_index_jump
         01:D232  AD 1A 23   			lda	_player_index_jump
 9659                        		__ult_b.umq	_jump_max_index
         01:D235  CD 20 23   			cmp	_jump_max_index		; Subtract memory from A.
         01:D238  6A         			ror	a		; CC if A < memory.
         01:D239  49 80      			eor	#$80
         01:D23B  2A         			rol	a
 9660                        		__bfalse	.LL385
         01:D23C  90 03      			bcc	.LL385
 9661                        	
 9662                        		.dbg	line,	"include\routines_LEVELS.c", 2137; {
 9663                        	
 9664                        		.dbg	line,	"include\routines_LEVELS.c", 2138; player_index_jump += 1;
 9665                        		__add_st.umiq	1, _player_index_jump
         01:D23E  EE 1A 23   			inc	_player_index_jump
 9666                        	
 9667                        		.dbg	line,	"include\routines_LEVELS.c", 2139; }
 9668                        	
 9669                        		.dbg	line,	"include\routines_LEVELS.c", 2144; //--------------------------------------------------------------------------------------//
 9670                        	
 9671                        		.dbg	line,	"include\routines_LEVELS.c", 2145; //                                   FLOOR COLLISION                                    //
 9672                        	
 9673                        		.dbg	line,	"include\routines_LEVELS.c", 2146; //--------------------------------------------------------------------------------------//
 9674                        	
 9675                        		.dbg	line,	"include\routines_LEVELS.c", 2148; if(player_index_jump > 14)
 9676    01:D241             	.LL385:
 9677                        		__ld.umq	_player_index_jump
         01:D241  AD 1A 23   			lda	_player_index_jump
 9678                        		__ugt_b.uiq	14
         01:D244  18         			clc			; Subtract integer+1 from A.
         01:D245  E9 0E      			sbc	#14		; CS if A > integer.
 9679                        		__bfalse	.LL386
         01:D247  B0 03 4C FC			bcc	.LL386
         01:D24B  D3          
 9680                        	
 9681                        		.dbg	line,	"include\routines_LEVELS.c", 2149; {
 9682                        	
 9683                        		.dbg	line,	"include\routines_LEVELS.c", 2150; // CHECK COLLISION WITH LEFT FLOOR //
 9684                        	
 9685                        		.dbg	line,	"include\routines_LEVELS.c", 2151; check_BG( 10 , 32 );
 9686                        		__ld.wi		10
         01:D24C  A9 0A      			lda.l	#10
         01:D24E  C2         			cly
 9687                        		__pusharg.wr
         01:D24F  A6 8D      			ldx	<__sp
         01:D251  CA         			dex
         01:D252  CA         			dex
         01:D253  95 08      			sta.l	<__stack, x
         01:D255  94 09      			sty.h	<__stack, x
         01:D257  86 8D      			stx	<__sp
 9688                        		__ld.wi		32
         01:D259  A9 20      			lda.l	#32
         01:D25B  C2         			cly
 9689                        		__pusharg.wr
         01:D25C  A6 8D      			ldx	<__sp
         01:D25E  CA         			dex
         01:D25F  CA         			dex
         01:D260  95 08      			sta.l	<__stack, x
         01:D262  94 09      			sty.h	<__stack, x
         01:D264  86 8D      			stx	<__sp
 9690                        		__call		_check_BG
         01:D266  20 6D FF   			call	_check_BG
 9691                        	
 9692                        		.dbg	line,	"include\routines_LEVELS.c", 2153; if(map_blk_flag == TILE_BG)
 9693                        		__ld.umq	_map_blk_flag
         01:D269  AD B1 2B   			lda	_map_blk_flag
 9694                        		__equ_b.uiq	1
         01:D26C  C9 01      			cmp	#1
         01:D26E  F0 01      			beq	!+
         01:D270  18         			clc
         01:D271             	!:
 9695                        		__bfalse	.LL387
         01:D271  B0 03 4C 24			bcc	.LL387
         01:D275  D3          
 9696                        	
 9697                        		.dbg	line,	"include\routines_LEVELS.c", 2154; {
 9698                        	
 9699                        		.dbg	line,	"include\routines_LEVELS.c", 2155; // CALCULATE HOW MANY PIXELS THE PLAYER MOVED INTO THE GROUND //
 9700                        	
 9701                        		.dbg	line,	"include\routines_LEVELS.c", 2156; for(i=1; i<11 ; i++)
 9702                        		__st.umiq	1, __update_PLAYER_end - 4  /* i */
         01:D276  A9 01      			lda.l	#1
         01:D278  8D 09 23   			sta	__update_PLAYER_end - 4
 9703    01:D27B             	.LL388:
 9704                        		__ld.umq	__update_PLAYER_end - 4  /* i */
         01:D27B  AD 09 23   			lda	__update_PLAYER_end - 4
 9705                        		__ult_b.uiq	11
         01:D27E  C9 0B      			cmp	#11		; Subtract integer from A.
         01:D280  6A         			ror	a		; CC if A < integer.
         01:D281  49 80      			eor	#$80
         01:D283  2A         			rol	a
 9706                        		__btrue		.LL390
         01:D284  B0 07      			bcs	.LL390
 9707                        		__bra		.LL391
         01:D286  80 7D      			bra	.LL391
 9708    01:D288             	.LL389:
 9709                        		__inc.umq	__update_PLAYER_end - 4  /* i */
         01:D288  EE 09 23   			inc	__update_PLAYER_end - 4
 9710                        		__bra		.LL388
         01:D28B  80 EE      			bra	.LL388
 9711    01:D28D             	.LL390:
 9712                        	
 9713                        		.dbg	line,	"include\routines_LEVELS.c", 2157; {
 9714                        	
 9715                        		.dbg	line,	"include\routines_LEVELS.c", 2158; check_TILE_DEPTH( 10 , i);
 9716                        		__ld.wi		10
         01:D28D  A9 0A      			lda.l	#10
         01:D28F  C2         			cly
 9717                        		__pusharg.wr
         01:D290  A6 8D      			ldx	<__sp
         01:D292  CA         			dex
         01:D293  CA         			dex
         01:D294  95 08      			sta.l	<__stack, x
         01:D296  94 09      			sty.h	<__stack, x
         01:D298  86 8D      			stx	<__sp
 9718                        		__ld.um		__update_PLAYER_end - 4  /* i */
         01:D29A  AD 09 23   			lda	__update_PLAYER_end - 4
         01:D29D  C2         			cly
 9719                        		__pusharg.wr
         01:D29E  A6 8D      			ldx	<__sp
         01:D2A0  CA         			dex
         01:D2A1  CA         			dex
         01:D2A2  95 08      			sta.l	<__stack, x
         01:D2A4  94 09      			sty.h	<__stack, x
         01:D2A6  86 8D      			stx	<__sp
 9720                        		__call		_check_TILE_DEPTH
         01:D2A8  20 59 FF   			call	_check_TILE_DEPTH
 9721                        	
 9722                        		.dbg	line,	"include\routines_LEVELS.c", 2160; if(map_blk_flag == TILE_EMPTY)
 9723                        		__not.um	_map_blk_flag
         01:D2AB  AD B1 2B   			lda	_map_blk_flag
         01:D2AE  18         			clc
         01:D2AF  D0 01      			bne	!+
         01:D2B1  38         			sec
         01:D2B2             	!:
 9724                        		__bfalse	.LL392
         01:D2B2  90 D4      			bcc	.LL392
 9725                        	
 9726                        		.dbg	line,	"include\routines_LEVELS.c", 2161; {
 9727                        	
 9728                        		.dbg	line,	"include\routines_LEVELS.c", 2162; if(player_pos_y != PLAYER_BASE_Y_POS)
 9729                        		__ld.wm		_player_pos_y
         01:D2B4  AD D6 24   			lda.l	_player_pos_y
         01:D2B7  AC D7 24   			ldy.h	_player_pos_y
 9730                        		__neq_w.wi	128
         01:D2BA  38         			sec
         01:D2BB  49 80      			eor.l	#128
         01:D2BD  D0 06      			bne	!+
         01:D2BF  98         			tya
         01:D2C0  49 00      			eor.h	#128
         01:D2C2  D0 01      			bne	!+
         01:D2C4  18         			clc
         01:D2C5             	!:
 9731                        		__bfalse	.LL393
         01:D2C5  90 1E      			bcc	.LL393
 9732                        	
 9733                        		.dbg	line,	"include\routines_LEVELS.c", 2163; {
 9734                        	
 9735                        		.dbg	line,	"include\routines_LEVELS.c", 2164; player_pos_y -= (i - 1);
 9736                        		__ld.um		__update_PLAYER_end - 4  /* i */
         01:D2C7  AD 09 23   			lda	__update_PLAYER_end - 4
         01:D2CA  C2         			cly
 9737                        		__sub.wi	1
         01:D2CB  38         			sec
         01:D2CC  E9 01      			sbc.l	#1
         01:D2CE  B0 01      			bcs	!+
         01:D2D0  88         			dey
         01:D2D1             	!:
 9738                        		__isub_st.wmq	_player_pos_y
         01:D2D1  38         			sec
         01:D2D2  49 FF      			eor	#$FF
         01:D2D4  6D D6 24   			adc.l	_player_pos_y
         01:D2D7  8D D6 24   			sta.l	_player_pos_y
         01:D2DA  98         			tya
         01:D2DB  49 FF      			eor	#$FF
         01:D2DD  6D D7 24   			adc.h	_player_pos_y
         01:D2E0  8D D7 24   			sta.h	_player_pos_y
 9739                        	
 9740                        		.dbg	line,	"include\routines_LEVELS.c", 2165; }
 9741                        	
 9742                        		.dbg	line,	"include\routines_LEVELS.c", 2167; else
 9743                        		__bra		.LL394
         01:D2E3  80 20      			bra	.LL394
 9744    01:D2E5             	.LL393:
 9745                        	
 9746                        		.dbg	line,	"include\routines_LEVELS.c", 2168; {
 9747                        	
 9748                        		.dbg	line,	"include\routines_LEVELS.c", 2169; sgx_map_pxl_y -= (i - 1);
 9749                        		__ld.um		__update_PLAYER_end - 4  /* i */
         01:D2E5  AD 09 23   			lda	__update_PLAYER_end - 4
         01:D2E8  C2         			cly
 9750                        		__sub.wi	1
         01:D2E9  38         			sec
         01:D2EA  E9 01      			sbc.l	#1
         01:D2EC  B0 01      			bcs	!+
         01:D2EE  88         			dey
         01:D2EF             	!:
 9751                        		__isub_st.wmq	_sgx_map_pxl_y
         01:D2EF  38         			sec
         01:D2F0  49 FF      			eor	#$FF
         01:D2F2  6D 92 26   			adc.l	_sgx_map_pxl_y
         01:D2F5  8D 92 26   			sta.l	_sgx_map_pxl_y
         01:D2F8  98         			tya
         01:D2F9  49 FF      			eor	#$FF
         01:D2FB  6D 93 26   			adc.h	_sgx_map_pxl_y
         01:D2FE  8D 93 26   			sta.h	_sgx_map_pxl_y
 9752                        	
 9753                        		.dbg	line,	"include\routines_LEVELS.c", 2170; }
 9754    01:D301             	.LL394	.alias		.LL391
 9755                        	
 9756                        		.dbg	line,	"include\routines_LEVELS.c", 2172; break;
 9757                        		__bra		.LL391
         01:D301  80 02      			bra	.LL391
 9758                        	
 9759                        		.dbg	line,	"include\routines_LEVELS.c", 2173; }
 9760                        	
 9761                        		.dbg	line,	"include\routines_LEVELS.c", 2174; }
 9762    01:D303             	.LL392	.alias		.LL389
 9763                        		__bra		.LL389
         01:D303  80 83      			bra	.LL389
 9764    01:D305             	.LL391:
 9765                        	
 9766                        		.dbg	line,	"include\routines_LEVELS.c", 2176; // SET PLAYER SPRITE NEW POSITION //
 9767                        	
 9768                        		.dbg	line,	"include\routines_LEVELS.c", 2177; spr_y(player_pos_y);
 9769                        		__ld.wm		_player_pos_y
         01:D305  AD D6 24   			lda.l	_player_pos_y
         01:D308  AC D7 24   			ldy.h	_player_pos_y
 9770                        		__call		_spr_y.1
         01:D30B  20 19 E8   			call	_spr_y.1
 9771                        	
 9772                        		.dbg	line,	"include\routines_LEVELS.c", 2179; player_counter_anim = 1;
 9773                        		__st.umiq	1, _player_counter_anim
         01:D30E  A9 01      			lda.l	#1
         01:D310  8D 19 23   			sta	_player_counter_anim
 9774                        	
 9775                        		.dbg	line,	"include\routines_LEVELS.c", 2180; player_index_jump = 0;
 9776                        		__st.umiq	0, _player_index_jump
         01:D313  9C 1A 23   			stz	_player_index_jump
 9777                        	
 9778                        		.dbg	line,	"include\routines_LEVELS.c", 2181; jump_ladder = FALSE;
 9779                        		__st.umiq	0, _jump_ladder
         01:D316  9C 1F 23   			stz	_jump_ladder
 9780                        	
 9781                        		.dbg	line,	"include\routines_LEVELS.c", 2182; jump_max_index = 34;
 9782                        		__st.umiq	34, _jump_max_index
         01:D319  A9 22      			lda.l	#34
         01:D31B  8D 20 23   			sta	_jump_max_index
 9783                        	
 9784                        		.dbg	line,	"include\routines_LEVELS.c", 2183; player_state = STATE_IDLE;
 9785                        		__st.umiq	0, _player_state
         01:D31E  9C 16 23   			stz	_player_state
 9786                        	
 9787                        		.dbg	line,	"include\routines_LEVELS.c", 2184; return;
 9788                        		__bra		.LL230
         01:D321  4C 0B DB   			bra	.LL230
 9789                        	
 9790                        		.dbg	line,	"include\routines_LEVELS.c", 2185; }
 9791                        	
 9792                        		.dbg	line,	"include\routines_LEVELS.c", 2187; else
 9793    01:D324             	.LL387:
 9794                        	
 9795                        		.dbg	line,	"include\routines_LEVELS.c", 2188; {
 9796                        	
 9797                        		.dbg	line,	"include\routines_LEVELS.c", 2189; // CHECK COLLISION WITH RIGHT FLOOR //
 9798                        	
 9799                        		.dbg	line,	"include\routines_LEVELS.c", 2190; check_BG( 22 , 32 );
 9800                        		__ld.wi		22
         01:D324  A9 16      			lda.l	#22
         01:D326  C2         			cly
 9801                        		__pusharg.wr
         01:D327  A6 8D      			ldx	<__sp
         01:D329  CA         			dex
         01:D32A  CA         			dex
         01:D32B  95 08      			sta.l	<__stack, x
         01:D32D  94 09      			sty.h	<__stack, x
         01:D32F  86 8D      			stx	<__sp
 9802                        		__ld.wi		32
         01:D331  A9 20      			lda.l	#32
         01:D333  C2         			cly
 9803                        		__pusharg.wr
         01:D334  A6 8D      			ldx	<__sp
         01:D336  CA         			dex
         01:D337  CA         			dex
         01:D338  95 08      			sta.l	<__stack, x
         01:D33A  94 09      			sty.h	<__stack, x
         01:D33C  86 8D      			stx	<__sp
 9804                        		__call		_check_BG
         01:D33E  20 6D FF   			call	_check_BG
 9805                        	
 9806                        		.dbg	line,	"include\routines_LEVELS.c", 2192; if(map_blk_flag == TILE_BG)
 9807                        		__ld.umq	_map_blk_flag
         01:D341  AD B1 2B   			lda	_map_blk_flag
 9808                        		__equ_b.uiq	1
         01:D344  C9 01      			cmp	#1
         01:D346  F0 01      			beq	!+
         01:D348  18         			clc
         01:D349             	!:
 9809                        		__bfalse	.LL396
         01:D349  B0 03 4C FC			bcc	.LL396
         01:D34D  D3          
 9810                        	
 9811                        		.dbg	line,	"include\routines_LEVELS.c", 2193; {
 9812                        	
 9813                        		.dbg	line,	"include\routines_LEVELS.c", 2194; // CALCULATE HOW MANY PIXELS THE PLAYER MOVED INTO THE GROUND //
 9814                        	
 9815                        		.dbg	line,	"include\routines_LEVELS.c", 2195; for(i=1; i<11 ; i++)
 9816                        		__st.umiq	1, __update_PLAYER_end - 4  /* i */
         01:D34E  A9 01      			lda.l	#1
         01:D350  8D 09 23   			sta	__update_PLAYER_end - 4
 9817    01:D353             	.LL397:
 9818                        		__ld.umq	__update_PLAYER_end - 4  /* i */
         01:D353  AD 09 23   			lda	__update_PLAYER_end - 4
 9819                        		__ult_b.uiq	11
         01:D356  C9 0B      			cmp	#11		; Subtract integer from A.
         01:D358  6A         			ror	a		; CC if A < integer.
         01:D359  49 80      			eor	#$80
         01:D35B  2A         			rol	a
 9820                        		__btrue		.LL399
         01:D35C  B0 07      			bcs	.LL399
 9821                        		__bra		.LL400
         01:D35E  80 7D      			bra	.LL400
 9822    01:D360             	.LL398:
 9823                        		__inc.umq	__update_PLAYER_end - 4  /* i */
         01:D360  EE 09 23   			inc	__update_PLAYER_end - 4
 9824                        		__bra		.LL397
         01:D363  80 EE      			bra	.LL397
 9825    01:D365             	.LL399:
 9826                        	
 9827                        		.dbg	line,	"include\routines_LEVELS.c", 2196; {
 9828                        	
 9829                        		.dbg	line,	"include\routines_LEVELS.c", 2197; check_TILE_DEPTH( 22 , i);
 9830                        		__ld.wi		22
         01:D365  A9 16      			lda.l	#22
         01:D367  C2         			cly
 9831                        		__pusharg.wr
         01:D368  A6 8D      			ldx	<__sp
         01:D36A  CA         			dex
         01:D36B  CA         			dex
         01:D36C  95 08      			sta.l	<__stack, x
         01:D36E  94 09      			sty.h	<__stack, x
         01:D370  86 8D      			stx	<__sp
 9832                        		__ld.um		__update_PLAYER_end - 4  /* i */
         01:D372  AD 09 23   			lda	__update_PLAYER_end - 4
         01:D375  C2         			cly
 9833                        		__pusharg.wr
         01:D376  A6 8D      			ldx	<__sp
         01:D378  CA         			dex
         01:D379  CA         			dex
         01:D37A  95 08      			sta.l	<__stack, x
         01:D37C  94 09      			sty.h	<__stack, x
         01:D37E  86 8D      			stx	<__sp
 9834                        		__call		_check_TILE_DEPTH
         01:D380  20 59 FF   			call	_check_TILE_DEPTH
 9835                        	
 9836                        		.dbg	line,	"include\routines_LEVELS.c", 2199; if(map_blk_flag == TILE_EMPTY)
 9837                        		__not.um	_map_blk_flag
         01:D383  AD B1 2B   			lda	_map_blk_flag
         01:D386  18         			clc
         01:D387  D0 01      			bne	!+
         01:D389  38         			sec
         01:D38A             	!:
 9838                        		__bfalse	.LL401
         01:D38A  90 D4      			bcc	.LL401
 9839                        	
 9840                        		.dbg	line,	"include\routines_LEVELS.c", 2200; {
 9841                        	
 9842                        		.dbg	line,	"include\routines_LEVELS.c", 2201; if(player_pos_y != PLAYER_BASE_Y_POS)
 9843                        		__ld.wm		_player_pos_y
         01:D38C  AD D6 24   			lda.l	_player_pos_y
         01:D38F  AC D7 24   			ldy.h	_player_pos_y
 9844                        		__neq_w.wi	128
         01:D392  38         			sec
         01:D393  49 80      			eor.l	#128
         01:D395  D0 06      			bne	!+
         01:D397  98         			tya
         01:D398  49 00      			eor.h	#128
         01:D39A  D0 01      			bne	!+
         01:D39C  18         			clc
         01:D39D             	!:
 9845                        		__bfalse	.LL402
         01:D39D  90 1E      			bcc	.LL402
 9846                        	
 9847                        		.dbg	line,	"include\routines_LEVELS.c", 2202; {
 9848                        	
 9849                        		.dbg	line,	"include\routines_LEVELS.c", 2203; player_pos_y -= (i - 1);
 9850                        		__ld.um		__update_PLAYER_end - 4  /* i */
         01:D39F  AD 09 23   			lda	__update_PLAYER_end - 4
         01:D3A2  C2         			cly
 9851                        		__sub.wi	1
         01:D3A3  38         			sec
         01:D3A4  E9 01      			sbc.l	#1
         01:D3A6  B0 01      			bcs	!+
         01:D3A8  88         			dey
         01:D3A9             	!:
 9852                        		__isub_st.wmq	_player_pos_y
         01:D3A9  38         			sec
         01:D3AA  49 FF      			eor	#$FF
         01:D3AC  6D D6 24   			adc.l	_player_pos_y
         01:D3AF  8D D6 24   			sta.l	_player_pos_y
         01:D3B2  98         			tya
         01:D3B3  49 FF      			eor	#$FF
         01:D3B5  6D D7 24   			adc.h	_player_pos_y
         01:D3B8  8D D7 24   			sta.h	_player_pos_y
 9853                        	
 9854                        		.dbg	line,	"include\routines_LEVELS.c", 2204; }
 9855                        	
 9856                        		.dbg	line,	"include\routines_LEVELS.c", 2206; else
 9857                        		__bra		.LL403
         01:D3BB  80 20      			bra	.LL403
 9858    01:D3BD             	.LL402:
 9859                        	
 9860                        		.dbg	line,	"include\routines_LEVELS.c", 2207; {
 9861                        	
 9862                        		.dbg	line,	"include\routines_LEVELS.c", 2208; sgx_map_pxl_y -= (i - 1);
 9863                        		__ld.um		__update_PLAYER_end - 4  /* i */
         01:D3BD  AD 09 23   			lda	__update_PLAYER_end - 4
         01:D3C0  C2         			cly
 9864                        		__sub.wi	1
         01:D3C1  38         			sec
         01:D3C2  E9 01      			sbc.l	#1
         01:D3C4  B0 01      			bcs	!+
         01:D3C6  88         			dey
         01:D3C7             	!:
 9865                        		__isub_st.wmq	_sgx_map_pxl_y
         01:D3C7  38         			sec
         01:D3C8  49 FF      			eor	#$FF
         01:D3CA  6D 92 26   			adc.l	_sgx_map_pxl_y
         01:D3CD  8D 92 26   			sta.l	_sgx_map_pxl_y
         01:D3D0  98         			tya
         01:D3D1  49 FF      			eor	#$FF
         01:D3D3  6D 93 26   			adc.h	_sgx_map_pxl_y
         01:D3D6  8D 93 26   			sta.h	_sgx_map_pxl_y
 9866                        	
 9867                        		.dbg	line,	"include\routines_LEVELS.c", 2209; }
 9868    01:D3D9             	.LL403	.alias		.LL400
 9869                        	
 9870                        		.dbg	line,	"include\routines_LEVELS.c", 2211; break;
 9871                        		__bra		.LL400
         01:D3D9  80 02      			bra	.LL400
 9872                        	
 9873                        		.dbg	line,	"include\routines_LEVELS.c", 2212; }
 9874                        	
 9875                        		.dbg	line,	"include\routines_LEVELS.c", 2213; }
 9876    01:D3DB             	.LL401	.alias		.LL398
 9877                        		__bra		.LL398
         01:D3DB  80 83      			bra	.LL398
 9878    01:D3DD             	.LL400:
 9879                        	
 9880                        		.dbg	line,	"include\routines_LEVELS.c", 2215; // SET PLAYER SPRITE NEW POSITION //
 9881                        	
 9882                        		.dbg	line,	"include\routines_LEVELS.c", 2216; spr_y(player_pos_y);
 9883                        		__ld.wm		_player_pos_y
         01:D3DD  AD D6 24   			lda.l	_player_pos_y
         01:D3E0  AC D7 24   			ldy.h	_player_pos_y
 9884                        		__call		_spr_y.1
         01:D3E3  20 19 E8   			call	_spr_y.1
 9885                        	
 9886                        		.dbg	line,	"include\routines_LEVELS.c", 2218; player_counter_anim = 1;
 9887                        		__st.umiq	1, _player_counter_anim
         01:D3E6  A9 01      			lda.l	#1
         01:D3E8  8D 19 23   			sta	_player_counter_anim
 9888                        	
 9889                        		.dbg	line,	"include\routines_LEVELS.c", 2219; player_index_jump = 0;
 9890                        		__st.umiq	0, _player_index_jump
         01:D3EB  9C 1A 23   			stz	_player_index_jump
 9891                        	
 9892                        		.dbg	line,	"include\routines_LEVELS.c", 2220; jump_ladder = FALSE;
 9893                        		__st.umiq	0, _jump_ladder
         01:D3EE  9C 1F 23   			stz	_jump_ladder
 9894                        	
 9895                        		.dbg	line,	"include\routines_LEVELS.c", 2221; jump_max_index = 34;
 9896                        		__st.umiq	34, _jump_max_index
         01:D3F1  A9 22      			lda.l	#34
         01:D3F3  8D 20 23   			sta	_jump_max_index
 9897                        	
 9898                        		.dbg	line,	"include\routines_LEVELS.c", 2222; player_state = STATE_IDLE;
 9899                        		__st.umiq	0, _player_state
         01:D3F6  9C 16 23   			stz	_player_state
 9900                        	
 9901                        		.dbg	line,	"include\routines_LEVELS.c", 2223; return;
 9902                        		__bra		.LL230
         01:D3F9  4C 0B DB   			bra	.LL230
 9903                        	
 9904                        		.dbg	line,	"include\routines_LEVELS.c", 2224; }
 9905                        	
 9906                        		.dbg	line,	"include\routines_LEVELS.c", 2225; }
 9907    01:D3FC             	.LL396:
 9908    01:D3FC             	.LL395:
 9909                        	
 9910                        		.dbg	line,	"include\routines_LEVELS.c", 2226; }
 9911                        	
 9912                        		.dbg	line,	"include\routines_LEVELS.c", 2231; //--------------------------------------------------------------------------------------//
 9913                        	
 9914                        		.dbg	line,	"include\routines_LEVELS.c", 2232; //                                   LADDER COLLISION                                   //
 9915                        	
 9916                        		.dbg	line,	"include\routines_LEVELS.c", 2233; //--------------------------------------------------------------------------------------//
 9917                        	
 9918                        		.dbg	line,	"include\routines_LEVELS.c", 2235; if(player_index_jump > 4)
 9919    01:D3FC             	.LL386:
 9920                        		__ld.umq	_player_index_jump
         01:D3FC  AD 1A 23   			lda	_player_index_jump
 9921                        		__ugt_b.uiq	4
         01:D3FF  18         			clc			; Subtract integer+1 from A.
         01:D400  E9 04      			sbc	#4		; CS if A > integer.
 9922                        		__bfalse	.LL404
         01:D402  B0 03 4C 97			bcc	.LL404
         01:D406  D4          
 9923                        	
 9924                        		.dbg	line,	"include\routines_LEVELS.c", 2236; {
 9925                        	
 9926                        		.dbg	line,	"include\routines_LEVELS.c", 2237; check_BG( 16 , 16 );
 9927                        		__ld.wi		16
         01:D407  A9 10      			lda.l	#16
         01:D409  C2         			cly
 9928                        		__pusharg.wr
         01:D40A  A6 8D      			ldx	<__sp
         01:D40C  CA         			dex
         01:D40D  CA         			dex
         01:D40E  95 08      			sta.l	<__stack, x
         01:D410  94 09      			sty.h	<__stack, x
         01:D412  86 8D      			stx	<__sp
 9929                        		__ld.wi		16
         01:D414  A9 10      			lda.l	#16
         01:D416  C2         			cly
 9930                        		__pusharg.wr
         01:D417  A6 8D      			ldx	<__sp
         01:D419  CA         			dex
         01:D41A  CA         			dex
         01:D41B  95 08      			sta.l	<__stack, x
         01:D41D  94 09      			sty.h	<__stack, x
         01:D41F  86 8D      			stx	<__sp
 9931                        		__call		_check_BG
         01:D421  20 6D FF   			call	_check_BG
 9932                        	
 9933                        		.dbg	line,	"include\routines_LEVELS.c", 2239; if(map_blk_flag == TILE_LADDER)
 9934                        		__ld.umq	_map_blk_flag
         01:D424  AD B1 2B   			lda	_map_blk_flag
 9935                        		__equ_b.uiq	2
         01:D427  C9 02      			cmp	#2
         01:D429  F0 01      			beq	!+
         01:D42B  18         			clc
         01:D42C             	!:
 9936                        		__bfalse	.LL405
         01:D42C  90 69      			bcc	.LL405
 9937                        	
 9938                        		.dbg	line,	"include\routines_LEVELS.c", 2240; {
 9939                        	
 9940                        		.dbg	line,	"include\routines_LEVELS.c", 2241; // CAMERA GOES 8 PX BACKWARD //
 9941                        	
 9942                        		.dbg	line,	"include\routines_LEVELS.c", 2242; sgx_map_pxl_x = ( (sgx_map_pxl_x >> 3) << 3 );
 9943                        		__ld.wm		_sgx_map_pxl_x
         01:D42E  AD 90 26   			lda.l	_sgx_map_pxl_x
         01:D431  AC 91 26   			ldy.h	_sgx_map_pxl_x
 9944                        		__lsr.wi	3
         01:D434  84 00      			sty	__temp
         01:D436  20 3A E2   			jsr	lsrw3
 9945                        		__asl.wi	3
         01:D439  84 00      			sty	__temp
         01:D43B  20 D7 E1   			jsr	aslw3
 9946                        		__st.wmq	_sgx_map_pxl_x
         01:D43E  8D 90 26   			sta.l	_sgx_map_pxl_x
         01:D441  8C 91 26   			sty.h	_sgx_map_pxl_x
 9947                        	
 9948                        		.dbg	line,	"include\routines_LEVELS.c", 2244; // SO WE UPDATE THE MAP //
 9949                        	
 9950                        		.dbg	line,	"include\routines_LEVELS.c", 2245; sgx_scroll_map();
 9951                        		__call		_sgx_scroll_map
         01:D444  20 81 FF   			call	_sgx_scroll_map
 9952                        	
 9953                        		.dbg	line,	"include\routines_LEVELS.c", 2247; // CHECK IF THE PLAYER STANDS RIGHT TO THE LADDER //
 9954                        	
 9955                        		.dbg	line,	"include\routines_LEVELS.c", 2248; check_BG( 31 , 16 );
 9956                        		__ld.wi		31
         01:D447  A9 1F      			lda.l	#31
         01:D449  C2         			cly
 9957                        		__pusharg.wr
         01:D44A  A6 8D      			ldx	<__sp
         01:D44C  CA         			dex
         01:D44D  CA         			dex
         01:D44E  95 08      			sta.l	<__stack, x
         01:D450  94 09      			sty.h	<__stack, x
         01:D452  86 8D      			stx	<__sp
 9958                        		__ld.wi		16
         01:D454  A9 10      			lda.l	#16
         01:D456  C2         			cly
 9959                        		__pusharg.wr
         01:D457  A6 8D      			ldx	<__sp
         01:D459  CA         			dex
         01:D45A  CA         			dex
         01:D45B  95 08      			sta.l	<__stack, x
         01:D45D  94 09      			sty.h	<__stack, x
         01:D45F  86 8D      			stx	<__sp
 9960                        		__call		_check_BG
         01:D461  20 6D FF   			call	_check_BG
 9961                        	
 9962                        		.dbg	line,	"include\routines_LEVELS.c", 2250; if(map_blk_flag == TILE_LADDER)
 9963                        		__ld.umq	_map_blk_flag
         01:D464  AD B1 2B   			lda	_map_blk_flag
 9964                        		__equ_b.uiq	2
         01:D467  C9 02      			cmp	#2
         01:D469  F0 01      			beq	!+
         01:D46B  18         			clc
         01:D46C             	!:
 9965                        		__bfalse	.LL406
         01:D46C  90 0E      			bcc	.LL406
 9966                        	
 9967                        		.dbg	line,	"include\routines_LEVELS.c", 2251; {
 9968                        	
 9969                        		.dbg	line,	"include\routines_LEVELS.c", 2252; sgx_map_pxl_x += 8;
 9970                        		__add_st.wmiq	8, _sgx_map_pxl_x
         01:D46E  18         			clc
         01:D46F  AD 90 26   			lda.l	_sgx_map_pxl_x
         01:D472  69 08      			adc.l	#8
         01:D474  8D 90 26   			sta.l	_sgx_map_pxl_x
         01:D477  90 03      			bcc	!+
         01:D479  EE 91 26   			inc.h	_sgx_map_pxl_x
         01:D47C             	!:
 9971                        	
 9972                        		.dbg	line,	"include\routines_LEVELS.c", 2253; }
 9973                        	
 9974                        		.dbg	line,	"include\routines_LEVELS.c", 2255; spr_pattern(PLAYER_HANG_VRAM_ADR);
 9975    01:D47C             	.LL406:
 9976                        		__ld.wi		7424
         01:D47C  62         			cla
         01:D47D  A0 1D      			ldy.h	#7424
 9977                        		__call		_spr_pattern.1
         01:D47F  20 26 E8   			call	_spr_pattern.1
 9978                        	
 9979                        		.dbg	line,	"include\routines_LEVELS.c", 2256; player_counter_anim = 0;
 9980                        		__st.umiq	0, _player_counter_anim
         01:D482  9C 19 23   			stz	_player_counter_anim
 9981                        	
 9982                        		.dbg	line,	"include\routines_LEVELS.c", 2257; player_index_jump = 0;
 9983                        		__st.umiq	0, _player_index_jump
         01:D485  9C 1A 23   			stz	_player_index_jump
 9984                        	
 9985                        		.dbg	line,	"include\routines_LEVELS.c", 2258; jump_ladder = TRUE;
 9986                        		__st.umiq	1, _jump_ladder
         01:D488  A9 01      			lda.l	#1
         01:D48A  8D 1F 23   			sta	_jump_ladder
 9987                        	
 9988                        		.dbg	line,	"include\routines_LEVELS.c", 2259; jump_max_index = 29;
 9989                        		__st.umiq	29, _jump_max_index
         01:D48D  A9 1D      			lda.l	#29
         01:D48F  8D 20 23   			sta	_jump_max_index
 9990                        	
 9991                        		.dbg	line,	"include\routines_LEVELS.c", 2260; player_state = STATE_HANG;
 9992                        		__st.umiq	10, _player_state
         01:D492  A9 0A      			lda.l	#10
         01:D494  8D 16 23   			sta	_player_state
 9993                        	
 9994                        		.dbg	line,	"include\routines_LEVELS.c", 2261; }
 9995                        	
 9996                        		.dbg	line,	"include\routines_LEVELS.c", 2262; }
 9997    01:D497             	.LL405:
 9998                        	
 9999                        		.dbg	line,	"include\routines_LEVELS.c", 2265; // SET PLAYER SPRITE NEW POSITION //
10000                        	
10001                        		.dbg	line,	"include\routines_LEVELS.c", 2266; spr_y(player_pos_y);
10002    01:D497             	.LL404:
10003                        		__ld.wm		_player_pos_y
         01:D497  AD D6 24   			lda.l	_player_pos_y
         01:D49A  AC D7 24   			ldy.h	_player_pos_y
10004                        		__call		_spr_y.1
         01:D49D  20 19 E8   			call	_spr_y.1
10005                        	
10006                        		.dbg	line,	"include\routines_LEVELS.c", 2268; spr_set(weapon_id);
10007                        		__ld.umq	_weapon_id
         01:D4A0  AD 23 23   			lda	_weapon_id
10008                        		__call		_spr_set.1
         01:D4A3  20 DD E7   			call	_spr_set.1
10009                        	
10010                        		.dbg	line,	"include\routines_LEVELS.c", 2269; spr_y(player_pos_y+8);
10011                        		__ld.wm		_player_pos_y
         01:D4A6  AD D6 24   			lda.l	_player_pos_y
         01:D4A9  AC D7 24   			ldy.h	_player_pos_y
10012                        		__add.wi	8
         01:D4AC  18         			clc
         01:D4AD  69 08      			adc.l	#8
         01:D4AF  90 01      			bcc	!+
         01:D4B1  C8         			iny
         01:D4B2             	!:
10013                        		__call		_spr_y.1
         01:D4B2  20 19 E8   			call	_spr_y.1
10014                        	
10015                        		.dbg	line,	"include\routines_LEVELS.c", 2270; }
10016                        	
10017                        		.dbg	line,	"include\routines_LEVELS.c", 2273; else if(player_state == STATE_CROUCH)
10018                        		__bra		.LL407
         01:D4B5  4C 0B DB   			bra	.LL407
10019    01:D4B8             	.LL371:
10020                        		__ld.umq	_player_state
         01:D4B8  AD 16 23   			lda	_player_state
10021                        		__equ_b.uiq	7
         01:D4BB  C9 07      			cmp	#7
         01:D4BD  F0 01      			beq	!+
         01:D4BF  18         			clc
         01:D4C0             	!:
10022                        		__bfalse	.LL408
         01:D4C0  90 64      			bcc	.LL408
10023                        	
10024                        		.dbg	line,	"include\routines_LEVELS.c", 2274; {
10025                        	
10026                        		.dbg	line,	"include\routines_LEVELS.c", 2275; if(player_counter_anim == 1)
10027                        		__ld.umq	_player_counter_anim
         01:D4C2  AD 19 23   			lda	_player_counter_anim
10028                        		__equ_b.uiq	1
         01:D4C5  C9 01      			cmp	#1
         01:D4C7  F0 01      			beq	!+
         01:D4C9  18         			clc
         01:D4CA             	!:
10029                        		__bfalse	.LL409
         01:D4CA  90 54      			bcc	.LL409
10030                        	
10031                        		.dbg	line,	"include\routines_LEVELS.c", 2276; {
10032                        	
10033                        		.dbg	line,	"include\routines_LEVELS.c", 2277; spr_set(player_id);
10034                        		__ld.umq	_player_id
         01:D4CC  AD 15 23   			lda	_player_id
10035                        		__call		_spr_set.1
         01:D4CF  20 DD E7   			call	_spr_set.1
10036                        	
10037                        		.dbg	line,	"include\routines_LEVELS.c", 2278; spr_pattern(PLAYER_CROUCH_VRAM_ADR);
10038                        		__ld.wi		7168
         01:D4D2  62         			cla
         01:D4D3  A0 1C      			ldy.h	#7168
10039                        		__call		_spr_pattern.1
         01:D4D5  20 26 E8   			call	_spr_pattern.1
10040                        	
10041                        		.dbg	line,	"include\routines_LEVELS.c", 2280; spr_set(weapon_id);
10042                        		__ld.umq	_weapon_id
         01:D4D8  AD 23 23   			lda	_weapon_id
10043                        		__call		_spr_set.1
         01:D4DB  20 DD E7   			call	_spr_set.1
10044                        	
10045                        		.dbg	line,	"include\routines_LEVELS.c", 2281; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
10046                        		__ld.wi		31808
         01:D4DE  A9 40      			lda.l	#31808
         01:D4E0  A0 7C      			ldy.h	#31808
10047                        		__call		_spr_pattern.1
         01:D4E2  20 26 E8   			call	_spr_pattern.1
10048                        	
10049                        		.dbg	line,	"include\routines_LEVELS.c", 2282; 
10050                        	
10051                        		.dbg	line,	"include\routines_LEVELS.c", 2283; if(player_axis == AXIS_RIGHT)
10052                        		__not.um	_player_axis
         01:D4E5  AD 17 23   			lda	_player_axis
         01:D4E8  18         			clc
         01:D4E9  D0 01      			bne	!+
         01:D4EB  38         			sec
         01:D4EC             	!:
10053                        		__bfalse	.LL410
         01:D4EC  90 11      			bcc	.LL410
10054                        	
10055                        		.dbg	line,	"include\routines_LEVELS.c", 2284; {
10056                        	
10057                        		.dbg	line,	"include\routines_LEVELS.c", 2285; spr_x(player_pos_x-1);
10058                        		__ld.wm		_player_pos_x
         01:D4EE  AD D4 24   			lda.l	_player_pos_x
         01:D4F1  AC D5 24   			ldy.h	_player_pos_x
10059                        		__sub.wi	1
         01:D4F4  38         			sec
         01:D4F5  E9 01      			sbc.l	#1
         01:D4F7  B0 01      			bcs	!+
         01:D4F9  88         			dey
         01:D4FA             	!:
10060                        		__call		_spr_x.1
         01:D4FA  20 0A E8   			call	_spr_x.1
10061                        	
10062                        		.dbg	line,	"include\routines_LEVELS.c", 2286; }
10063                        	
10064                        		.dbg	line,	"include\routines_LEVELS.c", 2288; else
10065                        		__bra		.LL411
         01:D4FD  80 0F      			bra	.LL411
10066    01:D4FF             	.LL410:
10067                        	
10068                        		.dbg	line,	"include\routines_LEVELS.c", 2289; {
10069                        	
10070                        		.dbg	line,	"include\routines_LEVELS.c", 2290; spr_x(player_pos_x+17);
10071                        		__ld.wm		_player_pos_x
         01:D4FF  AD D4 24   			lda.l	_player_pos_x
         01:D502  AC D5 24   			ldy.h	_player_pos_x
10072                        		__add.wi	17
         01:D505  18         			clc
         01:D506  69 11      			adc.l	#17
         01:D508  90 01      			bcc	!+
         01:D50A  C8         			iny
         01:D50B             	!:
10073                        		__call		_spr_x.1
         01:D50B  20 0A E8   			call	_spr_x.1
10074                        	
10075                        		.dbg	line,	"include\routines_LEVELS.c", 2291; }
10076    01:D50E             	.LL411:
10077                        	
10078                        		.dbg	line,	"include\routines_LEVELS.c", 2293; spr_y(player_pos_y+18);
10079                        		__ld.wm		_player_pos_y
         01:D50E  AD D6 24   			lda.l	_player_pos_y
         01:D511  AC D7 24   			ldy.h	_player_pos_y
10080                        		__add.wi	18
         01:D514  18         			clc
         01:D515  69 12      			adc.l	#18
         01:D517  90 01      			bcc	!+
         01:D519  C8         			iny
         01:D51A             	!:
10081                        		__call		_spr_y.1
         01:D51A  20 19 E8   			call	_spr_y.1
10082                        	
10083                        		.dbg	line,	"include\routines_LEVELS.c", 2294; 
10084                        	
10085                        		.dbg	line,	"include\routines_LEVELS.c", 2295; player_counter_anim = 0;
10086                        		__st.umiq	0, _player_counter_anim
         01:D51D  9C 19 23   			stz	_player_counter_anim
10087                        	
10088                        		.dbg	line,	"include\routines_LEVELS.c", 2296; }
10089                        	
10090                        		.dbg	line,	"include\routines_LEVELS.c", 2298; recenter_CAMERA();
10091    01:D520             	.LL409:
10092                        		__call		_recenter_CAMERA
         01:D520  20 63 FF   			call	_recenter_CAMERA
10093                        	
10094                        		.dbg	line,	"include\routines_LEVELS.c", 2299; }
10095                        	
10096                        		.dbg	line,	"include\routines_LEVELS.c", 2302; else if(player_state == STATE_FALL)
10097                        		__bra		.LL412
         01:D523  4C 0B DB   			bra	.LL412
10098    01:D526             	.LL408:
10099                        		__ld.umq	_player_state
         01:D526  AD 16 23   			lda	_player_state
10100                        		__equ_b.uiq	9
         01:D529  C9 09      			cmp	#9
         01:D52B  F0 01      			beq	!+
         01:D52D  18         			clc
         01:D52E             	!:
10101                        		__bfalse	.LL413
         01:D52E  B0 03 4C 51			bcc	.LL413
         01:D532  D7          
10102                        	
10103                        		.dbg	line,	"include\routines_LEVELS.c", 2303; {
10104                        	
10105                        		.dbg	line,	"include\routines_LEVELS.c", 2304; unsigned char i, camera_y_move;
10106                        	
10107                        		.dbg	line,	"include\routines_LEVELS.c", 2305; i = 1;
10108                        		__st.umiq	1, __update_PLAYER_end - 6  /* i */
         01:D533  A9 01      			lda.l	#1
         01:D535  8D 07 23   			sta	__update_PLAYER_end - 6
10109                        	
10110                        		.dbg	line,	"include\routines_LEVELS.c", 2308; spr_set(player_id);
10111                        		__ld.umq	_player_id
         01:D538  AD 15 23   			lda	_player_id
10112                        		__call		_spr_set.1
         01:D53B  20 DD E7   			call	_spr_set.1
10113                        	
10114                        		.dbg	line,	"include\routines_LEVELS.c", 2311; //--------------------------------------------------------------------------------------//
10115                        	
10116                        		.dbg	line,	"include\routines_LEVELS.c", 2312; //                                        V MOVE                                        //
10117                        	
10118                        		.dbg	line,	"include\routines_LEVELS.c", 2313; //--------------------------------------------------------------------------------------//
10119                        	
10120                        		.dbg	line,	"include\routines_LEVELS.c", 2315; // UPDATE PLAYER Y POSITION //
10121                        	
10122                        		.dbg	line,	"include\routines_LEVELS.c", 2316; player_pos_y += TABLE_PLAYER_FALL[player_index_fall];
10123                        		__ldx.umq	_player_index_fall
         01:D53E  AE 1B 23   			ldx	_player_index_fall
10124                        		__ld.bax	_TABLE_PLAYER_FALL
         01:D541  BD 40 61   			lda	_TABLE_PLAYER_FALL, x
         01:D544  C2         			cly
         01:D545  10 01      			bpl	!+
         01:D547  88         			dey
         01:D548             	!:
10125                        		__add_st.wmq	_player_pos_y
         01:D548  18         			clc
         01:D549  6D D6 24   			adc.l	_player_pos_y
         01:D54C  8D D6 24   			sta.l	_player_pos_y
         01:D54F  98         			tya
         01:D550  6D D7 24   			adc.h	_player_pos_y
         01:D553  8D D7 24   			sta.h	_player_pos_y
10126                        	
10127                        		.dbg	line,	"include\routines_LEVELS.c", 2319; // IF PLAYER GOES BELOW ITS BASE Y POSITION //
10128                        	
10129                        		.dbg	line,	"include\routines_LEVELS.c", 2320; if(player_pos_y >= PLAYER_BASE_Y_POS)
10130                        		__ld.wm		_player_pos_y
         01:D556  AD D6 24   			lda.l	_player_pos_y
         01:D559  AC D7 24   			ldy.h	_player_pos_y
10131                        		__sge_w.wi	128
         01:D55C  C9 80      			cmp.l	#128		; Subtract integer from Y:A.
         01:D55E  98         			tya
         01:D55F  E9 00      			sbc.h	#128
         01:D561  50 02      			bvc	!+
         01:D563  49 80      			eor	#$80		; +ve if Y:A >= integer (signed).
         01:D565  49 80      	!:		eor	#$80
         01:D567  0A         			asl	a
10132                        		__bfalse	.LL414
         01:D568  90 45      			bcc	.LL414
10133                        	
10134                        		.dbg	line,	"include\routines_LEVELS.c", 2321; {
10135                        	
10136                        		.dbg	line,	"include\routines_LEVELS.c", 2322; // THE CAMERA MOVES //
10137                        	
10138                        		.dbg	line,	"include\routines_LEVELS.c", 2323; // CALCULATE HOW MANY PIXELS THE CAMERA HAS TO MOVE DOWN //
10139                        	
10140                        		.dbg	line,	"include\routines_LEVELS.c", 2324; camera_y_move = player_pos_y - PLAYER_BASE_Y_POS;
10141                        		__ld.wm		_player_pos_y
         01:D56A  AD D6 24   			lda.l	_player_pos_y
         01:D56D  AC D7 24   			ldy.h	_player_pos_y
10142                        		__sub.wi	128
         01:D570  38         			sec
         01:D571  E9 80      			sbc.l	#128
         01:D573  B0 01      			bcs	!+
         01:D575  88         			dey
         01:D576             	!:
10143                        		__st.umq	__update_PLAYER_end - 7  /* camera_y_move */
         01:D576  8D 06 23   			sta	__update_PLAYER_end - 7
10144                        	
10145                        		.dbg	line,	"include\routines_LEVELS.c", 2325; sgx_map_pxl_y += camera_y_move;
10146                        		__ld.um		__update_PLAYER_end - 7  /* camera_y_move */
         01:D579  AD 06 23   			lda	__update_PLAYER_end - 7
         01:D57C  C2         			cly
10147                        		__add_st.wmq	_sgx_map_pxl_y
         01:D57D  18         			clc
         01:D57E  6D 92 26   			adc.l	_sgx_map_pxl_y
         01:D581  8D 92 26   			sta.l	_sgx_map_pxl_y
         01:D584  98         			tya
         01:D585  6D 93 26   			adc.h	_sgx_map_pxl_y
         01:D588  8D 93 26   			sta.h	_sgx_map_pxl_y
10148                        	
10149                        		.dbg	line,	"include\routines_LEVELS.c", 2327; // IF THE CAMERA HAS REACHED ITS MAX (LOWEST) POSITION //
10150                        	
10151                        		.dbg	line,	"include\routines_LEVELS.c", 2328; if(sgx_map_pxl_y > camera_max_y_position)
10152                        		__ld.wm		_sgx_map_pxl_y
         01:D58B  AD 92 26   			lda.l	_sgx_map_pxl_y
         01:D58E  AC 93 26   			ldy.h	_sgx_map_pxl_y
10153                        		__ugt_w.wm	_camera_max_y_position
         01:D591  18         			clc			; Subtract memory+1 from Y:A.
         01:D592  ED D8 24   			sbc.l	_camera_max_y_position
         01:D595  98         			tya
         01:D596  ED D9 24   			sbc.h	_camera_max_y_position		; CS if Y:A > memory.
10154                        		__bfalse	.LL415
         01:D599  90 0C      			bcc	.LL415
10155                        	
10156                        		.dbg	line,	"include\routines_LEVELS.c", 2329; {
10157                        	
10158                        		.dbg	line,	"include\routines_LEVELS.c", 2330; // THE CAMERA CAN NOT MOVE LOWER //
10159                        	
10160                        		.dbg	line,	"include\routines_LEVELS.c", 2331; sgx_map_pxl_y = camera_max_y_position;
10161                        		__ld.wm		_camera_max_y_position
         01:D59B  AD D8 24   			lda.l	_camera_max_y_position
         01:D59E  AC D9 24   			ldy.h	_camera_max_y_position
10162                        		__st.wmq	_sgx_map_pxl_y
         01:D5A1  8D 92 26   			sta.l	_sgx_map_pxl_y
         01:D5A4  8C 93 26   			sty.h	_sgx_map_pxl_y
10163                        	
10164                        		.dbg	line,	"include\routines_LEVELS.c", 2332; }
10165                        	
10166                        		.dbg	line,	"include\routines_LEVELS.c", 2334; // THE PLAYER STAYS AT ITS BASE Y POSITION //
10167                        	
10168                        		.dbg	line,	"include\routines_LEVELS.c", 2335; player_pos_y = PLAYER_BASE_Y_POS;
10169    01:D5A7             	.LL415:
10170                        		__st.wmiq	128, _player_pos_y
         01:D5A7  A9 80      			lda.l	#128
         01:D5A9  8D D6 24   			sta.l	_player_pos_y
         01:D5AC  9C D7 24   			stz.h	_player_pos_y
10171                        	
10172                        		.dbg	line,	"include\routines_LEVELS.c", 2336; }
10173                        	
10174                        		.dbg	line,	"include\routines_LEVELS.c", 2339; // UPDATE JUMP INDEX IN THE ARRAY //
10175                        	
10176                        		.dbg	line,	"include\routines_LEVELS.c", 2340; // ARRAY MAX ENTRY : 20//
10177                        	
10178                        		.dbg	line,	"include\routines_LEVELS.c", 2341; if(player_index_fall < 20)
10179    01:D5AF             	.LL414:
10180                        		__ld.umq	_player_index_fall
         01:D5AF  AD 1B 23   			lda	_player_index_fall
10181                        		__ult_b.uiq	20
         01:D5B2  C9 14      			cmp	#20		; Subtract integer from A.
         01:D5B4  6A         			ror	a		; CC if A < integer.
         01:D5B5  49 80      			eor	#$80
         01:D5B7  2A         			rol	a
10182                        		__bfalse	.LL416
         01:D5B8  90 03      			bcc	.LL416
10183                        	
10184                        		.dbg	line,	"include\routines_LEVELS.c", 2342; {
10185                        	
10186                        		.dbg	line,	"include\routines_LEVELS.c", 2343; player_index_fall += 1;
10187                        		__add_st.umiq	1, _player_index_fall
         01:D5BA  EE 1B 23   			inc	_player_index_fall
10188                        	
10189                        		.dbg	line,	"include\routines_LEVELS.c", 2344; }
10190                        	
10191                        		.dbg	line,	"include\routines_LEVELS.c", 2347; check_TILE_DEPTH( 15 , 0);
10192    01:D5BD             	.LL416:
10193                        		__ld.wi		15
         01:D5BD  A9 0F      			lda.l	#15
         01:D5BF  C2         			cly
10194                        		__pusharg.wr
         01:D5C0  A6 8D      			ldx	<__sp
         01:D5C2  CA         			dex
         01:D5C3  CA         			dex
         01:D5C4  95 08      			sta.l	<__stack, x
         01:D5C6  94 09      			sty.h	<__stack, x
         01:D5C8  86 8D      			stx	<__sp
10195                        		__ld.wi		0
         01:D5CA  62         			cla
         01:D5CB  C2         			cly
10196                        		__pusharg.wr
         01:D5CC  A6 8D      			ldx	<__sp
         01:D5CE  CA         			dex
         01:D5CF  CA         			dex
         01:D5D0  95 08      			sta.l	<__stack, x
         01:D5D2  94 09      			sty.h	<__stack, x
         01:D5D4  86 8D      			stx	<__sp
10197                        		__call		_check_TILE_DEPTH
         01:D5D6  20 59 FF   			call	_check_TILE_DEPTH
10198                        	
10199                        		.dbg	line,	"include\routines_LEVELS.c", 2350; if(map_blk_flag == TILE_BG)
10200                        		__ld.umq	_map_blk_flag
         01:D5D9  AD B1 2B   			lda	_map_blk_flag
10201                        		__equ_b.uiq	1
         01:D5DC  C9 01      			cmp	#1
         01:D5DE  F0 01      			beq	!+
         01:D5E0  18         			clc
         01:D5E1             	!:
10202                        		__bfalse	.LL417
         01:D5E1  B0 03 4C 9A			bcc	.LL417
         01:D5E5  D6          
10203                        	
10204                        		.dbg	line,	"include\routines_LEVELS.c", 2351; {
10205                        	
10206                        		.dbg	line,	"include\routines_LEVELS.c", 2352; // CALCULATE HOW MANY PIXELS THE PLAYER MOVED INTO THE GROUND //
10207                        	
10208                        		.dbg	line,	"include\routines_LEVELS.c", 2353; for(i=1; i<11 ; i++ )
10209                        		__st.umiq	1, __update_PLAYER_end - 6  /* i */
         01:D5E6  A9 01      			lda.l	#1
         01:D5E8  8D 07 23   			sta	__update_PLAYER_end - 6
10210    01:D5EB             	.LL418:
10211                        		__ld.umq	__update_PLAYER_end - 6  /* i */
         01:D5EB  AD 07 23   			lda	__update_PLAYER_end - 6
10212                        		__ult_b.uiq	11
         01:D5EE  C9 0B      			cmp	#11		; Subtract integer from A.
         01:D5F0  6A         			ror	a		; CC if A < integer.
         01:D5F1  49 80      			eor	#$80
         01:D5F3  2A         			rol	a
10213                        		__btrue		.LL420
         01:D5F4  B0 07      			bcs	.LL420
10214                        		__bra		.LL421
         01:D5F6  80 7D      			bra	.LL421
10215    01:D5F8             	.LL419:
10216                        		__inc.umq	__update_PLAYER_end - 6  /* i */
         01:D5F8  EE 07 23   			inc	__update_PLAYER_end - 6
10217                        		__bra		.LL418
         01:D5FB  80 EE      			bra	.LL418
10218    01:D5FD             	.LL420:
10219                        	
10220                        		.dbg	line,	"include\routines_LEVELS.c", 2354; {
10221                        	
10222                        		.dbg	line,	"include\routines_LEVELS.c", 2355; check_TILE_DEPTH( 15 , i);//20
10223                        		__ld.wi		15
         01:D5FD  A9 0F      			lda.l	#15
         01:D5FF  C2         			cly
10224                        		__pusharg.wr
         01:D600  A6 8D      			ldx	<__sp
         01:D602  CA         			dex
         01:D603  CA         			dex
         01:D604  95 08      			sta.l	<__stack, x
         01:D606  94 09      			sty.h	<__stack, x
         01:D608  86 8D      			stx	<__sp
10225                        		__ld.um		__update_PLAYER_end - 6  /* i */
         01:D60A  AD 07 23   			lda	__update_PLAYER_end - 6
         01:D60D  C2         			cly
10226                        		__pusharg.wr
         01:D60E  A6 8D      			ldx	<__sp
         01:D610  CA         			dex
         01:D611  CA         			dex
         01:D612  95 08      			sta.l	<__stack, x
         01:D614  94 09      			sty.h	<__stack, x
         01:D616  86 8D      			stx	<__sp
10227                        		__call		_check_TILE_DEPTH
         01:D618  20 59 FF   			call	_check_TILE_DEPTH
10228                        	
10229                        		.dbg	line,	"include\routines_LEVELS.c", 2358; if(map_blk_flag == TILE_EMPTY)
10230                        		__not.um	_map_blk_flag
         01:D61B  AD B1 2B   			lda	_map_blk_flag
         01:D61E  18         			clc
         01:D61F  D0 01      			bne	!+
         01:D621  38         			sec
         01:D622             	!:
10231                        		__bfalse	.LL422
         01:D622  90 D4      			bcc	.LL422
10232                        	
10233                        		.dbg	line,	"include\routines_LEVELS.c", 2359; {
10234                        	
10235                        		.dbg	line,	"include\routines_LEVELS.c", 2360; if(player_pos_y != PLAYER_BASE_Y_POS)
10236                        		__ld.wm		_player_pos_y
         01:D624  AD D6 24   			lda.l	_player_pos_y
         01:D627  AC D7 24   			ldy.h	_player_pos_y
10237                        		__neq_w.wi	128
         01:D62A  38         			sec
         01:D62B  49 80      			eor.l	#128
         01:D62D  D0 06      			bne	!+
         01:D62F  98         			tya
         01:D630  49 00      			eor.h	#128
         01:D632  D0 01      			bne	!+
         01:D634  18         			clc
         01:D635             	!:
10238                        		__bfalse	.LL423
         01:D635  90 1E      			bcc	.LL423
10239                        	
10240                        		.dbg	line,	"include\routines_LEVELS.c", 2361; {
10241                        	
10242                        		.dbg	line,	"include\routines_LEVELS.c", 2362; player_pos_y -= (i - 1);
10243                        		__ld.um		__update_PLAYER_end - 6  /* i */
         01:D637  AD 07 23   			lda	__update_PLAYER_end - 6
         01:D63A  C2         			cly
10244                        		__sub.wi	1
         01:D63B  38         			sec
         01:D63C  E9 01      			sbc.l	#1
         01:D63E  B0 01      			bcs	!+
         01:D640  88         			dey
         01:D641             	!:
10245                        		__isub_st.wmq	_player_pos_y
         01:D641  38         			sec
         01:D642  49 FF      			eor	#$FF
         01:D644  6D D6 24   			adc.l	_player_pos_y
         01:D647  8D D6 24   			sta.l	_player_pos_y
         01:D64A  98         			tya
         01:D64B  49 FF      			eor	#$FF
         01:D64D  6D D7 24   			adc.h	_player_pos_y
         01:D650  8D D7 24   			sta.h	_player_pos_y
10246                        	
10247                        		.dbg	line,	"include\routines_LEVELS.c", 2363; }
10248                        	
10249                        		.dbg	line,	"include\routines_LEVELS.c", 2365; else
10250                        		__bra		.LL424
         01:D653  80 20      			bra	.LL424
10251    01:D655             	.LL423:
10252                        	
10253                        		.dbg	line,	"include\routines_LEVELS.c", 2366; {
10254                        	
10255                        		.dbg	line,	"include\routines_LEVELS.c", 2367; sgx_map_pxl_y -= (i - 1);
10256                        		__ld.um		__update_PLAYER_end - 6  /* i */
         01:D655  AD 07 23   			lda	__update_PLAYER_end - 6
         01:D658  C2         			cly
10257                        		__sub.wi	1
         01:D659  38         			sec
         01:D65A  E9 01      			sbc.l	#1
         01:D65C  B0 01      			bcs	!+
         01:D65E  88         			dey
         01:D65F             	!:
10258                        		__isub_st.wmq	_sgx_map_pxl_y
         01:D65F  38         			sec
         01:D660  49 FF      			eor	#$FF
         01:D662  6D 92 26   			adc.l	_sgx_map_pxl_y
         01:D665  8D 92 26   			sta.l	_sgx_map_pxl_y
         01:D668  98         			tya
         01:D669  49 FF      			eor	#$FF
         01:D66B  6D 93 26   			adc.h	_sgx_map_pxl_y
         01:D66E  8D 93 26   			sta.h	_sgx_map_pxl_y
10259                        	
10260                        		.dbg	line,	"include\routines_LEVELS.c", 2368; }
10261    01:D671             	.LL424	.alias		.LL421
10262                        	
10263                        		.dbg	line,	"include\routines_LEVELS.c", 2371; break;
10264                        		__bra		.LL421
         01:D671  80 02      			bra	.LL421
10265                        	
10266                        		.dbg	line,	"include\routines_LEVELS.c", 2372; }
10267                        	
10268                        		.dbg	line,	"include\routines_LEVELS.c", 2374; }
10269    01:D673             	.LL422	.alias		.LL419
10270                        		__bra		.LL419
         01:D673  80 83      			bra	.LL419
10271    01:D675             	.LL421:
10272                        	
10273                        		.dbg	line,	"include\routines_LEVELS.c", 2376; spr_y(player_pos_y);
10274                        		__ld.wm		_player_pos_y
         01:D675  AD D6 24   			lda.l	_player_pos_y
         01:D678  AC D7 24   			ldy.h	_player_pos_y
10275                        		__call		_spr_y.1
         01:D67B  20 19 E8   			call	_spr_y.1
10276                        	
10277                        		.dbg	line,	"include\routines_LEVELS.c", 2378; player_counter_anim = 1;
10278                        		__st.umiq	1, _player_counter_anim
         01:D67E  A9 01      			lda.l	#1
         01:D680  8D 19 23   			sta	_player_counter_anim
10279                        	
10280                        		.dbg	line,	"include\routines_LEVELS.c", 2379; player_index_jump = 0;
10281                        		__st.umiq	0, _player_index_jump
         01:D683  9C 1A 23   			stz	_player_index_jump
10282                        	
10283                        		.dbg	line,	"include\routines_LEVELS.c", 2380; player_index_fall = 0;
10284                        		__st.umiq	0, _player_index_fall
         01:D686  9C 1B 23   			stz	_player_index_fall
10285                        	
10286                        		.dbg	line,	"include\routines_LEVELS.c", 2381; jump_ladder = FALSE;
10287                        		__st.umiq	0, _jump_ladder
         01:D689  9C 1F 23   			stz	_jump_ladder
10288                        	
10289                        		.dbg	line,	"include\routines_LEVELS.c", 2382; fall_ladder = FALSE;
10290                        		__st.umiq	0, _fall_ladder
         01:D68C  9C 21 23   			stz	_fall_ladder
10291                        	
10292                        		.dbg	line,	"include\routines_LEVELS.c", 2383; jump_max_index = 34;
10293                        		__st.umiq	34, _jump_max_index
         01:D68F  A9 22      			lda.l	#34
         01:D691  8D 20 23   			sta	_jump_max_index
10294                        	
10295                        		.dbg	line,	"include\routines_LEVELS.c", 2384; player_state = STATE_IDLE;
10296                        		__st.umiq	0, _player_state
         01:D694  9C 16 23   			stz	_player_state
10297                        	
10298                        		.dbg	line,	"include\routines_LEVELS.c", 2385; return;
10299                        		__bra		.LL230
         01:D697  4C 0B DB   			bra	.LL230
10300                        	
10301                        		.dbg	line,	"include\routines_LEVELS.c", 2386; }
10302                        	
10303                        		.dbg	line,	"include\routines_LEVELS.c", 2389; check_BG( 16 , 16 );
10304    01:D69A             	.LL417:
10305                        		__ld.wi		16
         01:D69A  A9 10      			lda.l	#16
         01:D69C  C2         			cly
10306                        		__pusharg.wr
         01:D69D  A6 8D      			ldx	<__sp
         01:D69F  CA         			dex
         01:D6A0  CA         			dex
         01:D6A1  95 08      			sta.l	<__stack, x
         01:D6A3  94 09      			sty.h	<__stack, x
         01:D6A5  86 8D      			stx	<__sp
10307                        		__ld.wi		16
         01:D6A7  A9 10      			lda.l	#16
         01:D6A9  C2         			cly
10308                        		__pusharg.wr
         01:D6AA  A6 8D      			ldx	<__sp
         01:D6AC  CA         			dex
         01:D6AD  CA         			dex
         01:D6AE  95 08      			sta.l	<__stack, x
         01:D6B0  94 09      			sty.h	<__stack, x
         01:D6B2  86 8D      			stx	<__sp
10309                        		__call		_check_BG
         01:D6B4  20 6D FF   			call	_check_BG
10310                        	
10311                        		.dbg	line,	"include\routines_LEVELS.c", 2391; // IF PLAYER HITS THE LADDER //
10312                        	
10313                        		.dbg	line,	"include\routines_LEVELS.c", 2392; if(map_blk_flag == TILE_LADDER)
10314                        		__ld.umq	_map_blk_flag
         01:D6B7  AD B1 2B   			lda	_map_blk_flag
10315                        		__equ_b.uiq	2
         01:D6BA  C9 02      			cmp	#2
         01:D6BC  F0 01      			beq	!+
         01:D6BE  18         			clc
         01:D6BF             	!:
10316                        		__bfalse	.LL425
         01:D6BF  90 6F      			bcc	.LL425
10317                        	
10318                        		.dbg	line,	"include\routines_LEVELS.c", 2393; {
10319                        	
10320                        		.dbg	line,	"include\routines_LEVELS.c", 2394; // CAMERA GOES 8 PX BACKWARD //
10321                        	
10322                        		.dbg	line,	"include\routines_LEVELS.c", 2395; sgx_map_pxl_x = ( (sgx_map_pxl_x >> 3) << 3 );
10323                        		__ld.wm		_sgx_map_pxl_x
         01:D6C1  AD 90 26   			lda.l	_sgx_map_pxl_x
         01:D6C4  AC 91 26   			ldy.h	_sgx_map_pxl_x
10324                        		__lsr.wi	3
         01:D6C7  84 00      			sty	__temp
         01:D6C9  20 3A E2   			jsr	lsrw3
10325                        		__asl.wi	3
         01:D6CC  84 00      			sty	__temp
         01:D6CE  20 D7 E1   			jsr	aslw3
10326                        		__st.wmq	_sgx_map_pxl_x
         01:D6D1  8D 90 26   			sta.l	_sgx_map_pxl_x
         01:D6D4  8C 91 26   			sty.h	_sgx_map_pxl_x
10327                        	
10328                        		.dbg	line,	"include\routines_LEVELS.c", 2397; // SO WE UPDATE THE MAP //
10329                        	
10330                        		.dbg	line,	"include\routines_LEVELS.c", 2398; sgx_scroll_map();
10331                        		__call		_sgx_scroll_map
         01:D6D7  20 81 FF   			call	_sgx_scroll_map
10332                        	
10333                        		.dbg	line,	"include\routines_LEVELS.c", 2400; // CHECK IF THE PLAYER STANDS RIGHT TO THE LADDER //
10334                        	
10335                        		.dbg	line,	"include\routines_LEVELS.c", 2401; check_BG( 31 , 16 );
10336                        		__ld.wi		31
         01:D6DA  A9 1F      			lda.l	#31
         01:D6DC  C2         			cly
10337                        		__pusharg.wr
         01:D6DD  A6 8D      			ldx	<__sp
         01:D6DF  CA         			dex
         01:D6E0  CA         			dex
         01:D6E1  95 08      			sta.l	<__stack, x
         01:D6E3  94 09      			sty.h	<__stack, x
         01:D6E5  86 8D      			stx	<__sp
10338                        		__ld.wi		16
         01:D6E7  A9 10      			lda.l	#16
         01:D6E9  C2         			cly
10339                        		__pusharg.wr
         01:D6EA  A6 8D      			ldx	<__sp
         01:D6EC  CA         			dex
         01:D6ED  CA         			dex
         01:D6EE  95 08      			sta.l	<__stack, x
         01:D6F0  94 09      			sty.h	<__stack, x
         01:D6F2  86 8D      			stx	<__sp
10340                        		__call		_check_BG
         01:D6F4  20 6D FF   			call	_check_BG
10341                        	
10342                        		.dbg	line,	"include\routines_LEVELS.c", 2403; if(map_blk_flag == TILE_LADDER)
10343                        		__ld.umq	_map_blk_flag
         01:D6F7  AD B1 2B   			lda	_map_blk_flag
10344                        		__equ_b.uiq	2
         01:D6FA  C9 02      			cmp	#2
         01:D6FC  F0 01      			beq	!+
         01:D6FE  18         			clc
         01:D6FF             	!:
10345                        		__bfalse	.LL426
         01:D6FF  90 0E      			bcc	.LL426
10346                        	
10347                        		.dbg	line,	"include\routines_LEVELS.c", 2404; {
10348                        	
10349                        		.dbg	line,	"include\routines_LEVELS.c", 2405; sgx_map_pxl_x += 8;
10350                        		__add_st.wmiq	8, _sgx_map_pxl_x
         01:D701  18         			clc
         01:D702  AD 90 26   			lda.l	_sgx_map_pxl_x
         01:D705  69 08      			adc.l	#8
         01:D707  8D 90 26   			sta.l	_sgx_map_pxl_x
         01:D70A  90 03      			bcc	!+
         01:D70C  EE 91 26   			inc.h	_sgx_map_pxl_x
         01:D70F             	!:
10351                        	
10352                        		.dbg	line,	"include\routines_LEVELS.c", 2406; }
10353                        	
10354                        		.dbg	line,	"include\routines_LEVELS.c", 2408; spr_pattern(PLAYER_HANG_VRAM_ADR);
10355    01:D70F             	.LL426:
10356                        		__ld.wi		7424
         01:D70F  62         			cla
         01:D710  A0 1D      			ldy.h	#7424
10357                        		__call		_spr_pattern.1
         01:D712  20 26 E8   			call	_spr_pattern.1
10358                        	
10359                        		.dbg	line,	"include\routines_LEVELS.c", 2409; player_counter_anim = 0;//1
10360                        		__st.umiq	0, _player_counter_anim
         01:D715  9C 19 23   			stz	_player_counter_anim
10361                        	
10362                        		.dbg	line,	"include\routines_LEVELS.c", 2410; player_index_jump = 0;
10363                        		__st.umiq	0, _player_index_jump
         01:D718  9C 1A 23   			stz	_player_index_jump
10364                        	
10365                        		.dbg	line,	"include\routines_LEVELS.c", 2411; player_index_fall = 0;
10366                        		__st.umiq	0, _player_index_fall
         01:D71B  9C 1B 23   			stz	_player_index_fall
10367                        	
10368                        		.dbg	line,	"include\routines_LEVELS.c", 2412; jump_ladder = TRUE;
10369                        		__st.umiq	1, _jump_ladder
         01:D71E  A9 01      			lda.l	#1
         01:D720  8D 1F 23   			sta	_jump_ladder
10370                        	
10371                        		.dbg	line,	"include\routines_LEVELS.c", 2413; jump_max_index = 29;
10372                        		__st.umiq	29, _jump_max_index
         01:D723  A9 1D      			lda.l	#29
         01:D725  8D 20 23   			sta	_jump_max_index
10373                        	
10374                        		.dbg	line,	"include\routines_LEVELS.c", 2414; player_state = STATE_HANG;
10375                        		__st.umiq	10, _player_state
         01:D728  A9 0A      			lda.l	#10
         01:D72A  8D 16 23   			sta	_player_state
10376                        	
10377                        		.dbg	line,	"include\routines_LEVELS.c", 2415; return;
10378                        		__bra		.LL230
         01:D72D  4C 0B DB   			bra	.LL230
10379                        	
10380                        		.dbg	line,	"include\routines_LEVELS.c", 2416; }
10381                        	
10382                        		.dbg	line,	"include\routines_LEVELS.c", 2418; spr_y(player_pos_y);
10383    01:D730             	.LL425:
10384                        		__ld.wm		_player_pos_y
         01:D730  AD D6 24   			lda.l	_player_pos_y
         01:D733  AC D7 24   			ldy.h	_player_pos_y
10385                        		__call		_spr_y.1
         01:D736  20 19 E8   			call	_spr_y.1
10386                        	
10387                        		.dbg	line,	"include\routines_LEVELS.c", 2420; spr_set(weapon_id);
10388                        		__ld.umq	_weapon_id
         01:D739  AD 23 23   			lda	_weapon_id
10389                        		__call		_spr_set.1
         01:D73C  20 DD E7   			call	_spr_set.1
10390                        	
10391                        		.dbg	line,	"include\routines_LEVELS.c", 2421; spr_y(player_pos_y+8);
10392                        		__ld.wm		_player_pos_y
         01:D73F  AD D6 24   			lda.l	_player_pos_y
         01:D742  AC D7 24   			ldy.h	_player_pos_y
10393                        		__add.wi	8
         01:D745  18         			clc
         01:D746  69 08      			adc.l	#8
         01:D748  90 01      			bcc	!+
         01:D74A  C8         			iny
         01:D74B             	!:
10394                        		__call		_spr_y.1
         01:D74B  20 19 E8   			call	_spr_y.1
10395                        	
10396                        		.dbg	line,	"include\routines_LEVELS.c", 2423; }
10397                        	
10398                        		.dbg	line,	"include\routines_LEVELS.c", 2426; else if(player_state == STATE_HANG)
10399                        		__bra		.LL427
         01:D74E  4C 0B DB   			bra	.LL427
10400    01:D751             	.LL413:
10401                        		__ld.umq	_player_state
         01:D751  AD 16 23   			lda	_player_state
10402                        		__equ_b.uiq	10
         01:D754  C9 0A      			cmp	#10
         01:D756  F0 01      			beq	!+
         01:D758  18         			clc
         01:D759             	!:
10403                        		__bfalse	.LL428
         01:D759  90 5A      			bcc	.LL428
10404                        	
10405                        		.dbg	line,	"include\routines_LEVELS.c", 2427; {
10406                        	
10407                        		.dbg	line,	"include\routines_LEVELS.c", 2428; recenter_CAMERA();
10408                        		__call		_recenter_CAMERA
         01:D75B  20 63 FF   			call	_recenter_CAMERA
10409                        	
10410                        		.dbg	line,	"include\routines_LEVELS.c", 2430; if(player_attack == FALSE)
10411                        		__not.um	_player_attack
         01:D75E  AD 1E 23   			lda	_player_attack
         01:D761  18         			clc
         01:D762  D0 01      			bne	!+
         01:D764  38         			sec
         01:D765             	!:
10412                        		__bfalse	.LL429
         01:D765  B0 03 4C 0B			bcc	.LL429
         01:D769  DB          
10413                        	
10414                        		.dbg	line,	"include\routines_LEVELS.c", 2431; {
10415                        	
10416                        		.dbg	line,	"include\routines_LEVELS.c", 2432; spr_set(weapon_id);
10417                        		__ld.umq	_weapon_id
         01:D76A  AD 23 23   			lda	_weapon_id
10418                        		__call		_spr_set.1
         01:D76D  20 DD E7   			call	_spr_set.1
10419                        	
10420                        		.dbg	line,	"include\routines_LEVELS.c", 2433; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
10421                        		__ld.wi		31808
         01:D770  A9 40      			lda.l	#31808
         01:D772  A0 7C      			ldy.h	#31808
10422                        		__call		_spr_pattern.1
         01:D774  20 26 E8   			call	_spr_pattern.1
10423                        	
10424                        		.dbg	line,	"include\routines_LEVELS.c", 2434; spr_y(player_pos_y+5);
10425                        		__ld.wm		_player_pos_y
         01:D777  AD D6 24   			lda.l	_player_pos_y
         01:D77A  AC D7 24   			ldy.h	_player_pos_y
10426                        		__add.wi	5
         01:D77D  18         			clc
         01:D77E  69 05      			adc.l	#5
         01:D780  90 01      			bcc	!+
         01:D782  C8         			iny
         01:D783             	!:
10427                        		__call		_spr_y.1
         01:D783  20 19 E8   			call	_spr_y.1
10428                        	
10429                        		.dbg	line,	"include\routines_LEVELS.c", 2436; if(player_axis == AXIS_RIGHT)
10430                        		__not.um	_player_axis
         01:D786  AD 17 23   			lda	_player_axis
         01:D789  18         			clc
         01:D78A  D0 01      			bne	!+
         01:D78C  38         			sec
         01:D78D             	!:
10431                        		__bfalse	.LL430
         01:D78D  90 11      			bcc	.LL430
10432                        	
10433                        		.dbg	line,	"include\routines_LEVELS.c", 2437; {
10434                        	
10435                        		.dbg	line,	"include\routines_LEVELS.c", 2438; spr_x(player_pos_x+17);
10436                        		__ld.wm		_player_pos_x
         01:D78F  AD D4 24   			lda.l	_player_pos_x
         01:D792  AC D5 24   			ldy.h	_player_pos_x
10437                        		__add.wi	17
         01:D795  18         			clc
         01:D796  69 11      			adc.l	#17
         01:D798  90 01      			bcc	!+
         01:D79A  C8         			iny
         01:D79B             	!:
10438                        		__call		_spr_x.1
         01:D79B  20 0A E8   			call	_spr_x.1
10439                        	
10440                        		.dbg	line,	"include\routines_LEVELS.c", 2439; }
10441                        	
10442                        		.dbg	line,	"include\routines_LEVELS.c", 2441; else
10443                        		__bra		.LL431
         01:D79E  80 0F      			bra	.LL431
10444    01:D7A0             	.LL430:
10445                        	
10446                        		.dbg	line,	"include\routines_LEVELS.c", 2442; {
10447                        	
10448                        		.dbg	line,	"include\routines_LEVELS.c", 2443; spr_x(player_pos_x-2);
10449                        		__ld.wm		_player_pos_x
         01:D7A0  AD D4 24   			lda.l	_player_pos_x
         01:D7A3  AC D5 24   			ldy.h	_player_pos_x
10450                        		__sub.wi	2
         01:D7A6  38         			sec
         01:D7A7  E9 02      			sbc.l	#2
         01:D7A9  B0 01      			bcs	!+
         01:D7AB  88         			dey
         01:D7AC             	!:
10451                        		__call		_spr_x.1
         01:D7AC  20 0A E8   			call	_spr_x.1
10452                        	
10453                        		.dbg	line,	"include\routines_LEVELS.c", 2444; }
10454    01:D7AF             	.LL431:
10455                        	
10456                        		.dbg	line,	"include\routines_LEVELS.c", 2445; 
10457                        	
10458                        		.dbg	line,	"include\routines_LEVELS.c", 2446; player_counter_anim = 0;
10459                        		__st.umiq	0, _player_counter_anim
         01:D7AF  9C 19 23   			stz	_player_counter_anim
10460                        	
10461                        		.dbg	line,	"include\routines_LEVELS.c", 2447; }
10462                        	
10463                        		.dbg	line,	"include\routines_LEVELS.c", 2448; }
10464    01:D7B2             	.LL429	.alias		.LL432
10465                        	
10466                        		.dbg	line,	"include\routines_LEVELS.c", 2451; else if(player_state == STATE_CLIMB_UP)
10467                        		__bra		.LL432
         01:D7B2  4C 0B DB   			bra	.LL432
10468    01:D7B5             	.LL428:
10469                        		__ld.umq	_player_state
         01:D7B5  AD 16 23   			lda	_player_state
10470                        		__equ_b.uiq	11
         01:D7B8  C9 0B      			cmp	#11
         01:D7BA  F0 01      			beq	!+
         01:D7BC  18         			clc
         01:D7BD             	!:
10471                        		__bfalse	.LL433
         01:D7BD  B0 03 4C 97			bcc	.LL433
         01:D7C1  D8          
10472                        	
10473                        		.dbg	line,	"include\routines_LEVELS.c", 2452; {
10474                        	
10475                        		.dbg	line,	"include\routines_LEVELS.c", 2453; if(player_counter_anim == 0)
10476                        		__not.um	_player_counter_anim
         01:D7C2  AD 19 23   			lda	_player_counter_anim
         01:D7C5  18         			clc
         01:D7C6  D0 01      			bne	!+
         01:D7C8  38         			sec
         01:D7C9             	!:
10477                        		__bfalse	.LL434
         01:D7C9  90 0F      			bcc	.LL434
10478                        	
10479                        		.dbg	line,	"include\routines_LEVELS.c", 2454; {
10480                        	
10481                        		.dbg	line,	"include\routines_LEVELS.c", 2455; spr_set(player_id);
10482                        		__ld.umq	_player_id
         01:D7CB  AD 15 23   			lda	_player_id
10483                        		__call		_spr_set.1
         01:D7CE  20 DD E7   			call	_spr_set.1
10484                        	
10485                        		.dbg	line,	"include\routines_LEVELS.c", 2456; spr_pattern(PLAYER_CLIMB_1_VRAM_ADR); 
10486                        		__ld.wi		7680
         01:D7D1  62         			cla
         01:D7D2  A0 1E      			ldy.h	#7680
10487                        		__call		_spr_pattern.1
         01:D7D4  20 26 E8   			call	_spr_pattern.1
10488                        	
10489                        		.dbg	line,	"include\routines_LEVELS.c", 2457; }
10490                        	
10491                        		.dbg	line,	"include\routines_LEVELS.c", 2459; else if(player_counter_anim == 2)
10492                        		__bra		.LL435
         01:D7D7  4C 81 D8   			bra	.LL435
10493    01:D7DA             	.LL434:
10494                        		__ld.umq	_player_counter_anim
         01:D7DA  AD 19 23   			lda	_player_counter_anim
10495                        		__equ_b.uiq	2
         01:D7DD  C9 02      			cmp	#2
         01:D7DF  F0 01      			beq	!+
         01:D7E1  18         			clc
         01:D7E2             	!:
10496                        		__bfalse	.LL436
         01:D7E2  90 0F      			bcc	.LL436
10497                        	
10498                        		.dbg	line,	"include\routines_LEVELS.c", 2460; {
10499                        	
10500                        		.dbg	line,	"include\routines_LEVELS.c", 2461; spr_set(player_id);
10501                        		__ld.umq	_player_id
         01:D7E4  AD 15 23   			lda	_player_id
10502                        		__call		_spr_set.1
         01:D7E7  20 DD E7   			call	_spr_set.1
10503                        	
10504                        		.dbg	line,	"include\routines_LEVELS.c", 2462; spr_pattern(PLAYER_CLIMB_2_VRAM_ADR); 
10505                        		__ld.wi		7936
         01:D7EA  62         			cla
         01:D7EB  A0 1F      			ldy.h	#7936
10506                        		__call		_spr_pattern.1
         01:D7ED  20 26 E8   			call	_spr_pattern.1
10507                        	
10508                        		.dbg	line,	"include\routines_LEVELS.c", 2463; }
10509                        	
10510                        		.dbg	line,	"include\routines_LEVELS.c", 2465; else if(player_counter_anim == 5)
10511                        		__bra		.LL437
         01:D7F0  4C 81 D8   			bra	.LL437
10512    01:D7F3             	.LL436:
10513                        		__ld.umq	_player_counter_anim
         01:D7F3  AD 19 23   			lda	_player_counter_anim
10514                        		__equ_b.uiq	5
         01:D7F6  C9 05      			cmp	#5
         01:D7F8  F0 01      			beq	!+
         01:D7FA  18         			clc
         01:D7FB             	!:
10515                        		__bfalse	.LL438
         01:D7FB  90 0E      			bcc	.LL438
10516                        	
10517                        		.dbg	line,	"include\routines_LEVELS.c", 2466; {
10518                        	
10519                        		.dbg	line,	"include\routines_LEVELS.c", 2467; spr_set(player_id);
10520                        		__ld.umq	_player_id
         01:D7FD  AD 15 23   			lda	_player_id
10521                        		__call		_spr_set.1
         01:D800  20 DD E7   			call	_spr_set.1
10522                        	
10523                        		.dbg	line,	"include\routines_LEVELS.c", 2468; spr_pattern(PLAYER_CLIMB_3_VRAM_ADR); 
10524                        		__ld.wi		8192
         01:D803  62         			cla
         01:D804  A0 20      			ldy.h	#8192
10525                        		__call		_spr_pattern.1
         01:D806  20 26 E8   			call	_spr_pattern.1
10526                        	
10527                        		.dbg	line,	"include\routines_LEVELS.c", 2469; }
10528                        	
10529                        		.dbg	line,	"include\routines_LEVELS.c", 2471; else if(player_counter_anim == 8)
10530                        		__bra		.LL439
         01:D809  80 76      			bra	.LL439
10531    01:D80B             	.LL438:
10532                        		__ld.umq	_player_counter_anim
         01:D80B  AD 19 23   			lda	_player_counter_anim
10533                        		__equ_b.uiq	8
         01:D80E  C9 08      			cmp	#8
         01:D810  F0 01      			beq	!+
         01:D812  18         			clc
         01:D813             	!:
10534                        		__bfalse	.LL440
         01:D813  90 0E      			bcc	.LL440
10535                        	
10536                        		.dbg	line,	"include\routines_LEVELS.c", 2472; {
10537                        	
10538                        		.dbg	line,	"include\routines_LEVELS.c", 2473; spr_set(player_id);
10539                        		__ld.umq	_player_id
         01:D815  AD 15 23   			lda	_player_id
10540                        		__call		_spr_set.1
         01:D818  20 DD E7   			call	_spr_set.1
10541                        	
10542                        		.dbg	line,	"include\routines_LEVELS.c", 2474; spr_pattern(PLAYER_CLIMB_4_VRAM_ADR); 
10543                        		__ld.wi		8448
         01:D81B  62         			cla
         01:D81C  A0 21      			ldy.h	#8448
10544                        		__call		_spr_pattern.1
         01:D81E  20 26 E8   			call	_spr_pattern.1
10545                        	
10546                        		.dbg	line,	"include\routines_LEVELS.c", 2475; }
10547                        	
10548                        		.dbg	line,	"include\routines_LEVELS.c", 2477; else if(player_counter_anim == 11)
10549                        		__bra		.LL441
         01:D821  80 5E      			bra	.LL441
10550    01:D823             	.LL440:
10551                        		__ld.umq	_player_counter_anim
         01:D823  AD 19 23   			lda	_player_counter_anim
10552                        		__equ_b.uiq	11
         01:D826  C9 0B      			cmp	#11
         01:D828  F0 01      			beq	!+
         01:D82A  18         			clc
         01:D82B             	!:
10553                        		__bfalse	.LL442
         01:D82B  90 0E      			bcc	.LL442
10554                        	
10555                        		.dbg	line,	"include\routines_LEVELS.c", 2478; {
10556                        	
10557                        		.dbg	line,	"include\routines_LEVELS.c", 2479; spr_set(player_id);
10558                        		__ld.umq	_player_id
         01:D82D  AD 15 23   			lda	_player_id
10559                        		__call		_spr_set.1
         01:D830  20 DD E7   			call	_spr_set.1
10560                        	
10561                        		.dbg	line,	"include\routines_LEVELS.c", 2480; spr_pattern(PLAYER_CLIMB_5_VRAM_ADR); 
10562                        		__ld.wi		8704
         01:D833  62         			cla
         01:D834  A0 22      			ldy.h	#8704
10563                        		__call		_spr_pattern.1
         01:D836  20 26 E8   			call	_spr_pattern.1
10564                        	
10565                        		.dbg	line,	"include\routines_LEVELS.c", 2481; }
10566                        	
10567                        		.dbg	line,	"include\routines_LEVELS.c", 2483; else if(player_counter_anim == 14)
10568                        		__bra		.LL443
         01:D839  80 46      			bra	.LL443
10569    01:D83B             	.LL442:
10570                        		__ld.umq	_player_counter_anim
         01:D83B  AD 19 23   			lda	_player_counter_anim
10571                        		__equ_b.uiq	14
         01:D83E  C9 0E      			cmp	#14
         01:D840  F0 01      			beq	!+
         01:D842  18         			clc
         01:D843             	!:
10572                        		__bfalse	.LL444
         01:D843  90 0E      			bcc	.LL444
10573                        	
10574                        		.dbg	line,	"include\routines_LEVELS.c", 2484; {
10575                        	
10576                        		.dbg	line,	"include\routines_LEVELS.c", 2485; spr_set(player_id);
10577                        		__ld.umq	_player_id
         01:D845  AD 15 23   			lda	_player_id
10578                        		__call		_spr_set.1
         01:D848  20 DD E7   			call	_spr_set.1
10579                        	
10580                        		.dbg	line,	"include\routines_LEVELS.c", 2486; spr_pattern(PLAYER_CLIMB_6_VRAM_ADR); 
10581                        		__ld.wi		8960
         01:D84B  62         			cla
         01:D84C  A0 23      			ldy.h	#8960
10582                        		__call		_spr_pattern.1
         01:D84E  20 26 E8   			call	_spr_pattern.1
10583                        	
10584                        		.dbg	line,	"include\routines_LEVELS.c", 2487; }
10585                        	
10586                        		.dbg	line,	"include\routines_LEVELS.c", 2489; else if(player_counter_anim == 17)
10587                        		__bra		.LL445
         01:D851  80 2E      			bra	.LL445
10588    01:D853             	.LL444:
10589                        		__ld.umq	_player_counter_anim
         01:D853  AD 19 23   			lda	_player_counter_anim
10590                        		__equ_b.uiq	17
         01:D856  C9 11      			cmp	#17
         01:D858  F0 01      			beq	!+
         01:D85A  18         			clc
         01:D85B             	!:
10591                        		__bfalse	.LL446
         01:D85B  90 0E      			bcc	.LL446
10592                        	
10593                        		.dbg	line,	"include\routines_LEVELS.c", 2490; {
10594                        	
10595                        		.dbg	line,	"include\routines_LEVELS.c", 2491; spr_set(player_id);
10596                        		__ld.umq	_player_id
         01:D85D  AD 15 23   			lda	_player_id
10597                        		__call		_spr_set.1
         01:D860  20 DD E7   			call	_spr_set.1
10598                        	
10599                        		.dbg	line,	"include\routines_LEVELS.c", 2492; spr_pattern(PLAYER_CLIMB_3_VRAM_ADR); 
10600                        		__ld.wi		8192
         01:D863  62         			cla
         01:D864  A0 20      			ldy.h	#8192
10601                        		__call		_spr_pattern.1
         01:D866  20 26 E8   			call	_spr_pattern.1
10602                        	
10603                        		.dbg	line,	"include\routines_LEVELS.c", 2493; }
10604                        	
10605                        		.dbg	line,	"include\routines_LEVELS.c", 2495; else if(player_counter_anim == 20)
10606                        		__bra		.LL447
         01:D869  80 16      			bra	.LL447
10607    01:D86B             	.LL446:
10608                        		__ld.umq	_player_counter_anim
         01:D86B  AD 19 23   			lda	_player_counter_anim
10609                        		__equ_b.uiq	20
         01:D86E  C9 14      			cmp	#20
         01:D870  F0 01      			beq	!+
         01:D872  18         			clc
         01:D873             	!:
10610                        		__bfalse	.LL448
         01:D873  90 0C      			bcc	.LL448
10611                        	
10612                        		.dbg	line,	"include\routines_LEVELS.c", 2496; {
10613                        	
10614                        		.dbg	line,	"include\routines_LEVELS.c", 2497; spr_set(player_id);
10615                        		__ld.umq	_player_id
         01:D875  AD 15 23   			lda	_player_id
10616                        		__call		_spr_set.1
         01:D878  20 DD E7   			call	_spr_set.1
10617                        	
10618                        		.dbg	line,	"include\routines_LEVELS.c", 2498; spr_pattern(PLAYER_CLIMB_2_VRAM_ADR); 
10619                        		__ld.wi		7936
         01:D87B  62         			cla
         01:D87C  A0 1F      			ldy.h	#7936
10620                        		__call		_spr_pattern.1
         01:D87E  20 26 E8   			call	_spr_pattern.1
10621                        	
10622                        		.dbg	line,	"include\routines_LEVELS.c", 2499; }
10623                        	
10624                        		.dbg	line,	"include\routines_LEVELS.c", 2502; player_counter_anim += 1;
10625    01:D881             	.LL448:
10626    01:D881             	.LL447:
10627    01:D881             	.LL445:
10628    01:D881             	.LL443:
10629    01:D881             	.LL441:
10630    01:D881             	.LL439:
10631    01:D881             	.LL437:
10632    01:D881             	.LL435:
10633                        		__add_st.umiq	1, _player_counter_anim
         01:D881  EE 19 23   			inc	_player_counter_anim
10634                        	
10635                        		.dbg	line,	"include\routines_LEVELS.c", 2504; if(player_counter_anim == 22)
10636                        		__ld.umq	_player_counter_anim
         01:D884  AD 19 23   			lda	_player_counter_anim
10637                        		__equ_b.uiq	22
         01:D887  C9 16      			cmp	#22
         01:D889  F0 01      			beq	!+
         01:D88B  18         			clc
         01:D88C             	!:
10638                        		__bfalse	.LL449
         01:D88C  90 03      			bcc	.LL449
10639                        	
10640                        		.dbg	line,	"include\routines_LEVELS.c", 2505; {
10641                        	
10642                        		.dbg	line,	"include\routines_LEVELS.c", 2506; player_counter_anim = 0;
10643                        		__st.umiq	0, _player_counter_anim
         01:D88E  9C 19 23   			stz	_player_counter_anim
10644                        	
10645                        		.dbg	line,	"include\routines_LEVELS.c", 2507; }
10646                        	
10647                        		.dbg	line,	"include\routines_LEVELS.c", 2509; recenter_CAMERA();
10648    01:D891             	.LL449:
10649                        		__call		_recenter_CAMERA
         01:D891  20 63 FF   			call	_recenter_CAMERA
10650                        	
10651                        		.dbg	line,	"include\routines_LEVELS.c", 2510; }
10652                        	
10653                        		.dbg	line,	"include\routines_LEVELS.c", 2513; else if(player_state == STATE_CLIMB_DOWN)
10654                        		__bra		.LL450
         01:D894  4C 0B DB   			bra	.LL450
10655    01:D897             	.LL433:
10656                        		__ld.umq	_player_state
         01:D897  AD 16 23   			lda	_player_state
10657                        		__equ_b.uiq	12
         01:D89A  C9 0C      			cmp	#12
         01:D89C  F0 01      			beq	!+
         01:D89E  18         			clc
         01:D89F             	!:
10658                        		__bfalse	.LL451
         01:D89F  B0 03 4C 79			bcc	.LL451
         01:D8A3  D9          
10659                        	
10660                        		.dbg	line,	"include\routines_LEVELS.c", 2514; {
10661                        	
10662                        		.dbg	line,	"include\routines_LEVELS.c", 2515; if(player_counter_anim == 0)
10663                        		__not.um	_player_counter_anim
         01:D8A4  AD 19 23   			lda	_player_counter_anim
         01:D8A7  18         			clc
         01:D8A8  D0 01      			bne	!+
         01:D8AA  38         			sec
         01:D8AB             	!:
10664                        		__bfalse	.LL452
         01:D8AB  90 0F      			bcc	.LL452
10665                        	
10666                        		.dbg	line,	"include\routines_LEVELS.c", 2516; {
10667                        	
10668                        		.dbg	line,	"include\routines_LEVELS.c", 2517; spr_set(player_id);
10669                        		__ld.umq	_player_id
         01:D8AD  AD 15 23   			lda	_player_id
10670                        		__call		_spr_set.1
         01:D8B0  20 DD E7   			call	_spr_set.1
10671                        	
10672                        		.dbg	line,	"include\routines_LEVELS.c", 2518; spr_pattern(PLAYER_CLIMB_1_VRAM_ADR); 
10673                        		__ld.wi		7680
         01:D8B3  62         			cla
         01:D8B4  A0 1E      			ldy.h	#7680
10674                        		__call		_spr_pattern.1
         01:D8B6  20 26 E8   			call	_spr_pattern.1
10675                        	
10676                        		.dbg	line,	"include\routines_LEVELS.c", 2519; }
10677                        	
10678                        		.dbg	line,	"include\routines_LEVELS.c", 2521; else if(player_counter_anim == 2)
10679                        		__bra		.LL453
         01:D8B9  4C 63 D9   			bra	.LL453
10680    01:D8BC             	.LL452:
10681                        		__ld.umq	_player_counter_anim
         01:D8BC  AD 19 23   			lda	_player_counter_anim
10682                        		__equ_b.uiq	2
         01:D8BF  C9 02      			cmp	#2
         01:D8C1  F0 01      			beq	!+
         01:D8C3  18         			clc
         01:D8C4             	!:
10683                        		__bfalse	.LL454
         01:D8C4  90 0F      			bcc	.LL454
10684                        	
10685                        		.dbg	line,	"include\routines_LEVELS.c", 2522; {
10686                        	
10687                        		.dbg	line,	"include\routines_LEVELS.c", 2523; spr_set(player_id);
10688                        		__ld.umq	_player_id
         01:D8C6  AD 15 23   			lda	_player_id
10689                        		__call		_spr_set.1
         01:D8C9  20 DD E7   			call	_spr_set.1
10690                        	
10691                        		.dbg	line,	"include\routines_LEVELS.c", 2524; spr_pattern(PLAYER_CLIMB_2_VRAM_ADR); 
10692                        		__ld.wi		7936
         01:D8CC  62         			cla
         01:D8CD  A0 1F      			ldy.h	#7936
10693                        		__call		_spr_pattern.1
         01:D8CF  20 26 E8   			call	_spr_pattern.1
10694                        	
10695                        		.dbg	line,	"include\routines_LEVELS.c", 2525; }
10696                        	
10697                        		.dbg	line,	"include\routines_LEVELS.c", 2527; else if(player_counter_anim == 5)
10698                        		__bra		.LL455
         01:D8D2  4C 63 D9   			bra	.LL455
10699    01:D8D5             	.LL454:
10700                        		__ld.umq	_player_counter_anim
         01:D8D5  AD 19 23   			lda	_player_counter_anim
10701                        		__equ_b.uiq	5
         01:D8D8  C9 05      			cmp	#5
         01:D8DA  F0 01      			beq	!+
         01:D8DC  18         			clc
         01:D8DD             	!:
10702                        		__bfalse	.LL456
         01:D8DD  90 0E      			bcc	.LL456
10703                        	
10704                        		.dbg	line,	"include\routines_LEVELS.c", 2528; {
10705                        	
10706                        		.dbg	line,	"include\routines_LEVELS.c", 2529; spr_set(player_id);
10707                        		__ld.umq	_player_id
         01:D8DF  AD 15 23   			lda	_player_id
10708                        		__call		_spr_set.1
         01:D8E2  20 DD E7   			call	_spr_set.1
10709                        	
10710                        		.dbg	line,	"include\routines_LEVELS.c", 2530; spr_pattern(PLAYER_CLIMB_3_VRAM_ADR); 
10711                        		__ld.wi		8192
         01:D8E5  62         			cla
         01:D8E6  A0 20      			ldy.h	#8192
10712                        		__call		_spr_pattern.1
         01:D8E8  20 26 E8   			call	_spr_pattern.1
10713                        	
10714                        		.dbg	line,	"include\routines_LEVELS.c", 2531; }
10715                        	
10716                        		.dbg	line,	"include\routines_LEVELS.c", 2533; else if(player_counter_anim == 8)
10717                        		__bra		.LL457
         01:D8EB  80 76      			bra	.LL457
10718    01:D8ED             	.LL456:
10719                        		__ld.umq	_player_counter_anim
         01:D8ED  AD 19 23   			lda	_player_counter_anim
10720                        		__equ_b.uiq	8
         01:D8F0  C9 08      			cmp	#8
         01:D8F2  F0 01      			beq	!+
         01:D8F4  18         			clc
         01:D8F5             	!:
10721                        		__bfalse	.LL458
         01:D8F5  90 0E      			bcc	.LL458
10722                        	
10723                        		.dbg	line,	"include\routines_LEVELS.c", 2534; {
10724                        	
10725                        		.dbg	line,	"include\routines_LEVELS.c", 2535; spr_set(player_id);
10726                        		__ld.umq	_player_id
         01:D8F7  AD 15 23   			lda	_player_id
10727                        		__call		_spr_set.1
         01:D8FA  20 DD E7   			call	_spr_set.1
10728                        	
10729                        		.dbg	line,	"include\routines_LEVELS.c", 2536; spr_pattern(PLAYER_CLIMB_4_VRAM_ADR); 
10730                        		__ld.wi		8448
         01:D8FD  62         			cla
         01:D8FE  A0 21      			ldy.h	#8448
10731                        		__call		_spr_pattern.1
         01:D900  20 26 E8   			call	_spr_pattern.1
10732                        	
10733                        		.dbg	line,	"include\routines_LEVELS.c", 2537; }
10734                        	
10735                        		.dbg	line,	"include\routines_LEVELS.c", 2539; else if(player_counter_anim == 11)
10736                        		__bra		.LL459
         01:D903  80 5E      			bra	.LL459
10737    01:D905             	.LL458:
10738                        		__ld.umq	_player_counter_anim
         01:D905  AD 19 23   			lda	_player_counter_anim
10739                        		__equ_b.uiq	11
         01:D908  C9 0B      			cmp	#11
         01:D90A  F0 01      			beq	!+
         01:D90C  18         			clc
         01:D90D             	!:
10740                        		__bfalse	.LL460
         01:D90D  90 0E      			bcc	.LL460
10741                        	
10742                        		.dbg	line,	"include\routines_LEVELS.c", 2540; {
10743                        	
10744                        		.dbg	line,	"include\routines_LEVELS.c", 2541; spr_set(player_id);
10745                        		__ld.umq	_player_id
         01:D90F  AD 15 23   			lda	_player_id
10746                        		__call		_spr_set.1
         01:D912  20 DD E7   			call	_spr_set.1
10747                        	
10748                        		.dbg	line,	"include\routines_LEVELS.c", 2542; spr_pattern(PLAYER_CLIMB_5_VRAM_ADR); 
10749                        		__ld.wi		8704
         01:D915  62         			cla
         01:D916  A0 22      			ldy.h	#8704
10750                        		__call		_spr_pattern.1
         01:D918  20 26 E8   			call	_spr_pattern.1
10751                        	
10752                        		.dbg	line,	"include\routines_LEVELS.c", 2543; }
10753                        	
10754                        		.dbg	line,	"include\routines_LEVELS.c", 2545; else if(player_counter_anim == 14)
10755                        		__bra		.LL461
         01:D91B  80 46      			bra	.LL461
10756    01:D91D             	.LL460:
10757                        		__ld.umq	_player_counter_anim
         01:D91D  AD 19 23   			lda	_player_counter_anim
10758                        		__equ_b.uiq	14
         01:D920  C9 0E      			cmp	#14
         01:D922  F0 01      			beq	!+
         01:D924  18         			clc
         01:D925             	!:
10759                        		__bfalse	.LL462
         01:D925  90 0E      			bcc	.LL462
10760                        	
10761                        		.dbg	line,	"include\routines_LEVELS.c", 2546; {
10762                        	
10763                        		.dbg	line,	"include\routines_LEVELS.c", 2547; spr_set(player_id);
10764                        		__ld.umq	_player_id
         01:D927  AD 15 23   			lda	_player_id
10765                        		__call		_spr_set.1
         01:D92A  20 DD E7   			call	_spr_set.1
10766                        	
10767                        		.dbg	line,	"include\routines_LEVELS.c", 2548; spr_pattern(PLAYER_CLIMB_4_VRAM_ADR); 
10768                        		__ld.wi		8448
         01:D92D  62         			cla
         01:D92E  A0 21      			ldy.h	#8448
10769                        		__call		_spr_pattern.1
         01:D930  20 26 E8   			call	_spr_pattern.1
10770                        	
10771                        		.dbg	line,	"include\routines_LEVELS.c", 2549; }
10772                        	
10773                        		.dbg	line,	"include\routines_LEVELS.c", 2551; else if(player_counter_anim == 17)
10774                        		__bra		.LL463
         01:D933  80 2E      			bra	.LL463
10775    01:D935             	.LL462:
10776                        		__ld.umq	_player_counter_anim
         01:D935  AD 19 23   			lda	_player_counter_anim
10777                        		__equ_b.uiq	17
         01:D938  C9 11      			cmp	#17
         01:D93A  F0 01      			beq	!+
         01:D93C  18         			clc
         01:D93D             	!:
10778                        		__bfalse	.LL464
         01:D93D  90 0E      			bcc	.LL464
10779                        	
10780                        		.dbg	line,	"include\routines_LEVELS.c", 2552; {
10781                        	
10782                        		.dbg	line,	"include\routines_LEVELS.c", 2553; spr_set(player_id);
10783                        		__ld.umq	_player_id
         01:D93F  AD 15 23   			lda	_player_id
10784                        		__call		_spr_set.1
         01:D942  20 DD E7   			call	_spr_set.1
10785                        	
10786                        		.dbg	line,	"include\routines_LEVELS.c", 2554; spr_pattern(PLAYER_CLIMB_3_VRAM_ADR); 
10787                        		__ld.wi		8192
         01:D945  62         			cla
         01:D946  A0 20      			ldy.h	#8192
10788                        		__call		_spr_pattern.1
         01:D948  20 26 E8   			call	_spr_pattern.1
10789                        	
10790                        		.dbg	line,	"include\routines_LEVELS.c", 2555; }
10791                        	
10792                        		.dbg	line,	"include\routines_LEVELS.c", 2557; else if(player_counter_anim == 20)
10793                        		__bra		.LL465
         01:D94B  80 16      			bra	.LL465
10794    01:D94D             	.LL464:
10795                        		__ld.umq	_player_counter_anim
         01:D94D  AD 19 23   			lda	_player_counter_anim
10796                        		__equ_b.uiq	20
         01:D950  C9 14      			cmp	#20
         01:D952  F0 01      			beq	!+
         01:D954  18         			clc
         01:D955             	!:
10797                        		__bfalse	.LL466
         01:D955  90 0C      			bcc	.LL466
10798                        	
10799                        		.dbg	line,	"include\routines_LEVELS.c", 2558; {
10800                        	
10801                        		.dbg	line,	"include\routines_LEVELS.c", 2559; spr_set(player_id);
10802                        		__ld.umq	_player_id
         01:D957  AD 15 23   			lda	_player_id
10803                        		__call		_spr_set.1
         01:D95A  20 DD E7   			call	_spr_set.1
10804                        	
10805                        		.dbg	line,	"include\routines_LEVELS.c", 2560; spr_pattern(PLAYER_CLIMB_2_VRAM_ADR); 
10806                        		__ld.wi		7936
         01:D95D  62         			cla
         01:D95E  A0 1F      			ldy.h	#7936
10807                        		__call		_spr_pattern.1
         01:D960  20 26 E8   			call	_spr_pattern.1
10808                        	
10809                        		.dbg	line,	"include\routines_LEVELS.c", 2561; }
10810                        	
10811                        		.dbg	line,	"include\routines_LEVELS.c", 2564; player_counter_anim += 1;
10812    01:D963             	.LL466:
10813    01:D963             	.LL465:
10814    01:D963             	.LL463:
10815    01:D963             	.LL461:
10816    01:D963             	.LL459:
10817    01:D963             	.LL457:
10818    01:D963             	.LL455:
10819    01:D963             	.LL453:
10820                        		__add_st.umiq	1, _player_counter_anim
         01:D963  EE 19 23   			inc	_player_counter_anim
10821                        	
10822                        		.dbg	line,	"include\routines_LEVELS.c", 2566; if(player_counter_anim == 22)
10823                        		__ld.umq	_player_counter_anim
         01:D966  AD 19 23   			lda	_player_counter_anim
10824                        		__equ_b.uiq	22
         01:D969  C9 16      			cmp	#22
         01:D96B  F0 01      			beq	!+
         01:D96D  18         			clc
         01:D96E             	!:
10825                        		__bfalse	.LL467
         01:D96E  90 03      			bcc	.LL467
10826                        	
10827                        		.dbg	line,	"include\routines_LEVELS.c", 2567; {
10828                        	
10829                        		.dbg	line,	"include\routines_LEVELS.c", 2568; player_counter_anim = 0;
10830                        		__st.umiq	0, _player_counter_anim
         01:D970  9C 19 23   			stz	_player_counter_anim
10831                        	
10832                        		.dbg	line,	"include\routines_LEVELS.c", 2569; }
10833                        	
10834                        		.dbg	line,	"include\routines_LEVELS.c", 2571; recenter_CAMERA();
10835    01:D973             	.LL467:
10836                        		__call		_recenter_CAMERA
         01:D973  20 63 FF   			call	_recenter_CAMERA
10837                        	
10838                        		.dbg	line,	"include\routines_LEVELS.c", 2572; }
10839                        	
10840                        		.dbg	line,	"include\routines_LEVELS.c", 2575; else if(player_state == STATE_JUMP_LADDER)
10841                        		__bra		.LL468
         01:D976  4C 0B DB   			bra	.LL468
10842    01:D979             	.LL451:
10843                        		__ld.umq	_player_state
         01:D979  AD 16 23   			lda	_player_state
10844                        		__equ_b.uiq	13
         01:D97C  C9 0D      			cmp	#13
         01:D97E  F0 01      			beq	!+
         01:D980  18         			clc
         01:D981             	!:
10845                        		__bfalse	.LL469
         01:D981  B0 03 4C 0B			bcc	.LL469
         01:D985  DB          
10846                        	
10847                        		.dbg	line,	"include\routines_LEVELS.c", 2576; {
10848                        	
10849                        		.dbg	line,	"include\routines_LEVELS.c", 2577; unsigned char i;
10850                        	
10851                        		.dbg	line,	"include\routines_LEVELS.c", 2578; i = 1;
10852                        		__st.umiq	1, __update_PLAYER_end - 8  /* i */
         01:D986  A9 01      			lda.l	#1
         01:D988  8D 05 23   			sta	__update_PLAYER_end - 8
10853                        	
10854                        		.dbg	line,	"include\routines_LEVELS.c", 2581; if(player_counter_anim == 0)
10855                        		__not.um	_player_counter_anim
         01:D98B  AD 19 23   			lda	_player_counter_anim
         01:D98E  18         			clc
         01:D98F  D0 01      			bne	!+
         01:D991  38         			sec
         01:D992             	!:
10856                        		__bfalse	.LL470
         01:D992  90 11      			bcc	.LL470
10857                        	
10858                        		.dbg	line,	"include\routines_LEVELS.c", 2582; {
10859                        	
10860                        		.dbg	line,	"include\routines_LEVELS.c", 2583; spr_set(player_id);
10861                        		__ld.umq	_player_id
         01:D994  AD 15 23   			lda	_player_id
10862                        		__call		_spr_set.1
         01:D997  20 DD E7   			call	_spr_set.1
10863                        	
10864                        		.dbg	line,	"include\routines_LEVELS.c", 2584; spr_pattern(PLAYER_JUMP_VRAM_ADR); 
10865                        		__ld.wi		6912
         01:D99A  62         			cla
         01:D99B  A0 1B      			ldy.h	#6912
10866                        		__call		_spr_pattern.1
         01:D99D  20 26 E8   			call	_spr_pattern.1
10867                        	
10868                        		.dbg	line,	"include\routines_LEVELS.c", 2586; player_counter_anim = 1;
10869                        		__st.umiq	1, _player_counter_anim
         01:D9A0  A9 01      			lda.l	#1
         01:D9A2  8D 19 23   			sta	_player_counter_anim
10870                        	
10871                        		.dbg	line,	"include\routines_LEVELS.c", 2587; }
10872                        	
10873                        		.dbg	line,	"include\routines_LEVELS.c", 2590; player_pos_y += TABLE_PLAYER_JUMP_V[player_index_jump];
10874    01:D9A5             	.LL470:
10875                        		__ldx.umq	_player_index_jump
         01:D9A5  AE 1A 23   			ldx	_player_index_jump
10876                        		__ld.bax	_TABLE_PLAYER_JUMP_V
         01:D9A8  BD 1D 61   			lda	_TABLE_PLAYER_JUMP_V, x
         01:D9AB  C2         			cly
         01:D9AC  10 01      			bpl	!+
         01:D9AE  88         			dey
         01:D9AF             	!:
10877                        		__add_st.wmq	_player_pos_y
         01:D9AF  18         			clc
         01:D9B0  6D D6 24   			adc.l	_player_pos_y
         01:D9B3  8D D6 24   			sta.l	_player_pos_y
         01:D9B6  98         			tya
         01:D9B7  6D D7 24   			adc.h	_player_pos_y
         01:D9BA  8D D7 24   			sta.h	_player_pos_y
10878                        	
10879                        		.dbg	line,	"include\routines_LEVELS.c", 2592; // CHECK COLLISION WITH CEILING //
10880                        	
10881                        		.dbg	line,	"include\routines_LEVELS.c", 2593; check_BG( 15 , 8 );
10882                        		__ld.wi		15
         01:D9BD  A9 0F      			lda.l	#15
         01:D9BF  C2         			cly
10883                        		__pusharg.wr
         01:D9C0  A6 8D      			ldx	<__sp
         01:D9C2  CA         			dex
         01:D9C3  CA         			dex
         01:D9C4  95 08      			sta.l	<__stack, x
         01:D9C6  94 09      			sty.h	<__stack, x
         01:D9C8  86 8D      			stx	<__sp
10884                        		__ld.wi		8
         01:D9CA  A9 08      			lda.l	#8
         01:D9CC  C2         			cly
10885                        		__pusharg.wr
         01:D9CD  A6 8D      			ldx	<__sp
         01:D9CF  CA         			dex
         01:D9D0  CA         			dex
         01:D9D1  95 08      			sta.l	<__stack, x
         01:D9D3  94 09      			sty.h	<__stack, x
         01:D9D5  86 8D      			stx	<__sp
10886                        		__call		_check_BG
         01:D9D7  20 6D FF   			call	_check_BG
10887                        	
10888                        		.dbg	line,	"include\routines_LEVELS.c", 2595; if(map_blk_flag == TILE_BG)
10889                        		__ld.umq	_map_blk_flag
         01:D9DA  AD B1 2B   			lda	_map_blk_flag
10890                        		__equ_b.uiq	1
         01:D9DD  C9 01      			cmp	#1
         01:D9DF  F0 01      			beq	!+
         01:D9E1  18         			clc
         01:D9E2             	!:
10891                        		__bfalse	.LL471
         01:D9E2  90 5A      			bcc	.LL471
10892                        	
10893                        		.dbg	line,	"include\routines_LEVELS.c", 2596; {
10894                        	
10895                        		.dbg	line,	"include\routines_LEVELS.c", 2597; for(i=1 ; i<8 ; i++)
10896                        		__st.umiq	1, __update_PLAYER_end - 8  /* i */
         01:D9E4  A9 01      			lda.l	#1
         01:D9E6  8D 05 23   			sta	__update_PLAYER_end - 8
10897    01:D9E9             	.LL472:
10898                        		__ld.umq	__update_PLAYER_end - 8  /* i */
         01:D9E9  AD 05 23   			lda	__update_PLAYER_end - 8
10899                        		__ult_b.uiq	8
         01:D9EC  C9 08      			cmp	#8		; Subtract integer from A.
         01:D9EE  6A         			ror	a		; CC if A < integer.
         01:D9EF  49 80      			eor	#$80
         01:D9F1  2A         			rol	a
10900                        		__btrue		.LL474
         01:D9F2  B0 07      			bcs	.LL474
10901                        		__bra		.LL475
         01:D9F4  80 48      			bra	.LL475
10902    01:D9F6             	.LL473:
10903                        		__inc.umq	__update_PLAYER_end - 8  /* i */
         01:D9F6  EE 05 23   			inc	__update_PLAYER_end - 8
10904                        		__bra		.LL472
         01:D9F9  80 EE      			bra	.LL472
10905    01:D9FB             	.LL474:
10906                        	
10907                        		.dbg	line,	"include\routines_LEVELS.c", 2598; {
10908                        	
10909                        		.dbg	line,	"include\routines_LEVELS.c", 2599; check_BG( 15 , 8 + i );
10910                        		__ld.wi		15
         01:D9FB  A9 0F      			lda.l	#15
         01:D9FD  C2         			cly
10911                        		__pusharg.wr
         01:D9FE  A6 8D      			ldx	<__sp
         01:DA00  CA         			dex
         01:DA01  CA         			dex
         01:DA02  95 08      			sta.l	<__stack, x
         01:DA04  94 09      			sty.h	<__stack, x
         01:DA06  86 8D      			stx	<__sp
10912                        		__ld.wi		8
         01:DA08  A9 08      			lda.l	#8
         01:DA0A  C2         			cly
10913                        		__add.um	__update_PLAYER_end - 8  /* i */
         01:DA0B  18         			clc
         01:DA0C  6D 05 23   			adc	__update_PLAYER_end - 8
         01:DA0F  90 01      			bcc	!+
         01:DA11  C8         			iny
         01:DA12             	!:
10914                        		__pusharg.wr
         01:DA12  A6 8D      			ldx	<__sp
         01:DA14  CA         			dex
         01:DA15  CA         			dex
         01:DA16  95 08      			sta.l	<__stack, x
         01:DA18  94 09      			sty.h	<__stack, x
         01:DA1A  86 8D      			stx	<__sp
10915                        		__call		_check_BG
         01:DA1C  20 6D FF   			call	_check_BG
10916                        	
10917                        		.dbg	line,	"include\routines_LEVELS.c", 2600; {
10918                        	
10919                        		.dbg	line,	"include\routines_LEVELS.c", 2601; if(map_blk_flag == TILE_EMPTY)
10920                        		__not.um	_map_blk_flag
         01:DA1F  AD B1 2B   			lda	_map_blk_flag
         01:DA22  18         			clc
         01:DA23  D0 01      			bne	!+
         01:DA25  38         			sec
         01:DA26             	!:
10921                        		__bfalse	.LL476
         01:DA26  90 CE      			bcc	.LL476
10922                        	
10923                        		.dbg	line,	"include\routines_LEVELS.c", 2602; {
10924                        	
10925                        		.dbg	line,	"include\routines_LEVELS.c", 2603; player_pos_y += i;
10926                        		__ld.um		__update_PLAYER_end - 8  /* i */
         01:DA28  AD 05 23   			lda	__update_PLAYER_end - 8
         01:DA2B  C2         			cly
10927                        		__add_st.wmq	_player_pos_y
         01:DA2C  18         			clc
         01:DA2D  6D D6 24   			adc.l	_player_pos_y
         01:DA30  8D D6 24   			sta.l	_player_pos_y
         01:DA33  98         			tya
         01:DA34  6D D7 24   			adc.h	_player_pos_y
         01:DA37  8D D7 24   			sta.h	_player_pos_y
10928                        	
10929                        		.dbg	line,	"include\routines_LEVELS.c", 2604; break;
10930                        		__bra		.LL475
         01:DA3A  80 02      			bra	.LL475
10931                        	
10932                        		.dbg	line,	"include\routines_LEVELS.c", 2605; }
10933                        	
10934                        		.dbg	line,	"include\routines_LEVELS.c", 2606; }
10935    01:DA3C             	.LL476	.alias		.LL473
10936                        	
10937                        		.dbg	line,	"include\routines_LEVELS.c", 2607; }
10938                        		__bra		.LL473
         01:DA3C  80 B8      			bra	.LL473
10939    01:DA3E             	.LL475:
10940                        	
10941                        		.dbg	line,	"include\routines_LEVELS.c", 2608; }
10942                        	
10943                        		.dbg	line,	"include\routines_LEVELS.c", 2610; spr_set(player_id);
10944    01:DA3E             	.LL471:
10945                        		__ld.umq	_player_id
         01:DA3E  AD 15 23   			lda	_player_id
10946                        		__call		_spr_set.1
         01:DA41  20 DD E7   			call	_spr_set.1
10947                        	
10948                        		.dbg	line,	"include\routines_LEVELS.c", 2611; spr_y(player_pos_y);
10949                        		__ld.wm		_player_pos_y
         01:DA44  AD D6 24   			lda.l	_player_pos_y
         01:DA47  AC D7 24   			ldy.h	_player_pos_y
10950                        		__call		_spr_y.1
         01:DA4A  20 19 E8   			call	_spr_y.1
10951                        	
10952                        		.dbg	line,	"include\routines_LEVELS.c", 2615; if(player_index_jump < 34)
10953                        		__ld.umq	_player_index_jump
         01:DA4D  AD 1A 23   			lda	_player_index_jump
10954                        		__ult_b.uiq	34
         01:DA50  C9 22      			cmp	#34		; Subtract integer from A.
         01:DA52  6A         			ror	a		; CC if A < integer.
         01:DA53  49 80      			eor	#$80
         01:DA55  2A         			rol	a
10955                        		__bfalse	.LL477
         01:DA56  90 03      			bcc	.LL477
10956                        	
10957                        		.dbg	line,	"include\routines_LEVELS.c", 2616; {
10958                        	
10959                        		.dbg	line,	"include\routines_LEVELS.c", 2617; player_index_jump += 1;
10960                        		__add_st.umiq	1, _player_index_jump
         01:DA58  EE 1A 23   			inc	_player_index_jump
10961                        	
10962                        		.dbg	line,	"include\routines_LEVELS.c", 2618; }
10963                        	
10964                        		.dbg	line,	"include\routines_LEVELS.c", 2623; //--------------------------------------------------------------------------------------//
10965                        	
10966                        		.dbg	line,	"include\routines_LEVELS.c", 2624; //                                   LADDER COLLISION                                   //
10967                        	
10968                        		.dbg	line,	"include\routines_LEVELS.c", 2625; //--------------------------------------------------------------------------------------//
10969                        	
10970                        		.dbg	line,	"include\routines_LEVELS.c", 2627; if(player_index_jump > 18)
10971    01:DA5B             	.LL477:
10972                        		__ld.umq	_player_index_jump
         01:DA5B  AD 1A 23   			lda	_player_index_jump
10973                        		__ugt_b.uiq	18
         01:DA5E  18         			clc			; Subtract integer+1 from A.
         01:DA5F  E9 12      			sbc	#18		; CS if A > integer.
10974                        		__bfalse	.LL478
         01:DA61  B0 03 4C F6			bcc	.LL478
         01:DA65  DA          
10975                        	
10976                        		.dbg	line,	"include\routines_LEVELS.c", 2628; {
10977                        	
10978                        		.dbg	line,	"include\routines_LEVELS.c", 2629; // CHECK COLLISION WITH LADDERS //
10979                        	
10980                        		.dbg	line,	"include\routines_LEVELS.c", 2630; check_BG( 16 , 8 );
10981                        		__ld.wi		16
         01:DA66  A9 10      			lda.l	#16
         01:DA68  C2         			cly
10982                        		__pusharg.wr
         01:DA69  A6 8D      			ldx	<__sp
         01:DA6B  CA         			dex
         01:DA6C  CA         			dex
         01:DA6D  95 08      			sta.l	<__stack, x
         01:DA6F  94 09      			sty.h	<__stack, x
         01:DA71  86 8D      			stx	<__sp
10983                        		__ld.wi		8
         01:DA73  A9 08      			lda.l	#8
         01:DA75  C2         			cly
10984                        		__pusharg.wr
         01:DA76  A6 8D      			ldx	<__sp
         01:DA78  CA         			dex
         01:DA79  CA         			dex
         01:DA7A  95 08      			sta.l	<__stack, x
         01:DA7C  94 09      			sty.h	<__stack, x
         01:DA7E  86 8D      			stx	<__sp
10985                        		__call		_check_BG
         01:DA80  20 6D FF   			call	_check_BG
10986                        	
10987                        		.dbg	line,	"include\routines_LEVELS.c", 2632; // IF PLAYER HITS THE LADDER //
10988                        	
10989                        		.dbg	line,	"include\routines_LEVELS.c", 2633; if(map_blk_flag == TILE_LADDER)
10990                        		__ld.umq	_map_blk_flag
         01:DA83  AD B1 2B   			lda	_map_blk_flag
10991                        		__equ_b.uiq	2
         01:DA86  C9 02      			cmp	#2
         01:DA88  F0 01      			beq	!+
         01:DA8A  18         			clc
         01:DA8B             	!:
10992                        		__bfalse	.LL479
         01:DA8B  90 69      			bcc	.LL479
10993                        	
10994                        		.dbg	line,	"include\routines_LEVELS.c", 2634; {
10995                        	
10996                        		.dbg	line,	"include\routines_LEVELS.c", 2635; // CAMERA GOES 8 PX BACKWARD //
10997                        	
10998                        		.dbg	line,	"include\routines_LEVELS.c", 2636; sgx_map_pxl_x = ( (sgx_map_pxl_x >> 3) << 3 );
10999                        		__ld.wm		_sgx_map_pxl_x
         01:DA8D  AD 90 26   			lda.l	_sgx_map_pxl_x
         01:DA90  AC 91 26   			ldy.h	_sgx_map_pxl_x
11000                        		__lsr.wi	3
         01:DA93  84 00      			sty	__temp
         01:DA95  20 3A E2   			jsr	lsrw3
11001                        		__asl.wi	3
         01:DA98  84 00      			sty	__temp
         01:DA9A  20 D7 E1   			jsr	aslw3
11002                        		__st.wmq	_sgx_map_pxl_x
         01:DA9D  8D 90 26   			sta.l	_sgx_map_pxl_x
         01:DAA0  8C 91 26   			sty.h	_sgx_map_pxl_x
11003                        	
11004                        		.dbg	line,	"include\routines_LEVELS.c", 2638; // SO WE UPDATE THE MAP //
11005                        	
11006                        		.dbg	line,	"include\routines_LEVELS.c", 2639; sgx_scroll_map();
11007                        		__call		_sgx_scroll_map
         01:DAA3  20 81 FF   			call	_sgx_scroll_map
11008                        	
11009                        		.dbg	line,	"include\routines_LEVELS.c", 2641; // CHECK IF THE PLAYER STANDS RIGHT TO THE LADDER //
11010                        	
11011                        		.dbg	line,	"include\routines_LEVELS.c", 2642; check_BG( 31 , 8 );
11012                        		__ld.wi		31
         01:DAA6  A9 1F      			lda.l	#31
         01:DAA8  C2         			cly
11013                        		__pusharg.wr
         01:DAA9  A6 8D      			ldx	<__sp
         01:DAAB  CA         			dex
         01:DAAC  CA         			dex
         01:DAAD  95 08      			sta.l	<__stack, x
         01:DAAF  94 09      			sty.h	<__stack, x
         01:DAB1  86 8D      			stx	<__sp
11014                        		__ld.wi		8
         01:DAB3  A9 08      			lda.l	#8
         01:DAB5  C2         			cly
11015                        		__pusharg.wr
         01:DAB6  A6 8D      			ldx	<__sp
         01:DAB8  CA         			dex
         01:DAB9  CA         			dex
         01:DABA  95 08      			sta.l	<__stack, x
         01:DABC  94 09      			sty.h	<__stack, x
         01:DABE  86 8D      			stx	<__sp
11016                        		__call		_check_BG
         01:DAC0  20 6D FF   			call	_check_BG
11017                        	
11018                        		.dbg	line,	"include\routines_LEVELS.c", 2644; if(map_blk_flag == TILE_LADDER)
11019                        		__ld.umq	_map_blk_flag
         01:DAC3  AD B1 2B   			lda	_map_blk_flag
11020                        		__equ_b.uiq	2
         01:DAC6  C9 02      			cmp	#2
         01:DAC8  F0 01      			beq	!+
         01:DACA  18         			clc
         01:DACB             	!:
11021                        		__bfalse	.LL480
         01:DACB  90 0E      			bcc	.LL480
11022                        	
11023                        		.dbg	line,	"include\routines_LEVELS.c", 2645; {
11024                        	
11025                        		.dbg	line,	"include\routines_LEVELS.c", 2646; sgx_map_pxl_x += 8;
11026                        		__add_st.wmiq	8, _sgx_map_pxl_x
         01:DACD  18         			clc
         01:DACE  AD 90 26   			lda.l	_sgx_map_pxl_x
         01:DAD1  69 08      			adc.l	#8
         01:DAD3  8D 90 26   			sta.l	_sgx_map_pxl_x
         01:DAD6  90 03      			bcc	!+
         01:DAD8  EE 91 26   			inc.h	_sgx_map_pxl_x
         01:DADB             	!:
11027                        	
11028                        		.dbg	line,	"include\routines_LEVELS.c", 2647; }
11029                        	
11030                        		.dbg	line,	"include\routines_LEVELS.c", 2649; //spr_set(player_id);
11031                        	
11032                        		.dbg	line,	"include\routines_LEVELS.c", 2650; spr_pattern(PLAYER_HANG_VRAM_ADR);
11033    01:DADB             	.LL480:
11034                        		__ld.wi		7424
         01:DADB  62         			cla
         01:DADC  A0 1D      			ldy.h	#7424
11035                        		__call		_spr_pattern.1
         01:DADE  20 26 E8   			call	_spr_pattern.1
11036                        	
11037                        		.dbg	line,	"include\routines_LEVELS.c", 2652; player_counter_anim = 0;//
11038                        		__st.umiq	0, _player_counter_anim
         01:DAE1  9C 19 23   			stz	_player_counter_anim
11039                        	
11040                        		.dbg	line,	"include\routines_LEVELS.c", 2653; player_index_jump = 0;
11041                        		__st.umiq	0, _player_index_jump
         01:DAE4  9C 1A 23   			stz	_player_index_jump
11042                        	
11043                        		.dbg	line,	"include\routines_LEVELS.c", 2654; jump_ladder = TRUE;
11044                        		__st.umiq	1, _jump_ladder
         01:DAE7  A9 01      			lda.l	#1
         01:DAE9  8D 1F 23   			sta	_jump_ladder
11045                        	
11046                        		.dbg	line,	"include\routines_LEVELS.c", 2655; jump_max_index = 29;
11047                        		__st.umiq	29, _jump_max_index
         01:DAEC  A9 1D      			lda.l	#29
         01:DAEE  8D 20 23   			sta	_jump_max_index
11048                        	
11049                        		.dbg	line,	"include\routines_LEVELS.c", 2656; player_state = STATE_HANG;
11050                        		__st.umiq	10, _player_state
         01:DAF1  A9 0A      			lda.l	#10
         01:DAF3  8D 16 23   			sta	_player_state
11051                        	
11052                        		.dbg	line,	"include\routines_LEVELS.c", 2657; }
11053                        	
11054                        		.dbg	line,	"include\routines_LEVELS.c", 2658; }
11055    01:DAF6             	.LL479:
11056                        	
11057                        		.dbg	line,	"include\routines_LEVELS.c", 2660; spr_set(weapon_id);
11058    01:DAF6             	.LL478:
11059                        		__ld.umq	_weapon_id
         01:DAF6  AD 23 23   			lda	_weapon_id
11060                        		__call		_spr_set.1
         01:DAF9  20 DD E7   			call	_spr_set.1
11061                        	
11062                        		.dbg	line,	"include\routines_LEVELS.c", 2661; spr_y(player_pos_y+8);
11063                        		__ld.wm		_player_pos_y
         01:DAFC  AD D6 24   			lda.l	_player_pos_y
         01:DAFF  AC D7 24   			ldy.h	_player_pos_y
11064                        		__add.wi	8
         01:DB02  18         			clc
         01:DB03  69 08      			adc.l	#8
         01:DB05  90 01      			bcc	!+
         01:DB07  C8         			iny
         01:DB08             	!:
11065                        		__call		_spr_y.1
         01:DB08  20 19 E8   			call	_spr_y.1
11066                        	
11067                        		.dbg	line,	"include\routines_LEVELS.c", 2662; }
11068                        	
11069                        		.dbg	line,	"include\routines_LEVELS.c", 2664; }
11070    01:DB0B             	.LL469:
11071    01:DB0B             	.LL468:
11072    01:DB0B             	.LL450:
11073    01:DB0B             	.LL432:
11074    01:DB0B             	.LL427:
11075    01:DB0B             	.LL412:
11076    01:DB0B             	.LL407:
11077    01:DB0B             	.LL370:
11078    01:DB0B             	.LL333:
11079    01:DB0B             	.LL278:
11080    01:DB0B             	.LL235:
11081    01:DB0B             	.LL230:
11082                        		__return	0
         01:DB0B  4C EF FF   			jmp	leave_proc
11083                        		.dbg	clear
11084                        		.endp
11085               67E0     		.data
11086               2305     		.bss
11087    F8:2305             	__update_PLAYER_loc:
11088    F8:2305             			ds	8
11089    F8:230D             	__update_PLAYER_end:
11090               E309     		.code
11091                        		.pceas
11092                        	
11093                        		.dbg	line,	"include\routines_LEVELS.c", 2667; void update_WEAPON()
11094                        		.dbg	line,	"include\routines_LEVELS.c", 2668; {
11095                        	;***********************
11096                        	;***********************
11097                        	
11098                        		.hucc
11099    02:C000             		.proc		_update_WEAPON
11100                        		__enter		_update_WEAPON
11101                        	
11102                        		.dbg	line,	"include\routines_LEVELS.c", 2669; if(player_state == STATE_ATTACK)
11103                        		__ld.umq	_player_state
         02:C000  AD 16 23   			lda	_player_state
11104                        		__equ_b.uiq	2
         02:C003  C9 02      			cmp	#2
         02:C005  F0 01      			beq	!+
         02:C007  18         			clc
         02:C008             	!:
11105                        		__bfalse	.LL482
         02:C008  B0 03 4C A1			bcc	.LL482
         02:C00C  C2          
11106                        	
11107                        		.dbg	line,	"include\routines_LEVELS.c", 2670; {
11108                        	
11109                        		.dbg	line,	"include\routines_LEVELS.c", 2671; if(player_counter_attack == 0)
11110                        		__not.um	_player_counter_attack
         02:C00D  AD 1C 23   			lda	_player_counter_attack
         02:C010  18         			clc
         02:C011  D0 01      			bne	!+
         02:C013  38         			sec
         02:C014             	!:
11111                        		__bfalse	.LL483
         02:C014  90 53      			bcc	.LL483
11112                        	
11113                        		.dbg	line,	"include\routines_LEVELS.c", 2672; {
11114                        	
11115                        		.dbg	line,	"include\routines_LEVELS.c", 2673; spr_set(player_id);
11116                        		__ld.umq	_player_id
         02:C016  AD 15 23   			lda	_player_id
11117                        		__call		_spr_set.1
         02:C019  20 DD E7   			call	_spr_set.1
11118                        	
11119                        		.dbg	line,	"include\routines_LEVELS.c", 2674; spr_pattern(PLAYER_ATTACK_1_VRAM_ADR);
11120                        		__ld.wi		9472
         02:C01C  62         			cla
         02:C01D  A0 25      			ldy.h	#9472
11121                        		__call		_spr_pattern.1
         02:C01F  20 26 E8   			call	_spr_pattern.1
11122                        	
11123                        		.dbg	line,	"include\routines_LEVELS.c", 2676; spr_set(weapon_id);
11124                        		__ld.umq	_weapon_id
         02:C022  AD 23 23   			lda	_weapon_id
11125                        		__call		_spr_set.1
         02:C025  20 DD E7   			call	_spr_set.1
11126                        	
11127                        		.dbg	line,	"include\routines_LEVELS.c", 2677; spr_pattern(WEAPON_ATTACK_1_VRAM_ADRESS);
11128                        		__ld.wi		32000
         02:C028  62         			cla
         02:C029  A0 7D      			ldy.h	#32000
11129                        		__call		_spr_pattern.1
         02:C02B  20 26 E8   			call	_spr_pattern.1
11130                        	
11131                        		.dbg	line,	"include\routines_LEVELS.c", 2679; if(player_axis == AXIS_RIGHT)
11132                        		__not.um	_player_axis
         02:C02E  AD 17 23   			lda	_player_axis
         02:C031  18         			clc
         02:C032  D0 01      			bne	!+
         02:C034  38         			sec
         02:C035             	!:
11133                        		__bfalse	.LL484
         02:C035  90 11      			bcc	.LL484
11134                        	
11135                        		.dbg	line,	"include\routines_LEVELS.c", 2680; {
11136                        	
11137                        		.dbg	line,	"include\routines_LEVELS.c", 2681; spr_x(player_pos_x-13);
11138                        		__ld.wm		_player_pos_x
         02:C037  AD D4 24   			lda.l	_player_pos_x
         02:C03A  AC D5 24   			ldy.h	_player_pos_x
11139                        		__sub.wi	13
         02:C03D  38         			sec
         02:C03E  E9 0D      			sbc.l	#13
         02:C040  B0 01      			bcs	!+
         02:C042  88         			dey
         02:C043             	!:
11140                        		__call		_spr_x.1
         02:C043  20 0A E8   			call	_spr_x.1
11141                        	
11142                        		.dbg	line,	"include\routines_LEVELS.c", 2682; }
11143                        	
11144                        		.dbg	line,	"include\routines_LEVELS.c", 2684; else
11145                        		__bra		.LL485
         02:C046  80 0F      			bra	.LL485
11146    02:C048             	.LL484:
11147                        	
11148                        		.dbg	line,	"include\routines_LEVELS.c", 2685; {
11149                        	
11150                        		.dbg	line,	"include\routines_LEVELS.c", 2686; spr_x(player_pos_x+29);
11151                        		__ld.wm		_player_pos_x
         02:C048  AD D4 24   			lda.l	_player_pos_x
         02:C04B  AC D5 24   			ldy.h	_player_pos_x
11152                        		__add.wi	29
         02:C04E  18         			clc
         02:C04F  69 1D      			adc.l	#29
         02:C051  90 01      			bcc	!+
         02:C053  C8         			iny
         02:C054             	!:
11153                        		__call		_spr_x.1
         02:C054  20 0A E8   			call	_spr_x.1
11154                        	
11155                        		.dbg	line,	"include\routines_LEVELS.c", 2687; }
11156    02:C057             	.LL485:
11157                        	
11158                        		.dbg	line,	"include\routines_LEVELS.c", 2689; spr_y(player_pos_y-8);
11159                        		__ld.wm		_player_pos_y
         02:C057  AD D6 24   			lda.l	_player_pos_y
         02:C05A  AC D7 24   			ldy.h	_player_pos_y
11160                        		__sub.wi	8
         02:C05D  38         			sec
         02:C05E  E9 08      			sbc.l	#8
         02:C060  B0 01      			bcs	!+
         02:C062  88         			dey
         02:C063             	!:
11161                        		__call		_spr_y.1
         02:C063  20 19 E8   			call	_spr_y.1
11162                        	
11163                        		.dbg	line,	"include\routines_LEVELS.c", 2690; }
11164                        	
11165                        		.dbg	line,	"include\routines_LEVELS.c", 2692; else if(player_counter_attack == 6)
11166                        		__bra		.LL486
         02:C066  4C 9B C2   			bra	.LL486
11167    02:C069             	.LL483:
11168                        		__ld.umq	_player_counter_attack
         02:C069  AD 1C 23   			lda	_player_counter_attack
11169                        		__equ_b.uiq	6
         02:C06C  C9 06      			cmp	#6
         02:C06E  F0 01      			beq	!+
         02:C070  18         			clc
         02:C071             	!:
11170                        		__bfalse	.LL487
         02:C071  90 54      			bcc	.LL487
11171                        	
11172                        		.dbg	line,	"include\routines_LEVELS.c", 2693; {
11173                        	
11174                        		.dbg	line,	"include\routines_LEVELS.c", 2694; spr_set(player_id);
11175                        		__ld.umq	_player_id
         02:C073  AD 15 23   			lda	_player_id
11176                        		__call		_spr_set.1
         02:C076  20 DD E7   			call	_spr_set.1
11177                        	
11178                        		.dbg	line,	"include\routines_LEVELS.c", 2695; spr_pattern(PLAYER_ATTACK_2_VRAM_ADR);
11179                        		__ld.wi		9728
         02:C079  62         			cla
         02:C07A  A0 26      			ldy.h	#9728
11180                        		__call		_spr_pattern.1
         02:C07C  20 26 E8   			call	_spr_pattern.1
11181                        	
11182                        		.dbg	line,	"include\routines_LEVELS.c", 2697; spr_set(weapon_id);
11183                        		__ld.umq	_weapon_id
         02:C07F  AD 23 23   			lda	_weapon_id
11184                        		__call		_spr_set.1
         02:C082  20 DD E7   			call	_spr_set.1
11185                        	
11186                        		.dbg	line,	"include\routines_LEVELS.c", 2698; spr_pattern(WEAPON_ATTACK_2_VRAM_ADRESS);
11187                        		__ld.wi		32064
         02:C085  A9 40      			lda.l	#32064
         02:C087  A0 7D      			ldy.h	#32064
11188                        		__call		_spr_pattern.1
         02:C089  20 26 E8   			call	_spr_pattern.1
11189                        	
11190                        		.dbg	line,	"include\routines_LEVELS.c", 2700; if(player_axis == AXIS_RIGHT)
11191                        		__not.um	_player_axis
         02:C08C  AD 17 23   			lda	_player_axis
         02:C08F  18         			clc
         02:C090  D0 01      			bne	!+
         02:C092  38         			sec
         02:C093             	!:
11192                        		__bfalse	.LL488
         02:C093  90 11      			bcc	.LL488
11193                        	
11194                        		.dbg	line,	"include\routines_LEVELS.c", 2701; {
11195                        	
11196                        		.dbg	line,	"include\routines_LEVELS.c", 2702; spr_x(player_pos_x+32);
11197                        		__ld.wm		_player_pos_x
         02:C095  AD D4 24   			lda.l	_player_pos_x
         02:C098  AC D5 24   			ldy.h	_player_pos_x
11198                        		__add.wi	32
         02:C09B  18         			clc
         02:C09C  69 20      			adc.l	#32
         02:C09E  90 01      			bcc	!+
         02:C0A0  C8         			iny
         02:C0A1             	!:
11199                        		__call		_spr_x.1
         02:C0A1  20 0A E8   			call	_spr_x.1
11200                        	
11201                        		.dbg	line,	"include\routines_LEVELS.c", 2703; 
11202                        	
11203                        		.dbg	line,	"include\routines_LEVELS.c", 2704; }
11204                        	
11205                        		.dbg	line,	"include\routines_LEVELS.c", 2705; 
11206                        	
11207                        		.dbg	line,	"include\routines_LEVELS.c", 2706; else
11208                        		__bra		.LL489
         02:C0A4  80 0F      			bra	.LL489
11209    02:C0A6             	.LL488:
11210                        	
11211                        		.dbg	line,	"include\routines_LEVELS.c", 2707; {
11212                        	
11213                        		.dbg	line,	"include\routines_LEVELS.c", 2708; spr_x(player_pos_x-16);
11214                        		__ld.wm		_player_pos_x
         02:C0A6  AD D4 24   			lda.l	_player_pos_x
         02:C0A9  AC D5 24   			ldy.h	_player_pos_x
11215                        		__sub.wi	16
         02:C0AC  38         			sec
         02:C0AD  E9 10      			sbc.l	#16
         02:C0AF  B0 01      			bcs	!+
         02:C0B1  88         			dey
         02:C0B2             	!:
11216                        		__call		_spr_x.1
         02:C0B2  20 0A E8   			call	_spr_x.1
11217                        	
11218                        		.dbg	line,	"include\routines_LEVELS.c", 2709; }
11219    02:C0B5             	.LL489:
11220                        	
11221                        		.dbg	line,	"include\routines_LEVELS.c", 2711; spr_y(player_pos_y+6);
11222                        		__ld.wm		_player_pos_y
         02:C0B5  AD D6 24   			lda.l	_player_pos_y
         02:C0B8  AC D7 24   			ldy.h	_player_pos_y
11223                        		__add.wi	6
         02:C0BB  18         			clc
         02:C0BC  69 06      			adc.l	#6
         02:C0BE  90 01      			bcc	!+
         02:C0C0  C8         			iny
         02:C0C1             	!:
11224                        		__call		_spr_y.1
         02:C0C1  20 19 E8   			call	_spr_y.1
11225                        	
11226                        		.dbg	line,	"include\routines_LEVELS.c", 2712; }
11227                        	
11228                        		.dbg	line,	"include\routines_LEVELS.c", 2714; else if(player_counter_attack == 7)
11229                        		__bra		.LL490
         02:C0C4  4C 9B C2   			bra	.LL490
11230    02:C0C7             	.LL487:
11231                        		__ld.umq	_player_counter_attack
         02:C0C7  AD 1C 23   			lda	_player_counter_attack
11232                        		__equ_b.uiq	7
         02:C0CA  C9 07      			cmp	#7
         02:C0CC  F0 01      			beq	!+
         02:C0CE  18         			clc
         02:C0CF             	!:
11233                        		__bfalse	.LL491
         02:C0CF  90 66      			bcc	.LL491
11234                        	
11235                        		.dbg	line,	"include\routines_LEVELS.c", 2715; {
11236                        	
11237                        		.dbg	line,	"include\routines_LEVELS.c", 2716; spr_set(chain_id);
11238                        		__ld.umq	_chain_id
         02:C0D1  AD 22 23   			lda	_chain_id
11239                        		__call		_spr_set.1
         02:C0D4  20 DD E7   			call	_spr_set.1
11240                        	
11241                        		.dbg	line,	"include\routines_LEVELS.c", 2717; spr_y(player_pos_y);
11242                        		__ld.wm		_player_pos_y
         02:C0D7  AD D6 24   			lda.l	_player_pos_y
         02:C0DA  AC D7 24   			ldy.h	_player_pos_y
11243                        		__call		_spr_y.1
         02:C0DD  20 19 E8   			call	_spr_y.1
11244                        	
11245                        		.dbg	line,	"include\routines_LEVELS.c", 2719; if(player_axis == AXIS_RIGHT)
11246                        		__not.um	_player_axis
         02:C0E0  AD 17 23   			lda	_player_axis
         02:C0E3  18         			clc
         02:C0E4  D0 01      			bne	!+
         02:C0E6  38         			sec
         02:C0E7             	!:
11247                        		__bfalse	.LL492
         02:C0E7  90 27      			bcc	.LL492
11248                        	
11249                        		.dbg	line,	"include\routines_LEVELS.c", 2720; {
11250                        	
11251                        		.dbg	line,	"include\routines_LEVELS.c", 2721; spr_x(player_pos_x+32);
11252                        		__ld.wm		_player_pos_x
         02:C0E9  AD D4 24   			lda.l	_player_pos_x
         02:C0EC  AC D5 24   			ldy.h	_player_pos_x
11253                        		__add.wi	32
         02:C0EF  18         			clc
         02:C0F0  69 20      			adc.l	#32
         02:C0F2  90 01      			bcc	!+
         02:C0F4  C8         			iny
         02:C0F5             	!:
11254                        		__call		_spr_x.1
         02:C0F5  20 0A E8   			call	_spr_x.1
11255                        	
11256                        		.dbg	line,	"include\routines_LEVELS.c", 2723; spr_set(weapon_id);
11257                        		__ld.umq	_weapon_id
         02:C0F8  AD 23 23   			lda	_weapon_id
11258                        		__call		_spr_set.1
         02:C0FB  20 DD E7   			call	_spr_set.1
11259                        	
11260                        		.dbg	line,	"include\routines_LEVELS.c", 2724; spr_x(player_pos_x+48);
11261                        		__ld.wm		_player_pos_x
         02:C0FE  AD D4 24   			lda.l	_player_pos_x
         02:C101  AC D5 24   			ldy.h	_player_pos_x
11262                        		__add.wi	48
         02:C104  18         			clc
         02:C105  69 30      			adc.l	#48
         02:C107  90 01      			bcc	!+
         02:C109  C8         			iny
         02:C10A             	!:
11263                        		__call		_spr_x.1
         02:C10A  20 0A E8   			call	_spr_x.1
11264                        	
11265                        		.dbg	line,	"include\routines_LEVELS.c", 2725; }
11266                        	
11267                        		.dbg	line,	"include\routines_LEVELS.c", 2726; 
11268                        	
11269                        		.dbg	line,	"include\routines_LEVELS.c", 2727; else
11270                        		__bra		.LL493
         02:C10D  4C 9B C2   			bra	.LL493
11271    02:C110             	.LL492:
11272                        	
11273                        		.dbg	line,	"include\routines_LEVELS.c", 2728; {
11274                        	
11275                        		.dbg	line,	"include\routines_LEVELS.c", 2729; spr_x(player_pos_x-16);
11276                        		__ld.wm		_player_pos_x
         02:C110  AD D4 24   			lda.l	_player_pos_x
         02:C113  AC D5 24   			ldy.h	_player_pos_x
11277                        		__sub.wi	16
         02:C116  38         			sec
         02:C117  E9 10      			sbc.l	#16
         02:C119  B0 01      			bcs	!+
         02:C11B  88         			dey
         02:C11C             	!:
11278                        		__call		_spr_x.1
         02:C11C  20 0A E8   			call	_spr_x.1
11279                        	
11280                        		.dbg	line,	"include\routines_LEVELS.c", 2731; spr_set(weapon_id);
11281                        		__ld.umq	_weapon_id
         02:C11F  AD 23 23   			lda	_weapon_id
11282                        		__call		_spr_set.1
         02:C122  20 DD E7   			call	_spr_set.1
11283                        	
11284                        		.dbg	line,	"include\routines_LEVELS.c", 2732; spr_x(player_pos_x-32);
11285                        		__ld.wm		_player_pos_x
         02:C125  AD D4 24   			lda.l	_player_pos_x
         02:C128  AC D5 24   			ldy.h	_player_pos_x
11286                        		__sub.wi	32
         02:C12B  38         			sec
         02:C12C  E9 20      			sbc.l	#32
         02:C12E  B0 01      			bcs	!+
         02:C130  88         			dey
         02:C131             	!:
11287                        		__call		_spr_x.1
         02:C131  20 0A E8   			call	_spr_x.1
11288                        	
11289                        		.dbg	line,	"include\routines_LEVELS.c", 2733; }
11290    02:C134             	.LL493	.alias		.LL494
11291                        	
11292                        		.dbg	line,	"include\routines_LEVELS.c", 2734; }
11293                        	
11294                        		.dbg	line,	"include\routines_LEVELS.c", 2736; else if(player_counter_attack == 8)
11295                        		__bra		.LL494
         02:C134  4C 9B C2   			bra	.LL494
11296    02:C137             	.LL491:
11297                        		__ld.umq	_player_counter_attack
         02:C137  AD 1C 23   			lda	_player_counter_attack
11298                        		__equ_b.uiq	8
         02:C13A  C9 08      			cmp	#8
         02:C13C  F0 01      			beq	!+
         02:C13E  18         			clc
         02:C13F             	!:
11299                        		__bfalse	.LL495
         02:C13F  90 6B      			bcc	.LL495
11300                        	
11301                        		.dbg	line,	"include\routines_LEVELS.c", 2737; {
11302                        	
11303                        		.dbg	line,	"include\routines_LEVELS.c", 2738; spr_set(chain_id+1);
11304                        		__ld.um		_chain_id
         02:C141  AD 22 23   			lda	_chain_id
         02:C144  C2         			cly
11305                        		__add.wi	1
         02:C145  1A         			inc	a
         02:C146  D0 01      			bne	!+
         02:C148  C8         			iny
         02:C149             	!:
11306                        		__call		_spr_set.1
         02:C149  20 DD E7   			call	_spr_set.1
11307                        	
11308                        		.dbg	line,	"include\routines_LEVELS.c", 2739; spr_y(player_pos_y);
11309                        		__ld.wm		_player_pos_y
         02:C14C  AD D6 24   			lda.l	_player_pos_y
         02:C14F  AC D7 24   			ldy.h	_player_pos_y
11310                        		__call		_spr_y.1
         02:C152  20 19 E8   			call	_spr_y.1
11311                        	
11312                        		.dbg	line,	"include\routines_LEVELS.c", 2741; if(player_axis == AXIS_RIGHT)
11313                        		__not.um	_player_axis
         02:C155  AD 17 23   			lda	_player_axis
         02:C158  18         			clc
         02:C159  D0 01      			bne	!+
         02:C15B  38         			sec
         02:C15C             	!:
11314                        		__bfalse	.LL496
         02:C15C  90 27      			bcc	.LL496
11315                        	
11316                        		.dbg	line,	"include\routines_LEVELS.c", 2742; {
11317                        	
11318                        		.dbg	line,	"include\routines_LEVELS.c", 2743; spr_x(player_pos_x+48);
11319                        		__ld.wm		_player_pos_x
         02:C15E  AD D4 24   			lda.l	_player_pos_x
         02:C161  AC D5 24   			ldy.h	_player_pos_x
11320                        		__add.wi	48
         02:C164  18         			clc
         02:C165  69 30      			adc.l	#48
         02:C167  90 01      			bcc	!+
         02:C169  C8         			iny
         02:C16A             	!:
11321                        		__call		_spr_x.1
         02:C16A  20 0A E8   			call	_spr_x.1
11322                        	
11323                        		.dbg	line,	"include\routines_LEVELS.c", 2745; spr_set(weapon_id);
11324                        		__ld.umq	_weapon_id
         02:C16D  AD 23 23   			lda	_weapon_id
11325                        		__call		_spr_set.1
         02:C170  20 DD E7   			call	_spr_set.1
11326                        	
11327                        		.dbg	line,	"include\routines_LEVELS.c", 2746; spr_x(player_pos_x+64);
11328                        		__ld.wm		_player_pos_x
         02:C173  AD D4 24   			lda.l	_player_pos_x
         02:C176  AC D5 24   			ldy.h	_player_pos_x
11329                        		__add.wi	64
         02:C179  18         			clc
         02:C17A  69 40      			adc.l	#64
         02:C17C  90 01      			bcc	!+
         02:C17E  C8         			iny
         02:C17F             	!:
11330                        		__call		_spr_x.1
         02:C17F  20 0A E8   			call	_spr_x.1
11331                        	
11332                        		.dbg	line,	"include\routines_LEVELS.c", 2747; }
11333                        	
11334                        		.dbg	line,	"include\routines_LEVELS.c", 2748; 
11335                        	
11336                        		.dbg	line,	"include\routines_LEVELS.c", 2749; else
11337                        		__bra		.LL497
         02:C182  4C 9B C2   			bra	.LL497
11338    02:C185             	.LL496:
11339                        	
11340                        		.dbg	line,	"include\routines_LEVELS.c", 2750; {
11341                        	
11342                        		.dbg	line,	"include\routines_LEVELS.c", 2751; spr_x(player_pos_x-32);
11343                        		__ld.wm		_player_pos_x
         02:C185  AD D4 24   			lda.l	_player_pos_x
         02:C188  AC D5 24   			ldy.h	_player_pos_x
11344                        		__sub.wi	32
         02:C18B  38         			sec
         02:C18C  E9 20      			sbc.l	#32
         02:C18E  B0 01      			bcs	!+
         02:C190  88         			dey
         02:C191             	!:
11345                        		__call		_spr_x.1
         02:C191  20 0A E8   			call	_spr_x.1
11346                        	
11347                        		.dbg	line,	"include\routines_LEVELS.c", 2753; spr_set(weapon_id);
11348                        		__ld.umq	_weapon_id
         02:C194  AD 23 23   			lda	_weapon_id
11349                        		__call		_spr_set.1
         02:C197  20 DD E7   			call	_spr_set.1
11350                        	
11351                        		.dbg	line,	"include\routines_LEVELS.c", 2754; spr_x(player_pos_x-48);
11352                        		__ld.wm		_player_pos_x
         02:C19A  AD D4 24   			lda.l	_player_pos_x
         02:C19D  AC D5 24   			ldy.h	_player_pos_x
11353                        		__sub.wi	48
         02:C1A0  38         			sec
         02:C1A1  E9 30      			sbc.l	#48
         02:C1A3  B0 01      			bcs	!+
         02:C1A5  88         			dey
         02:C1A6             	!:
11354                        		__call		_spr_x.1
         02:C1A6  20 0A E8   			call	_spr_x.1
11355                        	
11356                        		.dbg	line,	"include\routines_LEVELS.c", 2755; }
11357    02:C1A9             	.LL497	.alias		.LL498
11358                        	
11359                        		.dbg	line,	"include\routines_LEVELS.c", 2756; }
11360                        	
11361                        		.dbg	line,	"include\routines_LEVELS.c", 2758; else if(player_counter_attack == 9)
11362                        		__bra		.LL498
         02:C1A9  4C 9B C2   			bra	.LL498
11363    02:C1AC             	.LL495:
11364                        		__ld.umq	_player_counter_attack
         02:C1AC  AD 1C 23   			lda	_player_counter_attack
11365                        		__equ_b.uiq	9
         02:C1AF  C9 09      			cmp	#9
         02:C1B1  F0 01      			beq	!+
         02:C1B3  18         			clc
         02:C1B4             	!:
11366                        		__bfalse	.LL499
         02:C1B4  90 6C      			bcc	.LL499
11367                        	
11368                        		.dbg	line,	"include\routines_LEVELS.c", 2759; {
11369                        	
11370                        		.dbg	line,	"include\routines_LEVELS.c", 2760; spr_set(chain_id+2);
11371                        		__ld.um		_chain_id
         02:C1B6  AD 22 23   			lda	_chain_id
         02:C1B9  C2         			cly
11372                        		__add.wi	2
         02:C1BA  18         			clc
         02:C1BB  69 02      			adc.l	#2
         02:C1BD  90 01      			bcc	!+
         02:C1BF  C8         			iny
         02:C1C0             	!:
11373                        		__call		_spr_set.1
         02:C1C0  20 DD E7   			call	_spr_set.1
11374                        	
11375                        		.dbg	line,	"include\routines_LEVELS.c", 2761; spr_y(player_pos_y);
11376                        		__ld.wm		_player_pos_y
         02:C1C3  AD D6 24   			lda.l	_player_pos_y
         02:C1C6  AC D7 24   			ldy.h	_player_pos_y
11377                        		__call		_spr_y.1
         02:C1C9  20 19 E8   			call	_spr_y.1
11378                        	
11379                        		.dbg	line,	"include\routines_LEVELS.c", 2763; if(player_axis == AXIS_RIGHT)
11380                        		__not.um	_player_axis
         02:C1CC  AD 17 23   			lda	_player_axis
         02:C1CF  18         			clc
         02:C1D0  D0 01      			bne	!+
         02:C1D2  38         			sec
         02:C1D3             	!:
11381                        		__bfalse	.LL500
         02:C1D3  90 27      			bcc	.LL500
11382                        	
11383                        		.dbg	line,	"include\routines_LEVELS.c", 2764; {
11384                        	
11385                        		.dbg	line,	"include\routines_LEVELS.c", 2765; spr_x(player_pos_x+64);
11386                        		__ld.wm		_player_pos_x
         02:C1D5  AD D4 24   			lda.l	_player_pos_x
         02:C1D8  AC D5 24   			ldy.h	_player_pos_x
11387                        		__add.wi	64
         02:C1DB  18         			clc
         02:C1DC  69 40      			adc.l	#64
         02:C1DE  90 01      			bcc	!+
         02:C1E0  C8         			iny
         02:C1E1             	!:
11388                        		__call		_spr_x.1
         02:C1E1  20 0A E8   			call	_spr_x.1
11389                        	
11390                        		.dbg	line,	"include\routines_LEVELS.c", 2767; spr_set(weapon_id);
11391                        		__ld.umq	_weapon_id
         02:C1E4  AD 23 23   			lda	_weapon_id
11392                        		__call		_spr_set.1
         02:C1E7  20 DD E7   			call	_spr_set.1
11393                        	
11394                        		.dbg	line,	"include\routines_LEVELS.c", 2768; spr_x(player_pos_x+80);
11395                        		__ld.wm		_player_pos_x
         02:C1EA  AD D4 24   			lda.l	_player_pos_x
         02:C1ED  AC D5 24   			ldy.h	_player_pos_x
11396                        		__add.wi	80
         02:C1F0  18         			clc
         02:C1F1  69 50      			adc.l	#80
         02:C1F3  90 01      			bcc	!+
         02:C1F5  C8         			iny
         02:C1F6             	!:
11397                        		__call		_spr_x.1
         02:C1F6  20 0A E8   			call	_spr_x.1
11398                        	
11399                        		.dbg	line,	"include\routines_LEVELS.c", 2769; }
11400                        	
11401                        		.dbg	line,	"include\routines_LEVELS.c", 2770; 
11402                        	
11403                        		.dbg	line,	"include\routines_LEVELS.c", 2771; else
11404                        		__bra		.LL501
         02:C1F9  4C 9B C2   			bra	.LL501
11405    02:C1FC             	.LL500:
11406                        	
11407                        		.dbg	line,	"include\routines_LEVELS.c", 2772; {
11408                        	
11409                        		.dbg	line,	"include\routines_LEVELS.c", 2773; spr_x(player_pos_x-48);
11410                        		__ld.wm		_player_pos_x
         02:C1FC  AD D4 24   			lda.l	_player_pos_x
         02:C1FF  AC D5 24   			ldy.h	_player_pos_x
11411                        		__sub.wi	48
         02:C202  38         			sec
         02:C203  E9 30      			sbc.l	#48
         02:C205  B0 01      			bcs	!+
         02:C207  88         			dey
         02:C208             	!:
11412                        		__call		_spr_x.1
         02:C208  20 0A E8   			call	_spr_x.1
11413                        	
11414                        		.dbg	line,	"include\routines_LEVELS.c", 2775; spr_set(weapon_id);
11415                        		__ld.umq	_weapon_id
         02:C20B  AD 23 23   			lda	_weapon_id
11416                        		__call		_spr_set.1
         02:C20E  20 DD E7   			call	_spr_set.1
11417                        	
11418                        		.dbg	line,	"include\routines_LEVELS.c", 2776; spr_x(player_pos_x-64);
11419                        		__ld.wm		_player_pos_x
         02:C211  AD D4 24   			lda.l	_player_pos_x
         02:C214  AC D5 24   			ldy.h	_player_pos_x
11420                        		__sub.wi	64
         02:C217  38         			sec
         02:C218  E9 40      			sbc.l	#64
         02:C21A  B0 01      			bcs	!+
         02:C21C  88         			dey
         02:C21D             	!:
11421                        		__call		_spr_x.1
         02:C21D  20 0A E8   			call	_spr_x.1
11422                        	
11423                        		.dbg	line,	"include\routines_LEVELS.c", 2777; }
11424    02:C220             	.LL501	.alias		.LL502
11425                        	
11426                        		.dbg	line,	"include\routines_LEVELS.c", 2778; }
11427                        	
11428                        		.dbg	line,	"include\routines_LEVELS.c", 2780; else if(player_counter_attack == 23)
11429                        		__bra		.LL502
         02:C220  80 79      			bra	.LL502
11430    02:C222             	.LL499:
11431                        		__ld.umq	_player_counter_attack
         02:C222  AD 1C 23   			lda	_player_counter_attack
11432                        		__equ_b.uiq	23
         02:C225  C9 17      			cmp	#23
         02:C227  F0 01      			beq	!+
         02:C229  18         			clc
         02:C22A             	!:
11433                        		__bfalse	.LL503
         02:C22A  90 6F      			bcc	.LL503
11434                        	
11435                        		.dbg	line,	"include\routines_LEVELS.c", 2781; {
11436                        	
11437                        		.dbg	line,	"include\routines_LEVELS.c", 2782; spr_set(chain_id);
11438                        		__ld.umq	_chain_id
         02:C22C  AD 22 23   			lda	_chain_id
11439                        		__call		_spr_set.1
         02:C22F  20 DD E7   			call	_spr_set.1
11440                        	
11441                        		.dbg	line,	"include\routines_LEVELS.c", 2783; spr_hide();
11442                        		__call		_spr_hide
         02:C232  20 F8 E7   			call	_spr_hide
11443                        	
11444                        		.dbg	line,	"include\routines_LEVELS.c", 2785; spr_set(chain_id+1);
11445                        		__ld.um		_chain_id
         02:C235  AD 22 23   			lda	_chain_id
         02:C238  C2         			cly
11446                        		__add.wi	1
         02:C239  1A         			inc	a
         02:C23A  D0 01      			bne	!+
         02:C23C  C8         			iny
         02:C23D             	!:
11447                        		__call		_spr_set.1
         02:C23D  20 DD E7   			call	_spr_set.1
11448                        	
11449                        		.dbg	line,	"include\routines_LEVELS.c", 2786; spr_hide();
11450                        		__call		_spr_hide
         02:C240  20 F8 E7   			call	_spr_hide
11451                        	
11452                        		.dbg	line,	"include\routines_LEVELS.c", 2788; spr_set(chain_id+2);
11453                        		__ld.um		_chain_id
         02:C243  AD 22 23   			lda	_chain_id
         02:C246  C2         			cly
11454                        		__add.wi	2
         02:C247  18         			clc
         02:C248  69 02      			adc.l	#2
         02:C24A  90 01      			bcc	!+
         02:C24C  C8         			iny
         02:C24D             	!:
11455                        		__call		_spr_set.1
         02:C24D  20 DD E7   			call	_spr_set.1
11456                        	
11457                        		.dbg	line,	"include\routines_LEVELS.c", 2789; spr_hide();
11458                        		__call		_spr_hide
         02:C250  20 F8 E7   			call	_spr_hide
11459                        	
11460                        		.dbg	line,	"include\routines_LEVELS.c", 2791; spr_set(player_id);
11461                        		__ld.umq	_player_id
         02:C253  AD 15 23   			lda	_player_id
11462                        		__call		_spr_set.1
         02:C256  20 DD E7   			call	_spr_set.1
11463                        	
11464                        		.dbg	line,	"include\routines_LEVELS.c", 2792; spr_pattern(PLAYER_IDLE_VRAM_ADR);
11465                        		__ld.wi		5120
         02:C259  62         			cla
         02:C25A  A0 14      			ldy.h	#5120
11466                        		__call		_spr_pattern.1
         02:C25C  20 26 E8   			call	_spr_pattern.1
11467                        	
11468                        		.dbg	line,	"include\routines_LEVELS.c", 2794; spr_set(weapon_id);
11469                        		__ld.umq	_weapon_id
         02:C25F  AD 23 23   			lda	_weapon_id
11470                        		__call		_spr_set.1
         02:C262  20 DD E7   			call	_spr_set.1
11471                        	
11472                        		.dbg	line,	"include\routines_LEVELS.c", 2795; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
11473                        		__ld.wi		31808
         02:C265  A9 40      			lda.l	#31808
         02:C267  A0 7C      			ldy.h	#31808
11474                        		__call		_spr_pattern.1
         02:C269  20 26 E8   			call	_spr_pattern.1
11475                        	
11476                        		.dbg	line,	"include\routines_LEVELS.c", 2796; spr_x(player_pos_x+8);
11477                        		__ld.wm		_player_pos_x
         02:C26C  AD D4 24   			lda.l	_player_pos_x
         02:C26F  AC D5 24   			ldy.h	_player_pos_x
11478                        		__add.wi	8
         02:C272  18         			clc
         02:C273  69 08      			adc.l	#8
         02:C275  90 01      			bcc	!+
         02:C277  C8         			iny
         02:C278             	!:
11479                        		__call		_spr_x.1
         02:C278  20 0A E8   			call	_spr_x.1
11480                        	
11481                        		.dbg	line,	"include\routines_LEVELS.c", 2797; spr_y(player_pos_y+16);
11482                        		__ld.wm		_player_pos_y
         02:C27B  AD D6 24   			lda.l	_player_pos_y
         02:C27E  AC D7 24   			ldy.h	_player_pos_y
11483                        		__add.wi	16
         02:C281  18         			clc
         02:C282  69 10      			adc.l	#16
         02:C284  90 01      			bcc	!+
         02:C286  C8         			iny
         02:C287             	!:
11484                        		__call		_spr_y.1
         02:C287  20 19 E8   			call	_spr_y.1
11485                        	
11486                        		.dbg	line,	"include\routines_LEVELS.c", 2799; player_attack = FALSE;
11487                        		__st.umiq	0, _player_attack
         02:C28A  9C 1E 23   			stz	_player_attack
11488                        	
11489                        		.dbg	line,	"include\routines_LEVELS.c", 2800; player_counter_attack = 0;
11490                        		__st.umiq	0, _player_counter_attack
         02:C28D  9C 1C 23   			stz	_player_counter_attack
11491                        	
11492                        		.dbg	line,	"include\routines_LEVELS.c", 2801; player_counter_anim = 1;
11493                        		__st.umiq	1, _player_counter_anim
         02:C290  A9 01      			lda.l	#1
         02:C292  8D 19 23   			sta	_player_counter_anim
11494                        	
11495                        		.dbg	line,	"include\routines_LEVELS.c", 2802; player_state = STATE_IDLE;
11496                        		__st.umiq	0, _player_state
         02:C295  9C 16 23   			stz	_player_state
11497                        	
11498                        		.dbg	line,	"include\routines_LEVELS.c", 2803; return;
11499                        		__bra		.LL481
         02:C298  4C 2E C8   			bra	.LL481
11500                        	
11501                        		.dbg	line,	"include\routines_LEVELS.c", 2804; }
11502                        	
11503                        		.dbg	line,	"include\routines_LEVELS.c", 2807; player_counter_attack += 1;
11504    02:C29B             	.LL503:
11505    02:C29B             	.LL502:
11506    02:C29B             	.LL498:
11507    02:C29B             	.LL494:
11508    02:C29B             	.LL490:
11509    02:C29B             	.LL486:
11510                        		__add_st.umiq	1, _player_counter_attack
         02:C29B  EE 1C 23   			inc	_player_counter_attack
11511                        	
11512                        		.dbg	line,	"include\routines_LEVELS.c", 2808; }
11513                        	
11514                        		.dbg	line,	"include\routines_LEVELS.c", 2811; else if(player_state == STATE_CROUCH_ATTACK)
11515                        		__bra		.LL504
         02:C29E  4C 2E C8   			bra	.LL504
11516    02:C2A1             	.LL482:
11517                        		__ld.umq	_player_state
         02:C2A1  AD 16 23   			lda	_player_state
11518                        		__equ_b.uiq	8
         02:C2A4  C9 08      			cmp	#8
         02:C2A6  F0 01      			beq	!+
         02:C2A8  18         			clc
         02:C2A9             	!:
11519                        		__bfalse	.LL505
         02:C2A9  B0 03 4C 6B			bcc	.LL505
         02:C2AD  C5          
11520                        	
11521                        		.dbg	line,	"include\routines_LEVELS.c", 2812; {
11522                        	
11523                        		.dbg	line,	"include\routines_LEVELS.c", 2813; if(player_counter_attack == 0)
11524                        		__not.um	_player_counter_attack
         02:C2AE  AD 1C 23   			lda	_player_counter_attack
         02:C2B1  18         			clc
         02:C2B2  D0 01      			bne	!+
         02:C2B4  38         			sec
         02:C2B5             	!:
11525                        		__bfalse	.LL506
         02:C2B5  90 4D      			bcc	.LL506
11526                        	
11527                        		.dbg	line,	"include\routines_LEVELS.c", 2814; {
11528                        	
11529                        		.dbg	line,	"include\routines_LEVELS.c", 2815; spr_set(player_id);
11530                        		__ld.umq	_player_id
         02:C2B7  AD 15 23   			lda	_player_id
11531                        		__call		_spr_set.1
         02:C2BA  20 DD E7   			call	_spr_set.1
11532                        	
11533                        		.dbg	line,	"include\routines_LEVELS.c", 2816; spr_pattern(PLAYER_CROUCH_ATTACK_1_VRAM_ADR);
11534                        		__ld.wi		9984
         02:C2BD  62         			cla
         02:C2BE  A0 27      			ldy.h	#9984
11535                        		__call		_spr_pattern.1
         02:C2C0  20 26 E8   			call	_spr_pattern.1
11536                        	
11537                        		.dbg	line,	"include\routines_LEVELS.c", 2818; spr_set(weapon_id);
11538                        		__ld.umq	_weapon_id
         02:C2C3  AD 23 23   			lda	_weapon_id
11539                        		__call		_spr_set.1
         02:C2C6  20 DD E7   			call	_spr_set.1
11540                        	
11541                        		.dbg	line,	"include\routines_LEVELS.c", 2819; spr_pattern(WEAPON_ATTACK_1_VRAM_ADRESS);
11542                        		__ld.wi		32000
         02:C2C9  62         			cla
         02:C2CA  A0 7D      			ldy.h	#32000
11543                        		__call		_spr_pattern.1
         02:C2CC  20 26 E8   			call	_spr_pattern.1
11544                        	
11545                        		.dbg	line,	"include\routines_LEVELS.c", 2821; if(player_axis == AXIS_RIGHT)
11546                        		__not.um	_player_axis
         02:C2CF  AD 17 23   			lda	_player_axis
         02:C2D2  18         			clc
         02:C2D3  D0 01      			bne	!+
         02:C2D5  38         			sec
         02:C2D6             	!:
11547                        		__bfalse	.LL507
         02:C2D6  90 11      			bcc	.LL507
11548                        	
11549                        		.dbg	line,	"include\routines_LEVELS.c", 2822; {
11550                        	
11551                        		.dbg	line,	"include\routines_LEVELS.c", 2823; spr_x(player_pos_x-16);
11552                        		__ld.wm		_player_pos_x
         02:C2D8  AD D4 24   			lda.l	_player_pos_x
         02:C2DB  AC D5 24   			ldy.h	_player_pos_x
11553                        		__sub.wi	16
         02:C2DE  38         			sec
         02:C2DF  E9 10      			sbc.l	#16
         02:C2E1  B0 01      			bcs	!+
         02:C2E3  88         			dey
         02:C2E4             	!:
11554                        		__call		_spr_x.1
         02:C2E4  20 0A E8   			call	_spr_x.1
11555                        	
11556                        		.dbg	line,	"include\routines_LEVELS.c", 2824; }
11557                        	
11558                        		.dbg	line,	"include\routines_LEVELS.c", 2826; else
11559                        		__bra		.LL508
         02:C2E7  80 0F      			bra	.LL508
11560    02:C2E9             	.LL507:
11561                        	
11562                        		.dbg	line,	"include\routines_LEVELS.c", 2827; {
11563                        	
11564                        		.dbg	line,	"include\routines_LEVELS.c", 2828; spr_x(player_pos_x+32);
11565                        		__ld.wm		_player_pos_x
         02:C2E9  AD D4 24   			lda.l	_player_pos_x
         02:C2EC  AC D5 24   			ldy.h	_player_pos_x
11566                        		__add.wi	32
         02:C2EF  18         			clc
         02:C2F0  69 20      			adc.l	#32
         02:C2F2  90 01      			bcc	!+
         02:C2F4  C8         			iny
         02:C2F5             	!:
11567                        		__call		_spr_x.1
         02:C2F5  20 0A E8   			call	_spr_x.1
11568                        	
11569                        		.dbg	line,	"include\routines_LEVELS.c", 2829; }
11570    02:C2F8             	.LL508:
11571                        	
11572                        		.dbg	line,	"include\routines_LEVELS.c", 2831; spr_y(player_pos_y);
11573                        		__ld.wm		_player_pos_y
         02:C2F8  AD D6 24   			lda.l	_player_pos_y
         02:C2FB  AC D7 24   			ldy.h	_player_pos_y
11574                        		__call		_spr_y.1
         02:C2FE  20 19 E8   			call	_spr_y.1
11575                        	
11576                        		.dbg	line,	"include\routines_LEVELS.c", 2832; }
11577                        	
11578                        		.dbg	line,	"include\routines_LEVELS.c", 2834; else if(player_counter_attack == 6)
11579                        		__bra		.LL509
         02:C301  4C 65 C5   			bra	.LL509
11580    02:C304             	.LL506:
11581                        		__ld.umq	_player_counter_attack
         02:C304  AD 1C 23   			lda	_player_counter_attack
11582                        		__equ_b.uiq	6
         02:C307  C9 06      			cmp	#6
         02:C309  F0 01      			beq	!+
         02:C30B  18         			clc
         02:C30C             	!:
11583                        		__bfalse	.LL510
         02:C30C  90 54      			bcc	.LL510
11584                        	
11585                        		.dbg	line,	"include\routines_LEVELS.c", 2835; {
11586                        	
11587                        		.dbg	line,	"include\routines_LEVELS.c", 2836; spr_set(player_id);
11588                        		__ld.umq	_player_id
         02:C30E  AD 15 23   			lda	_player_id
11589                        		__call		_spr_set.1
         02:C311  20 DD E7   			call	_spr_set.1
11590                        	
11591                        		.dbg	line,	"include\routines_LEVELS.c", 2837; spr_pattern(PLAYER_CROUCH_ATTACK_2_VRAM_ADR);
11592                        		__ld.wi		10240
         02:C314  62         			cla
         02:C315  A0 28      			ldy.h	#10240
11593                        		__call		_spr_pattern.1
         02:C317  20 26 E8   			call	_spr_pattern.1
11594                        	
11595                        		.dbg	line,	"include\routines_LEVELS.c", 2839; spr_set(weapon_id);
11596                        		__ld.umq	_weapon_id
         02:C31A  AD 23 23   			lda	_weapon_id
11597                        		__call		_spr_set.1
         02:C31D  20 DD E7   			call	_spr_set.1
11598                        	
11599                        		.dbg	line,	"include\routines_LEVELS.c", 2840; spr_pattern(WEAPON_ATTACK_2_VRAM_ADRESS);
11600                        		__ld.wi		32064
         02:C320  A9 40      			lda.l	#32064
         02:C322  A0 7D      			ldy.h	#32064
11601                        		__call		_spr_pattern.1
         02:C324  20 26 E8   			call	_spr_pattern.1
11602                        	
11603                        		.dbg	line,	"include\routines_LEVELS.c", 2842; if(player_axis == AXIS_RIGHT)
11604                        		__not.um	_player_axis
         02:C327  AD 17 23   			lda	_player_axis
         02:C32A  18         			clc
         02:C32B  D0 01      			bne	!+
         02:C32D  38         			sec
         02:C32E             	!:
11605                        		__bfalse	.LL511
         02:C32E  90 11      			bcc	.LL511
11606                        	
11607                        		.dbg	line,	"include\routines_LEVELS.c", 2843; {
11608                        	
11609                        		.dbg	line,	"include\routines_LEVELS.c", 2844; spr_x(player_pos_x+32);
11610                        		__ld.wm		_player_pos_x
         02:C330  AD D4 24   			lda.l	_player_pos_x
         02:C333  AC D5 24   			ldy.h	_player_pos_x
11611                        		__add.wi	32
         02:C336  18         			clc
         02:C337  69 20      			adc.l	#32
         02:C339  90 01      			bcc	!+
         02:C33B  C8         			iny
         02:C33C             	!:
11612                        		__call		_spr_x.1
         02:C33C  20 0A E8   			call	_spr_x.1
11613                        	
11614                        		.dbg	line,	"include\routines_LEVELS.c", 2845; 
11615                        	
11616                        		.dbg	line,	"include\routines_LEVELS.c", 2846; }
11617                        	
11618                        		.dbg	line,	"include\routines_LEVELS.c", 2847; 
11619                        	
11620                        		.dbg	line,	"include\routines_LEVELS.c", 2848; else
11621                        		__bra		.LL512
         02:C33F  80 0F      			bra	.LL512
11622    02:C341             	.LL511:
11623                        	
11624                        		.dbg	line,	"include\routines_LEVELS.c", 2849; {
11625                        	
11626                        		.dbg	line,	"include\routines_LEVELS.c", 2850; spr_x(player_pos_x-16);
11627                        		__ld.wm		_player_pos_x
         02:C341  AD D4 24   			lda.l	_player_pos_x
         02:C344  AC D5 24   			ldy.h	_player_pos_x
11628                        		__sub.wi	16
         02:C347  38         			sec
         02:C348  E9 10      			sbc.l	#16
         02:C34A  B0 01      			bcs	!+
         02:C34C  88         			dey
         02:C34D             	!:
11629                        		__call		_spr_x.1
         02:C34D  20 0A E8   			call	_spr_x.1
11630                        	
11631                        		.dbg	line,	"include\routines_LEVELS.c", 2851; }
11632    02:C350             	.LL512:
11633                        	
11634                        		.dbg	line,	"include\routines_LEVELS.c", 2853; spr_y(player_pos_y+14);
11635                        		__ld.wm		_player_pos_y
         02:C350  AD D6 24   			lda.l	_player_pos_y
         02:C353  AC D7 24   			ldy.h	_player_pos_y
11636                        		__add.wi	14
         02:C356  18         			clc
         02:C357  69 0E      			adc.l	#14
         02:C359  90 01      			bcc	!+
         02:C35B  C8         			iny
         02:C35C             	!:
11637                        		__call		_spr_y.1
         02:C35C  20 19 E8   			call	_spr_y.1
11638                        	
11639                        		.dbg	line,	"include\routines_LEVELS.c", 2854; }
11640                        	
11641                        		.dbg	line,	"include\routines_LEVELS.c", 2856; else if(player_counter_attack == 7)
11642                        		__bra		.LL513
         02:C35F  4C 65 C5   			bra	.LL513
11643    02:C362             	.LL510:
11644                        		__ld.umq	_player_counter_attack
         02:C362  AD 1C 23   			lda	_player_counter_attack
11645                        		__equ_b.uiq	7
         02:C365  C9 07      			cmp	#7
         02:C367  F0 01      			beq	!+
         02:C369  18         			clc
         02:C36A             	!:
11646                        		__bfalse	.LL514
         02:C36A  90 6C      			bcc	.LL514
11647                        	
11648                        		.dbg	line,	"include\routines_LEVELS.c", 2857; {
11649                        	
11650                        		.dbg	line,	"include\routines_LEVELS.c", 2858; spr_set(chain_id);
11651                        		__ld.umq	_chain_id
         02:C36C  AD 22 23   			lda	_chain_id
11652                        		__call		_spr_set.1
         02:C36F  20 DD E7   			call	_spr_set.1
11653                        	
11654                        		.dbg	line,	"include\routines_LEVELS.c", 2859; spr_y(player_pos_y+8);
11655                        		__ld.wm		_player_pos_y
         02:C372  AD D6 24   			lda.l	_player_pos_y
         02:C375  AC D7 24   			ldy.h	_player_pos_y
11656                        		__add.wi	8
         02:C378  18         			clc
         02:C379  69 08      			adc.l	#8
         02:C37B  90 01      			bcc	!+
         02:C37D  C8         			iny
         02:C37E             	!:
11657                        		__call		_spr_y.1
         02:C37E  20 19 E8   			call	_spr_y.1
11658                        	
11659                        		.dbg	line,	"include\routines_LEVELS.c", 2861; if(player_axis == AXIS_RIGHT)
11660                        		__not.um	_player_axis
         02:C381  AD 17 23   			lda	_player_axis
         02:C384  18         			clc
         02:C385  D0 01      			bne	!+
         02:C387  38         			sec
         02:C388             	!:
11661                        		__bfalse	.LL515
         02:C388  90 27      			bcc	.LL515
11662                        	
11663                        		.dbg	line,	"include\routines_LEVELS.c", 2862; {
11664                        	
11665                        		.dbg	line,	"include\routines_LEVELS.c", 2863; spr_x(player_pos_x+32);
11666                        		__ld.wm		_player_pos_x
         02:C38A  AD D4 24   			lda.l	_player_pos_x
         02:C38D  AC D5 24   			ldy.h	_player_pos_x
11667                        		__add.wi	32
         02:C390  18         			clc
         02:C391  69 20      			adc.l	#32
         02:C393  90 01      			bcc	!+
         02:C395  C8         			iny
         02:C396             	!:
11668                        		__call		_spr_x.1
         02:C396  20 0A E8   			call	_spr_x.1
11669                        	
11670                        		.dbg	line,	"include\routines_LEVELS.c", 2865; spr_set(weapon_id);
11671                        		__ld.umq	_weapon_id
         02:C399  AD 23 23   			lda	_weapon_id
11672                        		__call		_spr_set.1
         02:C39C  20 DD E7   			call	_spr_set.1
11673                        	
11674                        		.dbg	line,	"include\routines_LEVELS.c", 2866; spr_x(player_pos_x+48);
11675                        		__ld.wm		_player_pos_x
         02:C39F  AD D4 24   			lda.l	_player_pos_x
         02:C3A2  AC D5 24   			ldy.h	_player_pos_x
11676                        		__add.wi	48
         02:C3A5  18         			clc
         02:C3A6  69 30      			adc.l	#48
         02:C3A8  90 01      			bcc	!+
         02:C3AA  C8         			iny
         02:C3AB             	!:
11677                        		__call		_spr_x.1
         02:C3AB  20 0A E8   			call	_spr_x.1
11678                        	
11679                        		.dbg	line,	"include\routines_LEVELS.c", 2867; }
11680                        	
11681                        		.dbg	line,	"include\routines_LEVELS.c", 2868; 
11682                        	
11683                        		.dbg	line,	"include\routines_LEVELS.c", 2869; else
11684                        		__bra		.LL516
         02:C3AE  4C 65 C5   			bra	.LL516
11685    02:C3B1             	.LL515:
11686                        	
11687                        		.dbg	line,	"include\routines_LEVELS.c", 2870; {
11688                        	
11689                        		.dbg	line,	"include\routines_LEVELS.c", 2871; spr_x(player_pos_x-16);
11690                        		__ld.wm		_player_pos_x
         02:C3B1  AD D4 24   			lda.l	_player_pos_x
         02:C3B4  AC D5 24   			ldy.h	_player_pos_x
11691                        		__sub.wi	16
         02:C3B7  38         			sec
         02:C3B8  E9 10      			sbc.l	#16
         02:C3BA  B0 01      			bcs	!+
         02:C3BC  88         			dey
         02:C3BD             	!:
11692                        		__call		_spr_x.1
         02:C3BD  20 0A E8   			call	_spr_x.1
11693                        	
11694                        		.dbg	line,	"include\routines_LEVELS.c", 2873; spr_set(weapon_id);
11695                        		__ld.umq	_weapon_id
         02:C3C0  AD 23 23   			lda	_weapon_id
11696                        		__call		_spr_set.1
         02:C3C3  20 DD E7   			call	_spr_set.1
11697                        	
11698                        		.dbg	line,	"include\routines_LEVELS.c", 2874; spr_x(player_pos_x-32);
11699                        		__ld.wm		_player_pos_x
         02:C3C6  AD D4 24   			lda.l	_player_pos_x
         02:C3C9  AC D5 24   			ldy.h	_player_pos_x
11700                        		__sub.wi	32
         02:C3CC  38         			sec
         02:C3CD  E9 20      			sbc.l	#32
         02:C3CF  B0 01      			bcs	!+
         02:C3D1  88         			dey
         02:C3D2             	!:
11701                        		__call		_spr_x.1
         02:C3D2  20 0A E8   			call	_spr_x.1
11702                        	
11703                        		.dbg	line,	"include\routines_LEVELS.c", 2875; }
11704    02:C3D5             	.LL516	.alias		.LL517
11705                        	
11706                        		.dbg	line,	"include\routines_LEVELS.c", 2876; }
11707                        	
11708                        		.dbg	line,	"include\routines_LEVELS.c", 2878; else if(player_counter_attack == 8)
11709                        		__bra		.LL517
         02:C3D5  4C 65 C5   			bra	.LL517
11710    02:C3D8             	.LL514:
11711                        		__ld.umq	_player_counter_attack
         02:C3D8  AD 1C 23   			lda	_player_counter_attack
11712                        		__equ_b.uiq	8
         02:C3DB  C9 08      			cmp	#8
         02:C3DD  F0 01      			beq	!+
         02:C3DF  18         			clc
         02:C3E0             	!:
11713                        		__bfalse	.LL518
         02:C3E0  90 71      			bcc	.LL518
11714                        	
11715                        		.dbg	line,	"include\routines_LEVELS.c", 2879; {
11716                        	
11717                        		.dbg	line,	"include\routines_LEVELS.c", 2880; spr_set(chain_id+1);
11718                        		__ld.um		_chain_id
         02:C3E2  AD 22 23   			lda	_chain_id
         02:C3E5  C2         			cly
11719                        		__add.wi	1
         02:C3E6  1A         			inc	a
         02:C3E7  D0 01      			bne	!+
         02:C3E9  C8         			iny
         02:C3EA             	!:
11720                        		__call		_spr_set.1
         02:C3EA  20 DD E7   			call	_spr_set.1
11721                        	
11722                        		.dbg	line,	"include\routines_LEVELS.c", 2881; spr_y(player_pos_y+8);
11723                        		__ld.wm		_player_pos_y
         02:C3ED  AD D6 24   			lda.l	_player_pos_y
         02:C3F0  AC D7 24   			ldy.h	_player_pos_y
11724                        		__add.wi	8
         02:C3F3  18         			clc
         02:C3F4  69 08      			adc.l	#8
         02:C3F6  90 01      			bcc	!+
         02:C3F8  C8         			iny
         02:C3F9             	!:
11725                        		__call		_spr_y.1
         02:C3F9  20 19 E8   			call	_spr_y.1
11726                        	
11727                        		.dbg	line,	"include\routines_LEVELS.c", 2883; if(player_axis == AXIS_RIGHT)
11728                        		__not.um	_player_axis
         02:C3FC  AD 17 23   			lda	_player_axis
         02:C3FF  18         			clc
         02:C400  D0 01      			bne	!+
         02:C402  38         			sec
         02:C403             	!:
11729                        		__bfalse	.LL519
         02:C403  90 27      			bcc	.LL519
11730                        	
11731                        		.dbg	line,	"include\routines_LEVELS.c", 2884; {
11732                        	
11733                        		.dbg	line,	"include\routines_LEVELS.c", 2885; spr_x(player_pos_x+48);
11734                        		__ld.wm		_player_pos_x
         02:C405  AD D4 24   			lda.l	_player_pos_x
         02:C408  AC D5 24   			ldy.h	_player_pos_x
11735                        		__add.wi	48
         02:C40B  18         			clc
         02:C40C  69 30      			adc.l	#48
         02:C40E  90 01      			bcc	!+
         02:C410  C8         			iny
         02:C411             	!:
11736                        		__call		_spr_x.1
         02:C411  20 0A E8   			call	_spr_x.1
11737                        	
11738                        		.dbg	line,	"include\routines_LEVELS.c", 2887; spr_set(weapon_id);
11739                        		__ld.umq	_weapon_id
         02:C414  AD 23 23   			lda	_weapon_id
11740                        		__call		_spr_set.1
         02:C417  20 DD E7   			call	_spr_set.1
11741                        	
11742                        		.dbg	line,	"include\routines_LEVELS.c", 2888; spr_x(player_pos_x+64);
11743                        		__ld.wm		_player_pos_x
         02:C41A  AD D4 24   			lda.l	_player_pos_x
         02:C41D  AC D5 24   			ldy.h	_player_pos_x
11744                        		__add.wi	64
         02:C420  18         			clc
         02:C421  69 40      			adc.l	#64
         02:C423  90 01      			bcc	!+
         02:C425  C8         			iny
         02:C426             	!:
11745                        		__call		_spr_x.1
         02:C426  20 0A E8   			call	_spr_x.1
11746                        	
11747                        		.dbg	line,	"include\routines_LEVELS.c", 2889; }
11748                        	
11749                        		.dbg	line,	"include\routines_LEVELS.c", 2890; 
11750                        	
11751                        		.dbg	line,	"include\routines_LEVELS.c", 2891; else
11752                        		__bra		.LL520
         02:C429  4C 65 C5   			bra	.LL520
11753    02:C42C             	.LL519:
11754                        	
11755                        		.dbg	line,	"include\routines_LEVELS.c", 2892; {
11756                        	
11757                        		.dbg	line,	"include\routines_LEVELS.c", 2893; spr_x(player_pos_x-32);
11758                        		__ld.wm		_player_pos_x
         02:C42C  AD D4 24   			lda.l	_player_pos_x
         02:C42F  AC D5 24   			ldy.h	_player_pos_x
11759                        		__sub.wi	32
         02:C432  38         			sec
         02:C433  E9 20      			sbc.l	#32
         02:C435  B0 01      			bcs	!+
         02:C437  88         			dey
         02:C438             	!:
11760                        		__call		_spr_x.1
         02:C438  20 0A E8   			call	_spr_x.1
11761                        	
11762                        		.dbg	line,	"include\routines_LEVELS.c", 2895; spr_set(weapon_id);
11763                        		__ld.umq	_weapon_id
         02:C43B  AD 23 23   			lda	_weapon_id
11764                        		__call		_spr_set.1
         02:C43E  20 DD E7   			call	_spr_set.1
11765                        	
11766                        		.dbg	line,	"include\routines_LEVELS.c", 2896; spr_x(player_pos_x-48);
11767                        		__ld.wm		_player_pos_x
         02:C441  AD D4 24   			lda.l	_player_pos_x
         02:C444  AC D5 24   			ldy.h	_player_pos_x
11768                        		__sub.wi	48
         02:C447  38         			sec
         02:C448  E9 30      			sbc.l	#48
         02:C44A  B0 01      			bcs	!+
         02:C44C  88         			dey
         02:C44D             	!:
11769                        		__call		_spr_x.1
         02:C44D  20 0A E8   			call	_spr_x.1
11770                        	
11771                        		.dbg	line,	"include\routines_LEVELS.c", 2897; }
11772    02:C450             	.LL520	.alias		.LL521
11773                        	
11774                        		.dbg	line,	"include\routines_LEVELS.c", 2898; }
11775                        	
11776                        		.dbg	line,	"include\routines_LEVELS.c", 2900; else if(player_counter_attack == 9)
11777                        		__bra		.LL521
         02:C450  4C 65 C5   			bra	.LL521
11778    02:C453             	.LL518:
11779                        		__ld.umq	_player_counter_attack
         02:C453  AD 1C 23   			lda	_player_counter_attack
11780                        		__equ_b.uiq	9
         02:C456  C9 09      			cmp	#9
         02:C458  F0 01      			beq	!+
         02:C45A  18         			clc
         02:C45B             	!:
11781                        		__bfalse	.LL522
         02:C45B  90 73      			bcc	.LL522
11782                        	
11783                        		.dbg	line,	"include\routines_LEVELS.c", 2901; {
11784                        	
11785                        		.dbg	line,	"include\routines_LEVELS.c", 2902; spr_set(chain_id+2);
11786                        		__ld.um		_chain_id
         02:C45D  AD 22 23   			lda	_chain_id
         02:C460  C2         			cly
11787                        		__add.wi	2
         02:C461  18         			clc
         02:C462  69 02      			adc.l	#2
         02:C464  90 01      			bcc	!+
         02:C466  C8         			iny
         02:C467             	!:
11788                        		__call		_spr_set.1
         02:C467  20 DD E7   			call	_spr_set.1
11789                        	
11790                        		.dbg	line,	"include\routines_LEVELS.c", 2903; spr_y(player_pos_y+8);
11791                        		__ld.wm		_player_pos_y
         02:C46A  AD D6 24   			lda.l	_player_pos_y
         02:C46D  AC D7 24   			ldy.h	_player_pos_y
11792                        		__add.wi	8
         02:C470  18         			clc
         02:C471  69 08      			adc.l	#8
         02:C473  90 01      			bcc	!+
         02:C475  C8         			iny
         02:C476             	!:
11793                        		__call		_spr_y.1
         02:C476  20 19 E8   			call	_spr_y.1
11794                        	
11795                        		.dbg	line,	"include\routines_LEVELS.c", 2905; if(player_axis == AXIS_RIGHT)
11796                        		__not.um	_player_axis
         02:C479  AD 17 23   			lda	_player_axis
         02:C47C  18         			clc
         02:C47D  D0 01      			bne	!+
         02:C47F  38         			sec
         02:C480             	!:
11797                        		__bfalse	.LL523
         02:C480  90 27      			bcc	.LL523
11798                        	
11799                        		.dbg	line,	"include\routines_LEVELS.c", 2906; {
11800                        	
11801                        		.dbg	line,	"include\routines_LEVELS.c", 2907; spr_x(player_pos_x+64);
11802                        		__ld.wm		_player_pos_x
         02:C482  AD D4 24   			lda.l	_player_pos_x
         02:C485  AC D5 24   			ldy.h	_player_pos_x
11803                        		__add.wi	64
         02:C488  18         			clc
         02:C489  69 40      			adc.l	#64
         02:C48B  90 01      			bcc	!+
         02:C48D  C8         			iny
         02:C48E             	!:
11804                        		__call		_spr_x.1
         02:C48E  20 0A E8   			call	_spr_x.1
11805                        	
11806                        		.dbg	line,	"include\routines_LEVELS.c", 2909; spr_set(weapon_id);
11807                        		__ld.umq	_weapon_id
         02:C491  AD 23 23   			lda	_weapon_id
11808                        		__call		_spr_set.1
         02:C494  20 DD E7   			call	_spr_set.1
11809                        	
11810                        		.dbg	line,	"include\routines_LEVELS.c", 2910; spr_x(player_pos_x+80);
11811                        		__ld.wm		_player_pos_x
         02:C497  AD D4 24   			lda.l	_player_pos_x
         02:C49A  AC D5 24   			ldy.h	_player_pos_x
11812                        		__add.wi	80
         02:C49D  18         			clc
         02:C49E  69 50      			adc.l	#80
         02:C4A0  90 01      			bcc	!+
         02:C4A2  C8         			iny
         02:C4A3             	!:
11813                        		__call		_spr_x.1
         02:C4A3  20 0A E8   			call	_spr_x.1
11814                        	
11815                        		.dbg	line,	"include\routines_LEVELS.c", 2911; }
11816                        	
11817                        		.dbg	line,	"include\routines_LEVELS.c", 2912; 
11818                        	
11819                        		.dbg	line,	"include\routines_LEVELS.c", 2913; else
11820                        		__bra		.LL524
         02:C4A6  4C 65 C5   			bra	.LL524
11821    02:C4A9             	.LL523:
11822                        	
11823                        		.dbg	line,	"include\routines_LEVELS.c", 2914; {
11824                        	
11825                        		.dbg	line,	"include\routines_LEVELS.c", 2915; spr_x(player_pos_x-48);
11826                        		__ld.wm		_player_pos_x
         02:C4A9  AD D4 24   			lda.l	_player_pos_x
         02:C4AC  AC D5 24   			ldy.h	_player_pos_x
11827                        		__sub.wi	48
         02:C4AF  38         			sec
         02:C4B0  E9 30      			sbc.l	#48
         02:C4B2  B0 01      			bcs	!+
         02:C4B4  88         			dey
         02:C4B5             	!:
11828                        		__call		_spr_x.1
         02:C4B5  20 0A E8   			call	_spr_x.1
11829                        	
11830                        		.dbg	line,	"include\routines_LEVELS.c", 2917; spr_set(weapon_id);
11831                        		__ld.umq	_weapon_id
         02:C4B8  AD 23 23   			lda	_weapon_id
11832                        		__call		_spr_set.1
         02:C4BB  20 DD E7   			call	_spr_set.1
11833                        	
11834                        		.dbg	line,	"include\routines_LEVELS.c", 2918; spr_x(player_pos_x-64);
11835                        		__ld.wm		_player_pos_x
         02:C4BE  AD D4 24   			lda.l	_player_pos_x
         02:C4C1  AC D5 24   			ldy.h	_player_pos_x
11836                        		__sub.wi	64
         02:C4C4  38         			sec
         02:C4C5  E9 40      			sbc.l	#64
         02:C4C7  B0 01      			bcs	!+
         02:C4C9  88         			dey
         02:C4CA             	!:
11837                        		__call		_spr_x.1
         02:C4CA  20 0A E8   			call	_spr_x.1
11838                        	
11839                        		.dbg	line,	"include\routines_LEVELS.c", 2919; }
11840    02:C4CD             	.LL524	.alias		.LL525
11841                        	
11842                        		.dbg	line,	"include\routines_LEVELS.c", 2920; }
11843                        	
11844                        		.dbg	line,	"include\routines_LEVELS.c", 2922; else if(player_counter_attack == 23)
11845                        		__bra		.LL525
         02:C4CD  4C 65 C5   			bra	.LL525
11846    02:C4D0             	.LL522:
11847                        		__ld.umq	_player_counter_attack
         02:C4D0  AD 1C 23   			lda	_player_counter_attack
11848                        		__equ_b.uiq	23
         02:C4D3  C9 17      			cmp	#23
         02:C4D5  F0 01      			beq	!+
         02:C4D7  18         			clc
         02:C4D8             	!:
11849                        		__bfalse	.LL526
         02:C4D8  B0 03 4C 65			bcc	.LL526
         02:C4DC  C5          
11850                        	
11851                        		.dbg	line,	"include\routines_LEVELS.c", 2923; {
11852                        	
11853                        		.dbg	line,	"include\routines_LEVELS.c", 2924; spr_set(chain_id);
11854                        		__ld.umq	_chain_id
         02:C4DD  AD 22 23   			lda	_chain_id
11855                        		__call		_spr_set.1
         02:C4E0  20 DD E7   			call	_spr_set.1
11856                        	
11857                        		.dbg	line,	"include\routines_LEVELS.c", 2925; spr_hide();
11858                        		__call		_spr_hide
         02:C4E3  20 F8 E7   			call	_spr_hide
11859                        	
11860                        		.dbg	line,	"include\routines_LEVELS.c", 2927; spr_set(chain_id+1);
11861                        		__ld.um		_chain_id
         02:C4E6  AD 22 23   			lda	_chain_id
         02:C4E9  C2         			cly
11862                        		__add.wi	1
         02:C4EA  1A         			inc	a
         02:C4EB  D0 01      			bne	!+
         02:C4ED  C8         			iny
         02:C4EE             	!:
11863                        		__call		_spr_set.1
         02:C4EE  20 DD E7   			call	_spr_set.1
11864                        	
11865                        		.dbg	line,	"include\routines_LEVELS.c", 2928; spr_hide();
11866                        		__call		_spr_hide
         02:C4F1  20 F8 E7   			call	_spr_hide
11867                        	
11868                        		.dbg	line,	"include\routines_LEVELS.c", 2930; spr_set(chain_id+2);
11869                        		__ld.um		_chain_id
         02:C4F4  AD 22 23   			lda	_chain_id
         02:C4F7  C2         			cly
11870                        		__add.wi	2
         02:C4F8  18         			clc
         02:C4F9  69 02      			adc.l	#2
         02:C4FB  90 01      			bcc	!+
         02:C4FD  C8         			iny
         02:C4FE             	!:
11871                        		__call		_spr_set.1
         02:C4FE  20 DD E7   			call	_spr_set.1
11872                        	
11873                        		.dbg	line,	"include\routines_LEVELS.c", 2931; spr_hide();
11874                        		__call		_spr_hide
         02:C501  20 F8 E7   			call	_spr_hide
11875                        	
11876                        		.dbg	line,	"include\routines_LEVELS.c", 2933; spr_set(player_id);
11877                        		__ld.umq	_player_id
         02:C504  AD 15 23   			lda	_player_id
11878                        		__call		_spr_set.1
         02:C507  20 DD E7   			call	_spr_set.1
11879                        	
11880                        		.dbg	line,	"include\routines_LEVELS.c", 2934; spr_pattern(PLAYER_CROUCH_VRAM_ADR);
11881                        		__ld.wi		7168
         02:C50A  62         			cla
         02:C50B  A0 1C      			ldy.h	#7168
11882                        		__call		_spr_pattern.1
         02:C50D  20 26 E8   			call	_spr_pattern.1
11883                        	
11884                        		.dbg	line,	"include\routines_LEVELS.c", 2936; spr_set(weapon_id);
11885                        		__ld.umq	_weapon_id
         02:C510  AD 23 23   			lda	_weapon_id
11886                        		__call		_spr_set.1
         02:C513  20 DD E7   			call	_spr_set.1
11887                        	
11888                        		.dbg	line,	"include\routines_LEVELS.c", 2937; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
11889                        		__ld.wi		31808
         02:C516  A9 40      			lda.l	#31808
         02:C518  A0 7C      			ldy.h	#31808
11890                        		__call		_spr_pattern.1
         02:C51A  20 26 E8   			call	_spr_pattern.1
11891                        	
11892                        		.dbg	line,	"include\routines_LEVELS.c", 2938; 
11893                        	
11894                        		.dbg	line,	"include\routines_LEVELS.c", 2939; if(player_axis == AXIS_RIGHT)
11895                        		__not.um	_player_axis
         02:C51D  AD 17 23   			lda	_player_axis
         02:C520  18         			clc
         02:C521  D0 01      			bne	!+
         02:C523  38         			sec
         02:C524             	!:
11896                        		__bfalse	.LL527
         02:C524  90 11      			bcc	.LL527
11897                        	
11898                        		.dbg	line,	"include\routines_LEVELS.c", 2940; {
11899                        	
11900                        		.dbg	line,	"include\routines_LEVELS.c", 2941; spr_x(player_pos_x-1);
11901                        		__ld.wm		_player_pos_x
         02:C526  AD D4 24   			lda.l	_player_pos_x
         02:C529  AC D5 24   			ldy.h	_player_pos_x
11902                        		__sub.wi	1
         02:C52C  38         			sec
         02:C52D  E9 01      			sbc.l	#1
         02:C52F  B0 01      			bcs	!+
         02:C531  88         			dey
         02:C532             	!:
11903                        		__call		_spr_x.1
         02:C532  20 0A E8   			call	_spr_x.1
11904                        	
11905                        		.dbg	line,	"include\routines_LEVELS.c", 2942; }
11906                        	
11907                        		.dbg	line,	"include\routines_LEVELS.c", 2944; else
11908                        		__bra		.LL528
         02:C535  80 0F      			bra	.LL528
11909    02:C537             	.LL527:
11910                        	
11911                        		.dbg	line,	"include\routines_LEVELS.c", 2945; {
11912                        	
11913                        		.dbg	line,	"include\routines_LEVELS.c", 2946; spr_x(player_pos_x+17);
11914                        		__ld.wm		_player_pos_x
         02:C537  AD D4 24   			lda.l	_player_pos_x
         02:C53A  AC D5 24   			ldy.h	_player_pos_x
11915                        		__add.wi	17
         02:C53D  18         			clc
         02:C53E  69 11      			adc.l	#17
         02:C540  90 01      			bcc	!+
         02:C542  C8         			iny
         02:C543             	!:
11916                        		__call		_spr_x.1
         02:C543  20 0A E8   			call	_spr_x.1
11917                        	
11918                        		.dbg	line,	"include\routines_LEVELS.c", 2947; }
11919    02:C546             	.LL528:
11920                        	
11921                        		.dbg	line,	"include\routines_LEVELS.c", 2949; spr_y(player_pos_y+18);
11922                        		__ld.wm		_player_pos_y
         02:C546  AD D6 24   			lda.l	_player_pos_y
         02:C549  AC D7 24   			ldy.h	_player_pos_y
11923                        		__add.wi	18
         02:C54C  18         			clc
         02:C54D  69 12      			adc.l	#18
         02:C54F  90 01      			bcc	!+
         02:C551  C8         			iny
         02:C552             	!:
11924                        		__call		_spr_y.1
         02:C552  20 19 E8   			call	_spr_y.1
11925                        	
11926                        		.dbg	line,	"include\routines_LEVELS.c", 2951; player_attack = FALSE;
11927                        		__st.umiq	0, _player_attack
         02:C555  9C 1E 23   			stz	_player_attack
11928                        	
11929                        		.dbg	line,	"include\routines_LEVELS.c", 2952; player_counter_attack = 1;
11930                        		__st.umiq	1, _player_counter_attack
         02:C558  A9 01      			lda.l	#1
         02:C55A  8D 1C 23   			sta	_player_counter_attack
11931                        	
11932                        		.dbg	line,	"include\routines_LEVELS.c", 2953; player_state = STATE_CROUCH;
11933                        		__st.umiq	7, _player_state
         02:C55D  A9 07      			lda.l	#7
         02:C55F  8D 16 23   			sta	_player_state
11934                        	
11935                        		.dbg	line,	"include\routines_LEVELS.c", 2954; return;
11936                        		__bra		.LL481
         02:C562  4C 2E C8   			bra	.LL481
11937                        	
11938                        		.dbg	line,	"include\routines_LEVELS.c", 2955; }
11939                        	
11940                        		.dbg	line,	"include\routines_LEVELS.c", 2958; player_counter_attack += 1;
11941    02:C565             	.LL526:
11942    02:C565             	.LL525:
11943    02:C565             	.LL521:
11944    02:C565             	.LL517:
11945    02:C565             	.LL513:
11946    02:C565             	.LL509:
11947                        		__add_st.umiq	1, _player_counter_attack
         02:C565  EE 1C 23   			inc	_player_counter_attack
11948                        	
11949                        		.dbg	line,	"include\routines_LEVELS.c", 2959; }
11950                        	
11951                        		.dbg	line,	"include\routines_LEVELS.c", 2962; else if(player_state == STATE_HANG)
11952                        		__bra		.LL529
         02:C568  4C 2E C8   			bra	.LL529
11953    02:C56B             	.LL505:
11954                        		__ld.umq	_player_state
         02:C56B  AD 16 23   			lda	_player_state
11955                        		__equ_b.uiq	10
         02:C56E  C9 0A      			cmp	#10
         02:C570  F0 01      			beq	!+
         02:C572  18         			clc
         02:C573             	!:
11956                        		__bfalse	.LL530
         02:C573  B0 03 4C 2E			bcc	.LL530
         02:C577  C8          
11957                        	
11958                        		.dbg	line,	"include\routines_LEVELS.c", 2963; {
11959                        	
11960                        		.dbg	line,	"include\routines_LEVELS.c", 2964; if(player_attack == TRUE)
11961                        		__ld.umq	_player_attack
         02:C578  AD 1E 23   			lda	_player_attack
11962                        		__equ_b.uiq	1
         02:C57B  C9 01      			cmp	#1
         02:C57D  F0 01      			beq	!+
         02:C57F  18         			clc
         02:C580             	!:
11963                        		__bfalse	.LL531
         02:C580  B0 03 4C 2E			bcc	.LL531
         02:C584  C8          
11964                        	
11965                        		.dbg	line,	"include\routines_LEVELS.c", 2965; {
11966                        	
11967                        		.dbg	line,	"include\routines_LEVELS.c", 2966; if(player_counter_attack == 0)
11968                        		__not.um	_player_counter_attack
         02:C585  AD 1C 23   			lda	_player_counter_attack
         02:C588  18         			clc
         02:C589  D0 01      			bne	!+
         02:C58B  38         			sec
         02:C58C             	!:
11969                        		__bfalse	.LL532
         02:C58C  90 53      			bcc	.LL532
11970                        	
11971                        		.dbg	line,	"include\routines_LEVELS.c", 2967; {
11972                        	
11973                        		.dbg	line,	"include\routines_LEVELS.c", 2968; spr_set(player_id);
11974                        		__ld.umq	_player_id
         02:C58E  AD 15 23   			lda	_player_id
11975                        		__call		_spr_set.1
         02:C591  20 DD E7   			call	_spr_set.1
11976                        	
11977                        		.dbg	line,	"include\routines_LEVELS.c", 2969; spr_pattern(PLAYER_HANG_ATTACK_1_VRAM_ADR);
11978                        		__ld.wi		11008
         02:C594  62         			cla
         02:C595  A0 2B      			ldy.h	#11008
11979                        		__call		_spr_pattern.1
         02:C597  20 26 E8   			call	_spr_pattern.1
11980                        	
11981                        		.dbg	line,	"include\routines_LEVELS.c", 2971; spr_set(weapon_id);
11982                        		__ld.umq	_weapon_id
         02:C59A  AD 23 23   			lda	_weapon_id
11983                        		__call		_spr_set.1
         02:C59D  20 DD E7   			call	_spr_set.1
11984                        	
11985                        		.dbg	line,	"include\routines_LEVELS.c", 2972; spr_pattern(WEAPON_ATTACK_1_VRAM_ADRESS);
11986                        		__ld.wi		32000
         02:C5A0  62         			cla
         02:C5A1  A0 7D      			ldy.h	#32000
11987                        		__call		_spr_pattern.1
         02:C5A3  20 26 E8   			call	_spr_pattern.1
11988                        	
11989                        		.dbg	line,	"include\routines_LEVELS.c", 2974; if(player_axis == AXIS_RIGHT)
11990                        		__not.um	_player_axis
         02:C5A6  AD 17 23   			lda	_player_axis
         02:C5A9  18         			clc
         02:C5AA  D0 01      			bne	!+
         02:C5AC  38         			sec
         02:C5AD             	!:
11991                        		__bfalse	.LL533
         02:C5AD  90 11      			bcc	.LL533
11992                        	
11993                        		.dbg	line,	"include\routines_LEVELS.c", 2975; {
11994                        	
11995                        		.dbg	line,	"include\routines_LEVELS.c", 2976; spr_x(player_pos_x-14);
11996                        		__ld.wm		_player_pos_x
         02:C5AF  AD D4 24   			lda.l	_player_pos_x
         02:C5B2  AC D5 24   			ldy.h	_player_pos_x
11997                        		__sub.wi	14
         02:C5B5  38         			sec
         02:C5B6  E9 0E      			sbc.l	#14
         02:C5B8  B0 01      			bcs	!+
         02:C5BA  88         			dey
         02:C5BB             	!:
11998                        		__call		_spr_x.1
         02:C5BB  20 0A E8   			call	_spr_x.1
11999                        	
12000                        		.dbg	line,	"include\routines_LEVELS.c", 2977; }
12001                        	
12002                        		.dbg	line,	"include\routines_LEVELS.c", 2979; else
12003                        		__bra		.LL534
         02:C5BE  80 0F      			bra	.LL534
12004    02:C5C0             	.LL533:
12005                        	
12006                        		.dbg	line,	"include\routines_LEVELS.c", 2980; {
12007                        	
12008                        		.dbg	line,	"include\routines_LEVELS.c", 2981; spr_x(player_pos_x+29);
12009                        		__ld.wm		_player_pos_x
         02:C5C0  AD D4 24   			lda.l	_player_pos_x
         02:C5C3  AC D5 24   			ldy.h	_player_pos_x
12010                        		__add.wi	29
         02:C5C6  18         			clc
         02:C5C7  69 1D      			adc.l	#29
         02:C5C9  90 01      			bcc	!+
         02:C5CB  C8         			iny
         02:C5CC             	!:
12011                        		__call		_spr_x.1
         02:C5CC  20 0A E8   			call	_spr_x.1
12012                        	
12013                        		.dbg	line,	"include\routines_LEVELS.c", 2982; }
12014    02:C5CF             	.LL534:
12015                        	
12016                        		.dbg	line,	"include\routines_LEVELS.c", 2984; spr_y(player_pos_y-8);
12017                        		__ld.wm		_player_pos_y
         02:C5CF  AD D6 24   			lda.l	_player_pos_y
         02:C5D2  AC D7 24   			ldy.h	_player_pos_y
12018                        		__sub.wi	8
         02:C5D5  38         			sec
         02:C5D6  E9 08      			sbc.l	#8
         02:C5D8  B0 01      			bcs	!+
         02:C5DA  88         			dey
         02:C5DB             	!:
12019                        		__call		_spr_y.1
         02:C5DB  20 19 E8   			call	_spr_y.1
12020                        	
12021                        		.dbg	line,	"include\routines_LEVELS.c", 2985; }
12022                        	
12023                        		.dbg	line,	"include\routines_LEVELS.c", 2987; else if(player_counter_attack == 6)
12024                        		__bra		.LL535
         02:C5DE  4C 2B C8   			bra	.LL535
12025    02:C5E1             	.LL532:
12026                        		__ld.umq	_player_counter_attack
         02:C5E1  AD 1C 23   			lda	_player_counter_attack
12027                        		__equ_b.uiq	6
         02:C5E4  C9 06      			cmp	#6
         02:C5E6  F0 01      			beq	!+
         02:C5E8  18         			clc
         02:C5E9             	!:
12028                        		__bfalse	.LL536
         02:C5E9  90 54      			bcc	.LL536
12029                        	
12030                        		.dbg	line,	"include\routines_LEVELS.c", 2988; {
12031                        	
12032                        		.dbg	line,	"include\routines_LEVELS.c", 2989; spr_set(player_id);
12033                        		__ld.umq	_player_id
         02:C5EB  AD 15 23   			lda	_player_id
12034                        		__call		_spr_set.1
         02:C5EE  20 DD E7   			call	_spr_set.1
12035                        	
12036                        		.dbg	line,	"include\routines_LEVELS.c", 2990; spr_pattern(PLAYER_HANG_ATTACK_2_VRAM_ADR);
12037                        		__ld.wi		11264
         02:C5F1  62         			cla
         02:C5F2  A0 2C      			ldy.h	#11264
12038                        		__call		_spr_pattern.1
         02:C5F4  20 26 E8   			call	_spr_pattern.1
12039                        	
12040                        		.dbg	line,	"include\routines_LEVELS.c", 2992; spr_set(weapon_id);
12041                        		__ld.umq	_weapon_id
         02:C5F7  AD 23 23   			lda	_weapon_id
12042                        		__call		_spr_set.1
         02:C5FA  20 DD E7   			call	_spr_set.1
12043                        	
12044                        		.dbg	line,	"include\routines_LEVELS.c", 2993; spr_pattern(WEAPON_ATTACK_2_VRAM_ADRESS);
12045                        		__ld.wi		32064
         02:C5FD  A9 40      			lda.l	#32064
         02:C5FF  A0 7D      			ldy.h	#32064
12046                        		__call		_spr_pattern.1
         02:C601  20 26 E8   			call	_spr_pattern.1
12047                        	
12048                        		.dbg	line,	"include\routines_LEVELS.c", 2995; if(player_axis == AXIS_RIGHT)
12049                        		__not.um	_player_axis
         02:C604  AD 17 23   			lda	_player_axis
         02:C607  18         			clc
         02:C608  D0 01      			bne	!+
         02:C60A  38         			sec
         02:C60B             	!:
12050                        		__bfalse	.LL537
         02:C60B  90 11      			bcc	.LL537
12051                        	
12052                        		.dbg	line,	"include\routines_LEVELS.c", 2996; {
12053                        	
12054                        		.dbg	line,	"include\routines_LEVELS.c", 2997; spr_x(player_pos_x+32);
12055                        		__ld.wm		_player_pos_x
         02:C60D  AD D4 24   			lda.l	_player_pos_x
         02:C610  AC D5 24   			ldy.h	_player_pos_x
12056                        		__add.wi	32
         02:C613  18         			clc
         02:C614  69 20      			adc.l	#32
         02:C616  90 01      			bcc	!+
         02:C618  C8         			iny
         02:C619             	!:
12057                        		__call		_spr_x.1
         02:C619  20 0A E8   			call	_spr_x.1
12058                        	
12059                        		.dbg	line,	"include\routines_LEVELS.c", 2998; 
12060                        	
12061                        		.dbg	line,	"include\routines_LEVELS.c", 2999; }
12062                        	
12063                        		.dbg	line,	"include\routines_LEVELS.c", 3000; 
12064                        	
12065                        		.dbg	line,	"include\routines_LEVELS.c", 3001; else
12066                        		__bra		.LL538
         02:C61C  80 0F      			bra	.LL538
12067    02:C61E             	.LL537:
12068                        	
12069                        		.dbg	line,	"include\routines_LEVELS.c", 3002; {
12070                        	
12071                        		.dbg	line,	"include\routines_LEVELS.c", 3003; spr_x(player_pos_x-16);
12072                        		__ld.wm		_player_pos_x
         02:C61E  AD D4 24   			lda.l	_player_pos_x
         02:C621  AC D5 24   			ldy.h	_player_pos_x
12073                        		__sub.wi	16
         02:C624  38         			sec
         02:C625  E9 10      			sbc.l	#16
         02:C627  B0 01      			bcs	!+
         02:C629  88         			dey
         02:C62A             	!:
12074                        		__call		_spr_x.1
         02:C62A  20 0A E8   			call	_spr_x.1
12075                        	
12076                        		.dbg	line,	"include\routines_LEVELS.c", 3004; }
12077    02:C62D             	.LL538:
12078                        	
12079                        		.dbg	line,	"include\routines_LEVELS.c", 3006; spr_y(player_pos_y+6);
12080                        		__ld.wm		_player_pos_y
         02:C62D  AD D6 24   			lda.l	_player_pos_y
         02:C630  AC D7 24   			ldy.h	_player_pos_y
12081                        		__add.wi	6
         02:C633  18         			clc
         02:C634  69 06      			adc.l	#6
         02:C636  90 01      			bcc	!+
         02:C638  C8         			iny
         02:C639             	!:
12082                        		__call		_spr_y.1
         02:C639  20 19 E8   			call	_spr_y.1
12083                        	
12084                        		.dbg	line,	"include\routines_LEVELS.c", 3007; }
12085                        	
12086                        		.dbg	line,	"include\routines_LEVELS.c", 3009; else if(player_counter_attack == 7)
12087                        		__bra		.LL539
         02:C63C  4C 2B C8   			bra	.LL539
12088    02:C63F             	.LL536:
12089                        		__ld.umq	_player_counter_attack
         02:C63F  AD 1C 23   			lda	_player_counter_attack
12090                        		__equ_b.uiq	7
         02:C642  C9 07      			cmp	#7
         02:C644  F0 01      			beq	!+
         02:C646  18         			clc
         02:C647             	!:
12091                        		__bfalse	.LL540
         02:C647  90 66      			bcc	.LL540
12092                        	
12093                        		.dbg	line,	"include\routines_LEVELS.c", 3010; {
12094                        	
12095                        		.dbg	line,	"include\routines_LEVELS.c", 3011; spr_set(chain_id);
12096                        		__ld.umq	_chain_id
         02:C649  AD 22 23   			lda	_chain_id
12097                        		__call		_spr_set.1
         02:C64C  20 DD E7   			call	_spr_set.1
12098                        	
12099                        		.dbg	line,	"include\routines_LEVELS.c", 3012; spr_y(player_pos_y);
12100                        		__ld.wm		_player_pos_y
         02:C64F  AD D6 24   			lda.l	_player_pos_y
         02:C652  AC D7 24   			ldy.h	_player_pos_y
12101                        		__call		_spr_y.1
         02:C655  20 19 E8   			call	_spr_y.1
12102                        	
12103                        		.dbg	line,	"include\routines_LEVELS.c", 3014; if(player_axis == AXIS_RIGHT)
12104                        		__not.um	_player_axis
         02:C658  AD 17 23   			lda	_player_axis
         02:C65B  18         			clc
         02:C65C  D0 01      			bne	!+
         02:C65E  38         			sec
         02:C65F             	!:
12105                        		__bfalse	.LL541
         02:C65F  90 27      			bcc	.LL541
12106                        	
12107                        		.dbg	line,	"include\routines_LEVELS.c", 3015; {
12108                        	
12109                        		.dbg	line,	"include\routines_LEVELS.c", 3016; spr_x(player_pos_x+32);
12110                        		__ld.wm		_player_pos_x
         02:C661  AD D4 24   			lda.l	_player_pos_x
         02:C664  AC D5 24   			ldy.h	_player_pos_x
12111                        		__add.wi	32
         02:C667  18         			clc
         02:C668  69 20      			adc.l	#32
         02:C66A  90 01      			bcc	!+
         02:C66C  C8         			iny
         02:C66D             	!:
12112                        		__call		_spr_x.1
         02:C66D  20 0A E8   			call	_spr_x.1
12113                        	
12114                        		.dbg	line,	"include\routines_LEVELS.c", 3018; spr_set(weapon_id);
12115                        		__ld.umq	_weapon_id
         02:C670  AD 23 23   			lda	_weapon_id
12116                        		__call		_spr_set.1
         02:C673  20 DD E7   			call	_spr_set.1
12117                        	
12118                        		.dbg	line,	"include\routines_LEVELS.c", 3019; spr_x(player_pos_x+48);
12119                        		__ld.wm		_player_pos_x
         02:C676  AD D4 24   			lda.l	_player_pos_x
         02:C679  AC D5 24   			ldy.h	_player_pos_x
12120                        		__add.wi	48
         02:C67C  18         			clc
         02:C67D  69 30      			adc.l	#48
         02:C67F  90 01      			bcc	!+
         02:C681  C8         			iny
         02:C682             	!:
12121                        		__call		_spr_x.1
         02:C682  20 0A E8   			call	_spr_x.1
12122                        	
12123                        		.dbg	line,	"include\routines_LEVELS.c", 3020; }
12124                        	
12125                        		.dbg	line,	"include\routines_LEVELS.c", 3021; 
12126                        	
12127                        		.dbg	line,	"include\routines_LEVELS.c", 3022; else
12128                        		__bra		.LL542
         02:C685  4C 2B C8   			bra	.LL542
12129    02:C688             	.LL541:
12130                        	
12131                        		.dbg	line,	"include\routines_LEVELS.c", 3023; {
12132                        	
12133                        		.dbg	line,	"include\routines_LEVELS.c", 3024; spr_x(player_pos_x-16);
12134                        		__ld.wm		_player_pos_x
         02:C688  AD D4 24   			lda.l	_player_pos_x
         02:C68B  AC D5 24   			ldy.h	_player_pos_x
12135                        		__sub.wi	16
         02:C68E  38         			sec
         02:C68F  E9 10      			sbc.l	#16
         02:C691  B0 01      			bcs	!+
         02:C693  88         			dey
         02:C694             	!:
12136                        		__call		_spr_x.1
         02:C694  20 0A E8   			call	_spr_x.1
12137                        	
12138                        		.dbg	line,	"include\routines_LEVELS.c", 3026; spr_set(weapon_id);
12139                        		__ld.umq	_weapon_id
         02:C697  AD 23 23   			lda	_weapon_id
12140                        		__call		_spr_set.1
         02:C69A  20 DD E7   			call	_spr_set.1
12141                        	
12142                        		.dbg	line,	"include\routines_LEVELS.c", 3027; spr_x(player_pos_x-32);
12143                        		__ld.wm		_player_pos_x
         02:C69D  AD D4 24   			lda.l	_player_pos_x
         02:C6A0  AC D5 24   			ldy.h	_player_pos_x
12144                        		__sub.wi	32
         02:C6A3  38         			sec
         02:C6A4  E9 20      			sbc.l	#32
         02:C6A6  B0 01      			bcs	!+
         02:C6A8  88         			dey
         02:C6A9             	!:
12145                        		__call		_spr_x.1
         02:C6A9  20 0A E8   			call	_spr_x.1
12146                        	
12147                        		.dbg	line,	"include\routines_LEVELS.c", 3028; }
12148    02:C6AC             	.LL542	.alias		.LL543
12149                        	
12150                        		.dbg	line,	"include\routines_LEVELS.c", 3029; }
12151                        	
12152                        		.dbg	line,	"include\routines_LEVELS.c", 3031; else if(player_counter_attack == 8)
12153                        		__bra		.LL543
         02:C6AC  4C 2B C8   			bra	.LL543
12154    02:C6AF             	.LL540:
12155                        		__ld.umq	_player_counter_attack
         02:C6AF  AD 1C 23   			lda	_player_counter_attack
12156                        		__equ_b.uiq	8
         02:C6B2  C9 08      			cmp	#8
         02:C6B4  F0 01      			beq	!+
         02:C6B6  18         			clc
         02:C6B7             	!:
12157                        		__bfalse	.LL544
         02:C6B7  90 6B      			bcc	.LL544
12158                        	
12159                        		.dbg	line,	"include\routines_LEVELS.c", 3032; {
12160                        	
12161                        		.dbg	line,	"include\routines_LEVELS.c", 3033; spr_set(chain_id+1);
12162                        		__ld.um		_chain_id
         02:C6B9  AD 22 23   			lda	_chain_id
         02:C6BC  C2         			cly
12163                        		__add.wi	1
         02:C6BD  1A         			inc	a
         02:C6BE  D0 01      			bne	!+
         02:C6C0  C8         			iny
         02:C6C1             	!:
12164                        		__call		_spr_set.1
         02:C6C1  20 DD E7   			call	_spr_set.1
12165                        	
12166                        		.dbg	line,	"include\routines_LEVELS.c", 3034; spr_y(player_pos_y);
12167                        		__ld.wm		_player_pos_y
         02:C6C4  AD D6 24   			lda.l	_player_pos_y
         02:C6C7  AC D7 24   			ldy.h	_player_pos_y
12168                        		__call		_spr_y.1
         02:C6CA  20 19 E8   			call	_spr_y.1
12169                        	
12170                        		.dbg	line,	"include\routines_LEVELS.c", 3036; if(player_axis == AXIS_RIGHT)
12171                        		__not.um	_player_axis
         02:C6CD  AD 17 23   			lda	_player_axis
         02:C6D0  18         			clc
         02:C6D1  D0 01      			bne	!+
         02:C6D3  38         			sec
         02:C6D4             	!:
12172                        		__bfalse	.LL545
         02:C6D4  90 27      			bcc	.LL545
12173                        	
12174                        		.dbg	line,	"include\routines_LEVELS.c", 3037; {
12175                        	
12176                        		.dbg	line,	"include\routines_LEVELS.c", 3038; spr_x(player_pos_x+48);
12177                        		__ld.wm		_player_pos_x
         02:C6D6  AD D4 24   			lda.l	_player_pos_x
         02:C6D9  AC D5 24   			ldy.h	_player_pos_x
12178                        		__add.wi	48
         02:C6DC  18         			clc
         02:C6DD  69 30      			adc.l	#48
         02:C6DF  90 01      			bcc	!+
         02:C6E1  C8         			iny
         02:C6E2             	!:
12179                        		__call		_spr_x.1
         02:C6E2  20 0A E8   			call	_spr_x.1
12180                        	
12181                        		.dbg	line,	"include\routines_LEVELS.c", 3040; spr_set(weapon_id);
12182                        		__ld.umq	_weapon_id
         02:C6E5  AD 23 23   			lda	_weapon_id
12183                        		__call		_spr_set.1
         02:C6E8  20 DD E7   			call	_spr_set.1
12184                        	
12185                        		.dbg	line,	"include\routines_LEVELS.c", 3041; spr_x(player_pos_x+64);
12186                        		__ld.wm		_player_pos_x
         02:C6EB  AD D4 24   			lda.l	_player_pos_x
         02:C6EE  AC D5 24   			ldy.h	_player_pos_x
12187                        		__add.wi	64
         02:C6F1  18         			clc
         02:C6F2  69 40      			adc.l	#64
         02:C6F4  90 01      			bcc	!+
         02:C6F6  C8         			iny
         02:C6F7             	!:
12188                        		__call		_spr_x.1
         02:C6F7  20 0A E8   			call	_spr_x.1
12189                        	
12190                        		.dbg	line,	"include\routines_LEVELS.c", 3042; }
12191                        	
12192                        		.dbg	line,	"include\routines_LEVELS.c", 3043; 
12193                        	
12194                        		.dbg	line,	"include\routines_LEVELS.c", 3044; else
12195                        		__bra		.LL546
         02:C6FA  4C 2B C8   			bra	.LL546
12196    02:C6FD             	.LL545:
12197                        	
12198                        		.dbg	line,	"include\routines_LEVELS.c", 3045; {
12199                        	
12200                        		.dbg	line,	"include\routines_LEVELS.c", 3046; spr_x(player_pos_x-32);
12201                        		__ld.wm		_player_pos_x
         02:C6FD  AD D4 24   			lda.l	_player_pos_x
         02:C700  AC D5 24   			ldy.h	_player_pos_x
12202                        		__sub.wi	32
         02:C703  38         			sec
         02:C704  E9 20      			sbc.l	#32
         02:C706  B0 01      			bcs	!+
         02:C708  88         			dey
         02:C709             	!:
12203                        		__call		_spr_x.1
         02:C709  20 0A E8   			call	_spr_x.1
12204                        	
12205                        		.dbg	line,	"include\routines_LEVELS.c", 3048; spr_set(weapon_id);
12206                        		__ld.umq	_weapon_id
         02:C70C  AD 23 23   			lda	_weapon_id
12207                        		__call		_spr_set.1
         02:C70F  20 DD E7   			call	_spr_set.1
12208                        	
12209                        		.dbg	line,	"include\routines_LEVELS.c", 3049; spr_x(player_pos_x-48);
12210                        		__ld.wm		_player_pos_x
         02:C712  AD D4 24   			lda.l	_player_pos_x
         02:C715  AC D5 24   			ldy.h	_player_pos_x
12211                        		__sub.wi	48
         02:C718  38         			sec
         02:C719  E9 30      			sbc.l	#48
         02:C71B  B0 01      			bcs	!+
         02:C71D  88         			dey
         02:C71E             	!:
12212                        		__call		_spr_x.1
         02:C71E  20 0A E8   			call	_spr_x.1
12213                        	
12214                        		.dbg	line,	"include\routines_LEVELS.c", 3050; }
12215    02:C721             	.LL546	.alias		.LL547
12216                        	
12217                        		.dbg	line,	"include\routines_LEVELS.c", 3051; }
12218                        	
12219                        		.dbg	line,	"include\routines_LEVELS.c", 3053; else if(player_counter_attack == 9)
12220                        		__bra		.LL547
         02:C721  4C 2B C8   			bra	.LL547
12221    02:C724             	.LL544:
12222                        		__ld.umq	_player_counter_attack
         02:C724  AD 1C 23   			lda	_player_counter_attack
12223                        		__equ_b.uiq	9
         02:C727  C9 09      			cmp	#9
         02:C729  F0 01      			beq	!+
         02:C72B  18         			clc
         02:C72C             	!:
12224                        		__bfalse	.LL548
         02:C72C  90 6D      			bcc	.LL548
12225                        	
12226                        		.dbg	line,	"include\routines_LEVELS.c", 3054; {
12227                        	
12228                        		.dbg	line,	"include\routines_LEVELS.c", 3055; spr_set(chain_id+2);
12229                        		__ld.um		_chain_id
         02:C72E  AD 22 23   			lda	_chain_id
         02:C731  C2         			cly
12230                        		__add.wi	2
         02:C732  18         			clc
         02:C733  69 02      			adc.l	#2
         02:C735  90 01      			bcc	!+
         02:C737  C8         			iny
         02:C738             	!:
12231                        		__call		_spr_set.1
         02:C738  20 DD E7   			call	_spr_set.1
12232                        	
12233                        		.dbg	line,	"include\routines_LEVELS.c", 3056; spr_y(player_pos_y);
12234                        		__ld.wm		_player_pos_y
         02:C73B  AD D6 24   			lda.l	_player_pos_y
         02:C73E  AC D7 24   			ldy.h	_player_pos_y
12235                        		__call		_spr_y.1
         02:C741  20 19 E8   			call	_spr_y.1
12236                        	
12237                        		.dbg	line,	"include\routines_LEVELS.c", 3058; if(player_axis == AXIS_RIGHT)
12238                        		__not.um	_player_axis
         02:C744  AD 17 23   			lda	_player_axis
         02:C747  18         			clc
         02:C748  D0 01      			bne	!+
         02:C74A  38         			sec
         02:C74B             	!:
12239                        		__bfalse	.LL549
         02:C74B  90 27      			bcc	.LL549
12240                        	
12241                        		.dbg	line,	"include\routines_LEVELS.c", 3059; {
12242                        	
12243                        		.dbg	line,	"include\routines_LEVELS.c", 3060; spr_x(player_pos_x+64);
12244                        		__ld.wm		_player_pos_x
         02:C74D  AD D4 24   			lda.l	_player_pos_x
         02:C750  AC D5 24   			ldy.h	_player_pos_x
12245                        		__add.wi	64
         02:C753  18         			clc
         02:C754  69 40      			adc.l	#64
         02:C756  90 01      			bcc	!+
         02:C758  C8         			iny
         02:C759             	!:
12246                        		__call		_spr_x.1
         02:C759  20 0A E8   			call	_spr_x.1
12247                        	
12248                        		.dbg	line,	"include\routines_LEVELS.c", 3062; spr_set(weapon_id);
12249                        		__ld.umq	_weapon_id
         02:C75C  AD 23 23   			lda	_weapon_id
12250                        		__call		_spr_set.1
         02:C75F  20 DD E7   			call	_spr_set.1
12251                        	
12252                        		.dbg	line,	"include\routines_LEVELS.c", 3063; spr_x(player_pos_x+80);
12253                        		__ld.wm		_player_pos_x
         02:C762  AD D4 24   			lda.l	_player_pos_x
         02:C765  AC D5 24   			ldy.h	_player_pos_x
12254                        		__add.wi	80
         02:C768  18         			clc
         02:C769  69 50      			adc.l	#80
         02:C76B  90 01      			bcc	!+
         02:C76D  C8         			iny
         02:C76E             	!:
12255                        		__call		_spr_x.1
         02:C76E  20 0A E8   			call	_spr_x.1
12256                        	
12257                        		.dbg	line,	"include\routines_LEVELS.c", 3064; }
12258                        	
12259                        		.dbg	line,	"include\routines_LEVELS.c", 3065; 
12260                        	
12261                        		.dbg	line,	"include\routines_LEVELS.c", 3066; else
12262                        		__bra		.LL550
         02:C771  4C 2B C8   			bra	.LL550
12263    02:C774             	.LL549:
12264                        	
12265                        		.dbg	line,	"include\routines_LEVELS.c", 3067; {
12266                        	
12267                        		.dbg	line,	"include\routines_LEVELS.c", 3068; spr_x(player_pos_x-48);
12268                        		__ld.wm		_player_pos_x
         02:C774  AD D4 24   			lda.l	_player_pos_x
         02:C777  AC D5 24   			ldy.h	_player_pos_x
12269                        		__sub.wi	48
         02:C77A  38         			sec
         02:C77B  E9 30      			sbc.l	#48
         02:C77D  B0 01      			bcs	!+
         02:C77F  88         			dey
         02:C780             	!:
12270                        		__call		_spr_x.1
         02:C780  20 0A E8   			call	_spr_x.1
12271                        	
12272                        		.dbg	line,	"include\routines_LEVELS.c", 3070; spr_set(weapon_id);
12273                        		__ld.umq	_weapon_id
         02:C783  AD 23 23   			lda	_weapon_id
12274                        		__call		_spr_set.1
         02:C786  20 DD E7   			call	_spr_set.1
12275                        	
12276                        		.dbg	line,	"include\routines_LEVELS.c", 3071; spr_x(player_pos_x-64);
12277                        		__ld.wm		_player_pos_x
         02:C789  AD D4 24   			lda.l	_player_pos_x
         02:C78C  AC D5 24   			ldy.h	_player_pos_x
12278                        		__sub.wi	64
         02:C78F  38         			sec
         02:C790  E9 40      			sbc.l	#64
         02:C792  B0 01      			bcs	!+
         02:C794  88         			dey
         02:C795             	!:
12279                        		__call		_spr_x.1
         02:C795  20 0A E8   			call	_spr_x.1
12280                        	
12281                        		.dbg	line,	"include\routines_LEVELS.c", 3072; }
12282    02:C798             	.LL550	.alias		.LL551
12283                        	
12284                        		.dbg	line,	"include\routines_LEVELS.c", 3073; }
12285                        	
12286                        		.dbg	line,	"include\routines_LEVELS.c", 3075; else if(player_counter_attack == 23)
12287                        		__bra		.LL551
         02:C798  4C 2B C8   			bra	.LL551
12288    02:C79B             	.LL548:
12289                        		__ld.umq	_player_counter_attack
         02:C79B  AD 1C 23   			lda	_player_counter_attack
12290                        		__equ_b.uiq	23
         02:C79E  C9 17      			cmp	#23
         02:C7A0  F0 01      			beq	!+
         02:C7A2  18         			clc
         02:C7A3             	!:
12291                        		__bfalse	.LL552
         02:C7A3  B0 03 4C 2B			bcc	.LL552
         02:C7A7  C8          
12292                        	
12293                        		.dbg	line,	"include\routines_LEVELS.c", 3076; {
12294                        	
12295                        		.dbg	line,	"include\routines_LEVELS.c", 3077; spr_set(chain_id);
12296                        		__ld.umq	_chain_id
         02:C7A8  AD 22 23   			lda	_chain_id
12297                        		__call		_spr_set.1
         02:C7AB  20 DD E7   			call	_spr_set.1
12298                        	
12299                        		.dbg	line,	"include\routines_LEVELS.c", 3078; spr_hide();
12300                        		__call		_spr_hide
         02:C7AE  20 F8 E7   			call	_spr_hide
12301                        	
12302                        		.dbg	line,	"include\routines_LEVELS.c", 3080; spr_set(chain_id+1);
12303                        		__ld.um		_chain_id
         02:C7B1  AD 22 23   			lda	_chain_id
         02:C7B4  C2         			cly
12304                        		__add.wi	1
         02:C7B5  1A         			inc	a
         02:C7B6  D0 01      			bne	!+
         02:C7B8  C8         			iny
         02:C7B9             	!:
12305                        		__call		_spr_set.1
         02:C7B9  20 DD E7   			call	_spr_set.1
12306                        	
12307                        		.dbg	line,	"include\routines_LEVELS.c", 3081; spr_hide();
12308                        		__call		_spr_hide
         02:C7BC  20 F8 E7   			call	_spr_hide
12309                        	
12310                        		.dbg	line,	"include\routines_LEVELS.c", 3083; spr_set(chain_id+2);
12311                        		__ld.um		_chain_id
         02:C7BF  AD 22 23   			lda	_chain_id
         02:C7C2  C2         			cly
12312                        		__add.wi	2
         02:C7C3  18         			clc
         02:C7C4  69 02      			adc.l	#2
         02:C7C6  90 01      			bcc	!+
         02:C7C8  C8         			iny
         02:C7C9             	!:
12313                        		__call		_spr_set.1
         02:C7C9  20 DD E7   			call	_spr_set.1
12314                        	
12315                        		.dbg	line,	"include\routines_LEVELS.c", 3084; spr_hide();
12316                        		__call		_spr_hide
         02:C7CC  20 F8 E7   			call	_spr_hide
12317                        	
12318                        		.dbg	line,	"include\routines_LEVELS.c", 3086; spr_set(player_id);
12319                        		__ld.umq	_player_id
         02:C7CF  AD 15 23   			lda	_player_id
12320                        		__call		_spr_set.1
         02:C7D2  20 DD E7   			call	_spr_set.1
12321                        	
12322                        		.dbg	line,	"include\routines_LEVELS.c", 3087; spr_pattern(PLAYER_HANG_VRAM_ADR);
12323                        		__ld.wi		7424
         02:C7D5  62         			cla
         02:C7D6  A0 1D      			ldy.h	#7424
12324                        		__call		_spr_pattern.1
         02:C7D8  20 26 E8   			call	_spr_pattern.1
12325                        	
12326                        		.dbg	line,	"include\routines_LEVELS.c", 3089; spr_set(weapon_id);
12327                        		__ld.umq	_weapon_id
         02:C7DB  AD 23 23   			lda	_weapon_id
12328                        		__call		_spr_set.1
         02:C7DE  20 DD E7   			call	_spr_set.1
12329                        	
12330                        		.dbg	line,	"include\routines_LEVELS.c", 3090; spr_pattern(WEAPON_IDLE_VRAM_ADRESS);
12331                        		__ld.wi		31808
         02:C7E1  A9 40      			lda.l	#31808
         02:C7E3  A0 7C      			ldy.h	#31808
12332                        		__call		_spr_pattern.1
         02:C7E5  20 26 E8   			call	_spr_pattern.1
12333                        	
12334                        		.dbg	line,	"include\routines_LEVELS.c", 3091; spr_y(player_pos_y+5);
12335                        		__ld.wm		_player_pos_y
         02:C7E8  AD D6 24   			lda.l	_player_pos_y
         02:C7EB  AC D7 24   			ldy.h	_player_pos_y
12336                        		__add.wi	5
         02:C7EE  18         			clc
         02:C7EF  69 05      			adc.l	#5
         02:C7F1  90 01      			bcc	!+
         02:C7F3  C8         			iny
         02:C7F4             	!:
12337                        		__call		_spr_y.1
         02:C7F4  20 19 E8   			call	_spr_y.1
12338                        	
12339                        		.dbg	line,	"include\routines_LEVELS.c", 3093; if(player_axis == AXIS_RIGHT)
12340                        		__not.um	_player_axis
         02:C7F7  AD 17 23   			lda	_player_axis
         02:C7FA  18         			clc
         02:C7FB  D0 01      			bne	!+
         02:C7FD  38         			sec
         02:C7FE             	!:
12341                        		__bfalse	.LL553
         02:C7FE  90 11      			bcc	.LL553
12342                        	
12343                        		.dbg	line,	"include\routines_LEVELS.c", 3094; {
12344                        	
12345                        		.dbg	line,	"include\routines_LEVELS.c", 3095; spr_x(player_pos_x+17);
12346                        		__ld.wm		_player_pos_x
         02:C800  AD D4 24   			lda.l	_player_pos_x
         02:C803  AC D5 24   			ldy.h	_player_pos_x
12347                        		__add.wi	17
         02:C806  18         			clc
         02:C807  69 11      			adc.l	#17
         02:C809  90 01      			bcc	!+
         02:C80B  C8         			iny
         02:C80C             	!:
12348                        		__call		_spr_x.1
         02:C80C  20 0A E8   			call	_spr_x.1
12349                        	
12350                        		.dbg	line,	"include\routines_LEVELS.c", 3096; }
12351                        	
12352                        		.dbg	line,	"include\routines_LEVELS.c", 3098; else
12353                        		__bra		.LL554
         02:C80F  80 0F      			bra	.LL554
12354    02:C811             	.LL553:
12355                        	
12356                        		.dbg	line,	"include\routines_LEVELS.c", 3099; {
12357                        	
12358                        		.dbg	line,	"include\routines_LEVELS.c", 3100; spr_x(player_pos_x-2);
12359                        		__ld.wm		_player_pos_x
         02:C811  AD D4 24   			lda.l	_player_pos_x
         02:C814  AC D5 24   			ldy.h	_player_pos_x
12360                        		__sub.wi	2
         02:C817  38         			sec
         02:C818  E9 02      			sbc.l	#2
         02:C81A  B0 01      			bcs	!+
         02:C81C  88         			dey
         02:C81D             	!:
12361                        		__call		_spr_x.1
         02:C81D  20 0A E8   			call	_spr_x.1
12362                        	
12363                        		.dbg	line,	"include\routines_LEVELS.c", 3101; }
12364    02:C820             	.LL554:
12365                        	
12366                        		.dbg	line,	"include\routines_LEVELS.c", 3103; player_attack = FALSE;
12367                        		__st.umiq	0, _player_attack
         02:C820  9C 1E 23   			stz	_player_attack
12368                        	
12369                        		.dbg	line,	"include\routines_LEVELS.c", 3104; player_counter_attack = 0;
12370                        		__st.umiq	0, _player_counter_attack
         02:C823  9C 1C 23   			stz	_player_counter_attack
12371                        	
12372                        		.dbg	line,	"include\routines_LEVELS.c", 3105; player_state = STATE_HANG;
12373                        		__st.umiq	10, _player_state
         02:C826  A9 0A      			lda.l	#10
         02:C828  8D 16 23   			sta	_player_state
12374                        	
12375                        		.dbg	line,	"include\routines_LEVELS.c", 3106; }
12376                        	
12377                        		.dbg	line,	"include\routines_LEVELS.c", 3109; player_counter_attack += 1;
12378    02:C82B             	.LL552:
12379    02:C82B             	.LL551:
12380    02:C82B             	.LL547:
12381    02:C82B             	.LL543:
12382    02:C82B             	.LL539:
12383    02:C82B             	.LL535:
12384                        		__add_st.umiq	1, _player_counter_attack
         02:C82B  EE 1C 23   			inc	_player_counter_attack
12385                        	
12386                        		.dbg	line,	"include\routines_LEVELS.c", 3110; } 
12387                        	
12388                        		.dbg	line,	"include\routines_LEVELS.c", 3111; }
12389    02:C82E             	.LL531:
12390                        	
12391                        		.dbg	line,	"include\routines_LEVELS.c", 3112; }
12392    02:C82E             	.LL530:
12393    02:C82E             	.LL529:
12394    02:C82E             	.LL504:
12395    02:C82E             	.LL481:
12396                        		__return	0
         02:C82E  4C EF FF   			jmp	leave_proc
12397                        		.dbg	clear
12398                        		.endp
12399                        		.pceas
12400                        	
12401                        		.dbg	line,	"main.c", 24; #include "include/routines_SHOP.c"
12402                        		.dbg	line,	"include\routines_SHOP.c", 1; #include "huc.h"
12403                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
12404                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
12405                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
12406                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
12407                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
12408                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
12409                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
12410                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
12411                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
12412                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
12413                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
12414                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
12415                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
12416                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
12417                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
12418                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
12419                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
12420                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
12421                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
12422                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
12423                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
12424                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
12425                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
12426                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
12427                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
12428                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
12429                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
12430                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
12431                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
12432                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
12433                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
12434                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
12435                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
12436                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
12437                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
12438                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
12439                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
12440                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
12441                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
12442                        		.dbg	line,	"include\routines_SHOP.c", 2; #include "hucc-scroll.h"
12443                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 1; #ifndef _hucc_scroll_h
12444                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 2; #define _hucc_scroll_h
12445                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 4; /****************************************************************************
12446                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 5; ; ***************************************************************************
12447                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 6; ;
12448                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 7; ; hucc-scroll.h
12449                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 8; ;
12450                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 9; ; Routines for a fast split-screen scrolling system.
12451                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 10; ;
12452                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 11; ; Copyright John Brandwood 2024.
12453                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 12; ;
12454                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 13; ; Distributed under the Boost Software License, Version 1.0.
12455                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
12456                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
12457                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 16; ;
12458                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 17; ; ***************************************************************************
12459                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 18; ; ***************************************************************************
12460                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 19; ;
12461                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 20; ; The maximum number of splits for each screen layer is set in your project's
12462                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 21; ; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
12463                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 22; ;
12464                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 23; ; Your first active split must be defined to start at screen line 0, and then
12465                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 24; ; the rest of the active splits must be in increasing line order to match the
12466                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 25; ; way that the PC Engine displays the output image.
12467                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 26; ;
12468                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 27; ; You can have disabled splits interleaved with your active splits.
12469                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 28; ;
12470                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 29; ; Splits that are normally disabled can be used to create full screen effects
12471                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 30; ; such as bouncing the screen up and down by adding blank areas at the top or
12472                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 31; ; bottom of the screen, and then rapidly changing the height of those areas.
12473                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 32; ;
12474                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 33; ; ***************************************************************************
12475                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 34; ; **************************************************************************/
12476                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 36; // *************
12477                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 37; // VDC bits for display_flags ...
12478                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 38; // *************
12479                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 40; #ifndef BKG_OFF
12480                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 41; #define BKG_OFF 0x00
12481                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 42; #endif
12482                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 44; #ifndef SPR_OFF
12483                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 45; #define SPR_OFF 0x00
12484                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 46; #endif
12485                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 48; #ifndef BKG_ON
12486                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 49; #define BKG_ON 0x80
12487                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 50; #endif
12488                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 52; #ifndef SPR_ON
12489                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 53; #define SPR_ON 0x40
12490                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 54; #endif
12491                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 56; // *************
12492                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 57; // Functions in hucc-scroll.asm ...
12493                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 58; // *************
12494                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 60; #ifdef __HUCC__
12495                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 62; #asmdef	HUCC_USES_NEW_SCROLL 1
12496                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 64; extern void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
12497                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 65; extern void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
12498                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 67; extern void __fastcall disable_split( unsigned char index<acc> );
12499                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 68; extern void __fastcall sgx_disable_split( unsigned char index<acc> );
12500                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 70; extern void __fastcall __macro disable_all_splits( void );
12501                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 71; extern void __fastcall __macro sgx_disable_all_splits( void );
12502                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 73; #asm
12503                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 74; .macro	_disable_all_splits
12504                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 75; ldy	#HUCC_PCE_SPLITS - 1
12505                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 76; !loop:		tya
12506                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 77; call	_disable_split.1
12507                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 78; dey
12508                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 79; bpl	!loop-
12509                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 80; .endm
12510                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 82; .macro	_sgx_disable_all_splits
12511                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 83; ldy	#HUCC_SGX_SPLITS - 1
12512                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 84; !loop:		tya
12513                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 85; call	_sgx_disable_split.1
12514                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 86; dey
12515                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 87; bpl	!loop-
12516                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 88; .endm
12517                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 89; #endasm
12518                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 91; #endif // __HUCC__
12519                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 93; #endif // _hucc_scroll_h
12520                        		.dbg	line,	"include\routines_SHOP.c", 3; #include "hucc-chrmap.h"
12521                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 1; #ifndef _hucc_chrmap_h
12522                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 2; #define _hucc_chrmap_h
12523                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 4; /****************************************************************************
12524                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 5; ; ***************************************************************************
12525                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 6; ;
12526                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 7; ; hucc-chrmap.h
12527                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 8; ;
12528                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 9; ; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
12529                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 10; ;
12530                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 11; ; Copyright John Brandwood 2025.
12531                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 12; ;
12532                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
12533                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
12534                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
12535                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 16; ;
12536                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 17; ; ***************************************************************************
12537                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 18; ; ***************************************************************************
12538                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 19; ;
12539                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 20; ; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
12540                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 21; ;
12541                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 22; ; The maximum total size for a chrmap is 16KBytes, which allows for maps up
12542                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 23; ; to 256x32 tiles (2048x256 pixels).
12543                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 24; ;
12544                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 25; ; ***************************************************************************
12545                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 26; ; **************************************************************************/
12546                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 28; // *************
12547                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 29; // This code extends the blkmap library ...
12548                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 30; // *************
12549                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 32; #include "hucc-blkmap.h"
12550                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 34; // *************
12551                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 35; // Functions in chrmap.asm ...
12552                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 36; // *************
12553                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 38; #ifdef __HUCC__
12554                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 40; #asmdef	HUCC_USES_CHRMAP 1
12555                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 42; extern void __fastcall __nop set_chrmap( unsigned char __far *chrmap<vdc_map_bank:vdc_map_addr>, unsigned char tiles_w<vdc_map_line_w> );
12556                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 44; extern void __fastcall draw_bat( void );
12557                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 45; extern void __fastcall scroll_bat( void );
12558                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 47; extern void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
12559                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 49; #ifdef _SGX
12560                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 51; extern void __fastcall __nop sgx_set_chrmap( unsigned char __far *chrmap<sgx_map_bank:sgx_map_addr>, unsigned char tiles_w<sgx_map_line_w> );
12561                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 53; extern void __fastcall sgx_draw_bat( void );
12562                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 54; extern void __fastcall sgx_scroll_bat( void );
12563                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 56; extern void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
12564                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 58; #endif
12565                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 60; #endif // __HUCC__
12566                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 62; #endif // _hucc_chrmap_h
12567                        		.dbg	line,	"include\routines_SHOP.c", 4; #include "hucc-blkmap.h"
12568                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
12569                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
12570                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
12571                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
12572                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
12573                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
12574                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
12575                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
12576                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
12577                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
12578                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
12579                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
12580                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
12581                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
12582                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
12583                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
12584                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
12585                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
12586                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
12587                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
12588                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
12589                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
12590                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
12591                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
12592                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
12593                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
12594                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
12595                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
12596                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
12597                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
12598                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
12599                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
12600                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
12601                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
12602                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
12603                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
12604                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
12605                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
12606                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
12607                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
12608                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
12609                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
12610                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
12611                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
12612                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
12613                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
12614                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
12615                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
12616                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
12617                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
12618                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
12619                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
12620                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
12621                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
12622                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
12623                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
12624                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
12625                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
12626                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
12627                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
12628                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
12629                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
12630                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
12631                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
12632                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
12633                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
12634                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
12635                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 86; .macro	_set_blkmap.2
12636                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 87; stz	vdc_scr_bank
12637                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 88; .endm
12638                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 90; .macro	_set_multimap.2
12639                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 91; lda	vdc_bat_width
12640                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 92; lsr	a
12641                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 93; sta	vdc_map_line_w
12642                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 94; .endm
12643                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 96; .macro	SCREEN
12644                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 97; db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
12645                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 98; db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
12646                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 99; db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
12647                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 100; dw	(\4)
12648                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 101; .endm
12649                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
12650                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
12651                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
12652                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
12653                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
12654                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
12655                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
12656                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
12657                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
12658                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
12659                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
12660                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
12661                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
12662                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
12663                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
12664                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
12665                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
12666                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
12667                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
12668                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
12669                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
12670                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
12671                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
12672                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
12673                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
12674                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
12675                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
12676                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
12677                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 144; .macro	_sgx_set_blkmap.2
12678                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 145; stz	sgx_scr_bank
12679                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 146; .endm
12680                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 148; .macro	_sgx_set_multimap.2
12681                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 149; lda	sgx_bat_width
12682                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 150; lsr	a
12683                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 151; sta	sgx_map_line_w
12684                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 152; .endm
12685                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
12686                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
12687                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
12688                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
12689                        		.dbg	line,	"include\routines_SHOP.c", 12; void display_TIME_SHOP()
12690                        		.dbg	line,	"include\routines_SHOP.c", 13; {
12691                        	;***********************
12692                        	;***********************
12693                        	
12694                        		.hucc
12695    18:CB8D             		.proc		_display_TIME_SHOP
12696                        		__enter		_display_TIME_SHOP
12697                        	
12698                        		.dbg	line,	"include\routines_SHOP.c", 14; put_number(minutes,1,1,3);
12699                        		__ld.um		_minutes
         18:CB8D  AD 2A 23   			lda	_minutes
         18:CB90  C2         			cly
12700                        		__st.wmq	_bx
         18:CB91  85 FA      			sta.l	_bx
         18:CB93  84 FB      			sty.h	_bx
12701                        		__st.umiq	1, _cl
         18:CB95  A9 01      			lda.l	#1
         18:CB97  85 FC      			sta	_cl
12702                        		__st.umiq	1, _dil
         18:CB99  A9 01      			lda.l	#1
         18:CB9B  85 F0      			sta	_dil
12703                        		__st.umiq	3, _dih
         18:CB9D  A9 03      			lda.l	#3
         18:CB9F  85 F1      			sta	_dih
12704                        		__call		_put_number.4
         18:CBA1  20 9F FF   			call	_put_number.4
12705                        	
12706                        		.dbg	line,	"include\routines_SHOP.c", 16; if(seconds < 10)
12707                        		__ld.umq	_seconds
         18:CBA4  AD 2B 23   			lda	_seconds
12708                        		__ult_b.uiq	10
         18:CBA7  C9 0A      			cmp	#10		; Subtract integer from A.
         18:CBA9  6A         			ror	a		; CC if A < integer.
         18:CBAA  49 80      			eor	#$80
         18:CBAC  2A         			rol	a
12709                        		__bfalse	.LL556
         18:CBAD  90 2C      			bcc	.LL556
12710                        	
12711                        		.dbg	line,	"include\routines_SHOP.c", 17; {
12712                        	
12713                        		.dbg	line,	"include\routines_SHOP.c", 18; put_number(0,1,3,3);
12714                        		__st.wmiq	0, _bx
         18:CBAF  64 FA      			stz.l	_bx
         18:CBB1  64 FB      			stz.h	_bx
12715                        		__st.umiq	1, _cl
         18:CBB3  A9 01      			lda.l	#1
         18:CBB5  85 FC      			sta	_cl
12716                        		__st.umiq	3, _dil
         18:CBB7  A9 03      			lda.l	#3
         18:CBB9  85 F0      			sta	_dil
12717                        		__st.umiq	3, _dih
         18:CBBB  A9 03      			lda.l	#3
         18:CBBD  85 F1      			sta	_dih
12718                        		__call		_put_number.4
         18:CBBF  20 9F FF   			call	_put_number.4
12719                        	
12720                        		.dbg	line,	"include\routines_SHOP.c", 19; put_number(seconds,1,4,3);
12721                        		__ld.um		_seconds
         18:CBC2  AD 2B 23   			lda	_seconds
         18:CBC5  C2         			cly
12722                        		__st.wmq	_bx
         18:CBC6  85 FA      			sta.l	_bx
         18:CBC8  84 FB      			sty.h	_bx
12723                        		__st.umiq	1, _cl
         18:CBCA  A9 01      			lda.l	#1
         18:CBCC  85 FC      			sta	_cl
12724                        		__st.umiq	4, _dil
         18:CBCE  A9 04      			lda.l	#4
         18:CBD0  85 F0      			sta	_dil
12725                        		__st.umiq	3, _dih
         18:CBD2  A9 03      			lda.l	#3
         18:CBD4  85 F1      			sta	_dih
12726                        		__call		_put_number.4
         18:CBD6  20 9F FF   			call	_put_number.4
12727                        	
12728                        		.dbg	line,	"include\routines_SHOP.c", 20; }
12729                        	
12730                        		.dbg	line,	"include\routines_SHOP.c", 22; else
12731                        		__bra		.LL557
         18:CBD9  80 17      			bra	.LL557
12732    18:CBDB             	.LL556:
12733                        	
12734                        		.dbg	line,	"include\routines_SHOP.c", 23; {
12735                        	
12736                        		.dbg	line,	"include\routines_SHOP.c", 24; put_number(seconds,2,3,3);
12737                        		__ld.um		_seconds
         18:CBDB  AD 2B 23   			lda	_seconds
         18:CBDE  C2         			cly
12738                        		__st.wmq	_bx
         18:CBDF  85 FA      			sta.l	_bx
         18:CBE1  84 FB      			sty.h	_bx
12739                        		__st.umiq	2, _cl
         18:CBE3  A9 02      			lda.l	#2
         18:CBE5  85 FC      			sta	_cl
12740                        		__st.umiq	3, _dil
         18:CBE7  A9 03      			lda.l	#3
         18:CBE9  85 F0      			sta	_dil
12741                        		__st.umiq	3, _dih
         18:CBEB  A9 03      			lda.l	#3
         18:CBED  85 F1      			sta	_dih
12742                        		__call		_put_number.4
         18:CBEF  20 9F FF   			call	_put_number.4
12743                        	
12744                        		.dbg	line,	"include\routines_SHOP.c", 25; }
12745    18:CBF2             	.LL557:
12746                        	
12747                        		.dbg	line,	"include\routines_SHOP.c", 27; time_counter += 1;
12748                        		__add_st.umiq	1, _time_counter
         18:CBF2  EE 2C 23   			inc	_time_counter
12749                        	
12750                        		.dbg	line,	"include\routines_SHOP.c", 29; if(time_counter == 60)
12751                        		__ld.umq	_time_counter
         18:CBF5  AD 2C 23   			lda	_time_counter
12752                        		__equ_b.uiq	60
         18:CBF8  C9 3C      			cmp	#60
         18:CBFA  F0 01      			beq	!+
         18:CBFC  18         			clc
         18:CBFD             	!:
12753                        		__bfalse	.LL558
         18:CBFD  90 30      			bcc	.LL558
12754                        	
12755                        		.dbg	line,	"include\routines_SHOP.c", 30; {
12756                        	
12757                        		.dbg	line,	"include\routines_SHOP.c", 31; time_counter = 0;
12758                        		__st.umiq	0, _time_counter
         18:CBFF  9C 2C 23   			stz	_time_counter
12759                        	
12760                        		.dbg	line,	"include\routines_SHOP.c", 33; if(seconds > 0)
12761                        		__ld.umq	_seconds
         18:CC02  AD 2B 23   			lda	_seconds
12762                        		__ugt_b.uiq	0
         18:CC05  18         			clc			; Subtract integer+1 from A.
         18:CC06  E9 00      			sbc	#0		; CS if A > integer.
12763                        		__bfalse	.LL559
         18:CC08  90 05      			bcc	.LL559
12764                        	
12765                        		.dbg	line,	"include\routines_SHOP.c", 34; {
12766                        	
12767                        		.dbg	line,	"include\routines_SHOP.c", 35; seconds -= 1;
12768                        		__sub_st.umiq	1, _seconds
         18:CC0A  CE 2B 23   			dec	_seconds
12769                        	
12770                        		.dbg	line,	"include\routines_SHOP.c", 36; }
12771                        	
12772                        		.dbg	line,	"include\routines_SHOP.c", 38; else
12773                        		__bra		.LL560
         18:CC0D  80 20      			bra	.LL560
12774    18:CC0F             	.LL559:
12775                        	
12776                        		.dbg	line,	"include\routines_SHOP.c", 39; {
12777                        	
12778                        		.dbg	line,	"include\routines_SHOP.c", 40; if(minutes > 0)
12779                        		__ld.umq	_minutes
         18:CC0F  AD 2A 23   			lda	_minutes
12780                        		__ugt_b.uiq	0
         18:CC12  18         			clc			; Subtract integer+1 from A.
         18:CC13  E9 00      			sbc	#0		; CS if A > integer.
12781                        		__bfalse	.LL561
         18:CC15  90 0A      			bcc	.LL561
12782                        	
12783                        		.dbg	line,	"include\routines_SHOP.c", 41; {
12784                        	
12785                        		.dbg	line,	"include\routines_SHOP.c", 42; seconds = 59;
12786                        		__st.umiq	59, _seconds
         18:CC17  A9 3B      			lda.l	#59
         18:CC19  8D 2B 23   			sta	_seconds
12787                        	
12788                        		.dbg	line,	"include\routines_SHOP.c", 43; minutes -= 1;
12789                        		__sub_st.umiq	1, _minutes
         18:CC1C  CE 2A 23   			dec	_minutes
12790                        	
12791                        		.dbg	line,	"include\routines_SHOP.c", 44; }
12792                        	
12793                        		.dbg	line,	"include\routines_SHOP.c", 46; else
12794                        		__bra		.LL562
         18:CC1F  80 0E      			bra	.LL562
12795    18:CC21             	.LL561:
12796                        	
12797                        		.dbg	line,	"include\routines_SHOP.c", 47; {
12798                        	
12799                        		.dbg	line,	"include\routines_SHOP.c", 48; seconds = 0;
12800                        		__st.umiq	0, _seconds
         18:CC21  9C 2B 23   			stz	_seconds
12801                        	
12802                        		.dbg	line,	"include\routines_SHOP.c", 49; minutes = 0;
12803                        		__st.umiq	0, _minutes
         18:CC24  9C 2A 23   			stz	_minutes
12804                        	
12805                        		.dbg	line,	"include\routines_SHOP.c", 50; shop_counter = 0;    
12806                        		__st.umiq	0, _shop_counter
         18:CC27  9C D3 23   			stz	_shop_counter
12807                        	
12808                        		.dbg	line,	"include\routines_SHOP.c", 51; shop_phase = SHOP_PHASE_EXIT;
12809                        		__st.umiq	2, _shop_phase
         18:CC2A  A9 02      			lda.l	#2
         18:CC2C  8D D2 23   			sta	_shop_phase
12810                        	
12811                        		.dbg	line,	"include\routines_SHOP.c", 52; }
12812    18:CC2F             	.LL562:
12813                        	
12814                        		.dbg	line,	"include\routines_SHOP.c", 53; }
12815    18:CC2F             	.LL560:
12816                        	
12817                        		.dbg	line,	"include\routines_SHOP.c", 54; } 
12818                        	
12819                        		.dbg	line,	"include\routines_SHOP.c", 55; }
12820    18:CC2F             	.LL558:
12821    18:CC2F             	.LL555:
12822                        		__return	0
         18:CC2F  4C EF FF   			jmp	leave_proc
12823                        		.dbg	clear
12824                        		.endp
12825                        		.pceas
12826                        	
12827                        		.dbg	line,	"include\routines_SHOP.c", 59; void joypad_BUTTONS_SHOP()
12828                        		.dbg	line,	"include\routines_SHOP.c", 60; {
12829                        	;***********************
12830                        	;***********************
12831                        	
12832                        		.hucc
12833    02:C831             		.proc		_joypad_BUTTONS_SHOP
12834                        		__enter		_joypad_BUTTONS_SHOP
12835                        	
12836                        		.dbg	line,	"include\routines_SHOP.c", 61; if(joytrg(JOYPAD_1) & JOY_RIGHT)
12837                        		__ld.uiq	0
         02:C831  62         			cla
12838                        		 _joytrg.1
         02:C832  AA         			tax
         02:C833  BD 2D 22   			lda	joytrg, x
         02:C836  BC DD 22   			ldy	joy6trg, x
12839                        		__tand.wi	32
         02:C839  29 20      			and	#32
         02:C83B  C9 01      	!:		cmp	#1
12840                        		__bfalse	.LL564
         02:C83D  90 59      			bcc	.LL564
12841                        	
12842                        		.dbg	line,	"include\routines_SHOP.c", 62; {   
12843                        	
12844                        		.dbg	line,	"include\routines_SHOP.c", 63; char max_index;
12845                        	
12846                        		.dbg	line,	"include\routines_SHOP.c", 64; 
12847                        	
12848                        		.dbg	line,	"include\routines_SHOP.c", 65; if(index_y == 0)
12849                        		__not.um	_index_y
         02:C83F  AD D0 23   			lda	_index_y
         02:C842  18         			clc
         02:C843  D0 01      			bne	!+
         02:C845  38         			sec
         02:C846             	!:
12850                        		__bfalse	.LL565
         02:C846  90 07      			bcc	.LL565
12851                        	
12852                        		.dbg	line,	"include\routines_SHOP.c", 66; {
12853                        	
12854                        		.dbg	line,	"include\routines_SHOP.c", 67; max_index = 4;
12855                        		__st.umiq	4, __joypad_BUTTONS_SHOP_end - 1  /* max_index */
         02:C848  A9 04      			lda.l	#4
         02:C84A  8D 0D 23   			sta	__joypad_BUTTONS_SHOP_end - 1
12856                        	
12857                        		.dbg	line,	"include\routines_SHOP.c", 68; }
12858                        	
12859                        		.dbg	line,	"include\routines_SHOP.c", 70; else
12860                        		__bra		.LL566
         02:C84D  80 05      			bra	.LL566
12861    02:C84F             	.LL565:
12862                        	
12863                        		.dbg	line,	"include\routines_SHOP.c", 71; {
12864                        	
12865                        		.dbg	line,	"include\routines_SHOP.c", 72; max_index = 5;
12866                        		__st.umiq	5, __joypad_BUTTONS_SHOP_end - 1  /* max_index */
         02:C84F  A9 05      			lda.l	#5
         02:C851  8D 0D 23   			sta	__joypad_BUTTONS_SHOP_end - 1
12867                        	
12868                        		.dbg	line,	"include\routines_SHOP.c", 73; }
12869    02:C854             	.LL566:
12870                        	
12871                        		.dbg	line,	"include\routines_SHOP.c", 75; if(index_x < max_index)
12872                        		__ld.umq	_index_x
         02:C854  AD CF 23   			lda	_index_x
12873                        		__ult_b.umq	__joypad_BUTTONS_SHOP_end - 1  /* max_index */
         02:C857  CD 0D 23   			cmp	__joypad_BUTTONS_SHOP_end - 1		; Subtract memory from A.
         02:C85A  6A         			ror	a		; CC if A < memory.
         02:C85B  49 80      			eor	#$80
         02:C85D  2A         			rol	a
12874                        		__bfalse	.LL567
         02:C85E  B0 03 4C AE			bcc	.LL567
         02:C862  CD          
12875                        	
12876                        		.dbg	line,	"include\routines_SHOP.c", 76; {
12877                        	
12878                        		.dbg	line,	"include\routines_SHOP.c", 77; index_x += 1;
12879                        		__add_st.umiq	1, _index_x
         02:C863  EE CF 23   			inc	_index_x
12880                        	
12881                        		.dbg	line,	"include\routines_SHOP.c", 78; item_index = (index_x + (index_y * 5));
12882                        		__ld.um		_index_y
         02:C866  AD D0 23   			lda	_index_y
         02:C869  C2         			cly
12883                        		__mul.wi	5
         02:C86A  85 00      			sta.l	__temp
         02:C86C  84 01      			sty.h	__temp
                             		__asl.wr
         02:C86E  0A         			asl	a
         02:C86F  42         			say
         02:C870  2A         			rol	a
         02:C871  42         			say
                             		__asl.wr
         02:C872  0A         			asl	a
         02:C873  42         			say
         02:C874  2A         			rol	a
         02:C875  42         			say
                             		__add.wm	__temp
         02:C876  18         			clc
         02:C877  65 00      			adc.l	__temp
         02:C879  42         			say
         02:C87A  65 01      			adc.h	__temp
         02:C87C  42         			say
12884                        		__add.um	_index_x
         02:C87D  18         			clc
         02:C87E  6D CF 23   			adc	_index_x
         02:C881  90 01      			bcc	!+
         02:C883  C8         			iny
         02:C884             	!:
12885                        		__st.umq	_item_index
         02:C884  8D D1 23   			sta	_item_index
12886                        	
12887                        		.dbg	line,	"include\routines_SHOP.c", 80; spr_set(0);
12888                        		__ld.uiq	0
         02:C887  62         			cla
12889                        		__call		_spr_set.1
         02:C888  20 DD E7   			call	_spr_set.1
12890                        	
12891                        		.dbg	line,	"include\routines_SHOP.c", 81; spr_x(TABLE_CURSOR_POS_X[item_index]);
12892                        		__ldx.umq	_item_index
         02:C88B  AE D1 23   			ldx	_item_index
12893                        		__ld.uax	_TABLE_CURSOR_POS_X
         02:C88E  BD BE 61   			lda	_TABLE_CURSOR_POS_X, x
         02:C891  C2         			cly
12894                        		__call		_spr_x.1
         02:C892  20 0A E8   			call	_spr_x.1
12895                        	
12896                        		.dbg	line,	"include\routines_SHOP.c", 82; }
12897                        	
12898                        		.dbg	line,	"include\routines_SHOP.c", 83; }
12899    02:C895             	.LL567	.alias		.LL568
12900                        	
12901                        		.dbg	line,	"include\routines_SHOP.c", 85; 
12902                        	
12903                        		.dbg	line,	"include\routines_SHOP.c", 86; else if(joytrg(JOYPAD_1) & JOY_LEFT)
12904                        		__bra		.LL568
         02:C895  4C AE CD   			bra	.LL568
12905    02:C898             	.LL564:
12906                        		__ld.uiq	0
         02:C898  62         			cla
12907                        		 _joytrg.1
         02:C899  AA         			tax
         02:C89A  BD 2D 22   			lda	joytrg, x
         02:C89D  BC DD 22   			ldy	joy6trg, x
12908                        		__tand.wi	128
         02:C8A0  29 80      			and	#128
         02:C8A2  C9 01      	!:		cmp	#1
12909                        		__bfalse	.LL569
         02:C8A4  90 40      			bcc	.LL569
12910                        	
12911                        		.dbg	line,	"include\routines_SHOP.c", 87; {
12912                        	
12913                        		.dbg	line,	"include\routines_SHOP.c", 88; if(index_x > 0)
12914                        		__ld.umq	_index_x
         02:C8A6  AD CF 23   			lda	_index_x
12915                        		__ugt_b.uiq	0
         02:C8A9  18         			clc			; Subtract integer+1 from A.
         02:C8AA  E9 00      			sbc	#0		; CS if A > integer.
12916                        		__bfalse	.LL570
         02:C8AC  B0 03 4C AE			bcc	.LL570
         02:C8B0  CD          
12917                        	
12918                        		.dbg	line,	"include\routines_SHOP.c", 89; {
12919                        	
12920                        		.dbg	line,	"include\routines_SHOP.c", 90; index_x -= 1;
12921                        		__sub_st.umiq	1, _index_x
         02:C8B1  CE CF 23   			dec	_index_x
12922                        	
12923                        		.dbg	line,	"include\routines_SHOP.c", 91; item_index = (index_x + (index_y * 5));
12924                        		__ld.um		_index_y
         02:C8B4  AD D0 23   			lda	_index_y
         02:C8B7  C2         			cly
12925                        		__mul.wi	5
         02:C8B8  85 00      			sta.l	__temp
         02:C8BA  84 01      			sty.h	__temp
                             		__asl.wr
         02:C8BC  0A         			asl	a
         02:C8BD  42         			say
         02:C8BE  2A         			rol	a
         02:C8BF  42         			say
                             		__asl.wr
         02:C8C0  0A         			asl	a
         02:C8C1  42         			say
         02:C8C2  2A         			rol	a
         02:C8C3  42         			say
                             		__add.wm	__temp
         02:C8C4  18         			clc
         02:C8C5  65 00      			adc.l	__temp
         02:C8C7  42         			say
         02:C8C8  65 01      			adc.h	__temp
         02:C8CA  42         			say
12926                        		__add.um	_index_x
         02:C8CB  18         			clc
         02:C8CC  6D CF 23   			adc	_index_x
         02:C8CF  90 01      			bcc	!+
         02:C8D1  C8         			iny
         02:C8D2             	!:
12927                        		__st.umq	_item_index
         02:C8D2  8D D1 23   			sta	_item_index
12928                        	
12929                        		.dbg	line,	"include\routines_SHOP.c", 93; spr_set(0);
12930                        		__ld.uiq	0
         02:C8D5  62         			cla
12931                        		__call		_spr_set.1
         02:C8D6  20 DD E7   			call	_spr_set.1
12932                        	
12933                        		.dbg	line,	"include\routines_SHOP.c", 94; spr_x(TABLE_CURSOR_POS_X[item_index]);
12934                        		__ldx.umq	_item_index
         02:C8D9  AE D1 23   			ldx	_item_index
12935                        		__ld.uax	_TABLE_CURSOR_POS_X
         02:C8DC  BD BE 61   			lda	_TABLE_CURSOR_POS_X, x
         02:C8DF  C2         			cly
12936                        		__call		_spr_x.1
         02:C8E0  20 0A E8   			call	_spr_x.1
12937                        	
12938                        		.dbg	line,	"include\routines_SHOP.c", 95; }
12939                        	
12940                        		.dbg	line,	"include\routines_SHOP.c", 96; }
12941    02:C8E3             	.LL570	.alias		.LL571
12942                        	
12943                        		.dbg	line,	"include\routines_SHOP.c", 99; else if(joytrg(JOYPAD_1) & JOY_UP)
12944                        		__bra		.LL571
         02:C8E3  4C AE CD   			bra	.LL571
12945    02:C8E6             	.LL569:
12946                        		__ld.uiq	0
         02:C8E6  62         			cla
12947                        		 _joytrg.1
         02:C8E7  AA         			tax
         02:C8E8  BD 2D 22   			lda	joytrg, x
         02:C8EB  BC DD 22   			ldy	joy6trg, x
12948                        		__tand.wi	16
         02:C8EE  29 10      			and	#16
         02:C8F0  C9 01      	!:		cmp	#1
12949                        		__bfalse	.LL572
         02:C8F2  90 4A      			bcc	.LL572
12950                        	
12951                        		.dbg	line,	"include\routines_SHOP.c", 100; {
12952                        	
12953                        		.dbg	line,	"include\routines_SHOP.c", 101; if(index_y > 0)
12954                        		__ld.umq	_index_y
         02:C8F4  AD D0 23   			lda	_index_y
12955                        		__ugt_b.uiq	0
         02:C8F7  18         			clc			; Subtract integer+1 from A.
         02:C8F8  E9 00      			sbc	#0		; CS if A > integer.
12956                        		__bfalse	.LL573
         02:C8FA  B0 03 4C AE			bcc	.LL573
         02:C8FE  CD          
12957                        	
12958                        		.dbg	line,	"include\routines_SHOP.c", 102; {
12959                        	
12960                        		.dbg	line,	"include\routines_SHOP.c", 103; if(item_index != 10)
12961                        		__ld.umq	_item_index
         02:C8FF  AD D1 23   			lda	_item_index
12962                        		__neq_b.uiq	10
         02:C902  38         			sec
         02:C903  49 0A      			eor	#10
         02:C905  D0 01      			bne	!+
         02:C907  18         			clc
         02:C908             	!:
12963                        		__bfalse	.LL574
         02:C908  B0 03 4C AE			bcc	.LL574
         02:C90C  CD          
12964                        	
12965                        		.dbg	line,	"include\routines_SHOP.c", 104; {
12966                        	
12967                        		.dbg	line,	"include\routines_SHOP.c", 105; index_y -= 1;
12968                        		__sub_st.umiq	1, _index_y
         02:C90D  CE D0 23   			dec	_index_y
12969                        	
12970                        		.dbg	line,	"include\routines_SHOP.c", 106; item_index = (index_x + (index_y * 5));
12971                        		__ld.um		_index_y
         02:C910  AD D0 23   			lda	_index_y
         02:C913  C2         			cly
12972                        		__mul.wi	5
         02:C914  85 00      			sta.l	__temp
         02:C916  84 01      			sty.h	__temp
                             		__asl.wr
         02:C918  0A         			asl	a
         02:C919  42         			say
         02:C91A  2A         			rol	a
         02:C91B  42         			say
                             		__asl.wr
         02:C91C  0A         			asl	a
         02:C91D  42         			say
         02:C91E  2A         			rol	a
         02:C91F  42         			say
                             		__add.wm	__temp
         02:C920  18         			clc
         02:C921  65 00      			adc.l	__temp
         02:C923  42         			say
         02:C924  65 01      			adc.h	__temp
         02:C926  42         			say
12973                        		__add.um	_index_x
         02:C927  18         			clc
         02:C928  6D CF 23   			adc	_index_x
         02:C92B  90 01      			bcc	!+
         02:C92D  C8         			iny
         02:C92E             	!:
12974                        		__st.umq	_item_index
         02:C92E  8D D1 23   			sta	_item_index
12975                        	
12976                        		.dbg	line,	"include\routines_SHOP.c", 108; spr_set(0);
12977                        		__ld.uiq	0
         02:C931  62         			cla
12978                        		__call		_spr_set.1
         02:C932  20 DD E7   			call	_spr_set.1
12979                        	
12980                        		.dbg	line,	"include\routines_SHOP.c", 109; spr_y(144);
12981                        		__ld.wi		144
         02:C935  A9 90      			lda.l	#144
         02:C937  C2         			cly
12982                        		__call		_spr_y.1
         02:C938  20 19 E8   			call	_spr_y.1
12983                        	
12984                        		.dbg	line,	"include\routines_SHOP.c", 110; }
12985                        	
12986                        		.dbg	line,	"include\routines_SHOP.c", 111; }
12987    02:C93B             	.LL574	.alias		.LL575
12988                        	
12989                        		.dbg	line,	"include\routines_SHOP.c", 112; }
12990    02:C93B             	.LL573	.alias		.LL575
12991                        	
12992                        		.dbg	line,	"include\routines_SHOP.c", 115; else if(joytrg(JOYPAD_1) & JOY_DOWN)
12993                        		__bra		.LL575
         02:C93B  4C AE CD   			bra	.LL575
12994    02:C93E             	.LL572:
12995                        		__ld.uiq	0
         02:C93E  62         			cla
12996                        		 _joytrg.1
         02:C93F  AA         			tax
         02:C940  BD 2D 22   			lda	joytrg, x
         02:C943  BC DD 22   			ldy	joy6trg, x
12997                        		__tand.wi	64
         02:C946  29 40      			and	#64
         02:C948  C9 01      	!:		cmp	#1
12998                        		__bfalse	.LL576
         02:C94A  90 3F      			bcc	.LL576
12999                        	
13000                        		.dbg	line,	"include\routines_SHOP.c", 116; {
13001                        	
13002                        		.dbg	line,	"include\routines_SHOP.c", 117; if(index_y < 1)
13003                        		__ld.umq	_index_y
         02:C94C  AD D0 23   			lda	_index_y
13004                        		__ult_b.uiq	1
         02:C94F  C9 01      			cmp	#1		; Subtract integer from A.
         02:C951  6A         			ror	a		; CC if A < integer.
         02:C952  49 80      			eor	#$80
         02:C954  2A         			rol	a
13005                        		__bfalse	.LL577
         02:C955  B0 03 4C AE			bcc	.LL577
         02:C959  CD          
13006                        	
13007                        		.dbg	line,	"include\routines_SHOP.c", 118; {
13008                        	
13009                        		.dbg	line,	"include\routines_SHOP.c", 119; index_y += 1;
13010                        		__add_st.umiq	1, _index_y
         02:C95A  EE D0 23   			inc	_index_y
13011                        	
13012                        		.dbg	line,	"include\routines_SHOP.c", 120; item_index = (index_x + (index_y * 5));
13013                        		__ld.um		_index_y
         02:C95D  AD D0 23   			lda	_index_y
         02:C960  C2         			cly
13014                        		__mul.wi	5
         02:C961  85 00      			sta.l	__temp
         02:C963  84 01      			sty.h	__temp
                             		__asl.wr
         02:C965  0A         			asl	a
         02:C966  42         			say
         02:C967  2A         			rol	a
         02:C968  42         			say
                             		__asl.wr
         02:C969  0A         			asl	a
         02:C96A  42         			say
         02:C96B  2A         			rol	a
         02:C96C  42         			say
                             		__add.wm	__temp
         02:C96D  18         			clc
         02:C96E  65 00      			adc.l	__temp
         02:C970  42         			say
         02:C971  65 01      			adc.h	__temp
         02:C973  42         			say
13015                        		__add.um	_index_x
         02:C974  18         			clc
         02:C975  6D CF 23   			adc	_index_x
         02:C978  90 01      			bcc	!+
         02:C97A  C8         			iny
         02:C97B             	!:
13016                        		__st.umq	_item_index
         02:C97B  8D D1 23   			sta	_item_index
13017                        	
13018                        		.dbg	line,	"include\routines_SHOP.c", 122; spr_set(0);
13019                        		__ld.uiq	0
         02:C97E  62         			cla
13020                        		__call		_spr_set.1
         02:C97F  20 DD E7   			call	_spr_set.1
13021                        	
13022                        		.dbg	line,	"include\routines_SHOP.c", 123; spr_y(168);
13023                        		__ld.wi		168
         02:C982  A9 A8      			lda.l	#168
         02:C984  C2         			cly
13024                        		__call		_spr_y.1
         02:C985  20 19 E8   			call	_spr_y.1
13025                        	
13026                        		.dbg	line,	"include\routines_SHOP.c", 124; }
13027                        	
13028                        		.dbg	line,	"include\routines_SHOP.c", 125; }
13029    02:C988             	.LL577	.alias		.LL578
13030                        	
13031                        		.dbg	line,	"include\routines_SHOP.c", 128; else if(joytrg(JOYPAD_1) & JOY_I)
13032                        		__bra		.LL578
         02:C988  4C AE CD   			bra	.LL578
13033    02:C98B             	.LL576:
13034                        		__ld.uiq	0
         02:C98B  62         			cla
13035                        		 _joytrg.1
         02:C98C  AA         			tax
         02:C98D  BD 2D 22   			lda	joytrg, x
         02:C990  BC DD 22   			ldy	joy6trg, x
13036                        		__tand.wi	1
         02:C993  29 01      			and	#1
         02:C995  C9 01      	!:		cmp	#1
13037                        		__bfalse	.LL579
         02:C997  B0 03 4C AE			bcc	.LL579
         02:C99B  CD          
13038                        	
13039                        		.dbg	line,	"include\routines_SHOP.c", 129; {
13040                        	
13041                        		.dbg	line,	"include\routines_SHOP.c", 130; switch(item_index)
13042                        		__ld.umq	_item_index
         02:C99C  AD D1 23   			lda	_item_index
13043                        		__bra		.LL580
         02:C99F  4C 8B CD   			bra	.LL580
13044                        	
13045                        		.dbg	line,	"include\routines_SHOP.c", 131; {
13046                        	
13047                        		.dbg	line,	"include\routines_SHOP.c", 132; // WEAPON 2 //
13048                        	
13049                        		.dbg	line,	"include\routines_SHOP.c", 133; case 0:
13050    02:C9A2             	.LL582:
13051                        		__case		0
13052                        	
13053                        		.dbg	line,	"include\routines_SHOP.c", 134; if(zenny_amount >= shop_prices[0])
13054                        		__ld.wm		_zenny_amount
         02:C9A2  AD 2E 26   			lda.l	_zenny_amount
         02:C9A5  AC 2F 26   			ldy.h	_zenny_amount
13055                        		__sge_w.wm	_shop_prices
         02:C9A8  CD 32 26   			cmp.l	_shop_prices		; Subtract memory from Y:A.
         02:C9AB  98         			tya
         02:C9AC  ED 33 26   			sbc.h	_shop_prices
         02:C9AF  50 02      			bvc	!+
         02:C9B1  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:C9B3  49 80      	!:		eor	#$80
         02:C9B5  0A         			asl	a
13056                        		__bfalse	.LL583
         02:C9B6  B0 03 4C AE			bcc	.LL583
         02:C9BA  CD          
13057                        	
13058                        		.dbg	line,	"include\routines_SHOP.c", 135; {
13059                        	
13060                        		.dbg	line,	"include\routines_SHOP.c", 136; if(weapon_level < 1)
13061                        		__ld.umq	_weapon_level
         02:C9BB  AD 25 23   			lda	_weapon_level
13062                        		__ult_b.uiq	1
         02:C9BE  C9 01      			cmp	#1		; Subtract integer from A.
         02:C9C0  6A         			ror	a		; CC if A < integer.
         02:C9C1  49 80      			eor	#$80
         02:C9C3  2A         			rol	a
13063                        		__bfalse	.LL584
         02:C9C4  B0 03 4C AE			bcc	.LL584
         02:C9C8  CD          
13064                        	
13065                        		.dbg	line,	"include\routines_SHOP.c", 137; {
13066                        	
13067                        		.dbg	line,	"include\routines_SHOP.c", 138; weapon_level = 1;
13068                        		__st.umiq	1, _weapon_level
         02:C9C9  A9 01      			lda.l	#1
         02:C9CB  8D 25 23   			sta	_weapon_level
13069                        	
13070                        		.dbg	line,	"include\routines_SHOP.c", 139; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_2, SIZEOF(tileset_WEAPON_2) >> 1 );
13071                        		__st.wmiq	4256, _di
         02:C9CE  A9 A0      			lda.l	#4256
         02:C9D0  85 F0      			sta.l	_di
         02:C9D2  A9 10      			lda.h	#4256
         02:C9D4  85 F1      			sta.h	_di
13072                        		__farptr	_tileset_WEAPON_2, _bp_bank, _bp
         02:C9D6  A9 E0      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_2))
         02:C9D8  85 EC      			sta.l	_bp
         02:C9DA  A9 68      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_2))
         02:C9DC  85 ED      			sta.h	_bp
         02:C9DE  A9 05      			lda	#bank(_tileset_WEAPON_2)
         02:C9E0  85 02      			sta	_bp_bank
13073                        		__ld.wi		___sizeof__tileset_WEAPON_2
         02:C9E2  A9 80      			lda.l	#___sizeof__tileset_WEAPON_2
         02:C9E4  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_2
13074                        		__lsr.wi	1
         02:C9E6  42         			say
         02:C9E7  4A         			lsr	a
         02:C9E8  42         			say
         02:C9E9  6A         			ror	a
13075                        		__st.wmq	_ax
         02:C9EA  85 F8      			sta.l	_ax
         02:C9EC  84 F9      			sty.h	_ax
13076                        		 _load_vram.3
         02:C9EE  82         			clx				; Offset to PCE VDC.
         02:C9EF  20 4F FF   			call	load_vram_x
13077                        	
13078                        		.dbg	line,	"include\routines_SHOP.c", 141; zenny_amount -= shop_prices[0];
13079                        		__ld.wm		_shop_prices
         02:C9F2  AD 32 26   			lda.l	_shop_prices
         02:C9F5  AC 33 26   			ldy.h	_shop_prices
13080                        		__isub_st.wmq	_zenny_amount
         02:C9F8  38         			sec
         02:C9F9  49 FF      			eor	#$FF
         02:C9FB  6D 2E 26   			adc.l	_zenny_amount
         02:C9FE  8D 2E 26   			sta.l	_zenny_amount
         02:CA01  98         			tya
         02:CA02  49 FF      			eor	#$FF
         02:CA04  6D 2F 26   			adc.h	_zenny_amount
         02:CA07  8D 2F 26   			sta.h	_zenny_amount
13081                        	
13082                        		.dbg	line,	"include\routines_SHOP.c", 142; display_ZENNY();
13083                        		__call		_display_ZENNY
         02:CA0A  20 45 FF   			call	_display_ZENNY
13084                        	
13085                        		.dbg	line,	"include\routines_SHOP.c", 143; }
13086                        	
13087                        		.dbg	line,	"include\routines_SHOP.c", 144; }
13088    02:CA0D             	.LL584	.alias		.LL581
13089                        	
13090                        		.dbg	line,	"include\routines_SHOP.c", 146; break;   
13091    02:CA0D             	.LL583	.alias		.LL581
13092                        		__bra		.LL581
         02:CA0D  4C AE CD   			bra	.LL581
13093                        	
13094                        		.dbg	line,	"include\routines_SHOP.c", 149; // WEAPON 4 //
13095                        	
13096                        		.dbg	line,	"include\routines_SHOP.c", 150; case 1:
13097    02:CA10             	.LL585:
13098                        		__case		1
13099                        	
13100                        		.dbg	line,	"include\routines_SHOP.c", 151; if(zenny_amount >= shop_prices[1])
13101                        		__ld.wm		_zenny_amount
         02:CA10  AD 2E 26   			lda.l	_zenny_amount
         02:CA13  AC 2F 26   			ldy.h	_zenny_amount
13102                        		__sge_w.wm	_shop_prices + 2
         02:CA16  CD 34 26   			cmp.l	_shop_prices + 2		; Subtract memory from Y:A.
         02:CA19  98         			tya
         02:CA1A  ED 35 26   			sbc.h	_shop_prices + 2
         02:CA1D  50 02      			bvc	!+
         02:CA1F  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:CA21  49 80      	!:		eor	#$80
         02:CA23  0A         			asl	a
13103                        		__bfalse	.LL586
         02:CA24  B0 03 4C AE			bcc	.LL586
         02:CA28  CD          
13104                        	
13105                        		.dbg	line,	"include\routines_SHOP.c", 152; {
13106                        	
13107                        		.dbg	line,	"include\routines_SHOP.c", 153; if(weapon_level < 2)
13108                        		__ld.umq	_weapon_level
         02:CA29  AD 25 23   			lda	_weapon_level
13109                        		__ult_b.uiq	2
         02:CA2C  C9 02      			cmp	#2		; Subtract integer from A.
         02:CA2E  6A         			ror	a		; CC if A < integer.
         02:CA2F  49 80      			eor	#$80
         02:CA31  2A         			rol	a
13110                        		__bfalse	.LL587
         02:CA32  B0 03 4C AE			bcc	.LL587
         02:CA36  CD          
13111                        	
13112                        		.dbg	line,	"include\routines_SHOP.c", 154; {
13113                        	
13114                        		.dbg	line,	"include\routines_SHOP.c", 155; weapon_level = 2;
13115                        		__st.umiq	2, _weapon_level
         02:CA37  A9 02      			lda.l	#2
         02:CA39  8D 25 23   			sta	_weapon_level
13116                        	
13117                        		.dbg	line,	"include\routines_SHOP.c", 156; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_4, SIZEOF(tileset_WEAPON_4) >> 1 );
13118                        		__st.wmiq	4256, _di
         02:CA3C  A9 A0      			lda.l	#4256
         02:CA3E  85 F0      			sta.l	_di
         02:CA40  A9 10      			lda.h	#4256
         02:CA42  85 F1      			sta.h	_di
13119                        		__farptr	_tileset_WEAPON_4, _bp_bank, _bp
         02:CA44  A9 60      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_4))
         02:CA46  85 EC      			sta.l	_bp
         02:CA48  A9 69      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_4))
         02:CA4A  85 ED      			sta.h	_bp
         02:CA4C  A9 05      			lda	#bank(_tileset_WEAPON_4)
         02:CA4E  85 02      			sta	_bp_bank
13120                        		__ld.wi		___sizeof__tileset_WEAPON_4
         02:CA50  A9 80      			lda.l	#___sizeof__tileset_WEAPON_4
         02:CA52  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_4
13121                        		__lsr.wi	1
         02:CA54  42         			say
         02:CA55  4A         			lsr	a
         02:CA56  42         			say
         02:CA57  6A         			ror	a
13122                        		__st.wmq	_ax
         02:CA58  85 F8      			sta.l	_ax
         02:CA5A  84 F9      			sty.h	_ax
13123                        		 _load_vram.3
         02:CA5C  82         			clx				; Offset to PCE VDC.
         02:CA5D  20 4F FF   			call	load_vram_x
13124                        	
13125                        		.dbg	line,	"include\routines_SHOP.c", 158; zenny_amount -= shop_prices[1];
13126                        		__ld.wm		_shop_prices + 2
         02:CA60  AD 34 26   			lda.l	_shop_prices + 2
         02:CA63  AC 35 26   			ldy.h	_shop_prices + 2
13127                        		__isub_st.wmq	_zenny_amount
         02:CA66  38         			sec
         02:CA67  49 FF      			eor	#$FF
         02:CA69  6D 2E 26   			adc.l	_zenny_amount
         02:CA6C  8D 2E 26   			sta.l	_zenny_amount
         02:CA6F  98         			tya
         02:CA70  49 FF      			eor	#$FF
         02:CA72  6D 2F 26   			adc.h	_zenny_amount
         02:CA75  8D 2F 26   			sta.h	_zenny_amount
13128                        	
13129                        		.dbg	line,	"include\routines_SHOP.c", 159; display_ZENNY();
13130                        		__call		_display_ZENNY
         02:CA78  20 45 FF   			call	_display_ZENNY
13131                        	
13132                        		.dbg	line,	"include\routines_SHOP.c", 160; }
13133                        	
13134                        		.dbg	line,	"include\routines_SHOP.c", 161; }
13135    02:CA7B             	.LL587	.alias		.LL581
13136                        	
13137                        		.dbg	line,	"include\routines_SHOP.c", 163; break; 
13138    02:CA7B             	.LL586	.alias		.LL581
13139                        		__bra		.LL581
         02:CA7B  4C AE CD   			bra	.LL581
13140                        	
13141                        		.dbg	line,	"include\routines_SHOP.c", 166; // WEAPON 5 //
13142                        	
13143                        		.dbg	line,	"include\routines_SHOP.c", 167; case 2:
13144    02:CA7E             	.LL588:
13145                        		__case		2
13146                        	
13147                        		.dbg	line,	"include\routines_SHOP.c", 168; if(zenny_amount >= shop_prices[2])
13148                        		__ld.wm		_zenny_amount
         02:CA7E  AD 2E 26   			lda.l	_zenny_amount
         02:CA81  AC 2F 26   			ldy.h	_zenny_amount
13149                        		__sge_w.wm	_shop_prices + 4
         02:CA84  CD 36 26   			cmp.l	_shop_prices + 4		; Subtract memory from Y:A.
         02:CA87  98         			tya
         02:CA88  ED 37 26   			sbc.h	_shop_prices + 4
         02:CA8B  50 02      			bvc	!+
         02:CA8D  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:CA8F  49 80      	!:		eor	#$80
         02:CA91  0A         			asl	a
13150                        		__bfalse	.LL589
         02:CA92  B0 03 4C AE			bcc	.LL589
         02:CA96  CD          
13151                        	
13152                        		.dbg	line,	"include\routines_SHOP.c", 169; {
13153                        	
13154                        		.dbg	line,	"include\routines_SHOP.c", 170; if(weapon_level < 3)
13155                        		__ld.umq	_weapon_level
         02:CA97  AD 25 23   			lda	_weapon_level
13156                        		__ult_b.uiq	3
         02:CA9A  C9 03      			cmp	#3		; Subtract integer from A.
         02:CA9C  6A         			ror	a		; CC if A < integer.
         02:CA9D  49 80      			eor	#$80
         02:CA9F  2A         			rol	a
13157                        		__bfalse	.LL590
         02:CAA0  B0 03 4C AE			bcc	.LL590
         02:CAA4  CD          
13158                        	
13159                        		.dbg	line,	"include\routines_SHOP.c", 171; {
13160                        	
13161                        		.dbg	line,	"include\routines_SHOP.c", 172; weapon_level = 3;
13162                        		__st.umiq	3, _weapon_level
         02:CAA5  A9 03      			lda.l	#3
         02:CAA7  8D 25 23   			sta	_weapon_level
13163                        	
13164                        		.dbg	line,	"include\routines_SHOP.c", 173; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_5, SIZEOF(tileset_WEAPON_5) >> 1 );
13165                        		__st.wmiq	4256, _di
         02:CAAA  A9 A0      			lda.l	#4256
         02:CAAC  85 F0      			sta.l	_di
         02:CAAE  A9 10      			lda.h	#4256
         02:CAB0  85 F1      			sta.h	_di
13166                        		__farptr	_tileset_WEAPON_5, _bp_bank, _bp
         02:CAB2  A9 E0      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_5))
         02:CAB4  85 EC      			sta.l	_bp
         02:CAB6  A9 69      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_5))
         02:CAB8  85 ED      			sta.h	_bp
         02:CABA  A9 05      			lda	#bank(_tileset_WEAPON_5)
         02:CABC  85 02      			sta	_bp_bank
13167                        		__ld.wi		___sizeof__tileset_WEAPON_5
         02:CABE  A9 80      			lda.l	#___sizeof__tileset_WEAPON_5
         02:CAC0  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_5
13168                        		__lsr.wi	1
         02:CAC2  42         			say
         02:CAC3  4A         			lsr	a
         02:CAC4  42         			say
         02:CAC5  6A         			ror	a
13169                        		__st.wmq	_ax
         02:CAC6  85 F8      			sta.l	_ax
         02:CAC8  84 F9      			sty.h	_ax
13170                        		 _load_vram.3
         02:CACA  82         			clx				; Offset to PCE VDC.
         02:CACB  20 4F FF   			call	load_vram_x
13171                        	
13172                        		.dbg	line,	"include\routines_SHOP.c", 175; zenny_amount -= shop_prices[2];
13173                        		__ld.wm		_shop_prices + 4
         02:CACE  AD 36 26   			lda.l	_shop_prices + 4
         02:CAD1  AC 37 26   			ldy.h	_shop_prices + 4
13174                        		__isub_st.wmq	_zenny_amount
         02:CAD4  38         			sec
         02:CAD5  49 FF      			eor	#$FF
         02:CAD7  6D 2E 26   			adc.l	_zenny_amount
         02:CADA  8D 2E 26   			sta.l	_zenny_amount
         02:CADD  98         			tya
         02:CADE  49 FF      			eor	#$FF
         02:CAE0  6D 2F 26   			adc.h	_zenny_amount
         02:CAE3  8D 2F 26   			sta.h	_zenny_amount
13175                        	
13176                        		.dbg	line,	"include\routines_SHOP.c", 176; display_ZENNY();
13177                        		__call		_display_ZENNY
         02:CAE6  20 45 FF   			call	_display_ZENNY
13178                        	
13179                        		.dbg	line,	"include\routines_SHOP.c", 177; }
13180                        	
13181                        		.dbg	line,	"include\routines_SHOP.c", 178; }
13182    02:CAE9             	.LL590	.alias		.LL581
13183                        	
13184                        		.dbg	line,	"include\routines_SHOP.c", 180; break;   
13185    02:CAE9             	.LL589	.alias		.LL581
13186                        		__bra		.LL581
         02:CAE9  4C AE CD   			bra	.LL581
13187                        	
13188                        		.dbg	line,	"include\routines_SHOP.c", 183; // WEAPON 8 //
13189                        	
13190                        		.dbg	line,	"include\routines_SHOP.c", 184; case 3:
13191    02:CAEC             	.LL591:
13192                        		__case		3
13193                        	
13194                        		.dbg	line,	"include\routines_SHOP.c", 185; if(zenny_amount >= shop_prices[3])
13195                        		__ld.wm		_zenny_amount
         02:CAEC  AD 2E 26   			lda.l	_zenny_amount
         02:CAEF  AC 2F 26   			ldy.h	_zenny_amount
13196                        		__sge_w.wm	_shop_prices + 6
         02:CAF2  CD 38 26   			cmp.l	_shop_prices + 6		; Subtract memory from Y:A.
         02:CAF5  98         			tya
         02:CAF6  ED 39 26   			sbc.h	_shop_prices + 6
         02:CAF9  50 02      			bvc	!+
         02:CAFB  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:CAFD  49 80      	!:		eor	#$80
         02:CAFF  0A         			asl	a
13197                        		__bfalse	.LL592
         02:CB00  B0 03 4C AE			bcc	.LL592
         02:CB04  CD          
13198                        	
13199                        		.dbg	line,	"include\routines_SHOP.c", 186; {
13200                        	
13201                        		.dbg	line,	"include\routines_SHOP.c", 187; if(weapon_level < 4)
13202                        		__ld.umq	_weapon_level
         02:CB05  AD 25 23   			lda	_weapon_level
13203                        		__ult_b.uiq	4
         02:CB08  C9 04      			cmp	#4		; Subtract integer from A.
         02:CB0A  6A         			ror	a		; CC if A < integer.
         02:CB0B  49 80      			eor	#$80
         02:CB0D  2A         			rol	a
13204                        		__bfalse	.LL593
         02:CB0E  B0 03 4C AE			bcc	.LL593
         02:CB12  CD          
13205                        	
13206                        		.dbg	line,	"include\routines_SHOP.c", 188; {
13207                        	
13208                        		.dbg	line,	"include\routines_SHOP.c", 189; weapon_level = 4;
13209                        		__st.umiq	4, _weapon_level
         02:CB13  A9 04      			lda.l	#4
         02:CB15  8D 25 23   			sta	_weapon_level
13210                        	
13211                        		.dbg	line,	"include\routines_SHOP.c", 190; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_8, SIZEOF(tileset_WEAPON_8) >> 1 );
13212                        		__st.wmiq	4256, _di
         02:CB18  A9 A0      			lda.l	#4256
         02:CB1A  85 F0      			sta.l	_di
         02:CB1C  A9 10      			lda.h	#4256
         02:CB1E  85 F1      			sta.h	_di
13213                        		__farptr	_tileset_WEAPON_8, _bp_bank, _bp
         02:CB20  A9 60      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_8))
         02:CB22  85 EC      			sta.l	_bp
         02:CB24  A9 6A      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_8))
         02:CB26  85 ED      			sta.h	_bp
         02:CB28  A9 05      			lda	#bank(_tileset_WEAPON_8)
         02:CB2A  85 02      			sta	_bp_bank
13214                        		__ld.wi		___sizeof__tileset_WEAPON_8
         02:CB2C  A9 80      			lda.l	#___sizeof__tileset_WEAPON_8
         02:CB2E  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_8
13215                        		__lsr.wi	1
         02:CB30  42         			say
         02:CB31  4A         			lsr	a
         02:CB32  42         			say
         02:CB33  6A         			ror	a
13216                        		__st.wmq	_ax
         02:CB34  85 F8      			sta.l	_ax
         02:CB36  84 F9      			sty.h	_ax
13217                        		 _load_vram.3
         02:CB38  82         			clx				; Offset to PCE VDC.
         02:CB39  20 4F FF   			call	load_vram_x
13218                        	
13219                        		.dbg	line,	"include\routines_SHOP.c", 192; zenny_amount -= shop_prices[3];
13220                        		__ld.wm		_shop_prices + 6
         02:CB3C  AD 38 26   			lda.l	_shop_prices + 6
         02:CB3F  AC 39 26   			ldy.h	_shop_prices + 6
13221                        		__isub_st.wmq	_zenny_amount
         02:CB42  38         			sec
         02:CB43  49 FF      			eor	#$FF
         02:CB45  6D 2E 26   			adc.l	_zenny_amount
         02:CB48  8D 2E 26   			sta.l	_zenny_amount
         02:CB4B  98         			tya
         02:CB4C  49 FF      			eor	#$FF
         02:CB4E  6D 2F 26   			adc.h	_zenny_amount
         02:CB51  8D 2F 26   			sta.h	_zenny_amount
13222                        	
13223                        		.dbg	line,	"include\routines_SHOP.c", 193; display_ZENNY();
13224                        		__call		_display_ZENNY
         02:CB54  20 45 FF   			call	_display_ZENNY
13225                        	
13226                        		.dbg	line,	"include\routines_SHOP.c", 194; }
13227                        	
13228                        		.dbg	line,	"include\routines_SHOP.c", 195; }
13229    02:CB57             	.LL593	.alias		.LL581
13230                        	
13231                        		.dbg	line,	"include\routines_SHOP.c", 197; break;  
13232    02:CB57             	.LL592	.alias		.LL581
13233                        		__bra		.LL581
         02:CB57  4C AE CD   			bra	.LL581
13234                        	
13235                        		.dbg	line,	"include\routines_SHOP.c", 200; // KEY //
13236                        	
13237                        		.dbg	line,	"include\routines_SHOP.c", 201; case 4:
13238    02:CB5A             	.LL594:
13239                        		__case		4
13240                        	
13241                        		.dbg	line,	"include\routines_SHOP.c", 202; if(zenny_amount >= shop_prices[4])
13242                        		__ld.wm		_zenny_amount
         02:CB5A  AD 2E 26   			lda.l	_zenny_amount
         02:CB5D  AC 2F 26   			ldy.h	_zenny_amount
13243                        		__sge_w.wm	_shop_prices + 8
         02:CB60  CD 3A 26   			cmp.l	_shop_prices + 8		; Subtract memory from Y:A.
         02:CB63  98         			tya
         02:CB64  ED 3B 26   			sbc.h	_shop_prices + 8
         02:CB67  50 02      			bvc	!+
         02:CB69  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:CB6B  49 80      	!:		eor	#$80
         02:CB6D  0A         			asl	a
13244                        		__bfalse	.LL595
         02:CB6E  B0 03 4C AE			bcc	.LL595
         02:CB72  CD          
13245                        	
13246                        		.dbg	line,	"include\routines_SHOP.c", 203; {
13247                        	
13248                        		.dbg	line,	"include\routines_SHOP.c", 204; key_amount += 1;
13249                        		__add_st.umiq	1, _key_amount
         02:CB73  EE 28 23   			inc	_key_amount
13250                        	
13251                        		.dbg	line,	"include\routines_SHOP.c", 206; zenny_amount -= shop_prices[4];
13252                        		__ld.wm		_shop_prices + 8
         02:CB76  AD 3A 26   			lda.l	_shop_prices + 8
         02:CB79  AC 3B 26   			ldy.h	_shop_prices + 8
13253                        		__isub_st.wmq	_zenny_amount
         02:CB7C  38         			sec
         02:CB7D  49 FF      			eor	#$FF
         02:CB7F  6D 2E 26   			adc.l	_zenny_amount
         02:CB82  8D 2E 26   			sta.l	_zenny_amount
         02:CB85  98         			tya
         02:CB86  49 FF      			eor	#$FF
         02:CB88  6D 2F 26   			adc.h	_zenny_amount
         02:CB8B  8D 2F 26   			sta.h	_zenny_amount
13254                        	
13255                        		.dbg	line,	"include\routines_SHOP.c", 207; display_KEY();
13256                        		__call		_display_KEY
         02:CB8E  20 8B FF   			call	_display_KEY
13257                        	
13258                        		.dbg	line,	"include\routines_SHOP.c", 208; }
13259                        	
13260                        		.dbg	line,	"include\routines_SHOP.c", 210; break;   
13261    02:CB91             	.LL595	.alias		.LL581
13262                        		__bra		.LL581
         02:CB91  4C AE CD   			bra	.LL581
13263                        	
13264                        		.dbg	line,	"include\routines_SHOP.c", 213; // ARMOR 1 //
13265                        	
13266                        		.dbg	line,	"include\routines_SHOP.c", 214; case 5:
13267    02:CB94             	.LL596:
13268                        		__case		5
13269                        	
13270                        		.dbg	line,	"include\routines_SHOP.c", 215; if(zenny_amount >= shop_prices[5])
13271                        		__ld.wm		_zenny_amount
         02:CB94  AD 2E 26   			lda.l	_zenny_amount
         02:CB97  AC 2F 26   			ldy.h	_zenny_amount
13272                        		__sge_w.wm	_shop_prices + 10
         02:CB9A  CD 3C 26   			cmp.l	_shop_prices + 10		; Subtract memory from Y:A.
         02:CB9D  98         			tya
         02:CB9E  ED 3D 26   			sbc.h	_shop_prices + 10
         02:CBA1  50 02      			bvc	!+
         02:CBA3  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:CBA5  49 80      	!:		eor	#$80
         02:CBA7  0A         			asl	a
13273                        		__bfalse	.LL597
         02:CBA8  B0 03 4C AE			bcc	.LL597
         02:CBAC  CD          
13274                        	
13275                        		.dbg	line,	"include\routines_SHOP.c", 216; {
13276                        	
13277                        		.dbg	line,	"include\routines_SHOP.c", 217; if(armor_level < 1)
13278                        		__ld.umq	_armor_level
         02:CBAD  AD 24 23   			lda	_armor_level
13279                        		__ult_b.uiq	1
         02:CBB0  C9 01      			cmp	#1		; Subtract integer from A.
         02:CBB2  6A         			ror	a		; CC if A < integer.
         02:CBB3  49 80      			eor	#$80
         02:CBB5  2A         			rol	a
13280                        		__bfalse	.LL598
         02:CBB6  B0 03 4C AE			bcc	.LL598
         02:CBBA  CD          
13281                        	
13282                        		.dbg	line,	"include\routines_SHOP.c", 218; {
13283                        	
13284                        		.dbg	line,	"include\routines_SHOP.c", 219; armor_level = 1;
13285                        		__st.umiq	1, _armor_level
         02:CBBB  A9 01      			lda.l	#1
         02:CBBD  8D 24 23   			sta	_armor_level
13286                        	
13287                        		.dbg	line,	"include\routines_SHOP.c", 220; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_1, SIZEOF(tileset_ARMOR_1) >> 1 );
13288                        		__st.wmiq	4320, _di
         02:CBC0  A9 E0      			lda.l	#4320
         02:CBC2  85 F0      			sta.l	_di
         02:CBC4  A9 10      			lda.h	#4320
         02:CBC6  85 F1      			sta.h	_di
13289                        		__farptr	_tileset_ARMOR_1, _bp_bank, _bp
         02:CBC8  A9 60      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_1))
         02:CBCA  85 EC      			sta.l	_bp
         02:CBCC  A9 66      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_1))
         02:CBCE  85 ED      			sta.h	_bp
         02:CBD0  A9 05      			lda	#bank(_tileset_ARMOR_1)
         02:CBD2  85 02      			sta	_bp_bank
13290                        		__ld.wi		___sizeof__tileset_ARMOR_1
         02:CBD4  A9 80      			lda.l	#___sizeof__tileset_ARMOR_1
         02:CBD6  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_1
13291                        		__lsr.wi	1
         02:CBD8  42         			say
         02:CBD9  4A         			lsr	a
         02:CBDA  42         			say
         02:CBDB  6A         			ror	a
13292                        		__st.wmq	_ax
         02:CBDC  85 F8      			sta.l	_ax
         02:CBDE  84 F9      			sty.h	_ax
13293                        		 _load_vram.3
         02:CBE0  82         			clx				; Offset to PCE VDC.
         02:CBE1  20 4F FF   			call	load_vram_x
13294                        	
13295                        		.dbg	line,	"include\routines_SHOP.c", 222; zenny_amount -= shop_prices[5];
13296                        		__ld.wm		_shop_prices + 10
         02:CBE4  AD 3C 26   			lda.l	_shop_prices + 10
         02:CBE7  AC 3D 26   			ldy.h	_shop_prices + 10
13297                        		__isub_st.wmq	_zenny_amount
         02:CBEA  38         			sec
         02:CBEB  49 FF      			eor	#$FF
         02:CBED  6D 2E 26   			adc.l	_zenny_amount
         02:CBF0  8D 2E 26   			sta.l	_zenny_amount
         02:CBF3  98         			tya
         02:CBF4  49 FF      			eor	#$FF
         02:CBF6  6D 2F 26   			adc.h	_zenny_amount
         02:CBF9  8D 2F 26   			sta.h	_zenny_amount
13298                        	
13299                        		.dbg	line,	"include\routines_SHOP.c", 223; display_ZENNY();
13300                        		__call		_display_ZENNY
         02:CBFC  20 45 FF   			call	_display_ZENNY
13301                        	
13302                        		.dbg	line,	"include\routines_SHOP.c", 224; }
13303                        	
13304                        		.dbg	line,	"include\routines_SHOP.c", 225; }
13305    02:CBFF             	.LL598	.alias		.LL581
13306                        	
13307                        		.dbg	line,	"include\routines_SHOP.c", 227; break;   
13308    02:CBFF             	.LL597	.alias		.LL581
13309                        		__bra		.LL581
         02:CBFF  4C AE CD   			bra	.LL581
13310                        	
13311                        		.dbg	line,	"include\routines_SHOP.c", 230; // ARMOR 2 //
13312                        	
13313                        		.dbg	line,	"include\routines_SHOP.c", 231; case 6:
13314    02:CC02             	.LL599:
13315                        		__case		6
13316                        	
13317                        		.dbg	line,	"include\routines_SHOP.c", 232; if(zenny_amount >= shop_prices[6])
13318                        		__ld.wm		_zenny_amount
         02:CC02  AD 2E 26   			lda.l	_zenny_amount
         02:CC05  AC 2F 26   			ldy.h	_zenny_amount
13319                        		__sge_w.wm	_shop_prices + 12
         02:CC08  CD 3E 26   			cmp.l	_shop_prices + 12		; Subtract memory from Y:A.
         02:CC0B  98         			tya
         02:CC0C  ED 3F 26   			sbc.h	_shop_prices + 12
         02:CC0F  50 02      			bvc	!+
         02:CC11  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:CC13  49 80      	!:		eor	#$80
         02:CC15  0A         			asl	a
13320                        		__bfalse	.LL600
         02:CC16  B0 03 4C AE			bcc	.LL600
         02:CC1A  CD          
13321                        	
13322                        		.dbg	line,	"include\routines_SHOP.c", 233; {
13323                        	
13324                        		.dbg	line,	"include\routines_SHOP.c", 234; if(armor_level < 4)
13325                        		__ld.umq	_armor_level
         02:CC1B  AD 24 23   			lda	_armor_level
13326                        		__ult_b.uiq	4
         02:CC1E  C9 04      			cmp	#4		; Subtract integer from A.
         02:CC20  6A         			ror	a		; CC if A < integer.
         02:CC21  49 80      			eor	#$80
         02:CC23  2A         			rol	a
13327                        		__bfalse	.LL601
         02:CC24  B0 03 4C AE			bcc	.LL601
         02:CC28  CD          
13328                        	
13329                        		.dbg	line,	"include\routines_SHOP.c", 235; {
13330                        	
13331                        		.dbg	line,	"include\routines_SHOP.c", 236; armor_level = 4;
13332                        		__st.umiq	4, _armor_level
         02:CC29  A9 04      			lda.l	#4
         02:CC2B  8D 24 23   			sta	_armor_level
13333                        	
13334                        		.dbg	line,	"include\routines_SHOP.c", 237; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_2, SIZEOF(tileset_ARMOR_2) >> 1 );
13335                        		__st.wmiq	4320, _di
         02:CC2E  A9 E0      			lda.l	#4320
         02:CC30  85 F0      			sta.l	_di
         02:CC32  A9 10      			lda.h	#4320
         02:CC34  85 F1      			sta.h	_di
13336                        		__farptr	_tileset_ARMOR_2, _bp_bank, _bp
         02:CC36  A9 E0      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_2))
         02:CC38  85 EC      			sta.l	_bp
         02:CC3A  A9 66      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_2))
         02:CC3C  85 ED      			sta.h	_bp
         02:CC3E  A9 05      			lda	#bank(_tileset_ARMOR_2)
         02:CC40  85 02      			sta	_bp_bank
13337                        		__ld.wi		___sizeof__tileset_ARMOR_2
         02:CC42  A9 80      			lda.l	#___sizeof__tileset_ARMOR_2
         02:CC44  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_2
13338                        		__lsr.wi	1
         02:CC46  42         			say
         02:CC47  4A         			lsr	a
         02:CC48  42         			say
         02:CC49  6A         			ror	a
13339                        		__st.wmq	_ax
         02:CC4A  85 F8      			sta.l	_ax
         02:CC4C  84 F9      			sty.h	_ax
13340                        		 _load_vram.3
         02:CC4E  82         			clx				; Offset to PCE VDC.
         02:CC4F  20 4F FF   			call	load_vram_x
13341                        	
13342                        		.dbg	line,	"include\routines_SHOP.c", 239; zenny_amount -= shop_prices[6];
13343                        		__ld.wm		_shop_prices + 12
         02:CC52  AD 3E 26   			lda.l	_shop_prices + 12
         02:CC55  AC 3F 26   			ldy.h	_shop_prices + 12
13344                        		__isub_st.wmq	_zenny_amount
         02:CC58  38         			sec
         02:CC59  49 FF      			eor	#$FF
         02:CC5B  6D 2E 26   			adc.l	_zenny_amount
         02:CC5E  8D 2E 26   			sta.l	_zenny_amount
         02:CC61  98         			tya
         02:CC62  49 FF      			eor	#$FF
         02:CC64  6D 2F 26   			adc.h	_zenny_amount
         02:CC67  8D 2F 26   			sta.h	_zenny_amount
13345                        	
13346                        		.dbg	line,	"include\routines_SHOP.c", 240; display_ZENNY();
13347                        		__call		_display_ZENNY
         02:CC6A  20 45 FF   			call	_display_ZENNY
13348                        	
13349                        		.dbg	line,	"include\routines_SHOP.c", 241; }
13350                        	
13351                        		.dbg	line,	"include\routines_SHOP.c", 242; }
13352    02:CC6D             	.LL601	.alias		.LL581
13353                        	
13354                        		.dbg	line,	"include\routines_SHOP.c", 244; break;    
13355    02:CC6D             	.LL600	.alias		.LL581
13356                        		__bra		.LL581
         02:CC6D  4C AE CD   			bra	.LL581
13357                        	
13358                        		.dbg	line,	"include\routines_SHOP.c", 247; // ARMOR 4 //
13359                        	
13360                        		.dbg	line,	"include\routines_SHOP.c", 248; case 7:
13361    02:CC70             	.LL602:
13362                        		__case		7
13363                        	
13364                        		.dbg	line,	"include\routines_SHOP.c", 249; if(zenny_amount >= shop_prices[7])
13365                        		__ld.wm		_zenny_amount
         02:CC70  AD 2E 26   			lda.l	_zenny_amount
         02:CC73  AC 2F 26   			ldy.h	_zenny_amount
13366                        		__sge_w.wm	_shop_prices + 14
         02:CC76  CD 40 26   			cmp.l	_shop_prices + 14		; Subtract memory from Y:A.
         02:CC79  98         			tya
         02:CC7A  ED 41 26   			sbc.h	_shop_prices + 14
         02:CC7D  50 02      			bvc	!+
         02:CC7F  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:CC81  49 80      	!:		eor	#$80
         02:CC83  0A         			asl	a
13367                        		__bfalse	.LL603
         02:CC84  B0 03 4C AE			bcc	.LL603
         02:CC88  CD          
13368                        	
13369                        		.dbg	line,	"include\routines_SHOP.c", 250; {
13370                        	
13371                        		.dbg	line,	"include\routines_SHOP.c", 251; if(armor_level < 5)
13372                        		__ld.umq	_armor_level
         02:CC89  AD 24 23   			lda	_armor_level
13373                        		__ult_b.uiq	5
         02:CC8C  C9 05      			cmp	#5		; Subtract integer from A.
         02:CC8E  6A         			ror	a		; CC if A < integer.
         02:CC8F  49 80      			eor	#$80
         02:CC91  2A         			rol	a
13374                        		__bfalse	.LL604
         02:CC92  B0 03 4C AE			bcc	.LL604
         02:CC96  CD          
13375                        	
13376                        		.dbg	line,	"include\routines_SHOP.c", 252; {
13377                        	
13378                        		.dbg	line,	"include\routines_SHOP.c", 253; armor_level = 5;
13379                        		__st.umiq	5, _armor_level
         02:CC97  A9 05      			lda.l	#5
         02:CC99  8D 24 23   			sta	_armor_level
13380                        	
13381                        		.dbg	line,	"include\routines_SHOP.c", 254; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_4, SIZEOF(tileset_ARMOR_4) >> 1 );
13382                        		__st.wmiq	4320, _di
         02:CC9C  A9 E0      			lda.l	#4320
         02:CC9E  85 F0      			sta.l	_di
         02:CCA0  A9 10      			lda.h	#4320
         02:CCA2  85 F1      			sta.h	_di
13383                        		__farptr	_tileset_ARMOR_4, _bp_bank, _bp
         02:CCA4  A9 60      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_4))
         02:CCA6  85 EC      			sta.l	_bp
         02:CCA8  A9 67      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_4))
         02:CCAA  85 ED      			sta.h	_bp
         02:CCAC  A9 05      			lda	#bank(_tileset_ARMOR_4)
         02:CCAE  85 02      			sta	_bp_bank
13384                        		__ld.wi		___sizeof__tileset_ARMOR_4
         02:CCB0  A9 80      			lda.l	#___sizeof__tileset_ARMOR_4
         02:CCB2  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_4
13385                        		__lsr.wi	1
         02:CCB4  42         			say
         02:CCB5  4A         			lsr	a
         02:CCB6  42         			say
         02:CCB7  6A         			ror	a
13386                        		__st.wmq	_ax
         02:CCB8  85 F8      			sta.l	_ax
         02:CCBA  84 F9      			sty.h	_ax
13387                        		 _load_vram.3
         02:CCBC  82         			clx				; Offset to PCE VDC.
         02:CCBD  20 4F FF   			call	load_vram_x
13388                        	
13389                        		.dbg	line,	"include\routines_SHOP.c", 256; zenny_amount -= shop_prices[7];
13390                        		__ld.wm		_shop_prices + 14
         02:CCC0  AD 40 26   			lda.l	_shop_prices + 14
         02:CCC3  AC 41 26   			ldy.h	_shop_prices + 14
13391                        		__isub_st.wmq	_zenny_amount
         02:CCC6  38         			sec
         02:CCC7  49 FF      			eor	#$FF
         02:CCC9  6D 2E 26   			adc.l	_zenny_amount
         02:CCCC  8D 2E 26   			sta.l	_zenny_amount
         02:CCCF  98         			tya
         02:CCD0  49 FF      			eor	#$FF
         02:CCD2  6D 2F 26   			adc.h	_zenny_amount
         02:CCD5  8D 2F 26   			sta.h	_zenny_amount
13392                        	
13393                        		.dbg	line,	"include\routines_SHOP.c", 257; display_ZENNY();
13394                        		__call		_display_ZENNY
         02:CCD8  20 45 FF   			call	_display_ZENNY
13395                        	
13396                        		.dbg	line,	"include\routines_SHOP.c", 258; }
13397                        	
13398                        		.dbg	line,	"include\routines_SHOP.c", 259; }
13399    02:CCDB             	.LL604	.alias		.LL581
13400                        	
13401                        		.dbg	line,	"include\routines_SHOP.c", 261; break;   
13402    02:CCDB             	.LL603	.alias		.LL581
13403                        		__bra		.LL581
         02:CCDB  4C AE CD   			bra	.LL581
13404                        	
13405                        		.dbg	line,	"include\routines_SHOP.c", 264; // ARMOR 8 //
13406                        	
13407                        		.dbg	line,	"include\routines_SHOP.c", 265; case 8:
13408    02:CCDE             	.LL605:
13409                        		__case		8
13410                        	
13411                        		.dbg	line,	"include\routines_SHOP.c", 266; if(zenny_amount >= shop_prices[8])
13412                        		__ld.wm		_zenny_amount
         02:CCDE  AD 2E 26   			lda.l	_zenny_amount
         02:CCE1  AC 2F 26   			ldy.h	_zenny_amount
13413                        		__sge_w.wm	_shop_prices + 16
         02:CCE4  CD 42 26   			cmp.l	_shop_prices + 16		; Subtract memory from Y:A.
         02:CCE7  98         			tya
         02:CCE8  ED 43 26   			sbc.h	_shop_prices + 16
         02:CCEB  50 02      			bvc	!+
         02:CCED  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:CCEF  49 80      	!:		eor	#$80
         02:CCF1  0A         			asl	a
13414                        		__bfalse	.LL606
         02:CCF2  B0 03 4C AE			bcc	.LL606
         02:CCF6  CD          
13415                        	
13416                        		.dbg	line,	"include\routines_SHOP.c", 267; {
13417                        	
13418                        		.dbg	line,	"include\routines_SHOP.c", 268; if(armor_level < 8)
13419                        		__ld.umq	_armor_level
         02:CCF7  AD 24 23   			lda	_armor_level
13420                        		__ult_b.uiq	8
         02:CCFA  C9 08      			cmp	#8		; Subtract integer from A.
         02:CCFC  6A         			ror	a		; CC if A < integer.
         02:CCFD  49 80      			eor	#$80
         02:CCFF  2A         			rol	a
13421                        		__bfalse	.LL607
         02:CD00  B0 03 4C AE			bcc	.LL607
         02:CD04  CD          
13422                        	
13423                        		.dbg	line,	"include\routines_SHOP.c", 269; {
13424                        	
13425                        		.dbg	line,	"include\routines_SHOP.c", 270; armor_level = 8;
13426                        		__st.umiq	8, _armor_level
         02:CD05  A9 08      			lda.l	#8
         02:CD07  8D 24 23   			sta	_armor_level
13427                        	
13428                        		.dbg	line,	"include\routines_SHOP.c", 271; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_8, SIZEOF(tileset_ARMOR_8) >> 1 );
13429                        		__st.wmiq	4320, _di
         02:CD0A  A9 E0      			lda.l	#4320
         02:CD0C  85 F0      			sta.l	_di
         02:CD0E  A9 10      			lda.h	#4320
         02:CD10  85 F1      			sta.h	_di
13430                        		__farptr	_tileset_ARMOR_8, _bp_bank, _bp
         02:CD12  A9 E0      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_8))
         02:CD14  85 EC      			sta.l	_bp
         02:CD16  A9 67      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_8))
         02:CD18  85 ED      			sta.h	_bp
         02:CD1A  A9 05      			lda	#bank(_tileset_ARMOR_8)
         02:CD1C  85 02      			sta	_bp_bank
13431                        		__ld.wi		___sizeof__tileset_ARMOR_8
         02:CD1E  A9 80      			lda.l	#___sizeof__tileset_ARMOR_8
         02:CD20  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_8
13432                        		__lsr.wi	1
         02:CD22  42         			say
         02:CD23  4A         			lsr	a
         02:CD24  42         			say
         02:CD25  6A         			ror	a
13433                        		__st.wmq	_ax
         02:CD26  85 F8      			sta.l	_ax
         02:CD28  84 F9      			sty.h	_ax
13434                        		 _load_vram.3
         02:CD2A  82         			clx				; Offset to PCE VDC.
         02:CD2B  20 4F FF   			call	load_vram_x
13435                        	
13436                        		.dbg	line,	"include\routines_SHOP.c", 273; zenny_amount -= shop_prices[8];
13437                        		__ld.wm		_shop_prices + 16
         02:CD2E  AD 42 26   			lda.l	_shop_prices + 16
         02:CD31  AC 43 26   			ldy.h	_shop_prices + 16
13438                        		__isub_st.wmq	_zenny_amount
         02:CD34  38         			sec
         02:CD35  49 FF      			eor	#$FF
         02:CD37  6D 2E 26   			adc.l	_zenny_amount
         02:CD3A  8D 2E 26   			sta.l	_zenny_amount
         02:CD3D  98         			tya
         02:CD3E  49 FF      			eor	#$FF
         02:CD40  6D 2F 26   			adc.h	_zenny_amount
         02:CD43  8D 2F 26   			sta.h	_zenny_amount
13439                        	
13440                        		.dbg	line,	"include\routines_SHOP.c", 274; display_ZENNY();
13441                        		__call		_display_ZENNY
         02:CD46  20 45 FF   			call	_display_ZENNY
13442                        	
13443                        		.dbg	line,	"include\routines_SHOP.c", 275; }
13444                        	
13445                        		.dbg	line,	"include\routines_SHOP.c", 276; }
13446    02:CD49             	.LL607	.alias		.LL581
13447                        	
13448                        		.dbg	line,	"include\routines_SHOP.c", 278; break;   
13449    02:CD49             	.LL606	.alias		.LL581
13450                        		__bra		.LL581
         02:CD49  80 63      			bra	.LL581
13451                        	
13452                        		.dbg	line,	"include\routines_SHOP.c", 281; // POTION //
13453                        	
13454                        		.dbg	line,	"include\routines_SHOP.c", 282; case 9:
13455    02:CD4B             	.LL608:
13456                        		__case		9
13457                        	
13458                        		.dbg	line,	"include\routines_SHOP.c", 283; if(zenny_amount >= shop_prices[9])
13459                        		__ld.wm		_zenny_amount
         02:CD4B  AD 2E 26   			lda.l	_zenny_amount
         02:CD4E  AC 2F 26   			ldy.h	_zenny_amount
13460                        		__sge_w.wm	_shop_prices + 18
         02:CD51  CD 44 26   			cmp.l	_shop_prices + 18		; Subtract memory from Y:A.
         02:CD54  98         			tya
         02:CD55  ED 45 26   			sbc.h	_shop_prices + 18
         02:CD58  50 02      			bvc	!+
         02:CD5A  49 80      			eor	#$80		; +ve if Y:A >= memory (signed).
         02:CD5C  49 80      	!:		eor	#$80
         02:CD5E  0A         			asl	a
13461                        		__bfalse	.LL609
         02:CD5F  90 4D      			bcc	.LL609
13462                        	
13463                        		.dbg	line,	"include\routines_SHOP.c", 284; {
13464                        	
13465                        		.dbg	line,	"include\routines_SHOP.c", 285; potion_amount += 1;
13466                        		__add_st.umiq	1, _potion_amount
         02:CD61  EE 29 23   			inc	_potion_amount
13467                        	
13468                        		.dbg	line,	"include\routines_SHOP.c", 287; zenny_amount -= shop_prices[9];
13469                        		__ld.wm		_shop_prices + 18
         02:CD64  AD 44 26   			lda.l	_shop_prices + 18
         02:CD67  AC 45 26   			ldy.h	_shop_prices + 18
13470                        		__isub_st.wmq	_zenny_amount
         02:CD6A  38         			sec
         02:CD6B  49 FF      			eor	#$FF
         02:CD6D  6D 2E 26   			adc.l	_zenny_amount
         02:CD70  8D 2E 26   			sta.l	_zenny_amount
         02:CD73  98         			tya
         02:CD74  49 FF      			eor	#$FF
         02:CD76  6D 2F 26   			adc.h	_zenny_amount
         02:CD79  8D 2F 26   			sta.h	_zenny_amount
13471                        	
13472                        		.dbg	line,	"include\routines_SHOP.c", 288; display_POTION();
13473                        		__call		_display_POTION
         02:CD7C  20 3B FF   			call	_display_POTION
13474                        	
13475                        		.dbg	line,	"include\routines_SHOP.c", 289; }
13476                        	
13477                        		.dbg	line,	"include\routines_SHOP.c", 291; break;   
13478    02:CD7F             	.LL609	.alias		.LL581
13479                        		__bra		.LL581
         02:CD7F  80 2D      			bra	.LL581
13480                        	
13481                        		.dbg	line,	"include\routines_SHOP.c", 294; // EXIT //
13482                        	
13483                        		.dbg	line,	"include\routines_SHOP.c", 295; case 10:
13484    02:CD81             	.LL610:
13485                        		__case		10
13486                        	
13487                        		.dbg	line,	"include\routines_SHOP.c", 296; shop_counter = 0;    
13488                        		__st.umiq	0, _shop_counter
         02:CD81  9C D3 23   			stz	_shop_counter
13489                        	
13490                        		.dbg	line,	"include\routines_SHOP.c", 297; shop_phase = SHOP_PHASE_EXIT;
13491                        		__st.umiq	2, _shop_phase
         02:CD84  A9 02      			lda.l	#2
         02:CD86  8D D2 23   			sta	_shop_phase
13492                        	
13493                        		.dbg	line,	"include\routines_SHOP.c", 299; break;                  
13494                        		__bra		.LL581
         02:CD89  80 23      			bra	.LL581
13495                        	
13496                        		.dbg	line,	"include\routines_SHOP.c", 300; }
13497    02:CD8B             	.LL580:
13498                        		__switch_r.ur	0, 10
         02:CD8B  C9 0B      			cmp	#(10 - 0) + 1
         02:CD8D  90 02      			bcc	!found+
         02:CD8F  A9 0B      	!default:	lda	#(10 - 0) + 1
         02:CD91  0A         	!found:		asl	a
         02:CD92  AA         			tax
         02:CD93  7C 96 CD   			jmp	[!table+, x]
13499                        	
13500    02:CD96  A2 C9      	!table:		dw	.LL582, .LL585, .LL588, .LL591, .LL594, .LL596, .LL599, .LL602
         02:CD98  10 CA       
         02:CD9A  7E CA       
         02:CD9C  EC CA       
         02:CD9E  5A CB       
         02:CDA0  94 CB       
         02:CDA2  02 CC       
         02:CDA4  70 CC       
13501    02:CDA6  DE CC      			dw	.LL605, .LL608, .LL610
         02:CDA8  4B CD       
         02:CDAA  81 CD       
13502    02:CDAC  AE CD      			dw	.LL581
13503    02:CDAE             	.LL581:
13504                        	
13505                        		.dbg	line,	"include\routines_SHOP.c", 301; }
13506                        	
13507                        		.dbg	line,	"include\routines_SHOP.c", 302; }
13508    02:CDAE             	.LL579:
13509    02:CDAE             	.LL578:
13510    02:CDAE             	.LL575:
13511    02:CDAE             	.LL571:
13512    02:CDAE             	.LL568:
13513    02:CDAE             	.LL563:
13514                        		__return	0
         02:CDAE  4C EF FF   			jmp	leave_proc
13515                        		.dbg	clear
13516                        		.endp
13517               67E0     		.data
13518               230D     		.bss
13519    F8:230D             	__joypad_BUTTONS_SHOP_loc:
13520    F8:230D             			ds	1
13521    F8:230E             	__joypad_BUTTONS_SHOP_end:
13522               E309     		.code
13523                        		.pceas
13524                        	
13525                        		.dbg	line,	"main.c", 25; #include "include/routines_TITLE.c"
13526                        		.dbg	line,	"include\routines_TITLE.c", 1; #include "huc.h"
13527                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
13528                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
13529                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
13530                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
13531                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
13532                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
13533                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
13534                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
13535                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
13536                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
13537                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
13538                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
13539                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
13540                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
13541                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
13542                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
13543                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
13544                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
13545                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
13546                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
13547                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
13548                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
13549                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
13550                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
13551                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
13552                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
13553                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
13554                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
13555                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
13556                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
13557                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
13558                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
13559                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
13560                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
13561                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
13562                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
13563                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
13564                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
13565                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
13566                        		.dbg	line,	"include\routines_TITLE.c", 2; #include "hucc-scroll.h"
13567                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 1; #ifndef _hucc_scroll_h
13568                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 2; #define _hucc_scroll_h
13569                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 4; /****************************************************************************
13570                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 5; ; ***************************************************************************
13571                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 6; ;
13572                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 7; ; hucc-scroll.h
13573                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 8; ;
13574                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 9; ; Routines for a fast split-screen scrolling system.
13575                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 10; ;
13576                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 11; ; Copyright John Brandwood 2024.
13577                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 12; ;
13578                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 13; ; Distributed under the Boost Software License, Version 1.0.
13579                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
13580                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
13581                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 16; ;
13582                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 17; ; ***************************************************************************
13583                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 18; ; ***************************************************************************
13584                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 19; ;
13585                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 20; ; The maximum number of splits for each screen layer is set in your project's
13586                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 21; ; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
13587                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 22; ;
13588                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 23; ; Your first active split must be defined to start at screen line 0, and then
13589                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 24; ; the rest of the active splits must be in increasing line order to match the
13590                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 25; ; way that the PC Engine displays the output image.
13591                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 26; ;
13592                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 27; ; You can have disabled splits interleaved with your active splits.
13593                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 28; ;
13594                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 29; ; Splits that are normally disabled can be used to create full screen effects
13595                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 30; ; such as bouncing the screen up and down by adding blank areas at the top or
13596                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 31; ; bottom of the screen, and then rapidly changing the height of those areas.
13597                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 32; ;
13598                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 33; ; ***************************************************************************
13599                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 34; ; **************************************************************************/
13600                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 36; // *************
13601                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 37; // VDC bits for display_flags ...
13602                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 38; // *************
13603                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 40; #ifndef BKG_OFF
13604                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 41; #define BKG_OFF 0x00
13605                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 42; #endif
13606                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 44; #ifndef SPR_OFF
13607                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 45; #define SPR_OFF 0x00
13608                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 46; #endif
13609                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 48; #ifndef BKG_ON
13610                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 49; #define BKG_ON 0x80
13611                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 50; #endif
13612                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 52; #ifndef SPR_ON
13613                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 53; #define SPR_ON 0x40
13614                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 54; #endif
13615                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 56; // *************
13616                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 57; // Functions in hucc-scroll.asm ...
13617                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 58; // *************
13618                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 60; #ifdef __HUCC__
13619                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 62; #asmdef	HUCC_USES_NEW_SCROLL 1
13620                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 64; extern void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
13621                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 65; extern void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
13622                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 67; extern void __fastcall disable_split( unsigned char index<acc> );
13623                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 68; extern void __fastcall sgx_disable_split( unsigned char index<acc> );
13624                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 70; extern void __fastcall __macro disable_all_splits( void );
13625                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 71; extern void __fastcall __macro sgx_disable_all_splits( void );
13626                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 73; #asm
13627                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 74; .macro	_disable_all_splits
13628                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 75; ldy	#HUCC_PCE_SPLITS - 1
13629                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 76; !loop:		tya
13630                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 77; call	_disable_split.1
13631                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 78; dey
13632                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 79; bpl	!loop-
13633                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 80; .endm
13634                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 82; .macro	_sgx_disable_all_splits
13635                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 83; ldy	#HUCC_SGX_SPLITS - 1
13636                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 84; !loop:		tya
13637                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 85; call	_sgx_disable_split.1
13638                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 86; dey
13639                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 87; bpl	!loop-
13640                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 88; .endm
13641                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 89; #endasm
13642                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 91; #endif // __HUCC__
13643                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 93; #endif // _hucc_scroll_h
13644                        		.dbg	line,	"include\routines_TITLE.c", 3; #include "hucc-chrmap.h"
13645                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 1; #ifndef _hucc_chrmap_h
13646                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 2; #define _hucc_chrmap_h
13647                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 4; /****************************************************************************
13648                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 5; ; ***************************************************************************
13649                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 6; ;
13650                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 7; ; hucc-chrmap.h
13651                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 8; ;
13652                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 9; ; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
13653                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 10; ;
13654                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 11; ; Copyright John Brandwood 2025.
13655                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 12; ;
13656                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
13657                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
13658                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
13659                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 16; ;
13660                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 17; ; ***************************************************************************
13661                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 18; ; ***************************************************************************
13662                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 19; ;
13663                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 20; ; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
13664                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 21; ;
13665                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 22; ; The maximum total size for a chrmap is 16KBytes, which allows for maps up
13666                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 23; ; to 256x32 tiles (2048x256 pixels).
13667                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 24; ;
13668                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 25; ; ***************************************************************************
13669                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 26; ; **************************************************************************/
13670                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 28; // *************
13671                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 29; // This code extends the blkmap library ...
13672                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 30; // *************
13673                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 32; #include "hucc-blkmap.h"
13674                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 34; // *************
13675                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 35; // Functions in chrmap.asm ...
13676                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 36; // *************
13677                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 38; #ifdef __HUCC__
13678                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 40; #asmdef	HUCC_USES_CHRMAP 1
13679                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 42; extern void __fastcall __nop set_chrmap( unsigned char __far *chrmap<vdc_map_bank:vdc_map_addr>, unsigned char tiles_w<vdc_map_line_w> );
13680                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 44; extern void __fastcall draw_bat( void );
13681                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 45; extern void __fastcall scroll_bat( void );
13682                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 47; extern void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
13683                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 49; #ifdef _SGX
13684                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 51; extern void __fastcall __nop sgx_set_chrmap( unsigned char __far *chrmap<sgx_map_bank:sgx_map_addr>, unsigned char tiles_w<sgx_map_line_w> );
13685                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 53; extern void __fastcall sgx_draw_bat( void );
13686                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 54; extern void __fastcall sgx_scroll_bat( void );
13687                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 56; extern void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
13688                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 58; #endif
13689                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 60; #endif // __HUCC__
13690                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 62; #endif // _hucc_chrmap_h
13691                        		.dbg	line,	"include\routines_TITLE.c", 4; #include "hucc-blkmap.h"
13692                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
13693                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
13694                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
13695                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
13696                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
13697                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
13698                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
13699                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
13700                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
13701                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
13702                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
13703                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
13704                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
13705                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
13706                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
13707                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
13708                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
13709                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
13710                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
13711                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
13712                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
13713                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
13714                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
13715                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
13716                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
13717                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
13718                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
13719                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
13720                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
13721                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
13722                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
13723                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
13724                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
13725                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
13726                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
13727                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
13728                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
13729                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
13730                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
13731                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
13732                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
13733                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
13734                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
13735                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
13736                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
13737                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
13738                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
13739                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
13740                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
13741                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
13742                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
13743                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
13744                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
13745                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
13746                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
13747                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
13748                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
13749                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
13750                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
13751                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
13752                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
13753                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
13754                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
13755                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
13756                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
13757                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
13758                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
13759                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 86; .macro	_set_blkmap.2
13760                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 87; stz	vdc_scr_bank
13761                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 88; .endm
13762                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 90; .macro	_set_multimap.2
13763                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 91; lda	vdc_bat_width
13764                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 92; lsr	a
13765                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 93; sta	vdc_map_line_w
13766                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 94; .endm
13767                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 96; .macro	SCREEN
13768                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 97; db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
13769                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 98; db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
13770                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 99; db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
13771                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 100; dw	(\4)
13772                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 101; .endm
13773                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
13774                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
13775                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
13776                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
13777                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
13778                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
13779                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
13780                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
13781                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
13782                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
13783                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
13784                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
13785                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
13786                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
13787                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
13788                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
13789                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
13790                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
13791                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
13792                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
13793                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
13794                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
13795                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
13796                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
13797                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
13798                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
13799                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
13800                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
13801                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 144; .macro	_sgx_set_blkmap.2
13802                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 145; stz	sgx_scr_bank
13803                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 146; .endm
13804                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 148; .macro	_sgx_set_multimap.2
13805                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 149; lda	sgx_bat_width
13806                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 150; lsr	a
13807                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 151; sta	sgx_map_line_w
13808                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 152; .endm
13809                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
13810                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
13811                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
13812                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
13813                        		.dbg	line,	"include\routines_TITLE.c", 12; void joypad_BUTTONS_TITLE()
13814                        		.dbg	line,	"include\routines_TITLE.c", 13; {
13815                        	;***********************
13816                        	;***********************
13817                        	
13818                        		.hucc
13819    02:DBD6             		.proc		_joypad_BUTTONS_TITLE
13820                        		__enter		_joypad_BUTTONS_TITLE
13821                        	
13822                        		.dbg	line,	"include\routines_TITLE.c", 14; char selector_pos;
13823                        	
13824                        		.dbg	line,	"include\routines_TITLE.c", 15; 
13825                        	
13826                        		.dbg	line,	"include\routines_TITLE.c", 16; if(joytrg(JOYPAD_1) & JOY_RIGHT)
13827                        		__ld.uiq	0
         02:DBD6  62         			cla
13828                        		 _joytrg.1
         02:DBD7  AA         			tax
         02:DBD8  BD 2D 22   			lda	joytrg, x
         02:DBDB  BC DD 22   			ldy	joy6trg, x
13829                        		__tand.wi	32
         02:DBDE  29 20      			and	#32
         02:DBE0  C9 01      	!:		cmp	#1
13830                        		__bfalse	.LL612
         02:DBE2  90 77      			bcc	.LL612
13831                        	
13832                        		.dbg	line,	"include\routines_TITLE.c", 17; {   
13833                        	
13834                        		.dbg	line,	"include\routines_TITLE.c", 18; spr_set(0);
13835                        		__ld.uiq	0
         02:DBE4  62         			cla
13836                        		__call		_spr_set.1
         02:DBE5  20 DD E7   			call	_spr_set.1
13837                        	
13838                        		.dbg	line,	"include\routines_TITLE.c", 19; selector_pos = spr_get_y();
13839                        		__call		_spr_get_y
         02:DBE8  20 7B E8   			call	_spr_get_y
13840                        		__st.umq	__joypad_BUTTONS_TITLE_end - 1  /* selector_pos */
         02:DBEB  8D 4B 26   			sta	__joypad_BUTTONS_TITLE_end - 1
13841                        	
13842                        		.dbg	line,	"include\routines_TITLE.c", 21; if(selector_pos == 160)
13843                        		__ld.umq	__joypad_BUTTONS_TITLE_end - 1  /* selector_pos */
         02:DBEE  AD 4B 26   			lda	__joypad_BUTTONS_TITLE_end - 1
13844                        		__equ_b.uiq	160
         02:DBF1  C9 A0      			cmp	#160
         02:DBF3  F0 01      			beq	!+
         02:DBF5  18         			clc
         02:DBF6             	!:
13845                        		__bfalse	.LL613
         02:DBF6  90 2B      			bcc	.LL613
13846                        	
13847                        		.dbg	line,	"include\routines_TITLE.c", 22; {
13848                        	
13849                        		.dbg	line,	"include\routines_TITLE.c", 23; if(life_amount < 9)
13850                        		__ld.umq	_life_amount
         02:DBF8  AD 26 23   			lda	_life_amount
13851                        		__ult_b.uiq	9
         02:DBFB  C9 09      			cmp	#9		; Subtract integer from A.
         02:DBFD  6A         			ror	a		; CC if A < integer.
         02:DBFE  49 80      			eor	#$80
         02:DC00  2A         			rol	a
13852                        		__bfalse	.LL614
         02:DC01  B0 03 4C 6A			bcc	.LL614
         02:DC05  DD          
13853                        	
13854                        		.dbg	line,	"include\routines_TITLE.c", 24; {
13855                        	
13856                        		.dbg	line,	"include\routines_TITLE.c", 25; life_amount += 1;
13857                        		__add_st.umiq	1, _life_amount
         02:DC06  EE 26 23   			inc	_life_amount
13858                        	
13859                        		.dbg	line,	"include\routines_TITLE.c", 26; put_number(life_amount   	,  1 , 20 , 20);
13860                        		__ld.um		_life_amount
         02:DC09  AD 26 23   			lda	_life_amount
         02:DC0C  C2         			cly
13861                        		__st.wmq	_bx
         02:DC0D  85 FA      			sta.l	_bx
         02:DC0F  84 FB      			sty.h	_bx
13862                        		__st.umiq	1, _cl
         02:DC11  A9 01      			lda.l	#1
         02:DC13  85 FC      			sta	_cl
13863                        		__st.umiq	20, _dil
         02:DC15  A9 14      			lda.l	#20
         02:DC17  85 F0      			sta	_dil
13864                        		__st.umiq	20, _dih
         02:DC19  A9 14      			lda.l	#20
         02:DC1B  85 F1      			sta	_dih
13865                        		__call		_put_number.4
         02:DC1D  20 9F FF   			call	_put_number.4
13866                        	
13867                        		.dbg	line,	"include\routines_TITLE.c", 27; }
13868                        	
13869                        		.dbg	line,	"include\routines_TITLE.c", 28; }
13870    02:DC20             	.LL614	.alias		.LL615
13871                        	
13872                        		.dbg	line,	"include\routines_TITLE.c", 30; else if(selector_pos == 168)
13873                        		__bra		.LL615
         02:DC20  4C 6A DD   			bra	.LL615
13874    02:DC23             	.LL613:
13875                        		__ld.umq	__joypad_BUTTONS_TITLE_end - 1  /* selector_pos */
         02:DC23  AD 4B 26   			lda	__joypad_BUTTONS_TITLE_end - 1
13876                        		__equ_b.uiq	168
         02:DC26  C9 A8      			cmp	#168
         02:DC28  F0 01      			beq	!+
         02:DC2A  18         			clc
         02:DC2B             	!:
13877                        		__bfalse	.LL616
         02:DC2B  B0 03 4C 6A			bcc	.LL616
         02:DC2F  DD          
13878                        	
13879                        		.dbg	line,	"include\routines_TITLE.c", 31; {
13880                        	
13881                        		.dbg	line,	"include\routines_TITLE.c", 32; if(credits_amount < 5)
13882                        		__ld.umq	_credits_amount
         02:DC30  AD 27 23   			lda	_credits_amount
13883                        		__ult_b.uiq	5
         02:DC33  C9 05      			cmp	#5		; Subtract integer from A.
         02:DC35  6A         			ror	a		; CC if A < integer.
         02:DC36  49 80      			eor	#$80
         02:DC38  2A         			rol	a
13884                        		__bfalse	.LL617
         02:DC39  B0 03 4C 6A			bcc	.LL617
         02:DC3D  DD          
13885                        	
13886                        		.dbg	line,	"include\routines_TITLE.c", 33; {
13887                        	
13888                        		.dbg	line,	"include\routines_TITLE.c", 34; credits_amount += 1;
13889                        		__add_st.umiq	1, _credits_amount
         02:DC3E  EE 27 23   			inc	_credits_amount
13890                        	
13891                        		.dbg	line,	"include\routines_TITLE.c", 35; put_number(credits_amount   ,  1 , 20 , 21);
13892                        		__ld.um		_credits_amount
         02:DC41  AD 27 23   			lda	_credits_amount
         02:DC44  C2         			cly
13893                        		__st.wmq	_bx
         02:DC45  85 FA      			sta.l	_bx
         02:DC47  84 FB      			sty.h	_bx
13894                        		__st.umiq	1, _cl
         02:DC49  A9 01      			lda.l	#1
         02:DC4B  85 FC      			sta	_cl
13895                        		__st.umiq	20, _dil
         02:DC4D  A9 14      			lda.l	#20
         02:DC4F  85 F0      			sta	_dil
13896                        		__st.umiq	21, _dih
         02:DC51  A9 15      			lda.l	#21
         02:DC53  85 F1      			sta	_dih
13897                        		__call		_put_number.4
         02:DC55  20 9F FF   			call	_put_number.4
13898                        	
13899                        		.dbg	line,	"include\routines_TITLE.c", 36; }
13900                        	
13901                        		.dbg	line,	"include\routines_TITLE.c", 37; }
13902    02:DC58             	.LL617	.alias		.LL618
13903                        	
13904                        		.dbg	line,	"include\routines_TITLE.c", 38; }
13905    02:DC58             	.LL616	.alias		.LL618
13906    02:DC58             	.LL615	.alias		.LL618
13907                        	
13908                        		.dbg	line,	"include\routines_TITLE.c", 40; 
13909                        	
13910                        		.dbg	line,	"include\routines_TITLE.c", 41; else if(joytrg(JOYPAD_1) & JOY_LEFT)
13911                        		__bra		.LL618
         02:DC58  4C 6A DD   			bra	.LL618
13912    02:DC5B             	.LL612:
13913                        		__ld.uiq	0
         02:DC5B  62         			cla
13914                        		 _joytrg.1
         02:DC5C  AA         			tax
         02:DC5D  BD 2D 22   			lda	joytrg, x
         02:DC60  BC DD 22   			ldy	joy6trg, x
13915                        		__tand.wi	128
         02:DC63  29 80      			and	#128
         02:DC65  C9 01      	!:		cmp	#1
13916                        		__bfalse	.LL619
         02:DC67  90 71      			bcc	.LL619
13917                        	
13918                        		.dbg	line,	"include\routines_TITLE.c", 42; {
13919                        	
13920                        		.dbg	line,	"include\routines_TITLE.c", 43; spr_set(0);
13921                        		__ld.uiq	0
         02:DC69  62         			cla
13922                        		__call		_spr_set.1
         02:DC6A  20 DD E7   			call	_spr_set.1
13923                        	
13924                        		.dbg	line,	"include\routines_TITLE.c", 44; selector_pos = spr_get_y();
13925                        		__call		_spr_get_y
         02:DC6D  20 7B E8   			call	_spr_get_y
13926                        		__st.umq	__joypad_BUTTONS_TITLE_end - 1  /* selector_pos */
         02:DC70  8D 4B 26   			sta	__joypad_BUTTONS_TITLE_end - 1
13927                        	
13928                        		.dbg	line,	"include\routines_TITLE.c", 46; if(selector_pos == 160)
13929                        		__ld.umq	__joypad_BUTTONS_TITLE_end - 1  /* selector_pos */
         02:DC73  AD 4B 26   			lda	__joypad_BUTTONS_TITLE_end - 1
13930                        		__equ_b.uiq	160
         02:DC76  C9 A0      			cmp	#160
         02:DC78  F0 01      			beq	!+
         02:DC7A  18         			clc
         02:DC7B             	!:
13931                        		__bfalse	.LL620
         02:DC7B  90 28      			bcc	.LL620
13932                        	
13933                        		.dbg	line,	"include\routines_TITLE.c", 47; {
13934                        	
13935                        		.dbg	line,	"include\routines_TITLE.c", 48; if(life_amount > 3)
13936                        		__ld.umq	_life_amount
         02:DC7D  AD 26 23   			lda	_life_amount
13937                        		__ugt_b.uiq	3
         02:DC80  18         			clc			; Subtract integer+1 from A.
         02:DC81  E9 03      			sbc	#3		; CS if A > integer.
13938                        		__bfalse	.LL621
         02:DC83  B0 03 4C 6A			bcc	.LL621
         02:DC87  DD          
13939                        	
13940                        		.dbg	line,	"include\routines_TITLE.c", 49; {
13941                        	
13942                        		.dbg	line,	"include\routines_TITLE.c", 50; life_amount -= 1;
13943                        		__sub_st.umiq	1, _life_amount
         02:DC88  CE 26 23   			dec	_life_amount
13944                        	
13945                        		.dbg	line,	"include\routines_TITLE.c", 51; put_number(life_amount   	,  1 , 20 , 20);
13946                        		__ld.um		_life_amount
         02:DC8B  AD 26 23   			lda	_life_amount
         02:DC8E  C2         			cly
13947                        		__st.wmq	_bx
         02:DC8F  85 FA      			sta.l	_bx
         02:DC91  84 FB      			sty.h	_bx
13948                        		__st.umiq	1, _cl
         02:DC93  A9 01      			lda.l	#1
         02:DC95  85 FC      			sta	_cl
13949                        		__st.umiq	20, _dil
         02:DC97  A9 14      			lda.l	#20
         02:DC99  85 F0      			sta	_dil
13950                        		__st.umiq	20, _dih
         02:DC9B  A9 14      			lda.l	#20
         02:DC9D  85 F1      			sta	_dih
13951                        		__call		_put_number.4
         02:DC9F  20 9F FF   			call	_put_number.4
13952                        	
13953                        		.dbg	line,	"include\routines_TITLE.c", 52; }
13954                        	
13955                        		.dbg	line,	"include\routines_TITLE.c", 53; }
13956    02:DCA2             	.LL621	.alias		.LL622
13957                        	
13958                        		.dbg	line,	"include\routines_TITLE.c", 55; else if(selector_pos == 168)
13959                        		__bra		.LL622
         02:DCA2  4C 6A DD   			bra	.LL622
13960    02:DCA5             	.LL620:
13961                        		__ld.umq	__joypad_BUTTONS_TITLE_end - 1  /* selector_pos */
         02:DCA5  AD 4B 26   			lda	__joypad_BUTTONS_TITLE_end - 1
13962                        		__equ_b.uiq	168
         02:DCA8  C9 A8      			cmp	#168
         02:DCAA  F0 01      			beq	!+
         02:DCAC  18         			clc
         02:DCAD             	!:
13963                        		__bfalse	.LL623
         02:DCAD  B0 03 4C 6A			bcc	.LL623
         02:DCB1  DD          
13964                        	
13965                        		.dbg	line,	"include\routines_TITLE.c", 56; {
13966                        	
13967                        		.dbg	line,	"include\routines_TITLE.c", 57; if(credits_amount > 2)
13968                        		__ld.umq	_credits_amount
         02:DCB2  AD 27 23   			lda	_credits_amount
13969                        		__ugt_b.uiq	2
         02:DCB5  18         			clc			; Subtract integer+1 from A.
         02:DCB6  E9 02      			sbc	#2		; CS if A > integer.
13970                        		__bfalse	.LL624
         02:DCB8  B0 03 4C 6A			bcc	.LL624
         02:DCBC  DD          
13971                        	
13972                        		.dbg	line,	"include\routines_TITLE.c", 58; {
13973                        	
13974                        		.dbg	line,	"include\routines_TITLE.c", 59; credits_amount -= 1;
13975                        		__sub_st.umiq	1, _credits_amount
         02:DCBD  CE 27 23   			dec	_credits_amount
13976                        	
13977                        		.dbg	line,	"include\routines_TITLE.c", 60; put_number(credits_amount   ,  1 , 20 , 21);
13978                        		__ld.um		_credits_amount
         02:DCC0  AD 27 23   			lda	_credits_amount
         02:DCC3  C2         			cly
13979                        		__st.wmq	_bx
         02:DCC4  85 FA      			sta.l	_bx
         02:DCC6  84 FB      			sty.h	_bx
13980                        		__st.umiq	1, _cl
         02:DCC8  A9 01      			lda.l	#1
         02:DCCA  85 FC      			sta	_cl
13981                        		__st.umiq	20, _dil
         02:DCCC  A9 14      			lda.l	#20
         02:DCCE  85 F0      			sta	_dil
13982                        		__st.umiq	21, _dih
         02:DCD0  A9 15      			lda.l	#21
         02:DCD2  85 F1      			sta	_dih
13983                        		__call		_put_number.4
         02:DCD4  20 9F FF   			call	_put_number.4
13984                        	
13985                        		.dbg	line,	"include\routines_TITLE.c", 61; }
13986                        	
13987                        		.dbg	line,	"include\routines_TITLE.c", 62; }
13988    02:DCD7             	.LL624	.alias		.LL625
13989                        	
13990                        		.dbg	line,	"include\routines_TITLE.c", 63; }
13991    02:DCD7             	.LL623	.alias		.LL625
13992    02:DCD7             	.LL622	.alias		.LL625
13993                        	
13994                        		.dbg	line,	"include\routines_TITLE.c", 66; else if(joytrg(JOYPAD_1) & JOY_UP)
13995                        		__bra		.LL625
         02:DCD7  4C 6A DD   			bra	.LL625
13996    02:DCDA             	.LL619:
13997                        		__ld.uiq	0
         02:DCDA  62         			cla
13998                        		 _joytrg.1
         02:DCDB  AA         			tax
         02:DCDC  BD 2D 22   			lda	joytrg, x
         02:DCDF  BC DD 22   			ldy	joy6trg, x
13999                        		__tand.wi	16
         02:DCE2  29 10      			and	#16
         02:DCE4  C9 01      	!:		cmp	#1
14000                        		__bfalse	.LL626
         02:DCE6  90 2E      			bcc	.LL626
14001                        	
14002                        		.dbg	line,	"include\routines_TITLE.c", 67; {
14003                        	
14004                        		.dbg	line,	"include\routines_TITLE.c", 68; spr_set(0);
14005                        		__ld.uiq	0
         02:DCE8  62         			cla
14006                        		__call		_spr_set.1
         02:DCE9  20 DD E7   			call	_spr_set.1
14007                        	
14008                        		.dbg	line,	"include\routines_TITLE.c", 69; selector_pos = spr_get_y();
14009                        		__call		_spr_get_y
         02:DCEC  20 7B E8   			call	_spr_get_y
14010                        		__st.umq	__joypad_BUTTONS_TITLE_end - 1  /* selector_pos */
         02:DCEF  8D 4B 26   			sta	__joypad_BUTTONS_TITLE_end - 1
14011                        	
14012                        		.dbg	line,	"include\routines_TITLE.c", 71; if(selector_pos == 160)
14013                        		__ld.umq	__joypad_BUTTONS_TITLE_end - 1  /* selector_pos */
         02:DCF2  AD 4B 26   			lda	__joypad_BUTTONS_TITLE_end - 1
14014                        		__equ_b.uiq	160
         02:DCF5  C9 A0      			cmp	#160
         02:DCF7  F0 01      			beq	!+
         02:DCF9  18         			clc
         02:DCFA             	!:
14015                        		__bfalse	.LL627
         02:DCFA  90 08      			bcc	.LL627
14016                        	
14017                        		.dbg	line,	"include\routines_TITLE.c", 72; {
14018                        	
14019                        		.dbg	line,	"include\routines_TITLE.c", 73; spr_y(144);
14020                        		__ld.wi		144
         02:DCFC  A9 90      			lda.l	#144
         02:DCFE  C2         			cly
14021                        		__call		_spr_y.1
         02:DCFF  20 19 E8   			call	_spr_y.1
14022                        	
14023                        		.dbg	line,	"include\routines_TITLE.c", 74; }
14024                        	
14025                        		.dbg	line,	"include\routines_TITLE.c", 76; else if(selector_pos == 168)
14026                        		__bra		.LL628
         02:DD02  80 66      			bra	.LL628
14027    02:DD04             	.LL627:
14028                        		__ld.umq	__joypad_BUTTONS_TITLE_end - 1  /* selector_pos */
         02:DD04  AD 4B 26   			lda	__joypad_BUTTONS_TITLE_end - 1
14029                        		__equ_b.uiq	168
         02:DD07  C9 A8      			cmp	#168
         02:DD09  F0 01      			beq	!+
         02:DD0B  18         			clc
         02:DD0C             	!:
14030                        		__bfalse	.LL629
         02:DD0C  90 5C      			bcc	.LL629
14031                        	
14032                        		.dbg	line,	"include\routines_TITLE.c", 77; {
14033                        	
14034                        		.dbg	line,	"include\routines_TITLE.c", 78; spr_y(160);
14035                        		__ld.wi		160
         02:DD0E  A9 A0      			lda.l	#160
         02:DD10  C2         			cly
14036                        		__call		_spr_y.1
         02:DD11  20 19 E8   			call	_spr_y.1
14037                        	
14038                        		.dbg	line,	"include\routines_TITLE.c", 79; }
14039                        	
14040                        		.dbg	line,	"include\routines_TITLE.c", 80; }
14041    02:DD14             	.LL629	.alias		.LL630
14042    02:DD14             	.LL628	.alias		.LL630
14043                        	
14044                        		.dbg	line,	"include\routines_TITLE.c", 83; else if(joytrg(JOYPAD_1) & JOY_DOWN)
14045                        		__bra		.LL630
         02:DD14  80 54      			bra	.LL630
14046    02:DD16             	.LL626:
14047                        		__ld.uiq	0
         02:DD16  62         			cla
14048                        		 _joytrg.1
         02:DD17  AA         			tax
         02:DD18  BD 2D 22   			lda	joytrg, x
         02:DD1B  BC DD 22   			ldy	joy6trg, x
14049                        		__tand.wi	64
         02:DD1E  29 40      			and	#64
         02:DD20  C9 01      	!:		cmp	#1
14050                        		__bfalse	.LL631
         02:DD22  90 2E      			bcc	.LL631
14051                        	
14052                        		.dbg	line,	"include\routines_TITLE.c", 84; {
14053                        	
14054                        		.dbg	line,	"include\routines_TITLE.c", 85; spr_set(0);
14055                        		__ld.uiq	0
         02:DD24  62         			cla
14056                        		__call		_spr_set.1
         02:DD25  20 DD E7   			call	_spr_set.1
14057                        	
14058                        		.dbg	line,	"include\routines_TITLE.c", 86; selector_pos = spr_get_y();
14059                        		__call		_spr_get_y
         02:DD28  20 7B E8   			call	_spr_get_y
14060                        		__st.umq	__joypad_BUTTONS_TITLE_end - 1  /* selector_pos */
         02:DD2B  8D 4B 26   			sta	__joypad_BUTTONS_TITLE_end - 1
14061                        	
14062                        		.dbg	line,	"include\routines_TITLE.c", 88; if(selector_pos == 144)
14063                        		__ld.umq	__joypad_BUTTONS_TITLE_end - 1  /* selector_pos */
         02:DD2E  AD 4B 26   			lda	__joypad_BUTTONS_TITLE_end - 1
14064                        		__equ_b.uiq	144
         02:DD31  C9 90      			cmp	#144
         02:DD33  F0 01      			beq	!+
         02:DD35  18         			clc
         02:DD36             	!:
14065                        		__bfalse	.LL632
         02:DD36  90 08      			bcc	.LL632
14066                        	
14067                        		.dbg	line,	"include\routines_TITLE.c", 89; {
14068                        	
14069                        		.dbg	line,	"include\routines_TITLE.c", 90; spr_y(160);
14070                        		__ld.wi		160
         02:DD38  A9 A0      			lda.l	#160
         02:DD3A  C2         			cly
14071                        		__call		_spr_y.1
         02:DD3B  20 19 E8   			call	_spr_y.1
14072                        	
14073                        		.dbg	line,	"include\routines_TITLE.c", 91; }
14074                        	
14075                        		.dbg	line,	"include\routines_TITLE.c", 93; else if(selector_pos == 160)
14076                        		__bra		.LL633
         02:DD3E  80 2A      			bra	.LL633
14077    02:DD40             	.LL632:
14078                        		__ld.umq	__joypad_BUTTONS_TITLE_end - 1  /* selector_pos */
         02:DD40  AD 4B 26   			lda	__joypad_BUTTONS_TITLE_end - 1
14079                        		__equ_b.uiq	160
         02:DD43  C9 A0      			cmp	#160
         02:DD45  F0 01      			beq	!+
         02:DD47  18         			clc
         02:DD48             	!:
14080                        		__bfalse	.LL634
         02:DD48  90 20      			bcc	.LL634
14081                        	
14082                        		.dbg	line,	"include\routines_TITLE.c", 94; {
14083                        	
14084                        		.dbg	line,	"include\routines_TITLE.c", 95; spr_y(168);
14085                        		__ld.wi		168
         02:DD4A  A9 A8      			lda.l	#168
         02:DD4C  C2         			cly
14086                        		__call		_spr_y.1
         02:DD4D  20 19 E8   			call	_spr_y.1
14087                        	
14088                        		.dbg	line,	"include\routines_TITLE.c", 96; }        
14089                        	
14090                        		.dbg	line,	"include\routines_TITLE.c", 97; }
14091    02:DD50             	.LL634	.alias		.LL635
14092    02:DD50             	.LL633	.alias		.LL635
14093                        	
14094                        		.dbg	line,	"include\routines_TITLE.c", 100; else if(joytrg(JOYPAD_1) & JOY_I)
14095                        		__bra		.LL635
         02:DD50  80 18      			bra	.LL635
14096    02:DD52             	.LL631:
14097                        		__ld.uiq	0
         02:DD52  62         			cla
14098                        		 _joytrg.1
         02:DD53  AA         			tax
         02:DD54  BD 2D 22   			lda	joytrg, x
         02:DD57  BC DD 22   			ldy	joy6trg, x
14099                        		__tand.wi	1
         02:DD5A  29 01      			and	#1
         02:DD5C  C9 01      	!:		cmp	#1
14100                        		__bfalse	.LL636
         02:DD5E  90 0A      			bcc	.LL636
14101                        	
14102                        		.dbg	line,	"include\routines_TITLE.c", 101; {
14103                        	
14104                        		.dbg	line,	"include\routines_TITLE.c", 102; spr_set(0);
14105                        		__ld.uiq	0
         02:DD60  62         			cla
14106                        		__call		_spr_set.1
         02:DD61  20 DD E7   			call	_spr_set.1
14107                        	
14108                        		.dbg	line,	"include\routines_TITLE.c", 103; selector_pos = spr_get_y();
14109                        		__call		_spr_get_y
         02:DD64  20 7B E8   			call	_spr_get_y
14110                        		__st.umq	__joypad_BUTTONS_TITLE_end - 1  /* selector_pos */
         02:DD67  8D 4B 26   			sta	__joypad_BUTTONS_TITLE_end - 1
14111                        	
14112                        		.dbg	line,	"include\routines_TITLE.c", 104; }
14113                        	
14114                        		.dbg	line,	"include\routines_TITLE.c", 105; }
14115    02:DD6A             	.LL636:
14116    02:DD6A             	.LL635:
14117    02:DD6A             	.LL630:
14118    02:DD6A             	.LL625:
14119    02:DD6A             	.LL618:
14120    02:DD6A             	.LL611:
14121                        		__return	0
         02:DD6A  4C EF FF   			jmp	leave_proc
14122                        		.dbg	clear
14123                        		.endp
14124                        		.pceas
14125                        	
14126                        		.dbg	line,	"main.c", 26; #include "include/init.c"
14127                        		.dbg	line,	"include\init.c", 1; #include "huc.h"
14128                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 1; #ifndef _hucc_legacy_h
14129                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 2; #define _hucc_legacy_h
14130                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 4; /****************************************************************************
14131                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 5; ; ***************************************************************************
14132                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 6; ;
14133                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 7; ; huc.h
14134                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 8; ;
14135                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 9; ; HuCC wrapper file to include a default set of HuC-compatible functions.
14136                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 10; ;
14137                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 11; ; Copyright John Brandwood 2024.
14138                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 12; ;
14139                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 13; ; Distributed under the Boost Software License, Version 1.0.
14140                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
14141                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
14142                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 16; ;
14143                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 17; ; ***************************************************************************
14144                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 18; ; ***************************************************************************
14145                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 19; ;
14146                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 20; ; When the HuCC compiler is invoked with the "--legacy" option to compile old
14147                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 21; ; projects, then this "huc.h" file is automatically included.
14148                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 22; ;
14149                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 23; ; This file includes a set of the individual HuCC headers which correspond to
14150                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 24; ; HuC's built-in functions and MagicKit library.
14151                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 25; ;
14152                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 26; ; New HuCC projects should, preferably, include the specific headers that are
14153                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 27; ; needed, which will then allow them to replace parts of the standard library
14154                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 28; ; with newer functions, or they can just manually include this "huc.h" file.
14155                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 29; ;
14156                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 30; ; ***************************************************************************
14157                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 31; ; **************************************************************************/
14158                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 33; #include "hucc-systemcard.h"
14159                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 34; #include "hucc-baselib.h"
14160                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 35; #include "hucc-gfx.h"
14161                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 36; #include "hucc-string.h"
14162                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 37; #include "hucc-old-scroll.h"
14163                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 38; #include "hucc-old-spr.h"
14164                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 39; #include "hucc-old-map.h"
14165                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 40; #include "hucc-old-line.h"
14166                        		.dbg	line,	"..\..\..\include\hucc\huc.h", 42; #endif // _hucc_legacy_h
14167                        		.dbg	line,	"include\init.c", 2; #include "hucc-scroll.h"
14168                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 1; #ifndef _hucc_scroll_h
14169                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 2; #define _hucc_scroll_h
14170                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 4; /****************************************************************************
14171                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 5; ; ***************************************************************************
14172                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 6; ;
14173                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 7; ; hucc-scroll.h
14174                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 8; ;
14175                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 9; ; Routines for a fast split-screen scrolling system.
14176                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 10; ;
14177                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 11; ; Copyright John Brandwood 2024.
14178                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 12; ;
14179                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 13; ; Distributed under the Boost Software License, Version 1.0.
14180                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
14181                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
14182                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 16; ;
14183                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 17; ; ***************************************************************************
14184                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 18; ; ***************************************************************************
14185                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 19; ;
14186                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 20; ; The maximum number of splits for each screen layer is set in your project's
14187                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 21; ; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
14188                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 22; ;
14189                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 23; ; Your first active split must be defined to start at screen line 0, and then
14190                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 24; ; the rest of the active splits must be in increasing line order to match the
14191                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 25; ; way that the PC Engine displays the output image.
14192                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 26; ;
14193                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 27; ; You can have disabled splits interleaved with your active splits.
14194                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 28; ;
14195                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 29; ; Splits that are normally disabled can be used to create full screen effects
14196                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 30; ; such as bouncing the screen up and down by adding blank areas at the top or
14197                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 31; ; bottom of the screen, and then rapidly changing the height of those areas.
14198                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 32; ;
14199                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 33; ; ***************************************************************************
14200                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 34; ; **************************************************************************/
14201                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 36; // *************
14202                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 37; // VDC bits for display_flags ...
14203                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 38; // *************
14204                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 40; #ifndef BKG_OFF
14205                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 41; #define BKG_OFF 0x00
14206                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 42; #endif
14207                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 44; #ifndef SPR_OFF
14208                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 45; #define SPR_OFF 0x00
14209                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 46; #endif
14210                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 48; #ifndef BKG_ON
14211                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 49; #define BKG_ON 0x80
14212                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 50; #endif
14213                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 52; #ifndef SPR_ON
14214                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 53; #define SPR_ON 0x40
14215                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 54; #endif
14216                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 56; // *************
14217                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 57; // Functions in hucc-scroll.asm ...
14218                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 58; // *************
14219                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 60; #ifdef __HUCC__
14220                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 62; #asmdef	HUCC_USES_NEW_SCROLL 1
14221                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 64; extern void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
14222                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 65; extern void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
14223                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 67; extern void __fastcall disable_split( unsigned char index<acc> );
14224                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 68; extern void __fastcall sgx_disable_split( unsigned char index<acc> );
14225                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 70; extern void __fastcall __macro disable_all_splits( void );
14226                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 71; extern void __fastcall __macro sgx_disable_all_splits( void );
14227                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 73; #asm
14228                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 74; .macro	_disable_all_splits
14229                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 75; ldy	#HUCC_PCE_SPLITS - 1
14230                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 76; !loop:		tya
14231                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 77; call	_disable_split.1
14232                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 78; dey
14233                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 79; bpl	!loop-
14234                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 80; .endm
14235                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 82; .macro	_sgx_disable_all_splits
14236                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 83; ldy	#HUCC_SGX_SPLITS - 1
14237                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 84; !loop:		tya
14238                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 85; call	_sgx_disable_split.1
14239                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 86; dey
14240                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 87; bpl	!loop-
14241                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 88; .endm
14242                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 89; #endasm
14243                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 91; #endif // __HUCC__
14244                        		.dbg	line,	"..\..\..\include\hucc\hucc-scroll.h", 93; #endif // _hucc_scroll_h
14245                        		.dbg	line,	"include\init.c", 3; #include "hucc-chrmap.h"
14246                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 1; #ifndef _hucc_chrmap_h
14247                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 2; #define _hucc_chrmap_h
14248                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 4; /****************************************************************************
14249                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 5; ; ***************************************************************************
14250                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 6; ;
14251                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 7; ; hucc-chrmap.h
14252                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 8; ;
14253                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 9; ; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
14254                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 10; ;
14255                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 11; ; Copyright John Brandwood 2025.
14256                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 12; ;
14257                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
14258                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
14259                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
14260                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 16; ;
14261                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 17; ; ***************************************************************************
14262                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 18; ; ***************************************************************************
14263                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 19; ;
14264                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 20; ; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
14265                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 21; ;
14266                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 22; ; The maximum total size for a chrmap is 16KBytes, which allows for maps up
14267                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 23; ; to 256x32 tiles (2048x256 pixels).
14268                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 24; ;
14269                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 25; ; ***************************************************************************
14270                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 26; ; **************************************************************************/
14271                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 28; // *************
14272                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 29; // This code extends the blkmap library ...
14273                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 30; // *************
14274                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 32; #include "hucc-blkmap.h"
14275                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 34; // *************
14276                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 35; // Functions in chrmap.asm ...
14277                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 36; // *************
14278                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 38; #ifdef __HUCC__
14279                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 40; #asmdef	HUCC_USES_CHRMAP 1
14280                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 42; extern void __fastcall __nop set_chrmap( unsigned char __far *chrmap<vdc_map_bank:vdc_map_addr>, unsigned char tiles_w<vdc_map_line_w> );
14281                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 44; extern void __fastcall draw_bat( void );
14282                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 45; extern void __fastcall scroll_bat( void );
14283                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 47; extern void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
14284                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 49; #ifdef _SGX
14285                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 51; extern void __fastcall __nop sgx_set_chrmap( unsigned char __far *chrmap<sgx_map_bank:sgx_map_addr>, unsigned char tiles_w<sgx_map_line_w> );
14286                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 53; extern void __fastcall sgx_draw_bat( void );
14287                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 54; extern void __fastcall sgx_scroll_bat( void );
14288                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 56; extern void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
14289                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 58; #endif
14290                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 60; #endif // __HUCC__
14291                        		.dbg	line,	"..\..\..\include\hucc\hucc-chrmap.h", 62; #endif // _hucc_chrmap_h
14292                        		.dbg	line,	"include\init.c", 4; #include "hucc-blkmap.h"
14293                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 1; #ifndef _hucc_blkmap_h
14294                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 2; #define _hucc_blkmap_h
14295                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 4; /****************************************************************************
14296                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 5; ; ***************************************************************************
14297                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 6; ;
14298                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 7; ; hucc-blkmap.h
14299                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 8; ;
14300                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 9; ; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
14301                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 10; ;
14302                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 11; ; Copyright John Brandwood 2025.
14303                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 12; ;
14304                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 13; ; Distributed under the Boost Software License, Version 1.0.
14305                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 14; ; (See accompanying file LICENSE_1_0.txt or copy at
14306                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 15; ;  http://www.boost.org/LICENSE_1_0.txt)
14307                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 16; ;
14308                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 17; ; ***************************************************************************
14309                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 18; ; ***************************************************************************
14310                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 19; ;
14311                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 20; ; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
14312                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 21; ;
14313                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 22; ; The maximum total size for a blkmap is 16KBytes, which allows for maps up
14314                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 23; ; to 128x128 blocks (2048x2048 pixels).
14315                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 24; ;
14316                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 25; ; Huge multi-screen blkmaps are also supported (optionally).
14317                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 26; ;
14318                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 27; ; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
14319                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 28; ;
14320                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 29; ; The maximum total size for a multi-screen map is 8KBytes, which allows for
14321                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 30; ; a total of 1024 screens.
14322                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 31; ;
14323                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 32; ; ***************************************************************************
14324                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 33; ; **************************************************************************/
14325                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 35; // *************
14326                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 36; // Functions in blkmap.asm ...
14327                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 37; // *************
14328                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 39; #ifdef __HUCC__
14329                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 41; #asmdef	HUCC_USES_BLKMAP 1
14330                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 43; // Current top-left of drawn map in pixels.
14331                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 44; extern unsigned int   vdc_map_pxl_x;
14332                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 45; extern unsigned int   vdc_map_pxl_y;
14333                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 47; // Width and height to draw/scroll in characters (not tiles).
14334                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 48; extern unsigned char  vdc_map_draw_w;
14335                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 49; extern unsigned char  vdc_map_draw_h;
14336                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 51; // Width of map (or multi-screen BAT) in tiles.
14337                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 52; extern unsigned char  vdc_map_line_w;
14338                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 54; // Width of map in screens (if multi-screen map).
14339                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 55; extern unsigned char  vdc_map_scrn_w;
14340                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 57; // Extra information returned by get_map_block() and sgx_get_map_block(),
14341                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 58; // which are the collision flags and the mask/overlay sprite for the BLK.
14342                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 59; extern unsigned char  map_blk_flag;
14343                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 60; extern unsigned char  map_blk_mask;
14344                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 62; extern unsigned char  vdc_scr_bank;
14345                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 63; extern unsigned char *vdc_scr_addr;
14346                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 65; extern unsigned char  vdc_map_bank;
14347                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 66; extern unsigned char *vdc_map_addr;
14348                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 68; extern unsigned char  vdc_blk_bank;
14349                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 69; extern unsigned char *vdc_blk_addr;
14350                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 71; extern unsigned char  vdc_tbl_bank;
14351                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 72; extern unsigned char *vdc_tbl_addr;
14352                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 74; extern void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blocks<_al> );
14353                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 75; extern void __fastcall __macro set_blkmap( unsigned char __far *blk_map<vdc_map_bank:vdc_map_addr>, unsigned char blocks_w<vdc_map_line_w> );
14354                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 76; extern void __fastcall __macro set_multimap( unsigned char __far *multi_map<vdc_scr_bank:vdc_scr_addr>, unsigned char screens_w<vdc_map_scrn_w> );
14355                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 78; extern void __fastcall draw_map( void );
14356                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 79; extern void __fastcall scroll_map( void );
14357                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 81; extern void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
14358                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 83; extern unsigned char __fastcall get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
14359                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 85; #asm
14360                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 86; .macro	_set_blkmap.2
14361                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 87; stz	vdc_scr_bank
14362                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 88; .endm
14363                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 90; .macro	_set_multimap.2
14364                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 91; lda	vdc_bat_width
14365                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 92; lsr	a
14366                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 93; sta	vdc_map_line_w
14367                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 94; .endm
14368                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 96; .macro	SCREEN
14369                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 97; db	(((\1) & $1FFF) | $6000) >> 8, bank(\1)
14370                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 98; db	(((\2) & $1FFF) | $4000) >> 8, bank(\2)
14371                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 99; db	(((\3) & $1FFF) | $6000) >> 8, bank(\3)
14372                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 100; dw	(\4)
14373                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 101; .endm
14374                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 102; #endasm
14375                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 104; #ifdef _SGX
14376                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 106; // Current top-left of drawn map in pixels.
14377                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 107; extern unsigned int   sgx_map_pxl_x;
14378                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 108; extern unsigned int   sgx_map_pxl_y;
14379                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 110; // Width and height to draw/scroll in characters (not tiles).
14380                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 111; extern unsigned char  sgx_map_draw_w;
14381                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 112; extern unsigned char  sgx_map_draw_h;
14382                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 114; // Width of map (or multi-screen BAT) in tiles.
14383                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 115; extern unsigned char  sgx_map_line_w;
14384                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 117; // Width of map in screens (if multi-screen map).
14385                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 118; extern unsigned char  sgx_map_scrn_w;
14386                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 120; extern unsigned char  sgx_scr_bank;
14387                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 121; extern unsigned char *sgx_scr_addr;
14388                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 123; extern unsigned char  sgx_map_bank;
14389                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 124; extern unsigned char *sgx_map_addr;
14390                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 126; extern unsigned char  sgx_blk_bank;
14391                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 127; extern unsigned char *sgx_blk_addr;
14392                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 129; extern unsigned char  sgx_tbl_bank;
14393                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 130; extern unsigned char *sgx_tbl_addr;
14394                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 132; extern void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blocks<_al> );
14395                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 133; extern void __fastcall __macro sgx_set_blkmap( unsigned char __far *blk_map<sgx_map_bank:sgx_map_addr>, unsigned char blocks_w<sgx_map_line_w> );
14396                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 134; extern void __fastcall __macro sgx_set_multimap( unsigned char __far *multi_map<sgx_scr_bank:sgx_scr_addr>, unsigned char screens_w<sgx_map_scrn_w> );
14397                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 136; extern void __fastcall sgx_draw_map( void );
14398                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 137; extern void __fastcall sgx_scroll_map( void );
14399                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 139; extern void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
14400                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 141; extern unsigned char __fastcall sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
14401                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 143; #asm
14402                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 144; .macro	_sgx_set_blkmap.2
14403                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 145; stz	sgx_scr_bank
14404                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 146; .endm
14405                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 148; .macro	_sgx_set_multimap.2
14406                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 149; lda	sgx_bat_width
14407                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 150; lsr	a
14408                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 151; sta	sgx_map_line_w
14409                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 152; .endm
14410                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 153; #endasm
14411                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 155; #endif
14412                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 157; #endif // __HUCC__
14413                        		.dbg	line,	"..\..\..\include\hucc\hucc-blkmap.h", 159; #endif // _hucc_blkmap_h
14414                        		.dbg	line,	"include\init.c", 13; void init_SYSTEM()
14415                        		.dbg	line,	"include\init.c", 14; {
14416                        	;***********************
14417                        	;***********************
14418                        	
14419                        		.hucc
14420    18:D285             		.proc		_init_SYSTEM
14421                        		__enter		_init_SYSTEM
14422                        	
14423                        		.dbg	line,	"include\init.c", 15; // DISABLE DISPLAY //
14424                        	
14425                        		.dbg	line,	"include\init.c", 16; disp_off();
14426                        		__call		_disp_off
         18:D285  20 29 E4   			call	_disp_off
14427                        	
14428                        		.dbg	line,	"include\init.c", 18; // VSYNC //
14429                        	
14430                        		.dbg	line,	"include\init.c", 19; vsync();
14431                        		__call		_vsync
         18:D288  20 09 E3   			call	_vsync
14432                        	
14433                        		.dbg	line,	"include\init.c", 21; // LOAD DEFAULT FONT //
14434                        	
14435                        		.dbg	line,	"include\init.c", 22; load_default_font();
14436                        		 _load_default_font
         18:D28B  82         			clx				; Offset to PCE VDC.
         18:D28C  20 C7 FF   			call	huc_monofont_x
14437                        	
14438                        		.dbg	line,	"include\init.c", 25; // SET VDC 1 SCREEN SIZE (IN TILES) - 32x32 = 256 PIXELS
14439                        	
14440                        		.dbg	line,	"include\init.c", 26; set_screen_size(SCR_SIZE_32x32);
14441                        		__st.umiq	0, _al
         18:D28F  64 F8      			stz	_al
14442                        		__call		_set_screen_size.1
         18:D291  20 31 FF   			call	_set_screen_size.1
14443                        	
14444                        		.dbg	line,	"include\init.c", 29; // SET VDC 2 SCREEN SIZE (IN TILES) - 32x32 = 256 PIXELS
14445                        	
14446                        		.dbg	line,	"include\init.c", 30; sgx_set_screen_size(SCR_SIZE_32x32);
14447                        		__st.umiq	0, _al
         18:D294  64 F8      			stz	_al
14448                        		__call		_sgx_set_screen_size.1
         18:D296  20 27 FF   			call	_sgx_set_screen_size.1
14449                        	
14450                        		.dbg	line,	"include\init.c", 33; // INIT SPRITE ATTRIBUTE TABLE //
14451                        	
14452                        		.dbg	line,	"include\init.c", 34; init_satb();
14453                        		__call		_init_satb
         18:D299  20 B7 E7   			call	_init_satb
14454                        	
14455                        		.dbg	line,	"include\init.c", 35; sgx_init_satb();
14456                        		__call		_sgx_init_satb
         18:D29C  20 CA E7   			call	_sgx_init_satb
14457                        	
14458                        		.dbg	line,	"include\init.c", 38; // ENABLE DISPLAY //
14459                        	
14460                        		.dbg	line,	"include\init.c", 39; //disp_on();
14461                        	
14462                        		.dbg	line,	"include\init.c", 40; }
14463    18:D29F             	.LL637:
14464                        		__return	0
         18:D29F  4C EF FF   			jmp	leave_proc
14465                        		.dbg	clear
14466                        		.endp
14467                        		.pceas
14468                        	
14469                        		.dbg	line,	"include\init.c", 43; void init_VARIABLES()
14470                        		.dbg	line,	"include\init.c", 44; {
14471                        	;***********************
14472                        	;***********************
14473                        	
14474                        		.hucc
14475    18:D106             		.proc		_init_VARIABLES
14476                        		__enter		_init_VARIABLES
14477                        	
14478                        		.dbg	line,	"include\init.c", 45; sequence_id = SEQUENCE_GAME; // SEQUENCE_TITLE | SEQUENCE_GAME | SEQUENCE_SHOP
14479                        		__st.umiq	2, _sequence_id
         18:D106  A9 02      			lda.l	#2
         18:D108  8D 11 23   			sta	_sequence_id
14480                        	
14481                        		.dbg	line,	"include\init.c", 47; level_id = 1;
14482                        		__st.umiq	1, _level_id
         18:D10B  A9 01      			lda.l	#1
         18:D10D  8D 13 23   			sta	_level_id
14483                        	
14484                        		.dbg	line,	"include\init.c", 49; life_amount = 3;
14485                        		__st.umiq	3, _life_amount
         18:D110  A9 03      			lda.l	#3
         18:D112  8D 26 23   			sta	_life_amount
14486                        	
14487                        		.dbg	line,	"include\init.c", 50; credits_amount = 2;
14488                        		__st.umiq	2, _credits_amount
         18:D115  A9 02      			lda.l	#2
         18:D117  8D 27 23   			sta	_credits_amount
14489                        	
14490                        		.dbg	line,	"include\init.c", 51; key_amount = 0;
14491                        		__st.umiq	0, _key_amount
         18:D11A  9C 28 23   			stz	_key_amount
14492                        	
14493                        		.dbg	line,	"include\init.c", 52; potion_amount = 0;
14494                        		__st.umiq	0, _potion_amount
         18:D11D  9C 29 23   			stz	_potion_amount
14495                        	
14496                        		.dbg	line,	"include\init.c", 53; zenny_amount = 25000;
14497                        		__st.wmiq	25000, _zenny_amount
         18:D120  A9 A8      			lda.l	#25000
         18:D122  8D 2E 26   			sta.l	_zenny_amount
         18:D125  A9 61      			lda.h	#25000
         18:D127  8D 2F 26   			sta.h	_zenny_amount
14498                        	
14499                        		.dbg	line,	"include\init.c", 55; weapon_level = 0;
14500                        		__st.umiq	0, _weapon_level
         18:D12A  9C 25 23   			stz	_weapon_level
14501                        	
14502                        		.dbg	line,	"include\init.c", 56; armor_level = 2;
14503                        		__st.umiq	2, _armor_level
         18:D12D  A9 02      			lda.l	#2
         18:D12F  8D 24 23   			sta	_armor_level
14504                        	
14505                        		.dbg	line,	"include\init.c", 57; 
14506                        	
14507                        		.dbg	line,	"include\init.c", 58; player_naked = FALSE;
14508                        		__st.umiq	0, _player_naked
         18:D132  9C 1D 23   			stz	_player_naked
14509                        	
14510                        		.dbg	line,	"include\init.c", 60; shop_counter = 0;
14511                        		__st.umiq	0, _shop_counter
         18:D135  9C D3 23   			stz	_shop_counter
14512                        	
14513                        		.dbg	line,	"include\init.c", 61; shop_phase = SHOP_PHASE_ENTER;
14514                        		__st.umiq	0, _shop_phase
         18:D138  9C D2 23   			stz	_shop_phase
14515                        	
14516                        		.dbg	line,	"include\init.c", 63; respawn = FALSE;
14517                        		__st.umiq	0, _respawn
         18:D13B  9C 14 23   			stz	_respawn
14518                        	
14519                        		.dbg	line,	"include\init.c", 65; sequence_loaded = FALSE;
14520                        		__st.umiq	0, _sequence_loaded
         18:D13E  9C 12 23   			stz	_sequence_loaded
14521                        	
14522                        		.dbg	line,	"include\init.c", 66; }
14523    18:D141             	.LL638:
14524                        		__return	0
         18:D141  4C EF FF   			jmp	leave_proc
14525                        		.dbg	clear
14526                        		.endp
14527                        		.pceas
14528                        	
14529                        		.dbg	line,	"include\init.c", 69; void init_PLAYER()
14530                        		.dbg	line,	"include\init.c", 70; {
14531                        	;***********************
14532                        	;***********************
14533                        	
14534                        		.hucc
14535    18:D085             		.proc		_init_PLAYER
14536                        		__enter		_init_PLAYER
14537                        	
14538                        		.dbg	line,	"include\init.c", 71; if(player_naked != RESPAWN_SHOP)
14539                        		__ld.umq	_player_naked
         18:D085  AD 1D 23   			lda	_player_naked
14540                        		__neq_b.uiq	2
         18:D088  38         			sec
         18:D089  49 02      			eor	#2
         18:D08B  D0 01      			bne	!+
         18:D08D  18         			clc
         18:D08E             	!:
14541                        		__bfalse	.LL640
         18:D08E  90 03      			bcc	.LL640
14542                        	
14543                        		.dbg	line,	"include\init.c", 72; {
14544                        	
14545                        		.dbg	line,	"include\init.c", 73; player_naked = FALSE;
14546                        		__st.umiq	0, _player_naked
         18:D090  9C 1D 23   			stz	_player_naked
14547                        	
14548                        		.dbg	line,	"include\init.c", 74; }
14549                        	
14550                        		.dbg	line,	"include\init.c", 75; 
14551                        	
14552                        		.dbg	line,	"include\init.c", 76; player_id = PLAYER_START_INDEX;
14553    18:D093             	.LL640:
14554                        		__st.umiq	14, _player_id
         18:D093  A9 0E      			lda.l	#14
         18:D095  8D 15 23   			sta	_player_id
14555                        	
14556                        		.dbg	line,	"include\init.c", 77; player_axis = AXIS_RIGHT;
14557                        		__st.umiq	0, _player_axis
         18:D098  9C 17 23   			stz	_player_axis
14558                        	
14559                        		.dbg	line,	"include\init.c", 78; player_previous_axis = player_axis;
14560                        		__ld.um		_player_axis
         18:D09B  AD 17 23   			lda	_player_axis
         18:D09E  C2         			cly
14561                        		__st.umq	_player_previous_axis
         18:D09F  8D 18 23   			sta	_player_previous_axis
14562                        	
14563                        		.dbg	line,	"include\init.c", 79; player_counter_anim = 0;
14564                        		__st.umiq	0, _player_counter_anim
         18:D0A2  9C 19 23   			stz	_player_counter_anim
14565                        	
14566                        		.dbg	line,	"include\init.c", 80; player_index_jump = 0;
14567                        		__st.umiq	0, _player_index_jump
         18:D0A5  9C 1A 23   			stz	_player_index_jump
14568                        	
14569                        		.dbg	line,	"include\init.c", 81; player_index_fall = 0;
14570                        		__st.umiq	0, _player_index_fall
         18:D0A8  9C 1B 23   			stz	_player_index_fall
14571                        	
14572                        		.dbg	line,	"include\init.c", 82; fall_ladder = FALSE;
14573                        		__st.umiq	0, _fall_ladder
         18:D0AB  9C 21 23   			stz	_fall_ladder
14574                        	
14575                        		.dbg	line,	"include\init.c", 83; player_counter_attack = 0;
14576                        		__st.umiq	0, _player_counter_attack
         18:D0AE  9C 1C 23   			stz	_player_counter_attack
14577                        	
14578                        		.dbg	line,	"include\init.c", 84; player_attack = FALSE;
14579                        		__st.umiq	0, _player_attack
         18:D0B1  9C 1E 23   			stz	_player_attack
14580                        	
14581                        		.dbg	line,	"include\init.c", 85; player_state = STATE_IDLE;
14582                        		__st.umiq	0, _player_state
         18:D0B4  9C 16 23   			stz	_player_state
14583                        	
14584                        		.dbg	line,	"include\init.c", 87; chain_id = player_id - 3;
14585                        		__ld.um		_player_id
         18:D0B7  AD 15 23   			lda	_player_id
         18:D0BA  C2         			cly
14586                        		__sub.wi	3
         18:D0BB  38         			sec
         18:D0BC  E9 03      			sbc.l	#3
         18:D0BE  B0 01      			bcs	!+
         18:D0C0  88         			dey
         18:D0C1             	!:
14587                        		__st.umq	_chain_id
         18:D0C1  8D 22 23   			sta	_chain_id
14588                        	
14589                        		.dbg	line,	"include\init.c", 88; }
14590    18:D0C4             	.LL639:
14591                        		__return	0
         18:D0C4  4C EF FF   			jmp	leave_proc
14592                        		.dbg	clear
14593                        		.endp
14594                        		.pceas
14595                        	
14596                        		.dbg	line,	"include\init.c", 97; void init_TITLE()
14597                        		.dbg	line,	"include\init.c", 98; {
14598                        	;***********************
14599                        	;***********************
14600                        	
14601                        		.hucc
14602    18:C000             		.proc		_init_TITLE
14603                        		__enter		_init_TITLE
14604                        	
14605                        		.dbg	line,	"include\init.c", 99; // DISABLE DISPLAY //
14606                        	
14607                        		.dbg	line,	"include\init.c", 100; disp_off();
14608                        		__call		_disp_off
         18:C000  20 29 E4   			call	_disp_off
14609                        	
14610                        		.dbg	line,	"include\init.c", 101; 
14611                        	
14612                        		.dbg	line,	"include\init.c", 103; // VSYNC //
14613                        	
14614                        		.dbg	line,	"include\init.c", 104; vsync();
14615                        		__call		_vsync
         18:C003  20 09 E3   			call	_vsync
14616                        	
14617                        		.dbg	line,	"include\init.c", 107; // SET VDC 1 SCREEN SIZE (IN TILES) - 32x32 = 256 PIXELS
14618                        	
14619                        		.dbg	line,	"include\init.c", 108; set_screen_size(SCR_SIZE_32x32);
14620                        		__st.umiq	0, _al
         18:C006  64 F8      			stz	_al
14621                        		__call		_set_screen_size.1
         18:C008  20 31 FF   			call	_set_screen_size.1
14622                        	
14623                        		.dbg	line,	"include\init.c", 113; //**************************************************************************************//
14624                        	
14625                        		.dbg	line,	"include\init.c", 114; //                                                                                      //
14626                        	
14627                        		.dbg	line,	"include\init.c", 115; //                                        VDC 1                                         //
14628                        	
14629                        		.dbg	line,	"include\init.c", 116; //                                                                                      //
14630                        	
14631                        		.dbg	line,	"include\init.c", 117; //**************************************************************************************//
14632                        	
14633                        		.dbg	line,	"include\init.c", 119; //--------------------------------------------------------------------------------------//
14634                        	
14635                        		.dbg	line,	"include\init.c", 120; //                                      LOAD FONT                                       //
14636                        	
14637                        		.dbg	line,	"include\init.c", 121; //--------------------------------------------------------------------------------------//
14638                        	
14639                        		.dbg	line,	"include\init.c", 123; load_vram( 0x0800, tileset_FONT_TITLE, SIZEOF(tileset_FONT_TITLE) >> 1 );
14640                        		__st.wmiq	2048, _di
         18:C00B  64 F0      			stz.l	_di
         18:C00D  A9 08      			lda.h	#2048
         18:C00F  85 F1      			sta.h	_di
14641                        		__farptr	_tileset_FONT_TITLE, _bp_bank, _bp
         18:C011  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_FONT_TITLE))
         18:C013  85 EC      			sta.l	_bp
         18:C015  A9 60      			lda.h	#$6000 + ($1FFF & (_tileset_FONT_TITLE))
         18:C017  85 ED      			sta.h	_bp
         18:C019  A9 03      			lda	#bank(_tileset_FONT_TITLE)
         18:C01B  85 02      			sta	_bp_bank
14642                        		__ld.wi		___sizeof__tileset_FONT_TITLE
         18:C01D  A9 00      			lda.l	#___sizeof__tileset_FONT_TITLE
         18:C01F  A0 0C      			ldy.h	#___sizeof__tileset_FONT_TITLE
14643                        		__lsr.wi	1
         18:C021  42         			say
         18:C022  4A         			lsr	a
         18:C023  42         			say
         18:C024  6A         			ror	a
14644                        		__st.wmq	_ax
         18:C025  85 F8      			sta.l	_ax
         18:C027  84 F9      			sty.h	_ax
14645                        		 _load_vram.3
         18:C029  82         			clx				; Offset to PCE VDC.
         18:C02A  20 4F FF   			call	load_vram_x
14646                        	
14647                        		.dbg	line,	"include\init.c", 125; set_font_pal(15);
14648                        		__ld.uiq	15
         18:C02D  A9 0F      			lda	#15
14649                        		__call		_set_font_pal.1
         18:C02F  20 09 E6   			call	_set_font_pal.1
14650                        	
14651                        		.dbg	line,	"include\init.c", 129; //--------------------------------------------------------------------------------------//
14652                        	
14653                        		.dbg	line,	"include\init.c", 130; //                                    LOAD TILEMAP                                      //
14654                        	
14655                        		.dbg	line,	"include\init.c", 131; //--------------------------------------------------------------------------------------//
14656                        	
14657                        		.dbg	line,	"include\init.c", 133; load_vram( 0x0000, tilemap_TITLE_BG_B, SIZEOF(tilemap_TITLE_BG_B) >> 1 );
14658                        		__st.wmiq	0, _di
         18:C032  64 F0      			stz.l	_di
         18:C034  64 F1      			stz.h	_di
14659                        		__farptr	_tilemap_TITLE_BG_B, _bp_bank, _bp
         18:C036  A9 60      			lda.l	#$6000 + ($1FFF & (_tilemap_TITLE_BG_B))
         18:C038  85 EC      			sta.l	_bp
         18:C03A  A9 68      			lda.h	#$6000 + ($1FFF & (_tilemap_TITLE_BG_B))
         18:C03C  85 ED      			sta.h	_bp
         18:C03E  A9 04      			lda	#bank(_tilemap_TITLE_BG_B)
         18:C040  85 02      			sta	_bp_bank
14660                        		__ld.wi		___sizeof__tilemap_TITLE_BG_B
         18:C042  A9 00      			lda.l	#___sizeof__tilemap_TITLE_BG_B
         18:C044  A0 07      			ldy.h	#___sizeof__tilemap_TITLE_BG_B
14661                        		__lsr.wi	1
         18:C046  42         			say
         18:C047  4A         			lsr	a
         18:C048  42         			say
         18:C049  6A         			ror	a
14662                        		__st.wmq	_ax
         18:C04A  85 F8      			sta.l	_ax
         18:C04C  84 F9      			sty.h	_ax
14663                        		 _load_vram.3
         18:C04E  82         			clx				; Offset to PCE VDC.
         18:C04F  20 4F FF   			call	load_vram_x
14664                        	
14665                        		.dbg	line,	"include\init.c", 135; //--------------------------------------------------------------------------------------//
14666                        	
14667                        		.dbg	line,	"include\init.c", 136; //                                    LOAD TILESET                                      //
14668                        	
14669                        		.dbg	line,	"include\init.c", 137; //--------------------------------------------------------------------------------------//
14670                        	
14671                        		.dbg	line,	"include\init.c", 139; load_vram( 0x1000, tileset_TITLE_BG_B, SIZEOF(tileset_TITLE_BG_B) >> 1 );
14672                        		__st.wmiq	4096, _di
         18:C052  64 F0      			stz.l	_di
         18:C054  A9 10      			lda.h	#4096
         18:C056  85 F1      			sta.h	_di
14673                        		__farptr	_tileset_TITLE_BG_B, _bp_bank, _bp
         18:C058  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_TITLE_BG_B))
         18:C05A  85 EC      			sta.l	_bp
         18:C05C  A9 6C      			lda.h	#$6000 + ($1FFF & (_tileset_TITLE_BG_B))
         18:C05E  85 ED      			sta.h	_bp
         18:C060  A9 03      			lda	#bank(_tileset_TITLE_BG_B)
         18:C062  85 02      			sta	_bp_bank
14674                        		__ld.wi		___sizeof__tileset_TITLE_BG_B
         18:C064  A9 60      			lda.l	#___sizeof__tileset_TITLE_BG_B
         18:C066  A0 1C      			ldy.h	#___sizeof__tileset_TITLE_BG_B
14675                        		__lsr.wi	1
         18:C068  42         			say
         18:C069  4A         			lsr	a
         18:C06A  42         			say
         18:C06B  6A         			ror	a
14676                        		__st.wmq	_ax
         18:C06C  85 F8      			sta.l	_ax
         18:C06E  84 F9      			sty.h	_ax
14677                        		 _load_vram.3
         18:C070  82         			clx				; Offset to PCE VDC.
         18:C071  20 4F FF   			call	load_vram_x
14678                        	
14679                        		.dbg	line,	"include\init.c", 144; //put_string("PRESS RUN"   , 11 , 18);
14680                        	
14681                        		.dbg	line,	"include\init.c", 145; put_string("START GAME"  	, 11 , 18);
14682                        		__ld.wi		__const1+0
         18:C074  62         			cla
         18:C075  A0 60      			ldy.h	#__const1+0
14683                        		__st.wmq	_bp
         18:C077  85 EC      			sta.l	_bp
         18:C079  84 ED      			sty.h	_bp
14684                        		__st.umiq	11, _dil
         18:C07B  A9 0B      			lda.l	#11
         18:C07D  85 F0      			sta	_dil
14685                        		__st.umiq	18, _dih
         18:C07F  A9 12      			lda.l	#18
         18:C081  85 F1      			sta	_dih
14686                        		__call		_put_string.3
         18:C083  20 68 E6   			call	_put_string.3
14687                        	
14688                        		.dbg	line,	"include\init.c", 147; put_string("LIFE"        	, 11 , 20);
14689                        		__ld.wi		__const1+11
         18:C086  A9 0B      			lda.l	#__const1+11
         18:C088  A0 60      			ldy.h	#__const1+11
14690                        		__st.wmq	_bp
         18:C08A  85 EC      			sta.l	_bp
         18:C08C  84 ED      			sty.h	_bp
14691                        		__st.umiq	11, _dil
         18:C08E  A9 0B      			lda.l	#11
         18:C090  85 F0      			sta	_dil
14692                        		__st.umiq	20, _dih
         18:C092  A9 14      			lda.l	#20
         18:C094  85 F1      			sta	_dih
14693                        		__call		_put_string.3
         18:C096  20 68 E6   			call	_put_string.3
14694                        	
14695                        		.dbg	line,	"include\init.c", 148; put_number(life_amount   	,  1 , 20 , 20);
14696                        		__ld.um		_life_amount
         18:C099  AD 26 23   			lda	_life_amount
         18:C09C  C2         			cly
14697                        		__st.wmq	_bx
         18:C09D  85 FA      			sta.l	_bx
         18:C09F  84 FB      			sty.h	_bx
14698                        		__st.umiq	1, _cl
         18:C0A1  A9 01      			lda.l	#1
         18:C0A3  85 FC      			sta	_cl
14699                        		__st.umiq	20, _dil
         18:C0A5  A9 14      			lda.l	#20
         18:C0A7  85 F0      			sta	_dil
14700                        		__st.umiq	20, _dih
         18:C0A9  A9 14      			lda.l	#20
         18:C0AB  85 F1      			sta	_dih
14701                        		__call		_put_number.4
         18:C0AD  20 9F FF   			call	_put_number.4
14702                        	
14703                        		.dbg	line,	"include\init.c", 150; put_string("CREDITS"		, 11 , 21);
14704                        		__ld.wi		__const1+16
         18:C0B0  A9 10      			lda.l	#__const1+16
         18:C0B2  A0 60      			ldy.h	#__const1+16
14705                        		__st.wmq	_bp
         18:C0B4  85 EC      			sta.l	_bp
         18:C0B6  84 ED      			sty.h	_bp
14706                        		__st.umiq	11, _dil
         18:C0B8  A9 0B      			lda.l	#11
         18:C0BA  85 F0      			sta	_dil
14707                        		__st.umiq	21, _dih
         18:C0BC  A9 15      			lda.l	#21
         18:C0BE  85 F1      			sta	_dih
14708                        		__call		_put_string.3
         18:C0C0  20 68 E6   			call	_put_string.3
14709                        	
14710                        		.dbg	line,	"include\init.c", 151; put_number(credits_amount   ,  1 , 20 , 21);
14711                        		__ld.um		_credits_amount
         18:C0C3  AD 27 23   			lda	_credits_amount
         18:C0C6  C2         			cly
14712                        		__st.wmq	_bx
         18:C0C7  85 FA      			sta.l	_bx
         18:C0C9  84 FB      			sty.h	_bx
14713                        		__st.umiq	1, _cl
         18:C0CB  A9 01      			lda.l	#1
         18:C0CD  85 FC      			sta	_cl
14714                        		__st.umiq	20, _dil
         18:C0CF  A9 14      			lda.l	#20
         18:C0D1  85 F0      			sta	_dil
14715                        		__st.umiq	21, _dih
         18:C0D3  A9 15      			lda.l	#21
         18:C0D5  85 F1      			sta	_dih
14716                        		__call		_put_number.4
         18:C0D7  20 9F FF   			call	_put_number.4
14717                        	
14718                        		.dbg	line,	"include\init.c", 153; put_string("CAPCOM 1987" 	, 11 , 26);
14719                        		__ld.wi		__const1+24
         18:C0DA  A9 18      			lda.l	#__const1+24
         18:C0DC  A0 60      			ldy.h	#__const1+24
14720                        		__st.wmq	_bp
         18:C0DE  85 EC      			sta.l	_bp
         18:C0E0  84 ED      			sty.h	_bp
14721                        		__st.umiq	11, _dil
         18:C0E2  A9 0B      			lda.l	#11
         18:C0E4  85 F0      			sta	_dil
14722                        		__st.umiq	26, _dih
         18:C0E6  A9 1A      			lda.l	#26
         18:C0E8  85 F1      			sta	_dih
14723                        		__call		_put_string.3
         18:C0EA  20 68 E6   			call	_put_string.3
14724                        	
14725                        		.dbg	line,	"include\init.c", 158; //--------------------------------------------------------------------------------------//
14726                        	
14727                        		.dbg	line,	"include\init.c", 159; //                                   LOAD BG PALETTES                                   //
14728                        	
14729                        		.dbg	line,	"include\init.c", 160; //--------------------------------------------------------------------------------------//
14730                        	
14731                        		.dbg	line,	"include\init.c", 162; load_palette( 0, palette_TITLE, 16 );
14732                        		__st.umiq	0, _al
         18:C0ED  64 F8      			stz	_al
14733                        		__farptr	_palette_TITLE, _bp_bank, _bp
         18:C0EF  A9 60      			lda.l	#$6000 + ($1FFF & (_palette_TITLE))
         18:C0F1  85 EC      			sta.l	_bp
         18:C0F3  A9 6F      			lda.h	#$6000 + ($1FFF & (_palette_TITLE))
         18:C0F5  85 ED      			sta.h	_bp
         18:C0F7  A9 04      			lda	#bank(_palette_TITLE)
         18:C0F9  85 02      			sta	_bp_bank
14734                        		__st.umiq	16, _ah
         18:C0FB  A9 10      			lda.l	#16
         18:C0FD  85 F9      			sta	_ah
14735                        		__call		_load_palette.3
         18:C0FF  20 1D FF   			call	_load_palette.3
14736                        	
14737                        		.dbg	line,	"include\init.c", 167; //**************************************************************************************//
14738                        	
14739                        		.dbg	line,	"include\init.c", 168; //                                                                                      //
14740                        	
14741                        		.dbg	line,	"include\init.c", 169; //                                       SPRITES                                        //
14742                        	
14743                        		.dbg	line,	"include\init.c", 170; //                                                                                      //
14744                        	
14745                        		.dbg	line,	"include\init.c", 171; //**************************************************************************************//
14746                        	
14747                        		.dbg	line,	"include\init.c", 173; //--------------------------------------------------------------------------------------//
14748                        	
14749                        		.dbg	line,	"include\init.c", 174; //                                        CURSOR                                        //
14750                        	
14751                        		.dbg	line,	"include\init.c", 175; //--------------------------------------------------------------------------------------//
14752                        	
14753                        		.dbg	line,	"include\init.c", 177; // LOAD CURSOR TILES //
14754                        	
14755                        		.dbg	line,	"include\init.c", 178; load_vram(0x2000, tiles_SPR_SELECTOR , SIZEOF(tiles_SPR_SELECTOR) >> 1 );
14756                        		__st.wmiq	8192, _di
         18:C102  64 F0      			stz.l	_di
         18:C104  A9 20      			lda.h	#8192
         18:C106  85 F1      			sta.h	_di
14757                        		__farptr	_tiles_SPR_SELECTOR, _bp_bank, _bp
         18:C108  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_SELECTOR))
         18:C10A  85 EC      			sta.l	_bp
         18:C10C  A9 79      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_SELECTOR))
         18:C10E  85 ED      			sta.h	_bp
         18:C110  A9 0F      			lda	#bank(_tiles_SPR_SELECTOR)
         18:C112  85 02      			sta	_bp_bank
14758                        		__ld.wi		___sizeof__tiles_SPR_SELECTOR
         18:C114  A9 80      			lda.l	#___sizeof__tiles_SPR_SELECTOR
         18:C116  A0 00      			ldy.h	#___sizeof__tiles_SPR_SELECTOR
14759                        		__lsr.wi	1
         18:C118  42         			say
         18:C119  4A         			lsr	a
         18:C11A  42         			say
         18:C11B  6A         			ror	a
14760                        		__st.wmq	_ax
         18:C11C  85 F8      			sta.l	_ax
         18:C11E  84 F9      			sty.h	_ax
14761                        		 _load_vram.3
         18:C120  82         			clx				; Offset to PCE VDC.
         18:C121  20 4F FF   			call	load_vram_x
14762                        	
14763                        		.dbg	line,	"include\init.c", 181; // SELECT CURSOR SPRITE //
14764                        	
14765                        		.dbg	line,	"include\init.c", 182; spr_set(0);
14766                        		__ld.uiq	0
         18:C124  62         			cla
14767                        		__call		_spr_set.1
         18:C125  20 DD E7   			call	_spr_set.1
14768                        	
14769                        		.dbg	line,	"include\init.c", 185; spr_x(72);
14770                        		__ld.wi		72
         18:C128  A9 48      			lda.l	#72
         18:C12A  C2         			cly
14771                        		__call		_spr_x.1
         18:C12B  20 0A E8   			call	_spr_x.1
14772                        	
14773                        		.dbg	line,	"include\init.c", 186; spr_y(144);
14774                        		__ld.wi		144
         18:C12E  A9 90      			lda.l	#144
         18:C130  C2         			cly
14775                        		__call		_spr_y.1
         18:C131  20 19 E8   			call	_spr_y.1
14776                        	
14777                        		.dbg	line,	"include\init.c", 188; // SET TILES DATA FOR THE CURSOR //
14778                        	
14779                        		.dbg	line,	"include\init.c", 189; spr_pattern(0x2000);
14780                        		__ld.wi		8192
         18:C134  62         			cla
         18:C135  A0 20      			ldy.h	#8192
14781                        		__call		_spr_pattern.1
         18:C137  20 26 E8   			call	_spr_pattern.1
14782                        	
14783                        		.dbg	line,	"include\init.c", 192; spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_16x16);
14784                        		__st.umiq	185, _al
         18:C13A  A9 B9      			lda.l	#185
         18:C13C  85 F8      			sta	_al
14785                        		__ld.uiq	0
         18:C13E  62         			cla
14786                        		__call		_spr_ctrl.2
         18:C13F  20 3C E8   			call	_spr_ctrl.2
14787                        	
14788                        		.dbg	line,	"include\init.c", 195; spr_pal(16);
14789                        		__ld.uiq	16
         18:C142  A9 10      			lda	#16
14790                        		__call		_spr_pal.1
         18:C144  20 4D E8   			call	_spr_pal.1
14791                        	
14792                        		.dbg	line,	"include\init.c", 196; spr_pri(TRUE);
14793                        		__ld.uiq	1
         18:C147  A9 01      			lda	#1
14794                        		__call		_spr_pri.1
         18:C149  20 5C E8   			call	_spr_pri.1
14795                        	
14796                        		.dbg	line,	"include\init.c", 199; //--------------------------------------------------------------------------------------//
14797                        	
14798                        		.dbg	line,	"include\init.c", 200; //                                LOAD SPRITES PALETTES                                 //
14799                        	
14800                        		.dbg	line,	"include\init.c", 201; //--------------------------------------------------------------------------------------//
14801                        	
14802                        		.dbg	line,	"include\init.c", 203; load_palette( 16, palette_objects_2, 1 );
14803                        		__st.umiq	16, _al
         18:C14C  A9 10      			lda.l	#16
         18:C14E  85 F8      			sta	_al
14804                        		__farptr	_palette_objects_2, _bp_bank, _bp
         18:C150  A9 E0      			lda.l	#$6000 + ($1FFF & (_palette_objects_2))
         18:C152  85 EC      			sta.l	_bp
         18:C154  A9 70      			lda.h	#$6000 + ($1FFF & (_palette_objects_2))
         18:C156  85 ED      			sta.h	_bp
         18:C158  A9 14      			lda	#bank(_palette_objects_2)
         18:C15A  85 02      			sta	_bp_bank
14805                        		__st.umiq	1, _ah
         18:C15C  A9 01      			lda.l	#1
         18:C15E  85 F9      			sta	_ah
14806                        		__call		_load_palette.3
         18:C160  20 1D FF   			call	_load_palette.3
14807                        	
14808                        		.dbg	line,	"include\init.c", 208; // UPDATE PCE SAT //
14809                        	
14810                        		.dbg	line,	"include\init.c", 209; satb_update();
14811                        		__call		_satb_update
         18:C163  20 13 FF   			call	_satb_update
14812                        	
14813                        		.dbg	line,	"include\init.c", 214; // VSYNC //
14814                        	
14815                        		.dbg	line,	"include\init.c", 215; vsync();
14816                        		__call		_vsync
         18:C166  20 09 E3   			call	_vsync
14817                        	
14818                        		.dbg	line,	"include\init.c", 217; // ENABLE DISPLAY //
14819                        	
14820                        		.dbg	line,	"include\init.c", 218; disp_on();
14821                        		__call		_disp_on
         18:C169  20 16 E4   			call	_disp_on
14822                        	
14823                        		.dbg	line,	"include\init.c", 219; }
14824    18:C16C             	.LL641:
14825                        		__return	0
         18:C16C  4C EF FF   			jmp	leave_proc
14826                        		.dbg	clear
14827                        		.endp
14828                        		.pceas
14829                        	
14830                        		.dbg	line,	"include\init.c", 228; void load_OBJECT_TILES()
14831                        		.dbg	line,	"include\init.c", 229; {
14832                        	;***********************
14833                        	;***********************
14834                        	
14835                        		.hucc
14836    02:D431             		.proc		_load_OBJECT_TILES
14837                        		__enter		_load_OBJECT_TILES
14838                        	
14839                        		.dbg	line,	"include\init.c", 230; sgx_load_vram(POT1_VRAM_ADR, tiles_SPR_POT , SIZEOF(tiles_SPR_POT) >> 1);
14840                        		__st.wmiq	26624, _di
         02:D431  64 F0      			stz.l	_di
         02:D433  A9 68      			lda.h	#26624
         02:D435  85 F1      			sta.h	_di
14841                        		__farptr	_tiles_SPR_POT, _bp_bank, _bp
         02:D437  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_POT))
         02:D439  85 EC      			sta.l	_bp
         02:D43B  A9 66      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_POT))
         02:D43D  85 ED      			sta.h	_bp
         02:D43F  A9 14      			lda	#bank(_tiles_SPR_POT)
         02:D441  85 02      			sta	_bp_bank
14842                        		__ld.wi		___sizeof__tiles_SPR_POT
         02:D443  A9 00      			lda.l	#___sizeof__tiles_SPR_POT
         02:D445  A0 04      			ldy.h	#___sizeof__tiles_SPR_POT
14843                        		__lsr.wi	1
         02:D447  42         			say
         02:D448  4A         			lsr	a
         02:D449  42         			say
         02:D44A  6A         			ror	a
14844                        		__st.wmq	_ax
         02:D44B  85 F8      			sta.l	_ax
         02:D44D  84 F9      			sty.h	_ax
14845                        		 _sgx_load_vram.3
         02:D44F  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D451  20 4F FF   			call	load_vram_x
14846                        	
14847                        		.dbg	line,	"include\init.c", 231; sgx_load_vram(POW_VRAM_ADR, tiles_SPR_POW , TILES_4);
14848                        		__st.wmiq	27136, _di
         02:D454  64 F0      			stz.l	_di
         02:D456  A9 6A      			lda.h	#27136
         02:D458  85 F1      			sta.h	_di
14849                        		__farptr	_tiles_SPR_POW, _bp_bank, _bp
         02:D45A  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_POW))
         02:D45C  85 EC      			sta.l	_bp
         02:D45E  A9 6A      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_POW))
         02:D460  85 ED      			sta.h	_bp
         02:D462  A9 14      			lda	#bank(_tiles_SPR_POW)
         02:D464  85 02      			sta	_bp_bank
14850                        		__st.wmiq	64, _ax
         02:D466  A9 40      			lda.l	#64
         02:D468  85 F8      			sta.l	_ax
         02:D46A  64 F9      			stz.h	_ax
14851                        		 _sgx_load_vram.3
         02:D46C  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D46E  20 4F FF   			call	load_vram_x
14852                        	
14853                        		.dbg	line,	"include\init.c", 232; sgx_load_vram(GRAY_KEY_VRAM_ADR, tiles_SPR_GRAY_KEY , TILES_4);
14854                        		__st.wmiq	27200, _di
         02:D471  A9 40      			lda.l	#27200
         02:D473  85 F0      			sta.l	_di
         02:D475  A9 6A      			lda.h	#27200
         02:D477  85 F1      			sta.h	_di
14855                        		__farptr	_tiles_SPR_GRAY_KEY, _bp_bank, _bp
         02:D479  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_GRAY_KEY))
         02:D47B  85 EC      			sta.l	_bp
         02:D47D  A9 64      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_GRAY_KEY))
         02:D47F  85 ED      			sta.h	_bp
         02:D481  A9 14      			lda	#bank(_tiles_SPR_GRAY_KEY)
         02:D483  85 02      			sta	_bp_bank
14856                        		__st.wmiq	64, _ax
         02:D485  A9 40      			lda.l	#64
         02:D487  85 F8      			sta.l	_ax
         02:D489  64 F9      			stz.h	_ax
14857                        		 _sgx_load_vram.3
         02:D48B  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D48D  20 4F FF   			call	load_vram_x
14858                        	
14859                        		.dbg	line,	"include\init.c", 233; sgx_load_vram(GOLD_KEY_VRAM_ADR, tiles_SPR_GOLD_KEY , TILES_4);
14860                        		__st.wmiq	27264, _di
         02:D490  A9 80      			lda.l	#27264
         02:D492  85 F0      			sta.l	_di
         02:D494  A9 6A      			lda.h	#27264
         02:D496  85 F1      			sta.h	_di
14861                        		__farptr	_tiles_SPR_GOLD_KEY, _bp_bank, _bp
         02:D498  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_GOLD_KEY))
         02:D49A  85 EC      			sta.l	_bp
         02:D49C  A9 64      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_GOLD_KEY))
         02:D49E  85 ED      			sta.h	_bp
         02:D4A0  A9 14      			lda	#bank(_tiles_SPR_GOLD_KEY)
         02:D4A2  85 02      			sta	_bp_bank
14862                        		__st.wmiq	64, _ax
         02:D4A4  A9 40      			lda.l	#64
         02:D4A6  85 F8      			sta.l	_ax
         02:D4A8  64 F9      			stz.h	_ax
14863                        		 _sgx_load_vram.3
         02:D4AA  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D4AC  20 4F FF   			call	load_vram_x
14864                        	
14865                        		.dbg	line,	"include\init.c", 234; sgx_load_vram(LIFE_VRAM_ADR, tiles_SPR_LIFE , TILES_4);
14866                        		__st.wmiq	27328, _di
         02:D4AF  A9 C0      			lda.l	#27328
         02:D4B1  85 F0      			sta.l	_di
         02:D4B3  A9 6A      			lda.h	#27328
         02:D4B5  85 F1      			sta.h	_di
14867                        		__farptr	_tiles_SPR_LIFE, _bp_bank, _bp
         02:D4B7  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_LIFE))
         02:D4B9  85 EC      			sta.l	_bp
         02:D4BB  A9 65      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_LIFE))
         02:D4BD  85 ED      			sta.h	_bp
         02:D4BF  A9 14      			lda	#bank(_tiles_SPR_LIFE)
         02:D4C1  85 02      			sta	_bp_bank
14868                        		__st.wmiq	64, _ax
         02:D4C3  A9 40      			lda.l	#64
         02:D4C5  85 F8      			sta.l	_ax
         02:D4C7  64 F9      			stz.h	_ax
14869                        		 _sgx_load_vram.3
         02:D4C9  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D4CB  20 4F FF   			call	load_vram_x
14870                        	
14871                        		.dbg	line,	"include\init.c", 235; sgx_load_vram(COIN_1_VRAM_ADR, tiles_SPR_COIN_1 , TILES_4);
14872                        		__st.wmiq	27392, _di
         02:D4CE  64 F0      			stz.l	_di
         02:D4D0  A9 6B      			lda.h	#27392
         02:D4D2  85 F1      			sta.h	_di
14873                        		__farptr	_tiles_SPR_COIN_1, _bp_bank, _bp
         02:D4D4  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COIN_1))
         02:D4D6  85 EC      			sta.l	_bp
         02:D4D8  A9 60      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COIN_1))
         02:D4DA  85 ED      			sta.h	_bp
         02:D4DC  A9 14      			lda	#bank(_tiles_SPR_COIN_1)
         02:D4DE  85 02      			sta	_bp_bank
14874                        		__st.wmiq	64, _ax
         02:D4E0  A9 40      			lda.l	#64
         02:D4E2  85 F8      			sta.l	_ax
         02:D4E4  64 F9      			stz.h	_ax
14875                        		 _sgx_load_vram.3
         02:D4E6  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D4E8  20 4F FF   			call	load_vram_x
14876                        	
14877                        		.dbg	line,	"include\init.c", 236; sgx_load_vram(COIN_5_VRAM_ADR, tiles_SPR_COIN_5 , TILES_4);
14878                        		__st.wmiq	27456, _di
         02:D4EB  A9 40      			lda.l	#27456
         02:D4ED  85 F0      			sta.l	_di
         02:D4EF  A9 6B      			lda.h	#27456
         02:D4F1  85 F1      			sta.h	_di
14879                        		__farptr	_tiles_SPR_COIN_5, _bp_bank, _bp
         02:D4F3  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COIN_5))
         02:D4F5  85 EC      			sta.l	_bp
         02:D4F7  A9 60      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COIN_5))
         02:D4F9  85 ED      			sta.h	_bp
         02:D4FB  A9 14      			lda	#bank(_tiles_SPR_COIN_5)
         02:D4FD  85 02      			sta	_bp_bank
14880                        		__st.wmiq	64, _ax
         02:D4FF  A9 40      			lda.l	#64
         02:D501  85 F8      			sta.l	_ax
         02:D503  64 F9      			stz.h	_ax
14881                        		 _sgx_load_vram.3
         02:D505  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D507  20 4F FF   			call	load_vram_x
14882                        	
14883                        		.dbg	line,	"include\init.c", 237; sgx_load_vram(COIN_10_VRAM_ADR, tiles_SPR_COIN_10 , TILES_4);
14884                        		__st.wmiq	27520, _di
         02:D50A  A9 80      			lda.l	#27520
         02:D50C  85 F0      			sta.l	_di
         02:D50E  A9 6B      			lda.h	#27520
         02:D510  85 F1      			sta.h	_di
14885                        		__farptr	_tiles_SPR_COIN_10, _bp_bank, _bp
         02:D512  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COIN_10))
         02:D514  85 EC      			sta.l	_bp
         02:D516  A9 61      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COIN_10))
         02:D518  85 ED      			sta.h	_bp
         02:D51A  A9 14      			lda	#bank(_tiles_SPR_COIN_10)
         02:D51C  85 02      			sta	_bp_bank
14886                        		__st.wmiq	64, _ax
         02:D51E  A9 40      			lda.l	#64
         02:D520  85 F8      			sta.l	_ax
         02:D522  64 F9      			stz.h	_ax
14887                        		 _sgx_load_vram.3
         02:D524  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D526  20 4F FF   			call	load_vram_x
14888                        	
14889                        		.dbg	line,	"include\init.c", 238; sgx_load_vram(COIN_50_VRAM_ADR, tiles_SPR_COIN_50 , TILES_4);
14890                        		__st.wmiq	27584, _di
         02:D529  A9 C0      			lda.l	#27584
         02:D52B  85 F0      			sta.l	_di
         02:D52D  A9 6B      			lda.h	#27584
         02:D52F  85 F1      			sta.h	_di
14891                        		__farptr	_tiles_SPR_COIN_50, _bp_bank, _bp
         02:D531  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COIN_50))
         02:D533  85 EC      			sta.l	_bp
         02:D535  A9 61      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COIN_50))
         02:D537  85 ED      			sta.h	_bp
         02:D539  A9 14      			lda	#bank(_tiles_SPR_COIN_50)
         02:D53B  85 02      			sta	_bp_bank
14892                        		__st.wmiq	64, _ax
         02:D53D  A9 40      			lda.l	#64
         02:D53F  85 F8      			sta.l	_ax
         02:D541  64 F9      			stz.h	_ax
14893                        		 _sgx_load_vram.3
         02:D543  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D545  20 4F FF   			call	load_vram_x
14894                        	
14895                        		.dbg	line,	"include\init.c", 239; sgx_load_vram(COIN_100_VRAM_ADR, tiles_SPR_COIN_100 , TILES_4);
14896                        		__st.wmiq	27648, _di
         02:D548  64 F0      			stz.l	_di
         02:D54A  A9 6C      			lda.h	#27648
         02:D54C  85 F1      			sta.h	_di
14897                        		__farptr	_tiles_SPR_COIN_100, _bp_bank, _bp
         02:D54E  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COIN_100))
         02:D550  85 EC      			sta.l	_bp
         02:D552  A9 62      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COIN_100))
         02:D554  85 ED      			sta.h	_bp
         02:D556  A9 14      			lda	#bank(_tiles_SPR_COIN_100)
         02:D558  85 02      			sta	_bp_bank
14898                        		__st.wmiq	64, _ax
         02:D55A  A9 40      			lda.l	#64
         02:D55C  85 F8      			sta.l	_ax
         02:D55E  64 F9      			stz.h	_ax
14899                        		 _sgx_load_vram.3
         02:D560  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D562  20 4F FF   			call	load_vram_x
14900                        	
14901                        		.dbg	line,	"include\init.c", 240; sgx_load_vram(COIN_500_VRAM_ADR, tiles_SPR_COIN_500 , TILES_4);
14902                        		__st.wmiq	27712, _di
         02:D565  A9 40      			lda.l	#27712
         02:D567  85 F0      			sta.l	_di
         02:D569  A9 6C      			lda.h	#27712
         02:D56B  85 F1      			sta.h	_di
14903                        		__farptr	_tiles_SPR_COIN_500, _bp_bank, _bp
         02:D56D  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COIN_500))
         02:D56F  85 EC      			sta.l	_bp
         02:D571  A9 62      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COIN_500))
         02:D573  85 ED      			sta.h	_bp
         02:D575  A9 14      			lda	#bank(_tiles_SPR_COIN_500)
         02:D577  85 02      			sta	_bp_bank
14904                        		__st.wmiq	64, _ax
         02:D579  A9 40      			lda.l	#64
         02:D57B  85 F8      			sta.l	_ax
         02:D57D  64 F9      			stz.h	_ax
14905                        		 _sgx_load_vram.3
         02:D57F  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D581  20 4F FF   			call	load_vram_x
14906                        	
14907                        		.dbg	line,	"include\init.c", 241; sgx_load_vram(COIN_1000_VRAM_ADR, tiles_SPR_COIN_1000 , TILES_4);
14908                        		__st.wmiq	27776, _di
         02:D584  A9 80      			lda.l	#27776
         02:D586  85 F0      			sta.l	_di
         02:D588  A9 6C      			lda.h	#27776
         02:D58A  85 F1      			sta.h	_di
14909                        		__farptr	_tiles_SPR_COIN_1000, _bp_bank, _bp
         02:D58C  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COIN_1000))
         02:D58E  85 EC      			sta.l	_bp
         02:D590  A9 63      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COIN_1000))
         02:D592  85 ED      			sta.h	_bp
         02:D594  A9 14      			lda	#bank(_tiles_SPR_COIN_1000)
         02:D596  85 02      			sta	_bp_bank
14910                        		__st.wmiq	64, _ax
         02:D598  A9 40      			lda.l	#64
         02:D59A  85 F8      			sta.l	_ax
         02:D59C  64 F9      			stz.h	_ax
14911                        		 _sgx_load_vram.3
         02:D59E  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D5A0  20 4F FF   			call	load_vram_x
14912                        	
14913                        		.dbg	line,	"include\init.c", 242; sgx_load_vram(STAR_VRAM_ADR, tiles_SPR_STAR , TILES_4);
14914                        		__st.wmiq	27840, _di
         02:D5A3  A9 C0      			lda.l	#27840
         02:D5A5  85 F0      			sta.l	_di
         02:D5A7  A9 6C      			lda.h	#27840
         02:D5A9  85 F1      			sta.h	_di
14915                        		__farptr	_tiles_SPR_STAR, _bp_bank, _bp
         02:D5AB  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_STAR))
         02:D5AD  85 EC      			sta.l	_bp
         02:D5AF  A9 6B      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_STAR))
         02:D5B1  85 ED      			sta.h	_bp
         02:D5B3  A9 14      			lda	#bank(_tiles_SPR_STAR)
         02:D5B5  85 02      			sta	_bp_bank
14916                        		__st.wmiq	64, _ax
         02:D5B7  A9 40      			lda.l	#64
         02:D5B9  85 F8      			sta.l	_ax
         02:D5BB  64 F9      			stz.h	_ax
14917                        		 _sgx_load_vram.3
         02:D5BD  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D5BF  20 4F FF   			call	load_vram_x
14918                        	
14919                        		.dbg	line,	"include\init.c", 243; sgx_load_vram(OCTOPUS_VRAM_ADR, tiles_SPR_OCTOPUS , TILES_4);
14920                        		__st.wmiq	27904, _di
         02:D5C2  64 F0      			stz.l	_di
         02:D5C4  A9 6D      			lda.h	#27904
         02:D5C6  85 F1      			sta.h	_di
14921                        		__farptr	_tiles_SPR_OCTOPUS, _bp_bank, _bp
         02:D5C8  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_OCTOPUS))
         02:D5CA  85 EC      			sta.l	_bp
         02:D5CC  A9 66      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_OCTOPUS))
         02:D5CE  85 ED      			sta.h	_bp
         02:D5D0  A9 14      			lda	#bank(_tiles_SPR_OCTOPUS)
         02:D5D2  85 02      			sta	_bp_bank
14922                        		__st.wmiq	64, _ax
         02:D5D4  A9 40      			lda.l	#64
         02:D5D6  85 F8      			sta.l	_ax
         02:D5D8  64 F9      			stz.h	_ax
14923                        		 _sgx_load_vram.3
         02:D5DA  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D5DC  20 4F FF   			call	load_vram_x
14924                        	
14925                        		.dbg	line,	"include\init.c", 244; sgx_load_vram(FRUIT_VRAM_ADR, tiles_SPR_FRUIT , TILES_4);
14926                        		__st.wmiq	27968, _di
         02:D5DF  A9 40      			lda.l	#27968
         02:D5E1  85 F0      			sta.l	_di
         02:D5E3  A9 6D      			lda.h	#27968
         02:D5E5  85 F1      			sta.h	_di
14927                        		__farptr	_tiles_SPR_FRUIT, _bp_bank, _bp
         02:D5E7  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_FRUIT))
         02:D5E9  85 EC      			sta.l	_bp
         02:D5EB  A9 63      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_FRUIT))
         02:D5ED  85 ED      			sta.h	_bp
         02:D5EF  A9 14      			lda	#bank(_tiles_SPR_FRUIT)
         02:D5F1  85 02      			sta	_bp_bank
14928                        		__st.wmiq	64, _ax
         02:D5F3  A9 40      			lda.l	#64
         02:D5F5  85 F8      			sta.l	_ax
         02:D5F7  64 F9      			stz.h	_ax
14929                        		 _sgx_load_vram.3
         02:D5F9  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D5FB  20 4F FF   			call	load_vram_x
14930                        	
14931                        		.dbg	line,	"include\init.c", 245; sgx_load_vram(BARREL_VRAM_ADR, tiles_SPR_BARREL , TILES_4);
14932                        		__st.wmiq	28032, _di
         02:D5FE  A9 80      			lda.l	#28032
         02:D600  85 F0      			sta.l	_di
         02:D602  A9 6D      			lda.h	#28032
         02:D604  85 F1      			sta.h	_di
14933                        		__farptr	_tiles_SPR_BARREL, _bp_bank, _bp
         02:D606  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_BARREL))
         02:D608  85 EC      			sta.l	_bp
         02:D60A  A9 73      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_BARREL))
         02:D60C  85 ED      			sta.h	_bp
         02:D60E  A9 13      			lda	#bank(_tiles_SPR_BARREL)
         02:D610  85 02      			sta	_bp_bank
14934                        		__st.wmiq	64, _ax
         02:D612  A9 40      			lda.l	#64
         02:D614  85 F8      			sta.l	_ax
         02:D616  64 F9      			stz.h	_ax
14935                        		 _sgx_load_vram.3
         02:D618  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D61A  20 4F FF   			call	load_vram_x
14936                        	
14937                        		.dbg	line,	"include\init.c", 246; sgx_load_vram(HOURGLASS_VRAM_ADR, tiles_SPR_HOURGLASS , TILES_4);
14938                        		__st.wmiq	28096, _di
         02:D61D  A9 C0      			lda.l	#28096
         02:D61F  85 F0      			sta.l	_di
         02:D621  A9 6D      			lda.h	#28096
         02:D623  85 F1      			sta.h	_di
14939                        		__farptr	_tiles_SPR_HOURGLASS, _bp_bank, _bp
         02:D625  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_HOURGLASS))
         02:D627  85 EC      			sta.l	_bp
         02:D629  A9 65      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_HOURGLASS))
         02:D62B  85 ED      			sta.h	_bp
         02:D62D  A9 14      			lda	#bank(_tiles_SPR_HOURGLASS)
         02:D62F  85 02      			sta	_bp_bank
14940                        		__st.wmiq	64, _ax
         02:D631  A9 40      			lda.l	#64
         02:D633  85 F8      			sta.l	_ax
         02:D635  64 F9      			stz.h	_ax
14941                        		 _sgx_load_vram.3
         02:D637  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D639  20 4F FF   			call	load_vram_x
14942                        	
14943                        		.dbg	line,	"include\init.c", 247; sgx_load_vram(BAMBOO_VRAM_ADR, tiles_SPR_BAMBOO , TILES_4);
14944                        		__st.wmiq	28160, _di
         02:D63C  64 F0      			stz.l	_di
         02:D63E  A9 6E      			lda.h	#28160
         02:D640  85 F1      			sta.h	_di
14945                        		__farptr	_tiles_SPR_BAMBOO, _bp_bank, _bp
         02:D642  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_BAMBOO))
         02:D644  85 EC      			sta.l	_bp
         02:D646  A9 6B      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_BAMBOO))
         02:D648  85 ED      			sta.h	_bp
         02:D64A  A9 14      			lda	#bank(_tiles_SPR_BAMBOO)
         02:D64C  85 02      			sta	_bp_bank
14946                        		__st.wmiq	64, _ax
         02:D64E  A9 40      			lda.l	#64
         02:D650  85 F8      			sta.l	_ax
         02:D652  64 F9      			stz.h	_ax
14947                        		 _sgx_load_vram.3
         02:D654  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D656  20 4F FF   			call	load_vram_x
14948                        	
14949                        		.dbg	line,	"include\init.c", 248; sgx_load_vram(YASHICHI_VRAM_ADR, tiles_SPR_YASHICHI , TILES_4);
14950                        		__st.wmiq	28224, _di
         02:D659  A9 40      			lda.l	#28224
         02:D65B  85 F0      			sta.l	_di
         02:D65D  A9 6E      			lda.h	#28224
         02:D65F  85 F1      			sta.h	_di
14951                        		__farptr	_tiles_SPR_YASHICHI, _bp_bank, _bp
         02:D661  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_YASHICHI))
         02:D663  85 EC      			sta.l	_bp
         02:D665  A9 6C      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_YASHICHI))
         02:D667  85 ED      			sta.h	_bp
         02:D669  A9 14      			lda	#bank(_tiles_SPR_YASHICHI)
         02:D66B  85 02      			sta	_bp_bank
14952                        		__st.wmiq	64, _ax
         02:D66D  A9 40      			lda.l	#64
         02:D66F  85 F8      			sta.l	_ax
         02:D671  64 F9      			stz.h	_ax
14953                        		 _sgx_load_vram.3
         02:D673  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D675  20 4F FF   			call	load_vram_x
14954                        	
14955                        		.dbg	line,	"include\init.c", 249; sgx_load_vram(ELEPHANT_VRAM_ADR, tiles_SPR_ELEPHANT , TILES_4);
14956                        		__st.wmiq	28288, _di
         02:D678  A9 80      			lda.l	#28288
         02:D67A  85 F0      			sta.l	_di
         02:D67C  A9 6E      			lda.h	#28288
         02:D67E  85 F1      			sta.h	_di
14957                        		__farptr	_tiles_SPR_ELEPHANT, _bp_bank, _bp
         02:D680  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_ELEPHANT))
         02:D682  85 EC      			sta.l	_bp
         02:D684  A9 6C      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_ELEPHANT))
         02:D686  85 ED      			sta.h	_bp
         02:D688  A9 14      			lda	#bank(_tiles_SPR_ELEPHANT)
         02:D68A  85 02      			sta	_bp_bank
14958                        		__st.wmiq	64, _ax
         02:D68C  A9 40      			lda.l	#64
         02:D68E  85 F8      			sta.l	_ax
         02:D690  64 F9      			stz.h	_ax
14959                        		 _sgx_load_vram.3
         02:D692  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D694  20 4F FF   			call	load_vram_x
14960                        	
14961                        		.dbg	line,	"include\init.c", 250; sgx_load_vram(DRAGONFLY_VRAM_ADR, tiles_SPR_DRAGONFLY , TILES_4);
14962                        		__st.wmiq	28352, _di
         02:D697  A9 C0      			lda.l	#28352
         02:D699  85 F0      			sta.l	_di
         02:D69B  A9 6E      			lda.h	#28352
         02:D69D  85 F1      			sta.h	_di
14963                        		__farptr	_tiles_SPR_DRAGONFLY, _bp_bank, _bp
         02:D69F  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_DRAGONFLY))
         02:D6A1  85 EC      			sta.l	_bp
         02:D6A3  A9 6D      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_DRAGONFLY))
         02:D6A5  85 ED      			sta.h	_bp
         02:D6A7  A9 14      			lda	#bank(_tiles_SPR_DRAGONFLY)
         02:D6A9  85 02      			sta	_bp_bank
14964                        		__st.wmiq	64, _ax
         02:D6AB  A9 40      			lda.l	#64
         02:D6AD  85 F8      			sta.l	_ax
         02:D6AF  64 F9      			stz.h	_ax
14965                        		 _sgx_load_vram.3
         02:D6B1  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D6B3  20 4F FF   			call	load_vram_x
14966                        	
14967                        		.dbg	line,	"include\init.c", 251; sgx_load_vram(COW_VRAM_ADR, tiles_SPR_COW , TILES_4);
14968                        		__st.wmiq	28416, _di
         02:D6B6  64 F0      			stz.l	_di
         02:D6B8  A9 6F      			lda.h	#28416
         02:D6BA  85 F1      			sta.h	_di
14969                        		__farptr	_tiles_SPR_COW, _bp_bank, _bp
         02:D6BC  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_COW))
         02:D6BE  85 EC      			sta.l	_bp
         02:D6C0  A9 6D      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_COW))
         02:D6C2  85 ED      			sta.h	_bp
         02:D6C4  A9 14      			lda	#bank(_tiles_SPR_COW)
         02:D6C6  85 02      			sta	_bp_bank
14970                        		__st.wmiq	64, _ax
         02:D6C8  A9 40      			lda.l	#64
         02:D6CA  85 F8      			sta.l	_ax
         02:D6CC  64 F9      			stz.h	_ax
14971                        		 _sgx_load_vram.3
         02:D6CE  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D6D0  20 4F FF   			call	load_vram_x
14972                        	
14973                        		.dbg	line,	"include\init.c", 252; sgx_load_vram(MOBICHAN_VRAM_ADR, tiles_SPR_MOBICHAN , TILES_4);
14974                        		__st.wmiq	28480, _di
         02:D6D3  A9 40      			lda.l	#28480
         02:D6D5  85 F0      			sta.l	_di
         02:D6D7  A9 6F      			lda.h	#28480
         02:D6D9  85 F1      			sta.h	_di
14975                        		__farptr	_tiles_SPR_MOBICHAN, _bp_bank, _bp
         02:D6DB  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_MOBICHAN))
         02:D6DD  85 EC      			sta.l	_bp
         02:D6DF  A9 6E      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_MOBICHAN))
         02:D6E1  85 ED      			sta.h	_bp
         02:D6E3  A9 14      			lda	#bank(_tiles_SPR_MOBICHAN)
         02:D6E5  85 02      			sta	_bp_bank
14976                        		__st.wmiq	64, _ax
         02:D6E7  A9 40      			lda.l	#64
         02:D6E9  85 F8      			sta.l	_ax
         02:D6EB  64 F9      			stz.h	_ax
14977                        		 _sgx_load_vram.3
         02:D6ED  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         02:D6EF  20 4F FF   			call	load_vram_x
14978                        	
14979                        		.dbg	line,	"include\init.c", 253; }
14980    02:D6F2             	.LL642:
14981                        		__return	0
         02:D6F2  4C EF FF   			jmp	leave_proc
14982                        		.dbg	clear
14983                        		.endp
14984                        		.pceas
14985                        	
14986                        		.dbg	line,	"include\init.c", 256; void load_CHEST_TILES()
14987                        		.dbg	line,	"include\init.c", 257; {
14988                        	;***********************
14989                        	;***********************
14990                        	
14991                        		.hucc
14992    18:D216             		.proc		_load_CHEST_TILES
14993                        		__enter		_load_CHEST_TILES
14994                        	
14995                        		.dbg	line,	"include\init.c", 258; sgx_load_vram(CHEST_VRAM_ADR, tiles_SPR_CHEST , SIZEOF(tiles_SPR_CHEST) >> 1);
14996                        		__st.wmiq	28672, _di
         18:D216  64 F0      			stz.l	_di
         18:D218  A9 70      			lda.h	#28672
         18:D21A  85 F1      			sta.h	_di
14997                        		__farptr	_tiles_SPR_CHEST, _bp_bank, _bp
         18:D21C  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_CHEST))
         18:D21E  85 EC      			sta.l	_bp
         18:D220  A9 74      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_CHEST))
         18:D222  85 ED      			sta.h	_bp
         18:D224  A9 13      			lda	#bank(_tiles_SPR_CHEST)
         18:D226  85 02      			sta	_bp_bank
14998                        		__ld.wi		___sizeof__tiles_SPR_CHEST
         18:D228  A9 00      			lda.l	#___sizeof__tiles_SPR_CHEST
         18:D22A  A0 0C      			ldy.h	#___sizeof__tiles_SPR_CHEST
14999                        		__lsr.wi	1
         18:D22C  42         			say
         18:D22D  4A         			lsr	a
         18:D22E  42         			say
         18:D22F  6A         			ror	a
15000                        		__st.wmq	_ax
         18:D230  85 F8      			sta.l	_ax
         18:D232  84 F9      			sty.h	_ax
15001                        		 _sgx_load_vram.3
         18:D234  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         18:D236  20 4F FF   			call	load_vram_x
15002                        	
15003                        		.dbg	line,	"include\init.c", 259; }
15004    18:D239             	.LL643:
15005                        		__return	0
         18:D239  4C EF FF   			jmp	leave_proc
15006                        		.dbg	clear
15007                        		.endp
15008                        		.pceas
15009                        	
15010                        		.dbg	line,	"include\init.c", 262; void load_NPC_TILES()
15011                        		.dbg	line,	"include\init.c", 263; {
15012                        	;***********************
15013                        	;***********************
15014                        	
15015                        		.hucc
15016    18:D23C             		.proc		_load_NPC_TILES
15017                        		__enter		_load_NPC_TILES
15018                        	
15019                        		.dbg	line,	"include\init.c", 264; sgx_load_vram(NPC_VRAM_ADR, tiles_SPR_NPC , SIZEOF(tiles_SPR_NPC) >> 1);
15020                        		__st.wmiq	30208, _di
         18:D23C  64 F0      			stz.l	_di
         18:D23E  A9 76      			lda.h	#30208
         18:D240  85 F1      			sta.h	_di
15021                        		__farptr	_tiles_SPR_NPC, _bp_bank, _bp
         18:D242  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_NPC))
         18:D244  85 EC      			sta.l	_bp
         18:D246  A9 72      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_NPC))
         18:D248  85 ED      			sta.h	_bp
         18:D24A  A9 14      			lda	#bank(_tiles_SPR_NPC)
         18:D24C  85 02      			sta	_bp_bank
15022                        		__ld.wi		___sizeof__tiles_SPR_NPC
         18:D24E  A9 00      			lda.l	#___sizeof__tiles_SPR_NPC
         18:D250  A0 0C      			ldy.h	#___sizeof__tiles_SPR_NPC
15023                        		__lsr.wi	1
         18:D252  42         			say
         18:D253  4A         			lsr	a
         18:D254  42         			say
         18:D255  6A         			ror	a
15024                        		__st.wmq	_ax
         18:D256  85 F8      			sta.l	_ax
         18:D258  84 F9      			sty.h	_ax
15025                        		 _sgx_load_vram.3
         18:D25A  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         18:D25C  20 4F FF   			call	load_vram_x
15026                        	
15027                        		.dbg	line,	"include\init.c", 265; }
15028    18:D25F             	.LL644:
15029                        		__return	0
         18:D25F  4C EF FF   			jmp	leave_proc
15030                        		.dbg	clear
15031                        		.endp
15032                        		.pceas
15033                        	
15034                        		.dbg	line,	"include\init.c", 268; void init_OBJECT_LV1()
15035                        		.dbg	line,	"include\init.c", 269; {
15036                        	;***********************
15037                        	;***********************
15038                        	
15039                        		.hucc
15040    18:C6E2             		.proc		_init_OBJECT_LV1
15041                        		__enter		_init_OBJECT_LV1
15042                        	
15043                        		.dbg	line,	"include\init.c", 270; signed char i;
15044                        	
15045                        		.dbg	line,	"include\init.c", 272; for(i=0 ; i<level_object_number ; i++)
15046                        		__st.umiq	0, __init_OBJECT_LV1_end - 1  /* i */
         18:C6E2  9C 4B 26   			stz	__init_OBJECT_LV1_end - 1
15047    18:C6E5             	.LL646:
15048                        		__ld.bm		__init_OBJECT_LV1_end - 1  /* i */
         18:C6E5  AD 4B 26   			lda	__init_OBJECT_LV1_end - 1
         18:C6E8  C2         			cly
         18:C6E9  10 01      			bpl	!+
         18:C6EB  88         			dey
         18:C6EC             	!:
15049                        		__slt_w.um	_level_object_number
         18:C6EC  CD 30 23   			cmp	_level_object_number		; Subtract memory from Y:A.
         18:C6EF  98         			tya
         18:C6F0  E9 00      			sbc	#0
         18:C6F2  50 02      			bvc	!+
         18:C6F4  49 80      			eor	#$80		; -ve if Y:A < memory (signed).
         18:C6F6  0A         	!:		asl	a
15050                        		__btrue		.LL648
         18:C6F7  B0 08      			bcs	.LL648
15051                        		__bra		.LL649
         18:C6F9  4C 1D C8   			bra	.LL649
15052    18:C6FC             	.LL647:
15053                        		__inc.umq	__init_OBJECT_LV1_end - 1  /* i */
         18:C6FC  EE 4B 26   			inc	__init_OBJECT_LV1_end - 1
15054                        		__bra		.LL646
         18:C6FF  80 E4      			bra	.LL646
15055    18:C701             	.LL648:
15056                        	
15057                        		.dbg	line,	"include\init.c", 273; {
15058                        	
15059                        		.dbg	line,	"include\init.c", 274; // SET OBJECT PROPERTIES //
15060                        	
15061                        		.dbg	line,	"include\init.c", 275; list_object_type[i] = TABLE_OBJECT_TYPE_LV1[i];
15062                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         18:C701  AE 4B 26   			ldx	__init_OBJECT_LV1_end - 1
15063                        		__ld.uax	_TABLE_OBJECT_TYPE_LV1
         18:C704  BD 9C 60   			lda	_TABLE_OBJECT_TYPE_LV1, x
         18:C707  C2         			cly
15064                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         18:C708  AE 4B 26   			ldx	__init_OBJECT_LV1_end - 1
15065                        		__st.uaxq	_list_object_type
         18:C70B  9D 32 23   			sta	_list_object_type, x
15066                        	
15067                        		.dbg	line,	"include\init.c", 276; list_object_x_pos_ref[i] = TABLE_OBJECT_X_POS_REF_LV1[i];
15068                        		__ld2x.bmq	__init_OBJECT_LV1_end - 1  /* i */
         18:C70E  AD 4B 26   			lda	__init_OBJECT_LV1_end - 1
         18:C711  0A         			asl	a
         18:C712  AA         			tax
15069                        		__ld.wax	_TABLE_OBJECT_X_POS_REF_LV1
         18:C713  BD B3 60   			lda.l	_TABLE_OBJECT_X_POS_REF_LV1, x
         18:C716  BC B4 60   			ldy.h	_TABLE_OBJECT_X_POS_REF_LV1, x
15070                        		__ld2x.bm	__init_OBJECT_LV1_end - 1  /* i */
         18:C719  AA         			tax
         18:C71A  AD 4B 26   			lda	__init_OBJECT_LV1_end - 1
         18:C71D  0A         			asl	a
         18:C71E  22         			sax
15071                        		__st.waxq	_list_object_x_pos_ref
         18:C71F  9D 42 25   			sta.l	_list_object_x_pos_ref, x
         18:C722  98         			tya
         18:C723  9D 43 25   			sta.h	_list_object_x_pos_ref, x
15072                        	
15073                        		.dbg	line,	"include\init.c", 277; list_object_y_pos_ref[i] = TABLE_OBJECT_Y_POS_REF_LV1[i];
15074                        		__ld2x.bmq	__init_OBJECT_LV1_end - 1  /* i */
         18:C726  AD 4B 26   			lda	__init_OBJECT_LV1_end - 1
         18:C729  0A         			asl	a
         18:C72A  AA         			tax
15075                        		__ld.wax	_TABLE_OBJECT_Y_POS_REF_LV1
         18:C72B  BD E1 60   			lda.l	_TABLE_OBJECT_Y_POS_REF_LV1, x
         18:C72E  BC E2 60   			ldy.h	_TABLE_OBJECT_Y_POS_REF_LV1, x
15076                        		__ld2x.bm	__init_OBJECT_LV1_end - 1  /* i */
         18:C731  AA         			tax
         18:C732  AD 4B 26   			lda	__init_OBJECT_LV1_end - 1
         18:C735  0A         			asl	a
         18:C736  22         			sax
15077                        		__st.waxq	_list_object_y_pos_ref
         18:C737  9D 74 25   			sta.l	_list_object_y_pos_ref, x
         18:C73A  98         			tya
         18:C73B  9D 75 25   			sta.h	_list_object_y_pos_ref, x
15078                        	
15079                        		.dbg	line,	"include\init.c", 278; list_object_x_pos[i] = -16;
15080                        		__ld2x.bmq	__init_OBJECT_LV1_end - 1  /* i */
         18:C73E  AD 4B 26   			lda	__init_OBJECT_LV1_end - 1
         18:C741  0A         			asl	a
         18:C742  AA         			tax
15081                        		__st.waxiq	-16, _list_object_x_pos
         18:C743  A9 F0      			lda.l	#-16
         18:C745  9D DE 24   			sta.l	_list_object_x_pos, x
         18:C748  A9 FF      			lda.h	#-16
         18:C74A  9D DF 24   			sta.h	_list_object_x_pos, x
15082                        	
15083                        		.dbg	line,	"include\init.c", 279; list_object_y_pos[i] = -16;
15084                        		__ld2x.bmq	__init_OBJECT_LV1_end - 1  /* i */
         18:C74D  AD 4B 26   			lda	__init_OBJECT_LV1_end - 1
         18:C750  0A         			asl	a
         18:C751  AA         			tax
15085                        		__st.waxiq	-16, _list_object_y_pos
         18:C752  A9 F0      			lda.l	#-16
         18:C754  9D 10 25   			sta.l	_list_object_y_pos, x
         18:C757  A9 FF      			lda.h	#-16
         18:C759  9D 11 25   			sta.h	_list_object_y_pos, x
15086                        	
15087                        		.dbg	line,	"include\init.c", 280; 
15088                        	
15089                        		.dbg	line,	"include\init.c", 281; // IF THE PLAYERS ENTERS THE LEVEL FOR THE 1RST TIME //
15090                        	
15091                        		.dbg	line,	"include\init.c", 282; // ALL OBJECTS ARE ACTIVE //
15092                        	
15093                        		.dbg	line,	"include\init.c", 283; if(respawn == FALSE)
15094                        		__not.um	_respawn
         18:C75C  AD 14 23   			lda	_respawn
         18:C75F  18         			clc
         18:C760  D0 01      			bne	!+
         18:C762  38         			sec
         18:C763             	!:
15095                        		__bfalse	.LL650
         18:C763  90 06      			bcc	.LL650
15096                        	
15097                        		.dbg	line,	"include\init.c", 284; {
15098                        	
15099                        		.dbg	line,	"include\init.c", 285; list_object_state[i] = STATE_ACTIVE;
15100                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         18:C765  AE 4B 26   			ldx	__init_OBJECT_LV1_end - 1
15101                        		__st.uaxiq	0, _list_object_state
         18:C768  9E 4B 23   			stz	_list_object_state, x
15102                        	
15103                        		.dbg	line,	"include\init.c", 286; }
15104                        	
15105                        		.dbg	line,	"include\init.c", 289; // SET OBJECT SPRITE //
15106                        	
15107                        		.dbg	line,	"include\init.c", 290; sgx_spr_set(i + object_start_index);
15108    18:C76B             	.LL650:
15109                        		__ld.bm		__init_OBJECT_LV1_end - 1  /* i */
         18:C76B  AD 4B 26   			lda	__init_OBJECT_LV1_end - 1
         18:C76E  C2         			cly
         18:C76F  10 01      			bpl	!+
         18:C771  88         			dey
         18:C772             	!:
15110                        		__add.um	_object_start_index
         18:C772  18         			clc
         18:C773  6D 2F 23   			adc	_object_start_index
         18:C776  90 01      			bcc	!+
         18:C778  C8         			iny
         18:C779             	!:
15111                        		__call		_sgx_spr_set.1
         18:C779  20 8A E8   			call	_sgx_spr_set.1
15112                        	
15113                        		.dbg	line,	"include\init.c", 291; sgx_spr_x(list_object_x_pos[i]);
15114                        		__ld2x.bmq	__init_OBJECT_LV1_end - 1  /* i */
         18:C77C  AD 4B 26   			lda	__init_OBJECT_LV1_end - 1
         18:C77F  0A         			asl	a
         18:C780  AA         			tax
15115                        		__ld.wax	_list_object_x_pos
         18:C781  BD DE 24   			lda.l	_list_object_x_pos, x
         18:C784  BC DF 24   			ldy.h	_list_object_x_pos, x
15116                        		__call		_sgx_spr_x.1
         18:C787  20 B7 E8   			call	_sgx_spr_x.1
15117                        	
15118                        		.dbg	line,	"include\init.c", 292; sgx_spr_y(list_object_y_pos[i]);
15119                        		__ld2x.bmq	__init_OBJECT_LV1_end - 1  /* i */
         18:C78A  AD 4B 26   			lda	__init_OBJECT_LV1_end - 1
         18:C78D  0A         			asl	a
         18:C78E  AA         			tax
15120                        		__ld.wax	_list_object_y_pos
         18:C78F  BD 10 25   			lda.l	_list_object_y_pos, x
         18:C792  BC 11 25   			ldy.h	_list_object_y_pos, x
15121                        		__call		_sgx_spr_y.1
         18:C795  20 C6 E8   			call	_sgx_spr_y.1
15122                        	
15123                        		.dbg	line,	"include\init.c", 293; sgx_spr_pri(TRUE);
15124                        		__ld.uiq	1
         18:C798  A9 01      			lda	#1
15125                        		__call		_sgx_spr_pri.1
         18:C79A  20 09 E9   			call	_sgx_spr_pri.1
15126                        	
15127                        		.dbg	line,	"include\init.c", 296; if(list_object_type[i] == TYPE_HOURGLASS)
15128                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         18:C79D  AE 4B 26   			ldx	__init_OBJECT_LV1_end - 1
15129                        		__not.uax	_list_object_type
         18:C7A0  BD 32 23   			lda	_list_object_type, x
         18:C7A3  18         			clc
         18:C7A4  D0 01      			bne	!+
         18:C7A6  38         			sec
         18:C7A7             	!:
15130                        		__bfalse	.LL651
         18:C7A7  90 1D      			bcc	.LL651
15131                        	
15132                        		.dbg	line,	"include\init.c", 297; {
15133                        	
15134                        		.dbg	line,	"include\init.c", 298; list_object_energy[i] = 0;
15135                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         18:C7A9  AE 4B 26   			ldx	__init_OBJECT_LV1_end - 1
15136                        		__st.uaxiq	0, _list_object_energy
         18:C7AC  9E 64 23   			stz	_list_object_energy, x
15137                        	
15138                        		.dbg	line,	"include\init.c", 299; sgx_spr_pal(18);
15139                        		__ld.uiq	18
         18:C7AF  A9 12      			lda	#18
15140                        		__call		_sgx_spr_pal.1
         18:C7B1  20 FA E8   			call	_sgx_spr_pal.1
15141                        	
15142                        		.dbg	line,	"include\init.c", 300; sgx_spr_pattern(HOURGLASS_VRAM_ADR);
15143                        		__ld.wi		28096
         18:C7B4  A9 C0      			lda.l	#28096
         18:C7B6  A0 6D      			ldy.h	#28096
15144                        		__call		_sgx_spr_pattern.1
         18:C7B8  20 D3 E8   			call	_sgx_spr_pattern.1
15145                        	
15146                        		.dbg	line,	"include\init.c", 301; sgx_spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_16x16);
15147                        		__st.umiq	185, _al
         18:C7BB  A9 B9      			lda.l	#185
         18:C7BD  85 F8      			sta	_al
15148                        		__ld.uiq	0
         18:C7BF  62         			cla
15149                        		__call		_sgx_spr_ctrl.2
         18:C7C0  20 E9 E8   			call	_sgx_spr_ctrl.2
15150                        	
15151                        		.dbg	line,	"include\init.c", 302; }
15152                        	
15153                        		.dbg	line,	"include\init.c", 304; else if(list_object_type[i] == TYPE_POT)
15154                        		__bra		.LL652
         18:C7C3  4C FC C6   			bra	.LL652
15155    18:C7C6             	.LL651:
15156                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         18:C7C6  AE 4B 26   			ldx	__init_OBJECT_LV1_end - 1
15157                        		__ld.uaxq	_list_object_type
         18:C7C9  BD 32 23   			lda	_list_object_type, x
15158                        		__equ_b.uiq	1
         18:C7CC  C9 01      			cmp	#1
         18:C7CE  F0 01      			beq	!+
         18:C7D0  18         			clc
         18:C7D1             	!:
15159                        		__bfalse	.LL653
         18:C7D1  90 1E      			bcc	.LL653
15160                        	
15161                        		.dbg	line,	"include\init.c", 305; {
15162                        	
15163                        		.dbg	line,	"include\init.c", 306; list_object_energy[i] = 2;
15164                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         18:C7D3  AE 4B 26   			ldx	__init_OBJECT_LV1_end - 1
15165                        		__st.uaxiq	2, _list_object_energy
         18:C7D6  A9 02      			lda.l	#2
         18:C7D8  9D 64 23   			sta	_list_object_energy, x
15166                        	
15167                        		.dbg	line,	"include\init.c", 307; sgx_spr_pal(17);
15168                        		__ld.uiq	17
         18:C7DB  A9 11      			lda	#17
15169                        		__call		_sgx_spr_pal.1
         18:C7DD  20 FA E8   			call	_sgx_spr_pal.1
15170                        	
15171                        		.dbg	line,	"include\init.c", 308; sgx_spr_pattern(POT1_VRAM_ADR);
15172                        		__ld.wi		26624
         18:C7E0  62         			cla
         18:C7E1  A0 68      			ldy.h	#26624
15173                        		__call		_sgx_spr_pattern.1
         18:C7E3  20 D3 E8   			call	_sgx_spr_pattern.1
15174                        	
15175                        		.dbg	line,	"include\init.c", 309; sgx_spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_16x16);
15176                        		__st.umiq	185, _al
         18:C7E6  A9 B9      			lda.l	#185
         18:C7E8  85 F8      			sta	_al
15177                        		__ld.uiq	0
         18:C7EA  62         			cla
15178                        		__call		_sgx_spr_ctrl.2
         18:C7EB  20 E9 E8   			call	_sgx_spr_ctrl.2
15179                        	
15180                        		.dbg	line,	"include\init.c", 310; }
15181                        	
15182                        		.dbg	line,	"include\init.c", 312; else if(list_object_type[i] == TYPE_POW)
15183                        		__bra		.LL654
         18:C7EE  4C FC C6   			bra	.LL654
15184    18:C7F1             	.LL653:
15185                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         18:C7F1  AE 4B 26   			ldx	__init_OBJECT_LV1_end - 1
15186                        		__ld.uaxq	_list_object_type
         18:C7F4  BD 32 23   			lda	_list_object_type, x
15187                        		__equ_b.uiq	2
         18:C7F7  C9 02      			cmp	#2
         18:C7F9  F0 01      			beq	!+
         18:C7FB  18         			clc
         18:C7FC             	!:
15188                        		__bfalse	.LL655
         18:C7FC  B0 03 4C FC			bcc	.LL655
         18:C800  C6          
15189                        	
15190                        		.dbg	line,	"include\init.c", 313; {
15191                        	
15192                        		.dbg	line,	"include\init.c", 314; list_object_energy[i] = 0;
15193                        		__ldx.bmq	__init_OBJECT_LV1_end - 1  /* i */
         18:C801  AE 4B 26   			ldx	__init_OBJECT_LV1_end - 1
15194                        		__st.uaxiq	0, _list_object_energy
         18:C804  9E 64 23   			stz	_list_object_energy, x
15195                        	
15196                        		.dbg	line,	"include\init.c", 315; sgx_spr_pal(18);
15197                        		__ld.uiq	18
         18:C807  A9 12      			lda	#18
15198                        		__call		_sgx_spr_pal.1
         18:C809  20 FA E8   			call	_sgx_spr_pal.1
15199                        	
15200                        		.dbg	line,	"include\init.c", 316; sgx_spr_pattern(POW_VRAM_ADR);
15201                        		__ld.wi		27136
         18:C80C  62         			cla
         18:C80D  A0 6A      			ldy.h	#27136
15202                        		__call		_sgx_spr_pattern.1
         18:C80F  20 D3 E8   			call	_sgx_spr_pattern.1
15203                        	
15204                        		.dbg	line,	"include\init.c", 317; sgx_spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_16x16);
15205                        		__st.umiq	185, _al
         18:C812  A9 B9      			lda.l	#185
         18:C814  85 F8      			sta	_al
15206                        		__ld.uiq	0
         18:C816  62         			cla
15207                        		__call		_sgx_spr_ctrl.2
         18:C817  20 E9 E8   			call	_sgx_spr_ctrl.2
15208                        	
15209                        		.dbg	line,	"include\init.c", 318; }
15210                        	
15211                        		.dbg	line,	"include\init.c", 319; }
15212    18:C81A             	.LL655	.alias		.LL647
15213    18:C81A             	.LL654	.alias		.LL647
15214    18:C81A             	.LL652	.alias		.LL647
15215                        		__bra		.LL647
         18:C81A  4C FC C6   			bra	.LL647
15216    18:C81D             	.LL649:
15217                        	
15218                        		.dbg	line,	"include\init.c", 320; }
15219    18:C81D             	.LL645:
15220                        		__return	0
         18:C81D  4C EF FF   			jmp	leave_proc
15221                        		.dbg	clear
15222                        		.endp
15223                        		.pceas
15224                        	
15225                        		.dbg	line,	"include\init.c", 323; void init_CHEST_LV1()
15226                        		.dbg	line,	"include\init.c", 324; {
15227                        	;***********************
15228                        	;***********************
15229                        	
15230                        		.hucc
15231    18:CA06             		.proc		_init_CHEST_LV1
15232                        		__enter		_init_CHEST_LV1
15233                        	
15234                        		.dbg	line,	"include\init.c", 325; signed char i;
15235                        	
15236                        		.dbg	line,	"include\init.c", 327; for(i=0 ; i<level_chest_number ; i++)
15237                        		__st.umiq	0, __init_CHEST_LV1_end - 1  /* i */
         18:CA06  9C 4B 26   			stz	__init_CHEST_LV1_end - 1
15238    18:CA09             	.LL657:
15239                        		__ld.bm		__init_CHEST_LV1_end - 1  /* i */
         18:CA09  AD 4B 26   			lda	__init_CHEST_LV1_end - 1
         18:CA0C  C2         			cly
         18:CA0D  10 01      			bpl	!+
         18:CA0F  88         			dey
         18:CA10             	!:
15240                        		__slt_w.um	_level_chest_number
         18:CA10  CD 9F 23   			cmp	_level_chest_number		; Subtract memory from Y:A.
         18:CA13  98         			tya
         18:CA14  E9 00      			sbc	#0
         18:CA16  50 02      			bvc	!+
         18:CA18  49 80      			eor	#$80		; -ve if Y:A < memory (signed).
         18:CA1A  0A         	!:		asl	a
15241                        		__btrue		.LL659
         18:CA1B  B0 08      			bcs	.LL659
15242                        		__bra		.LL660
         18:CA1D  4C CB CA   			bra	.LL660
15243    18:CA20             	.LL658:
15244                        		__inc.umq	__init_CHEST_LV1_end - 1  /* i */
         18:CA20  EE 4B 26   			inc	__init_CHEST_LV1_end - 1
15245                        		__bra		.LL657
         18:CA23  80 E4      			bra	.LL657
15246    18:CA25             	.LL659:
15247                        	
15248                        		.dbg	line,	"include\init.c", 328; {
15249                        	
15250                        		.dbg	line,	"include\init.c", 329; // SET CHEST PROPERTIES //
15251                        	
15252                        		.dbg	line,	"include\init.c", 330; list_chest_x_pos_ref[i] = TABLE_CHEST_X_POS_REF_LV1[i];
15253                        		__ld2x.bmq	__init_CHEST_LV1_end - 1  /* i */
         18:CA25  AD 4B 26   			lda	__init_CHEST_LV1_end - 1
         18:CA28  0A         			asl	a
         18:CA29  AA         			tax
15254                        		__ld.wax	_TABLE_CHEST_X_POS_REF_LV1
         18:CA2A  BD 0F 61   			lda.l	_TABLE_CHEST_X_POS_REF_LV1, x
         18:CA2D  BC 10 61   			ldy.h	_TABLE_CHEST_X_POS_REF_LV1, x
15255                        		__ld2x.bm	__init_CHEST_LV1_end - 1  /* i */
         18:CA30  AA         			tax
         18:CA31  AD 4B 26   			lda	__init_CHEST_LV1_end - 1
         18:CA34  0A         			asl	a
         18:CA35  22         			sax
15256                        		__st.waxq	_list_chest_x_pos_ref
         18:CA36  9D C6 25   			sta.l	_list_chest_x_pos_ref, x
         18:CA39  98         			tya
         18:CA3A  9D C7 25   			sta.h	_list_chest_x_pos_ref, x
15257                        	
15258                        		.dbg	line,	"include\init.c", 331; list_chest_y_pos_ref[i] = TABLE_CHEST_Y_POS_REF_LV1[i];
15259                        		__ld2x.bmq	__init_CHEST_LV1_end - 1  /* i */
         18:CA3D  AD 4B 26   			lda	__init_CHEST_LV1_end - 1
         18:CA40  0A         			asl	a
         18:CA41  AA         			tax
15260                        		__ld.wax	_TABLE_CHEST_Y_POS_REF_LV1
         18:CA42  BD 13 61   			lda.l	_TABLE_CHEST_Y_POS_REF_LV1, x
         18:CA45  BC 14 61   			ldy.h	_TABLE_CHEST_Y_POS_REF_LV1, x
15261                        		__ld2x.bm	__init_CHEST_LV1_end - 1  /* i */
         18:CA48  AA         			tax
         18:CA49  AD 4B 26   			lda	__init_CHEST_LV1_end - 1
         18:CA4C  0A         			asl	a
         18:CA4D  22         			sax
15262                        		__st.waxq	_list_chest_y_pos_ref
         18:CA4E  9D D6 25   			sta.l	_list_chest_y_pos_ref, x
         18:CA51  98         			tya
         18:CA52  9D D7 25   			sta.h	_list_chest_y_pos_ref, x
15263                        	
15264                        		.dbg	line,	"include\init.c", 332; list_chest_x_pos[i] = -32;
15265                        		__ld2x.bmq	__init_CHEST_LV1_end - 1  /* i */
         18:CA55  AD 4B 26   			lda	__init_CHEST_LV1_end - 1
         18:CA58  0A         			asl	a
         18:CA59  AA         			tax
15266                        		__st.waxiq	-32, _list_chest_x_pos
         18:CA5A  A9 E0      			lda.l	#-32
         18:CA5C  9D A6 25   			sta.l	_list_chest_x_pos, x
         18:CA5F  A9 FF      			lda.h	#-32
         18:CA61  9D A7 25   			sta.h	_list_chest_x_pos, x
15267                        	
15268                        		.dbg	line,	"include\init.c", 333; list_chest_y_pos[i] = -32;
15269                        		__ld2x.bmq	__init_CHEST_LV1_end - 1  /* i */
         18:CA64  AD 4B 26   			lda	__init_CHEST_LV1_end - 1
         18:CA67  0A         			asl	a
         18:CA68  AA         			tax
15270                        		__st.waxiq	-32, _list_chest_y_pos
         18:CA69  A9 E0      			lda.l	#-32
         18:CA6B  9D B6 25   			sta.l	_list_chest_y_pos, x
         18:CA6E  A9 FF      			lda.h	#-32
         18:CA70  9D B7 25   			sta.h	_list_chest_y_pos, x
15271                        	
15272                        		.dbg	line,	"include\init.c", 335; if(respawn == FALSE)
15273                        		__not.um	_respawn
         18:CA73  AD 14 23   			lda	_respawn
         18:CA76  18         			clc
         18:CA77  D0 01      			bne	!+
         18:CA79  38         			sec
         18:CA7A             	!:
15274                        		__bfalse	.LL661
         18:CA7A  90 06      			bcc	.LL661
15275                        	
15276                        		.dbg	line,	"include\init.c", 336; {
15277                        	
15278                        		.dbg	line,	"include\init.c", 337; list_chest_state[i] = STATE_ACTIVE;
15279                        		__ldx.bmq	__init_CHEST_LV1_end - 1  /* i */
         18:CA7C  AE 4B 26   			ldx	__init_CHEST_LV1_end - 1
15280                        		__st.uaxiq	0, _list_chest_state
         18:CA7F  9E A1 23   			stz	_list_chest_state, x
15281                        	
15282                        		.dbg	line,	"include\init.c", 338; }
15283                        	
15284                        		.dbg	line,	"include\init.c", 341; // SET CHEST SPRITE //
15285                        	
15286                        		.dbg	line,	"include\init.c", 342; sgx_spr_set(i + chest_start_index);
15287    18:CA82             	.LL661:
15288                        		__ld.bm		__init_CHEST_LV1_end - 1  /* i */
         18:CA82  AD 4B 26   			lda	__init_CHEST_LV1_end - 1
         18:CA85  C2         			cly
         18:CA86  10 01      			bpl	!+
         18:CA88  88         			dey
         18:CA89             	!:
15289                        		__add.um	_chest_start_index
         18:CA89  18         			clc
         18:CA8A  6D 9E 23   			adc	_chest_start_index
         18:CA8D  90 01      			bcc	!+
         18:CA8F  C8         			iny
         18:CA90             	!:
15290                        		__call		_sgx_spr_set.1
         18:CA90  20 8A E8   			call	_sgx_spr_set.1
15291                        	
15292                        		.dbg	line,	"include\init.c", 343; sgx_spr_x(list_chest_x_pos[i]);
15293                        		__ld2x.bmq	__init_CHEST_LV1_end - 1  /* i */
         18:CA93  AD 4B 26   			lda	__init_CHEST_LV1_end - 1
         18:CA96  0A         			asl	a
         18:CA97  AA         			tax
15294                        		__ld.wax	_list_chest_x_pos
         18:CA98  BD A6 25   			lda.l	_list_chest_x_pos, x
         18:CA9B  BC A7 25   			ldy.h	_list_chest_x_pos, x
15295                        		__call		_sgx_spr_x.1
         18:CA9E  20 B7 E8   			call	_sgx_spr_x.1
15296                        	
15297                        		.dbg	line,	"include\init.c", 344; sgx_spr_y(list_chest_y_pos[i]);
15298                        		__ld2x.bmq	__init_CHEST_LV1_end - 1  /* i */
         18:CAA1  AD 4B 26   			lda	__init_CHEST_LV1_end - 1
         18:CAA4  0A         			asl	a
         18:CAA5  AA         			tax
15299                        		__ld.wax	_list_chest_y_pos
         18:CAA6  BD B6 25   			lda.l	_list_chest_y_pos, x
         18:CAA9  BC B7 25   			ldy.h	_list_chest_y_pos, x
15300                        		__call		_sgx_spr_y.1
         18:CAAC  20 C6 E8   			call	_sgx_spr_y.1
15301                        	
15302                        		.dbg	line,	"include\init.c", 345; sgx_spr_pri(TRUE);
15303                        		__ld.uiq	1
         18:CAAF  A9 01      			lda	#1
15304                        		__call		_sgx_spr_pri.1
         18:CAB1  20 09 E9   			call	_sgx_spr_pri.1
15305                        	
15306                        		.dbg	line,	"include\init.c", 348; sgx_spr_pal(18);
15307                        		__ld.uiq	18
         18:CAB4  A9 12      			lda	#18
15308                        		__call		_sgx_spr_pal.1
         18:CAB6  20 FA E8   			call	_sgx_spr_pal.1
15309                        	
15310                        		.dbg	line,	"include\init.c", 349; sgx_spr_pattern(CHEST_VRAM_ADR);
15311                        		__ld.wi		28672
         18:CAB9  62         			cla
         18:CABA  A0 70      			ldy.h	#28672
15312                        		__call		_sgx_spr_pattern.1
         18:CABC  20 D3 E8   			call	_sgx_spr_pattern.1
15313                        	
15314                        		.dbg	line,	"include\init.c", 350; sgx_spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_32x32);
15315                        		__st.umiq	185, _al
         18:CABF  A9 B9      			lda.l	#185
         18:CAC1  85 F8      			sta	_al
15316                        		__ld.uiq	17
         18:CAC3  A9 11      			lda	#17
15317                        		__call		_sgx_spr_ctrl.2
         18:CAC5  20 E9 E8   			call	_sgx_spr_ctrl.2
15318                        	
15319                        		.dbg	line,	"include\init.c", 351; }
15320                        		__bra		.LL658
         18:CAC8  4C 20 CA   			bra	.LL658
15321    18:CACB             	.LL660:
15322                        	
15323                        		.dbg	line,	"include\init.c", 352; }
15324    18:CACB             	.LL656:
15325                        		__return	0
         18:CACB  4C EF FF   			jmp	leave_proc
15326                        		.dbg	clear
15327                        		.endp
15328                        		.pceas
15329                        	
15330                        		.dbg	line,	"include\init.c", 355; void init_NPC_LV1()
15331                        		.dbg	line,	"include\init.c", 356; {
15332                        	;***********************
15333                        	;***********************
15334                        	
15335                        		.hucc
15336    01:DF22             		.proc		_init_NPC_LV1
15337                        		__enter		_init_NPC_LV1
15338                        	
15339                        		.dbg	line,	"include\init.c", 357; signed char i;
15340                        	
15341                        		.dbg	line,	"include\init.c", 359; for(i=0 ; i<level_npc_number ; i++)
15342                        		__st.umiq	0, __init_NPC_LV1_end - 1  /* i */
         01:DF22  9C 4B 26   			stz	__init_NPC_LV1_end - 1
15343    01:DF25             	.LL663:
15344                        		__ld.bm		__init_NPC_LV1_end - 1  /* i */
         01:DF25  AD 4B 26   			lda	__init_NPC_LV1_end - 1
         01:DF28  C2         			cly
         01:DF29  10 01      			bpl	!+
         01:DF2B  88         			dey
         01:DF2C             	!:
15345                        		__slt_w.um	_level_npc_number
         01:DF2C  CD B2 23   			cmp	_level_npc_number		; Subtract memory from Y:A.
         01:DF2F  98         			tya
         01:DF30  E9 00      			sbc	#0
         01:DF32  50 02      			bvc	!+
         01:DF34  49 80      			eor	#$80		; -ve if Y:A < memory (signed).
         01:DF36  0A         	!:		asl	a
15346                        		__btrue		.LL665
         01:DF37  B0 08      			bcs	.LL665
15347                        		__bra		.LL666
         01:DF39  4C F4 DF   			bra	.LL666
15348    01:DF3C             	.LL664:
15349                        		__inc.umq	__init_NPC_LV1_end - 1  /* i */
         01:DF3C  EE 4B 26   			inc	__init_NPC_LV1_end - 1
15350                        		__bra		.LL663
         01:DF3F  80 E4      			bra	.LL663
15351    01:DF41             	.LL665:
15352                        	
15353                        		.dbg	line,	"include\init.c", 360; {
15354                        	
15355                        		.dbg	line,	"include\init.c", 361; // SET NPC PROPERTIES //
15356                        	
15357                        		.dbg	line,	"include\init.c", 362; list_npc_type[i] = TABLE_NPC_TYPE_LV1[i];
15358                        		__ldx.bmq	__init_NPC_LV1_end - 1  /* i */
         01:DF41  AE 4B 26   			ldx	__init_NPC_LV1_end - 1
15359                        		__ld.uax	_TABLE_NPC_TYPE_LV1
         01:DF44  BD 92 60   			lda	_TABLE_NPC_TYPE_LV1, x
         01:DF47  C2         			cly
15360                        		__ldx.bmq	__init_NPC_LV1_end - 1  /* i */
         01:DF48  AE 4B 26   			ldx	__init_NPC_LV1_end - 1
15361                        		__st.uaxq	_list_npc_type
         01:DF4B  9D B4 23   			sta	_list_npc_type, x
15362                        	
15363                        		.dbg	line,	"include\init.c", 363; list_npc_x_pos_ref[i] = TABLE_NPC_X_POS_REF_LV1[i];
15364                        		__ld2x.bmq	__init_NPC_LV1_end - 1  /* i */
         01:DF4E  AD 4B 26   			lda	__init_NPC_LV1_end - 1
         01:DF51  0A         			asl	a
         01:DF52  AA         			tax
15365                        		__ld.wax	_TABLE_NPC_X_POS_REF_LV1
         01:DF53  BD 94 60   			lda.l	_TABLE_NPC_X_POS_REF_LV1, x
         01:DF56  BC 95 60   			ldy.h	_TABLE_NPC_X_POS_REF_LV1, x
15366                        		__ld2x.bm	__init_NPC_LV1_end - 1  /* i */
         01:DF59  AA         			tax
         01:DF5A  AD 4B 26   			lda	__init_NPC_LV1_end - 1
         01:DF5D  0A         			asl	a
         01:DF5E  22         			sax
15367                        		__st.waxq	_list_npc_x_pos_ref
         01:DF5F  9D 0A 26   			sta.l	_list_npc_x_pos_ref, x
         01:DF62  98         			tya
         01:DF63  9D 0B 26   			sta.h	_list_npc_x_pos_ref, x
15368                        	
15369                        		.dbg	line,	"include\init.c", 364; list_npc_y_pos_ref[i] = TABLE_NPC_Y_POS_REF_LV1[i];
15370                        		__ld2x.bmq	__init_NPC_LV1_end - 1  /* i */
         01:DF66  AD 4B 26   			lda	__init_NPC_LV1_end - 1
         01:DF69  0A         			asl	a
         01:DF6A  AA         			tax
15371                        		__ld.wax	_TABLE_NPC_Y_POS_REF_LV1
         01:DF6B  BD 98 60   			lda.l	_TABLE_NPC_Y_POS_REF_LV1, x
         01:DF6E  BC 99 60   			ldy.h	_TABLE_NPC_Y_POS_REF_LV1, x
15372                        		__ld2x.bm	__init_NPC_LV1_end - 1  /* i */
         01:DF71  AA         			tax
         01:DF72  AD 4B 26   			lda	__init_NPC_LV1_end - 1
         01:DF75  0A         			asl	a
         01:DF76  22         			sax
15373                        		__st.waxq	_list_npc_y_pos_ref
         01:DF77  9D 1C 26   			sta.l	_list_npc_y_pos_ref, x
         01:DF7A  98         			tya
         01:DF7B  9D 1D 26   			sta.h	_list_npc_y_pos_ref, x
15374                        	
15375                        		.dbg	line,	"include\init.c", 365; list_npc_x_pos[i] = -32;
15376                        		__ld2x.bmq	__init_NPC_LV1_end - 1  /* i */
         01:DF7E  AD 4B 26   			lda	__init_NPC_LV1_end - 1
         01:DF81  0A         			asl	a
         01:DF82  AA         			tax
15377                        		__st.waxiq	-32, _list_npc_x_pos
         01:DF83  A9 E0      			lda.l	#-32
         01:DF85  9D E6 25   			sta.l	_list_npc_x_pos, x
         01:DF88  A9 FF      			lda.h	#-32
         01:DF8A  9D E7 25   			sta.h	_list_npc_x_pos, x
15378                        	
15379                        		.dbg	line,	"include\init.c", 366; list_npc_y_pos[i] = -32;
15380                        		__ld2x.bmq	__init_NPC_LV1_end - 1  /* i */
         01:DF8D  AD 4B 26   			lda	__init_NPC_LV1_end - 1
         01:DF90  0A         			asl	a
         01:DF91  AA         			tax
15381                        		__st.waxiq	-32, _list_npc_y_pos
         01:DF92  A9 E0      			lda.l	#-32
         01:DF94  9D F8 25   			sta.l	_list_npc_y_pos, x
         01:DF97  A9 FF      			lda.h	#-32
         01:DF99  9D F9 25   			sta.h	_list_npc_y_pos, x
15382                        	
15383                        		.dbg	line,	"include\init.c", 368; if(respawn == FALSE)
15384                        		__not.um	_respawn
         01:DF9C  AD 14 23   			lda	_respawn
         01:DF9F  18         			clc
         01:DFA0  D0 01      			bne	!+
         01:DFA2  38         			sec
         01:DFA3             	!:
15385                        		__bfalse	.LL667
         01:DFA3  90 06      			bcc	.LL667
15386                        	
15387                        		.dbg	line,	"include\init.c", 369; {
15388                        	
15389                        		.dbg	line,	"include\init.c", 370; list_npc_state[i] = STATE_ACTIVE;
15390                        		__ldx.bmq	__init_NPC_LV1_end - 1  /* i */
         01:DFA5  AE 4B 26   			ldx	__init_NPC_LV1_end - 1
15391                        		__st.uaxiq	0, _list_npc_state
         01:DFA8  9E BD 23   			stz	_list_npc_state, x
15392                        	
15393                        		.dbg	line,	"include\init.c", 371; }
15394                        	
15395                        		.dbg	line,	"include\init.c", 374; // SET NPC SPRITE //
15396                        	
15397                        		.dbg	line,	"include\init.c", 375; sgx_spr_set(i + npc_start_index);
15398    01:DFAB             	.LL667:
15399                        		__ld.bm		__init_NPC_LV1_end - 1  /* i */
         01:DFAB  AD 4B 26   			lda	__init_NPC_LV1_end - 1
         01:DFAE  C2         			cly
         01:DFAF  10 01      			bpl	!+
         01:DFB1  88         			dey
         01:DFB2             	!:
15400                        		__add.um	_npc_start_index
         01:DFB2  18         			clc
         01:DFB3  6D B1 23   			adc	_npc_start_index
         01:DFB6  90 01      			bcc	!+
         01:DFB8  C8         			iny
         01:DFB9             	!:
15401                        		__call		_sgx_spr_set.1
         01:DFB9  20 8A E8   			call	_sgx_spr_set.1
15402                        	
15403                        		.dbg	line,	"include\init.c", 376; sgx_spr_x(list_npc_x_pos[i]);
15404                        		__ld2x.bmq	__init_NPC_LV1_end - 1  /* i */
         01:DFBC  AD 4B 26   			lda	__init_NPC_LV1_end - 1
         01:DFBF  0A         			asl	a
         01:DFC0  AA         			tax
15405                        		__ld.wax	_list_npc_x_pos
         01:DFC1  BD E6 25   			lda.l	_list_npc_x_pos, x
         01:DFC4  BC E7 25   			ldy.h	_list_npc_x_pos, x
15406                        		__call		_sgx_spr_x.1
         01:DFC7  20 B7 E8   			call	_sgx_spr_x.1
15407                        	
15408                        		.dbg	line,	"include\init.c", 377; sgx_spr_y(list_npc_y_pos[i]);
15409                        		__ld2x.bmq	__init_NPC_LV1_end - 1  /* i */
         01:DFCA  AD 4B 26   			lda	__init_NPC_LV1_end - 1
         01:DFCD  0A         			asl	a
         01:DFCE  AA         			tax
15410                        		__ld.wax	_list_npc_y_pos
         01:DFCF  BD F8 25   			lda.l	_list_npc_y_pos, x
         01:DFD2  BC F9 25   			ldy.h	_list_npc_y_pos, x
15411                        		__call		_sgx_spr_y.1
         01:DFD5  20 C6 E8   			call	_sgx_spr_y.1
15412                        	
15413                        		.dbg	line,	"include\init.c", 378; sgx_spr_pri(TRUE);
15414                        		__ld.uiq	1
         01:DFD8  A9 01      			lda	#1
15415                        		__call		_sgx_spr_pri.1
         01:DFDA  20 09 E9   			call	_sgx_spr_pri.1
15416                        	
15417                        		.dbg	line,	"include\init.c", 381; sgx_spr_pal(17);
15418                        		__ld.uiq	17
         01:DFDD  A9 11      			lda	#17
15419                        		__call		_sgx_spr_pal.1
         01:DFDF  20 FA E8   			call	_sgx_spr_pal.1
15420                        	
15421                        		.dbg	line,	"include\init.c", 382; sgx_spr_pattern(NPC_VRAM_ADR);
15422                        		__ld.wi		30208
         01:DFE2  62         			cla
         01:DFE3  A0 76      			ldy.h	#30208
15423                        		__call		_sgx_spr_pattern.1
         01:DFE5  20 D3 E8   			call	_sgx_spr_pattern.1
15424                        	
15425                        		.dbg	line,	"include\init.c", 383; sgx_spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_32x32);
15426                        		__st.umiq	185, _al
         01:DFE8  A9 B9      			lda.l	#185
         01:DFEA  85 F8      			sta	_al
15427                        		__ld.uiq	17
         01:DFEC  A9 11      			lda	#17
15428                        		__call		_sgx_spr_ctrl.2
         01:DFEE  20 E9 E8   			call	_sgx_spr_ctrl.2
15429                        	
15430                        		.dbg	line,	"include\init.c", 384; }
15431                        		__bra		.LL664
         01:DFF1  4C 3C DF   			bra	.LL664
15432    01:DFF4             	.LL666:
15433                        	
15434                        		.dbg	line,	"include\init.c", 385; }
15435    01:DFF4             	.LL662:
15436                        		__return	0
         01:DFF4  4C EF FF   			jmp	leave_proc
15437                        		.dbg	clear
15438                        		.endp
15439                        		.pceas
15440                        	
15441                        		.dbg	line,	"include\init.c", 392; void init_HUD()
15442                        		.dbg	line,	"include\init.c", 393; {
15443                        	;***********************
15444                        	;***********************
15445                        	
15446                        		.hucc
15447    02:D141             		.proc		_init_HUD
15448                        		__enter		_init_HUD
15449                        	
15450                        		.dbg	line,	"include\init.c", 394; //**************************************************************************************//
15451                        	
15452                        		.dbg	line,	"include\init.c", 395; //                                                                                      //
15453                        	
15454                        		.dbg	line,	"include\init.c", 396; //                                        VDC 1                                         //
15455                        	
15456                        		.dbg	line,	"include\init.c", 397; //                                                                                      //
15457                        	
15458                        		.dbg	line,	"include\init.c", 398; //**************************************************************************************//
15459                        	
15460                        		.dbg	line,	"include\init.c", 400; //--------------------------------------------------------------------------------------//
15461                        	
15462                        		.dbg	line,	"include\init.c", 401; //                                      LOAD FONT                                       //
15463                        	
15464                        		.dbg	line,	"include\init.c", 402; //--------------------------------------------------------------------------------------//
15465                        	
15466                        		.dbg	line,	"include\init.c", 404; load_vram( 0x0800, tileset_FONT_TITLE, SIZEOF(tileset_FONT_TITLE) >> 1 );
15467                        		__st.wmiq	2048, _di
         02:D141  64 F0      			stz.l	_di
         02:D143  A9 08      			lda.h	#2048
         02:D145  85 F1      			sta.h	_di
15468                        		__farptr	_tileset_FONT_TITLE, _bp_bank, _bp
         02:D147  A9 00      			lda.l	#$6000 + ($1FFF & (_tileset_FONT_TITLE))
         02:D149  85 EC      			sta.l	_bp
         02:D14B  A9 60      			lda.h	#$6000 + ($1FFF & (_tileset_FONT_TITLE))
         02:D14D  85 ED      			sta.h	_bp
         02:D14F  A9 03      			lda	#bank(_tileset_FONT_TITLE)
         02:D151  85 02      			sta	_bp_bank
15469                        		__ld.wi		___sizeof__tileset_FONT_TITLE
         02:D153  A9 00      			lda.l	#___sizeof__tileset_FONT_TITLE
         02:D155  A0 0C      			ldy.h	#___sizeof__tileset_FONT_TITLE
15470                        		__lsr.wi	1
         02:D157  42         			say
         02:D158  4A         			lsr	a
         02:D159  42         			say
         02:D15A  6A         			ror	a
15471                        		__st.wmq	_ax
         02:D15B  85 F8      			sta.l	_ax
         02:D15D  84 F9      			sty.h	_ax
15472                        		 _load_vram.3
         02:D15F  82         			clx				; Offset to PCE VDC.
         02:D160  20 4F FF   			call	load_vram_x
15473                        	
15474                        		.dbg	line,	"include\init.c", 406; set_font_pal(15);
15475                        		__ld.uiq	15
         02:D163  A9 0F      			lda	#15
15476                        		__call		_set_font_pal.1
         02:D165  20 09 E6   			call	_set_font_pal.1
15477                        	
15478                        		.dbg	line,	"include\init.c", 409; //--------------------------------------------------------------------------------------//
15479                        	
15480                        		.dbg	line,	"include\init.c", 410; //                                    LOAD TILESET                                      //
15481                        	
15482                        		.dbg	line,	"include\init.c", 411; //--------------------------------------------------------------------------------------//
15483                        	
15484                        		.dbg	line,	"include\init.c", 413; load_vram( 0x1000, tileset_HUD, SIZEOF(tileset_HUD) >> 1 );
15485                        		__st.wmiq	4096, _di
         02:D168  64 F0      			stz.l	_di
         02:D16A  A9 10      			lda.h	#4096
         02:D16C  85 F1      			sta.h	_di
15486                        		__farptr	_tileset_HUD, _bp_bank, _bp
         02:D16E  A9 A0      			lda.l	#$6000 + ($1FFF & (_tileset_HUD))
         02:D170  85 EC      			sta.l	_bp
         02:D172  A9 69      			lda.h	#$6000 + ($1FFF & (_tileset_HUD))
         02:D174  85 ED      			sta.h	_bp
         02:D176  A9 0B      			lda	#bank(_tileset_HUD)
         02:D178  85 02      			sta	_bp_bank
15487                        		__ld.wi		___sizeof__tileset_HUD
         02:D17A  A9 60      			lda.l	#___sizeof__tileset_HUD
         02:D17C  A0 06      			ldy.h	#___sizeof__tileset_HUD
15488                        		__lsr.wi	1
         02:D17E  42         			say
         02:D17F  4A         			lsr	a
         02:D180  42         			say
         02:D181  6A         			ror	a
15489                        		__st.wmq	_ax
         02:D182  85 F8      			sta.l	_ax
         02:D184  84 F9      			sty.h	_ax
15490                        		 _load_vram.3
         02:D186  82         			clx				; Offset to PCE VDC.
         02:D187  20 4F FF   			call	load_vram_x
15491                        	
15492                        		.dbg	line,	"include\init.c", 416; //--------------------------------------------------------------------------------------//
15493                        	
15494                        		.dbg	line,	"include\init.c", 417; //                                 LOAD LIFEBAR TILES                                   //
15495                        	
15496                        		.dbg	line,	"include\init.c", 418; //--------------------------------------------------------------------------------------//
15497                        	
15498                        		.dbg	line,	"include\init.c", 420; load_vram( LIFEBAR_1_VRAM_ADR, tileset_LIFE_RED, SIZEOF(tileset_LIFE_RED) >> 1 );
15499                        		__st.wmiq	4096, _di
         02:D18A  64 F0      			stz.l	_di
         02:D18C  A9 10      			lda.h	#4096
         02:D18E  85 F1      			sta.h	_di
15500                        		__farptr	_tileset_LIFE_RED, _bp_bank, _bp
         02:D190  A9 60      			lda.l	#$6000 + ($1FFF & (_tileset_LIFE_RED))
         02:D192  85 EC      			sta.l	_bp
         02:D194  A9 65      			lda.h	#$6000 + ($1FFF & (_tileset_LIFE_RED))
         02:D196  85 ED      			sta.h	_bp
         02:D198  A9 05      			lda	#bank(_tileset_LIFE_RED)
         02:D19A  85 02      			sta	_bp_bank
15501                        		__ld.wi		___sizeof__tileset_LIFE_RED
         02:D19C  A9 40      			lda.l	#___sizeof__tileset_LIFE_RED
         02:D19E  A0 00      			ldy.h	#___sizeof__tileset_LIFE_RED
15502                        		__lsr.wi	1
         02:D1A0  42         			say
         02:D1A1  4A         			lsr	a
         02:D1A2  42         			say
         02:D1A3  6A         			ror	a
15503                        		__st.wmq	_ax
         02:D1A4  85 F8      			sta.l	_ax
         02:D1A6  84 F9      			sty.h	_ax
15504                        		 _load_vram.3
         02:D1A8  82         			clx				; Offset to PCE VDC.
         02:D1A9  20 4F FF   			call	load_vram_x
15505                        	
15506                        		.dbg	line,	"include\init.c", 421; load_vram( LIFEBAR_2_VRAM_ADR, tileset_LIFE_ORANGE, SIZEOF(tileset_LIFE_ORANGE) >> 1 );
15507                        		__st.wmiq	4128, _di
         02:D1AC  A9 20      			lda.l	#4128
         02:D1AE  85 F0      			sta.l	_di
         02:D1B0  A9 10      			lda.h	#4128
         02:D1B2  85 F1      			sta.h	_di
15508                        		__farptr	_tileset_LIFE_ORANGE, _bp_bank, _bp
         02:D1B4  A9 A0      			lda.l	#$6000 + ($1FFF & (_tileset_LIFE_ORANGE))
         02:D1B6  85 EC      			sta.l	_bp
         02:D1B8  A9 65      			lda.h	#$6000 + ($1FFF & (_tileset_LIFE_ORANGE))
         02:D1BA  85 ED      			sta.h	_bp
         02:D1BC  A9 05      			lda	#bank(_tileset_LIFE_ORANGE)
         02:D1BE  85 02      			sta	_bp_bank
15509                        		__ld.wi		___sizeof__tileset_LIFE_ORANGE
         02:D1C0  A9 40      			lda.l	#___sizeof__tileset_LIFE_ORANGE
         02:D1C2  A0 00      			ldy.h	#___sizeof__tileset_LIFE_ORANGE
15510                        		__lsr.wi	1
         02:D1C4  42         			say
         02:D1C5  4A         			lsr	a
         02:D1C6  42         			say
         02:D1C7  6A         			ror	a
15511                        		__st.wmq	_ax
         02:D1C8  85 F8      			sta.l	_ax
         02:D1CA  84 F9      			sty.h	_ax
15512                        		 _load_vram.3
         02:D1CC  82         			clx				; Offset to PCE VDC.
         02:D1CD  20 4F FF   			call	load_vram_x
15513                        	
15514                        		.dbg	line,	"include\init.c", 422; load_vram( LIFEBAR_3_VRAM_ADR, tileset_LIFE_YELLOW, SIZEOF(tileset_LIFE_YELLOW) >> 1 );
15515                        		__st.wmiq	4160, _di
         02:D1D0  A9 40      			lda.l	#4160
         02:D1D2  85 F0      			sta.l	_di
         02:D1D4  A9 10      			lda.h	#4160
         02:D1D6  85 F1      			sta.h	_di
15516                        		__farptr	_tileset_LIFE_YELLOW, _bp_bank, _bp
         02:D1D8  A9 E0      			lda.l	#$6000 + ($1FFF & (_tileset_LIFE_YELLOW))
         02:D1DA  85 EC      			sta.l	_bp
         02:D1DC  A9 65      			lda.h	#$6000 + ($1FFF & (_tileset_LIFE_YELLOW))
         02:D1DE  85 ED      			sta.h	_bp
         02:D1E0  A9 05      			lda	#bank(_tileset_LIFE_YELLOW)
         02:D1E2  85 02      			sta	_bp_bank
15517                        		__ld.wi		___sizeof__tileset_LIFE_YELLOW
         02:D1E4  A9 40      			lda.l	#___sizeof__tileset_LIFE_YELLOW
         02:D1E6  A0 00      			ldy.h	#___sizeof__tileset_LIFE_YELLOW
15518                        		__lsr.wi	1
         02:D1E8  42         			say
         02:D1E9  4A         			lsr	a
         02:D1EA  42         			say
         02:D1EB  6A         			ror	a
15519                        		__st.wmq	_ax
         02:D1EC  85 F8      			sta.l	_ax
         02:D1EE  84 F9      			sty.h	_ax
15520                        		 _load_vram.3
         02:D1F0  82         			clx				; Offset to PCE VDC.
         02:D1F1  20 4F FF   			call	load_vram_x
15521                        	
15522                        		.dbg	line,	"include\init.c", 423; load_vram( LIFEBAR_4_VRAM_ADR, tileset_LIFE_YELLOW, SIZEOF(tileset_LIFE_YELLOW) >> 1 );
15523                        		__st.wmiq	4192, _di
         02:D1F4  A9 60      			lda.l	#4192
         02:D1F6  85 F0      			sta.l	_di
         02:D1F8  A9 10      			lda.h	#4192
         02:D1FA  85 F1      			sta.h	_di
15524                        		__farptr	_tileset_LIFE_YELLOW, _bp_bank, _bp
         02:D1FC  A9 E0      			lda.l	#$6000 + ($1FFF & (_tileset_LIFE_YELLOW))
         02:D1FE  85 EC      			sta.l	_bp
         02:D200  A9 65      			lda.h	#$6000 + ($1FFF & (_tileset_LIFE_YELLOW))
         02:D202  85 ED      			sta.h	_bp
         02:D204  A9 05      			lda	#bank(_tileset_LIFE_YELLOW)
         02:D206  85 02      			sta	_bp_bank
15525                        		__ld.wi		___sizeof__tileset_LIFE_YELLOW
         02:D208  A9 40      			lda.l	#___sizeof__tileset_LIFE_YELLOW
         02:D20A  A0 00      			ldy.h	#___sizeof__tileset_LIFE_YELLOW
15526                        		__lsr.wi	1
         02:D20C  42         			say
         02:D20D  4A         			lsr	a
         02:D20E  42         			say
         02:D20F  6A         			ror	a
15527                        		__st.wmq	_ax
         02:D210  85 F8      			sta.l	_ax
         02:D212  84 F9      			sty.h	_ax
15528                        		 _load_vram.3
         02:D214  82         			clx				; Offset to PCE VDC.
         02:D215  20 4F FF   			call	load_vram_x
15529                        	
15530                        		.dbg	line,	"include\init.c", 424; load_vram( LIFEBAR_5_VRAM_ADR, tileset_LIFE_EMPTY, SIZEOF(tileset_LIFE_EMPTY) >> 1 );
15531                        		__st.wmiq	4224, _di
         02:D218  A9 80      			lda.l	#4224
         02:D21A  85 F0      			sta.l	_di
         02:D21C  A9 10      			lda.h	#4224
         02:D21E  85 F1      			sta.h	_di
15532                        		__farptr	_tileset_LIFE_EMPTY, _bp_bank, _bp
         02:D220  A9 20      			lda.l	#$6000 + ($1FFF & (_tileset_LIFE_EMPTY))
         02:D222  85 EC      			sta.l	_bp
         02:D224  A9 66      			lda.h	#$6000 + ($1FFF & (_tileset_LIFE_EMPTY))
         02:D226  85 ED      			sta.h	_bp
         02:D228  A9 05      			lda	#bank(_tileset_LIFE_EMPTY)
         02:D22A  85 02      			sta	_bp_bank
15533                        		__ld.wi		___sizeof__tileset_LIFE_EMPTY
         02:D22C  A9 40      			lda.l	#___sizeof__tileset_LIFE_EMPTY
         02:D22E  A0 00      			ldy.h	#___sizeof__tileset_LIFE_EMPTY
15534                        		__lsr.wi	1
         02:D230  42         			say
         02:D231  4A         			lsr	a
         02:D232  42         			say
         02:D233  6A         			ror	a
15535                        		__st.wmq	_ax
         02:D234  85 F8      			sta.l	_ax
         02:D236  84 F9      			sty.h	_ax
15536                        		 _load_vram.3
         02:D238  82         			clx				; Offset to PCE VDC.
         02:D239  20 4F FF   			call	load_vram_x
15537                        	
15538                        		.dbg	line,	"include\init.c", 427; //--------------------------------------------------------------------------------------//
15539                        	
15540                        		.dbg	line,	"include\init.c", 428; //                               LOAD WEAPON + ARMOR TILES                              //
15541                        	
15542                        		.dbg	line,	"include\init.c", 429; //--------------------------------------------------------------------------------------//
15543                        	
15544                        		.dbg	line,	"include\init.c", 431; if(weapon_level == 1)
15545                        		__ld.umq	_weapon_level
         02:D23C  AD 25 23   			lda	_weapon_level
15546                        		__equ_b.uiq	1
         02:D23F  C9 01      			cmp	#1
         02:D241  F0 01      			beq	!+
         02:D243  18         			clc
         02:D244             	!:
15547                        		__bfalse	.LL669
         02:D244  90 27      			bcc	.LL669
15548                        	
15549                        		.dbg	line,	"include\init.c", 432; {
15550                        	
15551                        		.dbg	line,	"include\init.c", 433; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_1, SIZEOF(tileset_WEAPON_1) >> 1 );
15552                        		__st.wmiq	4256, _di
         02:D246  A9 A0      			lda.l	#4256
         02:D248  85 F0      			sta.l	_di
         02:D24A  A9 10      			lda.h	#4256
         02:D24C  85 F1      			sta.h	_di
15553                        		__farptr	_tileset_WEAPON_1, _bp_bank, _bp
         02:D24E  A9 60      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_1))
         02:D250  85 EC      			sta.l	_bp
         02:D252  A9 68      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_1))
         02:D254  85 ED      			sta.h	_bp
         02:D256  A9 05      			lda	#bank(_tileset_WEAPON_1)
         02:D258  85 02      			sta	_bp_bank
15554                        		__ld.wi		___sizeof__tileset_WEAPON_1
         02:D25A  A9 80      			lda.l	#___sizeof__tileset_WEAPON_1
         02:D25C  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_1
15555                        		__lsr.wi	1
         02:D25E  42         			say
         02:D25F  4A         			lsr	a
         02:D260  42         			say
         02:D261  6A         			ror	a
15556                        		__st.wmq	_ax
         02:D262  85 F8      			sta.l	_ax
         02:D264  84 F9      			sty.h	_ax
15557                        		 _load_vram.3
         02:D266  82         			clx				; Offset to PCE VDC.
         02:D267  20 4F FF   			call	load_vram_x
15558                        	
15559                        		.dbg	line,	"include\init.c", 434; }
15560                        	
15561                        		.dbg	line,	"include\init.c", 436; else if(weapon_level == 2)
15562                        		__bra		.LL670
         02:D26A  4C 2C D3   			bra	.LL670
15563    02:D26D             	.LL669:
15564                        		__ld.umq	_weapon_level
         02:D26D  AD 25 23   			lda	_weapon_level
15565                        		__equ_b.uiq	2
         02:D270  C9 02      			cmp	#2
         02:D272  F0 01      			beq	!+
         02:D274  18         			clc
         02:D275             	!:
15566                        		__bfalse	.LL671
         02:D275  90 27      			bcc	.LL671
15567                        	
15568                        		.dbg	line,	"include\init.c", 437; {
15569                        	
15570                        		.dbg	line,	"include\init.c", 438; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_2, SIZEOF(tileset_WEAPON_2) >> 1 );
15571                        		__st.wmiq	4256, _di
         02:D277  A9 A0      			lda.l	#4256
         02:D279  85 F0      			sta.l	_di
         02:D27B  A9 10      			lda.h	#4256
         02:D27D  85 F1      			sta.h	_di
15572                        		__farptr	_tileset_WEAPON_2, _bp_bank, _bp
         02:D27F  A9 E0      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_2))
         02:D281  85 EC      			sta.l	_bp
         02:D283  A9 68      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_2))
         02:D285  85 ED      			sta.h	_bp
         02:D287  A9 05      			lda	#bank(_tileset_WEAPON_2)
         02:D289  85 02      			sta	_bp_bank
15573                        		__ld.wi		___sizeof__tileset_WEAPON_2
         02:D28B  A9 80      			lda.l	#___sizeof__tileset_WEAPON_2
         02:D28D  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_2
15574                        		__lsr.wi	1
         02:D28F  42         			say
         02:D290  4A         			lsr	a
         02:D291  42         			say
         02:D292  6A         			ror	a
15575                        		__st.wmq	_ax
         02:D293  85 F8      			sta.l	_ax
         02:D295  84 F9      			sty.h	_ax
15576                        		 _load_vram.3
         02:D297  82         			clx				; Offset to PCE VDC.
         02:D298  20 4F FF   			call	load_vram_x
15577                        	
15578                        		.dbg	line,	"include\init.c", 439; }
15579                        	
15580                        		.dbg	line,	"include\init.c", 441; else if(weapon_level == 3)
15581                        		__bra		.LL672
         02:D29B  4C 2C D3   			bra	.LL672
15582    02:D29E             	.LL671:
15583                        		__ld.umq	_weapon_level
         02:D29E  AD 25 23   			lda	_weapon_level
15584                        		__equ_b.uiq	3
         02:D2A1  C9 03      			cmp	#3
         02:D2A3  F0 01      			beq	!+
         02:D2A5  18         			clc
         02:D2A6             	!:
15585                        		__bfalse	.LL673
         02:D2A6  90 26      			bcc	.LL673
15586                        	
15587                        		.dbg	line,	"include\init.c", 442; {
15588                        	
15589                        		.dbg	line,	"include\init.c", 443; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_4, SIZEOF(tileset_WEAPON_4) >> 1 );
15590                        		__st.wmiq	4256, _di
         02:D2A8  A9 A0      			lda.l	#4256
         02:D2AA  85 F0      			sta.l	_di
         02:D2AC  A9 10      			lda.h	#4256
         02:D2AE  85 F1      			sta.h	_di
15591                        		__farptr	_tileset_WEAPON_4, _bp_bank, _bp
         02:D2B0  A9 60      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_4))
         02:D2B2  85 EC      			sta.l	_bp
         02:D2B4  A9 69      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_4))
         02:D2B6  85 ED      			sta.h	_bp
         02:D2B8  A9 05      			lda	#bank(_tileset_WEAPON_4)
         02:D2BA  85 02      			sta	_bp_bank
15592                        		__ld.wi		___sizeof__tileset_WEAPON_4
         02:D2BC  A9 80      			lda.l	#___sizeof__tileset_WEAPON_4
         02:D2BE  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_4
15593                        		__lsr.wi	1
         02:D2C0  42         			say
         02:D2C1  4A         			lsr	a
         02:D2C2  42         			say
         02:D2C3  6A         			ror	a
15594                        		__st.wmq	_ax
         02:D2C4  85 F8      			sta.l	_ax
         02:D2C6  84 F9      			sty.h	_ax
15595                        		 _load_vram.3
         02:D2C8  82         			clx				; Offset to PCE VDC.
         02:D2C9  20 4F FF   			call	load_vram_x
15596                        	
15597                        		.dbg	line,	"include\init.c", 444; }
15598                        	
15599                        		.dbg	line,	"include\init.c", 446; else if(weapon_level == 4)
15600                        		__bra		.LL674
         02:D2CC  80 5E      			bra	.LL674
15601    02:D2CE             	.LL673:
15602                        		__ld.umq	_weapon_level
         02:D2CE  AD 25 23   			lda	_weapon_level
15603                        		__equ_b.uiq	4
         02:D2D1  C9 04      			cmp	#4
         02:D2D3  F0 01      			beq	!+
         02:D2D5  18         			clc
         02:D2D6             	!:
15604                        		__bfalse	.LL675
         02:D2D6  90 26      			bcc	.LL675
15605                        	
15606                        		.dbg	line,	"include\init.c", 447; {
15607                        	
15608                        		.dbg	line,	"include\init.c", 448; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_5, SIZEOF(tileset_WEAPON_5) >> 1 );
15609                        		__st.wmiq	4256, _di
         02:D2D8  A9 A0      			lda.l	#4256
         02:D2DA  85 F0      			sta.l	_di
         02:D2DC  A9 10      			lda.h	#4256
         02:D2DE  85 F1      			sta.h	_di
15610                        		__farptr	_tileset_WEAPON_5, _bp_bank, _bp
         02:D2E0  A9 E0      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_5))
         02:D2E2  85 EC      			sta.l	_bp
         02:D2E4  A9 69      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_5))
         02:D2E6  85 ED      			sta.h	_bp
         02:D2E8  A9 05      			lda	#bank(_tileset_WEAPON_5)
         02:D2EA  85 02      			sta	_bp_bank
15611                        		__ld.wi		___sizeof__tileset_WEAPON_5
         02:D2EC  A9 80      			lda.l	#___sizeof__tileset_WEAPON_5
         02:D2EE  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_5
15612                        		__lsr.wi	1
         02:D2F0  42         			say
         02:D2F1  4A         			lsr	a
         02:D2F2  42         			say
         02:D2F3  6A         			ror	a
15613                        		__st.wmq	_ax
         02:D2F4  85 F8      			sta.l	_ax
         02:D2F6  84 F9      			sty.h	_ax
15614                        		 _load_vram.3
         02:D2F8  82         			clx				; Offset to PCE VDC.
         02:D2F9  20 4F FF   			call	load_vram_x
15615                        	
15616                        		.dbg	line,	"include\init.c", 449; }
15617                        	
15618                        		.dbg	line,	"include\init.c", 451; else if(weapon_level == 5)
15619                        		__bra		.LL676
         02:D2FC  80 2E      			bra	.LL676
15620    02:D2FE             	.LL675:
15621                        		__ld.umq	_weapon_level
         02:D2FE  AD 25 23   			lda	_weapon_level
15622                        		__equ_b.uiq	5
         02:D301  C9 05      			cmp	#5
         02:D303  F0 01      			beq	!+
         02:D305  18         			clc
         02:D306             	!:
15623                        		__bfalse	.LL677
         02:D306  90 24      			bcc	.LL677
15624                        	
15625                        		.dbg	line,	"include\init.c", 452; {
15626                        	
15627                        		.dbg	line,	"include\init.c", 453; load_vram( WEAPON_ICON_VRAM_ADR, tileset_WEAPON_8, SIZEOF(tileset_WEAPON_8) >> 1 );
15628                        		__st.wmiq	4256, _di
         02:D308  A9 A0      			lda.l	#4256
         02:D30A  85 F0      			sta.l	_di
         02:D30C  A9 10      			lda.h	#4256
         02:D30E  85 F1      			sta.h	_di
15629                        		__farptr	_tileset_WEAPON_8, _bp_bank, _bp
         02:D310  A9 60      			lda.l	#$6000 + ($1FFF & (_tileset_WEAPON_8))
         02:D312  85 EC      			sta.l	_bp
         02:D314  A9 6A      			lda.h	#$6000 + ($1FFF & (_tileset_WEAPON_8))
         02:D316  85 ED      			sta.h	_bp
         02:D318  A9 05      			lda	#bank(_tileset_WEAPON_8)
         02:D31A  85 02      			sta	_bp_bank
15630                        		__ld.wi		___sizeof__tileset_WEAPON_8
         02:D31C  A9 80      			lda.l	#___sizeof__tileset_WEAPON_8
         02:D31E  A0 00      			ldy.h	#___sizeof__tileset_WEAPON_8
15631                        		__lsr.wi	1
         02:D320  42         			say
         02:D321  4A         			lsr	a
         02:D322  42         			say
         02:D323  6A         			ror	a
15632                        		__st.wmq	_ax
         02:D324  85 F8      			sta.l	_ax
         02:D326  84 F9      			sty.h	_ax
15633                        		 _load_vram.3
         02:D328  82         			clx				; Offset to PCE VDC.
         02:D329  20 4F FF   			call	load_vram_x
15634                        	
15635                        		.dbg	line,	"include\init.c", 454; }
15636                        	
15637                        		.dbg	line,	"include\init.c", 459; if(armor_level == 1)
15638    02:D32C             	.LL677:
15639    02:D32C             	.LL676:
15640    02:D32C             	.LL674:
15641    02:D32C             	.LL672:
15642    02:D32C             	.LL670:
15643                        		__ld.umq	_armor_level
         02:D32C  AD 24 23   			lda	_armor_level
15644                        		__equ_b.uiq	1
         02:D32F  C9 01      			cmp	#1
         02:D331  F0 01      			beq	!+
         02:D333  18         			clc
         02:D334             	!:
15645                        		__bfalse	.LL678
         02:D334  90 27      			bcc	.LL678
15646                        	
15647                        		.dbg	line,	"include\init.c", 460; {
15648                        	
15649                        		.dbg	line,	"include\init.c", 461; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_1, SIZEOF(tileset_ARMOR_1) >> 1 );
15650                        		__st.wmiq	4320, _di
         02:D336  A9 E0      			lda.l	#4320
         02:D338  85 F0      			sta.l	_di
         02:D33A  A9 10      			lda.h	#4320
         02:D33C  85 F1      			sta.h	_di
15651                        		__farptr	_tileset_ARMOR_1, _bp_bank, _bp
         02:D33E  A9 60      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_1))
         02:D340  85 EC      			sta.l	_bp
         02:D342  A9 66      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_1))
         02:D344  85 ED      			sta.h	_bp
         02:D346  A9 05      			lda	#bank(_tileset_ARMOR_1)
         02:D348  85 02      			sta	_bp_bank
15652                        		__ld.wi		___sizeof__tileset_ARMOR_1
         02:D34A  A9 80      			lda.l	#___sizeof__tileset_ARMOR_1
         02:D34C  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_1
15653                        		__lsr.wi	1
         02:D34E  42         			say
         02:D34F  4A         			lsr	a
         02:D350  42         			say
         02:D351  6A         			ror	a
15654                        		__st.wmq	_ax
         02:D352  85 F8      			sta.l	_ax
         02:D354  84 F9      			sty.h	_ax
15655                        		 _load_vram.3
         02:D356  82         			clx				; Offset to PCE VDC.
         02:D357  20 4F FF   			call	load_vram_x
15656                        	
15657                        		.dbg	line,	"include\init.c", 462; }
15658                        	
15659                        		.dbg	line,	"include\init.c", 464; else if(armor_level == 2)
15660                        		__bra		.LL679
         02:D35A  4C EB D3   			bra	.LL679
15661    02:D35D             	.LL678:
15662                        		__ld.umq	_armor_level
         02:D35D  AD 24 23   			lda	_armor_level
15663                        		__equ_b.uiq	2
         02:D360  C9 02      			cmp	#2
         02:D362  F0 01      			beq	!+
         02:D364  18         			clc
         02:D365             	!:
15664                        		__bfalse	.LL680
         02:D365  90 26      			bcc	.LL680
15665                        	
15666                        		.dbg	line,	"include\init.c", 465; {
15667                        	
15668                        		.dbg	line,	"include\init.c", 466; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_2, SIZEOF(tileset_ARMOR_2) >> 1 );
15669                        		__st.wmiq	4320, _di
         02:D367  A9 E0      			lda.l	#4320
         02:D369  85 F0      			sta.l	_di
         02:D36B  A9 10      			lda.h	#4320
         02:D36D  85 F1      			sta.h	_di
15670                        		__farptr	_tileset_ARMOR_2, _bp_bank, _bp
         02:D36F  A9 E0      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_2))
         02:D371  85 EC      			sta.l	_bp
         02:D373  A9 66      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_2))
         02:D375  85 ED      			sta.h	_bp
         02:D377  A9 05      			lda	#bank(_tileset_ARMOR_2)
         02:D379  85 02      			sta	_bp_bank
15671                        		__ld.wi		___sizeof__tileset_ARMOR_2
         02:D37B  A9 80      			lda.l	#___sizeof__tileset_ARMOR_2
         02:D37D  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_2
15672                        		__lsr.wi	1
         02:D37F  42         			say
         02:D380  4A         			lsr	a
         02:D381  42         			say
         02:D382  6A         			ror	a
15673                        		__st.wmq	_ax
         02:D383  85 F8      			sta.l	_ax
         02:D385  84 F9      			sty.h	_ax
15674                        		 _load_vram.3
         02:D387  82         			clx				; Offset to PCE VDC.
         02:D388  20 4F FF   			call	load_vram_x
15675                        	
15676                        		.dbg	line,	"include\init.c", 467; }
15677                        	
15678                        		.dbg	line,	"include\init.c", 469; else if(armor_level == 3)
15679                        		__bra		.LL681
         02:D38B  80 5E      			bra	.LL681
15680    02:D38D             	.LL680:
15681                        		__ld.umq	_armor_level
         02:D38D  AD 24 23   			lda	_armor_level
15682                        		__equ_b.uiq	3
         02:D390  C9 03      			cmp	#3
         02:D392  F0 01      			beq	!+
         02:D394  18         			clc
         02:D395             	!:
15683                        		__bfalse	.LL682
         02:D395  90 26      			bcc	.LL682
15684                        	
15685                        		.dbg	line,	"include\init.c", 470; {
15686                        	
15687                        		.dbg	line,	"include\init.c", 471; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_4, SIZEOF(tileset_ARMOR_4) >> 1 );
15688                        		__st.wmiq	4320, _di
         02:D397  A9 E0      			lda.l	#4320
         02:D399  85 F0      			sta.l	_di
         02:D39B  A9 10      			lda.h	#4320
         02:D39D  85 F1      			sta.h	_di
15689                        		__farptr	_tileset_ARMOR_4, _bp_bank, _bp
         02:D39F  A9 60      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_4))
         02:D3A1  85 EC      			sta.l	_bp
         02:D3A3  A9 67      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_4))
         02:D3A5  85 ED      			sta.h	_bp
         02:D3A7  A9 05      			lda	#bank(_tileset_ARMOR_4)
         02:D3A9  85 02      			sta	_bp_bank
15690                        		__ld.wi		___sizeof__tileset_ARMOR_4
         02:D3AB  A9 80      			lda.l	#___sizeof__tileset_ARMOR_4
         02:D3AD  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_4
15691                        		__lsr.wi	1
         02:D3AF  42         			say
         02:D3B0  4A         			lsr	a
         02:D3B1  42         			say
         02:D3B2  6A         			ror	a
15692                        		__st.wmq	_ax
         02:D3B3  85 F8      			sta.l	_ax
         02:D3B5  84 F9      			sty.h	_ax
15693                        		 _load_vram.3
         02:D3B7  82         			clx				; Offset to PCE VDC.
         02:D3B8  20 4F FF   			call	load_vram_x
15694                        	
15695                        		.dbg	line,	"include\init.c", 472; }
15696                        	
15697                        		.dbg	line,	"include\init.c", 474; else if(armor_level == 4)
15698                        		__bra		.LL683
         02:D3BB  80 2E      			bra	.LL683
15699    02:D3BD             	.LL682:
15700                        		__ld.umq	_armor_level
         02:D3BD  AD 24 23   			lda	_armor_level
15701                        		__equ_b.uiq	4
         02:D3C0  C9 04      			cmp	#4
         02:D3C2  F0 01      			beq	!+
         02:D3C4  18         			clc
         02:D3C5             	!:
15702                        		__bfalse	.LL684
         02:D3C5  90 24      			bcc	.LL684
15703                        	
15704                        		.dbg	line,	"include\init.c", 475; {
15705                        	
15706                        		.dbg	line,	"include\init.c", 476; load_vram( ARMOR_VRAM_ADR, tileset_ARMOR_8, SIZEOF(tileset_ARMOR_8) >> 1 );
15707                        		__st.wmiq	4320, _di
         02:D3C7  A9 E0      			lda.l	#4320
         02:D3C9  85 F0      			sta.l	_di
         02:D3CB  A9 10      			lda.h	#4320
         02:D3CD  85 F1      			sta.h	_di
15708                        		__farptr	_tileset_ARMOR_8, _bp_bank, _bp
         02:D3CF  A9 E0      			lda.l	#$6000 + ($1FFF & (_tileset_ARMOR_8))
         02:D3D1  85 EC      			sta.l	_bp
         02:D3D3  A9 67      			lda.h	#$6000 + ($1FFF & (_tileset_ARMOR_8))
         02:D3D5  85 ED      			sta.h	_bp
         02:D3D7  A9 05      			lda	#bank(_tileset_ARMOR_8)
         02:D3D9  85 02      			sta	_bp_bank
15709                        		__ld.wi		___sizeof__tileset_ARMOR_8
         02:D3DB  A9 80      			lda.l	#___sizeof__tileset_ARMOR_8
         02:D3DD  A0 00      			ldy.h	#___sizeof__tileset_ARMOR_8
15710                        		__lsr.wi	1
         02:D3DF  42         			say
         02:D3E0  4A         			lsr	a
         02:D3E1  42         			say
         02:D3E2  6A         			ror	a
15711                        		__st.wmq	_ax
         02:D3E3  85 F8      			sta.l	_ax
         02:D3E5  84 F9      			sty.h	_ax
15712                        		 _load_vram.3
         02:D3E7  82         			clx				; Offset to PCE VDC.
         02:D3E8  20 4F FF   			call	load_vram_x
15713                        	
15714                        		.dbg	line,	"include\init.c", 477; }
15715                        	
15716                        		.dbg	line,	"include\init.c", 482; //--------------------------------------------------------------------------------------//
15717                        	
15718                        		.dbg	line,	"include\init.c", 483; //                                     SET MULTIMAP                                     //
15719                        	
15720                        		.dbg	line,	"include\init.c", 484; //--------------------------------------------------------------------------------------//
15721                        	
15722                        		.dbg	line,	"include\init.c", 486; // multimap is 2 screens wide //
15723                        	
15724                        		.dbg	line,	"include\init.c", 487; set_multimap( multimap_LV1_BG_A , 5 );
15725    02:D3EB             	.LL684:
15726    02:D3EB             	.LL683:
15727    02:D3EB             	.LL681:
15728    02:D3EB             	.LL679:
15729                        		__farptr	_multimap_LV1_BG_A, vdc_scr_bank, vdc_scr_addr
         02:D3EB  A9 00      			lda.l	#$6000 + ($1FFF & (_multimap_LV1_BG_A))
         02:D3ED  8D BE 2B   			sta.l	vdc_scr_addr
         02:D3F0  A9 68      			lda.h	#$6000 + ($1FFF & (_multimap_LV1_BG_A))
         02:D3F2  8D BF 2B   			sta.h	vdc_scr_addr
         02:D3F5  A9 0D      			lda	#bank(_multimap_LV1_BG_A)
         02:D3F7  8D C0 2B   			sta	vdc_scr_bank
15730                        		__st.umiq	5, vdc_map_scrn_w
         02:D3FA  A9 05      			lda.l	#5
         02:D3FC  8D 7F 26   			sta	vdc_map_scrn_w
15731                        		 _set_multimap.2
         02:D3FF  AD 77 26   			lda	vdc_bat_width
         02:D402  4A         			lsr	a
         02:D403  8D 7E 26   			sta	vdc_map_line_w
15732                        	
15733                        		.dbg	line,	"include\init.c", 490; //--------------------------------------------------------------------------------------//
15734                        	
15735                        		.dbg	line,	"include\init.c", 491; //                                    DRAW TILEMAP                                      //
15736                        	
15737                        		.dbg	line,	"include\init.c", 492; //--------------------------------------------------------------------------------------//
15738                        	
15739                        		.dbg	line,	"include\init.c", 494; // The blkmap is drawn using global variables for the top-left coordinate
15740                        	
15741                        		.dbg	line,	"include\init.c", 495; // in pixels, and the draw width and height in terms of 8x8 characters.
15742                        	
15743                        		.dbg	line,	"include\init.c", 497; vdc_map_pxl_x = 0;
15744                        		__st.wmiq	0, _vdc_map_pxl_x
         02:D406  9C 80 26   			stz.l	_vdc_map_pxl_x
         02:D409  9C 81 26   			stz.h	_vdc_map_pxl_x
15745                        	
15746                        		.dbg	line,	"include\init.c", 498; vdc_map_pxl_y = 0;
15747                        		__st.wmiq	0, _vdc_map_pxl_y
         02:D40C  9C 82 26   			stz.l	_vdc_map_pxl_y
         02:D40F  9C 83 26   			stz.h	_vdc_map_pxl_y
15748                        	
15749                        		.dbg	line,	"include\init.c", 500; vdc_map_draw_w = 32;
15750                        		__st.umiq	32, _vdc_map_draw_w
         02:D412  A9 20      			lda.l	#32
         02:D414  8D 7C 26   			sta	_vdc_map_draw_w
15751                        	
15752                        		.dbg	line,	"include\init.c", 501; vdc_map_draw_h = 28;
15753                        		__st.umiq	28, _vdc_map_draw_h
         02:D417  A9 1C      			lda.l	#28
         02:D419  8D 7D 26   			sta	_vdc_map_draw_h
15754                        	
15755                        		.dbg	line,	"include\init.c", 503; draw_map();
15756                        		__call		_draw_map
         02:D41C  20 09 FF   			call	_draw_map
15757                        	
15758                        		.dbg	line,	"include\init.c", 505; display_SCORE();
15759                        		__call		_display_SCORE
         02:D41F  20 FF FE   			call	_display_SCORE
15760                        	
15761                        		.dbg	line,	"include\init.c", 506; display_TIME_LEVEL();
15762                        		__call		_display_TIME_LEVEL
         02:D422  20 F5 FE   			call	_display_TIME_LEVEL
15763                        	
15764                        		.dbg	line,	"include\init.c", 507; display_KEY();
15765                        		__call		_display_KEY
         02:D425  20 8B FF   			call	_display_KEY
15766                        	
15767                        		.dbg	line,	"include\init.c", 508; display_POTION();
15768                        		__call		_display_POTION
         02:D428  20 3B FF   			call	_display_POTION
15769                        	
15770                        		.dbg	line,	"include\init.c", 509; display_ZENNY();
15771                        		__call		_display_ZENNY
         02:D42B  20 45 FF   			call	_display_ZENNY
15772                        	
15773                        		.dbg	line,	"include\init.c", 510; }
15774    02:D42E             	.LL668:
15775                        		__return	0
         02:D42E  4C EF FF   			jmp	leave_proc
15776                        		.dbg	clear
15777                        		.endp
15778                        		.pceas
15779                        	
15780                        		.dbg	line,	"include\init.c", 513; void init_LEVEL()
15781                        		.dbg	line,	"include\init.c", 514; {
15782                        	;***********************
15783                        	;***********************
15784                        	
15785                        		.hucc
15786    17:DAAE             		.proc		_init_LEVEL
15787                        		__enter		_init_LEVEL
15788                        	
15789                        		.dbg	line,	"include\init.c", 515; if(level_id == 1)
15790                        		__ld.umq	_level_id
         17:DAAE  AD 13 23   			lda	_level_id
15791                        		__equ_b.uiq	1
         17:DAB1  C9 01      			cmp	#1
         17:DAB3  F0 01      			beq	!+
         17:DAB5  18         			clc
         17:DAB6             	!:
15792                        		__bfalse	.LL686
         17:DAB6  B0 03 4C A0			bcc	.LL686
         17:DABA  DF          
15793                        	
15794                        		.dbg	line,	"include\init.c", 516; {
15795                        	
15796                        		.dbg	line,	"include\init.c", 517; char i;
15797                        	
15798                        		.dbg	line,	"include\init.c", 518; 
15799                        	
15800                        		.dbg	line,	"include\init.c", 519; // VSYNC //
15801                        	
15802                        		.dbg	line,	"include\init.c", 520; vsync();
15803                        		__call		_vsync
         17:DABB  20 09 E3   			call	_vsync
15804                        	
15805                        		.dbg	line,	"include\init.c", 523; // DISABLE DISPLAY //
15806                        	
15807                        		.dbg	line,	"include\init.c", 524; disp_off();
15808                        		__call		_disp_off
         17:DABE  20 29 E4   			call	_disp_off
15809                        	
15810                        		.dbg	line,	"include\init.c", 527; // SET VDC 1 SCREEN SIZE (IN TILES) - 64x32 = 512x256 PIXELS
15811                        	
15812                        		.dbg	line,	"include\init.c", 528; set_screen_size(SCR_SIZE_64x32);
15813                        		__st.umiq	1, _al
         17:DAC1  A9 01      			lda.l	#1
         17:DAC3  85 F8      			sta	_al
15814                        		__call		_set_screen_size.1
         17:DAC5  20 31 FF   			call	_set_screen_size.1
15815                        	
15816                        		.dbg	line,	"include\init.c", 531; // SET VDC 2 SCREEN SIZE (IN TILES) - 64x32 = 512x256 PIXELS
15817                        	
15818                        		.dbg	line,	"include\init.c", 532; sgx_set_screen_size(SCR_SIZE_64x32);
15819                        		__st.umiq	1, _al
         17:DAC8  A9 01      			lda.l	#1
         17:DACA  85 F8      			sta	_al
15820                        		__call		_sgx_set_screen_size.1
         17:DACC  20 27 FF   			call	_sgx_set_screen_size.1
15821                        	
15822                        		.dbg	line,	"include\init.c", 535; // INIT SPRITE ATTRIBUTE TABLE //
15823                        	
15824                        		.dbg	line,	"include\init.c", 536; //init_satb();
15825                        	
15826                        		.dbg	line,	"include\init.c", 541; //**************************************************************************************//
15827                        	
15828                        		.dbg	line,	"include\init.c", 542; //                                                                                      //
15829                        	
15830                        		.dbg	line,	"include\init.c", 543; //                                      VARIABLES                                       //
15831                        	
15832                        		.dbg	line,	"include\init.c", 544; //                                                                                      //
15833                        	
15834                        		.dbg	line,	"include\init.c", 545; //**************************************************************************************//
15835                        	
15836                        		.dbg	line,	"include\init.c", 547; time_counter = 0;
15837                        		__st.umiq	0, _time_counter
         17:DACF  9C 2C 23   			stz	_time_counter
15838                        	
15839                        		.dbg	line,	"include\init.c", 548; 
15840                        	
15841                        		.dbg	line,	"include\init.c", 549; if(respawn == RESPAWN_SHOP)
15842                        		__ld.umq	_respawn
         17:DAD2  AD 14 23   			lda	_respawn
15843                        		__equ_b.uiq	2
         17:DAD5  C9 02      			cmp	#2
         17:DAD7  F0 01      			beq	!+
         17:DAD9  18         			clc
         17:DADA             	!:
15844                        		__bfalse	.LL687
         17:DADA  90 10      			bcc	.LL687
15845                        	
15846                        		.dbg	line,	"include\init.c", 550; {
15847                        	
15848                        		.dbg	line,	"include\init.c", 551; minutes = minutes_backup;
15849                        		__ld.um		_minutes_backup
         17:DADC  AD 2D 23   			lda	_minutes_backup
         17:DADF  C2         			cly
15850                        		__st.umq	_minutes
         17:DAE0  8D 2A 23   			sta	_minutes
15851                        	
15852                        		.dbg	line,	"include\init.c", 552; seconds = seconds_backup;
15853                        		__ld.um		_seconds_backup
         17:DAE3  AD 2E 23   			lda	_seconds_backup
         17:DAE6  C2         			cly
15854                        		__st.umq	_seconds
         17:DAE7  8D 2B 23   			sta	_seconds
15855                        	
15856                        		.dbg	line,	"include\init.c", 553; }
15857                        	
15858                        		.dbg	line,	"include\init.c", 555; else
15859                        		__bra		.LL688
         17:DAEA  80 0A      			bra	.LL688
15860    17:DAEC             	.LL687:
15861                        	
15862                        		.dbg	line,	"include\init.c", 556; {
15863                        	
15864                        		.dbg	line,	"include\init.c", 557; minutes = 1;
15865                        		__st.umiq	1, _minutes
         17:DAEC  A9 01      			lda.l	#1
         17:DAEE  8D 2A 23   			sta	_minutes
15866                        	
15867                        		.dbg	line,	"include\init.c", 558; seconds = 59;
15868                        		__st.umiq	59, _seconds
         17:DAF1  A9 3B      			lda.l	#59
         17:DAF3  8D 2B 23   			sta	_seconds
15869                        	
15870                        		.dbg	line,	"include\init.c", 559; }
15871    17:DAF6             	.LL688:
15872                        	
15873                        		.dbg	line,	"include\init.c", 561; camera_max_y_position = 768;
15874                        		__st.wmiq	768, _camera_max_y_position
         17:DAF6  9C D8 24   			stz.l	_camera_max_y_position
         17:DAF9  A9 03      			lda.h	#768
         17:DAFB  8D D9 24   			sta.h	_camera_max_y_position
15875                        	
15876                        		.dbg	line,	"include\init.c", 562; jump_max_index = 34;
15877                        		__st.umiq	34, _jump_max_index
         17:DAFE  A9 22      			lda.l	#34
         17:DB00  8D 20 23   			sta	_jump_max_index
15878                        	
15879                        		.dbg	line,	"include\init.c", 563; score = 0;
15880                        		__st.wmiq	0, _score
         17:DB03  9C 30 26   			stz.l	_score
         17:DB06  9C 31 26   			stz.h	_score
15881                        	
15882                        		.dbg	line,	"include\init.c", 564; level_object_number = OBJECT_NUMBER_LV1;
15883                        		__st.umiq	23, _level_object_number
         17:DB09  A9 17      			lda.l	#23
         17:DB0B  8D 30 23   			sta	_level_object_number
15884                        	
15885                        		.dbg	line,	"include\init.c", 565; level_chest_number = CHEST_NUMBER_LV1;
15886                        		__st.umiq	2, _level_chest_number
         17:DB0E  A9 02      			lda.l	#2
         17:DB10  8D 9F 23   			sta	_level_chest_number
15887                        	
15888                        		.dbg	line,	"include\init.c", 566; level_npc_number = NPC_NUMBER_LV1;
15889                        		__st.umiq	2, _level_npc_number
         17:DB13  A9 02      			lda.l	#2
         17:DB15  8D B2 23   			sta	_level_npc_number
15890                        	
15891                        		.dbg	line,	"include\init.c", 567; object_start_index = OBJECT_START_INDEX_LV1;
15892                        		__st.umiq	0, _object_start_index
         17:DB18  9C 2F 23   			stz	_object_start_index
15893                        	
15894                        		.dbg	line,	"include\init.c", 568; chest_start_index = CHEST_START_INDEX_LV1;
15895                        		__st.umiq	23, _chest_start_index
         17:DB1B  A9 17      			lda.l	#23
         17:DB1D  8D 9E 23   			sta	_chest_start_index
15896                        	
15897                        		.dbg	line,	"include\init.c", 569; npc_start_index = NPC_START_INDEX_LV1;
15898                        		__st.umiq	25, _npc_start_index
         17:DB20  A9 19      			lda.l	#25
         17:DB22  8D B1 23   			sta	_npc_start_index
15899                        	
15900                        		.dbg	line,	"include\init.c", 570; jump_ladder = FALSE;
15901                        		__st.umiq	0, _jump_ladder
         17:DB25  9C 1F 23   			stz	_jump_ladder
15902                        	
15903                        		.dbg	line,	"include\init.c", 574; //**************************************************************************************//
15904                        	
15905                        		.dbg	line,	"include\init.c", 575; //                                                                                      //
15906                        	
15907                        		.dbg	line,	"include\init.c", 576; //                                        VDC 2                                         //
15908                        	
15909                        		.dbg	line,	"include\init.c", 577; //                                                                                      //
15910                        	
15911                        		.dbg	line,	"include\init.c", 578; //**************************************************************************************//
15912                        	
15913                        		.dbg	line,	"include\init.c", 580; //--------------------------------------------------------------------------------------//
15914                        	
15915                        		.dbg	line,	"include\init.c", 581; //                                    LOAD TILESET                                      //
15916                        	
15917                        		.dbg	line,	"include\init.c", 582; //--------------------------------------------------------------------------------------//
15918                        	
15919                        		.dbg	line,	"include\init.c", 584; sgx_load_vram( 0x1000, tileset_LV1_BG_B, SIZEOF(tileset_LV1_BG_B) >> 1 );
15920                        		__st.wmiq	4096, _di
         17:DB28  64 F0      			stz.l	_di
         17:DB2A  A9 10      			lda.h	#4096
         17:DB2C  85 F1      			sta.h	_di
15921                        		__farptr	_tileset_LV1_BG_B, _bp_bank, _bp
         17:DB2E  A9 E0      			lda.l	#$6000 + ($1FFF & (_tileset_LV1_BG_B))
         17:DB30  85 EC      			sta.l	_bp
         17:DB32  A9 6A      			lda.h	#$6000 + ($1FFF & (_tileset_LV1_BG_B))
         17:DB34  85 ED      			sta.h	_bp
         17:DB36  A9 05      			lda	#bank(_tileset_LV1_BG_B)
         17:DB38  85 02      			sta	_bp_bank
15922                        		__ld.wi		___sizeof__tileset_LV1_BG_B
         17:DB3A  A9 E0      			lda.l	#___sizeof__tileset_LV1_BG_B
         17:DB3C  A0 72      			ldy.h	#___sizeof__tileset_LV1_BG_B
15923                        		__lsr.wi	1
         17:DB3E  42         			say
         17:DB3F  4A         			lsr	a
         17:DB40  42         			say
         17:DB41  6A         			ror	a
15924                        		__st.wmq	_ax
         17:DB42  85 F8      			sta.l	_ax
         17:DB44  84 F9      			sty.h	_ax
15925                        		 _sgx_load_vram.3
         17:DB46  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         17:DB48  20 4F FF   			call	load_vram_x
15926                        	
15927                        		.dbg	line,	"include\init.c", 587; //--------------------------------------------------------------------------------------//
15928                        	
15929                        		.dbg	line,	"include\init.c", 588; //                               LOAD WALL & DOOR TILES                                 //
15930                        	
15931                        		.dbg	line,	"include\init.c", 589; //--------------------------------------------------------------------------------------//
15932                        	
15933                        		.dbg	line,	"include\init.c", 591; sgx_load_vram( LV1_WALL_VRAM_ADR, tileset_LV1_WALL, SIZEOF(tileset_LV1_WALL) >> 1 );
15934                        		__st.wmiq	4096, _di
         17:DB4B  64 F0      			stz.l	_di
         17:DB4D  A9 10      			lda.h	#4096
         17:DB4F  85 F1      			sta.h	_di
15935                        		__farptr	_tileset_LV1_WALL, _bp_bank, _bp
         17:DB51  A9 60      			lda.l	#$6000 + ($1FFF & (_tileset_LV1_WALL))
         17:DB53  85 EC      			sta.l	_bp
         17:DB55  A9 7D      			lda.h	#$6000 + ($1FFF & (_tileset_LV1_WALL))
         17:DB57  85 ED      			sta.h	_bp
         17:DB59  A9 04      			lda	#bank(_tileset_LV1_WALL)
         17:DB5B  85 02      			sta	_bp_bank
15936                        		__ld.wi		___sizeof__tileset_LV1_WALL
         17:DB5D  A9 00      			lda.l	#___sizeof__tileset_LV1_WALL
         17:DB5F  A0 02      			ldy.h	#___sizeof__tileset_LV1_WALL
15937                        		__lsr.wi	1
         17:DB61  42         			say
         17:DB62  4A         			lsr	a
         17:DB63  42         			say
         17:DB64  6A         			ror	a
15938                        		__st.wmq	_ax
         17:DB65  85 F8      			sta.l	_ax
         17:DB67  84 F9      			sty.h	_ax
15939                        		 _sgx_load_vram.3
         17:DB69  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         17:DB6B  20 4F FF   			call	load_vram_x
15940                        	
15941                        		.dbg	line,	"include\init.c", 592; sgx_load_vram( LV1_DOOR_VRAM_ADR, tileset_LV1_DOOR_OPEN, SIZEOF(tileset_LV1_DOOR_OPEN) >> 1 );
15942                        		__st.wmiq	4352, _di
         17:DB6E  64 F0      			stz.l	_di
         17:DB70  A9 11      			lda.h	#4352
         17:DB72  85 F1      			sta.h	_di
15943                        		__farptr	_tileset_LV1_DOOR_OPEN, _bp_bank, _bp
         17:DB74  A9 60      			lda.l	#$6000 + ($1FFF & (_tileset_LV1_DOOR_OPEN))
         17:DB76  85 EC      			sta.l	_bp
         17:DB78  A9 7F      			lda.h	#$6000 + ($1FFF & (_tileset_LV1_DOOR_OPEN))
         17:DB7A  85 ED      			sta.h	_bp
         17:DB7C  A9 04      			lda	#bank(_tileset_LV1_DOOR_OPEN)
         17:DB7E  85 02      			sta	_bp_bank
15944                        		__ld.wi		___sizeof__tileset_LV1_DOOR_OPEN
         17:DB80  A9 00      			lda.l	#___sizeof__tileset_LV1_DOOR_OPEN
         17:DB82  A0 03      			ldy.h	#___sizeof__tileset_LV1_DOOR_OPEN
15945                        		__lsr.wi	1
         17:DB84  42         			say
         17:DB85  4A         			lsr	a
         17:DB86  42         			say
         17:DB87  6A         			ror	a
15946                        		__st.wmq	_ax
         17:DB88  85 F8      			sta.l	_ax
         17:DB8A  84 F9      			sty.h	_ax
15947                        		 _sgx_load_vram.3
         17:DB8C  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         17:DB8E  20 4F FF   			call	load_vram_x
15948                        	
15949                        		.dbg	line,	"include\init.c", 595; //--------------------------------------------------------------------------------------//
15950                        	
15951                        		.dbg	line,	"include\init.c", 596; //                                     SET MULTIMAP                                     //
15952                        	
15953                        		.dbg	line,	"include\init.c", 597; //--------------------------------------------------------------------------------------//
15954                        	
15955                        		.dbg	line,	"include\init.c", 599; // multimap is 5 screens wide //
15956                        	
15957                        		.dbg	line,	"include\init.c", 600; sgx_set_multimap( multimap_LV1_BG_B , 5 );
15958                        		__farptr	_multimap_LV1_BG_B, sgx_scr_bank, sgx_scr_addr
         17:DB91  A9 00      			lda.l	#$6000 + ($1FFF & (_multimap_LV1_BG_B))
         17:DB93  8D CE 2B   			sta.l	sgx_scr_addr
         17:DB96  A9 69      			lda.h	#$6000 + ($1FFF & (_multimap_LV1_BG_B))
         17:DB98  8D CF 2B   			sta.h	sgx_scr_addr
         17:DB9B  A9 0B      			lda	#bank(_multimap_LV1_BG_B)
         17:DB9D  8D D0 2B   			sta	sgx_scr_bank
15959                        		__st.umiq	5, sgx_map_scrn_w
         17:DBA0  A9 05      			lda.l	#5
         17:DBA2  8D 8F 26   			sta	sgx_map_scrn_w
15960                        		 _sgx_set_multimap.2
         17:DBA5  AD 87 26   			lda	sgx_bat_width
         17:DBA8  4A         			lsr	a
         17:DBA9  8D 8E 26   			sta	sgx_map_line_w
15961                        	
15962                        		.dbg	line,	"include\init.c", 603; //--------------------------------------------------------------------------------------//
15963                        	
15964                        		.dbg	line,	"include\init.c", 604; //                                    DRAW TILEMAP                                      //
15965                        	
15966                        		.dbg	line,	"include\init.c", 605; //--------------------------------------------------------------------------------------//
15967                        	
15968                        		.dbg	line,	"include\init.c", 607; // The blkmap is drawn using global variables for the top-left coordinate
15969                        	
15970                        		.dbg	line,	"include\init.c", 608; // in pixels, and the draw width and height in terms of 8x8 characters.
15971                        	
15972                        		.dbg	line,	"include\init.c", 610; if(respawn == FALSE)
15973                        		__not.um	_respawn
         17:DBAC  AD 14 23   			lda	_respawn
         17:DBAF  18         			clc
         17:DBB0  D0 01      			bne	!+
         17:DBB2  38         			sec
         17:DBB3             	!:
15974                        		__bfalse	.LL689
         17:DBB3  90 12      			bcc	.LL689
15975                        	
15976                        		.dbg	line,	"include\init.c", 611; {
15977                        	
15978                        		.dbg	line,	"include\init.c", 612; sgx_map_pxl_x = 96;
15979                        		__st.wmiq	96, _sgx_map_pxl_x
         17:DBB5  A9 60      			lda.l	#96
         17:DBB7  8D 90 26   			sta.l	_sgx_map_pxl_x
         17:DBBA  9C 91 26   			stz.h	_sgx_map_pxl_x
15980                        	
15981                        		.dbg	line,	"include\init.c", 613; sgx_map_pxl_y = 768;
15982                        		__st.wmiq	768, _sgx_map_pxl_y
         17:DBBD  9C 92 26   			stz.l	_sgx_map_pxl_y
         17:DBC0  A9 03      			lda.h	#768
         17:DBC2  8D 93 26   			sta.h	_sgx_map_pxl_y
15983                        	
15984                        		.dbg	line,	"include\init.c", 614; }
15985                        	
15986                        		.dbg	line,	"include\init.c", 616; else if(respawn == RESPAWN_SHOP)
15987                        		__bra		.LL690
         17:DBC5  80 22      			bra	.LL690
15988    17:DBC7             	.LL689:
15989                        		__ld.umq	_respawn
         17:DBC7  AD 14 23   			lda	_respawn
15990                        		__equ_b.uiq	2
         17:DBCA  C9 02      			cmp	#2
         17:DBCC  F0 01      			beq	!+
         17:DBCE  18         			clc
         17:DBCF             	!:
15991                        		__bfalse	.LL691
         17:DBCF  90 18      			bcc	.LL691
15992                        	
15993                        		.dbg	line,	"include\init.c", 617; {
15994                        	
15995                        		.dbg	line,	"include\init.c", 618; sgx_map_pxl_x = camera_pos_x_backup;
15996                        		__ld.wm		_camera_pos_x_backup
         17:DBD1  AD DA 24   			lda.l	_camera_pos_x_backup
         17:DBD4  AC DB 24   			ldy.h	_camera_pos_x_backup
15997                        		__st.wmq	_sgx_map_pxl_x
         17:DBD7  8D 90 26   			sta.l	_sgx_map_pxl_x
         17:DBDA  8C 91 26   			sty.h	_sgx_map_pxl_x
15998                        	
15999                        		.dbg	line,	"include\init.c", 619; sgx_map_pxl_y = camera_pos_y_backup;
16000                        		__ld.wm		_camera_pos_y_backup
         17:DBDD  AD DC 24   			lda.l	_camera_pos_y_backup
         17:DBE0  AC DD 24   			ldy.h	_camera_pos_y_backup
16001                        		__st.wmq	_sgx_map_pxl_y
         17:DBE3  8D 92 26   			sta.l	_sgx_map_pxl_y
         17:DBE6  8C 93 26   			sty.h	_sgx_map_pxl_y
16002                        	
16003                        		.dbg	line,	"include\init.c", 620; }
16004                        	
16005                        		.dbg	line,	"include\init.c", 623; sgx_map_draw_w = 63;
16006    17:DBE9             	.LL691:
16007    17:DBE9             	.LL690:
16008                        		__st.umiq	63, _sgx_map_draw_w
         17:DBE9  A9 3F      			lda.l	#63
         17:DBEB  8D 8C 26   			sta	_sgx_map_draw_w
16009                        	
16010                        		.dbg	line,	"include\init.c", 624; sgx_map_draw_h = 29;
16011                        		__st.umiq	29, _sgx_map_draw_h
         17:DBEE  A9 1D      			lda.l	#29
         17:DBF0  8D 8D 26   			sta	_sgx_map_draw_h
16012                        	
16013                        		.dbg	line,	"include\init.c", 626; sgx_draw_map();
16014                        		__call		_sgx_draw_map
         17:DBF3  20 EB FE   			call	_sgx_draw_map
16015                        	
16016                        		.dbg	line,	"include\init.c", 631; //**************************************************************************************//
16017                        	
16018                        		.dbg	line,	"include\init.c", 632; //                                                                                      //
16019                        	
16020                        		.dbg	line,	"include\init.c", 633; //                                         HUD                                          //
16021                        	
16022                        		.dbg	line,	"include\init.c", 634; //                                                                                      //
16023                        	
16024                        		.dbg	line,	"include\init.c", 635; //**************************************************************************************//
16025                        	
16026                        		.dbg	line,	"include\init.c", 637; init_HUD();
16027                        		__call		_init_HUD
         17:DBF6  20 E1 FE   			call	_init_HUD
16028                        	
16029                        		.dbg	line,	"include\init.c", 639; 
16030                        	
16031                        		.dbg	line,	"include\init.c", 642; //**************************************************************************************//
16032                        	
16033                        		.dbg	line,	"include\init.c", 643; //                                                                                      //
16034                        	
16035                        		.dbg	line,	"include\init.c", 644; //                                  SETUP SCROLL_SPLIT                                  //
16036                        	
16037                        		.dbg	line,	"include\init.c", 645; //                                                                                      //
16038                        	
16039                        		.dbg	line,	"include\init.c", 646; //**************************************************************************************//
16040                        	
16041                        		.dbg	line,	"include\init.c", 648; //--------------------------------------------------------------------------------------//
16042                        	
16043                        		.dbg	line,	"include\init.c", 649; //                                        VDC 2                                         //
16044                        	
16045                        		.dbg	line,	"include\init.c", 650; //--------------------------------------------------------------------------------------//
16046                        	
16047                        		.dbg	line,	"include\init.c", 652; sgx_scroll_map();
16048                        		__call		_sgx_scroll_map
         17:DBF9  20 81 FF   			call	_sgx_scroll_map
16049                        	
16050                        		.dbg	line,	"include\init.c", 654; sgx_scroll_split(0,   0, sgx_map_pxl_x & (BAT_SIZE_W - 1), sgx_map_pxl_y & (BAT_SIZE_H - 1), BKG_ON | SPR_ON);
16051                        		__st.umiq	0, _al
         17:DBFC  64 F8      			stz	_al
16052                        		__st.umiq	0, _ah
         17:DBFE  64 F9      			stz	_ah
16053                        		__ld.wm		_sgx_map_pxl_x
         17:DC00  AD 90 26   			lda.l	_sgx_map_pxl_x
         17:DC03  AC 91 26   			ldy.h	_sgx_map_pxl_x
16054                        		__and.wi	2047
         17:DC06  29 FF      			and.l	#2047
         17:DC08  42         			say
         17:DC09  29 07      			and.h	#2047
         17:DC0B  42         			say
16055                        		__st.wmq	_bx
         17:DC0C  85 FA      			sta.l	_bx
         17:DC0E  84 FB      			sty.h	_bx
16056                        		__ld.wm		_sgx_map_pxl_y
         17:DC10  AD 92 26   			lda.l	_sgx_map_pxl_y
         17:DC13  AC 93 26   			ldy.h	_sgx_map_pxl_y
16057                        		__and.wi	255
         17:DC16  29 FF      			and	#255
         17:DC18  C2         			cly
16058                        		__st.wmq	_cx
         17:DC19  85 FC      			sta.l	_cx
         17:DC1B  84 FD      			sty.h	_cx
16059                        		__st.umiq	192, _dl
         17:DC1D  A9 C0      			lda.l	#192
         17:DC1F  85 FE      			sta	_dl
16060                        		__call		_sgx_scroll_split.5
         17:DC21  20 77 FF   			call	_sgx_scroll_split.5
16061                        	
16062                        		.dbg	line,	"include\init.c", 659; //--------------------------------------------------------------------------------------//
16063                        	
16064                        		.dbg	line,	"include\init.c", 660; //                                   LOAD BG PALETTES                                   //
16065                        	
16066                        		.dbg	line,	"include\init.c", 661; //--------------------------------------------------------------------------------------//
16067                        	
16068                        		.dbg	line,	"include\init.c", 663; // LOAD ALL PALETTES AT BG PALETTE 0 //
16069                        	
16070                        		.dbg	line,	"include\init.c", 664; load_palette( 0, palette_LV1, 16 );
16071                        		__st.umiq	0, _al
         17:DC24  64 F8      			stz	_al
16072                        		__farptr	_palette_LV1, _bp_bank, _bp
         17:DC26  A9 A0      			lda.l	#$6000 + ($1FFF & (_palette_LV1))
         17:DC28  85 EC      			sta.l	_bp
         17:DC2A  A9 68      			lda.h	#$6000 + ($1FFF & (_palette_LV1))
         17:DC2C  85 ED      			sta.h	_bp
         17:DC2E  A9 0D      			lda	#bank(_palette_LV1)
         17:DC30  85 02      			sta	_bp_bank
16073                        		__st.umiq	16, _ah
         17:DC32  A9 10      			lda.l	#16
         17:DC34  85 F9      			sta	_ah
16074                        		__call		_load_palette.3
         17:DC36  20 1D FF   			call	_load_palette.3
16075                        	
16076                        		.dbg	line,	"include\init.c", 669; //**************************************************************************************//
16077                        	
16078                        		.dbg	line,	"include\init.c", 670; //                                                                                      //
16079                        	
16080                        		.dbg	line,	"include\init.c", 671; //                                       SPRITES                                        //
16081                        	
16082                        		.dbg	line,	"include\init.c", 672; //                                                                                      //
16083                        	
16084                        		.dbg	line,	"include\init.c", 673; //**************************************************************************************//
16085                        	
16086                        		.dbg	line,	"include\init.c", 675; //--------------------------------------------------------------------------------------//
16087                        	
16088                        		.dbg	line,	"include\init.c", 676; //                                        PLAYER                                        //
16089                        	
16090                        		.dbg	line,	"include\init.c", 677; //--------------------------------------------------------------------------------------//
16091                        	
16092                        		.dbg	line,	"include\init.c", 679; // LOAD ALL PLAYER TILES //
16093                        	
16094                        		.dbg	line,	"include\init.c", 680; set_far_base(TABLE_PLAYER_TILES_BANK[player_naked],TABLE_PLAYER_TILES_ADR[player_naked]);
16095                        		__ldx.umq	_player_naked
         17:DC39  AE 1D 23   			ldx	_player_naked
16096                        		__ld.uax	_TABLE_PLAYER_TILES_BANK
         17:DC3C  BD 1B 61   			lda	_TABLE_PLAYER_TILES_BANK, x
         17:DC3F  C2         			cly
16097                        		__st.umq	_bp_bank
         17:DC40  85 02      			sta	_bp_bank
16098                        		__ld2x.umq	_player_naked
         17:DC42  AD 1D 23   			lda	_player_naked
         17:DC45  0A         			asl	a
         17:DC46  AA         			tax
16099                        		__ld.wax	_TABLE_PLAYER_TILES_ADR
         17:DC47  BD 17 61   			lda.l	_TABLE_PLAYER_TILES_ADR, x
         17:DC4A  BC 18 61   			ldy.h	_TABLE_PLAYER_TILES_ADR, x
16100                        		__st.wmq	_bp
         17:DC4D  85 EC      			sta.l	_bp
         17:DC4F  84 ED      			sty.h	_bp
16101                        	
16102                        		.dbg	line,	"include\init.c", 681; far_load_vram(PLAYER_VRAM_ADR,TILES_400);
16103                        		__st.wmiq	5120, _di
         17:DC51  64 F0      			stz.l	_di
         17:DC53  A9 14      			lda.h	#5120
         17:DC55  85 F1      			sta.h	_di
16104                        		__st.wmiq	6400, _ax
         17:DC57  64 F8      			stz.l	_ax
         17:DC59  A9 19      			lda.h	#6400
         17:DC5B  85 F9      			sta.h	_ax
16105                        		 _far_load_vram.2
         17:DC5D  82         			clx				; Offset to PCE VDC.
         17:DC5E  20 4F FF   			call	load_vram_x
16106                        	
16107                        		.dbg	line,	"include\init.c", 684; // SELECT PLAYER CORE SPRITE //
16108                        	
16109                        		.dbg	line,	"include\init.c", 685; spr_set(player_id); // PLAYER_START_INDEX
16110                        		__ld.umq	_player_id
         17:DC61  AD 15 23   			lda	_player_id
16111                        		__call		_spr_set.1
         17:DC64  20 DD E7   			call	_spr_set.1
16112                        	
16113                        		.dbg	line,	"include\init.c", 688; player_pos_x = 112;
16114                        		__st.wmiq	112, _player_pos_x
         17:DC67  A9 70      			lda.l	#112
         17:DC69  8D D4 24   			sta.l	_player_pos_x
         17:DC6C  9C D5 24   			stz.h	_player_pos_x
16115                        	
16116                        		.dbg	line,	"include\init.c", 689; player_pos_y = PLAYER_BASE_Y_POS;
16117                        		__st.wmiq	128, _player_pos_y
         17:DC6F  A9 80      			lda.l	#128
         17:DC71  8D D6 24   			sta.l	_player_pos_y
         17:DC74  9C D7 24   			stz.h	_player_pos_y
16118                        	
16119                        		.dbg	line,	"include\init.c", 692; spr_x(player_pos_x);
16120                        		__ld.wm		_player_pos_x
         17:DC77  AD D4 24   			lda.l	_player_pos_x
         17:DC7A  AC D5 24   			ldy.h	_player_pos_x
16121                        		__call		_spr_x.1
         17:DC7D  20 0A E8   			call	_spr_x.1
16122                        	
16123                        		.dbg	line,	"include\init.c", 693; spr_y(player_pos_y);
16124                        		__ld.wm		_player_pos_y
         17:DC80  AD D6 24   			lda.l	_player_pos_y
         17:DC83  AC D7 24   			ldy.h	_player_pos_y
16125                        		__call		_spr_y.1
         17:DC86  20 19 E8   			call	_spr_y.1
16126                        	
16127                        		.dbg	line,	"include\init.c", 695; // SET TILES DATA FOR THE PLAYER //
16128                        	
16129                        		.dbg	line,	"include\init.c", 696; spr_pattern(PLAYER_VRAM_ADR);
16130                        		__ld.wi		5120
         17:DC89  62         			cla
         17:DC8A  A0 14      			ldy.h	#5120
16131                        		__call		_spr_pattern.1
         17:DC8C  20 26 E8   			call	_spr_pattern.1
16132                        	
16133                        		.dbg	line,	"include\init.c", 698; // SET SPRITE FLIP //
16134                        	
16135                        		.dbg	line,	"include\init.c", 699; spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_32x32);
16136                        		__st.umiq	185, _al
         17:DC8F  A9 B9      			lda.l	#185
         17:DC91  85 F8      			sta	_al
16137                        		__ld.uiq	17
         17:DC93  A9 11      			lda	#17
16138                        		__call		_spr_ctrl.2
         17:DC95  20 3C E8   			call	_spr_ctrl.2
16139                        	
16140                        		.dbg	line,	"include\init.c", 701; 
16141                        	
16142                        		.dbg	line,	"include\init.c", 704; spr_pal(0);
16143                        		__ld.uiq	0
         17:DC98  62         			cla
16144                        		__call		_spr_pal.1
         17:DC99  20 4D E8   			call	_spr_pal.1
16145                        	
16146                        		.dbg	line,	"include\init.c", 705; spr_pri(TRUE);
16147                        		__ld.uiq	1
         17:DC9C  A9 01      			lda	#1
16148                        		__call		_spr_pri.1
         17:DC9E  20 5C E8   			call	_spr_pri.1
16149                        	
16150                        		.dbg	line,	"include\init.c", 708; //--------------------------------------------------------------------------------------//
16151                        	
16152                        		.dbg	line,	"include\init.c", 709; //                                        CHAIN                                         //
16153                        	
16154                        		.dbg	line,	"include\init.c", 710; //--------------------------------------------------------------------------------------//
16155                        	
16156                        		.dbg	line,	"include\init.c", 712; load_vram(CHAIN_VRAM_ADR, tiles_SPR_CHAIN , TILES_4);
16157                        		__st.wmiq	31744, _di
         17:DCA1  64 F0      			stz.l	_di
         17:DCA3  A9 7C      			lda.h	#31744
         17:DCA5  85 F1      			sta.h	_di
16158                        		__farptr	_tiles_SPR_CHAIN, _bp_bank, _bp
         17:DCA7  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_CHAIN))
         17:DCA9  85 EC      			sta.l	_bp
         17:DCAB  A9 66      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_CHAIN))
         17:DCAD  85 ED      			sta.h	_bp
         17:DCAF  A9 13      			lda	#bank(_tiles_SPR_CHAIN)
         17:DCB1  85 02      			sta	_bp_bank
16159                        		__st.wmiq	64, _ax
         17:DCB3  A9 40      			lda.l	#64
         17:DCB5  85 F8      			sta.l	_ax
         17:DCB7  64 F9      			stz.h	_ax
16160                        		 _load_vram.3
         17:DCB9  82         			clx				; Offset to PCE VDC.
         17:DCBA  20 4F FF   			call	load_vram_x
16161                        	
16162                        		.dbg	line,	"include\init.c", 714; for(i=0 ; i<3 ; i++)
16163                        		__st.umiq	0, __init_LEVEL_end - 1  /* i */
         17:DCBD  9C 0E 23   			stz	__init_LEVEL_end - 1
16164    17:DCC0             	.LL692:
16165                        		__ld.umq	__init_LEVEL_end - 1  /* i */
         17:DCC0  AD 0E 23   			lda	__init_LEVEL_end - 1
16166                        		__ult_b.uiq	3
         17:DCC3  C9 03      			cmp	#3		; Subtract integer from A.
         17:DCC5  6A         			ror	a		; CC if A < integer.
         17:DCC6  49 80      			eor	#$80
         17:DCC8  2A         			rol	a
16167                        		__btrue		.LL694
         17:DCC9  B0 07      			bcs	.LL694
16168                        		__bra		.LL695
         17:DCCB  80 2F      			bra	.LL695
16169    17:DCCD             	.LL693:
16170                        		__inc.umq	__init_LEVEL_end - 1  /* i */
         17:DCCD  EE 0E 23   			inc	__init_LEVEL_end - 1
16171                        		__bra		.LL692
         17:DCD0  80 EE      			bra	.LL692
16172    17:DCD2             	.LL694:
16173                        	
16174                        		.dbg	line,	"include\init.c", 715; {
16175                        	
16176                        		.dbg	line,	"include\init.c", 716; spr_set(chain_id+i);
16177                        		__ld.um		_chain_id
         17:DCD2  AD 22 23   			lda	_chain_id
         17:DCD5  C2         			cly
16178                        		__add.um	__init_LEVEL_end - 1  /* i */
         17:DCD6  18         			clc
         17:DCD7  6D 0E 23   			adc	__init_LEVEL_end - 1
         17:DCDA  90 01      			bcc	!+
         17:DCDC  C8         			iny
         17:DCDD             	!:
16179                        		__call		_spr_set.1
         17:DCDD  20 DD E7   			call	_spr_set.1
16180                        	
16181                        		.dbg	line,	"include\init.c", 717; spr_pattern(CHAIN_VRAM_ADR);
16182                        		__ld.wi		31744
         17:DCE0  62         			cla
         17:DCE1  A0 7C      			ldy.h	#31744
16183                        		__call		_spr_pattern.1
         17:DCE3  20 26 E8   			call	_spr_pattern.1
16184                        	
16185                        		.dbg	line,	"include\init.c", 718; spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_16x16);
16186                        		__st.umiq	185, _al
         17:DCE6  A9 B9      			lda.l	#185
         17:DCE8  85 F8      			sta	_al
16187                        		__ld.uiq	0
         17:DCEA  62         			cla
16188                        		__call		_spr_ctrl.2
         17:DCEB  20 3C E8   			call	_spr_ctrl.2
16189                        	
16190                        		.dbg	line,	"include\init.c", 719; spr_hide();
16191                        		__call		_spr_hide
         17:DCEE  20 F8 E7   			call	_spr_hide
16192                        	
16193                        		.dbg	line,	"include\init.c", 721; spr_pal(0);
16194                        		__ld.uiq	0
         17:DCF1  62         			cla
16195                        		__call		_spr_pal.1
         17:DCF2  20 4D E8   			call	_spr_pal.1
16196                        	
16197                        		.dbg	line,	"include\init.c", 722; spr_pri(TRUE);
16198                        		__ld.uiq	1
         17:DCF5  A9 01      			lda	#1
16199                        		__call		_spr_pri.1
         17:DCF7  20 5C E8   			call	_spr_pri.1
16200                        	
16201                        		.dbg	line,	"include\init.c", 723; }
16202                        		__bra		.LL693
         17:DCFA  80 D1      			bra	.LL693
16203    17:DCFC             	.LL695:
16204                        	
16205                        		.dbg	line,	"include\init.c", 724; 
16206                        	
16207                        		.dbg	line,	"include\init.c", 726; //--------------------------------------------------------------------------------------//
16208                        	
16209                        		.dbg	line,	"include\init.c", 727; //                                        WEAPON                                        //
16210                        	
16211                        		.dbg	line,	"include\init.c", 728; //--------------------------------------------------------------------------------------//
16212                        	
16213                        		.dbg	line,	"include\init.c", 730; if(weapon_level == 0)
16214                        		__not.um	_weapon_level
         17:DCFC  AD 25 23   			lda	_weapon_level
         17:DCFF  18         			clc
         17:DD00  D0 01      			bne	!+
         17:DD02  38         			sec
         17:DD03             	!:
16215                        		__bfalse	.LL696
         17:DD03  90 27      			bcc	.LL696
16216                        	
16217                        		.dbg	line,	"include\init.c", 731; {
16218                        	
16219                        		.dbg	line,	"include\init.c", 732; load_vram(WEAPON_VRAM_ADR, tiles_SPR_WEAPON_0 , SIZEOF(tiles_SPR_WEAPON_0) >> 1);
16220                        		__st.wmiq	31808, _di
         17:DD05  A9 40      			lda.l	#31808
         17:DD07  85 F0      			sta.l	_di
         17:DD09  A9 7C      			lda.h	#31808
         17:DD0B  85 F1      			sta.h	_di
16221                        		__farptr	_tiles_SPR_WEAPON_0, _bp_bank, _bp
         17:DD0D  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_0))
         17:DD0F  85 EC      			sta.l	_bp
         17:DD11  A9 66      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_0))
         17:DD13  85 ED      			sta.h	_bp
         17:DD15  A9 13      			lda	#bank(_tiles_SPR_WEAPON_0)
         17:DD17  85 02      			sta	_bp_bank
16222                        		__ld.wi		___sizeof__tiles_SPR_WEAPON_0
         17:DD19  A9 80      			lda.l	#___sizeof__tiles_SPR_WEAPON_0
         17:DD1B  A0 02      			ldy.h	#___sizeof__tiles_SPR_WEAPON_0
16223                        		__lsr.wi	1
         17:DD1D  42         			say
         17:DD1E  4A         			lsr	a
         17:DD1F  42         			say
         17:DD20  6A         			ror	a
16224                        		__st.wmq	_ax
         17:DD21  85 F8      			sta.l	_ax
         17:DD23  84 F9      			sty.h	_ax
16225                        		 _load_vram.3
         17:DD25  82         			clx				; Offset to PCE VDC.
         17:DD26  20 4F FF   			call	load_vram_x
16226                        	
16227                        		.dbg	line,	"include\init.c", 733; }
16228                        	
16229                        		.dbg	line,	"include\init.c", 735; else if(weapon_level == 1)
16230                        		__bra		.LL697
         17:DD29  4C EB DD   			bra	.LL697
16231    17:DD2C             	.LL696:
16232                        		__ld.umq	_weapon_level
         17:DD2C  AD 25 23   			lda	_weapon_level
16233                        		__equ_b.uiq	1
         17:DD2F  C9 01      			cmp	#1
         17:DD31  F0 01      			beq	!+
         17:DD33  18         			clc
         17:DD34             	!:
16234                        		__bfalse	.LL698
         17:DD34  90 27      			bcc	.LL698
16235                        	
16236                        		.dbg	line,	"include\init.c", 736; {
16237                        	
16238                        		.dbg	line,	"include\init.c", 737; load_vram(WEAPON_VRAM_ADR, tiles_SPR_WEAPON_1 , SIZEOF(tiles_SPR_WEAPON_1) >> 1);
16239                        		__st.wmiq	31808, _di
         17:DD36  A9 40      			lda.l	#31808
         17:DD38  85 F0      			sta.l	_di
         17:DD3A  A9 7C      			lda.h	#31808
         17:DD3C  85 F1      			sta.h	_di
16240                        		__farptr	_tiles_SPR_WEAPON_1, _bp_bank, _bp
         17:DD3E  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_1))
         17:DD40  85 EC      			sta.l	_bp
         17:DD42  A9 69      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_1))
         17:DD44  85 ED      			sta.h	_bp
         17:DD46  A9 13      			lda	#bank(_tiles_SPR_WEAPON_1)
         17:DD48  85 02      			sta	_bp_bank
16241                        		__ld.wi		___sizeof__tiles_SPR_WEAPON_1
         17:DD4A  A9 80      			lda.l	#___sizeof__tiles_SPR_WEAPON_1
         17:DD4C  A0 02      			ldy.h	#___sizeof__tiles_SPR_WEAPON_1
16242                        		__lsr.wi	1
         17:DD4E  42         			say
         17:DD4F  4A         			lsr	a
         17:DD50  42         			say
         17:DD51  6A         			ror	a
16243                        		__st.wmq	_ax
         17:DD52  85 F8      			sta.l	_ax
         17:DD54  84 F9      			sty.h	_ax
16244                        		 _load_vram.3
         17:DD56  82         			clx				; Offset to PCE VDC.
         17:DD57  20 4F FF   			call	load_vram_x
16245                        	
16246                        		.dbg	line,	"include\init.c", 738; }
16247                        	
16248                        		.dbg	line,	"include\init.c", 740; else if(weapon_level == 2)
16249                        		__bra		.LL699
         17:DD5A  4C EB DD   			bra	.LL699
16250    17:DD5D             	.LL698:
16251                        		__ld.umq	_weapon_level
         17:DD5D  AD 25 23   			lda	_weapon_level
16252                        		__equ_b.uiq	2
         17:DD60  C9 02      			cmp	#2
         17:DD62  F0 01      			beq	!+
         17:DD64  18         			clc
         17:DD65             	!:
16253                        		__bfalse	.LL700
         17:DD65  90 26      			bcc	.LL700
16254                        	
16255                        		.dbg	line,	"include\init.c", 741; {
16256                        	
16257                        		.dbg	line,	"include\init.c", 742; load_vram(WEAPON_VRAM_ADR, tiles_SPR_WEAPON_2 , SIZEOF(tiles_SPR_WEAPON_2) >> 1);
16258                        		__st.wmiq	31808, _di
         17:DD67  A9 40      			lda.l	#31808
         17:DD69  85 F0      			sta.l	_di
         17:DD6B  A9 7C      			lda.h	#31808
         17:DD6D  85 F1      			sta.h	_di
16259                        		__farptr	_tiles_SPR_WEAPON_2, _bp_bank, _bp
         17:DD6F  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_2))
         17:DD71  85 EC      			sta.l	_bp
         17:DD73  A9 6B      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_2))
         17:DD75  85 ED      			sta.h	_bp
         17:DD77  A9 13      			lda	#bank(_tiles_SPR_WEAPON_2)
         17:DD79  85 02      			sta	_bp_bank
16260                        		__ld.wi		___sizeof__tiles_SPR_WEAPON_2
         17:DD7B  A9 80      			lda.l	#___sizeof__tiles_SPR_WEAPON_2
         17:DD7D  A0 02      			ldy.h	#___sizeof__tiles_SPR_WEAPON_2
16261                        		__lsr.wi	1
         17:DD7F  42         			say
         17:DD80  4A         			lsr	a
         17:DD81  42         			say
         17:DD82  6A         			ror	a
16262                        		__st.wmq	_ax
         17:DD83  85 F8      			sta.l	_ax
         17:DD85  84 F9      			sty.h	_ax
16263                        		 _load_vram.3
         17:DD87  82         			clx				; Offset to PCE VDC.
         17:DD88  20 4F FF   			call	load_vram_x
16264                        	
16265                        		.dbg	line,	"include\init.c", 743; }
16266                        	
16267                        		.dbg	line,	"include\init.c", 745; else if(weapon_level == 3)
16268                        		__bra		.LL701
         17:DD8B  80 5E      			bra	.LL701
16269    17:DD8D             	.LL700:
16270                        		__ld.umq	_weapon_level
         17:DD8D  AD 25 23   			lda	_weapon_level
16271                        		__equ_b.uiq	3
         17:DD90  C9 03      			cmp	#3
         17:DD92  F0 01      			beq	!+
         17:DD94  18         			clc
         17:DD95             	!:
16272                        		__bfalse	.LL702
         17:DD95  90 26      			bcc	.LL702
16273                        	
16274                        		.dbg	line,	"include\init.c", 746; {
16275                        	
16276                        		.dbg	line,	"include\init.c", 747; load_vram(WEAPON_VRAM_ADR, tiles_SPR_WEAPON_3 , SIZEOF(tiles_SPR_WEAPON_3) >> 1);
16277                        		__st.wmiq	31808, _di
         17:DD97  A9 40      			lda.l	#31808
         17:DD99  85 F0      			sta.l	_di
         17:DD9B  A9 7C      			lda.h	#31808
         17:DD9D  85 F1      			sta.h	_di
16278                        		__farptr	_tiles_SPR_WEAPON_3, _bp_bank, _bp
         17:DD9F  A9 60      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_3))
         17:DDA1  85 EC      			sta.l	_bp
         17:DDA3  A9 6E      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_3))
         17:DDA5  85 ED      			sta.h	_bp
         17:DDA7  A9 13      			lda	#bank(_tiles_SPR_WEAPON_3)
         17:DDA9  85 02      			sta	_bp_bank
16279                        		__ld.wi		___sizeof__tiles_SPR_WEAPON_3
         17:DDAB  A9 80      			lda.l	#___sizeof__tiles_SPR_WEAPON_3
         17:DDAD  A0 02      			ldy.h	#___sizeof__tiles_SPR_WEAPON_3
16280                        		__lsr.wi	1
         17:DDAF  42         			say
         17:DDB0  4A         			lsr	a
         17:DDB1  42         			say
         17:DDB2  6A         			ror	a
16281                        		__st.wmq	_ax
         17:DDB3  85 F8      			sta.l	_ax
         17:DDB5  84 F9      			sty.h	_ax
16282                        		 _load_vram.3
         17:DDB7  82         			clx				; Offset to PCE VDC.
         17:DDB8  20 4F FF   			call	load_vram_x
16283                        	
16284                        		.dbg	line,	"include\init.c", 748; }
16285                        	
16286                        		.dbg	line,	"include\init.c", 750; else if(weapon_level == 4)
16287                        		__bra		.LL703
         17:DDBB  80 2E      			bra	.LL703
16288    17:DDBD             	.LL702:
16289                        		__ld.umq	_weapon_level
         17:DDBD  AD 25 23   			lda	_weapon_level
16290                        		__equ_b.uiq	4
         17:DDC0  C9 04      			cmp	#4
         17:DDC2  F0 01      			beq	!+
         17:DDC4  18         			clc
         17:DDC5             	!:
16291                        		__bfalse	.LL704
         17:DDC5  90 24      			bcc	.LL704
16292                        	
16293                        		.dbg	line,	"include\init.c", 751; {
16294                        	
16295                        		.dbg	line,	"include\init.c", 752; load_vram(WEAPON_VRAM_ADR, tiles_SPR_WEAPON_4 , SIZEOF(tiles_SPR_WEAPON_4) >> 1);
16296                        		__st.wmiq	31808, _di
         17:DDC7  A9 40      			lda.l	#31808
         17:DDC9  85 F0      			sta.l	_di
         17:DDCB  A9 7C      			lda.h	#31808
         17:DDCD  85 F1      			sta.h	_di
16297                        		__farptr	_tiles_SPR_WEAPON_4, _bp_bank, _bp
         17:DDCF  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_4))
         17:DDD1  85 EC      			sta.l	_bp
         17:DDD3  A9 70      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_WEAPON_4))
         17:DDD5  85 ED      			sta.h	_bp
         17:DDD7  A9 13      			lda	#bank(_tiles_SPR_WEAPON_4)
         17:DDD9  85 02      			sta	_bp_bank
16298                        		__ld.wi		___sizeof__tiles_SPR_WEAPON_4
         17:DDDB  A9 80      			lda.l	#___sizeof__tiles_SPR_WEAPON_4
         17:DDDD  A0 02      			ldy.h	#___sizeof__tiles_SPR_WEAPON_4
16299                        		__lsr.wi	1
         17:DDDF  42         			say
         17:DDE0  4A         			lsr	a
         17:DDE1  42         			say
         17:DDE2  6A         			ror	a
16300                        		__st.wmq	_ax
         17:DDE3  85 F8      			sta.l	_ax
         17:DDE5  84 F9      			sty.h	_ax
16301                        		 _load_vram.3
         17:DDE7  82         			clx				; Offset to PCE VDC.
         17:DDE8  20 4F FF   			call	load_vram_x
16302                        	
16303                        		.dbg	line,	"include\init.c", 753; }		
16304                        	
16305                        		.dbg	line,	"include\init.c", 755; 
16306                        	
16307                        		.dbg	line,	"include\init.c", 756; weapon_id = chain_id-1;
16308    17:DDEB             	.LL704:
16309    17:DDEB             	.LL703:
16310    17:DDEB             	.LL701:
16311    17:DDEB             	.LL699:
16312    17:DDEB             	.LL697:
16313                        		__ld.um		_chain_id
         17:DDEB  AD 22 23   			lda	_chain_id
         17:DDEE  C2         			cly
16314                        		__sub.wi	1
         17:DDEF  38         			sec
         17:DDF0  E9 01      			sbc.l	#1
         17:DDF2  B0 01      			bcs	!+
         17:DDF4  88         			dey
         17:DDF5             	!:
16315                        		__st.umq	_weapon_id
         17:DDF5  8D 23 23   			sta	_weapon_id
16316                        	
16317                        		.dbg	line,	"include\init.c", 757; spr_set(weapon_id);
16318                        		__ld.umq	_weapon_id
         17:DDF8  AD 23 23   			lda	_weapon_id
16319                        		__call		_spr_set.1
         17:DDFB  20 DD E7   			call	_spr_set.1
16320                        	
16321                        		.dbg	line,	"include\init.c", 758; spr_pattern(WEAPON_VRAM_ADR);
16322                        		__ld.wi		31808
         17:DDFE  A9 40      			lda.l	#31808
         17:DE00  A0 7C      			ldy.h	#31808
16323                        		__call		_spr_pattern.1
         17:DE02  20 26 E8   			call	_spr_pattern.1
16324                        	
16325                        		.dbg	line,	"include\init.c", 759; spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_16x16);
16326                        		__st.umiq	185, _al
         17:DE05  A9 B9      			lda.l	#185
         17:DE07  85 F8      			sta	_al
16327                        		__ld.uiq	0
         17:DE09  62         			cla
16328                        		__call		_spr_ctrl.2
         17:DE0A  20 3C E8   			call	_spr_ctrl.2
16329                        	
16330                        		.dbg	line,	"include\init.c", 761; spr_x(player_pos_x+8);
16331                        		__ld.wm		_player_pos_x
         17:DE0D  AD D4 24   			lda.l	_player_pos_x
         17:DE10  AC D5 24   			ldy.h	_player_pos_x
16332                        		__add.wi	8
         17:DE13  18         			clc
         17:DE14  69 08      			adc.l	#8
         17:DE16  90 01      			bcc	!+
         17:DE18  C8         			iny
         17:DE19             	!:
16333                        		__call		_spr_x.1
         17:DE19  20 0A E8   			call	_spr_x.1
16334                        	
16335                        		.dbg	line,	"include\init.c", 762; spr_y(player_pos_y+16);
16336                        		__ld.wm		_player_pos_y
         17:DE1C  AD D6 24   			lda.l	_player_pos_y
         17:DE1F  AC D7 24   			ldy.h	_player_pos_y
16337                        		__add.wi	16
         17:DE22  18         			clc
         17:DE23  69 10      			adc.l	#16
         17:DE25  90 01      			bcc	!+
         17:DE27  C8         			iny
         17:DE28             	!:
16338                        		__call		_spr_y.1
         17:DE28  20 19 E8   			call	_spr_y.1
16339                        	
16340                        		.dbg	line,	"include\init.c", 763; spr_pri(TRUE);
16341                        		__ld.uiq	1
         17:DE2B  A9 01      			lda	#1
16342                        		__call		_spr_pri.1
         17:DE2D  20 5C E8   			call	_spr_pri.1
16343                        	
16344                        		.dbg	line,	"include\init.c", 765; // WEAPON 4 USES PAL2
16345                        	
16346                        		.dbg	line,	"include\init.c", 766; if(weapon_level == 4)
16347                        		__ld.umq	_weapon_level
         17:DE30  AD 25 23   			lda	_weapon_level
16348                        		__equ_b.uiq	4
         17:DE33  C9 04      			cmp	#4
         17:DE35  F0 01      			beq	!+
         17:DE37  18         			clc
         17:DE38             	!:
16349                        		__bfalse	.LL705
         17:DE38  90 07      			bcc	.LL705
16350                        	
16351                        		.dbg	line,	"include\init.c", 767; {
16352                        	
16353                        		.dbg	line,	"include\init.c", 768; spr_pal(2);
16354                        		__ld.uiq	2
         17:DE3A  A9 02      			lda	#2
16355                        		__call		_spr_pal.1
         17:DE3C  20 4D E8   			call	_spr_pal.1
16356                        	
16357                        		.dbg	line,	"include\init.c", 769; }
16358                        	
16359                        		.dbg	line,	"include\init.c", 770; // ALL OTHERS USE PAL0
16360                        	
16361                        		.dbg	line,	"include\init.c", 771; else
16362                        		__bra		.LL706
         17:DE3F  80 04      			bra	.LL706
16363    17:DE41             	.LL705:
16364                        	
16365                        		.dbg	line,	"include\init.c", 772; {
16366                        	
16367                        		.dbg	line,	"include\init.c", 773; spr_pal(0);
16368                        		__ld.uiq	0
         17:DE41  62         			cla
16369                        		__call		_spr_pal.1
         17:DE42  20 4D E8   			call	_spr_pal.1
16370                        	
16371                        		.dbg	line,	"include\init.c", 774; }
16372    17:DE45             	.LL706:
16373                        	
16374                        		.dbg	line,	"include\init.c", 775; 
16375                        	
16376                        		.dbg	line,	"include\init.c", 776; 
16377                        	
16378                        		.dbg	line,	"include\init.c", 779; //--------------------------------------------------------------------------------------//
16379                        	
16380                        		.dbg	line,	"include\init.c", 780; //                                       OBJECTS                                        //
16381                        	
16382                        		.dbg	line,	"include\init.c", 781; //--------------------------------------------------------------------------------------//
16383                        	
16384                        		.dbg	line,	"include\init.c", 783; load_OBJECT_TILES();
16385                        		__call		_load_OBJECT_TILES
         17:DE45  20 D7 FE   			call	_load_OBJECT_TILES
16386                        	
16387                        		.dbg	line,	"include\init.c", 784; init_OBJECT_LV1();
16388                        		__call		_init_OBJECT_LV1
         17:DE48  20 CD FE   			call	_init_OBJECT_LV1
16389                        	
16390                        		.dbg	line,	"include\init.c", 785; scroll_object();
16391                        		__call		_scroll_object
         17:DE4B  20 C3 FE   			call	_scroll_object
16392                        	
16393                        		.dbg	line,	"include\init.c", 788; //--------------------------------------------------------------------------------------//
16394                        	
16395                        		.dbg	line,	"include\init.c", 789; //                                        CHESTS                                        //
16396                        	
16397                        		.dbg	line,	"include\init.c", 790; //--------------------------------------------------------------------------------------//
16398                        	
16399                        		.dbg	line,	"include\init.c", 792; load_CHEST_TILES();
16400                        		__call		_load_CHEST_TILES
         17:DE4E  20 B9 FE   			call	_load_CHEST_TILES
16401                        	
16402                        		.dbg	line,	"include\init.c", 793; init_CHEST_LV1();
16403                        		__call		_init_CHEST_LV1
         17:DE51  20 AF FE   			call	_init_CHEST_LV1
16404                        	
16405                        		.dbg	line,	"include\init.c", 794; scroll_chest();
16406                        		__call		_scroll_chest
         17:DE54  20 A5 FE   			call	_scroll_chest
16407                        	
16408                        		.dbg	line,	"include\init.c", 797; //--------------------------------------------------------------------------------------//
16409                        	
16410                        		.dbg	line,	"include\init.c", 798; //                                         NPCS                                         //
16411                        	
16412                        		.dbg	line,	"include\init.c", 799; //--------------------------------------------------------------------------------------//
16413                        	
16414                        		.dbg	line,	"include\init.c", 801; load_NPC_TILES();
16415                        		__call		_load_NPC_TILES
         17:DE57  20 9B FE   			call	_load_NPC_TILES
16416                        	
16417                        		.dbg	line,	"include\init.c", 802; init_NPC_LV1();
16418                        		__call		_init_NPC_LV1
         17:DE5A  20 91 FE   			call	_init_NPC_LV1
16419                        	
16420                        		.dbg	line,	"include\init.c", 807; //--------------------------------------------------------------------------------------//
16421                        	
16422                        		.dbg	line,	"include\init.c", 808; //                                       ENEMIES                                        //
16423                        	
16424                        		.dbg	line,	"include\init.c", 809; //--------------------------------------------------------------------------------------//
16425                        	
16426                        		.dbg	line,	"include\init.c", 811; load_vram(ORC_VRAM_ADR, tiles_SPR_ORC , SIZEOF(tiles_SPR_ORC) >> 1);
16427                        		__st.wmiq	11520, _di
         17:DE5D  64 F0      			stz.l	_di
         17:DE5F  A9 2D      			lda.h	#11520
         17:DE61  85 F1      			sta.h	_di
16428                        		__farptr	_tiles_SPR_ORC, _bp_bank, _bp
         17:DE63  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_ORC))
         17:DE65  85 EC      			sta.l	_bp
         17:DE67  A9 60      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_ORC))
         17:DE69  85 ED      			sta.h	_bp
         17:DE6B  A9 15      			lda	#bank(_tiles_SPR_ORC)
         17:DE6D  85 02      			sta	_bp_bank
16429                        		__ld.wi		___sizeof__tiles_SPR_ORC
         17:DE6F  A9 00      			lda.l	#___sizeof__tiles_SPR_ORC
         17:DE71  A0 1D      			ldy.h	#___sizeof__tiles_SPR_ORC
16430                        		__lsr.wi	1
         17:DE73  42         			say
         17:DE74  4A         			lsr	a
         17:DE75  42         			say
         17:DE76  6A         			ror	a
16431                        		__st.wmq	_ax
         17:DE77  85 F8      			sta.l	_ax
         17:DE79  84 F9      			sty.h	_ax
16432                        		 _load_vram.3
         17:DE7B  82         			clx				; Offset to PCE VDC.
         17:DE7C  20 4F FF   			call	load_vram_x
16433                        	
16434                        		.dbg	line,	"include\init.c", 812; load_vram(SERPENT_VRAM_ADR, tiles_SPR_SERPENT , TILES_96);
16435                        		__st.wmiq	15232, _di
         17:DE7F  A9 80      			lda.l	#15232
         17:DE81  85 F0      			sta.l	_di
         17:DE83  A9 3B      			lda.h	#15232
         17:DE85  85 F1      			sta.h	_di
16436                        		__farptr	_tiles_SPR_SERPENT, _bp_bank, _bp
         17:DE87  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_SERPENT))
         17:DE89  85 EC      			sta.l	_bp
         17:DE8B  A9 7D      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_SERPENT))
         17:DE8D  85 ED      			sta.h	_bp
         17:DE8F  A9 15      			lda	#bank(_tiles_SPR_SERPENT)
         17:DE91  85 02      			sta	_bp_bank
16437                        		__st.wmiq	1536, _ax
         17:DE93  64 F8      			stz.l	_ax
         17:DE95  A9 06      			lda.h	#1536
         17:DE97  85 F9      			sta.h	_ax
16438                        		 _load_vram.3
         17:DE99  82         			clx				; Offset to PCE VDC.
         17:DE9A  20 4F FF   			call	load_vram_x
16439                        	
16440                        		.dbg	line,	"include\init.c", 813; load_vram(PLANT_VRAM_ADR, tiles_SPR_PLANT , TILES_160);
16441                        		__st.wmiq	16768, _di
         17:DE9D  A9 80      			lda.l	#16768
         17:DE9F  85 F0      			sta.l	_di
         17:DEA1  A9 41      			lda.h	#16768
         17:DEA3  85 F1      			sta.h	_di
16442                        		__farptr	_tiles_SPR_PLANT, _bp_bank, _bp
         17:DEA5  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_PLANT))
         17:DEA7  85 EC      			sta.l	_bp
         17:DEA9  A9 69      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_PLANT))
         17:DEAB  85 ED      			sta.h	_bp
         17:DEAD  A9 16      			lda	#bank(_tiles_SPR_PLANT)
         17:DEAF  85 02      			sta	_bp_bank
16443                        		__st.wmiq	2560, _ax
         17:DEB1  64 F8      			stz.l	_ax
         17:DEB3  A9 0A      			lda.h	#2560
         17:DEB5  85 F9      			sta.h	_ax
16444                        		 _load_vram.3
         17:DEB7  82         			clx				; Offset to PCE VDC.
         17:DEB8  20 4F FF   			call	load_vram_x
16445                        	
16446                        		.dbg	line,	"include\init.c", 818; // UPDATE PCE SAT //
16447                        	
16448                        		.dbg	line,	"include\init.c", 819; satb_update();
16449                        		__call		_satb_update
         17:DEBB  20 13 FF   			call	_satb_update
16450                        	
16451                        		.dbg	line,	"include\init.c", 824; //--------------------------------------------------------------------------------------//
16452                        	
16453                        		.dbg	line,	"include\init.c", 825; //                                LOAD SPRITES PALETTES                                 //
16454                        	
16455                        		.dbg	line,	"include\init.c", 826; //--------------------------------------------------------------------------------------//
16456                        	
16457                        		.dbg	line,	"include\init.c", 828; if(armor_level == 8)
16458                        		__ld.umq	_armor_level
         17:DEBE  AD 24 23   			lda	_armor_level
16459                        		__equ_b.uiq	8
         17:DEC1  C9 08      			cmp	#8
         17:DEC3  F0 01      			beq	!+
         17:DEC5  18         			clc
         17:DEC6             	!:
16460                        		__bfalse	.LL707
         17:DEC6  90 19      			bcc	.LL707
16461                        	
16462                        		.dbg	line,	"include\init.c", 829; {
16463                        	
16464                        		.dbg	line,	"include\init.c", 830; load_palette( 16, palette_PLAYER_8, 1 );
16465                        		__st.umiq	16, _al
         17:DEC8  A9 10      			lda.l	#16
         17:DECA  85 F8      			sta	_al
16466                        		__farptr	_palette_PLAYER_8, _bp_bank, _bp
         17:DECC  A9 60      			lda.l	#$6000 + ($1FFF & (_palette_PLAYER_8))
         17:DECE  85 EC      			sta.l	_bp
         17:DED0  A9 64      			lda.h	#$6000 + ($1FFF & (_palette_PLAYER_8))
         17:DED2  85 ED      			sta.h	_bp
         17:DED4  A9 13      			lda	#bank(_palette_PLAYER_8)
         17:DED6  85 02      			sta	_bp_bank
16467                        		__st.umiq	1, _ah
         17:DED8  A9 01      			lda.l	#1
         17:DEDA  85 F9      			sta	_ah
16468                        		__call		_load_palette.3
         17:DEDC  20 1D FF   			call	_load_palette.3
16469                        	
16470                        		.dbg	line,	"include\init.c", 831; }
16471                        	
16472                        		.dbg	line,	"include\init.c", 833; else if(armor_level == 5)
16473                        		__bra		.LL708
         17:DEDF  80 5D      			bra	.LL708
16474    17:DEE1             	.LL707:
16475                        		__ld.umq	_armor_level
         17:DEE1  AD 24 23   			lda	_armor_level
16476                        		__equ_b.uiq	5
         17:DEE4  C9 05      			cmp	#5
         17:DEE6  F0 01      			beq	!+
         17:DEE8  18         			clc
         17:DEE9             	!:
16477                        		__bfalse	.LL709
         17:DEE9  90 19      			bcc	.LL709
16478                        	
16479                        		.dbg	line,	"include\init.c", 834; {
16480                        	
16481                        		.dbg	line,	"include\init.c", 835; load_palette( 16, palette_PLAYER_5, 1 );
16482                        		__st.umiq	16, _al
         17:DEEB  A9 10      			lda.l	#16
         17:DEED  85 F8      			sta	_al
16483                        		__farptr	_palette_PLAYER_5, _bp_bank, _bp
         17:DEEF  A9 60      			lda.l	#$6000 + ($1FFF & (_palette_PLAYER_5))
         17:DEF1  85 EC      			sta.l	_bp
         17:DEF3  A9 62      			lda.h	#$6000 + ($1FFF & (_palette_PLAYER_5))
         17:DEF5  85 ED      			sta.h	_bp
         17:DEF7  A9 13      			lda	#bank(_palette_PLAYER_5)
         17:DEF9  85 02      			sta	_bp_bank
16484                        		__st.umiq	1, _ah
         17:DEFB  A9 01      			lda.l	#1
         17:DEFD  85 F9      			sta	_ah
16485                        		__call		_load_palette.3
         17:DEFF  20 1D FF   			call	_load_palette.3
16486                        	
16487                        		.dbg	line,	"include\init.c", 836; }
16488                        	
16489                        		.dbg	line,	"include\init.c", 838; else if(armor_level == 4)
16490                        		__bra		.LL710
         17:DF02  80 3A      			bra	.LL710
16491    17:DF04             	.LL709:
16492                        		__ld.umq	_armor_level
         17:DF04  AD 24 23   			lda	_armor_level
16493                        		__equ_b.uiq	4
         17:DF07  C9 04      			cmp	#4
         17:DF09  F0 01      			beq	!+
         17:DF0B  18         			clc
         17:DF0C             	!:
16494                        		__bfalse	.LL711
         17:DF0C  90 19      			bcc	.LL711
16495                        	
16496                        		.dbg	line,	"include\init.c", 839; {
16497                        	
16498                        		.dbg	line,	"include\init.c", 840; load_palette( 16, palette_PLAYER_4, 1 );
16499                        		__st.umiq	16, _al
         17:DF0E  A9 10      			lda.l	#16
         17:DF10  85 F8      			sta	_al
16500                        		__farptr	_palette_PLAYER_4, _bp_bank, _bp
         17:DF12  A9 60      			lda.l	#$6000 + ($1FFF & (_palette_PLAYER_4))
         17:DF14  85 EC      			sta.l	_bp
         17:DF16  A9 60      			lda.h	#$6000 + ($1FFF & (_palette_PLAYER_4))
         17:DF18  85 ED      			sta.h	_bp
         17:DF1A  A9 13      			lda	#bank(_palette_PLAYER_4)
         17:DF1C  85 02      			sta	_bp_bank
16501                        		__st.umiq	1, _ah
         17:DF1E  A9 01      			lda.l	#1
         17:DF20  85 F9      			sta	_ah
16502                        		__call		_load_palette.3
         17:DF22  20 1D FF   			call	_load_palette.3
16503                        	
16504                        		.dbg	line,	"include\init.c", 841; }
16505                        	
16506                        		.dbg	line,	"include\init.c", 843; else
16507                        		__bra		.LL712
         17:DF25  80 17      			bra	.LL712
16508    17:DF27             	.LL711:
16509                        	
16510                        		.dbg	line,	"include\init.c", 844; {
16511                        	
16512                        		.dbg	line,	"include\init.c", 845; load_palette( 16, palette_PLAYER_1, 1 );
16513                        		__st.umiq	16, _al
         17:DF27  A9 10      			lda.l	#16
         17:DF29  85 F8      			sta	_al
16514                        		__farptr	_palette_PLAYER_1, _bp_bank, _bp
         17:DF2B  A9 60      			lda.l	#$6000 + ($1FFF & (_palette_PLAYER_1))
         17:DF2D  85 EC      			sta.l	_bp
         17:DF2F  A9 7E      			lda.h	#$6000 + ($1FFF & (_palette_PLAYER_1))
         17:DF31  85 ED      			sta.h	_bp
         17:DF33  A9 12      			lda	#bank(_palette_PLAYER_1)
         17:DF35  85 02      			sta	_bp_bank
16515                        		__st.umiq	1, _ah
         17:DF37  A9 01      			lda.l	#1
         17:DF39  85 F9      			sta	_ah
16516                        		__call		_load_palette.3
         17:DF3B  20 1D FF   			call	_load_palette.3
16517                        	
16518                        		.dbg	line,	"include\init.c", 846; }
16519    17:DF3E             	.LL712:
16520    17:DF3E             	.LL710:
16521    17:DF3E             	.LL708:
16522                        	
16523                        		.dbg	line,	"include\init.c", 849; load_palette( 17, palette_objects_1,   1 );
16524                        		__st.umiq	17, _al
         17:DF3E  A9 11      			lda.l	#17
         17:DF40  85 F8      			sta	_al
16525                        		__farptr	_palette_objects_1, _bp_bank, _bp
         17:DF42  A9 E0      			lda.l	#$6000 + ($1FFF & (_palette_objects_1))
         17:DF44  85 EC      			sta.l	_bp
         17:DF46  A9 6E      			lda.h	#$6000 + ($1FFF & (_palette_objects_1))
         17:DF48  85 ED      			sta.h	_bp
         17:DF4A  A9 14      			lda	#bank(_palette_objects_1)
         17:DF4C  85 02      			sta	_bp_bank
16526                        		__st.umiq	1, _ah
         17:DF4E  A9 01      			lda.l	#1
         17:DF50  85 F9      			sta	_ah
16527                        		__call		_load_palette.3
         17:DF52  20 1D FF   			call	_load_palette.3
16528                        	
16529                        		.dbg	line,	"include\init.c", 850; load_palette( 18, palette_objects_2,   1 );
16530                        		__st.umiq	18, _al
         17:DF55  A9 12      			lda.l	#18
         17:DF57  85 F8      			sta	_al
16531                        		__farptr	_palette_objects_2, _bp_bank, _bp
         17:DF59  A9 E0      			lda.l	#$6000 + ($1FFF & (_palette_objects_2))
         17:DF5B  85 EC      			sta.l	_bp
         17:DF5D  A9 70      			lda.h	#$6000 + ($1FFF & (_palette_objects_2))
         17:DF5F  85 ED      			sta.h	_bp
         17:DF61  A9 14      			lda	#bank(_palette_objects_2)
         17:DF63  85 02      			sta	_bp_bank
16532                        		__st.umiq	1, _ah
         17:DF65  A9 01      			lda.l	#1
         17:DF67  85 F9      			sta	_ah
16533                        		__call		_load_palette.3
         17:DF69  20 1D FF   			call	_load_palette.3
16534                        	
16535                        		.dbg	line,	"include\init.c", 851; load_palette( 19, palette_SPR_ORC,  1 );
16536                        		__st.umiq	19, _al
         17:DF6C  A9 13      			lda.l	#19
         17:DF6E  85 F8      			sta	_al
16537                        		__farptr	_palette_SPR_ORC, _bp_bank, _bp
         17:DF70  A9 E0      			lda.l	#$6000 + ($1FFF & (_palette_SPR_ORC))
         17:DF72  85 EC      			sta.l	_bp
         17:DF74  A9 63      			lda.h	#$6000 + ($1FFF & (_palette_SPR_ORC))
         17:DF76  85 ED      			sta.h	_bp
         17:DF78  A9 17      			lda	#bank(_palette_SPR_ORC)
         17:DF7A  85 02      			sta	_bp_bank
16538                        		__st.umiq	1, _ah
         17:DF7C  A9 01      			lda.l	#1
         17:DF7E  85 F9      			sta	_ah
16539                        		__call		_load_palette.3
         17:DF80  20 1D FF   			call	_load_palette.3
16540                        	
16541                        		.dbg	line,	"include\init.c", 852; load_palette( 20, palette_SPR_PLANT,   1 );
16542                        		__st.umiq	20, _al
         17:DF83  A9 14      			lda.l	#20
         17:DF85  85 F8      			sta	_al
16543                        		__farptr	_palette_SPR_PLANT, _bp_bank, _bp
         17:DF87  A9 E0      			lda.l	#$6000 + ($1FFF & (_palette_SPR_PLANT))
         17:DF89  85 EC      			sta.l	_bp
         17:DF8B  A9 65      			lda.h	#$6000 + ($1FFF & (_palette_SPR_PLANT))
         17:DF8D  85 ED      			sta.h	_bp
         17:DF8F  A9 17      			lda	#bank(_palette_SPR_PLANT)
         17:DF91  85 02      			sta	_bp_bank
16544                        		__st.umiq	1, _ah
         17:DF93  A9 01      			lda.l	#1
         17:DF95  85 F9      			sta	_ah
16545                        		__call		_load_palette.3
         17:DF97  20 1D FF   			call	_load_palette.3
16546                        	
16547                        		.dbg	line,	"include\init.c", 857; // VSYNC //
16548                        	
16549                        		.dbg	line,	"include\init.c", 858; vsync();
16550                        		__call		_vsync
         17:DF9A  20 09 E3   			call	_vsync
16551                        	
16552                        		.dbg	line,	"include\init.c", 860; // ENABLE DISPLAY //
16553                        	
16554                        		.dbg	line,	"include\init.c", 861; disp_on();
16555                        		__call		_disp_on
         17:DF9D  20 16 E4   			call	_disp_on
16556                        	
16557                        		.dbg	line,	"include\init.c", 862; }
16558                        	
16559                        		.dbg	line,	"include\init.c", 863; }
16560    17:DFA0             	.LL686:
16561    17:DFA0             	.LL685:
16562                        		__return	0
         17:DFA0  4C EF FF   			jmp	leave_proc
16563                        		.dbg	clear
16564                        		.endp
16565               67E0     		.data
16566               230E     		.bss
16567    F8:230E             	__init_LEVEL_loc:
16568    F8:230E             			ds	1
16569    F8:230F             	__init_LEVEL_end:
16570               E309     		.code
16571                        		.pceas
16572                        	
16573                        		.dbg	line,	"include\init.c", 866; void init_SHOP()
16574                        		.dbg	line,	"include\init.c", 867; {
16575                        	;***********************
16576                        	;***********************
16577                        	
16578                        		.hucc
16579    01:DB0E             		.proc		_init_SHOP
16580                        		__enter		_init_SHOP
16581                        	
16582                        		.dbg	line,	"include\init.c", 868; char i;
16583                        	
16584                        		.dbg	line,	"include\init.c", 869; char item_id;
16585                        	
16586                        		.dbg	line,	"include\init.c", 872; // DISABLE DISPLAY //
16587                        	
16588                        		.dbg	line,	"include\init.c", 873; disp_off();
16589                        		__call		_disp_off
         01:DB0E  20 29 E4   			call	_disp_off
16590                        	
16591                        		.dbg	line,	"include\init.c", 874; 
16592                        	
16593                        		.dbg	line,	"include\init.c", 876; // VSYNC //
16594                        	
16595                        		.dbg	line,	"include\init.c", 877; vsync();
16596                        		__call		_vsync
         01:DB11  20 09 E3   			call	_vsync
16597                        	
16598                        		.dbg	line,	"include\init.c", 880; // HIDE ALL LEVEL SPRITES //
16599                        	
16600                        		.dbg	line,	"include\init.c", 881; hide_LEVEL_SPRITES();
16601                        		__call		_hide_LEVEL_SPRITES
         01:DB14  20 87 FE   			call	_hide_LEVEL_SPRITES
16602                        	
16603                        		.dbg	line,	"include\init.c", 884; // SET VDC 1 SCREEN SIZE (IN TILES) - 32x32 = 256 PIXELS
16604                        	
16605                        		.dbg	line,	"include\init.c", 885; set_screen_size(SCR_SIZE_64x32);
16606                        		__st.umiq	1, _al
         01:DB17  A9 01      			lda.l	#1
         01:DB19  85 F8      			sta	_al
16607                        		__call		_set_screen_size.1
         01:DB1B  20 31 FF   			call	_set_screen_size.1
16608                        	
16609                        		.dbg	line,	"include\init.c", 888; // SET VDC 2 SCREEN SIZE (IN TILES) - 32x32 = 256 PIXELS
16610                        	
16611                        		.dbg	line,	"include\init.c", 889; sgx_set_screen_size(SCR_SIZE_32x32);
16612                        		__st.umiq	0, _al
         01:DB1E  64 F8      			stz	_al
16613                        		__call		_sgx_set_screen_size.1
         01:DB20  20 27 FF   			call	_sgx_set_screen_size.1
16614                        	
16615                        		.dbg	line,	"include\init.c", 894; //**************************************************************************************//
16616                        	
16617                        		.dbg	line,	"include\init.c", 895; //                                                                                      //
16618                        	
16619                        		.dbg	line,	"include\init.c", 896; //                                      VARIABLES                                       //
16620                        	
16621                        		.dbg	line,	"include\init.c", 897; //                                                                                      //
16622                        	
16623                        		.dbg	line,	"include\init.c", 898; //**************************************************************************************//
16624                        	
16625                        		.dbg	line,	"include\init.c", 900; index_x = 0;
16626                        		__st.umiq	0, _index_x
         01:DB23  9C CF 23   			stz	_index_x
16627                        	
16628                        		.dbg	line,	"include\init.c", 901; index_y = 0;
16629                        		__st.umiq	0, _index_y
         01:DB26  9C D0 23   			stz	_index_y
16630                        	
16631                        		.dbg	line,	"include\init.c", 902; item_index = 0;
16632                        		__st.umiq	0, _item_index
         01:DB29  9C D1 23   			stz	_item_index
16633                        	
16634                        		.dbg	line,	"include\init.c", 904; minutes = 0;
16635                        		__st.umiq	0, _minutes
         01:DB2C  9C 2A 23   			stz	_minutes
16636                        	
16637                        		.dbg	line,	"include\init.c", 905; seconds = 30;
16638                        		__st.umiq	30, _seconds
         01:DB2F  A9 1E      			lda.l	#30
         01:DB31  8D 2B 23   			sta	_seconds
16639                        	
16640                        		.dbg	line,	"include\init.c", 907; shop_counter = 0;
16641                        		__st.umiq	0, _shop_counter
         01:DB34  9C D3 23   			stz	_shop_counter
16642                        	
16643                        		.dbg	line,	"include\init.c", 908; shop_phase = SHOP_PHASE_ENTER;
16644                        		__st.umiq	0, _shop_phase
         01:DB37  9C D2 23   			stz	_shop_phase
16645                        	
16646                        		.dbg	line,	"include\init.c", 910; if(level_id == 1)
16647                        		__ld.umq	_level_id
         01:DB3A  AD 13 23   			lda	_level_id
16648                        		__equ_b.uiq	1
         01:DB3D  C9 01      			cmp	#1
         01:DB3F  F0 01      			beq	!+
         01:DB41  18         			clc
         01:DB42             	!:
16649                        		__bfalse	.LL714
         01:DB42  90 0A      			bcc	.LL714
16650                        	
16651                        		.dbg	line,	"include\init.c", 911; {
16652                        	
16653                        		.dbg	line,	"include\init.c", 912; ptr_SHOP_ITEM_PRICES = &TABLE_SHOP_PRICES_LV1[0];
16654                        		__ld.wi		_TABLE_SHOP_PRICES_LV1
         01:DB44  A9 8C      			lda.l	#_TABLE_SHOP_PRICES_LV1
         01:DB46  A0 61      			ldy.h	#_TABLE_SHOP_PRICES_LV1
16655                        		__st.wmq	_ptr_SHOP_ITEM_PRICES
         01:DB48  8D 46 26   			sta.l	_ptr_SHOP_ITEM_PRICES
         01:DB4B  8C 47 26   			sty.h	_ptr_SHOP_ITEM_PRICES
16656                        	
16657                        		.dbg	line,	"include\init.c", 913; }
16658                        	
16659                        		.dbg	line,	"include\init.c", 914; 
16660                        	
16661                        		.dbg	line,	"include\init.c", 919; //**************************************************************************************//
16662                        	
16663                        		.dbg	line,	"include\init.c", 920; //                                                                                      //
16664                        	
16665                        		.dbg	line,	"include\init.c", 921; //                                        VDC 2                                         //
16666                        	
16667                        		.dbg	line,	"include\init.c", 922; //                                                                                      //
16668                        	
16669                        		.dbg	line,	"include\init.c", 923; //**************************************************************************************//
16670                        	
16671                        		.dbg	line,	"include\init.c", 925; //--------------------------------------------------------------------------------------//
16672                        	
16673                        		.dbg	line,	"include\init.c", 926; //                                      LOAD FONT                                       //
16674                        	
16675                        		.dbg	line,	"include\init.c", 927; //--------------------------------------------------------------------------------------//
16676                        	
16677                        		.dbg	line,	"include\init.c", 929; load_vram( 0x0800, tileset_FONT, SIZEOF(tileset_FONT) >> 1 );
16678    01:DB4E             	.LL714:
16679                        		__st.wmiq	2048, _di
         01:DB4E  64 F0      			stz.l	_di
         01:DB50  A9 08      			lda.h	#2048
         01:DB52  85 F1      			sta.h	_di
16680                        		__farptr	_tileset_FONT, _bp_bank, _bp
         01:DB54  A9 60      			lda.l	#$6000 + ($1FFF & (_tileset_FONT))
         01:DB56  85 EC      			sta.l	_bp
         01:DB58  A9 71      			lda.h	#$6000 + ($1FFF & (_tileset_FONT))
         01:DB5A  85 ED      			sta.h	_bp
         01:DB5C  A9 04      			lda	#bank(_tileset_FONT)
         01:DB5E  85 02      			sta	_bp_bank
16681                        		__ld.wi		___sizeof__tileset_FONT
         01:DB60  A9 00      			lda.l	#___sizeof__tileset_FONT
         01:DB62  A0 0C      			ldy.h	#___sizeof__tileset_FONT
16682                        		__lsr.wi	1
         01:DB64  42         			say
         01:DB65  4A         			lsr	a
         01:DB66  42         			say
         01:DB67  6A         			ror	a
16683                        		__st.wmq	_ax
         01:DB68  85 F8      			sta.l	_ax
         01:DB6A  84 F9      			sty.h	_ax
16684                        		 _load_vram.3
         01:DB6C  82         			clx				; Offset to PCE VDC.
         01:DB6D  20 4F FF   			call	load_vram_x
16685                        	
16686                        		.dbg	line,	"include\init.c", 931; set_font_pal(15);
16687                        		__ld.uiq	15
         01:DB70  A9 0F      			lda	#15
16688                        		__call		_set_font_pal.1
         01:DB72  20 09 E6   			call	_set_font_pal.1
16689                        	
16690                        		.dbg	line,	"include\init.c", 934; //--------------------------------------------------------------------------------------//
16691                        	
16692                        		.dbg	line,	"include\init.c", 935; //                                    LOAD TILESET                                      //
16693                        	
16694                        		.dbg	line,	"include\init.c", 936; //--------------------------------------------------------------------------------------//
16695                        	
16696                        		.dbg	line,	"include\init.c", 938; sgx_load_vram( 0x1000, tileset_SHOP_BG_B, SIZEOF(tileset_SHOP_BG_B) >> 1 );
16697                        		__st.wmiq	4096, _di
         01:DB75  64 F0      			stz.l	_di
         01:DB77  A9 10      			lda.h	#4096
         01:DB79  85 F1      			sta.h	_di
16698                        		__farptr	_tileset_SHOP_BG_B, _bp_bank, _bp
         01:DB7B  A9 A0      			lda.l	#$6000 + ($1FFF & (_tileset_SHOP_BG_B))
         01:DB7D  85 EC      			sta.l	_bp
         01:DB7F  A9 6A      			lda.h	#$6000 + ($1FFF & (_tileset_SHOP_BG_B))
         01:DB81  85 ED      			sta.h	_bp
         01:DB83  A9 0D      			lda	#bank(_tileset_SHOP_BG_B)
         01:DB85  85 02      			sta	_bp_bank
16699                        		__ld.wi		___sizeof__tileset_SHOP_BG_B
         01:DB87  A9 60      			lda.l	#___sizeof__tileset_SHOP_BG_B
         01:DB89  A0 39      			ldy.h	#___sizeof__tileset_SHOP_BG_B
16700                        		__lsr.wi	1
         01:DB8B  42         			say
         01:DB8C  4A         			lsr	a
         01:DB8D  42         			say
         01:DB8E  6A         			ror	a
16701                        		__st.wmq	_ax
         01:DB8F  85 F8      			sta.l	_ax
         01:DB91  84 F9      			sty.h	_ax
16702                        		 _sgx_load_vram.3
         01:DB93  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         01:DB95  20 4F FF   			call	load_vram_x
16703                        	
16704                        		.dbg	line,	"include\init.c", 941; //--------------------------------------------------------------------------------------//
16705                        	
16706                        		.dbg	line,	"include\init.c", 942; //                                      LOAD ITEMS                                      //
16707                        	
16708                        		.dbg	line,	"include\init.c", 943; //--------------------------------------------------------------------------------------//
16709                        	
16710                        		.dbg	line,	"include\init.c", 945; for(i=0 ; i<10 ; i++)
16711                        		__st.umiq	0, __init_SHOP_end - 1  /* i */
         01:DB98  9C 10 23   			stz	__init_SHOP_end - 1
16712    01:DB9B             	.LL715:
16713                        		__ld.umq	__init_SHOP_end - 1  /* i */
         01:DB9B  AD 10 23   			lda	__init_SHOP_end - 1
16714                        		__ult_b.uiq	10
         01:DB9E  C9 0A      			cmp	#10		; Subtract integer from A.
         01:DBA0  6A         			ror	a		; CC if A < integer.
         01:DBA1  49 80      			eor	#$80
         01:DBA3  2A         			rol	a
16715                        		__btrue		.LL717
         01:DBA4  B0 07      			bcs	.LL717
16716                        		__bra		.LL718
         01:DBA6  80 42      			bra	.LL718
16717    01:DBA8             	.LL716:
16718                        		__inc.umq	__init_SHOP_end - 1  /* i */
         01:DBA8  EE 10 23   			inc	__init_SHOP_end - 1
16719                        		__bra		.LL715
         01:DBAB  80 EE      			bra	.LL715
16720    01:DBAD             	.LL717:
16721                        	
16722                        		.dbg	line,	"include\init.c", 946; {
16723                        	
16724                        		.dbg	line,	"include\init.c", 947; set_far_base(TABLE_SHOP_ITEMS_TILES_BANK[i],TABLE_SHOP_ITEMS_TILES_ADR[i]);
16725                        		__ldx.umq	__init_SHOP_end - 1  /* i */
         01:DBAD  AE 10 23   			ldx	__init_SHOP_end - 1
16726                        		__ld.uax	_TABLE_SHOP_ITEMS_TILES_BANK
         01:DBB0  BD B4 61   			lda	_TABLE_SHOP_ITEMS_TILES_BANK, x
         01:DBB3  C2         			cly
16727                        		__st.umq	_bp_bank
         01:DBB4  85 02      			sta	_bp_bank
16728                        		__ld2x.umq	__init_SHOP_end - 1  /* i */
         01:DBB6  AD 10 23   			lda	__init_SHOP_end - 1
         01:DBB9  0A         			asl	a
         01:DBBA  AA         			tax
16729                        		__ld.wax	_TABLE_SHOP_ITEMS_TILES_ADR
         01:DBBB  BD A0 61   			lda.l	_TABLE_SHOP_ITEMS_TILES_ADR, x
         01:DBBE  BC A1 61   			ldy.h	_TABLE_SHOP_ITEMS_TILES_ADR, x
16730                        		__st.wmq	_bp
         01:DBC1  85 EC      			sta.l	_bp
         01:DBC3  84 ED      			sty.h	_bp
16731                        	
16732                        		.dbg	line,	"include\init.c", 948; sgx_far_load_vram( 0x1000 + (i * TILES_4), TILES_4 );
16733                        		__ld.um		__init_SHOP_end - 1  /* i */
         01:DBC5  AD 10 23   			lda	__init_SHOP_end - 1
         01:DBC8  C2         			cly
16734                        		__asl.wi	6
         01:DBC9  85 00      			sta	__temp
         01:DBCB  98         			tya
         01:DBCC  4A         			lsr	a
         01:DBCD  20 CB E1   			jsr	aslw6
         01:DBD0  29 C0      			and.l	#$FF << 6
16735                        		__add.wi	4096
         01:DBD2  18         			clc
         01:DBD3  69 00      			adc.l	#4096
         01:DBD5  42         			say
         01:DBD6  69 10      			adc.h	#4096
         01:DBD8  42         			say
16736                        		__st.wmq	_di
         01:DBD9  85 F0      			sta.l	_di
         01:DBDB  84 F1      			sty.h	_di
16737                        		__st.wmiq	64, _ax
         01:DBDD  A9 40      			lda.l	#64
         01:DBDF  85 F8      			sta.l	_ax
         01:DBE1  64 F9      			stz.h	_ax
16738                        		 _sgx_far_load_vram.2
         01:DBE3  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
         01:DBE5  20 4F FF   			call	load_vram_x
16739                        	
16740                        		.dbg	line,	"include\init.c", 949; }
16741                        		__bra		.LL716
         01:DBE8  80 BE      			bra	.LL716
16742    01:DBEA             	.LL718:
16743                        	
16744                        		.dbg	line,	"include\init.c", 952; //--------------------------------------------------------------------------------------//
16745                        	
16746                        		.dbg	line,	"include\init.c", 953; //                                      SET BLOCKS                                      //
16747                        	
16748                        		.dbg	line,	"include\init.c", 954; //--------------------------------------------------------------------------------------//
16749                        	
16750                        		.dbg	line,	"include\init.c", 956; sgx_set_blocks( blocks_SHOP_BG_B , tilemap_mask , 256 );
16751                        		__farptr	_blocks_SHOP_BG_B, sgx_blk_bank, sgx_blk_addr
         01:DBEA  A9 00      			lda.l	#$6000 + ($1FFF & (_blocks_SHOP_BG_B))
         01:DBEC  8D C8 2B   			sta.l	sgx_blk_addr
         01:DBEF  A9 68      			lda.h	#$6000 + ($1FFF & (_blocks_SHOP_BG_B))
         01:DBF1  8D C9 2B   			sta.h	sgx_blk_addr
         01:DBF4  A9 0F      			lda	#bank(_blocks_SHOP_BG_B)
         01:DBF6  8D CA 2B   			sta	sgx_blk_bank
16752                        		__farptr	_tilemap_mask, sgx_tbl_bank, sgx_tbl_addr
         01:DBF9  A9 D4      			lda.l	#$6000 + ($1FFF & (_tilemap_mask))
         01:DBFB  8D C5 2B   			sta.l	sgx_tbl_addr
         01:DBFE  A9 63      			lda.h	#$6000 + ($1FFF & (_tilemap_mask))
         01:DC00  8D C6 2B   			sta.h	sgx_tbl_addr
         01:DC03  A9 F8      			lda	#bank(_tilemap_mask)
         01:DC05  8D C7 2B   			sta	sgx_tbl_bank
16753                        		__st.umiq	256, _al
         01:DC08  A9 00      			lda.l	#256
         01:DC0A  85 F8      			sta	_al
16754                        		__call		_sgx_set_blocks.3
         01:DC0C  20 7D FE   			call	_sgx_set_blocks.3
16755                        	
16756                        		.dbg	line,	"include\init.c", 960; //--------------------------------------------------------------------------------------//
16757                        	
16758                        		.dbg	line,	"include\init.c", 961; //                                       SET MAP                                        //
16759                        	
16760                        		.dbg	line,	"include\init.c", 962; //--------------------------------------------------------------------------------------//
16761                        	
16762                        		.dbg	line,	"include\init.c", 964; sgx_set_blkmap( map_SHOP_BG_B, COUNTOF(map_SHOP_BG_B) );
16763                        		__farptr	_map_SHOP_BG_B, sgx_map_bank, sgx_map_addr
         01:DC0F  A9 00      			lda.l	#$6000 + ($1FFF & (_map_SHOP_BG_B))
         01:DC11  8D CB 2B   			sta.l	sgx_map_addr
         01:DC14  A9 70      			lda.h	#$6000 + ($1FFF & (_map_SHOP_BG_B))
         01:DC16  8D CC 2B   			sta.h	sgx_map_addr
         01:DC19  A9 0F      			lda	#bank(_map_SHOP_BG_B)
         01:DC1B  8D CD 2B   			sta	sgx_map_bank
16764                        		__ld.wi		___countof__map_SHOP_BG_B
         01:DC1E  A9 10      			lda.l	#___countof__map_SHOP_BG_B
         01:DC20  A0 00      			ldy.h	#___countof__map_SHOP_BG_B
16765                        		__st.umq	sgx_map_line_w
         01:DC22  8D 8E 26   			sta	sgx_map_line_w
16766                        		 _sgx_set_blkmap.2
         01:DC25  9C D0 2B   			stz	sgx_scr_bank
16767                        	
16768                        		.dbg	line,	"include\init.c", 967; //--------------------------------------------------------------------------------------//
16769                        	
16770                        		.dbg	line,	"include\init.c", 968; //                                    DRAW TILEMAP                                      //
16771                        	
16772                        		.dbg	line,	"include\init.c", 969; //--------------------------------------------------------------------------------------//
16773                        	
16774                        		.dbg	line,	"include\init.c", 971; // The blkmap is drawn using global variables for the top-left coordinate
16775                        	
16776                        		.dbg	line,	"include\init.c", 972; // in pixels, and the draw width and height in terms of 8x8 characters.
16777                        	
16778                        		.dbg	line,	"include\init.c", 974; sgx_map_pxl_x = 0;
16779                        		__st.wmiq	0, _sgx_map_pxl_x
         01:DC28  9C 90 26   			stz.l	_sgx_map_pxl_x
         01:DC2B  9C 91 26   			stz.h	_sgx_map_pxl_x
16780                        	
16781                        		.dbg	line,	"include\init.c", 975; sgx_map_pxl_y = 0;
16782                        		__st.wmiq	0, _sgx_map_pxl_y
         01:DC2E  9C 92 26   			stz.l	_sgx_map_pxl_y
         01:DC31  9C 93 26   			stz.h	_sgx_map_pxl_y
16783                        	
16784                        		.dbg	line,	"include\init.c", 977; sgx_map_draw_w = 32;
16785                        		__st.umiq	32, _sgx_map_draw_w
         01:DC34  A9 20      			lda.l	#32
         01:DC36  8D 8C 26   			sta	_sgx_map_draw_w
16786                        	
16787                        		.dbg	line,	"include\init.c", 978; sgx_map_draw_h = 28;
16788                        		__st.umiq	28, _sgx_map_draw_h
         01:DC39  A9 1C      			lda.l	#28
         01:DC3B  8D 8D 26   			sta	_sgx_map_draw_h
16789                        	
16790                        		.dbg	line,	"include\init.c", 981; //**************************************************************************************//
16791                        	
16792                        		.dbg	line,	"include\init.c", 982; //                                                                                      //
16793                        	
16794                        		.dbg	line,	"include\init.c", 983; //                                  SETUP SCROLL_SPLIT                                  //
16795                        	
16796                        		.dbg	line,	"include\init.c", 984; //                                                                                      //
16797                        	
16798                        		.dbg	line,	"include\init.c", 985; //**************************************************************************************//
16799                        	
16800                        		.dbg	line,	"include\init.c", 987; sgx_draw_map();
16801                        		__call		_sgx_draw_map
         01:DC3E  20 EB FE   			call	_sgx_draw_map
16802                        	
16803                        		.dbg	line,	"include\init.c", 989; sgx_scroll_split(0,   0, sgx_map_pxl_x & (BAT_SIZE_W - 1), sgx_map_pxl_y & (BAT_SIZE_H - 1), BKG_ON | SPR_ON);
16804                        		__st.umiq	0, _al
         01:DC41  64 F8      			stz	_al
16805                        		__st.umiq	0, _ah
         01:DC43  64 F9      			stz	_ah
16806                        		__ld.wm		_sgx_map_pxl_x
         01:DC45  AD 90 26   			lda.l	_sgx_map_pxl_x
         01:DC48  AC 91 26   			ldy.h	_sgx_map_pxl_x
16807                        		__and.wi	2047
         01:DC4B  29 FF      			and.l	#2047
         01:DC4D  42         			say
         01:DC4E  29 07      			and.h	#2047
         01:DC50  42         			say
16808                        		__st.wmq	_bx
         01:DC51  85 FA      			sta.l	_bx
         01:DC53  84 FB      			sty.h	_bx
16809                        		__ld.wm		_sgx_map_pxl_y
         01:DC55  AD 92 26   			lda.l	_sgx_map_pxl_y
         01:DC58  AC 93 26   			ldy.h	_sgx_map_pxl_y
16810                        		__and.wi	255
         01:DC5B  29 FF      			and	#255
         01:DC5D  C2         			cly
16811                        		__st.wmq	_cx
         01:DC5E  85 FC      			sta.l	_cx
         01:DC60  84 FD      			sty.h	_cx
16812                        		__st.umiq	192, _dl
         01:DC62  A9 C0      			lda.l	#192
         01:DC64  85 FE      			sta	_dl
16813                        		__call		_sgx_scroll_split.5
         01:DC66  20 77 FF   			call	_sgx_scroll_split.5
16814                        	
16815                        		.dbg	line,	"include\init.c", 994; //**************************************************************************************//
16816                        	
16817                        		.dbg	line,	"include\init.c", 995; //                                                                                      //
16818                        	
16819                        		.dbg	line,	"include\init.c", 996; //                                         HUD                                          //
16820                        	
16821                        		.dbg	line,	"include\init.c", 997; //                                                                                      //
16822                        	
16823                        		.dbg	line,	"include\init.c", 998; //**************************************************************************************//
16824                        	
16825                        		.dbg	line,	"include\init.c", 1000; init_HUD();
16826                        		__call		_init_HUD
         01:DC69  20 E1 FE   			call	_init_HUD
16827                        	
16828                        		.dbg	line,	"include\init.c", 1003; //--------------------------------------------------------------------------------------//
16829                        	
16830                        		.dbg	line,	"include\init.c", 1004; //                                     DRAW PRICES                                      //
16831                        	
16832                        		.dbg	line,	"include\init.c", 1005; //--------------------------------------------------------------------------------------//
16833                        	
16834                        		.dbg	line,	"include\init.c", 1007; shop_prices[0] = *(ptr_SHOP_ITEM_PRICES);
16835                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         01:DC6C  AD 46 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         01:DC6F  AC 47 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
16836                        		__st.wm		__ptr
         01:DC72  85 88      			sta.l	__ptr
         01:DC74  84 89      			sty.h	__ptr
16837                        		__ld.wp		__ptr
         01:DC76  A0 01      			ldy	#1
         01:DC78  B1 88      			lda	[__ptr], y
         01:DC7A  A8         			tay
         01:DC7B  B2 88      			lda	[__ptr]
16838                        		__st.wmq	_shop_prices
         01:DC7D  8D 32 26   			sta.l	_shop_prices
         01:DC80  8C 33 26   			sty.h	_shop_prices
16839                        	
16840                        		.dbg	line,	"include\init.c", 1008; shop_prices[1] = *(ptr_SHOP_ITEM_PRICES+1);
16841                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         01:DC83  AD 46 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         01:DC86  AC 47 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
16842                        		__add.wi	2
         01:DC89  18         			clc
         01:DC8A  69 02      			adc.l	#2
         01:DC8C  90 01      			bcc	!+
         01:DC8E  C8         			iny
         01:DC8F             	!:
16843                        		__st.wm		__ptr
         01:DC8F  85 88      			sta.l	__ptr
         01:DC91  84 89      			sty.h	__ptr
16844                        		__ld.wp		__ptr
         01:DC93  A0 01      			ldy	#1
         01:DC95  B1 88      			lda	[__ptr], y
         01:DC97  A8         			tay
         01:DC98  B2 88      			lda	[__ptr]
16845                        		__st.wmq	_shop_prices + 2
         01:DC9A  8D 34 26   			sta.l	_shop_prices + 2
         01:DC9D  8C 35 26   			sty.h	_shop_prices + 2
16846                        	
16847                        		.dbg	line,	"include\init.c", 1009; shop_prices[2] = *(ptr_SHOP_ITEM_PRICES+2);
16848                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         01:DCA0  AD 46 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         01:DCA3  AC 47 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
16849                        		__add.wi	4
         01:DCA6  18         			clc
         01:DCA7  69 04      			adc.l	#4
         01:DCA9  90 01      			bcc	!+
         01:DCAB  C8         			iny
         01:DCAC             	!:
16850                        		__st.wm		__ptr
         01:DCAC  85 88      			sta.l	__ptr
         01:DCAE  84 89      			sty.h	__ptr
16851                        		__ld.wp		__ptr
         01:DCB0  A0 01      			ldy	#1
         01:DCB2  B1 88      			lda	[__ptr], y
         01:DCB4  A8         			tay
         01:DCB5  B2 88      			lda	[__ptr]
16852                        		__st.wmq	_shop_prices + 4
         01:DCB7  8D 36 26   			sta.l	_shop_prices + 4
         01:DCBA  8C 37 26   			sty.h	_shop_prices + 4
16853                        	
16854                        		.dbg	line,	"include\init.c", 1010; shop_prices[3] = *(ptr_SHOP_ITEM_PRICES+3);
16855                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         01:DCBD  AD 46 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         01:DCC0  AC 47 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
16856                        		__add.wi	6
         01:DCC3  18         			clc
         01:DCC4  69 06      			adc.l	#6
         01:DCC6  90 01      			bcc	!+
         01:DCC8  C8         			iny
         01:DCC9             	!:
16857                        		__st.wm		__ptr
         01:DCC9  85 88      			sta.l	__ptr
         01:DCCB  84 89      			sty.h	__ptr
16858                        		__ld.wp		__ptr
         01:DCCD  A0 01      			ldy	#1
         01:DCCF  B1 88      			lda	[__ptr], y
         01:DCD1  A8         			tay
         01:DCD2  B2 88      			lda	[__ptr]
16859                        		__st.wmq	_shop_prices + 6
         01:DCD4  8D 38 26   			sta.l	_shop_prices + 6
         01:DCD7  8C 39 26   			sty.h	_shop_prices + 6
16860                        	
16861                        		.dbg	line,	"include\init.c", 1011; shop_prices[4] = *(ptr_SHOP_ITEM_PRICES+4);
16862                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         01:DCDA  AD 46 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         01:DCDD  AC 47 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
16863                        		__add.wi	8
         01:DCE0  18         			clc
         01:DCE1  69 08      			adc.l	#8
         01:DCE3  90 01      			bcc	!+
         01:DCE5  C8         			iny
         01:DCE6             	!:
16864                        		__st.wm		__ptr
         01:DCE6  85 88      			sta.l	__ptr
         01:DCE8  84 89      			sty.h	__ptr
16865                        		__ld.wp		__ptr
         01:DCEA  A0 01      			ldy	#1
         01:DCEC  B1 88      			lda	[__ptr], y
         01:DCEE  A8         			tay
         01:DCEF  B2 88      			lda	[__ptr]
16866                        		__st.wmq	_shop_prices + 8
         01:DCF1  8D 3A 26   			sta.l	_shop_prices + 8
         01:DCF4  8C 3B 26   			sty.h	_shop_prices + 8
16867                        	
16868                        		.dbg	line,	"include\init.c", 1012; 
16869                        	
16870                        		.dbg	line,	"include\init.c", 1013; shop_prices[5] = *(ptr_SHOP_ITEM_PRICES+5);
16871                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         01:DCF7  AD 46 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         01:DCFA  AC 47 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
16872                        		__add.wi	10
         01:DCFD  18         			clc
         01:DCFE  69 0A      			adc.l	#10
         01:DD00  90 01      			bcc	!+
         01:DD02  C8         			iny
         01:DD03             	!:
16873                        		__st.wm		__ptr
         01:DD03  85 88      			sta.l	__ptr
         01:DD05  84 89      			sty.h	__ptr
16874                        		__ld.wp		__ptr
         01:DD07  A0 01      			ldy	#1
         01:DD09  B1 88      			lda	[__ptr], y
         01:DD0B  A8         			tay
         01:DD0C  B2 88      			lda	[__ptr]
16875                        		__st.wmq	_shop_prices + 10
         01:DD0E  8D 3C 26   			sta.l	_shop_prices + 10
         01:DD11  8C 3D 26   			sty.h	_shop_prices + 10
16876                        	
16877                        		.dbg	line,	"include\init.c", 1014; shop_prices[6] = *(ptr_SHOP_ITEM_PRICES+6);
16878                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         01:DD14  AD 46 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         01:DD17  AC 47 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
16879                        		__add.wi	12
         01:DD1A  18         			clc
         01:DD1B  69 0C      			adc.l	#12
         01:DD1D  90 01      			bcc	!+
         01:DD1F  C8         			iny
         01:DD20             	!:
16880                        		__st.wm		__ptr
         01:DD20  85 88      			sta.l	__ptr
         01:DD22  84 89      			sty.h	__ptr
16881                        		__ld.wp		__ptr
         01:DD24  A0 01      			ldy	#1
         01:DD26  B1 88      			lda	[__ptr], y
         01:DD28  A8         			tay
         01:DD29  B2 88      			lda	[__ptr]
16882                        		__st.wmq	_shop_prices + 12
         01:DD2B  8D 3E 26   			sta.l	_shop_prices + 12
         01:DD2E  8C 3F 26   			sty.h	_shop_prices + 12
16883                        	
16884                        		.dbg	line,	"include\init.c", 1015; shop_prices[7] = *(ptr_SHOP_ITEM_PRICES+7);
16885                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         01:DD31  AD 46 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         01:DD34  AC 47 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
16886                        		__add.wi	14
         01:DD37  18         			clc
         01:DD38  69 0E      			adc.l	#14
         01:DD3A  90 01      			bcc	!+
         01:DD3C  C8         			iny
         01:DD3D             	!:
16887                        		__st.wm		__ptr
         01:DD3D  85 88      			sta.l	__ptr
         01:DD3F  84 89      			sty.h	__ptr
16888                        		__ld.wp		__ptr
         01:DD41  A0 01      			ldy	#1
         01:DD43  B1 88      			lda	[__ptr], y
         01:DD45  A8         			tay
         01:DD46  B2 88      			lda	[__ptr]
16889                        		__st.wmq	_shop_prices + 14
         01:DD48  8D 40 26   			sta.l	_shop_prices + 14
         01:DD4B  8C 41 26   			sty.h	_shop_prices + 14
16890                        	
16891                        		.dbg	line,	"include\init.c", 1016; shop_prices[8] = *(ptr_SHOP_ITEM_PRICES+8);
16892                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         01:DD4E  AD 46 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         01:DD51  AC 47 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
16893                        		__add.wi	16
         01:DD54  18         			clc
         01:DD55  69 10      			adc.l	#16
         01:DD57  90 01      			bcc	!+
         01:DD59  C8         			iny
         01:DD5A             	!:
16894                        		__st.wm		__ptr
         01:DD5A  85 88      			sta.l	__ptr
         01:DD5C  84 89      			sty.h	__ptr
16895                        		__ld.wp		__ptr
         01:DD5E  A0 01      			ldy	#1
         01:DD60  B1 88      			lda	[__ptr], y
         01:DD62  A8         			tay
         01:DD63  B2 88      			lda	[__ptr]
16896                        		__st.wmq	_shop_prices + 16
         01:DD65  8D 42 26   			sta.l	_shop_prices + 16
         01:DD68  8C 43 26   			sty.h	_shop_prices + 16
16897                        	
16898                        		.dbg	line,	"include\init.c", 1017; shop_prices[9] = *(ptr_SHOP_ITEM_PRICES+9);
16899                        		__ld.wm		_ptr_SHOP_ITEM_PRICES
         01:DD6B  AD 46 26   			lda.l	_ptr_SHOP_ITEM_PRICES
         01:DD6E  AC 47 26   			ldy.h	_ptr_SHOP_ITEM_PRICES
16900                        		__add.wi	18
         01:DD71  18         			clc
         01:DD72  69 12      			adc.l	#18
         01:DD74  90 01      			bcc	!+
         01:DD76  C8         			iny
         01:DD77             	!:
16901                        		__st.wm		__ptr
         01:DD77  85 88      			sta.l	__ptr
         01:DD79  84 89      			sty.h	__ptr
16902                        		__ld.wp		__ptr
         01:DD7B  A0 01      			ldy	#1
         01:DD7D  B1 88      			lda	[__ptr], y
         01:DD7F  A8         			tay
         01:DD80  B2 88      			lda	[__ptr]
16903                        		__st.wmq	_shop_prices + 18
         01:DD82  8D 44 26   			sta.l	_shop_prices + 18
         01:DD85  8C 45 26   			sty.h	_shop_prices + 18
16904                        	
16905                        		.dbg	line,	"include\init.c", 1020; put_number(shop_prices[0],4,2,20);
16906                        		__ld.wm		_shop_prices
         01:DD88  AD 32 26   			lda.l	_shop_prices
         01:DD8B  AC 33 26   			ldy.h	_shop_prices
16907                        		__st.wmq	_bx
         01:DD8E  85 FA      			sta.l	_bx
         01:DD90  84 FB      			sty.h	_bx
16908                        		__st.umiq	4, _cl
         01:DD92  A9 04      			lda.l	#4
         01:DD94  85 FC      			sta	_cl
16909                        		__st.umiq	2, _dil
         01:DD96  A9 02      			lda.l	#2
         01:DD98  85 F0      			sta	_dil
16910                        		__st.umiq	20, _dih
         01:DD9A  A9 14      			lda.l	#20
         01:DD9C  85 F1      			sta	_dih
16911                        		__call		_put_number.4
         01:DD9E  20 9F FF   			call	_put_number.4
16912                        	
16913                        		.dbg	line,	"include\init.c", 1021; put_number(shop_prices[1],4,7,20);
16914                        		__ld.wm		_shop_prices + 2
         01:DDA1  AD 34 26   			lda.l	_shop_prices + 2
         01:DDA4  AC 35 26   			ldy.h	_shop_prices + 2
16915                        		__st.wmq	_bx
         01:DDA7  85 FA      			sta.l	_bx
         01:DDA9  84 FB      			sty.h	_bx
16916                        		__st.umiq	4, _cl
         01:DDAB  A9 04      			lda.l	#4
         01:DDAD  85 FC      			sta	_cl
16917                        		__st.umiq	7, _dil
         01:DDAF  A9 07      			lda.l	#7
         01:DDB1  85 F0      			sta	_dil
16918                        		__st.umiq	20, _dih
         01:DDB3  A9 14      			lda.l	#20
         01:DDB5  85 F1      			sta	_dih
16919                        		__call		_put_number.4
         01:DDB7  20 9F FF   			call	_put_number.4
16920                        	
16921                        		.dbg	line,	"include\init.c", 1022; put_number(shop_prices[2],4,12,20);
16922                        		__ld.wm		_shop_prices + 4
         01:DDBA  AD 36 26   			lda.l	_shop_prices + 4
         01:DDBD  AC 37 26   			ldy.h	_shop_prices + 4
16923                        		__st.wmq	_bx
         01:DDC0  85 FA      			sta.l	_bx
         01:DDC2  84 FB      			sty.h	_bx
16924                        		__st.umiq	4, _cl
         01:DDC4  A9 04      			lda.l	#4
         01:DDC6  85 FC      			sta	_cl
16925                        		__st.umiq	12, _dil
         01:DDC8  A9 0C      			lda.l	#12
         01:DDCA  85 F0      			sta	_dil
16926                        		__st.umiq	20, _dih
         01:DDCC  A9 14      			lda.l	#20
         01:DDCE  85 F1      			sta	_dih
16927                        		__call		_put_number.4
         01:DDD0  20 9F FF   			call	_put_number.4
16928                        	
16929                        		.dbg	line,	"include\init.c", 1023; put_number(shop_prices[3],4,17,20);
16930                        		__ld.wm		_shop_prices + 6
         01:DDD3  AD 38 26   			lda.l	_shop_prices + 6
         01:DDD6  AC 39 26   			ldy.h	_shop_prices + 6
16931                        		__st.wmq	_bx
         01:DDD9  85 FA      			sta.l	_bx
         01:DDDB  84 FB      			sty.h	_bx
16932                        		__st.umiq	4, _cl
         01:DDDD  A9 04      			lda.l	#4
         01:DDDF  85 FC      			sta	_cl
16933                        		__st.umiq	17, _dil
         01:DDE1  A9 11      			lda.l	#17
         01:DDE3  85 F0      			sta	_dil
16934                        		__st.umiq	20, _dih
         01:DDE5  A9 14      			lda.l	#20
         01:DDE7  85 F1      			sta	_dih
16935                        		__call		_put_number.4
         01:DDE9  20 9F FF   			call	_put_number.4
16936                        	
16937                        		.dbg	line,	"include\init.c", 1024; put_number(shop_prices[4],4,22,20);
16938                        		__ld.wm		_shop_prices + 8
         01:DDEC  AD 3A 26   			lda.l	_shop_prices + 8
         01:DDEF  AC 3B 26   			ldy.h	_shop_prices + 8
16939                        		__st.wmq	_bx
         01:DDF2  85 FA      			sta.l	_bx
         01:DDF4  84 FB      			sty.h	_bx
16940                        		__st.umiq	4, _cl
         01:DDF6  A9 04      			lda.l	#4
         01:DDF8  85 FC      			sta	_cl
16941                        		__st.umiq	22, _dil
         01:DDFA  A9 16      			lda.l	#22
         01:DDFC  85 F0      			sta	_dil
16942                        		__st.umiq	20, _dih
         01:DDFE  A9 14      			lda.l	#20
         01:DE00  85 F1      			sta	_dih
16943                        		__call		_put_number.4
         01:DE02  20 9F FF   			call	_put_number.4
16944                        	
16945                        		.dbg	line,	"include\init.c", 1026; put_number(shop_prices[5],4,2,23);
16946                        		__ld.wm		_shop_prices + 10
         01:DE05  AD 3C 26   			lda.l	_shop_prices + 10
         01:DE08  AC 3D 26   			ldy.h	_shop_prices + 10
16947                        		__st.wmq	_bx
         01:DE0B  85 FA      			sta.l	_bx
         01:DE0D  84 FB      			sty.h	_bx
16948                        		__st.umiq	4, _cl
         01:DE0F  A9 04      			lda.l	#4
         01:DE11  85 FC      			sta	_cl
16949                        		__st.umiq	2, _dil
         01:DE13  A9 02      			lda.l	#2
         01:DE15  85 F0      			sta	_dil
16950                        		__st.umiq	23, _dih
         01:DE17  A9 17      			lda.l	#23
         01:DE19  85 F1      			sta	_dih
16951                        		__call		_put_number.4
         01:DE1B  20 9F FF   			call	_put_number.4
16952                        	
16953                        		.dbg	line,	"include\init.c", 1027; put_number(shop_prices[6],4,7,23);
16954                        		__ld.wm		_shop_prices + 12
         01:DE1E  AD 3E 26   			lda.l	_shop_prices + 12
         01:DE21  AC 3F 26   			ldy.h	_shop_prices + 12
16955                        		__st.wmq	_bx
         01:DE24  85 FA      			sta.l	_bx
         01:DE26  84 FB      			sty.h	_bx
16956                        		__st.umiq	4, _cl
         01:DE28  A9 04      			lda.l	#4
         01:DE2A  85 FC      			sta	_cl
16957                        		__st.umiq	7, _dil
         01:DE2C  A9 07      			lda.l	#7
         01:DE2E  85 F0      			sta	_dil
16958                        		__st.umiq	23, _dih
         01:DE30  A9 17      			lda.l	#23
         01:DE32  85 F1      			sta	_dih
16959                        		__call		_put_number.4
         01:DE34  20 9F FF   			call	_put_number.4
16960                        	
16961                        		.dbg	line,	"include\init.c", 1028; put_number(shop_prices[7],4,12,23);
16962                        		__ld.wm		_shop_prices + 14
         01:DE37  AD 40 26   			lda.l	_shop_prices + 14
         01:DE3A  AC 41 26   			ldy.h	_shop_prices + 14
16963                        		__st.wmq	_bx
         01:DE3D  85 FA      			sta.l	_bx
         01:DE3F  84 FB      			sty.h	_bx
16964                        		__st.umiq	4, _cl
         01:DE41  A9 04      			lda.l	#4
         01:DE43  85 FC      			sta	_cl
16965                        		__st.umiq	12, _dil
         01:DE45  A9 0C      			lda.l	#12
         01:DE47  85 F0      			sta	_dil
16966                        		__st.umiq	23, _dih
         01:DE49  A9 17      			lda.l	#23
         01:DE4B  85 F1      			sta	_dih
16967                        		__call		_put_number.4
         01:DE4D  20 9F FF   			call	_put_number.4
16968                        	
16969                        		.dbg	line,	"include\init.c", 1029; put_number(shop_prices[8],4,17,23);
16970                        		__ld.wm		_shop_prices + 16
         01:DE50  AD 42 26   			lda.l	_shop_prices + 16
         01:DE53  AC 43 26   			ldy.h	_shop_prices + 16
16971                        		__st.wmq	_bx
         01:DE56  85 FA      			sta.l	_bx
         01:DE58  84 FB      			sty.h	_bx
16972                        		__st.umiq	4, _cl
         01:DE5A  A9 04      			lda.l	#4
         01:DE5C  85 FC      			sta	_cl
16973                        		__st.umiq	17, _dil
         01:DE5E  A9 11      			lda.l	#17
         01:DE60  85 F0      			sta	_dil
16974                        		__st.umiq	23, _dih
         01:DE62  A9 17      			lda.l	#23
         01:DE64  85 F1      			sta	_dih
16975                        		__call		_put_number.4
         01:DE66  20 9F FF   			call	_put_number.4
16976                        	
16977                        		.dbg	line,	"include\init.c", 1030; put_number(shop_prices[9],4,22,23);
16978                        		__ld.wm		_shop_prices + 18
         01:DE69  AD 44 26   			lda.l	_shop_prices + 18
         01:DE6C  AC 45 26   			ldy.h	_shop_prices + 18
16979                        		__st.wmq	_bx
         01:DE6F  85 FA      			sta.l	_bx
         01:DE71  84 FB      			sty.h	_bx
16980                        		__st.umiq	4, _cl
         01:DE73  A9 04      			lda.l	#4
         01:DE75  85 FC      			sta	_cl
16981                        		__st.umiq	22, _dil
         01:DE77  A9 16      			lda.l	#22
         01:DE79  85 F0      			sta	_dil
16982                        		__st.umiq	23, _dih
         01:DE7B  A9 17      			lda.l	#23
         01:DE7D  85 F1      			sta	_dih
16983                        		__call		_put_number.4
         01:DE7F  20 9F FF   			call	_put_number.4
16984                        	
16985                        		.dbg	line,	"include\init.c", 1035; //--------------------------------------------------------------------------------------//
16986                        	
16987                        		.dbg	line,	"include\init.c", 1036; //                                   LOAD BG PALETTES                                   //
16988                        	
16989                        		.dbg	line,	"include\init.c", 1037; //--------------------------------------------------------------------------------------//
16990                        	
16991                        		.dbg	line,	"include\init.c", 1039; load_palette( 0, palette_SHOP, 16 );
16992                        		__st.umiq	0, _al
         01:DE82  64 F8      			stz	_al
16993                        		__farptr	_palette_SHOP, _bp_bank, _bp
         01:DE84  A9 E0      			lda.l	#$6000 + ($1FFF & (_palette_SHOP))
         01:DE86  85 EC      			sta.l	_bp
         01:DE88  A9 75      			lda.h	#$6000 + ($1FFF & (_palette_SHOP))
         01:DE8A  85 ED      			sta.h	_bp
         01:DE8C  A9 0F      			lda	#bank(_palette_SHOP)
         01:DE8E  85 02      			sta	_bp_bank
16994                        		__st.umiq	16, _ah
         01:DE90  A9 10      			lda.l	#16
         01:DE92  85 F9      			sta	_ah
16995                        		__call		_load_palette.3
         01:DE94  20 1D FF   			call	_load_palette.3
16996                        	
16997                        		.dbg	line,	"include\init.c", 1044; //**************************************************************************************//
16998                        	
16999                        		.dbg	line,	"include\init.c", 1045; //                                                                                      //
17000                        	
17001                        		.dbg	line,	"include\init.c", 1046; //                                       SPRITES                                        //
17002                        	
17003                        		.dbg	line,	"include\init.c", 1047; //                                                                                      //
17004                        	
17005                        		.dbg	line,	"include\init.c", 1048; //**************************************************************************************//
17006                        	
17007                        		.dbg	line,	"include\init.c", 1050; //--------------------------------------------------------------------------------------//
17008                        	
17009                        		.dbg	line,	"include\init.c", 1051; //                                   HIDE ALL SPRITES                                   //
17010                        	
17011                        		.dbg	line,	"include\init.c", 1052; //--------------------------------------------------------------------------------------//
17012                        	
17013                        		.dbg	line,	"include\init.c", 1054; for(i=0 ; i<63 ; i++)
17014                        		__st.umiq	0, __init_SHOP_end - 1  /* i */
         01:DE97  9C 10 23   			stz	__init_SHOP_end - 1
17015    01:DE9A             	.LL719:
17016                        		__ld.umq	__init_SHOP_end - 1  /* i */
         01:DE9A  AD 10 23   			lda	__init_SHOP_end - 1
17017                        		__ult_b.uiq	63
         01:DE9D  C9 3F      			cmp	#63		; Subtract integer from A.
         01:DE9F  6A         			ror	a		; CC if A < integer.
         01:DEA0  49 80      			eor	#$80
         01:DEA2  2A         			rol	a
17018                        		__btrue		.LL721
         01:DEA3  B0 07      			bcs	.LL721
17019                        		__bra		.LL722
         01:DEA5  80 19      			bra	.LL722
17020    01:DEA7             	.LL720:
17021                        		__inc.umq	__init_SHOP_end - 1  /* i */
         01:DEA7  EE 10 23   			inc	__init_SHOP_end - 1
17022                        		__bra		.LL719
         01:DEAA  80 EE      			bra	.LL719
17023    01:DEAC             	.LL721:
17024                        	
17025                        		.dbg	line,	"include\init.c", 1055; {
17026                        	
17027                        		.dbg	line,	"include\init.c", 1056; spr_set(i);
17028                        		__ld.umq	__init_SHOP_end - 1  /* i */
         01:DEAC  AD 10 23   			lda	__init_SHOP_end - 1
17029                        		__call		_spr_set.1
         01:DEAF  20 DD E7   			call	_spr_set.1
17030                        	
17031                        		.dbg	line,	"include\init.c", 1057; spr_hide();
17032                        		__call		_spr_hide
         01:DEB2  20 F8 E7   			call	_spr_hide
17033                        	
17034                        		.dbg	line,	"include\init.c", 1059; sgx_spr_set(i);
17035                        		__ld.umq	__init_SHOP_end - 1  /* i */
         01:DEB5  AD 10 23   			lda	__init_SHOP_end - 1
17036                        		__call		_sgx_spr_set.1
         01:DEB8  20 8A E8   			call	_sgx_spr_set.1
17037                        	
17038                        		.dbg	line,	"include\init.c", 1060; sgx_spr_hide();
17039                        		__call		_sgx_spr_hide
         01:DEBB  20 A5 E8   			call	_sgx_spr_hide
17040                        	
17041                        		.dbg	line,	"include\init.c", 1061; }
17042                        		__bra		.LL720
         01:DEBE  80 E7      			bra	.LL720
17043    01:DEC0             	.LL722:
17044                        	
17045                        		.dbg	line,	"include\init.c", 1063; //--------------------------------------------------------------------------------------//
17046                        	
17047                        		.dbg	line,	"include\init.c", 1064; //                                        CURSOR                                        //
17048                        	
17049                        		.dbg	line,	"include\init.c", 1065; //--------------------------------------------------------------------------------------//
17050                        	
17051                        		.dbg	line,	"include\init.c", 1067; // LOAD CURSOR TILES //
17052                        	
17053                        		.dbg	line,	"include\init.c", 1068; load_vram(0x2000, tiles_SPR_CURSOR , TILES_16);
17054                        		__st.wmiq	8192, _di
         01:DEC0  64 F0      			stz.l	_di
         01:DEC2  A9 20      			lda.h	#8192
         01:DEC4  85 F1      			sta.h	_di
17055                        		__farptr	_tiles_SPR_CURSOR, _bp_bank, _bp
         01:DEC6  A9 E0      			lda.l	#$6000 + ($1FFF & (_tiles_SPR_CURSOR))
         01:DEC8  85 EC      			sta.l	_bp
         01:DECA  A9 7E      			lda.h	#$6000 + ($1FFF & (_tiles_SPR_CURSOR))
         01:DECC  85 ED      			sta.h	_bp
         01:DECE  A9 14      			lda	#bank(_tiles_SPR_CURSOR)
         01:DED0  85 02      			sta	_bp_bank
17056                        		__st.wmiq	256, _ax
         01:DED2  64 F8      			stz.l	_ax
         01:DED4  A9 01      			lda.h	#256
         01:DED6  85 F9      			sta.h	_ax
17057                        		 _load_vram.3
         01:DED8  82         			clx				; Offset to PCE VDC.
         01:DED9  20 4F FF   			call	load_vram_x
17058                        	
17059                        		.dbg	line,	"include\init.c", 1071; // SELECT CURSOR SPRITE //
17060                        	
17061                        		.dbg	line,	"include\init.c", 1072; spr_set(0);
17062                        		__ld.uiq	0
         01:DEDC  62         			cla
17063                        		__call		_spr_set.1
         01:DEDD  20 DD E7   			call	_spr_set.1
17064                        	
17065                        		.dbg	line,	"include\init.c", 1073; spr_hide();
17066                        		__call		_spr_hide
         01:DEE0  20 F8 E7   			call	_spr_hide
17067                        	
17068                        		.dbg	line,	"include\init.c", 1076; //spr_x(24);
17069                        	
17070                        		.dbg	line,	"include\init.c", 1077; //spr_y(144);
17071                        	
17072                        		.dbg	line,	"include\init.c", 1079; // SET TILES DATA FOR THE CURSOR //
17073                        	
17074                        		.dbg	line,	"include\init.c", 1080; spr_pattern(0x2000);
17075                        		__ld.wi		8192
         01:DEE3  62         			cla
         01:DEE4  A0 20      			ldy.h	#8192
17076                        		__call		_spr_pattern.1
         01:DEE6  20 26 E8   			call	_spr_pattern.1
17077                        	
17078                        		.dbg	line,	"include\init.c", 1083; spr_ctrl(FLIP_MAS|SIZE_MAS, NO_FLIP|SZ_32x32);
17079                        		__st.umiq	185, _al
         01:DEE9  A9 B9      			lda.l	#185
         01:DEEB  85 F8      			sta	_al
17080                        		__ld.uiq	17
         01:DEED  A9 11      			lda	#17
17081                        		__call		_spr_ctrl.2
         01:DEEF  20 3C E8   			call	_spr_ctrl.2
17082                        	
17083                        		.dbg	line,	"include\init.c", 1086; spr_pal(16);
17084                        		__ld.uiq	16
         01:DEF2  A9 10      			lda	#16
17085                        		__call		_spr_pal.1
         01:DEF4  20 4D E8   			call	_spr_pal.1
17086                        	
17087                        		.dbg	line,	"include\init.c", 1087; spr_pri(TRUE);
17088                        		__ld.uiq	1
         01:DEF7  A9 01      			lda	#1
17089                        		__call		_spr_pri.1
         01:DEF9  20 5C E8   			call	_spr_pri.1
17090                        	
17091                        		.dbg	line,	"include\init.c", 1090; // UPDATE PCE SAT //
17092                        	
17093                        		.dbg	line,	"include\init.c", 1091; satb_update();
17094                        		__call		_satb_update
         01:DEFC  20 13 FF   			call	_satb_update
17095                        	
17096                        		.dbg	line,	"include\init.c", 1092; sgx_satb_update();
17097                        		__call		_sgx_satb_update
         01:DEFF  20 73 FE   			call	_sgx_satb_update
17098                        	
17099                        		.dbg	line,	"include\init.c", 1096; //--------------------------------------------------------------------------------------//
17100                        	
17101                        		.dbg	line,	"include\init.c", 1097; //                                LOAD SPRITES PALETTES                                 //
17102                        	
17103                        		.dbg	line,	"include\init.c", 1098; //--------------------------------------------------------------------------------------//
17104                        	
17105                        		.dbg	line,	"include\init.c", 1100; load_palette( 16, palette_objects_2, 1 );
17106                        		__st.umiq	16, _al
         01:DF02  A9 10      			lda.l	#16
         01:DF04  85 F8      			sta	_al
17107                        		__farptr	_palette_objects_2, _bp_bank, _bp
         01:DF06  A9 E0      			lda.l	#$6000 + ($1FFF & (_palette_objects_2))
         01:DF08  85 EC      			sta.l	_bp
         01:DF0A  A9 70      			lda.h	#$6000 + ($1FFF & (_palette_objects_2))
         01:DF0C  85 ED      			sta.h	_bp
         01:DF0E  A9 14      			lda	#bank(_palette_objects_2)
         01:DF10  85 02      			sta	_bp_bank
17108                        		__st.umiq	1, _ah
         01:DF12  A9 01      			lda.l	#1
         01:DF14  85 F9      			sta	_ah
17109                        		__call		_load_palette.3
         01:DF16  20 1D FF   			call	_load_palette.3
17110                        	
17111                        		.dbg	line,	"include\init.c", 1104; // VSYNC //
17112                        	
17113                        		.dbg	line,	"include\init.c", 1105; vsync();
17114                        		__call		_vsync
         01:DF19  20 09 E3   			call	_vsync
17115                        	
17116                        		.dbg	line,	"include\init.c", 1107; // ENABLE DISPLAY //
17117                        	
17118                        		.dbg	line,	"include\init.c", 1108; disp_on();
17119                        		__call		_disp_on
         01:DF1C  20 16 E4   			call	_disp_on
17120                        	
17121                        		.dbg	line,	"include\init.c", 1109; }
17122    01:DF1F             	.LL713:
17123                        		__return	0
         01:DF1F  4C EF FF   			jmp	leave_proc
17124                        		.dbg	clear
17125                        		.endp
17126               67E0     		.data
17127               230F     		.bss
17128    F8:230F             	__init_SHOP_loc:
17129    F8:230F             			ds	2
17130    F8:2311             	__init_SHOP_end:
17131               E309     		.code
17132                        		.pceas
17133                        	
17134                        		.dbg	line,	"main.c", 33; main()
17135                        		.dbg	line,	"main.c", 34; {
17136                        	;***********************
17137                        	;***********************
17138                        	
17139                        		.hucc
17140    08:DDC0             		.proc		_main
17141                        		__enter		_main
17142                        	
17143                        		.dbg	line,	"main.c", 35; if(!sgx_detect())
17144                        		 _sgx_detect
         08:DDC0  AD E8 22   			lda	sgx_detected
         08:DDC3  C2         			cly
17145                        		__not.wr
         08:DDC4  84 00      			sty	__temp
         08:DDC6  05 00      			ora	__temp
         08:DDC8  18         			clc
         08:DDC9  D0 01      			bne	!+
         08:DDCB  38         			sec
         08:DDCC             	!:
17146                        		__bfalse	.LL724
         08:DDCC  90 15      			bcc	.LL724
17147                        	
17148                        		.dbg	line,	"main.c", 36; {
17149                        	
17150                        		.dbg	line,	"main.c", 37; put_string("Halt: SGX hardware not found", 2, 13);
17151                        		__ld.wi		__const1+36
         08:DDCE  A9 24      			lda.l	#__const1+36
         08:DDD0  A0 60      			ldy.h	#__const1+36
17152                        		__st.wmq	_bp
         08:DDD2  85 EC      			sta.l	_bp
         08:DDD4  84 ED      			sty.h	_bp
17153                        		__st.umiq	2, _dil
         08:DDD6  A9 02      			lda.l	#2
         08:DDD8  85 F0      			sta	_dil
17154                        		__st.umiq	13, _dih
         08:DDDA  A9 0D      			lda.l	#13
         08:DDDC  85 F1      			sta	_dih
17155                        		__call		_put_string.3
         08:DDDE  20 68 E6   			call	_put_string.3
17156                        	
17157                        		.dbg	line,	"main.c", 39; for(;;)
17158    08:DDE1             	.LL725	.alias		.LL727
17159    08:DDE1             	.LL726	.alias		.LL727
17160    08:DDE1             	.LL727:
17161                        	
17162                        		.dbg	line,	"main.c", 40; {
17163                        	
17164                        		.dbg	line,	"main.c", 41; // INFINITE LOOP //
17165                        	
17166                        		.dbg	line,	"main.c", 42; }
17167                        		__bra		.LL727
         08:DDE1  80 FE      			bra	.LL727
17168    08:DDE3             	.LL728:
17169                        	
17170                        		.dbg	line,	"main.c", 43; }
17171                        	
17172                        		.dbg	line,	"main.c", 48; init_SYSTEM();
17173    08:DDE3             	.LL724:
17174                        		__call		_init_SYSTEM
         08:DDE3  20 69 FE   			call	_init_SYSTEM
17175                        	
17176                        		.dbg	line,	"main.c", 49; 
17177                        	
17178                        		.dbg	line,	"main.c", 50; 
17179                        	
17180                        		.dbg	line,	"main.c", 51; init_VARIABLES();
17181                        		__call		_init_VARIABLES
         08:DDE6  20 5F FE   			call	_init_VARIABLES
17182                        	
17183                        		.dbg	line,	"main.c", 54; init_PLAYER();
17184                        		__call		_init_PLAYER
         08:DDE9  20 55 FE   			call	_init_PLAYER
17185                        	
17186                        		.dbg	line,	"main.c", 59; //**************************************************************************************//
17187                        	
17188                        		.dbg	line,	"main.c", 60; //                                                                                      //
17189                        	
17190                        		.dbg	line,	"main.c", 61; //                                         MAIN                                         //
17191                        	
17192                        		.dbg	line,	"main.c", 62; //                                                                                      //
17193                        	
17194                        		.dbg	line,	"main.c", 63; //**************************************************************************************//
17195                        	
17196                        		.dbg	line,	"main.c", 64; for(;;)
17197    08:DDEC             	.LL729:
17198    08:DDEC             	.LL730:
17199    08:DDEC             	.LL731:
17200                        	
17201                        		.dbg	line,	"main.c", 65; {
17202                        	
17203                        		.dbg	line,	"main.c", 66; switch(sequence_id)
17204                        		__ld.umq	_sequence_id
         08:DDEC  AD 11 23   			lda	_sequence_id
17205                        		__bra		.LL733
         08:DDEF  4C 99 DF   			bra	.LL733
17206                        	
17207                        		.dbg	line,	"main.c", 67; {
17208                        	
17209                        		.dbg	line,	"main.c", 68; //-----------------------------------------------------------------------------//
17210                        	
17211                        		.dbg	line,	"main.c", 69; //                                    TITLE                                    //
17212                        	
17213                        		.dbg	line,	"main.c", 70; //-----------------------------------------------------------------------------//
17214                        	
17215                        		.dbg	line,	"main.c", 71; case SEQUENCE_TITLE:
17216    08:DDF2             	.LL735:
17217                        		__case		0
17218                        	
17219                        		.dbg	line,	"main.c", 72; if(sequence_loaded == FALSE)
17220                        		__not.um	_sequence_loaded
         08:DDF2  AD 12 23   			lda	_sequence_loaded
         08:DDF5  18         			clc
         08:DDF6  D0 01      			bne	!+
         08:DDF8  38         			sec
         08:DDF9             	!:
17221                        		__bfalse	.LL736
         08:DDF9  90 0A      			bcc	.LL736
17222                        	
17223                        		.dbg	line,	"main.c", 73; {
17224                        	
17225                        		.dbg	line,	"main.c", 74; init_TITLE();
17226                        		__call		_init_TITLE
         08:DDFB  20 4B FE   			call	_init_TITLE
17227                        	
17228                        		.dbg	line,	"main.c", 76; sequence_loaded = TRUE;
17229                        		__st.umiq	1, _sequence_loaded
         08:DDFE  A9 01      			lda.l	#1
         08:DE00  8D 12 23   			sta	_sequence_loaded
17230                        	
17231                        		.dbg	line,	"main.c", 77; }
17232                        	
17233                        		.dbg	line,	"main.c", 79; else
17234                        		__bra		.LL737
         08:DE03  80 E7      			bra	.LL737
17235    08:DE05             	.LL736:
17236                        	
17237                        		.dbg	line,	"main.c", 80; {
17238                        	
17239                        		.dbg	line,	"main.c", 81; vsync();
17240                        		__call		_vsync
         08:DE05  20 09 E3   			call	_vsync
17241                        	
17242                        		.dbg	line,	"main.c", 83; joypad_BUTTONS_TITLE();
17243                        		__call		_joypad_BUTTONS_TITLE
         08:DE08  20 41 FE   			call	_joypad_BUTTONS_TITLE
17244                        	
17245                        		.dbg	line,	"main.c", 85; satb_update();
17246                        		__call		_satb_update
         08:DE0B  20 13 FF   			call	_satb_update
17247                        	
17248                        		.dbg	line,	"main.c", 86; }
17249    08:DE0E             	.LL737	.alias		.LL734
17250                        	
17251                        		.dbg	line,	"main.c", 88; break;
17252                        		__bra		.LL734
         08:DE0E  80 DC      			bra	.LL734
17253                        	
17254                        		.dbg	line,	"main.c", 91; //-----------------------------------------------------------------------------//
17255                        	
17256                        		.dbg	line,	"main.c", 92; //                                    INTRO                                    //
17257                        	
17258                        		.dbg	line,	"main.c", 93; //-----------------------------------------------------------------------------//
17259                        	
17260                        		.dbg	line,	"main.c", 94; case SEQUENCE_INTRO:
17261    08:DE10             	.LL738:
17262                        		__case		1
17263                        	
17264                        		.dbg	line,	"main.c", 95; break;
17265                        		__bra		.LL734
         08:DE10  80 DA      			bra	.LL734
17266                        	
17267                        		.dbg	line,	"main.c", 98; //-----------------------------------------------------------------------------//
17268                        	
17269                        		.dbg	line,	"main.c", 99; //                                    GAME                                     //
17270                        	
17271                        		.dbg	line,	"main.c", 100; //-----------------------------------------------------------------------------//
17272                        	
17273                        		.dbg	line,	"main.c", 101; case SEQUENCE_GAME:
17274    08:DE12             	.LL739:
17275                        		__case		2
17276                        	
17277                        		.dbg	line,	"main.c", 102; if(sequence_loaded == FALSE)
17278                        		__not.um	_sequence_loaded
         08:DE12  AD 12 23   			lda	_sequence_loaded
         08:DE15  18         			clc
         08:DE16  D0 01      			bne	!+
         08:DE18  38         			sec
         08:DE19             	!:
17279                        		__bfalse	.LL740
         08:DE19  90 0A      			bcc	.LL740
17280                        	
17281                        		.dbg	line,	"main.c", 103; {
17282                        	
17283                        		.dbg	line,	"main.c", 104; init_LEVEL();
17284                        		__call		_init_LEVEL
         08:DE1B  20 37 FE   			call	_init_LEVEL
17285                        	
17286                        		.dbg	line,	"main.c", 106; sequence_loaded = TRUE;
17287                        		__st.umiq	1, _sequence_loaded
         08:DE1E  A9 01      			lda.l	#1
         08:DE20  8D 12 23   			sta	_sequence_loaded
17288                        	
17289                        		.dbg	line,	"main.c", 107; }
17290                        	
17291                        		.dbg	line,	"main.c", 109; else
17292                        		__bra		.LL741
         08:DE23  80 C7      			bra	.LL741
17293    08:DE25             	.LL740:
17294                        	
17295                        		.dbg	line,	"main.c", 110; {
17296                        	
17297                        		.dbg	line,	"main.c", 111; switch(level_id)
17298                        		__ld.umq	_level_id
         08:DE25  AD 13 23   			lda	_level_id
17299                        		__bra		.LL742
         08:DE28  80 40      			bra	.LL742
17300                        	
17301                        		.dbg	line,	"main.c", 112; {
17302                        	
17303                        		.dbg	line,	"main.c", 113; case 1:
17304    08:DE2A             	.LL744:
17305                        		__case		1
17306                        	
17307                        		.dbg	line,	"main.c", 114; vsync();
17308                        		__call		_vsync
         08:DE2A  20 09 E3   			call	_vsync
17309                        	
17310                        		.dbg	line,	"main.c", 116; update_PLAYER();
17311                        		__call		_update_PLAYER
         08:DE2D  20 2D FE   			call	_update_PLAYER
17312                        	
17313                        		.dbg	line,	"main.c", 117; update_WEAPON();
17314                        		__call		_update_WEAPON
         08:DE30  20 23 FE   			call	_update_WEAPON
17315                        	
17316                        		.dbg	line,	"main.c", 118; //put_number(player_state,2,0,1);
17317                        	
17318                        		.dbg	line,	"main.c", 121; scroll_object();
17319                        		__call		_scroll_object
         08:DE33  20 C3 FE   			call	_scroll_object
17320                        	
17321                        		.dbg	line,	"main.c", 122; scroll_chest();
17322                        		__call		_scroll_chest
         08:DE36  20 A5 FE   			call	_scroll_chest
17323                        	
17324                        		.dbg	line,	"main.c", 123; scroll_npc();
17325                        		__call		_scroll_npc
         08:DE39  20 19 FE   			call	_scroll_npc
17326                        	
17327                        		.dbg	line,	"main.c", 125; check_OBJECT();
17328                        		__call		_check_OBJECT
         08:DE3C  20 0F FE   			call	_check_OBJECT
17329                        	
17330                        		.dbg	line,	"main.c", 126; check_NPC();
17331                        		__call		_check_NPC
         08:DE3F  20 05 FE   			call	_check_NPC
17332                        	
17333                        		.dbg	line,	"main.c", 128; display_TIME_LEVEL();
17334                        		__call		_display_TIME_LEVEL
         08:DE42  20 F5 FE   			call	_display_TIME_LEVEL
17335                        	
17336                        		.dbg	line,	"main.c", 130; satb_update();
17337                        		__call		_satb_update
         08:DE45  20 13 FF   			call	_satb_update
17338                        	
17339                        		.dbg	line,	"main.c", 131; sgx_satb_update();
17340                        		__call		_sgx_satb_update
         08:DE48  20 73 FE   			call	_sgx_satb_update
17341                        	
17342                        		.dbg	line,	"main.c", 133; scroll_BG();
17343                        		__call		_scroll_BG
         08:DE4B  20 FB FD   			call	_scroll_BG
17344                        	
17345                        		.dbg	line,	"main.c", 135; joypad_DIR();
17346                        		__call		_joypad_DIR
         08:DE4E  20 F1 FD   			call	_joypad_DIR
17347                        	
17348                        		.dbg	line,	"main.c", 136; joypad_BUTTONS();
17349                        		__call		_joypad_BUTTONS
         08:DE51  20 E7 FD   			call	_joypad_BUTTONS
17350                        	
17351                        		.dbg	line,	"main.c", 138; break;
17352                        		__bra		.LL743
         08:DE54  80 96      			bra	.LL743
17353                        	
17354                        		.dbg	line,	"main.c", 141; case 2:
17355    08:DE56             	.LL745:
17356                        		__case		2
17357                        	
17358                        		.dbg	line,	"main.c", 142; vsync();
17359                        		__call		_vsync
         08:DE56  20 09 E3   			call	_vsync
17360                        	
17361                        		.dbg	line,	"main.c", 143; break;
17362                        		__bra		.LL743
         08:DE59  80 91      			bra	.LL743
17363                        	
17364                        		.dbg	line,	"main.c", 146; case 3:
17365    08:DE5B             	.LL746:
17366                        		__case		3
17367                        	
17368                        		.dbg	line,	"main.c", 147; vsync();
17369                        		__call		_vsync
         08:DE5B  20 09 E3   			call	_vsync
17370                        	
17371                        		.dbg	line,	"main.c", 148; break;
17372                        		__bra		.LL743
         08:DE5E  80 8C      			bra	.LL743
17373                        	
17374                        		.dbg	line,	"main.c", 151; case 4:
17375    08:DE60             	.LL747:
17376                        		__case		4
17377                        	
17378                        		.dbg	line,	"main.c", 152; vsync();
17379                        		__call		_vsync
         08:DE60  20 09 E3   			call	_vsync
17380                        	
17381                        		.dbg	line,	"main.c", 153; break;
17382                        		__bra		.LL743
         08:DE63  80 87      			bra	.LL743
17383                        	
17384                        		.dbg	line,	"main.c", 156; case 5:
17385    08:DE65             	.LL748:
17386                        		__case		5
17387                        	
17388                        		.dbg	line,	"main.c", 157; vsync();
17389                        		__call		_vsync
         08:DE65  20 09 E3   			call	_vsync
17390                        	
17391                        		.dbg	line,	"main.c", 158; break;
17392                        		__bra		.LL743
         08:DE68  80 82      			bra	.LL743
17393                        	
17394                        		.dbg	line,	"main.c", 160; }
17395    08:DE6A             	.LL742:
17396                        		__switch_r.ur	0, 5
         08:DE6A  C9 06      			cmp	#(5 - 0) + 1
         08:DE6C  90 02      			bcc	!found+
         08:DE6E  A9 06      	!default:	lda	#(5 - 0) + 1
         08:DE70  0A         	!found:		asl	a
         08:DE71  AA         			tax
         08:DE72  7C 75 DE   			jmp	[!table+, x]
17397                        	
17398    08:DE75  EC DD      	!table:		dw	.LL743, .LL744, .LL745, .LL746, .LL747, .LL748
         08:DE77  2A DE       
         08:DE79  56 DE       
         08:DE7B  5B DE       
         08:DE7D  60 DE       
         08:DE7F  65 DE       
17399    08:DE81  EC DD      			dw	.LL743
17400    08:DE83             	.LL743	.alias		.LL734
17401                        	
17402                        		.dbg	line,	"main.c", 161; }
17403    08:DE83             	.LL741	.alias		.LL734
17404                        	
17405                        		.dbg	line,	"main.c", 163; break;
17406                        		__bra		.LL734
         08:DE83  4C EC DD   			bra	.LL734
17407                        	
17408                        		.dbg	line,	"main.c", 166; //-----------------------------------------------------------------------------//
17409                        	
17410                        		.dbg	line,	"main.c", 167; //                                     NPC                                     //
17411                        	
17412                        		.dbg	line,	"main.c", 168; //-----------------------------------------------------------------------------//
17413                        	
17414                        		.dbg	line,	"main.c", 169; case SEQUENCE_NPC:
17415    08:DE86             	.LL749:
17416                        		__case		3
17417                        	
17418                        		.dbg	line,	"main.c", 170; break;
17419                        		__bra		.LL734
         08:DE86  4C EC DD   			bra	.LL734
17420                        	
17421                        		.dbg	line,	"main.c", 173; //-----------------------------------------------------------------------------//
17422                        	
17423                        		.dbg	line,	"main.c", 174; //                                    SHOP                                     //
17424                        	
17425                        		.dbg	line,	"main.c", 175; //-----------------------------------------------------------------------------//
17426                        	
17427                        		.dbg	line,	"main.c", 176; case SEQUENCE_SHOP:
17428    08:DE89             	.LL750:
17429                        		__case		4
17430                        	
17431                        		.dbg	line,	"main.c", 177; if(sequence_loaded == FALSE)
17432                        		__not.um	_sequence_loaded
         08:DE89  AD 12 23   			lda	_sequence_loaded
         08:DE8C  18         			clc
         08:DE8D  D0 01      			bne	!+
         08:DE8F  38         			sec
         08:DE90             	!:
17433                        		__bfalse	.LL751
         08:DE90  90 0B      			bcc	.LL751
17434                        	
17435                        		.dbg	line,	"main.c", 178; {
17436                        	
17437                        		.dbg	line,	"main.c", 179; init_SHOP();
17438                        		__call		_init_SHOP
         08:DE92  20 DD FD   			call	_init_SHOP
17439                        	
17440                        		.dbg	line,	"main.c", 181; sequence_loaded = TRUE;
17441                        		__st.umiq	1, _sequence_loaded
         08:DE95  A9 01      			lda.l	#1
         08:DE97  8D 12 23   			sta	_sequence_loaded
17442                        	
17443                        		.dbg	line,	"main.c", 182; }
17444                        	
17445                        		.dbg	line,	"main.c", 183; 
17446                        	
17447                        		.dbg	line,	"main.c", 184; else
17448                        		__bra		.LL752
         08:DE9A  4C EC DD   			bra	.LL752
17449    08:DE9D             	.LL751:
17450                        	
17451                        		.dbg	line,	"main.c", 185; {
17452                        	
17453                        		.dbg	line,	"main.c", 186; switch(shop_phase)
17454                        		__ld.umq	_shop_phase
         08:DE9D  AD D2 23   			lda	_shop_phase
17455                        		__bra		.LL753
         08:DEA0  4C 83 DF   			bra	.LL753
17456                        	
17457                        		.dbg	line,	"main.c", 187; {
17458                        	
17459                        		.dbg	line,	"main.c", 188; case SHOP_PHASE_ENTER:
17460    08:DEA3             	.LL755:
17461                        		__case		0
17462                        	
17463                        		.dbg	line,	"main.c", 189; vsync();
17464                        		__call		_vsync
         08:DEA3  20 09 E3   			call	_vsync
17465                        	
17466                        		.dbg	line,	"main.c", 191; if(shop_counter == 0)
17467                        		__not.um	_shop_counter
         08:DEA6  AD D3 23   			lda	_shop_counter
         08:DEA9  18         			clc
         08:DEAA  D0 01      			bne	!+
         08:DEAC  38         			sec
         08:DEAD             	!:
17468                        		__bfalse	.LL756
         08:DEAD  90 28      			bcc	.LL756
17469                        	
17470                        		.dbg	line,	"main.c", 192; {
17471                        	
17472                        		.dbg	line,	"main.c", 193; put_string("Maybe, i can sell you" ,  2 , 15);
17473                        		__ld.wi		__const1+65
         08:DEAF  A9 41      			lda.l	#__const1+65
         08:DEB1  A0 60      			ldy.h	#__const1+65
17474                        		__st.wmq	_bp
         08:DEB3  85 EC      			sta.l	_bp
         08:DEB5  84 ED      			sty.h	_bp
17475                        		__st.umiq	2, _dil
         08:DEB7  A9 02      			lda.l	#2
         08:DEB9  85 F0      			sta	_dil
17476                        		__st.umiq	15, _dih
         08:DEBB  A9 0F      			lda.l	#15
         08:DEBD  85 F1      			sta	_dih
17477                        		__call		_put_string.3
         08:DEBF  20 68 E6   			call	_put_string.3
17478                        	
17479                        		.dbg	line,	"main.c", 194; put_string("something..." , 18 , 16);
17480                        		__ld.wi		__const1+87
         08:DEC2  A9 57      			lda.l	#__const1+87
         08:DEC4  A0 60      			ldy.h	#__const1+87
17481                        		__st.wmq	_bp
         08:DEC6  85 EC      			sta.l	_bp
         08:DEC8  84 ED      			sty.h	_bp
17482                        		__st.umiq	18, _dil
         08:DECA  A9 12      			lda.l	#18
         08:DECC  85 F0      			sta	_dil
17483                        		__st.umiq	16, _dih
         08:DECE  A9 10      			lda.l	#16
         08:DED0  85 F1      			sta	_dih
17484                        		__call		_put_string.3
         08:DED2  20 68 E6   			call	_put_string.3
17485                        	
17486                        		.dbg	line,	"main.c", 195; }
17487                        	
17488                        		.dbg	line,	"main.c", 197; else if(shop_counter == 120)
17489                        		__bra		.LL757
         08:DED5  80 44      			bra	.LL757
17490    08:DED7             	.LL756:
17491                        		__ld.umq	_shop_counter
         08:DED7  AD D3 23   			lda	_shop_counter
17492                        		__equ_b.uiq	120
         08:DEDA  C9 78      			cmp	#120
         08:DEDC  F0 01      			beq	!+
         08:DEDE  18         			clc
         08:DEDF             	!:
17493                        		__bfalse	.LL758
         08:DEDF  90 3A      			bcc	.LL758
17494                        	
17495                        		.dbg	line,	"main.c", 198; {
17496                        	
17497                        		.dbg	line,	"main.c", 199; put_string("                     " ,  2 , 15);
17498                        		__ld.wi		__const1+100
         08:DEE1  A9 64      			lda.l	#__const1+100
         08:DEE3  A0 60      			ldy.h	#__const1+100
17499                        		__st.wmq	_bp
         08:DEE5  85 EC      			sta.l	_bp
         08:DEE7  84 ED      			sty.h	_bp
17500                        		__st.umiq	2, _dil
         08:DEE9  A9 02      			lda.l	#2
         08:DEEB  85 F0      			sta	_dil
17501                        		__st.umiq	15, _dih
         08:DEED  A9 0F      			lda.l	#15
         08:DEEF  85 F1      			sta	_dih
17502                        		__call		_put_string.3
         08:DEF1  20 68 E6   			call	_put_string.3
17503                        	
17504                        		.dbg	line,	"main.c", 200; put_string("            " , 18 , 16);
17505                        		__ld.wi		__const1+122
         08:DEF4  A9 7A      			lda.l	#__const1+122
         08:DEF6  A0 60      			ldy.h	#__const1+122
17506                        		__st.wmq	_bp
         08:DEF8  85 EC      			sta.l	_bp
         08:DEFA  84 ED      			sty.h	_bp
17507                        		__st.umiq	18, _dil
         08:DEFC  A9 12      			lda.l	#18
         08:DEFE  85 F0      			sta	_dil
17508                        		__st.umiq	16, _dih
         08:DF00  A9 10      			lda.l	#16
         08:DF02  85 F1      			sta	_dih
17509                        		__call		_put_string.3
         08:DF04  20 68 E6   			call	_put_string.3
17510                        	
17511                        		.dbg	line,	"main.c", 202; spr_x(24);
17512                        		__ld.wi		24
         08:DF07  A9 18      			lda.l	#24
         08:DF09  C2         			cly
17513                        		__call		_spr_x.1
         08:DF0A  20 0A E8   			call	_spr_x.1
17514                        	
17515                        		.dbg	line,	"main.c", 203; spr_y(144);
17516                        		__ld.wi		144
         08:DF0D  A9 90      			lda.l	#144
         08:DF0F  C2         			cly
17517                        		__call		_spr_y.1
         08:DF10  20 19 E8   			call	_spr_y.1
17518                        	
17519                        		.dbg	line,	"main.c", 204; satb_update();
17520                        		__call		_satb_update
         08:DF13  20 13 FF   			call	_satb_update
17521                        	
17522                        		.dbg	line,	"main.c", 206; shop_phase = SHOP_PHASE_BUY;
17523                        		__st.umiq	1, _shop_phase
         08:DF16  A9 01      			lda.l	#1
         08:DF18  8D D2 23   			sta	_shop_phase
17524                        	
17525                        		.dbg	line,	"main.c", 207; }
17526                        	
17527                        		.dbg	line,	"main.c", 209; shop_counter++;
17528    08:DF1B             	.LL758:
17529    08:DF1B             	.LL757:
17530                        		__inc.umq	_shop_counter
         08:DF1B  EE D3 23   			inc	_shop_counter
17531                        	
17532                        		.dbg	line,	"main.c", 211; break;
17533                        		__bra		.LL754
         08:DF1E  4C EC DD   			bra	.LL754
17534                        	
17535                        		.dbg	line,	"main.c", 212; 
17536                        	
17537                        		.dbg	line,	"main.c", 214; case SHOP_PHASE_BUY:
17538    08:DF21             	.LL759:
17539                        		__case		1
17540                        	
17541                        		.dbg	line,	"main.c", 215; vsync();
17542                        		__call		_vsync
         08:DF21  20 09 E3   			call	_vsync
17543                        	
17544                        		.dbg	line,	"main.c", 217; joypad_BUTTONS_SHOP();
17545                        		__call		_joypad_BUTTONS_SHOP
         08:DF24  20 D3 FD   			call	_joypad_BUTTONS_SHOP
17546                        	
17547                        		.dbg	line,	"main.c", 218; display_TIME_SHOP();
17548                        		__call		_display_TIME_SHOP
         08:DF27  20 C9 FD   			call	_display_TIME_SHOP
17549                        	
17550                        		.dbg	line,	"main.c", 219; satb_update();
17551                        		__call		_satb_update
         08:DF2A  20 13 FF   			call	_satb_update
17552                        	
17553                        		.dbg	line,	"main.c", 221; break;
17554                        		__bra		.LL754
         08:DF2D  4C EC DD   			bra	.LL754
17555                        	
17556                        		.dbg	line,	"main.c", 224; case SHOP_PHASE_EXIT:
17557    08:DF30             	.LL760:
17558                        		__case		2
17559                        	
17560                        		.dbg	line,	"main.c", 225; vsync();
17561                        		__call		_vsync
         08:DF30  20 09 E3   			call	_vsync
17562                        	
17563                        		.dbg	line,	"main.c", 227; if(shop_counter == 0)
17564                        		__not.um	_shop_counter
         08:DF33  AD D3 23   			lda	_shop_counter
         08:DF36  18         			clc
         08:DF37  D0 01      			bne	!+
         08:DF39  38         			sec
         08:DF3A             	!:
17565                        		__bfalse	.LL761
         08:DF3A  90 1F      			bcc	.LL761
17566                        	
17567                        		.dbg	line,	"main.c", 228; {
17568                        	
17569                        		.dbg	line,	"main.c", 229; put_string("GOOD LUCK!" , 11 , 16);
17570                        		__ld.wi		__const1+135
         08:DF3C  A9 87      			lda.l	#__const1+135
         08:DF3E  A0 60      			ldy.h	#__const1+135
17571                        		__st.wmq	_bp
         08:DF40  85 EC      			sta.l	_bp
         08:DF42  84 ED      			sty.h	_bp
17572                        		__st.umiq	11, _dil
         08:DF44  A9 0B      			lda.l	#11
         08:DF46  85 F0      			sta	_dil
17573                        		__st.umiq	16, _dih
         08:DF48  A9 10      			lda.l	#16
         08:DF4A  85 F1      			sta	_dih
17574                        		__call		_put_string.3
         08:DF4C  20 68 E6   			call	_put_string.3
17575                        	
17576                        		.dbg	line,	"main.c", 231; // HIDE CURSOR //
17577                        	
17578                        		.dbg	line,	"main.c", 232; spr_set(0);
17579                        		__ld.uiq	0
         08:DF4F  62         			cla
17580                        		__call		_spr_set.1
         08:DF50  20 DD E7   			call	_spr_set.1
17581                        	
17582                        		.dbg	line,	"main.c", 233; spr_hide();
17583                        		__call		_spr_hide
         08:DF53  20 F8 E7   			call	_spr_hide
17584                        	
17585                        		.dbg	line,	"main.c", 234; satb_update();
17586                        		__call		_satb_update
         08:DF56  20 13 FF   			call	_satb_update
17587                        	
17588                        		.dbg	line,	"main.c", 235; }
17589                        	
17590                        		.dbg	line,	"main.c", 237; else if(shop_counter == 120)
17591                        		__bra		.LL762
         08:DF59  80 22      			bra	.LL762
17592    08:DF5B             	.LL761:
17593                        		__ld.umq	_shop_counter
         08:DF5B  AD D3 23   			lda	_shop_counter
17594                        		__equ_b.uiq	120
         08:DF5E  C9 78      			cmp	#120
         08:DF60  F0 01      			beq	!+
         08:DF62  18         			clc
         08:DF63             	!:
17595                        		__bfalse	.LL763
         08:DF63  90 18      			bcc	.LL763
17596                        	
17597                        		.dbg	line,	"main.c", 238; {
17598                        	
17599                        		.dbg	line,	"main.c", 239; disp_off();
17600                        		__call		_disp_off
         08:DF65  20 29 E4   			call	_disp_off
17601                        	
17602                        		.dbg	line,	"main.c", 241; // REINIT PLAYER //
17603                        	
17604                        		.dbg	line,	"main.c", 242; init_PLAYER();
17605                        		__call		_init_PLAYER
         08:DF68  20 55 FE   			call	_init_PLAYER
17606                        	
17607                        		.dbg	line,	"main.c", 244; shop_phase = SHOP_PHASE_EXIT;
17608                        		__st.umiq	2, _shop_phase
         08:DF6B  A9 02      			lda.l	#2
         08:DF6D  8D D2 23   			sta	_shop_phase
17609                        	
17610                        		.dbg	line,	"main.c", 245; respawn = RESPAWN_SHOP;
17611                        		__st.umiq	2, _respawn
         08:DF70  A9 02      			lda.l	#2
         08:DF72  8D 14 23   			sta	_respawn
17612                        	
17613                        		.dbg	line,	"main.c", 246; sequence_loaded = FALSE;
17614                        		__st.umiq	0, _sequence_loaded
         08:DF75  9C 12 23   			stz	_sequence_loaded
17615                        	
17616                        		.dbg	line,	"main.c", 247; sequence_id = SEQUENCE_GAME;
17617                        		__st.umiq	2, _sequence_id
         08:DF78  A9 02      			lda.l	#2
         08:DF7A  8D 11 23   			sta	_sequence_id
17618                        	
17619                        		.dbg	line,	"main.c", 248; }
17620                        	
17621                        		.dbg	line,	"main.c", 250; shop_counter++;
17622    08:DF7D             	.LL763:
17623    08:DF7D             	.LL762:
17624                        		__inc.umq	_shop_counter
         08:DF7D  EE D3 23   			inc	_shop_counter
17625                        	
17626                        		.dbg	line,	"main.c", 252; break;
17627                        		__bra		.LL754
         08:DF80  4C EC DD   			bra	.LL754
17628                        	
17629                        		.dbg	line,	"main.c", 253; }
17630    08:DF83             	.LL753:
17631                        		__switch_r.ur	0, 2
         08:DF83  C9 03      			cmp	#(2 - 0) + 1
         08:DF85  90 02      			bcc	!found+
         08:DF87  A9 03      	!default:	lda	#(2 - 0) + 1
         08:DF89  0A         	!found:		asl	a
         08:DF8A  AA         			tax
         08:DF8B  7C 8E DF   			jmp	[!table+, x]
17632                        	
17633    08:DF8E  A3 DE      	!table:		dw	.LL755, .LL759, .LL760
         08:DF90  21 DF       
         08:DF92  30 DF       
17634    08:DF94  EC DD      			dw	.LL754
17635    08:DF96             	.LL754	.alias		.LL734
17636                        	
17637                        		.dbg	line,	"main.c", 254; }
17638    08:DF96             	.LL752	.alias		.LL734
17639                        	
17640                        		.dbg	line,	"main.c", 256; break;
17641                        		__bra		.LL734
         08:DF96  4C EC DD   			bra	.LL734
17642                        	
17643                        		.dbg	line,	"main.c", 257; }
17644    08:DF99             	.LL733:
17645                        		__switch_r.ur	0, 4
         08:DF99  C9 05      			cmp	#(4 - 0) + 1
         08:DF9B  90 02      			bcc	!found+
         08:DF9D  A9 05      	!default:	lda	#(4 - 0) + 1
         08:DF9F  0A         	!found:		asl	a
         08:DFA0  AA         			tax
         08:DFA1  7C A4 DF   			jmp	[!table+, x]
17646                        	
17647    08:DFA4  F2 DD      	!table:		dw	.LL735, .LL738, .LL739, .LL749, .LL750
         08:DFA6  10 DE       
         08:DFA8  12 DE       
         08:DFAA  86 DE       
         08:DFAC  89 DE       
17648    08:DFAE  EC DD      			dw	.LL734
17649    08:DFB0             	.LL734	.alias		.LL731
17650                        	
17651                        		.dbg	line,	"main.c", 258; }
17652                        		__bra		.LL731
         08:DFB0  4C EC DD   			bra	.LL731
17653    08:DFB3             	.LL732:
17654                        	
17655                        		.dbg	line,	"main.c", 259; }
17656    08:DFB3             	.LL723:
17657                        		__return	1
         08:DFB3  AA         			tax
         08:DFB4  4C EF FF   			jmp	leave_proc
17658                        		.dbg	clear
17659                        		.endp
17660                        		.pceas
17661                        	
17662                        		.dbg	clear
17663               6000     		.rodata
17664    01:6000             	__const1:
17665    01:6000  53 54 41 52			db	'S','T','A','R','T',' ','G','A'
         01:6004  54 20 47 41 
17666    01:6008  4D 45 00 4C			db	'M','E',$00,'L','I','F','E',$00
         01:600C  49 46 45 00 
17667    01:6010  43 52 45 44			db	'C','R','E','D','I','T','S',$00
         01:6014  49 54 53 00 
17668    01:6018  43 41 50 43			db	'C','A','P','C','O','M',' ','1'
         01:601C  4F 4D 20 31 
17669    01:6020  39 38 37 00			db	'9','8','7',$00,'H','a','l','t'
         01:6024  48 61 6C 74 
17670    01:6028  3A 20 53 47			db	':',' ','S','G','X',' ','h','a'
         01:602C  58 20 68 61 
17671    01:6030  72 64 77 61			db	'r','d','w','a','r','e',' ','n'
         01:6034  72 65 20 6E 
17672    01:6038  6F 74 20 66			db	'o','t',' ','f','o','u','n','d'
         01:603C  6F 75 6E 64 
17673    01:6040  00 4D 61 79			db	$00,'M','a','y','b','e',',',' '
         01:6044  62 65 2C 20 
17674    01:6048  69 20 63 61			db	'i',' ','c','a','n',' ','s','e'
         01:604C  6E 20 73 65 
17675    01:6050  6C 6C 20 79			db	'l','l',' ','y','o','u',$00,'s'
         01:6054  6F 75 00 73 
17676    01:6058  6F 6D 65 74			db	'o','m','e','t','h','i','n','g'
         01:605C  68 69 6E 67 
17677    01:6060  2E 2E 2E 00			db	'.','.','.',$00,' ',' ',' ',' '
         01:6064  20 20 20 20 
17678    01:6068  20 20 20 20			db	' ',' ',' ',' ',' ',' ',' ',' '
         01:606C  20 20 20 20 
17679    01:6070  20 20 20 20			db	' ',' ',' ',' ',' ',' ',' ',' '
         01:6074  20 20 20 20 
17680    01:6078  20 00 20 20			db	' ',$00,' ',' ',' ',' ',' ',' '
         01:607C  20 20 20 20 
17681    01:6080  20 20 20 20			db	' ',' ',' ',' ',' ',' ',$00,'G'
         01:6084  20 20 00 47 
17682    01:6088  4F 4F 44 20			db	'O','O','D',' ','L','U','C','K'
         01:608C  4C 55 43 4B 
17683    01:6090  21 00      			db	'!',$00
17684    01:6092             	_TABLE_NPC_TYPE_LV1:
17685    01:6092  01         			db	1
17686    01:6093  00         			db	0
17687    01:6094             	_TABLE_NPC_X_POS_REF_LV1:
17688    01:6094  90 03      			dw	912
17689    01:6096  D0 04      			dw	1232
17690    01:6098             	_TABLE_NPC_Y_POS_REF_LV1:
17691    01:6098  40 02      			dw	576
17692    01:609A  90 01      			dw	400
17693    01:609C             	_TABLE_OBJECT_TYPE_LV1:
17694    01:609C  00         			db	0
17695    01:609D  01         			db	1
17696    01:609E  01         			db	1
17697    01:609F  01         			db	1
17698    01:60A0  01         			db	1
17699    01:60A1  01         			db	1
17700    01:60A2  01         			db	1
17701    01:60A3  02         			db	2
17702    01:60A4  01         			db	1
17703    01:60A5  01         			db	1
17704    01:60A6  01         			db	1
17705    01:60A7  01         			db	1
17706    01:60A8  01         			db	1
17707    01:60A9  01         			db	1
17708    01:60AA  01         			db	1
17709    01:60AB  01         			db	1
17710    01:60AC  01         			db	1
17711    01:60AD  01         			db	1
17712    01:60AE  01         			db	1
17713    01:60AF  01         			db	1
17714    01:60B0  01         			db	1
17715    01:60B1  01         			db	1
17716    01:60B2  01         			db	1
17717    01:60B3             	_TABLE_OBJECT_X_POS_REF_LV1:
17718    01:60B3  90 06      			dw	1680
17719    01:60B5  00 05      			dw	1280
17720    01:60B7  C0 05      			dw	1472
17721    01:60B9  A0 05      			dw	1440
17722    01:60BB  90 04      			dw	1168
17723    01:60BD  B0 04      			dw	1200
17724    01:60BF  C0 03      			dw	960
17725    01:60C1  D8 03      			dw	984
17726    01:60C3  50 05      			dw	1360
17727    01:60C5  70 05      			dw	1392
17728    01:60C7  10 06      			dw	1552
17729    01:60C9  90 06      			dw	1680
17730    01:60CB  B0 06      			dw	1712
17731    01:60CD  D0 06      			dw	1744
17732    01:60CF  E0 04      			dw	1248
17733    01:60D1  00 05      			dw	1280
17734    01:60D3  90 04      			dw	1168
17735    01:60D5  10 04      			dw	1040
17736    01:60D7  80 02      			dw	640
17737    01:60D9  A0 02      			dw	672
17738    01:60DB  50 01      			dw	336
17739    01:60DD  70 01      			dw	368
17740    01:60DF  A0 01      			dw	416
17741    01:60E1             	_TABLE_OBJECT_Y_POS_REF_LV1:
17742    01:60E1  80 01      			dw	384
17743    01:60E3  A0 01      			dw	416
17744    01:60E5  E0 01      			dw	480
17745    01:60E7  F0 01      			dw	496
17746    01:60E9  30 02      			dw	560
17747    01:60EB  30 02      			dw	560
17748    01:60ED  50 02      			dw	592
17749    01:60EF  50 02      			dw	592
17750    01:60F1  50 02      			dw	592
17751    01:60F3  50 02      			dw	592
17752    01:60F5  C0 02      			dw	704
17753    01:60F7  D0 02      			dw	720
17754    01:60F9  D0 02      			dw	720
17755    01:60FB  D0 02      			dw	720
17756    01:60FD  E0 02      			dw	736
17757    01:60FF  E0 02      			dw	736
17758    01:6101  F0 02      			dw	752
17759    01:6103  50 03      			dw	848
17760    01:6105  70 03      			dw	880
17761    01:6107  70 03      			dw	880
17762    01:6109  80 03      			dw	896
17763    01:610B  80 03      			dw	896
17764    01:610D  80 03      			dw	896
17765    01:610F             	_TABLE_CHEST_X_POS_REF_LV1:
17766    01:610F  30 04      			dw	1072
17767    01:6111  30 03      			dw	816
17768    01:6113             	_TABLE_CHEST_Y_POS_REF_LV1:
17769    01:6113  40 03      			dw	832
17770    01:6115  50 03      			dw	848
17771    01:6117             	_TABLE_PLAYER_TILES_ADR:
17772    01:6117  60 7A      			dw	_tiles_SPR_PLAYER_ARMOR
17773    01:6119  60 6C      			dw	_tiles_SPR_PLAYER_NAKED
17774    01:611B             	_TABLE_PLAYER_TILES_BANK:
17775    01:611B  0F         			db	^_tiles_SPR_PLAYER_ARMOR
17776    01:611C  11         			db	^_tiles_SPR_PLAYER_NAKED
17777    01:611D             	_TABLE_PLAYER_JUMP_V:
17778    01:611D  FC         			db	-4
17779    01:611E  FB         			db	-5
17780    01:611F  F6         			db	-10
17781    01:6120  FC         			db	-4
17782    01:6121  FC         			db	-4
17783    01:6122  F9         			db	-7
17784    01:6123  FA         			db	-6
17785    01:6124  FD         			db	-3
17786    01:6125  FB         			db	-5
17787    01:6126  FE         			db	-2
17788    01:6127  FC         			db	-4
17789    01:6128  FF         			db	-1
17790    01:6129  FF         			db	-1
17791    01:612A  FF         			db	-1
17792    01:612B  FF         			db	-1
17793    01:612C  00         			db	0
17794    01:612D  00         			db	0
17795    01:612E  00         			db	0
17796    01:612F  00         			db	0
17797    01:6130  01         			db	1
17798    01:6131  01         			db	1
17799    01:6132  01         			db	1
17800    01:6133  01         			db	1
17801    01:6134  04         			db	4
17802    01:6135  02         			db	2
17803    01:6136  05         			db	5
17804    01:6137  03         			db	3
17805    01:6138  06         			db	6
17806    01:6139  07         			db	7
17807    01:613A  04         			db	4
17808    01:613B  04         			db	4
17809    01:613C  0A         			db	10
17810    01:613D  04         			db	4
17811    01:613E  04         			db	4
17812    01:613F  05         			db	5
17813    01:6140             	_TABLE_PLAYER_FALL:
17814    01:6140  00         			db	0
17815    01:6141  00         			db	0
17816    01:6142  00         			db	0
17817    01:6143  00         			db	0
17818    01:6144  01         			db	1
17819    01:6145  01         			db	1
17820    01:6146  01         			db	1
17821    01:6147  01         			db	1
17822    01:6148  02         			db	2
17823    01:6149  02         			db	2
17824    01:614A  02         			db	2
17825    01:614B  02         			db	2
17826    01:614C  03         			db	3
17827    01:614D  03         			db	3
17828    01:614E  03         			db	3
17829    01:614F  04         			db	4
17830    01:6150  04         			db	4
17831    01:6151  04         			db	4
17832    01:6152  04         			db	4
17833    01:6153  04         			db	4
17834    01:6154  05         			db	5
17835    01:6155             	_TABLE_PLAYER_JUMP_LADDER:
17836    01:6155  FC         			db	-4
17837    01:6156  FC         			db	-4
17838    01:6157  FD         			db	-3
17839    01:6158  FD         			db	-3
17840    01:6159  FD         			db	-3
17841    01:615A  FE         			db	-2
17842    01:615B  FE         			db	-2
17843    01:615C  FE         			db	-2
17844    01:615D  FF         			db	-1
17845    01:615E  FF         			db	-1
17846    01:615F  FF         			db	-1
17847    01:6160  FF         			db	-1
17848    01:6161  FF         			db	-1
17849    01:6162  00         			db	0
17850    01:6163  00         			db	0
17851    01:6164  00         			db	0
17852    01:6165  00         			db	0
17853    01:6166  01         			db	1
17854    01:6167  01         			db	1
17855    01:6168  01         			db	1
17856    01:6169  01         			db	1
17857    01:616A  01         			db	1
17858    01:616B  02         			db	2
17859    01:616C  02         			db	2
17860    01:616D  02         			db	2
17861    01:616E  03         			db	3
17862    01:616F  03         			db	3
17863    01:6170  03         			db	3
17864    01:6171  04         			db	4
17865    01:6172  04         			db	4
17866    01:6173             	_TABLE_WEAPON_TILES_ADR:
17867    01:6173  E0 66      			dw	_tiles_SPR_WEAPON_0
17868    01:6175  60 69      			dw	_tiles_SPR_WEAPON_1
17869    01:6177  E0 6B      			dw	_tiles_SPR_WEAPON_2
17870    01:6179  60 6E      			dw	_tiles_SPR_WEAPON_3
17871    01:617B  E0 70      			dw	_tiles_SPR_WEAPON_4
17872    01:617D             	_TABLE_WEAPON_TILES_BANK:
17873    01:617D  13         			db	^_tiles_SPR_WEAPON_0
17874    01:617E  13         			db	^_tiles_SPR_WEAPON_1
17875    01:617F  13         			db	^_tiles_SPR_WEAPON_2
17876    01:6180  13         			db	^_tiles_SPR_WEAPON_3
17877    01:6181  13         			db	^_tiles_SPR_WEAPON_4
17878    01:6182             	_TABLE_SHOP_ITEMS_LV1:
17879    01:6182  00         			db	0
17880    01:6183  01         			db	1
17881    01:6184  02         			db	2
17882    01:6185  03         			db	3
17883    01:6186  04         			db	4
17884    01:6187  05         			db	5
17885    01:6188  06         			db	6
17886    01:6189  07         			db	7
17887    01:618A  08         			db	8
17888    01:618B  09         			db	9
17889    01:618C             	_TABLE_SHOP_PRICES_LV1:
17890    01:618C  64 00      			dw	100
17891    01:618E  E8 03      			dw	1000
17892    01:6190  60 09      			dw	2400
17893    01:6192  80 25      			dw	9600
17894    01:6194  1E 00      			dw	30
17895    01:6196  50 00      			dw	80
17896    01:6198  2C 01      			dw	300
17897    01:619A  20 03      			dw	800
17898    01:619C  40 06      			dw	1600
17899    01:619E  96 00      			dw	150
17900    01:61A0             	_TABLE_SHOP_ITEMS_TILES_ADR:
17901    01:61A0  E0 70      			dw	_tiles_ITEM_WEAPON_2
17902    01:61A2  60 71      			dw	_tiles_ITEM_WEAPON_3
17903    01:61A4  E0 71      			dw	_tiles_ITEM_WEAPON_4
17904    01:61A6  60 72      			dw	_tiles_ITEM_WEAPON_5
17905    01:61A8  E0 72      			dw	_tiles_ITEM_KEY
17906    01:61AA  60 73      			dw	_tiles_ITEM_ARMOR_2
17907    01:61AC  E0 73      			dw	_tiles_ITEM_ARMOR_3
17908    01:61AE  60 74      			dw	_tiles_ITEM_ARMOR_4
17909    01:61B0  E0 74      			dw	_tiles_ITEM_ARMOR_5
17910    01:61B2  60 75      			dw	_tiles_ITEM_POTION
17911    01:61B4             	_TABLE_SHOP_ITEMS_TILES_BANK:
17912    01:61B4  0F         			db	^_tiles_ITEM_WEAPON_2
17913    01:61B5  0F         			db	^_tiles_ITEM_WEAPON_3
17914    01:61B6  0F         			db	^_tiles_ITEM_WEAPON_4
17915    01:61B7  0F         			db	^_tiles_ITEM_WEAPON_5
17916    01:61B8  0F         			db	^_tiles_ITEM_KEY
17917    01:61B9  0F         			db	^_tiles_ITEM_ARMOR_2
17918    01:61BA  0F         			db	^_tiles_ITEM_ARMOR_3
17919    01:61BB  0F         			db	^_tiles_ITEM_ARMOR_4
17920    01:61BC  0F         			db	^_tiles_ITEM_ARMOR_5
17921    01:61BD  0F         			db	^_tiles_ITEM_POTION
17922    01:61BE             	_TABLE_CURSOR_POS_X:
17923    01:61BE  18         			db	24
17924    01:61BF  38         			db	56
17925    01:61C0  60         			db	96
17926    01:61C1  88         			db	136
17927    01:61C2  B0         			db	176
17928    01:61C3  18         			db	24
17929    01:61C4  38         			db	56
17930    01:61C5  60         			db	96
17931    01:61C6  88         			db	136
17932    01:61C7  B0         			db	176
17933    01:61C8  D4         			db	212
17934                        	
17935               2311     		.bss
17936    F8:2311             	_sequence_id:
17937    F8:2311             			ds	1
17938    F8:2312             	_sequence_loaded:
17939    F8:2312             			ds	1
17940    F8:2313             	_level_id:
17941    F8:2313             			ds	1
17942    F8:2314             	_respawn:
17943    F8:2314             			ds	1
17944    F8:2315             	_player_id:
17945    F8:2315             			ds	1
17946    F8:2316             	_player_state:
17947    F8:2316             			ds	1
17948    F8:2317             	_player_axis:
17949    F8:2317             			ds	1
17950    F8:2318             	_player_previous_axis:
17951    F8:2318             			ds	1
17952    F8:2319             	_player_counter_anim:
17953    F8:2319             			ds	1
17954    F8:231A             	_player_index_jump:
17955    F8:231A             			ds	1
17956    F8:231B             	_player_index_fall:
17957    F8:231B             			ds	1
17958    F8:231C             	_player_counter_attack:
17959    F8:231C             			ds	1
17960    F8:231D             	_player_naked:
17961    F8:231D             			ds	1
17962    F8:231E             	_player_attack:
17963    F8:231E             			ds	1
17964    F8:231F             	_jump_ladder:
17965    F8:231F             			ds	1
17966    F8:2320             	_jump_max_index:
17967    F8:2320             			ds	1
17968    F8:2321             	_fall_ladder:
17969    F8:2321             			ds	1
17970    F8:2322             	_chain_id:
17971    F8:2322             			ds	1
17972    F8:2323             	_weapon_id:
17973    F8:2323             			ds	1
17974    F8:2324             	_armor_level:
17975    F8:2324             			ds	1
17976    F8:2325             	_weapon_level:
17977    F8:2325             			ds	1
17978    F8:2326             	_life_amount:
17979    F8:2326             			ds	1
17980    F8:2327             	_credits_amount:
17981    F8:2327             			ds	1
17982    F8:2328             	_key_amount:
17983    F8:2328             			ds	1
17984    F8:2329             	_potion_amount:
17985    F8:2329             			ds	1
17986    F8:232A             	_minutes:
17987    F8:232A             			ds	1
17988    F8:232B             	_seconds:
17989    F8:232B             			ds	1
17990    F8:232C             	_time_counter:
17991    F8:232C             			ds	1
17992    F8:232D             	_minutes_backup:
17993    F8:232D             			ds	1
17994    F8:232E             	_seconds_backup:
17995    F8:232E             			ds	1
17996    F8:232F             	_object_start_index:
17997    F8:232F             			ds	1
17998    F8:2330             	_level_object_number:
17999    F8:2330             			ds	1
18000    F8:2331             	_onscreen_object_number:
18001    F8:2331             			ds	1
18002    F8:2332             	_list_object_type:
18003    F8:2332             			ds	25
18004    F8:234B             	_list_object_state:
18005    F8:234B             			ds	25
18006    F8:2364             	_list_object_energy:
18007    F8:2364             			ds	25
18008    F8:237D             	_list_reward_type:
18009    F8:237D             			ds	25
18010    F8:2396             	_list_onscreen_object:
18011    F8:2396             			ds	8
18012    F8:239E             	_chest_start_index:
18013    F8:239E             			ds	1
18014    F8:239F             	_level_chest_number:
18015    F8:239F             			ds	1
18016    F8:23A0             	_onscreen_chest_number:
18017    F8:23A0             			ds	1
18018    F8:23A1             	_list_chest_state:
18019    F8:23A1             			ds	8
18020    F8:23A9             	_list_onscreen_chest:
18021    F8:23A9             			ds	8
18022    F8:23B1             	_npc_start_index:
18023    F8:23B1             			ds	1
18024    F8:23B2             	_level_npc_number:
18025    F8:23B2             			ds	1
18026    F8:23B3             	_onscreen_npc_number:
18027    F8:23B3             			ds	1
18028    F8:23B4             	_list_npc_type:
18029    F8:23B4             			ds	9
18030    F8:23BD             	_list_npc_state:
18031    F8:23BD             			ds	9
18032    F8:23C6             	_list_onscreen_npc:
18033    F8:23C6             			ds	9
18034    F8:23CF             	_index_x:
18035    F8:23CF             			ds	1
18036    F8:23D0             	_index_y:
18037    F8:23D0             			ds	1
18038    F8:23D1             	_item_index:
18039    F8:23D1             			ds	1
18040    F8:23D2             	_shop_phase:
18041    F8:23D2             			ds	1
18042    F8:23D3             	_shop_counter:
18043    F8:23D3             			ds	1
18044    F8:23D4             	_tilemap_mask:
18045    F8:23D4             			ds	256
18046    F8:24D4             	_player_pos_x:
18047    F8:24D4             			ds	2
18048    F8:24D6             	_player_pos_y:
18049    F8:24D6             			ds	2
18050    F8:24D8             	_camera_max_y_position:
18051    F8:24D8             			ds	2
18052    F8:24DA             	_camera_pos_x_backup:
18053    F8:24DA             			ds	2
18054    F8:24DC             	_camera_pos_y_backup:
18055    F8:24DC             			ds	2
18056    F8:24DE             	_list_object_x_pos:
18057    F8:24DE             			ds	50
18058    F8:2510             	_list_object_y_pos:
18059    F8:2510             			ds	50
18060    F8:2542             	_list_object_x_pos_ref:
18061    F8:2542             			ds	50
18062    F8:2574             	_list_object_y_pos_ref:
18063    F8:2574             			ds	50
18064    F8:25A6             	_list_chest_x_pos:
18065    F8:25A6             			ds	16
18066    F8:25B6             	_list_chest_y_pos:
18067    F8:25B6             			ds	16
18068    F8:25C6             	_list_chest_x_pos_ref:
18069    F8:25C6             			ds	16
18070    F8:25D6             	_list_chest_y_pos_ref:
18071    F8:25D6             			ds	16
18072    F8:25E6             	_list_npc_x_pos:
18073    F8:25E6             			ds	18
18074    F8:25F8             	_list_npc_y_pos:
18075    F8:25F8             			ds	18
18076    F8:260A             	_list_npc_x_pos_ref:
18077    F8:260A             			ds	18
18078    F8:261C             	_list_npc_y_pos_ref:
18079    F8:261C             			ds	18
18080    F8:262E             	_zenny_amount:
18081    F8:262E             			ds	2
18082    F8:2630             	_score:
18083    F8:2630             			ds	2
18084    F8:2632             	_shop_prices:
18085    F8:2632             			ds	20
18086    F8:2646             	_ptr_SHOP_ITEM_PRICES:
18087    F8:2646             			ds	2
18088                        	
18089                        	
18090                        	;0 error(s) in compilation
18091                        	;	literal pool:146
18092                        	;	constant pool:311
18093                        	;	global pool:550
18094                        	;	Macro pool:322
18095    F8:2648             	leaf_loc:
18096    F8:2648             			ds	4
18097    F8:264C             	__hide_LEVEL_SPRITES_end:
18098    F8:264C             	__scroll_object_end:
18099    F8:264C             	__scroll_chest_end:
18100    F8:264C             	__scroll_npc_end:
18101    F8:264C             	__check_TILE_DEPTH_end:
18102    F8:264C             	__check_BG_end:
18103    F8:264C             	__check_NPC_end:
18104    F8:264C             	__recenter_CAMERA_end:
18105    F8:264C             	__joypad_BUTTONS_TITLE_end:
18106    F8:264C             	__init_OBJECT_LV1_end:
18107    F8:264C             	__init_CHEST_LV1_end:
18108    F8:264C             	__init_NPC_LV1_end:
18109                        	
18110    F8:264C             	__bss_init:
18111                        	
18112    F8:264C             	__heap_start:
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-final.asm
    5                        	;
    6                        	; PCEAS auto-includes this file at the end of every pass in HuCC or SDCC.
    7                        	;
    8                        	; Copyright John Brandwood 2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; This is used to select which assembly-language library files to include in
   18                        	; a HuCC project, using labels defined in the compiler's header files.
   19                        	;
   20                        	; ***************************************************************************
   21                        	; ***************************************************************************
   22                        	
   23                        			; Allow projects to customize what is included at the end
   24                        			; of a pass without replacing the entire "hucc-final.asm".
   25                        	
   26               E309     			.code
   27               0000     			.bank	CORE_BANK
   28               E309     			.page	CORE_PAGE
   29                        	
                             #[3]   "..\..\..\include\hucc\hucc-final-extra.asm"
   30                        			include	"hucc-final-extra.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-final-extra.asm
    5                        	;
    6                        	; hucc-final.asm includes this file at the end of every pass in HuCC or SDCC.
    7                        	;
    8                        	; Copyright John Brandwood 2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; This is used to select which assembly-language library files to include in
   18                        	; a HuCC project, using labels defined in the compiler's header files.
   19                        	;
   20                        	; ***************************************************************************
   21                        	; ***************************************************************************
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   31                        	
   32                        			; Libraries required for basic functionality.
   33                        	
   34               E309     			.code
   35               0000     			.bank	CORE_BANK
   36               E309     			.page	CORE_PAGE
   37                        	
                             #[3]   "..\..\..\include\hucc\common.asm"
   38                        			include	"common.asm"		; Common helpers.
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; common.asm
    5                        	;
    6                        	; Small, generic, PCE subroutines that are commonly useful when developing.
    7                        	;
    8                        	; These should be located in permanently-accessible memory!
    9                        	;
   10                        	; Copyright John Brandwood 2021-2024.
   11                        	;
   12                        	; Distributed under the Boost Software License, Version 1.0.
   13                        	; (See accompanying file LICENSE_1_0.txt or copy at
   14                        	;  http://www.boost.org/LICENSE_1_0.txt)
   15                        	;
   16                        	; ***************************************************************************
   17                        	; ***************************************************************************
   18                        	
   19                        	
   20                        	
   21                        	; ***************************************************************************
   22                        	; ***************************************************************************
   23                        	;
   24                        	; Wait for the next VBLANK IRQ.
   25                        	;
   26                        	
   27    00:E309  AD 41 22   	wait_vsync:	lda	irq_cnt			; System Card variable, changed
   28    00:E30C  CD 41 22   	.loop:		cmp	irq_cnt			; every VBLANK interrupt.
   29    00:E30F  F0 FB      			beq	.loop
   30               0001     		.ifdef	HUCC
   31    00:E311  8D EB 22   			sta	old_cnt			; Remember the frame count.
   32                        		.endif
   33    00:E314  60         			rts
   34                        	
   35                        	
   36                        	
   37                        	; ***************************************************************************
   38                        	; ***************************************************************************
   39                        	;
   40                        	; Delay for the next Y VBLANK IRQs.
   41                        	;
   42                        	
   43               0001     		.ifdef	HUCC
   44    00:E315             	_vsync		.alias	wait_vsync
   45                        	
   46    00:E315  AD 41 22   	_vsync.1:	lda	irq_cnt			; HuCC's vsync(n) was defined
   47    00:E318  38         			sec				; as frames from the previous
   48    00:E319  ED EB 22   			sbc	old_cnt			; vsync() call, 1 to 255.
   49    00:E31C  38         			sec
   50    00:E31D  E5 F8      			sbc	<_al
   51    00:E31F  90 02      			bcc	!+
   52    00:E321  A9 FF      			lda	#$FF
   53    00:E323  49 FF      	!:		eor	#$FF
   54    00:E325  1A         			inc	a
   55    00:E326  A8         			tay
   56                        		.endif
   57                        	
   58    00:E327  44 E0      	wait_nvsync:	bsr	wait_vsync		; # of VBLANK IRQs to wait in
   59    00:E329  88         			dey				; the Y register.
   60    00:E32A  D0 FB      			bne	wait_nvsync
   61    00:E32C  60         			rts
   62                        	
   63                        	
   64                        	
   65               0000     		.ifndef	HUCC
  101                        		.endif
  102                        	
  103                        	
  104                        	
  105                        	; ***************************************************************************
  106                        	; ***************************************************************************
  107                        	;
  108                        	; Map the _bp data far-pointer into MPR3 (& MPR4).
  109                        	;
  110                        	; Because the 16KB RAM region at $2000-$5FFF is composed of two separate
  111                        	; banks, with the 2nd bank having no specific relation to the 1st, there
  112                        	; is no way to deal with a bank-increment, so do not map that region.
  113                        	;
  114                        	; N.B. Library code relies on this preserving X and V!
  115                        	;
  116                        	
  117    00:E32D  98         	map_bp_to_mpr3:	tya				; Put bank into MPR3.
  118    00:E32E  F0 0A      			beq	!+
  119    00:E330  53 08      			tam3
  120    00:E332  A5 ED      			lda.h	<_bp			; Do not remap a ptr to RAM,
  121    00:E334  29 1F      			and	#$1F			; Remap ptr to MPR3.
  122    00:E336  09 60      			ora	#$60
  123    00:E338  85 ED      			sta.h	<_bp
  124    00:E33A  60         	!:		rts
  125                        	
  126    00:E33B  98         	map_bp_to_mpr34:tya				; Put bank into MPR3.
  127    00:E33C  F0 0D      			beq	!+
  128    00:E33E  53 08      			tam3
  129    00:E340  1A         			inc	a			; Put next into MPR4.
  130    00:E341  53 10      			tam4
  131    00:E343  A5 ED      			lda.h	<_bp			; Do not remap a ptr to RAM,
  132    00:E345  29 1F      			and	#$1F			; Remap ptr to MPR3.
  133    00:E347  09 60      			ora	#$60
  134    00:E349  85 ED      			sta.h	<_bp
  135    00:E34B  60         	!:		rts
  136                        	
  137                        	
  138                        	
  139                        	; ***************************************************************************
  140                        	; ***************************************************************************
  141                        	;
  142                        	; Increment the hi-byte of _bp and change TMA3 if necessary.
  143                        	;
  144                        	; N.B. Library code relies on this preserving A,X,Y and V!
  145                        	;
  146                        	
  147    00:E34C  E6 ED      	inc.h_bp_mpr3:	inc.h	<_bp			; Increment hi-byte of _bp.
  148    00:E34E  10 0B      			bpl	!+			; OK if within MPR0-MPR3.
  149    00:E350  48         			pha				; Increment the bank in MPR3,
  150    00:E351  43 08      			tma3				; usually when pointer moves
  151    00:E353  1A         			inc	a			; from $7FFF -> $8000.
  152    00:E354  53 08      			tam3
  153    00:E356  A9 60      			lda	#$60
  154    00:E358  85 ED      			sta.h	<_bp
  155    00:E35A  68         			pla
  156    00:E35B  60         	!:		rts
  157                        	
  158                        	
  159                        	
  160                        	; ***************************************************************************
  161                        	; ***************************************************************************
  162                        	;
  163                        	; Increment the hi-byte of _bp and change TMA3 and TMA4 if necessary.
  164                        	;
  165                        	; N.B. Library code relies on this preserving A,X,Y and V!
  166                        	;
  167                        	
  168    00:E35C  E6 ED      	inc.h_bp_mpr34:	inc.h	<_bp			; Increment hi-byte of _bp.
  169    00:E35E  10 0D      			bpl	!+			; OK if within MPR0-MPR3.
  170    00:E360  48         			pha				; Increment the bank in MPR3,
  171    00:E361  43 10      			tma4				; usually when pointer moves
  172    00:E363  53 08      			tam3				; from $7FFF -> $8000.
  173    00:E365  1A         			inc	a
  174    00:E366  53 10      			tam4
  175    00:E368  A9 60      			lda	#$60
  176    00:E36A  85 ED      			sta.h	<_bp
  177    00:E36C  68         			pla
  178    00:E36D  60         	!:		rts
  179                        	
  180                        	
  181                        	
  182                        	; ***************************************************************************
  183                        	; ***************************************************************************
  184                        	;
  185                        	; Put the _di data pointer into the VDC's MARR or MAWR register.
  186                        	;
  187                        	; N.B. Library code relies on this preserving Y!
  188                        	;
  189                        	
  190               0001     		.if	SUPPORT_SGX
  191    00:E36E  A2 10      	sgx_di_to_marr:	ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  192    00:E370  F0         			db	$F0			; Turn "clx" into a "beq".
  193                        		.endif
  194                        	
  195    00:E371  82         	vdc_di_to_marr:	clx				; Offset to PCE VDC.
  196                        	
  197    00:E372  A9 01      	set_di_to_marr	lda	#VDC_MARR		; Set VDC or SGX destination
  198    00:E374  95 F7      			sta	<vdc_reg, x		; address.
  199    00:E376  9D 00 02   			sta	VDC_AR, x
  200    00:E379  80 09      			bra	!+
  201                        	
  202               0001     		.if	SUPPORT_SGX
  203    00:E37B  A2 10      	sgx_di_to_mawr:	ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  204    00:E37D  F0         			db	$F0			; Turn "clx" into a "beq".
  205                        		.endif
  206                        	
  207    00:E37E  82         	vdc_di_to_mawr:	clx				; Offset to PCE VDC.
  208                        	
  209    00:E37F             	set_di_to_mawr;	lda	#VDC_MAWR		; Set VDC or SGX destination
  210    00:E37F  74 F7      			stz	<vdc_reg, x		; address.
  211    00:E381  9E 00 02   			stz	VDC_AR, x
  212                        	
  213    00:E384  A5 F0      	!:		lda	<_di + 0
  214    00:E386  9D 02 02   			sta	VDC_DL, x
  215    00:E389  A5 F1      			lda	<_di + 1
  216    00:E38B  9D 03 02   			sta	VDC_DH, x
  217                        	
  218    00:E38E  A9 02      			lda	#VDC_VWR		; Select the VRR/VWR data
  219    00:E390  95 F7      			sta	<vdc_reg, x		; register.
  220    00:E392  9D 00 02   			sta	VDC_AR, x
  221    00:E395  60         			rts
  222                        	
  223                        	
  224                        	
  225                        	; ***************************************************************************
  226                        	; ***************************************************************************
  227                        	;
  228                        	; Increment the hi-byte of _di and change TMA4 if necessary.
  229                        	;
  230                        	
  231               0000     		.if	0				; Save memory, for now.
  250                        		.endif
  251                        	
  252                        	
  253                        	
  254                        	; ***************************************************************************
  255                        	; ***************************************************************************
  256                        	;
  257                        	; Far-call a function in another bank.
  258                        	;
  259                        	; This is a potential alternative procedure call trampoline that uses only 10
  260                        	; bytes of common memory per bank of procedures, instead of 10 bytes for each
  261                        	; individual procedure call, BUT it uses the X register as a procedure-index,
  262                        	; and it needs a table of addresses at the end of every procedure bank.
  263                        	;
  264                        	; To use this ...
  265                        	;
  266                        	;  ldx #procedure-index
  267                        	;  jsr far_call_nn
  268                        	;
  269                        	; The called .PROC routine must exit with "jmp leave_proc" and not "rts".
  270                        	;
  271                        	; leave_proc:	pla
  272                        	;		tam6
  273                        	;		tya
  274                        	;		rts
  275                        	;
  276                        	; N.B. This costs 21 cycles vs 18 for the .newproc trampoline code (when you
  277                        	;      exclude preserving YA in zero-page).
  278                        	;
  279                        	; N.B. This was written as an excerise, and definitely not for HuC!
  280                        	;
  281                        	
  282               0000     		.if	0
  295                        		.endif					; 21
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
                             #[3]   "..\..\..\include\hucc\vce.asm"
   39                        			include	"vce.asm"		; Useful VCE routines.
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; vce.asm
    5                        	;
    6                        	; Useful routines for operating the HuC6260 Video Color Encoder
    7                        	;
    8                        	; These should be located in permanently-accessible memory!
    9                        	;
   10                        	; Copyright John Brandwood 2021-2025.
   11                        	;
   12                        	; Distributed under the Boost Software License, Version 1.0.
   13                        	; (See accompanying file LICENSE_1_0.txt or copy at
   14                        	;  http://www.boost.org/LICENSE_1_0.txt)
   15                        	;
   16                        	; ***************************************************************************
   17                        	; ***************************************************************************
   18                        	
   19                        	;
   20                        	; Configure Library ...
   21                        	;
   22                        	
   23               0000     		.ifndef VCE_SPLIT_CROSS
   25                        		.endif
   26                        	
   27                        	
   28                        	
   29                        	; ***************************************************************************
   30                        	; ***************************************************************************
   31                        	;
   32                        	; xfer_palettes - Update the VCE with the queued palettes changes.
   33                        	;
   34                        	; This is normally called in a developer's vsync_hook handler, but it can
   35                        	; be called manually as long as it will not also be called in an interrupt.
   36                        	;
   37                        	; The queued transfers are split into 32-byte chunks so that an HSYNC and/or
   38                        	; TIMER IRQ is not delayed for too long during the VBLANK.
   39                        	;
   40                        	
   41    00:E396  A9 80      	xfer_palettes:	lda	#$80			; Acquire color mutex to avoid
   42    00:E398  0C 4C 26   			tsb	color_mutex		; conflict with a delayed VBL.
   43    00:E39B  30 5F      			bmi	.busy
   44                        	
   45    00:E39D  AC 4D 26   			ldy	color_queue_r		; Are there any palette xfers
   46    00:E3A0  CC 4E 26   			cpy	color_queue_w		; queued up?
   47    00:E3A3  F0 54      			beq	.exit
   48                        	
   49    00:E3A5  08         			php				; Enable interrupts so that an
   50    00:E3A6  58         			cli				; HSYNC or TIMER IRQ can occur.
   51                        	
   52    00:E3A7  43 08      			tma3				; Preserve MPR3 & MPR4 because
   53    00:E3A9  48         			pha				; this normally runs in the
   54    00:E3AA  43 10      			tma4				; VBLANK IRQ.
   55    00:E3AC  48         			pha
   56                        	
   57               0001     		.if	!CDROM
   58    00:E3AD  73 02 E4 86			tii	.tia_func, color_tia, 8 ; Copy TIA to RAM.
         00:E3B1  22 08 00    
   59                        		.endif
   60                        	
   61    00:E3B4  B9 4F 26   	.next_item:	lda	color_index, y		; Get the next set of palettes
   62    00:E3B7  0A         			asl	a			; from the queue.
   63    00:E3B8  0A         			asl	a
   64    00:E3B9  0A         			asl	a
   65    00:E3BA  0A         			asl	a
   66    00:E3BB  8D 02 04   			sta	VCE_CTA + 0
   67    00:E3BE  62         			cla
   68    00:E3BF  2A         			rol	a
   69    00:E3C0  8D 03 04   			sta	VCE_CTA + 1
   70                        	
   71    00:E3C3  BE 57 26   			ldx	color_count,y		; How many palettes to xfer?
   72                        	
   73    00:E3C6  B9 6F 26   			lda	color_bank, y		; Map data into MPR3 & MPR4.
   74    00:E3C9  53 08      			tam3
   75    00:E3CB  1A         			inc	a
   76    00:E3CC  53 10      			tam4
   77    00:E3CE  B9 67 26   			lda	color_addr_h, y
   78    00:E3D1  8D 88 22   			sta	.ram_tia + 2
   79    00:E3D4  B9 5F 26   			lda	color_addr_l, y
   80    00:E3D7  8D 87 22   	.palette_loop:	sta	.ram_tia + 1
   81                        	
   82               0000     		.if	CDROM
   84                        		.else
   85    00:E3DA  20 86 22   			jsr	.ram_tia		; Copy 32-bytes to the VCE.
   86                        		.endif
   87                        	
   88    00:E3DD  18         			clc				; Increment the data ptr to
   89    00:E3DE  69 20      			adc	#32			; the next 32-byte palette.
   90    00:E3E0  B0 1B      			bcs	.next_page
   91                        	
   92    00:E3E2  CA         	.next_palette:	dex				; Any palettes left to xfer?
   93    00:E3E3  D0 F2      			bne	.palette_loop
   94                        	
   95    00:E3E5  C8         			iny				; Increment the queue index.
   96    00:E3E6  98         			tya
   97    00:E3E7  29 07      			and	#7
   98    00:E3E9  A8         			tay
   99                        	
  100    00:E3EA  CC 4E 26   			cpy	color_queue_w		; Any more items in the queue?
  101    00:E3ED  D0 C5      			bne	.next_item
  102    00:E3EF  8C 4D 26   			sty	color_queue_r		; Signal the queue is empty.
  103                        	
  104    00:E3F2  68         			pla				; Restore MPR3 & MPR4.
  105    00:E3F3  53 10      			tam4
  106    00:E3F5  68         			pla
  107    00:E3F6  53 08      			tam3
  108                        	
  109    00:E3F8  28         			plp				; Restore interrupt state.
  110                        	
  111    00:E3F9  9C 4C 26   	.exit:		stz	color_mutex		; Release color mutex.
  112                        	
  113    00:E3FC  60         	.busy:		rts
  114                        	
  115    00:E3FD  EE 88 22   	.next_page:	inc	.ram_tia + 2
  116    00:E400  80 E0      			bra	.next_palette
  117                        	
  118               0001     		.if	!CDROM
  119               2286     	.ram_tia	=	color_tia		; Use a TIA in RAM.
  120                        	
  121    00:E402  E3 00 00 04	.tia_func:	tia	0, VCE_CTW, 32
         00:E406  04 20 00    
  122    00:E409  60         			rts
  123                        		.endif	!CDROM
  124                        	
  125               264C     			.bss
  126                        	
  127    F8:264C             	color_mutex:	ds	1			; Mutex for VCE changes.
  128    F8:264D             	color_queue_r:	ds	1			; Ring buffer read index.
  129    F8:264E             	color_queue_w:	ds	1			; Ring buffer write index.
  130    F8:264F             	color_index:	ds	8			; Ring buffer - Palette index.
  131    F8:2657             	color_count:	ds	8			; Ring buffer - Palette count.
  132    F8:265F             	color_addr_l:	ds	8			; Ring buffer - Data Ptr (lo).
  133    F8:2667             	color_addr_h:	ds	8			; Ring buffer - Data Ptr (hi).
  134    F8:266F             	color_bank:	ds	8			; Ring buffer - Data Ptr (bank).
  135                        	
  136               E40A     			.code
  137                        	
  138                        	
  139                        	
  140                        	; ***************************************************************************
  141                        	; ***************************************************************************
  142                        	;
  143                        	; load_palettes - Queue a set of palettes to upload to the VCE next VBLANK.
  144                        	;
  145                        	; Args: _al = Palette index (0..15 for BG, 16..31 for SPR).
  146                        	; Args: _ah = Palette count (1..32).
  147                        	; Args: _bp = Pointer to palette data.
  148                        	; Args:   Y = Bank to map into MPR3 & MPR4, or zero to leave unchanged.
  149                        	;
  150                        	; N.B. Y==0 is only useful if the palette data is permanently mapped!
  151                        	;
  152                        	
  153                        	load_palettes	.proc
  179                        			.endp
  180                        	
  181                        	
  182                        	
  183                        	; ***************************************************************************
  184                        	; ***************************************************************************
  185                        	;
  186                        	; clear_vce - Clear all 512 of the VCE's palette entries.
  187                        	;
  188                        	
  189    18:D2DA             	clear_vce	.proc
  190                        	
  191    18:D2DA  08         			php				; Disable interrupts to avoid
  192    18:D2DB  78         			sei				; VBLANK palette upload.
  193    18:D2DC  C2         			cly
  194    18:D2DD  9C 02 04   			stz	VCE_CTA+0		; Set VCE write address.
  195    18:D2E0  9C 03 04   			stz	VCE_CTA+1
  196    18:D2E3  9C 04 04   	.loop:		stz	VCE_CTW+0		; Set lo-byte of color.
  197    18:D2E6  9C 05 04   			stz	VCE_CTW+1		; Write 1 color value.
  198    18:D2E9  9C 04 04   			stz	VCE_CTW+0		; Set lo-byte of color.
  199    18:D2EC  9C 05 04   			stz	VCE_CTW+1		; Write 1 color value.
  200    18:D2EF  88         			dey
  201    18:D2F0  D0 F1      			bne	.loop
  202    18:D2F2  28         			plp
  203                        	
  204                        			leave				; All done, phew!
         18:D2F3  4C EF FF   			jmp	leave_proc
  205                        	
  206                        			.endp
  207                        	
  208               0001     		.ifdef	HUCC
  209    00:E40A             			.alias	_clear_palette		= clear_vce
  210                        		.endif
  211                        	
  212                        	
  213                        	
  214                        	; ***************************************************************************
  215                        	; ***************************************************************************
  216                        	;
  217                        	; read_palettes - Read palettes from the VCE into a buffer in RAM.
  218                        	;
  219                        	; Args: _al = Palette index (0..15 for BG, 16..31 for SPR).
  220                        	; Args: _ah = Palette count (1..32).
  221                        	; Args: _di = Pointer to palette data destination in RAM.
  222                        	;
  223                        	; The transfer is split into 32-byte chunks so that an HSYNC and/or TIMER
  224                        	; IRQ is not delayed for too long while executing.
  225                        	;
  226                        	
  227                        	read_palettes	.proc
  281                        			.endp
  282                        	
  283               0001     		.ifdef	HUCC
  284    00:E40A             			.alias	_read_palette.3		= read_palettes
  285                        		.endif
  286                        	
  287                        	
  288                        	
  289                        	vce_fade_funcs	.procgroup
  516                        			.endprocgroup
  517                        	
  518                        	
  519                        	
  520                        	; ***************************************************************************
  521                        	; ***************************************************************************
  522                        	;
  523                        	; cross_fade_to - Cross fade a palette in RAM towards a reference palette.
  524                        	;
  525                        	; Args: _al = Number of colors (1..256).
  526                        	; Args: _di = Pointer to faded palette destination in RAM.
  527                        	; Args: _bp = Pointer to reference palette data.
  528                        	; Args:   Y = Bank to map into MPR3 & MPR4, or zero to leave unchanged.
  529                        	;
  530                        	; N.B. Y==0 is only useful if the reference palette data is already mapped!
  531                        	;
  532                        	; N.B. This only updates the palette in RAM by 1 RGB step, so it will need
  533                        	;      to be called 7 times to guarantee that you've reached the target.
  534                        	;
  535                        	
  536                        	cross_fade_to	.proc
  658                        			.endp
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
                             #[3]   "..\..\..\include\hucc\vdc.asm"
   40                        			include	"vdc.asm"		; Useful VDC routines.
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; vdc.asm
    5                        	;
    6                        	; Useful routines for operating the HuC6270 Video Display Controller.
    7                        	;
    8                        	; These should be located in permanently-accessible memory!
    9                        	;
   10                        	; Copyright John Brandwood 2021-2025.
   11                        	;
   12                        	; Distributed under the Boost Software License, Version 1.0.
   13                        	; (See accompanying file LICENSE_1_0.txt or copy at
   14                        	;  http://www.boost.org/LICENSE_1_0.txt)
   15                        	;
   16                        	; ***************************************************************************
   17                        	; ***************************************************************************
   18                        	
   19                        	;
   20                        	; Include dependancies ...
   21                        	;
   22                        	
   23                        			include "common.asm"		; Common helpers.
   24                        			include "vce.asm"		; Useful VCE routines.
   25                        	
   26                        	;
   27                        	; Choose how much to transfer to VRAM in a single chunk, normally 16-bytes.
   28                        	;
   29                        	; The cycle timings for a TIA-to-VRAM depend upon how the VDC's MWR CPU slots
   30                        	; line up to the CPU's writes, and how long the VDC has to halt the CPU while
   31                        	; it fetches the next scanline's sprite data.
   32                        	;
   33                        	; These cycle timings are for 0 sprites (best) and 16 sprites (worst) ...
   34                        	;
   35                        	; 32-byte TIA takes 270..364 cycles in 5MHz, 242..312 cycles in 7MHz. (8.44 cycles-per-byte best-case at 5MHz.)
   36                        	; 24-byte TIA takes 210..298 cycles in 5MHz, 186..256 cycles in 7MHz. (8.75 cycles-per-byte best-case at 5MHz.)
   37                        	; 16-byte TIA takes 142..234 cycles in 5MHz, 128..200 cycles in 7MHz. (8.88 cycles-per-byte best-case at 5MHz.)
   38                        	;
   39                        	; If a user wishes to be able to put RCR interrupts one-line-after-another,
   40                        	; then it is only safe to use 32-byte chunks if there are no TIMER or IRQ2
   41                        	; interrupts ... which is almost-impossible to rely on in library code!
   42                        	;
   43                        	
   44               0000     		.ifndef	VRAM_XFER_SIZE
   46                        		.endif
   47                        	
   48                        	;
   49                        	; Enable BG & SPR layers, and RCR interrupt.
   50                        	;
   51                        	
   52    00:E40A  A9 04      	set_rcron:	lda	#$04			; Enable RCR interrupt.
   53    00:E40C  80 0A      			bra	!+
   54                        	
   55    00:E40E  A9 80      	set_bgon:	lda	#$80			; Enable BG layer.
   56    00:E410  80 06      			bra	!+
   57                        	
   58    00:E412  A9 40      	set_spron:	lda	#$40			; Enable SPR layer.
   59    00:E414  80 02      			bra	!+
   60                        	
   61    00:E416  A9 C0      	set_dspon:	lda	#$C0			; Enable BG & SPR layers.
   62                        	
   63    00:E418  04 F3      	!:		tsb	<vdc_crl		; These take effect when
   64               0001     		.if	SUPPORT_SGX			; the next VBLANK occurs.
   65    00:E41A  04 03      			tsb	<sgx_crl
   66                        		.endif
   67    00:E41C  60         			rts
   68                        	
   69                        	;
   70                        	; Disable BG & SPR layers, and RCR interrupt.
   71                        	;
   72                        	
   73    00:E41D  A9 04      	set_rcroff:	lda	#$04			; Disable RCR interrupt.
   74    00:E41F  80 0A      			bra	!+
   75                        	
   76    00:E421  A9 80      	set_bgoff:	lda	#$80			; Disable BG layer.
   77    00:E423  80 06      			bra	!+
   78                        	
   79    00:E425  A9 40      	set_sproff:	lda	#$40			; Disable SPR layer.
   80    00:E427  80 02      			bra	!+
   81                        	
   82    00:E429  A9 C0      	set_dspoff:	lda	#$C0			; Disable BG & SPR layers.
   83                        	
   84    00:E42B  14 F3      	!:		trb	<vdc_crl		; These take effect when
   85               0001     		.if	SUPPORT_SGX			; the next VBLANK occurs.
   86    00:E42D  14 03      			trb	<sgx_crl
   87                        		.endif
   88    00:E42F  60         			rts
   89                        	
   90                        	
   91                        	
   92                        	; ***************************************************************************
   93                        	; ***************************************************************************
   94                        	;
   95                        	; Put the _di data pointer into the VDC's MARR or MAWR register.
   96                        	;
   97                        	; N.B. Library code relies on this preserving Y!
   98                        	;
   99                        	; Args: _di + 0 = BAT X coordinate.
  100                        	; Args: _di + 1 = BAT Y coordinate.
  101                        	;
  102                        	; Here because it relies on the "vdc_bat_width" that is defined in this file.
  103                        	;
  104                        	
  105               0001     		.if	SUPPORT_SGX
  106    00:E430  A2 10      	sgx_di_xy_marr:	ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  107    00:E432  F0         			db	$F0			; Turn "clx" into a "beq".
  108                        		.endif
  109                        	
  110    00:E433  82         	vdc_di_xy_marr:	clx				; Offset to PCE VDC.
  111                        	
  112    00:E434  62         	set_di_xy_mawr:	cla
  113    00:E435  3C 77 26   			bit	vdc_bat_width, x	; Set by set_bat_size().
  114    00:E438  30 08      			bmi	.w128
  115    00:E43A  70 03      			bvs	.w64
  116    00:E43C  46 F1      	.w32:		lsr.h	<_di
  117    00:E43E  6A         			ror	a
  118    00:E43F  46 F1      	.w64:		lsr.h	<_di
  119    00:E441  6A         			ror	a
  120    00:E442  46 F1      	.w128:		lsr.h	<_di
  121    00:E444  6A         			ror	a
  122    00:E445  05 F0      			ora.l	<_di
  123    00:E447  85 F0      			sta.l	<_di
  124    00:E449  4C 7F E3   			jmp	set_di_to_mawr		; In "common.asm".
  125                        	
  126                        	
  127                        	
  128    08:DFB7             	vdc_clear_vram	.procgroup			; These routines share code!
  129                        	
  130                        	; ***************************************************************************
  131                        	; ***************************************************************************
  132                        	;
  133                        	; clear_vram_sgx - Clear all of VRAM in the SGX VDC.
  134                        	; clear_vram_vdc - Clear all of VRAM in the PCE VDC.
  135                        	;
  136                        	; Args: _ax = word value to write to the BAT.
  137                        	; Args: _bl = hi-byte of size of BAT (# of words).
  138                        	;
  139                        	
  140               0001     		.if	SUPPORT_SGX
  141    08:DFB7             	clear_vram_sgx	.proc
  142                        	
  143    08:DFB7  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  144    08:DFB9  F0         			db	$F0			; Turn "clx" into a "beq".
  145                        	
  146    08:DFBA             			.ref	clear_vram_vdc		; Need clear_vram_vdc
  147                        			.endp
  148                        		.endif
  149                        	
  150    08:DFBA             	clear_vram_vdc	.proc
  151                        	
  152    08:DFBA  82         			clx				; Offset to PCE VDC.
  153                        	
  154    08:DFBB  20 B5 FD   	clear_vram_x:	call	clear_bat_x		; Clear the BAT.
  155                        	
  156    08:DFBE  A9 80      			lda	#$80			; Xvert hi-byte of # words
  157    08:DFC0  38         			sec				; in screen to loop count.
  158    08:DFC1  E5 FA      			sbc	<_bl
  159    08:DFC3  4A         			lsr	a
  160                        	
  161                        	;		cly				; Clear the rest of VRAM.
  162    08:DFC4  9E 02 02   			stz	VDC_DL, x
  163    08:DFC7  9E 03 02   	.clr_loop:	stz	VDC_DH, x		; Seperate writes to minimize
  164    08:DFCA  88         			dey				; VDC MWR penalty.
  165    08:DFCB  9E 03 02   			stz	VDC_DH, x
  166    08:DFCE  D0 F7      			bne	.clr_loop
  167    08:DFD0  3A         			dec	a
  168    08:DFD1  D0 F4      			bne	.clr_loop
  169                        	
  170                        			leave				; All done, phew!
         08:DFD3  4C EF FF   			jmp	leave_proc
  171                        	
  172                        			.endp
  173                        	
  174                        	
  175                        	
  176                        	; ***************************************************************************
  177                        	; ***************************************************************************
  178                        	;
  179                        	; clear_bat_sgx - Clear the BAT in the SGX VDC.
  180                        	; clear_bat_vdc - Clear the BAT in the PCE VDC.
  181                        	;
  182                        	; Args: _ax = word value to write to the BAT.
  183                        	; Args: _bl = hi-byte of size of BAT (# of words).
  184                        	;
  185                        	
  186               0001     		.if	SUPPORT_SGX
  187                        	clear_bat_sgx	.proc
  193                        			.endp
  194                        		.endif
  195                        	
  196    08:DFD6             	clear_bat_vdc	.proc
  197                        	
  198    08:DFD6  82         			clx				; Offset to PCE VDC.
  199                        	
  200    08:DFD7             			.ref	clear_bat_x		; Need clear_bat_x
  201                        			.endp
  202                        	
  203    08:DFD7             	clear_bat_x	.proc				; HuCC uses this entry point.
  204                        	
  205    08:DFD7  64 F0      			stz	<_di + 0		; Set VDC or SGX destination
  206    08:DFD9  64 F1      			stz	<_di + 1		; address.
  207    08:DFDB  20 7F E3   			jsr	set_di_to_mawr
  208                        	
  209    08:DFDE  A5 FA      			lda	<_bl			; Xvert hi-byte of # words
  210    08:DFE0  4A         			lsr	a			; in screen to loop count.
  211                        	
  212    08:DFE1  C2         			cly
  213    08:DFE2  48         	.bat_loop:	pha
  214    08:DFE3  A5 F8      			lda	<_ax + 0
  215    08:DFE5  9D 02 02   			sta	VDC_DL, x
  216    08:DFE8  A5 F9      			lda	<_ax + 1
  217    08:DFEA  9D 03 02   	.bat_pair:	sta	VDC_DH, x		; Seperate writes to minimize
  218    08:DFED  88         			dey				; VDC MWR penalty.
  219    08:DFEE  9D 03 02   			sta	VDC_DH, x
  220    08:DFF1  D0 F7      			bne	.bat_pair
  221                        	
  222    08:DFF3  68         			pla
  223    08:DFF4  3A         			dec	a
  224    08:DFF5  D0 EB      			bne	.bat_loop
  225                        	
  226                        			leave
         08:DFF7  4C EF FF   			jmp	leave_proc
  227                        	
  228                        			.endp
  229                        	
  230                        			.endprocgroup
  231                        	
  232                        	;
  233                        	;
  234                        	;
  235                        	
  236    18:C927             	vdc_set_mode	.procgroup			; These routines share code!
  237                        	
  238                        	; ***************************************************************************
  239                        	; ***************************************************************************
  240                        	;
  241                        	; set_mode_sgx - Set video hardware registers from a data table.
  242                        	; set_mode_vdc - Set video hardware registers from a data table.
  243                        	;
  244                        	; Args: _bp, Y = _farptr to data table mapped into MPR3 & MPR4.
  245                        	;
  246                        	
  247               0001     		.if	SUPPORT_SGX
  248    18:C927             	set_mode_sgx	.proc
  249                        	
  250    18:C927  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  251    18:C929  F0         			db	$F0			; Turn "clx" into a "beq".
  252                        	
  253                        			.endp
  254                        		.endif
  255                        	
  256    18:C92A             	set_mode_vdc	.proc
  257                        	
  258    18:C92A  82         			clx				; Offset to PCE VDC.
  259                        	
  260    18:C92B  F7 F8      			smb7	<_al			; Signal no set_bat_size() yet.
  261                        	
  262    18:C92D  43 08      			tma3				; Preserve MPR3.
  263    18:C92F  48         			pha
  264    18:C930  43 10      			tma4				; Preserve MPR4.
  265    18:C932  48         			pha
  266                        	
  267    18:C933  20 3B E3   			jsr	map_bp_to_mpr34		; Map data to MPR3 & MPR4.
  268                        	
  269    18:C936  08         			php				; Disable interrupts.
  270    18:C937  78         			sei
  271                        	
  272    18:C938  C2         			cly				; Table size is < 256 bytes.
  273                        	
  274    18:C939  B1 EC      	.loop:		lda	[_bp], y		; Get the register #, +ve for
  275    18:C93B  F0 46      			beq	.done			; VDC, -128 for VCE_CR.
  276    18:C93D  10 0C      			bpl	.set_vdc_reg
  277                        	
  278                        			; Set the VCE_CR register.
  279                        	
  280    18:C93F  C8         	.set_vce_cr:	iny
  281                        	
  282    18:C940  B1 EC      			lda	[_bp], y		; Get lo-byte of register.
  283    18:C942  C8         			iny
  284    18:C943  8D 44 22   			sta	vce_cr			; No SGX shadow for this!
  285    18:C946  8D 00 04   			sta	VCE_CR			; Set the VCE clock speed.
  286    18:C949  80 EE      			bra	.loop			; Do not set VDC_MWR reg bits!
  287                        	
  288                        			; Set a VDC register.
  289                        	
  290    18:C94B  C8         	.set_vdc_reg:	iny
  291    18:C94C  9D 00 02   			sta	VDC_AR, x		; Set which VDC register.
  292                        	
  293    18:C94F  C9 05      			cmp	#VDC_CR			; CS if VDC_CR or higher.
  294    18:C951  F0 14      			beq	.skip_cc
  295    18:C953  18         			clc				; CC if not VDC_CR.
  296                        	
  297    18:C954  49 09      			eor	#VDC_MWR		; Check if this the VDC_MWR
  298    18:C956  D0 0F      			bne	.skip_cc		; without changing CC.
  299                        	
  300    18:C958  B1 EC      			lda	[_bp], y		; Remember the BAT size so that
  301    18:C95A  8D 42 22   			sta	vdc_mwr			; set_bat_size() can be called.
  302    18:C95D  4A         			lsr	a
  303    18:C95E  4A         			lsr	a
  304    18:C95F  4A         			lsr	a
  305    18:C960  4A         			lsr	a
  306    18:C961  85 F8      			sta	<_al
  307    18:C963  C8         			iny
  308    18:C964  C8         			iny
  309    18:C965  80 D2      			bra	.loop
  310                        	
  311    18:C967  B1 EC      	.skip_cc:	lda	[_bp], y		; Get lo-byte of register.
  312    18:C969  C8         			iny
  313    18:C96A  90 08      			bcc	.not_vdc_cr
  314                        	
  315               0001     		.if	SUPPORT_SGX
  316    18:C96C  E0 00      			cpx	#0			; Writing to the VDC or SGX?
  317    18:C96E  F0 02      			beq	.save_crl
  318    18:C970  29 F7      			and	#$F7			; We only need 1 vblank IRQ!
  319                        		.endif
  320                        	
  321    18:C972  95 F3      	.save_crl:	sta	<vdc_crl, x		; Save VDC_CR shadow register.
  322                        	
  323    18:C974  9D 02 02   	.not_vdc_cr:	sta	VDC_DL, x		; Write to VDC.
  324                        	
  325    18:C977  B1 EC      			lda	[_bp], y		; Get hi-byte of register.
  326    18:C979  C8         			iny
  327    18:C97A  9D 03 02   			sta	VDC_DH, x
  328    18:C97D  90 BA      			bcc	.loop			; Next register, please!
  329                        	
  330    18:C97F  95 F4      			sta	<vdc_crh, x		; Save VDC_CR shadow register.
  331                        	
  332    18:C981  80 B6      			bra	.loop			; Next register, please!
  333                        	
  334                        			; All registers set!
  335                        	
  336    18:C983  A9 02      	.done:		lda	#VDC_VWR		; Leave with VDC_VWR set.
  337    18:C985  95 F7      			sta	<vdc_reg, x
  338                        	;		lda	<vdc_reg, x		; Restore previous VDC_AR from
  339    18:C987  9D 00 02   			sta	VDC_AR, x		; the shadow variable.
  340                        	
  341    18:C98A  28         			plp				; Restore interrupts.
  342                        	
  343    18:C98B  68         			pla				; Restore MPR4.
  344    18:C98C  53 10      			tam4
  345    18:C98E  68         			pla				; Restore MPR3.
  346    18:C98F  53 08      			tam3
  347                        	
  348    18:C991  7F F8 07   			bbr7	<_al, set_bat_size	; Update if BAT size changed.
  349                        	
  350                        			leave				; All done, phew!
         18:C994  4C EF FF   			jmp	leave_proc
  351                        	
  352    18:C997             			.ref	set_bat_vdc
  353                        			.endp
  354                        	
  355                        	
  356                        	
  357                        	; ***************************************************************************
  358                        	; ***************************************************************************
  359                        	;
  360                        	; set_bat_sgx - Change the SGX BAT size and initialize variables based on it.
  361                        	; set_bat_vdc - Change the PCE BAT size and initialize variables based on it.
  362                        	;
  363                        	; Args: _al = new size (0-7).
  364                        	;
  365                        	; (VDC_MWR_32x32  >> 4) or in HuCC, SCR_SIZE_32x32.
  366                        	; (VDC_MWR_32x64  >> 4) or in HuCC, SCR_SIZE_32x64.
  367                        	; (VDC_MWR_64x32  >> 4) or in HuCC, SCR_SIZE_64x32.
  368                        	; (VDC_MWR_64x64  >> 4) or in HuCC, SCR_SIZE_64x64.
  369                        	; (VDC_MWR_128x32 >> 4) or in HuCC, SCR_SIZE_128x32.
  370                        	; (VDC_MWR_128x64 >> 4) or in HuCC, SCR_SIZE_128x64.
  371                        	;
  372                        	
  373               0001     		.if	SUPPORT_SGX
  374    18:C997             	set_bat_sgx	.proc
  375                        	
  376    18:C997  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  377    18:C999  F0         			db	$F0			; Turn "clx" into a "beq".
  378                        	
  379    18:C99A             			.ref	set_bat_vdc
  380                        			.endp
  381                        		.endif
  382                        	
  383    18:C99A             	set_bat_vdc	.proc
  384                        	
  385    18:C99A  82         			clx				; Offset to PCE VDC.
  386                        	
  387    18:C99B  A5 F8      	set_bat_size:	lda	<_al			; Get BAT size value.
  388    18:C99D  29 07      			and	#7			; Sanitize screen size value.
  389    18:C99F  A8         			tay
  390    18:C9A0  0A         			asl	a			; Put it in bits 4..6.
  391    18:C9A1  0A         			asl	a
  392    18:C9A2  0A         			asl	a
  393    18:C9A3  0A         			asl	a
  394    18:C9A4  85 00      			sta	<__temp
  395                        	
  396    18:C9A6  B9 E6 C9   			lda	.width, y
  397    18:C9A9  9D 77 26   			sta	vdc_bat_width, x
  398    18:C9AC  3A         			dec	a
  399    18:C9AD  9D 79 26   			sta	vdc_bat_x_mask, x
  400                        	
  401    18:C9B0  B9 EE C9   			lda	.height, y
  402    18:C9B3  9D 78 26   			sta	vdc_bat_height, x
  403    18:C9B6  3A         			dec	a
  404    18:C9B7  9D 7A 26   			sta	vdc_bat_y_mask, x
  405                        	
  406    18:C9BA  B9 F6 C9   			lda	.limit, y
  407    18:C9BD  9D 7B 26   			sta	vdc_bat_limit, x
  408                        	
  409    18:C9C0  B9 FE C9   			lda	.increment, y		; Put the VRAM increment for a
  410    18:C9C3  95 F4      			sta	<vdc_crh, x		; line into vdc_crh for later.
  411                        	
  412    18:C9C5  08         			php
  413    18:C9C6  78         			sei
  414                        	
  415    18:C9C7  A9 09      			lda	#VDC_MWR
  416    18:C9C9  9D 00 02   			sta	VDC_AR, x
  417                        	
  418    18:C9CC  AD 42 22   			lda	vdc_mwr			; Get the MWR access width bits.
  419    18:C9CF  29 8F      			and	#%10001111
  420    18:C9D1  05 00      			ora	<__temp
  421               0001     		.if	SUPPORT_SGX
  422    18:C9D3  E0 00      			cpx	#PCE_VDC_OFFSET		; This has no SGX shadow!
  423    18:C9D5  D0 03      			bne	!+
  424                        		.endif
  425    18:C9D7  8D 42 22   			sta	vdc_mwr
  426    18:C9DA  9D 02 02   	!:		sta	VDC_DL, x
  427                        	
  428    18:C9DD  B5 F7      			lda	<vdc_reg, x		; Restore previous VDC_AR from
  429    18:C9DF  9D 00 02   			sta	VDC_AR, x		; the shadow variable.
  430                        	
  431    18:C9E2  28         			plp
  432                        	
  433                        			leave
         18:C9E3  4C EF FF   			jmp	leave_proc
  434                        	
  435    18:C9E6  20 40 80 80	.width:		db	$20,$40,$80,$80,$20,$40,$80,$80
         18:C9EA  20 40 80 80 
  436    18:C9EE  20 20 20 20	.height:	db	$20,$20,$20,$20,$40,$40,$40,$40
         18:C9F2  40 40 40 40 
  437    18:C9F6  03 07 0F 0F	.limit:		db	$03,$07,$0F,$0F,$07,$0F,$1F,$1F
         18:C9FA  07 0F 1F 1F 
  438    18:C9FE  08 10 18 18	.increment	db	$08,$10,$18,$18,$08,$10,$18,$18
         18:CA02  08 10 18 18 
  439                        	
  440               2677     			.bss
  441                        	
  442                        	; **************
  443                        	; 16-bytes of VDC BAT information.
  444                        	;
  445                        	; N.B. MUST be 16-bytes before the SGX versions to use PCE_VDC_OFFSET.
  446                        	;
  447                        	; N.B. Declared inside this .proc so that they can be stripped if unused.
  448                        	
  449                        	; Initialized by set_bat_vdc.
  450    F8:2677             	vdc_bat_width:	ds	1	; $20, $40, $80
  451    F8:2678             	vdc_bat_height:	ds	1	; $20, $40
  452    F8:2679             	vdc_bat_x_mask:	ds	1	; $1F, $3F, $7F
  453    F8:267A             	vdc_bat_y_mask:	ds	1	; $1F, $3F
  454    F8:267B             	vdc_bat_limit:	ds	1	; (>$03FF), (>$07FF), (>$0FFF), (>$1FFF)
  455                        	
  456                        	; From blkmap.asm just to avoid wasting .bss space with padding.
  457    F8:267C             	vdc_map_draw_w:	ds	1	; (SCR_WIDTH / 8) + 1
  458    F8:267D             	vdc_map_draw_h:	ds	1	; (SCR_HEIGHT / 8) + 1
  459    F8:267E             	vdc_map_line_w:	ds	1	; Line width of map data in tiles.
  460    F8:267F             	vdc_map_scrn_w:	ds	1	; Line width of map data in screens.
  461    F8:2680             	vdc_map_pxl_x:	ds	2	; Current top-left X in pixels.
  462    F8:2682             	vdc_map_pxl_y:	ds	2	; Current top-left Y in pixels.
  463    F8:2684             	vdc_map_option:	ds	1	; Flags to disable BAT alignment.
  464                        	
  465                        	; From hucc-old-spr.asm just to avoid wasting .bss space with padding.
  466    F8:2685             	spr_max:	ds	1
  467    F8:2686             	spr_clr:	ds	1
  468                        	
  469               0001     		.if	SUPPORT_SGX
  470                        	
  471                        	; **************
  472                        	; 16-bytes of SGX BAT information.
  473                        	;
  474                        	; N.B. MUST be 16-bytes after the VDC versions to use SGX_VDC_OFFSET.
  475                        	;
  476                        	; N.B. Declared inside this .proc so that they can be stripped if unused.
  477                        	
  478                        	; Initialized by set_bat_sgx.
  479    F8:2687             	sgx_bat_width:	ds	1	; $20, $40, $80
  480    F8:2688             	sgx_bat_height:	ds	1	; $20, $40
  481    F8:2689             	sgx_bat_x_mask:	ds	1	; $1F, $3F, $7F
  482    F8:268A             	sgx_bat_y_mask:	ds	1	; $1F, $3F
  483    F8:268B             	sgx_bat_limit:	ds	1	; (>$03FF), (>$07FF), (>$0FFF), (>$1FFF)
  484                        	
  485                        	; From blkmap.asm just to avoid wasting .bss space with padding.
  486    F8:268C             	sgx_map_draw_w:	ds	1	; (SCR_WIDTH / 8) + 1
  487    F8:268D             	sgx_map_draw_h:	ds	1	; (SCR_HEIGHT / 8) + 1
  488    F8:268E             	sgx_map_line_w:	ds	1	; Line width of map data in tiles.
  489    F8:268F             	sgx_map_scrn_w:	ds	1	; Line width of map data in screens.
  490    F8:2690             	sgx_map_pxl_x:	ds	2	; Current top-left X in pixels.
  491    F8:2692             	sgx_map_pxl_y:	ds	2	; Current top-left Y in pixels.
  492    F8:2694             	sgx_map_option:	ds	1	; Flags to disable BAT alignment.
  493                        	
  494                        	; From hucc-old-spr.asm just to avoid wasting .bss space with padding.
  495    F8:2695             	sgx_spr_max:	ds	1
  496    F8:2696             	sgx_spr_clr:	ds	1
  497                        	
  498                        		.endif
  499                        	
  500               CA06     			.code
  501                        	
  502                        			.endp
  503                        	
  504                        			.endprocgroup
  505                        	
  506                        	
  507                        	
  508                        	; ***************************************************************************
  509                        	; ***************************************************************************
  510                        	;
  511                        	; sgx_detect - Detect whether we're running on a SuperGrafx (and init VPC).
  512                        	;
  513                        	; Returns: X,C-flag, and "sgx_detected" = NZ, CS if detected.
  514                        	;
  515                        	; ***************************************************************************
  516                        	;
  517                        	; https://web.archive.org/web/20161129055659/http://cgfm2.emuviews.com/txt/sgxtech.txt
  518                        	;
  519                        	; ***************************************************************************
  520                        	;
  521                        	; HuC6202 VIDEO PRIORITY CONTROLLER (huge thanks to Charles MacDonald!)
  522                        	;
  523                        	; The VPC has no access to sprite priority data, it can only sort pixels
  524                        	; based upon which VDC and whether they are "sprite" or "background".
  525                        	;
  526                        	; This can sometimes lead to unexpected results with low-priority sprites.
  527                        	;
  528                        	; VPC registers $0008 and $0009 make up four 4-bit values that define the
  529                        	; enabled layers and priority setting for the four possible window areas.
  530                        	;
  531                        	; Bits 3-0 of $0008 are for the region where Window 1 and 2 overlap
  532                        	; Bits 7-4 of $0008 are for the region occupied by only Window 2
  533                        	; Bits 3-0 of $0009 are for the region occupied by only Window 1
  534                        	; Bits 7-4 of $0009 are for the region where no Window is present
  535                        	;
  536                        	;  Each 4-bit value has the same format:
  537                        	;
  538                        	;  Bit 0: VDC #1 graphics are 0=disabled, 1=enabled
  539                        	;  Bit 1: VDC #2 graphics are 0=disabled, 1=enabled
  540                        	;  Bit 2: Bit 0 of priority setting
  541                        	;  Bit 3: Bit 1 of priority setting
  542                        	;
  543                        	;   Priority Setting 0b00xx: (useful when VDC #1 is a fullscreen HUD)
  544                        	;
  545                        	;    FRONT
  546                        	;     SP1 = VDC #1 (pce) sprite pixels
  547                        	;     BG1 = VDC #1 (pce) background pixels
  548                        	;     SP2 = VDC #2 (sgx) sprite pixels
  549                        	;     BG2 = VDC #2 (sgx) background pixels
  550                        	;    BACK
  551                        	;
  552                        	;   Priority Setting 0b01xx: (useful for parallax backgrounds)
  553                        	;
  554                        	;    FRONT
  555                        	;     SP1 = VDC #1 (pce) sprite pixels
  556                        	;     SP2 = VDC #2 (sgx) sprite pixels
  557                        	;     BG1 = VDC #1 (pce) background pixels
  558                        	;     BG2 = VDC #2 (sgx) background pixels
  559                        	;    BACK
  560                        	;
  561                        	;   Priority Setting 0b10xx: (only useful for special effects)
  562                        	;
  563                        	;    FRONT
  564                        	;     BG1 = VDC #1 (pce) background pixels (transparent where sprites)
  565                        	;     BG2 = VDC #2 (sgx) background pixels
  566                        	;     SP1 = VDC #1 (pce) sprite pixels
  567                        	;     SP2 = VDC #2 (sgx) sprite pixels
  568                        	;    BACK
  569                        	
  570               0001     		.if	SUPPORT_SGX
  571               0001     		.if	1
  572    18:D042             	sgx_detect	.proc
  573                        	
  574    18:D042  A0 7F      			ldy	#$7F			; Use VRAM address $7F7F
  575    18:D044  84 F0      			sty.l	<_di			; because it won't cause
  576    18:D046  84 F1      			sty.h	<_di			; a screen glitch.
  577                        	
  578    18:D048  20 7B E3   			jsr	sgx_di_to_mawr		; Write $0001 to SGX VRAM.
  579    18:D04B  A0 01      			ldy	#$01
  580    18:D04D  8C 12 02   			sty	SGX_DL
  581    18:D050  9C 13 02   			stz	SGX_DH
  582                        	
  583    18:D053  20 7E E3   			jsr	vdc_di_to_mawr		; Write $0000 to VDC VRAM.
  584    18:D056  9C 02 02   			stz	VDC_DL
  585    18:D059  9C 03 02   			stz	VDC_DH
  586                        	
  587    18:D05C  20 6E E3   			jsr	sgx_di_to_marr		; Check value in SGX VRAM.
  588    18:D05F  AC 12 02   			ldy	SGX_DL			; $01 if found, $00 if not.
  589    18:D062  8C E8 22   			sty	sgx_detected
  590    18:D065  F0 10      			beq	!+			; Skip the rest if not SGX.
  591                        	
  592    18:D067  20 7B E3   			jsr	sgx_di_to_mawr		; Write $0000 to SGX VRAM
  593    18:D06A  9C 12 02   			stz	SGX_DL			; to clean VRAM contents.
  594    18:D06D  9C 13 02   			stz	SGX_DH
  595                        	
  596    18:D070  73 7D D0 08			tii	.vpc_mode, VPC_CR, 8	; Initialize the HuC6202 VPC.
         18:D074  02 08 00    
  597                        	
  598    18:D077  98         	!:		tya
  599    18:D078  AA         			tax				; "leave" copies X back to A.
  600    18:D079  4A         			lsr	a			; Also CC if PCE, CS if SGX.
  601                        	
  602                        			leave				; All done, phew!
         18:D07A  4C EF FF   			jmp	leave_proc
  603                        		.else
  618                        		.endif
  619                        	
  620               0000     		.ifndef	SGX_PARALLAX
  622                        		.endif
  623                        	
  624               0000     		.if	SGX_PARALLAX
  629                        		.else
  630    18:D07D  00 30      	.vpc_mode:	dw	$3000			; Use SGX as the background
  631    18:D07F  00 00      			dw	$0000			; behind a fullscreen HUD.
  632    18:D081  00 00      			dw	$0000
  633    18:D083  00 00      			dw	$0000
  634                        		.endif	SGX_PARALLAX
  635                        	
  636                        			.endp
  637                        	
  638               0000     		.ifndef	CORE_VERSION			; CORE has this in the kernel.
  642                        		.endif	CORE_VERSION
  643                        	
  644                        		.endif	SUPPORT_SGX
  645                        	
  646                        	
  647                        	
  648                        	
  649                        	vdc_copy_to	.procgroup			; These routines share code!
  799                        			.endprocgroup
  800                        	
  801                        	
  802                        	
  803                        	; ***************************************************************************
  804                        	; ***************************************************************************
  805                        	;
  806                        	; init_240x208 - An example of initializing screen and VRAM.
  807                        	;
  808                        	; This can be used as-is, or copied to your own program and modified.
  809                        	;
  810                        	
  811                        	init_240x208	.proc
  892                        			.endp
  893                        	
  894                        	
  895                        	
  896                        	; ***************************************************************************
  897                        	; ***************************************************************************
  898                        	;
  899                        	; init_256x224 - An example of initializing screen and VRAM.
  900                        	;
  901                        	; This can be used as-is, or copied to your own program and modified.
  902                        	;
  903                        	
  904                        	init_256x224	.proc
  985                        			.endp
  986                        	
  987                        	
  988                        	
  989                        	; ***************************************************************************
  990                        	; ***************************************************************************
  991                        	;
  992                        	; init_352x224 - An example of initializing screen and VRAM.
  993                        	;
  994                        	; This can be used as-is, or copied to your own program and modified.
  995                        	;
  996                        	
  997                        	init_352x224	.proc
 1078                        			.endp
 1079                        	
 1080                        	
 1081                        	
 1082                        	; ***************************************************************************
 1083                        	; ***************************************************************************
 1084                        	;
 1085                        	; init_512x224 - An example of initializing screen and VRAM.
 1086                        	;
 1087                        	; This can be used as-is, or copied to your own program and modified.
 1088                        	;
 1089                        	
 1090                        	init_512x224	.proc
 1171                        			.endp
 1172                        	
 1173                        	
 1174                        	
 1175                        	; ***************************************************************************
 1176                        	; ***************************************************************************
 1177                        	;
 1178                        	; init_320x208 - An example of initializing screen and VRAM.
 1179                        	;
 1180                        	; This can be used as-is, or copied to your own program and modified.
 1181                        	;
 1182                        	; This resolution is rarely-seen, but it has no overscan, so it has a use.
 1183                        	;
 1184                        	
 1185                        	init_320x208	.proc
 1266                        			.endp
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   41                        	
                             #[3]   "..\..\..\include\hucc\hucc-math.asm"
   42                        			include	"hucc-math.asm"		; HuCC multiply and divide.
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-math.asm
    5                        	;
    6                        	; Basic (i.e. very slow) 8-bit and 16-bit multiply and divide routines.
    7                        	;
    8                        	; Copyright John Brandwood 2021-2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; This is basically a set of SDCC-compatible routines, but using Y:A for the
   18                        	; primary register instead of X:A.
   19                        	;
   20                        	; Using Y:A makes the routines instantly usable with HuCC, and it also makes
   21                        	; them usable with SDCC with just an "sxy" before and after the call.
   22                        	;
   23                        	; ***************************************************************************
   24                        	; ***************************************************************************
   25                        	
   26               E44C     			.code
   27                        	
   28               2000     	multiplier	=	__temp
   29               2094     	multiplicand	=	___SDCC_m6502_ret0
   30               2094     	product		=	multiplicand
   31                        	
   32               2000     	__mulint_PARM_2	=	multiplier
   33                        	
   34               2000     	divisor		=	__temp
   35               2094     	dividend	=	___SDCC_m6502_ret0
   36               2094     	quotient	=	dividend
   37               2096     	remainder	=	___SDCC_m6502_ret2
   38                        	
   39               2000     	__moduint_PARM_2 =	divisor
   40               2000     	__modsint_PARM_2 =	divisor
   41               2000     	__divuint_PARM_2 =	divisor
   42               2000     	__divsint_PARM_2 =	divisor
   43                        	
   44                        	
   45                        	
   46                        	; ***************************************************************************
   47                        	; int
   48                        	; _mulint (int a, int b)
   49                        	;
   50                        	; 1st parameter in Y:A (multiplicand)
   51                        	; 2nd parameter in __mulint_PARM_2 (multiplier)
   52                        	; result in Y:A
   53                        	;
   54                        	; N.B. signed and unsigned multiply only differ in the top 16 of the 32bits!
   55                        	
   56    00:E44C  85 94      	__mulint:	sta	<multiplicand + 0
   57    00:E44E  84 95      			sty	<multiplicand + 1
   58                        	
   59    00:E450  A2 10      			ldx	#16			; Loop 16 times.
   60                        	
   61    00:E452  46 95      			lsr	<multiplicand + 1	; Divide multiplicand by 2
   62    00:E454  66 94      			ror	<multiplicand + 0	; and clear the 16th bit.
   63                        	
   64    00:E456  62         			cla				; Clear top word of product.
   65    00:E457  85 96      			sta.l	<multiplicand + 2
   66    00:E459  90 0B      			bcc	.rotate
   67                        	
   68    00:E45B  A8         	.add:		tay				; Add the 16-bit multiplier to
   69    00:E45C  18         			clc				; top 16-bits of the product.
   70    00:E45D  A5 96      			lda	<multiplicand + 2
   71    00:E45F  65 00      			adc.l	<multiplier
   72    00:E461  85 96      			sta	<multiplicand + 2
   73    00:E463  98         			tya
   74    00:E464  65 01      			adc.h	<multiplier
   75                        	
   76    00:E466  6A         	.rotate:	ror	a			; Rotate product into the top
   77    00:E467  66 96      			ror	<multiplicand + 2	; bits of the multiplicand ...
   78    00:E469  66 95      			ror	<multiplicand + 1	; and divide multiplicand by 2.
   79    00:E46B  66 94      			ror	<multiplicand + 0
   80                        	
   81    00:E46D  CA         			dex
   82    00:E46E  B0 EB      			bcs	.add			; Add multiplier to top word?
   83    00:E470  D0 F4      			bne	.rotate			; Completed 16 bits?
   84                        	
   85    00:E472  85 97      			sta	<multiplicand + 3	; Save top byte of product.
   86                        	
   87    00:E474  A5 94      			lda.l	<multiplicand		; Return the bottom 16-bits of
   88    00:E476  A4 95      			ldy.h	<multiplicand		; the 32-bit product.
   89                        	
   90    00:E478  60         			rts
   91                        	
   92                        	
   93                        	
   94                        	; ***************************************************************************
   95                        	; unsigned int
   96                        	; _divuint (unsigned int x, unsigned int y)
   97                        	;
   98                        	; 1st parameter in Y:A (unsigned dividend)
   99                        	; 2nd parameter in __divuint_PARM_2 (unsigned divisor)
  100                        	; result in Y:A
  101                        	
  102    00:E479  20 81 E4   	__divuint:	jsr	__moduint		; Call the basic uint division.
  103                        	
  104    00:E47C  A5 94      			lda.l	<quotient		; Then get the result from where
  105    00:E47E  A4 95      			ldy.h	<quotient		; it was calculated.
  106    00:E480  60         			rts
  107                        	
  108                        	
  109                        	
  110                        	; ***************************************************************************
  111                        	; unsigned int
  112                        	; _moduint (unsigned int x, unsigned int y)
  113                        	;
  114                        	; 1st parameter in Y:A (unsigned dividend)
  115                        	; 2nd parameter in __moduint_PARM_2 (unsigned divisor)
  116                        	; result in Y:A
  117                        	;
  118                        	; If the dividend has more bits than the divisor, then we need to check the
  119                        	; 17th bit of the remainder!
  120                        	
  121               0000     		.if	0
  176                        		.else
  177                        	
  178    00:E481  85 94      	__moduint:	sta.l	<dividend		; 1st SDCC parameter in Y:A.
  179    00:E483  84 95      			sty.h	<dividend
  180                        	
  181    00:E485  A5 00      	divmoduint:	lda.l	<divisor		; Check for a divide-by-zero.
  182    00:E487  05 01      			ora.h	<divisor
  183    00:E489  F0 FE      	.zero:		beq	.zero
  184                        	
  185    00:E48B  A2 11      			ldx	#16 + 1
  186                        	
  187    00:E48D  C2         			cly				; Clear remainder.
  188    00:E48E  84 97      			sty.h	<remainder
  189                        	
  190    00:E490  98         	.skip:		tya				; Restore remainder lo-byte.
  191                        	
  192    00:E491  26 94      	.loop:		rol.l	<dividend		; Quotient bit -> dividend LSB.
  193    00:E493  26 95      			rol.h	<dividend		; Rotate dividend, MSB -> C.
  194                        	
  195    00:E495  CA         			dex
  196    00:E496  F0 14      			beq	.finished
  197                        	
  198    00:E498  2A         			rol	a			; Rotate C into remainder.
  199    00:E499  26 97      			rol.h	<remainder
  200                        	;		php				; Preserve remainder 17th bit.
  201                        	
  202    00:E49B  A8         			tay				; Preserve remainder lo-byte.
  203                        	
  204    00:E49C  C5 00      			cmp.l	<divisor		; Test divisor.
  205    00:E49E  A5 97      			lda.h	<remainder
  206    00:E4A0  E5 01      			sbc.h	<divisor
  207    00:E4A2  90 EC      			bcc	.skip			; CC if divisor > remainder.
  208                        	
  209                        	;		cmp.l	<divisor		; If the dividend has more bits
  210                        	;		lda.h	<remainder		; than the divisor then we need
  211                        	;		sbc.h	<divisor		; to check the remainder hi-bit.
  212                        	;		bcs	.subtract		; CS if divisor <= remainder.
  213                        	;		plp				; Restore remainder 17th bit.
  214                        	;		bcc	.skip			; CC if divisor > remainder.
  215                        	;		db	$90			; Turn "plp" into "bcc" to skip.
  216                        	;.subtract:	plp				; Discard remainder 17th bit.
  217                        	;		sec
  218                        	
  219    00:E4A4  85 97      			sta.h	<remainder		; Subtract divisor.
  220    00:E4A6  98         			tya
  221    00:E4A7  E5 00      			sbc.l	<divisor
  222    00:E4A9  38         			sec				
  223    00:E4AA  80 E5      			bra	.loop
  224                        	
  225    00:E4AC  A4 97      	.finished:	ldy.h	<remainder		; Get the remainder hi-byte.
  226                        	
  227    00:E4AE  60         			rts
  228                        	
  229                        		.endif
  230                        	
  231                        	
  232                        	
  233                        	; ***************************************************************************
  234                        	; int
  235                        	; _divsint (int x, int y)
  236                        	;
  237                        	; 1st parameter in Y:A (signed dividend)
  238                        	; 2nd parameter in __divsint_PARM_2 (signed divisor)
  239                        	; result in Y:A
  240                        	
  241    00:E4AF  20 B7 E4   	__divsint:	jsr	__modsint		; Call the basic sint division.
  242                        	
  243    00:E4B2  A5 94      			lda.l	<quotient		; Then get the result from where
  244    00:E4B4  A4 95      			ldy.h	<quotient		; it was calculated.
  245    00:E4B6  60         			rts
  246                        	
  247                        	
  248                        	
  249                        	; ***************************************************************************
  250                        	; int
  251                        	; _modsint (int x, int y)
  252                        	;
  253                        	; 1st parameter in Y:A (signed dividend)
  254                        	; 2nd parameter in __modsint_PARM_2 (signed divisor)
  255                        	; result in Y:A
  256                        	
  257    00:E4B7  84 95      	__modsint:	sty.h	<dividend
  258                        	
  259    00:E4B9  C0 80      			cpy	#$80			; Remainder -ve if dividend
  260    00:E4BB  08         			php				; was -ve.
  261    00:E4BC  90 03      			bcc	!+
  262    00:E4BE  20 0E E5   			jsr	neg_yacs		; Negate the dividend.
  263                        	
  264    00:E4C1  85 94      	!:		sta.l	<dividend		; Store the dividend.
  265    00:E4C3  A5 95      			lda.h	<dividend
  266    00:E4C5  84 95      			sty.h	<dividend
  267                        	
  268    00:E4C7  45 01      			eor.h	<divisor		; Quotient is -ve if divisor
  269    00:E4C9  08         			php				; and dividend signs differ.
  270                        	
  271    00:E4CA  A5 01      			lda.h	<divisor		; Is the divisor -ve?
  272    00:E4CC  10 0B      			bpl	!+
  273                        	
  274    00:E4CE  38         			sec				; Negate the divisor.
  275    00:E4CF  62         			cla
  276    00:E4D0  E5 00      			sbc.l	<divisor
  277    00:E4D2  85 00      			sta.l	<divisor
  278    00:E4D4  62         			cla
  279    00:E4D5  E5 01      			sbc.h	<divisor
  280    00:E4D7  85 01      			sta.h	<divisor
  281                        	
  282    00:E4D9  20 85 E4   	!:		jsr	divmoduint		; Do the unsigned division.
  283                        	
  284    00:E4DC  28         	.result:	plp				; Should the quotient be -ve?
  285    00:E4DD  10 0D      			bpl	.remainder
  286                        	
  287    00:E4DF  AA         			tax				; Preserve remainder lo-byte.
  288                        	
  289    00:E4E0  38         			sec				; Then negate the quotient.
  290    00:E4E1  62         			cla
  291    00:E4E2  E5 94      			sbc.l	<dividend
  292    00:E4E4  85 94      			sta.l	<dividend
  293    00:E4E6  62         			cla
  294    00:E4E7  E5 95      			sbc.h	<dividend
  295    00:E4E9  85 95      			sta.h	<dividend
  296                        	
  297    00:E4EB  8A         			txa				; Restore remainder lo-byte.
  298                        	
  299    00:E4EC  28         	.remainder:	plp				; Was the dividend -ve?
  300    00:E4ED  B0 1F      			bcs	neg_yacs		; Then negate the remainder.
  301    00:E4EF  60         			rts
  302                        	
  303                        	
  304                        	
  305                        	; ***************************************************************************
  306                        	; unsigned int
  307                        	; _muluchar (unsigned char x, unsigned char y)
  308                        	;
  309                        	; 1st parameter in A (unsigned multiplicand)
  310                        	; 2nd parameter in Y (unsigned multiplier)
  311                        	; result in Y:A
  312                        	
  313    00:E4F0  84 00      	__muluchar:	sty	<multiplier
  314                        	
  315    00:E4F2  A0 08      	muluchar_a:	ldy	#8			; Loop 8 times.
  316                        	
  317    00:E4F4  4A         			lsr	a			; Divide multiplicand by 2
  318    00:E4F5  85 94      			sta	<multiplicand		; and clear the 8th bit.
  319                        	
  320    00:E4F7  62         			cla				; Clear top byte of product.
  321    00:E4F8  90 03      			bcc	.rotate
  322                        	
  323    00:E4FA  18         	.add:		clc				; Add the 8-bit multiplier to
  324    00:E4FB  65 00      			adc	<multiplier		; top 8-bits of the product.
  325                        	
  326    00:E4FD  6A         	.rotate:	ror	a			; Rotate product into the top
  327    00:E4FE  66 94      			ror	<multiplicand		; bits of the multiplicand.
  328                        	
  329    00:E500  88         			dey
  330    00:E501  B0 F7      			bcs	.add			; Add multiplier to top byte?
  331    00:E503  D0 F8      			bne	.rotate			; Completed 8 bits?
  332                        	
  333    00:E505  A8         			tay				; Return the 16-bit product.
  334    00:E506  A5 94      			lda	<multiplicand
  335                        	
  336    00:E508  60         			rts
  337                        	
  338                        	
  339                        	
  340                        	; ***************************************************************************
  341                        	; signed int
  342                        	; abs (signed int x)
  343                        	;
  344                        	; 1st parameter in Y:A (signed)
  345                        	; result in Y:A
  346                        	
  347    00:E509  C0 80      	_abs:		cpy	#$80			; Is the hi-byte -ve?
  348    00:E50B  90 0B      			bcc	!+
  349                        	
  350    00:E50D  38         	neg_ya:		sec
  351    00:E50E  49 FF      	neg_yacs:	eor	#$FF
  352    00:E510  69 00      			adc	#0
  353    00:E512  42         			say
  354    00:E513  49 FF      			eor	#$FF
  355    00:E515  69 00      			adc	#0
  356    00:E517  42         			say
  357    00:E518  60         	!:		rts
  358                        	
  359    00:E519             	_abs.1		.alias	_abs
  360                        	
  361                        	
  362                        	
  363                        	; ***************************************************************************
  364                        	; signed int
  365                        	; _mulschar (signed char x, signed char y)
  366                        	;
  367                        	; 1st parameter in A (signed multiplicand)
  368                        	; 2nd parameter in Y (signed multiplier)
  369                        	; result in Y:A
  370                        	;
  371                        	; N.B. Y and A get swapped to make the code shorter.
  372                        	
  373    00:E519  85 94      	__mulschar:	sta	<multiplicand		; Remember multiplicand sign.
  374                        	
  375    00:E51B  C9 80      			cmp	#$80			; Is the multiplicand -ve?
  376    00:E51D  90 03      			bcc	!+
  377    00:E51F  49 FF      			eor	#$FF			; Negate the multiplicand.
  378    00:E521  1A         			inc	a
  379    00:E522  85 00      	!:		sta	<multiplier		; Then save it as multiplier.
  380                        	
  381    00:E524  98         			tya				; Product -ve if multiplicand
  382    00:E525  45 94      			eor	<multiplicand		; and multiplier signs differ.
  383    00:E527  08         			php				; Remember product sign.
  384                        	
  385    00:E528  98         			tya				; Is the multiplicand -ve?
  386    00:E529  10 03      			bpl	!+
  387    00:E52B  49 FF      			eor	#$FF			; Negate the multiplicand.
  388    00:E52D  1A         			inc	a
  389                        	
  390    00:E52E  20 F2 E4   	!:		jsr	muluchar_a		; Multiplier already saved.
  391                        	
  392    00:E531  28         			plp				; Is the product -ve?
  393    00:E532  30 D9      			bmi	neg_ya
  394    00:E534  60         			rts
  395                        	
  396                        	
  397                        	
  398                        	; ***************************************************************************
  399                        	; unsigned int
  400                        	; _mulsuchar (signed char x, signed char y)
  401                        	;
  402                        	; 1st parameter in A (unsigned multiplicand)
  403                        	; 2nd parameter in Y (signed multiplier)
  404                        	; result in Y:A
  405                        	;
  406                        	; N.B. Y and A get swapped to make the code shorter.
  407                        	
  408    00:E535  42         	__mulsuchar:	say				; Put the signed param in A.
  409                        			; drop through to __muluschar
  410                        	
  411                        	
  412                        	
  413                        	; ***************************************************************************
  414                        	; signed int
  415                        	; _muluschar (unsigned char x, unsigned char y)
  416                        	;
  417                        	; 1st parameter in A (signed multiplicand)
  418                        	; 2nd parameter in Y (unsigned multiplier)
  419                        	; result in Y:A
  420                        	
  421    00:E536  C9 80      	__muluschar:	cmp	#$80			; Is multiplicand -ve?
  422    00:E538  08         			php				; Remember the sign.
  423    00:E539  90 03      			bcc	!+
  424    00:E53B  49 FF      			eor	#$FF			; Negate multiplicand.
  425    00:E53D  1A         			inc	a
  426                        	
  427    00:E53E  20 F0 E4   	!:		jsr	__muluchar		; Do the unsigned multiply.
  428                        	
  429    00:E541  28         			plp				; Was multiplicand -ve?
  430    00:E542  B0 CA      			bcs	neg_yacs		; Then negate the product.
  431    00:E544  60         			rts
  432                        	
  433                        	
  434                        	
  435                        	; ***************************************************************************
  436                        	; unsigned int
  437                        	; _moduchar (unsigned char x, unsigned char y)
  438                        	;
  439                        	; 1st parameter in A (unsigned dividend)
  440                        	; 2nd parameter in Y (unsigned divisor)
  441                        	; result in Y:A
  442                        	
  443    00:E545  84 00      	__moduchar:	sty.l	<divisor
  444                        	
  445    00:E547  0A         	divmodu8_a:	asl	a			; Rotate dividend, MSB -> C.
  446    00:E548  85 94      			sta.l	<dividend
  447    00:E54A  64 95      			stz.h	<dividend		; Clear quotient hi-byte.
  448                        	
  449    00:E54C  A0 08      			ldy	#8
  450    00:E54E  62         			cla				; Clear remainder.
  451    00:E54F  2A         	.loop:		rol	a			; Rotate C into remainder.
  452    00:E550  C5 00      			cmp	<divisor		; Test divisor.
  453    00:E552  90 02      			bcc	.skip			; CC if divisor > remainder.
  454    00:E554  E5 00      			sbc	<divisor		; Subtract divisor.
  455    00:E556  26 94      	.skip:		rol	<dividend		; Quotient bit -> dividend LSB.
  456    00:E558  88         			dey
  457    00:E559  D0 F4      			bne	.loop
  458                        	
  459    00:E55B  C2         			cly				; Clear hi-byte of return.
  460    00:E55C  60         			rts				; Return the 16-bit remainder.
  461                        	
  462                        	
  463                        	
  464                        	; ***************************************************************************
  465                        	; unsigned int
  466                        	; _divuchar (unsigned char x, unsigned char y)
  467                        	;
  468                        	; 1st parameter in A (unsigned dividend)
  469                        	; 2nd parameter in Y (unsigned divisor)
  470                        	; result in Y:A
  471                        	
  472    00:E55D  20 45 E5   	__divuchar:	jsr	__moduchar
  473                        	
  474    00:E560  A5 94      			lda	<dividend		; Get the dividend lo-byte.
  475    00:E562  60         			rts				; Return the 16-bit dividend.
  476                        	
  477                        	
  478                        	
  479                        	; ***************************************************************************
  480                        	; signed int
  481                        	; _modschar (signed char x, signed char y)
  482                        	;
  483                        	; 1st parameter in A (signed dividend)
  484                        	; 2nd parameter in Y (signed divisor)
  485                        	; result in Y:A
  486                        	
  487    00:E563  AA         	__modschar:	tax				; Preserve the dividend.
  488    00:E564  08         			php				; Remember remainder sign.
  489                        	
  490    00:E565  84 00      			sty	<divisor		; Quotient negative if divisor
  491    00:E567  45 00      			eor	<divisor		; and dividend signs differ.
  492    00:E569  08         			php				; Remember the quotient sign.
  493                        	
  494    00:E56A  98         			tya				; Is the divisor -ve?
  495    00:E56B  10 05      			bpl	!+
  496    00:E56D  49 FF      			eor	#$FF			; Negate the divisor.
  497    00:E56F  1A         			inc	a
  498    00:E570  85 00      			sta	<divisor
  499                        	
  500    00:E572  8A         	!:		txa				; Is the dividend -ve?
  501    00:E573  10 03      			bpl	divmods8_a
  502                        	
  503    00:E575  49 FF      	divmods8_neg:	eor	#$FF			; Negate the dividend.
  504    00:E577  1A         			inc	a
  505                        	
  506    00:E578  20 47 E5   	divmods8_a:	jsr	divmodu8_a		; Do the unsigned division.
  507                        	
  508    00:E57B  28         			plp				; Should the quotient be -ve?
  509    00:E57C  10 0C      			bpl	!+
  510                        	
  511    00:E57E  AA         			tax				; Preserve remainder lo-byte.
  512                        	
  513    00:E57F  38         			sec				; Negate the quotient.
  514    00:E580  62         			cla
  515    00:E581  E5 94      			sbc.l	<dividend
  516    00:E583  85 94      			sta.l	<dividend
  517    00:E585  A9 FF      			lda	#$FF
  518    00:E587  85 95      			sta.h	<dividend
  519                        	
  520    00:E589  8A         			txa				; Restore remainder lo-byte.
  521                        	
  522    00:E58A  28         	!:		plp				; Was the dividend -ve?
  523    00:E58B  10 05      			bpl	!+
  524                        	
  525    00:E58D  49 FF      			eor	#$FF			; Then negate the remainder.
  526    00:E58F  1A         			inc	a
  527    00:E590  A0 FF      			ldy	#$FF
  528                        	
  529    00:E592  60         	!:		rts
  530                        	
  531                        	
  532                        	
  533                        	; ***************************************************************************
  534                        	; signed int
  535                        	; _moduschar (unsigned char x, unsigned char y)
  536                        	;
  537                        	; 1st parameter in A (signed dividend)
  538                        	; 2nd parameter in Y (unsigned divisor)
  539                        	; result in Y:A
  540                        	
  541    00:E593  84 00      	__moduschar:	sty.l	<divisor
  542                        	
  543    00:E595  A8         			tay				; Is the dividend -ve?
  544    00:E596  08         			php				; Remember remainder sign.
  545    00:E597  08         			php				; Remember quotient sign.
  546    00:E598  30 DB      			bmi	divmods8_neg
  547    00:E59A  80 DC      			bra	divmods8_a
  548                        	
  549                        	
  550                        	
  551                        	; ***************************************************************************
  552                        	; unsigned int
  553                        	; _modsuchar (signed char x, signed char y)
  554                        	;
  555                        	; 1st parameter in A (unsigned dividend)
  556                        	; 2nd parameter in Y (signed divisor)
  557                        	; result in Y:A
  558                        	
  559    00:E59C  AA         	__modsuchar:	tax				; Preserve the dividend.
  560    00:E59D  08         			php				; Remember remainder sign.
  561                        	
  562    00:E59E  98         			tya				; Check the divisor sign.
  563    00:E59F  08         			php				; Remember quotient sign.
  564    00:E5A0  10 03      			bpl	!+
  565    00:E5A2  49 FF      			eor	#$FF			; Negate the divisor.
  566    00:E5A4  1A         			inc	a
  567    00:E5A5  85 00      	!:		sta.l	<divisor
  568                        	
  569    00:E5A7  8A         			txa				; Restore the dividend.
  570    00:E5A8  80 CE      			bra	divmods8_a
  571                        	
  572                        	
  573                        	
  574                        	; ***************************************************************************
  575                        	; signed int
  576                        	; _divschar (signed char x, signed char y)
  577                        	;
  578                        	; 1st parameter in A (signed dividend)
  579                        	; 2nd parameter in Y (signed divisor)
  580                        	; result in Y:A
  581                        	
  582    00:E5AA  20 63 E5   	__divschar:	jsr	__modschar
  583                        	
  584    00:E5AD  A5 94      			lda.l	<dividend
  585    00:E5AF  A4 95      			ldy.h	<dividend
  586    00:E5B1  60         			rts
  587                        	
  588                        	
  589                        	
  590                        	; ***************************************************************************
  591                        	; signed int
  592                        	; _divuschar (unsigned char x, unsigned char y)
  593                        	;
  594                        	; 1st parameter in A (signed dividend)
  595                        	; 2nd parameter in Y (unsigned divisor)
  596                        	; result in Y:A
  597                        	
  598    00:E5B2  20 93 E5   	__divuschar:	jsr	__moduschar
  599                        	
  600    00:E5B5  A5 94      			lda.l	<dividend
  601    00:E5B7  A4 95      			ldy.h	<dividend
  602    00:E5B9  60         			rts
  603                        	
  604                        	
  605                        	
  606                        	; ***************************************************************************
  607                        	; unsigned int
  608                        	; _divsuchar (signed char x, signed char y)
  609                        	;
  610                        	; 1st parameter in A (unsigned dividend)
  611                        	; 2nd parameter in Y (signed divisor)
  612                        	; result in Y:A
  613                        	
  614    00:E5BA  20 9C E5   	__divsuchar:	jsr	__modsuchar
  615                        	
  616    00:E5BD  A5 94      			lda.l	<dividend
  617    00:E5BF  A4 95      			ldy.h	<dividend
  618    00:E5C1  60         			rts
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   43                        	
   44                        			; Define in hucc-config.inc to remove this.
   45                        	
   46               0001     		.ifndef	HUCC_NO_DEFAULT_RANDOM
                             #[3]   "..\..\..\include\hucc\random.asm"
   47                        			include	"random.asm"		; Random number generator.
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; random.asm
    5                        	;
    6                        	; Pseudo-random number generator (https://github.com/bbbradsmith/prng_6502)
    7                        	;
    8                        	; Copyright Brad Smith 2019.
    9                        	;
   10                        	; License:
   11                        	;
   12                        	; This code and may be used, reused, and modified for any purpose, commercial
   13                        	; or non-commercial.
   14                        	;
   15                        	; Attribution in released binaries or documentation is appreciated but not
   16                        	; required.
   17                        	;
   18                        	; ***************************************************************************
   19                        	; ***************************************************************************
   20                        	;
   21                        	; This is a linear feedback shift register (LFSR) in Galois form, which is
   22                        	; iterated 8 times to produce an 8-bit pseudo-random number.
   23                        	;
   24                        	; Two widths of LFSR are provided:
   25                        	;
   26                        	;  24-bit requires 3 bytes, and repeats after 16777215 calls.
   27                        	;  32-bit requires 4 bytes, and repeats after 4294967295 calls.
   28                        	;
   29                        	; Usage:
   30                        	;
   31                        	;  Initialize the zero-page "random" variable to any value other than 0.
   32                        	;  The size of "random" is 3 or 4 bytes, depending on the width of LFSR
   33                        	;  chosen.
   34                        	;
   35                        	;  Call one of the RNG functions and an 8-bit result will be returned in the
   36                        	;  A-register (with flags), and the Y-register will be clobbered.
   37                        	;
   38                        	;  Do not mix RNGs of different width in the same program, unless you can
   39                        	;  give them each separate "random" state storage.
   40                        	;
   41                        	; ***************************************************************************
   42                        	; ***************************************************************************
   43                        	
   44                        	
   45               0001     		.ifndef	_KICKC				; Variables defined in C?
   46               2098     			.zp
   47    F8:2098             	random:		.ds	4			; Seed is 3 or 4 bytes.
   48               E5C2     			.code
   49                        		.endif	_KICKC
   50                        	
   51                        	
   52                        	
   53                        	; ***************************************************************************
   54                        	; ***************************************************************************
   55                        	;
   56                        	; init_random - Initialize a 32-bit LFSR using an 8-bit seed value in Y.
   57                        	;
   58                        	; The LFSR is initialized to n'th entry of a standard CRC-32 lookup-table,
   59                        	; which gives it a decent distribution of bits.
   60                        	;
   61                        	; Since seed is an 8-bit value, there are 255 (256-1) possible starting
   62                        	; states for the LFSR, because 0 would generate a 0 state.
   63                        	;
   64                        	; CRC-32 code by Paul Guertin. See http://6502.org/source/integers/crc.htm
   65                        	;
   66                        	
   67    18:D182             	init_random	.proc
   68                        	
   69    18:D182  A9 01      			lda	#1			; Init CRC-32 table value.
   70    18:D184  85 98      			sta	<random + 0
   71    18:D186  98         			tya				; Get and check the seed value.
   72    18:D187  D0 01      			bne	.reverse_seed
   73    18:D189  3A         			dec	a			; Which must be non-zero!
   74    18:D18A  4A         	.reverse_seed:	lsr	a			; Reverse the bits so that small changes
   75    18:D18B  26 98      			rol	<random + 0		; in the seed make larger differences in
   76    18:D18D  90 FB      			bcc	.reverse_seed		; the initial state.
   77                        	
   78    18:D18F  64 99      			stz	<random + 1		; A contains the high byte of the CRC-32.
   79    18:D191  64 9A      			stz	<random + 2		; The other three bytes are in memory.
   80    18:D193  62         			cla
   81                        	
   82    18:D194  A0 08      			ldy	#8			; Y counts bits in a byte.
   83    18:D196  4A         	.bit_loop:	lsr	a			; The CRC-32 algorithm is similar to CRC-16
   84    18:D197  66 9A      			ror	<random + 2		; except that it is reversed (originally for
   85    18:D199  66 99      			ror	<random + 1		; hardware reasons). This is why we shift
   86    18:D19B  66 98      			ror	<random + 0		; right instead of left here.
   87    18:D19D  90 16      			bcc	.no_add			; Do nothing if no overflow,
   88    18:D19F  49 ED      			eor	#$ED			; else add CRC-32 polynomial $EDB88320.
   89                        	
   90    18:D1A1  48         			pha				; Save high byte while we do others.
   91    18:D1A2  A5 9A      			lda	<random + 2
   92    18:D1A4  49 B8      			eor	#$B8			; Most reference books give the CRC-32 poly
   93    18:D1A6  85 9A      			sta	<random + 2		; as $04C11DB7. This is actually the same if
   94    18:D1A8  A5 99      			lda	<random + 1		; you write it in binary and read it right-
   95    18:D1AA  49 83      			eor	#$83			; to-left instead of left-to-right. Doing it
   96    18:D1AC  85 99      			sta	<random + 1		; this way means we won't have to explicitly
   97    18:D1AE  A5 98      			lda	<random + 0		; reverse things afterwards.
   98    18:D1B0  49 20      			eor	#$20
   99    18:D1B2  85 98      			sta	<random + 0
  100    18:D1B4  68         			pla				; Restore high byte.
  101                        	
  102    18:D1B5  88         	.no_add:	dey				; Do next bit.
  103    18:D1B6  D0 DE      			bne	.bit_loop
  104                        	
  105    18:D1B8  85 9B      			sta	<random + 3		; Save CRC-32 high-byte.
  106                        	
  107                        			leave				; All done!
         18:D1BA  4C EF FF   			jmp	leave_proc
  108                        	
  109                        			.endp
  110                        	
  111                        	
  112                        	
  113                        	; ***************************************************************************
  114                        	; ***************************************************************************
  115                        	;
  116                        	; get_random - 8-bit LFSR pseudo-random number with a 24-bit cycle.
  117                        	;
  118                        	; The pseudo-random sequence repeats after (2^24)-1 calls.
  119                        	;
  120                        	; Written by Wim Couwenberg, see ...
  121                        	;
  122                        	; "https://wimcouwenberg.wordpress.com/2020/11/15/ ...
  123                        	;  a-fast-24-bit-prng-algorithm-for-the-6502-processor/"
  124                        	;
  125                        	; Takes 68 cycles on the HuC6280, incl JSR & RTS.
  126                        	;
  127                        	; N.B. HuCC library code relies on this preserving X and Y!
  128                        	;
  129                        	
  130    00:E5C2  C2         	_rand8:		cly				; Entry point for HuCC.
  131                        	
  132    00:E5C3  A5 98      	get_random:	lda	<random + 0		; Operation 7 (with carry clear).
  133    00:E5C5  0A         			asl	a
  134    00:E5C6  45 99      			eor	<random + 1
  135    00:E5C8  85 99      			sta	<random + 1
  136    00:E5CA  2A         			rol	a             		; Operation 9.
  137    00:E5CB  45 9A      			eor	<random + 2
  138    00:E5CD  85 9A      			sta	<random + 2
  139    00:E5CF  45 98      			eor	<random + 0		; Operation 5.
  140    00:E5D1  85 98      			sta	<random + 0
  141    00:E5D3  A5 99      			lda	<random + 1		; Operation 15.
  142    00:E5D5  6A         			ror	a
  143    00:E5D6  45 9A      			eor	<random + 2
  144    00:E5D8  85 9A      			sta	<random + 2
  145    00:E5DA  45 99      			eor	<random + 1		; Operation 6.
  146    00:E5DC  85 99      			sta	<random + 1
  147    00:E5DE  60         			rts
  148                        	
  149                        	
  150                        	
  151               0000     		.if	0
  316                        		.endif
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   48                        		.endif
   49                        	
   50                        			; Optional libraries that get used when their header files
   51                        			; are included in a HuCC project.
   52                        			;
   53                        			; When the HuCC compiler is invoked with the "--legacy"
   54                        			; option to compile old projects, then the "huc.h" file
   55                        			; is automatically included, which then includes a list
   56                        			; of specific headers corresponding to HuC's library.
   57                        	
   58               0001     		.ifdef	HUCC_USES_GFX
                             #[3]   "..\..\..\include\hucc\hucc-gfx.asm"
   59                        			include	"hucc-gfx.asm"		; Set in hucc_gfx.h
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; huc-gfx.asm
    5                        	;
    6                        	; Based on the original HuC and MagicKit functions by David Michel and the
    7                        	; other original HuC developers.
    8                        	;
    9                        	; Modifications copyright John Brandwood 2024-2025.
   10                        	;
   11                        	; Distributed under the Boost Software License, Version 1.0.
   12                        	; (See accompanying file LICENSE_1_0.txt or copy at
   13                        	;  http://www.boost.org/LICENSE_1_0.txt)
   14                        	;
   15                        	; ***************************************************************************
   16                        	; ***************************************************************************
   17                        	
   18                        	;
   19                        	; Include dependancies ...
   20                        	;
   21                        	
   22                        			include "common.asm"		; Common helpers.
   23                        			include "vce.asm"		; Useful VCE routines.
   24                        			include "vdc.asm"		; Useful VCE routines.
   25                        	
   26                        	
   27                        	
   28                        	; ***************************************************************************
   29                        	; ***************************************************************************
   30                        	;
   31                        	; void __fastcall disp_on( void );
   32                        	; void __fastcall disp_off( void );
   33                        	
   34    00:E5DF             			.alias	_disp_on		= set_dspon
   35    00:E5DF             			.alias	_disp_off		= set_dspoff
   36                        	
   37                        	
   38                        	
   39                        	; ***************************************************************************
   40                        	; ***************************************************************************
   41                        	;
   42                        	; void __fastcall set_screen_size( unsigned char value<_al> );
   43                        	; void __fastcall sgx_set_screen_size( unsigned char value<_al> );
   44                        	;
   45                        	
   46    00:E5DF             			.alias	_set_screen_size.1	= set_bat_vdc
   47    00:E5DF             			.alias	_sgx_set_screen_size.1	= set_bat_sgx
   48                        	
   49                        	
   50                        	
   51                        	; ***************************************************************************
   52                        	; ***************************************************************************
   53                        	;
   54                        	; void __fastcall init_256x224( void );
   55                        	
   56    18:CF95             	_init_256x224	.proc
   57                        	
   58               0800     	.BAT_SIZE	=	64 * 32
   59               0080     	.CHR_0x20	=	.BAT_SIZE / 16		; 1st tile # after the BAT.
   60               7F00     	.SAT_ADDR	=	$7F00			; SAT takes 16 tiles of VRAM.
   61                        	
   62    18:CF95  08         			php				; Disable interrupts.
   63    18:CF96  78         			sei
   64                        	
   65    18:CF97  20 AB FD   			call	clear_vce		; Clear all palettes.
   66                        	
   67    18:CF9A  A9 80      			lda.l	#.CHR_0x20		; CHR # of ASCII ' '.
   68    18:CF9C  85 F8      			sta.l	<_ax
   69    18:CF9E  A9 00      			lda.h	#.CHR_0x20
   70    18:CFA0  85 F9      			sta.h	<_ax
   71                        	
   72    18:CFA2  A9 08      			lda	#>.BAT_SIZE		; Size of BAT in words.
   73    18:CFA4  85 FA      			sta	<_bl
   74                        	
   75    18:CFA6  20 BF FD   			call	clear_vram_vdc		; Clear VRAM.
   76               0001     		.if	SUPPORT_SGX
   77    18:CFA9  20 A1 FD   			call	clear_vram_sgx
   78                        		.endif
   79                        	
   80    18:CFAC  A9 D0      			lda	#<.mode_256x224		; Disable BKG & SPR layers but
   81    18:CFAE  85 EC      			sta.l	<_bp			; enable RCR & VBLANK IRQ.
   82    18:CFB0  A9 CF      			lda	#>.mode_256x224
   83    18:CFB2  85 ED      			sta.h	<_bp
   84                        	
   85               0001     		.if	SUPPORT_SGX
   86    18:CFB4  20 97 FD   			call	sgx_detect		; Are we really on an SGX?
   87    18:CFB7  90 05      			bcc	!+
   88    18:CFB9  A0 18      			ldy	#^.mode_256x224		; Set SGX 1st, with no VBL.
   89    18:CFBB  20 8D FD   			call	set_mode_sgx
   90                        		.endif
   91    18:CFBE  A0 18      	!:		ldy	#^.mode_256x224		; Set VDC 2nd, VBL allowed.
   92    18:CFC0  20 83 FD   			call	set_mode_vdc
   93                        	
   94               0001     		.if	SUPPORT_SGX
   95    18:CFC3  2C 10 02   			bit	SGX_SR			; Purge any overdue RCR.
   96                        		.endif
   97    18:CFC6  2C 00 02   			bit	VDC_SR			; Purge any overdue VBL.
   98    18:CFC9  28         			plp				; Restore interrupts.
   99                        	
  100    18:CFCA  20 09 E3   			call	wait_vsync		; Wait for the next VBLANK.
  101                        	
  102                        			leave				; All done, phew!
         18:CFCD  4C EF FF   			jmp	leave_proc
  103                        	
  104                        			; A standard 256x224 screen with overscan.
  105                        	
  106    18:CFD0  80         	.mode_256x224:	db	$80			; VCE Control Register.
  107    18:CFD1  04         			db	VCE_CR_5MHz + XRES_SOFT	;   Video Clock + Artifact Reduction
  108                        	
  109    18:CFD2  09         			db	VDC_MWR			; Memory-access Width Register
  110    18:CFD3  10 00      			dw	VDC_MWR_64x32 + VDC_MWR_1CYCLE
  111    18:CFD5  0A         			db	VDC_HSR			; Horizontal Sync Register
  112    18:CFD6  02 02      			dw	VDC_HSR_256
  113    18:CFD8  0B         			db	VDC_HDR			; Horizontal Display Register
  114    18:CFD9  1F 04      			dw	VDC_HDR_256
  115    18:CFDB  0C         			db	VDC_VPR			; Vertical Sync Register
  116    18:CFDC  02 17      			dw	VDC_VPR_224
  117    18:CFDE  0D         			db	VDC_VDW			; Vertical Display Register
  118    18:CFDF  DF 00      			dw	VDC_VDW_224
  119    18:CFE1  0E         			db	VDC_VCR			; Vertical Display END position Register
  120    18:CFE2  FF 00      			dw	VDC_VCR_224
  121    18:CFE4  0F         			db	VDC_DCR			; DMA Control Register
  122    18:CFE5  10 00      			dw	$0010			;   Enable automatic VRAM->SATB
  123    18:CFE7  13         			db	VDC_DVSSR		; VRAM->SATB address $7F00
  124    18:CFE8  00 7F      			dw	.SAT_ADDR
  125    18:CFEA  07         			db	VDC_BXR			; Background X-Scroll Register
  126    18:CFEB  00 00      			dw	$0000
  127    18:CFED  08         			db	VDC_BYR			; Background Y-Scroll Register
  128    18:CFEE  00 00      			dw	$0000
  129    18:CFF0  06         			db	VDC_RCR			; Raster Counter Register
  130    18:CFF1  00 00      			dw	$0000			;   Never occurs!
  131    18:CFF3  05         			db	VDC_CR			; Control Register
  132    18:CFF4  0C 00      			dw	$000C			;   Enable VSYNC & RCR IRQ
  133    18:CFF6  00         			db	0
  134                        	
  135                        			.endp
  136                        	
  137                        	
  138                        	
  139                        	; ***************************************************************************
  140                        	; ***************************************************************************
  141                        	;
  142                        	; void __fastcall init_240x208( void );
  143                        	
  144                        	_init_240x208	.proc
  223                        			.endp
  224                        	
  225                        	
  226                        	
  227                        	; ***************************************************************************
  228                        	; ***************************************************************************
  229                        	;
  230                        	; void __fastcall _macro set_xres( unsigned int x_pixels<_ax> );
  231                        	; void __fastcall _macro sgx_set_xres( unsigned int x_pixels<_ax> );
  232                        	;
  233                        	; void __fastcall set_xres( unsigned int x_pixels<_ax>, unsigned char blur_flag<_bl> );
  234                        	; void __fastcall sgx_set_xres( unsigned int x_pixels<_ax>, unsigned char blur_flag<_bl> );
  235                        	;
  236                        	; blur_flag = XRES_SOFT (default if not specified), XRES_SHARP or XRES_KEEP
  237                        	
  238                        	set_xres_group	.procgroup			; These routines share code!
  337                        			.endprocgroup	; set_xres_group
  338                        	
  339                        	
  340                        	
  341                        	; ***************************************************************************
  342                        	; ***************************************************************************
  343                        	;
  344                        	; HuC VRAM Functions
  345                        	;
  346                        	; ***************************************************************************
  347                        	; ***************************************************************************
  348                        	
  349                        	
  350    18:CEC7             	load_vram_group	.procgroup			; These routines share code!
  351                        	
  352                        	; ***************************************************************************
  353                        	; ***************************************************************************
  354                        	;
  355                        	; void __fastcall load_vram( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_words<_ax> );
  356                        	; void __fastcall sgx_load_vram( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned int num_words<_ax> );
  357                        	;
  358                        	; void __fastcall far_load_vram( unsigned int vram<_di>, unsigned int num_words<_ax> );
  359                        	; void __fastcall sgx_far_load_vram( unsigned int vram<_di>, unsigned int num_words<_ax> );
  360                        	;
  361                        	; load_vram_sgx -  copy a block of memory to VRAM
  362                        	; load_vram_vdc -  copy a block of memory to VRAM
  363                        	;
  364                        	; _bp		= BAT memory location
  365                        	; _bp_bank	= BAT bank
  366                        	; _di		= VRAM base address
  367                        	; _ax		= nb of words to copy
  368                        	; ----
  369                        	; N.B. BAT data *must* be word-aligned!
  370                        	
  371               0000     		.ifndef	VRAM_XFER_SIZE
  373                        		.endif
  374                        	
  375    18:CEC7             	load_vram_x	.proc
  376                        	
  377    18:CEC7  43 08      			tma3
  378    18:CEC9  48         			pha
  379    18:CECA  43 10      			tma4
  380    18:CECC  48         			pha
  381                        	
  382    18:CECD  A4 02      			ldy	<_bp_bank
  383    18:CECF  20 3B E3   			jsr	map_bp_to_mpr34		; Map data to MPR3 & MPR4.
  384                        	
  385    18:CED2  20 7F E3   			jsr	set_di_to_mawr
  386                        	
  387                        	;		tii	.vdc_tai, ram_tia, 8
  388                        	
  389               0001     		.if	SUPPORT_SGX
  390    18:CED5  8A         			txa				; Select which VDC to write
  391    18:CED6  1A         			inc	a			; to.
  392    18:CED7  1A         			inc	a
  393    18:CED8  8D F3 22   			sta.l	ram_tia_dst
  394                        		.endif
  395                        	
  396    18:CEDB  A9 10      			lda	#VRAM_XFER_SIZE		; Split into 16-byte chunks
  397    18:CEDD  8D F5 22   			sta.l	ram_tia_len		; for stable IRQ response.
  398                        	
  399    18:CEE0  A6 EC      			ldx.l	<_bp
  400    18:CEE2  8E F1 22   			stx.l	ram_tia_src
  401    18:CEE5  A4 ED      			ldy.h	<_bp
  402    18:CEE7  8C F2 22   			sty.h	ram_tia_src
  403                        	
  404    18:CEEA  A5 F8      			lda.l	<_ax			; Length in words.
  405    18:CEEC  48         			pha				; Preserve length.l
  406                        	
  407    18:CEED  46 F9      			lsr.h	<_ax
  408    18:CEEF  6A         			ror	a
  409    18:CEF0  46 F9      			lsr.h	<_ax
  410    18:CEF2  6A         			ror	a
  411    18:CEF3  46 F9      			lsr.h	<_ax
  412    18:CEF5  6A         			ror	a
  413               0000     		.if	VRAM_XFER_SIZE == 32
  416                        		.endif
  417                        	
  418    18:CEF6  22         			sax				; x=chunks-lo
  419    18:CEF7  F0 1F      			beq	.next_block		; a=source-lo, y=source-hi
  420                        	
  421    18:CEF9  20 F0 22   	.chunk_loop:	jsr	ram_tia			; transfer 16-bytes
  422                        	
  423    18:CEFC  18         			clc				; increment source
  424    18:CEFD  69 10      			adc	#VRAM_XFER_SIZE
  425    18:CEFF  8D F1 22   			sta.l	ram_tia_src
  426    18:CF02  90 11      			bcc	.same_page
  427    18:CF04  C8         			iny
  428    18:CF05  10 0B      			bpl	.same_bank		; remap_data
  429                        	
  430    18:CF07  42         			say
  431    18:CF08  43 10      			tma4
  432    18:CF0A  53 08      			tam3
  433    18:CF0C  1A         			inc	a
  434    18:CF0D  53 10      			tam4
  435    18:CF0F  A9 60      			lda	#$60
  436    18:CF11  42         			say
  437                        	
  438    18:CF12  8C F2 22   	.same_bank:	sty.h	ram_tia_src
  439                        	
  440    18:CF15  CA         	.same_page:	dex
  441    18:CF16  D0 E1      			bne	.chunk_loop
  442                        	
  443    18:CF18  C6 F9      	.next_block:	dec.h	<_ax
  444    18:CF1A  10 DD      			bpl	.chunk_loop
  445                        	
  446    18:CF1C  68         			pla				; Restore length.l
  447    18:CF1D  29 07      			and	#VRAM_XFER_SIZE / 2 - 1
  448    18:CF1F  F0 07      			beq	.done
  449                        	
  450    18:CF21  0A         			asl	a			; Convert words to bytes.
  451    18:CF22  8D F5 22   			sta.l	ram_tia_len
  452                        	
  453    18:CF25  20 F0 22   			jsr	ram_tia			; transfer remainder
  454                        	
  455    18:CF28  68         	.done:		pla
  456    18:CF29  53 10      			tam4
  457    18:CF2B  68         			pla
  458    18:CF2C  53 08      			tam3
  459                        	
  460                        			leave
         18:CF2E  4C EF FF   			jmp	leave_proc
  461                        	
  462                        			.endp
  463                        	
  464                        			.endprocgroup	; load_vram_group
  465                        	
  466                        	
  467                        	
  468                        	; ***************************************************************************
  469                        	; ***************************************************************************
  470                        	;
  471                        	; void __fastcall load_bat( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  472                        	; void __fastcall sgx_load_bat( unsigned int vram<_di>, unsigned char __far *data<_bp_bank:_bp>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  473                        	;
  474                        	; void __fastcall far_load_bat( unsigned int vram<_di>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  475                        	; void __fastcall sgx_far_load_bat( unsigned int vram<_di>, unsigned char tiles_w<_al>, unsigned char tiles_h<_ah> );
  476                        	;
  477                        	; load_bat_sgx - transfer a BAT to VRAM
  478                        	; load_bat_vdc - transfer a BAT to VRAM
  479                        	;
  480                        	; transfer a BAT to VRAM
  481                        	; ----
  482                        	; _bp		= BAT memory location
  483                        	; _bp_bank	= BAT bank
  484                        	; _di		= VRAM base address
  485                        	; _al		= nb of column to copy
  486                        	; _ah		= nb of row
  487                        	; ----
  488                        	; N.B. BAT data *must* be word-aligned!
  489                        	
  490               20EC     	_gfx_load_bat_PARM_2	=	_bp
  491               20F0     	_gfx_load_bat_PARM_3	=	_di
  492               20F8     	_gfx_load_bat_PARM_4	=	_al
  493               20F9     	_gfx_load_bat_PARM_5	=	_ah
  494                        	
  495    18:D0C7             	load_bat_group	.procgroup			; These routines share code!
  496                        	
  497               0001     		.if	SUPPORT_SGX
  498                        			.proc	_sgx_load_bat.4
  505                        			.endp
  506                        		.endif
  507                        	
  508    18:D0C7             			.proc	_load_bat.4
  509    18:D0C7             			.alias	_far_load_bat.3		= _load_bat.4
  510                        	
  511    18:D0C7  82         			clx				; Offset to PCE VDC.
  512                        	
  513    18:D0C8  43 08      			tma3
  514    18:D0CA  48         			pha
  515                        	
  516    18:D0CB  A4 02      			ldy	<_bp_bank
  517    18:D0CD  20 2D E3   			jsr	map_bp_to_mpr3		; Map data to MPR3.
  518                        	
  519    18:D0D0  A4 EC      			ldy.l	<_bp
  520    18:D0D2  64 EC      			stz.l	<_bp
  521                        	
  522    18:D0D4  20 7F E3   	.line_loop:	jsr	set_di_to_mawr
  523                        	
  524    18:D0D7  A5 F8      			lda	<_al
  525    18:D0D9  85 00      			sta	<__temp
  526    18:D0DB  B1 EC      	.tile_loop:	lda	[_bp], y
  527    18:D0DD  9D 02 02   			sta	VDC_DL, x
  528    18:D0E0  C8         			iny
  529    18:D0E1  B1 EC      			lda	[_bp], y
  530    18:D0E3  9D 03 02   			sta	VDC_DH, x
  531    18:D0E6  C8         			iny
  532    18:D0E7  D0 03      			bne	!+
  533    18:D0E9  20 4C E3   			jsr	inc.h_bp_mpr3
  534    18:D0EC  C6 00      	!:		dec	<__temp
  535    18:D0EE  D0 EB      			bne	.tile_loop
  536                        	
  537    18:D0F0  BD 77 26   			lda	vdc_bat_width, x
  538    18:D0F3  18         			clc
  539    18:D0F4  65 F0      			adc.l	<_di
  540    18:D0F6  85 F0      			sta.l	<_di
  541    18:D0F8  90 02      			bcc	!+
  542    18:D0FA  E6 F1      			inc.h	<_di
  543                        	
  544    18:D0FC  C6 F9      	!:		dec	<_ah
  545    18:D0FE  D0 D4      			bne	.line_loop
  546                        	
  547    18:D100  68         			pla
  548    18:D101  53 08      			tam3
  549                        	
  550                        			leave
         18:D103  4C EF FF   			jmp	leave_proc
  551                        	
  552                        			.endp
  553                        	
  554                        			.endprocgroup	; load_bat_group
  555                        	
  556                        	
  557                        	
  558                        	; ***************************************************************************
  559                        	; ***************************************************************************
  560                        	;
  561                        	; void __fastcall load_palette( unsigned char palette<_al>, unsigned char __far *data<_bp_bank:_bp>, unsigned char num_palettes<_ah> );
  562                        	;
  563                        	; void __fastcall far_load_palette( unsigned char palette<_al>, unsigned char num_palettes<_ah> );
  564                        	
  565    18:D1EB             			.proc	_load_palette.3
  566    18:D1EB             			.alias	_far_load_palette.2	= _load_palette.3
  567                        	
  568    18:D1EB  AC 4E 26   			ldy	color_queue_w		; Get the queue's write index.
  569                        	
  570    18:D1EE  A5 EC      			lda.l	<_bp			; Add this set of palettes to
  571    18:D1F0  99 5F 26   			sta	color_addr_l, y		; the queue.
  572    18:D1F3  A5 ED      			lda.h	<_bp
  573    18:D1F5  99 67 26   			sta	color_addr_h, y
  574    18:D1F8  A5 02      			lda	<_bp_bank
  575    18:D1FA  99 6F 26   			sta	color_bank, y
  576    18:D1FD  A5 F8      			lda	<_al
  577    18:D1FF  99 4F 26   			sta	color_index, y
  578    18:D202  A5 F9      			lda	<_ah
  579    18:D204  99 57 26   			sta	color_count, y
  580                        	
  581    18:D207  C8         			iny				; Increment the queue index.
  582    18:D208  98         			tya
  583    18:D209  29 07      			and	#7
  584                        	
  585    18:D20B  CD 4D 26   	.wait:		cmp	color_queue_r		; If the queue is full, wait
  586    18:D20E  F0 FB      			beq	.wait			; for the next VBLANK.
  587                        	
  588    18:D210  8D 4E 26   			sta	color_queue_w		; Signal item is in the queue.
  589                        	
  590                        			leave				; All done, phew!
         18:D213  4C EF FF   			jmp	leave_proc
  591                        	
  592                        			.endp
  593                        	
  594                        	
  595                        	
  596               0000     		.if	0
  620                        		.endif
  621                        	
  622                        	
  623                        	
  624                        	; ***************************************************************************
  625                        	; ***************************************************************************
  626                        	;
  627                        	; void __fastcall load_background( unsigned char __far *tiles<_bp_bank:_bp>, unsigned char __far *palettes<__fbank:__fptr>, unsigned char __far *bat<_cl:_bx>, unsigned char w<_dl>, unsigned char w<_dh> );
  628                        	
  629                        			.proc	_load_background.5
  667                        			.endp
  668                        	
  669                        	
  670                        	
  671                        	; ***************************************************************************
  672                        	; ***************************************************************************
  673                        	;
  674                        	; void __fastcall vram2vram( unsigned int vram_dst<_ax>, unsigned int vram_src<_bx>, unsigned int word_len<_cx> );
  675                        	; void __fastcall sgx_vram2vram( unsigned int vram_dst<_ax>, unsigned int vram_src<_bx>, unsigned int word_len<_cx> );
  676                        	;
  677                        	
  678               0001     		.if	SUPPORT_SGX
  679                        			.proc	_sgx_vram2vram.3
  685                        			.endp
  686                        		.endif
  687                        	
  688    18:D144             			.proc	_vram2vram.3
  689                        	
  690    18:D144  82         			clx				; Offset to PCE VDC.
  691                        	
  692    18:D145  08         			php
  693    18:D146  78         			sei
  694    18:D147  A9 11      			lda	#VDC_DESR
  695    18:D149  9D 00 02   			sta	VDC_AR, x
  696    18:D14C  A5 F8      			lda.l	<_ax
  697    18:D14E  9D 02 02   			sta	VDC_DL, x
  698    18:D151  A5 F9      			lda.h	<_ax
  699    18:D153  9D 03 02   			sta	VDC_DH, x
  700                        	
  701    18:D156  A9 10      			lda	#VDC_SOUR
  702    18:D158  9D 00 02   			sta	VDC_AR, x
  703    18:D15B  A5 FA      			lda.l	<_bx
  704    18:D15D  9D 02 02   			sta	VDC_DL, x
  705    18:D160  A5 FB      			lda.h	<_bx
  706    18:D162  9D 03 02   			sta	VDC_DH, x
  707                        	
  708    18:D165  A9 12      			lda	#VDC_LENR
  709    18:D167  9D 00 02   			sta	VDC_AR, x
  710    18:D16A  18         			clc
  711    18:D16B  A5 FC      			lda.l	<_cx
  712    18:D16D  69 FF      			adc	#$FF
  713    18:D16F  9D 02 02   			sta	VDC_DL, x
  714    18:D172  A5 FD      			lda.h	<_cx
  715    18:D174  69 FF      			adc	#$FF
  716    18:D176  9D 03 02   			sta	VDC_DH, x
  717                        	
  718    18:D179  B5 F7      			lda	<vdc_reg, x
  719    18:D17B  8D 00 02   			sta	VDC_AR
  720    18:D17E  28         			plp
  721                        	
  722                        			leave
         18:D17F  4C EF FF   			jmp	leave_proc
  723                        	
  724                        			.endp
  725                        	
  726                        	
  727                        	
  728                        	; ***************************************************************************
  729                        	; ***************************************************************************
  730                        	;
  731                        	; HuC Font Functions
  732                        	;
  733                        	; ***************************************************************************
  734                        	; ***************************************************************************
  735                        	
  736                        	
  737                        	
  738               2697     			.bss
  739                        	
  740                        	; **************
  741                        	; 16-bytes of VDC BAT information.
  742                        	;
  743                        	; N.B. MUST be 16-bytes before the SGX versions to use PCE_VDC_OFFSET.
  744                        	
  745    F8:2697             	_vdc_font_base:	ds	2	; Tile number of ASCII '\0'.
  746                        	
  747                        	; From hucc-printf.asm just to avoid wasting .bss space with padding.
  748    F8:2699             	_vdc_tty_x_lhs:	ds	1	; TTY minimum X position.
  749    F8:269A             	_vdc_tty_y_top:	ds	1	; TTY minimum Y position.
  750    F8:269B             	_vdc_tty_x:	ds	1	; TTY current X position.
  751    F8:269C             	_vdc_tty_y:	ds	1	; TTY current Y position.
  752                        	
  753               0001     		.if	SUPPORT_SGX
  754                        	
  755                        	; **************
  756                        	; 16-bytes of SGX BAT information.
  757                        	;
  758                        	; N.B. MUST be 16-bytes after the VDC versions to use SGX_VDC_OFFSET.
  759                        	
  760    F8:269D             			ds	10	; Padding to ensure the 16-byte delta.
  761                        	
  762    F8:26A7             	_sgx_font_base:	ds	2	; Tile number of ASCII '\0'.
  763                        	
  764                        	; From hucc-printf.asm just to avoid wasting .bss space with padding.
  765    F8:26A9             	_sgx_tty_x_lhs:	ds	1	; TTY minimum X position.
  766    F8:26AA             	_sgx_tty_y_top:	ds	1	; TTY minimum Y position.
  767    F8:26AB             	_sgx_tty_x:	ds	1	; TTY current X position.
  768    F8:26AC             	_sgx_tty_y:	ds	1	; TTY current Y position.
  769                        	
  770                        		.endif
  771                        	
  772                        	;_font_base	.alias	vdc_font_base
  773                        	
  774               E5DF     			.code
  775                        	
  776                        	
  777                        	
  778                        	; ***************************************************************************
  779                        	; ***************************************************************************
  780                        	;
  781                        	; void __fastcall set_font_addr( unsigned int vram<acc> );
  782                        	; void __fastcall sgx_set_font_addr( unsigned int vram<acc> );
  783                        	
  784               0001     		.if	SUPPORT_SGX
  785    00:E5DF             	_sgx_set_font_addr.1:
  786    00:E5DF  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  787    00:E5E1  F0         			db	$F0			; Turn "clx" into a "beq".
  788                        		.endif
  789                        	
  790    00:E5E2             	_set_font_addr.1:
  791    00:E5E2  82         			clx				; Offset to PCE VDC.
  792                        	
  793    00:E5E3  84 00      	set_font_addr:	sty	<__temp
  794    00:E5E5  46 00      			lsr	<__temp
  795    00:E5E7  6A         			ror	a
  796    00:E5E8  46 00      			lsr	<__temp
  797    00:E5EA  6A         			ror	a
  798    00:E5EB  46 00      			lsr	<__temp
  799    00:E5ED  6A         			ror	a
  800    00:E5EE  46 00      			lsr	<__temp
  801    00:E5F0  6A         			ror	a
  802    00:E5F1  38         			sec
  803    00:E5F2  E9 20      			sbc	#$20
  804    00:E5F4  9D 97 26   			sta.l	_vdc_font_base,x
  805    00:E5F7  B0 02      			bcs	!+
  806    00:E5F9  C6 00      			dec	<__temp
  807                        	
  808    00:E5FB  BD 98 26   	!:		lda.h	_vdc_font_base, x
  809    00:E5FE  29 F0      			and	#$F0
  810    00:E600  05 00      			ora	<__temp
  811    00:E602  9D 98 26   			sta.h	_vdc_font_base, x
  812    00:E605  60         			rts
  813                        	
  814                        	
  815                        	
  816                        	; ***************************************************************************
  817                        	; ***************************************************************************
  818                        	;
  819                        	; void __fastcall set_font_pal( unsigned char palette<acc> );
  820                        	; void __fastcall sgx_set_font_pal( unsigned char palette<acc> );
  821                        	
  822               0001     		.if	SUPPORT_SGX
  823    00:E606             	_sgx_set_font_pal.1:
  824    00:E606  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  825    00:E608  F0         			db	$F0			; Turn "clx" into a "beq".
  826                        		.endif
  827                        	
  828    00:E609             	_set_font_pal:					; For compatibility with HuC.
  829    00:E609             	_set_font_pal.1:
  830    00:E609  82         			clx				; Offset to PCE VDC.
  831    00:E60A  0A         			asl	a
  832    00:E60B  0A         			asl	a
  833    00:E60C  0A         			asl	a
  834    00:E60D  0A         			asl	a
  835    00:E60E  85 00      			sta	<__temp
  836                        	
  837    00:E610  BD 98 26   			lda.h	_vdc_font_base, x
  838    00:E613  29 0F      			and	#$0F
  839    00:E615  05 00      			ora	<__temp
  840    00:E617  9D 98 26   			sta.h	_vdc_font_base, x
  841    00:E61A  60         			rts
  842                        	
  843                        	
  844                        	
  845                        	; ***************************************************************************
  846                        	; ***************************************************************************
  847                        	;
  848                        	; void __fastcall load_font( char far *font<_bp_bank:_bp>, unsigned char count<_al> );
  849                        	;
  850                        	; void __fastcall load_font( char far *font<_bp_bank:_bp>, unsigned char count<_al>, unsigned int vram<acc> );
  851                        	; void __fastcall sgx_load_font( char far *font<_bp_bank:_bp>, unsigned char count<_al>, unsigned int vram<acc> );
  852                        	;
  853                        	; void __fastcall far_load_font( unsigned char count<_al>, unsigned int vram<acc> );
  854                        	; void __fastcall sgx_far_load_font( unsigned char count<_al>, unsigned int vram<acc> );
  855                        	
  856    00:E61B  AC 7B 26   	_load_font.2:	ldy	vdc_bat_limit		; Load the font directly
  857    00:E61E  C8         			iny				; after the BAT (stupid!).
  858    00:E61F  62         			cla
  859    00:E620  80 03      			bra	_load_font.3
  860                        	
  861               0001     		.if	SUPPORT_SGX
  862    00:E622             	_sgx_load_font.3:
  863    00:E622  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  864    00:E624  F0         			db	$F0			; Turn "clx" into a "beq".
  865                        		.endif
  866                        	
  867    00:E625  82         	_load_font.3:	clx				; Offset to PCE VDC.
  868                        	
  869    00:E626  85 F0      			sta.l	<_di			; Load the font directly
  870    00:E628  84 F1      			sty.h	<_di			; after the BAT (stupid!).
  871                        	
  872    00:E62A  20 E3 E5   			jsr	set_font_addr		; Set xxx_font_base from addr.
  873                        	
  874    00:E62D  A5 F8      			lda	<__al			; Convert #tiles into #words.
  875    00:E62F  64 F9      			stz	<__ah
  876    00:E631  0A         			asl	a
  877    00:E632  26 F9      			rol	<__ah
  878    00:E634  0A         			asl	a
  879    00:E635  26 F9      			rol	<__ah
  880    00:E637  0A         			asl	a
  881    00:E638  26 F9      			rol	<__ah
  882    00:E63A  0A         			asl	a
  883    00:E63B  26 F9      			rol	<__ah
  884    00:E63D  85 F8      			sta	<__al
  885    00:E63F  4C 4F FF   			jmp	load_vram_x
  886                        	
  887    00:E642             			.alias	_far_load_font.2	= _load_font.3
  888    00:E642             			.alias	_sgx_far_load_font.2	= _sgx_load_font.3
  889                        	
  890                        	
  891                        	
  892                        	; ***************************************************************************
  893                        	; ***************************************************************************
  894                        	;
  895                        	; void __fastcall cls();
  896                        	; void __fastcall sgx_cls();
  897                        	;
  898                        	; void __fastcall cls( int tile<acc> );
  899                        	; void __fastcall sgx_cls( int tile<acc> );
  900                        	
  901               0001     		.if	SUPPORT_SGX
  902    00:E642  A2 10      	_sgx_cls:	ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  903    00:E644  F0         			db	$F0			; Turn "clx" into a "beq".
  904                        		.endif
  905                        	
  906    00:E645  82         	_cls:		clx				; Offset to PCE VDC.
  907                        	
  908    00:E646  BD 97 26   	clear_tty_x:	lda.l	_vdc_font_base, x
  909    00:E649  BC 98 26   			ldy.h	_vdc_font_base, x
  910    00:E64C  18         			clc
  911    00:E64D  69 20      			adc	#' '
  912    00:E64F  90 07      			bcc	!+
  913    00:E651  C8         			iny
  914    00:E652  80 04      			bra	!+
  915                        	
  916               0001     		.if	SUPPORT_SGX
  917    00:E654  A2 10      	_sgx_cls.1:	ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  918    00:E656  F0         			db	$F0			; Turn "clx" into a "beq".
  919                        		.endif
  920                        	
  921    00:E657  82         	_cls.1:		clx
  922                        	
  923    00:E658  85 F8      	!:		sta.l	<_ax			; VRAM word to write.
  924    00:E65A  84 F9      			sty.h	<_ax
  925    00:E65C  BD 7B 26   			lda	vdc_bat_limit, x	; BAT size hi-byte.
  926    00:E65F  1A         			inc	a
  927    00:E660  85 FA      			sta	<_bl
  928    00:E662  4C B5 FD   			jmp	clear_bat_x
  929                        	
  930                        	
  931                        	
  932                        	; ***************************************************************************
  933                        	; ***************************************************************************
  934                        	;
  935                        	; void __fastcall __macro load_default_font( void );
  936                        	; void __fastcall __macro sgx_load_default_font( void );
  937                        	;
  938                        	; Args: _bp, _bp_bank = _farptr to font data mapped into MPR3 & MPR4.
  939                        	; Args: _di = VRAM destination address.
  940                        	; Args: monofont_fg = font color (0..15)
  941                        	; Args: monofont_bg = background color (0..15)
  942                        	; Args: _al = number of tiles (aka characters) 0==256
  943                        	
  944    02:CDB1             	huc_monofont_x	.proc
  945                        	
  946               26AD     			.bss
  947    F8:26AD             	monofont_fg:	.ds	1
  948    F8:26AE             	monofont_bg:	.ds	1
  949               CDB1     			.code
  950                        	
  951    02:CDB1  BC 7B 26   			ldy	vdc_bat_limit, x	; BAT limit mask hi-byte.
  952    02:CDB4  C8         			iny
  953    02:CDB5  62         			cla
  954    02:CDB6  85 F0      			sta.l	<_di			; Load the font directly
  955    02:CDB8  84 F1      			sty.h	<_di			; after the BAT (stupid!).
  956                        	
  957    02:CDBA  20 E3 E5   			jsr	set_font_addr		; Set xxx_font_base from addr.
  958                        	
  959    02:CDBD  A9 41      			lda.l	#.font
  960    02:CDBF  85 EC      			sta.l	<_bp
  961    02:CDC1  A9 CE      			lda.h	#.font
  962    02:CDC3  85 ED      			sta.h	<_bp
  963                        	
  964    02:CDC5  A9 60      			lda	#$60			; #characters.
  965    02:CDC7  85 F8      			sta	<_al
  966                        	
  967    02:CDC9  20 7F E3   			jsr	set_di_to_mawr
  968                        	
  969    02:CDCC  AD AD 26   			lda	monofont_fg		; Foreground pixel color.
  970    02:CDCF  85 00      			sta	<__temp
  971    02:CDD1  AD AE 26   			lda	monofont_bg		; Background pixel color.
  972    02:CDD4  DA         			phx
  973    02:CDD5  A2 FC      			ldx.l	#_cx			; Create a bit mask for each
  974    02:CDD7  9E 00 20   	.bg_loop:	stz	$2000, x		; plane of the background.
  975    02:CDDA  4A         			lsr	a
  976    02:CDDB  90 03      			bcc	.bg_plane
  977    02:CDDD  DE 00 20   			dec	$2000, x
  978    02:CDE0  E8         	.bg_plane:	inx
  979    02:CDE1  D0 F4      			bne	.bg_loop
  980    02:CDE3  FA         			plx
  981                        	
  982    02:CDE4  C2         	.tile_loop:	cly
  983                        	
  984    02:CDE5  B1 EC      	.plane01:	lda	[_bp], y		; Get font byte.
  985    02:CDE7  8F 00 06   			bbs0	<__temp, .set_plane0
  986    02:CDEA  49 FF      	.clr_plane0:	eor	#$FF			; Clr font bits in background.
  987    02:CDEC  25 FC      			and	<_cx + 0
  988    02:CDEE  80 02      			bra	.put_plane0
  989    02:CDF0  05 FC      	.set_plane0:	ora	<_cx + 0		; Set font bits in background.
  990    02:CDF2  9D 02 02   	.put_plane0:	sta	VDC_DL, x
  991                        	
  992    02:CDF5  B1 EC      			lda	[_bp], y		; Get font byte.
  993    02:CDF7  9F 00 06   			bbs1	<__temp, .set_plane1
  994    02:CDFA  49 FF      	.clr_plane1:	eor	#$FF			; Clr font bits in background.
  995    02:CDFC  25 FD      			and	<_cx + 1
  996    02:CDFE  80 02      			bra	.put_plane1
  997    02:CE00  05 FD      	.set_plane1:	ora	<_cx + 1		; Set font bits in background.
  998    02:CE02  9D 03 02   	.put_plane1:	sta	VDC_DH, x
  999                        	
 1000    02:CE05  C8         			iny
 1001    02:CE06  C0 08      			cpy	#8
 1002    02:CE08  90 DB      			bcc	.plane01
 1003                        	
 1004    02:CE0A  C2         			cly
 1005                        	
 1006    02:CE0B  B1 EC      	.plane23:	lda	[_bp], y		; Get font byte.
 1007    02:CE0D  AF 00 06   			bbs2	<__temp, .set_plane2
 1008    02:CE10  49 FF      	.clr_plane2:	eor	#$FF			; Clr font bits in background.
 1009    02:CE12  25 FE      			and	<_cx + 2
 1010    02:CE14  80 02      			bra	.put_plane2
 1011    02:CE16  05 FE      	.set_plane2:	ora	<_cx + 2		; Set font bits in background.
 1012    02:CE18  9D 02 02   	.put_plane2:	sta	VDC_DL, x
 1013                        	
 1014    02:CE1B  B1 EC      			lda	[_bp], y		; Get font byte.
 1015    02:CE1D  BF 00 06   			bbs3	<__temp, .set_plane3
 1016    02:CE20  49 FF      	.clr_plane3:	eor	#$FF			; Clr font bits in background.
 1017    02:CE22  25 FF      			and	<_cx + 3
 1018    02:CE24  80 02      			bra	.put_plane3
 1019    02:CE26  05 FF      	.set_plane3:	ora	<_cx + 3		; Set font bits in background.
 1020    02:CE28  9D 03 02   	.put_plane3:	sta	VDC_DH, x
 1021                        	
 1022    02:CE2B  C8         			iny
 1023    02:CE2C  C0 08      			cpy	#8
 1024    02:CE2E  90 DB      			bcc	.plane23
 1025                        	
 1026    02:CE30  A5 EC      			lda.l	<_bp
 1027    02:CE32  69 07      			adc	#8-1
 1028    02:CE34  85 EC      			sta.l	<_bp
 1029    02:CE36  90 02      			bcc	!+
 1030    02:CE38  E6 ED      			inc.h	<_bp
 1031                        	
 1032    02:CE3A  C6 F8      	!:		dec	<_al
 1033    02:CE3C  D0 A6      			bne	.tile_loop
 1034                        	
 1035                        			leave				; All done, phew!
         02:CE3E  4C EF FF   			jmp	leave_proc
 1036                        	
 1037    02:CE41             	.font:		incbin	"data/font8x8-bold-short-iso646-fr.dat", 128
 1038                        	
 1039                        			.endp
 1040                        	
 1041                        	
 1042                        	
 1043                        	; ***************************************************************************
 1044                        	; ***************************************************************************
 1045                        	;
 1046                        	; HuC Text Output
 1047                        	;
 1048                        	; ***************************************************************************
 1049                        	; ***************************************************************************
 1050                        	
 1051                        	
 1052                        	
 1053    18:CACE             	vdc_tty_out	.procgroup			; These routines share code!
 1054                        	
 1055                        	; ***************************************************************************
 1056                        	; ***************************************************************************
 1057                        	;
 1058                        	; void __fastcall put_char( unsigned char digit<_bl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
 1059                        	
 1060               0001     		.if	SUPPORT_SGX
 1061                        	put_char_sgx	.proc
 1067                        			.endp
 1068                        		.endif
 1069                        	
 1070    18:CACE             	put_char_vdc	.proc
 1071                        	
 1072    18:CACE  82         			clx				; Offset to PCE VDC.
 1073                        	
 1074    18:CACF  20 34 E4   			jsr	set_di_xy_mawr
 1075                        	
 1076    18:CAD2  62         			cla				; Push EOL marker.
 1077    18:CAD3  48         			pha
 1078                        	
 1079    18:CAD4  A5 FA      			lda	<_bl
 1080    18:CAD6  48         			pha				; Push character to output.
 1081    18:CAD7  80 58      			bra	!output+
 1082                        	
 1083    18:CAD9             			.ref	put_hex_vdc		; Need put_number_vdc
 1084                        			.endp
 1085                        	
 1086    18:CAD9             			.alias	_put_char.3		= put_char_vdc
 1087                        	
 1088                        	
 1089                        	
 1090                        	; ***************************************************************************
 1091                        	; ***************************************************************************
 1092                        	;
 1093                        	; void __fastcall put_digit( unsigned char digit<_bl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
 1094                        	
 1095               0001     		.if	SUPPORT_SGX
 1096                        	put_digit_sgx	.proc
 1102                        			.endp
 1103                        		.endif
 1104                        	
 1105    18:CAD9             	put_digit_vdc	.proc
 1106                        	
 1107    18:CAD9  82         			clx				; Offset to PCE VDC.
 1108                        	
 1109    18:CADA  20 34 E4   			jsr	set_di_xy_mawr
 1110                        	
 1111    18:CADD  62         			cla				; Push EOL marker.
 1112    18:CADE  48         			pha
 1113                        	
 1114    18:CADF  A5 FA      			lda	<_bl			; Convert hex digit to ASCII.
 1115    18:CAE1  29 0F      			and	#$0F
 1116    18:CAE3  C9 0A      			cmp	#10
 1117    18:CAE5  90 02      			bcc	!+
 1118    18:CAE7  69 06      			adc	#6
 1119    18:CAE9  69 30      	!:		adc	#'0'
 1120    18:CAEB  48         			pha				; Push character to output.
 1121    18:CAEC  80 43      			bra	!output+
 1122                        	
 1123    18:CAEE             			.ref	put_hex_vdc		; Need put_number_vdc
 1124                        			.endp
 1125                        	
 1126    18:CAEE             			.alias	_put_digit.3		= put_digit_vdc
 1127                        	
 1128                        	
 1129                        	
 1130                        	; ***************************************************************************
 1131                        	; ***************************************************************************
 1132                        	;
 1133                        	; void __fastcall put_hex( unsigned int number<_bx>, unsigned char length<_cl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
 1134                        	
 1135               0001     		.if	SUPPORT_SGX
 1136                        	put_hex_sgx	.proc
 1141                        			.endp
 1142                        		.endif
 1143                        	
 1144    18:CAEE             	put_hex_vdc	.proc
 1145                        	
 1146    18:CAEE  82         			clx				; Offset to PCE VDC.
 1147                        	
 1148    18:CAEF  20 34 E4   			jsr	set_di_xy_mawr
 1149                        	
 1150    18:CAF2  A4 FC      			ldy	<_cl			; Total #characters to print,
 1151    18:CAF4  F0 3E      			beq	!exit+			; NOT minimum #characters!
 1152                        	
 1153    18:CAF6  86 00      			stx	<__temp			; Preserve which VDC.
 1154                        	
 1155    18:CAF8  82         			clx				; Push EOL marker.
 1156    18:CAF9  DA         			phx
 1157                        	
 1158    18:CAFA  B5 FA      	.hex_byte:	lda.l	<_bx, x			; Convert hex digit to ASCII.
 1159    18:CAFC  29 0F      			and	#$0F
 1160    18:CAFE  C9 0A      			cmp	#10
 1161    18:CB00  90 02      			bcc	!+
 1162    18:CB02  69 06      			adc	#6
 1163    18:CB04  69 30      	!:		adc	#'0'
 1164    18:CB06  48         			pha				; Push character to output.
 1165    18:CB07  88         			dey
 1166    18:CB08  F0 15      			beq	.hex_done
 1167                        	
 1168    18:CB0A  B5 FA      			lda.l	<_bx, x			; Convert hex digit to ASCII.
 1169    18:CB0C  4A         			lsr	a
 1170    18:CB0D  4A         			lsr	a
 1171    18:CB0E  4A         			lsr	a
 1172    18:CB0F  4A         			lsr	a
 1173    18:CB10  C9 0A      			cmp	#10
 1174    18:CB12  90 02      			bcc	!+
 1175    18:CB14  69 06      			adc	#6
 1176    18:CB16  69 30      	!:		adc	#'0'
 1177    18:CB18  48         			pha				; Push character to output.
 1178    18:CB19  88         			dey
 1179    18:CB1A  F0 03      			beq	.hex_done
 1180                        	
 1181    18:CB1C  E8         			inx
 1182    18:CB1D  80 DB      			bra	.hex_byte
 1183                        	
 1184    18:CB1F  A6 00      	.hex_done:	ldx	<__temp			; Restore which VDC.
 1185    18:CB21  80 0E      			bra	!output+
 1186                        	
 1187    18:CB23  18         	.write:		clc
 1188    18:CB24  7D 97 26   			adc.l	_vdc_font_base, x
 1189    18:CB27  9D 02 02   			sta	VDC_DL, x
 1190    18:CB2A  62         			cla
 1191    18:CB2B  7D 98 26   			adc.h	_vdc_font_base, x
 1192    18:CB2E  9D 03 02   			sta	VDC_DH, x
 1193                        	
 1194    18:CB31  68         	!output:	pla				; Pop the digits and output.
 1195    18:CB32  D0 EF      			bne	.write
 1196                        	
 1197                        	!exit:		leave				; All done!
         18:CB34  4C EF FF   			jmp	leave_proc
 1198                        	
 1199                        			.endp
 1200                        	
 1201    18:CB37             			.alias	_put_hex.4 = put_hex_vdc
 1202                        	
 1203                        	
 1204                        	
 1205                        	; ***************************************************************************
 1206                        	; ***************************************************************************
 1207                        	;
 1208                        	; void __fastcall put_number( unsigned int number<_bx>, unsigned char length<_cl>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
 1209                        	
 1210               0001     		.if	SUPPORT_SGX
 1211                        	put_number_sgx	.proc
 1216                        			.endp
 1217                        		.endif
 1218                        	
 1219    18:CB37             	put_number_vdc	.proc
 1220                        	
 1221    18:CB37  82         			clx				; Offset to PCE VDC.
 1222                        	
 1223    18:CB38  20 34 E4   			jsr	set_di_xy_mawr
 1224                        	
 1225    18:CB3B  A4 FC      			ldy	<_cl			; Total #characters to print,
 1226    18:CB3D  F0 F5      			beq	!exit-			; NOT minimum #characters!
 1227                        	
 1228    18:CB3F  86 00      			stx	<__temp			; Preserve which VDC.
 1229                        	
 1230    18:CB41  82         			clx				; Push EOL marker.
 1231    18:CB42  DA         			phx
 1232                        	
 1233    18:CB43  A6 FB      			ldx.h	<_bx			; Is the number -ve?
 1234    18:CB45  86 FC      			stx	<_cl			; Remember this.
 1235    18:CB47  10 10      			bpl	.divide_by_ten
 1236                        	
 1237    18:CB49  38         			sec				; Make the number +ve.
 1238    18:CB4A  A5 FA      			lda.l	<_bx
 1239    18:CB4C  49 FF      			eor	#$FF
 1240    18:CB4E  69 00      			adc	#0
 1241    18:CB50  85 FA      			sta.l	<_bx
 1242    18:CB52  8A         			txa
 1243    18:CB53  49 FF      			eor	#$FF
 1244    18:CB55  69 00      			adc	#0
 1245    18:CB57  85 FB      			sta.h	<_bx
 1246                        	
 1247    18:CB59  A2 10      	.divide_by_ten:	ldx	#16
 1248    18:CB5B  62         			cla				; Clear Remainder.
 1249    18:CB5C  06 FA      			asl.l	<_bx			; Rotate Dividend, MSB -> C.
 1250    18:CB5E  26 FB      			rol.h	<_bx
 1251    18:CB60  2A         	.divide_loop:	rol	a			; Rotate C into Remainder.
 1252    18:CB61  C9 0A      			cmp	#10			; Test Divisor.
 1253    18:CB63  90 02      			bcc	.divide_less		; CC if Divisor > Remainder.
 1254    18:CB65  E9 0A      			sbc	#10			; Subtract Divisor.
 1255    18:CB67  26 FA      	.divide_less:	rol.l	<_bx			; Quotient bit -> Dividend LSB.
 1256    18:CB69  26 FB      			rol.h	<_bx			; Rotate Dividend, MSB -> C.
 1257    18:CB6B  CA         			dex
 1258    18:CB6C  D0 F2      			bne	.divide_loop
 1259                        	
 1260    18:CB6E  18         			clc
 1261    18:CB6F  69 30      			adc	#'0'			; Always leaves C clr.
 1262    18:CB71  48         			pha				; Push character to output.
 1263    18:CB72  88         			dey
 1264    18:CB73  F0 10      			beq	!pad+
 1265    18:CB75  A5 FA      			lda.l	<_bx			; Repeat while non-zero.
 1266    18:CB77  05 FB      			ora.h	<_bx
 1267    18:CB79  D0 DE      			bne	.divide_by_ten
 1268                        	
 1269    18:CB7B  A6 00      			ldx	<__temp			; Restore which VDC.
 1270                        	
 1271    18:CB7D  A5 FC      			lda	<_cl			; Was the number -ve?
 1272    18:CB7F  10 04      			bpl	!pad+
 1273    18:CB81  A9 2D      			lda	#'-'			; Output a leading '-'.
 1274    18:CB83  48         			pha
 1275    18:CB84  88         			dey
 1276                        	
 1277    18:CB85  A9 20      	!pad:		lda	#' '			; Add padding characters.
 1278    18:CB87  88         	.loop:		dey
 1279    18:CB88  30 A7      			bmi	!output-
 1280    18:CB8A  48         			pha
 1281    18:CB8B  80 FA      			bra	.loop
 1282                        	
 1283    18:CB8D             			.ref	put_hex_vdc		; Need put_number_vdc
 1284                        	
 1285                        			.endp
 1286                        	
 1287    18:CB8D             			.alias	_put_number.4 = put_number_vdc
 1288                        	
 1289                        	
 1290                        	
 1291                        	; ***************************************************************************
 1292                        	; ***************************************************************************
 1293                        	;
 1294                        	; void __fastcall put_raw( unsigned int data<_bx>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
 1295                        	
 1296               0001     		.if	SUPPORT_SGX
 1297                        	put_raw_sgx	.proc
 1302                        			.endp
 1303                        		.endif
 1304                        	
 1305                        	put_raw_vdc	.proc
 1318                        			.endp
 1319                        	
 1320    18:CB8D             			.alias	_put_raw.3		= put_raw_vdc
 1321                        	
 1322                        			.endprocgroup			; vdc_tty_out
 1323                        	
 1324                        	
 1325                        	
 1326                        	; ***************************************************************************
 1327                        	; ***************************************************************************
 1328                        	;
 1329                        	; void __fastcall put_string( unsigned char *string<_bp>, unsigned char bat_x<_dil>, unsigned char bat_y<_dih> );
 1330                        	;
 1331                        	; N.B. This is not a .proc right now because it is called from procedures
 1332                        	; that contain embedded strings, and the string aren't banked in before
 1333                        	; printing (yet).
 1334                        	
 1335               0001     		.if	SUPPORT_SGX
 1336    00:E665             	_sgx_put_string.3:
 1337    00:E665  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
 1338    00:E667  F0         			db	$F0			; Turn "clx" into a "beq".
 1339                        		.endif
 1340                        	
 1341    00:E668  82         	_put_string.3:	clx				; Offset to PCE VDC.
 1342                        	
 1343    00:E669  20 34 E4   			jsr	set_di_xy_mawr
 1344                        	
 1345    00:E66C  C2         			cly
 1346    00:E66D  B1 EC      	.chr_loop:	lda	[_bp], y
 1347    00:E66F  F0 15      			beq	.done
 1348                        	
 1349    00:E671  18         			clc
 1350    00:E672  7D 97 26   			adc.l	_vdc_font_base, x
 1351    00:E675  9D 02 02   			sta	VDC_DL, x
 1352    00:E678  62         			cla
 1353    00:E679  7D 98 26   			adc.h	_vdc_font_base, x
 1354    00:E67C  9D 03 02   			sta	VDC_DH, x
 1355                        	
 1356    00:E67F  C8         			iny
 1357    00:E680  D0 EB      			bne	.chr_loop
 1358    00:E682  E6 ED      			inc.h	<_bp
 1359    00:E684  80 E7      			bra	.chr_loop
 1360                        	
 1361    00:E686  60         	.done:		rts
 1362                        	
 1363                        	
 1364                        	
 1365                        	; ***************************************************************************
 1366                        	; ***************************************************************************
 1367                        	;
 1368                        	; void __fastcall set_color_rgb( unsigned int index<VCE_CTA>, unsigned char r<_al>, unsigned char g<_ah>, unsigned char b<acc> );
 1369                        	;
 1370                        	; r:	red	RED:	bit 3-5
 1371                        	; g:	green	GREEN:	bit 6-8
 1372                        	; b:	blue	BLUE:	bit 0-2
 1373                        	
 1374    00:E687             	_set_color_rgb.4:
 1375                        	;		and	#7
 1376    00:E687  85 00      			sta	<__temp
 1377    00:E689  A5 F8      			lda	<_al
 1378                        	;		and	#7
 1379    00:E68B  0A         			asl	a
 1380    00:E68C  0A         			asl	a
 1381    00:E68D  0A         			asl	a
 1382    00:E68E  05 00      			ora	<__temp
 1383    00:E690  0A         			asl	a
 1384    00:E691  0A         			asl	a
 1385    00:E692  85 00      			sta	<__temp
 1386    00:E694  A5 F9      			lda	<_ah
 1387                        	;		and	#7
 1388    00:E696  4A         			lsr	a
 1389    00:E697  66 00      			ror	<__temp
 1390    00:E699  4A         			lsr	a
 1391    00:E69A  66 00      			ror	<__temp
 1392    00:E69C  A8         			tay
 1393    00:E69D  A5 00      			lda	<__temp
 1394    00:E69F  8D 04 04   			sta.l	VCE_CTW
 1395    00:E6A2  8C 05 04   			sty.h	VCE_CTW
 1396    00:E6A5  60         			rts
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   60                        		.endif
   61                        	
   62               0001     		.ifdef	HUCC_USES_STRING		; Set in hucc_string.h
                             #[3]   "..\..\..\include\hucc\hucc-string.asm"
   63                        			include	"hucc-string.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-string.asm
    5                        	;
    6                        	; Not-quite-standard, but fast, replacements for <string.h>.
    7                        	;
    8                        	; Copyright John Brandwood 2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; !!! WARNING : non-standard return values !!!
   18                        	;
   19                        	; Strings are limited to a maximum of 255 characters (+ the terminator)!
   20                        	;
   21                        	; The memcpy(), strcpy() and strcat() functions do NOT return the destination
   22                        	; address, and they are declared "void" to check that the value is not used.
   23                        	;
   24                        	; mempcpy() is provided which returns the end address instead of the starting
   25                        	; address, because this is typically more useful.
   26                        	;
   27                        	; Please note that both memcpy() and memset() are implemented using a TII for
   28                        	; speed, and so the length should be < 16 bytes if used in time-critical bits
   29                        	; of code (such as when using a split screen) because they delay interrupts.
   30                        	;
   31                        	; strncpy() and strncat() are not provided, because strncpy() was not created
   32                        	; for the purpose of avoiding string overruns, and strncat() is just a poorly
   33                        	; designed function.
   34                        	;
   35                        	; POSIX strlcpy() and strlcat() are provided instead, but once again they are
   36                        	; slightly non-standard in that the return value when there is an overflow is
   37                        	; the buffer size (so that the overflow can be detected), instead of the full
   38                        	; size of the destination string that was too big to fit in the buffer.
   39                        	;
   40                        	; ***************************************************************************
   41                        	; ***************************************************************************
   42                        	
   43                        	
   44                        	
   45                        	; ***************************************************************************
   46                        	; ***************************************************************************
   47                        	;
   48                        	; void __fastcall strcpy( char *destination<_di>, char *source<_bp> );
   49                        	; void __fastcall strcat( char *destination<_di>, char *source<_bp> );
   50                        	;
   51                        	; unsigned int __fastcall strlcpy( char *destination<_di>, char *source<_bp>, unsigned char size<acc> );
   52                        	; unsigned int __fastcall strlcat( char *destination<_di>, char *source<_bp>, unsigned char size<acc> );
   53                        	; unsigned int __fastcall strlen( char *source<_bp> );
   54                        	;
   55                        	; NOT WORKING YET (needs compiler changes) ...
   56                        	;
   57                        	; void __fastcall strcpy( char *destination<_di>, char __far *source<_bp_bank:_bp> );
   58                        	; void __fastcall strcat( char *destination<_di>, char __far *source<_bp_bank:_bp> );
   59                        	;
   60                        	; unsigned int __fastcall strlcpy( char *destination<_di>, char __far *source<_bp_bank:_bp>, unsigned char size<acc> );
   61                        	; unsigned int __fastcall strlcat( char *destination<_di>, char __far *source<_bp_bank:_bp>, unsigned char size<acc> );
   62                        	; unsigned int __fastcall strlen( char __far *source<_bp_bank:_bp> );
   63                        	
   64    00:E6A6  62         	_strcat:	cla				; Max string length == 256!
   65    00:E6A7  A0 01      			ldy.h	#256
   66                        	
   67    00:E6A9  AA         	_strlcat:	tax				; X = buffer length (1..256).
   68                        	
   69               0000     		.ifdef	_DEBUG
   74                        		.endif
   75                        	
   76    00:E6AA  43 08      			tma3				; Preserve MPR3 and MPR4.
   77    00:E6AC  48         			pha
   78    00:E6AD  43 10      			tma4
   79    00:E6AF  48         			pha
   80                        	
   81                        	;		ldy	<_bp_bank		; Map the source string.
   82                        	;		beq	.no_bank
   83                        	;		jsr	map_bp_to_mpr34
   84                        	
   85    00:E6B0  C2         	.no_bank:	cly
   86                        	
   87    00:E6B1  B1 F0      	.find:		lda	[_di], y		; Find the end of the string.
   88    00:E6B3  F0 08      			beq	.adjust
   89    00:E6B5  C8         			iny
   90    00:E6B6  CA         			dex
   91    00:E6B7  D0 F8      			bne	.find
   92    00:E6B9  98         			tya				; A:Y = buffer length.
   93    00:E6BA  62         			cla
   94    00:E6BB  80 28      			bra	str_overflow
   95                        	
   96    00:E6BD  98         	.adjust:	tya				; Subtract Y from _bp so that
   97    00:E6BE  49 FF      			eor	#$FF			; _bp and _di use the same Y.
   98    00:E6C0  38         			sec
   99    00:E6C1  65 EC      			adc.l	<_bp
  100    00:E6C3  85 EC      			sta.l	<_bp
  101    00:E6C5  B0 0F      			bcs	str_copy
  102    00:E6C7  C6 ED      			dec.h	<_bp
  103    00:E6C9  80 0B      			bra	str_copy
  104                        	
  105                        			;
  106                        	
  107    00:E6CB  62         	_strcpy:	cla				; Max string length == 256!
  108    00:E6CC  A0 01      			ldy.h	#256
  109                        	
  110    00:E6CE  AA         	_strlcpy:	tax				; X = buffer length (1..256).
  111                        	
  112               0000     		.ifdef	_DEBUG
  117                        		.endif
  118                        	
  119    00:E6CF  43 08      			tma3				; Preserve MPR3 and MPR4.
  120    00:E6D1  48         			pha
  121    00:E6D2  43 10      			tma4
  122    00:E6D4  48         			pha
  123                        	
  124                        	;		ldy	<_bp_bank		; Map the source string.
  125                        	;		beq	.no_bank
  126                        	;		jsr	map_bp_to_mpr34
  127                        	
  128    00:E6D5  C2         	.no_bank:	cly
  129                        	
  130    00:E6D6  B1 EC      	str_copy:	lda	[_bp], y
  131    00:E6D8  91 F0      			sta	[_di], y
  132    00:E6DA  F0 1E      			beq	str_exit		; A:Y = string length.
  133    00:E6DC  C8         			iny
  134    00:E6DD  CA         			dex
  135    00:E6DE  D0 F6      			bne	str_copy
  136                        	
  137    00:E6E0  88         			dey
  138    00:E6E1  62         			cla
  139    00:E6E2  91 F0      			sta	[_di], y
  140    00:E6E4  C8         			iny				; A:Y = buffer length.
  141    00:E6E5  D0 13      	str_overflow:	bne	str_exit
  142    00:E6E7  1A         			inc	a			; A:Y = buffer length = 256.
  143    00:E6E8  80 10      			bra	str_exit
  144                        	
  145                        			;
  146                        	
  147    00:E6EA  43 08      	_strlen:	tma3
  148    00:E6EC  48         			pha
  149    00:E6ED  43 10      			tma4
  150    00:E6EF  48         			pha
  151                        	
  152                        	;		ldy	<_bp_bank
  153                        	;		beq	.no_bank
  154                        	;		jsr	map_bp_to_mpr34
  155                        	
  156    00:E6F0  C2         	.no_bank:	cly
  157                        	
  158    00:E6F1  B1 EC      	.find:		lda	[_bp], y
  159    00:E6F3  F0 05      			beq	str_exit
  160    00:E6F5  C8         			iny
  161    00:E6F6  D0 F9      			bne	.find
  162    00:E6F8  A9 01      			lda.h	#256			; A:Y = overflow length = 256.
  163                        	
  164    00:E6FA  AA         	str_exit:	tax				; X:Y = string or buffer length.
  165                        	
  166    00:E6FB  68         			pla				; Restore MPR3 and MPR4.
  167    00:E6FC  53 10      			tam4
  168    00:E6FE  68         			pla
  169    00:E6FF  53 08      			tam3
  170                        	
  171    00:E701  8A         			txa				; A:Y = string or buffer length.
  172    00:E702  42         			say				; Y:A = string or buffer length.
  173                        	
  174    00:E703  60         			rts
  175                        	
  176    00:E704             			.alias	_strlen.1		= _strlen
  177    00:E704             			.alias	_strcpy.2		= _strcpy
  178    00:E704             			.alias	_strcat.2		= _strcat
  179    00:E704             			.alias	_strlcpy.3		= _strlcpy
  180    00:E704             			.alias	_strlcat.3		= _strlcat
  181                        	
  182                        	
  183                        	
  184                        	; ***************************************************************************
  185                        	; ***************************************************************************
  186                        	;
  187                        	; void __fastcall memcpy( unsigned char *destination<ram_tii_dst>, unsigned char  *source<ram_tii_src>, unsigned int count<acc> );
  188                        	; unsigned char * __fastcall mempcpy( unsigned char *destination<ram_tii_dst>, unsigned char  *source<ram_tii_src>, unsigned int count<acc> );
  189                        	;
  190                        	; void __fastcall farmemcpy( unsigned char *destination<ram_tii_dst>, unsigned char __far *source<_bp_bank:ram_tii_src>, unsigned int count<acc> );
  191                        	; unsigned char * __fastcall farmempcpy( unsigned char *destination<ram_tii_dst>, unsigned char __far *source<_bp_bank:ram_tii_src>, unsigned int count<acc> );
  192                        	;
  193                        	; void __fastcall far_memcpy( unsigned char *destination<ram_tii_dst>, unsigned int count<acc> );
  194                        	; unsigned char * __fastcall far_mempcpy( unsigned char *destination<ram_tii_dst>, unsigned int count<acc> );
  195                        	;
  196                        	
  197    00:E704             	_memcpy.3:
  198    00:E704  64 02      	_mempcpy.3:	stz	<_bp_bank		; Map the source memory.
  199                        	
  200    00:E706             	_farmemcpy.3:
  201    00:E706  8C FE 22   	_farmempcpy.3:	sty.h	ram_tii_len		; Check for zero length.
  202    00:E709  8D FD 22   			sta.l	ram_tii_len
  203    00:E70C  0D FE 22   			ora.h	ram_tii_len
  204    00:E70F  F0 18      			beq	.zero_length
  205                        	
  206    00:E711  43 08      			tma3				; Preserve MPR3 and MPR4.
  207    00:E713  48         			pha
  208    00:E714  43 10      			tma4
  209    00:E716  48         			pha
  210                        	
  211    00:E717  A5 02      			lda	<_bp_bank		; Map the source memory.
  212    00:E719  F0 05      			beq	.no_bank
  213                        	
  214    00:E71B  53 08      			tam3				; Put bank into MPR3.
  215    00:E71D  1A         			inc	a
  216    00:E71E  53 10      			tam4				; Put next into MPR4.
  217                        	
  218                        	;		lda.h	ram_tii_src		; Remap ptr to MPR3.
  219                        	;		and	#$1F
  220                        	;		ora	#$60
  221                        	;		sta.h	ram_tii_src
  222                        	
  223    00:E720  20 F8 22   	.no_bank:	jsr	ram_tii			; Copy the memory.
  224                        	
  225    00:E723  68         			pla				; Restore MPR3 and MPR4.
  226    00:E724  53 10      			tam4
  227    00:E726  68         			pla
  228    00:E727  53 08      			tam3
  229                        	
  230    00:E729  18         	.zero_length:	clc				; Return the end address
  231    00:E72A  AD FB 22   			lda.l	ram_tii_dst		; like mempcpy().
  232    00:E72D  6D FD 22   			adc.l	ram_tii_len
  233    00:E730  A8         			tay
  234    00:E731  AD FC 22   			lda.h	ram_tii_dst
  235    00:E734  6D FE 22   			adc.h	ram_tii_len
  236    00:E737  42         			say
  237                        	
  238    00:E738  60         			rts
  239                        	
  240    00:E739             			.alias	_far_memcpy.2		= _farmemcpy.3
  241    00:E739             			.alias	_far_mempcpy.2		= _farmempcpy.3
  242                        	
  243                        	
  244                        	
  245                        	; ***************************************************************************
  246                        	; ***************************************************************************
  247                        	;
  248                        	; void __fastcall memset( unsigned char *destination<ram_tii_src>, unsigned char value<_al>, unsigned int count<acc> );
  249                        	
  250    00:E739  C9 00      	_memset:	cmp	#0			; Decrement the length, check
  251    00:E73B  D0 05      			bne	!+			; for zero and set C. 
  252    00:E73D  C0 00      			cpy	#0
  253    00:E73F  F0 23      			beq	.zero_length
  254    00:E741  88         			dey
  255    00:E742  3A         	!:		dec	a
  256    00:E743  8D FD 22   			sta.l	ram_tii_len
  257    00:E746  8C FE 22   			sty.h	ram_tii_len
  258                        	
  259    00:E749  AD F9 22   			lda.l	ram_tii_src		; ram_tii_dst = ram_tii_src + 1
  260    00:E74C  85 88      			sta.l	<__ptr
  261    00:E74E  69 00      			adc	#0
  262    00:E750  8D FB 22   			sta.l	ram_tii_dst
  263    00:E753  AD FA 22   			lda.h	ram_tii_src
  264    00:E756  85 89      			sta.h	<__ptr
  265    00:E758  69 00      			adc	#0
  266    00:E75A  8D FC 22   			sta.h	ram_tii_dst
  267                        	
  268    00:E75D  A5 F8      			lda	<_al			; Set the fill value.
  269    00:E75F  92 88      			sta	[__ptr]
  270                        	
  271    00:E761  4C F8 22   			jmp	ram_tii			; Copy the memory.
  272                        	
  273    00:E764  60         	.zero_length:	rts
  274                        	
  275    00:E765             			.alias	_memset.3		= _memset
  276                        	
  277                        	
  278                        	
  279                        	; ***************************************************************************
  280                        	; ***************************************************************************
  281                        	;
  282                        	; int __fastcall strcmp( char *string1<_di>, char *string2<_bp> );
  283                        	; int __fastcall strncmp( char *string1<_di>, char *string2<_bp>, unsigned int count<_ax> );
  284                        	;
  285                        	; int __fastcall __macro memcmp( unsigned char *string1<_di>, unsigned char *string2<_bp>, unsigned int count<_ax> );
  286                        	; int __fastcall farmemcmp( unsigned char *string1<_di>, unsigned char __far *string2<_bp_bank:_bp>, unsigned int count<_ax> );
  287                        	; int __fastcall far_memcmp( unsigned char *string1<_di>, unsigned int count<_ax> );
  288                        	;
  289                        	;  0 	if strings are equal
  290                        	;  1 	if the first non-matching character in string1 > string2 (in ASCII).
  291                        	; -1 	if the first non-matching character in string1 < string2 (in ASCII).
  292                        	
  293    18:CFF7             	hucc_memcmp	.procgroup
  294                        	
  295                        	_strcmp.2	.proc
  300                        			.endp				; Fall through.
  301                        	
  302    18:CFF7             	_strncmp.3	.proc
  303    18:CFF7  64 02      			stz	<_bp_bank		; Assume strings are mapped.
  304    18:CFF9  89 40      			bit	#$40			; Set the V bit for strcmp.
  305    18:CFFB  50         			db	$50			; Turn "clv" into "bvc".
  306    18:CFFC             			.ref	_farmemcmp.3		; Don't strip _farmemcmp.3!
  307                        			.endp				; Fall through.
  308                        	
  309    18:CFFC             	_farmemcmp.3	.proc
  310    18:CFFC  B8         			clv				; Clr the V bit for memcmp.
  311                        	
  312    18:CFFD  43 08      			tma3				; Preserve MPR3 and MPR4.
  313    18:CFFF  48         			pha
  314    18:D000  43 10      			tma4
  315    18:D002  48         			pha
  316                        	
  317    18:D003  A4 02      			ldy	<_bp_bank		; Map string2.
  318    18:D005  F0 03      			beq	.no_bank
  319                        	
  320    18:D007  20 3B E3   			jsr	map_bp_to_mpr34
  321                        	
  322    18:D00A  C2         	.no_bank:	cly
  323                        	
  324    18:D00B  A6 F8      			ldx.l	<_ax			; Increment length.l
  325    18:D00D  E8         			inx
  326    18:D00E  CA         	.loop:		dex				; Decrement length.l
  327    18:D00F  F0 17      			beq	.page
  328    18:D011  B1 F0      	.test:		lda	[_di], y		; string1 - string2
  329    18:D013  D1 EC      			cmp	[_bp], y
  330    18:D015  90 1E      			bcc	.return_neg		; string1 < string2 
  331    18:D017  D0 17      			bne	.return_pos		; string1 > string2
  332    18:D019  50 04      			bvc	!+			; Only check for end-of-string
  333    18:D01B  C9 00      			cmp	#0			; if the V flag is set.
  334    18:D01D  F0 0D      			beq	.return_same
  335    18:D01F  C8         	!:		iny
  336    18:D020  D0 EC      			bne	.loop
  337    18:D022  E6 F1      			inc.h	<_di
  338    18:D024  E6 ED      			inc.h	<_bp			; Limited to 8KB maximum!
  339                        	;		jsr	inc.h_bp_mpr34
  340    18:D026  80 E6      			bra	.loop
  341                        	
  342    18:D028  C6 F9      	.page:		dec.h	<_ax			; Decrement length.h 
  343    18:D02A  10 E5      			bpl	.test			; Limit comparison to 32KB.
  344                        	;		bra	cmp_same
  345                        	
  346    18:D02C  82         	.return_same:	clx				; Return code in Y:X, X -> A.
  347    18:D02D  C2         			cly
  348    18:D02E  80 09      			bra	!+
  349                        	
  350    18:D030  A2 01      	.return_pos:	ldx	#$01			; Return code in Y:X, X -> A.
  351    18:D032  C2         			cly
  352    18:D033  80 04      			bra	!+
  353                        	
  354    18:D035  A2 FF      	.return_neg:	ldx	#$FF			; Return code in Y:X, X -> A.
  355    18:D037  A0 FF      			ldy	#$FF
  356                        	
  357    18:D039  68         	!:		pla				; Restore MPR3 and MPR4.
  358    18:D03A  53 10      			tam4
  359    18:D03C  68         			pla
  360    18:D03D  53 08      			tam3
  361                        	
  362                        			leave				; Return and copy X -> A.
         18:D03F  4C EF FF   			jmp	leave_proc
  363                        	
  364                        			.endp
  365                        	
  366                        			.endprocgroup			; hucc_memcmp
  367                        	
  368    00:E765             			.alias	_far_memcmp.2		= _farmemcmp.3
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   64                        		.endif
   65                        	
   66               0001     		.ifdef	HUCC_USES_NEW_SCROLL		; Set in hucc_scroll.h
                             #[3]   "..\..\..\include\hucc\hucc-scroll.asm"
   67                        			include	"hucc-scroll.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-scroll.asm
    5                        	;
    6                        	; Routines for a fast split-screen scrolling system.
    7                        	;
    8                        	; Copyright John Brandwood 2024.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; The maximum number of splits for each screen layer is set in your project's
   18                        	; "hucc-config.inc" file, with the library having a limit of 128-per-layer.
   19                        	;
   20                        	; Your first active split must be defined to start at screen line 0, and then
   21                        	; the rest of the active splits must be in increasing line order to match the
   22                        	; way that the PC Engine displays the output image.
   23                        	;
   24                        	; You can have disabled splits interleaved with your active splits.
   25                        	;
   26                        	; Splits that are normally disabled can be used to create full screen effects
   27                        	; such as bouncing the screen up and down by adding blank areas at the top or
   28                        	; bottom of the screen, and then rapidly changing the height of those areas.
   29                        	;
   30                        	; ***************************************************************************
   31                        	; ***************************************************************************
   32                        	
   33                        	
   34                        	
   35               0000     		.ifndef	HUCC_PCE_SPLITS
   37                        		.endif
   38                        	
   39               0000     		.ifndef	HUCC_SGX_SPLITS
   41                        		.endif
   42                        	
   43               0000     		.if	(HUCC_PCE_SPLITS < 2) || (HUCC_PCE_SPLITS > 128)
   45                        		.endif
   46                        	
   47               0000     		.if	(HUCC_SGX_SPLITS < 2) || (HUCC_SGX_SPLITS > 128)
   49                        		.endif
   50                        	
   51               0144     	HUCC_1ST_RCR	=	$144
   52               00E0     	HUCC_SCR_HEIGHT	=	224
   53                        	
   54               E765     			.code
   55                        	
   56                        	
   57                        	
   58                        	; ***************************************************************************
   59                        	; ***************************************************************************
   60                        	;
   61                        	; void __fastcall scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
   62                        	; void __fastcall sgx_scroll_split( unsigned char index<_al>, unsigned char screen_line<_ah>, unsigned int bat_x<_bx>, unsigned int bat_y<_cx>, unsigned char display_flags<_dl> );
   63                        	;
   64                        	; set screen scrolling
   65                        	
   66                        			.proc	_scroll_split.5
  143                        			.endp
  144                        	
  145               0001     		.if	SUPPORT_SGX
  146                        	
  147    18:CCCF             			.proc	_sgx_scroll_split.5
  148                        	
  149    18:CCCF  08         			php				; Disable interrupts while
  150    18:CCD0  78         			sei				; updating this structure.
  151                        	
  152    18:CCD1  A6 F8      			ldx	<_al			; Region number.
  153    18:CCD3  E0 08      			cpx	#HUCC_SGX_SPLITS
  154    18:CCD5  B0 FE      	.hang:		bcs	.hang			; Better a hang than a crash!
  155                        	
  156    18:CCD7  BD 30 27   			lda	sgx_region_sel, x	; Update the parameter copy
  157    18:CCDA  5D 38 27   			eor	sgx_region_new, x	; that is not displayed now.
  158    18:CCDD  D0 3B      			bne	.regionA
  159                        	
  160    18:CCDF  A5 F9      	.regionB:	lda	<_ah			; Scanline (i.e. top).
  161    18:CCE1  C9 E0      			cmp	#HUCC_SCR_HEIGHT	; Skip if offscreen.
  162    18:CCE3  B0 31      			bcs	!done+
  163    18:CCE5  9D 58 27   			sta	sgx_regionB_rcr, x
  164                        	
  165    18:CCE8  C9 00      			cmp	#0			; Either Y at top of the frame
  166    18:CCEA  F0 01      			beq	!+			; or Y-1 because the RCR code
  167    18:CCEC  18         			clc				; sets it on the line before.
  168    18:CCED  A5 FC      	!:		lda.l	<_cx
  169    18:CCEF  E9 00      			sbc	#0
  170    18:CCF1  9D 88 27   			sta	sgx_regionB_yl, x
  171    18:CCF4  A5 FD      			lda.h	<_cx
  172    18:CCF6  E9 00      			sbc	#0
  173    18:CCF8  9D 98 27   			sta	sgx_regionB_yh, x
  174                        	
  175    18:CCFB  A5 FA      			lda.l	<_bx
  176    18:CCFD  9D 68 27   			sta	sgx_regionB_xl, x
  177    18:CD00  A5 FB      			lda.h	<_bx
  178    18:CD02  9D 78 27   			sta	sgx_regionB_xh, x
  179                        	
  180    18:CD05  A5 FE      			lda	<_dl
  181    18:CD07  29 C0      			and	#$C0			; Flags (mark it as enabled).
  182    18:CD09  09 0C      			ora	#$0C
  183    18:CD0B  9D 48 27   			sta	sgx_regionB_crl, x
  184                        	
  185    18:CD0E  A9 01      			lda	#1			; Mark that we've changed the
  186    18:CD10  9D 38 27   			sta	sgx_region_new, x	; selected region.
  187    18:CD13  9D 30 27   			sta	sgx_region_sel, x
  188                        	
  189    18:CD16  28         	!done:		plp				; Restore interrupts.
  190                        			leave				; All done!
         18:CD17  4C EF FF   			jmp	leave_proc
  191                        	
  192    18:CD1A  A5 F9      	.regionA:	lda	<_ah			; Scanline (i.e. top).
  193    18:CD1C  C9 E0      			cmp	#HUCC_SCR_HEIGHT	; Skip if offscreen.
  194    18:CD1E  B0 31      			bcs	!done+
  195    18:CD20  9D 50 27   			sta	sgx_regionA_rcr, x
  196                        	
  197    18:CD23  C9 00      			cmp	#0			; Either Y at top of the frame
  198    18:CD25  F0 01      			beq	!+			; or Y-1 because the RCR code
  199    18:CD27  18         			clc				; sets it on the line before.
  200    18:CD28  A5 FC      	!:		lda.l	<_cx
  201    18:CD2A  E9 00      			sbc	#0
  202    18:CD2C  9D 80 27   			sta	sgx_regionA_yl, x
  203    18:CD2F  A5 FD      			lda.h	<_cx
  204    18:CD31  E9 00      			sbc	#0
  205    18:CD33  9D 90 27   			sta	sgx_regionA_yh, x
  206                        	
  207    18:CD36  A5 FA      			lda.l	<_bx
  208    18:CD38  9D 60 27   			sta	sgx_regionA_xl, x
  209    18:CD3B  A5 FB      			lda.h	<_bx
  210    18:CD3D  9D 70 27   			sta	sgx_regionA_xh, x
  211                        	
  212    18:CD40  A5 FE      			lda	<_dl
  213    18:CD42  29 C0      			and	#$C0			; Flags (mark it as enabled).
  214    18:CD44  09 0C      			ora	#$0C
  215    18:CD46  9D 40 27   			sta	sgx_regionA_crl, x
  216                        	
  217    18:CD49  A9 01      			lda	#1			; Mark that we've changed the
  218    18:CD4B  9D 38 27   			sta	sgx_region_new, x	; selected region.
  219    18:CD4E  9E 30 27   			stz	sgx_region_sel, x
  220                        	
  221    18:CD51  28         	!done:		plp				; Restore interrupts.
  222                        			leave				; All done!
         18:CD52  4C EF FF   			jmp	leave_proc
  223                        	
  224                        			.endp
  225                        	
  226                        		.endif	SUPPORT_SGX
  227                        	
  228                        	
  229                        	
  230                        	; ***************************************************************************
  231                        	; ***************************************************************************
  232                        	;
  233                        	; void __fastcall disable_split( unsigned char index<acc> );
  234                        	; void __fastcall sgx_disable_split( unsigned char index<acc> );
  235                        	;
  236                        	; disable screen scrolling for a scroll region
  237                        	
  238    00:E765             	_disable_split.1:
  239    00:E765  08         			php				; Disable interrupts while
  240    00:E766  78         			sei				; updating this structure.
  241                        	
  242    00:E767  C9 08      			cmp	#HUCC_PCE_SPLITS	; Better a hang than a crash!
  243    00:E769  B0 FE      	.hang:		bcs	.hang
  244    00:E76B  AA         			tax
  245                        	
  246    00:E76C  BD AF 26   			lda	vdc_region_sel, x	; Update the parameter copy
  247    00:E76F  5D B7 26   			eor	vdc_region_new, x	; that is not displayed now.
  248    00:E772  D0 0D      			bne	.regionA
  249                        	
  250    00:E774  9E C7 26   	.regionB:	stz	vdc_regionB_crl, x	; Region disabled if $00.
  251                        	
  252    00:E777  A9 01      			lda	#1			; Mark that we've changed the
  253    00:E779  9D B7 26   			sta	vdc_region_new, x	; selected region.
  254    00:E77C  9D AF 26   			sta	vdc_region_sel, x
  255                        	
  256    00:E77F  28         			plp				; Restore interrupts.
  257    00:E780  60         			rts
  258                        	
  259    00:E781  9E BF 26   	.regionA:	stz	vdc_regionA_crl, x	; Region disabled if $00.
  260                        	
  261    00:E784  A9 01      			lda	#1			; Mark that we've changed the
  262    00:E786  9D B7 26   			sta	vdc_region_new, x	; selected region.
  263    00:E789  9E AF 26   			stz	vdc_region_sel, x
  264                        	
  265    00:E78C  28         			plp				; Restore interrupts.
  266    00:E78D  60         			rts
  267                        	
  268               0001     		.if	SUPPORT_SGX
  269                        	
  270    00:E78E             	_sgx_disable_split.1:
  271    00:E78E  08         			php				; Disable interrupts while
  272    00:E78F  78         			sei				; updating this structure.
  273                        	
  274    00:E790  C9 08      			cmp	#HUCC_SGX_SPLITS	; Better a hang than a crash!
  275    00:E792  B0 FE      	.hang:		bcs	.hang
  276    00:E794  AA         			tax
  277                        	
  278    00:E795  BD 30 27   			lda	sgx_region_sel, x	; Update the parameter copy
  279    00:E798  5D 38 27   			eor	sgx_region_new, x	; that is not displayed now.
  280    00:E79B  D0 0D      			bne	.regionA
  281                        	
  282    00:E79D  9E 48 27   	.regionB:	stz	sgx_regionB_crl, x	; Region disabled if $00.
  283                        	
  284    00:E7A0  A9 01      			lda	#1			; Mark that we've changed the
  285    00:E7A2  9D 38 27   			sta	sgx_region_new, x	; selected region.
  286    00:E7A5  9D 30 27   			sta	sgx_region_sel, x
  287                        	
  288    00:E7A8  28         			plp				; Restore interrupts.
  289    00:E7A9  60         			rts
  290                        	
  291    00:E7AA  9E 40 27   	.regionA:	stz	sgx_regionA_crl, x	; Region disabled if $00.
  292                        	
  293    00:E7AD  A9 01      			lda	#1			; Mark that we've changed the
  294    00:E7AF  9D 38 27   			sta	sgx_region_new, x	; selected region.
  295    00:E7B2  9E 30 27   			stz	sgx_region_sel, x
  296                        	
  297    00:E7B5  28         			plp				; Restore interrupts.
  298    00:E7B6  60         			rts
  299                        	
  300                        		.endif	SUPPORT_SGX
  301                        	
  302                        	
  303                        	
  304                        	; ***************************************************************************
  305                        	; ***************************************************************************
  306                        	;
  307                        	; vbl_init_scroll
  308                        	;
  309                        	; From Charles MacDonald's pcetech.txt ...
  310                        	;
  311                        	;  Raster Compare Register (RCR):
  312                        	;
  313                        	;  The range of the RCR is 263 lines, relative to the start of the active
  314                        	;  display period. (defined by VSW, VDS, and VCR) The VDC treats the first
  315                        	;  scanline of the active display period as $0040, so the valid ranges for
  316                        	;  the RCR register are $0040 to $0146.
  317                        	;
  318                        	;  For example, assume VSW=$02, VDS=$17. This positions the first line of
  319                        	;  the active display period at line 25 of the frame. An RCR value of $0040
  320                        	;  (zero) causes an interrupt at line 25, and a value of $0146 (262) causes an
  321                        	;  interrupt at line 24 of the next frame.
  322                        	;
  323                        	;  Any other RCR values that are out of range ($00-$3F, $147-$3FF) will never
  324                        	;  result in a successful line compare.
  325                        	;
  326                        	; Processing time:
  327                        	;
  328                        	; Old HuC rcr_init: 2148 cycles if all 8 regions pre-sorted
  329                        	; Old HuC rcr_init: 4346 cycles if all 8 regions need sorting
  330                        	;
  331                        	; New HuCC vbl_init_scroll:   8 disabled splits:  290 cycles
  332                        	; New HuCC vbl_init_scroll:   8  enabled splits:  384 cycles
  333                        	;
  334                        	; New HuCC vbl_init_scroll:  16 disabled splits:  506 cycles
  335                        	; New HuCC vbl_init_scroll:  16  enabled splits:  672 cycles
  336                        	;
  337                        	; New HuCC vbl_init_scroll:  32 disabled splits:  953 cycles
  338                        	; New HuCC vbl_init_scroll:  32  enabled splits: 1263 cycles
  339                        	;
  340                        	; New HuCC vbl_init_scroll:  64 disabled splits: 1802 cycles
  341                        	; New HuCC vbl_init_scroll:  64  enabled splits: 2400 cycles
  342                        	;
  343                        	; New HuCC vbl_init_scroll: 128 disabled splits: 3530 cycles
  344                        	; New HuCC vbl_init_scroll: 128  enabled splits: 4704 cycles
  345                        	;
  346                        	; Memory used is 16 bytes per scroll per VDC!
  347                        	
  348               26AF     			.bss
  349                        	
  350    F8:26AF             	vdc_region_sel:	.ds	HUCC_PCE_SPLITS		; Use A or B region next frame?
  351    F8:26B7             	vdc_region_new:	.ds	HUCC_PCE_SPLITS		; 1 if vdc_region_sel modified.
  352                        	
  353    F8:26BF             	vdc_regionA_crl:.ds	HUCC_PCE_SPLITS		; Two copies of each setting
  354    F8:26C7             	vdc_regionB_crl:.ds	HUCC_PCE_SPLITS		; HUCC_PCE_SPLITS bytes apart,
  355    F8:26CF             	vdc_regionA_rcr:.ds	HUCC_PCE_SPLITS		; one setting for the current
  356    F8:26D7             	vdc_regionB_rcr:.ds	HUCC_PCE_SPLITS		; frame, and one setting that
  357    F8:26DF             	vdc_regionA_xl:	.ds	HUCC_PCE_SPLITS		; gets modified and then used
  358    F8:26E7             	vdc_regionB_xl:	.ds	HUCC_PCE_SPLITS		; on the next frame after the
  359    F8:26EF             	vdc_regionA_xh:	.ds	HUCC_PCE_SPLITS		; change is made.
  360    F8:26F7             	vdc_regionB_xh:	.ds	HUCC_PCE_SPLITS		; Regions will have different
  361    F8:26FF             	vdc_regionA_yl:	.ds	HUCC_PCE_SPLITS		; A or B currently active!
  362    F8:2707             	vdc_regionB_yl:	.ds	HUCC_PCE_SPLITS
  363    F8:270F             	vdc_regionA_yh:	.ds	HUCC_PCE_SPLITS
  364    F8:2717             	vdc_regionB_yh:	.ds	HUCC_PCE_SPLITS
  365                        	
  366    F8:271F             	vdc_next_region:.ds	1			; Linked list of region indexes
  367    F8:2720             	vdc_regionA_nxt:.ds	HUCC_PCE_SPLITS		; for the current frame.
  368    F8:2728             	vdc_regionB_nxt:.ds	HUCC_PCE_SPLITS
  369                        	
  370               0001     		.if	SUPPORT_SGX
  371                        	
  372    F8:2730             	sgx_region_sel:	.ds	HUCC_SGX_SPLITS		; Use A or B region next frame?
  373    F8:2738             	sgx_region_new:	.ds	HUCC_SGX_SPLITS		; 1 if sgx_region_sel modified.
  374                        	
  375    F8:2740             	sgx_regionA_crl:.ds	HUCC_SGX_SPLITS		; Two copies of each setting
  376    F8:2748             	sgx_regionB_crl:.ds	HUCC_SGX_SPLITS		; HUCC_SGX_SPLITS bytes apart,
  377    F8:2750             	sgx_regionA_rcr:.ds	HUCC_SGX_SPLITS		; one setting for the current
  378    F8:2758             	sgx_regionB_rcr:.ds	HUCC_SGX_SPLITS		; frame, and one setting that
  379    F8:2760             	sgx_regionA_xl:	.ds	HUCC_SGX_SPLITS		; gets modified and then used
  380    F8:2768             	sgx_regionB_xl:	.ds	HUCC_SGX_SPLITS		; on the next frame after the
  381    F8:2770             	sgx_regionA_xh:	.ds	HUCC_SGX_SPLITS		; change is made.
  382    F8:2778             	sgx_regionB_xh:	.ds	HUCC_SGX_SPLITS		; Regions will have different
  383    F8:2780             	sgx_regionA_yl:	.ds	HUCC_SGX_SPLITS		; A or B currently active!
  384    F8:2788             	sgx_regionB_yl:	.ds	HUCC_SGX_SPLITS
  385    F8:2790             	sgx_regionA_yh:	.ds	HUCC_SGX_SPLITS
  386    F8:2798             	sgx_regionB_yh:	.ds	HUCC_SGX_SPLITS
  387                        	
  388    F8:27A0             	sgx_next_region:.ds	1			; Linked list of region indexes
  389    F8:27A1             	sgx_regionA_nxt:.ds	HUCC_SGX_SPLITS		; for the current frame.
  390    F8:27A9             	sgx_regionB_nxt:.ds	HUCC_SGX_SPLITS
  391                        	
  392                        		.endif
  393                        	
  394               E7B7     			.code
  395                        	
  396    18:CD55             	vbl_init_scroll	.proc
  397                        	
  398    18:CD55  62         			cla				; A = previous active index
  399    18:CD56  A2 08      			ldx	#HUCC_PCE_SPLITS	; so $00 for end-of-screen.
  400                        	
  401    18:CD58  18         			clc				; For regionB indexes.
  402                        	
  403    18:CD59  CA         	!next_region:	dex				; All regions updated?
  404    18:CD5A  30 20      			bmi	!save_first+
  405                        	
  406    18:CD5C  9E B7 26   			stz	vdc_region_new, x	; Clear region modified flag.
  407                        	
  408    18:CD5F  BC AF 26   			ldy	vdc_region_sel, x	; 0=regionA or 1=regionB.
  409    18:CD62  F0 0D      			beq	!use_regionA+
  410                        	
  411    18:CD64  BC C7 26   	!use_regionB:	ldy	vdc_regionB_crl, x	; Region disabled if $00.
  412    18:CD67  F0 F0      			beq	!next_region-
  413    18:CD69  9D 28 27   			sta	vdc_regionB_nxt, x	; Save index of next region.
  414    18:CD6C  8A         			txa				; A = current region index.
  415    18:CD6D  69 08      			adc	#HUCC_PCE_SPLITS	; Always leaves CC!
  416    18:CD6F  80 E8      			bra	!next_region-
  417                        	
  418    18:CD71  BC BF 26   	!use_regionA:	ldy	vdc_regionA_crl, x	; Region disabled if $00.
  419    18:CD74  F0 E3      			beq	!next_region-
  420    18:CD76  9D 20 27   			sta	vdc_regionA_nxt, x	; Save index of next region.
  421    18:CD79  8A         			txa				; A = current region index.
  422    18:CD7A  80 DD      			bra	!next_region-
  423                        	
  424    18:CD7C  8D 1F 27   	!save_first:	sta	vdc_next_region		; Save index of 1st region.
  425                        	
  426    18:CD7F  AA         			tax				; NZ if first active region
  427    18:CD80  D0 03      			bne	!init_first+		; is not region 0.
  428    18:CD82  98         			tya				; NZ if region 0 is active.
  429    18:CD83  F0 0F      			beq	!+			; If no active leave RCR=0.
  430                        	
  431    18:CD85  A9 06      	!init_first:	lda	#VDC_RCR		; 1st RCR always happens just
  432    18:CD87  8D 00 02   			sta	VDC_AR			; before the display starts.
  433    18:CD8A  A9 44      			lda.l	#HUCC_1ST_RCR
  434    18:CD8C  8D 02 02   			sta	VDC_DL
  435    18:CD8F  A9 01      			lda.h	#HUCC_1ST_RCR
  436    18:CD91  8D 03 02   			sta	VDC_DH
  437                        	
  438               0001     		.if	SUPPORT_SGX
  439                        	
  440    18:CD94  62         	!:		cla				; A = previous active index
  441    18:CD95  A2 08      			ldx	#HUCC_SGX_SPLITS	; so $00 for end-of-screen.
  442                        	
  443    18:CD97  18         			clc				; For regionB indexes.
  444                        	
  445    18:CD98  CA         	!next_region:	dex				; All regions updated?
  446    18:CD99  30 20      			bmi	!save_first+
  447                        	
  448    18:CD9B  9E 38 27   			stz	sgx_region_new, x	; Clear region modified flag.
  449                        	
  450    18:CD9E  BC 30 27   			ldy	sgx_region_sel, x	; 0=regionA or 1=regionB.
  451    18:CDA1  F0 0D      			beq	!use_regionA+
  452                        	
  453    18:CDA3  BC 48 27   	!use_regionB:	ldy	sgx_regionB_crl, x	; Region disabled if $00.
  454    18:CDA6  F0 F0      			beq	!next_region-
  455    18:CDA8  9D A9 27   			sta	sgx_regionB_nxt, x	; Save index of next region.
  456    18:CDAB  8A         			txa				; A = current region index.
  457    18:CDAC  69 08      			adc	#HUCC_SGX_SPLITS	; Always leaves CC!
  458    18:CDAE  80 E8      			bra	!next_region-
  459                        	
  460    18:CDB0  BC 40 27   	!use_regionA:	ldy	sgx_regionA_crl, x	; Region disabled if $00.
  461    18:CDB3  F0 E3      			beq	!next_region-
  462    18:CDB5  9D A1 27   			sta	sgx_regionA_nxt, x	; Save index of next region.
  463    18:CDB8  8A         			txa				; A = current region index.
  464    18:CDB9  80 DD      			bra	!next_region-
  465                        	
  466    18:CDBB  8D A0 27   	!save_first:	sta	sgx_next_region		; Save index of 1st region.
  467                        	
  468    18:CDBE  AA         			tax				; NZ if first active region
  469    18:CDBF  D0 03      			bne	!init_first+		; is not region 0.
  470    18:CDC1  98         			tya				; NZ if region 0 is active.
  471    18:CDC2  F0 0F      			beq	!+			; If no active leave RCR=0.
  472                        	
  473    18:CDC4  A9 06      	!init_first:	lda	#VDC_RCR		; 1st RCR always happens just
  474    18:CDC6  8D 10 02   			sta	SGX_AR			; before the display starts.
  475    18:CDC9  A9 44      			lda.l	#HUCC_1ST_RCR
  476    18:CDCB  8D 12 02   			sta	SGX_DL
  477    18:CDCE  A9 01      			lda.h	#HUCC_1ST_RCR
  478    18:CDD0  8D 13 02   			sta	SGX_DH
  479                        	
  480                        		.endif	SUPPORT_SGX
  481                        	
  482                        	!:		leave				; All done!
         18:CDD3  4C EF FF   			jmp	leave_proc
  483                        	
  484                        			.endp
  485                        	
  486                        	
  487                        	
  488               0001     		.if	SUPPORT_SGX
  489                        	
  490                        	; ***************************************************************************
  491                        	; ***************************************************************************
  492                        	;
  493                        	; VDC_RCR_MACRO and SGX_RCR_MACRO
  494                        	;
  495                        	; A 16-byte TIA takes 142..234 cycles in 5MHz, 128..200 cycles in 7MHz.
  496                        	; A 32-byte TIA takes 270..364 cycles in 5MHz, 242..312 cycles in 7MHz. (527 DUO)
  497                        	;
  498                        	; You need to write the last RCR setting within 540 cycles in order to catch
  499                        	; the next line (at 256/336/512 resolution).
  500                        	;
  501                        	; That gives 305 cycles from the RCR to write the last setting, or there
  502                        	; will be a visible glitch on the screen.
  503                        	
  504               0000     		.ifndef	USING_RCR_MACROS
  506                        		.endif
  507                        	
  508                        	;		;;;				; 8 (cycles for the INT)
  509                        	;		bbs1	<irq_vec, .hook		; 8
  510                        	;		jmp	[irq1_hook]		; 7
  511                        	
  512                        	;		;;;				; 8 (cycles for the INT)
  513                        	;		jmp	irq1_handler		; 4
  514                        	
  515                        	;irq1_handler:	pha				; 3 Save all registers.
  516                        	;		phx				; 3
  517                        	;		phy				; 3
  518                        	;
  519                        	;		lda	VDC_SR			; 6 Acknowledge the VDC's IRQ.
  520                        	;		sta	<vdc_sr			; 4 Remember what caused it.
  521                        	;
  522                        	;		ldx	SGX_SR			; 6 Read SGX_SR after VDC_SR in
  523                        	;		stx	<sgx_sr			; 4 case this is not an SGX!
  524                        	;
  525                        	;!:		and	#$04			; 2 Is this an HSYNC interrupt?
  526                        	;		beq	!+			; 2
  527                        	
  528                        			.macro	VDC_RCR_MACRO
  529                        	
  530                        			st0	#VDC_RCR		; 5
  531                        	
  532                        			ldx	vdc_next_region		; 5 X and Y can be greater than
  533                        			ldy	vdc_regionA_nxt, x	; 5 HUCC_PCE_SPLITS if regionB!
  534                        			clc				; 2
  535                        			bne	!set_next_rcr+		; 4 Stop RCR if next line is 0.
  536                        	
  537                        			and	const_0000		; 5 A=$00 with the same #cycles
  538                        			bra	!clr_next_rcr+		; 4 as if the branch were taken.
  539                        	
  540                        	!set_next_rcr:	lda	vdc_regionA_rcr, y	; 5 Set next RCR 1 line before
  541                        			adc	#64-1			; 2 the region begins, or 0 to
  542                        	!clr_next_rcr:	sta	VDC_DL			; 6 disable.
  543                        			cla				; 2
  544                        			rol	a			; 2
  545                        			sta	VDC_DH			; 6
  546                        	
  547                        			st0	#VDC_BYR		; 5 Do BYR first to mitigate the
  548                        			lda	vdc_regionA_yl, x	; 5 glitch if the IRQ is delayed.
  549                        			sta	VDC_DL			; 6 = 105 cycles from RCR on SGX
  550                        			lda	vdc_regionA_yh, x	; 5
  551                        			sta	VDC_DH			; 6
  552                        	
  553                        			st0	#VDC_CR			; 5
  554                        			lda	vdc_regionA_crl, x	; 5
  555                        	;		asl	a
  556                        			sta	VDC_DL			; 6
  557                        	
  558                        			st0	#VDC_BXR		; 2
  559                        			lda	vdc_regionA_xl, x	; 5
  560                        			sta	VDC_DL			; 6
  561                        			lda	vdc_regionA_xh, x	; 5
  562                        			sta	VDC_DH			; 6 = 156 cycles from RCR if DUO
  563                        	
  564                        	;		bcc	!+
  565                        	;		lda	vdc_regionA_yh, x	; 5
  566                        	;		sta.l	VCE_CTW			; 6
  567                        	
  568                        			sty	vdc_next_region		; 5
  569                        	
  570                        			.endm
  571                        	
  572                        	;!:		bbr2	<sgx_sr, !+		; 6 Is this an HSYNC interrupt?
  573                        	
  574                        			.macro	SGX_RCR_MACRO
  575                        	
  576                        			lda	#VDC_RCR		; 2
  577                        			sta	SGX_AR			; 6
  578                        	
  579                        			ldx	sgx_next_region		; 5 X and Y can be greater than
  580                        			ldy	sgx_regionA_nxt, x	; 5 HUCC_SGX_SPLITS if regionB!
  581                        			clc				; 2
  582                        			bne	!set_next_rcr+		; 4 Stop RCR if next line is 0.
  583                        	
  584                        			and	const_0000		; 5 A=$00 with the same #cycles
  585                        			bra	!clr_next_rcr+		; 4 as if the branch were taken.
  586                        	
  587                        	!set_next_rcr:	lda	sgx_regionA_rcr, y	; 5 Set next RCR 1 line before
  588                        			adc	#64-1			; 2 the region begins, or 0 to
  589                        	!clr_next_rcr:	sta	SGX_DL			; 6 disable.
  590                        			cla				; 2
  591                        			rol	a			; 2
  592                        			sta	SGX_DH			; 6
  593                        	
  594                        			lda	#VDC_BYR		; 2 Do BYR first to mitigate the
  595                        			sta	SGX_AR			; 6 glitch if the IRQ is delayed.
  596                        			lda	sgx_regionA_yl, x	; 5
  597                        			sta	SGX_DL			; 6
  598                        			lda	sgx_regionA_yh, x	; 5
  599                        			sta	SGX_DH			; 6
  600                        	
  601                        			lda	#VDC_CR			; 2
  602                        			sta	SGX_AR			; 6
  603                        			lda	sgx_regionA_crl, x	; 5
  604                        			sta	SGX_DL			; 6
  605                        	
  606                        			lda	#VDC_BXR		; 2
  607                        			sta	SGX_AR			; 6
  608                        			lda	sgx_regionA_xl, x	; 5
  609                        			sta	SGX_DL			; 6
  610                        			lda	sgx_regionA_xh, x	; 5
  611                        			sta	SGX_DH			; 6 = 293 cycles (282 if no YH)
  612                        	
  613                        			sty	sgx_next_region		; 5
  614                        	
  615                        			.endm
  616                        	
  617                        		.else	SUPPORT_SGX
  697                        		.endif	SUPPORT_SGX
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   68                        		.else
   72                        		.endif	HUCC_USES_NEW_SCROLL
   73                        	
   74               0001     		.ifdef	HUCC_USES_OLD_SPR		; Set in hucc_old_spr.h
                             #[3]   "..\..\..\include\hucc\hucc-old-spr.asm"
   75                        			include	"hucc-old-spr.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-old-spr.asm
    5                        	;
    6                        	; Based on the original HuC and MagicKit functions by David Michel and the
    7                        	; other original HuC developers.
    8                        	;
    9                        	; Modifications copyright John Brandwood 2024.
   10                        	;
   11                        	; Distributed under the Boost Software License, Version 1.0.
   12                        	; (See accompanying file LICENSE_1_0.txt or copy at
   13                        	;  http://www.boost.org/LICENSE_1_0.txt)
   14                        	;
   15                        	; ***************************************************************************
   16                        	; ***************************************************************************
   17                        	
   18                        	;
   19                        	; Include dependancies ...
   20                        	;
   21                        	
   22                        			include "common.asm"		; Common helpers.
   23                        			include "vce.asm"		; Useful VCE routines.
   24                        			include "vdc.asm"		; Useful VCE routines.
   25                        	
   26                        	
   27                        	
   28                        	; ***************************************************************************
   29                        	; ***************************************************************************
   30                        	;
   31                        	; HuC Sprite Functions
   32                        	;
   33                        	; ***************************************************************************
   34                        	; ***************************************************************************
   35                        	
   36               209C     			.zp
   37    F8:209C             	spr_ptr:	ds	2
   38               27B1     			.bss
   39    F8:27B1             	spr_sat:	ds	512
   40               E7B7     			.code
   41                        	
   42               0001     		.if	SUPPORT_SGX
   43               209E     			.zp
   44    F8:209E             	sgx_spr_ptr:	ds	2
   45               29B1     			.bss
   46    F8:29B1             	sgx_spr_sat:	ds	512	; N.B. Directly after spr_sat!
   47               E7B7     			.code
   48                        		.endif
   49                        	
   50                        	; Moved to hucc-old-map.asm just to save space. This NEEDS to be changed!
   51                        	;
   52                        	;		.bss
   53                        	;spr_max:	ds	1
   54                        	;spr_clr:	ds	1
   55                        	;	.if	SUPPORT_SGX
   56                        	;sgx_spr_max:	ds	1
   57                        	;sgx_spr_clr:	ds	1
   58                        	;	.endif
   59                        	;		.code
   60                        	
   61                        	
   62                        	
   63                        	; ***************************************************************************
   64                        	; ***************************************************************************
   65                        	;
   66                        	; void __fastcall init_satb( void );
   67                        	; void __fastcall reset_satb( void );
   68                        	;
   69                        	; void __fastcall sgx_init_satb( void );
   70                        	; void __fastcall sgx_reset_satb( void );
   71                        	
   72    00:E7B7             	_reset_satb:
   73    00:E7B7  C2         	_init_satb:	cly
   74    00:E7B8  62         			cla
   75    00:E7B9  99 B1 27   	!:		sta	spr_sat + $0000, y
   76    00:E7BC  99 B1 28   			sta	spr_sat + $0100, y
   77    00:E7BF  C8         			iny
   78    00:E7C0  D0 F7      			bne	!-
   79    00:E7C2  8C 85 26   			sty	spr_max
   80    00:E7C5  C8         			iny
   81    00:E7C6  8C 86 26   			sty	spr_clr
   82    00:E7C9  60         			rts
   83                        	
   84               0001     		.if	SUPPORT_SGX
   85    00:E7CA             	_sgx_reset_satb:
   86    00:E7CA  C2         	_sgx_init_satb:	cly
   87    00:E7CB  62         			cla
   88    00:E7CC  99 B1 29   	!:		sta	sgx_spr_sat + $0000, y
   89    00:E7CF  99 B1 2A   			sta	sgx_spr_sat + $0100, y
   90    00:E7D2  C8         			iny
   91    00:E7D3  D0 F7      			bne	!-
   92    00:E7D5  8C 95 26   			sty	sgx_spr_max
   93    00:E7D8  C8         			iny
   94    00:E7D9  8C 96 26   			sty	sgx_spr_clr
   95    00:E7DC  60         			rts
   96                        		.endif
   97                        	
   98                        	
   99                        	
  100                        	; ***************************************************************************
  101                        	; ***************************************************************************
  102                        	;
  103                        	; void __fastcall satb_update( void );
  104                        	; void __fastcall sgx_satb_update( void );
  105                        	
  106    17:DFA3             	old_satb_group	.procgroup
  107                        	
  108               0001     		.if	SUPPORT_SGX
  109    17:DFA3             			.proc	_sgx_satb_update
  110                        	
  111    17:DFA3  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  112    17:DFA5  F0         			db	$F0			; Turn "clx" into a "beq".
  113                        	
  114    17:DFA6             			.ref	_satb_update
  115                        			.endp
  116                        		.endif
  117                        	
  118    17:DFA6             			.proc	_satb_update
  119                        	
  120    17:DFA6  82         			clx				; Offset to PCE VDC.
  121                        	
  122    17:DFA7  A9 7F      			lda.h	#$7F00			; HuC puts the SAT here in VRAM
  123                        	;		lda.h	#$0800			; but we put it here instead
  124    17:DFA9  64 F0      			stz.l	<_di
  125    17:DFAB  85 F1      			sta.h	<_di
  126    17:DFAD  20 7F E3   			jsr	set_di_to_mawr
  127                        	
  128               0001     		.if	SUPPORT_SGX
  129    17:DFB0  8A         			txa				; Select which VDC to write
  130    17:DFB1  1A         			inc	a			; to.
  131    17:DFB2  1A         			inc	a
  132    17:DFB3  8D F3 22   			sta.l	ram_tia_dst
  133                        		.endif
  134                        	
  135    17:DFB6  A9 10      			lda	#VRAM_XFER_SIZE		; Split into 16-byte chunks
  136    17:DFB8  8D F5 22   			sta.l	ram_tia_len		; for stable IRQ response.
  137                        	
  138    17:DFBB  BC 85 26   			ldy	spr_max, x		; Highest sprite that was set.
  139    17:DFBE  C8         			iny
  140                        	
  141    17:DFBF  BD 86 26   			lda	spr_clr, x
  142    17:DFC2  F0 05      			beq	!+
  143    17:DFC4  9E 86 26   			stz	spr_clr, x
  144    17:DFC7  A0 40      			ldy	#64
  145                        	
  146    17:DFC9  98         	!:		tya
  147    17:DFCA  F0 22      			beq	.exit
  148                        	
  149    17:DFCC  3A         			dec	a			; round up to the next group of 2 sprites
  150    17:DFCD  4A         			lsr	a
  151               0000     		.if	VRAM_XFER_SIZE == 32
  153                        		.endif
  154    17:DFCE  1A         			inc	a
  155    17:DFCF  A8         			tay
  156                        	
  157    17:DFD0  A9 27      			lda.h	#spr_sat
  158                        	
  159               0001     		.if	SUPPORT_SGX
  160    17:DFD2  E0 00      			cpx	#0
  161    17:DFD4  F0 02      			beq	!+
  162                        	
  163    17:DFD6  A9 29      			lda.h	#sgx_spr_sat
  164                        		.endif
  165                        	
  166    17:DFD8  8D F2 22   	!:		sta.h	ram_tia_src
  167                        	
  168    17:DFDB  A9 B1      			lda.l	#spr_sat		; Same for SGX and PCE!
  169    17:DFDD  8D F1 22   	.chunk_loop:	sta.l	ram_tia_src
  170                        	
  171    17:DFE0  20 F0 22   			jsr	ram_tia			; transfer 16-bytes
  172                        	
  173    17:DFE3  18         			clc				; increment source
  174    17:DFE4  69 10      			adc	#VRAM_XFER_SIZE
  175    17:DFE6  90 03      			bcc	.same_page
  176    17:DFE8  EE F2 22   			inc.h	ram_tia_src
  177                        	
  178    17:DFEB  88         	.same_page:	dey
  179    17:DFEC  D0 EF      			bne	.chunk_loop
  180                        	
  181                        	.exit:		leave
         17:DFEE  4C EF FF   			jmp	leave_proc
  182                        	
  183                        			.endp
  184                        	
  185                        			.endprocgroup	; old_satb_group
  186                        	
  187                        	
  188                        	
  189                        	; ***************************************************************************
  190                        	; ***************************************************************************
  191                        	;
  192                        	; void __fastcall spr_set( unsigned char num<acc> );
  193                        	
  194    00:E7DD  CD 85 26   	_spr_set.1:	cmp	spr_max
  195    00:E7E0  90 03      			bcc	!+
  196    00:E7E2  8D 85 26   			sta	spr_max
  197    00:E7E5  A0 27      	!:		ldy.h	#spr_sat
  198    00:E7E7  0A         			asl	a
  199    00:E7E8  0A         			asl	a
  200    00:E7E9  0A         			asl	a
  201    00:E7EA  90 02      			bcc	!+
  202    00:E7EC  C8         			iny
  203    00:E7ED  18         			clc
  204    00:E7EE  69 B1      	!:		adc.l	#spr_sat
  205    00:E7F0  85 9C      			sta.l	<spr_ptr
  206    00:E7F2  90 01      			bcc	!+
  207    00:E7F4  C8         			iny
  208    00:E7F5  84 9D      	!:		sty.h	<spr_ptr
  209    00:E7F7  60         			rts
  210                        	
  211                        	
  212                        	
  213                        	; ***************************************************************************
  214                        	; ***************************************************************************
  215                        	;
  216                        	; void __fastcall spr_hide( void );
  217                        	
  218    00:E7F8  A0 01      	_spr_hide:	ldy	#1
  219    00:E7FA  B1 9C      			lda	[spr_ptr], y
  220    00:E7FC  09 02      			ora	#2
  221    00:E7FE  91 9C      			sta	[spr_ptr], y
  222    00:E800  60         			rts
  223                        	
  224                        	
  225                        	
  226                        	; ***************************************************************************
  227                        	; ***************************************************************************
  228                        	;
  229                        	; void __fastcall spr_show( void );
  230                        	
  231    00:E801  A0 01      	_spr_show:	ldy	#1
  232    00:E803  B1 9C      			lda	[spr_ptr], y
  233    00:E805  29 01      			and	#1
  234    00:E807  91 9C      			sta	[spr_ptr], y
  235    00:E809  60         			rts
  236                        	
  237                        	
  238                        	
  239                        	; ***************************************************************************
  240                        	; ***************************************************************************
  241                        	;
  242                        	; void __fastcall spr_x( unsigned int value<acc> );
  243                        	
  244    00:E80A  02         	_spr_x.1:	sxy
  245    00:E80B  18         			clc
  246    00:E80C  69 20      			adc	#32
  247    00:E80E  A0 02      			ldy	#2
  248    00:E810  91 9C      			sta	[spr_ptr], y
  249    00:E812  8A         			txa
  250    00:E813  69 00      			adc	#0
  251    00:E815  C8         			iny
  252    00:E816  91 9C      			sta	[spr_ptr], y
  253    00:E818  60         			rts
  254                        	
  255                        	
  256                        	
  257                        	; ***************************************************************************
  258                        	; ***************************************************************************
  259                        	;
  260                        	; void __fastcall spr_y( unsigned int value<acc> );
  261                        	
  262    00:E819  18         	_spr_y.1:	clc
  263    00:E81A  69 40      			adc	#64
  264    00:E81C  92 9C      			sta	[spr_ptr]
  265    00:E81E  98         			tya
  266    00:E81F  69 00      			adc	#0
  267    00:E821  A0 01      			ldy	#1
  268    00:E823  91 9C      			sta	[spr_ptr], y
  269    00:E825  60         			rts
  270                        			
  271                        	
  272                        	
  273                        	; ***************************************************************************
  274                        	; ***************************************************************************
  275                        	;
  276                        	; void __fastcall spr_pattern( unsigned int vaddr<acc> );
  277                        	
  278    00:E826  84 00      	_spr_pattern.1:	sty	<__temp		;     zp=fedcba98 a=76543210
  279    00:E828  0A         			asl	a		; c=f zp=edcba987 a=6543210_
  280    00:E829  26 00      			rol	<__temp
  281    00:E82B  2A         			rol	a		; c=e zp=dcba9876 a=543210_f
  282    00:E82C  26 00      			rol	<__temp
  283    00:E82E  2A         			rol	a		; c=d zp=cba98765 a=43210_fe
  284    00:E82F  26 00      			rol	<__temp
  285    00:E831  2A         			rol	a		; c=4 zp=cba98765 a=3210_fed
  286    00:E832  A0 05      			ldy	#5
  287    00:E834  91 9C      			sta	[spr_ptr], y
  288    00:E836  A5 00      			lda	<__temp
  289    00:E838  88         			dey
  290    00:E839  91 9C      			sta	[spr_ptr], y
  291    00:E83B  60         			rts
  292                        	
  293                        	
  294                        	
  295                        	; ***************************************************************************
  296                        	; ***************************************************************************
  297                        	;
  298                        	; void __fastcall spr_ctrl( unsigned char mask<_al>, unsigned char value<acc> );
  299                        	
  300    00:E83C  25 F8      	_spr_ctrl.2:	and	<_al
  301    00:E83E  85 00      			sta	<__temp
  302    00:E840  A5 F8      			lda	<_al
  303    00:E842  49 FF      			eor	#$FF
  304    00:E844  A0 07      			ldy	#7
  305    00:E846  31 9C      			and	[spr_ptr], y
  306    00:E848  05 00      			ora	<__temp
  307    00:E84A  91 9C      			sta	[spr_ptr], y
  308    00:E84C  60         			rts
  309                        	
  310                        	
  311                        	
  312                        	; ***************************************************************************
  313                        	; ***************************************************************************
  314                        	;
  315                        	; void __fastcall spr_pal( unsigned char palette<acc> )
  316                        	
  317    00:E84D  29 0F      	_spr_pal.1:	and	#$0F
  318    00:E84F  85 00      			sta	<__temp
  319    00:E851  A0 06      			ldy	#6
  320    00:E853  B1 9C      			lda	[spr_ptr], y
  321    00:E855  29 F0      			and	#$F0
  322    00:E857  05 00      			ora	<__temp
  323    00:E859  91 9C      			sta	[spr_ptr], y
  324    00:E85B  60         			rts
  325                        	
  326                        	
  327                        	
  328                        	; ***************************************************************************
  329                        	; ***************************************************************************
  330                        	;
  331                        	; void __fastcall spr_pri( unsigned char priority<acc> )
  332                        	
  333    00:E85C  C9 01      	_spr_pri.1:	cmp	#1
  334    00:E85E  A0 06      			ldy	#6
  335    00:E860  B1 9C      			lda	[spr_ptr], y
  336    00:E862  29 7F      			and	#$7F
  337    00:E864  90 02      			bcc	!+
  338    00:E866  09 80      			ora	#$80
  339    00:E868  91 9C      	!:		sta	[spr_ptr], y
  340    00:E86A  60         			rts
  341                        	
  342                        	
  343                        	
  344                        	; ***************************************************************************
  345                        	; ***************************************************************************
  346                        	;
  347                        	; unsigned int __fastcall spr_get_x( void );
  348                        	
  349    00:E86B  38         	_spr_get_x:	sec
  350    00:E86C  A0 02      			ldy	#2
  351    00:E86E  B1 9C      			lda	[spr_ptr], y
  352    00:E870  E9 20      			sbc	#32
  353    00:E872  AA         			tax
  354    00:E873  C8         			iny
  355    00:E874  B1 9C      			lda	[spr_ptr], y
  356    00:E876  E9 00      			sbc	#0
  357    00:E878  A8         			tay
  358    00:E879  8A         			txa
  359    00:E87A  60         			rts
  360                        	
  361                        	
  362                        	
  363                        	; ***************************************************************************
  364                        	; ***************************************************************************
  365                        	;
  366                        	; unsigned int __fastcall spr_get_y( void );
  367                        	
  368    00:E87B  38         	_spr_get_y:	sec
  369    00:E87C  B2 9C      			lda	[spr_ptr]
  370    00:E87E  E9 40      			sbc	#64
  371    00:E880  AA         			tax
  372    00:E881  A0 01      			ldy	#1
  373    00:E883  B1 9C      			lda	[spr_ptr], y
  374    00:E885  E9 00      			sbc	#0
  375    00:E887  A8         			tay
  376    00:E888  8A         			txa
  377    00:E889  60         			rts
  378                        	
  379                        	
  380                        	
  381               0001     		.if	SUPPORT_SGX
  382                        	
  383                        	; ***************************************************************************
  384                        	; ***************************************************************************
  385                        	;
  386                        	; void __fastcall sgx_spr_set( unsigned char num<acc> );
  387                        	
  388    00:E88A  CD 95 26   	_sgx_spr_set.1:	cmp	sgx_spr_max
  389    00:E88D  90 03      			bcc	!+
  390    00:E88F  8D 95 26   			sta	sgx_spr_max
  391    00:E892  A0 29      	!:		ldy.h	#sgx_spr_sat
  392    00:E894  0A         			asl	a
  393    00:E895  0A         			asl	a
  394    00:E896  0A         			asl	a
  395    00:E897  90 02      			bcc	!+
  396    00:E899  C8         			iny
  397    00:E89A  18         			clc
  398    00:E89B  69 B1      	!:		adc.l	#sgx_spr_sat
  399    00:E89D  85 9E      			sta.l	<sgx_spr_ptr
  400    00:E89F  90 01      			bcc	!+
  401    00:E8A1  C8         			iny
  402    00:E8A2  84 9F      	!:		sty.h	<sgx_spr_ptr
  403    00:E8A4  60         			rts
  404                        	
  405                        	
  406                        	
  407                        	; ***************************************************************************
  408                        	; ***************************************************************************
  409                        	;
  410                        	; void __fastcall sgx_spr_hide( void );
  411                        	
  412    00:E8A5  A0 01      	_sgx_spr_hide:	ldy	#1
  413    00:E8A7  B1 9E      			lda	[sgx_spr_ptr], y
  414    00:E8A9  09 02      			ora	#2
  415    00:E8AB  91 9E      			sta	[sgx_spr_ptr], y
  416    00:E8AD  60         			rts
  417                        	
  418                        	
  419                        	
  420                        	; ***************************************************************************
  421                        	; ***************************************************************************
  422                        	;
  423                        	; void __fastcall sgx_spr_show( void );
  424                        	
  425    00:E8AE  A0 01      	_sgx_spr_show:	ldy	#1
  426    00:E8B0  B1 9E      			lda	[sgx_spr_ptr], y
  427    00:E8B2  29 01      			and	#1
  428    00:E8B4  91 9E      			sta	[sgx_spr_ptr], y
  429    00:E8B6  60         			rts
  430                        	
  431                        	
  432                        	
  433                        	; ***************************************************************************
  434                        	; ***************************************************************************
  435                        	;
  436                        	; void __fastcall sgx_spr_x( unsigned int value<acc> );
  437                        	
  438    00:E8B7  02         	_sgx_spr_x.1:	sxy
  439    00:E8B8  18         			clc
  440    00:E8B9  69 20      			adc	#32
  441    00:E8BB  A0 02      			ldy	#2
  442    00:E8BD  91 9E      			sta	[sgx_spr_ptr], y
  443    00:E8BF  8A         			txa
  444    00:E8C0  69 00      			adc	#0
  445    00:E8C2  C8         			iny
  446    00:E8C3  91 9E      			sta	[sgx_spr_ptr], y
  447    00:E8C5  60         			rts
  448                        	
  449                        	
  450                        	
  451                        	; ***************************************************************************
  452                        	; ***************************************************************************
  453                        	;
  454                        	; void __fastcall sgx_spr_y( unsigned int value<acc> );
  455                        	
  456    00:E8C6  18         	_sgx_spr_y.1:	clc
  457    00:E8C7  69 40      			adc	#64
  458    00:E8C9  92 9E      			sta	[sgx_spr_ptr]
  459    00:E8CB  98         			tya
  460    00:E8CC  69 00      			adc	#0
  461    00:E8CE  A0 01      			ldy	#1
  462    00:E8D0  91 9E      			sta	[sgx_spr_ptr], y
  463    00:E8D2  60         			rts
  464                        			
  465                        	
  466                        	
  467                        	; ***************************************************************************
  468                        	; ***************************************************************************
  469                        	;
  470                        	; void __fastcall sgx_spr_pattern( unsigned int vaddr<acc> );
  471                        	
  472    00:E8D3             	_sgx_spr_pattern.1:
  473    00:E8D3  84 00      			sty	<__temp		;     zp=fedcba98 a=76543210
  474    00:E8D5  0A         			asl	a		; c=f zp=edcba987 a=6543210_
  475    00:E8D6  26 00      			rol	<__temp
  476    00:E8D8  2A         			rol	a		; c=e zp=dcba9876 a=543210_f
  477    00:E8D9  26 00      			rol	<__temp
  478    00:E8DB  2A         			rol	a		; c=d zp=cba98765 a=43210_fe
  479    00:E8DC  26 00      			rol	<__temp
  480    00:E8DE  2A         			rol	a		; c=4 zp=cba98765 a=3210_fed
  481    00:E8DF  A0 05      			ldy	#5
  482    00:E8E1  91 9E      			sta	[sgx_spr_ptr], y
  483    00:E8E3  A5 00      			lda	<__temp
  484    00:E8E5  88         			dey
  485    00:E8E6  91 9E      			sta	[sgx_spr_ptr], y
  486    00:E8E8  60         			rts
  487                        	
  488                        	
  489                        	
  490                        	; ***************************************************************************
  491                        	; ***************************************************************************
  492                        	;
  493                        	; void __fastcall sgx_spr_ctrl( unsigned char mask<_al>, unsigned char value<acc> );
  494                        	
  495    00:E8E9  25 F8      	_sgx_spr_ctrl.2:and	<_al
  496    00:E8EB  85 00      			sta	<__temp
  497    00:E8ED  A5 F8      			lda	<_al
  498    00:E8EF  49 FF      			eor	#$FF
  499    00:E8F1  A0 07      			ldy	#7
  500    00:E8F3  31 9E      			and	[sgx_spr_ptr], y
  501    00:E8F5  05 00      			ora	<__temp
  502    00:E8F7  91 9E      			sta	[sgx_spr_ptr], y
  503    00:E8F9  60         			rts
  504                        	
  505                        	
  506                        	
  507                        	; ***************************************************************************
  508                        	; ***************************************************************************
  509                        	;
  510                        	; void __fastcall sgx_spr_pal( unsigned char palette<acc> )
  511                        	
  512    00:E8FA  29 0F      	_sgx_spr_pal.1:	and	#$0F
  513    00:E8FC  85 00      			sta	<__temp
  514    00:E8FE  A0 06      			ldy	#6
  515    00:E900  B1 9E      			lda	[sgx_spr_ptr], y
  516    00:E902  29 F0      			and	#$F0
  517    00:E904  05 00      			ora	<__temp
  518    00:E906  91 9E      			sta	[sgx_spr_ptr], y
  519    00:E908  60         			rts
  520                        	
  521                        	
  522                        	
  523                        	; ***************************************************************************
  524                        	; ***************************************************************************
  525                        	;
  526                        	; void __fastcall sgx_spr_pri( unsigned char priority<acc> )
  527                        	
  528    00:E909  C9 01      	_sgx_spr_pri.1:	cmp	#1
  529    00:E90B  A0 06      			ldy	#6
  530    00:E90D  B1 9E      			lda	[sgx_spr_ptr], y
  531    00:E90F  29 7F      			and	#$7F
  532    00:E911  90 02      			bcc	!+
  533    00:E913  09 80      			ora	#$80
  534    00:E915  91 9E      	!:		sta	[sgx_spr_ptr], y
  535    00:E917  60         			rts
  536                        	
  537                        	
  538                        	
  539                        	; ***************************************************************************
  540                        	; ***************************************************************************
  541                        	;
  542                        	; unsigned int __fastcall sgx_spr_get_x( void );
  543                        	
  544    00:E918  38         	_sgx_spr_get_x:	sec
  545    00:E919  A0 02      			ldy	#2
  546    00:E91B  B1 9E      			lda	[sgx_spr_ptr], y
  547    00:E91D  E9 20      			sbc	#32
  548    00:E91F  AA         			tax
  549    00:E920  C8         			iny
  550    00:E921  B1 9E      			lda	[sgx_spr_ptr], y
  551    00:E923  E9 00      			sbc	#0
  552    00:E925  A8         			tay
  553    00:E926  8A         			txa
  554    00:E927  60         			rts
  555                        	
  556                        	
  557                        	
  558                        	; ***************************************************************************
  559                        	; ***************************************************************************
  560                        	;
  561                        	; unsigned int __fastcall sgx_spr_get_y( void );
  562                        	
  563    00:E928  38         	_sgx_spr_get_y:	sec
  564    00:E929  B2 9E      			lda	[sgx_spr_ptr]
  565    00:E92B  E9 40      			sbc	#64
  566    00:E92D  AA         			tax
  567    00:E92E  A0 01      			ldy	#1
  568    00:E930  B1 9E      			lda	[sgx_spr_ptr], y
  569    00:E932  E9 00      			sbc	#0
  570    00:E934  A8         			tay
  571    00:E935  8A         			txa
  572    00:E936  60         			rts
  573                        	
  574                        		.endif	SUPPORT_SGX
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   76                        		.endif
   77                        	
   78               0001     		.ifdef	HUCC_USES_BLKMAP		; Set in hucc_blkmap.h
                             #[3]   "..\..\..\include\hucc\blkmap.asm"
   79                        			include	"blkmap.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; blkmap.asm
    5                        	;
    6                        	; A map system based on 16x16 meta-tiles (aka "blocks", aka CHR/BLK/MAP).
    7                        	;
    8                        	; Copyright John Brandwood 2025.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; The maximum X and Y size for blkmaps is 128 blocks (2048 pixels).
   18                        	;
   19                        	; The maximum total size for a blkmap is 16KBytes, which allows for maps up
   20                        	; to 128x128 blocks (2048x2048 pixels).
   21                        	;
   22                        	; Huge multi-screen blkmaps are also supported (optionally).
   23                        	;
   24                        	; The maximum X and Y for multi-screen maps is 128 screens (32768 pixels).
   25                        	;
   26                        	; The maximum total size for a multi-screen map is 8KBytes, which allows for
   27                        	; a total of 1024 screens.
   28                        	;
   29                        	; ***************************************************************************
   30                        	; ***************************************************************************
   31                        	
   32                        	;
   33                        	; Include dependancies ...
   34                        	;
   35                        	
   36                        			include "common.asm"		; Common helpers.
   37                        			include "vce.asm"		; Useful VCE routines.
   38                        			include "vdc.asm"		; Useful VCE routines.
   39                        	
   40                        	;
   41                        	; Support large blkmaps up to 16KBytes instead of the regular 8KBytes?
   42                        	;
   43                        	; The maximum X and Y size for regular blkmaps is 128 tiles (2048 pixels).
   44                        	;
   45                        	; This allows for individual maps up to 128x128 tiles (2048x2048 pixels) vs
   46                        	; default limit of 128x64 or 64x128.
   47                        	;
   48                        	
   49               0000     		.ifndef	BLKMAP_LARGEMAP
   51                        		.endif
   52                        	
   53                        	;
   54                        	; Support huge multi-screen maps, up to 32768 pixels wide/high?
   55                        	;
   56                        	; These are sectorized maps split into individual BAT-sized "screens", with
   57                        	; a maximum of 1024 screens per map.
   58                        	;
   59                        	; The BAT size that is used when drawing *must* be the same as the BAT size
   60                        	; that was chosen when creating the multi-screen map.
   61                        	;
   62                        	; Each screen can use a unique set of block definitions, or it might choose
   63                        	; to share the same block definitions that are used on another screen.
   64                        	;
   65                        	; Each screen may choose which 8KByte banks of character data to select for
   66                        	; the 4 banks (32KBytes) of VRAM that its block definitions use, with a max
   67                        	; of 16 banks of characters per multi-screen map.
   68                        	;
   69                        	; Loading those character banks dynamically is an exercise for the user!
   70                        	;
   71                        	; Enabling support adds extra library code, and slightly slows down the use
   72                        	; of regular blkmaps.
   73                        	;
   74                        	
   75               0000     		.ifndef	BLKMAP_MULTISCR
   77                        		.endif
   78                        	
   79                        	;
   80                        	; Block definitions can either use character data from VRAM $1000..$7FFF or
   81                        	; they can be limited to use the 32KByte of characters in VRAM $1000..$4FFF
   82                        	; which then frees up 2-bits for flag information for each character in the
   83                        	; block.
   84                        	;
   85                        	; These 2-bits are perfect for using as collision information in game maps,
   86                        	; allowing storage of states like transparent, solid, up-slope, down-slope.
   87                        	;
   88                        	; Typically this flag information is set by the map conversion tools from a
   89                        	; seperate "collision" map layer.
   90                        	;
   91                        	
   92               0000     		.ifndef	BLKDEF_CHR_FLAG
   94                        		.endif
   95                        	
   96                        	;
   97                        	; Block definitions are accessed in MPR2 ($4000..$5FFF), and must not cross
   98                        	; the bank boundary.
   99                        	;
  100                        	; When working this way, 8 pointers in ZP are used to access the individual
  101                        	; bytes in the block definition. This is fine when using a regular map on a
  102                        	; PC Engine, but it is awfully slow when using multi-screen maps or drawing
  103                        	; maps on both VDC chips in a SuperGRAFX because the pointer values must be
  104                        	; constantly changed.
  105                        	;
  106                        	; When using multi-screen maps, or when developing a SuperGRAFX game, or if
  107                        	; developing a CDROM game, then it is usually preferable to store the block
  108                        	; definitions with 2KByte alignment, especially if they are normally stored
  109                        	; compressed and then decompressed into a 2KByte buffer in RAM when needed.
  110                        	;
  111                        	; This option controls whether the definitions are stored 2KByte aligned or
  112                        	; if pointers should be used instead.
  113                        	;
  114                        	
  115               0000     		.ifndef	BLKDEF_POINTERS
  117                        		.endif
  118                        	
  119                        	;
  120                        	; Add a timing bar to the scroll_map() to see how long the drawing takes?
  121                        	;
  122                        	
  123               0000     		.ifndef	BLKMAP_TIMETEST
  125                        		.endif
  126                        	
  127                        	;
  128                        	;
  129                        	;
  130                        	
  131               0000     		.if	BLKDEF_POINTERS
  144                        		.else
  145                        	
  146                        		; If the block definititions are 2KByte aligned.
  147                        	
  148               4000     	BLK_4000_TL_L	=	$4000
  149               4100     	BLK_4000_TR_L	=	$4100
  150               4200     	BLK_4000_BL_L	=	$4200
  151               4300     	BLK_4000_BR_L	=	$4300
  152               4400     	BLK_4000_TL_H	=	$4400
  153               4500     	BLK_4000_TR_H	=	$4500
  154               4600     	BLK_4000_BL_H	=	$4600
  155               4700     	BLK_4000_BR_H	=	$4700
  156                        	
  157               4800     	BLK_4800_TL_L	=	$4800
  158               4900     	BLK_4800_TR_L	=	$4900
  159               4A00     	BLK_4800_BL_L	=	$4A00
  160               4B00     	BLK_4800_BR_L	=	$4B00
  161               4C00     	BLK_4800_TL_H	=	$4C00
  162               4D00     	BLK_4800_TR_H	=	$4D00
  163               4E00     	BLK_4800_BL_H	=	$4E00
  164               4F00     	BLK_4800_BR_H	=	$4F00
  165                        	
  166               5000     	BLK_5000_TL_L	=	$5000
  167               5100     	BLK_5000_TR_L	=	$5100
  168               5200     	BLK_5000_BL_L	=	$5200
  169               5300     	BLK_5000_BR_L	=	$5300
  170               5400     	BLK_5000_TL_H	=	$5400
  171               5500     	BLK_5000_TR_H	=	$5500
  172               5600     	BLK_5000_BL_H	=	$5600
  173               5700     	BLK_5000_BR_H	=	$5700
  174                        	
  175               5800     	BLK_5800_TL_L	=	$5800
  176               5900     	BLK_5800_TR_L	=	$5900
  177               5A00     	BLK_5800_BL_L	=	$5A00
  178               5B00     	BLK_5800_BR_L	=	$5B00
  179               5C00     	BLK_5800_TL_H	=	$5C00
  180               5D00     	BLK_5800_TR_H	=	$5D00
  181               5E00     	BLK_5800_BL_H	=	$5E00
  182               5F00     	BLK_5800_BR_H	=	$5F00
  183                        	
  184                        		.endif
  185                        	
  186               0080     	MAP_UNALIGNED_X	=	$80
  187               0040     	MAP_UNALIGNED_Y	=	$40
  188                        	
  189                        	;
  190                        	;
  191                        	;
  192                        	
  193               2BB1     			.bss
  194                        	
  195                        	; **************
  196                        	; 8-byte (or 2-byte) entry for each SCREEN in the MULTI_MAP.
  197                        	
  198               0000     			.rsset	0
  199               0000     		.if	BLKDEF_POINTERS
  202                        		.else
  203               0000     	SCR_MAP_PAGE	.rs	1	; 256-byte aligned.
  204               0001     	SCR_MAP_BANK	.rs	1
  205               0002     	SCR_BLK_PAGE	.rs	1	; >$4000, >$4800, >$5000, or >$5800.
  206               0003     	SCR_BLK_BANK	.rs	1
  207               0004     	SCR_TBL_PAGE	.rs	1	; 256-byte aligned.
  208               0005     	SCR_TBL_BANK	.rs	1
  209               0006     	SCR_CHR_12	.rs	1	; Which CHR banks are used by the BLK, with
  210               0007     	SCR_CHR_34	.rs	1	; a max of 16 CHR banks per MULTI_MAP.
  211                        		.endif
  212                        	
  213                        			; A simple macro to help build a multi-screen map.
  214                        	
  215               0000     		.ifndef	SCREEN
  224                        		.endif
  225                        	
  226    F8:2BB1             	map_blk_flag:	ds	1	; Returned from _get_map_block().
  227    F8:2BB2             	map_blk_mask:	ds	1	; Returned from _get_map_block().
  228                        	
  229                        	; **************
  230                        	; 16-bytes of VDC blkmap info.
  231                        	;
  232                        	; N.B. MUST be 16-bytes before the SGX versions to use PCE_VDC_OFFSET.
  233                        	
  234    F8:2BB3             	vdc_old_chr_x:	ds	1	; Previous top-left X in CHR (lo-byte only).
  235    F8:2BB4             	vdc_old_chr_y:	ds	1	; Previous top-left Y in CHR (lo-byte only).
  236                        	
  237    F8:2BB5             	vdc_tbl_addr:	ds	2	; 256-byte aligned.
  238    F8:2BB7             	vdc_tbl_bank:	ds	1
  239                        	
  240    F8:2BB8             	vdc_blk_addr:	ds	2	; 2KBytes of data, 256-byte aligned.
  241    F8:2BBA             	vdc_blk_bank:	ds	1
  242                        	
  243    F8:2BBB             	vdc_map_addr:	ds	2	; Mapped into MPR3..MPR5, max 16KBytes.
  244    F8:2BBD             	vdc_map_bank:	ds	1
  245                        	
  246    F8:2BBE             	vdc_scr_addr:	ds	2	; 8KByte maximum size.
  247    F8:2BC0             	vdc_scr_bank:	ds	1
  248    F8:2BC1             	vdc_scr_chr12:	ds	1	; Which CHR banks are used by the BLK, with
  249    F8:2BC2             	vdc_scr_chr34:	ds	1	; a max of 16 banks per multi-screen map.
  250                        	
  251               0001     		.if	SUPPORT_SGX
  252                        	
  253                        	; **************
  254                        	; 16-bytes of SGX blkmap info.
  255                        	;
  256                        	; N.B. MUST be 16-bytes after the VDC versions to use SGX_VDC_OFFSET.
  257                        	
  258    F8:2BC3             	sgx_old_chr_x:	ds	1	; Previous top-left X in CHR (lo-byte only).
  259    F8:2BC4             	sgx_old_chr_y:	ds	1	; Previous top-left Y in CHR (lo-byte only).
  260                        	
  261    F8:2BC5             	sgx_tbl_addr:	ds	2	; 256-byte aligned.
  262    F8:2BC7             	sgx_tbl_bank:	ds	1
  263                        	
  264    F8:2BC8             	sgx_blk_addr:	ds	2	; 2KBytes of data, 256-byte aligned.
  265    F8:2BCA             	sgx_blk_bank:	ds	1
  266                        	
  267    F8:2BCB             	sgx_map_addr:	ds	2	; Mapped into MPR3..MPR4, max 8KBytes.
  268    F8:2BCD             	sgx_map_bank:	ds	1
  269                        	
  270    F8:2BCE             	sgx_scr_addr:	ds	2	; 8KByte maximum size.
  271    F8:2BD0             	sgx_scr_bank:	ds	1
  272    F8:2BD1             	sgx_scr_chr12:	ds	1	; Which CHR banks are used by the BLK, with
  273    F8:2BD2             	sgx_scr_chr34:	ds	1	; a max of 16 banks per multi-screen map.
  274                        	
  275                        		.endif	SUPPORT_SGX
  276                        	
  277               0000     		.if	0
  310                        		.endif	0
  311                        	
  312                        	; **************
  313                        	; Aliases for the asm variable names in HuCC.
  314                        	;
  315                        	
  316               0001     		.ifdef	HUCC
  317                        	
  318    F8:2BD3             	_map_blk_flag	.alias	map_blk_flag
  319    F8:2BD3             	_map_blk_mask	.alias	map_blk_mask
  320                        	
  321    F8:2BD3             	_vdc_map_draw_w	.alias	vdc_map_draw_w
  322    F8:2BD3             	_vdc_map_draw_h	.alias	vdc_map_draw_h
  323    F8:2BD3             	_vdc_map_pxl_x	.alias	vdc_map_pxl_x
  324    F8:2BD3             	_vdc_map_pxl_y	.alias	vdc_map_pxl_y
  325    F8:2BD3             	_vdc_old_chr_x	.alias	vdc_old_chr_x
  326    F8:2BD3             	_vdc_old_chr_y	.alias	vdc_old_chr_y
  327    F8:2BD3             	_vdc_tbl_addr	.alias	vdc_tbl_addr
  328    F8:2BD3             	_vdc_tbl_bank	.alias	vdc_tbl_bank
  329    F8:2BD3             	_vdc_blk_addr	.alias	vdc_blk_addr
  330    F8:2BD3             	_vdc_blk_bank	.alias	vdc_blk_bank
  331    F8:2BD3             	_vdc_map_line_w	.alias	vdc_map_line_w
  332    F8:2BD3             	_vdc_map_scrn_w	.alias	vdc_map_scrn_w
  333    F8:2BD3             	_vdc_map_addr	.alias	vdc_map_addr
  334    F8:2BD3             	_vdc_map_bank	.alias	vdc_map_bank
  335    F8:2BD3             	_vdc_scr_addr	.alias	vdc_scr_addr
  336    F8:2BD3             	_vdc_scr_bank	.alias	vdc_scr_bank
  337    F8:2BD3             	_vdc_scr_chr12	.alias	vdc_scr_chr12
  338    F8:2BD3             	_vdc_scr_chr34	.alias	vdc_scr_chr34
  339                        	
  340               0001     		.if	SUPPORT_SGX
  341    F8:2BD3             	_sgx_map_draw_w	.alias	sgx_map_draw_w
  342    F8:2BD3             	_sgx_map_draw_h	.alias	sgx_map_draw_h
  343    F8:2BD3             	_sgx_map_pxl_x	.alias	sgx_map_pxl_x
  344    F8:2BD3             	_sgx_map_pxl_y	.alias	sgx_map_pxl_y
  345    F8:2BD3             	_sgx_old_chr_x	.alias	sgx_old_chr_x
  346    F8:2BD3             	_sgx_old_chr_y	.alias	sgx_old_chr_y
  347    F8:2BD3             	_sgx_tbl_addr	.alias	sgx_tbl_addr
  348    F8:2BD3             	_sgx_tbl_bank	.alias	sgx_tbl_bank
  349    F8:2BD3             	_sgx_blk_addr	.alias	sgx_blk_addr
  350    F8:2BD3             	_sgx_blk_bank	.alias	sgx_blk_bank
  351    F8:2BD3             	_sgx_map_line_w	.alias	sgx_map_line_w
  352    F8:2BD3             	_sgx_map_scrn_w	.alias	sgx_map_scrn_w
  353    F8:2BD3             	_sgx_map_addr	.alias	sgx_map_addr
  354    F8:2BD3             	_sgx_map_bank	.alias	sgx_map_bank
  355    F8:2BD3             	_sgx_scr_addr	.alias	sgx_scr_addr
  356    F8:2BD3             	_sgx_scr_bank	.alias	sgx_scr_bank
  357    F8:2BD3             	_sgx_scr_chr12	.alias	sgx_scr_chr12
  358    F8:2BD3             	_sgx_scr_chr34	.alias	sgx_scr_chr34
  359                        		.endif	SUPPORT_SGX
  360                        	
  361                        		.endif	HUCC
  362                        	
  363                        	; **************
  364                        	; Temporary variables for drawing, using common zero-page locations.
  365                        	;
  366                        	
  367               20F8     	map_bat_x	=	_al	; Set by draw_map(), scroll_map() if drawing
  368               20F9     	map_bat_y	=	_ah	; aligned, or as parameters to blit_map().
  369                        	
  370               20FA     	map_draw_w	=	_bl	; Set by draw_map(), scroll_map(), but given
  371               20FB     	map_draw_h	=	_bh	; as parameters to blit_map().
  372                        	
  373               20FC     	map_pxl_x	=	_cx	; Set by draw_map(), scroll_map() and also by
  374               20FC     	map_chr_x	=	_cl	; blit__map(), from current vdc_map_pxl_x.
  375               20FD     	map_scrn_x	=	_ch
  376                        	
  377               20FE     	map_pxl_y	=	_dx	; Set by draw_map(), scroll_map() and also by
  378               20FE     	map_chr_y	=	_dl	; blit__map(), from current vdc_map_pxl_y.
  379               20FF     	map_scrn_y	=	_dh
  380                        	
  381               20EE     	map_line	=	_si	; Start of map data line being drawn.
  382                        	
  383               2000     	map_count	=	__temp + 0
  384               2001     	map_drawn	=	__temp + 1
  385                        	
  386               E937     			.code
  387                        	
  388                        	
  389                        	
  390    17:D241             	blkmap_group	.procgroup
  391                        	
  392                        	; ***************************************************************************
  393                        	; ***************************************************************************
  394                        	;
  395                        	; _set_blocks - Initialize the block definition pointers.
  396                        	; _sgx_set_blocks - Initialize the block definition pointers.
  397                        	;
  398                        	; void __fastcall set_blocks( unsigned char __far *blk_def<vdc_blk_bank:vdc_blk_addr>, unsigned char __far *flg_def<vdc_tbl_bank:vdc_tbl_addr>, unsigned char number_of_blk<_al> );
  399                        	; void __fastcall sgx_set_blocks( unsigned char __far *blk_def<sgx_blk_bank:sgx_blk_addr>, unsigned char __far *flg_def<sgx_tbl_bank:sgx_tbl_addr>, unsigned char number_of_blk<_al> );
  400                        	;
  401                        	
  402               0001     		.if	SUPPORT_SGX
  403                        	
  404    17:D241             			.proc	_sgx_set_blocks.3
  405                        	
  406    17:D241  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  407    17:D243  F0         			db	$F0			; Turn "clx" into a "beq".
  408                        	
  409    17:D244             			.ref	_set_blocks.3
  410                        			.endp
  411                        		.endif
  412                        	
  413    17:D244             			.proc	_set_blocks.3
  414                        	
  415    17:D244  82         			clx				; Offset to PCE VDC.
  416                        	
  417    17:D245  BD B6 2B   			lda.h	vdc_tbl_addr, x		; Remap the address to MPR2.
  418    17:D248  29 1F      			and	#$1F
  419    17:D24A  09 40      			ora	#$40
  420    17:D24C  9D B6 2B   			sta.h	vdc_tbl_addr, x
  421                        	
  422    17:D24F  BD B9 2B   			lda.h	vdc_blk_addr, x		; Remap the address to MPR2.
  423    17:D252  29 1F      			and	#$1F
  424    17:D254  09 40      			ora	#$40
  425    17:D256  9D B9 2B   			sta.h	vdc_blk_addr, x
  426                        	
  427               0000     		.if	BLKDEF_POINTERS
  479                        		.endif	BLKDEF_POINTERS
  480                        	
  481                        			leave
         17:D259  4C EF FF   			jmp	leave_proc
  482                        	
  483                        			.endp
  484                        	
  485                        	
  486                        	
  487                        	; ***************************************************************************
  488                        	; ***************************************************************************
  489                        	;
  490                        	; _draw_map - Draw the entire screen at the current coordinates.
  491                        	; _sgx_draw_map - Draw the entire screen at the current coordinates.
  492                        	;
  493                        	; void __fastcall draw_map( void );
  494                        	; void __fastcall sgx_draw_map( void );
  495                        	;
  496                        	
  497               0001     		.if	SUPPORT_SGX
  498                        	
  499    17:D25C             	_sgx_draw_map	.proc
  500                        	
  501    17:D25C  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  502    17:D25E  F0         			db	$F0			; Turn "clx" into a "beq".
  503                        	
  504    17:D25F             			.ref	_draw_map
  505                        			.endp
  506                        		.endif
  507                        	
  508    17:D25F             	_draw_map	.proc
  509                        	
  510    17:D25F  82         			clx				; Offset to PCE VDC.
  511                        	
  512    17:D260  43 04      			tma2				; Preserve MPR2..MPR4.
  513    17:D262  48         			pha
  514    17:D263  43 08      			tma3
  515    17:D265  48         			pha
  516    17:D266  43 10      			tma4
  517    17:D268  48         			pha
  518               0000     		.if	BLKMAP_LARGEMAP
  521                        		.endif
  522                        	
  523    17:D269  20 6B D3   			jsr	map_pxl_2_chr		; Set up the draw coordinates.
  524                        	
  525    17:D26C  A5 FC      			lda	<map_chr_x		; Reset previous X position.
  526    17:D26E  9D B3 2B   			sta	vdc_old_chr_x, x
  527                        	
  528    17:D271  A5 FE      			lda	<map_chr_y		; Reset previous Y position,
  529    17:D273  1A         			inc	a			; ready to draw multiple rows.
  530    17:D274  9D B4 2B   			sta	vdc_old_chr_y, x
  531                        	
  532    17:D277  BD 7C 26   			lda	vdc_map_draw_w, x	; Draw the whole screen.
  533    17:D27A  85 FA      			sta	<map_draw_w
  534    17:D27C  BD 7D 26   			lda	vdc_map_draw_h, x
  535    17:D27F  85 FB      			sta	<map_draw_h
  536                        	
  537    17:D281  20 C1 D5   			jsr	map_scroll_y		; Draw N row of CHR to the BAT.
  538                        	
  539               0000     		.if	BLKMAP_LARGEMAP
  542                        		.endif
  543    17:D284  68         			pla				; Restore MPR2..MPR4.
  544    17:D285  53 10      			tam4
  545    17:D287  68         			pla
  546    17:D288  53 08      			tam3
  547    17:D28A  68         			pla
  548    17:D28B  53 04      			tam2
  549                        	
  550                        			leave
         17:D28D  4C EF FF   			jmp	leave_proc
  551                        	
  552                        			.endp
  553                        	
  554                        	
  555                        	
  556                        	; ***************************************************************************
  557                        	; ***************************************************************************
  558                        	;
  559                        	; _scroll_map - Draw a single row of CHR into the BAT to update the edge.
  560                        	; _sgx_scroll_map - Draw a single row of CHR into the BAT to update the edge.
  561                        	;
  562                        	; void __fastcall scroll_map( void );
  563                        	; void __fastcall sgx_scroll_map( void );
  564                        	;
  565                        	
  566               0001     		.if	SUPPORT_SGX
  567                        	
  568    17:D290             	_sgx_scroll_map	.proc
  569                        	
  570    17:D290  A2 10      			ldx	#SGX_VDC_OFFSET		; Offset to SGX VDC.
  571    17:D292  F0         			db	$F0			; Turn "clx" into a "beq".
  572                        	
  573    17:D293             			.ref	_scroll_map
  574                        			.endp
  575                        		.endif
  576                        	
  577    17:D293             	_scroll_map	.proc
  578                        	
  579    17:D293  82         			clx				; Offset to PCE VDC.
  580                        	
  581               0000     		.if	BLKMAP_TIMETEST
  587                        		.endif
  588                        	
  589    17:D294  43 04      			tma2				; Preserve MPR2..MPR4.
  590    17:D296  48         			pha
  591    17:D297  43 08      			tma3
  592    17:D299  48         			pha
  593    17:D29A  43 10      			tma4
  594    17:D29C  48         			pha
  595               0000     		.if	BLKMAP_LARGEMAP
  598                        		.endif
  599                        	
  600    17:D29D  20 6B D3   			jsr	map_pxl_2_chr		; Set up the draw coordinates.
  601                        	
  602               0001     		.if	BLKMAP_MULTISCR
  603    17:D2A0  A5 FD      			lda	<map_scrn_x		; map_scroll_x can change this!
  604    17:D2A2  48         			pha
  605                        		.endif
  606                        	
  607    17:D2A3  BD 7D 26   			lda	vdc_map_draw_h, x	; Draw new LHS or RHS if needed.
  608    17:D2A6  85 FB      			sta	<map_draw_h
  609                        	;		lda	#1			; map_scroll_x only ever draws a
  610                        	;		sta	<map_draw_w		; single column.
  611    17:D2A8  20 A2 D4   			jsr	map_scroll_x
  612                        	
  613    17:D2AB  BD B3 2B   			lda	vdc_old_chr_x, x	; Restore map_chr_x which could
  614    17:D2AE  85 FC      			sta	<map_chr_x		; be changed by map_scroll_x.
  615                        	
  616               0001     		.if	BLKMAP_MULTISCR
  617    17:D2B0  68         			pla				; Restore before map_scroll_y.
  618    17:D2B1  85 FD      			sta	<map_scrn_x
  619                        		.endif
  620                        	
  621    17:D2B3  BD 7C 26   			lda	vdc_map_draw_w, x	; Draw new TOP or BTM if needed.
  622    17:D2B6  85 FA      			sta	<map_draw_w
  623    17:D2B8  A9 01      			lda	#1
  624    17:D2BA  85 FB      			sta	<map_draw_h
  625    17:D2BC  20 C1 D5   			jsr	map_scroll_y
  626                        	
  627               0000     		.if	BLKMAP_LARGEMAP
  630                        		.endif
  631    17:D2BF  68         			pla				; Restore MPR2..MPR4.
  632    17:D2C0  53 10      			tam4
  633    17:D2C2  68         			pla
  634    17:D2C3  53 08      			tam3
  635    17:D2C5  68         			pla
  636    17:D2C6  53 04      			tam2
  637                        	
  638               0000     		.if	BLKMAP_TIMETEST
  640                        		.endif
  641                        	
  642                        			leave
         17:D2C8  4C EF FF   			jmp	leave_proc
  643                        	
  644                        			.endp
  645                        	
  646                        	
  647                        	
  648                        	; ***************************************************************************
  649                        	; ***************************************************************************
  650                        	;
  651                        	; _blit_map - Draw a map rectangle to specific BAT coordinates.
  652                        	; _sgx_blit_map - Draw a map rectangle to specific BAT coordinates.
  653                        	;
  654                        	; void __fastcall blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
  655                        	; void __fastcall sgx_blit_map( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
  656                        	;
  657                        	; Normally you'd just use _draw_map() and _scroll_map(), but for those folks
  658                        	; who really wish to take manual control, you can use this.
  659                        	;
  660                        	
  661               0001     		.if	SUPPORT_SGX
  662                        	
  663                        	_sgx_blit_map	.proc
  669                        			.endp
  670                        		.endif
  671                        	
  672    17:D2CB             	_blit_map	.proc
  673                        	
  674    17:D2CB  82         			clx				; Offset to PCE VDC.
  675                        	
  676    17:D2CC  BD C0 2B   			lda	vdc_scr_bank, x		; Skip this if a multi-screen
  677    17:D2CF  D0 36      			bne	.exit			; blkmap.
  678                        	
  679    17:D2D1  43 04      			tma2				; Preserve MPR2..MPR4.
  680    17:D2D3  48         			pha
  681    17:D2D4  43 08      			tma3
  682    17:D2D6  48         			pha
  683    17:D2D7  43 10      			tma4
  684    17:D2D9  48         			pha
  685               0000     		.if	BLKMAP_LARGEMAP
  688                        		.endif
  689                        	
  690    17:D2DA  BD 84 26   			lda	vdc_map_option, x	; Preserve current map options.
  691    17:D2DD  48         			pha
  692    17:D2DE  09 C0      			ora	#MAP_UNALIGNED_X | MAP_UNALIGNED_Y
  693    17:D2E0  9D 84 26   			sta	vdc_map_option, x
  694                        	
  695    17:D2E3  20 6B D3   			jsr	map_pxl_2_chr		; Set up the draw coordinates.
  696                        	
  697    17:D2E6  A5 FA      			lda	<map_draw_w		; Are we drawing just 1 column?
  698    17:D2E8  C9 01      			cmp	#1
  699    17:D2EA  F0 1E      			beq	.draw_column
  700                        	
  701                        			; Draw N rows.
  702                        	
  703    17:D2EC  A5 FC      	.draw_rows:	lda	<map_chr_x		; Reset previous X position.
  704    17:D2EE  9D B3 2B   			sta	vdc_old_chr_x, x
  705                        	
  706    17:D2F1  A5 FE      			lda	<map_chr_y		; Reset previous Y position,
  707    17:D2F3  1A         			inc	a			; ready to draw rows upwards.
  708    17:D2F4  9D B4 2B   			sta	vdc_old_chr_y, x
  709                        	
  710    17:D2F7  20 C1 D5   			jsr	map_scroll_y		; Draw a row of CHR to the BAT.
  711                        	
  712                        			; Drawing completed.
  713                        	
  714    17:D2FA  68         	.finished:	pla				; Restore previous map options.
  715    17:D2FB  9D 84 26   			sta	vdc_map_option, x
  716                        	
  717               0000     		.if	BLKMAP_LARGEMAP
  720                        		.endif
  721    17:D2FE  68         			pla				; Restore MPR2..MPR4.
  722    17:D2FF  53 10      			tam4
  723    17:D301  68         			pla
  724    17:D302  53 08      			tam3
  725    17:D304  68         			pla
  726    17:D305  53 04      			tam2
  727                        	
  728                        	.exit:		leave
         17:D307  4C EF FF   			jmp	leave_proc
  729                        	
  730                        			; Draw 1 column.
  731                        	
  732    17:D30A  A5 FC      	.draw_column:	lda	<map_chr_x		; Reset previous X position.
  733    17:D30C  1A         			inc	a			; ready to draw 1 column.
  734    17:D30D  9D B3 2B   			sta	vdc_old_chr_x, x
  735                        	
  736    17:D310  A5 FE      			lda	<map_chr_y		; Reset previous Y position.
  737    17:D312  9D B4 2B   			sta	vdc_old_chr_y, x
  738                        	
  739    17:D315  20 A2 D4   			jsr	map_scroll_x		; Draw a single column of CHR.
  740                        	
  741    17:D318  80 E0      			bra	.finished
  742                        	
  743                        			.endp
  744                        	
  745                        	
  746                        	
  747                        	; ***************************************************************************
  748                        	; ***************************************************************************
  749                        	;
  750                        	; _get_map_block - Get the block number used at a map pixel coordinate.
  751                        	; _sgx_get_map_block - Get the block number used at a map pixel coordinate.
  752                        	;
  753                        	; unsigned char __fastcall _get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
  754                        	; unsigned char __fastcall _sgx_get_map_block( unsigned int x<map_pxl_x>, unsigned int y<map_pxl_y> );
  755                        	;
  756                        	
  757               0001     		.if	SUPPORT_SGX
  758                        	
  759                        			.proc	_sgx_get_map_block.2
  765                        			.endp
  766                        		.endif
  767                        	
  768    17:D31A             			.proc	_get_map_block.2
  769                        	
  770    17:D31A  82         			clx				; Offset to PCE VDC.
  771                        	
  772    17:D31B  43 04      			tma2				; Preserve MPR2..MPR4.
  773    17:D31D  48         			pha
  774    17:D31E  43 08      			tma3
  775    17:D320  48         			pha
  776    17:D321  43 10      			tma4
  777    17:D323  48         			pha
  778               0000     		.if	BLKMAP_LARGEMAP
  781                        		.endif
  782                        	
  783    17:D324  20 7F D3   			jsr	xvt_pxl_2_chr		; Set up the query coordinates.
  784                        	
  785    17:D327  20 AD D3   			jsr	map_chr_2_data		; Page in the map address.
  786                        	
  787    17:D32A  B2 EC      			lda	[_bp]			; Read the BLK from the map.
  788    17:D32C  A8         			tay
  789                        	
  790    17:D32D  A5 FC      			lda	<map_chr_x		; Calc the BLK address offset
  791    17:D32F  4A         			lsr	a			; use depending upon even/odd
  792    17:D330  A5 FE      			lda	<map_chr_y		; CHR coordinates (not BAT to
  793    17:D332  29 01      			and	#1			; support unaligned drawing).
  794    17:D334  2A         			rol	a
  795    17:D335  09 04      			ora	#4			; Offset to BLK table top byte.
  796    17:D337  7D B9 2B   			adc.h	vdc_blk_addr, x		; What is the BLK data address?
  797    17:D33A  85 ED      			sta.h	<_bp			; $4000, $4800, $5000 or $5800.
  798    17:D33C  64 EC      			stz.l	<_bp
  799    17:D33E  B1 EC      			lda	[_bp], y		; Read the collision flags from
  800    17:D340  29 0C      			and	#%00001100		; the top byte of the CHR.
  801    17:D342  4A         			lsr	a
  802    17:D343  4A         			lsr	a
  803    17:D344  4A         			lsr	a			; Swizzle the bottom bit to get
  804    17:D345  90 02      			bcc	!+			; the same bit order as used in
  805    17:D347  09 02      			ora	#2			; .HALTMAP layer.
  806    17:D349  8D B1 2B   	!:		sta	map_blk_flag
  807                        	
  808    17:D34C  BD B7 2B   			lda	vdc_tbl_bank, x		; Is there a table of flags?
  809    17:D34F  F0 09      			beq	!+
  810    17:D351  53 08      			tam3
  811                        	;		inc	a
  812                        	;		tam4
  813                        	;		lda.l	vdc_tbl_addr, x
  814                        	;		sta.l	<_bp
  815    17:D353  BD B6 2B   			lda.h	vdc_tbl_addr, x		; If so, it must be aligned!
  816    17:D356  85 ED      			sta.h	<_bp
  817    17:D358  B1 EC      			lda	[_bp], y		; Read the .MASKMAP/.OVERMAP
  818    17:D35A  8D B2 2B   	!:		sta	map_blk_mask		; flag value for this BLK.
  819                        	
  820               0000     		.if	BLKMAP_LARGEMAP
  823                        		.endif
  824    17:D35D  68         			pla				; Restore MPR2..MPR4.
  825    17:D35E  53 10      			tam4
  826    17:D360  68         			pla
  827    17:D361  53 08      			tam3
  828    17:D363  68         			pla
  829    17:D364  53 04      			tam2
  830                        	
  831    17:D366  02         			sxy				; Put the BLK number in X.
  832    17:D367  C2         			cly
  833                        	
  834                        			leave				; All done!
         17:D368  4C EF FF   			jmp	leave_proc
  835                        	
  836                        			.endp
  837                        	
  838                        	
  839                        	
  840                        	; ***************************************************************************
  841                        	; ***************************************************************************
  842                        	;
  843                        	; map_pxl_2_chr - Convert PXL to CHR, BLK and SCR coordinates.
  844                        	;
  845                        	
  846    17:D36B  BD 82 26   	map_pxl_2_chr:	lda.l	vdc_map_pxl_y, x	; Get current map Y coordinate.
  847    17:D36E  85 FE      			sta.l	<map_pxl_y
  848    17:D370  BD 83 26   			lda.h	vdc_map_pxl_y, x
  849    17:D373  85 FF      			sta.h	<map_pxl_y
  850                        	
  851    17:D375  BD 80 26   			lda.l	vdc_map_pxl_x, x	; Get current map X coordinate.
  852    17:D378  85 FC      			sta.l	<map_pxl_x
  853    17:D37A  BD 81 26   			lda.h	vdc_map_pxl_x, x
  854    17:D37D  85 FD      			sta.h	<map_pxl_x
  855                        	
  856    17:D37F  A5 FD      	xvt_pxl_2_chr:	lda.h	<map_pxl_x		; Xvert map_pxl_x to map_chr_x.
  857               0001     		.if	BLKMAP_MULTISCR
  858    17:D381  A8         			tay				; Xvert map_pxl_x to map_scrn_x.
  859    17:D382  3C 77 26   			bit	vdc_bat_width, x
  860    17:D385  70 03      			bvs	.w64
  861    17:D387  10 02      			bpl	.w32
  862    17:D389  4A         	.w128:		lsr	a
  863    17:D38A  4A         	.w64:		lsr	a
  864    17:D38B  85 FD      	.w32:		sta	<map_scrn_x
  865    17:D38D  98         			tya
  866                        		.endif
  867    17:D38E  4A         			lsr	a
  868    17:D38F  66 FC      			ror.l	<map_pxl_x
  869    17:D391  4A         			lsr	a
  870    17:D392  66 FC      			ror.l	<map_pxl_x
  871    17:D394  4A         			lsr	a
  872    17:D395  66 FC      			ror.l	<map_pxl_x		; Max map width is 256 CHR.
  873                        	
  874    17:D397  A5 FF      			lda.h	<map_pxl_y		; Xvert map_pxl_y to map_chr_y.
  875               0001     		.if	BLKMAP_MULTISCR
  876    17:D399  A8         			tay				; Xvert map_pxl_y to map_scrn_y.
  877    17:D39A  3C 78 26   			bit	vdc_bat_height, x
  878    17:D39D  50 01      			bvc	.h32
  879    17:D39F  4A         	.h64:		lsr	a
  880    17:D3A0  85 FF      	.h32:		sta	<map_scrn_y
  881    17:D3A2  98         			tya
  882                        		.endif
  883    17:D3A3  4A         			lsr	a
  884    17:D3A4  66 FE      			ror.l	<map_pxl_y
  885    17:D3A6  4A         			lsr	a
  886    17:D3A7  66 FE      			ror.l	<map_pxl_y
  887    17:D3A9  4A         			lsr	a
  888    17:D3AA  66 FE      			ror.l	<map_pxl_y		; Max map width is 256 CHR.
  889                        	
  890    17:D3AC  60         			rts
  891                        	
  892                        	
  893                        	
  894                        	; ***************************************************************************
  895                        	; ***************************************************************************
  896                        	;
  897                        	; map_chr_2_data - Page in the MAP address for the CHR coordinates.
  898                        	;
  899                        	
  900    17:D3AD             	map_chr_2_data:
  901                        	
  902               0001     		.if	BLKMAP_MULTISCR
  903                        	
  904                        			; Initialization for a multi-screen map.
  905                        	
  906    17:D3AD  BD C0 2B   			lda	vdc_scr_bank, x		; Skip this if regular blkmap.
  907    17:D3B0  F0 3A      			beq	.regular
  908                        	
  909    17:D3B2  A5 FC      	.multiscreen:	lda	<map_chr_x		; Compare old_x with cur_x.
  910    17:D3B4  3D 79 26   			and	vdc_bat_x_mask, x
  911    17:D3B7  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
  912                        	
  913    17:D3B9  A5 FE      			lda	<map_chr_y		; Save BAT Y chr coordinate.
  914    17:D3BB  3D 7A 26   			and	vdc_bat_y_mask, x
  915    17:D3BE  85 F9      			sta	<map_bat_y
  916    17:D3C0  4A         			lsr	a			; Map BLK Y coordinate.
  917    17:D3C1  85 EF      			sta.h	<map_line
  918    17:D3C3  62         			cla
  919    17:D3C4  3C 77 26   			bit	vdc_bat_width, x
  920    17:D3C7  30 08      			bmi	.w128
  921    17:D3C9  70 03      			bvs	.w64
  922    17:D3CB  46 EF      	.w32:		lsr.h	<map_line
  923    17:D3CD  6A         			ror	a
  924    17:D3CE  46 EF      	.w64:		lsr.h	<map_line
  925    17:D3D0  6A         			ror	a
  926    17:D3D1  46 EF      	.w128:		lsr.h	<map_line
  927    17:D3D3  6A         			ror	a
  928    17:D3D4  46 EF      			lsr.h	<map_line		; Hi-byte of (BLK Y * width).
  929    17:D3D6  6A         			ror	a
  930    17:D3D7  85 EE      			sta.l	<map_line		; Lo-byte of (BLK Y * width).
  931                        	
  932    17:D3D9  20 2D D4   			jsr	map_set_screen		; Put BLK & MAP in MPR2-MPR5.
  933                        	
  934    17:D3DC  A5 F8      			lda	<map_bat_x		; Calc map data pointer.
  935    17:D3DE  4A         			lsr	a			; Map BLK X coordinate.
  936    17:D3DF  05 EE      			ora.l	<map_line
  937    17:D3E1  85 EC      			sta.l	<_bp
  938    17:D3E3  A5 EF      			lda.h	<map_line
  939    17:D3E5  18         			clc
  940    17:D3E6  7D BC 2B   			adc.h	vdc_map_addr, x		; N.B. 256-byte aligned!
  941    17:D3E9  85 ED      			sta.h	<_bp
  942                        	
  943    17:D3EB  60         			rts
  944                        	
  945                        		.endif	BLKMAP_MULTISCR
  946                        	
  947                        			; Initialization for a regular map.
  948                        	
  949    17:D3EC  A5 FC      	.regular:	lda	<map_chr_x		; Compare old_x with cur_x.
  950                        	;		bit	vdc_map_option, x	; Set bit7 to disable aligning
  951                        	;		bmi	!+			; BAT X with the map X.
  952    17:D3EE  3D 79 26   			and	vdc_bat_x_mask, x
  953    17:D3F1  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
  954                        	
  955    17:D3F3  A5 FE      	!:		lda	<map_chr_y		; A = map CHR Y coordinate.
  956    17:D3F5  A8         			tay
  957    17:D3F6  4A         			lsr	a
  958    17:D3F7  42         			say				; Y = map BLK Y coordinate.
  959                        	
  960                        	;		bit	vdc_map_option, x	; Set bit6 to disable aligning
  961                        	;		bvs	!+			; BAT Y with the map Y.
  962    17:D3F8  3D 7A 26   			and	vdc_bat_y_mask, x
  963    17:D3FB  85 F9      			sta	<map_bat_y		; Save BAT Y chr coordinate.
  964                        	
  965               0000     		.if	BLKMAP_LARGEMAP
  970                        		.endif
  971                        	
  972    17:D3FD  BD 7E 26   	!:		lda	vdc_map_line_w, x	; Map width in BLK.
  973               0000     		.if	FAST_MULTIPLY
  986                        		.else
  987    17:D400  84 EF      			sty.h	<map_line		; Takes 144..176 cycles.
  988    17:D402  A0 08      			ldy	#8
  989    17:D404  4A         			lsr	a
  990    17:D405  85 EE      			sta.l	<map_line
  991    17:D407  62         			cla
  992    17:D408  90 03      			bcc	.rotate
  993    17:D40A  18         	.add:		clc
  994    17:D40B  65 EF      			adc.h	<map_line
  995    17:D40D  6A         	.rotate:	ror	a
  996    17:D40E  66 EE      			ror.l	<map_line		; Lo-byte of (BLK Y * width).
  997    17:D410  88         			dey
  998    17:D411  B0 F7      			bcs	.add
  999    17:D413  D0 F8      			bne	.rotate
 1000    17:D415  A8         			tay				; Hi-byte of (BLK Y * width).
 1001                        		.endif
 1002                        	
 1003    17:D416  A5 FC      	!:		lda	<map_chr_x		; Map CHR X coordinate.
 1004    17:D418  4A         			lsr	a			; Map BLK X coordinate.
 1005    17:D419  18         			clc
 1006    17:D41A  65 EE      			adc.l	<map_line		; Lo-byte of (BLK Y * width).
 1007    17:D41C  90 01      			bcc	!+
 1008    17:D41E  C8         			iny				; Hi-byte of (BLK Y * width).
 1009                        	
 1010    17:D41F  18         	!:		clc				; Calc map data pointer.
 1011    17:D420  7D BB 2B   			adc.l	vdc_map_addr, x
 1012    17:D423  85 EC      			sta.l	<_bp			; Maximum map size is 16KBytes
 1013    17:D425  98         			tya				; so we don't need to consider
 1014    17:D426  7D BC 2B   			adc.h	vdc_map_addr, x		; bank overflow.
 1015    17:D429  85 ED      			sta.h	<_bp
 1016                        	
 1017    17:D42B  80 66      			bra	map_set_banks		; Put BLK & MAP in MPR2-MPR5.
 1018                        	
 1019                        	
 1020                        	
 1021               0001     		.if	BLKMAP_MULTISCR
 1022                        	
 1023                        	; ***************************************************************************
 1024                        	; ***************************************************************************
 1025                        	;
 1026                        	; map_set_screen -
 1027                        	;
 1028                        	; Maximum X and Y dimension of 128 screens (32768 pixels).
 1029                        	; Maximum 8KByte total size of screen data (1024 screens).
 1030                        	;
 1031                        	
 1032    17:D42D  A4 FF      	map_set_screen:	ldy	<map_scrn_y		; Map SCR Y coordinate.
 1033    17:D42F  BD 7F 26   			lda	vdc_map_scrn_w, x	; Map width in SCREENS.
 1034                        	
 1035               0000     		.if	FAST_MULTIPLY
 1048                        		.else
 1049    17:D432  84 ED      			sty.h	<_bp			; Takes 144..176 cycles.
 1050    17:D434  A0 08      			ldy	#8
 1051    17:D436  4A         			lsr	a
 1052    17:D437  85 EC      			sta.l	<_bp
 1053    17:D439  62         			cla
 1054    17:D43A  90 03      			bcc	.rotate
 1055    17:D43C  18         	.add:		clc
 1056    17:D43D  65 ED      			adc.h	<_bp
 1057    17:D43F  6A         	.rotate:	ror	a
 1058    17:D440  66 EC      			ror.l	<_bp			; Lo-byte of (SCR Y * width).
 1059    17:D442  88         			dey
 1060    17:D443  B0 F7      			bcs	.add
 1061    17:D445  D0 F8      			bne	.rotate
 1062    17:D447  A8         			tay				; Hi-byte of (SCR Y * width).
 1063                        		.endif
 1064                        	
 1065    17:D448  A5 FD      			lda	<map_scrn_x		; Map SCR X coordinate.
 1066    17:D44A  18         			clc
 1067    17:D44B  65 EC      			adc.l	<_bp
 1068    17:D44D  90 01      			bcc	!+
 1069    17:D44F  C8         			iny
 1070                        	
 1071    17:D450  84 ED      	!:		sty.h	<_bp			; 2 bytes per screen entry, max
 1072    17:D452  0A         			asl	a			; 8KByte screen table.
 1073    17:D453  26 ED      			rol.h	<_bp
 1074               0001     		.if	BLKDEF_POINTERS == 0
 1075    17:D455  0A         			asl	a			; 8 bytes per screen entry when
 1076    17:D456  26 ED      			rol.h	<_bp			; not using BLK pointers.
 1077    17:D458  0A         			asl	a
 1078    17:D459  26 ED      			rol.h	<_bp
 1079                        		.endif
 1080                        	
 1081    17:D45B  7D BE 2B   			adc.l	vdc_scr_addr, x		; Calc screen data pointer.
 1082    17:D45E  85 EC      			sta.l	<_bp			; Maximum data size is 8KBytes
 1083    17:D460  A5 ED      			lda.h	<_bp			; so we don't need to consider
 1084    17:D462  7D BF 2B   			adc.h	vdc_scr_addr, x		; bank overflow.
 1085    17:D465  85 ED      			sta.h	<_bp
 1086                        	
 1087    17:D467  BD C0 2B   			lda	vdc_scr_bank, x		; Map the SCR data in MPR3..MPR4.
 1088    17:D46A  53 08      			tam3
 1089    17:D46C  1A         			inc	a
 1090    17:D46D  53 10      			tam4
 1091                        	
 1092    17:D46F  C2         			cly
 1093    17:D470  B1 EC      			lda	[_bp], y		; Get SCR_MAP_PAGE.
 1094    17:D472  9D BC 2B   			sta.h	vdc_map_addr, x
 1095    17:D475  C8         			iny
 1096    17:D476  B1 EC      			lda	[_bp], y		; Get SCR_MAP_BANK.
 1097    17:D478  9D BD 2B   			sta	vdc_map_bank, x
 1098                        	
 1099               0001     		.if	BLKDEF_POINTERS == 0
 1100    17:D47B  C8         			iny
 1101    17:D47C  B1 EC      			lda	[_bp], y		; Get SCR_BLK_PAGE.
 1102    17:D47E  9D B9 2B   			sta.h	vdc_blk_addr, x
 1103    17:D481  C8         			iny
 1104    17:D482  B1 EC      			lda	[_bp], y		; Get SCR_BLK_BANK.
 1105    17:D484  9D BA 2B   			sta	vdc_blk_bank, x
 1106    17:D487  C8         			iny
 1107    17:D488  B1 EC      			lda	[_bp], y		; Get SCR_TBL_PAGE.
 1108    17:D48A  9D B6 2B   			sta.h	vdc_tbl_addr, x
 1109    17:D48D  C8         			iny
 1110    17:D48E  B1 EC      			lda	[_bp], y		; Get SCR_TBL_BANK.
 1111    17:D490  9D B7 2B   			sta	vdc_tbl_bank, x
 1112               0000     		.if	0				; These are not currently used.
 1119                        		.endif
 1120                        		.endif
 1121                        	
 1122                        	;		lda	vdc_bat_width, x	; Set up the map width.
 1123                        	;		lsr	a			; This should have been set
 1124                        	;		sta	vdc_map_line_w, x	; with the multi-screen map.
 1125                        	
 1126                        	;		jmp	map_set_banks		; Put BLK & MAP in MPR2-MPR5.
 1127                        	
 1128                        			; Fall through to map_set_banks.
 1129                        	
 1130                        		.endif	BLKMAP_MULTISCR
 1131                        	
 1132                        	
 1133                        	
 1134                        	; ***************************************************************************
 1135                        	; ***************************************************************************
 1136                        	;
 1137                        	; map_set_banks - Put BLK & MAP in MPR2-MPR5.
 1138                        	;
 1139                        	
 1140    17:D493  BD BA 2B   	map_set_banks:	lda	vdc_blk_bank, x		; Put the BLK into MPR2.
 1141    17:D496  53 04      			tam2
 1142                        	
 1143    17:D498  BD BD 2B   			lda	vdc_map_bank, x		; Put the MAP into MPR3-MPR5.
 1144    17:D49B  53 08      			tam3
 1145    17:D49D  1A         			inc	a
 1146    17:D49E  53 10      			tam4
 1147               0000     		.if	BLKMAP_LARGEMAP
 1156                        		.endif
 1157                        	
 1158    17:D4A0  60         	!:		rts
 1159                        	
 1160                        	
 1161                        	
 1162                        	; ***************************************************************************
 1163                        	; ***************************************************************************
 1164                        	;
 1165                        	; map_scroll_x - Update the BAT when X coordinate changes.
 1166                        	;
 1167                        	; N.B. This will alter map_chr_x and map_scrn_x if moved in +ve direction!
 1168                        	;
 1169                        	; N.B. This only ever draws a single column!
 1170                        	;
 1171                        	
 1172    17:D4A1  60         	!no_change:	rts
 1173                        	
 1174    17:D4A2             	map_scroll_x:
 1175                        	
 1176               0001     		.if	BLKMAP_MULTISCR
 1177                        	
 1178                        			; Initialization for a multi-screen map.
 1179                        	
 1180    17:D4A2  BD C0 2B   			lda	vdc_scr_bank, x		; Skip this if regular blkmap.
 1181    17:D4A5  F0 56      			beq	.regular
 1182                        	
 1183    17:D4A7  A5 FC      	.multiscreen:	lda	<map_chr_x		; Compare old_x with cur_x.
 1184    17:D4A9  DD B3 2B   			cmp	vdc_old_chr_x, x
 1185               0001     		.if	BLKMAP_TIMETEST == 0
 1186    17:D4AC  F0 F3      			beq	!no_change-		; Do nothing if no change.
 1187                        		.endif
 1188    17:D4AE  9D B3 2B   			sta	vdc_old_chr_x, x
 1189    17:D4B1  30 11      			bmi	!+			; Test the sign of the change.
 1190                        	
 1191    17:D4B3  18         			clc				; Draw RHS if chr_x >= old_x.
 1192    17:D4B4  3D 79 26   			and	vdc_bat_x_mask, x
 1193    17:D4B7  7D 7C 26   			adc	vdc_map_draw_w, x	; Usually (SCR_WIDTH / 8) + 1.
 1194    17:D4BA  3A         			dec	a
 1195    17:D4BB  85 FC      			sta	<map_chr_x		; Update CHR X chr coordinate.
 1196    17:D4BD  3C 77 26   			bit	vdc_bat_width, x
 1197    17:D4C0  F0 02      			beq	!+
 1198    17:D4C2  E6 FD      			inc	<map_scrn_x		; Wrapped to the next screen.
 1199                        	
 1200    17:D4C4  3D 79 26   	!:		and	vdc_bat_x_mask, x
 1201    17:D4C7  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
 1202                        	
 1203    17:D4C9  A5 FE      			lda	<map_chr_y		; Save BAT Y chr coordinate.
 1204    17:D4CB  3D 7A 26   			and	vdc_bat_y_mask, x
 1205    17:D4CE  85 F9      			sta	<map_bat_y
 1206    17:D4D0  4A         			lsr	a			; Map BLK Y coordinate.
 1207    17:D4D1  85 EF      			sta.h	<map_line
 1208    17:D4D3  62         			cla
 1209    17:D4D4  3C 77 26   			bit	vdc_bat_width, x
 1210    17:D4D7  30 08      			bmi	.w128
 1211    17:D4D9  70 03      			bvs	.w64
 1212    17:D4DB  46 EF      	.w32:		lsr.h	<map_line
 1213    17:D4DD  6A         			ror	a
 1214    17:D4DE  46 EF      	.w64:		lsr.h	<map_line
 1215    17:D4E0  6A         			ror	a
 1216    17:D4E1  46 EF      	.w128:		lsr.h	<map_line
 1217    17:D4E3  6A         			ror	a
 1218    17:D4E4  46 EF      			lsr.h	<map_line		; Hi-byte of (BLK Y * width).
 1219    17:D4E6  6A         			ror	a
 1220    17:D4E7  85 EE      			sta.l	<map_line		; Lo-byte of (BLK Y * width).
 1221                        	
 1222    17:D4E9  20 2D D4   			jsr	map_set_screen		; Put BLK & MAP in MPR2-MPR5.
 1223                        	
 1224    17:D4EC  A5 F8      			lda	<map_bat_x		; Calc map data pointer.
 1225    17:D4EE  4A         			lsr	a			; Map BLK X coordinate.
 1226    17:D4EF  05 EE      			ora.l	<map_line
 1227    17:D4F1  85 EC      			sta.l	<_bp
 1228    17:D4F3  A5 EF      			lda.h	<map_line
 1229    17:D4F5  18         			clc
 1230    17:D4F6  7D BC 2B   			adc.h	vdc_map_addr, x		; N.B. 256-byte aligned!
 1231    17:D4F9  85 ED      			sta.h	<_bp
 1232                        	
 1233    17:D4FB  80 5D      			bra	.draw_col		; Now draw it.
 1234                        	
 1235                        		.endif	BLKMAP_MULTISCR
 1236                        	
 1237                        			; Initialization for a regular map.
 1238                        	
 1239    17:D4FD  A5 FC      	.regular:	lda	<map_chr_x		; Compare old_x with cur_x.
 1240    17:D4FF  DD B3 2B   			cmp	vdc_old_chr_x, x
 1241               0001     		.if	BLKMAP_TIMETEST == 0
 1242    17:D502  F0 9D      			beq	!no_change-		; Do nothing if no change.
 1243                        		.endif
 1244    17:D504  9D B3 2B   			sta	vdc_old_chr_x, x
 1245    17:D507  30 07      			bmi	!+			; Test the sign of the change.
 1246                        	
 1247    17:D509  18         			clc				; Draw RHS if chr_x >= old_x.
 1248    17:D50A  7D 7C 26   			adc	vdc_map_draw_w, x	; Usually (SCR_WIDTH / 8) + 1.
 1249    17:D50D  3A         			dec	a
 1250    17:D50E  85 FC      			sta	<map_chr_x		; Update CHR X chr coordinate.
 1251                        	
 1252    17:D510  3C 84 26   	!:		bit	vdc_map_option, x	; Set bit7 to disable aligning
 1253    17:D513  30 05      			bmi	!+			; BAT X with the map X.
 1254    17:D515  3D 79 26   			and	vdc_bat_x_mask, x
 1255    17:D518  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
 1256                        	
 1257    17:D51A  A5 FE      	!:		lda	<map_chr_y		; A = map CHR Y coordinate.
 1258    17:D51C  A8         			tay
 1259    17:D51D  4A         			lsr	a
 1260    17:D51E  42         			say				; Y = map BLK Y coordinate.
 1261                        	
 1262    17:D51F  3C 84 26   			bit	vdc_map_option, x	; Set bit6 to disable aligning
 1263    17:D522  70 05      			bvs	!+			; BAT Y with the map Y.
 1264    17:D524  3D 7A 26   			and	vdc_bat_y_mask, x
 1265    17:D527  85 F9      			sta	<map_bat_y		; Save BAT Y chr coordinate.
 1266                        	
 1267               0000     		.if	BLKMAP_LARGEMAP
 1272                        		.endif
 1273                        	
 1274    17:D529  BD 7E 26   	!:		lda	vdc_map_line_w, x	; Map width in BLK.
 1275               0000     		.if	FAST_MULTIPLY
 1288                        		.else
 1289    17:D52C  84 EF      			sty.h	<map_line		; Takes 144..176 cycles.
 1290    17:D52E  A0 08      			ldy	#8
 1291    17:D530  4A         			lsr	a
 1292    17:D531  85 EE      			sta.l	<map_line
 1293    17:D533  62         			cla
 1294    17:D534  90 03      			bcc	.rotate
 1295    17:D536  18         	.add:		clc
 1296    17:D537  65 EF      			adc.h	<map_line
 1297    17:D539  6A         	.rotate:	ror	a
 1298    17:D53A  66 EE      			ror.l	<map_line		; Lo-byte of (BLK Y * width).
 1299    17:D53C  88         			dey
 1300    17:D53D  B0 F7      			bcs	.add
 1301    17:D53F  D0 F8      			bne	.rotate
 1302    17:D541  A8         			tay				; Hi-byte of (BLK Y * width).
 1303                        		.endif
 1304                        	
 1305    17:D542  A5 FC      	!:		lda	<map_chr_x		; Map CHR X coordinate.
 1306    17:D544  4A         			lsr	a			; Map BLK X coordinate.
 1307    17:D545  18         			clc
 1308    17:D546  65 EE      			adc.l	<map_line		; Lo-byte of (BLK Y * width).
 1309    17:D548  90 01      			bcc	!+
 1310    17:D54A  C8         			iny				; Hi-byte of (BLK Y * width).
 1311                        	
 1312    17:D54B  18         	!:		clc				; Calc map data pointer.
 1313    17:D54C  7D BB 2B   			adc.l	vdc_map_addr, x
 1314    17:D54F  85 EC      			sta.l	<_bp			; Maximum map size is 16KBytes
 1315    17:D551  98         			tya				; so we don't need to consider
 1316    17:D552  7D BC 2B   			adc.h	vdc_map_addr, x		; bank overflow.
 1317    17:D555  85 ED      			sta.h	<_bp
 1318                        	
 1319    17:D557  20 93 D4   			jsr	map_set_banks		; Put BLK & MAP in MPR2-MPR5.
 1320                        	
 1321                        			; Draw the first part of the column.
 1322                        	
 1323    17:D55A  A5 F8      	.draw_col:	lda	<map_bat_x		; Set the BAT VRAM destination
 1324    17:D55C  85 F0      			sta.l	<_di			; coordinates.
 1325    17:D55E  A5 F9      			lda	<map_bat_y
 1326    17:D560  85 F1      			sta.h	<_di
 1327                        	
 1328    17:D562  5D 7A 26   			eor	vdc_bat_y_mask, x	; Calc CHR before wrap.
 1329    17:D565  1A         			inc	a
 1330    17:D566  DD 7D 26   			cmp	vdc_map_draw_h, x	; Usually (SCR_HEIGHT / 8) + 1.
 1331    17:D569  90 03      			bcc	!+
 1332    17:D56B  BD 7D 26   			lda	vdc_map_draw_h, x	; Maximum CHR to draw.
 1333    17:D56E  85 00      	!:		sta	<map_count		; Set number of CHR to draw.
 1334    17:D570  85 01      			sta	<map_drawn		; Preserve number of CHR drawn.
 1335                        	
 1336    17:D572  A9 05      			lda	#VDC_CR			; Set VDC auto-increment from
 1337    17:D574  95 F7      			sta	<vdc_reg, x		; the BAT width, which is set
 1338    17:D576  9D 00 02   			sta	VDC_AR, x		; up by set_screen_size().
 1339    17:D579  B5 F4      			lda	<vdc_crh, x
 1340    17:D57B  9D 03 02   			sta	VDC_DH, x
 1341                        	
 1342    17:D57E  20 C0 D8   			jsr	blk_col_strip		; Draw top of vertical strip.
 1343                        	
 1344                        			; Wrap around and draw the rest of the column (if needed).
 1345                        	
 1346    17:D581  38         			sec				; Are there any more CHR that
 1347    17:D582  BD 7D 26   			lda	vdc_map_draw_h, x	; need to be drawn?
 1348    17:D585  E5 01      			sbc	<map_drawn
 1349    17:D587  F0 2C      			beq	.done
 1350                        	
 1351    17:D589  85 00      			sta	<map_count		; Set number of CHR to draw.
 1352                        	
 1353    17:D58B  A5 FE      			lda	<map_chr_y		; Update CHR Y coordinate for
 1354    17:D58D  48         			pha				; drawing unaligned tiles.
 1355    17:D58E  18         			clc
 1356    17:D58F  65 01      			adc	<map_drawn
 1357    17:D591  85 FE      			sta	<map_chr_y
 1358                        	
 1359               0001     		.if	BLKMAP_MULTISCR
 1360    17:D593  BD C0 2B   			lda	vdc_scr_bank, x		; Skip this if regular blkmap.
 1361    17:D596  F0 0F      			beq	!+
 1362                        	
 1363    17:D598  E6 FF      			inc	<map_scrn_y		; Wrapped to the next screen.
 1364                        	
 1365    17:D59A  20 2D D4   			jsr	map_set_screen		; Put BLK & MAP in MPR2-MPR5.
 1366                        	
 1367    17:D59D  A5 F8      			lda	<map_bat_x		; Calc map data pointer.
 1368    17:D59F  4A         			lsr	a			; Map BLK X coordinate.
 1369    17:D5A0  85 EC      			sta.l	<_bp
 1370    17:D5A2  BD BC 2B   			lda.h	vdc_map_addr, x		; N.B. 256-byte aligned!
 1371    17:D5A5  85 ED      			sta.h	<_bp
 1372                        		.endif
 1373                        	
 1374    17:D5A7  A5 F8      	!:		lda	<map_bat_x		; Set the BAT VRAM destination
 1375    17:D5A9  85 F0      			sta.l	<_di			; coordinates.
 1376    17:D5AB  64 F1      			stz.h	<_di			; Reset 1st row to draw.
 1377                        	
 1378    17:D5AD  20 C0 D8   			jsr	blk_col_strip		; Draw btm of vertical strip.
 1379                        	
 1380               0001     		.if	BLKMAP_MULTISCR
 1381    17:D5B0  C6 FF      			dec	<map_scrn_y		; Restore, no check if should.
 1382                        		.endif
 1383                        	
 1384    17:D5B2  68         			pla				; Restore CHR Y coordinate, we
 1385    17:D5B3  85 FE      			sta	<map_chr_y		; might draw another column!
 1386                        	
 1387    17:D5B5  A9 05      	.done:		lda	#VDC_CR			; Set VDC auto-increment to 1.
 1388    17:D5B7  95 F7      			sta	<vdc_reg, x
 1389    17:D5B9  9D 00 02   			sta	VDC_AR, x
 1390    17:D5BC  9E 03 02   			stz	VDC_DH, x
 1391                        	
 1392    17:D5BF  60         			rts
 1393                        	
 1394                        	
 1395                        	
 1396                        	; ***************************************************************************
 1397                        	; ***************************************************************************
 1398                        	;
 1399                        	; map_scroll_y - Update the BAT when Y coordinate changes.
 1400                        	;
 1401                        	; N.B. This will alter map_chr_y and map_scrn_y if moved in +ve direction!
 1402                        	;
 1403                        	; N.B. This draws multiple rows when called from _draw_map or _blit_map.
 1404                        	;
 1405                        	
 1406    17:D5C0  60         	!no_change:	rts
 1407                        	
 1408    17:D5C1             	map_scroll_y:
 1409                        	
 1410               0001     		.if	BLKMAP_MULTISCR
 1411                        	
 1412                        			; Initialization for a multi-screen map.
 1413                        	
 1414    17:D5C1  BD C0 2B   			lda	vdc_scr_bank, x		; Skip this if regular blkmap.
 1415    17:D5C4  F0 56      			beq	.regular
 1416                        	
 1417    17:D5C6  A5 FE      	.multiscr:	lda	<map_chr_y		; Compare old_y with cur_y.
 1418    17:D5C8  DD B4 2B   			cmp	vdc_old_chr_y, x
 1419               0001     		.if	BLKMAP_TIMETEST == 0
 1420    17:D5CB  F0 F3      			beq	!no_change-		; Do nothing if no change.
 1421                        		.endif
 1422    17:D5CD  9D B4 2B   			sta	vdc_old_chr_y, x
 1423    17:D5D0  30 11      			bmi	!+			; Test the sign of the change.
 1424                        	
 1425    17:D5D2  18         			clc				; Draw bottom if chr_y >= old_y.
 1426    17:D5D3  3D 7A 26   			and	vdc_bat_y_mask, x
 1427    17:D5D6  7D 7D 26   			adc	vdc_map_draw_h, x	; Usually (SCR_HEIGHT / 8) + 1.
 1428    17:D5D9  3A         			dec	a
 1429    17:D5DA  85 FE      			sta	<map_chr_y		; Update CHR Y chr coordinate.
 1430    17:D5DC  3C 78 26   			bit	vdc_bat_height, x
 1431    17:D5DF  F0 02      			beq	!+
 1432    17:D5E1  E6 FF      			inc	<map_scrn_y		; Wrapped to the next screen.
 1433                        	
 1434    17:D5E3  3D 7A 26   	!:		and	vdc_bat_y_mask, x
 1435    17:D5E6  85 F9      			sta	<map_bat_y		; Save BAT Y chr coordinate.
 1436                        	
 1437    17:D5E8  4A         			lsr	a			; Map BLK Y coordinate.
 1438    17:D5E9  85 EF      			sta.h	<map_line
 1439    17:D5EB  62         			cla
 1440    17:D5EC  3C 77 26   			bit	vdc_bat_width, x
 1441    17:D5EF  30 08      			bmi	.w128
 1442    17:D5F1  70 03      			bvs	.w64
 1443    17:D5F3  46 EF      	.w32:		lsr.h	<map_line
 1444    17:D5F5  6A         			ror	a
 1445    17:D5F6  46 EF      	.w64:		lsr.h	<map_line
 1446    17:D5F8  6A         			ror	a
 1447    17:D5F9  46 EF      	.w128:		lsr.h	<map_line
 1448    17:D5FB  6A         			ror	a
 1449    17:D5FC  46 EF      			lsr.h	<map_line		; Hi-byte of (BLK Y * width).
 1450    17:D5FE  6A         			ror	a
 1451    17:D5FF  85 EE      			sta.l	<map_line		; Lo-byte of (BLK Y * width).
 1452                        	
 1453    17:D601  A5 FC      			lda	<map_chr_x
 1454    17:D603  3D 79 26   			and	vdc_bat_x_mask, x
 1455    17:D606  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
 1456                        	
 1457                        			; Loop to here if drawing multiple multi-screen rows.
 1458                        	
 1459    17:D608  20 2D D4   	.multiscr_row:	jsr	map_set_screen		; Put BLK & MAP in MPR2-MPR5.
 1460                        	
 1461    17:D60B  A5 F8      			lda	<map_bat_x		; Calc map data pointer.
 1462    17:D60D  4A         			lsr	a			; Map BLK X coordinate.
 1463    17:D60E  05 EE      			ora.l	<map_line
 1464    17:D610  85 EC      			sta.l	<_bp
 1465    17:D612  A5 EF      			lda.h	<map_line
 1466    17:D614  18         			clc
 1467    17:D615  7D BC 2B   			adc.h	vdc_map_addr, x		; N.B. 256-byte aligned!
 1468    17:D618  85 ED      			sta.h	<_bp
 1469                        	
 1470    17:D61A  80 60      			bra	.draw_row		; Now draw it.
 1471                        	
 1472                        		.endif	BLKMAP_MULTISCR
 1473                        	
 1474                        			; Initialization for a regular blkmap.
 1475                        	
 1476    17:D61C  A5 FE      	.regular:	lda	<map_chr_y		; Compare old_y with cur_y.
 1477    17:D61E  DD B4 2B   			cmp	vdc_old_chr_y, x
 1478               0001     		.if	BLKMAP_TIMETEST == 0
 1479    17:D621  F0 9D      			beq	!no_change-		; Do nothing if no change.
 1480                        		.endif
 1481    17:D623  9D B4 2B   			sta	vdc_old_chr_y, x
 1482    17:D626  30 07      			bmi	!+			; Test the sign of the change.
 1483                        	
 1484    17:D628  18         			clc				; Draw bottom if chr_y >= old_y.
 1485    17:D629  7D 7D 26   			adc	vdc_map_draw_h, x	; Usually (SCR_HEIGHT / 8) + 1.
 1486    17:D62C  3A         			dec	a
 1487    17:D62D  85 FE      			sta	<map_chr_y		; Update CHR Y chr coordinate.
 1488                        	
 1489    17:D62F  A8         	!:		tay				; A = map CHR Y coordinate.
 1490    17:D630  4A         			lsr	a
 1491    17:D631  42         			say				; Y = map BLK Y coordinate.
 1492                        	
 1493    17:D632  3C 84 26   			bit	vdc_map_option, x	; Set bit6 to disable aligning
 1494    17:D635  70 05      			bvs	!+			; BAT Y with the map Y.
 1495    17:D637  3D 7A 26   			and	vdc_bat_y_mask, x
 1496    17:D63A  85 F9      			sta	<map_bat_y		; Save BAT Y chr coordinate.
 1497                        	
 1498    17:D63C  3C 84 26   	!:		bit	vdc_map_option, x	; Set bit7 to disable aligning
 1499    17:D63F  30 07      			bmi	!+			; BAT X with the map X.
 1500    17:D641  A5 FC      			lda	<map_chr_x
 1501    17:D643  3D 79 26   			and	vdc_bat_x_mask, x
 1502    17:D646  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
 1503    17:D648             	!:
 1504                        	
 1505               0000     		.if	BLKMAP_LARGEMAP
 1510                        		.endif
 1511                        	
 1512    17:D648  BD 7E 26   			lda	vdc_map_line_w, x	; Map width in BLK.
 1513               0000     		.if	FAST_MULTIPLY
 1526                        		.else
 1527    17:D64B  84 EF      			sty.h	<map_line		; Takes 144..176 cycles.
 1528    17:D64D  A0 08      			ldy	#8
 1529    17:D64F  4A         			lsr	a
 1530    17:D650  85 EE      			sta.l	<map_line
 1531    17:D652  62         			cla
 1532    17:D653  90 03      			bcc	.rotate
 1533    17:D655  18         	.add:		clc
 1534    17:D656  65 EF      			adc.h	<map_line
 1535    17:D658  6A         	.rotate:	ror	a
 1536    17:D659  66 EE      			ror.l	<map_line		; Lo-byte of (BLK Y * width).
 1537    17:D65B  88         			dey
 1538    17:D65C  B0 F7      			bcs	.add
 1539    17:D65E  D0 F8      			bne	.rotate
 1540    17:D660  85 EF      			sta.h	<map_line		; Hi-byte of (BLK Y * width).
 1541                        		.endif
 1542                        	
 1543    17:D662  20 93 D4   			jsr	map_set_banks		; Put BLK & MAP in MPR2-MPR5.
 1544                        	
 1545                        			; Loop to here if drawing multiple regular blkmap rows.
 1546                        	
 1547    17:D665  A4 EF      	.regular_row:	ldy.h	<map_line		; Hi-byte of (BLK Y * width).
 1548    17:D667  A5 FC      			lda	<map_chr_x		; Map CHR X coordinate.
 1549    17:D669  4A         			lsr	a			; Map BLK X coordinate.
 1550    17:D66A  18         			clc
 1551    17:D66B  65 EE      			adc.l	<map_line		; Lo-byte of (BLK Y * width).
 1552    17:D66D  90 01      			bcc	!+
 1553    17:D66F  C8         			iny
 1554    17:D670  18         	!:		clc				; Calc map data pointer.
 1555    17:D671  7D BB 2B   			adc.l	vdc_map_addr, x
 1556    17:D674  85 EC      			sta.l	<_bp			; Maximum map size is 16KBytes
 1557    17:D676  98         			tya				; so we don't need to consider
 1558    17:D677  7D BC 2B   			adc.h	vdc_map_addr, x		; bank overflow.
 1559    17:D67A  85 ED      			sta.h	<_bp
 1560                        	
 1561                        			; Draw the first part of the row.
 1562                        	
 1563    17:D67C  A5 F9      	.draw_row:	lda	<map_bat_y		; Set the BAT VRAM destination
 1564    17:D67E  85 F1      			sta.h	<_di			; coordinates.
 1565    17:D680  A5 F8      			lda	<map_bat_x
 1566    17:D682  85 F0      			sta.l	<_di
 1567                        	
 1568    17:D684  5D 79 26   			eor	vdc_bat_x_mask, x	; Calc CHR before wrap.
 1569    17:D687  1A         			inc	a
 1570    17:D688  C5 FA      			cmp	<map_draw_w		; Usually (SCR_WIDTH / 8) + 1.
 1571    17:D68A  90 02      			bcc	!+
 1572    17:D68C  A5 FA      			lda	<map_draw_w		; Maximum CHR to draw.
 1573    17:D68E  85 00      	!:		sta	<map_count		; Set number of CHR to draw.
 1574    17:D690  85 01      			sta	<map_drawn		; Preserve number of CHR drawn.
 1575                        	
 1576    17:D692  20 02 D7   			jsr	blk_row_strip		; Draw lhs of horizontal strip.
 1577                        	
 1578                        			; Wrap around and draw the rest of the row (if needed).
 1579                        	
 1580    17:D695  38         			sec				; Are there any more CHR that
 1581    17:D696  A5 FA      			lda	<map_draw_w		; need to be drawn?
 1582    17:D698  E5 01      			sbc	<map_drawn
 1583    17:D69A  F0 2E      			beq	.done_row
 1584                        	
 1585    17:D69C  85 00      			sta	<map_count		; Set number of CHR to draw.
 1586                        	
 1587    17:D69E  A5 FC      			lda	<map_chr_x		; Update CHR X coordinate for
 1588    17:D6A0  48         			pha				; drawing unaligned tiles.
 1589    17:D6A1  18         			clc
 1590    17:D6A2  65 01      			adc	<map_drawn
 1591    17:D6A4  85 FC      			sta	<map_chr_x
 1592                        	
 1593               0001     		.if	BLKMAP_MULTISCR
 1594    17:D6A6  BD C0 2B   			lda	vdc_scr_bank, x		; Skip this if regular blkmap.
 1595    17:D6A9  F0 11      			beq	!+
 1596                        	
 1597    17:D6AB  E6 FD      			inc	<map_scrn_x		; Wrapped to the next screen.
 1598                        	
 1599    17:D6AD  20 2D D4   			jsr	map_set_screen		; Locate screen's BLK and MAP.
 1600                        	
 1601    17:D6B0  18         			clc				; Calc map data pointer.
 1602    17:D6B1  A5 EE      			lda.l	<map_line
 1603    17:D6B3  85 EC      			sta.l	<_bp
 1604    17:D6B5  A5 EF      			lda.h	<map_line
 1605    17:D6B7  7D BC 2B   			adc.h	vdc_map_addr, x		; N.B. 256-byte aligned!
 1606    17:D6BA  85 ED      			sta.h	<_bp
 1607                        		.endif
 1608                        	
 1609    17:D6BC  A5 F9      	!:		lda	<map_bat_y		; Set the BAT VRAM destination
 1610    17:D6BE  85 F1      			sta.h	<_di			; coordinates.
 1611    17:D6C0  64 F0      			stz.l	<_di			; Reset 1st column to draw.
 1612                        	
 1613    17:D6C2  20 02 D7   			jsr	blk_row_strip		; Draw rhs of horizontal strip.
 1614                        	
 1615               0001     		.if	BLKMAP_MULTISCR
 1616    17:D6C5  C6 FD      			dec	<map_scrn_x		; Restore, no check if should.
 1617                        		.endif	BLKMAP_MULTISCR
 1618                        	
 1619    17:D6C7  68         			pla				; Restore CHR X coordinate, we
 1620    17:D6C8  85 FC      			sta	<map_chr_x		; might draw another row!
 1621                        	
 1622    17:D6CA  C6 FB      	.done_row:	dec	<map_draw_h		; Are all desired rows drawn?
 1623    17:D6CC  F0 33      			beq	.finished
 1624                        	
 1625    17:D6CE  E6 FE      			inc	<map_chr_y		; Move CHR Y down by 1.
 1626                        	
 1627    17:D6D0  A5 FE      			lda	<map_chr_y		; If new BLK then ...
 1628    17:D6D2  4A         			lsr	a
 1629    17:D6D3  B0 0B      			bcs	!+
 1630    17:D6D5  BD 7E 26   			lda	vdc_map_line_w, x	; Move the map line pointer to
 1631    17:D6D8  65 EE      			adc.l	<map_line		; the next line.
 1632    17:D6DA  85 EE      			sta.l	<map_line
 1633    17:D6DC  90 02      			bcc	!+
 1634    17:D6DE  E6 EF      			inc.h	<map_line
 1635                        	
 1636    17:D6E0  A5 F9      	!:		lda	<map_bat_y		; Move BAT Y down by 1.
 1637    17:D6E2  1A         			inc	a
 1638    17:D6E3  3D 7A 26   			and	vdc_bat_y_mask, x
 1639    17:D6E6  85 F9      			sta	<map_bat_y
 1640                        	
 1641               0001     		.if	BLKMAP_MULTISCR
 1642    17:D6E8  BC C0 2B   			ldy	vdc_scr_bank, x		; Skip this if regular blkmap.
 1643    17:D6EB  D0 03 4C 65			beq	.regular_row
         17:D6EF  D6          
 1644                        	
 1645    17:D6F0  A8         			tay				; If wrapped to the top line of
 1646    17:D6F1  D0 0B      			bne	!+			; of the BAT then increment the
 1647    17:D6F3  E6 FF      			inc	<map_scrn_y		; screen.
 1648                        	
 1649    17:D6F5  BD 7B 26   			lda	vdc_bat_limit, x	; The map line must wrap around
 1650    17:D6F8  4A         			lsr	a			; too. This is simple since its
 1651    17:D6F9  4A         			lsr	a			; size (in bytes) is 1/4 of the
 1652    17:D6FA  25 EF      			and.h	<map_line		; BAT size (in words) and it is
 1653    17:D6FC  85 EF      			sta.h	<map_line		; a power-of-2.
 1654                        	
 1655    17:D6FE  4C 08 D6   	!:		jmp	.multiscr_row		; Draw next row.
 1656                        		.else
 1658                        		.endif	BLKMAP_MULTISCR
 1659                        	
 1660    17:D701  60         	.finished:	rts
 1661                        	
 1662                        	
 1663                        	
 1664               0000     		.if	BLKDEF_POINTERS
 1858                        		.else	BLKDEF_POINTERS
 1859                        	
 1860                        	
 1861                        	
 1862                        	; ***************************************************************************
 1863                        	; ***************************************************************************
 1864                        	;
 1865                        	; blk_row_strip - Draw a single row of CHR into the BAT.
 1866                        	;
 1867                        	
 1868    17:D702  20 34 E4   	blk_row_strip:	jsr	set_di_xy_mawr		; Set the BAT VRAM destination.
 1869                        	
 1870    17:D705  A5 FC      			lda	<map_chr_x		; Select what drawing code to
 1871    17:D707  4A         			lsr	a			; use depending upon even/odd
 1872    17:D708  A5 FE      			lda	<map_chr_y		; CHR coordinates (not BAT to
 1873    17:D70A  29 01      			and	#1			; support unaligned drawing).
 1874    17:D70C  2A         			rol	a
 1875    17:D70D  0A         			asl	a
 1876    17:D70E  1D B9 2B   			ora.h	vdc_blk_addr, x		; What is the BLK data address?
 1877    17:D711  29 1E      			and	#%00011110		; $4000, $4800, $5000 or $5800.
 1878    17:D713  A8         			tay
 1879    17:D714  B9 21 D7   			lda.h	.jump_table, y		; Push the address of the code.
 1880    17:D717  48         			pha
 1881    17:D718  B9 20 D7   			lda.l	.jump_table, y
 1882    17:D71B  48         			pha
 1883                        	
 1884    17:D71C  B2 EC      			lda	[_bp]			; Get the first BLK number.
 1885    17:D71E  A8         			tay
 1886                        	
 1887    17:D71F  60         			rts				; Jump to the drawing code.
 1888                        	
 1889    17:D720  42 D7      	.jump_table:	dw	b4000_top_even - 1
 1890    17:D722  55 D7      			dw	b4000_top_odd - 1
 1891    17:D724  72 D7      			dw	b4000_btm_even - 1
 1892    17:D726  85 D7      			dw	b4000_btm_odd - 1
 1893                        	
 1894    17:D728  A2 D7      			dw	b4800_top_even - 1
 1895    17:D72A  B5 D7      			dw	b4800_top_odd - 1
 1896    17:D72C  D2 D7      			dw	b4800_btm_even - 1
 1897    17:D72E  E5 D7      			dw	b4800_btm_odd - 1
 1898                        	
 1899    17:D730  02 D8      			dw	b5000_top_even - 1
 1900    17:D732  15 D8      			dw	b5000_top_odd - 1
 1901    17:D734  32 D8      			dw	b5000_btm_even - 1
 1902    17:D736  45 D8      			dw	b5000_btm_odd - 1
 1903                        	
 1904    17:D738  62 D8      			dw	b5800_top_even - 1
 1905    17:D73A  75 D8      			dw	b5800_top_odd - 1
 1906    17:D73C  92 D8      			dw	b5800_btm_even - 1
 1907    17:D73E  A5 D8      			dw	b5800_btm_odd - 1
 1908                        	
 1909                        			; top horizontal (32+2 rept)
 1910                        			;
 1911                        			; 89 cycles per block * 17 -> 1513 cycles
 1912                        	
 1913    17:D740  B2 EC      	!repeat:	lda	[_bp]			; 7
 1914    17:D742  A8         			tay				; 2
 1915                        	
 1916    17:D743  B9 00 40   	b4000_top_even:	lda	BLK_4000_TL_L, y	; 5
 1917    17:D746  9D 02 02   			sta	VDC_DL, x		; 6
 1918    17:D749  B9 00 44   			lda	BLK_4000_TL_H, y	; 5
 1919               0001     		.if	BLKDEF_CHR_FLAG
 1920    17:D74C  29 F3      			and	#%11110011		; 2
 1921                        		.endif
 1922    17:D74E  1A         			inc	a			; 2
 1923    17:D74F  9D 03 02   			sta	VDC_DH, x		; 6
 1924                        	
 1925    17:D752  C6 00      			dec	<map_count		; 6
 1926    17:D754  F0 19      			beq	!end+			; 2
 1927                        	
 1928    17:D756  B9 00 41   	b4000_top_odd:	lda	BLK_4000_TR_L, y	; 5
 1929    17:D759  9D 02 02   			sta	VDC_DL, x		; 6
 1930    17:D75C  B9 00 45   			lda	BLK_4000_TR_H, y	; 5
 1931               0001     		.if	BLKDEF_CHR_FLAG
 1932    17:D75F  29 F3      			and	#%11110011		; 2
 1933                        		.endif
 1934    17:D761  1A         			inc	a			; 2
 1935    17:D762  9D 03 02   			sta	VDC_DH, x		; 6
 1936                        	
 1937    17:D765  E6 EC      			inc.l	<_bp			; 6
 1938    17:D767  D0 02      			bne	!+			; 2/4
 1939    17:D769  E6 ED      			inc.h	<_bp			; 6
 1940                        	
 1941    17:D76B  C6 00      	!:		dec	<map_count		; 6
 1942    17:D76D  D0 D1      			bne	!repeat-		; 4
 1943                        	
 1944    17:D76F  60         	!end:		rts
 1945                        	
 1946                        			; btm horizontal (32+2 rept)
 1947                        			;
 1948                        			; 89 cycles per block * 17 -> 1513 cycles
 1949                        	
 1950    17:D770  B2 EC      	!repeat:	lda	[_bp]			; 7
 1951    17:D772  A8         			tay				; 2
 1952                        	
 1953    17:D773  B9 00 42   	b4000_btm_even:	lda	BLK_4000_BL_L, y	; 5
 1954    17:D776  9D 02 02   			sta	VDC_DL, x		; 6
 1955    17:D779  B9 00 46   			lda	BLK_4000_BL_H, y	; 5
 1956               0001     		.if	BLKDEF_CHR_FLAG
 1957    17:D77C  29 F3      			and	#%11110011		; 2
 1958                        		.endif
 1959    17:D77E  1A         			inc	a			; 2
 1960    17:D77F  9D 03 02   			sta	VDC_DH, x		; 6
 1961                        	
 1962    17:D782  C6 00      			dec	<map_count		; 6
 1963    17:D784  F0 19      			beq	!end+			; 2
 1964                        	
 1965    17:D786  B9 00 43   	b4000_btm_odd:	lda	BLK_4000_BR_L, y	; 5
 1966    17:D789  9D 02 02   			sta	VDC_DL, x		; 6
 1967    17:D78C  B9 00 47   			lda	BLK_4000_BR_H, y	; 5
 1968               0001     		.if	BLKDEF_CHR_FLAG
 1969    17:D78F  29 F3      			and	#%11110011		; 2
 1970                        		.endif
 1971    17:D791  1A         			inc	a			; 2
 1972    17:D792  9D 03 02   			sta	VDC_DH, x		; 6
 1973                        	
 1974    17:D795  E6 EC      			inc.l	<_bp			; 6
 1975    17:D797  D0 02      			bne	!+			; 2/4
 1976    17:D799  E6 ED      			inc.h	<_bp			; 6
 1977                        	
 1978    17:D79B  C6 00      	!:		dec	<map_count		; 6
 1979    17:D79D  D0 D1      			bne	!repeat-		; 4
 1980                        	
 1981    17:D79F  60         	!end:		rts
 1982                        	
 1983                        			; top horizontal (32+2 rept)
 1984                        			;
 1985                        			; 89 cycles per block * 17 -> 1513 cycles
 1986                        	
 1987    17:D7A0  B2 EC      	!repeat:	lda	[_bp]			; 7
 1988    17:D7A2  A8         			tay				; 2
 1989                        	
 1990    17:D7A3  B9 00 48   	b4800_top_even:	lda	BLK_4800_TL_L, y	; 5
 1991    17:D7A6  9D 02 02   			sta	VDC_DL, x		; 6
 1992    17:D7A9  B9 00 4C   			lda	BLK_4800_TL_H, y	; 5
 1993               0001     		.if	BLKDEF_CHR_FLAG
 1994    17:D7AC  29 F3      			and	#%11110011		; 2
 1995                        		.endif
 1996    17:D7AE  1A         			inc	a			; 2
 1997    17:D7AF  9D 03 02   			sta	VDC_DH, x		; 6
 1998                        	
 1999    17:D7B2  C6 00      			dec	<map_count		; 6
 2000    17:D7B4  F0 19      			beq	!end+			; 2
 2001                        	
 2002    17:D7B6  B9 00 49   	b4800_top_odd:	lda	BLK_4800_TR_L, y	; 5
 2003    17:D7B9  9D 02 02   			sta	VDC_DL, x		; 6
 2004    17:D7BC  B9 00 4D   			lda	BLK_4800_TR_H, y	; 5
 2005               0001     		.if	BLKDEF_CHR_FLAG
 2006    17:D7BF  29 F3      			and	#%11110011		; 2
 2007                        		.endif
 2008    17:D7C1  1A         			inc	a			; 2
 2009    17:D7C2  9D 03 02   			sta	VDC_DH, x		; 6
 2010                        	
 2011    17:D7C5  E6 EC      			inc.l	<_bp			; 6
 2012    17:D7C7  D0 02      			bne	!+			; 2/4
 2013    17:D7C9  E6 ED      			inc.h	<_bp			; 6
 2014                        	
 2015    17:D7CB  C6 00      	!:		dec	<map_count		; 6
 2016    17:D7CD  D0 D1      			bne	!repeat-		; 4
 2017                        	
 2018    17:D7CF  60         	!end:		rts
 2019                        	
 2020                        			; btm horizontal (32+2 rept)
 2021                        			;
 2022                        			; 89 cycles per block * 17 -> 1513 cycles
 2023                        	
 2024    17:D7D0  B2 EC      	!repeat:	lda	[_bp]			; 7
 2025    17:D7D2  A8         			tay				; 2
 2026                        	
 2027    17:D7D3  B9 00 4A   	b4800_btm_even:	lda	BLK_4800_BL_L, y	; 5
 2028    17:D7D6  9D 02 02   			sta	VDC_DL, x		; 6
 2029    17:D7D9  B9 00 4E   			lda	BLK_4800_BL_H, y	; 5
 2030               0001     		.if	BLKDEF_CHR_FLAG
 2031    17:D7DC  29 F3      			and	#%11110011		; 2
 2032                        		.endif
 2033    17:D7DE  1A         			inc	a			; 2
 2034    17:D7DF  9D 03 02   			sta	VDC_DH, x		; 6
 2035                        	
 2036    17:D7E2  C6 00      			dec	<map_count		; 6
 2037    17:D7E4  F0 19      			beq	!end+			; 2
 2038                        	
 2039    17:D7E6  B9 00 4B   	b4800_btm_odd:	lda	BLK_4800_BR_L, y	; 5
 2040    17:D7E9  9D 02 02   			sta	VDC_DL, x		; 6
 2041    17:D7EC  B9 00 4F   			lda	BLK_4800_BR_H, y	; 5
 2042               0001     		.if	BLKDEF_CHR_FLAG
 2043    17:D7EF  29 F3      			and	#%11110011		; 2
 2044                        		.endif
 2045    17:D7F1  1A         			inc	a			; 2
 2046    17:D7F2  9D 03 02   			sta	VDC_DH, x		; 6
 2047                        	
 2048    17:D7F5  E6 EC      			inc.l	<_bp			; 6
 2049    17:D7F7  D0 02      			bne	!+			; 2/4
 2050    17:D7F9  E6 ED      			inc.h	<_bp			; 6
 2051                        	
 2052    17:D7FB  C6 00      	!:		dec	<map_count		; 6
 2053    17:D7FD  D0 D1      			bne	!repeat-		; 4
 2054                        	
 2055    17:D7FF  60         	!end:		rts
 2056                        	
 2057                        			; top horizontal (32+2 rept)
 2058                        			;
 2059                        			; 89 cycles per block * 17 -> 1513 cycles
 2060                        	
 2061    17:D800  B2 EC      	!repeat:	lda	[_bp]			; 7
 2062    17:D802  A8         			tay				; 2
 2063                        	
 2064    17:D803  B9 00 50   	b5000_top_even:	lda	BLK_5000_TL_L, y	; 5
 2065    17:D806  9D 02 02   			sta	VDC_DL, x		; 6
 2066    17:D809  B9 00 54   			lda	BLK_5000_TL_H, y	; 5
 2067               0001     		.if	BLKDEF_CHR_FLAG
 2068    17:D80C  29 F3      			and	#%11110011		; 2
 2069                        		.endif
 2070    17:D80E  1A         			inc	a			; 2
 2071    17:D80F  9D 03 02   			sta	VDC_DH, x		; 6
 2072                        	
 2073    17:D812  C6 00      			dec	<map_count		; 6
 2074    17:D814  F0 19      			beq	!end+			; 2
 2075                        	
 2076    17:D816  B9 00 51   	b5000_top_odd:	lda	BLK_5000_TR_L, y	; 5
 2077    17:D819  9D 02 02   			sta	VDC_DL, x		; 6
 2078    17:D81C  B9 00 55   			lda	BLK_5000_TR_H, y	; 5
 2079               0001     		.if	BLKDEF_CHR_FLAG
 2080    17:D81F  29 F3      			and	#%11110011		; 2
 2081                        		.endif
 2082    17:D821  1A         			inc	a			; 2
 2083    17:D822  9D 03 02   			sta	VDC_DH, x		; 6
 2084                        	
 2085    17:D825  E6 EC      			inc.l	<_bp			; 6
 2086    17:D827  D0 02      			bne	!+			; 2/4
 2087    17:D829  E6 ED      			inc.h	<_bp			; 6
 2088                        	
 2089    17:D82B  C6 00      	!:		dec	<map_count		; 6
 2090    17:D82D  D0 D1      			bne	!repeat-		; 4
 2091                        	
 2092    17:D82F  60         	!end:		rts
 2093                        	
 2094                        			; btm horizontal (32+2 rept)
 2095                        			;
 2096                        			; 89 cycles per block * 17 -> 1513 cycles
 2097                        	
 2098    17:D830  B2 EC      	!repeat:	lda	[_bp]			; 7
 2099    17:D832  A8         			tay				; 2
 2100                        	
 2101    17:D833  B9 00 52   	b5000_btm_even:	lda	BLK_5000_BL_L, y	; 5
 2102    17:D836  9D 02 02   			sta	VDC_DL, x		; 6
 2103    17:D839  B9 00 56   			lda	BLK_5000_BL_H, y	; 5
 2104               0001     		.if	BLKDEF_CHR_FLAG
 2105    17:D83C  29 F3      			and	#%11110011		; 2
 2106                        		.endif
 2107    17:D83E  1A         			inc	a			; 2
 2108    17:D83F  9D 03 02   			sta	VDC_DH, x		; 6
 2109                        	
 2110    17:D842  C6 00      			dec	<map_count		; 6
 2111    17:D844  F0 19      			beq	!end+			; 2
 2112                        	
 2113    17:D846  B9 00 53   	b5000_btm_odd:	lda	BLK_5000_BR_L, y	; 5
 2114    17:D849  9D 02 02   			sta	VDC_DL, x		; 6
 2115    17:D84C  B9 00 57   			lda	BLK_5000_BR_H, y	; 5
 2116               0001     		.if	BLKDEF_CHR_FLAG
 2117    17:D84F  29 F3      			and	#%11110011		; 2
 2118                        		.endif
 2119    17:D851  1A         			inc	a			; 2
 2120    17:D852  9D 03 02   			sta	VDC_DH, x		; 6
 2121                        	
 2122    17:D855  E6 EC      			inc.l	<_bp			; 6
 2123    17:D857  D0 02      			bne	!+			; 2/4
 2124    17:D859  E6 ED      			inc.h	<_bp			; 6
 2125                        	
 2126    17:D85B  C6 00      	!:		dec	<map_count		; 6
 2127    17:D85D  D0 D1      			bne	!repeat-		; 4
 2128                        	
 2129    17:D85F  60         	!end:		rts
 2130                        	
 2131                        			; top horizontal (32+2 rept)
 2132                        			;
 2133                        			; 89 cycles per block * 17 -> 1513 cycles
 2134                        	
 2135    17:D860  B2 EC      	!repeat:	lda	[_bp]			; 7
 2136    17:D862  A8         			tay				; 2
 2137                        	
 2138    17:D863  B9 00 58   	b5800_top_even:	lda	BLK_5800_TL_L, y	; 5
 2139    17:D866  9D 02 02   			sta	VDC_DL, x		; 6
 2140    17:D869  B9 00 5C   			lda	BLK_5800_TL_H, y	; 5
 2141               0001     		.if	BLKDEF_CHR_FLAG
 2142    17:D86C  29 F3      			and	#%11110011		; 2
 2143                        		.endif
 2144    17:D86E  1A         			inc	a			; 2
 2145    17:D86F  9D 03 02   			sta	VDC_DH, x		; 6
 2146                        	
 2147    17:D872  C6 00      			dec	<map_count		; 6
 2148    17:D874  F0 19      			beq	!end+			; 2
 2149                        	
 2150    17:D876  B9 00 59   	b5800_top_odd:	lda	BLK_5800_TR_L, y	; 5
 2151    17:D879  9D 02 02   			sta	VDC_DL, x		; 6
 2152    17:D87C  B9 00 5D   			lda	BLK_5800_TR_H, y	; 5
 2153               0001     		.if	BLKDEF_CHR_FLAG
 2154    17:D87F  29 F3      			and	#%11110011		; 2
 2155                        		.endif
 2156    17:D881  1A         			inc	a			; 2
 2157    17:D882  9D 03 02   			sta	VDC_DH, x		; 6
 2158                        	
 2159    17:D885  E6 EC      			inc.l	<_bp			; 6
 2160    17:D887  D0 02      			bne	!+			; 2/4
 2161    17:D889  E6 ED      			inc.h	<_bp			; 6
 2162                        	
 2163    17:D88B  C6 00      	!:		dec	<map_count		; 6
 2164    17:D88D  D0 D1      			bne	!repeat-		; 4
 2165                        	
 2166    17:D88F  60         	!end:		rts
 2167                        	
 2168                        			; btm horizontal (32+2 rept)
 2169                        			;
 2170                        			; 89 cycles per block * 17 -> 1513 cycles
 2171                        	
 2172    17:D890  B2 EC      	!repeat:	lda	[_bp]		; 7
 2173    17:D892  A8         			tay				; 2
 2174                        	
 2175    17:D893  B9 00 5A   	b5800_btm_even:	lda	BLK_5800_BL_L, y	; 5
 2176    17:D896  9D 02 02   			sta	VDC_DL, x		; 6
 2177    17:D899  B9 00 5E   			lda	BLK_5800_BL_H, y	; 5
 2178               0001     		.if	BLKDEF_CHR_FLAG
 2179    17:D89C  29 F3      			and	#%11110011		; 2
 2180                        		.endif
 2181    17:D89E  1A         			inc	a			; 2
 2182    17:D89F  9D 03 02   			sta	VDC_DH, x		; 6
 2183                        	
 2184    17:D8A2  C6 00      			dec	<map_count		; 6
 2185    17:D8A4  F0 19      			beq	!end+			; 2
 2186                        	
 2187    17:D8A6  B9 00 5B   	b5800_btm_odd:	lda	BLK_5800_BR_L, y	; 5
 2188    17:D8A9  9D 02 02   			sta	VDC_DL, x		; 6
 2189    17:D8AC  B9 00 5F   			lda	BLK_5800_BR_H, y	; 5
 2190               0001     		.if	BLKDEF_CHR_FLAG
 2191    17:D8AF  29 F3      			and	#%11110011		; 2
 2192                        		.endif
 2193    17:D8B1  1A         			inc	a			; 2
 2194    17:D8B2  9D 03 02   			sta	VDC_DH, x		; 6
 2195                        	
 2196    17:D8B5  E6 EC      			inc.l	<_bp			; 6
 2197    17:D8B7  D0 02      			bne	!+			; 2/4
 2198    17:D8B9  E6 ED      			inc.h	<_bp			; 6
 2199                        	
 2200    17:D8BB  C6 00      	!:		dec	<map_count		; 6
 2201    17:D8BD  D0 D1      			bne	!repeat-		; 4
 2202                        	
 2203    17:D8BF  60         	!end:		rts
 2204                        	
 2205                        	
 2206                        	
 2207                        	; ***************************************************************************
 2208                        	; ***************************************************************************
 2209                        	;
 2210                        	; blk_col_strip - Draw a single column of CHR into the BAT.
 2211                        	;
 2212                        	
 2213    17:D8C0  20 34 E4   	blk_col_strip:	jsr	set_di_xy_mawr		; Set the BAT VRAM destination.
 2214                        	
 2215    17:D8C3  A5 FC      			lda	<map_chr_x		; Select what drawing code to
 2216    17:D8C5  4A         			lsr	a			; use depending upon even/odd
 2217    17:D8C6  A5 FE      			lda	<map_chr_y		; CHR coordinates (not BAT to
 2218    17:D8C8  29 01      			and	#1			; support unaligned drawing).
 2219    17:D8CA  2A         			rol	a
 2220    17:D8CB  0A         			asl	a			; N.B. Always leaves C clear.
 2221    17:D8CC  1D B9 2B   			ora.h	vdc_blk_addr, x		; What is the BLK data address?
 2222    17:D8CF  29 1E      			and	#%00011110		; $4000, $4800, $5000 or $5800.
 2223    17:D8D1  A8         			tay
 2224    17:D8D2  B9 DF D8   			lda.h	.jump_table, y		; Push the address of the code.
 2225    17:D8D5  48         			pha
 2226    17:D8D6  B9 DE D8   			lda.l	.jump_table, y
 2227    17:D8D9  48         			pha
 2228                        	
 2229    17:D8DA  B2 EC      			lda	[_bp]			; Get the first BLK number.
 2230    17:D8DC  A8         			tay
 2231                        	
 2232    17:D8DD  60         			rts				; Jump to the drawing code.
 2233                        	
 2234    17:D8DE  00 D9      	.jump_table:	dw	b4000_lhs_even - 1
 2235    17:D8E0  36 D9      			dw	b4000_rhs_even - 1
 2236    17:D8E2  13 D9      			dw	b4000_lhs_odd - 1
 2237    17:D8E4  49 D9      			dw	b4000_rhs_odd - 1
 2238                        	
 2239    17:D8E6  6C D9      			dw	b4800_lhs_even - 1
 2240    17:D8E8  A2 D9      			dw	b4800_rhs_even - 1
 2241    17:D8EA  7F D9      			dw	b4800_lhs_odd - 1
 2242    17:D8EC  B5 D9      			dw	b4800_rhs_odd - 1
 2243                        	
 2244    17:D8EE  D8 D9      			dw	b5000_lhs_even - 1
 2245    17:D8F0  0E DA      			dw	b5000_rhs_even - 1
 2246    17:D8F2  EB D9      			dw	b5000_lhs_odd - 1
 2247    17:D8F4  21 DA      			dw	b5000_rhs_odd - 1
 2248                        	
 2249    17:D8F6  44 DA      			dw	b5800_lhs_even - 1
 2250    17:D8F8  7A DA      			dw	b5800_rhs_even - 1
 2251    17:D8FA  57 DA      			dw	b5800_lhs_odd - 1
 2252    17:D8FC  8D DA      			dw	b5800_rhs_odd - 1
 2253                        	
 2254                        			; lhs vertical (28+2 rept)
 2255                        			;
 2256                        			; N.B. C is always clear on entry.
 2257                        			;
 2258                        			; 100 cycles per block * 15 -> 1500 cycles
 2259                        	
 2260    17:D8FE  B2 EC      	!repeat:	lda	[_bp]			; 7
 2261    17:D900  A8         			tay				; 2
 2262                        	
 2263    17:D901  B9 00 40   	b4000_lhs_even:	lda	BLK_4000_TL_L, y	; 5
 2264    17:D904  9D 02 02   			sta	VDC_DL, x		; 6
 2265    17:D907  B9 00 44   			lda	BLK_4000_TL_H, y	; 5
 2266               0001     		.if	BLKDEF_CHR_FLAG
 2267    17:D90A  29 F3      			and	#%11110011		; 2
 2268                        		.endif
 2269    17:D90C  1A         			inc	a			; 2
 2270    17:D90D  9D 03 02   			sta	VDC_DH, x		; 6
 2271                        	
 2272    17:D910  C6 00      			dec	<map_count		; 6
 2273    17:D912  F0 1F      			beq	!end+			; 2
 2274                        	
 2275    17:D914  B9 00 42   	b4000_lhs_odd:	lda	BLK_4000_BL_L, y	; 5
 2276    17:D917  9D 02 02   			sta	VDC_DL, x		; 6
 2277    17:D91A  B9 00 46   			lda	BLK_4000_BL_H, y	; 5
 2278               0001     		.if	BLKDEF_CHR_FLAG
 2279    17:D91D  29 F3      			and	#%11110011		; 2
 2280                        		.endif
 2281    17:D91F  1A         			inc	a			; 2
 2282    17:D920  9D 03 02   			sta	VDC_DH, x		; 6
 2283                        	
 2284    17:D923  BD 7E 26   			lda	vdc_map_line_w, x	; 5
 2285    17:D926  65 EC      			adc.l	<_bp			; 4
 2286    17:D928  85 EC      			sta.l	<_bp			; 4
 2287    17:D92A  90 03      			bcc	!+			; 2/4
 2288    17:D92C  E6 ED      			inc.h	<_bp			; 6
 2289    17:D92E  18         			clc				; 2
 2290                        	
 2291    17:D92F  C6 00      	!:		dec	<map_count		; 6
 2292    17:D931  D0 CB      			bne	!repeat-		; 4
 2293                        	
 2294    17:D933  60         	!end:		rts
 2295                        	
 2296                        			; rhs vertical (28+2 rept)
 2297                        			;
 2298                        			; N.B. C is always clear on entry.
 2299                        			;
 2300                        			; 100 cycles per block * 15 -> 1500 cycles
 2301                        	
 2302    17:D934  B2 EC      	!repeat:	lda	[_bp]			; 7
 2303    17:D936  A8         			tay				; 2
 2304                        	
 2305    17:D937  B9 00 41   	b4000_rhs_even:	lda	BLK_4000_TR_L, y	; 5
 2306    17:D93A  9D 02 02   			sta	VDC_DL, x		; 6
 2307    17:D93D  B9 00 45   			lda	BLK_4000_TR_H, y	; 5
 2308               0001     		.if	BLKDEF_CHR_FLAG
 2309    17:D940  29 F3      			and	#%11110011		; 2
 2310                        		.endif
 2311    17:D942  1A         			inc	a			; 2
 2312    17:D943  9D 03 02   			sta	VDC_DH, x		; 6
 2313                        	
 2314    17:D946  C6 00      			dec	<map_count		; 6
 2315    17:D948  F0 1F      			beq	!end+			; 2
 2316                        	
 2317    17:D94A  B9 00 43   	b4000_rhs_odd:	lda	BLK_4000_BR_L, y	; 5
 2318    17:D94D  9D 02 02   			sta	VDC_DL, x		; 6
 2319    17:D950  B9 00 47   			lda	BLK_4000_BR_H, y	; 5
 2320               0001     		.if	BLKDEF_CHR_FLAG
 2321    17:D953  29 F3      			and	#%11110011		; 2
 2322                        		.endif
 2323    17:D955  1A         			inc	a			; 2
 2324    17:D956  9D 03 02   			sta	VDC_DH, x		; 6
 2325                        	
 2326    17:D959  BD 7E 26   			lda	vdc_map_line_w, x	; 5
 2327    17:D95C  65 EC      			adc.l	<_bp			; 4
 2328    17:D95E  85 EC      			sta.l	<_bp			; 4
 2329    17:D960  90 03      			bcc	!+			; 2/4
 2330    17:D962  E6 ED      			inc.h	<_bp			; 6
 2331    17:D964  18         			clc				; 2
 2332                        	
 2333    17:D965  C6 00      	!:		dec	<map_count		; 6
 2334    17:D967  D0 CB      			bne	!repeat-		; 4
 2335                        	
 2336    17:D969  60         	!end:		rts
 2337                        	
 2338                        			; lhs vertical (28+2 rept)
 2339                        			;
 2340                        			; N.B. C is always clear on entry.
 2341                        			;
 2342                        			; 100 cycles per block * 15 -> 1500 cycles
 2343                        	
 2344    17:D96A  B2 EC      	!repeat:	lda	[_bp]			; 7
 2345    17:D96C  A8         			tay				; 2
 2346                        	
 2347    17:D96D  B9 00 48   	b4800_lhs_even:	lda	BLK_4800_TL_L, y	; 5
 2348    17:D970  9D 02 02   			sta	VDC_DL, x		; 6
 2349    17:D973  B9 00 4C   			lda	BLK_4800_TL_H, y	; 5
 2350               0001     		.if	BLKDEF_CHR_FLAG
 2351    17:D976  29 F3      			and	#%11110011		; 2
 2352                        		.endif
 2353    17:D978  1A         			inc	a			; 2
 2354    17:D979  9D 03 02   			sta	VDC_DH, x		; 6
 2355                        	
 2356    17:D97C  C6 00      			dec	<map_count		; 6
 2357    17:D97E  F0 1F      			beq	!end+			; 2
 2358                        	
 2359    17:D980  B9 00 4A   	b4800_lhs_odd:	lda	BLK_4800_BL_L, y	; 5
 2360    17:D983  9D 02 02   			sta	VDC_DL, x		; 6
 2361    17:D986  B9 00 4E   			lda	BLK_4800_BL_H, y	; 5
 2362               0001     		.if	BLKDEF_CHR_FLAG
 2363    17:D989  29 F3      			and	#%11110011		; 2
 2364                        		.endif
 2365    17:D98B  1A         			inc	a			; 2
 2366    17:D98C  9D 03 02   			sta	VDC_DH, x		; 6
 2367                        	
 2368    17:D98F  BD 7E 26   			lda	vdc_map_line_w, x	; 5
 2369    17:D992  65 EC      			adc.l	<_bp			; 4
 2370    17:D994  85 EC      			sta.l	<_bp			; 4
 2371    17:D996  90 03      			bcc	!+			; 2/4
 2372    17:D998  E6 ED      			inc.h	<_bp			; 6
 2373    17:D99A  18         			clc				; 2
 2374                        	
 2375    17:D99B  C6 00      	!:		dec	<map_count		; 6
 2376    17:D99D  D0 CB      			bne	!repeat-		; 4
 2377                        	
 2378    17:D99F  60         	!end:		rts
 2379                        	
 2380                        			; rhs vertical (28+2 rept)
 2381                        			;
 2382                        			; N.B. C is always clear on entry.
 2383                        			;
 2384                        			; 100 cycles per block * 15 -> 1500 cycles
 2385                        	
 2386    17:D9A0  B2 EC      	!repeat:	lda	[_bp]			; 7
 2387    17:D9A2  A8         			tay				; 2
 2388                        	
 2389    17:D9A3  B9 00 49   	b4800_rhs_even:	lda	BLK_4800_TR_L, y	; 5
 2390    17:D9A6  9D 02 02   			sta	VDC_DL, x		; 6
 2391    17:D9A9  B9 00 4D   			lda	BLK_4800_TR_H, y	; 5
 2392               0001     		.if	BLKDEF_CHR_FLAG
 2393    17:D9AC  29 F3      			and	#%11110011		; 2
 2394                        		.endif
 2395    17:D9AE  1A         			inc	a			; 2
 2396    17:D9AF  9D 03 02   			sta	VDC_DH, x		; 6
 2397                        	
 2398    17:D9B2  C6 00      			dec	<map_count		; 6
 2399    17:D9B4  F0 1F      			beq	!end+			; 2
 2400                        	
 2401    17:D9B6  B9 00 4B   	b4800_rhs_odd:	lda	BLK_4800_BR_L, y	; 5
 2402    17:D9B9  9D 02 02   			sta	VDC_DL, x		; 6
 2403    17:D9BC  B9 00 4F   			lda	BLK_4800_BR_H, y	; 5
 2404               0001     		.if	BLKDEF_CHR_FLAG
 2405    17:D9BF  29 F3      			and	#%11110011		; 2
 2406                        		.endif
 2407    17:D9C1  1A         			inc	a			; 2
 2408    17:D9C2  9D 03 02   			sta	VDC_DH, x		; 6
 2409                        	
 2410    17:D9C5  BD 7E 26   			lda	vdc_map_line_w, x	; 5
 2411    17:D9C8  65 EC      			adc.l	<_bp			; 4
 2412    17:D9CA  85 EC      			sta.l	<_bp			; 4
 2413    17:D9CC  90 03      			bcc	!+			; 2/4
 2414    17:D9CE  E6 ED      			inc.h	<_bp			; 6
 2415    17:D9D0  18         			clc				; 2
 2416                        	
 2417    17:D9D1  C6 00      	!:		dec	<map_count		; 6
 2418    17:D9D3  D0 CB      			bne	!repeat-		; 4
 2419                        	
 2420    17:D9D5  60         	!end:		rts
 2421                        	
 2422                        			; lhs vertical (28+2 rept)
 2423                        			;
 2424                        			; N.B. C is always clear on entry.
 2425                        			;
 2426                        			; 100 cycles per block * 15 -> 1500 cycles
 2427                        	
 2428    17:D9D6  B2 EC      	!repeat:	lda	[_bp]			; 7
 2429    17:D9D8  A8         			tay				; 2
 2430                        	
 2431    17:D9D9  B9 00 50   	b5000_lhs_even:	lda	BLK_5000_TL_L, y	; 5
 2432    17:D9DC  9D 02 02   			sta	VDC_DL, x		; 6
 2433    17:D9DF  B9 00 54   			lda	BLK_5000_TL_H, y	; 5
 2434               0001     		.if	BLKDEF_CHR_FLAG
 2435    17:D9E2  29 F3      			and	#%11110011		; 2
 2436                        		.endif
 2437    17:D9E4  1A         			inc	a			; 2
 2438    17:D9E5  9D 03 02   			sta	VDC_DH, x		; 6
 2439                        	
 2440    17:D9E8  C6 00      			dec	<map_count		; 6
 2441    17:D9EA  F0 1F      			beq	!end+			; 2
 2442                        	
 2443    17:D9EC  B9 00 52   	b5000_lhs_odd:	lda	BLK_5000_BL_L, y	; 5
 2444    17:D9EF  9D 02 02   			sta	VDC_DL, x		; 6
 2445    17:D9F2  B9 00 56   			lda	BLK_5000_BL_H, y	; 5
 2446               0001     		.if	BLKDEF_CHR_FLAG
 2447    17:D9F5  29 F3      			and	#%11110011		; 2
 2448                        		.endif
 2449    17:D9F7  1A         			inc	a			; 2
 2450    17:D9F8  9D 03 02   			sta	VDC_DH, x		; 6
 2451                        	
 2452    17:D9FB  BD 7E 26   			lda	vdc_map_line_w, x	; 5
 2453    17:D9FE  65 EC      			adc.l	<_bp			; 4
 2454    17:DA00  85 EC      			sta.l	<_bp			; 4
 2455    17:DA02  90 03      			bcc	!+			; 2/4
 2456    17:DA04  E6 ED      			inc.h	<_bp			; 6
 2457    17:DA06  18         			clc				; 2
 2458                        	
 2459    17:DA07  C6 00      	!:		dec	<map_count		; 6
 2460    17:DA09  D0 CB      			bne	!repeat-		; 4
 2461                        	
 2462    17:DA0B  60         	!end:		rts
 2463                        	
 2464                        			; rhs vertical (28+2 rept)
 2465                        			;
 2466                        			; N.B. C is always clear on entry.
 2467                        			;
 2468                        			; 100 cycles per block * 15 -> 1500 cycles
 2469                        	
 2470    17:DA0C  B2 EC      	!repeat:	lda	[_bp]			; 7
 2471    17:DA0E  A8         			tay				; 2
 2472                        	
 2473    17:DA0F  B9 00 51   	b5000_rhs_even:	lda	BLK_5000_TR_L, y	; 5
 2474    17:DA12  9D 02 02   			sta	VDC_DL, x		; 6
 2475    17:DA15  B9 00 55   			lda	BLK_5000_TR_H, y	; 5
 2476               0001     		.if	BLKDEF_CHR_FLAG
 2477    17:DA18  29 F3      			and	#%11110011		; 2
 2478                        		.endif
 2479    17:DA1A  1A         			inc	a			; 2
 2480    17:DA1B  9D 03 02   			sta	VDC_DH, x		; 6
 2481                        	
 2482    17:DA1E  C6 00      			dec	<map_count		; 6
 2483    17:DA20  F0 1F      			beq	!end+			; 2
 2484                        	
 2485    17:DA22  B9 00 53   	b5000_rhs_odd:	lda	BLK_5000_BR_L, y	; 5
 2486    17:DA25  9D 02 02   			sta	VDC_DL, x		; 6
 2487    17:DA28  B9 00 57   			lda	BLK_5000_BR_H, y	; 5
 2488               0001     		.if	BLKDEF_CHR_FLAG
 2489    17:DA2B  29 F3      			and	#%11110011		; 2
 2490                        		.endif
 2491    17:DA2D  1A         			inc	a			; 2
 2492    17:DA2E  9D 03 02   			sta	VDC_DH, x		; 6
 2493                        	
 2494    17:DA31  BD 7E 26   			lda	vdc_map_line_w, x	; 5
 2495    17:DA34  65 EC      			adc.l	<_bp			; 4
 2496    17:DA36  85 EC      			sta.l	<_bp			; 4
 2497    17:DA38  90 03      			bcc	!+			; 2/4
 2498    17:DA3A  E6 ED      			inc.h	<_bp			; 6
 2499    17:DA3C  18         			clc				; 2
 2500                        	
 2501    17:DA3D  C6 00      	!:		dec	<map_count		; 6
 2502    17:DA3F  D0 CB      			bne	!repeat-		; 4
 2503                        	
 2504    17:DA41  60         	!end:		rts
 2505                        	
 2506                        			; lhs vertical (28+2 rept)
 2507                        			;
 2508                        			; N.B. C is always clear on entry.
 2509                        			;
 2510                        			; 100 cycles per block * 15 -> 1500 cycles
 2511                        	
 2512    17:DA42  B2 EC      	!repeat:	lda	[_bp]			; 7
 2513    17:DA44  A8         			tay				; 2
 2514                        	
 2515    17:DA45  B9 00 58   	b5800_lhs_even:	lda	BLK_5800_TL_L, y	; 5
 2516    17:DA48  9D 02 02   			sta	VDC_DL, x		; 6
 2517    17:DA4B  B9 00 5C   			lda	BLK_5800_TL_H, y	; 5
 2518               0001     		.if	BLKDEF_CHR_FLAG
 2519    17:DA4E  29 F3      			and	#%11110011		; 2
 2520                        		.endif
 2521    17:DA50  1A         			inc	a			; 2
 2522    17:DA51  9D 03 02   			sta	VDC_DH, x		; 6
 2523                        	
 2524    17:DA54  C6 00      			dec	<map_count		; 6
 2525    17:DA56  F0 1F      			beq	!end+			; 2
 2526                        	
 2527    17:DA58  B9 00 5A   	b5800_lhs_odd:	lda	BLK_5800_BL_L, y	; 5
 2528    17:DA5B  9D 02 02   			sta	VDC_DL, x		; 6
 2529    17:DA5E  B9 00 5E   			lda	BLK_5800_BL_H, y	; 5
 2530               0001     		.if	BLKDEF_CHR_FLAG
 2531    17:DA61  29 F3      			and	#%11110011		; 2
 2532                        		.endif
 2533    17:DA63  1A         			inc	a			; 2
 2534    17:DA64  9D 03 02   			sta	VDC_DH, x		; 6
 2535                        	
 2536    17:DA67  BD 7E 26   			lda	vdc_map_line_w, x	; 5
 2537    17:DA6A  65 EC      			adc.l	<_bp			; 4
 2538    17:DA6C  85 EC      			sta.l	<_bp			; 4
 2539    17:DA6E  90 03      			bcc	!+			; 2/4
 2540    17:DA70  E6 ED      			inc.h	<_bp			; 6
 2541    17:DA72  18         			clc				; 2
 2542                        	
 2543    17:DA73  C6 00      	!:		dec	<map_count		; 6
 2544    17:DA75  D0 CB      			bne	!repeat-		; 4
 2545                        	
 2546    17:DA77  60         	!end:		rts
 2547                        	
 2548                        			; rhs vertical (28+2 rept)
 2549                        			;
 2550                        			; N.B. C is always clear on entry.
 2551                        			;
 2552                        			; 100 cycles per block * 15 -> 1500 cycles
 2553                        	
 2554    17:DA78  B2 EC      	!repeat:	lda	[_bp]			; 7
 2555    17:DA7A  A8         			tay				; 2
 2556                        	
 2557    17:DA7B  B9 00 59   	b5800_rhs_even:	lda	BLK_5800_TR_L, y	; 5
 2558    17:DA7E  9D 02 02   			sta	VDC_DL, x		; 6
 2559    17:DA81  B9 00 5D   			lda	BLK_5800_TR_H, y	; 5
 2560               0001     		.if	BLKDEF_CHR_FLAG
 2561    17:DA84  29 F3      			and	#%11110011		; 2
 2562                        		.endif
 2563    17:DA86  1A         			inc	a			; 2
 2564    17:DA87  9D 03 02   			sta	VDC_DH, x		; 6
 2565                        	
 2566    17:DA8A  C6 00      			dec	<map_count		; 6
 2567    17:DA8C  F0 1F      			beq	!end+			; 2
 2568                        	
 2569    17:DA8E  B9 00 5B   	b5800_rhs_odd:	lda	BLK_5800_BR_L, y	; 5
 2570    17:DA91  9D 02 02   			sta	VDC_DL, x		; 6
 2571    17:DA94  B9 00 5F   			lda	BLK_5800_BR_H, y	; 5
 2572               0001     		.if	BLKDEF_CHR_FLAG
 2573    17:DA97  29 F3      			and	#%11110011		; 2
 2574                        		.endif
 2575    17:DA99  1A         			inc	a			; 2
 2576    17:DA9A  9D 03 02   			sta	VDC_DH, x		; 6
 2577                        	
 2578    17:DA9D  BD 7E 26   			lda	vdc_map_line_w, x	; 5
 2579    17:DAA0  65 EC      			adc.l	<_bp			; 4
 2580    17:DAA2  85 EC      			sta.l	<_bp			; 4
 2581    17:DAA4  90 03      			bcc	!+			; 2/4
 2582    17:DAA6  E6 ED      			inc.h	<_bp			; 6
 2583    17:DAA8  18         			clc				; 2
 2584                        	
 2585    17:DAA9  C6 00      	!:		dec	<map_count		; 6
 2586    17:DAAB  D0 CB      			bne	!repeat-		; 4
 2587                        	
 2588    17:DAAD  60         	!end:		rts
 2589                        	
 2590                        		.endif	BLKDEF_POINTERS
 2591                        	
 2592                        		.endprocgroup	; blkmap_group
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   80                        		.else
   84                        		.endif	HUCC_USES_BLKMAP
   85                        	
   86               0001     		.ifdef	HUCC_USES_CHRMAP		; Set in hucc_chrmap.h
                             #[3]   "..\..\..\include\hucc\chrmap.asm"
   87                        			include	"chrmap.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; chrmap.asm
    5                        	;
    6                        	; A simple map system based on 8x8 characters (aka "tiles") in BAT format.
    7                        	;
    8                        	; Copyright John Brandwood 2025.
    9                        	;
   10                        	; Distributed under the Boost Software License, Version 1.0.
   11                        	; (See accompanying file LICENSE_1_0.txt or copy at
   12                        	;  http://www.boost.org/LICENSE_1_0.txt)
   13                        	;
   14                        	; ***************************************************************************
   15                        	; ***************************************************************************
   16                        	;
   17                        	; The maximum X and Y size for chrmaps is 256 characters (2048 pixels).
   18                        	;
   19                        	; The maximum total size for a chrmap is 16KBytes, which allows for maps up
   20                        	; to 256x32 tiles (2048x256 pixels).
   21                        	;
   22                        	; ***************************************************************************
   23                        	; ***************************************************************************
   24                        	
   25                        	;
   26                        	; Include dependancies ...
   27                        	;
   28                        	
   29                        			include "blkmap.asm"		; This defines the variables.
   30                        	
   31                        	;
   32                        	; Chrmaps in BAT format normally address all of VRAM from $0400..$7FFF, but
   33                        	; they can be limited to use the 32KByte of characters in VRAM $1000..$4FFF
   34                        	; which then frees up 2-bits for flag information for each character in the
   35                        	; BAT entry.
   36                        	;
   37                        	; These 2-bits are perfect for using as collision information in game maps,
   38                        	; allowing storage of states like transparent, solid, up-slope, down-slope.
   39                        	;
   40                        	; Typically this flag information is set by the map conversion tools from a
   41                        	; seperate "collision" map layer.
   42                        	;
   43                        	
   44               0000     		.ifndef	CHRMAP_BAT_FLAG
   46                        		.endif
   47                        	
   48                        	;
   49                        	;
   50                        	;
   51                        	
   52                        	
   53                        	
   54    02:D6F5             	chrmap_group	.procgroup
   55                        	
   56                        	; ***************************************************************************
   57                        	; ***************************************************************************
   58                        	;
   59                        	; _draw_bat - Draw the entire screen at the current coordinates.
   60                        	; _sgx_draw_bat - Draw the entire screen at the current coordinates.
   61                        	;
   62                        	; void __fastcall draw_bat( void );
   63                        	; void __fastcall sgx_draw_bat( void );
   64                        	;
   65                        	
   66               0001     		.if	SUPPORT_SGX
   67                        	
   68                        	_sgx_draw_bat	.proc
   74                        			.endp
   75                        		.endif
   76                        	
   77    02:D6F5             	_draw_bat	.proc
   78                        	
   79    02:D6F5  82         			clx				; Offset to PCE VDC.
   80                        	
   81    02:D6F6  43 08      			tma3				; Preserve MPR3..MPR5.
   82    02:D6F8  48         			pha
   83    02:D6F9  43 10      			tma4
   84    02:D6FB  48         			pha
   85    02:D6FC  43 20      			tma5
   86    02:D6FE  48         			pha
   87                        	
   88    02:D6FF  20 A2 D7   			jsr	bat_pxl_2_chr		; Set up the draw coordinates.
   89                        	
   90    02:D702  A5 FC      			lda	<map_chr_x		; Reset previous X position.
   91    02:D704  9D B3 2B   			sta	vdc_old_chr_x, x
   92                        	
   93    02:D707  A5 FE      			lda	<map_chr_y		; Reset previous Y position,
   94    02:D709  1A         			inc	a			; ready to draw rows upwards.
   95    02:D70A  9D B4 2B   			sta	vdc_old_chr_y, x
   96                        	
   97    02:D70D  BD 7C 26   			lda	vdc_map_draw_w, x	; Draw the whole screen.
   98    02:D710  85 FA      			sta	<map_draw_w
   99    02:D712  BD 7D 26   			lda	vdc_map_draw_h, x
  100    02:D715  85 FB      			sta	<map_draw_h
  101                        	
  102    02:D717  20 85 D8   			jsr	bat_scroll_y		; Draw N row of CHR to the BAT.
  103                        	
  104    02:D71A  68         			pla				; Restore MPR3..MPR5.
  105    02:D71B  53 20      			tam5
  106    02:D71D  68         			pla
  107    02:D71E  53 10      			tam4
  108    02:D720  68         			pla
  109    02:D721  53 08      			tam3
  110                        	
  111                        			leave
         02:D723  4C EF FF   			jmp	leave_proc
  112                        	
  113                        			.endp
  114                        	
  115                        	
  116                        	
  117                        	; ***************************************************************************
  118                        	; ***************************************************************************
  119                        	;
  120                        	; _scroll_bat - Draw a single row of CHR into the BAT to update the edge.
  121                        	; _sgx_scroll_bat - Draw a single row of CHR into the BAT to update the edge.
  122                        	;
  123                        	; void __fastcall scroll_bat( void );
  124                        	; void __fastcall sgx_scroll_bat( void );
  125                        	;
  126                        	
  127               0001     		.if	SUPPORT_SGX
  128                        	
  129                        	_sgx_scroll_bat	.proc
  135                        			.endp
  136                        		.endif
  137                        	
  138    02:D726             	_scroll_bat	.proc
  139                        	
  140    02:D726  82         			clx				; Offset to PCE VDC.
  141                        	
  142    02:D727  43 08      			tma3				; Preserve MPR3..MPR5.
  143    02:D729  48         			pha
  144    02:D72A  43 10      			tma4
  145    02:D72C  48         			pha
  146    02:D72D  43 20      			tma5
  147    02:D72F  48         			pha
  148                        	
  149    02:D730  20 A2 D7   			jsr	bat_pxl_2_chr		; Set up the draw coordinates.
  150                        	
  151    02:D733  BD 7D 26   			lda	vdc_map_draw_h, x	; Draw new LHS or RHS if needed.
  152    02:D736  85 FB      			sta	<map_draw_h
  153                        	;		lda	#1			; bat_scroll_x only ever draws a
  154                        	;		sta	<map_draw_w		; single column.
  155    02:D738  20 C6 D7   			jsr	bat_scroll_x
  156                        	
  157    02:D73B  BD B3 2B   			lda	vdc_old_chr_x, x	; Restore map_chr_x which could
  158    02:D73E  85 FC      			sta	<map_chr_x		; be changed by bat_scroll_x.
  159                        	
  160    02:D740  BD 7C 26   			lda	vdc_map_draw_w, x	; Draw new TOP or BTM if needed.
  161    02:D743  85 FA      			sta	<map_draw_w
  162    02:D745  A9 01      			lda	#1
  163    02:D747  85 FB      			sta	<map_draw_h
  164    02:D749  20 85 D8   			jsr	bat_scroll_y
  165                        	
  166    02:D74C  68         			pla				; Restore MPR3..MPR5.
  167    02:D74D  53 20      			tam5
  168    02:D74F  68         			pla
  169    02:D750  53 10      			tam4
  170    02:D752  68         			pla
  171    02:D753  53 08      			tam3
  172                        	
  173                        			leave
         02:D755  4C EF FF   			jmp	leave_proc
  174                        	
  175                        			.endp
  176                        	
  177                        	
  178                        	
  179                        	; ***************************************************************************
  180                        	; ***************************************************************************
  181                        	;
  182                        	; _blit_bat - Draw a map rectangle to specific BAT coordinates.
  183                        	; _sgx_blit_bat - Draw a map rectangle to specific BAT coordinates.
  184                        	;
  185                        	; void __fastcall blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
  186                        	; void __fastcall sgx_blit_bat( unsigned char tile_x<map_bat_x>, unsigned char tile_y<map_bat_y>, unsigned char tile_w<map_draw_x>, unsigned char tile_h<map_draw_y> );
  187                        	;
  188                        	; Normally you'd just use _draw_bat() and _scroll_bat(), but for those folks
  189                        	; who really wish to take manual control, you can use this.
  190                        	;
  191                        	
  192               0001     		.if	SUPPORT_SGX
  193                        	
  194                        	_sgx_blit_bat	.proc
  200                        			.endp
  201                        		.endif
  202                        	
  203    02:D758             	_blit_bat	.proc
  204                        	
  205    02:D758  82         			clx				; Offset to PCE VDC.
  206                        	
  207    02:D759  43 08      			tma3				; Preserve MPR3..MPR5.
  208    02:D75B  48         			pha
  209    02:D75C  43 10      			tma4
  210    02:D75E  48         			pha
  211    02:D75F  43 20      			tma5
  212    02:D761  48         			pha
  213                        	
  214    02:D762  BD 84 26   			lda	vdc_map_option, x	; Preserve current map options.
  215    02:D765  48         			pha
  216    02:D766  09 C0      			ora	#MAP_UNALIGNED_X | MAP_UNALIGNED_Y
  217    02:D768  9D 84 26   			sta	vdc_map_option, x
  218                        	
  219    02:D76B  20 A2 D7   			jsr	bat_pxl_2_chr		; Set up the draw coordinates.
  220                        	
  221    02:D76E  A5 FA      			lda	<map_draw_w		; Are we drawing just 1 column?
  222    02:D770  C9 01      			cmp	#1
  223    02:D772  F0 1E      			beq	.draw_column
  224                        	
  225                        			; Draw N rows.
  226                        	
  227    02:D774  A5 FC      	.draw_rows:	lda	<map_chr_x		; Reset previous X position.
  228    02:D776  9D B3 2B   			sta	vdc_old_chr_x, x
  229                        	
  230    02:D779  A5 FE      			lda	<map_chr_y		; Reset previous Y position,
  231    02:D77B  1A         			inc	a			; ready to draw rows upwards.
  232    02:D77C  9D B4 2B   			sta	vdc_old_chr_y, x
  233                        	
  234    02:D77F  20 85 D8   			jsr	bat_scroll_y		; Draw a row of CHR to the BAT.
  235                        	
  236                        			; Drawing completed.
  237                        	
  238    02:D782  68         	.finished:	pla				; Restore previous map options.
  239    02:D783  9D 84 26   			sta	vdc_map_option, x
  240                        	
  241    02:D786  68         			pla				; Restore MPR3..MPR5.
  242    02:D787  53 20      			tam5
  243    02:D789  68         			pla
  244    02:D78A  53 10      			tam4
  245    02:D78C  68         			pla
  246    02:D78D  53 08      			tam3
  247                        	
  248                        	.exit:		leave
         02:D78F  4C EF FF   			jmp	leave_proc
  249                        	
  250                        			; Draw 1 column.
  251                        	
  252    02:D792  A5 FC      	.draw_column:	lda	<map_chr_x		; Reset previous X position.
  253    02:D794  1A         			inc	a			; ready to draw 1 column.
  254    02:D795  9D B3 2B   			sta	vdc_old_chr_x, x
  255                        	
  256    02:D798  A5 FE      			lda	<map_chr_y		; Reset previous Y position.
  257    02:D79A  9D B4 2B   			sta	vdc_old_chr_y, x
  258                        	
  259    02:D79D  20 C6 D7   			jsr	bat_scroll_x		; Draw a single column of CHR.
  260                        	
  261    02:D7A0  80 E0      			bra	.finished
  262                        	
  263                        			.endp
  264                        	
  265                        	
  266                        	
  267                        	; ***************************************************************************
  268                        	; ***************************************************************************
  269                        	;
  270                        	
  271    02:D7A2  BD 80 26   	bat_pxl_2_chr:	lda.l	vdc_map_pxl_x, x	; Get current map X coordinate.
  272    02:D7A5  85 FC      			sta.l	<map_pxl_x
  273    02:D7A7  BD 81 26   			lda.h	vdc_map_pxl_x, x	; Xvert map_pxl_x to map_chr_x.
  274    02:D7AA  4A         			lsr	a
  275    02:D7AB  66 FC      			ror.l	<map_pxl_x
  276    02:D7AD  4A         			lsr	a
  277    02:D7AE  66 FC      			ror.l	<map_pxl_x
  278    02:D7B0  4A         			lsr	a
  279    02:D7B1  66 FC      			ror.l	<map_pxl_x		; Max map width is 256 CHR.
  280                        	
  281    02:D7B3  BD 82 26   			lda.l	vdc_map_pxl_y, x	; Get current map Y coordinate.
  282    02:D7B6  85 FE      			sta.l	<map_pxl_y
  283    02:D7B8  BD 83 26   			lda.h	vdc_map_pxl_y, x	; Xvert map_pxl_y to map_chr_y.
  284    02:D7BB  4A         			lsr	a
  285    02:D7BC  66 FE      			ror.l	<map_pxl_y
  286    02:D7BE  4A         			lsr	a
  287    02:D7BF  66 FE      			ror.l	<map_pxl_y
  288    02:D7C1  4A         			lsr	a
  289    02:D7C2  66 FE      			ror.l	<map_pxl_y		; Max map width is 256 CHR.
  290                        	
  291    02:D7C4  60         			rts
  292                        	
  293                        	
  294                        	
  295                        	; ***************************************************************************
  296                        	; ***************************************************************************
  297                        	;
  298                        	; bat_scroll_x - Update the BAT when X coordinate changes.
  299                        	;
  300                        	; N.B. This only ever draws a single column!
  301                        	;
  302                        	
  303    02:D7C5  60         	!no_change:	rts
  304                        	
  305    02:D7C6  A5 FC      	bat_scroll_x:	lda	<map_chr_x		; Compare old_x with cur_x.
  306    02:D7C8  DD B3 2B   			cmp	vdc_old_chr_x, x
  307    02:D7CB  F0 F8      			beq	!no_change-		; Do nothing if no change.
  308    02:D7CD  9D B3 2B   			sta	vdc_old_chr_x, x
  309    02:D7D0  30 05      			bmi	.moved			; Test the sign of the change.
  310                        	
  311    02:D7D2  18         			clc				; Draw RHS if chr_x >= old_x.
  312    02:D7D3  7D 7C 26   			adc	vdc_map_draw_w, x	; Usually (SCR_WIDTH / 8) + 1.
  313    02:D7D6  3A         			dec	a
  314                        	
  315    02:D7D7  48         	.moved:		pha				; Push chr_x in map section.
  316                        	
  317    02:D7D8  3C 84 26   			bit	vdc_map_option, x	; Set bit7 to disable aligning
  318    02:D7DB  30 05      			bmi	!+			; BAT X with the map X.
  319    02:D7DD  3D 79 26   			and	vdc_bat_x_mask, x
  320    02:D7E0  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
  321                        	
  322    02:D7E2  A5 FE      	!:		lda	<map_chr_y		; Y = chr_y in map section.
  323    02:D7E4  A8         			tay
  324                        	
  325    02:D7E5  3C 84 26   			bit	vdc_map_option, x	; Set bit6 to disable aligning
  326    02:D7E8  70 05      			bvs	!+			; BAT Y with the map Y.
  327    02:D7EA  3D 7A 26   			and	vdc_bat_y_mask, x
  328    02:D7ED  85 F9      			sta	<map_bat_y		; Save BAT Y chr coordinate.
  329                        	
  330               0000     		.if	FAST_MULTIPLY
  333                        		.endif
  334                        	
  335    02:D7EF  BD 7E 26   	!:		lda	vdc_map_line_w, x	; Map width in CHR (0 == 256).
  336    02:D7F2  D0 05      			bne	!+
  337                        	
  338    02:D7F4  64 EE      			stz.l	<map_line		; Multiply by 256 is easy!
  339    02:D7F6  98         			tya
  340    02:D7F7  80 15      			bra	.double
  341                        	
  342               0000     		.if	FAST_MULTIPLY
  354                        		.else
  355    02:D7F9  84 EF      	!:		sty.h	<map_line		; Takes 144..176 cycles.
  356    02:D7FB  A0 08      			ldy	#8
  357    02:D7FD  4A         			lsr	a
  358    02:D7FE  85 EE      			sta.l	<map_line
  359    02:D800  62         			cla
  360    02:D801  90 03      			bcc	.rotate
  361    02:D803  18         	.add:		clc
  362    02:D804  65 EF      			adc.h	<map_line
  363    02:D806  6A         	.rotate:	ror	a
  364    02:D807  66 EE      			ror.l	<map_line		; Lo-byte of (CHR Y * width).
  365    02:D809  88         			dey
  366    02:D80A  B0 F7      			bcs	.add
  367    02:D80C  D0 F8      			bne	.rotate
  368                        		.endif
  369                        	
  370    02:D80E  06 EE      	.double:	asl.l	<map_line		; Lo-byte of (CHR Y * width * 2).
  371    02:D810  2A         			rol	a
  372    02:D811  A8         			tay				; Hi-byte of (CHR Y * width * 2).
  373                        	
  374    02:D812  BD BD 2B   			lda	vdc_map_bank, x		; Put the MAP into MPR3-MPR5.
  375    02:D815  53 08      			tam3				; Allow for 16KByte chrmap.
  376    02:D817  1A         			inc	a
  377    02:D818  53 10      			tam4
  378    02:D81A  1A         			inc	a
  379    02:D81B  53 20      			tam5
  380                        	
  381    02:D81D  68         			pla				; Pop chr_x in map section.
  382    02:D81E  0A         			asl	a			; 2-bytes for a BAT value.
  383    02:D81F  90 02      			bcc	!+
  384    02:D821  C8         			iny				; Hi-byte of (CHR Y * width * 2).
  385    02:D822  18         			clc
  386    02:D823  65 EE      	!:		adc.l	<map_line		; Lo-byte of (CHR Y * width * 2).
  387    02:D825  90 01      			bcc	!+
  388    02:D827  C8         			iny
  389                        	
  390    02:D828  18         	!:		clc				; Calc map data pointer.
  391    02:D829  7D BB 2B   			adc.l	vdc_map_addr, x
  392    02:D82C  85 EC      			sta.l	<_bp			; Maximum map size is 16KBytes
  393    02:D82E  98         			tya				; so we don't need to consider
  394    02:D82F  7D BC 2B   			adc.h	vdc_map_addr, x		; bank overflow.
  395    02:D832  85 ED      			sta.h	<_bp
  396                        	
  397    02:D834  C2         			cly				; Calculate the map line delta
  398    02:D835  BD 7E 26   			lda	vdc_map_line_w, x	; in bytes.
  399    02:D838  D0 01      			bne	!+
  400    02:D83A  C8         			iny
  401    02:D83B  0A         	!:		asl	a
  402    02:D83C  85 EE      			sta.l	<map_line
  403    02:D83E  98         			tya
  404    02:D83F  2A         			rol	a
  405    02:D840  85 EF      			sta.h	<map_line
  406                        	
  407                        			; Draw the first part of the column.
  408                        	
  409    02:D842  A5 F8      	.draw_col:	lda	<map_bat_x		; Set the BAT VRAM destination
  410    02:D844  85 F0      			sta.l	<_di			; coordinates.
  411    02:D846  A5 F9      			lda	<map_bat_y
  412    02:D848  85 F1      			sta.h	<_di
  413                        	
  414    02:D84A  5D 7A 26   			eor	vdc_bat_y_mask, x	; Calc CHR before wrap.
  415    02:D84D  1A         			inc	a
  416    02:D84E  C5 FB      			cmp	<map_draw_h		; Usually (SCR_HEIGHT / 8) + 1.
  417    02:D850  90 02      			bcc	!+
  418    02:D852  A5 FB      			lda	<map_draw_h		; Maximum CHR to draw.
  419    02:D854  85 00      	!:		sta	<map_count		; Set number of CHR to draw.
  420    02:D856  85 01      			sta	<map_drawn		; Preserve number of CHR drawn.
  421                        	
  422    02:D858  A9 05      			lda	#VDC_CR			; Set VDC auto-increment from
  423    02:D85A  95 F7      			sta	<vdc_reg, x		; the BAT width, which is set
  424    02:D85C  9D 00 02   			sta	VDC_AR, x		; up by set_screen_size().
  425    02:D85F  B5 F4      			lda	<vdc_crh, x
  426    02:D861  9D 03 02   			sta	VDC_DH, x
  427                        	
  428    02:D864  20 66 D9   			jsr	bat_col_strip		; Draw top of vertical strip.
  429                        	
  430                        			; Wrap around and draw the rest of the column (if needed).
  431                        	
  432    02:D867  38         			sec				; Are there any more CHR that
  433    02:D868  A5 FB      			lda	<map_draw_h		; need to be drawn?
  434    02:D86A  E5 01      			sbc	<map_drawn
  435    02:D86C  F0 0B      			beq	.done
  436                        	
  437    02:D86E  85 00      			sta	<map_count		; Set number of CHR to draw.
  438                        	
  439    02:D870  A5 F8      			lda	<map_bat_x		; Set the BAT VRAM destination
  440    02:D872  85 F0      			sta.l	<_di			; coordinates.
  441    02:D874  64 F1      			stz.h	<_di			; Reset 1st row to draw.
  442                        	
  443    02:D876  20 66 D9   			jsr	bat_col_strip		; Draw btm of vertical strip.
  444                        	
  445    02:D879  A9 05      	.done:		lda	#VDC_CR			; Set VDC auto-increment to 1.
  446    02:D87B  95 F7      			sta	<vdc_reg, x
  447    02:D87D  9D 00 02   			sta	VDC_AR, x
  448    02:D880  9E 03 02   			stz	VDC_DH, x
  449                        	
  450    02:D883  60         			rts
  451                        	
  452                        	
  453                        	
  454                        	; ***************************************************************************
  455                        	; ***************************************************************************
  456                        	;
  457                        	; bat_scroll_y - Update the BAT when Y coordinate changes.
  458                        	;
  459                        	; N.B. This draws multiple rows when called from _draw_bat or _blit_bat.
  460                        	;
  461                        	
  462    02:D884  60         	!no_change:	rts
  463                        	
  464    02:D885  A5 FE      	bat_scroll_y:	lda	<map_chr_y		; Compare old_y with cur_y.
  465    02:D887  DD B4 2B   			cmp	vdc_old_chr_y, x
  466    02:D88A  F0 F8      			beq	!no_change-		; Do nothing if no change.
  467    02:D88C  9D B4 2B   			sta	vdc_old_chr_y, x
  468    02:D88F  30 05      			bmi	.moved			; Test the sign of the change.
  469                        	
  470    02:D891  18         			clc				; Draw bottom if chr_y >= old_y.
  471    02:D892  7D 7D 26   			adc	vdc_map_draw_h, x	; Usually (SCR_HEIGHT / 8) + 1.
  472    02:D895  3A         			dec	a
  473                        	
  474    02:D896  A8         	.moved:		tay				; Y = chr_y in map section.
  475                        	
  476    02:D897  3C 84 26   			bit	vdc_map_option, x	; Set bit6 to disable aligning
  477    02:D89A  70 05      			bvs	!+			; BAT Y with the map Y.
  478    02:D89C  3D 7A 26   			and	vdc_bat_y_mask, x
  479    02:D89F  85 F9      			sta	<map_bat_y		; Save BAT Y chr coordinate.
  480                        	
  481    02:D8A1  3C 84 26   	!:		bit	vdc_map_option, x	; Set bit7 to disable aligning
  482    02:D8A4  30 07      			bmi	!+			; BAT X with the map X.
  483    02:D8A6  A5 FC      			lda	<map_chr_x
  484    02:D8A8  3D 79 26   			and	vdc_bat_x_mask, x
  485    02:D8AB  85 F8      			sta	<map_bat_x		; Save BAT X chr coordinate.
  486                        	
  487               0000     		.if	FAST_MULTIPLY
  490                        		.endif
  491                        	
  492    02:D8AD  BD 7E 26   	!:		lda	vdc_map_line_w, x	; Map width in CHR (0 == 256).
  493    02:D8B0  D0 05      			bne	!+
  494                        	
  495    02:D8B2  64 EE      			stz.l	<map_line		; Multiply by 256 is easy!
  496    02:D8B4  98         			tya
  497    02:D8B5  80 15      			bra	.double
  498                        	
  499               0000     		.if	FAST_MULTIPLY
  511                        		.else
  512    02:D8B7  84 EF      	!:		sty.h	<map_line		; Takes 144..176 cycles.
  513    02:D8B9  A0 08      			ldy	#8
  514    02:D8BB  4A         			lsr	a
  515    02:D8BC  85 EE      			sta.l	<map_line
  516    02:D8BE  62         			cla
  517    02:D8BF  90 03      			bcc	.rotate
  518    02:D8C1  18         	.add:		clc
  519    02:D8C2  65 EF      			adc.h	<map_line
  520    02:D8C4  6A         	.rotate:	ror	a
  521    02:D8C5  66 EE      			ror.l	<map_line		; Lo-byte of (CHR Y * width).
  522    02:D8C7  88         			dey
  523    02:D8C8  B0 F7      			bcs	.add
  524    02:D8CA  D0 F8      			bne	.rotate
  525                        		.endif
  526                        	
  527    02:D8CC  06 EE      	.double:	asl.l	<map_line		; Lo-byte of (CHR Y * width * 2).
  528    02:D8CE  2A         			rol	a
  529    02:D8CF  85 EF      			sta.h	<map_line		; Hi-byte of (CHR Y * width * 2).
  530    02:D8D1  A8         			tay
  531                        	
  532    02:D8D2  BD BD 2B   			lda	vdc_map_bank, x		; Put the MAP into MPR3-MPR5.
  533    02:D8D5  53 08      			tam3				; Allow for 16KByte chrmap.
  534    02:D8D7  1A         			inc	a
  535    02:D8D8  53 10      			tam4
  536    02:D8DA  1A         			inc	a
  537    02:D8DB  53 20      			tam5
  538                        	
  539                        			; Loop to here if drawing multiple rows.
  540                        	
  541    02:D8DD  A5 FC      	.next_row:	lda	<map_chr_x		; Map CHR X coordinate.
  542    02:D8DF  0A         			asl	a			; 2-bytes for a BAT value!
  543    02:D8E0  90 02      			bcc	!+
  544    02:D8E2  C8         			iny				; Hi-byte of (CHR Y * width * 2).
  545    02:D8E3  18         			clc
  546    02:D8E4  65 EE      	!:		adc.l	<map_line		; Lo-byte of (CHR Y * width * 2).
  547    02:D8E6  90 01      			bcc	!+
  548    02:D8E8  C8         			iny
  549    02:D8E9  18         	!:		clc				; Calc map data pointer.
  550    02:D8EA  7D BB 2B   			adc.l	vdc_map_addr, x
  551    02:D8ED  85 EC      			sta.l	<_bp			; Maximum map size is 16KBytes
  552    02:D8EF  98         			tya				; so we don't need to consider
  553    02:D8F0  7D BC 2B   			adc.h	vdc_map_addr, x		; bank overflow.
  554    02:D8F3  85 ED      			sta.h	<_bp
  555                        	
  556                        			; Draw the first part of the row.
  557                        	
  558    02:D8F5  A5 F9      	.draw_row:	lda	<map_bat_y		; Set the BAT VRAM destination
  559    02:D8F7  85 F1      			sta.h	<_di			; coordinates.
  560    02:D8F9  A5 F8      			lda	<map_bat_x
  561    02:D8FB  85 F0      			sta.l	<_di
  562                        	
  563    02:D8FD  5D 79 26   			eor	vdc_bat_x_mask, x	; Calc CHR before wrap.
  564    02:D900  1A         			inc	a
  565    02:D901  C5 FA      			cmp	<map_draw_w		; Usually (SCR_WIDTH / 8) + 1.
  566    02:D903  90 02      			bcc	!+
  567    02:D905  A5 FA      			lda	<map_draw_w		; Maximum CHR to draw.
  568    02:D907  85 00      	!:		sta	<map_count		; Set number of CHR to draw.
  569    02:D909  85 01      			sta	<map_drawn		; Preserve number of CHR drawn.
  570                        	
  571    02:D90B  20 45 D9   			jsr	bat_row_strip		; Draw lhs of horizontal strip.
  572                        	
  573                        			; Wrap around and draw the rest of the row (if needed).
  574                        	
  575    02:D90E  38         			sec				; Are there any more CHR that
  576    02:D90F  A5 FA      			lda	<map_draw_w		; need to be drawn?
  577    02:D911  E5 01      			sbc	<map_drawn
  578    02:D913  F0 0B      			beq	.done_row
  579                        	
  580    02:D915  85 00      			sta	<map_count		; Set number of CHR to draw.
  581                        	
  582    02:D917  A5 F9      			lda	<map_bat_y		; Set the BAT VRAM destination
  583    02:D919  85 F1      			sta.h	<_di			; coordinates.
  584    02:D91B  64 F0      			stz.l	<_di			; Reset 1st column to draw.
  585                        	
  586    02:D91D  20 45 D9   			jsr	bat_row_strip		; Draw rhs of horizontal strip.
  587                        	
  588    02:D920  C6 FB      	.done_row:	dec	<map_draw_h		; Are all desired rows drawn?
  589    02:D922  F0 20      			beq	.finished
  590                        	
  591    02:D924  A5 F9      			lda	<map_bat_y		; Move BAT Y down by 1.
  592    02:D926  1A         			inc	a
  593    02:D927  3D 7A 26   			and	vdc_bat_y_mask, x
  594    02:D92A  85 F9      			sta	<map_bat_y
  595                        	
  596    02:D92C  A4 EF      			ldy.h	<map_line		; Move the map line pointer to
  597    02:D92E  C8         			iny				; the next line.
  598    02:D92F  BD 7E 26   			lda	vdc_map_line_w, x
  599    02:D932  F0 0B      			beq	!++			; vdc_map_line_w == 0 == 256.
  600    02:D934  0A         			asl	a			; 2-bytes for a BAT value!
  601    02:D935  B0 01      			bcs	!+
  602    02:D937  88         			dey				; Fix if vdc_map_line_w <= 127.
  603    02:D938  18         	!:		clc
  604    02:D939  65 EE      			adc.l	<map_line
  605    02:D93B  85 EE      			sta.l	<map_line
  606    02:D93D  90 01      			bcc	!++
  607    02:D93F  C8         	!:		iny
  608    02:D940  84 EF      	!:		sty.h	<map_line		; Needed for .next_row!
  609                        	
  610    02:D942  80 99      			bra	.next_row		; Draw next row.
  611                        	
  612    02:D944  60         	.finished:	rts
  613                        	
  614                        	
  615                        	
  616                        	; ***************************************************************************
  617                        	; ***************************************************************************
  618                        	;
  619                        	; bat_row_strip - Draw a single row of CHR into the BAT.
  620                        	;
  621                        	
  622    02:D945  20 34 E4   	bat_row_strip:	jsr	set_di_xy_mawr		; Set the BAT VRAM destination.
  623                        	
  624    02:D948  C2         			cly				; 2
  625    02:D949  B1 EC      	.repeat:	lda	[_bp], y		; 7
  626    02:D94B  9D 02 02   			sta	VDC_DL, x		; 6
  627    02:D94E  C8         			iny				; 2
  628    02:D94F  B1 EC      			lda	[_bp], y		; 7
  629               0000     		.if	CHRMAP_BAT_FLAG
  634                        		.endif
  635    02:D951  9D 03 02   			sta	VDC_DH, x		; 6
  636    02:D954  C8         			iny				; 2
  637                        	
  638    02:D955  C6 00      	!:		dec	<map_count		; 6
  639    02:D957  D0 F0      			bne	.repeat			; 4
  640                        	
  641    02:D959  98         			tya				; 2
  642    02:D95A  F0 07      			beq	!+			; 2/4
  643    02:D95C  18         			clc				; 2
  644    02:D95D  65 EC      			adc.l	<_bp			; 4
  645    02:D95F  85 EC      			sta.l	<_bp			; 4
  646    02:D961  90 02      			bcc	.done			; 2/4
  647    02:D963  E6 ED      	!:		inc.h	<_bp			; 6
  648                        	
  649    02:D965  60         	.done:		rts
  650                        	
  651                        	
  652                        	
  653                        	; ***************************************************************************
  654                        	; ***************************************************************************
  655                        	;
  656                        	; bat_col_strip - Draw a single column of CHR into the BAT.
  657                        	;
  658                        	
  659    02:D966  20 34 E4   	bat_col_strip:	jsr	set_di_xy_mawr		; Set the BAT VRAM destination.
  660                        	
  661    02:D969  A0 01      			ldy	#1			; 2
  662    02:D96B  B2 EC      	.repeat:	lda	[_bp]			; 7
  663    02:D96D  9D 02 02   			sta	VDC_DL, x		; 6
  664    02:D970  B1 EC      			lda	[_bp], y		; 7
  665               0000     		.if	CHRMAP_BAT_FLAG
  670                        		.endif
  671    02:D972  9D 03 02   			sta	VDC_DH, x		; 6
  672                        	
  673    02:D975  18         			clc				; 2
  674    02:D976  A5 EE      			lda.l	<map_line		; 4
  675    02:D978  65 EC      			adc.l	<_bp			; 4
  676    02:D97A  85 EC      			sta.l	<_bp			; 4
  677    02:D97C  A5 EF      			lda.h	<map_line		; 4
  678    02:D97E  65 ED      			adc.h	<_bp			; 4
  679    02:D980  85 ED      			sta.h	<_bp			; 4
  680                        	
  681    02:D982  C6 00      			dec	<map_count		; 6
  682    02:D984  D0 E5      			bne	.repeat			; 4
  683                        	
  684    02:D986  60         			rts
  685                        	
  686                        		.endprocgroup	; chrmap_group
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   88                        		.endif	HUCC_USES_CHRMAP
   89                        	
   90               0001     		.ifdef	HUCC_USES_OLD_LINE		; Set in hucc_old_line.h
                             #[3]   "..\..\..\include\hucc\hucc-old-line.asm"
   91                        			include	"hucc-old-line.asm"
    1                        	; ***************************************************************************
    2                        	; ***************************************************************************
    3                        	;
    4                        	; hucc-old-line.asm
    5                        	;
    6                        	; Based on the original HuC and MagicKit functions by David Michel and the
    7                        	; other original HuC developers.
    8                        	;
    9                        	; Modifications copyright John Brandwood 2024-2025.
   10                        	;
   11                        	; Distributed under the Boost Software License, Version 1.0.
   12                        	; (See accompanying file LICENSE_1_0.txt or copy at
   13                        	;  http://www.boost.org/LICENSE_1_0.txt)
   14                        	;
   15                        	; ***************************************************************************
   16                        	; ***************************************************************************
   17                        	
   18                        	
   19                        	
   20                        	; ***************************************************************************
   21                        	; ***************************************************************************
   22                        	;
   23                        	; void __fastcall gfx_init( unsigned int start_vram_addr<_ax> );
   24                        	;
   25                        	; initialize graphics mode
   26                        	; - points graphics map to tiles at start_vram_addr
   27                        	
   28                        	_gfx_init.1	.proc
   73                        			.endp
   74                        	
   75                        	
   76                        	
   77                        	; ***************************************************************************
   78                        	; ***************************************************************************
   79                        	;
   80                        	; void __fastcall gfx_clear( unsigned int start_vram_addr<_di> );
   81                        	;
   82                        	; Clear the values in the graphics tiles
   83                        	; - places zeroes in graphics tiles at start_vram_addr
   84                        	
   85                        	_gfx_clear.1	.proc
  105                        			.endp
  106                        	
  107                        	
  108                        	
  109                        	; ***************************************************************************
  110                        	; ***************************************************************************
  111                        	;
  112                        	; void __fastcall gfx_line( unsigned int x1<_gfx_x1>, unsigned int y1<_gfx_y1>, unsigned int x2<_gfx_x2>, unsigned int y2<_gfx_y2>, unsigned char color<_gfx_color> );
  113                        	
  114                        	huc_gfx_line	.procgroup
  459                        			.endprocgroup	; huc_gfx_line
                             #[2]   "..\..\..\include\hucc\hucc-final.asm"
   92                        		.endif
   93                        	
   94               0000     		.ifdef	HUCC_USES_ZX0			; Set in hucc_zx0.h
   96                        		.endif
   97                        	
   98                        	
   99                        	
  100                        	; ***************************************************************************
  101                        	; ***************************************************************************
  102                        	;
  103                        	; Check that C "__zp" declarations aren't overwriting System Card variables.
  104                        	;
  105                        	
  106               20A0     			.zp
  107               0000     		.if	(* > zpg_sys_top) || (USING_PSGDRIVER && (* > zpg_psg_top))
  109                        		.endif
  110                        	
  111                        	
  112                        	
  113                        	; ***************************************************************************
  114                        	; ***************************************************************************
  115                        	;
  116                        	; Check that there isn't too much C "const" data in the ".RODATA" section.
  117                        	;
  118                        	
  119               61C9     			.rodata
  120               0000     		.if	(bank(*) - _bank_base) >= (CONST_BANK + 2)
  122                        		.endif
  123               E937     			.code
                             #[1]   "main.s"

PROCEDURE LIST (in order of size):

Size: $1945, Addr: $01:C1C9,      .proc _update_PLAYER
Size: $0A61, Addr: $17:C7E0,      .proc _joypad_DIR
Size: $086D, Addr: $17:D241, .procgroup blkmap_group
Size: $0831, Addr: $02:C000,      .proc _update_WEAPON
Size: $0580, Addr: $02:C831,      .proc _joypad_BUTTONS_SHOP
Size: $04F5, Addr: $17:DAAE,      .proc _init_LEVEL
Size: $0414, Addr: $01:DB0E,      .proc _init_SHOP
Size: $0390, Addr: $02:CDB1,      .proc huc_monofont_x
Size: $02F0, Addr: $02:D141,      .proc _init_HUD
Size: $02C4, Addr: $02:D431,      .proc _load_OBJECT_TILES
Size: $0292, Addr: $02:D6F5, .procgroup chrmap_group
Size: $024F, Addr: $02:D987,      .proc _joypad_BUTTONS
Size: $01F7, Addr: $08:DDC0,      .proc _main
Size: $0197, Addr: $02:DBD6,      .proc _joypad_BUTTONS_TITLE
Size: $0184, Addr: $02:DD6D,      .proc _check_OBJECT
Size: $016F, Addr: $18:C000,      .proc _init_TITLE
Size: $0167, Addr: $18:C16F,      .proc _scroll_object
Size: $0167, Addr: $18:C2D6,      .proc _scroll_chest
Size: $0167, Addr: $18:C43D,      .proc _scroll_npc
Size: $013E, Addr: $18:C5A4,      .proc _check_NPC
Size: $013E, Addr: $18:C6E2,      .proc _init_OBJECT_LV1
Size: $0108, Addr: $02:DEF1,      .proc read_joypads
Size: $0107, Addr: $18:C820,      .proc _recenter_CAMERA
Size: $00DF, Addr: $18:C927, .procgroup vdc_set_mode
Size: $00D5, Addr: $01:DF22,      .proc _init_NPC_LV1
Size: $00C8, Addr: $18:CA06,      .proc _init_CHEST_LV1
Size: $00BF, Addr: $18:CACE, .procgroup vdc_tty_out
Size: $00A5, Addr: $18:CB8D,      .proc _display_TIME_SHOP
Size: $009D, Addr: $18:CC32,      .proc _display_TIME_LEVEL
Size: $0086, Addr: $18:CCCF,      .proc _sgx_scroll_split.5
Size: $0081, Addr: $18:CD55,      .proc vbl_init_scroll
Size: $007A, Addr: $18:CDD6,      .proc _check_TILE_DEPTH
Size: $0077, Addr: $18:CE50,      .proc core_main
Size: $006A, Addr: $18:CEC7, .procgroup load_vram_group
Size: $0064, Addr: $18:CF31,      .proc _check_BG
Size: $0062, Addr: $18:CF95,      .proc _init_256x224
Size: $004E, Addr: $17:DFA3, .procgroup old_satb_group
Size: $004B, Addr: $18:CFF7, .procgroup hucc_memcmp
Size: $0043, Addr: $08:DFB7, .procgroup vdc_clear_vram
Size: $0043, Addr: $18:D042,      .proc sgx_detect
Size: $0042, Addr: $18:D085,      .proc _init_PLAYER
Size: $003F, Addr: $18:D0C7, .procgroup load_bat_group
Size: $003E, Addr: $18:D106,      .proc _init_VARIABLES
Size: $003E, Addr: $18:D144,      .proc _vram2vram.3
Size: $003B, Addr: $18:D182,      .proc init_random
Size: $002E, Addr: $18:D1BD,      .proc _scroll_BG
Size: $002B, Addr: $18:D1EB,      .proc _load_palette.3
Size: $0026, Addr: $18:D216,      .proc _load_CHEST_TILES
Size: $0026, Addr: $18:D23C,      .proc _load_NPC_TILES
Size: $0023, Addr: $18:D262,      .proc _hide_LEVEL_SPRITES
Size: $001D, Addr: $18:D285,      .proc _init_SYSTEM
Size: $001C, Addr: $18:D2A2,      .proc _display_SCORE
Size: $001C, Addr: $18:D2BE,      .proc _display_ZENNY
Size: $001C, Addr: $18:D2DA,      .proc clear_vce
Size: $001A, Addr: $18:D2F6,      .proc _display_KEY
Size: $001A, Addr: $18:D310,      .proc _display_POTION
